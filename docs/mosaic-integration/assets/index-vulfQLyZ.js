var Ez=Object.defineProperty;var Az=(e,t,n)=>t in e?Ez(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var te=(e,t,n)=>(Az(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function v4(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var w4={exports:{}},gb={},_4={exports:{}},zt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Up=Symbol.for("react.element"),Mz=Symbol.for("react.portal"),$z=Symbol.for("react.fragment"),Nz=Symbol.for("react.strict_mode"),kz=Symbol.for("react.profiler"),Dz=Symbol.for("react.provider"),Oz=Symbol.for("react.context"),Bz=Symbol.for("react.forward_ref"),Fz=Symbol.for("react.suspense"),Lz=Symbol.for("react.memo"),Rz=Symbol.for("react.lazy"),YE=Symbol.iterator;function Cz(e){return e===null||typeof e!="object"?null:(e=YE&&e[YE]||e["@@iterator"],typeof e=="function"?e:null)}var S4={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x4=Object.assign,I4={};function jf(e,t,n){this.props=e,this.context=t,this.refs=I4,this.updater=n||S4}jf.prototype.isReactComponent={};jf.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};jf.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function T4(){}T4.prototype=jf.prototype;function Rx(e,t,n){this.props=e,this.context=t,this.refs=I4,this.updater=n||S4}var Cx=Rx.prototype=new T4;Cx.constructor=Rx;x4(Cx,jf.prototype);Cx.isPureReactComponent=!0;var qE=Array.isArray,E4=Object.prototype.hasOwnProperty,Ux={current:null},A4={key:!0,ref:!0,__self:!0,__source:!0};function M4(e,t,n){var r,i={},s=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)E4.call(t,r)&&!A4.hasOwnProperty(r)&&(i[r]=t[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Up,type:e,key:s,ref:o,props:i,_owner:Ux.current}}function Uz(e,t){return{$$typeof:Up,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Px(e){return typeof e=="object"&&e!==null&&e.$$typeof===Up}function Pz(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var WE=/\/+/g;function Kv(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Pz(""+e.key):t.toString(36)}function U0(e,t,n,r,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Up:case Mz:o=!0}}if(o)return o=e,i=i(o),e=r===""?"."+Kv(o,0):r,qE(i)?(n="",e!=null&&(n=e.replace(WE,"$&/")+"/"),U0(i,t,n,"",function(c){return c})):i!=null&&(Px(i)&&(i=Uz(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(WE,"$&/")+"/")+e)),t.push(i)),1;if(o=0,r=r===""?".":r+":",qE(e))for(var a=0;a<e.length;a++){s=e[a];var l=r+Kv(s,a);o+=U0(s,t,n,l,i)}else if(l=Cz(e),typeof l=="function")for(e=l.call(e),a=0;!(s=e.next()).done;)s=s.value,l=r+Kv(s,a++),o+=U0(s,t,n,l,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Uy(e,t,n){if(e==null)return e;var r=[],i=0;return U0(e,r,"","",function(s){return t.call(n,s,i++)}),r}function zz(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var nr={current:null},P0={transition:null},jz={ReactCurrentDispatcher:nr,ReactCurrentBatchConfig:P0,ReactCurrentOwner:Ux};zt.Children={map:Uy,forEach:function(e,t,n){Uy(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Uy(e,function(){t++}),t},toArray:function(e){return Uy(e,function(t){return t})||[]},only:function(e){if(!Px(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};zt.Component=jf;zt.Fragment=$z;zt.Profiler=kz;zt.PureComponent=Rx;zt.StrictMode=Nz;zt.Suspense=Fz;zt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jz;zt.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=x4({},e.props),i=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=Ux.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(l in t)E4.call(t,l)&&!A4.hasOwnProperty(l)&&(r[l]=t[l]===void 0&&a!==void 0?a[l]:t[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Up,type:e.type,key:i,ref:s,props:r,_owner:o}};zt.createContext=function(e){return e={$$typeof:Oz,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Dz,_context:e},e.Consumer=e};zt.createElement=M4;zt.createFactory=function(e){var t=M4.bind(null,e);return t.type=e,t};zt.createRef=function(){return{current:null}};zt.forwardRef=function(e){return{$$typeof:Bz,render:e}};zt.isValidElement=Px;zt.lazy=function(e){return{$$typeof:Rz,_payload:{_status:-1,_result:e},_init:zz}};zt.memo=function(e,t){return{$$typeof:Lz,type:e,compare:t===void 0?null:t}};zt.startTransition=function(e){var t=P0.transition;P0.transition={};try{e()}finally{P0.transition=t}};zt.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};zt.useCallback=function(e,t){return nr.current.useCallback(e,t)};zt.useContext=function(e){return nr.current.useContext(e)};zt.useDebugValue=function(){};zt.useDeferredValue=function(e){return nr.current.useDeferredValue(e)};zt.useEffect=function(e,t){return nr.current.useEffect(e,t)};zt.useId=function(){return nr.current.useId()};zt.useImperativeHandle=function(e,t,n){return nr.current.useImperativeHandle(e,t,n)};zt.useInsertionEffect=function(e,t){return nr.current.useInsertionEffect(e,t)};zt.useLayoutEffect=function(e,t){return nr.current.useLayoutEffect(e,t)};zt.useMemo=function(e,t){return nr.current.useMemo(e,t)};zt.useReducer=function(e,t,n){return nr.current.useReducer(e,t,n)};zt.useRef=function(e){return nr.current.useRef(e)};zt.useState=function(e){return nr.current.useState(e)};zt.useSyncExternalStore=function(e,t,n){return nr.current.useSyncExternalStore(e,t,n)};zt.useTransition=function(){return nr.current.useTransition()};zt.version="18.2.0";_4.exports=zt;var In=_4.exports;const Vz=v4(In);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yz=In,qz=Symbol.for("react.element"),Wz=Symbol.for("react.fragment"),Hz=Object.prototype.hasOwnProperty,Gz=Yz.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Xz={key:!0,ref:!0,__self:!0,__source:!0};function $4(e,t,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)Hz.call(t,r)&&!Xz.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:qz,type:e,key:s,ref:o,props:i,_owner:Gz.current}}gb.Fragment=Wz;gb.jsx=$4;gb.jsxs=$4;w4.exports=gb;var Ut=w4.exports,U_={},N4={exports:{}},Vr={},k4={exports:{}},D4={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(O,C){var B=O.length;O.push(C);t:for(;0<B;){var P=B-1>>>1,z=O[P];if(0<i(z,C))O[P]=C,O[B]=z,B=P;else break t}}function n(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var C=O[0],B=O.pop();if(B!==C){O[0]=B;t:for(var P=0,z=O.length,H=z>>>1;P<H;){var X=2*(P+1)-1,tt=O[X],Z=X+1,Y=O[Z];if(0>i(tt,B))Z<z&&0>i(Y,tt)?(O[P]=Y,O[Z]=B,P=Z):(O[P]=tt,O[X]=B,P=X);else if(Z<z&&0>i(Y,B))O[P]=Y,O[Z]=B,P=Z;else break t}}return C}function i(O,C){var B=O.sortIndex-C.sortIndex;return B!==0?B:O.id-C.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,f=null,d=3,h=!1,p=!1,g=!1,v=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(O){for(var C=n(c);C!==null;){if(C.callback===null)r(c);else if(C.startTime<=O)r(c),C.sortIndex=C.expirationTime,t(l,C);else break;C=n(c)}}function w(O){if(g=!1,b(O),!p)if(n(l)!==null)p=!0,N(S);else{var C=n(c);C!==null&&F(w,C.startTime-O)}}function S(O,C){p=!1,g&&(g=!1,y(E),E=-1),h=!0;var B=d;try{for(b(C),f=n(l);f!==null&&(!(f.expirationTime>C)||O&&!A());){var P=f.callback;if(typeof P=="function"){f.callback=null,d=f.priorityLevel;var z=P(f.expirationTime<=C);C=e.unstable_now(),typeof z=="function"?f.callback=z:f===n(l)&&r(l),b(C)}else r(l);f=n(l)}if(f!==null)var H=!0;else{var X=n(c);X!==null&&F(w,X.startTime-C),H=!1}return H}finally{f=null,d=B,h=!1}}var _=!1,x=null,E=-1,k=5,I=-1;function A(){return!(e.unstable_now()-I<k)}function D(){if(x!==null){var O=e.unstable_now();I=O;var C=!0;try{C=x(!0,O)}finally{C?L():(_=!1,x=null)}}else _=!1}var L;if(typeof m=="function")L=function(){m(D)};else if(typeof MessageChannel<"u"){var T=new MessageChannel,M=T.port2;T.port1.onmessage=D,L=function(){M.postMessage(null)}}else L=function(){v(D,0)};function N(O){x=O,_||(_=!0,L())}function F(O,C){E=v(function(){O(e.unstable_now())},C)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(O){O.callback=null},e.unstable_continueExecution=function(){p||h||(p=!0,N(S))},e.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<O?Math.floor(1e3/O):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(O){switch(d){case 1:case 2:case 3:var C=3;break;default:C=d}var B=d;d=C;try{return O()}finally{d=B}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(O,C){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var B=d;d=O;try{return C()}finally{d=B}},e.unstable_scheduleCallback=function(O,C,B){var P=e.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?P+B:P):B=P,O){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=B+z,O={id:u++,callback:C,priorityLevel:O,startTime:B,expirationTime:z,sortIndex:-1},B>P?(O.sortIndex=B,t(c,O),n(l)===null&&O===n(c)&&(g?(y(E),E=-1):g=!0,F(w,B-P))):(O.sortIndex=z,t(l,O),p||h||(p=!0,N(S))),O},e.unstable_shouldYield=A,e.unstable_wrapCallback=function(O){var C=d;return function(){var B=d;d=C;try{return O.apply(this,arguments)}finally{d=B}}}})(D4);k4.exports=D4;var Qz=k4.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var O4=In,Rr=Qz;function q(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var B4=new Set,Fh={};function vc(e,t){nf(e,t),nf(e+"Capture",t)}function nf(e,t){for(Fh[e]=t,e=0;e<t.length;e++)B4.add(t[e])}var Eo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),P_=Object.prototype.hasOwnProperty,Kz=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,HE={},GE={};function Zz(e){return P_.call(GE,e)?!0:P_.call(HE,e)?!1:Kz.test(e)?GE[e]=!0:(HE[e]=!0,!1)}function Jz(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function tj(e,t,n,r){if(t===null||typeof t>"u"||Jz(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function rr(e,t,n,r,i,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var An={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){An[e]=new rr(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];An[t]=new rr(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){An[e]=new rr(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){An[e]=new rr(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){An[e]=new rr(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){An[e]=new rr(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){An[e]=new rr(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){An[e]=new rr(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){An[e]=new rr(e,5,!1,e.toLowerCase(),null,!1,!1)});var zx=/[\-:]([a-z])/g;function jx(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(zx,jx);An[t]=new rr(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(zx,jx);An[t]=new rr(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(zx,jx);An[t]=new rr(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){An[e]=new rr(e,1,!1,e.toLowerCase(),null,!1,!1)});An.xlinkHref=new rr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){An[e]=new rr(e,1,!1,e.toLowerCase(),null,!0,!0)});function Vx(e,t,n,r){var i=An.hasOwnProperty(t)?An[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(tj(t,n,i,r)&&(n=null),r||i===null?Zz(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Lo=O4.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Py=Symbol.for("react.element"),cu=Symbol.for("react.portal"),uu=Symbol.for("react.fragment"),Yx=Symbol.for("react.strict_mode"),z_=Symbol.for("react.profiler"),F4=Symbol.for("react.provider"),L4=Symbol.for("react.context"),qx=Symbol.for("react.forward_ref"),j_=Symbol.for("react.suspense"),V_=Symbol.for("react.suspense_list"),Wx=Symbol.for("react.memo"),ta=Symbol.for("react.lazy"),R4=Symbol.for("react.offscreen"),XE=Symbol.iterator;function pd(e){return e===null||typeof e!="object"?null:(e=XE&&e[XE]||e["@@iterator"],typeof e=="function"?e:null)}var je=Object.assign,Zv;function Rd(e){if(Zv===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Zv=t&&t[1]||""}return`
`+Zv+e}var Jv=!1;function tw(e,t){if(!e||Jv)return"";Jv=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=o&&0<=a);break}}}finally{Jv=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Rd(e):""}function ej(e){switch(e.tag){case 5:return Rd(e.type);case 16:return Rd("Lazy");case 13:return Rd("Suspense");case 19:return Rd("SuspenseList");case 0:case 2:case 15:return e=tw(e.type,!1),e;case 11:return e=tw(e.type.render,!1),e;case 1:return e=tw(e.type,!0),e;default:return""}}function Y_(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case uu:return"Fragment";case cu:return"Portal";case z_:return"Profiler";case Yx:return"StrictMode";case j_:return"Suspense";case V_:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case L4:return(e.displayName||"Context")+".Consumer";case F4:return(e._context.displayName||"Context")+".Provider";case qx:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Wx:return t=e.displayName||null,t!==null?t:Y_(e.type)||"Memo";case ta:t=e._payload,e=e._init;try{return Y_(e(t))}catch{}}return null}function nj(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Y_(t);case 8:return t===Yx?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Aa(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function C4(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function rj(e){var t=C4(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function zy(e){e._valueTracker||(e._valueTracker=rj(e))}function U4(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=C4(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function $m(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function q_(e,t){var n=t.checked;return je({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function QE(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Aa(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function P4(e,t){t=t.checked,t!=null&&Vx(e,"checked",t,!1)}function W_(e,t){P4(e,t);var n=Aa(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?H_(e,t.type,n):t.hasOwnProperty("defaultValue")&&H_(e,t.type,Aa(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function KE(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function H_(e,t,n){(t!=="number"||$m(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Cd=Array.isArray;function ku(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Aa(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function G_(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(q(91));return je({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ZE(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(q(92));if(Cd(n)){if(1<n.length)throw Error(q(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Aa(n)}}function z4(e,t){var n=Aa(t.value),r=Aa(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function JE(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function j4(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function X_(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?j4(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var jy,V4=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(jy=jy||document.createElement("div"),jy.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=jy.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Lh(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var hh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ij=["Webkit","ms","Moz","O"];Object.keys(hh).forEach(function(e){ij.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),hh[t]=hh[e]})});function Y4(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||hh.hasOwnProperty(e)&&hh[e]?(""+t).trim():t+"px"}function q4(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Y4(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var sj=je({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Q_(e,t){if(t){if(sj[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(q(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(q(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(q(61))}if(t.style!=null&&typeof t.style!="object")throw Error(q(62))}}function K_(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Z_=null;function Hx(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var J_=null,Du=null,Ou=null;function tA(e){if(e=jp(e)){if(typeof J_!="function")throw Error(q(280));var t=e.stateNode;t&&(t=Sb(t),J_(e.stateNode,e.type,t))}}function W4(e){Du?Ou?Ou.push(e):Ou=[e]:Du=e}function H4(){if(Du){var e=Du,t=Ou;if(Ou=Du=null,tA(e),t)for(e=0;e<t.length;e++)tA(t[e])}}function G4(e,t){return e(t)}function X4(){}var ew=!1;function Q4(e,t,n){if(ew)return e(t,n);ew=!0;try{return G4(e,t,n)}finally{ew=!1,(Du!==null||Ou!==null)&&(X4(),H4())}}function Rh(e,t){var n=e.stateNode;if(n===null)return null;var r=Sb(n);if(r===null)return null;n=r[t];t:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break t;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(q(231,t,typeof n));return n}var t2=!1;if(Eo)try{var yd={};Object.defineProperty(yd,"passive",{get:function(){t2=!0}}),window.addEventListener("test",yd,yd),window.removeEventListener("test",yd,yd)}catch{t2=!1}function oj(e,t,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var ph=!1,Nm=null,km=!1,e2=null,aj={onError:function(e){ph=!0,Nm=e}};function lj(e,t,n,r,i,s,o,a,l){ph=!1,Nm=null,oj.apply(aj,arguments)}function cj(e,t,n,r,i,s,o,a,l){if(lj.apply(this,arguments),ph){if(ph){var c=Nm;ph=!1,Nm=null}else throw Error(q(198));km||(km=!0,e2=c)}}function wc(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function K4(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function eA(e){if(wc(e)!==e)throw Error(q(188))}function uj(e){var t=e.alternate;if(!t){if(t=wc(e),t===null)throw Error(q(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return eA(i),e;if(s===r)return eA(i),t;s=s.sibling}throw Error(q(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(q(189))}}if(n.alternate!==r)throw Error(q(190))}if(n.tag!==3)throw Error(q(188));return n.stateNode.current===n?e:t}function Z4(e){return e=uj(e),e!==null?J4(e):null}function J4(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=J4(e);if(t!==null)return t;e=e.sibling}return null}var tk=Rr.unstable_scheduleCallback,nA=Rr.unstable_cancelCallback,fj=Rr.unstable_shouldYield,dj=Rr.unstable_requestPaint,Ze=Rr.unstable_now,hj=Rr.unstable_getCurrentPriorityLevel,Gx=Rr.unstable_ImmediatePriority,ek=Rr.unstable_UserBlockingPriority,Dm=Rr.unstable_NormalPriority,pj=Rr.unstable_LowPriority,nk=Rr.unstable_IdlePriority,bb=null,As=null;function yj(e){if(As&&typeof As.onCommitFiberRoot=="function")try{As.onCommitFiberRoot(bb,e,void 0,(e.current.flags&128)===128)}catch{}}var Ri=Math.clz32?Math.clz32:bj,mj=Math.log,gj=Math.LN2;function bj(e){return e>>>=0,e===0?32:31-(mj(e)/gj|0)|0}var Vy=64,Yy=4194304;function Ud(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Om(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Ud(a):(s&=o,s!==0&&(r=Ud(s)))}else o=n&~i,o!==0?r=Ud(o):s!==0&&(r=Ud(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Ri(t),i=1<<n,r|=e[n],t&=~i;return r}function vj(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wj(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-Ri(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=vj(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}function n2(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function rk(){var e=Vy;return Vy<<=1,!(Vy&4194240)&&(Vy=64),e}function nw(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Pp(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ri(t),e[t]=n}function _j(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-Ri(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}function Xx(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Ri(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var de=0;function ik(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var sk,Qx,ok,ak,lk,r2=!1,qy=[],ga=null,ba=null,va=null,Ch=new Map,Uh=new Map,aa=[],Sj="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function rA(e,t){switch(e){case"focusin":case"focusout":ga=null;break;case"dragenter":case"dragleave":ba=null;break;case"mouseover":case"mouseout":va=null;break;case"pointerover":case"pointerout":Ch.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Uh.delete(t.pointerId)}}function md(e,t,n,r,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},t!==null&&(t=jp(t),t!==null&&Qx(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function xj(e,t,n,r,i){switch(t){case"focusin":return ga=md(ga,e,t,n,r,i),!0;case"dragenter":return ba=md(ba,e,t,n,r,i),!0;case"mouseover":return va=md(va,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Ch.set(s,md(Ch.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Uh.set(s,md(Uh.get(s)||null,e,t,n,r,i)),!0}return!1}function ck(e){var t=Nl(e.target);if(t!==null){var n=wc(t);if(n!==null){if(t=n.tag,t===13){if(t=K4(n),t!==null){e.blockedOn=t,lk(e.priority,function(){ok(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function z0(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=i2(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Z_=r,n.target.dispatchEvent(r),Z_=null}else return t=jp(n),t!==null&&Qx(t),e.blockedOn=n,!1;t.shift()}return!0}function iA(e,t,n){z0(e)&&n.delete(t)}function Ij(){r2=!1,ga!==null&&z0(ga)&&(ga=null),ba!==null&&z0(ba)&&(ba=null),va!==null&&z0(va)&&(va=null),Ch.forEach(iA),Uh.forEach(iA)}function gd(e,t){e.blockedOn===t&&(e.blockedOn=null,r2||(r2=!0,Rr.unstable_scheduleCallback(Rr.unstable_NormalPriority,Ij)))}function Ph(e){function t(i){return gd(i,e)}if(0<qy.length){gd(qy[0],e);for(var n=1;n<qy.length;n++){var r=qy[n];r.blockedOn===e&&(r.blockedOn=null)}}for(ga!==null&&gd(ga,e),ba!==null&&gd(ba,e),va!==null&&gd(va,e),Ch.forEach(t),Uh.forEach(t),n=0;n<aa.length;n++)r=aa[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<aa.length&&(n=aa[0],n.blockedOn===null);)ck(n),n.blockedOn===null&&aa.shift()}var Bu=Lo.ReactCurrentBatchConfig,Bm=!0;function Tj(e,t,n,r){var i=de,s=Bu.transition;Bu.transition=null;try{de=1,Kx(e,t,n,r)}finally{de=i,Bu.transition=s}}function Ej(e,t,n,r){var i=de,s=Bu.transition;Bu.transition=null;try{de=4,Kx(e,t,n,r)}finally{de=i,Bu.transition=s}}function Kx(e,t,n,r){if(Bm){var i=i2(e,t,n,r);if(i===null)dw(e,t,r,Fm,n),rA(e,r);else if(xj(i,e,t,n,r))r.stopPropagation();else if(rA(e,r),t&4&&-1<Sj.indexOf(e)){for(;i!==null;){var s=jp(i);if(s!==null&&sk(s),s=i2(e,t,n,r),s===null&&dw(e,t,r,Fm,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else dw(e,t,r,null,n)}}var Fm=null;function i2(e,t,n,r){if(Fm=null,e=Hx(r),e=Nl(e),e!==null)if(t=wc(e),t===null)e=null;else if(n=t.tag,n===13){if(e=K4(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Fm=e,null}function uk(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(hj()){case Gx:return 1;case ek:return 4;case Dm:case pj:return 16;case nk:return 536870912;default:return 16}default:return 16}}var ha=null,Zx=null,j0=null;function fk(){if(j0)return j0;var e,t=Zx,n=t.length,r,i="value"in ha?ha.value:ha.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[s-r];r++);return j0=i.slice(e,1<r?1-r:void 0)}function V0(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Wy(){return!0}function sA(){return!1}function Yr(e){function t(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Wy:sA,this.isPropagationStopped=sA,this}return je(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Wy)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Wy)},persist:function(){},isPersistent:Wy}),t}var Vf={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Jx=Yr(Vf),zp=je({},Vf,{view:0,detail:0}),Aj=Yr(zp),rw,iw,bd,vb=je({},zp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:tI,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==bd&&(bd&&e.type==="mousemove"?(rw=e.screenX-bd.screenX,iw=e.screenY-bd.screenY):iw=rw=0,bd=e),rw)},movementY:function(e){return"movementY"in e?e.movementY:iw}}),oA=Yr(vb),Mj=je({},vb,{dataTransfer:0}),$j=Yr(Mj),Nj=je({},zp,{relatedTarget:0}),sw=Yr(Nj),kj=je({},Vf,{animationName:0,elapsedTime:0,pseudoElement:0}),Dj=Yr(kj),Oj=je({},Vf,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Bj=Yr(Oj),Fj=je({},Vf,{data:0}),aA=Yr(Fj),Lj={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Rj={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Cj={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Uj(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Cj[e])?!!t[e]:!1}function tI(){return Uj}var Pj=je({},zp,{key:function(e){if(e.key){var t=Lj[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=V0(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Rj[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:tI,charCode:function(e){return e.type==="keypress"?V0(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?V0(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),zj=Yr(Pj),jj=je({},vb,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),lA=Yr(jj),Vj=je({},zp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:tI}),Yj=Yr(Vj),qj=je({},Vf,{propertyName:0,elapsedTime:0,pseudoElement:0}),Wj=Yr(qj),Hj=je({},vb,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Gj=Yr(Hj),Xj=[9,13,27,32],eI=Eo&&"CompositionEvent"in window,yh=null;Eo&&"documentMode"in document&&(yh=document.documentMode);var Qj=Eo&&"TextEvent"in window&&!yh,dk=Eo&&(!eI||yh&&8<yh&&11>=yh),cA=" ",uA=!1;function hk(e,t){switch(e){case"keyup":return Xj.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function pk(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var fu=!1;function Kj(e,t){switch(e){case"compositionend":return pk(t);case"keypress":return t.which!==32?null:(uA=!0,cA);case"textInput":return e=t.data,e===cA&&uA?null:e;default:return null}}function Zj(e,t){if(fu)return e==="compositionend"||!eI&&hk(e,t)?(e=fk(),j0=Zx=ha=null,fu=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return dk&&t.locale!=="ko"?null:t.data;default:return null}}var Jj={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fA(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Jj[e.type]:t==="textarea"}function yk(e,t,n,r){W4(r),t=Lm(t,"onChange"),0<t.length&&(n=new Jx("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var mh=null,zh=null;function tV(e){Ek(e,0)}function wb(e){var t=pu(e);if(U4(t))return e}function eV(e,t){if(e==="change")return t}var mk=!1;if(Eo){var ow;if(Eo){var aw="oninput"in document;if(!aw){var dA=document.createElement("div");dA.setAttribute("oninput","return;"),aw=typeof dA.oninput=="function"}ow=aw}else ow=!1;mk=ow&&(!document.documentMode||9<document.documentMode)}function hA(){mh&&(mh.detachEvent("onpropertychange",gk),zh=mh=null)}function gk(e){if(e.propertyName==="value"&&wb(zh)){var t=[];yk(t,zh,e,Hx(e)),Q4(tV,t)}}function nV(e,t,n){e==="focusin"?(hA(),mh=t,zh=n,mh.attachEvent("onpropertychange",gk)):e==="focusout"&&hA()}function rV(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return wb(zh)}function iV(e,t){if(e==="click")return wb(t)}function sV(e,t){if(e==="input"||e==="change")return wb(t)}function oV(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Pi=typeof Object.is=="function"?Object.is:oV;function jh(e,t){if(Pi(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!P_.call(t,i)||!Pi(e[i],t[i]))return!1}return!0}function pA(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function yA(e,t){var n=pA(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}t:{for(;n;){if(n.nextSibling){n=n.nextSibling;break t}n=n.parentNode}n=void 0}n=pA(n)}}function bk(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?bk(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function vk(){for(var e=window,t=$m();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=$m(e.document)}return t}function nI(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function aV(e){var t=vk(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&bk(n.ownerDocument.documentElement,n)){if(r!==null&&nI(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=yA(n,s);var o=yA(n,r);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var lV=Eo&&"documentMode"in document&&11>=document.documentMode,du=null,s2=null,gh=null,o2=!1;function mA(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;o2||du==null||du!==$m(r)||(r=du,"selectionStart"in r&&nI(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),gh&&jh(gh,r)||(gh=r,r=Lm(s2,"onSelect"),0<r.length&&(t=new Jx("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=du)))}function Hy(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var hu={animationend:Hy("Animation","AnimationEnd"),animationiteration:Hy("Animation","AnimationIteration"),animationstart:Hy("Animation","AnimationStart"),transitionend:Hy("Transition","TransitionEnd")},lw={},wk={};Eo&&(wk=document.createElement("div").style,"AnimationEvent"in window||(delete hu.animationend.animation,delete hu.animationiteration.animation,delete hu.animationstart.animation),"TransitionEvent"in window||delete hu.transitionend.transition);function _b(e){if(lw[e])return lw[e];if(!hu[e])return e;var t=hu[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in wk)return lw[e]=t[n];return e}var _k=_b("animationend"),Sk=_b("animationiteration"),xk=_b("animationstart"),Ik=_b("transitionend"),Tk=new Map,gA="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Xa(e,t){Tk.set(e,t),vc(t,[e])}for(var cw=0;cw<gA.length;cw++){var uw=gA[cw],cV=uw.toLowerCase(),uV=uw[0].toUpperCase()+uw.slice(1);Xa(cV,"on"+uV)}Xa(_k,"onAnimationEnd");Xa(Sk,"onAnimationIteration");Xa(xk,"onAnimationStart");Xa("dblclick","onDoubleClick");Xa("focusin","onFocus");Xa("focusout","onBlur");Xa(Ik,"onTransitionEnd");nf("onMouseEnter",["mouseout","mouseover"]);nf("onMouseLeave",["mouseout","mouseover"]);nf("onPointerEnter",["pointerout","pointerover"]);nf("onPointerLeave",["pointerout","pointerover"]);vc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));vc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));vc("onBeforeInput",["compositionend","keypress","textInput","paste"]);vc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));vc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));vc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fV=new Set("cancel close invalid load scroll toggle".split(" ").concat(Pd));function bA(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,cj(r,t,void 0,e),e.currentTarget=null}function Ek(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;t:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break t;bA(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break t;bA(i,a,c),s=l}}}if(km)throw e=e2,km=!1,e2=null,e}function Ie(e,t){var n=t[f2];n===void 0&&(n=t[f2]=new Set);var r=e+"__bubble";n.has(r)||(Ak(t,e,2,!1),n.add(r))}function fw(e,t,n){var r=0;t&&(r|=4),Ak(n,e,r,t)}var Gy="_reactListening"+Math.random().toString(36).slice(2);function Vh(e){if(!e[Gy]){e[Gy]=!0,B4.forEach(function(n){n!=="selectionchange"&&(fV.has(n)||fw(n,!1,e),fw(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Gy]||(t[Gy]=!0,fw("selectionchange",!1,t))}}function Ak(e,t,n,r){switch(uk(t)){case 1:var i=Tj;break;case 4:i=Ej;break;default:i=Kx}n=i.bind(null,t,n,e),i=void 0,!t2||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function dw(e,t,n,r,i){var s=r;if(!(t&1)&&!(t&2)&&r!==null)t:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Nl(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue t}a=a.parentNode}}r=r.return}Q4(function(){var c=s,u=Hx(n),f=[];t:{var d=Tk.get(e);if(d!==void 0){var h=Jx,p=e;switch(e){case"keypress":if(V0(n)===0)break t;case"keydown":case"keyup":h=zj;break;case"focusin":p="focus",h=sw;break;case"focusout":p="blur",h=sw;break;case"beforeblur":case"afterblur":h=sw;break;case"click":if(n.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=oA;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=$j;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=Yj;break;case _k:case Sk:case xk:h=Dj;break;case Ik:h=Wj;break;case"scroll":h=Aj;break;case"wheel":h=Gj;break;case"copy":case"cut":case"paste":h=Bj;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=lA}var g=(t&4)!==0,v=!g&&e==="scroll",y=g?d!==null?d+"Capture":null:d;g=[];for(var m=c,b;m!==null;){b=m;var w=b.stateNode;if(b.tag===5&&w!==null&&(b=w,y!==null&&(w=Rh(m,y),w!=null&&g.push(Yh(m,w,b)))),v)break;m=m.return}0<g.length&&(d=new h(d,p,null,n,u),f.push({event:d,listeners:g}))}}if(!(t&7)){t:{if(d=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",d&&n!==Z_&&(p=n.relatedTarget||n.fromElement)&&(Nl(p)||p[Ao]))break t;if((h||d)&&(d=u.window===u?u:(d=u.ownerDocument)?d.defaultView||d.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=c,p=p?Nl(p):null,p!==null&&(v=wc(p),p!==v||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=c),h!==p)){if(g=oA,w="onMouseLeave",y="onMouseEnter",m="mouse",(e==="pointerout"||e==="pointerover")&&(g=lA,w="onPointerLeave",y="onPointerEnter",m="pointer"),v=h==null?d:pu(h),b=p==null?d:pu(p),d=new g(w,m+"leave",h,n,u),d.target=v,d.relatedTarget=b,w=null,Nl(u)===c&&(g=new g(y,m+"enter",p,n,u),g.target=b,g.relatedTarget=v,w=g),v=w,h&&p)e:{for(g=h,y=p,m=0,b=g;b;b=Mc(b))m++;for(b=0,w=y;w;w=Mc(w))b++;for(;0<m-b;)g=Mc(g),m--;for(;0<b-m;)y=Mc(y),b--;for(;m--;){if(g===y||y!==null&&g===y.alternate)break e;g=Mc(g),y=Mc(y)}g=null}else g=null;h!==null&&vA(f,d,h,g,!1),p!==null&&v!==null&&vA(f,v,p,g,!0)}}t:{if(d=c?pu(c):window,h=d.nodeName&&d.nodeName.toLowerCase(),h==="select"||h==="input"&&d.type==="file")var S=eV;else if(fA(d))if(mk)S=sV;else{S=rV;var _=nV}else(h=d.nodeName)&&h.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(S=iV);if(S&&(S=S(e,c))){yk(f,S,n,u);break t}_&&_(e,d,c),e==="focusout"&&(_=d._wrapperState)&&_.controlled&&d.type==="number"&&H_(d,"number",d.value)}switch(_=c?pu(c):window,e){case"focusin":(fA(_)||_.contentEditable==="true")&&(du=_,s2=c,gh=null);break;case"focusout":gh=s2=du=null;break;case"mousedown":o2=!0;break;case"contextmenu":case"mouseup":case"dragend":o2=!1,mA(f,n,u);break;case"selectionchange":if(lV)break;case"keydown":case"keyup":mA(f,n,u)}var x;if(eI)t:{switch(e){case"compositionstart":var E="onCompositionStart";break t;case"compositionend":E="onCompositionEnd";break t;case"compositionupdate":E="onCompositionUpdate";break t}E=void 0}else fu?hk(e,n)&&(E="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(dk&&n.locale!=="ko"&&(fu||E!=="onCompositionStart"?E==="onCompositionEnd"&&fu&&(x=fk()):(ha=u,Zx="value"in ha?ha.value:ha.textContent,fu=!0)),_=Lm(c,E),0<_.length&&(E=new aA(E,e,null,n,u),f.push({event:E,listeners:_}),x?E.data=x:(x=pk(n),x!==null&&(E.data=x)))),(x=Qj?Kj(e,n):Zj(e,n))&&(c=Lm(c,"onBeforeInput"),0<c.length&&(u=new aA("onBeforeInput","beforeinput",null,n,u),f.push({event:u,listeners:c}),u.data=x))}Ek(f,t)})}function Yh(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Lm(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Rh(e,n),s!=null&&r.unshift(Yh(e,s,i)),s=Rh(e,t),s!=null&&r.push(Yh(e,s,i))),e=e.return}return r}function Mc(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function vA(e,t,n,r,i){for(var s=t._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=Rh(n,s),l!=null&&o.unshift(Yh(n,l,a))):i||(l=Rh(n,s),l!=null&&o.push(Yh(n,l,a)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var dV=/\r\n?/g,hV=/\u0000|\uFFFD/g;function wA(e){return(typeof e=="string"?e:""+e).replace(dV,`
`).replace(hV,"")}function Xy(e,t,n){if(t=wA(t),wA(e)!==t&&n)throw Error(q(425))}function Rm(){}var a2=null,l2=null;function c2(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var u2=typeof setTimeout=="function"?setTimeout:void 0,pV=typeof clearTimeout=="function"?clearTimeout:void 0,_A=typeof Promise=="function"?Promise:void 0,yV=typeof queueMicrotask=="function"?queueMicrotask:typeof _A<"u"?function(e){return _A.resolve(null).then(e).catch(mV)}:u2;function mV(e){setTimeout(function(){throw e})}function hw(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),Ph(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Ph(t)}function wa(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function SA(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Yf=Math.random().toString(36).slice(2),hs="__reactFiber$"+Yf,qh="__reactProps$"+Yf,Ao="__reactContainer$"+Yf,f2="__reactEvents$"+Yf,gV="__reactListeners$"+Yf,bV="__reactHandles$"+Yf;function Nl(e){var t=e[hs];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Ao]||n[hs]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=SA(e);e!==null;){if(n=e[hs])return n;e=SA(e)}return t}e=n,n=e.parentNode}return null}function jp(e){return e=e[hs]||e[Ao],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function pu(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(q(33))}function Sb(e){return e[qh]||null}var d2=[],yu=-1;function Qa(e){return{current:e}}function Te(e){0>yu||(e.current=d2[yu],d2[yu]=null,yu--)}function Se(e,t){yu++,d2[yu]=e.current,e.current=t}var Ma={},Pn=Qa(Ma),dr=Qa(!1),Zl=Ma;function rf(e,t){var n=e.type.contextTypes;if(!n)return Ma;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function hr(e){return e=e.childContextTypes,e!=null}function Cm(){Te(dr),Te(Pn)}function xA(e,t,n){if(Pn.current!==Ma)throw Error(q(168));Se(Pn,t),Se(dr,n)}function Mk(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(q(108,nj(e)||"Unknown",i));return je({},n,r)}function Um(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ma,Zl=Pn.current,Se(Pn,e),Se(dr,dr.current),!0}function IA(e,t,n){var r=e.stateNode;if(!r)throw Error(q(169));n?(e=Mk(e,t,Zl),r.__reactInternalMemoizedMergedChildContext=e,Te(dr),Te(Pn),Se(Pn,e)):Te(dr),Se(dr,n)}var ao=null,xb=!1,pw=!1;function $k(e){ao===null?ao=[e]:ao.push(e)}function vV(e){xb=!0,$k(e)}function Ka(){if(!pw&&ao!==null){pw=!0;var e=0,t=de;try{var n=ao;for(de=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}ao=null,xb=!1}catch(i){throw ao!==null&&(ao=ao.slice(e+1)),tk(Gx,Ka),i}finally{de=t,pw=!1}}return null}var mu=[],gu=0,Pm=null,zm=0,Jr=[],ti=0,Jl=null,ho=1,po="";function pl(e,t){mu[gu++]=zm,mu[gu++]=Pm,Pm=e,zm=t}function Nk(e,t,n){Jr[ti++]=ho,Jr[ti++]=po,Jr[ti++]=Jl,Jl=e;var r=ho;e=po;var i=32-Ri(r)-1;r&=~(1<<i),n+=1;var s=32-Ri(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,ho=1<<32-Ri(t)+i|n<<i|r,po=s+e}else ho=1<<s|n<<i|r,po=e}function rI(e){e.return!==null&&(pl(e,1),Nk(e,1,0))}function iI(e){for(;e===Pm;)Pm=mu[--gu],mu[gu]=null,zm=mu[--gu],mu[gu]=null;for(;e===Jl;)Jl=Jr[--ti],Jr[ti]=null,po=Jr[--ti],Jr[ti]=null,ho=Jr[--ti],Jr[ti]=null}var Fr=null,kr=null,Me=!1,ki=null;function kk(e,t){var n=si(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function TA(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Fr=e,kr=wa(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Fr=e,kr=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Jl!==null?{id:ho,overflow:po}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=si(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Fr=e,kr=null,!0):!1;default:return!1}}function h2(e){return(e.mode&1)!==0&&(e.flags&128)===0}function p2(e){if(Me){var t=kr;if(t){var n=t;if(!TA(e,t)){if(h2(e))throw Error(q(418));t=wa(n.nextSibling);var r=Fr;t&&TA(e,t)?kk(r,n):(e.flags=e.flags&-4097|2,Me=!1,Fr=e)}}else{if(h2(e))throw Error(q(418));e.flags=e.flags&-4097|2,Me=!1,Fr=e}}}function EA(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Fr=e}function Qy(e){if(e!==Fr)return!1;if(!Me)return EA(e),Me=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!c2(e.type,e.memoizedProps)),t&&(t=kr)){if(h2(e))throw Dk(),Error(q(418));for(;t;)kk(e,t),t=wa(t.nextSibling)}if(EA(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(q(317));t:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){kr=wa(e.nextSibling);break t}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}kr=null}}else kr=Fr?wa(e.stateNode.nextSibling):null;return!0}function Dk(){for(var e=kr;e;)e=wa(e.nextSibling)}function sf(){kr=Fr=null,Me=!1}function sI(e){ki===null?ki=[e]:ki.push(e)}var wV=Lo.ReactCurrentBatchConfig;function Ei(e,t){if(e&&e.defaultProps){t=je({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}var jm=Qa(null),Vm=null,bu=null,oI=null;function aI(){oI=bu=Vm=null}function lI(e){var t=jm.current;Te(jm),e._currentValue=t}function y2(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Fu(e,t){Vm=e,oI=bu=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ur=!0),e.firstContext=null)}function yi(e){var t=e._currentValue;if(oI!==e)if(e={context:e,memoizedValue:t,next:null},bu===null){if(Vm===null)throw Error(q(308));bu=e,Vm.dependencies={lanes:0,firstContext:e}}else bu=bu.next=e;return t}var kl=null;function cI(e){kl===null?kl=[e]:kl.push(e)}function Ok(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,cI(t)):(n.next=i.next,i.next=n),t.interleaved=n,Mo(e,r)}function Mo(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var ea=!1;function uI(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Bk(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function wo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function _a(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Xt&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Mo(e,n)}return i=r.interleaved,i===null?(t.next=t,cI(r)):(t.next=i.next,i.next=t),r.interleaved=t,Mo(e,n)}function Y0(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Xx(e,n)}}function AA(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ym(e,t,n,r){var i=e.updateQueue;ea=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=e.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var f=i.baseState;o=0,u=c=l=null,a=s;do{var d=a.lane,h=a.eventTime;if((r&d)===d){u!==null&&(u=u.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});t:{var p=e,g=a;switch(d=t,h=n,g.tag){case 1:if(p=g.payload,typeof p=="function"){f=p.call(h,f,d);break t}f=p;break t;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,d=typeof p=="function"?p.call(h,f,d):p,d==null)break t;f=je({},f,d);break t;case 2:ea=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,d=i.effects,d===null?i.effects=[a]:d.push(a))}else h={eventTime:h,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=h,l=f):u=u.next=h,o|=d;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;d=a,a=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(u===null&&(l=f),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);ec|=o,e.lanes=o,e.memoizedState=f}}function MA(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(q(191,i));i.call(r)}}}var Fk=new O4.Component().refs;function m2(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:je({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Ib={isMounted:function(e){return(e=e._reactInternals)?wc(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Kn(),i=xa(e),s=wo(r,i);s.payload=t,n!=null&&(s.callback=n),t=_a(e,s,i),t!==null&&(Ci(t,e,i,r),Y0(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Kn(),i=xa(e),s=wo(r,i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=_a(e,s,i),t!==null&&(Ci(t,e,i,r),Y0(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Kn(),r=xa(e),i=wo(n,r);i.tag=2,t!=null&&(i.callback=t),t=_a(e,i,r),t!==null&&(Ci(t,e,r,n),Y0(t,e,r))}};function $A(e,t,n,r,i,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,o):t.prototype&&t.prototype.isPureReactComponent?!jh(n,r)||!jh(i,s):!0}function Lk(e,t,n){var r=!1,i=Ma,s=t.contextType;return typeof s=="object"&&s!==null?s=yi(s):(i=hr(t)?Zl:Pn.current,r=t.contextTypes,s=(r=r!=null)?rf(e,i):Ma),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ib,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function NA(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ib.enqueueReplaceState(t,t.state,null)}function g2(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Fk,uI(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=yi(s):(s=hr(t)?Zl:Pn.current,i.context=rf(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(m2(e,t,s,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&Ib.enqueueReplaceState(i,i.state,null),Ym(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function vd(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(q(309));var r=n.stateNode}if(!r)throw Error(q(147,e));var i=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var a=i.refs;a===Fk&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(q(284));if(!n._owner)throw Error(q(290,e))}return e}function Ky(e,t){throw e=Object.prototype.toString.call(t),Error(q(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function kA(e){var t=e._init;return t(e._payload)}function Rk(e){function t(y,m){if(e){var b=y.deletions;b===null?(y.deletions=[m],y.flags|=16):b.push(m)}}function n(y,m){if(!e)return null;for(;m!==null;)t(y,m),m=m.sibling;return null}function r(y,m){for(y=new Map;m!==null;)m.key!==null?y.set(m.key,m):y.set(m.index,m),m=m.sibling;return y}function i(y,m){return y=Ia(y,m),y.index=0,y.sibling=null,y}function s(y,m,b){return y.index=b,e?(b=y.alternate,b!==null?(b=b.index,b<m?(y.flags|=2,m):b):(y.flags|=2,m)):(y.flags|=1048576,m)}function o(y){return e&&y.alternate===null&&(y.flags|=2),y}function a(y,m,b,w){return m===null||m.tag!==6?(m=_w(b,y.mode,w),m.return=y,m):(m=i(m,b),m.return=y,m)}function l(y,m,b,w){var S=b.type;return S===uu?u(y,m,b.props.children,w,b.key):m!==null&&(m.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===ta&&kA(S)===m.type)?(w=i(m,b.props),w.ref=vd(y,m,b),w.return=y,w):(w=Q0(b.type,b.key,b.props,null,y.mode,w),w.ref=vd(y,m,b),w.return=y,w)}function c(y,m,b,w){return m===null||m.tag!==4||m.stateNode.containerInfo!==b.containerInfo||m.stateNode.implementation!==b.implementation?(m=Sw(b,y.mode,w),m.return=y,m):(m=i(m,b.children||[]),m.return=y,m)}function u(y,m,b,w,S){return m===null||m.tag!==7?(m=Vl(b,y.mode,w,S),m.return=y,m):(m=i(m,b),m.return=y,m)}function f(y,m,b){if(typeof m=="string"&&m!==""||typeof m=="number")return m=_w(""+m,y.mode,b),m.return=y,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Py:return b=Q0(m.type,m.key,m.props,null,y.mode,b),b.ref=vd(y,null,m),b.return=y,b;case cu:return m=Sw(m,y.mode,b),m.return=y,m;case ta:var w=m._init;return f(y,w(m._payload),b)}if(Cd(m)||pd(m))return m=Vl(m,y.mode,b,null),m.return=y,m;Ky(y,m)}return null}function d(y,m,b,w){var S=m!==null?m.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return S!==null?null:a(y,m,""+b,w);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Py:return b.key===S?l(y,m,b,w):null;case cu:return b.key===S?c(y,m,b,w):null;case ta:return S=b._init,d(y,m,S(b._payload),w)}if(Cd(b)||pd(b))return S!==null?null:u(y,m,b,w,null);Ky(y,b)}return null}function h(y,m,b,w,S){if(typeof w=="string"&&w!==""||typeof w=="number")return y=y.get(b)||null,a(m,y,""+w,S);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Py:return y=y.get(w.key===null?b:w.key)||null,l(m,y,w,S);case cu:return y=y.get(w.key===null?b:w.key)||null,c(m,y,w,S);case ta:var _=w._init;return h(y,m,b,_(w._payload),S)}if(Cd(w)||pd(w))return y=y.get(b)||null,u(m,y,w,S,null);Ky(m,w)}return null}function p(y,m,b,w){for(var S=null,_=null,x=m,E=m=0,k=null;x!==null&&E<b.length;E++){x.index>E?(k=x,x=null):k=x.sibling;var I=d(y,x,b[E],w);if(I===null){x===null&&(x=k);break}e&&x&&I.alternate===null&&t(y,x),m=s(I,m,E),_===null?S=I:_.sibling=I,_=I,x=k}if(E===b.length)return n(y,x),Me&&pl(y,E),S;if(x===null){for(;E<b.length;E++)x=f(y,b[E],w),x!==null&&(m=s(x,m,E),_===null?S=x:_.sibling=x,_=x);return Me&&pl(y,E),S}for(x=r(y,x);E<b.length;E++)k=h(x,y,E,b[E],w),k!==null&&(e&&k.alternate!==null&&x.delete(k.key===null?E:k.key),m=s(k,m,E),_===null?S=k:_.sibling=k,_=k);return e&&x.forEach(function(A){return t(y,A)}),Me&&pl(y,E),S}function g(y,m,b,w){var S=pd(b);if(typeof S!="function")throw Error(q(150));if(b=S.call(b),b==null)throw Error(q(151));for(var _=S=null,x=m,E=m=0,k=null,I=b.next();x!==null&&!I.done;E++,I=b.next()){x.index>E?(k=x,x=null):k=x.sibling;var A=d(y,x,I.value,w);if(A===null){x===null&&(x=k);break}e&&x&&A.alternate===null&&t(y,x),m=s(A,m,E),_===null?S=A:_.sibling=A,_=A,x=k}if(I.done)return n(y,x),Me&&pl(y,E),S;if(x===null){for(;!I.done;E++,I=b.next())I=f(y,I.value,w),I!==null&&(m=s(I,m,E),_===null?S=I:_.sibling=I,_=I);return Me&&pl(y,E),S}for(x=r(y,x);!I.done;E++,I=b.next())I=h(x,y,E,I.value,w),I!==null&&(e&&I.alternate!==null&&x.delete(I.key===null?E:I.key),m=s(I,m,E),_===null?S=I:_.sibling=I,_=I);return e&&x.forEach(function(D){return t(y,D)}),Me&&pl(y,E),S}function v(y,m,b,w){if(typeof b=="object"&&b!==null&&b.type===uu&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Py:t:{for(var S=b.key,_=m;_!==null;){if(_.key===S){if(S=b.type,S===uu){if(_.tag===7){n(y,_.sibling),m=i(_,b.props.children),m.return=y,y=m;break t}}else if(_.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===ta&&kA(S)===_.type){n(y,_.sibling),m=i(_,b.props),m.ref=vd(y,_,b),m.return=y,y=m;break t}n(y,_);break}else t(y,_);_=_.sibling}b.type===uu?(m=Vl(b.props.children,y.mode,w,b.key),m.return=y,y=m):(w=Q0(b.type,b.key,b.props,null,y.mode,w),w.ref=vd(y,m,b),w.return=y,y=w)}return o(y);case cu:t:{for(_=b.key;m!==null;){if(m.key===_)if(m.tag===4&&m.stateNode.containerInfo===b.containerInfo&&m.stateNode.implementation===b.implementation){n(y,m.sibling),m=i(m,b.children||[]),m.return=y,y=m;break t}else{n(y,m);break}else t(y,m);m=m.sibling}m=Sw(b,y.mode,w),m.return=y,y=m}return o(y);case ta:return _=b._init,v(y,m,_(b._payload),w)}if(Cd(b))return p(y,m,b,w);if(pd(b))return g(y,m,b,w);Ky(y,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,m!==null&&m.tag===6?(n(y,m.sibling),m=i(m,b),m.return=y,y=m):(n(y,m),m=_w(b,y.mode,w),m.return=y,y=m),o(y)):n(y,m)}return v}var of=Rk(!0),Ck=Rk(!1),Vp={},Ms=Qa(Vp),Wh=Qa(Vp),Hh=Qa(Vp);function Dl(e){if(e===Vp)throw Error(q(174));return e}function fI(e,t){switch(Se(Hh,t),Se(Wh,e),Se(Ms,Vp),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:X_(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=X_(t,e)}Te(Ms),Se(Ms,t)}function af(){Te(Ms),Te(Wh),Te(Hh)}function Uk(e){Dl(Hh.current);var t=Dl(Ms.current),n=X_(t,e.type);t!==n&&(Se(Wh,e),Se(Ms,n))}function dI(e){Wh.current===e&&(Te(Ms),Te(Wh))}var Fe=Qa(0);function qm(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var yw=[];function hI(){for(var e=0;e<yw.length;e++)yw[e]._workInProgressVersionPrimary=null;yw.length=0}var q0=Lo.ReactCurrentDispatcher,mw=Lo.ReactCurrentBatchConfig,tc=0,Pe=null,an=null,mn=null,Wm=!1,bh=!1,Gh=0,_V=0;function $n(){throw Error(q(321))}function pI(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Pi(e[n],t[n]))return!1;return!0}function yI(e,t,n,r,i,s){if(tc=s,Pe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,q0.current=e===null||e.memoizedState===null?TV:EV,e=n(r,i),bh){s=0;do{if(bh=!1,Gh=0,25<=s)throw Error(q(301));s+=1,mn=an=null,t.updateQueue=null,q0.current=AV,e=n(r,i)}while(bh)}if(q0.current=Hm,t=an!==null&&an.next!==null,tc=0,mn=an=Pe=null,Wm=!1,t)throw Error(q(300));return e}function mI(){var e=Gh!==0;return Gh=0,e}function as(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return mn===null?Pe.memoizedState=mn=e:mn=mn.next=e,mn}function mi(){if(an===null){var e=Pe.alternate;e=e!==null?e.memoizedState:null}else e=an.next;var t=mn===null?Pe.memoizedState:mn.next;if(t!==null)mn=t,an=e;else{if(e===null)throw Error(q(310));an=e,e={memoizedState:an.memoizedState,baseState:an.baseState,baseQueue:an.baseQueue,queue:an.queue,next:null},mn===null?Pe.memoizedState=mn=e:mn=mn.next=e}return mn}function Xh(e,t){return typeof t=="function"?t(e):t}function gw(e){var t=mi(),n=t.queue;if(n===null)throw Error(q(311));n.lastRenderedReducer=e;var r=an,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((tc&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var f={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=f,o=r):l=l.next=f,Pe.lanes|=u,ec|=u}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,Pi(r,t.memoizedState)||(ur=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=l,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do s=i.lane,Pe.lanes|=s,ec|=s,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function bw(e){var t=mi(),n=t.queue;if(n===null)throw Error(q(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=e(s,o.action),o=o.next;while(o!==i);Pi(s,t.memoizedState)||(ur=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Pk(){}function zk(e,t){var n=Pe,r=mi(),i=t(),s=!Pi(r.memoizedState,i);if(s&&(r.memoizedState=i,ur=!0),r=r.queue,gI(Yk.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||mn!==null&&mn.memoizedState.tag&1){if(n.flags|=2048,Qh(9,Vk.bind(null,n,r,i,t),void 0,null),vn===null)throw Error(q(349));tc&30||jk(n,t,i)}return i}function jk(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Pe.updateQueue,t===null?(t={lastEffect:null,stores:null},Pe.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Vk(e,t,n,r){t.value=n,t.getSnapshot=r,qk(t)&&Wk(e)}function Yk(e,t,n){return n(function(){qk(t)&&Wk(e)})}function qk(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Pi(e,n)}catch{return!0}}function Wk(e){var t=Mo(e,1);t!==null&&Ci(t,e,1,-1)}function DA(e){var t=as();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Xh,lastRenderedState:e},t.queue=e,e=e.dispatch=IV.bind(null,Pe,e),[t.memoizedState,e]}function Qh(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Pe.updateQueue,t===null?(t={lastEffect:null,stores:null},Pe.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Hk(){return mi().memoizedState}function W0(e,t,n,r){var i=as();Pe.flags|=e,i.memoizedState=Qh(1|t,n,void 0,r===void 0?null:r)}function Tb(e,t,n,r){var i=mi();r=r===void 0?null:r;var s=void 0;if(an!==null){var o=an.memoizedState;if(s=o.destroy,r!==null&&pI(r,o.deps)){i.memoizedState=Qh(t,n,s,r);return}}Pe.flags|=e,i.memoizedState=Qh(1|t,n,s,r)}function OA(e,t){return W0(8390656,8,e,t)}function gI(e,t){return Tb(2048,8,e,t)}function Gk(e,t){return Tb(4,2,e,t)}function Xk(e,t){return Tb(4,4,e,t)}function Qk(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Kk(e,t,n){return n=n!=null?n.concat([e]):null,Tb(4,4,Qk.bind(null,t,e),n)}function bI(){}function Zk(e,t){var n=mi();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&pI(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Jk(e,t){var n=mi();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&pI(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function tD(e,t,n){return tc&21?(Pi(n,t)||(n=rk(),Pe.lanes|=n,ec|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ur=!0),e.memoizedState=n)}function SV(e,t){var n=de;de=n!==0&&4>n?n:4,e(!0);var r=mw.transition;mw.transition={};try{e(!1),t()}finally{de=n,mw.transition=r}}function eD(){return mi().memoizedState}function xV(e,t,n){var r=xa(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},nD(e))rD(t,n);else if(n=Ok(e,t,n,r),n!==null){var i=Kn();Ci(n,e,r,i),iD(n,t,r)}}function IV(e,t,n){var r=xa(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(nD(e))rD(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Pi(a,o)){var l=t.interleaved;l===null?(i.next=i,cI(t)):(i.next=l.next,l.next=i),t.interleaved=i;return}}catch{}finally{}n=Ok(e,t,i,r),n!==null&&(i=Kn(),Ci(n,e,r,i),iD(n,t,r))}}function nD(e){var t=e.alternate;return e===Pe||t!==null&&t===Pe}function rD(e,t){bh=Wm=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function iD(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Xx(e,n)}}var Hm={readContext:yi,useCallback:$n,useContext:$n,useEffect:$n,useImperativeHandle:$n,useInsertionEffect:$n,useLayoutEffect:$n,useMemo:$n,useReducer:$n,useRef:$n,useState:$n,useDebugValue:$n,useDeferredValue:$n,useTransition:$n,useMutableSource:$n,useSyncExternalStore:$n,useId:$n,unstable_isNewReconciler:!1},TV={readContext:yi,useCallback:function(e,t){return as().memoizedState=[e,t===void 0?null:t],e},useContext:yi,useEffect:OA,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,W0(4194308,4,Qk.bind(null,t,e),n)},useLayoutEffect:function(e,t){return W0(4194308,4,e,t)},useInsertionEffect:function(e,t){return W0(4,2,e,t)},useMemo:function(e,t){var n=as();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=as();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=xV.bind(null,Pe,e),[r.memoizedState,e]},useRef:function(e){var t=as();return e={current:e},t.memoizedState=e},useState:DA,useDebugValue:bI,useDeferredValue:function(e){return as().memoizedState=e},useTransition:function(){var e=DA(!1),t=e[0];return e=SV.bind(null,e[1]),as().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Pe,i=as();if(Me){if(n===void 0)throw Error(q(407));n=n()}else{if(n=t(),vn===null)throw Error(q(349));tc&30||jk(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,OA(Yk.bind(null,r,s,e),[e]),r.flags|=2048,Qh(9,Vk.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=as(),t=vn.identifierPrefix;if(Me){var n=po,r=ho;n=(r&~(1<<32-Ri(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Gh++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=_V++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},EV={readContext:yi,useCallback:Zk,useContext:yi,useEffect:gI,useImperativeHandle:Kk,useInsertionEffect:Gk,useLayoutEffect:Xk,useMemo:Jk,useReducer:gw,useRef:Hk,useState:function(){return gw(Xh)},useDebugValue:bI,useDeferredValue:function(e){var t=mi();return tD(t,an.memoizedState,e)},useTransition:function(){var e=gw(Xh)[0],t=mi().memoizedState;return[e,t]},useMutableSource:Pk,useSyncExternalStore:zk,useId:eD,unstable_isNewReconciler:!1},AV={readContext:yi,useCallback:Zk,useContext:yi,useEffect:gI,useImperativeHandle:Kk,useInsertionEffect:Gk,useLayoutEffect:Xk,useMemo:Jk,useReducer:bw,useRef:Hk,useState:function(){return bw(Xh)},useDebugValue:bI,useDeferredValue:function(e){var t=mi();return an===null?t.memoizedState=e:tD(t,an.memoizedState,e)},useTransition:function(){var e=bw(Xh)[0],t=mi().memoizedState;return[e,t]},useMutableSource:Pk,useSyncExternalStore:zk,useId:eD,unstable_isNewReconciler:!1};function lf(e,t){try{var n="",r=t;do n+=ej(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function vw(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function b2(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var MV=typeof WeakMap=="function"?WeakMap:Map;function sD(e,t,n){n=wo(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Xm||(Xm=!0,M2=r),b2(e,t)},n}function oD(e,t,n){n=wo(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){b2(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){b2(e,t),typeof r!="function"&&(Sa===null?Sa=new Set([this]):Sa.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function BA(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new MV;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=jV.bind(null,e,t,n),t.then(e,e))}function FA(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function LA(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=wo(-1,1),t.tag=2,_a(n,t,1))),n.lanes|=1),e)}var $V=Lo.ReactCurrentOwner,ur=!1;function Vn(e,t,n,r){t.child=e===null?Ck(t,null,n,r):of(t,e.child,n,r)}function RA(e,t,n,r,i){n=n.render;var s=t.ref;return Fu(t,i),r=yI(e,t,n,r,s,i),n=mI(),e!==null&&!ur?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,$o(e,t,i)):(Me&&n&&rI(t),t.flags|=1,Vn(e,t,r,i),t.child)}function CA(e,t,n,r,i){if(e===null){var s=n.type;return typeof s=="function"&&!EI(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,aD(e,t,s,r,i)):(e=Q0(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:jh,n(o,r)&&e.ref===t.ref)return $o(e,t,i)}return t.flags|=1,e=Ia(s,r),e.ref=t.ref,e.return=t,t.child=e}function aD(e,t,n,r,i){if(e!==null){var s=e.memoizedProps;if(jh(s,r)&&e.ref===t.ref)if(ur=!1,t.pendingProps=r=s,(e.lanes&i)!==0)e.flags&131072&&(ur=!0);else return t.lanes=e.lanes,$o(e,t,i)}return v2(e,t,n,r,i)}function lD(e,t,n){var r=t.pendingProps,i=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Se(wu,$r),$r|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Se(wu,$r),$r|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Se(wu,$r),$r|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,Se(wu,$r),$r|=r;return Vn(e,t,i,n),t.child}function cD(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function v2(e,t,n,r,i){var s=hr(n)?Zl:Pn.current;return s=rf(t,s),Fu(t,i),n=yI(e,t,n,r,s,i),r=mI(),e!==null&&!ur?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,$o(e,t,i)):(Me&&r&&rI(t),t.flags|=1,Vn(e,t,n,i),t.child)}function UA(e,t,n,r,i){if(hr(n)){var s=!0;Um(t)}else s=!1;if(Fu(t,i),t.stateNode===null)H0(e,t),Lk(t,n,r),g2(t,n,r,i),r=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=yi(c):(c=hr(n)?Zl:Pn.current,c=rf(t,c));var u=n.getDerivedStateFromProps,f=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&NA(t,o,r,c),ea=!1;var d=t.memoizedState;o.state=d,Ym(t,r,o,i),l=t.memoizedState,a!==r||d!==l||dr.current||ea?(typeof u=="function"&&(m2(t,n,u,r),l=t.memoizedState),(a=ea||$A(t,n,a,r,d,l,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Bk(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:Ei(t.type,a),o.props=c,f=t.pendingProps,d=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=yi(l):(l=hr(n)?Zl:Pn.current,l=rf(t,l));var h=n.getDerivedStateFromProps;(u=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||d!==l)&&NA(t,o,r,l),ea=!1,d=t.memoizedState,o.state=d,Ym(t,r,o,i);var p=t.memoizedState;a!==f||d!==p||dr.current||ea?(typeof h=="function"&&(m2(t,n,h,r),p=t.memoizedState),(c=ea||$A(t,n,c,r,d,p,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,l)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return w2(e,t,n,r,s,i)}function w2(e,t,n,r,i,s){cD(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return i&&IA(t,n,!1),$o(e,t,s);r=t.stateNode,$V.current=t;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=of(t,e.child,null,s),t.child=of(t,null,a,s)):Vn(e,t,a,s),t.memoizedState=r.state,i&&IA(t,n,!0),t.child}function uD(e){var t=e.stateNode;t.pendingContext?xA(e,t.pendingContext,t.pendingContext!==t.context):t.context&&xA(e,t.context,!1),fI(e,t.containerInfo)}function PA(e,t,n,r,i){return sf(),sI(i),t.flags|=256,Vn(e,t,n,r),t.child}var _2={dehydrated:null,treeContext:null,retryLane:0};function S2(e){return{baseLanes:e,cachePool:null,transitions:null}}function fD(e,t,n){var r=t.pendingProps,i=Fe.current,s=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),Se(Fe,i&1),e===null)return p2(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,s?(r=t.mode,s=t.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Mb(o,r,0,null),e=Vl(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=S2(n),t.memoizedState=_2,e):vI(t,o));if(i=e.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return NV(e,t,o,r,a,i,n);if(s){s=r.fallback,o=t.mode,i=e.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=l,t.deletions=null):(r=Ia(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Ia(a,s):(s=Vl(s,o,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,o=e.child.memoizedState,o=o===null?S2(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~n,t.memoizedState=_2,r}return s=e.child,e=s.sibling,r=Ia(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function vI(e,t){return t=Mb({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Zy(e,t,n,r){return r!==null&&sI(r),of(t,e.child,null,n),e=vI(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function NV(e,t,n,r,i,s,o){if(n)return t.flags&256?(t.flags&=-257,r=vw(Error(q(422))),Zy(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=Mb({mode:"visible",children:r.children},i,0,null),s=Vl(s,i,o,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&of(t,e.child,null,o),t.child.memoizedState=S2(o),t.memoizedState=_2,s);if(!(t.mode&1))return Zy(e,t,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(q(419)),r=vw(s,r,void 0),Zy(e,t,o,r)}if(a=(o&e.childLanes)!==0,ur||a){if(r=vn,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Mo(e,i),Ci(r,e,i,-1))}return TI(),r=vw(Error(q(421))),Zy(e,t,o,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=VV.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,kr=wa(i.nextSibling),Fr=t,Me=!0,ki=null,e!==null&&(Jr[ti++]=ho,Jr[ti++]=po,Jr[ti++]=Jl,ho=e.id,po=e.overflow,Jl=t),t=vI(t,r.children),t.flags|=4096,t)}function zA(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),y2(e.return,t,n)}function ww(e,t,n,r,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function dD(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(Vn(e,t,r.children,n),r=Fe.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)t:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&zA(e,n,t);else if(e.tag===19)zA(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break t;for(;e.sibling===null;){if(e.return===null||e.return===t)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Se(Fe,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&qm(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),ww(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&qm(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}ww(t,!0,n,null,s);break;case"together":ww(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function H0(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function $o(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),ec|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(q(153));if(t.child!==null){for(e=t.child,n=Ia(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Ia(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function kV(e,t,n){switch(t.tag){case 3:uD(t),sf();break;case 5:Uk(t);break;case 1:hr(t.type)&&Um(t);break;case 4:fI(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Se(jm,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Se(Fe,Fe.current&1),t.flags|=128,null):n&t.child.childLanes?fD(e,t,n):(Se(Fe,Fe.current&1),e=$o(e,t,n),e!==null?e.sibling:null);Se(Fe,Fe.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return dD(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Se(Fe,Fe.current),r)break;return null;case 22:case 23:return t.lanes=0,lD(e,t,n)}return $o(e,t,n)}var hD,x2,pD,yD;hD=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};x2=function(){};pD=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Dl(Ms.current);var s=null;switch(n){case"input":i=q_(e,i),r=q_(e,r),s=[];break;case"select":i=je({},i,{value:void 0}),r=je({},r,{value:void 0}),s=[];break;case"textarea":i=G_(e,i),r=G_(e,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Rm)}Q_(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Fh.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Fh.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Ie("scroll",e),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(t.updateQueue=c)&&(t.flags|=4)}};yD=function(e,t,n,r){n!==r&&(t.flags|=4)};function wd(e,t){if(!Me)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Nn(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function DV(e,t,n){var r=t.pendingProps;switch(iI(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Nn(t),null;case 1:return hr(t.type)&&Cm(),Nn(t),null;case 3:return r=t.stateNode,af(),Te(dr),Te(Pn),hI(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Qy(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ki!==null&&(k2(ki),ki=null))),x2(e,t),Nn(t),null;case 5:dI(t);var i=Dl(Hh.current);if(n=t.type,e!==null&&t.stateNode!=null)pD(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(q(166));return Nn(t),null}if(e=Dl(Ms.current),Qy(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[hs]=t,r[qh]=s,e=(t.mode&1)!==0,n){case"dialog":Ie("cancel",r),Ie("close",r);break;case"iframe":case"object":case"embed":Ie("load",r);break;case"video":case"audio":for(i=0;i<Pd.length;i++)Ie(Pd[i],r);break;case"source":Ie("error",r);break;case"img":case"image":case"link":Ie("error",r),Ie("load",r);break;case"details":Ie("toggle",r);break;case"input":QE(r,s),Ie("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ie("invalid",r);break;case"textarea":ZE(r,s),Ie("invalid",r)}Q_(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Xy(r.textContent,a,e),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Xy(r.textContent,a,e),i=["children",""+a]):Fh.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ie("scroll",r)}switch(n){case"input":zy(r),KE(r,s,!0);break;case"textarea":zy(r),JE(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Rm)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=j4(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[hs]=t,e[qh]=r,hD(e,t,!1,!1),t.stateNode=e;t:{switch(o=K_(n,r),n){case"dialog":Ie("cancel",e),Ie("close",e),i=r;break;case"iframe":case"object":case"embed":Ie("load",e),i=r;break;case"video":case"audio":for(i=0;i<Pd.length;i++)Ie(Pd[i],e);i=r;break;case"source":Ie("error",e),i=r;break;case"img":case"image":case"link":Ie("error",e),Ie("load",e),i=r;break;case"details":Ie("toggle",e),i=r;break;case"input":QE(e,r),i=q_(e,r),Ie("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=je({},r,{value:void 0}),Ie("invalid",e);break;case"textarea":ZE(e,r),i=G_(e,r),Ie("invalid",e);break;default:i=r}Q_(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?q4(e,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&V4(e,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Lh(e,l):typeof l=="number"&&Lh(e,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Fh.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Ie("scroll",e):l!=null&&Vx(e,s,l,o))}switch(n){case"input":zy(e),KE(e,r,!1);break;case"textarea":zy(e),JE(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Aa(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?ku(e,!!r.multiple,s,!1):r.defaultValue!=null&&ku(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Rm)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break t;case"img":r=!0;break t;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Nn(t),null;case 6:if(e&&t.stateNode!=null)yD(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(q(166));if(n=Dl(Hh.current),Dl(Ms.current),Qy(t)){if(r=t.stateNode,n=t.memoizedProps,r[hs]=t,(s=r.nodeValue!==n)&&(e=Fr,e!==null))switch(e.tag){case 3:Xy(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Xy(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[hs]=t,t.stateNode=r}return Nn(t),null;case 13:if(Te(Fe),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Me&&kr!==null&&t.mode&1&&!(t.flags&128))Dk(),sf(),t.flags|=98560,s=!1;else if(s=Qy(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(q(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(q(317));s[hs]=t}else sf(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Nn(t),s=!1}else ki!==null&&(k2(ki),ki=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Fe.current&1?un===0&&(un=3):TI())),t.updateQueue!==null&&(t.flags|=4),Nn(t),null);case 4:return af(),x2(e,t),e===null&&Vh(t.stateNode.containerInfo),Nn(t),null;case 10:return lI(t.type._context),Nn(t),null;case 17:return hr(t.type)&&Cm(),Nn(t),null;case 19:if(Te(Fe),s=t.memoizedState,s===null)return Nn(t),null;if(r=(t.flags&128)!==0,o=s.rendering,o===null)if(r)wd(s,!1);else{if(un!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=qm(e),o!==null){for(t.flags|=128,wd(s,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Se(Fe,Fe.current&1|2),t.child}e=e.sibling}s.tail!==null&&Ze()>cf&&(t.flags|=128,r=!0,wd(s,!1),t.lanes=4194304)}else{if(!r)if(e=qm(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),wd(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Me)return Nn(t),null}else 2*Ze()-s.renderingStartTime>cf&&n!==1073741824&&(t.flags|=128,r=!0,wd(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(n=s.last,n!==null?n.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Ze(),t.sibling=null,n=Fe.current,Se(Fe,r?n&1|2:n&1),t):(Nn(t),null);case 22:case 23:return II(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?$r&1073741824&&(Nn(t),t.subtreeFlags&6&&(t.flags|=8192)):Nn(t),null;case 24:return null;case 25:return null}throw Error(q(156,t.tag))}function OV(e,t){switch(iI(t),t.tag){case 1:return hr(t.type)&&Cm(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return af(),Te(dr),Te(Pn),hI(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return dI(t),null;case 13:if(Te(Fe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(q(340));sf()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Te(Fe),null;case 4:return af(),null;case 10:return lI(t.type._context),null;case 22:case 23:return II(),null;case 24:return null;default:return null}}var Jy=!1,Bn=!1,BV=typeof WeakSet=="function"?WeakSet:Set,nt=null;function vu(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){We(e,t,r)}else n.current=null}function I2(e,t,n){try{n()}catch(r){We(e,t,r)}}var jA=!1;function FV(e,t){if(a2=Bm,e=vk(),nI(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else t:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break t}var o=0,a=-1,l=-1,c=0,u=0,f=e,d=null;e:for(;;){for(var h;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(h=f.firstChild)!==null;)d=f,f=h;for(;;){if(f===e)break e;if(d===n&&++c===i&&(a=o),d===s&&++u===r&&(l=o),(h=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=h}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(l2={focusedElem:e,selectionRange:n},Bm=!1,nt=t;nt!==null;)if(t=nt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,nt=e;else for(;nt!==null;){t=nt;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,v=p.memoizedState,y=t.stateNode,m=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:Ei(t.type,g),v);y.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(q(163))}}catch(w){We(t,t.return,w)}if(e=t.sibling,e!==null){e.return=t.return,nt=e;break}nt=t.return}return p=jA,jA=!1,p}function vh(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&I2(t,n,s)}i=i.next}while(i!==r)}}function Eb(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function T2(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function mD(e){var t=e.alternate;t!==null&&(e.alternate=null,mD(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[hs],delete t[qh],delete t[f2],delete t[gV],delete t[bV])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function gD(e){return e.tag===5||e.tag===3||e.tag===4}function VA(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||gD(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function E2(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Rm));else if(r!==4&&(e=e.child,e!==null))for(E2(e,t,n),e=e.sibling;e!==null;)E2(e,t,n),e=e.sibling}function A2(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(A2(e,t,n),e=e.sibling;e!==null;)A2(e,t,n),e=e.sibling}var Sn=null,Ai=!1;function Ho(e,t,n){for(n=n.child;n!==null;)bD(e,t,n),n=n.sibling}function bD(e,t,n){if(As&&typeof As.onCommitFiberUnmount=="function")try{As.onCommitFiberUnmount(bb,n)}catch{}switch(n.tag){case 5:Bn||vu(n,t);case 6:var r=Sn,i=Ai;Sn=null,Ho(e,t,n),Sn=r,Ai=i,Sn!==null&&(Ai?(e=Sn,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Sn.removeChild(n.stateNode));break;case 18:Sn!==null&&(Ai?(e=Sn,n=n.stateNode,e.nodeType===8?hw(e.parentNode,n):e.nodeType===1&&hw(e,n),Ph(e)):hw(Sn,n.stateNode));break;case 4:r=Sn,i=Ai,Sn=n.stateNode.containerInfo,Ai=!0,Ho(e,t,n),Sn=r,Ai=i;break;case 0:case 11:case 14:case 15:if(!Bn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&I2(n,t,o),i=i.next}while(i!==r)}Ho(e,t,n);break;case 1:if(!Bn&&(vu(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){We(n,t,a)}Ho(e,t,n);break;case 21:Ho(e,t,n);break;case 22:n.mode&1?(Bn=(r=Bn)||n.memoizedState!==null,Ho(e,t,n),Bn=r):Ho(e,t,n);break;default:Ho(e,t,n)}}function YA(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new BV),t.forEach(function(r){var i=YV.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Ii(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,o=t,a=o;t:for(;a!==null;){switch(a.tag){case 5:Sn=a.stateNode,Ai=!1;break t;case 3:Sn=a.stateNode.containerInfo,Ai=!0;break t;case 4:Sn=a.stateNode.containerInfo,Ai=!0;break t}a=a.return}if(Sn===null)throw Error(q(160));bD(s,o,i),Sn=null,Ai=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){We(i,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)vD(t,e),t=t.sibling}function vD(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ii(t,e),es(e),r&4){try{vh(3,e,e.return),Eb(3,e)}catch(g){We(e,e.return,g)}try{vh(5,e,e.return)}catch(g){We(e,e.return,g)}}break;case 1:Ii(t,e),es(e),r&512&&n!==null&&vu(n,n.return);break;case 5:if(Ii(t,e),es(e),r&512&&n!==null&&vu(n,n.return),e.flags&32){var i=e.stateNode;try{Lh(i,"")}catch(g){We(e,e.return,g)}}if(r&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,o=n!==null?n.memoizedProps:s,a=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&P4(i,s),K_(a,o);var c=K_(a,s);for(o=0;o<l.length;o+=2){var u=l[o],f=l[o+1];u==="style"?q4(i,f):u==="dangerouslySetInnerHTML"?V4(i,f):u==="children"?Lh(i,f):Vx(i,u,f,c)}switch(a){case"input":W_(i,s);break;case"textarea":z4(i,s);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?ku(i,!!s.multiple,h,!1):d!==!!s.multiple&&(s.defaultValue!=null?ku(i,!!s.multiple,s.defaultValue,!0):ku(i,!!s.multiple,s.multiple?[]:"",!1))}i[qh]=s}catch(g){We(e,e.return,g)}}break;case 6:if(Ii(t,e),es(e),r&4){if(e.stateNode===null)throw Error(q(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(g){We(e,e.return,g)}}break;case 3:if(Ii(t,e),es(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ph(t.containerInfo)}catch(g){We(e,e.return,g)}break;case 4:Ii(t,e),es(e);break;case 13:Ii(t,e),es(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(SI=Ze())),r&4&&YA(e);break;case 22:if(u=n!==null&&n.memoizedState!==null,e.mode&1?(Bn=(c=Bn)||u,Ii(t,e),Bn=c):Ii(t,e),es(e),r&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!u&&e.mode&1)for(nt=e,u=e.child;u!==null;){for(f=nt=u;nt!==null;){switch(d=nt,h=d.child,d.tag){case 0:case 11:case 14:case 15:vh(4,d,d.return);break;case 1:vu(d,d.return);var p=d.stateNode;if(typeof p.componentWillUnmount=="function"){r=d,n=d.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(g){We(r,n,g)}}break;case 5:vu(d,d.return);break;case 22:if(d.memoizedState!==null){WA(f);continue}}h!==null?(h.return=d,nt=h):WA(f)}u=u.sibling}t:for(u=null,f=e;;){if(f.tag===5){if(u===null){u=f;try{i=f.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Y4("display",o))}catch(g){We(e,e.return,g)}}}else if(f.tag===6){if(u===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(g){We(e,e.return,g)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break t;for(;f.sibling===null;){if(f.return===null||f.return===e)break t;u===f&&(u=null),f=f.return}u===f&&(u=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Ii(t,e),es(e),r&4&&YA(e);break;case 21:break;default:Ii(t,e),es(e)}}function es(e){var t=e.flags;if(t&2){try{t:{for(var n=e.return;n!==null;){if(gD(n)){var r=n;break t}n=n.return}throw Error(q(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Lh(i,""),r.flags&=-33);var s=VA(e);A2(e,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=VA(e);E2(e,a,o);break;default:throw Error(q(161))}}catch(l){We(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function LV(e,t,n){nt=e,wD(e)}function wD(e,t,n){for(var r=(e.mode&1)!==0;nt!==null;){var i=nt,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Jy;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Bn;a=Jy;var c=Bn;if(Jy=o,(Bn=l)&&!c)for(nt=i;nt!==null;)o=nt,l=o.child,o.tag===22&&o.memoizedState!==null?HA(i):l!==null?(l.return=o,nt=l):HA(i);for(;s!==null;)nt=s,wD(s),s=s.sibling;nt=i,Jy=a,Bn=c}qA(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,nt=s):qA(e)}}function qA(e){for(;nt!==null;){var t=nt;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Bn||Eb(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Bn)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Ei(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&MA(t,s,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}MA(t,o,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var f=u.dehydrated;f!==null&&Ph(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(q(163))}Bn||t.flags&512&&T2(t)}catch(d){We(t,t.return,d)}}if(t===e){nt=null;break}if(n=t.sibling,n!==null){n.return=t.return,nt=n;break}nt=t.return}}function WA(e){for(;nt!==null;){var t=nt;if(t===e){nt=null;break}var n=t.sibling;if(n!==null){n.return=t.return,nt=n;break}nt=t.return}}function HA(e){for(;nt!==null;){var t=nt;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Eb(4,t)}catch(l){We(t,n,l)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(l){We(t,i,l)}}var s=t.return;try{T2(t)}catch(l){We(t,s,l)}break;case 5:var o=t.return;try{T2(t)}catch(l){We(t,o,l)}}}catch(l){We(t,t.return,l)}if(t===e){nt=null;break}var a=t.sibling;if(a!==null){a.return=t.return,nt=a;break}nt=t.return}}var RV=Math.ceil,Gm=Lo.ReactCurrentDispatcher,wI=Lo.ReactCurrentOwner,hi=Lo.ReactCurrentBatchConfig,Xt=0,vn=null,rn=null,En=0,$r=0,wu=Qa(0),un=0,Kh=null,ec=0,Ab=0,_I=0,wh=null,ar=null,SI=0,cf=1/0,to=null,Xm=!1,M2=null,Sa=null,t0=!1,pa=null,Qm=0,_h=0,$2=null,G0=-1,X0=0;function Kn(){return Xt&6?Ze():G0!==-1?G0:G0=Ze()}function xa(e){return e.mode&1?Xt&2&&En!==0?En&-En:wV.transition!==null?(X0===0&&(X0=rk()),X0):(e=de,e!==0||(e=window.event,e=e===void 0?16:uk(e.type)),e):1}function Ci(e,t,n,r){if(50<_h)throw _h=0,$2=null,Error(q(185));Pp(e,n,r),(!(Xt&2)||e!==vn)&&(e===vn&&(!(Xt&2)&&(Ab|=n),un===4&&la(e,En)),pr(e,r),n===1&&Xt===0&&!(t.mode&1)&&(cf=Ze()+500,xb&&Ka()))}function pr(e,t){var n=e.callbackNode;wj(e,t);var r=Om(e,e===vn?En:0);if(r===0)n!==null&&nA(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&nA(n),t===1)e.tag===0?vV(GA.bind(null,e)):$k(GA.bind(null,e)),yV(function(){!(Xt&6)&&Ka()}),n=null;else{switch(ik(r)){case 1:n=Gx;break;case 4:n=ek;break;case 16:n=Dm;break;case 536870912:n=nk;break;default:n=Dm}n=MD(n,_D.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function _D(e,t){if(G0=-1,X0=0,Xt&6)throw Error(q(327));var n=e.callbackNode;if(Lu()&&e.callbackNode!==n)return null;var r=Om(e,e===vn?En:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Km(e,r);else{t=r;var i=Xt;Xt|=2;var s=xD();(vn!==e||En!==t)&&(to=null,cf=Ze()+500,jl(e,t));do try{PV();break}catch(a){SD(e,a)}while(!0);aI(),Gm.current=s,Xt=i,rn!==null?t=0:(vn=null,En=0,t=un)}if(t!==0){if(t===2&&(i=n2(e),i!==0&&(r=i,t=N2(e,i))),t===1)throw n=Kh,jl(e,0),la(e,r),pr(e,Ze()),n;if(t===6)la(e,r);else{if(i=e.current.alternate,!(r&30)&&!CV(i)&&(t=Km(e,r),t===2&&(s=n2(e),s!==0&&(r=s,t=N2(e,s))),t===1))throw n=Kh,jl(e,0),la(e,r),pr(e,Ze()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(q(345));case 2:yl(e,ar,to);break;case 3:if(la(e,r),(r&130023424)===r&&(t=SI+500-Ze(),10<t)){if(Om(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Kn(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=u2(yl.bind(null,e,ar,to),t);break}yl(e,ar,to);break;case 4:if(la(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-Ri(r);s=1<<o,o=t[o],o>i&&(i=o),r&=~s}if(r=i,r=Ze()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*RV(r/1960))-r,10<r){e.timeoutHandle=u2(yl.bind(null,e,ar,to),r);break}yl(e,ar,to);break;case 5:yl(e,ar,to);break;default:throw Error(q(329))}}}return pr(e,Ze()),e.callbackNode===n?_D.bind(null,e):null}function N2(e,t){var n=wh;return e.current.memoizedState.isDehydrated&&(jl(e,t).flags|=256),e=Km(e,t),e!==2&&(t=ar,ar=n,t!==null&&k2(t)),e}function k2(e){ar===null?ar=e:ar.push.apply(ar,e)}function CV(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Pi(s(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function la(e,t){for(t&=~_I,t&=~Ab,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Ri(t),r=1<<n;e[n]=-1,t&=~r}}function GA(e){if(Xt&6)throw Error(q(327));Lu();var t=Om(e,0);if(!(t&1))return pr(e,Ze()),null;var n=Km(e,t);if(e.tag!==0&&n===2){var r=n2(e);r!==0&&(t=r,n=N2(e,r))}if(n===1)throw n=Kh,jl(e,0),la(e,t),pr(e,Ze()),n;if(n===6)throw Error(q(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,yl(e,ar,to),pr(e,Ze()),null}function xI(e,t){var n=Xt;Xt|=1;try{return e(t)}finally{Xt=n,Xt===0&&(cf=Ze()+500,xb&&Ka())}}function nc(e){pa!==null&&pa.tag===0&&!(Xt&6)&&Lu();var t=Xt;Xt|=1;var n=hi.transition,r=de;try{if(hi.transition=null,de=1,e)return e()}finally{de=r,hi.transition=n,Xt=t,!(Xt&6)&&Ka()}}function II(){$r=wu.current,Te(wu)}function jl(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,pV(n)),rn!==null)for(n=rn.return;n!==null;){var r=n;switch(iI(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Cm();break;case 3:af(),Te(dr),Te(Pn),hI();break;case 5:dI(r);break;case 4:af();break;case 13:Te(Fe);break;case 19:Te(Fe);break;case 10:lI(r.type._context);break;case 22:case 23:II()}n=n.return}if(vn=e,rn=e=Ia(e.current,null),En=$r=t,un=0,Kh=null,_I=Ab=ec=0,ar=wh=null,kl!==null){for(t=0;t<kl.length;t++)if(n=kl[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}kl=null}return e}function SD(e,t){do{var n=rn;try{if(aI(),q0.current=Hm,Wm){for(var r=Pe.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Wm=!1}if(tc=0,mn=an=Pe=null,bh=!1,Gh=0,wI.current=null,n===null||n.return===null){un=1,Kh=t,rn=null;break}t:{var s=e,o=n.return,a=n,l=t;if(t=En,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,f=u.tag;if(!(u.mode&1)&&(f===0||f===11||f===15)){var d=u.alternate;d?(u.updateQueue=d.updateQueue,u.memoizedState=d.memoizedState,u.lanes=d.lanes):(u.updateQueue=null,u.memoizedState=null)}var h=FA(o);if(h!==null){h.flags&=-257,LA(h,o,a,s,t),h.mode&1&&BA(s,c,t),t=h,l=c;var p=t.updateQueue;if(p===null){var g=new Set;g.add(l),t.updateQueue=g}else p.add(l);break t}else{if(!(t&1)){BA(s,c,t),TI();break t}l=Error(q(426))}}else if(Me&&a.mode&1){var v=FA(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),LA(v,o,a,s,t),sI(lf(l,a));break t}}s=l=lf(l,a),un!==4&&(un=2),wh===null?wh=[s]:wh.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var y=sD(s,l,t);AA(s,y);break t;case 1:a=l;var m=s.type,b=s.stateNode;if(!(s.flags&128)&&(typeof m.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Sa===null||!Sa.has(b)))){s.flags|=65536,t&=-t,s.lanes|=t;var w=oD(s,a,t);AA(s,w);break t}}s=s.return}while(s!==null)}TD(n)}catch(S){t=S,rn===n&&n!==null&&(rn=n=n.return);continue}break}while(!0)}function xD(){var e=Gm.current;return Gm.current=Hm,e===null?Hm:e}function TI(){(un===0||un===3||un===2)&&(un=4),vn===null||!(ec&268435455)&&!(Ab&268435455)||la(vn,En)}function Km(e,t){var n=Xt;Xt|=2;var r=xD();(vn!==e||En!==t)&&(to=null,jl(e,t));do try{UV();break}catch(i){SD(e,i)}while(!0);if(aI(),Xt=n,Gm.current=r,rn!==null)throw Error(q(261));return vn=null,En=0,un}function UV(){for(;rn!==null;)ID(rn)}function PV(){for(;rn!==null&&!fj();)ID(rn)}function ID(e){var t=AD(e.alternate,e,$r);e.memoizedProps=e.pendingProps,t===null?TD(e):rn=t,wI.current=null}function TD(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=OV(n,t),n!==null){n.flags&=32767,rn=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{un=6,rn=null;return}}else if(n=DV(n,t,$r),n!==null){rn=n;return}if(t=t.sibling,t!==null){rn=t;return}rn=t=e}while(t!==null);un===0&&(un=5)}function yl(e,t,n){var r=de,i=hi.transition;try{hi.transition=null,de=1,zV(e,t,n,r)}finally{hi.transition=i,de=r}return null}function zV(e,t,n,r){do Lu();while(pa!==null);if(Xt&6)throw Error(q(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(q(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(_j(e,s),e===vn&&(rn=vn=null,En=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||t0||(t0=!0,MD(Dm,function(){return Lu(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=hi.transition,hi.transition=null;var o=de;de=1;var a=Xt;Xt|=4,wI.current=null,FV(e,n),vD(n,e),aV(l2),Bm=!!a2,l2=a2=null,e.current=n,LV(n),dj(),Xt=a,de=o,hi.transition=s}else e.current=n;if(t0&&(t0=!1,pa=e,Qm=i),s=e.pendingLanes,s===0&&(Sa=null),yj(n.stateNode),pr(e,Ze()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Xm)throw Xm=!1,e=M2,M2=null,e;return Qm&1&&e.tag!==0&&Lu(),s=e.pendingLanes,s&1?e===$2?_h++:(_h=0,$2=e):_h=0,Ka(),null}function Lu(){if(pa!==null){var e=ik(Qm),t=hi.transition,n=de;try{if(hi.transition=null,de=16>e?16:e,pa===null)var r=!1;else{if(e=pa,pa=null,Qm=0,Xt&6)throw Error(q(331));var i=Xt;for(Xt|=4,nt=e.current;nt!==null;){var s=nt,o=s.child;if(nt.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(nt=c;nt!==null;){var u=nt;switch(u.tag){case 0:case 11:case 15:vh(8,u,s)}var f=u.child;if(f!==null)f.return=u,nt=f;else for(;nt!==null;){u=nt;var d=u.sibling,h=u.return;if(mD(u),u===c){nt=null;break}if(d!==null){d.return=h,nt=d;break}nt=h}}}var p=s.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(g!==null)}}nt=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,nt=o;else t:for(;nt!==null;){if(s=nt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:vh(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,nt=y;break t}nt=s.return}}var m=e.current;for(nt=m;nt!==null;){o=nt;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,nt=b;else t:for(o=m;nt!==null;){if(a=nt,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Eb(9,a)}}catch(S){We(a,a.return,S)}if(a===o){nt=null;break t}var w=a.sibling;if(w!==null){w.return=a.return,nt=w;break t}nt=a.return}}if(Xt=i,Ka(),As&&typeof As.onPostCommitFiberRoot=="function")try{As.onPostCommitFiberRoot(bb,e)}catch{}r=!0}return r}finally{de=n,hi.transition=t}}return!1}function XA(e,t,n){t=lf(n,t),t=sD(e,t,1),e=_a(e,t,1),t=Kn(),e!==null&&(Pp(e,1,t),pr(e,t))}function We(e,t,n){if(e.tag===3)XA(e,e,n);else for(;t!==null;){if(t.tag===3){XA(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Sa===null||!Sa.has(r))){e=lf(n,e),e=oD(t,e,1),t=_a(t,e,1),e=Kn(),t!==null&&(Pp(t,1,e),pr(t,e));break}}t=t.return}}function jV(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Kn(),e.pingedLanes|=e.suspendedLanes&n,vn===e&&(En&n)===n&&(un===4||un===3&&(En&130023424)===En&&500>Ze()-SI?jl(e,0):_I|=n),pr(e,t)}function ED(e,t){t===0&&(e.mode&1?(t=Yy,Yy<<=1,!(Yy&130023424)&&(Yy=4194304)):t=1);var n=Kn();e=Mo(e,t),e!==null&&(Pp(e,t,n),pr(e,n))}function VV(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),ED(e,n)}function YV(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(q(314))}r!==null&&r.delete(t),ED(e,n)}var AD;AD=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||dr.current)ur=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return ur=!1,kV(e,t,n);ur=!!(e.flags&131072)}else ur=!1,Me&&t.flags&1048576&&Nk(t,zm,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;H0(e,t),e=t.pendingProps;var i=rf(t,Pn.current);Fu(t,n),i=yI(null,t,r,e,i,n);var s=mI();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,hr(r)?(s=!0,Um(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,uI(t),i.updater=Ib,t.stateNode=i,i._reactInternals=t,g2(t,r,e,n),t=w2(null,t,r,!0,s,n)):(t.tag=0,Me&&s&&rI(t),Vn(null,t,i,n),t=t.child),t;case 16:r=t.elementType;t:{switch(H0(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=WV(r),e=Ei(r,e),i){case 0:t=v2(null,t,r,e,n);break t;case 1:t=UA(null,t,r,e,n);break t;case 11:t=RA(null,t,r,e,n);break t;case 14:t=CA(null,t,r,Ei(r.type,e),n);break t}throw Error(q(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Ei(r,i),v2(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Ei(r,i),UA(e,t,r,i,n);case 3:t:{if(uD(t),e===null)throw Error(q(387));r=t.pendingProps,s=t.memoizedState,i=s.element,Bk(e,t),Ym(t,r,null,n);var o=t.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=lf(Error(q(423)),t),t=PA(e,t,r,n,i);break t}else if(r!==i){i=lf(Error(q(424)),t),t=PA(e,t,r,n,i);break t}else for(kr=wa(t.stateNode.containerInfo.firstChild),Fr=t,Me=!0,ki=null,n=Ck(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(sf(),r===i){t=$o(e,t,n);break t}Vn(e,t,r,n)}t=t.child}return t;case 5:return Uk(t),e===null&&p2(t),r=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,o=i.children,c2(r,i)?o=null:s!==null&&c2(r,s)&&(t.flags|=32),cD(e,t),Vn(e,t,o,n),t.child;case 6:return e===null&&p2(t),null;case 13:return fD(e,t,n);case 4:return fI(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=of(t,null,r,n):Vn(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Ei(r,i),RA(e,t,r,i,n);case 7:return Vn(e,t,t.pendingProps,n),t.child;case 8:return Vn(e,t,t.pendingProps.children,n),t.child;case 12:return Vn(e,t,t.pendingProps.children,n),t.child;case 10:t:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value,Se(jm,r._currentValue),r._currentValue=o,s!==null)if(Pi(s.value,o)){if(s.children===i.children&&!dr.current){t=$o(e,t,n);break t}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=wo(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),y2(s.return,n,t),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(q(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),y2(o,n,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Vn(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Fu(t,n),i=yi(i),r=r(i),t.flags|=1,Vn(e,t,r,n),t.child;case 14:return r=t.type,i=Ei(r,t.pendingProps),i=Ei(r.type,i),CA(e,t,r,i,n);case 15:return aD(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Ei(r,i),H0(e,t),t.tag=1,hr(r)?(e=!0,Um(t)):e=!1,Fu(t,n),Lk(t,r,i),g2(t,r,i,n),w2(null,t,r,!0,e,n);case 19:return dD(e,t,n);case 22:return lD(e,t,n)}throw Error(q(156,t.tag))};function MD(e,t){return tk(e,t)}function qV(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function si(e,t,n,r){return new qV(e,t,n,r)}function EI(e){return e=e.prototype,!(!e||!e.isReactComponent)}function WV(e){if(typeof e=="function")return EI(e)?1:0;if(e!=null){if(e=e.$$typeof,e===qx)return 11;if(e===Wx)return 14}return 2}function Ia(e,t){var n=e.alternate;return n===null?(n=si(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Q0(e,t,n,r,i,s){var o=2;if(r=e,typeof e=="function")EI(e)&&(o=1);else if(typeof e=="string")o=5;else t:switch(e){case uu:return Vl(n.children,i,s,t);case Yx:o=8,i|=8;break;case z_:return e=si(12,n,t,i|2),e.elementType=z_,e.lanes=s,e;case j_:return e=si(13,n,t,i),e.elementType=j_,e.lanes=s,e;case V_:return e=si(19,n,t,i),e.elementType=V_,e.lanes=s,e;case R4:return Mb(n,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case F4:o=10;break t;case L4:o=9;break t;case qx:o=11;break t;case Wx:o=14;break t;case ta:o=16,r=null;break t}throw Error(q(130,e==null?e:typeof e,""))}return t=si(o,n,t,i),t.elementType=e,t.type=r,t.lanes=s,t}function Vl(e,t,n,r){return e=si(7,e,r,t),e.lanes=n,e}function Mb(e,t,n,r){return e=si(22,e,r,t),e.elementType=R4,e.lanes=n,e.stateNode={isHidden:!1},e}function _w(e,t,n){return e=si(6,e,null,t),e.lanes=n,e}function Sw(e,t,n){return t=si(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function HV(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=nw(0),this.expirationTimes=nw(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=nw(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function AI(e,t,n,r,i,s,o,a,l){return e=new HV(e,t,n,a,l),t===1?(t=1,s===!0&&(t|=8)):t=0,s=si(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},uI(s),e}function GV(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:cu,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function $D(e){if(!e)return Ma;e=e._reactInternals;t:{if(wc(e)!==e||e.tag!==1)throw Error(q(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break t;case 1:if(hr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break t}}t=t.return}while(t!==null);throw Error(q(171))}if(e.tag===1){var n=e.type;if(hr(n))return Mk(e,n,t)}return t}function ND(e,t,n,r,i,s,o,a,l){return e=AI(n,r,!0,e,i,s,o,a,l),e.context=$D(null),n=e.current,r=Kn(),i=xa(n),s=wo(r,i),s.callback=t??null,_a(n,s,i),e.current.lanes=i,Pp(e,i,r),pr(e,r),e}function $b(e,t,n,r){var i=t.current,s=Kn(),o=xa(i);return n=$D(n),t.context===null?t.context=n:t.pendingContext=n,t=wo(s,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=_a(i,t,o),e!==null&&(Ci(e,i,o,s),Y0(e,i,o)),o}function Zm(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function QA(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function MI(e,t){QA(e,t),(e=e.alternate)&&QA(e,t)}function XV(){return null}var kD=typeof reportError=="function"?reportError:function(e){console.error(e)};function $I(e){this._internalRoot=e}Nb.prototype.render=$I.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(q(409));$b(e,t,null,null)};Nb.prototype.unmount=$I.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;nc(function(){$b(null,e,null,null)}),t[Ao]=null}};function Nb(e){this._internalRoot=e}Nb.prototype.unstable_scheduleHydration=function(e){if(e){var t=ak();e={blockedOn:null,target:e,priority:t};for(var n=0;n<aa.length&&t!==0&&t<aa[n].priority;n++);aa.splice(n,0,e),n===0&&ck(e)}};function NI(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function kb(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function KA(){}function QV(e,t,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=Zm(o);s.call(c)}}var o=ND(t,r,e,0,null,!1,!1,"",KA);return e._reactRootContainer=o,e[Ao]=o.current,Vh(e.nodeType===8?e.parentNode:e),nc(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=Zm(l);a.call(c)}}var l=AI(e,0,!1,null,null,!1,!1,"",KA);return e._reactRootContainer=l,e[Ao]=l.current,Vh(e.nodeType===8?e.parentNode:e),nc(function(){$b(t,l,n,r)}),l}function Db(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Zm(o);a.call(l)}}$b(t,o,e,i)}else o=QV(n,t,e,i,r);return Zm(o)}sk=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Ud(t.pendingLanes);n!==0&&(Xx(t,n|1),pr(t,Ze()),!(Xt&6)&&(cf=Ze()+500,Ka()))}break;case 13:nc(function(){var r=Mo(e,1);if(r!==null){var i=Kn();Ci(r,e,1,i)}}),MI(e,1)}};Qx=function(e){if(e.tag===13){var t=Mo(e,134217728);if(t!==null){var n=Kn();Ci(t,e,134217728,n)}MI(e,134217728)}};ok=function(e){if(e.tag===13){var t=xa(e),n=Mo(e,t);if(n!==null){var r=Kn();Ci(n,e,t,r)}MI(e,t)}};ak=function(){return de};lk=function(e,t){var n=de;try{return de=e,t()}finally{de=n}};J_=function(e,t,n){switch(t){case"input":if(W_(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Sb(r);if(!i)throw Error(q(90));U4(r),W_(r,i)}}}break;case"textarea":z4(e,n);break;case"select":t=n.value,t!=null&&ku(e,!!n.multiple,t,!1)}};G4=xI;X4=nc;var KV={usingClientEntryPoint:!1,Events:[jp,pu,Sb,W4,H4,xI]},_d={findFiberByHostInstance:Nl,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},ZV={bundleType:_d.bundleType,version:_d.version,rendererPackageName:_d.rendererPackageName,rendererConfig:_d.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Lo.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Z4(e),e===null?null:e.stateNode},findFiberByHostInstance:_d.findFiberByHostInstance||XV,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var e0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!e0.isDisabled&&e0.supportsFiber)try{bb=e0.inject(ZV),As=e0}catch{}}Vr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=KV;Vr.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!NI(t))throw Error(q(200));return GV(e,t,null,n)};Vr.createRoot=function(e,t){if(!NI(e))throw Error(q(299));var n=!1,r="",i=kD;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=AI(e,1,!1,null,null,n,!1,r,i),e[Ao]=t.current,Vh(e.nodeType===8?e.parentNode:e),new $I(t)};Vr.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(q(188)):(e=Object.keys(e).join(","),Error(q(268,e)));return e=Z4(t),e=e===null?null:e.stateNode,e};Vr.flushSync=function(e){return nc(e)};Vr.hydrate=function(e,t,n){if(!kb(t))throw Error(q(200));return Db(null,e,t,!0,n)};Vr.hydrateRoot=function(e,t,n){if(!NI(e))throw Error(q(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=kD;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=ND(t,null,e,1,n??null,i,!1,s,o),e[Ao]=t.current,Vh(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Nb(t)};Vr.render=function(e,t,n){if(!kb(t))throw Error(q(200));return Db(null,e,t,!1,n)};Vr.unmountComponentAtNode=function(e){if(!kb(e))throw Error(q(40));return e._reactRootContainer?(nc(function(){Db(null,null,e,!1,function(){e._reactRootContainer=null,e[Ao]=null})}),!0):!1};Vr.unstable_batchedUpdates=xI;Vr.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!kb(n))throw Error(q(200));if(e==null||e._reactInternals===void 0)throw Error(q(38));return Db(e,t,n,!1,r)};Vr.version="18.2.0-next-9e3b772b8-20220608";function DD(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(DD)}catch(e){console.error(e)}}DD(),N4.exports=Vr;var JV=N4.exports,ZA=JV;U_.createRoot=ZA.createRoot,U_.hydrateRoot=ZA.hydrateRoot;function W(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(e,t||[])).next())})}function JA(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function K(e){return this instanceof K?(this.v=e,this):new K(e)}function sn(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(d){r[d]&&(i[d]=function(h){return new Promise(function(p,g){s.push([d,h,p,g])>1||a(d,h)})})}function a(d,h){try{l(r[d](h))}catch(p){f(s[0][3],p)}}function l(d){d.value instanceof K?Promise.resolve(d.value.v).then(c,u):f(s[0][2],d)}function c(d){a("next",d)}function u(d){a("throw",d)}function f(d,h){d(h),s.shift(),s.length&&a(s[0][0],s[0][1])}}function Ta(e){var t,n;return t={},r("next"),r("throw",function(i){throw i}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(i,s){t[i]=e[i]?function(o){return(n=!n)?{value:K(e[i](o)),done:!1}:s?s(o):o}:s}}function Lr(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof JA=="function"?JA(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=e[s]&&function(o){return new Promise(function(a,l){o=e[s](o),i(a,l,o.done,o.value)})}}function i(s,o,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},o)}}const tY=new TextDecoder("utf-8"),D2=e=>tY.decode(e),eY=new TextEncoder,kI=e=>eY.encode(e),[Qbt,nY]=(()=>{const e=()=>{throw new Error("BigInt is not available in this environment")};function t(){throw e()}return t.asIntN=()=>{throw e()},t.asUintN=()=>{throw e()},typeof BigInt<"u"?[BigInt,!0]:[t,!1]})(),[Yp,Kbt]=(()=>{const e=()=>{throw new Error("BigInt64Array is not available in this environment")};class t{static get BYTES_PER_ELEMENT(){return 8}static of(){throw e()}static from(){throw e()}constructor(){throw e()}}return typeof BigInt64Array<"u"?[BigInt64Array,!0]:[t,!1]})(),[qp,Zbt]=(()=>{const e=()=>{throw new Error("BigUint64Array is not available in this environment")};class t{static get BYTES_PER_ELEMENT(){return 8}static of(){throw e()}static from(){throw e()}constructor(){throw e()}}return typeof BigUint64Array<"u"?[BigUint64Array,!0]:[t,!1]})(),rY=e=>typeof e=="number",iY=e=>typeof e=="boolean",Yn=e=>typeof e=="function",zi=e=>e!=null&&Object(e)===e,Zh=e=>zi(e)&&Yn(e.then),Ob=e=>zi(e)&&Yn(e[Symbol.iterator]),DI=e=>zi(e)&&Yn(e[Symbol.asyncIterator]),O2=e=>zi(e)&&zi(e.schema),OD=e=>zi(e)&&"done"in e&&"value"in e,BD=e=>zi(e)&&Yn(e.stat)&&rY(e.fd),FD=e=>zi(e)&&OI(e.body),LD=e=>"_getDOMStream"in e&&"_getNodeStream"in e,OI=e=>zi(e)&&Yn(e.cancel)&&Yn(e.getReader)&&!LD(e),RD=e=>zi(e)&&Yn(e.read)&&Yn(e.pipe)&&iY(e.readable)&&!LD(e),sY=e=>zi(e)&&Yn(e.clear)&&Yn(e.bytes)&&Yn(e.position)&&Yn(e.setPosition)&&Yn(e.capacity)&&Yn(e.getBufferIdentifier)&&Yn(e.createLong),BI=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function oY(e){const t=e[0]?[e[0]]:[];let n,r,i,s;for(let o,a,l=0,c=0,u=e.length;++l<u;){if(o=t[c],a=e[l],!o||!a||o.buffer!==a.buffer||a.byteOffset<o.byteOffset){a&&(t[++c]=a);continue}if({byteOffset:n,byteLength:i}=o,{byteOffset:r,byteLength:s}=a,n+i<r||r+s<n){a&&(t[++c]=a);continue}t[c]=new Uint8Array(o.buffer,n,r-n+s)}return t}function tM(e,t,n=0,r=t.byteLength){const i=e.byteLength,s=new Uint8Array(e.buffer,e.byteOffset,i),o=new Uint8Array(t.buffer,t.byteOffset,Math.min(r,i));return s.set(o,n),e}function Ds(e,t){const n=oY(e),r=n.reduce((u,f)=>u+f.byteLength,0);let i,s,o,a=0,l=-1;const c=Math.min(t||Number.POSITIVE_INFINITY,r);for(const u=n.length;++l<u;){if(i=n[l],s=i.subarray(0,Math.min(i.length,c-a)),c<=a+s.length){s.length<i.length?n[l]=i.subarray(s.length):s.length===i.length&&l++,o?tM(o,s,a):o=s;break}tM(o||(o=new Uint8Array(c)),s,a),a+=s.length}return[o||new Uint8Array(0),n.slice(l),r-(o?o.byteLength:0)]}function ye(e,t){let n=OD(t)?t.value:t;return n instanceof e?e===Uint8Array?new e(n.buffer,n.byteOffset,n.byteLength):n:n?(typeof n=="string"&&(n=kI(n)),n instanceof ArrayBuffer?new e(n):n instanceof BI?new e(n):sY(n)?ye(e,n.bytes()):ArrayBuffer.isView(n)?n.byteLength<=0?new e(0):new e(n.buffer,n.byteOffset,n.byteLength/e.BYTES_PER_ELEMENT):e.from(n)):new e(0)}const Sd=e=>ye(Int32Array,e),ie=e=>ye(Uint8Array,e),B2=e=>(e.next(),e);function*aY(e,t){const n=function*(i){yield i},r=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof BI?n(t):Ob(t)?t:n(t);return yield*B2(function*(i){let s=null;do s=i.next(yield ye(e,s));while(!s.done)}(r[Symbol.iterator]())),new e}const lY=e=>aY(Uint8Array,e);function CD(e,t){return sn(this,arguments,function*(){if(Zh(t))return yield K(yield K(yield*Ta(Lr(CD(e,yield K(t))))));const r=function(o){return sn(this,arguments,function*(){yield yield K(yield K(o))})},i=function(o){return sn(this,arguments,function*(){yield K(yield*Ta(Lr(B2(function*(a){let l=null;do l=a.next(yield l==null?void 0:l.value);while(!l.done)}(o[Symbol.iterator]())))))})},s=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof BI?r(t):Ob(t)?i(t):DI(t)?t:r(t);return yield K(yield*Ta(Lr(B2(function(o){return sn(this,arguments,function*(){let a=null;do a=yield K(o.next(yield yield K(ye(e,a))));while(!a.done)})}(s[Symbol.asyncIterator]()))))),yield K(new e)})}const cY=e=>CD(Uint8Array,e);function uY(e,t){let n=0;const r=e.length;if(r!==t.length)return!1;if(r>0)do if(e[n]!==t[n])return!1;while(++n<r);return!0}const Kr={fromIterable(e){return n0(fY(e))},fromAsyncIterable(e){return n0(dY(e))},fromDOMStream(e){return n0(hY(e))},fromNodeStream(e){return n0(yY(e))},toDOMStream(e,t){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(e,t){throw new Error('"toNodeStream" not available in this environment')}},n0=e=>(e.next(),e);function*fY(e){let t,n=!1,r=[],i,s,o,a=0;function l(){return s==="peek"?Ds(r,o)[0]:([i,r,a]=Ds(r,o),i)}({cmd:s,size:o}=yield null);const c=lY(e)[Symbol.iterator]();try{do if({done:t,value:i}=Number.isNaN(o-a)?c.next():c.next(o-a),!t&&i.byteLength>0&&(r.push(i),a+=i.byteLength),t||o<=a)do({cmd:s,size:o}=yield l());while(o<a);while(!t)}catch(u){(n=!0)&&typeof c.throw=="function"&&c.throw(u)}finally{n===!1&&typeof c.return=="function"&&c.return(null)}return null}function dY(e){return sn(this,arguments,function*(){let n,r=!1,i=[],s,o,a,l=0;function c(){return o==="peek"?Ds(i,a)[0]:([s,i,l]=Ds(i,a),s)}({cmd:o,size:a}=yield yield K(null));const u=cY(e)[Symbol.asyncIterator]();try{do if({done:n,value:s}=Number.isNaN(a-l)?yield K(u.next()):yield K(u.next(a-l)),!n&&s.byteLength>0&&(i.push(s),l+=s.byteLength),n||a<=l)do({cmd:o,size:a}=yield yield K(c()));while(a<l);while(!n)}catch(f){(r=!0)&&typeof u.throw=="function"&&(yield K(u.throw(f)))}finally{r===!1&&typeof u.return=="function"&&(yield K(u.return(new Uint8Array(0))))}return yield K(null)})}function hY(e){return sn(this,arguments,function*(){let n=!1,r=!1,i=[],s,o,a,l=0;function c(){return o==="peek"?Ds(i,a)[0]:([s,i,l]=Ds(i,a),s)}({cmd:o,size:a}=yield yield K(null));const u=new pY(e);try{do if({done:n,value:s}=Number.isNaN(a-l)?yield K(u.read()):yield K(u.read(a-l)),!n&&s.byteLength>0&&(i.push(ie(s)),l+=s.byteLength),n||a<=l)do({cmd:o,size:a}=yield yield K(c()));while(a<l);while(!n)}catch(f){(r=!0)&&(yield K(u.cancel(f)))}finally{r===!1?yield K(u.cancel()):e.locked&&u.releaseLock()}return yield K(null)})}let pY=class{constructor(t){this.source=t,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(t){return W(this,void 0,void 0,function*(){const{reader:n,source:r}=this;n&&(yield n.cancel(t).catch(()=>{})),r&&r.locked&&this.releaseLock()})}read(t){return W(this,void 0,void 0,function*(){if(t===0)return{done:this.reader==null,value:new Uint8Array(0)};const n=yield this.reader.read();return!n.done&&(n.value=ie(n)),n})}};const xw=(e,t)=>{const n=i=>r([t,i]);let r;return[t,n,new Promise(i=>(r=i)&&e.once(t,n))]};function yY(e){return sn(this,arguments,function*(){const n=[];let r="error",i=!1,s=null,o,a,l=0,c=[],u;function f(){return o==="peek"?Ds(c,a)[0]:([u,c,l]=Ds(c,a),u)}if({cmd:o,size:a}=yield yield K(null),e.isTTY)return yield yield K(new Uint8Array(0)),yield K(null);try{n[0]=xw(e,"end"),n[1]=xw(e,"error");do{if(n[2]=xw(e,"readable"),[r,s]=yield K(Promise.race(n.map(h=>h[2]))),r==="error")break;if((i=r==="end")||(Number.isFinite(a-l)?(u=ie(e.read(a-l)),u.byteLength<a-l&&(u=ie(e.read()))):u=ie(e.read()),u.byteLength>0&&(c.push(u),l+=u.byteLength)),i||a<=l)do({cmd:o,size:a}=yield yield K(f()));while(a<l)}while(!i)}finally{yield K(d(n,r==="error"?s:null))}return yield K(null);function d(h,p){return u=c=null,new Promise((g,v)=>{for(const[y,m]of h)e.off(y,m);try{const y=e.destroy;y&&y.call(e,p),p=void 0}catch(y){p=y||p}finally{p!=null?v(p):g()}})}})}var ri;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(ri||(ri={}));var ji;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(ji||(ji={}));var yr;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(yr||(yr={}));var No;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(No||(No={}));var ee;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(ee||(ee={}));var $a;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})($a||($a={}));var he;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(he||(he={}));var U;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.Float=3]="Float",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct=13]="Struct",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Dictionary=-1]="Dictionary",e[e.Int8=-2]="Int8",e[e.Int16=-3]="Int16",e[e.Int32=-4]="Int32",e[e.Int64=-5]="Int64",e[e.Uint8=-6]="Uint8",e[e.Uint16=-7]="Uint16",e[e.Uint32=-8]="Uint32",e[e.Uint64=-9]="Uint64",e[e.Float16=-10]="Float16",e[e.Float32=-11]="Float32",e[e.Float64=-12]="Float64",e[e.DateDay=-13]="DateDay",e[e.DateMillisecond=-14]="DateMillisecond",e[e.TimestampSecond=-15]="TimestampSecond",e[e.TimestampMillisecond=-16]="TimestampMillisecond",e[e.TimestampMicrosecond=-17]="TimestampMicrosecond",e[e.TimestampNanosecond=-18]="TimestampNanosecond",e[e.TimeSecond=-19]="TimeSecond",e[e.TimeMillisecond=-20]="TimeMillisecond",e[e.TimeMicrosecond=-21]="TimeMicrosecond",e[e.TimeNanosecond=-22]="TimeNanosecond",e[e.DenseUnion=-23]="DenseUnion",e[e.SparseUnion=-24]="SparseUnion",e[e.IntervalDayTime=-25]="IntervalDayTime",e[e.IntervalYearMonth=-26]="IntervalYearMonth"})(U||(U={}));var eo;(function(e){e[e.OFFSET=0]="OFFSET",e[e.DATA=1]="DATA",e[e.VALIDITY=2]="VALIDITY",e[e.TYPE=3]="TYPE"})(eo||(eo={}));const mY=void 0;function Jh(e){if(e===null)return"null";if(e===mY)return"undefined";switch(typeof e){case"number":return`${e}`;case"bigint":return`${e}`;case"string":return`"${e}"`}return typeof e[Symbol.toPrimitive]=="function"?e[Symbol.toPrimitive]("string"):ArrayBuffer.isView(e)?e instanceof Yp||e instanceof qp?`[${[...e].map(t=>Jh(t))}]`:`[${e}]`:ArrayBuffer.isView(e)?`[${e}]`:JSON.stringify(e,(t,n)=>typeof n=="bigint"?`${n}`:n)}const gY=Symbol.for("isArrowBigNum");function Xi(e,...t){return t.length===0?Object.setPrototypeOf(ye(this.TypedArray,e),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(e,...t),this.constructor.prototype)}Xi.prototype[gY]=!0;Xi.prototype.toJSON=function(){return`"${Yl(this)}"`};Xi.prototype.valueOf=function(){return UD(this)};Xi.prototype.toString=function(){return Yl(this)};Xi.prototype[Symbol.toPrimitive]=function(e="default"){switch(e){case"number":return UD(this);case"string":return Yl(this);case"default":return F2(this)}return Yl(this)};function Ru(...e){return Xi.apply(this,e)}function Cu(...e){return Xi.apply(this,e)}function tp(...e){return Xi.apply(this,e)}Object.setPrototypeOf(Ru.prototype,Object.create(Int32Array.prototype));Object.setPrototypeOf(Cu.prototype,Object.create(Uint32Array.prototype));Object.setPrototypeOf(tp.prototype,Object.create(Uint32Array.prototype));Object.assign(Ru.prototype,Xi.prototype,{constructor:Ru,signed:!0,TypedArray:Int32Array,BigIntArray:Yp});Object.assign(Cu.prototype,Xi.prototype,{constructor:Cu,signed:!1,TypedArray:Uint32Array,BigIntArray:qp});Object.assign(tp.prototype,Xi.prototype,{constructor:tp,signed:!0,TypedArray:Uint32Array,BigIntArray:qp});function UD(e){const{buffer:t,byteOffset:n,length:r,signed:i}=e,s=new qp(t,n,r),o=i&&s[s.length-1]&BigInt(1)<<BigInt(63);let a=BigInt(o?1:0),l=BigInt(0);if(o){for(const c of s)a+=~c*(BigInt(1)<<BigInt(32)*l++);a*=BigInt(-1)}else for(const c of s)a+=c*(BigInt(1)<<BigInt(32)*l++);return a}let Yl,F2;nY?(F2=e=>e.byteLength===8?new e.BigIntArray(e.buffer,e.byteOffset,1)[0]:Iw(e),Yl=e=>e.byteLength===8?`${new e.BigIntArray(e.buffer,e.byteOffset,1)[0]}`:Iw(e)):(Yl=Iw,F2=Yl);function Iw(e){let t="";const n=new Uint32Array(2);let r=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);const i=new Uint32Array((r=new Uint16Array(r).reverse()).buffer);let s=-1;const o=r.length-1;do{for(n[0]=r[s=0];s<o;)r[s++]=n[1]=n[0]/10,n[0]=(n[0]-n[1]*10<<16)+r[s];r[s]=n[1]=n[0]/10,n[0]=n[0]-n[1]*10,t=`${n[0]}${t}`}while(i[0]||i[1]||i[2]||i[3]);return t??"0"}let bY=class PD{static new(t,n){switch(n){case!0:return new Ru(t);case!1:return new Cu(t)}switch(t.constructor){case Int8Array:case Int16Array:case Int32Array:case Yp:return new Ru(t)}return t.byteLength===16?new tp(t):new Cu(t)}static signed(t){return new Ru(t)}static unsigned(t){return new Cu(t)}static decimal(t){return new tp(t)}constructor(t,n){return PD.new(t,n)}};var zD,jD,VD,YD,qD,WD,HD,GD,XD,QD,KD,ZD,JD,t8,e8,n8,r8,i8,s8;let Bt=class L2{static isNull(t){return(t==null?void 0:t.typeId)===U.Null}static isInt(t){return(t==null?void 0:t.typeId)===U.Int}static isFloat(t){return(t==null?void 0:t.typeId)===U.Float}static isBinary(t){return(t==null?void 0:t.typeId)===U.Binary}static isUtf8(t){return(t==null?void 0:t.typeId)===U.Utf8}static isBool(t){return(t==null?void 0:t.typeId)===U.Bool}static isDecimal(t){return(t==null?void 0:t.typeId)===U.Decimal}static isDate(t){return(t==null?void 0:t.typeId)===U.Date}static isTime(t){return(t==null?void 0:t.typeId)===U.Time}static isTimestamp(t){return(t==null?void 0:t.typeId)===U.Timestamp}static isInterval(t){return(t==null?void 0:t.typeId)===U.Interval}static isList(t){return(t==null?void 0:t.typeId)===U.List}static isStruct(t){return(t==null?void 0:t.typeId)===U.Struct}static isUnion(t){return(t==null?void 0:t.typeId)===U.Union}static isFixedSizeBinary(t){return(t==null?void 0:t.typeId)===U.FixedSizeBinary}static isFixedSizeList(t){return(t==null?void 0:t.typeId)===U.FixedSizeList}static isMap(t){return(t==null?void 0:t.typeId)===U.Map}static isDictionary(t){return(t==null?void 0:t.typeId)===U.Dictionary}static isDenseUnion(t){return L2.isUnion(t)&&t.mode===ji.Dense}static isSparseUnion(t){return L2.isUnion(t)&&t.mode===ji.Sparse}get typeId(){return U.NONE}};zD=Symbol.toStringTag;Bt[zD]=(e=>(e.children=null,e.ArrayType=Array,e[Symbol.toStringTag]="DataType"))(Bt.prototype);let Na=class extends Bt{toString(){return"Null"}get typeId(){return U.Null}};jD=Symbol.toStringTag;Na[jD]=(e=>e[Symbol.toStringTag]="Null")(Na.prototype);let ka=class extends Bt{constructor(t,n){super(),this.isSigned=t,this.bitWidth=n}get typeId(){return U.Int}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?Yp:qp}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}};VD=Symbol.toStringTag;ka[VD]=(e=>(e.isSigned=null,e.bitWidth=null,e[Symbol.toStringTag]="Int"))(ka.prototype);let ep=class extends ka{constructor(){super(!0,32)}get ArrayType(){return Int32Array}};Object.defineProperty(ep.prototype,"ArrayType",{value:Int32Array});let np=class extends Bt{constructor(t){super(),this.precision=t}get typeId(){return U.Float}get ArrayType(){switch(this.precision){case yr.HALF:return Uint16Array;case yr.SINGLE:return Float32Array;case yr.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}};YD=Symbol.toStringTag;np[YD]=(e=>(e.precision=null,e[Symbol.toStringTag]="Float"))(np.prototype);let Jm=class extends Bt{constructor(){super()}get typeId(){return U.Binary}toString(){return"Binary"}};qD=Symbol.toStringTag;Jm[qD]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Binary"))(Jm.prototype);let tg=class extends Bt{constructor(){super()}get typeId(){return U.Utf8}toString(){return"Utf8"}};WD=Symbol.toStringTag;tg[WD]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Utf8"))(tg.prototype);let eg=class extends Bt{constructor(){super()}get typeId(){return U.Bool}toString(){return"Bool"}};HD=Symbol.toStringTag;eg[HD]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Bool"))(eg.prototype);let ng=class extends Bt{constructor(t,n,r=128){super(),this.scale=t,this.precision=n,this.bitWidth=r}get typeId(){return U.Decimal}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}};GD=Symbol.toStringTag;ng[GD]=(e=>(e.scale=null,e.precision=null,e.ArrayType=Uint32Array,e[Symbol.toStringTag]="Decimal"))(ng.prototype);let rg=class extends Bt{constructor(t){super(),this.unit=t}get typeId(){return U.Date}toString(){return`Date${(this.unit+1)*32}<${No[this.unit]}>`}};XD=Symbol.toStringTag;rg[XD]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Date"))(rg.prototype);let rp=class extends Bt{constructor(t,n){super(),this.unit=t,this.bitWidth=n}get typeId(){return U.Time}toString(){return`Time${this.bitWidth}<${ee[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return Yp}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}};QD=Symbol.toStringTag;rp[QD]=(e=>(e.unit=null,e.bitWidth=null,e[Symbol.toStringTag]="Time"))(rp.prototype);let ig=class extends Bt{constructor(t,n){super(),this.unit=t,this.timezone=n}get typeId(){return U.Timestamp}toString(){return`Timestamp<${ee[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}};KD=Symbol.toStringTag;ig[KD]=(e=>(e.unit=null,e.timezone=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Timestamp"))(ig.prototype);let sg=class extends Bt{constructor(t){super(),this.unit=t}get typeId(){return U.Interval}toString(){return`Interval<${$a[this.unit]}>`}};ZD=Symbol.toStringTag;sg[ZD]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Interval"))(sg.prototype);let og=class extends Bt{constructor(t){super(),this.children=[t]}get typeId(){return U.List}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}};JD=Symbol.toStringTag;og[JD]=(e=>(e.children=null,e[Symbol.toStringTag]="List"))(og.prototype);let Gn=class extends Bt{constructor(t){super(),this.children=t}get typeId(){return U.Struct}toString(){return`Struct<{${this.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}};t8=Symbol.toStringTag;Gn[t8]=(e=>(e.children=null,e[Symbol.toStringTag]="Struct"))(Gn.prototype);let ag=class extends Bt{constructor(t,n,r){super(),this.mode=t,this.children=r,this.typeIds=n=Int32Array.from(n),this.typeIdToChildIndex=n.reduce((i,s,o)=>(i[s]=o)&&i||i,Object.create(null))}get typeId(){return U.Union}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(t=>`${t.type}`).join(" | ")}>`}};e8=Symbol.toStringTag;ag[e8]=(e=>(e.mode=null,e.typeIds=null,e.children=null,e.typeIdToChildIndex=null,e.ArrayType=Int8Array,e[Symbol.toStringTag]="Union"))(ag.prototype);let lg=class extends Bt{constructor(t){super(),this.byteWidth=t}get typeId(){return U.FixedSizeBinary}toString(){return`FixedSizeBinary[${this.byteWidth}]`}};n8=Symbol.toStringTag;lg[n8]=(e=>(e.byteWidth=null,e.ArrayType=Uint8Array,e[Symbol.toStringTag]="FixedSizeBinary"))(lg.prototype);let cg=class extends Bt{constructor(t,n){super(),this.listSize=t,this.children=[n]}get typeId(){return U.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}};r8=Symbol.toStringTag;cg[r8]=(e=>(e.children=null,e.listSize=null,e[Symbol.toStringTag]="FixedSizeList"))(cg.prototype);let ug=class extends Bt{constructor(t,n=!1){super(),this.children=[t],this.keysSorted=n}get typeId(){return U.Map}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}};i8=Symbol.toStringTag;ug[i8]=(e=>(e.children=null,e.keysSorted=null,e[Symbol.toStringTag]="Map_"))(ug.prototype);const vY=(e=>()=>++e)(-1);let uf=class extends Bt{constructor(t,n,r,i){super(),this.indices=n,this.dictionary=t,this.isOrdered=i||!1,this.id=r==null?vY():typeof r=="number"?r:r.low}get typeId(){return U.Dictionary}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}};s8=Symbol.toStringTag;uf[s8]=(e=>(e.id=null,e.indices=null,e.isOrdered=null,e.dictionary=null,e[Symbol.toStringTag]="Dictionary"))(uf.prototype);function no(e){const t=e;switch(e.typeId){case U.Decimal:return e.bitWidth/32;case U.Timestamp:return 2;case U.Date:return 1+t.unit;case U.Interval:return 1+t.unit;case U.FixedSizeList:return t.listSize;case U.FixedSizeBinary:return t.byteWidth;default:return 1}}let Wt=class{visitMany(t,...n){return t.map((r,i)=>this.visit(r,...n.map(s=>s[i])))}visit(...t){return this.getVisitFn(t[0],!1).apply(this,t)}getVisitFn(t,n=!0){return wY(this,t,n)}getVisitFnByTypeId(t,n=!0){return jc(this,t,n)}visitNull(t,...n){return null}visitBool(t,...n){return null}visitInt(t,...n){return null}visitFloat(t,...n){return null}visitUtf8(t,...n){return null}visitBinary(t,...n){return null}visitFixedSizeBinary(t,...n){return null}visitDate(t,...n){return null}visitTimestamp(t,...n){return null}visitTime(t,...n){return null}visitDecimal(t,...n){return null}visitList(t,...n){return null}visitStruct(t,...n){return null}visitUnion(t,...n){return null}visitDictionary(t,...n){return null}visitInterval(t,...n){return null}visitFixedSizeList(t,...n){return null}visitMap(t,...n){return null}};function wY(e,t,n=!0){return typeof t=="number"?jc(e,t,n):typeof t=="string"&&t in U?jc(e,U[t],n):t&&t instanceof Bt?jc(e,eM(t),n):t!=null&&t.type&&t.type instanceof Bt?jc(e,eM(t.type),n):jc(e,U.NONE,n)}function jc(e,t,n=!0){let r=null;switch(t){case U.Null:r=e.visitNull;break;case U.Bool:r=e.visitBool;break;case U.Int:r=e.visitInt;break;case U.Int8:r=e.visitInt8||e.visitInt;break;case U.Int16:r=e.visitInt16||e.visitInt;break;case U.Int32:r=e.visitInt32||e.visitInt;break;case U.Int64:r=e.visitInt64||e.visitInt;break;case U.Uint8:r=e.visitUint8||e.visitInt;break;case U.Uint16:r=e.visitUint16||e.visitInt;break;case U.Uint32:r=e.visitUint32||e.visitInt;break;case U.Uint64:r=e.visitUint64||e.visitInt;break;case U.Float:r=e.visitFloat;break;case U.Float16:r=e.visitFloat16||e.visitFloat;break;case U.Float32:r=e.visitFloat32||e.visitFloat;break;case U.Float64:r=e.visitFloat64||e.visitFloat;break;case U.Utf8:r=e.visitUtf8;break;case U.Binary:r=e.visitBinary;break;case U.FixedSizeBinary:r=e.visitFixedSizeBinary;break;case U.Date:r=e.visitDate;break;case U.DateDay:r=e.visitDateDay||e.visitDate;break;case U.DateMillisecond:r=e.visitDateMillisecond||e.visitDate;break;case U.Timestamp:r=e.visitTimestamp;break;case U.TimestampSecond:r=e.visitTimestampSecond||e.visitTimestamp;break;case U.TimestampMillisecond:r=e.visitTimestampMillisecond||e.visitTimestamp;break;case U.TimestampMicrosecond:r=e.visitTimestampMicrosecond||e.visitTimestamp;break;case U.TimestampNanosecond:r=e.visitTimestampNanosecond||e.visitTimestamp;break;case U.Time:r=e.visitTime;break;case U.TimeSecond:r=e.visitTimeSecond||e.visitTime;break;case U.TimeMillisecond:r=e.visitTimeMillisecond||e.visitTime;break;case U.TimeMicrosecond:r=e.visitTimeMicrosecond||e.visitTime;break;case U.TimeNanosecond:r=e.visitTimeNanosecond||e.visitTime;break;case U.Decimal:r=e.visitDecimal;break;case U.List:r=e.visitList;break;case U.Struct:r=e.visitStruct;break;case U.Union:r=e.visitUnion;break;case U.DenseUnion:r=e.visitDenseUnion||e.visitUnion;break;case U.SparseUnion:r=e.visitSparseUnion||e.visitUnion;break;case U.Dictionary:r=e.visitDictionary;break;case U.Interval:r=e.visitInterval;break;case U.IntervalDayTime:r=e.visitIntervalDayTime||e.visitInterval;break;case U.IntervalYearMonth:r=e.visitIntervalYearMonth||e.visitInterval;break;case U.FixedSizeList:r=e.visitFixedSizeList;break;case U.Map:r=e.visitMap;break}if(typeof r=="function")return r;if(!n)return()=>null;throw new Error(`Unrecognized type '${U[t]}'`)}function eM(e){switch(e.typeId){case U.Null:return U.Null;case U.Int:{const{bitWidth:t,isSigned:n}=e;switch(t){case 8:return n?U.Int8:U.Uint8;case 16:return n?U.Int16:U.Uint16;case 32:return n?U.Int32:U.Uint32;case 64:return n?U.Int64:U.Uint64}return U.Int}case U.Float:switch(e.precision){case yr.HALF:return U.Float16;case yr.SINGLE:return U.Float32;case yr.DOUBLE:return U.Float64}return U.Float;case U.Binary:return U.Binary;case U.Utf8:return U.Utf8;case U.Bool:return U.Bool;case U.Decimal:return U.Decimal;case U.Time:switch(e.unit){case ee.SECOND:return U.TimeSecond;case ee.MILLISECOND:return U.TimeMillisecond;case ee.MICROSECOND:return U.TimeMicrosecond;case ee.NANOSECOND:return U.TimeNanosecond}return U.Time;case U.Timestamp:switch(e.unit){case ee.SECOND:return U.TimestampSecond;case ee.MILLISECOND:return U.TimestampMillisecond;case ee.MICROSECOND:return U.TimestampMicrosecond;case ee.NANOSECOND:return U.TimestampNanosecond}return U.Timestamp;case U.Date:switch(e.unit){case No.DAY:return U.DateDay;case No.MILLISECOND:return U.DateMillisecond}return U.Date;case U.Interval:switch(e.unit){case $a.DAY_TIME:return U.IntervalDayTime;case $a.YEAR_MONTH:return U.IntervalYearMonth}return U.Interval;case U.Map:return U.Map;case U.List:return U.List;case U.Struct:return U.Struct;case U.Union:switch(e.mode){case ji.Dense:return U.DenseUnion;case ji.Sparse:return U.SparseUnion}return U.Union;case U.FixedSizeBinary:return U.FixedSizeBinary;case U.FixedSizeList:return U.FixedSizeList;case U.Dictionary:return U.Dictionary}throw new Error(`Unrecognized type '${U[e.typeId]}'`)}Wt.prototype.visitInt8=null;Wt.prototype.visitInt16=null;Wt.prototype.visitInt32=null;Wt.prototype.visitInt64=null;Wt.prototype.visitUint8=null;Wt.prototype.visitUint16=null;Wt.prototype.visitUint32=null;Wt.prototype.visitUint64=null;Wt.prototype.visitFloat16=null;Wt.prototype.visitFloat32=null;Wt.prototype.visitFloat64=null;Wt.prototype.visitDateDay=null;Wt.prototype.visitDateMillisecond=null;Wt.prototype.visitTimestampSecond=null;Wt.prototype.visitTimestampMillisecond=null;Wt.prototype.visitTimestampMicrosecond=null;Wt.prototype.visitTimestampNanosecond=null;Wt.prototype.visitTimeSecond=null;Wt.prototype.visitTimeMillisecond=null;Wt.prototype.visitTimeMicrosecond=null;Wt.prototype.visitTimeNanosecond=null;Wt.prototype.visitDenseUnion=null;Wt.prototype.visitSparseUnion=null;Wt.prototype.visitIntervalDayTime=null;Wt.prototype.visitIntervalYearMonth=null;const o8=new Float64Array(1),$c=new Uint32Array(o8.buffer);function a8(e){const t=(e&31744)>>10,n=(e&1023)/1024,r=Math.pow(-1,(e&32768)>>15);switch(t){case 31:return r*(n?Number.NaN:1/0);case 0:return r*(n?6103515625e-14*n:0)}return r*Math.pow(2,t-15)*(1+n)}function _Y(e){if(e!==e)return 32256;o8[0]=e;const t=($c[1]&2147483648)>>16&65535;let n=$c[1]&2146435072,r=0;return n>=1089470464?$c[0]>0?n=31744:(n=(n&2080374784)>>16,r=($c[1]&1048575)>>10):n<=1056964608?(r=1048576+($c[1]&1048575),r=1048576+(r<<(n>>20)-998)>>21,n=0):(n=n-1056964608>>10,r=($c[1]&1048575)+512>>10),t|n|r&65535}let Mt=class extends Wt{};function kt(e){return(t,n,r)=>{if(t.setValid(n,r!=null))return e(t,n,r)}}const SY=(e,t,n)=>{e[t]=Math.trunc(n/864e5)},FI=(e,t,n)=>{e[t]=Math.trunc(n%4294967296),e[t+1]=Math.trunc(n/4294967296)},xY=(e,t,n)=>{e[t]=Math.trunc(n*1e3%4294967296),e[t+1]=Math.trunc(n*1e3/4294967296)},IY=(e,t,n)=>{e[t]=Math.trunc(n*1e6%4294967296),e[t+1]=Math.trunc(n*1e6/4294967296)},l8=(e,t,n,r)=>{if(n+1<t.length){const{[n]:i,[n+1]:s}=t;e.set(r.subarray(0,s-i),i)}},TY=({offset:e,values:t},n,r)=>{const i=e+n;r?t[i>>3]|=1<<i%8:t[i>>3]&=~(1<<i%8)},Ro=({values:e},t,n)=>{e[t]=n},LI=({values:e},t,n)=>{e[t]=n},c8=({values:e},t,n)=>{e[t]=_Y(n)},EY=(e,t,n)=>{switch(e.type.precision){case yr.HALF:return c8(e,t,n);case yr.SINGLE:case yr.DOUBLE:return LI(e,t,n)}},u8=({values:e},t,n)=>{SY(e,t,n.valueOf())},f8=({values:e},t,n)=>{FI(e,t*2,n.valueOf())},AY=({stride:e,values:t},n,r)=>{t.set(r.subarray(0,e),e*n)},MY=({values:e,valueOffsets:t},n,r)=>l8(e,t,n,r),$Y=({values:e,valueOffsets:t},n,r)=>{l8(e,t,n,kI(r))},NY=(e,t,n)=>{e.type.unit===No.DAY?u8(e,t,n):f8(e,t,n)},d8=({values:e},t,n)=>FI(e,t*2,n/1e3),h8=({values:e},t,n)=>FI(e,t*2,n),p8=({values:e},t,n)=>xY(e,t*2,n),y8=({values:e},t,n)=>IY(e,t*2,n),kY=(e,t,n)=>{switch(e.type.unit){case ee.SECOND:return d8(e,t,n);case ee.MILLISECOND:return h8(e,t,n);case ee.MICROSECOND:return p8(e,t,n);case ee.NANOSECOND:return y8(e,t,n)}},m8=({values:e},t,n)=>{e[t]=n},g8=({values:e},t,n)=>{e[t]=n},b8=({values:e},t,n)=>{e[t]=n},v8=({values:e},t,n)=>{e[t]=n},DY=(e,t,n)=>{switch(e.type.unit){case ee.SECOND:return m8(e,t,n);case ee.MILLISECOND:return g8(e,t,n);case ee.MICROSECOND:return b8(e,t,n);case ee.NANOSECOND:return v8(e,t,n)}},OY=({values:e,stride:t},n,r)=>{e.set(r.subarray(0,t),t*n)},BY=(e,t,n)=>{const r=e.children[0],i=e.valueOffsets,s=gi.getVisitFn(r);if(Array.isArray(n))for(let o=-1,a=i[t],l=i[t+1];a<l;)s(r,a++,n[++o]);else for(let o=-1,a=i[t],l=i[t+1];a<l;)s(r,a++,n.get(++o))},FY=(e,t,n)=>{const r=e.children[0],{valueOffsets:i}=e,s=gi.getVisitFn(r);let{[t]:o,[t+1]:a}=i;const l=n instanceof Map?n.entries():Object.entries(n);for(const c of l)if(s(r,o,c),++o>=a)break},LY=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[s]),RY=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(s)),CY=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(i.name)),UY=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[i.name]),PY=(e,t,n)=>{const r=e.type.children.map(s=>gi.getVisitFn(s.type)),i=n instanceof Map?CY(t,n):n instanceof tn?RY(t,n):Array.isArray(n)?LY(t,n):UY(t,n);e.type.children.forEach((s,o)=>i(r[o],e.children[o],s,o))},zY=(e,t,n)=>{e.type.mode===ji.Dense?w8(e,t,n):_8(e,t,n)},w8=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];gi.visit(i,e.valueOffsets[t],n)},_8=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];gi.visit(i,t,n)},jY=(e,t,n)=>{var r;(r=e.dictionary)===null||r===void 0||r.set(e.values[t],n)},VY=(e,t,n)=>{e.type.unit===$a.DAY_TIME?S8(e,t,n):x8(e,t,n)},S8=({values:e},t,n)=>{e.set(n.subarray(0,2),2*t)},x8=({values:e},t,n)=>{e[t]=n[0]*12+n[1]%12},YY=(e,t,n)=>{const{stride:r}=e,i=e.children[0],s=gi.getVisitFn(i);if(Array.isArray(n))for(let o=-1,a=t*r;++o<r;)s(i,a+o,n[o]);else for(let o=-1,a=t*r;++o<r;)s(i,a+o,n.get(o))};Mt.prototype.visitBool=kt(TY);Mt.prototype.visitInt=kt(Ro);Mt.prototype.visitInt8=kt(Ro);Mt.prototype.visitInt16=kt(Ro);Mt.prototype.visitInt32=kt(Ro);Mt.prototype.visitInt64=kt(Ro);Mt.prototype.visitUint8=kt(Ro);Mt.prototype.visitUint16=kt(Ro);Mt.prototype.visitUint32=kt(Ro);Mt.prototype.visitUint64=kt(Ro);Mt.prototype.visitFloat=kt(EY);Mt.prototype.visitFloat16=kt(c8);Mt.prototype.visitFloat32=kt(LI);Mt.prototype.visitFloat64=kt(LI);Mt.prototype.visitUtf8=kt($Y);Mt.prototype.visitBinary=kt(MY);Mt.prototype.visitFixedSizeBinary=kt(AY);Mt.prototype.visitDate=kt(NY);Mt.prototype.visitDateDay=kt(u8);Mt.prototype.visitDateMillisecond=kt(f8);Mt.prototype.visitTimestamp=kt(kY);Mt.prototype.visitTimestampSecond=kt(d8);Mt.prototype.visitTimestampMillisecond=kt(h8);Mt.prototype.visitTimestampMicrosecond=kt(p8);Mt.prototype.visitTimestampNanosecond=kt(y8);Mt.prototype.visitTime=kt(DY);Mt.prototype.visitTimeSecond=kt(m8);Mt.prototype.visitTimeMillisecond=kt(g8);Mt.prototype.visitTimeMicrosecond=kt(b8);Mt.prototype.visitTimeNanosecond=kt(v8);Mt.prototype.visitDecimal=kt(OY);Mt.prototype.visitList=kt(BY);Mt.prototype.visitStruct=kt(PY);Mt.prototype.visitUnion=kt(zY);Mt.prototype.visitDenseUnion=kt(w8);Mt.prototype.visitSparseUnion=kt(_8);Mt.prototype.visitDictionary=kt(jY);Mt.prototype.visitInterval=kt(VY);Mt.prototype.visitIntervalDayTime=kt(S8);Mt.prototype.visitIntervalYearMonth=kt(x8);Mt.prototype.visitFixedSizeList=kt(YY);Mt.prototype.visitMap=kt(FY);const gi=new Mt,Mi=Symbol.for("parent"),Uu=Symbol.for("rowIndex");let RI=class{constructor(t,n){return this[Mi]=t,this[Uu]=n,new Proxy(this,new WY)}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[Uu],n=this[Mi],r=n.type.children,i={};for(let s=-1,o=r.length;++s<o;)i[r[s].name]=br.visit(n.children[s],t);return i}toString(){return`{${[...this].map(([t,n])=>`${Jh(t)}: ${Jh(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new qY(this[Mi],this[Uu])}},qY=class{constructor(t,n){this.childIndex=0,this.children=t.children,this.rowIndex=n,this.childFields=t.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const t=this.childIndex;return t<this.numChildren?(this.childIndex=t+1,{done:!1,value:[this.childFields[t].name,br.visit(this.children[t],this.rowIndex)]}):{done:!0,value:null}}};Object.defineProperties(RI.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[Mi]:{writable:!0,enumerable:!1,configurable:!1,value:null},[Uu]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});let WY=class{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[Mi].type.children.map(n=>n.name)}has(t,n){return t[Mi].type.children.findIndex(r=>r.name===n)!==-1}getOwnPropertyDescriptor(t,n){if(t[Mi].type.children.findIndex(r=>r.name===n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[Mi].type.children.findIndex(i=>i.name===n);if(r!==-1){const i=br.visit(t[Mi].children[r],t[Uu]);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[Mi].type.children.findIndex(s=>s.name===n);return i!==-1?(gi.visit(t[Mi].children[i],t[Uu],r),Reflect.set(t,n,r)):Reflect.has(t,n)||typeof n=="symbol"?Reflect.set(t,n,r):!1}},xt=class extends Wt{};function $t(e){return(t,n)=>t.getValid(n)?e(t,n):null}const HY=(e,t)=>864e5*e[t],CI=(e,t)=>4294967296*e[t+1]+(e[t]>>>0),GY=(e,t)=>4294967296*(e[t+1]/1e3)+(e[t]>>>0)/1e3,XY=(e,t)=>4294967296*(e[t+1]/1e6)+(e[t]>>>0)/1e6,I8=e=>new Date(e),QY=(e,t)=>I8(HY(e,t)),KY=(e,t)=>I8(CI(e,t)),ZY=(e,t)=>null,T8=(e,t,n)=>{if(n+1>=t.length)return null;const r=t[n],i=t[n+1];return e.subarray(r,i)},JY=({offset:e,values:t},n)=>{const r=e+n;return(t[r>>3]&1<<r%8)!==0},E8=({values:e},t)=>QY(e,t),A8=({values:e},t)=>KY(e,t*2),Za=({stride:e,values:t},n)=>t[e*n],tq=({stride:e,values:t},n)=>a8(t[e*n]),M8=({values:e},t)=>e[t],eq=({stride:e,values:t},n)=>t.subarray(e*n,e*(n+1)),nq=({values:e,valueOffsets:t},n)=>T8(e,t,n),rq=({values:e,valueOffsets:t},n)=>{const r=T8(e,t,n);return r!==null?D2(r):null},iq=({values:e},t)=>e[t],sq=({type:e,values:t},n)=>e.precision!==yr.HALF?t[n]:a8(t[n]),oq=(e,t)=>e.type.unit===No.DAY?E8(e,t):A8(e,t),$8=({values:e},t)=>1e3*CI(e,t*2),N8=({values:e},t)=>CI(e,t*2),k8=({values:e},t)=>GY(e,t*2),D8=({values:e},t)=>XY(e,t*2),aq=(e,t)=>{switch(e.type.unit){case ee.SECOND:return $8(e,t);case ee.MILLISECOND:return N8(e,t);case ee.MICROSECOND:return k8(e,t);case ee.NANOSECOND:return D8(e,t)}},O8=({values:e},t)=>e[t],B8=({values:e},t)=>e[t],F8=({values:e},t)=>e[t],L8=({values:e},t)=>e[t],lq=(e,t)=>{switch(e.type.unit){case ee.SECOND:return O8(e,t);case ee.MILLISECOND:return B8(e,t);case ee.MICROSECOND:return F8(e,t);case ee.NANOSECOND:return L8(e,t)}},cq=({values:e,stride:t},n)=>bY.decimal(e.subarray(t*n,t*(n+1))),uq=(e,t)=>{const{valueOffsets:n,stride:r,children:i}=e,{[t*r]:s,[t*r+1]:o}=n,l=i[0].slice(s,o-s);return new tn([l])},fq=(e,t)=>{const{valueOffsets:n,children:r}=e,{[t]:i,[t+1]:s}=n,o=r[0];return new UI(o.slice(i,s-i))},dq=(e,t)=>new RI(e,t),hq=(e,t)=>e.type.mode===ji.Dense?R8(e,t):C8(e,t),R8=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return br.visit(r,e.valueOffsets[t])},C8=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return br.visit(r,t)},pq=(e,t)=>{var n;return(n=e.dictionary)===null||n===void 0?void 0:n.get(e.values[t])},yq=(e,t)=>e.type.unit===$a.DAY_TIME?U8(e,t):P8(e,t),U8=({values:e},t)=>e.subarray(2*t,2*(t+1)),P8=({values:e},t)=>{const n=e[t],r=new Int32Array(2);return r[0]=Math.trunc(n/12),r[1]=Math.trunc(n%12),r},mq=(e,t)=>{const{stride:n,children:r}=e,s=r[0].slice(t*n,n);return new tn([s])};xt.prototype.visitNull=$t(ZY);xt.prototype.visitBool=$t(JY);xt.prototype.visitInt=$t(iq);xt.prototype.visitInt8=$t(Za);xt.prototype.visitInt16=$t(Za);xt.prototype.visitInt32=$t(Za);xt.prototype.visitInt64=$t(M8);xt.prototype.visitUint8=$t(Za);xt.prototype.visitUint16=$t(Za);xt.prototype.visitUint32=$t(Za);xt.prototype.visitUint64=$t(M8);xt.prototype.visitFloat=$t(sq);xt.prototype.visitFloat16=$t(tq);xt.prototype.visitFloat32=$t(Za);xt.prototype.visitFloat64=$t(Za);xt.prototype.visitUtf8=$t(rq);xt.prototype.visitBinary=$t(nq);xt.prototype.visitFixedSizeBinary=$t(eq);xt.prototype.visitDate=$t(oq);xt.prototype.visitDateDay=$t(E8);xt.prototype.visitDateMillisecond=$t(A8);xt.prototype.visitTimestamp=$t(aq);xt.prototype.visitTimestampSecond=$t($8);xt.prototype.visitTimestampMillisecond=$t(N8);xt.prototype.visitTimestampMicrosecond=$t(k8);xt.prototype.visitTimestampNanosecond=$t(D8);xt.prototype.visitTime=$t(lq);xt.prototype.visitTimeSecond=$t(O8);xt.prototype.visitTimeMillisecond=$t(B8);xt.prototype.visitTimeMicrosecond=$t(F8);xt.prototype.visitTimeNanosecond=$t(L8);xt.prototype.visitDecimal=$t(cq);xt.prototype.visitList=$t(uq);xt.prototype.visitStruct=$t(dq);xt.prototype.visitUnion=$t(hq);xt.prototype.visitDenseUnion=$t(R8);xt.prototype.visitSparseUnion=$t(C8);xt.prototype.visitDictionary=$t(pq);xt.prototype.visitInterval=$t(yq);xt.prototype.visitIntervalDayTime=$t(U8);xt.prototype.visitIntervalYearMonth=$t(P8);xt.prototype.visitFixedSizeList=$t(mq);xt.prototype.visitMap=$t(fq);const br=new xt,ps=Symbol.for("keys"),Pu=Symbol.for("vals");let UI=class{constructor(t){return this[ps]=new tn([t.children[0]]).memoize(),this[Pu]=t.children[1],new Proxy(this,new bq)}[Symbol.iterator](){return new gq(this[ps],this[Pu])}get size(){return this[ps].length}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[ps],n=this[Pu],r={};for(let i=-1,s=t.length;++i<s;)r[t.get(i)]=br.visit(n,i);return r}toString(){return`{${[...this].map(([t,n])=>`${Jh(t)}: ${Jh(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}},gq=class{constructor(t,n){this.keys=t,this.vals=n,this.keyIndex=0,this.numKeys=t.length}[Symbol.iterator](){return this}next(){const t=this.keyIndex;return t===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(t),br.visit(this.vals,t)]})}},bq=class{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[ps].toArray().map(String)}has(t,n){return t[ps].includes(n)}getOwnPropertyDescriptor(t,n){if(t[ps].indexOf(n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[ps].indexOf(n);if(r!==-1){const i=br.visit(Reflect.get(t,Pu),r);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[ps].indexOf(n);return i!==-1?(gi.visit(Reflect.get(t,Pu),i,r),Reflect.set(t,n,r)):Reflect.has(t,n)?Reflect.set(t,n,r):!1}};Object.defineProperties(UI.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[ps]:{writable:!0,enumerable:!1,configurable:!1,value:null},[Pu]:{writable:!0,enumerable:!1,configurable:!1,value:null}});let nM;function z8(e,t,n,r){const{length:i=0}=e;let s=typeof t!="number"?0:t,o=typeof n!="number"?i:n;return s<0&&(s=(s%i+i)%i),o<0&&(o=(o%i+i)%i),o<s&&(nM=s,s=o,o=nM),o>i&&(o=i),r?r(e,s,o):[s,o]}const rM=e=>e!==e;function qf(e){if(typeof e!=="object"||e===null)return rM(e)?rM:n=>n===e;if(e instanceof Date){const n=e.valueOf();return r=>r instanceof Date?r.valueOf()===n:!1}return ArrayBuffer.isView(e)?n=>n?uY(e,n):!1:e instanceof Map?wq(e):Array.isArray(e)?vq(e):e instanceof tn?_q(e):Sq(e,!0)}function vq(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=qf(e[n]);return Bb(t)}function wq(e){let t=-1;const n=[];for(const r of e.values())n[++t]=qf(r);return Bb(n)}function _q(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=qf(e.get(n));return Bb(t)}function Sq(e,t=!1){const n=Object.keys(e);if(!t&&n.length===0)return()=>!1;const r=[];for(let i=-1,s=n.length;++i<s;)r[i]=qf(e[n[i]]);return Bb(r,n)}function Bb(e,t){return n=>{if(!n||typeof n!="object")return!1;switch(n.constructor){case Array:return xq(e,n);case Map:return iM(e,n,n.keys());case UI:case RI:case Object:case void 0:return iM(e,n,t||Object.keys(n))}return n instanceof tn?Iq(e,n):!1}}function xq(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t[r]))return!1;return!0}function Iq(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t.get(r)))return!1;return!0}function iM(e,t,n){const r=n[Symbol.iterator](),i=t instanceof Map?t.keys():Object.keys(t)[Symbol.iterator](),s=t instanceof Map?t.values():Object.values(t)[Symbol.iterator]();let o=0;const a=e.length;let l=s.next(),c=r.next(),u=i.next();for(;o<a&&!c.done&&!u.done&&!l.done&&!(c.value!==u.value||!e[o](l.value));++o,c=r.next(),u=i.next(),l=s.next());return o===a&&c.done&&u.done&&l.done?!0:(r.return&&r.return(),i.return&&i.return(),s.return&&s.return(),!1)}function j8(e,t,n,r){return(n&1<<r)!==0}function Tq(e,t,n,r){return(n&1<<r)>>r}function Eq(e,t,n){const r=n.byteLength+7&-8;if(e>0||n.byteLength<r){const i=new Uint8Array(r);return i.set(e%8===0?n.subarray(e>>3):R2(new PI(n,e,t,null,j8)).subarray(0,r)),i}return n}function R2(e){const t=[];let n=0,r=0,i=0;for(const o of e)o&&(i|=1<<r),++r===8&&(t[n++]=i,i=r=0);(n===0||r>0)&&(t[n++]=i);const s=new Uint8Array(t.length+7&-8);return s.set(t),s}let PI=class{constructor(t,n,r,i,s){this.bytes=t,this.length=r,this.context=i,this.get=s,this.bit=n%8,this.byteIndex=n>>3,this.byte=t[this.byteIndex++],this.index=0}next(){return this.index<this.length?(this.bit===8&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}};function C2(e,t,n){if(n-t<=0)return 0;if(n-t<8){let s=0;for(const o of new PI(e,t,n-t,e,Tq))s+=o;return s}const r=n>>3<<3,i=t+(t%8===0?0:8-t%8);return C2(e,t,i)+C2(e,r,n)+Aq(e,i>>3,r-i>>3)}function Aq(e,t,n){let r=0,i=Math.trunc(t);const s=new DataView(e.buffer,e.byteOffset,e.byteLength),o=n===void 0?e.byteLength:i+n;for(;o-i>=4;)r+=Tw(s.getUint32(i)),i+=4;for(;o-i>=2;)r+=Tw(s.getUint16(i)),i+=2;for(;o-i>=1;)r+=Tw(s.getUint8(i)),i+=1;return r}function Tw(e){let t=Math.trunc(e);return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),(t+(t>>>4)&252645135)*16843009>>>24}const Mq=-1;let De=class U2{constructor(t,n,r,i,s,o=[],a){this.type=t,this.children=o,this.dictionary=a,this.offset=Math.floor(Math.max(n||0,0)),this.length=Math.floor(Math.max(r||0,0)),this._nullCount=Math.floor(Math.max(i||0,-1));let l;s instanceof U2?(this.stride=s.stride,this.values=s.values,this.typeIds=s.typeIds,this.nullBitmap=s.nullBitmap,this.valueOffsets=s.valueOffsets):(this.stride=no(t),s&&((l=s[0])&&(this.valueOffsets=l),(l=s[1])&&(this.values=l),(l=s[2])&&(this.nullBitmap=l),(l=s[3])&&(this.typeIds=l))),this.nullable=this._nullCount!==0&&this.nullBitmap&&this.nullBitmap.byteLength>0}get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get byteLength(){let t=0;const{valueOffsets:n,values:r,nullBitmap:i,typeIds:s}=this;return n&&(t+=n.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),s&&(t+=s.byteLength),this.children.reduce((o,a)=>o+a.byteLength,t)}get nullCount(){let t=this._nullCount,n;return t<=Mq&&(n=this.nullBitmap)&&(this._nullCount=t=this.length-C2(n,this.offset,this.offset+this.length)),t}getValid(t){if(this.nullable&&this.nullCount>0){const n=this.offset+t;return(this.nullBitmap[n>>3]&1<<n%8)!==0}return!0}setValid(t,n){if(!this.nullable)return n;if(!this.nullBitmap||this.nullBitmap.byteLength<=t>>3){const{nullBitmap:l}=this._changeLengthAndBackfillNullBitmap(this.length);Object.assign(this,{nullBitmap:l,_nullCount:0})}const{nullBitmap:r,offset:i}=this,s=i+t>>3,o=(i+t)%8,a=r[s]>>o&1;return n?a===0&&(r[s]|=1<<o,this._nullCount=this.nullCount+1):a===1&&(r[s]&=~(1<<o),this._nullCount=this.nullCount-1),n}clone(t=this.type,n=this.offset,r=this.length,i=this._nullCount,s=this,o=this.children){return new U2(t,n,r,i,s,o,this.dictionary)}slice(t,n){const{stride:r,typeId:i,children:s}=this,o=+(this._nullCount===0)-1,a=i===16?r:1,l=this._sliceBuffers(t,n,r,i);return this.clone(this.type,this.offset+t,n,o,l,s.length===0||this.valueOffsets?s:this._sliceChildren(s,a*t,a*n))}_changeLengthAndBackfillNullBitmap(t){if(this.typeId===U.Null)return this.clone(this.type,0,t,0);const{length:n,nullCount:r}=this,i=new Uint8Array((t+63&-64)>>3).fill(255,0,n>>3);i[n>>3]=(1<<n-(n&-8))-1,r>0&&i.set(Eq(this.offset,n,this.nullBitmap),0);const s=this.buffers;return s[eo.VALIDITY]=i,this.clone(this.type,0,t,r+(t-n),s)}_sliceBuffers(t,n,r,i){let s;const{buffers:o}=this;return(s=o[eo.TYPE])&&(o[eo.TYPE]=s.subarray(t,t+n)),(s=o[eo.OFFSET])&&(o[eo.OFFSET]=s.subarray(t,t+n+1))||(s=o[eo.DATA])&&(o[eo.DATA]=i===6?s:s.subarray(r*t,r*(t+n))),o}_sliceChildren(t,n,r){return t.map(i=>i.slice(n,r))}};De.prototype.children=Object.freeze([]);let $q=class K0 extends Wt{visit(t){return this.getVisitFn(t.type).call(this,t)}visitNull(t){const{["type"]:n,["offset"]:r=0,["length"]:i=0}=t;return new De(n,r,i,0)}visitBool(t){const{["type"]:n,["offset"]:r=0}=t,i=ie(t.nullBitmap),s=ye(n.ArrayType,t.data),{["length"]:o=s.length>>3,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new De(n,r,o,a,[void 0,s,i])}visitInt(t){const{["type"]:n,["offset"]:r=0}=t,i=ie(t.nullBitmap),s=ye(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new De(n,r,o,a,[void 0,s,i])}visitFloat(t){const{["type"]:n,["offset"]:r=0}=t,i=ie(t.nullBitmap),s=ye(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new De(n,r,o,a,[void 0,s,i])}visitUtf8(t){const{["type"]:n,["offset"]:r=0}=t,i=ie(t.data),s=ie(t.nullBitmap),o=Sd(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:l=t.nullBitmap?-1:0}=t;return new De(n,r,a,l,[o,i,s])}visitBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=ie(t.data),s=ie(t.nullBitmap),o=Sd(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:l=t.nullBitmap?-1:0}=t;return new De(n,r,a,l,[o,i,s])}visitFixedSizeBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=ie(t.nullBitmap),s=ye(n.ArrayType,t.data),{["length"]:o=s.length/no(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new De(n,r,o,a,[void 0,s,i])}visitDate(t){const{["type"]:n,["offset"]:r=0}=t,i=ie(t.nullBitmap),s=ye(n.ArrayType,t.data),{["length"]:o=s.length/no(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new De(n,r,o,a,[void 0,s,i])}visitTimestamp(t){const{["type"]:n,["offset"]:r=0}=t,i=ie(t.nullBitmap),s=ye(n.ArrayType,t.data),{["length"]:o=s.length/no(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new De(n,r,o,a,[void 0,s,i])}visitTime(t){const{["type"]:n,["offset"]:r=0}=t,i=ie(t.nullBitmap),s=ye(n.ArrayType,t.data),{["length"]:o=s.length/no(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new De(n,r,o,a,[void 0,s,i])}visitDecimal(t){const{["type"]:n,["offset"]:r=0}=t,i=ie(t.nullBitmap),s=ye(n.ArrayType,t.data),{["length"]:o=s.length/no(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new De(n,r,o,a,[void 0,s,i])}visitList(t){const{["type"]:n,["offset"]:r=0,["child"]:i}=t,s=ie(t.nullBitmap),o=Sd(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:l=t.nullBitmap?-1:0}=t;return new De(n,r,a,l,[o,void 0,s],[i])}visitStruct(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=ie(t.nullBitmap),{length:o=i.reduce((l,{length:c})=>Math.max(l,c),0),nullCount:a=t.nullBitmap?-1:0}=t;return new De(n,r,o,a,[void 0,void 0,s],i)}visitUnion(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=ie(t.nullBitmap),o=ye(n.ArrayType,t.typeIds),{["length"]:a=o.length,["nullCount"]:l=t.nullBitmap?-1:0}=t;if(Bt.isSparseUnion(n))return new De(n,r,a,l,[void 0,void 0,s,o],i);const c=Sd(t.valueOffsets);return new De(n,r,a,l,[c,void 0,s,o],i)}visitDictionary(t){const{["type"]:n,["offset"]:r=0}=t,i=ie(t.nullBitmap),s=ye(n.indices.ArrayType,t.data),{["dictionary"]:o=new tn([new K0().visit({type:n.dictionary})])}=t,{["length"]:a=s.length,["nullCount"]:l=t.nullBitmap?-1:0}=t;return new De(n,r,a,l,[void 0,s,i],[],o)}visitInterval(t){const{["type"]:n,["offset"]:r=0}=t,i=ie(t.nullBitmap),s=ye(n.ArrayType,t.data),{["length"]:o=s.length/no(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new De(n,r,o,a,[void 0,s,i])}visitFixedSizeList(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new K0().visit({type:n.valueType})}=t,s=ie(t.nullBitmap),{["length"]:o=i.length/no(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new De(n,r,o,a,[void 0,void 0,s],[i])}visitMap(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new K0().visit({type:n.childType})}=t,s=ie(t.nullBitmap),o=Sd(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:l=t.nullBitmap?-1:0}=t;return new De(n,r,a,l,[o,void 0,s],[i])}};function Vt(e){return new $q().visit(e)}let sM=class{constructor(t=0,n){this.numChunks=t,this.getChunkIterator=n,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const t=this.chunkIterator.next();if(!t.done)return t;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}};function V8(e){return e.reduce((t,n)=>t+n.nullCount,0)}function Y8(e){return e.reduce((t,n,r)=>(t[r+1]=t[r]+n.length,t),new Uint32Array(e.length+1))}function q8(e,t,n,r){const i=[];for(let s=-1,o=e.length;++s<o;){const a=e[s],l=t[s],{length:c}=a;if(l>=r)break;if(n>=l+c)continue;if(l>=n&&l+c<=r){i.push(a);continue}const u=Math.max(0,n-l),f=Math.min(r-l,c);i.push(a.slice(u,f-u))}return i.length===0&&i.push(e[0].slice(0,0)),i}function zI(e,t,n,r){let i=0,s=0,o=t.length-1;do{if(i>=o-1)return n<t[o]?r(e,i,n-t[i]):null;s=i+Math.trunc((o-i)*.5),n<t[s]?o=s:i=s}while(i<o)}function jI(e,t){return e.getValid(t)}function zu(e){function t(n,r,i){return e(n[r],i)}return function(n){const r=this.data;return zI(r,this._offsets,n,t)}}function W8(e){let t;function n(r,i,s){return e(r[i],s,t)}return function(r,i){const s=this.data;t=i;const o=zI(s,this._offsets,r,n);return t=void 0,o}}function H8(e){let t;function n(r,i,s){let o=s,a=0,l=0;for(let c=i-1,u=r.length;++c<u;){const f=r[c];if(~(a=e(f,t,o)))return l+a;o=0,l+=f.length}return-1}return function(r,i){t=r;const s=this.data,o=typeof i!="number"?n(s,0,0):zI(s,this._offsets,i,n);return t=void 0,o}}let It=class extends Wt{};function Nq(e,t){return t===null&&e.length>0?0:-1}function kq(e,t){const{nullBitmap:n}=e;if(!n||e.nullCount<=0)return-1;let r=0;for(const i of new PI(n,e.offset+(t||0),e.length,n,j8)){if(!i)return r;++r}return-1}function Ot(e,t,n){if(t===void 0)return-1;if(t===null)return kq(e,n);const r=br.getVisitFn(e),i=qf(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}function G8(e,t,n){const r=br.getVisitFn(e),i=qf(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}It.prototype.visitNull=Nq;It.prototype.visitBool=Ot;It.prototype.visitInt=Ot;It.prototype.visitInt8=Ot;It.prototype.visitInt16=Ot;It.prototype.visitInt32=Ot;It.prototype.visitInt64=Ot;It.prototype.visitUint8=Ot;It.prototype.visitUint16=Ot;It.prototype.visitUint32=Ot;It.prototype.visitUint64=Ot;It.prototype.visitFloat=Ot;It.prototype.visitFloat16=Ot;It.prototype.visitFloat32=Ot;It.prototype.visitFloat64=Ot;It.prototype.visitUtf8=Ot;It.prototype.visitBinary=Ot;It.prototype.visitFixedSizeBinary=Ot;It.prototype.visitDate=Ot;It.prototype.visitDateDay=Ot;It.prototype.visitDateMillisecond=Ot;It.prototype.visitTimestamp=Ot;It.prototype.visitTimestampSecond=Ot;It.prototype.visitTimestampMillisecond=Ot;It.prototype.visitTimestampMicrosecond=Ot;It.prototype.visitTimestampNanosecond=Ot;It.prototype.visitTime=Ot;It.prototype.visitTimeSecond=Ot;It.prototype.visitTimeMillisecond=Ot;It.prototype.visitTimeMicrosecond=Ot;It.prototype.visitTimeNanosecond=Ot;It.prototype.visitDecimal=Ot;It.prototype.visitList=Ot;It.prototype.visitStruct=Ot;It.prototype.visitUnion=Ot;It.prototype.visitDenseUnion=G8;It.prototype.visitSparseUnion=G8;It.prototype.visitDictionary=Ot;It.prototype.visitInterval=Ot;It.prototype.visitIntervalDayTime=Ot;It.prototype.visitIntervalYearMonth=Ot;It.prototype.visitFixedSizeList=Ot;It.prototype.visitMap=Ot;const fg=new It;let Tt=class extends Wt{};function Nt(e){const{type:t}=e;if(e.nullCount===0&&e.stride===1&&(t.typeId===U.Timestamp||t instanceof ka&&t.bitWidth!==64||t instanceof rp&&t.bitWidth!==64||t instanceof np&&t.precision!==yr.HALF))return new sM(e.data.length,r=>{const i=e.data[r];return i.values.subarray(0,i.length)[Symbol.iterator]()});let n=0;return new sM(e.data.length,r=>{const s=e.data[r].length,o=e.slice(n,n+s);return n+=s,new Dq(o)})}let Dq=class{constructor(t){this.vector=t,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}};Tt.prototype.visitNull=Nt;Tt.prototype.visitBool=Nt;Tt.prototype.visitInt=Nt;Tt.prototype.visitInt8=Nt;Tt.prototype.visitInt16=Nt;Tt.prototype.visitInt32=Nt;Tt.prototype.visitInt64=Nt;Tt.prototype.visitUint8=Nt;Tt.prototype.visitUint16=Nt;Tt.prototype.visitUint32=Nt;Tt.prototype.visitUint64=Nt;Tt.prototype.visitFloat=Nt;Tt.prototype.visitFloat16=Nt;Tt.prototype.visitFloat32=Nt;Tt.prototype.visitFloat64=Nt;Tt.prototype.visitUtf8=Nt;Tt.prototype.visitBinary=Nt;Tt.prototype.visitFixedSizeBinary=Nt;Tt.prototype.visitDate=Nt;Tt.prototype.visitDateDay=Nt;Tt.prototype.visitDateMillisecond=Nt;Tt.prototype.visitTimestamp=Nt;Tt.prototype.visitTimestampSecond=Nt;Tt.prototype.visitTimestampMillisecond=Nt;Tt.prototype.visitTimestampMicrosecond=Nt;Tt.prototype.visitTimestampNanosecond=Nt;Tt.prototype.visitTime=Nt;Tt.prototype.visitTimeSecond=Nt;Tt.prototype.visitTimeMillisecond=Nt;Tt.prototype.visitTimeMicrosecond=Nt;Tt.prototype.visitTimeNanosecond=Nt;Tt.prototype.visitDecimal=Nt;Tt.prototype.visitList=Nt;Tt.prototype.visitStruct=Nt;Tt.prototype.visitUnion=Nt;Tt.prototype.visitDenseUnion=Nt;Tt.prototype.visitSparseUnion=Nt;Tt.prototype.visitDictionary=Nt;Tt.prototype.visitInterval=Nt;Tt.prototype.visitIntervalDayTime=Nt;Tt.prototype.visitIntervalYearMonth=Nt;Tt.prototype.visitFixedSizeList=Nt;Tt.prototype.visitMap=Nt;const VI=new Tt,Oq=(e,t)=>e+t;class Ja extends Wt{visitNull(t,n){return 0}visitInt(t,n){return t.type.bitWidth/8}visitFloat(t,n){return t.type.ArrayType.BYTES_PER_ELEMENT}visitBool(t,n){return 1/8}visitDecimal(t,n){return t.type.bitWidth/8}visitDate(t,n){return(t.type.unit+1)*4}visitTime(t,n){return t.type.bitWidth/8}visitTimestamp(t,n){return t.type.unit===ee.SECOND?4:8}visitInterval(t,n){return(t.type.unit+1)*4}visitStruct(t,n){return t.children.reduce((r,i)=>r+Os.visit(i,n),0)}visitFixedSizeBinary(t,n){return t.type.byteWidth}visitMap(t,n){return 8+t.children.reduce((r,i)=>r+Os.visit(i,n),0)}visitDictionary(t,n){var r;return t.type.indices.bitWidth/8+(((r=t.dictionary)===null||r===void 0?void 0:r.getByteLength(t.values[n]))||0)}}const Bq=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),Fq=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),Lq=({valueOffsets:e,stride:t,children:n},r)=>{const i=n[0],{[r*t]:s}=e,{[r*t+1]:o}=e,a=Os.getVisitFn(i.type),l=i.slice(s,o-s);let c=8;for(let u=-1,f=o-s;++u<f;)c+=a(l,u);return c},Rq=({stride:e,children:t},n)=>{const r=t[0],i=r.slice(n*e,e),s=Os.getVisitFn(r.type);let o=0;for(let a=-1,l=i.length;++a<l;)o+=s(i,a);return o},Cq=(e,t)=>e.type.mode===ji.Dense?X8(e,t):Q8(e,t),X8=({type:e,children:t,typeIds:n,valueOffsets:r},i)=>{const s=e.typeIdToChildIndex[n[i]];return 8+Os.visit(t[s],r[i])},Q8=({children:e},t)=>4+Os.visitMany(e,e.map(()=>t)).reduce(Oq,0);Ja.prototype.visitUtf8=Bq;Ja.prototype.visitBinary=Fq;Ja.prototype.visitList=Lq;Ja.prototype.visitFixedSizeList=Rq;Ja.prototype.visitUnion=Cq;Ja.prototype.visitDenseUnion=X8;Ja.prototype.visitSparseUnion=Q8;const Os=new Ja;var K8;const Z8={},J8={};let tn=class ml{constructor(t){var n,r,i;const s=t[0]instanceof ml?t.flatMap(a=>a.data):t;if(s.length===0||s.some(a=>!(a instanceof De)))throw new TypeError("Vector constructor expects an Array of Data instances.");const o=(n=s[0])===null||n===void 0?void 0:n.type;switch(s.length){case 0:this._offsets=[0];break;case 1:{const{get:a,set:l,indexOf:c,byteLength:u}=Z8[o.typeId],f=s[0];this.isValid=d=>jI(f,d),this.get=d=>a(f,d),this.set=(d,h)=>l(f,d,h),this.indexOf=d=>c(f,d),this.getByteLength=d=>u(f,d),this._offsets=[0,f.length];break}default:Object.setPrototypeOf(this,J8[o.typeId]),this._offsets=Y8(s);break}this.data=s,this.type=o,this.stride=no(o),this.numChildren=(i=(r=o.children)===null||r===void 0?void 0:r.length)!==null&&i!==void 0?i:0,this.length=this._offsets[this._offsets.length-1]}get byteLength(){return this._byteLength===-1&&(this._byteLength=this.data.reduce((t,n)=>t+n.byteLength,0)),this._byteLength}get nullCount(){return this._nullCount===-1&&(this._nullCount=V8(this.data)),this._nullCount}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${U[this.type.typeId]}Vector`}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}includes(t,n){return this.indexOf(t,n)>0}getByteLength(t){return 0}[Symbol.iterator](){return VI.visit(this)}concat(...t){return new ml(this.data.concat(t.flatMap(n=>n.data).flat(Number.POSITIVE_INFINITY)))}slice(t,n){return new ml(z8(this,t,n,({data:r,_offsets:i},s,o)=>q8(r,i,s,o)))}toJSON(){return[...this]}toArray(){const{type:t,data:n,length:r,stride:i,ArrayType:s}=this;switch(t.typeId){case U.Int:case U.Float:case U.Decimal:case U.Time:case U.Timestamp:switch(n.length){case 0:return new s;case 1:return n[0].values.subarray(0,r*i);default:return n.reduce((o,{values:a,length:l})=>(o.array.set(a.subarray(0,l*i),o.offset),o.offset+=l*i,o),{array:new s(r*i),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(t){var n;return this.getChildAt((n=this.type.children)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.numChildren?new ml(this.data.map(({children:n})=>n[t])):null}get isMemoized(){return Bt.isDictionary(this.type)?this.data[0].dictionary.isMemoized:!1}memoize(){if(Bt.isDictionary(this.type)){const t=new oM(this.data[0].dictionary),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new ml(n)}return new oM(this)}unmemoize(){if(Bt.isDictionary(this.type)&&this.isMemoized){const t=this.data[0].dictionary.unmemoize(),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new ml(n)}return this}};K8=Symbol.toStringTag;tn[K8]=(e=>{e.type=Bt.prototype,e.data=[],e.length=0,e.stride=1,e.numChildren=0,e._nullCount=-1,e._byteLength=-1,e._offsets=new Uint32Array([0]),e[Symbol.isConcatSpreadable]=!0;const t=Object.keys(U).map(n=>U[n]).filter(n=>typeof n=="number"&&n!==U.NONE);for(const n of t){const r=br.getVisitFnByTypeId(n),i=gi.getVisitFnByTypeId(n),s=fg.getVisitFnByTypeId(n),o=Os.getVisitFnByTypeId(n);Z8[n]={get:r,set:i,indexOf:s,byteLength:o},J8[n]=Object.create(e,{isValid:{value:zu(jI)},get:{value:zu(br.getVisitFnByTypeId(n))},set:{value:W8(gi.getVisitFnByTypeId(n))},indexOf:{value:H8(fg.getVisitFnByTypeId(n))},getByteLength:{value:zu(Os.getVisitFnByTypeId(n))}})}return"Vector"})(tn.prototype);let oM=class tO extends tn{constructor(t){super(t.data);const n=this.get,r=this.set,i=this.slice,s=new Array(this.length);Object.defineProperty(this,"get",{value(o){const a=s[o];if(a!==void 0)return a;const l=n.call(this,o);return s[o]=l,l}}),Object.defineProperty(this,"set",{value(o,a){r.call(this,o,a),s[o]=a}}),Object.defineProperty(this,"slice",{value:(o,a)=>new tO(i.call(this,o,a))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new tn(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}},P2=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(t,n,r,i){return t.prep(8,24),t.writeInt64(i),t.pad(4),t.writeInt32(r),t.writeInt64(n),t.offset()}};const Ew=2,ys=4,co=4,ge=4,na=new Int32Array(2),aM=new Float32Array(na.buffer),lM=new Float64Array(na.buffer),r0=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;let _o=class z2{constructor(t,n){this.low=t|0,this.high=n|0}static create(t,n){return t==0&&n==0?z2.ZERO:new z2(t,n)}toFloat64(){return(this.low>>>0)+this.high*4294967296}equals(t){return this.low==t.low&&this.high==t.high}};_o.ZERO=new _o(0,0);var j2;(function(e){e[e.UTF8_BYTES=1]="UTF8_BYTES",e[e.UTF16_STRING=2]="UTF16_STRING"})(j2||(j2={}));let ff=class eO{constructor(t){this.bytes_=t,this.position_=0}static allocate(t){return new eO(new Uint8Array(t))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(t){this.position_=t}capacity(){return this.bytes_.length}readInt8(t){return this.readUint8(t)<<24>>24}readUint8(t){return this.bytes_[t]}readInt16(t){return this.readUint16(t)<<16>>16}readUint16(t){return this.bytes_[t]|this.bytes_[t+1]<<8}readInt32(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}readUint32(t){return this.readInt32(t)>>>0}readInt64(t){return new _o(this.readInt32(t),this.readInt32(t+4))}readUint64(t){return new _o(this.readUint32(t),this.readUint32(t+4))}readFloat32(t){return na[0]=this.readInt32(t),aM[0]}readFloat64(t){return na[r0?0:1]=this.readInt32(t),na[r0?1:0]=this.readInt32(t+4),lM[0]}writeInt8(t,n){this.bytes_[t]=n}writeUint8(t,n){this.bytes_[t]=n}writeInt16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeUint16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeInt32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeUint32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeInt64(t,n){this.writeInt32(t,n.low),this.writeInt32(t+4,n.high)}writeUint64(t,n){this.writeUint32(t,n.low),this.writeUint32(t+4,n.high)}writeFloat32(t,n){aM[0]=n,this.writeInt32(t,na[0])}writeFloat64(t,n){lM[0]=n,this.writeInt32(t,na[r0?0:1]),this.writeInt32(t+4,na[r0?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+ys+co)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let t="";for(let n=0;n<co;n++)t+=String.fromCharCode(this.readInt8(this.position_+ys+n));return t}__offset(t,n){const r=t-this.readInt32(t);return n<this.readInt16(r)?this.readInt16(r+n):0}__union(t,n){return t.bb_pos=n+this.readInt32(n),t.bb=this,t}__string(t,n){t+=this.readInt32(t);const r=this.readInt32(t);let i="",s=0;if(t+=ys,n===j2.UTF8_BYTES)return this.bytes_.subarray(t,t+r);for(;s<r;){let o;const a=this.readUint8(t+s++);if(a<192)o=a;else{const l=this.readUint8(t+s++);if(a<224)o=(a&31)<<6|l&63;else{const c=this.readUint8(t+s++);if(a<240)o=(a&15)<<12|(l&63)<<6|c&63;else{const u=this.readUint8(t+s++);o=(a&7)<<18|(l&63)<<12|(c&63)<<6|u&63}}}o<65536?i+=String.fromCharCode(o):(o-=65536,i+=String.fromCharCode((o>>10)+55296,(o&1023)+56320))}return i}__union_with_string(t,n){return typeof t=="string"?this.__string(n):this.__union(t,n)}__indirect(t){return t+this.readInt32(t)}__vector(t){return t+this.readInt32(t)+ys}__vector_len(t){return this.readInt32(t+this.readInt32(t))}__has_identifier(t){if(t.length!=co)throw new Error("FlatBuffers: file identifier must be length "+co);for(let n=0;n<co;n++)if(t.charCodeAt(n)!=this.readInt8(this.position()+ys+n))return!1;return!0}createLong(t,n){return _o.create(t,n)}createScalarList(t,n){const r=[];for(let i=0;i<n;++i)t(i)!==null&&r.push(t(i));return r}createObjList(t,n){const r=[];for(let i=0;i<n;++i){const s=t(i);s!==null&&r.push(s.unpack())}return r}},nO=class rO{constructor(t){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null;let n;t?n=t:n=1024,this.bb=ff.allocate(n),this.space=n}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(t){this.force_defaults=t}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(t,n){t>this.minalign&&(this.minalign=t);const r=~(this.bb.capacity()-this.space+n)+1&t-1;for(;this.space<r+t+n;){const i=this.bb.capacity();this.bb=rO.growByteBuffer(this.bb),this.space+=this.bb.capacity()-i}this.pad(r)}pad(t){for(let n=0;n<t;n++)this.bb.writeInt8(--this.space,0)}writeInt8(t){this.bb.writeInt8(this.space-=1,t)}writeInt16(t){this.bb.writeInt16(this.space-=2,t)}writeInt32(t){this.bb.writeInt32(this.space-=4,t)}writeInt64(t){this.bb.writeInt64(this.space-=8,t)}writeFloat32(t){this.bb.writeFloat32(this.space-=4,t)}writeFloat64(t){this.bb.writeFloat64(this.space-=8,t)}addInt8(t){this.prep(1,0),this.writeInt8(t)}addInt16(t){this.prep(2,0),this.writeInt16(t)}addInt32(t){this.prep(4,0),this.writeInt32(t)}addInt64(t){this.prep(8,0),this.writeInt64(t)}addFloat32(t){this.prep(4,0),this.writeFloat32(t)}addFloat64(t){this.prep(8,0),this.writeFloat64(t)}addFieldInt8(t,n,r){(this.force_defaults||n!=r)&&(this.addInt8(n),this.slot(t))}addFieldInt16(t,n,r){(this.force_defaults||n!=r)&&(this.addInt16(n),this.slot(t))}addFieldInt32(t,n,r){(this.force_defaults||n!=r)&&(this.addInt32(n),this.slot(t))}addFieldInt64(t,n,r){(this.force_defaults||!n.equals(r))&&(this.addInt64(n),this.slot(t))}addFieldFloat32(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat32(n),this.slot(t))}addFieldFloat64(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat64(n),this.slot(t))}addFieldOffset(t,n,r){(this.force_defaults||n!=r)&&(this.addOffset(n),this.slot(t))}addFieldStruct(t,n,r){n!=r&&(this.nested(n),this.slot(t))}nested(t){if(t!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")}slot(t){this.vtable!==null&&(this.vtable[t]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(t){const n=t.capacity();if(n&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const r=n<<1,i=ff.allocate(r);return i.setPosition(r-n),i.bytes().set(t.bytes(),r-n),i}addOffset(t){this.prep(ys,0),this.writeInt32(this.offset()-t+ys)}startObject(t){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=t;for(let n=0;n<t;n++)this.vtable[n]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const t=this.offset();let n=this.vtable_in_use-1;for(;n>=0&&this.vtable[n]==0;n--);const r=n+1;for(;n>=0;n--)this.addInt16(this.vtable[n]!=0?t-this.vtable[n]:0);const i=2;this.addInt16(t-this.object_start);const s=(r+i)*Ew;this.addInt16(s);let o=0;const a=this.space;t:for(n=0;n<this.vtables.length;n++){const l=this.bb.capacity()-this.vtables[n];if(s==this.bb.readInt16(l)){for(let c=Ew;c<s;c+=Ew)if(this.bb.readInt16(a+c)!=this.bb.readInt16(l+c))continue t;o=this.vtables[n];break}}return o?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,o-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t}finish(t,n,r){const i=r?ge:0;if(n){const s=n;if(this.prep(this.minalign,ys+co+i),s.length!=co)throw new Error("FlatBuffers: file identifier must be length "+co);for(let o=co-1;o>=0;o--)this.writeInt8(s.charCodeAt(o))}this.prep(this.minalign,ys+i),this.addOffset(t),i&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(t,n){this.finish(t,n,!0)}requiredField(t,n){const r=this.bb.capacity()-t,i=r-this.bb.readInt32(r);if(!(this.bb.readInt16(i+n)!=0))throw new Error("FlatBuffers: field "+n+" must be set")}startVector(t,n,r){this.notNested(),this.vector_num_elems=n,this.prep(ys,t*n),this.prep(r,t*n)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(t){if(!t)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(t))return this.string_maps.get(t);const n=this.createString(t);return this.string_maps.set(t,n),n}createString(t){if(!t)return 0;let n;if(t instanceof Uint8Array)n=t;else{n=[];let r=0;for(;r<t.length;){let i;const s=t.charCodeAt(r++);if(s<55296||s>=56320)i=s;else{const o=t.charCodeAt(r++);i=(s<<10)+o+-56613888}i<128?n.push(i):(i<2048?n.push(i>>6&31|192):(i<65536?n.push(i>>12&15|224):n.push(i>>18&7|240,i>>12&63|128),n.push(i>>6&63|128)),n.push(i&63|128))}}this.addInt8(0),this.startVector(1,n.length,1),this.bb.setPosition(this.space-=n.length);for(let r=0,i=this.space,s=this.bb.bytes();r<n.length;r++)s[i++]=n[r];return this.endVector()}createLong(t,n){return _o.create(t,n)}createObjectOffset(t){return t===null?0:typeof t=="string"?this.createString(t):t.pack(this)}createObjectOffsetList(t){const n=[];for(let r=0;r<t.length;++r){const i=t[r];if(i!==null)n.push(this.createObjectOffset(i));else throw new Error("FlatBuffers: Argument for createObjectOffsetList cannot contain null.")}return n}createStructOffsetList(t,n){return n(this,t.length),this.createObjectOffsetList(t),this.endVector()}},oi=class gl{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsKeyValue(t,n){return(n||new gl).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsKeyValue(t,n){return t.setPosition(t.position()+ge),(n||new gl).__init(t.readInt32(t.position())+t.position(),t)}key(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}value(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startKeyValue(t){t.startObject(2)}static addKey(t,n){t.addFieldOffset(0,n,0)}static addValue(t,n){t.addFieldOffset(1,n,0)}static endKeyValue(t){return t.endObject()}static createKeyValue(t,n,r){return gl.startKeyValue(t),gl.addKey(t,n),gl.addValue(t,r),gl.endKeyValue(t)}};var df;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(df||(df={}));var hf;(function(e){e[e.Little=0]="Little",e[e.Big=1]="Big"})(hf||(hf={}));var dg;(function(e){e[e.DenseArray=0]="DenseArray"})(dg||(dg={}));let _u=class bl{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInt(t,n){return(n||new bl).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInt(t,n){return t.setPosition(t.position()+ge),(n||new bl).__init(t.readInt32(t.position())+t.position(),t)}bitWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}isSigned(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startInt(t){t.startObject(2)}static addBitWidth(t,n){t.addFieldInt32(0,n,0)}static addIsSigned(t,n){t.addFieldInt8(1,+n,0)}static endInt(t){return t.endObject()}static createInt(t,n,r){return bl.startInt(t),bl.addBitWidth(t,n),bl.addIsSigned(t,r),bl.endInt(t)}},Vc=class V2{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryEncoding(t,n){return(n||new V2).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryEncoding(t,n){return t.setPosition(t.position()+ge),(n||new V2).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}indexType(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new _u).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isOrdered(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}dictionaryKind(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt16(this.bb_pos+t):dg.DenseArray}static startDictionaryEncoding(t){t.startObject(4)}static addId(t,n){t.addFieldInt64(0,n,t.createLong(0,0))}static addIndexType(t,n){t.addFieldOffset(1,n,0)}static addIsOrdered(t,n){t.addFieldInt8(2,+n,0)}static addDictionaryKind(t,n){t.addFieldInt16(3,n,dg.DenseArray)}static endDictionaryEncoding(t){return t.endObject()}},cM=class zd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBinary(t,n){return(n||new zd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBinary(t,n){return t.setPosition(t.position()+ge),(n||new zd).__init(t.readInt32(t.position())+t.position(),t)}static startBinary(t){t.startObject(0)}static endBinary(t){return t.endObject()}static createBinary(t){return zd.startBinary(t),zd.endBinary(t)}},uM=class jd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBool(t,n){return(n||new jd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBool(t,n){return t.setPosition(t.position()+ge),(n||new jd).__init(t.readInt32(t.position())+t.position(),t)}static startBool(t){t.startObject(0)}static endBool(t){return t.endObject()}static createBool(t){return jd.startBool(t),jd.endBool(t)}};var hg;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(hg||(hg={}));let Z0=class Yc{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDate(t,n){return(n||new Yc).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDate(t,n){return t.setPosition(t.position()+ge),(n||new Yc).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):hg.MILLISECOND}static startDate(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,hg.MILLISECOND)}static endDate(t){return t.endObject()}static createDate(t,n){return Yc.startDate(t),Yc.addUnit(t,n),Yc.endDate(t)}},qc=class Ko{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDecimal(t,n){return(n||new Ko).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDecimal(t,n){return t.setPosition(t.position()+ge),(n||new Ko).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}scale(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}bitWidth(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt32(this.bb_pos+t):128}static startDecimal(t){t.startObject(3)}static addPrecision(t,n){t.addFieldInt32(0,n,0)}static addScale(t,n){t.addFieldInt32(1,n,0)}static addBitWidth(t,n){t.addFieldInt32(2,n,128)}static endDecimal(t){return t.endObject()}static createDecimal(t,n,r,i){return Ko.startDecimal(t),Ko.addPrecision(t,n),Ko.addScale(t,r),Ko.addBitWidth(t,i),Ko.endDecimal(t)}};var pf;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(pf||(pf={}));let J0=class Wc{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeBinary(t,n){return(n||new Wc).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeBinary(t,n){return t.setPosition(t.position()+ge),(n||new Wc).__init(t.readInt32(t.position())+t.position(),t)}byteWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeBinary(t){t.startObject(1)}static addByteWidth(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeBinary(t){return t.endObject()}static createFixedSizeBinary(t,n){return Wc.startFixedSizeBinary(t),Wc.addByteWidth(t,n),Wc.endFixedSizeBinary(t)}},tm=class Hc{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeList(t,n){return(n||new Hc).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeList(t,n){return t.setPosition(t.position()+ge),(n||new Hc).__init(t.readInt32(t.position())+t.position(),t)}listSize(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeList(t){t.startObject(1)}static addListSize(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeList(t){return t.endObject()}static createFixedSizeList(t,n){return Hc.startFixedSizeList(t),Hc.addListSize(t,n),Hc.endFixedSizeList(t)}};var pg;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(pg||(pg={}));let em=class Gc{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFloatingPoint(t,n){return(n||new Gc).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFloatingPoint(t,n){return t.setPosition(t.position()+ge),(n||new Gc).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):pg.HALF}static startFloatingPoint(t){t.startObject(1)}static addPrecision(t,n){t.addFieldInt16(0,n,pg.HALF)}static endFloatingPoint(t){return t.endObject()}static createFloatingPoint(t,n){return Gc.startFloatingPoint(t),Gc.addPrecision(t,n),Gc.endFloatingPoint(t)}};var yg;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(yg||(yg={}));let nm=class Xc{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInterval(t,n){return(n||new Xc).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInterval(t,n){return t.setPosition(t.position()+ge),(n||new Xc).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):yg.YEAR_MONTH}static startInterval(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,yg.YEAR_MONTH)}static endInterval(t){return t.endObject()}static createInterval(t,n){return Xc.startInterval(t),Xc.addUnit(t,n),Xc.endInterval(t)}},fM=class Vd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsList(t,n){return(n||new Vd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsList(t,n){return t.setPosition(t.position()+ge),(n||new Vd).__init(t.readInt32(t.position())+t.position(),t)}static startList(t){t.startObject(0)}static endList(t){return t.endObject()}static createList(t){return Vd.startList(t),Vd.endList(t)}},rm=class Qc{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMap(t,n){return(n||new Qc).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMap(t,n){return t.setPosition(t.position()+ge),(n||new Qc).__init(t.readInt32(t.position())+t.position(),t)}keysSorted(){const t=this.bb.__offset(this.bb_pos,4);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startMap(t){t.startObject(1)}static addKeysSorted(t,n){t.addFieldInt8(0,+n,0)}static endMap(t){return t.endObject()}static createMap(t,n){return Qc.startMap(t),Qc.addKeysSorted(t,n),Qc.endMap(t)}},dM=class Yd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsNull(t,n){return(n||new Yd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsNull(t,n){return t.setPosition(t.position()+ge),(n||new Yd).__init(t.readInt32(t.position())+t.position(),t)}static startNull(t){t.startObject(0)}static endNull(t){return t.endObject()}static createNull(t){return Yd.startNull(t),Yd.endNull(t)}},hM=class qd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsStruct_(t,n){return(n||new qd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsStruct_(t,n){return t.setPosition(t.position()+ge),(n||new qd).__init(t.readInt32(t.position())+t.position(),t)}static startStruct_(t){t.startObject(0)}static endStruct_(t){return t.endObject()}static createStruct_(t){return qd.startStruct_(t),qd.endStruct_(t)}},Wd=class vl{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTime(t,n){return(n||new vl).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTime(t,n){return t.setPosition(t.position()+ge),(n||new vl).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):pf.MILLISECOND}bitWidth(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):32}static startTime(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,pf.MILLISECOND)}static addBitWidth(t,n){t.addFieldInt32(1,n,32)}static endTime(t){return t.endObject()}static createTime(t,n,r){return vl.startTime(t),vl.addUnit(t,n),vl.addBitWidth(t,r),vl.endTime(t)}},Hd=class wl{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTimestamp(t,n){return(n||new wl).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTimestamp(t,n){return t.setPosition(t.position()+ge),(n||new wl).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):pf.SECOND}timezone(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startTimestamp(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,pf.SECOND)}static addTimezone(t,n){t.addFieldOffset(1,n,0)}static endTimestamp(t){return t.endObject()}static createTimestamp(t,n,r){return wl.startTimestamp(t),wl.addUnit(t,n),wl.addTimezone(t,r),wl.endTimestamp(t)}};var mg;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(mg||(mg={}));let _l=class Sl{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUnion(t,n){return(n||new Sl).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUnion(t,n){return t.setPosition(t.position()+ge),(n||new Sl).__init(t.readInt32(t.position())+t.position(),t)}mode(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):mg.Sparse}typeIds(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readInt32(this.bb.__vector(this.bb_pos+n)+t*4):0}typeIdsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}typeIdsArray(){const t=this.bb.__offset(this.bb_pos,6);return t?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startUnion(t){t.startObject(2)}static addMode(t,n){t.addFieldInt16(0,n,mg.Sparse)}static addTypeIds(t,n){t.addFieldOffset(1,n,0)}static createTypeIdsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addInt32(n[r]);return t.endVector()}static startTypeIdsVector(t,n){t.startVector(4,n,4)}static endUnion(t){return t.endObject()}static createUnion(t,n,r){return Sl.startUnion(t),Sl.addMode(t,n),Sl.addTypeIds(t,r),Sl.endUnion(t)}},pM=class Gd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUtf8(t,n){return(n||new Gd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUtf8(t,n){return t.setPosition(t.position()+ge),(n||new Gd).__init(t.readInt32(t.position())+t.position(),t)}static startUtf8(t){t.startObject(0)}static endUtf8(t){return t.endObject()}static createUtf8(t){return Gd.startUtf8(t),Gd.endUtf8(t)}};var Oe;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.FloatingPoint=3]="FloatingPoint",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct_=13]="Struct_",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.LargeBinary=19]="LargeBinary",e[e.LargeUtf8=20]="LargeUtf8",e[e.LargeList=21]="LargeList"})(Oe||(Oe={}));let Xr=class im{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsField(t,n){return(n||new im).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsField(t,n){return t.setPosition(t.position()+ge),(n||new im).__init(t.readInt32(t.position())+t.position(),t)}name(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}nullable(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}typeType(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):Oe.NONE}type(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.__union(t,this.bb_pos+n):null}dictionary(t){const n=this.bb.__offset(this.bb_pos,12);return n?(t||new Vc).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}children(t,n){const r=this.bb.__offset(this.bb_pos,14);return r?(n||new im).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}childrenLength(){const t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,16);return r?(n||new oi).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}static startField(t){t.startObject(7)}static addName(t,n){t.addFieldOffset(0,n,0)}static addNullable(t,n){t.addFieldInt8(1,+n,0)}static addTypeType(t,n){t.addFieldInt8(2,n,Oe.NONE)}static addType(t,n){t.addFieldOffset(3,n,0)}static addDictionary(t,n){t.addFieldOffset(4,n,0)}static addChildren(t,n){t.addFieldOffset(5,n,0)}static createChildrenVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startChildrenVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(6,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endField(t){return t.endObject()}},ls=class Gs{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsSchema(t,n){return(n||new Gs).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSchema(t,n){return t.setPosition(t.position()+ge),(n||new Gs).__init(t.readInt32(t.position())+t.position(),t)}endianness(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):hf.Little}fields(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new Xr).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}fieldsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new oi).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}features(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.readInt64(this.bb.__vector(this.bb_pos+n)+t*8):this.bb.createLong(0,0)}featuresLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}static startSchema(t){t.startObject(4)}static addEndianness(t,n){t.addFieldInt16(0,n,hf.Little)}static addFields(t,n){t.addFieldOffset(1,n,0)}static createFieldsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startFieldsVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(2,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static addFeatures(t,n){t.addFieldOffset(3,n,0)}static createFeaturesVector(t,n){t.startVector(8,n.length,8);for(let r=n.length-1;r>=0;r--)t.addInt64(n[r]);return t.endVector()}static startFeaturesVector(t,n){t.startVector(8,n,8)}static endSchema(t){return t.endObject()}static finishSchemaBuffer(t,n){t.finish(n)}static finishSizePrefixedSchemaBuffer(t,n){t.finish(n,void 0,!0)}static createSchema(t,n,r,i,s){return Gs.startSchema(t),Gs.addEndianness(t,n),Gs.addFields(t,r),Gs.addCustomMetadata(t,i),Gs.addFeatures(t,s),Gs.endSchema(t)}},ns=class Y2{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFooter(t,n){return(n||new Y2).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFooter(t,n){return t.setPosition(t.position()+ge),(n||new Y2).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):df.V1}schema(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new ls).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}dictionaries(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new P2).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}dictionariesLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}recordBatches(t,n){const r=this.bb.__offset(this.bb_pos,10);return r?(n||new P2).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}recordBatchesLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new oi).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startFooter(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,df.V1)}static addSchema(t,n){t.addFieldOffset(1,n,0)}static addDictionaries(t,n){t.addFieldOffset(2,n,0)}static startDictionariesVector(t,n){t.startVector(24,n,8)}static addRecordBatches(t,n){t.addFieldOffset(3,n,0)}static startRecordBatchesVector(t,n){t.startVector(24,n,8)}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endFooter(t){return t.endObject()}static finishFooterBuffer(t,n){t.finish(n)}static finishSizePrefixedFooterBuffer(t,n){t.finish(n,void 0,!0)}},Le=class xl{constructor(t=[],n,r){this.fields=t||[],this.metadata=n||new Map,r||(r=W2(t)),this.dictionaries=r}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(t=>t.name)}toString(){return`Schema<{ ${this.fields.map((t,n)=>`${n}: ${t}`).join(", ")} }>`}select(t){const n=new Set(t),r=this.fields.filter(i=>n.has(i.name));return new xl(r,this.metadata)}selectAt(t){const n=t.map(r=>this.fields[r]).filter(Boolean);return new xl(n,this.metadata)}assign(...t){const n=t[0]instanceof xl?t[0]:Array.isArray(t[0])?new xl(t[0]):new xl(t),r=[...this.fields],i=i0(i0(new Map,this.metadata),n.metadata),s=n.fields.filter(a=>{const l=r.findIndex(c=>c.name===a.name);return~l?(r[l]=a.clone({metadata:i0(i0(new Map,r[l].metadata),a.metadata)}))&&!1:!0}),o=W2(s,new Map);return new xl([...r,...s],i,new Map([...this.dictionaries,...o]))}};Le.prototype.fields=null;Le.prototype.metadata=null;Le.prototype.dictionaries=null;let Xe=class q2{constructor(t,n,r=!1,i){this.name=t,this.type=n,this.nullable=r,this.metadata=i||new Map}static new(...t){let[n,r,i,s]=t;return t[0]&&typeof t[0]=="object"&&({name:n}=t[0],r===void 0&&(r=t[0].type),i===void 0&&(i=t[0].nullable),s===void 0&&(s=t[0].metadata)),new q2(`${n}`,r,i,s)}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...t){let[n,r,i,s]=t;return!t[0]||typeof t[0]!="object"?[n=this.name,r=this.type,i=this.nullable,s=this.metadata]=t:{name:n=this.name,type:r=this.type,nullable:i=this.nullable,metadata:s=this.metadata}=t[0],q2.new(n,r,i,s)}};Xe.prototype.type=null;Xe.prototype.name=null;Xe.prototype.nullable=null;Xe.prototype.metadata=null;function i0(e,t){return new Map([...e||new Map,...t||new Map])}function W2(e,t=new Map){for(let n=-1,r=e.length;++n<r;){const s=e[n].type;if(Bt.isDictionary(s)){if(!t.has(s.id))t.set(s.id,s.dictionary);else if(t.get(s.id)!==s.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}s.children&&s.children.length>0&&W2(s.children,t)}return t}var yM=_o,Uq=nO,Pq=ff;let YI=class{constructor(t,n=ri.V4,r,i){this.schema=t,this.version=n,r&&(this._recordBatches=r),i&&(this._dictionaryBatches=i)}static decode(t){t=new Pq(ie(t));const n=ns.getRootAsFooter(t),r=Le.decode(n.schema());return new zq(r,n)}static encode(t){const n=new Uq,r=Le.encode(n,t.schema);ns.startRecordBatchesVector(n,t.numRecordBatches);for(const o of[...t.recordBatches()].slice().reverse())gg.encode(n,o);const i=n.endVector();ns.startDictionariesVector(n,t.numDictionaries);for(const o of[...t.dictionaryBatches()].slice().reverse())gg.encode(n,o);const s=n.endVector();return ns.startFooter(n),ns.addSchema(n,r),ns.addVersion(n,ri.V4),ns.addRecordBatches(n,i),ns.addDictionaries(n,s),ns.finishFooterBuffer(n,ns.endFooter(n)),n.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}*recordBatches(){for(let t,n=-1,r=this.numRecordBatches;++n<r;)(t=this.getRecordBatch(n))&&(yield t)}*dictionaryBatches(){for(let t,n=-1,r=this.numDictionaries;++n<r;)(t=this.getDictionaryBatch(n))&&(yield t)}getRecordBatch(t){return t>=0&&t<this.numRecordBatches&&this._recordBatches[t]||null}getDictionaryBatch(t){return t>=0&&t<this.numDictionaries&&this._dictionaryBatches[t]||null}},zq=class extends YI{constructor(t,n){super(t,n.version()),this._footer=n}get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}getRecordBatch(t){if(t>=0&&t<this.numRecordBatches){const n=this._footer.recordBatches(t);if(n)return gg.decode(n)}return null}getDictionaryBatch(t){if(t>=0&&t<this.numDictionaries){const n=this._footer.dictionaries(t);if(n)return gg.decode(n)}return null}},gg=class iO{constructor(t,n,r){this.metaDataLength=t,this.offset=typeof r=="number"?r:r.low,this.bodyLength=typeof n=="number"?n:n.low}static decode(t){return new iO(t.metaDataLength(),t.bodyLength(),t.offset())}static encode(t,n){const{metaDataLength:r}=n,i=new yM(n.offset,0),s=new yM(n.bodyLength,0);return P2.createBlock(t,i,r,s)}};const Re=Object.freeze({done:!0,value:void 0});let mM=class{constructor(t){this._json=t}get schema(){return this._json.schema}get batches(){return this._json.batches||[]}get dictionaries(){return this._json.dictionaries||[]}},sO=class{tee(){return this._getDOMStream().tee()}pipe(t,n){return this._getNodeStream().pipe(t,n)}pipeTo(t,n){return this._getDOMStream().pipeTo(t,n)}pipeThrough(t,n){return this._getDOMStream().pipeThrough(t,n)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}},jq=class extends sO{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(t=>this._closedPromiseResolve=t)}get closed(){return this._closedPromise}cancel(t){return W(this,void 0,void 0,function*(){yield this.return(t)})}write(t){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(t):this.resolvers.shift().resolve({done:!1,value:t}))}abort(t){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:t}:this.resolvers.shift().reject({done:!0,value:t}))}close(){if(this._closedPromiseResolve){const{resolvers:t}=this;for(;t.length>0;)t.shift().resolve(Re);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(t){return Kr.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,t)}toNodeStream(t){return Kr.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,t)}throw(t){return W(this,void 0,void 0,function*(){return yield this.abort(t),Re})}return(t){return W(this,void 0,void 0,function*(){return yield this.close(),Re})}read(t){return W(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return W(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(...t){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((n,r)=>{this.resolvers.push({resolve:n,reject:r})}):Promise.resolve(Re)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}},Vq=class extends jq{write(t){if((t=ie(t)).byteLength>0)return super.write(t)}toString(t=!1){return t?D2(this.toUint8Array(!0)):this.toUint8Array(!1).then(D2)}toUint8Array(t=!1){return t?Ds(this._values)[0]:W(this,void 0,void 0,function*(){var n,r;const i=[];let s=0;try{for(var o=Lr(this),a;a=yield o.next(),!a.done;){const l=a.value;i.push(l),s+=l.byteLength}}catch(l){n={error:l}}finally{try{a&&!a.done&&(r=o.return)&&(yield r.call(o))}finally{if(n)throw n.error}}return Ds(i,s)[0]})}},bg=class{constructor(t){t&&(this.source=new Yq(Kr.fromIterable(t)))}[Symbol.iterator](){return this}next(t){return this.source.next(t)}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}peek(t){return this.source.peek(t)}read(t){return this.source.read(t)}},vg=class oO{constructor(t){t instanceof oO?this.source=t.source:t instanceof Vq?this.source=new fl(Kr.fromAsyncIterable(t)):RD(t)?this.source=new fl(Kr.fromNodeStream(t)):OI(t)?this.source=new fl(Kr.fromDOMStream(t)):FD(t)?this.source=new fl(Kr.fromDOMStream(t.body)):Ob(t)?this.source=new fl(Kr.fromIterable(t)):Zh(t)?this.source=new fl(Kr.fromAsyncIterable(t)):DI(t)&&(this.source=new fl(Kr.fromAsyncIterable(t)))}[Symbol.asyncIterator](){return this}next(t){return this.source.next(t)}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}get closed(){return this.source.closed}cancel(t){return this.source.cancel(t)}peek(t){return this.source.peek(t)}read(t){return this.source.read(t)}},Yq=class{constructor(t){this.source=t}cancel(t){this.return(t)}peek(t){return this.next(t,"peek").value}read(t){return this.next(t,"read").value}next(t,n="read"){return this.source.next({cmd:n,size:t})}throw(t){return Object.create(this.source.throw&&this.source.throw(t)||Re)}return(t){return Object.create(this.source.return&&this.source.return(t)||Re)}},fl=class{constructor(t){this.source=t,this._closedPromise=new Promise(n=>this._closedPromiseResolve=n)}cancel(t){return W(this,void 0,void 0,function*(){yield this.return(t)})}get closed(){return this._closedPromise}read(t){return W(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return W(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(t,n="read"){return W(this,void 0,void 0,function*(){return yield this.source.next({cmd:n,size:t})})}throw(t){return W(this,void 0,void 0,function*(){const n=this.source.throw&&(yield this.source.throw(t))||Re;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(n)})}return(t){return W(this,void 0,void 0,function*(){const n=this.source.return&&(yield this.source.return(t))||Re;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(n)})}},gM=class extends bg{constructor(t,n){super(),this.position=0,this.buffer=ie(t),this.size=typeof n>"u"?this.buffer.byteLength:n}readInt32(t){const{buffer:n,byteOffset:r}=this.readAt(t,4);return new DataView(n,r).getInt32(0,!0)}seek(t){return this.position=Math.min(t,this.size),t<this.size}read(t){const{buffer:n,size:r,position:i}=this;return n&&i<r?(typeof t!="number"&&(t=Number.POSITIVE_INFINITY),this.position=Math.min(r,i+Math.min(r-i,t)),n.subarray(i,this.position)):null}readAt(t,n){const r=this.buffer,i=Math.min(this.size,t+n);return r?r.subarray(t,i):new Uint8Array(n)}close(){this.buffer&&(this.buffer=null)}throw(t){return this.close(),{done:!0,value:t}}return(t){return this.close(),{done:!0,value:t}}},wg=class extends vg{constructor(t,n){super(),this.position=0,this._handle=t,typeof n=="number"?this.size=n:this._pending=W(this,void 0,void 0,function*(){this.size=(yield t.stat()).size,delete this._pending})}readInt32(t){return W(this,void 0,void 0,function*(){const{buffer:n,byteOffset:r}=yield this.readAt(t,4);return new DataView(n,r).getInt32(0,!0)})}seek(t){return W(this,void 0,void 0,function*(){return this._pending&&(yield this._pending),this.position=Math.min(t,this.size),t<this.size})}read(t){return W(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:n,size:r,position:i}=this;if(n&&i<r){typeof t!="number"&&(t=Number.POSITIVE_INFINITY);let s=i,o=0,a=0;const l=Math.min(r,s+Math.min(r-s,t)),c=new Uint8Array(Math.max(0,(this.position=l)-s));for(;(s+=a)<l&&(o+=a)<c.byteLength;)({bytesRead:a}=yield n.read(c,o,c.byteLength-o,s));return c}return null})}readAt(t,n){return W(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:r,size:i}=this;if(r&&t+n<i){const s=Math.min(i,t+n),o=new Uint8Array(s-t);return(yield r.read(o,0,n,t)).buffer}return new Uint8Array(n)})}close(){return W(this,void 0,void 0,function*(){const t=this._handle;this._handle=null,t&&(yield t.close())})}throw(t){return W(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:t}})}return(t){return W(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:t}})}};const qq=65536;function Su(e){return e<0&&(e=4294967295+e+1),`0x${e.toString(16)}`}const yf=8,qI=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8];let aO=class{constructor(t){this.buffer=t}high(){return this.buffer[1]}low(){return this.buffer[0]}_times(t){const n=new Uint32Array([this.buffer[1]>>>16,this.buffer[1]&65535,this.buffer[0]>>>16,this.buffer[0]&65535]),r=new Uint32Array([t.buffer[1]>>>16,t.buffer[1]&65535,t.buffer[0]>>>16,t.buffer[0]&65535]);let i=n[3]*r[3];this.buffer[0]=i&65535;let s=i>>>16;return i=n[2]*r[3],s+=i,i=n[3]*r[2]>>>0,s+=i,this.buffer[0]+=s<<16,this.buffer[1]=s>>>0<i?qq:0,this.buffer[1]+=s>>>16,this.buffer[1]+=n[1]*r[3]+n[2]*r[2]+n[3]*r[1],this.buffer[1]+=n[0]*r[3]+n[1]*r[2]+n[2]*r[1]+n[3]*r[0]<<16,this}_plus(t){const n=this.buffer[0]+t.buffer[0]>>>0;this.buffer[1]+=t.buffer[1],n<this.buffer[0]>>>0&&++this.buffer[1],this.buffer[0]=n}lessThan(t){return this.buffer[1]<t.buffer[1]||this.buffer[1]===t.buffer[1]&&this.buffer[0]<t.buffer[0]}equals(t){return this.buffer[1]===t.buffer[1]&&this.buffer[0]==t.buffer[0]}greaterThan(t){return t.lessThan(this)}hex(){return`${Su(this.buffer[1])} ${Su(this.buffer[0])}`}},nn=class Xs extends aO{times(t){return this._times(t),this}plus(t){return this._plus(t),this}static from(t,n=new Uint32Array(2)){return Xs.fromString(typeof t=="string"?t:t.toString(),n)}static fromNumber(t,n=new Uint32Array(2)){return Xs.fromString(t.toString(),n)}static fromString(t,n=new Uint32Array(2)){const r=t.length,i=new Xs(n);for(let s=0;s<r;){const o=yf<r-s?yf:r-s,a=new Xs(new Uint32Array([Number.parseInt(t.slice(s,s+o),10),0])),l=new Xs(new Uint32Array([qI[o],0]));i.times(l),i.plus(a),s+=o}return i}static convertArray(t){const n=new Uint32Array(t.length*2);for(let r=-1,i=t.length;++r<i;)Xs.from(t[r],new Uint32Array(n.buffer,n.byteOffset+2*r*4,2));return n}static multiply(t,n){return new Xs(new Uint32Array(t.buffer)).times(n)}static add(t,n){return new Xs(new Uint32Array(t.buffer)).plus(n)}},Sh=class Qs extends aO{negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[0]==0&&++this.buffer[1],this}times(t){return this._times(t),this}plus(t){return this._plus(t),this}lessThan(t){const n=this.buffer[1]<<0,r=t.buffer[1]<<0;return n<r||n===r&&this.buffer[0]<t.buffer[0]}static from(t,n=new Uint32Array(2)){return Qs.fromString(typeof t=="string"?t:t.toString(),n)}static fromNumber(t,n=new Uint32Array(2)){return Qs.fromString(t.toString(),n)}static fromString(t,n=new Uint32Array(2)){const r=t.startsWith("-"),i=t.length,s=new Qs(n);for(let o=r?1:0;o<i;){const a=yf<i-o?yf:i-o,l=new Qs(new Uint32Array([Number.parseInt(t.slice(o,o+a),10),0])),c=new Qs(new Uint32Array([qI[a],0]));s.times(c),s.plus(l),o+=a}return r?s.negate():s}static convertArray(t){const n=new Uint32Array(t.length*2);for(let r=-1,i=t.length;++r<i;)Qs.from(t[r],new Uint32Array(n.buffer,n.byteOffset+2*r*4,2));return n}static multiply(t,n){return new Qs(new Uint32Array(t.buffer)).times(n)}static add(t,n){return new Qs(new Uint32Array(t.buffer)).plus(n)}},Wq=class Ks{constructor(t){this.buffer=t}high(){return new Sh(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2))}low(){return new Sh(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset,2))}negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[2]=~this.buffer[2],this.buffer[3]=~this.buffer[3],this.buffer[0]==0&&++this.buffer[1],this.buffer[1]==0&&++this.buffer[2],this.buffer[2]==0&&++this.buffer[3],this}times(t){const n=new nn(new Uint32Array([this.buffer[3],0])),r=new nn(new Uint32Array([this.buffer[2],0])),i=new nn(new Uint32Array([this.buffer[1],0])),s=new nn(new Uint32Array([this.buffer[0],0])),o=new nn(new Uint32Array([t.buffer[3],0])),a=new nn(new Uint32Array([t.buffer[2],0])),l=new nn(new Uint32Array([t.buffer[1],0])),c=new nn(new Uint32Array([t.buffer[0],0]));let u=nn.multiply(s,c);this.buffer[0]=u.low();const f=new nn(new Uint32Array([u.high(),0]));return u=nn.multiply(i,c),f.plus(u),u=nn.multiply(s,l),f.plus(u),this.buffer[1]=f.low(),this.buffer[3]=f.lessThan(u)?1:0,this.buffer[2]=f.high(),new nn(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2)).plus(nn.multiply(r,c)).plus(nn.multiply(i,l)).plus(nn.multiply(s,a)),this.buffer[3]+=nn.multiply(n,c).plus(nn.multiply(r,l)).plus(nn.multiply(i,a)).plus(nn.multiply(s,o)).low(),this}plus(t){const n=new Uint32Array(4);return n[3]=this.buffer[3]+t.buffer[3]>>>0,n[2]=this.buffer[2]+t.buffer[2]>>>0,n[1]=this.buffer[1]+t.buffer[1]>>>0,n[0]=this.buffer[0]+t.buffer[0]>>>0,n[0]<this.buffer[0]>>>0&&++n[1],n[1]<this.buffer[1]>>>0&&++n[2],n[2]<this.buffer[2]>>>0&&++n[3],this.buffer[3]=n[3],this.buffer[2]=n[2],this.buffer[1]=n[1],this.buffer[0]=n[0],this}hex(){return`${Su(this.buffer[3])} ${Su(this.buffer[2])} ${Su(this.buffer[1])} ${Su(this.buffer[0])}`}static multiply(t,n){return new Ks(new Uint32Array(t.buffer)).times(n)}static add(t,n){return new Ks(new Uint32Array(t.buffer)).plus(n)}static from(t,n=new Uint32Array(4)){return Ks.fromString(typeof t=="string"?t:t.toString(),n)}static fromNumber(t,n=new Uint32Array(4)){return Ks.fromString(t.toString(),n)}static fromString(t,n=new Uint32Array(4)){const r=t.startsWith("-"),i=t.length,s=new Ks(n);for(let o=r?1:0;o<i;){const a=yf<i-o?yf:i-o,l=new Ks(new Uint32Array([Number.parseInt(t.slice(o,o+a),10),0,0,0])),c=new Ks(new Uint32Array([qI[a],0,0,0]));s.times(c),s.plus(l),o+=a}return r?s.negate():s}static convertArray(t){const n=new Uint32Array(t.length*4);for(let r=-1,i=t.length;++r<i;)Ks.from(t[r],new Uint32Array(n.buffer,n.byteOffset+4*4*r,4));return n}},lO=class extends Wt{constructor(t,n,r,i){super(),this.nodesIndex=-1,this.buffersIndex=-1,this.bytes=t,this.nodes=n,this.buffers=r,this.dictionaries=i}visit(t){return super.visit(t instanceof Xe?t.type:t)}visitNull(t,{length:n}=this.nextFieldNode()){return Vt({type:t,length:n})}visitBool(t,{length:n,nullCount:r}=this.nextFieldNode()){return Vt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitInt(t,{length:n,nullCount:r}=this.nextFieldNode()){return Vt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitFloat(t,{length:n,nullCount:r}=this.nextFieldNode()){return Vt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitUtf8(t,{length:n,nullCount:r}=this.nextFieldNode()){return Vt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),valueOffsets:this.readOffsets(t),data:this.readData(t)})}visitBinary(t,{length:n,nullCount:r}=this.nextFieldNode()){return Vt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),valueOffsets:this.readOffsets(t),data:this.readData(t)})}visitFixedSizeBinary(t,{length:n,nullCount:r}=this.nextFieldNode()){return Vt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitDate(t,{length:n,nullCount:r}=this.nextFieldNode()){return Vt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitTimestamp(t,{length:n,nullCount:r}=this.nextFieldNode()){return Vt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitTime(t,{length:n,nullCount:r}=this.nextFieldNode()){return Vt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitDecimal(t,{length:n,nullCount:r}=this.nextFieldNode()){return Vt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitList(t,{length:n,nullCount:r}=this.nextFieldNode()){return Vt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),valueOffsets:this.readOffsets(t),child:this.visit(t.children[0])})}visitStruct(t,{length:n,nullCount:r}=this.nextFieldNode()){return Vt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),children:this.visitMany(t.children)})}visitUnion(t){return t.mode===ji.Sparse?this.visitSparseUnion(t):this.visitDenseUnion(t)}visitDenseUnion(t,{length:n,nullCount:r}=this.nextFieldNode()){return Vt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),typeIds:this.readTypeIds(t),valueOffsets:this.readOffsets(t),children:this.visitMany(t.children)})}visitSparseUnion(t,{length:n,nullCount:r}=this.nextFieldNode()){return Vt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),typeIds:this.readTypeIds(t),children:this.visitMany(t.children)})}visitDictionary(t,{length:n,nullCount:r}=this.nextFieldNode()){return Vt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t.indices),dictionary:this.readDictionary(t)})}visitInterval(t,{length:n,nullCount:r}=this.nextFieldNode()){return Vt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitFixedSizeList(t,{length:n,nullCount:r}=this.nextFieldNode()){return Vt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),child:this.visit(t.children[0])})}visitMap(t,{length:n,nullCount:r}=this.nextFieldNode()){return Vt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),valueOffsets:this.readOffsets(t),child:this.visit(t.children[0])})}nextFieldNode(){return this.nodes[++this.nodesIndex]}nextBufferRange(){return this.buffers[++this.buffersIndex]}readNullBitmap(t,n,r=this.nextBufferRange()){return n>0&&this.readData(t,r)||new Uint8Array(0)}readOffsets(t,n){return this.readData(t,n)}readTypeIds(t,n){return this.readData(t,n)}readData(t,{length:n,offset:r}=this.nextBufferRange()){return this.bytes.subarray(r,r+n)}readDictionary(t){return this.dictionaries.get(t.id)}},Hq=class extends lO{constructor(t,n,r,i){super(new Uint8Array(0),n,r,i),this.sources=t}readNullBitmap(t,n,{offset:r}=this.nextBufferRange()){return n<=0?new Uint8Array(0):R2(this.sources[r])}readOffsets(t,{offset:n}=this.nextBufferRange()){return ye(Uint8Array,ye(Int32Array,this.sources[n]))}readTypeIds(t,{offset:n}=this.nextBufferRange()){return ye(Uint8Array,ye(t.ArrayType,this.sources[n]))}readData(t,{offset:n}=this.nextBufferRange()){const{sources:r}=this;return Bt.isTimestamp(t)||(Bt.isInt(t)||Bt.isTime(t))&&t.bitWidth===64||Bt.isDate(t)&&t.unit===No.MILLISECOND?ye(Uint8Array,Sh.convertArray(r[n])):Bt.isDecimal(t)?ye(Uint8Array,Wq.convertArray(r[n])):Bt.isBinary(t)||Bt.isFixedSizeBinary(t)?Gq(r[n]):Bt.isBool(t)?R2(r[n]):Bt.isUtf8(t)?kI(r[n].join("")):ye(Uint8Array,ye(t.ArrayType,r[n].map(i=>+i)))}};function Gq(e){const t=e.join(""),n=new Uint8Array(t.length/2);for(let r=0;r<t.length;r+=2)n[r>>1]=Number.parseInt(t.slice(r,r+2),16);return n}let Et=class extends Wt{compareSchemas(t,n){return t===n||n instanceof t.constructor&&this.compareManyFields(t.fields,n.fields)}compareManyFields(t,n){return t===n||Array.isArray(t)&&Array.isArray(n)&&t.length===n.length&&t.every((r,i)=>this.compareFields(r,n[i]))}compareFields(t,n){return t===n||n instanceof t.constructor&&t.name===n.name&&t.nullable===n.nullable&&this.visit(t.type,n.type)}};function Er(e,t){return t instanceof e.constructor}function Wp(e,t){return e===t||Er(e,t)}function Co(e,t){return e===t||Er(e,t)&&e.bitWidth===t.bitWidth&&e.isSigned===t.isSigned}function Fb(e,t){return e===t||Er(e,t)&&e.precision===t.precision}function Xq(e,t){return e===t||Er(e,t)&&e.byteWidth===t.byteWidth}function WI(e,t){return e===t||Er(e,t)&&e.unit===t.unit}function Hp(e,t){return e===t||Er(e,t)&&e.unit===t.unit&&e.timezone===t.timezone}function Gp(e,t){return e===t||Er(e,t)&&e.unit===t.unit&&e.bitWidth===t.bitWidth}function Qq(e,t){return e===t||Er(e,t)&&e.children.length===t.children.length&&Da.compareManyFields(e.children,t.children)}function Kq(e,t){return e===t||Er(e,t)&&e.children.length===t.children.length&&Da.compareManyFields(e.children,t.children)}function HI(e,t){return e===t||Er(e,t)&&e.mode===t.mode&&e.typeIds.every((n,r)=>n===t.typeIds[r])&&Da.compareManyFields(e.children,t.children)}function Zq(e,t){return e===t||Er(e,t)&&e.id===t.id&&e.isOrdered===t.isOrdered&&Da.visit(e.indices,t.indices)&&Da.visit(e.dictionary,t.dictionary)}function GI(e,t){return e===t||Er(e,t)&&e.unit===t.unit}function Jq(e,t){return e===t||Er(e,t)&&e.listSize===t.listSize&&e.children.length===t.children.length&&Da.compareManyFields(e.children,t.children)}function tW(e,t){return e===t||Er(e,t)&&e.keysSorted===t.keysSorted&&e.children.length===t.children.length&&Da.compareManyFields(e.children,t.children)}Et.prototype.visitNull=Wp;Et.prototype.visitBool=Wp;Et.prototype.visitInt=Co;Et.prototype.visitInt8=Co;Et.prototype.visitInt16=Co;Et.prototype.visitInt32=Co;Et.prototype.visitInt64=Co;Et.prototype.visitUint8=Co;Et.prototype.visitUint16=Co;Et.prototype.visitUint32=Co;Et.prototype.visitUint64=Co;Et.prototype.visitFloat=Fb;Et.prototype.visitFloat16=Fb;Et.prototype.visitFloat32=Fb;Et.prototype.visitFloat64=Fb;Et.prototype.visitUtf8=Wp;Et.prototype.visitBinary=Wp;Et.prototype.visitFixedSizeBinary=Xq;Et.prototype.visitDate=WI;Et.prototype.visitDateDay=WI;Et.prototype.visitDateMillisecond=WI;Et.prototype.visitTimestamp=Hp;Et.prototype.visitTimestampSecond=Hp;Et.prototype.visitTimestampMillisecond=Hp;Et.prototype.visitTimestampMicrosecond=Hp;Et.prototype.visitTimestampNanosecond=Hp;Et.prototype.visitTime=Gp;Et.prototype.visitTimeSecond=Gp;Et.prototype.visitTimeMillisecond=Gp;Et.prototype.visitTimeMicrosecond=Gp;Et.prototype.visitTimeNanosecond=Gp;Et.prototype.visitDecimal=Wp;Et.prototype.visitList=Qq;Et.prototype.visitStruct=Kq;Et.prototype.visitUnion=HI;Et.prototype.visitDenseUnion=HI;Et.prototype.visitSparseUnion=HI;Et.prototype.visitDictionary=Zq;Et.prototype.visitInterval=GI;Et.prototype.visitIntervalDayTime=GI;Et.prototype.visitIntervalYearMonth=GI;Et.prototype.visitFixedSizeList=Jq;Et.prototype.visitMap=tW;const Da=new Et;function eW(e,t){return Da.compareSchemas(e,t)}function Aw(e,t){return nW(e,t.map(n=>n.data.concat()))}function nW(e,t){const n=[...e.fields],r=[],i={numBatches:t.reduce((f,d)=>Math.max(f,d.length),0)};let s=0,o=0,a=-1;const l=t.length;let c,u=[];for(;i.numBatches-- >0;){for(o=Number.POSITIVE_INFINITY,a=-1;++a<l;)u[a]=c=t[a].shift(),o=Math.min(o,c?c.length:o);Number.isFinite(o)&&(u=rW(n,o,u,t,i),o>0&&(r[s++]=Vt({type:new Gn(n),length:o,nullCount:0,children:u.slice()})))}return[e=e.assign(n),r.map(f=>new Di(e,f))]}function rW(e,t,n,r,i){var s;const o=(t+63&-64)>>3;for(let a=-1,l=r.length;++a<l;){const c=n[a],u=c==null?void 0:c.length;if(u>=t)u===t?n[a]=c:(n[a]=c.slice(0,t),i.numBatches=Math.max(i.numBatches,r[a].unshift(c.slice(t,u-t))));else{const f=e[a];e[a]=f.clone({nullable:!0}),n[a]=(s=c==null?void 0:c._changeLengthAndBackfillNullBitmap(t))!==null&&s!==void 0?s:Vt({type:f.type,length:t,nullCount:t,nullBitmap:new Uint8Array(o)})}}return n}var cO;let ip=class Il{constructor(...t){var n,r;if(t.length===0)return this.batches=[],this.schema=new Le([]),this._offsets=[0],this;let i,s;t[0]instanceof Le&&(i=t.shift()),t[t.length-1]instanceof Uint32Array&&(s=t.pop());const o=l=>{if(l){if(l instanceof Di)return[l];if(l instanceof Il)return l.batches;if(l instanceof De){if(l.type instanceof Gn)return[new Di(new Le(l.type.children),l)]}else{if(Array.isArray(l))return l.flatMap(c=>o(c));if(typeof l[Symbol.iterator]=="function")return[...l].flatMap(c=>o(c));if(typeof l=="object"){const c=Object.keys(l),u=c.map(h=>new tn([l[h]])),f=new Le(c.map((h,p)=>new Xe(String(h),u[p].type))),[,d]=Aw(f,u);return d.length===0?[new Di(l)]:d}}}return[]},a=t.flatMap(l=>o(l));if(i=(r=i??((n=a[0])===null||n===void 0?void 0:n.schema))!==null&&r!==void 0?r:new Le([]),!(i instanceof Le))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const l of a){if(!(l instanceof Di))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!eW(i,l.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=i,this.batches=a,this._offsets=s??Y8(this.data)}get data(){return this.batches.map(({data:t})=>t)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((t,n)=>t+n.length,0)}get nullCount(){return this._nullCount===-1&&(this._nullCount=V8(this.data)),this._nullCount}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}getByteLength(t){return 0}[Symbol.iterator](){return this.batches.length>0?VI.visit(new tn(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(`,
  `)}
]`}concat(...t){const n=this.schema,r=this.data.concat(t.flatMap(({data:i})=>i));return new Il(n,r.map(i=>new Di(n,i)))}slice(t,n){const r=this.schema;[t,n]=z8({length:this.numRows},t,n);const i=q8(this.data,this._offsets,t,n);return new Il(r,i.map(s=>new Di(r,s)))}getChild(t){return this.getChildAt(this.schema.fields.findIndex(n=>n.name===t))}getChildAt(t){if(t>-1&&t<this.schema.fields.length){const n=this.data.map(r=>r.children[t]);if(n.length===0){const{type:r}=this.schema.fields[t],i=Vt({type:r,length:0,nullCount:0});n.push(i._changeLengthAndBackfillNullBitmap(this.numRows))}return new tn(n)}return null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=[...this.batches];if(t>-1&&t<this.numCols){n||(n=new tn([Vt({type:new Na,length:this.numRows})]));const s=r.fields.slice(),o=s[t].clone({type:n.type}),a=this.schema.fields.map((l,c)=>this.getChildAt(c));[s[t],a[t]]=[o,n],[r,i]=Aw(r,a)}return new Il(r,i)}select(t){const n=this.schema.fields.reduce((r,i,s)=>r.set(i.name,s),new Map);return this.selectAt(t.map(r=>n.get(r)).filter(r=>r>-1))}selectAt(t){const n=this.schema.selectAt(t),r=this.batches.map(i=>i.selectAt(t));return new Il(n,r)}assign(t){const n=this.schema.fields,[r,i]=t.schema.fields.reduce((a,l,c)=>{const[u,f]=a,d=n.findIndex(h=>h.name===l.name);return~d?f[d]=c:u.push(c),a},[[],[]]),s=this.schema.assign(t.schema),o=[...n.map((a,l)=>[l,i[l]]).map(([a,l])=>l===void 0?this.getChildAt(a):t.getChildAt(l)),...r.map(a=>t.getChildAt(a))].filter(Boolean);return new Il(...Aw(s,o))}};cO=Symbol.toStringTag;ip[cO]=(e=>(e.schema=null,e.batches=[],e._offsets=new Uint32Array([0]),e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,e.isValid=zu(jI),e.get=zu(br.getVisitFn(U.Struct)),e.set=W8(gi.getVisitFn(U.Struct)),e.indexOf=H8(fg.getVisitFn(U.Struct)),e.getByteLength=zu(Os.getVisitFn(U.Struct)),"Table"))(ip.prototype);var uO;let Di=class Xd{constructor(...t){switch(t.length){case 2:{if([this.schema]=t,!(this.schema instanceof Le))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=Vt({nullCount:0,type:new Gn(this.schema.fields),children:this.schema.fields.map(n=>Vt({type:n.type,nullCount:0}))})]=t,!(this.data instanceof De))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=bM(this.schema,this.data.children);break}case 1:{const[n]=t,{fields:r,children:i,length:s}=Object.keys(n).reduce((l,c,u)=>(l.children[u]=n[c],l.length=Math.max(l.length,n[c].length),l.fields[u]=Xe.new({name:c,type:n[c].type,nullable:!0}),l),{length:0,fields:new Array,children:new Array}),o=new Le(r),a=Vt({type:new Gn(r),length:s,children:i,nullCount:0});[this.schema,this.data]=bM(o,a.children,s);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=fO(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(t){return this.data.getValid(t)}get(t){return br.visit(this.data,t)}set(t,n){return gi.visit(this.data,t,n)}indexOf(t,n){return fg.visit(this.data,t,n)}getByteLength(t){return Os.visit(this.data,t)}[Symbol.iterator](){return VI.visit(new tn([this.data]))}toArray(){return[...this]}concat(...t){return new ip(this.schema,[this,...t])}slice(t,n){const[r]=new tn([this.data]).slice(t,n).data;return new Xd(this.schema,r)}getChild(t){var n;return this.getChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.schema.fields.length?new tn([this.data.children[t]]):null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=this.data;if(t>-1&&t<this.numCols){n||(n=new tn([Vt({type:new Na,length:this.numRows})]));const s=r.fields.slice(),o=i.children.slice(),a=s[t].clone({type:n.type});[s[t],o[t]]=[a,n.data[0]],r=new Le(s,new Map(this.schema.metadata)),i=Vt({type:new Gn(s),children:o})}return new Xd(r,i)}select(t){const n=this.schema.select(t),r=new Gn(n.fields),i=[];for(const s of t){const o=this.schema.fields.findIndex(a=>a.name===s);~o&&(i[o]=this.data.children[o])}return new Xd(n,Vt({type:r,length:this.numRows,children:i}))}selectAt(t){const n=this.schema.selectAt(t),r=t.map(s=>this.data.children[s]).filter(Boolean),i=Vt({type:new Gn(n.fields),length:this.numRows,children:r});return new Xd(n,i)}};uO=Symbol.toStringTag;Di[uO]=(e=>(e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(Di.prototype);function bM(e,t,n=t.reduce((r,i)=>Math.max(r,i.length),0)){var r;const i=[...e.fields],s=[...t],o=(n+63&-64)>>3;for(const[a,l]of e.fields.entries()){const c=t[a];(!c||c.length!==n)&&(i[a]=l.clone({nullable:!0}),s[a]=(r=c==null?void 0:c._changeLengthAndBackfillNullBitmap(n))!==null&&r!==void 0?r:Vt({type:l.type,length:n,nullCount:n,nullBitmap:new Uint8Array(o)}))}return[e.assign(i),Vt({type:new Gn(i),length:n,children:s})]}function fO(e,t,n=new Map){for(let r=-1,i=e.length;++r<i;){const o=e[r].type,a=t[r];if(Bt.isDictionary(o)){if(!n.has(o.id))a.dictionary&&n.set(o.id,a.dictionary);else if(n.get(o.id)!==a.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}o.children&&o.children.length>0&&fO(o.children,a.children,n)}return n}let dO=class extends Di{constructor(t){const n=t.fields.map(i=>Vt({type:i.type})),r=Vt({type:new Gn(t.fields),nullCount:0,children:n});super(t,r)}};var _g;(function(e){e[e.BUFFER=0]="BUFFER"})(_g||(_g={}));var Sg;(function(e){e[e.LZ4_FRAME=0]="LZ4_FRAME",e[e.ZSTD=1]="ZSTD"})(Sg||(Sg={}));let iW=class Tl{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBodyCompression(t,n){return(n||new Tl).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBodyCompression(t,n){return t.setPosition(t.position()+ge),(n||new Tl).__init(t.readInt32(t.position())+t.position(),t)}codec(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt8(this.bb_pos+t):Sg.LZ4_FRAME}method(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt8(this.bb_pos+t):_g.BUFFER}static startBodyCompression(t){t.startObject(2)}static addCodec(t,n){t.addFieldInt8(0,n,Sg.LZ4_FRAME)}static addMethod(t,n){t.addFieldInt8(1,n,_g.BUFFER)}static endBodyCompression(t){return t.endObject()}static createBodyCompression(t,n,r){return Tl.startBodyCompression(t),Tl.addCodec(t,n),Tl.addMethod(t,r),Tl.endBodyCompression(t)}},hO=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(t,n,r){return t.prep(8,16),t.writeInt64(r),t.writeInt64(n),t.offset()}},pO=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(t,n,r){return t.prep(8,16),t.writeInt64(r),t.writeInt64(n),t.offset()}},ro=class H2{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsRecordBatch(t,n){return(n||new H2).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsRecordBatch(t,n){return t.setPosition(t.position()+ge),(n||new H2).__init(t.readInt32(t.position())+t.position(),t)}length(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}nodes(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new pO).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}nodesLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}buffers(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new hO).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}buffersLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}compression(t){const n=this.bb.__offset(this.bb_pos,10);return n?(t||new iW).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}static startRecordBatch(t){t.startObject(4)}static addLength(t,n){t.addFieldInt64(0,n,t.createLong(0,0))}static addNodes(t,n){t.addFieldOffset(1,n,0)}static startNodesVector(t,n){t.startVector(16,n,8)}static addBuffers(t,n){t.addFieldOffset(2,n,0)}static startBuffersVector(t,n){t.startVector(16,n,8)}static addCompression(t,n){t.addFieldOffset(3,n,0)}static endRecordBatch(t){return t.endObject()}},Kc=class G2{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryBatch(t,n){return(n||new G2).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryBatch(t,n){return t.setPosition(t.position()+ge),(n||new G2).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}data(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new ro).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isDelta(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startDictionaryBatch(t){t.startObject(3)}static addId(t,n){t.addFieldInt64(0,n,t.createLong(0,0))}static addData(t,n){t.addFieldOffset(1,n,0)}static addIsDelta(t,n){t.addFieldInt8(2,+n,0)}static endDictionaryBatch(t){return t.endObject()}};var xg;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(xg||(xg={}));let Go=class ss{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMessage(t,n){return(n||new ss).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMessage(t,n){return t.setPosition(t.position()+ge),(n||new ss).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):df.V1}headerType(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):xg.NONE}header(t){const n=this.bb.__offset(this.bb_pos,8);return n?this.bb.__union(t,this.bb_pos+n):null}bodyLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new oi).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startMessage(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,df.V1)}static addHeaderType(t,n){t.addFieldInt8(1,n,xg.NONE)}static addHeader(t,n){t.addFieldOffset(2,n,0)}static addBodyLength(t,n){t.addFieldInt64(3,n,t.createLong(0,0))}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endMessage(t){return t.endObject()}static finishMessageBuffer(t,n){t.finish(n)}static finishSizePrefixedMessageBuffer(t,n){t.finish(n,void 0,!0)}static createMessage(t,n,r,i,s,o){return ss.startMessage(t),ss.addVersion(t,n),ss.addHeaderType(t,r),ss.addHeader(t,i),ss.addBodyLength(t,s),ss.addCustomMetadata(t,o),ss.endMessage(t)}};var sW=_o;let oW=class extends Wt{visit(t,n){return t==null||n==null?void 0:super.visit(t,n)}visitNull(t,n){return dM.startNull(n),dM.endNull(n)}visitInt(t,n){return _u.startInt(n),_u.addBitWidth(n,t.bitWidth),_u.addIsSigned(n,t.isSigned),_u.endInt(n)}visitFloat(t,n){return em.startFloatingPoint(n),em.addPrecision(n,t.precision),em.endFloatingPoint(n)}visitBinary(t,n){return cM.startBinary(n),cM.endBinary(n)}visitBool(t,n){return uM.startBool(n),uM.endBool(n)}visitUtf8(t,n){return pM.startUtf8(n),pM.endUtf8(n)}visitDecimal(t,n){return qc.startDecimal(n),qc.addScale(n,t.scale),qc.addPrecision(n,t.precision),qc.addBitWidth(n,t.bitWidth),qc.endDecimal(n)}visitDate(t,n){return Z0.startDate(n),Z0.addUnit(n,t.unit),Z0.endDate(n)}visitTime(t,n){return Wd.startTime(n),Wd.addUnit(n,t.unit),Wd.addBitWidth(n,t.bitWidth),Wd.endTime(n)}visitTimestamp(t,n){const r=t.timezone&&n.createString(t.timezone)||void 0;return Hd.startTimestamp(n),Hd.addUnit(n,t.unit),r!==void 0&&Hd.addTimezone(n,r),Hd.endTimestamp(n)}visitInterval(t,n){return nm.startInterval(n),nm.addUnit(n,t.unit),nm.endInterval(n)}visitList(t,n){return fM.startList(n),fM.endList(n)}visitStruct(t,n){return hM.startStruct_(n),hM.endStruct_(n)}visitUnion(t,n){_l.startTypeIdsVector(n,t.typeIds.length);const r=_l.createTypeIdsVector(n,t.typeIds);return _l.startUnion(n),_l.addMode(n,t.mode),_l.addTypeIds(n,r),_l.endUnion(n)}visitDictionary(t,n){const r=this.visit(t.indices,n);return Vc.startDictionaryEncoding(n),Vc.addId(n,new sW(t.id,0)),Vc.addIsOrdered(n,t.isOrdered),r!==void 0&&Vc.addIndexType(n,r),Vc.endDictionaryEncoding(n)}visitFixedSizeBinary(t,n){return J0.startFixedSizeBinary(n),J0.addByteWidth(n,t.byteWidth),J0.endFixedSizeBinary(n)}visitFixedSizeList(t,n){return tm.startFixedSizeList(n),tm.addListSize(n,t.listSize),tm.endFixedSizeList(n)}visitMap(t,n){return rm.startMap(n),rm.addKeysSorted(n,t.keysSorted),rm.endMap(n)}};const Mw=new oW;function aW(e,t=new Map){return new Le(cW(e,t),sm(e.customMetadata),t)}function yO(e){return new Vi(e.count,mO(e.columns),gO(e.columns))}function lW(e){return new ko(yO(e.data),e.id,e.isDelta)}function cW(e,t){return(e.fields||[]).filter(Boolean).map(n=>Xe.fromJSON(n,t))}function vM(e,t){return(e.children||[]).filter(Boolean).map(n=>Xe.fromJSON(n,t))}function mO(e){return(e||[]).reduce((t,n)=>[...t,new Wf(n.count,uW(n.VALIDITY)),...mO(n.children)],[])}function gO(e,t=[]){for(let n=-1,r=(e||[]).length;++n<r;){const i=e[n];i.VALIDITY&&t.push(new yo(t.length,i.VALIDITY.length)),i.TYPE&&t.push(new yo(t.length,i.TYPE.length)),i.OFFSET&&t.push(new yo(t.length,i.OFFSET.length)),i.DATA&&t.push(new yo(t.length,i.DATA.length)),t=gO(i.children,t)}return t}function uW(e){return(e||[]).reduce((t,n)=>t+ +(n===0),0)}function fW(e,t){let n,r,i,s,o,a;return!t||!(s=e.dictionary)?(o=_M(e,vM(e,t)),i=new Xe(e.name,o,e.nullable,sm(e.customMetadata))):t.has(n=s.id)?(r=(r=s.indexType)?wM(r):new ep,a=new uf(t.get(n),r,n,s.isOrdered),i=new Xe(e.name,a,e.nullable,sm(e.customMetadata))):(r=(r=s.indexType)?wM(r):new ep,t.set(n,o=_M(e,vM(e,t))),a=new uf(o,r,n,s.isOrdered),i=new Xe(e.name,a,e.nullable,sm(e.customMetadata))),i||null}function sm(e){return new Map(Object.entries(e||{}))}function wM(e){return new ka(e.isSigned,e.bitWidth)}function _M(e,t){const n=e.type.name;switch(n){case"NONE":return new Na;case"null":return new Na;case"binary":return new Jm;case"utf8":return new tg;case"bool":return new eg;case"list":return new og((t||[])[0]);case"struct":return new Gn(t||[]);case"struct_":return new Gn(t||[])}switch(n){case"int":{const r=e.type;return new ka(r.isSigned,r.bitWidth)}case"floatingpoint":{const r=e.type;return new np(yr[r.precision])}case"decimal":{const r=e.type;return new ng(r.scale,r.precision,r.bitWidth)}case"date":{const r=e.type;return new rg(No[r.unit])}case"time":{const r=e.type;return new rp(ee[r.unit],r.bitWidth)}case"timestamp":{const r=e.type;return new ig(ee[r.unit],r.timezone)}case"interval":{const r=e.type;return new sg($a[r.unit])}case"union":{const r=e.type;return new ag(ji[r.mode],r.typeIds||[],t||[])}case"fixedsizebinary":{const r=e.type;return new lg(r.byteWidth)}case"fixedsizelist":{const r=e.type;return new cg(r.listSize,(t||[])[0])}case"map":{const r=e.type;return new ug((t||[])[0],r.keysSorted)}}throw new Error(`Unrecognized type: "${n}"`)}var rc=_o,dW=nO,hW=ff;let xh=class Zc{constructor(t,n,r,i){this._version=n,this._headerType=r,this.body=new Uint8Array(0),i&&(this._createHeader=()=>i),this._bodyLength=typeof t=="number"?t:t.low}static fromJSON(t,n){const r=new Zc(0,ri.V4,n);return r._createHeader=pW(t,n),r}static decode(t){t=new hW(ie(t));const n=Go.getRootAsMessage(t),r=n.bodyLength(),i=n.version(),s=n.headerType(),o=new Zc(r,i,s);return o._createHeader=yW(n,s),o}static encode(t){const n=new dW;let r=-1;return t.isSchema()?r=Le.encode(n,t.header()):t.isRecordBatch()?r=Vi.encode(n,t.header()):t.isDictionaryBatch()&&(r=ko.encode(n,t.header())),Go.startMessage(n),Go.addVersion(n,ri.V4),Go.addHeader(n,r),Go.addHeaderType(n,t.headerType),Go.addBodyLength(n,new rc(t.bodyLength,0)),Go.finishMessageBuffer(n,Go.endMessage(n)),n.asUint8Array()}static from(t,n=0){if(t instanceof Le)return new Zc(0,ri.V4,he.Schema,t);if(t instanceof Vi)return new Zc(n,ri.V4,he.RecordBatch,t);if(t instanceof ko)return new Zc(n,ri.V4,he.DictionaryBatch,t);throw new Error(`Unrecognized Message header: ${t}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===he.Schema}isRecordBatch(){return this.headerType===he.RecordBatch}isDictionaryBatch(){return this.headerType===he.DictionaryBatch}},Vi=class{constructor(t,n,r){this._nodes=n,this._buffers=r,this._length=typeof t=="number"?t:t.low}get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}},ko=class{constructor(t,n,r=!1){this._data=t,this._isDelta=r,this._id=typeof n=="number"?n:n.low}get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}},yo=class{constructor(t,n){this.offset=typeof t=="number"?t:t.low,this.length=typeof n=="number"?n:n.low}},Wf=class{constructor(t,n){this.length=typeof t=="number"?t:t.low,this.nullCount=typeof n=="number"?n:n.low}};function pW(e,t){return()=>{switch(t){case he.Schema:return Le.fromJSON(e);case he.RecordBatch:return Vi.fromJSON(e);case he.DictionaryBatch:return ko.fromJSON(e)}throw new Error(`Unrecognized Message type: { name: ${he[t]}, type: ${t} }`)}}function yW(e,t){return()=>{switch(t){case he.Schema:return Le.decode(e.header(new ls));case he.RecordBatch:return Vi.decode(e.header(new ro),e.version());case he.DictionaryBatch:return ko.decode(e.header(new Kc),e.version())}throw new Error(`Unrecognized Message type: { name: ${he[t]}, type: ${t} }`)}}Xe.encode=EW;Xe.decode=IW;Xe.fromJSON=fW;Le.encode=TW;Le.decode=mW;Le.fromJSON=aW;Vi.encode=AW;Vi.decode=gW;Vi.fromJSON=yO;ko.encode=MW;ko.decode=bW;ko.fromJSON=lW;Wf.encode=$W;Wf.decode=wW;yo.encode=NW;yo.decode=vW;function mW(e,t=new Map){const n=xW(e,t);return new Le(n,om(e),t)}function gW(e,t=ri.V4){if(e.compression()!==null)throw new Error("Record batch compression not implemented");return new Vi(e.length(),_W(e),SW(e,t))}function bW(e,t=ri.V4){return new ko(Vi.decode(e.data(),t),e.id(),e.isDelta())}function vW(e){return new yo(e.offset(),e.length())}function wW(e){return new Wf(e.length(),e.nullCount())}function _W(e){const t=[];for(let n,r=-1,i=-1,s=e.nodesLength();++r<s;)(n=e.nodes(r))&&(t[++i]=Wf.decode(n));return t}function SW(e,t){const n=[];for(let r,i=-1,s=-1,o=e.buffersLength();++i<o;)(r=e.buffers(i))&&(t<ri.V4&&(r.bb_pos+=8*(i+1)),n[++s]=yo.decode(r));return n}function xW(e,t){const n=[];for(let r,i=-1,s=-1,o=e.fieldsLength();++i<o;)(r=e.fields(i))&&(n[++s]=Xe.decode(r,t));return n}function SM(e,t){const n=[];for(let r,i=-1,s=-1,o=e.childrenLength();++i<o;)(r=e.children(i))&&(n[++s]=Xe.decode(r,t));return n}function IW(e,t){let n,r,i,s,o,a;return!t||!(a=e.dictionary())?(i=IM(e,SM(e,t)),r=new Xe(e.name(),i,e.nullable(),om(e))):t.has(n=a.id().low)?(s=(s=a.indexType())?xM(s):new ep,o=new uf(t.get(n),s,n,a.isOrdered()),r=new Xe(e.name(),o,e.nullable(),om(e))):(s=(s=a.indexType())?xM(s):new ep,t.set(n,i=IM(e,SM(e,t))),o=new uf(i,s,n,a.isOrdered()),r=new Xe(e.name(),o,e.nullable(),om(e))),r||null}function om(e){const t=new Map;if(e)for(let n,r,i=-1,s=Math.trunc(e.customMetadataLength());++i<s;)(n=e.customMetadata(i))&&(r=n.key())!=null&&t.set(r,n.value());return t}function xM(e){return new ka(e.isSigned(),e.bitWidth())}function IM(e,t){const n=e.typeType();switch(n){case Oe.NONE:return new Na;case Oe.Null:return new Na;case Oe.Binary:return new Jm;case Oe.Utf8:return new tg;case Oe.Bool:return new eg;case Oe.List:return new og((t||[])[0]);case Oe.Struct_:return new Gn(t||[])}switch(n){case Oe.Int:{const r=e.type(new _u);return new ka(r.isSigned(),r.bitWidth())}case Oe.FloatingPoint:{const r=e.type(new em);return new np(r.precision())}case Oe.Decimal:{const r=e.type(new qc);return new ng(r.scale(),r.precision(),r.bitWidth())}case Oe.Date:{const r=e.type(new Z0);return new rg(r.unit())}case Oe.Time:{const r=e.type(new Wd);return new rp(r.unit(),r.bitWidth())}case Oe.Timestamp:{const r=e.type(new Hd);return new ig(r.unit(),r.timezone())}case Oe.Interval:{const r=e.type(new nm);return new sg(r.unit())}case Oe.Union:{const r=e.type(new _l);return new ag(r.mode(),r.typeIdsArray()||[],t||[])}case Oe.FixedSizeBinary:{const r=e.type(new J0);return new lg(r.byteWidth())}case Oe.FixedSizeList:{const r=e.type(new tm);return new cg(r.listSize(),(t||[])[0])}case Oe.Map:{const r=e.type(new rm);return new ug((t||[])[0],r.keysSorted())}}throw new Error(`Unrecognized type: "${Oe[n]}" (${n})`)}function TW(e,t){const n=t.fields.map(s=>Xe.encode(e,s));ls.startFieldsVector(e,n.length);const r=ls.createFieldsVector(e,n),i=t.metadata&&t.metadata.size>0?ls.createCustomMetadataVector(e,[...t.metadata].map(([s,o])=>{const a=e.createString(`${s}`),l=e.createString(`${o}`);return oi.startKeyValue(e),oi.addKey(e,a),oi.addValue(e,l),oi.endKeyValue(e)})):-1;return ls.startSchema(e),ls.addFields(e,r),ls.addEndianness(e,kW?hf.Little:hf.Big),i!==-1&&ls.addCustomMetadata(e,i),ls.endSchema(e)}function EW(e,t){let n=-1,r=-1,i=-1;const s=t.type;let o=t.typeId;Bt.isDictionary(s)?(o=s.dictionary.typeId,i=Mw.visit(s,e),r=Mw.visit(s.dictionary,e)):r=Mw.visit(s,e);const a=(s.children||[]).map(u=>Xe.encode(e,u)),l=Xr.createChildrenVector(e,a),c=t.metadata&&t.metadata.size>0?Xr.createCustomMetadataVector(e,[...t.metadata].map(([u,f])=>{const d=e.createString(`${u}`),h=e.createString(`${f}`);return oi.startKeyValue(e),oi.addKey(e,d),oi.addValue(e,h),oi.endKeyValue(e)})):-1;return t.name&&(n=e.createString(t.name)),Xr.startField(e),Xr.addType(e,r),Xr.addTypeType(e,o),Xr.addChildren(e,l),Xr.addNullable(e,!!t.nullable),n!==-1&&Xr.addName(e,n),i!==-1&&Xr.addDictionary(e,i),c!==-1&&Xr.addCustomMetadata(e,c),Xr.endField(e)}function AW(e,t){const n=t.nodes||[],r=t.buffers||[];ro.startNodesVector(e,n.length);for(const o of n.slice().reverse())Wf.encode(e,o);const i=e.endVector();ro.startBuffersVector(e,r.length);for(const o of r.slice().reverse())yo.encode(e,o);const s=e.endVector();return ro.startRecordBatch(e),ro.addLength(e,new rc(t.length,0)),ro.addNodes(e,i),ro.addBuffers(e,s),ro.endRecordBatch(e)}function MW(e,t){const n=Vi.encode(e,t.data);return Kc.startDictionaryBatch(e),Kc.addId(e,new rc(t.id,0)),Kc.addIsDelta(e,t.isDelta),Kc.addData(e,n),Kc.endDictionaryBatch(e)}function $W(e,t){return pO.createFieldNode(e,new rc(t.length,0),new rc(t.nullCount,0))}function NW(e,t){return hO.createBuffer(e,new rc(t.offset,0),new rc(t.length,0))}const kW=(()=>{const e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),new Int16Array(e)[0]===256})(),XI=e=>`Expected ${he[e]} Message in stream, but was null or length 0.`,QI=e=>`Header pointer of flatbuffer-encoded ${he[e]} Message is null or length 0.`,bO=(e,t)=>`Expected to read ${e} metadata bytes, but only read ${t}.`,vO=(e,t)=>`Expected to read ${e} bytes for message body, but only read ${t}.`;let wO=class{constructor(t){this.source=t instanceof bg?t:new bg(t)}[Symbol.iterator](){return this}next(){let t;return(t=this.readMetadataLength()).done||t.value===-1&&(t=this.readMetadataLength()).done||(t=this.readMetadata(t.value)).done?Re:t}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}readMessage(t){let n;if((n=this.next()).done)return null;if(t!=null&&n.value.headerType!==t)throw new Error(XI(t));return n.value}readMessageBody(t){if(t<=0)return new Uint8Array(0);const n=ie(this.source.read(t));if(n.byteLength<t)throw new Error(vO(t,n.byteLength));return n.byteOffset%8===0&&n.byteOffset+n.byteLength<=n.buffer.byteLength?n:n.slice()}readSchema(t=!1){const n=he.Schema,r=this.readMessage(n),i=r==null?void 0:r.header();if(t&&!i)throw new Error(QI(n));return i}readMetadataLength(){const t=this.source.read(Lb),n=t&&new ff(t),r=(n==null?void 0:n.readInt32(0))||0;return{done:r===0,value:r}}readMetadata(t){const n=this.source.read(t);if(!n)return Re;if(n.byteLength<t)throw new Error(bO(t,n.byteLength));return{done:!1,value:xh.decode(n)}}},DW=class{constructor(t,n){this.source=t instanceof vg?t:BD(t)?new wg(t,n):new vg(t)}[Symbol.asyncIterator](){return this}next(){return W(this,void 0,void 0,function*(){let t;return(t=yield this.readMetadataLength()).done||t.value===-1&&(t=yield this.readMetadataLength()).done||(t=yield this.readMetadata(t.value)).done?Re:t})}throw(t){return W(this,void 0,void 0,function*(){return yield this.source.throw(t)})}return(t){return W(this,void 0,void 0,function*(){return yield this.source.return(t)})}readMessage(t){return W(this,void 0,void 0,function*(){let n;if((n=yield this.next()).done)return null;if(t!=null&&n.value.headerType!==t)throw new Error(XI(t));return n.value})}readMessageBody(t){return W(this,void 0,void 0,function*(){if(t<=0)return new Uint8Array(0);const n=ie(yield this.source.read(t));if(n.byteLength<t)throw new Error(vO(t,n.byteLength));return n.byteOffset%8===0&&n.byteOffset+n.byteLength<=n.buffer.byteLength?n:n.slice()})}readSchema(t=!1){return W(this,void 0,void 0,function*(){const n=he.Schema,r=yield this.readMessage(n),i=r==null?void 0:r.header();if(t&&!i)throw new Error(QI(n));return i})}readMetadataLength(){return W(this,void 0,void 0,function*(){const t=yield this.source.read(Lb),n=t&&new ff(t),r=(n==null?void 0:n.readInt32(0))||0;return{done:r===0,value:r}})}readMetadata(t){return W(this,void 0,void 0,function*(){const n=yield this.source.read(t);if(!n)return Re;if(n.byteLength<t)throw new Error(bO(t,n.byteLength));return{done:!1,value:xh.decode(n)}})}},OW=class extends wO{constructor(t){super(new Uint8Array(0)),this._schema=!1,this._body=[],this._batchIndex=0,this._dictionaryIndex=0,this._json=t instanceof mM?t:new mM(t)}next(){const{_json:t}=this;if(!this._schema)return this._schema=!0,{done:!1,value:xh.fromJSON(t.schema,he.Schema)};if(this._dictionaryIndex<t.dictionaries.length){const n=t.dictionaries[this._dictionaryIndex++];return this._body=n.data.columns,{done:!1,value:xh.fromJSON(n,he.DictionaryBatch)}}if(this._batchIndex<t.batches.length){const n=t.batches[this._batchIndex++];return this._body=n.columns,{done:!1,value:xh.fromJSON(n,he.RecordBatch)}}return this._body=[],Re}readMessageBody(t){return n(this._body);function n(r){return(r||[]).reduce((i,s)=>[...i,...s.VALIDITY&&[s.VALIDITY]||[],...s.TYPE&&[s.TYPE]||[],...s.OFFSET&&[s.OFFSET]||[],...s.DATA&&[s.DATA]||[],...n(s.children)],[])}}readMessage(t){let n;if((n=this.next()).done)return null;if(t!=null&&n.value.headerType!==t)throw new Error(XI(t));return n.value}readSchema(){const t=he.Schema,n=this.readMessage(t),r=n==null?void 0:n.header();if(!n||!r)throw new Error(QI(t));return r}};const Lb=4,X2="ARROW1",Ig=new Uint8Array(X2.length);for(let e=0;e<X2.length;e+=1)Ig[e]=X2.codePointAt(e);function KI(e,t=0){for(let n=-1,r=Ig.length;++n<r;)if(Ig[n]!==e[t+n])return!1;return!0}const Xp=Ig.length,_O=Xp+Lb,BW=Xp*2+Lb;let Qp=class am extends sO{constructor(t){super(),this._impl=t}get closed(){return this._impl.closed}get schema(){return this._impl.schema}get autoDestroy(){return this._impl.autoDestroy}get dictionaries(){return this._impl.dictionaries}get numDictionaries(){return this._impl.numDictionaries}get numRecordBatches(){return this._impl.numRecordBatches}get footer(){return this._impl.isFile()?this._impl.footer:null}isSync(){return this._impl.isSync()}isAsync(){return this._impl.isAsync()}isFile(){return this._impl.isFile()}isStream(){return this._impl.isStream()}next(){return this._impl.next()}throw(t){return this._impl.throw(t)}return(t){return this._impl.return(t)}cancel(){return this._impl.cancel()}reset(t){return this._impl.reset(t),this._DOMStream=void 0,this._nodeStream=void 0,this}open(t){const n=this._impl.open(t);return Zh(n)?n.then(()=>this):this}readRecordBatch(t){return this._impl.isFile()?this._impl.readRecordBatch(t):null}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}toDOMStream(){return Kr.toDOMStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this})}toNodeStream(){return Kr.toNodeStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this},{objectMode:!0})}static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,n){throw new Error('"throughDOM" not available in this environment')}static from(t){return t instanceof am?t:O2(t)?CW(t):BD(t)?zW(t):Zh(t)?W(this,void 0,void 0,function*(){return yield am.from(yield t)}):FD(t)||OI(t)||RD(t)||DI(t)?PW(new vg(t)):UW(new bg(t))}static readAll(t){return t instanceof am?t.isSync()?TM(t):EM(t):O2(t)||ArrayBuffer.isView(t)||Ob(t)||OD(t)?TM(t):EM(t)}},Tg=class extends Qp{constructor(t){super(t),this._impl=t}readAll(){return[...this]}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return sn(this,arguments,function*(){yield K(yield*Ta(Lr(this[Symbol.iterator]())))})}},Eg=class extends Qp{constructor(t){super(t),this._impl=t}readAll(){var t,n;return W(this,void 0,void 0,function*(){const r=new Array;try{for(var i=Lr(this),s;s=yield i.next(),!s.done;){const o=s.value;r.push(o)}}catch(o){t={error:o}}finally{try{s&&!s.done&&(n=i.return)&&(yield n.call(i))}finally{if(t)throw t.error}}return r})}[Symbol.iterator](){throw new Error("AsyncRecordBatchStreamReader is not Iterable")}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}},SO=class extends Tg{constructor(t){super(t),this._impl=t}},FW=class extends Eg{constructor(t){super(t),this._impl=t}},xO=class{constructor(t=new Map){this.closed=!1,this.autoDestroy=!0,this._dictionaryIndex=0,this._recordBatchIndex=0,this.dictionaries=t}get numDictionaries(){return this._dictionaryIndex}get numRecordBatches(){return this._recordBatchIndex}isSync(){return!1}isAsync(){return!1}isFile(){return!1}isStream(){return!1}reset(t){return this._dictionaryIndex=0,this._recordBatchIndex=0,this.schema=t,this.dictionaries=new Map,this}_loadRecordBatch(t,n){const r=this._loadVectors(t,n,this.schema.fields),i=Vt({type:new Gn(this.schema.fields),length:t.length,children:r});return new Di(this.schema,i)}_loadDictionaryBatch(t,n){const{id:r,isDelta:i}=t,{dictionaries:s,schema:o}=this,a=s.get(r);if(i||!a){const l=o.dictionaries.get(r),c=this._loadVectors(t.data,n,[l]);return(a&&i?a.concat(new tn(c)):new tn(c)).memoize()}return a.memoize()}_loadVectors(t,n,r){return new lO(n,t.nodes,t.buffers,this.dictionaries).visitMany(r)}},Ag=class extends xO{constructor(t,n){super(n),this._reader=O2(t)?new OW(this._handle=t):new wO(this._handle=t)}isSync(){return!0}isStream(){return!0}[Symbol.iterator](){return this}cancel(){!this.closed&&(this.closed=!0)&&(this.reset()._reader.return(),this._reader=null,this.dictionaries=null)}open(t){return this.closed||(this.autoDestroy=TO(this,t),this.schema||(this.schema=this._reader.readSchema())||this.cancel()),this}throw(t){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.throw(t):Re}return(t){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.return(t):Re}next(){if(this.closed)return Re;let t;const{_reader:n}=this;for(;t=this._readNextMessageAndValidate();)if(t.isSchema())this.reset(t.header());else if(t.isRecordBatch()){this._recordBatchIndex++;const r=t.header(),i=n.readMessageBody(t.bodyLength);return{done:!1,value:this._loadRecordBatch(r,i)}}else if(t.isDictionaryBatch()){this._dictionaryIndex++;const r=t.header(),i=n.readMessageBody(t.bodyLength),s=this._loadDictionaryBatch(r,i);this.dictionaries.set(r.id,s)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new dO(this.schema)}):this.return()}_readNextMessageAndValidate(t){return this._reader.readMessage(t)}},Mg=class extends xO{constructor(t,n){super(n),this._reader=new DW(this._handle=t)}isAsync(){return!0}isStream(){return!0}[Symbol.asyncIterator](){return this}cancel(){return W(this,void 0,void 0,function*(){!this.closed&&(this.closed=!0)&&(yield this.reset()._reader.return(),this._reader=null,this.dictionaries=null)})}open(t){return W(this,void 0,void 0,function*(){return this.closed||(this.autoDestroy=TO(this,t),this.schema||(this.schema=yield this._reader.readSchema())||(yield this.cancel())),this})}throw(t){return W(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.throw(t):Re})}return(t){return W(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.return(t):Re})}next(){return W(this,void 0,void 0,function*(){if(this.closed)return Re;let t;const{_reader:n}=this;for(;t=yield this._readNextMessageAndValidate();)if(t.isSchema())yield this.reset(t.header());else if(t.isRecordBatch()){this._recordBatchIndex++;const r=t.header(),i=yield n.readMessageBody(t.bodyLength);return{done:!1,value:this._loadRecordBatch(r,i)}}else if(t.isDictionaryBatch()){this._dictionaryIndex++;const r=t.header(),i=yield n.readMessageBody(t.bodyLength),s=this._loadDictionaryBatch(r,i);this.dictionaries.set(r.id,s)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new dO(this.schema)}):yield this.return()})}_readNextMessageAndValidate(t){return W(this,void 0,void 0,function*(){return yield this._reader.readMessage(t)})}},IO=class extends Ag{constructor(t,n){super(t instanceof gM?t:new gM(t),n)}get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}isSync(){return!0}isFile(){return!0}open(t){if(!this.closed&&!this._footer){this.schema=(this._footer=this._readFooter()).schema;for(const n of this._footer.dictionaryBatches())n&&this._readDictionaryBatch(this._dictionaryIndex++)}return super.open(t)}readRecordBatch(t){var n;if(this.closed)return null;this._footer||this.open();const r=(n=this._footer)===null||n===void 0?void 0:n.getRecordBatch(t);if(r&&this._handle.seek(r.offset)){const i=this._reader.readMessage(he.RecordBatch);if(i!=null&&i.isRecordBatch()){const s=i.header(),o=this._reader.readMessageBody(i.bodyLength);return this._loadRecordBatch(s,o)}}return null}_readDictionaryBatch(t){var n;const r=(n=this._footer)===null||n===void 0?void 0:n.getDictionaryBatch(t);if(r&&this._handle.seek(r.offset)){const i=this._reader.readMessage(he.DictionaryBatch);if(i!=null&&i.isDictionaryBatch()){const s=i.header(),o=this._reader.readMessageBody(i.bodyLength),a=this._loadDictionaryBatch(s,o);this.dictionaries.set(s.id,a)}}}_readFooter(){const{_handle:t}=this,n=t.size-_O,r=t.readInt32(n),i=t.readAt(n-r,r);return YI.decode(i)}_readNextMessageAndValidate(t){var n;if(this._footer||this.open(),this._footer&&this._recordBatchIndex<this.numRecordBatches){const r=(n=this._footer)===null||n===void 0?void 0:n.getRecordBatch(this._recordBatchIndex);if(r&&this._handle.seek(r.offset))return this._reader.readMessage(t)}return null}},LW=class extends Mg{constructor(t,...n){const r=typeof n[0]!="number"?n.shift():void 0,i=n[0]instanceof Map?n.shift():void 0;super(t instanceof wg?t:new wg(t,r),i)}get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}isFile(){return!0}isAsync(){return!0}open(t){const n=Object.create(null,{open:{get:()=>super.open}});return W(this,void 0,void 0,function*(){if(!this.closed&&!this._footer){this.schema=(this._footer=yield this._readFooter()).schema;for(const r of this._footer.dictionaryBatches())r&&(yield this._readDictionaryBatch(this._dictionaryIndex++))}return yield n.open.call(this,t)})}readRecordBatch(t){var n;return W(this,void 0,void 0,function*(){if(this.closed)return null;this._footer||(yield this.open());const r=(n=this._footer)===null||n===void 0?void 0:n.getRecordBatch(t);if(r&&(yield this._handle.seek(r.offset))){const i=yield this._reader.readMessage(he.RecordBatch);if(i!=null&&i.isRecordBatch()){const s=i.header(),o=yield this._reader.readMessageBody(i.bodyLength);return this._loadRecordBatch(s,o)}}return null})}_readDictionaryBatch(t){var n;return W(this,void 0,void 0,function*(){const r=(n=this._footer)===null||n===void 0?void 0:n.getDictionaryBatch(t);if(r&&(yield this._handle.seek(r.offset))){const i=yield this._reader.readMessage(he.DictionaryBatch);if(i!=null&&i.isDictionaryBatch()){const s=i.header(),o=yield this._reader.readMessageBody(i.bodyLength),a=this._loadDictionaryBatch(s,o);this.dictionaries.set(s.id,a)}}})}_readFooter(){return W(this,void 0,void 0,function*(){const{_handle:t}=this;t._pending&&(yield t._pending);const n=t.size-_O,r=yield t.readInt32(n),i=yield t.readAt(n-r,r);return YI.decode(i)})}_readNextMessageAndValidate(t){return W(this,void 0,void 0,function*(){if(this._footer||(yield this.open()),this._footer&&this._recordBatchIndex<this.numRecordBatches){const n=this._footer.getRecordBatch(this._recordBatchIndex);if(n&&(yield this._handle.seek(n.offset)))return yield this._reader.readMessage(t)}return null})}},RW=class extends Ag{constructor(t,n){super(t,n)}_loadVectors(t,n,r){return new Hq(n,t.nodes,t.buffers,this.dictionaries).visitMany(r)}};function TO(e,t){return t&&typeof t.autoDestroy=="boolean"?t.autoDestroy:e.autoDestroy}function*TM(e){const t=Qp.from(e);try{if(!t.open({autoDestroy:!1}).closed)do yield t;while(!t.reset().open().closed)}finally{t.cancel()}}function EM(e){return sn(this,arguments,function*(){const n=yield K(Qp.from(e));try{if(!(yield K(n.open({autoDestroy:!1}))).closed)do yield yield K(n);while(!(yield K(n.reset().open())).closed)}finally{yield K(n.cancel())}})}function CW(e){return new Tg(new RW(e))}function UW(e){const t=e.peek(Xp+7&-8);return t&&t.byteLength>=4?KI(t)?new SO(new IO(e.read())):new Tg(new Ag(e)):new Tg(new Ag(function*(){}()))}function PW(e){return W(this,void 0,void 0,function*(){const t=yield e.peek(Xp+7&-8);return t&&t.byteLength>=4?KI(t)?new SO(new IO(yield e.read())):new Eg(new Mg(e)):new Eg(new Mg(function(){return sn(this,arguments,function*(){})}()))})}function zW(e){return W(this,void 0,void 0,function*(){const{size:t}=yield e.stat(),n=new wg(e,t);return t>=BW&&KI(yield n.readAt(0,Xp+7&-8))?new FW(new LW(n)):new Eg(new Mg(n))})}function EO(e){const t=Qp.from(e);return Zh(t)?t.then(n=>EO(n)):t.isAsync()?t.readAll().then(n=>new ip(n)):new ip(t.readAll())}function jW(e="ws://localhost:3000/"){const t=[];let n=!1,r=null,i;const s={open(){n=!0,l()},close(){for(n=!1,r=null,i=null;t.length;)t.shift().reject("Socket closed")},error(c){if(r){const{reject:u}=r;r=null,l(),u(c)}else console.error("WebSocket error: ",c)},message({data:c}){if(r){const{query:u,resolve:f,reject:d}=r;if(r=null,l(),typeof c=="string"){const h=JSON.parse(c);h.error?d(h.error):f(h)}else if(u.type==="exec")f();else if(u.type==="arrow")f(EO(c.arrayBuffer()));else throw new Error(`Unexpected socket data: ${c}`)}else console.log("WebSocket message: ",c)}};function o(){i=new WebSocket(e);for(const c in s)i.addEventListener(c,s[c])}function a(c,u,f){i==null&&o(),t.push({query:c,resolve:u,reject:f}),n&&!r&&l()}function l(){t.length&&(r=t.shift(),i.send(JSON.stringify(r.query)))}return{get connected(){return n},query(c){return new Promise((u,f)=>a(c,u,f))}}}class Oa{constructor(t,n){t&&(this.table=String(t)),n&&(this.column=n)}get columns(){return this.column?[this.column]:[]}toString(){const{table:t,column:n}=this;if(n){const r=n.startsWith("*")?n:`"${n}"`;return`${t?`${AM(t)}.`:""}${r}`}else return t?AM(t):"NULL"}}function AM(e){return e.split(".").map(n=>`"${n}"`).join(".")}function VW(e,t){return e instanceof Oa&&e.column===t}function $e(e){return typeof e=="string"?ZI(e):e}function lm(e){return typeof e=="string"?YW(e):e}function YW(e){return new Oa(e)}function ZI(e,t){return arguments.length===1&&(t=e,e=null),new Oa(e,t)}function Kp(e){switch(typeof e){case"boolean":return e?"TRUE":"FALSE";case"string":return`'${e}'`;case"number":return Number.isFinite(e)?String(e):"NULL";default:if(e==null)return"NULL";if(e instanceof Date){const t=+e;if(Number.isNaN(t))return"NULL";const n=e.getUTCFullYear(),r=e.getUTCMonth(),i=e.getUTCDate();return t===Date.UTC(n,r,i)?`MAKE_DATE(${n}, ${r+1}, ${i})`:`EPOCH_MS(${t})`}else return e instanceof RegExp?`'${e.source}'`:String(e)}}const mf=e=>typeof(e==null?void 0:e.addEventListener)=="function";function AO(e){return e instanceof Rb}class Rb{constructor(t,n,r){this._expr=Array.isArray(t)?t:[t],this._deps=n||[],this.annotate(r);const i=this._expr.filter(s=>mf(s));i.length>0?(this._params=Array.from(new Set(i)),this._params.forEach(s=>{s.addEventListener("value",()=>{var o;return qW(this,(o=this.map)==null?void 0:o.get("value"))})})):this.addEventListener=void 0}get value(){return this}get columns(){const{_params:t,_deps:n}=this;if(t){const r=new Set(t.flatMap(i=>{var o;const s=(o=i.value)==null?void 0:o.columns;return Array.isArray(s)?s:[]}));if(r.size){const i=new Set(n);return r.forEach(s=>i.add(s)),Array.from(i)}}return n}get column(){return this._deps.length?this._deps[0]:this.columns[0]}annotate(...t){return Object.assign(this,...t)}toString(){return this._expr.map(t=>mf(t)&&!AO(t)?Kp(t.value):t).join("")}addEventListener(t,n){const r=this.map||(this.map=new Map);(r.get(t)||(r.set(t,new Set),r.get(t))).add(n)}}function qW(e,t){if(t!=null&&t.size)return Promise.allSettled(Array.from(t,n=>n(e)))}function MO(e,t){const n=[e[0]],r=new Set,i=t.length;for(let s=0,o=0;s<i;){const a=t[s];mf(a)?n[++o]=a:(Array.isArray(a==null?void 0:a.columns)&&a.columns.forEach(c=>r.add(c)),n[o]+=typeof a=="string"?a:Kp(a));const l=e[++s];mf(n[o])?n[++o]=l:n[o]+=l}return{spans:n,cols:Array.from(r)}}function G(e,...t){const{spans:n,cols:r}=MO(e,t);return new Rb(n,r)}function WW(e){const t=$e(e);return G`${t} DESC NULLS LAST`.annotate({label:t==null?void 0:t.label,desc:!0})}const Zp=e=>({value:e,toString:()=>Kp(e)});function Cb(e){var t;e(this.op,this),(t=this.children)==null||t.forEach(n=>n.visit(e))}function $O(e,t){const n=t.filter(i=>i!=null).map($e),r=n.map((i,s)=>s?` ${e} `:"");return t.length&&r.push(""),G(r,...n).annotate({op:e,children:n,visit:Cb})}const ic=(...e)=>$O("AND",e.flat()),NO=(...e)=>$O("OR",e.flat()),kO=e=>t=>G`(${$e(t)} ${e})`.annotate({op:e,a:t,visit:Cb}),DO=kO("IS NULL"),$g=kO("IS NOT NULL"),Hf=e=>(t,n)=>G`(${$e(t)} ${e} ${$e(n)})`.annotate({op:e,a:t,b:n,visit:Cb}),JI=Hf("="),HW=Hf("<>"),Ng=Hf("<"),OO=Hf(">"),kg=Hf("<="),GW=Hf("IS NOT DISTINCT FROM");function XW(e,t,n,r){t=$e(t);const i=e.startsWith("NOT ")?"NOT ":"";return(n?r?G`${i}(${n[0]} <= ${t} AND ${t} < ${n[1]})`:G`(${t} ${e} ${n[0]} AND ${n[1]})`:G``).annotate({op:e,visit:Cb,field:t,range:n})}const Cr=(e,t,n)=>XW("BETWEEN",e,t,n);function Dg(e,t){return Array.from({length:e},()=>t)}function Ub(e,t){return(...n)=>{const r=n.map($e),i=t?`::${t}`:"";return(r.length?G([`${e}(`,...Dg(r.length-1,", "),`)${i}`],...r):G`${e}()${i}`).annotate({func:e,args:r})}}const QW=Ub("REGEXP_MATCHES"),KW=Ub("CONTAINS"),ZW=Ub("PREFIX"),JW=Ub("SUFFIX");class Ml extends Rb{constructor(t,n,r,i,s="",o="",a=""){let l;if(i&&!(s||o||a))l=i?G`${n} OVER "${i}"`:G`${n} OVER ()`;else{const d=s&&o?" ":"",h=(s||o)&&a?" ":"";l=G`${n} OVER (${i?`"${i}" `:""}${s}${d}${o}${h}${a})`}r&&(l=G`(${l})::${r}`);const{_expr:u,_deps:f}=l;super(u,f,{window:t,func:n,type:r,name:i,group:s,order:o,frame:a})}get basis(){return this.column}get label(){const{func:t}=this;return t.label??t.toString()}over(t){const{window:n,func:r,type:i,group:s,order:o,frame:a}=this;return new Ml(n,r,i,t,s,o,a)}partitionby(...t){const n=t.flat().filter(u=>u).map($e),r=G(["PARTITION BY ",Dg(n.length-1,", "),""],...n),{window:i,func:s,type:o,name:a,order:l,frame:c}=this;return new Ml(i,s,o,a,r,l,c)}orderby(...t){const n=t.flat().filter(u=>u).map($e),r=G(["ORDER BY ",Dg(n.length-1,", "),""],...n),{window:i,func:s,type:o,name:a,group:l,frame:c}=this;return new Ml(i,s,o,a,l,r,c)}rows(t){const n=MM("ROWS",t),{window:r,func:i,type:s,name:o,group:a,order:l}=this;return new Ml(r,i,s,o,a,l,n)}range(t){const n=MM("RANGE",t),{window:r,func:i,type:s,name:o,group:a,order:l}=this;return new Ml(r,i,s,o,a,l,n)}}function MM(e,t){if(mf(t)){const n=G`${t}`;return n.toString=()=>`${e} ${$M(t.value)}`,n}return`${e} ${$M(t)}`}function $M(e){const[t,n]=e,r=t===0?"CURRENT ROW":Number.isFinite(t)?`${Math.abs(t)} PRECEDING`:"UNBOUNDED PRECEDING",i=n===0?"CURRENT ROW":Number.isFinite(n)?`${Math.abs(n)} FOLLOWING`:"UNBOUNDED FOLLOWING";return`BETWEEN ${r} AND ${i}`}class Ih extends Rb{constructor(t,n,r,i,s){n=(n||[]).map($e);const{strings:o,exprs:a}=tH(t,n,r,i,s),{spans:l,cols:c}=MO(o,a);super(l,c,{aggregate:t,args:n,type:r,isDistinct:i,filter:s})}get basis(){return this.column}get label(){const{aggregate:t,args:n,isDistinct:r}=this,i=r?"DISTINCT"+(n.length?" ":""):"",s=n.length?`(${i}${n.map(eH).join(", ")})`:"";return`${t.toLowerCase()}${s}`}distinct(){const{aggregate:t,args:n,type:r,filter:i}=this;return new Ih(t,n,r,!0,i)}where(t){const{aggregate:n,args:r,type:i,isDistinct:s}=this;return new Ih(n,r,i,s,t)}window(){const{aggregate:t,args:n,type:r,isDistinct:i}=this,s=new Ih(t,n,null,i);return new Ml(t,s,r)}partitionby(...t){return this.window().partitionby(...t)}orderby(...t){return this.window().orderby(...t)}rows(t,n){return this.window().rows(t,n)}range(t,n){return this.window().range(t,n)}}function tH(e,t,n,r,i){const s=`)${n?`::${n}`:""}`;let o=[`${e}(${r?"DISTINCT ":""}`],a=[];return t.length?(o=o.concat([...Dg(t.length-1,", "),`${s}${i?" FILTER (WHERE ":""}`,...i?[")"]:[]]),a=[...t,...i?[i]:[]]):o[0]+="*"+s,{exprs:a,strings:o}}function eH(e){const t=Kp(e);return t&&t.startsWith('"')&&t.endsWith('"')?t.slice(1,-1):t}function _i(e,t){return(...n)=>new Ih(e,n,t)}const mr=_i("COUNT","INTEGER"),sp=_i("MAX"),op=_i("MIN"),Gf=_i("SUM","DOUBLE"),nH=_i("REGR_INTERCEPT"),rH=_i("REGR_SLOPE"),iH=_i("REGR_COUNT"),sH=_i("REGR_SYY"),oH=_i("REGR_SXX"),aH=_i("REGR_AVGX"),NM=_i("ARG_MIN"),kM=_i("ARG_MAX");function lH(e,t){const n=$e(e),r=G`CAST(${n} AS ${t})`;return Object.defineProperty(r,"label",{enumerable:!0,get(){return e.label}}),Object.defineProperty(r,"aggregate",{enumerable:!0,get(){return e.aggregate||!1}}),r}const DM=e=>lH(e,"DOUBLE"),BO=e=>{const t=$e(e);return G`(1000 * (epoch(${t}) - second(${t})) + millisecond(${t}))::DOUBLE`},cH=e=>{const t=$e(e);return G`MAKE_DATE(2012, MONTH(${t}), DAY(${t}))`.annotate({label:"date"})};class Ct{static select(...t){return new Ct().select(...t)}static from(...t){return new Ct().from(...t)}static with(...t){return new Ct().with(...t)}static union(...t){return new Ol("UNION",t.flat())}static unionAll(...t){return new Ol("UNION ALL",t.flat())}static intersect(...t){return new Ol("INTERSECT",t.flat())}static except(...t){return new Ol("EXCEPT",t.flat())}constructor(){this.query={with:[],select:[],from:[],where:[],groupby:[],having:[],window:[],qualify:[],orderby:[]}}clone(){const t=new Ct;return t.query={...this.query},t}with(...t){const{query:n}=this;if(t.length===0)return n.with;{const r=[],i=(s,o)=>{const a=o.clone();a.cteFor=this,r.push({as:s,query:a})};return t.flat().forEach(s=>{if(s!=null)if(s.as&&s.query)i(s.as,s.query);else for(const o in s)i(o,s[o])}),n.with=n.with.concat(r),this}}select(...t){const{query:n}=this;if(t.length===0)return n.select;{const r=[];for(const i of t.flat())if(i!=null)if(typeof i=="string")r.push({as:i,expr:$e(i)});else if(i instanceof Oa)r.push({as:i.column,expr:i});else if(Array.isArray(i))r.push({as:i[0],expr:i[1]});else for(const s in i)r.push({as:s0(s),expr:$e(i[s])});return n.select=n.select.concat(r),this}}$select(...t){return this.query.select=[],this.select(...t)}distinct(t=!0){return this.query.distinct=!!t,this}from(...t){const{query:n}=this;if(t.length===0)return n.from;{const r=[];return t.flat().forEach(i=>{if(i!=null)if(typeof i=="string")r.push({as:i,from:lm(i)});else if(i instanceof Oa)r.push({as:i.table,from:i});else if($w(i)||AO(i))r.push({from:i});else if(Array.isArray(i))r.push({as:s0(i[0]),from:lm(i[1])});else for(const s in i)r.push({as:s0(s),from:lm(i[s])})}),n.from=n.from.concat(r),this}}$from(...t){return this.query.from=[],this.from(...t)}sample(t,n){const{query:r}=this;if(arguments.length===0)return r.sample;{let i=t;return typeof t=="number"&&(i=t>0&&t<1?{perc:100*t,method:n}:{rows:Math.round(t),method:n}),r.sample=i,this}}where(...t){const{query:n}=this;return t.length===0?n.where:(n.where=n.where.concat(t.flat().filter(r=>r)),this)}$where(...t){return this.query.where=[],this.where(...t)}groupby(...t){const{query:n}=this;return t.length===0?n.groupby:(n.groupby=n.groupby.concat(t.flat().filter(r=>r).map($e)),this)}$groupby(...t){return this.query.groupby=[],this.groupby(...t)}having(...t){const{query:n}=this;return t.length===0?n.having:(n.having=n.having.concat(t.flat().filter(r=>r)),this)}window(...t){const{query:n}=this;if(t.length===0)return n.window;{const r=[];return t.flat().forEach(i=>{if(i!=null)for(const s in i)r.push({as:s0(s),expr:i[s]})}),n.window=n.window.concat(r),this}}qualify(...t){const{query:n}=this;return t.length===0?n.qualify:(n.qualify=n.qualify.concat(t.flat().filter(r=>r)),this)}orderby(...t){const{query:n}=this;return t.length===0?n.orderby:(n.orderby=n.orderby.concat(t.flat().filter(r=>r).map($e)),this)}limit(t){const{query:n}=this;return arguments.length===0?n.limit:(n.limit=Number.isFinite(t)?t:void 0,this)}offset(t){const{query:n}=this;return arguments.length===0?n.offset:(n.offset=Number.isFinite(t)?t:void 0,this)}get subqueries(){const{query:t,cteFor:n}=this,r=((n==null?void 0:n.query)||t).with,i=r==null?void 0:r.reduce((o,{as:a,query:l})=>(o[a]=l,o),{}),s=[];return t.from.forEach(({from:o})=>{if($w(o))s.push(o);else if(i[o.table]){const a=i[o.table];s.push(a)}}),s}toString(){const{select:t,distinct:n,from:r,sample:i,where:s,groupby:o,having:a,window:l,qualify:c,orderby:u,limit:f,offset:d,with:h}=this.query,p=[];if(h.length){const v=h.map(({as:y,query:m})=>`"${y}" AS (${m})`);p.push(`WITH ${v.join(", ")}`)}const g=t.map(({as:v,expr:y})=>VW(y,v)&&!y.table?`${y}`:`${y} AS "${v}"`);if(p.push(`SELECT${n?" DISTINCT":""} ${g.join(", ")}`),r.length){const v=r.map(({as:y,from:m})=>{const b=$w(m)?`(${m})`:`${m}`;return!y||y===m.table?b:`${b} AS "${y}"`});p.push(`FROM ${v.join(", ")}`)}if(s.length){const v=s.map(String).filter(y=>y).join(" AND ");v&&p.push(`WHERE ${v}`)}if(i){const{rows:v,perc:y,method:m,seed:b}=i,w=v?`${v} ROWS`:`${y} PERCENT`,S=m?` (${m}${b!=null?`, ${b}`:""})`:"";p.push(`USING SAMPLE ${w}${S}`)}if(o.length&&p.push(`GROUP BY ${o.join(", ")}`),a.length){const v=a.map(String).filter(y=>y).join(" AND ");v&&p.push(`HAVING ${v}`)}if(l.length){const v=l.map(({as:y,expr:m})=>`"${y}" AS (${m})`);p.push(`WINDOW ${v.join(", ")}`)}if(c.length){const v=c.map(String).filter(y=>y).join(" AND ");v&&p.push(`QUALIFY ${v}`)}return u.length&&p.push(`ORDER BY ${u.join(", ")}`),Number.isFinite(f)&&p.push(`LIMIT ${f}`),Number.isFinite(d)&&p.push(`OFFSET ${d}`),p.join(" ")}}class Ol{constructor(t,n){this.op=t,this.queries=n.map(r=>r.clone()),this.query={orderby:[]}}clone(){const t=new Ol(this.op,this.queries);return t.query={...this.query},t}orderby(...t){const{query:n}=this;return t.length===0?n.orderby:(n.orderby=n.orderby.concat(t.flat().filter(r=>r).map($e)),this)}limit(t){const{query:n}=this;return arguments.length===0?n.limit:(n.limit=Number.isFinite(t)?t:void 0,this)}offset(t){const{query:n}=this;return arguments.length===0?n.offset:(n.offset=Number.isFinite(t)?t:void 0,this)}get subqueries(){const{queries:t,cteFor:n}=this;return n&&t.forEach(r=>r.cteFor=n),t}toString(){const{op:t,queries:n,query:{orderby:r,limit:i,offset:s}}=this,o=[n.join(` ${t} `)];return r.length&&o.push(`ORDER BY ${r.join(", ")}`),Number.isFinite(i)&&o.push(`LIMIT ${i}`),Number.isFinite(s)&&o.push(`OFFSET ${s}`),o.join(" ")}}function $w(e){return e instanceof Ct||e instanceof Ol}function s0(e){return uH(e)?e.slice(1,-1):e}function uH(e){return e[0]==='"'&&e[e.length-1]==='"'}function FO(e,t,{replace:n=!1,temp:r=!0,view:i=!1}={}){return"CREATE"+(n?" OR REPLACE ":" ")+(r?"TEMP ":"")+(i?"VIEW":"TABLE")+(n?" ":" IF NOT EXISTS ")+e+" AS "+t}function fH(e,{columns:t=Object.keys((e==null?void 0:e[0])||{})}={}){let n=[];if(Array.isArray(t)?(n=t,t=n.reduce((i,s)=>(i[s]=s,i),{})):t&&(n=Object.keys(t)),!n.length)throw new Error("Can not create table from empty column set.");const r=[];for(const i of e){const s=n.map(o=>`${Kp(i[o])} AS "${t[o]}"`);r.push(`(SELECT ${s.join(", ")})`)}return r.join(" UNION ALL ")}function dH(e,t,n={}){const{select:r=["*"],...i}=n,s=fH(t),o=r.length===1&&r[0]==="*"?s:`SELECT ${r} FROM ${s}`;return FO(e,o,i)}function hH(e){switch(e){case"BIGINT":case"HUGEINT":case"INTEGER":case"SMALLINT":case"TINYINT":case"UBIGINT":case"UINTEGER":case"USMALLINT":case"UTINYINT":case"DOUBLE":case"FLOAT":case"REAL":case"DECIMAL":return"number";case"DATE":case"TIMESTAMP":case"TIMESTAMPTZ":case"TIME":return"date";case"BOOLEAN":return"boolean";case"VARCHAR":case"UUID":return"string";case"LIST":return"array";case"BLOB":case"STRUCT":case"MAP":return"object";default:throw new Error(`Unsupported type: ${e}`)}}const pH="count",yH="nulls",mH="max",gH="min",bH="distinct",vH={[pH]:mr,[bH]:e=>mr(e).distinct(),[mH]:sp,[gH]:op,[yH]:e=>mr().where(DO(e))};function wH({table:e,column:t},n){return Ct.from(e).select(n.map(r=>[r,vH[r](t)]))}const LO=()=>Object.create(null);class _H{constructor(t){this.mc=t,this.clear()}clear(){this.tables=LO()}tableInfo(t){const n=this.tables;if(n[t])return n[t];const r=SH(this.mc,t).catch(i=>{throw n[t]=null,i});return n[t]=r}async fieldInfo({table:t,column:n,stats:r}){const s=(await this.tableInfo(t))[n];if(s==null)return;if(!(r!=null&&r.length))return s;const o=await this.mc.query(wH(s,r),{persist:!0}),a={...s,...Array.from(o)[0]};for(const l in a){const c=a[l];typeof c=="bigint"&&(a[l]=Number(c))}return a}async queryFields(t){const n=await xH(this,t);return(await Promise.all(n.map(i=>this.fieldInfo(i)))).filter(i=>i)}}async function SH(e,t){const n=await e.query(`DESCRIBE ${lm(t)}`,{type:"json",cache:!1}),r=LO();for(const i of n)r[i.column_name]={table:t,column:i.column_name,sqlType:i.column_type,type:hH(i.column_type),nullable:i.null==="YES"};return r}async function xH(e,t){return t.length===1&&t[0].column==="*"?Object.values(await e.tableInfo(t[0].table)):t}function IH(e){let t=2166136261;for(let n=0,r=e.length;n<r;++n){const i=e.charCodeAt(n),s=i&65280;s&&(t=OM(t^s>>8)),t=OM(t^i&255)}return TH(t)}function OM(e){return e+(e<<1)+(e<<4)+(e<<7)+(e<<8)+(e<<24)}function TH(e){return e+=e<<13,e^=e>>>7,e+=e<<3,e^=e>>>17,e+=e<<5,e&4294967295}const RO=e=>e;class EH{constructor(t,{selection:n,temp:r=!0}){this.mc=t,this.selection=n,this.temp=r,this.reset()}reset(){this.enabled=!1,this.clients=null,this.indices=null,this.activeView=null}clear(){this.indices&&(this.mc.cancel(Array.from(this.indices.values(),t=>t.result)),this.indices=null)}index(t,n){var c,u;if(this.clients!==t){const f=Array.from(t,FM),d=(c=f[0])==null?void 0:c.from;this.enabled=f.every(h=>h&&h.from===d),this.clients=t,this.activeView=null,this.clear()}if(!this.enabled)return!1;n=n||this.selection.active;const{source:r}=n;if(r&&r===((u=this.activeView)==null?void 0:u.source))return!0;if(this.clear(),!r)return!1;const i=this.activeView=AH(n);if(!i)return!1;this.mc.logger().warn("DATA CUBE INDEX CONSTRUCTION");const s=this.selection.remove(r),o=this.indices=new Map,{mc:a,temp:l}=this;for(const f of t){if(s.skip(f,n))continue;const d=FM(f),h=f.query(s.predicate(f)).select({...i.columns,...d.count}).groupby(Object.keys(i.columns)),[p]=h.subqueries;if(p){const w=Object.values(i.columns).map(S=>S.columns[0]);NH(p,w)}const g=h.orderby();h.query.orderby=[];const v=h.toString(),m=`cube_index_${(IH(v)>>>0).toString(16)}`,b=a.exec(FO(m,v,{temp:l}));o.set(f,{table:m,result:b,order:g,...d})}}async update(){const{clients:t,selection:n,activeView:r}=this,i=r.predicate(n.active.predicate);return Promise.all(Array.from(t).map(s=>this.updateClient(s,i)))}async updateClient(t,n){const r=this.indices.get(t);if(!r)return;n||(n=this.activeView.predicate(this.selection.active.predicate));const{table:i,dims:s,aggr:o,order:a=[]}=r,l=Ct.select(s,o).from(i).groupby(s).where(n).orderby(a);return this.mc.updateClient(t,l)}}function AH(e){var l;const{source:t,schema:n}=e;let r=(l=e.predicate)==null?void 0:l.columns;if(!n||!r)return null;const{type:i,scales:s,pixelSize:o=1}=n;let a;if(i==="interval"&&s){const c=s.map(u=>MH(u,o));if(c.some(u=>u==null))return null;c.length===1?(a=u=>u?Cr("active0",u.range.map(c[0])):[],r={active0:c[0](e.predicate.field)}):(a=u=>u?ic(u.children.map(({range:f},d)=>Cr(`active${d}`,f.map(c[d])))):[],r=Object.fromEntries(e.predicate.children.map((u,f)=>[`active${f}`,c[f](u.field)])))}else if(i==="point")a=RO,r=Object.fromEntries(r.map(c=>[c.toString(),c]));else return null;return{source:t,columns:r,predicate:a}}function MH(e,t){const{type:n,domain:r,range:i}=e;let s,o;switch(n){case"linear":s=RO,o=$e;break;case"log":s=Math.log,o=a=>G`LN(${$e(a)})`;break;case"symlog":s=a=>Math.sign(a)*Math.log1p(Math.abs(a)),o=a=>(a=$e(a),G`SIGN(${a}) * LN(1 + ABS(${a}))`);break;case"sqrt":s=Math.sqrt,o=a=>G`SQRT(${$e(a)})`;break;case"utc":case"time":s=a=>+a,o=a=>a instanceof Date?+a:BO($e(a));break}return s?$H(r,i,t,s,o):null}function $H(e,t,n,r,i){const s=r(Math.min(e[0],e[1])),o=r(Math.max(e[0],e[1])),a=Math.abs(r(t[1])-r(t[0]))/(o-s)/n,l=n===1?"":`${n}::INTEGER * `;return c=>G`${l}FLOOR(${a}::DOUBLE * (${i(c)} - ${s}::DOUBLE))::INTEGER`}const BM={from:NaN};function FM(e){if(!e.filterIndexable)return BM;const t=e.query(),n=Q2(t);if(!n||!t.groupby)return BM;const r=new Set(t.groupby().map(a=>a.column)),i=[],s=[];let o;for(const{as:a,expr:{aggregate:l}}of t.select())switch(l==null?void 0:l.toUpperCase()){case"COUNT":case"SUM":i.push({[a]:G`SUM("${a}")::DOUBLE`});break;case"AVG":o="_count_",i.push({[a]:G`(SUM("${a}" * ${o}) / SUM(${o}))::DOUBLE`});break;case"MAX":i.push({[a]:G`MAX("${a}")`});break;case"MIN":i.push({[a]:G`MIN("${a}")`});break;default:if(r.has(a))s.push(a);else return null}return{aggr:i,dims:s,count:o?{[o]:G`COUNT(*)`}:{},from:n}}function Q2(e){const t=e.subqueries;if(e.select){const r=e.from();if(!r.length)return;if(t.length===0)return r[0].from.table}const n=Q2(t[0]);for(let r=1;r<t.length;++r){const i=Q2(t[r]);if(i!==void 0&&i!==n)return NaN}return n}function NH(e,t){const n=new Set,r=i=>{n.has(i)||(n.add(i),i.select&&i.from().length&&i.select(t),i.subqueries.forEach(r))};r(e)}class kH{constructor(t,n,r=!0){this.mc=t,this.selection=n,this.clients=new Set,this.indexer=r?new EH(this.mc,{...r,selection:n}):null;const{value:i,activate:s}=this.handlers={value:()=>this.update(),activate:o=>{var a;return(a=this.indexer)==null?void 0:a.index(this.clients,o)}};n.addEventListener("value",i),n.addEventListener("activate",s)}finalize(){const{value:t,activate:n}=this.handlers;this.selection.removeEventListener("value",t),this.selection.removeEventListener("activate",n)}reset(){var t;(t=this.indexer)==null||t.reset()}add(t){return(this.clients=new Set(this.clients)).add(t),this}remove(t){return this.clients.has(t)&&(this.clients=new Set(this.clients)).delete(t),this}update(){const{mc:t,indexer:n,clients:r,selection:i}=this;return n!=null&&n.index(r)?n.update():DH(t,r,i)}}function DH(e,t,n){return Promise.all(Array.from(t).map(r=>{const i=n.predicate(r);if(i!=null)return e.updateClient(r,r.query(i))}))}function CO(){let e,t;const n=new Promise((r,i)=>{e=r,t=i});return n.fulfill=r=>(e(r),n),n.reject=r=>(t(r),n),n}function OH(e,t,n){let r=[],i=0;function s(){const o=BH(r,t);r=[],i=0;for(const a of o)LH(a,e,n),UH(a,t)}return{add(o,a){o.request.type==="arrow"?(i=i||requestAnimationFrame(()=>s()),r.push({entry:o,priority:a,index:r.length})):e(o,a)}}}function BH(e,t){const n=[],r=new Map;for(const i of e){const{entry:{request:s}}=i,o=FH(s.query,t);if(!r.has(o)){const a=[];n.push(a),r.set(o,a)}r.get(o).push(i)}return n}function FH(e,t){const n=`${e}`;if(e instanceof Ct&&!t.get(n)){if(e.orderby().length||e.where().length||e.qualify().length||e.having().length)return n;const r=e.clone().$select("*"),i=e.groupby();if(i.length){const s={};e.select().forEach(({as:o,expr:a})=>s[o]=a),r.$groupby(i.map(o=>o instanceof Oa&&s[o.column]||o))}return`${r}`}else return n}function LH(e,t,n){if(RH(e))t({request:{type:"arrow",cache:!1,record:!1,query:CH(e,n)},result:e.result=CO()});else for(const{entry:r,priority:i}of e)t(r,i)}function RH(e){if(e.length>1){const t=`${e[0].entry.request.query}`;for(let n=1;n<e.length;++n)if(t!==`${e[n].entry.request.query}`)return!0}return!1}function CH(e,t){const n=e.maps=[],r=new Map;for(const o of e){const{query:a}=o.entry.request,l=[];n.push(l);for(const{as:c,expr:u}of a.select()){const f=`${u}`;r.has(f)||r.set(f,[`col${r.size}`,u]);const[d]=r.get(f);l.push([d,c])}t(`${a}`)}const i=e[0].entry.request.query.clone(),s=i.groupby();if(s.length){const o={};e.maps[0].forEach(([a,l])=>o[l]=a),i.$groupby(s.map(a=>a instanceof Oa&&o[a.column]||a))}return i.$select(Array.from(r.values()))}async function UH(e,t){const{maps:n,result:r}=e;if(!n)return;let i;try{i=await r}catch(s){for(const{entry:o}of e)o.result.reject(s);return}e.forEach(({entry:s},o)=>{const{request:a,result:l}=s,c=PH(i,n[o]);a.cache&&t.set(String(a.query),c),l.fulfill(c)})}function PH(e,t){if(t){const n={};for(const[r,i]of t)n[i]=e.getChild(r);return new e.constructor(n)}else return e}const zH=typeof requestIdleCallback<"u"?requestIdleCallback:setTimeout,jH=()=>({get:()=>{},set:(e,t)=>t,clear:()=>{}});function VH({max:e=1e3,ttl:t=3*60*60*1e3}={}){let n=new Map;function r(){const i=performance.now()-t;let s=null,o=1/0;for(const[a,l]of n){const{last:c}=l;c<o&&(s=a,o=c),i>c&&n.delete(a)}s&&n.delete(s)}return{get(i){const s=n.get(i);if(s)return s.last=performance.now(),s.value},set(i,s){return n.set(i,{last:performance.now(),value:s}),n.size>e&&zH(r),s},clear(){n=new Map}}}function YH(e){const t=Array.from({length:e},()=>({head:null,tail:null}));return{isEmpty(){return t.every(n=>!n.head)},insert(n,r){const i=t[r];if(!i)throw new Error(`Invalid queue priority rank: ${r}`);const s={item:n,next:null};i.head===null?i.head=i.tail=s:i.tail=i.tail.next=s},remove(n){for(const r of t){let{head:i,tail:s}=r;for(let o=null,a=i;a;o=a,a=a.next)n(a.item)&&(a===i?i=a.next:o.next=a.next,a===s&&(s=o||i));r.head=i,r.tail=s}},next(){for(const n of t){const{head:r}=n;if(r!==null)return n.head=r.next,n.tail===r&&(n.tail=null),r.item}}}}const ra={High:0,Normal:1,Low:2};function qH(){const e=YH(3);let t,n,r,i=[],s=null,o;function a(){if(s||e.isEmpty())return;const{request:f,result:d}=e.next();s=u(f,d),s.finally(()=>{s=null,a()})}function l(f,d=ra.Normal){e.insert(f,d),a()}function c(f){i.length&&f&&i.forEach(d=>d.add(f))}async function u(f,d){try{const{query:h,type:p,cache:g=!1,record:v=!0,options:y}=f,m=h?`${h}`:null;if(v&&c(m),g){const S=n.get(m);if(S){r.debug("Cache"),d.fulfill(S);return}}const b=performance.now(),w=await t.query({type:p,sql:m,...y});g&&n.set(m,w),r.debug(`Request: ${(performance.now()-b).toFixed(1)}`),d.fulfill(w)}catch(h){d.reject(h)}}return{cache(f){return f!==void 0?n=f===!0?VH():f||jH():n},logger(f){return f?r=f:r},connector(f){return f?t=f:t},consolidate(f){f&&!o?o=OH(l,n,c):!f&&o&&(o=null)},request(f,d=ra.Normal){const h=CO(),p={request:f,result:h};return o?o.add(p,d):l(p,d),h},cancel(f){const d=new Set(f);e.remove(({result:h})=>d.has(h))},clear(){e.remove(({result:f})=>(f.reject("Cleared"),!0))},record(){let f=[];const d={add(h){f.push(h)},reset(){f=[]},snapshot(){return f.slice()},stop(){return i=i.filter(h=>h!==d),f}};return i.push(d),d}}}function WH(){return{debug(){},info(){},log(){},warn(){},error(){}}}let o0;function vr(e){return e?o0=e:o0==null&&(o0=new HH),o0}class HH{constructor(t=jW(),n={}){this.catalog=new _H(this),this.manager=n.manager||qH(),this.logger(n.logger||console),this.configure(n),this.databaseConnector(t),this.clear()}logger(t){return arguments.length&&(this._logger=t||WH(),this.manager.logger(this._logger)),this._logger}configure({cache:t=!0,consolidate:n=!0,indexes:r=!0}){this.manager.cache(t),this.manager.consolidate(n),this.indexes=r}clear({clients:t=!0,cache:n=!0,catalog:r=!1}={}){var i,s;this.manager.clear(),t&&((i=this.clients)==null||i.forEach(o=>this.disconnect(o)),(s=this.filterGroups)==null||s.forEach(o=>o.finalize()),this.clients=new Set,this.filterGroups=new Map),n&&this.manager.cache().clear(),r&&this.catalog.clear()}databaseConnector(t){return this.manager.connector(t)}cancel(t){this.manager.cancel(t)}exec(t,{priority:n=ra.Normal}={}){return this.manager.request({type:"exec",query:t},n)}query(t,{type:n="arrow",cache:r=!0,priority:i=ra.Normal,...s}={}){return this.manager.request({type:n,query:t,cache:r,options:s},i)}prefetch(t,n={}){return this.query(t,{...n,cache:!0,priority:ra.Low})}createBundle(t,n,r=ra.Low){const i={name:t,queries:n};return this.manager.request({type:"create-bundle",options:i},r)}loadBundle(t,n=ra.High){const r={name:t};return this.manager.request({type:"load-bundle",options:r},n)}updateClient(t,n,r=ra.Normal){return t.queryPending(),this.query(n,{priority:r}).then(i=>t.queryResult(i).update(),i=>{t.queryError(i),this._logger.error(i)})}requestQuery(t,n){var r;return(r=this.filterGroups.get(t.filterBy))==null||r.reset(),n?this.updateClient(t,n):t.update()}async connect(t){const{catalog:n,clients:r,filterGroups:i,indexes:s}=this;if(r.has(t))throw new Error("Client already connected.");r.add(t);const o=t.fields();o!=null&&o.length&&t.fieldInfo(await n.queryFields(o));const a=t.filterBy;if(a)if(i.has(a))i.get(a).add(t);else{const l=new kH(this,a,s);i.set(a,l.add(t))}t.requestQuery()}disconnect(t){var i;const{clients:n,filterGroups:r}=this;n.has(t)&&(n.delete(t),(i=r.get(t.filterBy))==null||i.remove(t))}}const LM={};function UO(e,t=!1){let n,r,i=LM;function s(c){n=e(c).then(()=>{if(r){const{value:u}=r;r=null,s(u)}else n=null})}function o(c){r={event:c}}function a(c){n?o(c):s(c)}function l(c){i!==c&&requestAnimationFrame(()=>{const u=i;i=LM,a(u)}),i=c}return t?l:a}class Jp{constructor(t){this._filterBy=t,this._requestUpdate=UO(()=>this.requestQuery(),!0)}get filterBy(){return this._filterBy}get filterIndexable(){return!0}fields(){return null}fieldInfo(){return this}query(){return null}queryPending(){return this}queryResult(){return this}queryError(t){return console.error(t),this}requestQuery(t){var r;const n=t||this.query((r=this.filterBy)==null?void 0:r.predicate(this));return vr().requestQuery(this,n)}requestUpdate(){this._requestUpdate()}update(){return this}}class GH{constructor(){this._callbacks=new Map}addEventListener(t,n){this._callbacks.has(t)||this._callbacks.set(t,{callbacks:new Set,pending:null,queue:new XH}),this._callbacks.get(t).callbacks.add(n)}removeEventListener(t,n){const r=this._callbacks.get(t);r&&r.callbacks.delete(n)}willEmit(t,n){return n}emitQueueFilter(){return null}cancel(t){const n=this._callbacks.get(t);n==null||n.queue.clear()}emit(t,n){const r=this._callbacks.get(t)||{};if(r.pending)r.queue.enqueue(n,this.emitQueueFilter(t,n));else{const i=this.willEmit(t,n),{callbacks:s,queue:o}=r;if(s!=null&&s.size){const a=Promise.allSettled(Array.from(s,l=>l(i))).then(()=>{r.pending=null,o.isEmpty()||this.emit(t,o.dequeue())});r.pending=a}}}}class XH{constructor(){this.clear()}clear(){this.next=null}isEmpty(){return!this.next}enqueue(t,n){const r={value:t};if(n&&this.next){let i=this;for(;i.next;)n(i.next.value)?i=i.next:i.next=i.next.next;i.next=r}else this.next=r}dequeue(){const{next:t}=this;return this.next=t==null?void 0:t.next,t==null?void 0:t.value}}function PO(e,t){return e===t?!1:e instanceof Date&&t instanceof Date?+e!=+t:Array.isArray(e)&&Array.isArray(t)?QH(e,t):!0}function QH(e,t){if(e.length!==t.length)return!0;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!0;return!1}function Ea(e){return e instanceof gr}class gr extends GH{constructor(t){super(),this._value=t}static value(t){return new gr(t)}static array(t){if(t.some(n=>Ea(n))){const n=new gr,r=()=>n.update(t.map(i=>Ea(i)?i.value:i));return r(),t.forEach(i=>Ea(i)?i.addEventListener("value",r):0),n}return new gr(t)}get value(){return this._value}update(t,{force:n}={}){return PO(this._value,t)||n?this.emit("value",t):this.cancel("value"),this}willEmit(t,n){return t==="value"&&(this._value=n),n}}function sc(e){return e instanceof Ba}let Ba=class Jc extends gr{static intersect({cross:t=!1}={}){return new Jc(new xd({cross:t}))}static union({cross:t=!1}={}){return new Jc(new xd({cross:t,union:!0}))}static single({cross:t=!1}={}){return new Jc(new xd({cross:t,single:!0}))}static crossfilter(){return new Jc(new xd({cross:!0}))}constructor(t=new xd){super([]),this._resolved=this._value,this._resolver=t}clone(){const t=new Jc(this._resolver);return t._value=t._resolved=this._value,t}remove(t){const n=this.clone();return n._value=n._resolved=n._resolver.resolve(this._resolved,{source:t}),n._value.active={source:t},n}get active(){return this.clauses.active}get value(){var t;return(t=this.active)==null?void 0:t.value}get clauses(){return super.value}get single(){return this._resolver.single}activate(t){this.emit("activate",t)}update(t){return this._resolved=this._resolver.resolve(this._resolved,t,!0),this._resolved.active=t,super.update(this._resolved)}willEmit(t,n){return t==="value"?(this._value=n,this.value):n}emitQueueFilter(t,n){return t==="value"?this._resolver.queueFilter(n):null}skip(t,n){return this._resolver.skip(t,n)}predicate(t,n=!1){const{clauses:r}=this,i=n?null:r.active;return this._resolver.predicate(r,i,t)}};class xd{constructor({union:t,cross:n,single:r}={}){this.union=!!t,this.cross=!!n,this.single=!!r}resolve(t,n,r=!1){const{source:i,predicate:s}=n,o=t.filter(l=>i!==l.source),a=this.single?[]:o;return this.single&&r&&o.forEach(l=>{var c,u;return(u=(c=l.source)==null?void 0:c.reset)==null?void 0:u.call(c)}),s&&a.push(n),a}skip(t,n){var r;return this.cross&&((r=n==null?void 0:n.clients)==null?void 0:r.has(t))}predicate(t,n,r){const{union:i}=this;if(this.skip(r,n))return;const s=t.filter(o=>!this.skip(r,o)).map(o=>o.predicate);return i&&s.length>1?NO(s):s}queueFilter(t){var n;if(this.cross){const r=(n=t.active)==null?void 0:n.source;return i=>{var s;return((s=i.active)==null?void 0:s.source)!==r}}}}const Nw=2,ms=4,uo=4,ae=4,ia=new Int32Array(2),RM=new Float32Array(ia.buffer),CM=new Float64Array(ia.buffer),a0=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;var K2;(function(e){e[e.UTF8_BYTES=1]="UTF8_BYTES",e[e.UTF16_STRING=2]="UTF16_STRING"})(K2||(K2={}));let gf=class zO{constructor(t){this.bytes_=t,this.position_=0,this.text_decoder_=new TextDecoder}static allocate(t){return new zO(new Uint8Array(t))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(t){this.position_=t}capacity(){return this.bytes_.length}readInt8(t){return this.readUint8(t)<<24>>24}readUint8(t){return this.bytes_[t]}readInt16(t){return this.readUint16(t)<<16>>16}readUint16(t){return this.bytes_[t]|this.bytes_[t+1]<<8}readInt32(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}readUint32(t){return this.readInt32(t)>>>0}readInt64(t){return BigInt.asIntN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readUint64(t){return BigInt.asUintN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readFloat32(t){return ia[0]=this.readInt32(t),RM[0]}readFloat64(t){return ia[a0?0:1]=this.readInt32(t),ia[a0?1:0]=this.readInt32(t+4),CM[0]}writeInt8(t,n){this.bytes_[t]=n}writeUint8(t,n){this.bytes_[t]=n}writeInt16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeUint16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeInt32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeUint32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeInt64(t,n){this.writeInt32(t,Number(BigInt.asIntN(32,n))),this.writeInt32(t+4,Number(BigInt.asIntN(32,n>>BigInt(32))))}writeUint64(t,n){this.writeUint32(t,Number(BigInt.asUintN(32,n))),this.writeUint32(t+4,Number(BigInt.asUintN(32,n>>BigInt(32))))}writeFloat32(t,n){RM[0]=n,this.writeInt32(t,ia[0])}writeFloat64(t,n){CM[0]=n,this.writeInt32(t,ia[a0?0:1]),this.writeInt32(t+4,ia[a0?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+ms+uo)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let t="";for(let n=0;n<uo;n++)t+=String.fromCharCode(this.readInt8(this.position_+ms+n));return t}__offset(t,n){const r=t-this.readInt32(t);return n<this.readInt16(r)?this.readInt16(r+n):0}__union(t,n){return t.bb_pos=n+this.readInt32(n),t.bb=this,t}__string(t,n){t+=this.readInt32(t);const r=this.readInt32(t);t+=ms;const i=this.bytes_.subarray(t,t+r);return n===K2.UTF8_BYTES?i:this.text_decoder_.decode(i)}__union_with_string(t,n){return typeof t=="string"?this.__string(n):this.__union(t,n)}__indirect(t){return t+this.readInt32(t)}__vector(t){return t+this.readInt32(t)+ms}__vector_len(t){return this.readInt32(t+this.readInt32(t))}__has_identifier(t){if(t.length!=uo)throw new Error("FlatBuffers: file identifier must be length "+uo);for(let n=0;n<uo;n++)if(t.charCodeAt(n)!=this.readInt8(this.position()+ms+n))return!1;return!0}createScalarList(t,n){const r=[];for(let i=0;i<n;++i){const s=t(i);s!==null&&r.push(s)}return r}createObjList(t,n){const r=[];for(let i=0;i<n;++i){const s=t(i);s!==null&&r.push(s.unpack())}return r}},jO=class VO{constructor(t){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null,this.text_encoder=new TextEncoder;let n;t?n=t:n=1024,this.bb=gf.allocate(n),this.space=n}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(t){this.force_defaults=t}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(t,n){t>this.minalign&&(this.minalign=t);const r=~(this.bb.capacity()-this.space+n)+1&t-1;for(;this.space<r+t+n;){const i=this.bb.capacity();this.bb=VO.growByteBuffer(this.bb),this.space+=this.bb.capacity()-i}this.pad(r)}pad(t){for(let n=0;n<t;n++)this.bb.writeInt8(--this.space,0)}writeInt8(t){this.bb.writeInt8(this.space-=1,t)}writeInt16(t){this.bb.writeInt16(this.space-=2,t)}writeInt32(t){this.bb.writeInt32(this.space-=4,t)}writeInt64(t){this.bb.writeInt64(this.space-=8,t)}writeFloat32(t){this.bb.writeFloat32(this.space-=4,t)}writeFloat64(t){this.bb.writeFloat64(this.space-=8,t)}addInt8(t){this.prep(1,0),this.writeInt8(t)}addInt16(t){this.prep(2,0),this.writeInt16(t)}addInt32(t){this.prep(4,0),this.writeInt32(t)}addInt64(t){this.prep(8,0),this.writeInt64(t)}addFloat32(t){this.prep(4,0),this.writeFloat32(t)}addFloat64(t){this.prep(8,0),this.writeFloat64(t)}addFieldInt8(t,n,r){(this.force_defaults||n!=r)&&(this.addInt8(n),this.slot(t))}addFieldInt16(t,n,r){(this.force_defaults||n!=r)&&(this.addInt16(n),this.slot(t))}addFieldInt32(t,n,r){(this.force_defaults||n!=r)&&(this.addInt32(n),this.slot(t))}addFieldInt64(t,n,r){(this.force_defaults||n!==r)&&(this.addInt64(n),this.slot(t))}addFieldFloat32(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat32(n),this.slot(t))}addFieldFloat64(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat64(n),this.slot(t))}addFieldOffset(t,n,r){(this.force_defaults||n!=r)&&(this.addOffset(n),this.slot(t))}addFieldStruct(t,n,r){n!=r&&(this.nested(n),this.slot(t))}nested(t){if(t!=this.offset())throw new TypeError("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new TypeError("FlatBuffers: object serialization must not be nested.")}slot(t){this.vtable!==null&&(this.vtable[t]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(t){const n=t.capacity();if(n&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const r=n<<1,i=gf.allocate(r);return i.setPosition(r-n),i.bytes().set(t.bytes(),r-n),i}addOffset(t){this.prep(ms,0),this.writeInt32(this.offset()-t+ms)}startObject(t){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=t;for(let n=0;n<t;n++)this.vtable[n]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const t=this.offset();let n=this.vtable_in_use-1;for(;n>=0&&this.vtable[n]==0;n--);const r=n+1;for(;n>=0;n--)this.addInt16(this.vtable[n]!=0?t-this.vtable[n]:0);const i=2;this.addInt16(t-this.object_start);const s=(r+i)*Nw;this.addInt16(s);let o=0;const a=this.space;t:for(n=0;n<this.vtables.length;n++){const l=this.bb.capacity()-this.vtables[n];if(s==this.bb.readInt16(l)){for(let c=Nw;c<s;c+=Nw)if(this.bb.readInt16(a+c)!=this.bb.readInt16(l+c))continue t;o=this.vtables[n];break}}return o?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,o-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t}finish(t,n,r){const i=r?ae:0;if(n){const s=n;if(this.prep(this.minalign,ms+uo+i),s.length!=uo)throw new TypeError("FlatBuffers: file identifier must be length "+uo);for(let o=uo-1;o>=0;o--)this.writeInt8(s.charCodeAt(o))}this.prep(this.minalign,ms+i),this.addOffset(t),i&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(t,n){this.finish(t,n,!0)}requiredField(t,n){const r=this.bb.capacity()-t,i=r-this.bb.readInt32(r);if(!(n<this.bb.readInt16(i)&&this.bb.readInt16(i+n)!=0))throw new TypeError("FlatBuffers: field "+n+" must be set")}startVector(t,n,r){this.notNested(),this.vector_num_elems=n,this.prep(ms,t*n),this.prep(r,t*n)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(t){if(!t)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(t))return this.string_maps.get(t);const n=this.createString(t);return this.string_maps.set(t,n),n}createString(t){if(t==null)return 0;let n;t instanceof Uint8Array?n=t:n=this.text_encoder.encode(t),this.addInt8(0),this.startVector(1,n.length,1),this.bb.setPosition(this.space-=n.length);for(let r=0,i=this.space,s=this.bb.bytes();r<n.length;r++)s[i++]=n[r];return this.endVector()}createObjectOffset(t){return t===null?0:typeof t=="string"?this.createString(t):t.pack(this)}createObjectOffsetList(t){const n=[];for(let r=0;r<t.length;++r){const i=t[r];if(i!==null)n.push(this.createObjectOffset(i));else throw new TypeError("FlatBuffers: Argument for createObjectOffsetList cannot contain null.")}return n}createStructOffsetList(t,n){return n(this,t.length),this.createObjectOffsetList(t.slice().reverse()),this.endVector()}};function KH(){const e=new Set;let t,n=new Promise(r=>t=r);return{pending(r){e.add(r)},ready(r){return e.delete(r),e.size===0},resolve(){n=new Promise(r=>{t(),t=r})},get promise(){return n}}}function Pb(e,t){const n=new e(t);return vr().connect(n),n.element}const ZH=e=>e&&typeof e=="object"&&!Array.isArray(e),JH=e=>Pb(tG,e);class tG extends Jp{constructor({element:t,filterBy:n,from:r,column:i,label:s=i,format:o=u=>u,options:a,value:l,as:c}={}){var f,d,h,p;super(n),this.from=r,this.column=i,this.selection=c,this.format=o,this.element=t??document.createElement("div"),this.element.setAttribute("class","input"),this.element.value=this;const u=document.createElement("label");u.innerText=s||i,this.element.appendChild(u),this.select=document.createElement("select"),a&&(this.data=a.map(g=>ZH(g)?g:{value:g}),this.update()),l=l??((f=this.selection)==null?void 0:f.value)??((h=(d=this.data)==null?void 0:d[0])==null?void 0:h.value),((p=this.selection)==null?void 0:p.value)===void 0&&this.publish(l),this.element.appendChild(this.select),this.selection&&(this.select.addEventListener("input",()=>{this.publish(this.selectedValue()??null)}),sc(this.selection)||this.selection.addEventListener("value",g=>{g!==this.select.value&&this.selectedValue(g)}))}selectedValue(t){var n;if(arguments.length===0){const r=this.select.selectedIndex;return this.data[r].value}else{const r=(n=this.data)==null?void 0:n.findIndex(i=>i.value===t);r>=0?this.select.selectedIndex=r:this.select.value=String(t)}}reset(){this.select.selectedIndex=this.from?0:-1}publish(t){const{selection:n,column:r}=this;sc(n)?n.update({source:this,schema:{type:"point"},value:t,predicate:t?JI(r,Zp(t)):null}):Ea(n)&&n.update(t)}query(t=[]){const{from:n,column:r}=this;return n?Ct.from(n).select({value:r}).distinct().where(t).orderby(r):null}queryResult(t){return this.data=[{value:"",label:"All"},...t],this}update(){var i;const{data:t,format:n,select:r}=this;r.replaceChildren();for(const{value:s,label:o}of t){const a=document.createElement("option");a.setAttribute("value",s),a.innerText=o??n(s),this.select.appendChild(a)}return this.selection&&this.selectedValue(((i=this.selection)==null?void 0:i.value)??""),this}}const eG={contains:KW,prefix:ZW,suffix:JW,regexp:QW};let nG=0;const rG=e=>Pb(iG,e);class iG extends Jp{constructor({element:t,filterBy:n,from:r,column:i,label:s,type:o="contains",as:a}={}){if(super(n),this.id="search_"+ ++nG,this.type=o,this.from=r,this.column=i,this.selection=a,this.element=t??document.createElement("div"),this.element.setAttribute("class","input"),this.element.value=this,s){const l=document.createElement("label");l.setAttribute("for",this.id),l.innerText=s,this.element.appendChild(l)}this.searchbox=document.createElement("input"),this.searchbox.setAttribute("id",this.id),this.searchbox.setAttribute("type","text"),this.searchbox.setAttribute("placeholder","Query"),this.element.appendChild(this.searchbox),this.selection&&(this.searchbox.addEventListener("input",()=>{this.publish(this.searchbox.value||null)}),sc(this.selection)||this.selection.addEventListener("value",l=>{l!==this.searchbox.value&&(this.searchbox.value=l)}))}reset(){this.searchbox.value=""}publish(t){const{selection:n,column:r,type:i}=this;sc(n)?n.update({source:this,schema:{type:i},value:t,predicate:t?eG[i](r,Zp(t)):null}):Ea(n)&&n.update(t)}query(t=[]){const{from:n,column:r}=this;return n?Ct.from(n).select({list:r}).distinct().where(t):null}queryResult(t){return this.data=t,this}update(){const t=document.createElement("datalist"),n=`${this.id}_list`;t.setAttribute("id",n);for(const r of this.data){const i=document.createElement("option");i.setAttribute("value",r.list),t.append(i)}return this.datalist&&this.datalist.remove(),this.element.appendChild(this.datalist=t),this.searchbox.setAttribute("list",n),this}}let sG=0;const Z2=e=>Pb(oG,e);class oG extends Jp{constructor({element:t,filterBy:n,as:r,min:i,max:s,step:o,from:a,column:l,label:c=l,value:u=r==null?void 0:r.value,width:f}={}){var d;if(super(n),this.id="slider_"+ ++sG,this.from=a,this.column=l||"value",this.selection=r,this.min=i,this.max=s,this.step=o,this.element=t||document.createElement("div"),this.element.setAttribute("class","input"),this.element.value=this,c){const h=document.createElement("label");h.setAttribute("for",this.id),h.innerText=c,this.element.appendChild(h)}this.slider=document.createElement("input"),this.slider.setAttribute("id",this.id),this.slider.setAttribute("type","range"),f!=null&&(this.slider.style.width=`${+f}px`),i!=null&&this.slider.setAttribute("min",i),s!=null&&this.slider.setAttribute("max",s),o!=null&&this.slider.setAttribute("step",o),u!=null&&(this.slider.setAttribute("value",u),((d=this.selection)==null?void 0:d.value)===void 0&&this.publish(u)),this.element.appendChild(this.slider),this.selection&&(this.slider.addEventListener("input",()=>{this.publish(+this.slider.value)}),sc(this.selection)||this.selection.addEventListener("value",h=>{h!==+this.slider.value&&(this.slider.value=h)}))}query(t=[]){const{from:n,column:r}=this;return!n||this.min!=null&&this.max!=null?null:Ct.select({min:op(r),max:sp(r)}).from(n).where(t)}queryResult(t){const{min:n,max:r}=Array.from(t)[0];return this.min==null&&this.slider.setAttribute("min",n),this.max==null&&this.slider.setAttribute("max",r),this.step==null&&this.slider.setAttribute("step",(r-n)/500),this}publish(t){const{selection:n,column:r}=this;sc(n)?n.update({source:this,schema:{type:"point"},value:t,predicate:JI(r,Zp(t))}):Ea(this.selection)&&n.update(t)}}function YO(e,t){if(e instanceof Date||(e=new Date(+e)),isNaN(e))return typeof t=="function"?t(e):t;const n=e.getUTCHours(),r=e.getUTCMinutes(),i=e.getUTCSeconds(),s=e.getUTCMilliseconds();return`${aG(e.getUTCFullYear())}-${lo(e.getUTCMonth()+1,2)}-${lo(e.getUTCDate(),2)}${n||r||i||s?`T${lo(n,2)}:${lo(r,2)}${i||s?`:${lo(i,2)}${s?`.${lo(s,3)}`:""}`:""}Z`:""}`}function aG(e){return e<0?`-${lo(-e,6)}`:e>9999?`+${lo(e,6)}`:lo(e,4)}function lo(e,t){return`${e}`.padStart(t,"0")}const lG=/^(?:[-+]\d{2})?\d{4}(?:-\d{2}(?:-\d{2})?)?(?:T\d{2}:\d{2}(?::\d{2}(?:\.\d{3})?)?(?:Z|[-+]\d{2}:?\d{2})?)?$/;function qO(e,t){return lG.test(e+="")?new Date(e):typeof t=="function"?t(e):t}const WO=e3(e=>{const t=t3(e);return n=>n==null?"":typeof n=="number"?t(n):n instanceof Date?HO(n):`${n}`}),t3=e3(e=>t=>t===0?"0":t.toLocaleString(e));WO();t3();function HO(e){return YO(e,"Invalid Date")}function e3(e){let t=e3,n;return(r="en")=>r===t?n:n=e(t=r)}let cG=-1;const GO=e=>Pb(uG,e);let uG=class extends Jp{constructor({element:t,filterBy:n,from:r,columns:i=["*"],align:s={},format:o,width:a,maxWidth:l,height:c=500,rowBatch:u=100}={}){super(n),this.id=`table-${++cG}`,this.from=r,this.columns=i,this.format=o,this.align=s,this.widths=typeof a=="object"?a:{},this.offset=0,this.limit=+u,this.pending=!1,this.sortHeader=null,this.sortColumn=null,this.sortDesc=!1,this.element=t||document.createElement("div"),this.element.setAttribute("id",this.id),this.element.value=this,typeof a=="number"&&(this.element.style.width=`${a}px`),l&&(this.element.style.maxWidth=`${l}px`),this.element.style.maxHeight=`${c}px`,this.element.style.overflow="auto";let f=-1;this.element.addEventListener("scroll",d=>{const{pending:h,loaded:p}=this,{scrollHeight:g,scrollTop:v,clientHeight:y}=d.target,m=v<f;f=v,!(m||h||p)&&g-v<2*y&&(this.pending=!0,this.requestData(this.offset+this.limit))}),this.tbl=document.createElement("table"),this.element.appendChild(this.tbl),this.head=document.createElement("thead"),this.tbl.appendChild(this.head),this.body=document.createElement("tbody"),this.tbl.appendChild(this.body),this.style=document.createElement("style"),this.element.appendChild(this.style)}requestData(t=0){var r;this.offset=t;const n=this.query((r=this.filterBy)==null?void 0:r.predicate(this));this.requestQuery(n),vr().prefetch(n.clone().offset(t+this.limit))}fields(){return this.columns.map(t=>ZI(this.from,t))}fieldInfo(t){this.schema=t;const n=this.head;n.innerHTML="";const r=document.createElement("tr");for(const{column:i}of t){const s=document.createElement("th");s.addEventListener("click",o=>this.sort(o,i)),s.appendChild(document.createElement("span")),s.appendChild(document.createTextNode(i)),r.appendChild(s)}return n.appendChild(r),this.formats=fG(this.format,t),this.style.innerText=pG(this.id,dG(this.align,t),hG(this.widths,t)),this}query(t=[]){const{from:n,limit:r,offset:i,schema:s,sortColumn:o,sortDesc:a}=this;return Ct.from(n).select(s.map(l=>l.column)).where(t).orderby(o?a?WW(o):o:[]).limit(r).offset(i)}queryResult(t){return this.pending||(this.loaded=!1,this.body.replaceChildren()),this.data=t,this}update(){const{body:t,formats:n,data:r,schema:i,limit:s}=this,o=i.length;let a=0;for(const l of r){++a;const c=document.createElement("tr");for(let u=0;u<o;++u){const f=l[i[u].column],d=document.createElement("td");d.innerText=f==null?"":n[u](f),c.appendChild(d)}t.appendChild(c)}return a<s&&(this.loaded=!0),this.pending=!1,this}sort(t,n){n===this.sortColumn?this.sortDesc=!this.sortDesc:(this.sortColumn=n,this.sortDesc=!1);const r=t.currentTarget,i=this.sortHeader;i===r&&t.metaKey?(i.firstChild.textContent="",this.sortHeader=null,this.sortColumn=null):(i&&(i.firstChild.textContent=""),this.sortHeader=r,r.firstChild.textContent=this.sortDesc?"":""),this.requestData()}};function fG(e={},t,n){return t.map(({column:r,type:i})=>{if(r in e)return e[r];switch(i){case"number":return t3(n);case"date":return HO;default:return WO(n)}})}function dG(e={},t){return t.map(({column:n,type:r})=>n in e?e[n]:r==="number"?"right":"left")}function hG(e={},t){return t.map(({column:n})=>e[n])}function pG(e,t,n){const r=[];return t.forEach((i,s)=>{const o=+n[s];if(i!=="left"||o){const a=i!=="left"?`text-align:${i};`:"",l=o?`width:${o}px;max-width:${o}px;`:"";r.push(`#${e} tr>:nth-child(${s+1}) {${a}${l}}`)}}),r.join(" ")}const ai=Symbol("Fixed"),oc=Symbol("Transient"),XO=Symbol("Transform"),yG=["rectY-x","rectX-y","rect-x","rect-y"];function mG(e,t){return yG.includes(`${t}-${e}`)}function Th(e,t={steps:25}){const n=(r,i)=>mG(i,r.type)?{[`${i}1`]:kw(r,e,t),[`${i}2`]:kw(r,e,{...t,offset:1})}:{[i]:kw(r,e,t)};return n[XO]=!0,n}function kw(e,t,n){return{column:t,label:t,get stats(){return["min","max"]},get columns(){return[t]},get basis(){return t},toString(){const{min:r,max:i}=e.stats[t],s=gG(r,i,n),o=$e(t),a=s.min===0?o:`(${o} - ${s.min})`,l=`${(s.max-s.min)/s.steps}::DOUBLE`,c=n.offset?`${n.offset} + `:"";return`${s.min} + ${l} * (${c}FLOOR(${a} / ${l})::INTEGER)`}}}function gG(e,t,n){let{steps:r=25,minstep:i=0,nice:s=!0}=n;if(s!==!1){const o=t-e,a=r,l=Math.LN10,c=Math.ceil(Math.log(a)/l);let u=Math.max(i,Math.pow(10,Math.round(Math.log(o)/l)-c));for(;Math.ceil(o/u)>a;)u*=10;const f=[5,2];let d;for(let g=0,v=f.length;g<v;++g)d=u/f[g],d>=i&&o/d<=a&&(u=d);d=Math.log(u);const h=d>=0?0:~~(-d/l)+1,p=Math.pow(10,-h-1);d=Math.floor(e/u+p)*u,e=e<d?d-u:d,t=Math.ceil(t/u)*u,r=Math.round((t-e)/u)}return{min:e,max:t,steps:r}}function ze(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function ac(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function zb(e){let t,n,r;e.length!==2?(t=ze,n=(a,l)=>ze(e(a),l),r=(a,l)=>e(a)-l):(t=e===ze||e===ac?e:bG,n=e,r=e);function i(a,l,c=0,u=a.length){if(c<u){if(t(l,l)!==0)return u;do{const f=c+u>>>1;n(a[f],l)<0?c=f+1:u=f}while(c<u)}return c}function s(a,l,c=0,u=a.length){if(c<u){if(t(l,l)!==0)return u;do{const f=c+u>>>1;n(a[f],l)<=0?c=f+1:u=f}while(c<u)}return c}function o(a,l,c=0,u=a.length){const f=i(a,l,c,u-1);return f>c&&r(a[f-1],l)>-r(a[f],l)?f-1:f}return{left:i,center:o,right:s}}function bG(){return 0}function QO(e){return e===null?NaN:+e}function*vG(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const wG=zb(ze),_G=wG.right;zb(QO).center;const jb=_G,KO=ZO(JO),SG=ZO(xG);function ZO(e){return function(t,n,r=n){if(!((n=+n)>=0))throw new RangeError("invalid rx");if(!((r=+r)>=0))throw new RangeError("invalid ry");let{data:i,width:s,height:o}=t;if(!((s=Math.floor(s))>=0))throw new RangeError("invalid width");if(!((o=Math.floor(o!==void 0?o:i.length/s))>=0))throw new RangeError("invalid height");if(!s||!o||!n&&!r)return t;const a=n&&e(n),l=r&&e(r),c=i.slice();return a&&l?(Nc(a,c,i,s,o),Nc(a,i,c,s,o),Nc(a,c,i,s,o),kc(l,i,c,s,o),kc(l,c,i,s,o),kc(l,i,c,s,o)):a?(Nc(a,i,c,s,o),Nc(a,c,i,s,o),Nc(a,i,c,s,o)):l&&(kc(l,i,c,s,o),kc(l,c,i,s,o),kc(l,i,c,s,o)),t}}function Nc(e,t,n,r,i){for(let s=0,o=r*i;s<o;)e(t,n,s,s+=r,1)}function kc(e,t,n,r,i){for(let s=0,o=r*i;s<r;++s)e(t,n,s,s+o,r)}function xG(e){const t=JO(e);return(n,r,i,s,o)=>{i<<=2,s<<=2,o<<=2,t(n,r,i+0,s+0,o),t(n,r,i+1,s+1,o),t(n,r,i+2,s+2,o),t(n,r,i+3,s+3,o)}}function JO(e){const t=Math.floor(e);if(t===e)return IG(e);const n=e-t,r=2*e+1;return(i,s,o,a,l)=>{if(!((a-=l)>=o))return;let c=t*s[o];const u=l*t,f=u+l;for(let d=o,h=o+u;d<h;d+=l)c+=s[Math.min(a,d)];for(let d=o,h=a;d<=h;d+=l)c+=s[Math.min(a,d+u)],i[d]=(c+n*(s[Math.max(o,d-f)]+s[Math.min(a,d+f)]))/r,c-=s[Math.max(o,d-u)]}}function IG(e){const t=2*e+1;return(n,r,i,s,o)=>{if(!((s-=o)>=i))return;let a=e*r[i];const l=o*e;for(let c=i,u=i+l;c<u;c+=o)a+=r[Math.min(s,c)];for(let c=i,u=s;c<=u;c+=o)a+=r[Math.min(s,c+l)],n[c]=a/t,a-=r[Math.max(i,c-l)]}}function Vb(e,t){let n=0;if(t===void 0)for(let r of e)r!=null&&(r=+r)>=r&&++n;else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(i=+i)>=i&&++n}return n}function TG(e){return e.length|0}function EG(e){return!(e>0)}function AG(e){return typeof e!="object"||"length"in e?e:Array.from(e)}function MG(e){return t=>e(...t)}function $G(...e){const t=typeof e[e.length-1]=="function"&&MG(e.pop());e=e.map(AG);const n=e.map(TG),r=e.length-1,i=new Array(r+1).fill(0),s=[];if(r<0||n.some(EG))return s;for(;;){s.push(i.map((a,l)=>e[l][a]));let o=r;for(;++i[o]===n[o];){if(o===0)return t?s.map(t):s;i[o--]=0}}}function NG(e,t){var n=0,r=0;return Float64Array.from(e,t===void 0?i=>n+=+i||0:i=>n+=+t(i,r++,e)||0)}function n3(e,t){let n=0,r,i=0,s=0;if(t===void 0)for(let o of e)o!=null&&(o=+o)>=o&&(r=o-i,i+=r/++n,s+=r*(o-i));else{let o=-1;for(let a of e)(a=t(a,++o,e))!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,s+=r*(a-i))}if(n>1)return s/(n-1)}function ty(e,t){const n=n3(e,t);return n&&Math.sqrt(n)}function gn(e,t){let n,r;if(t===void 0)for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(n===void 0?s>=s&&(n=r=s):(n>s&&(n=s),r<s&&(r=s)))}return[n,r]}class $s{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const s=n[i],o=t+s,a=Math.abs(t)<Math.abs(s)?t-(o-s):s-(o-t);a&&(n[r++]=a),t=o}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,s,o=0;if(n>0){for(o=t[--n];n>0&&(r=o,i=t[--n],o=r+i,s=i-(o-r),!s););n>0&&(s<0&&t[n-1]<0||s>0&&t[n-1]>0)&&(i=s*2,r=o+i,i==r-o&&(o=r))}return o}}class lc extends Map{constructor(t,n=nB){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(J2(this,t))}has(t){return super.has(J2(this,t))}set(t,n){return super.set(tB(this,t),n)}delete(t){return super.delete(eB(this,t))}}class ey extends Set{constructor(t,n=nB){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(J2(this,t))}add(t){return super.add(tB(this,t))}delete(t){return super.delete(eB(this,t))}}function J2({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function tB({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function eB({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function nB(e){return e!==null&&typeof e=="object"?e.valueOf():e}function tS(e){return e}function Uo(e,...t){return r3(e,tS,tS,t)}function ju(e,t,...n){return r3(e,tS,t,n)}function kG(e,t,...n){return r3(e,Array.from,t,n)}function r3(e,t,n,r){return function i(s,o){if(o>=r.length)return n(s);const a=new lc,l=r[o++];let c=-1;for(const u of s){const f=l(u,++c,s),d=a.get(f);d?d.push(u):a.set(f,[u])}for(const[u,f]of a)a.set(u,i(f,o));return t(a)}(e,0)}function DG(e,t){return Array.from(t,n=>e[n])}function ap(e,...t){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");e=Array.from(e);let[n]=t;if(n&&n.length!==2||t.length>1){const r=Uint32Array.from(e,(i,s)=>s);return t.length>1?(t=t.map(i=>e.map(i)),r.sort((i,s)=>{for(const o of t){const a=lp(o[i],o[s]);if(a)return a}})):(n=e.map(n),r.sort((i,s)=>lp(n[i],n[s]))),DG(e,r)}return e.sort(i3(n))}function i3(e=ze){if(e===ze)return lp;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function lp(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}function s3(e,t,n){return(t.length!==2?ap(ju(e,t,n),([r,i],[s,o])=>ze(i,o)||ze(r,s)):ap(Uo(e,n),([r,i],[s,o])=>t(i,o)||ze(r,s))).map(([r])=>r)}const OG=Math.sqrt(50),BG=Math.sqrt(10),FG=Math.sqrt(2);function Og(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=OG?10:s>=BG?5:s>=FG?2:1;let a,l,c;return i<0?(c=Math.pow(10,-i)/o,a=Math.round(e*c),l=Math.round(t*c),a/c<e&&++a,l/c>t&&--l,c=-c):(c=Math.pow(10,i)*o,a=Math.round(e/c),l=Math.round(t/c),a*c<e&&++a,l*c>t&&--l),l<a&&.5<=n&&n<2?Og(e,t,n*2):[a,l,c]}function Fa(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,s,o]=r?Og(t,e,n):Og(e,t,n);if(!(s>=i))return[];const a=s-i+1,l=new Array(a);if(r)if(o<0)for(let c=0;c<a;++c)l[c]=(s-c)/-o;else for(let c=0;c<a;++c)l[c]=(s-c)*o;else if(o<0)for(let c=0;c<a;++c)l[c]=(i+c)/-o;else for(let c=0;c<a;++c)l[c]=(i+c)*o;return l}function cp(e,t,n){return t=+t,e=+e,n=+n,Og(e,t,n)[2]}function eS(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?cp(t,e,n):cp(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function rB(e,t,n){let r;for(;;){const i=cp(e,t,n);if(i===r||i===0||!isFinite(i))return[e,t];i>0?(e=Math.floor(e/i)*i,t=Math.ceil(t/i)*i):i<0&&(e=Math.ceil(e*i)/i,t=Math.floor(t*i)/i),r=i}}function o3(e){return Math.max(1,Math.ceil(Math.log(Vb(e))/Math.LN2)+1)}function Ne(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function LG(e,t){let n,r=-1,i=-1;if(t===void 0)for(const s of e)++i,s!=null&&(n<s||n===void 0&&s>=s)&&(n=s,r=i);else for(let s of e)(s=t(s,++i,e))!=null&&(n<s||n===void 0&&s>=s)&&(n=s,r=i);return r}function wn(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function RG(e,t){let n,r=-1,i=-1;if(t===void 0)for(const s of e)++i,s!=null&&(n>s||n===void 0&&s>=s)&&(n=s,r=i);else for(let s of e)(s=t(s,++i,e))!=null&&(n>s||n===void 0&&s>=s)&&(n=s,r=i);return r}function iB(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?lp:i3(i);r>n;){if(r-n>600){const l=r-n+1,c=t-n+1,u=Math.log(l),f=.5*Math.exp(2*u/3),d=.5*Math.sqrt(u*f*(l-f)/l)*(c-l/2<0?-1:1),h=Math.max(n,Math.floor(t-c*f/l+d)),p=Math.min(r,Math.floor(t+(l-c)*f/l+d));iB(e,t,h,p,i)}const s=e[t];let o=n,a=r;for(Id(e,n,t),i(e[r],s)>0&&Id(e,n,r);o<a;){for(Id(e,o,a),++o,--a;i(e[o],s)<0;)++o;for(;i(e[a],s)>0;)--a}i(e[n],s)===0?Id(e,n,a):(++a,Id(e,a,r)),a<=t&&(n=a+1),t<=a&&(r=a-1)}return e}function Id(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function a3(e,t=ze){let n,r=!1;if(t.length===1){let i;for(const s of e){const o=t(s);(r?ze(o,i)>0:ze(o,o)===0)&&(n=s,i=o,r=!0)}}else for(const i of e)(r?t(i,n)>0:t(i,i)===0)&&(n=i,r=!0);return n}function La(e,t,n){if(e=Float64Array.from(vG(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return wn(e);if(t>=1)return Ne(e);var r,i=(r-1)*t,s=Math.floor(i),o=Ne(iB(e,s).subarray(0,s+1)),a=wn(e.subarray(s+1));return o+(a-o)*(i-s)}}function CG(e,t,n=QO){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,s=Math.floor(i),o=+n(e[s],s,e),a=+n(e[s+1],s+1,e);return o+(a-o)*(i-s)}}function UG(e,t,n){const r=Vb(e),i=La(e,.75)-La(e,.25);return r&&i?Math.ceil((n-t)/(2*i*Math.pow(r,-1/3))):1}function sB(e,t,n){const r=Vb(e),i=ty(e);return r&&i?Math.ceil((n-t)*Math.cbrt(r)/(3.49*i)):1}function Yb(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(s=+s)>=s&&(++n,r+=s)}if(n)return r/n}function up(e,t){return La(e,.5,t)}function*PG(e){for(const t of e)yield*t}function oB(e){return Array.from(PG(e))}function aB(e,t){const n=new lc;if(t===void 0)for(let s of e)s!=null&&s>=s&&n.set(s,(n.get(s)||0)+1);else{let s=-1;for(let o of e)(o=t(o,++s,e))!=null&&o>=o&&n.set(o,(n.get(o)||0)+1)}let r,i=0;for(const[s,o]of n)o>i&&(i=o,r=s);return r}function zG(e,t=jG){const n=[];let r,i=!1;for(const s of e)i&&n.push(t(r,s)),r=s,i=!0;return n}function jG(e,t){return[e,t]}function Dr(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function lB(e,t=ze){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");let n=Array.from(e);const r=new Float64Array(n.length);t.length!==2&&(n=n.map(t),t=ze);const i=(a,l)=>t(n[a],n[l]);let s,o;return e=Uint32Array.from(n,(a,l)=>l),e.sort(t===ze?(a,l)=>lp(n[a],n[l]):i3(i)),e.forEach((a,l)=>{const c=i(a,s===void 0?a:s);c>=0?((s===void 0||c>0)&&(s=a,o=l),r[a]=o):r[a]=NaN}),r}function VG(e,t=ze){let n,r=!1;if(t.length===1){let i;for(const s of e){const o=t(s);(r?ze(o,i)<0:ze(o,o)===0)&&(n=s,i=o,r=!0)}}else for(const i of e)(r?t(i,n)<0:t(i,i)===0)&&(n=i,r=!0);return n}function Bs(e,t){let n=0;if(t===void 0)for(let r of e)(r=+r)&&(n+=r);else{let r=-1;for(let i of e)(i=+t(i,++r,e))&&(n+=i)}return n}function Bg(e){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");return Array.from(e).reverse()}function YG(e){return e}var Dw=1,Ow=2,nS=3,l0=4,UM=1e-6;function qG(e){return"translate("+e+",0)"}function WG(e){return"translate(0,"+e+")"}function HG(e){return t=>+e(t)}function GG(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),n=>+e(n)+t}function XG(){return!this.__axis}function QG(e,t){var n=[],r=null,i=null,s=6,o=6,a=3,l=typeof window<"u"&&window.devicePixelRatio>1?0:.5,c=e===Dw||e===l0?-1:1,u=e===l0||e===Ow?"x":"y",f=e===Dw||e===nS?qG:WG;function d(h){var p=r??(t.ticks?t.ticks.apply(t,n):t.domain()),g=i??(t.tickFormat?t.tickFormat.apply(t,n):YG),v=Math.max(s,0)+a,y=t.range(),m=+y[0]+l,b=+y[y.length-1]+l,w=(t.bandwidth?GG:HG)(t.copy(),l),S=h.selection?h.selection():h,_=S.selectAll(".domain").data([null]),x=S.selectAll(".tick").data(p,t).order(),E=x.exit(),k=x.enter().append("g").attr("class","tick"),I=x.select("line"),A=x.select("text");_=_.merge(_.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),x=x.merge(k),I=I.merge(k.append("line").attr("stroke","currentColor").attr(u+"2",c*s)),A=A.merge(k.append("text").attr("fill","currentColor").attr(u,c*v).attr("dy",e===Dw?"0em":e===nS?"0.71em":"0.32em")),h!==S&&(_=_.transition(h),x=x.transition(h),I=I.transition(h),A=A.transition(h),E=E.transition(h).attr("opacity",UM).attr("transform",function(D){return isFinite(D=w(D))?f(D+l):this.getAttribute("transform")}),k.attr("opacity",UM).attr("transform",function(D){var L=this.parentNode.__axis;return f((L&&isFinite(L=L(D))?L:w(D))+l)})),E.remove(),_.attr("d",e===l0||e===Ow?o?"M"+c*o+","+m+"H"+l+"V"+b+"H"+c*o:"M"+l+","+m+"V"+b:o?"M"+m+","+c*o+"V"+l+"H"+b+"V"+c*o:"M"+m+","+l+"H"+b),x.attr("opacity",1).attr("transform",function(D){return f(w(D)+l)}),I.attr(u+"2",c*s),A.attr(u,c*v).text(g),S.filter(XG).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===Ow?"start":e===l0?"end":"middle"),S.each(function(){this.__axis=w})}return d.scale=function(h){return arguments.length?(t=h,d):t},d.ticks=function(){return n=Array.from(arguments),d},d.tickArguments=function(h){return arguments.length?(n=h==null?[]:Array.from(h),d):n.slice()},d.tickValues=function(h){return arguments.length?(r=h==null?null:Array.from(h),d):r&&r.slice()},d.tickFormat=function(h){return arguments.length?(i=h,d):i},d.tickSize=function(h){return arguments.length?(s=o=+h,d):s},d.tickSizeInner=function(h){return arguments.length?(s=+h,d):s},d.tickSizeOuter=function(h){return arguments.length?(o=+h,d):o},d.tickPadding=function(h){return arguments.length?(a=+h,d):a},d.offset=function(h){return arguments.length?(l=+h,d):l},d}function KG(e){return QG(nS,e)}var ZG={value:()=>{}};function qb(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new cm(n)}function cm(e){this._=e}function JG(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}cm.prototype=qb.prototype={constructor:cm,on:function(e,t){var n=this._,r=JG(e+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(e=r[s]).type)&&(i=tX(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(i=(e=r[s]).type)n[i]=PM(n[i],e.name,t);else if(t==null)for(i in n)n[i]=PM(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new cm(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function tX(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function PM(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=ZG,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var rS="http://www.w3.org/1999/xhtml";const cc={svg:"http://www.w3.org/2000/svg",xhtml:rS,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Wb(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),cc.hasOwnProperty(t)?{space:cc[t],local:e}:e}function eX(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===rS&&t.documentElement.namespaceURI===rS?t.createElement(e):t.createElementNS(n,e)}}function nX(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Hb(e){var t=Wb(e);return(t.local?nX:eX)(t)}function rX(){}function l3(e){return e==null?rX:function(){return this.querySelector(e)}}function iX(e){typeof e!="function"&&(e=l3(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=new Array(o),l,c,u=0;u<o;++u)(l=s[u])&&(c=e.call(l,l.__data__,u,s))&&("__data__"in l&&(c.__data__=l.__data__),a[u]=c);return new Ur(r,this._parents)}function sX(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function oX(){return[]}function cB(e){return e==null?oX:function(){return this.querySelectorAll(e)}}function aX(e){return function(){return sX(e.apply(this,arguments))}}function lX(e){typeof e=="function"?e=aX(e):e=cB(e);for(var t=this._groups,n=t.length,r=[],i=[],s=0;s<n;++s)for(var o=t[s],a=o.length,l,c=0;c<a;++c)(l=o[c])&&(r.push(e.call(l,l.__data__,c,o)),i.push(l));return new Ur(r,i)}function uB(e){return function(){return this.matches(e)}}function fB(e){return function(t){return t.matches(e)}}var cX=Array.prototype.find;function uX(e){return function(){return cX.call(this.children,e)}}function fX(){return this.firstElementChild}function dX(e){return this.select(e==null?fX:uX(typeof e=="function"?e:fB(e)))}var hX=Array.prototype.filter;function pX(){return Array.from(this.children)}function yX(e){return function(){return hX.call(this.children,e)}}function mX(e){return this.selectAll(e==null?pX:yX(typeof e=="function"?e:fB(e)))}function gX(e){typeof e!="function"&&(e=uB(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],l,c=0;c<o;++c)(l=s[c])&&e.call(l,l.__data__,c,s)&&a.push(l);return new Ur(r,this._parents)}function dB(e){return new Array(e.length)}function bX(){return new Ur(this._enter||this._groups.map(dB),this._parents)}function Fg(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Fg.prototype={constructor:Fg,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function vX(e){return function(){return e}}function wX(e,t,n,r,i,s){for(var o=0,a,l=t.length,c=s.length;o<c;++o)(a=t[o])?(a.__data__=s[o],r[o]=a):n[o]=new Fg(e,s[o]);for(;o<l;++o)(a=t[o])&&(i[o]=a)}function _X(e,t,n,r,i,s,o){var a,l,c=new Map,u=t.length,f=s.length,d=new Array(u),h;for(a=0;a<u;++a)(l=t[a])&&(d[a]=h=o.call(l,l.__data__,a,t)+"",c.has(h)?i[a]=l:c.set(h,l));for(a=0;a<f;++a)h=o.call(e,s[a],a,s)+"",(l=c.get(h))?(r[a]=l,l.__data__=s[a],c.delete(h)):n[a]=new Fg(e,s[a]);for(a=0;a<u;++a)(l=t[a])&&c.get(d[a])===l&&(i[a]=l)}function SX(e){return e.__data__}function xX(e,t){if(!arguments.length)return Array.from(this,SX);var n=t?_X:wX,r=this._parents,i=this._groups;typeof e!="function"&&(e=vX(e));for(var s=i.length,o=new Array(s),a=new Array(s),l=new Array(s),c=0;c<s;++c){var u=r[c],f=i[c],d=f.length,h=IX(e.call(u,u&&u.__data__,c,r)),p=h.length,g=a[c]=new Array(p),v=o[c]=new Array(p),y=l[c]=new Array(d);n(u,f,g,v,y,h,t);for(var m=0,b=0,w,S;m<p;++m)if(w=g[m]){for(m>=b&&(b=m+1);!(S=v[b])&&++b<p;);w._next=S||null}}return o=new Ur(o,r),o._enter=a,o._exit=l,o}function IX(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function TX(){return new Ur(this._exit||this._groups.map(dB),this._parents)}function EX(e,t,n){var r=this.enter(),i=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function AX(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,s=r.length,o=Math.min(i,s),a=new Array(i),l=0;l<o;++l)for(var c=n[l],u=r[l],f=c.length,d=a[l]=new Array(f),h,p=0;p<f;++p)(h=c[p]||u[p])&&(d[p]=h);for(;l<i;++l)a[l]=n[l];return new Ur(a,this._parents)}function MX(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function $X(e){e||(e=NX);function t(f,d){return f&&d?e(f.__data__,d.__data__):!f-!d}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],a=o.length,l=i[s]=new Array(a),c,u=0;u<a;++u)(c=o[u])&&(l[u]=c);l.sort(t)}return new Ur(i,this._parents).order()}function NX(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function kX(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function DX(){return Array.from(this)}function OX(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function BX(){let e=0;for(const t of this)++e;return e}function FX(){return!this.node()}function LX(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],s=0,o=i.length,a;s<o;++s)(a=i[s])&&e.call(a,a.__data__,s,i);return this}function RX(e){return function(){this.removeAttribute(e)}}function CX(e){return function(){this.removeAttributeNS(e.space,e.local)}}function UX(e,t){return function(){this.setAttribute(e,t)}}function PX(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function zX(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function jX(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function VX(e,t){var n=Wb(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?CX:RX:typeof t=="function"?n.local?jX:zX:n.local?PX:UX)(n,t))}function hB(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function YX(e){return function(){this.style.removeProperty(e)}}function qX(e,t,n){return function(){this.style.setProperty(e,t,n)}}function WX(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function HX(e,t,n){return arguments.length>1?this.each((t==null?YX:typeof t=="function"?WX:qX)(e,t,n??"")):bf(this.node(),e)}function bf(e,t){return e.style.getPropertyValue(t)||hB(e).getComputedStyle(e,null).getPropertyValue(t)}function GX(e){return function(){delete this[e]}}function XX(e,t){return function(){this[e]=t}}function QX(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function KX(e,t){return arguments.length>1?this.each((t==null?GX:typeof t=="function"?QX:XX)(e,t)):this.node()[e]}function pB(e){return e.trim().split(/^|\s+/)}function c3(e){return e.classList||new yB(e)}function yB(e){this._node=e,this._names=pB(e.getAttribute("class")||"")}yB.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function mB(e,t){for(var n=c3(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function gB(e,t){for(var n=c3(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function ZX(e){return function(){mB(this,e)}}function JX(e){return function(){gB(this,e)}}function tQ(e,t){return function(){(t.apply(this,arguments)?mB:gB)(this,e)}}function eQ(e,t){var n=pB(e+"");if(arguments.length<2){for(var r=c3(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?tQ:t?ZX:JX)(n,t))}function nQ(){this.textContent=""}function rQ(e){return function(){this.textContent=e}}function iQ(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function sQ(e){return arguments.length?this.each(e==null?nQ:(typeof e=="function"?iQ:rQ)(e)):this.node().textContent}function oQ(){this.innerHTML=""}function aQ(e){return function(){this.innerHTML=e}}function lQ(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function cQ(e){return arguments.length?this.each(e==null?oQ:(typeof e=="function"?lQ:aQ)(e)):this.node().innerHTML}function uQ(){this.nextSibling&&this.parentNode.appendChild(this)}function fQ(){return this.each(uQ)}function dQ(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function hQ(){return this.each(dQ)}function pQ(e){var t=typeof e=="function"?e:Hb(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function yQ(){return null}function mQ(e,t){var n=typeof e=="function"?e:Hb(e),r=t==null?yQ:typeof t=="function"?t:l3(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function gQ(){var e=this.parentNode;e&&e.removeChild(this)}function bQ(){return this.each(gQ)}function vQ(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function wQ(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function _Q(e){return this.select(e?wQ:vQ)}function SQ(e){return arguments.length?this.property("__data__",e):this.node().__data__}function xQ(e){return function(t){e.call(this,t,this.__data__)}}function IQ(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function TQ(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,s;n<i;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function EQ(e,t,n){return function(){var r=this.__on,i,s=xQ(t);if(r){for(var o=0,a=r.length;o<a;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=t;return}}this.addEventListener(e.type,s,n),i={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(i):this.__on=[i]}}function AQ(e,t,n){var r=IQ(e+""),i,s=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,c=a.length,u;l<c;++l)for(i=0,u=a[l];i<s;++i)if((o=r[i]).type===u.type&&o.name===u.name)return u.value}return}for(a=t?EQ:TQ,i=0;i<s;++i)this.each(a(r[i],t,n));return this}function bB(e,t,n){var r=hB(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function MQ(e,t){return function(){return bB(this,e,t)}}function $Q(e,t){return function(){return bB(this,e,t.apply(this,arguments))}}function NQ(e,t){return this.each((typeof t=="function"?$Q:MQ)(e,t))}function*kQ(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var vB=[null];function Ur(e,t){this._groups=e,this._parents=t}function ny(){return new Ur([[document.documentElement]],vB)}function DQ(){return this}Ur.prototype=ny.prototype={constructor:Ur,select:iX,selectAll:lX,selectChild:dX,selectChildren:mX,filter:gX,data:xX,enter:bX,exit:TX,join:EX,merge:AX,selection:DQ,order:MX,sort:$X,call:kX,nodes:DX,node:OX,size:BX,empty:FX,each:LX,attr:VX,style:HX,property:KX,classed:eQ,text:sQ,html:cQ,raise:fQ,lower:hQ,append:pQ,insert:mQ,remove:bQ,clone:_Q,datum:SQ,on:AQ,dispatch:NQ,[Symbol.iterator]:kQ};function me(e){return typeof e=="string"?new Ur([[document.querySelector(e)]],[document.documentElement]):new Ur([[e]],vB)}function OQ(e){let t;for(;t=e.sourceEvent;)e=t;return e}function $i(e,t){if(e=OQ(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const iS={capture:!0,passive:!1};function sS(e){e.preventDefault(),e.stopImmediatePropagation()}function wB(e){var t=e.document.documentElement,n=me(e).on("dragstart.drag",sS,iS);"onselectstart"in t?n.on("selectstart.drag",sS,iS):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function _B(e,t){var n=e.document.documentElement,r=me(e).on("dragstart.drag",null);t&&(r.on("click.drag",sS,iS),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function Xf(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function ry(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function tl(){}var uc=.7,vf=1/uc,Vu="\\s*([+-]?\\d+)\\s*",fp="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ns="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",BQ=/^#([0-9a-f]{3,8})$/,FQ=new RegExp(`^rgb\\(${Vu},${Vu},${Vu}\\)$`),LQ=new RegExp(`^rgb\\(${Ns},${Ns},${Ns}\\)$`),RQ=new RegExp(`^rgba\\(${Vu},${Vu},${Vu},${fp}\\)$`),CQ=new RegExp(`^rgba\\(${Ns},${Ns},${Ns},${fp}\\)$`),UQ=new RegExp(`^hsl\\(${fp},${Ns},${Ns}\\)$`),PQ=new RegExp(`^hsla\\(${fp},${Ns},${Ns},${fp}\\)$`),zM={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Xf(tl,Ra,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:jM,formatHex:jM,formatHex8:zQ,formatHsl:jQ,formatRgb:VM,toString:VM});function jM(){return this.rgb().formatHex()}function zQ(){return this.rgb().formatHex8()}function jQ(){return SB(this).formatHsl()}function VM(){return this.rgb().formatRgb()}function Ra(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=BQ.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?YM(t):n===3?new bn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?c0(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?c0(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=FQ.exec(e))?new bn(t[1],t[2],t[3],1):(t=LQ.exec(e))?new bn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=RQ.exec(e))?c0(t[1],t[2],t[3],t[4]):(t=CQ.exec(e))?c0(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=UQ.exec(e))?HM(t[1],t[2]/100,t[3]/100,1):(t=PQ.exec(e))?HM(t[1],t[2]/100,t[3]/100,t[4]):zM.hasOwnProperty(e)?YM(zM[e]):e==="transparent"?new bn(NaN,NaN,NaN,0):null}function YM(e){return new bn(e>>16&255,e>>8&255,e&255,1)}function c0(e,t,n,r){return r<=0&&(e=t=n=NaN),new bn(e,t,n,r)}function u3(e){return e instanceof tl||(e=Ra(e)),e?(e=e.rgb(),new bn(e.r,e.g,e.b,e.opacity)):new bn}function bi(e,t,n,r){return arguments.length===1?u3(e):new bn(e,t,n,r??1)}function bn(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Xf(bn,bi,ry(tl,{brighter(e){return e=e==null?vf:Math.pow(vf,e),new bn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?uc:Math.pow(uc,e),new bn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new bn(ql(this.r),ql(this.g),ql(this.b),Lg(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:qM,formatHex:qM,formatHex8:VQ,formatRgb:WM,toString:WM}));function qM(){return`#${Bl(this.r)}${Bl(this.g)}${Bl(this.b)}`}function VQ(){return`#${Bl(this.r)}${Bl(this.g)}${Bl(this.b)}${Bl((isNaN(this.opacity)?1:this.opacity)*255)}`}function WM(){const e=Lg(this.opacity);return`${e===1?"rgb(":"rgba("}${ql(this.r)}, ${ql(this.g)}, ${ql(this.b)}${e===1?")":`, ${e})`}`}function Lg(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function ql(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Bl(e){return e=ql(e),(e<16?"0":"")+e.toString(16)}function HM(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Oi(e,t,n,r)}function SB(e){if(e instanceof Oi)return new Oi(e.h,e.s,e.l,e.opacity);if(e instanceof tl||(e=Ra(e)),!e)return new Oi;if(e instanceof Oi)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),o=NaN,a=s-i,l=(s+i)/2;return a?(t===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-t)/a+2:o=(t-n)/a+4,a/=l<.5?s+i:2-s-i,o*=60):a=l>0&&l<1?0:o,new Oi(o,a,l,e.opacity)}function oS(e,t,n,r){return arguments.length===1?SB(e):new Oi(e,t,n,r??1)}function Oi(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Xf(Oi,oS,ry(tl,{brighter(e){return e=e==null?vf:Math.pow(vf,e),new Oi(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?uc:Math.pow(uc,e),new Oi(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new bn(Bw(e>=240?e-240:e+120,i,r),Bw(e,i,r),Bw(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Oi(GM(this.h),u0(this.s),u0(this.l),Lg(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Lg(this.opacity);return`${e===1?"hsl(":"hsla("}${GM(this.h)}, ${u0(this.s)*100}%, ${u0(this.l)*100}%${e===1?")":`, ${e})`}`}}));function GM(e){return e=(e||0)%360,e<0?e+360:e}function u0(e){return Math.max(0,Math.min(1,e||0))}function Bw(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const xB=Math.PI/180,IB=180/Math.PI,Rg=18,TB=.96422,EB=1,AB=.82521,MB=4/29,Yu=6/29,$B=3*Yu*Yu,YQ=Yu*Yu*Yu;function NB(e){if(e instanceof ks)return new ks(e.l,e.a,e.b,e.opacity);if(e instanceof mo)return kB(e);e instanceof bn||(e=u3(e));var t=Cw(e.r),n=Cw(e.g),r=Cw(e.b),i=Fw((.2225045*t+.7168786*n+.0606169*r)/EB),s,o;return t===n&&n===r?s=o=i:(s=Fw((.4360747*t+.3850649*n+.1430804*r)/TB),o=Fw((.0139322*t+.0971045*n+.7141733*r)/AB)),new ks(116*i-16,500*(s-i),200*(i-o),e.opacity)}function aS(e,t,n,r){return arguments.length===1?NB(e):new ks(e,t,n,r??1)}function ks(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}Xf(ks,aS,ry(tl,{brighter(e){return new ks(this.l+Rg*(e??1),this.a,this.b,this.opacity)},darker(e){return new ks(this.l-Rg*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=TB*Lw(t),e=EB*Lw(e),n=AB*Lw(n),new bn(Rw(3.1338561*t-1.6168667*e-.4906146*n),Rw(-.9787684*t+1.9161415*e+.033454*n),Rw(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function Fw(e){return e>YQ?Math.pow(e,1/3):e/$B+MB}function Lw(e){return e>Yu?e*e*e:$B*(e-MB)}function Rw(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function Cw(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function qQ(e){if(e instanceof mo)return new mo(e.h,e.c,e.l,e.opacity);if(e instanceof ks||(e=NB(e)),e.a===0&&e.b===0)return new mo(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*IB;return new mo(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function lS(e,t,n,r){return arguments.length===1?qQ(e):new mo(e,t,n,r??1)}function mo(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function kB(e){if(isNaN(e.h))return new ks(e.l,0,0,e.opacity);var t=e.h*xB;return new ks(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}Xf(mo,lS,ry(tl,{brighter(e){return new mo(this.h,this.c,this.l+Rg*(e??1),this.opacity)},darker(e){return new mo(this.h,this.c,this.l-Rg*(e??1),this.opacity)},rgb(){return kB(this).rgb()}}));var DB=-.14861,f3=1.78277,d3=-.29227,Gb=-.90649,dp=1.97294,XM=dp*Gb,QM=dp*f3,KM=f3*d3-Gb*DB;function WQ(e){if(e instanceof Wl)return new Wl(e.h,e.s,e.l,e.opacity);e instanceof bn||(e=u3(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(KM*r+XM*t-QM*n)/(KM+XM-QM),s=r-i,o=(dp*(n-i)-d3*s)/Gb,a=Math.sqrt(o*o+s*s)/(dp*i*(1-i)),l=a?Math.atan2(o,s)*IB-120:NaN;return new Wl(l<0?l+360:l,a,i,e.opacity)}function Fs(e,t,n,r){return arguments.length===1?WQ(e):new Wl(e,t,n,r??1)}function Wl(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Xf(Wl,Fs,ry(tl,{brighter(e){return e=e==null?vf:Math.pow(vf,e),new Wl(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?uc:Math.pow(uc,e),new Wl(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*xB,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new bn(255*(t+n*(DB*r+f3*i)),255*(t+n*(d3*r+Gb*i)),255*(t+n*(dp*r)),this.opacity)}}));function HQ(e,t,n,r,i){var s=e*e,o=s*e;return((1-3*e+3*s-o)*t+(4-6*s+3*o)*n+(1+3*e+3*s-3*o)*r+o*i)/6}function GQ(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],s=e[r+1],o=r>0?e[r-1]:2*i-s,a=r<t-1?e[r+2]:2*s-i;return HQ((n-r/t)*t,o,i,s,a)}}const Xb=e=>()=>e;function OB(e,t){return function(n){return e+n*t}}function XQ(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function h3(e,t){var n=t-e;return n?OB(e,n>180||n<-180?n-360*Math.round(n/360):n):Xb(isNaN(e)?t:e)}function QQ(e){return(e=+e)==1?Cn:function(t,n){return n-t?XQ(t,n,e):Xb(isNaN(t)?n:t)}}function Cn(e,t){var n=t-e;return n?OB(e,n):Xb(isNaN(e)?t:e)}const fc=function e(t){var n=QQ(t);function r(i,s){var o=n((i=bi(i)).r,(s=bi(s)).r),a=n(i.g,s.g),l=n(i.b,s.b),c=Cn(i.opacity,s.opacity);return function(u){return i.r=o(u),i.g=a(u),i.b=l(u),i.opacity=c(u),i+""}}return r.gamma=e,r}(1);function KQ(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),s=new Array(n),o,a;for(o=0;o<n;++o)a=bi(t[o]),r[o]=a.r||0,i[o]=a.g||0,s[o]=a.b||0;return r=e(r),i=e(i),s=e(s),a.opacity=1,function(l){return a.r=r(l),a.g=i(l),a.b=s(l),a+""}}}var ZQ=KQ(GQ);function JQ(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function tK(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function eK(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=Qf(e[o],t[o]);for(;o<n;++o)s[o]=t[o];return function(a){for(o=0;o<r;++o)s[o]=i[o](a);return s}}function nK(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Fn(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function rK(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Qf(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var cS=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Uw=new RegExp(cS.source,"g");function iK(e){return function(){return e}}function sK(e){return function(t){return e(t)+""}}function BB(e,t){var n=cS.lastIndex=Uw.lastIndex=0,r,i,s,o=-1,a=[],l=[];for(e=e+"",t=t+"";(r=cS.exec(e))&&(i=Uw.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,l.push({i:o,x:Fn(r,i)})),n=Uw.lastIndex;return n<t.length&&(s=t.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?l[0]?sK(l[0].x):iK(t):(t=l.length,function(c){for(var u=0,f;u<t;++u)a[(f=l[u]).i]=f.x(c);return a.join("")})}function Qf(e,t){var n=typeof t,r;return t==null||n==="boolean"?Xb(t):(n==="number"?Fn:n==="string"?(r=Ra(t))?(t=r,fc):BB:t instanceof Ra?fc:t instanceof Date?nK:tK(t)?JQ:Array.isArray(t)?eK:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?rK:Fn)(e,t)}function p3(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var ZM=180/Math.PI,uS={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function FB(e,t,n,r,i,s){var o,a,l;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,l/=a),e*r<t*n&&(e=-e,t=-t,l=-l,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*ZM,skewX:Math.atan(l)*ZM,scaleX:o,scaleY:a}}var f0;function oK(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?uS:FB(t.a,t.b,t.c,t.d,t.e,t.f)}function aK(e){return e==null||(f0||(f0=document.createElementNS("http://www.w3.org/2000/svg","g")),f0.setAttribute("transform",e),!(e=f0.transform.baseVal.consolidate()))?uS:(e=e.matrix,FB(e.a,e.b,e.c,e.d,e.e,e.f))}function LB(e,t,n,r){function i(c){return c.length?c.pop()+" ":""}function s(c,u,f,d,h,p){if(c!==f||u!==d){var g=h.push("translate(",null,t,null,n);p.push({i:g-4,x:Fn(c,f)},{i:g-2,x:Fn(u,d)})}else(f||d)&&h.push("translate("+f+t+d+n)}function o(c,u,f,d){c!==u?(c-u>180?u+=360:u-c>180&&(c+=360),d.push({i:f.push(i(f)+"rotate(",null,r)-2,x:Fn(c,u)})):u&&f.push(i(f)+"rotate("+u+r)}function a(c,u,f,d){c!==u?d.push({i:f.push(i(f)+"skewX(",null,r)-2,x:Fn(c,u)}):u&&f.push(i(f)+"skewX("+u+r)}function l(c,u,f,d,h,p){if(c!==f||u!==d){var g=h.push(i(h)+"scale(",null,",",null,")");p.push({i:g-4,x:Fn(c,f)},{i:g-2,x:Fn(u,d)})}else(f!==1||d!==1)&&h.push(i(h)+"scale("+f+","+d+")")}return function(c,u){var f=[],d=[];return c=e(c),u=e(u),s(c.translateX,c.translateY,u.translateX,u.translateY,f,d),o(c.rotate,u.rotate,f,d),a(c.skewX,u.skewX,f,d),l(c.scaleX,c.scaleY,u.scaleX,u.scaleY,f,d),c=u=null,function(h){for(var p=-1,g=d.length,v;++p<g;)f[(v=d[p]).i]=v.x(h);return f.join("")}}}var lK=LB(oK,"px, ","px)","deg)"),cK=LB(aK,", ",")",")"),uK=1e-12;function JM(e){return((e=Math.exp(e))+1/e)/2}function fK(e){return((e=Math.exp(e))-1/e)/2}function dK(e){return((e=Math.exp(2*e))-1)/(e+1)}const hK=function e(t,n,r){function i(s,o){var a=s[0],l=s[1],c=s[2],u=o[0],f=o[1],d=o[2],h=u-a,p=f-l,g=h*h+p*p,v,y;if(g<uK)y=Math.log(d/c)/t,v=function(x){return[a+x*h,l+x*p,c*Math.exp(t*x*y)]};else{var m=Math.sqrt(g),b=(d*d-c*c+r*g)/(2*c*n*m),w=(d*d-c*c-r*g)/(2*d*n*m),S=Math.log(Math.sqrt(b*b+1)-b),_=Math.log(Math.sqrt(w*w+1)-w);y=(_-S)/t,v=function(x){var E=x*y,k=JM(S),I=c/(n*m)*(k*dK(t*E+S)-fK(S));return[a+I*h,l+I*p,c*k/JM(t*E+S)]}}return v.duration=y*1e3*t/Math.SQRT2,v}return i.rho=function(s){var o=Math.max(.001,+s),a=o*o,l=a*a;return e(o,a,l)},i}(Math.SQRT2,2,4);function pK(e){return function(t,n){var r=e((t=oS(t)).h,(n=oS(n)).h),i=Cn(t.s,n.s),s=Cn(t.l,n.l),o=Cn(t.opacity,n.opacity);return function(a){return t.h=r(a),t.s=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const yK=pK(h3);function mK(e,t){var n=Cn((e=aS(e)).l,(t=aS(t)).l),r=Cn(e.a,t.a),i=Cn(e.b,t.b),s=Cn(e.opacity,t.opacity);return function(o){return e.l=n(o),e.a=r(o),e.b=i(o),e.opacity=s(o),e+""}}function gK(e){return function(t,n){var r=e((t=lS(t)).h,(n=lS(n)).h),i=Cn(t.c,n.c),s=Cn(t.l,n.l),o=Cn(t.opacity,n.opacity);return function(a){return t.h=r(a),t.c=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const bK=gK(h3);function RB(e){return function t(n){n=+n;function r(i,s){var o=e((i=Fs(i)).h,(s=Fs(s)).h),a=Cn(i.s,s.s),l=Cn(i.l,s.l),c=Cn(i.opacity,s.opacity);return function(u){return i.h=o(u),i.s=a(u),i.l=l(Math.pow(u,n)),i.opacity=c(u),i+""}}return r.gamma=t,r}(1)}RB(h3);var y3=RB(Cn);function Qb(e,t){t===void 0&&(t=e,e=Qf);for(var n=0,r=t.length-1,i=t[0],s=new Array(r<0?0:r);n<r;)s[n]=e(i,i=t[++n]);return function(o){var a=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return s[a](o-a)}}function Yi(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}var wf=0,Qd=0,Td=0,CB=1e3,Cg,Kd,Ug=0,dc=0,Kb=0,hp=typeof performance=="object"&&performance.now?performance:Date,UB=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function m3(){return dc||(UB(vK),dc=hp.now()+Kb)}function vK(){dc=0}function Pg(){this._call=this._time=this._next=null}Pg.prototype=PB.prototype={constructor:Pg,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?m3():+n)+(t==null?0:+t),!this._next&&Kd!==this&&(Kd?Kd._next=this:Cg=this,Kd=this),this._call=e,this._time=n,fS()},stop:function(){this._call&&(this._call=null,this._time=1/0,fS())}};function PB(e,t,n){var r=new Pg;return r.restart(e,t,n),r}function wK(){m3(),++wf;for(var e=Cg,t;e;)(t=dc-e._time)>=0&&e._call.call(void 0,t),e=e._next;--wf}function t6(){dc=(Ug=hp.now())+Kb,wf=Qd=0;try{wK()}finally{wf=0,SK(),dc=0}}function _K(){var e=hp.now(),t=e-Ug;t>CB&&(Kb-=t,Ug=e)}function SK(){for(var e,t=Cg,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Cg=n);Kd=e,fS(r)}function fS(e){if(!wf){Qd&&(Qd=clearTimeout(Qd));var t=e-dc;t>24?(e<1/0&&(Qd=setTimeout(t6,e-hp.now()-Kb)),Td&&(Td=clearInterval(Td))):(Td||(Ug=hp.now(),Td=setInterval(_K,CB)),wf=1,UB(t6))}}function e6(e,t,n){var r=new Pg;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var xK=qb("start","end","cancel","interrupt"),IK=[],zB=0,n6=1,dS=2,um=3,r6=4,hS=5,fm=6;function Zb(e,t,n,r,i,s){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;TK(e,n,{name:t,index:r,group:i,on:xK,tween:IK,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:zB})}function g3(e,t){var n=Qi(e,t);if(n.state>zB)throw new Error("too late; already scheduled");return n}function Cs(e,t){var n=Qi(e,t);if(n.state>um)throw new Error("too late; already running");return n}function Qi(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function TK(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=PB(s,0,n.time);function s(c){n.state=n6,n.timer.restart(o,n.delay,n.time),n.delay<=c&&o(c-n.delay)}function o(c){var u,f,d,h;if(n.state!==n6)return l();for(u in r)if(h=r[u],h.name===n.name){if(h.state===um)return e6(o);h.state===r6?(h.state=fm,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[u]):+u<t&&(h.state=fm,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[u])}if(e6(function(){n.state===um&&(n.state=r6,n.timer.restart(a,n.delay,n.time),a(c))}),n.state=dS,n.on.call("start",e,e.__data__,n.index,n.group),n.state===dS){for(n.state=um,i=new Array(d=n.tween.length),u=0,f=-1;u<d;++u)(h=n.tween[u].value.call(e,e.__data__,n.index,n.group))&&(i[++f]=h);i.length=f+1}}function a(c){for(var u=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(l),n.state=hS,1),f=-1,d=i.length;++f<d;)i[f].call(e,u);n.state===hS&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=fm,n.timer.stop(),delete r[t];for(var c in r)return;delete e.__transition}}function qu(e,t){var n=e.__transition,r,i,s=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){s=!1;continue}i=r.state>dS&&r.state<hS,r.state=fm,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}s&&delete e.__transition}}function EK(e){return this.each(function(){qu(this,e)})}function AK(e,t){var n,r;return function(){var i=Cs(this,e),s=i.tween;if(s!==n){r=n=s;for(var o=0,a=r.length;o<a;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function MK(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=Cs(this,e),o=s.tween;if(o!==r){i=(r=o).slice();for(var a={name:t,value:n},l=0,c=i.length;l<c;++l)if(i[l].name===t){i[l]=a;break}l===c&&i.push(a)}s.tween=i}}function $K(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Qi(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?AK:MK)(n,e,t))}function b3(e,t,n){var r=e._id;return e.each(function(){var i=Cs(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return Qi(i,r).value[t]}}function jB(e,t){var n;return(typeof t=="number"?Fn:t instanceof Ra?fc:(n=Ra(t))?(t=n,fc):BB)(e,t)}function NK(e){return function(){this.removeAttribute(e)}}function kK(e){return function(){this.removeAttributeNS(e.space,e.local)}}function DK(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttribute(e);return o===i?null:o===r?s:s=t(r=o,n)}}function OK(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?s:s=t(r=o,n)}}function BK(e,t,n){var r,i,s;return function(){var o,a=n(this),l;return a==null?void this.removeAttribute(e):(o=this.getAttribute(e),l=a+"",o===l?null:o===r&&l===i?s:(i=l,s=t(r=o,a)))}}function FK(e,t,n){var r,i,s;return function(){var o,a=n(this),l;return a==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),l=a+"",o===l?null:o===r&&l===i?s:(i=l,s=t(r=o,a)))}}function LK(e,t){var n=Wb(e),r=n==="transform"?cK:jB;return this.attrTween(e,typeof t=="function"?(n.local?FK:BK)(n,r,b3(this,"attr."+e,t)):t==null?(n.local?kK:NK)(n):(n.local?OK:DK)(n,r,t))}function RK(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function CK(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function UK(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&CK(e,s)),n}return i._value=t,i}function PK(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&RK(e,s)),n}return i._value=t,i}function zK(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=Wb(e);return this.tween(n,(r.local?UK:PK)(r,t))}function jK(e,t){return function(){g3(this,e).delay=+t.apply(this,arguments)}}function VK(e,t){return t=+t,function(){g3(this,e).delay=t}}function YK(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?jK:VK)(t,e)):Qi(this.node(),t).delay}function qK(e,t){return function(){Cs(this,e).duration=+t.apply(this,arguments)}}function WK(e,t){return t=+t,function(){Cs(this,e).duration=t}}function HK(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?qK:WK)(t,e)):Qi(this.node(),t).duration}function GK(e,t){if(typeof t!="function")throw new Error;return function(){Cs(this,e).ease=t}}function XK(e){var t=this._id;return arguments.length?this.each(GK(t,e)):Qi(this.node(),t).ease}function QK(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Cs(this,e).ease=n}}function KK(e){if(typeof e!="function")throw new Error;return this.each(QK(this._id,e))}function ZK(e){typeof e!="function"&&(e=uB(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],l,c=0;c<o;++c)(l=s[c])&&e.call(l,l.__data__,c,s)&&a.push(l);return new Do(r,this._parents,this._name,this._id)}function JK(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var l=t[a],c=n[a],u=l.length,f=o[a]=new Array(u),d,h=0;h<u;++h)(d=l[h]||c[h])&&(f[h]=d);for(;a<r;++a)o[a]=t[a];return new Do(o,this._parents,this._name,this._id)}function tZ(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function eZ(e,t,n){var r,i,s=tZ(t)?g3:Cs;return function(){var o=s(this,e),a=o.on;a!==r&&(i=(r=a).copy()).on(t,n),o.on=i}}function nZ(e,t){var n=this._id;return arguments.length<2?Qi(this.node(),n).on.on(e):this.each(eZ(n,e,t))}function rZ(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function iZ(){return this.on("end.remove",rZ(this._id))}function sZ(e){var t=this._name,n=this._id;typeof e!="function"&&(e=l3(e));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a=r[o],l=a.length,c=s[o]=new Array(l),u,f,d=0;d<l;++d)(u=a[d])&&(f=e.call(u,u.__data__,d,a))&&("__data__"in u&&(f.__data__=u.__data__),c[d]=f,Zb(c[d],t,n,d,c,Qi(u,n)));return new Do(s,this._parents,t,n)}function oZ(e){var t=this._name,n=this._id;typeof e!="function"&&(e=cB(e));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var l=r[a],c=l.length,u,f=0;f<c;++f)if(u=l[f]){for(var d=e.call(u,u.__data__,f,l),h,p=Qi(u,n),g=0,v=d.length;g<v;++g)(h=d[g])&&Zb(h,t,n,g,d,p);s.push(d),o.push(u)}return new Do(s,o,t,n)}var aZ=ny.prototype.constructor;function lZ(){return new aZ(this._groups,this._parents)}function cZ(e,t){var n,r,i;return function(){var s=bf(this,e),o=(this.style.removeProperty(e),bf(this,e));return s===o?null:s===n&&o===r?i:i=t(n=s,r=o)}}function VB(e){return function(){this.style.removeProperty(e)}}function uZ(e,t,n){var r,i=n+"",s;return function(){var o=bf(this,e);return o===i?null:o===r?s:s=t(r=o,n)}}function fZ(e,t,n){var r,i,s;return function(){var o=bf(this,e),a=n(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(e),bf(this,e))),o===l?null:o===r&&l===i?s:(i=l,s=t(r=o,a))}}function dZ(e,t){var n,r,i,s="style."+t,o="end."+s,a;return function(){var l=Cs(this,e),c=l.on,u=l.value[s]==null?a||(a=VB(t)):void 0;(c!==n||i!==u)&&(r=(n=c).copy()).on(o,i=u),l.on=r}}function hZ(e,t,n){var r=(e+="")=="transform"?lK:jB;return t==null?this.styleTween(e,cZ(e,r)).on("end.style."+e,VB(e)):typeof t=="function"?this.styleTween(e,fZ(e,r,b3(this,"style."+e,t))).each(dZ(this._id,e)):this.styleTween(e,uZ(e,r,t),n).on("end.style."+e,null)}function pZ(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function yZ(e,t,n){var r,i;function s(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&pZ(e,o,n)),r}return s._value=t,s}function mZ(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,yZ(e,t,n??""))}function gZ(e){return function(){this.textContent=e}}function bZ(e){return function(){var t=e(this);this.textContent=t??""}}function vZ(e){return this.tween("text",typeof e=="function"?bZ(b3(this,"text",e)):gZ(e==null?"":e+""))}function wZ(e){return function(t){this.textContent=e.call(this,t)}}function _Z(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&wZ(i)),t}return r._value=e,r}function SZ(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,_Z(e))}function xZ(){for(var e=this._name,t=this._id,n=YB(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,l,c=0;c<a;++c)if(l=o[c]){var u=Qi(l,t);Zb(l,e,n,c,o,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new Do(r,this._parents,e,n)}function IZ(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var a={value:o},l={value:function(){--i===0&&s()}};n.each(function(){var c=Cs(this,r),u=c.on;u!==e&&(t=(e=u).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(l)),c.on=t}),i===0&&s()})}var TZ=0;function Do(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function YB(){return++TZ}var js=ny.prototype;Do.prototype={constructor:Do,select:sZ,selectAll:oZ,selectChild:js.selectChild,selectChildren:js.selectChildren,filter:ZK,merge:JK,selection:lZ,transition:xZ,call:js.call,nodes:js.nodes,node:js.node,size:js.size,empty:js.empty,each:js.each,on:nZ,attr:LK,attrTween:zK,style:hZ,styleTween:mZ,text:vZ,textTween:SZ,remove:iZ,tween:$K,delay:YK,duration:HK,ease:XK,easeVarying:KK,end:IZ,[Symbol.iterator]:js[Symbol.iterator]};function EZ(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var AZ={time:null,delay:0,duration:250,ease:EZ};function MZ(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function $Z(e){var t,n;e instanceof Do?(t=e._id,e=e._name):(t=YB(),(n=AZ).time=m3(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,l,c=0;c<a;++c)(l=o[c])&&Zb(l,e,t,c,o,n||MZ(l,t));return new Do(r,this._parents,e,t)}ny.prototype.interrupt=EK;ny.prototype.transition=$Z;const Pw=e=>()=>e;function NZ(e,{sourceEvent:t,target:n,selection:r,mode:i,dispatch:s}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:s}})}function kZ(e){e.stopImmediatePropagation()}function zw(e){e.preventDefault(),e.stopImmediatePropagation()}var i6={name:"drag"},jw={name:"space"},Dc={name:"handle"},Oc={name:"center"};const{abs:s6,max:kn,min:Dn}=Math;function o6(e){return[+e[0],+e[1]]}function pS(e){return[o6(e[0]),o6(e[1])]}var dm={name:"x",handles:["w","e"].map(pp),input:function(e,t){return e==null?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},hm={name:"y",handles:["n","s"].map(pp),input:function(e,t){return e==null?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},DZ={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(pp),input:function(e){return e==null?null:pS(e)},output:function(e){return e}},Vs={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},a6={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},l6={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},OZ={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},BZ={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function pp(e){return{type:e}}function FZ(e){return!e.ctrlKey&&!e.button}function LZ(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function RZ(){return navigator.maxTouchPoints||"ontouchstart"in this}function Vw(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function CZ(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function UZ(){return v3(dm)}function PZ(){return v3(hm)}function zZ(){return v3(DZ)}function v3(e){var t=LZ,n=FZ,r=RZ,i=!0,s=qb("start","brush","end"),o=6,a;function l(v){var y=v.property("__brush",g).selectAll(".overlay").data([pp("overlay")]);y.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Vs.overlay).merge(y).each(function(){var b=Vw(this).extent;me(this).attr("x",b[0][0]).attr("y",b[0][1]).attr("width",b[1][0]-b[0][0]).attr("height",b[1][1]-b[0][1])}),v.selectAll(".selection").data([pp("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Vs.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var m=v.selectAll(".handle").data(e.handles,function(b){return b.type});m.exit().remove(),m.enter().append("rect").attr("class",function(b){return"handle handle--"+b.type}).attr("cursor",function(b){return Vs[b.type]}),v.each(c).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",d).filter(r).on("touchstart.brush",d).on("touchmove.brush",h).on("touchend.brush touchcancel.brush",p).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}l.move=function(v,y,m){v.tween?v.on("start.brush",function(b){u(this,arguments).beforestart().start(b)}).on("interrupt.brush end.brush",function(b){u(this,arguments).end(b)}).tween("brush",function(){var b=this,w=b.__brush,S=u(b,arguments),_=w.selection,x=e.input(typeof y=="function"?y.apply(this,arguments):y,w.extent),E=Qf(_,x);function k(I){w.selection=I===1&&x===null?null:E(I),c.call(b),S.brush()}return _!==null&&x!==null?k:k(1)}):v.each(function(){var b=this,w=arguments,S=b.__brush,_=e.input(typeof y=="function"?y.apply(b,w):y,S.extent),x=u(b,w).beforestart();qu(b),S.selection=_===null?null:_,c.call(b),x.start(m).brush(m).end(m)})},l.clear=function(v,y){l.move(v,null,y)};function c(){var v=me(this),y=Vw(this).selection;y?(v.selectAll(".selection").style("display",null).attr("x",y[0][0]).attr("y",y[0][1]).attr("width",y[1][0]-y[0][0]).attr("height",y[1][1]-y[0][1]),v.selectAll(".handle").style("display",null).attr("x",function(m){return m.type[m.type.length-1]==="e"?y[1][0]-o/2:y[0][0]-o/2}).attr("y",function(m){return m.type[0]==="s"?y[1][1]-o/2:y[0][1]-o/2}).attr("width",function(m){return m.type==="n"||m.type==="s"?y[1][0]-y[0][0]+o:o}).attr("height",function(m){return m.type==="e"||m.type==="w"?y[1][1]-y[0][1]+o:o})):v.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function u(v,y,m){var b=v.__brush.emitter;return b&&(!m||!b.clean)?b:new f(v,y,m)}function f(v,y,m){this.that=v,this.args=y,this.state=v.__brush,this.active=0,this.clean=m}f.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(v,y){return this.starting?(this.starting=!1,this.emit("start",v,y)):this.emit("brush",v),this},brush:function(v,y){return this.emit("brush",v,y),this},end:function(v,y){return--this.active===0&&(delete this.state.emitter,this.emit("end",v,y)),this},emit:function(v,y,m){var b=me(this.that).datum();s.call(v,this.that,new NZ(v,{sourceEvent:y,target:l,selection:e.output(this.state.selection),mode:m,dispatch:s}),b)}};function d(v){if(a&&!v.touches||!n.apply(this,arguments))return;var y=this,m=v.target.__data__.type,b=(i&&v.metaKey?m="overlay":m)==="selection"?i6:i&&v.altKey?Oc:Dc,w=e===hm?null:OZ[m],S=e===dm?null:BZ[m],_=Vw(y),x=_.extent,E=_.selection,k=x[0][0],I,A,D=x[0][1],L,T,M=x[1][0],N,F,O=x[1][1],C,B,P=0,z=0,H,X=w&&S&&i&&v.shiftKey,tt,Z,Y=Array.from(v.touches||[v],st=>{const pe=st.identifier;return st=$i(st,y),st.point0=st.slice(),st.identifier=pe,st});qu(y);var Q=u(y,arguments,!0).beforestart();if(m==="overlay"){E&&(H=!0);const st=[Y[0],Y[1]||Y[0]];_.selection=E=[[I=e===hm?k:Dn(st[0][0],st[1][0]),L=e===dm?D:Dn(st[0][1],st[1][1])],[N=e===hm?M:kn(st[0][0],st[1][0]),C=e===dm?O:kn(st[0][1],st[1][1])]],Y.length>1&&At(v)}else I=E[0][0],L=E[0][1],N=E[1][0],C=E[1][1];A=I,T=L,F=N,B=C;var V=me(y).attr("pointer-events","none"),J=V.selectAll(".overlay").attr("cursor",Vs[m]);if(v.touches)Q.moved=j,Q.ended=at;else{var et=me(v.view).on("mousemove.brush",j,!0).on("mouseup.brush",at,!0);i&&et.on("keydown.brush",qt,!0).on("keyup.brush",Ht,!0),wB(v.view)}c.call(y),Q.start(v,b.name);function j(st){for(const pe of st.changedTouches||[st])for(const Ji of Y)Ji.identifier===pe.identifier&&(Ji.cur=$i(pe,y));if(X&&!tt&&!Z&&Y.length===1){const pe=Y[0];s6(pe.cur[0]-pe[0])>s6(pe.cur[1]-pe[1])?Z=!0:tt=!0}for(const pe of Y)pe.cur&&(pe[0]=pe.cur[0],pe[1]=pe.cur[1]);H=!0,zw(st),At(st)}function At(st){const pe=Y[0],Ji=pe.point0;var Wr;switch(P=pe[0]-Ji[0],z=pe[1]-Ji[1],b){case jw:case i6:{w&&(P=kn(k-I,Dn(M-N,P)),A=I+P,F=N+P),S&&(z=kn(D-L,Dn(O-C,z)),T=L+z,B=C+z);break}case Dc:{Y[1]?(w&&(A=kn(k,Dn(M,Y[0][0])),F=kn(k,Dn(M,Y[1][0])),w=1),S&&(T=kn(D,Dn(O,Y[0][1])),B=kn(D,Dn(O,Y[1][1])),S=1)):(w<0?(P=kn(k-I,Dn(M-I,P)),A=I+P,F=N):w>0&&(P=kn(k-N,Dn(M-N,P)),A=I,F=N+P),S<0?(z=kn(D-L,Dn(O-L,z)),T=L+z,B=C):S>0&&(z=kn(D-C,Dn(O-C,z)),T=L,B=C+z));break}case Oc:{w&&(A=kn(k,Dn(M,I-P*w)),F=kn(k,Dn(M,N+P*w))),S&&(T=kn(D,Dn(O,L-z*S)),B=kn(D,Dn(O,C+z*S)));break}}F<A&&(w*=-1,Wr=I,I=N,N=Wr,Wr=A,A=F,F=Wr,m in a6&&J.attr("cursor",Vs[m=a6[m]])),B<T&&(S*=-1,Wr=L,L=C,C=Wr,Wr=T,T=B,B=Wr,m in l6&&J.attr("cursor",Vs[m=l6[m]])),_.selection&&(E=_.selection),tt&&(A=E[0][0],F=E[1][0]),Z&&(T=E[0][1],B=E[1][1]),(E[0][0]!==A||E[0][1]!==T||E[1][0]!==F||E[1][1]!==B)&&(_.selection=[[A,T],[F,B]],c.call(y),Q.brush(st,b.name))}function at(st){if(kZ(st),st.touches){if(st.touches.length)return;a&&clearTimeout(a),a=setTimeout(function(){a=null},500)}else _B(st.view,H),et.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);V.attr("pointer-events","all"),J.attr("cursor",Vs.overlay),_.selection&&(E=_.selection),CZ(E)&&(_.selection=null,c.call(y)),Q.end(st,b.name)}function qt(st){switch(st.keyCode){case 16:{X=w&&S;break}case 18:{b===Dc&&(w&&(N=F-P*w,I=A+P*w),S&&(C=B-z*S,L=T+z*S),b=Oc,At(st));break}case 32:{(b===Dc||b===Oc)&&(w<0?N=F-P:w>0&&(I=A-P),S<0?C=B-z:S>0&&(L=T-z),b=jw,J.attr("cursor",Vs.selection),At(st));break}default:return}zw(st)}function Ht(st){switch(st.keyCode){case 16:{X&&(tt=Z=X=!1,At(st));break}case 18:{b===Oc&&(w<0?N=F:w>0&&(I=A),S<0?C=B:S>0&&(L=T),b=Dc,At(st));break}case 32:{b===jw&&(st.altKey?(w&&(N=F-P*w,I=A+P*w),S&&(C=B-z*S,L=T+z*S),b=Oc):(w<0?N=F:w>0&&(I=A),S<0?C=B:S>0&&(L=T),b=Dc),J.attr("cursor",Vs[m]),At(st));break}default:return}zw(st)}}function h(v){u(this,arguments).moved(v)}function p(v){u(this,arguments).ended(v)}function g(){var v=this.__brush||{selection:null};return v.extent=pS(t.apply(this,arguments)),v.dim=e,v}return l.extent=function(v){return arguments.length?(t=typeof v=="function"?v:Pw(pS(v)),l):t},l.filter=function(v){return arguments.length?(n=typeof v=="function"?v:Pw(!!v),l):n},l.touchable=function(v){return arguments.length?(r=typeof v=="function"?v:Pw(!!v),l):r},l.handleSize=function(v){return arguments.length?(o=+v,l):o},l.keyModifiers=function(v){return arguments.length?(i=!!v,l):i},l.on=function(){var v=s.on.apply(s,arguments);return v===s?l:v},l}const yS=Math.PI,mS=2*yS,El=1e-6,jZ=mS-El;function qB(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function VZ(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return qB;const n=10**t;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let WB=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?qB:VZ(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,s,o){this._append`C${+t},${+n},${+r},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(t,n,r,i,s){if(t=+t,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,l=r-t,c=i-n,u=o-t,f=a-n,d=u*u+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(d>El)if(!(Math.abs(f*l-c*u)>El)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let h=r-o,p=i-a,g=l*l+c*c,v=h*h+p*p,y=Math.sqrt(g),m=Math.sqrt(d),b=s*Math.tan((yS-Math.acos((g+d-v)/(2*y*m)))/2),w=b/m,S=b/y;Math.abs(w-1)>El&&this._append`L${t+w*u},${n+w*f}`,this._append`A${s},${s},0,0,${+(f*h>u*p)},${this._x1=t+S*l},${this._y1=n+S*c}`}}arc(t,n,r,i,s,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),l=r*Math.sin(i),c=t+a,u=n+l,f=1^o,d=o?i-s:s-i;this._x1===null?this._append`M${c},${u}`:(Math.abs(this._x1-c)>El||Math.abs(this._y1-u)>El)&&this._append`L${c},${u}`,r&&(d<0&&(d=d%mS+mS),d>jZ?this._append`A${r},${r},0,1,${f},${t-a},${n-l}A${r},${r},0,1,${f},${this._x1=c},${this._y1=u}`:d>El&&this._append`A${r},${r},0,${+(d>=yS)},${f},${this._x1=t+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function go(e=3){return new WB(+e)}var YZ=Array.prototype,HB=YZ.slice;function qZ(e,t){return e-t}function WZ(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}const sa=e=>()=>e;function HZ(e,t){for(var n=-1,r=t.length,i;++n<r;)if(i=GZ(e,t[n]))return i;return 0}function GZ(e,t){for(var n=t[0],r=t[1],i=-1,s=0,o=e.length,a=o-1;s<o;a=s++){var l=e[s],c=l[0],u=l[1],f=e[a],d=f[0],h=f[1];if(XZ(l,f,t))return 0;u>r!=h>r&&n<(d-c)*(r-u)/(h-u)+c&&(i=-i)}return i}function XZ(e,t,n){var r;return QZ(e,t,n)&&KZ(e[r=+(e[0]===t[0])],n[r],t[r])}function QZ(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function KZ(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function ZZ(){}var Ys=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function zg(){var e=1,t=1,n=o3,r=l;function i(c){var u=n(c);if(Array.isArray(u))u=u.slice().sort(qZ);else{const f=gn(c,JZ);for(u=Fa(...rB(f[0],f[1],u),u);u[u.length-1]>=f[1];)u.pop();for(;u[1]<f[0];)u.shift()}return u.map(f=>s(c,f))}function s(c,u){const f=u==null?NaN:+u;if(isNaN(f))throw new Error(`invalid value: ${u}`);var d=[],h=[];return o(c,f,function(p){r(p,c,f),WZ(p)>0?d.push([p]):h.push(p)}),h.forEach(function(p){for(var g=0,v=d.length,y;g<v;++g)if(HZ((y=d[g])[0],p)!==-1){y.push(p);return}}),{type:"MultiPolygon",value:u,coordinates:d}}function o(c,u,f){var d=new Array,h=new Array,p,g,v,y,m,b;for(p=g=-1,y=dl(c[0],u),Ys[y<<1].forEach(w);++p<e-1;)v=y,y=dl(c[p+1],u),Ys[v|y<<1].forEach(w);for(Ys[y<<0].forEach(w);++g<t-1;){for(p=-1,y=dl(c[g*e+e],u),m=dl(c[g*e],u),Ys[y<<1|m<<2].forEach(w);++p<e-1;)v=y,y=dl(c[g*e+e+p+1],u),b=m,m=dl(c[g*e+p+1],u),Ys[v|y<<1|m<<2|b<<3].forEach(w);Ys[y|m<<3].forEach(w)}for(p=-1,m=c[g*e]>=u,Ys[m<<2].forEach(w);++p<e-1;)b=m,m=dl(c[g*e+p+1],u),Ys[m<<2|b<<3].forEach(w);Ys[m<<3].forEach(w);function w(S){var _=[S[0][0]+p,S[0][1]+g],x=[S[1][0]+p,S[1][1]+g],E=a(_),k=a(x),I,A;(I=h[E])?(A=d[k])?(delete h[I.end],delete d[A.start],I===A?(I.ring.push(x),f(I.ring)):d[I.start]=h[A.end]={start:I.start,end:A.end,ring:I.ring.concat(A.ring)}):(delete h[I.end],I.ring.push(x),h[I.end=k]=I):(I=d[k])?(A=h[E])?(delete d[I.start],delete h[A.end],I===A?(I.ring.push(x),f(I.ring)):d[A.start]=h[I.end]={start:A.start,end:I.end,ring:A.ring.concat(I.ring)}):(delete d[I.start],I.ring.unshift(_),d[I.start=E]=I):d[E]=h[k]={start:E,end:k,ring:[_,x]}}}function a(c){return c[0]*2+c[1]*(e+1)*4}function l(c,u,f){c.forEach(function(d){var h=d[0],p=d[1],g=h|0,v=p|0,y=Yw(u[v*e+g]);h>0&&h<e&&g===h&&(d[0]=c6(h,Yw(u[v*e+g-1]),y,f)),p>0&&p<t&&v===p&&(d[1]=c6(p,Yw(u[(v-1)*e+g]),y,f))})}return i.contour=s,i.size=function(c){if(!arguments.length)return[e,t];var u=Math.floor(c[0]),f=Math.floor(c[1]);if(!(u>=0&&f>=0))throw new Error("invalid size");return e=u,t=f,i},i.thresholds=function(c){return arguments.length?(n=typeof c=="function"?c:Array.isArray(c)?sa(HB.call(c)):sa(c),i):n},i.smooth=function(c){return arguments.length?(r=c?l:ZZ,i):r===l},i}function JZ(e){return isFinite(e)?e:NaN}function dl(e,t){return e==null?!1:+e>=t}function Yw(e){return e==null||isNaN(e=+e)?-1/0:e}function c6(e,t,n,r){const i=r-t,s=n-t,o=isFinite(i)||isFinite(s)?i/s:Math.sign(i)/Math.sign(s);return isNaN(o)?e:e+o-.5}function tJ(e){return e[0]}function eJ(e){return e[1]}function nJ(){return 1}function rJ(){var e=tJ,t=eJ,n=nJ,r=960,i=500,s=20,o=2,a=s*3,l=r+a*2>>o,c=i+a*2>>o,u=sa(20);function f(m){var b=new Float32Array(l*c),w=Math.pow(2,-o),S=-1;for(const L of m){var _=(e(L,++S,m)+a)*w,x=(t(L,S,m)+a)*w,E=+n(L,S,m);if(E&&_>=0&&_<l&&x>=0&&x<c){var k=Math.floor(_),I=Math.floor(x),A=_-k-.5,D=x-I-.5;b[k+I*l]+=(1-A)*(1-D)*E,b[k+1+I*l]+=A*(1-D)*E,b[k+1+(I+1)*l]+=A*D*E,b[k+(I+1)*l]+=(1-A)*D*E}}return KO({data:b,width:l,height:c},s*w),b}function d(m){var b=f(m),w=u(b),S=Math.pow(2,2*o);return Array.isArray(w)||(w=Fa(Number.MIN_VALUE,Ne(b)/S,w)),zg().size([l,c]).thresholds(w.map(_=>_*S))(b).map((_,x)=>(_.value=+w[x],h(_)))}d.contours=function(m){var b=f(m),w=zg().size([l,c]),S=Math.pow(2,2*o),_=x=>{x=+x;var E=h(w.contour(b,x*S));return E.value=x,E};return Object.defineProperty(_,"max",{get:()=>Ne(b)/S}),_};function h(m){return m.coordinates.forEach(p),m}function p(m){m.forEach(g)}function g(m){m.forEach(v)}function v(m){m[0]=m[0]*Math.pow(2,o)-a,m[1]=m[1]*Math.pow(2,o)-a}function y(){return a=s*3,l=r+a*2>>o,c=i+a*2>>o,d}return d.x=function(m){return arguments.length?(e=typeof m=="function"?m:sa(+m),d):e},d.y=function(m){return arguments.length?(t=typeof m=="function"?m:sa(+m),d):t},d.weight=function(m){return arguments.length?(n=typeof m=="function"?m:sa(+m),d):n},d.size=function(m){if(!arguments.length)return[r,i];var b=+m[0],w=+m[1];if(!(b>=0&&w>=0))throw new Error("invalid size");return r=b,i=w,y()},d.cellSize=function(m){if(!arguments.length)return 1<<o;if(!((m=+m)>=1))throw new Error("invalid cell size");return o=Math.floor(Math.log(m)/Math.LN2),y()},d.thresholds=function(m){return arguments.length?(u=typeof m=="function"?m:Array.isArray(m)?sa(HB.call(m)):sa(m),d):u},d.bandwidth=function(m){if(!arguments.length)return Math.sqrt(s*(s+1));if(!((m=+m)>=0))throw new Error("invalid bandwidth");return s=(Math.sqrt(4*m*m+1)-1)/2,y()},d}const So=11102230246251565e-32,On=134217729,iJ=(3+8*So)*So;function qw(e,t,n,r,i){let s,o,a,l,c=t[0],u=r[0],f=0,d=0;u>c==u>-c?(s=c,c=t[++f]):(s=u,u=r[++d]);let h=0;if(f<e&&d<n)for(u>c==u>-c?(o=c+s,a=s-(o-c),c=t[++f]):(o=u+s,a=s-(o-u),u=r[++d]),s=o,a!==0&&(i[h++]=a);f<e&&d<n;)u>c==u>-c?(o=s+c,l=o-s,a=s-(o-l)+(c-l),c=t[++f]):(o=s+u,l=o-s,a=s-(o-l)+(u-l),u=r[++d]),s=o,a!==0&&(i[h++]=a);for(;f<e;)o=s+c,l=o-s,a=s-(o-l)+(c-l),c=t[++f],s=o,a!==0&&(i[h++]=a);for(;d<n;)o=s+u,l=o-s,a=s-(o-l)+(u-l),u=r[++d],s=o,a!==0&&(i[h++]=a);return(s!==0||h===0)&&(i[h++]=s),h}function sJ(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}function iy(e){return new Float64Array(e)}const oJ=(3+16*So)*So,aJ=(2+12*So)*So,lJ=(9+64*So)*So*So,Bc=iy(4),u6=iy(8),f6=iy(12),d6=iy(16),jn=iy(4);function cJ(e,t,n,r,i,s,o){let a,l,c,u,f,d,h,p,g,v,y,m,b,w,S,_,x,E;const k=e-i,I=n-i,A=t-s,D=r-s;w=k*D,d=On*k,h=d-(d-k),p=k-h,d=On*D,g=d-(d-D),v=D-g,S=p*v-(w-h*g-p*g-h*v),_=A*I,d=On*A,h=d-(d-A),p=A-h,d=On*I,g=d-(d-I),v=I-g,x=p*v-(_-h*g-p*g-h*v),y=S-x,f=S-y,Bc[0]=S-(y+f)+(f-x),m=w+y,f=m-w,b=w-(m-f)+(y-f),y=b-_,f=b-y,Bc[1]=b-(y+f)+(f-_),E=m+y,f=E-m,Bc[2]=m-(E-f)+(y-f),Bc[3]=E;let L=sJ(4,Bc),T=aJ*o;if(L>=T||-L>=T||(f=e-k,a=e-(k+f)+(f-i),f=n-I,c=n-(I+f)+(f-i),f=t-A,l=t-(A+f)+(f-s),f=r-D,u=r-(D+f)+(f-s),a===0&&l===0&&c===0&&u===0)||(T=lJ*o+iJ*Math.abs(L),L+=k*u+D*a-(A*c+I*l),L>=T||-L>=T))return L;w=a*D,d=On*a,h=d-(d-a),p=a-h,d=On*D,g=d-(d-D),v=D-g,S=p*v-(w-h*g-p*g-h*v),_=l*I,d=On*l,h=d-(d-l),p=l-h,d=On*I,g=d-(d-I),v=I-g,x=p*v-(_-h*g-p*g-h*v),y=S-x,f=S-y,jn[0]=S-(y+f)+(f-x),m=w+y,f=m-w,b=w-(m-f)+(y-f),y=b-_,f=b-y,jn[1]=b-(y+f)+(f-_),E=m+y,f=E-m,jn[2]=m-(E-f)+(y-f),jn[3]=E;const M=qw(4,Bc,4,jn,u6);w=k*u,d=On*k,h=d-(d-k),p=k-h,d=On*u,g=d-(d-u),v=u-g,S=p*v-(w-h*g-p*g-h*v),_=A*c,d=On*A,h=d-(d-A),p=A-h,d=On*c,g=d-(d-c),v=c-g,x=p*v-(_-h*g-p*g-h*v),y=S-x,f=S-y,jn[0]=S-(y+f)+(f-x),m=w+y,f=m-w,b=w-(m-f)+(y-f),y=b-_,f=b-y,jn[1]=b-(y+f)+(f-_),E=m+y,f=E-m,jn[2]=m-(E-f)+(y-f),jn[3]=E;const N=qw(M,u6,4,jn,f6);w=a*u,d=On*a,h=d-(d-a),p=a-h,d=On*u,g=d-(d-u),v=u-g,S=p*v-(w-h*g-p*g-h*v),_=l*c,d=On*l,h=d-(d-l),p=l-h,d=On*c,g=d-(d-c),v=c-g,x=p*v-(_-h*g-p*g-h*v),y=S-x,f=S-y,jn[0]=S-(y+f)+(f-x),m=w+y,f=m-w,b=w-(m-f)+(y-f),y=b-_,f=b-y,jn[1]=b-(y+f)+(f-_),E=m+y,f=E-m,jn[2]=m-(E-f)+(y-f),jn[3]=E;const F=qw(N,f6,4,jn,d6);return d6[F-1]}function d0(e,t,n,r,i,s){const o=(t-s)*(n-i),a=(e-i)*(r-s),l=o-a,c=Math.abs(o+a);return Math.abs(l)>=oJ*c?l:-cJ(e,t,n,r,i,s,c)}const h6=Math.pow(2,-52),h0=new Uint32Array(512);class jg{static from(t,n=pJ,r=yJ){const i=t.length,s=new Float64Array(i*2);for(let o=0;o<i;o++){const a=t[o];s[2*o]=n(a),s[2*o+1]=r(a)}return new jg(s)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:s}=this,o=t.length>>1;let a=1/0,l=1/0,c=-1/0,u=-1/0;for(let I=0;I<o;I++){const A=t[2*I],D=t[2*I+1];A<a&&(a=A),D<l&&(l=D),A>c&&(c=A),D>u&&(u=D),this._ids[I]=I}const f=(a+c)/2,d=(l+u)/2;let h=1/0,p,g,v;for(let I=0;I<o;I++){const A=Ww(f,d,t[2*I],t[2*I+1]);A<h&&(p=I,h=A)}const y=t[2*p],m=t[2*p+1];h=1/0;for(let I=0;I<o;I++){if(I===p)continue;const A=Ww(y,m,t[2*I],t[2*I+1]);A<h&&A>0&&(g=I,h=A)}let b=t[2*g],w=t[2*g+1],S=1/0;for(let I=0;I<o;I++){if(I===p||I===g)continue;const A=dJ(y,m,b,w,t[2*I],t[2*I+1]);A<S&&(v=I,S=A)}let _=t[2*v],x=t[2*v+1];if(S===1/0){for(let D=0;D<o;D++)this._dists[D]=t[2*D]-t[0]||t[2*D+1]-t[1];xu(this._ids,this._dists,0,o-1);const I=new Uint32Array(o);let A=0;for(let D=0,L=-1/0;D<o;D++){const T=this._ids[D];this._dists[T]>L&&(I[A++]=T,L=this._dists[T])}this.hull=I.subarray(0,A),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(d0(y,m,b,w,_,x)<0){const I=g,A=b,D=w;g=v,b=_,w=x,v=I,_=A,x=D}const E=hJ(y,m,b,w,_,x);this._cx=E.x,this._cy=E.y;for(let I=0;I<o;I++)this._dists[I]=Ww(t[2*I],t[2*I+1],E.x,E.y);xu(this._ids,this._dists,0,o-1),this._hullStart=p;let k=3;r[p]=n[v]=g,r[g]=n[p]=v,r[v]=n[g]=p,i[p]=0,i[g]=1,i[v]=2,s.fill(-1),s[this._hashKey(y,m)]=p,s[this._hashKey(b,w)]=g,s[this._hashKey(_,x)]=v,this.trianglesLen=0,this._addTriangle(p,g,v,-1,-1,-1);for(let I=0,A,D;I<this._ids.length;I++){const L=this._ids[I],T=t[2*L],M=t[2*L+1];if(I>0&&Math.abs(T-A)<=h6&&Math.abs(M-D)<=h6||(A=T,D=M,L===p||L===g||L===v))continue;let N=0;for(let P=0,z=this._hashKey(T,M);P<this._hashSize&&(N=s[(z+P)%this._hashSize],!(N!==-1&&N!==r[N]));P++);N=n[N];let F=N,O;for(;O=r[F],d0(T,M,t[2*F],t[2*F+1],t[2*O],t[2*O+1])>=0;)if(F=O,F===N){F=-1;break}if(F===-1)continue;let C=this._addTriangle(F,L,r[F],-1,-1,i[F]);i[L]=this._legalize(C+2),i[F]=C,k++;let B=r[F];for(;O=r[B],d0(T,M,t[2*B],t[2*B+1],t[2*O],t[2*O+1])<0;)C=this._addTriangle(B,L,O,i[L],-1,i[B]),i[L]=this._legalize(C+2),r[B]=B,k--,B=O;if(F===N)for(;O=n[F],d0(T,M,t[2*O],t[2*O+1],t[2*F],t[2*F+1])<0;)C=this._addTriangle(O,L,F,-1,i[F],i[O]),this._legalize(C+2),i[O]=C,r[F]=F,k--,F=O;this._hullStart=n[L]=F,r[F]=n[B]=L,r[L]=B,s[this._hashKey(T,M)]=L,s[this._hashKey(t[2*F],t[2*F+1])]=F}this.hull=new Uint32Array(k);for(let I=0,A=this._hullStart;I<k;I++)this.hull[I]=A,A=r[A];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(uJ(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:r,coords:i}=this;let s=0,o=0;for(;;){const a=r[t],l=t-t%3;if(o=l+(t+2)%3,a===-1){if(s===0)break;t=h0[--s];continue}const c=a-a%3,u=l+(t+1)%3,f=c+(a+2)%3,d=n[o],h=n[t],p=n[u],g=n[f];if(fJ(i[2*d],i[2*d+1],i[2*h],i[2*h+1],i[2*p],i[2*p+1],i[2*g],i[2*g+1])){n[t]=g,n[a]=d;const y=r[f];if(y===-1){let b=this._hullStart;do{if(this._hullTri[b]===f){this._hullTri[b]=t;break}b=this._hullPrev[b]}while(b!==this._hullStart)}this._link(t,y),this._link(a,r[o]),this._link(o,f);const m=c+(a+1)%3;s<h0.length&&(h0[s++]=m)}else{if(s===0)break;t=h0[--s]}}return o}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,r,i,s,o){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=n,this._triangles[a+2]=r,this._link(a,i),this._link(a+1,s),this._link(a+2,o),this.trianglesLen+=3,a}}function uJ(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function Ww(e,t,n,r){const i=e-n,s=t-r;return i*i+s*s}function fJ(e,t,n,r,i,s,o,a){const l=e-o,c=t-a,u=n-o,f=r-a,d=i-o,h=s-a,p=l*l+c*c,g=u*u+f*f,v=d*d+h*h;return l*(f*v-g*h)-c*(u*v-g*d)+p*(u*h-f*d)<0}function dJ(e,t,n,r,i,s){const o=n-e,a=r-t,l=i-e,c=s-t,u=o*o+a*a,f=l*l+c*c,d=.5/(o*c-a*l),h=(c*u-a*f)*d,p=(o*f-l*u)*d;return h*h+p*p}function hJ(e,t,n,r,i,s){const o=n-e,a=r-t,l=i-e,c=s-t,u=o*o+a*a,f=l*l+c*c,d=.5/(o*c-a*l),h=e+(c*u-a*f)*d,p=t+(o*f-l*u)*d;return{x:h,y:p}}function xu(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const s=e[i],o=t[s];let a=i-1;for(;a>=n&&t[e[a]]>o;)e[a+1]=e[a--];e[a+1]=s}else{const i=n+r>>1;let s=n+1,o=r;Ed(e,i,s),t[e[n]]>t[e[r]]&&Ed(e,n,r),t[e[s]]>t[e[r]]&&Ed(e,s,r),t[e[n]]>t[e[s]]&&Ed(e,n,s);const a=e[s],l=t[a];for(;;){do s++;while(t[e[s]]<l);do o--;while(t[e[o]]>l);if(o<s)break;Ed(e,s,o)}e[n+1]=e[o],e[o]=a,r-s+1>=o-n?(xu(e,t,s,r),xu(e,t,n,o-1)):(xu(e,t,n,o-1),xu(e,t,s,r))}}function Ed(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function pJ(e){return e[0]}function yJ(e){return e[1]}const p6=1e-6;class Fl{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,r){t=+t,n=+n,r=+r;const i=t+r,s=n;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${s}`:(Math.abs(this._x1-i)>p6||Math.abs(this._y1-s)>p6)&&(this._+="L"+i+","+s),r&&(this._+=`A${r},${r},0,1,1,${t-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=s}`)}rect(t,n,r,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class gS{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let mJ=class{constructor(t,[n,r,i,s]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((s=+s)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=i,this.xmin=n,this.ymax=s,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:r},vectors:i}=this;let s,o;const a=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let g=0,v=0,y=r.length,m,b;g<y;g+=3,v+=2){const w=r[g]*2,S=r[g+1]*2,_=r[g+2]*2,x=t[w],E=t[w+1],k=t[S],I=t[S+1],A=t[_],D=t[_+1],L=k-x,T=I-E,M=A-x,N=D-E,F=(L*N-T*M)*2;if(Math.abs(F)<1e-9){if(s===void 0){s=o=0;for(const C of n)s+=t[C*2],o+=t[C*2+1];s/=n.length,o/=n.length}const O=1e9*Math.sign((s-x)*N-(o-E)*M);m=(x+A)/2-O*N,b=(E+D)/2+O*M}else{const O=1/F,C=L*L+T*T,B=M*M+N*N;m=x+(N*C-T*B)*O,b=E+(L*B-M*C)*O}a[v]=m,a[v+1]=b}let l=n[n.length-1],c,u=l*4,f,d=t[2*l],h,p=t[2*l+1];i.fill(0);for(let g=0;g<n.length;++g)l=n[g],c=u,f=d,h=p,u=l*4,d=t[2*l],p=t[2*l+1],i[c+2]=i[u]=h-p,i[c+3]=i[u+1]=d-f}render(t){const n=t==null?t=new Fl:void 0,{delaunay:{halfedges:r,inedges:i,hull:s},circumcenters:o,vectors:a}=this;if(s.length<=1)return null;for(let u=0,f=r.length;u<f;++u){const d=r[u];if(d<u)continue;const h=Math.floor(u/3)*2,p=Math.floor(d/3)*2,g=o[h],v=o[h+1],y=o[p],m=o[p+1];this._renderSegment(g,v,y,m,t)}let l,c=s[s.length-1];for(let u=0;u<s.length;++u){l=c,c=s[u];const f=Math.floor(i[c]/3)*2,d=o[f],h=o[f+1],p=l*4,g=this._project(d,h,a[p+2],a[p+3]);g&&this._renderSegment(d,h,g[0],g[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new Fl:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const r=n==null?n=new Fl:void 0,i=this._clip(t);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let s=i.length;for(;i[0]===i[s-2]&&i[1]===i[s-1]&&s>1;)s-=2;for(let o=2;o<s;o+=2)(i[o]!==i[o-2]||i[o+1]!==i[o-1])&&n.lineTo(i[o],i[o+1]);return n.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,r=t.length/2;n<r;++n){const i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(t){const n=new gS;return this.renderCell(t,n),n.value()}_renderSegment(t,n,r,i,s){let o;const a=this._regioncode(t,n),l=this._regioncode(r,i);a===0&&l===0?(s.moveTo(t,n),s.lineTo(r,i)):(o=this._clipSegment(t,n,r,i,a,l))&&(s.moveTo(o[0],o[1]),s.lineTo(o[2],o[3]))}contains(t,n,r){return n=+n,n!==n||(r=+r,r!==r)?!1:this.delaunay._step(t,n,r)===t}*neighbors(t){const n=this._clip(t);if(n)for(const r of this.delaunay.neighbors(t)){const i=this._clip(r);if(i){t:for(let s=0,o=n.length;s<o;s+=2)for(let a=0,l=i.length;a<l;a+=2)if(n[s]===i[a]&&n[s+1]===i[a+1]&&n[(s+2)%o]===i[(a+l-2)%l]&&n[(s+3)%o]===i[(a+l-1)%l]){yield r;break t}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:s}}=this,o=r[t];if(o===-1)return null;const a=[];let l=o;do{const c=Math.floor(l/3);if(a.push(n[c*2],n[c*2+1]),l=l%3===2?l-2:l+1,s[l]!==t)break;l=i[l]}while(l!==o&&l!==-1);return a}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:r}=this,i=t*4;return this._simplify(r[i]||r[i+1]?this._clipInfinite(t,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(t,n))}_clipFinite(t,n){const r=n.length;let i=null,s,o,a=n[r-2],l=n[r-1],c,u=this._regioncode(a,l),f,d=0;for(let h=0;h<r;h+=2)if(s=a,o=l,a=n[h],l=n[h+1],c=u,u=this._regioncode(a,l),c===0&&u===0)f=d,d=0,i?i.push(a,l):i=[a,l];else{let p,g,v,y,m;if(c===0){if((p=this._clipSegment(s,o,a,l,c,u))===null)continue;[g,v,y,m]=p}else{if((p=this._clipSegment(a,l,s,o,u,c))===null)continue;[y,m,g,v]=p,f=d,d=this._edgecode(g,v),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(g,v):i=[g,v]}f=d,d=this._edgecode(y,m),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(y,m):i=[y,m]}if(i)f=d,d=this._edgecode(i[0],i[1]),f&&d&&this._edge(t,f,d,i,i.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(t,n,r,i,s,o){const a=s<o;for(a&&([t,n,r,i,s,o]=[r,i,t,n,o,s]);;){if(s===0&&o===0)return a?[r,i,t,n]:[t,n,r,i];if(s&o)return null;let l,c,u=s||o;u&8?(l=t+(r-t)*(this.ymax-n)/(i-n),c=this.ymax):u&4?(l=t+(r-t)*(this.ymin-n)/(i-n),c=this.ymin):u&2?(c=n+(i-n)*(this.xmax-t)/(r-t),l=this.xmax):(c=n+(i-n)*(this.xmin-t)/(r-t),l=this.xmin),s?(t=l,n=c,s=this._regioncode(t,n)):(r=l,i=c,o=this._regioncode(r,i))}}_clipInfinite(t,n,r,i,s,o){let a=Array.from(n),l;if((l=this._project(a[0],a[1],r,i))&&a.unshift(l[0],l[1]),(l=this._project(a[a.length-2],a[a.length-1],s,o))&&a.push(l[0],l[1]),a=this._clipFinite(t,a))for(let c=0,u=a.length,f,d=this._edgecode(a[u-2],a[u-1]);c<u;c+=2)f=d,d=this._edgecode(a[c],a[c+1]),f&&d&&(c=this._edge(t,f,d,a,c),u=a.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(t,n,r,i,s){for(;n!==r;){let o,a;switch(n){case 5:n=4;continue;case 4:n=6,o=this.xmax,a=this.ymin;break;case 6:n=2;continue;case 2:n=10,o=this.xmax,a=this.ymax;break;case 10:n=8;continue;case 8:n=9,o=this.xmin,a=this.ymax;break;case 9:n=1;continue;case 1:n=5,o=this.xmin,a=this.ymin;break}(i[s]!==o||i[s+1]!==a)&&this.contains(t,o,a)&&(i.splice(s,0,o,a),s+=2)}return s}_project(t,n,r,i){let s=1/0,o,a,l;if(i<0){if(n<=this.ymin)return null;(o=(this.ymin-n)/i)<s&&(l=this.ymin,a=t+(s=o)*r)}else if(i>0){if(n>=this.ymax)return null;(o=(this.ymax-n)/i)<s&&(l=this.ymax,a=t+(s=o)*r)}if(r>0){if(t>=this.xmax)return null;(o=(this.xmax-t)/r)<s&&(a=this.xmax,l=n+(s=o)*i)}else if(r<0){if(t<=this.xmin)return null;(o=(this.xmin-t)/r)<s&&(a=this.xmin,l=n+(s=o)*i)}return[a,l]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const r=(n+2)%t.length,i=(n+4)%t.length;(t[n]===t[r]&&t[r]===t[i]||t[n+1]===t[r+1]&&t[r+1]===t[i+1])&&(t.splice(r,2),n-=2)}t.length||(t=null)}return t}};const gJ=2*Math.PI,Fc=Math.pow;function bJ(e){return e[0]}function vJ(e){return e[1]}function wJ(e){const{triangles:t,coords:n}=e;for(let r=0;r<t.length;r+=3){const i=2*t[r],s=2*t[r+1],o=2*t[r+2];if((n[o]-n[i])*(n[s+1]-n[i+1])-(n[s]-n[i])*(n[o+1]-n[i+1])>1e-10)return!1}return!0}function _J(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class el{static from(t,n=bJ,r=vJ,i){return new el("length"in t?SJ(t,n,r,i):Float64Array.from(xJ(t,n,r,i)))}constructor(t){this._delaunator=new jg(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&wJ(t)){this.collinear=Int32Array.from({length:n.length/2},(d,h)=>h).sort((d,h)=>n[2*d]-n[2*h]||n[2*d+1]-n[2*h+1]);const l=this.collinear[0],c=this.collinear[this.collinear.length-1],u=[n[2*l],n[2*l+1],n[2*c],n[2*c+1]],f=1e-8*Math.hypot(u[3]-u[1],u[2]-u[0]);for(let d=0,h=n.length/2;d<h;++d){const p=_J(n[2*d],n[2*d+1],f);n[2*d]=p[0],n[2*d+1]=p[1]}this._delaunator=new jg(n)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,s=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let l=0,c=r.length;l<c;++l){const u=s[l%3===2?l-2:l+1];(r[l]===-1||o[u]===-1)&&(o[u]=l)}for(let l=0,c=i.length;l<c;++l)a[i[l]]=l;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],o[i[0]]=1,i.length===2&&(o[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(t){return new mJ(this,t)}*neighbors(t){const{inedges:n,hull:r,_hullIndex:i,halfedges:s,triangles:o,collinear:a}=this;if(a){const f=a.indexOf(t);f>0&&(yield a[f-1]),f<a.length-1&&(yield a[f+1]);return}const l=n[t];if(l===-1)return;let c=l,u=-1;do{if(yield u=o[c],c=c%3===2?c-2:c+1,o[c]!==t)return;if(c=s[c],c===-1){const f=r[(i[t]+1)%r.length];f!==u&&(yield f);return}}while(c!==l)}find(t,n,r=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const i=r;let s;for(;(s=this._step(r,t,n))>=0&&s!==r&&s!==i;)r=s;return s}_step(t,n,r){const{inedges:i,hull:s,_hullIndex:o,halfedges:a,triangles:l,points:c}=this;if(i[t]===-1||!c.length)return(t+1)%(c.length>>1);let u=t,f=Fc(n-c[t*2],2)+Fc(r-c[t*2+1],2);const d=i[t];let h=d;do{let p=l[h];const g=Fc(n-c[p*2],2)+Fc(r-c[p*2+1],2);if(g<f&&(f=g,u=p),h=h%3===2?h-2:h+1,l[h]!==t)break;if(h=a[h],h===-1){if(h=s[(o[t]+1)%s.length],h!==p&&Fc(n-c[h*2],2)+Fc(r-c[h*2+1],2)<f)return h;break}}while(h!==d);return u}render(t){const n=t==null?t=new Fl:void 0,{points:r,halfedges:i,triangles:s}=this;for(let o=0,a=i.length;o<a;++o){const l=i[o];if(l<o)continue;const c=s[o]*2,u=s[l]*2;t.moveTo(r[c],r[c+1]),t.lineTo(r[u],r[u+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const r=t==null?t=new Fl:void 0,{points:i}=this;for(let s=0,o=i.length;s<o;s+=2){const a=i[s],l=i[s+1];t.moveTo(a+n,l),t.arc(a,l,n,0,gJ)}return r&&r.value()}renderHull(t){const n=t==null?t=new Fl:void 0,{hull:r,points:i}=this,s=r[0]*2,o=r.length;t.moveTo(i[s],i[s+1]);for(let a=1;a<o;++a){const l=2*r[a];t.lineTo(i[l],i[l+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new gS;return this.renderHull(t),t.value()}renderTriangle(t,n){const r=n==null?n=new Fl:void 0,{points:i,triangles:s}=this,o=s[t*=3]*2,a=s[t+1]*2,l=s[t+2]*2;return n.moveTo(i[o],i[o+1]),n.lineTo(i[a],i[a+1]),n.lineTo(i[l],i[l+1]),n.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,r=t.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new gS;return this.renderTriangle(t,n),n.value()}}function SJ(e,t,n,r){const i=e.length,s=new Float64Array(i*2);for(let o=0;o<i;++o){const a=e[o];s[o*2]=t.call(r,a,o,e),s[o*2+1]=n.call(r,a,o,e)}return s}function*xJ(e,t,n,r){let i=0;for(const s of e)yield t.call(r,s,i,e),yield n.call(r,s,i,e),++i}function IJ(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Vg(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function _f(e){return e=Vg(Math.abs(e)),e?e[1]:NaN}function TJ(e,t){return function(n,r){for(var i=n.length,s=[],o=0,a=e[0],l=0;i>0&&a>0&&(l+a+1>r&&(a=Math.max(1,r-l)),s.push(n.substring(i-=a,i+a)),!((l+=a+1)>r));)a=e[o=(o+1)%e.length];return s.reverse().join(t)}}function EJ(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var AJ=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function yp(e){if(!(t=AJ.exec(e)))throw new Error("invalid format: "+e);var t;return new w3({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}yp.prototype=w3.prototype;function w3(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}w3.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function MJ(e){t:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break t;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var GB;function $J(e,t){var n=Vg(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(GB=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+Vg(e,Math.max(0,t+s-1))[0]}function y6(e,t){var n=Vg(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const m6={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:IJ,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>y6(e*100,t),r:y6,s:$J,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function g6(e){return e}var b6=Array.prototype.map,v6=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function NJ(e){var t=e.grouping===void 0||e.thousands===void 0?g6:TJ(b6.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?g6:EJ(b6.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function c(f){f=yp(f);var d=f.fill,h=f.align,p=f.sign,g=f.symbol,v=f.zero,y=f.width,m=f.comma,b=f.precision,w=f.trim,S=f.type;S==="n"?(m=!0,S="g"):m6[S]||(b===void 0&&(b=12),w=!0,S="g"),(v||d==="0"&&h==="=")&&(v=!0,d="0",h="=");var _=g==="$"?n:g==="#"&&/[boxX]/.test(S)?"0"+S.toLowerCase():"",x=g==="$"?r:/[%p]/.test(S)?o:"",E=m6[S],k=/[defgprs%]/.test(S);b=b===void 0?6:/[gprs]/.test(S)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function I(A){var D=_,L=x,T,M,N;if(S==="c")L=E(A)+L,A="";else{A=+A;var F=A<0||1/A<0;if(A=isNaN(A)?l:E(Math.abs(A),b),w&&(A=MJ(A)),F&&+A==0&&p!=="+"&&(F=!1),D=(F?p==="("?p:a:p==="-"||p==="("?"":p)+D,L=(S==="s"?v6[8+GB/3]:"")+L+(F&&p==="("?")":""),k){for(T=-1,M=A.length;++T<M;)if(N=A.charCodeAt(T),48>N||N>57){L=(N===46?i+A.slice(T+1):A.slice(T))+L,A=A.slice(0,T);break}}}m&&!v&&(A=t(A,1/0));var O=D.length+A.length+L.length,C=O<y?new Array(y-O+1).join(d):"";switch(m&&v&&(A=t(C+A,C.length?y-L.length:1/0),C=""),h){case"<":A=D+A+L+C;break;case"=":A=D+C+A+L;break;case"^":A=C.slice(0,O=C.length>>1)+D+A+L+C.slice(O);break;default:A=C+D+A+L;break}return s(A)}return I.toString=function(){return f+""},I}function u(f,d){var h=c((f=yp(f),f.type="f",f)),p=Math.max(-8,Math.min(8,Math.floor(_f(d)/3)))*3,g=Math.pow(10,-p),v=v6[8+p/3];return function(y){return h(g*y)+v}}return{format:c,formatPrefix:u}}var p0,Kf,XB;kJ({thousands:",",grouping:[3],currency:["$",""]});function kJ(e){return p0=NJ(e),Kf=p0.format,XB=p0.formatPrefix,p0}function DJ(e){return Math.max(0,-_f(Math.abs(e)))}function OJ(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(_f(t)/3)))*3-_f(Math.abs(e)))}function BJ(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,_f(t)-_f(e))+1}var yt=1e-6,Yg=1e-12,Rt=Math.PI,He=Rt/2,w6=Rt/4,Pr=Rt*2,xn=180/Rt,Kt=Rt/180,ne=Math.abs,Zf=Math.atan,qi=Math.atan2,vt=Math.cos,y0=Math.ceil,QB=Math.exp,bS=Math.hypot,qg=Math.log,Hw=Math.pow,lt=Math.sin,li=Math.sign||function(e){return e>0?1:e<0?-1:0},Jn=Math.sqrt,_3=Math.tan;function KB(e){return e>1?0:e<-1?Rt:Math.acos(e)}function wr(e){return e>1?He:e<-1?-He:Math.asin(e)}function Or(){}function Wg(e,t){e&&S6.hasOwnProperty(e.type)&&S6[e.type](e,t)}var _6={Feature:function(e,t){Wg(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)Wg(n[r].geometry,t)}},S6={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){vS(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)vS(n[r],t,0)},Polygon:function(e,t){x6(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)x6(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)Wg(n[r],t)}};function vS(e,t,n){var r=-1,i=e.length-n,s;for(t.lineStart();++r<i;)s=e[r],t.point(s[0],s[1],s[2]);t.lineEnd()}function x6(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)vS(e[n],t,1);t.polygonEnd()}function ca(e,t){e&&_6.hasOwnProperty(e.type)?_6[e.type](e,t):Wg(e,t)}function wS(e){return[qi(e[1],e[0]),wr(e[2])]}function Sf(e){var t=e[0],n=e[1],r=vt(n);return[r*vt(t),r*lt(t),lt(n)]}function m0(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Hg(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function Gw(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function g0(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function _S(e){var t=Jn(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var Zd,Gg,Xg,Qg,Kg,Zg,Jg,t1,SS,xS,IS,ZB,JB,qn,Wn,Hn,Fi={sphere:Or,point:S3,lineStart:I6,lineEnd:T6,polygonStart:function(){Fi.lineStart=RJ,Fi.lineEnd=CJ},polygonEnd:function(){Fi.lineStart=I6,Fi.lineEnd=T6}};function S3(e,t){e*=Kt,t*=Kt;var n=vt(t);sy(n*vt(e),n*lt(e),lt(t))}function sy(e,t,n){++Zd,Xg+=(e-Xg)/Zd,Qg+=(t-Qg)/Zd,Kg+=(n-Kg)/Zd}function I6(){Fi.point=FJ}function FJ(e,t){e*=Kt,t*=Kt;var n=vt(t);qn=n*vt(e),Wn=n*lt(e),Hn=lt(t),Fi.point=LJ,sy(qn,Wn,Hn)}function LJ(e,t){e*=Kt,t*=Kt;var n=vt(t),r=n*vt(e),i=n*lt(e),s=lt(t),o=qi(Jn((o=Wn*s-Hn*i)*o+(o=Hn*r-qn*s)*o+(o=qn*i-Wn*r)*o),qn*r+Wn*i+Hn*s);Gg+=o,Zg+=o*(qn+(qn=r)),Jg+=o*(Wn+(Wn=i)),t1+=o*(Hn+(Hn=s)),sy(qn,Wn,Hn)}function T6(){Fi.point=S3}function RJ(){Fi.point=UJ}function CJ(){tF(ZB,JB),Fi.point=S3}function UJ(e,t){ZB=e,JB=t,e*=Kt,t*=Kt,Fi.point=tF;var n=vt(t);qn=n*vt(e),Wn=n*lt(e),Hn=lt(t),sy(qn,Wn,Hn)}function tF(e,t){e*=Kt,t*=Kt;var n=vt(t),r=n*vt(e),i=n*lt(e),s=lt(t),o=Wn*s-Hn*i,a=Hn*r-qn*s,l=qn*i-Wn*r,c=bS(o,a,l),u=wr(c),f=c&&-u/c;SS.add(f*o),xS.add(f*a),IS.add(f*l),Gg+=u,Zg+=u*(qn+(qn=r)),Jg+=u*(Wn+(Wn=i)),t1+=u*(Hn+(Hn=s)),sy(qn,Wn,Hn)}function PJ(e){Zd=Gg=Xg=Qg=Kg=Zg=Jg=t1=0,SS=new $s,xS=new $s,IS=new $s,ca(e,Fi);var t=+SS,n=+xS,r=+IS,i=bS(t,n,r);return i<Yg&&(t=Zg,n=Jg,r=t1,Gg<yt&&(t=Xg,n=Qg,r=Kg),i=bS(t,n,r),i<Yg)?[NaN,NaN]:[qi(n,t)*xn,wr(r/i)*xn]}function TS(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function ES(e,t){return ne(e)>Rt&&(e-=Math.round(e/Pr)*Pr),[e,t]}ES.invert=ES;function eF(e,t,n){return(e%=Pr)?t||n?TS(A6(e),M6(t,n)):A6(e):t||n?M6(t,n):ES}function E6(e){return function(t,n){return t+=e,ne(t)>Rt&&(t-=Math.round(t/Pr)*Pr),[t,n]}}function A6(e){var t=E6(e);return t.invert=E6(-e),t}function M6(e,t){var n=vt(e),r=lt(e),i=vt(t),s=lt(t);function o(a,l){var c=vt(l),u=vt(a)*c,f=lt(a)*c,d=lt(l),h=d*n+u*r;return[qi(f*i-h*s,u*n-d*r),wr(h*i+f*s)]}return o.invert=function(a,l){var c=vt(l),u=vt(a)*c,f=lt(a)*c,d=lt(l),h=d*i-f*s;return[qi(f*i+d*s,u*n+h*r),wr(h*n-u*r)]},o}function zJ(e){e=eF(e[0]*Kt,e[1]*Kt,e.length>2?e[2]*Kt:0);function t(n){return n=e(n[0]*Kt,n[1]*Kt),n[0]*=xn,n[1]*=xn,n}return t.invert=function(n){return n=e.invert(n[0]*Kt,n[1]*Kt),n[0]*=xn,n[1]*=xn,n},t}function jJ(e,t,n,r,i,s){if(n){var o=vt(t),a=lt(t),l=r*n;i==null?(i=t+r*Pr,s=t-l/2):(i=$6(o,i),s=$6(o,s),(r>0?i<s:i>s)&&(i+=r*Pr));for(var c,u=i;r>0?u>s:u<s;u-=l)c=wS([o,-a*vt(u),-a*lt(u)]),e.point(c[0],c[1])}}function $6(e,t){t=Sf(t),t[0]-=e,_S(t);var n=KB(-t[1]);return((-t[2]<0?-n:n)+Pr-yt)%Pr}function nF(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:Or,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function pm(e,t){return ne(e[0]-t[0])<yt&&ne(e[1]-t[1])<yt}function b0(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function rF(e,t,n,r,i){var s=[],o=[],a,l;if(e.forEach(function(p){if(!((g=p.length-1)<=0)){var g,v=p[0],y=p[g],m;if(pm(v,y)){if(!v[2]&&!y[2]){for(i.lineStart(),a=0;a<g;++a)i.point((v=p[a])[0],v[1]);i.lineEnd();return}y[0]+=2*yt}s.push(m=new b0(v,p,null,!0)),o.push(m.o=new b0(v,null,m,!1)),s.push(m=new b0(y,p,null,!1)),o.push(m.o=new b0(y,null,m,!0))}}),!!s.length){for(o.sort(t),N6(s),N6(o),a=0,l=o.length;a<l;++a)o[a].e=n=!n;for(var c=s[0],u,f;;){for(var d=c,h=!0;d.v;)if((d=d.n)===c)return;u=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(a=0,l=u.length;a<l;++a)i.point((f=u[a])[0],f[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(h)for(u=d.p.z,a=u.length-1;a>=0;--a)i.point((f=u[a])[0],f[1]);else r(d.x,d.p.x,-1,i);d=d.p}d=d.o,u=d.z,h=!h}while(!d.v);i.lineEnd()}}}function N6(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function Xw(e){return ne(e[0])<=Rt?e[0]:li(e[0])*((ne(e[0])+Rt)%Pr-Rt)}function VJ(e,t){var n=Xw(t),r=t[1],i=lt(r),s=[lt(n),-vt(n),0],o=0,a=0,l=new $s;i===1?r=He+yt:i===-1&&(r=-He-yt);for(var c=0,u=e.length;c<u;++c)if(d=(f=e[c]).length)for(var f,d,h=f[d-1],p=Xw(h),g=h[1]/2+w6,v=lt(g),y=vt(g),m=0;m<d;++m,p=w,v=_,y=x,h=b){var b=f[m],w=Xw(b),S=b[1]/2+w6,_=lt(S),x=vt(S),E=w-p,k=E>=0?1:-1,I=k*E,A=I>Rt,D=v*_;if(l.add(qi(D*k*lt(I),y*x+D*vt(I))),o+=A?E+k*Pr:E,A^p>=n^w>=n){var L=Hg(Sf(h),Sf(b));_S(L);var T=Hg(s,L);_S(T);var M=(A^E>=0?-1:1)*wr(T[2]);(r>M||r===M&&(L[0]||L[1]))&&(a+=A^E>=0?1:-1)}}return(o<-yt||o<yt&&l<-Yg)^a&1}function iF(e,t,n,r){return function(i){var s=t(i),o=nF(),a=t(o),l=!1,c,u,f,d={point:h,lineStart:g,lineEnd:v,polygonStart:function(){d.point=y,d.lineStart=m,d.lineEnd=b,u=[],c=[]},polygonEnd:function(){d.point=h,d.lineStart=g,d.lineEnd=v,u=oB(u);var w=VJ(c,r);u.length?(l||(i.polygonStart(),l=!0),rF(u,qJ,w,n,i)):w&&(l||(i.polygonStart(),l=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),l&&(i.polygonEnd(),l=!1),u=c=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(w,S){e(w,S)&&i.point(w,S)}function p(w,S){s.point(w,S)}function g(){d.point=p,s.lineStart()}function v(){d.point=h,s.lineEnd()}function y(w,S){f.push([w,S]),a.point(w,S)}function m(){a.lineStart(),f=[]}function b(){y(f[0][0],f[0][1]),a.lineEnd();var w=a.clean(),S=o.result(),_,x=S.length,E,k,I;if(f.pop(),c.push(f),f=null,!!x){if(w&1){if(k=S[0],(E=k.length-1)>0){for(l||(i.polygonStart(),l=!0),i.lineStart(),_=0;_<E;++_)i.point((I=k[_])[0],I[1]);i.lineEnd()}return}x>1&&w&2&&S.push(S.pop().concat(S.shift())),u.push(S.filter(YJ))}}return d}}function YJ(e){return e.length>1}function qJ(e,t){return((e=e.x)[0]<0?e[1]-He-yt:He-e[1])-((t=t.x)[0]<0?t[1]-He-yt:He-t[1])}const k6=iF(function(){return!0},WJ,GJ,[-Rt,-He]);function WJ(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(s,o){var a=s>0?Rt:-Rt,l=ne(s-t);ne(l-Rt)<yt?(e.point(t,n=(n+o)/2>0?He:-He),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),e.point(s,n),i=0):r!==a&&l>=Rt&&(ne(t-r)<yt&&(t-=r*yt),ne(s-a)<yt&&(s-=a*yt),n=HJ(t,n,s,o),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),i=0),e.point(t=s,n=o),r=a},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function HJ(e,t,n,r){var i,s,o=lt(e-n);return ne(o)>yt?Zf((lt(t)*(s=vt(r))*lt(n)-lt(r)*(i=vt(t))*lt(e))/(i*s*o)):(t+r)/2}function GJ(e,t,n,r){var i;if(e==null)i=n*He,r.point(-Rt,i),r.point(0,i),r.point(Rt,i),r.point(Rt,0),r.point(Rt,-i),r.point(0,-i),r.point(-Rt,-i),r.point(-Rt,0),r.point(-Rt,i);else if(ne(e[0]-t[0])>yt){var s=e[0]<t[0]?Rt:-Rt;i=n*s/2,r.point(-s,i),r.point(0,i),r.point(s,i)}else r.point(t[0],t[1])}function XJ(e){var t=vt(e),n=6*Kt,r=t>0,i=ne(t)>yt;function s(u,f,d,h){jJ(h,e,n,d,u,f)}function o(u,f){return vt(u)*vt(f)>t}function a(u){var f,d,h,p,g;return{lineStart:function(){p=h=!1,g=1},point:function(v,y){var m=[v,y],b,w=o(v,y),S=r?w?0:c(v,y):w?c(v+(v<0?Rt:-Rt),y):0;if(!f&&(p=h=w)&&u.lineStart(),w!==h&&(b=l(f,m),(!b||pm(f,b)||pm(m,b))&&(m[2]=1)),w!==h)g=0,w?(u.lineStart(),b=l(m,f),u.point(b[0],b[1])):(b=l(f,m),u.point(b[0],b[1],2),u.lineEnd()),f=b;else if(i&&f&&r^w){var _;!(S&d)&&(_=l(m,f,!0))&&(g=0,r?(u.lineStart(),u.point(_[0][0],_[0][1]),u.point(_[1][0],_[1][1]),u.lineEnd()):(u.point(_[1][0],_[1][1]),u.lineEnd(),u.lineStart(),u.point(_[0][0],_[0][1],3)))}w&&(!f||!pm(f,m))&&u.point(m[0],m[1]),f=m,h=w,d=S},lineEnd:function(){h&&u.lineEnd(),f=null},clean:function(){return g|(p&&h)<<1}}}function l(u,f,d){var h=Sf(u),p=Sf(f),g=[1,0,0],v=Hg(h,p),y=m0(v,v),m=v[0],b=y-m*m;if(!b)return!d&&u;var w=t*y/b,S=-t*m/b,_=Hg(g,v),x=g0(g,w),E=g0(v,S);Gw(x,E);var k=_,I=m0(x,k),A=m0(k,k),D=I*I-A*(m0(x,x)-1);if(!(D<0)){var L=Jn(D),T=g0(k,(-I-L)/A);if(Gw(T,x),T=wS(T),!d)return T;var M=u[0],N=f[0],F=u[1],O=f[1],C;N<M&&(C=M,M=N,N=C);var B=N-M,P=ne(B-Rt)<yt,z=P||B<yt;if(!P&&O<F&&(C=F,F=O,O=C),z?P?F+O>0^T[1]<(ne(T[0]-M)<yt?F:O):F<=T[1]&&T[1]<=O:B>Rt^(M<=T[0]&&T[0]<=N)){var H=g0(k,(-I+L)/A);return Gw(H,x),[T,wS(H)]}}}function c(u,f){var d=r?e:Rt-e,h=0;return u<-d?h|=1:u>d&&(h|=2),f<-d?h|=4:f>d&&(h|=8),h}return iF(o,a,s,r?[0,-e]:[-Rt,e-Rt])}function QJ(e,t,n,r,i,s){var o=e[0],a=e[1],l=t[0],c=t[1],u=0,f=1,d=l-o,h=c-a,p;if(p=n-o,!(!d&&p>0)){if(p/=d,d<0){if(p<u)return;p<f&&(f=p)}else if(d>0){if(p>f)return;p>u&&(u=p)}if(p=i-o,!(!d&&p<0)){if(p/=d,d<0){if(p>f)return;p>u&&(u=p)}else if(d>0){if(p<u)return;p<f&&(f=p)}if(p=r-a,!(!h&&p>0)){if(p/=h,h<0){if(p<u)return;p<f&&(f=p)}else if(h>0){if(p>f)return;p>u&&(u=p)}if(p=s-a,!(!h&&p<0)){if(p/=h,h<0){if(p>f)return;p>u&&(u=p)}else if(h>0){if(p<u)return;p<f&&(f=p)}return u>0&&(e[0]=o+u*d,e[1]=a+u*h),f<1&&(t[0]=o+f*d,t[1]=a+f*h),!0}}}}}var Jd=1e9,v0=-Jd;function sF(e,t,n,r){function i(c,u){return e<=c&&c<=n&&t<=u&&u<=r}function s(c,u,f,d){var h=0,p=0;if(c==null||(h=o(c,f))!==(p=o(u,f))||l(c,u)<0^f>0)do d.point(h===0||h===3?e:n,h>1?r:t);while((h=(h+f+4)%4)!==p);else d.point(u[0],u[1])}function o(c,u){return ne(c[0]-e)<yt?u>0?0:3:ne(c[0]-n)<yt?u>0?2:1:ne(c[1]-t)<yt?u>0?1:0:u>0?3:2}function a(c,u){return l(c.x,u.x)}function l(c,u){var f=o(c,1),d=o(u,1);return f!==d?f-d:f===0?u[1]-c[1]:f===1?c[0]-u[0]:f===2?c[1]-u[1]:u[0]-c[0]}return function(c){var u=c,f=nF(),d,h,p,g,v,y,m,b,w,S,_,x={point:E,lineStart:D,lineEnd:L,polygonStart:I,polygonEnd:A};function E(M,N){i(M,N)&&u.point(M,N)}function k(){for(var M=0,N=0,F=h.length;N<F;++N)for(var O=h[N],C=1,B=O.length,P=O[0],z,H,X=P[0],tt=P[1];C<B;++C)z=X,H=tt,P=O[C],X=P[0],tt=P[1],H<=r?tt>r&&(X-z)*(r-H)>(tt-H)*(e-z)&&++M:tt<=r&&(X-z)*(r-H)<(tt-H)*(e-z)&&--M;return M}function I(){u=f,d=[],h=[],_=!0}function A(){var M=k(),N=_&&M,F=(d=oB(d)).length;(N||F)&&(c.polygonStart(),N&&(c.lineStart(),s(null,null,1,c),c.lineEnd()),F&&rF(d,a,M,s,c),c.polygonEnd()),u=c,d=h=p=null}function D(){x.point=T,h&&h.push(p=[]),S=!0,w=!1,m=b=NaN}function L(){d&&(T(g,v),y&&w&&f.rejoin(),d.push(f.result())),x.point=E,w&&u.lineEnd()}function T(M,N){var F=i(M,N);if(h&&p.push([M,N]),S)g=M,v=N,y=F,S=!1,F&&(u.lineStart(),u.point(M,N));else if(F&&w)u.point(M,N);else{var O=[m=Math.max(v0,Math.min(Jd,m)),b=Math.max(v0,Math.min(Jd,b))],C=[M=Math.max(v0,Math.min(Jd,M)),N=Math.max(v0,Math.min(Jd,N))];QJ(O,C,e,t,n,r)?(w||(u.lineStart(),u.point(O[0],O[1])),u.point(C[0],C[1]),F||u.lineEnd(),_=!1):F&&(u.lineStart(),u.point(M,N),_=!1)}m=M,b=N,w=F}return x}}function D6(e,t,n){var r=Dr(e,t-yt,n).concat(t);return function(i){return r.map(function(s){return[i,s]})}}function O6(e,t,n){var r=Dr(e,t-yt,n).concat(t);return function(i){return r.map(function(s){return[s,i]})}}function KJ(){var e,t,n,r,i,s,o,a,l=10,c=l,u=90,f=360,d,h,p,g,v=2.5;function y(){return{type:"MultiLineString",coordinates:m()}}function m(){return Dr(y0(r/u)*u,n,u).map(p).concat(Dr(y0(a/f)*f,o,f).map(g)).concat(Dr(y0(t/l)*l,e,l).filter(function(b){return ne(b%u)>yt}).map(d)).concat(Dr(y0(s/c)*c,i,c).filter(function(b){return ne(b%f)>yt}).map(h))}return y.lines=function(){return m().map(function(b){return{type:"LineString",coordinates:b}})},y.outline=function(){return{type:"Polygon",coordinates:[p(r).concat(g(o).slice(1),p(n).reverse().slice(1),g(a).reverse().slice(1))]}},y.extent=function(b){return arguments.length?y.extentMajor(b).extentMinor(b):y.extentMinor()},y.extentMajor=function(b){return arguments.length?(r=+b[0][0],n=+b[1][0],a=+b[0][1],o=+b[1][1],r>n&&(b=r,r=n,n=b),a>o&&(b=a,a=o,o=b),y.precision(v)):[[r,a],[n,o]]},y.extentMinor=function(b){return arguments.length?(t=+b[0][0],e=+b[1][0],s=+b[0][1],i=+b[1][1],t>e&&(b=t,t=e,e=b),s>i&&(b=s,s=i,i=b),y.precision(v)):[[t,s],[e,i]]},y.step=function(b){return arguments.length?y.stepMajor(b).stepMinor(b):y.stepMinor()},y.stepMajor=function(b){return arguments.length?(u=+b[0],f=+b[1],y):[u,f]},y.stepMinor=function(b){return arguments.length?(l=+b[0],c=+b[1],y):[l,c]},y.precision=function(b){return arguments.length?(v=+b,d=D6(s,i,90),h=O6(t,e,v),p=D6(a,o,90),g=O6(r,n,v),y):v},y.extentMajor([[-180,-90+yt],[180,90-yt]]).extentMinor([[-180,-80-yt],[180,80+yt]])}function ZJ(){return KJ()()}const AS=e=>e;var Qw=new $s,MS=new $s,oF,aF,$S,NS,ua={point:Or,lineStart:Or,lineEnd:Or,polygonStart:function(){ua.lineStart=JJ,ua.lineEnd=ett},polygonEnd:function(){ua.lineStart=ua.lineEnd=ua.point=Or,Qw.add(ne(MS)),MS=new $s},result:function(){var e=Qw/2;return Qw=new $s,e}};function JJ(){ua.point=ttt}function ttt(e,t){ua.point=lF,oF=$S=e,aF=NS=t}function lF(e,t){MS.add(NS*e-$S*t),$S=e,NS=t}function ett(){lF(oF,aF)}const B6=ua;var xf=1/0,e1=xf,mp=-xf,n1=mp,ntt={point:rtt,lineStart:Or,lineEnd:Or,polygonStart:Or,polygonEnd:Or,result:function(){var e=[[xf,e1],[mp,n1]];return mp=n1=-(e1=xf=1/0),e}};function rtt(e,t){e<xf&&(xf=e),e>mp&&(mp=e),t<e1&&(e1=t),t>n1&&(n1=t)}const r1=ntt;var kS=0,DS=0,th=0,i1=0,s1=0,Iu=0,OS=0,BS=0,eh=0,cF,uF,gs,bs,Bi={point:hc,lineStart:F6,lineEnd:L6,polygonStart:function(){Bi.lineStart=ott,Bi.lineEnd=att},polygonEnd:function(){Bi.point=hc,Bi.lineStart=F6,Bi.lineEnd=L6},result:function(){var e=eh?[OS/eh,BS/eh]:Iu?[i1/Iu,s1/Iu]:th?[kS/th,DS/th]:[NaN,NaN];return kS=DS=th=i1=s1=Iu=OS=BS=eh=0,e}};function hc(e,t){kS+=e,DS+=t,++th}function F6(){Bi.point=itt}function itt(e,t){Bi.point=stt,hc(gs=e,bs=t)}function stt(e,t){var n=e-gs,r=t-bs,i=Jn(n*n+r*r);i1+=i*(gs+e)/2,s1+=i*(bs+t)/2,Iu+=i,hc(gs=e,bs=t)}function L6(){Bi.point=hc}function ott(){Bi.point=ltt}function att(){fF(cF,uF)}function ltt(e,t){Bi.point=fF,hc(cF=gs=e,uF=bs=t)}function fF(e,t){var n=e-gs,r=t-bs,i=Jn(n*n+r*r);i1+=i*(gs+e)/2,s1+=i*(bs+t)/2,Iu+=i,i=bs*e-gs*t,OS+=i*(gs+e),BS+=i*(bs+t),eh+=i*3,hc(gs=e,bs=t)}const R6=Bi;function dF(e){this._context=e}dF.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,Pr);break}}},result:Or};var FS=new $s,Kw,hF,pF,nh,rh,o1={point:Or,lineStart:function(){o1.point=ctt},lineEnd:function(){Kw&&yF(hF,pF),o1.point=Or},polygonStart:function(){Kw=!0},polygonEnd:function(){Kw=null},result:function(){var e=+FS;return FS=new $s,e}};function ctt(e,t){o1.point=yF,hF=nh=e,pF=rh=t}function yF(e,t){nh-=e,rh-=t,FS.add(Jn(nh*nh+rh*rh)),nh=e,rh=t}const C6=o1;let U6,a1,P6,z6;class j6{constructor(t){this._append=t==null?mF:utt(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==P6||this._append!==a1){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,P6=r,a1=this._append,z6=this._,this._=i}this._+=z6;break}}}result(){const t=this._;return this._="",t.length?t:null}}function mF(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function utt(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return mF;if(t!==U6){const n=10**t;U6=t,a1=function(i){let s=1;this._+=i[0];for(const o=i.length;s<o;++s)this._+=Math.round(arguments[s]*n)/n+i[s]}}return a1}function nl(e,t){let n=3,r=4.5,i,s;function o(a){return a&&(typeof r=="function"&&s.pointRadius(+r.apply(this,arguments)),ca(a,i(s))),s.result()}return o.area=function(a){return ca(a,i(B6)),B6.result()},o.measure=function(a){return ca(a,i(C6)),C6.result()},o.bounds=function(a){return ca(a,i(r1)),r1.result()},o.centroid=function(a){return ca(a,i(R6)),R6.result()},o.projection=function(a){return arguments.length?(i=a==null?(e=null,AS):(e=a).stream,o):e},o.context=function(a){return arguments.length?(s=a==null?(t=null,new j6(n)):new dF(t=a),typeof r!="function"&&s.pointRadius(r),o):t},o.pointRadius=function(a){return arguments.length?(r=typeof a=="function"?a:(s.pointRadius(+a),+a),o):r},o.digits=function(a){if(!arguments.length)return n;if(a==null)n=null;else{const l=Math.floor(a);if(!(l>=0))throw new RangeError(`invalid digits: ${a}`);n=l}return t===null&&(s=new j6(n)),o},o.projection(e).digits(n).context(t)}function l1(e){return{stream:Jb(e)}}function Jb(e){return function(t){var n=new LS;for(var r in e)n[r]=e[r];return n.stream=t,n}}function LS(){}LS.prototype={constructor:LS,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function x3(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),ca(n,e.stream(r1)),t(r1.result()),r!=null&&e.clipExtent(r),e}function I3(e,t,n){return x3(e,function(r){var i=t[1][0]-t[0][0],s=t[1][1]-t[0][1],o=Math.min(i/(r[1][0]-r[0][0]),s/(r[1][1]-r[0][1])),a=+t[0][0]+(i-o*(r[1][0]+r[0][0]))/2,l=+t[0][1]+(s-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([a,l])},n)}function gF(e,t,n){return I3(e,[[0,0],t],n)}function bF(e,t,n){return x3(e,function(r){var i=+t,s=i/(r[1][0]-r[0][0]),o=(i-s*(r[1][0]+r[0][0]))/2,a=-s*r[0][1];e.scale(150*s).translate([o,a])},n)}function vF(e,t,n){return x3(e,function(r){var i=+t,s=i/(r[1][1]-r[0][1]),o=-s*r[0][0],a=(i-s*(r[1][1]+r[0][1]))/2;e.scale(150*s).translate([o,a])},n)}var V6=16,ftt=vt(30*Kt);function Y6(e,t){return+t?htt(e,t):dtt(e)}function dtt(e){return Jb({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function htt(e,t){function n(r,i,s,o,a,l,c,u,f,d,h,p,g,v){var y=c-r,m=u-i,b=y*y+m*m;if(b>4*t&&g--){var w=o+d,S=a+h,_=l+p,x=Jn(w*w+S*S+_*_),E=wr(_/=x),k=ne(ne(_)-1)<yt||ne(s-f)<yt?(s+f)/2:qi(S,w),I=e(k,E),A=I[0],D=I[1],L=A-r,T=D-i,M=m*L-y*T;(M*M/b>t||ne((y*L+m*T)/b-.5)>.3||o*d+a*h+l*p<ftt)&&(n(r,i,s,o,a,l,A,D,k,w/=x,S/=x,_,g,v),v.point(A,D),n(A,D,k,w,S,_,c,u,f,d,h,p,g,v))}}return function(r){var i,s,o,a,l,c,u,f,d,h,p,g,v={point:y,lineStart:m,lineEnd:w,polygonStart:function(){r.polygonStart(),v.lineStart=S},polygonEnd:function(){r.polygonEnd(),v.lineStart=m}};function y(E,k){E=e(E,k),r.point(E[0],E[1])}function m(){f=NaN,v.point=b,r.lineStart()}function b(E,k){var I=Sf([E,k]),A=e(E,k);n(f,d,u,h,p,g,f=A[0],d=A[1],u=E,h=I[0],p=I[1],g=I[2],V6,r),r.point(f,d)}function w(){v.point=y,r.lineEnd()}function S(){m(),v.point=_,v.lineEnd=x}function _(E,k){b(i=E,k),s=f,o=d,a=h,l=p,c=g,v.point=b}function x(){n(f,d,u,h,p,g,s,o,i,a,l,c,V6,r),v.lineEnd=w,w()}return v}}var ptt=Jb({point:function(e,t){this.stream.point(e*Kt,t*Kt)}});function ytt(e){return Jb({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function mtt(e,t,n,r,i){function s(o,a){return o*=r,a*=i,[t+e*o,n-e*a]}return s.invert=function(o,a){return[(o-t)/e*r,(n-a)/e*i]},s}function q6(e,t,n,r,i,s){if(!s)return mtt(e,t,n,r,i);var o=vt(s),a=lt(s),l=o*e,c=a*e,u=o/e,f=a/e,d=(a*n-o*t)/e,h=(a*t+o*n)/e;function p(g,v){return g*=r,v*=i,[l*g-c*v+t,n-c*g-l*v]}return p.invert=function(g,v){return[r*(u*g-f*v+d),i*(h-f*g-u*v)]},p}function rl(e){return wF(function(){return e})()}function wF(e){var t,n=150,r=480,i=250,s=0,o=0,a=0,l=0,c=0,u,f=0,d=1,h=1,p=null,g=k6,v=null,y,m,b,w=AS,S=.5,_,x,E,k,I;function A(M){return E(M[0]*Kt,M[1]*Kt)}function D(M){return M=E.invert(M[0],M[1]),M&&[M[0]*xn,M[1]*xn]}A.stream=function(M){return k&&I===M?k:k=ptt(ytt(u)(g(_(w(I=M)))))},A.preclip=function(M){return arguments.length?(g=M,p=void 0,T()):g},A.postclip=function(M){return arguments.length?(w=M,v=y=m=b=null,T()):w},A.clipAngle=function(M){return arguments.length?(g=+M?XJ(p=M*Kt):(p=null,k6),T()):p*xn},A.clipExtent=function(M){return arguments.length?(w=M==null?(v=y=m=b=null,AS):sF(v=+M[0][0],y=+M[0][1],m=+M[1][0],b=+M[1][1]),T()):v==null?null:[[v,y],[m,b]]},A.scale=function(M){return arguments.length?(n=+M,L()):n},A.translate=function(M){return arguments.length?(r=+M[0],i=+M[1],L()):[r,i]},A.center=function(M){return arguments.length?(s=M[0]%360*Kt,o=M[1]%360*Kt,L()):[s*xn,o*xn]},A.rotate=function(M){return arguments.length?(a=M[0]%360*Kt,l=M[1]%360*Kt,c=M.length>2?M[2]%360*Kt:0,L()):[a*xn,l*xn,c*xn]},A.angle=function(M){return arguments.length?(f=M%360*Kt,L()):f*xn},A.reflectX=function(M){return arguments.length?(d=M?-1:1,L()):d<0},A.reflectY=function(M){return arguments.length?(h=M?-1:1,L()):h<0},A.precision=function(M){return arguments.length?(_=Y6(x,S=M*M),T()):Jn(S)},A.fitExtent=function(M,N){return I3(A,M,N)},A.fitSize=function(M,N){return gF(A,M,N)},A.fitWidth=function(M,N){return bF(A,M,N)},A.fitHeight=function(M,N){return vF(A,M,N)};function L(){var M=q6(n,0,0,d,h,f).apply(null,t(s,o)),N=q6(n,r-M[0],i-M[1],d,h,f);return u=eF(a,l,c),x=TS(t,N),E=TS(u,x),_=Y6(x,S),T()}function T(){return k=I=null,A}return function(){return t=e.apply(this,arguments),A.invert=t.invert&&D,L()}}function T3(e){var t=0,n=Rt/3,r=wF(e),i=r(t,n);return i.parallels=function(s){return arguments.length?r(t=s[0]*Kt,n=s[1]*Kt):[t*xn,n*xn]},i}function gtt(e){var t=vt(e);function n(r,i){return[r*t,lt(i)/t]}return n.invert=function(r,i){return[r/t,wr(i*t)]},n}function btt(e,t){var n=lt(e),r=(n+lt(t))/2;if(ne(r)<yt)return gtt(e);var i=1+n*(2*r-n),s=Jn(i)/r;function o(a,l){var c=Jn(i-2*r*lt(l))/r;return[c*lt(a*=r),s-c*vt(a)]}return o.invert=function(a,l){var c=s-l,u=qi(a,ne(c))*li(c);return c*r<0&&(u-=Rt*li(a)*li(c)),[u/r,wr((i-(a*a+c*c)*r*r)/(2*r))]},o}function c1(){return T3(btt).scale(155.424).center([0,33.6442])}function _F(){return c1().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function vtt(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function wtt(){var e,t,n=_F(),r,i=c1().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s,o=c1().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,l,c={point:function(d,h){l=[d,h]}};function u(d){var h=d[0],p=d[1];return l=null,r.point(h,p),l||(s.point(h,p),l)||(a.point(h,p),l)}u.invert=function(d){var h=n.scale(),p=n.translate(),g=(d[0]-p[0])/h,v=(d[1]-p[1])/h;return(v>=.12&&v<.234&&g>=-.425&&g<-.214?i:v>=.166&&v<.234&&g>=-.214&&g<-.115?o:n).invert(d)},u.stream=function(d){return e&&t===d?e:e=vtt([n.stream(t=d),i.stream(d),o.stream(d)])},u.precision=function(d){return arguments.length?(n.precision(d),i.precision(d),o.precision(d),f()):n.precision()},u.scale=function(d){return arguments.length?(n.scale(d),i.scale(d*.35),o.scale(d),u.translate(n.translate())):n.scale()},u.translate=function(d){if(!arguments.length)return n.translate();var h=n.scale(),p=+d[0],g=+d[1];return r=n.translate(d).clipExtent([[p-.455*h,g-.238*h],[p+.455*h,g+.238*h]]).stream(c),s=i.translate([p-.307*h,g+.201*h]).clipExtent([[p-.425*h+yt,g+.12*h+yt],[p-.214*h-yt,g+.234*h-yt]]).stream(c),a=o.translate([p-.205*h,g+.212*h]).clipExtent([[p-.214*h+yt,g+.166*h+yt],[p-.115*h-yt,g+.234*h-yt]]).stream(c),f()},u.fitExtent=function(d,h){return I3(u,d,h)},u.fitSize=function(d,h){return gF(u,d,h)},u.fitWidth=function(d,h){return bF(u,d,h)},u.fitHeight=function(d,h){return vF(u,d,h)};function f(){return e=t=null,u}return u.scale(1070)}function SF(e){return function(t,n){var r=vt(t),i=vt(n),s=e(r*i);return s===1/0?[2,0]:[s*i*lt(t),s*lt(n)]}}function oy(e){return function(t,n){var r=Jn(t*t+n*n),i=e(r),s=lt(i),o=vt(i);return[qi(t*s,r*o),wr(r&&n*s/r)]}}var xF=SF(function(e){return Jn(2/(1+e))});xF.invert=oy(function(e){return 2*wr(e/2)});function _tt(){return rl(xF).scale(124.75).clipAngle(180-.001)}var IF=SF(function(e){return(e=KB(e))&&e/lt(e)});IF.invert=oy(function(e){return e});function Stt(){return rl(IF).scale(79.4188).clipAngle(180-.001)}function tv(e,t){return[e,qg(_3((He+t)/2))]}tv.invert=function(e,t){return[e,2*Zf(QB(t))-He]};function xtt(){return TF(tv).scale(961/Pr)}function TF(e){var t=rl(e),n=t.center,r=t.scale,i=t.translate,s=t.clipExtent,o=null,a,l,c;t.scale=function(f){return arguments.length?(r(f),u()):r()},t.translate=function(f){return arguments.length?(i(f),u()):i()},t.center=function(f){return arguments.length?(n(f),u()):n()},t.clipExtent=function(f){return arguments.length?(f==null?o=a=l=c=null:(o=+f[0][0],a=+f[0][1],l=+f[1][0],c=+f[1][1]),u()):o==null?null:[[o,a],[l,c]]};function u(){var f=Rt*r(),d=t(zJ(t.rotate()).invert([0,0]));return s(o==null?[[d[0]-f,d[1]-f],[d[0]+f,d[1]+f]]:e===tv?[[Math.max(d[0]-f,o),a],[Math.min(d[0]+f,l),c]]:[[o,Math.max(d[1]-f,a)],[l,Math.min(d[1]+f,c)]])}return u()}function w0(e){return _3((He+e)/2)}function Itt(e,t){var n=vt(e),r=e===t?lt(e):qg(n/vt(t))/qg(w0(t)/w0(e)),i=n*Hw(w0(e),r)/r;if(!r)return tv;function s(o,a){i>0?a<-He+yt&&(a=-He+yt):a>He-yt&&(a=He-yt);var l=i/Hw(w0(a),r);return[l*lt(r*o),i-l*vt(r*o)]}return s.invert=function(o,a){var l=i-a,c=li(r)*Jn(o*o+l*l),u=qi(o,ne(l))*li(l);return l*r<0&&(u-=Rt*li(o)*li(l)),[u/r,2*Zf(Hw(i/c,1/r))-He]},s}function Ttt(){return T3(Itt).scale(109.5).parallels([30,30])}function u1(e,t){return[e,t]}u1.invert=u1;function Ett(){return rl(u1).scale(152.63)}function Att(e,t){var n=vt(e),r=e===t?lt(e):(n-vt(t))/(t-e),i=n/r+e;if(ne(r)<yt)return u1;function s(o,a){var l=i-a,c=r*o;return[l*lt(c),i-l*vt(c)]}return s.invert=function(o,a){var l=i-a,c=qi(o,ne(l))*li(l);return l*r<0&&(c-=Rt*li(o)*li(l)),[c/r,i-li(r)*Jn(o*o+l*l)]},s}function Mtt(){return T3(Att).scale(131.154).center([0,13.9389])}var Eh=1.340264,Ah=-.081106,Mh=893e-6,$h=.003796,f1=Jn(3)/2,$tt=12;function EF(e,t){var n=wr(f1*lt(t)),r=n*n,i=r*r*r;return[e*vt(n)/(f1*(Eh+3*Ah*r+i*(7*Mh+9*$h*r))),n*(Eh+Ah*r+i*(Mh+$h*r))]}EF.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,s=0,o,a,l;s<$tt&&(a=n*(Eh+Ah*r+i*(Mh+$h*r))-t,l=Eh+3*Ah*r+i*(7*Mh+9*$h*r),n-=o=a/l,r=n*n,i=r*r*r,!(ne(o)<Yg));++s);return[f1*e*(Eh+3*Ah*r+i*(7*Mh+9*$h*r))/vt(n),wr(lt(n)/f1)]};function Ntt(){return rl(EF).scale(177.158)}function AF(e,t){var n=vt(t),r=vt(e)*n;return[n*lt(e)/r,lt(t)/r]}AF.invert=oy(Zf);function ktt(){return rl(AF).scale(144.049).clipAngle(60)}function MF(e,t){return[vt(t)*lt(e),lt(t)]}MF.invert=oy(wr);function Dtt(){return rl(MF).scale(249.5).clipAngle(90+yt)}function $F(e,t){var n=vt(t),r=1+vt(e)*n;return[n*lt(e)/r,lt(t)/r]}$F.invert=oy(function(e){return 2*Zf(e)});function Ott(){return rl($F).scale(250).clipAngle(142)}function NF(e,t){return[qg(_3((He+t)/2)),-e]}NF.invert=function(e,t){return[-t,2*Zf(QB(e))-He]};function Btt(){var e=TF(NF),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}function Ftt(e,t){return e.parent===t.parent?1:2}function Ltt(e){return e.reduce(Rtt,0)/e.length}function Rtt(e,t){return e+t.x}function Ctt(e){return 1+e.reduce(Utt,0)}function Utt(e,t){return Math.max(e,t.y)}function Ptt(e){for(var t;t=e.children;)e=t[0];return e}function ztt(e){for(var t;t=e.children;)e=t[t.length-1];return e}function kF(){var e=Ftt,t=1,n=1,r=!1;function i(s){var o,a=0;s.eachAfter(function(d){var h=d.children;h?(d.x=Ltt(h),d.y=Ctt(h)):(d.x=o?a+=e(d,o):0,d.y=0,o=d)});var l=Ptt(s),c=ztt(s),u=l.x-e(l,c)/2,f=c.x+e(c,l)/2;return s.eachAfter(r?function(d){d.x=(d.x-s.x)*t,d.y=(s.y-d.y)*n}:function(d){d.x=(d.x-u)/(f-u)*t,d.y=(1-(s.y?d.y/s.y:1))*n})}return i.separation=function(s){return arguments.length?(e=s,i):e},i.size=function(s){return arguments.length?(r=!1,t=+s[0],n=+s[1],i):r?null:[t,n]},i.nodeSize=function(s){return arguments.length?(r=!0,t=+s[0],n=+s[1],i):r?[t,n]:null},i}function jtt(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function Vtt(){return this.eachAfter(jtt)}function Ytt(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function qtt(e,t){for(var n=this,r=[n],i,s,o=-1;n=r.pop();)if(e.call(t,n,++o,this),i=n.children)for(s=i.length-1;s>=0;--s)r.push(i[s]);return this}function Wtt(e,t){for(var n=this,r=[n],i=[],s,o,a,l=-1;n=r.pop();)if(i.push(n),s=n.children)for(o=0,a=s.length;o<a;++o)r.push(s[o]);for(;n=i.pop();)e.call(t,n,++l,this);return this}function Htt(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function Gtt(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function Xtt(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function Qtt(e){for(var t=this,n=Ktt(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function Ktt(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function Ztt(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function Jtt(){return Array.from(this)}function tet(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function eet(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*net(){var e=this,t,n=[e],r,i,s;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,s=r.length;i<s;++i)n.push(r[i]);while(n.length)}function DF(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=set)):t===void 0&&(t=iet);for(var n=new If(e),r,i=[n],s,o,a,l;r=i.pop();)if((o=t(r.data))&&(l=(o=Array.from(o)).length))for(r.children=o,a=l-1;a>=0;--a)i.push(s=o[a]=new If(o[a])),s.parent=r,s.depth=r.depth+1;return n.eachBefore(OF)}function ret(){return DF(this).eachBefore(oet)}function iet(e){return e.children}function set(e){return Array.isArray(e)?e[1]:null}function oet(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function OF(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function If(e){this.data=e,this.depth=this.height=0,this.parent=null}If.prototype=DF.prototype={constructor:If,count:Vtt,each:Ytt,eachAfter:Wtt,eachBefore:qtt,find:Htt,sum:Gtt,sort:Xtt,path:Qtt,ancestors:Ztt,descendants:Jtt,leaves:tet,links:eet,copy:ret,[Symbol.iterator]:net};function Zw(e){return e==null?null:aet(e)}function aet(e){if(typeof e!="function")throw new Error;return e}var cet={depth:-1},W6={},Jw={};function uet(e){return e.id}function fet(e){return e.parentId}function BF(){var e=uet,t=fet,n;function r(i){var s=Array.from(i),o=e,a=t,l,c,u,f,d,h,p,g,v=new Map;if(n!=null){const y=s.map((w,S)=>det(n(w,S,i))),m=y.map(H6),b=new Set(y).add("");for(const w of m)b.has(w)||(b.add(w),y.push(w),m.push(H6(w)),s.push(Jw));o=(w,S)=>y[S],a=(w,S)=>m[S]}for(u=0,l=s.length;u<l;++u)c=s[u],h=s[u]=new If(c),(p=o(c,u,i))!=null&&(p+="")&&(g=h.id=p,v.set(g,v.has(g)?W6:h)),(p=a(c,u,i))!=null&&(p+="")&&(h.parent=p);for(u=0;u<l;++u)if(h=s[u],p=h.parent){if(d=v.get(p),!d)throw new Error("missing: "+p);if(d===W6)throw new Error("ambiguous: "+p);d.children?d.children.push(h):d.children=[h],h.parent=d}else{if(f)throw new Error("multiple roots");f=h}if(!f)throw new Error("no root");if(n!=null){for(;f.data===Jw&&f.children.length===1;)f=f.children[0],--l;for(let y=s.length-1;y>=0&&(h=s[y],h.data===Jw);--y)h.data=null}if(f.parent=cet,f.eachBefore(function(y){y.depth=y.parent.depth+1,--l}).eachBefore(OF),f.parent=null,l>0)throw new Error("cycle");return f}return r.id=function(i){return arguments.length?(e=Zw(i),r):e},r.parentId=function(i){return arguments.length?(t=Zw(i),r):t},r.path=function(i){return arguments.length?(n=Zw(i),r):n},r}function det(e){e=`${e}`;let t=e.length;return RS(e,t-1)&&!RS(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function H6(e){let t=e.length;if(t<2)return"";for(;--t>1&&!RS(e,t););return e.slice(0,t)}function RS(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}function het(e,t){return e.parent===t.parent?1:2}function t_(e){var t=e.children;return t?t[0]:e.t}function e_(e){var t=e.children;return t?t[t.length-1]:e.t}function pet(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function yet(e){for(var t=0,n=0,r=e.children,i=r.length,s;--i>=0;)s=r[i],s.z+=t,s.m+=t,t+=s.s+(n+=s.c)}function met(e,t,n){return e.a.parent===t.parent?e.a:n}function ym(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}ym.prototype=Object.create(If.prototype);function get(e){for(var t=new ym(e,0),n,r=[t],i,s,o,a;n=r.pop();)if(s=n._.children)for(n.children=new Array(a=s.length),o=a-1;o>=0;--o)r.push(i=n.children[o]=new ym(s[o],o)),i.parent=n;return(t.parent=new ym(null,0)).children=[t],t}function d1(){var e=het,t=1,n=1,r=null;function i(c){var u=get(c);if(u.eachAfter(s),u.parent.m=-u.z,u.eachBefore(o),r)c.eachBefore(l);else{var f=c,d=c,h=c;c.eachBefore(function(m){m.x<f.x&&(f=m),m.x>d.x&&(d=m),m.depth>h.depth&&(h=m)});var p=f===d?1:e(f,d)/2,g=p-f.x,v=t/(d.x+p+g),y=n/(h.depth||1);c.eachBefore(function(m){m.x=(m.x+g)*v,m.y=m.depth*y})}return c}function s(c){var u=c.children,f=c.parent.children,d=c.i?f[c.i-1]:null;if(u){yet(c);var h=(u[0].z+u[u.length-1].z)/2;d?(c.z=d.z+e(c._,d._),c.m=c.z-h):c.z=h}else d&&(c.z=d.z+e(c._,d._));c.parent.A=a(c,d,c.parent.A||f[0])}function o(c){c._.x=c.z+c.parent.m,c.m+=c.parent.m}function a(c,u,f){if(u){for(var d=c,h=c,p=u,g=d.parent.children[0],v=d.m,y=h.m,m=p.m,b=g.m,w;p=e_(p),d=t_(d),p&&d;)g=t_(g),h=e_(h),h.a=c,w=p.z+m-d.z-v+e(p._,d._),w>0&&(pet(met(p,c,f),c,w),v+=w,y+=w),m+=p.m,v+=d.m,b+=g.m,y+=h.m;p&&!e_(h)&&(h.t=p,h.m+=m-y),d&&!t_(g)&&(g.t=d,g.m+=v-b,f=c)}return f}function l(c){c.x*=t,c.y=c.depth*n}return i.separation=function(c){return arguments.length?(e=c,i):e},i.size=function(c){return arguments.length?(r=!1,t=+c[0],n=+c[1],i):r?null:[t,n]},i.nodeSize=function(c){return arguments.length?(r=!0,t=+c[0],n=+c[1],i):r?[t,n]:null},i}const bet=1664525,vet=1013904223,G6=1/4294967296;function E3(e=Math.random()){let t=(0<=e&&e<1?e/G6:Math.abs(e))|0;return()=>(t=bet*t+vet|0,G6*(t>>>0))}function Us(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function ev(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const CS=Symbol("implicit");function A3(){var e=new lc,t=[],n=[],r=CS;function i(s){let o=e.get(s);if(o===void 0){if(r!==CS)return r;e.set(s,o=t.push(s)-1)}return n[o%n.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new lc;for(const o of s)e.has(o)||e.set(o,t.push(o)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return A3(t,n).unknown(r)},Us.apply(i,arguments),i}function nv(){var e=A3().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,s,o,a=!1,l=0,c=0,u=.5;delete e.unknown;function f(){var d=t().length,h=i<r,p=h?i:r,g=h?r:i;s=(g-p)/Math.max(1,d-l+c*2),a&&(s=Math.floor(s)),p+=(g-p-s*(d-l))*u,o=s*(1-l),a&&(p=Math.round(p),o=Math.round(o));var v=Dr(d).map(function(y){return p+s*y});return n(h?v.reverse():v)}return e.domain=function(d){return arguments.length?(t(d),f()):t()},e.range=function(d){return arguments.length?([r,i]=d,r=+r,i=+i,f()):[r,i]},e.rangeRound=function(d){return[r,i]=d,r=+r,i=+i,a=!0,f()},e.bandwidth=function(){return o},e.step=function(){return s},e.round=function(d){return arguments.length?(a=!!d,f()):a},e.padding=function(d){return arguments.length?(l=Math.min(1,c=+d),f()):l},e.paddingInner=function(d){return arguments.length?(l=Math.min(1,d),f()):l},e.paddingOuter=function(d){return arguments.length?(c=+d,f()):c},e.align=function(d){return arguments.length?(u=Math.max(0,Math.min(1,d)),f()):u},e.copy=function(){return nv(t(),[r,i]).round(a).paddingInner(l).paddingOuter(c).align(u)},Us.apply(f(),arguments)}function FF(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return FF(t())},e}function wet(){return FF(nv.apply(null,arguments).paddingInner(1))}function _et(e){return function(){return e}}function US(e){return+e}var X6=[0,1];function ci(e){return e}function PS(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:_et(isNaN(t)?NaN:.5)}function xet(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function Iet(e,t,n){var r=e[0],i=e[1],s=t[0],o=t[1];return i<r?(r=PS(i,r),s=n(o,s)):(r=PS(r,i),s=n(s,o)),function(a){return s(r(a))}}function Tet(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),s=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=PS(e[o],e[o+1]),s[o]=n(t[o],t[o+1]);return function(a){var l=jb(e,a,1,r)-1;return s[l](i[l](a))}}function ay(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function rv(){var e=X6,t=X6,n=Qf,r,i,s,o=ci,a,l,c;function u(){var d=Math.min(e.length,t.length);return o!==ci&&(o=xet(e[0],e[d-1])),a=d>2?Tet:Iet,l=c=null,f}function f(d){return d==null||isNaN(d=+d)?s:(l||(l=a(e.map(r),t,n)))(r(o(d)))}return f.invert=function(d){return o(i((c||(c=a(t,e.map(r),Fn)))(d)))},f.domain=function(d){return arguments.length?(e=Array.from(d,US),u()):e.slice()},f.range=function(d){return arguments.length?(t=Array.from(d),u()):t.slice()},f.rangeRound=function(d){return t=Array.from(d),n=p3,u()},f.clamp=function(d){return arguments.length?(o=d?!0:ci,u()):o!==ci},f.interpolate=function(d){return arguments.length?(n=d,u()):n},f.unknown=function(d){return arguments.length?(s=d,f):s},function(d,h){return r=d,i=h,u()}}function LF(){return rv()(ci,ci)}function Eet(e,t,n,r){var i=eS(e,t,n),s;switch(r=yp(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(s=OJ(i,o))&&(r.precision=s),XB(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=BJ(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=DJ(i))&&(r.precision=s-(r.type==="%")*2);break}}return Kf(r)}function ly(e){var t=e.domain;return e.ticks=function(n){var r=t();return Fa(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return Eet(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,s=r.length-1,o=r[i],a=r[s],l,c,u=10;for(a<o&&(c=o,o=a,a=c,c=i,i=s,s=c);u-- >0;){if(c=cp(o,a,n),c===l)return r[i]=o,r[s]=a,t(r);if(c>0)o=Math.floor(o/c)*c,a=Math.ceil(a/c)*c;else if(c<0)o=Math.ceil(o*c)/c,a=Math.floor(a*c)/c;else break;l=c}return e},e}function iv(){var e=LF();return e.copy=function(){return ay(e,iv())},Us.apply(e,arguments),ly(e)}function RF(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,US),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return RF(e).unknown(t)},e=arguments.length?Array.from(e,US):[0,1],ly(n)}function CF(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],s=e[r],o;return s<i&&(o=n,n=r,r=o,o=i,i=s,s=o),e[n]=t.floor(i),e[r]=t.ceil(s),e}function Q6(e){return Math.log(e)}function K6(e){return Math.exp(e)}function Aet(e){return-Math.log(-e)}function Met(e){return-Math.exp(-e)}function $et(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Net(e){return e===10?$et:e===Math.E?Math.exp:t=>Math.pow(e,t)}function ket(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function Z6(e){return(t,n)=>-e(-t,n)}function UF(e){const t=e(Q6,K6),n=t.domain;let r=10,i,s;function o(){return i=ket(r),s=Net(r),n()[0]<0?(i=Z6(i),s=Z6(s),e(Aet,Met)):e(Q6,K6),t}return t.base=function(a){return arguments.length?(r=+a,o()):r},t.domain=function(a){return arguments.length?(n(a),o()):n()},t.ticks=a=>{const l=n();let c=l[0],u=l[l.length-1];const f=u<c;f&&([c,u]=[u,c]);let d=i(c),h=i(u),p,g;const v=a==null?10:+a;let y=[];if(!(r%1)&&h-d<v){if(d=Math.floor(d),h=Math.ceil(h),c>0){for(;d<=h;++d)for(p=1;p<r;++p)if(g=d<0?p/s(-d):p*s(d),!(g<c)){if(g>u)break;y.push(g)}}else for(;d<=h;++d)for(p=r-1;p>=1;--p)if(g=d>0?p/s(-d):p*s(d),!(g<c)){if(g>u)break;y.push(g)}y.length*2<v&&(y=Fa(c,u,v))}else y=Fa(d,h,Math.min(h-d,v)).map(s);return f?y.reverse():y},t.tickFormat=(a,l)=>{if(a==null&&(a=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=yp(l)).precision==null&&(l.trim=!0),l=Kf(l)),a===1/0)return l;const c=Math.max(1,r*a/t.ticks().length);return u=>{let f=u/s(Math.round(i(u)));return f*r<r-.5&&(f*=r),f<=c?l(u):""}},t.nice=()=>n(CF(n(),{floor:a=>s(Math.floor(i(a))),ceil:a=>s(Math.ceil(i(a)))})),t}function PF(){const e=UF(rv()).domain([1,10]);return e.copy=()=>ay(e,PF()).base(e.base()),Us.apply(e,arguments),e}function J6(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function t$(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function zF(e){var t=1,n=e(J6(t),t$(t));return n.constant=function(r){return arguments.length?e(J6(t=+r),t$(t)):t},ly(n)}function jF(){var e=zF(rv());return e.copy=function(){return ay(e,jF()).constant(e.constant())},Us.apply(e,arguments)}function e$(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Det(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Oet(e){return e<0?-e*e:e*e}function VF(e){var t=e(ci,ci),n=1;function r(){return n===1?e(ci,ci):n===.5?e(Det,Oet):e(e$(n),e$(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},ly(t)}function YF(){var e=VF(rv());return e.copy=function(){return ay(e,YF()).exponent(e.exponent())},Us.apply(e,arguments),e}function qF(){var e=[],t=[],n=[],r;function i(){var o=0,a=Math.max(1,t.length);for(n=new Array(a-1);++o<a;)n[o-1]=CG(e,o/a);return s}function s(o){return o==null||isNaN(o=+o)?r:t[jb(n,o)]}return s.invertExtent=function(o){var a=t.indexOf(o);return a<0?[NaN,NaN]:[a>0?n[a-1]:e[0],a<n.length?n[a]:e[e.length-1]]},s.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let a of o)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(ze),i()},s.range=function(o){return arguments.length?(t=Array.from(o),i()):t.slice()},s.unknown=function(o){return arguments.length?(r=o,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return qF().domain(e).range(t).unknown(r)},Us.apply(s,arguments)}function WF(){var e=[.5],t=[0,1],n,r=1;function i(s){return s!=null&&s<=s?t[jb(e,s,0,r)]:n}return i.domain=function(s){return arguments.length?(e=Array.from(s),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(s){return arguments.length?(t=Array.from(s),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(s){var o=t.indexOf(s);return[e[o-1],e[o]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return WF().domain(e).range(t).unknown(n)},Us.apply(i,arguments)}const n_=new Date,r_=new Date;function fn(e,t,n,r){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(e(s=new Date(+s)),s),i.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),i.round=s=>{const o=i(s),a=i.ceil(s);return s-o<a-s?o:a},i.offset=(s,o)=>(t(s=new Date(+s),o==null?1:Math.floor(o)),s),i.range=(s,o,a)=>{const l=[];if(s=i.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return l;let c;do l.push(c=new Date(+s)),t(s,a),e(s);while(c<s&&s<o);return l},i.filter=s=>fn(o=>{if(o>=o)for(;e(o),!s(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;t(o,-1),!s(o););else for(;--a>=0;)for(;t(o,1),!s(o););}),n&&(i.count=(s,o)=>(n_.setTime(+s),r_.setTime(+o),e(n_),e(r_),Math.floor(n(n_,r_))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?o=>r(o)%s===0:o=>i.count(0,o)%s===0):i)),i}const h1=fn(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);h1.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?fn(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):h1);h1.range;const bo=1e3,ui=bo*60,vo=ui*60,Oo=vo*24,M3=Oo*7,n$=Oo*30,i_=Oo*365,Ss=fn(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*bo)},(e,t)=>(t-e)/bo,e=>e.getUTCSeconds());Ss.range;const sv=fn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*bo)},(e,t)=>{e.setTime(+e+t*ui)},(e,t)=>(t-e)/ui,e=>e.getMinutes());sv.range;const cy=fn(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*ui)},(e,t)=>(t-e)/ui,e=>e.getUTCMinutes());cy.range;const ov=fn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*bo-e.getMinutes()*ui)},(e,t)=>{e.setTime(+e+t*vo)},(e,t)=>(t-e)/vo,e=>e.getHours());ov.range;const uy=fn(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*vo)},(e,t)=>(t-e)/vo,e=>e.getUTCHours());uy.range;const _c=fn(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*ui)/Oo,e=>e.getDate()-1);_c.range;const av=fn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Oo,e=>e.getUTCDate()-1);av.range;const lv=fn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Oo,e=>Math.floor(e/Oo));lv.range;function Sc(e){return fn(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*ui)/M3)}const Tf=Sc(0),gp=Sc(1),HF=Sc(2),GF=Sc(3),pc=Sc(4),XF=Sc(5),QF=Sc(6);Tf.range;gp.range;HF.range;GF.range;pc.range;XF.range;QF.range;function xc(e){return fn(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/M3)}const Ef=xc(0),bp=xc(1),KF=xc(2),ZF=xc(3),yc=xc(4),JF=xc(5),tL=xc(6);Ef.range;bp.range;KF.range;ZF.range;yc.range;JF.range;tL.range;const fy=fn(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());fy.range;const dy=fn(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());dy.range;const Wi=fn(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Wi.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:fn(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Wi.range;const Hi=fn(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Hi.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:fn(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Hi.range;function eL(e,t,n,r,i,s){const o=[[Ss,1,bo],[Ss,5,5*bo],[Ss,15,15*bo],[Ss,30,30*bo],[s,1,ui],[s,5,5*ui],[s,15,15*ui],[s,30,30*ui],[i,1,vo],[i,3,3*vo],[i,6,6*vo],[i,12,12*vo],[r,1,Oo],[r,2,2*Oo],[n,1,M3],[t,1,n$],[t,3,3*n$],[e,1,i_]];function a(c,u,f){const d=u<c;d&&([c,u]=[u,c]);const h=f&&typeof f.range=="function"?f:l(c,u,f),p=h?h.range(c,+u+1):[];return d?p.reverse():p}function l(c,u,f){const d=Math.abs(u-c)/f,h=zb(([,,v])=>v).right(o,d);if(h===o.length)return e.every(eS(c/i_,u/i_,f));if(h===0)return h1.every(Math.max(eS(c,u,f),1));const[p,g]=o[d/o[h-1][2]<o[h][2]/d?h-1:h];return p.every(g)}return[a,l]}const[Bet,nL]=eL(Hi,dy,Ef,lv,uy,cy),[Fet,Let]=eL(Wi,fy,Tf,_c,ov,sv);function s_(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function o_(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Ad(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function Ret(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,s=e.days,o=e.shortDays,a=e.months,l=e.shortMonths,c=Md(i),u=$d(i),f=Md(s),d=$d(s),h=Md(o),p=$d(o),g=Md(a),v=$d(a),y=Md(l),m=$d(l),b={a:F,A:O,b:C,B,c:null,d:l$,e:l$,f:ont,g:mnt,G:bnt,H:rnt,I:int,j:snt,L:rL,m:ant,M:lnt,p:P,q:z,Q:f$,s:d$,S:cnt,u:unt,U:fnt,V:dnt,w:hnt,W:pnt,x:null,X:null,y:ynt,Y:gnt,Z:vnt,"%":u$},w={a:H,A:X,b:tt,B:Z,c:null,d:c$,e:c$,f:xnt,g:Ont,G:Fnt,H:wnt,I:_nt,j:Snt,L:sL,m:Int,M:Tnt,p:Y,q:Q,Q:f$,s:d$,S:Ent,u:Ant,U:Mnt,V:$nt,w:Nnt,W:knt,x:null,X:null,y:Dnt,Y:Bnt,Z:Lnt,"%":u$},S={a:I,A,b:D,B:L,c:T,d:o$,e:o$,f:Jet,g:s$,G:i$,H:a$,I:a$,j:Xet,L:Zet,m:Get,M:Qet,p:k,q:Het,Q:ent,s:nnt,S:Ket,u:jet,U:Vet,V:Yet,w:zet,W:qet,x:M,X:N,y:s$,Y:i$,Z:Wet,"%":tnt};b.x=_(n,b),b.X=_(r,b),b.c=_(t,b),w.x=_(n,w),w.X=_(r,w),w.c=_(t,w);function _(V,J){return function(et){var j=[],At=-1,at=0,qt=V.length,Ht,st,pe;for(et instanceof Date||(et=new Date(+et));++At<qt;)V.charCodeAt(At)===37&&(j.push(V.slice(at,At)),(st=r$[Ht=V.charAt(++At)])!=null?Ht=V.charAt(++At):st=Ht==="e"?" ":"0",(pe=J[Ht])&&(Ht=pe(et,st)),j.push(Ht),at=At+1);return j.push(V.slice(at,At)),j.join("")}}function x(V,J){return function(et){var j=Ad(1900,void 0,1),At=E(j,V,et+="",0),at,qt;if(At!=et.length)return null;if("Q"in j)return new Date(j.Q);if("s"in j)return new Date(j.s*1e3+("L"in j?j.L:0));if(J&&!("Z"in j)&&(j.Z=0),"p"in j&&(j.H=j.H%12+j.p*12),j.m===void 0&&(j.m="q"in j?j.q:0),"V"in j){if(j.V<1||j.V>53)return null;"w"in j||(j.w=1),"Z"in j?(at=o_(Ad(j.y,0,1)),qt=at.getUTCDay(),at=qt>4||qt===0?bp.ceil(at):bp(at),at=av.offset(at,(j.V-1)*7),j.y=at.getUTCFullYear(),j.m=at.getUTCMonth(),j.d=at.getUTCDate()+(j.w+6)%7):(at=s_(Ad(j.y,0,1)),qt=at.getDay(),at=qt>4||qt===0?gp.ceil(at):gp(at),at=_c.offset(at,(j.V-1)*7),j.y=at.getFullYear(),j.m=at.getMonth(),j.d=at.getDate()+(j.w+6)%7)}else("W"in j||"U"in j)&&("w"in j||(j.w="u"in j?j.u%7:"W"in j?1:0),qt="Z"in j?o_(Ad(j.y,0,1)).getUTCDay():s_(Ad(j.y,0,1)).getDay(),j.m=0,j.d="W"in j?(j.w+6)%7+j.W*7-(qt+5)%7:j.w+j.U*7-(qt+6)%7);return"Z"in j?(j.H+=j.Z/100|0,j.M+=j.Z%100,o_(j)):s_(j)}}function E(V,J,et,j){for(var At=0,at=J.length,qt=et.length,Ht,st;At<at;){if(j>=qt)return-1;if(Ht=J.charCodeAt(At++),Ht===37){if(Ht=J.charAt(At++),st=S[Ht in r$?J.charAt(At++):Ht],!st||(j=st(V,et,j))<0)return-1}else if(Ht!=et.charCodeAt(j++))return-1}return j}function k(V,J,et){var j=c.exec(J.slice(et));return j?(V.p=u.get(j[0].toLowerCase()),et+j[0].length):-1}function I(V,J,et){var j=h.exec(J.slice(et));return j?(V.w=p.get(j[0].toLowerCase()),et+j[0].length):-1}function A(V,J,et){var j=f.exec(J.slice(et));return j?(V.w=d.get(j[0].toLowerCase()),et+j[0].length):-1}function D(V,J,et){var j=y.exec(J.slice(et));return j?(V.m=m.get(j[0].toLowerCase()),et+j[0].length):-1}function L(V,J,et){var j=g.exec(J.slice(et));return j?(V.m=v.get(j[0].toLowerCase()),et+j[0].length):-1}function T(V,J,et){return E(V,t,J,et)}function M(V,J,et){return E(V,n,J,et)}function N(V,J,et){return E(V,r,J,et)}function F(V){return o[V.getDay()]}function O(V){return s[V.getDay()]}function C(V){return l[V.getMonth()]}function B(V){return a[V.getMonth()]}function P(V){return i[+(V.getHours()>=12)]}function z(V){return 1+~~(V.getMonth()/3)}function H(V){return o[V.getUTCDay()]}function X(V){return s[V.getUTCDay()]}function tt(V){return l[V.getUTCMonth()]}function Z(V){return a[V.getUTCMonth()]}function Y(V){return i[+(V.getUTCHours()>=12)]}function Q(V){return 1+~~(V.getUTCMonth()/3)}return{format:function(V){var J=_(V+="",b);return J.toString=function(){return V},J},parse:function(V){var J=x(V+="",!1);return J.toString=function(){return V},J},utcFormat:function(V){var J=_(V+="",w);return J.toString=function(){return V},J},utcParse:function(V){var J=x(V+="",!0);return J.toString=function(){return V},J}}}var r$={"-":"",_:" ",0:"0"},_n=/^\s*\d+/,Cet=/^%/,Uet=/[\\^$*+?|[\]().{}]/g;function Jt(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(t)+i:i)}function Pet(e){return e.replace(Uet,"\\$&")}function Md(e){return new RegExp("^(?:"+e.map(Pet).join("|")+")","i")}function $d(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function zet(e,t,n){var r=_n.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function jet(e,t,n){var r=_n.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function Vet(e,t,n){var r=_n.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function Yet(e,t,n){var r=_n.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function qet(e,t,n){var r=_n.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function i$(e,t,n){var r=_n.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function s$(e,t,n){var r=_n.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Wet(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Het(e,t,n){var r=_n.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function Get(e,t,n){var r=_n.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function o$(e,t,n){var r=_n.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function Xet(e,t,n){var r=_n.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function a$(e,t,n){var r=_n.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function Qet(e,t,n){var r=_n.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function Ket(e,t,n){var r=_n.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function Zet(e,t,n){var r=_n.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function Jet(e,t,n){var r=_n.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function tnt(e,t,n){var r=Cet.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function ent(e,t,n){var r=_n.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function nnt(e,t,n){var r=_n.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function l$(e,t){return Jt(e.getDate(),t,2)}function rnt(e,t){return Jt(e.getHours(),t,2)}function int(e,t){return Jt(e.getHours()%12||12,t,2)}function snt(e,t){return Jt(1+_c.count(Wi(e),e),t,3)}function rL(e,t){return Jt(e.getMilliseconds(),t,3)}function ont(e,t){return rL(e,t)+"000"}function ant(e,t){return Jt(e.getMonth()+1,t,2)}function lnt(e,t){return Jt(e.getMinutes(),t,2)}function cnt(e,t){return Jt(e.getSeconds(),t,2)}function unt(e){var t=e.getDay();return t===0?7:t}function fnt(e,t){return Jt(Tf.count(Wi(e)-1,e),t,2)}function iL(e){var t=e.getDay();return t>=4||t===0?pc(e):pc.ceil(e)}function dnt(e,t){return e=iL(e),Jt(pc.count(Wi(e),e)+(Wi(e).getDay()===4),t,2)}function hnt(e){return e.getDay()}function pnt(e,t){return Jt(gp.count(Wi(e)-1,e),t,2)}function ynt(e,t){return Jt(e.getFullYear()%100,t,2)}function mnt(e,t){return e=iL(e),Jt(e.getFullYear()%100,t,2)}function gnt(e,t){return Jt(e.getFullYear()%1e4,t,4)}function bnt(e,t){var n=e.getDay();return e=n>=4||n===0?pc(e):pc.ceil(e),Jt(e.getFullYear()%1e4,t,4)}function vnt(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Jt(t/60|0,"0",2)+Jt(t%60,"0",2)}function c$(e,t){return Jt(e.getUTCDate(),t,2)}function wnt(e,t){return Jt(e.getUTCHours(),t,2)}function _nt(e,t){return Jt(e.getUTCHours()%12||12,t,2)}function Snt(e,t){return Jt(1+av.count(Hi(e),e),t,3)}function sL(e,t){return Jt(e.getUTCMilliseconds(),t,3)}function xnt(e,t){return sL(e,t)+"000"}function Int(e,t){return Jt(e.getUTCMonth()+1,t,2)}function Tnt(e,t){return Jt(e.getUTCMinutes(),t,2)}function Ent(e,t){return Jt(e.getUTCSeconds(),t,2)}function Ant(e){var t=e.getUTCDay();return t===0?7:t}function Mnt(e,t){return Jt(Ef.count(Hi(e)-1,e),t,2)}function oL(e){var t=e.getUTCDay();return t>=4||t===0?yc(e):yc.ceil(e)}function $nt(e,t){return e=oL(e),Jt(yc.count(Hi(e),e)+(Hi(e).getUTCDay()===4),t,2)}function Nnt(e){return e.getUTCDay()}function knt(e,t){return Jt(bp.count(Hi(e)-1,e),t,2)}function Dnt(e,t){return Jt(e.getUTCFullYear()%100,t,2)}function Ont(e,t){return e=oL(e),Jt(e.getUTCFullYear()%100,t,2)}function Bnt(e,t){return Jt(e.getUTCFullYear()%1e4,t,4)}function Fnt(e,t){var n=e.getUTCDay();return e=n>=4||n===0?yc(e):yc.ceil(e),Jt(e.getUTCFullYear()%1e4,t,4)}function Lnt(){return"+0000"}function u$(){return"%"}function f$(e){return+e}function d$(e){return Math.floor(+e/1e3)}var Lc,$3,hy;Rnt({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Rnt(e){return Lc=Ret(e),$3=Lc.format,Lc.parse,hy=Lc.utcFormat,Lc.utcParse,Lc}function Cnt(e){return new Date(e)}function Unt(e){return e instanceof Date?+e:+new Date(+e)}function N3(e,t,n,r,i,s,o,a,l,c){var u=LF(),f=u.invert,d=u.domain,h=c(".%L"),p=c(":%S"),g=c("%I:%M"),v=c("%I %p"),y=c("%a %d"),m=c("%b %d"),b=c("%B"),w=c("%Y");function S(_){return(l(_)<_?h:a(_)<_?p:o(_)<_?g:s(_)<_?v:r(_)<_?i(_)<_?y:m:n(_)<_?b:w)(_)}return u.invert=function(_){return new Date(f(_))},u.domain=function(_){return arguments.length?d(Array.from(_,Unt)):d().map(Cnt)},u.ticks=function(_){var x=d();return e(x[0],x[x.length-1],_??10)},u.tickFormat=function(_,x){return x==null?S:c(x)},u.nice=function(_){var x=d();return(!_||typeof _.range!="function")&&(_=t(x[0],x[x.length-1],_??10)),_?d(CF(x,_)):u},u.copy=function(){return ay(u,N3(e,t,n,r,i,s,o,a,l,c))},u}function Pnt(){return Us.apply(N3(Fet,Let,Wi,fy,Tf,_c,ov,sv,Ss,$3).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function znt(){return Us.apply(N3(Bet,nL,Hi,dy,Ef,av,uy,cy,Ss,hy).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function cv(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function uv(){var e=0,t=.5,n=1,r=1,i,s,o,a,l,c=ci,u,f=!1,d;function h(g){return isNaN(g=+g)?d:(g=.5+((g=+u(g))-s)*(r*g<r*s?a:l),c(f?Math.max(0,Math.min(1,g)):g))}h.domain=function(g){return arguments.length?([e,t,n]=g,i=u(e=+e),s=u(t=+t),o=u(n=+n),a=i===s?0:.5/(s-i),l=s===o?0:.5/(o-s),r=s<i?-1:1,h):[e,t,n]},h.clamp=function(g){return arguments.length?(f=!!g,h):f},h.interpolator=function(g){return arguments.length?(c=g,h):c};function p(g){return function(v){var y,m,b;return arguments.length?([y,m,b]=v,c=Qb(g,[y,m,b]),h):[c(0),c(.5),c(1)]}}return h.range=p(Qf),h.rangeRound=p(p3),h.unknown=function(g){return arguments.length?(d=g,h):d},function(g){return u=g,i=g(e),s=g(t),o=g(n),a=i===s?0:.5/(s-i),l=s===o?0:.5/(o-s),r=s<i?-1:1,h}}function aL(){var e=ly(uv()(ci));return e.copy=function(){return cv(e,aL())},ev.apply(e,arguments)}function lL(){var e=UF(uv()).domain([.1,1,10]);return e.copy=function(){return cv(e,lL()).base(e.base())},ev.apply(e,arguments)}function cL(){var e=zF(uv());return e.copy=function(){return cv(e,cL()).constant(e.constant())},ev.apply(e,arguments)}function uL(){var e=VF(uv());return e.copy=function(){return cv(e,uL()).exponent(e.exponent())},ev.apply(e,arguments)}function Dt(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const jnt=Dt("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Vnt=Dt("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),Ynt=Dt("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),qnt=Dt("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),Wnt=Dt("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),Hnt=Dt("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),Gnt=Dt("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),Xnt=Dt("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),Qnt=Dt("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),Knt=Dt("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),be=e=>ZQ(e[e.length-1]);var fL=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(Dt);const dL=be(fL);var hL=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(Dt);const pL=be(hL);var yL=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(Dt);const mL=be(yL);var gL=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(Dt);const bL=be(gL);var zS=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(Dt);const p1=be(zS);var vL=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(Dt);const wL=be(vL);var jS=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(Dt);const y1=be(jS);var _L=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(Dt);const SL=be(_L);var xL=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(Dt);const IL=be(xL);var TL=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(Dt);const EL=be(TL);var AL=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(Dt);const ML=be(AL);var $L=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(Dt);const NL=be($L);var kL=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(Dt);const DL=be(kL);var OL=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(Dt);const BL=be(OL);var FL=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(Dt);const LL=be(FL);var RL=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(Dt);const CL=be(RL);var UL=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(Dt);const PL=be(UL);var zL=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(Dt);const jL=be(zL);var VL=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(Dt);const YL=be(VL);var qL=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(Dt);const WL=be(qL);var HL=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(Dt);const GL=be(HL);var XL=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(Dt);const QL=be(XL);var KL=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(Dt);const ZL=be(KL);var JL=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(Dt);const tR=be(JL);var eR=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(Dt);const nR=be(eR);var rR=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(Dt);const iR=be(rR);var sR=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(Dt);const oR=be(sR);function aR(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-e*(35.34-e*(2381.73-e*(6402.7-e*(7024.72-e*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+e*(170.73+e*(52.82-e*(131.46-e*(176.58-e*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+e*(442.36-e*(2482.43-e*(6167.24-e*(6614.94-e*2475.67)))))))+")"}const lR=y3(Fs(300,.5,0),Fs(-240,.5,1));var cR=y3(Fs(-100,.75,.35),Fs(80,1.5,.8)),uR=y3(Fs(260,.75,.35),Fs(80,1.5,.8)),_0=Fs();function fR(e){(e<0||e>1)&&(e-=Math.floor(e));var t=Math.abs(e-.5);return _0.h=360*e-100,_0.s=1.5-1.5*t,_0.l=.8-.9*t,_0+""}var S0=bi(),Znt=Math.PI/3,Jnt=Math.PI*2/3;function dR(e){var t;return e=(.5-e)*Math.PI,S0.r=255*(t=Math.sin(e))*t,S0.g=255*(t=Math.sin(e+Znt))*t,S0.b=255*(t=Math.sin(e+Jnt))*t,S0+""}function hR(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+e*(1172.33-e*(10793.56-e*(33300.12-e*(38394.49-e*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+e*(557.33+e*(1225.33-e*(3574.96-e*(1073.77+e*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+e*(3211.1-e*(15327.97-e*(27814-e*(22569.18-e*6838.66)))))))+")"}function fv(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}const pR=fv(Dt("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var yR=fv(Dt("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),mR=fv(Dt("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),gR=fv(Dt("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function yn(e){return function(){return e}}const bR=Math.cos,k3=Math.min,m1=Math.sin,dn=Math.sqrt,h$=1e-12,g1=Math.PI,dv=2*g1;function vR(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new WB(t)}function wR(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function _R(e){this._context=e}_R.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function py(e){return new _R(e)}function SR(e){return e[0]}function xR(e){return e[1]}function IR(e,t){var n=yn(!0),r=null,i=py,s=null,o=vR(a);e=typeof e=="function"?e:e===void 0?SR:yn(e),t=typeof t=="function"?t:t===void 0?xR:yn(t);function a(l){var c,u=(l=wR(l)).length,f,d=!1,h;for(r==null&&(s=i(h=o())),c=0;c<=u;++c)!(c<u&&n(f=l[c],c,l))===d&&((d=!d)?s.lineStart():s.lineEnd()),d&&s.point(+e(f,c,l),+t(f,c,l));if(h)return s=null,h+""||null}return a.x=function(l){return arguments.length?(e=typeof l=="function"?l:yn(+l),a):e},a.y=function(l){return arguments.length?(t=typeof l=="function"?l:yn(+l),a):t},a.defined=function(l){return arguments.length?(n=typeof l=="function"?l:yn(!!l),a):n},a.curve=function(l){return arguments.length?(i=l,r!=null&&(s=i(r)),a):i},a.context=function(l){return arguments.length?(l==null?r=s=null:s=i(r=l),a):r},a}function D3(e,t,n){var r=null,i=yn(!0),s=null,o=py,a=null,l=vR(c);e=typeof e=="function"?e:e===void 0?SR:yn(+e),t=typeof t=="function"?t:yn(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?xR:yn(+n);function c(f){var d,h,p,g=(f=wR(f)).length,v,y=!1,m,b=new Array(g),w=new Array(g);for(s==null&&(a=o(m=l())),d=0;d<=g;++d){if(!(d<g&&i(v=f[d],d,f))===y)if(y=!y)h=d,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),p=d-1;p>=h;--p)a.point(b[p],w[p]);a.lineEnd(),a.areaEnd()}y&&(b[d]=+e(v,d,f),w[d]=+t(v,d,f),a.point(r?+r(v,d,f):b[d],n?+n(v,d,f):w[d]))}if(m)return a=null,m+""||null}function u(){return IR().defined(i).curve(o).context(s)}return c.x=function(f){return arguments.length?(e=typeof f=="function"?f:yn(+f),r=null,c):e},c.x0=function(f){return arguments.length?(e=typeof f=="function"?f:yn(+f),c):e},c.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:yn(+f),c):r},c.y=function(f){return arguments.length?(t=typeof f=="function"?f:yn(+f),n=null,c):t},c.y0=function(f){return arguments.length?(t=typeof f=="function"?f:yn(+f),c):t},c.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:yn(+f),c):n},c.lineX0=c.lineY0=function(){return u().x(e).y(t)},c.lineY1=function(){return u().x(e).y(n)},c.lineX1=function(){return u().x(r).y(t)},c.defined=function(f){return arguments.length?(i=typeof f=="function"?f:yn(!!f),c):i},c.curve=function(f){return arguments.length?(o=f,s!=null&&(a=o(s)),c):o},c.context=function(f){return arguments.length?(f==null?s=a=null:a=o(s=f),c):s},c}class TR{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function trt(e){return new TR(e,!0)}function ert(e){return new TR(e,!1)}const nrt=dn(3),ER={draw(e,t){const n=dn(t+k3(t/28,.75))*.59436,r=n/2,i=r*nrt;e.moveTo(0,n),e.lineTo(0,-n),e.moveTo(-i,-r),e.lineTo(i,r),e.moveTo(-i,r),e.lineTo(i,-r)}},vp={draw(e,t){const n=dn(t/g1);e.moveTo(n,0),e.arc(0,0,n,0,dv)}},AR={draw(e,t){const n=dn(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},MR=dn(1/3),rrt=MR*2,$R={draw(e,t){const n=dn(t/rrt),r=n*MR;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},NR={draw(e,t){const n=dn(t)*.62625;e.moveTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.lineTo(-n,0),e.closePath()}},kR={draw(e,t){const n=dn(t-k3(t/7,2))*.87559;e.moveTo(-n,0),e.lineTo(n,0),e.moveTo(0,n),e.lineTo(0,-n)}},DR={draw(e,t){const n=dn(t),r=-n/2;e.rect(r,r,n,n)}},OR={draw(e,t){const n=dn(t)*.4431;e.moveTo(n,n),e.lineTo(n,-n),e.lineTo(-n,-n),e.lineTo(-n,n),e.closePath()}},irt=.8908130915292852,BR=m1(g1/10)/m1(7*g1/10),srt=m1(dv/10)*BR,ort=-bR(dv/10)*BR,FR={draw(e,t){const n=dn(t*irt),r=srt*n,i=ort*n;e.moveTo(0,-n),e.lineTo(r,i);for(let s=1;s<5;++s){const o=dv*s/5,a=bR(o),l=m1(o);e.lineTo(l*n,-a*n),e.lineTo(a*r-l*i,l*r+a*i)}e.closePath()}},a_=dn(3),LR={draw(e,t){const n=-dn(t/(a_*3));e.moveTo(0,n*2),e.lineTo(-a_*n,-n),e.lineTo(a_*n,-n),e.closePath()}},art=dn(3),RR={draw(e,t){const n=dn(t)*.6824,r=n/2,i=n*art/2;e.moveTo(0,-n),e.lineTo(i,r),e.lineTo(-i,r),e.closePath()}},Hr=-.5,Gr=dn(3)/2,VS=1/dn(12),lrt=(VS/2+1)*3,CR={draw(e,t){const n=dn(t/lrt),r=n/2,i=n*VS,s=r,o=n*VS+n,a=-s,l=o;e.moveTo(r,i),e.lineTo(s,o),e.lineTo(a,l),e.lineTo(Hr*r-Gr*i,Gr*r+Hr*i),e.lineTo(Hr*s-Gr*o,Gr*s+Hr*o),e.lineTo(Hr*a-Gr*l,Gr*a+Hr*l),e.lineTo(Hr*r+Gr*i,Hr*i-Gr*r),e.lineTo(Hr*s+Gr*o,Hr*o-Gr*s),e.lineTo(Hr*a+Gr*l,Hr*l-Gr*a),e.closePath()}},UR={draw(e,t){const n=dn(t-k3(t/6,1.7))*.6189;e.moveTo(-n,-n),e.lineTo(n,n),e.moveTo(-n,n),e.lineTo(n,-n)}},crt=[vp,AR,$R,DR,FR,LR,CR],urt=[vp,kR,UR,RR,ER,OR,NR];function Ca(){}function b1(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function hv(e){this._context=e}hv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:b1(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:b1(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function frt(e){return new hv(e)}function PR(e){this._context=e}PR.prototype={areaStart:Ca,areaEnd:Ca,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:b1(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function drt(e){return new PR(e)}function zR(e){this._context=e}zR.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:b1(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function hrt(e){return new zR(e)}function jR(e,t){this._basis=new hv(e),this._beta=t}jR.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],s=e[n]-r,o=t[n]-i,a=-1,l;++a<=n;)l=a/n,this._basis.point(this._beta*e[a]+(1-this._beta)*(r+l*s),this._beta*t[a]+(1-this._beta)*(i+l*o));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const prt=function e(t){function n(r){return t===1?new hv(r):new jR(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function v1(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function O3(e,t){this._context=e,this._k=(1-t)/6}O3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:v1(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:v1(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const yrt=function e(t){function n(r){return new O3(r,t)}return n.tension=function(r){return e(+r)},n}(0);function B3(e,t){this._context=e,this._k=(1-t)/6}B3.prototype={areaStart:Ca,areaEnd:Ca,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:v1(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const mrt=function e(t){function n(r){return new B3(r,t)}return n.tension=function(r){return e(+r)},n}(0);function F3(e,t){this._context=e,this._k=(1-t)/6}F3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:v1(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const grt=function e(t){function n(r){return new F3(r,t)}return n.tension=function(r){return e(+r)},n}(0);function L3(e,t,n){var r=e._x1,i=e._y1,s=e._x2,o=e._y2;if(e._l01_a>h$){var a=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,l=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*a-e._x0*e._l12_2a+e._x2*e._l01_2a)/l,i=(i*a-e._y0*e._l12_2a+e._y2*e._l01_2a)/l}if(e._l23_a>h$){var c=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,u=3*e._l23_a*(e._l23_a+e._l12_a);s=(s*c+e._x1*e._l23_2a-t*e._l12_2a)/u,o=(o*c+e._y1*e._l23_2a-n*e._l12_2a)/u}e._context.bezierCurveTo(r,i,s,o,e._x2,e._y2)}function VR(e,t){this._context=e,this._alpha=t}VR.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:L3(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const brt=function e(t){function n(r){return t?new VR(r,t):new O3(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function YR(e,t){this._context=e,this._alpha=t}YR.prototype={areaStart:Ca,areaEnd:Ca,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:L3(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const vrt=function e(t){function n(r){return t?new YR(r,t):new B3(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function qR(e,t){this._context=e,this._alpha=t}qR.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:L3(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const wrt=function e(t){function n(r){return t?new qR(r,t):new F3(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function WR(e){this._context=e}WR.prototype={areaStart:Ca,areaEnd:Ca,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function _rt(e){return new WR(e)}function p$(e){return e<0?-1:1}function y$(e,t,n){var r=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(r||i<0&&-0),o=(n-e._y1)/(i||r<0&&-0),a=(s*i+o*r)/(r+i);return(p$(s)+p$(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function m$(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function l_(e,t,n){var r=e._x0,i=e._y0,s=e._x1,o=e._y1,a=(s-r)/3;e._context.bezierCurveTo(r+a,i+a*t,s-a,o-a*n,s,o)}function w1(e){this._context=e}w1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:l_(this,this._t0,m$(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,l_(this,m$(this,n=y$(this,e,t)),n);break;default:l_(this,this._t0,n=y$(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function HR(e){this._context=new GR(e)}(HR.prototype=Object.create(w1.prototype)).point=function(e,t){w1.prototype.point.call(this,t,e)};function GR(e){this._context=e}GR.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,s){this._context.bezierCurveTo(t,e,r,n,s,i)}};function Srt(e){return new w1(e)}function xrt(e){return new HR(e)}function XR(e){this._context=e}XR.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=g$(e),i=g$(t),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function g$(e){var t,n=e.length-1,r,i=new Array(n),s=new Array(n),o=new Array(n);for(i[0]=0,s[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,s[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,s[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/s[t-1],s[t]-=r,o[t]-=r*o[t-1];for(i[n-1]=o[n-1]/s[n-1],t=n-2;t>=0;--t)i[t]=(o[t]-i[t+1])/s[t];for(s[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function Irt(e){return new XR(e)}function pv(e,t){this._context=e,this._t=t}pv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function Trt(e){return new pv(e,.5)}function Ert(e){return new pv(e,0)}function Art(e){return new pv(e,1)}const x0=e=>()=>e;function Mrt(e,{sourceEvent:t,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function xs(e,t,n){this.k=e,this.x=t,this.y=n}xs.prototype={constructor:xs,scale:function(e){return e===1?this:new xs(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new xs(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var QR=new xs(1,0,0);xs.prototype;function c_(e){e.stopImmediatePropagation()}function Nd(e){e.preventDefault(),e.stopImmediatePropagation()}function $rt(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function Nrt(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function b$(){return this.__zoom||QR}function krt(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Drt(){return navigator.maxTouchPoints||"ontouchstart"in this}function Ort(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],s=e.invertY(t[0][1])-n[0][1],o=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),o>s?(s+o)/2:Math.min(0,s)||Math.max(0,o))}function Brt(){var e=$rt,t=Nrt,n=Ort,r=krt,i=Drt,s=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],a=250,l=hK,c=qb("start","zoom","end"),u,f,d,h=500,p=150,g=0,v=10;function y(T){T.property("__zoom",b$).on("wheel.zoom",E,{passive:!1}).on("mousedown.zoom",k).on("dblclick.zoom",I).filter(i).on("touchstart.zoom",A).on("touchmove.zoom",D).on("touchend.zoom touchcancel.zoom",L).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}y.transform=function(T,M,N,F){var O=T.selection?T.selection():T;O.property("__zoom",b$),T!==O?S(T,M,N,F):O.interrupt().each(function(){_(this,arguments).event(F).start().zoom(null,typeof M=="function"?M.apply(this,arguments):M).end()})},y.scaleBy=function(T,M,N,F){y.scaleTo(T,function(){var O=this.__zoom.k,C=typeof M=="function"?M.apply(this,arguments):M;return O*C},N,F)},y.scaleTo=function(T,M,N,F){y.transform(T,function(){var O=t.apply(this,arguments),C=this.__zoom,B=N==null?w(O):typeof N=="function"?N.apply(this,arguments):N,P=C.invert(B),z=typeof M=="function"?M.apply(this,arguments):M;return n(b(m(C,z),B,P),O,o)},N,F)},y.translateBy=function(T,M,N,F){y.transform(T,function(){return n(this.__zoom.translate(typeof M=="function"?M.apply(this,arguments):M,typeof N=="function"?N.apply(this,arguments):N),t.apply(this,arguments),o)},null,F)},y.translateTo=function(T,M,N,F,O){y.transform(T,function(){var C=t.apply(this,arguments),B=this.__zoom,P=F==null?w(C):typeof F=="function"?F.apply(this,arguments):F;return n(QR.translate(P[0],P[1]).scale(B.k).translate(typeof M=="function"?-M.apply(this,arguments):-M,typeof N=="function"?-N.apply(this,arguments):-N),C,o)},F,O)};function m(T,M){return M=Math.max(s[0],Math.min(s[1],M)),M===T.k?T:new xs(M,T.x,T.y)}function b(T,M,N){var F=M[0]-N[0]*T.k,O=M[1]-N[1]*T.k;return F===T.x&&O===T.y?T:new xs(T.k,F,O)}function w(T){return[(+T[0][0]+ +T[1][0])/2,(+T[0][1]+ +T[1][1])/2]}function S(T,M,N,F){T.on("start.zoom",function(){_(this,arguments).event(F).start()}).on("interrupt.zoom end.zoom",function(){_(this,arguments).event(F).end()}).tween("zoom",function(){var O=this,C=arguments,B=_(O,C).event(F),P=t.apply(O,C),z=N==null?w(P):typeof N=="function"?N.apply(O,C):N,H=Math.max(P[1][0]-P[0][0],P[1][1]-P[0][1]),X=O.__zoom,tt=typeof M=="function"?M.apply(O,C):M,Z=l(X.invert(z).concat(H/X.k),tt.invert(z).concat(H/tt.k));return function(Y){if(Y===1)Y=tt;else{var Q=Z(Y),V=H/Q[2];Y=new xs(V,z[0]-Q[0]*V,z[1]-Q[1]*V)}B.zoom(null,Y)}})}function _(T,M,N){return!N&&T.__zooming||new x(T,M)}function x(T,M){this.that=T,this.args=M,this.active=0,this.sourceEvent=null,this.extent=t.apply(T,M),this.taps=0}x.prototype={event:function(T){return T&&(this.sourceEvent=T),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(T,M){return this.mouse&&T!=="mouse"&&(this.mouse[1]=M.invert(this.mouse[0])),this.touch0&&T!=="touch"&&(this.touch0[1]=M.invert(this.touch0[0])),this.touch1&&T!=="touch"&&(this.touch1[1]=M.invert(this.touch1[0])),this.that.__zoom=M,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(T){var M=me(this.that).datum();c.call(T,this.that,new Mrt(T,{sourceEvent:this.sourceEvent,target:y,type:T,transform:this.that.__zoom,dispatch:c}),M)}};function E(T,...M){if(!e.apply(this,arguments))return;var N=_(this,M).event(T),F=this.__zoom,O=Math.max(s[0],Math.min(s[1],F.k*Math.pow(2,r.apply(this,arguments)))),C=$i(T);if(N.wheel)(N.mouse[0][0]!==C[0]||N.mouse[0][1]!==C[1])&&(N.mouse[1]=F.invert(N.mouse[0]=C)),clearTimeout(N.wheel);else{if(F.k===O)return;N.mouse=[C,F.invert(C)],qu(this),N.start()}Nd(T),N.wheel=setTimeout(B,p),N.zoom("mouse",n(b(m(F,O),N.mouse[0],N.mouse[1]),N.extent,o));function B(){N.wheel=null,N.end()}}function k(T,...M){if(d||!e.apply(this,arguments))return;var N=T.currentTarget,F=_(this,M,!0).event(T),O=me(T.view).on("mousemove.zoom",z,!0).on("mouseup.zoom",H,!0),C=$i(T,N),B=T.clientX,P=T.clientY;wB(T.view),c_(T),F.mouse=[C,this.__zoom.invert(C)],qu(this),F.start();function z(X){if(Nd(X),!F.moved){var tt=X.clientX-B,Z=X.clientY-P;F.moved=tt*tt+Z*Z>g}F.event(X).zoom("mouse",n(b(F.that.__zoom,F.mouse[0]=$i(X,N),F.mouse[1]),F.extent,o))}function H(X){O.on("mousemove.zoom mouseup.zoom",null),_B(X.view,F.moved),Nd(X),F.event(X).end()}}function I(T,...M){if(e.apply(this,arguments)){var N=this.__zoom,F=$i(T.changedTouches?T.changedTouches[0]:T,this),O=N.invert(F),C=N.k*(T.shiftKey?.5:2),B=n(b(m(N,C),F,O),t.apply(this,M),o);Nd(T),a>0?me(this).transition().duration(a).call(S,B,F,T):me(this).call(y.transform,B,F,T)}}function A(T,...M){if(e.apply(this,arguments)){var N=T.touches,F=N.length,O=_(this,M,T.changedTouches.length===F).event(T),C,B,P,z;for(c_(T),B=0;B<F;++B)P=N[B],z=$i(P,this),z=[z,this.__zoom.invert(z),P.identifier],O.touch0?!O.touch1&&O.touch0[2]!==z[2]&&(O.touch1=z,O.taps=0):(O.touch0=z,C=!0,O.taps=1+!!u);u&&(u=clearTimeout(u)),C&&(O.taps<2&&(f=z[0],u=setTimeout(function(){u=null},h)),qu(this),O.start())}}function D(T,...M){if(this.__zooming){var N=_(this,M).event(T),F=T.changedTouches,O=F.length,C,B,P,z;for(Nd(T),C=0;C<O;++C)B=F[C],P=$i(B,this),N.touch0&&N.touch0[2]===B.identifier?N.touch0[0]=P:N.touch1&&N.touch1[2]===B.identifier&&(N.touch1[0]=P);if(B=N.that.__zoom,N.touch1){var H=N.touch0[0],X=N.touch0[1],tt=N.touch1[0],Z=N.touch1[1],Y=(Y=tt[0]-H[0])*Y+(Y=tt[1]-H[1])*Y,Q=(Q=Z[0]-X[0])*Q+(Q=Z[1]-X[1])*Q;B=m(B,Math.sqrt(Y/Q)),P=[(H[0]+tt[0])/2,(H[1]+tt[1])/2],z=[(X[0]+Z[0])/2,(X[1]+Z[1])/2]}else if(N.touch0)P=N.touch0[0],z=N.touch0[1];else return;N.zoom("touch",n(b(B,P,z),N.extent,o))}}function L(T,...M){if(this.__zooming){var N=_(this,M).event(T),F=T.changedTouches,O=F.length,C,B;for(c_(T),d&&clearTimeout(d),d=setTimeout(function(){d=null},h),C=0;C<O;++C)B=F[C],N.touch0&&N.touch0[2]===B.identifier?delete N.touch0:N.touch1&&N.touch1[2]===B.identifier&&delete N.touch1;if(N.touch1&&!N.touch0&&(N.touch0=N.touch1,delete N.touch1),N.touch0)N.touch0[1]=this.__zoom.invert(N.touch0[0]);else if(N.end(),N.taps===2&&(B=$i(B,this),Math.hypot(f[0]-B[0],f[1]-B[1])<v)){var P=me(this).on("dblclick.zoom");P&&P.apply(this,arguments)}}}return y.wheelDelta=function(T){return arguments.length?(r=typeof T=="function"?T:x0(+T),y):r},y.filter=function(T){return arguments.length?(e=typeof T=="function"?T:x0(!!T),y):e},y.touchable=function(T){return arguments.length?(i=typeof T=="function"?T:x0(!!T),y):i},y.extent=function(T){return arguments.length?(t=typeof T=="function"?T:x0([[+T[0][0],+T[0][1]],[+T[1][0],+T[1][1]]]),y):t},y.scaleExtent=function(T){return arguments.length?(s[0]=+T[0],s[1]=+T[1],y):[s[0],s[1]]},y.translateExtent=function(T){return arguments.length?(o[0][0]=+T[0][0],o[1][0]=+T[1][0],o[0][1]=+T[0][1],o[1][1]=+T[1][1],y):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},y.constrain=function(T){return arguments.length?(n=T,y):n},y.duration=function(T){return arguments.length?(a=+T,y):a},y.interpolate=function(T){return arguments.length?(l=T,y):l},y.on=function(){var T=c.on.apply(c,arguments);return T===c?y:T},y.clickDistance=function(T){return arguments.length?(g=(T=+T)*T,y):Math.sqrt(g)},y.tapDistance=function(T){return arguments.length?(v=+T,y):v},y}function Zn(e){return e!=null&&!Number.isNaN(e)}function vi(e,t){return+Zn(t)-+Zn(e)||ze(e,t)}function _1(e,t){return+Zn(t)-+Zn(e)||ac(e,t)}function R3(e){return e!=null&&`${e}`!=""}function S1(e){return isFinite(e)?e:NaN}function xo(e){return e>0&&isFinite(e)?e:NaN}function yv(e){return e<0&&isFinite(e)?e:NaN}const Tu=1e3,Ll=Tu*60,Rl=Ll*60,Bo=Rl*24,cs=Bo*7,Hl=Bo*30,Zo=Bo*365,u_=[["millisecond",1],["2 milliseconds",2],["5 milliseconds",5],["10 milliseconds",10],["20 milliseconds",20],["50 milliseconds",50],["100 milliseconds",100],["200 milliseconds",200],["500 milliseconds",500],["second",Tu],["5 seconds",5*Tu],["15 seconds",15*Tu],["30 seconds",30*Tu],["minute",Ll],["5 minutes",5*Ll],["15 minutes",15*Ll],["30 minutes",30*Ll],["hour",Rl],["3 hours",3*Rl],["6 hours",6*Rl],["12 hours",12*Rl],["day",Bo],["2 days",2*Bo],["week",cs],["2 weeks",2*cs],["month",Hl],["3 months",3*Hl],["6 months",6*Hl],["year",Zo],["2 years",2*Zo],["5 years",5*Zo],["10 years",10*Zo],["20 years",20*Zo],["50 years",50*Zo],["100 years",100*Zo]],C3=new Map([["second",Tu],["minute",Ll],["hour",Rl],["day",Bo],["monday",cs],["tuesday",cs],["wednesday",cs],["thursday",cs],["friday",cs],["saturday",cs],["sunday",cs],["week",cs],["month",Hl],["year",Zo]]),KR=new Map([["second",Ss],["minute",sv],["hour",ov],["day",_c],["monday",gp],["tuesday",HF],["wednesday",GF],["thursday",pc],["friday",XF],["saturday",QF],["sunday",Tf],["week",Tf],["month",fy],["year",Wi]]),ZR=new Map([["second",Ss],["minute",cy],["hour",uy],["day",lv],["monday",bp],["tuesday",KF],["wednesday",ZF],["thursday",yc],["friday",JF],["saturday",tL],["sunday",Ef],["week",Ef],["month",dy],["year",Hi]]),yy=Symbol("intervalDuration"),mv=Symbol("intervalType");for(const[e,t]of KR)t[yy]=C3.get(e),t[mv]="time";for(const[e,t]of ZR)t[yy]=C3.get(e),t[mv]="utc";const Frt=[["year",Hi,"utc"],["year",Wi,"time"],["month",dy,"utc"],["month",fy,"time"],["day",lv,"utc",6*Hl],["day",_c,"time",6*Hl],["hour",uy,"utc",3*Bo],["minute",cy,"utc",6*Rl],["second",Ss,"utc",30*Ll]];function JR(e,t,n){let r=`${e}`.toLowerCase();r.endsWith("s")&&(r=r.slice(0,-1));let i=1;const s=/^(?:(\d+)\s+)/.exec(r);switch(s&&(r=r.slice(s[0].length),i=+s[1]),r){case"quarter":r="month",i*=3;break;case"half":r="month",i*=6;break}let o=t.get(r);if(!o)throw new Error(`unknown interval: ${e}`);if(i>1){if(!o.every)throw new Error(`non-periodic interval: ${r}`);o=o.every(i),o[yy]=C3.get(r)*i,o[mv]=n}return o}function tC(e){return JR(e,KR,"time")}function U3(e){return JR(e,ZR,"utc")}function v$(e,t){if(!(t>1))return;const n=e[yy];if(!u_.some(([,i])=>i===n)||n%Bo===0&&Bo<n&&n<Hl)return;const[r]=u_[zb(([,i])=>Math.log(i)).center(u_,Math.log(n*t))];return(e[mv]==="time"?tC:U3)(r)}function w$(e,t,n){const r=t==="time"?$3:hy;if(n==null)return r(e==="year"?"%Y":e==="month"?"%Y-%m":e==="day"?"%Y-%m-%d":e==="hour"||e==="minute"?"%Y-%m-%dT%H:%M":e==="second"?"%Y-%m-%dT%H:%M:%S":"%Y-%m-%dT%H:%M:%S.%L");const i=Lrt(n);switch(e){case"millisecond":return Rc(r(".%L"),r(":%M:%S"),i);case"second":return Rc(r(":%S"),r("%-I:%M"),i);case"minute":return Rc(r("%-I:%M"),r("%p"),i);case"hour":return Rc(r("%-I %p"),r("%b %-d"),i);case"day":return Rc(r("%-d"),r("%b"),i);case"month":return Rc(r("%b"),r("%Y"),i);case"year":return r("%Y")}throw new Error("unable to format time ticks")}function Lrt(e){return e==="left"||e==="right"?(t,n)=>`
${t}
${n}`:e==="top"?(t,n)=>`${n}
${t}`:(t,n)=>`${t}
${n}`}function Rrt(e,t){const n=Ne(zG(e,(r,i)=>Math.abs(i-r)));if(n<1e3)return w$("millisecond","utc",t);for(const[r,i,s,o]of Frt){if(n>o||r==="hour"&&!n)break;if(e.every(a=>i.floor(a)>=a))return w$(r,s,t)}}function Rc(e,t,n){return(r,i,s)=>{const o=e(r,i),a=t(r,i),l=i-$f(s);return i!==l&&s[l]!==void 0&&a===t(s[l],l)?o:n(o,a)}}const Af=Object.getPrototypeOf(Uint8Array),Crt=Object.prototype.toString,eC=Symbol("reindex");function Pt(e,t,n){const r=typeof t;return r==="string"?_$(e,nC(t),n):r==="function"?_$(e,t,n):r==="number"||t instanceof Date||r==="boolean"?xe(e,zr(t),n):typeof(t==null?void 0:t.transform)=="function"?S$(t.transform(e),n):Urt(S$(t,n),e==null?void 0:e[eC])}function Urt(e,t){return t?bv(e,t):e}function _$(e,t,n){return xe(e,(n==null?void 0:n.prototype)instanceof Af?Prt(t):t,n)}function S$(e,t){return t===void 0?Sr(e):e instanceof t?e:t.prototype instanceof Af&&!(e instanceof Af)?t.from(e,j3):t.from(e)}function Prt(e){return(t,n)=>j3(e(t,n))}const Nh=[null],nC=e=>t=>t[e],Ar={transform:Po},_t={transform:e=>e},P3=()=>1,zrt=()=>!0,Rn=e=>e==null?e:`${e}`,Yt=e=>e==null?e:+e,my=e=>e?e[0]:void 0,wp=e=>e?e[1]:void 0,jrt=e=>e?e[2]:void 0,zr=e=>()=>e;function z3(e){const t=+`${e}`.slice(1)/100;return(n,r)=>La(n,t,r)}function fr(e){return e instanceof Af?e:xe(e,j3,Float64Array)}function j3(e){return e==null?NaN:Number(e)}function Vrt(e){return xe(e,rC)}function rC(e){return e instanceof Date&&!isNaN(e)?e:typeof e=="string"?qO(e):e==null||isNaN(e=+e)?void 0:new Date(e)}function _r(e,t){return e===void 0&&(e=t),e===null?[void 0,"none"]:by(e)?[void 0,e]:[e,void 0]}function en(e,t){return e===void 0&&(e=t),e===null||typeof e=="number"?[void 0,e]:[e,void 0]}function iC(e,t,n){if(e!=null)return qr(e,t,n)}function qr(e,t,n){const r=`${e}`.toLowerCase();if(!n.includes(r))throw new Error(`invalid ${t}: ${e}`);return r}function Sr(e){return e==null||e instanceof Array||e instanceof Af?e:Array.from(e)}function xe(e,t,n=Array){return e==null?e:e instanceof n?e.map(t):n.from(e,t)}function _p(e,t=Array){return e instanceof t?e.slice():t.from(e)}function sC({x:e,x1:t,x2:n}){return e!==void 0||t!==void 0||n!==void 0}function oC({y:e,y1:t,y2:n}){return e!==void 0||t!==void 0||n!==void 0}function gv(e){return sC(e)||oC(e)||e.interval!==void 0}function Si(e){return(e==null?void 0:e.toString)===Crt}function Gl(e){return Si(e)&&(e.type!==void 0||e.domain!==void 0)}function ds(e){return Si(e)&&typeof e.transform!="function"}function Ua(e){return ds(e)&&e.value===void 0&&e.channel===void 0}function aC(e,t,n,r=_t){return t===void 0&&n===void 0?(t=0,n=e===void 0?r:e):t===void 0?t=e===void 0?0:e:n===void 0&&(n=e===void 0?0:e),[t,n]}function Ki(e,t){return e===void 0&&t===void 0?[my,wp]:[e,t]}function il({z:e,fill:t,stroke:n}={}){return e===void 0&&([e]=_r(t)),e===void 0&&([e]=_r(n)),e}function Po(e){const t=e.length,n=new Uint32Array(t);for(let r=0;r<t;++r)n[r]=r;return n}function bv(e,t){return xe(t,n=>e[n],e.constructor)}function V3(e){return e.length===1?(t,n)=>e(bv(n,t)):e}function Xl(e,t,n){return e.subarray?e.subarray(t,n):e.slice(t,n)}function Cl(e){return e!==null&&typeof e=="object"?e.valueOf():e}function lC(e,t){if(t[e]!==void 0)return t[e];switch(e){case"x1":case"x2":e="x";break;case"y1":case"y2":e="y";break}return t[e]}function Br(e){let t;return[{transform:()=>t,label:zo(e)},n=>t=n]}function sr(e){return e==null?[e]:Br(e)}function zo(e,t){return typeof e=="string"?e:e&&e.label!==void 0?e.label:t}function x1(e,t){return{transform(n){const r=e.transform(n),i=t.transform(n);return tr(r)||tr(i)?xe(r,(s,o)=>new Date((+r[o]+ +i[o])/2)):xe(r,(s,o)=>(+r[o]+ +i[o])/2,Float64Array)},label:e.label}}function I1(e,t){const n=cC(t==null?void 0:t.interval,t==null?void 0:t.type);return n?xe(e,n):e}function cC(e,t){const n=Y3(e,t);return n&&(r=>Zn(r)?n.floor(r):r)}function Y3(e,t){if(e!=null){if(typeof e=="number"){0<e&&e<1&&Number.isInteger(1/e)&&(e=-1/e);const n=Math.abs(e);return e<0?{floor:r=>Math.floor(r*n)/n,offset:r=>(r*n+1)/n,range:(r,i)=>Dr(Math.ceil(r*n),i*n).map(s=>s/n)}:{floor:r=>Math.floor(r/n)*n,offset:r=>r+n,range:(r,i)=>Dr(Math.ceil(r/n),i/n).map(s=>s*n)}}if(typeof e=="string")return(t==="time"?tC:U3)(e);if(typeof e.floor!="function")throw new Error("invalid interval; missing floor method");if(typeof e.offset!="function")throw new Error("invalid interval; missing offset method");return e}}function Jf(e,t){if(e=Y3(e,t),e&&typeof e.range!="function")throw new Error("invalid interval: missing range method");return e}function Yrt(e,t){if(e=Jf(e,t),e&&typeof e.ceil!="function")throw new Error("invalid interval: missing ceil method");return e}function qrt(e){return Eu(e)&&typeof(e==null?void 0:e.floor)=="function"&&e.floor()instanceof Date}function Eu(e){return typeof(e==null?void 0:e.range)=="function"}function gy(e){return e===void 0||ds(e)?e:{value:e}}function Wrt(e){return e==null?null:{transform:t=>Pt(t,e,Float64Array),label:zo(e)}}function Hrt(e){if(!jo(e))return!1;for(const t of e)if(t!=null)return typeof t=="object"&&"0"in t&&"1"in t}function jo(e){return e&&typeof e[Symbol.iterator]=="function"}function uC(e){for(const t of e)if(t!=null)return typeof t!="object"||t instanceof Date}function Ye(e){for(const t of e){if(t==null)continue;const n=typeof t;return n==="string"||n==="boolean"}}function tr(e){for(const t of e)if(t!=null)return t instanceof Date}function Grt(e){for(const t of e)if(t!=null)return typeof t=="string"&&isNaN(t)&&qO(t)}function Xrt(e){for(const t of e)if(t!=null){if(typeof t!="string")return!1;if(t.trim())return!isNaN(t)}}function Au(e){for(const t of e)if(t!=null)return typeof t=="number"}function f_(e,t){let n;for(const r of e)if(r!=null){if(!t(r))return!1;n=!0}return n}const Qrt=new Set("none,currentcolor,transparent,aliceblue,antiquewhite,aqua,aquamarine,azure,beige,bisque,black,blanchedalmond,blue,blueviolet,brown,burlywood,cadetblue,chartreuse,chocolate,coral,cornflowerblue,cornsilk,crimson,cyan,darkblue,darkcyan,darkgoldenrod,darkgray,darkgreen,darkgrey,darkkhaki,darkmagenta,darkolivegreen,darkorange,darkorchid,darkred,darksalmon,darkseagreen,darkslateblue,darkslategray,darkslategrey,darkturquoise,darkviolet,deeppink,deepskyblue,dimgray,dimgrey,dodgerblue,firebrick,floralwhite,forestgreen,fuchsia,gainsboro,ghostwhite,gold,goldenrod,gray,green,greenyellow,grey,honeydew,hotpink,indianred,indigo,ivory,khaki,lavender,lavenderblush,lawngreen,lemonchiffon,lightblue,lightcoral,lightcyan,lightgoldenrodyellow,lightgray,lightgreen,lightgrey,lightpink,lightsalmon,lightseagreen,lightskyblue,lightslategray,lightslategrey,lightsteelblue,lightyellow,lime,limegreen,linen,magenta,maroon,mediumaquamarine,mediumblue,mediumorchid,mediumpurple,mediumseagreen,mediumslateblue,mediumspringgreen,mediumturquoise,mediumvioletred,midnightblue,mintcream,mistyrose,moccasin,navajowhite,navy,oldlace,olive,olivedrab,orange,orangered,orchid,palegoldenrod,palegreen,paleturquoise,palevioletred,papayawhip,peachpuff,peru,pink,plum,powderblue,purple,rebeccapurple,red,rosybrown,royalblue,saddlebrown,salmon,sandybrown,seagreen,seashell,sienna,silver,skyblue,slateblue,slategray,slategrey,snow,springgreen,steelblue,tan,teal,thistle,tomato,turquoise,violet,wheat,white,whitesmoke,yellow".split(","));function by(e){return typeof e!="string"?!1:(e=e.toLowerCase().trim(),/^#[0-9a-f]{3,8}$/.test(e)||/^(?:url|var|rgb|rgba|hsl|hsla|hwb|lab|lch|oklab|oklch|color|color-mix)\(.*\)$/.test(e)||Qrt.has(e))}function Krt(e){return typeof e=="number"&&(0<=e&&e<=1||isNaN(e))}function Ge(e){return e==null||Mf(e)}function Mf(e){return/^\s*none\s*$/i.test(e)}function Zrt(e){return/^\s*round\s*$/i.test(e)}function fC(e,t){return iC(e,t,["middle","top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"])}function vy(e="middle"){return fC(e,"frameAnchor")}function $f(e){if(e==null)return;const t=e[0],n=e[e.length-1];return ac(t,n)}function Jrt(e={},...t){let n=e;for(const r of t)for(const i in r)if(n[i]===void 0){const s=r[i];n===e?n={...n,[i]:s}:n[i]=s}return n}function tit(e){console.warn("named iterables are deprecated; please use an object instead");const t=new Set;return Object.fromEntries(Array.from(e,n=>{const{name:r}=n;if(r==null)throw new Error("missing name");const i=`${r}`;if(i==="__proto__")throw new Error(`illegal name: ${i}`);if(t.has(i))throw new Error(`duplicate name: ${i}`);return t.add(i),[r,n]}))}function q3(e){return jo(e)?tit(e):e}const Is=Symbol("position"),Vo=Symbol("color"),wy=Symbol("radius"),_y=Symbol("length"),Sy=Symbol("opacity"),vv=Symbol("symbol"),dC=Symbol("projection"),Ce=new Map([["x",Is],["y",Is],["fx",Is],["fy",Is],["r",wy],["color",Vo],["opacity",Sy],["symbol",vv],["length",_y],["projection",dC]]);function eit(e){return e===Is||e===dC}function nit(e){return e===Is||e===wy||e===_y||e===Sy}const hC=Math.sqrt(3),pC=2/hC,rit={draw(e,t){const n=Math.sqrt(t/Math.PI),r=n*pC,i=r/2;e.moveTo(0,r),e.lineTo(n,i),e.lineTo(n,-i),e.lineTo(0,-r),e.lineTo(-n,-i),e.lineTo(-n,i),e.closePath()}},W3=new Map([["asterisk",ER],["circle",vp],["cross",AR],["diamond",$R],["diamond2",NR],["hexagon",rit],["plus",kR],["square",DR],["square2",OR],["star",FR],["times",UR],["triangle",LR],["triangle2",RR],["wye",CR]]);function H3(e){return e&&typeof e.draw=="function"}function iit(e){return H3(e)?!0:typeof e!="string"?!1:W3.has(e.toLowerCase())}function G3(e){if(e==null||H3(e))return e;const t=W3.get(`${e}`.toLowerCase());if(t)return t;throw new Error(`invalid symbol: ${e}`)}function sit(e){if(e==null||H3(e))return[void 0,e];if(typeof e=="string"){const t=W3.get(`${e}`.toLowerCase());if(t)return[void 0,t]}return[e,void 0]}function Ps({filter:e,sort:t,reverse:n,transform:r,initializer:i,...s}={},o){if(r===void 0&&(e!=null&&(r=X3(e)),t!=null&&!Ua(t)&&(r=d_(r,K3(t))),n&&(r=d_(r,Q3))),o!=null&&i!=null)throw new Error("transforms cannot be applied after initializers");return{...s,...(t===null||Ua(t))&&{sort:t},transform:d_(r,o)}}function xr({filter:e,sort:t,reverse:n,initializer:r,...i}={},s){return r===void 0&&(e!=null&&(r=X3(e)),t!=null&&!Ua(t)&&(r=h_(r,K3(t))),n&&(r=h_(r,Q3))),{...i,...(t===null||Ua(t))&&{sort:t},initializer:h_(r,s)}}function d_(e,t){return e==null?t===null?void 0:t:t==null?e===null?void 0:e:function(n,r,i){return{data:n,facets:r}=e.call(this,n,r,i),t.call(this,Sr(n),r,i)}}function h_(e,t){return e==null?t===null?void 0:t:t==null?e===null?void 0:e:function(n,r,i,...s){let o,a,l,c,u,f;return{data:a=n,facets:l=r,channels:o}=e.call(this,n,r,i,...s),{data:u=a,facets:f=l,channels:c}=t.call(this,a,l,{...i,...o},...s),{data:u,facets:f,channels:{...o,...c}}}}function wv(e,t){return(e.initializer!=null?xr:Ps)(e,t)}function oit(e,t){return wv(t,X3(e))}function X3(e){return(t,n)=>{const r=Pt(t,e);return{data:t,facets:n.map(i=>i.filter(s=>r[s]))}}}function ait({sort:e,...t}={}){return{...wv(t,Q3),sort:Ua(e)?e:null}}function Q3(e,t){return{data:e,facets:t.map(n=>n.slice().reverse())}}function lit({seed:e,sort:t,...n}={}){return{...wv(n,mC(e==null?Math.random:E3(e))),sort:Ua(t)?t:null}}function yC(e,{sort:t,...n}={}){return{...(ds(e)&&e.channel!==void 0?xr:wv)(n,K3(e)),sort:Ua(t)?t:null}}function K3(e){return(typeof e=="function"&&e.length!==1?cit:mC)(e)}function cit(e){return(t,n)=>{const r=(i,s)=>e(t[i],t[s]);return{data:t,facets:n.map(i=>i.slice().sort(r))}}}function mC(e){let t,n;({channel:t,value:e,order:n}={...gy(e)});const r=t==null?void 0:t.startsWith("-");if(r&&(t=t.slice(1)),n===void 0&&(n=r?_1:vi),typeof n!="function")switch(`${n}`.toLowerCase()){case"ascending":n=vi;break;case"descending":n=_1;break;default:throw new Error(`invalid order: ${n}`)}return(i,s,o)=>{let a;if(t===void 0)a=Pt(i,e);else{if(o===void 0)throw new Error("channel sort requires an initializer");if(a=o[t],!a)return{};a=a.value}const l=(c,u)=>n(a[c],a[u]);return{data:i,facets:s.map(c=>c.slice().sort(l))}}}function Z3(e,t){return _v(null,null,e,t)}function Sp(e={y:"count"},t={}){const{x:n=_t}=t;if(n==null)throw new Error("missing channel: x");return _v(n,null,e,t)}function xp(e={x:"count"},t={}){const{y:n=_t}=t;if(n==null)throw new Error("missing channel: y");return _v(null,n,e,t)}function J3(e={fill:"count"},t={}){let{x:n,y:r}=t;if([n,r]=Ki(n,r),n==null)throw new Error("missing channel: x");if(r==null)throw new Error("missing channel: y");return _v(n,r,e,t)}function _v(e,t,{data:n=iT,filter:r,sort:i,reverse:s,...o}={},a={}){o=tT(o,a),n=Sv(n,_t),i=i==null?void 0:eT("sort",i,a),r=r==null?void 0:nT("filter",r,a);const[l,c]=sr(e),[u,f]=sr(t),{z:d,fill:h,stroke:p,x1:g,x2:v,y1:y,y2:m,...b}=a,[w,S]=sr(d),[_]=_r(h),[x]=_r(p),[E,k]=sr(_),[I,A]=sr(x);return{..."z"in a&&{z:w||d},..."fill"in a&&{fill:E||h},..."stroke"in a&&{stroke:I||p},...Ps(b,(D,L,T)=>{const M=I1(Pt(D,e),T==null?void 0:T.x),N=I1(Pt(D,t),T==null?void 0:T.y),F=Pt(D,d),O=Pt(D,_),C=Pt(D,x),B=rT(o,{z:F,fill:O,stroke:C}),P=[],z=[],H=M&&c([]),X=N&&f([]),tt=F&&S([]),Z=O&&k([]),Y=C&&A([]);let Q=0;for(const V of o)V.initialize(D);i&&i.initialize(D),r&&r.initialize(D);for(const V of L){const J=[];for(const et of o)et.scope("facet",V);i&&i.scope("facet",V),r&&r.scope("facet",V);for(const[et,j]of Wu(V,B))for(const[At,at]of Wu(j,N))for(const[qt,Ht]of Wu(at,M))if(!(r&&!r.reduce(Ht))){J.push(Q++),z.push(n.reduceIndex(Ht,D)),M&&H.push(qt),N&&X.push(At),F&&tt.push(B===F?et:F[Ht[0]]),O&&Z.push(B===O?et:O[Ht[0]]),C&&Y.push(B===C?et:C[Ht[0]]);for(const st of o)st.reduce(Ht);i&&i.reduce(Ht)}P.push(J)}return gC(P,i,s),{data:z,facets:P}}),...!ya(o,"x")&&(l?{x:l}:{x1:g,x2:v}),...!ya(o,"y")&&(u?{y:u}:{y1:y,y2:m}),...Object.fromEntries(o.map(({name:D,output:L})=>[D,L]))}}function ya(e,...t){for(const{name:n}of e)if(t.includes(n))return!0;return!1}function tT(e,t,n=eT){const r=Object.entries(e);return t.title!=null&&e.title===void 0&&r.push(["title",pit]),t.href!=null&&e.href===void 0&&r.push(["href",sT]),r.filter(([,i])=>i!==void 0).map(([i,s])=>s===null?uit(i):n(i,s,t))}function eT(e,t,n,r=nT){let i;Si(t)&&"reduce"in t&&(i=t.scale,t=t.reduce);const s=r(e,t,n),[o,a]=Br(s.label);let l;return{name:e,output:i===void 0?o:{value:o,scale:i},initialize(c){s.initialize(c),l=a([])},scope(c,u){s.scope(c,u)},reduce(c,u){l.push(s.reduce(c,u))}}}function uit(e){return{name:e,initialize(){},scope(){},reduce(){}}}function nT(e,t,n,r=Sv){const i=lC(e,n),s=r(t,i);let o,a;return{label:zo(s===T1?null:i,s.label),initialize(l){o=i===void 0?l:Pt(l,i),s.scope==="data"&&(a=s.reduceIndex(Po(l),o))},scope(l,c){s.scope===l&&(a=s.reduceIndex(c,o))},reduce(l,c){return s.scope==null?s.reduceIndex(l,o,c):s.reduceIndex(l,o,a,c)}}}function Wu(e,t){return t?ap(Uo(e,n=>t[n]),my):[[,e]]}function Sv(e,t,n=fit){if(e==null)return n(e);if(typeof e.reduceIndex=="function")return e;if(typeof e.reduce=="function"&&Si(e))return dit(e);if(typeof e=="function")return hit(e);if(/^p\d{2}$/i.test(e))return Zs(z3(e));switch(`${e}`.toLowerCase()){case"first":return sT;case"last":return yit;case"identity":return iT;case"count":return T1;case"distinct":return mit;case"sum":return t==null?T1:git;case"proportion":return I$(t,"data");case"proportion-facet":return I$(t,"facet");case"deviation":return Zs(ty);case"min":return Zs(wn);case"min-index":return Zs(RG);case"max":return Zs(Ne);case"max-index":return Zs(LG);case"mean":return x$(Yb);case"median":return x$(up);case"variance":return Zs(n3);case"mode":return Zs(aB)}return n(e)}function fit(e){throw new Error(`invalid reduce: ${e}`)}function rT(e,t){for(const n in t){const r=t[n];if(r!==void 0&&!e.some(i=>i.name===n))return r}}function gC(e,t,n){if(t){const r=t.output.transform(),i=(s,o)=>vi(r[s],r[o]);e.forEach(s=>s.sort(i))}n&&e.forEach(r=>r.reverse())}function dit(e){return console.warn("deprecated reduce interface; implement reduceIndex instead."),{...e,reduceIndex:e.reduce.bind(e)}}function hit(e){return{reduceIndex(t,n,r){return e(bv(n,t),r)}}}function Zs(e){return{reduceIndex(t,n){return e(t,r=>n[r])}}}function x$(e){return{reduceIndex(t,n){const r=e(t,i=>n[i]);return tr(n)?new Date(r):r}}}const iT={reduceIndex(e,t){return bv(t,e)}},sT={reduceIndex(e,t){return t[e[0]]}},pit={reduceIndex(e,t){const r=ap(ju(e,s=>s.length,s=>t[s]),wp),i=r.slice(-5).reverse();if(i.length<r.length){const s=r.slice(0,-4);i[4]=[` ${s.length.toLocaleString("en-US")} more`,Bs(s,wp)]}return i.map(([s,o])=>`${s} (${o.toLocaleString("en-US")})`).join(`
`)}},yit={reduceIndex(e,t){return t[e[e.length-1]]}},T1={label:"Frequency",reduceIndex(e){return e.length}},mit={label:"Distinct",reduceIndex(e,t){const n=new ey;for(const r of e)n.add(t[r]);return n.size}},git=Zs(Bs);function I$(e,t){return e==null?{scope:t,label:"Frequency",reduceIndex:(n,r,i=1)=>n.length/i}:{scope:t,reduceIndex:(n,r,i=1)=>Bs(n,s=>r[s])/i}}function Ip(e,{scale:t,type:n,value:r,filter:i,hint:s,label:o=zo(r)},a){return s===void 0&&typeof(r==null?void 0:r.transform)=="function"&&(s=r.hint),vC(a,{scale:t,type:n,value:Pt(e,r),label:o,filter:i,hint:s})}function bC(e,t){return Object.fromEntries(Object.entries(e).map(([n,r])=>[n,Ip(t,r,n)]))}function oT(e,t){const n=Object.fromEntries(Object.entries(e).map(([r,{scale:i,value:s}])=>{const o=i==null?null:t[i];return[r,o==null?s:xe(s,o)]}));return n.channels=e,n}function vC(e,t){const{scale:n,value:r}=t;if(n===!0||n==="auto")switch(e){case"fill":case"stroke":case"color":t.scale=n!==!0&&f_(r,by)?null:"color";break;case"fillOpacity":case"strokeOpacity":case"opacity":t.scale=n!==!0&&f_(r,Krt)?null:"opacity";break;case"symbol":n!==!0&&f_(r,iit)?(t.scale=null,t.value=xe(r,G3)):t.scale="symbol";break;default:t.scale=Ce.has(e)?e:null;break}else if(n===!1)t.scale=null;else if(n!=null&&!Ce.has(n))throw new Error(`unknown scale: ${n}`);return t}function bit(e,t,n,r,i){const{order:s,reverse:o,reduce:a=!0,limit:l}=i;for(const c in i){if(!Ce.has(c))continue;let{value:u,order:f=s,reverse:d=o,reduce:h=a,limit:p=l}=gy(i[c]);const g=u==null?void 0:u.startsWith("-");if(g&&(u=u.slice(1)),f=f===void 0?g!==(u==="width"||u==="height")?_C:wC:_it(f),h==null||h===!1)continue;const v=c==="fx"||c==="fy"?wit(t,r[c]):vit(n,c);if(!v)throw new Error(`missing channel for scale: ${c}`);const y=v.value,[m=0,b=1/0]=jo(p)?p:p<0?[p]:[0,p];if(u==null)v.domain=()=>{let w=Array.from(new ey(y));return d&&(w=w.reverse()),(m!==0||b!==1/0)&&(w=w.slice(m,b)),w};else{const w=u==="data"?e:u==="height"?T$(n,"y1","y2"):u==="width"?T$(n,"x1","x2"):YS(n,u,u==="y"?"y2":u==="x"?"x2":void 0),S=Sv(h===!0?"max":h,w);v.domain=()=>{let _=kG(Po(y),x=>S.reduceIndex(x,w),x=>y[x]);return f&&_.sort(f),d&&_.reverse(),(m!==0||b!==1/0)&&(_=_.slice(m,b)),_.map(my)}}}}function vit(e,t){for(const n in e){const r=e[n];if(r.scale===t)return r}}function wit(e,t){const n=e.original;if(n===e)return t;const r=t.value,i=t.value=[];for(let s=0;s<n.length;++s){const o=r[n[s][0]];for(const a of e[s])i[a]=o}return t}function T$(e,t,n){const r=YS(e,t),i=YS(e,n);return xe(i,(s,o)=>Math.abs(s-r[o]),Float64Array)}function YS(e,t,n){let r=e[t];if(!r&&n!==void 0&&(r=e[n]),r)return r.value;throw new Error(`missing channel: ${t}`)}function _it(e){if(e==null||typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"ascending":return wC;case"descending":return _C}throw new Error(`invalid order: ${e}`)}function wC([e,t],[n,r]){return vi(t,r)||vi(e,n)}function _C([e,t],[n,r]){return _1(t,r)||vi(e,n)}function qS(e,t){let n=e[t];if(n){for(;n.source;)n=n.source;return n.source===null?null:n}}function aT(e){let t,n;return(...r)=>(((n==null?void 0:n.length)!==r.length||n.some((i,s)=>i!==r[s]))&&(n=r,t=e(...r)),t)}const Sit=aT(e=>new Intl.NumberFormat(e)),xit=aT((e,t)=>new Intl.DateTimeFormat(e,{timeZone:"UTC",...t&&{month:t}})),Iit=aT((e,t)=>new Intl.DateTimeFormat(e,{timeZone:"UTC",...t&&{weekday:t}}));function Tit(e="en-US"){const t=Sit(e);return n=>n!=null&&!isNaN(n)?t.format(n):void 0}function Eit(e="en-US",t="short"){const n=xit(e,t);return r=>r!=null&&!isNaN(r=+new Date(Date.UTC(2e3,+r)))?n.format(r):void 0}function Ait(e="en-US",t="short"){const n=Iit(e,t);return r=>r!=null&&!isNaN(r=+new Date(Date.UTC(2001,0,+r)))?n.format(r):void 0}function SC(e){return YO(e,"Invalid Date")}function Mit(e="en-US"){const t=Tit(e);return n=>(n instanceof Date?SC:typeof n=="number"?t:Rn)(n)}const mc=Mit();let WS=0,HS;function $it(){const e=WS;return WS=0,HS=void 0,e}function Io(e){e!==HS&&(HS=e,console.warn(e),++WS)}const Tn=(typeof window<"u"?window.devicePixelRatio>1:typeof it>"u")?0:.5;let Nit=0;function E$(){return`plot-clip-${++Nit}`}function xC(e,{title:t,href:n,ariaLabel:r,ariaDescription:i,ariaHidden:s,target:o,fill:a,fillOpacity:l,stroke:c,strokeWidth:u,strokeOpacity:f,strokeLinejoin:d,strokeLinecap:h,strokeMiterlimit:p,strokeDasharray:g,strokeDashoffset:v,opacity:y,mixBlendMode:m,imageFilter:b,paintOrder:w,pointerEvents:S,shapeRendering:_,channels:x},{ariaLabel:E,fill:k="currentColor",fillOpacity:I,stroke:A="none",strokeOpacity:D,strokeWidth:L,strokeLinecap:T,strokeLinejoin:M,strokeMiterlimit:N,paintOrder:F}){k===null&&(a=null,l=null),A===null&&(c=null,f=null),Ge(k)?!Ge(A)&&(!Ge(a)||x!=null&&x.fill)&&(A="none"):Ge(A)&&(!Ge(c)||x!=null&&x.stroke)&&(k="none");const[O,C]=_r(a,k),[B,P]=en(l,I),[z,H]=_r(c,A),[X,tt]=en(f,D),[Z,Y]=en(y);Mf(H)||(u===void 0&&(u=L),h===void 0&&(h=T),d===void 0&&(d=M),p===void 0&&!Zrt(d)&&(p=N),!Mf(C)&&w===void 0&&(w=F));const[Q,V]=en(u);return k!==null&&(e.fill=qe(C,"currentColor"),e.fillOpacity=kd(P,1)),A!==null&&(e.stroke=qe(H,"none"),e.strokeWidth=kd(V,1),e.strokeOpacity=kd(tt,1),e.strokeLinejoin=qe(d,"miter"),e.strokeLinecap=qe(h,"butt"),e.strokeMiterlimit=kd(p,4),e.strokeDasharray=qe(g,"none"),e.strokeDashoffset=qe(v,"0")),e.target=Rn(o),e.ariaLabel=Rn(E),e.ariaDescription=Rn(i),e.ariaHidden=Rn(s),e.opacity=kd(Y,1),e.mixBlendMode=qe(m,"normal"),e.imageFilter=qe(b,"none"),e.paintOrder=qe(w,"normal"),e.pointerEvents=qe(S,"auto"),e.shapeRendering=qe(_,"auto"),{title:{value:t,optional:!0,filter:null},href:{value:n,optional:!0,filter:null},ariaLabel:{value:r,optional:!0,filter:null},fill:{value:O,scale:"auto",optional:!0},fillOpacity:{value:B,scale:"auto",optional:!0},stroke:{value:z,scale:"auto",optional:!0},strokeOpacity:{value:X,scale:"auto",optional:!0},strokeWidth:{value:Q,optional:!0},opacity:{value:Z,scale:"auto",optional:!0}}}function kit(e,t){t&&e.filter(n=>R3(t[n])).append("title").call(Oit,t)}function Dit(e,t){t&&e.filter(([n])=>R3(t[n])).append("title").call(Bit,t)}function Oit(e,t){t&&e.text(n=>mc(t[n]))}function Bit(e,t){t&&e.text(([n])=>mc(t[n]))}function hn(e,{target:t,tip:n},{ariaLabel:r,title:i,fill:s,fillOpacity:o,stroke:a,strokeOpacity:l,strokeWidth:c,opacity:u,href:f}){r&&pt(e,"aria-label",d=>r[d]),s&&pt(e,"fill",d=>s[d]),o&&pt(e,"fill-opacity",d=>o[d]),a&&pt(e,"stroke",d=>a[d]),l&&pt(e,"stroke-opacity",d=>l[d]),c&&pt(e,"stroke-width",d=>c[d]),u&&pt(e,"opacity",d=>u[d]),f&&EC(e,d=>f[d],t),n||kit(e,i)}function E1(e,{target:t,tip:n},{ariaLabel:r,title:i,fill:s,fillOpacity:o,stroke:a,strokeOpacity:l,strokeWidth:c,opacity:u,href:f}){r&&pt(e,"aria-label",([d])=>r[d]),s&&pt(e,"fill",([d])=>s[d]),o&&pt(e,"fill-opacity",([d])=>o[d]),a&&pt(e,"stroke",([d])=>a[d]),l&&pt(e,"stroke-opacity",([d])=>l[d]),c&&pt(e,"stroke-width",([d])=>c[d]),u&&pt(e,"opacity",([d])=>u[d]),f&&EC(e,([d])=>f[d],t),n||Dit(e,i)}function Fit({ariaLabel:e,title:t,fill:n,fillOpacity:r,stroke:i,strokeOpacity:s,strokeWidth:o,opacity:a,href:l},{tip:c}){return[e,c?void 0:t,n,r,i,s,o,a,l].filter(u=>u!==void 0)}function lT(e,t,n){const r=Uo(e,i=>t[i]);return n===void 0&&r.size>1+e.length>>1&&Io("Warning: the implicit z channel has high cardinality. This may occur when the fill or stroke channel is associated with quantitative data rather than ordinal or categorical data. You can suppress this warning by setting the z option explicitly; if this data represents a single series, set z to null."),r.values()}function*IC(e,t,n,r){const{z:i}=n,{z:s}=r,o=Fit(r,n),a=[...t,...o];for(const l of s?lT(e,s,i):[e]){let c,u;t:for(const f of l){for(const d of a)if(!Zn(d[f])){u&&u.push(-1);continue t}if(c===void 0){u&&(yield u),c=o.map(d=>Cl(d[f])),u=[f];continue}u.push(f);for(let d=0;d<o.length;++d)if(Cl(o[d][f])!==c[d]){yield u,c=o.map(p=>Cl(p[f])),u=[f];continue t}}u&&(yield u)}}function TC(e){return e===!0?e="frame":e===!1?e=null:e!=null&&(e=qr(e,"clip",["frame","sphere"])),e}function Lit(e,t,n,r){let i;const{clip:s=r.clip}=t;switch(s){case"frame":{const{width:o,height:a,marginLeft:l,marginRight:c,marginTop:u,marginBottom:f}=n,d=E$();i=`url(#${d})`,e=re("svg:g",r).call(h=>h.append("svg:clipPath").attr("id",d).append("rect").attr("x",l).attr("y",u).attr("width",o-c-l).attr("height",a-u-f)).each(function(){this.appendChild(e.node()),e.node=()=>this});break}case"sphere":{const{projection:o}=r;if(!o)throw new Error('the "sphere" clip option requires a projection');const a=E$();i=`url(#${a})`,e.append("clipPath").attr("id",a).append("path").attr("d",nl(o)({type:"Sphere"}));break}}pt(e,"aria-label",t.ariaLabel),pt(e,"aria-description",t.ariaDescription),pt(e,"aria-hidden",t.ariaHidden),pt(e,"clip-path",i)}function ke(e,t,n,r){Lit(e,t,n,r),pt(e,"fill",t.fill),pt(e,"fill-opacity",t.fillOpacity),pt(e,"stroke",t.stroke),pt(e,"stroke-width",t.strokeWidth),pt(e,"stroke-opacity",t.strokeOpacity),pt(e,"stroke-linejoin",t.strokeLinejoin),pt(e,"stroke-linecap",t.strokeLinecap),pt(e,"stroke-miterlimit",t.strokeMiterlimit),pt(e,"stroke-dasharray",t.strokeDasharray),pt(e,"stroke-dashoffset",t.strokeDashoffset),pt(e,"shape-rendering",t.shapeRendering),pt(e,"filter",t.imageFilter),pt(e,"paint-order",t.paintOrder);const{pointerEvents:i=r.pointerSticky===!1?"none":void 0}=t;pt(e,"pointer-events",i)}function Ae(e,t){Rit(e,"mix-blend-mode",t.mixBlendMode),pt(e,"opacity",t.opacity)}function EC(e,t,n){e.each(function(r){const i=t(r);if(i!=null){const s=this.ownerDocument.createElementNS(cc.svg,"a");s.setAttribute("fill","inherit"),s.setAttributeNS(cc.xlink,"href",i),n!=null&&s.setAttribute("target",n),this.parentNode.insertBefore(s,this).appendChild(this)}})}function pt(e,t,n){n!=null&&e.attr(t,n)}function Rit(e,t,n){n!=null&&e.style(t,n)}function ve(e,t,{x:n,y:r},i=Tn,s=Tn){i+=t.dx,s+=t.dy,n!=null&&n.bandwidth&&(i+=n.bandwidth()/2),r!=null&&r.bandwidth&&(s+=r.bandwidth()/2),(i||s)&&e.attr("transform",`translate(${i},${s})`)}function qe(e,t){if((e=Rn(e))!==t)return e}function kd(e,t){if((e=Yt(e))!==t)return e}const Cit=/^-?([_a-z]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])([_a-z0-9-]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])*$/i;function cT(e){if(e===void 0)return"plot-d6a7b5";if(e=`${e}`,!Cit.test(e))throw new Error(`invalid class name: ${e}`);return e}function uT(e,t){if(typeof t=="string")e.property("style",t);else if(t!=null)for(const n of e)Object.assign(n.style,t)}function zs({frameAnchor:e},{width:t,height:n,marginTop:r,marginRight:i,marginBottom:s,marginLeft:o}){return[/left$/.test(e)?o:/right$/.test(e)?t-i:(o+t-i)/2,/^top/.test(e)?r:/^bottom/.test(e)?n-s:(r+n-s)/2]}function xv(e={}){const{document:t=typeof window<"u"?window.document:void 0,clip:n}=e;return{document:t,clip:TC(n)}}function re(e,{document:t}){return me(Hb(e).call(t.documentElement))}const AC=Math.PI,qs=2*AC,A$=.618;function Uit({projection:e,inset:t=0,insetTop:n=t,insetRight:r=t,insetBottom:i=t,insetLeft:s=t}={},o){if(e==null)return;if(typeof e.stream=="function")return e;let a,l,c="frame";if(Si(e)){let S;if({type:e,domain:l,inset:S,insetTop:n=S!==void 0?S:n,insetRight:r=S!==void 0?S:r,insetBottom:i=S!==void 0?S:i,insetLeft:s=S!==void 0?S:s,clip:c=c,...a}=e,e==null)return}typeof e!="function"&&({type:e}=MC(e));const{width:u,height:f,marginLeft:d,marginRight:h,marginTop:p,marginBottom:g}=o,v=u-d-h-s-r,y=f-p-g-n-i;if(e=e==null?void 0:e({width:v,height:y,clip:c,...a}),e==null)return;c=Pit(c,d,p,u-h,f-g);let m=d+s,b=p+n,w;if(l!=null){const[[S,_],[x,E]]=nl(e).bounds(l),k=Math.min(v/(x-S),y/(E-_));k>0?(m-=(k*(S+x)-v)/2,b-=(k*(_+E)-y)/2,w=l1({point(I,A){this.stream.point(I*k+m,A*k+b)}})):Io("Warning: the projection could not be fit to the specified domain; using the default scale.")}return w??(w=m===0&&b===0?$C():l1({point(S,_){this.stream.point(S+m,_+b)}})),{stream:S=>e.stream(w.stream(c(S)))}}function MC(e){switch(`${e}`.toLowerCase()){case"albers-usa":return Ti(wtt,.7463,.4673);case"albers":return I0(_F,.7463,.4673);case"azimuthal-equal-area":return Ti(_tt,4,4);case"azimuthal-equidistant":return Ti(Stt,qs,qs);case"conic-conformal":return I0(Ttt,qs,qs);case"conic-equal-area":return I0(c1,6.1702,2.9781);case"conic-equidistant":return I0(Mtt,7.312,3.6282);case"equal-earth":return Ti(Ntt,5.4133,2.6347);case"equirectangular":return Ti(Ett,qs,AC);case"gnomonic":return Ti(ktt,3.4641,3.4641);case"identity":return{type:$C};case"reflect-y":return{type:zit};case"mercator":return Ti(xtt,qs,qs);case"orthographic":return Ti(Dtt,2,2);case"stereographic":return Ti(Ott,2,2);case"transverse-mercator":return Ti(Btt,qs,qs);default:throw new Error(`unknown projection type: ${e}`)}}function Pit(e,t,n,r,i){if(e===!1||e==null||typeof e=="number")return s=>s;switch(e===!0&&(e="frame"),`${e}`.toLowerCase()){case"frame":return sF(t,n,r,i);default:throw new Error(`unknown projection clip type: ${e}`)}}function Ti(e,t,n){return{type:({width:r,height:i,rotate:s,precision:o=.15,clip:a})=>{var c,u,f;const l=e();return o!=null&&((c=l.precision)==null||c.call(l,o)),s!=null&&((u=l.rotate)==null||u.call(l,s)),typeof a=="number"&&((f=l.clipAngle)==null||f.call(l,a)),l.scale(Math.min(r/t,i/n)),l.translate([r/2,i/2]),l},aspectRatio:n/t}}function I0(e,t,n){const{type:r,aspectRatio:i}=Ti(e,t,n);return{type:s=>{const{parallels:o,domain:a,width:l,height:c}=s,u=r(s);return o!=null&&(u.parallels(o),a===void 0&&u.fitSize([l,c],{type:"Sphere"})),u},aspectRatio:i}}const $C=zr({stream:e=>e}),zit=zr(l1({point(e,t){this.stream.point(e,-t)}}));function NC(e,t,n,r){const i=n[e],s=n[t],o=i.length,a=n[e]=new Float64Array(o).fill(NaN),l=n[t]=new Float64Array(o).fill(NaN);let c;const u=r.stream({point(f,d){a[c]=f,l[c]=d}});for(c=0;c<o;++c)u.point(i[c],s[c])}function jit({projection:e}={}){return e==null?!1:typeof e.stream=="function"?!0:(Si(e)&&(e=e.type),e!=null)}function Vit(e){if(typeof(e==null?void 0:e.stream)=="function")return A$;if(Si(e)&&(e=e.type),e!=null){if(typeof e!="function"){const{aspectRatio:t}=MC(e);if(t)return t}return A$}}function Iv(e,t,{projection:n}){const{x:r,y:i}=e;let s={};return r&&(s.x=r),i&&(s.y=i),s=oT(s,t),n&&(r==null?void 0:r.scale)==="x"&&(i==null?void 0:i.scale)==="y"&&NC("x","y",s,n),r&&(s.x=fr(s.x)),i&&(s.y=fr(s.y)),s}function Yit(e){const t=[],n=[],r={scale:"x",value:t},i={scale:"y",value:n},s={point(o,a){t.push(o),n.push(a)},lineStart(){},lineEnd(){},polygonStart(){},polygonEnd(){},sphere(){}};for(const o of e.value)ca(o,s);return[r,i]}const kC=new Map([["accent",Vnt],["category10",jnt],["dark2",Ynt],["paired",qnt],["pastel1",Wnt],["pastel2",Hnt],["set1",Gnt],["set2",Xnt],["set3",Qnt],["tableau10",Knt]]);function qit(e){return e!=null&&kC.has(`${e}`.toLowerCase())}const M$=new Map([...kC,["brbg",Ws(fL,dL)],["prgn",Ws(hL,pL)],["piyg",Ws(yL,mL)],["puor",Ws(gL,bL)],["rdbu",Ws(zS,p1)],["rdgy",Ws(vL,wL)],["rdylbu",Ws(jS,y1)],["rdylgn",Ws(_L,SL)],["spectral",Ws(xL,IL)],["burd",$$(zS,p1)],["buylrd",$$(jS,y1)],["blues",pn(XL,QL)],["greens",pn(KL,ZL)],["greys",pn(JL,tR)],["oranges",pn(sR,oR)],["purples",pn(eR,nR)],["reds",pn(rR,iR)],["turbo",Hs(hR)],["viridis",Hs(pR)],["magma",Hs(yR)],["inferno",Hs(mR)],["plasma",Hs(gR)],["cividis",Hs(aR)],["cubehelix",Hs(lR)],["warm",Hs(cR)],["cool",Hs(uR)],["bugn",pn(TL,EL)],["bupu",pn(AL,ML)],["gnbu",pn($L,NL)],["orrd",pn(kL,DL)],["pubu",pn(FL,LL)],["pubugn",pn(OL,BL)],["purd",pn(RL,CL)],["rdpu",pn(UL,PL)],["ylgn",pn(VL,YL)],["ylgnbu",pn(zL,jL)],["ylorbr",pn(qL,WL)],["ylorrd",pn(HL,GL)],["rainbow",N$(fR)],["sinebow",N$(dR)]]);function pn(e,t){return({length:n})=>n===1?[e[3][1]]:n===2?[e[3][1],e[3][2]]:(n=Math.max(3,Math.floor(n)),n>9?Yi(t,n):e[n])}function Ws(e,t){return({length:n})=>n===2?[e[3][0],e[3][2]]:(n=Math.max(3,Math.floor(n)),n>11?Yi(t,n):e[n])}function $$(e,t){return({length:n})=>n===2?[e[3][2],e[3][0]]:(n=Math.max(3,Math.floor(n)),n>11?Yi(r=>t(1-r),n):e[n].slice().reverse())}function Hs(e){return({length:t})=>Yi(e,Math.max(2,Math.floor(t)))}function N$(e){return({length:t})=>Yi(e,Math.floor(t)+1).slice(0,-1)}function DC(e){const t=`${e}`.toLowerCase();if(!M$.has(t))throw new Error(`unknown ordinal scheme: ${t}`);return M$.get(t)}function Tv(e,t){const n=DC(e),r=typeof n=="function"?n({length:t}):n;return r.length!==t?r.slice(0,t):r}function Wit(e,t="greys"){const n=new Set,[r,i]=Tv(t,2);for(const s of e)if(s!=null)if(s===!0)n.add(i);else if(s===!1)n.add(r);else return;return[...n]}const k$=new Map([["brbg",dL],["prgn",pL],["piyg",mL],["puor",bL],["rdbu",p1],["rdgy",wL],["rdylbu",y1],["rdylgn",SL],["spectral",IL],["burd",e=>p1(1-e)],["buylrd",e=>y1(1-e)],["blues",QL],["greens",ZL],["greys",tR],["purples",nR],["reds",iR],["oranges",oR],["turbo",hR],["viridis",pR],["magma",yR],["inferno",mR],["plasma",gR],["cividis",aR],["cubehelix",lR],["warm",cR],["cool",uR],["bugn",EL],["bupu",ML],["gnbu",NL],["orrd",DL],["pubugn",BL],["pubu",LL],["purd",CL],["rdpu",PL],["ylgnbu",jL],["ylgn",YL],["ylorbr",WL],["ylorrd",GL],["rainbow",fR],["sinebow",dR]]);function fT(e){const t=`${e}`.toLowerCase();if(!k$.has(t))throw new Error(`unknown quantitative scheme: ${t}`);return k$.get(t)}const Hit=new Set(["brbg","prgn","piyg","puor","rdbu","rdgy","rdylbu","rdylgn","spectral","burd","buylrd"]);function Git(e){return e!=null&&Hit.has(`${e}`.toLowerCase())}const OC=e=>t=>e(1-t),p_=[0,1],D$=new Map([["number",Fn],["rgb",fc],["hsl",yK],["hcl",bK],["lab",mK]]);function BC(e){const t=`${e}`.toLowerCase();if(!D$.has(t))throw new Error(`unknown interpolator: ${t}`);return D$.get(t)}function xy(e,t,n,{type:r,nice:i,clamp:s,zero:o,domain:a=LC(e,n),unknown:l,round:c,scheme:u,interval:f,range:d=Ce.get(e)===wy?sst(n,a):Ce.get(e)===_y?ost(n,a):Ce.get(e)===Sy?p_:void 0,interpolate:h=Ce.get(e)===Vo?u==null&&d!==void 0?fc:fT(u!==void 0?u:r==="cyclical"?"rainbow":"turbo"):c?p3:Fn,reverse:p}){if(f=Jf(f,r),(r==="cyclical"||r==="sequential")&&(r="linear"),typeof h!="function"&&(h=BC(h)),p=!!p,d!==void 0){const g=(a=Sr(a)).length,v=(d=Sr(d)).length;if(g!==v){if(h.length===1)throw new Error("invalid piecewise interpolator");h=Qb(h,d),d=void 0}}if(h.length===1?(p&&(h=OC(h),p=!1),d===void 0&&(d=Float64Array.from(a,(g,v)=>v/(a.length-1)),d.length===2&&(d=p_)),t.interpolate((d===p_?zr:hT)(h))):t.interpolate(h),o){const[g,v]=gn(a);(g>0||v<0)&&(a=_p(a),$f(a)!==Math.sign(g)?a[a.length-1]=0:a[0]=0)}return p&&(a=Bg(a)),t.domain(a).unknown(l),i&&(t.nice(Xit(i,r)),a=t.domain()),d!==void 0&&t.range(d),s&&t.clamp(s),{type:r,domain:a,range:d,scale:t,interpolate:h,interval:f}}function Xit(e,t){return e===!0?void 0:typeof e=="number"?e:Yrt(e,t)}function Qit(e,t,n){return xy(e,iv(),t,n)}function Kit(e,t,n){return FC(e,t,{...n,exponent:.5})}function FC(e,t,{exponent:n=1,...r}){return xy(e,YF().exponent(n),t,{...r,type:"pow"})}function Zit(e,t,{base:n=10,domain:r=ast(t),...i}){return xy(e,PF().base(n),t,{...i,domain:r})}function Jit(e,t,{constant:n=1,...r}){return xy(e,jF().constant(n),t,r)}function tst(e,t,{range:n,quantiles:r=n===void 0?5:(n=[...n]).length,n:i=r,scheme:s="rdylbu",domain:o=lst(t),unknown:a,interpolate:l,reverse:c}){return n===void 0&&(n=l!==void 0?Yi(l,i):Ce.get(e)===Vo?Tv(s,i):void 0),o.length>0&&(o=qF(o,n===void 0?{length:i}:n).quantiles()),dT(e,t,{domain:o,range:n,reverse:c,unknown:a})}function est(e,t,{range:n,n:r=n===void 0?5:(n=[...n]).length,scheme:i="rdylbu",domain:s=LC(e,t),unknown:o,interpolate:a,reverse:l}){const[c,u]=gn(s);let f;return n===void 0?(f=Fa(c,u,r),f[0]<=c&&f.splice(0,1),f[f.length-1]>=u&&f.pop(),r=f.length+1,n=a!==void 0?Yi(a,r):Ce.get(e)===Vo?Tv(i,r):void 0):(f=Yi(Fn(c,u),r+1).slice(1,-1),c instanceof Date&&(f=f.map(d=>new Date(d)))),$f(Sr(s))<0&&f.reverse(),dT(e,t,{domain:f,range:n,reverse:l,unknown:o})}function dT(e,t,{domain:n=[0],unknown:r,scheme:i="rdylbu",interpolate:s,range:o=s!==void 0?Yi(s,n.length+1):Ce.get(e)===Vo?Tv(i,n.length+1):void 0,reverse:a}){n=Sr(n);const l=$f(n);if(!isNaN(l)&&!nst(n,l))throw new Error(`the ${e} scale has a non-monotonic domain`);return a&&(o=Bg(o)),{type:"threshold",scale:WF(l<0?Bg(n):n,o===void 0?[]:o).unknown(r),domain:n,range:o}}function nst(e,t){for(let n=1,r=e.length,i=e[0];n<r;++n){const s=ac(i,i=e[n]);if(s!==0&&s!==t)return!1}return!0}function rst(e){return{type:"identity",scale:nit(Ce.get(e))?RF():t=>t}}function Tp(e,t=S1){return e.length?[wn(e,({value:n})=>n===void 0?n:wn(n,t)),Ne(e,({value:n})=>n===void 0?n:Ne(n,t))]:[0,1]}function LC(e,t){const n=Ce.get(e);return(n===wy||n===Sy||n===_y?ist:Tp)(t)}function ist(e){return[0,e.length?Ne(e,({value:t})=>t===void 0?t:Ne(t,S1)):1]}function sst(e,t){const n=e.find(({radius:o})=>o!==void 0);if(n!==void 0)return[0,n.radius];const r=La(e,.5,({value:o})=>o===void 0?NaN:La(o,.25,xo)),i=t.map(o=>3*Math.sqrt(o/r)),s=30/Ne(i);return s<1?i.map(o=>o*s):i}function ost(e,t){const n=up(e,({value:s})=>s===void 0?NaN:up(s,Math.abs)),r=t.map(s=>12*s/n),i=60/Ne(r);return i<1?r.map(s=>s*i):r}function ast(e){for(const{value:t}of e)if(t!==void 0)for(let n of t){if(n>0)return Tp(e,xo);if(n<0)return Tp(e,yv)}return[1,10]}function lst(e){const t=[];for(const{value:n}of e)if(n!==void 0)for(const r of n)t.push(r);return t}function hT(e){return(t,n)=>r=>e(t+r*(n-t))}function Ev(e,t,n,r,{type:i,nice:s,clamp:o,domain:a=Tp(r),unknown:l,pivot:c=0,scheme:u,range:f,symmetric:d=!0,interpolate:h=Ce.get(e)===Vo?u==null&&f!==void 0?fc:fT(u!==void 0?u:"rdbu"):Fn,reverse:p}){c=+c,a=Sr(a);let[g,v]=a;if(a.length>2&&Io(`Warning: the diverging ${e} scale domain contains extra elements.`),ac(g,v)<0&&([g,v]=[v,g],p=!p),g=Math.min(g,c),v=Math.max(v,c),typeof h!="function"&&(h=BC(h)),f!==void 0&&(h=h.length===1?hT(h)(...f):Qb(h,f)),p&&(h=OC(h)),d){const y=n.apply(c),m=y-n.apply(g),b=n.apply(v)-y;m<b?g=n.invert(y-b):m>b&&(v=n.invert(y+m))}return t.domain([g,c,v]).unknown(l).interpolator(h),o&&t.clamp(o),s&&t.nice(s),{type:i,domain:[g,v],pivot:c,interpolate:h,scale:t}}function cst(e,t,n){return Ev(e,aL(),hst,t,n)}function ust(e,t,n){return RC(e,t,{...n,exponent:.5})}function RC(e,t,{exponent:n=1,...r}){return Ev(e,uL().exponent(n=+n),mst(n),t,{...r,type:"diverging-pow"})}function fst(e,t,{base:n=10,pivot:r=1,domain:i=Tp(t,r<0?yv:xo),...s}){return Ev(e,lL().base(n=+n),pst,t,{domain:i,pivot:r,...s})}function dst(e,t,{constant:n=1,...r}){return Ev(e,cL().constant(n=+n),gst(n),t,r)}const hst={apply(e){return e},invert(e){return e}},pst={apply:Math.log,invert:Math.exp},yst={apply(e){return Math.sign(e)*Math.sqrt(Math.abs(e))},invert(e){return Math.sign(e)*(e*e)}};function mst(e){return e===.5?yst:{apply(t){return Math.sign(t)*Math.pow(Math.abs(t),e)},invert(t){return Math.sign(t)*Math.pow(Math.abs(t),1/e)}}}function gst(e){return{apply(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))},invert(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}}function CC(e,t,n,r){return xy(e,t,n,r)}function bst(e,t,n){return CC(e,Pnt(),t,n)}function vst(e,t,n){return CC(e,znt(),t,n)}const Iy=Symbol("ordinal");function UC(e,t,n,{type:r,interval:i,domain:s,range:o,reverse:a,hint:l}){return i=Jf(i,r),s===void 0&&(s=zC(n,i,e)),(r==="categorical"||r===Iy)&&(r="ordinal"),a&&(s=Bg(s)),s=t.domain(s).domain(),o!==void 0&&(typeof o=="function"&&(o=o(s)),t.range(o)),{type:r,domain:s,range:o,scale:t,hint:l,interval:i}}function wst(e,t,{type:n,interval:r,domain:i,range:s,scheme:o,unknown:a,...l}){r=Jf(r,n),i===void 0&&(i=zC(t,r,e));let c;if(Ce.get(e)===vv)c=xst(t),s=s===void 0?Ist(c):xe(s,G3);else if(Ce.get(e)===Vo&&(s===void 0&&(n==="ordinal"||n===Iy)&&(s=Wit(i,o),s!==void 0&&(o=void 0)),o===void 0&&s===void 0&&(o=n==="ordinal"?"turbo":"tableau10"),o!==void 0))if(s!==void 0){const u=fT(o),f=s[0],d=s[1]-s[0];s=({length:h})=>Yi(p=>u(f+d*p),h)}else s=DC(o);if(a===CS)throw new Error(`implicit unknown on ${e} scale is not supported`);return UC(e,A3().unknown(a),t,{...l,type:n,domain:i,range:s,hint:c})}function _st(e,t,{align:n=.5,padding:r=.5,...i}){return PC(wet().align(n).padding(r),t,i,e)}function Sst(e,t,{align:n=.5,padding:r=.1,paddingInner:i=r,paddingOuter:s=e==="fx"||e==="fy"?0:r,...o}){return PC(nv().align(n).paddingInner(i).paddingOuter(s),t,o,e)}function PC(e,t,n,r){let{round:i}=n;return i!==void 0&&e.round(i=!!i),e=UC(r,e,t,n),e.round=i,e}function zC(e,t,n){const r=new ey;for(const{value:i,domain:s}of e){if(s!==void 0)return s();if(i!==void 0)for(const o of i)r.add(o)}if(t!==void 0){const[i,s]=gn(r).map(t.floor,t);return t.range(i,t.offset(s))}if(r.size>1e4&&Ce.get(n)===Is)throw new Error(`implicit ordinal domain of ${n} scale has more than 10,000 values`);return ap(r,vi)}function O$(e,t){let n;for(const{hint:r}of e){const i=r==null?void 0:r[t];if(i!==void 0){if(n===void 0)n=i;else if(n!==i)return}}return n}function xst(e){return{fill:O$(e,"fill"),stroke:O$(e,"stroke")}}function Ist(e){return Ge(e.fill)?urt:crt}function GS(e,{label:t,inset:n=0,insetTop:r=n,insetRight:i=n,insetBottom:s=n,insetLeft:o=n,round:a,nice:l,clamp:c,zero:u,align:f,padding:d,projection:h,facet:{label:p=t}={},...g}={}){const v={};for(const[y,m]of e){const b=g[y],w=qC(y,m,{round:Ce.get(y)===Is?a:void 0,nice:l,clamp:c,zero:u,align:f,padding:d,projection:h,...b});if(w){let{label:S=y==="fx"||y==="fy"?p:t,percent:_,transform:x,inset:E,insetTop:k=E!==void 0?E:y==="y"?r:0,insetRight:I=E!==void 0?E:y==="x"?i:0,insetBottom:A=E!==void 0?E:y==="y"?s:0,insetLeft:D=E!==void 0?E:y==="x"?o:0}=b||{};if(x==null)x=void 0;else if(typeof x!="function")throw new Error("invalid scale transform; not a function");w.percent=!!_,w.label=S===void 0?Est(m,w):S,w.transform=x,y==="x"||y==="fx"?(w.insetLeft=+D,w.insetRight=+I):(y==="y"||y==="fy")&&(w.insetTop=+k,w.insetBottom=+A),v[y]=w}}return v}function B$(e){const t={},n={scales:t};for(const[r,i]of Object.entries(e)){const{scale:s,type:o,interval:a,label:l}=i;t[r]=HC(i),n[r]=s,s.type=o,a!=null&&(s.interval=a),l!=null&&(s.label=l)}return n}function Tst(e,t){const{x:n,y:r,fx:i,fy:s}=e,o=i||s?pT(t):t;i&&F$(i,o),s&&L$(s,o);const a=i||s?jC(e,t):t;n&&F$(n,a),r&&L$(r,a)}function Est(e=[],t){let n;for(const{label:r}of e)if(r!==void 0){if(n===void 0)n=r;else if(n!==r)return}if(n!==void 0)return!Ic(t)&&t.percent&&(n=`${n} (%)`),{inferred:!0,toString:()=>n}}function pT(e){const{marginTop:t,marginRight:n,marginBottom:r,marginLeft:i,width:s,height:o,facet:{marginTop:a,marginRight:l,marginBottom:c,marginLeft:u}}=e;return{marginTop:Math.max(t,a),marginRight:Math.max(n,l),marginBottom:Math.max(r,c),marginLeft:Math.max(i,u),width:s,height:o}}function jC({fx:e,fy:t},n){const{marginTop:r,marginRight:i,marginBottom:s,marginLeft:o,width:a,height:l}=pT(n);return{marginTop:r,marginRight:i,marginBottom:s,marginLeft:o,width:e?e.scale.bandwidth()+o+i:a,height:t?t.scale.bandwidth()+r+s:l,facet:{width:a,height:l}}}function F$(e,t){if(e.range===void 0){const{insetLeft:n,insetRight:r}=e,{width:i,marginLeft:s=0,marginRight:o=0}=t,a=s+n,l=i-o-r;e.range=[a,Math.max(a,l)],Ic(e)||(e.range=YC(e)),e.scale.range(e.range)}VC(e)}function L$(e,t){if(e.range===void 0){const{insetTop:n,insetBottom:r}=e,{height:i,marginTop:s=0,marginBottom:o=0}=t,a=s+n,l=i-o-r;e.range=[Math.max(a,l),a],Ic(e)?e.range.reverse():e.range=YC(e),e.scale.range(e.range)}VC(e)}function VC(e){e.round===void 0&&$st(e)&&Ast(e)<=30&&e.scale.round(!0)}function Ast({scale:e}){const t=e.domain().length,[n,r]=e.range(),i=e.paddingInner?e.paddingInner():1,s=e.paddingOuter?e.paddingOuter():e.padding(),o=t-i,a=Math.abs(r-n)/Math.max(1,o+s*2);return(a-Math.floor(a))*o}function YC(e){const t=e.scale.domain().length+WC(e);if(!(t>2))return e.range;const[n,r]=e.range;return Array.from({length:t},(i,s)=>n+s/(t-1)*(r-n))}function XS(e,t,n){return qC(e,n===void 0?void 0:[{hint:n}],{...t})}function qC(e,t=[],n={}){const r=Mst(e,t,n);if(n.type===void 0&&n.domain===void 0&&n.range===void 0&&n.interval==null&&e!=="fx"&&e!=="fy"&&Ic({type:r})){const i=t.map(({value:s})=>s).filter(s=>s!==void 0);i.some(tr)?Io(`Warning: some data associated with the ${e} scale are dates. Dates are typically associated with a "utc" or "time" scale rather than a "${Cc(r)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can specify the interval of the ${e} scale (e.g., d3.utcDay), or you can suppress this warning by setting the type of the ${e} scale to "${Cc(r)}".`):i.some(Grt)?Io(`Warning: some data associated with the ${e} scale are strings that appear to be dates (e.g., YYYY-MM-DD). If these strings represent dates, you should parse them to Date objects. Dates are typically associated with a "utc" or "time" scale rather than a "${Cc(r)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can suppress this warning by setting the type of the ${e} scale to "${Cc(r)}".`):i.some(Xrt)&&Io(`Warning: some data associated with the ${e} scale are strings that appear to be numbers. If these strings represent numbers, you should parse or coerce them to numbers. Numbers are typically associated with a "linear" scale rather than a "${Cc(r)}" scale. If you want to treat this data as ordinal, you can specify the interval of the ${e} scale (e.g., 1 for integers), or you can suppress this warning by setting the type of the ${e} scale to "${Cc(r)}".`)}switch(n.type=r,r){case"diverging":case"diverging-sqrt":case"diverging-pow":case"diverging-log":case"diverging-symlog":case"cyclical":case"sequential":case"linear":case"sqrt":case"threshold":case"quantile":case"pow":case"log":case"symlog":n=T0(t,n,fr);break;case"identity":switch(Ce.get(e)){case Is:n=T0(t,n,fr);break;case vv:n=T0(t,n,Nst);break}break;case"utc":case"time":n=T0(t,n,Vrt);break}switch(r){case"diverging":return cst(e,t,n);case"diverging-sqrt":return ust(e,t,n);case"diverging-pow":return RC(e,t,n);case"diverging-log":return fst(e,t,n);case"diverging-symlog":return dst(e,t,n);case"categorical":case"ordinal":case Iy:return wst(e,t,n);case"cyclical":case"sequential":case"linear":return Qit(e,t,n);case"sqrt":return Kit(e,t,n);case"threshold":return dT(e,t,n);case"quantile":return tst(e,t,n);case"quantize":return est(e,t,n);case"pow":return FC(e,t,n);case"log":return Zit(e,t,n);case"symlog":return Jit(e,t,n);case"utc":return vst(e,t,n);case"time":return bst(e,t,n);case"point":return _st(e,t,n);case"band":return Sst(e,t,n);case"identity":return rst(e);case void 0:return;default:throw new Error(`unknown scale type: ${r}`)}}function Cc(e){return typeof e=="symbol"?e.description:e}const R$={toString:()=>"projection"};function Mst(e,t,{type:n,domain:r,range:i,scheme:s,pivot:o,projection:a}){if(e==="fx"||e==="fy")return"band";(e==="x"||e==="y")&&a!=null&&(n=R$);for(const{type:c}of t)if(c!==void 0){if(n===void 0)n=c;else if(n!==c)throw new Error(`scale incompatible with channel: ${n} !== ${c}`)}if(n===R$)return;if(n!==void 0)return n;if(r===void 0&&!t.some(({value:c})=>c!==void 0))return;const l=Ce.get(e);if(l===wy)return"sqrt";if(l===Sy||l===_y)return"linear";if(l===vv)return"ordinal";if((r||i||[]).length>2)return y_(l);if(r!==void 0){if(Ye(r))return y_(l);if(tr(r))return"utc"}else{const c=t.map(({value:u})=>u).filter(u=>u!==void 0);if(c.some(Ye))return y_(l);if(c.some(tr))return"utc"}if(l===Vo){if(o!=null||Git(s))return"diverging";if(qit(s))return"categorical"}return"linear"}function y_(e){switch(e){case Is:return"point";case Vo:return Iy;default:return"ordinal"}}function Ic({type:e}){return e==="ordinal"||e==="point"||e==="band"||e===Iy}function WC({type:e}){return e==="threshold"}function $st({type:e}){return e==="point"||e==="band"}function fi(e){if(e===void 0)return!0;const t=e.domain(),n=e(t[0]);for(let r=1,i=t.length;r<i;++r)if(e(t[r])-n)return!1;return!0}function T0(e,{domain:t,...n},r){for(const i of e)i.value!==void 0&&(i.value=r(i.value));return{domain:t===void 0?t:r(t),...n}}function Nst(e){return xe(e,G3)}function gc(e={}){let t;for(const n in e)if(Ce.has(n)&&Gl(e[n])){if(t!==void 0)throw new Error("ambiguous scale definition; multiple scales found");t=HC(XS(n,e[n]))}if(t===void 0)throw new Error("invalid scale definition; no scale found");return t}function kst(e){return t=>{if(!Ce.has(t=`${t}`))throw new Error(`unknown scale: ${t}`);return e[t]}}function HC({scale:e,type:t,domain:n,range:r,interpolate:i,interval:s,transform:o,percent:a,pivot:l}){if(t==="identity")return{type:"identity",apply:u=>u,invert:u=>u};const c=e.unknown?e.unknown():void 0;return{type:t,domain:_p(n),...r!==void 0&&{range:_p(r)},...o!==void 0&&{transform:o},...a&&{percent:a},...c!==void 0&&{unknown:c},...s!==void 0&&{interval:s},...i!==void 0&&{interpolate:i},...e.clamp&&{clamp:e.clamp()},...l!==void 0&&{pivot:l,symmetric:!1},...e.base&&{base:e.base()},...e.exponent&&{exponent:e.exponent()},...e.constant&&{constant:e.constant()},...e.align&&{align:e.align(),round:e.round()},...e.padding&&(e.paddingInner?{paddingInner:e.paddingInner(),paddingOuter:e.paddingOuter()}:{padding:e.padding()}),...e.bandwidth&&{bandwidth:e.bandwidth(),step:e.step()},apply:u=>e(u),...e.invert&&{invert:u=>e.invert(u)}}}function Dst(e,t,n={}){let r=.5-Tn,i=.5+Tn,s=.5+Tn,o=.5-Tn;for(const{marginTop:g,marginRight:v,marginBottom:y,marginLeft:m}of t)g>r&&(r=g),v>i&&(i=v),y>s&&(s=y),m>o&&(o=m);let{margin:a,marginTop:l=a!==void 0?a:r,marginRight:c=a!==void 0?a:i,marginBottom:u=a!==void 0?a:s,marginLeft:f=a!==void 0?a:o}=n;l=+l,c=+c,u=+u,f=+f;let{width:d=640,height:h=Ost(e,n,{width:d,marginTopDefault:r,marginRightDefault:i,marginBottomDefault:s,marginLeftDefault:o})+Math.max(0,l-r+u-s)}=n;d=+d,h=+h;const p={width:d,height:h,marginTop:l,marginRight:c,marginBottom:u,marginLeft:f};if(e.fx||e.fy){let{margin:g,marginTop:v=g!==void 0?g:l,marginRight:y=g!==void 0?g:c,marginBottom:m=g!==void 0?g:u,marginLeft:b=g!==void 0?g:f}=n.facet??{};v=+v,y=+y,m=+m,b=+b,p.facet={marginTop:v,marginRight:y,marginBottom:m,marginLeft:b}}return p}function Ost({x:e,y:t,fy:n,fx:r},{projection:i,aspectRatio:s},{width:o,marginTopDefault:a,marginRightDefault:l,marginBottomDefault:c,marginLeftDefault:u}){const f=n?n.scale.domain().length:1,d=Vit(i);if(d){const p=r?r.scale.domain().length:1,g=(1.1*f-.1)/(1.1*p-.1)*d,v=Math.max(.1,Math.min(10,g));return Math.round((o-u-l)*v+a+c)}const h=t?Ic(t)?t.scale.domain().length:Math.max(7,17/f):1;if(s!=null){if(s=+s,!(isFinite(s)&&s>0))throw new Error(`invalid aspectRatio: ${s}`);const p=C$("y",t)/(C$("x",e)*s),g=r?r.scale.bandwidth():1,v=n?n.scale.bandwidth():1,y=g*(o-u-l)-e.insetLeft-e.insetRight;return(p*y+t.insetTop+t.insetBottom)/v+a+c}return!!(t||n)*Math.max(1,Math.min(60,h*f))*20+!!r*30+60}function C$(e,t){if(!t)throw new Error(`aspectRatio requires ${e} scale`);const{type:n,domain:r}=t;let i;switch(n){case"linear":case"utc":case"time":i=Number;break;case"pow":{const a=t.scale.exponent();i=l=>Math.pow(l,a);break}case"log":i=Math.log;break;case"point":case"band":return r.length;default:throw new Error(`unsupported ${e} scale for aspectRatio: ${n}`)}const[s,o]=gn(r);return Math.abs(i(o)-i(s))}function Bst(e,t){const{fx:n,fy:r}=GS(e,t),i=n==null?void 0:n.scale.domain(),s=r==null?void 0:r.scale.domain();return i&&s?$G(i,s).map(([o,a],l)=>({x:o,y:a,i:l})):i?i.map((o,a)=>({x:o,i:a})):s?s.map((o,a)=>({y:o,i:a})):void 0}function Fst(e,{x:t,y:n}){return t&&(t=QS(t)),n&&(n=QS(n)),e.filter(t&&n?r=>t.has(r.x)&&n.has(r.y):t?r=>t.has(r.x):r=>n.has(r.y)).sort(t&&n?(r,i)=>t.get(r.x)-t.get(i.x)||n.get(r.y)-n.get(i.y):t?(r,i)=>t.get(r.x)-t.get(i.x):(r,i)=>n.get(r.y)-n.get(i.y))}function yT(e,{fx:t,fy:n}){const r=Po(e),i=t==null?void 0:t.value,s=n==null?void 0:n.value;return t&&n?ju(r,o=>(o.fx=i[o[0]],o.fy=s[o[0]],o),o=>i[o],o=>s[o]):t?ju(r,o=>(o.fx=i[o[0]],o),o=>i[o]):ju(r,o=>(o.fy=s[o[0]],o),o=>s[o])}function Lst(e,t,{marginTop:n,marginLeft:r}){return e&&t?({x:i,y:s})=>`translate(${e(i)-r},${t(s)-n})`:e?({x:i})=>`translate(${e(i)-r},0)`:({y:i})=>`translate(0,${t(i)-n})`}function Rst(e){const t=[],n=new Uint32Array(Bs(e,r=>r.length));for(const r of e){let i=0;for(const s of e)r!==s&&(n.set(s,i),i+=s.length);t.push(n.slice(0,i))}return t}const Cst=new Map([["top",m_],["right",v_],["bottom",g_],["left",b_],["top-left",E0(m_,b_)],["top-right",E0(m_,v_)],["bottom-left",E0(g_,b_)],["bottom-right",E0(g_,v_)],["top-empty",zst],["right-empty",Yst],["bottom-empty",jst],["left-empty",Vst],["empty",qst]]);function Ust(e){if(e==null)return null;const t=Cst.get(`${e}`.toLowerCase());if(t)return t;throw new Error(`invalid facet anchor: ${e}`)}const U$=new WeakMap;function QS(e){let t=U$.get(e);return t||U$.set(e,t=new lc(xe(e,(n,r)=>[n,r]))),t}function sl(e,t){return QS(e).get(t)}function Pst(e,t,n){return t=Cl(t),n=Cl(n),e.find(r=>Object.is(Cl(r.x),t)&&Object.is(Cl(r.y),n))}function Av(e,t,n){var r;return(r=Pst(e,t,n))==null?void 0:r.empty}function m_(e,{y:t},{y:n}){return t?sl(t,n)===0:!0}function g_(e,{y:t},{y:n}){return t?sl(t,n)===t.length-1:!0}function b_(e,{x:t},{x:n}){return t?sl(t,n)===0:!0}function v_(e,{x:t},{x:n}){return t?sl(t,n)===t.length-1:!0}function zst(e,{y:t},{x:n,y:r,empty:i}){if(i)return!1;if(!t)return;const s=sl(t,r);if(s>0)return Av(e,n,t[s-1])}function jst(e,{y:t},{x:n,y:r,empty:i}){if(i)return!1;if(!t)return;const s=sl(t,r);if(s<t.length-1)return Av(e,n,t[s+1])}function Vst(e,{x:t},{x:n,y:r,empty:i}){if(i)return!1;if(!t)return;const s=sl(t,n);if(s>0)return Av(e,t[s-1],r)}function Yst(e,{x:t},{x:n,y:r,empty:i}){if(i)return!1;if(!t)return;const s=sl(t,n);if(s<t.length-1)return Av(e,t[s+1],r)}function qst(e,t,{empty:n}){return n}function E0(e,t){return function(){return e.apply(null,arguments)&&t.apply(null,arguments)}}function w_(e,{channels:{fx:t,fy:n},groups:r}){return t&&n?e.map(({x:i,y:s})=>{var o;return((o=r.get(i))==null?void 0:o.get(s))??[]}):t?e.map(({x:i})=>r.get(i)??[]):e.map(({y:i})=>r.get(i)??[])}let we=class{constructor(t,n={},r={},i){const{facet:s="auto",facetAnchor:o,fx:a,fy:l,sort:c,dx:u=0,dy:f=0,margin:d=0,marginTop:h=d,marginRight:p=d,marginBottom:g=d,marginLeft:v=d,clip:y=i==null?void 0:i.clip,channels:m,tip:b,render:w}=r;if(this.data=t,this.sort=Ua(c)?c:null,this.initializer=xr(r).initializer,this.transform=this.initializer?r.transform:Ps(r).transform,s===null||s===!1?this.facet=null:(this.facet=qr(s===!0?"include":s,"facet",["auto","include","exclude","super"]),this.fx=t===Nh&&typeof a=="string"?[a]:a,this.fy=t===Nh&&typeof l=="string"?[l]:l),this.facetAnchor=Ust(o),n=q3(n),m!==void 0&&(n={...Wst(m),...n}),i!==void 0&&(n={...xC(this,r,i),...n}),this.channels=Object.fromEntries(Object.entries(n).map(([S,_])=>{if(ds(_.value)){const{value:x,label:E=_.label,scale:k=_.scale}=_.value;_={..._,label:E,scale:k,value:x}}if(t===Nh&&typeof _.value=="string"){const{value:x}=_;_={..._,value:[x]}}return[S,_]}).filter(([S,{value:_,optional:x}])=>{if(_!=null)return!0;if(x)return!1;throw new Error(`missing channel value: ${S}`)})),this.dx=+u,this.dy=+f,this.marginTop=+h,this.marginRight=+p,this.marginBottom=+g,this.marginLeft=+v,this.clip=TC(y),this.tip=Hst(b),this.facet==="super"){if(a||l)throw new Error("super-faceting cannot use fx or fy");for(const S in this.channels){const{scale:_}=n[S];if(!(_!=="x"&&_!=="y"))throw new Error("super-faceting cannot use x or y")}}w!=null&&(this.render=GC(w,this.render))}initialize(t,n,r){let i=Sr(this.data);t===void 0&&i!=null&&(t=[Po(i)]);const s=t;this.transform!=null&&({facets:t,data:i}=this.transform(i,t,r),i=Sr(i)),t!==void 0&&(t.original=s);const o=bC(this.channels,i);return this.sort!=null&&bit(i,t,o,n,this.sort),{data:i,facets:t,channels:o}}filter(t,n,r){for(const i in n){const{filter:s=Zn}=n[i];if(s!==null){const o=r[i];t=t.filter(a=>s(o[a]))}}return t}project(t,n,r){for(const i in t)if(t[i].scale==="x"&&/^x|x$/.test(i)){const s=i.replace(/^x|x$/,"y");s in t&&t[s].scale==="y"&&NC(i,s,n,r.projection)}}scale(t,n,r){const i=oT(t,n);return r.projection&&this.project(t,i,r),i}};function Gi(...e){return e.plot=we.prototype.plot,e}function GC(e,t){if(e==null)return t===null?void 0:t;if(t==null)return e===null?void 0:e;if(typeof e!="function")throw new TypeError(`invalid render transform: ${e}`);if(typeof t!="function")throw new TypeError(`invalid render transform: ${t}`);return function(n,r,i,s,o,a){return e.call(this,n,r,i,s,o,(l,c,u,f,d)=>t.call(this,l,c,u,f,d,a))}}function Wst(e){return Object.fromEntries(Object.entries(q3(e)).map(([t,n])=>(n=typeof n=="string"?{value:n,label:t}:gy(n),n.filter===void 0&&n.scale==null&&(n={...n,filter:null}),[t,n])))}function Hst(e){return e===!0?"xy":e===!1||e==null?null:typeof e=="string"?qr(e,"tip",["x","y","xy"]):e}function td(e,t){return(e==null?void 0:e.tip)===!0?{...e,tip:t}:Si(e==null?void 0:e.tip)&&e.tip.pointer===void 0?{...e,tip:{...e.tip,pointer:t}}:e}const P$=new WeakMap;function mT(e,t,{x:n,y:r,px:i,py:s,maxRadius:o=40,channels:a,render:l,...c}={}){return o=+o,i!=null&&(n??(n=null),a={...a,px:{value:i,scale:"x"}}),s!=null&&(r??(r=null),a={...a,py:{value:s,scale:"y"}}),{x:n,y:r,channels:a,...c,render:GC(function(u,f,d,h,p,g){p={...p,pointerSticky:!1};const v=p.ownerSVGElement,{data:y}=p.getMarkState(this);let m=P$.get(v);m||P$.set(v,m={sticky:!1,roots:[],renders:[]});let b=m.renders.push(H)-1;const{x:w,y:S,fx:_,fy:x}=f;let E=_?_(u.fx)-h.marginLeft:0,k=x?x(u.fy)-h.marginTop:0;w!=null&&w.bandwidth&&(E+=w.bandwidth()/2),S!=null&&S.bandwidth&&(k+=S.bandwidth()/2);const I=u.fi!=null;let A;if(I){let Y=m.facetStates;Y||(m.facetStates=Y=new Map),A=Y.get(this),A||Y.set(this,A=new Map)}const[D,L]=zs(this,h),{px:T,py:M}=d,N=T?Y=>T[Y]:XC(d,D),F=M?Y=>M[Y]:QC(d,L);let O,C,B,P;function z(Y,Q){if(I)if(P&&(P=cancelAnimationFrame(P)),Y==null)A.delete(u.fi);else{A.set(u.fi,Q),P=requestAnimationFrame(()=>{P=null;for(const[V,J]of A)if(J<Q||J===Q&&V<u.fi){Y=null;break}H(Y)});return}H(Y)}function H(Y){if(O===Y&&B===m.sticky)return;O=Y,B=p.pointerSticky=m.sticky;const Q=O==null?[]:[O];I&&(Q.fx=u.fx,Q.fy=u.fy,Q.fi=u.fi);const V=g(Q,f,d,h,p);if(C){if(I){const J=C.parentNode,et=C.getAttribute("transform"),j=V.getAttribute("transform");et?V.setAttribute("transform",et):V.removeAttribute("transform"),j?J.setAttribute("transform",j):J.removeAttribute("transform"),V.removeAttribute("aria-label"),V.removeAttribute("aria-description"),V.removeAttribute("aria-hidden")}C.replaceWith(V)}return m.roots[b]=C=V,O==null&&(A==null?void 0:A.size)>1||p.dispatchValue(O==null?null:y[O]),V}function X(Y){if(m.sticky||Y.pointerType==="mouse"&&Y.buttons===1)return;let[Q,V]=$i(Y);Q-=E,V-=k;const J=Q<h.marginLeft||Q>h.width-h.marginRight?1:e,et=V<h.marginTop||V>h.height-h.marginBottom?1:t;let j=null,At=o*o;for(const at of u){const qt=J*(N(at)-Q),Ht=et*(F(at)-V),st=qt*qt+Ht*Ht;st<=At&&(j=at,At=st)}if(j!=null&&(e!==1||t!==1)){const at=N(j)-Q,qt=F(j)-V;At=at*at+qt*qt}z(j,At)}function tt(Y){Y.pointerType==="mouse"&&O!=null&&(m.sticky&&m.roots.some(Q=>Q==null?void 0:Q.contains(Y.target))||(m.sticky?(m.sticky=!1,m.renders.forEach(Q=>Q(null))):(m.sticky=!0,H(O)),Y.stopImmediatePropagation()))}function Z(Y){Y.pointerType==="mouse"&&(m.sticky||z(null))}return v.addEventListener("pointerenter",X),v.addEventListener("pointermove",X),v.addEventListener("pointerdown",tt),v.addEventListener("pointerleave",Z),H(null)},l)}}function gT(e){return mT(1,1,e)}function bT(e){return mT(1,.01,e)}function vT(e){return mT(.01,1,e)}function XC({x1:e,x2:t,x:n=e},r){return e&&t?i=>(e[i]+t[i])/2:n?i=>n[i]:()=>r}function QC({y1:e,y2:t,y:n=e},r){return e&&t?i=>(e[i]+t[i])/2:n?i=>n[i]:()=>r}function KC(e){return Ic(e)&&e.interval===void 0?void 0:"tabular-nums"}function Gst(e,t){let{label:n=e.label,tickSize:r=6,width:i=240,height:s=44+r,marginTop:o=18,marginRight:a=0,marginBottom:l=16+r,marginLeft:c=0,style:u,ticks:f=(i-c-a)/64,tickFormat:d,fontVariant:h=KC(e),round:p=!0,opacity:g,className:v}=t;const y=xv(t);v=cT(v),g=en(g)[1],d===null&&(d=()=>null);const m=re("svg",y).attr("class",`${v}-ramp`).attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("width",i).attr("height",s).attr("viewBox",`0 0 ${i} ${s}`).call(D=>D.append("style").text(`.${v}-ramp {
  display: block;
  background: white;
  height: auto;
  height: intrinsic;
  max-width: 100%;
  overflow: visible;
}
.${v}-ramp text {
  white-space: pre;
}`)).call(uT,u);let b=D=>D.selectAll(".tick line").attr("y1",o+l-s),w;const S=p?(D,L)=>D.rangeRound(L):(D,L)=>D.range(L),{type:_,domain:x,range:E,interpolate:k,scale:I,pivot:A}=e;if(k){const D=E===void 0?k:Qb(k.length===1?hT(k):k,E);w=S(I.copy(),Yi(Fn(c,i-a),Math.min(x.length+(A!==void 0),E===void 0?1/0:E.length)));const L=256,T=y.document.createElement("canvas");T.width=L,T.height=1;const M=T.getContext("2d");for(let N=0,F=L-1;N<L;++N)M.fillStyle=D(N/F),M.fillRect(N,0,1,1);m.append("image").attr("opacity",g).attr("x",c).attr("y",o).attr("width",i-c-a).attr("height",s-o-l).attr("preserveAspectRatio","none").attr("xlink:href",T.toDataURL())}else if(_==="threshold"){const D=x,L=d===void 0?T=>T:typeof d=="string"?Kf(d):d;w=S(iv().domain([-1,E.length-1]),[c,i-a]),m.append("g").attr("fill-opacity",g).selectAll().data(E).enter().append("rect").attr("x",(T,M)=>w(M-1)).attr("y",o).attr("width",(T,M)=>w(M)-w(M-1)).attr("height",s-o-l).attr("fill",T=>T),f=xe(D,(T,M)=>M),d=T=>L(D[T],T)}else w=S(nv().domain(x),[c,i-a]),m.append("g").attr("fill-opacity",g).selectAll().data(x).enter().append("rect").attr("x",w).attr("y",o).attr("width",Math.max(0,w.bandwidth()-1)).attr("height",s-o-l).attr("fill",I),b=()=>{};return m.append("g").attr("transform",`translate(0,${s-l})`).call(KG(w).ticks(Array.isArray(f)?null:f,typeof d=="string"?d:void 0).tickFormat(typeof d=="function"?d:void 0).tickSize(r).tickValues(Array.isArray(f)?f:null)).attr("font-size",null).attr("font-family",null).attr("font-variant",qe(h,"normal")).call(b).call(D=>D.select(".domain").remove()),n!==void 0&&m.append("text").attr("x",c).attr("y",o-6).attr("fill","currentColor").attr("font-weight","bold").text(n),m.node()}const A1=Math.PI/180;function ed(e,{marker:t,markerStart:n=t,markerMid:r=t,markerEnd:i=t}={}){e.markerStart=__(n),e.markerMid=__(r),e.markerEnd=__(i)}function __(e){if(e==null||e===!1)return null;if(e===!0)return j$;if(typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"none":return null;case"arrow":return z$("auto");case"arrow-reverse":return z$("auto-start-reverse");case"dot":return Xst;case"circle":case"circle-fill":return j$;case"circle-stroke":return Qst}throw new Error(`invalid marker: ${e}`)}function z$(e){return(t,n)=>re("svg:marker",n).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("orient",e).attr("fill","none").attr("stroke",t).attr("stroke-width",1.5).attr("stroke-linecap","round").attr("stroke-linejoin","round").call(r=>r.append("path").attr("d","M-1.5,-3l3,3l-3,3")).node()}function Xst(e,t){return re("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",e).attr("stroke","none").call(n=>n.append("circle").attr("r",2.5)).node()}function j$(e,t){return re("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",e).attr("stroke","white").attr("stroke-width",1.5).call(n=>n.append("circle").attr("r",3)).node()}function Qst(e,t){return re("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill","white").attr("stroke",e).attr("stroke-width",1.5).call(n=>n.append("circle").attr("r",3)).node()}let Kst=0;function Ty(e,t,{stroke:n},r){return ZC(e,t,n&&(i=>n[i]),r)}function Zst(e,t,{stroke:n},r){return ZC(e,t,n&&(([i])=>n[i]),r)}function ZC(e,{markerStart:t,markerMid:n,markerEnd:r,stroke:i},s=()=>i,o){const a=new Map;function l(c){return function(u){const f=s(u);let d=a.get(c);d||a.set(c,d=new Map);let h=d.get(f);if(!h){const p=this.parentNode.insertBefore(c(f,o),this),g=`plot-marker-${++Kst}`;p.setAttribute("id",g),d.set(f,h=`url(#${g})`)}return h}}t&&e.attr("marker-start",l(t)),n&&e.attr("marker-mid",l(n)),r&&e.attr("marker-end",l(r))}function Ey({inset:e,insetLeft:t,insetRight:n,...r}={}){return[t,n]=JC(e,t,n),{inset:e,insetLeft:t,insetRight:n,...r}}function Ay({inset:e,insetTop:t,insetBottom:n,...r}={}){return[t,n]=JC(e,t,n),{inset:e,insetTop:t,insetBottom:n,...r}}function JC(e,t,n){return e===void 0&&t===void 0&&n===void 0?Tn?[1,0]:[.5,.5]:[t,n]}function t5(e,{interval:t}){return e={...gy(e)},e.interval=Y3(e.interval===void 0?t:e.interval),e}function Mv(e,t,n,r){const{[e]:i,[`${e}1`]:s,[`${e}2`]:o}=n,{value:a,interval:l}=t5(i,n);if(a==null||l==null&&!r)return n;const c=zo(i);if(l==null){let h;const p={transform:g=>h||(h=Pt(g,a)),label:c};return{...n,[e]:void 0,[`${e}1`]:s===void 0?p:s,[`${e}2`]:o===void 0?p:o}}let u,f;function d(h){return f!==void 0&&h===u?f:f=xe(Pt(u=h,a),p=>l.floor(p))}return t({...n,[e]:void 0,[`${e}1`]:s===void 0?{transform:d,label:c}:s,[`${e}2`]:o===void 0?{transform:h=>d(h).map(p=>l.offset(p)),label:c}:o})}function e5(e,t,n){const{[e]:r}=n,{value:i,interval:s}=t5(r,n);return i==null||s==null?n:t({...n,[e]:{label:zo(r),transform:o=>{const a=xe(Pt(o,i),c=>s.floor(c)),l=a.map(c=>s.offset(c));return a.map(tr(a)?(c,u)=>c==null||isNaN(c=+c)||(u=l[u],u==null)||isNaN(u=+u)?void 0:new Date((c+u)/2):(c,u)=>c==null||(u=l[u],u==null)?NaN:(+c+ +u)/2)}}})}function n5(e={}){return Mv("x",Ey,e,!0)}function r5(e={}){return Mv("y",Ay,e,!0)}function i5(e={}){return Mv("x",Ey,e)}function s5(e={}){return Mv("y",Ay,e)}function o5(e={}){return e5("x",Ey,e)}function a5(e={}){return e5("y",Ay,e)}const l5={ariaLabel:"rule",fill:null,stroke:"currentColor"};class c5 extends we{constructor(t,n={}){const{x:r,y1:i,y2:s,inset:o=0,insetTop:a=o,insetBottom:l=o}=n;super(t,{x:{value:r,scale:"x",optional:!0},y1:{value:i,scale:"y",optional:!0},y2:{value:s,scale:"y",optional:!0}},td(n,"x"),l5),this.insetTop=Yt(a),this.insetBottom=Yt(l),ed(this,n)}render(t,n,r,i,s){const{x:o,y:a}=n,{x:l,y1:c,y2:u}=r,{width:f,height:d,marginTop:h,marginRight:p,marginLeft:g,marginBottom:v}=i,{insetTop:y,insetBottom:m}=this;return re("svg:g",s).call(ke,this,i,s).call(ve,this,{x:l&&o},Tn,0).call(b=>b.selectAll().data(t).enter().append("line").call(Ae,this).attr("x1",l?w=>l[w]:(g+f-p)/2).attr("x2",l?w=>l[w]:(g+f-p)/2).attr("y1",c&&!fi(a)?w=>c[w]+y:h+y).attr("y2",u&&!fi(a)?a.bandwidth?w=>u[w]+a.bandwidth()-m:w=>u[w]-m:d-v-m).call(hn,this,r).call(Ty,this,r,s)).node()}}class u5 extends we{constructor(t,n={}){const{x1:r,x2:i,y:s,inset:o=0,insetRight:a=o,insetLeft:l=o}=n;super(t,{y:{value:s,scale:"y",optional:!0},x1:{value:r,scale:"x",optional:!0},x2:{value:i,scale:"x",optional:!0}},td(n,"y"),l5),this.insetRight=Yt(a),this.insetLeft=Yt(l),ed(this,n)}render(t,n,r,i,s){const{x:o,y:a}=n,{y:l,x1:c,x2:u}=r,{width:f,height:d,marginTop:h,marginRight:p,marginLeft:g,marginBottom:v}=i,{insetLeft:y,insetRight:m}=this;return re("svg:g",s).call(ke,this,i,s).call(ve,this,{y:l&&a},0,Tn).call(b=>b.selectAll().data(t).enter().append("line").call(Ae,this).attr("x1",c&&!fi(o)?w=>c[w]+y:g+y).attr("x2",u&&!fi(o)?o.bandwidth?w=>u[w]+o.bandwidth()-m:w=>u[w]-m:f-p-m).attr("y1",l?w=>l[w]:(h+d-v)/2).attr("y2",l?w=>l[w]:(h+d-v)/2).call(hn,this,r).call(Ty,this,r,s)).node()}}function Pa(e,t){let{x:n=_t,y:r,y1:i,y2:s,...o}=s5(t);return[i,s]=f5(r,i,s),new c5(e,{...o,x:n,y1:i,y2:s})}function za(e,t){let{y:n=_t,x:r,x1:i,x2:s,...o}=i5(t);return[i,s]=f5(r,i,s),new u5(e,{...o,y:n,x1:i,x2:s})}function f5(e,t,n){if(e==null){if(t===void 0){if(n!==void 0)return[0,n]}else if(n===void 0)return[0,t]}else{if(t===void 0)return n===void 0?[0,e]:[e,n];if(n===void 0)return[e,t]}return[t,n]}function $v(e,...t){let n=t.length;for(let r=0,i=!0;r<n;++r)typeof t[r]!="function"&&(i&&(e=e.slice(),i=!1),e.splice(r,2,e[r]+t[r]+e[r+1]),t.splice(r,1),--r,--n);return r=>{let i=e[0];for(let s=0;s<n;++s)i+=t[s](r)+e[s+1];return i}}const Jst={ariaLabel:"text",strokeLinejoin:"round",strokeWidth:3,paintOrder:"stroke"},d5="";class Nv extends we{constructor(t,n={}){const{x:r,y:i,text:s=jo(t)&&uC(t)?_t:Ar,frameAnchor:o,textAnchor:a=/right$/i.test(o)?"end":/left$/i.test(o)?"start":"middle",lineAnchor:l=/^top/i.test(o)?"top":/^bottom/i.test(o)?"bottom":"middle",lineHeight:c=1,lineWidth:u=1/0,textOverflow:f,monospace:d,fontFamily:h=d?"ui-monospace, monospace":void 0,fontSize:p,fontStyle:g,fontVariant:v,fontWeight:y,rotate:m}=n,[b,w]=en(m,0),[S,_]=rot(p);if(super(t,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},fontSize:{value:S,optional:!0},rotate:{value:Wrt(b),optional:!0},text:{value:s,filter:R3,optional:!0}},n,Jst),this.rotate=w,this.textAnchor=qe(a,"middle"),this.lineAnchor=qr(l,"lineAnchor",["top","middle","bottom"]),this.lineHeight=+c,this.lineWidth=+u,this.textOverflow=h5(f),this.monospace=!!d,this.fontFamily=Rn(h),this.fontSize=_,this.fontStyle=Rn(g),this.fontVariant=Rn(v),this.fontWeight=Rn(y),this.frameAnchor=vy(o),!(this.lineWidth>=0))throw new Error(`invalid lineWidth: ${u}`);this.splitLines=g5(this),this.clipLine=b5(this)}render(t,n,r,i,s){const{x:o,y:a}=n,{x:l,y:c,rotate:u,text:f,title:d,fontSize:h}=r,{rotate:p}=this,[g,v]=zs(this,i);return re("svg:g",s).call(ke,this,i,s).call(m5,this,f,i).call(ve,this,{x:l&&o,y:c&&a}).call(y=>y.selectAll().data(t).enter().append("text").call(Ae,this).call(tot,this,f,d).attr("transform",$v`translate(${l?m=>l[m]:g},${c?m=>c[m]:v})${u?m=>` rotate(${u[m]})`:p?` rotate(${p})`:""}`).call(pt,"font-size",h&&(m=>h[m])).call(hn,this,r)).node()}}function h5(e){return e==null?null:qr(e,"textOverflow",["clip","ellipsis","clip-start","clip-end","ellipsis-start","ellipsis-middle","ellipsis-end"]).replace(/^(clip|ellipsis)$/,"$1-end")}function tot(e,t,n,r){if(!n)return;const{lineAnchor:i,lineHeight:s,textOverflow:o,splitLines:a,clipLine:l}=t;e.each(function(c){const u=a(mc(n[c])??"").map(l),f=u.length,d=i==="top"?.71:i==="bottom"?1-f:(164-f*100)/200;if(f>1){let h=0;for(let p=0;p<f;++p){if(++h,!u[p])continue;const g=this.ownerDocument.createElementNS(cc.svg,"tspan");g.setAttribute("x",0),p===h-1?g.setAttribute("y",`${(d+p)*s}em`):g.setAttribute("dy",`${h*s}em`),g.textContent=u[p],this.appendChild(g),h=0}}else d&&this.setAttribute("y",`${d*s}em`),this.textContent=u[0];if(o&&!r&&u[0]!==n[c]){const h=this.ownerDocument.createElementNS(cc.svg,"title");h.textContent=n[c],this.appendChild(h)}})}function Nf(e,{x:t,y:n,...r}={}){return r.frameAnchor===void 0&&([t,n]=Ki(t,n)),new Nv(e,{...r,x:t,y:n})}function p5(e,{x:t=_t,...n}={}){return new Nv(e,a5({...n,x:t}))}function y5(e,{y:t=_t,...n}={}){return new Nv(e,o5({...n,y:t}))}function m5(e,t,n){pt(e,"text-anchor",t.textAnchor),pt(e,"font-family",t.fontFamily),pt(e,"font-size",t.fontSize),pt(e,"font-style",t.fontStyle),pt(e,"font-variant",t.fontVariant===void 0?eot(n):t.fontVariant),pt(e,"font-weight",t.fontWeight)}function eot(e){return e&&(Au(e)||tr(e))?"tabular-nums":void 0}const not=new Set(["inherit","initial","revert","unset","xx-small","x-small","small","medium","large","x-large","xx-large","xxx-large","larger","smaller"]);function rot(e){return e==null||typeof e=="number"?[void 0,e]:typeof e!="string"?[e,void 0]:(e=e.trim().toLowerCase(),not.has(e)||/^[+-]?\d*\.?\d+(e[+-]?\d+)?(\w*|%)$/.test(e)?[void 0,e]:[e,void 0])}function iot(e,t,n){const r=[];let i,s=0;for(const[o,a,l]of sot(e)){if(i===void 0&&(i=o),s>i&&n(e,i,a)>t&&(r.push(e.slice(i,s)+(e[s-1]===d5?"-":"")),i=o),l){r.push(e.slice(i,a)),i=void 0;continue}s=a}return r}function*sot(e){let t=0,n=0;const r=e.length;for(;n<r;){let i=1;switch(e[n]){case d5:case"-":++n,yield[t,n,!1],t=n;break;case" ":for(yield[t,n,!1];e[++n]===" ";);t=n;break;case"\r":e[n+1]===`
`&&++i;case`
`:yield[t,n,!0],n+=i,t=n;break;default:++n;break}}yield[t,n,!0]}const V$={a:56,b:63,c:57,d:63,e:58,f:37,g:62,h:60,i:26,j:26,k:55,l:26,m:88,n:60,o:60,p:62,q:62,r:39,s:54,t:38,u:60,v:55,w:79,x:54,y:55,z:55,A:69,B:67,C:73,D:74,E:61,F:58,G:76,H:75,I:28,J:55,K:67,L:58,M:89,N:75,O:78,P:65,Q:78,R:67,S:65,T:65,U:75,V:69,W:98,X:69,Y:67,Z:67,0:64,1:48,2:62,3:64,4:66,5:63,6:65,7:58,8:65,9:65," ":29,"!":32,'"':49,"'":31,"(":39,")":39,",":31,"-":48,".":31,"/":32,":":31,";":31,"?":52,"":31,"":31,"":47,"":47,"":82};function wT(e,t=0,n=e.length){let r=0;for(let i=t;i<n;i=nd(e,i))r+=V$[e[i]]??(w5(e,i)?120:V$.e);return r}function _T(e,t=0,n=e.length){let r=0;for(let i=t;i<n;i=nd(e,i))r+=w5(e,i)?200:100;return r}function g5({monospace:e,lineWidth:t,textOverflow:n}){if(n!=null||t==1/0)return s=>s.split(/\r\n?|\n/g);const r=e?_T:wT,i=t*100;return s=>iot(s,i,r)}function b5({monospace:e,lineWidth:t,textOverflow:n}){if(n==null||t==1/0)return s=>s;const r=e?_T:wT,i=t*100;switch(n){case"clip-start":return s=>q$(s,i,r,"");case"clip-end":return s=>Y$(s,i,r,"");case"ellipsis-start":return s=>q$(s,i,r,Hu);case"ellipsis-middle":return s=>oot(s,i,r,Hu);case"ellipsis-end":return s=>Y$(s,i,r,Hu)}}const Hu="";function kf(e,t,n,r){const i=[];let s=0;for(let o=0,a=0,l=e.length;o<l;o=a){a=nd(e,o);const c=n(e,o,a);if(s+c>t){for(s+=r;s>t&&o>0;)a=o,o=i.pop(),s-=n(e,o,a);return[o,t-s]}s+=c,i.push(o)}return[-1,0]}function Y$(e,t,n,r){e=e.trim();const i=n(r),[s]=kf(e,t,n,i);return s<0?e:e.slice(0,s).trimEnd()+r}function oot(e,t,n,r){e=e.trim();const i=n(e);if(i<=t)return e;const s=n(r)/2,[o,a]=kf(e,t/2,n,s),[l]=kf(e,i-t/2-a+s,n,-s);return l<0?r:e.slice(0,o).trimEnd()+r+e.slice(nd(e,l)).trimStart()}function q$(e,t,n,r){e=e.trim();const i=n(e);if(i<=t)return e;const s=n(r),[o]=kf(e,i-t+s,n,-s);return o<0?r:r+e.slice(nd(e,o)).trimStart()}const KS=/[\p{Combining_Mark}\p{Emoji_Modifier}]+/uy,W$=new RegExp("\\p{Extended_Pictographic}","uy");function nd(e,t){return t+=aot(e,t)?2:1,cot(e,t)&&(t=KS.lastIndex),lot(e,t)?nd(e,t+1):t}function v5(e,t){return e.charCodeAt(t)<128}function aot(e,t){const n=e.charCodeAt(t);if(n>=55296&&n<56320){const r=e.charCodeAt(t+1);return r>=56320&&r<57344}return!1}function lot(e,t){return e.charCodeAt(t)===8205}function cot(e,t){return v5(e,t)?!1:(KS.lastIndex=t,KS.test(e))}function w5(e,t){return v5(e,t)?!1:(W$.lastIndex=t,W$.test(e))}const _5={ariaLabel:"vector",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinejoin:"round",strokeLinecap:"round"},S5=3.5,uot=S5*5,x5={draw(e,t,n){const r=t*n/uot;e.moveTo(0,0),e.lineTo(0,-t),e.moveTo(-r,r-t),e.lineTo(0,-t),e.lineTo(r,r-t)}},I5={draw(e,t,n){e.moveTo(-n,0),e.lineTo(0,-t),e.lineTo(n,0)}},fot=new Map([["arrow",x5],["spike",I5]]);function dot(e){return e&&typeof e.draw=="function"}function hot(e){if(dot(e))return e;const t=fot.get(`${e}`.toLowerCase());if(t)return t;throw new Error(`invalid shape: ${e}`)}let kv=class extends we{constructor(t,n={}){const{x:r,y:i,r:s=S5,length:o,rotate:a,shape:l=x5,anchor:c="middle",frameAnchor:u}=n,[f,d]=en(o,12),[h,p]=en(a,0);super(t,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},length:{value:f,scale:"length",optional:!0},rotate:{value:h,optional:!0}},n,_5),this.r=+s,this.length=d,this.rotate=p,this.shape=hot(l),this.anchor=qr(c,"anchor",["start","middle","end"]),this.frameAnchor=vy(u)}render(t,n,r,i,s){const{x:o,y:a}=n,{x:l,y:c,length:u,rotate:f}=r,{length:d,rotate:h,anchor:p,shape:g,r:v}=this,[y,m]=zs(this,i);return re("svg:g",s).call(ke,this,i,s).call(ve,this,{x:l&&o,y:c&&a}).call(b=>b.selectAll().data(t).enter().append("path").call(Ae,this).attr("transform",$v`translate(${l?w=>l[w]:y},${c?w=>c[w]:m})${f?w=>` rotate(${f[w]})`:h?` rotate(${h})`:""}${p==="start"?"":p==="end"?u?w=>` translate(0,${u[w]})`:` translate(0,${d})`:u?w=>` translate(0,${u[w]/2})`:` translate(0,${d/2})`}`).attr("d",u?w=>{const S=go();return g.draw(S,u[w],v),S}:(()=>{const w=go();return g.draw(w,d,v),w})()).call(hn,this,r)).node()}};function T5(e,t={}){let{x:n,y:r,...i}=t;return t.frameAnchor===void 0&&([n,r]=Ki(n,r)),new kv(e,{...i,x:n,y:r})}function E5(e,t={}){const{x:n=_t,...r}=t;return new kv(e,{...r,x:n})}function A5(e,t={}){const{y:n=_t,...r}=t;return new kv(e,{...r,y:n})}function pot(e,t={}){const{shape:n=I5,stroke:r=_5.stroke,strokeWidth:i=1,fill:s=r,fillOpacity:o=.3,anchor:a="start",...l}=t;return T5(e,{...l,shape:n,stroke:r,strokeWidth:i,fill:s,fillOpacity:o,anchor:a})}function ol(e,t){return arguments.length<2&&!jo(e)&&(t=e,e=null),t===void 0&&(t={}),[e,t]}function Dv({anchor:e}={},t){return e===void 0?t[0]:qr(e,"anchor",t)}function M5(e){return Dv(e,["left","right"])}function $5(e){return Dv(e,["right","left"])}function N5(e){return Dv(e,["bottom","top"])}function k5(e){return Dv(e,["top","bottom"])}function ST(){const[e,t]=ol(...arguments);return B5("y",M5(t),e,t)}function D5(){const[e,t]=ol(...arguments);return B5("fy",$5(t),e,t)}function xT(){const[e,t]=ol(...arguments);return F5("x",N5(t),e,t)}function O5(){const[e,t]=ol(...arguments);return F5("fx",k5(t),e,t)}function B5(e,t,n,{color:r="currentColor",opacity:i=1,stroke:s=r,strokeOpacity:o=i,strokeWidth:a=1,fill:l=r,fillOpacity:c=i,textAnchor:u,textStroke:f,textStrokeOpacity:d,textStrokeWidth:h,tickSize:p=e==="y"?6:0,tickPadding:g,tickRotate:v,x:y,margin:m,marginTop:b=m===void 0?20:m,marginRight:w=m===void 0?t==="right"?40:0:m,marginBottom:S=m===void 0?20:m,marginLeft:_=m===void 0?t==="left"?40:0:m,label:x,labelAnchor:E,labelArrow:k,labelOffset:I,...A}){return p=Yt(p),g=Yt(g),v=Yt(v),E!==void 0&&(E=qr(E,"labelAnchor",["center","top","bottom"])),k=H5(k),Gi(p&&!Ge(s)?yot(e,t,n,{stroke:s,strokeOpacity:o,strokeWidth:a,tickSize:p,tickPadding:g,tickRotate:v,x:y,...A}):null,Ge(l)?null:got(e,t,n,{fill:l,fillOpacity:c,stroke:f,strokeOpacity:d,strokeWidth:h,textAnchor:u,tickSize:p,tickPadding:g,tickRotate:v,x:y,marginTop:b,marginRight:w,marginBottom:S,marginLeft:_,...A}),!Ge(l)&&x!==null?Nf([],V5({fill:l,fillOpacity:c,...A},function(D,L,T,M,N){const F=M[e],{marginTop:O,marginRight:C,marginBottom:B,marginLeft:P}=e==="y"&&N.inset||N,z=E??(F.bandwidth?"center":"top"),H=I??(t==="right"?C:P)-3;return z==="center"?(this.textAnchor=void 0,this.lineAnchor=t==="right"?"bottom":"top",this.frameAnchor=t,this.rotate=-90):(this.textAnchor=t==="right"?"end":"start",this.lineAnchor=z,this.frameAnchor=`${z}-${t}`,this.rotate=0),this.dy=z==="top"?3-O:z==="bottom"?B-3:0,this.dx=t==="right"?H:-H,this.ariaLabel=`${e}-axis label`,{facets:[[0]],channels:{text:{value:[W5(e,F,{anchor:t,label:x,labelAnchor:z,labelArrow:k})]}}}})):null)}function F5(e,t,n,{color:r="currentColor",opacity:i=1,stroke:s=r,strokeOpacity:o=i,strokeWidth:a=1,fill:l=r,fillOpacity:c=i,textAnchor:u,textStroke:f,textStrokeOpacity:d,textStrokeWidth:h,tickSize:p=e==="x"?6:0,tickPadding:g,tickRotate:v,y,margin:m,marginTop:b=m===void 0?t==="top"?30:0:m,marginRight:w=m===void 0?20:m,marginBottom:S=m===void 0?t==="bottom"?30:0:m,marginLeft:_=m===void 0?20:m,label:x,labelAnchor:E,labelArrow:k,labelOffset:I,...A}){return p=Yt(p),g=Yt(g),v=Yt(v),E!==void 0&&(E=qr(E,"labelAnchor",["center","left","right"])),k=H5(k),Gi(p&&!Ge(s)?mot(e,t,n,{stroke:s,strokeOpacity:o,strokeWidth:a,tickSize:p,tickPadding:g,tickRotate:v,y,...A}):null,Ge(l)?null:bot(e,t,n,{fill:l,fillOpacity:c,stroke:f,strokeOpacity:d,strokeWidth:h,textAnchor:u,tickSize:p,tickPadding:g,tickRotate:v,y,marginTop:b,marginRight:w,marginBottom:S,marginLeft:_,...A}),!Ge(l)&&x!==null?Nf([],V5({fill:l,fillOpacity:c,...A},function(D,L,T,M,N){const F=M[e],{marginTop:O,marginRight:C,marginBottom:B,marginLeft:P}=e==="x"&&N.inset||N,z=E??(F.bandwidth?"center":"right"),H=I??(t==="top"?O:B)-3;return z==="center"?(this.frameAnchor=t,this.textAnchor=void 0):(this.frameAnchor=`${t}-${z}`,this.textAnchor=z==="right"?"end":"start"),this.lineAnchor=t,this.dy=t==="top"?-H:H,this.dx=z==="right"?C-3:z==="left"?3-P:0,this.ariaLabel=`${e}-axis label`,{facets:[[0]],channels:{text:{value:[W5(e,F,{anchor:t,label:x,labelAnchor:z,labelArrow:k})]}}}})):null)}function yot(e,t,n,{strokeWidth:r=1,strokeLinecap:i=null,strokeLinejoin:s=null,facetAnchor:o=t+(e==="y"?"-empty":""),frameAnchor:a=t,tickSize:l,inset:c=0,insetLeft:u=c,insetRight:f=c,dx:d=0,y:h=e==="y"?void 0:null,...p}){return rd(A5,e,t,`${e}-axis tick`,n,{strokeWidth:r,strokeLinecap:i,strokeLinejoin:s,facetAnchor:o,frameAnchor:a,y:h,...p,dx:t==="left"?+d-Tn+ +u:+d+Tn-f,anchor:"start",length:l,shape:t==="left"?Sot:xot})}function mot(e,t,n,{strokeWidth:r=1,strokeLinecap:i=null,strokeLinejoin:s=null,facetAnchor:o=t+(e==="x"?"-empty":""),frameAnchor:a=t,tickSize:l,inset:c=0,insetTop:u=c,insetBottom:f=c,dy:d=0,x:h=e==="x"?void 0:null,...p}){return rd(E5,e,t,`${e}-axis tick`,n,{strokeWidth:r,strokeLinejoin:s,strokeLinecap:i,facetAnchor:o,frameAnchor:a,x:h,...p,dy:t==="bottom"?+d-Tn-f:+d+Tn+ +u,anchor:"start",length:l,shape:t==="bottom"?wot:_ot})}function got(e,t,n,{facetAnchor:r=t+(e==="y"?"-empty":""),frameAnchor:i=t,tickSize:s,tickRotate:o=0,tickPadding:a=Math.max(3,9-s)+(Math.abs(o)>60?4*Math.cos(o*A1):0),text:l,textAnchor:c=Math.abs(o)>60?"middle":t==="left"?"end":"start",lineAnchor:u=o>60?"top":o<-60?"bottom":"middle",fontVariant:f,inset:d=0,insetLeft:h=d,insetRight:p=d,dx:g=0,y:v=e==="y"?void 0:null,...y}){return rd(y5,e,t,`${e}-axis tick label`,n,{facetAnchor:r,frameAnchor:i,text:l,textAnchor:c,lineAnchor:u,fontVariant:f,rotate:o,y:v,...y,dx:t==="left"?+g-s-a+ +h:+g+ +s+ +a-p},function(m,b,w,S,_){f===void 0&&(this.fontVariant=q5(m)),l===void 0&&(_.text=Y5(m,b,w,S,t))})}function bot(e,t,n,{facetAnchor:r=t+(e==="x"?"-empty":""),frameAnchor:i=t,tickSize:s,tickRotate:o=0,tickPadding:a=Math.max(3,9-s)+(Math.abs(o)>=10?4*Math.cos(o*A1):0),text:l,textAnchor:c=Math.abs(o)>=10?o<0^t==="bottom"?"start":"end":"middle",lineAnchor:u=Math.abs(o)>=10?"middle":t==="bottom"?"top":"bottom",fontVariant:f,inset:d=0,insetTop:h=d,insetBottom:p=d,dy:g=0,x:v=e==="x"?void 0:null,...y}){return rd(p5,e,t,`${e}-axis tick label`,n,{facetAnchor:r,frameAnchor:i,text:l===void 0?null:l,textAnchor:c,lineAnchor:u,fontVariant:f,rotate:o,x:v,...y,dy:t==="bottom"?+g+ +s+ +a-p:+g-s-a+ +h},function(m,b,w,S,_){f===void 0&&(this.fontVariant=q5(m)),l===void 0&&(_.text=Y5(m,b,w,S,t))})}function L5(){const[e,t]=ol(...arguments);return P5("y",M5(t),e,t)}function R5(){const[e,t]=ol(...arguments);return P5("fy",$5(t),e,t)}function C5(){const[e,t]=ol(...arguments);return z5("x",N5(t),e,t)}function U5(){const[e,t]=ol(...arguments);return z5("fx",k5(t),e,t)}function P5(e,t,n,{y:r=e==="y"?void 0:null,x:i=null,x1:s=t==="left"?i:null,x2:o=t==="right"?i:null,...a}){return rd(za,e,t,`${e}-grid`,n,{y:r,x1:s,x2:o,...j5(a)})}function z5(e,t,n,{x:r=e==="x"?void 0:null,y:i=null,y1:s=t==="top"?i:null,y2:o=t==="bottom"?i:null,...a}){return rd(Pa,e,t,`${e}-grid`,n,{x:r,y1:s,y2:o,...j5(a)})}function j5({color:e="currentColor",opacity:t=.1,stroke:n=e,strokeOpacity:r=t,strokeWidth:i=1,...s}){return{stroke:n,strokeOpacity:r,strokeWidth:i,...s}}function V5({fill:e,fillOpacity:t,fontFamily:n,fontSize:r,fontStyle:i,fontVariant:s,fontWeight:o,monospace:a,pointerEvents:l,shapeRendering:c,clip:u=!1},f){return[,e]=_r(e),[,t]=en(t),{facet:"super",x:null,y:null,fill:e,fillOpacity:t,fontFamily:n,fontSize:r,fontStyle:i,fontVariant:s,fontWeight:o,monospace:a,pointerEvents:l,shapeRendering:c,clip:u,initializer:f}}function rd(e,t,n,r,i,s,o){let a;function l(f,d,h,p,g,v){const y=f==null&&(t==="fx"||t==="fy"),{[t]:m}=p;if(!m)throw new Error(`missing scale: ${t}`);const b=m.domain();let{interval:w,ticks:S,tickFormat:_,tickSpacing:x=t==="x"?80:35}=s;if(typeof S=="string"&&G5(m)&&(w=S,S=void 0),S===void 0&&(S=Jf(w,m.type)??vot(m,x)),f==null){if(jo(S))f=Sr(S);else if(Eu(S))f=S_(S,...gn(b));else if(m.interval){let k=m.interval;if(m.ticks){const[I,A]=gn(b),D=(A-I)/k[yy];k=v$(k,D/S)??k,f=S_(k,I,A)}else{f=b;const I=f.length;k=v$(k,I/S)??k,k!==m.interval&&(f=S_(k,...gn(f)))}if(k===m.interval){const I=Math.round(f.length/S);I>1&&(f=f.filter((A,D)=>D%I===0))}}else m.ticks?f=m.ticks(S):f=b;if(!m.ticks&&f.length&&f!==b){const k=new ey(b);f=f.filter(I=>k.has(I)),f.length||Io(`Warning: the ${t}-axis ticks appear to not align with the scale domain, resulting in no ticks. Try different ticks?`)}t==="y"||t==="x"?d=[Po(f)]:a[t]={scale:t,value:_t}}o==null||o.call(this,m,f,S,_,a);const E=Object.fromEntries(Object.entries(a).map(([k,I])=>[k,{...I,value:Pt(f,I.value)}]));return y&&(d=v.filterFacets(f,E)),{data:f,facets:d,channels:E}}const c=xr(s).initializer,u=e(i,xr({...s,initializer:l},c));return i==null?(a=u.channels,u.channels={}):a={},u.ariaLabel=r,u.clip===void 0&&(u.clip=!1),u}function vot(e,t){const[n,r]=gn(e.range());return(r-n)/t}function Y5(e,t,n,r,i){return{value:IT(e,t,n,r,i)}}function IT(e,t,n,r,i){return typeof r=="function"?r:r===void 0&&t&&tr(t)?Rrt(t,i)??mc:e.tickFormat?e.tickFormat(typeof n=="number"?n:null,r):r===void 0?mc:typeof r=="string"?(tr(e.domain())?hy:Kf)(r):zr(r)}function S_(e,t,n){return e.range(t,e.offset(e.floor(n)))}const wot={draw(e,t){e.moveTo(0,0),e.lineTo(0,t)}},_ot={draw(e,t){e.moveTo(0,0),e.lineTo(0,-t)}},Sot={draw(e,t){e.moveTo(0,0),e.lineTo(-t,0)}},xot={draw(e,t){e.moveTo(0,0),e.lineTo(t,0)}};function q5(e){return e.bandwidth&&!e.interval?void 0:"tabular-nums"}function Iot(e){return Math.sign($f(e.domain()))*Math.sign($f(e.range()))}function W5(e,t,{anchor:n,label:r=t.label,labelAnchor:i,labelArrow:s}={}){if(!(r==null||r.inferred&&G5(t)&&/^(date|time|year)$/i.test(r))){if(r=String(r),s==="auto"&&(s=(!t.bandwidth||t.interval)&&!/[]/.test(r)),!s)return r;if(s===!0){const o=Iot(t);o&&(s=/x$/.test(e)||i==="center"?/x$/.test(e)===o<0?"left":"right":o<0?"up":"down")}switch(s){case"left":return` ${r}`;case"right":return`${r} `;case"up":return n==="right"?`${r} `:` ${r}`;case"down":return n==="right"?`${r} `:` ${r}`}return r}}function H5(e="auto"){return Ge(e)?!1:typeof e=="boolean"?e:qr(e,"labelArrow",["auto","up","right","down","left"])}function G5(e){return tr(e.domain())}function H$(e,t){if(t==null)return t;const n=e(t);if(!n)throw new Error(`scale not found: ${t}`);return n}function Tot(e,{opacity:t,...n}={}){if(!Ic(e)&&!WC(e))throw new Error(`swatches legend requires ordinal or threshold color scale (not ${e.type})`);return X5(e,n,(r,i,s,o)=>r.append("svg").attr("width",s).attr("height",o).attr("fill",i.scale).attr("fill-opacity",en(t)[1]).append("rect").attr("width","100%").attr("height","100%"))}function Eot(e,{fill:t=(c=>(c=e.hint)==null?void 0:c.fill)()!==void 0?e.hint.fill:"none",fillOpacity:n=1,stroke:r=(u=>(u=e.hint)==null?void 0:u.stroke)()!==void 0?e.hint.stroke:Ge(t)?"currentColor":"none",strokeOpacity:i=1,strokeWidth:s=1.5,r:o=4.5,...a}={},l){const[f,d]=_r(t),[h,p]=_r(r),g=H$(l,f),v=H$(l,h),y=o*o*Math.PI;return n=en(n)[1],i=en(i)[1],s=en(s)[1],X5(e,a,(m,b,w,S)=>m.append("svg").attr("viewBox","-8 -8 16 16").attr("width",w).attr("height",S).attr("fill",f==="color"?_=>g.scale(_):d).attr("fill-opacity",n).attr("stroke",h==="color"?_=>v.scale(_):p).attr("stroke-opacity",i).attr("stroke-width",s).append("path").attr("d",_=>{const x=go();return e.scale(_).draw(x,y),x}))}function X5(e,t={},n){let{columns:r,tickFormat:i,fontVariant:s=KC(e),swatchSize:o=15,swatchWidth:a=o,swatchHeight:l=o,marginLeft:c=0,className:u,style:f,width:d}=t;const h=xv(t);u=cT(u),i=IT(e.scale,e.domain,void 0,i);const p=re("div",h).attr("class",`${u}-swatches ${u}-swatches-${r!=null?"columns":"wrap"}`);let g;return r!=null?(g=`.${u}-swatches-columns .${u}-swatch {
  display: flex;
  align-items: center;
  break-inside: avoid;
  padding-bottom: 1px;
}
.${u}-swatches-columns .${u}-swatch::before {
  flex-shrink: 0;
}
.${u}-swatches-columns .${u}-swatch-label {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}`,p.style("columns",r).selectAll().data(e.domain).enter().append("div").attr("class",`${u}-swatch`).call(n,e,a,l).call(v=>v.append("div").attr("class",`${u}-swatch-label`).attr("title",i).text(i))):(g=`.${u}-swatches-wrap {
  display: flex;
  align-items: center;
  min-height: 33px;
  flex-wrap: wrap;
}
.${u}-swatches-wrap .${u}-swatch {
  display: inline-flex;
  align-items: center;
  margin-right: 1em;
}`,p.selectAll().data(e.domain).enter().append("span").attr("class",`${u}-swatch`).call(n,e,a,l).append(function(){return this.ownerDocument.createTextNode(i.apply(this,arguments))})),p.call(v=>v.insert("style","*").text(`.${u}-swatches {
  font-family: system-ui, sans-serif;
  font-size: 10px;
  margin-bottom: 0.5em;
}
.${u}-swatch > svg {
  margin-right: 0.5em;
  overflow: visible;
}
${g}`)).style("margin-left",c?`${+c}px`:null).style("width",d===void 0?null:`${+d}px`).style("font-variant",qe(s,"normal")).call(uT,f).node()}const M1=new Map([["symbol",Eot],["color",Q5],["opacity",$ot]]);function Aot(e={}){for(const[t,n]of M1){const r=e[t];if(Gl(r)){const i=xv(e);let s;if(t==="symbol"){const{fill:o,stroke:a=o===void 0&&Gl(e.color)?"color":void 0}=e;s={fill:o,stroke:a}}return n(XS(t,r,s),TT(i,r,e),o=>Gl(e[o])?XS(o,e[o]):null)}}throw new Error("unknown legend type; no scale found")}function Mot(e,t,n={}){return(r,i)=>{if(!M1.has(r))throw new Error(`unknown legend type: ${r}`);if(r in e)return M1.get(r)(e[r],TT(t,n[r],i),s=>e[s])}}function TT({className:e,...t},{label:n,ticks:r,tickFormat:i}={},s){return Jrt(s,{className:e,...t},{label:n,ticks:r,tickFormat:i})}function Q5(e,{legend:t=!0,...n}){if(t===!0&&(t=e.type==="ordinal"?"swatches":"ramp"),e.domain!==void 0)switch(`${t}`.toLowerCase()){case"swatches":return Tot(e,n);case"ramp":return Gst(e,n);default:throw new Error(`unknown legend type: ${t}`)}}function $ot({type:e,interpolate:t,...n},{legend:r=!0,color:i=bi(0,0,0),...s}){if(!t)throw new Error(`${e} opacity scales are not supported`);if(r===!0&&(r="ramp"),`${r}`.toLowerCase()!=="ramp")throw new Error(`${r} opacity legends are not supported`);return Q5({type:e,...n,interpolate:Not(i)},{legend:r,...s})}function Not(e){const{r:t,g:n,b:r}=bi(e)||bi(0,0,0);return i=>`rgba(${t},${n},${r},${i})`}function kot(e,t,n){const r=[];for(const[i,s]of M1){const o=n[i];if(o!=null&&o.legend&&i in e){const a=s(e[i],TT(t,e[i],o),l=>e[l]);a!=null&&r.push(a)}}return r}const Dot={ariaLabel:"frame",fill:"none",stroke:"currentColor",clip:!1},Oot={ariaLabel:"frame",fill:null,stroke:"currentColor",strokeLinecap:"square",clip:!1};class K5 extends we{constructor(t={}){const{anchor:n=null,inset:r=0,insetTop:i=r,insetRight:s=r,insetBottom:o=r,insetLeft:a=r,rx:l,ry:c}=t;super(Nh,void 0,t,n==null?Dot:Oot),this.anchor=iC(n,"anchor",["top","right","bottom","left"]),this.insetTop=Yt(i),this.insetRight=Yt(s),this.insetBottom=Yt(o),this.insetLeft=Yt(a),this.rx=Yt(l),this.ry=Yt(c)}render(t,n,r,i,s){const{marginTop:o,marginRight:a,marginBottom:l,marginLeft:c,width:u,height:f}=i,{anchor:d,insetTop:h,insetRight:p,insetBottom:g,insetLeft:v,rx:y,ry:m}=this,b=c+v,w=u-a-p,S=o+h,_=f-l-g;return re(d?"svg:line":"svg:rect",s).datum(0).call(ke,this,i,s).call(Ae,this).call(hn,this,r).call(ve,this,{}).call(d==="left"?x=>x.attr("x1",b).attr("x2",b).attr("y1",S).attr("y2",_):d==="right"?x=>x.attr("x1",w).attr("x2",w).attr("y1",S).attr("y2",_):d==="top"?x=>x.attr("x1",b).attr("x2",w).attr("y1",S).attr("y2",S):d==="bottom"?x=>x.attr("x1",b).attr("x2",w).attr("y1",_).attr("y2",_):x=>x.attr("x",b).attr("y",S).attr("width",w-b).attr("height",_-S).attr("rx",y).attr("ry",m)).node()}}function ET(e){return new K5(e)}const x_={ariaLabel:"tip",fill:"white",stroke:"currentColor"},Bot=new Set(["geometry","href","src","ariaLabel","scales"]);class Z5 extends we{constructor(t,n={}){n.tip&&(n={...n,tip:!1}),n.title===void 0&&jo(t)&&uC(t)&&(n={...n,title:_t});const{x:r,y:i,x1:s,x2:o,y1:a,y2:l,anchor:c,monospace:u,fontFamily:f=u?"ui-monospace, monospace":void 0,fontSize:d,fontStyle:h,fontVariant:p,fontWeight:g,lineHeight:v=1,lineWidth:y=20,frameAnchor:m,format:b,textAnchor:w="start",textOverflow:S,textPadding:_=8,title:x,pointerSize:E=12,pathFilter:k="drop-shadow(0 3px 4px rgba(0,0,0,0.2))"}=n;super(t,{x:{value:s!=null&&o!=null?null:r,scale:"x",optional:!0},y:{value:a!=null&&l!=null?null:i,scale:"y",optional:!0},x1:{value:s,scale:"x",optional:o==null},y1:{value:a,scale:"y",optional:l==null},x2:{value:o,scale:"x",optional:s==null},y2:{value:l,scale:"y",optional:a==null},title:{value:x,optional:!0}},n,x_),this.anchor=fC(c,"anchor"),this.previousAnchor=this.anchor??"top-left",this.frameAnchor=vy(m),this.textAnchor=qe(w,"middle"),this.textPadding=+_,this.pointerSize=+E,this.pathFilter=Rn(k),this.lineHeight=+v,this.lineWidth=+y,this.textOverflow=h5(S),this.monospace=!!u,this.fontFamily=Rn(f),this.fontSize=Yt(d),this.fontStyle=Rn(h),this.fontVariant=Rn(p),this.fontWeight=Rn(g);for(const I in x_)I in this.channels&&(this[I]=x_[I]);this.splitLines=g5(this),this.clipLine=b5(this),this.format={...b}}render(t,n,r,i,s){const o=this,{x:a,y:l,fx:c,fy:u}=n,{ownerSVGElement:f,document:d}=s,{anchor:h,monospace:p,lineHeight:g,lineWidth:v}=this,{textPadding:y,pointerSize:m,pathFilter:b}=this,{marginTop:w,marginLeft:S}=i,{x1:_,y1:x,x2:E,y2:k,x:I=_??E,y:A=x??k}=r,D=c?c(t.fx)-S:0,L=u?u(t.fy)-w:0,[T,M]=zs(this,i),N=XC(r,T),F=QC(r,M),O=p?_T:wT,C=O(Hu);let B,P;"title"in r?(B=r.channels,P=Uot):(B=Cot.call(this,r,n),P=Pot);const z=re("svg:g",s).call(ke,this,i,s).call(m5,this).call(ve,this,{x:I&&a,y:A&&l}).call(tt=>tt.selectAll().data(t).enter().append("g").attr("transform",Z=>`translate(${Math.round(N(Z))},${Math.round(F(Z))})`).call(Ae,this).call(Z=>Z.append("path").attr("filter",b)).call(Z=>Z.append("text").each(function(Y){const Q=me(this);this.setAttribute("fill","currentColor"),this.setAttribute("fill-opacity",1),this.setAttribute("stroke","none");const V=P.call(o,Y,t,B,n,r);if(typeof V=="string")for(const J of o.splitLines(V))H(Q,{value:o.clipLine(J)});else{const J=new Set;for(const et of V){const{label:j=""}=et;j&&J.has(j)||(J.add(j),H(Q,et))}}})));function H(tt,{label:Z,value:Y,color:Q,opacity:V}){Z??(Z=""),Y??(Y="");const J=Q!=null||V!=null;let et,j=v*100;const[At]=kf(Z,j,O,C);if(At>=0)Z=Z.slice(0,At).trimEnd()+Hu,et=Y.trim(),Y="";else{(Z||!Y&&!J)&&(Y=" "+Y);const[qt]=kf(Y,j-O(Z),O,C);qt>=0&&(Y=Y.slice(0,qt).trimEnd()+Hu,et=Y.trim())}const at=tt.append("tspan").attr("x",0).attr("dy",`${g}em`).text("");Z&&at.append("tspan").attr("font-weight","bold").text(Z),Y&&at.append(()=>d.createTextNode(Y)),J&&at.append("tspan").text(" ").attr("fill",Q).attr("fill-opacity",V).style("user-select","none"),et&&at.append("title").text(et)}function X(){const{width:tt,height:Z}=i.facet??i;z.selectChildren().each(function(Y){let{x:Q,width:V,height:J}=this.getBBox();V=Math.round(V),J=Math.round(J);let et=h;if(et===void 0){et=o.previousAnchor;const at=N(Y)+D,qt=F(Y)+L,Ht=at+V+y*2<tt,st=at-V-y*2>0,pe=qt+J+m+y*2+7<Z,Ji=qt-J-m-y*2>0,Wr=(/-left$/.test(et)?Ht||!st:Ht&&!st)?"left":"right",Qv=(/^top-/.test(et)?pe||!Ji:pe&&!Ji)?"top":"bottom";et=o.previousAnchor=`${Qv}-${Wr}`}const j=this.firstChild,At=this.lastChild;if(j.setAttribute("d",Rot(et,m,y,V,J)),Q)for(const at of At.childNodes)at.setAttribute("x",-Q);At.setAttribute("y",`${+Fot(et,At.childNodes.length,g).toFixed(6)}em`),At.setAttribute("transform",`translate(${Lot(et,m,y,V,J)})`)}),z.attr("visibility",null)}return t.length&&(z.attr("visibility","hidden"),f.isConnected?Promise.resolve().then(X):typeof requestAnimationFrame<"u"&&requestAnimationFrame(X)),z.node()}}function J5(e,{x:t,y:n,...r}={}){return r.frameAnchor===void 0&&([t,n]=Ki(t,n)),new Z5(e,{...r,x:t,y:n})}function Fot(e,t,n){return/^top(?:-|$)/.test(e)?.94-n:-.29-t*n}function Lot(e,t,n,r,i){switch(e){case"middle":return[-r/2,i/2];case"top-left":return[n,t+n];case"top":return[-r/2,t/2+n];case"top-right":return[-r-n,t+n];case"right":return[-t/2-r-n,i/2];case"bottom-left":return[n,-t-n];case"bottom":return[-r/2,-t/2-n];case"bottom-right":return[-r-n,-t-n];case"left":return[n+t/2,i/2]}}function Rot(e,t,n,r,i){const s=r+n*2,o=i+n*2;switch(e){case"middle":return`M${-s/2},${-o/2}h${s}v${o}h${-s}z`;case"top-left":return`M0,0l${t},${t}h${s-t}v${o}h${-s}z`;case"top":return`M0,0l${t/2},${t/2}h${(s-t)/2}v${o}h${-s}v${-o}h${(s-t)/2}z`;case"top-right":return`M0,0l${-t},${t}h${t-s}v${o}h${s}z`;case"right":return`M0,0l${-t/2},${-t/2}v${t/2-o/2}h${-s}v${o}h${s}v${t/2-o/2}z`;case"bottom-left":return`M0,0l${t},${-t}h${s-t}v${-o}h${-s}z`;case"bottom":return`M0,0l${t/2},${-t/2}h${(s-t)/2}v${-o}h${-s}v${o}h${(s-t)/2}z`;case"bottom-right":return`M0,0l${-t},${-t}h${t-s}v${-o}h${s}z`;case"left":return`M0,0l${t/2},${-t/2}v${t/2-o/2}h${s}v${o}h${-s}v${t/2-o/2}z`}}function Cot({channels:e},t){var i,s;const n={};let r=this.format;r=G$(r,e,"x"),r=G$(r,e,"y"),this.format=r;for(const o in r){const a=r[o];if(!(a===null||a===!1))if(o==="fx"||o==="fy")n[o]=!0;else{const l=qS(e,o);l&&(n[o]=l)}}for(const o in e){if(o in n||o in r||Bot.has(o))continue;const a=qS(e,o);a&&(n[o]=a)}this.facet&&(t.fx&&!("fx"in r)&&(n.fx=!0),t.fy&&!("fy"in r)&&(n.fy=!0));for(const o in n){const a=this.format[o];if(typeof a=="string"){const l=((i=n[o])==null?void 0:i.value)??((s=t[o])==null?void 0:s.domain())??[];this.format[o]=(tr(l)?hy:Kf)(a)}else if(a===void 0||a===!0){const l=t[o];this.format[o]=l!=null&&l.bandwidth?IT(l,l.domain()):mc}}return n}function G$(e,t,n){if(!(n in e))return e;const r=`${n}1`,i=`${n}2`;if((r in e||!(r in t))&&(i in e||!(i in t)))return e;const s=Object.entries(e),o=e[n];return s.splice(s.findIndex(([a])=>a===n)+1,0,[r,o],[i,o]),Object.fromEntries(s)}function Uot(e,t,{title:n}){return mc(n.value[e],e)}function*Pot(e,t,n,r,i){for(const s in n){if(s==="fx"||s==="fy"){yield{label:$1(r,n,s),value:this.format[s](t[s],e)};continue}if(s==="x1"&&"x2"in n||s==="y1"&&"y2"in n)continue;const o=n[s];if(s==="x2"&&"x1"in n)yield{label:Q$(r,n,"x"),value:X$(this.format.x2,n.x1,o,e)};else if(s==="y2"&&"y1"in n)yield{label:Q$(r,n,"y"),value:X$(this.format.y2,n.y1,o,e)};else{const a=o.value[e],l=o.scale;if(!Zn(a)&&l==null)continue;yield{label:$1(r,n,s),value:this.format[s](a,e),color:l==="color"?i[s][e]:null,opacity:l==="opacity"?i[s][e]:null}}}}function X$(e,t,n,r){var i;return(i=n.hint)!=null&&i.length?`${e(n.value[r]-t.value[r],r)}`:`${e(t.value[r],r)}${e(n.value[r],r)}`}function Q$(e,t,n){const r=$1(e,t,`${n}1`,n),i=$1(e,t,`${n}2`,n);return r===i?r:`${r}${i}`}function $1(e,t,n,r=n){const i=t[n],s=e[(i==null?void 0:i.scale)??n];return String((s==null?void 0:s.label)??(i==null?void 0:i.label)??r)}function AT(e={}){var C;const{facet:t,style:n,title:r,subtitle:i,caption:s,ariaLabel:o,ariaDescription:a}=e,l=cT(e.className),c=e.marks===void 0?[]:Z$(e.marks);c.push(...Got(c));const u=Wot(t,e),f=new Map;for(const B of c){const P=J$(B,u,e);P&&f.set(B,P)}const d=new Map;u&&Dd(d,[u],e),Dd(d,f,e);const h=Z$(Xot(c,d,e));for(const B of h){const P=J$(B,u,e);P&&f.set(B,P)}c.unshift(...h);let p=Bst(d,e);if(p!==void 0){const B=u?w_(p,u):void 0;for(const z of c){if(z.facet===null||z.facet==="super")continue;const H=f.get(z);H!==void 0&&(H.facetsIndex=z.fx!=null||z.fy!=null?w_(p,H):B)}const P=new Set;for(const{facetsIndex:z}of f.values())z==null||z.forEach((H,X)=>{(H==null?void 0:H.length)>0&&P.add(X)});p.forEach(0<P.size&&P.size<p.length?(z,H)=>z.empty=!P.has(H):z=>z.empty=!1);for(const z of c)if(z.facet==="exclude"){const H=f.get(z);H!==void 0&&(H.facetsIndex=Rst(H.facetsIndex))}}for(const B of Ce.keys())Gl(e[B])&&B!=="fx"&&B!=="fy"&&d.set(B,[]);const g=new Map;for(const B of c){if(g.has(B))throw new Error("duplicate mark; each mark must be unique");const{facetsIndex:P,channels:z}=f.get(B)??{},{data:H,facets:X,channels:tt}=B.initialize(P,z,e);MT(tt,e),g.set(B,{data:H,facets:X,channels:tt})}const v=GS(Dd(d,g,e),e),y=Dst(v,c,e);Tst(v,y);const m=B$(v),{fx:b,fy:w}=m,S=b||w?jC(v,y):y,_=b||w?nat(m,y):y,x=xv(e),E=x.document,k=Hb("svg").call(E.documentElement);let I=k;x.ownerSVGElement=k,x.className=l,x.projection=Uit(e,S),x.filterFacets=(B,P)=>w_(p,{channels:P,groups:yT(B,P)}),x.getMarkState=B=>{const P=g.get(B),z=f.get(B);return{...P,channels:{...P.channels,...z==null?void 0:z.channels}}},x.dispatchValue=B=>{I.value!==B&&(I.value=B,I.dispatchEvent(new Event("input",{bubbles:!0})))};const A=new Set;for(const[B,P]of g)if(B.initializer!=null){const z=B.facet==="super"?_:S,H=B.initializer(P.data,P.facets,P.channels,m,z,x);if(H.data!==void 0&&(P.data=H.data),H.facets!==void 0&&(P.facets=H.facets),H.channels!==void 0){const{fx:X,fy:tt,...Z}=H.channels;qot(Z),Object.assign(P.channels,Z);for(const Y of Object.values(Z)){const{scale:Q}=Y;Q!=null&&!eit(Ce.get(Q))&&(t7(Y,e),A.add(Q))}(X!=null||tt!=null)&&f.set(B,!0)}}if(A.size){const B=new Map;Dd(B,g,e,X=>A.has(X)),Dd(d,g,e,X=>A.has(X));const P=eat(GS(B,e),v),{scales:z,...H}=B$(P);Object.assign(v,P),Object.assign(m,H),Object.assign(m.scales,z)}let D,L;p!==void 0&&(D={x:b==null?void 0:b.domain(),y:w==null?void 0:w.domain()},p=Fst(p,D),L=Lst(b,w,y));for(const[B,P]of g)P.values=B.scale(P.channels,m,x);const{width:T,height:M}=y;me(k).attr("class",l).attr("fill","currentColor").attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("text-anchor","middle").attr("width",T).attr("height",M).attr("viewBox",`0 0 ${T} ${M}`).attr("aria-label",o).attr("aria-description",a).call(B=>B.append("style").text(`.${l} {
  display: block;
  background: white;
  height: auto;
  height: intrinsic;
  max-width: 100%;
}
.${l} text,
.${l} tspan {
  white-space: pre;
}`)).call(uT,n);for(const B of c){const{channels:P,values:z,facets:H}=g.get(B);if(p===void 0||B.facet==="super"){let X=null;if(H&&(X=H[0],X=B.filter(X,P,z),X.length===0))continue;const tt=B.render(X,m,z,_,x);if(tt==null)continue;k.appendChild(tt)}else{let X;for(const tt of p){if(!(((C=B.facetAnchor)==null?void 0:C.call(B,p,D,tt))??!tt.empty))continue;let Z=null;if(H){const Q=f.has(B);if(Z=H[Q?tt.i:0],Z=B.filter(Z,P,z),Z.length===0)continue;!Q&&Z===H[0]&&(Z=Xl(Z)),Z.fx=tt.x,Z.fy=tt.y,Z.fi=tt.i}const Y=B.render(Z,m,z,S,x);if(Y!=null){(X??(X=me(k).append("g"))).append(()=>Y).datum(tt);for(const Q of["aria-label","aria-description","aria-hidden","transform"])Y.hasAttribute(Q)&&(X.attr(Q,Y.getAttribute(Q)),Y.removeAttribute(Q))}}X==null||X.selectChildren().attr("transform",L)}}const N=kot(v,x,e),{figure:F=r!=null||i!=null||s!=null||N.length>0}=e;F&&(I=E.createElement("figure"),I.className=`${l}-figure`,I.style.maxWidth="initial",r!=null&&I.append(K$(E,r,"h2")),i!=null&&I.append(K$(E,i,"h3")),I.append(...N,k),s!=null&&I.append(zot(E,s))),I.scale=kst(m.scales),I.legend=Mot(v,x,e);const O=$it();return O>0&&me(k).append("text").attr("x",T).attr("y",20).attr("dy","-1em").attr("text-anchor","end").attr("font-family","initial").text("").append("title").text(`${O.toLocaleString("en-US")} warning${O===1?"":"s"}. Please check the console.`),I}function K$(e,t,n){if(t.ownerDocument)return t;const r=e.createElement(n);return r.append(t),r}function zot(e,t){const n=e.createElement("figcaption");return n.append(t),n}function jot({marks:e=[],...t}={}){return AT({...t,marks:[...e,this]})}we.prototype.plot=jot;function Z$(e){return e.flat(1/0).filter(t=>t!=null).map(Vot)}function Vot(e){return typeof e.render=="function"?e:new Yot(e)}class Yot extends we{constructor(t){if(typeof t!="function")throw new TypeError("invalid mark; missing render function");super(),this.render=t}render(){}}function MT(e,t){for(const n in e)t7(e[n],t);return e}function t7(e,t){const{scale:n,transform:r=!0}=e;if(n==null||!r)return;const{type:i,percent:s,interval:o,transform:a=s?l=>l*100:cC(o,i)}=t[n]??{};a!=null&&(e.value=xe(e.value,a),e.transform=!1)}function qot(e){for(const t in e)vC(t,e[t])}function Dd(e,t,n,r=zrt){var i,s;for(const{channels:o}of t.values())for(const a in o){const l=o[a],{scale:c}=l;if(c!=null&&r(c))if(c==="projection"){if(!jit(n)){const u=((i=n.x)==null?void 0:i.domain)===void 0,f=((s=n.y)==null?void 0:s.domain)===void 0;if(u||f){const[d,h]=Yit(l);u&&I_(e,"x",d),f&&I_(e,"y",h)}}}else I_(e,c,l)}return e}function I_(e,t,n){const r=e.get(t);r!==void 0?r.push(n):e.set(t,[n])}function Wot(e,t){if(e==null)return;const{x:n,y:r}=e;if(n==null&&r==null)return;const i=Sr(e.data);if(i==null)throw new Error("missing facet data");const s={};n!=null&&(s.fx=Ip(i,{value:n,scale:"fx"})),r!=null&&(s.fy=Ip(i,{value:r,scale:"fy"})),MT(s,t);const o=yT(i,s);return{channels:s,groups:o,data:e.data}}function J$(e,t,n){var l;if(e.facet===null||e.facet==="super")return;const{fx:r,fy:i}=e;if(r!=null||i!=null){const c=Sr(e.data??r??i);if(c===void 0)throw new Error(`missing facet data in ${e.ariaLabel}`);if(c===null)return;const u={};return r!=null&&(u.fx=Ip(c,{value:r,scale:"fx"})),i!=null&&(u.fy=Ip(c,{value:i,scale:"fy"})),MT(u,n),{channels:u,groups:yT(c,u)}}if(t===void 0)return;const{channels:s,groups:o,data:a}=t;if(e.facet!=="auto"||e.data===a)return{channels:s,groups:o};a.length>0&&(o.size>1||o.size===1&&s.fx&&s.fy&&[...o][0][1].size>1)&&((l=Sr(e.data))==null?void 0:l.length)===a.length&&Io(`Warning: the ${e.ariaLabel} mark appears to use faceted data, but isnt faceted. The mark data has the same length as the facet data and the mark facet option is "auto", but the mark data and facet data are distinct. If this mark should be faceted, set the mark facet option to true; otherwise, suppress this warning by setting the mark facet option to false.`)}function Hot(e,t={}){return xr({...t,x:null,y:null},(n,r,i,s,o,a)=>a.getMarkState(e))}function Got(e){const t=[];for(const n of e){let r=n.tip;if(r){r===!0?r={}:typeof r=="string"&&(r={pointer:r});let{pointer:i}=r;i=/^x$/i.test(i)?bT:/^y$/i.test(i)?vT:gT,r=i(Hot(n,r)),r.title=null;const s=J5(n.data,r);s.facet=n.facet,s.facetAnchor=n.facetAnchor,t.push(s)}}return t}function Xot(e,t,n){let{projection:r,x:i={},y:s={},fx:o={},fy:a={},axis:l,grid:c,facet:u={},facet:{axis:f=l,grid:d}=u,x:{axis:h=l,grid:p=h===null?null:c}=i,y:{axis:g=l,grid:v=g===null?null:c}=s,fx:{axis:y=f,grid:m=y===null?null:d}=o,fy:{axis:b=f,grid:w=b===null?null:d}=a}=n;(r||!Gl(i)&&!tN("x",e))&&(h=p=null),(r||!Gl(s)&&!tN("y",e))&&(g=v=null),t.has("fx")||(y=m=null),t.has("fy")||(b=w=null),h===void 0&&(h=!$0(e,"x")),g===void 0&&(g=!$0(e,"y")),y===void 0&&(y=!$0(e,"fx")),b===void 0&&(b=!$0(e,"fy")),h===!0&&(h="bottom"),g===!0&&(g="left"),y===!0&&(y=h==="top"||h===null?"bottom":"top"),b===!0&&(b=g==="right"||g===null?"left":"right");const S=[];return M0(S,w,R5,a),A0(S,b,D5,"right","left",u,a),M0(S,m,U5,o),A0(S,y,O5,"top","bottom",u,o),M0(S,v,L5,s),A0(S,g,ST,"left","right",n,s),M0(S,p,C5,i),A0(S,h,xT,"bottom","top",n,i),S}function A0(e,t,n,r,i,s,o){if(!t)return;const a=Qot(t);o=Kot(a?r:t,s,o);const{line:l}=o;(n===ST||n===xT)&&l&&!Mf(l)&&e.push(ET(Zot(o))),e.push(n(o)),a&&e.push(n({...o,anchor:i,label:null}))}function M0(e,t,n,r){!t||Mf(t)||e.push(n(Jot(t,r)))}function Qot(e){return/^\s*both\s*$/i.test(e)}function Kot(e,t,{line:n=t.line,ticks:r,tickSize:i,tickSpacing:s,tickPadding:o,tickFormat:a,tickRotate:l,fontVariant:c,ariaLabel:u,ariaDescription:f,label:d=t.label,labelAnchor:h,labelArrow:p=t.labelArrow,labelOffset:g}){return{anchor:e,line:n,ticks:r,tickSize:i,tickSpacing:s,tickPadding:o,tickFormat:a,tickRotate:l,fontVariant:c,ariaLabel:u,ariaDescription:f,label:d,labelAnchor:h,labelArrow:p,labelOffset:g}}function Zot(e){const{anchor:t,line:n}=e;return{anchor:t,facetAnchor:t+"-empty",stroke:n===!0?void 0:n}}function Jot(e,{stroke:t=by(e)?e:void 0,ticks:n=tat(e)?e:void 0,tickSpacing:r,ariaLabel:i,ariaDescription:s}){return{stroke:t,ticks:n,tickSpacing:r,ariaLabel:i,ariaDescription:s}}function tat(e){switch(typeof e){case"number":return!0;case"string":return!by(e)}return jo(e)||typeof(e==null?void 0:e.range)=="function"}function $0(e,t){const n=`${t}-axis `;return e.some(r=>{var i;return(i=r.ariaLabel)==null?void 0:i.startsWith(n)})}function tN(e,t){for(const n of t)for(const r in n.channels){const{scale:i}=n.channels[r];if(i===e||i==="projection")return!0}return!1}function eat(e,t){for(const n in e){const r=e[n],i=t[n];r.label===void 0&&i&&(r.label=i.label)}return e}function nat({fx:e,fy:t},n){const{marginTop:r,marginRight:i,marginBottom:s,marginLeft:o,width:a,height:l}=pT(n),c=e&&eN(e),u=t&&eN(t);return{marginTop:t?u[0]:r,marginRight:e?a-c[1]:i,marginBottom:t?l-u[1]:s,marginLeft:e?c[0]:o,inset:{marginTop:n.marginTop,marginRight:n.marginRight,marginBottom:n.marginBottom,marginLeft:n.marginLeft},width:a,height:l}}function eN(e){const t=e.domain();let n=e(t[0]),r=e(t[t.length-1]);return r<n&&([n,r]=[r,n]),[n,r+e.bandwidth()]}const rat=new Map([["basis",frt],["basis-closed",drt],["basis-open",hrt],["bundle",prt],["bump-x",trt],["bump-y",ert],["cardinal",yrt],["cardinal-closed",mrt],["cardinal-open",grt],["catmull-rom",brt],["catmull-rom-closed",vrt],["catmull-rom-open",wrt],["linear",py],["linear-closed",_rt],["monotone-x",Srt],["monotone-y",xrt],["natural",Irt],["step",Trt],["step-after",Art],["step-before",Ert]]);function $T(e=py,t){if(typeof e=="function")return e;const n=rat.get(`${e}`.toLowerCase());if(!n)throw new Error(`unknown curve: ${e}`);if(t!==void 0){if("beta"in n)return n.beta(t);if("tension"in n)return n.tension(t);if("alpha"in n)return n.alpha(t)}return n}function e7(e=Df,t){return typeof e!="function"&&`${e}`.toLowerCase()==="auto"?Df:$T(e,t)}function Df(e){return py(e)}function fa(e={y:"count"},t={}){[e,t]=OT(e,t);const{x:n,y:r}=t;return DT(N1(n,t,_t),null,null,r,e,Ey(t))}function da(e={x:"count"},t={}){[e,t]=OT(e,t);const{x:n,y:r}=t;return DT(null,N1(r,t,_t),n,null,e,Ay(t))}function $l(e={fill:"count"},t={}){[e,t]=OT(e,t);const{x:n,y:r}=iat(t);return DT(n,r,null,null,e,Ey(Ay(t)))}function n7(e,t,n={}){if((n==null?void 0:n.interval)==null)return n;const{reduce:r=sT}=n,i={filter:null};return n[t]!=null&&(i[t]=r),n[`${t}1`]!=null&&(i[`${t}1`]=r),n[`${t}2`]!=null&&(i[`${t}2`]=r),e(i,n)}function NT(e={}){return n7(fa,"y",td(e,"x"))}function kT(e={}){return n7(da,"x",td(e,"y"))}function DT(e,t,n,r,{data:i=iT,filter:s=T1,sort:o,reverse:a,...l}={},c={}){e=nN(e),t=nN(t),l=sat(l,c),i=o7(i,_t),o=o==null?void 0:i7("sort",o,c),s=s==null?void 0:s7("filter",s,c),n!=null&&ya(l,"x","x1","x2")&&(n=null),r!=null&&ya(l,"y","y1","y2")&&(r=null);const[u,f]=sr(e),[d,h]=sr(e),[p,g]=sr(t),[v,y]=sr(t),[m,b]=n!=null?[n,"x"]:r!=null?[r,"y"]:[],[w,S]=sr(m),{x:_,y:x,z:E,fill:k,stroke:I,x1:A,x2:D,y1:L,y2:T,domain:M,cumulative:N,thresholds:F,interval:O,...C}=c,[B,P]=sr(E),[z]=_r(k),[H]=_r(I),[X,tt]=sr(z),[Z,Y]=sr(H);return{..."z"in c&&{z:B||E},..."fill"in c&&{fill:X||k},..."stroke"in c&&{stroke:Z||I},...Ps(C,(Q,V,J)=>{const et=I1(Pt(Q,m),J==null?void 0:J[b]),j=Pt(Q,E),At=Pt(Q,z),at=Pt(Q,H),qt=rT(l,{z:j,fill:At,stroke:at}),Ht=[],st=[],pe=et&&S([]),Ji=j&&P([]),Wr=At&&tt([]),Qv=at&&Y([]),zE=e&&f([]),vz=e&&h([]),jE=t&&g([]),wz=t&&y([]),_z=lat(e==null?void 0:e(Q),t==null?void 0:t(Q));let Sz=0;for(const Ac of l)Ac.initialize(Q);o&&o.initialize(Q),s&&s.initialize(Q);for(const Ac of V){const VE=[];for(const hd of l)hd.scope("facet",Ac);o&&o.scope("facet",Ac),s&&s.scope("facet",Ac);for(const[hd,xz]of Wu(Ac,qt))for(const[Iz,Cy]of Wu(xz,et))for(const[ts,ul]of _z(Cy))if(!(s&&!s.reduce(ts,ul))){VE.push(Sz++),st.push(i.reduceIndex(ts,Q,ul)),et&&pe.push(Iz),j&&Ji.push(qt===j?hd:j[(ts.length>0?ts:Cy)[0]]),At&&Wr.push(qt===At?hd:At[(ts.length>0?ts:Cy)[0]]),at&&Qv.push(qt===at?hd:at[(ts.length>0?ts:Cy)[0]]),zE&&(zE.push(ul.x1),vz.push(ul.x2)),jE&&(jE.push(ul.y1),wz.push(ul.y2));for(const Tz of l)Tz.reduce(ts,ul);o&&o.reduce(ts)}Ht.push(VE)}return gC(Ht,o,a),{data:st,facets:Ht}}),...!ya(l,"x")&&(u?{x1:u,x2:d,x:x1(u,d)}:{x:_,x1:A,x2:D}),...!ya(l,"y")&&(p?{y1:p,y2:v,y:x1(p,v)}:{y:x,y1:L,y2:T}),...w&&{[b]:w},...Object.fromEntries(l.map(({name:Q,output:V})=>[Q,V]))}}function OT({cumulative:e,domain:t,thresholds:n,interval:r,...i},s){return[i,{cumulative:e,domain:t,thresholds:n,interval:r,...s}]}function N1(e,{cumulative:t,domain:n,thresholds:r,interval:i},s){return e={...gy(e)},e.domain===void 0&&(e.domain=n),e.cumulative===void 0&&(e.cumulative=t),e.thresholds===void 0&&(e.thresholds=r),e.interval===void 0&&(e.interval=i),e.value===void 0&&(e.value=s),e.thresholds=r7(e.thresholds,e.interval),e}function iat(e){let{x:t,y:n}=e;return t=N1(t,e),n=N1(n,e),[t.value,n.value]=Ki(t.value,n.value),{x:t,y:n}}function nN(e){if(e==null)return;const{value:t,cumulative:n,domain:r=gn,thresholds:i}=e,s=o=>{let a=Pt(o,t),l;if(tr(a)||aat(i)){a=xe(a,rC,Float64Array);let[u,f]=typeof r=="function"?r(a):r,d=typeof i=="function"&&!Eu(i)?i(a,u,f):i;typeof d=="number"&&(d=nL(u,f,d)),Eu(d)&&(r===gn&&(u=d.floor(u),f=d.offset(d.floor(f))),d=d.range(u,d.offset(f))),l=d}else{a=fr(a);let[u,f]=typeof r=="function"?r(a):r,d=typeof i=="function"&&!Eu(i)?i(a,u,f):i;if(typeof d=="number")if(r===gn){let h=cp(u,f,d);if(isFinite(h))if(h>0){let p=Math.round(u/h),g=Math.round(f/h);p*h<=u||--p,g*h>f||++g;let v=g-p+1;d=new Float64Array(v);for(let y=0;y<v;++y)d[y]=(p+y)*h}else if(h<0){h=-h;let p=Math.round(u*h),g=Math.round(f*h);p/h<=u||--p,g/h>f||++g;let v=g-p+1;d=new Float64Array(v);for(let y=0;y<v;++y)d[y]=(p+y)/h}else d=[u];else d=[u]}else d=Fa(u,f,d);else Eu(d)&&(r===gn&&(u=d.floor(u),f=d.offset(d.floor(f))),d=d.range(u,d.offset(f)));l=d}const c=[];if(l.length===1)c.push([l[0],l[0]]);else for(let u=1;u<l.length;++u)c.push([l[u-1],l[u]]);return c.bin=(n<0?uat:n>0?cat:BT)(c,l,a),c};return s.label=zo(t),s}function r7(e,t,n=rN){if(e===void 0)return t===void 0?n:Jf(t);if(typeof e=="string"){switch(e.toLowerCase()){case"freedman-diaconis":return UG;case"scott":return sB;case"sturges":return o3;case"auto":return rN}return U3(e)}return e}function sat(e,t){return tT(e,t,i7)}function i7(e,t,n){return eT(e,t,n,s7)}function s7(e,t,n){return nT(e,t,n,o7)}function o7(e,t){return Sv(e,t,oat)}function oat(e){switch(`${e}`.toLowerCase()){case"x":return fat;case"x1":return hat;case"x2":return pat;case"y":return dat;case"y1":return yat;case"y2":return mat}throw new Error(`invalid bin reduce: ${e}`)}function rN(e,t,n){return Math.min(200,sB(e,t,n))}function aat(e){return qrt(e)||jo(e)&&tr(e)}function lat(e,t){return e&&t?function*(n){const r=e.bin(n);for(const[i,[s,o]]of e.entries()){const a=t.bin(r[i]);for(const[l,[c,u]]of t.entries())yield[a[l],{x1:s,y1:c,x2:o,y2:u}]}}:e?function*(n){const r=e.bin(n);for(const[i,[s,o]]of e.entries())yield[r[i],{x1:s,x2:o}]}:function*(n){const r=t.bin(n);for(const[i,[s,o]]of t.entries())yield[r[i],{y1:s,y2:o}]}}function BT(e,t,n){return t=fr(t),r=>{var s;const i=e.map(()=>[]);for(const o of r)(s=i[jb(t,n[o])-1])==null||s.push(o);return i}}function cat(e,t,n){const r=BT(e,t,n);return i=>{const s=r(i);for(let o=1,a=s.length;o<a;++o){const l=s[o-1],c=s[o];for(const u of l)c.push(u)}return s}}function uat(e,t,n){const r=BT(e,t,n);return i=>{const s=r(i);for(let o=s.length-2;o>=0;--o){const a=s[o+1],l=s[o];for(const c of a)l.push(c)}return s}}function a7(e,t){const n=(+e+ +t)/2;return e instanceof Date?new Date(n):n}const fat={reduceIndex(e,t,{x1:n,x2:r}){return a7(n,r)}},dat={reduceIndex(e,t,{y1:n,y2:r}){return a7(n,r)}},hat={reduceIndex(e,t,{x1:n}){return n}},pat={reduceIndex(e,t,{x2:n}){return n}},yat={reduceIndex(e,t,{y1:n}){return n}},mat={reduceIndex(e,t,{y2:n}){return n}};function FT(e={}){return sC(e)?e:{...e,x:_t}}function LT(e={}){return oC(e)?e:{...e,y:_t}}function gat(e,t){if(t.length===1)return{data:e,facets:t};const n=e.length,r=new Uint8Array(n);let i=0;for(const a of t)for(const l of a)r[l]&&++i,r[l]=1;if(i===0)return{data:e,facets:t};e=_p(e);const s=e[eC]=new Uint32Array(n+i);t=t.map(a=>_p(a,Uint32Array));let o=n;r.fill(0);for(const a of t)for(let l=0,c=a.length;l<c;++l){const u=a[l];r[u]?(a[l]=o,e[o]=e[u],s[o]=u,++o):s[u]=u,r[u]=1}return{data:e,facets:t}}function l7(e={},t={}){arguments.length===1&&([e,t]=id(e));const{y1:n,y:r=n,x:i,...s}=t,[o,a,l,c]=sd(r,i,"y","x",e,s);return{...o,y1:n,y:a,x1:l,x2:c,x:x1(l,c)}}function bat(e={},t={}){arguments.length===1&&([e,t]=id(e));const{y1:n,y:r=n,x:i}=t,[s,o,a]=sd(r,i,"y","x",e,t);return{...s,y1:n,y:o,x:a}}function vat(e={},t={}){arguments.length===1&&([e,t]=id(e));const{y1:n,y:r=n,x:i}=t,[s,o,,a]=sd(r,i,"y","x",e,t);return{...s,y1:n,y:o,x:a}}function c7(e={},t={}){arguments.length===1&&([e,t]=id(e));const{x1:n,x:r=n,y:i,...s}=t,[o,a,l,c]=sd(r,i,"x","y",e,s);return{...o,x1:n,x:a,y1:l,y2:c,y:x1(l,c)}}function wat(e={},t={}){arguments.length===1&&([e,t]=id(e));const{x1:n,x:r=n,y:i}=t,[s,o,a]=sd(r,i,"x","y",e,t);return{...s,x1:n,x:o,y:a}}function _at(e={},t={}){arguments.length===1&&([e,t]=id(e));const{x1:n,x:r=n,y:i}=t,[s,o,,a]=sd(r,i,"x","y",e,t);return{...s,x1:n,x:o,y:a}}function RT({x:e,x1:t,x2:n,...r}={}){return r=td(r,"y"),t===void 0&&n===void 0?l7({x:e,...r}):([t,n]=aC(e,t,n),{...r,x1:t,x2:n})}function CT({y:e,y1:t,y2:n,...r}={}){return r=td(r,"x"),t===void 0&&n===void 0?c7({y:e,...r}):([t,n]=aC(e,t,n),{...r,y1:t,y2:n})}function id(e){const{offset:t,order:n,reverse:r,...i}=e;return[{offset:t,order:n,reverse:r},i]}const Sat={length:!0};function sd(e,t=P3,n,r,{offset:i,order:s,reverse:o},a){if(t===null)throw new Error(`stack requires ${r}`);const l=il(a),[c,u]=sr(e),[f,d]=Br(t),[h,p]=Br(t);return f.hint=h.hint=Sat,i=xat(i),s=Eat(s,i,r),[Ps(a,(g,v,y)=>{({data:g,facets:v}=gat(g,v));const m=e==null?void 0:u(I1(Pt(g,e),y==null?void 0:y[n])),b=Pt(g,t,Float64Array),w=Pt(g,l),S=s&&s(g,m,b,w),_=g.length,x=d(new Float64Array(_)),E=p(new Float64Array(_)),k=[];for(const I of v){const A=m?Array.from(Uo(I,D=>m[D]).values()):[I];if(S)for(const D of A)D.sort(S);for(const D of A){let L=0,T=0;o&&D.reverse();for(const M of D){const N=b[M];N<0?L=E[M]=(x[M]=L)+N:N>0?T=E[M]=(x[M]=T)+N:E[M]=x[M]=T}}k.push(A)}return i&&i(k,x,E,w),{data:g,facets:v}}),c,f,h]}function xat(e){if(e!=null){if(typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"expand":case"normalize":return Iat;case"center":case"silhouette":return Tat;case"wiggle":return f7}throw new Error(`unknown offset: ${e}`)}}function u7(e,t){let n=0,r=0;for(const i of e){const s=t[i];s<n&&(n=s),s>r&&(r=s)}return[n,r]}function Iat(e,t,n){for(const r of e)for(const i of r){const[s,o]=u7(i,n);for(const a of i){const l=1/(o-s||1);t[a]=l*(t[a]-s),n[a]=l*(n[a]-s)}}}function Tat(e,t,n){for(const r of e){for(const i of r){const[s,o]=u7(i,n);for(const a of i){const l=(o+s)/2;t[a]-=l,n[a]-=l}}d7(r,t,n)}h7(e,t,n)}function f7(e,t,n,r){for(const i of e){const s=new lc;let o=0;for(const a of i){let l=-1;const c=a.map(h=>Math.abs(n[h]-t[h])),u=a.map(h=>{l=r?r[h]:++l;const p=n[h]-t[h],g=s.has(l)?p-s.get(l):0;return s.set(l,p),g}),f=[0,...NG(u)];for(const h of a)t[h]+=o,n[h]+=o;const d=Bs(c);d&&(o-=Bs(c,(h,p)=>(u[p]/2+f[p])*h)/d)}d7(i,t,n)}h7(e,t,n)}function d7(e,t,n){const r=wn(e,i=>wn(i,s=>t[s]));for(const i of e)for(const s of i)t[s]-=r,n[s]-=r}function h7(e,t,n){const r=e.length;if(r===1)return;const i=e.map(a=>a.flat()),s=i.map(a=>(wn(a,l=>t[l])+Ne(a,l=>n[l]))/2),o=wn(s);for(let a=0;a<r;a++){const l=o-s[a];for(const c of i[a])t[c]+=l,n[c]+=l}}function Eat(e,t,n){if(e===void 0&&t===f7)return iN(vi);if(e!=null){if(typeof e=="string"){const r=e.startsWith("-"),i=r?_1:vi;switch((r?e.slice(1):e).toLowerCase()){case"value":case n:return Aat(i);case"z":return Mat(i);case"sum":return $at(i);case"appearance":return Nat(i);case"inside-out":return iN(i)}return sN(nC(e))}if(typeof e=="function")return(e.length===1?sN:kat)(e);if(Array.isArray(e))return Dat(e);throw new Error(`invalid order: ${e}`)}}function Aat(e){return(t,n,r)=>(i,s)=>e(r[i],r[s])}function Mat(e){return(t,n,r,i)=>(s,o)=>e(i[s],i[o])}function $at(e){return Ov(e,(t,n,r,i)=>s3(Po(t),s=>Bs(s,o=>r[o]),s=>i[s]))}function Nat(e){return Ov(e,(t,n,r,i)=>s3(Po(t),s=>n[a3(s,o=>r[o])],s=>i[s]))}function iN(e){return Ov(e,(t,n,r,i)=>{const s=Po(t),o=s3(s,f=>n[a3(f,d=>r[d])],f=>i[f]),a=ju(s,f=>Bs(f,d=>r[d]),f=>i[f]),l=[],c=[];let u=0;for(const f of o)u<0?(u+=a.get(f),l.push(f)):(u-=a.get(f),c.push(f));return c.reverse().concat(l)})}function sN(e){return t=>{const n=Pt(t,e);return(r,i)=>vi(n[r],n[i])}}function kat(e){return t=>(n,r)=>e(t[n],t[r])}function Dat(e){return Ov(vi,()=>e)}function Ov(e,t){return(n,r,i,s)=>{if(!s)throw new Error("missing channel: z");const o=new lc(t(n,r,i,s).map((a,l)=>[a,l]));return(a,l)=>e(o.get(s[a]),o.get(s[l]))}}const Oat={ariaLabel:"area",strokeWidth:1,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class Bv extends we{constructor(t,n={}){const{x1:r,y1:i,x2:s,y2:o,z:a,curve:l,tension:c}=n;super(t,{x1:{value:r,scale:"x"},y1:{value:i,scale:"y"},x2:{value:s,scale:"x",optional:!0},y2:{value:o,scale:"y",optional:!0},z:{value:il(n),optional:!0}},n,Oat),this.z=a,this.curve=$T(l,c)}filter(t){return t}render(t,n,r,i,s){const{x1:o,y1:a,x2:l=o,y2:c=a}=r;return re("svg:g",s).call(ke,this,i,s).call(ve,this,n,0,0).call(u=>u.selectAll().data(IC(t,[o,a,l,c],this,r)).enter().append("path").call(Ae,this).call(E1,this,r).attr("d",D3().curve(this.curve).defined(f=>f>=0).x0(f=>o[f]).y0(f=>a[f]).x1(f=>l[f]).y1(f=>c[f]))).node()}}function Bat(e,t){return t===void 0?Of(e,{x:my,y:wp}):new Bv(e,t)}function Ep(e,t){const{y:n=Ar,...r}=kT(t);return new Bv(e,RT(FT({...r,y1:n,y2:void 0})))}function Of(e,t){const{x:n=Ar,...r}=NT(t);return new Bv(e,CT(LT({...r,x1:n,x2:void 0})))}const Fat={ariaLabel:"link",fill:"none",stroke:"currentColor",strokeMiterlimit:1};class p7 extends we{constructor(t,n={}){const{x1:r,y1:i,x2:s,y2:o,curve:a,tension:l}=n;super(t,{x1:{value:r,scale:"x"},y1:{value:i,scale:"y"},x2:{value:s,scale:"x",optional:!0},y2:{value:o,scale:"y",optional:!0}},n,Fat),this.curve=e7(a,l),ed(this,n)}project(t,n,r){this.curve!==Df&&super.project(t,n,r)}render(t,n,r,i,s){const{x1:o,y1:a,x2:l=o,y2:c=a}=r,{curve:u}=this;return re("svg:g",s).call(ke,this,i,s).call(ve,this,n).call(f=>f.selectAll().data(t).enter().append("path").call(Ae,this).attr("d",u===Df&&s.projection?Lat(s.projection,o,a,l,c):d=>{const h=go(),p=u(h);return p.lineStart(),p.point(o[d],a[d]),p.point(l[d],c[d]),p.lineEnd(),h}).call(hn,this,r).call(Ty,this,r,s)).node()}}function Lat(e,t,n,r,i){const s=nl(e);return t=fr(t),n=fr(n),r=fr(r),i=fr(i),o=>s({type:"LineString",coordinates:[[t[o],n[o]],[r[o],i[o]]]})}function y7(e,{x:t,x1:n,x2:r,y:i,y1:s,y2:o,...a}={}){return[n,r]=k1(t,n,r),[s,o]=k1(i,s,o),new p7(e,{...a,x1:n,x2:r,y1:s,y2:o})}function k1(e,t,n){if(e===void 0){if(t===void 0){if(n!==void 0)return[n]}else if(n===void 0)return[t]}else{if(t===void 0)return n===void 0?[e]:[e,n];if(n===void 0)return[e,t]}return[t,n]}const Rat={ariaLabel:"arrow",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeMiterlimit:1,strokeWidth:1.5};class m7 extends we{constructor(t,n={}){const{x1:r,y1:i,x2:s,y2:o,bend:a=0,headAngle:l=60,headLength:c=8,inset:u=0,insetStart:f=u,insetEnd:d=u,sweep:h}=n;super(t,{x1:{value:r,scale:"x"},y1:{value:i,scale:"y"},x2:{value:s,scale:"x",optional:!0},y2:{value:o,scale:"y",optional:!0}},n,Rat),this.bend=a===!0?22.5:Math.max(-90,Math.min(90,a)),this.headAngle=+l,this.headLength=+c,this.insetStart=+f,this.insetEnd=+d,this.sweep=Cat(h)}render(t,n,r,i,s){const{x1:o,y1:a,x2:l=o,y2:c=a,SW:u}=r,{strokeWidth:f,bend:d,headAngle:h,headLength:p,insetStart:g,insetEnd:v}=this,y=u?w=>u[w]:zr(f===void 0?1:f),m=h*A1/2,b=p/1.5;return re("svg:g",s).call(ke,this,i,s).call(ve,this,n).call(w=>w.selectAll().data(t).enter().append("path").call(Ae,this).attr("d",S=>{let _=o[S],x=a[S],E=l[S],k=c[S];const I=Math.hypot(E-_,k-x);if(I<=g+v)return null;let A=Math.atan2(k-x,E-_);const D=Math.min(b*y(S),I/3),L=this.sweep(_,x,E,k)*d*A1,T=Math.hypot(I/Math.tan(L),I)/2;if(g||v)if(T<1e5){const X=Math.sign(L),[tt,Z]=Uat([_,x],[E,k],T,X);if(g&&([_,x]=oN([tt,Z,T],[_,x,g],-X*Math.sign(g))),v){const[Y,Q]=oN([tt,Z,T],[E,k,v],X*Math.sign(v));A+=Math.atan2(Q-Z,Y-tt)-Math.atan2(k-Z,E-tt),E=Y,k=Q}}else{const X=E-_,tt=k-x,Z=Math.hypot(X,tt);g&&(_+=X/Z*g,x+=tt/Z*g),v&&(E-=X/Z*v,k-=tt/Z*v)}const M=A+L,N=M+m,F=M-m,O=E-D*Math.cos(N),C=k-D*Math.sin(N),B=E-D*Math.cos(F),P=k-D*Math.sin(F),z=T<1e5?`A${T},${T} 0,0,${L>0?1:0} `:"L",H=D?`M${O},${C}L${E},${k}L${B},${P}`:"";return`M${_},${x}${z}${E},${k}${H}`}).call(hn,this,r)).node()}}function Cat(e=1){if(typeof e=="number")return zr(Math.sign(e));if(typeof e=="function")return(t,n,r,i)=>Math.sign(e(t,n,r,i));switch(qr(e,"sweep",["+x","-x","+y","-y"])){case"+x":return(t,n,r)=>ze(t,r);case"-x":return(t,n,r)=>ac(t,r);case"+y":return(t,n,r,i)=>ze(n,i);case"-y":return(t,n,r,i)=>ac(n,i)}}function Uat([e,t],[n,r],i,s){const o=n-e,a=r-t,l=Math.hypot(o,a),c=s*Math.sqrt(i*i-l*l/4)/l;return[(e+n)/2-a*c,(t+r)/2+o*c]}function oN([e,t,n],[r,i,s],o){const a=r-e,l=i-t,c=Math.hypot(a,l),u=(a*a+l*l-s*s+n*n)/(2*c),f=o*Math.sqrt(n*n-u*u);return[e+(a*u+l*f)/c,t+(l*u-a*f)/c]}function Pat(e,{x:t,x1:n,x2:r,y:i,y1:s,y2:o,...a}={}){return[n,r]=k1(t,n,r),[s,o]=k1(i,s,o),new m7(e,{...a,x1:n,x2:r,y1:s,y2:o})}class UT extends we{constructor(t,n,r={},i){super(t,n,r,i);const{inset:s=0,insetTop:o=s,insetRight:a=s,insetBottom:l=s,insetLeft:c=s,rx:u,ry:f}=r;this.insetTop=Yt(o),this.insetRight=Yt(a),this.insetBottom=Yt(l),this.insetLeft=Yt(c),this.rx=qe(u,"auto"),this.ry=qe(f,"auto")}render(t,n,r,i,s){const{rx:o,ry:a}=this;return re("svg:g",s).call(ke,this,i,s).call(this._transform,this,n).call(l=>l.selectAll().data(t).enter().append("rect").call(Ae,this).attr("x",this._x(n,r,i)).attr("width",this._width(n,r,i)).attr("y",this._y(n,r,i)).attr("height",this._height(n,r,i)).call(pt,"rx",o).call(pt,"ry",a).call(hn,this,r)).node()}_x(t,{x:n},{marginLeft:r}){const{insetLeft:i}=this;return n?s=>n[s]+i:r+i}_y(t,{y:n},{marginTop:r}){const{insetTop:i}=this;return n?s=>n[s]+i:r+i}_width({x:t},{x:n},{marginRight:r,marginLeft:i,width:s}){const{insetLeft:o,insetRight:a}=this,l=n&&t?t.bandwidth():s-r-i;return Math.max(0,l-o-a)}_height({y:t},{y:n},{marginTop:r,marginBottom:i,height:s}){const{insetTop:o,insetBottom:a}=this,l=n&&t?t.bandwidth():s-r-i;return Math.max(0,l-o-a)}}const g7={ariaLabel:"bar"};class b7 extends UT{constructor(t,n={}){const{x1:r,x2:i,y:s}=n;super(t,{x1:{value:r,scale:"x"},x2:{value:i,scale:"x"},y:{value:s,scale:"y",type:"band",optional:!0}},n,g7)}_transform(t,n,{x:r}){t.call(ve,n,{x:r},0,0)}_x({x:t},{x1:n,x2:r},{marginLeft:i}){const{insetLeft:s}=this;return fi(t)?i+s:o=>Math.min(n[o],r[o])+s}_width({x:t},{x1:n,x2:r},{marginRight:i,marginLeft:s,width:o}){const{insetLeft:a,insetRight:l}=this;return fi(t)?o-i-s-a-l:c=>Math.max(0,Math.abs(r[c]-n[c])-a-l)}}class v7 extends UT{constructor(t,n={}){const{x:r,y1:i,y2:s}=n;super(t,{y1:{value:i,scale:"y"},y2:{value:s,scale:"y"},x:{value:r,scale:"x",type:"band",optional:!0}},n,g7)}_transform(t,n,{y:r}){t.call(ve,n,{y:r},0,0)}_y({y:t},{y1:n,y2:r},{marginTop:i}){const{insetTop:s}=this;return fi(t)?i+s:o=>Math.min(n[o],r[o])+s}_height({y:t},{y1:n,y2:r},{marginTop:i,marginBottom:s,height:o}){const{insetTop:a,insetBottom:l}=this;return fi(t)?o-i-s-a-l:c=>Math.max(0,Math.abs(r[c]-n[c])-a-l)}}function Ul(e,t={}){return gv(t)||(t={...t,y:Ar,x2:_t}),new b7(e,RT(i5(FT(t))))}function Pl(e,t={}){return gv(t)||(t={...t,x:Ar,y2:_t}),new v7(e,CT(s5(LT(t))))}const zat={ariaLabel:"cell"};class Fv extends UT{constructor(t,{x:n,y:r,...i}={}){super(t,{x:{value:n,scale:"x",type:"band",optional:!0},y:{value:r,scale:"y",type:"band",optional:!0}},i,zat)}_transform(t,n){t.call(ve,n,{},0,0)}}function Mu(e,{x:t,y:n,...r}={}){return[t,n]=Ki(t,n),new Fv(e,{...r,x:t,y:n})}function jat(e,{x:t=Ar,fill:n,stroke:r,...i}={}){return n===void 0&&_r(r)[0]===void 0&&(n=_t),new Fv(e,{...i,x:t,fill:n,stroke:r})}function Vat(e,{y:t=Ar,fill:n,stroke:r,...i}={}){return n===void 0&&_r(r)[0]===void 0&&(n=_t),new Fv(e,{...i,y:t,fill:n,stroke:r})}const Yat={ariaLabel:"dot",fill:"none",stroke:"currentColor",strokeWidth:1.5};function PT(e){return e.sort===void 0&&e.reverse===void 0?yC({channel:"-r"},e):e}class Lv extends we{constructor(t,n={}){const{x:r,y:i,r:s,rotate:o,symbol:a=vp,frameAnchor:l}=n,[c,u]=en(o,0),[f,d]=sit(a),[h,p]=en(s,f==null?3:4.5);super(t,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},r:{value:h,scale:"r",filter:xo,optional:!0},rotate:{value:c,optional:!0},symbol:{value:f,scale:"auto",optional:!0}},PT(n),Yat),this.r=p,this.rotate=u,this.symbol=d,this.frameAnchor=vy(l);const{channels:g}=this,{symbol:v}=g;if(v){const{fill:y,stroke:m}=g;v.hint={fill:y?y.value===v.value?"color":"currentColor":this.fill??"currentColor",stroke:m?m.value===v.value?"color":"currentColor":this.stroke??"none"}}}render(t,n,r,i,s){const{x:o,y:a}=n,{x:l,y:c,r:u,rotate:f,symbol:d}=r,{r:h,rotate:p,symbol:g}=this,[v,y]=zs(this,i),m=g===vp,b=u?void 0:h*h*Math.PI;return yv(h)&&(t=[]),re("svg:g",s).call(ke,this,i,s).call(ve,this,{x:l&&o,y:c&&a}).call(w=>w.selectAll().data(t).enter().append(m?"circle":"path").call(Ae,this).call(m?S=>{S.attr("cx",l?_=>l[_]:v).attr("cy",c?_=>c[_]:y).attr("r",u?_=>u[_]:h)}:S=>{S.attr("transform",$v`translate(${l?_=>l[_]:v},${c?_=>c[_]:y})${f?_=>` rotate(${f[_]})`:p?` rotate(${p})`:""}`).attr("d",u&&d?_=>{const x=go();return d[_].draw(x,u[_]*u[_]*Math.PI),x}:u?_=>{const x=go();return g.draw(x,u[_]*u[_]*Math.PI),x}:d?_=>{const x=go();return d[_].draw(x,b),x}:(()=>{const _=go();return g.draw(_,b),_})())}).call(hn,this,r)).node()}}function al(e,{x:t,y:n,...r}={}){return r.frameAnchor===void 0&&([t,n]=Ki(t,n)),new Lv(e,{...r,x:t,y:n})}function qat(e,{x:t=_t,...n}={}){return new Lv(e,a5({...n,x:t}))}function Wat(e,{y:t=_t,...n}={}){return new Lv(e,o5({...n,y:t}))}function Hat(e,t){return al(e,{...t,symbol:"circle"})}function Gat(e,t){return al(e,{...t,symbol:"hexagon"})}const Xat={ariaLabel:"line",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class Rv extends we{constructor(t,n={}){const{x:r,y:i,z:s,curve:o,tension:a}=n;super(t,{x:{value:r,scale:"x"},y:{value:i,scale:"y"},z:{value:il(n),optional:!0}},n,Xat),this.z=s,this.curve=e7(o,a),ed(this,n)}filter(t){return t}project(t,n,r){this.curve!==Df&&super.project(t,n,r)}render(t,n,r,i,s){const{x:o,y:a}=r,{curve:l}=this;return re("svg:g",s).call(ke,this,i,s).call(ve,this,n).call(c=>c.selectAll().data(IC(t,[o,a],this,r)).enter().append("path").call(Ae,this).call(E1,this,r).call(Zst,this,r,s).attr("d",l===Df&&s.projection?Qat(s.projection,o,a):IR().curve(l).defined(u=>u>=0).x(u=>o[u]).y(u=>a[u]))).node()}}function Qat(e,t,n){const r=nl(e);return t=fr(t),n=fr(n),i=>{let s=[];const o=[s];for(const a of i)a===-1?(s=[],o.push(s)):s.push([t[a],n[a]]);return r({type:"MultiLineString",coordinates:o})}}function zT(e,{x:t,y:n,...r}={}){return[t,n]=Ki(t,n),new Rv(e,{...r,x:t,y:n})}function Ap(e,{x:t=_t,y:n=Ar,...r}={}){return new Rv(e,kT({...r,x:t,y:n}))}function Mp(e,{x:t=Ar,y:n=_t,...r}={}){return new Rv(e,NT({...r,x:t,y:n}))}const Kat={ariaLabel:"rect"};class Cv extends we{constructor(t,n={}){const{x1:r,y1:i,x2:s,y2:o,inset:a=0,insetTop:l=a,insetRight:c=a,insetBottom:u=a,insetLeft:f=a,rx:d,ry:h}=n;super(t,{x1:{value:r,scale:"x",optional:!0},y1:{value:i,scale:"y",optional:!0},x2:{value:s,scale:"x",optional:!0},y2:{value:o,scale:"y",optional:!0}},n,Kat),this.insetTop=Yt(l),this.insetRight=Yt(c),this.insetBottom=Yt(u),this.insetLeft=Yt(f),this.rx=qe(d,"auto"),this.ry=qe(h,"auto")}render(t,n,r,i,s){const{x:o,y:a}=n,{x1:l,y1:c,x2:u,y2:f}=r,{marginTop:d,marginRight:h,marginBottom:p,marginLeft:g,width:v,height:y}=i,{projection:m}=s,{insetTop:b,insetRight:w,insetBottom:S,insetLeft:_,rx:x,ry:E}=this;return re("svg:g",s).call(ke,this,i,s).call(ve,this,{x:l&&u&&o,y:c&&f&&a},0,0).call(k=>k.selectAll().data(t).enter().append("rect").call(Ae,this).attr("x",l&&u&&(m||!fi(o))?I=>Math.min(l[I],u[I])+_:g+_).attr("y",c&&f&&(m||!fi(a))?I=>Math.min(c[I],f[I])+b:d+b).attr("width",l&&u&&(m||!fi(o))?I=>Math.max(0,Math.abs(u[I]-l[I])-_-w):v-h-g-w-_).attr("height",c&&f&&(m||!fi(a))?I=>Math.max(0,Math.abs(c[I]-f[I])-b-S):y-d-p-b-S).call(pt,"rx",x).call(pt,"ry",E).call(hn,this,r)).node()}}function jT(e,t){return new Cv(e,n5(r5(t)))}function D1(e,t={}){return gv(t)||(t={...t,y:Ar,x2:_t,interval:1}),new Cv(e,RT(r5(FT(t))))}function O1(e,t={}){return gv(t)||(t={...t,x:Ar,y2:_t,interval:1}),new Cv(e,CT(n5(LT(t))))}function w7(e,t){t=Jat(t);const{x:n,y:r,color:i,size:s}=t,o=N0(e,n),a=N0(e,r),l=N0(e,i),c=N0(e,s);let{fx:u,fy:f,x:{value:d,reduce:h,zero:p,...g},y:{value:v,reduce:y,zero:m,...b},color:{value:w,color:S,reduce:_},size:{value:x,reduce:E},mark:k}=t;if(h===void 0&&(h=y==null&&d==null&&x==null&&v!=null?"count":null),y===void 0&&(y=h==null&&v==null&&x==null&&d!=null?"count":null),E===void 0&&x==null&&_==null&&h==null&&y==null&&(d==null||Ye(o))&&(v==null||Ye(a))&&(E="count"),p===void 0&&(p=k0(h)?!0:void 0),m===void 0&&(m=k0(y)?!0:void 0),d==null&&v==null)throw new Error("must specify x or y");if(h!=null&&v==null)throw new Error("reducing x requires y");if(y!=null&&d==null)throw new Error("reducing y requires x");k===void 0&&(k=x!=null||E!=null?"dot":k0(h)||k0(y)||_!=null?"bar":d!=null&&v!=null?Ye(o)||Ye(a)||h==null&&y==null&&!Od(o)&&!Od(a)?"dot":"line":d!=null||v!=null?"rule":null);let I,A,D;switch(k){case"dot":D=al,A="stroke";break;case"line":D=o&&a||h!=null||y!=null?m||y!=null||o&&Od(o)?Mp:p||h!=null||a&&Od(a)?Ap:zT:o?Ap:Mp,A="stroke",lN(l)&&(I=null);break;case"area":D=!(m||y!=null)&&(p||h!=null||a&&Od(a))?Ep:Of,A="fill",lN(l)&&(I=null);break;case"rule":D=o?Pa:za,A="stroke";break;case"bar":D=h!=null?Ye(a)?aN(h)&&o&&Ye(o)?Mu:Ul:D1:y!=null?Ye(o)?aN(y)&&a&&Ye(a)?Mu:Pl:O1:_!=null||E!=null?o&&Ye(o)&&a&&Ye(a)?Mu:o&&Ye(o)?Pl:a&&Ye(a)?Ul:jT:o&&Au(o)&&!(a&&Au(a))?Ul:a&&Au(a)&&!(o&&Au(o))?Pl:Mu,A="fill";break;default:throw new Error(`invalid mark: ${k}`)}let L={fx:u,fy:f,x:o??void 0,y:a??void 0,[A]:l??S,z:I,r:c??void 0,tip:!0},T,M={[A]:_??void 0,r:E??void 0};if(h!=null&&y!=null)throw new Error("cannot reduce both x and y");return y!=null?(M.y=y,T=Ye(o)?Sp:fa):h!=null?(M.x=h,T=Ye(a)?xp:da):(_!=null||E!=null)&&(o&&a?T=Ye(o)&&Ye(a)?J3:Ye(o)?da:Ye(a)?fa:$l:o?T=Ye(o)?Sp:fa:a&&(T=Ye(a)?xp:da)),(T===$l||T===fa)&&(L.x={value:o,...g}),(T===$l||T===da)&&(L.y={value:a,...b}),p===void 0&&(p=o&&!(T===$l||T===fa)&&(D===Ul||D===Ep||D===D1||D===za)),m===void 0&&(m=a&&!(T===$l||T===da)&&(D===Pl||D===Of||D===O1||D===Pa)),{fx:u??null,fy:f??null,x:{value:d??null,reduce:h??null,zero:!!p,...g},y:{value:v??null,reduce:y??null,zero:!!m,...b},color:{value:w??null,reduce:_??null,...S!==void 0&&{color:S}},size:{value:x??null,reduce:E??null},mark:k,markImpl:cN[D],markOptions:L,transformImpl:cN[T],transformOptions:M,colorMode:A}}function Zat(e,t){const n=w7(e,t),{fx:r,fy:i,x:{zero:s},y:{zero:o},markOptions:a,transformOptions:l,colorMode:c}=n,u=ZS[n.markImpl],f=ZS[n.transformImpl],d=r!=null||i!=null?ET({strokeOpacity:.1}):null,h=[s?Pa([0]):null,o?za([0]):null],p=u(e,f?f(l,a):a);return c==="stroke"?Gi(d,h,p):Gi(d,p,h)}function Od(e){let t,n;for(const r of e){if(r==null)continue;if(t===void 0){t=r;continue}const i=Math.sign(ze(t,r));if(i){if(n!==void 0&&i!==n)return!1;t=r,n=i}}return!0}function Jat({x:e,y:t,color:n,size:r,fx:i,fy:s,mark:o}={}){return ds(e)||(e=Uc(e)),ds(t)||(t=Uc(t)),ds(n)||(n=by(n)?{color:n}:Uc(n)),ds(r)||(r=Uc(r)),ds(i)&&({value:i}=Uc(i)),ds(s)&&({value:s}=Uc(s)),o!=null&&(o=`${o}`.toLowerCase()),{x:e,y:t,color:n,size:r,fx:i,fy:s,mark:o}}function N0(e,t){const n=Pt(e,t.value);return n&&(n.label=zo(t.value)),n}function Uc(e){return tlt(e)?{reduce:e}:{value:e}}function k0(e){return/^(?:distinct|count|sum|proportion)$/i.test(e)}function aN(e){return/^(?:first|last|mode)$/i.test(e)}function tlt(e){if(e==null)return!1;if(typeof e.reduceIndex=="function"||typeof e.reduce=="function"&&Si(e)||/^p\d{2}$/i.test(e))return!0;switch(`${e}`.toLowerCase()){case"first":case"last":case"count":case"distinct":case"sum":case"proportion":case"proportion-facet":case"deviation":case"min":case"min-index":case"max":case"max-index":case"mean":case"median":case"variance":case"mode":return!0}return!1}function lN(e){return e?new ey(e).size>e.length>>1:!1}const ZS={dot:al,line:zT,lineX:Ap,lineY:Mp,areaX:Ep,areaY:Of,ruleX:Pa,ruleY:za,barX:Ul,barY:Pl,rect:jT,rectX:D1,rectY:O1,cell:Mu,bin:$l,binX:fa,binY:da,group:J3,groupX:Sp,groupY:xp},cN=Object.fromEntries(Object.entries(ZS).map(([e,t])=>[t,e]));function VT(e,t={}){let{x:n,x1:r,x2:i}=t;n===void 0&&r===void 0&&i===void 0&&(t={...t,x:n=_t});const s={};return n!=null&&(s.x=e),r!=null&&(s.x1=e),i!=null&&(s.x2=e),Fo(s,t)}function YT(e,t={}){let{y:n,y1:r,y2:i}=t;n===void 0&&r===void 0&&i===void 0&&(t={...t,y:n=_t});const s={};return n!=null&&(s.y=e),r!=null&&(s.y1=e),i!=null&&(s.y2=e),Fo(s,t)}function Fo(e={},t={}){const n=il(t),r=Object.entries(e).map(([i,s])=>{const o=lC(i,t);if(o==null)throw new Error(`missing channel: ${i}`);const[a,l]=Br(o);return{key:i,input:o,output:a,setOutput:l,map:elt(s)}});return{...Ps(t,(i,s)=>{const o=Pt(i,n),a=r.map(({input:c})=>Pt(i,c)),l=r.map(({setOutput:c})=>c(new Array(i.length)));for(const c of s)for(const u of o?Uo(c,f=>o[f]).values():[c])r.forEach(({map:f},d)=>f.mapIndex(u,a[d],l[d]));return{data:i,facets:s}}),...Object.fromEntries(r.map(({key:i,output:s})=>[i,s]))}}function elt(e){if(e==null)throw new Error("missing map");if(typeof e.mapIndex=="function")return e;if(typeof e.map=="function"&&Si(e))return nlt(e);if(typeof e=="function")return T_(V3(e));switch(`${e}`.toLowerCase()){case"cumsum":return ilt;case"rank":return T_((t,n)=>lB(t,r=>n[r]));case"quantile":return T_((t,n)=>rlt(t,r=>n[r]))}throw new Error(`invalid map: ${e}`)}function nlt(e){return console.warn("deprecated map interface; implement mapIndex instead."),{mapIndex:e.map.bind(e)}}function rlt(e,t){const n=Vb(e,t)-1;return lB(e,t).map(r=>r/n)}function T_(e){return{mapIndex(t,n,r){const i=e(t,n);if(i.length!==t.length)throw new Error("map function returned a mismatched length");for(let s=0,o=t.length;s<o;++s)r[t[s]]=i[s]}}}const ilt={mapIndex(e,t,n){let r=0;for(const i of e)n[i]=r+=t[i]}};function slt(e={},t){return arguments.length===1&&(t=e),VT(Uv(e),t)}function olt(e={},t){return arguments.length===1&&(t=e),YT(Uv(e),t)}function Uv(e={}){typeof e=="number"&&(e={k:e});let{k:t,reduce:n,shift:r,anchor:i,strict:s}=e;if(i===void 0&&r!==void 0&&(i=llt(r),Io(`Warning: the shift option is deprecated; please use anchor "${i}" instead.`)),!((t=Math.floor(t))>0))throw new Error(`invalid k: ${t}`);return clt(n)(t,alt(i,t),s)}function alt(e="middle",t){switch(`${e}`.toLowerCase()){case"middle":return t-1>>1;case"start":return 0;case"end":return t-1}throw new Error(`invalid anchor: ${e}`)}function llt(e){switch(`${e}`.toLowerCase()){case"centered":return"middle";case"leading":return"start";case"trailing":return"end"}throw new Error(`invalid shift: ${e}`)}function clt(e="mean"){if(typeof e=="string"){if(/^p\d{2}$/i.test(e))return D0(z3(e));switch(e.toLowerCase()){case"deviation":return D0(ty);case"max":return O0((t,n)=>Ne(t,r=>n[r]));case"mean":return ult;case"median":return D0(up);case"min":return O0((t,n)=>wn(t,r=>n[r]));case"mode":return O0((t,n)=>aB(t,r=>n[r]));case"sum":return _7;case"variance":return D0(n3);case"difference":return hlt;case"ratio":return plt;case"first":return ylt;case"last":return mlt}}if(typeof e!="function")throw new Error(`invalid reduce: ${e}`);return O0(V3(e))}function D0(e){return(t,n,r)=>r?{mapIndex(i,s,o){const a=c=>s[c]==null?NaN:+s[c];let l=0;for(let c=0;c<t-1;++c)isNaN(a(c))&&++l;for(let c=0,u=i.length-t+1;c<u;++c)isNaN(a(c+t-1))&&++l,o[i[c+n]]=l===0?e(Xl(i,c,c+t),a):NaN,isNaN(a(c))&&--l}}:{mapIndex(i,s,o){const a=l=>s[l]==null?NaN:+s[l];for(let l=-n;l<0;++l)o[i[l+n]]=e(Xl(i,0,l+t),a);for(let l=0,c=i.length-n;l<c;++l)o[i[l+n]]=e(Xl(i,l,l+t),a)}}}function O0(e){return(t,n,r)=>r?{mapIndex(i,s,o){let a=0;for(let l=0;l<t-1;++l)a+=Zn(s[i[l]]);for(let l=0,c=i.length-t+1;l<c;++l)a+=Zn(s[i[l+t-1]]),a===t&&(o[i[l+n]]=e(Xl(i,l,l+t),s)),a-=Zn(s[i[l]])}}:{mapIndex(i,s,o){for(let a=-n;a<0;++a)o[i[a+n]]=e(Xl(i,0,a+t),s);for(let a=0,l=i.length-n;a<l;++a)o[i[a+n]]=e(Xl(i,a,a+t),s)}}}function _7(e,t,n){return n?{mapIndex(r,i,s){let o=0,a=0;for(let l=0;l<e-1;++l){const c=i[r[l]];c===null||isNaN(c)?++o:a+=+c}for(let l=0,c=r.length-e+1;l<c;++l){const u=i[r[l]],f=i[r[l+e-1]];f===null||isNaN(f)?++o:a+=+f,s[r[l+t]]=o===0?a:NaN,u===null||isNaN(u)?--o:a-=+u}}}:{mapIndex(r,i,s){let o=0;const a=r.length;for(let l=0,c=Math.min(a,e-t-1);l<c;++l)o+=+i[r[l]]||0;for(let l=-t,c=a-t;l<c;++l)o+=+i[r[l+e-1]]||0,s[r[l+t]]=o,o-=+i[r[l]]||0}}}function ult(e,t,n){if(n){const r=_7(e,t,n);return{mapIndex(i,s,o){r.mapIndex(i,s,o);for(let a=0,l=i.length-e+1;a<l;++a)o[i[a+t]]/=e}}}else return{mapIndex(r,i,s){let o=0,a=0;const l=r.length;for(let c=0,u=Math.min(l,e-t-1);c<u;++c){let f=i[r[c]];f!==null&&!isNaN(f=+f)&&(o+=f,++a)}for(let c=-t,u=l-t;c<u;++c){let f=i[r[c+e-1]],d=i[r[c]];f!==null&&!isNaN(f=+f)&&(o+=f,++a),s[r[c+t]]=o/a,d!==null&&!isNaN(d=+d)&&(o-=d,--a)}}}}function flt(e,t,n,r){for(let i=n+r;n<i;++n){const s=e[t[n]];if(Zn(s))return s}}function dlt(e,t,n,r){for(let i=n+r-1;i>=n;--i){const s=e[t[i]];if(Zn(s))return s}}function S7(e,t,n,r){for(let i=n+r;n<i;++n){let s=e[t[n]];if(s!==null&&!isNaN(s=+s))return s}}function x7(e,t,n,r){for(let i=n+r-1;i>=n;--i){let s=e[t[i]];if(s!==null&&!isNaN(s=+s))return s}}function hlt(e,t,n){return n?{mapIndex(r,i,s){for(let o=0,a=r.length-e;o<a;++o){const l=i[r[o]],c=i[r[o+e-1]];s[r[o+t]]=l===null||c===null?NaN:c-l}}}:{mapIndex(r,i,s){for(let o=-t,a=r.length-e+t+1;o<a;++o)s[r[o+t]]=x7(i,r,o,e)-S7(i,r,o,e)}}}function plt(e,t,n){return n?{mapIndex(r,i,s){for(let o=0,a=r.length-e;o<a;++o){const l=i[r[o]],c=i[r[o+e-1]];s[r[o+t]]=l===null||c===null?NaN:c/l}}}:{mapIndex(r,i,s){for(let o=-t,a=r.length-e+t+1;o<a;++o)s[r[o+t]]=x7(i,r,o,e)/S7(i,r,o,e)}}}function ylt(e,t,n){return n?{mapIndex(r,i,s){for(let o=0,a=r.length-e;o<a;++o)s[r[o+t]]=i[r[o]]}}:{mapIndex(r,i,s){for(let o=-t,a=r.length-e+t+1;o<a;++o)s[r[o+t]]=flt(i,r,o,e)}}}function mlt(e,t,n){return n?{mapIndex(r,i,s){for(let o=0,a=r.length-e;o<a;++o)s[r[o+t]]=i[r[o+e-1]]}}:{mapIndex(r,i,s){for(let o=-t,a=r.length-e+t+1;o<a;++o)s[r[o+t]]=dlt(i,r,o,e)}}}const To={n:20,k:2,color:"currentColor",opacity:.2,strict:!0,anchor:"end"};function glt(e,{x:t=_t,y:n,k:r=To.k,color:i=To.color,opacity:s=To.opacity,fill:o=i,fillOpacity:a=s,stroke:l=i,strokeOpacity:c,strokeWidth:u,...f}={}){return Gi(Ge(o)?null:Ep(e,Fo({x1:Ql({k:-r,...f}),x2:Ql({k:r,...f})},{x1:t,x2:t,y:n,fill:o,fillOpacity:a,...f})),Ge(l)?null:Ap(e,Fo({x:Ql(f)},{x:t,y:n,stroke:l,strokeOpacity:c,strokeWidth:u,...f})))}function blt(e,{x:t,y:n=_t,k:r=To.k,color:i=To.color,opacity:s=To.opacity,fill:o=i,fillOpacity:a=s,stroke:l=i,strokeOpacity:c,strokeWidth:u,...f}={}){return Gi(Ge(o)?null:Of(e,Fo({y1:Ql({k:-r,...f}),y2:Ql({k:r,...f})},{x:t,y1:n,y2:n,fill:o,fillOpacity:a,...f})),Ge(l)?null:Mp(e,Fo({y:Ql(f)},{x:t,y:n,stroke:l,strokeOpacity:c,strokeWidth:u,...f})))}function Ql({n:e=To.n,k:t=0,strict:n=To.strict,anchor:r=To.anchor}={}){return Uv({k:e,reduce:i=>Yb(i)+t*(ty(i)||0),strict:n,anchor:r})}const vlt={ariaLabel:"tick",fill:null,stroke:"currentColor"};class I7 extends we{constructor(t,n,r){super(t,n,r,vlt),ed(this,r)}render(t,n,r,i,s){return re("svg:g",s).call(ke,this,i,s).call(this._transform,this,n).call(o=>o.selectAll().data(t).enter().append("line").call(Ae,this).attr("x1",this._x1(n,r,i)).attr("x2",this._x2(n,r,i)).attr("y1",this._y1(n,r,i)).attr("y2",this._y2(n,r,i)).call(hn,this,r).call(Ty,this,r,s)).node()}}class T7 extends I7{constructor(t,n={}){const{x:r,y:i,inset:s=0,insetTop:o=s,insetBottom:a=s}=n;super(t,{x:{value:r,scale:"x"},y:{value:i,scale:"y",type:"band",optional:!0}},n),this.insetTop=Yt(o),this.insetBottom=Yt(a)}_transform(t,n,{x:r}){t.call(ve,n,{x:r},Tn,0)}_x1(t,{x:n}){return r=>n[r]}_x2(t,{x:n}){return r=>n[r]}_y1({y:t},{y:n},{marginTop:r}){const{insetTop:i}=this;return n&&t?s=>n[s]+i:r+i}_y2({y:t},{y:n},{height:r,marginBottom:i}){const{insetBottom:s}=this;return n&&t?o=>n[o]+t.bandwidth()-s:r-i-s}}class E7 extends I7{constructor(t,n={}){const{x:r,y:i,inset:s=0,insetRight:o=s,insetLeft:a=s}=n;super(t,{y:{value:i,scale:"y"},x:{value:r,scale:"x",type:"band",optional:!0}},n),this.insetRight=Yt(o),this.insetLeft=Yt(a)}_transform(t,n,{y:r}){t.call(ve,n,{y:r},0,Tn)}_x1({x:t},{x:n},{marginLeft:r}){const{insetLeft:i}=this;return n&&t?s=>n[s]+i:r+i}_x2({x:t},{x:n},{width:r,marginRight:i}){const{insetRight:s}=this;return n&&t?o=>n[o]+t.bandwidth()-s:r-i-s}_y1(t,{y:n}){return r=>n[r]}_y2(t,{y:n}){return r=>n[r]}}function A7(e,{x:t=_t,...n}={}){return new T7(e,{...n,x:t})}function M7(e,{y:t=_t,...n}={}){return new E7(e,{...n,y:t})}function wlt(e,{x:t=_t,y:n=null,fill:r="#ccc",fillOpacity:i,stroke:s="currentColor",strokeOpacity:o,strokeWidth:a=2,sort:l,...c}={}){const u=n!=null?xp:Z3;return Gi(za(e,u({x1:qT,x2:WT},{x:t,y:n,stroke:s,strokeOpacity:o,...c})),Ul(e,u({x1:"p25",x2:"p75"},{x:t,y:n,fill:r,fillOpacity:i,...c})),A7(e,u({x:"p50"},{x:t,y:n,stroke:s,strokeOpacity:o,strokeWidth:a,sort:l,...c})),al(e,Fo({x:$7},{x:t,y:n,z:n,stroke:s,strokeOpacity:o,...c})))}function _lt(e,{y:t=_t,x:n=null,fill:r="#ccc",fillOpacity:i,stroke:s="currentColor",strokeOpacity:o,strokeWidth:a=2,sort:l,...c}={}){const u=n!=null?Sp:Z3;return Gi(Pa(e,u({y1:qT,y2:WT},{x:n,y:t,stroke:s,strokeOpacity:o,...c})),Pl(e,u({y1:"p25",y2:"p75"},{x:n,y:t,fill:r,fillOpacity:i,...c})),M7(e,u({y:"p50"},{x:n,y:t,stroke:s,strokeOpacity:o,strokeWidth:a,sort:l,...c})),al(e,Fo({y:$7},{x:n,y:t,z:n,stroke:s,strokeOpacity:o,...c})))}function $7(e){const t=qT(e),n=WT(e);return e.map(r=>r<t||r>n?r:NaN)}function qT(e){const t=N7(e)*2.5-k7(e)*1.5;return wn(e,n=>n>=t?n:NaN)}function WT(e){const t=k7(e)*2.5-N7(e)*1.5;return Ne(e,n=>n<=t?n:NaN)}function N7(e){return La(e,.25)}function k7(e){return La(e,.75)}const Slt={ariaLabel:"raster",stroke:null,pixelSize:1};function Pc(e,t){const n=+e;if(isNaN(n))throw new Error(`invalid ${t}: ${e}`);return n}function uN(e,t){const n=Math.floor(e);if(isNaN(n))throw new Error(`invalid ${t}: ${e}`);return n}class D7 extends we{constructor(t,n,r={},i){let{width:s,height:o,x:a,y:l,x1:c=a==null?0:void 0,y1:u=l==null?0:void 0,x2:f=a==null?s:void 0,y2:d=l==null?o:void 0,pixelSize:h=i.pixelSize,blur:p=0,interpolate:g}=r;if(s!=null&&(s=uN(s,"width")),o!=null&&(o=uN(o,"height")),c!=null&&(c=Pc(c,"x1")),u!=null&&(u=Pc(u,"y1")),f!=null&&(f=Pc(f,"x2")),d!=null&&(d=Pc(d,"y2")),a==null&&(c==null||f==null))throw new Error("missing x");if(l==null&&(u==null||d==null))throw new Error("missing y");t!=null&&s!=null&&o!=null&&(a===void 0&&c!=null&&f!=null&&(a=klt(c,f,s)),l===void 0&&u!=null&&d!=null&&(l=Dlt(u,d,s,o))),super(t,{x:{value:a,scale:"x",optional:!0},y:{value:l,scale:"y",optional:!0},x1:{value:c==null?null:[c],scale:"x",optional:!0,filter:null},y1:{value:u==null?null:[u],scale:"y",optional:!0,filter:null},x2:{value:f==null?null:[f],scale:"x",optional:!0,filter:null},y2:{value:d==null?null:[d],scale:"y",optional:!0,filter:null},...n},r,i),this.width=s,this.height=o,this.pixelSize=Pc(h,"pixelSize"),this.blur=Pc(p,"blur"),this.interpolate=a==null||l==null?null:Ilt(g)}}class O7 extends D7{constructor(t,n={}){const{imageRendering:r}=n;if(t==null){const{fill:i,fillOpacity:s}=n;en(s)[0]!==void 0&&(n=JS("fillOpacity",n)),_r(i)[0]!==void 0&&(n=JS("fill",n))}super(t,void 0,n,Slt),this.imageRendering=qe(r,"auto")}scale(t,{color:n,...r},i){return super.scale(t,r,i)}render(t,n,r,i,s){var M;const o=n[(M=r.channels.fill)==null?void 0:M.scale]??(N=>N),{x:a,y:l}=r,{document:c}=s,[u,f,d,h]=F7(r,i,s),p=d-u,g=h-f,{pixelSize:v,width:y=Math.round(Math.abs(p)/v),height:m=Math.round(Math.abs(g)/v)}=this,b=y*m;let{fill:w,fillOpacity:S}=r,_=0;if(this.interpolate){const N=y/p,F=m/g,O=xe(a,B=>(B-u)*N,Float64Array),C=xe(l,B=>(B-f)*F,Float64Array);w&&(w=this.interpolate(t,y,m,O,C,w)),S&&(S=this.interpolate(t,y,m,O,C,S))}else this.data==null&&t&&(_=t.fi*b);const x=c.createElement("canvas");x.width=y,x.height=m;const E=x.getContext("2d"),k=E.createImageData(y,m),I=k.data;let{r:A,g:D,b:L}=bi(this.fill)??{r:0,g:0,b:0},T=(this.fillOpacity??1)*255;for(let N=0;N<b;++N){const F=N<<2;if(w){const O=o(w[N+_]);if(O==null){I[F+3]=0;continue}({r:A,g:D,b:L}=bi(O))}S&&(T=S[N+_]*255),I[F+0]=A,I[F+1]=D,I[F+2]=L,I[F+3]=T}return this.blur>0&&SG(k,this.blur),E.putImageData(k,0,0),re("svg:g",s).call(ke,this,i,s).call(ve,this,n).call(N=>N.append("image").attr("transform",`translate(${u},${f}) scale(${Math.sign(d-u)},${Math.sign(h-f)})`).attr("width",Math.abs(p)).attr("height",Math.abs(g)).attr("preserveAspectRatio","none").call(pt,"image-rendering",this.imageRendering).call(Ae,this).attr("xlink:href",x.toDataURL())).node()}}function B7(e,t,n){arguments.length<3&&(n=t,t=null);let{x:r,y:i,[e]:s,...o}=n;return r===void 0&&i===void 0&&Hrt(t)&&(r=my,i=wp,s===void 0&&(s=jrt)),[t,{...o,x:r,y:i,[e]:s}]}function xlt(){const[e,t]=B7("fill",...arguments);return new O7(e,e==null||t.fill!==void 0||t.fillOpacity!==void 0?t:{...t,fill:_t})}function F7({x1:e,y1:t,x2:n,y2:r},i,{projection:s}){const{width:o,height:a,marginTop:l,marginRight:c,marginBottom:u,marginLeft:f}=i;return[e&&s==null?e[0]:f,t&&s==null?t[0]:l,n&&s==null?n[0]:o-c,r&&s==null?r[0]:a-u]}function L7({x1:e,y1:t,x2:n,y2:r},i,s,o){const a={};return e&&(a.x1=e),t&&(a.y1=t),n&&(a.x2=n),r&&(a.y2=r),F7(oT(a,i),s,o)}function JS(e,t={}){const{[e]:n}=t;if(typeof n!="function")throw new Error(`invalid ${e}: not a function`);return xr({...t,[e]:void 0},function(r,i,s,o,a,l){const{x:c,y:u}=o;if(!c)throw new Error("missing scale: x");if(!u)throw new Error("missing scale: y");const[f,d,h,p]=L7(s,o,a,l),g=h-f,v=p-d,{pixelSize:y}=this,{width:m=Math.round(Math.abs(g)/y),height:b=Math.round(Math.abs(v)/y)}=t,w=new Array(m*b*(i?i.length:1)),S=g/m,_=v/b;let x=0;for(const E of i??[void 0])for(let k=.5;k<b;++k)for(let I=.5;I<m;++I,++x)w[x]=n(c.invert(f+I*S),u.invert(d+k*_),E);return{data:w,facets:i,channels:{[e]:{value:w,scale:"auto"}}}})}function Ilt(e){if(typeof e=="function")return e;if(e==null)return tx;switch(`${e}`.toLowerCase()){case"none":return tx;case"nearest":return C7;case"barycentric":return R7();case"random-walk":return U7()}throw new Error(`invalid interpolate: ${e}`)}function tx(e,t,n,r,i,s){const o=new Array(t*n);for(const a of e)r[a]<0||r[a]>=t||i[a]<0||i[a]>=n||(o[Math.floor(i[a])*t+Math.floor(r[a])]=s[a]);return o}function R7({random:e=E3(42)}={}){return(t,n,r,i,s,o)=>{const{points:a,triangles:l,hull:c}=el.from(t,h=>i[h],h=>s[h]),u=new o.constructor(n*r).fill(NaN),f=new Uint8Array(n*r),d=Nlt(o,e);for(let h=0;h<l.length;h+=3){const p=l[h],g=l[h+1],v=l[h+2],y=a[2*p],m=a[2*g],b=a[2*v],w=a[2*p+1],S=a[2*g+1],_=a[2*v+1],x=Math.min(y,m,b),E=Math.max(y,m,b),k=Math.min(w,S,_),I=Math.max(w,S,_),A=(S-_)*(y-b)+(w-_)*(b-m);if(!A)continue;const D=o[t[p]],L=o[t[g]],T=o[t[v]];for(let M=Math.floor(x);M<E;++M)for(let N=Math.floor(k);N<I;++N){if(M<0||M>=n||N<0||N>=r)continue;const F=M+.5,O=N+.5,C=((S-_)*(F-b)+(O-_)*(b-m))/A;if(C<0)continue;const B=((_-w)*(F-b)+(O-_)*(y-b))/A;if(B<0)continue;const P=1-C-B;if(P<0)continue;const z=M+n*N;u[z]=d(D,C,L,B,T,P,M,N),f[z]=1}}return Tlt(u,f,i,s,o,n,r,c,t,d),u}}function Tlt(e,t,n,r,i,s,o,a,l,c){n=Float64Array.from(a,h=>n[l[h]]),r=Float64Array.from(a,h=>r[l[h]]),i=Array.from(a,h=>i[l[h]]);const u=n.length,f=Array.from({length:u},(h,p)=>Alt(p,n,r));let d=0;for(let h=0;h<o;++h){const p=h+.5;for(let g=0;g<s;++g){const v=g+s*h;if(!t[v]){const y=g+.5;for(let m=0;m<u;++m){const b=(u+d+(m%2?(m+1)/2:-m/2))%u;if(f[b](y,p)){const w=Elt(n.at(b-1),r.at(b-1),n[b],r[b],y,p);e[v]=c(i.at(b-1),w,i[b],1-w,i[b],0,g,h),d=b;break}}}}}}function Elt(e,t,n,r,i,s){const o=n-e,a=r-t,l=o*(n-i)+a*(r-s),c=o*(i-e)+a*(s-t);return l>0&&c>0?l/(l+c):+(l>c)}function Bd(e,t,n,r){return e*r-n*t}function Alt(e,t,n){const r=t.length,i=t.at(e-2),s=n.at(e-2),o=t.at(e-1),a=n.at(e-1),l=t[e],c=n[e],u=t.at(e+1-r),f=n.at(e+1-r),d=o-l,h=a-c,p=i-o,g=s-a,v=l-u,y=c-f,m=Math.hypot(d,h),b=Math.hypot(p,g),w=Math.hypot(v,y);return(S,_)=>{const x=S-o,E=_-a,k=S-l,I=_-c;return Bd(x,E,k,I)>-1e-6&&Bd(x,E,d,h)*b-Bd(x,E,p,g)*m>-1e-6&&Bd(k,I,v,y)*m-Bd(k,I,d,h)*w<=0}}function C7(e,t,n,r,i,s){const o=new s.constructor(t*n),a=el.from(e,u=>r[u],u=>i[u]);let l,c;for(let u=.5,f=0;u<n;++u){c=l;for(let d=.5;d<t;++d,++f)c=a.find(d,u,c),d===.5&&(l=c),o[f]=s[e[c]]}return o}function U7({random:e=E3(42),minDistance:t=.5,maxSteps:n=2}={}){return(r,i,s,o,a,l)=>{const c=new l.constructor(i*s),u=el.from(r,p=>o[p],p=>a[p]);let f,d,h;for(let p=.5,g=0;p<s;++p){d=f;for(let v=.5;v<i;++v,++g){let y=v,m=p;h=d=u.find(y,m,d),v===.5&&(f=d);let b,w=0;for(;(b=Math.hypot(o[r[h]]-y,a[r[h]]-m))>t&&w<n;){const S=e(v,p,w)*2*Math.PI;y+=Math.cos(S)*b,m+=Math.sin(S)*b,h=u.find(y,m,h),++w}c[g]=l[r[h]]}}return c}}function Mlt(e,t,n,r,i,s){return t*e+r*n+s*i}function $lt(e){return(t,n,r,i,s,o,a,l)=>{const c=e(a,l);return c<n?t:c<n+i?r:s}}function Nlt(e,t){return Au(e)||tr(e)?Mlt:$lt(t)}function klt(e,t,n){return{transform(r){const i=r.length,s=new Float64Array(i),o=(t-e)/n,a=e+o/2;for(let l=0;l<i;++l)s[l]=l%n*o+a;return s}}}function Dlt(e,t,n,r){return{transform(i){const s=i.length,o=new Float64Array(s),a=(t-e)/r,l=e+a/2;for(let c=0;c<s;++c)o[c]=Math.floor(c/n)%r*a+l;return o}}}const fN={ariaLabel:"contour",fill:"none",stroke:"currentColor",strokeMiterlimit:1,pixelSize:2};class P7 extends D7{constructor(t,{smooth:n=!0,value:r,...i}={}){const s=xC({},i,fN);if(r===void 0){for(const a in s)if(s[a].value!=null){if(r!==void 0)throw new Error("ambiguous contour value");r=i[a],i[a]="value"}}if(r!=null){const a={transform:l=>l.map(c=>c.value),label:zo(r)};for(const l in s)i[l]==="value"&&(i[l]=a)}if(t==null){if(r==null)throw new Error("missing contour value");i=JS("value",{value:r,...i}),r=null}else{let{interpolate:a}=i;r===void 0&&(r=_t),a===void 0&&(i.interpolate="nearest")}super(t,{value:{value:r,optional:!0}},Olt(i),fN);const o={geometry:{value:_t}};for(const a in this.channels){const l=this.channels[a],{scale:c}=l;c==="x"||c==="y"||a==="value"||(o[a]=l,delete this.channels[a])}this.contourChannels=o,this.smooth=!!n}filter(t,{x:n,y:r,value:i,...s},o){return super.filter(t,s,o)}render(t,n,r,i,s){const{geometry:o}=r,a=nl();return re("svg:g",s).call(ke,this,i,s).call(ve,this,n).call(l=>{l.selectAll().data(t).enter().append("path").call(Ae,this).attr("d",c=>a(o[c])).call(hn,this,r)}).node()}}function Olt({thresholds:e,interval:t,...n}){return e=r7(e,t,o3),xr(n,function(r,i,s,o,a,l){const[c,u,f,d]=L7(s,o,a,l),h=f-c,p=d-u,{pixelSize:g,width:v=Math.round(Math.abs(h)/g),height:y=Math.round(Math.abs(p)/g)}=this,m=v/h,b=y/p,w=s.value.value,S=[];if(this.interpolate){const{x:I,y:A}=Iv(s,o,l),D=xe(I,N=>(N-c)*m,Float64Array),L=xe(A,N=>(N-u)*b,Float64Array),T=[s.x,s.y,s.value],M=[D,L,w];for(const N of i){const F=this.filter(N,T,M);S.push(this.interpolate(F,v,y,D,L,w))}}else if(i){const I=v*y,A=i.length;for(let D=0;D<A;++D)S.push(w.slice(D*I,D*I+I))}else S.push(w);if(this.blur>0)for(const I of S)KO({data:I,width:v,height:y},this.blur);const _=Blt(e,w,...Llt(S));if(_===null)throw new Error(`unsupported thresholds: ${e}`);const{contour:x}=zg().size([v,y]).smooth(this.smooth),E=[],k=[];for(const I of S)k.push(Dr(E.length,E.push(...xe(_,A=>x(I,A)))));for(const{coordinates:I}of E)for(const A of I)for(const D of A)for(const L of D)L[0]=L[0]/m+c,L[1]=L[1]/b+u;return{data:E,facets:k,channels:bC(this.contourChannels,E)}})}function Blt(e,t,n,r){if(typeof(e==null?void 0:e.range)=="function")return e.range(e.floor(n),r);if(typeof e=="function"&&(e=e(t,n,r)),typeof e!="number")return Sr(e);const i=Fa(...rB(n,r,e),e);for(;i[i.length-1]>=r;)i.pop();for(;i[1]<n;)i.shift();return i}function Flt(){return new P7(...B7("value",...arguments))}function Llt(e){return[wn(e,t=>wn(t,dN)),Ne(e,t=>Ne(t,dN))]}function dN(e){return isFinite(e)?e:NaN}function Rlt(e,t){return HT(gT,e,t)}function Clt(e,t={}){return HT(bT,e,t)}function Ult(e,t={}){return HT(vT,e,t)}function HT(e,t,n={}){const{x:r,y:i,maxRadius:s}=n,o=e({px:r,py:i,maxRadius:s}),a=[];r!=null&&a.push(Pa(t,hN("x",{...o,inset:-6},n))),i!=null&&a.push(za(t,hN("y",{...o,inset:-6},n))),r!=null&&a.push(Nf(t,pN("x",{...o,dy:9,frameAnchor:"bottom",lineAnchor:"top"},n))),i!=null&&a.push(Nf(t,pN("y",{...o,dx:-9,frameAnchor:"left",textAnchor:"end"},n)));for(const l of a)l.ariaLabel=`crosshair ${l.ariaLabel}`;return Gi(...a)}function z7(e,{channels:t,...n},{facet:r,facetAnchor:i,fx:s,fy:o,[e]:a,channels:l,transform:c,initializer:u}){return{...n,facet:r,facetAnchor:i,fx:s,fy:o,[e]:a,channels:{...t,...l},transform:c,initializer:Plt(e,u)}}function Plt(e,t){return t==null?t:function(n,r,{x:i,y:s,px:o,py:a,...l},...c){const{channels:{x:u,y:f,...d}={},...h}=t.call(this,n,r,{...l,x:o,y:a},...c);return{channels:{...d,...u&&{px:u,...e==="x"&&{x:u}},...f&&{py:f,...e==="y"&&{y:f}}},...h}}}function hN(e,t,n){const{color:r="currentColor",opacity:i=.2,ruleStroke:s=r,ruleStrokeOpacity:o=i,ruleStrokeWidth:a}=n;return{...z7(e,t,n),stroke:s,strokeOpacity:o,strokeWidth:a}}function pN(e,t,n){const{color:r="currentColor",textFill:i=r,textFillOpacity:s,textStroke:o="white",textStrokeOpacity:a,textStrokeWidth:l=5}=n;return{...z7(e,t,zlt(e,n)),fill:i,fillOpacity:s,stroke:o,strokeOpacity:a,strokeWidth:l}}function zlt(e,t){return xr(t,(n,r,i)=>{var s;return{channels:{text:{value:(s=qS(i,e))==null?void 0:s.value}}}})}const jlt={ariaLabel:"delaunay link",fill:"none",stroke:"currentColor",strokeMiterlimit:1},Vlt={ariaLabel:"delaunay mesh",fill:null,stroke:"currentColor",strokeOpacity:.2},Ylt={ariaLabel:"hull",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeMiterlimit:1},qlt={ariaLabel:"voronoi",fill:"none",stroke:"currentColor",strokeMiterlimit:1},Wlt={ariaLabel:"voronoi mesh",fill:null,stroke:"currentColor",strokeOpacity:.2};class Hlt extends we{constructor(t,n={}){const{x:r,y:i,z:s,curve:o,tension:a}=n;super(t,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},z:{value:s,optional:!0}},n,jlt),this.curve=$T(o,a),ed(this,n)}render(t,n,r,i,s){const{x:o,y:a}=n,{x:l,y:c,z:u}=r,{curve:f}=this,[d,h]=zs(this,i),p=l?m=>l[m]:zr(d),g=c?m=>c[m]:zr(h),v=this;function y(m){let b=-1;const w=[],S={};for(const T in r)S[T]=[];const _=[],x=[],E=[],k=[];function I(T,M){T=m[T],M=m[M],w.push(++b),_[b]=p(T),E[b]=g(T),x[b]=p(M),k[b]=g(M);for(const N in r)S[N].push(r[N][M])}const{halfedges:A,hull:D,triangles:L}=el.from(m,p,g);for(let T=0;T<A.length;++T){const M=A[T];M>T&&I(L[T],L[M])}for(let T=0;T<D.length;++T)I(D[T],D[(T+1)%D.length]);me(this).selectAll().data(w).enter().append("path").call(Ae,v).attr("d",T=>{const M=go(),N=f(M);return N.lineStart(),N.point(_[T],E[T]),N.point(x[T],k[T]),N.lineEnd(),M}).call(hn,v,S).call(Ty,v,S,s)}return re("svg:g",s).call(ke,this,i,s).call(ve,this,{x:l&&o,y:c&&a}).call(u?m=>m.selectAll().data(Uo(t,b=>u[b]).values()).enter().append("g").each(y):m=>m.datum(t).each(y)).node()}}class GT extends we{constructor(t,n={},r,i=({z:s})=>s){const{x:s,y:o}=n;super(t,{x:{value:s,scale:"x",optional:!0},y:{value:o,scale:"y",optional:!0},z:{value:i(n),optional:!0}},n,r)}render(t,n,r,i,s){const{x:o,y:a}=n,{x:l,y:c,z:u}=r,[f,d]=zs(this,i),h=l?y=>l[y]:zr(f),p=c?y=>c[y]:zr(d),g=this;function v(y){const m=el.from(y,h,p);me(this).append("path").datum(y[0]).call(Ae,g).attr("d",g._render(m,i)).call(hn,g,r)}return re("svg:g",s).call(ke,this,i,s).call(ve,this,{x:l&&o,y:c&&a}).call(u?y=>y.selectAll().data(Uo(t,m=>u[m]).values()).enter().append("g").each(v):y=>y.datum(t).each(v)).node()}}class Glt extends GT{constructor(t,n={}){super(t,n,Vlt),this.fill="none"}_render(t){return t.render()}}class Xlt extends GT{constructor(t,n={}){super(t,n,Ylt,il)}_render(t){return t.renderHull()}}class Qlt extends we{constructor(t,n={}){const{x:r,y:i,z:s}=n;super(t,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},z:{value:s,optional:!0}},n,qlt)}render(t,n,r,i,s){const{x:o,y:a}=n,{x:l,y:c,z:u}=r,[f,d]=zs(this,i),h=l?y=>l[y]:zr(f),p=c?y=>c[y]:zr(d),g=this;function v(y){const m=el.from(y,h,p),b=j7(m,i);me(this).selectAll().data(y).enter().append("path").call(Ae,g).attr("d",(w,S)=>b.renderCell(S)).call(hn,g,r)}return re("svg:g",s).call(ke,this,i,s).call(ve,this,{x:l&&o,y:c&&a}).call(u?y=>y.selectAll().data(Uo(t,m=>u[m]).values()).enter().append("g").each(v):y=>y.datum(t).each(v)).node()}}class Klt extends GT{constructor(t,n){super(t,n,Wlt),this.fill="none"}_render(t,n){return j7(t,n).render()}}function j7(e,t){const{width:n,height:r,marginTop:i,marginRight:s,marginBottom:o,marginLeft:a}=t;return e.voronoi([a,i,n-s,r-o])}function My(e,t,{x:n,y:r,...i}={}){return[n,r]=Ki(n,r),new e(t,{...i,x:n,y:r})}function Zlt(e,t){return My(Hlt,e,t)}function Jlt(e,t){return My(Glt,e,t)}function tct(e,t){return My(Xlt,e,t)}function ect(e,t){return My(Qlt,e,t)}function nct(e,t){return My(Klt,e,t)}const rct={ariaLabel:"density",fill:"none",stroke:"currentColor",strokeMiterlimit:1};class V7 extends we{constructor(t,{x:n,y:r,z:i,weight:s,fill:o,stroke:a,...l}={}){const c=yN(o)&&(o="currentColor",!0),u=yN(a)&&(a="currentColor",!0);super(t,{x:{value:n,scale:"x",optional:!0},y:{value:r,scale:"y",optional:!0},z:{value:il({z:i,fill:o,stroke:a}),optional:!0},weight:{value:s,optional:!0}},oct({...l,fill:o,stroke:a},c,u),rct),c&&(this.fill=void 0),u&&(this.stroke=void 0),this.z=i}filter(t){return t}render(t,n,r,i,s){const{contours:o}=r,a=nl();return re("svg:g",s).call(ke,this,i,s).call(ve,this,{}).call(l=>l.selectAll().data(t).enter().append("path").call(Ae,this).call(hn,this,r).attr("d",c=>a(o[c]))).node()}}function ict(e,{x:t,y:n,...r}={}){return[t,n]=Ki(t,n),new V7(e,{...r,x:t,y:n})}const sct=new Set(["x","y","z","weight"]);function oct(e,t,n){let{bandwidth:i,thresholds:s}=e;return i=i===void 0?20:+i,s=s===void 0?20:typeof(s==null?void 0:s[Symbol.iterator])=="function"?fr(s):+s,xr(e,function(o,a,l,c,u,f){var L;const d=l.weight?fr(l.weight.value):null,h=(L=l.z)==null?void 0:L.value,{z:p}=this,[g,v]=zs(this,u),{width:y,height:m}=u,{x:b,y:w}=Iv(l,c,f),S=Object.fromEntries(Object.entries(l).filter(([T])=>!sct.has(T)).map(([T,M])=>[T,{...M,value:[]}])),_=t&&[],x=n&&[],E=rJ().x(b?T=>b[T]:g).y(w?T=>w[T]:v).weight(d?T=>d[T]:1).size([y,m]).bandwidth(i),k=[];for(const T of a){const M=[];k.push(M);for(const N of h?lT(T,h,p):[T]){const F=E.contours(N);M.push([N,F])}}let I=s;if(!(I instanceof Af)){let T=0;for(const M of k)for(const[,N]of M){const F=N.max;F>T&&(T=F)}I=Float64Array.from({length:s-1},(M,N)=>T*100*(N+1)/s)}const A=[],D=[];for(const T of k){const M=[];A.push(M);for(const[N,F]of T)for(const O of I){M.push(D.length),D.push(F(O/100)),_&&_.push(O),x&&x.push(O);for(const C in S)S[C].value.push(l[C].value[N[0]])}}return _&&_.push(0),x&&x.push(0),{data:o,facets:A,channels:{...S,..._&&{fill:{value:_,scale:"color"}},...x&&{stroke:{value:x,scale:"color"}},contours:{value:D}}}})}function yN(e){return/^density$/i.test(e)}const act={ariaLabel:"geo",fill:"none",stroke:"currentColor",strokeWidth:1,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class Y7 extends we{constructor(t,n={}){const[r,i]=en(n.r,3);super(t,{geometry:{value:n.geometry,scale:"projection"},r:{value:r,scale:"r",filter:xo,optional:!0}},PT(n),act),this.r=i}render(t,n,r,i,s){const{geometry:o,r:a}=r,l=nl(s.projection??lct(n)),{r:c}=this;return yv(c)?t=[]:c!==void 0&&l.pointRadius(c),re("svg:g",s).call(ke,this,i,s).call(ve,this,n).call(u=>{u.selectAll().data(t).enter().append("path").call(Ae,this).attr("d",a?f=>l.pointRadius(a[f])(o[f]):f=>l(o[f])).call(hn,this,r)}).node()}}function lct({x:e,y:t}){if(e||t)return e??(e=n=>n),t??(t=n=>n),l1({point(n,r){this.stream.point(e(n),t(r))}})}function XT(e,{geometry:t=_t,...n}={}){switch(e==null?void 0:e.type){case"FeatureCollection":e=e.features;break;case"GeometryCollection":e=e.geometries;break;case"Feature":case"LineString":case"MultiLineString":case"MultiPoint":case"MultiPolygon":case"Point":case"Polygon":case"Sphere":e=[e];break}return new Y7(e,{geometry:t,...n})}function cct({strokeWidth:e=1.5,...t}={}){return XT({type:"Sphere"},{strokeWidth:e,...t})}function uct({strokeOpacity:e=.1,...t}={}){return XT(ZJ(),{strokeOpacity:e,...t})}const kh=.5,Dh=0;function fct(e={fill:"count"},{binWidth:t,...n}={}){const{z:r}=n;return t=t===void 0?20:Yt(t),e=tT(e,n),ya(e,"fill")&&(n.channels={...n.channels,fill:{value:[]}}),n.symbol===void 0&&(n.symbol="hexagon"),n.r===void 0&&!ya(e,"r")&&(n.r=t/2),xr(n,(i,s,o,a,l,c)=>{let{x:u,y:f,z:d,fill:h,stroke:p,symbol:g}=o;if(u===void 0)throw new Error("missing channel: x");if(f===void 0)throw new Error("missing channel: y");({x:u,y:f}=Iv(o,a,c)),d=d?d.value:Pt(i,r),h=h==null?void 0:h.value,p=p==null?void 0:p.value,g=g==null?void 0:g.value;const v=rT(e,{z:d,fill:h,stroke:p,symbol:g}),y=d&&[],m=h&&[],b=p&&[],w=g&&[],S=[],_=[],x=[];let E=-1;for(const D of e)D.initialize(i);for(const D of s){const L=[];for(const T of e)T.scope("facet",D);for(const[T,M]of Wu(D,v))for(const N of dct(M,u,f,t)){L.push(++E),_.push(N.x),x.push(N.y),d&&y.push(v===d?T:d[N[0]]),h&&m.push(v===h?T:h[N[0]]),p&&b.push(v===p?T:p[N[0]]),g&&w.push(v===g?T:g[N[0]]);for(const F of e)F.reduce(N)}S.push(L)}const k=o.x.scale,I=o.y.scale,A={x:{value:_,source:a[k]?{value:xe(_,a[k].invert),scale:k}:null},y:{value:x,source:a[I]?{value:xe(x,a[I].invert),scale:I}:null},...d&&{z:{value:y}},...h&&{fill:{value:m,scale:"auto"}},...p&&{stroke:{value:b,scale:"auto"}},...g&&{symbol:{value:w,scale:"auto"}},...Object.fromEntries(e.map(({name:D,output:L})=>[D,{scale:"auto",label:L.label,radius:D==="r"?t/2:void 0,value:L.transform()}]))};return{data:i,facets:S,channels:A}})}function dct(e,t,n,r){const i=r*(1.5/hC),s=new Map;for(const o of e){let a=t[o],l=n[o];if(isNaN(a)||isNaN(l))continue;let c=Math.round(l=(l-Dh)/i),u=Math.round(a=(a-kh)/r-(c&1)/2),f=l-c;if(Math.abs(f)*3>1){let p=a-u,g=u+(a<u?-1:1)/2,v=c+(l<c?-1:1),y=a-g,m=l-v;p*p+f*f>y*y+m*m&&(u=g+(c&1?1:-1)/2,c=v)}const d=`${u},${c}`;let h=s.get(d);h===void 0&&(s.set(d,h=[]),h.x=(u+(c&1)/2)*r+kh,h.y=c*i+Dh),h.push(o)}return s.values()}const hct={ariaLabel:"hexgrid",fill:"none",stroke:"currentColor",strokeOpacity:.1};function pct(e){return new q7(e)}class q7 extends we{constructor({binWidth:t=20,clip:n=!0,...r}={}){super(Nh,void 0,{clip:n,...r},hct),this.binWidth=Yt(t)}render(t,n,r,i,s){const{binWidth:o}=this,{marginTop:a,marginRight:l,marginBottom:c,marginLeft:u,width:f,height:d}=i,h=u-kh,p=f-l-kh,g=a-Dh,v=d-c-Dh,y=o/2,m=y*pC,b=m/2,w=y*2,S=m*1.5,_=Math.floor(h/w),x=Math.ceil(p/w),E=Math.floor((g+b)/S),k=Math.ceil((v-b)/S)+1,I=`m0,${Xo(-m)}l${Xo(y)},${Xo(b)}v${Xo(m)}l${Xo(-y)},${Xo(b)}`;let A=I;for(let D=E;D<k;++D)for(let L=_;L<x;++L)A+=`M${Xo(L*w+(D&1)*y)},${Xo(D*S)}${I}`;return re("svg:g",s).datum(0).call(ke,this,i,s).call(ve,this,{},Tn+kh,Tn+Dh).call(D=>D.append("path").call(Ae,this).call(hn,this,r).attr("d",A)).node()}}function Xo(e){return Math.round(e*1e3)/1e3}const yct={ariaLabel:"image",fill:null,stroke:null};function mct(e){return/^\.*\//.test(e)}function gct(e){return/^(blob|data|file|http|https):/i.test(e)}function bct(e){return typeof e=="string"&&(mct(e)||gct(e))?[void 0,e]:[e,void 0]}class W7 extends we{constructor(t,n={}){let{x:r,y:i,r:s,width:o,height:a,rotate:l,src:c,preserveAspectRatio:u,crossOrigin:f,frameAnchor:d,imageRendering:h}=n;s==null&&(s=void 0),s===void 0&&o===void 0&&a===void 0?o=a=16:o===void 0&&a!==void 0?o=a:a===void 0&&o!==void 0&&(a=o);const[p,g]=bct(c),[v,y]=en(s),[m,b]=en(o,y!==void 0?y*2:void 0),[w,S]=en(a,y!==void 0?y*2:void 0),[_,x]=en(l,0);super(t,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},r:{value:v,scale:"r",filter:xo,optional:!0},width:{value:m,filter:xo,optional:!0},height:{value:w,filter:xo,optional:!0},rotate:{value:_,optional:!0},src:{value:p,optional:!0}},PT(n),yct),this.src=g,this.width=b,this.rotate=x,this.height=S,this.r=y,this.preserveAspectRatio=qe(u,"xMidYMid"),this.crossOrigin=Rn(f),this.frameAnchor=vy(d),this.imageRendering=qe(h,"auto")}render(t,n,r,i,s){const{x:o,y:a}=n,{x:l,y:c,width:u,height:f,r:d,rotate:h,src:p}=r,{r:g,width:v,height:y,rotate:m}=this,[b,w]=zs(this,i);return re("svg:g",s).call(ke,this,i,s).call(ve,this,{x:l&&o,y:c&&a}).call(S=>S.selectAll().data(t).enter().append("image").call(Ae,this).attr("x",mN(l,u,d,b,v,g)).attr("y",mN(c,f,d,w,y,g)).attr("width",u?_=>u[_]:v!==void 0?v:d?_=>d[_]*2:g*2).attr("height",f?_=>f[_]:y!==void 0?y:d?_=>d[_]*2:g*2).attr("transform",h?_=>`rotate(${h[_]})`:m?`rotate(${m})`:null).attr("transform-origin",h||m?$v`${l?_=>l[_]:b}px ${c?_=>c[_]:w}px`:null).call(pt,"href",p?_=>p[_]:this.src).call(pt,"preserveAspectRatio",this.preserveAspectRatio).call(pt,"crossorigin",this.crossOrigin).call(pt,"image-rendering",this.imageRendering).call(pt,"clip-path",d?_=>`circle(${d[_]}px)`:g!==void 0?`circle(${g}px)`:null).call(hn,this,r)).node()}}function mN(e,t,n,r,i,s){return t&&e?o=>e[o]-t[o]/2:t?o=>r-t[o]/2:e&&i!==void 0?o=>e[o]-i/2:i!==void 0?r-i/2:n&&e?o=>e[o]-n[o]:n?o=>r-n[o]:e?o=>e[o]-s:r-s}function vct(e,{x:t,y:n,...r}={}){return r.frameAnchor===void 0&&([t,n]=Ki(t,n)),new W7(e,{...r,x:t,y:n})}function wct(e,t,n){var r=1e-8,i=t-1,s=n-1,o=0,a,l,c,u,f,d,h,p,g,v,y;if(e<=0)return 0;if(e>=1)return 1;for(t>=1&&n>=1?(c=e<.5?e:1-e,u=Math.sqrt(-2*Math.log(c)),h=(2.30753+u*.27061)/(1+u*(.99229+u*.04481))-u,e<.5&&(h=-h),p=(h*h-3)/6,g=2/(1/(2*t-1)+1/(2*n-1)),v=h*Math.sqrt(p+g)/g-(1/(2*n-1)-1/(2*t-1))*(p+5/6-2/(3*g)),h=t/(t+n*Math.exp(2*v))):(a=Math.log(t/(t+n)),l=Math.log(n/(t+n)),u=Math.exp(t*a)/t,f=Math.exp(n*l)/n,v=u+f,e<u/v?h=Math.pow(t*v*e,1/t):h=1-Math.pow(n*v*(1-e),1/n)),y=-Gu(t)-Gu(n)+Gu(t+n);o<10;o++){if(h===0||h===1)return h;if(d=_ct(h,t,n)-e,u=Math.exp(i*Math.log(h)+s*Math.log(1-h)+y),f=d/u,h-=u=f/(1-.5*Math.min(1,f*(i/h-s/(1-h)))),h<=0&&(h=.5*(h+u)),h>=1&&(h=.5*(h+u+1)),Math.abs(u)<r*h&&o>0)break}return h}function _ct(e,t,n){var r=e===0||e===1?0:Math.exp(Gu(t+n)-Gu(t)-Gu(n)+t*Math.log(e)+n*Math.log(1-e));return e<0||e>1?!1:e<(t+1)/(t+n+2)?r*gN(e,t,n)/t:1-r*gN(1-e,n,t)/n}function gN(e,t,n){var r=1e-30,i=1,s=t+n,o=t+1,a=t-1,l=1,c=1-s*e/o,u,f,d,h;for(Math.abs(c)<r&&(c=r),c=1/c,h=c;i<=100&&(u=2*i,f=i*(n-i)*e/((a+u)*(t+u)),c=1+f*c,Math.abs(c)<r&&(c=r),l=1+f/l,Math.abs(l)<r&&(l=r),c=1/c,h*=c*l,f=-(t+i)*(s+i)*e/((t+u)*(o+u)),c=1+f*c,Math.abs(c)<r&&(c=r),l=1+f/l,Math.abs(l)<r&&(l=r),c=1/c,d=c*l,h*=d,!(Math.abs(d-1)<3e-7));i++);return h}function Gu(e){var t=0,n=[76.18009172947146,-86.5053203294167,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18],r=1.000000000190015,i,s,o;for(o=(s=i=e)+5.5,o-=(i+.5)*Math.log(o);t<6;t++)r+=n[t]/++s;return Math.log(2.506628274631*r/i)-o}function Sct(e,t){var n=wct(2*Math.min(e,1-e),.5*t,.5);return n=Math.sqrt(t*(1-n)/n),e>.5?n:-n}const xct={ariaLabel:"linear-regression",fill:"currentColor",fillOpacity:.1,stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class H7 extends we{constructor(t,n={}){const{x:r,y:i,z:s,ci:o=.95,precision:a=4}=n;if(super(t,{x:{value:r,scale:"x"},y:{value:i,scale:"y"},z:{value:il(n),optional:!0}},n,xct),this.z=s,this.ci=+o,this.precision=+a,!(0<=this.ci&&this.ci<1))throw new Error(`invalid ci; not in [0, 1): ${o}`);if(!(this.precision>0))throw new Error(`invalid precision: ${a}`)}render(t,n,r,i,s){const{x:o,y:a,z:l}=r,{ci:c}=this;return re("svg:g",s).call(ke,this,i,s).call(ve,this,n).call(u=>u.selectAll().data(l?lT(t,l,this.z):[t]).enter().call(f=>f.append("path").attr("fill","none").call(Ae,this).call(E1,this,{...r,fill:null,fillOpacity:null}).attr("d",d=>this._renderLine(d,o,a)).call(c&&!Mf(this.fill)?d=>d.select(Ict).attr("stroke","none").call(Ae,this).call(E1,this,{...r,stroke:null,strokeOpacity:null,strokeWidth:null}).attr("d",h=>this._renderBand(h,o,a)):()=>{}))).node()}}function Ict(){return this.parentNode.insertBefore(this.ownerDocument.createElementNS(cc.svg,"path"),this)}class Tct extends H7{constructor(t,n){super(t,n)}_renderBand(t,n,r){const{ci:i,precision:s}=this,[o,a]=gn(t,u=>r[u]),l=B1(t,r,n),c=G7(t,r,n,(1-i)/2,l);return D3().y(u=>u).x0(u=>c(u,-1)).x1(u=>c(u,1))(Dr(o,a-s/2,s).concat(a))}_renderLine(t,n,r){const[i,s]=gn(t,a=>r[a]),o=B1(t,r,n);return`M${o(i)},${i}L${o(s)},${s}`}}class Ect extends H7{constructor(t,n){super(t,n)}_renderBand(t,n,r){const{ci:i,precision:s}=this,[o,a]=gn(t,u=>n[u]),l=B1(t,n,r),c=G7(t,n,r,(1-i)/2,l);return D3().x(u=>u).y0(u=>c(u,-1)).y1(u=>c(u,1))(Dr(o,a-s/2,s).concat(a))}_renderLine(t,n,r){const[i,s]=gn(t,a=>n[a]),o=B1(t,n,r);return`M${i},${o(i)}L${s},${o(s)}`}}function Act(e,{y:t=Ar,x:n=_t,stroke:r,fill:i=Ge(r)?"currentColor":r,...s}={}){return new Tct(e,kT({...s,x:n,y:t,fill:i,stroke:r}))}function Mct(e,{x:t=Ar,y:n=_t,stroke:r,fill:i=Ge(r)?"currentColor":r,...s}={}){return new Ect(e,NT({...s,x:t,y:n,fill:i,stroke:r}))}function B1(e,t,n){let r=0,i=0,s=0,o=0;for(const u of e){const f=t[u],d=n[u];r+=f,i+=d,s+=f*d,o+=f*f}const a=e.length,l=(a*s-r*i)/(a*o-r*r),c=(i-l*r)/a;return u=>l*u+c}function G7(e,t,n,r,i){const s=Bs(e,u=>t[u])/e.length;let o=0,a=0;for(const u of e)o+=(t[u]-s)**2,a+=(n[u]-i(t[u]))**2;const l=Math.sqrt(a/(e.length-2)),c=Sct(r,e.length-2);return(u,f)=>{const d=i(u),h=l*Math.sqrt(1/e.length+(u-s)**2/o);return d+f*c*h}}function ex({path:e=_t,delimiter:t,frameAnchor:n,treeLayout:r=d1,treeSort:i,treeSeparation:s,treeAnchor:o,treeFilter:a,...l}={}){o=QT(o),i=Q7(i),a!=null&&(a=rx(a)),n===void 0&&(n=o.frameAnchor);const c=K7(t),u=iU(l,rx),[f,d]=Br(),[h,p]=Br();return{x:f,y:h,frameAnchor:n,...Ps(l,(g,v)=>{const y=c(Pt(g,e)),m=d([]),b=p([]);let w=-1;const S=[],_=[],x=BF().path(k=>y[k]),E=r();E.nodeSize&&E.nodeSize([1,1]),E.separation&&s!==void 0&&E.separation(s??P3);for(const k of u)k[F1]=k[nU]([]);for(const k of v){const I=[],A=x(k.filter(D=>y[D]!=null)).each(D=>D.data=g[D.data]);i!=null&&A.sort(i),E(A);for(const D of A.descendants())if(!(a!=null&&!a(D))){I.push(++w),S[w]=D.data,o.position(D,w,m,b);for(const L of u)L[F1][w]=L[rU](D)}_.push(I)}return{data:S,facets:_}}),...Object.fromEntries(u)}}function X7({path:e=_t,delimiter:t,curve:n="bump-x",stroke:r="#555",strokeWidth:i=1.5,strokeOpacity:s=.5,treeLayout:o=d1,treeSort:a,treeSeparation:l,treeAnchor:c,treeFilter:u,...f}={}){c=QT(c),a=Q7(a),u!=null&&(u=vN(u)),f={curve:n,stroke:r,strokeWidth:i,strokeOpacity:s,...f};const d=K7(t),h=iU(f,vN),[p,g]=Br(),[v,y]=Br(),[m,b]=Br(),[w,S]=Br();return{x1:p,x2:v,y1:m,y2:w,...Ps(f,(_,x)=>{const E=d(Pt(_,e)),k=g([]),I=y([]),A=b([]),D=S([]);let L=-1;const T=[],M=[],N=BF().path(O=>E[O]),F=o();F.nodeSize&&F.nodeSize([1,1]),F.separation&&l!==void 0&&F.separation(l??P3);for(const O of h)O[F1]=O[nU]([]);for(const O of x){const C=[],B=N(O.filter(P=>E[P]!=null)).each(P=>P.data=_[P.data]);a!=null&&B.sort(a),F(B);for(const{source:P,target:z}of B.links())if(!(u!=null&&!u(z,P))){C.push(++L),T[L]=z.data,c.position(P,L,k,A),c.position(z,L,I,D);for(const H of h)H[F1][L]=H[rU](z,P)}M.push(C)}return{data:T,facets:M}}),...Object.fromEntries(h)}}function QT(e="left"){switch(`${e}`.trim().toLowerCase()){case"left":return $ct;case"right":return Nct}throw new Error(`invalid tree anchor: ${e}`)}const $ct={frameAnchor:"left",dx:6,position({x:e,y:t},n,r,i){r[n]=t,i[n]=-e}},Nct={frameAnchor:"right",dx:-6,position({x:e,y:t},n,r,i){r[n]=-t,i[n]=-e}};function Q7(e){return e==null||typeof e=="function"?e:`${e}`.trim().toLowerCase().startsWith("node:")?bN(rx(e)):bN(kct(e))}function bN(e){return(t,n)=>vi(e(t),e(n))}function kct(e){return t=>{var n;return(n=t.data)==null?void 0:n[e]}}function K7(e="/"){if(e=`${e}`,e==="/")return n=>n;if(e.length!==1)throw new Error("delimiter must be exactly one character");const t=e.charCodeAt(0);return n=>n.map(r=>Dct(r,t))}const nx=92,Z7=47;function Dct(e,t){if(t===nx)throw new Error("delimiter cannot be backslash");let n=!1;for(let r=0,i=e.length;r<i;++r){switch(e.charCodeAt(r)){case nx:if(!n){n=!0;continue}break;case t:n?(e=e.slice(0,r-1)+e.slice(r),--r,--i):e=e.slice(0,r)+"/"+e.slice(r+1);break;case Z7:n?(e=e.slice(0,r)+"\\\\"+e.slice(r),r+=2,i+=2):(e=e.slice(0,r)+"\\"+e.slice(r),++r,++i);break}n=!1}return e}function Oct(e){let t=!1;for(let n=0,r=e.length;n<r;++n){switch(e.charCodeAt(n)){case nx:if(!t){t=!0;continue}case Z7:t&&(e=e.slice(0,n-1)+e.slice(n),--n,--r);break}t=!1}return e}function J7(e){return Si(e)&&typeof e.node=="function"}function Bct(e){return Si(e)&&typeof e.link=="function"}function rx(e){if(J7(e))return e.node;if(e=`${e}`.trim().toLowerCase(),!!e.startsWith("node:")){switch(e){case"node:name":return sx;case"node:path":return ix;case"node:internal":return tU;case"node:external":return eU;case"node:depth":return ox;case"node:height":return ax}throw new Error(`invalid node value: ${e}`)}}function vN(e){if(J7(e))return e.node;if(Bct(e))return e.link;if(e=`${e}`.trim().toLowerCase(),!(!e.startsWith("node:")&&!e.startsWith("parent:"))){switch(e){case"parent:name":return B0(sx);case"parent:path":return B0(ix);case"parent:depth":return B0(ox);case"parent:height":return B0(ax);case"node:name":return sx;case"node:path":return ix;case"node:internal":return tU;case"node:external":return eU;case"node:depth":return ox;case"node:height":return ax}throw new Error(`invalid link value: ${e}`)}}function ix(e){return e.id}function sx(e){return Fct(e.id)}function ox(e){return e.depth}function ax(e){return e.height}function tU(e){return!!e.children}function eU(e){return!e.children}function B0(e){return(t,n)=>n==null?void 0:e(n)}function Fct(e){let t=e.length;for(;--t>0&&!Lct(e,t););return Oct(e.slice(t+1))}function Lct(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}const nU=2,rU=3,F1=4;function iU(e,t){const n=[];for(const r in e){const i=e[r],s=t(i);s!==void 0&&n.push([r,...Br(i),s])}return n}function sU(e,{fill:t,stroke:n,strokeWidth:r,strokeOpacity:i,strokeLinejoin:s,strokeLinecap:o,strokeMiterlimit:a,strokeDasharray:l,strokeDashoffset:c,marker:u,markerStart:f=u,markerEnd:d=u,dot:h=Ge(f)&&Ge(d),text:p="node:name",textStroke:g="white",title:v="node:path",dx:y,dy:m,textAnchor:b,treeLayout:w=d1,textLayout:S=w===d1||w===kF?"mirrored":"normal",tip:_,...x}={}){if(y===void 0&&(y=QT(x.treeAnchor).dx),b!==void 0)throw new Error("textAnchor is not a configurable tree option");S=qr(S,"textLayout",["mirrored","normal"]);function E(k){return Nf(e,ex({treeLayout:w,text:p,fill:t===void 0?"currentColor":t,stroke:g,dx:y,dy:m,title:v,...k,...x}))}return Gi(y7(e,X7({treeLayout:w,markerStart:f,markerEnd:d,stroke:n!==void 0?n:t===void 0?"node:internal":t,strokeWidth:r,strokeOpacity:i,strokeLinejoin:s,strokeLinecap:o,strokeMiterlimit:a,strokeDasharray:l,strokeDashoffset:c,...x})),h?al(e,ex({treeLayout:w,fill:t===void 0?"node:internal":t,title:v,tip:_,...x})):null,p!=null?S==="mirrored"?[E({textAnchor:"start",treeFilter:"node:external"}),E({textAnchor:"end",treeFilter:"node:internal",dx:-y})]:E():null)}function Rct(e,t){return sU(e,{...t,treeLayout:kF})}function Cct({geometry:e=_t,...t}={}){return xr({...t,x:null,y:null},(n,r,i,s,o,{projection:a})=>{const l=Pt(n,e),c=l.length,u=new Float64Array(c),f=new Float64Array(c),d=nl(a);for(let h=0;h<c;++h)[u[h],f[h]]=d.centroid(l[h]);return{data:n,facets:r,channels:{x:{value:u,scale:a==null?"x":null,source:null},y:{value:f,scale:a==null?"y":null,source:null}}}})}function Uct({geometry:e=_t,...t}={}){let n;return{...t,x:{transform:r=>Float64Array.from(n=Pt(Pt(r,e),PJ),([i])=>i)},y:{transform:()=>Float64Array.from(n,([,r])=>r)}}}function Pct(e,t,n,r,i){for(var s=i+1;r<=i;){var o=r+i>>>1,a=e[o],l=n!==void 0?n(a,t):a-t;l>=0?(s=o,i=o-1):r=o+1}return s}function zct(e,t,n,r,i){for(var s=i+1;r<=i;){var o=r+i>>>1,a=e[o],l=n!==void 0?n(a,t):a-t;l>0?(s=o,i=o-1):r=o+1}return s}function jct(e,t,n,r,i){for(var s=r-1;r<=i;){var o=r+i>>>1,a=e[o],l=n!==void 0?n(a,t):a-t;l<0?(s=o,r=o+1):i=o-1}return s}function Vct(e,t,n,r,i){for(var s=r-1;r<=i;){var o=r+i>>>1,a=e[o],l=n!==void 0?n(a,t):a-t;l<=0?(s=o,r=o+1):i=o-1}return s}function Yct(e,t,n,r,i){for(;r<=i;){var s=r+i>>>1,o=e[s],a=n!==void 0?n(o,t):o-t;if(a===0)return s;a<=0?r=s+1:i=s-1}return-1}function Fd(e,t,n,r,i,s){return typeof n=="function"?s(e,t,n,r===void 0?0:r|0,i===void 0?e.length-1:i|0):s(e,t,void 0,n===void 0?0:n|0,r===void 0?e.length-1:r|0)}var qct={ge:function(e,t,n,r,i){return Fd(e,t,n,r,i,Pct)},gt:function(e,t,n,r,i){return Fd(e,t,n,r,i,zct)},lt:function(e,t,n,r,i){return Fd(e,t,n,r,i,jct)},le:function(e,t,n,r,i){return Fd(e,t,n,r,i,Vct)},eq:function(e,t,n,r,i){return Fd(e,t,n,r,i,Yct)}},L1=qct,$u=0,Al=1,mm=2,Wct=Gct;function KT(e,t,n,r,i){this.mid=e,this.left=t,this.right=n,this.leftPoints=r,this.rightPoints=i,this.count=(t?t.count:0)+(n?n.count:0)+r.length}var $y=KT.prototype;function E_(e,t){e.mid=t.mid,e.left=t.left,e.right=t.right,e.leftPoints=t.leftPoints,e.rightPoints=t.rightPoints,e.count=t.count}function oU(e,t){var n=Bf(t);e.mid=n.mid,e.left=n.left,e.right=n.right,e.leftPoints=n.leftPoints,e.rightPoints=n.rightPoints,e.count=n.count}function wN(e,t){var n=e.intervals([]);n.push(t),oU(e,n)}function _N(e,t){var n=e.intervals([]),r=n.indexOf(t);return r<0?$u:(n.splice(r,1),oU(e,n),Al)}$y.intervals=function(e){return e.push.apply(e,this.leftPoints),this.left&&this.left.intervals(e),this.right&&this.right.intervals(e),e};$y.insert=function(e){var t=this.count-this.leftPoints.length;if(this.count+=1,e[1]<this.mid)this.left?4*(this.left.count+1)>3*(t+1)?wN(this,e):this.left.insert(e):this.left=Bf([e]);else if(e[0]>this.mid)this.right?4*(this.right.count+1)>3*(t+1)?wN(this,e):this.right.insert(e):this.right=Bf([e]);else{var n=L1.ge(this.leftPoints,e,ZT),r=L1.ge(this.rightPoints,e,JT);this.leftPoints.splice(n,0,e),this.rightPoints.splice(r,0,e)}};$y.remove=function(e){var t=this.count-this.leftPoints;if(e[1]<this.mid){if(!this.left)return $u;var n=this.right?this.right.count:0;if(4*n>3*(t-1))return _N(this,e);var r=this.left.remove(e);return r===mm?(this.left=null,this.count-=1,Al):(r===Al&&(this.count-=1),r)}else if(e[0]>this.mid){if(!this.right)return $u;var i=this.left?this.left.count:0;if(4*i>3*(t-1))return _N(this,e);var r=this.right.remove(e);return r===mm?(this.right=null,this.count-=1,Al):(r===Al&&(this.count-=1),r)}else{if(this.count===1)return this.leftPoints[0]===e?mm:$u;if(this.leftPoints.length===1&&this.leftPoints[0]===e){if(this.left&&this.right){for(var s=this,o=this.left;o.right;)s=o,o=o.right;if(s===this)o.right=this.right;else{var a=this.left,r=this.right;s.count-=o.count,s.right=o.left,o.left=a,o.right=r}E_(this,o),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?E_(this,this.left):E_(this,this.right);return Al}for(var a=L1.ge(this.leftPoints,e,ZT);a<this.leftPoints.length&&this.leftPoints[a][0]===e[0];++a)if(this.leftPoints[a]===e){this.count-=1,this.leftPoints.splice(a,1);for(var r=L1.ge(this.rightPoints,e,JT);r<this.rightPoints.length&&this.rightPoints[r][1]===e[1];++r)if(this.rightPoints[r]===e)return this.rightPoints.splice(r,1),Al}return $u}};function aU(e,t,n){for(var r=0;r<e.length&&e[r][0]<=t;++r){var i=n(e[r]);if(i)return i}}function lU(e,t,n){for(var r=e.length-1;r>=0&&e[r][1]>=t;--r){var i=n(e[r]);if(i)return i}}function cU(e,t){for(var n=0;n<e.length;++n){var r=t(e[n]);if(r)return r}}$y.queryPoint=function(e,t){if(e<this.mid){if(this.left){var n=this.left.queryPoint(e,t);if(n)return n}return aU(this.leftPoints,e,t)}else if(e>this.mid){if(this.right){var n=this.right.queryPoint(e,t);if(n)return n}return lU(this.rightPoints,e,t)}else return cU(this.leftPoints,t)};$y.queryInterval=function(e,t,n){if(e<this.mid&&this.left){var r=this.left.queryInterval(e,t,n);if(r)return r}if(t>this.mid&&this.right){var r=this.right.queryInterval(e,t,n);if(r)return r}return t<this.mid?aU(this.leftPoints,t,n):e>this.mid?lU(this.rightPoints,e,n):cU(this.leftPoints,n)};function Hct(e,t){return e-t}function ZT(e,t){var n=e[0]-t[0];return n||e[1]-t[1]}function JT(e,t){var n=e[1]-t[1];return n||e[0]-t[0]}function Bf(e){if(e.length===0)return null;for(var t=[],n=0;n<e.length;++n)t.push(e[n][0],e[n][1]);t.sort(Hct);for(var r=t[t.length>>1],i=[],s=[],o=[],n=0;n<e.length;++n){var a=e[n];a[1]<r?i.push(a):r<a[0]?s.push(a):o.push(a)}var l=o,c=o.slice();return l.sort(ZT),c.sort(JT),new KT(r,Bf(i),Bf(s),l,c)}function lx(e){this.root=e}var od=lx.prototype;od.insert=function(e){this.root?this.root.insert(e):this.root=new KT(e[0],null,null,[e],[e])};od.remove=function(e){if(this.root){var t=this.root.remove(e);return t===mm&&(this.root=null),t!==$u}return!1};od.queryPoint=function(e,t){if(this.root)return this.root.queryPoint(e,t)};od.queryInterval=function(e,t,n){if(e<=t&&this.root)return this.root.queryInterval(e,t,n)};Object.defineProperty(od,"count",{get:function(){return this.root?this.root.count:0}});Object.defineProperty(od,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}});function Gct(e){return!e||e.length===0?new lx(null):new lx(Bf(e))}const Xct=v4(Wct),Qct=({marginLeft:e})=>[1,e],Kct=({width:e,marginRight:t})=>[-1,e-t],Zct=({width:e,marginLeft:t,marginRight:n})=>[0,(t+e-n)/2],Jct=({marginTop:e})=>[1,e],tut=({height:e,marginBottom:t})=>[-1,e-t],eut=({height:e,marginTop:t,marginBottom:n})=>[0,(t+e-n)/2];function uU(e){return typeof e=="string"?{anchor:e}:e}function nut(e={},t={}){arguments.length===1&&([e,t]=fU(e));let{anchor:n="left",padding:r=1,r:i=t.r}=uU(e);switch(`${n}`.toLowerCase()){case"left":n=Qct;break;case"right":n=Kct;break;case"middle":n=Zct;break;default:throw new Error(`unknown dodge anchor: ${n}`)}return dU("x","y",n,Yt(r),i,t)}function rut(e={},t={}){arguments.length===1&&([e,t]=fU(e));let{anchor:n="bottom",padding:r=1,r:i=t.r}=uU(e);switch(`${n}`.toLowerCase()){case"top":n=Jct;break;case"bottom":n=tut;break;case"middle":n=eut;break;default:throw new Error(`unknown dodge anchor: ${n}`)}return dU("y","x",n,Yt(r),i,t)}function fU(e){const{anchor:t,padding:n,...r}=e,{r:i}=r;return[{anchor:t,padding:n,r:i},r]}function dU(e,t,n,r,i,s){if(i!=null&&typeof i!="number"){let{channels:o,sort:a,reverse:l}=s;o=q3(o),(o==null?void 0:o.r)===void 0&&(s={...s,channels:{...o,r:{value:i,scale:"r"}}}),a===void 0&&l===void 0&&(s.sort={channel:"-r"})}return xr(s,function(o,a,l,c,u,f){let{[t]:d,r:h}=l;if(!l[t])throw new Error(`missing channel: ${t}`);({[t]:d}=Iv(l,c,f));const p=h?void 0:i!==void 0?Yt(i):this.r!==void 0?this.r:3;h&&(h=Pt(h.value,c[h.scale]||_t,Float64Array));let[g,v]=n(u);const y=g?sut:iut,m=new Float64Array(d.length),b=h?w=>h[w]:()=>p;for(let w of a){const S=Xct();w=w.filter(h?x=>S1(d[x])&&xo(h[x]):x=>S1(d[x]));const _=new Float64Array(2*w.length+2);for(const x of w){const E=b(x),k=g?E+r:0,I=d[x]-E,A=d[x]+E;let D=2;S.queryInterval(I-r,A+r,([,,T])=>{const M=m[T]-k,N=d[x]-d[T],F=r+(h?h[x]+h[T]:2*p),O=Math.sqrt(F*F-N*N);_[D++]=M-O,_[D++]=M+O});let L=_.slice(0,D);g&&(L=L.filter(T=>T>=0));t:for(const T of L.sort(y)){for(let M=0;M<D;M+=2)if(_[M]+1e-6<T&&T<_[M+1]-1e-6)continue t;m[x]=T+k;break}S.insert([I,A,x])}}g||(g=1);for(const w of a)for(const S of w)m[S]=m[S]*g+v;return{data:o,facets:a,channels:{[e]:{value:m,source:null},[t]:{value:d,source:l[t]},...h&&{r:{value:h,source:l.r}}}}})}function iut(e,t){return Math.abs(e)-Math.abs(t)}function sut(e,t){return e-t}function out(e,t){return arguments.length===1&&({basis:e,...t}=e),VT(tE(e),t)}function aut(e,t){return arguments.length===1&&({basis:e,...t}=e),YT(tE(e),t)}function tE(e){if(e===void 0)return SN;if(typeof e=="function")return Pv(V3(e));if(/^p\d{2}$/i.test(e))return ad(z3(e));switch(`${e}`.toLowerCase()){case"deviation":return uut;case"first":return SN;case"last":return cut;case"max":return fut;case"mean":return dut;case"median":return hut;case"min":return put;case"sum":return yut;case"extent":return lut}throw new Error(`invalid basis: ${e}`)}function Pv(e){return{mapIndex(t,n,r){const i=+e(t,n);for(const s of t)r[s]=n[s]===null?NaN:n[s]/i}}}function ad(e){return Pv((t,n)=>e(t,r=>n[r]))}const lut={mapIndex(e,t,n){const[r,i]=gn(e,o=>t[o]),s=i-r;for(const o of e)n[o]=t[o]===null?NaN:(t[o]-r)/s}},SN=Pv((e,t)=>{for(let n=0;n<e.length;++n){const r=t[e[n]];if(Zn(r))return r}}),cut=Pv((e,t)=>{for(let n=e.length-1;n>=0;--n){const r=t[e[n]];if(Zn(r))return r}}),uut={mapIndex(e,t,n){const r=Yb(e,s=>t[s]),i=ty(e,s=>t[s]);for(const s of e)n[s]=t[s]===null?NaN:i?(t[s]-r)/i:0}},fut=ad(Ne),dut=ad(Yb),hut=ad(up),put=ad(wn),yut=ad(Bs);function mut(e,t={}){if(typeof e=="string")switch(e.toLowerCase()){case"first":return hU(t);case"last":return pU(t)}if(typeof e=="function")return ja(null,e,t);let n,r;for(n in e){if(r!==void 0)throw new Error("ambiguous selector; multiple inputs");r=gut(e[n])}if(r===void 0)throw new Error(`invalid selector: ${e}`);return ja(n,r,t)}function gut(e){if(typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"min":return eE;case"max":return nE}throw new Error(`unknown selector: ${e}`)}function hU(e){return ja(null,Sut,e)}function pU(e){return ja(null,xut,e)}function but(e){return ja("x",eE,e)}function vut(e){return ja("y",eE,e)}function wut(e){return ja("x",nE,e)}function _ut(e){return ja("y",nE,e)}function*Sut(e){yield e[0]}function*xut(e){yield e[e.length-1]}function*eE(e,t){yield VG(e,n=>t[n])}function*nE(e,t){yield a3(e,n=>t[n])}function ja(e,t,n){if(e!=null){if(n[e]==null)throw new Error(`missing channel: ${e}`);e=n[e]}const r=il(n);return Ps(n,(i,s)=>{const o=Pt(i,r),a=Pt(i,e),l=[];for(const c of s){const u=[];for(const f of o?Uo(c,d=>o[d]).values():[c])for(const d of t(f,a))u.push(d);l.push(u)}return{data:i,facets:l}})}const xN=Object.freeze(Object.defineProperty({__proto__:null,Area:Bv,Arrow:m7,BarX:b7,BarY:v7,Cell:Fv,Contour:P7,Density:V7,Dot:Lv,Frame:K5,Geo:Y7,Hexgrid:q7,Image:W7,Line:Rv,Link:p7,Mark:we,Raster:O7,Rect:Cv,RuleX:c5,RuleY:u5,Text:Nv,TickX:T7,TickY:E7,Tip:Z5,Vector:kv,area:Bat,areaX:Ep,areaY:Of,arrow:Pat,auto:Zat,autoSpec:w7,axisFx:O5,axisFy:D5,axisX:xT,axisY:ST,barX:Ul,barY:Pl,bin:$l,binX:fa,binY:da,bollinger:Ql,bollingerX:glt,bollingerY:blt,boxX:wlt,boxY:_lt,cell:Mu,cellX:jat,cellY:Vat,centroid:Cct,circle:Hat,cluster:Rct,column:Br,contour:Flt,crosshair:Rlt,crosshairX:Clt,crosshairY:Ult,delaunayLink:Zlt,delaunayMesh:Jlt,density:ict,dodgeX:nut,dodgeY:rut,dot:al,dotX:qat,dotY:Wat,filter:oit,formatIsoDate:SC,formatMonth:Eit,formatWeekday:Ait,frame:ET,geo:XT,geoCentroid:Uct,graticule:uct,gridFx:U5,gridFy:R5,gridX:C5,gridY:L5,group:J3,groupX:Sp,groupY:xp,groupZ:Z3,hexagon:Gat,hexbin:fct,hexgrid:pct,hull:tct,identity:_t,image:vct,indexOf:Ar,initializer:xr,interpolateNearest:C7,interpolateNone:tx,interpolatorBarycentric:R7,interpolatorRandomWalk:U7,legend:Aot,line:zT,lineX:Ap,lineY:Mp,linearRegressionX:Act,linearRegressionY:Mct,link:y7,map:Fo,mapX:VT,mapY:YT,marks:Gi,normalize:tE,normalizeX:out,normalizeY:aut,plot:AT,pointer:gT,pointerX:bT,pointerY:vT,raster:xlt,rect:jT,rectX:D1,rectY:O1,reverse:ait,ruleX:Pa,ruleY:za,scale:gc,select:mut,selectFirst:hU,selectLast:pU,selectMaxX:wut,selectMaxY:_ut,selectMinX:but,selectMinY:vut,shuffle:lit,sort:yC,sphere:cct,spike:pot,stackX:l7,stackX1:bat,stackX2:vat,stackY:c7,stackY1:wat,stackY2:_at,text:Nf,textX:p5,textY:y5,tickX:A7,tickY:M7,tip:J5,transform:Ps,tree:sU,treeLink:X7,treeNode:ex,valueof:Pt,vector:T5,vectorX:E5,vectorY:A5,voronoi:ect,voronoiMesh:nct,window:Uv,windowX:slt,windowY:olt},Symbol.toStringTag,{value:"Module"})),Iut=new Map([["style","style"],["width","width"],["height","height"],["margin","margin"],["marginLeft","marginLeft"],["marginRight","marginRight"],["marginTop","marginTop"],["marginBottom","marginBottom"],["align","align"],["aspectRatio","aspectRatio"],["axis","axis"],["inset","inset"],["grid","grid"],["label","label"],["padding","padding"],["round","round"],["xScale","x.type"],["xDomain","x.domain"],["xRange","x.range"],["xNice","x.nice"],["xInset","x.inset"],["xInsetLeft","x.insetLeft"],["xInsetRight","x.insetRight"],["xClamp","x.clamp"],["xRound","x.round"],["xAlign","x.align"],["xPadding","x.padding"],["xPaddingInner","x.paddingInner"],["xPaddingOuter","x.paddingOuter"],["xAxis","x.axis"],["xTicks","x.ticks"],["xTickSize","x.tickSize"],["xTickSpacing","x.tickSpacing"],["xTickPadding","x.tickPadding"],["xTickFormat","x.tickFormat"],["xTickRotate","x.tickRotate"],["xGrid","x.grid"],["xLine","x.line"],["xLabel","x.label"],["xLabelAnchor","x.labelAnchor"],["xLabelOffset","x.labelOffset"],["xFontVariant","x.fontVariant"],["xAriaLabel","x.ariaLabel"],["xAriaDescription","x.ariaDescription"],["xReverse","x.reverse"],["xZero","x.zero"],["yScale","y.type"],["yDomain","y.domain"],["yRange","y.range"],["yNice","y.nice"],["yInset","y.inset"],["yInsetTop","y.insetTop"],["yInsetBottom","y.insetBottom"],["yClamp","y.clamp"],["yRound","y.round"],["yAlign","y.align"],["yPadding","y.padding"],["yPaddingInner","y.paddingInner"],["yPaddingOuter","y.paddingOuter"],["yAxis","y.axis"],["yTicks","y.ticks"],["yTickSize","y.tickSize"],["yTickSpacing","y.tickSpacing"],["yTickPadding","y.tickPadding"],["yTickFormat","y.tickFormat"],["yTickRotate","y.tickRotate"],["yGrid","y.grid"],["yLine","y.line"],["yLabel","y.label"],["yLabelAnchor","y.labelAnchor"],["yLabelOffset","y.labelOffset"],["yFontVariant","y.fontVariant"],["yAriaLabel","y.ariaLabel"],["yAriaDescription","y.ariaDescription"],["yReverse","y.reverse"],["yZero","y.zero"],["facetMargin","facet.margin"],["facetMarginTop","facet.marginTop"],["facetMarginBottom","facet.marginBottom"],["facetMarginLeft","facet.marginLeft"],["facetMarginRight","facet.marginRight"],["facetGrid","facet.grid"],["facetLabel","facet.label"],["fxDomain","fx.domain"],["fxRange","fx.range"],["fxNice","fx.nice"],["fxInset","fx.inset"],["fxInsetLeft","fx.insetLeft"],["fxInsetRight","fx.insetRight"],["fxRound","fx.round"],["fxAlign","fx.align"],["fxPadding","fx.padding"],["fxPaddingInner","fx.paddingInner"],["fxPaddingOuter","fx.paddingOuter"],["fxAxis","fx.axis"],["fxTicks","fx.ticks"],["fxTickSize","fx.tickSize"],["fxTickSpacing","fx.tickSpacing"],["fxTickPadding","fx.tickPadding"],["fxTickFormat","fx.tickFormat"],["fxTickRotate","fx.tickRotate"],["fxGrid","fx.grid"],["fxLine","fx.line"],["fxLabel","fx.label"],["fxLabelAnchor","fx.labelAnchor"],["fxLabelOffset","fx.labelOffset"],["fxFontVariant","fx.fontVariant"],["fxAriaLabel","fx.ariaLabel"],["fxAriaDescription","fx.ariaDescription"],["fxReverse","fx.reverse"],["fyDomain","fy.domain"],["fyRange","fy.range"],["fyNice","fy.mice"],["fyInset","fy,inset"],["fyInsetTop","fy.insetTop"],["fyInsetBottom","fy.insetBottom"],["fyRound","fy.round"],["fyAlign","fy.align"],["fyPadding","fy.padding"],["fyPaddingInner","fy.paddingInner"],["fyPaddingOuter","fy.paddingOuter"],["fyAxis","fy.axis"],["fyTicks","fy.ticks"],["fyTickSize","fy.tickSize"],["fyTickSpacing","fy.tickSpacing"],["fyTickPadding","fy.tickPadding"],["fyTickFormat","fy.tickFormat"],["fyTickRotate","fy.tickRotate"],["fyGrid","fy.grid"],["fyLine","fy.line"],["fyLabel","fy.label"],["fyLabelAnchor","fy.labelAnchor"],["fyLabelOffset","fy.labelOffset"],["fyFontVariant","fy.fontVariant"],["fyAriaLabel","fy.ariaLabel"],["fyAriaDescription","fy.ariaDescription"],["fyReverse","fy.reverse"],["colorScale","color.type"],["colorDomain","color.domain"],["colorRange","color.range"],["colorClamp","color.clamp"],["colorNice","color.nice"],["colorScheme","color.scheme"],["colorInterpolate","color.interpolate"],["colorPivot","color.pivot"],["colorSymmetric","color.symmetric"],["colorLabel","color.label"],["colorReverse","color.reverse"],["colorZero","color.zero"],["colorTickFormat","color.tickFormat"],["opacityScale","opacity.type"],["opacityDomain","opacity.domain"],["opacityRange","opacity.range"],["opacityClamp","opacity.clamp"],["opacityNice","opacity.nice"],["opacityLabel","opacity.label"],["opacityReverse","opacity.reverse"],["opacityZero","opacity.zero"],["opacityTickFormat","opacity.tickFormat"],["rScale","r.type"],["rDomain","r.domain"],["rRange","r.range"],["rClamp","r.clamp"],["rNice","r.nice"],["rZero","r.zero"],["lengthScale","length.type"],["lengthDomain","length.domain"],["lengthRange","length.range"],["lengthClamp","length.clamp"],["lengthNice","length.nice"],["lengthZero","length.zero"],["projectionType","projection.type"],["projectionParallels","projection.parallels"],["projectionPrecision","projection.precision"],["projectionRotate","projection.rotate"],["projectionDomain","projection.domain"],["projectionInset","projection.inset"],["projectionInsetLeft","projection.insetLeft"],["projectionInsetRight","projection.insetRight"],["projectionInsetTop","projection.insetTop"],["projectionInsetBottom","projection.insetBottom"],["projectionClip","projection.clip"]]),Tut=new Set(["frame","hexgrid","sphere","graticule"]);function Eut(e,t,n){for(let r=0;r<t.length;++r){const i=t[r];r===t.length-1?e[i]=n:e=e[i]||(e[i]={})}}async function Aut(e){const t={marks:[]},n=[],{attributes:r,marks:i}=e;for(const a in r){const l=Iut.get(a);if(l==null)throw new Error(`Unrecognized plot attribute: ${a}`);const c=r[a];typeof c=="symbol"?n.push(a):c!==void 0&&Eut(t,l.split("."),c)}const s=[];for(const a of i)for(const{type:l,data:c,options:u}of a.plotSpecs())Tut.has(l)?t.marks.push(xN[l](u)):t.marks.push(xN[l](c,u)),s.push(a.index);$ut(t,e);const o=AT(t);Nut(o,s),Mut(e,o,r,n);for(const a of e.interactors)await a.init(o);return o}function Mut(e,t,n,r){r.forEach(i=>{const s=n[i];if(s===ai){if(!i.endsWith("Domain"))throw new Error(`Unsupported fixed attribute: ${i}`);const o=i.slice(0,-6),a=t.scale(o);a!=null&&a.domain&&e.setAttribute(i,n[`${o}Reverse`]?a.domain.slice().reverse():a.domain)}else throw new Error(`Unrecognized symbol: ${s}`)})}function $ut(e,t){const{marks:n}=t;F0("x",e,n,["x","x1","x2"]),F0("y",e,n,["y","y1","y2"]),F0("fx",e,n),F0("fy",e,n)}function F0(e,t,n,r=[e]){const i=t[e]||{};if(i.axis===null||i.label!==void 0)return;const s=n.map(u=>{var f;return(f=u.channelField(r))==null?void 0:f.field});if(s.every(u=>u==null))return;let o,a,l;for(let u=0;u<s.length;++u){const{column:f,label:d}=s[u]||{};f===void 0&&d===void 0||(o===void 0&&a===void 0?(o=f,a=d,l=kut(n[u].data,r)||"number"):a!==d?a=void 0:o!==f&&(o=void 0))}let c=a||o;if(c!==void 0){if((l==="number"||l==="date")&&(e==="x"||e==="y")){i.percent&&(c=`${c} (%)`);const u=(e==="x"?1:-1)*(i.reverse?-1:1);e==="x"||i.labelAnchor==="center"?c=e==="x"==u<0?` ${c}`:`${c} `:c=`${u<0?" ":" "}${c}`}t[e]={...i,label:c}}}function Nut(e,t){const n=e.querySelectorAll('g[aria-label="facet"]');if(n.length)for(const r of n)IN(r,t);else IN(e,t)}function IN(e,t){let n=-1;for(const r of e.children){const i=r.getAttribute("aria-label")||"";r.nodeName==="style"||i.includes("-axis")||i.includes("-grid")||r.setAttribute("data-index",t[++n])}}function kut(e,t){for(const n of e)for(let r=0;r<t.length;++r){const i=n[t[r]];if(i!=null)return i instanceof Date?"date":typeof i}}const Dut={width:640,marginLeft:40,marginRight:20,marginTop:20,marginBottom:30};class Out{constructor(t){this.attributes={...Dut},this.listeners=null,this.interactors=[],this.legends=[],this.marks=[],this.markset=null,this.element=t||document.createElement("div"),this.element.setAttribute("class","plot"),this.element.style.display="flex",this.element.value=this,this.params=new Map,this.synch=KH()}margins(){return{left:this.getAttribute("marginLeft"),top:this.getAttribute("marginTop"),bottom:this.getAttribute("marginBottom"),right:this.getAttribute("marginRight")}}innerWidth(){const{left:t,right:n}=this.margins();return this.getAttribute("width")-t-n}innerHeight(){const{top:t,bottom:n}=this.margins();return this.getAttribute("height")-t-n}pending(t){this.synch.pending(t)}update(t){return this.synch.ready(t)&&!this.pendingRender&&(this.pendingRender=!0,requestAnimationFrame(()=>this.render())),this.synch.promise}async render(){this.pendingRender=!1;const t=await Aut(this),n=this.legends.flatMap(({legend:r,include:i})=>{const s=r.init(t);return i?s:[]});this.element.replaceChildren(t,...n),this.synch.resolve()}getAttribute(t){return this.attributes[t]}setAttribute(t,n,r){var i,s;return PO(this.attributes[t],n)?(n===void 0?delete this.attributes[t]:this.attributes[t]=n,r!=null&&r.silent||(s=(i=this.listeners)==null?void 0:i.get(t))==null||s.forEach(o=>o(t,n)),!0):!1}addAttributeListener(t,n){const r=this.listeners||(this.listeners=new Map);return r.has(t)||r.set(t,new Set),r.get(t).add(n),this}removeAttributeListener(t,n){var r,i;return(i=(r=this.listeners)==null?void 0:r.get(t))==null?void 0:i.delete(n)}addParams(t,n){const{params:r}=this;for(const i of n)r.has(i)?r.get(i).push(t):(r.set(i,[t]),i.addEventListener("value",()=>Promise.allSettled(r.get(i).map(s=>s.requestQuery()))))}addMark(t){return t.setPlot(this,this.marks.length),this.marks.push(t),this.markset=null,this}get markSet(){return this.markset||(this.markset=new Set(this.marks))}addInteractor(t){return this.interactors.push(t),this}addLegend(t,n=!0){t.setPlot(this),this.legends.push({legend:t,include:n})}}function Ke(...e){const t=new Out;return e.flat().forEach(n=>n(t)),t.marks.forEach(n=>vr().connect(n)),t.element}class But extends Map{request(t,n){if(this.has(t))n(this.get(t));else{const r=this.waiting||(this.waiting=new Map),i=r.get(t)||[];r.set(t,i.concat(n))}}set(t,n){this.has(t)&&console.warn(`Overwriting named plot "${t}".`);const{waiting:r}=this;return r!=null&&r.has(t)&&(r.get(t).forEach(i=>i(n)),r.delete(t)),super.set(t,n)}}const yU=new But;function Fut(e){return t=>yU.set(e,t)}function mU(e,t,n){Ea(n)?(n.addEventListener("value",r=>{e.setAttribute(t,r),e.update()}),n.value!==void 0&&e.setAttribute(t,n.value)):e.setAttribute(t,n)}function gU(e,t){return n=>{mU(n,e,t)}}function rE(e){return t=>{for(const[n,r]of Object.entries(e))mU(t,n,r)}}function bU(e){const{top:t,bottom:n,left:r,right:i}=e,s={};return t!==void 0&&(s.marginTop=t),n!==void 0&&(s.marginBottom=n),r!==void 0&&(s.marginLeft=r),i!==void 0&&(s.marginRight=i),rE(s)}function R1(e){return rE({xDomain:e,yDomain:e})}const R=e=>t=>gU(e,t),vU=R("style"),Li=R("width"),Ts=R("height"),Lut=R("margin"),ih=R("marginLeft"),cx=R("marginRight"),ux=R("marginTop"),Rut=R("marginBottom"),Cut=R("align"),Uut=R("aspectRatio"),Put=R("axis"),zut=R("inset"),jut=R("grid"),Vut=R("label"),Yut=R("padding"),qut=R("round"),Wut=R("xScale"),ii=R("xDomain"),Hut=R("xRange"),Gut=R("xNice"),Xut=R("xInset"),Qut=R("xInsetLeft"),Kut=R("xInsetRight"),Zut=R("xClamp"),Jut=R("xRound"),tft=R("xAlign"),eft=R("xPadding"),nft=R("xPaddingInner"),rft=R("xPaddingOuter"),wU=R("xAxis"),ift=R("xTicks"),sft=R("xTickSize"),oft=R("xTickSpacing"),aft=R("xTickPadding"),iE=R("xTickFormat"),lft=R("xTickRotate"),cft=R("xGrid"),uft=R("xLine"),fft=R("xLabel"),dft=R("xLabelAnchor"),hft=R("xLabelOffset"),pft=R("xFontVariant"),yft=R("xAriaLabel"),mft=R("xAriaDescription"),gft=R("xReverse"),bft=R("xZero"),fx=R("yScale"),sE=R("yDomain"),vft=R("yRange"),wft=R("yNice"),_ft=R("yInset"),Sft=R("yInsetTop"),xft=R("yInsetBottom"),Ift=R("yClamp"),Tft=R("yRound"),Eft=R("yAlign"),Aft=R("yPadding"),Mft=R("yPaddingInner"),$ft=R("yPaddingOuter"),_U=R("yAxis"),Nft=R("yTicks"),kft=R("yTickSize"),Dft=R("yTickSpacing"),Oft=R("yTickPadding"),Oh=R("yTickFormat"),Bft=R("yTickRotate"),C1=R("yGrid"),Fft=R("yLine"),SU=R("yLabel"),Lft=R("yLabelAnchor"),Rft=R("yLabelOffset"),Cft=R("yFontVariant"),Uft=R("yAriaLabel"),Pft=R("yAriaDescription"),xU=R("yReverse"),zft=R("yZero"),jft=R("facetMargin"),Vft=R("facetMarginTop"),Yft=R("facetMarginBottom"),qft=R("facetMarginLeft"),Wft=R("facetMarginRight"),Hft=R("facetGrid"),Gft=R("facetLabel"),Xft=R("fxDomain"),Qft=R("fxRange"),Kft=R("fxNice"),Zft=R("fxInset"),Jft=R("fxInsetLeft"),tdt=R("fxInsetRight"),edt=R("fxRound"),ndt=R("fxAlign"),rdt=R("fxPadding"),idt=R("fxPaddingInner"),sdt=R("fxPaddingOuter"),odt=R("fxAxis"),adt=R("fxTicks"),ldt=R("fxTickSize"),cdt=R("fxTickSpacing"),udt=R("fxTickPadding"),fdt=R("fxTickFormat"),ddt=R("fxTickRotate"),hdt=R("fxGrid"),pdt=R("fxLine"),ydt=R("fxLabel"),mdt=R("fxLabelAnchor"),gdt=R("fxLabelOffset"),bdt=R("fxFontVariant"),vdt=R("fxAriaLabel"),wdt=R("fxAriaDescription"),_dt=R("fxReverse"),Sdt=R("fyDomain"),xdt=R("fyRange"),Idt=R("fyNice"),Tdt=R("fyInset"),Edt=R("fyInsetTop"),Adt=R("fyInsetBottom"),Mdt=R("fyRound"),$dt=R("fyAlign"),Ndt=R("fyPadding"),kdt=R("fyPaddingInner"),Ddt=R("fyPaddingOuter"),Odt=R("fyAxis"),Bdt=R("fyTicks"),Fdt=R("fyTickSize"),Ldt=R("fyTickSpacing"),Rdt=R("fyTickPadding"),Cdt=R("fyTickFormat"),Udt=R("fyTickRotate"),Pdt=R("fyGrid"),zdt=R("fyLine"),jdt=R("fyLabel"),Vdt=R("fyLabelAnchor"),Ydt=R("fyLabelOffset"),qdt=R("fyFontVariant"),Wdt=R("fyAriaLabel"),Hdt=R("fyAriaDescription"),Gdt=R("fyReverse"),dx=R("colorScale"),hx=R("colorDomain"),px=R("colorRange"),Xdt=R("colorClamp"),Qdt=R("colorNice"),Xu=R("colorScheme"),Kdt=R("colorInterpolate"),Zdt=R("colorPivot"),Jdt=R("colorSymmetric"),tht=R("colorLabel"),eht=R("colorReverse"),nht=R("colorZero"),rht=R("colorTickFormat"),iht=R("opacityScale"),sht=R("opacityDomain"),oht=R("opacityRange"),aht=R("opacityClamp"),lht=R("opacityNice"),cht=R("opacityLabel"),uht=R("opacityReverse"),fht=R("opacityZero"),dht=R("opacityTickFormat"),hht=R("rScale"),IU=R("rDomain"),TU=R("rRange"),pht=R("rClamp"),yht=R("rNice"),mht=R("rZero"),ght=R("lengthScale"),bht=R("lengthDomain"),vht=R("lengthRange"),wht=R("lengthClamp"),_ht=R("lengthNice"),Sht=R("lengthZero"),EU=R("projectionType"),xht=R("projectionParallels"),Iht=R("projectionPrecision"),AU=R("projectionRotate"),Tht=R("projectionDomain"),Eht=R("projectionInset"),Aht=R("projectionInsetLeft"),Mht=R("projectionInsetRight"),$ht=R("projectionInsetTop"),Nht=R("projectionInsetBottom"),kht=R("projectionClip"),Dht=Object.freeze(Object.defineProperty({__proto__:null,align:Cut,aspectRatio:Uut,attribute:gU,attributes:rE,axis:Put,colorClamp:Xdt,colorDomain:hx,colorInterpolate:Kdt,colorLabel:tht,colorNice:Qdt,colorPivot:Zdt,colorRange:px,colorReverse:eht,colorScale:dx,colorScheme:Xu,colorSymmetric:Jdt,colorTickFormat:rht,colorZero:nht,facetGrid:Hft,facetLabel:Gft,facetMargin:jft,facetMarginBottom:Yft,facetMarginLeft:qft,facetMarginRight:Wft,facetMarginTop:Vft,fxAlign:ndt,fxAriaDescription:wdt,fxAriaLabel:vdt,fxAxis:odt,fxDomain:Xft,fxFontVariant:bdt,fxGrid:hdt,fxInset:Zft,fxInsetLeft:Jft,fxInsetRight:tdt,fxLabel:ydt,fxLabelAnchor:mdt,fxLabelOffset:gdt,fxLine:pdt,fxNice:Kft,fxPadding:rdt,fxPaddingInner:idt,fxPaddingOuter:sdt,fxRange:Qft,fxReverse:_dt,fxRound:edt,fxTickFormat:fdt,fxTickPadding:udt,fxTickRotate:ddt,fxTickSize:ldt,fxTickSpacing:cdt,fxTicks:adt,fyAlign:$dt,fyAriaDescription:Hdt,fyAriaLabel:Wdt,fyAxis:Odt,fyDomain:Sdt,fyFontVariant:qdt,fyGrid:Pdt,fyInset:Tdt,fyInsetBottom:Adt,fyInsetTop:Edt,fyLabel:jdt,fyLabelAnchor:Vdt,fyLabelOffset:Ydt,fyLine:zdt,fyNice:Idt,fyPadding:Ndt,fyPaddingInner:kdt,fyPaddingOuter:Ddt,fyRange:xdt,fyReverse:Gdt,fyRound:Mdt,fyTickFormat:Cdt,fyTickPadding:Rdt,fyTickRotate:Udt,fyTickSize:Fdt,fyTickSpacing:Ldt,fyTicks:Bdt,grid:jut,height:Ts,inset:zut,label:Vut,lengthClamp:wht,lengthDomain:bht,lengthNice:_ht,lengthRange:vht,lengthScale:ght,lengthZero:Sht,margin:Lut,marginBottom:Rut,marginLeft:ih,marginRight:cx,marginTop:ux,margins:bU,name:Fut,opacityClamp:aht,opacityDomain:sht,opacityLabel:cht,opacityNice:lht,opacityRange:oht,opacityReverse:uht,opacityScale:iht,opacityTickFormat:dht,opacityZero:fht,padding:Yut,projectionClip:kht,projectionDomain:Tht,projectionInset:Eht,projectionInsetBottom:Nht,projectionInsetLeft:Aht,projectionInsetRight:Mht,projectionInsetTop:$ht,projectionParallels:xht,projectionPrecision:Iht,projectionRotate:AU,projectionType:EU,rClamp:pht,rDomain:IU,rNice:yht,rRange:TU,rScale:hht,rZero:mht,round:qut,style:vU,width:Li,xAlign:tft,xAriaDescription:mft,xAriaLabel:yft,xAxis:wU,xClamp:Zut,xDomain:ii,xFontVariant:pft,xGrid:cft,xInset:Xut,xInsetLeft:Qut,xInsetRight:Kut,xLabel:fft,xLabelAnchor:dft,xLabelOffset:hft,xLine:uft,xNice:Gut,xPadding:eft,xPaddingInner:nft,xPaddingOuter:rft,xRange:Hut,xReverse:gft,xRound:Jut,xScale:Wut,xTickFormat:iE,xTickPadding:aft,xTickRotate:lft,xTickSize:sft,xTickSpacing:oft,xTicks:ift,xZero:bft,xyDomain:R1,yAlign:Eft,yAriaDescription:Pft,yAriaLabel:Uft,yAxis:_U,yClamp:Ift,yDomain:sE,yFontVariant:Cft,yGrid:C1,yInset:_ft,yInsetBottom:xft,yInsetTop:Sft,yLabel:SU,yLabelAnchor:Lft,yLabelOffset:Rft,yLine:Fft,yNice:wft,yPadding:Aft,yPaddingInner:Mft,yPaddingOuter:$ft,yRange:vft,yReverse:xU,yRound:Tft,yScale:fx,yTickFormat:Oh,yTickPadding:Oft,yTickRotate:Bft,yTickSize:kft,yTickSpacing:Dft,yTicks:Nft,yZero:zft},Symbol.toStringTag,{value:"Module"}));function Be(e,t){return{table:e,options:t}}function oE(e){return typeof e!="string"?!1:(e=e.toLowerCase().trim(),e==="none"||e==="currentcolor"||e.startsWith("url(")&&e.endsWith(")")||e.startsWith("var(")&&e.endsWith(")")||Ra(e)!==null)}const Oht=new Set(["order","sort","label","anchor","curve","tension","marker","markerStart","markerMid","markerEnd","textAnchor","lineAnchor","lineHeight","textOverflow","monospace","fontFamily","fontSize","fontStyle","fontVariant","fontWeight","frameAnchor","strokeLinejoin","strokeLinecap","strokeMiterlimit","strokeDasharray","strokeDashoffset","mixBlendMode","shapeRendering","imageRendering","preserveAspectRatio","interpolate","crossOrigin","paintOrder","pointerEvents"]);function Bht(e){return Oht.has(e)}const Fht=new Set(["asterisk","circle","cross","diamond","diamond2","hexagon","plus","square","square2","star","times","triangle","triangle2","wye"]);function Lht(e){return Fht.has(`${e}`.toLowerCase())}function aE(e){return typeof(e==null?void 0:e.getChild)=="function"}const Rht=2,Cht=10;function MU(e){return aE(e)?Uht(e):e}function Uht(e){const{batches:t,numRows:n}=e;if(!n)return[];const r=Array.from({length:n},()=>({}));for(let i=0,s=0;s<t.length;++s){const o=t[s],{schema:a,numRows:l,numCols:c}=o;for(let u=0;u<c;++u){const f=o.getChildAt(u),{name:d,type:h}=a.fields[u],p=Pht(h);for(let g=i,v=0;v<l;++v,++g)r[g][d]=p(f.get(v))}i+=l}return r}function Pht(e){const{typeId:t}=e;return t===Cht?n=>n==null?n:new Date(n):t===Rht&&e.bitWidth>=64?n=>n==null?n:Number(n):n=>n}const $U=e=>e==="stroke"||e==="fill",zht=e=>e==="symbol",jht=(e,t)=>e!=="sort"&&t!=null&&!Array.isArray(t),A_=(e,t)=>({channel:e,field:t,as:t instanceof Oa?t.column:e}),M_=(e,t)=>({channel:e,value:t});class ld extends Jp{constructor(t,n,r,i={}){var l;super((l=n==null?void 0:n.options)==null?void 0:l.filterBy),this.type=t,this.reqs=i,this.source=n,Array.isArray(this.source)&&(this.data=this.source);const s=this.channels=[],o=this.params=new Set,a=(c,u)=>{const f=typeof u;if(f==="function"&&u[XO]){const d=u(this,c);for(const h in d)a(h,d[h])}else if(f==="string")Bht(c)||$U(c)&&oE(u)||zht(c)&&Lht(u)?s.push(M_(c,u)):s.push(A_(c,ZI(u)));else if(mf(u))if(Array.isArray(u.columns))s.push(A_(c,u)),o.add(u);else{const d=M_(c,u.value);s.push(d),u.addEventListener("value",h=>(d.value=h,this.update()))}else f==="object"&&jht(c,u)?s.push(A_(c,u)):u!==void 0&&s.push(M_(c,u))};for(const c in r)a(c,r[c])}setPlot(t,n){var r;this.plot=t,this.index=n,t.addParams(this,this.params),(r=this.source)!=null&&r.table&&this.queryPending()}hasOwnData(){return this.source==null||Array.isArray(this.source)}channel(t){return this.channels.find(n=>n.channel===t)}channelField(...t){const n=t.flat();for(const r of n){const i=this.channel(r);if(i!=null&&i.field)return i}return null}fields(){var s,o,a;if(this.hasOwnData())return null;const{source:{table:t},channels:n,reqs:r}=this,i=new Map;for(const{channel:l,field:c}of n){const u=c==null?void 0:c.column;if(u){if((s=c.stats)!=null&&s.length||r[l]){i.has(u)||i.set(u,new Set);const f=i.get(u);(o=r[l])==null||o.forEach(d=>f.add(d)),(a=c.stats)==null||a.forEach(d=>f.add(d))}}else continue}return Array.from(i,([l,c])=>({table:t,column:l,stats:Array.from(c)}))}fieldInfo(t){return this.stats=t.reduce((n,r)=>(n[r.column]=r,n),Object.create(null)),this}query(t=[]){if(this.hasOwnData())return null;const{channels:n,source:{table:r}}=this;return NU(n,r).where(t)}queryPending(){return this.plot.pending(this),this}queryResult(t){return this.data=MU(t),this}update(){return this.plot.update(this)}plotSpecs(){const{type:t,data:n,channels:r}=this,i={};for(const s of r)i[s.channel]=ma(s);return[{type:t,data:n,options:i}]}}function ma(e){return Object.hasOwn(e,"value")?e.value:$U(e.channel)?{value:e.as,scale:"color"}:e.as}function NU(e,t,n=[]){const r=Ct.from({source:t}),i=new Set;let s=!1;for(const o of e){const{channel:a,field:l,as:c}=o;if(!n.includes(a)){if(a==="order")r.orderby(o.value);else if(l){if(l.aggregate)s=!0;else{if(i.has(c))continue;i.add(c)}r.select({[c]:l})}}}return s&&r.groupby(Array.from(i)),r}function Va(e,t,n){if(!e.stats)return r;const{field:r}=e.channelField(t),{type:i}=e.stats[r.column];return n=n??r,i==="date"?BO(n):n}function yx(e,t,n,r,i=!1,s=1){const o=(r-s)/(n-t),a=o!==1?` * ${o}::DOUBLE`:"";return i?G`(${+n} - ${e}::DOUBLE)${a}`:G`(${e}::DOUBLE - ${+t})${a}`}const kU={x:["min","max"]},DU={y:["min","max"]},OU={...kU,...DU};function BU(e,t,n,r,i){const{plot:s,stats:o}=e,a=s.getAttribute(r),l=s.getAttribute(i);if(Array.isArray(a)&&!a[oc])return a;{const{field:c}=e.channelField(n),{column:u}=c,{min:f,max:d}=o[u],h=FU(t,u)||(l?iv().domain([f,d]).nice().domain():[f,d]);return a!==ai&&(h[oc]=!0),s.setAttribute(r,h,{silent:!0}),h}}function Ny(e,t){return BU(e,t,"x","xDomain","xNice")}function ky(e,t){return BU(e,t,"y","yDomain","yNice")}function FU(e,t){if(!e)return;let n,r;const i=(s,o)=>{if(s==="BETWEEN"&&o.field.column===t){const{range:a}=o;a&&(n==null||a[0]<n)&&(n=a[0]),a&&(r==null||a[1]>r)&&(r=a[1])}};return Array.isArray(e)?e.forEach(s=>{var o;return(o=s.visit)==null?void 0:o.call(s,i)}):e.visit&&e.visit(i),n!=null&&r!=null&&n!==r?[n,r]:void 0}class Vht extends ld{constructor(t,n,r){const i=t.endsWith("X")?"y":"x",s={[i]:["count","min","max"]};super(t,n,r,s),this.dim=i}query(t=[]){const{plot:n,dim:r,source:i,stats:s}=this,{optimize:o=!0}=i.options||{},{field:a,as:l}=this.channelField(r),c=super.query(t);if(o){const{column:u}=a,{count:f,max:d,min:h}=s[u],p=r==="x"?n.innerWidth():n.innerHeight(),[g,v]=FU(t,u)||[h,d],y=(v-g)/(d-h);if(f*y>p*4){const m=Va(this,r,l),b=this.channelField(r==="x"?"y":"x").as,w=c.select().map(S=>S.as).filter(S=>S!==l&&S!==b);return Yht(c,m,l,b,g,v,p,w)}}return c.orderby(l)}}function Yht(e,t,n,r,i,s,o,a=[]){const l=G`FLOOR(${o/(s-i)}::DOUBLE * (${t} - ${+i}::DOUBLE))::INTEGER`,c=u=>Ct.from(e).select(u).groupby(l,a);return Ct.union(c([{[n]:op(n),[r]:NM(r,n)},...a]),c([{[n]:sp(n),[r]:kM(r,n)},...a]),c([{[n]:NM(n,r),[r]:op(r)},...a]),c([{[n]:kM(n,r),[r]:sp(r)},...a])).orderby(a,n)}function mx(e,t=!1){const n=new Float64Array(5),r=new Float64Array(4);qht(n,r,e);const i=Float64Array.of(0,r[1]-n[1]*r[0],r[2]-n[2]*r[0],r[3]-n[3]*r[0],-n[4]*r[0]),s=1+n[1]+n[2]+n[3]+n[4],o=(r[0]+r[1]+r[2]+r[3])/s,a=(i[1]+i[2]+i[3]+i[4])/s;return{sigma:e,negative:t,a:n,b_causal:r,b_anticausal:i,sum_causal:o,sum_anticausal:a}}function qht(e,t,n){const i=Float64Array.of(.84,1.8675,.84,-1.8675,-.34015,-.1299,-.34015,.1299),s=Math.exp(-1.783/n),o=Math.exp(-1.723/n),a=.6318/n,l=1.997/n,c=Float64Array.of(-s*Math.cos(a),s*Math.sin(a),-s*Math.cos(-a),s*Math.sin(-a),-o*Math.cos(l),o*Math.sin(l),-o*Math.cos(-l),o*Math.sin(-l)),u=n*2.5066282746310007,f=Float64Array.of(i[0],i[1],0,0,0,0,0,0),d=Float64Array.of(1,0,c[0],c[1],0,0,0,0,0,0);let h,p;for(p=2;p<8;p+=2){for(f[p]=c[p]*f[p-2]-c[p+1]*f[p-1],f[p+1]=c[p]*f[p-1]+c[p+1]*f[p-2],h=p-2;h>0;h-=2)f[h]+=c[p]*f[h-2]-c[p+1]*f[h-1],f[h+1]+=c[p]*f[h-1]+c[p+1]*f[h-2];for(h=0;h<=p;h+=2)f[h]+=i[p]*d[h]-i[p+1]*d[h+1],f[h+1]+=i[p]*d[h+1]+i[p+1]*d[h];for(d[p+2]=c[p]*d[p]-c[p+1]*d[p+1],d[p+3]=c[p]*d[p+1]+c[p+1]*d[p],h=p;h>0;h-=2)d[h]+=c[p]*d[h-2]-c[p+1]*d[h-1],d[h+1]+=c[p]*d[h-1]+c[p+1]*d[h-2]}for(p=0;p<4;++p)h=p<<1,t[p]=f[h]/u,e[p+1]=d[h+2]}function Wht(e,t,n,[r,i]){const s=new Float64Array(Math.max(r,i)),o=new Float64Array(Math.max(r,i)),a=new Float64Array(5),l=new Float64Array(n.length);for(let c=0,u=0;c<i;++c,u+=r){const f=l.subarray(u);gx(e,n.subarray(u),r,1,s,o,a,f)}for(let c=0;c<r;++c){const u=l.subarray(c);gx(t,u,i,r,s,o,a,u)}return l}function gx(e,t,n,r=1,i=new Float64Array(n),s=new Float64Array(n),o=new Float64Array(5),a=i,l=Hht){const c=r*2,u=r*3,f=r*4,d=r*n;let h,p;for(l(i,t,n,r,e.b_causal,3,e.a,4,e.sum_causal,o,e.sigma),p=4,h=f;p<n;++p,h+=r)i[p]=e.b_causal[0]*t[h]+e.b_causal[1]*t[h-r]+e.b_causal[2]*t[h-c]+e.b_causal[3]*t[h-u]-e.a[1]*i[p-1]-e.a[2]*i[p-2]-e.a[3]*i[p-3]-e.a[4]*i[p-4];for(l(s,t,n,-r,e.b_anticausal,4,e.a,4,e.sum_anticausal,o,e.sigma),p=4,h=d-r*5;p<n;++p,h-=r)s[p]=e.b_anticausal[1]*t[h+r]+e.b_anticausal[2]*t[h+c]+e.b_anticausal[3]*t[h+u]+e.b_anticausal[4]*t[h+f]-e.a[1]*s[p-1]-e.a[2]*s[p-2]-e.a[3]*s[p-3]-e.a[4]*s[p-4];if(e.negative)for(p=0,h=0;p<n;++p,h+=r)a[h]=i[p]+s[n-p-1];else for(p=0,h=0;p<n;++p,h+=r)a[h]=Math.max(0,i[p]+s[n-p-1]);return a}function Hht(e,t,n,r,i,s,o,a,l,c){const u=Math.abs(r)*n,f=r<0?u+r:0;let d,h,p;for(h=0;h<a;++h)for(c[h]=h<=s?i[h]:0,p=1;p<=a&&p<=h;++p)c[h]-=o[p]*c[h-p];for(p=0;p<a;++p)for(e[p]=0,h=1;h<=p;++h)d=f+r*h,d>=0&&d<u&&(e[p]+=c[p-h]*t[d]);const g=t[f];if(g>0)for(p=0;p<a;++p)e[p]+=c[p]*g}function Ght(e,t){return LU(new Float64Array(e),t)}function Xht(e,t,n,r=[]){return r.length?Object.values(Qht(e*t,n,r)):[{grid:LU(new Float64Array(e*t),n)}]}function LU(e,t){if(aE(t)){const n=t.numRows;if(n===0)return e;const r=t.getChild("index").toArray(),i=t.getChild("value").toArray();for(let s=0;s<n;++s)e[r[s]]=i[s]}else for(const n of t)e[n.index]=n.value;return e}function Qht(e,t,n){const r={},i=s=>(r[s]||(r[s]={key:s,grid:new Float64Array(e)})).grid;if(aE(t)){const s=t.numRows;if(s===0)return r;const o=t.getChild("index").toArray(),a=t.getChild("value").toArray(),l=n.map(c=>t.getChild(c));for(let c=0;c<s;++c){const u=l.map(f=>f.get(c));i(u)[o[c]]=a[c]}}else for(const s of t){const o=n.map(a=>s[a]);i(o)[s.index]=s.value}return r}function di(e,t,n,r){Ea(n)?(r=r||(()=>e.requestUpdate()),n.addEventListener("value",i=>(e[t]=i,r())),e[t]=n.value):e[t]=n}class RU extends ld{constructor(t,n,r){const{bins:i=1024,bandwidth:s=20,...o}=r,a=t.endsWith("X")?"y":"x";super(t,n,o,a==="x"?kU:DU),this.dim=a,di(this,"bins",i),di(this,"bandwidth",s,()=>this.grid?this.convolve().update():null)}get filterIndexable(){const t=this.dim==="x"?"xDomain":"yDomain",n=this.plot.getAttribute(t);return n&&!n[oc]}query(t=[]){if(this.hasOwnData())throw new Error("Density1DMark requires a data source");const{bins:n,channels:r,dim:i,source:{table:s}}=this,[o,a]=this.extent=(i==="x"?Ny:ky)(this,t),l=Va(this,i);return Kht(NU(r,s,[i]).where(t.concat(Cr(l,[o,a]))),yx(l,o,a,n),this.channelField("weight")?"weight":null)}queryResult(t){return this.grid=Ght(this.bins,t),this.convolve()}convolve(){const{bins:t,bandwidth:n,dim:r,grid:i,plot:s,extent:[o,a]}=this,l=i.some(m=>m<0),c=r==="x"?s.innerWidth():s.innerHeight(),u=mx(n*(t-1)/c,l),f=gx(u,i,t),d=this.data=[],h=r==="x"?"y":"x",p=this.channelField(r).as,g=+o,v=(a-g)/(t-1),y=1/v;for(let m=0;m<t;++m)d.push({[p]:g+m*v,[h]:f[m]*y});return this}plotSpecs(){const{type:t,data:n,channels:r,dim:i}=this,s=i==="x"?{y:"y"}:{x:"x"};for(const o of r)s[o.channel]=ma(o);return[{type:t,data:n,options:s}]}}function Kht(e,t,n){const r=n?`* ${n}`:"",i=e.clone().select({p:t,i:G`FLOOR(p)::INTEGER`,w:G`(FLOOR(p) + 1 - p)${r}`}),s=e.clone().select({p:t,i:G`FLOOR(p)::INTEGER + 1`,w:G`(p - FLOOR(p))${r}`});return Ct.from(Ct.unionAll(i,s)).select({index:"i",value:Gf("w")}).groupby("index").having(OO("value",0))}class zv extends ld{constructor(t,n,r){const{bandwidth:i=20,binType:s="linear",binWidth:o=2,binPad:a=1,...l}=r,c=Zht(l);super(t,n,l,OU),this.densityMap=c,di(this,"bandwidth",i,()=>this.grids?this.convolve().update():null),di(this,"binWidth",o),di(this,"binType",s),di(this,"binPad",a)}setPlot(t,n){const r=()=>{this.stats&&this.requestUpdate()};return t.addAttributeListener("domainX",r),t.addAttributeListener("domainY",r),super.setPlot(t,n)}get filterIndexable(){const t=this.plot.getAttribute("xDomain"),n=this.plot.getAttribute("yDomain");return t&&n&&!t[oc]&&!n[oc]}query(t=[]){const{plot:n,binType:r,binPad:i,channels:s,densityMap:o,source:a}=this,[l,c]=this.extentX=Ny(this,t),[u,f]=this.extentY=ky(this,t),[d,h]=this.bins=this.binDimensions(this),p=Va(this,"x"),g=Va(this,"y"),v=!!n.getAttribute("xReverse"),y=!!n.getAttribute("yReverse"),m=TN(p,l,c,d,v,this.binPad),b=TN(g,u,f,h,y,this.binPad),w=i?[Cr(p,[l,c]),Cr(g,[u,f])]:[kg(l,p),Ng(p,c),kg(u,g),Ng(g,f)],S=Ct.from(a.table).where(t.concat(w)),_=this.groupby=[];let x=mr();for(const E of s)if(Object.hasOwn(E,"field")){const{as:k,channel:I,field:A}=E;A.aggregate?(x=A,o[I]=!0):I==="weight"?x=Gf(A):I!=="x"&&I!=="y"&&(S.select({[k]:A}),_.push(k))}return r==="linear"?tpt(S,m,b,x,d,_):Jht(S,m,b,x,d,_)}binDimensions(){const{plot:t,binWidth:n}=this;return[Math.round(t.innerWidth()/n),Math.round(t.innerHeight()/n)]}queryResult(t){const[n,r]=this.bins;return this.grids=Xht(n,r,t,this.groupby),this.convolve()}convolve(){const{bandwidth:t,bins:n,grids:r,plot:i}=this;if(t<=0)this.kde=this.grids.map(({key:s,grid:o})=>(o.key=s,o));else{const s=i.innerWidth(),o=i.innerHeight(),[a,l]=n,c=r.some(({grid:d})=>d.some(h=>h<0)),u=mx(t*(a-1)/s,c),f=mx(t*(l-1)/o,c);this.kde=this.grids.map(({key:d,grid:h})=>{const p=Wht(u,f,h,n);return p.key=d,p})}return this}plotSpecs(){throw new Error("Unimplemented. Use a Grid2D mark subclass.")}}function Zht(e){const t={};for(const n in e)e[n]==="density"&&(delete e[n],t[n]=!0);return t}function TN(e,t,n,r,i,s){const o=(r-s)/(n-t),a=o!==1?` * ${o}::DOUBLE`:"";return i?G`(${n} - ${e}::DOUBLE)${a}`:G`(${e}::DOUBLE - ${t})${a}`}function Jht(e,t,n,r,i,s){return e.select({index:G`FLOOR(${t})::INTEGER + FLOOR(${n})::INTEGER * ${i}`,value:r}).groupby("index",s)}function tpt(e,t,n,r,i,s){const o=r.column?`* ${r.column}`:"",a=(d,h)=>e.clone().select({xp:t,yp:n,i:d,w:h}),l=a(G`FLOOR(xp)::INTEGER + FLOOR(yp)::INTEGER * ${i}`,G`(FLOOR(xp)::INTEGER + 1 - xp) * (FLOOR(yp)::INTEGER + 1 - yp)${o}`),c=a(G`FLOOR(xp)::INTEGER + (FLOOR(yp)::INTEGER + 1) * ${i}`,G`(FLOOR(xp)::INTEGER + 1 - xp) * (yp - FLOOR(yp)::INTEGER)${o}`),u=a(G`FLOOR(xp)::INTEGER + 1 + FLOOR(yp)::INTEGER * ${i}`,G`(xp - FLOOR(xp)::INTEGER) * (FLOOR(yp)::INTEGER + 1 - yp)${o}`),f=a(G`FLOOR(xp)::INTEGER + 1 + (FLOOR(yp)::INTEGER + 1) * ${i}`,G`(xp - FLOOR(xp)::INTEGER) * (yp - FLOOR(yp)::INTEGER)${o}`);return Ct.from(Ct.unionAll(l,c,u,f)).select({index:"i",value:Gf("w")},s).groupby("index",s).having(OO("value",0))}class ept extends zv{constructor(t,n){const{type:r="dot",binsX:i,binsY:s,...o}=n;o.binPad=o.binPad??0,super(r,t,o),di(this,"binsX",i),di(this,"binsY",s)}convolve(){super.convolve();const{bins:t,binPad:n,extentX:r,extentY:i}=this,[s,o]=t,[a,l]=r,[c,u]=i,f=(l-a)/(s-n),d=(u-c)/(o-n),h=n?0:.5;return this.data=npt(this.kde,t,a,c,f,d,h),this}binDimensions(){const{plot:t,binWidth:n,binsX:r,binsY:i}=this;return[r??Math.round(t.innerWidth()/n),i??Math.round(t.innerHeight()/n)]}plotSpecs(){const{type:t,channels:n,densityMap:r,data:i}=this,s={};for(const o of n){const{channel:a}=o;s[a]=a==="x"||a==="y"?a:ma(o)}for(const o in r)r[o]&&(s[o]="density");return[{type:t,data:i,options:s}]}}function npt(e,t,n,r,i,s,o){const a=1/(i*s),[l,c]=t,u=[];for(const f of e)for(let d=0,h=0;h<c;++h)for(let p=0;p<l;++p,++d)u.push({x:n+(p+o)*i,y:r+(h+o)*s,density:f[d]*a});return u}function CU(e,t,n,r,i,s){const o=(s.length>>2)-1;for(let a=0,l=0;a<r;++a)for(let c=0,u=(r-a-1)*n;c<n;++c,l+=4){const f=o*i(e[c+u])<<2;t[l+0]=s[f+0],t[l+1]=s[f+1],t[l+2]=s[f+2],t[l+3]=s[f+3]}}function U1(e,t){const n=new Uint8ClampedArray(4*e),r=e-1;for(let i=0;i<=r;++i){const s=t(i/r),{r:o,g:a,b:l,opacity:c=1}=typeof s=="string"?bi(s):s,u=i<<2;n[u+0]=o,n[u+1]=a,n[u+2]=l,n[u+3]=255*c|0}return n}function UU(e,t){if(typeof document<"u"){const n=document.createElement("canvas");return n.setAttribute("width",e),n.setAttribute("height",t),n}throw new Error("Can not create a canvas instance.")}function PU(e="black"){const{r:t,g:n,b:r}=bi(e);return i=>({r:t,g:n,b:r,opacity:i})}class zU extends zv{constructor(t,n){super("image",t,n)}setPlot(t,n){const r=()=>{this.stats&&this.rasterize()};t.addAttributeListener("schemeColor",r),super.setPlot(t,n)}convolve(){return super.convolve().rasterize()}rasterize(){var d;const{bins:t,kde:n,groupby:r}=this,[i,s]=t,{canvas:o,ctx:a,img:l}=rpt(this,i,s),c=ipt(this),u=r.indexOf((d=this.channelField("fill"))==null?void 0:d.as),f=u<0?[]:n.map(({key:h})=>h[u]);return this.data=n.map(h=>{var g;const p=spt(this,f,(g=h.key)==null?void 0:g[u]);return CU(h,l.data,i,s,c,p),a.putImageData(l,0,0),{src:o.toDataURL()}}),this}plotSpecs(){var s;const{type:t,plot:n,data:r}=this,i={src:"src",width:n.innerWidth(),height:n.innerHeight(),preserveAspectRatio:"none",imageRendering:(s=this.channel("imageRendering"))==null?void 0:s.value,frameAnchor:"middle"};return[{type:t,data:r,options:i}]}}function rpt(e,t,n){if(!e.image||e.image.w!==t||e.image.h!==n){const r=UU(t,n),i=r.getContext("2d",{willReadFrequently:!0}),s=i.getImageData(0,0,t,n);e.image={canvas:r,ctx:i,img:s,w:t,h:n}}return e.image}function ipt(e){const{densityMap:t,kde:n,plot:r}=e;let i=t.fill&&r.getAttribute("colorDomain");if(!i){let o=0,a=0;n.forEach(l=>{for(const c of l)c<o&&(o=c),c>a&&(a=c)}),i=o===0&&a===0?[0,1]:[o,a]}const s=r.getAttribute("colorScale");return gc({x:{type:s,domain:i,range:[0,1]}}).apply}function spt(e,t,n,r=1024){const{densityMap:i,plot:s}=e,o=s.getAttribute("colorScheme");let a;if(i.fill){if(o)try{return U1(r,gc({color:{scheme:o,domain:[0,1]}}).interpolate)}catch(l){console.warn(l)}}else if(t.length){const l=s.getAttribute("colorRange");a=gc({color:{domain:t,range:l,scheme:o||(l?void 0:"tableau10")}}).apply(n)}else{const l=e.channelField("fill");a=oE(l==null?void 0:l.value)?l.value:void 0}return U1(r,PU(a))}class opt extends zU{constructor(t,n){const{normalize:r=!0,...i}=n;super(t,{bandwidth:0,...i}),di(this,"normalize",r)}query(t=[]){const{plot:n,channels:r,normalize:i,source:s}=this,[o,a]=Ny(this,t),[l,c]=ky(this,t),[u,f]=this.bins=this.binDimensions(this),d=Va(this,"x"),h=Va(this,"y"),p=!!n.getAttribute("xReverse"),g=!!n.getAttribute("yReverse"),v=yx(d,o,a,u,p,this.binPad),y=yx(h,l,c,f,g,this.binPad),m=Ct.from(s.table).where(apt(this,t)),b=this.groupby=[],w=[];for(const S of r)if(Object.hasOwn(S,"field")){const{channel:_,field:x}=S;_==="z"?(m.select({[_]:x}),w.push("z")):_!=="x"&&_!=="y"&&(m.select({[_]:x}),b.push(_))}return lpt(m,v,y,w,u,f,b,i)}}function apt(e,t){if(Array.isArray(t)&&!t.length)return t;const n=e.channelField("x").field.column,r=e.channelField("y").field.column,i=o=>o.op!=="BETWEEN"||o.field.column!==n&&o.field.column!==r,s=o=>o.op==="AND"?ic(o.children.filter(a=>i(a))):o;return Array.isArray(t)?t.filter(o=>i(o)).map(o=>s(o)):s(t)}function lpt(e,t,n,r,i,s,o=[],a=!0){e.select({x:G`FLOOR(${t})::INTEGER`,y:G`FLOOR(${n})::INTEGER`});const l=o.concat(r),c=l.length?`PARTITION BY ${l.join(", ")} `:"",u=Ct.from(e).select(l,{x0:"x",y0:"y",dx:G`(lead(x) OVER sw - x)`,dy:G`(lead(y) OVER sw - y)`}).window({sw:G`${c}ORDER BY x ASC`}).qualify(ic(G`(x0 < ${i} OR x0 + dx < ${i})`,G`(y0 < ${s} OR y0 + dy < ${s})`,G`(x0 > 0 OR x0 + dx > 0)`,G`(y0 > 0 OR y0 + dy > 0)`)),f=Ct.select({x:G`GREATEST(MAX(ABS(dx)), MAX(ABS(dy)))`}).from("pairs"),d=Ct.select({i:G`UNNEST(range((${f})))::INTEGER`}),h=Ct.unionAll(Ct.select(l,{x:G`x0 + i`,y:G`y0 + ROUND(i * dy / dx::FLOAT)::INTEGER`}).from("pairs","indices").where(G`ABS(dy) <= ABS(dx) AND i < ABS(dx)`),Ct.select(l,{x:G`x0 + ROUND(SIGN(dy) * i * dx / dy::FLOAT)::INTEGER`,y:G`y0 + SIGN(dy) * i`}).from("pairs","indices").where(G`ABS(dy) > ABS(dx) AND i < ABS(dy)`),Ct.select(l,{x:"x0",y:"y0"}).from("pairs").where(DO("dx"))),p=["x"].concat(l).join(", "),g=Ct.from("raster").select(l,"x","y",a?{w:G`1.0 / COUNT(*) OVER (PARTITION BY ${p})`}:null).where(ic(Cr("x",[0,i]),Cr("y",[0,s])));return Ct.with({pairs:u,indices:d,raster:h,points:g}).from("points").select(o,{index:G`x + y * ${i}::INTEGER`,value:a?Gf("w"):mr()}).groupby("index",o)}class cpt extends zv{constructor(t,n){const{thresholds:r=10,...i}=n;super("geo",t,i),di(this,"thresholds",r,()=>this.grids?this.contours().update():null)}convolve(){return super.convolve().contours()}contours(){const{bins:t,densityMap:n,kde:r,thresholds:i,groupby:s,plot:o}=this;let a=i;if(!Array.isArray(a)){const S=Ne(r.map(_=>Ne(_)));a=Array.from({length:a-1},(_,x)=>S*(x+1)/a)}(n.fill||n.stroke)&&this.plot.getAttribute("colorScale")!=="log"&&this.plot.setAttribute("colorZero",!0);const[l,c]=t,[u,f]=o.getAttribute("xDomain"),[d,h]=o.getAttribute("yDomain"),p=(f-u)/l,g=(h-d)/c,v=+u,y=+d,m=S=>v+S*p,b=S=>y+S*g,w=zg().size(t);return this.data=r.flatMap(S=>a.map(_=>{const x=upt(w.contour(S,_),m,b);return s.forEach((E,k)=>x[E]=S.key[k]),x.density=_,x})),this}plotSpecs(){const{type:t,channels:n,densityMap:r,data:i}=this,s={};for(const o of n){const{channel:a}=o;a!=="x"&&a!=="y"&&(s[a]=ma(o))}return r.fill&&(s.fill="density"),r.stroke&&(s.stroke="density"),[{type:t,data:i,options:s}]}}function upt(e,t,n){function r(o){o.forEach(i)}function i(o){o.forEach(s)}function s(o){o[0]=t(o[0]),o[1]=n(o[1])}return e.coordinates.forEach(r),e}class fpt extends ld{constructor(t,n){const{type:r="hexagon",binWidth:i=20,...s}=n;super(r,t,{r:i/2,clip:!0,...s},OU),this.binWidth=i}get filterIndexable(){const t=this.plot.getAttribute("xDomain"),n=this.plot.getAttribute("yDomain");return t&&n&&!t[oc]&&!n[oc]}query(t=[]){if(this.hasOwnData())return null;const{plot:n,binWidth:r,channels:i,source:s}=this,[o,a]=Ny(this,t),[l,c]=ky(this,t),u=.5-n.getAttribute("marginLeft"),f=0-n.getAttribute("marginTop"),d=`${r}::DOUBLE`,h=`${r*(1.5/Math.sqrt(3))}::DOUBLE`,p=`${n.innerWidth()/(a-o)}::DOUBLE`,g=`${n.innerHeight()/(c-l)}::DOUBLE`;let v,y;const m=new Set,b={};for(const E of i)E.channel==="order"?w.orderby(E.value):E.channel==="x"?v=E:E.channel==="y"?y=E:Object.hasOwn(E,"field")&&(b[E.as]=E.field,E.field.aggregate&&E.field.columns.forEach(k=>m.add(k)));const w=Ct.select({[v.as]:G`${o}::DOUBLE + ((x + 0.5 * (y & 1)) * ${d} + ${u})::DOUBLE / ${p}`,[y.as]:G`${c}::DOUBLE - (y * ${h} + ${f})::DOUBLE / ${g}`,...b}).groupby("x","y"),S=`${p} * (${v.field} - ${o}::DOUBLE)`,_=`${g} * (${c}::DOUBLE - ${y.field})`,x=Ct.select({py:G`(${_} - ${f}) / ${h}`,pj:G`ROUND(py)::INTEGER`,px:G`(${S} - ${u}) / ${d} - 0.5 * (pj & 1)`,pi:G`ROUND(px)::INTEGER`,tt:G`ABS(py-pj) * 3 > 1 AND (px-pi)**2 + (py-pj)**2 > (px - pi - 0.5 * CASE WHEN px < pi THEN -1 ELSE 1 END)**2 + (py - pj - CASE WHEN py < pj THEN -1 ELSE 1 END)**2`,x:G`CASE WHEN tt THEN (pi + (CASE WHEN px < pi THEN -0.5 ELSE 0.5 END) + (CASE WHEN pj & 1 <> 0 THEN 0.5 ELSE -0.5 END))::INTEGER ELSE pi END`,y:G`CASE WHEN tt THEN (pj + CASE WHEN py < pj THEN -1 ELSE 1 END)::INTEGER ELSE pj END`}).select(Array.from(m)).from(s.table).where($g(v.field),$g(y.field),t);return w.from(x)}}class dpt extends zv{constructor(t,n){const{origin:r=[0,0],dim:i="xy",...s}=n;super("image",t,s),this.origin=r,this.tileX=i.toLowerCase().includes("x"),this.tileY=i.toLowerCase().includes("y")}setPlot(t,n){const r=()=>{this.stats&&this.rasterize()};t.addAttributeListener("schemeColor",r),super.setPlot(t,n)}requestQuery(){return this.requestTiles()}query(t=[]){return this._filter=t,null}tileQuery(t){const{plot:n,binType:r,binPad:i,channels:s,densityMap:o,source:a}=this,[[l,c],[u,f]]=t,[d,h]=this.bins,p=Va(this,"x"),g=Va(this,"y"),v=!!n.getAttribute("xReverse"),y=!!n.getAttribute("yReverse"),m=EN(p,l,c,d,v,i),b=EN(g,u,f,h,y,i),w=i?[Cr(p,[l,c]),Cr(g,[u,f])]:[kg(l,p),Ng(p,c),kg(u,g),Ng(g,f)],S=Ct.from(a.table).where(w),_=this.groupby=[];let x=mr();for(const E of s)if(Object.hasOwn(E,"field")){const{channel:k,field:I}=E;I.aggregate?(x=I,o[k]=!0):k==="weight"?x=Gf(I):k!=="x"&&k!=="y"&&(S.select({[k]:I}),_.push(k))}return r==="linear"?vpt(S,m,b,x,d,_):bpt(S,m,b,x,d,_)}async requestTiles(){const t=vr();this.prefetch&&t.cancel(this.prefetch);const{binPad:n,tileX:r,tileY:i,origin:[s,o]}=this,[a,l]=this.bins=this.binDimensions(this),[c,u]=Ny(this,this._filter),[f,d]=ky(this,this._filter),h=u-c,p=d-f,g=Math.floor((c-s)*(a-n)/h),v=Math.floor((f-o)*(l-n)/p),y=(I,A)=>[[s+I*h,s+(I+1)*h],[o+A*p,o+(A+1)*p]],m=Math.floor((c-s)/h),b=r?AN((u-s)/h):m,w=Math.floor((f-o)/p),S=i?AN((d-o)/p):w,_=[];for(let I=m;I<=b;++I)for(let A=w;A<=S;++A)_.push([I,A]);const x=_.map(([I,A])=>t.query(this.tileQuery(y(I,A)))),E=[];if(r)for(let I=w;I<=S;++I)E.push([b+1,I]),E.push([m-1,I]);if(i){const I=r?m-1:m,A=r?b+1:b;for(let D=I;D<=A;++D)E.push([D,S+1]),E.push([D,w-1])}this.prefetch=E.map(([I,A])=>t.prefetch(this.tileQuery(y(I,A))));const k=await Promise.all(x);this.grids=[{grid:hpt(a,l,g,v,_,k)}],this.convolve().update()}convolve(){return super.convolve().rasterize()}rasterize(){var d;const{bins:t,kde:n,groupby:r}=this,[i,s]=t,{canvas:o,ctx:a,img:l}=ypt(this,i,s),c=mpt(this),u=r.indexOf((d=this.channelField("fill"))==null?void 0:d.as),f=u<0?[]:n.map(({key:h})=>h[u]);return this.data=n.map(h=>{var g;const p=gpt(this,f,(g=h.key)==null?void 0:g[u]);return CU(h,l.data,i,s,c,p),a.putImageData(l,0,0),{src:o.toDataURL()}}),this}plotSpecs(){var s;const{type:t,data:n,plot:r}=this,i={src:"src",width:r.innerWidth(),height:r.innerHeight(),preserveAspectRatio:"none",imageRendering:(s=this.channel("imageRendering"))==null?void 0:s.value,frameAnchor:"middle"};return[{type:t,data:n,options:i}]}}function hpt(e,t,n,r,i,s){const o=new Float64Array(e*t);return s.forEach((a,l)=>{const[c,u]=i[l],f=c*e-n,d=u*t-r;ppt(e,t,o,a,f,d)}),o}function ppt(e,t,n,r,i,s){const o=r.numRows;if(o===0)return;const a=r.getChild("index").toArray(),l=r.getChild("value").toArray();for(let c=0;c<o;++c){const u=a[c],f=i+u%e,d=s+Math.floor(u/e);0<=f&&f<e&&0<=d&&d<t&&(n[f+d*e]=l[c])}}function ypt(e,t,n){if(!e.image||e.image.w!==t||e.image.h!==n){const r=UU(t,n),i=r.getContext("2d",{willReadFrequently:!0}),s=i.getImageData(0,0,t,n);e.image={canvas:r,ctx:i,img:s,w:t,h:n}}return e.image}function mpt(e){const{densityMap:t,kde:n,plot:r}=e;let i=t.fill&&r.getAttribute("colorDomain");if(!i){let o=0,a=0;n.forEach(l=>{for(const c of l)c<o&&(o=c),c>a&&(a=c)}),i=o===0&&a===0?[0,1]:[o,a]}const s=r.getAttribute("colorScale");return gc({x:{type:s,domain:i,range:[0,1]}}).apply}function gpt(e,t,n,r=1024){const{densityMap:i,plot:s}=e,o=s.getAttribute("colorScheme");let a;if(i.fill){if(o)try{return U1(r,gc({color:{scheme:o,domain:[0,1]}}).interpolate)}catch(l){console.warn(l)}}else if(t.length){const l=s.getAttribute("colorRange");a=gc({color:{domain:t,range:l,scheme:o||(l?void 0:"tableau10")}}).apply(n)}else{const l=e.channelField("fill");a=oE(l==null?void 0:l.value)?l.value:void 0}return U1(r,PU(a))}function EN(e,t,n,r,i,s){const o=(r-s)/(n-t),a=o!==1?` * ${o}::DOUBLE`:"";return i?G`(${n} - ${e}::DOUBLE)${a}`:G`(${e}::DOUBLE - ${t})${a}`}function bpt(e,t,n,r,i,s){return e.select({index:G`FLOOR(${t})::INTEGER + FLOOR(${n})::INTEGER * ${i}`,value:r}).groupby("index",s)}function vpt(e,t,n,r,i,s){const o=r.column?`* ${r.column}`:"",a=(d,h)=>e.clone().select({xp:t,yp:n,i:d,w:h}),l=a(G`FLOOR(xp)::INTEGER + FLOOR(yp)::INTEGER * ${i}`,G`(FLOOR(xp)::INTEGER + 1 - xp) * (FLOOR(yp)::INTEGER + 1 - yp)${o}`),c=a(G`FLOOR(xp)::INTEGER + (FLOOR(yp)::INTEGER + 1) * ${i}`,G`(FLOOR(xp)::INTEGER + 1 - xp) * (yp - FLOOR(yp)::INTEGER)${o}`),u=a(G`FLOOR(xp)::INTEGER + 1 + FLOOR(yp)::INTEGER * ${i}`,G`(xp - FLOOR(xp)::INTEGER) * (FLOOR(yp)::INTEGER + 1 - yp)${o}`),f=a(G`FLOOR(xp)::INTEGER + 1 + (FLOOR(yp)::INTEGER + 1) * ${i}`,G`(xp - FLOOR(xp)::INTEGER) * (yp - FLOOR(yp)::INTEGER)${o}`);return Ct.from(Ct.unionAll(l,c,u,f)).select({index:"i",value:Gf("w")},s).groupby("index",s).having(HW("value",0))}function AN(e){const t=Math.floor(e);return t===e?t-1:t}function wpt(e,t,n){var r=1e-8,i=t-1,s=n-1,o=0,a,l,c,u,f,d,h,p,g,v,y;if(e<=0)return 0;if(e>=1)return 1;for(t>=1&&n>=1?(c=e<.5?e:1-e,u=Math.sqrt(-2*Math.log(c)),h=(2.30753+u*.27061)/(1+u*(.99229+u*.04481))-u,e<.5&&(h=-h),p=(h*h-3)/6,g=2/(1/(2*t-1)+1/(2*n-1)),v=h*Math.sqrt(p+g)/g-(1/(2*n-1)-1/(2*t-1))*(p+5/6-2/(3*g)),h=t/(t+n*Math.exp(2*v))):(a=Math.log(t/(t+n)),l=Math.log(n/(t+n)),u=Math.exp(t*a)/t,f=Math.exp(n*l)/n,v=u+f,e<u/v?h=Math.pow(t*v*e,1/t):h=1-Math.pow(n*v*(1-e),1/n)),y=-Qu(t)-Qu(n)+Qu(t+n);o<10;o++){if(h===0||h===1)return h;if(d=_pt(h,t,n)-e,u=Math.exp(i*Math.log(h)+s*Math.log(1-h)+y),f=d/u,h-=u=f/(1-.5*Math.min(1,f*(i/h-s/(1-h)))),h<=0&&(h=.5*(h+u)),h>=1&&(h=.5*(h+u+1)),Math.abs(u)<r*h&&o>0)break}return h}function _pt(e,t,n){var r=e===0||e===1?0:Math.exp(Qu(t+n)-Qu(t)-Qu(n)+t*Math.log(e)+n*Math.log(1-e));return e<0||e>1?!1:e<(t+1)/(t+n+2)?r*MN(e,t,n)/t:1-r*MN(1-e,n,t)/n}function MN(e,t,n){var r=1e-30,i=1,s=t+n,o=t+1,a=t-1,l=1,c=1-s*e/o,u,f,d,h;for(Math.abs(c)<r&&(c=r),c=1/c,h=c;i<=100&&(u=2*i,f=i*(n-i)*e/((a+u)*(t+u)),c=1+f*c,Math.abs(c)<r&&(c=r),l=1+f/l,Math.abs(l)<r&&(l=r),c=1/c,h*=c*l,f=-(t+i)*(s+i)*e/((t+u)*(o+u)),c=1+f*c,Math.abs(c)<r&&(c=r),l=1+f/l,Math.abs(l)<r&&(l=r),c=1/c,d=c*l,h*=d,!(Math.abs(d-1)<3e-7));i++);return h}function Qu(e){var t=0,n=[76.18009172947146,-86.5053203294167,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18],r=1.000000000190015,i,s,o;for(o=(s=i=e)+5.5,o-=(i+.5)*Math.log(o);t<6;t++)r+=n[t]/++s;return Math.log(2.506628274631*r/i)-o}function Spt(e,t){var n=wpt(2*Math.min(e,1-e),.5*t,.5);return n=Math.sqrt(t*(1-n)/n),e>.5?n:-n}class xpt extends ld{constructor(t,n){const{ci:r=.95,precision:i=4,...s}=n;super("line",t,s);const o=()=>this.modelFit?this.confidenceBand().update():null;di(this,"ci",r,o),di(this,"precision",i,o)}query(t=[]){const n=this.channelField("x").as,r=this.channelField("y").as,i=Array.from(new Set(["stroke","z","fx","fy"].flatMap(s=>{var o;return((o=this.channelField(s))==null?void 0:o.as)||[]})));return Ct.from(super.query(t)).select({intercept:nH(r,n),slope:rH(r,n),n:iH(r,n),ssy:sH(r,n),ssx:oH(r,n),xm:aH(r,n),x0:DM(op(n).where($g(r))),x1:DM(sp(n).where($g(r)))}).select(i).groupby(i)}queryResult(t){return this.modelFit=MU(t),this.lineData=this.modelFit.flatMap(n=>Ipt(n)),this.confidenceBand()}confidenceBand(){const{ci:t,modelFit:n,precision:r,plot:i}=this,s=i.innerWidth();return this.areaData=t?n.flatMap(o=>Tpt(t,r,o,s)):null,this}plotSpecs(){const{lineData:t,areaData:n,channels:r,ci:i}=this,s={x:"x",y:"y"},o={x:"x",y1:"y1",y2:"y2",fillOpacity:.1};for(const a of r)switch(a.channel){case"x":case"y":case"fill":break;case"stroke":s.stroke=o.fill=ma(a);break;case"strokeOpacity":s.strokeOpacity=ma(a);break;case"fillOpacity":o.fillOpacity=ma(a);break;default:s[a.channel]=o[a.channel]=ma(a);break}return[...i?[{type:"areaY",data:n,options:o}]:[],{type:"line",data:t,options:s}]}}function Ipt(e){const{x0:t,x1:n,xm:r,intercept:i,slope:s,n:o,ssx:a,ssy:l,...c}=e;return[{x:t,y:i+t*s,...c},{x:n,y:i+n*s,...c}]}function Tpt(e,t,n,r){const{x0:i,x1:s,xm:o,intercept:a,slope:l,n:c,ssx:u,ssy:f,...d}=n,h=t*(s-i)/r,p=Spt((1-e)/2,c-2)*Math.sqrt(f/(c-2));return Dr(i,s-h/2,h).concat(s).map(g=>{const v=a+g*l,y=p*Math.sqrt(1/c+(g-o)**2/u);return{x:g,y1:v-y,y2:v+y,...d}})}const Ept=new Set(["frame","axisX","axisY","axisFx","axisFy","gridX","gridY","gridFx","gridFy","hexgrid","graticule","sphere"]);function ct(e,t,n){arguments.length===2&&(n=t,t=Ept.has(e)?null:[{}]);const r=e.startsWith("area")||e.startsWith("line")?Vht:ld;return lE(r,e,t,n)}function lE(e,t,n,r){return i=>{i.addMark(new e(t,n,r))}}function Tc(e,t,n){return r=>{r.addMark(new e(t,n))}}const Apt=(...e)=>ct("area",...e),Mpt=(...e)=>ct("areaX",...e),jU=(...e)=>ct("areaY",...e),$pt=(...e)=>ct("line",...e),Npt=(...e)=>ct("lineX",...e),VU=(...e)=>ct("lineY",...e),bx=(...e)=>ct("barX",...e),cE=(...e)=>ct("barY",...e),kpt=(...e)=>ct("cell",...e),Dpt=(...e)=>ct("cellX",...e),Opt=(...e)=>ct("cellY",...e),Bpt=(...e)=>ct("rect",...e),Fpt=(...e)=>ct("rectX",...e),Ku=(...e)=>ct("rectY",...e),jv=(...e)=>ct("dot",...e),Lpt=(...e)=>ct("dotX",...e),Rpt=(...e)=>ct("dotY",...e),Cpt=(...e)=>ct("circle",...e),Upt=(...e)=>ct("hexagon",...e),YU=(...e)=>ct("text",...e),Ppt=(...e)=>ct("textX",...e),zpt=(...e)=>ct("textY",...e),jpt=(...e)=>ct("ruleX",...e),Vpt=(...e)=>ct("ruleY",...e),Ypt=(...e)=>ct("tickX",...e),qU=(...e)=>ct("tickY",...e),qpt=(...e)=>ct("vector",...e),Wpt=(...e)=>ct("vectoX",...e),Hpt=(...e)=>ct("vectorY",...e),Gpt=(...e)=>ct("spike",...e),Xpt=(...e)=>ct("image",...e),Qpt=(...e)=>lE(RU,"areaX",...e),Kpt=(...e)=>lE(RU,"areaY",...e),Zpt=(...e)=>Tc(ept,...e),WU=(...e)=>Tc(opt,...e),HU=(...e)=>Tc(cpt,...e),P1=(...e)=>Tc(zU,...e),Jpt=(...e)=>Tc(dpt,...e),GU=(...e)=>Tc(fpt,...e),XU=(...e)=>ct("hexgrid",...e),QU=(...e)=>Tc(xpt,...e),tyt=(...e)=>ct("voronoi",...e),eyt=(...e)=>ct("voronoiMesh",...e),nyt=(...e)=>ct("delaunayLink",...e),ryt=(...e)=>ct("delaunayMesh",...e),iyt=(...e)=>ct("hull",...e),syt=(...e)=>ct("arrow",...e),oyt=(...e)=>ct("link",...e),ayt=(...e)=>ct("frame",...e),lyt=(...e)=>ct("axisX",...e),cyt=(...e)=>ct("axisY",...e),uyt=(...e)=>ct("axisFx",...e),fyt=(...e)=>ct("axisFy",...e),dyt=(...e)=>ct("gridX",...e),hyt=(...e)=>ct("gridY",...e),pyt=(...e)=>ct("gridFx",...e),yyt=(...e)=>ct("gridFy",...e),KU=(...e)=>ct("geo",...e),ZU=(...e)=>ct("sphere",...e),myt=(...e)=>ct("graticule",...e),gyt=Object.freeze(Object.defineProperty({__proto__:null,area:Apt,areaX:Mpt,areaY:jU,arrow:syt,axisFx:uyt,axisFy:fyt,axisX:lyt,axisY:cyt,barX:bx,barY:cE,cell:kpt,cellX:Dpt,cellY:Opt,circle:Cpt,contour:HU,delaunayLink:nyt,delaunayMesh:ryt,denseLine:WU,density:Zpt,densityX:Qpt,densityY:Kpt,dot:jv,dotX:Lpt,dotY:Rpt,frame:ayt,geo:KU,graticule:myt,gridFx:pyt,gridFy:yyt,gridX:dyt,gridY:hyt,hexagon:Upt,hexbin:GU,hexgrid:XU,hull:iyt,image:Xpt,line:$pt,lineX:Npt,lineY:VU,link:oyt,raster:P1,rasterTile:Jpt,rect:Bpt,rectX:Fpt,rectY:Ku,regressionY:QU,ruleX:jpt,ruleY:Vpt,sphere:ZU,spike:Gpt,text:YU,textX:Ppt,textY:zpt,tickX:Ypt,tickY:qU,vector:qpt,vectorX:Wpt,vectorY:Hpt,voronoi:tyt,voronoiMesh:eyt},Symbol.toStringTag,{value:"Module"}));function byt(e){const t=e.toLowerCase(),n=e.length;let r="";for(let i=0;i<n;++i)r+=(e[i]!==t[i]?"-":"")+t[i];return r}function uE(e){const t={};for(const n in e)t[byt(n)]=e[n];return t}class vyt{constructor(t,{selection:n,channels:r={}}){this.mark=t,this.selection=n;const i=Object.entries(uE(r));this.channels=i.length?i:[["opacity",.2]],this.selection.addEventListener("value",UO(()=>this.update()))}init(t){this.svg=t;const n=this.values=[],r=this.mark.index,i=this.nodes=t.querySelectorAll(`[data-index="${r}"] > *`),{channels:s}=this;for(let o=0;o<i.length;++o){const a=i[o];n.push(s.map(l=>a.getAttribute(l[0])))}return this.update()}async update(){const{svg:t,nodes:n,channels:r,values:i,mark:s,selection:o}=this;if(!t)return;const a=await wyt(s,o);for(let l=0;l<n.length;++l){const c=n[l],u=i[l],f=a(c.__data__);for(let d=0;d<r.length;++d){const[h,p]=r[d];c.setAttribute(h,f?u[d]:p)}}}}async function wyt(e,t){var c,u;const n=t==null?void 0:t.predicate(e);if(!n||n.length===0)return()=>!0;const r=(c=e.filterBy)==null?void 0:c.predicate(e,!0),i={__:ic(n)},s=e.query(r),o=s.groupby().length?s.select(i):s.$select(i),a=await vr().query(o),l=(u=a.getChild)==null?void 0:u.call(a,"__");return a.numRows||a.length?l?f=>l.get(f):f=>a[f].__:()=>!1}class JU{constructor(t,{selection:n,channels:r,peers:i=!0}){this.value=null,this.mark=t,this.selection=n,this.peers=i,this.channels=r.map(s=>{var a;const o=s==="color"?["fill","stroke"]:s==="x"?["x","x1","x2"]:s==="y"?["y","y1","y2"]:[s];for(let l=0;l<o.length;++l){const c=t.channelField(o[l]);if(c)return{field:((a=c.field)==null?void 0:a.basis)||c.field,as:c.as}}throw new Error(`Missing channel: ${s}`)})}clause(t){const{channels:n,mark:r}=this;let i=null;if(t){const s=t.map(o=>{const a=o.map((l,c)=>GW(n[c].field,Zp(l)));return a.length>1?ic(a):a[0]});i=s.length>1?NO(s):s[0]}return{source:this,schema:{type:"point"},clients:this.peers?r.plot.markSet:new Set().add(r),value:t,predicate:i}}init(t,n,r){const{mark:i,channels:s,selection:o}=this,{data:a}=i;r=r||(c=>{const u=a[c.__data__];return s.map(f=>u[f.as])}),n=n||`[data-index="${i.index}"]`;const l=new Set(t.querySelectorAll(n));t.addEventListener("pointerdown",c=>{const u=o.single?o.value:this.value,f=c.target;let d=null;if(_yt(l,f)){const h=r(f);c.shiftKey&&(u!=null&&u.length)?(d=u.filter(p=>vx(p,h)),d.length===u.length&&d.push(h)):(u==null?void 0:u.length)===1&&!vx(u[0],h)?d=null:d=[h]}this.value=d,Syt(u,d)&&o.update(this.clause(d))}),t.addEventListener("pointerenter",()=>{this.selection.activate(this.clause([this.channels.map(()=>0)]))})}}function _yt(e,t){var n;return e.has(t)||e.has(t.parentNode)||e.has((n=t.parentNode)==null?void 0:n.parentNode)}function Syt(e,t){return e==null||t==null?e!=null||t!=null:e.length!==t.length||e.some((n,r)=>vx(n,t[r]))}function vx(e,t){const n=e.length;if(t.length!==n)return!0;for(let r=0;r<n;++r)if(e[r]!==t[r])return!0;return!1}function fE(e){const t=e.on;let n=!0;function r(i){n=!1,i(),n=!0}return e.reset=(...i)=>{r(()=>e.clear(...i))},e.moveSilent=(...i)=>{r(()=>e.move(...i))},e.on=(...i)=>{if(i.length>1&&i[1]){const s=i[1];i[1]=(...o)=>n&&s(...o)}return t(...i)},e}function xyt(){return fE(zZ())}function Iyt(){return fE(UZ())}function Tyt(){return fE(PZ())}const $N=1e-12;function wx(e,t){return e===t||e&&t&&Math.abs(e[0]-t[0])<$N&&Math.abs(e[1]-t[1])<$N||!1}function Ff(e,t){var r;const n=(r=e.channelField(t))==null?void 0:r.field;return(n==null?void 0:n.basis)||n}function _x(e,t,n=1){return t.invert(n*Math.floor(e/n))}function tP(){const e=this,t=e.getScreenCTM;let n;e.getScreenCTM=()=>e.isConnected?n=t.call(e):n}class eP{constructor(t,{channel:n,selection:r,field:i,pixelSize:s=1,peers:o=!0,brush:a}){this.mark=t,this.channel=n,this.pixelSize=s||1,this.selection=r,this.peers=o,this.field=i||Ff(t,[n,n+"1",n+"2"]),this.style=a&&uE(a),this.brush=n==="y"?Tyt():Iyt(),this.brush.on("brush end",({selection:l})=>this.publish(l))}reset(){this.value=void 0,this.g&&this.brush.reset(this.g)}activate(){this.selection.activate(this.clause(this.value||[0,1]))}publish(t){let n;t&&(n=t.map(r=>_x(r,this.scale,this.pixelSize)).sort((r,i)=>r-i)),wx(n,this.value)||(this.value=n,this.g.call(this.brush.moveSilent,t),this.selection.update(this.clause(n)))}clause(t){const{mark:n,pixelSize:r,field:i,scale:s}=this;return{source:this,schema:{type:"interval",pixelSize:r,scales:[s]},clients:this.peers?n.plot.markSet:new Set().add(n),value:t,predicate:t?Cr(i,t):null}}init(t){var c;const{brush:n,channel:r,style:i}=this;this.scale=t.scale(r);const s=t.scale("x").range,o=t.scale("y").range;n.extent([[wn(s),wn(o)],[Ne(s),Ne(o)]]);const a=me(t).selectAll('g[aria-label="facet"]'),l=a.size()?a:me(t);if(this.g=l.append("g").attr("class",`interval-${r}`).each(tP).call(n).call(n.moveSilent,(c=this.value)==null?void 0:c.map(this.scale.apply)),i){const u=this.g.selectAll("rect.selection");for(const f in i)u.attr(f,i[f])}t.addEventListener("pointerenter",()=>this.activate())}}const L0=(e,t)=>e-t;class Eyt{constructor(t,{selection:n,xfield:r,yfield:i,pixelSize:s=1,peers:o=!0,brush:a}){this.mark=t,this.pixelSize=s||1,this.selection=n,this.peers=o,this.xfield=r||Ff(t,["x","x1","x2"]),this.yfield=i||Ff(t,["y","y1","y2"]),this.style=a&&uE(a),this.brush=xyt(),this.brush.on("brush end",({selection:l})=>this.publish(l))}reset(){this.value=void 0,this.g&&this.brush.reset(this.g)}activate(){this.selection.activate(this.clause(this.value||[[0,1],[0,1]]))}publish(t){const{value:n,pixelSize:r,xscale:i,yscale:s}=this;let o,a;if(t){const[l,c]=t;o=[l[0],c[0]].map(u=>_x(u,i,r)).sort(L0),a=[l[1],c[1]].map(u=>_x(u,s,r)).sort(L0)}(!wx(o,n==null?void 0:n[0])||!wx(a,n==null?void 0:n[1]))&&(this.value=t?[o,a]:void 0,this.g.call(this.brush.moveSilent,t),this.selection.update(this.clause(this.value)))}clause(t){const{mark:n,pixelSize:r,xfield:i,yfield:s,xscale:o,yscale:a}=this;return{source:this,schema:{type:"interval",pixelSize:r,scales:[o,a]},clients:this.peers?n.plot.markSet:new Set().add(n),value:t,predicate:t?ic(Cr(i,t[0]),Cr(s,t[1])):null}}init(t){const{brush:n,style:r}=this,i=this.xscale=t.scale("x"),s=this.yscale=t.scale("y"),o=i.range,a=s.range;n.extent([[wn(o),wn(a)],[Ne(o),Ne(a)]]);const l=me(t).selectAll('g[aria-label="facet"]'),c=l.size()?l:me(t);if(this.g=c.append("g").attr("class","interval-xy").each(tP).call(n),r){const u=this.g.selectAll("rect.selection");for(const f in r)u.attr(f,r[f])}if(this.value){const[u,f]=this.value[0].map(i.apply).sort(L0),[d,h]=this.value[1].map(s.apply).sort(L0);this.g.call(n.moveSilent,[[u,d],[f,h]])}t.addEventListener("pointerenter",()=>this.activate())}}const NN=(e,t)=>e-t;class Ayt{constructor(t,{x:n=new Ba,y:r=new Ba,xfield:i,yfield:s,zoom:o=!0,panx:a=!0,pany:l=!0}){this.mark=t,this.xsel=n,this.ysel=r,this.xfield=i||Ff(t,["x","x1","x2"]),this.yfield=s||Ff(t,["y","y1","y2"]),this.zoom=$_(o,[0,1/0],[1,1]),this.panx=this.xsel&&a,this.pany=this.ysel&&l;const{plot:c}=t;a&&this.xsel.addEventListener("value",u=>{c.setAttribute("xDomain",u)&&c.update()}),l&&this.ysel.addEventListener("value",u=>{c.setAttribute("yDomain",u)&&c.update()})}publish(t){if(this.panx){const n=Myt(t,this.xscale);this.xsel.update(this.clause(n,this.xfield,this.xscale))}if(this.pany){const n=$yt(t,this.yscale);this.ysel.update(this.clause(n,this.yfield,this.yscale))}}clause(t,n,r){return{source:this,schema:{type:"interval",scales:[r]},clients:this.mark.plot.markSet,value:t,predicate:t?Cr(n,t):null}}init(t){if(this.svg=t,this.initialized)return;this.initialized=!0;const{panx:n,pany:r,mark:{plot:{element:i}},xsel:s,ysel:o}=this;this.xscale=t.scale("x"),this.yscale=t.scale("y");const a=this.xscale.range.slice().sort(NN),l=this.yscale.range.slice().sort(NN),c=$_(n,[-1/0,1/0],a),u=$_(r,[-1/0,1/0],l),f=Brt().extent([[a[0],l[0]],[a[1],l[1]]]).scaleExtent(this.zoom).translateExtent([[c[0],u[0]],[c[1],u[1]]]).on("start",()=>{this.xscale=this.svg.scale("x"),this.yscale=this.svg.scale("y")}).on("end",()=>i.__zoom=new xs(1,0,0)).on("zoom",({transform:d})=>this.publish(d));if(me(i).call(f),n||r){let d=!1;i.addEventListener("mouseenter",()=>{if(!d){if(d=!0,n){const{xscale:h,xfield:p}=this;s.activate(this.clause(h.domain,p,h))}if(r){const{yscale:h,yfield:p}=this;o.activate(this.clause(h.domain,p,h))}}}),i.addEventListener("mouseleave",()=>d=!1)}}}function $_(e,t,n){return e?Array.isArray(e)?e:t:n}function Myt(e,t){return t.range.map(e.invertX,e).map(t.invert,t)}function $yt(e,t){return t.range.map(e.invertY,e).map(t.invert,t)}class nP{constructor(t,{selection:n,channel:r,field:i}){this.mark=t,this.selection=n,this.clients=new Set().add(t),this.channel=r,this.field=i||Ff(t,[r])}clause(t){const{clients:n,field:r}=this,i=t?JI(r,Zp(t)):null;return{source:this,schema:{type:"point"},clients:n,value:t,predicate:i}}init(t){const n=this,{mark:r,channel:i,selection:s}=this,{data:o}=r,a=r.channelField(i).as,l=me(t).selectAll('g[aria-label="facet"]'),c=l.size()?l:me(t),u=t.scale(i),f=!sc(s);c.on("pointerdown pointermove",function(d){const[h,p]=$i(d,this),g=Nyt(o,a,u.invert(i==="x"?h:p));s.update(f?g:n.clause(g))}),!f&&t.addEventListener("pointerenter",()=>{this.selection.activate(this.clause(0))})}}function Nyt(e,t,n){let r=1/0,i;return e.forEach(s=>{const o=Math.abs(s[t]-n);o<r&&(r=o,i=s[t])}),i}function ll(e,t){return n=>{const r=n.marks[n.marks.length-1];n.addInteractor(new e(r,t))}}function z1({by:e,...t}){return ll(vyt,{selection:e,channels:t})}function Vv({as:e,...t}){return ll(JU,{...t,selection:e})}function rP(e){return Vv({...e,channels:["x"]})}function iP(e){return Vv({...e,channels:["y"]})}function kyt(e){return Vv({...e,channels:["color"]})}function Dyt({as:e,...t}){return ll(nP,{...t,selection:e,channel:"x"})}function Oyt({as:e,...t}){return ll(nP,{...t,selection:e,channel:"y"})}function Kl({as:e,...t}){return ll(eP,{...t,selection:e,channel:"x"})}function Byt({as:e,...t}){return ll(eP,{...t,selection:e,channel:"y"})}function Sx({as:e,...t}){return ll(Eyt,{...t,selection:e})}function cd(e){return ll(Ayt,e)}function Fyt(e={}){return cd({...e,zoom:!1})}function Lyt(e={}){return cd({...e,zoom:!1,pany:!1})}function Ryt(e={}){return cd({...e,zoom:!1,panx:!1})}function Cyt(e={}){return cd(e)}function Uyt(e={}){return cd({...e,pany:!1})}function Pyt(e={}){return cd({...e,panx:!1})}const zyt=Object.freeze(Object.defineProperty({__proto__:null,highlight:z1,intervalX:Kl,intervalXY:Sx,intervalY:Byt,nearestX:Dyt,nearestY:Oyt,pan:Fyt,panX:Lyt,panY:Ryt,panZoom:Cyt,panZoomX:Uyt,panZoomY:Pyt,toggle:Vv,toggleColor:kyt,toggleX:rP,toggleY:iP},Symbol.toStringTag,{value:"Module"}));class kN{constructor(t,n){const{as:r,...i}=n;this.channel=t,this.options={label:null,...i},this.selection=r,this.element=document.createElement("div"),this.element.setAttribute("class","legend"),this.element.value=this}setPlot(t){const{channel:n,selection:r}=this,i=jyt(t,n);this.selection&&i&&(this.handler=new JU(i,{selection:r,channels:[n]}),this.selection.addEventListener("value",()=>this.update()))}init(t){const{channel:n,options:r,handler:i}=this,o=t.scale(n).type==="ordinal"?r:{marginTop:1,tickSize:2,height:28,...r};return this.legend=t.legend(n,o),i&&(i.init(this.legend,":scope > div",a=>[a.__data__]),this.update()),this.element.replaceChildren(this.legend),this.element}update(){if(!this.legend)return;const{value:t}=this.selection,n=t&&t.length?new Set(t.map(i=>i[0])):null,r=this.legend.querySelectorAll(":scope > div");for(const i of r){const s=n?n.has(i.__data__):!0;i.style.opacity=s?1:.2}}}function jyt({marks:e},t){const n=t==="color"?["fill","stroke"]:t==="opacity"?["opacity","fillOpacity","strokeOpacity"]:null;if(n==null)return null;for(let r=e.length-1;r>-1;--r)if(e[r].channelField(n))return e[r];return null}function dE(e,t={}){if(t.for){const{for:n,...r}=t,i=new kN(e,r),s=typeof n,o=a=>a.addLegend(i,!1);return s==="string"?yU.request(n,o):n.value&&o(n.value),i.element}else return n=>n.addLegend(new kN(e,t))}const sP=e=>dE("color",e),Vyt=e=>dE("opacity",e),Yyt=e=>dE("symbol",e),qyt=Object.freeze(Object.defineProperty({__proto__:null,colorLegend:sP,opacityLegend:Vyt,symbolLegend:Yyt},Symbol.toStringTag,{value:"Module"}));function oP({direction:e="vertical",wrap:t=!1},n){const r=document.createElement("div");return r.style.display="flex",r.style.flexDirection=e==="vertical"?"column":"row",r.style.flexWrap=t?t===!0?"wrap":t:"nowrap",r.style.justifyContent="flex-start",r.style.alignItems="flex-start",n.forEach(i=>r.appendChild(i)),r.value={element:r},r}function ud(...e){return oP({direction:"vertical"},e.flat())}function Lf(...e){return oP({direction:"horizontal"},e.flat())}function Wyt({dim:e="width",size:t=10}){const n=document.createElement("span");n.style.display="inline-block",n.style[e]=Number.isNaN(+t)?t:`${t}px`;const r={element:n};return n.value=r,n}function Hyt(e){return Wyt({dim:"width",size:e})}function Gyt(e){return e}function Xyt(e){if(e==null)return Gyt;var t,n,r=e.scale[0],i=e.scale[1],s=e.translate[0],o=e.translate[1];return function(a,l){l||(t=n=0);var c=2,u=a.length,f=new Array(u);for(f[0]=(t+=a[0])*r+s,f[1]=(n+=a[1])*i+o;c<u;)f[c]=a[c],++c;return f}}function Qyt(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function Kyt(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return DN(e,n)})}:DN(e,t)}function DN(e,t){var n=t.id,r=t.bbox,i=t.properties==null?{}:t.properties,s=Zyt(e,t);return n==null&&r==null?{type:"Feature",properties:i,geometry:s}:r==null?{type:"Feature",id:n,properties:i,geometry:s}:{type:"Feature",id:n,bbox:r,properties:i,geometry:s}}function Zyt(e,t){var n=Xyt(e.transform),r=e.arcs;function i(u,f){f.length&&f.pop();for(var d=r[u<0?~u:u],h=0,p=d.length;h<p;++h)f.push(n(d[h],h));u<0&&Qyt(f,p)}function s(u){return n(u)}function o(u){for(var f=[],d=0,h=u.length;d<h;++d)i(u[d],f);return f.length<2&&f.push(f[0]),f}function a(u){for(var f=o(u);f.length<4;)f.push(f[0]);return f}function l(u){return u.map(a)}function c(u){var f=u.type,d;switch(f){case"GeometryCollection":return{type:f,geometries:u.geometries.map(c)};case"Point":d=s(u.coordinates);break;case"MultiPoint":d=u.coordinates.map(s);break;case"LineString":d=o(u.arcs);break;case"MultiLineString":d=u.arcs.map(o);break;case"Polygon":d=l(u.arcs);break;case"MultiPolygon":d=u.arcs.map(l);break;default:return null}return{type:f,coordinates:d}}return c(t)}const Jyt={menu:JH,search:rG,slider:Z2,table:GO};new Map(Object.entries(gyt));new Map(Object.entries(Jyt));new Map(Object.entries(qyt));new Map(Object.entries(Dht));new Map(Object.entries(zyt));const t0t="https://app.motherduck.com",e0t="WASM Client Library Example: Mosaic Integration";function n0t({connect:e}){const[t,n]=In.useState(null),[r,i]=In.useState(!1),s=In.useCallback(c=>{n(c.target.value)},[]),o=In.useCallback(()=>{const c=new URL(window.location.href);c.searchParams.set("tokenInClipboard","y"),window.location.href=`${t0t}/token-request?appName=${encodeURIComponent(e0t)}&returnTo=${encodeURIComponent(c.toString())}`},[]),a=In.useCallback(()=>{if(t){const c=new URL(window.location.href);c.searchParams.get("tokenInClipboard")&&(c.searchParams.delete("tokenInClipboard"),history.pushState({},"",c)),e(t)}},[e,t]);In.useEffect(()=>{async function c(){const u=new URL(window.location.href);if(u.searchParams.get("tokenInClipboard")){if(navigator.clipboard.readText){const f=await navigator.clipboard.readText();if(f){u.searchParams.delete("tokenInClipboard"),history.pushState({},"",u),e(f);return}}i(!0)}}c()},[e]);const l=In.useCallback(c=>{c&&c.focus()},[]);return Ut.jsxs("div",{id:"connect-pane",children:[Ut.jsx("div",{id:"token-in-clipboard-note",style:{visibility:r?"visible":"hidden"},children:"Your token is in the clipboard. Paste it and click Connect."}),Ut.jsx("div",{id:"token-input-row",children:Ut.jsx("input",{ref:l,id:"token-input",type:"password",placeholder:"Paste MotherDuck Service Token Here",onChange:s})}),Ut.jsxs("div",{id:"connect-button-row",children:[Ut.jsx("button",{id:"get-token-button",onClick:o,children:"Get Token"}),Ut.jsx("button",{id:"connect-button",disabled:!t,onClick:a,children:"Connect"})]})]})}const r0t="assets/motherduck_logo-X5yv95Gl.svg";function i0t(){return Ut.jsxs("div",{id:"header",children:[Ut.jsx("div",{id:"title",children:Ut.jsx("a",{href:"https://motherduck.com",target:"_blank",children:Ut.jsx("img",{src:r0t,alt:"MotherDuck logo"})})}),Ut.jsxs("div",{id:"subtitle",children:["WASM Client Example:",Ut.jsx("a",{href:"https://uwdata.github.io/mosaic/",target:"_blank",children:"Mosaic"}),"Integration"]})]})}class s0t{async initialize(){await vr().exec(`create temp table if not exists complaints as 
        select year(created_date)::int as Year, count(*)::int as Complaints
        from sample_data.nyc.service_requests
        where Year < 2023
        and agency_name = 'New York City Police Department'
        group by 1
        order by 1;`),await vr().exec(`create temp table if not exists complaints_details as
        select year(created_date)::int as Year, complaint_type as Type, count(*)::int as Complaints
        from sample_data.nyc.service_requests
        where Year < 2023
        and agency_name = 'New York City Police Department'
        group by 1, 2
        order by 1, 3 desc;`)}render(){const t=Ba.single();return ud(Ke(cE(Be("complaints"),{x:"Year",y:"Complaints",fill:"steelblue"}),z1({by:t}),rP({as:t}),iE("d"),C1(!0),Oh("s")),GO({from:"complaints_details",filterBy:t,format:{Year:n=>String(n)},width:{Year:80,Type:400,Complaints:100},height:400}))}}const rs=[wU(null),_U(null),bU({left:5,top:5,right:5,bottom:5}),Li(160),Ts(100),sE([0,9])];class o0t{async initialize(){await vr().exec(dH("md",[{i:0,u:"A",v:2},{i:1,u:"B",v:8},{i:2,u:"C",v:3},{i:3,u:"D",v:7},{i:4,u:"E",v:5},{i:5,u:"F",v:4},{i:6,u:"G",v:6},{i:7,u:"H",v:1}]))}render(){return ud(Lf(Ke(cE(Be("md"),{x:"u",y:"v",fill:"steelblue"}),...rs),Ke(VU(Be("md"),{x:"u",y:"v",stroke:"steelblue",curve:"monotone-x",marker:"circle"}),...rs),Ke(YU(Be("md"),{x:"u",y:"v",text:"u",fill:"steelblue"}),...rs),Ke(qU(Be("md"),{x:"u",y:"v",stroke:"steelblue"}),...rs),Ke(jU(Be("md"),{x:"u",y:"v",fill:"steelblue"}),...rs)),Lf(Ke(jv(Be("md"),{x:"i",y:"v",fill:"currentColor",r:1.5}),QU(Be("md"),{x:"i",y:"v",stroke:"steelblue"}),...rs,ii([-.5,7.5])),Ke(XU({stroke:"#aaa",strokeOpacity:.5}),GU(Be("md"),{x:"i",y:"v",fill:mr()}),...rs,Xu("blues"),ii([-1,8])),Ke(HU(Be("md"),{x:"i",y:"v",stroke:"steelblue",bandwidth:15}),...rs,ii([-1,8])),Ke(P1(Be("md"),{x:"i",y:"v",fill:"density",bandwidth:15}),...rs,Xu("blues"),ii([-1,8])),Ke(WU(Be("md"),{x:"i",y:"v",fill:"density",bandwidth:2,binWidth:1}),...rs,Xu("blues"),ii([-1,8]))))}}class a0t{async initialize(){await vr().exec(`CREATE TEMP VIEW IF NOT EXISTS gaia_viz AS -- compute u and v with natural earth projection
      WITH prep AS (
        SELECT
          radians((-l + 540) % 360 - 180) AS lambda,
          radians(b) AS phi,
          asin(sqrt(3)/2 * sin(phi)) AS t,
          t^2 AS t2,
          t2^3 AS t6,
          *
        FROM mosaic_examples.main.gaia_5m
      )
      SELECT
        (1.340264 * lambda * cos(t)) / (sqrt(3)/2 * (1.340264 + (-0.081106 * 3 * t2) + (t6 * (0.000893 * 7 + 0.003796 * 9 * t2)))) AS u,
        t * (1.340264 + (-0.081106 * t2) + (t6 * (0.000893 + 0.003796 * t2))) AS v,
        * EXCLUDE('t', 't2', 't6')
      FROM prep
      WHERE parallax BETWEEN -5 AND 20`)}render(){const t=Ba.crossfilter(),n=gr.value(0),r=gr.value(2),i=gr.value("sqrt");return Lf(ud(Ke(P1(Be("gaia_viz",{filterBy:t}),{x:"u",y:"v",fill:"density",bandwidth:n,binWidth:r,binType:"normal"}),Sx({pixelSize:2,as:t}),R1(ai),dx(i),Xu("viridis"),Li(440),Ts(250),ih(25),ux(20),cx(1)),Lf(Ke(Ku(Be("gaia_viz",{filterBy:t}),{x:Th("phot_g_mean_mag"),y:mr(),fill:"steelblue",inset:.5}),Kl({as:t}),ii(ai),fx(i),C1(!0),Li(220),Ts(120),ih(65)),Ke(Ku(Be("gaia_viz",{filterBy:t}),{x:Th("parallax"),y:mr(),fill:"steelblue",inset:.5}),Kl({as:t}),ii(ai),fx(i),C1(!0),Li(220),Ts(120),ih(65)))),Hyt(10),Ke(P1(Be("gaia_viz",{filterBy:t}),{x:"bp_rp",y:"phot_g_mean_mag",fill:"density",bandwidth:n,binWidth:r,binType:"normal"}),Sx({pixelSize:2,as:t}),R1(ai),dx(i),Xu("viridis"),xU(!0),Li(230),Ts(370),ih(25),ux(20),cx(1)))}}const l0t="assets/countries-110m-MkhAC_yf.json";class c0t{constructor(){te(this,"land",null)}async initialize(){this.land=await fetch(l0t).then(t=>t.json()).then(t=>{if(t.objects.land.type!=="GeometryCollection")throw Error("unexpected geojson type");return Kyt(t,t.objects.land).features})}render(){const t=gr.value(-180),n=gr.value(-30),r=gr.array([t,n]);return ud(Lf(Z2({label:"Longitude",as:t,min:-180,max:180,step:1}),Z2({label:"Latitude",as:n,min:-90,max:90,step:1})),Ke(KU(this.land,{fill:"currentColor",fillOpacity:.2}),ZU(),jv(Be("mosaic_examples.main.earthquakes"),{x:"longitude",y:"latitude",r:G`POW(10, magnitude)`,stroke:"red",fill:"red",fillOpacity:.2}),vU("overflow: visible;"),EU("orthographic"),AU(r)))}}class u0t{async initialize(){await vr().exec("CREATE TEMP TABLE IF NOT EXISTS weather AS SELECT * FROM mosaic_examples.main.seattle_weather")}render(){const t=Ba.single(),n=gr.array(["sun","fog","drizzle","rain","snow"]),r=gr.array(["#e7ba52","#a7a7a7","#aec7e8","#1f77b4","#9467bd"]),i=Ba.intersect();return ud(Lf(Ke(jv(Be("weather",{filterBy:t}),{x:cH("date"),y:"temp_max",fill:"weather",r:"precipitation",fillOpacity:.7}),Kl({as:i,brush:{fill:"none",stroke:"#888"}}),z1({by:i,fill:"#ccc",fillOpacity:.2}),sP({as:t,columns:1}),R1(ai),iE("%b"),hx(n),px(r),IU(ai),TU([2,10]),Li(680),Ts(300))),Ke(bx(Be("weather"),{x:mr(),y:"weather",fill:"#ccc",fillOpacity:.2}),bx(Be("weather",{filterBy:i}),{x:mr(),y:"weather",fill:"weather",order:"weather"}),iP({as:t}),z1({by:t}),ii(ai),sE(n),SU(null),hx(n),px(r),Li(680)))}}const ON="flights_200k_viz",BN="flights_10m_viz";class FN{constructor(t="flights_200k"){te(this,"flightsTableName");te(this,"vizTable",null);this.flightsTableName=t}async initialize(){const t=`mosaic_examples.main.${this.flightsTableName}`;this.flightsTableName==="flights_10m"?(await vr().exec(`
      create temp view if not exists ${BN} as
      select GREATEST(-60, LEAST(ARR_DELAY, 180))::DOUBLE AS delay, DISTANCE AS distance, DEP_TIME AS time
      from ${t}
      `),this.vizTable=BN):(await vr().exec(`
      create temp view if not exists ${ON} as
      select *
      from ${t}
      `),this.vizTable=ON)}render(){const t=Ba.crossfilter();return ud(Ke(Ku(Be(this.vizTable,{filterBy:t}),{x:Th("delay"),y:mr(),fill:"steelblue",inset:.5}),Kl({as:t}),ii(ai),Oh("s"),Li(600),Ts(200)),Ke(Ku(Be(this.vizTable,{filterBy:t}),{x:Th("time"),y:mr(),fill:"steelblue",inset:.5}),Kl({as:t}),ii(ai),Oh("s"),Li(600),Ts(200)),Ke(Ku(Be(this.vizTable,{filterBy:t}),{x:Th("distance"),y:mr(),fill:"steelblue",inset:.5}),Kl({as:t}),ii(ai),Oh("s"),Li(600),Ts(200)))}}const aP={"Mark Types":new o0t,"NYPD Complaints":new s0t,Earthquakes:new c0t,"Seattle Weather":new u0t,"Flights 200K":new FN("flights_200k"),"Flights 10M":new FN("flights_10m"),"Gaia Star Catalog":new a0t},LN=Object.keys(aP);function f0t(){const[e,t]=In.useState(null),[n,r]=In.useState(null),[i,s]=In.useState(LN[0]),o=In.useCallback(a=>{s(a.target.value)},[]);return In.useEffect(()=>{(async()=>{if(n){const a=aP[i];t(null),n.innerHTML="Loading, please wait";try{await a.initialize(),n.innerHTML="",n.appendChild(a.render())}catch(l){const c=String(l);n.innerHTML=c,/Catalog "sample_data" does not exist!/.test(c)?t("sample_data"):/Catalog "mosaic_examples" does not exist!/.test(c)&&t("mosaic_examples")}}})()},[i,n]),Ut.jsxs("div",{id:"vizzes-pane",children:[Ut.jsx("div",{id:"selector-pane",children:Ut.jsx("select",{id:"viz-selector",value:i,onChange:o,children:LN.map(a=>Ut.jsx("option",{children:a},a))})}),Ut.jsx("div",{id:"viz-pane",ref:r}),e==="sample_data"?Ut.jsxs("div",{id:"help-pane",children:[Ut.jsxs("div",{children:["This example requires the ",Ut.jsx("span",{className:"code",children:"sample_data"})," share."]}),Ut.jsx("div",{children:"To attach it to your account, run:"}),Ut.jsx("pre",{children:"ATTACH 'md:_share/sample_data/23b0d623-1361-421d-ae77-62d701d471e6';"})]}):null,e==="mosaic_examples"?Ut.jsxs("div",{id:"help-pane",children:[Ut.jsxs("div",{children:["This example requires the ",Ut.jsx("span",{className:"code",children:"mosaic_examples"})," share."]}),Ut.jsx("div",{children:"To attach it to your account, run:"}),Ut.jsx("pre",{children:"ATTACH 'md:_share/mosaic_examples/b01cfda8-239e-4148-a228-054b94cdc3b4';"})]}):null]})}const d0t=new TextDecoder("utf-8"),xx=e=>d0t.decode(e),h0t=new TextEncoder,hE=e=>h0t.encode(e),p0t=e=>typeof e=="number",lP=e=>typeof e=="boolean",ln=e=>typeof e=="function",Ir=e=>e!=null&&Object(e)===e,bc=e=>Ir(e)&&ln(e.then),Dy=e=>Ir(e)&&ln(e[Symbol.iterator]),fd=e=>Ir(e)&&ln(e[Symbol.asyncIterator]),Ix=e=>Ir(e)&&Ir(e.schema),cP=e=>Ir(e)&&"done"in e&&"value"in e,uP=e=>Ir(e)&&ln(e.stat)&&p0t(e.fd),fP=e=>Ir(e)&&pE(e.body),Yv=e=>"_getDOMStream"in e&&"_getNodeStream"in e,y0t=e=>Ir(e)&&ln(e.abort)&&ln(e.getWriter)&&!Yv(e),pE=e=>Ir(e)&&ln(e.cancel)&&ln(e.getReader)&&!Yv(e),m0t=e=>Ir(e)&&ln(e.end)&&ln(e.write)&&lP(e.writable)&&!Yv(e),dP=e=>Ir(e)&&ln(e.read)&&ln(e.pipe)&&lP(e.readable)&&!Yv(e),g0t=e=>Ir(e)&&ln(e.clear)&&ln(e.bytes)&&ln(e.position)&&ln(e.setPosition)&&ln(e.capacity)&&ln(e.getBufferIdentifier)&&ln(e.createLong),yE=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function b0t(e){const t=e[0]?[e[0]]:[];let n,r,i,s;for(let o,a,l=0,c=0,u=e.length;++l<u;){if(o=t[c],a=e[l],!o||!a||o.buffer!==a.buffer||a.byteOffset<o.byteOffset){a&&(t[++c]=a);continue}if({byteOffset:n,byteLength:i}=o,{byteOffset:r,byteLength:s}=a,n+i<r||r+s<n){a&&(t[++c]=a);continue}t[c]=new Uint8Array(o.buffer,n,r-n+s)}return t}function RN(e,t,n=0,r=t.byteLength){const i=e.byteLength,s=new Uint8Array(e.buffer,e.byteOffset,i),o=new Uint8Array(t.buffer,t.byteOffset,Math.min(r,i));return s.set(o,n),e}function Ls(e,t){const n=b0t(e),r=n.reduce((u,f)=>u+f.byteLength,0);let i,s,o,a=0,l=-1;const c=Math.min(t||Number.POSITIVE_INFINITY,r);for(const u=n.length;++l<u;){if(i=n[l],s=i.subarray(0,Math.min(i.length,c-a)),c<=a+s.length){s.length<i.length?n[l]=i.subarray(s.length):s.length===i.length&&l++,o?RN(o,s,a):o=s;break}RN(o||(o=new Uint8Array(c)),s,a),a+=s.length}return[o||new Uint8Array(0),n.slice(l),r-(o?o.byteLength:0)]}function fe(e,t){let n=cP(t)?t.value:t;return n instanceof e?e===Uint8Array?new e(n.buffer,n.byteOffset,n.byteLength):n:n?(typeof n=="string"&&(n=hE(n)),n instanceof ArrayBuffer?new e(n):n instanceof yE?new e(n):g0t(n)?fe(e,n.bytes()):ArrayBuffer.isView(n)?n.byteLength<=0?new e(0):new e(n.buffer,n.byteOffset,n.byteLength/e.BYTES_PER_ELEMENT):e.from(n)):new e(0)}const Ld=e=>fe(Int32Array,e),CN=e=>fe(BigInt64Array,e),jt=e=>fe(Uint8Array,e),Tx=e=>(e.next(),e);function*v0t(e,t){const n=function*(i){yield i},r=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof yE?n(t):Dy(t)?t:n(t);return yield*Tx(function*(i){let s=null;do s=i.next(yield fe(e,s));while(!s.done)}(r[Symbol.iterator]())),new e}const w0t=e=>v0t(Uint8Array,e);function hP(e,t){return sn(this,arguments,function*(){if(bc(t))return yield K(yield K(yield*Ta(Lr(hP(e,yield K(t))))));const r=function(o){return sn(this,arguments,function*(){yield yield K(yield K(o))})},i=function(o){return sn(this,arguments,function*(){yield K(yield*Ta(Lr(Tx(function*(a){let l=null;do l=a.next(yield l==null?void 0:l.value);while(!l.done)}(o[Symbol.iterator]())))))})},s=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof yE?r(t):Dy(t)?i(t):fd(t)?t:r(t);return yield K(yield*Ta(Lr(Tx(function(o){return sn(this,arguments,function*(){let a=null;do a=yield K(o.next(yield yield K(fe(e,a))));while(!a.done)})}(s[Symbol.asyncIterator]()))))),yield K(new e)})}const _0t=e=>hP(Uint8Array,e);function pP(e,t,n){if(e!==0){n=n.slice(0,t);for(let r=-1,i=n.length;++r<i;)n[r]+=e}return n.subarray(0,t)}function S0t(e,t){let n=0;const r=e.length;if(r!==t.length)return!1;if(r>0)do if(e[n]!==t[n])return!1;while(++n<r);return!0}const Zr={fromIterable(e){return R0(x0t(e))},fromAsyncIterable(e){return R0(I0t(e))},fromDOMStream(e){return R0(T0t(e))},fromNodeStream(e){return R0(A0t(e))},toDOMStream(e,t){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(e,t){throw new Error('"toNodeStream" not available in this environment')}},R0=e=>(e.next(),e);function*x0t(e){let t,n=!1,r=[],i,s,o,a=0;function l(){return s==="peek"?Ls(r,o)[0]:([i,r,a]=Ls(r,o),i)}({cmd:s,size:o}=(yield null)||{cmd:"read",size:0});const c=w0t(e)[Symbol.iterator]();try{do if({done:t,value:i}=Number.isNaN(o-a)?c.next():c.next(o-a),!t&&i.byteLength>0&&(r.push(i),a+=i.byteLength),t||o<=a)do({cmd:s,size:o}=yield l());while(o<a);while(!t)}catch(u){(n=!0)&&typeof c.throw=="function"&&c.throw(u)}finally{n===!1&&typeof c.return=="function"&&c.return(null)}return null}function I0t(e){return sn(this,arguments,function*(){let n,r=!1,i=[],s,o,a,l=0;function c(){return o==="peek"?Ls(i,a)[0]:([s,i,l]=Ls(i,a),s)}({cmd:o,size:a}=(yield yield K(null))||{cmd:"read",size:0});const u=_0t(e)[Symbol.asyncIterator]();try{do if({done:n,value:s}=Number.isNaN(a-l)?yield K(u.next()):yield K(u.next(a-l)),!n&&s.byteLength>0&&(i.push(s),l+=s.byteLength),n||a<=l)do({cmd:o,size:a}=yield yield K(c()));while(a<l);while(!n)}catch(f){(r=!0)&&typeof u.throw=="function"&&(yield K(u.throw(f)))}finally{r===!1&&typeof u.return=="function"&&(yield K(u.return(new Uint8Array(0))))}return yield K(null)})}function T0t(e){return sn(this,arguments,function*(){let n=!1,r=!1,i=[],s,o,a,l=0;function c(){return o==="peek"?Ls(i,a)[0]:([s,i,l]=Ls(i,a),s)}({cmd:o,size:a}=(yield yield K(null))||{cmd:"read",size:0});const u=new E0t(e);try{do if({done:n,value:s}=Number.isNaN(a-l)?yield K(u.read()):yield K(u.read(a-l)),!n&&s.byteLength>0&&(i.push(jt(s)),l+=s.byteLength),n||a<=l)do({cmd:o,size:a}=yield yield K(c()));while(a<l);while(!n)}catch(f){(r=!0)&&(yield K(u.cancel(f)))}finally{r===!1?yield K(u.cancel()):e.locked&&u.releaseLock()}return yield K(null)})}class E0t{constructor(t){this.source=t,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(t){return W(this,void 0,void 0,function*(){const{reader:n,source:r}=this;n&&(yield n.cancel(t).catch(()=>{})),r&&r.locked&&this.releaseLock()})}read(t){return W(this,void 0,void 0,function*(){if(t===0)return{done:this.reader==null,value:new Uint8Array(0)};const n=yield this.reader.read();return!n.done&&(n.value=jt(n)),n})}}const N_=(e,t)=>{const n=i=>r([t,i]);let r;return[t,n,new Promise(i=>(r=i)&&e.once(t,n))]};function A0t(e){return sn(this,arguments,function*(){const n=[];let r="error",i=!1,s=null,o,a,l=0,c=[],u;function f(){return o==="peek"?Ls(c,a)[0]:([u,c,l]=Ls(c,a),u)}if({cmd:o,size:a}=(yield yield K(null))||{cmd:"read",size:0},e.isTTY)return yield yield K(new Uint8Array(0)),yield K(null);try{n[0]=N_(e,"end"),n[1]=N_(e,"error");do{if(n[2]=N_(e,"readable"),[r,s]=yield K(Promise.race(n.map(h=>h[2]))),r==="error")break;if((i=r==="end")||(Number.isFinite(a-l)?(u=jt(e.read(a-l)),u.byteLength<a-l&&(u=jt(e.read()))):u=jt(e.read()),u.byteLength>0&&(c.push(u),l+=u.byteLength)),i||a<=l)do({cmd:o,size:a}=yield yield K(f()));while(a<l)}while(!i)}finally{yield K(d(n,r==="error"?s:null))}return yield K(null);function d(h,p){return u=c=null,new Promise((g,v)=>{for(const[y,m]of h)e.off(y,m);try{const y=e.destroy;y&&y.call(e,p),p=void 0}catch(y){p=y||p}finally{p!=null?v(p):g()}})}})}var Je;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(Je||(Je={}));var on;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(on||(on={}));var Qe;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(Qe||(Qe={}));var er;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(er||(er={}));var rt;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(rt||(rt={}));var Un;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(Un||(Un={}));var j1;(function(e){e[e.BUFFER=0]="BUFFER"})(j1||(j1={}));var V1;(function(e){e[e.LZ4_FRAME=0]="LZ4_FRAME",e[e.ZSTD=1]="ZSTD"})(V1||(V1={}));class oa{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBodyCompression(t,n){return(n||new oa).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBodyCompression(t,n){return t.setPosition(t.position()+ae),(n||new oa).__init(t.readInt32(t.position())+t.position(),t)}codec(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt8(this.bb_pos+t):V1.LZ4_FRAME}method(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt8(this.bb_pos+t):j1.BUFFER}static startBodyCompression(t){t.startObject(2)}static addCodec(t,n){t.addFieldInt8(0,n,V1.LZ4_FRAME)}static addMethod(t,n){t.addFieldInt8(1,n,j1.BUFFER)}static endBodyCompression(t){return t.endObject()}static createBodyCompression(t,n,r){return oa.startBodyCompression(t),oa.addCodec(t,n),oa.addMethod(t,r),oa.endBodyCompression(t)}}class yP{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(t,n,r){return t.prep(8,16),t.writeInt64(BigInt(r??0)),t.writeInt64(BigInt(n??0)),t.offset()}}let mP=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(t,n,r){return t.prep(8,16),t.writeInt64(BigInt(r??0)),t.writeInt64(BigInt(n??0)),t.offset()}},io=class Ex{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsRecordBatch(t,n){return(n||new Ex).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsRecordBatch(t,n){return t.setPosition(t.position()+ae),(n||new Ex).__init(t.readInt32(t.position())+t.position(),t)}length(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}nodes(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new mP).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}nodesLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}buffers(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new yP).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}buffersLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}compression(t){const n=this.bb.__offset(this.bb_pos,10);return n?(t||new oa).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}static startRecordBatch(t){t.startObject(4)}static addLength(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addNodes(t,n){t.addFieldOffset(1,n,0)}static startNodesVector(t,n){t.startVector(16,n,8)}static addBuffers(t,n){t.addFieldOffset(2,n,0)}static startBuffersVector(t,n){t.startVector(16,n,8)}static addCompression(t,n){t.addFieldOffset(3,n,0)}static endRecordBatch(t){return t.endObject()}},tu=class Ax{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryBatch(t,n){return(n||new Ax).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryBatch(t,n){return t.setPosition(t.position()+ae),(n||new Ax).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}data(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new io).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isDelta(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startDictionaryBatch(t){t.startObject(3)}static addId(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addData(t,n){t.addFieldOffset(1,n,0)}static addIsDelta(t,n){t.addFieldInt8(2,+n,0)}static endDictionaryBatch(t){return t.endObject()}};var Rf;(function(e){e[e.Little=0]="Little",e[e.Big=1]="Big"})(Rf||(Rf={}));var Y1;(function(e){e[e.DenseArray=0]="DenseArray"})(Y1||(Y1={}));class Nr{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInt(t,n){return(n||new Nr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInt(t,n){return t.setPosition(t.position()+ae),(n||new Nr).__init(t.readInt32(t.position())+t.position(),t)}bitWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}isSigned(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startInt(t){t.startObject(2)}static addBitWidth(t,n){t.addFieldInt32(0,n,0)}static addIsSigned(t,n){t.addFieldInt8(1,+n,0)}static endInt(t){return t.endObject()}static createInt(t,n,r){return Nr.startInt(t),Nr.addBitWidth(t,n),Nr.addIsSigned(t,r),Nr.endInt(t)}}class fo{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryEncoding(t,n){return(n||new fo).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryEncoding(t,n){return t.setPosition(t.position()+ae),(n||new fo).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}indexType(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new Nr).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isOrdered(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}dictionaryKind(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt16(this.bb_pos+t):Y1.DenseArray}static startDictionaryEncoding(t){t.startObject(4)}static addId(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addIndexType(t,n){t.addFieldOffset(1,n,0)}static addIsOrdered(t,n){t.addFieldInt8(2,+n,0)}static addDictionaryKind(t,n){t.addFieldInt16(3,n,Y1.DenseArray)}static endDictionaryEncoding(t){return t.endObject()}}class cn{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsKeyValue(t,n){return(n||new cn).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsKeyValue(t,n){return t.setPosition(t.position()+ae),(n||new cn).__init(t.readInt32(t.position())+t.position(),t)}key(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}value(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startKeyValue(t){t.startObject(2)}static addKey(t,n){t.addFieldOffset(0,n,0)}static addValue(t,n){t.addFieldOffset(1,n,0)}static endKeyValue(t){return t.endObject()}static createKeyValue(t,n,r){return cn.startKeyValue(t),cn.addKey(t,n),cn.addValue(t,r),cn.endKeyValue(t)}}let UN=class sh{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBinary(t,n){return(n||new sh).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBinary(t,n){return t.setPosition(t.position()+ae),(n||new sh).__init(t.readInt32(t.position())+t.position(),t)}static startBinary(t){t.startObject(0)}static endBinary(t){return t.endObject()}static createBinary(t){return sh.startBinary(t),sh.endBinary(t)}},PN=class oh{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBool(t,n){return(n||new oh).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBool(t,n){return t.setPosition(t.position()+ae),(n||new oh).__init(t.readInt32(t.position())+t.position(),t)}static startBool(t){t.startObject(0)}static endBool(t){return t.endObject()}static createBool(t){return oh.startBool(t),oh.endBool(t)}},gm=class eu{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDate(t,n){return(n||new eu).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDate(t,n){return t.setPosition(t.position()+ae),(n||new eu).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):er.MILLISECOND}static startDate(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,er.MILLISECOND)}static endDate(t){return t.endObject()}static createDate(t,n){return eu.startDate(t),eu.addUnit(t,n),eu.endDate(t)}},nu=class Jo{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDecimal(t,n){return(n||new Jo).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDecimal(t,n){return t.setPosition(t.position()+ae),(n||new Jo).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}scale(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}bitWidth(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt32(this.bb_pos+t):128}static startDecimal(t){t.startObject(3)}static addPrecision(t,n){t.addFieldInt32(0,n,0)}static addScale(t,n){t.addFieldInt32(1,n,0)}static addBitWidth(t,n){t.addFieldInt32(2,n,128)}static endDecimal(t){return t.endObject()}static createDecimal(t,n,r,i){return Jo.startDecimal(t),Jo.addPrecision(t,n),Jo.addScale(t,r),Jo.addBitWidth(t,i),Jo.endDecimal(t)}},bm=class ru{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDuration(t,n){return(n||new ru).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDuration(t,n){return t.setPosition(t.position()+ae),(n||new ru).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):rt.MILLISECOND}static startDuration(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,rt.MILLISECOND)}static endDuration(t){return t.endObject()}static createDuration(t,n){return ru.startDuration(t),ru.addUnit(t,n),ru.endDuration(t)}},vm=class iu{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeBinary(t,n){return(n||new iu).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeBinary(t,n){return t.setPosition(t.position()+ae),(n||new iu).__init(t.readInt32(t.position())+t.position(),t)}byteWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeBinary(t){t.startObject(1)}static addByteWidth(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeBinary(t){return t.endObject()}static createFixedSizeBinary(t,n){return iu.startFixedSizeBinary(t),iu.addByteWidth(t,n),iu.endFixedSizeBinary(t)}},wm=class su{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeList(t,n){return(n||new su).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeList(t,n){return t.setPosition(t.position()+ae),(n||new su).__init(t.readInt32(t.position())+t.position(),t)}listSize(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeList(t){t.startObject(1)}static addListSize(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeList(t){return t.endObject()}static createFixedSizeList(t,n){return su.startFixedSizeList(t),su.addListSize(t,n),su.endFixedSizeList(t)}};class vs{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFloatingPoint(t,n){return(n||new vs).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFloatingPoint(t,n){return t.setPosition(t.position()+ae),(n||new vs).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Qe.HALF}static startFloatingPoint(t){t.startObject(1)}static addPrecision(t,n){t.addFieldInt16(0,n,Qe.HALF)}static endFloatingPoint(t){return t.endObject()}static createFloatingPoint(t,n){return vs.startFloatingPoint(t),vs.addPrecision(t,n),vs.endFloatingPoint(t)}}class ws{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInterval(t,n){return(n||new ws).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInterval(t,n){return t.setPosition(t.position()+ae),(n||new ws).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Un.YEAR_MONTH}static startInterval(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,Un.YEAR_MONTH)}static endInterval(t){return t.endObject()}static createInterval(t,n){return ws.startInterval(t),ws.addUnit(t,n),ws.endInterval(t)}}let zN=class ah{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsLargeBinary(t,n){return(n||new ah).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsLargeBinary(t,n){return t.setPosition(t.position()+ae),(n||new ah).__init(t.readInt32(t.position())+t.position(),t)}static startLargeBinary(t){t.startObject(0)}static endLargeBinary(t){return t.endObject()}static createLargeBinary(t){return ah.startLargeBinary(t),ah.endLargeBinary(t)}},jN=class lh{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsLargeUtf8(t,n){return(n||new lh).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsLargeUtf8(t,n){return t.setPosition(t.position()+ae),(n||new lh).__init(t.readInt32(t.position())+t.position(),t)}static startLargeUtf8(t){t.startObject(0)}static endLargeUtf8(t){return t.endObject()}static createLargeUtf8(t){return lh.startLargeUtf8(t),lh.endLargeUtf8(t)}},VN=class ch{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsList(t,n){return(n||new ch).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsList(t,n){return t.setPosition(t.position()+ae),(n||new ch).__init(t.readInt32(t.position())+t.position(),t)}static startList(t){t.startObject(0)}static endList(t){return t.endObject()}static createList(t){return ch.startList(t),ch.endList(t)}},_m=class ou{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMap(t,n){return(n||new ou).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMap(t,n){return t.setPosition(t.position()+ae),(n||new ou).__init(t.readInt32(t.position())+t.position(),t)}keysSorted(){const t=this.bb.__offset(this.bb_pos,4);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startMap(t){t.startObject(1)}static addKeysSorted(t,n){t.addFieldInt8(0,+n,0)}static endMap(t){return t.endObject()}static createMap(t,n){return ou.startMap(t),ou.addKeysSorted(t,n),ou.endMap(t)}},YN=class uh{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsNull(t,n){return(n||new uh).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsNull(t,n){return t.setPosition(t.position()+ae),(n||new uh).__init(t.readInt32(t.position())+t.position(),t)}static startNull(t){t.startObject(0)}static endNull(t){return t.endObject()}static createNull(t){return uh.startNull(t),uh.endNull(t)}};class zl{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsStruct_(t,n){return(n||new zl).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsStruct_(t,n){return t.setPosition(t.position()+ae),(n||new zl).__init(t.readInt32(t.position())+t.position(),t)}static startStruct_(t){t.startObject(0)}static endStruct_(t){return t.endObject()}static createStruct_(t){return zl.startStruct_(t),zl.endStruct_(t)}}class ei{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTime(t,n){return(n||new ei).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTime(t,n){return t.setPosition(t.position()+ae),(n||new ei).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):rt.MILLISECOND}bitWidth(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):32}static startTime(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,rt.MILLISECOND)}static addBitWidth(t,n){t.addFieldInt32(1,n,32)}static endTime(t){return t.endObject()}static createTime(t,n,r){return ei.startTime(t),ei.addUnit(t,n),ei.addBitWidth(t,r),ei.endTime(t)}}class ni{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTimestamp(t,n){return(n||new ni).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTimestamp(t,n){return t.setPosition(t.position()+ae),(n||new ni).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):rt.SECOND}timezone(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startTimestamp(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,rt.SECOND)}static addTimezone(t,n){t.addFieldOffset(1,n,0)}static endTimestamp(t){return t.endObject()}static createTimestamp(t,n,r){return ni.startTimestamp(t),ni.addUnit(t,n),ni.addTimezone(t,r),ni.endTimestamp(t)}}class lr{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUnion(t,n){return(n||new lr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUnion(t,n){return t.setPosition(t.position()+ae),(n||new lr).__init(t.readInt32(t.position())+t.position(),t)}mode(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):on.Sparse}typeIds(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readInt32(this.bb.__vector(this.bb_pos+n)+t*4):0}typeIdsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}typeIdsArray(){const t=this.bb.__offset(this.bb_pos,6);return t?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startUnion(t){t.startObject(2)}static addMode(t,n){t.addFieldInt16(0,n,on.Sparse)}static addTypeIds(t,n){t.addFieldOffset(1,n,0)}static createTypeIdsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addInt32(n[r]);return t.endVector()}static startTypeIdsVector(t,n){t.startVector(4,n,4)}static endUnion(t){return t.endObject()}static createUnion(t,n,r){return lr.startUnion(t),lr.addMode(t,n),lr.addTypeIds(t,r),lr.endUnion(t)}}let qN=class fh{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUtf8(t,n){return(n||new fh).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUtf8(t,n){return t.setPosition(t.position()+ae),(n||new fh).__init(t.readInt32(t.position())+t.position(),t)}static startUtf8(t){t.startObject(0)}static endUtf8(t){return t.endObject()}static createUtf8(t){return fh.startUtf8(t),fh.endUtf8(t)}};var _e;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.FloatingPoint=3]="FloatingPoint",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct_=13]="Struct_",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.LargeBinary=19]="LargeBinary",e[e.LargeUtf8=20]="LargeUtf8",e[e.LargeList=21]="LargeList",e[e.RunEndEncoded=22]="RunEndEncoded"})(_e||(_e={}));let Qr=class Sm{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsField(t,n){return(n||new Sm).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsField(t,n){return t.setPosition(t.position()+ae),(n||new Sm).__init(t.readInt32(t.position())+t.position(),t)}name(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}nullable(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}typeType(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):_e.NONE}type(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.__union(t,this.bb_pos+n):null}dictionary(t){const n=this.bb.__offset(this.bb_pos,12);return n?(t||new fo).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}children(t,n){const r=this.bb.__offset(this.bb_pos,14);return r?(n||new Sm).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}childrenLength(){const t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,16);return r?(n||new cn).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}static startField(t){t.startObject(7)}static addName(t,n){t.addFieldOffset(0,n,0)}static addNullable(t,n){t.addFieldInt8(1,+n,0)}static addTypeType(t,n){t.addFieldInt8(2,n,_e.NONE)}static addType(t,n){t.addFieldOffset(3,n,0)}static addDictionary(t,n){t.addFieldOffset(4,n,0)}static addChildren(t,n){t.addFieldOffset(5,n,0)}static createChildrenVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startChildrenVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(6,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endField(t){return t.endObject()}},us=class Js{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsSchema(t,n){return(n||new Js).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSchema(t,n){return t.setPosition(t.position()+ae),(n||new Js).__init(t.readInt32(t.position())+t.position(),t)}endianness(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Rf.Little}fields(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new Qr).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}fieldsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new cn).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}features(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.readInt64(this.bb.__vector(this.bb_pos+n)+t*8):BigInt(0)}featuresLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}static startSchema(t){t.startObject(4)}static addEndianness(t,n){t.addFieldInt16(0,n,Rf.Little)}static addFields(t,n){t.addFieldOffset(1,n,0)}static createFieldsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startFieldsVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(2,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static addFeatures(t,n){t.addFieldOffset(3,n,0)}static createFeaturesVector(t,n){t.startVector(8,n.length,8);for(let r=n.length-1;r>=0;r--)t.addInt64(n[r]);return t.endVector()}static startFeaturesVector(t,n){t.startVector(8,n,8)}static endSchema(t){return t.endObject()}static finishSchemaBuffer(t,n){t.finish(n)}static finishSizePrefixedSchemaBuffer(t,n){t.finish(n,void 0,!0)}static createSchema(t,n,r,i,s){return Js.startSchema(t),Js.addEndianness(t,n),Js.addFields(t,r),Js.addCustomMetadata(t,i),Js.addFeatures(t,s),Js.endSchema(t)}};var Zt;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(Zt||(Zt={}));var $;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.Float=3]="Float",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct=13]="Struct",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.LargeBinary=19]="LargeBinary",e[e.LargeUtf8=20]="LargeUtf8",e[e.Dictionary=-1]="Dictionary",e[e.Int8=-2]="Int8",e[e.Int16=-3]="Int16",e[e.Int32=-4]="Int32",e[e.Int64=-5]="Int64",e[e.Uint8=-6]="Uint8",e[e.Uint16=-7]="Uint16",e[e.Uint32=-8]="Uint32",e[e.Uint64=-9]="Uint64",e[e.Float16=-10]="Float16",e[e.Float32=-11]="Float32",e[e.Float64=-12]="Float64",e[e.DateDay=-13]="DateDay",e[e.DateMillisecond=-14]="DateMillisecond",e[e.TimestampSecond=-15]="TimestampSecond",e[e.TimestampMillisecond=-16]="TimestampMillisecond",e[e.TimestampMicrosecond=-17]="TimestampMicrosecond",e[e.TimestampNanosecond=-18]="TimestampNanosecond",e[e.TimeSecond=-19]="TimeSecond",e[e.TimeMillisecond=-20]="TimeMillisecond",e[e.TimeMicrosecond=-21]="TimeMicrosecond",e[e.TimeNanosecond=-22]="TimeNanosecond",e[e.DenseUnion=-23]="DenseUnion",e[e.SparseUnion=-24]="SparseUnion",e[e.IntervalDayTime=-25]="IntervalDayTime",e[e.IntervalYearMonth=-26]="IntervalYearMonth",e[e.DurationSecond=-27]="DurationSecond",e[e.DurationMillisecond=-28]="DurationMillisecond",e[e.DurationMicrosecond=-29]="DurationMicrosecond",e[e.DurationNanosecond=-30]="DurationNanosecond"})($||($={}));var so;(function(e){e[e.OFFSET=0]="OFFSET",e[e.DATA=1]="DATA",e[e.VALIDITY=2]="VALIDITY",e[e.TYPE=3]="TYPE"})(so||(so={}));const M0t=void 0;function $p(e){if(e===null)return"null";if(e===M0t)return"undefined";switch(typeof e){case"number":return`${e}`;case"bigint":return`${e}`;case"string":return`"${e}"`}return typeof e[Symbol.toPrimitive]=="function"?e[Symbol.toPrimitive]("string"):ArrayBuffer.isView(e)?e instanceof BigInt64Array||e instanceof BigUint64Array?`[${[...e].map(t=>$p(t))}]`:`[${e}]`:ArrayBuffer.isView(e)?`[${e}]`:JSON.stringify(e,(t,n)=>typeof n=="bigint"?`${n}`:n)}const $0t=Symbol.for("isArrowBigNum");function Zi(e,...t){return t.length===0?Object.setPrototypeOf(fe(this.TypedArray,e),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(e,...t),this.constructor.prototype)}Zi.prototype[$0t]=!0;Zi.prototype.toJSON=function(){return`"${kp(this)}"`};Zi.prototype.valueOf=function(){return gP(this)};Zi.prototype.toString=function(){return kp(this)};Zi.prototype[Symbol.toPrimitive]=function(e="default"){switch(e){case"number":return gP(this);case"string":return kp(this);case"default":return N0t(this)}return kp(this)};function Zu(...e){return Zi.apply(this,e)}function Ju(...e){return Zi.apply(this,e)}function Np(...e){return Zi.apply(this,e)}Object.setPrototypeOf(Zu.prototype,Object.create(Int32Array.prototype));Object.setPrototypeOf(Ju.prototype,Object.create(Uint32Array.prototype));Object.setPrototypeOf(Np.prototype,Object.create(Uint32Array.prototype));Object.assign(Zu.prototype,Zi.prototype,{constructor:Zu,signed:!0,TypedArray:Int32Array,BigIntArray:BigInt64Array});Object.assign(Ju.prototype,Zi.prototype,{constructor:Ju,signed:!1,TypedArray:Uint32Array,BigIntArray:BigUint64Array});Object.assign(Np.prototype,Zi.prototype,{constructor:Np,signed:!0,TypedArray:Uint32Array,BigIntArray:BigUint64Array});function gP(e){const{buffer:t,byteOffset:n,length:r,signed:i}=e,s=new BigUint64Array(t,n,r),o=i&&s.at(-1)&BigInt(1)<<BigInt(63);let a=BigInt(o?1:0),l=BigInt(0);if(o){for(const c of s)a+=~c*(BigInt(1)<<BigInt(32)*l++);a*=BigInt(-1)}else for(const c of s)a+=c*(BigInt(1)<<BigInt(32)*l++);return a}const kp=e=>{if(e.byteLength===8)return`${new e.BigIntArray(e.buffer,e.byteOffset,1)[0]}`;if(!e.signed)return k_(e);let t=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);if(new Int16Array([t.at(-1)])[0]>=0)return k_(e);t=t.slice();let r=1;for(let s=0;s<t.length;s++){const o=t[s],a=~o+r;t[s]=a,r&=o===0?1:0}return`-${k_(t)}`},N0t=e=>e.byteLength===8?new e.BigIntArray(e.buffer,e.byteOffset,1)[0]:kp(e);function k_(e){let t="";const n=new Uint32Array(2);let r=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);const i=new Uint32Array((r=new Uint16Array(r).reverse()).buffer);let s=-1;const o=r.length-1;do{for(n[0]=r[s=0];s<o;)r[s++]=n[1]=n[0]/10,n[0]=(n[0]-n[1]*10<<16)+r[s];r[s]=n[1]=n[0]/10,n[0]=n[0]-n[1]*10,t=`${n[0]}${t}`}while(i[0]||i[1]||i[2]||i[3]);return t??"0"}class mE{static new(t,n){switch(n){case!0:return new Zu(t);case!1:return new Ju(t)}switch(t.constructor){case Int8Array:case Int16Array:case Int32Array:case BigInt64Array:return new Zu(t)}return t.byteLength===16?new Np(t):new Ju(t)}static signed(t){return new Zu(t)}static unsigned(t){return new Ju(t)}static decimal(t){return new Np(t)}constructor(t,n){return mE.new(t,n)}}function Mn(e){if(typeof e=="bigint"&&(e<Number.MIN_SAFE_INTEGER||e>Number.MAX_SAFE_INTEGER))throw new TypeError(`${e} is not safe to convert to a number.`);return Number(e)}var bP,vP,wP,_P,SP,xP,IP,TP,EP,AP,MP,$P,NP,kP,DP,OP,BP,FP,LP,RP,CP,UP;class ot{static isNull(t){return(t==null?void 0:t.typeId)===$.Null}static isInt(t){return(t==null?void 0:t.typeId)===$.Int}static isFloat(t){return(t==null?void 0:t.typeId)===$.Float}static isBinary(t){return(t==null?void 0:t.typeId)===$.Binary}static isLargeBinary(t){return(t==null?void 0:t.typeId)===$.LargeBinary}static isUtf8(t){return(t==null?void 0:t.typeId)===$.Utf8}static isLargeUtf8(t){return(t==null?void 0:t.typeId)===$.LargeUtf8}static isBool(t){return(t==null?void 0:t.typeId)===$.Bool}static isDecimal(t){return(t==null?void 0:t.typeId)===$.Decimal}static isDate(t){return(t==null?void 0:t.typeId)===$.Date}static isTime(t){return(t==null?void 0:t.typeId)===$.Time}static isTimestamp(t){return(t==null?void 0:t.typeId)===$.Timestamp}static isInterval(t){return(t==null?void 0:t.typeId)===$.Interval}static isDuration(t){return(t==null?void 0:t.typeId)===$.Duration}static isList(t){return(t==null?void 0:t.typeId)===$.List}static isStruct(t){return(t==null?void 0:t.typeId)===$.Struct}static isUnion(t){return(t==null?void 0:t.typeId)===$.Union}static isFixedSizeBinary(t){return(t==null?void 0:t.typeId)===$.FixedSizeBinary}static isFixedSizeList(t){return(t==null?void 0:t.typeId)===$.FixedSizeList}static isMap(t){return(t==null?void 0:t.typeId)===$.Map}static isDictionary(t){return(t==null?void 0:t.typeId)===$.Dictionary}static isDenseUnion(t){return ot.isUnion(t)&&t.mode===on.Dense}static isSparseUnion(t){return ot.isUnion(t)&&t.mode===on.Sparse}constructor(t){this.typeId=t}}bP=Symbol.toStringTag;ot[bP]=(e=>(e.children=null,e.ArrayType=Array,e.OffsetArrayType=Int32Array,e[Symbol.toStringTag]="DataType"))(ot.prototype);class Ya extends ot{constructor(){super($.Null)}toString(){return"Null"}}vP=Symbol.toStringTag;Ya[vP]=(e=>e[Symbol.toStringTag]="Null")(Ya.prototype);class qa extends ot{constructor(t,n){super($.Int),this.isSigned=t,this.bitWidth=n}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?BigInt64Array:BigUint64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}wP=Symbol.toStringTag;qa[wP]=(e=>(e.isSigned=null,e.bitWidth=null,e[Symbol.toStringTag]="Int"))(qa.prototype);class Dp extends qa{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}Object.defineProperty(Dp.prototype,"ArrayType",{value:Int32Array});class Op extends ot{constructor(t){super($.Float),this.precision=t}get ArrayType(){switch(this.precision){case Qe.HALF:return Uint16Array;case Qe.SINGLE:return Float32Array;case Qe.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}_P=Symbol.toStringTag;Op[_P]=(e=>(e.precision=null,e[Symbol.toStringTag]="Float"))(Op.prototype);class q1 extends ot{constructor(){super($.Binary)}toString(){return"Binary"}}SP=Symbol.toStringTag;q1[SP]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Binary"))(q1.prototype);class W1 extends ot{constructor(){super($.LargeBinary)}toString(){return"LargeBinary"}}xP=Symbol.toStringTag;W1[xP]=(e=>(e.ArrayType=Uint8Array,e.OffsetArrayType=BigInt64Array,e[Symbol.toStringTag]="LargeBinary"))(W1.prototype);class H1 extends ot{constructor(){super($.Utf8)}toString(){return"Utf8"}}IP=Symbol.toStringTag;H1[IP]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Utf8"))(H1.prototype);class G1 extends ot{constructor(){super($.LargeUtf8)}toString(){return"LargeUtf8"}}TP=Symbol.toStringTag;G1[TP]=(e=>(e.ArrayType=Uint8Array,e.OffsetArrayType=BigInt64Array,e[Symbol.toStringTag]="LargeUtf8"))(G1.prototype);class X1 extends ot{constructor(){super($.Bool)}toString(){return"Bool"}}EP=Symbol.toStringTag;X1[EP]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Bool"))(X1.prototype);class Q1 extends ot{constructor(t,n,r=128){super($.Decimal),this.scale=t,this.precision=n,this.bitWidth=r}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}}AP=Symbol.toStringTag;Q1[AP]=(e=>(e.scale=null,e.precision=null,e.ArrayType=Uint32Array,e[Symbol.toStringTag]="Decimal"))(Q1.prototype);class K1 extends ot{constructor(t){super($.Date),this.unit=t}toString(){return`Date${(this.unit+1)*32}<${er[this.unit]}>`}}MP=Symbol.toStringTag;K1[MP]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Date"))(K1.prototype);class Bp extends ot{constructor(t,n){super($.Time),this.unit=t,this.bitWidth=n}toString(){return`Time${this.bitWidth}<${rt[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return BigInt64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}$P=Symbol.toStringTag;Bp[$P]=(e=>(e.unit=null,e.bitWidth=null,e[Symbol.toStringTag]="Time"))(Bp.prototype);class Z1 extends ot{constructor(t,n){super($.Timestamp),this.unit=t,this.timezone=n}toString(){return`Timestamp<${rt[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}NP=Symbol.toStringTag;Z1[NP]=(e=>(e.unit=null,e.timezone=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Timestamp"))(Z1.prototype);class J1 extends ot{constructor(t){super($.Interval),this.unit=t}toString(){return`Interval<${Un[this.unit]}>`}}kP=Symbol.toStringTag;J1[kP]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Interval"))(J1.prototype);class tb extends ot{constructor(t){super($.Duration),this.unit=t}toString(){return`Duration<${rt[this.unit]}>`}}DP=Symbol.toStringTag;tb[DP]=(e=>(e.unit=null,e.ArrayType=BigInt64Array,e[Symbol.toStringTag]="Duration"))(tb.prototype);class eb extends ot{constructor(t){super($.List),this.children=[t]}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}}OP=Symbol.toStringTag;eb[OP]=(e=>(e.children=null,e[Symbol.toStringTag]="List"))(eb.prototype);class Xn extends ot{constructor(t){super($.Struct),this.children=t}toString(){return`Struct<{${this.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}BP=Symbol.toStringTag;Xn[BP]=(e=>(e.children=null,e[Symbol.toStringTag]="Struct"))(Xn.prototype);class nb extends ot{constructor(t,n,r){super($.Union),this.mode=t,this.children=r,this.typeIds=n=Int32Array.from(n),this.typeIdToChildIndex=n.reduce((i,s,o)=>(i[s]=o)&&i||i,Object.create(null))}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(t=>`${t.type}`).join(" | ")}>`}}FP=Symbol.toStringTag;nb[FP]=(e=>(e.mode=null,e.typeIds=null,e.children=null,e.typeIdToChildIndex=null,e.ArrayType=Int8Array,e[Symbol.toStringTag]="Union"))(nb.prototype);class rb extends ot{constructor(t){super($.FixedSizeBinary),this.byteWidth=t}toString(){return`FixedSizeBinary[${this.byteWidth}]`}}LP=Symbol.toStringTag;rb[LP]=(e=>(e.byteWidth=null,e.ArrayType=Uint8Array,e[Symbol.toStringTag]="FixedSizeBinary"))(rb.prototype);class ib extends ot{constructor(t,n){super($.FixedSizeList),this.listSize=t,this.children=[n]}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}}RP=Symbol.toStringTag;ib[RP]=(e=>(e.children=null,e.listSize=null,e[Symbol.toStringTag]="FixedSizeList"))(ib.prototype);class sb extends ot{constructor(t,n=!1){var r,i,s;if(super($.Map),this.children=[t],this.keysSorted=n,t&&(t.name="entries",!((r=t==null?void 0:t.type)===null||r===void 0)&&r.children)){const o=(i=t==null?void 0:t.type)===null||i===void 0?void 0:i.children[0];o&&(o.name="key");const a=(s=t==null?void 0:t.type)===null||s===void 0?void 0:s.children[1];a&&(a.name="value")}}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}CP=Symbol.toStringTag;sb[CP]=(e=>(e.children=null,e.keysSorted=null,e[Symbol.toStringTag]="Map_"))(sb.prototype);const k0t=(e=>()=>++e)(-1);class Cf extends ot{constructor(t,n,r,i){super($.Dictionary),this.indices=n,this.dictionary=t,this.isOrdered=i||!1,this.id=r==null?k0t():Mn(r)}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}UP=Symbol.toStringTag;Cf[UP]=(e=>(e.id=null,e.indices=null,e.isOrdered=null,e.dictionary=null,e[Symbol.toStringTag]="Dictionary"))(Cf.prototype);function oo(e){const t=e;switch(e.typeId){case $.Decimal:return e.bitWidth/32;case $.Timestamp:return 2;case $.Date:return 1+t.unit;case $.Interval:return 1+t.unit;case $.FixedSizeList:return t.listSize;case $.FixedSizeBinary:return t.byteWidth;default:return 1}}class Ft{visitMany(t,...n){return t.map((r,i)=>this.visit(r,...n.map(s=>s[i])))}visit(...t){return this.getVisitFn(t[0],!1).apply(this,t)}getVisitFn(t,n=!0){return D0t(this,t,n)}getVisitFnByTypeId(t,n=!0){return au(this,t,n)}visitNull(t,...n){return null}visitBool(t,...n){return null}visitInt(t,...n){return null}visitFloat(t,...n){return null}visitUtf8(t,...n){return null}visitLargeUtf8(t,...n){return null}visitBinary(t,...n){return null}visitLargeBinary(t,...n){return null}visitFixedSizeBinary(t,...n){return null}visitDate(t,...n){return null}visitTimestamp(t,...n){return null}visitTime(t,...n){return null}visitDecimal(t,...n){return null}visitList(t,...n){return null}visitStruct(t,...n){return null}visitUnion(t,...n){return null}visitDictionary(t,...n){return null}visitInterval(t,...n){return null}visitDuration(t,...n){return null}visitFixedSizeList(t,...n){return null}visitMap(t,...n){return null}}function D0t(e,t,n=!0){return typeof t=="number"?au(e,t,n):typeof t=="string"&&t in $?au(e,$[t],n):t&&t instanceof ot?au(e,WN(t),n):t!=null&&t.type&&t.type instanceof ot?au(e,WN(t.type),n):au(e,$.NONE,n)}function au(e,t,n=!0){let r=null;switch(t){case $.Null:r=e.visitNull;break;case $.Bool:r=e.visitBool;break;case $.Int:r=e.visitInt;break;case $.Int8:r=e.visitInt8||e.visitInt;break;case $.Int16:r=e.visitInt16||e.visitInt;break;case $.Int32:r=e.visitInt32||e.visitInt;break;case $.Int64:r=e.visitInt64||e.visitInt;break;case $.Uint8:r=e.visitUint8||e.visitInt;break;case $.Uint16:r=e.visitUint16||e.visitInt;break;case $.Uint32:r=e.visitUint32||e.visitInt;break;case $.Uint64:r=e.visitUint64||e.visitInt;break;case $.Float:r=e.visitFloat;break;case $.Float16:r=e.visitFloat16||e.visitFloat;break;case $.Float32:r=e.visitFloat32||e.visitFloat;break;case $.Float64:r=e.visitFloat64||e.visitFloat;break;case $.Utf8:r=e.visitUtf8;break;case $.LargeUtf8:r=e.visitLargeUtf8;break;case $.Binary:r=e.visitBinary;break;case $.LargeBinary:r=e.visitLargeBinary;break;case $.FixedSizeBinary:r=e.visitFixedSizeBinary;break;case $.Date:r=e.visitDate;break;case $.DateDay:r=e.visitDateDay||e.visitDate;break;case $.DateMillisecond:r=e.visitDateMillisecond||e.visitDate;break;case $.Timestamp:r=e.visitTimestamp;break;case $.TimestampSecond:r=e.visitTimestampSecond||e.visitTimestamp;break;case $.TimestampMillisecond:r=e.visitTimestampMillisecond||e.visitTimestamp;break;case $.TimestampMicrosecond:r=e.visitTimestampMicrosecond||e.visitTimestamp;break;case $.TimestampNanosecond:r=e.visitTimestampNanosecond||e.visitTimestamp;break;case $.Time:r=e.visitTime;break;case $.TimeSecond:r=e.visitTimeSecond||e.visitTime;break;case $.TimeMillisecond:r=e.visitTimeMillisecond||e.visitTime;break;case $.TimeMicrosecond:r=e.visitTimeMicrosecond||e.visitTime;break;case $.TimeNanosecond:r=e.visitTimeNanosecond||e.visitTime;break;case $.Decimal:r=e.visitDecimal;break;case $.List:r=e.visitList;break;case $.Struct:r=e.visitStruct;break;case $.Union:r=e.visitUnion;break;case $.DenseUnion:r=e.visitDenseUnion||e.visitUnion;break;case $.SparseUnion:r=e.visitSparseUnion||e.visitUnion;break;case $.Dictionary:r=e.visitDictionary;break;case $.Interval:r=e.visitInterval;break;case $.IntervalDayTime:r=e.visitIntervalDayTime||e.visitInterval;break;case $.IntervalYearMonth:r=e.visitIntervalYearMonth||e.visitInterval;break;case $.Duration:r=e.visitDuration;break;case $.DurationSecond:r=e.visitDurationSecond||e.visitDuration;break;case $.DurationMillisecond:r=e.visitDurationMillisecond||e.visitDuration;break;case $.DurationMicrosecond:r=e.visitDurationMicrosecond||e.visitDuration;break;case $.DurationNanosecond:r=e.visitDurationNanosecond||e.visitDuration;break;case $.FixedSizeList:r=e.visitFixedSizeList;break;case $.Map:r=e.visitMap;break}if(typeof r=="function")return r;if(!n)return()=>null;throw new Error(`Unrecognized type '${$[t]}'`)}function WN(e){switch(e.typeId){case $.Null:return $.Null;case $.Int:{const{bitWidth:t,isSigned:n}=e;switch(t){case 8:return n?$.Int8:$.Uint8;case 16:return n?$.Int16:$.Uint16;case 32:return n?$.Int32:$.Uint32;case 64:return n?$.Int64:$.Uint64}return $.Int}case $.Float:switch(e.precision){case Qe.HALF:return $.Float16;case Qe.SINGLE:return $.Float32;case Qe.DOUBLE:return $.Float64}return $.Float;case $.Binary:return $.Binary;case $.LargeBinary:return $.LargeBinary;case $.Utf8:return $.Utf8;case $.LargeUtf8:return $.LargeUtf8;case $.Bool:return $.Bool;case $.Decimal:return $.Decimal;case $.Time:switch(e.unit){case rt.SECOND:return $.TimeSecond;case rt.MILLISECOND:return $.TimeMillisecond;case rt.MICROSECOND:return $.TimeMicrosecond;case rt.NANOSECOND:return $.TimeNanosecond}return $.Time;case $.Timestamp:switch(e.unit){case rt.SECOND:return $.TimestampSecond;case rt.MILLISECOND:return $.TimestampMillisecond;case rt.MICROSECOND:return $.TimestampMicrosecond;case rt.NANOSECOND:return $.TimestampNanosecond}return $.Timestamp;case $.Date:switch(e.unit){case er.DAY:return $.DateDay;case er.MILLISECOND:return $.DateMillisecond}return $.Date;case $.Interval:switch(e.unit){case Un.DAY_TIME:return $.IntervalDayTime;case Un.YEAR_MONTH:return $.IntervalYearMonth}return $.Interval;case $.Duration:switch(e.unit){case rt.SECOND:return $.DurationSecond;case rt.MILLISECOND:return $.DurationMillisecond;case rt.MICROSECOND:return $.DurationMicrosecond;case rt.NANOSECOND:return $.DurationNanosecond}return $.Duration;case $.Map:return $.Map;case $.List:return $.List;case $.Struct:return $.Struct;case $.Union:switch(e.mode){case on.Dense:return $.DenseUnion;case on.Sparse:return $.SparseUnion}return $.Union;case $.FixedSizeBinary:return $.FixedSizeBinary;case $.FixedSizeList:return $.FixedSizeList;case $.Dictionary:return $.Dictionary}throw new Error(`Unrecognized type '${$[e.typeId]}'`)}Ft.prototype.visitInt8=null;Ft.prototype.visitInt16=null;Ft.prototype.visitInt32=null;Ft.prototype.visitInt64=null;Ft.prototype.visitUint8=null;Ft.prototype.visitUint16=null;Ft.prototype.visitUint32=null;Ft.prototype.visitUint64=null;Ft.prototype.visitFloat16=null;Ft.prototype.visitFloat32=null;Ft.prototype.visitFloat64=null;Ft.prototype.visitDateDay=null;Ft.prototype.visitDateMillisecond=null;Ft.prototype.visitTimestampSecond=null;Ft.prototype.visitTimestampMillisecond=null;Ft.prototype.visitTimestampMicrosecond=null;Ft.prototype.visitTimestampNanosecond=null;Ft.prototype.visitTimeSecond=null;Ft.prototype.visitTimeMillisecond=null;Ft.prototype.visitTimeMicrosecond=null;Ft.prototype.visitTimeNanosecond=null;Ft.prototype.visitDenseUnion=null;Ft.prototype.visitSparseUnion=null;Ft.prototype.visitIntervalDayTime=null;Ft.prototype.visitIntervalYearMonth=null;Ft.prototype.visitDuration=null;Ft.prototype.visitDurationSecond=null;Ft.prototype.visitDurationMillisecond=null;Ft.prototype.visitDurationMicrosecond=null;Ft.prototype.visitDurationNanosecond=null;const PP=new Float64Array(1),zc=new Uint32Array(PP.buffer);function zP(e){const t=(e&31744)>>10,n=(e&1023)/1024,r=Math.pow(-1,(e&32768)>>15);switch(t){case 31:return r*(n?Number.NaN:1/0);case 0:return r*(n?6103515625e-14*n:0)}return r*Math.pow(2,t-15)*(1+n)}function O0t(e){if(e!==e)return 32256;PP[0]=e;const t=(zc[1]&2147483648)>>16&65535;let n=zc[1]&2146435072,r=0;return n>=1089470464?zc[0]>0?n=31744:(n=(n&2080374784)>>16,r=(zc[1]&1048575)>>10):n<=1056964608?(r=1048576+(zc[1]&1048575),r=1048576+(r<<(n>>20)-998)>>21,n=0):(n=n-1056964608>>10,r=(zc[1]&1048575)+512>>10),t|n|r&65535}class mt extends Ft{}function wt(e){return(t,n,r)=>{if(t.setValid(n,r!=null))return e(t,n,r)}}const B0t=(e,t,n)=>{e[t]=Math.trunc(n/864e5)},gE=(e,t,n)=>{e[t]=Math.trunc(n%4294967296),e[t+1]=Math.trunc(n/4294967296)},F0t=(e,t,n)=>{e[t]=Math.trunc(n*1e3%4294967296),e[t+1]=Math.trunc(n*1e3/4294967296)},L0t=(e,t,n)=>{e[t]=Math.trunc(n*1e6%4294967296),e[t+1]=Math.trunc(n*1e6/4294967296)},jP=(e,t,n,r)=>{if(n+1<t.length){const i=Mn(t[n]),s=Mn(t[n+1]);e.set(r.subarray(0,s-i),i)}},R0t=({offset:e,values:t},n,r)=>{const i=e+n;r?t[i>>3]|=1<<i%8:t[i>>3]&=~(1<<i%8)},Yo=({values:e},t,n)=>{e[t]=n},bE=({values:e},t,n)=>{e[t]=n},VP=({values:e},t,n)=>{e[t]=O0t(n)},C0t=(e,t,n)=>{switch(e.type.precision){case Qe.HALF:return VP(e,t,n);case Qe.SINGLE:case Qe.DOUBLE:return bE(e,t,n)}},YP=({values:e},t,n)=>{B0t(e,t,n.valueOf())},qP=({values:e},t,n)=>{gE(e,t*2,n.valueOf())},U0t=({stride:e,values:t},n,r)=>{t.set(r.subarray(0,e),e*n)},WP=({values:e,valueOffsets:t},n,r)=>jP(e,t,n,r),HP=({values:e,valueOffsets:t},n,r)=>jP(e,t,n,hE(r)),P0t=(e,t,n)=>{e.type.unit===er.DAY?YP(e,t,n):qP(e,t,n)},GP=({values:e},t,n)=>gE(e,t*2,n/1e3),XP=({values:e},t,n)=>gE(e,t*2,n),QP=({values:e},t,n)=>F0t(e,t*2,n),KP=({values:e},t,n)=>L0t(e,t*2,n),z0t=(e,t,n)=>{switch(e.type.unit){case rt.SECOND:return GP(e,t,n);case rt.MILLISECOND:return XP(e,t,n);case rt.MICROSECOND:return QP(e,t,n);case rt.NANOSECOND:return KP(e,t,n)}},ZP=({values:e},t,n)=>{e[t]=n},JP=({values:e},t,n)=>{e[t]=n},t9=({values:e},t,n)=>{e[t]=n},e9=({values:e},t,n)=>{e[t]=n},j0t=(e,t,n)=>{switch(e.type.unit){case rt.SECOND:return ZP(e,t,n);case rt.MILLISECOND:return JP(e,t,n);case rt.MICROSECOND:return t9(e,t,n);case rt.NANOSECOND:return e9(e,t,n)}},V0t=({values:e,stride:t},n,r)=>{e.set(r.subarray(0,t),t*n)},Y0t=(e,t,n)=>{const r=e.children[0],i=e.valueOffsets,s=wi.getVisitFn(r);if(Array.isArray(n))for(let o=-1,a=i[t],l=i[t+1];a<l;)s(r,a++,n[++o]);else for(let o=-1,a=i[t],l=i[t+1];a<l;)s(r,a++,n.get(++o))},q0t=(e,t,n)=>{const r=e.children[0],{valueOffsets:i}=e,s=wi.getVisitFn(r);let{[t]:o,[t+1]:a}=i;const l=n instanceof Map?n.entries():Object.entries(n);for(const c of l)if(s(r,o,c),++o>=a)break},W0t=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[s]),H0t=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(s)),G0t=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(i.name)),X0t=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[i.name]),Q0t=(e,t,n)=>{const r=e.type.children.map(s=>wi.getVisitFn(s.type)),i=n instanceof Map?G0t(t,n):n instanceof se?H0t(t,n):Array.isArray(n)?W0t(t,n):X0t(t,n);e.type.children.forEach((s,o)=>i(r[o],e.children[o],s,o))},K0t=(e,t,n)=>{e.type.mode===on.Dense?n9(e,t,n):r9(e,t,n)},n9=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];wi.visit(i,e.valueOffsets[t],n)},r9=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];wi.visit(i,t,n)},Z0t=(e,t,n)=>{var r;(r=e.dictionary)===null||r===void 0||r.set(e.values[t],n)},J0t=(e,t,n)=>{e.type.unit===Un.DAY_TIME?i9(e,t,n):s9(e,t,n)},i9=({values:e},t,n)=>{e.set(n.subarray(0,2),2*t)},s9=({values:e},t,n)=>{e[t]=n[0]*12+n[1]%12},o9=({values:e},t,n)=>{e[t]=n},a9=({values:e},t,n)=>{e[t]=n},l9=({values:e},t,n)=>{e[t]=n},c9=({values:e},t,n)=>{e[t]=n},tmt=(e,t,n)=>{switch(e.type.unit){case rt.SECOND:return o9(e,t,n);case rt.MILLISECOND:return a9(e,t,n);case rt.MICROSECOND:return l9(e,t,n);case rt.NANOSECOND:return c9(e,t,n)}},emt=(e,t,n)=>{const{stride:r}=e,i=e.children[0],s=wi.getVisitFn(i);if(Array.isArray(n))for(let o=-1,a=t*r;++o<r;)s(i,a+o,n[o]);else for(let o=-1,a=t*r;++o<r;)s(i,a+o,n.get(o))};mt.prototype.visitBool=wt(R0t);mt.prototype.visitInt=wt(Yo);mt.prototype.visitInt8=wt(Yo);mt.prototype.visitInt16=wt(Yo);mt.prototype.visitInt32=wt(Yo);mt.prototype.visitInt64=wt(Yo);mt.prototype.visitUint8=wt(Yo);mt.prototype.visitUint16=wt(Yo);mt.prototype.visitUint32=wt(Yo);mt.prototype.visitUint64=wt(Yo);mt.prototype.visitFloat=wt(C0t);mt.prototype.visitFloat16=wt(VP);mt.prototype.visitFloat32=wt(bE);mt.prototype.visitFloat64=wt(bE);mt.prototype.visitUtf8=wt(HP);mt.prototype.visitLargeUtf8=wt(HP);mt.prototype.visitBinary=wt(WP);mt.prototype.visitLargeBinary=wt(WP);mt.prototype.visitFixedSizeBinary=wt(U0t);mt.prototype.visitDate=wt(P0t);mt.prototype.visitDateDay=wt(YP);mt.prototype.visitDateMillisecond=wt(qP);mt.prototype.visitTimestamp=wt(z0t);mt.prototype.visitTimestampSecond=wt(GP);mt.prototype.visitTimestampMillisecond=wt(XP);mt.prototype.visitTimestampMicrosecond=wt(QP);mt.prototype.visitTimestampNanosecond=wt(KP);mt.prototype.visitTime=wt(j0t);mt.prototype.visitTimeSecond=wt(ZP);mt.prototype.visitTimeMillisecond=wt(JP);mt.prototype.visitTimeMicrosecond=wt(t9);mt.prototype.visitTimeNanosecond=wt(e9);mt.prototype.visitDecimal=wt(V0t);mt.prototype.visitList=wt(Y0t);mt.prototype.visitStruct=wt(Q0t);mt.prototype.visitUnion=wt(K0t);mt.prototype.visitDenseUnion=wt(n9);mt.prototype.visitSparseUnion=wt(r9);mt.prototype.visitDictionary=wt(Z0t);mt.prototype.visitInterval=wt(J0t);mt.prototype.visitIntervalDayTime=wt(i9);mt.prototype.visitIntervalYearMonth=wt(s9);mt.prototype.visitDuration=wt(tmt);mt.prototype.visitDurationSecond=wt(o9);mt.prototype.visitDurationMillisecond=wt(a9);mt.prototype.visitDurationMicrosecond=wt(l9);mt.prototype.visitDurationNanosecond=wt(c9);mt.prototype.visitFixedSizeList=wt(emt);mt.prototype.visitMap=wt(q0t);const wi=new mt,Ni=Symbol.for("parent"),tf=Symbol.for("rowIndex");class vE{constructor(t,n){return this[Ni]=t,this[tf]=n,new Proxy(this,new rmt)}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[tf],n=this[Ni],r=n.type.children,i={};for(let s=-1,o=r.length;++s<o;)i[r[s].name]=Tr.visit(n.children[s],t);return i}toString(){return`{${[...this].map(([t,n])=>`${$p(t)}: ${$p(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new nmt(this[Ni],this[tf])}}class nmt{constructor(t,n){this.childIndex=0,this.children=t.children,this.rowIndex=n,this.childFields=t.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const t=this.childIndex;return t<this.numChildren?(this.childIndex=t+1,{done:!1,value:[this.childFields[t].name,Tr.visit(this.children[t],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties(vE.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[Ni]:{writable:!0,enumerable:!1,configurable:!1,value:null},[tf]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class rmt{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[Ni].type.children.map(n=>n.name)}has(t,n){return t[Ni].type.children.findIndex(r=>r.name===n)!==-1}getOwnPropertyDescriptor(t,n){if(t[Ni].type.children.findIndex(r=>r.name===n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[Ni].type.children.findIndex(i=>i.name===n);if(r!==-1){const i=Tr.visit(t[Ni].children[r],t[tf]);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[Ni].type.children.findIndex(s=>s.name===n);return i!==-1?(wi.visit(t[Ni].children[i],t[tf],r),Reflect.set(t,n,r)):Reflect.has(t,n)||typeof n=="symbol"?Reflect.set(t,n,r):!1}}class ut extends Ft{}function gt(e){return(t,n)=>t.getValid(n)?e(t,n):null}const imt=(e,t)=>864e5*e[t],wE=(e,t)=>4294967296*e[t+1]+(e[t]>>>0),smt=(e,t)=>4294967296*(e[t+1]/1e3)+(e[t]>>>0)/1e3,omt=(e,t)=>4294967296*(e[t+1]/1e6)+(e[t]>>>0)/1e6,u9=e=>new Date(e),amt=(e,t)=>u9(imt(e,t)),lmt=(e,t)=>u9(wE(e,t)),cmt=(e,t)=>null,f9=(e,t,n)=>{if(n+1>=t.length)return null;const r=Mn(t[n]),i=Mn(t[n+1]);return e.subarray(r,i)},umt=({offset:e,values:t},n)=>{const r=e+n;return(t[r>>3]&1<<r%8)!==0},d9=({values:e},t)=>amt(e,t),h9=({values:e},t)=>lmt(e,t*2),cl=({stride:e,values:t},n)=>t[e*n],fmt=({stride:e,values:t},n)=>zP(t[e*n]),p9=({values:e},t)=>e[t],dmt=({stride:e,values:t},n)=>t.subarray(e*n,e*(n+1)),y9=({values:e,valueOffsets:t},n)=>f9(e,t,n),m9=({values:e,valueOffsets:t},n)=>{const r=f9(e,t,n);return r!==null?xx(r):null},hmt=({values:e},t)=>e[t],pmt=({type:e,values:t},n)=>e.precision!==Qe.HALF?t[n]:zP(t[n]),ymt=(e,t)=>e.type.unit===er.DAY?d9(e,t):h9(e,t),g9=({values:e},t)=>1e3*wE(e,t*2),b9=({values:e},t)=>wE(e,t*2),v9=({values:e},t)=>smt(e,t*2),w9=({values:e},t)=>omt(e,t*2),mmt=(e,t)=>{switch(e.type.unit){case rt.SECOND:return g9(e,t);case rt.MILLISECOND:return b9(e,t);case rt.MICROSECOND:return v9(e,t);case rt.NANOSECOND:return w9(e,t)}},_9=({values:e},t)=>e[t],S9=({values:e},t)=>e[t],x9=({values:e},t)=>e[t],I9=({values:e},t)=>e[t],gmt=(e,t)=>{switch(e.type.unit){case rt.SECOND:return _9(e,t);case rt.MILLISECOND:return S9(e,t);case rt.MICROSECOND:return x9(e,t);case rt.NANOSECOND:return I9(e,t)}},bmt=({values:e,stride:t},n)=>mE.decimal(e.subarray(t*n,t*(n+1))),vmt=(e,t)=>{const{valueOffsets:n,stride:r,children:i}=e,{[t*r]:s,[t*r+1]:o}=n,l=i[0].slice(s,o-s);return new se([l])},wmt=(e,t)=>{const{valueOffsets:n,children:r}=e,{[t]:i,[t+1]:s}=n,o=r[0];return new _E(o.slice(i,s-i))},_mt=(e,t)=>new vE(e,t),Smt=(e,t)=>e.type.mode===on.Dense?T9(e,t):E9(e,t),T9=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return Tr.visit(r,e.valueOffsets[t])},E9=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return Tr.visit(r,t)},xmt=(e,t)=>{var n;return(n=e.dictionary)===null||n===void 0?void 0:n.get(e.values[t])},Imt=(e,t)=>e.type.unit===Un.DAY_TIME?A9(e,t):M9(e,t),A9=({values:e},t)=>e.subarray(2*t,2*(t+1)),M9=({values:e},t)=>{const n=e[t],r=new Int32Array(2);return r[0]=Math.trunc(n/12),r[1]=Math.trunc(n%12),r},$9=({values:e},t)=>e[t],N9=({values:e},t)=>e[t],k9=({values:e},t)=>e[t],D9=({values:e},t)=>e[t],Tmt=(e,t)=>{switch(e.type.unit){case rt.SECOND:return $9(e,t);case rt.MILLISECOND:return N9(e,t);case rt.MICROSECOND:return k9(e,t);case rt.NANOSECOND:return D9(e,t)}},Emt=(e,t)=>{const{stride:n,children:r}=e,s=r[0].slice(t*n,n);return new se([s])};ut.prototype.visitNull=gt(cmt);ut.prototype.visitBool=gt(umt);ut.prototype.visitInt=gt(hmt);ut.prototype.visitInt8=gt(cl);ut.prototype.visitInt16=gt(cl);ut.prototype.visitInt32=gt(cl);ut.prototype.visitInt64=gt(p9);ut.prototype.visitUint8=gt(cl);ut.prototype.visitUint16=gt(cl);ut.prototype.visitUint32=gt(cl);ut.prototype.visitUint64=gt(p9);ut.prototype.visitFloat=gt(pmt);ut.prototype.visitFloat16=gt(fmt);ut.prototype.visitFloat32=gt(cl);ut.prototype.visitFloat64=gt(cl);ut.prototype.visitUtf8=gt(m9);ut.prototype.visitLargeUtf8=gt(m9);ut.prototype.visitBinary=gt(y9);ut.prototype.visitLargeBinary=gt(y9);ut.prototype.visitFixedSizeBinary=gt(dmt);ut.prototype.visitDate=gt(ymt);ut.prototype.visitDateDay=gt(d9);ut.prototype.visitDateMillisecond=gt(h9);ut.prototype.visitTimestamp=gt(mmt);ut.prototype.visitTimestampSecond=gt(g9);ut.prototype.visitTimestampMillisecond=gt(b9);ut.prototype.visitTimestampMicrosecond=gt(v9);ut.prototype.visitTimestampNanosecond=gt(w9);ut.prototype.visitTime=gt(gmt);ut.prototype.visitTimeSecond=gt(_9);ut.prototype.visitTimeMillisecond=gt(S9);ut.prototype.visitTimeMicrosecond=gt(x9);ut.prototype.visitTimeNanosecond=gt(I9);ut.prototype.visitDecimal=gt(bmt);ut.prototype.visitList=gt(vmt);ut.prototype.visitStruct=gt(_mt);ut.prototype.visitUnion=gt(Smt);ut.prototype.visitDenseUnion=gt(T9);ut.prototype.visitSparseUnion=gt(E9);ut.prototype.visitDictionary=gt(xmt);ut.prototype.visitInterval=gt(Imt);ut.prototype.visitIntervalDayTime=gt(A9);ut.prototype.visitIntervalYearMonth=gt(M9);ut.prototype.visitDuration=gt(Tmt);ut.prototype.visitDurationSecond=gt($9);ut.prototype.visitDurationMillisecond=gt(N9);ut.prototype.visitDurationMicrosecond=gt(k9);ut.prototype.visitDurationNanosecond=gt(D9);ut.prototype.visitFixedSizeList=gt(Emt);ut.prototype.visitMap=gt(wmt);const Tr=new ut,_s=Symbol.for("keys"),ef=Symbol.for("vals");class _E{constructor(t){return this[_s]=new se([t.children[0]]).memoize(),this[ef]=t.children[1],new Proxy(this,new Mmt)}[Symbol.iterator](){return new Amt(this[_s],this[ef])}get size(){return this[_s].length}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[_s],n=this[ef],r={};for(let i=-1,s=t.length;++i<s;)r[t.get(i)]=Tr.visit(n,i);return r}toString(){return`{${[...this].map(([t,n])=>`${$p(t)}: ${$p(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}class Amt{constructor(t,n){this.keys=t,this.vals=n,this.keyIndex=0,this.numKeys=t.length}[Symbol.iterator](){return this}next(){const t=this.keyIndex;return t===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(t),Tr.visit(this.vals,t)]})}}class Mmt{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[_s].toArray().map(String)}has(t,n){return t[_s].includes(n)}getOwnPropertyDescriptor(t,n){if(t[_s].indexOf(n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[_s].indexOf(n);if(r!==-1){const i=Tr.visit(Reflect.get(t,ef),r);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[_s].indexOf(n);return i!==-1?(wi.visit(Reflect.get(t,ef),i,r),Reflect.set(t,n,r)):Reflect.has(t,n)?Reflect.set(t,n,r):!1}}Object.defineProperties(_E.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[_s]:{writable:!0,enumerable:!1,configurable:!1,value:null},[ef]:{writable:!0,enumerable:!1,configurable:!1,value:null}});let HN;function O9(e,t,n,r){const{length:i=0}=e;let s=typeof t!="number"?0:t,o=typeof n!="number"?i:n;return s<0&&(s=(s%i+i)%i),o<0&&(o=(o%i+i)%i),o<s&&(HN=s,s=o,o=HN),o>i&&(o=i),r?r(e,s,o):[s,o]}const GN=e=>e!==e;function dd(e){if(typeof e!=="object"||e===null)return GN(e)?GN:n=>n===e;if(e instanceof Date){const n=e.valueOf();return r=>r instanceof Date?r.valueOf()===n:!1}return ArrayBuffer.isView(e)?n=>n?S0t(e,n):!1:e instanceof Map?Nmt(e):Array.isArray(e)?$mt(e):e instanceof se?kmt(e):Dmt(e,!0)}function $mt(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=dd(e[n]);return qv(t)}function Nmt(e){let t=-1;const n=[];for(const r of e.values())n[++t]=dd(r);return qv(n)}function kmt(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=dd(e.get(n));return qv(t)}function Dmt(e,t=!1){const n=Object.keys(e);if(!t&&n.length===0)return()=>!1;const r=[];for(let i=-1,s=n.length;++i<s;)r[i]=dd(e[n[i]]);return qv(r,n)}function qv(e,t){return n=>{if(!n||typeof n!="object")return!1;switch(n.constructor){case Array:return Omt(e,n);case Map:return XN(e,n,n.keys());case _E:case vE:case Object:case void 0:return XN(e,n,t||Object.keys(n))}return n instanceof se?Bmt(e,n):!1}}function Omt(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t[r]))return!1;return!0}function Bmt(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t.get(r)))return!1;return!0}function XN(e,t,n){const r=n[Symbol.iterator](),i=t instanceof Map?t.keys():Object.keys(t)[Symbol.iterator](),s=t instanceof Map?t.values():Object.values(t)[Symbol.iterator]();let o=0;const a=e.length;let l=s.next(),c=r.next(),u=i.next();for(;o<a&&!c.done&&!u.done&&!l.done&&!(c.value!==u.value||!e[o](l.value));++o,c=r.next(),u=i.next(),l=s.next());return o===a&&c.done&&u.done&&l.done?!0:(r.return&&r.return(),i.return&&i.return(),s.return&&s.return(),!1)}function B9(e,t,n,r){return(n&1<<r)!==0}function Fmt(e,t,n,r){return(n&1<<r)>>r}function ob(e,t,n){const r=n.byteLength+7&-8;if(e>0||n.byteLength<r){const i=new Uint8Array(r);return i.set(e%8===0?n.subarray(e>>3):ab(new SE(n,e,t,null,B9)).subarray(0,r)),i}return n}function ab(e){const t=[];let n=0,r=0,i=0;for(const o of e)o&&(i|=1<<r),++r===8&&(t[n++]=i,i=r=0);(n===0||r>0)&&(t[n++]=i);const s=new Uint8Array(t.length+7&-8);return s.set(t),s}class SE{constructor(t,n,r,i,s){this.bytes=t,this.length=r,this.context=i,this.get=s,this.bit=n%8,this.byteIndex=n>>3,this.byte=t[this.byteIndex++],this.index=0}next(){return this.index<this.length?(this.bit===8&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}function Mx(e,t,n){if(n-t<=0)return 0;if(n-t<8){let s=0;for(const o of new SE(e,t,n-t,e,Fmt))s+=o;return s}const r=n>>3<<3,i=t+(t%8===0?0:8-t%8);return Mx(e,t,i)+Mx(e,r,n)+Lmt(e,i>>3,r-i>>3)}function Lmt(e,t,n){let r=0,i=Math.trunc(t);const s=new DataView(e.buffer,e.byteOffset,e.byteLength),o=n===void 0?e.byteLength:i+n;for(;o-i>=4;)r+=D_(s.getUint32(i)),i+=4;for(;o-i>=2;)r+=D_(s.getUint16(i)),i+=2;for(;o-i>=1;)r+=D_(s.getUint8(i)),i+=1;return r}function D_(e){let t=Math.trunc(e);return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),(t+(t>>>4)&252645135)*16843009>>>24}const Rmt=-1;class ce{get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get nullable(){if(this._nullCount!==0){const{type:t}=this;return ot.isSparseUnion(t)?this.children.some(n=>n.nullable):ot.isDenseUnion(t)?this.children.some(n=>n.nullable):this.nullBitmap&&this.nullBitmap.byteLength>0}return!0}get byteLength(){let t=0;const{valueOffsets:n,values:r,nullBitmap:i,typeIds:s}=this;return n&&(t+=n.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),s&&(t+=s.byteLength),this.children.reduce((o,a)=>o+a.byteLength,t)}get nullCount(){if(ot.isUnion(this.type))return this.children.reduce((r,i)=>r+i.nullCount,0);let t=this._nullCount,n;return t<=Rmt&&(n=this.nullBitmap)&&(this._nullCount=t=this.length-Mx(n,this.offset,this.offset+this.length)),t}constructor(t,n,r,i,s,o=[],a){this.type=t,this.children=o,this.dictionary=a,this.offset=Math.floor(Math.max(n||0,0)),this.length=Math.floor(Math.max(r||0,0)),this._nullCount=Math.floor(Math.max(i||0,-1));let l;s instanceof ce?(this.stride=s.stride,this.values=s.values,this.typeIds=s.typeIds,this.nullBitmap=s.nullBitmap,this.valueOffsets=s.valueOffsets):(this.stride=oo(t),s&&((l=s[0])&&(this.valueOffsets=l),(l=s[1])&&(this.values=l),(l=s[2])&&(this.nullBitmap=l),(l=s[3])&&(this.typeIds=l)))}getValid(t){const{type:n}=this;if(ot.isUnion(n)){const r=n,i=this.children[r.typeIdToChildIndex[this.typeIds[t]]],s=r.mode===on.Dense?this.valueOffsets[t]:t;return i.getValid(s)}if(this.nullable&&this.nullCount>0){const r=this.offset+t;return(this.nullBitmap[r>>3]&1<<r%8)!==0}return!0}setValid(t,n){let r;const{type:i}=this;if(ot.isUnion(i)){const s=i,o=this.children[s.typeIdToChildIndex[this.typeIds[t]]],a=s.mode===on.Dense?this.valueOffsets[t]:t;r=o.getValid(a),o.setValid(a,n)}else{let{nullBitmap:s}=this;const{offset:o,length:a}=this,l=o+t,c=1<<l%8,u=l>>3;(!s||s.byteLength<=u)&&(s=new Uint8Array((o+a+63&-64)>>3).fill(255),this.nullCount>0&&s.set(ob(o,a,this.nullBitmap),0),Object.assign(this,{nullBitmap:s,_nullCount:-1}));const f=s[u];r=(f&c)!==0,n?s[u]=f|c:s[u]=f&~c}return r!==!!n&&(this._nullCount=this.nullCount+(n?-1:1)),n}clone(t=this.type,n=this.offset,r=this.length,i=this._nullCount,s=this,o=this.children){return new ce(t,n,r,i,s,o,this.dictionary)}slice(t,n){const{stride:r,typeId:i,children:s}=this,o=+(this._nullCount===0)-1,a=i===16?r:1,l=this._sliceBuffers(t,n,r,i);return this.clone(this.type,this.offset+t,n,o,l,s.length===0||this.valueOffsets?s:this._sliceChildren(s,a*t,a*n))}_changeLengthAndBackfillNullBitmap(t){if(this.typeId===$.Null)return this.clone(this.type,0,t,0);const{length:n,nullCount:r}=this,i=new Uint8Array((t+63&-64)>>3).fill(255,0,n>>3);i[n>>3]=(1<<n-(n&-8))-1,r>0&&i.set(ob(this.offset,n,this.nullBitmap),0);const s=this.buffers;return s[so.VALIDITY]=i,this.clone(this.type,0,t,r+(t-n),s)}_sliceBuffers(t,n,r,i){let s;const{buffers:o}=this;return(s=o[so.TYPE])&&(o[so.TYPE]=s.subarray(t,t+n)),(s=o[so.OFFSET])&&(o[so.OFFSET]=s.subarray(t,t+n+1))||(s=o[so.DATA])&&(o[so.DATA]=i===6?s:s.subarray(r*t,r*(t+n))),o}_sliceChildren(t,n,r){return t.map(i=>i.slice(n,r))}}ce.prototype.children=Object.freeze([]);class Bh extends Ft{visit(t){return this.getVisitFn(t.type).call(this,t)}visitNull(t){const{["type"]:n,["offset"]:r=0,["length"]:i=0}=t;return new ce(n,r,i,i)}visitBool(t){const{["type"]:n,["offset"]:r=0}=t,i=jt(t.nullBitmap),s=fe(n.ArrayType,t.data),{["length"]:o=s.length>>3,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new ce(n,r,o,a,[void 0,s,i])}visitInt(t){const{["type"]:n,["offset"]:r=0}=t,i=jt(t.nullBitmap),s=fe(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new ce(n,r,o,a,[void 0,s,i])}visitFloat(t){const{["type"]:n,["offset"]:r=0}=t,i=jt(t.nullBitmap),s=fe(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new ce(n,r,o,a,[void 0,s,i])}visitUtf8(t){const{["type"]:n,["offset"]:r=0}=t,i=jt(t.data),s=jt(t.nullBitmap),o=Ld(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:l=t.nullBitmap?-1:0}=t;return new ce(n,r,a,l,[o,i,s])}visitLargeUtf8(t){const{["type"]:n,["offset"]:r=0}=t,i=jt(t.data),s=jt(t.nullBitmap),o=CN(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:l=t.nullBitmap?-1:0}=t;return new ce(n,r,a,l,[o,i,s])}visitBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=jt(t.data),s=jt(t.nullBitmap),o=Ld(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:l=t.nullBitmap?-1:0}=t;return new ce(n,r,a,l,[o,i,s])}visitLargeBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=jt(t.data),s=jt(t.nullBitmap),o=CN(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:l=t.nullBitmap?-1:0}=t;return new ce(n,r,a,l,[o,i,s])}visitFixedSizeBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=jt(t.nullBitmap),s=fe(n.ArrayType,t.data),{["length"]:o=s.length/oo(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new ce(n,r,o,a,[void 0,s,i])}visitDate(t){const{["type"]:n,["offset"]:r=0}=t,i=jt(t.nullBitmap),s=fe(n.ArrayType,t.data),{["length"]:o=s.length/oo(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new ce(n,r,o,a,[void 0,s,i])}visitTimestamp(t){const{["type"]:n,["offset"]:r=0}=t,i=jt(t.nullBitmap),s=fe(n.ArrayType,t.data),{["length"]:o=s.length/oo(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new ce(n,r,o,a,[void 0,s,i])}visitTime(t){const{["type"]:n,["offset"]:r=0}=t,i=jt(t.nullBitmap),s=fe(n.ArrayType,t.data),{["length"]:o=s.length/oo(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new ce(n,r,o,a,[void 0,s,i])}visitDecimal(t){const{["type"]:n,["offset"]:r=0}=t,i=jt(t.nullBitmap),s=fe(n.ArrayType,t.data),{["length"]:o=s.length/oo(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new ce(n,r,o,a,[void 0,s,i])}visitList(t){const{["type"]:n,["offset"]:r=0,["child"]:i}=t,s=jt(t.nullBitmap),o=Ld(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:l=t.nullBitmap?-1:0}=t;return new ce(n,r,a,l,[o,void 0,s],[i])}visitStruct(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=jt(t.nullBitmap),{length:o=i.reduce((l,{length:c})=>Math.max(l,c),0),nullCount:a=t.nullBitmap?-1:0}=t;return new ce(n,r,o,a,[void 0,void 0,s],i)}visitUnion(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=fe(n.ArrayType,t.typeIds),{["length"]:o=s.length,["nullCount"]:a=-1}=t;if(ot.isSparseUnion(n))return new ce(n,r,o,a,[void 0,void 0,void 0,s],i);const l=Ld(t.valueOffsets);return new ce(n,r,o,a,[l,void 0,void 0,s],i)}visitDictionary(t){const{["type"]:n,["offset"]:r=0}=t,i=jt(t.nullBitmap),s=fe(n.indices.ArrayType,t.data),{["dictionary"]:o=new se([new Bh().visit({type:n.dictionary})])}=t,{["length"]:a=s.length,["nullCount"]:l=t.nullBitmap?-1:0}=t;return new ce(n,r,a,l,[void 0,s,i],[],o)}visitInterval(t){const{["type"]:n,["offset"]:r=0}=t,i=jt(t.nullBitmap),s=fe(n.ArrayType,t.data),{["length"]:o=s.length/oo(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new ce(n,r,o,a,[void 0,s,i])}visitDuration(t){const{["type"]:n,["offset"]:r=0}=t,i=jt(t.nullBitmap),s=fe(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new ce(n,r,o,a,[void 0,s,i])}visitFixedSizeList(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new Bh().visit({type:n.valueType})}=t,s=jt(t.nullBitmap),{["length"]:o=i.length/oo(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new ce(n,r,o,a,[void 0,void 0,s],[i])}visitMap(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new Bh().visit({type:n.childType})}=t,s=jt(t.nullBitmap),o=Ld(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:l=t.nullBitmap?-1:0}=t;return new ce(n,r,a,l,[o,void 0,s],[i])}}const Cmt=new Bh;function Lt(e){return Cmt.visit(e)}class QN{constructor(t=0,n){this.numChunks=t,this.getChunkIterator=n,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const t=this.chunkIterator.next();if(!t.done)return t;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}function Umt(e){return e.some(t=>t.nullable)}function F9(e){return e.reduce((t,n)=>t+n.nullCount,0)}function L9(e){return e.reduce((t,n,r)=>(t[r+1]=t[r]+n.length,t),new Uint32Array(e.length+1))}function R9(e,t,n,r){const i=[];for(let s=-1,o=e.length;++s<o;){const a=e[s],l=t[s],{length:c}=a;if(l>=r)break;if(n>=l+c)continue;if(l>=n&&l+c<=r){i.push(a);continue}const u=Math.max(0,n-l),f=Math.min(r-l,c);i.push(a.slice(u,f-u))}return i.length===0&&i.push(e[0].slice(0,0)),i}function xE(e,t,n,r){let i=0,s=0,o=t.length-1;do{if(i>=o-1)return n<t[o]?r(e,i,n-t[i]):null;s=i+Math.trunc((o-i)*.5),n<t[s]?o=s:i=s}while(i<o)}function IE(e,t){return e.getValid(t)}function lb(e){function t(n,r,i){return e(n[r],i)}return function(n){const r=this.data;return xE(r,this._offsets,n,t)}}function C9(e){let t;function n(r,i,s){return e(r[i],s,t)}return function(r,i){const s=this.data;t=i;const o=xE(s,this._offsets,r,n);return t=void 0,o}}function U9(e){let t;function n(r,i,s){let o=s,a=0,l=0;for(let c=i-1,u=r.length;++c<u;){const f=r[c];if(~(a=e(f,t,o)))return l+a;o=0,l+=f.length}return-1}return function(r,i){t=r;const s=this.data,o=typeof i!="number"?n(s,0,0):xE(s,this._offsets,i,n);return t=void 0,o}}class ft extends Ft{}function Pmt(e,t){return t===null&&e.length>0?0:-1}function zmt(e,t){const{nullBitmap:n}=e;if(!n||e.nullCount<=0)return-1;let r=0;for(const i of new SE(n,e.offset+(t||0),e.length,n,B9)){if(!i)return r;++r}return-1}function St(e,t,n){if(t===void 0)return-1;if(t===null)switch(e.typeId){case $.Union:break;case $.Dictionary:break;default:return zmt(e,n)}const r=Tr.getVisitFn(e),i=dd(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}function P9(e,t,n){const r=Tr.getVisitFn(e),i=dd(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}ft.prototype.visitNull=Pmt;ft.prototype.visitBool=St;ft.prototype.visitInt=St;ft.prototype.visitInt8=St;ft.prototype.visitInt16=St;ft.prototype.visitInt32=St;ft.prototype.visitInt64=St;ft.prototype.visitUint8=St;ft.prototype.visitUint16=St;ft.prototype.visitUint32=St;ft.prototype.visitUint64=St;ft.prototype.visitFloat=St;ft.prototype.visitFloat16=St;ft.prototype.visitFloat32=St;ft.prototype.visitFloat64=St;ft.prototype.visitUtf8=St;ft.prototype.visitLargeUtf8=St;ft.prototype.visitBinary=St;ft.prototype.visitLargeBinary=St;ft.prototype.visitFixedSizeBinary=St;ft.prototype.visitDate=St;ft.prototype.visitDateDay=St;ft.prototype.visitDateMillisecond=St;ft.prototype.visitTimestamp=St;ft.prototype.visitTimestampSecond=St;ft.prototype.visitTimestampMillisecond=St;ft.prototype.visitTimestampMicrosecond=St;ft.prototype.visitTimestampNanosecond=St;ft.prototype.visitTime=St;ft.prototype.visitTimeSecond=St;ft.prototype.visitTimeMillisecond=St;ft.prototype.visitTimeMicrosecond=St;ft.prototype.visitTimeNanosecond=St;ft.prototype.visitDecimal=St;ft.prototype.visitList=St;ft.prototype.visitStruct=St;ft.prototype.visitUnion=St;ft.prototype.visitDenseUnion=P9;ft.prototype.visitSparseUnion=P9;ft.prototype.visitDictionary=St;ft.prototype.visitInterval=St;ft.prototype.visitIntervalDayTime=St;ft.prototype.visitIntervalYearMonth=St;ft.prototype.visitDuration=St;ft.prototype.visitDurationSecond=St;ft.prototype.visitDurationMillisecond=St;ft.prototype.visitDurationMicrosecond=St;ft.prototype.visitDurationNanosecond=St;ft.prototype.visitFixedSizeList=St;ft.prototype.visitMap=St;const cb=new ft;class dt extends Ft{}function bt(e){const{type:t}=e;if(e.nullCount===0&&e.stride===1&&(t.typeId===$.Timestamp||t instanceof qa&&t.bitWidth!==64||t instanceof Bp&&t.bitWidth!==64||t instanceof Op&&t.precision!==Qe.HALF))return new QN(e.data.length,r=>{const i=e.data[r];return i.values.subarray(0,i.length)[Symbol.iterator]()});let n=0;return new QN(e.data.length,r=>{const s=e.data[r].length,o=e.slice(n,n+s);return n+=s,new jmt(o)})}class jmt{constructor(t){this.vector=t,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}dt.prototype.visitNull=bt;dt.prototype.visitBool=bt;dt.prototype.visitInt=bt;dt.prototype.visitInt8=bt;dt.prototype.visitInt16=bt;dt.prototype.visitInt32=bt;dt.prototype.visitInt64=bt;dt.prototype.visitUint8=bt;dt.prototype.visitUint16=bt;dt.prototype.visitUint32=bt;dt.prototype.visitUint64=bt;dt.prototype.visitFloat=bt;dt.prototype.visitFloat16=bt;dt.prototype.visitFloat32=bt;dt.prototype.visitFloat64=bt;dt.prototype.visitUtf8=bt;dt.prototype.visitLargeUtf8=bt;dt.prototype.visitBinary=bt;dt.prototype.visitLargeBinary=bt;dt.prototype.visitFixedSizeBinary=bt;dt.prototype.visitDate=bt;dt.prototype.visitDateDay=bt;dt.prototype.visitDateMillisecond=bt;dt.prototype.visitTimestamp=bt;dt.prototype.visitTimestampSecond=bt;dt.prototype.visitTimestampMillisecond=bt;dt.prototype.visitTimestampMicrosecond=bt;dt.prototype.visitTimestampNanosecond=bt;dt.prototype.visitTime=bt;dt.prototype.visitTimeSecond=bt;dt.prototype.visitTimeMillisecond=bt;dt.prototype.visitTimeMicrosecond=bt;dt.prototype.visitTimeNanosecond=bt;dt.prototype.visitDecimal=bt;dt.prototype.visitList=bt;dt.prototype.visitStruct=bt;dt.prototype.visitUnion=bt;dt.prototype.visitDenseUnion=bt;dt.prototype.visitSparseUnion=bt;dt.prototype.visitDictionary=bt;dt.prototype.visitInterval=bt;dt.prototype.visitIntervalDayTime=bt;dt.prototype.visitIntervalYearMonth=bt;dt.prototype.visitDuration=bt;dt.prototype.visitDurationSecond=bt;dt.prototype.visitDurationMillisecond=bt;dt.prototype.visitDurationMicrosecond=bt;dt.prototype.visitDurationNanosecond=bt;dt.prototype.visitFixedSizeList=bt;dt.prototype.visitMap=bt;const TE=new dt;var z9;const j9={},V9={};class se{constructor(t){var n,r,i;const s=t[0]instanceof se?t.flatMap(a=>a.data):t;if(s.length===0||s.some(a=>!(a instanceof ce)))throw new TypeError("Vector constructor expects an Array of Data instances.");const o=(n=s[0])===null||n===void 0?void 0:n.type;switch(s.length){case 0:this._offsets=[0];break;case 1:{const{get:a,set:l,indexOf:c}=j9[o.typeId],u=s[0];this.isValid=f=>IE(u,f),this.get=f=>a(u,f),this.set=(f,d)=>l(u,f,d),this.indexOf=f=>c(u,f),this._offsets=[0,u.length];break}default:Object.setPrototypeOf(this,V9[o.typeId]),this._offsets=L9(s);break}this.data=s,this.type=o,this.stride=oo(o),this.numChildren=(i=(r=o.children)===null||r===void 0?void 0:r.length)!==null&&i!==void 0?i:0,this.length=this._offsets.at(-1)}get byteLength(){return this.data.reduce((t,n)=>t+n.byteLength,0)}get nullable(){return Umt(this.data)}get nullCount(){return F9(this.data)}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${$[this.type.typeId]}Vector`}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}includes(t,n){return this.indexOf(t,n)>-1}[Symbol.iterator](){return TE.visit(this)}concat(...t){return new se(this.data.concat(t.flatMap(n=>n.data).flat(Number.POSITIVE_INFINITY)))}slice(t,n){return new se(O9(this,t,n,({data:r,_offsets:i},s,o)=>R9(r,i,s,o)))}toJSON(){return[...this]}toArray(){const{type:t,data:n,length:r,stride:i,ArrayType:s}=this;switch(t.typeId){case $.Int:case $.Float:case $.Decimal:case $.Time:case $.Timestamp:switch(n.length){case 0:return new s;case 1:return n[0].values.subarray(0,r*i);default:return n.reduce((o,{values:a,length:l})=>(o.array.set(a.subarray(0,l*i),o.offset),o.offset+=l*i,o),{array:new s(r*i),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(t){var n;return this.getChildAt((n=this.type.children)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.numChildren?new se(this.data.map(({children:n})=>n[t])):null}get isMemoized(){return ot.isDictionary(this.type)?this.data[0].dictionary.isMemoized:!1}memoize(){if(ot.isDictionary(this.type)){const t=new ub(this.data[0].dictionary),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new se(n)}return new ub(this)}unmemoize(){if(ot.isDictionary(this.type)&&this.isMemoized){const t=this.data[0].dictionary.unmemoize(),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new se(n)}return this}}z9=Symbol.toStringTag;se[z9]=(e=>{e.type=ot.prototype,e.data=[],e.length=0,e.stride=1,e.numChildren=0,e._offsets=new Uint32Array([0]),e[Symbol.isConcatSpreadable]=!0;const t=Object.keys($).map(n=>$[n]).filter(n=>typeof n=="number"&&n!==$.NONE);for(const n of t){const r=Tr.getVisitFnByTypeId(n),i=wi.getVisitFnByTypeId(n),s=cb.getVisitFnByTypeId(n);j9[n]={get:r,set:i,indexOf:s},V9[n]=Object.create(e,{isValid:{value:lb(IE)},get:{value:lb(Tr.getVisitFnByTypeId(n))},set:{value:C9(wi.getVisitFnByTypeId(n))},indexOf:{value:U9(cb.getVisitFnByTypeId(n))}})}return"Vector"})(se.prototype);class ub extends se{constructor(t){super(t.data);const n=this.get,r=this.set,i=this.slice,s=new Array(this.length);Object.defineProperty(this,"get",{value(o){const a=s[o];if(a!==void 0)return a;const l=n.call(this,o);return s[o]=l,l}}),Object.defineProperty(this,"set",{value(o,a){r.call(this,o,a),s[o]=a}}),Object.defineProperty(this,"slice",{value:(o,a)=>new ub(i.call(this,o,a))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new se(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}class $x{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(t,n,r,i){return t.prep(8,24),t.writeInt64(BigInt(i??0)),t.pad(4),t.writeInt32(r),t.writeInt64(BigInt(n??0)),t.offset()}}class Mr{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFooter(t,n){return(n||new Mr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFooter(t,n){return t.setPosition(t.position()+ae),(n||new Mr).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Je.V1}schema(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new us).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}dictionaries(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new $x).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}dictionariesLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}recordBatches(t,n){const r=this.bb.__offset(this.bb_pos,10);return r?(n||new $x).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}recordBatchesLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new cn).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startFooter(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,Je.V1)}static addSchema(t,n){t.addFieldOffset(1,n,0)}static addDictionaries(t,n){t.addFieldOffset(2,n,0)}static startDictionariesVector(t,n){t.startVector(24,n,8)}static addRecordBatches(t,n){t.addFieldOffset(3,n,0)}static startRecordBatchesVector(t,n){t.startVector(24,n,8)}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endFooter(t){return t.endObject()}static finishFooterBuffer(t,n){t.finish(n)}static finishSizePrefixedFooterBuffer(t,n){t.finish(n,void 0,!0)}}class oe{constructor(t=[],n,r,i=Je.V5){this.fields=t||[],this.metadata=n||new Map,r||(r=Nx(t)),this.dictionaries=r,this.metadataVersion=i}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(t=>t.name)}toString(){return`Schema<{ ${this.fields.map((t,n)=>`${n}: ${t}`).join(", ")} }>`}select(t){const n=new Set(t),r=this.fields.filter(i=>n.has(i.name));return new oe(r,this.metadata)}selectAt(t){const n=t.map(r=>this.fields[r]).filter(Boolean);return new oe(n,this.metadata)}assign(...t){const n=t[0]instanceof oe?t[0]:Array.isArray(t[0])?new oe(t[0]):new oe(t),r=[...this.fields],i=C0(C0(new Map,this.metadata),n.metadata),s=n.fields.filter(a=>{const l=r.findIndex(c=>c.name===a.name);return~l?(r[l]=a.clone({metadata:C0(C0(new Map,r[l].metadata),a.metadata)}))&&!1:!0}),o=Nx(s,new Map);return new oe([...r,...s],i,new Map([...this.dictionaries,...o]))}}oe.prototype.fields=null;oe.prototype.metadata=null;oe.prototype.dictionaries=null;class Ee{static new(...t){let[n,r,i,s]=t;return t[0]&&typeof t[0]=="object"&&({name:n}=t[0],r===void 0&&(r=t[0].type),i===void 0&&(i=t[0].nullable),s===void 0&&(s=t[0].metadata)),new Ee(`${n}`,r,i,s)}constructor(t,n,r=!1,i){this.name=t,this.type=n,this.nullable=r,this.metadata=i||new Map}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...t){let[n,r,i,s]=t;return!t[0]||typeof t[0]!="object"?[n=this.name,r=this.type,i=this.nullable,s=this.metadata]=t:{name:n=this.name,type:r=this.type,nullable:i=this.nullable,metadata:s=this.metadata}=t[0],Ee.new(n,r,i,s)}}Ee.prototype.type=null;Ee.prototype.name=null;Ee.prototype.nullable=null;Ee.prototype.metadata=null;function C0(e,t){return new Map([...e||new Map,...t||new Map])}function Nx(e,t=new Map){for(let n=-1,r=e.length;++n<r;){const s=e[n].type;if(ot.isDictionary(s)){if(!t.has(s.id))t.set(s.id,s.dictionary);else if(t.get(s.id)!==s.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}s.children&&s.children.length>0&&Nx(s.children,t)}return t}var Vmt=jO,Ymt=gf;class Fp{static decode(t){t=new Ymt(jt(t));const n=Mr.getRootAsFooter(t),r=oe.decode(n.schema(),new Map,n.version());return new qmt(r,n)}static encode(t){const n=new Vmt,r=oe.encode(n,t.schema);Mr.startRecordBatchesVector(n,t.numRecordBatches);for(const o of[...t.recordBatches()].slice().reverse())Wa.encode(n,o);const i=n.endVector();Mr.startDictionariesVector(n,t.numDictionaries);for(const o of[...t.dictionaryBatches()].slice().reverse())Wa.encode(n,o);const s=n.endVector();return Mr.startFooter(n),Mr.addSchema(n,r),Mr.addVersion(n,Je.V5),Mr.addRecordBatches(n,i),Mr.addDictionaries(n,s),Mr.finishFooterBuffer(n,Mr.endFooter(n)),n.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}constructor(t,n=Je.V5,r,i){this.schema=t,this.version=n,r&&(this._recordBatches=r),i&&(this._dictionaryBatches=i)}*recordBatches(){for(let t,n=-1,r=this.numRecordBatches;++n<r;)(t=this.getRecordBatch(n))&&(yield t)}*dictionaryBatches(){for(let t,n=-1,r=this.numDictionaries;++n<r;)(t=this.getDictionaryBatch(n))&&(yield t)}getRecordBatch(t){return t>=0&&t<this.numRecordBatches&&this._recordBatches[t]||null}getDictionaryBatch(t){return t>=0&&t<this.numDictionaries&&this._dictionaryBatches[t]||null}}class qmt extends Fp{get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}constructor(t,n){super(t,n.version()),this._footer=n}getRecordBatch(t){if(t>=0&&t<this.numRecordBatches){const n=this._footer.recordBatches(t);if(n)return Wa.decode(n)}return null}getDictionaryBatch(t){if(t>=0&&t<this.numDictionaries){const n=this._footer.dictionaries(t);if(n)return Wa.decode(n)}return null}}class Wa{static decode(t){return new Wa(t.metaDataLength(),t.bodyLength(),t.offset())}static encode(t,n){const{metaDataLength:r}=n,i=BigInt(n.offset),s=BigInt(n.bodyLength);return $x.createBlock(t,i,r,s)}constructor(t,n,r){this.metaDataLength=t,this.offset=Mn(r),this.bodyLength=Mn(n)}}const Ue=Object.freeze({done:!0,value:void 0});class KN{constructor(t){this._json=t}get schema(){return this._json.schema}get batches(){return this._json.batches||[]}get dictionaries(){return this._json.dictionaries||[]}}class EE{tee(){return this._getDOMStream().tee()}pipe(t,n){return this._getNodeStream().pipe(t,n)}pipeTo(t,n){return this._getDOMStream().pipeTo(t,n)}pipeThrough(t,n){return this._getDOMStream().pipeThrough(t,n)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class Wmt extends EE{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(t=>this._closedPromiseResolve=t)}get closed(){return this._closedPromise}cancel(t){return W(this,void 0,void 0,function*(){yield this.return(t)})}write(t){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(t):this.resolvers.shift().resolve({done:!1,value:t}))}abort(t){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:t}:this.resolvers.shift().reject({done:!0,value:t}))}close(){if(this._closedPromiseResolve){const{resolvers:t}=this;for(;t.length>0;)t.shift().resolve(Ue);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(t){return Zr.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,t)}toNodeStream(t){return Zr.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,t)}throw(t){return W(this,void 0,void 0,function*(){return yield this.abort(t),Ue})}return(t){return W(this,void 0,void 0,function*(){return yield this.close(),Ue})}read(t){return W(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return W(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(...t){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((n,r)=>{this.resolvers.push({resolve:n,reject:r})}):Promise.resolve(Ue)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}}class xm extends Wmt{write(t){if((t=jt(t)).byteLength>0)return super.write(t)}toString(t=!1){return t?xx(this.toUint8Array(!0)):this.toUint8Array(!1).then(xx)}toUint8Array(t=!1){return t?Ls(this._values)[0]:W(this,void 0,void 0,function*(){var n,r,i,s;const o=[];let a=0;try{for(var l=!0,c=Lr(this),u;u=yield c.next(),n=u.done,!n;l=!0){s=u.value,l=!1;const f=s;o.push(f),a+=f.byteLength}}catch(f){r={error:f}}finally{try{!l&&!n&&(i=c.return)&&(yield i.call(c))}finally{if(r)throw r.error}}return Ls(o,a)[0]})}}class fb{constructor(t){t&&(this.source=new Hmt(Zr.fromIterable(t)))}[Symbol.iterator](){return this}next(t){return this.source.next(t)}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}peek(t){return this.source.peek(t)}read(t){return this.source.read(t)}}class Uf{constructor(t){t instanceof Uf?this.source=t.source:t instanceof xm?this.source=new hl(Zr.fromAsyncIterable(t)):dP(t)?this.source=new hl(Zr.fromNodeStream(t)):pE(t)?this.source=new hl(Zr.fromDOMStream(t)):fP(t)?this.source=new hl(Zr.fromDOMStream(t.body)):Dy(t)?this.source=new hl(Zr.fromIterable(t)):bc(t)?this.source=new hl(Zr.fromAsyncIterable(t)):fd(t)&&(this.source=new hl(Zr.fromAsyncIterable(t)))}[Symbol.asyncIterator](){return this}next(t){return this.source.next(t)}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}get closed(){return this.source.closed}cancel(t){return this.source.cancel(t)}peek(t){return this.source.peek(t)}read(t){return this.source.read(t)}}class Hmt{constructor(t){this.source=t}cancel(t){this.return(t)}peek(t){return this.next(t,"peek").value}read(t){return this.next(t,"read").value}next(t,n="read"){return this.source.next({cmd:n,size:t})}throw(t){return Object.create(this.source.throw&&this.source.throw(t)||Ue)}return(t){return Object.create(this.source.return&&this.source.return(t)||Ue)}}class hl{constructor(t){this.source=t,this._closedPromise=new Promise(n=>this._closedPromiseResolve=n)}cancel(t){return W(this,void 0,void 0,function*(){yield this.return(t)})}get closed(){return this._closedPromise}read(t){return W(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return W(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(t,n="read"){return W(this,void 0,void 0,function*(){return yield this.source.next({cmd:n,size:t})})}throw(t){return W(this,void 0,void 0,function*(){const n=this.source.throw&&(yield this.source.throw(t))||Ue;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(n)})}return(t){return W(this,void 0,void 0,function*(){const n=this.source.return&&(yield this.source.return(t))||Ue;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(n)})}}class ZN extends fb{constructor(t,n){super(),this.position=0,this.buffer=jt(t),this.size=n===void 0?this.buffer.byteLength:n}readInt32(t){const{buffer:n,byteOffset:r}=this.readAt(t,4);return new DataView(n,r).getInt32(0,!0)}seek(t){return this.position=Math.min(t,this.size),t<this.size}read(t){const{buffer:n,size:r,position:i}=this;return n&&i<r?(typeof t!="number"&&(t=Number.POSITIVE_INFINITY),this.position=Math.min(r,i+Math.min(r-i,t)),n.subarray(i,this.position)):null}readAt(t,n){const r=this.buffer,i=Math.min(this.size,t+n);return r?r.subarray(t,i):new Uint8Array(n)}close(){this.buffer&&(this.buffer=null)}throw(t){return this.close(),{done:!0,value:t}}return(t){return this.close(),{done:!0,value:t}}}class db extends Uf{constructor(t,n){super(),this.position=0,this._handle=t,typeof n=="number"?this.size=n:this._pending=W(this,void 0,void 0,function*(){this.size=(yield t.stat()).size,delete this._pending})}readInt32(t){return W(this,void 0,void 0,function*(){const{buffer:n,byteOffset:r}=yield this.readAt(t,4);return new DataView(n,r).getInt32(0,!0)})}seek(t){return W(this,void 0,void 0,function*(){return this._pending&&(yield this._pending),this.position=Math.min(t,this.size),t<this.size})}read(t){return W(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:n,size:r,position:i}=this;if(n&&i<r){typeof t!="number"&&(t=Number.POSITIVE_INFINITY);let s=i,o=0,a=0;const l=Math.min(r,s+Math.min(r-s,t)),c=new Uint8Array(Math.max(0,(this.position=l)-s));for(;(s+=a)<l&&(o+=a)<c.byteLength;)({bytesRead:a}=yield n.read(c,o,c.byteLength-o,s));return c}return null})}readAt(t,n){return W(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:r,size:i}=this;if(r&&t+n<i){const s=Math.min(i,t+n),o=new Uint8Array(s-t);return(yield r.read(o,0,n,t)).buffer}return new Uint8Array(n)})}close(){return W(this,void 0,void 0,function*(){const t=this._handle;this._handle=null,t&&(yield t.close())})}throw(t){return W(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:t}})}return(t){return W(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:t}})}}const Gmt=65536;function Nu(e){return e<0&&(e=4294967295+e+1),`0x${e.toString(16)}`}const Pf=8,AE=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8];class Y9{constructor(t){this.buffer=t}high(){return this.buffer[1]}low(){return this.buffer[0]}_times(t){const n=new Uint32Array([this.buffer[1]>>>16,this.buffer[1]&65535,this.buffer[0]>>>16,this.buffer[0]&65535]),r=new Uint32Array([t.buffer[1]>>>16,t.buffer[1]&65535,t.buffer[0]>>>16,t.buffer[0]&65535]);let i=n[3]*r[3];this.buffer[0]=i&65535;let s=i>>>16;return i=n[2]*r[3],s+=i,i=n[3]*r[2]>>>0,s+=i,this.buffer[0]+=s<<16,this.buffer[1]=s>>>0<i?Gmt:0,this.buffer[1]+=s>>>16,this.buffer[1]+=n[1]*r[3]+n[2]*r[2]+n[3]*r[1],this.buffer[1]+=n[0]*r[3]+n[1]*r[2]+n[2]*r[1]+n[3]*r[0]<<16,this}_plus(t){const n=this.buffer[0]+t.buffer[0]>>>0;this.buffer[1]+=t.buffer[1],n<this.buffer[0]>>>0&&++this.buffer[1],this.buffer[0]=n}lessThan(t){return this.buffer[1]<t.buffer[1]||this.buffer[1]===t.buffer[1]&&this.buffer[0]<t.buffer[0]}equals(t){return this.buffer[1]===t.buffer[1]&&this.buffer[0]==t.buffer[0]}greaterThan(t){return t.lessThan(this)}hex(){return`${Nu(this.buffer[1])} ${Nu(this.buffer[0])}`}}class ue extends Y9{times(t){return this._times(t),this}plus(t){return this._plus(t),this}static from(t,n=new Uint32Array(2)){return ue.fromString(typeof t=="string"?t:t.toString(),n)}static fromNumber(t,n=new Uint32Array(2)){return ue.fromString(t.toString(),n)}static fromString(t,n=new Uint32Array(2)){const r=t.length,i=new ue(n);for(let s=0;s<r;){const o=Pf<r-s?Pf:r-s,a=new ue(new Uint32Array([Number.parseInt(t.slice(s,s+o),10),0])),l=new ue(new Uint32Array([AE[o],0]));i.times(l),i.plus(a),s+=o}return i}static convertArray(t){const n=new Uint32Array(t.length*2);for(let r=-1,i=t.length;++r<i;)ue.from(t[r],new Uint32Array(n.buffer,n.byteOffset+2*r*4,2));return n}static multiply(t,n){return new ue(new Uint32Array(t.buffer)).times(n)}static add(t,n){return new ue(new Uint32Array(t.buffer)).plus(n)}}class or extends Y9{negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[0]==0&&++this.buffer[1],this}times(t){return this._times(t),this}plus(t){return this._plus(t),this}lessThan(t){const n=this.buffer[1]<<0,r=t.buffer[1]<<0;return n<r||n===r&&this.buffer[0]<t.buffer[0]}static from(t,n=new Uint32Array(2)){return or.fromString(typeof t=="string"?t:t.toString(),n)}static fromNumber(t,n=new Uint32Array(2)){return or.fromString(t.toString(),n)}static fromString(t,n=new Uint32Array(2)){const r=t.startsWith("-"),i=t.length,s=new or(n);for(let o=r?1:0;o<i;){const a=Pf<i-o?Pf:i-o,l=new or(new Uint32Array([Number.parseInt(t.slice(o,o+a),10),0])),c=new or(new Uint32Array([AE[a],0]));s.times(c),s.plus(l),o+=a}return r?s.negate():s}static convertArray(t){const n=new Uint32Array(t.length*2);for(let r=-1,i=t.length;++r<i;)or.from(t[r],new Uint32Array(n.buffer,n.byteOffset+2*r*4,2));return n}static multiply(t,n){return new or(new Uint32Array(t.buffer)).times(n)}static add(t,n){return new or(new Uint32Array(t.buffer)).plus(n)}}class fs{constructor(t){this.buffer=t}high(){return new or(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2))}low(){return new or(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset,2))}negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[2]=~this.buffer[2],this.buffer[3]=~this.buffer[3],this.buffer[0]==0&&++this.buffer[1],this.buffer[1]==0&&++this.buffer[2],this.buffer[2]==0&&++this.buffer[3],this}times(t){const n=new ue(new Uint32Array([this.buffer[3],0])),r=new ue(new Uint32Array([this.buffer[2],0])),i=new ue(new Uint32Array([this.buffer[1],0])),s=new ue(new Uint32Array([this.buffer[0],0])),o=new ue(new Uint32Array([t.buffer[3],0])),a=new ue(new Uint32Array([t.buffer[2],0])),l=new ue(new Uint32Array([t.buffer[1],0])),c=new ue(new Uint32Array([t.buffer[0],0]));let u=ue.multiply(s,c);this.buffer[0]=u.low();const f=new ue(new Uint32Array([u.high(),0]));return u=ue.multiply(i,c),f.plus(u),u=ue.multiply(s,l),f.plus(u),this.buffer[1]=f.low(),this.buffer[3]=f.lessThan(u)?1:0,this.buffer[2]=f.high(),new ue(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2)).plus(ue.multiply(r,c)).plus(ue.multiply(i,l)).plus(ue.multiply(s,a)),this.buffer[3]+=ue.multiply(n,c).plus(ue.multiply(r,l)).plus(ue.multiply(i,a)).plus(ue.multiply(s,o)).low(),this}plus(t){const n=new Uint32Array(4);return n[3]=this.buffer[3]+t.buffer[3]>>>0,n[2]=this.buffer[2]+t.buffer[2]>>>0,n[1]=this.buffer[1]+t.buffer[1]>>>0,n[0]=this.buffer[0]+t.buffer[0]>>>0,n[0]<this.buffer[0]>>>0&&++n[1],n[1]<this.buffer[1]>>>0&&++n[2],n[2]<this.buffer[2]>>>0&&++n[3],this.buffer[3]=n[3],this.buffer[2]=n[2],this.buffer[1]=n[1],this.buffer[0]=n[0],this}hex(){return`${Nu(this.buffer[3])} ${Nu(this.buffer[2])} ${Nu(this.buffer[1])} ${Nu(this.buffer[0])}`}static multiply(t,n){return new fs(new Uint32Array(t.buffer)).times(n)}static add(t,n){return new fs(new Uint32Array(t.buffer)).plus(n)}static from(t,n=new Uint32Array(4)){return fs.fromString(typeof t=="string"?t:t.toString(),n)}static fromNumber(t,n=new Uint32Array(4)){return fs.fromString(t.toString(),n)}static fromString(t,n=new Uint32Array(4)){const r=t.startsWith("-"),i=t.length,s=new fs(n);for(let o=r?1:0;o<i;){const a=Pf<i-o?Pf:i-o,l=new fs(new Uint32Array([Number.parseInt(t.slice(o,o+a),10),0,0,0])),c=new fs(new Uint32Array([AE[a],0,0,0]));s.times(c),s.plus(l),o+=a}return r?s.negate():s}static convertArray(t){const n=new Uint32Array(t.length*4);for(let r=-1,i=t.length;++r<i;)fs.from(t[r],new Uint32Array(n.buffer,n.byteOffset+4*4*r,4));return n}}class q9 extends Ft{constructor(t,n,r,i,s=Je.V5){super(),this.nodesIndex=-1,this.buffersIndex=-1,this.bytes=t,this.nodes=n,this.buffers=r,this.dictionaries=i,this.metadataVersion=s}visit(t){return super.visit(t instanceof Ee?t.type:t)}visitNull(t,{length:n}=this.nextFieldNode()){return Lt({type:t,length:n})}visitBool(t,{length:n,nullCount:r}=this.nextFieldNode()){return Lt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitInt(t,{length:n,nullCount:r}=this.nextFieldNode()){return Lt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitFloat(t,{length:n,nullCount:r}=this.nextFieldNode()){return Lt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitUtf8(t,{length:n,nullCount:r}=this.nextFieldNode()){return Lt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),valueOffsets:this.readOffsets(t),data:this.readData(t)})}visitLargeUtf8(t,{length:n,nullCount:r}=this.nextFieldNode()){return Lt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),valueOffsets:this.readOffsets(t),data:this.readData(t)})}visitBinary(t,{length:n,nullCount:r}=this.nextFieldNode()){return Lt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),valueOffsets:this.readOffsets(t),data:this.readData(t)})}visitLargeBinary(t,{length:n,nullCount:r}=this.nextFieldNode()){return Lt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),valueOffsets:this.readOffsets(t),data:this.readData(t)})}visitFixedSizeBinary(t,{length:n,nullCount:r}=this.nextFieldNode()){return Lt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitDate(t,{length:n,nullCount:r}=this.nextFieldNode()){return Lt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitTimestamp(t,{length:n,nullCount:r}=this.nextFieldNode()){return Lt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitTime(t,{length:n,nullCount:r}=this.nextFieldNode()){return Lt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitDecimal(t,{length:n,nullCount:r}=this.nextFieldNode()){return Lt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitList(t,{length:n,nullCount:r}=this.nextFieldNode()){return Lt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),valueOffsets:this.readOffsets(t),child:this.visit(t.children[0])})}visitStruct(t,{length:n,nullCount:r}=this.nextFieldNode()){return Lt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),children:this.visitMany(t.children)})}visitUnion(t,{length:n,nullCount:r}=this.nextFieldNode()){return this.metadataVersion<Je.V5&&this.readNullBitmap(t,r),t.mode===on.Sparse?this.visitSparseUnion(t,{length:n,nullCount:r}):this.visitDenseUnion(t,{length:n,nullCount:r})}visitDenseUnion(t,{length:n,nullCount:r}=this.nextFieldNode()){return Lt({type:t,length:n,nullCount:r,typeIds:this.readTypeIds(t),valueOffsets:this.readOffsets(t),children:this.visitMany(t.children)})}visitSparseUnion(t,{length:n,nullCount:r}=this.nextFieldNode()){return Lt({type:t,length:n,nullCount:r,typeIds:this.readTypeIds(t),children:this.visitMany(t.children)})}visitDictionary(t,{length:n,nullCount:r}=this.nextFieldNode()){return Lt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t.indices),dictionary:this.readDictionary(t)})}visitInterval(t,{length:n,nullCount:r}=this.nextFieldNode()){return Lt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitDuration(t,{length:n,nullCount:r}=this.nextFieldNode()){return Lt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitFixedSizeList(t,{length:n,nullCount:r}=this.nextFieldNode()){return Lt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),child:this.visit(t.children[0])})}visitMap(t,{length:n,nullCount:r}=this.nextFieldNode()){return Lt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),valueOffsets:this.readOffsets(t),child:this.visit(t.children[0])})}nextFieldNode(){return this.nodes[++this.nodesIndex]}nextBufferRange(){return this.buffers[++this.buffersIndex]}readNullBitmap(t,n,r=this.nextBufferRange()){return n>0&&this.readData(t,r)||new Uint8Array(0)}readOffsets(t,n){return this.readData(t,n)}readTypeIds(t,n){return this.readData(t,n)}readData(t,{length:n,offset:r}=this.nextBufferRange()){return this.bytes.subarray(r,r+n)}readDictionary(t){return this.dictionaries.get(t.id)}}class Xmt extends q9{constructor(t,n,r,i,s){super(new Uint8Array(0),n,r,i,s),this.sources=t}readNullBitmap(t,n,{offset:r}=this.nextBufferRange()){return n<=0?new Uint8Array(0):ab(this.sources[r])}readOffsets(t,{offset:n}=this.nextBufferRange()){return fe(Uint8Array,fe(t.OffsetArrayType,this.sources[n]))}readTypeIds(t,{offset:n}=this.nextBufferRange()){return fe(Uint8Array,fe(t.ArrayType,this.sources[n]))}readData(t,{offset:n}=this.nextBufferRange()){const{sources:r}=this;return ot.isTimestamp(t)||(ot.isInt(t)||ot.isTime(t))&&t.bitWidth===64||ot.isDuration(t)||ot.isDate(t)&&t.unit===er.MILLISECOND?fe(Uint8Array,or.convertArray(r[n])):ot.isDecimal(t)?fe(Uint8Array,fs.convertArray(r[n])):ot.isBinary(t)||ot.isLargeBinary(t)||ot.isFixedSizeBinary(t)?Qmt(r[n]):ot.isBool(t)?ab(r[n]):ot.isUtf8(t)||ot.isLargeUtf8(t)?hE(r[n].join("")):fe(Uint8Array,fe(t.ArrayType,r[n].map(i=>+i)))}}function Qmt(e){const t=e.join(""),n=new Uint8Array(t.length/2);for(let r=0;r<t.length;r+=2)n[r>>1]=Number.parseInt(t.slice(r,r+2),16);return n}class ht extends Ft{compareSchemas(t,n){return t===n||n instanceof t.constructor&&this.compareManyFields(t.fields,n.fields)}compareManyFields(t,n){return t===n||Array.isArray(t)&&Array.isArray(n)&&t.length===n.length&&t.every((r,i)=>this.compareFields(r,n[i]))}compareFields(t,n){return t===n||n instanceof t.constructor&&t.name===n.name&&t.nullable===n.nullable&&this.visit(t.type,n.type)}}function ir(e,t){return t instanceof e.constructor}function Ec(e,t){return e===t||ir(e,t)}function qo(e,t){return e===t||ir(e,t)&&e.bitWidth===t.bitWidth&&e.isSigned===t.isSigned}function Wv(e,t){return e===t||ir(e,t)&&e.precision===t.precision}function Kmt(e,t){return e===t||ir(e,t)&&e.byteWidth===t.byteWidth}function ME(e,t){return e===t||ir(e,t)&&e.unit===t.unit}function Oy(e,t){return e===t||ir(e,t)&&e.unit===t.unit&&e.timezone===t.timezone}function By(e,t){return e===t||ir(e,t)&&e.unit===t.unit&&e.bitWidth===t.bitWidth}function Zmt(e,t){return e===t||ir(e,t)&&e.children.length===t.children.length&&Ha.compareManyFields(e.children,t.children)}function Jmt(e,t){return e===t||ir(e,t)&&e.children.length===t.children.length&&Ha.compareManyFields(e.children,t.children)}function $E(e,t){return e===t||ir(e,t)&&e.mode===t.mode&&e.typeIds.every((n,r)=>n===t.typeIds[r])&&Ha.compareManyFields(e.children,t.children)}function tgt(e,t){return e===t||ir(e,t)&&e.id===t.id&&e.isOrdered===t.isOrdered&&Ha.visit(e.indices,t.indices)&&Ha.visit(e.dictionary,t.dictionary)}function NE(e,t){return e===t||ir(e,t)&&e.unit===t.unit}function Fy(e,t){return e===t||ir(e,t)&&e.unit===t.unit}function egt(e,t){return e===t||ir(e,t)&&e.listSize===t.listSize&&e.children.length===t.children.length&&Ha.compareManyFields(e.children,t.children)}function ngt(e,t){return e===t||ir(e,t)&&e.keysSorted===t.keysSorted&&e.children.length===t.children.length&&Ha.compareManyFields(e.children,t.children)}ht.prototype.visitNull=Ec;ht.prototype.visitBool=Ec;ht.prototype.visitInt=qo;ht.prototype.visitInt8=qo;ht.prototype.visitInt16=qo;ht.prototype.visitInt32=qo;ht.prototype.visitInt64=qo;ht.prototype.visitUint8=qo;ht.prototype.visitUint16=qo;ht.prototype.visitUint32=qo;ht.prototype.visitUint64=qo;ht.prototype.visitFloat=Wv;ht.prototype.visitFloat16=Wv;ht.prototype.visitFloat32=Wv;ht.prototype.visitFloat64=Wv;ht.prototype.visitUtf8=Ec;ht.prototype.visitLargeUtf8=Ec;ht.prototype.visitBinary=Ec;ht.prototype.visitLargeBinary=Ec;ht.prototype.visitFixedSizeBinary=Kmt;ht.prototype.visitDate=ME;ht.prototype.visitDateDay=ME;ht.prototype.visitDateMillisecond=ME;ht.prototype.visitTimestamp=Oy;ht.prototype.visitTimestampSecond=Oy;ht.prototype.visitTimestampMillisecond=Oy;ht.prototype.visitTimestampMicrosecond=Oy;ht.prototype.visitTimestampNanosecond=Oy;ht.prototype.visitTime=By;ht.prototype.visitTimeSecond=By;ht.prototype.visitTimeMillisecond=By;ht.prototype.visitTimeMicrosecond=By;ht.prototype.visitTimeNanosecond=By;ht.prototype.visitDecimal=Ec;ht.prototype.visitList=Zmt;ht.prototype.visitStruct=Jmt;ht.prototype.visitUnion=$E;ht.prototype.visitDenseUnion=$E;ht.prototype.visitSparseUnion=$E;ht.prototype.visitDictionary=tgt;ht.prototype.visitInterval=NE;ht.prototype.visitIntervalDayTime=NE;ht.prototype.visitIntervalYearMonth=NE;ht.prototype.visitDuration=Fy;ht.prototype.visitDurationSecond=Fy;ht.prototype.visitDurationMillisecond=Fy;ht.prototype.visitDurationMicrosecond=Fy;ht.prototype.visitDurationNanosecond=Fy;ht.prototype.visitFixedSizeList=egt;ht.prototype.visitMap=ngt;const Ha=new ht;function kx(e,t){return Ha.compareSchemas(e,t)}function O_(e,t){return rgt(e,t.map(n=>n.data.concat()))}function rgt(e,t){const n=[...e.fields],r=[],i={numBatches:t.reduce((f,d)=>Math.max(f,d.length),0)};let s=0,o=0,a=-1;const l=t.length;let c,u=[];for(;i.numBatches-- >0;){for(o=Number.POSITIVE_INFINITY,a=-1;++a<l;)u[a]=c=t[a].shift(),o=Math.min(o,c?c.length:o);Number.isFinite(o)&&(u=igt(n,o,u,t,i),o>0&&(r[s++]=Lt({type:new Xn(n),length:o,nullCount:0,children:u.slice()})))}return[e=e.assign(n),r.map(f=>new cr(e,f))]}function igt(e,t,n,r,i){var s;const o=(t+63&-64)>>3;for(let a=-1,l=r.length;++a<l;){const c=n[a],u=c==null?void 0:c.length;if(u>=t)u===t?n[a]=c:(n[a]=c.slice(0,t),i.numBatches=Math.max(i.numBatches,r[a].unshift(c.slice(t,u-t))));else{const f=e[a];e[a]=f.clone({nullable:!0}),n[a]=(s=c==null?void 0:c._changeLengthAndBackfillNullBitmap(t))!==null&&s!==void 0?s:Lt({type:f.type,length:t,nullCount:t,nullBitmap:new Uint8Array(o)})}}return n}var W9;class Ln{constructor(...t){var n,r;if(t.length===0)return this.batches=[],this.schema=new oe([]),this._offsets=[0],this;let i,s;t[0]instanceof oe&&(i=t.shift()),t.at(-1)instanceof Uint32Array&&(s=t.pop());const o=l=>{if(l){if(l instanceof cr)return[l];if(l instanceof Ln)return l.batches;if(l instanceof ce){if(l.type instanceof Xn)return[new cr(new oe(l.type.children),l)]}else{if(Array.isArray(l))return l.flatMap(c=>o(c));if(typeof l[Symbol.iterator]=="function")return[...l].flatMap(c=>o(c));if(typeof l=="object"){const c=Object.keys(l),u=c.map(h=>new se([l[h]])),f=i??new oe(c.map((h,p)=>new Ee(String(h),u[p].type,u[p].nullable))),[,d]=O_(f,u);return d.length===0?[new cr(l)]:d}}}return[]},a=t.flatMap(l=>o(l));if(i=(r=i??((n=a[0])===null||n===void 0?void 0:n.schema))!==null&&r!==void 0?r:new oe([]),!(i instanceof oe))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const l of a){if(!(l instanceof cr))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!kx(i,l.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=i,this.batches=a,this._offsets=s??L9(this.data)}get data(){return this.batches.map(({data:t})=>t)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((t,n)=>t+n.length,0)}get nullCount(){return this._nullCount===-1&&(this._nullCount=F9(this.data)),this._nullCount}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}[Symbol.iterator](){return this.batches.length>0?TE.visit(new se(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(`,
  `)}
]`}concat(...t){const n=this.schema,r=this.data.concat(t.flatMap(({data:i})=>i));return new Ln(n,r.map(i=>new cr(n,i)))}slice(t,n){const r=this.schema;[t,n]=O9({length:this.numRows},t,n);const i=R9(this.data,this._offsets,t,n);return new Ln(r,i.map(s=>new cr(r,s)))}getChild(t){return this.getChildAt(this.schema.fields.findIndex(n=>n.name===t))}getChildAt(t){if(t>-1&&t<this.schema.fields.length){const n=this.data.map(r=>r.children[t]);if(n.length===0){const{type:r}=this.schema.fields[t],i=Lt({type:r,length:0,nullCount:0});n.push(i._changeLengthAndBackfillNullBitmap(this.numRows))}return new se(n)}return null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=[...this.batches];if(t>-1&&t<this.numCols){n||(n=new se([Lt({type:new Ya,length:this.numRows})]));const s=r.fields.slice(),o=s[t].clone({type:n.type}),a=this.schema.fields.map((l,c)=>this.getChildAt(c));[s[t],a[t]]=[o,n],[r,i]=O_(r,a)}return new Ln(r,i)}select(t){const n=this.schema.fields.reduce((r,i,s)=>r.set(i.name,s),new Map);return this.selectAt(t.map(r=>n.get(r)).filter(r=>r>-1))}selectAt(t){const n=this.schema.selectAt(t),r=this.batches.map(i=>i.selectAt(t));return new Ln(n,r)}assign(t){const n=this.schema.fields,[r,i]=t.schema.fields.reduce((a,l,c)=>{const[u,f]=a,d=n.findIndex(h=>h.name===l.name);return~d?f[d]=c:u.push(c),a},[[],[]]),s=this.schema.assign(t.schema),o=[...n.map((a,l)=>[l,i[l]]).map(([a,l])=>l===void 0?this.getChildAt(a):t.getChildAt(l)),...r.map(a=>t.getChildAt(a))].filter(Boolean);return new Ln(...O_(s,o))}}W9=Symbol.toStringTag;Ln[W9]=(e=>(e.schema=null,e.batches=[],e._offsets=new Uint32Array([0]),e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,e.isValid=lb(IE),e.get=lb(Tr.getVisitFn($.Struct)),e.set=C9(wi.getVisitFn($.Struct)),e.indexOf=U9(cb.getVisitFn($.Struct)),"Table"))(Ln.prototype);var H9;let cr=class dh{constructor(...t){switch(t.length){case 2:{if([this.schema]=t,!(this.schema instanceof oe))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=Lt({nullCount:0,type:new Xn(this.schema.fields),children:this.schema.fields.map(n=>Lt({type:n.type,nullCount:0}))})]=t,!(this.data instanceof ce))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=JN(this.schema,this.data.children);break}case 1:{const[n]=t,{fields:r,children:i,length:s}=Object.keys(n).reduce((l,c,u)=>(l.children[u]=n[c],l.length=Math.max(l.length,n[c].length),l.fields[u]=Ee.new({name:c,type:n[c].type,nullable:!0}),l),{length:0,fields:new Array,children:new Array}),o=new oe(r),a=Lt({type:new Xn(r),length:s,children:i,nullCount:0});[this.schema,this.data]=JN(o,a.children,s);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=G9(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(t){return this.data.getValid(t)}get(t){return Tr.visit(this.data,t)}set(t,n){return wi.visit(this.data,t,n)}indexOf(t,n){return cb.visit(this.data,t,n)}[Symbol.iterator](){return TE.visit(new se([this.data]))}toArray(){return[...this]}concat(...t){return new Ln(this.schema,[this,...t])}slice(t,n){const[r]=new se([this.data]).slice(t,n).data;return new dh(this.schema,r)}getChild(t){var n;return this.getChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.schema.fields.length?new se([this.data.children[t]]):null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=this.data;if(t>-1&&t<this.numCols){n||(n=new se([Lt({type:new Ya,length:this.numRows})]));const s=r.fields.slice(),o=i.children.slice(),a=s[t].clone({type:n.type});[s[t],o[t]]=[a,n.data[0]],r=new oe(s,new Map(this.schema.metadata)),i=Lt({type:new Xn(s),children:o})}return new dh(r,i)}select(t){const n=this.schema.select(t),r=new Xn(n.fields),i=[];for(const s of t){const o=this.schema.fields.findIndex(a=>a.name===s);~o&&(i[o]=this.data.children[o])}return new dh(n,Lt({type:r,length:this.numRows,children:i}))}selectAt(t){const n=this.schema.selectAt(t),r=t.map(s=>this.data.children[s]).filter(Boolean),i=Lt({type:new Xn(n.fields),length:this.numRows,children:r});return new dh(n,i)}};H9=Symbol.toStringTag;cr[H9]=(e=>(e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(cr.prototype);function JN(e,t,n=t.reduce((r,i)=>Math.max(r,i.length),0)){var r;const i=[...e.fields],s=[...t],o=(n+63&-64)>>3;for(const[a,l]of e.fields.entries()){const c=t[a];(!c||c.length!==n)&&(i[a]=l.clone({nullable:!0}),s[a]=(r=c==null?void 0:c._changeLengthAndBackfillNullBitmap(n))!==null&&r!==void 0?r:Lt({type:l.type,length:n,nullCount:n,nullBitmap:new Uint8Array(o)}))}return[e.assign(i),Lt({type:new Xn(i),length:n,children:s})]}function G9(e,t,n=new Map){var r,i;if(((r=e==null?void 0:e.length)!==null&&r!==void 0?r:0)>0&&(e==null?void 0:e.length)===(t==null?void 0:t.length))for(let s=-1,o=e.length;++s<o;){const{type:a}=e[s],l=t[s];for(const c of[l,...((i=l==null?void 0:l.dictionary)===null||i===void 0?void 0:i.data)||[]])G9(a.children,c==null?void 0:c.children,n);if(ot.isDictionary(a)){const{id:c}=a;if(!n.has(c))l!=null&&l.dictionary&&n.set(c,l.dictionary);else if(n.get(c)!==l.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}}return n}class kE extends cr{constructor(t){const n=t.fields.map(i=>Lt({type:i.type})),r=Lt({type:new Xn(t.fields),nullCount:0,children:n});super(t,r)}}let Qo=class os{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMessage(t,n){return(n||new os).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMessage(t,n){return t.setPosition(t.position()+ae),(n||new os).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Je.V1}headerType(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):Zt.NONE}header(t){const n=this.bb.__offset(this.bb_pos,8);return n?this.bb.__union(t,this.bb_pos+n):null}bodyLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new cn).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startMessage(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,Je.V1)}static addHeaderType(t,n){t.addFieldInt8(1,n,Zt.NONE)}static addHeader(t,n){t.addFieldOffset(2,n,0)}static addBodyLength(t,n){t.addFieldInt64(3,n,BigInt("0"))}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endMessage(t){return t.endObject()}static finishMessageBuffer(t,n){t.finish(n)}static finishSizePrefixedMessageBuffer(t,n){t.finish(n,void 0,!0)}static createMessage(t,n,r,i,s,o){return os.startMessage(t),os.addVersion(t,n),os.addHeaderType(t,r),os.addHeader(t,i),os.addBodyLength(t,s),os.addCustomMetadata(t,o),os.endMessage(t)}};class sgt extends Ft{visit(t,n){return t==null||n==null?void 0:super.visit(t,n)}visitNull(t,n){return YN.startNull(n),YN.endNull(n)}visitInt(t,n){return Nr.startInt(n),Nr.addBitWidth(n,t.bitWidth),Nr.addIsSigned(n,t.isSigned),Nr.endInt(n)}visitFloat(t,n){return vs.startFloatingPoint(n),vs.addPrecision(n,t.precision),vs.endFloatingPoint(n)}visitBinary(t,n){return UN.startBinary(n),UN.endBinary(n)}visitLargeBinary(t,n){return zN.startLargeBinary(n),zN.endLargeBinary(n)}visitBool(t,n){return PN.startBool(n),PN.endBool(n)}visitUtf8(t,n){return qN.startUtf8(n),qN.endUtf8(n)}visitLargeUtf8(t,n){return jN.startLargeUtf8(n),jN.endLargeUtf8(n)}visitDecimal(t,n){return nu.startDecimal(n),nu.addScale(n,t.scale),nu.addPrecision(n,t.precision),nu.addBitWidth(n,t.bitWidth),nu.endDecimal(n)}visitDate(t,n){return gm.startDate(n),gm.addUnit(n,t.unit),gm.endDate(n)}visitTime(t,n){return ei.startTime(n),ei.addUnit(n,t.unit),ei.addBitWidth(n,t.bitWidth),ei.endTime(n)}visitTimestamp(t,n){const r=t.timezone&&n.createString(t.timezone)||void 0;return ni.startTimestamp(n),ni.addUnit(n,t.unit),r!==void 0&&ni.addTimezone(n,r),ni.endTimestamp(n)}visitInterval(t,n){return ws.startInterval(n),ws.addUnit(n,t.unit),ws.endInterval(n)}visitDuration(t,n){return bm.startDuration(n),bm.addUnit(n,t.unit),bm.endDuration(n)}visitList(t,n){return VN.startList(n),VN.endList(n)}visitStruct(t,n){return zl.startStruct_(n),zl.endStruct_(n)}visitUnion(t,n){lr.startTypeIdsVector(n,t.typeIds.length);const r=lr.createTypeIdsVector(n,t.typeIds);return lr.startUnion(n),lr.addMode(n,t.mode),lr.addTypeIds(n,r),lr.endUnion(n)}visitDictionary(t,n){const r=this.visit(t.indices,n);return fo.startDictionaryEncoding(n),fo.addId(n,BigInt(t.id)),fo.addIsOrdered(n,t.isOrdered),r!==void 0&&fo.addIndexType(n,r),fo.endDictionaryEncoding(n)}visitFixedSizeBinary(t,n){return vm.startFixedSizeBinary(n),vm.addByteWidth(n,t.byteWidth),vm.endFixedSizeBinary(n)}visitFixedSizeList(t,n){return wm.startFixedSizeList(n),wm.addListSize(n,t.listSize),wm.endFixedSizeList(n)}visitMap(t,n){return _m.startMap(n),_m.addKeysSorted(n,t.keysSorted),_m.endMap(n)}}const B_=new sgt;function ogt(e,t=new Map){return new oe(lgt(e,t),Im(e.metadata),t)}function X9(e){return new jr(e.count,Q9(e.columns),K9(e.columns))}function agt(e){return new Rs(X9(e.data),e.id,e.isDelta)}function lgt(e,t){return(e.fields||[]).filter(Boolean).map(n=>Ee.fromJSON(n,t))}function t4(e,t){return(e.children||[]).filter(Boolean).map(n=>Ee.fromJSON(n,t))}function Q9(e){return(e||[]).reduce((t,n)=>[...t,new Ga(n.count,cgt(n.VALIDITY)),...Q9(n.children)],[])}function K9(e,t=[]){for(let n=-1,r=(e||[]).length;++n<r;){const i=e[n];i.VALIDITY&&t.push(new Es(t.length,i.VALIDITY.length)),i.TYPE_ID&&t.push(new Es(t.length,i.TYPE_ID.length)),i.OFFSET&&t.push(new Es(t.length,i.OFFSET.length)),i.DATA&&t.push(new Es(t.length,i.DATA.length)),t=K9(i.children,t)}return t}function cgt(e){return(e||[]).reduce((t,n)=>t+ +(n===0),0)}function ugt(e,t){let n,r,i,s,o,a;return!t||!(s=e.dictionary)?(o=n4(e,t4(e,t)),i=new Ee(e.name,o,e.nullable,Im(e.metadata))):t.has(n=s.id)?(r=(r=s.indexType)?e4(r):new Dp,a=new Cf(t.get(n),r,n,s.isOrdered),i=new Ee(e.name,a,e.nullable,Im(e.metadata))):(r=(r=s.indexType)?e4(r):new Dp,t.set(n,o=n4(e,t4(e,t))),a=new Cf(o,r,n,s.isOrdered),i=new Ee(e.name,a,e.nullable,Im(e.metadata))),i||null}function Im(e=[]){return new Map(e.map(({key:t,value:n})=>[t,n]))}function e4(e){return new qa(e.isSigned,e.bitWidth)}function n4(e,t){const n=e.type.name;switch(n){case"NONE":return new Ya;case"null":return new Ya;case"binary":return new q1;case"largebinary":return new W1;case"utf8":return new H1;case"largeutf8":return new G1;case"bool":return new X1;case"list":return new eb((t||[])[0]);case"struct":return new Xn(t||[]);case"struct_":return new Xn(t||[])}switch(n){case"int":{const r=e.type;return new qa(r.isSigned,r.bitWidth)}case"floatingpoint":{const r=e.type;return new Op(Qe[r.precision])}case"decimal":{const r=e.type;return new Q1(r.scale,r.precision,r.bitWidth)}case"date":{const r=e.type;return new K1(er[r.unit])}case"time":{const r=e.type;return new Bp(rt[r.unit],r.bitWidth)}case"timestamp":{const r=e.type;return new Z1(rt[r.unit],r.timezone)}case"interval":{const r=e.type;return new J1(Un[r.unit])}case"duration":{const r=e.type;return new tb(rt[r.unit])}case"union":{const r=e.type,[i,...s]=(r.mode+"").toLowerCase(),o=i.toUpperCase()+s.join("");return new nb(on[o],r.typeIds||[],t||[])}case"fixedsizebinary":{const r=e.type;return new rb(r.byteWidth)}case"fixedsizelist":{const r=e.type;return new ib(r.listSize,(t||[])[0])}case"map":{const r=e.type;return new sb((t||[])[0],r.keysSorted)}}throw new Error(`Unrecognized type: "${n}"`)}var fgt=jO,dgt=gf;class Qn{static fromJSON(t,n){const r=new Qn(0,Je.V5,n);return r._createHeader=hgt(t,n),r}static decode(t){t=new dgt(jt(t));const n=Qo.getRootAsMessage(t),r=n.bodyLength(),i=n.version(),s=n.headerType(),o=new Qn(r,i,s);return o._createHeader=pgt(n,s),o}static encode(t){const n=new fgt;let r=-1;return t.isSchema()?r=oe.encode(n,t.header()):t.isRecordBatch()?r=jr.encode(n,t.header()):t.isDictionaryBatch()&&(r=Rs.encode(n,t.header())),Qo.startMessage(n),Qo.addVersion(n,Je.V5),Qo.addHeader(n,r),Qo.addHeaderType(n,t.headerType),Qo.addBodyLength(n,BigInt(t.bodyLength)),Qo.finishMessageBuffer(n,Qo.endMessage(n)),n.asUint8Array()}static from(t,n=0){if(t instanceof oe)return new Qn(0,Je.V5,Zt.Schema,t);if(t instanceof jr)return new Qn(n,Je.V5,Zt.RecordBatch,t);if(t instanceof Rs)return new Qn(n,Je.V5,Zt.DictionaryBatch,t);throw new Error(`Unrecognized Message header: ${t}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===Zt.Schema}isRecordBatch(){return this.headerType===Zt.RecordBatch}isDictionaryBatch(){return this.headerType===Zt.DictionaryBatch}constructor(t,n,r,i){this._version=n,this._headerType=r,this.body=new Uint8Array(0),i&&(this._createHeader=()=>i),this._bodyLength=Mn(t)}}class jr{get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}constructor(t,n,r){this._nodes=n,this._buffers=r,this._length=Mn(t)}}class Rs{get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}constructor(t,n,r=!1){this._data=t,this._isDelta=r,this._id=Mn(n)}}class Es{constructor(t,n){this.offset=Mn(t),this.length=Mn(n)}}class Ga{constructor(t,n){this.length=Mn(t),this.nullCount=Mn(n)}}function hgt(e,t){return()=>{switch(t){case Zt.Schema:return oe.fromJSON(e);case Zt.RecordBatch:return jr.fromJSON(e);case Zt.DictionaryBatch:return Rs.fromJSON(e)}throw new Error(`Unrecognized Message type: { name: ${Zt[t]}, type: ${t} }`)}}function pgt(e,t){return()=>{switch(t){case Zt.Schema:return oe.decode(e.header(new us),new Map,e.version());case Zt.RecordBatch:return jr.decode(e.header(new io),e.version());case Zt.DictionaryBatch:return Rs.decode(e.header(new tu),e.version())}throw new Error(`Unrecognized Message type: { name: ${Zt[t]}, type: ${t} }`)}}Ee.encode=Tgt;Ee.decode=xgt;Ee.fromJSON=ugt;oe.encode=Igt;oe.decode=ygt;oe.fromJSON=ogt;jr.encode=Egt;jr.decode=mgt;jr.fromJSON=X9;Rs.encode=Agt;Rs.decode=ggt;Rs.fromJSON=agt;Ga.encode=Mgt;Ga.decode=vgt;Es.encode=$gt;Es.decode=bgt;function ygt(e,t=new Map,n=Je.V5){const r=Sgt(e,t);return new oe(r,Tm(e),t,n)}function mgt(e,t=Je.V5){if(e.compression()!==null)throw new Error("Record batch compression not implemented");return new jr(e.length(),wgt(e),_gt(e,t))}function ggt(e,t=Je.V5){return new Rs(jr.decode(e.data(),t),e.id(),e.isDelta())}function bgt(e){return new Es(e.offset(),e.length())}function vgt(e){return new Ga(e.length(),e.nullCount())}function wgt(e){const t=[];for(let n,r=-1,i=-1,s=e.nodesLength();++r<s;)(n=e.nodes(r))&&(t[++i]=Ga.decode(n));return t}function _gt(e,t){const n=[];for(let r,i=-1,s=-1,o=e.buffersLength();++i<o;)(r=e.buffers(i))&&(t<Je.V4&&(r.bb_pos+=8*(i+1)),n[++s]=Es.decode(r));return n}function Sgt(e,t){const n=[];for(let r,i=-1,s=-1,o=e.fieldsLength();++i<o;)(r=e.fields(i))&&(n[++s]=Ee.decode(r,t));return n}function r4(e,t){const n=[];for(let r,i=-1,s=-1,o=e.childrenLength();++i<o;)(r=e.children(i))&&(n[++s]=Ee.decode(r,t));return n}function xgt(e,t){let n,r,i,s,o,a;return!t||!(a=e.dictionary())?(i=s4(e,r4(e,t)),r=new Ee(e.name(),i,e.nullable(),Tm(e))):t.has(n=Mn(a.id()))?(s=(s=a.indexType())?i4(s):new Dp,o=new Cf(t.get(n),s,n,a.isOrdered()),r=new Ee(e.name(),o,e.nullable(),Tm(e))):(s=(s=a.indexType())?i4(s):new Dp,t.set(n,i=s4(e,r4(e,t))),o=new Cf(i,s,n,a.isOrdered()),r=new Ee(e.name(),o,e.nullable(),Tm(e))),r||null}function Tm(e){const t=new Map;if(e)for(let n,r,i=-1,s=Math.trunc(e.customMetadataLength());++i<s;)(n=e.customMetadata(i))&&(r=n.key())!=null&&t.set(r,n.value());return t}function i4(e){return new qa(e.isSigned(),e.bitWidth())}function s4(e,t){const n=e.typeType();switch(n){case _e.NONE:return new Ya;case _e.Null:return new Ya;case _e.Binary:return new q1;case _e.LargeBinary:return new W1;case _e.Utf8:return new H1;case _e.LargeUtf8:return new G1;case _e.Bool:return new X1;case _e.List:return new eb((t||[])[0]);case _e.Struct_:return new Xn(t||[])}switch(n){case _e.Int:{const r=e.type(new Nr);return new qa(r.isSigned(),r.bitWidth())}case _e.FloatingPoint:{const r=e.type(new vs);return new Op(r.precision())}case _e.Decimal:{const r=e.type(new nu);return new Q1(r.scale(),r.precision(),r.bitWidth())}case _e.Date:{const r=e.type(new gm);return new K1(r.unit())}case _e.Time:{const r=e.type(new ei);return new Bp(r.unit(),r.bitWidth())}case _e.Timestamp:{const r=e.type(new ni);return new Z1(r.unit(),r.timezone())}case _e.Interval:{const r=e.type(new ws);return new J1(r.unit())}case _e.Duration:{const r=e.type(new bm);return new tb(r.unit())}case _e.Union:{const r=e.type(new lr);return new nb(r.mode(),r.typeIdsArray()||[],t||[])}case _e.FixedSizeBinary:{const r=e.type(new vm);return new rb(r.byteWidth())}case _e.FixedSizeList:{const r=e.type(new wm);return new ib(r.listSize(),(t||[])[0])}case _e.Map:{const r=e.type(new _m);return new sb((t||[])[0],r.keysSorted())}}throw new Error(`Unrecognized type: "${_e[n]}" (${n})`)}function Igt(e,t){const n=t.fields.map(s=>Ee.encode(e,s));us.startFieldsVector(e,n.length);const r=us.createFieldsVector(e,n),i=t.metadata&&t.metadata.size>0?us.createCustomMetadataVector(e,[...t.metadata].map(([s,o])=>{const a=e.createString(`${s}`),l=e.createString(`${o}`);return cn.startKeyValue(e),cn.addKey(e,a),cn.addValue(e,l),cn.endKeyValue(e)})):-1;return us.startSchema(e),us.addFields(e,r),us.addEndianness(e,Ngt?Rf.Little:Rf.Big),i!==-1&&us.addCustomMetadata(e,i),us.endSchema(e)}function Tgt(e,t){let n=-1,r=-1,i=-1;const s=t.type;let o=t.typeId;ot.isDictionary(s)?(o=s.dictionary.typeId,i=B_.visit(s,e),r=B_.visit(s.dictionary,e)):r=B_.visit(s,e);const a=(s.children||[]).map(u=>Ee.encode(e,u)),l=Qr.createChildrenVector(e,a),c=t.metadata&&t.metadata.size>0?Qr.createCustomMetadataVector(e,[...t.metadata].map(([u,f])=>{const d=e.createString(`${u}`),h=e.createString(`${f}`);return cn.startKeyValue(e),cn.addKey(e,d),cn.addValue(e,h),cn.endKeyValue(e)})):-1;return t.name&&(n=e.createString(t.name)),Qr.startField(e),Qr.addType(e,r),Qr.addTypeType(e,o),Qr.addChildren(e,l),Qr.addNullable(e,!!t.nullable),n!==-1&&Qr.addName(e,n),i!==-1&&Qr.addDictionary(e,i),c!==-1&&Qr.addCustomMetadata(e,c),Qr.endField(e)}function Egt(e,t){const n=t.nodes||[],r=t.buffers||[];io.startNodesVector(e,n.length);for(const o of n.slice().reverse())Ga.encode(e,o);const i=e.endVector();io.startBuffersVector(e,r.length);for(const o of r.slice().reverse())Es.encode(e,o);const s=e.endVector();return io.startRecordBatch(e),io.addLength(e,BigInt(t.length)),io.addNodes(e,i),io.addBuffers(e,s),io.endRecordBatch(e)}function Agt(e,t){const n=jr.encode(e,t.data);return tu.startDictionaryBatch(e),tu.addId(e,BigInt(t.id)),tu.addIsDelta(e,t.isDelta),tu.addData(e,n),tu.endDictionaryBatch(e)}function Mgt(e,t){return mP.createFieldNode(e,BigInt(t.length),BigInt(t.nullCount))}function $gt(e,t){return yP.createBuffer(e,BigInt(t.offset),BigInt(t.length))}const Ngt=(()=>{const e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),new Int16Array(e)[0]===256})(),DE=e=>`Expected ${Zt[e]} Message in stream, but was null or length 0.`,OE=e=>`Header pointer of flatbuffer-encoded ${Zt[e]} Message is null or length 0.`,Z9=(e,t)=>`Expected to read ${e} metadata bytes, but only read ${t}.`,J9=(e,t)=>`Expected to read ${e} bytes for message body, but only read ${t}.`;class tz{constructor(t){this.source=t instanceof fb?t:new fb(t)}[Symbol.iterator](){return this}next(){let t;return(t=this.readMetadataLength()).done||t.value===-1&&(t=this.readMetadataLength()).done||(t=this.readMetadata(t.value)).done?Ue:t}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}readMessage(t){let n;if((n=this.next()).done)return null;if(t!=null&&n.value.headerType!==t)throw new Error(DE(t));return n.value}readMessageBody(t){if(t<=0)return new Uint8Array(0);const n=jt(this.source.read(t));if(n.byteLength<t)throw new Error(J9(t,n.byteLength));return n.byteOffset%8===0&&n.byteOffset+n.byteLength<=n.buffer.byteLength?n:n.slice()}readSchema(t=!1){const n=Zt.Schema,r=this.readMessage(n),i=r==null?void 0:r.header();if(t&&!i)throw new Error(OE(n));return i}readMetadataLength(){const t=this.source.read(Hv),n=t&&new gf(t),r=(n==null?void 0:n.readInt32(0))||0;return{done:r===0,value:r}}readMetadata(t){const n=this.source.read(t);if(!n)return Ue;if(n.byteLength<t)throw new Error(Z9(t,n.byteLength));return{done:!1,value:Qn.decode(n)}}}class kgt{constructor(t,n){this.source=t instanceof Uf?t:uP(t)?new db(t,n):new Uf(t)}[Symbol.asyncIterator](){return this}next(){return W(this,void 0,void 0,function*(){let t;return(t=yield this.readMetadataLength()).done||t.value===-1&&(t=yield this.readMetadataLength()).done||(t=yield this.readMetadata(t.value)).done?Ue:t})}throw(t){return W(this,void 0,void 0,function*(){return yield this.source.throw(t)})}return(t){return W(this,void 0,void 0,function*(){return yield this.source.return(t)})}readMessage(t){return W(this,void 0,void 0,function*(){let n;if((n=yield this.next()).done)return null;if(t!=null&&n.value.headerType!==t)throw new Error(DE(t));return n.value})}readMessageBody(t){return W(this,void 0,void 0,function*(){if(t<=0)return new Uint8Array(0);const n=jt(yield this.source.read(t));if(n.byteLength<t)throw new Error(J9(t,n.byteLength));return n.byteOffset%8===0&&n.byteOffset+n.byteLength<=n.buffer.byteLength?n:n.slice()})}readSchema(t=!1){return W(this,void 0,void 0,function*(){const n=Zt.Schema,r=yield this.readMessage(n),i=r==null?void 0:r.header();if(t&&!i)throw new Error(OE(n));return i})}readMetadataLength(){return W(this,void 0,void 0,function*(){const t=yield this.source.read(Hv),n=t&&new gf(t),r=(n==null?void 0:n.readInt32(0))||0;return{done:r===0,value:r}})}readMetadata(t){return W(this,void 0,void 0,function*(){const n=yield this.source.read(t);if(!n)return Ue;if(n.byteLength<t)throw new Error(Z9(t,n.byteLength));return{done:!1,value:Qn.decode(n)}})}}class Dgt extends tz{constructor(t){super(new Uint8Array(0)),this._schema=!1,this._body=[],this._batchIndex=0,this._dictionaryIndex=0,this._json=t instanceof KN?t:new KN(t)}next(){const{_json:t}=this;if(!this._schema)return this._schema=!0,{done:!1,value:Qn.fromJSON(t.schema,Zt.Schema)};if(this._dictionaryIndex<t.dictionaries.length){const n=t.dictionaries[this._dictionaryIndex++];return this._body=n.data.columns,{done:!1,value:Qn.fromJSON(n,Zt.DictionaryBatch)}}if(this._batchIndex<t.batches.length){const n=t.batches[this._batchIndex++];return this._body=n.columns,{done:!1,value:Qn.fromJSON(n,Zt.RecordBatch)}}return this._body=[],Ue}readMessageBody(t){return n(this._body);function n(r){return(r||[]).reduce((i,s)=>[...i,...s.VALIDITY&&[s.VALIDITY]||[],...s.TYPE_ID&&[s.TYPE_ID]||[],...s.OFFSET&&[s.OFFSET]||[],...s.DATA&&[s.DATA]||[],...n(s.children)],[])}}readMessage(t){let n;if((n=this.next()).done)return null;if(t!=null&&n.value.headerType!==t)throw new Error(DE(t));return n.value}readSchema(){const t=Zt.Schema,n=this.readMessage(t),r=n==null?void 0:n.header();if(!n||!r)throw new Error(OE(t));return r}}const Hv=4,Dx="ARROW1",Lp=new Uint8Array(Dx.length);for(let e=0;e<Dx.length;e+=1)Lp[e]=Dx.codePointAt(e);function BE(e,t=0){for(let n=-1,r=Lp.length;++n<r;)if(Lp[n]!==e[t+n])return!1;return!0}const Ly=Lp.length,ez=Ly+Hv,Ogt=Ly*2+Hv;class pi extends EE{constructor(t){super(),this._impl=t}get closed(){return this._impl.closed}get schema(){return this._impl.schema}get autoDestroy(){return this._impl.autoDestroy}get dictionaries(){return this._impl.dictionaries}get numDictionaries(){return this._impl.numDictionaries}get numRecordBatches(){return this._impl.numRecordBatches}get footer(){return this._impl.isFile()?this._impl.footer:null}isSync(){return this._impl.isSync()}isAsync(){return this._impl.isAsync()}isFile(){return this._impl.isFile()}isStream(){return this._impl.isStream()}next(){return this._impl.next()}throw(t){return this._impl.throw(t)}return(t){return this._impl.return(t)}cancel(){return this._impl.cancel()}reset(t){return this._impl.reset(t),this._DOMStream=void 0,this._nodeStream=void 0,this}open(t){const n=this._impl.open(t);return bc(n)?n.then(()=>this):this}readRecordBatch(t){return this._impl.isFile()?this._impl.readRecordBatch(t):null}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}toDOMStream(){return Zr.toDOMStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this})}toNodeStream(){return Zr.toNodeStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this},{objectMode:!0})}static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,n){throw new Error('"throughDOM" not available in this environment')}static from(t){return t instanceof pi?t:Ix(t)?Rgt(t):uP(t)?Pgt(t):bc(t)?W(this,void 0,void 0,function*(){return yield pi.from(yield t)}):fP(t)||pE(t)||dP(t)||fd(t)?Ugt(new Uf(t)):Cgt(new fb(t))}static readAll(t){return t instanceof pi?t.isSync()?o4(t):a4(t):Ix(t)||ArrayBuffer.isView(t)||Dy(t)||cP(t)?o4(t):a4(t)}}class hb extends pi{constructor(t){super(t),this._impl=t}readAll(){return[...this]}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return sn(this,arguments,function*(){yield K(yield*Ta(Lr(this[Symbol.iterator]())))})}}class pb extends pi{constructor(t){super(t),this._impl=t}readAll(){var t,n,r,i;return W(this,void 0,void 0,function*(){const s=new Array;try{for(var o=!0,a=Lr(this),l;l=yield a.next(),t=l.done,!t;o=!0){i=l.value,o=!1;const c=i;s.push(c)}}catch(c){n={error:c}}finally{try{!o&&!t&&(r=a.return)&&(yield r.call(a))}finally{if(n)throw n.error}}return s})}[Symbol.iterator](){throw new Error("AsyncRecordBatchStreamReader is not Iterable")}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}}class nz extends hb{constructor(t){super(t),this._impl=t}}class Bgt extends pb{constructor(t){super(t),this._impl=t}}class rz{get numDictionaries(){return this._dictionaryIndex}get numRecordBatches(){return this._recordBatchIndex}constructor(t=new Map){this.closed=!1,this.autoDestroy=!0,this._dictionaryIndex=0,this._recordBatchIndex=0,this.dictionaries=t}isSync(){return!1}isAsync(){return!1}isFile(){return!1}isStream(){return!1}reset(t){return this._dictionaryIndex=0,this._recordBatchIndex=0,this.schema=t,this.dictionaries=new Map,this}_loadRecordBatch(t,n){const r=this._loadVectors(t,n,this.schema.fields),i=Lt({type:new Xn(this.schema.fields),length:t.length,children:r});return new cr(this.schema,i)}_loadDictionaryBatch(t,n){const{id:r,isDelta:i}=t,{dictionaries:s,schema:o}=this,a=s.get(r);if(i||!a){const l=o.dictionaries.get(r),c=this._loadVectors(t.data,n,[l]);return(a&&i?a.concat(new se(c)):new se(c)).memoize()}return a.memoize()}_loadVectors(t,n,r){return new q9(n,t.nodes,t.buffers,this.dictionaries,this.schema.metadataVersion).visitMany(r)}}class yb extends rz{constructor(t,n){super(n),this._reader=Ix(t)?new Dgt(this._handle=t):new tz(this._handle=t)}isSync(){return!0}isStream(){return!0}[Symbol.iterator](){return this}cancel(){!this.closed&&(this.closed=!0)&&(this.reset()._reader.return(),this._reader=null,this.dictionaries=null)}open(t){return this.closed||(this.autoDestroy=sz(this,t),this.schema||(this.schema=this._reader.readSchema())||this.cancel()),this}throw(t){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.throw(t):Ue}return(t){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.return(t):Ue}next(){if(this.closed)return Ue;let t;const{_reader:n}=this;for(;t=this._readNextMessageAndValidate();)if(t.isSchema())this.reset(t.header());else if(t.isRecordBatch()){this._recordBatchIndex++;const r=t.header(),i=n.readMessageBody(t.bodyLength);return{done:!1,value:this._loadRecordBatch(r,i)}}else if(t.isDictionaryBatch()){this._dictionaryIndex++;const r=t.header(),i=n.readMessageBody(t.bodyLength),s=this._loadDictionaryBatch(r,i);this.dictionaries.set(r.id,s)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new kE(this.schema)}):this.return()}_readNextMessageAndValidate(t){return this._reader.readMessage(t)}}class mb extends rz{constructor(t,n){super(n),this._reader=new kgt(this._handle=t)}isAsync(){return!0}isStream(){return!0}[Symbol.asyncIterator](){return this}cancel(){return W(this,void 0,void 0,function*(){!this.closed&&(this.closed=!0)&&(yield this.reset()._reader.return(),this._reader=null,this.dictionaries=null)})}open(t){return W(this,void 0,void 0,function*(){return this.closed||(this.autoDestroy=sz(this,t),this.schema||(this.schema=yield this._reader.readSchema())||(yield this.cancel())),this})}throw(t){return W(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.throw(t):Ue})}return(t){return W(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.return(t):Ue})}next(){return W(this,void 0,void 0,function*(){if(this.closed)return Ue;let t;const{_reader:n}=this;for(;t=yield this._readNextMessageAndValidate();)if(t.isSchema())yield this.reset(t.header());else if(t.isRecordBatch()){this._recordBatchIndex++;const r=t.header(),i=yield n.readMessageBody(t.bodyLength);return{done:!1,value:this._loadRecordBatch(r,i)}}else if(t.isDictionaryBatch()){this._dictionaryIndex++;const r=t.header(),i=yield n.readMessageBody(t.bodyLength),s=this._loadDictionaryBatch(r,i);this.dictionaries.set(r.id,s)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new kE(this.schema)}):yield this.return()})}_readNextMessageAndValidate(t){return W(this,void 0,void 0,function*(){return yield this._reader.readMessage(t)})}}class iz extends yb{get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}constructor(t,n){super(t instanceof ZN?t:new ZN(t),n)}isSync(){return!0}isFile(){return!0}open(t){if(!this.closed&&!this._footer){this.schema=(this._footer=this._readFooter()).schema;for(const n of this._footer.dictionaryBatches())n&&this._readDictionaryBatch(this._dictionaryIndex++)}return super.open(t)}readRecordBatch(t){var n;if(this.closed)return null;this._footer||this.open();const r=(n=this._footer)===null||n===void 0?void 0:n.getRecordBatch(t);if(r&&this._handle.seek(r.offset)){const i=this._reader.readMessage(Zt.RecordBatch);if(i!=null&&i.isRecordBatch()){const s=i.header(),o=this._reader.readMessageBody(i.bodyLength);return this._loadRecordBatch(s,o)}}return null}_readDictionaryBatch(t){var n;const r=(n=this._footer)===null||n===void 0?void 0:n.getDictionaryBatch(t);if(r&&this._handle.seek(r.offset)){const i=this._reader.readMessage(Zt.DictionaryBatch);if(i!=null&&i.isDictionaryBatch()){const s=i.header(),o=this._reader.readMessageBody(i.bodyLength),a=this._loadDictionaryBatch(s,o);this.dictionaries.set(s.id,a)}}}_readFooter(){const{_handle:t}=this,n=t.size-ez,r=t.readInt32(n),i=t.readAt(n-r,r);return Fp.decode(i)}_readNextMessageAndValidate(t){var n;if(this._footer||this.open(),this._footer&&this._recordBatchIndex<this.numRecordBatches){const r=(n=this._footer)===null||n===void 0?void 0:n.getRecordBatch(this._recordBatchIndex);if(r&&this._handle.seek(r.offset))return this._reader.readMessage(t)}return null}}class Fgt extends mb{get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}constructor(t,...n){const r=typeof n[0]!="number"?n.shift():void 0,i=n[0]instanceof Map?n.shift():void 0;super(t instanceof db?t:new db(t,r),i)}isFile(){return!0}isAsync(){return!0}open(t){const n=Object.create(null,{open:{get:()=>super.open}});return W(this,void 0,void 0,function*(){if(!this.closed&&!this._footer){this.schema=(this._footer=yield this._readFooter()).schema;for(const r of this._footer.dictionaryBatches())r&&(yield this._readDictionaryBatch(this._dictionaryIndex++))}return yield n.open.call(this,t)})}readRecordBatch(t){var n;return W(this,void 0,void 0,function*(){if(this.closed)return null;this._footer||(yield this.open());const r=(n=this._footer)===null||n===void 0?void 0:n.getRecordBatch(t);if(r&&(yield this._handle.seek(r.offset))){const i=yield this._reader.readMessage(Zt.RecordBatch);if(i!=null&&i.isRecordBatch()){const s=i.header(),o=yield this._reader.readMessageBody(i.bodyLength);return this._loadRecordBatch(s,o)}}return null})}_readDictionaryBatch(t){var n;return W(this,void 0,void 0,function*(){const r=(n=this._footer)===null||n===void 0?void 0:n.getDictionaryBatch(t);if(r&&(yield this._handle.seek(r.offset))){const i=yield this._reader.readMessage(Zt.DictionaryBatch);if(i!=null&&i.isDictionaryBatch()){const s=i.header(),o=yield this._reader.readMessageBody(i.bodyLength),a=this._loadDictionaryBatch(s,o);this.dictionaries.set(s.id,a)}}})}_readFooter(){return W(this,void 0,void 0,function*(){const{_handle:t}=this;t._pending&&(yield t._pending);const n=t.size-ez,r=yield t.readInt32(n),i=yield t.readAt(n-r,r);return Fp.decode(i)})}_readNextMessageAndValidate(t){return W(this,void 0,void 0,function*(){if(this._footer||(yield this.open()),this._footer&&this._recordBatchIndex<this.numRecordBatches){const n=this._footer.getRecordBatch(this._recordBatchIndex);if(n&&(yield this._handle.seek(n.offset)))return yield this._reader.readMessage(t)}return null})}}class Lgt extends yb{constructor(t,n){super(t,n)}_loadVectors(t,n,r){return new Xmt(n,t.nodes,t.buffers,this.dictionaries,this.schema.metadataVersion).visitMany(r)}}function sz(e,t){return t&&typeof t.autoDestroy=="boolean"?t.autoDestroy:e.autoDestroy}function*o4(e){const t=pi.from(e);try{if(!t.open({autoDestroy:!1}).closed)do yield t;while(!t.reset().open().closed)}finally{t.cancel()}}function a4(e){return sn(this,arguments,function*(){const n=yield K(pi.from(e));try{if(!(yield K(n.open({autoDestroy:!1}))).closed)do yield yield K(n);while(!(yield K(n.reset().open())).closed)}finally{yield K(n.cancel())}})}function Rgt(e){return new hb(new Lgt(e))}function Cgt(e){const t=e.peek(Ly+7&-8);return t&&t.byteLength>=4?BE(t)?new nz(new iz(e.read())):new hb(new yb(e)):new hb(new yb(function*(){}()))}function Ugt(e){return W(this,void 0,void 0,function*(){const t=yield e.peek(Ly+7&-8);return t&&t.byteLength>=4?BE(t)?new nz(new iz(yield e.read())):new pb(new mb(e)):new pb(new mb(function(){return sn(this,arguments,function*(){})}()))})}function Pgt(e){return W(this,void 0,void 0,function*(){const{size:t}=yield e.stat(),n=new db(e,t);return t>=Ogt&&BE(yield n.readAt(0,Ly+7&-8))?new Bgt(new Fgt(n)):new pb(new mb(n))})}class Ve extends Ft{static assemble(...t){const n=i=>i.flatMap(s=>Array.isArray(s)?n(s):s instanceof cr?s.data.children:s.data),r=new Ve;return r.visitMany(n(t)),r}constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}visit(t){if(t instanceof se)return this.visitMany(t.data),this;const{type:n}=t;if(!ot.isDictionary(n)){const{length:r}=t;if(r>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");if(ot.isUnion(n))this.nodes.push(new Ga(r,0));else{const{nullCount:i}=t;ot.isNull(n)||Ui.call(this,i<=0?new Uint8Array(0):ob(t.offset,r,t.nullBitmap)),this.nodes.push(new Ga(r,i))}}return super.visit(t)}visitNull(t){return this}visitDictionary(t){return this.visit(t.clone(t.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function Ui(e){const t=e.byteLength+7&-8;return this.buffers.push(e),this.bufferRegions.push(new Es(this._byteLength,t)),this._byteLength+=t,this}function zgt(e){var t;const{type:n,length:r,typeIds:i,valueOffsets:s}=e;if(Ui.call(this,i),n.mode===on.Sparse)return Ox.call(this,e);if(n.mode===on.Dense){if(e.offset<=0)return Ui.call(this,s),Ox.call(this,e);{const o=new Int32Array(r),a=Object.create(null),l=Object.create(null);for(let c,u,f=-1;++f<r;)(c=i[f])!==void 0&&((u=a[c])===void 0&&(u=a[c]=s[f]),o[f]=s[f]-u,l[c]=((t=l[c])!==null&&t!==void 0?t:0)+1);Ui.call(this,o),this.visitMany(e.children.map((c,u)=>{const f=n.typeIds[u],d=a[f],h=l[f];return c.slice(d,Math.min(r,h))}))}}return this}function jgt(e){let t;return e.nullCount>=e.length?Ui.call(this,new Uint8Array(0)):(t=e.values)instanceof Uint8Array?Ui.call(this,ob(e.offset,e.length,t)):Ui.call(this,ab(e.values))}function Wo(e){return Ui.call(this,e.values.subarray(0,e.length*e.stride))}function Gv(e){const{length:t,values:n,valueOffsets:r}=e,i=Mn(r[0]),s=Mn(r[t]),o=Math.min(s-i,n.byteLength-i);return Ui.call(this,pP(-i,t+1,r)),Ui.call(this,n.subarray(i,i+o)),this}function FE(e){const{length:t,valueOffsets:n}=e;if(n){const{[0]:r,[t]:i}=n;return Ui.call(this,pP(-r,t+1,n)),this.visit(e.children[0].slice(r,i-r))}return this.visit(e.children[0])}function Ox(e){return this.visitMany(e.type.children.map((t,n)=>e.children[n]).filter(Boolean))[0]}Ve.prototype.visitBool=jgt;Ve.prototype.visitInt=Wo;Ve.prototype.visitFloat=Wo;Ve.prototype.visitUtf8=Gv;Ve.prototype.visitLargeUtf8=Gv;Ve.prototype.visitBinary=Gv;Ve.prototype.visitLargeBinary=Gv;Ve.prototype.visitFixedSizeBinary=Wo;Ve.prototype.visitDate=Wo;Ve.prototype.visitTimestamp=Wo;Ve.prototype.visitTime=Wo;Ve.prototype.visitDecimal=Wo;Ve.prototype.visitList=FE;Ve.prototype.visitStruct=Ox;Ve.prototype.visitUnion=zgt;Ve.prototype.visitInterval=Wo;Ve.prototype.visitDuration=Wo;Ve.prototype.visitFixedSizeList=FE;Ve.prototype.visitMap=FE;class oz extends EE{static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,n){throw new Error('"throughDOM" not available in this environment')}constructor(t){super(),this._position=0,this._started=!1,this._sink=new xm,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,Ir(t)||(t={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy=typeof t.autoDestroy=="boolean"?t.autoDestroy:!0,this._writeLegacyIpcFormat=typeof t.writeLegacyIpcFormat=="boolean"?t.writeLegacyIpcFormat:!1}toString(t=!1){return this._sink.toString(t)}toUint8Array(t=!1){return this._sink.toUint8Array(t)}writeAll(t){return bc(t)?t.then(n=>this.writeAll(n)):fd(t)?UE(this,t):CE(this,t)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(t){return this._sink.toDOMStream(t)}toNodeStream(t){return this._sink.toNodeStream(t)}close(){return this.reset()._sink.close()}abort(t){return this.reset()._sink.abort(t)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(t=this._sink,n=null){return t===this._sink||t instanceof xm?this._sink=t:(this._sink=new xm,t&&y0t(t)?this.toDOMStream({type:"bytes"}).pipeTo(t):t&&m0t(t)&&this.toNodeStream({objectMode:!1}).pipe(t)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,(!n||!kx(n,this._schema))&&(n==null?(this._position=0,this._schema=null):(this._started=!0,this._schema=n,this._writeSchema(n))),this}write(t){let n=null;if(this._sink){if(t==null)return this.finish()&&void 0;if(t instanceof Ln&&!(n=t.schema))return this.finish()&&void 0;if(t instanceof cr&&!(n=t.schema))return this.finish()&&void 0}else throw new Error("RecordBatchWriter is closed");if(n&&!kx(n,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,n)}t instanceof cr?t instanceof kE||this._writeRecordBatch(t):t instanceof Ln?this.writeAll(t.batches):Dy(t)&&this.writeAll(t)}_writeMessage(t,n=8){const r=n-1,i=Qn.encode(t),s=i.byteLength,o=this._writeLegacyIpcFormat?4:8,a=s+o+r&~r,l=a-s-o;return t.headerType===Zt.RecordBatch?this._recordBatchBlocks.push(new Wa(a,t.bodyLength,this._position)):t.headerType===Zt.DictionaryBatch&&this._dictionaryBlocks.push(new Wa(a,t.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(a-o)),s>0&&this._write(i),this._writePadding(l)}_write(t){if(this._started){const n=jt(t);n&&n.byteLength>0&&(this._sink.write(n),this._position+=n.byteLength)}return this}_writeSchema(t){return this._writeMessage(Qn.from(t))}_writeFooter(t){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(Lp)}_writePadding(t){return t>0?this._write(new Uint8Array(t)):this}_writeRecordBatch(t){const{byteLength:n,nodes:r,bufferRegions:i,buffers:s}=Ve.assemble(t),o=new jr(t.numRows,r,i),a=Qn.from(o,n);return this._writeDictionaries(t)._writeMessage(a)._writeBodyBuffers(s)}_writeDictionaryBatch(t,n,r=!1){this._dictionaryDeltaOffsets.set(n,t.length+(this._dictionaryDeltaOffsets.get(n)||0));const{byteLength:i,nodes:s,bufferRegions:o,buffers:a}=Ve.assemble(new se([t])),l=new jr(t.length,s,o),c=new Rs(l,n,r),u=Qn.from(c,i);return this._writeMessage(u)._writeBodyBuffers(a)}_writeBodyBuffers(t){let n,r,i;for(let s=-1,o=t.length;++s<o;)(n=t[s])&&(r=n.byteLength)>0&&(this._write(n),(i=(r+7&-8)-r)>0&&this._writePadding(i));return this}_writeDictionaries(t){for(let[n,r]of t.dictionaries){let i=this._dictionaryDeltaOffsets.get(n)||0;if(i===0||(r=r==null?void 0:r.slice(i)).length>0)for(const s of r.data)this._writeDictionaryBatch(s,n,i>0),i+=s.length}return this}}class LE extends oz{static writeAll(t,n){const r=new LE(n);return bc(t)?t.then(i=>r.writeAll(i)):fd(t)?UE(r,t):CE(r,t)}}class RE extends oz{static writeAll(t){const n=new RE;return bc(t)?t.then(r=>n.writeAll(r)):fd(t)?UE(n,t):CE(n,t)}constructor(){super(),this._autoDestroy=!0}_writeSchema(t){return this._writeMagic()._writePadding(2)}_writeFooter(t){const n=Fp.encode(new Fp(t,Je.V5,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(t)._write(n)._write(Int32Array.of(n.byteLength))._writeMagic()}}function CE(e,t){let n=t;t instanceof Ln&&(n=t.batches,e.reset(void 0,t.schema));for(const r of n)e.write(r);return e.finish()}function UE(e,t){var n,r,i,s,o,a,l;return W(this,void 0,void 0,function*(){try{for(n=!0,r=Lr(t);i=yield r.next(),s=i.done,!s;n=!0){l=i.value,n=!1;const c=l;e.write(c)}}catch(c){o={error:c}}finally{try{!n&&!s&&(a=r.return)&&(yield a.call(r))}finally{if(o)throw o.error}}return e.finish()})}function Vgt(e,t="stream"){return(t==="stream"?LE:RE).writeAll(e).toUint8Array(!0)}var Qt,le=(Qt=class{constructor(){}static DECIMAL(t,n){return t===void 0&&n===void 0?Qt.default_DECIMAL:{name:"DECIMAL",width:t,scale:n}}static LIST(t){return{name:"LIST",valueType:t}}static MAP(t,n){return{name:"MAP",keyType:t,valueType:n}}static STRUCT(t){return{name:"STRUCT",entries:t}}static STRUCT_entry(t,n){return{key:t,valueType:n}}static UNION(t){return{name:"UNION",alternatives:t}}static UNION_alternative(t,n){return{tag:t,valueType:n}}static VARCHAR_withLength(t){return{name:"VARCHAR",length:t}}},te(Qt,"BIGINT",{name:"BIGINT"}),te(Qt,"BIT",{name:"BIT"}),te(Qt,"BOOLEAN",{name:"BOOLEAN"}),te(Qt,"BLOB",{name:"BLOB"}),te(Qt,"DATE",{name:"DATE"}),te(Qt,"DOUBLE",{name:"DOUBLE"}),te(Qt,"default_DECIMAL",{name:"DECIMAL"}),te(Qt,"ENUM",{name:"ENUM"}),te(Qt,"HUGEINT",{name:"HUGEINT"}),te(Qt,"INTEGER",{name:"INTEGER"}),te(Qt,"INTERVAL",{name:"INTERVAL"}),te(Qt,"REAL",{name:"REAL"}),te(Qt,"SMALLINT",{name:"SMALLINT"}),te(Qt,"SQLNULL",{name:"SQLNULL"}),te(Qt,"TIME",{name:"TIME"}),te(Qt,"TIMESTAMP",{name:"TIMESTAMP"}),te(Qt,"TIMESTAMP_S",{name:"TIMESTAMP_S"}),te(Qt,"TIMESTAMP_MS",{name:"TIMESTAMP_MS"}),te(Qt,"TIMESTAMP_NS",{name:"TIMESTAMP_NS"}),te(Qt,"TIMESTAMP_TZ",{name:"TIMESTAMP_TZ"}),te(Qt,"TINYINT",{name:"TINYINT"}),te(Qt,"UBIGINT",{name:"UBIGINT"}),te(Qt,"UINTEGER",{name:"UINTEGER"}),te(Qt,"USMALLINT",{name:"USMALLINT"}),te(Qt,"UTINYINT",{name:"UTINYINT"}),te(Qt,"UUID",{name:"UUID"}),te(Qt,"VARCHAR",{name:"VARCHAR"}),Qt),Ygt=Object.create,az=Object.defineProperty,qgt=Object.getOwnPropertyDescriptor,Wgt=Object.getOwnPropertyNames,Hgt=Object.getPrototypeOf,Ggt=Object.prototype.hasOwnProperty,Xgt=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Qgt=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of Wgt(t))!Ggt.call(e,i)&&i!==n&&az(e,i,{get:()=>t[i],enumerable:!(r=qgt(t,i))||r.enumerable});return e},Kgt=(e,t,n)=>(n=e!=null?Ygt(Hgt(e)):{},Qgt(t||!e||!e.__esModule?az(n,"default",{value:e,enumerable:!0}):n,e)),Zgt=Xgt((e,t)=>{t.exports=Worker}),Jgt=(e=>(e[e.UNDEFINED=0]="UNDEFINED",e[e.AUTOMATIC=1]="AUTOMATIC",e[e.READ_ONLY=2]="READ_ONLY",e[e.READ_WRITE=3]="READ_WRITE",e))(Jgt||{}),t1t=(e=>(e[e.IDENTIFIER=0]="IDENTIFIER",e[e.NUMERIC_CONSTANT=1]="NUMERIC_CONSTANT",e[e.STRING_CONSTANT=2]="STRING_CONSTANT",e[e.OPERATOR=3]="OPERATOR",e[e.KEYWORD=4]="KEYWORD",e[e.COMMENT=5]="COMMENT",e))(t1t||{}),Bx=(e=>(e[e.NONE=0]="NONE",e[e.DEBUG=1]="DEBUG",e[e.INFO=2]="INFO",e[e.WARNING=3]="WARNING",e[e.ERROR=4]="ERROR",e))(Bx||{}),e1t=(e=>(e[e.NONE=0]="NONE",e[e.CONNECT=1]="CONNECT",e[e.DISCONNECT=2]="DISCONNECT",e[e.OPEN=3]="OPEN",e[e.QUERY=4]="QUERY",e[e.INSTANTIATE=5]="INSTANTIATE",e))(e1t||{}),n1t=(e=>(e[e.NONE=0]="NONE",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR",e[e.START=3]="START",e[e.RUN=4]="RUN",e[e.CAPTURE=5]="CAPTURE",e))(n1t||{}),r1t=(e=>(e[e.NONE=0]="NONE",e[e.WEB_WORKER=1]="WEB_WORKER",e[e.NODE_WORKER=2]="NODE_WORKER",e[e.BINDINGS=3]="BINDINGS",e[e.ASYNC_DUCKDB=4]="ASYNC_DUCKDB",e))(r1t||{}),i1t=class{constructor(e=2){this.level=e}log(e){e.level>=this.level&&console.log(e)}},s1t=(e=>(e[e.SUCCESS=0]="SUCCESS",e))(s1t||{}),o1t=class{constructor(e,t){this._bindings=e,this._conn=t}get bindings(){return this._bindings}async close(){return this._bindings.disconnect(this._conn)}useUnsafe(e){return e(this._bindings,this._conn)}async query(e){this._bindings.logger.log({timestamp:new Date,level:2,origin:4,topic:4,event:4,value:e});let t=await this._bindings.runQuery(this._conn,e),n=pi.from(t);return console.assert(n.isSync(),"Reader is not sync"),console.assert(n.isFile(),"Reader is not file"),new Ln(n)}async send(e){this._bindings.logger.log({timestamp:new Date,level:2,origin:4,topic:4,event:4,value:e});let t=await this._bindings.startPendingQuery(this._conn,e);for(;t==null;)t=await this._bindings.pollPendingQuery(this._conn);let n=new lz(this._bindings,this._conn,t),r=await pi.from(n);return console.assert(r.isAsync()),console.assert(r.isStream()),r}async cancelSent(){return await this._bindings.cancelPendingQuery(this._conn)}async getTableNames(e){return await this._bindings.getTableNames(this._conn,e)}async prepare(e){let t=await this._bindings.createPrepared(this._conn,e);return new a1t(this._bindings,this._conn,t)}async insertArrowTable(e,t){let n=Vgt(e,"stream");await this.insertArrowFromIPCStream(n,t)}async insertArrowFromIPCStream(e,t){await this._bindings.insertArrowFromIPCStream(this._conn,e,t)}async insertCSVFromPath(e,t){await this._bindings.insertCSVFromPath(this._conn,e,t)}async insertJSONFromPath(e,t){await this._bindings.insertJSONFromPath(this._conn,e,t)}},lz=class{constructor(e,t,n){this.db=e,this.conn=t,this.header=n,this._first=!0,this._depleted=!1,this._inFlight=null}async next(){if(this._first)return this._first=!1,{done:!1,value:this.header};if(this._depleted)return{done:!0,value:null};let e;return this._inFlight!=null?(e=await this._inFlight,this._inFlight=null):e=await this.db.fetchQueryResults(this.conn),this._depleted=e.length==0,this._depleted||(this._inFlight=this.db.fetchQueryResults(this.conn)),{done:this._depleted,value:e}}[Symbol.asyncIterator](){return this}},a1t=class{constructor(e,t,n){this.bindings=e,this.connectionId=t,this.statementId=n}async close(){await this.bindings.closePrepared(this.connectionId,this.statementId)}async query(...e){let t=await this.bindings.runPrepared(this.connectionId,this.statementId,e),n=pi.from(t);return console.assert(n.isSync()),console.assert(n.isFile()),new Ln(n)}async send(...e){let t=await this.bindings.sendPrepared(this.connectionId,this.statementId,e),n=new lz(this.bindings,this.connectionId,t),r=await pi.from(n);return console.assert(r.isAsync()),console.assert(r.isStream()),r}},l1t=(e=>(e.CANCEL_PENDING_QUERY="CANCEL_PENDING_QUERY",e.CLOSE_PREPARED="CLOSE_PREPARED",e.COLLECT_FILE_STATISTICS="COLLECT_FILE_STATISTICS",e.CONNECT="CONNECT",e.COPY_FILE_TO_BUFFER="COPY_FILE_TO_BUFFER",e.COPY_FILE_TO_PATH="COPY_FILE_TO_PATH",e.CREATE_PREPARED="CREATE_PREPARED",e.DISCONNECT="DISCONNECT",e.DROP_FILE="DROP_FILE",e.DROP_FILES="DROP_FILES",e.EXPORT_FILE_STATISTICS="EXPORT_FILE_STATISTICS",e.FETCH_QUERY_RESULTS="FETCH_QUERY_RESULTS",e.FLUSH_FILES="FLUSH_FILES",e.GET_FEATURE_FLAGS="GET_FEATURE_FLAGS",e.GET_TABLE_NAMES="GET_TABLE_NAMES",e.GET_VERSION="GET_VERSION",e.GLOB_FILE_INFOS="GLOB_FILE_INFOS",e.INSERT_ARROW_FROM_IPC_STREAM="INSERT_ARROW_FROM_IPC_STREAM",e.INSERT_CSV_FROM_PATH="IMPORT_CSV_FROM_PATH",e.INSERT_JSON_FROM_PATH="IMPORT_JSON_FROM_PATH",e.INSTANTIATE="INSTANTIATE",e.OPEN="OPEN",e.PING="PING",e.POLL_PENDING_QUERY="POLL_PENDING_QUERY",e.REGISTER_FILE_BUFFER="REGISTER_FILE_BUFFER",e.REGISTER_FILE_HANDLE="REGISTER_FILE_HANDLE",e.REGISTER_FILE_URL="REGISTER_FILE_URL",e.RESET="RESET",e.RUN_PREPARED="RUN_PREPARED",e.RUN_QUERY="RUN_QUERY",e.SEND_PREPARED="SEND_PREPARED",e.START_PENDING_QUERY="START_PENDING_QUERY",e.TOKENIZE="TOKENIZE",e))(l1t||{}),c1t=(e=>(e.CONNECTION_INFO="CONNECTION_INFO",e.ERROR="ERROR",e.FEATURE_FLAGS="FEATURE_FLAGS",e.FILE_BUFFER="FILE_BUFFER",e.FILE_INFOS="FILE_INFOS",e.FILE_SIZE="FILE_SIZE",e.FILE_STATISTICS="FILE_STATISTICS",e.INSTANTIATE_PROGRESS="INSTANTIATE_PROGRESS",e.LOG="LOG",e.OK="OK",e.PREPARED_STATEMENT_ID="PREPARED_STATEMENT_ID",e.QUERY_PLAN="QUERY_PLAN",e.QUERY_RESULT="QUERY_RESULT",e.QUERY_RESULT_CHUNK="QUERY_RESULT_CHUNK",e.QUERY_RESULT_HEADER="QUERY_RESULT_HEADER",e.QUERY_RESULT_HEADER_OR_NULL="QUERY_RESULT_HEADER_OR_NULL",e.REGISTERED_FILE="REGISTERED_FILE",e.SCRIPT_TOKENS="SCRIPT_TOKENS",e.SUCCESS="SUCCESS",e.TABLE_NAMES="TABLE_NAMES",e.VERSION_STRING="VERSION_STRING",e))(c1t||{}),Gt=class{constructor(e,t){this.promiseResolver=()=>{},this.promiseRejecter=()=>{},this.type=e,this.data=t,this.promise=new Promise((n,r)=>{this.promiseResolver=n,this.promiseRejecter=r})}};function Em(e){switch(e.typeId){case $.Binary:return{sqlType:"binary"};case $.Bool:return{sqlType:"bool"};case $.Date:return{sqlType:"date"};case $.DateDay:return{sqlType:"date32[d]"};case $.DateMillisecond:return{sqlType:"date64[ms]"};case $.Decimal:{let t=e;return{sqlType:"decimal",precision:t.precision,scale:t.scale}}case $.Float:return{sqlType:"float"};case $.Float16:return{sqlType:"float16"};case $.Float32:return{sqlType:"float32"};case $.Float64:return{sqlType:"float64"};case $.Int:return{sqlType:"int32"};case $.Int16:return{sqlType:"int16"};case $.Int32:return{sqlType:"int32"};case $.Int64:return{sqlType:"int64"};case $.Uint16:return{sqlType:"uint16"};case $.Uint32:return{sqlType:"uint32"};case $.Uint64:return{sqlType:"uint64"};case $.Uint8:return{sqlType:"uint8"};case $.IntervalDayTime:return{sqlType:"interval[dt]"};case $.IntervalYearMonth:return{sqlType:"interval[m]"};case $.List:return{sqlType:"list",valueType:Em(e.valueType)};case $.FixedSizeBinary:return{sqlType:"fixedsizebinary",byteWidth:e.byteWidth};case $.Null:return{sqlType:"null"};case $.Utf8:return{sqlType:"utf8"};case $.Struct:return{sqlType:"struct",fields:e.children.map(t=>Fx(t.name,t.type))};case $.Map:{let t=e;return{sqlType:"map",keyType:Em(t.keyType),valueType:Em(t.valueType)}}case $.Time:return{sqlType:"time[s]"};case $.TimeMicrosecond:return{sqlType:"time[us]"};case $.TimeMillisecond:return{sqlType:"time[ms]"};case $.TimeNanosecond:return{sqlType:"time[ns]"};case $.TimeSecond:return{sqlType:"time[s]"};case $.Timestamp:return{sqlType:"timestamp",timezone:e.timezone||void 0};case $.TimestampSecond:return{sqlType:"timestamp[s]",timezone:e.timezone||void 0};case $.TimestampMicrosecond:return{sqlType:"timestamp[us]",timezone:e.timezone||void 0};case $.TimestampNanosecond:return{sqlType:"timestamp[ns]",timezone:e.timezone||void 0};case $.TimestampMillisecond:return{sqlType:"timestamp[ms]",timezone:e.timezone||void 0}}throw new Error("unsupported arrow type: ".concat(e.toString()))}function Fx(e,t){let n=Em(t);return n.name=e,n}var u1t=new TextEncoder,f1t=class{constructor(e,t=null){this._onInstantiationProgress=[],this._worker=null,this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{},this._nextMessageId=0,this._pendingRequests=new Map,this._logger=e,this._onMessageHandler=this.onMessage.bind(this),this._onErrorHandler=this.onError.bind(this),this._onCloseHandler=this.onClose.bind(this),t!=null&&this.attach(t)}get logger(){return this._logger}attach(e){this._worker=e,this._worker.addEventListener("message",this._onMessageHandler),this._worker.addEventListener("error",this._onErrorHandler),this._worker.addEventListener("close",this._onCloseHandler),this._workerShutdownPromise=new Promise((t,n)=>{this._workerShutdownResolver=t})}detach(){this._worker&&(this._worker.removeEventListener("message",this._onMessageHandler),this._worker.removeEventListener("error",this._onErrorHandler),this._worker.removeEventListener("close",this._onCloseHandler),this._worker=null,this._workerShutdownResolver(null),this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{})}async terminate(){this._worker&&(this._worker.terminate(),this._worker=null,this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{})}async postTask(e,t=[]){if(!this._worker){console.error("cannot send a message since the worker is not set!");return}let n=this._nextMessageId++;return this._pendingRequests.set(n,e),this._worker.postMessage({messageId:n,type:e.type,data:e.data},t),await e.promise}onMessage(e){var t;let n=e.data;switch(n.type){case"LOG":{this._logger.log(n.data);return}case"INSTANTIATE_PROGRESS":{for(let i of this._onInstantiationProgress)i(n.data);return}}let r=this._pendingRequests.get(n.requestId);if(!r){console.warn("unassociated response: [".concat(n.requestId,", ").concat(n.type.toString(),"]"));return}if(this._pendingRequests.delete(n.requestId),n.type=="ERROR"){let i=new Error(n.data.message);i.name=n.data.name,(t=Object.getOwnPropertyDescriptor(i,"stack"))!=null&&t.writable&&(i.stack=n.data.stack),r.promiseRejecter(i);return}switch(r.type){case"CLOSE_PREPARED":case"COLLECT_FILE_STATISTICS":case"COPY_FILE_TO_PATH":case"DISCONNECT":case"DROP_FILE":case"DROP_FILES":case"FLUSH_FILES":case"INSERT_ARROW_FROM_IPC_STREAM":case"IMPORT_CSV_FROM_PATH":case"IMPORT_JSON_FROM_PATH":case"OPEN":case"PING":case"REGISTER_FILE_BUFFER":case"REGISTER_FILE_HANDLE":case"REGISTER_FILE_URL":case"RESET":if(n.type=="OK"){r.promiseResolver(n.data);return}break;case"INSTANTIATE":if(this._onInstantiationProgress=[],n.type=="OK"){r.promiseResolver(n.data);return}break;case"GLOB_FILE_INFOS":if(n.type=="FILE_INFOS"){r.promiseResolver(n.data);return}break;case"GET_VERSION":if(n.type=="VERSION_STRING"){r.promiseResolver(n.data);return}break;case"GET_FEATURE_FLAGS":if(n.type=="FEATURE_FLAGS"){r.promiseResolver(n.data);return}break;case"GET_TABLE_NAMES":if(n.type=="TABLE_NAMES"){r.promiseResolver(n.data);return}break;case"TOKENIZE":if(n.type=="SCRIPT_TOKENS"){r.promiseResolver(n.data);return}break;case"COPY_FILE_TO_BUFFER":if(n.type=="FILE_BUFFER"){r.promiseResolver(n.data);return}break;case"EXPORT_FILE_STATISTICS":if(n.type=="FILE_STATISTICS"){r.promiseResolver(n.data);return}break;case"CONNECT":if(n.type=="CONNECTION_INFO"){r.promiseResolver(n.data);return}break;case"RUN_PREPARED":case"RUN_QUERY":if(n.type=="QUERY_RESULT"){r.promiseResolver(n.data);return}break;case"SEND_PREPARED":if(n.type=="QUERY_RESULT_HEADER"){r.promiseResolver(n.data);return}break;case"START_PENDING_QUERY":if(n.type=="QUERY_RESULT_HEADER_OR_NULL"){r.promiseResolver(n.data);return}break;case"POLL_PENDING_QUERY":if(n.type=="QUERY_RESULT_HEADER_OR_NULL"){r.promiseResolver(n.data);return}break;case"CANCEL_PENDING_QUERY":if(this._onInstantiationProgress=[],n.type=="SUCCESS"){r.promiseResolver(n.data);return}break;case"FETCH_QUERY_RESULTS":if(n.type=="QUERY_RESULT_CHUNK"){r.promiseResolver(n.data);return}break;case"CREATE_PREPARED":if(n.type=="PREPARED_STATEMENT_ID"){r.promiseResolver(n.data);return}break}r.promiseRejecter(new Error("unexpected response type: ".concat(n.type.toString())))}onError(e){console.error(e),console.error("error in duckdb worker: ".concat(e.message)),this._pendingRequests.clear()}onClose(){if(this._workerShutdownResolver(null),this._pendingRequests.size!=0){console.warn("worker terminated with ".concat(this._pendingRequests.size," pending requests"));return}this._pendingRequests.clear()}async reset(){let e=new Gt("RESET",null);return await this.postTask(e)}async ping(){let e=new Gt("PING",null);await this.postTask(e)}async dropFile(e){let t=new Gt("DROP_FILE",e);return await this.postTask(t)}async dropFiles(){let e=new Gt("DROP_FILES",null);return await this.postTask(e)}async flushFiles(){let e=new Gt("FLUSH_FILES",null);return await this.postTask(e)}async instantiate(e,t=null,n=r=>{}){this._onInstantiationProgress.push(n);let r=new Gt("INSTANTIATE",[e,t]);return await this.postTask(r)}async getVersion(){let e=new Gt("GET_VERSION",null);return await this.postTask(e)}async getFeatureFlags(){let e=new Gt("GET_FEATURE_FLAGS",null);return await this.postTask(e)}async open(e){let t=new Gt("OPEN",e);await this.postTask(t)}async tokenize(e){let t=new Gt("TOKENIZE",e);return await this.postTask(t)}async connectInternal(){let e=new Gt("CONNECT",null);return await this.postTask(e)}async connect(){let e=await this.connectInternal();return new o1t(this,e)}async disconnect(e){let t=new Gt("DISCONNECT",e);await this.postTask(t)}async runQuery(e,t){let n=new Gt("RUN_QUERY",[e,t]);return await this.postTask(n)}async startPendingQuery(e,t){let n=new Gt("START_PENDING_QUERY",[e,t]);return await this.postTask(n)}async pollPendingQuery(e){let t=new Gt("POLL_PENDING_QUERY",e);return await this.postTask(t)}async cancelPendingQuery(e){let t=new Gt("CANCEL_PENDING_QUERY",e);return await this.postTask(t)}async fetchQueryResults(e){let t=new Gt("FETCH_QUERY_RESULTS",e);return await this.postTask(t)}async getTableNames(e,t){let n=new Gt("GET_TABLE_NAMES",[e,t]);return await this.postTask(n)}async createPrepared(e,t){let n=new Gt("CREATE_PREPARED",[e,t]);return await this.postTask(n)}async closePrepared(e,t){let n=new Gt("CLOSE_PREPARED",[e,t]);await this.postTask(n)}async runPrepared(e,t,n){let r=new Gt("RUN_PREPARED",[e,t,n]);return await this.postTask(r)}async sendPrepared(e,t,n){let r=new Gt("SEND_PREPARED",[e,t,n]);return await this.postTask(r)}async globFiles(e){let t=new Gt("GLOB_FILE_INFOS",e);return await this.postTask(t)}async registerFileText(e,t){let n=u1t.encode(t);await this.registerFileBuffer(e,n)}async registerFileURL(e,t,n,r){t===void 0&&(t=e);let i=new Gt("REGISTER_FILE_URL",[e,t,n,r]);await this.postTask(i)}async registerEmptyFileBuffer(e){}async registerFileBuffer(e,t){let n=new Gt("REGISTER_FILE_BUFFER",[e,t]);await this.postTask(n,[t.buffer])}async registerFileHandle(e,t,n,r){let i=new Gt("REGISTER_FILE_HANDLE",[e,t,n,r]);await this.postTask(i,[])}async collectFileStatistics(e,t){let n=new Gt("COLLECT_FILE_STATISTICS",[e,t]);await this.postTask(n,[])}async exportFileStatistics(e){let t=new Gt("EXPORT_FILE_STATISTICS",e);return await this.postTask(t,[])}async copyFileToBuffer(e){let t=new Gt("COPY_FILE_TO_BUFFER",e);return await this.postTask(t)}async copyFileToPath(e,t){let n=new Gt("COPY_FILE_TO_PATH",[e,t]);await this.postTask(n)}async insertArrowFromIPCStream(e,t,n){if(t.length==0)return;let r=new Gt("INSERT_ARROW_FROM_IPC_STREAM",[e,t,n]);await this.postTask(r,[t.buffer])}async insertCSVFromPath(e,t,n){if(n.columns!==void 0){let i=[];for(let s in n.columns){let o=n.columns[s];i.push(Fx(s,o))}n.columnsFlat=i,delete n.columns}let r=new Gt("IMPORT_CSV_FROM_PATH",[e,t,n]);await this.postTask(r)}async insertJSONFromPath(e,t,n){if(n.columns!==void 0){let i=[];for(let s in n.columns){let o=n.columns[s];i.push(Fx(s,o))}n.columnsFlat=i,delete n.columns}let r=new Gt("IMPORT_JSON_FROM_PATH",[e,t,n]);await this.postTask(r)}},d1t={name:"@duckdb/duckdb-wasm",version:"1.11.0",description:"DuckDB powered by WebAssembly",license:"MIT",repository:{type:"git",url:"https://github.com/duckdb/duckdb-wasm.git"},keywords:["sql","duckdb","relational","database","data","query","wasm","analytics","olap","arrow","parquet","json","csv"],dependencies:{"apache-arrow":"^15.0.0"},devDependencies:{"@types/emscripten":"^1.39.10","@types/jasmine":"^5.1.4","@typescript-eslint/eslint-plugin":"^6.21.0","@typescript-eslint/parser":"^6.21.0",esbuild:"^0.20.1",eslint:"^8.56.0","eslint-plugin-jasmine":"^4.1.3","eslint-plugin-react":"^7.34.0","fast-glob":"^3.3.2",jasmine:"^5.1.0","jasmine-core":"^5.1.2","jasmine-spec-reporter":"^7.0.0","js-sha256":"^0.11.0",karma:"^6.4.2","karma-chrome-launcher":"^3.2.0","karma-coverage":"^2.2.1","karma-firefox-launcher":"^2.1.3","karma-jasmine":"^5.1.0","karma-jasmine-html-reporter":"^2.1.0","karma-sourcemap-loader":"^0.4.0","karma-spec-reporter":"^0.0.36","make-dir":"^4.0.0",nyc:"^15.1.0",prettier:"^3.2.5",puppeteer:"^21.7.0",rimraf:"^5.0.5",s3rver:"^3.7.1",typedoc:"^0.25.7",typescript:"^5.3.3","wasm-feature-detect":"^1.6.1","web-worker":"^1.2.0"},scripts:{"build:debug":"node bundle.mjs debug && tsc --emitDeclarationOnly","build:release":"node bundle.mjs release && tsc --emitDeclarationOnly",docs:"typedoc",report:"node ./coverage.mjs","test:node":"node --enable-source-maps ../../node_modules/jasmine/bin/jasmine ./dist/tests-node.cjs","test:node:debug":"node --inspect-brk --enable-source-maps ../../node_modules/jasmine/bin/jasmine ./dist/tests-node.cjs","test:node:coverage":"nyc -r json --report-dir ./coverage/node node ../../node_modules/jasmine/bin/jasmine ./dist/tests-node.cjs","test:firefox":"karma start ./karma/tests-firefox.cjs","test:chrome":"karma start ./karma/tests-chrome.cjs","test:chrome:eh":"karma start ./karma/tests-chrome-eh.cjs","test:chrome:coverage":"karma start ./karma/tests-chrome-coverage.cjs","test:browser":"karma start ./karma/tests-all.cjs","test:browser:debug":"karma start ./karma/tests-debug.cjs",test:"npm run test:chrome && npm run test:node","test:coverage":"npm run test:chrome:coverage && npm run test:node:coverage && npm run report",lint:"eslint src test"},files:["dist","!dist/tests-*","!dist/duckdb-browser-mvp.worker.js.map","!dist/types/test"],main:"dist/duckdb-browser.cjs",module:"dist/duckdb-browser.mjs",types:"dist/duckdb-browser.d.ts",jsdelivr:"dist/duckdb-browser.cjs",unpkg:"dist/duckdb-browser.mjs",sideEffects:!1,browser:{fs:!1,path:!1,perf_hooks:!1,os:!1,worker_threads:!1},exports:{"./dist/duckdb-mvp.wasm":"./dist/duckdb-mvp.wasm","./dist/duckdb-eh.wasm":"./dist/duckdb-eh.wasm","./dist/duckdb-coi.wasm":"./dist/duckdb-coi.wasm","./dist/duckdb-browser":"./dist/duckdb-browser.mjs","./dist/duckdb-browser.cjs":"./dist/duckdb-browser.cjs","./dist/duckdb-browser.mjs":"./dist/duckdb-browser.mjs","./dist/duckdb-browser-blocking":"./dist/duckdb-browser-blocking.mjs","./dist/duckdb-browser-blocking.mjs":"./dist/duckdb-browser-blocking.mjs","./dist/duckdb-browser-blocking.cjs":"./dist/duckdb-browser-blocking.cjs","./dist/duckdb-browser-coi.pthread.worker.js":"./dist/duckdb-browser-coi.pthread.worker.js","./dist/duckdb-browser-coi.worker.js":"./dist/duckdb-browser-coi.worker.js","./dist/duckdb-browser-eh.worker.js":"./dist/duckdb-browser-eh.worker.js","./dist/duckdb-browser-mvp.worker.js":"./dist/duckdb-browser-mvp.worker.js","./dist/duckdb-node":"./dist/duckdb-node.cjs","./dist/duckdb-node.cjs":"./dist/duckdb-node.cjs","./dist/duckdb-node-blocking":"./dist/duckdb-node-blocking.cjs","./dist/duckdb-node-blocking.cjs":"./dist/duckdb-node-blocking.cjs","./dist/duckdb-node-eh.worker.cjs":"./dist/duckdb-node-eh.worker.cjs","./dist/duckdb-node-mvp.worker.cjs":"./dist/duckdb-node-mvp.worker.cjs","./blocking":{browser:{types:"./dist/duckdb-browser-blocking.d.ts",import:"./dist/duckdb-browser-blocking.mjs",require:"./dist/duckdb-browser-blocking.cjs"},node:{types:"./dist/duckdb-node-blocking.d.ts",require:"./dist/duckdb-node-blocking.cjs",import:"./dist/duckdb-node-blocking.cjs"},types:"./dist/duckdb-browser-blocking.d.ts",import:"./dist/duckdb-browser-blocking.mjs",require:"./dist/duckdb-browser-blocking.cjs"},".":{browser:{types:"./dist/duckdb-browser.d.ts",import:"./dist/duckdb-browser.mjs",require:"./dist/duckdb-browser.cjs"},node:{types:"./dist/duckdb-node.d.ts",import:"./dist/duckdb-node.cjs",require:"./dist/duckdb-node.cjs"},types:"./dist/duckdb-browser.d.ts",import:"./dist/duckdb-browser.mjs",require:"./dist/duckdb-browser.cjs"}}},PE=d1t.version.split(".");PE[0];PE[1];PE[2];Kgt(Zgt());function h1t(){let e=new TextDecoder;return t=>(typeof SharedArrayBuffer<"u"&&t.buffer instanceof SharedArrayBuffer&&(t=new Uint8Array(t)),e.decode(t))}h1t();var p1t=(e=>(e[e.BUFFER=0]="BUFFER",e[e.NODE_FS=1]="NODE_FS",e[e.BROWSER_FILEREADER=2]="BROWSER_FILEREADER",e[e.BROWSER_FSACCESS=3]="BROWSER_FSACCESS",e[e.HTTP=4]="HTTP",e[e.S3=5]="S3",e))(p1t||{}),cz=class{singleValue(){let{columnCount:e,rowCount:t}=this;if(e===0)throw Error("no column data");if(t===0)throw Error("no rows");if(e>1)throw Error("more than one column");if(t>1)throw Error("more than one row");return this.value(0,0)}columnNames(){let{columnCount:e}=this,t=[];for(let n=0;n<e;n++)t.push(this.columnName(n));return t}deduplicatedColumnNames(){let{columnCount:e}=this,t=[],n={};for(let r=0;r<e;r++){let i=this.columnName(r),s=(n[i]||0)+1;n[i]=s,s>1?t.push(`${i}:${s-1}`):t.push(i)}return t}toRows(){let{rowCount:e,columnCount:t}=this,n=this.deduplicatedColumnNames(),r=[];for(let i=0;i<e;i++){let s={};for(let o=0;o<t;o++)s[n[o]]=this.value(o,i);r.push(s)}return r}};function lu(e){switch(e.typeId){case $.Null:return le.SQLNULL;case $.Int:{let{isSigned:t,bitWidth:n}=e;if(t)switch(n){case 8:return le.TINYINT;case 16:return le.SMALLINT;case 32:return le.INTEGER;case 64:return le.BIGINT;default:throw Error(`unexpected integer bit width: ${n}`)}else switch(n){case 8:return le.UTINYINT;case 16:return le.USMALLINT;case 32:return le.UINTEGER;case 64:return le.UBIGINT;default:throw Error(`unexpected integer bit width: ${n}`)}}case $.Float:{let{precision:t}=e;switch(t){case Qe.HALF:throw Error("DuckDB does not support half-precision floats");case Qe.SINGLE:return le.REAL;case Qe.DOUBLE:return le.DOUBLE;default:throw Error(`unexpected precision: ${t}`)}}case $.Binary:return le.BLOB;case $.Utf8:return le.VARCHAR;case $.Bool:return le.BOOLEAN;case $.Decimal:{let{precision:t,scale:n}=e;return(t==null||t===18)&&(n==null||n===3)?le.DECIMAL():le.DECIMAL(t,n)}case $.Date:{let{unit:t}=e;switch(t){case er.DAY:return le.DATE;case er.MILLISECOND:throw Error("DuckDB does not support millisecond-unit dates");default:throw Error(`unexpected date unit: ${t}`)}}case $.Time:{let{unit:t}=e;switch(t){case rt.SECOND:throw Error("DuckDB does not support second-unit times");case rt.MILLISECOND:throw Error("DuckDB does not support millisecond-unit times");case rt.MICROSECOND:return le.TIME;case rt.NANOSECOND:throw Error("DuckDB does not support nanosecond-unit times");default:throw Error(`unexpected time unit: ${t}`)}}case $.Timestamp:{let{unit:t,timezone:n}=e;switch(t){case rt.SECOND:if(n)throw Error("DuckDB does not support second-unit timestamps with timezone");return le.TIMESTAMP_S;case rt.MILLISECOND:if(n)throw Error("DuckDB does not support millisecond-unit timestamps with timezone");return le.TIMESTAMP_MS;case rt.MICROSECOND:return n?le.TIMESTAMP_TZ:le.TIMESTAMP;case rt.NANOSECOND:if(n)throw Error("DuckDB does not support nanosecond-unit timestamps with timezone");return le.TIMESTAMP_NS;default:throw Error(`unexpected time unit: ${t}`)}}case $.Interval:{let{unit:t}=e;switch(t){case Un.YEAR_MONTH:throw Error("DuckDB does not support year-month intervals");case Un.DAY_TIME:throw Error("DuckDB does not support day-time intervals");case Un.MONTH_DAY_NANO:return le.INTERVAL;default:throw Error(`unexpected interval unit: ${t}`)}}case $.List:{let{valueType:t}=e;return le.LIST(lu(t))}case $.Struct:{let{children:t}=e,n=t.map(r=>({key:r.name,valueType:lu(r.type)}));return le.STRUCT(n)}case $.Union:{let{mode:t}=e;switch(t){case on.Dense:throw Error("DuckDB does not support dense unions");case on.Sparse:{let n=e.children.map(r=>({tag:r.name,valueType:lu(r.type)}));return le.UNION(n)}default:throw Error(`unexpected union mode: ${t}`)}}case $.FixedSizeBinary:throw Error("DuckDB does not support fixed-size binary");case $.FixedSizeList:throw Error("DuckDB does not support fixed-size lists");case $.Map:{let{keyType:t,valueType:n}=e;return le.MAP(lu(t),lu(n))}case $.Dictionary:return le.ENUM;default:throw Error(`unexpected type id: ${e.typeId}`)}}function y1t(e){let t="";for(let n of e)n<=31||n===34||n===39||n>=127?t+=`\\x${n.toString(16).toUpperCase().padStart(2,"0")}`:t+=String.fromCharCode(n);return t}var xi=class{toString(){return this.toDuckDBString()}},m1t=class extends xi{constructor(e){super(),this.bytes=e}toDuckDBString(){return y1t(this.bytes)}},Lx=BigInt(1e6),g1t=BigInt(1e3),b1t=BigInt(1e3),l4=BigInt(60),c4=BigInt(60),Am=BigInt(864e8),v1t=BigInt("-9223372036854775807"),w1t=BigInt("9223372036854775807");function _1t(e,t,n){let r=String(Math.abs(e)).padStart(4,"0"),i=String(t).padStart(2,"0"),s=String(n).padStart(2,"0");return`${r}-${i}-${s}${e<0?" (BC)":""}`}function uz(e){let t=Math.abs(e),n=e<0?-1:1,r=Math.floor(t/146097),i=n*r*400,s=t%146097,o=n*s*864e5,a=new Date(o),l=i+a.getUTCFullYear();l<0&&l--;let c=a.getUTCMonth()+1,u=a.getUTCDate();return _1t(l,c,u)}function S1t(e,t,n,r){let i=String(e).padStart(2,"0"),s=String(t).padStart(2,"0"),o=String(n).padStart(2,"0"),a=String(r).padStart(6,"0").replace(/0+$/,"");return`${i}:${s}:${o}${a.length>0?`.${a}`:""}`}function fz(e){let t=e%Lx,n=e/Lx,r=n%l4,i=n/l4,s=i%c4,o=i/c4;return S1t(o,s,r,t)}function dz(e){let t=e<0?e+Am:e;return fz(t)}function x1t(e){let t=e<0,n=t?-e:e,r=fz(n);return t?`-${r}`:r}function I1t(e,t,n){let r=uz(Number(e)),i=dz(t),s=n?` ${n}`:"";return`${r} ${i}${s}`}function Xv(e,t){if(e===v1t)return"-infinity";if(e===w1t)return"infinity";let n=e/Am,r=e%Am;return r<0&&(n--,r+=Am),I1t(n,r,t)}function T1t(e,t){return Xv(e*Lx,t)}function E1t(e,t){return Xv(e*g1t,t)}function A1t(e,t){return Xv(e/b1t,t)}function F_(e,t){return`${e} ${t}${e!==1?"s":""}`}function M1t(e,t,n){let r=[];if(e!==0){let i=e<0?-1:1,s=Math.abs(e),o=Math.floor(s/12),a=i*o,l=i*(s-o*12);a!==0&&r.push(F_(a,"year")),l!==0&&r.push(F_(l,"month"))}return t!==0&&r.push(F_(t,"day")),n!==BigInt(0)&&r.push(x1t(n)),r.length>0?r.join(" "):"00:00:00"}var $1t=class extends xi{constructor(e){super(),this.days=e}toDuckDBString(){return uz(this.days)}};function N1t(e){var t;return((t=new Intl.NumberFormat(e,{useGrouping:!1}).formatToParts(.1).find(n=>n.type==="decimal"))==null?void 0:t.value)??"."}var L_={};function k1t(e){let t=JSON.stringify(e);if(t in L_)return L_[t];let n=N1t(e);return L_[t]=n,n}function D1t(e,t){if(e){let{minimumFractionDigits:n,maximumFractionDigits:r,...i}=e.options??{};return t.toLocaleString(e==null?void 0:e.locales,i)}return String(t)}function O1t(e,t,n){var o,a;let r=String(t).padStart(n,"0");if(!e)return r;let i=((o=e==null?void 0:e.options)==null?void 0:o.minimumFractionDigits)??0,s=((a=e==null?void 0:e.options)==null?void 0:a.maximumFractionDigits)??20;return r.padEnd(i,"0").slice(0,s)}function u4(e,t,n){if(t>0){let r=BigInt(10)**BigInt(t),i=e<0?-e:e,s=e<0?"-":"",o=i/r,a=D1t(n,o),l=i%r,c=O1t(n,l,t),u=n?k1t(n.locales):".";return`${s}${a}${u}${c}`}return n?e.toLocaleString(n==null?void 0:n.locales,n==null?void 0:n.options):String(e)}var B1t=class extends xi{constructor(e,t){super(),this.scaledValue=e,this.scale=t}toDuckDBString(){return u4(this.scaledValue,this.scale)}toLocaleString(e,t){return u4(this.scaledValue,this.scale,{locales:e,options:t})}},F1t=class extends xi{constructor(e,t,n){super(),this.months=e,this.days=t,this.microseconds=n}toDuckDBString(){return M1t(this.months,this.days,this.microseconds)}};function Rp(e){return e==null?"NULL":typeof e=="string"?`'${e.replace("'","''")}'`:String(e)}var L1t=class extends xi{constructor(e){super(),this.values=e}toDuckDBString(){return`[${this.values.map(Rp).join(", ")}]`}},R1t=class extends xi{constructor(e){super(),this.entries=e}toDuckDBString(){return`{${this.entries.map(({key:e,value:t})=>`${Rp(e)}: ${Rp(t)}`).join(", ")}}`}},C1t=class extends xi{constructor(e){super(),this.entries=e}toDuckDBString(){return`{${this.entries.map(({key:e,value:t})=>`${Rp(e)}: ${Rp(t)}`).join(", ")}}`}},U1t=class extends xi{constructor(e){super(),this.microseconds=e}toDuckDBString(){return dz(this.microseconds)}},P1t=class extends xi{constructor(e,t){super(),this.microseconds=e,this.timezone=t}toDuckDBString(){return Xv(this.microseconds,this.timezone)}},z1t=class extends xi{constructor(e){super(),this.milliseconds=e}toDuckDBString(){return E1t(this.milliseconds)}},j1t=class extends xi{constructor(e){super(),this.nanoseconds=e}toDuckDBString(){return A1t(this.nanoseconds)}},V1t=class extends xi{constructor(e){super(),this.seconds=e}toDuckDBString(){return T1t(this.seconds)}},Y1t=new TextDecoder;function q1t(e,t,n){return e.getValid(t)?n(e,t):null}function zn(e){return(t,n)=>q1t(t,n,e)}function W1t(e,t,n,r){return Array.from({length:n-t}).map((i,s)=>r(e,t+s))}function hz(e){return new BigInt64Array(e.values.buffer,e.values.byteOffset,e.values.length/2)}function Ry(e,t){return hz(e)[t]}function H1t(e,t){let n=hz(e),r=n[t*2];return(n[t*2+1]<<BigInt(64))+(r&BigInt.asUintN(64,BigInt(-1)))}function pz(e,t){let{values:n,valueOffsets:r}=e,i=r[t],s=r[t+1];return n.subarray(i,s)}function G1t(e,t){return null}function X1t(e,t){return e.values[t]}var is=zn(X1t);function Q1t(e,t){return new m1t(pz(e,t))}var K1t=zn(Q1t);function Z1t(e,t){return Y1t.decode(pz(e,t))}var J1t=zn(Z1t);function tbt(e,t){let n=e.offset+t;return(e.values[n>>3]&1<<n%8)!==0}var ebt=zn(tbt);function nbt(e,t){return new B1t(H1t(e,t),e.type.scale)}var rbt=zn(nbt);function ibt(e,t){return new $1t(e.values[t])}var sbt=zn(ibt);function obt(e,t){return new U1t(e.values[t])}var abt=zn(obt);function lbt(e,t){return new V1t(Ry(e,t))}var cbt=zn(lbt);function ubt(e,t){return new z1t(Ry(e,t))}var fbt=zn(ubt);function dbt(e,t){return new P1t(Ry(e,t),e.type.timezone)}var hbt=zn(dbt);function pbt(e,t){return new j1t(Ry(e,t))}var ybt=zn(pbt);function mbt(e,t){return new F1t(e.values[t*4],e.values[t*4+1],Ry(e,t*2+1)/BigInt(1e3))}var gbt=zn(mbt);function bbt(e,t){let{children:n,valueOffsets:r}=e,i=r[t],s=r[t+1];return new L1t(Abt(n[0],i,s))}var vbt=zn(bbt);function wbt(e,t){let n=[],{children:r,type:i}=e,s=i.children;for(let o=0;o<r.length;o++){let a=r[o],l=s[o].name,c=Cp(a,t);n.push({key:l,value:c})}return new C1t(n)}var _bt=zn(wbt);function Sbt(e,t){let{children:n,typeIds:r}=e,i=r[t],s=e.type.typeIdToChildIndex[i],o=n[s];return Cp(o,t)}function xbt(e,t){let n=[],{children:r,valueOffsets:i}=e,s=i[t],o=i[t+1],[a,l]=r[0].children;for(let c=s;c<o;c++)n.push({key:Cp(a,c),value:Cp(l,c)});return new R1t(n)}var Ibt=zn(xbt);function Tbt(e,t){return e.dictionary&&e.dictionary.length>0?e.dictionary.get(e.values[t]):e.values[t]}var Ebt=zn(Tbt);function yz(e){switch(e.typeId){case $.Null:return G1t;case $.Int:{let{isSigned:t,bitWidth:n}=e;if(t)switch(n){case 8:return is;case 16:return is;case 32:return is;case 64:return is;default:throw Error(`unexpected integer bit width: ${n}`)}else switch(n){case 8:return is;case 16:return is;case 32:return is;case 64:return is;default:throw Error(`unexpected integer bit width: ${n}`)}}case $.Float:{let{precision:t}=e;switch(t){case Qe.HALF:throw Error("DuckDB does not support half-precision floats");case Qe.SINGLE:return is;case Qe.DOUBLE:return is;default:throw Error(`unexpected precision: ${t}`)}}case $.Binary:return K1t;case $.Utf8:return J1t;case $.Bool:return ebt;case $.Decimal:return rbt;case $.Date:{let{unit:t}=e;switch(t){case er.DAY:return sbt;case er.MILLISECOND:throw Error("DuckDB does not support millisecond-unit dates");default:throw Error(`unexpected date unit: ${t}`)}}case $.Time:{let{unit:t}=e;switch(t){case rt.SECOND:throw Error("DuckDB does not support second-unit times");case rt.MILLISECOND:throw Error("DuckDB does not support millisecond-unit times");case rt.MICROSECOND:return abt;case rt.NANOSECOND:throw Error("DuckDB does not support nanosecond-unit times");default:throw Error(`unexpected time unit: ${t}`)}}case $.Timestamp:{let{unit:t,timezone:n}=e;switch(t){case rt.SECOND:if(n)throw Error("DuckDB does not support second-unit timestamps with time zone");return cbt;case rt.MILLISECOND:if(n)throw Error("DuckDB does not support millisecond-unit timestamps with time zone");return fbt;case rt.MICROSECOND:return hbt;case rt.NANOSECOND:if(n)throw Error("DuckDB does not support nanosecond-unit timestamps with time zone");return ybt;default:throw Error(`unexpected time unit: ${t}`)}}case $.Interval:{let{unit:t}=e;switch(t){case Un.YEAR_MONTH:throw Error("DuckDB does not support year-month intervals");case Un.DAY_TIME:throw Error("DuckDB does not support day-time intervals");case Un.MONTH_DAY_NANO:return gbt;default:throw Error(`unexpected interval unit: ${t}`)}}case $.List:return vbt;case $.Struct:return _bt;case $.Union:{let{mode:t}=e;switch(t){case on.Dense:throw Error("DuckDB does not support dense unions");case on.Sparse:return Sbt;default:throw Error(`unexpected union mode: ${t}`)}}case $.FixedSizeBinary:throw Error("DuckDB does not support fixed-size binary");case $.FixedSizeList:throw Error("DuckDB does not support fixed-size lists");case $.Map:return Ibt;case $.Dictionary:return Ebt;default:throw Error(`unexpected type id: ${e.typeId}`)}}function Cp(e,t){return yz(e.type)(e,t)}function Abt(e,t,n){let r=yz(e.type);return W1t(e,t,n,r)}var Mbt=class extends cz{constructor(e){super(),this.recordBatch=e}get columnCount(){return this.recordBatch.schema.fields.length}get rowCount(){return this.recordBatch.data.length}columnName(e){return this.recordBatch.schema.fields[e].name}columnType(e){let t=this.recordBatch.schema.fields[e];return lu(t.type)}value(e,t){let n=this.recordBatch.data.children[e];return Cp(n,t)}},R_=Object.freeze({done:!0,value:void 0}),mz=class{constructor(e){this.recordBatchIterator=e}async next(){let{done:e,value:t}=await this.recordBatchIterator.next();return t?{done:!!e,value:new Mbt(t)}:R_}async return(e){return this.recordBatchIterator.return&&await this.recordBatchIterator.return(),e?{done:!0,value:e}:R_}async throw(e){return this.recordBatchIterator.throw&&await this.recordBatchIterator.throw(e),R_}[Symbol.asyncIterator](){return this}},gz=class extends cz{constructor(e){super(),this.iteratorDone=!1,this.totalRowsRead=0,this.batches=[],this.batchSizeRuns=[],this.iterator=e}get columnCount(){return this.batches.length===0?0:this.batches[0].columnCount}get rowCount(){return this.totalRowsRead}columnName(e){if(this.batches.length===0)throw Error("no column data");return this.batches[0].columnName(e)}columnType(e){if(this.batches.length===0)throw Error("no column data");return this.batches[0].columnType(e)}value(e,t){if(this.totalRowsRead===0)throw Error("no data");let n=0,r=t;for(let i of this.batchSizeRuns){if(r<i.rowCount){n+=Math.floor(r/i.batchSize);let s=r%i.batchSize;return this.batches[n].value(e,s)}n+=i.batchCount,r-=i.rowCount}throw Error(`Row index ${t} requested, but only ${this.totalRowsRead} row have been read so far.`)}get done(){return this.iteratorDone}async readAll(){return this.read()}async readUntil(e){return this.read(e)}async read(e){for(;!(this.iteratorDone||e!==void 0&&this.totalRowsRead>=e);){let{value:t,done:n}=await this.iterator.next();t&&(this.updateBatchSizeRuns(t),this.batches.push(t),this.totalRowsRead+=t.rowCount),n&&(this.iteratorDone=n)}}updateBatchSizeRuns(e){if(this.batchSizeRuns.length>0){let t=this.batchSizeRuns[this.batchSizeRuns.length-1];if(t.batchSize===e.rowCount){t.batchCount+=1,t.rowCount+=t.batchSize;return}}this.batchSizeRuns.push({batchCount:1,batchSize:e.rowCount,rowCount:e.rowCount})}},C_=class{constructor(e,t,n){this.connection=null,this.deferredConnection=e,this.query=t,this.args=n}async run(){let e=performance.now(),t=await this.sendQuery(),n=new mz(t),r=new gz(n);await r.readAll();let i=performance.now();return{type:"materialized",startTimeMs:e,endTimeMs:i,data:r}}async cancel(){return(this.connection||await this.getConnection()).cancelSent()}async getConnection(){return this.connection=await this.deferredConnection,this.connection}async sendQuery(){var t;let e=this.connection||await this.getConnection();return this.args&&((t=this.args)==null?void 0:t.length)>0?(await e.prepare(this.query)).send(...this.args):e.send(this.query)}},f4=class{constructor(e,t,n){this.connection=null,this.deferredConnection=e,this.query=t,this.args=n}async run(){let e=await this.sendQuery(),t=new mz(e),n=new gz(t);return{type:"streaming",arrowStream:e,dataStream:t,dataReader:n}}async cancel(){return(this.connection||await this.getConnection()).cancelSent()}async getConnection(){return this.connection=await this.deferredConnection,this.connection}async sendQuery(){var t;let e=this.connection||await this.getConnection();return this.args&&((t=this.args)==null?void 0:t.length)>0?(await e.prepare(this.query)).send(this.args):e.send(this.query)}};function d4(){throw new Error("should never be called")}function $bt(){let e=d4,t=d4;return{promise:new Promise((n,r)=>{e=n,t=r}),resolve:e,reject:t}}var Nbt=class{constructor(e){this.nextTaskId=1,this.queuedTaskIds=[],this.queuedTasksById={},this.processingQueue=!1,this.logSink=e}incompleteTaskCount(){let e=0;for(let t of this.queuedTaskIds){let n=this.queuedTasksById[t];n&&(n.state===0||n.state===1)&&e++}return e}enqueueTask(e){let t=this.createTaskId();return this.logDebug(`enqueueTask: creating task id = ${t}`),this.addQueuedTask({id:t,task:e,state:0,deferred:$bt(),cancelled:!1}),this.scheduleProcessQueueIfNeeded(),t}async cancelTask(e,t){this.logDebug(`cancelTask(${e}): called`);let n=this.queuedTasksById[e];if(!n)throw new Error(`Task with id ${e} not found`);switch(n.state){case 0:return n.cancelled?this.logDebug(`cancelTask(${e}): cancelling pending task (already cancelled)`):(this.logDebug(`cancelTask(${e}): cancelling pending task`),n.cancelled=!0,n.deferred.reject(new Error(t??"pending task cancelled")),this.scheduleProcessQueueIfNeeded()),!0;case 1:return this.logDebug(`cancelTask(${e}): cancelling running task`),n.cancelled=!0,n.task.cancel();case 2:return this.logDebug(`cancelTask(${e}): can't cancel resolved task`),!1;case 3:return this.logDebug(`cancelTask(${e}): can't cancel rejected task`),!1;default:throw n.state,new Error("unreachable")}}taskResult(e){this.logDebug(`taskResults(${e}): called`);let t=this.queuedTasksById[e];if(!t)throw new Error(`Task with id ${e} not found`);return t.deferred.promise}logDebug(e){this.logSink&&this.logSink.debug(e)}logWarn(e){this.logSink&&this.logSink.warn(e)}createTaskId(){return`t${this.nextTaskId++}`}addQueuedTask(e){this.queuedTaskIds.push(e.id),this.queuedTasksById[e.id]=e}scheduleProcessQueueIfNeeded(){this.processingQueue?this.logDebug("scheduleProcessQueueIfNeeded: processQueue already scheduled"):(this.logDebug("scheduleProcessQueueIfNeeded: scheduling processQueue"),this.processingQueue=!0,setTimeout(()=>{this.processQueue(),this.processingQueue=!1},0))}processQueue(){this.logDebug("processQueue: processing started");let e;do e=this.processFirstQueuedTask();while(e);this.logDebug("processQueue: processing completed")}processFirstQueuedTask(){if(this.queuedTaskIds.length===0)return this.logDebug("processFirstQueuedTask: queue empty"),!1;let e=this.queuedTaskIds[0];this.logDebug(`processFirstQueuedTask: processing task ${e}`);let t=this.queuedTasksById[e];if(!t)return this.logWarn(`processFirstQueuedTask: task ${e} not found in map`),this.queuedTaskIds.shift(),!0;switch(t.state){case 0:return t.cancelled?(this.logDebug(`processFirstQueuedTask: removing cancelled pending task ${e} from queue`),this.queuedTaskIds.shift(),delete this.queuedTasksById[t.id],!0):(this.logDebug(`processFirstQueuedTask: running pending task ${e}`),t.state=1,t.task.run().then(n=>{this.logDebug(`processFirstQueuedTask: task ${e} resolved`),t.state=2,t.deferred.resolve(n)}).catch(n=>{this.logDebug(`processFirstQueuedTask: task ${e} rejected`),t.state=3,t.deferred.reject(n)}).finally(()=>{this.scheduleProcessQueueIfNeeded()}),!1);case 1:return this.logDebug(`processFirstQueuedTask: task ${e} at front of queue is already running`),!1;case 2:case 3:return this.logDebug(`processFirstQueuedTask: task ${e} at front of queue is completed, removing from queue`),this.queuedTaskIds.shift(),delete this.queuedTasksById[t.id],!0;default:throw t.state,new Error("unreachable")}}},h4="CatalogChangeEvent",Mm=null;async function kbt(e){let t=await(await Dbt(e)).connect();return e.skipWelcomePack||await t.query("PRAGMA MD_USE_DEFAULT"),t}async function Dbt(e){return Mm||(Mm=Fbt(e),Mm)}function Obt(e){return e?e.endsWith("/")?e:`${e}/`:"https://app.motherduck.com/"}async function Bbt(e,t){let n=bz(t),r=`${e}${n}${n.length>0?"/":""}`,i=`${r}duckdb-assets.json`,s=await(await fetch(i)).json();return s.coi&&(s.coi.mainModule=r+s.coi.mainModule,s.coi.mainWorker=r+s.coi.mainWorker,s.coi.pthreadWorker=r+s.coi.pthreadWorker),s.mvp&&(s.mvp.mainModule=r+s.mvp.mainModule,s.mvp.mainWorker=r+s.mvp.mainWorker),s.eh&&(s.eh.mainModule=r+s.eh.mainModule,s.eh.mainWorker=r+s.eh.mainWorker),s}function p4(e,t){return URL.createObjectURL(new Blob([`importScripts("${t}");`],{type:"text/javascript"}))}async function Fbt(e){let t=await Pbt(),n=Obt(e.duckDBAssetsURLPrefix),r=e.version||await Cbt(n),i=await Bbt(n,r),s=e.useDuckDBWasmCOI?i.coi:i.eh;if(!s)throw new Error("Could not find DuckDB WASM asset URLs in duckdb-assets.json");let o=/^https?:\/\//.test(n),a=o?p4(n,s.mainWorker):s.mainWorker,l=o&&s.pthreadWorker?p4(n,s.pthreadWorker):s.pthreadWorker,c=new Worker(a);c.addEventListener("message",y=>{var m;((m=y==null?void 0:y.data)==null?void 0:m.type)==="MD_EVENT"&&(y.data.name===h4?document.dispatchEvent(new CustomEvent(h4,{detail:y.data})):console.error("Received unknown event",y.data))}),t||c.addEventListener("message",y=>{if(y&&y.data&&y.data.type==="Initialize"){let m=new Worker(y.data.workerUrl);URL.revokeObjectURL(y.data.workerUrl),m.postMessage(y.data,[y.data.port])}});let u=e.enableDebugLogging?Bx.INFO:Bx.WARNING,f=new i1t(u),d=new f1t(f,c);await d.instantiate(s.mainModule,l),o&&(URL.revokeObjectURL(a),l&&URL.revokeObjectURL(l));let h=await d.connect();await Ubt(h,n,r),await h.query("LOAD icu;");let p=new URL(e.mdServerURL||"https://api.motherduck.com");await h.query(`SET motherduck_host='${p.hostname}';`),p.port&&await h.query(`SET motherduck_port='${p.port}';`),p.protocol==="http:"&&await h.query("SET motherduck_use_tls=false;"),await h.query(`SET motherduck_token='${e.mdToken}';`);let g=!1;for(let y=0;y<6e3;++y){if(await Lbt(h)){g=!0;break}await new Promise(m=>setTimeout(m,10))}if(!g)throw new Error("Could not initialize worker after 1 minute.");let v=e.enableDebugLogging?"debug":"error";return await h.query(`SET motherduck_log_level='${v}';`),Mm=d,d}async function Lbt(e){return(await e.query("from MD_IS_NETWORK_READY();")).toArray()[0].Success}var Rbt="0.10-plus",y4="app.motherduck.com",m4="app.staging.motherduck.com";async function Cbt(e){let t=e.startsWith(`https://${y4}`),n=e.startsWith(`https://${m4}`);return t||n?(await(await fetch(`${e}duckdb_version_range/${Rbt}/manifest`)).json())[n?m4:y4]:(await(await fetch(`${e}version`)).json()).version}function bz(e){return!e||e.startsWith("DEV-")?"":e}async function Ubt(e,t,n){let r=bz(n),i=t==="/"?`${window.origin}${r.length>0?"/":""}`:t;await e.query([`SET custom_extension_repository="${i}${r}${r.length>0?"/":""}duckdb-wasm";`,"LOAD motherduck;","RESET custom_extension_repository;"].join(""))}async function Pbt(){return new Promise(e=>{let t=URL.createObjectURL(new Blob(["self.postMessage({ canCreateWorker: !!self.Worker });"],{type:"application/javascript"})),n=new Worker(t);URL.revokeObjectURL(t),n.addEventListener("message",r);function r(i){n.removeEventListener("message",r),n.terminate(),e(i.data.canCreateWorker)}})}function zbt(e){let t=/^[^{]*({.*})/.exec(e);if(t){let n=t[1];try{let r=JSON.parse(n);if(r.message)return r.message}catch{return e}}return e}function jbt(e){return typeof e=="object"&&e!==null&&"message"in e&&typeof e.message=="string"}function Vbt(e){if(jbt(e))return e.message;try{return JSON.stringify(e)}catch{return String(e)}}var Ybt=0;function qbt(){return`MDConnection_${Ybt++}`}var zf,Wbt=(zf=class{constructor(t,n,r){this.params=t,this.deferredDdbConnection=n,this.id=r,this.sequencer=new Nbt(t.logSink)}static create(t){let n=qbt(),r=kbt(t),i=new zf(t,r,n);return this.idMap[n]=i,i}async isInitialized(){return await this.deferredDdbConnection,!0}static getById(t){return this.idMap[t]}async tokenize(t){return(await this.deferredDdbConnection).bindings.tokenize(t)}incompleteQueryCount(){return this.sequencer.incompleteTaskCount()}enqueueQuery(t,n){return this.sequencer.enqueueTask(new C_(this.deferredDdbConnection,t,n))}async safeEvaluateQuery(t){try{return{status:"success",result:await this.evaluateQuery(t)}}catch(n){return{status:"error",err:n}}}async safeEvaluatePreparedStatement(t,...n){try{return{status:"success",result:await this.evaluatePreparedStatement(t,n)}}catch(r){return{status:"error",err:r}}}async safeEvaluateStreamingQuery(t){try{return{status:"success",result:await this.evaluateStreamingQuery(t)}}catch(n){return{status:"error",err:n}}}async safeEvaluateStreamingPreparedStatement(t,n){try{return{status:"success",result:await this.evaluateStreamingPreparedStatement(t,n)}}catch(r){return{status:"error",err:r}}}async safeEvaluateQueuedQuery(t){try{return{status:"success",result:await this.evaluateQueuedQuery(t)}}catch(n){return{status:"error",err:n}}}async evaluateQuery(t){return this.evaluateExclusive(new C_(this.deferredDdbConnection,t))}async evaluatePreparedStatement(t,n){return this.evaluateExclusive(new C_(this.deferredDdbConnection,t,n))}async evaluateStreamingQuery(t){return this.evaluateExclusive(new f4(this.deferredDdbConnection,t,void 0))}async evaluateStreamingPreparedStatement(t,n){return this.evaluateExclusive(new f4(this.deferredDdbConnection,t,n))}async evaluateExclusive(t){let n=this.sequencer.enqueueTask(t);return this.sequencer.taskResult(n).catch(g4)}async evaluateQueuedQuery(t){return this.sequencer.taskResult(t).catch(g4)}async cancelQuery(t,n){return this.sequencer.cancelTask(t,n)}async close(){return(await this.deferredDdbConnection).close()}},zf.idMap={},zf);function g4(e){throw new Error(zbt(Vbt(e)))}async function b4(e){if(e.type==="streaming"){const t=await e.arrowStream.readAll();return new Ln(t)}else throw Error("expected streaming result")}function Hbt(e){const t=Wbt.create({mdToken:e});return{query:async n=>{const{sql:r,type:i}=n,s=await t.evaluateStreamingQuery(r);switch(i){case"arrow":return b4(s);case"json":return Array.from(await b4(s));default:case"exec":return}}}}function Gbt(){const[e,t]=In.useState(!1),n=In.useCallback(async r=>{vr().databaseConnector(Hbt(r)),t(!0)},[]);return Ut.jsxs(Ut.Fragment,{children:[Ut.jsx(i0t,{}),Ut.jsx("div",{id:"content-pane",children:e?Ut.jsx(f0t,{}):Ut.jsx(n0t,{connect:n})})]})}U_.createRoot(document.getElementById("root")).render(Ut.jsx(Vz.StrictMode,{children:Ut.jsx(Gbt,{})}));
