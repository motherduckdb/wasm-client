var mz=Object.defineProperty;var gz=(e,t,n)=>t in e?mz(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var zy=(e,t,n)=>(gz(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function d4(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var h4={exports:{}},wb={},p4={exports:{}},Pt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pp=Symbol.for("react.element"),bz=Symbol.for("react.portal"),vz=Symbol.for("react.fragment"),wz=Symbol.for("react.strict_mode"),_z=Symbol.for("react.profiler"),Sz=Symbol.for("react.provider"),xz=Symbol.for("react.context"),Iz=Symbol.for("react.forward_ref"),Ez=Symbol.for("react.suspense"),Tz=Symbol.for("react.memo"),Az=Symbol.for("react.lazy"),WT=Symbol.iterator;function Mz(e){return e===null||typeof e!="object"?null:(e=WT&&e[WT]||e["@@iterator"],typeof e=="function"?e:null)}var y4={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m4=Object.assign,g4={};function Xf(e,t,n){this.props=e,this.context=t,this.refs=g4,this.updater=n||y4}Xf.prototype.isReactComponent={};Xf.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Xf.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function b4(){}b4.prototype=Xf.prototype;function Ux(e,t,n){this.props=e,this.context=t,this.refs=g4,this.updater=n||y4}var Px=Ux.prototype=new b4;Px.constructor=Ux;m4(Px,Xf.prototype);Px.isPureReactComponent=!0;var HT=Array.isArray,v4=Object.prototype.hasOwnProperty,zx={current:null},w4={key:!0,ref:!0,__self:!0,__source:!0};function _4(e,t,n){var r,i={},s=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)v4.call(t,r)&&!w4.hasOwnProperty(r)&&(i[r]=t[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Pp,type:e,key:s,ref:o,props:i,_owner:zx.current}}function $z(e,t){return{$$typeof:Pp,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function jx(e){return typeof e=="object"&&e!==null&&e.$$typeof===Pp}function Nz(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var GT=/\/+/g;function Jv(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Nz(""+e.key):t.toString(36)}function V0(e,t,n,r,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Pp:case bz:o=!0}}if(o)return o=e,i=i(o),e=r===""?"."+Jv(o,0):r,HT(i)?(n="",e!=null&&(n=e.replace(GT,"$&/")+"/"),V0(i,t,n,"",function(c){return c})):i!=null&&(jx(i)&&(i=$z(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(GT,"$&/")+"/")+e)),t.push(i)),1;if(o=0,r=r===""?".":r+":",HT(e))for(var a=0;a<e.length;a++){s=e[a];var l=r+Jv(s,a);o+=V0(s,t,n,l,i)}else if(l=Mz(e),typeof l=="function")for(e=l.call(e),a=0;!(s=e.next()).done;)s=s.value,l=r+Jv(s,a++),o+=V0(s,t,n,l,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function jy(e,t,n){if(e==null)return e;var r=[],i=0;return V0(e,r,"","",function(s){return t.call(n,s,i++)}),r}function Dz(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Zn={current:null},Y0={transition:null},kz={ReactCurrentDispatcher:Zn,ReactCurrentBatchConfig:Y0,ReactCurrentOwner:zx};Pt.Children={map:jy,forEach:function(e,t,n){jy(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return jy(e,function(){t++}),t},toArray:function(e){return jy(e,function(t){return t})||[]},only:function(e){if(!jx(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Pt.Component=Xf;Pt.Fragment=vz;Pt.Profiler=_z;Pt.PureComponent=Ux;Pt.StrictMode=wz;Pt.Suspense=Ez;Pt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=kz;Pt.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=m4({},e.props),i=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=zx.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(l in t)v4.call(t,l)&&!w4.hasOwnProperty(l)&&(r[l]=t[l]===void 0&&a!==void 0?a[l]:t[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Pp,type:e.type,key:i,ref:s,props:r,_owner:o}};Pt.createContext=function(e){return e={$$typeof:xz,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Sz,_context:e},e.Consumer=e};Pt.createElement=_4;Pt.createFactory=function(e){var t=_4.bind(null,e);return t.type=e,t};Pt.createRef=function(){return{current:null}};Pt.forwardRef=function(e){return{$$typeof:Iz,render:e}};Pt.isValidElement=jx;Pt.lazy=function(e){return{$$typeof:Az,_payload:{_status:-1,_result:e},_init:Dz}};Pt.memo=function(e,t){return{$$typeof:Tz,type:e,compare:t===void 0?null:t}};Pt.startTransition=function(e){var t=Y0.transition;Y0.transition={};try{e()}finally{Y0.transition=t}};Pt.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Pt.useCallback=function(e,t){return Zn.current.useCallback(e,t)};Pt.useContext=function(e){return Zn.current.useContext(e)};Pt.useDebugValue=function(){};Pt.useDeferredValue=function(e){return Zn.current.useDeferredValue(e)};Pt.useEffect=function(e,t){return Zn.current.useEffect(e,t)};Pt.useId=function(){return Zn.current.useId()};Pt.useImperativeHandle=function(e,t,n){return Zn.current.useImperativeHandle(e,t,n)};Pt.useInsertionEffect=function(e,t){return Zn.current.useInsertionEffect(e,t)};Pt.useLayoutEffect=function(e,t){return Zn.current.useLayoutEffect(e,t)};Pt.useMemo=function(e,t){return Zn.current.useMemo(e,t)};Pt.useReducer=function(e,t,n){return Zn.current.useReducer(e,t,n)};Pt.useRef=function(e){return Zn.current.useRef(e)};Pt.useState=function(e){return Zn.current.useState(e)};Pt.useSyncExternalStore=function(e,t,n){return Zn.current.useSyncExternalStore(e,t,n)};Pt.useTransition=function(){return Zn.current.useTransition()};Pt.version="18.2.0";p4.exports=Pt;var Mr=p4.exports;const Oz=d4(Mr);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fz=Mr,Bz=Symbol.for("react.element"),Rz=Symbol.for("react.fragment"),Lz=Object.prototype.hasOwnProperty,Cz=Fz.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Uz={key:!0,ref:!0,__self:!0,__source:!0};function S4(e,t,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)Lz.call(t,r)&&!Uz.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:Bz,type:e,key:s,ref:o,props:i,_owner:Cz.current}}wb.Fragment=Rz;wb.jsx=S4;wb.jsxs=S4;h4.exports=wb;var qt=h4.exports,j_={},x4={exports:{}},jr={},I4={exports:{}},E4={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(O,C){var F=O.length;O.push(C);t:for(;0<F;){var P=F-1>>>1,z=O[P];if(0<i(z,C))O[P]=C,O[F]=z,F=P;else break t}}function n(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var C=O[0],F=O.pop();if(F!==C){O[0]=F;t:for(var P=0,z=O.length,H=z>>>1;P<H;){var X=2*(P+1)-1,tt=O[X],Z=X+1,Y=O[Z];if(0>i(tt,F))Z<z&&0>i(Y,tt)?(O[P]=Y,O[Z]=F,P=Z):(O[P]=tt,O[X]=F,P=X);else if(Z<z&&0>i(Y,F))O[P]=Y,O[Z]=F,P=Z;else break t}}return C}function i(O,C){var F=O.sortIndex-C.sortIndex;return F!==0?F:O.id-C.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,f=null,d=3,h=!1,p=!1,g=!1,v=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(O){for(var C=n(c);C!==null;){if(C.callback===null)r(c);else if(C.startTime<=O)r(c),C.sortIndex=C.expirationTime,t(l,C);else break;C=n(c)}}function w(O){if(g=!1,b(O),!p)if(n(l)!==null)p=!0,$(S);else{var C=n(c);C!==null&&B(w,C.startTime-O)}}function S(O,C){p=!1,g&&(g=!1,y(T),T=-1),h=!0;var F=d;try{for(b(C),f=n(l);f!==null&&(!(f.expirationTime>C)||O&&!A());){var P=f.callback;if(typeof P=="function"){f.callback=null,d=f.priorityLevel;var z=P(f.expirationTime<=C);C=e.unstable_now(),typeof z=="function"?f.callback=z:f===n(l)&&r(l),b(C)}else r(l);f=n(l)}if(f!==null)var H=!0;else{var X=n(c);X!==null&&B(w,X.startTime-C),H=!1}return H}finally{f=null,d=F,h=!1}}var _=!1,x=null,T=-1,N=5,I=-1;function A(){return!(e.unstable_now()-I<N)}function k(){if(x!==null){var O=e.unstable_now();I=O;var C=!0;try{C=x(!0,O)}finally{C?R():(_=!1,x=null)}}else _=!1}var R;if(typeof m=="function")R=function(){m(k)};else if(typeof MessageChannel<"u"){var E=new MessageChannel,M=E.port2;E.port1.onmessage=k,R=function(){M.postMessage(null)}}else R=function(){v(k,0)};function $(O){x=O,_||(_=!0,R())}function B(O,C){T=v(function(){O(e.unstable_now())},C)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(O){O.callback=null},e.unstable_continueExecution=function(){p||h||(p=!0,$(S))},e.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<O?Math.floor(1e3/O):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(O){switch(d){case 1:case 2:case 3:var C=3;break;default:C=d}var F=d;d=C;try{return O()}finally{d=F}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(O,C){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var F=d;d=O;try{return C()}finally{d=F}},e.unstable_scheduleCallback=function(O,C,F){var P=e.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?P+F:P):F=P,O){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=F+z,O={id:u++,callback:C,priorityLevel:O,startTime:F,expirationTime:z,sortIndex:-1},F>P?(O.sortIndex=F,t(c,O),n(l)===null&&O===n(c)&&(g?(y(T),T=-1):g=!0,B(w,F-P))):(O.sortIndex=z,t(l,O),p||h||(p=!0,$(S))),O},e.unstable_shouldYield=A,e.unstable_wrapCallback=function(O){var C=d;return function(){var F=d;d=C;try{return O.apply(this,arguments)}finally{d=F}}}})(E4);I4.exports=E4;var Pz=I4.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T4=Mr,Br=Pz;function q(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var A4=new Set,Rh={};function $c(e,t){cf(e,t),cf(e+"Capture",t)}function cf(e,t){for(Rh[e]=t,e=0;e<t.length;e++)A4.add(t[e])}var No=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),V_=Object.prototype.hasOwnProperty,zz=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,XT={},QT={};function jz(e){return V_.call(QT,e)?!0:V_.call(XT,e)?!1:zz.test(e)?QT[e]=!0:(XT[e]=!0,!1)}function Vz(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Yz(e,t,n,r){if(t===null||typeof t>"u"||Vz(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Jn(e,t,n,r,i,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var En={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){En[e]=new Jn(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];En[t]=new Jn(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){En[e]=new Jn(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){En[e]=new Jn(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){En[e]=new Jn(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){En[e]=new Jn(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){En[e]=new Jn(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){En[e]=new Jn(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){En[e]=new Jn(e,5,!1,e.toLowerCase(),null,!1,!1)});var Vx=/[\-:]([a-z])/g;function Yx(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Vx,Yx);En[t]=new Jn(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Vx,Yx);En[t]=new Jn(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Vx,Yx);En[t]=new Jn(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){En[e]=new Jn(e,1,!1,e.toLowerCase(),null,!1,!1)});En.xlinkHref=new Jn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){En[e]=new Jn(e,1,!1,e.toLowerCase(),null,!0,!0)});function qx(e,t,n,r){var i=En.hasOwnProperty(t)?En[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Yz(t,n,i,r)&&(n=null),r||i===null?jz(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Po=T4.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Vy=Symbol.for("react.element"),pu=Symbol.for("react.portal"),yu=Symbol.for("react.fragment"),Wx=Symbol.for("react.strict_mode"),Y_=Symbol.for("react.profiler"),M4=Symbol.for("react.provider"),$4=Symbol.for("react.context"),Hx=Symbol.for("react.forward_ref"),q_=Symbol.for("react.suspense"),W_=Symbol.for("react.suspense_list"),Gx=Symbol.for("react.memo"),ra=Symbol.for("react.lazy"),N4=Symbol.for("react.offscreen"),KT=Symbol.iterator;function _d(e){return e===null||typeof e!="object"?null:(e=KT&&e[KT]||e["@@iterator"],typeof e=="function"?e:null)}var ze=Object.assign,tw;function qd(e){if(tw===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);tw=t&&t[1]||""}return`
`+tw+e}var ew=!1;function nw(e,t){if(!e||ew)return"";ew=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=o&&0<=a);break}}}finally{ew=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?qd(e):""}function qz(e){switch(e.tag){case 5:return qd(e.type);case 16:return qd("Lazy");case 13:return qd("Suspense");case 19:return qd("SuspenseList");case 0:case 2:case 15:return e=nw(e.type,!1),e;case 11:return e=nw(e.type.render,!1),e;case 1:return e=nw(e.type,!0),e;default:return""}}function H_(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case yu:return"Fragment";case pu:return"Portal";case Y_:return"Profiler";case Wx:return"StrictMode";case q_:return"Suspense";case W_:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case $4:return(e.displayName||"Context")+".Consumer";case M4:return(e._context.displayName||"Context")+".Provider";case Hx:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Gx:return t=e.displayName||null,t!==null?t:H_(e.type)||"Memo";case ra:t=e._payload,e=e._init;try{return H_(e(t))}catch{}}return null}function Wz(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return H_(t);case 8:return t===Wx?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Na(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function D4(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Hz(e){var t=D4(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Yy(e){e._valueTracker||(e._valueTracker=Hz(e))}function k4(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=D4(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Nm(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function G_(e,t){var n=t.checked;return ze({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function ZT(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Na(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function O4(e,t){t=t.checked,t!=null&&qx(e,"checked",t,!1)}function X_(e,t){O4(e,t);var n=Na(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Q_(e,t.type,n):t.hasOwnProperty("defaultValue")&&Q_(e,t.type,Na(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function JT(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Q_(e,t,n){(t!=="number"||Nm(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Wd=Array.isArray;function Ru(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Na(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function K_(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(q(91));return ze({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function tA(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(q(92));if(Wd(n)){if(1<n.length)throw Error(q(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Na(n)}}function F4(e,t){var n=Na(t.value),r=Na(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function eA(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function B4(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Z_(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?B4(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var qy,R4=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(qy=qy||document.createElement("div"),qy.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=qy.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Lh(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var ph={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Gz=["Webkit","ms","Moz","O"];Object.keys(ph).forEach(function(e){Gz.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ph[t]=ph[e]})});function L4(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||ph.hasOwnProperty(e)&&ph[e]?(""+t).trim():t+"px"}function C4(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=L4(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var Xz=ze({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function J_(e,t){if(t){if(Xz[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(q(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(q(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(q(61))}if(t.style!=null&&typeof t.style!="object")throw Error(q(62))}}function t2(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var e2=null;function Xx(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var n2=null,Lu=null,Cu=null;function nA(e){if(e=Vp(e)){if(typeof n2!="function")throw Error(q(280));var t=e.stateNode;t&&(t=Eb(t),n2(e.stateNode,e.type,t))}}function U4(e){Lu?Cu?Cu.push(e):Cu=[e]:Lu=e}function P4(){if(Lu){var e=Lu,t=Cu;if(Cu=Lu=null,nA(e),t)for(e=0;e<t.length;e++)nA(t[e])}}function z4(e,t){return e(t)}function j4(){}var rw=!1;function V4(e,t,n){if(rw)return e(t,n);rw=!0;try{return z4(e,t,n)}finally{rw=!1,(Lu!==null||Cu!==null)&&(j4(),P4())}}function Ch(e,t){var n=e.stateNode;if(n===null)return null;var r=Eb(n);if(r===null)return null;n=r[t];t:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break t;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(q(231,t,typeof n));return n}var r2=!1;if(No)try{var Sd={};Object.defineProperty(Sd,"passive",{get:function(){r2=!0}}),window.addEventListener("test",Sd,Sd),window.removeEventListener("test",Sd,Sd)}catch{r2=!1}function Qz(e,t,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var yh=!1,Dm=null,km=!1,i2=null,Kz={onError:function(e){yh=!0,Dm=e}};function Zz(e,t,n,r,i,s,o,a,l){yh=!1,Dm=null,Qz.apply(Kz,arguments)}function Jz(e,t,n,r,i,s,o,a,l){if(Zz.apply(this,arguments),yh){if(yh){var c=Dm;yh=!1,Dm=null}else throw Error(q(198));km||(km=!0,i2=c)}}function Nc(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Y4(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function rA(e){if(Nc(e)!==e)throw Error(q(188))}function tj(e){var t=e.alternate;if(!t){if(t=Nc(e),t===null)throw Error(q(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return rA(i),e;if(s===r)return rA(i),t;s=s.sibling}throw Error(q(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(q(189))}}if(n.alternate!==r)throw Error(q(190))}if(n.tag!==3)throw Error(q(188));return n.stateNode.current===n?e:t}function q4(e){return e=tj(e),e!==null?W4(e):null}function W4(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=W4(e);if(t!==null)return t;e=e.sibling}return null}var H4=Br.unstable_scheduleCallback,iA=Br.unstable_cancelCallback,ej=Br.unstable_shouldYield,nj=Br.unstable_requestPaint,Xe=Br.unstable_now,rj=Br.unstable_getCurrentPriorityLevel,Qx=Br.unstable_ImmediatePriority,G4=Br.unstable_UserBlockingPriority,Om=Br.unstable_NormalPriority,ij=Br.unstable_LowPriority,X4=Br.unstable_IdlePriority,_b=null,Ns=null;function sj(e){if(Ns&&typeof Ns.onCommitFiberRoot=="function")try{Ns.onCommitFiberRoot(_b,e,void 0,(e.current.flags&128)===128)}catch{}}var Ri=Math.clz32?Math.clz32:lj,oj=Math.log,aj=Math.LN2;function lj(e){return e>>>=0,e===0?32:31-(oj(e)/aj|0)|0}var Wy=64,Hy=4194304;function Hd(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Fm(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Hd(a):(s&=o,s!==0&&(r=Hd(s)))}else o=n&~i,o!==0?r=Hd(o):s!==0&&(r=Hd(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Ri(t),i=1<<n,r|=e[n],t&=~i;return r}function cj(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function uj(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-Ri(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=cj(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}function s2(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Q4(){var e=Wy;return Wy<<=1,!(Wy&4194240)&&(Wy=64),e}function iw(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function zp(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ri(t),e[t]=n}function fj(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-Ri(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}function Kx(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Ri(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var le=0;function K4(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Z4,Zx,J4,tD,eD,o2=!1,Gy=[],wa=null,_a=null,Sa=null,Uh=new Map,Ph=new Map,ua=[],dj="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function sA(e,t){switch(e){case"focusin":case"focusout":wa=null;break;case"dragenter":case"dragleave":_a=null;break;case"mouseover":case"mouseout":Sa=null;break;case"pointerover":case"pointerout":Uh.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ph.delete(t.pointerId)}}function xd(e,t,n,r,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},t!==null&&(t=Vp(t),t!==null&&Zx(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function hj(e,t,n,r,i){switch(t){case"focusin":return wa=xd(wa,e,t,n,r,i),!0;case"dragenter":return _a=xd(_a,e,t,n,r,i),!0;case"mouseover":return Sa=xd(Sa,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Uh.set(s,xd(Uh.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Ph.set(s,xd(Ph.get(s)||null,e,t,n,r,i)),!0}return!1}function nD(e){var t=Bl(e.target);if(t!==null){var n=Nc(t);if(n!==null){if(t=n.tag,t===13){if(t=Y4(n),t!==null){e.blockedOn=t,eD(e.priority,function(){J4(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function q0(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=a2(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);e2=r,n.target.dispatchEvent(r),e2=null}else return t=Vp(n),t!==null&&Zx(t),e.blockedOn=n,!1;t.shift()}return!0}function oA(e,t,n){q0(e)&&n.delete(t)}function pj(){o2=!1,wa!==null&&q0(wa)&&(wa=null),_a!==null&&q0(_a)&&(_a=null),Sa!==null&&q0(Sa)&&(Sa=null),Uh.forEach(oA),Ph.forEach(oA)}function Id(e,t){e.blockedOn===t&&(e.blockedOn=null,o2||(o2=!0,Br.unstable_scheduleCallback(Br.unstable_NormalPriority,pj)))}function zh(e){function t(i){return Id(i,e)}if(0<Gy.length){Id(Gy[0],e);for(var n=1;n<Gy.length;n++){var r=Gy[n];r.blockedOn===e&&(r.blockedOn=null)}}for(wa!==null&&Id(wa,e),_a!==null&&Id(_a,e),Sa!==null&&Id(Sa,e),Uh.forEach(t),Ph.forEach(t),n=0;n<ua.length;n++)r=ua[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<ua.length&&(n=ua[0],n.blockedOn===null);)nD(n),n.blockedOn===null&&ua.shift()}var Uu=Po.ReactCurrentBatchConfig,Bm=!0;function yj(e,t,n,r){var i=le,s=Uu.transition;Uu.transition=null;try{le=1,Jx(e,t,n,r)}finally{le=i,Uu.transition=s}}function mj(e,t,n,r){var i=le,s=Uu.transition;Uu.transition=null;try{le=4,Jx(e,t,n,r)}finally{le=i,Uu.transition=s}}function Jx(e,t,n,r){if(Bm){var i=a2(e,t,n,r);if(i===null)pw(e,t,r,Rm,n),sA(e,r);else if(hj(i,e,t,n,r))r.stopPropagation();else if(sA(e,r),t&4&&-1<dj.indexOf(e)){for(;i!==null;){var s=Vp(i);if(s!==null&&Z4(s),s=a2(e,t,n,r),s===null&&pw(e,t,r,Rm,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else pw(e,t,r,null,n)}}var Rm=null;function a2(e,t,n,r){if(Rm=null,e=Xx(r),e=Bl(e),e!==null)if(t=Nc(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Y4(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Rm=e,null}function rD(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(rj()){case Qx:return 1;case G4:return 4;case Om:case ij:return 16;case X4:return 536870912;default:return 16}default:return 16}}var ma=null,tI=null,W0=null;function iD(){if(W0)return W0;var e,t=tI,n=t.length,r,i="value"in ma?ma.value:ma.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[s-r];r++);return W0=i.slice(e,1<r?1-r:void 0)}function H0(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Xy(){return!0}function aA(){return!1}function Vr(e){function t(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Xy:aA,this.isPropagationStopped=aA,this}return ze(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Xy)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Xy)},persist:function(){},isPersistent:Xy}),t}var Qf={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},eI=Vr(Qf),jp=ze({},Qf,{view:0,detail:0}),gj=Vr(jp),sw,ow,Ed,Sb=ze({},jp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:nI,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ed&&(Ed&&e.type==="mousemove"?(sw=e.screenX-Ed.screenX,ow=e.screenY-Ed.screenY):ow=sw=0,Ed=e),sw)},movementY:function(e){return"movementY"in e?e.movementY:ow}}),lA=Vr(Sb),bj=ze({},Sb,{dataTransfer:0}),vj=Vr(bj),wj=ze({},jp,{relatedTarget:0}),aw=Vr(wj),_j=ze({},Qf,{animationName:0,elapsedTime:0,pseudoElement:0}),Sj=Vr(_j),xj=ze({},Qf,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Ij=Vr(xj),Ej=ze({},Qf,{data:0}),cA=Vr(Ej),Tj={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Aj={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Mj={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $j(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Mj[e])?!!t[e]:!1}function nI(){return $j}var Nj=ze({},jp,{key:function(e){if(e.key){var t=Tj[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=H0(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Aj[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:nI,charCode:function(e){return e.type==="keypress"?H0(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?H0(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Dj=Vr(Nj),kj=ze({},Sb,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),uA=Vr(kj),Oj=ze({},jp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:nI}),Fj=Vr(Oj),Bj=ze({},Qf,{propertyName:0,elapsedTime:0,pseudoElement:0}),Rj=Vr(Bj),Lj=ze({},Sb,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Cj=Vr(Lj),Uj=[9,13,27,32],rI=No&&"CompositionEvent"in window,mh=null;No&&"documentMode"in document&&(mh=document.documentMode);var Pj=No&&"TextEvent"in window&&!mh,sD=No&&(!rI||mh&&8<mh&&11>=mh),fA=" ",dA=!1;function oD(e,t){switch(e){case"keyup":return Uj.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function aD(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var mu=!1;function zj(e,t){switch(e){case"compositionend":return aD(t);case"keypress":return t.which!==32?null:(dA=!0,fA);case"textInput":return e=t.data,e===fA&&dA?null:e;default:return null}}function jj(e,t){if(mu)return e==="compositionend"||!rI&&oD(e,t)?(e=iD(),W0=tI=ma=null,mu=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return sD&&t.locale!=="ko"?null:t.data;default:return null}}var Vj={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hA(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Vj[e.type]:t==="textarea"}function lD(e,t,n,r){U4(r),t=Lm(t,"onChange"),0<t.length&&(n=new eI("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var gh=null,jh=null;function Yj(e){vD(e,0)}function xb(e){var t=vu(e);if(k4(t))return e}function qj(e,t){if(e==="change")return t}var cD=!1;if(No){var lw;if(No){var cw="oninput"in document;if(!cw){var pA=document.createElement("div");pA.setAttribute("oninput","return;"),cw=typeof pA.oninput=="function"}lw=cw}else lw=!1;cD=lw&&(!document.documentMode||9<document.documentMode)}function yA(){gh&&(gh.detachEvent("onpropertychange",uD),jh=gh=null)}function uD(e){if(e.propertyName==="value"&&xb(jh)){var t=[];lD(t,jh,e,Xx(e)),V4(Yj,t)}}function Wj(e,t,n){e==="focusin"?(yA(),gh=t,jh=n,gh.attachEvent("onpropertychange",uD)):e==="focusout"&&yA()}function Hj(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return xb(jh)}function Gj(e,t){if(e==="click")return xb(t)}function Xj(e,t){if(e==="input"||e==="change")return xb(t)}function Qj(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ui=typeof Object.is=="function"?Object.is:Qj;function Vh(e,t){if(Ui(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!V_.call(t,i)||!Ui(e[i],t[i]))return!1}return!0}function mA(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function gA(e,t){var n=mA(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}t:{for(;n;){if(n.nextSibling){n=n.nextSibling;break t}n=n.parentNode}n=void 0}n=mA(n)}}function fD(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?fD(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function dD(){for(var e=window,t=Nm();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Nm(e.document)}return t}function iI(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Kj(e){var t=dD(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fD(n.ownerDocument.documentElement,n)){if(r!==null&&iI(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=gA(n,s);var o=gA(n,r);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Zj=No&&"documentMode"in document&&11>=document.documentMode,gu=null,l2=null,bh=null,c2=!1;function bA(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;c2||gu==null||gu!==Nm(r)||(r=gu,"selectionStart"in r&&iI(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),bh&&Vh(bh,r)||(bh=r,r=Lm(l2,"onSelect"),0<r.length&&(t=new eI("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gu)))}function Qy(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var bu={animationend:Qy("Animation","AnimationEnd"),animationiteration:Qy("Animation","AnimationIteration"),animationstart:Qy("Animation","AnimationStart"),transitionend:Qy("Transition","TransitionEnd")},uw={},hD={};No&&(hD=document.createElement("div").style,"AnimationEvent"in window||(delete bu.animationend.animation,delete bu.animationiteration.animation,delete bu.animationstart.animation),"TransitionEvent"in window||delete bu.transitionend.transition);function Ib(e){if(uw[e])return uw[e];if(!bu[e])return e;var t=bu[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in hD)return uw[e]=t[n];return e}var pD=Ib("animationend"),yD=Ib("animationiteration"),mD=Ib("animationstart"),gD=Ib("transitionend"),bD=new Map,vA="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ja(e,t){bD.set(e,t),$c(t,[e])}for(var fw=0;fw<vA.length;fw++){var dw=vA[fw],Jj=dw.toLowerCase(),tV=dw[0].toUpperCase()+dw.slice(1);Ja(Jj,"on"+tV)}Ja(pD,"onAnimationEnd");Ja(yD,"onAnimationIteration");Ja(mD,"onAnimationStart");Ja("dblclick","onDoubleClick");Ja("focusin","onFocus");Ja("focusout","onBlur");Ja(gD,"onTransitionEnd");cf("onMouseEnter",["mouseout","mouseover"]);cf("onMouseLeave",["mouseout","mouseover"]);cf("onPointerEnter",["pointerout","pointerover"]);cf("onPointerLeave",["pointerout","pointerover"]);$c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));$c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));$c("onBeforeInput",["compositionend","keypress","textInput","paste"]);$c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));$c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));$c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Gd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),eV=new Set("cancel close invalid load scroll toggle".split(" ").concat(Gd));function wA(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Jz(r,t,void 0,e),e.currentTarget=null}function vD(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;t:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break t;wA(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break t;wA(i,a,c),s=l}}}if(km)throw e=i2,km=!1,i2=null,e}function Se(e,t){var n=t[p2];n===void 0&&(n=t[p2]=new Set);var r=e+"__bubble";n.has(r)||(wD(t,e,2,!1),n.add(r))}function hw(e,t,n){var r=0;t&&(r|=4),wD(n,e,r,t)}var Ky="_reactListening"+Math.random().toString(36).slice(2);function Yh(e){if(!e[Ky]){e[Ky]=!0,A4.forEach(function(n){n!=="selectionchange"&&(eV.has(n)||hw(n,!1,e),hw(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ky]||(t[Ky]=!0,hw("selectionchange",!1,t))}}function wD(e,t,n,r){switch(rD(t)){case 1:var i=yj;break;case 4:i=mj;break;default:i=Jx}n=i.bind(null,t,n,e),i=void 0,!r2||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function pw(e,t,n,r,i){var s=r;if(!(t&1)&&!(t&2)&&r!==null)t:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Bl(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue t}a=a.parentNode}}r=r.return}V4(function(){var c=s,u=Xx(n),f=[];t:{var d=bD.get(e);if(d!==void 0){var h=eI,p=e;switch(e){case"keypress":if(H0(n)===0)break t;case"keydown":case"keyup":h=Dj;break;case"focusin":p="focus",h=aw;break;case"focusout":p="blur",h=aw;break;case"beforeblur":case"afterblur":h=aw;break;case"click":if(n.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=lA;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=vj;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=Fj;break;case pD:case yD:case mD:h=Sj;break;case gD:h=Rj;break;case"scroll":h=gj;break;case"wheel":h=Cj;break;case"copy":case"cut":case"paste":h=Ij;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=uA}var g=(t&4)!==0,v=!g&&e==="scroll",y=g?d!==null?d+"Capture":null:d;g=[];for(var m=c,b;m!==null;){b=m;var w=b.stateNode;if(b.tag===5&&w!==null&&(b=w,y!==null&&(w=Ch(m,y),w!=null&&g.push(qh(m,w,b)))),v)break;m=m.return}0<g.length&&(d=new h(d,p,null,n,u),f.push({event:d,listeners:g}))}}if(!(t&7)){t:{if(d=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",d&&n!==e2&&(p=n.relatedTarget||n.fromElement)&&(Bl(p)||p[Do]))break t;if((h||d)&&(d=u.window===u?u:(d=u.ownerDocument)?d.defaultView||d.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=c,p=p?Bl(p):null,p!==null&&(v=Nc(p),p!==v||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=c),h!==p)){if(g=lA,w="onMouseLeave",y="onMouseEnter",m="mouse",(e==="pointerout"||e==="pointerover")&&(g=uA,w="onPointerLeave",y="onPointerEnter",m="pointer"),v=h==null?d:vu(h),b=p==null?d:vu(p),d=new g(w,m+"leave",h,n,u),d.target=v,d.relatedTarget=b,w=null,Bl(u)===c&&(g=new g(y,m+"enter",p,n,u),g.target=b,g.relatedTarget=v,w=g),v=w,h&&p)e:{for(g=h,y=p,m=0,b=g;b;b=Lc(b))m++;for(b=0,w=y;w;w=Lc(w))b++;for(;0<m-b;)g=Lc(g),m--;for(;0<b-m;)y=Lc(y),b--;for(;m--;){if(g===y||y!==null&&g===y.alternate)break e;g=Lc(g),y=Lc(y)}g=null}else g=null;h!==null&&_A(f,d,h,g,!1),p!==null&&v!==null&&_A(f,v,p,g,!0)}}t:{if(d=c?vu(c):window,h=d.nodeName&&d.nodeName.toLowerCase(),h==="select"||h==="input"&&d.type==="file")var S=qj;else if(hA(d))if(cD)S=Xj;else{S=Hj;var _=Wj}else(h=d.nodeName)&&h.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(S=Gj);if(S&&(S=S(e,c))){lD(f,S,n,u);break t}_&&_(e,d,c),e==="focusout"&&(_=d._wrapperState)&&_.controlled&&d.type==="number"&&Q_(d,"number",d.value)}switch(_=c?vu(c):window,e){case"focusin":(hA(_)||_.contentEditable==="true")&&(gu=_,l2=c,bh=null);break;case"focusout":bh=l2=gu=null;break;case"mousedown":c2=!0;break;case"contextmenu":case"mouseup":case"dragend":c2=!1,bA(f,n,u);break;case"selectionchange":if(Zj)break;case"keydown":case"keyup":bA(f,n,u)}var x;if(rI)t:{switch(e){case"compositionstart":var T="onCompositionStart";break t;case"compositionend":T="onCompositionEnd";break t;case"compositionupdate":T="onCompositionUpdate";break t}T=void 0}else mu?oD(e,n)&&(T="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(sD&&n.locale!=="ko"&&(mu||T!=="onCompositionStart"?T==="onCompositionEnd"&&mu&&(x=iD()):(ma=u,tI="value"in ma?ma.value:ma.textContent,mu=!0)),_=Lm(c,T),0<_.length&&(T=new cA(T,e,null,n,u),f.push({event:T,listeners:_}),x?T.data=x:(x=aD(n),x!==null&&(T.data=x)))),(x=Pj?zj(e,n):jj(e,n))&&(c=Lm(c,"onBeforeInput"),0<c.length&&(u=new cA("onBeforeInput","beforeinput",null,n,u),f.push({event:u,listeners:c}),u.data=x))}vD(f,t)})}function qh(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Lm(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Ch(e,n),s!=null&&r.unshift(qh(e,s,i)),s=Ch(e,t),s!=null&&r.push(qh(e,s,i))),e=e.return}return r}function Lc(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function _A(e,t,n,r,i){for(var s=t._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=Ch(n,s),l!=null&&o.unshift(qh(n,l,a))):i||(l=Ch(n,s),l!=null&&o.push(qh(n,l,a)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var nV=/\r\n?/g,rV=/\u0000|\uFFFD/g;function SA(e){return(typeof e=="string"?e:""+e).replace(nV,`
`).replace(rV,"")}function Zy(e,t,n){if(t=SA(t),SA(e)!==t&&n)throw Error(q(425))}function Cm(){}var u2=null,f2=null;function d2(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var h2=typeof setTimeout=="function"?setTimeout:void 0,iV=typeof clearTimeout=="function"?clearTimeout:void 0,xA=typeof Promise=="function"?Promise:void 0,sV=typeof queueMicrotask=="function"?queueMicrotask:typeof xA<"u"?function(e){return xA.resolve(null).then(e).catch(oV)}:h2;function oV(e){setTimeout(function(){throw e})}function yw(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),zh(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);zh(t)}function xa(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function IA(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Kf=Math.random().toString(36).slice(2),hs="__reactFiber$"+Kf,Wh="__reactProps$"+Kf,Do="__reactContainer$"+Kf,p2="__reactEvents$"+Kf,aV="__reactListeners$"+Kf,lV="__reactHandles$"+Kf;function Bl(e){var t=e[hs];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Do]||n[hs]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=IA(e);e!==null;){if(n=e[hs])return n;e=IA(e)}return t}e=n,n=e.parentNode}return null}function Vp(e){return e=e[hs]||e[Do],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function vu(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(q(33))}function Eb(e){return e[Wh]||null}var y2=[],wu=-1;function tl(e){return{current:e}}function xe(e){0>wu||(e.current=y2[wu],y2[wu]=null,wu--)}function we(e,t){wu++,y2[wu]=e.current,e.current=t}var Da={},Rn=tl(Da),cr=tl(!1),lc=Da;function uf(e,t){var n=e.type.contextTypes;if(!n)return Da;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function ur(e){return e=e.childContextTypes,e!=null}function Um(){xe(cr),xe(Rn)}function EA(e,t,n){if(Rn.current!==Da)throw Error(q(168));we(Rn,t),we(cr,n)}function _D(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(q(108,Wz(e)||"Unknown",i));return ze({},n,r)}function Pm(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Da,lc=Rn.current,we(Rn,e),we(cr,cr.current),!0}function TA(e,t,n){var r=e.stateNode;if(!r)throw Error(q(169));n?(e=_D(e,t,lc),r.__reactInternalMemoizedMergedChildContext=e,xe(cr),xe(Rn),we(Rn,e)):xe(cr),we(cr,n)}var fo=null,Tb=!1,mw=!1;function SD(e){fo===null?fo=[e]:fo.push(e)}function cV(e){Tb=!0,SD(e)}function el(){if(!mw&&fo!==null){mw=!0;var e=0,t=le;try{var n=fo;for(le=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}fo=null,Tb=!1}catch(i){throw fo!==null&&(fo=fo.slice(e+1)),H4(Qx,el),i}finally{le=t,mw=!1}}return null}var _u=[],Su=0,zm=null,jm=0,Zr=[],Jr=0,cc=null,go=1,bo="";function vl(e,t){_u[Su++]=jm,_u[Su++]=zm,zm=e,jm=t}function xD(e,t,n){Zr[Jr++]=go,Zr[Jr++]=bo,Zr[Jr++]=cc,cc=e;var r=go;e=bo;var i=32-Ri(r)-1;r&=~(1<<i),n+=1;var s=32-Ri(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,go=1<<32-Ri(t)+i|n<<i|r,bo=s+e}else go=1<<s|n<<i|r,bo=e}function sI(e){e.return!==null&&(vl(e,1),xD(e,1,0))}function oI(e){for(;e===zm;)zm=_u[--Su],_u[Su]=null,jm=_u[--Su],_u[Su]=null;for(;e===cc;)cc=Zr[--Jr],Zr[Jr]=null,bo=Zr[--Jr],Zr[Jr]=null,go=Zr[--Jr],Zr[Jr]=null}var Or=null,$r=null,Ae=!1,Ni=null;function ID(e,t){var n=ii(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function AA(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Or=e,$r=xa(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Or=e,$r=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=cc!==null?{id:go,overflow:bo}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=ii(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Or=e,$r=null,!0):!1;default:return!1}}function m2(e){return(e.mode&1)!==0&&(e.flags&128)===0}function g2(e){if(Ae){var t=$r;if(t){var n=t;if(!AA(e,t)){if(m2(e))throw Error(q(418));t=xa(n.nextSibling);var r=Or;t&&AA(e,t)?ID(r,n):(e.flags=e.flags&-4097|2,Ae=!1,Or=e)}}else{if(m2(e))throw Error(q(418));e.flags=e.flags&-4097|2,Ae=!1,Or=e}}}function MA(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Or=e}function Jy(e){if(e!==Or)return!1;if(!Ae)return MA(e),Ae=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!d2(e.type,e.memoizedProps)),t&&(t=$r)){if(m2(e))throw ED(),Error(q(418));for(;t;)ID(e,t),t=xa(t.nextSibling)}if(MA(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(q(317));t:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){$r=xa(e.nextSibling);break t}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}$r=null}}else $r=Or?xa(e.stateNode.nextSibling):null;return!0}function ED(){for(var e=$r;e;)e=xa(e.nextSibling)}function ff(){$r=Or=null,Ae=!1}function aI(e){Ni===null?Ni=[e]:Ni.push(e)}var uV=Po.ReactCurrentBatchConfig;function Ei(e,t){if(e&&e.defaultProps){t=ze({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}var Vm=tl(null),Ym=null,xu=null,lI=null;function cI(){lI=xu=Ym=null}function uI(e){var t=Vm.current;xe(Vm),e._currentValue=t}function b2(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Pu(e,t){Ym=e,lI=xu=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ar=!0),e.firstContext=null)}function pi(e){var t=e._currentValue;if(lI!==e)if(e={context:e,memoizedValue:t,next:null},xu===null){if(Ym===null)throw Error(q(308));xu=e,Ym.dependencies={lanes:0,firstContext:e}}else xu=xu.next=e;return t}var Rl=null;function fI(e){Rl===null?Rl=[e]:Rl.push(e)}function TD(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,fI(t)):(n.next=i.next,i.next=n),t.interleaved=n,ko(e,r)}function ko(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var ia=!1;function dI(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function AD(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Io(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ia(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Gt&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,ko(e,n)}return i=r.interleaved,i===null?(t.next=t,fI(r)):(t.next=i.next,i.next=t),r.interleaved=t,ko(e,n)}function G0(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Kx(e,n)}}function $A(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function qm(e,t,n,r){var i=e.updateQueue;ia=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=e.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var f=i.baseState;o=0,u=c=l=null,a=s;do{var d=a.lane,h=a.eventTime;if((r&d)===d){u!==null&&(u=u.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});t:{var p=e,g=a;switch(d=t,h=n,g.tag){case 1:if(p=g.payload,typeof p=="function"){f=p.call(h,f,d);break t}f=p;break t;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,d=typeof p=="function"?p.call(h,f,d):p,d==null)break t;f=ze({},f,d);break t;case 2:ia=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,d=i.effects,d===null?i.effects=[a]:d.push(a))}else h={eventTime:h,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=h,l=f):u=u.next=h,o|=d;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;d=a,a=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(u===null&&(l=f),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);fc|=o,e.lanes=o,e.memoizedState=f}}function NA(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(q(191,i));i.call(r)}}}var MD=new T4.Component().refs;function v2(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:ze({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Ab={isMounted:function(e){return(e=e._reactInternals)?Nc(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Hn(),i=Ta(e),s=Io(r,i);s.payload=t,n!=null&&(s.callback=n),t=Ia(e,s,i),t!==null&&(Li(t,e,i,r),G0(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Hn(),i=Ta(e),s=Io(r,i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=Ia(e,s,i),t!==null&&(Li(t,e,i,r),G0(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Hn(),r=Ta(e),i=Io(n,r);i.tag=2,t!=null&&(i.callback=t),t=Ia(e,i,r),t!==null&&(Li(t,e,r,n),G0(t,e,r))}};function DA(e,t,n,r,i,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,o):t.prototype&&t.prototype.isPureReactComponent?!Vh(n,r)||!Vh(i,s):!0}function $D(e,t,n){var r=!1,i=Da,s=t.contextType;return typeof s=="object"&&s!==null?s=pi(s):(i=ur(t)?lc:Rn.current,r=t.contextTypes,s=(r=r!=null)?uf(e,i):Da),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ab,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function kA(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ab.enqueueReplaceState(t,t.state,null)}function w2(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=MD,dI(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=pi(s):(s=ur(t)?lc:Rn.current,i.context=uf(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(v2(e,t,s,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&Ab.enqueueReplaceState(i,i.state,null),qm(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Td(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(q(309));var r=n.stateNode}if(!r)throw Error(q(147,e));var i=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var a=i.refs;a===MD&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(q(284));if(!n._owner)throw Error(q(290,e))}return e}function t0(e,t){throw e=Object.prototype.toString.call(t),Error(q(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function OA(e){var t=e._init;return t(e._payload)}function ND(e){function t(y,m){if(e){var b=y.deletions;b===null?(y.deletions=[m],y.flags|=16):b.push(m)}}function n(y,m){if(!e)return null;for(;m!==null;)t(y,m),m=m.sibling;return null}function r(y,m){for(y=new Map;m!==null;)m.key!==null?y.set(m.key,m):y.set(m.index,m),m=m.sibling;return y}function i(y,m){return y=Aa(y,m),y.index=0,y.sibling=null,y}function s(y,m,b){return y.index=b,e?(b=y.alternate,b!==null?(b=b.index,b<m?(y.flags|=2,m):b):(y.flags|=2,m)):(y.flags|=1048576,m)}function o(y){return e&&y.alternate===null&&(y.flags|=2),y}function a(y,m,b,w){return m===null||m.tag!==6?(m=xw(b,y.mode,w),m.return=y,m):(m=i(m,b),m.return=y,m)}function l(y,m,b,w){var S=b.type;return S===yu?u(y,m,b.props.children,w,b.key):m!==null&&(m.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===ra&&OA(S)===m.type)?(w=i(m,b.props),w.ref=Td(y,m,b),w.return=y,w):(w=tm(b.type,b.key,b.props,null,y.mode,w),w.ref=Td(y,m,b),w.return=y,w)}function c(y,m,b,w){return m===null||m.tag!==4||m.stateNode.containerInfo!==b.containerInfo||m.stateNode.implementation!==b.implementation?(m=Iw(b,y.mode,w),m.return=y,m):(m=i(m,b.children||[]),m.return=y,m)}function u(y,m,b,w,S){return m===null||m.tag!==7?(m=Jl(b,y.mode,w,S),m.return=y,m):(m=i(m,b),m.return=y,m)}function f(y,m,b){if(typeof m=="string"&&m!==""||typeof m=="number")return m=xw(""+m,y.mode,b),m.return=y,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Vy:return b=tm(m.type,m.key,m.props,null,y.mode,b),b.ref=Td(y,null,m),b.return=y,b;case pu:return m=Iw(m,y.mode,b),m.return=y,m;case ra:var w=m._init;return f(y,w(m._payload),b)}if(Wd(m)||_d(m))return m=Jl(m,y.mode,b,null),m.return=y,m;t0(y,m)}return null}function d(y,m,b,w){var S=m!==null?m.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return S!==null?null:a(y,m,""+b,w);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Vy:return b.key===S?l(y,m,b,w):null;case pu:return b.key===S?c(y,m,b,w):null;case ra:return S=b._init,d(y,m,S(b._payload),w)}if(Wd(b)||_d(b))return S!==null?null:u(y,m,b,w,null);t0(y,b)}return null}function h(y,m,b,w,S){if(typeof w=="string"&&w!==""||typeof w=="number")return y=y.get(b)||null,a(m,y,""+w,S);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Vy:return y=y.get(w.key===null?b:w.key)||null,l(m,y,w,S);case pu:return y=y.get(w.key===null?b:w.key)||null,c(m,y,w,S);case ra:var _=w._init;return h(y,m,b,_(w._payload),S)}if(Wd(w)||_d(w))return y=y.get(b)||null,u(m,y,w,S,null);t0(m,w)}return null}function p(y,m,b,w){for(var S=null,_=null,x=m,T=m=0,N=null;x!==null&&T<b.length;T++){x.index>T?(N=x,x=null):N=x.sibling;var I=d(y,x,b[T],w);if(I===null){x===null&&(x=N);break}e&&x&&I.alternate===null&&t(y,x),m=s(I,m,T),_===null?S=I:_.sibling=I,_=I,x=N}if(T===b.length)return n(y,x),Ae&&vl(y,T),S;if(x===null){for(;T<b.length;T++)x=f(y,b[T],w),x!==null&&(m=s(x,m,T),_===null?S=x:_.sibling=x,_=x);return Ae&&vl(y,T),S}for(x=r(y,x);T<b.length;T++)N=h(x,y,T,b[T],w),N!==null&&(e&&N.alternate!==null&&x.delete(N.key===null?T:N.key),m=s(N,m,T),_===null?S=N:_.sibling=N,_=N);return e&&x.forEach(function(A){return t(y,A)}),Ae&&vl(y,T),S}function g(y,m,b,w){var S=_d(b);if(typeof S!="function")throw Error(q(150));if(b=S.call(b),b==null)throw Error(q(151));for(var _=S=null,x=m,T=m=0,N=null,I=b.next();x!==null&&!I.done;T++,I=b.next()){x.index>T?(N=x,x=null):N=x.sibling;var A=d(y,x,I.value,w);if(A===null){x===null&&(x=N);break}e&&x&&A.alternate===null&&t(y,x),m=s(A,m,T),_===null?S=A:_.sibling=A,_=A,x=N}if(I.done)return n(y,x),Ae&&vl(y,T),S;if(x===null){for(;!I.done;T++,I=b.next())I=f(y,I.value,w),I!==null&&(m=s(I,m,T),_===null?S=I:_.sibling=I,_=I);return Ae&&vl(y,T),S}for(x=r(y,x);!I.done;T++,I=b.next())I=h(x,y,T,I.value,w),I!==null&&(e&&I.alternate!==null&&x.delete(I.key===null?T:I.key),m=s(I,m,T),_===null?S=I:_.sibling=I,_=I);return e&&x.forEach(function(k){return t(y,k)}),Ae&&vl(y,T),S}function v(y,m,b,w){if(typeof b=="object"&&b!==null&&b.type===yu&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Vy:t:{for(var S=b.key,_=m;_!==null;){if(_.key===S){if(S=b.type,S===yu){if(_.tag===7){n(y,_.sibling),m=i(_,b.props.children),m.return=y,y=m;break t}}else if(_.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===ra&&OA(S)===_.type){n(y,_.sibling),m=i(_,b.props),m.ref=Td(y,_,b),m.return=y,y=m;break t}n(y,_);break}else t(y,_);_=_.sibling}b.type===yu?(m=Jl(b.props.children,y.mode,w,b.key),m.return=y,y=m):(w=tm(b.type,b.key,b.props,null,y.mode,w),w.ref=Td(y,m,b),w.return=y,y=w)}return o(y);case pu:t:{for(_=b.key;m!==null;){if(m.key===_)if(m.tag===4&&m.stateNode.containerInfo===b.containerInfo&&m.stateNode.implementation===b.implementation){n(y,m.sibling),m=i(m,b.children||[]),m.return=y,y=m;break t}else{n(y,m);break}else t(y,m);m=m.sibling}m=Iw(b,y.mode,w),m.return=y,y=m}return o(y);case ra:return _=b._init,v(y,m,_(b._payload),w)}if(Wd(b))return p(y,m,b,w);if(_d(b))return g(y,m,b,w);t0(y,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,m!==null&&m.tag===6?(n(y,m.sibling),m=i(m,b),m.return=y,y=m):(n(y,m),m=xw(b,y.mode,w),m.return=y,y=m),o(y)):n(y,m)}return v}var df=ND(!0),DD=ND(!1),Yp={},Ds=tl(Yp),Hh=tl(Yp),Gh=tl(Yp);function Ll(e){if(e===Yp)throw Error(q(174));return e}function hI(e,t){switch(we(Gh,t),we(Hh,e),we(Ds,Yp),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Z_(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Z_(t,e)}xe(Ds),we(Ds,t)}function hf(){xe(Ds),xe(Hh),xe(Gh)}function kD(e){Ll(Gh.current);var t=Ll(Ds.current),n=Z_(t,e.type);t!==n&&(we(Hh,e),we(Ds,n))}function pI(e){Hh.current===e&&(xe(Ds),xe(Hh))}var Fe=tl(0);function Wm(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var gw=[];function yI(){for(var e=0;e<gw.length;e++)gw[e]._workInProgressVersionPrimary=null;gw.length=0}var X0=Po.ReactCurrentDispatcher,bw=Po.ReactCurrentBatchConfig,uc=0,Ue=null,rn=null,pn=null,Hm=!1,vh=!1,Xh=0,fV=0;function Tn(){throw Error(q(321))}function mI(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Ui(e[n],t[n]))return!1;return!0}function gI(e,t,n,r,i,s){if(uc=s,Ue=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,X0.current=e===null||e.memoizedState===null?yV:mV,e=n(r,i),vh){s=0;do{if(vh=!1,Xh=0,25<=s)throw Error(q(301));s+=1,pn=rn=null,t.updateQueue=null,X0.current=gV,e=n(r,i)}while(vh)}if(X0.current=Gm,t=rn!==null&&rn.next!==null,uc=0,pn=rn=Ue=null,Hm=!1,t)throw Error(q(300));return e}function bI(){var e=Xh!==0;return Xh=0,e}function as(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pn===null?Ue.memoizedState=pn=e:pn=pn.next=e,pn}function yi(){if(rn===null){var e=Ue.alternate;e=e!==null?e.memoizedState:null}else e=rn.next;var t=pn===null?Ue.memoizedState:pn.next;if(t!==null)pn=t,rn=e;else{if(e===null)throw Error(q(310));rn=e,e={memoizedState:rn.memoizedState,baseState:rn.baseState,baseQueue:rn.baseQueue,queue:rn.queue,next:null},pn===null?Ue.memoizedState=pn=e:pn=pn.next=e}return pn}function Qh(e,t){return typeof t=="function"?t(e):t}function vw(e){var t=yi(),n=t.queue;if(n===null)throw Error(q(311));n.lastRenderedReducer=e;var r=rn,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((uc&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var f={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=f,o=r):l=l.next=f,Ue.lanes|=u,fc|=u}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,Ui(r,t.memoizedState)||(ar=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=l,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do s=i.lane,Ue.lanes|=s,fc|=s,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ww(e){var t=yi(),n=t.queue;if(n===null)throw Error(q(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=e(s,o.action),o=o.next;while(o!==i);Ui(s,t.memoizedState)||(ar=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function OD(){}function FD(e,t){var n=Ue,r=yi(),i=t(),s=!Ui(r.memoizedState,i);if(s&&(r.memoizedState=i,ar=!0),r=r.queue,vI(LD.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||pn!==null&&pn.memoizedState.tag&1){if(n.flags|=2048,Kh(9,RD.bind(null,n,r,i,t),void 0,null),gn===null)throw Error(q(349));uc&30||BD(n,t,i)}return i}function BD(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ue.updateQueue,t===null?(t={lastEffect:null,stores:null},Ue.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function RD(e,t,n,r){t.value=n,t.getSnapshot=r,CD(t)&&UD(e)}function LD(e,t,n){return n(function(){CD(t)&&UD(e)})}function CD(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Ui(e,n)}catch{return!0}}function UD(e){var t=ko(e,1);t!==null&&Li(t,e,1,-1)}function FA(e){var t=as();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Qh,lastRenderedState:e},t.queue=e,e=e.dispatch=pV.bind(null,Ue,e),[t.memoizedState,e]}function Kh(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Ue.updateQueue,t===null?(t={lastEffect:null,stores:null},Ue.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function PD(){return yi().memoizedState}function Q0(e,t,n,r){var i=as();Ue.flags|=e,i.memoizedState=Kh(1|t,n,void 0,r===void 0?null:r)}function Mb(e,t,n,r){var i=yi();r=r===void 0?null:r;var s=void 0;if(rn!==null){var o=rn.memoizedState;if(s=o.destroy,r!==null&&mI(r,o.deps)){i.memoizedState=Kh(t,n,s,r);return}}Ue.flags|=e,i.memoizedState=Kh(1|t,n,s,r)}function BA(e,t){return Q0(8390656,8,e,t)}function vI(e,t){return Mb(2048,8,e,t)}function zD(e,t){return Mb(4,2,e,t)}function jD(e,t){return Mb(4,4,e,t)}function VD(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function YD(e,t,n){return n=n!=null?n.concat([e]):null,Mb(4,4,VD.bind(null,t,e),n)}function wI(){}function qD(e,t){var n=yi();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&mI(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function WD(e,t){var n=yi();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&mI(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function HD(e,t,n){return uc&21?(Ui(n,t)||(n=Q4(),Ue.lanes|=n,fc|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ar=!0),e.memoizedState=n)}function dV(e,t){var n=le;le=n!==0&&4>n?n:4,e(!0);var r=bw.transition;bw.transition={};try{e(!1),t()}finally{le=n,bw.transition=r}}function GD(){return yi().memoizedState}function hV(e,t,n){var r=Ta(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},XD(e))QD(t,n);else if(n=TD(e,t,n,r),n!==null){var i=Hn();Li(n,e,r,i),KD(n,t,r)}}function pV(e,t,n){var r=Ta(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(XD(e))QD(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Ui(a,o)){var l=t.interleaved;l===null?(i.next=i,fI(t)):(i.next=l.next,l.next=i),t.interleaved=i;return}}catch{}finally{}n=TD(e,t,i,r),n!==null&&(i=Hn(),Li(n,e,r,i),KD(n,t,r))}}function XD(e){var t=e.alternate;return e===Ue||t!==null&&t===Ue}function QD(e,t){vh=Hm=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function KD(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Kx(e,n)}}var Gm={readContext:pi,useCallback:Tn,useContext:Tn,useEffect:Tn,useImperativeHandle:Tn,useInsertionEffect:Tn,useLayoutEffect:Tn,useMemo:Tn,useReducer:Tn,useRef:Tn,useState:Tn,useDebugValue:Tn,useDeferredValue:Tn,useTransition:Tn,useMutableSource:Tn,useSyncExternalStore:Tn,useId:Tn,unstable_isNewReconciler:!1},yV={readContext:pi,useCallback:function(e,t){return as().memoizedState=[e,t===void 0?null:t],e},useContext:pi,useEffect:BA,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Q0(4194308,4,VD.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Q0(4194308,4,e,t)},useInsertionEffect:function(e,t){return Q0(4,2,e,t)},useMemo:function(e,t){var n=as();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=as();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=hV.bind(null,Ue,e),[r.memoizedState,e]},useRef:function(e){var t=as();return e={current:e},t.memoizedState=e},useState:FA,useDebugValue:wI,useDeferredValue:function(e){return as().memoizedState=e},useTransition:function(){var e=FA(!1),t=e[0];return e=dV.bind(null,e[1]),as().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Ue,i=as();if(Ae){if(n===void 0)throw Error(q(407));n=n()}else{if(n=t(),gn===null)throw Error(q(349));uc&30||BD(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,BA(LD.bind(null,r,s,e),[e]),r.flags|=2048,Kh(9,RD.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=as(),t=gn.identifierPrefix;if(Ae){var n=bo,r=go;n=(r&~(1<<32-Ri(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Xh++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=fV++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},mV={readContext:pi,useCallback:qD,useContext:pi,useEffect:vI,useImperativeHandle:YD,useInsertionEffect:zD,useLayoutEffect:jD,useMemo:WD,useReducer:vw,useRef:PD,useState:function(){return vw(Qh)},useDebugValue:wI,useDeferredValue:function(e){var t=yi();return HD(t,rn.memoizedState,e)},useTransition:function(){var e=vw(Qh)[0],t=yi().memoizedState;return[e,t]},useMutableSource:OD,useSyncExternalStore:FD,useId:GD,unstable_isNewReconciler:!1},gV={readContext:pi,useCallback:qD,useContext:pi,useEffect:vI,useImperativeHandle:YD,useInsertionEffect:zD,useLayoutEffect:jD,useMemo:WD,useReducer:ww,useRef:PD,useState:function(){return ww(Qh)},useDebugValue:wI,useDeferredValue:function(e){var t=yi();return rn===null?t.memoizedState=e:HD(t,rn.memoizedState,e)},useTransition:function(){var e=ww(Qh)[0],t=yi().memoizedState;return[e,t]},useMutableSource:OD,useSyncExternalStore:FD,useId:GD,unstable_isNewReconciler:!1};function pf(e,t){try{var n="",r=t;do n+=qz(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function _w(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function _2(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var bV=typeof WeakMap=="function"?WeakMap:Map;function ZD(e,t,n){n=Io(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Qm||(Qm=!0,D2=r),_2(e,t)},n}function JD(e,t,n){n=Io(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){_2(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){_2(e,t),typeof r!="function"&&(Ea===null?Ea=new Set([this]):Ea.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function RA(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new bV;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=kV.bind(null,e,t,n),t.then(e,e))}function LA(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function CA(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Io(-1,1),t.tag=2,Ia(n,t,1))),n.lanes|=1),e)}var vV=Po.ReactCurrentOwner,ar=!1;function Un(e,t,n,r){t.child=e===null?DD(t,null,n,r):df(t,e.child,n,r)}function UA(e,t,n,r,i){n=n.render;var s=t.ref;return Pu(t,i),r=gI(e,t,n,r,s,i),n=bI(),e!==null&&!ar?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Oo(e,t,i)):(Ae&&n&&sI(t),t.flags|=1,Un(e,t,r,i),t.child)}function PA(e,t,n,r,i){if(e===null){var s=n.type;return typeof s=="function"&&!MI(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,tk(e,t,s,r,i)):(e=tm(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Vh,n(o,r)&&e.ref===t.ref)return Oo(e,t,i)}return t.flags|=1,e=Aa(s,r),e.ref=t.ref,e.return=t,t.child=e}function tk(e,t,n,r,i){if(e!==null){var s=e.memoizedProps;if(Vh(s,r)&&e.ref===t.ref)if(ar=!1,t.pendingProps=r=s,(e.lanes&i)!==0)e.flags&131072&&(ar=!0);else return t.lanes=e.lanes,Oo(e,t,i)}return S2(e,t,n,r,i)}function ek(e,t,n){var r=t.pendingProps,i=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},we(Eu,Tr),Tr|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,we(Eu,Tr),Tr|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,we(Eu,Tr),Tr|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,we(Eu,Tr),Tr|=r;return Un(e,t,i,n),t.child}function nk(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function S2(e,t,n,r,i){var s=ur(n)?lc:Rn.current;return s=uf(t,s),Pu(t,i),n=gI(e,t,n,r,s,i),r=bI(),e!==null&&!ar?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Oo(e,t,i)):(Ae&&r&&sI(t),t.flags|=1,Un(e,t,n,i),t.child)}function zA(e,t,n,r,i){if(ur(n)){var s=!0;Pm(t)}else s=!1;if(Pu(t,i),t.stateNode===null)K0(e,t),$D(t,n,r),w2(t,n,r,i),r=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=pi(c):(c=ur(n)?lc:Rn.current,c=uf(t,c));var u=n.getDerivedStateFromProps,f=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&kA(t,o,r,c),ia=!1;var d=t.memoizedState;o.state=d,qm(t,r,o,i),l=t.memoizedState,a!==r||d!==l||cr.current||ia?(typeof u=="function"&&(v2(t,n,u,r),l=t.memoizedState),(a=ia||DA(t,n,a,r,d,l,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,AD(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:Ei(t.type,a),o.props=c,f=t.pendingProps,d=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=pi(l):(l=ur(n)?lc:Rn.current,l=uf(t,l));var h=n.getDerivedStateFromProps;(u=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||d!==l)&&kA(t,o,r,l),ia=!1,d=t.memoizedState,o.state=d,qm(t,r,o,i);var p=t.memoizedState;a!==f||d!==p||cr.current||ia?(typeof h=="function"&&(v2(t,n,h,r),p=t.memoizedState),(c=ia||DA(t,n,c,r,d,p,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,l)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return x2(e,t,n,r,s,i)}function x2(e,t,n,r,i,s){nk(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return i&&TA(t,n,!1),Oo(e,t,s);r=t.stateNode,vV.current=t;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=df(t,e.child,null,s),t.child=df(t,null,a,s)):Un(e,t,a,s),t.memoizedState=r.state,i&&TA(t,n,!0),t.child}function rk(e){var t=e.stateNode;t.pendingContext?EA(e,t.pendingContext,t.pendingContext!==t.context):t.context&&EA(e,t.context,!1),hI(e,t.containerInfo)}function jA(e,t,n,r,i){return ff(),aI(i),t.flags|=256,Un(e,t,n,r),t.child}var I2={dehydrated:null,treeContext:null,retryLane:0};function E2(e){return{baseLanes:e,cachePool:null,transitions:null}}function ik(e,t,n){var r=t.pendingProps,i=Fe.current,s=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),we(Fe,i&1),e===null)return g2(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,s?(r=t.mode,s=t.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Db(o,r,0,null),e=Jl(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=E2(n),t.memoizedState=I2,e):_I(t,o));if(i=e.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return wV(e,t,o,r,a,i,n);if(s){s=r.fallback,o=t.mode,i=e.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=l,t.deletions=null):(r=Aa(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Aa(a,s):(s=Jl(s,o,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,o=e.child.memoizedState,o=o===null?E2(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~n,t.memoizedState=I2,r}return s=e.child,e=s.sibling,r=Aa(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function _I(e,t){return t=Db({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function e0(e,t,n,r){return r!==null&&aI(r),df(t,e.child,null,n),e=_I(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function wV(e,t,n,r,i,s,o){if(n)return t.flags&256?(t.flags&=-257,r=_w(Error(q(422))),e0(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=Db({mode:"visible",children:r.children},i,0,null),s=Jl(s,i,o,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&df(t,e.child,null,o),t.child.memoizedState=E2(o),t.memoizedState=I2,s);if(!(t.mode&1))return e0(e,t,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(q(419)),r=_w(s,r,void 0),e0(e,t,o,r)}if(a=(o&e.childLanes)!==0,ar||a){if(r=gn,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,ko(e,i),Li(r,e,i,-1))}return AI(),r=_w(Error(q(421))),e0(e,t,o,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=OV.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,$r=xa(i.nextSibling),Or=t,Ae=!0,Ni=null,e!==null&&(Zr[Jr++]=go,Zr[Jr++]=bo,Zr[Jr++]=cc,go=e.id,bo=e.overflow,cc=t),t=_I(t,r.children),t.flags|=4096,t)}function VA(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),b2(e.return,t,n)}function Sw(e,t,n,r,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function sk(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(Un(e,t,r.children,n),r=Fe.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)t:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&VA(e,n,t);else if(e.tag===19)VA(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break t;for(;e.sibling===null;){if(e.return===null||e.return===t)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(we(Fe,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&Wm(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Sw(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Wm(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Sw(t,!0,n,null,s);break;case"together":Sw(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function K0(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Oo(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),fc|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(q(153));if(t.child!==null){for(e=t.child,n=Aa(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Aa(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function _V(e,t,n){switch(t.tag){case 3:rk(t),ff();break;case 5:kD(t);break;case 1:ur(t.type)&&Pm(t);break;case 4:hI(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;we(Vm,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(we(Fe,Fe.current&1),t.flags|=128,null):n&t.child.childLanes?ik(e,t,n):(we(Fe,Fe.current&1),e=Oo(e,t,n),e!==null?e.sibling:null);we(Fe,Fe.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return sk(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),we(Fe,Fe.current),r)break;return null;case 22:case 23:return t.lanes=0,ek(e,t,n)}return Oo(e,t,n)}var ok,T2,ak,lk;ok=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};T2=function(){};ak=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Ll(Ds.current);var s=null;switch(n){case"input":i=G_(e,i),r=G_(e,r),s=[];break;case"select":i=ze({},i,{value:void 0}),r=ze({},r,{value:void 0}),s=[];break;case"textarea":i=K_(e,i),r=K_(e,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Cm)}J_(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Rh.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Rh.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Se("scroll",e),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(t.updateQueue=c)&&(t.flags|=4)}};lk=function(e,t,n,r){n!==r&&(t.flags|=4)};function Ad(e,t){if(!Ae)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function An(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function SV(e,t,n){var r=t.pendingProps;switch(oI(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return An(t),null;case 1:return ur(t.type)&&Um(),An(t),null;case 3:return r=t.stateNode,hf(),xe(cr),xe(Rn),yI(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Jy(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ni!==null&&(F2(Ni),Ni=null))),T2(e,t),An(t),null;case 5:pI(t);var i=Ll(Gh.current);if(n=t.type,e!==null&&t.stateNode!=null)ak(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(q(166));return An(t),null}if(e=Ll(Ds.current),Jy(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[hs]=t,r[Wh]=s,e=(t.mode&1)!==0,n){case"dialog":Se("cancel",r),Se("close",r);break;case"iframe":case"object":case"embed":Se("load",r);break;case"video":case"audio":for(i=0;i<Gd.length;i++)Se(Gd[i],r);break;case"source":Se("error",r);break;case"img":case"image":case"link":Se("error",r),Se("load",r);break;case"details":Se("toggle",r);break;case"input":ZT(r,s),Se("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Se("invalid",r);break;case"textarea":tA(r,s),Se("invalid",r)}J_(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Zy(r.textContent,a,e),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Zy(r.textContent,a,e),i=["children",""+a]):Rh.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Se("scroll",r)}switch(n){case"input":Yy(r),JT(r,s,!0);break;case"textarea":Yy(r),eA(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Cm)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=B4(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[hs]=t,e[Wh]=r,ok(e,t,!1,!1),t.stateNode=e;t:{switch(o=t2(n,r),n){case"dialog":Se("cancel",e),Se("close",e),i=r;break;case"iframe":case"object":case"embed":Se("load",e),i=r;break;case"video":case"audio":for(i=0;i<Gd.length;i++)Se(Gd[i],e);i=r;break;case"source":Se("error",e),i=r;break;case"img":case"image":case"link":Se("error",e),Se("load",e),i=r;break;case"details":Se("toggle",e),i=r;break;case"input":ZT(e,r),i=G_(e,r),Se("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=ze({},r,{value:void 0}),Se("invalid",e);break;case"textarea":tA(e,r),i=K_(e,r),Se("invalid",e);break;default:i=r}J_(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?C4(e,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&R4(e,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Lh(e,l):typeof l=="number"&&Lh(e,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Rh.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Se("scroll",e):l!=null&&qx(e,s,l,o))}switch(n){case"input":Yy(e),JT(e,r,!1);break;case"textarea":Yy(e),eA(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Na(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?Ru(e,!!r.multiple,s,!1):r.defaultValue!=null&&Ru(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Cm)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break t;case"img":r=!0;break t;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return An(t),null;case 6:if(e&&t.stateNode!=null)lk(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(q(166));if(n=Ll(Gh.current),Ll(Ds.current),Jy(t)){if(r=t.stateNode,n=t.memoizedProps,r[hs]=t,(s=r.nodeValue!==n)&&(e=Or,e!==null))switch(e.tag){case 3:Zy(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Zy(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[hs]=t,t.stateNode=r}return An(t),null;case 13:if(xe(Fe),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ae&&$r!==null&&t.mode&1&&!(t.flags&128))ED(),ff(),t.flags|=98560,s=!1;else if(s=Jy(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(q(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(q(317));s[hs]=t}else ff(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;An(t),s=!1}else Ni!==null&&(F2(Ni),Ni=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Fe.current&1?an===0&&(an=3):AI())),t.updateQueue!==null&&(t.flags|=4),An(t),null);case 4:return hf(),T2(e,t),e===null&&Yh(t.stateNode.containerInfo),An(t),null;case 10:return uI(t.type._context),An(t),null;case 17:return ur(t.type)&&Um(),An(t),null;case 19:if(xe(Fe),s=t.memoizedState,s===null)return An(t),null;if(r=(t.flags&128)!==0,o=s.rendering,o===null)if(r)Ad(s,!1);else{if(an!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Wm(e),o!==null){for(t.flags|=128,Ad(s,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return we(Fe,Fe.current&1|2),t.child}e=e.sibling}s.tail!==null&&Xe()>yf&&(t.flags|=128,r=!0,Ad(s,!1),t.lanes=4194304)}else{if(!r)if(e=Wm(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Ad(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ae)return An(t),null}else 2*Xe()-s.renderingStartTime>yf&&n!==1073741824&&(t.flags|=128,r=!0,Ad(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(n=s.last,n!==null?n.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Xe(),t.sibling=null,n=Fe.current,we(Fe,r?n&1|2:n&1),t):(An(t),null);case 22:case 23:return TI(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Tr&1073741824&&(An(t),t.subtreeFlags&6&&(t.flags|=8192)):An(t),null;case 24:return null;case 25:return null}throw Error(q(156,t.tag))}function xV(e,t){switch(oI(t),t.tag){case 1:return ur(t.type)&&Um(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return hf(),xe(cr),xe(Rn),yI(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return pI(t),null;case 13:if(xe(Fe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(q(340));ff()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return xe(Fe),null;case 4:return hf(),null;case 10:return uI(t.type._context),null;case 22:case 23:return TI(),null;case 24:return null;default:return null}}var n0=!1,Dn=!1,IV=typeof WeakSet=="function"?WeakSet:Set,nt=null;function Iu(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ye(e,t,r)}else n.current=null}function A2(e,t,n){try{n()}catch(r){Ye(e,t,r)}}var YA=!1;function EV(e,t){if(u2=Bm,e=dD(),iI(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else t:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break t}var o=0,a=-1,l=-1,c=0,u=0,f=e,d=null;e:for(;;){for(var h;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(h=f.firstChild)!==null;)d=f,f=h;for(;;){if(f===e)break e;if(d===n&&++c===i&&(a=o),d===s&&++u===r&&(l=o),(h=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=h}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(f2={focusedElem:e,selectionRange:n},Bm=!1,nt=t;nt!==null;)if(t=nt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,nt=e;else for(;nt!==null;){t=nt;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,v=p.memoizedState,y=t.stateNode,m=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:Ei(t.type,g),v);y.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(q(163))}}catch(w){Ye(t,t.return,w)}if(e=t.sibling,e!==null){e.return=t.return,nt=e;break}nt=t.return}return p=YA,YA=!1,p}function wh(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&A2(t,n,s)}i=i.next}while(i!==r)}}function $b(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function M2(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function ck(e){var t=e.alternate;t!==null&&(e.alternate=null,ck(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[hs],delete t[Wh],delete t[p2],delete t[aV],delete t[lV])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function uk(e){return e.tag===5||e.tag===3||e.tag===4}function qA(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||uk(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function $2(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Cm));else if(r!==4&&(e=e.child,e!==null))for($2(e,t,n),e=e.sibling;e!==null;)$2(e,t,n),e=e.sibling}function N2(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(N2(e,t,n),e=e.sibling;e!==null;)N2(e,t,n),e=e.sibling}var wn=null,Ti=!1;function Ko(e,t,n){for(n=n.child;n!==null;)fk(e,t,n),n=n.sibling}function fk(e,t,n){if(Ns&&typeof Ns.onCommitFiberUnmount=="function")try{Ns.onCommitFiberUnmount(_b,n)}catch{}switch(n.tag){case 5:Dn||Iu(n,t);case 6:var r=wn,i=Ti;wn=null,Ko(e,t,n),wn=r,Ti=i,wn!==null&&(Ti?(e=wn,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):wn.removeChild(n.stateNode));break;case 18:wn!==null&&(Ti?(e=wn,n=n.stateNode,e.nodeType===8?yw(e.parentNode,n):e.nodeType===1&&yw(e,n),zh(e)):yw(wn,n.stateNode));break;case 4:r=wn,i=Ti,wn=n.stateNode.containerInfo,Ti=!0,Ko(e,t,n),wn=r,Ti=i;break;case 0:case 11:case 14:case 15:if(!Dn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&A2(n,t,o),i=i.next}while(i!==r)}Ko(e,t,n);break;case 1:if(!Dn&&(Iu(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ye(n,t,a)}Ko(e,t,n);break;case 21:Ko(e,t,n);break;case 22:n.mode&1?(Dn=(r=Dn)||n.memoizedState!==null,Ko(e,t,n),Dn=r):Ko(e,t,n);break;default:Ko(e,t,n)}}function WA(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new IV),t.forEach(function(r){var i=FV.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function xi(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,o=t,a=o;t:for(;a!==null;){switch(a.tag){case 5:wn=a.stateNode,Ti=!1;break t;case 3:wn=a.stateNode.containerInfo,Ti=!0;break t;case 4:wn=a.stateNode.containerInfo,Ti=!0;break t}a=a.return}if(wn===null)throw Error(q(160));fk(s,o,i),wn=null,Ti=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Ye(i,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)dk(t,e),t=t.sibling}function dk(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(xi(t,e),es(e),r&4){try{wh(3,e,e.return),$b(3,e)}catch(g){Ye(e,e.return,g)}try{wh(5,e,e.return)}catch(g){Ye(e,e.return,g)}}break;case 1:xi(t,e),es(e),r&512&&n!==null&&Iu(n,n.return);break;case 5:if(xi(t,e),es(e),r&512&&n!==null&&Iu(n,n.return),e.flags&32){var i=e.stateNode;try{Lh(i,"")}catch(g){Ye(e,e.return,g)}}if(r&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,o=n!==null?n.memoizedProps:s,a=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&O4(i,s),t2(a,o);var c=t2(a,s);for(o=0;o<l.length;o+=2){var u=l[o],f=l[o+1];u==="style"?C4(i,f):u==="dangerouslySetInnerHTML"?R4(i,f):u==="children"?Lh(i,f):qx(i,u,f,c)}switch(a){case"input":X_(i,s);break;case"textarea":F4(i,s);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?Ru(i,!!s.multiple,h,!1):d!==!!s.multiple&&(s.defaultValue!=null?Ru(i,!!s.multiple,s.defaultValue,!0):Ru(i,!!s.multiple,s.multiple?[]:"",!1))}i[Wh]=s}catch(g){Ye(e,e.return,g)}}break;case 6:if(xi(t,e),es(e),r&4){if(e.stateNode===null)throw Error(q(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(g){Ye(e,e.return,g)}}break;case 3:if(xi(t,e),es(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{zh(t.containerInfo)}catch(g){Ye(e,e.return,g)}break;case 4:xi(t,e),es(e);break;case 13:xi(t,e),es(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(II=Xe())),r&4&&WA(e);break;case 22:if(u=n!==null&&n.memoizedState!==null,e.mode&1?(Dn=(c=Dn)||u,xi(t,e),Dn=c):xi(t,e),es(e),r&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!u&&e.mode&1)for(nt=e,u=e.child;u!==null;){for(f=nt=u;nt!==null;){switch(d=nt,h=d.child,d.tag){case 0:case 11:case 14:case 15:wh(4,d,d.return);break;case 1:Iu(d,d.return);var p=d.stateNode;if(typeof p.componentWillUnmount=="function"){r=d,n=d.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(g){Ye(r,n,g)}}break;case 5:Iu(d,d.return);break;case 22:if(d.memoizedState!==null){GA(f);continue}}h!==null?(h.return=d,nt=h):GA(f)}u=u.sibling}t:for(u=null,f=e;;){if(f.tag===5){if(u===null){u=f;try{i=f.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=L4("display",o))}catch(g){Ye(e,e.return,g)}}}else if(f.tag===6){if(u===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(g){Ye(e,e.return,g)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break t;for(;f.sibling===null;){if(f.return===null||f.return===e)break t;u===f&&(u=null),f=f.return}u===f&&(u=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:xi(t,e),es(e),r&4&&WA(e);break;case 21:break;default:xi(t,e),es(e)}}function es(e){var t=e.flags;if(t&2){try{t:{for(var n=e.return;n!==null;){if(uk(n)){var r=n;break t}n=n.return}throw Error(q(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Lh(i,""),r.flags&=-33);var s=qA(e);N2(e,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=qA(e);$2(e,a,o);break;default:throw Error(q(161))}}catch(l){Ye(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function TV(e,t,n){nt=e,hk(e)}function hk(e,t,n){for(var r=(e.mode&1)!==0;nt!==null;){var i=nt,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||n0;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Dn;a=n0;var c=Dn;if(n0=o,(Dn=l)&&!c)for(nt=i;nt!==null;)o=nt,l=o.child,o.tag===22&&o.memoizedState!==null?XA(i):l!==null?(l.return=o,nt=l):XA(i);for(;s!==null;)nt=s,hk(s),s=s.sibling;nt=i,n0=a,Dn=c}HA(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,nt=s):HA(e)}}function HA(e){for(;nt!==null;){var t=nt;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Dn||$b(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Dn)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Ei(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&NA(t,s,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}NA(t,o,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var f=u.dehydrated;f!==null&&zh(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(q(163))}Dn||t.flags&512&&M2(t)}catch(d){Ye(t,t.return,d)}}if(t===e){nt=null;break}if(n=t.sibling,n!==null){n.return=t.return,nt=n;break}nt=t.return}}function GA(e){for(;nt!==null;){var t=nt;if(t===e){nt=null;break}var n=t.sibling;if(n!==null){n.return=t.return,nt=n;break}nt=t.return}}function XA(e){for(;nt!==null;){var t=nt;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{$b(4,t)}catch(l){Ye(t,n,l)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(l){Ye(t,i,l)}}var s=t.return;try{M2(t)}catch(l){Ye(t,s,l)}break;case 5:var o=t.return;try{M2(t)}catch(l){Ye(t,o,l)}}}catch(l){Ye(t,t.return,l)}if(t===e){nt=null;break}var a=t.sibling;if(a!==null){a.return=t.return,nt=a;break}nt=t.return}}var AV=Math.ceil,Xm=Po.ReactCurrentDispatcher,SI=Po.ReactCurrentOwner,di=Po.ReactCurrentBatchConfig,Gt=0,gn=null,tn=null,In=0,Tr=0,Eu=tl(0),an=0,Zh=null,fc=0,Nb=0,xI=0,_h=null,ir=null,II=0,yf=1/0,io=null,Qm=!1,D2=null,Ea=null,r0=!1,ga=null,Km=0,Sh=0,k2=null,Z0=-1,J0=0;function Hn(){return Gt&6?Xe():Z0!==-1?Z0:Z0=Xe()}function Ta(e){return e.mode&1?Gt&2&&In!==0?In&-In:uV.transition!==null?(J0===0&&(J0=Q4()),J0):(e=le,e!==0||(e=window.event,e=e===void 0?16:rD(e.type)),e):1}function Li(e,t,n,r){if(50<Sh)throw Sh=0,k2=null,Error(q(185));zp(e,n,r),(!(Gt&2)||e!==gn)&&(e===gn&&(!(Gt&2)&&(Nb|=n),an===4&&fa(e,In)),fr(e,r),n===1&&Gt===0&&!(t.mode&1)&&(yf=Xe()+500,Tb&&el()))}function fr(e,t){var n=e.callbackNode;uj(e,t);var r=Fm(e,e===gn?In:0);if(r===0)n!==null&&iA(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&iA(n),t===1)e.tag===0?cV(QA.bind(null,e)):SD(QA.bind(null,e)),sV(function(){!(Gt&6)&&el()}),n=null;else{switch(K4(r)){case 1:n=Qx;break;case 4:n=G4;break;case 16:n=Om;break;case 536870912:n=X4;break;default:n=Om}n=_k(n,pk.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function pk(e,t){if(Z0=-1,J0=0,Gt&6)throw Error(q(327));var n=e.callbackNode;if(zu()&&e.callbackNode!==n)return null;var r=Fm(e,e===gn?In:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Zm(e,r);else{t=r;var i=Gt;Gt|=2;var s=mk();(gn!==e||In!==t)&&(io=null,yf=Xe()+500,Zl(e,t));do try{NV();break}catch(a){yk(e,a)}while(!0);cI(),Xm.current=s,Gt=i,tn!==null?t=0:(gn=null,In=0,t=an)}if(t!==0){if(t===2&&(i=s2(e),i!==0&&(r=i,t=O2(e,i))),t===1)throw n=Zh,Zl(e,0),fa(e,r),fr(e,Xe()),n;if(t===6)fa(e,r);else{if(i=e.current.alternate,!(r&30)&&!MV(i)&&(t=Zm(e,r),t===2&&(s=s2(e),s!==0&&(r=s,t=O2(e,s))),t===1))throw n=Zh,Zl(e,0),fa(e,r),fr(e,Xe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(q(345));case 2:wl(e,ir,io);break;case 3:if(fa(e,r),(r&130023424)===r&&(t=II+500-Xe(),10<t)){if(Fm(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Hn(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=h2(wl.bind(null,e,ir,io),t);break}wl(e,ir,io);break;case 4:if(fa(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-Ri(r);s=1<<o,o=t[o],o>i&&(i=o),r&=~s}if(r=i,r=Xe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*AV(r/1960))-r,10<r){e.timeoutHandle=h2(wl.bind(null,e,ir,io),r);break}wl(e,ir,io);break;case 5:wl(e,ir,io);break;default:throw Error(q(329))}}}return fr(e,Xe()),e.callbackNode===n?pk.bind(null,e):null}function O2(e,t){var n=_h;return e.current.memoizedState.isDehydrated&&(Zl(e,t).flags|=256),e=Zm(e,t),e!==2&&(t=ir,ir=n,t!==null&&F2(t)),e}function F2(e){ir===null?ir=e:ir.push.apply(ir,e)}function MV(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Ui(s(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function fa(e,t){for(t&=~xI,t&=~Nb,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Ri(t),r=1<<n;e[n]=-1,t&=~r}}function QA(e){if(Gt&6)throw Error(q(327));zu();var t=Fm(e,0);if(!(t&1))return fr(e,Xe()),null;var n=Zm(e,t);if(e.tag!==0&&n===2){var r=s2(e);r!==0&&(t=r,n=O2(e,r))}if(n===1)throw n=Zh,Zl(e,0),fa(e,t),fr(e,Xe()),n;if(n===6)throw Error(q(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wl(e,ir,io),fr(e,Xe()),null}function EI(e,t){var n=Gt;Gt|=1;try{return e(t)}finally{Gt=n,Gt===0&&(yf=Xe()+500,Tb&&el())}}function dc(e){ga!==null&&ga.tag===0&&!(Gt&6)&&zu();var t=Gt;Gt|=1;var n=di.transition,r=le;try{if(di.transition=null,le=1,e)return e()}finally{le=r,di.transition=n,Gt=t,!(Gt&6)&&el()}}function TI(){Tr=Eu.current,xe(Eu)}function Zl(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,iV(n)),tn!==null)for(n=tn.return;n!==null;){var r=n;switch(oI(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Um();break;case 3:hf(),xe(cr),xe(Rn),yI();break;case 5:pI(r);break;case 4:hf();break;case 13:xe(Fe);break;case 19:xe(Fe);break;case 10:uI(r.type._context);break;case 22:case 23:TI()}n=n.return}if(gn=e,tn=e=Aa(e.current,null),In=Tr=t,an=0,Zh=null,xI=Nb=fc=0,ir=_h=null,Rl!==null){for(t=0;t<Rl.length;t++)if(n=Rl[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Rl=null}return e}function yk(e,t){do{var n=tn;try{if(cI(),X0.current=Gm,Hm){for(var r=Ue.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Hm=!1}if(uc=0,pn=rn=Ue=null,vh=!1,Xh=0,SI.current=null,n===null||n.return===null){an=1,Zh=t,tn=null;break}t:{var s=e,o=n.return,a=n,l=t;if(t=In,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,f=u.tag;if(!(u.mode&1)&&(f===0||f===11||f===15)){var d=u.alternate;d?(u.updateQueue=d.updateQueue,u.memoizedState=d.memoizedState,u.lanes=d.lanes):(u.updateQueue=null,u.memoizedState=null)}var h=LA(o);if(h!==null){h.flags&=-257,CA(h,o,a,s,t),h.mode&1&&RA(s,c,t),t=h,l=c;var p=t.updateQueue;if(p===null){var g=new Set;g.add(l),t.updateQueue=g}else p.add(l);break t}else{if(!(t&1)){RA(s,c,t),AI();break t}l=Error(q(426))}}else if(Ae&&a.mode&1){var v=LA(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),CA(v,o,a,s,t),aI(pf(l,a));break t}}s=l=pf(l,a),an!==4&&(an=2),_h===null?_h=[s]:_h.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var y=ZD(s,l,t);$A(s,y);break t;case 1:a=l;var m=s.type,b=s.stateNode;if(!(s.flags&128)&&(typeof m.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Ea===null||!Ea.has(b)))){s.flags|=65536,t&=-t,s.lanes|=t;var w=JD(s,a,t);$A(s,w);break t}}s=s.return}while(s!==null)}bk(n)}catch(S){t=S,tn===n&&n!==null&&(tn=n=n.return);continue}break}while(!0)}function mk(){var e=Xm.current;return Xm.current=Gm,e===null?Gm:e}function AI(){(an===0||an===3||an===2)&&(an=4),gn===null||!(fc&268435455)&&!(Nb&268435455)||fa(gn,In)}function Zm(e,t){var n=Gt;Gt|=2;var r=mk();(gn!==e||In!==t)&&(io=null,Zl(e,t));do try{$V();break}catch(i){yk(e,i)}while(!0);if(cI(),Gt=n,Xm.current=r,tn!==null)throw Error(q(261));return gn=null,In=0,an}function $V(){for(;tn!==null;)gk(tn)}function NV(){for(;tn!==null&&!ej();)gk(tn)}function gk(e){var t=wk(e.alternate,e,Tr);e.memoizedProps=e.pendingProps,t===null?bk(e):tn=t,SI.current=null}function bk(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=xV(n,t),n!==null){n.flags&=32767,tn=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{an=6,tn=null;return}}else if(n=SV(n,t,Tr),n!==null){tn=n;return}if(t=t.sibling,t!==null){tn=t;return}tn=t=e}while(t!==null);an===0&&(an=5)}function wl(e,t,n){var r=le,i=di.transition;try{di.transition=null,le=1,DV(e,t,n,r)}finally{di.transition=i,le=r}return null}function DV(e,t,n,r){do zu();while(ga!==null);if(Gt&6)throw Error(q(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(q(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(fj(e,s),e===gn&&(tn=gn=null,In=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||r0||(r0=!0,_k(Om,function(){return zu(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=di.transition,di.transition=null;var o=le;le=1;var a=Gt;Gt|=4,SI.current=null,EV(e,n),dk(n,e),Kj(f2),Bm=!!u2,f2=u2=null,e.current=n,TV(n),nj(),Gt=a,le=o,di.transition=s}else e.current=n;if(r0&&(r0=!1,ga=e,Km=i),s=e.pendingLanes,s===0&&(Ea=null),sj(n.stateNode),fr(e,Xe()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Qm)throw Qm=!1,e=D2,D2=null,e;return Km&1&&e.tag!==0&&zu(),s=e.pendingLanes,s&1?e===k2?Sh++:(Sh=0,k2=e):Sh=0,el(),null}function zu(){if(ga!==null){var e=K4(Km),t=di.transition,n=le;try{if(di.transition=null,le=16>e?16:e,ga===null)var r=!1;else{if(e=ga,ga=null,Km=0,Gt&6)throw Error(q(331));var i=Gt;for(Gt|=4,nt=e.current;nt!==null;){var s=nt,o=s.child;if(nt.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(nt=c;nt!==null;){var u=nt;switch(u.tag){case 0:case 11:case 15:wh(8,u,s)}var f=u.child;if(f!==null)f.return=u,nt=f;else for(;nt!==null;){u=nt;var d=u.sibling,h=u.return;if(ck(u),u===c){nt=null;break}if(d!==null){d.return=h,nt=d;break}nt=h}}}var p=s.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(g!==null)}}nt=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,nt=o;else t:for(;nt!==null;){if(s=nt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:wh(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,nt=y;break t}nt=s.return}}var m=e.current;for(nt=m;nt!==null;){o=nt;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,nt=b;else t:for(o=m;nt!==null;){if(a=nt,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:$b(9,a)}}catch(S){Ye(a,a.return,S)}if(a===o){nt=null;break t}var w=a.sibling;if(w!==null){w.return=a.return,nt=w;break t}nt=a.return}}if(Gt=i,el(),Ns&&typeof Ns.onPostCommitFiberRoot=="function")try{Ns.onPostCommitFiberRoot(_b,e)}catch{}r=!0}return r}finally{le=n,di.transition=t}}return!1}function KA(e,t,n){t=pf(n,t),t=ZD(e,t,1),e=Ia(e,t,1),t=Hn(),e!==null&&(zp(e,1,t),fr(e,t))}function Ye(e,t,n){if(e.tag===3)KA(e,e,n);else for(;t!==null;){if(t.tag===3){KA(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ea===null||!Ea.has(r))){e=pf(n,e),e=JD(t,e,1),t=Ia(t,e,1),e=Hn(),t!==null&&(zp(t,1,e),fr(t,e));break}}t=t.return}}function kV(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Hn(),e.pingedLanes|=e.suspendedLanes&n,gn===e&&(In&n)===n&&(an===4||an===3&&(In&130023424)===In&&500>Xe()-II?Zl(e,0):xI|=n),fr(e,t)}function vk(e,t){t===0&&(e.mode&1?(t=Hy,Hy<<=1,!(Hy&130023424)&&(Hy=4194304)):t=1);var n=Hn();e=ko(e,t),e!==null&&(zp(e,t,n),fr(e,n))}function OV(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),vk(e,n)}function FV(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(q(314))}r!==null&&r.delete(t),vk(e,n)}var wk;wk=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||cr.current)ar=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return ar=!1,_V(e,t,n);ar=!!(e.flags&131072)}else ar=!1,Ae&&t.flags&1048576&&xD(t,jm,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;K0(e,t),e=t.pendingProps;var i=uf(t,Rn.current);Pu(t,n),i=gI(null,t,r,e,i,n);var s=bI();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ur(r)?(s=!0,Pm(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,dI(t),i.updater=Ab,t.stateNode=i,i._reactInternals=t,w2(t,r,e,n),t=x2(null,t,r,!0,s,n)):(t.tag=0,Ae&&s&&sI(t),Un(null,t,i,n),t=t.child),t;case 16:r=t.elementType;t:{switch(K0(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=RV(r),e=Ei(r,e),i){case 0:t=S2(null,t,r,e,n);break t;case 1:t=zA(null,t,r,e,n);break t;case 11:t=UA(null,t,r,e,n);break t;case 14:t=PA(null,t,r,Ei(r.type,e),n);break t}throw Error(q(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Ei(r,i),S2(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Ei(r,i),zA(e,t,r,i,n);case 3:t:{if(rk(t),e===null)throw Error(q(387));r=t.pendingProps,s=t.memoizedState,i=s.element,AD(e,t),qm(t,r,null,n);var o=t.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=pf(Error(q(423)),t),t=jA(e,t,r,n,i);break t}else if(r!==i){i=pf(Error(q(424)),t),t=jA(e,t,r,n,i);break t}else for($r=xa(t.stateNode.containerInfo.firstChild),Or=t,Ae=!0,Ni=null,n=DD(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ff(),r===i){t=Oo(e,t,n);break t}Un(e,t,r,n)}t=t.child}return t;case 5:return kD(t),e===null&&g2(t),r=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,o=i.children,d2(r,i)?o=null:s!==null&&d2(r,s)&&(t.flags|=32),nk(e,t),Un(e,t,o,n),t.child;case 6:return e===null&&g2(t),null;case 13:return ik(e,t,n);case 4:return hI(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=df(t,null,r,n):Un(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Ei(r,i),UA(e,t,r,i,n);case 7:return Un(e,t,t.pendingProps,n),t.child;case 8:return Un(e,t,t.pendingProps.children,n),t.child;case 12:return Un(e,t,t.pendingProps.children,n),t.child;case 10:t:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value,we(Vm,r._currentValue),r._currentValue=o,s!==null)if(Ui(s.value,o)){if(s.children===i.children&&!cr.current){t=Oo(e,t,n);break t}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Io(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),b2(s.return,n,t),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(q(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),b2(o,n,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Un(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Pu(t,n),i=pi(i),r=r(i),t.flags|=1,Un(e,t,r,n),t.child;case 14:return r=t.type,i=Ei(r,t.pendingProps),i=Ei(r.type,i),PA(e,t,r,i,n);case 15:return tk(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Ei(r,i),K0(e,t),t.tag=1,ur(r)?(e=!0,Pm(t)):e=!1,Pu(t,n),$D(t,r,i),w2(t,r,i,n),x2(null,t,r,!0,e,n);case 19:return sk(e,t,n);case 22:return ek(e,t,n)}throw Error(q(156,t.tag))};function _k(e,t){return H4(e,t)}function BV(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ii(e,t,n,r){return new BV(e,t,n,r)}function MI(e){return e=e.prototype,!(!e||!e.isReactComponent)}function RV(e){if(typeof e=="function")return MI(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Hx)return 11;if(e===Gx)return 14}return 2}function Aa(e,t){var n=e.alternate;return n===null?(n=ii(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function tm(e,t,n,r,i,s){var o=2;if(r=e,typeof e=="function")MI(e)&&(o=1);else if(typeof e=="string")o=5;else t:switch(e){case yu:return Jl(n.children,i,s,t);case Wx:o=8,i|=8;break;case Y_:return e=ii(12,n,t,i|2),e.elementType=Y_,e.lanes=s,e;case q_:return e=ii(13,n,t,i),e.elementType=q_,e.lanes=s,e;case W_:return e=ii(19,n,t,i),e.elementType=W_,e.lanes=s,e;case N4:return Db(n,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case M4:o=10;break t;case $4:o=9;break t;case Hx:o=11;break t;case Gx:o=14;break t;case ra:o=16,r=null;break t}throw Error(q(130,e==null?e:typeof e,""))}return t=ii(o,n,t,i),t.elementType=e,t.type=r,t.lanes=s,t}function Jl(e,t,n,r){return e=ii(7,e,r,t),e.lanes=n,e}function Db(e,t,n,r){return e=ii(22,e,r,t),e.elementType=N4,e.lanes=n,e.stateNode={isHidden:!1},e}function xw(e,t,n){return e=ii(6,e,null,t),e.lanes=n,e}function Iw(e,t,n){return t=ii(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function LV(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=iw(0),this.expirationTimes=iw(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=iw(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function $I(e,t,n,r,i,s,o,a,l){return e=new LV(e,t,n,a,l),t===1?(t=1,s===!0&&(t|=8)):t=0,s=ii(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},dI(s),e}function CV(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:pu,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Sk(e){if(!e)return Da;e=e._reactInternals;t:{if(Nc(e)!==e||e.tag!==1)throw Error(q(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break t;case 1:if(ur(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break t}}t=t.return}while(t!==null);throw Error(q(171))}if(e.tag===1){var n=e.type;if(ur(n))return _D(e,n,t)}return t}function xk(e,t,n,r,i,s,o,a,l){return e=$I(n,r,!0,e,i,s,o,a,l),e.context=Sk(null),n=e.current,r=Hn(),i=Ta(n),s=Io(r,i),s.callback=t??null,Ia(n,s,i),e.current.lanes=i,zp(e,i,r),fr(e,r),e}function kb(e,t,n,r){var i=t.current,s=Hn(),o=Ta(i);return n=Sk(n),t.context===null?t.context=n:t.pendingContext=n,t=Io(s,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Ia(i,t,o),e!==null&&(Li(e,i,o,s),G0(e,i,o)),o}function Jm(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function ZA(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function NI(e,t){ZA(e,t),(e=e.alternate)&&ZA(e,t)}function UV(){return null}var Ik=typeof reportError=="function"?reportError:function(e){console.error(e)};function DI(e){this._internalRoot=e}Ob.prototype.render=DI.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(q(409));kb(e,t,null,null)};Ob.prototype.unmount=DI.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;dc(function(){kb(null,e,null,null)}),t[Do]=null}};function Ob(e){this._internalRoot=e}Ob.prototype.unstable_scheduleHydration=function(e){if(e){var t=tD();e={blockedOn:null,target:e,priority:t};for(var n=0;n<ua.length&&t!==0&&t<ua[n].priority;n++);ua.splice(n,0,e),n===0&&nD(e)}};function kI(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Fb(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function JA(){}function PV(e,t,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=Jm(o);s.call(c)}}var o=xk(t,r,e,0,null,!1,!1,"",JA);return e._reactRootContainer=o,e[Do]=o.current,Yh(e.nodeType===8?e.parentNode:e),dc(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=Jm(l);a.call(c)}}var l=$I(e,0,!1,null,null,!1,!1,"",JA);return e._reactRootContainer=l,e[Do]=l.current,Yh(e.nodeType===8?e.parentNode:e),dc(function(){kb(t,l,n,r)}),l}function Bb(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Jm(o);a.call(l)}}kb(t,o,e,i)}else o=PV(n,t,e,i,r);return Jm(o)}Z4=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Hd(t.pendingLanes);n!==0&&(Kx(t,n|1),fr(t,Xe()),!(Gt&6)&&(yf=Xe()+500,el()))}break;case 13:dc(function(){var r=ko(e,1);if(r!==null){var i=Hn();Li(r,e,1,i)}}),NI(e,1)}};Zx=function(e){if(e.tag===13){var t=ko(e,134217728);if(t!==null){var n=Hn();Li(t,e,134217728,n)}NI(e,134217728)}};J4=function(e){if(e.tag===13){var t=Ta(e),n=ko(e,t);if(n!==null){var r=Hn();Li(n,e,t,r)}NI(e,t)}};tD=function(){return le};eD=function(e,t){var n=le;try{return le=e,t()}finally{le=n}};n2=function(e,t,n){switch(t){case"input":if(X_(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Eb(r);if(!i)throw Error(q(90));k4(r),X_(r,i)}}}break;case"textarea":F4(e,n);break;case"select":t=n.value,t!=null&&Ru(e,!!n.multiple,t,!1)}};z4=EI;j4=dc;var zV={usingClientEntryPoint:!1,Events:[Vp,vu,Eb,U4,P4,EI]},Md={findFiberByHostInstance:Bl,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},jV={bundleType:Md.bundleType,version:Md.version,rendererPackageName:Md.rendererPackageName,rendererConfig:Md.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Po.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=q4(e),e===null?null:e.stateNode},findFiberByHostInstance:Md.findFiberByHostInstance||UV,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var i0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!i0.isDisabled&&i0.supportsFiber)try{_b=i0.inject(jV),Ns=i0}catch{}}jr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zV;jr.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!kI(t))throw Error(q(200));return CV(e,t,null,n)};jr.createRoot=function(e,t){if(!kI(e))throw Error(q(299));var n=!1,r="",i=Ik;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=$I(e,1,!1,null,null,n,!1,r,i),e[Do]=t.current,Yh(e.nodeType===8?e.parentNode:e),new DI(t)};jr.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(q(188)):(e=Object.keys(e).join(","),Error(q(268,e)));return e=q4(t),e=e===null?null:e.stateNode,e};jr.flushSync=function(e){return dc(e)};jr.hydrate=function(e,t,n){if(!Fb(t))throw Error(q(200));return Bb(null,e,t,!0,n)};jr.hydrateRoot=function(e,t,n){if(!kI(e))throw Error(q(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=Ik;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=xk(t,null,e,1,n??null,i,!1,s,o),e[Do]=t.current,Yh(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Ob(t)};jr.render=function(e,t,n){if(!Fb(t))throw Error(q(200));return Bb(null,e,t,!1,n)};jr.unmountComponentAtNode=function(e){if(!Fb(e))throw Error(q(40));return e._reactRootContainer?(dc(function(){Bb(null,null,e,!1,function(){e._reactRootContainer=null,e[Do]=null})}),!0):!1};jr.unstable_batchedUpdates=EI;jr.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Fb(n))throw Error(q(200));if(e==null||e._reactInternals===void 0)throw Error(q(38));return Bb(e,t,n,!1,r)};jr.version="18.2.0-next-9e3b772b8-20220608";function Ek(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Ek)}catch(e){console.error(e)}}Ek(),x4.exports=jr;var VV=x4.exports,tM=VV;j_.createRoot=tM.createRoot,j_.hydrateRoot=tM.hydrateRoot;function W(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(e,t||[])).next())})}function eM(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function K(e){return this instanceof K?(this.v=e,this):new K(e)}function en(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(d){r[d]&&(i[d]=function(h){return new Promise(function(p,g){s.push([d,h,p,g])>1||a(d,h)})})}function a(d,h){try{l(r[d](h))}catch(p){f(s[0][3],p)}}function l(d){d.value instanceof K?Promise.resolve(d.value.v).then(c,u):f(s[0][2],d)}function c(d){a("next",d)}function u(d){a("throw",d)}function f(d,h){d(h),s.shift(),s.length&&a(s[0][0],s[0][1])}}function Ma(e){var t,n;return t={},r("next"),r("throw",function(i){throw i}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(i,s){t[i]=e[i]?function(o){return(n=!n)?{value:K(e[i](o)),done:!1}:s?s(o):o}:s}}function Fr(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof eM=="function"?eM(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=e[s]&&function(o){return new Promise(function(a,l){o=e[s](o),i(a,l,o.done,o.value)})}}function i(s,o,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},o)}}const YV=new TextDecoder("utf-8"),B2=e=>YV.decode(e),qV=new TextEncoder,OI=e=>qV.encode(e),[qbt,WV]=(()=>{const e=()=>{throw new Error("BigInt is not available in this environment")};function t(){throw e()}return t.asIntN=()=>{throw e()},t.asUintN=()=>{throw e()},typeof BigInt<"u"?[BigInt,!0]:[t,!1]})(),[qp,Wbt]=(()=>{const e=()=>{throw new Error("BigInt64Array is not available in this environment")};class t{static get BYTES_PER_ELEMENT(){return 8}static of(){throw e()}static from(){throw e()}constructor(){throw e()}}return typeof BigInt64Array<"u"?[BigInt64Array,!0]:[t,!1]})(),[Wp,Hbt]=(()=>{const e=()=>{throw new Error("BigUint64Array is not available in this environment")};class t{static get BYTES_PER_ELEMENT(){return 8}static of(){throw e()}static from(){throw e()}constructor(){throw e()}}return typeof BigUint64Array<"u"?[BigUint64Array,!0]:[t,!1]})(),HV=e=>typeof e=="number",GV=e=>typeof e=="boolean",Pn=e=>typeof e=="function",Pi=e=>e!=null&&Object(e)===e,Jh=e=>Pi(e)&&Pn(e.then),Rb=e=>Pi(e)&&Pn(e[Symbol.iterator]),FI=e=>Pi(e)&&Pn(e[Symbol.asyncIterator]),R2=e=>Pi(e)&&Pi(e.schema),Tk=e=>Pi(e)&&"done"in e&&"value"in e,Ak=e=>Pi(e)&&Pn(e.stat)&&HV(e.fd),Mk=e=>Pi(e)&&BI(e.body),$k=e=>"_getDOMStream"in e&&"_getNodeStream"in e,BI=e=>Pi(e)&&Pn(e.cancel)&&Pn(e.getReader)&&!$k(e),Nk=e=>Pi(e)&&Pn(e.read)&&Pn(e.pipe)&&GV(e.readable)&&!$k(e),XV=e=>Pi(e)&&Pn(e.clear)&&Pn(e.bytes)&&Pn(e.position)&&Pn(e.setPosition)&&Pn(e.capacity)&&Pn(e.getBufferIdentifier)&&Pn(e.createLong),RI=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function QV(e){const t=e[0]?[e[0]]:[];let n,r,i,s;for(let o,a,l=0,c=0,u=e.length;++l<u;){if(o=t[c],a=e[l],!o||!a||o.buffer!==a.buffer||a.byteOffset<o.byteOffset){a&&(t[++c]=a);continue}if({byteOffset:n,byteLength:i}=o,{byteOffset:r,byteLength:s}=a,n+i<r||r+s<n){a&&(t[++c]=a);continue}t[c]=new Uint8Array(o.buffer,n,r-n+s)}return t}function nM(e,t,n=0,r=t.byteLength){const i=e.byteLength,s=new Uint8Array(e.buffer,e.byteOffset,i),o=new Uint8Array(t.buffer,t.byteOffset,Math.min(r,i));return s.set(o,n),e}function Bs(e,t){const n=QV(e),r=n.reduce((u,f)=>u+f.byteLength,0);let i,s,o,a=0,l=-1;const c=Math.min(t||Number.POSITIVE_INFINITY,r);for(const u=n.length;++l<u;){if(i=n[l],s=i.subarray(0,Math.min(i.length,c-a)),c<=a+s.length){s.length<i.length?n[l]=i.subarray(s.length):s.length===i.length&&l++,o?nM(o,s,a):o=s;break}nM(o||(o=new Uint8Array(c)),s,a),a+=s.length}return[o||new Uint8Array(0),n.slice(l),r-(o?o.byteLength:0)]}function pe(e,t){let n=Tk(t)?t.value:t;return n instanceof e?e===Uint8Array?new e(n.buffer,n.byteOffset,n.byteLength):n:n?(typeof n=="string"&&(n=OI(n)),n instanceof ArrayBuffer?new e(n):n instanceof RI?new e(n):XV(n)?pe(e,n.bytes()):ArrayBuffer.isView(n)?n.byteLength<=0?new e(0):new e(n.buffer,n.byteOffset,n.byteLength/e.BYTES_PER_ELEMENT):e.from(n)):new e(0)}const $d=e=>pe(Int32Array,e),ne=e=>pe(Uint8Array,e),L2=e=>(e.next(),e);function*KV(e,t){const n=function*(i){yield i},r=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof RI?n(t):Rb(t)?t:n(t);return yield*L2(function*(i){let s=null;do s=i.next(yield pe(e,s));while(!s.done)}(r[Symbol.iterator]())),new e}const ZV=e=>KV(Uint8Array,e);function Dk(e,t){return en(this,arguments,function*(){if(Jh(t))return yield K(yield K(yield*Ma(Fr(Dk(e,yield K(t))))));const r=function(o){return en(this,arguments,function*(){yield yield K(yield K(o))})},i=function(o){return en(this,arguments,function*(){yield K(yield*Ma(Fr(L2(function*(a){let l=null;do l=a.next(yield l==null?void 0:l.value);while(!l.done)}(o[Symbol.iterator]())))))})},s=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof RI?r(t):Rb(t)?i(t):FI(t)?t:r(t);return yield K(yield*Ma(Fr(L2(function(o){return en(this,arguments,function*(){let a=null;do a=yield K(o.next(yield yield K(pe(e,a))));while(!a.done)})}(s[Symbol.asyncIterator]()))))),yield K(new e)})}const JV=e=>Dk(Uint8Array,e);function tY(e,t){let n=0;const r=e.length;if(r!==t.length)return!1;if(r>0)do if(e[n]!==t[n])return!1;while(++n<r);return!0}const Qr={fromIterable(e){return s0(eY(e))},fromAsyncIterable(e){return s0(nY(e))},fromDOMStream(e){return s0(rY(e))},fromNodeStream(e){return s0(sY(e))},toDOMStream(e,t){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(e,t){throw new Error('"toNodeStream" not available in this environment')}},s0=e=>(e.next(),e);function*eY(e){let t,n=!1,r=[],i,s,o,a=0;function l(){return s==="peek"?Bs(r,o)[0]:([i,r,a]=Bs(r,o),i)}({cmd:s,size:o}=yield null);const c=ZV(e)[Symbol.iterator]();try{do if({done:t,value:i}=Number.isNaN(o-a)?c.next():c.next(o-a),!t&&i.byteLength>0&&(r.push(i),a+=i.byteLength),t||o<=a)do({cmd:s,size:o}=yield l());while(o<a);while(!t)}catch(u){(n=!0)&&typeof c.throw=="function"&&c.throw(u)}finally{n===!1&&typeof c.return=="function"&&c.return(null)}return null}function nY(e){return en(this,arguments,function*(){let n,r=!1,i=[],s,o,a,l=0;function c(){return o==="peek"?Bs(i,a)[0]:([s,i,l]=Bs(i,a),s)}({cmd:o,size:a}=yield yield K(null));const u=JV(e)[Symbol.asyncIterator]();try{do if({done:n,value:s}=Number.isNaN(a-l)?yield K(u.next()):yield K(u.next(a-l)),!n&&s.byteLength>0&&(i.push(s),l+=s.byteLength),n||a<=l)do({cmd:o,size:a}=yield yield K(c()));while(a<l);while(!n)}catch(f){(r=!0)&&typeof u.throw=="function"&&(yield K(u.throw(f)))}finally{r===!1&&typeof u.return=="function"&&(yield K(u.return(new Uint8Array(0))))}return yield K(null)})}function rY(e){return en(this,arguments,function*(){let n=!1,r=!1,i=[],s,o,a,l=0;function c(){return o==="peek"?Bs(i,a)[0]:([s,i,l]=Bs(i,a),s)}({cmd:o,size:a}=yield yield K(null));const u=new iY(e);try{do if({done:n,value:s}=Number.isNaN(a-l)?yield K(u.read()):yield K(u.read(a-l)),!n&&s.byteLength>0&&(i.push(ne(s)),l+=s.byteLength),n||a<=l)do({cmd:o,size:a}=yield yield K(c()));while(a<l);while(!n)}catch(f){(r=!0)&&(yield K(u.cancel(f)))}finally{r===!1?yield K(u.cancel()):e.locked&&u.releaseLock()}return yield K(null)})}let iY=class{constructor(t){this.source=t,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(t){return W(this,void 0,void 0,function*(){const{reader:n,source:r}=this;n&&(yield n.cancel(t).catch(()=>{})),r&&r.locked&&this.releaseLock()})}read(t){return W(this,void 0,void 0,function*(){if(t===0)return{done:this.reader==null,value:new Uint8Array(0)};const n=yield this.reader.read();return!n.done&&(n.value=ne(n)),n})}};const Ew=(e,t)=>{const n=i=>r([t,i]);let r;return[t,n,new Promise(i=>(r=i)&&e.once(t,n))]};function sY(e){return en(this,arguments,function*(){const n=[];let r="error",i=!1,s=null,o,a,l=0,c=[],u;function f(){return o==="peek"?Bs(c,a)[0]:([u,c,l]=Bs(c,a),u)}if({cmd:o,size:a}=yield yield K(null),e.isTTY)return yield yield K(new Uint8Array(0)),yield K(null);try{n[0]=Ew(e,"end"),n[1]=Ew(e,"error");do{if(n[2]=Ew(e,"readable"),[r,s]=yield K(Promise.race(n.map(h=>h[2]))),r==="error")break;if((i=r==="end")||(Number.isFinite(a-l)?(u=ne(e.read(a-l)),u.byteLength<a-l&&(u=ne(e.read()))):u=ne(e.read()),u.byteLength>0&&(c.push(u),l+=u.byteLength)),i||a<=l)do({cmd:o,size:a}=yield yield K(f()));while(a<l)}while(!i)}finally{yield K(d(n,r==="error"?s:null))}return yield K(null);function d(h,p){return u=c=null,new Promise((g,v)=>{for(const[y,m]of h)e.off(y,m);try{const y=e.destroy;y&&y.call(e,p),p=void 0}catch(y){p=y||p}finally{p!=null?v(p):g()}})}})}var ni;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(ni||(ni={}));var zi;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(zi||(zi={}));var dr;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(dr||(dr={}));var Fo;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(Fo||(Fo={}));var Jt;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(Jt||(Jt={}));var ka;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(ka||(ka={}));var ue;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(ue||(ue={}));var U;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.Float=3]="Float",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct=13]="Struct",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Dictionary=-1]="Dictionary",e[e.Int8=-2]="Int8",e[e.Int16=-3]="Int16",e[e.Int32=-4]="Int32",e[e.Int64=-5]="Int64",e[e.Uint8=-6]="Uint8",e[e.Uint16=-7]="Uint16",e[e.Uint32=-8]="Uint32",e[e.Uint64=-9]="Uint64",e[e.Float16=-10]="Float16",e[e.Float32=-11]="Float32",e[e.Float64=-12]="Float64",e[e.DateDay=-13]="DateDay",e[e.DateMillisecond=-14]="DateMillisecond",e[e.TimestampSecond=-15]="TimestampSecond",e[e.TimestampMillisecond=-16]="TimestampMillisecond",e[e.TimestampMicrosecond=-17]="TimestampMicrosecond",e[e.TimestampNanosecond=-18]="TimestampNanosecond",e[e.TimeSecond=-19]="TimeSecond",e[e.TimeMillisecond=-20]="TimeMillisecond",e[e.TimeMicrosecond=-21]="TimeMicrosecond",e[e.TimeNanosecond=-22]="TimeNanosecond",e[e.DenseUnion=-23]="DenseUnion",e[e.SparseUnion=-24]="SparseUnion",e[e.IntervalDayTime=-25]="IntervalDayTime",e[e.IntervalYearMonth=-26]="IntervalYearMonth"})(U||(U={}));var so;(function(e){e[e.OFFSET=0]="OFFSET",e[e.DATA=1]="DATA",e[e.VALIDITY=2]="VALIDITY",e[e.TYPE=3]="TYPE"})(so||(so={}));const oY=void 0;function tp(e){if(e===null)return"null";if(e===oY)return"undefined";switch(typeof e){case"number":return`${e}`;case"bigint":return`${e}`;case"string":return`"${e}"`}return typeof e[Symbol.toPrimitive]=="function"?e[Symbol.toPrimitive]("string"):ArrayBuffer.isView(e)?e instanceof qp||e instanceof Wp?`[${[...e].map(t=>tp(t))}]`:`[${e}]`:ArrayBuffer.isView(e)?`[${e}]`:JSON.stringify(e,(t,n)=>typeof n=="bigint"?`${n}`:n)}const aY=Symbol.for("isArrowBigNum");function Xi(e,...t){return t.length===0?Object.setPrototypeOf(pe(this.TypedArray,e),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(e,...t),this.constructor.prototype)}Xi.prototype[aY]=!0;Xi.prototype.toJSON=function(){return`"${tc(this)}"`};Xi.prototype.valueOf=function(){return kk(this)};Xi.prototype.toString=function(){return tc(this)};Xi.prototype[Symbol.toPrimitive]=function(e="default"){switch(e){case"number":return kk(this);case"string":return tc(this);case"default":return C2(this)}return tc(this)};function ju(...e){return Xi.apply(this,e)}function Vu(...e){return Xi.apply(this,e)}function ep(...e){return Xi.apply(this,e)}Object.setPrototypeOf(ju.prototype,Object.create(Int32Array.prototype));Object.setPrototypeOf(Vu.prototype,Object.create(Uint32Array.prototype));Object.setPrototypeOf(ep.prototype,Object.create(Uint32Array.prototype));Object.assign(ju.prototype,Xi.prototype,{constructor:ju,signed:!0,TypedArray:Int32Array,BigIntArray:qp});Object.assign(Vu.prototype,Xi.prototype,{constructor:Vu,signed:!1,TypedArray:Uint32Array,BigIntArray:Wp});Object.assign(ep.prototype,Xi.prototype,{constructor:ep,signed:!0,TypedArray:Uint32Array,BigIntArray:Wp});function kk(e){const{buffer:t,byteOffset:n,length:r,signed:i}=e,s=new Wp(t,n,r),o=i&&s[s.length-1]&BigInt(1)<<BigInt(63);let a=BigInt(o?1:0),l=BigInt(0);if(o){for(const c of s)a+=~c*(BigInt(1)<<BigInt(32)*l++);a*=BigInt(-1)}else for(const c of s)a+=c*(BigInt(1)<<BigInt(32)*l++);return a}let tc,C2;WV?(C2=e=>e.byteLength===8?new e.BigIntArray(e.buffer,e.byteOffset,1)[0]:Tw(e),tc=e=>e.byteLength===8?`${new e.BigIntArray(e.buffer,e.byteOffset,1)[0]}`:Tw(e)):(tc=Tw,C2=tc);function Tw(e){let t="";const n=new Uint32Array(2);let r=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);const i=new Uint32Array((r=new Uint16Array(r).reverse()).buffer);let s=-1;const o=r.length-1;do{for(n[0]=r[s=0];s<o;)r[s++]=n[1]=n[0]/10,n[0]=(n[0]-n[1]*10<<16)+r[s];r[s]=n[1]=n[0]/10,n[0]=n[0]-n[1]*10,t=`${n[0]}${t}`}while(i[0]||i[1]||i[2]||i[3]);return t??"0"}let lY=class Ok{static new(t,n){switch(n){case!0:return new ju(t);case!1:return new Vu(t)}switch(t.constructor){case Int8Array:case Int16Array:case Int32Array:case qp:return new ju(t)}return t.byteLength===16?new ep(t):new Vu(t)}static signed(t){return new ju(t)}static unsigned(t){return new Vu(t)}static decimal(t){return new ep(t)}constructor(t,n){return Ok.new(t,n)}};var Fk,Bk,Rk,Lk,Ck,Uk,Pk,zk,jk,Vk,Yk,qk,Wk,Hk,Gk,Xk,Qk,Kk,Zk;let Bt=class U2{static isNull(t){return(t==null?void 0:t.typeId)===U.Null}static isInt(t){return(t==null?void 0:t.typeId)===U.Int}static isFloat(t){return(t==null?void 0:t.typeId)===U.Float}static isBinary(t){return(t==null?void 0:t.typeId)===U.Binary}static isUtf8(t){return(t==null?void 0:t.typeId)===U.Utf8}static isBool(t){return(t==null?void 0:t.typeId)===U.Bool}static isDecimal(t){return(t==null?void 0:t.typeId)===U.Decimal}static isDate(t){return(t==null?void 0:t.typeId)===U.Date}static isTime(t){return(t==null?void 0:t.typeId)===U.Time}static isTimestamp(t){return(t==null?void 0:t.typeId)===U.Timestamp}static isInterval(t){return(t==null?void 0:t.typeId)===U.Interval}static isList(t){return(t==null?void 0:t.typeId)===U.List}static isStruct(t){return(t==null?void 0:t.typeId)===U.Struct}static isUnion(t){return(t==null?void 0:t.typeId)===U.Union}static isFixedSizeBinary(t){return(t==null?void 0:t.typeId)===U.FixedSizeBinary}static isFixedSizeList(t){return(t==null?void 0:t.typeId)===U.FixedSizeList}static isMap(t){return(t==null?void 0:t.typeId)===U.Map}static isDictionary(t){return(t==null?void 0:t.typeId)===U.Dictionary}static isDenseUnion(t){return U2.isUnion(t)&&t.mode===zi.Dense}static isSparseUnion(t){return U2.isUnion(t)&&t.mode===zi.Sparse}get typeId(){return U.NONE}};Fk=Symbol.toStringTag;Bt[Fk]=(e=>(e.children=null,e.ArrayType=Array,e[Symbol.toStringTag]="DataType"))(Bt.prototype);let Oa=class extends Bt{toString(){return"Null"}get typeId(){return U.Null}};Bk=Symbol.toStringTag;Oa[Bk]=(e=>e[Symbol.toStringTag]="Null")(Oa.prototype);let Fa=class extends Bt{constructor(t,n){super(),this.isSigned=t,this.bitWidth=n}get typeId(){return U.Int}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?qp:Wp}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}};Rk=Symbol.toStringTag;Fa[Rk]=(e=>(e.isSigned=null,e.bitWidth=null,e[Symbol.toStringTag]="Int"))(Fa.prototype);let np=class extends Fa{constructor(){super(!0,32)}get ArrayType(){return Int32Array}};Object.defineProperty(np.prototype,"ArrayType",{value:Int32Array});let rp=class extends Bt{constructor(t){super(),this.precision=t}get typeId(){return U.Float}get ArrayType(){switch(this.precision){case dr.HALF:return Uint16Array;case dr.SINGLE:return Float32Array;case dr.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}};Lk=Symbol.toStringTag;rp[Lk]=(e=>(e.precision=null,e[Symbol.toStringTag]="Float"))(rp.prototype);let tg=class extends Bt{constructor(){super()}get typeId(){return U.Binary}toString(){return"Binary"}};Ck=Symbol.toStringTag;tg[Ck]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Binary"))(tg.prototype);let eg=class extends Bt{constructor(){super()}get typeId(){return U.Utf8}toString(){return"Utf8"}};Uk=Symbol.toStringTag;eg[Uk]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Utf8"))(eg.prototype);let ng=class extends Bt{constructor(){super()}get typeId(){return U.Bool}toString(){return"Bool"}};Pk=Symbol.toStringTag;ng[Pk]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Bool"))(ng.prototype);let rg=class extends Bt{constructor(t,n,r=128){super(),this.scale=t,this.precision=n,this.bitWidth=r}get typeId(){return U.Decimal}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}};zk=Symbol.toStringTag;rg[zk]=(e=>(e.scale=null,e.precision=null,e.ArrayType=Uint32Array,e[Symbol.toStringTag]="Decimal"))(rg.prototype);let ig=class extends Bt{constructor(t){super(),this.unit=t}get typeId(){return U.Date}toString(){return`Date${(this.unit+1)*32}<${Fo[this.unit]}>`}};jk=Symbol.toStringTag;ig[jk]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Date"))(ig.prototype);let ip=class extends Bt{constructor(t,n){super(),this.unit=t,this.bitWidth=n}get typeId(){return U.Time}toString(){return`Time${this.bitWidth}<${Jt[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return qp}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}};Vk=Symbol.toStringTag;ip[Vk]=(e=>(e.unit=null,e.bitWidth=null,e[Symbol.toStringTag]="Time"))(ip.prototype);let sg=class extends Bt{constructor(t,n){super(),this.unit=t,this.timezone=n}get typeId(){return U.Timestamp}toString(){return`Timestamp<${Jt[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}};Yk=Symbol.toStringTag;sg[Yk]=(e=>(e.unit=null,e.timezone=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Timestamp"))(sg.prototype);let og=class extends Bt{constructor(t){super(),this.unit=t}get typeId(){return U.Interval}toString(){return`Interval<${ka[this.unit]}>`}};qk=Symbol.toStringTag;og[qk]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Interval"))(og.prototype);let ag=class extends Bt{constructor(t){super(),this.children=[t]}get typeId(){return U.List}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}};Wk=Symbol.toStringTag;ag[Wk]=(e=>(e.children=null,e[Symbol.toStringTag]="List"))(ag.prototype);let Yn=class extends Bt{constructor(t){super(),this.children=t}get typeId(){return U.Struct}toString(){return`Struct<{${this.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}};Hk=Symbol.toStringTag;Yn[Hk]=(e=>(e.children=null,e[Symbol.toStringTag]="Struct"))(Yn.prototype);let lg=class extends Bt{constructor(t,n,r){super(),this.mode=t,this.children=r,this.typeIds=n=Int32Array.from(n),this.typeIdToChildIndex=n.reduce((i,s,o)=>(i[s]=o)&&i||i,Object.create(null))}get typeId(){return U.Union}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(t=>`${t.type}`).join(" | ")}>`}};Gk=Symbol.toStringTag;lg[Gk]=(e=>(e.mode=null,e.typeIds=null,e.children=null,e.typeIdToChildIndex=null,e.ArrayType=Int8Array,e[Symbol.toStringTag]="Union"))(lg.prototype);let cg=class extends Bt{constructor(t){super(),this.byteWidth=t}get typeId(){return U.FixedSizeBinary}toString(){return`FixedSizeBinary[${this.byteWidth}]`}};Xk=Symbol.toStringTag;cg[Xk]=(e=>(e.byteWidth=null,e.ArrayType=Uint8Array,e[Symbol.toStringTag]="FixedSizeBinary"))(cg.prototype);let ug=class extends Bt{constructor(t,n){super(),this.listSize=t,this.children=[n]}get typeId(){return U.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}};Qk=Symbol.toStringTag;ug[Qk]=(e=>(e.children=null,e.listSize=null,e[Symbol.toStringTag]="FixedSizeList"))(ug.prototype);let fg=class extends Bt{constructor(t,n=!1){super(),this.children=[t],this.keysSorted=n}get typeId(){return U.Map}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}};Kk=Symbol.toStringTag;fg[Kk]=(e=>(e.children=null,e.keysSorted=null,e[Symbol.toStringTag]="Map_"))(fg.prototype);const cY=(e=>()=>++e)(-1);let mf=class extends Bt{constructor(t,n,r,i){super(),this.indices=n,this.dictionary=t,this.isOrdered=i||!1,this.id=r==null?cY():typeof r=="number"?r:r.low}get typeId(){return U.Dictionary}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}};Zk=Symbol.toStringTag;mf[Zk]=(e=>(e.id=null,e.indices=null,e.isOrdered=null,e.dictionary=null,e[Symbol.toStringTag]="Dictionary"))(mf.prototype);function oo(e){const t=e;switch(e.typeId){case U.Decimal:return e.bitWidth/32;case U.Timestamp:return 2;case U.Date:return 1+t.unit;case U.Interval:return 1+t.unit;case U.FixedSizeList:return t.listSize;case U.FixedSizeBinary:return t.byteWidth;default:return 1}}let Wt=class{visitMany(t,...n){return t.map((r,i)=>this.visit(r,...n.map(s=>s[i])))}visit(...t){return this.getVisitFn(t[0],!1).apply(this,t)}getVisitFn(t,n=!0){return uY(this,t,n)}getVisitFnByTypeId(t,n=!0){return Kc(this,t,n)}visitNull(t,...n){return null}visitBool(t,...n){return null}visitInt(t,...n){return null}visitFloat(t,...n){return null}visitUtf8(t,...n){return null}visitBinary(t,...n){return null}visitFixedSizeBinary(t,...n){return null}visitDate(t,...n){return null}visitTimestamp(t,...n){return null}visitTime(t,...n){return null}visitDecimal(t,...n){return null}visitList(t,...n){return null}visitStruct(t,...n){return null}visitUnion(t,...n){return null}visitDictionary(t,...n){return null}visitInterval(t,...n){return null}visitFixedSizeList(t,...n){return null}visitMap(t,...n){return null}};function uY(e,t,n=!0){return typeof t=="number"?Kc(e,t,n):typeof t=="string"&&t in U?Kc(e,U[t],n):t&&t instanceof Bt?Kc(e,rM(t),n):t!=null&&t.type&&t.type instanceof Bt?Kc(e,rM(t.type),n):Kc(e,U.NONE,n)}function Kc(e,t,n=!0){let r=null;switch(t){case U.Null:r=e.visitNull;break;case U.Bool:r=e.visitBool;break;case U.Int:r=e.visitInt;break;case U.Int8:r=e.visitInt8||e.visitInt;break;case U.Int16:r=e.visitInt16||e.visitInt;break;case U.Int32:r=e.visitInt32||e.visitInt;break;case U.Int64:r=e.visitInt64||e.visitInt;break;case U.Uint8:r=e.visitUint8||e.visitInt;break;case U.Uint16:r=e.visitUint16||e.visitInt;break;case U.Uint32:r=e.visitUint32||e.visitInt;break;case U.Uint64:r=e.visitUint64||e.visitInt;break;case U.Float:r=e.visitFloat;break;case U.Float16:r=e.visitFloat16||e.visitFloat;break;case U.Float32:r=e.visitFloat32||e.visitFloat;break;case U.Float64:r=e.visitFloat64||e.visitFloat;break;case U.Utf8:r=e.visitUtf8;break;case U.Binary:r=e.visitBinary;break;case U.FixedSizeBinary:r=e.visitFixedSizeBinary;break;case U.Date:r=e.visitDate;break;case U.DateDay:r=e.visitDateDay||e.visitDate;break;case U.DateMillisecond:r=e.visitDateMillisecond||e.visitDate;break;case U.Timestamp:r=e.visitTimestamp;break;case U.TimestampSecond:r=e.visitTimestampSecond||e.visitTimestamp;break;case U.TimestampMillisecond:r=e.visitTimestampMillisecond||e.visitTimestamp;break;case U.TimestampMicrosecond:r=e.visitTimestampMicrosecond||e.visitTimestamp;break;case U.TimestampNanosecond:r=e.visitTimestampNanosecond||e.visitTimestamp;break;case U.Time:r=e.visitTime;break;case U.TimeSecond:r=e.visitTimeSecond||e.visitTime;break;case U.TimeMillisecond:r=e.visitTimeMillisecond||e.visitTime;break;case U.TimeMicrosecond:r=e.visitTimeMicrosecond||e.visitTime;break;case U.TimeNanosecond:r=e.visitTimeNanosecond||e.visitTime;break;case U.Decimal:r=e.visitDecimal;break;case U.List:r=e.visitList;break;case U.Struct:r=e.visitStruct;break;case U.Union:r=e.visitUnion;break;case U.DenseUnion:r=e.visitDenseUnion||e.visitUnion;break;case U.SparseUnion:r=e.visitSparseUnion||e.visitUnion;break;case U.Dictionary:r=e.visitDictionary;break;case U.Interval:r=e.visitInterval;break;case U.IntervalDayTime:r=e.visitIntervalDayTime||e.visitInterval;break;case U.IntervalYearMonth:r=e.visitIntervalYearMonth||e.visitInterval;break;case U.FixedSizeList:r=e.visitFixedSizeList;break;case U.Map:r=e.visitMap;break}if(typeof r=="function")return r;if(!n)return()=>null;throw new Error(`Unrecognized type '${U[t]}'`)}function rM(e){switch(e.typeId){case U.Null:return U.Null;case U.Int:{const{bitWidth:t,isSigned:n}=e;switch(t){case 8:return n?U.Int8:U.Uint8;case 16:return n?U.Int16:U.Uint16;case 32:return n?U.Int32:U.Uint32;case 64:return n?U.Int64:U.Uint64}return U.Int}case U.Float:switch(e.precision){case dr.HALF:return U.Float16;case dr.SINGLE:return U.Float32;case dr.DOUBLE:return U.Float64}return U.Float;case U.Binary:return U.Binary;case U.Utf8:return U.Utf8;case U.Bool:return U.Bool;case U.Decimal:return U.Decimal;case U.Time:switch(e.unit){case Jt.SECOND:return U.TimeSecond;case Jt.MILLISECOND:return U.TimeMillisecond;case Jt.MICROSECOND:return U.TimeMicrosecond;case Jt.NANOSECOND:return U.TimeNanosecond}return U.Time;case U.Timestamp:switch(e.unit){case Jt.SECOND:return U.TimestampSecond;case Jt.MILLISECOND:return U.TimestampMillisecond;case Jt.MICROSECOND:return U.TimestampMicrosecond;case Jt.NANOSECOND:return U.TimestampNanosecond}return U.Timestamp;case U.Date:switch(e.unit){case Fo.DAY:return U.DateDay;case Fo.MILLISECOND:return U.DateMillisecond}return U.Date;case U.Interval:switch(e.unit){case ka.DAY_TIME:return U.IntervalDayTime;case ka.YEAR_MONTH:return U.IntervalYearMonth}return U.Interval;case U.Map:return U.Map;case U.List:return U.List;case U.Struct:return U.Struct;case U.Union:switch(e.mode){case zi.Dense:return U.DenseUnion;case zi.Sparse:return U.SparseUnion}return U.Union;case U.FixedSizeBinary:return U.FixedSizeBinary;case U.FixedSizeList:return U.FixedSizeList;case U.Dictionary:return U.Dictionary}throw new Error(`Unrecognized type '${U[e.typeId]}'`)}Wt.prototype.visitInt8=null;Wt.prototype.visitInt16=null;Wt.prototype.visitInt32=null;Wt.prototype.visitInt64=null;Wt.prototype.visitUint8=null;Wt.prototype.visitUint16=null;Wt.prototype.visitUint32=null;Wt.prototype.visitUint64=null;Wt.prototype.visitFloat16=null;Wt.prototype.visitFloat32=null;Wt.prototype.visitFloat64=null;Wt.prototype.visitDateDay=null;Wt.prototype.visitDateMillisecond=null;Wt.prototype.visitTimestampSecond=null;Wt.prototype.visitTimestampMillisecond=null;Wt.prototype.visitTimestampMicrosecond=null;Wt.prototype.visitTimestampNanosecond=null;Wt.prototype.visitTimeSecond=null;Wt.prototype.visitTimeMillisecond=null;Wt.prototype.visitTimeMicrosecond=null;Wt.prototype.visitTimeNanosecond=null;Wt.prototype.visitDenseUnion=null;Wt.prototype.visitSparseUnion=null;Wt.prototype.visitIntervalDayTime=null;Wt.prototype.visitIntervalYearMonth=null;const Jk=new Float64Array(1),Cc=new Uint32Array(Jk.buffer);function t8(e){const t=(e&31744)>>10,n=(e&1023)/1024,r=Math.pow(-1,(e&32768)>>15);switch(t){case 31:return r*(n?Number.NaN:1/0);case 0:return r*(n?6103515625e-14*n:0)}return r*Math.pow(2,t-15)*(1+n)}function fY(e){if(e!==e)return 32256;Jk[0]=e;const t=(Cc[1]&2147483648)>>16&65535;let n=Cc[1]&2146435072,r=0;return n>=1089470464?Cc[0]>0?n=31744:(n=(n&2080374784)>>16,r=(Cc[1]&1048575)>>10):n<=1056964608?(r=1048576+(Cc[1]&1048575),r=1048576+(r<<(n>>20)-998)>>21,n=0):(n=n-1056964608>>10,r=(Cc[1]&1048575)+512>>10),t|n|r&65535}let Mt=class extends Wt{};function Dt(e){return(t,n,r)=>{if(t.setValid(n,r!=null))return e(t,n,r)}}const dY=(e,t,n)=>{e[t]=Math.trunc(n/864e5)},LI=(e,t,n)=>{e[t]=Math.trunc(n%4294967296),e[t+1]=Math.trunc(n/4294967296)},hY=(e,t,n)=>{e[t]=Math.trunc(n*1e3%4294967296),e[t+1]=Math.trunc(n*1e3/4294967296)},pY=(e,t,n)=>{e[t]=Math.trunc(n*1e6%4294967296),e[t+1]=Math.trunc(n*1e6/4294967296)},e8=(e,t,n,r)=>{if(n+1<t.length){const{[n]:i,[n+1]:s}=t;e.set(r.subarray(0,s-i),i)}},yY=({offset:e,values:t},n,r)=>{const i=e+n;r?t[i>>3]|=1<<i%8:t[i>>3]&=~(1<<i%8)},zo=({values:e},t,n)=>{e[t]=n},CI=({values:e},t,n)=>{e[t]=n},n8=({values:e},t,n)=>{e[t]=fY(n)},mY=(e,t,n)=>{switch(e.type.precision){case dr.HALF:return n8(e,t,n);case dr.SINGLE:case dr.DOUBLE:return CI(e,t,n)}},r8=({values:e},t,n)=>{dY(e,t,n.valueOf())},i8=({values:e},t,n)=>{LI(e,t*2,n.valueOf())},gY=({stride:e,values:t},n,r)=>{t.set(r.subarray(0,e),e*n)},bY=({values:e,valueOffsets:t},n,r)=>e8(e,t,n,r),vY=({values:e,valueOffsets:t},n,r)=>{e8(e,t,n,OI(r))},wY=(e,t,n)=>{e.type.unit===Fo.DAY?r8(e,t,n):i8(e,t,n)},s8=({values:e},t,n)=>LI(e,t*2,n/1e3),o8=({values:e},t,n)=>LI(e,t*2,n),a8=({values:e},t,n)=>hY(e,t*2,n),l8=({values:e},t,n)=>pY(e,t*2,n),_Y=(e,t,n)=>{switch(e.type.unit){case Jt.SECOND:return s8(e,t,n);case Jt.MILLISECOND:return o8(e,t,n);case Jt.MICROSECOND:return a8(e,t,n);case Jt.NANOSECOND:return l8(e,t,n)}},c8=({values:e},t,n)=>{e[t]=n},u8=({values:e},t,n)=>{e[t]=n},f8=({values:e},t,n)=>{e[t]=n},d8=({values:e},t,n)=>{e[t]=n},SY=(e,t,n)=>{switch(e.type.unit){case Jt.SECOND:return c8(e,t,n);case Jt.MILLISECOND:return u8(e,t,n);case Jt.MICROSECOND:return f8(e,t,n);case Jt.NANOSECOND:return d8(e,t,n)}},xY=({values:e,stride:t},n,r)=>{e.set(r.subarray(0,t),t*n)},IY=(e,t,n)=>{const r=e.children[0],i=e.valueOffsets,s=mi.getVisitFn(r);if(Array.isArray(n))for(let o=-1,a=i[t],l=i[t+1];a<l;)s(r,a++,n[++o]);else for(let o=-1,a=i[t],l=i[t+1];a<l;)s(r,a++,n.get(++o))},EY=(e,t,n)=>{const r=e.children[0],{valueOffsets:i}=e,s=mi.getVisitFn(r);let{[t]:o,[t+1]:a}=i;const l=n instanceof Map?n.entries():Object.entries(n);for(const c of l)if(s(r,o,c),++o>=a)break},TY=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[s]),AY=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(s)),MY=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(i.name)),$Y=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[i.name]),NY=(e,t,n)=>{const r=e.type.children.map(s=>mi.getVisitFn(s.type)),i=n instanceof Map?MY(t,n):n instanceof Qe?AY(t,n):Array.isArray(n)?TY(t,n):$Y(t,n);e.type.children.forEach((s,o)=>i(r[o],e.children[o],s,o))},DY=(e,t,n)=>{e.type.mode===zi.Dense?h8(e,t,n):p8(e,t,n)},h8=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];mi.visit(i,e.valueOffsets[t],n)},p8=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];mi.visit(i,t,n)},kY=(e,t,n)=>{var r;(r=e.dictionary)===null||r===void 0||r.set(e.values[t],n)},OY=(e,t,n)=>{e.type.unit===ka.DAY_TIME?y8(e,t,n):m8(e,t,n)},y8=({values:e},t,n)=>{e.set(n.subarray(0,2),2*t)},m8=({values:e},t,n)=>{e[t]=n[0]*12+n[1]%12},FY=(e,t,n)=>{const{stride:r}=e,i=e.children[0],s=mi.getVisitFn(i);if(Array.isArray(n))for(let o=-1,a=t*r;++o<r;)s(i,a+o,n[o]);else for(let o=-1,a=t*r;++o<r;)s(i,a+o,n.get(o))};Mt.prototype.visitBool=Dt(yY);Mt.prototype.visitInt=Dt(zo);Mt.prototype.visitInt8=Dt(zo);Mt.prototype.visitInt16=Dt(zo);Mt.prototype.visitInt32=Dt(zo);Mt.prototype.visitInt64=Dt(zo);Mt.prototype.visitUint8=Dt(zo);Mt.prototype.visitUint16=Dt(zo);Mt.prototype.visitUint32=Dt(zo);Mt.prototype.visitUint64=Dt(zo);Mt.prototype.visitFloat=Dt(mY);Mt.prototype.visitFloat16=Dt(n8);Mt.prototype.visitFloat32=Dt(CI);Mt.prototype.visitFloat64=Dt(CI);Mt.prototype.visitUtf8=Dt(vY);Mt.prototype.visitBinary=Dt(bY);Mt.prototype.visitFixedSizeBinary=Dt(gY);Mt.prototype.visitDate=Dt(wY);Mt.prototype.visitDateDay=Dt(r8);Mt.prototype.visitDateMillisecond=Dt(i8);Mt.prototype.visitTimestamp=Dt(_Y);Mt.prototype.visitTimestampSecond=Dt(s8);Mt.prototype.visitTimestampMillisecond=Dt(o8);Mt.prototype.visitTimestampMicrosecond=Dt(a8);Mt.prototype.visitTimestampNanosecond=Dt(l8);Mt.prototype.visitTime=Dt(SY);Mt.prototype.visitTimeSecond=Dt(c8);Mt.prototype.visitTimeMillisecond=Dt(u8);Mt.prototype.visitTimeMicrosecond=Dt(f8);Mt.prototype.visitTimeNanosecond=Dt(d8);Mt.prototype.visitDecimal=Dt(xY);Mt.prototype.visitList=Dt(IY);Mt.prototype.visitStruct=Dt(NY);Mt.prototype.visitUnion=Dt(DY);Mt.prototype.visitDenseUnion=Dt(h8);Mt.prototype.visitSparseUnion=Dt(p8);Mt.prototype.visitDictionary=Dt(kY);Mt.prototype.visitInterval=Dt(OY);Mt.prototype.visitIntervalDayTime=Dt(y8);Mt.prototype.visitIntervalYearMonth=Dt(m8);Mt.prototype.visitFixedSizeList=Dt(FY);Mt.prototype.visitMap=Dt(EY);const mi=new Mt,Ai=Symbol.for("parent"),Yu=Symbol.for("rowIndex");let UI=class{constructor(t,n){return this[Ai]=t,this[Yu]=n,new Proxy(this,new RY)}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[Yu],n=this[Ai],r=n.type.children,i={};for(let s=-1,o=r.length;++s<o;)i[r[s].name]=mr.visit(n.children[s],t);return i}toString(){return`{${[...this].map(([t,n])=>`${tp(t)}: ${tp(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new BY(this[Ai],this[Yu])}},BY=class{constructor(t,n){this.childIndex=0,this.children=t.children,this.rowIndex=n,this.childFields=t.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const t=this.childIndex;return t<this.numChildren?(this.childIndex=t+1,{done:!1,value:[this.childFields[t].name,mr.visit(this.children[t],this.rowIndex)]}):{done:!0,value:null}}};Object.defineProperties(UI.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[Ai]:{writable:!0,enumerable:!1,configurable:!1,value:null},[Yu]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});let RY=class{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[Ai].type.children.map(n=>n.name)}has(t,n){return t[Ai].type.children.findIndex(r=>r.name===n)!==-1}getOwnPropertyDescriptor(t,n){if(t[Ai].type.children.findIndex(r=>r.name===n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[Ai].type.children.findIndex(i=>i.name===n);if(r!==-1){const i=mr.visit(t[Ai].children[r],t[Yu]);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[Ai].type.children.findIndex(s=>s.name===n);return i!==-1?(mi.visit(t[Ai].children[i],t[Yu],r),Reflect.set(t,n,r)):Reflect.has(t,n)||typeof n=="symbol"?Reflect.set(t,n,r):!1}},xt=class extends Wt{};function $t(e){return(t,n)=>t.getValid(n)?e(t,n):null}const LY=(e,t)=>864e5*e[t],PI=(e,t)=>4294967296*e[t+1]+(e[t]>>>0),CY=(e,t)=>4294967296*(e[t+1]/1e3)+(e[t]>>>0)/1e3,UY=(e,t)=>4294967296*(e[t+1]/1e6)+(e[t]>>>0)/1e6,g8=e=>new Date(e),PY=(e,t)=>g8(LY(e,t)),zY=(e,t)=>g8(PI(e,t)),jY=(e,t)=>null,b8=(e,t,n)=>{if(n+1>=t.length)return null;const r=t[n],i=t[n+1];return e.subarray(r,i)},VY=({offset:e,values:t},n)=>{const r=e+n;return(t[r>>3]&1<<r%8)!==0},v8=({values:e},t)=>PY(e,t),w8=({values:e},t)=>zY(e,t*2),nl=({stride:e,values:t},n)=>t[e*n],YY=({stride:e,values:t},n)=>t8(t[e*n]),_8=({values:e},t)=>e[t],qY=({stride:e,values:t},n)=>t.subarray(e*n,e*(n+1)),WY=({values:e,valueOffsets:t},n)=>b8(e,t,n),HY=({values:e,valueOffsets:t},n)=>{const r=b8(e,t,n);return r!==null?B2(r):null},GY=({values:e},t)=>e[t],XY=({type:e,values:t},n)=>e.precision!==dr.HALF?t[n]:t8(t[n]),QY=(e,t)=>e.type.unit===Fo.DAY?v8(e,t):w8(e,t),S8=({values:e},t)=>1e3*PI(e,t*2),x8=({values:e},t)=>PI(e,t*2),I8=({values:e},t)=>CY(e,t*2),E8=({values:e},t)=>UY(e,t*2),KY=(e,t)=>{switch(e.type.unit){case Jt.SECOND:return S8(e,t);case Jt.MILLISECOND:return x8(e,t);case Jt.MICROSECOND:return I8(e,t);case Jt.NANOSECOND:return E8(e,t)}},T8=({values:e},t)=>e[t],A8=({values:e},t)=>e[t],M8=({values:e},t)=>e[t],$8=({values:e},t)=>e[t],ZY=(e,t)=>{switch(e.type.unit){case Jt.SECOND:return T8(e,t);case Jt.MILLISECOND:return A8(e,t);case Jt.MICROSECOND:return M8(e,t);case Jt.NANOSECOND:return $8(e,t)}},JY=({values:e,stride:t},n)=>lY.decimal(e.subarray(t*n,t*(n+1))),tq=(e,t)=>{const{valueOffsets:n,stride:r,children:i}=e,{[t*r]:s,[t*r+1]:o}=n,l=i[0].slice(s,o-s);return new Qe([l])},eq=(e,t)=>{const{valueOffsets:n,children:r}=e,{[t]:i,[t+1]:s}=n,o=r[0];return new zI(o.slice(i,s-i))},nq=(e,t)=>new UI(e,t),rq=(e,t)=>e.type.mode===zi.Dense?N8(e,t):D8(e,t),N8=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return mr.visit(r,e.valueOffsets[t])},D8=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return mr.visit(r,t)},iq=(e,t)=>{var n;return(n=e.dictionary)===null||n===void 0?void 0:n.get(e.values[t])},sq=(e,t)=>e.type.unit===ka.DAY_TIME?k8(e,t):O8(e,t),k8=({values:e},t)=>e.subarray(2*t,2*(t+1)),O8=({values:e},t)=>{const n=e[t],r=new Int32Array(2);return r[0]=Math.trunc(n/12),r[1]=Math.trunc(n%12),r},oq=(e,t)=>{const{stride:n,children:r}=e,s=r[0].slice(t*n,n);return new Qe([s])};xt.prototype.visitNull=$t(jY);xt.prototype.visitBool=$t(VY);xt.prototype.visitInt=$t(GY);xt.prototype.visitInt8=$t(nl);xt.prototype.visitInt16=$t(nl);xt.prototype.visitInt32=$t(nl);xt.prototype.visitInt64=$t(_8);xt.prototype.visitUint8=$t(nl);xt.prototype.visitUint16=$t(nl);xt.prototype.visitUint32=$t(nl);xt.prototype.visitUint64=$t(_8);xt.prototype.visitFloat=$t(XY);xt.prototype.visitFloat16=$t(YY);xt.prototype.visitFloat32=$t(nl);xt.prototype.visitFloat64=$t(nl);xt.prototype.visitUtf8=$t(HY);xt.prototype.visitBinary=$t(WY);xt.prototype.visitFixedSizeBinary=$t(qY);xt.prototype.visitDate=$t(QY);xt.prototype.visitDateDay=$t(v8);xt.prototype.visitDateMillisecond=$t(w8);xt.prototype.visitTimestamp=$t(KY);xt.prototype.visitTimestampSecond=$t(S8);xt.prototype.visitTimestampMillisecond=$t(x8);xt.prototype.visitTimestampMicrosecond=$t(I8);xt.prototype.visitTimestampNanosecond=$t(E8);xt.prototype.visitTime=$t(ZY);xt.prototype.visitTimeSecond=$t(T8);xt.prototype.visitTimeMillisecond=$t(A8);xt.prototype.visitTimeMicrosecond=$t(M8);xt.prototype.visitTimeNanosecond=$t($8);xt.prototype.visitDecimal=$t(JY);xt.prototype.visitList=$t(tq);xt.prototype.visitStruct=$t(nq);xt.prototype.visitUnion=$t(rq);xt.prototype.visitDenseUnion=$t(N8);xt.prototype.visitSparseUnion=$t(D8);xt.prototype.visitDictionary=$t(iq);xt.prototype.visitInterval=$t(sq);xt.prototype.visitIntervalDayTime=$t(k8);xt.prototype.visitIntervalYearMonth=$t(O8);xt.prototype.visitFixedSizeList=$t(oq);xt.prototype.visitMap=$t(eq);const mr=new xt,ps=Symbol.for("keys"),qu=Symbol.for("vals");let zI=class{constructor(t){return this[ps]=new Qe([t.children[0]]).memoize(),this[qu]=t.children[1],new Proxy(this,new lq)}[Symbol.iterator](){return new aq(this[ps],this[qu])}get size(){return this[ps].length}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[ps],n=this[qu],r={};for(let i=-1,s=t.length;++i<s;)r[t.get(i)]=mr.visit(n,i);return r}toString(){return`{${[...this].map(([t,n])=>`${tp(t)}: ${tp(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}},aq=class{constructor(t,n){this.keys=t,this.vals=n,this.keyIndex=0,this.numKeys=t.length}[Symbol.iterator](){return this}next(){const t=this.keyIndex;return t===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(t),mr.visit(this.vals,t)]})}},lq=class{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[ps].toArray().map(String)}has(t,n){return t[ps].includes(n)}getOwnPropertyDescriptor(t,n){if(t[ps].indexOf(n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[ps].indexOf(n);if(r!==-1){const i=mr.visit(Reflect.get(t,qu),r);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[ps].indexOf(n);return i!==-1?(mi.visit(Reflect.get(t,qu),i,r),Reflect.set(t,n,r)):Reflect.has(t,n)?Reflect.set(t,n,r):!1}};Object.defineProperties(zI.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[ps]:{writable:!0,enumerable:!1,configurable:!1,value:null},[qu]:{writable:!0,enumerable:!1,configurable:!1,value:null}});let iM;function F8(e,t,n,r){const{length:i=0}=e;let s=typeof t!="number"?0:t,o=typeof n!="number"?i:n;return s<0&&(s=(s%i+i)%i),o<0&&(o=(o%i+i)%i),o<s&&(iM=s,s=o,o=iM),o>i&&(o=i),r?r(e,s,o):[s,o]}const sM=e=>e!==e;function Zf(e){if(typeof e!=="object"||e===null)return sM(e)?sM:n=>n===e;if(e instanceof Date){const n=e.valueOf();return r=>r instanceof Date?r.valueOf()===n:!1}return ArrayBuffer.isView(e)?n=>n?tY(e,n):!1:e instanceof Map?uq(e):Array.isArray(e)?cq(e):e instanceof Qe?fq(e):dq(e,!0)}function cq(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=Zf(e[n]);return Lb(t)}function uq(e){let t=-1;const n=[];for(const r of e.values())n[++t]=Zf(r);return Lb(n)}function fq(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=Zf(e.get(n));return Lb(t)}function dq(e,t=!1){const n=Object.keys(e);if(!t&&n.length===0)return()=>!1;const r=[];for(let i=-1,s=n.length;++i<s;)r[i]=Zf(e[n[i]]);return Lb(r,n)}function Lb(e,t){return n=>{if(!n||typeof n!="object")return!1;switch(n.constructor){case Array:return hq(e,n);case Map:return oM(e,n,n.keys());case zI:case UI:case Object:case void 0:return oM(e,n,t||Object.keys(n))}return n instanceof Qe?pq(e,n):!1}}function hq(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t[r]))return!1;return!0}function pq(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t.get(r)))return!1;return!0}function oM(e,t,n){const r=n[Symbol.iterator](),i=t instanceof Map?t.keys():Object.keys(t)[Symbol.iterator](),s=t instanceof Map?t.values():Object.values(t)[Symbol.iterator]();let o=0;const a=e.length;let l=s.next(),c=r.next(),u=i.next();for(;o<a&&!c.done&&!u.done&&!l.done&&!(c.value!==u.value||!e[o](l.value));++o,c=r.next(),u=i.next(),l=s.next());return o===a&&c.done&&u.done&&l.done?!0:(r.return&&r.return(),i.return&&i.return(),s.return&&s.return(),!1)}function B8(e,t,n,r){return(n&1<<r)!==0}function yq(e,t,n,r){return(n&1<<r)>>r}function mq(e,t,n){const r=n.byteLength+7&-8;if(e>0||n.byteLength<r){const i=new Uint8Array(r);return i.set(e%8===0?n.subarray(e>>3):P2(new jI(n,e,t,null,B8)).subarray(0,r)),i}return n}function P2(e){const t=[];let n=0,r=0,i=0;for(const o of e)o&&(i|=1<<r),++r===8&&(t[n++]=i,i=r=0);(n===0||r>0)&&(t[n++]=i);const s=new Uint8Array(t.length+7&-8);return s.set(t),s}let jI=class{constructor(t,n,r,i,s){this.bytes=t,this.length=r,this.context=i,this.get=s,this.bit=n%8,this.byteIndex=n>>3,this.byte=t[this.byteIndex++],this.index=0}next(){return this.index<this.length?(this.bit===8&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}};function z2(e,t,n){if(n-t<=0)return 0;if(n-t<8){let s=0;for(const o of new jI(e,t,n-t,e,yq))s+=o;return s}const r=n>>3<<3,i=t+(t%8===0?0:8-t%8);return z2(e,t,i)+z2(e,r,n)+gq(e,i>>3,r-i>>3)}function gq(e,t,n){let r=0,i=Math.trunc(t);const s=new DataView(e.buffer,e.byteOffset,e.byteLength),o=n===void 0?e.byteLength:i+n;for(;o-i>=4;)r+=Aw(s.getUint32(i)),i+=4;for(;o-i>=2;)r+=Aw(s.getUint16(i)),i+=2;for(;o-i>=1;)r+=Aw(s.getUint8(i)),i+=1;return r}function Aw(e){let t=Math.trunc(e);return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),(t+(t>>>4)&252645135)*16843009>>>24}const bq=-1;let De=class j2{constructor(t,n,r,i,s,o=[],a){this.type=t,this.children=o,this.dictionary=a,this.offset=Math.floor(Math.max(n||0,0)),this.length=Math.floor(Math.max(r||0,0)),this._nullCount=Math.floor(Math.max(i||0,-1));let l;s instanceof j2?(this.stride=s.stride,this.values=s.values,this.typeIds=s.typeIds,this.nullBitmap=s.nullBitmap,this.valueOffsets=s.valueOffsets):(this.stride=oo(t),s&&((l=s[0])&&(this.valueOffsets=l),(l=s[1])&&(this.values=l),(l=s[2])&&(this.nullBitmap=l),(l=s[3])&&(this.typeIds=l))),this.nullable=this._nullCount!==0&&this.nullBitmap&&this.nullBitmap.byteLength>0}get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get byteLength(){let t=0;const{valueOffsets:n,values:r,nullBitmap:i,typeIds:s}=this;return n&&(t+=n.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),s&&(t+=s.byteLength),this.children.reduce((o,a)=>o+a.byteLength,t)}get nullCount(){let t=this._nullCount,n;return t<=bq&&(n=this.nullBitmap)&&(this._nullCount=t=this.length-z2(n,this.offset,this.offset+this.length)),t}getValid(t){if(this.nullable&&this.nullCount>0){const n=this.offset+t;return(this.nullBitmap[n>>3]&1<<n%8)!==0}return!0}setValid(t,n){if(!this.nullable)return n;if(!this.nullBitmap||this.nullBitmap.byteLength<=t>>3){const{nullBitmap:l}=this._changeLengthAndBackfillNullBitmap(this.length);Object.assign(this,{nullBitmap:l,_nullCount:0})}const{nullBitmap:r,offset:i}=this,s=i+t>>3,o=(i+t)%8,a=r[s]>>o&1;return n?a===0&&(r[s]|=1<<o,this._nullCount=this.nullCount+1):a===1&&(r[s]&=~(1<<o),this._nullCount=this.nullCount-1),n}clone(t=this.type,n=this.offset,r=this.length,i=this._nullCount,s=this,o=this.children){return new j2(t,n,r,i,s,o,this.dictionary)}slice(t,n){const{stride:r,typeId:i,children:s}=this,o=+(this._nullCount===0)-1,a=i===16?r:1,l=this._sliceBuffers(t,n,r,i);return this.clone(this.type,this.offset+t,n,o,l,s.length===0||this.valueOffsets?s:this._sliceChildren(s,a*t,a*n))}_changeLengthAndBackfillNullBitmap(t){if(this.typeId===U.Null)return this.clone(this.type,0,t,0);const{length:n,nullCount:r}=this,i=new Uint8Array((t+63&-64)>>3).fill(255,0,n>>3);i[n>>3]=(1<<n-(n&-8))-1,r>0&&i.set(mq(this.offset,n,this.nullBitmap),0);const s=this.buffers;return s[so.VALIDITY]=i,this.clone(this.type,0,t,r+(t-n),s)}_sliceBuffers(t,n,r,i){let s;const{buffers:o}=this;return(s=o[so.TYPE])&&(o[so.TYPE]=s.subarray(t,t+n)),(s=o[so.OFFSET])&&(o[so.OFFSET]=s.subarray(t,t+n+1))||(s=o[so.DATA])&&(o[so.DATA]=i===6?s:s.subarray(r*t,r*(t+n))),o}_sliceChildren(t,n,r){return t.map(i=>i.slice(n,r))}};De.prototype.children=Object.freeze([]);let vq=class em extends Wt{visit(t){return this.getVisitFn(t.type).call(this,t)}visitNull(t){const{["type"]:n,["offset"]:r=0,["length"]:i=0}=t;return new De(n,r,i,0)}visitBool(t){const{["type"]:n,["offset"]:r=0}=t,i=ne(t.nullBitmap),s=pe(n.ArrayType,t.data),{["length"]:o=s.length>>3,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new De(n,r,o,a,[void 0,s,i])}visitInt(t){const{["type"]:n,["offset"]:r=0}=t,i=ne(t.nullBitmap),s=pe(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new De(n,r,o,a,[void 0,s,i])}visitFloat(t){const{["type"]:n,["offset"]:r=0}=t,i=ne(t.nullBitmap),s=pe(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new De(n,r,o,a,[void 0,s,i])}visitUtf8(t){const{["type"]:n,["offset"]:r=0}=t,i=ne(t.data),s=ne(t.nullBitmap),o=$d(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:l=t.nullBitmap?-1:0}=t;return new De(n,r,a,l,[o,i,s])}visitBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=ne(t.data),s=ne(t.nullBitmap),o=$d(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:l=t.nullBitmap?-1:0}=t;return new De(n,r,a,l,[o,i,s])}visitFixedSizeBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=ne(t.nullBitmap),s=pe(n.ArrayType,t.data),{["length"]:o=s.length/oo(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new De(n,r,o,a,[void 0,s,i])}visitDate(t){const{["type"]:n,["offset"]:r=0}=t,i=ne(t.nullBitmap),s=pe(n.ArrayType,t.data),{["length"]:o=s.length/oo(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new De(n,r,o,a,[void 0,s,i])}visitTimestamp(t){const{["type"]:n,["offset"]:r=0}=t,i=ne(t.nullBitmap),s=pe(n.ArrayType,t.data),{["length"]:o=s.length/oo(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new De(n,r,o,a,[void 0,s,i])}visitTime(t){const{["type"]:n,["offset"]:r=0}=t,i=ne(t.nullBitmap),s=pe(n.ArrayType,t.data),{["length"]:o=s.length/oo(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new De(n,r,o,a,[void 0,s,i])}visitDecimal(t){const{["type"]:n,["offset"]:r=0}=t,i=ne(t.nullBitmap),s=pe(n.ArrayType,t.data),{["length"]:o=s.length/oo(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new De(n,r,o,a,[void 0,s,i])}visitList(t){const{["type"]:n,["offset"]:r=0,["child"]:i}=t,s=ne(t.nullBitmap),o=$d(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:l=t.nullBitmap?-1:0}=t;return new De(n,r,a,l,[o,void 0,s],[i])}visitStruct(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=ne(t.nullBitmap),{length:o=i.reduce((l,{length:c})=>Math.max(l,c),0),nullCount:a=t.nullBitmap?-1:0}=t;return new De(n,r,o,a,[void 0,void 0,s],i)}visitUnion(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=ne(t.nullBitmap),o=pe(n.ArrayType,t.typeIds),{["length"]:a=o.length,["nullCount"]:l=t.nullBitmap?-1:0}=t;if(Bt.isSparseUnion(n))return new De(n,r,a,l,[void 0,void 0,s,o],i);const c=$d(t.valueOffsets);return new De(n,r,a,l,[c,void 0,s,o],i)}visitDictionary(t){const{["type"]:n,["offset"]:r=0}=t,i=ne(t.nullBitmap),s=pe(n.indices.ArrayType,t.data),{["dictionary"]:o=new Qe([new em().visit({type:n.dictionary})])}=t,{["length"]:a=s.length,["nullCount"]:l=t.nullBitmap?-1:0}=t;return new De(n,r,a,l,[void 0,s,i],[],o)}visitInterval(t){const{["type"]:n,["offset"]:r=0}=t,i=ne(t.nullBitmap),s=pe(n.ArrayType,t.data),{["length"]:o=s.length/oo(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new De(n,r,o,a,[void 0,s,i])}visitFixedSizeList(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new em().visit({type:n.valueType})}=t,s=ne(t.nullBitmap),{["length"]:o=i.length/oo(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new De(n,r,o,a,[void 0,void 0,s],[i])}visitMap(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new em().visit({type:n.childType})}=t,s=ne(t.nullBitmap),o=$d(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:l=t.nullBitmap?-1:0}=t;return new De(n,r,a,l,[o,void 0,s],[i])}};function zt(e){return new vq().visit(e)}let aM=class{constructor(t=0,n){this.numChunks=t,this.getChunkIterator=n,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const t=this.chunkIterator.next();if(!t.done)return t;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}};function R8(e){return e.reduce((t,n)=>t+n.nullCount,0)}function L8(e){return e.reduce((t,n,r)=>(t[r+1]=t[r]+n.length,t),new Uint32Array(e.length+1))}function C8(e,t,n,r){const i=[];for(let s=-1,o=e.length;++s<o;){const a=e[s],l=t[s],{length:c}=a;if(l>=r)break;if(n>=l+c)continue;if(l>=n&&l+c<=r){i.push(a);continue}const u=Math.max(0,n-l),f=Math.min(r-l,c);i.push(a.slice(u,f-u))}return i.length===0&&i.push(e[0].slice(0,0)),i}function VI(e,t,n,r){let i=0,s=0,o=t.length-1;do{if(i>=o-1)return n<t[o]?r(e,i,n-t[i]):null;s=i+Math.trunc((o-i)*.5),n<t[s]?o=s:i=s}while(i<o)}function YI(e,t){return e.getValid(t)}function Wu(e){function t(n,r,i){return e(n[r],i)}return function(n){const r=this.data;return VI(r,this._offsets,n,t)}}function U8(e){let t;function n(r,i,s){return e(r[i],s,t)}return function(r,i){const s=this.data;t=i;const o=VI(s,this._offsets,r,n);return t=void 0,o}}function P8(e){let t;function n(r,i,s){let o=s,a=0,l=0;for(let c=i-1,u=r.length;++c<u;){const f=r[c];if(~(a=e(f,t,o)))return l+a;o=0,l+=f.length}return-1}return function(r,i){t=r;const s=this.data,o=typeof i!="number"?n(s,0,0):VI(s,this._offsets,i,n);return t=void 0,o}}let It=class extends Wt{};function wq(e,t){return t===null&&e.length>0?0:-1}function _q(e,t){const{nullBitmap:n}=e;if(!n||e.nullCount<=0)return-1;let r=0;for(const i of new jI(n,e.offset+(t||0),e.length,n,B8)){if(!i)return r;++r}return-1}function Ot(e,t,n){if(t===void 0)return-1;if(t===null)return _q(e,n);const r=mr.getVisitFn(e),i=Zf(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}function z8(e,t,n){const r=mr.getVisitFn(e),i=Zf(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}It.prototype.visitNull=wq;It.prototype.visitBool=Ot;It.prototype.visitInt=Ot;It.prototype.visitInt8=Ot;It.prototype.visitInt16=Ot;It.prototype.visitInt32=Ot;It.prototype.visitInt64=Ot;It.prototype.visitUint8=Ot;It.prototype.visitUint16=Ot;It.prototype.visitUint32=Ot;It.prototype.visitUint64=Ot;It.prototype.visitFloat=Ot;It.prototype.visitFloat16=Ot;It.prototype.visitFloat32=Ot;It.prototype.visitFloat64=Ot;It.prototype.visitUtf8=Ot;It.prototype.visitBinary=Ot;It.prototype.visitFixedSizeBinary=Ot;It.prototype.visitDate=Ot;It.prototype.visitDateDay=Ot;It.prototype.visitDateMillisecond=Ot;It.prototype.visitTimestamp=Ot;It.prototype.visitTimestampSecond=Ot;It.prototype.visitTimestampMillisecond=Ot;It.prototype.visitTimestampMicrosecond=Ot;It.prototype.visitTimestampNanosecond=Ot;It.prototype.visitTime=Ot;It.prototype.visitTimeSecond=Ot;It.prototype.visitTimeMillisecond=Ot;It.prototype.visitTimeMicrosecond=Ot;It.prototype.visitTimeNanosecond=Ot;It.prototype.visitDecimal=Ot;It.prototype.visitList=Ot;It.prototype.visitStruct=Ot;It.prototype.visitUnion=Ot;It.prototype.visitDenseUnion=z8;It.prototype.visitSparseUnion=z8;It.prototype.visitDictionary=Ot;It.prototype.visitInterval=Ot;It.prototype.visitIntervalDayTime=Ot;It.prototype.visitIntervalYearMonth=Ot;It.prototype.visitFixedSizeList=Ot;It.prototype.visitMap=Ot;const dg=new It;let Et=class extends Wt{};function Nt(e){const{type:t}=e;if(e.nullCount===0&&e.stride===1&&(t.typeId===U.Timestamp||t instanceof Fa&&t.bitWidth!==64||t instanceof ip&&t.bitWidth!==64||t instanceof rp&&t.precision!==dr.HALF))return new aM(e.data.length,r=>{const i=e.data[r];return i.values.subarray(0,i.length)[Symbol.iterator]()});let n=0;return new aM(e.data.length,r=>{const s=e.data[r].length,o=e.slice(n,n+s);return n+=s,new Sq(o)})}let Sq=class{constructor(t){this.vector=t,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}};Et.prototype.visitNull=Nt;Et.prototype.visitBool=Nt;Et.prototype.visitInt=Nt;Et.prototype.visitInt8=Nt;Et.prototype.visitInt16=Nt;Et.prototype.visitInt32=Nt;Et.prototype.visitInt64=Nt;Et.prototype.visitUint8=Nt;Et.prototype.visitUint16=Nt;Et.prototype.visitUint32=Nt;Et.prototype.visitUint64=Nt;Et.prototype.visitFloat=Nt;Et.prototype.visitFloat16=Nt;Et.prototype.visitFloat32=Nt;Et.prototype.visitFloat64=Nt;Et.prototype.visitUtf8=Nt;Et.prototype.visitBinary=Nt;Et.prototype.visitFixedSizeBinary=Nt;Et.prototype.visitDate=Nt;Et.prototype.visitDateDay=Nt;Et.prototype.visitDateMillisecond=Nt;Et.prototype.visitTimestamp=Nt;Et.prototype.visitTimestampSecond=Nt;Et.prototype.visitTimestampMillisecond=Nt;Et.prototype.visitTimestampMicrosecond=Nt;Et.prototype.visitTimestampNanosecond=Nt;Et.prototype.visitTime=Nt;Et.prototype.visitTimeSecond=Nt;Et.prototype.visitTimeMillisecond=Nt;Et.prototype.visitTimeMicrosecond=Nt;Et.prototype.visitTimeNanosecond=Nt;Et.prototype.visitDecimal=Nt;Et.prototype.visitList=Nt;Et.prototype.visitStruct=Nt;Et.prototype.visitUnion=Nt;Et.prototype.visitDenseUnion=Nt;Et.prototype.visitSparseUnion=Nt;Et.prototype.visitDictionary=Nt;Et.prototype.visitInterval=Nt;Et.prototype.visitIntervalDayTime=Nt;Et.prototype.visitIntervalYearMonth=Nt;Et.prototype.visitFixedSizeList=Nt;Et.prototype.visitMap=Nt;const qI=new Et,xq=(e,t)=>e+t;let rl=class extends Wt{visitNull(t,n){return 0}visitInt(t,n){return t.type.bitWidth/8}visitFloat(t,n){return t.type.ArrayType.BYTES_PER_ELEMENT}visitBool(t,n){return 1/8}visitDecimal(t,n){return t.type.bitWidth/8}visitDate(t,n){return(t.type.unit+1)*4}visitTime(t,n){return t.type.bitWidth/8}visitTimestamp(t,n){return t.type.unit===Jt.SECOND?4:8}visitInterval(t,n){return(t.type.unit+1)*4}visitStruct(t,n){return t.children.reduce((r,i)=>r+Rs.visit(i,n),0)}visitFixedSizeBinary(t,n){return t.type.byteWidth}visitMap(t,n){return 8+t.children.reduce((r,i)=>r+Rs.visit(i,n),0)}visitDictionary(t,n){var r;return t.type.indices.bitWidth/8+(((r=t.dictionary)===null||r===void 0?void 0:r.getByteLength(t.values[n]))||0)}};const Iq=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),Eq=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),Tq=({valueOffsets:e,stride:t,children:n},r)=>{const i=n[0],{[r*t]:s}=e,{[r*t+1]:o}=e,a=Rs.getVisitFn(i.type),l=i.slice(s,o-s);let c=8;for(let u=-1,f=o-s;++u<f;)c+=a(l,u);return c},Aq=({stride:e,children:t},n)=>{const r=t[0],i=r.slice(n*e,e),s=Rs.getVisitFn(r.type);let o=0;for(let a=-1,l=i.length;++a<l;)o+=s(i,a);return o},Mq=(e,t)=>e.type.mode===zi.Dense?j8(e,t):V8(e,t),j8=({type:e,children:t,typeIds:n,valueOffsets:r},i)=>{const s=e.typeIdToChildIndex[n[i]];return 8+Rs.visit(t[s],r[i])},V8=({children:e},t)=>4+Rs.visitMany(e,e.map(()=>t)).reduce(xq,0);rl.prototype.visitUtf8=Iq;rl.prototype.visitBinary=Eq;rl.prototype.visitList=Tq;rl.prototype.visitFixedSizeList=Aq;rl.prototype.visitUnion=Mq;rl.prototype.visitDenseUnion=j8;rl.prototype.visitSparseUnion=V8;const Rs=new rl;var Y8;const q8={},W8={};let Qe=class _l{constructor(t){var n,r,i;const s=t[0]instanceof _l?t.flatMap(a=>a.data):t;if(s.length===0||s.some(a=>!(a instanceof De)))throw new TypeError("Vector constructor expects an Array of Data instances.");const o=(n=s[0])===null||n===void 0?void 0:n.type;switch(s.length){case 0:this._offsets=[0];break;case 1:{const{get:a,set:l,indexOf:c,byteLength:u}=q8[o.typeId],f=s[0];this.isValid=d=>YI(f,d),this.get=d=>a(f,d),this.set=(d,h)=>l(f,d,h),this.indexOf=d=>c(f,d),this.getByteLength=d=>u(f,d),this._offsets=[0,f.length];break}default:Object.setPrototypeOf(this,W8[o.typeId]),this._offsets=L8(s);break}this.data=s,this.type=o,this.stride=oo(o),this.numChildren=(i=(r=o.children)===null||r===void 0?void 0:r.length)!==null&&i!==void 0?i:0,this.length=this._offsets[this._offsets.length-1]}get byteLength(){return this._byteLength===-1&&(this._byteLength=this.data.reduce((t,n)=>t+n.byteLength,0)),this._byteLength}get nullCount(){return this._nullCount===-1&&(this._nullCount=R8(this.data)),this._nullCount}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${U[this.type.typeId]}Vector`}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}includes(t,n){return this.indexOf(t,n)>0}getByteLength(t){return 0}[Symbol.iterator](){return qI.visit(this)}concat(...t){return new _l(this.data.concat(t.flatMap(n=>n.data).flat(Number.POSITIVE_INFINITY)))}slice(t,n){return new _l(F8(this,t,n,({data:r,_offsets:i},s,o)=>C8(r,i,s,o)))}toJSON(){return[...this]}toArray(){const{type:t,data:n,length:r,stride:i,ArrayType:s}=this;switch(t.typeId){case U.Int:case U.Float:case U.Decimal:case U.Time:case U.Timestamp:switch(n.length){case 0:return new s;case 1:return n[0].values.subarray(0,r*i);default:return n.reduce((o,{values:a,length:l})=>(o.array.set(a.subarray(0,l*i),o.offset),o.offset+=l*i,o),{array:new s(r*i),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(t){var n;return this.getChildAt((n=this.type.children)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.numChildren?new _l(this.data.map(({children:n})=>n[t])):null}get isMemoized(){return Bt.isDictionary(this.type)?this.data[0].dictionary.isMemoized:!1}memoize(){if(Bt.isDictionary(this.type)){const t=new lM(this.data[0].dictionary),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new _l(n)}return new lM(this)}unmemoize(){if(Bt.isDictionary(this.type)&&this.isMemoized){const t=this.data[0].dictionary.unmemoize(),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new _l(n)}return this}};Y8=Symbol.toStringTag;Qe[Y8]=(e=>{e.type=Bt.prototype,e.data=[],e.length=0,e.stride=1,e.numChildren=0,e._nullCount=-1,e._byteLength=-1,e._offsets=new Uint32Array([0]),e[Symbol.isConcatSpreadable]=!0;const t=Object.keys(U).map(n=>U[n]).filter(n=>typeof n=="number"&&n!==U.NONE);for(const n of t){const r=mr.getVisitFnByTypeId(n),i=mi.getVisitFnByTypeId(n),s=dg.getVisitFnByTypeId(n),o=Rs.getVisitFnByTypeId(n);q8[n]={get:r,set:i,indexOf:s,byteLength:o},W8[n]=Object.create(e,{isValid:{value:Wu(YI)},get:{value:Wu(mr.getVisitFnByTypeId(n))},set:{value:U8(mi.getVisitFnByTypeId(n))},indexOf:{value:P8(dg.getVisitFnByTypeId(n))},getByteLength:{value:Wu(Rs.getVisitFnByTypeId(n))}})}return"Vector"})(Qe.prototype);let lM=class H8 extends Qe{constructor(t){super(t.data);const n=this.get,r=this.set,i=this.slice,s=new Array(this.length);Object.defineProperty(this,"get",{value(o){const a=s[o];if(a!==void 0)return a;const l=n.call(this,o);return s[o]=l,l}}),Object.defineProperty(this,"set",{value(o,a){r.call(this,o,a),s[o]=a}}),Object.defineProperty(this,"slice",{value:(o,a)=>new H8(i.call(this,o,a))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new Qe(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}},V2=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(t,n,r,i){return t.prep(8,24),t.writeInt64(i),t.pad(4),t.writeInt32(r),t.writeInt64(n),t.offset()}};const Mw=2,ys=4,po=4,me=4,sa=new Int32Array(2),cM=new Float32Array(sa.buffer),uM=new Float64Array(sa.buffer),o0=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;let Eo=class Y2{constructor(t,n){this.low=t|0,this.high=n|0}static create(t,n){return t==0&&n==0?Y2.ZERO:new Y2(t,n)}toFloat64(){return(this.low>>>0)+this.high*4294967296}equals(t){return this.low==t.low&&this.high==t.high}};Eo.ZERO=new Eo(0,0);var q2;(function(e){e[e.UTF8_BYTES=1]="UTF8_BYTES",e[e.UTF16_STRING=2]="UTF16_STRING"})(q2||(q2={}));let gf=class G8{constructor(t){this.bytes_=t,this.position_=0}static allocate(t){return new G8(new Uint8Array(t))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(t){this.position_=t}capacity(){return this.bytes_.length}readInt8(t){return this.readUint8(t)<<24>>24}readUint8(t){return this.bytes_[t]}readInt16(t){return this.readUint16(t)<<16>>16}readUint16(t){return this.bytes_[t]|this.bytes_[t+1]<<8}readInt32(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}readUint32(t){return this.readInt32(t)>>>0}readInt64(t){return new Eo(this.readInt32(t),this.readInt32(t+4))}readUint64(t){return new Eo(this.readUint32(t),this.readUint32(t+4))}readFloat32(t){return sa[0]=this.readInt32(t),cM[0]}readFloat64(t){return sa[o0?0:1]=this.readInt32(t),sa[o0?1:0]=this.readInt32(t+4),uM[0]}writeInt8(t,n){this.bytes_[t]=n}writeUint8(t,n){this.bytes_[t]=n}writeInt16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeUint16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeInt32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeUint32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeInt64(t,n){this.writeInt32(t,n.low),this.writeInt32(t+4,n.high)}writeUint64(t,n){this.writeUint32(t,n.low),this.writeUint32(t+4,n.high)}writeFloat32(t,n){cM[0]=n,this.writeInt32(t,sa[0])}writeFloat64(t,n){uM[0]=n,this.writeInt32(t,sa[o0?0:1]),this.writeInt32(t+4,sa[o0?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+ys+po)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let t="";for(let n=0;n<po;n++)t+=String.fromCharCode(this.readInt8(this.position_+ys+n));return t}__offset(t,n){const r=t-this.readInt32(t);return n<this.readInt16(r)?this.readInt16(r+n):0}__union(t,n){return t.bb_pos=n+this.readInt32(n),t.bb=this,t}__string(t,n){t+=this.readInt32(t);const r=this.readInt32(t);let i="",s=0;if(t+=ys,n===q2.UTF8_BYTES)return this.bytes_.subarray(t,t+r);for(;s<r;){let o;const a=this.readUint8(t+s++);if(a<192)o=a;else{const l=this.readUint8(t+s++);if(a<224)o=(a&31)<<6|l&63;else{const c=this.readUint8(t+s++);if(a<240)o=(a&15)<<12|(l&63)<<6|c&63;else{const u=this.readUint8(t+s++);o=(a&7)<<18|(l&63)<<12|(c&63)<<6|u&63}}}o<65536?i+=String.fromCharCode(o):(o-=65536,i+=String.fromCharCode((o>>10)+55296,(o&1023)+56320))}return i}__union_with_string(t,n){return typeof t=="string"?this.__string(n):this.__union(t,n)}__indirect(t){return t+this.readInt32(t)}__vector(t){return t+this.readInt32(t)+ys}__vector_len(t){return this.readInt32(t+this.readInt32(t))}__has_identifier(t){if(t.length!=po)throw new Error("FlatBuffers: file identifier must be length "+po);for(let n=0;n<po;n++)if(t.charCodeAt(n)!=this.readInt8(this.position()+ys+n))return!1;return!0}createLong(t,n){return Eo.create(t,n)}createScalarList(t,n){const r=[];for(let i=0;i<n;++i)t(i)!==null&&r.push(t(i));return r}createObjList(t,n){const r=[];for(let i=0;i<n;++i){const s=t(i);s!==null&&r.push(s.unpack())}return r}},X8=class Q8{constructor(t){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null;let n;t?n=t:n=1024,this.bb=gf.allocate(n),this.space=n}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(t){this.force_defaults=t}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(t,n){t>this.minalign&&(this.minalign=t);const r=~(this.bb.capacity()-this.space+n)+1&t-1;for(;this.space<r+t+n;){const i=this.bb.capacity();this.bb=Q8.growByteBuffer(this.bb),this.space+=this.bb.capacity()-i}this.pad(r)}pad(t){for(let n=0;n<t;n++)this.bb.writeInt8(--this.space,0)}writeInt8(t){this.bb.writeInt8(this.space-=1,t)}writeInt16(t){this.bb.writeInt16(this.space-=2,t)}writeInt32(t){this.bb.writeInt32(this.space-=4,t)}writeInt64(t){this.bb.writeInt64(this.space-=8,t)}writeFloat32(t){this.bb.writeFloat32(this.space-=4,t)}writeFloat64(t){this.bb.writeFloat64(this.space-=8,t)}addInt8(t){this.prep(1,0),this.writeInt8(t)}addInt16(t){this.prep(2,0),this.writeInt16(t)}addInt32(t){this.prep(4,0),this.writeInt32(t)}addInt64(t){this.prep(8,0),this.writeInt64(t)}addFloat32(t){this.prep(4,0),this.writeFloat32(t)}addFloat64(t){this.prep(8,0),this.writeFloat64(t)}addFieldInt8(t,n,r){(this.force_defaults||n!=r)&&(this.addInt8(n),this.slot(t))}addFieldInt16(t,n,r){(this.force_defaults||n!=r)&&(this.addInt16(n),this.slot(t))}addFieldInt32(t,n,r){(this.force_defaults||n!=r)&&(this.addInt32(n),this.slot(t))}addFieldInt64(t,n,r){(this.force_defaults||!n.equals(r))&&(this.addInt64(n),this.slot(t))}addFieldFloat32(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat32(n),this.slot(t))}addFieldFloat64(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat64(n),this.slot(t))}addFieldOffset(t,n,r){(this.force_defaults||n!=r)&&(this.addOffset(n),this.slot(t))}addFieldStruct(t,n,r){n!=r&&(this.nested(n),this.slot(t))}nested(t){if(t!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")}slot(t){this.vtable!==null&&(this.vtable[t]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(t){const n=t.capacity();if(n&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const r=n<<1,i=gf.allocate(r);return i.setPosition(r-n),i.bytes().set(t.bytes(),r-n),i}addOffset(t){this.prep(ys,0),this.writeInt32(this.offset()-t+ys)}startObject(t){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=t;for(let n=0;n<t;n++)this.vtable[n]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const t=this.offset();let n=this.vtable_in_use-1;for(;n>=0&&this.vtable[n]==0;n--);const r=n+1;for(;n>=0;n--)this.addInt16(this.vtable[n]!=0?t-this.vtable[n]:0);const i=2;this.addInt16(t-this.object_start);const s=(r+i)*Mw;this.addInt16(s);let o=0;const a=this.space;t:for(n=0;n<this.vtables.length;n++){const l=this.bb.capacity()-this.vtables[n];if(s==this.bb.readInt16(l)){for(let c=Mw;c<s;c+=Mw)if(this.bb.readInt16(a+c)!=this.bb.readInt16(l+c))continue t;o=this.vtables[n];break}}return o?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,o-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t}finish(t,n,r){const i=r?me:0;if(n){const s=n;if(this.prep(this.minalign,ys+po+i),s.length!=po)throw new Error("FlatBuffers: file identifier must be length "+po);for(let o=po-1;o>=0;o--)this.writeInt8(s.charCodeAt(o))}this.prep(this.minalign,ys+i),this.addOffset(t),i&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(t,n){this.finish(t,n,!0)}requiredField(t,n){const r=this.bb.capacity()-t,i=r-this.bb.readInt32(r);if(!(this.bb.readInt16(i+n)!=0))throw new Error("FlatBuffers: field "+n+" must be set")}startVector(t,n,r){this.notNested(),this.vector_num_elems=n,this.prep(ys,t*n),this.prep(r,t*n)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(t){if(!t)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(t))return this.string_maps.get(t);const n=this.createString(t);return this.string_maps.set(t,n),n}createString(t){if(!t)return 0;let n;if(t instanceof Uint8Array)n=t;else{n=[];let r=0;for(;r<t.length;){let i;const s=t.charCodeAt(r++);if(s<55296||s>=56320)i=s;else{const o=t.charCodeAt(r++);i=(s<<10)+o+-56613888}i<128?n.push(i):(i<2048?n.push(i>>6&31|192):(i<65536?n.push(i>>12&15|224):n.push(i>>18&7|240,i>>12&63|128),n.push(i>>6&63|128)),n.push(i&63|128))}}this.addInt8(0),this.startVector(1,n.length,1),this.bb.setPosition(this.space-=n.length);for(let r=0,i=this.space,s=this.bb.bytes();r<n.length;r++)s[i++]=n[r];return this.endVector()}createLong(t,n){return Eo.create(t,n)}createObjectOffset(t){return t===null?0:typeof t=="string"?this.createString(t):t.pack(this)}createObjectOffsetList(t){const n=[];for(let r=0;r<t.length;++r){const i=t[r];if(i!==null)n.push(this.createObjectOffset(i));else throw new Error("FlatBuffers: Argument for createObjectOffsetList cannot contain null.")}return n}createStructOffsetList(t,n){return n(this,t.length),this.createObjectOffsetList(t),this.endVector()}},si=class Sl{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsKeyValue(t,n){return(n||new Sl).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsKeyValue(t,n){return t.setPosition(t.position()+me),(n||new Sl).__init(t.readInt32(t.position())+t.position(),t)}key(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}value(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startKeyValue(t){t.startObject(2)}static addKey(t,n){t.addFieldOffset(0,n,0)}static addValue(t,n){t.addFieldOffset(1,n,0)}static endKeyValue(t){return t.endObject()}static createKeyValue(t,n,r){return Sl.startKeyValue(t),Sl.addKey(t,n),Sl.addValue(t,r),Sl.endKeyValue(t)}};var bf;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(bf||(bf={}));var vf;(function(e){e[e.Little=0]="Little",e[e.Big=1]="Big"})(vf||(vf={}));var hg;(function(e){e[e.DenseArray=0]="DenseArray"})(hg||(hg={}));let Tu=class xl{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInt(t,n){return(n||new xl).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInt(t,n){return t.setPosition(t.position()+me),(n||new xl).__init(t.readInt32(t.position())+t.position(),t)}bitWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}isSigned(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startInt(t){t.startObject(2)}static addBitWidth(t,n){t.addFieldInt32(0,n,0)}static addIsSigned(t,n){t.addFieldInt8(1,+n,0)}static endInt(t){return t.endObject()}static createInt(t,n,r){return xl.startInt(t),xl.addBitWidth(t,n),xl.addIsSigned(t,r),xl.endInt(t)}},Zc=class W2{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryEncoding(t,n){return(n||new W2).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryEncoding(t,n){return t.setPosition(t.position()+me),(n||new W2).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}indexType(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new Tu).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isOrdered(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}dictionaryKind(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt16(this.bb_pos+t):hg.DenseArray}static startDictionaryEncoding(t){t.startObject(4)}static addId(t,n){t.addFieldInt64(0,n,t.createLong(0,0))}static addIndexType(t,n){t.addFieldOffset(1,n,0)}static addIsOrdered(t,n){t.addFieldInt8(2,+n,0)}static addDictionaryKind(t,n){t.addFieldInt16(3,n,hg.DenseArray)}static endDictionaryEncoding(t){return t.endObject()}},fM=class Xd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBinary(t,n){return(n||new Xd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBinary(t,n){return t.setPosition(t.position()+me),(n||new Xd).__init(t.readInt32(t.position())+t.position(),t)}static startBinary(t){t.startObject(0)}static endBinary(t){return t.endObject()}static createBinary(t){return Xd.startBinary(t),Xd.endBinary(t)}},dM=class Qd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBool(t,n){return(n||new Qd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBool(t,n){return t.setPosition(t.position()+me),(n||new Qd).__init(t.readInt32(t.position())+t.position(),t)}static startBool(t){t.startObject(0)}static endBool(t){return t.endObject()}static createBool(t){return Qd.startBool(t),Qd.endBool(t)}};var pg;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(pg||(pg={}));let nm=class Jc{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDate(t,n){return(n||new Jc).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDate(t,n){return t.setPosition(t.position()+me),(n||new Jc).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):pg.MILLISECOND}static startDate(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,pg.MILLISECOND)}static endDate(t){return t.endObject()}static createDate(t,n){return Jc.startDate(t),Jc.addUnit(t,n),Jc.endDate(t)}},tu=class ea{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDecimal(t,n){return(n||new ea).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDecimal(t,n){return t.setPosition(t.position()+me),(n||new ea).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}scale(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}bitWidth(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt32(this.bb_pos+t):128}static startDecimal(t){t.startObject(3)}static addPrecision(t,n){t.addFieldInt32(0,n,0)}static addScale(t,n){t.addFieldInt32(1,n,0)}static addBitWidth(t,n){t.addFieldInt32(2,n,128)}static endDecimal(t){return t.endObject()}static createDecimal(t,n,r,i){return ea.startDecimal(t),ea.addPrecision(t,n),ea.addScale(t,r),ea.addBitWidth(t,i),ea.endDecimal(t)}};var wf;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(wf||(wf={}));let rm=class eu{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeBinary(t,n){return(n||new eu).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeBinary(t,n){return t.setPosition(t.position()+me),(n||new eu).__init(t.readInt32(t.position())+t.position(),t)}byteWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeBinary(t){t.startObject(1)}static addByteWidth(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeBinary(t){return t.endObject()}static createFixedSizeBinary(t,n){return eu.startFixedSizeBinary(t),eu.addByteWidth(t,n),eu.endFixedSizeBinary(t)}},im=class nu{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeList(t,n){return(n||new nu).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeList(t,n){return t.setPosition(t.position()+me),(n||new nu).__init(t.readInt32(t.position())+t.position(),t)}listSize(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeList(t){t.startObject(1)}static addListSize(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeList(t){return t.endObject()}static createFixedSizeList(t,n){return nu.startFixedSizeList(t),nu.addListSize(t,n),nu.endFixedSizeList(t)}};var yg;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(yg||(yg={}));let sm=class ru{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFloatingPoint(t,n){return(n||new ru).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFloatingPoint(t,n){return t.setPosition(t.position()+me),(n||new ru).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):yg.HALF}static startFloatingPoint(t){t.startObject(1)}static addPrecision(t,n){t.addFieldInt16(0,n,yg.HALF)}static endFloatingPoint(t){return t.endObject()}static createFloatingPoint(t,n){return ru.startFloatingPoint(t),ru.addPrecision(t,n),ru.endFloatingPoint(t)}};var mg;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(mg||(mg={}));let om=class iu{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInterval(t,n){return(n||new iu).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInterval(t,n){return t.setPosition(t.position()+me),(n||new iu).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):mg.YEAR_MONTH}static startInterval(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,mg.YEAR_MONTH)}static endInterval(t){return t.endObject()}static createInterval(t,n){return iu.startInterval(t),iu.addUnit(t,n),iu.endInterval(t)}},hM=class Kd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsList(t,n){return(n||new Kd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsList(t,n){return t.setPosition(t.position()+me),(n||new Kd).__init(t.readInt32(t.position())+t.position(),t)}static startList(t){t.startObject(0)}static endList(t){return t.endObject()}static createList(t){return Kd.startList(t),Kd.endList(t)}},am=class su{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMap(t,n){return(n||new su).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMap(t,n){return t.setPosition(t.position()+me),(n||new su).__init(t.readInt32(t.position())+t.position(),t)}keysSorted(){const t=this.bb.__offset(this.bb_pos,4);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startMap(t){t.startObject(1)}static addKeysSorted(t,n){t.addFieldInt8(0,+n,0)}static endMap(t){return t.endObject()}static createMap(t,n){return su.startMap(t),su.addKeysSorted(t,n),su.endMap(t)}},pM=class Zd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsNull(t,n){return(n||new Zd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsNull(t,n){return t.setPosition(t.position()+me),(n||new Zd).__init(t.readInt32(t.position())+t.position(),t)}static startNull(t){t.startObject(0)}static endNull(t){return t.endObject()}static createNull(t){return Zd.startNull(t),Zd.endNull(t)}},yM=class Jd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsStruct_(t,n){return(n||new Jd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsStruct_(t,n){return t.setPosition(t.position()+me),(n||new Jd).__init(t.readInt32(t.position())+t.position(),t)}static startStruct_(t){t.startObject(0)}static endStruct_(t){return t.endObject()}static createStruct_(t){return Jd.startStruct_(t),Jd.endStruct_(t)}},th=class Il{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTime(t,n){return(n||new Il).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTime(t,n){return t.setPosition(t.position()+me),(n||new Il).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):wf.MILLISECOND}bitWidth(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):32}static startTime(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,wf.MILLISECOND)}static addBitWidth(t,n){t.addFieldInt32(1,n,32)}static endTime(t){return t.endObject()}static createTime(t,n,r){return Il.startTime(t),Il.addUnit(t,n),Il.addBitWidth(t,r),Il.endTime(t)}},eh=class El{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTimestamp(t,n){return(n||new El).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTimestamp(t,n){return t.setPosition(t.position()+me),(n||new El).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):wf.SECOND}timezone(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startTimestamp(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,wf.SECOND)}static addTimezone(t,n){t.addFieldOffset(1,n,0)}static endTimestamp(t){return t.endObject()}static createTimestamp(t,n,r){return El.startTimestamp(t),El.addUnit(t,n),El.addTimezone(t,r),El.endTimestamp(t)}};var gg;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(gg||(gg={}));let Tl=class Al{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUnion(t,n){return(n||new Al).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUnion(t,n){return t.setPosition(t.position()+me),(n||new Al).__init(t.readInt32(t.position())+t.position(),t)}mode(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):gg.Sparse}typeIds(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readInt32(this.bb.__vector(this.bb_pos+n)+t*4):0}typeIdsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}typeIdsArray(){const t=this.bb.__offset(this.bb_pos,6);return t?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startUnion(t){t.startObject(2)}static addMode(t,n){t.addFieldInt16(0,n,gg.Sparse)}static addTypeIds(t,n){t.addFieldOffset(1,n,0)}static createTypeIdsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addInt32(n[r]);return t.endVector()}static startTypeIdsVector(t,n){t.startVector(4,n,4)}static endUnion(t){return t.endObject()}static createUnion(t,n,r){return Al.startUnion(t),Al.addMode(t,n),Al.addTypeIds(t,r),Al.endUnion(t)}},mM=class nh{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUtf8(t,n){return(n||new nh).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUtf8(t,n){return t.setPosition(t.position()+me),(n||new nh).__init(t.readInt32(t.position())+t.position(),t)}static startUtf8(t){t.startObject(0)}static endUtf8(t){return t.endObject()}static createUtf8(t){return nh.startUtf8(t),nh.endUtf8(t)}};var ke;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.FloatingPoint=3]="FloatingPoint",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct_=13]="Struct_",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.LargeBinary=19]="LargeBinary",e[e.LargeUtf8=20]="LargeUtf8",e[e.LargeList=21]="LargeList"})(ke||(ke={}));let Gr=class lm{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsField(t,n){return(n||new lm).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsField(t,n){return t.setPosition(t.position()+me),(n||new lm).__init(t.readInt32(t.position())+t.position(),t)}name(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}nullable(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}typeType(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):ke.NONE}type(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.__union(t,this.bb_pos+n):null}dictionary(t){const n=this.bb.__offset(this.bb_pos,12);return n?(t||new Zc).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}children(t,n){const r=this.bb.__offset(this.bb_pos,14);return r?(n||new lm).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}childrenLength(){const t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,16);return r?(n||new si).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}static startField(t){t.startObject(7)}static addName(t,n){t.addFieldOffset(0,n,0)}static addNullable(t,n){t.addFieldInt8(1,+n,0)}static addTypeType(t,n){t.addFieldInt8(2,n,ke.NONE)}static addType(t,n){t.addFieldOffset(3,n,0)}static addDictionary(t,n){t.addFieldOffset(4,n,0)}static addChildren(t,n){t.addFieldOffset(5,n,0)}static createChildrenVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startChildrenVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(6,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endField(t){return t.endObject()}},ls=class Zs{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsSchema(t,n){return(n||new Zs).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSchema(t,n){return t.setPosition(t.position()+me),(n||new Zs).__init(t.readInt32(t.position())+t.position(),t)}endianness(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):vf.Little}fields(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new Gr).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}fieldsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new si).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}features(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.readInt64(this.bb.__vector(this.bb_pos+n)+t*8):this.bb.createLong(0,0)}featuresLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}static startSchema(t){t.startObject(4)}static addEndianness(t,n){t.addFieldInt16(0,n,vf.Little)}static addFields(t,n){t.addFieldOffset(1,n,0)}static createFieldsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startFieldsVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(2,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static addFeatures(t,n){t.addFieldOffset(3,n,0)}static createFeaturesVector(t,n){t.startVector(8,n.length,8);for(let r=n.length-1;r>=0;r--)t.addInt64(n[r]);return t.endVector()}static startFeaturesVector(t,n){t.startVector(8,n,8)}static endSchema(t){return t.endObject()}static finishSchemaBuffer(t,n){t.finish(n)}static finishSizePrefixedSchemaBuffer(t,n){t.finish(n,void 0,!0)}static createSchema(t,n,r,i,s){return Zs.startSchema(t),Zs.addEndianness(t,n),Zs.addFields(t,r),Zs.addCustomMetadata(t,i),Zs.addFeatures(t,s),Zs.endSchema(t)}},ns=class H2{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFooter(t,n){return(n||new H2).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFooter(t,n){return t.setPosition(t.position()+me),(n||new H2).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):bf.V1}schema(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new ls).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}dictionaries(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new V2).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}dictionariesLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}recordBatches(t,n){const r=this.bb.__offset(this.bb_pos,10);return r?(n||new V2).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}recordBatchesLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new si).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startFooter(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,bf.V1)}static addSchema(t,n){t.addFieldOffset(1,n,0)}static addDictionaries(t,n){t.addFieldOffset(2,n,0)}static startDictionariesVector(t,n){t.startVector(24,n,8)}static addRecordBatches(t,n){t.addFieldOffset(3,n,0)}static startRecordBatchesVector(t,n){t.startVector(24,n,8)}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endFooter(t){return t.endObject()}static finishFooterBuffer(t,n){t.finish(n)}static finishSizePrefixedFooterBuffer(t,n){t.finish(n,void 0,!0)}},Be=class Ml{constructor(t=[],n,r){this.fields=t||[],this.metadata=n||new Map,r||(r=X2(t)),this.dictionaries=r}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(t=>t.name)}toString(){return`Schema<{ ${this.fields.map((t,n)=>`${n}: ${t}`).join(", ")} }>`}select(t){const n=new Set(t),r=this.fields.filter(i=>n.has(i.name));return new Ml(r,this.metadata)}selectAt(t){const n=t.map(r=>this.fields[r]).filter(Boolean);return new Ml(n,this.metadata)}assign(...t){const n=t[0]instanceof Ml?t[0]:Array.isArray(t[0])?new Ml(t[0]):new Ml(t),r=[...this.fields],i=a0(a0(new Map,this.metadata),n.metadata),s=n.fields.filter(a=>{const l=r.findIndex(c=>c.name===a.name);return~l?(r[l]=a.clone({metadata:a0(a0(new Map,r[l].metadata),a.metadata)}))&&!1:!0}),o=X2(s,new Map);return new Ml([...r,...s],i,new Map([...this.dictionaries,...o]))}};Be.prototype.fields=null;Be.prototype.metadata=null;Be.prototype.dictionaries=null;let He=class G2{constructor(t,n,r=!1,i){this.name=t,this.type=n,this.nullable=r,this.metadata=i||new Map}static new(...t){let[n,r,i,s]=t;return t[0]&&typeof t[0]=="object"&&({name:n}=t[0],r===void 0&&(r=t[0].type),i===void 0&&(i=t[0].nullable),s===void 0&&(s=t[0].metadata)),new G2(`${n}`,r,i,s)}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...t){let[n,r,i,s]=t;return!t[0]||typeof t[0]!="object"?[n=this.name,r=this.type,i=this.nullable,s=this.metadata]=t:{name:n=this.name,type:r=this.type,nullable:i=this.nullable,metadata:s=this.metadata}=t[0],G2.new(n,r,i,s)}};He.prototype.type=null;He.prototype.name=null;He.prototype.nullable=null;He.prototype.metadata=null;function a0(e,t){return new Map([...e||new Map,...t||new Map])}function X2(e,t=new Map){for(let n=-1,r=e.length;++n<r;){const s=e[n].type;if(Bt.isDictionary(s)){if(!t.has(s.id))t.set(s.id,s.dictionary);else if(t.get(s.id)!==s.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}s.children&&s.children.length>0&&X2(s.children,t)}return t}var gM=Eo,$q=X8,Nq=gf;let WI=class{constructor(t,n=ni.V4,r,i){this.schema=t,this.version=n,r&&(this._recordBatches=r),i&&(this._dictionaryBatches=i)}static decode(t){t=new Nq(ne(t));const n=ns.getRootAsFooter(t),r=Be.decode(n.schema());return new Dq(r,n)}static encode(t){const n=new $q,r=Be.encode(n,t.schema);ns.startRecordBatchesVector(n,t.numRecordBatches);for(const o of[...t.recordBatches()].slice().reverse())bg.encode(n,o);const i=n.endVector();ns.startDictionariesVector(n,t.numDictionaries);for(const o of[...t.dictionaryBatches()].slice().reverse())bg.encode(n,o);const s=n.endVector();return ns.startFooter(n),ns.addSchema(n,r),ns.addVersion(n,ni.V4),ns.addRecordBatches(n,i),ns.addDictionaries(n,s),ns.finishFooterBuffer(n,ns.endFooter(n)),n.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}*recordBatches(){for(let t,n=-1,r=this.numRecordBatches;++n<r;)(t=this.getRecordBatch(n))&&(yield t)}*dictionaryBatches(){for(let t,n=-1,r=this.numDictionaries;++n<r;)(t=this.getDictionaryBatch(n))&&(yield t)}getRecordBatch(t){return t>=0&&t<this.numRecordBatches&&this._recordBatches[t]||null}getDictionaryBatch(t){return t>=0&&t<this.numDictionaries&&this._dictionaryBatches[t]||null}},Dq=class extends WI{constructor(t,n){super(t,n.version()),this._footer=n}get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}getRecordBatch(t){if(t>=0&&t<this.numRecordBatches){const n=this._footer.recordBatches(t);if(n)return bg.decode(n)}return null}getDictionaryBatch(t){if(t>=0&&t<this.numDictionaries){const n=this._footer.dictionaries(t);if(n)return bg.decode(n)}return null}},bg=class K8{constructor(t,n,r){this.metaDataLength=t,this.offset=typeof r=="number"?r:r.low,this.bodyLength=typeof n=="number"?n:n.low}static decode(t){return new K8(t.metaDataLength(),t.bodyLength(),t.offset())}static encode(t,n){const{metaDataLength:r}=n,i=new gM(n.offset,0),s=new gM(n.bodyLength,0);return V2.createBlock(t,i,r,s)}};const Re=Object.freeze({done:!0,value:void 0});let bM=class{constructor(t){this._json=t}get schema(){return this._json.schema}get batches(){return this._json.batches||[]}get dictionaries(){return this._json.dictionaries||[]}},Z8=class{tee(){return this._getDOMStream().tee()}pipe(t,n){return this._getNodeStream().pipe(t,n)}pipeTo(t,n){return this._getDOMStream().pipeTo(t,n)}pipeThrough(t,n){return this._getDOMStream().pipeThrough(t,n)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}},kq=class extends Z8{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(t=>this._closedPromiseResolve=t)}get closed(){return this._closedPromise}cancel(t){return W(this,void 0,void 0,function*(){yield this.return(t)})}write(t){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(t):this.resolvers.shift().resolve({done:!1,value:t}))}abort(t){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:t}:this.resolvers.shift().reject({done:!0,value:t}))}close(){if(this._closedPromiseResolve){const{resolvers:t}=this;for(;t.length>0;)t.shift().resolve(Re);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(t){return Qr.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,t)}toNodeStream(t){return Qr.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,t)}throw(t){return W(this,void 0,void 0,function*(){return yield this.abort(t),Re})}return(t){return W(this,void 0,void 0,function*(){return yield this.close(),Re})}read(t){return W(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return W(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(...t){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((n,r)=>{this.resolvers.push({resolve:n,reject:r})}):Promise.resolve(Re)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}},Oq=class extends kq{write(t){if((t=ne(t)).byteLength>0)return super.write(t)}toString(t=!1){return t?B2(this.toUint8Array(!0)):this.toUint8Array(!1).then(B2)}toUint8Array(t=!1){return t?Bs(this._values)[0]:W(this,void 0,void 0,function*(){var n,r;const i=[];let s=0;try{for(var o=Fr(this),a;a=yield o.next(),!a.done;){const l=a.value;i.push(l),s+=l.byteLength}}catch(l){n={error:l}}finally{try{a&&!a.done&&(r=o.return)&&(yield r.call(o))}finally{if(n)throw n.error}}return Bs(i,s)[0]})}},vg=class{constructor(t){t&&(this.source=new Fq(Qr.fromIterable(t)))}[Symbol.iterator](){return this}next(t){return this.source.next(t)}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}peek(t){return this.source.peek(t)}read(t){return this.source.read(t)}},wg=class J8{constructor(t){t instanceof J8?this.source=t.source:t instanceof Oq?this.source=new ml(Qr.fromAsyncIterable(t)):Nk(t)?this.source=new ml(Qr.fromNodeStream(t)):BI(t)?this.source=new ml(Qr.fromDOMStream(t)):Mk(t)?this.source=new ml(Qr.fromDOMStream(t.body)):Rb(t)?this.source=new ml(Qr.fromIterable(t)):Jh(t)?this.source=new ml(Qr.fromAsyncIterable(t)):FI(t)&&(this.source=new ml(Qr.fromAsyncIterable(t)))}[Symbol.asyncIterator](){return this}next(t){return this.source.next(t)}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}get closed(){return this.source.closed}cancel(t){return this.source.cancel(t)}peek(t){return this.source.peek(t)}read(t){return this.source.read(t)}},Fq=class{constructor(t){this.source=t}cancel(t){this.return(t)}peek(t){return this.next(t,"peek").value}read(t){return this.next(t,"read").value}next(t,n="read"){return this.source.next({cmd:n,size:t})}throw(t){return Object.create(this.source.throw&&this.source.throw(t)||Re)}return(t){return Object.create(this.source.return&&this.source.return(t)||Re)}},ml=class{constructor(t){this.source=t,this._closedPromise=new Promise(n=>this._closedPromiseResolve=n)}cancel(t){return W(this,void 0,void 0,function*(){yield this.return(t)})}get closed(){return this._closedPromise}read(t){return W(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return W(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(t,n="read"){return W(this,void 0,void 0,function*(){return yield this.source.next({cmd:n,size:t})})}throw(t){return W(this,void 0,void 0,function*(){const n=this.source.throw&&(yield this.source.throw(t))||Re;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(n)})}return(t){return W(this,void 0,void 0,function*(){const n=this.source.return&&(yield this.source.return(t))||Re;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(n)})}},vM=class extends vg{constructor(t,n){super(),this.position=0,this.buffer=ne(t),this.size=typeof n>"u"?this.buffer.byteLength:n}readInt32(t){const{buffer:n,byteOffset:r}=this.readAt(t,4);return new DataView(n,r).getInt32(0,!0)}seek(t){return this.position=Math.min(t,this.size),t<this.size}read(t){const{buffer:n,size:r,position:i}=this;return n&&i<r?(typeof t!="number"&&(t=Number.POSITIVE_INFINITY),this.position=Math.min(r,i+Math.min(r-i,t)),n.subarray(i,this.position)):null}readAt(t,n){const r=this.buffer,i=Math.min(this.size,t+n);return r?r.subarray(t,i):new Uint8Array(n)}close(){this.buffer&&(this.buffer=null)}throw(t){return this.close(),{done:!0,value:t}}return(t){return this.close(),{done:!0,value:t}}},_g=class extends wg{constructor(t,n){super(),this.position=0,this._handle=t,typeof n=="number"?this.size=n:this._pending=W(this,void 0,void 0,function*(){this.size=(yield t.stat()).size,delete this._pending})}readInt32(t){return W(this,void 0,void 0,function*(){const{buffer:n,byteOffset:r}=yield this.readAt(t,4);return new DataView(n,r).getInt32(0,!0)})}seek(t){return W(this,void 0,void 0,function*(){return this._pending&&(yield this._pending),this.position=Math.min(t,this.size),t<this.size})}read(t){return W(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:n,size:r,position:i}=this;if(n&&i<r){typeof t!="number"&&(t=Number.POSITIVE_INFINITY);let s=i,o=0,a=0;const l=Math.min(r,s+Math.min(r-s,t)),c=new Uint8Array(Math.max(0,(this.position=l)-s));for(;(s+=a)<l&&(o+=a)<c.byteLength;)({bytesRead:a}=yield n.read(c,o,c.byteLength-o,s));return c}return null})}readAt(t,n){return W(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:r,size:i}=this;if(r&&t+n<i){const s=Math.min(i,t+n),o=new Uint8Array(s-t);return(yield r.read(o,0,n,t)).buffer}return new Uint8Array(n)})}close(){return W(this,void 0,void 0,function*(){const t=this._handle;this._handle=null,t&&(yield t.close())})}throw(t){return W(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:t}})}return(t){return W(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:t}})}};const Bq=65536;function Au(e){return e<0&&(e=4294967295+e+1),`0x${e.toString(16)}`}const _f=8,HI=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8];let tO=class{constructor(t){this.buffer=t}high(){return this.buffer[1]}low(){return this.buffer[0]}_times(t){const n=new Uint32Array([this.buffer[1]>>>16,this.buffer[1]&65535,this.buffer[0]>>>16,this.buffer[0]&65535]),r=new Uint32Array([t.buffer[1]>>>16,t.buffer[1]&65535,t.buffer[0]>>>16,t.buffer[0]&65535]);let i=n[3]*r[3];this.buffer[0]=i&65535;let s=i>>>16;return i=n[2]*r[3],s+=i,i=n[3]*r[2]>>>0,s+=i,this.buffer[0]+=s<<16,this.buffer[1]=s>>>0<i?Bq:0,this.buffer[1]+=s>>>16,this.buffer[1]+=n[1]*r[3]+n[2]*r[2]+n[3]*r[1],this.buffer[1]+=n[0]*r[3]+n[1]*r[2]+n[2]*r[1]+n[3]*r[0]<<16,this}_plus(t){const n=this.buffer[0]+t.buffer[0]>>>0;this.buffer[1]+=t.buffer[1],n<this.buffer[0]>>>0&&++this.buffer[1],this.buffer[0]=n}lessThan(t){return this.buffer[1]<t.buffer[1]||this.buffer[1]===t.buffer[1]&&this.buffer[0]<t.buffer[0]}equals(t){return this.buffer[1]===t.buffer[1]&&this.buffer[0]==t.buffer[0]}greaterThan(t){return t.lessThan(this)}hex(){return`${Au(this.buffer[1])} ${Au(this.buffer[0])}`}},Je=class Js extends tO{times(t){return this._times(t),this}plus(t){return this._plus(t),this}static from(t,n=new Uint32Array(2)){return Js.fromString(typeof t=="string"?t:t.toString(),n)}static fromNumber(t,n=new Uint32Array(2)){return Js.fromString(t.toString(),n)}static fromString(t,n=new Uint32Array(2)){const r=t.length,i=new Js(n);for(let s=0;s<r;){const o=_f<r-s?_f:r-s,a=new Js(new Uint32Array([Number.parseInt(t.slice(s,s+o),10),0])),l=new Js(new Uint32Array([HI[o],0]));i.times(l),i.plus(a),s+=o}return i}static convertArray(t){const n=new Uint32Array(t.length*2);for(let r=-1,i=t.length;++r<i;)Js.from(t[r],new Uint32Array(n.buffer,n.byteOffset+2*r*4,2));return n}static multiply(t,n){return new Js(new Uint32Array(t.buffer)).times(n)}static add(t,n){return new Js(new Uint32Array(t.buffer)).plus(n)}},xh=class to extends tO{negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[0]==0&&++this.buffer[1],this}times(t){return this._times(t),this}plus(t){return this._plus(t),this}lessThan(t){const n=this.buffer[1]<<0,r=t.buffer[1]<<0;return n<r||n===r&&this.buffer[0]<t.buffer[0]}static from(t,n=new Uint32Array(2)){return to.fromString(typeof t=="string"?t:t.toString(),n)}static fromNumber(t,n=new Uint32Array(2)){return to.fromString(t.toString(),n)}static fromString(t,n=new Uint32Array(2)){const r=t.startsWith("-"),i=t.length,s=new to(n);for(let o=r?1:0;o<i;){const a=_f<i-o?_f:i-o,l=new to(new Uint32Array([Number.parseInt(t.slice(o,o+a),10),0])),c=new to(new Uint32Array([HI[a],0]));s.times(c),s.plus(l),o+=a}return r?s.negate():s}static convertArray(t){const n=new Uint32Array(t.length*2);for(let r=-1,i=t.length;++r<i;)to.from(t[r],new Uint32Array(n.buffer,n.byteOffset+2*r*4,2));return n}static multiply(t,n){return new to(new Uint32Array(t.buffer)).times(n)}static add(t,n){return new to(new Uint32Array(t.buffer)).plus(n)}},Rq=class eo{constructor(t){this.buffer=t}high(){return new xh(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2))}low(){return new xh(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset,2))}negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[2]=~this.buffer[2],this.buffer[3]=~this.buffer[3],this.buffer[0]==0&&++this.buffer[1],this.buffer[1]==0&&++this.buffer[2],this.buffer[2]==0&&++this.buffer[3],this}times(t){const n=new Je(new Uint32Array([this.buffer[3],0])),r=new Je(new Uint32Array([this.buffer[2],0])),i=new Je(new Uint32Array([this.buffer[1],0])),s=new Je(new Uint32Array([this.buffer[0],0])),o=new Je(new Uint32Array([t.buffer[3],0])),a=new Je(new Uint32Array([t.buffer[2],0])),l=new Je(new Uint32Array([t.buffer[1],0])),c=new Je(new Uint32Array([t.buffer[0],0]));let u=Je.multiply(s,c);this.buffer[0]=u.low();const f=new Je(new Uint32Array([u.high(),0]));return u=Je.multiply(i,c),f.plus(u),u=Je.multiply(s,l),f.plus(u),this.buffer[1]=f.low(),this.buffer[3]=f.lessThan(u)?1:0,this.buffer[2]=f.high(),new Je(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2)).plus(Je.multiply(r,c)).plus(Je.multiply(i,l)).plus(Je.multiply(s,a)),this.buffer[3]+=Je.multiply(n,c).plus(Je.multiply(r,l)).plus(Je.multiply(i,a)).plus(Je.multiply(s,o)).low(),this}plus(t){const n=new Uint32Array(4);return n[3]=this.buffer[3]+t.buffer[3]>>>0,n[2]=this.buffer[2]+t.buffer[2]>>>0,n[1]=this.buffer[1]+t.buffer[1]>>>0,n[0]=this.buffer[0]+t.buffer[0]>>>0,n[0]<this.buffer[0]>>>0&&++n[1],n[1]<this.buffer[1]>>>0&&++n[2],n[2]<this.buffer[2]>>>0&&++n[3],this.buffer[3]=n[3],this.buffer[2]=n[2],this.buffer[1]=n[1],this.buffer[0]=n[0],this}hex(){return`${Au(this.buffer[3])} ${Au(this.buffer[2])} ${Au(this.buffer[1])} ${Au(this.buffer[0])}`}static multiply(t,n){return new eo(new Uint32Array(t.buffer)).times(n)}static add(t,n){return new eo(new Uint32Array(t.buffer)).plus(n)}static from(t,n=new Uint32Array(4)){return eo.fromString(typeof t=="string"?t:t.toString(),n)}static fromNumber(t,n=new Uint32Array(4)){return eo.fromString(t.toString(),n)}static fromString(t,n=new Uint32Array(4)){const r=t.startsWith("-"),i=t.length,s=new eo(n);for(let o=r?1:0;o<i;){const a=_f<i-o?_f:i-o,l=new eo(new Uint32Array([Number.parseInt(t.slice(o,o+a),10),0,0,0])),c=new eo(new Uint32Array([HI[a],0,0,0]));s.times(c),s.plus(l),o+=a}return r?s.negate():s}static convertArray(t){const n=new Uint32Array(t.length*4);for(let r=-1,i=t.length;++r<i;)eo.from(t[r],new Uint32Array(n.buffer,n.byteOffset+4*4*r,4));return n}},eO=class extends Wt{constructor(t,n,r,i){super(),this.nodesIndex=-1,this.buffersIndex=-1,this.bytes=t,this.nodes=n,this.buffers=r,this.dictionaries=i}visit(t){return super.visit(t instanceof He?t.type:t)}visitNull(t,{length:n}=this.nextFieldNode()){return zt({type:t,length:n})}visitBool(t,{length:n,nullCount:r}=this.nextFieldNode()){return zt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitInt(t,{length:n,nullCount:r}=this.nextFieldNode()){return zt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitFloat(t,{length:n,nullCount:r}=this.nextFieldNode()){return zt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitUtf8(t,{length:n,nullCount:r}=this.nextFieldNode()){return zt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),valueOffsets:this.readOffsets(t),data:this.readData(t)})}visitBinary(t,{length:n,nullCount:r}=this.nextFieldNode()){return zt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),valueOffsets:this.readOffsets(t),data:this.readData(t)})}visitFixedSizeBinary(t,{length:n,nullCount:r}=this.nextFieldNode()){return zt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitDate(t,{length:n,nullCount:r}=this.nextFieldNode()){return zt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitTimestamp(t,{length:n,nullCount:r}=this.nextFieldNode()){return zt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitTime(t,{length:n,nullCount:r}=this.nextFieldNode()){return zt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitDecimal(t,{length:n,nullCount:r}=this.nextFieldNode()){return zt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitList(t,{length:n,nullCount:r}=this.nextFieldNode()){return zt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),valueOffsets:this.readOffsets(t),child:this.visit(t.children[0])})}visitStruct(t,{length:n,nullCount:r}=this.nextFieldNode()){return zt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),children:this.visitMany(t.children)})}visitUnion(t){return t.mode===zi.Sparse?this.visitSparseUnion(t):this.visitDenseUnion(t)}visitDenseUnion(t,{length:n,nullCount:r}=this.nextFieldNode()){return zt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),typeIds:this.readTypeIds(t),valueOffsets:this.readOffsets(t),children:this.visitMany(t.children)})}visitSparseUnion(t,{length:n,nullCount:r}=this.nextFieldNode()){return zt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),typeIds:this.readTypeIds(t),children:this.visitMany(t.children)})}visitDictionary(t,{length:n,nullCount:r}=this.nextFieldNode()){return zt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t.indices),dictionary:this.readDictionary(t)})}visitInterval(t,{length:n,nullCount:r}=this.nextFieldNode()){return zt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitFixedSizeList(t,{length:n,nullCount:r}=this.nextFieldNode()){return zt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),child:this.visit(t.children[0])})}visitMap(t,{length:n,nullCount:r}=this.nextFieldNode()){return zt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),valueOffsets:this.readOffsets(t),child:this.visit(t.children[0])})}nextFieldNode(){return this.nodes[++this.nodesIndex]}nextBufferRange(){return this.buffers[++this.buffersIndex]}readNullBitmap(t,n,r=this.nextBufferRange()){return n>0&&this.readData(t,r)||new Uint8Array(0)}readOffsets(t,n){return this.readData(t,n)}readTypeIds(t,n){return this.readData(t,n)}readData(t,{length:n,offset:r}=this.nextBufferRange()){return this.bytes.subarray(r,r+n)}readDictionary(t){return this.dictionaries.get(t.id)}},Lq=class extends eO{constructor(t,n,r,i){super(new Uint8Array(0),n,r,i),this.sources=t}readNullBitmap(t,n,{offset:r}=this.nextBufferRange()){return n<=0?new Uint8Array(0):P2(this.sources[r])}readOffsets(t,{offset:n}=this.nextBufferRange()){return pe(Uint8Array,pe(Int32Array,this.sources[n]))}readTypeIds(t,{offset:n}=this.nextBufferRange()){return pe(Uint8Array,pe(t.ArrayType,this.sources[n]))}readData(t,{offset:n}=this.nextBufferRange()){const{sources:r}=this;return Bt.isTimestamp(t)||(Bt.isInt(t)||Bt.isTime(t))&&t.bitWidth===64||Bt.isDate(t)&&t.unit===Fo.MILLISECOND?pe(Uint8Array,xh.convertArray(r[n])):Bt.isDecimal(t)?pe(Uint8Array,Rq.convertArray(r[n])):Bt.isBinary(t)||Bt.isFixedSizeBinary(t)?Cq(r[n]):Bt.isBool(t)?P2(r[n]):Bt.isUtf8(t)?OI(r[n].join("")):pe(Uint8Array,pe(t.ArrayType,r[n].map(i=>+i)))}};function Cq(e){const t=e.join(""),n=new Uint8Array(t.length/2);for(let r=0;r<t.length;r+=2)n[r>>1]=Number.parseInt(t.slice(r,r+2),16);return n}let Tt=class extends Wt{compareSchemas(t,n){return t===n||n instanceof t.constructor&&this.compareManyFields(t.fields,n.fields)}compareManyFields(t,n){return t===n||Array.isArray(t)&&Array.isArray(n)&&t.length===n.length&&t.every((r,i)=>this.compareFields(r,n[i]))}compareFields(t,n){return t===n||n instanceof t.constructor&&t.name===n.name&&t.nullable===n.nullable&&this.visit(t.type,n.type)}};function xr(e,t){return t instanceof e.constructor}function Hp(e,t){return e===t||xr(e,t)}function jo(e,t){return e===t||xr(e,t)&&e.bitWidth===t.bitWidth&&e.isSigned===t.isSigned}function Cb(e,t){return e===t||xr(e,t)&&e.precision===t.precision}function Uq(e,t){return e===t||xr(e,t)&&e.byteWidth===t.byteWidth}function GI(e,t){return e===t||xr(e,t)&&e.unit===t.unit}function Gp(e,t){return e===t||xr(e,t)&&e.unit===t.unit&&e.timezone===t.timezone}function Xp(e,t){return e===t||xr(e,t)&&e.unit===t.unit&&e.bitWidth===t.bitWidth}function Pq(e,t){return e===t||xr(e,t)&&e.children.length===t.children.length&&Ba.compareManyFields(e.children,t.children)}function zq(e,t){return e===t||xr(e,t)&&e.children.length===t.children.length&&Ba.compareManyFields(e.children,t.children)}function XI(e,t){return e===t||xr(e,t)&&e.mode===t.mode&&e.typeIds.every((n,r)=>n===t.typeIds[r])&&Ba.compareManyFields(e.children,t.children)}function jq(e,t){return e===t||xr(e,t)&&e.id===t.id&&e.isOrdered===t.isOrdered&&Ba.visit(e.indices,t.indices)&&Ba.visit(e.dictionary,t.dictionary)}function QI(e,t){return e===t||xr(e,t)&&e.unit===t.unit}function Vq(e,t){return e===t||xr(e,t)&&e.listSize===t.listSize&&e.children.length===t.children.length&&Ba.compareManyFields(e.children,t.children)}function Yq(e,t){return e===t||xr(e,t)&&e.keysSorted===t.keysSorted&&e.children.length===t.children.length&&Ba.compareManyFields(e.children,t.children)}Tt.prototype.visitNull=Hp;Tt.prototype.visitBool=Hp;Tt.prototype.visitInt=jo;Tt.prototype.visitInt8=jo;Tt.prototype.visitInt16=jo;Tt.prototype.visitInt32=jo;Tt.prototype.visitInt64=jo;Tt.prototype.visitUint8=jo;Tt.prototype.visitUint16=jo;Tt.prototype.visitUint32=jo;Tt.prototype.visitUint64=jo;Tt.prototype.visitFloat=Cb;Tt.prototype.visitFloat16=Cb;Tt.prototype.visitFloat32=Cb;Tt.prototype.visitFloat64=Cb;Tt.prototype.visitUtf8=Hp;Tt.prototype.visitBinary=Hp;Tt.prototype.visitFixedSizeBinary=Uq;Tt.prototype.visitDate=GI;Tt.prototype.visitDateDay=GI;Tt.prototype.visitDateMillisecond=GI;Tt.prototype.visitTimestamp=Gp;Tt.prototype.visitTimestampSecond=Gp;Tt.prototype.visitTimestampMillisecond=Gp;Tt.prototype.visitTimestampMicrosecond=Gp;Tt.prototype.visitTimestampNanosecond=Gp;Tt.prototype.visitTime=Xp;Tt.prototype.visitTimeSecond=Xp;Tt.prototype.visitTimeMillisecond=Xp;Tt.prototype.visitTimeMicrosecond=Xp;Tt.prototype.visitTimeNanosecond=Xp;Tt.prototype.visitDecimal=Hp;Tt.prototype.visitList=Pq;Tt.prototype.visitStruct=zq;Tt.prototype.visitUnion=XI;Tt.prototype.visitDenseUnion=XI;Tt.prototype.visitSparseUnion=XI;Tt.prototype.visitDictionary=jq;Tt.prototype.visitInterval=QI;Tt.prototype.visitIntervalDayTime=QI;Tt.prototype.visitIntervalYearMonth=QI;Tt.prototype.visitFixedSizeList=Vq;Tt.prototype.visitMap=Yq;const Ba=new Tt;function qq(e,t){return Ba.compareSchemas(e,t)}function $w(e,t){return Wq(e,t.map(n=>n.data.concat()))}function Wq(e,t){const n=[...e.fields],r=[],i={numBatches:t.reduce((f,d)=>Math.max(f,d.length),0)};let s=0,o=0,a=-1;const l=t.length;let c,u=[];for(;i.numBatches-- >0;){for(o=Number.POSITIVE_INFINITY,a=-1;++a<l;)u[a]=c=t[a].shift(),o=Math.min(o,c?c.length:o);Number.isFinite(o)&&(u=Hq(n,o,u,t,i),o>0&&(r[s++]=zt({type:new Yn(n),length:o,nullCount:0,children:u.slice()})))}return[e=e.assign(n),r.map(f=>new Di(e,f))]}function Hq(e,t,n,r,i){var s;const o=(t+63&-64)>>3;for(let a=-1,l=r.length;++a<l;){const c=n[a],u=c==null?void 0:c.length;if(u>=t)u===t?n[a]=c:(n[a]=c.slice(0,t),i.numBatches=Math.max(i.numBatches,r[a].unshift(c.slice(t,u-t))));else{const f=e[a];e[a]=f.clone({nullable:!0}),n[a]=(s=c==null?void 0:c._changeLengthAndBackfillNullBitmap(t))!==null&&s!==void 0?s:zt({type:f.type,length:t,nullCount:t,nullBitmap:new Uint8Array(o)})}}return n}var nO;let sp=class $l{constructor(...t){var n,r;if(t.length===0)return this.batches=[],this.schema=new Be([]),this._offsets=[0],this;let i,s;t[0]instanceof Be&&(i=t.shift()),t[t.length-1]instanceof Uint32Array&&(s=t.pop());const o=l=>{if(l){if(l instanceof Di)return[l];if(l instanceof $l)return l.batches;if(l instanceof De){if(l.type instanceof Yn)return[new Di(new Be(l.type.children),l)]}else{if(Array.isArray(l))return l.flatMap(c=>o(c));if(typeof l[Symbol.iterator]=="function")return[...l].flatMap(c=>o(c));if(typeof l=="object"){const c=Object.keys(l),u=c.map(h=>new Qe([l[h]])),f=new Be(c.map((h,p)=>new He(String(h),u[p].type))),[,d]=$w(f,u);return d.length===0?[new Di(l)]:d}}}return[]},a=t.flatMap(l=>o(l));if(i=(r=i??((n=a[0])===null||n===void 0?void 0:n.schema))!==null&&r!==void 0?r:new Be([]),!(i instanceof Be))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const l of a){if(!(l instanceof Di))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!qq(i,l.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=i,this.batches=a,this._offsets=s??L8(this.data)}get data(){return this.batches.map(({data:t})=>t)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((t,n)=>t+n.length,0)}get nullCount(){return this._nullCount===-1&&(this._nullCount=R8(this.data)),this._nullCount}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}getByteLength(t){return 0}[Symbol.iterator](){return this.batches.length>0?qI.visit(new Qe(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(`,
  `)}
]`}concat(...t){const n=this.schema,r=this.data.concat(t.flatMap(({data:i})=>i));return new $l(n,r.map(i=>new Di(n,i)))}slice(t,n){const r=this.schema;[t,n]=F8({length:this.numRows},t,n);const i=C8(this.data,this._offsets,t,n);return new $l(r,i.map(s=>new Di(r,s)))}getChild(t){return this.getChildAt(this.schema.fields.findIndex(n=>n.name===t))}getChildAt(t){if(t>-1&&t<this.schema.fields.length){const n=this.data.map(r=>r.children[t]);if(n.length===0){const{type:r}=this.schema.fields[t],i=zt({type:r,length:0,nullCount:0});n.push(i._changeLengthAndBackfillNullBitmap(this.numRows))}return new Qe(n)}return null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=[...this.batches];if(t>-1&&t<this.numCols){n||(n=new Qe([zt({type:new Oa,length:this.numRows})]));const s=r.fields.slice(),o=s[t].clone({type:n.type}),a=this.schema.fields.map((l,c)=>this.getChildAt(c));[s[t],a[t]]=[o,n],[r,i]=$w(r,a)}return new $l(r,i)}select(t){const n=this.schema.fields.reduce((r,i,s)=>r.set(i.name,s),new Map);return this.selectAt(t.map(r=>n.get(r)).filter(r=>r>-1))}selectAt(t){const n=this.schema.selectAt(t),r=this.batches.map(i=>i.selectAt(t));return new $l(n,r)}assign(t){const n=this.schema.fields,[r,i]=t.schema.fields.reduce((a,l,c)=>{const[u,f]=a,d=n.findIndex(h=>h.name===l.name);return~d?f[d]=c:u.push(c),a},[[],[]]),s=this.schema.assign(t.schema),o=[...n.map((a,l)=>[l,i[l]]).map(([a,l])=>l===void 0?this.getChildAt(a):t.getChildAt(l)),...r.map(a=>t.getChildAt(a))].filter(Boolean);return new $l(...$w(s,o))}};nO=Symbol.toStringTag;sp[nO]=(e=>(e.schema=null,e.batches=[],e._offsets=new Uint32Array([0]),e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,e.isValid=Wu(YI),e.get=Wu(mr.getVisitFn(U.Struct)),e.set=U8(mi.getVisitFn(U.Struct)),e.indexOf=P8(dg.getVisitFn(U.Struct)),e.getByteLength=Wu(Rs.getVisitFn(U.Struct)),"Table"))(sp.prototype);var rO;let Di=class rh{constructor(...t){switch(t.length){case 2:{if([this.schema]=t,!(this.schema instanceof Be))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=zt({nullCount:0,type:new Yn(this.schema.fields),children:this.schema.fields.map(n=>zt({type:n.type,nullCount:0}))})]=t,!(this.data instanceof De))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=wM(this.schema,this.data.children);break}case 1:{const[n]=t,{fields:r,children:i,length:s}=Object.keys(n).reduce((l,c,u)=>(l.children[u]=n[c],l.length=Math.max(l.length,n[c].length),l.fields[u]=He.new({name:c,type:n[c].type,nullable:!0}),l),{length:0,fields:new Array,children:new Array}),o=new Be(r),a=zt({type:new Yn(r),length:s,children:i,nullCount:0});[this.schema,this.data]=wM(o,a.children,s);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=iO(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(t){return this.data.getValid(t)}get(t){return mr.visit(this.data,t)}set(t,n){return mi.visit(this.data,t,n)}indexOf(t,n){return dg.visit(this.data,t,n)}getByteLength(t){return Rs.visit(this.data,t)}[Symbol.iterator](){return qI.visit(new Qe([this.data]))}toArray(){return[...this]}concat(...t){return new sp(this.schema,[this,...t])}slice(t,n){const[r]=new Qe([this.data]).slice(t,n).data;return new rh(this.schema,r)}getChild(t){var n;return this.getChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.schema.fields.length?new Qe([this.data.children[t]]):null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=this.data;if(t>-1&&t<this.numCols){n||(n=new Qe([zt({type:new Oa,length:this.numRows})]));const s=r.fields.slice(),o=i.children.slice(),a=s[t].clone({type:n.type});[s[t],o[t]]=[a,n.data[0]],r=new Be(s,new Map(this.schema.metadata)),i=zt({type:new Yn(s),children:o})}return new rh(r,i)}select(t){const n=this.schema.select(t),r=new Yn(n.fields),i=[];for(const s of t){const o=this.schema.fields.findIndex(a=>a.name===s);~o&&(i[o]=this.data.children[o])}return new rh(n,zt({type:r,length:this.numRows,children:i}))}selectAt(t){const n=this.schema.selectAt(t),r=t.map(s=>this.data.children[s]).filter(Boolean),i=zt({type:new Yn(n.fields),length:this.numRows,children:r});return new rh(n,i)}};rO=Symbol.toStringTag;Di[rO]=(e=>(e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(Di.prototype);function wM(e,t,n=t.reduce((r,i)=>Math.max(r,i.length),0)){var r;const i=[...e.fields],s=[...t],o=(n+63&-64)>>3;for(const[a,l]of e.fields.entries()){const c=t[a];(!c||c.length!==n)&&(i[a]=l.clone({nullable:!0}),s[a]=(r=c==null?void 0:c._changeLengthAndBackfillNullBitmap(n))!==null&&r!==void 0?r:zt({type:l.type,length:n,nullCount:n,nullBitmap:new Uint8Array(o)}))}return[e.assign(i),zt({type:new Yn(i),length:n,children:s})]}function iO(e,t,n=new Map){for(let r=-1,i=e.length;++r<i;){const o=e[r].type,a=t[r];if(Bt.isDictionary(o)){if(!n.has(o.id))a.dictionary&&n.set(o.id,a.dictionary);else if(n.get(o.id)!==a.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}o.children&&o.children.length>0&&iO(o.children,a.children,n)}return n}let sO=class extends Di{constructor(t){const n=t.fields.map(i=>zt({type:i.type})),r=zt({type:new Yn(t.fields),nullCount:0,children:n});super(t,r)}};var Sg;(function(e){e[e.BUFFER=0]="BUFFER"})(Sg||(Sg={}));var xg;(function(e){e[e.LZ4_FRAME=0]="LZ4_FRAME",e[e.ZSTD=1]="ZSTD"})(xg||(xg={}));let Gq=class Nl{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBodyCompression(t,n){return(n||new Nl).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBodyCompression(t,n){return t.setPosition(t.position()+me),(n||new Nl).__init(t.readInt32(t.position())+t.position(),t)}codec(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt8(this.bb_pos+t):xg.LZ4_FRAME}method(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt8(this.bb_pos+t):Sg.BUFFER}static startBodyCompression(t){t.startObject(2)}static addCodec(t,n){t.addFieldInt8(0,n,xg.LZ4_FRAME)}static addMethod(t,n){t.addFieldInt8(1,n,Sg.BUFFER)}static endBodyCompression(t){return t.endObject()}static createBodyCompression(t,n,r){return Nl.startBodyCompression(t),Nl.addCodec(t,n),Nl.addMethod(t,r),Nl.endBodyCompression(t)}},oO=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(t,n,r){return t.prep(8,16),t.writeInt64(r),t.writeInt64(n),t.offset()}},aO=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(t,n,r){return t.prep(8,16),t.writeInt64(r),t.writeInt64(n),t.offset()}},ao=class Q2{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsRecordBatch(t,n){return(n||new Q2).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsRecordBatch(t,n){return t.setPosition(t.position()+me),(n||new Q2).__init(t.readInt32(t.position())+t.position(),t)}length(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}nodes(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new aO).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}nodesLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}buffers(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new oO).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}buffersLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}compression(t){const n=this.bb.__offset(this.bb_pos,10);return n?(t||new Gq).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}static startRecordBatch(t){t.startObject(4)}static addLength(t,n){t.addFieldInt64(0,n,t.createLong(0,0))}static addNodes(t,n){t.addFieldOffset(1,n,0)}static startNodesVector(t,n){t.startVector(16,n,8)}static addBuffers(t,n){t.addFieldOffset(2,n,0)}static startBuffersVector(t,n){t.startVector(16,n,8)}static addCompression(t,n){t.addFieldOffset(3,n,0)}static endRecordBatch(t){return t.endObject()}},ou=class K2{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryBatch(t,n){return(n||new K2).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryBatch(t,n){return t.setPosition(t.position()+me),(n||new K2).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}data(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new ao).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isDelta(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startDictionaryBatch(t){t.startObject(3)}static addId(t,n){t.addFieldInt64(0,n,t.createLong(0,0))}static addData(t,n){t.addFieldOffset(1,n,0)}static addIsDelta(t,n){t.addFieldInt8(2,+n,0)}static endDictionaryBatch(t){return t.endObject()}};var Ig;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(Ig||(Ig={}));let Zo=class ss{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMessage(t,n){return(n||new ss).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMessage(t,n){return t.setPosition(t.position()+me),(n||new ss).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):bf.V1}headerType(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):Ig.NONE}header(t){const n=this.bb.__offset(this.bb_pos,8);return n?this.bb.__union(t,this.bb_pos+n):null}bodyLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new si).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startMessage(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,bf.V1)}static addHeaderType(t,n){t.addFieldInt8(1,n,Ig.NONE)}static addHeader(t,n){t.addFieldOffset(2,n,0)}static addBodyLength(t,n){t.addFieldInt64(3,n,t.createLong(0,0))}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endMessage(t){return t.endObject()}static finishMessageBuffer(t,n){t.finish(n)}static finishSizePrefixedMessageBuffer(t,n){t.finish(n,void 0,!0)}static createMessage(t,n,r,i,s,o){return ss.startMessage(t),ss.addVersion(t,n),ss.addHeaderType(t,r),ss.addHeader(t,i),ss.addBodyLength(t,s),ss.addCustomMetadata(t,o),ss.endMessage(t)}};var Xq=Eo;let Qq=class extends Wt{visit(t,n){return t==null||n==null?void 0:super.visit(t,n)}visitNull(t,n){return pM.startNull(n),pM.endNull(n)}visitInt(t,n){return Tu.startInt(n),Tu.addBitWidth(n,t.bitWidth),Tu.addIsSigned(n,t.isSigned),Tu.endInt(n)}visitFloat(t,n){return sm.startFloatingPoint(n),sm.addPrecision(n,t.precision),sm.endFloatingPoint(n)}visitBinary(t,n){return fM.startBinary(n),fM.endBinary(n)}visitBool(t,n){return dM.startBool(n),dM.endBool(n)}visitUtf8(t,n){return mM.startUtf8(n),mM.endUtf8(n)}visitDecimal(t,n){return tu.startDecimal(n),tu.addScale(n,t.scale),tu.addPrecision(n,t.precision),tu.addBitWidth(n,t.bitWidth),tu.endDecimal(n)}visitDate(t,n){return nm.startDate(n),nm.addUnit(n,t.unit),nm.endDate(n)}visitTime(t,n){return th.startTime(n),th.addUnit(n,t.unit),th.addBitWidth(n,t.bitWidth),th.endTime(n)}visitTimestamp(t,n){const r=t.timezone&&n.createString(t.timezone)||void 0;return eh.startTimestamp(n),eh.addUnit(n,t.unit),r!==void 0&&eh.addTimezone(n,r),eh.endTimestamp(n)}visitInterval(t,n){return om.startInterval(n),om.addUnit(n,t.unit),om.endInterval(n)}visitList(t,n){return hM.startList(n),hM.endList(n)}visitStruct(t,n){return yM.startStruct_(n),yM.endStruct_(n)}visitUnion(t,n){Tl.startTypeIdsVector(n,t.typeIds.length);const r=Tl.createTypeIdsVector(n,t.typeIds);return Tl.startUnion(n),Tl.addMode(n,t.mode),Tl.addTypeIds(n,r),Tl.endUnion(n)}visitDictionary(t,n){const r=this.visit(t.indices,n);return Zc.startDictionaryEncoding(n),Zc.addId(n,new Xq(t.id,0)),Zc.addIsOrdered(n,t.isOrdered),r!==void 0&&Zc.addIndexType(n,r),Zc.endDictionaryEncoding(n)}visitFixedSizeBinary(t,n){return rm.startFixedSizeBinary(n),rm.addByteWidth(n,t.byteWidth),rm.endFixedSizeBinary(n)}visitFixedSizeList(t,n){return im.startFixedSizeList(n),im.addListSize(n,t.listSize),im.endFixedSizeList(n)}visitMap(t,n){return am.startMap(n),am.addKeysSorted(n,t.keysSorted),am.endMap(n)}};const Nw=new Qq;function Kq(e,t=new Map){return new Be(Jq(e,t),cm(e.customMetadata),t)}function lO(e){return new ji(e.count,cO(e.columns),uO(e.columns))}function Zq(e){return new Bo(lO(e.data),e.id,e.isDelta)}function Jq(e,t){return(e.fields||[]).filter(Boolean).map(n=>He.fromJSON(n,t))}function _M(e,t){return(e.children||[]).filter(Boolean).map(n=>He.fromJSON(n,t))}function cO(e){return(e||[]).reduce((t,n)=>[...t,new Jf(n.count,tW(n.VALIDITY)),...cO(n.children)],[])}function uO(e,t=[]){for(let n=-1,r=(e||[]).length;++n<r;){const i=e[n];i.VALIDITY&&t.push(new vo(t.length,i.VALIDITY.length)),i.TYPE&&t.push(new vo(t.length,i.TYPE.length)),i.OFFSET&&t.push(new vo(t.length,i.OFFSET.length)),i.DATA&&t.push(new vo(t.length,i.DATA.length)),t=uO(i.children,t)}return t}function tW(e){return(e||[]).reduce((t,n)=>t+ +(n===0),0)}function eW(e,t){let n,r,i,s,o,a;return!t||!(s=e.dictionary)?(o=xM(e,_M(e,t)),i=new He(e.name,o,e.nullable,cm(e.customMetadata))):t.has(n=s.id)?(r=(r=s.indexType)?SM(r):new np,a=new mf(t.get(n),r,n,s.isOrdered),i=new He(e.name,a,e.nullable,cm(e.customMetadata))):(r=(r=s.indexType)?SM(r):new np,t.set(n,o=xM(e,_M(e,t))),a=new mf(o,r,n,s.isOrdered),i=new He(e.name,a,e.nullable,cm(e.customMetadata))),i||null}function cm(e){return new Map(Object.entries(e||{}))}function SM(e){return new Fa(e.isSigned,e.bitWidth)}function xM(e,t){const n=e.type.name;switch(n){case"NONE":return new Oa;case"null":return new Oa;case"binary":return new tg;case"utf8":return new eg;case"bool":return new ng;case"list":return new ag((t||[])[0]);case"struct":return new Yn(t||[]);case"struct_":return new Yn(t||[])}switch(n){case"int":{const r=e.type;return new Fa(r.isSigned,r.bitWidth)}case"floatingpoint":{const r=e.type;return new rp(dr[r.precision])}case"decimal":{const r=e.type;return new rg(r.scale,r.precision,r.bitWidth)}case"date":{const r=e.type;return new ig(Fo[r.unit])}case"time":{const r=e.type;return new ip(Jt[r.unit],r.bitWidth)}case"timestamp":{const r=e.type;return new sg(Jt[r.unit],r.timezone)}case"interval":{const r=e.type;return new og(ka[r.unit])}case"union":{const r=e.type;return new lg(zi[r.mode],r.typeIds||[],t||[])}case"fixedsizebinary":{const r=e.type;return new cg(r.byteWidth)}case"fixedsizelist":{const r=e.type;return new ug(r.listSize,(t||[])[0])}case"map":{const r=e.type;return new fg((t||[])[0],r.keysSorted)}}throw new Error(`Unrecognized type: "${n}"`)}var hc=Eo,nW=X8,rW=gf;let Ih=class au{constructor(t,n,r,i){this._version=n,this._headerType=r,this.body=new Uint8Array(0),i&&(this._createHeader=()=>i),this._bodyLength=typeof t=="number"?t:t.low}static fromJSON(t,n){const r=new au(0,ni.V4,n);return r._createHeader=iW(t,n),r}static decode(t){t=new rW(ne(t));const n=Zo.getRootAsMessage(t),r=n.bodyLength(),i=n.version(),s=n.headerType(),o=new au(r,i,s);return o._createHeader=sW(n,s),o}static encode(t){const n=new nW;let r=-1;return t.isSchema()?r=Be.encode(n,t.header()):t.isRecordBatch()?r=ji.encode(n,t.header()):t.isDictionaryBatch()&&(r=Bo.encode(n,t.header())),Zo.startMessage(n),Zo.addVersion(n,ni.V4),Zo.addHeader(n,r),Zo.addHeaderType(n,t.headerType),Zo.addBodyLength(n,new hc(t.bodyLength,0)),Zo.finishMessageBuffer(n,Zo.endMessage(n)),n.asUint8Array()}static from(t,n=0){if(t instanceof Be)return new au(0,ni.V4,ue.Schema,t);if(t instanceof ji)return new au(n,ni.V4,ue.RecordBatch,t);if(t instanceof Bo)return new au(n,ni.V4,ue.DictionaryBatch,t);throw new Error(`Unrecognized Message header: ${t}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===ue.Schema}isRecordBatch(){return this.headerType===ue.RecordBatch}isDictionaryBatch(){return this.headerType===ue.DictionaryBatch}},ji=class{constructor(t,n,r){this._nodes=n,this._buffers=r,this._length=typeof t=="number"?t:t.low}get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}},Bo=class{constructor(t,n,r=!1){this._data=t,this._isDelta=r,this._id=typeof n=="number"?n:n.low}get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}},vo=class{constructor(t,n){this.offset=typeof t=="number"?t:t.low,this.length=typeof n=="number"?n:n.low}},Jf=class{constructor(t,n){this.length=typeof t=="number"?t:t.low,this.nullCount=typeof n=="number"?n:n.low}};function iW(e,t){return()=>{switch(t){case ue.Schema:return Be.fromJSON(e);case ue.RecordBatch:return ji.fromJSON(e);case ue.DictionaryBatch:return Bo.fromJSON(e)}throw new Error(`Unrecognized Message type: { name: ${ue[t]}, type: ${t} }`)}}function sW(e,t){return()=>{switch(t){case ue.Schema:return Be.decode(e.header(new ls));case ue.RecordBatch:return ji.decode(e.header(new ao),e.version());case ue.DictionaryBatch:return Bo.decode(e.header(new ou),e.version())}throw new Error(`Unrecognized Message type: { name: ${ue[t]}, type: ${t} }`)}}He.encode=mW;He.decode=pW;He.fromJSON=eW;Be.encode=yW;Be.decode=oW;Be.fromJSON=Kq;ji.encode=gW;ji.decode=aW;ji.fromJSON=lO;Bo.encode=bW;Bo.decode=lW;Bo.fromJSON=Zq;Jf.encode=vW;Jf.decode=uW;vo.encode=wW;vo.decode=cW;function oW(e,t=new Map){const n=hW(e,t);return new Be(n,um(e),t)}function aW(e,t=ni.V4){if(e.compression()!==null)throw new Error("Record batch compression not implemented");return new ji(e.length(),fW(e),dW(e,t))}function lW(e,t=ni.V4){return new Bo(ji.decode(e.data(),t),e.id(),e.isDelta())}function cW(e){return new vo(e.offset(),e.length())}function uW(e){return new Jf(e.length(),e.nullCount())}function fW(e){const t=[];for(let n,r=-1,i=-1,s=e.nodesLength();++r<s;)(n=e.nodes(r))&&(t[++i]=Jf.decode(n));return t}function dW(e,t){const n=[];for(let r,i=-1,s=-1,o=e.buffersLength();++i<o;)(r=e.buffers(i))&&(t<ni.V4&&(r.bb_pos+=8*(i+1)),n[++s]=vo.decode(r));return n}function hW(e,t){const n=[];for(let r,i=-1,s=-1,o=e.fieldsLength();++i<o;)(r=e.fields(i))&&(n[++s]=He.decode(r,t));return n}function IM(e,t){const n=[];for(let r,i=-1,s=-1,o=e.childrenLength();++i<o;)(r=e.children(i))&&(n[++s]=He.decode(r,t));return n}function pW(e,t){let n,r,i,s,o,a;return!t||!(a=e.dictionary())?(i=TM(e,IM(e,t)),r=new He(e.name(),i,e.nullable(),um(e))):t.has(n=a.id().low)?(s=(s=a.indexType())?EM(s):new np,o=new mf(t.get(n),s,n,a.isOrdered()),r=new He(e.name(),o,e.nullable(),um(e))):(s=(s=a.indexType())?EM(s):new np,t.set(n,i=TM(e,IM(e,t))),o=new mf(i,s,n,a.isOrdered()),r=new He(e.name(),o,e.nullable(),um(e))),r||null}function um(e){const t=new Map;if(e)for(let n,r,i=-1,s=Math.trunc(e.customMetadataLength());++i<s;)(n=e.customMetadata(i))&&(r=n.key())!=null&&t.set(r,n.value());return t}function EM(e){return new Fa(e.isSigned(),e.bitWidth())}function TM(e,t){const n=e.typeType();switch(n){case ke.NONE:return new Oa;case ke.Null:return new Oa;case ke.Binary:return new tg;case ke.Utf8:return new eg;case ke.Bool:return new ng;case ke.List:return new ag((t||[])[0]);case ke.Struct_:return new Yn(t||[])}switch(n){case ke.Int:{const r=e.type(new Tu);return new Fa(r.isSigned(),r.bitWidth())}case ke.FloatingPoint:{const r=e.type(new sm);return new rp(r.precision())}case ke.Decimal:{const r=e.type(new tu);return new rg(r.scale(),r.precision(),r.bitWidth())}case ke.Date:{const r=e.type(new nm);return new ig(r.unit())}case ke.Time:{const r=e.type(new th);return new ip(r.unit(),r.bitWidth())}case ke.Timestamp:{const r=e.type(new eh);return new sg(r.unit(),r.timezone())}case ke.Interval:{const r=e.type(new om);return new og(r.unit())}case ke.Union:{const r=e.type(new Tl);return new lg(r.mode(),r.typeIdsArray()||[],t||[])}case ke.FixedSizeBinary:{const r=e.type(new rm);return new cg(r.byteWidth())}case ke.FixedSizeList:{const r=e.type(new im);return new ug(r.listSize(),(t||[])[0])}case ke.Map:{const r=e.type(new am);return new fg((t||[])[0],r.keysSorted())}}throw new Error(`Unrecognized type: "${ke[n]}" (${n})`)}function yW(e,t){const n=t.fields.map(s=>He.encode(e,s));ls.startFieldsVector(e,n.length);const r=ls.createFieldsVector(e,n),i=t.metadata&&t.metadata.size>0?ls.createCustomMetadataVector(e,[...t.metadata].map(([s,o])=>{const a=e.createString(`${s}`),l=e.createString(`${o}`);return si.startKeyValue(e),si.addKey(e,a),si.addValue(e,l),si.endKeyValue(e)})):-1;return ls.startSchema(e),ls.addFields(e,r),ls.addEndianness(e,_W?vf.Little:vf.Big),i!==-1&&ls.addCustomMetadata(e,i),ls.endSchema(e)}function mW(e,t){let n=-1,r=-1,i=-1;const s=t.type;let o=t.typeId;Bt.isDictionary(s)?(o=s.dictionary.typeId,i=Nw.visit(s,e),r=Nw.visit(s.dictionary,e)):r=Nw.visit(s,e);const a=(s.children||[]).map(u=>He.encode(e,u)),l=Gr.createChildrenVector(e,a),c=t.metadata&&t.metadata.size>0?Gr.createCustomMetadataVector(e,[...t.metadata].map(([u,f])=>{const d=e.createString(`${u}`),h=e.createString(`${f}`);return si.startKeyValue(e),si.addKey(e,d),si.addValue(e,h),si.endKeyValue(e)})):-1;return t.name&&(n=e.createString(t.name)),Gr.startField(e),Gr.addType(e,r),Gr.addTypeType(e,o),Gr.addChildren(e,l),Gr.addNullable(e,!!t.nullable),n!==-1&&Gr.addName(e,n),i!==-1&&Gr.addDictionary(e,i),c!==-1&&Gr.addCustomMetadata(e,c),Gr.endField(e)}function gW(e,t){const n=t.nodes||[],r=t.buffers||[];ao.startNodesVector(e,n.length);for(const o of n.slice().reverse())Jf.encode(e,o);const i=e.endVector();ao.startBuffersVector(e,r.length);for(const o of r.slice().reverse())vo.encode(e,o);const s=e.endVector();return ao.startRecordBatch(e),ao.addLength(e,new hc(t.length,0)),ao.addNodes(e,i),ao.addBuffers(e,s),ao.endRecordBatch(e)}function bW(e,t){const n=ji.encode(e,t.data);return ou.startDictionaryBatch(e),ou.addId(e,new hc(t.id,0)),ou.addIsDelta(e,t.isDelta),ou.addData(e,n),ou.endDictionaryBatch(e)}function vW(e,t){return aO.createFieldNode(e,new hc(t.length,0),new hc(t.nullCount,0))}function wW(e,t){return oO.createBuffer(e,new hc(t.offset,0),new hc(t.length,0))}const _W=(()=>{const e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),new Int16Array(e)[0]===256})(),KI=e=>`Expected ${ue[e]} Message in stream, but was null or length 0.`,ZI=e=>`Header pointer of flatbuffer-encoded ${ue[e]} Message is null or length 0.`,fO=(e,t)=>`Expected to read ${e} metadata bytes, but only read ${t}.`,dO=(e,t)=>`Expected to read ${e} bytes for message body, but only read ${t}.`;let hO=class{constructor(t){this.source=t instanceof vg?t:new vg(t)}[Symbol.iterator](){return this}next(){let t;return(t=this.readMetadataLength()).done||t.value===-1&&(t=this.readMetadataLength()).done||(t=this.readMetadata(t.value)).done?Re:t}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}readMessage(t){let n;if((n=this.next()).done)return null;if(t!=null&&n.value.headerType!==t)throw new Error(KI(t));return n.value}readMessageBody(t){if(t<=0)return new Uint8Array(0);const n=ne(this.source.read(t));if(n.byteLength<t)throw new Error(dO(t,n.byteLength));return n.byteOffset%8===0&&n.byteOffset+n.byteLength<=n.buffer.byteLength?n:n.slice()}readSchema(t=!1){const n=ue.Schema,r=this.readMessage(n),i=r==null?void 0:r.header();if(t&&!i)throw new Error(ZI(n));return i}readMetadataLength(){const t=this.source.read(Ub),n=t&&new gf(t),r=(n==null?void 0:n.readInt32(0))||0;return{done:r===0,value:r}}readMetadata(t){const n=this.source.read(t);if(!n)return Re;if(n.byteLength<t)throw new Error(fO(t,n.byteLength));return{done:!1,value:Ih.decode(n)}}},SW=class{constructor(t,n){this.source=t instanceof wg?t:Ak(t)?new _g(t,n):new wg(t)}[Symbol.asyncIterator](){return this}next(){return W(this,void 0,void 0,function*(){let t;return(t=yield this.readMetadataLength()).done||t.value===-1&&(t=yield this.readMetadataLength()).done||(t=yield this.readMetadata(t.value)).done?Re:t})}throw(t){return W(this,void 0,void 0,function*(){return yield this.source.throw(t)})}return(t){return W(this,void 0,void 0,function*(){return yield this.source.return(t)})}readMessage(t){return W(this,void 0,void 0,function*(){let n;if((n=yield this.next()).done)return null;if(t!=null&&n.value.headerType!==t)throw new Error(KI(t));return n.value})}readMessageBody(t){return W(this,void 0,void 0,function*(){if(t<=0)return new Uint8Array(0);const n=ne(yield this.source.read(t));if(n.byteLength<t)throw new Error(dO(t,n.byteLength));return n.byteOffset%8===0&&n.byteOffset+n.byteLength<=n.buffer.byteLength?n:n.slice()})}readSchema(t=!1){return W(this,void 0,void 0,function*(){const n=ue.Schema,r=yield this.readMessage(n),i=r==null?void 0:r.header();if(t&&!i)throw new Error(ZI(n));return i})}readMetadataLength(){return W(this,void 0,void 0,function*(){const t=yield this.source.read(Ub),n=t&&new gf(t),r=(n==null?void 0:n.readInt32(0))||0;return{done:r===0,value:r}})}readMetadata(t){return W(this,void 0,void 0,function*(){const n=yield this.source.read(t);if(!n)return Re;if(n.byteLength<t)throw new Error(fO(t,n.byteLength));return{done:!1,value:Ih.decode(n)}})}},xW=class extends hO{constructor(t){super(new Uint8Array(0)),this._schema=!1,this._body=[],this._batchIndex=0,this._dictionaryIndex=0,this._json=t instanceof bM?t:new bM(t)}next(){const{_json:t}=this;if(!this._schema)return this._schema=!0,{done:!1,value:Ih.fromJSON(t.schema,ue.Schema)};if(this._dictionaryIndex<t.dictionaries.length){const n=t.dictionaries[this._dictionaryIndex++];return this._body=n.data.columns,{done:!1,value:Ih.fromJSON(n,ue.DictionaryBatch)}}if(this._batchIndex<t.batches.length){const n=t.batches[this._batchIndex++];return this._body=n.columns,{done:!1,value:Ih.fromJSON(n,ue.RecordBatch)}}return this._body=[],Re}readMessageBody(t){return n(this._body);function n(r){return(r||[]).reduce((i,s)=>[...i,...s.VALIDITY&&[s.VALIDITY]||[],...s.TYPE&&[s.TYPE]||[],...s.OFFSET&&[s.OFFSET]||[],...s.DATA&&[s.DATA]||[],...n(s.children)],[])}}readMessage(t){let n;if((n=this.next()).done)return null;if(t!=null&&n.value.headerType!==t)throw new Error(KI(t));return n.value}readSchema(){const t=ue.Schema,n=this.readMessage(t),r=n==null?void 0:n.header();if(!n||!r)throw new Error(ZI(t));return r}};const Ub=4,Z2="ARROW1",Eg=new Uint8Array(Z2.length);for(let e=0;e<Z2.length;e+=1)Eg[e]=Z2.codePointAt(e);function JI(e,t=0){for(let n=-1,r=Eg.length;++n<r;)if(Eg[n]!==e[t+n])return!1;return!0}const Qp=Eg.length,pO=Qp+Ub,IW=Qp*2+Ub;let Kp=class fm extends Z8{constructor(t){super(),this._impl=t}get closed(){return this._impl.closed}get schema(){return this._impl.schema}get autoDestroy(){return this._impl.autoDestroy}get dictionaries(){return this._impl.dictionaries}get numDictionaries(){return this._impl.numDictionaries}get numRecordBatches(){return this._impl.numRecordBatches}get footer(){return this._impl.isFile()?this._impl.footer:null}isSync(){return this._impl.isSync()}isAsync(){return this._impl.isAsync()}isFile(){return this._impl.isFile()}isStream(){return this._impl.isStream()}next(){return this._impl.next()}throw(t){return this._impl.throw(t)}return(t){return this._impl.return(t)}cancel(){return this._impl.cancel()}reset(t){return this._impl.reset(t),this._DOMStream=void 0,this._nodeStream=void 0,this}open(t){const n=this._impl.open(t);return Jh(n)?n.then(()=>this):this}readRecordBatch(t){return this._impl.isFile()?this._impl.readRecordBatch(t):null}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}toDOMStream(){return Qr.toDOMStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this})}toNodeStream(){return Qr.toNodeStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this},{objectMode:!0})}static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,n){throw new Error('"throughDOM" not available in this environment')}static from(t){return t instanceof fm?t:R2(t)?MW(t):Ak(t)?DW(t):Jh(t)?W(this,void 0,void 0,function*(){return yield fm.from(yield t)}):Mk(t)||BI(t)||Nk(t)||FI(t)?NW(new wg(t)):$W(new vg(t))}static readAll(t){return t instanceof fm?t.isSync()?AM(t):MM(t):R2(t)||ArrayBuffer.isView(t)||Rb(t)||Tk(t)?AM(t):MM(t)}},Tg=class extends Kp{constructor(t){super(t),this._impl=t}readAll(){return[...this]}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return en(this,arguments,function*(){yield K(yield*Ma(Fr(this[Symbol.iterator]())))})}},Ag=class extends Kp{constructor(t){super(t),this._impl=t}readAll(){var t,n;return W(this,void 0,void 0,function*(){const r=new Array;try{for(var i=Fr(this),s;s=yield i.next(),!s.done;){const o=s.value;r.push(o)}}catch(o){t={error:o}}finally{try{s&&!s.done&&(n=i.return)&&(yield n.call(i))}finally{if(t)throw t.error}}return r})}[Symbol.iterator](){throw new Error("AsyncRecordBatchStreamReader is not Iterable")}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}},yO=class extends Tg{constructor(t){super(t),this._impl=t}},EW=class extends Ag{constructor(t){super(t),this._impl=t}},mO=class{constructor(t=new Map){this.closed=!1,this.autoDestroy=!0,this._dictionaryIndex=0,this._recordBatchIndex=0,this.dictionaries=t}get numDictionaries(){return this._dictionaryIndex}get numRecordBatches(){return this._recordBatchIndex}isSync(){return!1}isAsync(){return!1}isFile(){return!1}isStream(){return!1}reset(t){return this._dictionaryIndex=0,this._recordBatchIndex=0,this.schema=t,this.dictionaries=new Map,this}_loadRecordBatch(t,n){const r=this._loadVectors(t,n,this.schema.fields),i=zt({type:new Yn(this.schema.fields),length:t.length,children:r});return new Di(this.schema,i)}_loadDictionaryBatch(t,n){const{id:r,isDelta:i}=t,{dictionaries:s,schema:o}=this,a=s.get(r);if(i||!a){const l=o.dictionaries.get(r),c=this._loadVectors(t.data,n,[l]);return(a&&i?a.concat(new Qe(c)):new Qe(c)).memoize()}return a.memoize()}_loadVectors(t,n,r){return new eO(n,t.nodes,t.buffers,this.dictionaries).visitMany(r)}},Mg=class extends mO{constructor(t,n){super(n),this._reader=R2(t)?new xW(this._handle=t):new hO(this._handle=t)}isSync(){return!0}isStream(){return!0}[Symbol.iterator](){return this}cancel(){!this.closed&&(this.closed=!0)&&(this.reset()._reader.return(),this._reader=null,this.dictionaries=null)}open(t){return this.closed||(this.autoDestroy=bO(this,t),this.schema||(this.schema=this._reader.readSchema())||this.cancel()),this}throw(t){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.throw(t):Re}return(t){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.return(t):Re}next(){if(this.closed)return Re;let t;const{_reader:n}=this;for(;t=this._readNextMessageAndValidate();)if(t.isSchema())this.reset(t.header());else if(t.isRecordBatch()){this._recordBatchIndex++;const r=t.header(),i=n.readMessageBody(t.bodyLength);return{done:!1,value:this._loadRecordBatch(r,i)}}else if(t.isDictionaryBatch()){this._dictionaryIndex++;const r=t.header(),i=n.readMessageBody(t.bodyLength),s=this._loadDictionaryBatch(r,i);this.dictionaries.set(r.id,s)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new sO(this.schema)}):this.return()}_readNextMessageAndValidate(t){return this._reader.readMessage(t)}},$g=class extends mO{constructor(t,n){super(n),this._reader=new SW(this._handle=t)}isAsync(){return!0}isStream(){return!0}[Symbol.asyncIterator](){return this}cancel(){return W(this,void 0,void 0,function*(){!this.closed&&(this.closed=!0)&&(yield this.reset()._reader.return(),this._reader=null,this.dictionaries=null)})}open(t){return W(this,void 0,void 0,function*(){return this.closed||(this.autoDestroy=bO(this,t),this.schema||(this.schema=yield this._reader.readSchema())||(yield this.cancel())),this})}throw(t){return W(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.throw(t):Re})}return(t){return W(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.return(t):Re})}next(){return W(this,void 0,void 0,function*(){if(this.closed)return Re;let t;const{_reader:n}=this;for(;t=yield this._readNextMessageAndValidate();)if(t.isSchema())yield this.reset(t.header());else if(t.isRecordBatch()){this._recordBatchIndex++;const r=t.header(),i=yield n.readMessageBody(t.bodyLength);return{done:!1,value:this._loadRecordBatch(r,i)}}else if(t.isDictionaryBatch()){this._dictionaryIndex++;const r=t.header(),i=yield n.readMessageBody(t.bodyLength),s=this._loadDictionaryBatch(r,i);this.dictionaries.set(r.id,s)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new sO(this.schema)}):yield this.return()})}_readNextMessageAndValidate(t){return W(this,void 0,void 0,function*(){return yield this._reader.readMessage(t)})}},gO=class extends Mg{constructor(t,n){super(t instanceof vM?t:new vM(t),n)}get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}isSync(){return!0}isFile(){return!0}open(t){if(!this.closed&&!this._footer){this.schema=(this._footer=this._readFooter()).schema;for(const n of this._footer.dictionaryBatches())n&&this._readDictionaryBatch(this._dictionaryIndex++)}return super.open(t)}readRecordBatch(t){var n;if(this.closed)return null;this._footer||this.open();const r=(n=this._footer)===null||n===void 0?void 0:n.getRecordBatch(t);if(r&&this._handle.seek(r.offset)){const i=this._reader.readMessage(ue.RecordBatch);if(i!=null&&i.isRecordBatch()){const s=i.header(),o=this._reader.readMessageBody(i.bodyLength);return this._loadRecordBatch(s,o)}}return null}_readDictionaryBatch(t){var n;const r=(n=this._footer)===null||n===void 0?void 0:n.getDictionaryBatch(t);if(r&&this._handle.seek(r.offset)){const i=this._reader.readMessage(ue.DictionaryBatch);if(i!=null&&i.isDictionaryBatch()){const s=i.header(),o=this._reader.readMessageBody(i.bodyLength),a=this._loadDictionaryBatch(s,o);this.dictionaries.set(s.id,a)}}}_readFooter(){const{_handle:t}=this,n=t.size-pO,r=t.readInt32(n),i=t.readAt(n-r,r);return WI.decode(i)}_readNextMessageAndValidate(t){var n;if(this._footer||this.open(),this._footer&&this._recordBatchIndex<this.numRecordBatches){const r=(n=this._footer)===null||n===void 0?void 0:n.getRecordBatch(this._recordBatchIndex);if(r&&this._handle.seek(r.offset))return this._reader.readMessage(t)}return null}},TW=class extends $g{constructor(t,...n){const r=typeof n[0]!="number"?n.shift():void 0,i=n[0]instanceof Map?n.shift():void 0;super(t instanceof _g?t:new _g(t,r),i)}get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}isFile(){return!0}isAsync(){return!0}open(t){const n=Object.create(null,{open:{get:()=>super.open}});return W(this,void 0,void 0,function*(){if(!this.closed&&!this._footer){this.schema=(this._footer=yield this._readFooter()).schema;for(const r of this._footer.dictionaryBatches())r&&(yield this._readDictionaryBatch(this._dictionaryIndex++))}return yield n.open.call(this,t)})}readRecordBatch(t){var n;return W(this,void 0,void 0,function*(){if(this.closed)return null;this._footer||(yield this.open());const r=(n=this._footer)===null||n===void 0?void 0:n.getRecordBatch(t);if(r&&(yield this._handle.seek(r.offset))){const i=yield this._reader.readMessage(ue.RecordBatch);if(i!=null&&i.isRecordBatch()){const s=i.header(),o=yield this._reader.readMessageBody(i.bodyLength);return this._loadRecordBatch(s,o)}}return null})}_readDictionaryBatch(t){var n;return W(this,void 0,void 0,function*(){const r=(n=this._footer)===null||n===void 0?void 0:n.getDictionaryBatch(t);if(r&&(yield this._handle.seek(r.offset))){const i=yield this._reader.readMessage(ue.DictionaryBatch);if(i!=null&&i.isDictionaryBatch()){const s=i.header(),o=yield this._reader.readMessageBody(i.bodyLength),a=this._loadDictionaryBatch(s,o);this.dictionaries.set(s.id,a)}}})}_readFooter(){return W(this,void 0,void 0,function*(){const{_handle:t}=this;t._pending&&(yield t._pending);const n=t.size-pO,r=yield t.readInt32(n),i=yield t.readAt(n-r,r);return WI.decode(i)})}_readNextMessageAndValidate(t){return W(this,void 0,void 0,function*(){if(this._footer||(yield this.open()),this._footer&&this._recordBatchIndex<this.numRecordBatches){const n=this._footer.getRecordBatch(this._recordBatchIndex);if(n&&(yield this._handle.seek(n.offset)))return yield this._reader.readMessage(t)}return null})}},AW=class extends Mg{constructor(t,n){super(t,n)}_loadVectors(t,n,r){return new Lq(n,t.nodes,t.buffers,this.dictionaries).visitMany(r)}};function bO(e,t){return t&&typeof t.autoDestroy=="boolean"?t.autoDestroy:e.autoDestroy}function*AM(e){const t=Kp.from(e);try{if(!t.open({autoDestroy:!1}).closed)do yield t;while(!t.reset().open().closed)}finally{t.cancel()}}function MM(e){return en(this,arguments,function*(){const n=yield K(Kp.from(e));try{if(!(yield K(n.open({autoDestroy:!1}))).closed)do yield yield K(n);while(!(yield K(n.reset().open())).closed)}finally{yield K(n.cancel())}})}function MW(e){return new Tg(new AW(e))}function $W(e){const t=e.peek(Qp+7&-8);return t&&t.byteLength>=4?JI(t)?new yO(new gO(e.read())):new Tg(new Mg(e)):new Tg(new Mg(function*(){}()))}function NW(e){return W(this,void 0,void 0,function*(){const t=yield e.peek(Qp+7&-8);return t&&t.byteLength>=4?JI(t)?new yO(new gO(yield e.read())):new Ag(new $g(e)):new Ag(new $g(function(){return en(this,arguments,function*(){})}()))})}function DW(e){return W(this,void 0,void 0,function*(){const{size:t}=yield e.stat(),n=new _g(e,t);return t>=IW&&JI(yield n.readAt(0,Qp+7&-8))?new EW(new TW(n)):new Ag(new $g(n))})}function vO(e){const t=Kp.from(e);return Jh(t)?t.then(n=>vO(n)):t.isAsync()?t.readAll().then(n=>new sp(n)):new sp(t.readAll())}function kW(e="ws://localhost:3000/"){const t=[];let n=!1,r=null,i;const s={open(){n=!0,l()},close(){for(n=!1,r=null,i=null;t.length;)t.shift().reject("Socket closed")},error(c){if(r){const{reject:u}=r;r=null,l(),u(c)}else console.error("WebSocket error: ",c)},message({data:c}){if(r){const{query:u,resolve:f,reject:d}=r;if(r=null,l(),typeof c=="string"){const h=JSON.parse(c);h.error?d(h.error):f(h)}else if(u.type==="exec")f();else if(u.type==="arrow")f(vO(c.arrayBuffer()));else throw new Error(`Unexpected socket data: ${c}`)}else console.log("WebSocket message: ",c)}};function o(){i=new WebSocket(e);for(const c in s)i.addEventListener(c,s[c])}function a(c,u,f){i==null&&o(),t.push({query:c,resolve:u,reject:f}),n&&!r&&l()}function l(){t.length&&(r=t.shift(),i.send(JSON.stringify(r.query)))}return{get connected(){return n},query(c){return new Promise((u,f)=>a(c,u,f))}}}class Ra{constructor(t,n){t&&(this.table=String(t)),n&&(this.column=n)}get columns(){return this.column?[this.column]:[]}toString(){const{table:t,column:n}=this;if(n){const r=n.startsWith("*")?n:`"${n}"`;return`${t?`${$M(t)}.`:""}${r}`}else return t?$M(t):"NULL"}}function $M(e){return e.split(".").map(n=>`"${n}"`).join(".")}function OW(e,t){return e instanceof Ra&&e.column===t}function Me(e){return typeof e=="string"?t3(e):e}function dm(e){return typeof e=="string"?FW(e):e}function FW(e){return new Ra(e)}function t3(e,t){return arguments.length===1&&(t=e,e=null),new Ra(e,t)}function Zp(e){switch(typeof e){case"boolean":return e?"TRUE":"FALSE";case"string":return`'${e}'`;case"number":return Number.isFinite(e)?String(e):"NULL";default:if(e==null)return"NULL";if(e instanceof Date){const t=+e;if(Number.isNaN(t))return"NULL";const n=e.getUTCFullYear(),r=e.getUTCMonth(),i=e.getUTCDate();return t===Date.UTC(n,r,i)?`MAKE_DATE(${n}, ${r+1}, ${i})`:`EPOCH_MS(${t})`}else return e instanceof RegExp?`'${e.source}'`:String(e)}}const Sf=e=>typeof(e==null?void 0:e.addEventListener)=="function";function wO(e){return e instanceof Pb}class Pb{constructor(t,n,r){this._expr=Array.isArray(t)?t:[t],this._deps=n||[],this.annotate(r);const i=this._expr.filter(s=>Sf(s));i.length>0?(this._params=Array.from(new Set(i)),this._params.forEach(s=>{s.addEventListener("value",()=>{var o;return BW(this,(o=this.map)==null?void 0:o.get("value"))})})):this.addEventListener=void 0}get value(){return this}get columns(){const{_params:t,_deps:n}=this;if(t){const r=new Set(t.flatMap(i=>{var o;const s=(o=i.value)==null?void 0:o.columns;return Array.isArray(s)?s:[]}));if(r.size){const i=new Set(n);return r.forEach(s=>i.add(s)),Array.from(i)}}return n}get column(){return this._deps.length?this._deps[0]:this.columns[0]}annotate(...t){return Object.assign(this,...t)}toString(){return this._expr.map(t=>Sf(t)&&!wO(t)?Zp(t.value):t).join("")}addEventListener(t,n){const r=this.map||(this.map=new Map);(r.get(t)||(r.set(t,new Set),r.get(t))).add(n)}}function BW(e,t){if(t!=null&&t.size)return Promise.allSettled(Array.from(t,n=>n(e)))}function _O(e,t){const n=[e[0]],r=new Set,i=t.length;for(let s=0,o=0;s<i;){const a=t[s];Sf(a)?n[++o]=a:(Array.isArray(a==null?void 0:a.columns)&&a.columns.forEach(c=>r.add(c)),n[o]+=typeof a=="string"?a:Zp(a));const l=e[++s];Sf(n[o])?n[++o]=l:n[o]+=l}return{spans:n,cols:Array.from(r)}}function G(e,...t){const{spans:n,cols:r}=_O(e,t);return new Pb(n,r)}function RW(e){const t=Me(e);return G`${t} DESC NULLS LAST`.annotate({label:t==null?void 0:t.label,desc:!0})}const Jp=e=>({value:e,toString:()=>Zp(e)});function zb(e){var t;e(this.op,this),(t=this.children)==null||t.forEach(n=>n.visit(e))}function SO(e,t){const n=t.filter(i=>i!=null).map(Me),r=n.map((i,s)=>s?` ${e} `:"");return t.length&&r.push(""),G(r,...n).annotate({op:e,children:n,visit:zb})}const pc=(...e)=>SO("AND",e.flat()),xO=(...e)=>SO("OR",e.flat()),IO=e=>t=>G`(${Me(t)} ${e})`.annotate({op:e,a:t,visit:zb}),EO=IO("IS NULL"),Ng=IO("IS NOT NULL"),td=e=>(t,n)=>G`(${Me(t)} ${e} ${Me(n)})`.annotate({op:e,a:t,b:n,visit:zb}),e3=td("="),LW=td("<>"),Dg=td("<"),TO=td(">"),kg=td("<="),CW=td("IS NOT DISTINCT FROM");function UW(e,t,n,r){t=Me(t);const i=e.startsWith("NOT ")?"NOT ":"";return(n?r?G`${i}(${n[0]} <= ${t} AND ${t} < ${n[1]})`:G`(${t} ${e} ${n[0]} AND ${n[1]})`:G``).annotate({op:e,visit:zb,field:t,range:n})}const Rr=(e,t,n)=>UW("BETWEEN",e,t,n);function Og(e,t){return Array.from({length:e},()=>t)}function jb(e,t){return(...n)=>{const r=n.map(Me),i=t?`::${t}`:"";return(r.length?G([`${e}(`,...Og(r.length-1,", "),`)${i}`],...r):G`${e}()${i}`).annotate({func:e,args:r})}}const PW=jb("REGEXP_MATCHES"),zW=jb("CONTAINS"),jW=jb("PREFIX"),VW=jb("SUFFIX");class Ol extends Pb{constructor(t,n,r,i,s="",o="",a=""){let l;if(i&&!(s||o||a))l=i?G`${n} OVER "${i}"`:G`${n} OVER ()`;else{const d=s&&o?" ":"",h=(s||o)&&a?" ":"";l=G`${n} OVER (${i?`"${i}" `:""}${s}${d}${o}${h}${a})`}r&&(l=G`(${l})::${r}`);const{_expr:u,_deps:f}=l;super(u,f,{window:t,func:n,type:r,name:i,group:s,order:o,frame:a})}get basis(){return this.column}get label(){const{func:t}=this;return t.label??t.toString()}over(t){const{window:n,func:r,type:i,group:s,order:o,frame:a}=this;return new Ol(n,r,i,t,s,o,a)}partitionby(...t){const n=t.flat().filter(u=>u).map(Me),r=G(["PARTITION BY ",Og(n.length-1,", "),""],...n),{window:i,func:s,type:o,name:a,order:l,frame:c}=this;return new Ol(i,s,o,a,r,l,c)}orderby(...t){const n=t.flat().filter(u=>u).map(Me),r=G(["ORDER BY ",Og(n.length-1,", "),""],...n),{window:i,func:s,type:o,name:a,group:l,frame:c}=this;return new Ol(i,s,o,a,l,r,c)}rows(t){const n=NM("ROWS",t),{window:r,func:i,type:s,name:o,group:a,order:l}=this;return new Ol(r,i,s,o,a,l,n)}range(t){const n=NM("RANGE",t),{window:r,func:i,type:s,name:o,group:a,order:l}=this;return new Ol(r,i,s,o,a,l,n)}}function NM(e,t){if(Sf(t)){const n=G`${t}`;return n.toString=()=>`${e} ${DM(t.value)}`,n}return`${e} ${DM(t)}`}function DM(e){const[t,n]=e,r=t===0?"CURRENT ROW":Number.isFinite(t)?`${Math.abs(t)} PRECEDING`:"UNBOUNDED PRECEDING",i=n===0?"CURRENT ROW":Number.isFinite(n)?`${Math.abs(n)} FOLLOWING`:"UNBOUNDED FOLLOWING";return`BETWEEN ${r} AND ${i}`}class Eh extends Pb{constructor(t,n,r,i,s){n=(n||[]).map(Me);const{strings:o,exprs:a}=YW(t,n,r,i,s),{spans:l,cols:c}=_O(o,a);super(l,c,{aggregate:t,args:n,type:r,isDistinct:i,filter:s})}get basis(){return this.column}get label(){const{aggregate:t,args:n,isDistinct:r}=this,i=r?"DISTINCT"+(n.length?" ":""):"",s=n.length?`(${i}${n.map(qW).join(", ")})`:"";return`${t.toLowerCase()}${s}`}distinct(){const{aggregate:t,args:n,type:r,filter:i}=this;return new Eh(t,n,r,!0,i)}where(t){const{aggregate:n,args:r,type:i,isDistinct:s}=this;return new Eh(n,r,i,s,t)}window(){const{aggregate:t,args:n,type:r,isDistinct:i}=this,s=new Eh(t,n,null,i);return new Ol(t,s,r)}partitionby(...t){return this.window().partitionby(...t)}orderby(...t){return this.window().orderby(...t)}rows(t,n){return this.window().rows(t,n)}range(t,n){return this.window().range(t,n)}}function YW(e,t,n,r,i){const s=`)${n?`::${n}`:""}`;let o=[`${e}(${r?"DISTINCT ":""}`],a=[];return t.length?(o=o.concat([...Og(t.length-1,", "),`${s}${i?" FILTER (WHERE ":""}`,...i?[")"]:[]]),a=[...t,...i?[i]:[]]):o[0]+="*"+s,{exprs:a,strings:o}}function qW(e){const t=Zp(e);return t&&t.startsWith('"')&&t.endsWith('"')?t.slice(1,-1):t}function wi(e,t){return(...n)=>new Eh(e,n,t)}const hr=wi("COUNT","INTEGER"),op=wi("MAX"),ap=wi("MIN"),ed=wi("SUM","DOUBLE"),WW=wi("REGR_INTERCEPT"),HW=wi("REGR_SLOPE"),GW=wi("REGR_COUNT"),XW=wi("REGR_SYY"),QW=wi("REGR_SXX"),KW=wi("REGR_AVGX"),kM=wi("ARG_MIN"),OM=wi("ARG_MAX");function ZW(e,t){const n=Me(e),r=G`CAST(${n} AS ${t})`;return Object.defineProperty(r,"label",{enumerable:!0,get(){return e.label}}),Object.defineProperty(r,"aggregate",{enumerable:!0,get(){return e.aggregate||!1}}),r}const FM=e=>ZW(e,"DOUBLE"),AO=e=>{const t=Me(e);return G`(1000 * (epoch(${t}) - second(${t})) + millisecond(${t}))::DOUBLE`},JW=e=>{const t=Me(e);return G`MAKE_DATE(2012, MONTH(${t}), DAY(${t}))`.annotate({label:"date"})};class Lt{static select(...t){return new Lt().select(...t)}static from(...t){return new Lt().from(...t)}static with(...t){return new Lt().with(...t)}static union(...t){return new Cl("UNION",t.flat())}static unionAll(...t){return new Cl("UNION ALL",t.flat())}static intersect(...t){return new Cl("INTERSECT",t.flat())}static except(...t){return new Cl("EXCEPT",t.flat())}constructor(){this.query={with:[],select:[],from:[],where:[],groupby:[],having:[],window:[],qualify:[],orderby:[]}}clone(){const t=new Lt;return t.query={...this.query},t}with(...t){const{query:n}=this;if(t.length===0)return n.with;{const r=[],i=(s,o)=>{const a=o.clone();a.cteFor=this,r.push({as:s,query:a})};return t.flat().forEach(s=>{if(s!=null)if(s.as&&s.query)i(s.as,s.query);else for(const o in s)i(o,s[o])}),n.with=n.with.concat(r),this}}select(...t){const{query:n}=this;if(t.length===0)return n.select;{const r=[];for(const i of t.flat())if(i!=null)if(typeof i=="string")r.push({as:i,expr:Me(i)});else if(i instanceof Ra)r.push({as:i.column,expr:i});else if(Array.isArray(i))r.push({as:i[0],expr:i[1]});else for(const s in i)r.push({as:l0(s),expr:Me(i[s])});return n.select=n.select.concat(r),this}}$select(...t){return this.query.select=[],this.select(...t)}distinct(t=!0){return this.query.distinct=!!t,this}from(...t){const{query:n}=this;if(t.length===0)return n.from;{const r=[];return t.flat().forEach(i=>{if(i!=null)if(typeof i=="string")r.push({as:i,from:dm(i)});else if(i instanceof Ra)r.push({as:i.table,from:i});else if(Dw(i)||wO(i))r.push({from:i});else if(Array.isArray(i))r.push({as:l0(i[0]),from:dm(i[1])});else for(const s in i)r.push({as:l0(s),from:dm(i[s])})}),n.from=n.from.concat(r),this}}$from(...t){return this.query.from=[],this.from(...t)}sample(t,n){const{query:r}=this;if(arguments.length===0)return r.sample;{let i=t;return typeof t=="number"&&(i=t>0&&t<1?{perc:100*t,method:n}:{rows:Math.round(t),method:n}),r.sample=i,this}}where(...t){const{query:n}=this;return t.length===0?n.where:(n.where=n.where.concat(t.flat().filter(r=>r)),this)}$where(...t){return this.query.where=[],this.where(...t)}groupby(...t){const{query:n}=this;return t.length===0?n.groupby:(n.groupby=n.groupby.concat(t.flat().filter(r=>r).map(Me)),this)}$groupby(...t){return this.query.groupby=[],this.groupby(...t)}having(...t){const{query:n}=this;return t.length===0?n.having:(n.having=n.having.concat(t.flat().filter(r=>r)),this)}window(...t){const{query:n}=this;if(t.length===0)return n.window;{const r=[];return t.flat().forEach(i=>{if(i!=null)for(const s in i)r.push({as:l0(s),expr:i[s]})}),n.window=n.window.concat(r),this}}qualify(...t){const{query:n}=this;return t.length===0?n.qualify:(n.qualify=n.qualify.concat(t.flat().filter(r=>r)),this)}orderby(...t){const{query:n}=this;return t.length===0?n.orderby:(n.orderby=n.orderby.concat(t.flat().filter(r=>r).map(Me)),this)}limit(t){const{query:n}=this;return arguments.length===0?n.limit:(n.limit=Number.isFinite(t)?t:void 0,this)}offset(t){const{query:n}=this;return arguments.length===0?n.offset:(n.offset=Number.isFinite(t)?t:void 0,this)}get subqueries(){const{query:t,cteFor:n}=this,r=((n==null?void 0:n.query)||t).with,i=r==null?void 0:r.reduce((o,{as:a,query:l})=>(o[a]=l,o),{}),s=[];return t.from.forEach(({from:o})=>{if(Dw(o))s.push(o);else if(i[o.table]){const a=i[o.table];s.push(a)}}),s}toString(){const{select:t,distinct:n,from:r,sample:i,where:s,groupby:o,having:a,window:l,qualify:c,orderby:u,limit:f,offset:d,with:h}=this.query,p=[];if(h.length){const v=h.map(({as:y,query:m})=>`"${y}" AS (${m})`);p.push(`WITH ${v.join(", ")}`)}const g=t.map(({as:v,expr:y})=>OW(y,v)&&!y.table?`${y}`:`${y} AS "${v}"`);if(p.push(`SELECT${n?" DISTINCT":""} ${g.join(", ")}`),r.length){const v=r.map(({as:y,from:m})=>{const b=Dw(m)?`(${m})`:`${m}`;return!y||y===m.table?b:`${b} AS "${y}"`});p.push(`FROM ${v.join(", ")}`)}if(s.length){const v=s.map(String).filter(y=>y).join(" AND ");v&&p.push(`WHERE ${v}`)}if(i){const{rows:v,perc:y,method:m,seed:b}=i,w=v?`${v} ROWS`:`${y} PERCENT`,S=m?` (${m}${b!=null?`, ${b}`:""})`:"";p.push(`USING SAMPLE ${w}${S}`)}if(o.length&&p.push(`GROUP BY ${o.join(", ")}`),a.length){const v=a.map(String).filter(y=>y).join(" AND ");v&&p.push(`HAVING ${v}`)}if(l.length){const v=l.map(({as:y,expr:m})=>`"${y}" AS (${m})`);p.push(`WINDOW ${v.join(", ")}`)}if(c.length){const v=c.map(String).filter(y=>y).join(" AND ");v&&p.push(`QUALIFY ${v}`)}return u.length&&p.push(`ORDER BY ${u.join(", ")}`),Number.isFinite(f)&&p.push(`LIMIT ${f}`),Number.isFinite(d)&&p.push(`OFFSET ${d}`),p.join(" ")}}class Cl{constructor(t,n){this.op=t,this.queries=n.map(r=>r.clone()),this.query={orderby:[]}}clone(){const t=new Cl(this.op,this.queries);return t.query={...this.query},t}orderby(...t){const{query:n}=this;return t.length===0?n.orderby:(n.orderby=n.orderby.concat(t.flat().filter(r=>r).map(Me)),this)}limit(t){const{query:n}=this;return arguments.length===0?n.limit:(n.limit=Number.isFinite(t)?t:void 0,this)}offset(t){const{query:n}=this;return arguments.length===0?n.offset:(n.offset=Number.isFinite(t)?t:void 0,this)}get subqueries(){const{queries:t,cteFor:n}=this;return n&&t.forEach(r=>r.cteFor=n),t}toString(){const{op:t,queries:n,query:{orderby:r,limit:i,offset:s}}=this,o=[n.join(` ${t} `)];return r.length&&o.push(`ORDER BY ${r.join(", ")}`),Number.isFinite(i)&&o.push(`LIMIT ${i}`),Number.isFinite(s)&&o.push(`OFFSET ${s}`),o.join(" ")}}function Dw(e){return e instanceof Lt||e instanceof Cl}function l0(e){return tH(e)?e.slice(1,-1):e}function tH(e){return e[0]==='"'&&e[e.length-1]==='"'}function MO(e,t,{replace:n=!1,temp:r=!0,view:i=!1}={}){return"CREATE"+(n?" OR REPLACE ":" ")+(r?"TEMP ":"")+(i?"VIEW":"TABLE")+(n?" ":" IF NOT EXISTS ")+e+" AS "+t}function eH(e,{columns:t=Object.keys((e==null?void 0:e[0])||{})}={}){let n=[];if(Array.isArray(t)?(n=t,t=n.reduce((i,s)=>(i[s]=s,i),{})):t&&(n=Object.keys(t)),!n.length)throw new Error("Can not create table from empty column set.");const r=[];for(const i of e){const s=n.map(o=>`${Zp(i[o])} AS "${t[o]}"`);r.push(`(SELECT ${s.join(", ")})`)}return r.join(" UNION ALL ")}function nH(e,t,n={}){const{select:r=["*"],...i}=n,s=eH(t),o=r.length===1&&r[0]==="*"?s:`SELECT ${r} FROM ${s}`;return MO(e,o,i)}function rH(e){switch(e){case"BIGINT":case"HUGEINT":case"INTEGER":case"SMALLINT":case"TINYINT":case"UBIGINT":case"UINTEGER":case"USMALLINT":case"UTINYINT":case"DOUBLE":case"FLOAT":case"REAL":case"DECIMAL":return"number";case"DATE":case"TIMESTAMP":case"TIMESTAMPTZ":case"TIME":return"date";case"BOOLEAN":return"boolean";case"VARCHAR":case"UUID":return"string";case"LIST":return"array";case"BLOB":case"STRUCT":case"MAP":return"object";default:throw new Error(`Unsupported type: ${e}`)}}const iH="count",sH="nulls",oH="max",aH="min",lH="distinct",cH={[iH]:hr,[lH]:e=>hr(e).distinct(),[oH]:op,[aH]:ap,[sH]:e=>hr().where(EO(e))};function uH({table:e,column:t},n){return Lt.from(e).select(n.map(r=>[r,cH[r](t)]))}const $O=()=>Object.create(null);class fH{constructor(t){this.mc=t,this.clear()}clear(){this.tables=$O()}tableInfo(t){const n=this.tables;if(n[t])return n[t];const r=dH(this.mc,t).catch(i=>{throw n[t]=null,i});return n[t]=r}async fieldInfo({table:t,column:n,stats:r}){const s=(await this.tableInfo(t))[n];if(s==null)return;if(!(r!=null&&r.length))return s;const o=await this.mc.query(uH(s,r),{persist:!0}),a={...s,...Array.from(o)[0]};for(const l in a){const c=a[l];typeof c=="bigint"&&(a[l]=Number(c))}return a}async queryFields(t){const n=await hH(this,t);return(await Promise.all(n.map(i=>this.fieldInfo(i)))).filter(i=>i)}}async function dH(e,t){const n=await e.query(`DESCRIBE ${dm(t)}`,{type:"json",cache:!1}),r=$O();for(const i of n)r[i.column_name]={table:t,column:i.column_name,sqlType:i.column_type,type:rH(i.column_type),nullable:i.null==="YES"};return r}async function hH(e,t){return t.length===1&&t[0].column==="*"?Object.values(await e.tableInfo(t[0].table)):t}function pH(e){let t=2166136261;for(let n=0,r=e.length;n<r;++n){const i=e.charCodeAt(n),s=i&65280;s&&(t=BM(t^s>>8)),t=BM(t^i&255)}return yH(t)}function BM(e){return e+(e<<1)+(e<<4)+(e<<7)+(e<<8)+(e<<24)}function yH(e){return e+=e<<13,e^=e>>>7,e+=e<<3,e^=e>>>17,e+=e<<5,e&4294967295}const NO=e=>e;class mH{constructor(t,{selection:n,temp:r=!0}){this.mc=t,this.selection=n,this.temp=r,this.reset()}reset(){this.enabled=!1,this.clients=null,this.indices=null,this.activeView=null}clear(){this.indices&&(this.mc.cancel(Array.from(this.indices.values(),t=>t.result)),this.indices=null)}index(t,n){var c,u;if(this.clients!==t){const f=Array.from(t,LM),d=(c=f[0])==null?void 0:c.from;this.enabled=f.every(h=>h&&h.from===d),this.clients=t,this.activeView=null,this.clear()}if(!this.enabled)return!1;n=n||this.selection.active;const{source:r}=n;if(r&&r===((u=this.activeView)==null?void 0:u.source))return!0;if(this.clear(),!r)return!1;const i=this.activeView=gH(n);if(!i)return!1;this.mc.logger().warn("DATA CUBE INDEX CONSTRUCTION");const s=this.selection.remove(r),o=this.indices=new Map,{mc:a,temp:l}=this;for(const f of t){if(s.skip(f,n))continue;const d=LM(f),h=f.query(s.predicate(f)).select({...i.columns,...d.count}).groupby(Object.keys(i.columns)),[p]=h.subqueries;if(p){const w=Object.values(i.columns).map(S=>S.columns[0]);wH(p,w)}const g=h.orderby();h.query.orderby=[];const v=h.toString(),m=`cube_index_${(pH(v)>>>0).toString(16)}`,b=a.exec(MO(m,v,{temp:l}));o.set(f,{table:m,result:b,order:g,...d})}}async update(){const{clients:t,selection:n,activeView:r}=this,i=r.predicate(n.active.predicate);return Promise.all(Array.from(t).map(s=>this.updateClient(s,i)))}async updateClient(t,n){const r=this.indices.get(t);if(!r)return;n||(n=this.activeView.predicate(this.selection.active.predicate));const{table:i,dims:s,aggr:o,order:a=[]}=r,l=Lt.select(s,o).from(i).groupby(s).where(n).orderby(a);return this.mc.updateClient(t,l)}}function gH(e){var l;const{source:t,schema:n}=e;let r=(l=e.predicate)==null?void 0:l.columns;if(!n||!r)return null;const{type:i,scales:s,pixelSize:o=1}=n;let a;if(i==="interval"&&s){const c=s.map(u=>bH(u,o));if(c.some(u=>u==null))return null;c.length===1?(a=u=>u?Rr("active0",u.range.map(c[0])):[],r={active0:c[0](e.predicate.field)}):(a=u=>u?pc(u.children.map(({range:f},d)=>Rr(`active${d}`,f.map(c[d])))):[],r=Object.fromEntries(e.predicate.children.map((u,f)=>[`active${f}`,c[f](u.field)])))}else if(i==="point")a=NO,r=Object.fromEntries(r.map(c=>[c.toString(),c]));else return null;return{source:t,columns:r,predicate:a}}function bH(e,t){const{type:n,domain:r,range:i}=e;let s,o;switch(n){case"linear":s=NO,o=Me;break;case"log":s=Math.log,o=a=>G`LN(${Me(a)})`;break;case"symlog":s=a=>Math.sign(a)*Math.log1p(Math.abs(a)),o=a=>(a=Me(a),G`SIGN(${a}) * LN(1 + ABS(${a}))`);break;case"sqrt":s=Math.sqrt,o=a=>G`SQRT(${Me(a)})`;break;case"utc":case"time":s=a=>+a,o=a=>a instanceof Date?+a:AO(Me(a));break}return s?vH(r,i,t,s,o):null}function vH(e,t,n,r,i){const s=r(Math.min(e[0],e[1])),o=r(Math.max(e[0],e[1])),a=Math.abs(r(t[1])-r(t[0]))/(o-s)/n,l=n===1?"":`${n}::INTEGER * `;return c=>G`${l}FLOOR(${a}::DOUBLE * (${i(c)} - ${s}::DOUBLE))::INTEGER`}const RM={from:NaN};function LM(e){if(!e.filterIndexable)return RM;const t=e.query(),n=J2(t);if(!n||!t.groupby)return RM;const r=new Set(t.groupby().map(a=>a.column)),i=[],s=[];let o;for(const{as:a,expr:{aggregate:l}}of t.select())switch(l==null?void 0:l.toUpperCase()){case"COUNT":case"SUM":i.push({[a]:G`SUM("${a}")::DOUBLE`});break;case"AVG":o="_count_",i.push({[a]:G`(SUM("${a}" * ${o}) / SUM(${o}))::DOUBLE`});break;case"MAX":i.push({[a]:G`MAX("${a}")`});break;case"MIN":i.push({[a]:G`MIN("${a}")`});break;default:if(r.has(a))s.push(a);else return null}return{aggr:i,dims:s,count:o?{[o]:G`COUNT(*)`}:{},from:n}}function J2(e){const t=e.subqueries;if(e.select){const r=e.from();if(!r.length)return;if(t.length===0)return r[0].from.table}const n=J2(t[0]);for(let r=1;r<t.length;++r){const i=J2(t[r]);if(i!==void 0&&i!==n)return NaN}return n}function wH(e,t){const n=new Set,r=i=>{n.has(i)||(n.add(i),i.select&&i.from().length&&i.select(t),i.subqueries.forEach(r))};r(e)}class _H{constructor(t,n,r=!0){this.mc=t,this.selection=n,this.clients=new Set,this.indexer=r?new mH(this.mc,{...r,selection:n}):null;const{value:i,activate:s}=this.handlers={value:()=>this.update(),activate:o=>{var a;return(a=this.indexer)==null?void 0:a.index(this.clients,o)}};n.addEventListener("value",i),n.addEventListener("activate",s)}finalize(){const{value:t,activate:n}=this.handlers;this.selection.removeEventListener("value",t),this.selection.removeEventListener("activate",n)}reset(){var t;(t=this.indexer)==null||t.reset()}add(t){return(this.clients=new Set(this.clients)).add(t),this}remove(t){return this.clients.has(t)&&(this.clients=new Set(this.clients)).delete(t),this}update(){const{mc:t,indexer:n,clients:r,selection:i}=this;return n!=null&&n.index(r)?n.update():SH(t,r,i)}}function SH(e,t,n){return Promise.all(Array.from(t).map(r=>{const i=n.predicate(r);if(i!=null)return e.updateClient(r,r.query(i))}))}function DO(){let e,t;const n=new Promise((r,i)=>{e=r,t=i});return n.fulfill=r=>(e(r),n),n.reject=r=>(t(r),n),n}function xH(e,t,n){let r=[],i=0;function s(){const o=IH(r,t);r=[],i=0;for(const a of o)TH(a,e,n),$H(a,t)}return{add(o,a){o.request.type==="arrow"?(i=i||requestAnimationFrame(()=>s()),r.push({entry:o,priority:a,index:r.length})):e(o,a)}}}function IH(e,t){const n=[],r=new Map;for(const i of e){const{entry:{request:s}}=i,o=EH(s.query,t);if(!r.has(o)){const a=[];n.push(a),r.set(o,a)}r.get(o).push(i)}return n}function EH(e,t){const n=`${e}`;if(e instanceof Lt&&!t.get(n)){if(e.orderby().length||e.where().length||e.qualify().length||e.having().length)return n;const r=e.clone().$select("*"),i=e.groupby();if(i.length){const s={};e.select().forEach(({as:o,expr:a})=>s[o]=a),r.$groupby(i.map(o=>o instanceof Ra&&s[o.column]||o))}return`${r}`}else return n}function TH(e,t,n){if(AH(e))t({request:{type:"arrow",cache:!1,record:!1,query:MH(e,n)},result:e.result=DO()});else for(const{entry:r,priority:i}of e)t(r,i)}function AH(e){if(e.length>1){const t=`${e[0].entry.request.query}`;for(let n=1;n<e.length;++n)if(t!==`${e[n].entry.request.query}`)return!0}return!1}function MH(e,t){const n=e.maps=[],r=new Map;for(const o of e){const{query:a}=o.entry.request,l=[];n.push(l);for(const{as:c,expr:u}of a.select()){const f=`${u}`;r.has(f)||r.set(f,[`col${r.size}`,u]);const[d]=r.get(f);l.push([d,c])}t(`${a}`)}const i=e[0].entry.request.query.clone(),s=i.groupby();if(s.length){const o={};e.maps[0].forEach(([a,l])=>o[l]=a),i.$groupby(s.map(a=>a instanceof Ra&&o[a.column]||a))}return i.$select(Array.from(r.values()))}async function $H(e,t){const{maps:n,result:r}=e;if(!n)return;let i;try{i=await r}catch(s){for(const{entry:o}of e)o.result.reject(s);return}e.forEach(({entry:s},o)=>{const{request:a,result:l}=s,c=NH(i,n[o]);a.cache&&t.set(String(a.query),c),l.fulfill(c)})}function NH(e,t){if(t){const n={};for(const[r,i]of t)n[i]=e.getChild(r);return new e.constructor(n)}else return e}const DH=typeof requestIdleCallback<"u"?requestIdleCallback:setTimeout,kH=()=>({get:()=>{},set:(e,t)=>t,clear:()=>{}});function OH({max:e=1e3,ttl:t=3*60*60*1e3}={}){let n=new Map;function r(){const i=performance.now()-t;let s=null,o=1/0;for(const[a,l]of n){const{last:c}=l;c<o&&(s=a,o=c),i>c&&n.delete(a)}s&&n.delete(s)}return{get(i){const s=n.get(i);if(s)return s.last=performance.now(),s.value},set(i,s){return n.set(i,{last:performance.now(),value:s}),n.size>e&&DH(r),s},clear(){n=new Map}}}function FH(e){const t=Array.from({length:e},()=>({head:null,tail:null}));return{isEmpty(){return t.every(n=>!n.head)},insert(n,r){const i=t[r];if(!i)throw new Error(`Invalid queue priority rank: ${r}`);const s={item:n,next:null};i.head===null?i.head=i.tail=s:i.tail=i.tail.next=s},remove(n){for(const r of t){let{head:i,tail:s}=r;for(let o=null,a=i;a;o=a,a=a.next)n(a.item)&&(a===i?i=a.next:o.next=a.next,a===s&&(s=o||i));r.head=i,r.tail=s}},next(){for(const n of t){const{head:r}=n;if(r!==null)return n.head=r.next,n.tail===r&&(n.tail=null),r.item}}}}const oa={High:0,Normal:1,Low:2};function BH(){const e=FH(3);let t,n,r,i=[],s=null,o;function a(){if(s||e.isEmpty())return;const{request:f,result:d}=e.next();s=u(f,d),s.finally(()=>{s=null,a()})}function l(f,d=oa.Normal){e.insert(f,d),a()}function c(f){i.length&&f&&i.forEach(d=>d.add(f))}async function u(f,d){try{const{query:h,type:p,cache:g=!1,record:v=!0,options:y}=f,m=h?`${h}`:null;if(v&&c(m),g){const S=n.get(m);if(S){r.debug("Cache"),d.fulfill(S);return}}const b=performance.now(),w=await t.query({type:p,sql:m,...y});g&&n.set(m,w),r.debug(`Request: ${(performance.now()-b).toFixed(1)}`),d.fulfill(w)}catch(h){d.reject(h)}}return{cache(f){return f!==void 0?n=f===!0?OH():f||kH():n},logger(f){return f?r=f:r},connector(f){return f?t=f:t},consolidate(f){f&&!o?o=xH(l,n,c):!f&&o&&(o=null)},request(f,d=oa.Normal){const h=DO(),p={request:f,result:h};return o?o.add(p,d):l(p,d),h},cancel(f){const d=new Set(f);e.remove(({result:h})=>d.has(h))},clear(){e.remove(({result:f})=>(f.reject("Cleared"),!0))},record(){let f=[];const d={add(h){f.push(h)},reset(){f=[]},snapshot(){return f.slice()},stop(){return i=i.filter(h=>h!==d),f}};return i.push(d),d}}}function RH(){return{debug(){},info(){},log(){},warn(){},error(){}}}let c0;function Xn(e){return e?c0=e:c0==null&&(c0=new LH),c0}class LH{constructor(t=kW(),n={}){this.catalog=new fH(this),this.manager=n.manager||BH(),this.logger(n.logger||console),this.configure(n),this.databaseConnector(t),this.clear()}logger(t){return arguments.length&&(this._logger=t||RH(),this.manager.logger(this._logger)),this._logger}configure({cache:t=!0,consolidate:n=!0,indexes:r=!0}){this.manager.cache(t),this.manager.consolidate(n),this.indexes=r}clear({clients:t=!0,cache:n=!0,catalog:r=!1}={}){var i,s;this.manager.clear(),t&&((i=this.clients)==null||i.forEach(o=>this.disconnect(o)),(s=this.filterGroups)==null||s.forEach(o=>o.finalize()),this.clients=new Set,this.filterGroups=new Map),n&&this.manager.cache().clear(),r&&this.catalog.clear()}databaseConnector(t){return this.manager.connector(t)}cancel(t){this.manager.cancel(t)}exec(t,{priority:n=oa.Normal}={}){return this.manager.request({type:"exec",query:t},n)}query(t,{type:n="arrow",cache:r=!0,priority:i=oa.Normal,...s}={}){return this.manager.request({type:n,query:t,cache:r,options:s},i)}prefetch(t,n={}){return this.query(t,{...n,cache:!0,priority:oa.Low})}createBundle(t,n,r=oa.Low){const i={name:t,queries:n};return this.manager.request({type:"create-bundle",options:i},r)}loadBundle(t,n=oa.High){const r={name:t};return this.manager.request({type:"load-bundle",options:r},n)}updateClient(t,n,r=oa.Normal){return t.queryPending(),this.query(n,{priority:r}).then(i=>t.queryResult(i).update(),i=>{t.queryError(i),this._logger.error(i)})}requestQuery(t,n){var r;return(r=this.filterGroups.get(t.filterBy))==null||r.reset(),n?this.updateClient(t,n):t.update()}async connect(t){const{catalog:n,clients:r,filterGroups:i,indexes:s}=this;if(r.has(t))throw new Error("Client already connected.");r.add(t);const o=t.fields();o!=null&&o.length&&t.fieldInfo(await n.queryFields(o));const a=t.filterBy;if(a)if(i.has(a))i.get(a).add(t);else{const l=new _H(this,a,s);i.set(a,l.add(t))}t.requestQuery()}disconnect(t){var i;const{clients:n,filterGroups:r}=this;n.has(t)&&(n.delete(t),(i=r.get(t.filterBy))==null||i.remove(t))}}const CM={};function kO(e,t=!1){let n,r,i=CM;function s(c){n=e(c).then(()=>{if(r){const{value:u}=r;r=null,s(u)}else n=null})}function o(c){r={event:c}}function a(c){n?o(c):s(c)}function l(c){i!==c&&requestAnimationFrame(()=>{const u=i;i=CM,a(u)}),i=c}return t?l:a}class ty{constructor(t){this._filterBy=t,this._requestUpdate=kO(()=>this.requestQuery(),!0)}get filterBy(){return this._filterBy}get filterIndexable(){return!0}fields(){return null}fieldInfo(){return this}query(){return null}queryPending(){return this}queryResult(){return this}queryError(t){return console.error(t),this}requestQuery(t){var r;const n=t||this.query((r=this.filterBy)==null?void 0:r.predicate(this));return Xn().requestQuery(this,n)}requestUpdate(){this._requestUpdate()}update(){return this}}class CH{constructor(){this._callbacks=new Map}addEventListener(t,n){this._callbacks.has(t)||this._callbacks.set(t,{callbacks:new Set,pending:null,queue:new UH}),this._callbacks.get(t).callbacks.add(n)}removeEventListener(t,n){const r=this._callbacks.get(t);r&&r.callbacks.delete(n)}willEmit(t,n){return n}emitQueueFilter(){return null}cancel(t){const n=this._callbacks.get(t);n==null||n.queue.clear()}emit(t,n){const r=this._callbacks.get(t)||{};if(r.pending)r.queue.enqueue(n,this.emitQueueFilter(t,n));else{const i=this.willEmit(t,n),{callbacks:s,queue:o}=r;if(s!=null&&s.size){const a=Promise.allSettled(Array.from(s,l=>l(i))).then(()=>{r.pending=null,o.isEmpty()||this.emit(t,o.dequeue())});r.pending=a}}}}class UH{constructor(){this.clear()}clear(){this.next=null}isEmpty(){return!this.next}enqueue(t,n){const r={value:t};if(n&&this.next){let i=this;for(;i.next;)n(i.next.value)?i=i.next:i.next=i.next.next;i.next=r}else this.next=r}dequeue(){const{next:t}=this;return this.next=t==null?void 0:t.next,t==null?void 0:t.value}}function OO(e,t){return e===t?!1:e instanceof Date&&t instanceof Date?+e!=+t:Array.isArray(e)&&Array.isArray(t)?PH(e,t):!0}function PH(e,t){if(e.length!==t.length)return!0;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!0;return!1}function $a(e){return e instanceof pr}class pr extends CH{constructor(t){super(),this._value=t}static value(t){return new pr(t)}static array(t){if(t.some(n=>$a(n))){const n=new pr,r=()=>n.update(t.map(i=>$a(i)?i.value:i));return r(),t.forEach(i=>$a(i)?i.addEventListener("value",r):0),n}return new pr(t)}get value(){return this._value}update(t,{force:n}={}){return OO(this._value,t)||n?this.emit("value",t):this.cancel("value"),this}willEmit(t,n){return t==="value"&&(this._value=n),n}}function yc(e){return e instanceof La}let La=class lu extends pr{static intersect({cross:t=!1}={}){return new lu(new Nd({cross:t}))}static union({cross:t=!1}={}){return new lu(new Nd({cross:t,union:!0}))}static single({cross:t=!1}={}){return new lu(new Nd({cross:t,single:!0}))}static crossfilter(){return new lu(new Nd({cross:!0}))}constructor(t=new Nd){super([]),this._resolved=this._value,this._resolver=t}clone(){const t=new lu(this._resolver);return t._value=t._resolved=this._value,t}remove(t){const n=this.clone();return n._value=n._resolved=n._resolver.resolve(this._resolved,{source:t}),n._value.active={source:t},n}get active(){return this.clauses.active}get value(){var t;return(t=this.active)==null?void 0:t.value}get clauses(){return super.value}get single(){return this._resolver.single}activate(t){this.emit("activate",t)}update(t){return this._resolved=this._resolver.resolve(this._resolved,t,!0),this._resolved.active=t,super.update(this._resolved)}willEmit(t,n){return t==="value"?(this._value=n,this.value):n}emitQueueFilter(t,n){return t==="value"?this._resolver.queueFilter(n):null}skip(t,n){return this._resolver.skip(t,n)}predicate(t,n=!1){const{clauses:r}=this,i=n?null:r.active;return this._resolver.predicate(r,i,t)}};class Nd{constructor({union:t,cross:n,single:r}={}){this.union=!!t,this.cross=!!n,this.single=!!r}resolve(t,n,r=!1){const{source:i,predicate:s}=n,o=t.filter(l=>i!==l.source),a=this.single?[]:o;return this.single&&r&&o.forEach(l=>{var c,u;return(u=(c=l.source)==null?void 0:c.reset)==null?void 0:u.call(c)}),s&&a.push(n),a}skip(t,n){var r;return this.cross&&((r=n==null?void 0:n.clients)==null?void 0:r.has(t))}predicate(t,n,r){const{union:i}=this;if(this.skip(r,n))return;const s=t.filter(o=>!this.skip(r,o)).map(o=>o.predicate);return i&&s.length>1?xO(s):s}queueFilter(t){var n;if(this.cross){const r=(n=t.active)==null?void 0:n.source;return i=>{var s;return((s=i.active)==null?void 0:s.source)!==r}}}}const kw=2,ms=4,yo=4,fe=4,aa=new Int32Array(2),UM=new Float32Array(aa.buffer),PM=new Float64Array(aa.buffer),u0=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;var tS;(function(e){e[e.UTF8_BYTES=1]="UTF8_BYTES",e[e.UTF16_STRING=2]="UTF16_STRING"})(tS||(tS={}));let xf=class FO{constructor(t){this.bytes_=t,this.position_=0,this.text_decoder_=new TextDecoder}static allocate(t){return new FO(new Uint8Array(t))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(t){this.position_=t}capacity(){return this.bytes_.length}readInt8(t){return this.readUint8(t)<<24>>24}readUint8(t){return this.bytes_[t]}readInt16(t){return this.readUint16(t)<<16>>16}readUint16(t){return this.bytes_[t]|this.bytes_[t+1]<<8}readInt32(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}readUint32(t){return this.readInt32(t)>>>0}readInt64(t){return BigInt.asIntN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readUint64(t){return BigInt.asUintN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readFloat32(t){return aa[0]=this.readInt32(t),UM[0]}readFloat64(t){return aa[u0?0:1]=this.readInt32(t),aa[u0?1:0]=this.readInt32(t+4),PM[0]}writeInt8(t,n){this.bytes_[t]=n}writeUint8(t,n){this.bytes_[t]=n}writeInt16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeUint16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeInt32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeUint32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeInt64(t,n){this.writeInt32(t,Number(BigInt.asIntN(32,n))),this.writeInt32(t+4,Number(BigInt.asIntN(32,n>>BigInt(32))))}writeUint64(t,n){this.writeUint32(t,Number(BigInt.asUintN(32,n))),this.writeUint32(t+4,Number(BigInt.asUintN(32,n>>BigInt(32))))}writeFloat32(t,n){UM[0]=n,this.writeInt32(t,aa[0])}writeFloat64(t,n){PM[0]=n,this.writeInt32(t,aa[u0?0:1]),this.writeInt32(t+4,aa[u0?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+ms+yo)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let t="";for(let n=0;n<yo;n++)t+=String.fromCharCode(this.readInt8(this.position_+ms+n));return t}__offset(t,n){const r=t-this.readInt32(t);return n<this.readInt16(r)?this.readInt16(r+n):0}__union(t,n){return t.bb_pos=n+this.readInt32(n),t.bb=this,t}__string(t,n){t+=this.readInt32(t);const r=this.readInt32(t);t+=ms;const i=this.bytes_.subarray(t,t+r);return n===tS.UTF8_BYTES?i:this.text_decoder_.decode(i)}__union_with_string(t,n){return typeof t=="string"?this.__string(n):this.__union(t,n)}__indirect(t){return t+this.readInt32(t)}__vector(t){return t+this.readInt32(t)+ms}__vector_len(t){return this.readInt32(t+this.readInt32(t))}__has_identifier(t){if(t.length!=yo)throw new Error("FlatBuffers: file identifier must be length "+yo);for(let n=0;n<yo;n++)if(t.charCodeAt(n)!=this.readInt8(this.position()+ms+n))return!1;return!0}createScalarList(t,n){const r=[];for(let i=0;i<n;++i){const s=t(i);s!==null&&r.push(s)}return r}createObjList(t,n){const r=[];for(let i=0;i<n;++i){const s=t(i);s!==null&&r.push(s.unpack())}return r}},BO=class RO{constructor(t){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null,this.text_encoder=new TextEncoder;let n;t?n=t:n=1024,this.bb=xf.allocate(n),this.space=n}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(t){this.force_defaults=t}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(t,n){t>this.minalign&&(this.minalign=t);const r=~(this.bb.capacity()-this.space+n)+1&t-1;for(;this.space<r+t+n;){const i=this.bb.capacity();this.bb=RO.growByteBuffer(this.bb),this.space+=this.bb.capacity()-i}this.pad(r)}pad(t){for(let n=0;n<t;n++)this.bb.writeInt8(--this.space,0)}writeInt8(t){this.bb.writeInt8(this.space-=1,t)}writeInt16(t){this.bb.writeInt16(this.space-=2,t)}writeInt32(t){this.bb.writeInt32(this.space-=4,t)}writeInt64(t){this.bb.writeInt64(this.space-=8,t)}writeFloat32(t){this.bb.writeFloat32(this.space-=4,t)}writeFloat64(t){this.bb.writeFloat64(this.space-=8,t)}addInt8(t){this.prep(1,0),this.writeInt8(t)}addInt16(t){this.prep(2,0),this.writeInt16(t)}addInt32(t){this.prep(4,0),this.writeInt32(t)}addInt64(t){this.prep(8,0),this.writeInt64(t)}addFloat32(t){this.prep(4,0),this.writeFloat32(t)}addFloat64(t){this.prep(8,0),this.writeFloat64(t)}addFieldInt8(t,n,r){(this.force_defaults||n!=r)&&(this.addInt8(n),this.slot(t))}addFieldInt16(t,n,r){(this.force_defaults||n!=r)&&(this.addInt16(n),this.slot(t))}addFieldInt32(t,n,r){(this.force_defaults||n!=r)&&(this.addInt32(n),this.slot(t))}addFieldInt64(t,n,r){(this.force_defaults||n!==r)&&(this.addInt64(n),this.slot(t))}addFieldFloat32(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat32(n),this.slot(t))}addFieldFloat64(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat64(n),this.slot(t))}addFieldOffset(t,n,r){(this.force_defaults||n!=r)&&(this.addOffset(n),this.slot(t))}addFieldStruct(t,n,r){n!=r&&(this.nested(n),this.slot(t))}nested(t){if(t!=this.offset())throw new TypeError("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new TypeError("FlatBuffers: object serialization must not be nested.")}slot(t){this.vtable!==null&&(this.vtable[t]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(t){const n=t.capacity();if(n&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const r=n<<1,i=xf.allocate(r);return i.setPosition(r-n),i.bytes().set(t.bytes(),r-n),i}addOffset(t){this.prep(ms,0),this.writeInt32(this.offset()-t+ms)}startObject(t){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=t;for(let n=0;n<t;n++)this.vtable[n]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const t=this.offset();let n=this.vtable_in_use-1;for(;n>=0&&this.vtable[n]==0;n--);const r=n+1;for(;n>=0;n--)this.addInt16(this.vtable[n]!=0?t-this.vtable[n]:0);const i=2;this.addInt16(t-this.object_start);const s=(r+i)*kw;this.addInt16(s);let o=0;const a=this.space;t:for(n=0;n<this.vtables.length;n++){const l=this.bb.capacity()-this.vtables[n];if(s==this.bb.readInt16(l)){for(let c=kw;c<s;c+=kw)if(this.bb.readInt16(a+c)!=this.bb.readInt16(l+c))continue t;o=this.vtables[n];break}}return o?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,o-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t}finish(t,n,r){const i=r?fe:0;if(n){const s=n;if(this.prep(this.minalign,ms+yo+i),s.length!=yo)throw new TypeError("FlatBuffers: file identifier must be length "+yo);for(let o=yo-1;o>=0;o--)this.writeInt8(s.charCodeAt(o))}this.prep(this.minalign,ms+i),this.addOffset(t),i&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(t,n){this.finish(t,n,!0)}requiredField(t,n){const r=this.bb.capacity()-t,i=r-this.bb.readInt32(r);if(!(n<this.bb.readInt16(i)&&this.bb.readInt16(i+n)!=0))throw new TypeError("FlatBuffers: field "+n+" must be set")}startVector(t,n,r){this.notNested(),this.vector_num_elems=n,this.prep(ms,t*n),this.prep(r,t*n)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(t){if(!t)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(t))return this.string_maps.get(t);const n=this.createString(t);return this.string_maps.set(t,n),n}createString(t){if(t==null)return 0;let n;t instanceof Uint8Array?n=t:n=this.text_encoder.encode(t),this.addInt8(0),this.startVector(1,n.length,1),this.bb.setPosition(this.space-=n.length);for(let r=0,i=this.space,s=this.bb.bytes();r<n.length;r++)s[i++]=n[r];return this.endVector()}createObjectOffset(t){return t===null?0:typeof t=="string"?this.createString(t):t.pack(this)}createObjectOffsetList(t){const n=[];for(let r=0;r<t.length;++r){const i=t[r];if(i!==null)n.push(this.createObjectOffset(i));else throw new TypeError("FlatBuffers: Argument for createObjectOffsetList cannot contain null.")}return n}createStructOffsetList(t,n){return n(this,t.length),this.createObjectOffsetList(t.slice().reverse()),this.endVector()}};function zH(){const e=new Set;let t,n=new Promise(r=>t=r);return{pending(r){e.add(r)},ready(r){return e.delete(r),e.size===0},resolve(){n=new Promise(r=>{t(),t=r})},get promise(){return n}}}function Vb(e,t){const n=new e(t);return Xn().connect(n),n.element}const jH=e=>e&&typeof e=="object"&&!Array.isArray(e),VH=e=>Vb(YH,e);class YH extends ty{constructor({element:t,filterBy:n,from:r,column:i,label:s=i,format:o=u=>u,options:a,value:l,as:c}={}){var f,d,h,p;super(n),this.from=r,this.column=i,this.selection=c,this.format=o,this.element=t??document.createElement("div"),this.element.setAttribute("class","input"),this.element.value=this;const u=document.createElement("label");u.innerText=s||i,this.element.appendChild(u),this.select=document.createElement("select"),a&&(this.data=a.map(g=>jH(g)?g:{value:g}),this.update()),l=l??((f=this.selection)==null?void 0:f.value)??((h=(d=this.data)==null?void 0:d[0])==null?void 0:h.value),((p=this.selection)==null?void 0:p.value)===void 0&&this.publish(l),this.element.appendChild(this.select),this.selection&&(this.select.addEventListener("input",()=>{this.publish(this.selectedValue()??null)}),yc(this.selection)||this.selection.addEventListener("value",g=>{g!==this.select.value&&this.selectedValue(g)}))}selectedValue(t){var n;if(arguments.length===0){const r=this.select.selectedIndex;return this.data[r].value}else{const r=(n=this.data)==null?void 0:n.findIndex(i=>i.value===t);r>=0?this.select.selectedIndex=r:this.select.value=String(t)}}reset(){this.select.selectedIndex=this.from?0:-1}publish(t){const{selection:n,column:r}=this;yc(n)?n.update({source:this,schema:{type:"point"},value:t,predicate:t?e3(r,Jp(t)):null}):$a(n)&&n.update(t)}query(t=[]){const{from:n,column:r}=this;return n?Lt.from(n).select({value:r}).distinct().where(t).orderby(r):null}queryResult(t){return this.data=[{value:"",label:"All"},...t],this}update(){var i;const{data:t,format:n,select:r}=this;r.replaceChildren();for(const{value:s,label:o}of t){const a=document.createElement("option");a.setAttribute("value",s),a.innerText=o??n(s),this.select.appendChild(a)}return this.selection&&this.selectedValue(((i=this.selection)==null?void 0:i.value)??""),this}}const qH={contains:zW,prefix:jW,suffix:VW,regexp:PW};let WH=0;const HH=e=>Vb(GH,e);class GH extends ty{constructor({element:t,filterBy:n,from:r,column:i,label:s,type:o="contains",as:a}={}){if(super(n),this.id="search_"+ ++WH,this.type=o,this.from=r,this.column=i,this.selection=a,this.element=t??document.createElement("div"),this.element.setAttribute("class","input"),this.element.value=this,s){const l=document.createElement("label");l.setAttribute("for",this.id),l.innerText=s,this.element.appendChild(l)}this.searchbox=document.createElement("input"),this.searchbox.setAttribute("id",this.id),this.searchbox.setAttribute("type","text"),this.searchbox.setAttribute("placeholder","Query"),this.element.appendChild(this.searchbox),this.selection&&(this.searchbox.addEventListener("input",()=>{this.publish(this.searchbox.value||null)}),yc(this.selection)||this.selection.addEventListener("value",l=>{l!==this.searchbox.value&&(this.searchbox.value=l)}))}reset(){this.searchbox.value=""}publish(t){const{selection:n,column:r,type:i}=this;yc(n)?n.update({source:this,schema:{type:i},value:t,predicate:t?qH[i](r,Jp(t)):null}):$a(n)&&n.update(t)}query(t=[]){const{from:n,column:r}=this;return n?Lt.from(n).select({list:r}).distinct().where(t):null}queryResult(t){return this.data=t,this}update(){const t=document.createElement("datalist"),n=`${this.id}_list`;t.setAttribute("id",n);for(const r of this.data){const i=document.createElement("option");i.setAttribute("value",r.list),t.append(i)}return this.datalist&&this.datalist.remove(),this.element.appendChild(this.datalist=t),this.searchbox.setAttribute("list",n),this}}let XH=0;const eS=e=>Vb(QH,e);class QH extends ty{constructor({element:t,filterBy:n,as:r,min:i,max:s,step:o,from:a,column:l,label:c=l,value:u=r==null?void 0:r.value,width:f}={}){var d;if(super(n),this.id="slider_"+ ++XH,this.from=a,this.column=l||"value",this.selection=r,this.min=i,this.max=s,this.step=o,this.element=t||document.createElement("div"),this.element.setAttribute("class","input"),this.element.value=this,c){const h=document.createElement("label");h.setAttribute("for",this.id),h.innerText=c,this.element.appendChild(h)}this.slider=document.createElement("input"),this.slider.setAttribute("id",this.id),this.slider.setAttribute("type","range"),f!=null&&(this.slider.style.width=`${+f}px`),i!=null&&this.slider.setAttribute("min",i),s!=null&&this.slider.setAttribute("max",s),o!=null&&this.slider.setAttribute("step",o),u!=null&&(this.slider.setAttribute("value",u),((d=this.selection)==null?void 0:d.value)===void 0&&this.publish(u)),this.element.appendChild(this.slider),this.selection&&(this.slider.addEventListener("input",()=>{this.publish(+this.slider.value)}),yc(this.selection)||this.selection.addEventListener("value",h=>{h!==+this.slider.value&&(this.slider.value=h)}))}query(t=[]){const{from:n,column:r}=this;return!n||this.min!=null&&this.max!=null?null:Lt.select({min:ap(r),max:op(r)}).from(n).where(t)}queryResult(t){const{min:n,max:r}=Array.from(t)[0];return this.min==null&&this.slider.setAttribute("min",n),this.max==null&&this.slider.setAttribute("max",r),this.step==null&&this.slider.setAttribute("step",(r-n)/500),this}publish(t){const{selection:n,column:r}=this;yc(n)?n.update({source:this,schema:{type:"point"},value:t,predicate:e3(r,Jp(t))}):$a(this.selection)&&n.update(t)}}function LO(e,t){if(e instanceof Date||(e=new Date(+e)),isNaN(e))return typeof t=="function"?t(e):t;const n=e.getUTCHours(),r=e.getUTCMinutes(),i=e.getUTCSeconds(),s=e.getUTCMilliseconds();return`${KH(e.getUTCFullYear())}-${ho(e.getUTCMonth()+1,2)}-${ho(e.getUTCDate(),2)}${n||r||i||s?`T${ho(n,2)}:${ho(r,2)}${i||s?`:${ho(i,2)}${s?`.${ho(s,3)}`:""}`:""}Z`:""}`}function KH(e){return e<0?`-${ho(-e,6)}`:e>9999?`+${ho(e,6)}`:ho(e,4)}function ho(e,t){return`${e}`.padStart(t,"0")}const ZH=/^(?:[-+]\d{2})?\d{4}(?:-\d{2}(?:-\d{2})?)?(?:T\d{2}:\d{2}(?::\d{2}(?:\.\d{3})?)?(?:Z|[-+]\d{2}:?\d{2})?)?$/;function CO(e,t){return ZH.test(e+="")?new Date(e):typeof t=="function"?t(e):t}const UO=r3(e=>{const t=n3(e);return n=>n==null?"":typeof n=="number"?t(n):n instanceof Date?PO(n):`${n}`}),n3=r3(e=>t=>t===0?"0":t.toLocaleString(e));UO();n3();function PO(e){return LO(e,"Invalid Date")}function r3(e){let t=r3,n;return(r="en")=>r===t?n:n=e(t=r)}let JH=-1;const zO=e=>Vb(tG,e);let tG=class extends ty{constructor({element:t,filterBy:n,from:r,columns:i=["*"],align:s={},format:o,width:a,maxWidth:l,height:c=500,rowBatch:u=100}={}){super(n),this.id=`table-${++JH}`,this.from=r,this.columns=i,this.format=o,this.align=s,this.widths=typeof a=="object"?a:{},this.offset=0,this.limit=+u,this.pending=!1,this.sortHeader=null,this.sortColumn=null,this.sortDesc=!1,this.element=t||document.createElement("div"),this.element.setAttribute("id",this.id),this.element.value=this,typeof a=="number"&&(this.element.style.width=`${a}px`),l&&(this.element.style.maxWidth=`${l}px`),this.element.style.maxHeight=`${c}px`,this.element.style.overflow="auto";let f=-1;this.element.addEventListener("scroll",d=>{const{pending:h,loaded:p}=this,{scrollHeight:g,scrollTop:v,clientHeight:y}=d.target,m=v<f;f=v,!(m||h||p)&&g-v<2*y&&(this.pending=!0,this.requestData(this.offset+this.limit))}),this.tbl=document.createElement("table"),this.element.appendChild(this.tbl),this.head=document.createElement("thead"),this.tbl.appendChild(this.head),this.body=document.createElement("tbody"),this.tbl.appendChild(this.body),this.style=document.createElement("style"),this.element.appendChild(this.style)}requestData(t=0){var r;this.offset=t;const n=this.query((r=this.filterBy)==null?void 0:r.predicate(this));this.requestQuery(n),Xn().prefetch(n.clone().offset(t+this.limit))}fields(){return this.columns.map(t=>t3(this.from,t))}fieldInfo(t){this.schema=t;const n=this.head;n.innerHTML="";const r=document.createElement("tr");for(const{column:i}of t){const s=document.createElement("th");s.addEventListener("click",o=>this.sort(o,i)),s.appendChild(document.createElement("span")),s.appendChild(document.createTextNode(i)),r.appendChild(s)}return n.appendChild(r),this.formats=eG(this.format,t),this.style.innerText=iG(this.id,nG(this.align,t),rG(this.widths,t)),this}query(t=[]){const{from:n,limit:r,offset:i,schema:s,sortColumn:o,sortDesc:a}=this;return Lt.from(n).select(s.map(l=>l.column)).where(t).orderby(o?a?RW(o):o:[]).limit(r).offset(i)}queryResult(t){return this.pending||(this.loaded=!1,this.body.replaceChildren()),this.data=t,this}update(){const{body:t,formats:n,data:r,schema:i,limit:s}=this,o=i.length;let a=0;for(const l of r){++a;const c=document.createElement("tr");for(let u=0;u<o;++u){const f=l[i[u].column],d=document.createElement("td");d.innerText=f==null?"":n[u](f),c.appendChild(d)}t.appendChild(c)}return a<s&&(this.loaded=!0),this.pending=!1,this}sort(t,n){n===this.sortColumn?this.sortDesc=!this.sortDesc:(this.sortColumn=n,this.sortDesc=!1);const r=t.currentTarget,i=this.sortHeader;i===r&&t.metaKey?(i.firstChild.textContent="",this.sortHeader=null,this.sortColumn=null):(i&&(i.firstChild.textContent=""),this.sortHeader=r,r.firstChild.textContent=this.sortDesc?"":""),this.requestData()}};function eG(e={},t,n){return t.map(({column:r,type:i})=>{if(r in e)return e[r];switch(i){case"number":return n3(n);case"date":return PO;default:return UO(n)}})}function nG(e={},t){return t.map(({column:n,type:r})=>n in e?e[n]:r==="number"?"right":"left")}function rG(e={},t){return t.map(({column:n})=>e[n])}function iG(e,t,n){const r=[];return t.forEach((i,s)=>{const o=+n[s];if(i!=="left"||o){const a=i!=="left"?`text-align:${i};`:"",l=o?`width:${o}px;max-width:${o}px;`:"";r.push(`#${e} tr>:nth-child(${s+1}) {${a}${l}}`)}}),r.join(" ")}const oi=Symbol("Fixed"),mc=Symbol("Transient"),jO=Symbol("Transform"),sG=["rectY-x","rectX-y","rect-x","rect-y"];function oG(e,t){return sG.includes(`${t}-${e}`)}function Th(e,t={steps:25}){const n=(r,i)=>oG(i,r.type)?{[`${i}1`]:Ow(r,e,t),[`${i}2`]:Ow(r,e,{...t,offset:1})}:{[i]:Ow(r,e,t)};return n[jO]=!0,n}function Ow(e,t,n){return{column:t,label:t,get stats(){return["min","max"]},get columns(){return[t]},get basis(){return t},toString(){const{min:r,max:i}=e.stats[t],s=aG(r,i,n),o=Me(t),a=s.min===0?o:`(${o} - ${s.min})`,l=`${(s.max-s.min)/s.steps}::DOUBLE`,c=n.offset?`${n.offset} + `:"";return`${s.min} + ${l} * (${c}FLOOR(${a} / ${l})::INTEGER)`}}}function aG(e,t,n){let{steps:r=25,minstep:i=0,nice:s=!0}=n;if(s!==!1){const o=t-e,a=r,l=Math.LN10,c=Math.ceil(Math.log(a)/l);let u=Math.max(i,Math.pow(10,Math.round(Math.log(o)/l)-c));for(;Math.ceil(o/u)>a;)u*=10;const f=[5,2];let d;for(let g=0,v=f.length;g<v;++g)d=u/f[g],d>=i&&o/d<=a&&(u=d);d=Math.log(u);const h=d>=0?0:~~(-d/l)+1,p=Math.pow(10,-h-1);d=Math.floor(e/u+p)*u,e=e<d?d-u:d,t=Math.ceil(t/u)*u,r=Math.round((t-e)/u)}return{min:e,max:t,steps:r}}function Pe(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function gc(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Yb(e){let t,n,r;e.length!==2?(t=Pe,n=(a,l)=>Pe(e(a),l),r=(a,l)=>e(a)-l):(t=e===Pe||e===gc?e:lG,n=e,r=e);function i(a,l,c=0,u=a.length){if(c<u){if(t(l,l)!==0)return u;do{const f=c+u>>>1;n(a[f],l)<0?c=f+1:u=f}while(c<u)}return c}function s(a,l,c=0,u=a.length){if(c<u){if(t(l,l)!==0)return u;do{const f=c+u>>>1;n(a[f],l)<=0?c=f+1:u=f}while(c<u)}return c}function o(a,l,c=0,u=a.length){const f=i(a,l,c,u-1);return f>c&&r(a[f-1],l)>-r(a[f],l)?f-1:f}return{left:i,center:o,right:s}}function lG(){return 0}function VO(e){return e===null?NaN:+e}function*cG(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const uG=Yb(Pe),fG=uG.right;Yb(VO).center;const qb=fG,YO=qO(WO),dG=qO(hG);function qO(e){return function(t,n,r=n){if(!((n=+n)>=0))throw new RangeError("invalid rx");if(!((r=+r)>=0))throw new RangeError("invalid ry");let{data:i,width:s,height:o}=t;if(!((s=Math.floor(s))>=0))throw new RangeError("invalid width");if(!((o=Math.floor(o!==void 0?o:i.length/s))>=0))throw new RangeError("invalid height");if(!s||!o||!n&&!r)return t;const a=n&&e(n),l=r&&e(r),c=i.slice();return a&&l?(Uc(a,c,i,s,o),Uc(a,i,c,s,o),Uc(a,c,i,s,o),Pc(l,i,c,s,o),Pc(l,c,i,s,o),Pc(l,i,c,s,o)):a?(Uc(a,i,c,s,o),Uc(a,c,i,s,o),Uc(a,i,c,s,o)):l&&(Pc(l,i,c,s,o),Pc(l,c,i,s,o),Pc(l,i,c,s,o)),t}}function Uc(e,t,n,r,i){for(let s=0,o=r*i;s<o;)e(t,n,s,s+=r,1)}function Pc(e,t,n,r,i){for(let s=0,o=r*i;s<r;++s)e(t,n,s,s+o,r)}function hG(e){const t=WO(e);return(n,r,i,s,o)=>{i<<=2,s<<=2,o<<=2,t(n,r,i+0,s+0,o),t(n,r,i+1,s+1,o),t(n,r,i+2,s+2,o),t(n,r,i+3,s+3,o)}}function WO(e){const t=Math.floor(e);if(t===e)return pG(e);const n=e-t,r=2*e+1;return(i,s,o,a,l)=>{if(!((a-=l)>=o))return;let c=t*s[o];const u=l*t,f=u+l;for(let d=o,h=o+u;d<h;d+=l)c+=s[Math.min(a,d)];for(let d=o,h=a;d<=h;d+=l)c+=s[Math.min(a,d+u)],i[d]=(c+n*(s[Math.max(o,d-f)]+s[Math.min(a,d+f)]))/r,c-=s[Math.max(o,d-u)]}}function pG(e){const t=2*e+1;return(n,r,i,s,o)=>{if(!((s-=o)>=i))return;let a=e*r[i];const l=o*e;for(let c=i,u=i+l;c<u;c+=o)a+=r[Math.min(s,c)];for(let c=i,u=s;c<=u;c+=o)a+=r[Math.min(s,c+l)],n[c]=a/t,a-=r[Math.max(i,c-l)]}}function Wb(e,t){let n=0;if(t===void 0)for(let r of e)r!=null&&(r=+r)>=r&&++n;else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(i=+i)>=i&&++n}return n}function yG(e){return e.length|0}function mG(e){return!(e>0)}function gG(e){return typeof e!="object"||"length"in e?e:Array.from(e)}function bG(e){return t=>e(...t)}function vG(...e){const t=typeof e[e.length-1]=="function"&&bG(e.pop());e=e.map(gG);const n=e.map(yG),r=e.length-1,i=new Array(r+1).fill(0),s=[];if(r<0||n.some(mG))return s;for(;;){s.push(i.map((a,l)=>e[l][a]));let o=r;for(;++i[o]===n[o];){if(o===0)return t?s.map(t):s;i[o--]=0}}}function wG(e,t){var n=0,r=0;return Float64Array.from(e,t===void 0?i=>n+=+i||0:i=>n+=+t(i,r++,e)||0)}function i3(e,t){let n=0,r,i=0,s=0;if(t===void 0)for(let o of e)o!=null&&(o=+o)>=o&&(r=o-i,i+=r/++n,s+=r*(o-i));else{let o=-1;for(let a of e)(a=t(a,++o,e))!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,s+=r*(a-i))}if(n>1)return s/(n-1)}function ey(e,t){const n=i3(e,t);return n&&Math.sqrt(n)}function yn(e,t){let n,r;if(t===void 0)for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(n===void 0?s>=s&&(n=r=s):(n>s&&(n=s),r<s&&(r=s)))}return[n,r]}class ks{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const s=n[i],o=t+s,a=Math.abs(t)<Math.abs(s)?t-(o-s):s-(o-t);a&&(n[r++]=a),t=o}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,s,o=0;if(n>0){for(o=t[--n];n>0&&(r=o,i=t[--n],o=r+i,s=i-(o-r),!s););n>0&&(s<0&&t[n-1]<0||s>0&&t[n-1]>0)&&(i=s*2,r=o+i,i==r-o&&(o=r))}return o}}class bc extends Map{constructor(t,n=XO){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(nS(this,t))}has(t){return super.has(nS(this,t))}set(t,n){return super.set(HO(this,t),n)}delete(t){return super.delete(GO(this,t))}}class ny extends Set{constructor(t,n=XO){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(nS(this,t))}add(t){return super.add(HO(this,t))}delete(t){return super.delete(GO(this,t))}}function nS({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function HO({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function GO({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function XO(e){return e!==null&&typeof e=="object"?e.valueOf():e}function rS(e){return e}function Vo(e,...t){return s3(e,rS,rS,t)}function Hu(e,t,...n){return s3(e,rS,t,n)}function _G(e,t,...n){return s3(e,Array.from,t,n)}function s3(e,t,n,r){return function i(s,o){if(o>=r.length)return n(s);const a=new bc,l=r[o++];let c=-1;for(const u of s){const f=l(u,++c,s),d=a.get(f);d?d.push(u):a.set(f,[u])}for(const[u,f]of a)a.set(u,i(f,o));return t(a)}(e,0)}function SG(e,t){return Array.from(t,n=>e[n])}function lp(e,...t){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");e=Array.from(e);let[n]=t;if(n&&n.length!==2||t.length>1){const r=Uint32Array.from(e,(i,s)=>s);return t.length>1?(t=t.map(i=>e.map(i)),r.sort((i,s)=>{for(const o of t){const a=cp(o[i],o[s]);if(a)return a}})):(n=e.map(n),r.sort((i,s)=>cp(n[i],n[s]))),SG(e,r)}return e.sort(o3(n))}function o3(e=Pe){if(e===Pe)return cp;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function cp(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}function a3(e,t,n){return(t.length!==2?lp(Hu(e,t,n),([r,i],[s,o])=>Pe(i,o)||Pe(r,s)):lp(Vo(e,n),([r,i],[s,o])=>t(i,o)||Pe(r,s))).map(([r])=>r)}const xG=Math.sqrt(50),IG=Math.sqrt(10),EG=Math.sqrt(2);function Fg(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=xG?10:s>=IG?5:s>=EG?2:1;let a,l,c;return i<0?(c=Math.pow(10,-i)/o,a=Math.round(e*c),l=Math.round(t*c),a/c<e&&++a,l/c>t&&--l,c=-c):(c=Math.pow(10,i)*o,a=Math.round(e/c),l=Math.round(t/c),a*c<e&&++a,l*c>t&&--l),l<a&&.5<=n&&n<2?Fg(e,t,n*2):[a,l,c]}function Ca(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,s,o]=r?Fg(t,e,n):Fg(e,t,n);if(!(s>=i))return[];const a=s-i+1,l=new Array(a);if(r)if(o<0)for(let c=0;c<a;++c)l[c]=(s-c)/-o;else for(let c=0;c<a;++c)l[c]=(s-c)*o;else if(o<0)for(let c=0;c<a;++c)l[c]=(i+c)/-o;else for(let c=0;c<a;++c)l[c]=(i+c)*o;return l}function up(e,t,n){return t=+t,e=+e,n=+n,Fg(e,t,n)[2]}function iS(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?up(t,e,n):up(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function QO(e,t,n){let r;for(;;){const i=up(e,t,n);if(i===r||i===0||!isFinite(i))return[e,t];i>0?(e=Math.floor(e/i)*i,t=Math.ceil(t/i)*i):i<0&&(e=Math.ceil(e*i)/i,t=Math.floor(t*i)/i),r=i}}function l3(e){return Math.max(1,Math.ceil(Math.log(Wb(e))/Math.LN2)+1)}function $e(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function TG(e,t){let n,r=-1,i=-1;if(t===void 0)for(const s of e)++i,s!=null&&(n<s||n===void 0&&s>=s)&&(n=s,r=i);else for(let s of e)(s=t(s,++i,e))!=null&&(n<s||n===void 0&&s>=s)&&(n=s,r=i);return r}function bn(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function AG(e,t){let n,r=-1,i=-1;if(t===void 0)for(const s of e)++i,s!=null&&(n>s||n===void 0&&s>=s)&&(n=s,r=i);else for(let s of e)(s=t(s,++i,e))!=null&&(n>s||n===void 0&&s>=s)&&(n=s,r=i);return r}function KO(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?cp:o3(i);r>n;){if(r-n>600){const l=r-n+1,c=t-n+1,u=Math.log(l),f=.5*Math.exp(2*u/3),d=.5*Math.sqrt(u*f*(l-f)/l)*(c-l/2<0?-1:1),h=Math.max(n,Math.floor(t-c*f/l+d)),p=Math.min(r,Math.floor(t+(l-c)*f/l+d));KO(e,t,h,p,i)}const s=e[t];let o=n,a=r;for(Dd(e,n,t),i(e[r],s)>0&&Dd(e,n,r);o<a;){for(Dd(e,o,a),++o,--a;i(e[o],s)<0;)++o;for(;i(e[a],s)>0;)--a}i(e[n],s)===0?Dd(e,n,a):(++a,Dd(e,a,r)),a<=t&&(n=a+1),t<=a&&(r=a-1)}return e}function Dd(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function c3(e,t=Pe){let n,r=!1;if(t.length===1){let i;for(const s of e){const o=t(s);(r?Pe(o,i)>0:Pe(o,o)===0)&&(n=s,i=o,r=!0)}}else for(const i of e)(r?t(i,n)>0:t(i,i)===0)&&(n=i,r=!0);return n}function Ua(e,t,n){if(e=Float64Array.from(cG(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return bn(e);if(t>=1)return $e(e);var r,i=(r-1)*t,s=Math.floor(i),o=$e(KO(e,s).subarray(0,s+1)),a=bn(e.subarray(s+1));return o+(a-o)*(i-s)}}function MG(e,t,n=VO){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,s=Math.floor(i),o=+n(e[s],s,e),a=+n(e[s+1],s+1,e);return o+(a-o)*(i-s)}}function $G(e,t,n){const r=Wb(e),i=Ua(e,.75)-Ua(e,.25);return r&&i?Math.ceil((n-t)/(2*i*Math.pow(r,-1/3))):1}function ZO(e,t,n){const r=Wb(e),i=ey(e);return r&&i?Math.ceil((n-t)*Math.cbrt(r)/(3.49*i)):1}function Hb(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(s=+s)>=s&&(++n,r+=s)}if(n)return r/n}function fp(e,t){return Ua(e,.5,t)}function*NG(e){for(const t of e)yield*t}function JO(e){return Array.from(NG(e))}function tF(e,t){const n=new bc;if(t===void 0)for(let s of e)s!=null&&s>=s&&n.set(s,(n.get(s)||0)+1);else{let s=-1;for(let o of e)(o=t(o,++s,e))!=null&&o>=o&&n.set(o,(n.get(o)||0)+1)}let r,i=0;for(const[s,o]of n)o>i&&(i=o,r=s);return r}function DG(e,t=kG){const n=[];let r,i=!1;for(const s of e)i&&n.push(t(r,s)),r=s,i=!0;return n}function kG(e,t){return[e,t]}function Nr(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function eF(e,t=Pe){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");let n=Array.from(e);const r=new Float64Array(n.length);t.length!==2&&(n=n.map(t),t=Pe);const i=(a,l)=>t(n[a],n[l]);let s,o;return e=Uint32Array.from(n,(a,l)=>l),e.sort(t===Pe?(a,l)=>cp(n[a],n[l]):o3(i)),e.forEach((a,l)=>{const c=i(a,s===void 0?a:s);c>=0?((s===void 0||c>0)&&(s=a,o=l),r[a]=o):r[a]=NaN}),r}function OG(e,t=Pe){let n,r=!1;if(t.length===1){let i;for(const s of e){const o=t(s);(r?Pe(o,i)<0:Pe(o,o)===0)&&(n=s,i=o,r=!0)}}else for(const i of e)(r?t(i,n)<0:t(i,i)===0)&&(n=i,r=!0);return n}function Ls(e,t){let n=0;if(t===void 0)for(let r of e)(r=+r)&&(n+=r);else{let r=-1;for(let i of e)(i=+t(i,++r,e))&&(n+=i)}return n}function Bg(e){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");return Array.from(e).reverse()}function FG(e){return e}var Fw=1,Bw=2,sS=3,f0=4,zM=1e-6;function BG(e){return"translate("+e+",0)"}function RG(e){return"translate(0,"+e+")"}function LG(e){return t=>+e(t)}function CG(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),n=>+e(n)+t}function UG(){return!this.__axis}function PG(e,t){var n=[],r=null,i=null,s=6,o=6,a=3,l=typeof window<"u"&&window.devicePixelRatio>1?0:.5,c=e===Fw||e===f0?-1:1,u=e===f0||e===Bw?"x":"y",f=e===Fw||e===sS?BG:RG;function d(h){var p=r??(t.ticks?t.ticks.apply(t,n):t.domain()),g=i??(t.tickFormat?t.tickFormat.apply(t,n):FG),v=Math.max(s,0)+a,y=t.range(),m=+y[0]+l,b=+y[y.length-1]+l,w=(t.bandwidth?CG:LG)(t.copy(),l),S=h.selection?h.selection():h,_=S.selectAll(".domain").data([null]),x=S.selectAll(".tick").data(p,t).order(),T=x.exit(),N=x.enter().append("g").attr("class","tick"),I=x.select("line"),A=x.select("text");_=_.merge(_.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),x=x.merge(N),I=I.merge(N.append("line").attr("stroke","currentColor").attr(u+"2",c*s)),A=A.merge(N.append("text").attr("fill","currentColor").attr(u,c*v).attr("dy",e===Fw?"0em":e===sS?"0.71em":"0.32em")),h!==S&&(_=_.transition(h),x=x.transition(h),I=I.transition(h),A=A.transition(h),T=T.transition(h).attr("opacity",zM).attr("transform",function(k){return isFinite(k=w(k))?f(k+l):this.getAttribute("transform")}),N.attr("opacity",zM).attr("transform",function(k){var R=this.parentNode.__axis;return f((R&&isFinite(R=R(k))?R:w(k))+l)})),T.remove(),_.attr("d",e===f0||e===Bw?o?"M"+c*o+","+m+"H"+l+"V"+b+"H"+c*o:"M"+l+","+m+"V"+b:o?"M"+m+","+c*o+"V"+l+"H"+b+"V"+c*o:"M"+m+","+l+"H"+b),x.attr("opacity",1).attr("transform",function(k){return f(w(k)+l)}),I.attr(u+"2",c*s),A.attr(u,c*v).text(g),S.filter(UG).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===Bw?"start":e===f0?"end":"middle"),S.each(function(){this.__axis=w})}return d.scale=function(h){return arguments.length?(t=h,d):t},d.ticks=function(){return n=Array.from(arguments),d},d.tickArguments=function(h){return arguments.length?(n=h==null?[]:Array.from(h),d):n.slice()},d.tickValues=function(h){return arguments.length?(r=h==null?null:Array.from(h),d):r&&r.slice()},d.tickFormat=function(h){return arguments.length?(i=h,d):i},d.tickSize=function(h){return arguments.length?(s=o=+h,d):s},d.tickSizeInner=function(h){return arguments.length?(s=+h,d):s},d.tickSizeOuter=function(h){return arguments.length?(o=+h,d):o},d.tickPadding=function(h){return arguments.length?(a=+h,d):a},d.offset=function(h){return arguments.length?(l=+h,d):l},d}function zG(e){return PG(sS,e)}var jG={value:()=>{}};function Gb(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new hm(n)}function hm(e){this._=e}function VG(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}hm.prototype=Gb.prototype={constructor:hm,on:function(e,t){var n=this._,r=VG(e+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(e=r[s]).type)&&(i=YG(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(i=(e=r[s]).type)n[i]=jM(n[i],e.name,t);else if(t==null)for(i in n)n[i]=jM(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new hm(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function YG(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function jM(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=jG,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var oS="http://www.w3.org/1999/xhtml";const vc={svg:"http://www.w3.org/2000/svg",xhtml:oS,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Xb(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),vc.hasOwnProperty(t)?{space:vc[t],local:e}:e}function qG(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===oS&&t.documentElement.namespaceURI===oS?t.createElement(e):t.createElementNS(n,e)}}function WG(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Qb(e){var t=Xb(e);return(t.local?WG:qG)(t)}function HG(){}function u3(e){return e==null?HG:function(){return this.querySelector(e)}}function GG(e){typeof e!="function"&&(e=u3(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=new Array(o),l,c,u=0;u<o;++u)(l=s[u])&&(c=e.call(l,l.__data__,u,s))&&("__data__"in l&&(c.__data__=l.__data__),a[u]=c);return new Lr(r,this._parents)}function XG(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function QG(){return[]}function nF(e){return e==null?QG:function(){return this.querySelectorAll(e)}}function KG(e){return function(){return XG(e.apply(this,arguments))}}function ZG(e){typeof e=="function"?e=KG(e):e=nF(e);for(var t=this._groups,n=t.length,r=[],i=[],s=0;s<n;++s)for(var o=t[s],a=o.length,l,c=0;c<a;++c)(l=o[c])&&(r.push(e.call(l,l.__data__,c,o)),i.push(l));return new Lr(r,i)}function rF(e){return function(){return this.matches(e)}}function iF(e){return function(t){return t.matches(e)}}var JG=Array.prototype.find;function tX(e){return function(){return JG.call(this.children,e)}}function eX(){return this.firstElementChild}function nX(e){return this.select(e==null?eX:tX(typeof e=="function"?e:iF(e)))}var rX=Array.prototype.filter;function iX(){return Array.from(this.children)}function sX(e){return function(){return rX.call(this.children,e)}}function oX(e){return this.selectAll(e==null?iX:sX(typeof e=="function"?e:iF(e)))}function aX(e){typeof e!="function"&&(e=rF(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],l,c=0;c<o;++c)(l=s[c])&&e.call(l,l.__data__,c,s)&&a.push(l);return new Lr(r,this._parents)}function sF(e){return new Array(e.length)}function lX(){return new Lr(this._enter||this._groups.map(sF),this._parents)}function Rg(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Rg.prototype={constructor:Rg,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function cX(e){return function(){return e}}function uX(e,t,n,r,i,s){for(var o=0,a,l=t.length,c=s.length;o<c;++o)(a=t[o])?(a.__data__=s[o],r[o]=a):n[o]=new Rg(e,s[o]);for(;o<l;++o)(a=t[o])&&(i[o]=a)}function fX(e,t,n,r,i,s,o){var a,l,c=new Map,u=t.length,f=s.length,d=new Array(u),h;for(a=0;a<u;++a)(l=t[a])&&(d[a]=h=o.call(l,l.__data__,a,t)+"",c.has(h)?i[a]=l:c.set(h,l));for(a=0;a<f;++a)h=o.call(e,s[a],a,s)+"",(l=c.get(h))?(r[a]=l,l.__data__=s[a],c.delete(h)):n[a]=new Rg(e,s[a]);for(a=0;a<u;++a)(l=t[a])&&c.get(d[a])===l&&(i[a]=l)}function dX(e){return e.__data__}function hX(e,t){if(!arguments.length)return Array.from(this,dX);var n=t?fX:uX,r=this._parents,i=this._groups;typeof e!="function"&&(e=cX(e));for(var s=i.length,o=new Array(s),a=new Array(s),l=new Array(s),c=0;c<s;++c){var u=r[c],f=i[c],d=f.length,h=pX(e.call(u,u&&u.__data__,c,r)),p=h.length,g=a[c]=new Array(p),v=o[c]=new Array(p),y=l[c]=new Array(d);n(u,f,g,v,y,h,t);for(var m=0,b=0,w,S;m<p;++m)if(w=g[m]){for(m>=b&&(b=m+1);!(S=v[b])&&++b<p;);w._next=S||null}}return o=new Lr(o,r),o._enter=a,o._exit=l,o}function pX(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function yX(){return new Lr(this._exit||this._groups.map(sF),this._parents)}function mX(e,t,n){var r=this.enter(),i=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function gX(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,s=r.length,o=Math.min(i,s),a=new Array(i),l=0;l<o;++l)for(var c=n[l],u=r[l],f=c.length,d=a[l]=new Array(f),h,p=0;p<f;++p)(h=c[p]||u[p])&&(d[p]=h);for(;l<i;++l)a[l]=n[l];return new Lr(a,this._parents)}function bX(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function vX(e){e||(e=wX);function t(f,d){return f&&d?e(f.__data__,d.__data__):!f-!d}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],a=o.length,l=i[s]=new Array(a),c,u=0;u<a;++u)(c=o[u])&&(l[u]=c);l.sort(t)}return new Lr(i,this._parents).order()}function wX(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function _X(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function SX(){return Array.from(this)}function xX(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function IX(){let e=0;for(const t of this)++e;return e}function EX(){return!this.node()}function TX(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],s=0,o=i.length,a;s<o;++s)(a=i[s])&&e.call(a,a.__data__,s,i);return this}function AX(e){return function(){this.removeAttribute(e)}}function MX(e){return function(){this.removeAttributeNS(e.space,e.local)}}function $X(e,t){return function(){this.setAttribute(e,t)}}function NX(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function DX(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function kX(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function OX(e,t){var n=Xb(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?MX:AX:typeof t=="function"?n.local?kX:DX:n.local?NX:$X)(n,t))}function oF(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function FX(e){return function(){this.style.removeProperty(e)}}function BX(e,t,n){return function(){this.style.setProperty(e,t,n)}}function RX(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function LX(e,t,n){return arguments.length>1?this.each((t==null?FX:typeof t=="function"?RX:BX)(e,t,n??"")):If(this.node(),e)}function If(e,t){return e.style.getPropertyValue(t)||oF(e).getComputedStyle(e,null).getPropertyValue(t)}function CX(e){return function(){delete this[e]}}function UX(e,t){return function(){this[e]=t}}function PX(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function zX(e,t){return arguments.length>1?this.each((t==null?CX:typeof t=="function"?PX:UX)(e,t)):this.node()[e]}function aF(e){return e.trim().split(/^|\s+/)}function f3(e){return e.classList||new lF(e)}function lF(e){this._node=e,this._names=aF(e.getAttribute("class")||"")}lF.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function cF(e,t){for(var n=f3(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function uF(e,t){for(var n=f3(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function jX(e){return function(){cF(this,e)}}function VX(e){return function(){uF(this,e)}}function YX(e,t){return function(){(t.apply(this,arguments)?cF:uF)(this,e)}}function qX(e,t){var n=aF(e+"");if(arguments.length<2){for(var r=f3(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?YX:t?jX:VX)(n,t))}function WX(){this.textContent=""}function HX(e){return function(){this.textContent=e}}function GX(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function XX(e){return arguments.length?this.each(e==null?WX:(typeof e=="function"?GX:HX)(e)):this.node().textContent}function QX(){this.innerHTML=""}function KX(e){return function(){this.innerHTML=e}}function ZX(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function JX(e){return arguments.length?this.each(e==null?QX:(typeof e=="function"?ZX:KX)(e)):this.node().innerHTML}function tQ(){this.nextSibling&&this.parentNode.appendChild(this)}function eQ(){return this.each(tQ)}function nQ(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function rQ(){return this.each(nQ)}function iQ(e){var t=typeof e=="function"?e:Qb(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function sQ(){return null}function oQ(e,t){var n=typeof e=="function"?e:Qb(e),r=t==null?sQ:typeof t=="function"?t:u3(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function aQ(){var e=this.parentNode;e&&e.removeChild(this)}function lQ(){return this.each(aQ)}function cQ(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function uQ(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function fQ(e){return this.select(e?uQ:cQ)}function dQ(e){return arguments.length?this.property("__data__",e):this.node().__data__}function hQ(e){return function(t){e.call(this,t,this.__data__)}}function pQ(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function yQ(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,s;n<i;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function mQ(e,t,n){return function(){var r=this.__on,i,s=hQ(t);if(r){for(var o=0,a=r.length;o<a;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=t;return}}this.addEventListener(e.type,s,n),i={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(i):this.__on=[i]}}function gQ(e,t,n){var r=pQ(e+""),i,s=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,c=a.length,u;l<c;++l)for(i=0,u=a[l];i<s;++i)if((o=r[i]).type===u.type&&o.name===u.name)return u.value}return}for(a=t?mQ:yQ,i=0;i<s;++i)this.each(a(r[i],t,n));return this}function fF(e,t,n){var r=oF(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function bQ(e,t){return function(){return fF(this,e,t)}}function vQ(e,t){return function(){return fF(this,e,t.apply(this,arguments))}}function wQ(e,t){return this.each((typeof t=="function"?vQ:bQ)(e,t))}function*_Q(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var dF=[null];function Lr(e,t){this._groups=e,this._parents=t}function ry(){return new Lr([[document.documentElement]],dF)}function SQ(){return this}Lr.prototype=ry.prototype={constructor:Lr,select:GG,selectAll:ZG,selectChild:nX,selectChildren:oX,filter:aX,data:hX,enter:lX,exit:yX,join:mX,merge:gX,selection:SQ,order:bX,sort:vX,call:_X,nodes:SX,node:xX,size:IX,empty:EX,each:TX,attr:OX,style:LX,property:zX,classed:qX,text:XX,html:JX,raise:eQ,lower:rQ,append:iQ,insert:oQ,remove:lQ,clone:fQ,datum:dQ,on:gQ,dispatch:wQ,[Symbol.iterator]:_Q};function ye(e){return typeof e=="string"?new Lr([[document.querySelector(e)]],[document.documentElement]):new Lr([[e]],dF)}function xQ(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Mi(e,t){if(e=xQ(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const aS={capture:!0,passive:!1};function lS(e){e.preventDefault(),e.stopImmediatePropagation()}function hF(e){var t=e.document.documentElement,n=ye(e).on("dragstart.drag",lS,aS);"onselectstart"in t?n.on("selectstart.drag",lS,aS):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function pF(e,t){var n=e.document.documentElement,r=ye(e).on("dragstart.drag",null);t&&(r.on("click.drag",lS,aS),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function nd(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function iy(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function il(){}var wc=.7,Ef=1/wc,Gu="\\s*([+-]?\\d+)\\s*",dp="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Os="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",IQ=/^#([0-9a-f]{3,8})$/,EQ=new RegExp(`^rgb\\(${Gu},${Gu},${Gu}\\)$`),TQ=new RegExp(`^rgb\\(${Os},${Os},${Os}\\)$`),AQ=new RegExp(`^rgba\\(${Gu},${Gu},${Gu},${dp}\\)$`),MQ=new RegExp(`^rgba\\(${Os},${Os},${Os},${dp}\\)$`),$Q=new RegExp(`^hsl\\(${dp},${Os},${Os}\\)$`),NQ=new RegExp(`^hsla\\(${dp},${Os},${Os},${dp}\\)$`),VM={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};nd(il,Pa,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:YM,formatHex:YM,formatHex8:DQ,formatHsl:kQ,formatRgb:qM,toString:qM});function YM(){return this.rgb().formatHex()}function DQ(){return this.rgb().formatHex8()}function kQ(){return yF(this).formatHsl()}function qM(){return this.rgb().formatRgb()}function Pa(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=IQ.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?WM(t):n===3?new mn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?d0(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?d0(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=EQ.exec(e))?new mn(t[1],t[2],t[3],1):(t=TQ.exec(e))?new mn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=AQ.exec(e))?d0(t[1],t[2],t[3],t[4]):(t=MQ.exec(e))?d0(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=$Q.exec(e))?XM(t[1],t[2]/100,t[3]/100,1):(t=NQ.exec(e))?XM(t[1],t[2]/100,t[3]/100,t[4]):VM.hasOwnProperty(e)?WM(VM[e]):e==="transparent"?new mn(NaN,NaN,NaN,0):null}function WM(e){return new mn(e>>16&255,e>>8&255,e&255,1)}function d0(e,t,n,r){return r<=0&&(e=t=n=NaN),new mn(e,t,n,r)}function d3(e){return e instanceof il||(e=Pa(e)),e?(e=e.rgb(),new mn(e.r,e.g,e.b,e.opacity)):new mn}function gi(e,t,n,r){return arguments.length===1?d3(e):new mn(e,t,n,r??1)}function mn(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}nd(mn,gi,iy(il,{brighter(e){return e=e==null?Ef:Math.pow(Ef,e),new mn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?wc:Math.pow(wc,e),new mn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new mn(ec(this.r),ec(this.g),ec(this.b),Lg(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:HM,formatHex:HM,formatHex8:OQ,formatRgb:GM,toString:GM}));function HM(){return`#${Ul(this.r)}${Ul(this.g)}${Ul(this.b)}`}function OQ(){return`#${Ul(this.r)}${Ul(this.g)}${Ul(this.b)}${Ul((isNaN(this.opacity)?1:this.opacity)*255)}`}function GM(){const e=Lg(this.opacity);return`${e===1?"rgb(":"rgba("}${ec(this.r)}, ${ec(this.g)}, ${ec(this.b)}${e===1?")":`, ${e})`}`}function Lg(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function ec(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Ul(e){return e=ec(e),(e<16?"0":"")+e.toString(16)}function XM(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new ki(e,t,n,r)}function yF(e){if(e instanceof ki)return new ki(e.h,e.s,e.l,e.opacity);if(e instanceof il||(e=Pa(e)),!e)return new ki;if(e instanceof ki)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),o=NaN,a=s-i,l=(s+i)/2;return a?(t===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-t)/a+2:o=(t-n)/a+4,a/=l<.5?s+i:2-s-i,o*=60):a=l>0&&l<1?0:o,new ki(o,a,l,e.opacity)}function cS(e,t,n,r){return arguments.length===1?yF(e):new ki(e,t,n,r??1)}function ki(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}nd(ki,cS,iy(il,{brighter(e){return e=e==null?Ef:Math.pow(Ef,e),new ki(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?wc:Math.pow(wc,e),new ki(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new mn(Rw(e>=240?e-240:e+120,i,r),Rw(e,i,r),Rw(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new ki(QM(this.h),h0(this.s),h0(this.l),Lg(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Lg(this.opacity);return`${e===1?"hsl(":"hsla("}${QM(this.h)}, ${h0(this.s)*100}%, ${h0(this.l)*100}%${e===1?")":`, ${e})`}`}}));function QM(e){return e=(e||0)%360,e<0?e+360:e}function h0(e){return Math.max(0,Math.min(1,e||0))}function Rw(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const mF=Math.PI/180,gF=180/Math.PI,Cg=18,bF=.96422,vF=1,wF=.82521,_F=4/29,Xu=6/29,SF=3*Xu*Xu,FQ=Xu*Xu*Xu;function xF(e){if(e instanceof Fs)return new Fs(e.l,e.a,e.b,e.opacity);if(e instanceof wo)return IF(e);e instanceof mn||(e=d3(e));var t=Pw(e.r),n=Pw(e.g),r=Pw(e.b),i=Lw((.2225045*t+.7168786*n+.0606169*r)/vF),s,o;return t===n&&n===r?s=o=i:(s=Lw((.4360747*t+.3850649*n+.1430804*r)/bF),o=Lw((.0139322*t+.0971045*n+.7141733*r)/wF)),new Fs(116*i-16,500*(s-i),200*(i-o),e.opacity)}function uS(e,t,n,r){return arguments.length===1?xF(e):new Fs(e,t,n,r??1)}function Fs(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}nd(Fs,uS,iy(il,{brighter(e){return new Fs(this.l+Cg*(e??1),this.a,this.b,this.opacity)},darker(e){return new Fs(this.l-Cg*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=bF*Cw(t),e=vF*Cw(e),n=wF*Cw(n),new mn(Uw(3.1338561*t-1.6168667*e-.4906146*n),Uw(-.9787684*t+1.9161415*e+.033454*n),Uw(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function Lw(e){return e>FQ?Math.pow(e,1/3):e/SF+_F}function Cw(e){return e>Xu?e*e*e:SF*(e-_F)}function Uw(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function Pw(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function BQ(e){if(e instanceof wo)return new wo(e.h,e.c,e.l,e.opacity);if(e instanceof Fs||(e=xF(e)),e.a===0&&e.b===0)return new wo(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*gF;return new wo(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function fS(e,t,n,r){return arguments.length===1?BQ(e):new wo(e,t,n,r??1)}function wo(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function IF(e){if(isNaN(e.h))return new Fs(e.l,0,0,e.opacity);var t=e.h*mF;return new Fs(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}nd(wo,fS,iy(il,{brighter(e){return new wo(this.h,this.c,this.l+Cg*(e??1),this.opacity)},darker(e){return new wo(this.h,this.c,this.l-Cg*(e??1),this.opacity)},rgb(){return IF(this).rgb()}}));var EF=-.14861,h3=1.78277,p3=-.29227,Kb=-.90649,hp=1.97294,KM=hp*Kb,ZM=hp*h3,JM=h3*p3-Kb*EF;function RQ(e){if(e instanceof nc)return new nc(e.h,e.s,e.l,e.opacity);e instanceof mn||(e=d3(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(JM*r+KM*t-ZM*n)/(JM+KM-ZM),s=r-i,o=(hp*(n-i)-p3*s)/Kb,a=Math.sqrt(o*o+s*s)/(hp*i*(1-i)),l=a?Math.atan2(o,s)*gF-120:NaN;return new nc(l<0?l+360:l,a,i,e.opacity)}function Cs(e,t,n,r){return arguments.length===1?RQ(e):new nc(e,t,n,r??1)}function nc(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}nd(nc,Cs,iy(il,{brighter(e){return e=e==null?Ef:Math.pow(Ef,e),new nc(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?wc:Math.pow(wc,e),new nc(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*mF,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new mn(255*(t+n*(EF*r+h3*i)),255*(t+n*(p3*r+Kb*i)),255*(t+n*(hp*r)),this.opacity)}}));function LQ(e,t,n,r,i){var s=e*e,o=s*e;return((1-3*e+3*s-o)*t+(4-6*s+3*o)*n+(1+3*e+3*s-3*o)*r+o*i)/6}function CQ(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],s=e[r+1],o=r>0?e[r-1]:2*i-s,a=r<t-1?e[r+2]:2*s-i;return LQ((n-r/t)*t,o,i,s,a)}}const Zb=e=>()=>e;function TF(e,t){return function(n){return e+n*t}}function UQ(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function y3(e,t){var n=t-e;return n?TF(e,n>180||n<-180?n-360*Math.round(n/360):n):Zb(isNaN(e)?t:e)}function PQ(e){return(e=+e)==1?Bn:function(t,n){return n-t?UQ(t,n,e):Zb(isNaN(t)?n:t)}}function Bn(e,t){var n=t-e;return n?TF(e,n):Zb(isNaN(e)?t:e)}const _c=function e(t){var n=PQ(t);function r(i,s){var o=n((i=gi(i)).r,(s=gi(s)).r),a=n(i.g,s.g),l=n(i.b,s.b),c=Bn(i.opacity,s.opacity);return function(u){return i.r=o(u),i.g=a(u),i.b=l(u),i.opacity=c(u),i+""}}return r.gamma=e,r}(1);function zQ(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),s=new Array(n),o,a;for(o=0;o<n;++o)a=gi(t[o]),r[o]=a.r||0,i[o]=a.g||0,s[o]=a.b||0;return r=e(r),i=e(i),s=e(s),a.opacity=1,function(l){return a.r=r(l),a.g=i(l),a.b=s(l),a+""}}}var jQ=zQ(CQ);function VQ(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function YQ(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function qQ(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=rd(e[o],t[o]);for(;o<n;++o)s[o]=t[o];return function(a){for(o=0;o<r;++o)s[o]=i[o](a);return s}}function WQ(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function kn(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function HQ(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=rd(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var dS=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,zw=new RegExp(dS.source,"g");function GQ(e){return function(){return e}}function XQ(e){return function(t){return e(t)+""}}function AF(e,t){var n=dS.lastIndex=zw.lastIndex=0,r,i,s,o=-1,a=[],l=[];for(e=e+"",t=t+"";(r=dS.exec(e))&&(i=zw.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,l.push({i:o,x:kn(r,i)})),n=zw.lastIndex;return n<t.length&&(s=t.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?l[0]?XQ(l[0].x):GQ(t):(t=l.length,function(c){for(var u=0,f;u<t;++u)a[(f=l[u]).i]=f.x(c);return a.join("")})}function rd(e,t){var n=typeof t,r;return t==null||n==="boolean"?Zb(t):(n==="number"?kn:n==="string"?(r=Pa(t))?(t=r,_c):AF:t instanceof Pa?_c:t instanceof Date?WQ:YQ(t)?VQ:Array.isArray(t)?qQ:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?HQ:kn)(e,t)}function m3(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var t6=180/Math.PI,hS={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function MF(e,t,n,r,i,s){var o,a,l;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,l/=a),e*r<t*n&&(e=-e,t=-t,l=-l,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*t6,skewX:Math.atan(l)*t6,scaleX:o,scaleY:a}}var p0;function QQ(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?hS:MF(t.a,t.b,t.c,t.d,t.e,t.f)}function KQ(e){return e==null||(p0||(p0=document.createElementNS("http://www.w3.org/2000/svg","g")),p0.setAttribute("transform",e),!(e=p0.transform.baseVal.consolidate()))?hS:(e=e.matrix,MF(e.a,e.b,e.c,e.d,e.e,e.f))}function $F(e,t,n,r){function i(c){return c.length?c.pop()+" ":""}function s(c,u,f,d,h,p){if(c!==f||u!==d){var g=h.push("translate(",null,t,null,n);p.push({i:g-4,x:kn(c,f)},{i:g-2,x:kn(u,d)})}else(f||d)&&h.push("translate("+f+t+d+n)}function o(c,u,f,d){c!==u?(c-u>180?u+=360:u-c>180&&(c+=360),d.push({i:f.push(i(f)+"rotate(",null,r)-2,x:kn(c,u)})):u&&f.push(i(f)+"rotate("+u+r)}function a(c,u,f,d){c!==u?d.push({i:f.push(i(f)+"skewX(",null,r)-2,x:kn(c,u)}):u&&f.push(i(f)+"skewX("+u+r)}function l(c,u,f,d,h,p){if(c!==f||u!==d){var g=h.push(i(h)+"scale(",null,",",null,")");p.push({i:g-4,x:kn(c,f)},{i:g-2,x:kn(u,d)})}else(f!==1||d!==1)&&h.push(i(h)+"scale("+f+","+d+")")}return function(c,u){var f=[],d=[];return c=e(c),u=e(u),s(c.translateX,c.translateY,u.translateX,u.translateY,f,d),o(c.rotate,u.rotate,f,d),a(c.skewX,u.skewX,f,d),l(c.scaleX,c.scaleY,u.scaleX,u.scaleY,f,d),c=u=null,function(h){for(var p=-1,g=d.length,v;++p<g;)f[(v=d[p]).i]=v.x(h);return f.join("")}}}var ZQ=$F(QQ,"px, ","px)","deg)"),JQ=$F(KQ,", ",")",")"),tK=1e-12;function e6(e){return((e=Math.exp(e))+1/e)/2}function eK(e){return((e=Math.exp(e))-1/e)/2}function nK(e){return((e=Math.exp(2*e))-1)/(e+1)}const rK=function e(t,n,r){function i(s,o){var a=s[0],l=s[1],c=s[2],u=o[0],f=o[1],d=o[2],h=u-a,p=f-l,g=h*h+p*p,v,y;if(g<tK)y=Math.log(d/c)/t,v=function(x){return[a+x*h,l+x*p,c*Math.exp(t*x*y)]};else{var m=Math.sqrt(g),b=(d*d-c*c+r*g)/(2*c*n*m),w=(d*d-c*c-r*g)/(2*d*n*m),S=Math.log(Math.sqrt(b*b+1)-b),_=Math.log(Math.sqrt(w*w+1)-w);y=(_-S)/t,v=function(x){var T=x*y,N=e6(S),I=c/(n*m)*(N*nK(t*T+S)-eK(S));return[a+I*h,l+I*p,c*N/e6(t*T+S)]}}return v.duration=y*1e3*t/Math.SQRT2,v}return i.rho=function(s){var o=Math.max(.001,+s),a=o*o,l=a*a;return e(o,a,l)},i}(Math.SQRT2,2,4);function iK(e){return function(t,n){var r=e((t=cS(t)).h,(n=cS(n)).h),i=Bn(t.s,n.s),s=Bn(t.l,n.l),o=Bn(t.opacity,n.opacity);return function(a){return t.h=r(a),t.s=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const sK=iK(y3);function oK(e,t){var n=Bn((e=uS(e)).l,(t=uS(t)).l),r=Bn(e.a,t.a),i=Bn(e.b,t.b),s=Bn(e.opacity,t.opacity);return function(o){return e.l=n(o),e.a=r(o),e.b=i(o),e.opacity=s(o),e+""}}function aK(e){return function(t,n){var r=e((t=fS(t)).h,(n=fS(n)).h),i=Bn(t.c,n.c),s=Bn(t.l,n.l),o=Bn(t.opacity,n.opacity);return function(a){return t.h=r(a),t.c=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const lK=aK(y3);function NF(e){return function t(n){n=+n;function r(i,s){var o=e((i=Cs(i)).h,(s=Cs(s)).h),a=Bn(i.s,s.s),l=Bn(i.l,s.l),c=Bn(i.opacity,s.opacity);return function(u){return i.h=o(u),i.s=a(u),i.l=l(Math.pow(u,n)),i.opacity=c(u),i+""}}return r.gamma=t,r}(1)}NF(y3);var g3=NF(Bn);function Jb(e,t){t===void 0&&(t=e,e=rd);for(var n=0,r=t.length-1,i=t[0],s=new Array(r<0?0:r);n<r;)s[n]=e(i,i=t[++n]);return function(o){var a=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return s[a](o-a)}}function Vi(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}var Tf=0,ih=0,kd=0,DF=1e3,Ug,sh,Pg=0,Sc=0,tv=0,pp=typeof performance=="object"&&performance.now?performance:Date,kF=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function b3(){return Sc||(kF(cK),Sc=pp.now()+tv)}function cK(){Sc=0}function zg(){this._call=this._time=this._next=null}zg.prototype=OF.prototype={constructor:zg,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?b3():+n)+(t==null?0:+t),!this._next&&sh!==this&&(sh?sh._next=this:Ug=this,sh=this),this._call=e,this._time=n,pS()},stop:function(){this._call&&(this._call=null,this._time=1/0,pS())}};function OF(e,t,n){var r=new zg;return r.restart(e,t,n),r}function uK(){b3(),++Tf;for(var e=Ug,t;e;)(t=Sc-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Tf}function n6(){Sc=(Pg=pp.now())+tv,Tf=ih=0;try{uK()}finally{Tf=0,dK(),Sc=0}}function fK(){var e=pp.now(),t=e-Pg;t>DF&&(tv-=t,Pg=e)}function dK(){for(var e,t=Ug,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Ug=n);sh=e,pS(r)}function pS(e){if(!Tf){ih&&(ih=clearTimeout(ih));var t=e-Sc;t>24?(e<1/0&&(ih=setTimeout(n6,e-pp.now()-tv)),kd&&(kd=clearInterval(kd))):(kd||(Pg=pp.now(),kd=setInterval(fK,DF)),Tf=1,kF(n6))}}function r6(e,t,n){var r=new zg;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var hK=Gb("start","end","cancel","interrupt"),pK=[],FF=0,i6=1,yS=2,pm=3,s6=4,mS=5,ym=6;function ev(e,t,n,r,i,s){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;yK(e,n,{name:t,index:r,group:i,on:hK,tween:pK,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:FF})}function v3(e,t){var n=Qi(e,t);if(n.state>FF)throw new Error("too late; already scheduled");return n}function js(e,t){var n=Qi(e,t);if(n.state>pm)throw new Error("too late; already running");return n}function Qi(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function yK(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=OF(s,0,n.time);function s(c){n.state=i6,n.timer.restart(o,n.delay,n.time),n.delay<=c&&o(c-n.delay)}function o(c){var u,f,d,h;if(n.state!==i6)return l();for(u in r)if(h=r[u],h.name===n.name){if(h.state===pm)return r6(o);h.state===s6?(h.state=ym,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[u]):+u<t&&(h.state=ym,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[u])}if(r6(function(){n.state===pm&&(n.state=s6,n.timer.restart(a,n.delay,n.time),a(c))}),n.state=yS,n.on.call("start",e,e.__data__,n.index,n.group),n.state===yS){for(n.state=pm,i=new Array(d=n.tween.length),u=0,f=-1;u<d;++u)(h=n.tween[u].value.call(e,e.__data__,n.index,n.group))&&(i[++f]=h);i.length=f+1}}function a(c){for(var u=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(l),n.state=mS,1),f=-1,d=i.length;++f<d;)i[f].call(e,u);n.state===mS&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=ym,n.timer.stop(),delete r[t];for(var c in r)return;delete e.__transition}}function Qu(e,t){var n=e.__transition,r,i,s=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){s=!1;continue}i=r.state>yS&&r.state<mS,r.state=ym,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}s&&delete e.__transition}}function mK(e){return this.each(function(){Qu(this,e)})}function gK(e,t){var n,r;return function(){var i=js(this,e),s=i.tween;if(s!==n){r=n=s;for(var o=0,a=r.length;o<a;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function bK(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=js(this,e),o=s.tween;if(o!==r){i=(r=o).slice();for(var a={name:t,value:n},l=0,c=i.length;l<c;++l)if(i[l].name===t){i[l]=a;break}l===c&&i.push(a)}s.tween=i}}function vK(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Qi(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?gK:bK)(n,e,t))}function w3(e,t,n){var r=e._id;return e.each(function(){var i=js(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return Qi(i,r).value[t]}}function BF(e,t){var n;return(typeof t=="number"?kn:t instanceof Pa?_c:(n=Pa(t))?(t=n,_c):AF)(e,t)}function wK(e){return function(){this.removeAttribute(e)}}function _K(e){return function(){this.removeAttributeNS(e.space,e.local)}}function SK(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttribute(e);return o===i?null:o===r?s:s=t(r=o,n)}}function xK(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?s:s=t(r=o,n)}}function IK(e,t,n){var r,i,s;return function(){var o,a=n(this),l;return a==null?void this.removeAttribute(e):(o=this.getAttribute(e),l=a+"",o===l?null:o===r&&l===i?s:(i=l,s=t(r=o,a)))}}function EK(e,t,n){var r,i,s;return function(){var o,a=n(this),l;return a==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),l=a+"",o===l?null:o===r&&l===i?s:(i=l,s=t(r=o,a)))}}function TK(e,t){var n=Xb(e),r=n==="transform"?JQ:BF;return this.attrTween(e,typeof t=="function"?(n.local?EK:IK)(n,r,w3(this,"attr."+e,t)):t==null?(n.local?_K:wK)(n):(n.local?xK:SK)(n,r,t))}function AK(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function MK(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function $K(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&MK(e,s)),n}return i._value=t,i}function NK(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&AK(e,s)),n}return i._value=t,i}function DK(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=Xb(e);return this.tween(n,(r.local?$K:NK)(r,t))}function kK(e,t){return function(){v3(this,e).delay=+t.apply(this,arguments)}}function OK(e,t){return t=+t,function(){v3(this,e).delay=t}}function FK(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?kK:OK)(t,e)):Qi(this.node(),t).delay}function BK(e,t){return function(){js(this,e).duration=+t.apply(this,arguments)}}function RK(e,t){return t=+t,function(){js(this,e).duration=t}}function LK(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?BK:RK)(t,e)):Qi(this.node(),t).duration}function CK(e,t){if(typeof t!="function")throw new Error;return function(){js(this,e).ease=t}}function UK(e){var t=this._id;return arguments.length?this.each(CK(t,e)):Qi(this.node(),t).ease}function PK(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;js(this,e).ease=n}}function zK(e){if(typeof e!="function")throw new Error;return this.each(PK(this._id,e))}function jK(e){typeof e!="function"&&(e=rF(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],l,c=0;c<o;++c)(l=s[c])&&e.call(l,l.__data__,c,s)&&a.push(l);return new Ro(r,this._parents,this._name,this._id)}function VK(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var l=t[a],c=n[a],u=l.length,f=o[a]=new Array(u),d,h=0;h<u;++h)(d=l[h]||c[h])&&(f[h]=d);for(;a<r;++a)o[a]=t[a];return new Ro(o,this._parents,this._name,this._id)}function YK(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function qK(e,t,n){var r,i,s=YK(t)?v3:js;return function(){var o=s(this,e),a=o.on;a!==r&&(i=(r=a).copy()).on(t,n),o.on=i}}function WK(e,t){var n=this._id;return arguments.length<2?Qi(this.node(),n).on.on(e):this.each(qK(n,e,t))}function HK(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function GK(){return this.on("end.remove",HK(this._id))}function XK(e){var t=this._name,n=this._id;typeof e!="function"&&(e=u3(e));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a=r[o],l=a.length,c=s[o]=new Array(l),u,f,d=0;d<l;++d)(u=a[d])&&(f=e.call(u,u.__data__,d,a))&&("__data__"in u&&(f.__data__=u.__data__),c[d]=f,ev(c[d],t,n,d,c,Qi(u,n)));return new Ro(s,this._parents,t,n)}function QK(e){var t=this._name,n=this._id;typeof e!="function"&&(e=nF(e));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var l=r[a],c=l.length,u,f=0;f<c;++f)if(u=l[f]){for(var d=e.call(u,u.__data__,f,l),h,p=Qi(u,n),g=0,v=d.length;g<v;++g)(h=d[g])&&ev(h,t,n,g,d,p);s.push(d),o.push(u)}return new Ro(s,o,t,n)}var KK=ry.prototype.constructor;function ZK(){return new KK(this._groups,this._parents)}function JK(e,t){var n,r,i;return function(){var s=If(this,e),o=(this.style.removeProperty(e),If(this,e));return s===o?null:s===n&&o===r?i:i=t(n=s,r=o)}}function RF(e){return function(){this.style.removeProperty(e)}}function tZ(e,t,n){var r,i=n+"",s;return function(){var o=If(this,e);return o===i?null:o===r?s:s=t(r=o,n)}}function eZ(e,t,n){var r,i,s;return function(){var o=If(this,e),a=n(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(e),If(this,e))),o===l?null:o===r&&l===i?s:(i=l,s=t(r=o,a))}}function nZ(e,t){var n,r,i,s="style."+t,o="end."+s,a;return function(){var l=js(this,e),c=l.on,u=l.value[s]==null?a||(a=RF(t)):void 0;(c!==n||i!==u)&&(r=(n=c).copy()).on(o,i=u),l.on=r}}function rZ(e,t,n){var r=(e+="")=="transform"?ZQ:BF;return t==null?this.styleTween(e,JK(e,r)).on("end.style."+e,RF(e)):typeof t=="function"?this.styleTween(e,eZ(e,r,w3(this,"style."+e,t))).each(nZ(this._id,e)):this.styleTween(e,tZ(e,r,t),n).on("end.style."+e,null)}function iZ(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function sZ(e,t,n){var r,i;function s(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&iZ(e,o,n)),r}return s._value=t,s}function oZ(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,sZ(e,t,n??""))}function aZ(e){return function(){this.textContent=e}}function lZ(e){return function(){var t=e(this);this.textContent=t??""}}function cZ(e){return this.tween("text",typeof e=="function"?lZ(w3(this,"text",e)):aZ(e==null?"":e+""))}function uZ(e){return function(t){this.textContent=e.call(this,t)}}function fZ(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&uZ(i)),t}return r._value=e,r}function dZ(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,fZ(e))}function hZ(){for(var e=this._name,t=this._id,n=LF(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,l,c=0;c<a;++c)if(l=o[c]){var u=Qi(l,t);ev(l,e,n,c,o,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new Ro(r,this._parents,e,n)}function pZ(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var a={value:o},l={value:function(){--i===0&&s()}};n.each(function(){var c=js(this,r),u=c.on;u!==e&&(t=(e=u).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(l)),c.on=t}),i===0&&s()})}var yZ=0;function Ro(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function LF(){return++yZ}var Ws=ry.prototype;Ro.prototype={constructor:Ro,select:XK,selectAll:QK,selectChild:Ws.selectChild,selectChildren:Ws.selectChildren,filter:jK,merge:VK,selection:ZK,transition:hZ,call:Ws.call,nodes:Ws.nodes,node:Ws.node,size:Ws.size,empty:Ws.empty,each:Ws.each,on:WK,attr:TK,attrTween:DK,style:rZ,styleTween:oZ,text:cZ,textTween:dZ,remove:GK,tween:vK,delay:FK,duration:LK,ease:UK,easeVarying:zK,end:pZ,[Symbol.iterator]:Ws[Symbol.iterator]};function mZ(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var gZ={time:null,delay:0,duration:250,ease:mZ};function bZ(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function vZ(e){var t,n;e instanceof Ro?(t=e._id,e=e._name):(t=LF(),(n=gZ).time=b3(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,l,c=0;c<a;++c)(l=o[c])&&ev(l,e,t,c,o,n||bZ(l,t));return new Ro(r,this._parents,e,t)}ry.prototype.interrupt=mK;ry.prototype.transition=vZ;const jw=e=>()=>e;function wZ(e,{sourceEvent:t,target:n,selection:r,mode:i,dispatch:s}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:s}})}function _Z(e){e.stopImmediatePropagation()}function Vw(e){e.preventDefault(),e.stopImmediatePropagation()}var o6={name:"drag"},Yw={name:"space"},zc={name:"handle"},jc={name:"center"};const{abs:a6,max:Mn,min:$n}=Math;function l6(e){return[+e[0],+e[1]]}function gS(e){return[l6(e[0]),l6(e[1])]}var mm={name:"x",handles:["w","e"].map(yp),input:function(e,t){return e==null?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},gm={name:"y",handles:["n","s"].map(yp),input:function(e,t){return e==null?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},SZ={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(yp),input:function(e){return e==null?null:gS(e)},output:function(e){return e}},Hs={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},c6={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},u6={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},xZ={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},IZ={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function yp(e){return{type:e}}function EZ(e){return!e.ctrlKey&&!e.button}function TZ(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function AZ(){return navigator.maxTouchPoints||"ontouchstart"in this}function qw(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function MZ(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function $Z(){return _3(mm)}function NZ(){return _3(gm)}function DZ(){return _3(SZ)}function _3(e){var t=TZ,n=EZ,r=AZ,i=!0,s=Gb("start","brush","end"),o=6,a;function l(v){var y=v.property("__brush",g).selectAll(".overlay").data([yp("overlay")]);y.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Hs.overlay).merge(y).each(function(){var b=qw(this).extent;ye(this).attr("x",b[0][0]).attr("y",b[0][1]).attr("width",b[1][0]-b[0][0]).attr("height",b[1][1]-b[0][1])}),v.selectAll(".selection").data([yp("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Hs.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var m=v.selectAll(".handle").data(e.handles,function(b){return b.type});m.exit().remove(),m.enter().append("rect").attr("class",function(b){return"handle handle--"+b.type}).attr("cursor",function(b){return Hs[b.type]}),v.each(c).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",d).filter(r).on("touchstart.brush",d).on("touchmove.brush",h).on("touchend.brush touchcancel.brush",p).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}l.move=function(v,y,m){v.tween?v.on("start.brush",function(b){u(this,arguments).beforestart().start(b)}).on("interrupt.brush end.brush",function(b){u(this,arguments).end(b)}).tween("brush",function(){var b=this,w=b.__brush,S=u(b,arguments),_=w.selection,x=e.input(typeof y=="function"?y.apply(this,arguments):y,w.extent),T=rd(_,x);function N(I){w.selection=I===1&&x===null?null:T(I),c.call(b),S.brush()}return _!==null&&x!==null?N:N(1)}):v.each(function(){var b=this,w=arguments,S=b.__brush,_=e.input(typeof y=="function"?y.apply(b,w):y,S.extent),x=u(b,w).beforestart();Qu(b),S.selection=_===null?null:_,c.call(b),x.start(m).brush(m).end(m)})},l.clear=function(v,y){l.move(v,null,y)};function c(){var v=ye(this),y=qw(this).selection;y?(v.selectAll(".selection").style("display",null).attr("x",y[0][0]).attr("y",y[0][1]).attr("width",y[1][0]-y[0][0]).attr("height",y[1][1]-y[0][1]),v.selectAll(".handle").style("display",null).attr("x",function(m){return m.type[m.type.length-1]==="e"?y[1][0]-o/2:y[0][0]-o/2}).attr("y",function(m){return m.type[0]==="s"?y[1][1]-o/2:y[0][1]-o/2}).attr("width",function(m){return m.type==="n"||m.type==="s"?y[1][0]-y[0][0]+o:o}).attr("height",function(m){return m.type==="e"||m.type==="w"?y[1][1]-y[0][1]+o:o})):v.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function u(v,y,m){var b=v.__brush.emitter;return b&&(!m||!b.clean)?b:new f(v,y,m)}function f(v,y,m){this.that=v,this.args=y,this.state=v.__brush,this.active=0,this.clean=m}f.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(v,y){return this.starting?(this.starting=!1,this.emit("start",v,y)):this.emit("brush",v),this},brush:function(v,y){return this.emit("brush",v,y),this},end:function(v,y){return--this.active===0&&(delete this.state.emitter,this.emit("end",v,y)),this},emit:function(v,y,m){var b=ye(this.that).datum();s.call(v,this.that,new wZ(v,{sourceEvent:y,target:l,selection:e.output(this.state.selection),mode:m,dispatch:s}),b)}};function d(v){if(a&&!v.touches||!n.apply(this,arguments))return;var y=this,m=v.target.__data__.type,b=(i&&v.metaKey?m="overlay":m)==="selection"?o6:i&&v.altKey?jc:zc,w=e===gm?null:xZ[m],S=e===mm?null:IZ[m],_=qw(y),x=_.extent,T=_.selection,N=x[0][0],I,A,k=x[0][1],R,E,M=x[1][0],$,B,O=x[1][1],C,F,P=0,z=0,H,X=w&&S&&i&&v.shiftKey,tt,Z,Y=Array.from(v.touches||[v],st=>{const de=st.identifier;return st=Mi(st,y),st.point0=st.slice(),st.identifier=de,st});Qu(y);var Q=u(y,arguments,!0).beforestart();if(m==="overlay"){T&&(H=!0);const st=[Y[0],Y[1]||Y[0]];_.selection=T=[[I=e===gm?N:$n(st[0][0],st[1][0]),R=e===mm?k:$n(st[0][1],st[1][1])],[$=e===gm?M:Mn(st[0][0],st[1][0]),C=e===mm?O:Mn(st[0][1],st[1][1])]],Y.length>1&&At(v)}else I=T[0][0],R=T[0][1],$=T[1][0],C=T[1][1];A=I,E=R,B=$,F=C;var V=ye(y).attr("pointer-events","none"),J=V.selectAll(".overlay").attr("cursor",Hs[m]);if(v.touches)Q.moved=j,Q.ended=ot;else{var et=ye(v.view).on("mousemove.brush",j,!0).on("mouseup.brush",ot,!0);i&&et.on("keydown.brush",Vt,!0).on("keyup.brush",Ht,!0),hF(v.view)}c.call(y),Q.start(v,b.name);function j(st){for(const de of st.changedTouches||[st])for(const Ji of Y)Ji.identifier===de.identifier&&(Ji.cur=Mi(de,y));if(X&&!tt&&!Z&&Y.length===1){const de=Y[0];a6(de.cur[0]-de[0])>a6(de.cur[1]-de[1])?Z=!0:tt=!0}for(const de of Y)de.cur&&(de[0]=de.cur[0],de[1]=de.cur[1]);H=!0,Vw(st),At(st)}function At(st){const de=Y[0],Ji=de.point0;var qr;switch(P=de[0]-Ji[0],z=de[1]-Ji[1],b){case Yw:case o6:{w&&(P=Mn(N-I,$n(M-$,P)),A=I+P,B=$+P),S&&(z=Mn(k-R,$n(O-C,z)),E=R+z,F=C+z);break}case zc:{Y[1]?(w&&(A=Mn(N,$n(M,Y[0][0])),B=Mn(N,$n(M,Y[1][0])),w=1),S&&(E=Mn(k,$n(O,Y[0][1])),F=Mn(k,$n(O,Y[1][1])),S=1)):(w<0?(P=Mn(N-I,$n(M-I,P)),A=I+P,B=$):w>0&&(P=Mn(N-$,$n(M-$,P)),A=I,B=$+P),S<0?(z=Mn(k-R,$n(O-R,z)),E=R+z,F=C):S>0&&(z=Mn(k-C,$n(O-C,z)),E=R,F=C+z));break}case jc:{w&&(A=Mn(N,$n(M,I-P*w)),B=Mn(N,$n(M,$+P*w))),S&&(E=Mn(k,$n(O,R-z*S)),F=Mn(k,$n(O,C+z*S)));break}}B<A&&(w*=-1,qr=I,I=$,$=qr,qr=A,A=B,B=qr,m in c6&&J.attr("cursor",Hs[m=c6[m]])),F<E&&(S*=-1,qr=R,R=C,C=qr,qr=E,E=F,F=qr,m in u6&&J.attr("cursor",Hs[m=u6[m]])),_.selection&&(T=_.selection),tt&&(A=T[0][0],B=T[1][0]),Z&&(E=T[0][1],F=T[1][1]),(T[0][0]!==A||T[0][1]!==E||T[1][0]!==B||T[1][1]!==F)&&(_.selection=[[A,E],[B,F]],c.call(y),Q.brush(st,b.name))}function ot(st){if(_Z(st),st.touches){if(st.touches.length)return;a&&clearTimeout(a),a=setTimeout(function(){a=null},500)}else pF(st.view,H),et.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);V.attr("pointer-events","all"),J.attr("cursor",Hs.overlay),_.selection&&(T=_.selection),MZ(T)&&(_.selection=null,c.call(y)),Q.end(st,b.name)}function Vt(st){switch(st.keyCode){case 16:{X=w&&S;break}case 18:{b===zc&&(w&&($=B-P*w,I=A+P*w),S&&(C=F-z*S,R=E+z*S),b=jc,At(st));break}case 32:{(b===zc||b===jc)&&(w<0?$=B-P:w>0&&(I=A-P),S<0?C=F-z:S>0&&(R=E-z),b=Yw,J.attr("cursor",Hs.selection),At(st));break}default:return}Vw(st)}function Ht(st){switch(st.keyCode){case 16:{X&&(tt=Z=X=!1,At(st));break}case 18:{b===jc&&(w<0?$=B:w>0&&(I=A),S<0?C=F:S>0&&(R=E),b=zc,At(st));break}case 32:{b===Yw&&(st.altKey?(w&&($=B-P*w,I=A+P*w),S&&(C=F-z*S,R=E+z*S),b=jc):(w<0?$=B:w>0&&(I=A),S<0?C=F:S>0&&(R=E),b=zc),J.attr("cursor",Hs[m]),At(st));break}default:return}Vw(st)}}function h(v){u(this,arguments).moved(v)}function p(v){u(this,arguments).ended(v)}function g(){var v=this.__brush||{selection:null};return v.extent=gS(t.apply(this,arguments)),v.dim=e,v}return l.extent=function(v){return arguments.length?(t=typeof v=="function"?v:jw(gS(v)),l):t},l.filter=function(v){return arguments.length?(n=typeof v=="function"?v:jw(!!v),l):n},l.touchable=function(v){return arguments.length?(r=typeof v=="function"?v:jw(!!v),l):r},l.handleSize=function(v){return arguments.length?(o=+v,l):o},l.keyModifiers=function(v){return arguments.length?(i=!!v,l):i},l.on=function(){var v=s.on.apply(s,arguments);return v===s?l:v},l}const bS=Math.PI,vS=2*bS,Dl=1e-6,kZ=vS-Dl;function CF(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function OZ(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return CF;const n=10**t;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let UF=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?CF:OZ(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,s,o){this._append`C${+t},${+n},${+r},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(t,n,r,i,s){if(t=+t,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,l=r-t,c=i-n,u=o-t,f=a-n,d=u*u+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(d>Dl)if(!(Math.abs(f*l-c*u)>Dl)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let h=r-o,p=i-a,g=l*l+c*c,v=h*h+p*p,y=Math.sqrt(g),m=Math.sqrt(d),b=s*Math.tan((bS-Math.acos((g+d-v)/(2*y*m)))/2),w=b/m,S=b/y;Math.abs(w-1)>Dl&&this._append`L${t+w*u},${n+w*f}`,this._append`A${s},${s},0,0,${+(f*h>u*p)},${this._x1=t+S*l},${this._y1=n+S*c}`}}arc(t,n,r,i,s,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),l=r*Math.sin(i),c=t+a,u=n+l,f=1^o,d=o?i-s:s-i;this._x1===null?this._append`M${c},${u}`:(Math.abs(this._x1-c)>Dl||Math.abs(this._y1-u)>Dl)&&this._append`L${c},${u}`,r&&(d<0&&(d=d%vS+vS),d>kZ?this._append`A${r},${r},0,1,${f},${t-a},${n-l}A${r},${r},0,1,${f},${this._x1=c},${this._y1=u}`:d>Dl&&this._append`A${r},${r},0,${+(d>=bS)},${f},${this._x1=t+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function _o(e=3){return new UF(+e)}var FZ=Array.prototype,PF=FZ.slice;function BZ(e,t){return e-t}function RZ(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}const la=e=>()=>e;function LZ(e,t){for(var n=-1,r=t.length,i;++n<r;)if(i=CZ(e,t[n]))return i;return 0}function CZ(e,t){for(var n=t[0],r=t[1],i=-1,s=0,o=e.length,a=o-1;s<o;a=s++){var l=e[s],c=l[0],u=l[1],f=e[a],d=f[0],h=f[1];if(UZ(l,f,t))return 0;u>r!=h>r&&n<(d-c)*(r-u)/(h-u)+c&&(i=-i)}return i}function UZ(e,t,n){var r;return PZ(e,t,n)&&zZ(e[r=+(e[0]===t[0])],n[r],t[r])}function PZ(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function zZ(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function jZ(){}var Gs=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function jg(){var e=1,t=1,n=l3,r=l;function i(c){var u=n(c);if(Array.isArray(u))u=u.slice().sort(BZ);else{const f=yn(c,VZ);for(u=Ca(...QO(f[0],f[1],u),u);u[u.length-1]>=f[1];)u.pop();for(;u[1]<f[0];)u.shift()}return u.map(f=>s(c,f))}function s(c,u){const f=u==null?NaN:+u;if(isNaN(f))throw new Error(`invalid value: ${u}`);var d=[],h=[];return o(c,f,function(p){r(p,c,f),RZ(p)>0?d.push([p]):h.push(p)}),h.forEach(function(p){for(var g=0,v=d.length,y;g<v;++g)if(LZ((y=d[g])[0],p)!==-1){y.push(p);return}}),{type:"MultiPolygon",value:u,coordinates:d}}function o(c,u,f){var d=new Array,h=new Array,p,g,v,y,m,b;for(p=g=-1,y=gl(c[0],u),Gs[y<<1].forEach(w);++p<e-1;)v=y,y=gl(c[p+1],u),Gs[v|y<<1].forEach(w);for(Gs[y<<0].forEach(w);++g<t-1;){for(p=-1,y=gl(c[g*e+e],u),m=gl(c[g*e],u),Gs[y<<1|m<<2].forEach(w);++p<e-1;)v=y,y=gl(c[g*e+e+p+1],u),b=m,m=gl(c[g*e+p+1],u),Gs[v|y<<1|m<<2|b<<3].forEach(w);Gs[y|m<<3].forEach(w)}for(p=-1,m=c[g*e]>=u,Gs[m<<2].forEach(w);++p<e-1;)b=m,m=gl(c[g*e+p+1],u),Gs[m<<2|b<<3].forEach(w);Gs[m<<3].forEach(w);function w(S){var _=[S[0][0]+p,S[0][1]+g],x=[S[1][0]+p,S[1][1]+g],T=a(_),N=a(x),I,A;(I=h[T])?(A=d[N])?(delete h[I.end],delete d[A.start],I===A?(I.ring.push(x),f(I.ring)):d[I.start]=h[A.end]={start:I.start,end:A.end,ring:I.ring.concat(A.ring)}):(delete h[I.end],I.ring.push(x),h[I.end=N]=I):(I=d[N])?(A=h[T])?(delete d[I.start],delete h[A.end],I===A?(I.ring.push(x),f(I.ring)):d[A.start]=h[I.end]={start:A.start,end:I.end,ring:A.ring.concat(I.ring)}):(delete d[I.start],I.ring.unshift(_),d[I.start=T]=I):d[T]=h[N]={start:T,end:N,ring:[_,x]}}}function a(c){return c[0]*2+c[1]*(e+1)*4}function l(c,u,f){c.forEach(function(d){var h=d[0],p=d[1],g=h|0,v=p|0,y=Ww(u[v*e+g]);h>0&&h<e&&g===h&&(d[0]=f6(h,Ww(u[v*e+g-1]),y,f)),p>0&&p<t&&v===p&&(d[1]=f6(p,Ww(u[(v-1)*e+g]),y,f))})}return i.contour=s,i.size=function(c){if(!arguments.length)return[e,t];var u=Math.floor(c[0]),f=Math.floor(c[1]);if(!(u>=0&&f>=0))throw new Error("invalid size");return e=u,t=f,i},i.thresholds=function(c){return arguments.length?(n=typeof c=="function"?c:Array.isArray(c)?la(PF.call(c)):la(c),i):n},i.smooth=function(c){return arguments.length?(r=c?l:jZ,i):r===l},i}function VZ(e){return isFinite(e)?e:NaN}function gl(e,t){return e==null?!1:+e>=t}function Ww(e){return e==null||isNaN(e=+e)?-1/0:e}function f6(e,t,n,r){const i=r-t,s=n-t,o=isFinite(i)||isFinite(s)?i/s:Math.sign(i)/Math.sign(s);return isNaN(o)?e:e+o-.5}function YZ(e){return e[0]}function qZ(e){return e[1]}function WZ(){return 1}function HZ(){var e=YZ,t=qZ,n=WZ,r=960,i=500,s=20,o=2,a=s*3,l=r+a*2>>o,c=i+a*2>>o,u=la(20);function f(m){var b=new Float32Array(l*c),w=Math.pow(2,-o),S=-1;for(const R of m){var _=(e(R,++S,m)+a)*w,x=(t(R,S,m)+a)*w,T=+n(R,S,m);if(T&&_>=0&&_<l&&x>=0&&x<c){var N=Math.floor(_),I=Math.floor(x),A=_-N-.5,k=x-I-.5;b[N+I*l]+=(1-A)*(1-k)*T,b[N+1+I*l]+=A*(1-k)*T,b[N+1+(I+1)*l]+=A*k*T,b[N+(I+1)*l]+=(1-A)*k*T}}return YO({data:b,width:l,height:c},s*w),b}function d(m){var b=f(m),w=u(b),S=Math.pow(2,2*o);return Array.isArray(w)||(w=Ca(Number.MIN_VALUE,$e(b)/S,w)),jg().size([l,c]).thresholds(w.map(_=>_*S))(b).map((_,x)=>(_.value=+w[x],h(_)))}d.contours=function(m){var b=f(m),w=jg().size([l,c]),S=Math.pow(2,2*o),_=x=>{x=+x;var T=h(w.contour(b,x*S));return T.value=x,T};return Object.defineProperty(_,"max",{get:()=>$e(b)/S}),_};function h(m){return m.coordinates.forEach(p),m}function p(m){m.forEach(g)}function g(m){m.forEach(v)}function v(m){m[0]=m[0]*Math.pow(2,o)-a,m[1]=m[1]*Math.pow(2,o)-a}function y(){return a=s*3,l=r+a*2>>o,c=i+a*2>>o,d}return d.x=function(m){return arguments.length?(e=typeof m=="function"?m:la(+m),d):e},d.y=function(m){return arguments.length?(t=typeof m=="function"?m:la(+m),d):t},d.weight=function(m){return arguments.length?(n=typeof m=="function"?m:la(+m),d):n},d.size=function(m){if(!arguments.length)return[r,i];var b=+m[0],w=+m[1];if(!(b>=0&&w>=0))throw new Error("invalid size");return r=b,i=w,y()},d.cellSize=function(m){if(!arguments.length)return 1<<o;if(!((m=+m)>=1))throw new Error("invalid cell size");return o=Math.floor(Math.log(m)/Math.LN2),y()},d.thresholds=function(m){return arguments.length?(u=typeof m=="function"?m:Array.isArray(m)?la(PF.call(m)):la(m),d):u},d.bandwidth=function(m){if(!arguments.length)return Math.sqrt(s*(s+1));if(!((m=+m)>=0))throw new Error("invalid bandwidth");return s=(Math.sqrt(4*m*m+1)-1)/2,y()},d}const To=11102230246251565e-32,Nn=134217729,GZ=(3+8*To)*To;function Hw(e,t,n,r,i){let s,o,a,l,c=t[0],u=r[0],f=0,d=0;u>c==u>-c?(s=c,c=t[++f]):(s=u,u=r[++d]);let h=0;if(f<e&&d<n)for(u>c==u>-c?(o=c+s,a=s-(o-c),c=t[++f]):(o=u+s,a=s-(o-u),u=r[++d]),s=o,a!==0&&(i[h++]=a);f<e&&d<n;)u>c==u>-c?(o=s+c,l=o-s,a=s-(o-l)+(c-l),c=t[++f]):(o=s+u,l=o-s,a=s-(o-l)+(u-l),u=r[++d]),s=o,a!==0&&(i[h++]=a);for(;f<e;)o=s+c,l=o-s,a=s-(o-l)+(c-l),c=t[++f],s=o,a!==0&&(i[h++]=a);for(;d<n;)o=s+u,l=o-s,a=s-(o-l)+(u-l),u=r[++d],s=o,a!==0&&(i[h++]=a);return(s!==0||h===0)&&(i[h++]=s),h}function XZ(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}function sy(e){return new Float64Array(e)}const QZ=(3+16*To)*To,KZ=(2+12*To)*To,ZZ=(9+64*To)*To*To,Vc=sy(4),d6=sy(8),h6=sy(12),p6=sy(16),Cn=sy(4);function JZ(e,t,n,r,i,s,o){let a,l,c,u,f,d,h,p,g,v,y,m,b,w,S,_,x,T;const N=e-i,I=n-i,A=t-s,k=r-s;w=N*k,d=Nn*N,h=d-(d-N),p=N-h,d=Nn*k,g=d-(d-k),v=k-g,S=p*v-(w-h*g-p*g-h*v),_=A*I,d=Nn*A,h=d-(d-A),p=A-h,d=Nn*I,g=d-(d-I),v=I-g,x=p*v-(_-h*g-p*g-h*v),y=S-x,f=S-y,Vc[0]=S-(y+f)+(f-x),m=w+y,f=m-w,b=w-(m-f)+(y-f),y=b-_,f=b-y,Vc[1]=b-(y+f)+(f-_),T=m+y,f=T-m,Vc[2]=m-(T-f)+(y-f),Vc[3]=T;let R=XZ(4,Vc),E=KZ*o;if(R>=E||-R>=E||(f=e-N,a=e-(N+f)+(f-i),f=n-I,c=n-(I+f)+(f-i),f=t-A,l=t-(A+f)+(f-s),f=r-k,u=r-(k+f)+(f-s),a===0&&l===0&&c===0&&u===0)||(E=ZZ*o+GZ*Math.abs(R),R+=N*u+k*a-(A*c+I*l),R>=E||-R>=E))return R;w=a*k,d=Nn*a,h=d-(d-a),p=a-h,d=Nn*k,g=d-(d-k),v=k-g,S=p*v-(w-h*g-p*g-h*v),_=l*I,d=Nn*l,h=d-(d-l),p=l-h,d=Nn*I,g=d-(d-I),v=I-g,x=p*v-(_-h*g-p*g-h*v),y=S-x,f=S-y,Cn[0]=S-(y+f)+(f-x),m=w+y,f=m-w,b=w-(m-f)+(y-f),y=b-_,f=b-y,Cn[1]=b-(y+f)+(f-_),T=m+y,f=T-m,Cn[2]=m-(T-f)+(y-f),Cn[3]=T;const M=Hw(4,Vc,4,Cn,d6);w=N*u,d=Nn*N,h=d-(d-N),p=N-h,d=Nn*u,g=d-(d-u),v=u-g,S=p*v-(w-h*g-p*g-h*v),_=A*c,d=Nn*A,h=d-(d-A),p=A-h,d=Nn*c,g=d-(d-c),v=c-g,x=p*v-(_-h*g-p*g-h*v),y=S-x,f=S-y,Cn[0]=S-(y+f)+(f-x),m=w+y,f=m-w,b=w-(m-f)+(y-f),y=b-_,f=b-y,Cn[1]=b-(y+f)+(f-_),T=m+y,f=T-m,Cn[2]=m-(T-f)+(y-f),Cn[3]=T;const $=Hw(M,d6,4,Cn,h6);w=a*u,d=Nn*a,h=d-(d-a),p=a-h,d=Nn*u,g=d-(d-u),v=u-g,S=p*v-(w-h*g-p*g-h*v),_=l*c,d=Nn*l,h=d-(d-l),p=l-h,d=Nn*c,g=d-(d-c),v=c-g,x=p*v-(_-h*g-p*g-h*v),y=S-x,f=S-y,Cn[0]=S-(y+f)+(f-x),m=w+y,f=m-w,b=w-(m-f)+(y-f),y=b-_,f=b-y,Cn[1]=b-(y+f)+(f-_),T=m+y,f=T-m,Cn[2]=m-(T-f)+(y-f),Cn[3]=T;const B=Hw($,h6,4,Cn,p6);return p6[B-1]}function y0(e,t,n,r,i,s){const o=(t-s)*(n-i),a=(e-i)*(r-s),l=o-a,c=Math.abs(o+a);return Math.abs(l)>=QZ*c?l:-JZ(e,t,n,r,i,s,c)}const y6=Math.pow(2,-52),m0=new Uint32Array(512);class Vg{static from(t,n=iJ,r=sJ){const i=t.length,s=new Float64Array(i*2);for(let o=0;o<i;o++){const a=t[o];s[2*o]=n(a),s[2*o+1]=r(a)}return new Vg(s)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:s}=this,o=t.length>>1;let a=1/0,l=1/0,c=-1/0,u=-1/0;for(let I=0;I<o;I++){const A=t[2*I],k=t[2*I+1];A<a&&(a=A),k<l&&(l=k),A>c&&(c=A),k>u&&(u=k),this._ids[I]=I}const f=(a+c)/2,d=(l+u)/2;let h=1/0,p,g,v;for(let I=0;I<o;I++){const A=Gw(f,d,t[2*I],t[2*I+1]);A<h&&(p=I,h=A)}const y=t[2*p],m=t[2*p+1];h=1/0;for(let I=0;I<o;I++){if(I===p)continue;const A=Gw(y,m,t[2*I],t[2*I+1]);A<h&&A>0&&(g=I,h=A)}let b=t[2*g],w=t[2*g+1],S=1/0;for(let I=0;I<o;I++){if(I===p||I===g)continue;const A=nJ(y,m,b,w,t[2*I],t[2*I+1]);A<S&&(v=I,S=A)}let _=t[2*v],x=t[2*v+1];if(S===1/0){for(let k=0;k<o;k++)this._dists[k]=t[2*k]-t[0]||t[2*k+1]-t[1];Mu(this._ids,this._dists,0,o-1);const I=new Uint32Array(o);let A=0;for(let k=0,R=-1/0;k<o;k++){const E=this._ids[k];this._dists[E]>R&&(I[A++]=E,R=this._dists[E])}this.hull=I.subarray(0,A),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(y0(y,m,b,w,_,x)<0){const I=g,A=b,k=w;g=v,b=_,w=x,v=I,_=A,x=k}const T=rJ(y,m,b,w,_,x);this._cx=T.x,this._cy=T.y;for(let I=0;I<o;I++)this._dists[I]=Gw(t[2*I],t[2*I+1],T.x,T.y);Mu(this._ids,this._dists,0,o-1),this._hullStart=p;let N=3;r[p]=n[v]=g,r[g]=n[p]=v,r[v]=n[g]=p,i[p]=0,i[g]=1,i[v]=2,s.fill(-1),s[this._hashKey(y,m)]=p,s[this._hashKey(b,w)]=g,s[this._hashKey(_,x)]=v,this.trianglesLen=0,this._addTriangle(p,g,v,-1,-1,-1);for(let I=0,A,k;I<this._ids.length;I++){const R=this._ids[I],E=t[2*R],M=t[2*R+1];if(I>0&&Math.abs(E-A)<=y6&&Math.abs(M-k)<=y6||(A=E,k=M,R===p||R===g||R===v))continue;let $=0;for(let P=0,z=this._hashKey(E,M);P<this._hashSize&&($=s[(z+P)%this._hashSize],!($!==-1&&$!==r[$]));P++);$=n[$];let B=$,O;for(;O=r[B],y0(E,M,t[2*B],t[2*B+1],t[2*O],t[2*O+1])>=0;)if(B=O,B===$){B=-1;break}if(B===-1)continue;let C=this._addTriangle(B,R,r[B],-1,-1,i[B]);i[R]=this._legalize(C+2),i[B]=C,N++;let F=r[B];for(;O=r[F],y0(E,M,t[2*F],t[2*F+1],t[2*O],t[2*O+1])<0;)C=this._addTriangle(F,R,O,i[R],-1,i[F]),i[R]=this._legalize(C+2),r[F]=F,N--,F=O;if(B===$)for(;O=n[B],y0(E,M,t[2*O],t[2*O+1],t[2*B],t[2*B+1])<0;)C=this._addTriangle(O,R,B,-1,i[B],i[O]),this._legalize(C+2),i[O]=C,r[B]=B,N--,B=O;this._hullStart=n[R]=B,r[B]=n[F]=R,r[R]=F,s[this._hashKey(E,M)]=R,s[this._hashKey(t[2*B],t[2*B+1])]=B}this.hull=new Uint32Array(N);for(let I=0,A=this._hullStart;I<N;I++)this.hull[I]=A,A=r[A];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(tJ(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:r,coords:i}=this;let s=0,o=0;for(;;){const a=r[t],l=t-t%3;if(o=l+(t+2)%3,a===-1){if(s===0)break;t=m0[--s];continue}const c=a-a%3,u=l+(t+1)%3,f=c+(a+2)%3,d=n[o],h=n[t],p=n[u],g=n[f];if(eJ(i[2*d],i[2*d+1],i[2*h],i[2*h+1],i[2*p],i[2*p+1],i[2*g],i[2*g+1])){n[t]=g,n[a]=d;const y=r[f];if(y===-1){let b=this._hullStart;do{if(this._hullTri[b]===f){this._hullTri[b]=t;break}b=this._hullPrev[b]}while(b!==this._hullStart)}this._link(t,y),this._link(a,r[o]),this._link(o,f);const m=c+(a+1)%3;s<m0.length&&(m0[s++]=m)}else{if(s===0)break;t=m0[--s]}}return o}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,r,i,s,o){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=n,this._triangles[a+2]=r,this._link(a,i),this._link(a+1,s),this._link(a+2,o),this.trianglesLen+=3,a}}function tJ(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function Gw(e,t,n,r){const i=e-n,s=t-r;return i*i+s*s}function eJ(e,t,n,r,i,s,o,a){const l=e-o,c=t-a,u=n-o,f=r-a,d=i-o,h=s-a,p=l*l+c*c,g=u*u+f*f,v=d*d+h*h;return l*(f*v-g*h)-c*(u*v-g*d)+p*(u*h-f*d)<0}function nJ(e,t,n,r,i,s){const o=n-e,a=r-t,l=i-e,c=s-t,u=o*o+a*a,f=l*l+c*c,d=.5/(o*c-a*l),h=(c*u-a*f)*d,p=(o*f-l*u)*d;return h*h+p*p}function rJ(e,t,n,r,i,s){const o=n-e,a=r-t,l=i-e,c=s-t,u=o*o+a*a,f=l*l+c*c,d=.5/(o*c-a*l),h=e+(c*u-a*f)*d,p=t+(o*f-l*u)*d;return{x:h,y:p}}function Mu(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const s=e[i],o=t[s];let a=i-1;for(;a>=n&&t[e[a]]>o;)e[a+1]=e[a--];e[a+1]=s}else{const i=n+r>>1;let s=n+1,o=r;Od(e,i,s),t[e[n]]>t[e[r]]&&Od(e,n,r),t[e[s]]>t[e[r]]&&Od(e,s,r),t[e[n]]>t[e[s]]&&Od(e,n,s);const a=e[s],l=t[a];for(;;){do s++;while(t[e[s]]<l);do o--;while(t[e[o]]>l);if(o<s)break;Od(e,s,o)}e[n+1]=e[o],e[o]=a,r-s+1>=o-n?(Mu(e,t,s,r),Mu(e,t,n,o-1)):(Mu(e,t,n,o-1),Mu(e,t,s,r))}}function Od(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function iJ(e){return e[0]}function sJ(e){return e[1]}const m6=1e-6;class Pl{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,r){t=+t,n=+n,r=+r;const i=t+r,s=n;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${s}`:(Math.abs(this._x1-i)>m6||Math.abs(this._y1-s)>m6)&&(this._+="L"+i+","+s),r&&(this._+=`A${r},${r},0,1,1,${t-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=s}`)}rect(t,n,r,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class wS{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let oJ=class{constructor(t,[n,r,i,s]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((s=+s)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=i,this.xmin=n,this.ymax=s,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:r},vectors:i}=this;let s,o;const a=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let g=0,v=0,y=r.length,m,b;g<y;g+=3,v+=2){const w=r[g]*2,S=r[g+1]*2,_=r[g+2]*2,x=t[w],T=t[w+1],N=t[S],I=t[S+1],A=t[_],k=t[_+1],R=N-x,E=I-T,M=A-x,$=k-T,B=(R*$-E*M)*2;if(Math.abs(B)<1e-9){if(s===void 0){s=o=0;for(const C of n)s+=t[C*2],o+=t[C*2+1];s/=n.length,o/=n.length}const O=1e9*Math.sign((s-x)*$-(o-T)*M);m=(x+A)/2-O*$,b=(T+k)/2+O*M}else{const O=1/B,C=R*R+E*E,F=M*M+$*$;m=x+($*C-E*F)*O,b=T+(R*F-M*C)*O}a[v]=m,a[v+1]=b}let l=n[n.length-1],c,u=l*4,f,d=t[2*l],h,p=t[2*l+1];i.fill(0);for(let g=0;g<n.length;++g)l=n[g],c=u,f=d,h=p,u=l*4,d=t[2*l],p=t[2*l+1],i[c+2]=i[u]=h-p,i[c+3]=i[u+1]=d-f}render(t){const n=t==null?t=new Pl:void 0,{delaunay:{halfedges:r,inedges:i,hull:s},circumcenters:o,vectors:a}=this;if(s.length<=1)return null;for(let u=0,f=r.length;u<f;++u){const d=r[u];if(d<u)continue;const h=Math.floor(u/3)*2,p=Math.floor(d/3)*2,g=o[h],v=o[h+1],y=o[p],m=o[p+1];this._renderSegment(g,v,y,m,t)}let l,c=s[s.length-1];for(let u=0;u<s.length;++u){l=c,c=s[u];const f=Math.floor(i[c]/3)*2,d=o[f],h=o[f+1],p=l*4,g=this._project(d,h,a[p+2],a[p+3]);g&&this._renderSegment(d,h,g[0],g[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new Pl:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const r=n==null?n=new Pl:void 0,i=this._clip(t);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let s=i.length;for(;i[0]===i[s-2]&&i[1]===i[s-1]&&s>1;)s-=2;for(let o=2;o<s;o+=2)(i[o]!==i[o-2]||i[o+1]!==i[o-1])&&n.lineTo(i[o],i[o+1]);return n.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,r=t.length/2;n<r;++n){const i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(t){const n=new wS;return this.renderCell(t,n),n.value()}_renderSegment(t,n,r,i,s){let o;const a=this._regioncode(t,n),l=this._regioncode(r,i);a===0&&l===0?(s.moveTo(t,n),s.lineTo(r,i)):(o=this._clipSegment(t,n,r,i,a,l))&&(s.moveTo(o[0],o[1]),s.lineTo(o[2],o[3]))}contains(t,n,r){return n=+n,n!==n||(r=+r,r!==r)?!1:this.delaunay._step(t,n,r)===t}*neighbors(t){const n=this._clip(t);if(n)for(const r of this.delaunay.neighbors(t)){const i=this._clip(r);if(i){t:for(let s=0,o=n.length;s<o;s+=2)for(let a=0,l=i.length;a<l;a+=2)if(n[s]===i[a]&&n[s+1]===i[a+1]&&n[(s+2)%o]===i[(a+l-2)%l]&&n[(s+3)%o]===i[(a+l-1)%l]){yield r;break t}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:s}}=this,o=r[t];if(o===-1)return null;const a=[];let l=o;do{const c=Math.floor(l/3);if(a.push(n[c*2],n[c*2+1]),l=l%3===2?l-2:l+1,s[l]!==t)break;l=i[l]}while(l!==o&&l!==-1);return a}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:r}=this,i=t*4;return this._simplify(r[i]||r[i+1]?this._clipInfinite(t,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(t,n))}_clipFinite(t,n){const r=n.length;let i=null,s,o,a=n[r-2],l=n[r-1],c,u=this._regioncode(a,l),f,d=0;for(let h=0;h<r;h+=2)if(s=a,o=l,a=n[h],l=n[h+1],c=u,u=this._regioncode(a,l),c===0&&u===0)f=d,d=0,i?i.push(a,l):i=[a,l];else{let p,g,v,y,m;if(c===0){if((p=this._clipSegment(s,o,a,l,c,u))===null)continue;[g,v,y,m]=p}else{if((p=this._clipSegment(a,l,s,o,u,c))===null)continue;[y,m,g,v]=p,f=d,d=this._edgecode(g,v),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(g,v):i=[g,v]}f=d,d=this._edgecode(y,m),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(y,m):i=[y,m]}if(i)f=d,d=this._edgecode(i[0],i[1]),f&&d&&this._edge(t,f,d,i,i.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(t,n,r,i,s,o){const a=s<o;for(a&&([t,n,r,i,s,o]=[r,i,t,n,o,s]);;){if(s===0&&o===0)return a?[r,i,t,n]:[t,n,r,i];if(s&o)return null;let l,c,u=s||o;u&8?(l=t+(r-t)*(this.ymax-n)/(i-n),c=this.ymax):u&4?(l=t+(r-t)*(this.ymin-n)/(i-n),c=this.ymin):u&2?(c=n+(i-n)*(this.xmax-t)/(r-t),l=this.xmax):(c=n+(i-n)*(this.xmin-t)/(r-t),l=this.xmin),s?(t=l,n=c,s=this._regioncode(t,n)):(r=l,i=c,o=this._regioncode(r,i))}}_clipInfinite(t,n,r,i,s,o){let a=Array.from(n),l;if((l=this._project(a[0],a[1],r,i))&&a.unshift(l[0],l[1]),(l=this._project(a[a.length-2],a[a.length-1],s,o))&&a.push(l[0],l[1]),a=this._clipFinite(t,a))for(let c=0,u=a.length,f,d=this._edgecode(a[u-2],a[u-1]);c<u;c+=2)f=d,d=this._edgecode(a[c],a[c+1]),f&&d&&(c=this._edge(t,f,d,a,c),u=a.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(t,n,r,i,s){for(;n!==r;){let o,a;switch(n){case 5:n=4;continue;case 4:n=6,o=this.xmax,a=this.ymin;break;case 6:n=2;continue;case 2:n=10,o=this.xmax,a=this.ymax;break;case 10:n=8;continue;case 8:n=9,o=this.xmin,a=this.ymax;break;case 9:n=1;continue;case 1:n=5,o=this.xmin,a=this.ymin;break}(i[s]!==o||i[s+1]!==a)&&this.contains(t,o,a)&&(i.splice(s,0,o,a),s+=2)}return s}_project(t,n,r,i){let s=1/0,o,a,l;if(i<0){if(n<=this.ymin)return null;(o=(this.ymin-n)/i)<s&&(l=this.ymin,a=t+(s=o)*r)}else if(i>0){if(n>=this.ymax)return null;(o=(this.ymax-n)/i)<s&&(l=this.ymax,a=t+(s=o)*r)}if(r>0){if(t>=this.xmax)return null;(o=(this.xmax-t)/r)<s&&(a=this.xmax,l=n+(s=o)*i)}else if(r<0){if(t<=this.xmin)return null;(o=(this.xmin-t)/r)<s&&(a=this.xmin,l=n+(s=o)*i)}return[a,l]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const r=(n+2)%t.length,i=(n+4)%t.length;(t[n]===t[r]&&t[r]===t[i]||t[n+1]===t[r+1]&&t[r+1]===t[i+1])&&(t.splice(r,2),n-=2)}t.length||(t=null)}return t}};const aJ=2*Math.PI,Yc=Math.pow;function lJ(e){return e[0]}function cJ(e){return e[1]}function uJ(e){const{triangles:t,coords:n}=e;for(let r=0;r<t.length;r+=3){const i=2*t[r],s=2*t[r+1],o=2*t[r+2];if((n[o]-n[i])*(n[s+1]-n[i+1])-(n[s]-n[i])*(n[o+1]-n[i+1])>1e-10)return!1}return!0}function fJ(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class sl{static from(t,n=lJ,r=cJ,i){return new sl("length"in t?dJ(t,n,r,i):Float64Array.from(hJ(t,n,r,i)))}constructor(t){this._delaunator=new Vg(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&uJ(t)){this.collinear=Int32Array.from({length:n.length/2},(d,h)=>h).sort((d,h)=>n[2*d]-n[2*h]||n[2*d+1]-n[2*h+1]);const l=this.collinear[0],c=this.collinear[this.collinear.length-1],u=[n[2*l],n[2*l+1],n[2*c],n[2*c+1]],f=1e-8*Math.hypot(u[3]-u[1],u[2]-u[0]);for(let d=0,h=n.length/2;d<h;++d){const p=fJ(n[2*d],n[2*d+1],f);n[2*d]=p[0],n[2*d+1]=p[1]}this._delaunator=new Vg(n)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,s=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let l=0,c=r.length;l<c;++l){const u=s[l%3===2?l-2:l+1];(r[l]===-1||o[u]===-1)&&(o[u]=l)}for(let l=0,c=i.length;l<c;++l)a[i[l]]=l;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],o[i[0]]=1,i.length===2&&(o[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(t){return new oJ(this,t)}*neighbors(t){const{inedges:n,hull:r,_hullIndex:i,halfedges:s,triangles:o,collinear:a}=this;if(a){const f=a.indexOf(t);f>0&&(yield a[f-1]),f<a.length-1&&(yield a[f+1]);return}const l=n[t];if(l===-1)return;let c=l,u=-1;do{if(yield u=o[c],c=c%3===2?c-2:c+1,o[c]!==t)return;if(c=s[c],c===-1){const f=r[(i[t]+1)%r.length];f!==u&&(yield f);return}}while(c!==l)}find(t,n,r=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const i=r;let s;for(;(s=this._step(r,t,n))>=0&&s!==r&&s!==i;)r=s;return s}_step(t,n,r){const{inedges:i,hull:s,_hullIndex:o,halfedges:a,triangles:l,points:c}=this;if(i[t]===-1||!c.length)return(t+1)%(c.length>>1);let u=t,f=Yc(n-c[t*2],2)+Yc(r-c[t*2+1],2);const d=i[t];let h=d;do{let p=l[h];const g=Yc(n-c[p*2],2)+Yc(r-c[p*2+1],2);if(g<f&&(f=g,u=p),h=h%3===2?h-2:h+1,l[h]!==t)break;if(h=a[h],h===-1){if(h=s[(o[t]+1)%s.length],h!==p&&Yc(n-c[h*2],2)+Yc(r-c[h*2+1],2)<f)return h;break}}while(h!==d);return u}render(t){const n=t==null?t=new Pl:void 0,{points:r,halfedges:i,triangles:s}=this;for(let o=0,a=i.length;o<a;++o){const l=i[o];if(l<o)continue;const c=s[o]*2,u=s[l]*2;t.moveTo(r[c],r[c+1]),t.lineTo(r[u],r[u+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const r=t==null?t=new Pl:void 0,{points:i}=this;for(let s=0,o=i.length;s<o;s+=2){const a=i[s],l=i[s+1];t.moveTo(a+n,l),t.arc(a,l,n,0,aJ)}return r&&r.value()}renderHull(t){const n=t==null?t=new Pl:void 0,{hull:r,points:i}=this,s=r[0]*2,o=r.length;t.moveTo(i[s],i[s+1]);for(let a=1;a<o;++a){const l=2*r[a];t.lineTo(i[l],i[l+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new wS;return this.renderHull(t),t.value()}renderTriangle(t,n){const r=n==null?n=new Pl:void 0,{points:i,triangles:s}=this,o=s[t*=3]*2,a=s[t+1]*2,l=s[t+2]*2;return n.moveTo(i[o],i[o+1]),n.lineTo(i[a],i[a+1]),n.lineTo(i[l],i[l+1]),n.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,r=t.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new wS;return this.renderTriangle(t,n),n.value()}}function dJ(e,t,n,r){const i=e.length,s=new Float64Array(i*2);for(let o=0;o<i;++o){const a=e[o];s[o*2]=t.call(r,a,o,e),s[o*2+1]=n.call(r,a,o,e)}return s}function*hJ(e,t,n,r){let i=0;for(const s of e)yield t.call(r,s,i,e),yield n.call(r,s,i,e),++i}function pJ(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Yg(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function Af(e){return e=Yg(Math.abs(e)),e?e[1]:NaN}function yJ(e,t){return function(n,r){for(var i=n.length,s=[],o=0,a=e[0],l=0;i>0&&a>0&&(l+a+1>r&&(a=Math.max(1,r-l)),s.push(n.substring(i-=a,i+a)),!((l+=a+1)>r));)a=e[o=(o+1)%e.length];return s.reverse().join(t)}}function mJ(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var gJ=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function mp(e){if(!(t=gJ.exec(e)))throw new Error("invalid format: "+e);var t;return new S3({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}mp.prototype=S3.prototype;function S3(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}S3.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function bJ(e){t:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break t;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var zF;function vJ(e,t){var n=Yg(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(zF=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+Yg(e,Math.max(0,t+s-1))[0]}function g6(e,t){var n=Yg(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const b6={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:pJ,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>g6(e*100,t),r:g6,s:vJ,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function v6(e){return e}var w6=Array.prototype.map,_6=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function wJ(e){var t=e.grouping===void 0||e.thousands===void 0?v6:yJ(w6.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?v6:mJ(w6.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function c(f){f=mp(f);var d=f.fill,h=f.align,p=f.sign,g=f.symbol,v=f.zero,y=f.width,m=f.comma,b=f.precision,w=f.trim,S=f.type;S==="n"?(m=!0,S="g"):b6[S]||(b===void 0&&(b=12),w=!0,S="g"),(v||d==="0"&&h==="=")&&(v=!0,d="0",h="=");var _=g==="$"?n:g==="#"&&/[boxX]/.test(S)?"0"+S.toLowerCase():"",x=g==="$"?r:/[%p]/.test(S)?o:"",T=b6[S],N=/[defgprs%]/.test(S);b=b===void 0?6:/[gprs]/.test(S)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function I(A){var k=_,R=x,E,M,$;if(S==="c")R=T(A)+R,A="";else{A=+A;var B=A<0||1/A<0;if(A=isNaN(A)?l:T(Math.abs(A),b),w&&(A=bJ(A)),B&&+A==0&&p!=="+"&&(B=!1),k=(B?p==="("?p:a:p==="-"||p==="("?"":p)+k,R=(S==="s"?_6[8+zF/3]:"")+R+(B&&p==="("?")":""),N){for(E=-1,M=A.length;++E<M;)if($=A.charCodeAt(E),48>$||$>57){R=($===46?i+A.slice(E+1):A.slice(E))+R,A=A.slice(0,E);break}}}m&&!v&&(A=t(A,1/0));var O=k.length+A.length+R.length,C=O<y?new Array(y-O+1).join(d):"";switch(m&&v&&(A=t(C+A,C.length?y-R.length:1/0),C=""),h){case"<":A=k+A+R+C;break;case"=":A=k+C+A+R;break;case"^":A=C.slice(0,O=C.length>>1)+k+A+R+C.slice(O);break;default:A=C+k+A+R;break}return s(A)}return I.toString=function(){return f+""},I}function u(f,d){var h=c((f=mp(f),f.type="f",f)),p=Math.max(-8,Math.min(8,Math.floor(Af(d)/3)))*3,g=Math.pow(10,-p),v=_6[8+p/3];return function(y){return h(g*y)+v}}return{format:c,formatPrefix:u}}var g0,id,jF;_J({thousands:",",grouping:[3],currency:["$",""]});function _J(e){return g0=wJ(e),id=g0.format,jF=g0.formatPrefix,g0}function SJ(e){return Math.max(0,-Af(Math.abs(e)))}function xJ(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Af(t)/3)))*3-Af(Math.abs(e)))}function IJ(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Af(t)-Af(e))+1}var ft=1e-6,qg=1e-12,Rt=Math.PI,qe=Rt/2,S6=Rt/4,Cr=Rt*2,_n=180/Rt,Qt=Rt/180,te=Math.abs,sd=Math.atan,Yi=Math.atan2,dt=Math.cos,b0=Math.ceil,VF=Math.exp,_S=Math.hypot,Wg=Math.log,Xw=Math.pow,lt=Math.sin,ai=Math.sign||function(e){return e>0?1:e<0?-1:0},Qn=Math.sqrt,x3=Math.tan;function YF(e){return e>1?0:e<-1?Rt:Math.acos(e)}function gr(e){return e>1?qe:e<-1?-qe:Math.asin(e)}function Dr(){}function Hg(e,t){e&&I6.hasOwnProperty(e.type)&&I6[e.type](e,t)}var x6={Feature:function(e,t){Hg(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)Hg(n[r].geometry,t)}},I6={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){SS(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)SS(n[r],t,0)},Polygon:function(e,t){E6(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)E6(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)Hg(n[r],t)}};function SS(e,t,n){var r=-1,i=e.length-n,s;for(t.lineStart();++r<i;)s=e[r],t.point(s[0],s[1],s[2]);t.lineEnd()}function E6(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)SS(e[n],t,1);t.polygonEnd()}function da(e,t){e&&x6.hasOwnProperty(e.type)?x6[e.type](e,t):Hg(e,t)}function xS(e){return[Yi(e[1],e[0]),gr(e[2])]}function Mf(e){var t=e[0],n=e[1],r=dt(n);return[r*dt(t),r*lt(t),lt(n)]}function v0(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Gg(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function Qw(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function w0(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function IS(e){var t=Qn(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var oh,Xg,Qg,Kg,Zg,Jg,t1,e1,ES,TS,AS,qF,WF,zn,jn,Vn,Fi={sphere:Dr,point:I3,lineStart:T6,lineEnd:A6,polygonStart:function(){Fi.lineStart=AJ,Fi.lineEnd=MJ},polygonEnd:function(){Fi.lineStart=T6,Fi.lineEnd=A6}};function I3(e,t){e*=Qt,t*=Qt;var n=dt(t);oy(n*dt(e),n*lt(e),lt(t))}function oy(e,t,n){++oh,Qg+=(e-Qg)/oh,Kg+=(t-Kg)/oh,Zg+=(n-Zg)/oh}function T6(){Fi.point=EJ}function EJ(e,t){e*=Qt,t*=Qt;var n=dt(t);zn=n*dt(e),jn=n*lt(e),Vn=lt(t),Fi.point=TJ,oy(zn,jn,Vn)}function TJ(e,t){e*=Qt,t*=Qt;var n=dt(t),r=n*dt(e),i=n*lt(e),s=lt(t),o=Yi(Qn((o=jn*s-Vn*i)*o+(o=Vn*r-zn*s)*o+(o=zn*i-jn*r)*o),zn*r+jn*i+Vn*s);Xg+=o,Jg+=o*(zn+(zn=r)),t1+=o*(jn+(jn=i)),e1+=o*(Vn+(Vn=s)),oy(zn,jn,Vn)}function A6(){Fi.point=I3}function AJ(){Fi.point=$J}function MJ(){HF(qF,WF),Fi.point=I3}function $J(e,t){qF=e,WF=t,e*=Qt,t*=Qt,Fi.point=HF;var n=dt(t);zn=n*dt(e),jn=n*lt(e),Vn=lt(t),oy(zn,jn,Vn)}function HF(e,t){e*=Qt,t*=Qt;var n=dt(t),r=n*dt(e),i=n*lt(e),s=lt(t),o=jn*s-Vn*i,a=Vn*r-zn*s,l=zn*i-jn*r,c=_S(o,a,l),u=gr(c),f=c&&-u/c;ES.add(f*o),TS.add(f*a),AS.add(f*l),Xg+=u,Jg+=u*(zn+(zn=r)),t1+=u*(jn+(jn=i)),e1+=u*(Vn+(Vn=s)),oy(zn,jn,Vn)}function NJ(e){oh=Xg=Qg=Kg=Zg=Jg=t1=e1=0,ES=new ks,TS=new ks,AS=new ks,da(e,Fi);var t=+ES,n=+TS,r=+AS,i=_S(t,n,r);return i<qg&&(t=Jg,n=t1,r=e1,Xg<ft&&(t=Qg,n=Kg,r=Zg),i=_S(t,n,r),i<qg)?[NaN,NaN]:[Yi(n,t)*_n,gr(r/i)*_n]}function MS(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function $S(e,t){return te(e)>Rt&&(e-=Math.round(e/Cr)*Cr),[e,t]}$S.invert=$S;function GF(e,t,n){return(e%=Cr)?t||n?MS($6(e),N6(t,n)):$6(e):t||n?N6(t,n):$S}function M6(e){return function(t,n){return t+=e,te(t)>Rt&&(t-=Math.round(t/Cr)*Cr),[t,n]}}function $6(e){var t=M6(e);return t.invert=M6(-e),t}function N6(e,t){var n=dt(e),r=lt(e),i=dt(t),s=lt(t);function o(a,l){var c=dt(l),u=dt(a)*c,f=lt(a)*c,d=lt(l),h=d*n+u*r;return[Yi(f*i-h*s,u*n-d*r),gr(h*i+f*s)]}return o.invert=function(a,l){var c=dt(l),u=dt(a)*c,f=lt(a)*c,d=lt(l),h=d*i-f*s;return[Yi(f*i+d*s,u*n+h*r),gr(h*n-u*r)]},o}function DJ(e){e=GF(e[0]*Qt,e[1]*Qt,e.length>2?e[2]*Qt:0);function t(n){return n=e(n[0]*Qt,n[1]*Qt),n[0]*=_n,n[1]*=_n,n}return t.invert=function(n){return n=e.invert(n[0]*Qt,n[1]*Qt),n[0]*=_n,n[1]*=_n,n},t}function kJ(e,t,n,r,i,s){if(n){var o=dt(t),a=lt(t),l=r*n;i==null?(i=t+r*Cr,s=t-l/2):(i=D6(o,i),s=D6(o,s),(r>0?i<s:i>s)&&(i+=r*Cr));for(var c,u=i;r>0?u>s:u<s;u-=l)c=xS([o,-a*dt(u),-a*lt(u)]),e.point(c[0],c[1])}}function D6(e,t){t=Mf(t),t[0]-=e,IS(t);var n=YF(-t[1]);return((-t[2]<0?-n:n)+Cr-ft)%Cr}function XF(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:Dr,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function bm(e,t){return te(e[0]-t[0])<ft&&te(e[1]-t[1])<ft}function _0(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function QF(e,t,n,r,i){var s=[],o=[],a,l;if(e.forEach(function(p){if(!((g=p.length-1)<=0)){var g,v=p[0],y=p[g],m;if(bm(v,y)){if(!v[2]&&!y[2]){for(i.lineStart(),a=0;a<g;++a)i.point((v=p[a])[0],v[1]);i.lineEnd();return}y[0]+=2*ft}s.push(m=new _0(v,p,null,!0)),o.push(m.o=new _0(v,null,m,!1)),s.push(m=new _0(y,p,null,!1)),o.push(m.o=new _0(y,null,m,!0))}}),!!s.length){for(o.sort(t),k6(s),k6(o),a=0,l=o.length;a<l;++a)o[a].e=n=!n;for(var c=s[0],u,f;;){for(var d=c,h=!0;d.v;)if((d=d.n)===c)return;u=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(a=0,l=u.length;a<l;++a)i.point((f=u[a])[0],f[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(h)for(u=d.p.z,a=u.length-1;a>=0;--a)i.point((f=u[a])[0],f[1]);else r(d.x,d.p.x,-1,i);d=d.p}d=d.o,u=d.z,h=!h}while(!d.v);i.lineEnd()}}}function k6(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function Kw(e){return te(e[0])<=Rt?e[0]:ai(e[0])*((te(e[0])+Rt)%Cr-Rt)}function OJ(e,t){var n=Kw(t),r=t[1],i=lt(r),s=[lt(n),-dt(n),0],o=0,a=0,l=new ks;i===1?r=qe+ft:i===-1&&(r=-qe-ft);for(var c=0,u=e.length;c<u;++c)if(d=(f=e[c]).length)for(var f,d,h=f[d-1],p=Kw(h),g=h[1]/2+S6,v=lt(g),y=dt(g),m=0;m<d;++m,p=w,v=_,y=x,h=b){var b=f[m],w=Kw(b),S=b[1]/2+S6,_=lt(S),x=dt(S),T=w-p,N=T>=0?1:-1,I=N*T,A=I>Rt,k=v*_;if(l.add(Yi(k*N*lt(I),y*x+k*dt(I))),o+=A?T+N*Cr:T,A^p>=n^w>=n){var R=Gg(Mf(h),Mf(b));IS(R);var E=Gg(s,R);IS(E);var M=(A^T>=0?-1:1)*gr(E[2]);(r>M||r===M&&(R[0]||R[1]))&&(a+=A^T>=0?1:-1)}}return(o<-ft||o<ft&&l<-qg)^a&1}function KF(e,t,n,r){return function(i){var s=t(i),o=XF(),a=t(o),l=!1,c,u,f,d={point:h,lineStart:g,lineEnd:v,polygonStart:function(){d.point=y,d.lineStart=m,d.lineEnd=b,u=[],c=[]},polygonEnd:function(){d.point=h,d.lineStart=g,d.lineEnd=v,u=JO(u);var w=OJ(c,r);u.length?(l||(i.polygonStart(),l=!0),QF(u,BJ,w,n,i)):w&&(l||(i.polygonStart(),l=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),l&&(i.polygonEnd(),l=!1),u=c=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(w,S){e(w,S)&&i.point(w,S)}function p(w,S){s.point(w,S)}function g(){d.point=p,s.lineStart()}function v(){d.point=h,s.lineEnd()}function y(w,S){f.push([w,S]),a.point(w,S)}function m(){a.lineStart(),f=[]}function b(){y(f[0][0],f[0][1]),a.lineEnd();var w=a.clean(),S=o.result(),_,x=S.length,T,N,I;if(f.pop(),c.push(f),f=null,!!x){if(w&1){if(N=S[0],(T=N.length-1)>0){for(l||(i.polygonStart(),l=!0),i.lineStart(),_=0;_<T;++_)i.point((I=N[_])[0],I[1]);i.lineEnd()}return}x>1&&w&2&&S.push(S.pop().concat(S.shift())),u.push(S.filter(FJ))}}return d}}function FJ(e){return e.length>1}function BJ(e,t){return((e=e.x)[0]<0?e[1]-qe-ft:qe-e[1])-((t=t.x)[0]<0?t[1]-qe-ft:qe-t[1])}const O6=KF(function(){return!0},RJ,CJ,[-Rt,-qe]);function RJ(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(s,o){var a=s>0?Rt:-Rt,l=te(s-t);te(l-Rt)<ft?(e.point(t,n=(n+o)/2>0?qe:-qe),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),e.point(s,n),i=0):r!==a&&l>=Rt&&(te(t-r)<ft&&(t-=r*ft),te(s-a)<ft&&(s-=a*ft),n=LJ(t,n,s,o),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),i=0),e.point(t=s,n=o),r=a},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function LJ(e,t,n,r){var i,s,o=lt(e-n);return te(o)>ft?sd((lt(t)*(s=dt(r))*lt(n)-lt(r)*(i=dt(t))*lt(e))/(i*s*o)):(t+r)/2}function CJ(e,t,n,r){var i;if(e==null)i=n*qe,r.point(-Rt,i),r.point(0,i),r.point(Rt,i),r.point(Rt,0),r.point(Rt,-i),r.point(0,-i),r.point(-Rt,-i),r.point(-Rt,0),r.point(-Rt,i);else if(te(e[0]-t[0])>ft){var s=e[0]<t[0]?Rt:-Rt;i=n*s/2,r.point(-s,i),r.point(0,i),r.point(s,i)}else r.point(t[0],t[1])}function UJ(e){var t=dt(e),n=6*Qt,r=t>0,i=te(t)>ft;function s(u,f,d,h){kJ(h,e,n,d,u,f)}function o(u,f){return dt(u)*dt(f)>t}function a(u){var f,d,h,p,g;return{lineStart:function(){p=h=!1,g=1},point:function(v,y){var m=[v,y],b,w=o(v,y),S=r?w?0:c(v,y):w?c(v+(v<0?Rt:-Rt),y):0;if(!f&&(p=h=w)&&u.lineStart(),w!==h&&(b=l(f,m),(!b||bm(f,b)||bm(m,b))&&(m[2]=1)),w!==h)g=0,w?(u.lineStart(),b=l(m,f),u.point(b[0],b[1])):(b=l(f,m),u.point(b[0],b[1],2),u.lineEnd()),f=b;else if(i&&f&&r^w){var _;!(S&d)&&(_=l(m,f,!0))&&(g=0,r?(u.lineStart(),u.point(_[0][0],_[0][1]),u.point(_[1][0],_[1][1]),u.lineEnd()):(u.point(_[1][0],_[1][1]),u.lineEnd(),u.lineStart(),u.point(_[0][0],_[0][1],3)))}w&&(!f||!bm(f,m))&&u.point(m[0],m[1]),f=m,h=w,d=S},lineEnd:function(){h&&u.lineEnd(),f=null},clean:function(){return g|(p&&h)<<1}}}function l(u,f,d){var h=Mf(u),p=Mf(f),g=[1,0,0],v=Gg(h,p),y=v0(v,v),m=v[0],b=y-m*m;if(!b)return!d&&u;var w=t*y/b,S=-t*m/b,_=Gg(g,v),x=w0(g,w),T=w0(v,S);Qw(x,T);var N=_,I=v0(x,N),A=v0(N,N),k=I*I-A*(v0(x,x)-1);if(!(k<0)){var R=Qn(k),E=w0(N,(-I-R)/A);if(Qw(E,x),E=xS(E),!d)return E;var M=u[0],$=f[0],B=u[1],O=f[1],C;$<M&&(C=M,M=$,$=C);var F=$-M,P=te(F-Rt)<ft,z=P||F<ft;if(!P&&O<B&&(C=B,B=O,O=C),z?P?B+O>0^E[1]<(te(E[0]-M)<ft?B:O):B<=E[1]&&E[1]<=O:F>Rt^(M<=E[0]&&E[0]<=$)){var H=w0(N,(-I+R)/A);return Qw(H,x),[E,xS(H)]}}}function c(u,f){var d=r?e:Rt-e,h=0;return u<-d?h|=1:u>d&&(h|=2),f<-d?h|=4:f>d&&(h|=8),h}return KF(o,a,s,r?[0,-e]:[-Rt,e-Rt])}function PJ(e,t,n,r,i,s){var o=e[0],a=e[1],l=t[0],c=t[1],u=0,f=1,d=l-o,h=c-a,p;if(p=n-o,!(!d&&p>0)){if(p/=d,d<0){if(p<u)return;p<f&&(f=p)}else if(d>0){if(p>f)return;p>u&&(u=p)}if(p=i-o,!(!d&&p<0)){if(p/=d,d<0){if(p>f)return;p>u&&(u=p)}else if(d>0){if(p<u)return;p<f&&(f=p)}if(p=r-a,!(!h&&p>0)){if(p/=h,h<0){if(p<u)return;p<f&&(f=p)}else if(h>0){if(p>f)return;p>u&&(u=p)}if(p=s-a,!(!h&&p<0)){if(p/=h,h<0){if(p>f)return;p>u&&(u=p)}else if(h>0){if(p<u)return;p<f&&(f=p)}return u>0&&(e[0]=o+u*d,e[1]=a+u*h),f<1&&(t[0]=o+f*d,t[1]=a+f*h),!0}}}}}var ah=1e9,S0=-ah;function ZF(e,t,n,r){function i(c,u){return e<=c&&c<=n&&t<=u&&u<=r}function s(c,u,f,d){var h=0,p=0;if(c==null||(h=o(c,f))!==(p=o(u,f))||l(c,u)<0^f>0)do d.point(h===0||h===3?e:n,h>1?r:t);while((h=(h+f+4)%4)!==p);else d.point(u[0],u[1])}function o(c,u){return te(c[0]-e)<ft?u>0?0:3:te(c[0]-n)<ft?u>0?2:1:te(c[1]-t)<ft?u>0?1:0:u>0?3:2}function a(c,u){return l(c.x,u.x)}function l(c,u){var f=o(c,1),d=o(u,1);return f!==d?f-d:f===0?u[1]-c[1]:f===1?c[0]-u[0]:f===2?c[1]-u[1]:u[0]-c[0]}return function(c){var u=c,f=XF(),d,h,p,g,v,y,m,b,w,S,_,x={point:T,lineStart:k,lineEnd:R,polygonStart:I,polygonEnd:A};function T(M,$){i(M,$)&&u.point(M,$)}function N(){for(var M=0,$=0,B=h.length;$<B;++$)for(var O=h[$],C=1,F=O.length,P=O[0],z,H,X=P[0],tt=P[1];C<F;++C)z=X,H=tt,P=O[C],X=P[0],tt=P[1],H<=r?tt>r&&(X-z)*(r-H)>(tt-H)*(e-z)&&++M:tt<=r&&(X-z)*(r-H)<(tt-H)*(e-z)&&--M;return M}function I(){u=f,d=[],h=[],_=!0}function A(){var M=N(),$=_&&M,B=(d=JO(d)).length;($||B)&&(c.polygonStart(),$&&(c.lineStart(),s(null,null,1,c),c.lineEnd()),B&&QF(d,a,M,s,c),c.polygonEnd()),u=c,d=h=p=null}function k(){x.point=E,h&&h.push(p=[]),S=!0,w=!1,m=b=NaN}function R(){d&&(E(g,v),y&&w&&f.rejoin(),d.push(f.result())),x.point=T,w&&u.lineEnd()}function E(M,$){var B=i(M,$);if(h&&p.push([M,$]),S)g=M,v=$,y=B,S=!1,B&&(u.lineStart(),u.point(M,$));else if(B&&w)u.point(M,$);else{var O=[m=Math.max(S0,Math.min(ah,m)),b=Math.max(S0,Math.min(ah,b))],C=[M=Math.max(S0,Math.min(ah,M)),$=Math.max(S0,Math.min(ah,$))];PJ(O,C,e,t,n,r)?(w||(u.lineStart(),u.point(O[0],O[1])),u.point(C[0],C[1]),B||u.lineEnd(),_=!1):B&&(u.lineStart(),u.point(M,$),_=!1)}m=M,b=$,w=B}return x}}function F6(e,t,n){var r=Nr(e,t-ft,n).concat(t);return function(i){return r.map(function(s){return[i,s]})}}function B6(e,t,n){var r=Nr(e,t-ft,n).concat(t);return function(i){return r.map(function(s){return[s,i]})}}function zJ(){var e,t,n,r,i,s,o,a,l=10,c=l,u=90,f=360,d,h,p,g,v=2.5;function y(){return{type:"MultiLineString",coordinates:m()}}function m(){return Nr(b0(r/u)*u,n,u).map(p).concat(Nr(b0(a/f)*f,o,f).map(g)).concat(Nr(b0(t/l)*l,e,l).filter(function(b){return te(b%u)>ft}).map(d)).concat(Nr(b0(s/c)*c,i,c).filter(function(b){return te(b%f)>ft}).map(h))}return y.lines=function(){return m().map(function(b){return{type:"LineString",coordinates:b}})},y.outline=function(){return{type:"Polygon",coordinates:[p(r).concat(g(o).slice(1),p(n).reverse().slice(1),g(a).reverse().slice(1))]}},y.extent=function(b){return arguments.length?y.extentMajor(b).extentMinor(b):y.extentMinor()},y.extentMajor=function(b){return arguments.length?(r=+b[0][0],n=+b[1][0],a=+b[0][1],o=+b[1][1],r>n&&(b=r,r=n,n=b),a>o&&(b=a,a=o,o=b),y.precision(v)):[[r,a],[n,o]]},y.extentMinor=function(b){return arguments.length?(t=+b[0][0],e=+b[1][0],s=+b[0][1],i=+b[1][1],t>e&&(b=t,t=e,e=b),s>i&&(b=s,s=i,i=b),y.precision(v)):[[t,s],[e,i]]},y.step=function(b){return arguments.length?y.stepMajor(b).stepMinor(b):y.stepMinor()},y.stepMajor=function(b){return arguments.length?(u=+b[0],f=+b[1],y):[u,f]},y.stepMinor=function(b){return arguments.length?(l=+b[0],c=+b[1],y):[l,c]},y.precision=function(b){return arguments.length?(v=+b,d=F6(s,i,90),h=B6(t,e,v),p=F6(a,o,90),g=B6(r,n,v),y):v},y.extentMajor([[-180,-90+ft],[180,90-ft]]).extentMinor([[-180,-80-ft],[180,80+ft]])}function jJ(){return zJ()()}const NS=e=>e;var Zw=new ks,DS=new ks,JF,tB,kS,OS,ha={point:Dr,lineStart:Dr,lineEnd:Dr,polygonStart:function(){ha.lineStart=VJ,ha.lineEnd=qJ},polygonEnd:function(){ha.lineStart=ha.lineEnd=ha.point=Dr,Zw.add(te(DS)),DS=new ks},result:function(){var e=Zw/2;return Zw=new ks,e}};function VJ(){ha.point=YJ}function YJ(e,t){ha.point=eB,JF=kS=e,tB=OS=t}function eB(e,t){DS.add(OS*e-kS*t),kS=e,OS=t}function qJ(){eB(JF,tB)}const R6=ha;var $f=1/0,n1=$f,gp=-$f,r1=gp,WJ={point:HJ,lineStart:Dr,lineEnd:Dr,polygonStart:Dr,polygonEnd:Dr,result:function(){var e=[[$f,n1],[gp,r1]];return gp=r1=-(n1=$f=1/0),e}};function HJ(e,t){e<$f&&($f=e),e>gp&&(gp=e),t<n1&&(n1=t),t>r1&&(r1=t)}const i1=WJ;var FS=0,BS=0,lh=0,s1=0,o1=0,$u=0,RS=0,LS=0,ch=0,nB,rB,gs,bs,Oi={point:xc,lineStart:L6,lineEnd:C6,polygonStart:function(){Oi.lineStart=QJ,Oi.lineEnd=KJ},polygonEnd:function(){Oi.point=xc,Oi.lineStart=L6,Oi.lineEnd=C6},result:function(){var e=ch?[RS/ch,LS/ch]:$u?[s1/$u,o1/$u]:lh?[FS/lh,BS/lh]:[NaN,NaN];return FS=BS=lh=s1=o1=$u=RS=LS=ch=0,e}};function xc(e,t){FS+=e,BS+=t,++lh}function L6(){Oi.point=GJ}function GJ(e,t){Oi.point=XJ,xc(gs=e,bs=t)}function XJ(e,t){var n=e-gs,r=t-bs,i=Qn(n*n+r*r);s1+=i*(gs+e)/2,o1+=i*(bs+t)/2,$u+=i,xc(gs=e,bs=t)}function C6(){Oi.point=xc}function QJ(){Oi.point=ZJ}function KJ(){iB(nB,rB)}function ZJ(e,t){Oi.point=iB,xc(nB=gs=e,rB=bs=t)}function iB(e,t){var n=e-gs,r=t-bs,i=Qn(n*n+r*r);s1+=i*(gs+e)/2,o1+=i*(bs+t)/2,$u+=i,i=bs*e-gs*t,RS+=i*(gs+e),LS+=i*(bs+t),ch+=i*3,xc(gs=e,bs=t)}const U6=Oi;function sB(e){this._context=e}sB.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,Cr);break}}},result:Dr};var CS=new ks,Jw,oB,aB,uh,fh,a1={point:Dr,lineStart:function(){a1.point=JJ},lineEnd:function(){Jw&&lB(oB,aB),a1.point=Dr},polygonStart:function(){Jw=!0},polygonEnd:function(){Jw=null},result:function(){var e=+CS;return CS=new ks,e}};function JJ(e,t){a1.point=lB,oB=uh=e,aB=fh=t}function lB(e,t){uh-=e,fh-=t,CS.add(Qn(uh*uh+fh*fh)),uh=e,fh=t}const P6=a1;let z6,l1,j6,V6;class Y6{constructor(t){this._append=t==null?cB:ttt(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==j6||this._append!==l1){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,j6=r,l1=this._append,V6=this._,this._=i}this._+=V6;break}}}result(){const t=this._;return this._="",t.length?t:null}}function cB(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function ttt(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return cB;if(t!==z6){const n=10**t;z6=t,l1=function(i){let s=1;this._+=i[0];for(const o=i.length;s<o;++s)this._+=Math.round(arguments[s]*n)/n+i[s]}}return l1}function ol(e,t){let n=3,r=4.5,i,s;function o(a){return a&&(typeof r=="function"&&s.pointRadius(+r.apply(this,arguments)),da(a,i(s))),s.result()}return o.area=function(a){return da(a,i(R6)),R6.result()},o.measure=function(a){return da(a,i(P6)),P6.result()},o.bounds=function(a){return da(a,i(i1)),i1.result()},o.centroid=function(a){return da(a,i(U6)),U6.result()},o.projection=function(a){return arguments.length?(i=a==null?(e=null,NS):(e=a).stream,o):e},o.context=function(a){return arguments.length?(s=a==null?(t=null,new Y6(n)):new sB(t=a),typeof r!="function"&&s.pointRadius(r),o):t},o.pointRadius=function(a){return arguments.length?(r=typeof a=="function"?a:(s.pointRadius(+a),+a),o):r},o.digits=function(a){if(!arguments.length)return n;if(a==null)n=null;else{const l=Math.floor(a);if(!(l>=0))throw new RangeError(`invalid digits: ${a}`);n=l}return t===null&&(s=new Y6(n)),o},o.projection(e).digits(n).context(t)}function c1(e){return{stream:nv(e)}}function nv(e){return function(t){var n=new US;for(var r in e)n[r]=e[r];return n.stream=t,n}}function US(){}US.prototype={constructor:US,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function E3(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),da(n,e.stream(i1)),t(i1.result()),r!=null&&e.clipExtent(r),e}function T3(e,t,n){return E3(e,function(r){var i=t[1][0]-t[0][0],s=t[1][1]-t[0][1],o=Math.min(i/(r[1][0]-r[0][0]),s/(r[1][1]-r[0][1])),a=+t[0][0]+(i-o*(r[1][0]+r[0][0]))/2,l=+t[0][1]+(s-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([a,l])},n)}function uB(e,t,n){return T3(e,[[0,0],t],n)}function fB(e,t,n){return E3(e,function(r){var i=+t,s=i/(r[1][0]-r[0][0]),o=(i-s*(r[1][0]+r[0][0]))/2,a=-s*r[0][1];e.scale(150*s).translate([o,a])},n)}function dB(e,t,n){return E3(e,function(r){var i=+t,s=i/(r[1][1]-r[0][1]),o=-s*r[0][0],a=(i-s*(r[1][1]+r[0][1]))/2;e.scale(150*s).translate([o,a])},n)}var q6=16,ett=dt(30*Qt);function W6(e,t){return+t?rtt(e,t):ntt(e)}function ntt(e){return nv({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function rtt(e,t){function n(r,i,s,o,a,l,c,u,f,d,h,p,g,v){var y=c-r,m=u-i,b=y*y+m*m;if(b>4*t&&g--){var w=o+d,S=a+h,_=l+p,x=Qn(w*w+S*S+_*_),T=gr(_/=x),N=te(te(_)-1)<ft||te(s-f)<ft?(s+f)/2:Yi(S,w),I=e(N,T),A=I[0],k=I[1],R=A-r,E=k-i,M=m*R-y*E;(M*M/b>t||te((y*R+m*E)/b-.5)>.3||o*d+a*h+l*p<ett)&&(n(r,i,s,o,a,l,A,k,N,w/=x,S/=x,_,g,v),v.point(A,k),n(A,k,N,w,S,_,c,u,f,d,h,p,g,v))}}return function(r){var i,s,o,a,l,c,u,f,d,h,p,g,v={point:y,lineStart:m,lineEnd:w,polygonStart:function(){r.polygonStart(),v.lineStart=S},polygonEnd:function(){r.polygonEnd(),v.lineStart=m}};function y(T,N){T=e(T,N),r.point(T[0],T[1])}function m(){f=NaN,v.point=b,r.lineStart()}function b(T,N){var I=Mf([T,N]),A=e(T,N);n(f,d,u,h,p,g,f=A[0],d=A[1],u=T,h=I[0],p=I[1],g=I[2],q6,r),r.point(f,d)}function w(){v.point=y,r.lineEnd()}function S(){m(),v.point=_,v.lineEnd=x}function _(T,N){b(i=T,N),s=f,o=d,a=h,l=p,c=g,v.point=b}function x(){n(f,d,u,h,p,g,s,o,i,a,l,c,q6,r),v.lineEnd=w,w()}return v}}var itt=nv({point:function(e,t){this.stream.point(e*Qt,t*Qt)}});function stt(e){return nv({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function ott(e,t,n,r,i){function s(o,a){return o*=r,a*=i,[t+e*o,n-e*a]}return s.invert=function(o,a){return[(o-t)/e*r,(n-a)/e*i]},s}function H6(e,t,n,r,i,s){if(!s)return ott(e,t,n,r,i);var o=dt(s),a=lt(s),l=o*e,c=a*e,u=o/e,f=a/e,d=(a*n-o*t)/e,h=(a*t+o*n)/e;function p(g,v){return g*=r,v*=i,[l*g-c*v+t,n-c*g-l*v]}return p.invert=function(g,v){return[r*(u*g-f*v+d),i*(h-f*g-u*v)]},p}function al(e){return hB(function(){return e})()}function hB(e){var t,n=150,r=480,i=250,s=0,o=0,a=0,l=0,c=0,u,f=0,d=1,h=1,p=null,g=O6,v=null,y,m,b,w=NS,S=.5,_,x,T,N,I;function A(M){return T(M[0]*Qt,M[1]*Qt)}function k(M){return M=T.invert(M[0],M[1]),M&&[M[0]*_n,M[1]*_n]}A.stream=function(M){return N&&I===M?N:N=itt(stt(u)(g(_(w(I=M)))))},A.preclip=function(M){return arguments.length?(g=M,p=void 0,E()):g},A.postclip=function(M){return arguments.length?(w=M,v=y=m=b=null,E()):w},A.clipAngle=function(M){return arguments.length?(g=+M?UJ(p=M*Qt):(p=null,O6),E()):p*_n},A.clipExtent=function(M){return arguments.length?(w=M==null?(v=y=m=b=null,NS):ZF(v=+M[0][0],y=+M[0][1],m=+M[1][0],b=+M[1][1]),E()):v==null?null:[[v,y],[m,b]]},A.scale=function(M){return arguments.length?(n=+M,R()):n},A.translate=function(M){return arguments.length?(r=+M[0],i=+M[1],R()):[r,i]},A.center=function(M){return arguments.length?(s=M[0]%360*Qt,o=M[1]%360*Qt,R()):[s*_n,o*_n]},A.rotate=function(M){return arguments.length?(a=M[0]%360*Qt,l=M[1]%360*Qt,c=M.length>2?M[2]%360*Qt:0,R()):[a*_n,l*_n,c*_n]},A.angle=function(M){return arguments.length?(f=M%360*Qt,R()):f*_n},A.reflectX=function(M){return arguments.length?(d=M?-1:1,R()):d<0},A.reflectY=function(M){return arguments.length?(h=M?-1:1,R()):h<0},A.precision=function(M){return arguments.length?(_=W6(x,S=M*M),E()):Qn(S)},A.fitExtent=function(M,$){return T3(A,M,$)},A.fitSize=function(M,$){return uB(A,M,$)},A.fitWidth=function(M,$){return fB(A,M,$)},A.fitHeight=function(M,$){return dB(A,M,$)};function R(){var M=H6(n,0,0,d,h,f).apply(null,t(s,o)),$=H6(n,r-M[0],i-M[1],d,h,f);return u=GF(a,l,c),x=MS(t,$),T=MS(u,x),_=W6(x,S),E()}function E(){return N=I=null,A}return function(){return t=e.apply(this,arguments),A.invert=t.invert&&k,R()}}function A3(e){var t=0,n=Rt/3,r=hB(e),i=r(t,n);return i.parallels=function(s){return arguments.length?r(t=s[0]*Qt,n=s[1]*Qt):[t*_n,n*_n]},i}function att(e){var t=dt(e);function n(r,i){return[r*t,lt(i)/t]}return n.invert=function(r,i){return[r/t,gr(i*t)]},n}function ltt(e,t){var n=lt(e),r=(n+lt(t))/2;if(te(r)<ft)return att(e);var i=1+n*(2*r-n),s=Qn(i)/r;function o(a,l){var c=Qn(i-2*r*lt(l))/r;return[c*lt(a*=r),s-c*dt(a)]}return o.invert=function(a,l){var c=s-l,u=Yi(a,te(c))*ai(c);return c*r<0&&(u-=Rt*ai(a)*ai(c)),[u/r,gr((i-(a*a+c*c)*r*r)/(2*r))]},o}function u1(){return A3(ltt).scale(155.424).center([0,33.6442])}function pB(){return u1().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function ctt(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function utt(){var e,t,n=pB(),r,i=u1().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s,o=u1().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,l,c={point:function(d,h){l=[d,h]}};function u(d){var h=d[0],p=d[1];return l=null,r.point(h,p),l||(s.point(h,p),l)||(a.point(h,p),l)}u.invert=function(d){var h=n.scale(),p=n.translate(),g=(d[0]-p[0])/h,v=(d[1]-p[1])/h;return(v>=.12&&v<.234&&g>=-.425&&g<-.214?i:v>=.166&&v<.234&&g>=-.214&&g<-.115?o:n).invert(d)},u.stream=function(d){return e&&t===d?e:e=ctt([n.stream(t=d),i.stream(d),o.stream(d)])},u.precision=function(d){return arguments.length?(n.precision(d),i.precision(d),o.precision(d),f()):n.precision()},u.scale=function(d){return arguments.length?(n.scale(d),i.scale(d*.35),o.scale(d),u.translate(n.translate())):n.scale()},u.translate=function(d){if(!arguments.length)return n.translate();var h=n.scale(),p=+d[0],g=+d[1];return r=n.translate(d).clipExtent([[p-.455*h,g-.238*h],[p+.455*h,g+.238*h]]).stream(c),s=i.translate([p-.307*h,g+.201*h]).clipExtent([[p-.425*h+ft,g+.12*h+ft],[p-.214*h-ft,g+.234*h-ft]]).stream(c),a=o.translate([p-.205*h,g+.212*h]).clipExtent([[p-.214*h+ft,g+.166*h+ft],[p-.115*h-ft,g+.234*h-ft]]).stream(c),f()},u.fitExtent=function(d,h){return T3(u,d,h)},u.fitSize=function(d,h){return uB(u,d,h)},u.fitWidth=function(d,h){return fB(u,d,h)},u.fitHeight=function(d,h){return dB(u,d,h)};function f(){return e=t=null,u}return u.scale(1070)}function yB(e){return function(t,n){var r=dt(t),i=dt(n),s=e(r*i);return s===1/0?[2,0]:[s*i*lt(t),s*lt(n)]}}function ay(e){return function(t,n){var r=Qn(t*t+n*n),i=e(r),s=lt(i),o=dt(i);return[Yi(t*s,r*o),gr(r&&n*s/r)]}}var mB=yB(function(e){return Qn(2/(1+e))});mB.invert=ay(function(e){return 2*gr(e/2)});function ftt(){return al(mB).scale(124.75).clipAngle(180-.001)}var gB=yB(function(e){return(e=YF(e))&&e/lt(e)});gB.invert=ay(function(e){return e});function dtt(){return al(gB).scale(79.4188).clipAngle(180-.001)}function rv(e,t){return[e,Wg(x3((qe+t)/2))]}rv.invert=function(e,t){return[e,2*sd(VF(t))-qe]};function htt(){return bB(rv).scale(961/Cr)}function bB(e){var t=al(e),n=t.center,r=t.scale,i=t.translate,s=t.clipExtent,o=null,a,l,c;t.scale=function(f){return arguments.length?(r(f),u()):r()},t.translate=function(f){return arguments.length?(i(f),u()):i()},t.center=function(f){return arguments.length?(n(f),u()):n()},t.clipExtent=function(f){return arguments.length?(f==null?o=a=l=c=null:(o=+f[0][0],a=+f[0][1],l=+f[1][0],c=+f[1][1]),u()):o==null?null:[[o,a],[l,c]]};function u(){var f=Rt*r(),d=t(DJ(t.rotate()).invert([0,0]));return s(o==null?[[d[0]-f,d[1]-f],[d[0]+f,d[1]+f]]:e===rv?[[Math.max(d[0]-f,o),a],[Math.min(d[0]+f,l),c]]:[[o,Math.max(d[1]-f,a)],[l,Math.min(d[1]+f,c)]])}return u()}function x0(e){return x3((qe+e)/2)}function ptt(e,t){var n=dt(e),r=e===t?lt(e):Wg(n/dt(t))/Wg(x0(t)/x0(e)),i=n*Xw(x0(e),r)/r;if(!r)return rv;function s(o,a){i>0?a<-qe+ft&&(a=-qe+ft):a>qe-ft&&(a=qe-ft);var l=i/Xw(x0(a),r);return[l*lt(r*o),i-l*dt(r*o)]}return s.invert=function(o,a){var l=i-a,c=ai(r)*Qn(o*o+l*l),u=Yi(o,te(l))*ai(l);return l*r<0&&(u-=Rt*ai(o)*ai(l)),[u/r,2*sd(Xw(i/c,1/r))-qe]},s}function ytt(){return A3(ptt).scale(109.5).parallels([30,30])}function f1(e,t){return[e,t]}f1.invert=f1;function mtt(){return al(f1).scale(152.63)}function gtt(e,t){var n=dt(e),r=e===t?lt(e):(n-dt(t))/(t-e),i=n/r+e;if(te(r)<ft)return f1;function s(o,a){var l=i-a,c=r*o;return[l*lt(c),i-l*dt(c)]}return s.invert=function(o,a){var l=i-a,c=Yi(o,te(l))*ai(l);return l*r<0&&(c-=Rt*ai(o)*ai(l)),[c/r,i-ai(r)*Qn(o*o+l*l)]},s}function btt(){return A3(gtt).scale(131.154).center([0,13.9389])}var Ah=1.340264,Mh=-.081106,$h=893e-6,Nh=.003796,d1=Qn(3)/2,vtt=12;function vB(e,t){var n=gr(d1*lt(t)),r=n*n,i=r*r*r;return[e*dt(n)/(d1*(Ah+3*Mh*r+i*(7*$h+9*Nh*r))),n*(Ah+Mh*r+i*($h+Nh*r))]}vB.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,s=0,o,a,l;s<vtt&&(a=n*(Ah+Mh*r+i*($h+Nh*r))-t,l=Ah+3*Mh*r+i*(7*$h+9*Nh*r),n-=o=a/l,r=n*n,i=r*r*r,!(te(o)<qg));++s);return[d1*e*(Ah+3*Mh*r+i*(7*$h+9*Nh*r))/dt(n),gr(lt(n)/d1)]};function wtt(){return al(vB).scale(177.158)}function wB(e,t){var n=dt(t),r=dt(e)*n;return[n*lt(e)/r,lt(t)/r]}wB.invert=ay(sd);function _tt(){return al(wB).scale(144.049).clipAngle(60)}function _B(e,t){return[dt(t)*lt(e),lt(t)]}_B.invert=ay(gr);function Stt(){return al(_B).scale(249.5).clipAngle(90+ft)}function SB(e,t){var n=dt(t),r=1+dt(e)*n;return[n*lt(e)/r,lt(t)/r]}SB.invert=ay(function(e){return 2*sd(e)});function xtt(){return al(SB).scale(250).clipAngle(142)}function xB(e,t){return[Wg(x3((qe+t)/2)),-e]}xB.invert=function(e,t){return[-t,2*sd(VF(e))-qe]};function Itt(){var e=bB(xB),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}function Ett(e,t){return e.parent===t.parent?1:2}function Ttt(e){return e.reduce(Att,0)/e.length}function Att(e,t){return e+t.x}function Mtt(e){return 1+e.reduce($tt,0)}function $tt(e,t){return Math.max(e,t.y)}function Ntt(e){for(var t;t=e.children;)e=t[0];return e}function Dtt(e){for(var t;t=e.children;)e=t[t.length-1];return e}function IB(){var e=Ett,t=1,n=1,r=!1;function i(s){var o,a=0;s.eachAfter(function(d){var h=d.children;h?(d.x=Ttt(h),d.y=Mtt(h)):(d.x=o?a+=e(d,o):0,d.y=0,o=d)});var l=Ntt(s),c=Dtt(s),u=l.x-e(l,c)/2,f=c.x+e(c,l)/2;return s.eachAfter(r?function(d){d.x=(d.x-s.x)*t,d.y=(s.y-d.y)*n}:function(d){d.x=(d.x-u)/(f-u)*t,d.y=(1-(s.y?d.y/s.y:1))*n})}return i.separation=function(s){return arguments.length?(e=s,i):e},i.size=function(s){return arguments.length?(r=!1,t=+s[0],n=+s[1],i):r?null:[t,n]},i.nodeSize=function(s){return arguments.length?(r=!0,t=+s[0],n=+s[1],i):r?[t,n]:null},i}function ktt(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function Ott(){return this.eachAfter(ktt)}function Ftt(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function Btt(e,t){for(var n=this,r=[n],i,s,o=-1;n=r.pop();)if(e.call(t,n,++o,this),i=n.children)for(s=i.length-1;s>=0;--s)r.push(i[s]);return this}function Rtt(e,t){for(var n=this,r=[n],i=[],s,o,a,l=-1;n=r.pop();)if(i.push(n),s=n.children)for(o=0,a=s.length;o<a;++o)r.push(s[o]);for(;n=i.pop();)e.call(t,n,++l,this);return this}function Ltt(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function Ctt(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function Utt(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function Ptt(e){for(var t=this,n=ztt(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function ztt(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function jtt(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function Vtt(){return Array.from(this)}function Ytt(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function qtt(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*Wtt(){var e=this,t,n=[e],r,i,s;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,s=r.length;i<s;++i)n.push(r[i]);while(n.length)}function EB(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=Xtt)):t===void 0&&(t=Gtt);for(var n=new Nf(e),r,i=[n],s,o,a,l;r=i.pop();)if((o=t(r.data))&&(l=(o=Array.from(o)).length))for(r.children=o,a=l-1;a>=0;--a)i.push(s=o[a]=new Nf(o[a])),s.parent=r,s.depth=r.depth+1;return n.eachBefore(TB)}function Htt(){return EB(this).eachBefore(Qtt)}function Gtt(e){return e.children}function Xtt(e){return Array.isArray(e)?e[1]:null}function Qtt(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function TB(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function Nf(e){this.data=e,this.depth=this.height=0,this.parent=null}Nf.prototype=EB.prototype={constructor:Nf,count:Ott,each:Ftt,eachAfter:Rtt,eachBefore:Btt,find:Ltt,sum:Ctt,sort:Utt,path:Ptt,ancestors:jtt,descendants:Vtt,leaves:Ytt,links:qtt,copy:Htt,[Symbol.iterator]:Wtt};function t_(e){return e==null?null:Ktt(e)}function Ktt(e){if(typeof e!="function")throw new Error;return e}var Ztt={depth:-1},G6={},e_={};function Jtt(e){return e.id}function tet(e){return e.parentId}function AB(){var e=Jtt,t=tet,n;function r(i){var s=Array.from(i),o=e,a=t,l,c,u,f,d,h,p,g,v=new Map;if(n!=null){const y=s.map((w,S)=>eet(n(w,S,i))),m=y.map(X6),b=new Set(y).add("");for(const w of m)b.has(w)||(b.add(w),y.push(w),m.push(X6(w)),s.push(e_));o=(w,S)=>y[S],a=(w,S)=>m[S]}for(u=0,l=s.length;u<l;++u)c=s[u],h=s[u]=new Nf(c),(p=o(c,u,i))!=null&&(p+="")&&(g=h.id=p,v.set(g,v.has(g)?G6:h)),(p=a(c,u,i))!=null&&(p+="")&&(h.parent=p);for(u=0;u<l;++u)if(h=s[u],p=h.parent){if(d=v.get(p),!d)throw new Error("missing: "+p);if(d===G6)throw new Error("ambiguous: "+p);d.children?d.children.push(h):d.children=[h],h.parent=d}else{if(f)throw new Error("multiple roots");f=h}if(!f)throw new Error("no root");if(n!=null){for(;f.data===e_&&f.children.length===1;)f=f.children[0],--l;for(let y=s.length-1;y>=0&&(h=s[y],h.data===e_);--y)h.data=null}if(f.parent=Ztt,f.eachBefore(function(y){y.depth=y.parent.depth+1,--l}).eachBefore(TB),f.parent=null,l>0)throw new Error("cycle");return f}return r.id=function(i){return arguments.length?(e=t_(i),r):e},r.parentId=function(i){return arguments.length?(t=t_(i),r):t},r.path=function(i){return arguments.length?(n=t_(i),r):n},r}function eet(e){e=`${e}`;let t=e.length;return PS(e,t-1)&&!PS(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function X6(e){let t=e.length;if(t<2)return"";for(;--t>1&&!PS(e,t););return e.slice(0,t)}function PS(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}function net(e,t){return e.parent===t.parent?1:2}function n_(e){var t=e.children;return t?t[0]:e.t}function r_(e){var t=e.children;return t?t[t.length-1]:e.t}function ret(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function iet(e){for(var t=0,n=0,r=e.children,i=r.length,s;--i>=0;)s=r[i],s.z+=t,s.m+=t,t+=s.s+(n+=s.c)}function set(e,t,n){return e.a.parent===t.parent?e.a:n}function vm(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}vm.prototype=Object.create(Nf.prototype);function oet(e){for(var t=new vm(e,0),n,r=[t],i,s,o,a;n=r.pop();)if(s=n._.children)for(n.children=new Array(a=s.length),o=a-1;o>=0;--o)r.push(i=n.children[o]=new vm(s[o],o)),i.parent=n;return(t.parent=new vm(null,0)).children=[t],t}function h1(){var e=net,t=1,n=1,r=null;function i(c){var u=oet(c);if(u.eachAfter(s),u.parent.m=-u.z,u.eachBefore(o),r)c.eachBefore(l);else{var f=c,d=c,h=c;c.eachBefore(function(m){m.x<f.x&&(f=m),m.x>d.x&&(d=m),m.depth>h.depth&&(h=m)});var p=f===d?1:e(f,d)/2,g=p-f.x,v=t/(d.x+p+g),y=n/(h.depth||1);c.eachBefore(function(m){m.x=(m.x+g)*v,m.y=m.depth*y})}return c}function s(c){var u=c.children,f=c.parent.children,d=c.i?f[c.i-1]:null;if(u){iet(c);var h=(u[0].z+u[u.length-1].z)/2;d?(c.z=d.z+e(c._,d._),c.m=c.z-h):c.z=h}else d&&(c.z=d.z+e(c._,d._));c.parent.A=a(c,d,c.parent.A||f[0])}function o(c){c._.x=c.z+c.parent.m,c.m+=c.parent.m}function a(c,u,f){if(u){for(var d=c,h=c,p=u,g=d.parent.children[0],v=d.m,y=h.m,m=p.m,b=g.m,w;p=r_(p),d=n_(d),p&&d;)g=n_(g),h=r_(h),h.a=c,w=p.z+m-d.z-v+e(p._,d._),w>0&&(ret(set(p,c,f),c,w),v+=w,y+=w),m+=p.m,v+=d.m,b+=g.m,y+=h.m;p&&!r_(h)&&(h.t=p,h.m+=m-y),d&&!n_(g)&&(g.t=d,g.m+=v-b,f=c)}return f}function l(c){c.x*=t,c.y=c.depth*n}return i.separation=function(c){return arguments.length?(e=c,i):e},i.size=function(c){return arguments.length?(r=!1,t=+c[0],n=+c[1],i):r?null:[t,n]},i.nodeSize=function(c){return arguments.length?(r=!0,t=+c[0],n=+c[1],i):r?[t,n]:null},i}const aet=1664525,cet=1013904223,Q6=1/4294967296;function M3(e=Math.random()){let t=(0<=e&&e<1?e/Q6:Math.abs(e))|0;return()=>(t=aet*t+cet|0,Q6*(t>>>0))}function Vs(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function iv(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const zS=Symbol("implicit");function $3(){var e=new bc,t=[],n=[],r=zS;function i(s){let o=e.get(s);if(o===void 0){if(r!==zS)return r;e.set(s,o=t.push(s)-1)}return n[o%n.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new bc;for(const o of s)e.has(o)||e.set(o,t.push(o)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return $3(t,n).unknown(r)},Vs.apply(i,arguments),i}function sv(){var e=$3().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,s,o,a=!1,l=0,c=0,u=.5;delete e.unknown;function f(){var d=t().length,h=i<r,p=h?i:r,g=h?r:i;s=(g-p)/Math.max(1,d-l+c*2),a&&(s=Math.floor(s)),p+=(g-p-s*(d-l))*u,o=s*(1-l),a&&(p=Math.round(p),o=Math.round(o));var v=Nr(d).map(function(y){return p+s*y});return n(h?v.reverse():v)}return e.domain=function(d){return arguments.length?(t(d),f()):t()},e.range=function(d){return arguments.length?([r,i]=d,r=+r,i=+i,f()):[r,i]},e.rangeRound=function(d){return[r,i]=d,r=+r,i=+i,a=!0,f()},e.bandwidth=function(){return o},e.step=function(){return s},e.round=function(d){return arguments.length?(a=!!d,f()):a},e.padding=function(d){return arguments.length?(l=Math.min(1,c=+d),f()):l},e.paddingInner=function(d){return arguments.length?(l=Math.min(1,d),f()):l},e.paddingOuter=function(d){return arguments.length?(c=+d,f()):c},e.align=function(d){return arguments.length?(u=Math.max(0,Math.min(1,d)),f()):u},e.copy=function(){return sv(t(),[r,i]).round(a).paddingInner(l).paddingOuter(c).align(u)},Vs.apply(f(),arguments)}function MB(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return MB(t())},e}function uet(){return MB(sv.apply(null,arguments).paddingInner(1))}function fet(e){return function(){return e}}function jS(e){return+e}var K6=[0,1];function li(e){return e}function VS(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:fet(isNaN(t)?NaN:.5)}function det(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function het(e,t,n){var r=e[0],i=e[1],s=t[0],o=t[1];return i<r?(r=VS(i,r),s=n(o,s)):(r=VS(r,i),s=n(s,o)),function(a){return s(r(a))}}function pet(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),s=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=VS(e[o],e[o+1]),s[o]=n(t[o],t[o+1]);return function(a){var l=qb(e,a,1,r)-1;return s[l](i[l](a))}}function ly(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function ov(){var e=K6,t=K6,n=rd,r,i,s,o=li,a,l,c;function u(){var d=Math.min(e.length,t.length);return o!==li&&(o=det(e[0],e[d-1])),a=d>2?pet:het,l=c=null,f}function f(d){return d==null||isNaN(d=+d)?s:(l||(l=a(e.map(r),t,n)))(r(o(d)))}return f.invert=function(d){return o(i((c||(c=a(t,e.map(r),kn)))(d)))},f.domain=function(d){return arguments.length?(e=Array.from(d,jS),u()):e.slice()},f.range=function(d){return arguments.length?(t=Array.from(d),u()):t.slice()},f.rangeRound=function(d){return t=Array.from(d),n=m3,u()},f.clamp=function(d){return arguments.length?(o=d?!0:li,u()):o!==li},f.interpolate=function(d){return arguments.length?(n=d,u()):n},f.unknown=function(d){return arguments.length?(s=d,f):s},function(d,h){return r=d,i=h,u()}}function $B(){return ov()(li,li)}function yet(e,t,n,r){var i=iS(e,t,n),s;switch(r=mp(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(s=xJ(i,o))&&(r.precision=s),jF(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=IJ(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=SJ(i))&&(r.precision=s-(r.type==="%")*2);break}}return id(r)}function cy(e){var t=e.domain;return e.ticks=function(n){var r=t();return Ca(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return yet(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,s=r.length-1,o=r[i],a=r[s],l,c,u=10;for(a<o&&(c=o,o=a,a=c,c=i,i=s,s=c);u-- >0;){if(c=up(o,a,n),c===l)return r[i]=o,r[s]=a,t(r);if(c>0)o=Math.floor(o/c)*c,a=Math.ceil(a/c)*c;else if(c<0)o=Math.ceil(o*c)/c,a=Math.floor(a*c)/c;else break;l=c}return e},e}function av(){var e=$B();return e.copy=function(){return ly(e,av())},Vs.apply(e,arguments),cy(e)}function NB(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,jS),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return NB(e).unknown(t)},e=arguments.length?Array.from(e,jS):[0,1],cy(n)}function DB(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],s=e[r],o;return s<i&&(o=n,n=r,r=o,o=i,i=s,s=o),e[n]=t.floor(i),e[r]=t.ceil(s),e}function Z6(e){return Math.log(e)}function J6(e){return Math.exp(e)}function met(e){return-Math.log(-e)}function get(e){return-Math.exp(-e)}function bet(e){return isFinite(e)?+("1e"+e):e<0?0:e}function vet(e){return e===10?bet:e===Math.E?Math.exp:t=>Math.pow(e,t)}function wet(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function t$(e){return(t,n)=>-e(-t,n)}function kB(e){const t=e(Z6,J6),n=t.domain;let r=10,i,s;function o(){return i=wet(r),s=vet(r),n()[0]<0?(i=t$(i),s=t$(s),e(met,get)):e(Z6,J6),t}return t.base=function(a){return arguments.length?(r=+a,o()):r},t.domain=function(a){return arguments.length?(n(a),o()):n()},t.ticks=a=>{const l=n();let c=l[0],u=l[l.length-1];const f=u<c;f&&([c,u]=[u,c]);let d=i(c),h=i(u),p,g;const v=a==null?10:+a;let y=[];if(!(r%1)&&h-d<v){if(d=Math.floor(d),h=Math.ceil(h),c>0){for(;d<=h;++d)for(p=1;p<r;++p)if(g=d<0?p/s(-d):p*s(d),!(g<c)){if(g>u)break;y.push(g)}}else for(;d<=h;++d)for(p=r-1;p>=1;--p)if(g=d>0?p/s(-d):p*s(d),!(g<c)){if(g>u)break;y.push(g)}y.length*2<v&&(y=Ca(c,u,v))}else y=Ca(d,h,Math.min(h-d,v)).map(s);return f?y.reverse():y},t.tickFormat=(a,l)=>{if(a==null&&(a=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=mp(l)).precision==null&&(l.trim=!0),l=id(l)),a===1/0)return l;const c=Math.max(1,r*a/t.ticks().length);return u=>{let f=u/s(Math.round(i(u)));return f*r<r-.5&&(f*=r),f<=c?l(u):""}},t.nice=()=>n(DB(n(),{floor:a=>s(Math.floor(i(a))),ceil:a=>s(Math.ceil(i(a)))})),t}function OB(){const e=kB(ov()).domain([1,10]);return e.copy=()=>ly(e,OB()).base(e.base()),Vs.apply(e,arguments),e}function e$(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function n$(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function FB(e){var t=1,n=e(e$(t),n$(t));return n.constant=function(r){return arguments.length?e(e$(t=+r),n$(t)):t},cy(n)}function BB(){var e=FB(ov());return e.copy=function(){return ly(e,BB()).constant(e.constant())},Vs.apply(e,arguments)}function r$(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function _et(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function xet(e){return e<0?-e*e:e*e}function RB(e){var t=e(li,li),n=1;function r(){return n===1?e(li,li):n===.5?e(_et,xet):e(r$(n),r$(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},cy(t)}function LB(){var e=RB(ov());return e.copy=function(){return ly(e,LB()).exponent(e.exponent())},Vs.apply(e,arguments),e}function CB(){var e=[],t=[],n=[],r;function i(){var o=0,a=Math.max(1,t.length);for(n=new Array(a-1);++o<a;)n[o-1]=MG(e,o/a);return s}function s(o){return o==null||isNaN(o=+o)?r:t[qb(n,o)]}return s.invertExtent=function(o){var a=t.indexOf(o);return a<0?[NaN,NaN]:[a>0?n[a-1]:e[0],a<n.length?n[a]:e[e.length-1]]},s.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let a of o)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(Pe),i()},s.range=function(o){return arguments.length?(t=Array.from(o),i()):t.slice()},s.unknown=function(o){return arguments.length?(r=o,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return CB().domain(e).range(t).unknown(r)},Vs.apply(s,arguments)}function UB(){var e=[.5],t=[0,1],n,r=1;function i(s){return s!=null&&s<=s?t[qb(e,s,0,r)]:n}return i.domain=function(s){return arguments.length?(e=Array.from(s),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(s){return arguments.length?(t=Array.from(s),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(s){var o=t.indexOf(s);return[e[o-1],e[o]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return UB().domain(e).range(t).unknown(n)},Vs.apply(i,arguments)}const i_=new Date,s_=new Date;function cn(e,t,n,r){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(e(s=new Date(+s)),s),i.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),i.round=s=>{const o=i(s),a=i.ceil(s);return s-o<a-s?o:a},i.offset=(s,o)=>(t(s=new Date(+s),o==null?1:Math.floor(o)),s),i.range=(s,o,a)=>{const l=[];if(s=i.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return l;let c;do l.push(c=new Date(+s)),t(s,a),e(s);while(c<s&&s<o);return l},i.filter=s=>cn(o=>{if(o>=o)for(;e(o),!s(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;t(o,-1),!s(o););else for(;--a>=0;)for(;t(o,1),!s(o););}),n&&(i.count=(s,o)=>(i_.setTime(+s),s_.setTime(+o),e(i_),e(s_),Math.floor(n(i_,s_))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?o=>r(o)%s===0:o=>i.count(0,o)%s===0):i)),i}const p1=cn(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);p1.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?cn(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):p1);p1.range;const So=1e3,ci=So*60,xo=ci*60,Lo=xo*24,N3=Lo*7,i$=Lo*30,o_=Lo*365,Es=cn(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*So)},(e,t)=>(t-e)/So,e=>e.getUTCSeconds());Es.range;const lv=cn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*So)},(e,t)=>{e.setTime(+e+t*ci)},(e,t)=>(t-e)/ci,e=>e.getMinutes());lv.range;const uy=cn(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*ci)},(e,t)=>(t-e)/ci,e=>e.getUTCMinutes());uy.range;const cv=cn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*So-e.getMinutes()*ci)},(e,t)=>{e.setTime(+e+t*xo)},(e,t)=>(t-e)/xo,e=>e.getHours());cv.range;const fy=cn(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*xo)},(e,t)=>(t-e)/xo,e=>e.getUTCHours());fy.range;const Dc=cn(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*ci)/Lo,e=>e.getDate()-1);Dc.range;const uv=cn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Lo,e=>e.getUTCDate()-1);uv.range;const fv=cn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Lo,e=>Math.floor(e/Lo));fv.range;function kc(e){return cn(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*ci)/N3)}const Df=kc(0),bp=kc(1),PB=kc(2),zB=kc(3),Ic=kc(4),jB=kc(5),VB=kc(6);Df.range;bp.range;PB.range;zB.range;Ic.range;jB.range;VB.range;function Oc(e){return cn(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/N3)}const kf=Oc(0),vp=Oc(1),YB=Oc(2),qB=Oc(3),Ec=Oc(4),WB=Oc(5),HB=Oc(6);kf.range;vp.range;YB.range;qB.range;Ec.range;WB.range;HB.range;const dy=cn(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());dy.range;const hy=cn(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());hy.range;const qi=cn(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());qi.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:cn(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});qi.range;const Wi=cn(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Wi.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:cn(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Wi.range;function GB(e,t,n,r,i,s){const o=[[Es,1,So],[Es,5,5*So],[Es,15,15*So],[Es,30,30*So],[s,1,ci],[s,5,5*ci],[s,15,15*ci],[s,30,30*ci],[i,1,xo],[i,3,3*xo],[i,6,6*xo],[i,12,12*xo],[r,1,Lo],[r,2,2*Lo],[n,1,N3],[t,1,i$],[t,3,3*i$],[e,1,o_]];function a(c,u,f){const d=u<c;d&&([c,u]=[u,c]);const h=f&&typeof f.range=="function"?f:l(c,u,f),p=h?h.range(c,+u+1):[];return d?p.reverse():p}function l(c,u,f){const d=Math.abs(u-c)/f,h=Yb(([,,v])=>v).right(o,d);if(h===o.length)return e.every(iS(c/o_,u/o_,f));if(h===0)return p1.every(Math.max(iS(c,u,f),1));const[p,g]=o[d/o[h-1][2]<o[h][2]/d?h-1:h];return p.every(g)}return[a,l]}const[Iet,XB]=GB(Wi,hy,kf,fv,fy,uy),[Eet,Tet]=GB(qi,dy,Df,Dc,cv,lv);function a_(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function l_(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Fd(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function Aet(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,s=e.days,o=e.shortDays,a=e.months,l=e.shortMonths,c=Bd(i),u=Rd(i),f=Bd(s),d=Rd(s),h=Bd(o),p=Rd(o),g=Bd(a),v=Rd(a),y=Bd(l),m=Rd(l),b={a:B,A:O,b:C,B:F,c:null,d:u$,e:u$,f:Qet,g:ont,G:lnt,H:Het,I:Get,j:Xet,L:QB,m:Ket,M:Zet,p:P,q:z,Q:h$,s:p$,S:Jet,u:tnt,U:ent,V:nnt,w:rnt,W:int,x:null,X:null,y:snt,Y:ant,Z:cnt,"%":d$},w={a:H,A:X,b:tt,B:Z,c:null,d:f$,e:f$,f:hnt,g:xnt,G:Ent,H:unt,I:fnt,j:dnt,L:ZB,m:pnt,M:ynt,p:Y,q:Q,Q:h$,s:p$,S:mnt,u:gnt,U:bnt,V:vnt,w:wnt,W:_nt,x:null,X:null,y:Snt,Y:Int,Z:Tnt,"%":d$},S={a:I,A,b:k,B:R,c:E,d:l$,e:l$,f:Vet,g:a$,G:o$,H:c$,I:c$,j:Uet,L:jet,m:Cet,M:Pet,p:N,q:Let,Q:qet,s:Wet,S:zet,u:ket,U:Oet,V:Fet,w:Det,W:Bet,x:M,X:$,y:a$,Y:o$,Z:Ret,"%":Yet};b.x=_(n,b),b.X=_(r,b),b.c=_(t,b),w.x=_(n,w),w.X=_(r,w),w.c=_(t,w);function _(V,J){return function(et){var j=[],At=-1,ot=0,Vt=V.length,Ht,st,de;for(et instanceof Date||(et=new Date(+et));++At<Vt;)V.charCodeAt(At)===37&&(j.push(V.slice(ot,At)),(st=s$[Ht=V.charAt(++At)])!=null?Ht=V.charAt(++At):st=Ht==="e"?" ":"0",(de=J[Ht])&&(Ht=de(et,st)),j.push(Ht),ot=At+1);return j.push(V.slice(ot,At)),j.join("")}}function x(V,J){return function(et){var j=Fd(1900,void 0,1),At=T(j,V,et+="",0),ot,Vt;if(At!=et.length)return null;if("Q"in j)return new Date(j.Q);if("s"in j)return new Date(j.s*1e3+("L"in j?j.L:0));if(J&&!("Z"in j)&&(j.Z=0),"p"in j&&(j.H=j.H%12+j.p*12),j.m===void 0&&(j.m="q"in j?j.q:0),"V"in j){if(j.V<1||j.V>53)return null;"w"in j||(j.w=1),"Z"in j?(ot=l_(Fd(j.y,0,1)),Vt=ot.getUTCDay(),ot=Vt>4||Vt===0?vp.ceil(ot):vp(ot),ot=uv.offset(ot,(j.V-1)*7),j.y=ot.getUTCFullYear(),j.m=ot.getUTCMonth(),j.d=ot.getUTCDate()+(j.w+6)%7):(ot=a_(Fd(j.y,0,1)),Vt=ot.getDay(),ot=Vt>4||Vt===0?bp.ceil(ot):bp(ot),ot=Dc.offset(ot,(j.V-1)*7),j.y=ot.getFullYear(),j.m=ot.getMonth(),j.d=ot.getDate()+(j.w+6)%7)}else("W"in j||"U"in j)&&("w"in j||(j.w="u"in j?j.u%7:"W"in j?1:0),Vt="Z"in j?l_(Fd(j.y,0,1)).getUTCDay():a_(Fd(j.y,0,1)).getDay(),j.m=0,j.d="W"in j?(j.w+6)%7+j.W*7-(Vt+5)%7:j.w+j.U*7-(Vt+6)%7);return"Z"in j?(j.H+=j.Z/100|0,j.M+=j.Z%100,l_(j)):a_(j)}}function T(V,J,et,j){for(var At=0,ot=J.length,Vt=et.length,Ht,st;At<ot;){if(j>=Vt)return-1;if(Ht=J.charCodeAt(At++),Ht===37){if(Ht=J.charAt(At++),st=S[Ht in s$?J.charAt(At++):Ht],!st||(j=st(V,et,j))<0)return-1}else if(Ht!=et.charCodeAt(j++))return-1}return j}function N(V,J,et){var j=c.exec(J.slice(et));return j?(V.p=u.get(j[0].toLowerCase()),et+j[0].length):-1}function I(V,J,et){var j=h.exec(J.slice(et));return j?(V.w=p.get(j[0].toLowerCase()),et+j[0].length):-1}function A(V,J,et){var j=f.exec(J.slice(et));return j?(V.w=d.get(j[0].toLowerCase()),et+j[0].length):-1}function k(V,J,et){var j=y.exec(J.slice(et));return j?(V.m=m.get(j[0].toLowerCase()),et+j[0].length):-1}function R(V,J,et){var j=g.exec(J.slice(et));return j?(V.m=v.get(j[0].toLowerCase()),et+j[0].length):-1}function E(V,J,et){return T(V,t,J,et)}function M(V,J,et){return T(V,n,J,et)}function $(V,J,et){return T(V,r,J,et)}function B(V){return o[V.getDay()]}function O(V){return s[V.getDay()]}function C(V){return l[V.getMonth()]}function F(V){return a[V.getMonth()]}function P(V){return i[+(V.getHours()>=12)]}function z(V){return 1+~~(V.getMonth()/3)}function H(V){return o[V.getUTCDay()]}function X(V){return s[V.getUTCDay()]}function tt(V){return l[V.getUTCMonth()]}function Z(V){return a[V.getUTCMonth()]}function Y(V){return i[+(V.getUTCHours()>=12)]}function Q(V){return 1+~~(V.getUTCMonth()/3)}return{format:function(V){var J=_(V+="",b);return J.toString=function(){return V},J},parse:function(V){var J=x(V+="",!1);return J.toString=function(){return V},J},utcFormat:function(V){var J=_(V+="",w);return J.toString=function(){return V},J},utcParse:function(V){var J=x(V+="",!0);return J.toString=function(){return V},J}}}var s$={"-":"",_:" ",0:"0"},vn=/^\s*\d+/,Met=/^%/,$et=/[\\^$*+?|[\]().{}]/g;function Kt(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(t)+i:i)}function Net(e){return e.replace($et,"\\$&")}function Bd(e){return new RegExp("^(?:"+e.map(Net).join("|")+")","i")}function Rd(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function Det(e,t,n){var r=vn.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function ket(e,t,n){var r=vn.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function Oet(e,t,n){var r=vn.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function Fet(e,t,n){var r=vn.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function Bet(e,t,n){var r=vn.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function o$(e,t,n){var r=vn.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function a$(e,t,n){var r=vn.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Ret(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Let(e,t,n){var r=vn.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function Cet(e,t,n){var r=vn.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function l$(e,t,n){var r=vn.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function Uet(e,t,n){var r=vn.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function c$(e,t,n){var r=vn.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function Pet(e,t,n){var r=vn.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function zet(e,t,n){var r=vn.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function jet(e,t,n){var r=vn.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function Vet(e,t,n){var r=vn.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Yet(e,t,n){var r=Met.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function qet(e,t,n){var r=vn.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function Wet(e,t,n){var r=vn.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function u$(e,t){return Kt(e.getDate(),t,2)}function Het(e,t){return Kt(e.getHours(),t,2)}function Get(e,t){return Kt(e.getHours()%12||12,t,2)}function Xet(e,t){return Kt(1+Dc.count(qi(e),e),t,3)}function QB(e,t){return Kt(e.getMilliseconds(),t,3)}function Qet(e,t){return QB(e,t)+"000"}function Ket(e,t){return Kt(e.getMonth()+1,t,2)}function Zet(e,t){return Kt(e.getMinutes(),t,2)}function Jet(e,t){return Kt(e.getSeconds(),t,2)}function tnt(e){var t=e.getDay();return t===0?7:t}function ent(e,t){return Kt(Df.count(qi(e)-1,e),t,2)}function KB(e){var t=e.getDay();return t>=4||t===0?Ic(e):Ic.ceil(e)}function nnt(e,t){return e=KB(e),Kt(Ic.count(qi(e),e)+(qi(e).getDay()===4),t,2)}function rnt(e){return e.getDay()}function int(e,t){return Kt(bp.count(qi(e)-1,e),t,2)}function snt(e,t){return Kt(e.getFullYear()%100,t,2)}function ont(e,t){return e=KB(e),Kt(e.getFullYear()%100,t,2)}function ant(e,t){return Kt(e.getFullYear()%1e4,t,4)}function lnt(e,t){var n=e.getDay();return e=n>=4||n===0?Ic(e):Ic.ceil(e),Kt(e.getFullYear()%1e4,t,4)}function cnt(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Kt(t/60|0,"0",2)+Kt(t%60,"0",2)}function f$(e,t){return Kt(e.getUTCDate(),t,2)}function unt(e,t){return Kt(e.getUTCHours(),t,2)}function fnt(e,t){return Kt(e.getUTCHours()%12||12,t,2)}function dnt(e,t){return Kt(1+uv.count(Wi(e),e),t,3)}function ZB(e,t){return Kt(e.getUTCMilliseconds(),t,3)}function hnt(e,t){return ZB(e,t)+"000"}function pnt(e,t){return Kt(e.getUTCMonth()+1,t,2)}function ynt(e,t){return Kt(e.getUTCMinutes(),t,2)}function mnt(e,t){return Kt(e.getUTCSeconds(),t,2)}function gnt(e){var t=e.getUTCDay();return t===0?7:t}function bnt(e,t){return Kt(kf.count(Wi(e)-1,e),t,2)}function JB(e){var t=e.getUTCDay();return t>=4||t===0?Ec(e):Ec.ceil(e)}function vnt(e,t){return e=JB(e),Kt(Ec.count(Wi(e),e)+(Wi(e).getUTCDay()===4),t,2)}function wnt(e){return e.getUTCDay()}function _nt(e,t){return Kt(vp.count(Wi(e)-1,e),t,2)}function Snt(e,t){return Kt(e.getUTCFullYear()%100,t,2)}function xnt(e,t){return e=JB(e),Kt(e.getUTCFullYear()%100,t,2)}function Int(e,t){return Kt(e.getUTCFullYear()%1e4,t,4)}function Ent(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Ec(e):Ec.ceil(e),Kt(e.getUTCFullYear()%1e4,t,4)}function Tnt(){return"+0000"}function d$(){return"%"}function h$(e){return+e}function p$(e){return Math.floor(+e/1e3)}var qc,D3,py;Ant({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Ant(e){return qc=Aet(e),D3=qc.format,qc.parse,py=qc.utcFormat,qc.utcParse,qc}function Mnt(e){return new Date(e)}function $nt(e){return e instanceof Date?+e:+new Date(+e)}function k3(e,t,n,r,i,s,o,a,l,c){var u=$B(),f=u.invert,d=u.domain,h=c(".%L"),p=c(":%S"),g=c("%I:%M"),v=c("%I %p"),y=c("%a %d"),m=c("%b %d"),b=c("%B"),w=c("%Y");function S(_){return(l(_)<_?h:a(_)<_?p:o(_)<_?g:s(_)<_?v:r(_)<_?i(_)<_?y:m:n(_)<_?b:w)(_)}return u.invert=function(_){return new Date(f(_))},u.domain=function(_){return arguments.length?d(Array.from(_,$nt)):d().map(Mnt)},u.ticks=function(_){var x=d();return e(x[0],x[x.length-1],_??10)},u.tickFormat=function(_,x){return x==null?S:c(x)},u.nice=function(_){var x=d();return(!_||typeof _.range!="function")&&(_=t(x[0],x[x.length-1],_??10)),_?d(DB(x,_)):u},u.copy=function(){return ly(u,k3(e,t,n,r,i,s,o,a,l,c))},u}function Nnt(){return Vs.apply(k3(Eet,Tet,qi,dy,Df,Dc,cv,lv,Es,D3).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Dnt(){return Vs.apply(k3(Iet,XB,Wi,hy,kf,uv,fy,uy,Es,py).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function dv(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function hv(){var e=0,t=.5,n=1,r=1,i,s,o,a,l,c=li,u,f=!1,d;function h(g){return isNaN(g=+g)?d:(g=.5+((g=+u(g))-s)*(r*g<r*s?a:l),c(f?Math.max(0,Math.min(1,g)):g))}h.domain=function(g){return arguments.length?([e,t,n]=g,i=u(e=+e),s=u(t=+t),o=u(n=+n),a=i===s?0:.5/(s-i),l=s===o?0:.5/(o-s),r=s<i?-1:1,h):[e,t,n]},h.clamp=function(g){return arguments.length?(f=!!g,h):f},h.interpolator=function(g){return arguments.length?(c=g,h):c};function p(g){return function(v){var y,m,b;return arguments.length?([y,m,b]=v,c=Jb(g,[y,m,b]),h):[c(0),c(.5),c(1)]}}return h.range=p(rd),h.rangeRound=p(m3),h.unknown=function(g){return arguments.length?(d=g,h):d},function(g){return u=g,i=g(e),s=g(t),o=g(n),a=i===s?0:.5/(s-i),l=s===o?0:.5/(o-s),r=s<i?-1:1,h}}function tR(){var e=cy(hv()(li));return e.copy=function(){return dv(e,tR())},iv.apply(e,arguments)}function eR(){var e=kB(hv()).domain([.1,1,10]);return e.copy=function(){return dv(e,eR()).base(e.base())},iv.apply(e,arguments)}function nR(){var e=FB(hv());return e.copy=function(){return dv(e,nR()).constant(e.constant())},iv.apply(e,arguments)}function rR(){var e=RB(hv());return e.copy=function(){return dv(e,rR()).exponent(e.exponent())},iv.apply(e,arguments)}function kt(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const knt=kt("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Ont=kt("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),Fnt=kt("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),Bnt=kt("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),Rnt=kt("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),Lnt=kt("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),Cnt=kt("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),Unt=kt("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),Pnt=kt("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),znt=kt("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),ge=e=>jQ(e[e.length-1]);var iR=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(kt);const sR=ge(iR);var oR=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(kt);const aR=ge(oR);var lR=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(kt);const cR=ge(lR);var uR=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(kt);const fR=ge(uR);var YS=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(kt);const y1=ge(YS);var dR=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(kt);const hR=ge(dR);var qS=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(kt);const m1=ge(qS);var pR=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(kt);const yR=ge(pR);var mR=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(kt);const gR=ge(mR);var bR=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(kt);const vR=ge(bR);var wR=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(kt);const _R=ge(wR);var SR=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(kt);const xR=ge(SR);var IR=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(kt);const ER=ge(IR);var TR=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(kt);const AR=ge(TR);var MR=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(kt);const $R=ge(MR);var NR=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(kt);const DR=ge(NR);var kR=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(kt);const OR=ge(kR);var FR=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(kt);const BR=ge(FR);var RR=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(kt);const LR=ge(RR);var CR=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(kt);const UR=ge(CR);var PR=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(kt);const zR=ge(PR);var jR=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(kt);const VR=ge(jR);var YR=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(kt);const qR=ge(YR);var WR=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(kt);const HR=ge(WR);var GR=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(kt);const XR=ge(GR);var QR=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(kt);const KR=ge(QR);var ZR=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(kt);const JR=ge(ZR);function tL(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-e*(35.34-e*(2381.73-e*(6402.7-e*(7024.72-e*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+e*(170.73+e*(52.82-e*(131.46-e*(176.58-e*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+e*(442.36-e*(2482.43-e*(6167.24-e*(6614.94-e*2475.67)))))))+")"}const eL=g3(Cs(300,.5,0),Cs(-240,.5,1));var nL=g3(Cs(-100,.75,.35),Cs(80,1.5,.8)),rL=g3(Cs(260,.75,.35),Cs(80,1.5,.8)),I0=Cs();function iL(e){(e<0||e>1)&&(e-=Math.floor(e));var t=Math.abs(e-.5);return I0.h=360*e-100,I0.s=1.5-1.5*t,I0.l=.8-.9*t,I0+""}var E0=gi(),jnt=Math.PI/3,Vnt=Math.PI*2/3;function sL(e){var t;return e=(.5-e)*Math.PI,E0.r=255*(t=Math.sin(e))*t,E0.g=255*(t=Math.sin(e+jnt))*t,E0.b=255*(t=Math.sin(e+Vnt))*t,E0+""}function oL(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+e*(1172.33-e*(10793.56-e*(33300.12-e*(38394.49-e*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+e*(557.33+e*(1225.33-e*(3574.96-e*(1073.77+e*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+e*(3211.1-e*(15327.97-e*(27814-e*(22569.18-e*6838.66)))))))+")"}function pv(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}const aL=pv(kt("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var lL=pv(kt("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),cL=pv(kt("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),uL=pv(kt("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function hn(e){return function(){return e}}const fL=Math.cos,O3=Math.min,g1=Math.sin,un=Math.sqrt,y$=1e-12,b1=Math.PI,yv=2*b1;function dL(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new UF(t)}function hL(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function pL(e){this._context=e}pL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function yy(e){return new pL(e)}function yL(e){return e[0]}function mL(e){return e[1]}function gL(e,t){var n=hn(!0),r=null,i=yy,s=null,o=dL(a);e=typeof e=="function"?e:e===void 0?yL:hn(e),t=typeof t=="function"?t:t===void 0?mL:hn(t);function a(l){var c,u=(l=hL(l)).length,f,d=!1,h;for(r==null&&(s=i(h=o())),c=0;c<=u;++c)!(c<u&&n(f=l[c],c,l))===d&&((d=!d)?s.lineStart():s.lineEnd()),d&&s.point(+e(f,c,l),+t(f,c,l));if(h)return s=null,h+""||null}return a.x=function(l){return arguments.length?(e=typeof l=="function"?l:hn(+l),a):e},a.y=function(l){return arguments.length?(t=typeof l=="function"?l:hn(+l),a):t},a.defined=function(l){return arguments.length?(n=typeof l=="function"?l:hn(!!l),a):n},a.curve=function(l){return arguments.length?(i=l,r!=null&&(s=i(r)),a):i},a.context=function(l){return arguments.length?(l==null?r=s=null:s=i(r=l),a):r},a}function F3(e,t,n){var r=null,i=hn(!0),s=null,o=yy,a=null,l=dL(c);e=typeof e=="function"?e:e===void 0?yL:hn(+e),t=typeof t=="function"?t:hn(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?mL:hn(+n);function c(f){var d,h,p,g=(f=hL(f)).length,v,y=!1,m,b=new Array(g),w=new Array(g);for(s==null&&(a=o(m=l())),d=0;d<=g;++d){if(!(d<g&&i(v=f[d],d,f))===y)if(y=!y)h=d,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),p=d-1;p>=h;--p)a.point(b[p],w[p]);a.lineEnd(),a.areaEnd()}y&&(b[d]=+e(v,d,f),w[d]=+t(v,d,f),a.point(r?+r(v,d,f):b[d],n?+n(v,d,f):w[d]))}if(m)return a=null,m+""||null}function u(){return gL().defined(i).curve(o).context(s)}return c.x=function(f){return arguments.length?(e=typeof f=="function"?f:hn(+f),r=null,c):e},c.x0=function(f){return arguments.length?(e=typeof f=="function"?f:hn(+f),c):e},c.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:hn(+f),c):r},c.y=function(f){return arguments.length?(t=typeof f=="function"?f:hn(+f),n=null,c):t},c.y0=function(f){return arguments.length?(t=typeof f=="function"?f:hn(+f),c):t},c.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:hn(+f),c):n},c.lineX0=c.lineY0=function(){return u().x(e).y(t)},c.lineY1=function(){return u().x(e).y(n)},c.lineX1=function(){return u().x(r).y(t)},c.defined=function(f){return arguments.length?(i=typeof f=="function"?f:hn(!!f),c):i},c.curve=function(f){return arguments.length?(o=f,s!=null&&(a=o(s)),c):o},c.context=function(f){return arguments.length?(f==null?s=a=null:a=o(s=f),c):s},c}class bL{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function Ynt(e){return new bL(e,!0)}function qnt(e){return new bL(e,!1)}const Wnt=un(3),vL={draw(e,t){const n=un(t+O3(t/28,.75))*.59436,r=n/2,i=r*Wnt;e.moveTo(0,n),e.lineTo(0,-n),e.moveTo(-i,-r),e.lineTo(i,r),e.moveTo(-i,r),e.lineTo(i,-r)}},wp={draw(e,t){const n=un(t/b1);e.moveTo(n,0),e.arc(0,0,n,0,yv)}},wL={draw(e,t){const n=un(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},_L=un(1/3),Hnt=_L*2,SL={draw(e,t){const n=un(t/Hnt),r=n*_L;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},xL={draw(e,t){const n=un(t)*.62625;e.moveTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.lineTo(-n,0),e.closePath()}},IL={draw(e,t){const n=un(t-O3(t/7,2))*.87559;e.moveTo(-n,0),e.lineTo(n,0),e.moveTo(0,n),e.lineTo(0,-n)}},EL={draw(e,t){const n=un(t),r=-n/2;e.rect(r,r,n,n)}},TL={draw(e,t){const n=un(t)*.4431;e.moveTo(n,n),e.lineTo(n,-n),e.lineTo(-n,-n),e.lineTo(-n,n),e.closePath()}},Gnt=.8908130915292852,AL=g1(b1/10)/g1(7*b1/10),Xnt=g1(yv/10)*AL,Qnt=-fL(yv/10)*AL,ML={draw(e,t){const n=un(t*Gnt),r=Xnt*n,i=Qnt*n;e.moveTo(0,-n),e.lineTo(r,i);for(let s=1;s<5;++s){const o=yv*s/5,a=fL(o),l=g1(o);e.lineTo(l*n,-a*n),e.lineTo(a*r-l*i,l*r+a*i)}e.closePath()}},c_=un(3),$L={draw(e,t){const n=-un(t/(c_*3));e.moveTo(0,n*2),e.lineTo(-c_*n,-n),e.lineTo(c_*n,-n),e.closePath()}},Knt=un(3),NL={draw(e,t){const n=un(t)*.6824,r=n/2,i=n*Knt/2;e.moveTo(0,-n),e.lineTo(i,r),e.lineTo(-i,r),e.closePath()}},Wr=-.5,Hr=un(3)/2,WS=1/un(12),Znt=(WS/2+1)*3,DL={draw(e,t){const n=un(t/Znt),r=n/2,i=n*WS,s=r,o=n*WS+n,a=-s,l=o;e.moveTo(r,i),e.lineTo(s,o),e.lineTo(a,l),e.lineTo(Wr*r-Hr*i,Hr*r+Wr*i),e.lineTo(Wr*s-Hr*o,Hr*s+Wr*o),e.lineTo(Wr*a-Hr*l,Hr*a+Wr*l),e.lineTo(Wr*r+Hr*i,Wr*i-Hr*r),e.lineTo(Wr*s+Hr*o,Wr*o-Hr*s),e.lineTo(Wr*a+Hr*l,Wr*l-Hr*a),e.closePath()}},kL={draw(e,t){const n=un(t-O3(t/6,1.7))*.6189;e.moveTo(-n,-n),e.lineTo(n,n),e.moveTo(-n,n),e.lineTo(n,-n)}},Jnt=[wp,wL,SL,EL,ML,$L,DL],trt=[wp,IL,kL,NL,vL,TL,xL];function za(){}function v1(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function mv(e){this._context=e}mv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:v1(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:v1(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function ert(e){return new mv(e)}function OL(e){this._context=e}OL.prototype={areaStart:za,areaEnd:za,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:v1(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function nrt(e){return new OL(e)}function FL(e){this._context=e}FL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:v1(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function rrt(e){return new FL(e)}function BL(e,t){this._basis=new mv(e),this._beta=t}BL.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],s=e[n]-r,o=t[n]-i,a=-1,l;++a<=n;)l=a/n,this._basis.point(this._beta*e[a]+(1-this._beta)*(r+l*s),this._beta*t[a]+(1-this._beta)*(i+l*o));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const irt=function e(t){function n(r){return t===1?new mv(r):new BL(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function w1(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function B3(e,t){this._context=e,this._k=(1-t)/6}B3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:w1(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:w1(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const srt=function e(t){function n(r){return new B3(r,t)}return n.tension=function(r){return e(+r)},n}(0);function R3(e,t){this._context=e,this._k=(1-t)/6}R3.prototype={areaStart:za,areaEnd:za,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:w1(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const ort=function e(t){function n(r){return new R3(r,t)}return n.tension=function(r){return e(+r)},n}(0);function L3(e,t){this._context=e,this._k=(1-t)/6}L3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:w1(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const art=function e(t){function n(r){return new L3(r,t)}return n.tension=function(r){return e(+r)},n}(0);function C3(e,t,n){var r=e._x1,i=e._y1,s=e._x2,o=e._y2;if(e._l01_a>y$){var a=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,l=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*a-e._x0*e._l12_2a+e._x2*e._l01_2a)/l,i=(i*a-e._y0*e._l12_2a+e._y2*e._l01_2a)/l}if(e._l23_a>y$){var c=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,u=3*e._l23_a*(e._l23_a+e._l12_a);s=(s*c+e._x1*e._l23_2a-t*e._l12_2a)/u,o=(o*c+e._y1*e._l23_2a-n*e._l12_2a)/u}e._context.bezierCurveTo(r,i,s,o,e._x2,e._y2)}function RL(e,t){this._context=e,this._alpha=t}RL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:C3(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const lrt=function e(t){function n(r){return t?new RL(r,t):new B3(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function LL(e,t){this._context=e,this._alpha=t}LL.prototype={areaStart:za,areaEnd:za,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:C3(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const crt=function e(t){function n(r){return t?new LL(r,t):new R3(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function CL(e,t){this._context=e,this._alpha=t}CL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:C3(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const urt=function e(t){function n(r){return t?new CL(r,t):new L3(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function UL(e){this._context=e}UL.prototype={areaStart:za,areaEnd:za,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function frt(e){return new UL(e)}function m$(e){return e<0?-1:1}function g$(e,t,n){var r=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(r||i<0&&-0),o=(n-e._y1)/(i||r<0&&-0),a=(s*i+o*r)/(r+i);return(m$(s)+m$(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function b$(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function u_(e,t,n){var r=e._x0,i=e._y0,s=e._x1,o=e._y1,a=(s-r)/3;e._context.bezierCurveTo(r+a,i+a*t,s-a,o-a*n,s,o)}function _1(e){this._context=e}_1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:u_(this,this._t0,b$(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,u_(this,b$(this,n=g$(this,e,t)),n);break;default:u_(this,this._t0,n=g$(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function PL(e){this._context=new zL(e)}(PL.prototype=Object.create(_1.prototype)).point=function(e,t){_1.prototype.point.call(this,t,e)};function zL(e){this._context=e}zL.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,s){this._context.bezierCurveTo(t,e,r,n,s,i)}};function drt(e){return new _1(e)}function hrt(e){return new PL(e)}function jL(e){this._context=e}jL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=v$(e),i=v$(t),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function v$(e){var t,n=e.length-1,r,i=new Array(n),s=new Array(n),o=new Array(n);for(i[0]=0,s[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,s[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,s[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/s[t-1],s[t]-=r,o[t]-=r*o[t-1];for(i[n-1]=o[n-1]/s[n-1],t=n-2;t>=0;--t)i[t]=(o[t]-i[t+1])/s[t];for(s[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function prt(e){return new jL(e)}function gv(e,t){this._context=e,this._t=t}gv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function yrt(e){return new gv(e,.5)}function mrt(e){return new gv(e,0)}function grt(e){return new gv(e,1)}const T0=e=>()=>e;function brt(e,{sourceEvent:t,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function Ts(e,t,n){this.k=e,this.x=t,this.y=n}Ts.prototype={constructor:Ts,scale:function(e){return e===1?this:new Ts(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Ts(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var VL=new Ts(1,0,0);Ts.prototype;function f_(e){e.stopImmediatePropagation()}function Ld(e){e.preventDefault(),e.stopImmediatePropagation()}function vrt(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function wrt(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function w$(){return this.__zoom||VL}function _rt(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Srt(){return navigator.maxTouchPoints||"ontouchstart"in this}function xrt(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],s=e.invertY(t[0][1])-n[0][1],o=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),o>s?(s+o)/2:Math.min(0,s)||Math.max(0,o))}function Irt(){var e=vrt,t=wrt,n=xrt,r=_rt,i=Srt,s=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],a=250,l=rK,c=Gb("start","zoom","end"),u,f,d,h=500,p=150,g=0,v=10;function y(E){E.property("__zoom",w$).on("wheel.zoom",T,{passive:!1}).on("mousedown.zoom",N).on("dblclick.zoom",I).filter(i).on("touchstart.zoom",A).on("touchmove.zoom",k).on("touchend.zoom touchcancel.zoom",R).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}y.transform=function(E,M,$,B){var O=E.selection?E.selection():E;O.property("__zoom",w$),E!==O?S(E,M,$,B):O.interrupt().each(function(){_(this,arguments).event(B).start().zoom(null,typeof M=="function"?M.apply(this,arguments):M).end()})},y.scaleBy=function(E,M,$,B){y.scaleTo(E,function(){var O=this.__zoom.k,C=typeof M=="function"?M.apply(this,arguments):M;return O*C},$,B)},y.scaleTo=function(E,M,$,B){y.transform(E,function(){var O=t.apply(this,arguments),C=this.__zoom,F=$==null?w(O):typeof $=="function"?$.apply(this,arguments):$,P=C.invert(F),z=typeof M=="function"?M.apply(this,arguments):M;return n(b(m(C,z),F,P),O,o)},$,B)},y.translateBy=function(E,M,$,B){y.transform(E,function(){return n(this.__zoom.translate(typeof M=="function"?M.apply(this,arguments):M,typeof $=="function"?$.apply(this,arguments):$),t.apply(this,arguments),o)},null,B)},y.translateTo=function(E,M,$,B,O){y.transform(E,function(){var C=t.apply(this,arguments),F=this.__zoom,P=B==null?w(C):typeof B=="function"?B.apply(this,arguments):B;return n(VL.translate(P[0],P[1]).scale(F.k).translate(typeof M=="function"?-M.apply(this,arguments):-M,typeof $=="function"?-$.apply(this,arguments):-$),C,o)},B,O)};function m(E,M){return M=Math.max(s[0],Math.min(s[1],M)),M===E.k?E:new Ts(M,E.x,E.y)}function b(E,M,$){var B=M[0]-$[0]*E.k,O=M[1]-$[1]*E.k;return B===E.x&&O===E.y?E:new Ts(E.k,B,O)}function w(E){return[(+E[0][0]+ +E[1][0])/2,(+E[0][1]+ +E[1][1])/2]}function S(E,M,$,B){E.on("start.zoom",function(){_(this,arguments).event(B).start()}).on("interrupt.zoom end.zoom",function(){_(this,arguments).event(B).end()}).tween("zoom",function(){var O=this,C=arguments,F=_(O,C).event(B),P=t.apply(O,C),z=$==null?w(P):typeof $=="function"?$.apply(O,C):$,H=Math.max(P[1][0]-P[0][0],P[1][1]-P[0][1]),X=O.__zoom,tt=typeof M=="function"?M.apply(O,C):M,Z=l(X.invert(z).concat(H/X.k),tt.invert(z).concat(H/tt.k));return function(Y){if(Y===1)Y=tt;else{var Q=Z(Y),V=H/Q[2];Y=new Ts(V,z[0]-Q[0]*V,z[1]-Q[1]*V)}F.zoom(null,Y)}})}function _(E,M,$){return!$&&E.__zooming||new x(E,M)}function x(E,M){this.that=E,this.args=M,this.active=0,this.sourceEvent=null,this.extent=t.apply(E,M),this.taps=0}x.prototype={event:function(E){return E&&(this.sourceEvent=E),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(E,M){return this.mouse&&E!=="mouse"&&(this.mouse[1]=M.invert(this.mouse[0])),this.touch0&&E!=="touch"&&(this.touch0[1]=M.invert(this.touch0[0])),this.touch1&&E!=="touch"&&(this.touch1[1]=M.invert(this.touch1[0])),this.that.__zoom=M,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(E){var M=ye(this.that).datum();c.call(E,this.that,new brt(E,{sourceEvent:this.sourceEvent,target:y,type:E,transform:this.that.__zoom,dispatch:c}),M)}};function T(E,...M){if(!e.apply(this,arguments))return;var $=_(this,M).event(E),B=this.__zoom,O=Math.max(s[0],Math.min(s[1],B.k*Math.pow(2,r.apply(this,arguments)))),C=Mi(E);if($.wheel)($.mouse[0][0]!==C[0]||$.mouse[0][1]!==C[1])&&($.mouse[1]=B.invert($.mouse[0]=C)),clearTimeout($.wheel);else{if(B.k===O)return;$.mouse=[C,B.invert(C)],Qu(this),$.start()}Ld(E),$.wheel=setTimeout(F,p),$.zoom("mouse",n(b(m(B,O),$.mouse[0],$.mouse[1]),$.extent,o));function F(){$.wheel=null,$.end()}}function N(E,...M){if(d||!e.apply(this,arguments))return;var $=E.currentTarget,B=_(this,M,!0).event(E),O=ye(E.view).on("mousemove.zoom",z,!0).on("mouseup.zoom",H,!0),C=Mi(E,$),F=E.clientX,P=E.clientY;hF(E.view),f_(E),B.mouse=[C,this.__zoom.invert(C)],Qu(this),B.start();function z(X){if(Ld(X),!B.moved){var tt=X.clientX-F,Z=X.clientY-P;B.moved=tt*tt+Z*Z>g}B.event(X).zoom("mouse",n(b(B.that.__zoom,B.mouse[0]=Mi(X,$),B.mouse[1]),B.extent,o))}function H(X){O.on("mousemove.zoom mouseup.zoom",null),pF(X.view,B.moved),Ld(X),B.event(X).end()}}function I(E,...M){if(e.apply(this,arguments)){var $=this.__zoom,B=Mi(E.changedTouches?E.changedTouches[0]:E,this),O=$.invert(B),C=$.k*(E.shiftKey?.5:2),F=n(b(m($,C),B,O),t.apply(this,M),o);Ld(E),a>0?ye(this).transition().duration(a).call(S,F,B,E):ye(this).call(y.transform,F,B,E)}}function A(E,...M){if(e.apply(this,arguments)){var $=E.touches,B=$.length,O=_(this,M,E.changedTouches.length===B).event(E),C,F,P,z;for(f_(E),F=0;F<B;++F)P=$[F],z=Mi(P,this),z=[z,this.__zoom.invert(z),P.identifier],O.touch0?!O.touch1&&O.touch0[2]!==z[2]&&(O.touch1=z,O.taps=0):(O.touch0=z,C=!0,O.taps=1+!!u);u&&(u=clearTimeout(u)),C&&(O.taps<2&&(f=z[0],u=setTimeout(function(){u=null},h)),Qu(this),O.start())}}function k(E,...M){if(this.__zooming){var $=_(this,M).event(E),B=E.changedTouches,O=B.length,C,F,P,z;for(Ld(E),C=0;C<O;++C)F=B[C],P=Mi(F,this),$.touch0&&$.touch0[2]===F.identifier?$.touch0[0]=P:$.touch1&&$.touch1[2]===F.identifier&&($.touch1[0]=P);if(F=$.that.__zoom,$.touch1){var H=$.touch0[0],X=$.touch0[1],tt=$.touch1[0],Z=$.touch1[1],Y=(Y=tt[0]-H[0])*Y+(Y=tt[1]-H[1])*Y,Q=(Q=Z[0]-X[0])*Q+(Q=Z[1]-X[1])*Q;F=m(F,Math.sqrt(Y/Q)),P=[(H[0]+tt[0])/2,(H[1]+tt[1])/2],z=[(X[0]+Z[0])/2,(X[1]+Z[1])/2]}else if($.touch0)P=$.touch0[0],z=$.touch0[1];else return;$.zoom("touch",n(b(F,P,z),$.extent,o))}}function R(E,...M){if(this.__zooming){var $=_(this,M).event(E),B=E.changedTouches,O=B.length,C,F;for(f_(E),d&&clearTimeout(d),d=setTimeout(function(){d=null},h),C=0;C<O;++C)F=B[C],$.touch0&&$.touch0[2]===F.identifier?delete $.touch0:$.touch1&&$.touch1[2]===F.identifier&&delete $.touch1;if($.touch1&&!$.touch0&&($.touch0=$.touch1,delete $.touch1),$.touch0)$.touch0[1]=this.__zoom.invert($.touch0[0]);else if($.end(),$.taps===2&&(F=Mi(F,this),Math.hypot(f[0]-F[0],f[1]-F[1])<v)){var P=ye(this).on("dblclick.zoom");P&&P.apply(this,arguments)}}}return y.wheelDelta=function(E){return arguments.length?(r=typeof E=="function"?E:T0(+E),y):r},y.filter=function(E){return arguments.length?(e=typeof E=="function"?E:T0(!!E),y):e},y.touchable=function(E){return arguments.length?(i=typeof E=="function"?E:T0(!!E),y):i},y.extent=function(E){return arguments.length?(t=typeof E=="function"?E:T0([[+E[0][0],+E[0][1]],[+E[1][0],+E[1][1]]]),y):t},y.scaleExtent=function(E){return arguments.length?(s[0]=+E[0],s[1]=+E[1],y):[s[0],s[1]]},y.translateExtent=function(E){return arguments.length?(o[0][0]=+E[0][0],o[1][0]=+E[1][0],o[0][1]=+E[0][1],o[1][1]=+E[1][1],y):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},y.constrain=function(E){return arguments.length?(n=E,y):n},y.duration=function(E){return arguments.length?(a=+E,y):a},y.interpolate=function(E){return arguments.length?(l=E,y):l},y.on=function(){var E=c.on.apply(c,arguments);return E===c?y:E},y.clickDistance=function(E){return arguments.length?(g=(E=+E)*E,y):Math.sqrt(g)},y.tapDistance=function(E){return arguments.length?(v=+E,y):v},y}function Gn(e){return e!=null&&!Number.isNaN(e)}function bi(e,t){return+Gn(t)-+Gn(e)||Pe(e,t)}function S1(e,t){return+Gn(t)-+Gn(e)||gc(e,t)}function U3(e){return e!=null&&`${e}`!=""}function x1(e){return isFinite(e)?e:NaN}function Ao(e){return e>0&&isFinite(e)?e:NaN}function bv(e){return e<0&&isFinite(e)?e:NaN}const Nu=1e3,zl=Nu*60,jl=zl*60,Co=jl*24,cs=Co*7,rc=Co*30,na=Co*365,d_=[["millisecond",1],["2 milliseconds",2],["5 milliseconds",5],["10 milliseconds",10],["20 milliseconds",20],["50 milliseconds",50],["100 milliseconds",100],["200 milliseconds",200],["500 milliseconds",500],["second",Nu],["5 seconds",5*Nu],["15 seconds",15*Nu],["30 seconds",30*Nu],["minute",zl],["5 minutes",5*zl],["15 minutes",15*zl],["30 minutes",30*zl],["hour",jl],["3 hours",3*jl],["6 hours",6*jl],["12 hours",12*jl],["day",Co],["2 days",2*Co],["week",cs],["2 weeks",2*cs],["month",rc],["3 months",3*rc],["6 months",6*rc],["year",na],["2 years",2*na],["5 years",5*na],["10 years",10*na],["20 years",20*na],["50 years",50*na],["100 years",100*na]],P3=new Map([["second",Nu],["minute",zl],["hour",jl],["day",Co],["monday",cs],["tuesday",cs],["wednesday",cs],["thursday",cs],["friday",cs],["saturday",cs],["sunday",cs],["week",cs],["month",rc],["year",na]]),YL=new Map([["second",Es],["minute",lv],["hour",cv],["day",Dc],["monday",bp],["tuesday",PB],["wednesday",zB],["thursday",Ic],["friday",jB],["saturday",VB],["sunday",Df],["week",Df],["month",dy],["year",qi]]),qL=new Map([["second",Es],["minute",uy],["hour",fy],["day",fv],["monday",vp],["tuesday",YB],["wednesday",qB],["thursday",Ec],["friday",WB],["saturday",HB],["sunday",kf],["week",kf],["month",hy],["year",Wi]]),my=Symbol("intervalDuration"),vv=Symbol("intervalType");for(const[e,t]of YL)t[my]=P3.get(e),t[vv]="time";for(const[e,t]of qL)t[my]=P3.get(e),t[vv]="utc";const Ert=[["year",Wi,"utc"],["year",qi,"time"],["month",hy,"utc"],["month",dy,"time"],["day",fv,"utc",6*rc],["day",Dc,"time",6*rc],["hour",fy,"utc",3*Co],["minute",uy,"utc",6*jl],["second",Es,"utc",30*zl]];function WL(e,t,n){let r=`${e}`.toLowerCase();r.endsWith("s")&&(r=r.slice(0,-1));let i=1;const s=/^(?:(\d+)\s+)/.exec(r);switch(s&&(r=r.slice(s[0].length),i=+s[1]),r){case"quarter":r="month",i*=3;break;case"half":r="month",i*=6;break}let o=t.get(r);if(!o)throw new Error(`unknown interval: ${e}`);if(i>1){if(!o.every)throw new Error(`non-periodic interval: ${r}`);o=o.every(i),o[my]=P3.get(r)*i,o[vv]=n}return o}function HL(e){return WL(e,YL,"time")}function z3(e){return WL(e,qL,"utc")}function _$(e,t){if(!(t>1))return;const n=e[my];if(!d_.some(([,i])=>i===n)||n%Co===0&&Co<n&&n<rc)return;const[r]=d_[Yb(([,i])=>Math.log(i)).center(d_,Math.log(n*t))];return(e[vv]==="time"?HL:z3)(r)}function S$(e,t,n){const r=t==="time"?D3:py;if(n==null)return r(e==="year"?"%Y":e==="month"?"%Y-%m":e==="day"?"%Y-%m-%d":e==="hour"||e==="minute"?"%Y-%m-%dT%H:%M":e==="second"?"%Y-%m-%dT%H:%M:%S":"%Y-%m-%dT%H:%M:%S.%L");const i=Trt(n);switch(e){case"millisecond":return Wc(r(".%L"),r(":%M:%S"),i);case"second":return Wc(r(":%S"),r("%-I:%M"),i);case"minute":return Wc(r("%-I:%M"),r("%p"),i);case"hour":return Wc(r("%-I %p"),r("%b %-d"),i);case"day":return Wc(r("%-d"),r("%b"),i);case"month":return Wc(r("%b"),r("%Y"),i);case"year":return r("%Y")}throw new Error("unable to format time ticks")}function Trt(e){return e==="left"||e==="right"?(t,n)=>`
${t}
${n}`:e==="top"?(t,n)=>`${n}
${t}`:(t,n)=>`${t}
${n}`}function Art(e,t){const n=$e(DG(e,(r,i)=>Math.abs(i-r)));if(n<1e3)return S$("millisecond","utc",t);for(const[r,i,s,o]of Ert){if(n>o||r==="hour"&&!n)break;if(e.every(a=>i.floor(a)>=a))return S$(r,s,t)}}function Wc(e,t,n){return(r,i,s)=>{const o=e(r,i),a=t(r,i),l=i-Bf(s);return i!==l&&s[l]!==void 0&&a===t(s[l],l)?o:n(o,a)}}const Of=Object.getPrototypeOf(Uint8Array),Mrt=Object.prototype.toString,GL=Symbol("reindex");function Ut(e,t,n){const r=typeof t;return r==="string"?x$(e,XL(t),n):r==="function"?x$(e,t,n):r==="number"||t instanceof Date||r==="boolean"?_e(e,Ur(t),n):typeof(t==null?void 0:t.transform)=="function"?I$(t.transform(e),n):$rt(I$(t,n),e==null?void 0:e[GL])}function $rt(e,t){return t?_v(e,t):e}function x$(e,t,n){return _e(e,(n==null?void 0:n.prototype)instanceof Of?Nrt(t):t,n)}function I$(e,t){return t===void 0?vr(e):e instanceof t?e:t.prototype instanceof Of&&!(e instanceof Of)?t.from(e,Y3):t.from(e)}function Nrt(e){return(t,n)=>Y3(e(t,n))}const Dh=[null],XL=e=>t=>t[e],Ir={transform:Yo},gt={transform:e=>e},j3=()=>1,Drt=()=>!0,Fn=e=>e==null?e:`${e}`,jt=e=>e==null?e:+e,gy=e=>e?e[0]:void 0,_p=e=>e?e[1]:void 0,krt=e=>e?e[2]:void 0,Ur=e=>()=>e;function V3(e){const t=+`${e}`.slice(1)/100;return(n,r)=>Ua(n,t,r)}function lr(e){return e instanceof Of?e:_e(e,Y3,Float64Array)}function Y3(e){return e==null?NaN:Number(e)}function Ort(e){return _e(e,QL)}function QL(e){return e instanceof Date&&!isNaN(e)?e:typeof e=="string"?CO(e):e==null||isNaN(e=+e)?void 0:new Date(e)}function br(e,t){return e===void 0&&(e=t),e===null?[void 0,"none"]:vy(e)?[void 0,e]:[e,void 0]}function Ke(e,t){return e===void 0&&(e=t),e===null||typeof e=="number"?[void 0,e]:[e,void 0]}function KL(e,t,n){if(e!=null)return Yr(e,t,n)}function Yr(e,t,n){const r=`${e}`.toLowerCase();if(!n.includes(r))throw new Error(`invalid ${t}: ${e}`);return r}function vr(e){return e==null||e instanceof Array||e instanceof Of?e:Array.from(e)}function _e(e,t,n=Array){return e==null?e:e instanceof n?e.map(t):n.from(e,t)}function Sp(e,t=Array){return e instanceof t?e.slice():t.from(e)}function ZL({x:e,x1:t,x2:n}){return e!==void 0||t!==void 0||n!==void 0}function JL({y:e,y1:t,y2:n}){return e!==void 0||t!==void 0||n!==void 0}function wv(e){return ZL(e)||JL(e)||e.interval!==void 0}function _i(e){return(e==null?void 0:e.toString)===Mrt}function ic(e){return _i(e)&&(e.type!==void 0||e.domain!==void 0)}function ds(e){return _i(e)&&typeof e.transform!="function"}function ja(e){return ds(e)&&e.value===void 0&&e.channel===void 0}function tC(e,t,n,r=gt){return t===void 0&&n===void 0?(t=0,n=e===void 0?r:e):t===void 0?t=e===void 0?0:e:n===void 0&&(n=e===void 0?0:e),[t,n]}function Ki(e,t){return e===void 0&&t===void 0?[gy,_p]:[e,t]}function ll({z:e,fill:t,stroke:n}={}){return e===void 0&&([e]=br(t)),e===void 0&&([e]=br(n)),e}function Yo(e){const t=e.length,n=new Uint32Array(t);for(let r=0;r<t;++r)n[r]=r;return n}function _v(e,t){return _e(t,n=>e[n],e.constructor)}function q3(e){return e.length===1?(t,n)=>e(_v(n,t)):e}function sc(e,t,n){return e.subarray?e.subarray(t,n):e.slice(t,n)}function Vl(e){return e!==null&&typeof e=="object"?e.valueOf():e}function eC(e,t){if(t[e]!==void 0)return t[e];switch(e){case"x1":case"x2":e="x";break;case"y1":case"y2":e="y";break}return t[e]}function kr(e){let t;return[{transform:()=>t,label:qo(e)},n=>t=n]}function er(e){return e==null?[e]:kr(e)}function qo(e,t){return typeof e=="string"?e:e&&e.label!==void 0?e.label:t}function I1(e,t){return{transform(n){const r=e.transform(n),i=t.transform(n);return Kn(r)||Kn(i)?_e(r,(s,o)=>new Date((+r[o]+ +i[o])/2)):_e(r,(s,o)=>(+r[o]+ +i[o])/2,Float64Array)},label:e.label}}function E1(e,t){const n=nC(t==null?void 0:t.interval,t==null?void 0:t.type);return n?_e(e,n):e}function nC(e,t){const n=W3(e,t);return n&&(r=>Gn(r)?n.floor(r):r)}function W3(e,t){if(e!=null){if(typeof e=="number"){0<e&&e<1&&Number.isInteger(1/e)&&(e=-1/e);const n=Math.abs(e);return e<0?{floor:r=>Math.floor(r*n)/n,offset:r=>(r*n+1)/n,range:(r,i)=>Nr(Math.ceil(r*n),i*n).map(s=>s/n)}:{floor:r=>Math.floor(r/n)*n,offset:r=>r+n,range:(r,i)=>Nr(Math.ceil(r/n),i/n).map(s=>s*n)}}if(typeof e=="string")return(t==="time"?HL:z3)(e);if(typeof e.floor!="function")throw new Error("invalid interval; missing floor method");if(typeof e.offset!="function")throw new Error("invalid interval; missing offset method");return e}}function od(e,t){if(e=W3(e,t),e&&typeof e.range!="function")throw new Error("invalid interval: missing range method");return e}function Frt(e,t){if(e=od(e,t),e&&typeof e.ceil!="function")throw new Error("invalid interval: missing ceil method");return e}function Brt(e){return Du(e)&&typeof(e==null?void 0:e.floor)=="function"&&e.floor()instanceof Date}function Du(e){return typeof(e==null?void 0:e.range)=="function"}function by(e){return e===void 0||ds(e)?e:{value:e}}function Rrt(e){return e==null?null:{transform:t=>Ut(t,e,Float64Array),label:qo(e)}}function Lrt(e){if(!Wo(e))return!1;for(const t of e)if(t!=null)return typeof t=="object"&&"0"in t&&"1"in t}function Wo(e){return e&&typeof e[Symbol.iterator]=="function"}function rC(e){for(const t of e)if(t!=null)return typeof t!="object"||t instanceof Date}function je(e){for(const t of e){if(t==null)continue;const n=typeof t;return n==="string"||n==="boolean"}}function Kn(e){for(const t of e)if(t!=null)return t instanceof Date}function Crt(e){for(const t of e)if(t!=null)return typeof t=="string"&&isNaN(t)&&CO(t)}function Urt(e){for(const t of e)if(t!=null){if(typeof t!="string")return!1;if(t.trim())return!isNaN(t)}}function ku(e){for(const t of e)if(t!=null)return typeof t=="number"}function h_(e,t){let n;for(const r of e)if(r!=null){if(!t(r))return!1;n=!0}return n}const Prt=new Set("none,currentcolor,transparent,aliceblue,antiquewhite,aqua,aquamarine,azure,beige,bisque,black,blanchedalmond,blue,blueviolet,brown,burlywood,cadetblue,chartreuse,chocolate,coral,cornflowerblue,cornsilk,crimson,cyan,darkblue,darkcyan,darkgoldenrod,darkgray,darkgreen,darkgrey,darkkhaki,darkmagenta,darkolivegreen,darkorange,darkorchid,darkred,darksalmon,darkseagreen,darkslateblue,darkslategray,darkslategrey,darkturquoise,darkviolet,deeppink,deepskyblue,dimgray,dimgrey,dodgerblue,firebrick,floralwhite,forestgreen,fuchsia,gainsboro,ghostwhite,gold,goldenrod,gray,green,greenyellow,grey,honeydew,hotpink,indianred,indigo,ivory,khaki,lavender,lavenderblush,lawngreen,lemonchiffon,lightblue,lightcoral,lightcyan,lightgoldenrodyellow,lightgray,lightgreen,lightgrey,lightpink,lightsalmon,lightseagreen,lightskyblue,lightslategray,lightslategrey,lightsteelblue,lightyellow,lime,limegreen,linen,magenta,maroon,mediumaquamarine,mediumblue,mediumorchid,mediumpurple,mediumseagreen,mediumslateblue,mediumspringgreen,mediumturquoise,mediumvioletred,midnightblue,mintcream,mistyrose,moccasin,navajowhite,navy,oldlace,olive,olivedrab,orange,orangered,orchid,palegoldenrod,palegreen,paleturquoise,palevioletred,papayawhip,peachpuff,peru,pink,plum,powderblue,purple,rebeccapurple,red,rosybrown,royalblue,saddlebrown,salmon,sandybrown,seagreen,seashell,sienna,silver,skyblue,slateblue,slategray,slategrey,snow,springgreen,steelblue,tan,teal,thistle,tomato,turquoise,violet,wheat,white,whitesmoke,yellow".split(","));function vy(e){return typeof e!="string"?!1:(e=e.toLowerCase().trim(),/^#[0-9a-f]{3,8}$/.test(e)||/^(?:url|var|rgb|rgba|hsl|hsla|hwb|lab|lch|oklab|oklch|color|color-mix)\(.*\)$/.test(e)||Prt.has(e))}function zrt(e){return typeof e=="number"&&(0<=e&&e<=1||isNaN(e))}function We(e){return e==null||Ff(e)}function Ff(e){return/^\s*none\s*$/i.test(e)}function jrt(e){return/^\s*round\s*$/i.test(e)}function iC(e,t){return KL(e,t,["middle","top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"])}function wy(e="middle"){return iC(e,"frameAnchor")}function Bf(e){if(e==null)return;const t=e[0],n=e[e.length-1];return gc(t,n)}function Vrt(e={},...t){let n=e;for(const r of t)for(const i in r)if(n[i]===void 0){const s=r[i];n===e?n={...n,[i]:s}:n[i]=s}return n}function Yrt(e){console.warn("named iterables are deprecated; please use an object instead");const t=new Set;return Object.fromEntries(Array.from(e,n=>{const{name:r}=n;if(r==null)throw new Error("missing name");const i=`${r}`;if(i==="__proto__")throw new Error(`illegal name: ${i}`);if(t.has(i))throw new Error(`duplicate name: ${i}`);return t.add(i),[r,n]}))}function H3(e){return Wo(e)?Yrt(e):e}const As=Symbol("position"),Ho=Symbol("color"),_y=Symbol("radius"),Sy=Symbol("length"),xy=Symbol("opacity"),Sv=Symbol("symbol"),sC=Symbol("projection"),Le=new Map([["x",As],["y",As],["fx",As],["fy",As],["r",_y],["color",Ho],["opacity",xy],["symbol",Sv],["length",Sy],["projection",sC]]);function qrt(e){return e===As||e===sC}function Wrt(e){return e===As||e===_y||e===Sy||e===xy}const oC=Math.sqrt(3),aC=2/oC,Hrt={draw(e,t){const n=Math.sqrt(t/Math.PI),r=n*aC,i=r/2;e.moveTo(0,r),e.lineTo(n,i),e.lineTo(n,-i),e.lineTo(0,-r),e.lineTo(-n,-i),e.lineTo(-n,i),e.closePath()}},G3=new Map([["asterisk",vL],["circle",wp],["cross",wL],["diamond",SL],["diamond2",xL],["hexagon",Hrt],["plus",IL],["square",EL],["square2",TL],["star",ML],["times",kL],["triangle",$L],["triangle2",NL],["wye",DL]]);function X3(e){return e&&typeof e.draw=="function"}function Grt(e){return X3(e)?!0:typeof e!="string"?!1:G3.has(e.toLowerCase())}function Q3(e){if(e==null||X3(e))return e;const t=G3.get(`${e}`.toLowerCase());if(t)return t;throw new Error(`invalid symbol: ${e}`)}function Xrt(e){if(e==null||X3(e))return[void 0,e];if(typeof e=="string"){const t=G3.get(`${e}`.toLowerCase());if(t)return[void 0,t]}return[e,void 0]}function Ys({filter:e,sort:t,reverse:n,transform:r,initializer:i,...s}={},o){if(r===void 0&&(e!=null&&(r=K3(e)),t!=null&&!ja(t)&&(r=p_(r,J3(t))),n&&(r=p_(r,Z3))),o!=null&&i!=null)throw new Error("transforms cannot be applied after initializers");return{...s,...(t===null||ja(t))&&{sort:t},transform:p_(r,o)}}function wr({filter:e,sort:t,reverse:n,initializer:r,...i}={},s){return r===void 0&&(e!=null&&(r=K3(e)),t!=null&&!ja(t)&&(r=y_(r,J3(t))),n&&(r=y_(r,Z3))),{...i,...(t===null||ja(t))&&{sort:t},initializer:y_(r,s)}}function p_(e,t){return e==null?t===null?void 0:t:t==null?e===null?void 0:e:function(n,r,i){return{data:n,facets:r}=e.call(this,n,r,i),t.call(this,vr(n),r,i)}}function y_(e,t){return e==null?t===null?void 0:t:t==null?e===null?void 0:e:function(n,r,i,...s){let o,a,l,c,u,f;return{data:a=n,facets:l=r,channels:o}=e.call(this,n,r,i,...s),{data:u=a,facets:f=l,channels:c}=t.call(this,a,l,{...i,...o},...s),{data:u,facets:f,channels:{...o,...c}}}}function xv(e,t){return(e.initializer!=null?wr:Ys)(e,t)}function Qrt(e,t){return xv(t,K3(e))}function K3(e){return(t,n)=>{const r=Ut(t,e);return{data:t,facets:n.map(i=>i.filter(s=>r[s]))}}}function Krt({sort:e,...t}={}){return{...xv(t,Z3),sort:ja(e)?e:null}}function Z3(e,t){return{data:e,facets:t.map(n=>n.slice().reverse())}}function Zrt({seed:e,sort:t,...n}={}){return{...xv(n,cC(e==null?Math.random:M3(e))),sort:ja(t)?t:null}}function lC(e,{sort:t,...n}={}){return{...(ds(e)&&e.channel!==void 0?wr:xv)(n,J3(e)),sort:ja(t)?t:null}}function J3(e){return(typeof e=="function"&&e.length!==1?Jrt:cC)(e)}function Jrt(e){return(t,n)=>{const r=(i,s)=>e(t[i],t[s]);return{data:t,facets:n.map(i=>i.slice().sort(r))}}}function cC(e){let t,n;({channel:t,value:e,order:n}={...by(e)});const r=t==null?void 0:t.startsWith("-");if(r&&(t=t.slice(1)),n===void 0&&(n=r?S1:bi),typeof n!="function")switch(`${n}`.toLowerCase()){case"ascending":n=bi;break;case"descending":n=S1;break;default:throw new Error(`invalid order: ${n}`)}return(i,s,o)=>{let a;if(t===void 0)a=Ut(i,e);else{if(o===void 0)throw new Error("channel sort requires an initializer");if(a=o[t],!a)return{};a=a.value}const l=(c,u)=>n(a[c],a[u]);return{data:i,facets:s.map(c=>c.slice().sort(l))}}}function tE(e,t){return Iv(null,null,e,t)}function xp(e={y:"count"},t={}){const{x:n=gt}=t;if(n==null)throw new Error("missing channel: x");return Iv(n,null,e,t)}function Ip(e={x:"count"},t={}){const{y:n=gt}=t;if(n==null)throw new Error("missing channel: y");return Iv(null,n,e,t)}function eE(e={fill:"count"},t={}){let{x:n,y:r}=t;if([n,r]=Ki(n,r),n==null)throw new Error("missing channel: x");if(r==null)throw new Error("missing channel: y");return Iv(n,r,e,t)}function Iv(e,t,{data:n=oE,filter:r,sort:i,reverse:s,...o}={},a={}){o=nE(o,a),n=Ev(n,gt),i=i==null?void 0:rE("sort",i,a),r=r==null?void 0:iE("filter",r,a);const[l,c]=er(e),[u,f]=er(t),{z:d,fill:h,stroke:p,x1:g,x2:v,y1:y,y2:m,...b}=a,[w,S]=er(d),[_]=br(h),[x]=br(p),[T,N]=er(_),[I,A]=er(x);return{..."z"in a&&{z:w||d},..."fill"in a&&{fill:T||h},..."stroke"in a&&{stroke:I||p},...Ys(b,(k,R,E)=>{const M=E1(Ut(k,e),E==null?void 0:E.x),$=E1(Ut(k,t),E==null?void 0:E.y),B=Ut(k,d),O=Ut(k,_),C=Ut(k,x),F=sE(o,{z:B,fill:O,stroke:C}),P=[],z=[],H=M&&c([]),X=$&&f([]),tt=B&&S([]),Z=O&&N([]),Y=C&&A([]);let Q=0;for(const V of o)V.initialize(k);i&&i.initialize(k),r&&r.initialize(k);for(const V of R){const J=[];for(const et of o)et.scope("facet",V);i&&i.scope("facet",V),r&&r.scope("facet",V);for(const[et,j]of Ku(V,F))for(const[At,ot]of Ku(j,$))for(const[Vt,Ht]of Ku(ot,M))if(!(r&&!r.reduce(Ht))){J.push(Q++),z.push(n.reduceIndex(Ht,k)),M&&H.push(Vt),$&&X.push(At),B&&tt.push(F===B?et:B[Ht[0]]),O&&Z.push(F===O?et:O[Ht[0]]),C&&Y.push(F===C?et:C[Ht[0]]);for(const st of o)st.reduce(Ht);i&&i.reduce(Ht)}P.push(J)}return uC(P,i,s),{data:z,facets:P}}),...!ba(o,"x")&&(l?{x:l}:{x1:g,x2:v}),...!ba(o,"y")&&(u?{y:u}:{y1:y,y2:m}),...Object.fromEntries(o.map(({name:k,output:R})=>[k,R]))}}function ba(e,...t){for(const{name:n}of e)if(t.includes(n))return!0;return!1}function nE(e,t,n=rE){const r=Object.entries(e);return t.title!=null&&e.title===void 0&&r.push(["title",iit]),t.href!=null&&e.href===void 0&&r.push(["href",aE]),r.filter(([,i])=>i!==void 0).map(([i,s])=>s===null?tit(i):n(i,s,t))}function rE(e,t,n,r=iE){let i;_i(t)&&"reduce"in t&&(i=t.scale,t=t.reduce);const s=r(e,t,n),[o,a]=kr(s.label);let l;return{name:e,output:i===void 0?o:{value:o,scale:i},initialize(c){s.initialize(c),l=a([])},scope(c,u){s.scope(c,u)},reduce(c,u){l.push(s.reduce(c,u))}}}function tit(e){return{name:e,initialize(){},scope(){},reduce(){}}}function iE(e,t,n,r=Ev){const i=eC(e,n),s=r(t,i);let o,a;return{label:qo(s===T1?null:i,s.label),initialize(l){o=i===void 0?l:Ut(l,i),s.scope==="data"&&(a=s.reduceIndex(Yo(l),o))},scope(l,c){s.scope===l&&(a=s.reduceIndex(c,o))},reduce(l,c){return s.scope==null?s.reduceIndex(l,o,c):s.reduceIndex(l,o,a,c)}}}function Ku(e,t){return t?lp(Vo(e,n=>t[n]),gy):[[,e]]}function Ev(e,t,n=eit){if(e==null)return n(e);if(typeof e.reduceIndex=="function")return e;if(typeof e.reduce=="function"&&_i(e))return nit(e);if(typeof e=="function")return rit(e);if(/^p\d{2}$/i.test(e))return no(V3(e));switch(`${e}`.toLowerCase()){case"first":return aE;case"last":return sit;case"identity":return oE;case"count":return T1;case"distinct":return oit;case"sum":return t==null?T1:ait;case"proportion":return T$(t,"data");case"proportion-facet":return T$(t,"facet");case"deviation":return no(ey);case"min":return no(bn);case"min-index":return no(AG);case"max":return no($e);case"max-index":return no(TG);case"mean":return E$(Hb);case"median":return E$(fp);case"variance":return no(i3);case"mode":return no(tF)}return n(e)}function eit(e){throw new Error(`invalid reduce: ${e}`)}function sE(e,t){for(const n in t){const r=t[n];if(r!==void 0&&!e.some(i=>i.name===n))return r}}function uC(e,t,n){if(t){const r=t.output.transform(),i=(s,o)=>bi(r[s],r[o]);e.forEach(s=>s.sort(i))}n&&e.forEach(r=>r.reverse())}function nit(e){return console.warn("deprecated reduce interface; implement reduceIndex instead."),{...e,reduceIndex:e.reduce.bind(e)}}function rit(e){return{reduceIndex(t,n,r){return e(_v(n,t),r)}}}function no(e){return{reduceIndex(t,n){return e(t,r=>n[r])}}}function E$(e){return{reduceIndex(t,n){const r=e(t,i=>n[i]);return Kn(n)?new Date(r):r}}}const oE={reduceIndex(e,t){return _v(t,e)}},aE={reduceIndex(e,t){return t[e[0]]}},iit={reduceIndex(e,t){const r=lp(Hu(e,s=>s.length,s=>t[s]),_p),i=r.slice(-5).reverse();if(i.length<r.length){const s=r.slice(0,-4);i[4]=[` ${s.length.toLocaleString("en-US")} more`,Ls(s,_p)]}return i.map(([s,o])=>`${s} (${o.toLocaleString("en-US")})`).join(`
`)}},sit={reduceIndex(e,t){return t[e[e.length-1]]}},T1={label:"Frequency",reduceIndex(e){return e.length}},oit={label:"Distinct",reduceIndex(e,t){const n=new ny;for(const r of e)n.add(t[r]);return n.size}},ait=no(Ls);function T$(e,t){return e==null?{scope:t,label:"Frequency",reduceIndex:(n,r,i=1)=>n.length/i}:{scope:t,reduceIndex:(n,r,i=1)=>Ls(n,s=>r[s])/i}}function Ep(e,{scale:t,type:n,value:r,filter:i,hint:s,label:o=qo(r)},a){return s===void 0&&typeof(r==null?void 0:r.transform)=="function"&&(s=r.hint),dC(a,{scale:t,type:n,value:Ut(e,r),label:o,filter:i,hint:s})}function fC(e,t){return Object.fromEntries(Object.entries(e).map(([n,r])=>[n,Ep(t,r,n)]))}function lE(e,t){const n=Object.fromEntries(Object.entries(e).map(([r,{scale:i,value:s}])=>{const o=i==null?null:t[i];return[r,o==null?s:_e(s,o)]}));return n.channels=e,n}function dC(e,t){const{scale:n,value:r}=t;if(n===!0||n==="auto")switch(e){case"fill":case"stroke":case"color":t.scale=n!==!0&&h_(r,vy)?null:"color";break;case"fillOpacity":case"strokeOpacity":case"opacity":t.scale=n!==!0&&h_(r,zrt)?null:"opacity";break;case"symbol":n!==!0&&h_(r,Grt)?(t.scale=null,t.value=_e(r,Q3)):t.scale="symbol";break;default:t.scale=Le.has(e)?e:null;break}else if(n===!1)t.scale=null;else if(n!=null&&!Le.has(n))throw new Error(`unknown scale: ${n}`);return t}function lit(e,t,n,r,i){const{order:s,reverse:o,reduce:a=!0,limit:l}=i;for(const c in i){if(!Le.has(c))continue;let{value:u,order:f=s,reverse:d=o,reduce:h=a,limit:p=l}=by(i[c]);const g=u==null?void 0:u.startsWith("-");if(g&&(u=u.slice(1)),f=f===void 0?g!==(u==="width"||u==="height")?pC:hC:fit(f),h==null||h===!1)continue;const v=c==="fx"||c==="fy"?uit(t,r[c]):cit(n,c);if(!v)throw new Error(`missing channel for scale: ${c}`);const y=v.value,[m=0,b=1/0]=Wo(p)?p:p<0?[p]:[0,p];if(u==null)v.domain=()=>{let w=Array.from(new ny(y));return d&&(w=w.reverse()),(m!==0||b!==1/0)&&(w=w.slice(m,b)),w};else{const w=u==="data"?e:u==="height"?A$(n,"y1","y2"):u==="width"?A$(n,"x1","x2"):HS(n,u,u==="y"?"y2":u==="x"?"x2":void 0),S=Ev(h===!0?"max":h,w);v.domain=()=>{let _=_G(Yo(y),x=>S.reduceIndex(x,w),x=>y[x]);return f&&_.sort(f),d&&_.reverse(),(m!==0||b!==1/0)&&(_=_.slice(m,b)),_.map(gy)}}}}function cit(e,t){for(const n in e){const r=e[n];if(r.scale===t)return r}}function uit(e,t){const n=e.original;if(n===e)return t;const r=t.value,i=t.value=[];for(let s=0;s<n.length;++s){const o=r[n[s][0]];for(const a of e[s])i[a]=o}return t}function A$(e,t,n){const r=HS(e,t),i=HS(e,n);return _e(i,(s,o)=>Math.abs(s-r[o]),Float64Array)}function HS(e,t,n){let r=e[t];if(!r&&n!==void 0&&(r=e[n]),r)return r.value;throw new Error(`missing channel: ${t}`)}function fit(e){if(e==null||typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"ascending":return hC;case"descending":return pC}throw new Error(`invalid order: ${e}`)}function hC([e,t],[n,r]){return bi(t,r)||bi(e,n)}function pC([e,t],[n,r]){return S1(t,r)||bi(e,n)}function GS(e,t){let n=e[t];if(n){for(;n.source;)n=n.source;return n.source===null?null:n}}function cE(e){let t,n;return(...r)=>(((n==null?void 0:n.length)!==r.length||n.some((i,s)=>i!==r[s]))&&(n=r,t=e(...r)),t)}const dit=cE(e=>new Intl.NumberFormat(e)),hit=cE((e,t)=>new Intl.DateTimeFormat(e,{timeZone:"UTC",...t&&{month:t}})),pit=cE((e,t)=>new Intl.DateTimeFormat(e,{timeZone:"UTC",...t&&{weekday:t}}));function yit(e="en-US"){const t=dit(e);return n=>n!=null&&!isNaN(n)?t.format(n):void 0}function mit(e="en-US",t="short"){const n=hit(e,t);return r=>r!=null&&!isNaN(r=+new Date(Date.UTC(2e3,+r)))?n.format(r):void 0}function git(e="en-US",t="short"){const n=pit(e,t);return r=>r!=null&&!isNaN(r=+new Date(Date.UTC(2001,0,+r)))?n.format(r):void 0}function yC(e){return LO(e,"Invalid Date")}function bit(e="en-US"){const t=yit(e);return n=>(n instanceof Date?yC:typeof n=="number"?t:Fn)(n)}const Tc=bit();let XS=0,QS;function vit(){const e=XS;return XS=0,QS=void 0,e}function Mo(e){e!==QS&&(QS=e,console.warn(e),++XS)}const xn=(typeof window<"u"?window.devicePixelRatio>1:typeof it>"u")?0:.5;let wit=0;function M$(){return`plot-clip-${++wit}`}function mC(e,{title:t,href:n,ariaLabel:r,ariaDescription:i,ariaHidden:s,target:o,fill:a,fillOpacity:l,stroke:c,strokeWidth:u,strokeOpacity:f,strokeLinejoin:d,strokeLinecap:h,strokeMiterlimit:p,strokeDasharray:g,strokeDashoffset:v,opacity:y,mixBlendMode:m,imageFilter:b,paintOrder:w,pointerEvents:S,shapeRendering:_,channels:x},{ariaLabel:T,fill:N="currentColor",fillOpacity:I,stroke:A="none",strokeOpacity:k,strokeWidth:R,strokeLinecap:E,strokeLinejoin:M,strokeMiterlimit:$,paintOrder:B}){N===null&&(a=null,l=null),A===null&&(c=null,f=null),We(N)?!We(A)&&(!We(a)||x!=null&&x.fill)&&(A="none"):We(A)&&(!We(c)||x!=null&&x.stroke)&&(N="none");const[O,C]=br(a,N),[F,P]=Ke(l,I),[z,H]=br(c,A),[X,tt]=Ke(f,k),[Z,Y]=Ke(y);Ff(H)||(u===void 0&&(u=R),h===void 0&&(h=E),d===void 0&&(d=M),p===void 0&&!jrt(d)&&(p=$),!Ff(C)&&w===void 0&&(w=B));const[Q,V]=Ke(u);return N!==null&&(e.fill=Ve(C,"currentColor"),e.fillOpacity=Cd(P,1)),A!==null&&(e.stroke=Ve(H,"none"),e.strokeWidth=Cd(V,1),e.strokeOpacity=Cd(tt,1),e.strokeLinejoin=Ve(d,"miter"),e.strokeLinecap=Ve(h,"butt"),e.strokeMiterlimit=Cd(p,4),e.strokeDasharray=Ve(g,"none"),e.strokeDashoffset=Ve(v,"0")),e.target=Fn(o),e.ariaLabel=Fn(T),e.ariaDescription=Fn(i),e.ariaHidden=Fn(s),e.opacity=Cd(Y,1),e.mixBlendMode=Ve(m,"normal"),e.imageFilter=Ve(b,"none"),e.paintOrder=Ve(w,"normal"),e.pointerEvents=Ve(S,"auto"),e.shapeRendering=Ve(_,"auto"),{title:{value:t,optional:!0,filter:null},href:{value:n,optional:!0,filter:null},ariaLabel:{value:r,optional:!0,filter:null},fill:{value:O,scale:"auto",optional:!0},fillOpacity:{value:F,scale:"auto",optional:!0},stroke:{value:z,scale:"auto",optional:!0},strokeOpacity:{value:X,scale:"auto",optional:!0},strokeWidth:{value:Q,optional:!0},opacity:{value:Z,scale:"auto",optional:!0}}}function _it(e,t){t&&e.filter(n=>U3(t[n])).append("title").call(xit,t)}function Sit(e,t){t&&e.filter(([n])=>U3(t[n])).append("title").call(Iit,t)}function xit(e,t){t&&e.text(n=>Tc(t[n]))}function Iit(e,t){t&&e.text(([n])=>Tc(t[n]))}function fn(e,{target:t,tip:n},{ariaLabel:r,title:i,fill:s,fillOpacity:o,stroke:a,strokeOpacity:l,strokeWidth:c,opacity:u,href:f}){r&&ut(e,"aria-label",d=>r[d]),s&&ut(e,"fill",d=>s[d]),o&&ut(e,"fill-opacity",d=>o[d]),a&&ut(e,"stroke",d=>a[d]),l&&ut(e,"stroke-opacity",d=>l[d]),c&&ut(e,"stroke-width",d=>c[d]),u&&ut(e,"opacity",d=>u[d]),f&&vC(e,d=>f[d],t),n||_it(e,i)}function A1(e,{target:t,tip:n},{ariaLabel:r,title:i,fill:s,fillOpacity:o,stroke:a,strokeOpacity:l,strokeWidth:c,opacity:u,href:f}){r&&ut(e,"aria-label",([d])=>r[d]),s&&ut(e,"fill",([d])=>s[d]),o&&ut(e,"fill-opacity",([d])=>o[d]),a&&ut(e,"stroke",([d])=>a[d]),l&&ut(e,"stroke-opacity",([d])=>l[d]),c&&ut(e,"stroke-width",([d])=>c[d]),u&&ut(e,"opacity",([d])=>u[d]),f&&vC(e,([d])=>f[d],t),n||Sit(e,i)}function Eit({ariaLabel:e,title:t,fill:n,fillOpacity:r,stroke:i,strokeOpacity:s,strokeWidth:o,opacity:a,href:l},{tip:c}){return[e,c?void 0:t,n,r,i,s,o,a,l].filter(u=>u!==void 0)}function uE(e,t,n){const r=Vo(e,i=>t[i]);return n===void 0&&r.size>1+e.length>>1&&Mo("Warning: the implicit z channel has high cardinality. This may occur when the fill or stroke channel is associated with quantitative data rather than ordinal or categorical data. You can suppress this warning by setting the z option explicitly; if this data represents a single series, set z to null."),r.values()}function*gC(e,t,n,r){const{z:i}=n,{z:s}=r,o=Eit(r,n),a=[...t,...o];for(const l of s?uE(e,s,i):[e]){let c,u;t:for(const f of l){for(const d of a)if(!Gn(d[f])){u&&u.push(-1);continue t}if(c===void 0){u&&(yield u),c=o.map(d=>Vl(d[f])),u=[f];continue}u.push(f);for(let d=0;d<o.length;++d)if(Vl(o[d][f])!==c[d]){yield u,c=o.map(p=>Vl(p[f])),u=[f];continue t}}u&&(yield u)}}function bC(e){return e===!0?e="frame":e===!1?e=null:e!=null&&(e=Yr(e,"clip",["frame","sphere"])),e}function Tit(e,t,n,r){let i;const{clip:s=r.clip}=t;switch(s){case"frame":{const{width:o,height:a,marginLeft:l,marginRight:c,marginTop:u,marginBottom:f}=n,d=M$();i=`url(#${d})`,e=ee("svg:g",r).call(h=>h.append("svg:clipPath").attr("id",d).append("rect").attr("x",l).attr("y",u).attr("width",o-c-l).attr("height",a-u-f)).each(function(){this.appendChild(e.node()),e.node=()=>this});break}case"sphere":{const{projection:o}=r;if(!o)throw new Error('the "sphere" clip option requires a projection');const a=M$();i=`url(#${a})`,e.append("clipPath").attr("id",a).append("path").attr("d",ol(o)({type:"Sphere"}));break}}ut(e,"aria-label",t.ariaLabel),ut(e,"aria-description",t.ariaDescription),ut(e,"aria-hidden",t.ariaHidden),ut(e,"clip-path",i)}function Ne(e,t,n,r){Tit(e,t,n,r),ut(e,"fill",t.fill),ut(e,"fill-opacity",t.fillOpacity),ut(e,"stroke",t.stroke),ut(e,"stroke-width",t.strokeWidth),ut(e,"stroke-opacity",t.strokeOpacity),ut(e,"stroke-linejoin",t.strokeLinejoin),ut(e,"stroke-linecap",t.strokeLinecap),ut(e,"stroke-miterlimit",t.strokeMiterlimit),ut(e,"stroke-dasharray",t.strokeDasharray),ut(e,"stroke-dashoffset",t.strokeDashoffset),ut(e,"shape-rendering",t.shapeRendering),ut(e,"filter",t.imageFilter),ut(e,"paint-order",t.paintOrder);const{pointerEvents:i=r.pointerSticky===!1?"none":void 0}=t;ut(e,"pointer-events",i)}function Ee(e,t){Ait(e,"mix-blend-mode",t.mixBlendMode),ut(e,"opacity",t.opacity)}function vC(e,t,n){e.each(function(r){const i=t(r);if(i!=null){const s=this.ownerDocument.createElementNS(vc.svg,"a");s.setAttribute("fill","inherit"),s.setAttributeNS(vc.xlink,"href",i),n!=null&&s.setAttribute("target",n),this.parentNode.insertBefore(s,this).appendChild(this)}})}function ut(e,t,n){n!=null&&e.attr(t,n)}function Ait(e,t,n){n!=null&&e.style(t,n)}function be(e,t,{x:n,y:r},i=xn,s=xn){i+=t.dx,s+=t.dy,n!=null&&n.bandwidth&&(i+=n.bandwidth()/2),r!=null&&r.bandwidth&&(s+=r.bandwidth()/2),(i||s)&&e.attr("transform",`translate(${i},${s})`)}function Ve(e,t){if((e=Fn(e))!==t)return e}function Cd(e,t){if((e=jt(e))!==t)return e}const Mit=/^-?([_a-z]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])([_a-z0-9-]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])*$/i;function fE(e){if(e===void 0)return"plot-d6a7b5";if(e=`${e}`,!Mit.test(e))throw new Error(`invalid class name: ${e}`);return e}function dE(e,t){if(typeof t=="string")e.property("style",t);else if(t!=null)for(const n of e)Object.assign(n.style,t)}function qs({frameAnchor:e},{width:t,height:n,marginTop:r,marginRight:i,marginBottom:s,marginLeft:o}){return[/left$/.test(e)?o:/right$/.test(e)?t-i:(o+t-i)/2,/^top/.test(e)?r:/^bottom/.test(e)?n-s:(r+n-s)/2]}function Tv(e={}){const{document:t=typeof window<"u"?window.document:void 0,clip:n}=e;return{document:t,clip:bC(n)}}function ee(e,{document:t}){return ye(Qb(e).call(t.documentElement))}const wC=Math.PI,Xs=2*wC,$$=.618;function $it({projection:e,inset:t=0,insetTop:n=t,insetRight:r=t,insetBottom:i=t,insetLeft:s=t}={},o){if(e==null)return;if(typeof e.stream=="function")return e;let a,l,c="frame";if(_i(e)){let S;if({type:e,domain:l,inset:S,insetTop:n=S!==void 0?S:n,insetRight:r=S!==void 0?S:r,insetBottom:i=S!==void 0?S:i,insetLeft:s=S!==void 0?S:s,clip:c=c,...a}=e,e==null)return}typeof e!="function"&&({type:e}=_C(e));const{width:u,height:f,marginLeft:d,marginRight:h,marginTop:p,marginBottom:g}=o,v=u-d-h-s-r,y=f-p-g-n-i;if(e=e==null?void 0:e({width:v,height:y,clip:c,...a}),e==null)return;c=Nit(c,d,p,u-h,f-g);let m=d+s,b=p+n,w;if(l!=null){const[[S,_],[x,T]]=ol(e).bounds(l),N=Math.min(v/(x-S),y/(T-_));N>0?(m-=(N*(S+x)-v)/2,b-=(N*(_+T)-y)/2,w=c1({point(I,A){this.stream.point(I*N+m,A*N+b)}})):Mo("Warning: the projection could not be fit to the specified domain; using the default scale.")}return w??(w=m===0&&b===0?SC():c1({point(S,_){this.stream.point(S+m,_+b)}})),{stream:S=>e.stream(w.stream(c(S)))}}function _C(e){switch(`${e}`.toLowerCase()){case"albers-usa":return Ii(utt,.7463,.4673);case"albers":return A0(pB,.7463,.4673);case"azimuthal-equal-area":return Ii(ftt,4,4);case"azimuthal-equidistant":return Ii(dtt,Xs,Xs);case"conic-conformal":return A0(ytt,Xs,Xs);case"conic-equal-area":return A0(u1,6.1702,2.9781);case"conic-equidistant":return A0(btt,7.312,3.6282);case"equal-earth":return Ii(wtt,5.4133,2.6347);case"equirectangular":return Ii(mtt,Xs,wC);case"gnomonic":return Ii(_tt,3.4641,3.4641);case"identity":return{type:SC};case"reflect-y":return{type:Dit};case"mercator":return Ii(htt,Xs,Xs);case"orthographic":return Ii(Stt,2,2);case"stereographic":return Ii(xtt,2,2);case"transverse-mercator":return Ii(Itt,Xs,Xs);default:throw new Error(`unknown projection type: ${e}`)}}function Nit(e,t,n,r,i){if(e===!1||e==null||typeof e=="number")return s=>s;switch(e===!0&&(e="frame"),`${e}`.toLowerCase()){case"frame":return ZF(t,n,r,i);default:throw new Error(`unknown projection clip type: ${e}`)}}function Ii(e,t,n){return{type:({width:r,height:i,rotate:s,precision:o=.15,clip:a})=>{var c,u,f;const l=e();return o!=null&&((c=l.precision)==null||c.call(l,o)),s!=null&&((u=l.rotate)==null||u.call(l,s)),typeof a=="number"&&((f=l.clipAngle)==null||f.call(l,a)),l.scale(Math.min(r/t,i/n)),l.translate([r/2,i/2]),l},aspectRatio:n/t}}function A0(e,t,n){const{type:r,aspectRatio:i}=Ii(e,t,n);return{type:s=>{const{parallels:o,domain:a,width:l,height:c}=s,u=r(s);return o!=null&&(u.parallels(o),a===void 0&&u.fitSize([l,c],{type:"Sphere"})),u},aspectRatio:i}}const SC=Ur({stream:e=>e}),Dit=Ur(c1({point(e,t){this.stream.point(e,-t)}}));function xC(e,t,n,r){const i=n[e],s=n[t],o=i.length,a=n[e]=new Float64Array(o).fill(NaN),l=n[t]=new Float64Array(o).fill(NaN);let c;const u=r.stream({point(f,d){a[c]=f,l[c]=d}});for(c=0;c<o;++c)u.point(i[c],s[c])}function kit({projection:e}={}){return e==null?!1:typeof e.stream=="function"?!0:(_i(e)&&(e=e.type),e!=null)}function Oit(e){if(typeof(e==null?void 0:e.stream)=="function")return $$;if(_i(e)&&(e=e.type),e!=null){if(typeof e!="function"){const{aspectRatio:t}=_C(e);if(t)return t}return $$}}function Av(e,t,{projection:n}){const{x:r,y:i}=e;let s={};return r&&(s.x=r),i&&(s.y=i),s=lE(s,t),n&&(r==null?void 0:r.scale)==="x"&&(i==null?void 0:i.scale)==="y"&&xC("x","y",s,n),r&&(s.x=lr(s.x)),i&&(s.y=lr(s.y)),s}function Fit(e){const t=[],n=[],r={scale:"x",value:t},i={scale:"y",value:n},s={point(o,a){t.push(o),n.push(a)},lineStart(){},lineEnd(){},polygonStart(){},polygonEnd(){},sphere(){}};for(const o of e.value)da(o,s);return[r,i]}const IC=new Map([["accent",Ont],["category10",knt],["dark2",Fnt],["paired",Bnt],["pastel1",Rnt],["pastel2",Lnt],["set1",Cnt],["set2",Unt],["set3",Pnt],["tableau10",znt]]);function Bit(e){return e!=null&&IC.has(`${e}`.toLowerCase())}const N$=new Map([...IC,["brbg",Qs(iR,sR)],["prgn",Qs(oR,aR)],["piyg",Qs(lR,cR)],["puor",Qs(uR,fR)],["rdbu",Qs(YS,y1)],["rdgy",Qs(dR,hR)],["rdylbu",Qs(qS,m1)],["rdylgn",Qs(pR,yR)],["spectral",Qs(mR,gR)],["burd",D$(YS,y1)],["buylrd",D$(qS,m1)],["blues",dn(jR,VR)],["greens",dn(YR,qR)],["greys",dn(WR,HR)],["oranges",dn(ZR,JR)],["purples",dn(GR,XR)],["reds",dn(QR,KR)],["turbo",Ks(oL)],["viridis",Ks(aL)],["magma",Ks(lL)],["inferno",Ks(cL)],["plasma",Ks(uL)],["cividis",Ks(tL)],["cubehelix",Ks(eL)],["warm",Ks(nL)],["cool",Ks(rL)],["bugn",dn(bR,vR)],["bupu",dn(wR,_R)],["gnbu",dn(SR,xR)],["orrd",dn(IR,ER)],["pubu",dn(MR,$R)],["pubugn",dn(TR,AR)],["purd",dn(NR,DR)],["rdpu",dn(kR,OR)],["ylgn",dn(RR,LR)],["ylgnbu",dn(FR,BR)],["ylorbr",dn(CR,UR)],["ylorrd",dn(PR,zR)],["rainbow",k$(iL)],["sinebow",k$(sL)]]);function dn(e,t){return({length:n})=>n===1?[e[3][1]]:n===2?[e[3][1],e[3][2]]:(n=Math.max(3,Math.floor(n)),n>9?Vi(t,n):e[n])}function Qs(e,t){return({length:n})=>n===2?[e[3][0],e[3][2]]:(n=Math.max(3,Math.floor(n)),n>11?Vi(t,n):e[n])}function D$(e,t){return({length:n})=>n===2?[e[3][2],e[3][0]]:(n=Math.max(3,Math.floor(n)),n>11?Vi(r=>t(1-r),n):e[n].slice().reverse())}function Ks(e){return({length:t})=>Vi(e,Math.max(2,Math.floor(t)))}function k$(e){return({length:t})=>Vi(e,Math.floor(t)+1).slice(0,-1)}function EC(e){const t=`${e}`.toLowerCase();if(!N$.has(t))throw new Error(`unknown ordinal scheme: ${t}`);return N$.get(t)}function Mv(e,t){const n=EC(e),r=typeof n=="function"?n({length:t}):n;return r.length!==t?r.slice(0,t):r}function Rit(e,t="greys"){const n=new Set,[r,i]=Mv(t,2);for(const s of e)if(s!=null)if(s===!0)n.add(i);else if(s===!1)n.add(r);else return;return[...n]}const O$=new Map([["brbg",sR],["prgn",aR],["piyg",cR],["puor",fR],["rdbu",y1],["rdgy",hR],["rdylbu",m1],["rdylgn",yR],["spectral",gR],["burd",e=>y1(1-e)],["buylrd",e=>m1(1-e)],["blues",VR],["greens",qR],["greys",HR],["purples",XR],["reds",KR],["oranges",JR],["turbo",oL],["viridis",aL],["magma",lL],["inferno",cL],["plasma",uL],["cividis",tL],["cubehelix",eL],["warm",nL],["cool",rL],["bugn",vR],["bupu",_R],["gnbu",xR],["orrd",ER],["pubugn",AR],["pubu",$R],["purd",DR],["rdpu",OR],["ylgnbu",BR],["ylgn",LR],["ylorbr",UR],["ylorrd",zR],["rainbow",iL],["sinebow",sL]]);function hE(e){const t=`${e}`.toLowerCase();if(!O$.has(t))throw new Error(`unknown quantitative scheme: ${t}`);return O$.get(t)}const Lit=new Set(["brbg","prgn","piyg","puor","rdbu","rdgy","rdylbu","rdylgn","spectral","burd","buylrd"]);function Cit(e){return e!=null&&Lit.has(`${e}`.toLowerCase())}const TC=e=>t=>e(1-t),m_=[0,1],F$=new Map([["number",kn],["rgb",_c],["hsl",sK],["hcl",lK],["lab",oK]]);function AC(e){const t=`${e}`.toLowerCase();if(!F$.has(t))throw new Error(`unknown interpolator: ${t}`);return F$.get(t)}function Iy(e,t,n,{type:r,nice:i,clamp:s,zero:o,domain:a=$C(e,n),unknown:l,round:c,scheme:u,interval:f,range:d=Le.get(e)===_y?Xit(n,a):Le.get(e)===Sy?Qit(n,a):Le.get(e)===xy?m_:void 0,interpolate:h=Le.get(e)===Ho?u==null&&d!==void 0?_c:hE(u!==void 0?u:r==="cyclical"?"rainbow":"turbo"):c?m3:kn,reverse:p}){if(f=od(f,r),(r==="cyclical"||r==="sequential")&&(r="linear"),typeof h!="function"&&(h=AC(h)),p=!!p,d!==void 0){const g=(a=vr(a)).length,v=(d=vr(d)).length;if(g!==v){if(h.length===1)throw new Error("invalid piecewise interpolator");h=Jb(h,d),d=void 0}}if(h.length===1?(p&&(h=TC(h),p=!1),d===void 0&&(d=Float64Array.from(a,(g,v)=>v/(a.length-1)),d.length===2&&(d=m_)),t.interpolate((d===m_?Ur:yE)(h))):t.interpolate(h),o){const[g,v]=yn(a);(g>0||v<0)&&(a=Sp(a),Bf(a)!==Math.sign(g)?a[a.length-1]=0:a[0]=0)}return p&&(a=Bg(a)),t.domain(a).unknown(l),i&&(t.nice(Uit(i,r)),a=t.domain()),d!==void 0&&t.range(d),s&&t.clamp(s),{type:r,domain:a,range:d,scale:t,interpolate:h,interval:f}}function Uit(e,t){return e===!0?void 0:typeof e=="number"?e:Frt(e,t)}function Pit(e,t,n){return Iy(e,av(),t,n)}function zit(e,t,n){return MC(e,t,{...n,exponent:.5})}function MC(e,t,{exponent:n=1,...r}){return Iy(e,LB().exponent(n),t,{...r,type:"pow"})}function jit(e,t,{base:n=10,domain:r=Kit(t),...i}){return Iy(e,OB().base(n),t,{...i,domain:r})}function Vit(e,t,{constant:n=1,...r}){return Iy(e,BB().constant(n),t,r)}function Yit(e,t,{range:n,quantiles:r=n===void 0?5:(n=[...n]).length,n:i=r,scheme:s="rdylbu",domain:o=Zit(t),unknown:a,interpolate:l,reverse:c}){return n===void 0&&(n=l!==void 0?Vi(l,i):Le.get(e)===Ho?Mv(s,i):void 0),o.length>0&&(o=CB(o,n===void 0?{length:i}:n).quantiles()),pE(e,t,{domain:o,range:n,reverse:c,unknown:a})}function qit(e,t,{range:n,n:r=n===void 0?5:(n=[...n]).length,scheme:i="rdylbu",domain:s=$C(e,t),unknown:o,interpolate:a,reverse:l}){const[c,u]=yn(s);let f;return n===void 0?(f=Ca(c,u,r),f[0]<=c&&f.splice(0,1),f[f.length-1]>=u&&f.pop(),r=f.length+1,n=a!==void 0?Vi(a,r):Le.get(e)===Ho?Mv(i,r):void 0):(f=Vi(kn(c,u),r+1).slice(1,-1),c instanceof Date&&(f=f.map(d=>new Date(d)))),Bf(vr(s))<0&&f.reverse(),pE(e,t,{domain:f,range:n,reverse:l,unknown:o})}function pE(e,t,{domain:n=[0],unknown:r,scheme:i="rdylbu",interpolate:s,range:o=s!==void 0?Vi(s,n.length+1):Le.get(e)===Ho?Mv(i,n.length+1):void 0,reverse:a}){n=vr(n);const l=Bf(n);if(!isNaN(l)&&!Wit(n,l))throw new Error(`the ${e} scale has a non-monotonic domain`);return a&&(o=Bg(o)),{type:"threshold",scale:UB(l<0?Bg(n):n,o===void 0?[]:o).unknown(r),domain:n,range:o}}function Wit(e,t){for(let n=1,r=e.length,i=e[0];n<r;++n){const s=gc(i,i=e[n]);if(s!==0&&s!==t)return!1}return!0}function Hit(e){return{type:"identity",scale:Wrt(Le.get(e))?NB():t=>t}}function Tp(e,t=x1){return e.length?[bn(e,({value:n})=>n===void 0?n:bn(n,t)),$e(e,({value:n})=>n===void 0?n:$e(n,t))]:[0,1]}function $C(e,t){const n=Le.get(e);return(n===_y||n===xy||n===Sy?Git:Tp)(t)}function Git(e){return[0,e.length?$e(e,({value:t})=>t===void 0?t:$e(t,x1)):1]}function Xit(e,t){const n=e.find(({radius:o})=>o!==void 0);if(n!==void 0)return[0,n.radius];const r=Ua(e,.5,({value:o})=>o===void 0?NaN:Ua(o,.25,Ao)),i=t.map(o=>3*Math.sqrt(o/r)),s=30/$e(i);return s<1?i.map(o=>o*s):i}function Qit(e,t){const n=fp(e,({value:s})=>s===void 0?NaN:fp(s,Math.abs)),r=t.map(s=>12*s/n),i=60/$e(r);return i<1?r.map(s=>s*i):r}function Kit(e){for(const{value:t}of e)if(t!==void 0)for(let n of t){if(n>0)return Tp(e,Ao);if(n<0)return Tp(e,bv)}return[1,10]}function Zit(e){const t=[];for(const{value:n}of e)if(n!==void 0)for(const r of n)t.push(r);return t}function yE(e){return(t,n)=>r=>e(t+r*(n-t))}function $v(e,t,n,r,{type:i,nice:s,clamp:o,domain:a=Tp(r),unknown:l,pivot:c=0,scheme:u,range:f,symmetric:d=!0,interpolate:h=Le.get(e)===Ho?u==null&&f!==void 0?_c:hE(u!==void 0?u:"rdbu"):kn,reverse:p}){c=+c,a=vr(a);let[g,v]=a;if(a.length>2&&Mo(`Warning: the diverging ${e} scale domain contains extra elements.`),gc(g,v)<0&&([g,v]=[v,g],p=!p),g=Math.min(g,c),v=Math.max(v,c),typeof h!="function"&&(h=AC(h)),f!==void 0&&(h=h.length===1?yE(h)(...f):Jb(h,f)),p&&(h=TC(h)),d){const y=n.apply(c),m=y-n.apply(g),b=n.apply(v)-y;m<b?g=n.invert(y-b):m>b&&(v=n.invert(y+m))}return t.domain([g,c,v]).unknown(l).interpolator(h),o&&t.clamp(o),s&&t.nice(s),{type:i,domain:[g,v],pivot:c,interpolate:h,scale:t}}function Jit(e,t,n){return $v(e,tR(),rst,t,n)}function tst(e,t,n){return NC(e,t,{...n,exponent:.5})}function NC(e,t,{exponent:n=1,...r}){return $v(e,rR().exponent(n=+n),ost(n),t,{...r,type:"diverging-pow"})}function est(e,t,{base:n=10,pivot:r=1,domain:i=Tp(t,r<0?bv:Ao),...s}){return $v(e,eR().base(n=+n),ist,t,{domain:i,pivot:r,...s})}function nst(e,t,{constant:n=1,...r}){return $v(e,nR().constant(n=+n),ast(n),t,r)}const rst={apply(e){return e},invert(e){return e}},ist={apply:Math.log,invert:Math.exp},sst={apply(e){return Math.sign(e)*Math.sqrt(Math.abs(e))},invert(e){return Math.sign(e)*(e*e)}};function ost(e){return e===.5?sst:{apply(t){return Math.sign(t)*Math.pow(Math.abs(t),e)},invert(t){return Math.sign(t)*Math.pow(Math.abs(t),1/e)}}}function ast(e){return{apply(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))},invert(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}}function DC(e,t,n,r){return Iy(e,t,n,r)}function lst(e,t,n){return DC(e,Nnt(),t,n)}function cst(e,t,n){return DC(e,Dnt(),t,n)}const Ey=Symbol("ordinal");function kC(e,t,n,{type:r,interval:i,domain:s,range:o,reverse:a,hint:l}){return i=od(i,r),s===void 0&&(s=FC(n,i,e)),(r==="categorical"||r===Ey)&&(r="ordinal"),a&&(s=Bg(s)),s=t.domain(s).domain(),o!==void 0&&(typeof o=="function"&&(o=o(s)),t.range(o)),{type:r,domain:s,range:o,scale:t,hint:l,interval:i}}function ust(e,t,{type:n,interval:r,domain:i,range:s,scheme:o,unknown:a,...l}){r=od(r,n),i===void 0&&(i=FC(t,r,e));let c;if(Le.get(e)===Sv)c=hst(t),s=s===void 0?pst(c):_e(s,Q3);else if(Le.get(e)===Ho&&(s===void 0&&(n==="ordinal"||n===Ey)&&(s=Rit(i,o),s!==void 0&&(o=void 0)),o===void 0&&s===void 0&&(o=n==="ordinal"?"turbo":"tableau10"),o!==void 0))if(s!==void 0){const u=hE(o),f=s[0],d=s[1]-s[0];s=({length:h})=>Vi(p=>u(f+d*p),h)}else s=EC(o);if(a===zS)throw new Error(`implicit unknown on ${e} scale is not supported`);return kC(e,$3().unknown(a),t,{...l,type:n,domain:i,range:s,hint:c})}function fst(e,t,{align:n=.5,padding:r=.5,...i}){return OC(uet().align(n).padding(r),t,i,e)}function dst(e,t,{align:n=.5,padding:r=.1,paddingInner:i=r,paddingOuter:s=e==="fx"||e==="fy"?0:r,...o}){return OC(sv().align(n).paddingInner(i).paddingOuter(s),t,o,e)}function OC(e,t,n,r){let{round:i}=n;return i!==void 0&&e.round(i=!!i),e=kC(r,e,t,n),e.round=i,e}function FC(e,t,n){const r=new ny;for(const{value:i,domain:s}of e){if(s!==void 0)return s();if(i!==void 0)for(const o of i)r.add(o)}if(t!==void 0){const[i,s]=yn(r).map(t.floor,t);return t.range(i,t.offset(s))}if(r.size>1e4&&Le.get(n)===As)throw new Error(`implicit ordinal domain of ${n} scale has more than 10,000 values`);return lp(r,bi)}function B$(e,t){let n;for(const{hint:r}of e){const i=r==null?void 0:r[t];if(i!==void 0){if(n===void 0)n=i;else if(n!==i)return}}return n}function hst(e){return{fill:B$(e,"fill"),stroke:B$(e,"stroke")}}function pst(e){return We(e.fill)?trt:Jnt}function KS(e,{label:t,inset:n=0,insetTop:r=n,insetRight:i=n,insetBottom:s=n,insetLeft:o=n,round:a,nice:l,clamp:c,zero:u,align:f,padding:d,projection:h,facet:{label:p=t}={},...g}={}){const v={};for(const[y,m]of e){const b=g[y],w=CC(y,m,{round:Le.get(y)===As?a:void 0,nice:l,clamp:c,zero:u,align:f,padding:d,projection:h,...b});if(w){let{label:S=y==="fx"||y==="fy"?p:t,percent:_,transform:x,inset:T,insetTop:N=T!==void 0?T:y==="y"?r:0,insetRight:I=T!==void 0?T:y==="x"?i:0,insetBottom:A=T!==void 0?T:y==="y"?s:0,insetLeft:k=T!==void 0?T:y==="x"?o:0}=b||{};if(x==null)x=void 0;else if(typeof x!="function")throw new Error("invalid scale transform; not a function");w.percent=!!_,w.label=S===void 0?mst(m,w):S,w.transform=x,y==="x"||y==="fx"?(w.insetLeft=+k,w.insetRight=+I):(y==="y"||y==="fy")&&(w.insetTop=+N,w.insetBottom=+A),v[y]=w}}return v}function R$(e){const t={},n={scales:t};for(const[r,i]of Object.entries(e)){const{scale:s,type:o,interval:a,label:l}=i;t[r]=PC(i),n[r]=s,s.type=o,a!=null&&(s.interval=a),l!=null&&(s.label=l)}return n}function yst(e,t){const{x:n,y:r,fx:i,fy:s}=e,o=i||s?mE(t):t;i&&L$(i,o),s&&C$(s,o);const a=i||s?BC(e,t):t;n&&L$(n,a),r&&C$(r,a)}function mst(e=[],t){let n;for(const{label:r}of e)if(r!==void 0){if(n===void 0)n=r;else if(n!==r)return}if(n!==void 0)return!Fc(t)&&t.percent&&(n=`${n} (%)`),{inferred:!0,toString:()=>n}}function mE(e){const{marginTop:t,marginRight:n,marginBottom:r,marginLeft:i,width:s,height:o,facet:{marginTop:a,marginRight:l,marginBottom:c,marginLeft:u}}=e;return{marginTop:Math.max(t,a),marginRight:Math.max(n,l),marginBottom:Math.max(r,c),marginLeft:Math.max(i,u),width:s,height:o}}function BC({fx:e,fy:t},n){const{marginTop:r,marginRight:i,marginBottom:s,marginLeft:o,width:a,height:l}=mE(n);return{marginTop:r,marginRight:i,marginBottom:s,marginLeft:o,width:e?e.scale.bandwidth()+o+i:a,height:t?t.scale.bandwidth()+r+s:l,facet:{width:a,height:l}}}function L$(e,t){if(e.range===void 0){const{insetLeft:n,insetRight:r}=e,{width:i,marginLeft:s=0,marginRight:o=0}=t,a=s+n,l=i-o-r;e.range=[a,Math.max(a,l)],Fc(e)||(e.range=LC(e)),e.scale.range(e.range)}RC(e)}function C$(e,t){if(e.range===void 0){const{insetTop:n,insetBottom:r}=e,{height:i,marginTop:s=0,marginBottom:o=0}=t,a=s+n,l=i-o-r;e.range=[Math.max(a,l),a],Fc(e)?e.range.reverse():e.range=LC(e),e.scale.range(e.range)}RC(e)}function RC(e){e.round===void 0&&vst(e)&&gst(e)<=30&&e.scale.round(!0)}function gst({scale:e}){const t=e.domain().length,[n,r]=e.range(),i=e.paddingInner?e.paddingInner():1,s=e.paddingOuter?e.paddingOuter():e.padding(),o=t-i,a=Math.abs(r-n)/Math.max(1,o+s*2);return(a-Math.floor(a))*o}function LC(e){const t=e.scale.domain().length+UC(e);if(!(t>2))return e.range;const[n,r]=e.range;return Array.from({length:t},(i,s)=>n+s/(t-1)*(r-n))}function ZS(e,t,n){return CC(e,n===void 0?void 0:[{hint:n}],{...t})}function CC(e,t=[],n={}){const r=bst(e,t,n);if(n.type===void 0&&n.domain===void 0&&n.range===void 0&&n.interval==null&&e!=="fx"&&e!=="fy"&&Fc({type:r})){const i=t.map(({value:s})=>s).filter(s=>s!==void 0);i.some(Kn)?Mo(`Warning: some data associated with the ${e} scale are dates. Dates are typically associated with a "utc" or "time" scale rather than a "${Hc(r)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can specify the interval of the ${e} scale (e.g., d3.utcDay), or you can suppress this warning by setting the type of the ${e} scale to "${Hc(r)}".`):i.some(Crt)?Mo(`Warning: some data associated with the ${e} scale are strings that appear to be dates (e.g., YYYY-MM-DD). If these strings represent dates, you should parse them to Date objects. Dates are typically associated with a "utc" or "time" scale rather than a "${Hc(r)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can suppress this warning by setting the type of the ${e} scale to "${Hc(r)}".`):i.some(Urt)&&Mo(`Warning: some data associated with the ${e} scale are strings that appear to be numbers. If these strings represent numbers, you should parse or coerce them to numbers. Numbers are typically associated with a "linear" scale rather than a "${Hc(r)}" scale. If you want to treat this data as ordinal, you can specify the interval of the ${e} scale (e.g., 1 for integers), or you can suppress this warning by setting the type of the ${e} scale to "${Hc(r)}".`)}switch(n.type=r,r){case"diverging":case"diverging-sqrt":case"diverging-pow":case"diverging-log":case"diverging-symlog":case"cyclical":case"sequential":case"linear":case"sqrt":case"threshold":case"quantile":case"pow":case"log":case"symlog":n=M0(t,n,lr);break;case"identity":switch(Le.get(e)){case As:n=M0(t,n,lr);break;case Sv:n=M0(t,n,wst);break}break;case"utc":case"time":n=M0(t,n,Ort);break}switch(r){case"diverging":return Jit(e,t,n);case"diverging-sqrt":return tst(e,t,n);case"diverging-pow":return NC(e,t,n);case"diverging-log":return est(e,t,n);case"diverging-symlog":return nst(e,t,n);case"categorical":case"ordinal":case Ey:return ust(e,t,n);case"cyclical":case"sequential":case"linear":return Pit(e,t,n);case"sqrt":return zit(e,t,n);case"threshold":return pE(e,t,n);case"quantile":return Yit(e,t,n);case"quantize":return qit(e,t,n);case"pow":return MC(e,t,n);case"log":return jit(e,t,n);case"symlog":return Vit(e,t,n);case"utc":return cst(e,t,n);case"time":return lst(e,t,n);case"point":return fst(e,t,n);case"band":return dst(e,t,n);case"identity":return Hit(e);case void 0:return;default:throw new Error(`unknown scale type: ${r}`)}}function Hc(e){return typeof e=="symbol"?e.description:e}const U$={toString:()=>"projection"};function bst(e,t,{type:n,domain:r,range:i,scheme:s,pivot:o,projection:a}){if(e==="fx"||e==="fy")return"band";(e==="x"||e==="y")&&a!=null&&(n=U$);for(const{type:c}of t)if(c!==void 0){if(n===void 0)n=c;else if(n!==c)throw new Error(`scale incompatible with channel: ${n} !== ${c}`)}if(n===U$)return;if(n!==void 0)return n;if(r===void 0&&!t.some(({value:c})=>c!==void 0))return;const l=Le.get(e);if(l===_y)return"sqrt";if(l===xy||l===Sy)return"linear";if(l===Sv)return"ordinal";if((r||i||[]).length>2)return g_(l);if(r!==void 0){if(je(r))return g_(l);if(Kn(r))return"utc"}else{const c=t.map(({value:u})=>u).filter(u=>u!==void 0);if(c.some(je))return g_(l);if(c.some(Kn))return"utc"}if(l===Ho){if(o!=null||Cit(s))return"diverging";if(Bit(s))return"categorical"}return"linear"}function g_(e){switch(e){case As:return"point";case Ho:return Ey;default:return"ordinal"}}function Fc({type:e}){return e==="ordinal"||e==="point"||e==="band"||e===Ey}function UC({type:e}){return e==="threshold"}function vst({type:e}){return e==="point"||e==="band"}function ui(e){if(e===void 0)return!0;const t=e.domain(),n=e(t[0]);for(let r=1,i=t.length;r<i;++r)if(e(t[r])-n)return!1;return!0}function M0(e,{domain:t,...n},r){for(const i of e)i.value!==void 0&&(i.value=r(i.value));return{domain:t===void 0?t:r(t),...n}}function wst(e){return _e(e,Q3)}function Ac(e={}){let t;for(const n in e)if(Le.has(n)&&ic(e[n])){if(t!==void 0)throw new Error("ambiguous scale definition; multiple scales found");t=PC(ZS(n,e[n]))}if(t===void 0)throw new Error("invalid scale definition; no scale found");return t}function _st(e){return t=>{if(!Le.has(t=`${t}`))throw new Error(`unknown scale: ${t}`);return e[t]}}function PC({scale:e,type:t,domain:n,range:r,interpolate:i,interval:s,transform:o,percent:a,pivot:l}){if(t==="identity")return{type:"identity",apply:u=>u,invert:u=>u};const c=e.unknown?e.unknown():void 0;return{type:t,domain:Sp(n),...r!==void 0&&{range:Sp(r)},...o!==void 0&&{transform:o},...a&&{percent:a},...c!==void 0&&{unknown:c},...s!==void 0&&{interval:s},...i!==void 0&&{interpolate:i},...e.clamp&&{clamp:e.clamp()},...l!==void 0&&{pivot:l,symmetric:!1},...e.base&&{base:e.base()},...e.exponent&&{exponent:e.exponent()},...e.constant&&{constant:e.constant()},...e.align&&{align:e.align(),round:e.round()},...e.padding&&(e.paddingInner?{paddingInner:e.paddingInner(),paddingOuter:e.paddingOuter()}:{padding:e.padding()}),...e.bandwidth&&{bandwidth:e.bandwidth(),step:e.step()},apply:u=>e(u),...e.invert&&{invert:u=>e.invert(u)}}}function Sst(e,t,n={}){let r=.5-xn,i=.5+xn,s=.5+xn,o=.5-xn;for(const{marginTop:g,marginRight:v,marginBottom:y,marginLeft:m}of t)g>r&&(r=g),v>i&&(i=v),y>s&&(s=y),m>o&&(o=m);let{margin:a,marginTop:l=a!==void 0?a:r,marginRight:c=a!==void 0?a:i,marginBottom:u=a!==void 0?a:s,marginLeft:f=a!==void 0?a:o}=n;l=+l,c=+c,u=+u,f=+f;let{width:d=640,height:h=xst(e,n,{width:d,marginTopDefault:r,marginRightDefault:i,marginBottomDefault:s,marginLeftDefault:o})+Math.max(0,l-r+u-s)}=n;d=+d,h=+h;const p={width:d,height:h,marginTop:l,marginRight:c,marginBottom:u,marginLeft:f};if(e.fx||e.fy){let{margin:g,marginTop:v=g!==void 0?g:l,marginRight:y=g!==void 0?g:c,marginBottom:m=g!==void 0?g:u,marginLeft:b=g!==void 0?g:f}=n.facet??{};v=+v,y=+y,m=+m,b=+b,p.facet={marginTop:v,marginRight:y,marginBottom:m,marginLeft:b}}return p}function xst({x:e,y:t,fy:n,fx:r},{projection:i,aspectRatio:s},{width:o,marginTopDefault:a,marginRightDefault:l,marginBottomDefault:c,marginLeftDefault:u}){const f=n?n.scale.domain().length:1,d=Oit(i);if(d){const p=r?r.scale.domain().length:1,g=(1.1*f-.1)/(1.1*p-.1)*d,v=Math.max(.1,Math.min(10,g));return Math.round((o-u-l)*v+a+c)}const h=t?Fc(t)?t.scale.domain().length:Math.max(7,17/f):1;if(s!=null){if(s=+s,!(isFinite(s)&&s>0))throw new Error(`invalid aspectRatio: ${s}`);const p=P$("y",t)/(P$("x",e)*s),g=r?r.scale.bandwidth():1,v=n?n.scale.bandwidth():1,y=g*(o-u-l)-e.insetLeft-e.insetRight;return(p*y+t.insetTop+t.insetBottom)/v+a+c}return!!(t||n)*Math.max(1,Math.min(60,h*f))*20+!!r*30+60}function P$(e,t){if(!t)throw new Error(`aspectRatio requires ${e} scale`);const{type:n,domain:r}=t;let i;switch(n){case"linear":case"utc":case"time":i=Number;break;case"pow":{const a=t.scale.exponent();i=l=>Math.pow(l,a);break}case"log":i=Math.log;break;case"point":case"band":return r.length;default:throw new Error(`unsupported ${e} scale for aspectRatio: ${n}`)}const[s,o]=yn(r);return Math.abs(i(o)-i(s))}function Ist(e,t){const{fx:n,fy:r}=KS(e,t),i=n==null?void 0:n.scale.domain(),s=r==null?void 0:r.scale.domain();return i&&s?vG(i,s).map(([o,a],l)=>({x:o,y:a,i:l})):i?i.map((o,a)=>({x:o,i:a})):s?s.map((o,a)=>({y:o,i:a})):void 0}function Est(e,{x:t,y:n}){return t&&(t=JS(t)),n&&(n=JS(n)),e.filter(t&&n?r=>t.has(r.x)&&n.has(r.y):t?r=>t.has(r.x):r=>n.has(r.y)).sort(t&&n?(r,i)=>t.get(r.x)-t.get(i.x)||n.get(r.y)-n.get(i.y):t?(r,i)=>t.get(r.x)-t.get(i.x):(r,i)=>n.get(r.y)-n.get(i.y))}function gE(e,{fx:t,fy:n}){const r=Yo(e),i=t==null?void 0:t.value,s=n==null?void 0:n.value;return t&&n?Hu(r,o=>(o.fx=i[o[0]],o.fy=s[o[0]],o),o=>i[o],o=>s[o]):t?Hu(r,o=>(o.fx=i[o[0]],o),o=>i[o]):Hu(r,o=>(o.fy=s[o[0]],o),o=>s[o])}function Tst(e,t,{marginTop:n,marginLeft:r}){return e&&t?({x:i,y:s})=>`translate(${e(i)-r},${t(s)-n})`:e?({x:i})=>`translate(${e(i)-r},0)`:({y:i})=>`translate(0,${t(i)-n})`}function Ast(e){const t=[],n=new Uint32Array(Ls(e,r=>r.length));for(const r of e){let i=0;for(const s of e)r!==s&&(n.set(s,i),i+=s.length);t.push(n.slice(0,i))}return t}const Mst=new Map([["top",b_],["right",__],["bottom",v_],["left",w_],["top-left",$0(b_,w_)],["top-right",$0(b_,__)],["bottom-left",$0(v_,w_)],["bottom-right",$0(v_,__)],["top-empty",Dst],["right-empty",Fst],["bottom-empty",kst],["left-empty",Ost],["empty",Bst]]);function $st(e){if(e==null)return null;const t=Mst.get(`${e}`.toLowerCase());if(t)return t;throw new Error(`invalid facet anchor: ${e}`)}const z$=new WeakMap;function JS(e){let t=z$.get(e);return t||z$.set(e,t=new bc(_e(e,(n,r)=>[n,r]))),t}function cl(e,t){return JS(e).get(t)}function Nst(e,t,n){return t=Vl(t),n=Vl(n),e.find(r=>Object.is(Vl(r.x),t)&&Object.is(Vl(r.y),n))}function Nv(e,t,n){var r;return(r=Nst(e,t,n))==null?void 0:r.empty}function b_(e,{y:t},{y:n}){return t?cl(t,n)===0:!0}function v_(e,{y:t},{y:n}){return t?cl(t,n)===t.length-1:!0}function w_(e,{x:t},{x:n}){return t?cl(t,n)===0:!0}function __(e,{x:t},{x:n}){return t?cl(t,n)===t.length-1:!0}function Dst(e,{y:t},{x:n,y:r,empty:i}){if(i)return!1;if(!t)return;const s=cl(t,r);if(s>0)return Nv(e,n,t[s-1])}function kst(e,{y:t},{x:n,y:r,empty:i}){if(i)return!1;if(!t)return;const s=cl(t,r);if(s<t.length-1)return Nv(e,n,t[s+1])}function Ost(e,{x:t},{x:n,y:r,empty:i}){if(i)return!1;if(!t)return;const s=cl(t,n);if(s>0)return Nv(e,t[s-1],r)}function Fst(e,{x:t},{x:n,y:r,empty:i}){if(i)return!1;if(!t)return;const s=cl(t,n);if(s<t.length-1)return Nv(e,t[s+1],r)}function Bst(e,t,{empty:n}){return n}function $0(e,t){return function(){return e.apply(null,arguments)&&t.apply(null,arguments)}}function S_(e,{channels:{fx:t,fy:n},groups:r}){return t&&n?e.map(({x:i,y:s})=>{var o;return((o=r.get(i))==null?void 0:o.get(s))??[]}):t?e.map(({x:i})=>r.get(i)??[]):e.map(({y:i})=>r.get(i)??[])}let ve=class{constructor(t,n={},r={},i){const{facet:s="auto",facetAnchor:o,fx:a,fy:l,sort:c,dx:u=0,dy:f=0,margin:d=0,marginTop:h=d,marginRight:p=d,marginBottom:g=d,marginLeft:v=d,clip:y=i==null?void 0:i.clip,channels:m,tip:b,render:w}=r;if(this.data=t,this.sort=ja(c)?c:null,this.initializer=wr(r).initializer,this.transform=this.initializer?r.transform:Ys(r).transform,s===null||s===!1?this.facet=null:(this.facet=Yr(s===!0?"include":s,"facet",["auto","include","exclude","super"]),this.fx=t===Dh&&typeof a=="string"?[a]:a,this.fy=t===Dh&&typeof l=="string"?[l]:l),this.facetAnchor=$st(o),n=H3(n),m!==void 0&&(n={...Rst(m),...n}),i!==void 0&&(n={...mC(this,r,i),...n}),this.channels=Object.fromEntries(Object.entries(n).map(([S,_])=>{if(ds(_.value)){const{value:x,label:T=_.label,scale:N=_.scale}=_.value;_={..._,label:T,scale:N,value:x}}if(t===Dh&&typeof _.value=="string"){const{value:x}=_;_={..._,value:[x]}}return[S,_]}).filter(([S,{value:_,optional:x}])=>{if(_!=null)return!0;if(x)return!1;throw new Error(`missing channel value: ${S}`)})),this.dx=+u,this.dy=+f,this.marginTop=+h,this.marginRight=+p,this.marginBottom=+g,this.marginLeft=+v,this.clip=bC(y),this.tip=Lst(b),this.facet==="super"){if(a||l)throw new Error("super-faceting cannot use fx or fy");for(const S in this.channels){const{scale:_}=n[S];if(!(_!=="x"&&_!=="y"))throw new Error("super-faceting cannot use x or y")}}w!=null&&(this.render=zC(w,this.render))}initialize(t,n,r){let i=vr(this.data);t===void 0&&i!=null&&(t=[Yo(i)]);const s=t;this.transform!=null&&({facets:t,data:i}=this.transform(i,t,r),i=vr(i)),t!==void 0&&(t.original=s);const o=fC(this.channels,i);return this.sort!=null&&lit(i,t,o,n,this.sort),{data:i,facets:t,channels:o}}filter(t,n,r){for(const i in n){const{filter:s=Gn}=n[i];if(s!==null){const o=r[i];t=t.filter(a=>s(o[a]))}}return t}project(t,n,r){for(const i in t)if(t[i].scale==="x"&&/^x|x$/.test(i)){const s=i.replace(/^x|x$/,"y");s in t&&t[s].scale==="y"&&xC(i,s,n,r.projection)}}scale(t,n,r){const i=lE(t,n);return r.projection&&this.project(t,i,r),i}};function Hi(...e){return e.plot=ve.prototype.plot,e}function zC(e,t){if(e==null)return t===null?void 0:t;if(t==null)return e===null?void 0:e;if(typeof e!="function")throw new TypeError(`invalid render transform: ${e}`);if(typeof t!="function")throw new TypeError(`invalid render transform: ${t}`);return function(n,r,i,s,o,a){return e.call(this,n,r,i,s,o,(l,c,u,f,d)=>t.call(this,l,c,u,f,d,a))}}function Rst(e){return Object.fromEntries(Object.entries(H3(e)).map(([t,n])=>(n=typeof n=="string"?{value:n,label:t}:by(n),n.filter===void 0&&n.scale==null&&(n={...n,filter:null}),[t,n])))}function Lst(e){return e===!0?"xy":e===!1||e==null?null:typeof e=="string"?Yr(e,"tip",["x","y","xy"]):e}function ad(e,t){return(e==null?void 0:e.tip)===!0?{...e,tip:t}:_i(e==null?void 0:e.tip)&&e.tip.pointer===void 0?{...e,tip:{...e.tip,pointer:t}}:e}const j$=new WeakMap;function bE(e,t,{x:n,y:r,px:i,py:s,maxRadius:o=40,channels:a,render:l,...c}={}){return o=+o,i!=null&&(n??(n=null),a={...a,px:{value:i,scale:"x"}}),s!=null&&(r??(r=null),a={...a,py:{value:s,scale:"y"}}),{x:n,y:r,channels:a,...c,render:zC(function(u,f,d,h,p,g){p={...p,pointerSticky:!1};const v=p.ownerSVGElement,{data:y}=p.getMarkState(this);let m=j$.get(v);m||j$.set(v,m={sticky:!1,roots:[],renders:[]});let b=m.renders.push(H)-1;const{x:w,y:S,fx:_,fy:x}=f;let T=_?_(u.fx)-h.marginLeft:0,N=x?x(u.fy)-h.marginTop:0;w!=null&&w.bandwidth&&(T+=w.bandwidth()/2),S!=null&&S.bandwidth&&(N+=S.bandwidth()/2);const I=u.fi!=null;let A;if(I){let Y=m.facetStates;Y||(m.facetStates=Y=new Map),A=Y.get(this),A||Y.set(this,A=new Map)}const[k,R]=qs(this,h),{px:E,py:M}=d,$=E?Y=>E[Y]:jC(d,k),B=M?Y=>M[Y]:VC(d,R);let O,C,F,P;function z(Y,Q){if(I)if(P&&(P=cancelAnimationFrame(P)),Y==null)A.delete(u.fi);else{A.set(u.fi,Q),P=requestAnimationFrame(()=>{P=null;for(const[V,J]of A)if(J<Q||J===Q&&V<u.fi){Y=null;break}H(Y)});return}H(Y)}function H(Y){if(O===Y&&F===m.sticky)return;O=Y,F=p.pointerSticky=m.sticky;const Q=O==null?[]:[O];I&&(Q.fx=u.fx,Q.fy=u.fy,Q.fi=u.fi);const V=g(Q,f,d,h,p);if(C){if(I){const J=C.parentNode,et=C.getAttribute("transform"),j=V.getAttribute("transform");et?V.setAttribute("transform",et):V.removeAttribute("transform"),j?J.setAttribute("transform",j):J.removeAttribute("transform"),V.removeAttribute("aria-label"),V.removeAttribute("aria-description"),V.removeAttribute("aria-hidden")}C.replaceWith(V)}return m.roots[b]=C=V,O==null&&(A==null?void 0:A.size)>1||p.dispatchValue(O==null?null:y[O]),V}function X(Y){if(m.sticky||Y.pointerType==="mouse"&&Y.buttons===1)return;let[Q,V]=Mi(Y);Q-=T,V-=N;const J=Q<h.marginLeft||Q>h.width-h.marginRight?1:e,et=V<h.marginTop||V>h.height-h.marginBottom?1:t;let j=null,At=o*o;for(const ot of u){const Vt=J*($(ot)-Q),Ht=et*(B(ot)-V),st=Vt*Vt+Ht*Ht;st<=At&&(j=ot,At=st)}if(j!=null&&(e!==1||t!==1)){const ot=$(j)-Q,Vt=B(j)-V;At=ot*ot+Vt*Vt}z(j,At)}function tt(Y){Y.pointerType==="mouse"&&O!=null&&(m.sticky&&m.roots.some(Q=>Q==null?void 0:Q.contains(Y.target))||(m.sticky?(m.sticky=!1,m.renders.forEach(Q=>Q(null))):(m.sticky=!0,H(O)),Y.stopImmediatePropagation()))}function Z(Y){Y.pointerType==="mouse"&&(m.sticky||z(null))}return v.addEventListener("pointerenter",X),v.addEventListener("pointermove",X),v.addEventListener("pointerdown",tt),v.addEventListener("pointerleave",Z),H(null)},l)}}function vE(e){return bE(1,1,e)}function wE(e){return bE(1,.01,e)}function _E(e){return bE(.01,1,e)}function jC({x1:e,x2:t,x:n=e},r){return e&&t?i=>(e[i]+t[i])/2:n?i=>n[i]:()=>r}function VC({y1:e,y2:t,y:n=e},r){return e&&t?i=>(e[i]+t[i])/2:n?i=>n[i]:()=>r}function YC(e){return Fc(e)&&e.interval===void 0?void 0:"tabular-nums"}function Cst(e,t){let{label:n=e.label,tickSize:r=6,width:i=240,height:s=44+r,marginTop:o=18,marginRight:a=0,marginBottom:l=16+r,marginLeft:c=0,style:u,ticks:f=(i-c-a)/64,tickFormat:d,fontVariant:h=YC(e),round:p=!0,opacity:g,className:v}=t;const y=Tv(t);v=fE(v),g=Ke(g)[1],d===null&&(d=()=>null);const m=ee("svg",y).attr("class",`${v}-ramp`).attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("width",i).attr("height",s).attr("viewBox",`0 0 ${i} ${s}`).call(k=>k.append("style").text(`.${v}-ramp {
  display: block;
  background: white;
  height: auto;
  height: intrinsic;
  max-width: 100%;
  overflow: visible;
}
.${v}-ramp text {
  white-space: pre;
}`)).call(dE,u);let b=k=>k.selectAll(".tick line").attr("y1",o+l-s),w;const S=p?(k,R)=>k.rangeRound(R):(k,R)=>k.range(R),{type:_,domain:x,range:T,interpolate:N,scale:I,pivot:A}=e;if(N){const k=T===void 0?N:Jb(N.length===1?yE(N):N,T);w=S(I.copy(),Vi(kn(c,i-a),Math.min(x.length+(A!==void 0),T===void 0?1/0:T.length)));const R=256,E=y.document.createElement("canvas");E.width=R,E.height=1;const M=E.getContext("2d");for(let $=0,B=R-1;$<R;++$)M.fillStyle=k($/B),M.fillRect($,0,1,1);m.append("image").attr("opacity",g).attr("x",c).attr("y",o).attr("width",i-c-a).attr("height",s-o-l).attr("preserveAspectRatio","none").attr("xlink:href",E.toDataURL())}else if(_==="threshold"){const k=x,R=d===void 0?E=>E:typeof d=="string"?id(d):d;w=S(av().domain([-1,T.length-1]),[c,i-a]),m.append("g").attr("fill-opacity",g).selectAll().data(T).enter().append("rect").attr("x",(E,M)=>w(M-1)).attr("y",o).attr("width",(E,M)=>w(M)-w(M-1)).attr("height",s-o-l).attr("fill",E=>E),f=_e(k,(E,M)=>M),d=E=>R(k[E],E)}else w=S(sv().domain(x),[c,i-a]),m.append("g").attr("fill-opacity",g).selectAll().data(x).enter().append("rect").attr("x",w).attr("y",o).attr("width",Math.max(0,w.bandwidth()-1)).attr("height",s-o-l).attr("fill",I),b=()=>{};return m.append("g").attr("transform",`translate(0,${s-l})`).call(zG(w).ticks(Array.isArray(f)?null:f,typeof d=="string"?d:void 0).tickFormat(typeof d=="function"?d:void 0).tickSize(r).tickValues(Array.isArray(f)?f:null)).attr("font-size",null).attr("font-family",null).attr("font-variant",Ve(h,"normal")).call(b).call(k=>k.select(".domain").remove()),n!==void 0&&m.append("text").attr("x",c).attr("y",o-6).attr("fill","currentColor").attr("font-weight","bold").text(n),m.node()}const M1=Math.PI/180;function ld(e,{marker:t,markerStart:n=t,markerMid:r=t,markerEnd:i=t}={}){e.markerStart=x_(n),e.markerMid=x_(r),e.markerEnd=x_(i)}function x_(e){if(e==null||e===!1)return null;if(e===!0)return Y$;if(typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"none":return null;case"arrow":return V$("auto");case"arrow-reverse":return V$("auto-start-reverse");case"dot":return Ust;case"circle":case"circle-fill":return Y$;case"circle-stroke":return Pst}throw new Error(`invalid marker: ${e}`)}function V$(e){return(t,n)=>ee("svg:marker",n).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("orient",e).attr("fill","none").attr("stroke",t).attr("stroke-width",1.5).attr("stroke-linecap","round").attr("stroke-linejoin","round").call(r=>r.append("path").attr("d","M-1.5,-3l3,3l-3,3")).node()}function Ust(e,t){return ee("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",e).attr("stroke","none").call(n=>n.append("circle").attr("r",2.5)).node()}function Y$(e,t){return ee("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",e).attr("stroke","white").attr("stroke-width",1.5).call(n=>n.append("circle").attr("r",3)).node()}function Pst(e,t){return ee("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill","white").attr("stroke",e).attr("stroke-width",1.5).call(n=>n.append("circle").attr("r",3)).node()}let zst=0;function Ty(e,t,{stroke:n},r){return qC(e,t,n&&(i=>n[i]),r)}function jst(e,t,{stroke:n},r){return qC(e,t,n&&(([i])=>n[i]),r)}function qC(e,{markerStart:t,markerMid:n,markerEnd:r,stroke:i},s=()=>i,o){const a=new Map;function l(c){return function(u){const f=s(u);let d=a.get(c);d||a.set(c,d=new Map);let h=d.get(f);if(!h){const p=this.parentNode.insertBefore(c(f,o),this),g=`plot-marker-${++zst}`;p.setAttribute("id",g),d.set(f,h=`url(#${g})`)}return h}}t&&e.attr("marker-start",l(t)),n&&e.attr("marker-mid",l(n)),r&&e.attr("marker-end",l(r))}function Ay({inset:e,insetLeft:t,insetRight:n,...r}={}){return[t,n]=WC(e,t,n),{inset:e,insetLeft:t,insetRight:n,...r}}function My({inset:e,insetTop:t,insetBottom:n,...r}={}){return[t,n]=WC(e,t,n),{inset:e,insetTop:t,insetBottom:n,...r}}function WC(e,t,n){return e===void 0&&t===void 0&&n===void 0?xn?[1,0]:[.5,.5]:[t,n]}function HC(e,{interval:t}){return e={...by(e)},e.interval=W3(e.interval===void 0?t:e.interval),e}function Dv(e,t,n,r){const{[e]:i,[`${e}1`]:s,[`${e}2`]:o}=n,{value:a,interval:l}=HC(i,n);if(a==null||l==null&&!r)return n;const c=qo(i);if(l==null){let h;const p={transform:g=>h||(h=Ut(g,a)),label:c};return{...n,[e]:void 0,[`${e}1`]:s===void 0?p:s,[`${e}2`]:o===void 0?p:o}}let u,f;function d(h){return f!==void 0&&h===u?f:f=_e(Ut(u=h,a),p=>l.floor(p))}return t({...n,[e]:void 0,[`${e}1`]:s===void 0?{transform:d,label:c}:s,[`${e}2`]:o===void 0?{transform:h=>d(h).map(p=>l.offset(p)),label:c}:o})}function GC(e,t,n){const{[e]:r}=n,{value:i,interval:s}=HC(r,n);return i==null||s==null?n:t({...n,[e]:{label:qo(r),transform:o=>{const a=_e(Ut(o,i),c=>s.floor(c)),l=a.map(c=>s.offset(c));return a.map(Kn(a)?(c,u)=>c==null||isNaN(c=+c)||(u=l[u],u==null)||isNaN(u=+u)?void 0:new Date((c+u)/2):(c,u)=>c==null||(u=l[u],u==null)?NaN:(+c+ +u)/2)}}})}function XC(e={}){return Dv("x",Ay,e,!0)}function QC(e={}){return Dv("y",My,e,!0)}function KC(e={}){return Dv("x",Ay,e)}function ZC(e={}){return Dv("y",My,e)}function JC(e={}){return GC("x",Ay,e)}function t5(e={}){return GC("y",My,e)}const e5={ariaLabel:"rule",fill:null,stroke:"currentColor"};class n5 extends ve{constructor(t,n={}){const{x:r,y1:i,y2:s,inset:o=0,insetTop:a=o,insetBottom:l=o}=n;super(t,{x:{value:r,scale:"x",optional:!0},y1:{value:i,scale:"y",optional:!0},y2:{value:s,scale:"y",optional:!0}},ad(n,"x"),e5),this.insetTop=jt(a),this.insetBottom=jt(l),ld(this,n)}render(t,n,r,i,s){const{x:o,y:a}=n,{x:l,y1:c,y2:u}=r,{width:f,height:d,marginTop:h,marginRight:p,marginLeft:g,marginBottom:v}=i,{insetTop:y,insetBottom:m}=this;return ee("svg:g",s).call(Ne,this,i,s).call(be,this,{x:l&&o},xn,0).call(b=>b.selectAll().data(t).enter().append("line").call(Ee,this).attr("x1",l?w=>l[w]:(g+f-p)/2).attr("x2",l?w=>l[w]:(g+f-p)/2).attr("y1",c&&!ui(a)?w=>c[w]+y:h+y).attr("y2",u&&!ui(a)?a.bandwidth?w=>u[w]+a.bandwidth()-m:w=>u[w]-m:d-v-m).call(fn,this,r).call(Ty,this,r,s)).node()}}class r5 extends ve{constructor(t,n={}){const{x1:r,x2:i,y:s,inset:o=0,insetRight:a=o,insetLeft:l=o}=n;super(t,{y:{value:s,scale:"y",optional:!0},x1:{value:r,scale:"x",optional:!0},x2:{value:i,scale:"x",optional:!0}},ad(n,"y"),e5),this.insetRight=jt(a),this.insetLeft=jt(l),ld(this,n)}render(t,n,r,i,s){const{x:o,y:a}=n,{y:l,x1:c,x2:u}=r,{width:f,height:d,marginTop:h,marginRight:p,marginLeft:g,marginBottom:v}=i,{insetLeft:y,insetRight:m}=this;return ee("svg:g",s).call(Ne,this,i,s).call(be,this,{y:l&&a},0,xn).call(b=>b.selectAll().data(t).enter().append("line").call(Ee,this).attr("x1",c&&!ui(o)?w=>c[w]+y:g+y).attr("x2",u&&!ui(o)?o.bandwidth?w=>u[w]+o.bandwidth()-m:w=>u[w]-m:f-p-m).attr("y1",l?w=>l[w]:(h+d-v)/2).attr("y2",l?w=>l[w]:(h+d-v)/2).call(fn,this,r).call(Ty,this,r,s)).node()}}function Va(e,t){let{x:n=gt,y:r,y1:i,y2:s,...o}=ZC(t);return[i,s]=i5(r,i,s),new n5(e,{...o,x:n,y1:i,y2:s})}function Ya(e,t){let{y:n=gt,x:r,x1:i,x2:s,...o}=KC(t);return[i,s]=i5(r,i,s),new r5(e,{...o,y:n,x1:i,x2:s})}function i5(e,t,n){if(e==null){if(t===void 0){if(n!==void 0)return[0,n]}else if(n===void 0)return[0,t]}else{if(t===void 0)return n===void 0?[0,e]:[e,n];if(n===void 0)return[e,t]}return[t,n]}function kv(e,...t){let n=t.length;for(let r=0,i=!0;r<n;++r)typeof t[r]!="function"&&(i&&(e=e.slice(),i=!1),e.splice(r,2,e[r]+t[r]+e[r+1]),t.splice(r,1),--r,--n);return r=>{let i=e[0];for(let s=0;s<n;++s)i+=t[s](r)+e[s+1];return i}}const Vst={ariaLabel:"text",strokeLinejoin:"round",strokeWidth:3,paintOrder:"stroke"},s5="";class Ov extends ve{constructor(t,n={}){const{x:r,y:i,text:s=Wo(t)&&rC(t)?gt:Ir,frameAnchor:o,textAnchor:a=/right$/i.test(o)?"end":/left$/i.test(o)?"start":"middle",lineAnchor:l=/^top/i.test(o)?"top":/^bottom/i.test(o)?"bottom":"middle",lineHeight:c=1,lineWidth:u=1/0,textOverflow:f,monospace:d,fontFamily:h=d?"ui-monospace, monospace":void 0,fontSize:p,fontStyle:g,fontVariant:v,fontWeight:y,rotate:m}=n,[b,w]=Ke(m,0),[S,_]=Hst(p);if(super(t,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},fontSize:{value:S,optional:!0},rotate:{value:Rrt(b),optional:!0},text:{value:s,filter:U3,optional:!0}},n,Vst),this.rotate=w,this.textAnchor=Ve(a,"middle"),this.lineAnchor=Yr(l,"lineAnchor",["top","middle","bottom"]),this.lineHeight=+c,this.lineWidth=+u,this.textOverflow=o5(f),this.monospace=!!d,this.fontFamily=Fn(h),this.fontSize=_,this.fontStyle=Fn(g),this.fontVariant=Fn(v),this.fontWeight=Fn(y),this.frameAnchor=wy(o),!(this.lineWidth>=0))throw new Error(`invalid lineWidth: ${u}`);this.splitLines=u5(this),this.clipLine=f5(this)}render(t,n,r,i,s){const{x:o,y:a}=n,{x:l,y:c,rotate:u,text:f,title:d,fontSize:h}=r,{rotate:p}=this,[g,v]=qs(this,i);return ee("svg:g",s).call(Ne,this,i,s).call(c5,this,f,i).call(be,this,{x:l&&o,y:c&&a}).call(y=>y.selectAll().data(t).enter().append("text").call(Ee,this).call(Yst,this,f,d).attr("transform",kv`translate(${l?m=>l[m]:g},${c?m=>c[m]:v})${u?m=>` rotate(${u[m]})`:p?` rotate(${p})`:""}`).call(ut,"font-size",h&&(m=>h[m])).call(fn,this,r)).node()}}function o5(e){return e==null?null:Yr(e,"textOverflow",["clip","ellipsis","clip-start","clip-end","ellipsis-start","ellipsis-middle","ellipsis-end"]).replace(/^(clip|ellipsis)$/,"$1-end")}function Yst(e,t,n,r){if(!n)return;const{lineAnchor:i,lineHeight:s,textOverflow:o,splitLines:a,clipLine:l}=t;e.each(function(c){const u=a(Tc(n[c])??"").map(l),f=u.length,d=i==="top"?.71:i==="bottom"?1-f:(164-f*100)/200;if(f>1){let h=0;for(let p=0;p<f;++p){if(++h,!u[p])continue;const g=this.ownerDocument.createElementNS(vc.svg,"tspan");g.setAttribute("x",0),p===h-1?g.setAttribute("y",`${(d+p)*s}em`):g.setAttribute("dy",`${h*s}em`),g.textContent=u[p],this.appendChild(g),h=0}}else d&&this.setAttribute("y",`${d*s}em`),this.textContent=u[0];if(o&&!r&&u[0]!==n[c]){const h=this.ownerDocument.createElementNS(vc.svg,"title");h.textContent=n[c],this.appendChild(h)}})}function Rf(e,{x:t,y:n,...r}={}){return r.frameAnchor===void 0&&([t,n]=Ki(t,n)),new Ov(e,{...r,x:t,y:n})}function a5(e,{x:t=gt,...n}={}){return new Ov(e,t5({...n,x:t}))}function l5(e,{y:t=gt,...n}={}){return new Ov(e,JC({...n,y:t}))}function c5(e,t,n){ut(e,"text-anchor",t.textAnchor),ut(e,"font-family",t.fontFamily),ut(e,"font-size",t.fontSize),ut(e,"font-style",t.fontStyle),ut(e,"font-variant",t.fontVariant===void 0?qst(n):t.fontVariant),ut(e,"font-weight",t.fontWeight)}function qst(e){return e&&(ku(e)||Kn(e))?"tabular-nums":void 0}const Wst=new Set(["inherit","initial","revert","unset","xx-small","x-small","small","medium","large","x-large","xx-large","xxx-large","larger","smaller"]);function Hst(e){return e==null||typeof e=="number"?[void 0,e]:typeof e!="string"?[e,void 0]:(e=e.trim().toLowerCase(),Wst.has(e)||/^[+-]?\d*\.?\d+(e[+-]?\d+)?(\w*|%)$/.test(e)?[void 0,e]:[e,void 0])}function Gst(e,t,n){const r=[];let i,s=0;for(const[o,a,l]of Xst(e)){if(i===void 0&&(i=o),s>i&&n(e,i,a)>t&&(r.push(e.slice(i,s)+(e[s-1]===s5?"-":"")),i=o),l){r.push(e.slice(i,a)),i=void 0;continue}s=a}return r}function*Xst(e){let t=0,n=0;const r=e.length;for(;n<r;){let i=1;switch(e[n]){case s5:case"-":++n,yield[t,n,!1],t=n;break;case" ":for(yield[t,n,!1];e[++n]===" ";);t=n;break;case"\r":e[n+1]===`
`&&++i;case`
`:yield[t,n,!0],n+=i,t=n;break;default:++n;break}}yield[t,n,!0]}const q$={a:56,b:63,c:57,d:63,e:58,f:37,g:62,h:60,i:26,j:26,k:55,l:26,m:88,n:60,o:60,p:62,q:62,r:39,s:54,t:38,u:60,v:55,w:79,x:54,y:55,z:55,A:69,B:67,C:73,D:74,E:61,F:58,G:76,H:75,I:28,J:55,K:67,L:58,M:89,N:75,O:78,P:65,Q:78,R:67,S:65,T:65,U:75,V:69,W:98,X:69,Y:67,Z:67,0:64,1:48,2:62,3:64,4:66,5:63,6:65,7:58,8:65,9:65," ":29,"!":32,'"':49,"'":31,"(":39,")":39,",":31,"-":48,".":31,"/":32,":":31,";":31,"?":52,"":31,"":31,"":47,"":47,"":82};function SE(e,t=0,n=e.length){let r=0;for(let i=t;i<n;i=cd(e,i))r+=q$[e[i]]??(h5(e,i)?120:q$.e);return r}function xE(e,t=0,n=e.length){let r=0;for(let i=t;i<n;i=cd(e,i))r+=h5(e,i)?200:100;return r}function u5({monospace:e,lineWidth:t,textOverflow:n}){if(n!=null||t==1/0)return s=>s.split(/\r\n?|\n/g);const r=e?xE:SE,i=t*100;return s=>Gst(s,i,r)}function f5({monospace:e,lineWidth:t,textOverflow:n}){if(n==null||t==1/0)return s=>s;const r=e?xE:SE,i=t*100;switch(n){case"clip-start":return s=>H$(s,i,r,"");case"clip-end":return s=>W$(s,i,r,"");case"ellipsis-start":return s=>H$(s,i,r,Zu);case"ellipsis-middle":return s=>Qst(s,i,r,Zu);case"ellipsis-end":return s=>W$(s,i,r,Zu)}}const Zu="";function Lf(e,t,n,r){const i=[];let s=0;for(let o=0,a=0,l=e.length;o<l;o=a){a=cd(e,o);const c=n(e,o,a);if(s+c>t){for(s+=r;s>t&&o>0;)a=o,o=i.pop(),s-=n(e,o,a);return[o,t-s]}s+=c,i.push(o)}return[-1,0]}function W$(e,t,n,r){e=e.trim();const i=n(r),[s]=Lf(e,t,n,i);return s<0?e:e.slice(0,s).trimEnd()+r}function Qst(e,t,n,r){e=e.trim();const i=n(e);if(i<=t)return e;const s=n(r)/2,[o,a]=Lf(e,t/2,n,s),[l]=Lf(e,i-t/2-a+s,n,-s);return l<0?r:e.slice(0,o).trimEnd()+r+e.slice(cd(e,l)).trimStart()}function H$(e,t,n,r){e=e.trim();const i=n(e);if(i<=t)return e;const s=n(r),[o]=Lf(e,i-t+s,n,-s);return o<0?r:r+e.slice(cd(e,o)).trimStart()}const tx=/[\p{Combining_Mark}\p{Emoji_Modifier}]+/uy,G$=new RegExp("\\p{Extended_Pictographic}","uy");function cd(e,t){return t+=Kst(e,t)?2:1,Jst(e,t)&&(t=tx.lastIndex),Zst(e,t)?cd(e,t+1):t}function d5(e,t){return e.charCodeAt(t)<128}function Kst(e,t){const n=e.charCodeAt(t);if(n>=55296&&n<56320){const r=e.charCodeAt(t+1);return r>=56320&&r<57344}return!1}function Zst(e,t){return e.charCodeAt(t)===8205}function Jst(e,t){return d5(e,t)?!1:(tx.lastIndex=t,tx.test(e))}function h5(e,t){return d5(e,t)?!1:(G$.lastIndex=t,G$.test(e))}const p5={ariaLabel:"vector",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinejoin:"round",strokeLinecap:"round"},y5=3.5,tot=y5*5,m5={draw(e,t,n){const r=t*n/tot;e.moveTo(0,0),e.lineTo(0,-t),e.moveTo(-r,r-t),e.lineTo(0,-t),e.lineTo(r,r-t)}},g5={draw(e,t,n){e.moveTo(-n,0),e.lineTo(0,-t),e.lineTo(n,0)}},eot=new Map([["arrow",m5],["spike",g5]]);function not(e){return e&&typeof e.draw=="function"}function rot(e){if(not(e))return e;const t=eot.get(`${e}`.toLowerCase());if(t)return t;throw new Error(`invalid shape: ${e}`)}let Fv=class extends ve{constructor(t,n={}){const{x:r,y:i,r:s=y5,length:o,rotate:a,shape:l=m5,anchor:c="middle",frameAnchor:u}=n,[f,d]=Ke(o,12),[h,p]=Ke(a,0);super(t,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},length:{value:f,scale:"length",optional:!0},rotate:{value:h,optional:!0}},n,p5),this.r=+s,this.length=d,this.rotate=p,this.shape=rot(l),this.anchor=Yr(c,"anchor",["start","middle","end"]),this.frameAnchor=wy(u)}render(t,n,r,i,s){const{x:o,y:a}=n,{x:l,y:c,length:u,rotate:f}=r,{length:d,rotate:h,anchor:p,shape:g,r:v}=this,[y,m]=qs(this,i);return ee("svg:g",s).call(Ne,this,i,s).call(be,this,{x:l&&o,y:c&&a}).call(b=>b.selectAll().data(t).enter().append("path").call(Ee,this).attr("transform",kv`translate(${l?w=>l[w]:y},${c?w=>c[w]:m})${f?w=>` rotate(${f[w]})`:h?` rotate(${h})`:""}${p==="start"?"":p==="end"?u?w=>` translate(0,${u[w]})`:` translate(0,${d})`:u?w=>` translate(0,${u[w]/2})`:` translate(0,${d/2})`}`).attr("d",u?w=>{const S=_o();return g.draw(S,u[w],v),S}:(()=>{const w=_o();return g.draw(w,d,v),w})()).call(fn,this,r)).node()}};function b5(e,t={}){let{x:n,y:r,...i}=t;return t.frameAnchor===void 0&&([n,r]=Ki(n,r)),new Fv(e,{...i,x:n,y:r})}function v5(e,t={}){const{x:n=gt,...r}=t;return new Fv(e,{...r,x:n})}function w5(e,t={}){const{y:n=gt,...r}=t;return new Fv(e,{...r,y:n})}function iot(e,t={}){const{shape:n=g5,stroke:r=p5.stroke,strokeWidth:i=1,fill:s=r,fillOpacity:o=.3,anchor:a="start",...l}=t;return b5(e,{...l,shape:n,stroke:r,strokeWidth:i,fill:s,fillOpacity:o,anchor:a})}function ul(e,t){return arguments.length<2&&!Wo(e)&&(t=e,e=null),t===void 0&&(t={}),[e,t]}function Bv({anchor:e}={},t){return e===void 0?t[0]:Yr(e,"anchor",t)}function _5(e){return Bv(e,["left","right"])}function S5(e){return Bv(e,["right","left"])}function x5(e){return Bv(e,["bottom","top"])}function I5(e){return Bv(e,["top","bottom"])}function IE(){const[e,t]=ul(...arguments);return A5("y",_5(t),e,t)}function E5(){const[e,t]=ul(...arguments);return A5("fy",S5(t),e,t)}function EE(){const[e,t]=ul(...arguments);return M5("x",x5(t),e,t)}function T5(){const[e,t]=ul(...arguments);return M5("fx",I5(t),e,t)}function A5(e,t,n,{color:r="currentColor",opacity:i=1,stroke:s=r,strokeOpacity:o=i,strokeWidth:a=1,fill:l=r,fillOpacity:c=i,textAnchor:u,textStroke:f,textStrokeOpacity:d,textStrokeWidth:h,tickSize:p=e==="y"?6:0,tickPadding:g,tickRotate:v,x:y,margin:m,marginTop:b=m===void 0?20:m,marginRight:w=m===void 0?t==="right"?40:0:m,marginBottom:S=m===void 0?20:m,marginLeft:_=m===void 0?t==="left"?40:0:m,label:x,labelAnchor:T,labelArrow:N,labelOffset:I,...A}){return p=jt(p),g=jt(g),v=jt(v),T!==void 0&&(T=Yr(T,"labelAnchor",["center","top","bottom"])),N=P5(N),Hi(p&&!We(s)?sot(e,t,n,{stroke:s,strokeOpacity:o,strokeWidth:a,tickSize:p,tickPadding:g,tickRotate:v,x:y,...A}):null,We(l)?null:aot(e,t,n,{fill:l,fillOpacity:c,stroke:f,strokeOpacity:d,strokeWidth:h,textAnchor:u,tickSize:p,tickPadding:g,tickRotate:v,x:y,marginTop:b,marginRight:w,marginBottom:S,marginLeft:_,...A}),!We(l)&&x!==null?Rf([],R5({fill:l,fillOpacity:c,...A},function(k,R,E,M,$){const B=M[e],{marginTop:O,marginRight:C,marginBottom:F,marginLeft:P}=e==="y"&&$.inset||$,z=T??(B.bandwidth?"center":"top"),H=I??(t==="right"?C:P)-3;return z==="center"?(this.textAnchor=void 0,this.lineAnchor=t==="right"?"bottom":"top",this.frameAnchor=t,this.rotate=-90):(this.textAnchor=t==="right"?"end":"start",this.lineAnchor=z,this.frameAnchor=`${z}-${t}`,this.rotate=0),this.dy=z==="top"?3-O:z==="bottom"?F-3:0,this.dx=t==="right"?H:-H,this.ariaLabel=`${e}-axis label`,{facets:[[0]],channels:{text:{value:[U5(e,B,{anchor:t,label:x,labelAnchor:z,labelArrow:N})]}}}})):null)}function M5(e,t,n,{color:r="currentColor",opacity:i=1,stroke:s=r,strokeOpacity:o=i,strokeWidth:a=1,fill:l=r,fillOpacity:c=i,textAnchor:u,textStroke:f,textStrokeOpacity:d,textStrokeWidth:h,tickSize:p=e==="x"?6:0,tickPadding:g,tickRotate:v,y,margin:m,marginTop:b=m===void 0?t==="top"?30:0:m,marginRight:w=m===void 0?20:m,marginBottom:S=m===void 0?t==="bottom"?30:0:m,marginLeft:_=m===void 0?20:m,label:x,labelAnchor:T,labelArrow:N,labelOffset:I,...A}){return p=jt(p),g=jt(g),v=jt(v),T!==void 0&&(T=Yr(T,"labelAnchor",["center","left","right"])),N=P5(N),Hi(p&&!We(s)?oot(e,t,n,{stroke:s,strokeOpacity:o,strokeWidth:a,tickSize:p,tickPadding:g,tickRotate:v,y,...A}):null,We(l)?null:lot(e,t,n,{fill:l,fillOpacity:c,stroke:f,strokeOpacity:d,strokeWidth:h,textAnchor:u,tickSize:p,tickPadding:g,tickRotate:v,y,marginTop:b,marginRight:w,marginBottom:S,marginLeft:_,...A}),!We(l)&&x!==null?Rf([],R5({fill:l,fillOpacity:c,...A},function(k,R,E,M,$){const B=M[e],{marginTop:O,marginRight:C,marginBottom:F,marginLeft:P}=e==="x"&&$.inset||$,z=T??(B.bandwidth?"center":"right"),H=I??(t==="top"?O:F)-3;return z==="center"?(this.frameAnchor=t,this.textAnchor=void 0):(this.frameAnchor=`${t}-${z}`,this.textAnchor=z==="right"?"end":"start"),this.lineAnchor=t,this.dy=t==="top"?-H:H,this.dx=z==="right"?C-3:z==="left"?3-P:0,this.ariaLabel=`${e}-axis label`,{facets:[[0]],channels:{text:{value:[U5(e,B,{anchor:t,label:x,labelAnchor:z,labelArrow:N})]}}}})):null)}function sot(e,t,n,{strokeWidth:r=1,strokeLinecap:i=null,strokeLinejoin:s=null,facetAnchor:o=t+(e==="y"?"-empty":""),frameAnchor:a=t,tickSize:l,inset:c=0,insetLeft:u=c,insetRight:f=c,dx:d=0,y:h=e==="y"?void 0:null,...p}){return ud(w5,e,t,`${e}-axis tick`,n,{strokeWidth:r,strokeLinecap:i,strokeLinejoin:s,facetAnchor:o,frameAnchor:a,y:h,...p,dx:t==="left"?+d-xn+ +u:+d+xn-f,anchor:"start",length:l,shape:t==="left"?dot:hot})}function oot(e,t,n,{strokeWidth:r=1,strokeLinecap:i=null,strokeLinejoin:s=null,facetAnchor:o=t+(e==="x"?"-empty":""),frameAnchor:a=t,tickSize:l,inset:c=0,insetTop:u=c,insetBottom:f=c,dy:d=0,x:h=e==="x"?void 0:null,...p}){return ud(v5,e,t,`${e}-axis tick`,n,{strokeWidth:r,strokeLinejoin:s,strokeLinecap:i,facetAnchor:o,frameAnchor:a,x:h,...p,dy:t==="bottom"?+d-xn-f:+d+xn+ +u,anchor:"start",length:l,shape:t==="bottom"?uot:fot})}function aot(e,t,n,{facetAnchor:r=t+(e==="y"?"-empty":""),frameAnchor:i=t,tickSize:s,tickRotate:o=0,tickPadding:a=Math.max(3,9-s)+(Math.abs(o)>60?4*Math.cos(o*M1):0),text:l,textAnchor:c=Math.abs(o)>60?"middle":t==="left"?"end":"start",lineAnchor:u=o>60?"top":o<-60?"bottom":"middle",fontVariant:f,inset:d=0,insetLeft:h=d,insetRight:p=d,dx:g=0,y:v=e==="y"?void 0:null,...y}){return ud(l5,e,t,`${e}-axis tick label`,n,{facetAnchor:r,frameAnchor:i,text:l,textAnchor:c,lineAnchor:u,fontVariant:f,rotate:o,y:v,...y,dx:t==="left"?+g-s-a+ +h:+g+ +s+ +a-p},function(m,b,w,S,_){f===void 0&&(this.fontVariant=C5(m)),l===void 0&&(_.text=L5(m,b,w,S,t))})}function lot(e,t,n,{facetAnchor:r=t+(e==="x"?"-empty":""),frameAnchor:i=t,tickSize:s,tickRotate:o=0,tickPadding:a=Math.max(3,9-s)+(Math.abs(o)>=10?4*Math.cos(o*M1):0),text:l,textAnchor:c=Math.abs(o)>=10?o<0^t==="bottom"?"start":"end":"middle",lineAnchor:u=Math.abs(o)>=10?"middle":t==="bottom"?"top":"bottom",fontVariant:f,inset:d=0,insetTop:h=d,insetBottom:p=d,dy:g=0,x:v=e==="x"?void 0:null,...y}){return ud(a5,e,t,`${e}-axis tick label`,n,{facetAnchor:r,frameAnchor:i,text:l===void 0?null:l,textAnchor:c,lineAnchor:u,fontVariant:f,rotate:o,x:v,...y,dy:t==="bottom"?+g+ +s+ +a-p:+g-s-a+ +h},function(m,b,w,S,_){f===void 0&&(this.fontVariant=C5(m)),l===void 0&&(_.text=L5(m,b,w,S,t))})}function $5(){const[e,t]=ul(...arguments);return O5("y",_5(t),e,t)}function N5(){const[e,t]=ul(...arguments);return O5("fy",S5(t),e,t)}function D5(){const[e,t]=ul(...arguments);return F5("x",x5(t),e,t)}function k5(){const[e,t]=ul(...arguments);return F5("fx",I5(t),e,t)}function O5(e,t,n,{y:r=e==="y"?void 0:null,x:i=null,x1:s=t==="left"?i:null,x2:o=t==="right"?i:null,...a}){return ud(Ya,e,t,`${e}-grid`,n,{y:r,x1:s,x2:o,...B5(a)})}function F5(e,t,n,{x:r=e==="x"?void 0:null,y:i=null,y1:s=t==="top"?i:null,y2:o=t==="bottom"?i:null,...a}){return ud(Va,e,t,`${e}-grid`,n,{x:r,y1:s,y2:o,...B5(a)})}function B5({color:e="currentColor",opacity:t=.1,stroke:n=e,strokeOpacity:r=t,strokeWidth:i=1,...s}){return{stroke:n,strokeOpacity:r,strokeWidth:i,...s}}function R5({fill:e,fillOpacity:t,fontFamily:n,fontSize:r,fontStyle:i,fontVariant:s,fontWeight:o,monospace:a,pointerEvents:l,shapeRendering:c,clip:u=!1},f){return[,e]=br(e),[,t]=Ke(t),{facet:"super",x:null,y:null,fill:e,fillOpacity:t,fontFamily:n,fontSize:r,fontStyle:i,fontVariant:s,fontWeight:o,monospace:a,pointerEvents:l,shapeRendering:c,clip:u,initializer:f}}function ud(e,t,n,r,i,s,o){let a;function l(f,d,h,p,g,v){const y=f==null&&(t==="fx"||t==="fy"),{[t]:m}=p;if(!m)throw new Error(`missing scale: ${t}`);const b=m.domain();let{interval:w,ticks:S,tickFormat:_,tickSpacing:x=t==="x"?80:35}=s;if(typeof S=="string"&&z5(m)&&(w=S,S=void 0),S===void 0&&(S=od(w,m.type)??cot(m,x)),f==null){if(Wo(S))f=vr(S);else if(Du(S))f=I_(S,...yn(b));else if(m.interval){let N=m.interval;if(m.ticks){const[I,A]=yn(b),k=(A-I)/N[my];N=_$(N,k/S)??N,f=I_(N,I,A)}else{f=b;const I=f.length;N=_$(N,I/S)??N,N!==m.interval&&(f=I_(N,...yn(f)))}if(N===m.interval){const I=Math.round(f.length/S);I>1&&(f=f.filter((A,k)=>k%I===0))}}else m.ticks?f=m.ticks(S):f=b;if(!m.ticks&&f.length&&f!==b){const N=new ny(b);f=f.filter(I=>N.has(I)),f.length||Mo(`Warning: the ${t}-axis ticks appear to not align with the scale domain, resulting in no ticks. Try different ticks?`)}t==="y"||t==="x"?d=[Yo(f)]:a[t]={scale:t,value:gt}}o==null||o.call(this,m,f,S,_,a);const T=Object.fromEntries(Object.entries(a).map(([N,I])=>[N,{...I,value:Ut(f,I.value)}]));return y&&(d=v.filterFacets(f,T)),{data:f,facets:d,channels:T}}const c=wr(s).initializer,u=e(i,wr({...s,initializer:l},c));return i==null?(a=u.channels,u.channels={}):a={},u.ariaLabel=r,u.clip===void 0&&(u.clip=!1),u}function cot(e,t){const[n,r]=yn(e.range());return(r-n)/t}function L5(e,t,n,r,i){return{value:TE(e,t,n,r,i)}}function TE(e,t,n,r,i){return typeof r=="function"?r:r===void 0&&t&&Kn(t)?Art(t,i)??Tc:e.tickFormat?e.tickFormat(typeof n=="number"?n:null,r):r===void 0?Tc:typeof r=="string"?(Kn(e.domain())?py:id)(r):Ur(r)}function I_(e,t,n){return e.range(t,e.offset(e.floor(n)))}const uot={draw(e,t){e.moveTo(0,0),e.lineTo(0,t)}},fot={draw(e,t){e.moveTo(0,0),e.lineTo(0,-t)}},dot={draw(e,t){e.moveTo(0,0),e.lineTo(-t,0)}},hot={draw(e,t){e.moveTo(0,0),e.lineTo(t,0)}};function C5(e){return e.bandwidth&&!e.interval?void 0:"tabular-nums"}function pot(e){return Math.sign(Bf(e.domain()))*Math.sign(Bf(e.range()))}function U5(e,t,{anchor:n,label:r=t.label,labelAnchor:i,labelArrow:s}={}){if(!(r==null||r.inferred&&z5(t)&&/^(date|time|year)$/i.test(r))){if(r=String(r),s==="auto"&&(s=(!t.bandwidth||t.interval)&&!/[]/.test(r)),!s)return r;if(s===!0){const o=pot(t);o&&(s=/x$/.test(e)||i==="center"?/x$/.test(e)===o<0?"left":"right":o<0?"up":"down")}switch(s){case"left":return` ${r}`;case"right":return`${r} `;case"up":return n==="right"?`${r} `:` ${r}`;case"down":return n==="right"?`${r} `:` ${r}`}return r}}function P5(e="auto"){return We(e)?!1:typeof e=="boolean"?e:Yr(e,"labelArrow",["auto","up","right","down","left"])}function z5(e){return Kn(e.domain())}function X$(e,t){if(t==null)return t;const n=e(t);if(!n)throw new Error(`scale not found: ${t}`);return n}function yot(e,{opacity:t,...n}={}){if(!Fc(e)&&!UC(e))throw new Error(`swatches legend requires ordinal or threshold color scale (not ${e.type})`);return j5(e,n,(r,i,s,o)=>r.append("svg").attr("width",s).attr("height",o).attr("fill",i.scale).attr("fill-opacity",Ke(t)[1]).append("rect").attr("width","100%").attr("height","100%"))}function mot(e,{fill:t=(c=>(c=e.hint)==null?void 0:c.fill)()!==void 0?e.hint.fill:"none",fillOpacity:n=1,stroke:r=(u=>(u=e.hint)==null?void 0:u.stroke)()!==void 0?e.hint.stroke:We(t)?"currentColor":"none",strokeOpacity:i=1,strokeWidth:s=1.5,r:o=4.5,...a}={},l){const[f,d]=br(t),[h,p]=br(r),g=X$(l,f),v=X$(l,h),y=o*o*Math.PI;return n=Ke(n)[1],i=Ke(i)[1],s=Ke(s)[1],j5(e,a,(m,b,w,S)=>m.append("svg").attr("viewBox","-8 -8 16 16").attr("width",w).attr("height",S).attr("fill",f==="color"?_=>g.scale(_):d).attr("fill-opacity",n).attr("stroke",h==="color"?_=>v.scale(_):p).attr("stroke-opacity",i).attr("stroke-width",s).append("path").attr("d",_=>{const x=_o();return e.scale(_).draw(x,y),x}))}function j5(e,t={},n){let{columns:r,tickFormat:i,fontVariant:s=YC(e),swatchSize:o=15,swatchWidth:a=o,swatchHeight:l=o,marginLeft:c=0,className:u,style:f,width:d}=t;const h=Tv(t);u=fE(u),i=TE(e.scale,e.domain,void 0,i);const p=ee("div",h).attr("class",`${u}-swatches ${u}-swatches-${r!=null?"columns":"wrap"}`);let g;return r!=null?(g=`.${u}-swatches-columns .${u}-swatch {
  display: flex;
  align-items: center;
  break-inside: avoid;
  padding-bottom: 1px;
}
.${u}-swatches-columns .${u}-swatch::before {
  flex-shrink: 0;
}
.${u}-swatches-columns .${u}-swatch-label {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}`,p.style("columns",r).selectAll().data(e.domain).enter().append("div").attr("class",`${u}-swatch`).call(n,e,a,l).call(v=>v.append("div").attr("class",`${u}-swatch-label`).attr("title",i).text(i))):(g=`.${u}-swatches-wrap {
  display: flex;
  align-items: center;
  min-height: 33px;
  flex-wrap: wrap;
}
.${u}-swatches-wrap .${u}-swatch {
  display: inline-flex;
  align-items: center;
  margin-right: 1em;
}`,p.selectAll().data(e.domain).enter().append("span").attr("class",`${u}-swatch`).call(n,e,a,l).append(function(){return this.ownerDocument.createTextNode(i.apply(this,arguments))})),p.call(v=>v.insert("style","*").text(`.${u}-swatches {
  font-family: system-ui, sans-serif;
  font-size: 10px;
  margin-bottom: 0.5em;
}
.${u}-swatch > svg {
  margin-right: 0.5em;
  overflow: visible;
}
${g}`)).style("margin-left",c?`${+c}px`:null).style("width",d===void 0?null:`${+d}px`).style("font-variant",Ve(s,"normal")).call(dE,f).node()}const $1=new Map([["symbol",mot],["color",V5],["opacity",vot]]);function got(e={}){for(const[t,n]of $1){const r=e[t];if(ic(r)){const i=Tv(e);let s;if(t==="symbol"){const{fill:o,stroke:a=o===void 0&&ic(e.color)?"color":void 0}=e;s={fill:o,stroke:a}}return n(ZS(t,r,s),AE(i,r,e),o=>ic(e[o])?ZS(o,e[o]):null)}}throw new Error("unknown legend type; no scale found")}function bot(e,t,n={}){return(r,i)=>{if(!$1.has(r))throw new Error(`unknown legend type: ${r}`);if(r in e)return $1.get(r)(e[r],AE(t,n[r],i),s=>e[s])}}function AE({className:e,...t},{label:n,ticks:r,tickFormat:i}={},s){return Vrt(s,{className:e,...t},{label:n,ticks:r,tickFormat:i})}function V5(e,{legend:t=!0,...n}){if(t===!0&&(t=e.type==="ordinal"?"swatches":"ramp"),e.domain!==void 0)switch(`${t}`.toLowerCase()){case"swatches":return yot(e,n);case"ramp":return Cst(e,n);default:throw new Error(`unknown legend type: ${t}`)}}function vot({type:e,interpolate:t,...n},{legend:r=!0,color:i=gi(0,0,0),...s}){if(!t)throw new Error(`${e} opacity scales are not supported`);if(r===!0&&(r="ramp"),`${r}`.toLowerCase()!=="ramp")throw new Error(`${r} opacity legends are not supported`);return V5({type:e,...n,interpolate:wot(i)},{legend:r,...s})}function wot(e){const{r:t,g:n,b:r}=gi(e)||gi(0,0,0);return i=>`rgba(${t},${n},${r},${i})`}function _ot(e,t,n){const r=[];for(const[i,s]of $1){const o=n[i];if(o!=null&&o.legend&&i in e){const a=s(e[i],AE(t,e[i],o),l=>e[l]);a!=null&&r.push(a)}}return r}const Sot={ariaLabel:"frame",fill:"none",stroke:"currentColor",clip:!1},xot={ariaLabel:"frame",fill:null,stroke:"currentColor",strokeLinecap:"square",clip:!1};class Y5 extends ve{constructor(t={}){const{anchor:n=null,inset:r=0,insetTop:i=r,insetRight:s=r,insetBottom:o=r,insetLeft:a=r,rx:l,ry:c}=t;super(Dh,void 0,t,n==null?Sot:xot),this.anchor=KL(n,"anchor",["top","right","bottom","left"]),this.insetTop=jt(i),this.insetRight=jt(s),this.insetBottom=jt(o),this.insetLeft=jt(a),this.rx=jt(l),this.ry=jt(c)}render(t,n,r,i,s){const{marginTop:o,marginRight:a,marginBottom:l,marginLeft:c,width:u,height:f}=i,{anchor:d,insetTop:h,insetRight:p,insetBottom:g,insetLeft:v,rx:y,ry:m}=this,b=c+v,w=u-a-p,S=o+h,_=f-l-g;return ee(d?"svg:line":"svg:rect",s).datum(0).call(Ne,this,i,s).call(Ee,this).call(fn,this,r).call(be,this,{}).call(d==="left"?x=>x.attr("x1",b).attr("x2",b).attr("y1",S).attr("y2",_):d==="right"?x=>x.attr("x1",w).attr("x2",w).attr("y1",S).attr("y2",_):d==="top"?x=>x.attr("x1",b).attr("x2",w).attr("y1",S).attr("y2",S):d==="bottom"?x=>x.attr("x1",b).attr("x2",w).attr("y1",_).attr("y2",_):x=>x.attr("x",b).attr("y",S).attr("width",w-b).attr("height",_-S).attr("rx",y).attr("ry",m)).node()}}function ME(e){return new Y5(e)}const E_={ariaLabel:"tip",fill:"white",stroke:"currentColor"},Iot=new Set(["geometry","href","src","ariaLabel","scales"]);class q5 extends ve{constructor(t,n={}){n.tip&&(n={...n,tip:!1}),n.title===void 0&&Wo(t)&&rC(t)&&(n={...n,title:gt});const{x:r,y:i,x1:s,x2:o,y1:a,y2:l,anchor:c,monospace:u,fontFamily:f=u?"ui-monospace, monospace":void 0,fontSize:d,fontStyle:h,fontVariant:p,fontWeight:g,lineHeight:v=1,lineWidth:y=20,frameAnchor:m,format:b,textAnchor:w="start",textOverflow:S,textPadding:_=8,title:x,pointerSize:T=12,pathFilter:N="drop-shadow(0 3px 4px rgba(0,0,0,0.2))"}=n;super(t,{x:{value:s!=null&&o!=null?null:r,scale:"x",optional:!0},y:{value:a!=null&&l!=null?null:i,scale:"y",optional:!0},x1:{value:s,scale:"x",optional:o==null},y1:{value:a,scale:"y",optional:l==null},x2:{value:o,scale:"x",optional:s==null},y2:{value:l,scale:"y",optional:a==null},title:{value:x,optional:!0}},n,E_),this.anchor=iC(c,"anchor"),this.previousAnchor=this.anchor??"top-left",this.frameAnchor=wy(m),this.textAnchor=Ve(w,"middle"),this.textPadding=+_,this.pointerSize=+T,this.pathFilter=Fn(N),this.lineHeight=+v,this.lineWidth=+y,this.textOverflow=o5(S),this.monospace=!!u,this.fontFamily=Fn(f),this.fontSize=jt(d),this.fontStyle=Fn(h),this.fontVariant=Fn(p),this.fontWeight=Fn(g);for(const I in E_)I in this.channels&&(this[I]=E_[I]);this.splitLines=u5(this),this.clipLine=f5(this),this.format={...b}}render(t,n,r,i,s){const o=this,{x:a,y:l,fx:c,fy:u}=n,{ownerSVGElement:f,document:d}=s,{anchor:h,monospace:p,lineHeight:g,lineWidth:v}=this,{textPadding:y,pointerSize:m,pathFilter:b}=this,{marginTop:w,marginLeft:S}=i,{x1:_,y1:x,x2:T,y2:N,x:I=_??T,y:A=x??N}=r,k=c?c(t.fx)-S:0,R=u?u(t.fy)-w:0,[E,M]=qs(this,i),$=jC(r,E),B=VC(r,M),O=p?xE:SE,C=O(Zu);let F,P;"title"in r?(F=r.channels,P=$ot):(F=Mot.call(this,r,n),P=Not);const z=ee("svg:g",s).call(Ne,this,i,s).call(c5,this).call(be,this,{x:I&&a,y:A&&l}).call(tt=>tt.selectAll().data(t).enter().append("g").attr("transform",Z=>`translate(${Math.round($(Z))},${Math.round(B(Z))})`).call(Ee,this).call(Z=>Z.append("path").attr("filter",b)).call(Z=>Z.append("text").each(function(Y){const Q=ye(this);this.setAttribute("fill","currentColor"),this.setAttribute("fill-opacity",1),this.setAttribute("stroke","none");const V=P.call(o,Y,t,F,n,r);if(typeof V=="string")for(const J of o.splitLines(V))H(Q,{value:o.clipLine(J)});else{const J=new Set;for(const et of V){const{label:j=""}=et;j&&J.has(j)||(J.add(j),H(Q,et))}}})));function H(tt,{label:Z,value:Y,color:Q,opacity:V}){Z??(Z=""),Y??(Y="");const J=Q!=null||V!=null;let et,j=v*100;const[At]=Lf(Z,j,O,C);if(At>=0)Z=Z.slice(0,At).trimEnd()+Zu,et=Y.trim(),Y="";else{(Z||!Y&&!J)&&(Y=" "+Y);const[Vt]=Lf(Y,j-O(Z),O,C);Vt>=0&&(Y=Y.slice(0,Vt).trimEnd()+Zu,et=Y.trim())}const ot=tt.append("tspan").attr("x",0).attr("dy",`${g}em`).text("");Z&&ot.append("tspan").attr("font-weight","bold").text(Z),Y&&ot.append(()=>d.createTextNode(Y)),J&&ot.append("tspan").text(" ").attr("fill",Q).attr("fill-opacity",V).style("user-select","none"),et&&ot.append("title").text(et)}function X(){const{width:tt,height:Z}=i.facet??i;z.selectChildren().each(function(Y){let{x:Q,width:V,height:J}=this.getBBox();V=Math.round(V),J=Math.round(J);let et=h;if(et===void 0){et=o.previousAnchor;const ot=$(Y)+k,Vt=B(Y)+R,Ht=ot+V+y*2<tt,st=ot-V-y*2>0,de=Vt+J+m+y*2+7<Z,Ji=Vt-J-m-y*2>0,qr=(/-left$/.test(et)?Ht||!st:Ht&&!st)?"left":"right",Zv=(/^top-/.test(et)?de||!Ji:de&&!Ji)?"top":"bottom";et=o.previousAnchor=`${Zv}-${qr}`}const j=this.firstChild,At=this.lastChild;if(j.setAttribute("d",Aot(et,m,y,V,J)),Q)for(const ot of At.childNodes)ot.setAttribute("x",-Q);At.setAttribute("y",`${+Eot(et,At.childNodes.length,g).toFixed(6)}em`),At.setAttribute("transform",`translate(${Tot(et,m,y,V,J)})`)}),z.attr("visibility",null)}return t.length&&(z.attr("visibility","hidden"),f.isConnected?Promise.resolve().then(X):typeof requestAnimationFrame<"u"&&requestAnimationFrame(X)),z.node()}}function W5(e,{x:t,y:n,...r}={}){return r.frameAnchor===void 0&&([t,n]=Ki(t,n)),new q5(e,{...r,x:t,y:n})}function Eot(e,t,n){return/^top(?:-|$)/.test(e)?.94-n:-.29-t*n}function Tot(e,t,n,r,i){switch(e){case"middle":return[-r/2,i/2];case"top-left":return[n,t+n];case"top":return[-r/2,t/2+n];case"top-right":return[-r-n,t+n];case"right":return[-t/2-r-n,i/2];case"bottom-left":return[n,-t-n];case"bottom":return[-r/2,-t/2-n];case"bottom-right":return[-r-n,-t-n];case"left":return[n+t/2,i/2]}}function Aot(e,t,n,r,i){const s=r+n*2,o=i+n*2;switch(e){case"middle":return`M${-s/2},${-o/2}h${s}v${o}h${-s}z`;case"top-left":return`M0,0l${t},${t}h${s-t}v${o}h${-s}z`;case"top":return`M0,0l${t/2},${t/2}h${(s-t)/2}v${o}h${-s}v${-o}h${(s-t)/2}z`;case"top-right":return`M0,0l${-t},${t}h${t-s}v${o}h${s}z`;case"right":return`M0,0l${-t/2},${-t/2}v${t/2-o/2}h${-s}v${o}h${s}v${t/2-o/2}z`;case"bottom-left":return`M0,0l${t},${-t}h${s-t}v${-o}h${-s}z`;case"bottom":return`M0,0l${t/2},${-t/2}h${(s-t)/2}v${-o}h${-s}v${o}h${(s-t)/2}z`;case"bottom-right":return`M0,0l${-t},${-t}h${t-s}v${-o}h${s}z`;case"left":return`M0,0l${t/2},${-t/2}v${t/2-o/2}h${s}v${o}h${-s}v${t/2-o/2}z`}}function Mot({channels:e},t){var i,s;const n={};let r=this.format;r=Q$(r,e,"x"),r=Q$(r,e,"y"),this.format=r;for(const o in r){const a=r[o];if(!(a===null||a===!1))if(o==="fx"||o==="fy")n[o]=!0;else{const l=GS(e,o);l&&(n[o]=l)}}for(const o in e){if(o in n||o in r||Iot.has(o))continue;const a=GS(e,o);a&&(n[o]=a)}this.facet&&(t.fx&&!("fx"in r)&&(n.fx=!0),t.fy&&!("fy"in r)&&(n.fy=!0));for(const o in n){const a=this.format[o];if(typeof a=="string"){const l=((i=n[o])==null?void 0:i.value)??((s=t[o])==null?void 0:s.domain())??[];this.format[o]=(Kn(l)?py:id)(a)}else if(a===void 0||a===!0){const l=t[o];this.format[o]=l!=null&&l.bandwidth?TE(l,l.domain()):Tc}}return n}function Q$(e,t,n){if(!(n in e))return e;const r=`${n}1`,i=`${n}2`;if((r in e||!(r in t))&&(i in e||!(i in t)))return e;const s=Object.entries(e),o=e[n];return s.splice(s.findIndex(([a])=>a===n)+1,0,[r,o],[i,o]),Object.fromEntries(s)}function $ot(e,t,{title:n}){return Tc(n.value[e],e)}function*Not(e,t,n,r,i){for(const s in n){if(s==="fx"||s==="fy"){yield{label:N1(r,n,s),value:this.format[s](t[s],e)};continue}if(s==="x1"&&"x2"in n||s==="y1"&&"y2"in n)continue;const o=n[s];if(s==="x2"&&"x1"in n)yield{label:Z$(r,n,"x"),value:K$(this.format.x2,n.x1,o,e)};else if(s==="y2"&&"y1"in n)yield{label:Z$(r,n,"y"),value:K$(this.format.y2,n.y1,o,e)};else{const a=o.value[e],l=o.scale;if(!Gn(a)&&l==null)continue;yield{label:N1(r,n,s),value:this.format[s](a,e),color:l==="color"?i[s][e]:null,opacity:l==="opacity"?i[s][e]:null}}}}function K$(e,t,n,r){var i;return(i=n.hint)!=null&&i.length?`${e(n.value[r]-t.value[r],r)}`:`${e(t.value[r],r)}${e(n.value[r],r)}`}function Z$(e,t,n){const r=N1(e,t,`${n}1`,n),i=N1(e,t,`${n}2`,n);return r===i?r:`${r}${i}`}function N1(e,t,n,r=n){const i=t[n],s=e[(i==null?void 0:i.scale)??n];return String((s==null?void 0:s.label)??(i==null?void 0:i.label)??r)}function $E(e={}){var C;const{facet:t,style:n,title:r,subtitle:i,caption:s,ariaLabel:o,ariaDescription:a}=e,l=fE(e.className),c=e.marks===void 0?[]:tN(e.marks);c.push(...Cot(c));const u=Rot(t,e),f=new Map;for(const F of c){const P=eN(F,u,e);P&&f.set(F,P)}const d=new Map;u&&Ud(d,[u],e),Ud(d,f,e);const h=tN(Uot(c,d,e));for(const F of h){const P=eN(F,u,e);P&&f.set(F,P)}c.unshift(...h);let p=Ist(d,e);if(p!==void 0){const F=u?S_(p,u):void 0;for(const z of c){if(z.facet===null||z.facet==="super")continue;const H=f.get(z);H!==void 0&&(H.facetsIndex=z.fx!=null||z.fy!=null?S_(p,H):F)}const P=new Set;for(const{facetsIndex:z}of f.values())z==null||z.forEach((H,X)=>{(H==null?void 0:H.length)>0&&P.add(X)});p.forEach(0<P.size&&P.size<p.length?(z,H)=>z.empty=!P.has(H):z=>z.empty=!1);for(const z of c)if(z.facet==="exclude"){const H=f.get(z);H!==void 0&&(H.facetsIndex=Ast(H.facetsIndex))}}for(const F of Le.keys())ic(e[F])&&F!=="fx"&&F!=="fy"&&d.set(F,[]);const g=new Map;for(const F of c){if(g.has(F))throw new Error("duplicate mark; each mark must be unique");const{facetsIndex:P,channels:z}=f.get(F)??{},{data:H,facets:X,channels:tt}=F.initialize(P,z,e);NE(tt,e),g.set(F,{data:H,facets:X,channels:tt})}const v=KS(Ud(d,g,e),e),y=Sst(v,c,e);yst(v,y);const m=R$(v),{fx:b,fy:w}=m,S=b||w?BC(v,y):y,_=b||w?Wot(m,y):y,x=Tv(e),T=x.document,N=Qb("svg").call(T.documentElement);let I=N;x.ownerSVGElement=N,x.className=l,x.projection=$it(e,S),x.filterFacets=(F,P)=>S_(p,{channels:P,groups:gE(F,P)}),x.getMarkState=F=>{const P=g.get(F),z=f.get(F);return{...P,channels:{...P.channels,...z==null?void 0:z.channels}}},x.dispatchValue=F=>{I.value!==F&&(I.value=F,I.dispatchEvent(new Event("input",{bubbles:!0})))};const A=new Set;for(const[F,P]of g)if(F.initializer!=null){const z=F.facet==="super"?_:S,H=F.initializer(P.data,P.facets,P.channels,m,z,x);if(H.data!==void 0&&(P.data=H.data),H.facets!==void 0&&(P.facets=H.facets),H.channels!==void 0){const{fx:X,fy:tt,...Z}=H.channels;Bot(Z),Object.assign(P.channels,Z);for(const Y of Object.values(Z)){const{scale:Q}=Y;Q!=null&&!qrt(Le.get(Q))&&(H5(Y,e),A.add(Q))}(X!=null||tt!=null)&&f.set(F,!0)}}if(A.size){const F=new Map;Ud(F,g,e,X=>A.has(X)),Ud(d,g,e,X=>A.has(X));const P=qot(KS(F,e),v),{scales:z,...H}=R$(P);Object.assign(v,P),Object.assign(m,H),Object.assign(m.scales,z)}let k,R;p!==void 0&&(k={x:b==null?void 0:b.domain(),y:w==null?void 0:w.domain()},p=Est(p,k),R=Tst(b,w,y));for(const[F,P]of g)P.values=F.scale(P.channels,m,x);const{width:E,height:M}=y;ye(N).attr("class",l).attr("fill","currentColor").attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("text-anchor","middle").attr("width",E).attr("height",M).attr("viewBox",`0 0 ${E} ${M}`).attr("aria-label",o).attr("aria-description",a).call(F=>F.append("style").text(`.${l} {
  display: block;
  background: white;
  height: auto;
  height: intrinsic;
  max-width: 100%;
}
.${l} text,
.${l} tspan {
  white-space: pre;
}`)).call(dE,n);for(const F of c){const{channels:P,values:z,facets:H}=g.get(F);if(p===void 0||F.facet==="super"){let X=null;if(H&&(X=H[0],X=F.filter(X,P,z),X.length===0))continue;const tt=F.render(X,m,z,_,x);if(tt==null)continue;N.appendChild(tt)}else{let X;for(const tt of p){if(!(((C=F.facetAnchor)==null?void 0:C.call(F,p,k,tt))??!tt.empty))continue;let Z=null;if(H){const Q=f.has(F);if(Z=H[Q?tt.i:0],Z=F.filter(Z,P,z),Z.length===0)continue;!Q&&Z===H[0]&&(Z=sc(Z)),Z.fx=tt.x,Z.fy=tt.y,Z.fi=tt.i}const Y=F.render(Z,m,z,S,x);if(Y!=null){(X??(X=ye(N).append("g"))).append(()=>Y).datum(tt);for(const Q of["aria-label","aria-description","aria-hidden","transform"])Y.hasAttribute(Q)&&(X.attr(Q,Y.getAttribute(Q)),Y.removeAttribute(Q))}}X==null||X.selectChildren().attr("transform",R)}}const $=_ot(v,x,e),{figure:B=r!=null||i!=null||s!=null||$.length>0}=e;B&&(I=T.createElement("figure"),I.className=`${l}-figure`,I.style.maxWidth="initial",r!=null&&I.append(J$(T,r,"h2")),i!=null&&I.append(J$(T,i,"h3")),I.append(...$,N),s!=null&&I.append(Dot(T,s))),I.scale=_st(m.scales),I.legend=bot(v,x,e);const O=vit();return O>0&&ye(N).append("text").attr("x",E).attr("y",20).attr("dy","-1em").attr("text-anchor","end").attr("font-family","initial").text("").append("title").text(`${O.toLocaleString("en-US")} warning${O===1?"":"s"}. Please check the console.`),I}function J$(e,t,n){if(t.ownerDocument)return t;const r=e.createElement(n);return r.append(t),r}function Dot(e,t){const n=e.createElement("figcaption");return n.append(t),n}function kot({marks:e=[],...t}={}){return $E({...t,marks:[...e,this]})}ve.prototype.plot=kot;function tN(e){return e.flat(1/0).filter(t=>t!=null).map(Oot)}function Oot(e){return typeof e.render=="function"?e:new Fot(e)}class Fot extends ve{constructor(t){if(typeof t!="function")throw new TypeError("invalid mark; missing render function");super(),this.render=t}render(){}}function NE(e,t){for(const n in e)H5(e[n],t);return e}function H5(e,t){const{scale:n,transform:r=!0}=e;if(n==null||!r)return;const{type:i,percent:s,interval:o,transform:a=s?l=>l*100:nC(o,i)}=t[n]??{};a!=null&&(e.value=_e(e.value,a),e.transform=!1)}function Bot(e){for(const t in e)dC(t,e[t])}function Ud(e,t,n,r=Drt){var i,s;for(const{channels:o}of t.values())for(const a in o){const l=o[a],{scale:c}=l;if(c!=null&&r(c))if(c==="projection"){if(!kit(n)){const u=((i=n.x)==null?void 0:i.domain)===void 0,f=((s=n.y)==null?void 0:s.domain)===void 0;if(u||f){const[d,h]=Fit(l);u&&T_(e,"x",d),f&&T_(e,"y",h)}}}else T_(e,c,l)}return e}function T_(e,t,n){const r=e.get(t);r!==void 0?r.push(n):e.set(t,[n])}function Rot(e,t){if(e==null)return;const{x:n,y:r}=e;if(n==null&&r==null)return;const i=vr(e.data);if(i==null)throw new Error("missing facet data");const s={};n!=null&&(s.fx=Ep(i,{value:n,scale:"fx"})),r!=null&&(s.fy=Ep(i,{value:r,scale:"fy"})),NE(s,t);const o=gE(i,s);return{channels:s,groups:o,data:e.data}}function eN(e,t,n){var l;if(e.facet===null||e.facet==="super")return;const{fx:r,fy:i}=e;if(r!=null||i!=null){const c=vr(e.data??r??i);if(c===void 0)throw new Error(`missing facet data in ${e.ariaLabel}`);if(c===null)return;const u={};return r!=null&&(u.fx=Ep(c,{value:r,scale:"fx"})),i!=null&&(u.fy=Ep(c,{value:i,scale:"fy"})),NE(u,n),{channels:u,groups:gE(c,u)}}if(t===void 0)return;const{channels:s,groups:o,data:a}=t;if(e.facet!=="auto"||e.data===a)return{channels:s,groups:o};a.length>0&&(o.size>1||o.size===1&&s.fx&&s.fy&&[...o][0][1].size>1)&&((l=vr(e.data))==null?void 0:l.length)===a.length&&Mo(`Warning: the ${e.ariaLabel} mark appears to use faceted data, but isnt faceted. The mark data has the same length as the facet data and the mark facet option is "auto", but the mark data and facet data are distinct. If this mark should be faceted, set the mark facet option to true; otherwise, suppress this warning by setting the mark facet option to false.`)}function Lot(e,t={}){return wr({...t,x:null,y:null},(n,r,i,s,o,a)=>a.getMarkState(e))}function Cot(e){const t=[];for(const n of e){let r=n.tip;if(r){r===!0?r={}:typeof r=="string"&&(r={pointer:r});let{pointer:i}=r;i=/^x$/i.test(i)?wE:/^y$/i.test(i)?_E:vE,r=i(Lot(n,r)),r.title=null;const s=W5(n.data,r);s.facet=n.facet,s.facetAnchor=n.facetAnchor,t.push(s)}}return t}function Uot(e,t,n){let{projection:r,x:i={},y:s={},fx:o={},fy:a={},axis:l,grid:c,facet:u={},facet:{axis:f=l,grid:d}=u,x:{axis:h=l,grid:p=h===null?null:c}=i,y:{axis:g=l,grid:v=g===null?null:c}=s,fx:{axis:y=f,grid:m=y===null?null:d}=o,fy:{axis:b=f,grid:w=b===null?null:d}=a}=n;(r||!ic(i)&&!nN("x",e))&&(h=p=null),(r||!ic(s)&&!nN("y",e))&&(g=v=null),t.has("fx")||(y=m=null),t.has("fy")||(b=w=null),h===void 0&&(h=!k0(e,"x")),g===void 0&&(g=!k0(e,"y")),y===void 0&&(y=!k0(e,"fx")),b===void 0&&(b=!k0(e,"fy")),h===!0&&(h="bottom"),g===!0&&(g="left"),y===!0&&(y=h==="top"||h===null?"bottom":"top"),b===!0&&(b=g==="right"||g===null?"left":"right");const S=[];return D0(S,w,N5,a),N0(S,b,E5,"right","left",u,a),D0(S,m,k5,o),N0(S,y,T5,"top","bottom",u,o),D0(S,v,$5,s),N0(S,g,IE,"left","right",n,s),D0(S,p,D5,i),N0(S,h,EE,"bottom","top",n,i),S}function N0(e,t,n,r,i,s,o){if(!t)return;const a=Pot(t);o=zot(a?r:t,s,o);const{line:l}=o;(n===IE||n===EE)&&l&&!Ff(l)&&e.push(ME(jot(o))),e.push(n(o)),a&&e.push(n({...o,anchor:i,label:null}))}function D0(e,t,n,r){!t||Ff(t)||e.push(n(Vot(t,r)))}function Pot(e){return/^\s*both\s*$/i.test(e)}function zot(e,t,{line:n=t.line,ticks:r,tickSize:i,tickSpacing:s,tickPadding:o,tickFormat:a,tickRotate:l,fontVariant:c,ariaLabel:u,ariaDescription:f,label:d=t.label,labelAnchor:h,labelArrow:p=t.labelArrow,labelOffset:g}){return{anchor:e,line:n,ticks:r,tickSize:i,tickSpacing:s,tickPadding:o,tickFormat:a,tickRotate:l,fontVariant:c,ariaLabel:u,ariaDescription:f,label:d,labelAnchor:h,labelArrow:p,labelOffset:g}}function jot(e){const{anchor:t,line:n}=e;return{anchor:t,facetAnchor:t+"-empty",stroke:n===!0?void 0:n}}function Vot(e,{stroke:t=vy(e)?e:void 0,ticks:n=Yot(e)?e:void 0,tickSpacing:r,ariaLabel:i,ariaDescription:s}){return{stroke:t,ticks:n,tickSpacing:r,ariaLabel:i,ariaDescription:s}}function Yot(e){switch(typeof e){case"number":return!0;case"string":return!vy(e)}return Wo(e)||typeof(e==null?void 0:e.range)=="function"}function k0(e,t){const n=`${t}-axis `;return e.some(r=>{var i;return(i=r.ariaLabel)==null?void 0:i.startsWith(n)})}function nN(e,t){for(const n of t)for(const r in n.channels){const{scale:i}=n.channels[r];if(i===e||i==="projection")return!0}return!1}function qot(e,t){for(const n in e){const r=e[n],i=t[n];r.label===void 0&&i&&(r.label=i.label)}return e}function Wot({fx:e,fy:t},n){const{marginTop:r,marginRight:i,marginBottom:s,marginLeft:o,width:a,height:l}=mE(n),c=e&&rN(e),u=t&&rN(t);return{marginTop:t?u[0]:r,marginRight:e?a-c[1]:i,marginBottom:t?l-u[1]:s,marginLeft:e?c[0]:o,inset:{marginTop:n.marginTop,marginRight:n.marginRight,marginBottom:n.marginBottom,marginLeft:n.marginLeft},width:a,height:l}}function rN(e){const t=e.domain();let n=e(t[0]),r=e(t[t.length-1]);return r<n&&([n,r]=[r,n]),[n,r+e.bandwidth()]}const Hot=new Map([["basis",ert],["basis-closed",nrt],["basis-open",rrt],["bundle",irt],["bump-x",Ynt],["bump-y",qnt],["cardinal",srt],["cardinal-closed",ort],["cardinal-open",art],["catmull-rom",lrt],["catmull-rom-closed",crt],["catmull-rom-open",urt],["linear",yy],["linear-closed",frt],["monotone-x",drt],["monotone-y",hrt],["natural",prt],["step",yrt],["step-after",grt],["step-before",mrt]]);function DE(e=yy,t){if(typeof e=="function")return e;const n=Hot.get(`${e}`.toLowerCase());if(!n)throw new Error(`unknown curve: ${e}`);if(t!==void 0){if("beta"in n)return n.beta(t);if("tension"in n)return n.tension(t);if("alpha"in n)return n.alpha(t)}return n}function G5(e=Cf,t){return typeof e!="function"&&`${e}`.toLowerCase()==="auto"?Cf:DE(e,t)}function Cf(e){return yy(e)}function pa(e={y:"count"},t={}){[e,t]=BE(e,t);const{x:n,y:r}=t;return FE(D1(n,t,gt),null,null,r,e,Ay(t))}function ya(e={x:"count"},t={}){[e,t]=BE(e,t);const{x:n,y:r}=t;return FE(null,D1(r,t,gt),n,null,e,My(t))}function Fl(e={fill:"count"},t={}){[e,t]=BE(e,t);const{x:n,y:r}=Got(t);return FE(n,r,null,null,e,Ay(My(t)))}function X5(e,t,n={}){if((n==null?void 0:n.interval)==null)return n;const{reduce:r=aE}=n,i={filter:null};return n[t]!=null&&(i[t]=r),n[`${t}1`]!=null&&(i[`${t}1`]=r),n[`${t}2`]!=null&&(i[`${t}2`]=r),e(i,n)}function kE(e={}){return X5(pa,"y",ad(e,"x"))}function OE(e={}){return X5(ya,"x",ad(e,"y"))}function FE(e,t,n,r,{data:i=oE,filter:s=T1,sort:o,reverse:a,...l}={},c={}){e=iN(e),t=iN(t),l=Xot(l,c),i=J5(i,gt),o=o==null?void 0:K5("sort",o,c),s=s==null?void 0:Z5("filter",s,c),n!=null&&ba(l,"x","x1","x2")&&(n=null),r!=null&&ba(l,"y","y1","y2")&&(r=null);const[u,f]=er(e),[d,h]=er(e),[p,g]=er(t),[v,y]=er(t),[m,b]=n!=null?[n,"x"]:r!=null?[r,"y"]:[],[w,S]=er(m),{x:_,y:x,z:T,fill:N,stroke:I,x1:A,x2:k,y1:R,y2:E,domain:M,cumulative:$,thresholds:B,interval:O,...C}=c,[F,P]=er(T),[z]=br(N),[H]=br(I),[X,tt]=er(z),[Z,Y]=er(H);return{..."z"in c&&{z:F||T},..."fill"in c&&{fill:X||N},..."stroke"in c&&{stroke:Z||I},...Ys(C,(Q,V,J)=>{const et=E1(Ut(Q,m),J==null?void 0:J[b]),j=Ut(Q,T),At=Ut(Q,z),ot=Ut(Q,H),Vt=sE(l,{z:j,fill:At,stroke:ot}),Ht=[],st=[],de=et&&S([]),Ji=j&&P([]),qr=At&&tt([]),Zv=ot&&Y([]),VT=e&&f([]),cz=e&&h([]),YT=t&&g([]),uz=t&&y([]),fz=Zot(e==null?void 0:e(Q),t==null?void 0:t(Q));let dz=0;for(const Rc of l)Rc.initialize(Q);o&&o.initialize(Q),s&&s.initialize(Q);for(const Rc of V){const qT=[];for(const wd of l)wd.scope("facet",Rc);o&&o.scope("facet",Rc),s&&s.scope("facet",Rc);for(const[wd,hz]of Ku(Rc,Vt))for(const[pz,Py]of Ku(hz,et))for(const[ts,yl]of fz(Py))if(!(s&&!s.reduce(ts,yl))){qT.push(dz++),st.push(i.reduceIndex(ts,Q,yl)),et&&de.push(pz),j&&Ji.push(Vt===j?wd:j[(ts.length>0?ts:Py)[0]]),At&&qr.push(Vt===At?wd:At[(ts.length>0?ts:Py)[0]]),ot&&Zv.push(Vt===ot?wd:ot[(ts.length>0?ts:Py)[0]]),VT&&(VT.push(yl.x1),cz.push(yl.x2)),YT&&(YT.push(yl.y1),uz.push(yl.y2));for(const yz of l)yz.reduce(ts,yl);o&&o.reduce(ts)}Ht.push(qT)}return uC(Ht,o,a),{data:st,facets:Ht}}),...!ba(l,"x")&&(u?{x1:u,x2:d,x:I1(u,d)}:{x:_,x1:A,x2:k}),...!ba(l,"y")&&(p?{y1:p,y2:v,y:I1(p,v)}:{y:x,y1:R,y2:E}),...w&&{[b]:w},...Object.fromEntries(l.map(({name:Q,output:V})=>[Q,V]))}}function BE({cumulative:e,domain:t,thresholds:n,interval:r,...i},s){return[i,{cumulative:e,domain:t,thresholds:n,interval:r,...s}]}function D1(e,{cumulative:t,domain:n,thresholds:r,interval:i},s){return e={...by(e)},e.domain===void 0&&(e.domain=n),e.cumulative===void 0&&(e.cumulative=t),e.thresholds===void 0&&(e.thresholds=r),e.interval===void 0&&(e.interval=i),e.value===void 0&&(e.value=s),e.thresholds=Q5(e.thresholds,e.interval),e}function Got(e){let{x:t,y:n}=e;return t=D1(t,e),n=D1(n,e),[t.value,n.value]=Ki(t.value,n.value),{x:t,y:n}}function iN(e){if(e==null)return;const{value:t,cumulative:n,domain:r=yn,thresholds:i}=e,s=o=>{let a=Ut(o,t),l;if(Kn(a)||Kot(i)){a=_e(a,QL,Float64Array);let[u,f]=typeof r=="function"?r(a):r,d=typeof i=="function"&&!Du(i)?i(a,u,f):i;typeof d=="number"&&(d=XB(u,f,d)),Du(d)&&(r===yn&&(u=d.floor(u),f=d.offset(d.floor(f))),d=d.range(u,d.offset(f))),l=d}else{a=lr(a);let[u,f]=typeof r=="function"?r(a):r,d=typeof i=="function"&&!Du(i)?i(a,u,f):i;if(typeof d=="number")if(r===yn){let h=up(u,f,d);if(isFinite(h))if(h>0){let p=Math.round(u/h),g=Math.round(f/h);p*h<=u||--p,g*h>f||++g;let v=g-p+1;d=new Float64Array(v);for(let y=0;y<v;++y)d[y]=(p+y)*h}else if(h<0){h=-h;let p=Math.round(u*h),g=Math.round(f*h);p/h<=u||--p,g/h>f||++g;let v=g-p+1;d=new Float64Array(v);for(let y=0;y<v;++y)d[y]=(p+y)/h}else d=[u];else d=[u]}else d=Ca(u,f,d);else Du(d)&&(r===yn&&(u=d.floor(u),f=d.offset(d.floor(f))),d=d.range(u,d.offset(f)));l=d}const c=[];if(l.length===1)c.push([l[0],l[0]]);else for(let u=1;u<l.length;++u)c.push([l[u-1],l[u]]);return c.bin=(n<0?tat:n>0?Jot:RE)(c,l,a),c};return s.label=qo(t),s}function Q5(e,t,n=sN){if(e===void 0)return t===void 0?n:od(t);if(typeof e=="string"){switch(e.toLowerCase()){case"freedman-diaconis":return $G;case"scott":return ZO;case"sturges":return l3;case"auto":return sN}return z3(e)}return e}function Xot(e,t){return nE(e,t,K5)}function K5(e,t,n){return rE(e,t,n,Z5)}function Z5(e,t,n){return iE(e,t,n,J5)}function J5(e,t){return Ev(e,t,Qot)}function Qot(e){switch(`${e}`.toLowerCase()){case"x":return eat;case"x1":return rat;case"x2":return iat;case"y":return nat;case"y1":return sat;case"y2":return oat}throw new Error(`invalid bin reduce: ${e}`)}function sN(e,t,n){return Math.min(200,ZO(e,t,n))}function Kot(e){return Brt(e)||Wo(e)&&Kn(e)}function Zot(e,t){return e&&t?function*(n){const r=e.bin(n);for(const[i,[s,o]]of e.entries()){const a=t.bin(r[i]);for(const[l,[c,u]]of t.entries())yield[a[l],{x1:s,y1:c,x2:o,y2:u}]}}:e?function*(n){const r=e.bin(n);for(const[i,[s,o]]of e.entries())yield[r[i],{x1:s,x2:o}]}:function*(n){const r=t.bin(n);for(const[i,[s,o]]of t.entries())yield[r[i],{y1:s,y2:o}]}}function RE(e,t,n){return t=lr(t),r=>{var s;const i=e.map(()=>[]);for(const o of r)(s=i[qb(t,n[o])-1])==null||s.push(o);return i}}function Jot(e,t,n){const r=RE(e,t,n);return i=>{const s=r(i);for(let o=1,a=s.length;o<a;++o){const l=s[o-1],c=s[o];for(const u of l)c.push(u)}return s}}function tat(e,t,n){const r=RE(e,t,n);return i=>{const s=r(i);for(let o=s.length-2;o>=0;--o){const a=s[o+1],l=s[o];for(const c of a)l.push(c)}return s}}function t7(e,t){const n=(+e+ +t)/2;return e instanceof Date?new Date(n):n}const eat={reduceIndex(e,t,{x1:n,x2:r}){return t7(n,r)}},nat={reduceIndex(e,t,{y1:n,y2:r}){return t7(n,r)}},rat={reduceIndex(e,t,{x1:n}){return n}},iat={reduceIndex(e,t,{x2:n}){return n}},sat={reduceIndex(e,t,{y1:n}){return n}},oat={reduceIndex(e,t,{y2:n}){return n}};function LE(e={}){return ZL(e)?e:{...e,x:gt}}function CE(e={}){return JL(e)?e:{...e,y:gt}}function aat(e,t){if(t.length===1)return{data:e,facets:t};const n=e.length,r=new Uint8Array(n);let i=0;for(const a of t)for(const l of a)r[l]&&++i,r[l]=1;if(i===0)return{data:e,facets:t};e=Sp(e);const s=e[GL]=new Uint32Array(n+i);t=t.map(a=>Sp(a,Uint32Array));let o=n;r.fill(0);for(const a of t)for(let l=0,c=a.length;l<c;++l){const u=a[l];r[u]?(a[l]=o,e[o]=e[u],s[o]=u,++o):s[u]=u,r[u]=1}return{data:e,facets:t}}function e7(e={},t={}){arguments.length===1&&([e,t]=fd(e));const{y1:n,y:r=n,x:i,...s}=t,[o,a,l,c]=dd(r,i,"y","x",e,s);return{...o,y1:n,y:a,x1:l,x2:c,x:I1(l,c)}}function lat(e={},t={}){arguments.length===1&&([e,t]=fd(e));const{y1:n,y:r=n,x:i}=t,[s,o,a]=dd(r,i,"y","x",e,t);return{...s,y1:n,y:o,x:a}}function cat(e={},t={}){arguments.length===1&&([e,t]=fd(e));const{y1:n,y:r=n,x:i}=t,[s,o,,a]=dd(r,i,"y","x",e,t);return{...s,y1:n,y:o,x:a}}function n7(e={},t={}){arguments.length===1&&([e,t]=fd(e));const{x1:n,x:r=n,y:i,...s}=t,[o,a,l,c]=dd(r,i,"x","y",e,s);return{...o,x1:n,x:a,y1:l,y2:c,y:I1(l,c)}}function uat(e={},t={}){arguments.length===1&&([e,t]=fd(e));const{x1:n,x:r=n,y:i}=t,[s,o,a]=dd(r,i,"x","y",e,t);return{...s,x1:n,x:o,y:a}}function fat(e={},t={}){arguments.length===1&&([e,t]=fd(e));const{x1:n,x:r=n,y:i}=t,[s,o,,a]=dd(r,i,"x","y",e,t);return{...s,x1:n,x:o,y:a}}function UE({x:e,x1:t,x2:n,...r}={}){return r=ad(r,"y"),t===void 0&&n===void 0?e7({x:e,...r}):([t,n]=tC(e,t,n),{...r,x1:t,x2:n})}function PE({y:e,y1:t,y2:n,...r}={}){return r=ad(r,"x"),t===void 0&&n===void 0?n7({y:e,...r}):([t,n]=tC(e,t,n),{...r,y1:t,y2:n})}function fd(e){const{offset:t,order:n,reverse:r,...i}=e;return[{offset:t,order:n,reverse:r},i]}const dat={length:!0};function dd(e,t=j3,n,r,{offset:i,order:s,reverse:o},a){if(t===null)throw new Error(`stack requires ${r}`);const l=ll(a),[c,u]=er(e),[f,d]=kr(t),[h,p]=kr(t);return f.hint=h.hint=dat,i=hat(i),s=mat(s,i,r),[Ys(a,(g,v,y)=>{({data:g,facets:v}=aat(g,v));const m=e==null?void 0:u(E1(Ut(g,e),y==null?void 0:y[n])),b=Ut(g,t,Float64Array),w=Ut(g,l),S=s&&s(g,m,b,w),_=g.length,x=d(new Float64Array(_)),T=p(new Float64Array(_)),N=[];for(const I of v){const A=m?Array.from(Vo(I,k=>m[k]).values()):[I];if(S)for(const k of A)k.sort(S);for(const k of A){let R=0,E=0;o&&k.reverse();for(const M of k){const $=b[M];$<0?R=T[M]=(x[M]=R)+$:$>0?E=T[M]=(x[M]=E)+$:T[M]=x[M]=E}}N.push(A)}return i&&i(N,x,T,w),{data:g,facets:v}}),c,f,h]}function hat(e){if(e!=null){if(typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"expand":case"normalize":return pat;case"center":case"silhouette":return yat;case"wiggle":return i7}throw new Error(`unknown offset: ${e}`)}}function r7(e,t){let n=0,r=0;for(const i of e){const s=t[i];s<n&&(n=s),s>r&&(r=s)}return[n,r]}function pat(e,t,n){for(const r of e)for(const i of r){const[s,o]=r7(i,n);for(const a of i){const l=1/(o-s||1);t[a]=l*(t[a]-s),n[a]=l*(n[a]-s)}}}function yat(e,t,n){for(const r of e){for(const i of r){const[s,o]=r7(i,n);for(const a of i){const l=(o+s)/2;t[a]-=l,n[a]-=l}}s7(r,t,n)}o7(e,t,n)}function i7(e,t,n,r){for(const i of e){const s=new bc;let o=0;for(const a of i){let l=-1;const c=a.map(h=>Math.abs(n[h]-t[h])),u=a.map(h=>{l=r?r[h]:++l;const p=n[h]-t[h],g=s.has(l)?p-s.get(l):0;return s.set(l,p),g}),f=[0,...wG(u)];for(const h of a)t[h]+=o,n[h]+=o;const d=Ls(c);d&&(o-=Ls(c,(h,p)=>(u[p]/2+f[p])*h)/d)}s7(i,t,n)}o7(e,t,n)}function s7(e,t,n){const r=bn(e,i=>bn(i,s=>t[s]));for(const i of e)for(const s of i)t[s]-=r,n[s]-=r}function o7(e,t,n){const r=e.length;if(r===1)return;const i=e.map(a=>a.flat()),s=i.map(a=>(bn(a,l=>t[l])+$e(a,l=>n[l]))/2),o=bn(s);for(let a=0;a<r;a++){const l=o-s[a];for(const c of i[a])t[c]+=l,n[c]+=l}}function mat(e,t,n){if(e===void 0&&t===i7)return oN(bi);if(e!=null){if(typeof e=="string"){const r=e.startsWith("-"),i=r?S1:bi;switch((r?e.slice(1):e).toLowerCase()){case"value":case n:return gat(i);case"z":return bat(i);case"sum":return vat(i);case"appearance":return wat(i);case"inside-out":return oN(i)}return aN(XL(e))}if(typeof e=="function")return(e.length===1?aN:_at)(e);if(Array.isArray(e))return Sat(e);throw new Error(`invalid order: ${e}`)}}function gat(e){return(t,n,r)=>(i,s)=>e(r[i],r[s])}function bat(e){return(t,n,r,i)=>(s,o)=>e(i[s],i[o])}function vat(e){return Rv(e,(t,n,r,i)=>a3(Yo(t),s=>Ls(s,o=>r[o]),s=>i[s]))}function wat(e){return Rv(e,(t,n,r,i)=>a3(Yo(t),s=>n[c3(s,o=>r[o])],s=>i[s]))}function oN(e){return Rv(e,(t,n,r,i)=>{const s=Yo(t),o=a3(s,f=>n[c3(f,d=>r[d])],f=>i[f]),a=Hu(s,f=>Ls(f,d=>r[d]),f=>i[f]),l=[],c=[];let u=0;for(const f of o)u<0?(u+=a.get(f),l.push(f)):(u-=a.get(f),c.push(f));return c.reverse().concat(l)})}function aN(e){return t=>{const n=Ut(t,e);return(r,i)=>bi(n[r],n[i])}}function _at(e){return t=>(n,r)=>e(t[n],t[r])}function Sat(e){return Rv(bi,()=>e)}function Rv(e,t){return(n,r,i,s)=>{if(!s)throw new Error("missing channel: z");const o=new bc(t(n,r,i,s).map((a,l)=>[a,l]));return(a,l)=>e(o.get(s[a]),o.get(s[l]))}}const xat={ariaLabel:"area",strokeWidth:1,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class Lv extends ve{constructor(t,n={}){const{x1:r,y1:i,x2:s,y2:o,z:a,curve:l,tension:c}=n;super(t,{x1:{value:r,scale:"x"},y1:{value:i,scale:"y"},x2:{value:s,scale:"x",optional:!0},y2:{value:o,scale:"y",optional:!0},z:{value:ll(n),optional:!0}},n,xat),this.z=a,this.curve=DE(l,c)}filter(t){return t}render(t,n,r,i,s){const{x1:o,y1:a,x2:l=o,y2:c=a}=r;return ee("svg:g",s).call(Ne,this,i,s).call(be,this,n,0,0).call(u=>u.selectAll().data(gC(t,[o,a,l,c],this,r)).enter().append("path").call(Ee,this).call(A1,this,r).attr("d",F3().curve(this.curve).defined(f=>f>=0).x0(f=>o[f]).y0(f=>a[f]).x1(f=>l[f]).y1(f=>c[f]))).node()}}function Iat(e,t){return t===void 0?Uf(e,{x:gy,y:_p}):new Lv(e,t)}function Ap(e,t){const{y:n=Ir,...r}=OE(t);return new Lv(e,UE(LE({...r,y1:n,y2:void 0})))}function Uf(e,t){const{x:n=Ir,...r}=kE(t);return new Lv(e,PE(CE({...r,x1:n,x2:void 0})))}const Eat={ariaLabel:"link",fill:"none",stroke:"currentColor",strokeMiterlimit:1};class a7 extends ve{constructor(t,n={}){const{x1:r,y1:i,x2:s,y2:o,curve:a,tension:l}=n;super(t,{x1:{value:r,scale:"x"},y1:{value:i,scale:"y"},x2:{value:s,scale:"x",optional:!0},y2:{value:o,scale:"y",optional:!0}},n,Eat),this.curve=G5(a,l),ld(this,n)}project(t,n,r){this.curve!==Cf&&super.project(t,n,r)}render(t,n,r,i,s){const{x1:o,y1:a,x2:l=o,y2:c=a}=r,{curve:u}=this;return ee("svg:g",s).call(Ne,this,i,s).call(be,this,n).call(f=>f.selectAll().data(t).enter().append("path").call(Ee,this).attr("d",u===Cf&&s.projection?Tat(s.projection,o,a,l,c):d=>{const h=_o(),p=u(h);return p.lineStart(),p.point(o[d],a[d]),p.point(l[d],c[d]),p.lineEnd(),h}).call(fn,this,r).call(Ty,this,r,s)).node()}}function Tat(e,t,n,r,i){const s=ol(e);return t=lr(t),n=lr(n),r=lr(r),i=lr(i),o=>s({type:"LineString",coordinates:[[t[o],n[o]],[r[o],i[o]]]})}function l7(e,{x:t,x1:n,x2:r,y:i,y1:s,y2:o,...a}={}){return[n,r]=k1(t,n,r),[s,o]=k1(i,s,o),new a7(e,{...a,x1:n,x2:r,y1:s,y2:o})}function k1(e,t,n){if(e===void 0){if(t===void 0){if(n!==void 0)return[n]}else if(n===void 0)return[t]}else{if(t===void 0)return n===void 0?[e]:[e,n];if(n===void 0)return[e,t]}return[t,n]}const Aat={ariaLabel:"arrow",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeMiterlimit:1,strokeWidth:1.5};class c7 extends ve{constructor(t,n={}){const{x1:r,y1:i,x2:s,y2:o,bend:a=0,headAngle:l=60,headLength:c=8,inset:u=0,insetStart:f=u,insetEnd:d=u,sweep:h}=n;super(t,{x1:{value:r,scale:"x"},y1:{value:i,scale:"y"},x2:{value:s,scale:"x",optional:!0},y2:{value:o,scale:"y",optional:!0}},n,Aat),this.bend=a===!0?22.5:Math.max(-90,Math.min(90,a)),this.headAngle=+l,this.headLength=+c,this.insetStart=+f,this.insetEnd=+d,this.sweep=Mat(h)}render(t,n,r,i,s){const{x1:o,y1:a,x2:l=o,y2:c=a,SW:u}=r,{strokeWidth:f,bend:d,headAngle:h,headLength:p,insetStart:g,insetEnd:v}=this,y=u?w=>u[w]:Ur(f===void 0?1:f),m=h*M1/2,b=p/1.5;return ee("svg:g",s).call(Ne,this,i,s).call(be,this,n).call(w=>w.selectAll().data(t).enter().append("path").call(Ee,this).attr("d",S=>{let _=o[S],x=a[S],T=l[S],N=c[S];const I=Math.hypot(T-_,N-x);if(I<=g+v)return null;let A=Math.atan2(N-x,T-_);const k=Math.min(b*y(S),I/3),R=this.sweep(_,x,T,N)*d*M1,E=Math.hypot(I/Math.tan(R),I)/2;if(g||v)if(E<1e5){const X=Math.sign(R),[tt,Z]=$at([_,x],[T,N],E,X);if(g&&([_,x]=lN([tt,Z,E],[_,x,g],-X*Math.sign(g))),v){const[Y,Q]=lN([tt,Z,E],[T,N,v],X*Math.sign(v));A+=Math.atan2(Q-Z,Y-tt)-Math.atan2(N-Z,T-tt),T=Y,N=Q}}else{const X=T-_,tt=N-x,Z=Math.hypot(X,tt);g&&(_+=X/Z*g,x+=tt/Z*g),v&&(T-=X/Z*v,N-=tt/Z*v)}const M=A+R,$=M+m,B=M-m,O=T-k*Math.cos($),C=N-k*Math.sin($),F=T-k*Math.cos(B),P=N-k*Math.sin(B),z=E<1e5?`A${E},${E} 0,0,${R>0?1:0} `:"L",H=k?`M${O},${C}L${T},${N}L${F},${P}`:"";return`M${_},${x}${z}${T},${N}${H}`}).call(fn,this,r)).node()}}function Mat(e=1){if(typeof e=="number")return Ur(Math.sign(e));if(typeof e=="function")return(t,n,r,i)=>Math.sign(e(t,n,r,i));switch(Yr(e,"sweep",["+x","-x","+y","-y"])){case"+x":return(t,n,r)=>Pe(t,r);case"-x":return(t,n,r)=>gc(t,r);case"+y":return(t,n,r,i)=>Pe(n,i);case"-y":return(t,n,r,i)=>gc(n,i)}}function $at([e,t],[n,r],i,s){const o=n-e,a=r-t,l=Math.hypot(o,a),c=s*Math.sqrt(i*i-l*l/4)/l;return[(e+n)/2-a*c,(t+r)/2+o*c]}function lN([e,t,n],[r,i,s],o){const a=r-e,l=i-t,c=Math.hypot(a,l),u=(a*a+l*l-s*s+n*n)/(2*c),f=o*Math.sqrt(n*n-u*u);return[e+(a*u+l*f)/c,t+(l*u-a*f)/c]}function Nat(e,{x:t,x1:n,x2:r,y:i,y1:s,y2:o,...a}={}){return[n,r]=k1(t,n,r),[s,o]=k1(i,s,o),new c7(e,{...a,x1:n,x2:r,y1:s,y2:o})}class zE extends ve{constructor(t,n,r={},i){super(t,n,r,i);const{inset:s=0,insetTop:o=s,insetRight:a=s,insetBottom:l=s,insetLeft:c=s,rx:u,ry:f}=r;this.insetTop=jt(o),this.insetRight=jt(a),this.insetBottom=jt(l),this.insetLeft=jt(c),this.rx=Ve(u,"auto"),this.ry=Ve(f,"auto")}render(t,n,r,i,s){const{rx:o,ry:a}=this;return ee("svg:g",s).call(Ne,this,i,s).call(this._transform,this,n).call(l=>l.selectAll().data(t).enter().append("rect").call(Ee,this).attr("x",this._x(n,r,i)).attr("width",this._width(n,r,i)).attr("y",this._y(n,r,i)).attr("height",this._height(n,r,i)).call(ut,"rx",o).call(ut,"ry",a).call(fn,this,r)).node()}_x(t,{x:n},{marginLeft:r}){const{insetLeft:i}=this;return n?s=>n[s]+i:r+i}_y(t,{y:n},{marginTop:r}){const{insetTop:i}=this;return n?s=>n[s]+i:r+i}_width({x:t},{x:n},{marginRight:r,marginLeft:i,width:s}){const{insetLeft:o,insetRight:a}=this,l=n&&t?t.bandwidth():s-r-i;return Math.max(0,l-o-a)}_height({y:t},{y:n},{marginTop:r,marginBottom:i,height:s}){const{insetTop:o,insetBottom:a}=this,l=n&&t?t.bandwidth():s-r-i;return Math.max(0,l-o-a)}}const u7={ariaLabel:"bar"};class f7 extends zE{constructor(t,n={}){const{x1:r,x2:i,y:s}=n;super(t,{x1:{value:r,scale:"x"},x2:{value:i,scale:"x"},y:{value:s,scale:"y",type:"band",optional:!0}},n,u7)}_transform(t,n,{x:r}){t.call(be,n,{x:r},0,0)}_x({x:t},{x1:n,x2:r},{marginLeft:i}){const{insetLeft:s}=this;return ui(t)?i+s:o=>Math.min(n[o],r[o])+s}_width({x:t},{x1:n,x2:r},{marginRight:i,marginLeft:s,width:o}){const{insetLeft:a,insetRight:l}=this;return ui(t)?o-i-s-a-l:c=>Math.max(0,Math.abs(r[c]-n[c])-a-l)}}class d7 extends zE{constructor(t,n={}){const{x:r,y1:i,y2:s}=n;super(t,{y1:{value:i,scale:"y"},y2:{value:s,scale:"y"},x:{value:r,scale:"x",type:"band",optional:!0}},n,u7)}_transform(t,n,{y:r}){t.call(be,n,{y:r},0,0)}_y({y:t},{y1:n,y2:r},{marginTop:i}){const{insetTop:s}=this;return ui(t)?i+s:o=>Math.min(n[o],r[o])+s}_height({y:t},{y1:n,y2:r},{marginTop:i,marginBottom:s,height:o}){const{insetTop:a,insetBottom:l}=this;return ui(t)?o-i-s-a-l:c=>Math.max(0,Math.abs(r[c]-n[c])-a-l)}}function Yl(e,t={}){return wv(t)||(t={...t,y:Ir,x2:gt}),new f7(e,UE(KC(LE(t))))}function ql(e,t={}){return wv(t)||(t={...t,x:Ir,y2:gt}),new d7(e,PE(ZC(CE(t))))}const Dat={ariaLabel:"cell"};class Cv extends zE{constructor(t,{x:n,y:r,...i}={}){super(t,{x:{value:n,scale:"x",type:"band",optional:!0},y:{value:r,scale:"y",type:"band",optional:!0}},i,Dat)}_transform(t,n){t.call(be,n,{},0,0)}}function Ou(e,{x:t,y:n,...r}={}){return[t,n]=Ki(t,n),new Cv(e,{...r,x:t,y:n})}function kat(e,{x:t=Ir,fill:n,stroke:r,...i}={}){return n===void 0&&br(r)[0]===void 0&&(n=gt),new Cv(e,{...i,x:t,fill:n,stroke:r})}function Oat(e,{y:t=Ir,fill:n,stroke:r,...i}={}){return n===void 0&&br(r)[0]===void 0&&(n=gt),new Cv(e,{...i,y:t,fill:n,stroke:r})}const Fat={ariaLabel:"dot",fill:"none",stroke:"currentColor",strokeWidth:1.5};function jE(e){return e.sort===void 0&&e.reverse===void 0?lC({channel:"-r"},e):e}class Uv extends ve{constructor(t,n={}){const{x:r,y:i,r:s,rotate:o,symbol:a=wp,frameAnchor:l}=n,[c,u]=Ke(o,0),[f,d]=Xrt(a),[h,p]=Ke(s,f==null?3:4.5);super(t,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},r:{value:h,scale:"r",filter:Ao,optional:!0},rotate:{value:c,optional:!0},symbol:{value:f,scale:"auto",optional:!0}},jE(n),Fat),this.r=p,this.rotate=u,this.symbol=d,this.frameAnchor=wy(l);const{channels:g}=this,{symbol:v}=g;if(v){const{fill:y,stroke:m}=g;v.hint={fill:y?y.value===v.value?"color":"currentColor":this.fill??"currentColor",stroke:m?m.value===v.value?"color":"currentColor":this.stroke??"none"}}}render(t,n,r,i,s){const{x:o,y:a}=n,{x:l,y:c,r:u,rotate:f,symbol:d}=r,{r:h,rotate:p,symbol:g}=this,[v,y]=qs(this,i),m=g===wp,b=u?void 0:h*h*Math.PI;return bv(h)&&(t=[]),ee("svg:g",s).call(Ne,this,i,s).call(be,this,{x:l&&o,y:c&&a}).call(w=>w.selectAll().data(t).enter().append(m?"circle":"path").call(Ee,this).call(m?S=>{S.attr("cx",l?_=>l[_]:v).attr("cy",c?_=>c[_]:y).attr("r",u?_=>u[_]:h)}:S=>{S.attr("transform",kv`translate(${l?_=>l[_]:v},${c?_=>c[_]:y})${f?_=>` rotate(${f[_]})`:p?` rotate(${p})`:""}`).attr("d",u&&d?_=>{const x=_o();return d[_].draw(x,u[_]*u[_]*Math.PI),x}:u?_=>{const x=_o();return g.draw(x,u[_]*u[_]*Math.PI),x}:d?_=>{const x=_o();return d[_].draw(x,b),x}:(()=>{const _=_o();return g.draw(_,b),_})())}).call(fn,this,r)).node()}}function fl(e,{x:t,y:n,...r}={}){return r.frameAnchor===void 0&&([t,n]=Ki(t,n)),new Uv(e,{...r,x:t,y:n})}function Bat(e,{x:t=gt,...n}={}){return new Uv(e,t5({...n,x:t}))}function Rat(e,{y:t=gt,...n}={}){return new Uv(e,JC({...n,y:t}))}function Lat(e,t){return fl(e,{...t,symbol:"circle"})}function Cat(e,t){return fl(e,{...t,symbol:"hexagon"})}const Uat={ariaLabel:"line",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class Pv extends ve{constructor(t,n={}){const{x:r,y:i,z:s,curve:o,tension:a}=n;super(t,{x:{value:r,scale:"x"},y:{value:i,scale:"y"},z:{value:ll(n),optional:!0}},n,Uat),this.z=s,this.curve=G5(o,a),ld(this,n)}filter(t){return t}project(t,n,r){this.curve!==Cf&&super.project(t,n,r)}render(t,n,r,i,s){const{x:o,y:a}=r,{curve:l}=this;return ee("svg:g",s).call(Ne,this,i,s).call(be,this,n).call(c=>c.selectAll().data(gC(t,[o,a],this,r)).enter().append("path").call(Ee,this).call(A1,this,r).call(jst,this,r,s).attr("d",l===Cf&&s.projection?Pat(s.projection,o,a):gL().curve(l).defined(u=>u>=0).x(u=>o[u]).y(u=>a[u]))).node()}}function Pat(e,t,n){const r=ol(e);return t=lr(t),n=lr(n),i=>{let s=[];const o=[s];for(const a of i)a===-1?(s=[],o.push(s)):s.push([t[a],n[a]]);return r({type:"MultiLineString",coordinates:o})}}function VE(e,{x:t,y:n,...r}={}){return[t,n]=Ki(t,n),new Pv(e,{...r,x:t,y:n})}function Mp(e,{x:t=gt,y:n=Ir,...r}={}){return new Pv(e,OE({...r,x:t,y:n}))}function $p(e,{x:t=Ir,y:n=gt,...r}={}){return new Pv(e,kE({...r,x:t,y:n}))}const zat={ariaLabel:"rect"};class zv extends ve{constructor(t,n={}){const{x1:r,y1:i,x2:s,y2:o,inset:a=0,insetTop:l=a,insetRight:c=a,insetBottom:u=a,insetLeft:f=a,rx:d,ry:h}=n;super(t,{x1:{value:r,scale:"x",optional:!0},y1:{value:i,scale:"y",optional:!0},x2:{value:s,scale:"x",optional:!0},y2:{value:o,scale:"y",optional:!0}},n,zat),this.insetTop=jt(l),this.insetRight=jt(c),this.insetBottom=jt(u),this.insetLeft=jt(f),this.rx=Ve(d,"auto"),this.ry=Ve(h,"auto")}render(t,n,r,i,s){const{x:o,y:a}=n,{x1:l,y1:c,x2:u,y2:f}=r,{marginTop:d,marginRight:h,marginBottom:p,marginLeft:g,width:v,height:y}=i,{projection:m}=s,{insetTop:b,insetRight:w,insetBottom:S,insetLeft:_,rx:x,ry:T}=this;return ee("svg:g",s).call(Ne,this,i,s).call(be,this,{x:l&&u&&o,y:c&&f&&a},0,0).call(N=>N.selectAll().data(t).enter().append("rect").call(Ee,this).attr("x",l&&u&&(m||!ui(o))?I=>Math.min(l[I],u[I])+_:g+_).attr("y",c&&f&&(m||!ui(a))?I=>Math.min(c[I],f[I])+b:d+b).attr("width",l&&u&&(m||!ui(o))?I=>Math.max(0,Math.abs(u[I]-l[I])-_-w):v-h-g-w-_).attr("height",c&&f&&(m||!ui(a))?I=>Math.max(0,Math.abs(c[I]-f[I])-b-S):y-d-p-b-S).call(ut,"rx",x).call(ut,"ry",T).call(fn,this,r)).node()}}function YE(e,t){return new zv(e,XC(QC(t)))}function O1(e,t={}){return wv(t)||(t={...t,y:Ir,x2:gt,interval:1}),new zv(e,UE(QC(LE(t))))}function F1(e,t={}){return wv(t)||(t={...t,x:Ir,y2:gt,interval:1}),new zv(e,PE(XC(CE(t))))}function h7(e,t){t=Vat(t);const{x:n,y:r,color:i,size:s}=t,o=O0(e,n),a=O0(e,r),l=O0(e,i),c=O0(e,s);let{fx:u,fy:f,x:{value:d,reduce:h,zero:p,...g},y:{value:v,reduce:y,zero:m,...b},color:{value:w,color:S,reduce:_},size:{value:x,reduce:T},mark:N}=t;if(h===void 0&&(h=y==null&&d==null&&x==null&&v!=null?"count":null),y===void 0&&(y=h==null&&v==null&&x==null&&d!=null?"count":null),T===void 0&&x==null&&_==null&&h==null&&y==null&&(d==null||je(o))&&(v==null||je(a))&&(T="count"),p===void 0&&(p=F0(h)?!0:void 0),m===void 0&&(m=F0(y)?!0:void 0),d==null&&v==null)throw new Error("must specify x or y");if(h!=null&&v==null)throw new Error("reducing x requires y");if(y!=null&&d==null)throw new Error("reducing y requires x");N===void 0&&(N=x!=null||T!=null?"dot":F0(h)||F0(y)||_!=null?"bar":d!=null&&v!=null?je(o)||je(a)||h==null&&y==null&&!Pd(o)&&!Pd(a)?"dot":"line":d!=null||v!=null?"rule":null);let I,A,k;switch(N){case"dot":k=fl,A="stroke";break;case"line":k=o&&a||h!=null||y!=null?m||y!=null||o&&Pd(o)?$p:p||h!=null||a&&Pd(a)?Mp:VE:o?Mp:$p,A="stroke",uN(l)&&(I=null);break;case"area":k=!(m||y!=null)&&(p||h!=null||a&&Pd(a))?Ap:Uf,A="fill",uN(l)&&(I=null);break;case"rule":k=o?Va:Ya,A="stroke";break;case"bar":k=h!=null?je(a)?cN(h)&&o&&je(o)?Ou:Yl:O1:y!=null?je(o)?cN(y)&&a&&je(a)?Ou:ql:F1:_!=null||T!=null?o&&je(o)&&a&&je(a)?Ou:o&&je(o)?ql:a&&je(a)?Yl:YE:o&&ku(o)&&!(a&&ku(a))?Yl:a&&ku(a)&&!(o&&ku(o))?ql:Ou,A="fill";break;default:throw new Error(`invalid mark: ${N}`)}let R={fx:u,fy:f,x:o??void 0,y:a??void 0,[A]:l??S,z:I,r:c??void 0,tip:!0},E,M={[A]:_??void 0,r:T??void 0};if(h!=null&&y!=null)throw new Error("cannot reduce both x and y");return y!=null?(M.y=y,E=je(o)?xp:pa):h!=null?(M.x=h,E=je(a)?Ip:ya):(_!=null||T!=null)&&(o&&a?E=je(o)&&je(a)?eE:je(o)?ya:je(a)?pa:Fl:o?E=je(o)?xp:pa:a&&(E=je(a)?Ip:ya)),(E===Fl||E===pa)&&(R.x={value:o,...g}),(E===Fl||E===ya)&&(R.y={value:a,...b}),p===void 0&&(p=o&&!(E===Fl||E===pa)&&(k===Yl||k===Ap||k===O1||k===Ya)),m===void 0&&(m=a&&!(E===Fl||E===ya)&&(k===ql||k===Uf||k===F1||k===Va)),{fx:u??null,fy:f??null,x:{value:d??null,reduce:h??null,zero:!!p,...g},y:{value:v??null,reduce:y??null,zero:!!m,...b},color:{value:w??null,reduce:_??null,...S!==void 0&&{color:S}},size:{value:x??null,reduce:T??null},mark:N,markImpl:fN[k],markOptions:R,transformImpl:fN[E],transformOptions:M,colorMode:A}}function jat(e,t){const n=h7(e,t),{fx:r,fy:i,x:{zero:s},y:{zero:o},markOptions:a,transformOptions:l,colorMode:c}=n,u=ex[n.markImpl],f=ex[n.transformImpl],d=r!=null||i!=null?ME({strokeOpacity:.1}):null,h=[s?Va([0]):null,o?Ya([0]):null],p=u(e,f?f(l,a):a);return c==="stroke"?Hi(d,h,p):Hi(d,p,h)}function Pd(e){let t,n;for(const r of e){if(r==null)continue;if(t===void 0){t=r;continue}const i=Math.sign(Pe(t,r));if(i){if(n!==void 0&&i!==n)return!1;t=r,n=i}}return!0}function Vat({x:e,y:t,color:n,size:r,fx:i,fy:s,mark:o}={}){return ds(e)||(e=Gc(e)),ds(t)||(t=Gc(t)),ds(n)||(n=vy(n)?{color:n}:Gc(n)),ds(r)||(r=Gc(r)),ds(i)&&({value:i}=Gc(i)),ds(s)&&({value:s}=Gc(s)),o!=null&&(o=`${o}`.toLowerCase()),{x:e,y:t,color:n,size:r,fx:i,fy:s,mark:o}}function O0(e,t){const n=Ut(e,t.value);return n&&(n.label=qo(t.value)),n}function Gc(e){return Yat(e)?{reduce:e}:{value:e}}function F0(e){return/^(?:distinct|count|sum|proportion)$/i.test(e)}function cN(e){return/^(?:first|last|mode)$/i.test(e)}function Yat(e){if(e==null)return!1;if(typeof e.reduceIndex=="function"||typeof e.reduce=="function"&&_i(e)||/^p\d{2}$/i.test(e))return!0;switch(`${e}`.toLowerCase()){case"first":case"last":case"count":case"distinct":case"sum":case"proportion":case"proportion-facet":case"deviation":case"min":case"min-index":case"max":case"max-index":case"mean":case"median":case"variance":case"mode":return!0}return!1}function uN(e){return e?new ny(e).size>e.length>>1:!1}const ex={dot:fl,line:VE,lineX:Mp,lineY:$p,areaX:Ap,areaY:Uf,ruleX:Va,ruleY:Ya,barX:Yl,barY:ql,rect:YE,rectX:O1,rectY:F1,cell:Ou,bin:Fl,binX:pa,binY:ya,group:eE,groupX:xp,groupY:Ip},fN=Object.fromEntries(Object.entries(ex).map(([e,t])=>[t,e]));function qE(e,t={}){let{x:n,x1:r,x2:i}=t;n===void 0&&r===void 0&&i===void 0&&(t={...t,x:n=gt});const s={};return n!=null&&(s.x=e),r!=null&&(s.x1=e),i!=null&&(s.x2=e),Uo(s,t)}function WE(e,t={}){let{y:n,y1:r,y2:i}=t;n===void 0&&r===void 0&&i===void 0&&(t={...t,y:n=gt});const s={};return n!=null&&(s.y=e),r!=null&&(s.y1=e),i!=null&&(s.y2=e),Uo(s,t)}function Uo(e={},t={}){const n=ll(t),r=Object.entries(e).map(([i,s])=>{const o=eC(i,t);if(o==null)throw new Error(`missing channel: ${i}`);const[a,l]=kr(o);return{key:i,input:o,output:a,setOutput:l,map:qat(s)}});return{...Ys(t,(i,s)=>{const o=Ut(i,n),a=r.map(({input:c})=>Ut(i,c)),l=r.map(({setOutput:c})=>c(new Array(i.length)));for(const c of s)for(const u of o?Vo(c,f=>o[f]).values():[c])r.forEach(({map:f},d)=>f.mapIndex(u,a[d],l[d]));return{data:i,facets:s}}),...Object.fromEntries(r.map(({key:i,output:s})=>[i,s]))}}function qat(e){if(e==null)throw new Error("missing map");if(typeof e.mapIndex=="function")return e;if(typeof e.map=="function"&&_i(e))return Wat(e);if(typeof e=="function")return A_(q3(e));switch(`${e}`.toLowerCase()){case"cumsum":return Gat;case"rank":return A_((t,n)=>eF(t,r=>n[r]));case"quantile":return A_((t,n)=>Hat(t,r=>n[r]))}throw new Error(`invalid map: ${e}`)}function Wat(e){return console.warn("deprecated map interface; implement mapIndex instead."),{mapIndex:e.map.bind(e)}}function Hat(e,t){const n=Wb(e,t)-1;return eF(e,t).map(r=>r/n)}function A_(e){return{mapIndex(t,n,r){const i=e(t,n);if(i.length!==t.length)throw new Error("map function returned a mismatched length");for(let s=0,o=t.length;s<o;++s)r[t[s]]=i[s]}}}const Gat={mapIndex(e,t,n){let r=0;for(const i of e)n[i]=r+=t[i]}};function Xat(e={},t){return arguments.length===1&&(t=e),qE(jv(e),t)}function Qat(e={},t){return arguments.length===1&&(t=e),WE(jv(e),t)}function jv(e={}){typeof e=="number"&&(e={k:e});let{k:t,reduce:n,shift:r,anchor:i,strict:s}=e;if(i===void 0&&r!==void 0&&(i=Zat(r),Mo(`Warning: the shift option is deprecated; please use anchor "${i}" instead.`)),!((t=Math.floor(t))>0))throw new Error(`invalid k: ${t}`);return Jat(n)(t,Kat(i,t),s)}function Kat(e="middle",t){switch(`${e}`.toLowerCase()){case"middle":return t-1>>1;case"start":return 0;case"end":return t-1}throw new Error(`invalid anchor: ${e}`)}function Zat(e){switch(`${e}`.toLowerCase()){case"centered":return"middle";case"leading":return"start";case"trailing":return"end"}throw new Error(`invalid shift: ${e}`)}function Jat(e="mean"){if(typeof e=="string"){if(/^p\d{2}$/i.test(e))return B0(V3(e));switch(e.toLowerCase()){case"deviation":return B0(ey);case"max":return R0((t,n)=>$e(t,r=>n[r]));case"mean":return tlt;case"median":return B0(fp);case"min":return R0((t,n)=>bn(t,r=>n[r]));case"mode":return R0((t,n)=>tF(t,r=>n[r]));case"sum":return p7;case"variance":return B0(i3);case"difference":return rlt;case"ratio":return ilt;case"first":return slt;case"last":return olt}}if(typeof e!="function")throw new Error(`invalid reduce: ${e}`);return R0(q3(e))}function B0(e){return(t,n,r)=>r?{mapIndex(i,s,o){const a=c=>s[c]==null?NaN:+s[c];let l=0;for(let c=0;c<t-1;++c)isNaN(a(c))&&++l;for(let c=0,u=i.length-t+1;c<u;++c)isNaN(a(c+t-1))&&++l,o[i[c+n]]=l===0?e(sc(i,c,c+t),a):NaN,isNaN(a(c))&&--l}}:{mapIndex(i,s,o){const a=l=>s[l]==null?NaN:+s[l];for(let l=-n;l<0;++l)o[i[l+n]]=e(sc(i,0,l+t),a);for(let l=0,c=i.length-n;l<c;++l)o[i[l+n]]=e(sc(i,l,l+t),a)}}}function R0(e){return(t,n,r)=>r?{mapIndex(i,s,o){let a=0;for(let l=0;l<t-1;++l)a+=Gn(s[i[l]]);for(let l=0,c=i.length-t+1;l<c;++l)a+=Gn(s[i[l+t-1]]),a===t&&(o[i[l+n]]=e(sc(i,l,l+t),s)),a-=Gn(s[i[l]])}}:{mapIndex(i,s,o){for(let a=-n;a<0;++a)o[i[a+n]]=e(sc(i,0,a+t),s);for(let a=0,l=i.length-n;a<l;++a)o[i[a+n]]=e(sc(i,a,a+t),s)}}}function p7(e,t,n){return n?{mapIndex(r,i,s){let o=0,a=0;for(let l=0;l<e-1;++l){const c=i[r[l]];c===null||isNaN(c)?++o:a+=+c}for(let l=0,c=r.length-e+1;l<c;++l){const u=i[r[l]],f=i[r[l+e-1]];f===null||isNaN(f)?++o:a+=+f,s[r[l+t]]=o===0?a:NaN,u===null||isNaN(u)?--o:a-=+u}}}:{mapIndex(r,i,s){let o=0;const a=r.length;for(let l=0,c=Math.min(a,e-t-1);l<c;++l)o+=+i[r[l]]||0;for(let l=-t,c=a-t;l<c;++l)o+=+i[r[l+e-1]]||0,s[r[l+t]]=o,o-=+i[r[l]]||0}}}function tlt(e,t,n){if(n){const r=p7(e,t,n);return{mapIndex(i,s,o){r.mapIndex(i,s,o);for(let a=0,l=i.length-e+1;a<l;++a)o[i[a+t]]/=e}}}else return{mapIndex(r,i,s){let o=0,a=0;const l=r.length;for(let c=0,u=Math.min(l,e-t-1);c<u;++c){let f=i[r[c]];f!==null&&!isNaN(f=+f)&&(o+=f,++a)}for(let c=-t,u=l-t;c<u;++c){let f=i[r[c+e-1]],d=i[r[c]];f!==null&&!isNaN(f=+f)&&(o+=f,++a),s[r[c+t]]=o/a,d!==null&&!isNaN(d=+d)&&(o-=d,--a)}}}}function elt(e,t,n,r){for(let i=n+r;n<i;++n){const s=e[t[n]];if(Gn(s))return s}}function nlt(e,t,n,r){for(let i=n+r-1;i>=n;--i){const s=e[t[i]];if(Gn(s))return s}}function y7(e,t,n,r){for(let i=n+r;n<i;++n){let s=e[t[n]];if(s!==null&&!isNaN(s=+s))return s}}function m7(e,t,n,r){for(let i=n+r-1;i>=n;--i){let s=e[t[i]];if(s!==null&&!isNaN(s=+s))return s}}function rlt(e,t,n){return n?{mapIndex(r,i,s){for(let o=0,a=r.length-e;o<a;++o){const l=i[r[o]],c=i[r[o+e-1]];s[r[o+t]]=l===null||c===null?NaN:c-l}}}:{mapIndex(r,i,s){for(let o=-t,a=r.length-e+t+1;o<a;++o)s[r[o+t]]=m7(i,r,o,e)-y7(i,r,o,e)}}}function ilt(e,t,n){return n?{mapIndex(r,i,s){for(let o=0,a=r.length-e;o<a;++o){const l=i[r[o]],c=i[r[o+e-1]];s[r[o+t]]=l===null||c===null?NaN:c/l}}}:{mapIndex(r,i,s){for(let o=-t,a=r.length-e+t+1;o<a;++o)s[r[o+t]]=m7(i,r,o,e)/y7(i,r,o,e)}}}function slt(e,t,n){return n?{mapIndex(r,i,s){for(let o=0,a=r.length-e;o<a;++o)s[r[o+t]]=i[r[o]]}}:{mapIndex(r,i,s){for(let o=-t,a=r.length-e+t+1;o<a;++o)s[r[o+t]]=elt(i,r,o,e)}}}function olt(e,t,n){return n?{mapIndex(r,i,s){for(let o=0,a=r.length-e;o<a;++o)s[r[o+t]]=i[r[o+e-1]]}}:{mapIndex(r,i,s){for(let o=-t,a=r.length-e+t+1;o<a;++o)s[r[o+t]]=nlt(i,r,o,e)}}}const $o={n:20,k:2,color:"currentColor",opacity:.2,strict:!0,anchor:"end"};function alt(e,{x:t=gt,y:n,k:r=$o.k,color:i=$o.color,opacity:s=$o.opacity,fill:o=i,fillOpacity:a=s,stroke:l=i,strokeOpacity:c,strokeWidth:u,...f}={}){return Hi(We(o)?null:Ap(e,Uo({x1:oc({k:-r,...f}),x2:oc({k:r,...f})},{x1:t,x2:t,y:n,fill:o,fillOpacity:a,...f})),We(l)?null:Mp(e,Uo({x:oc(f)},{x:t,y:n,stroke:l,strokeOpacity:c,strokeWidth:u,...f})))}function llt(e,{x:t,y:n=gt,k:r=$o.k,color:i=$o.color,opacity:s=$o.opacity,fill:o=i,fillOpacity:a=s,stroke:l=i,strokeOpacity:c,strokeWidth:u,...f}={}){return Hi(We(o)?null:Uf(e,Uo({y1:oc({k:-r,...f}),y2:oc({k:r,...f})},{x:t,y1:n,y2:n,fill:o,fillOpacity:a,...f})),We(l)?null:$p(e,Uo({y:oc(f)},{x:t,y:n,stroke:l,strokeOpacity:c,strokeWidth:u,...f})))}function oc({n:e=$o.n,k:t=0,strict:n=$o.strict,anchor:r=$o.anchor}={}){return jv({k:e,reduce:i=>Hb(i)+t*(ey(i)||0),strict:n,anchor:r})}const clt={ariaLabel:"tick",fill:null,stroke:"currentColor"};class g7 extends ve{constructor(t,n,r){super(t,n,r,clt),ld(this,r)}render(t,n,r,i,s){return ee("svg:g",s).call(Ne,this,i,s).call(this._transform,this,n).call(o=>o.selectAll().data(t).enter().append("line").call(Ee,this).attr("x1",this._x1(n,r,i)).attr("x2",this._x2(n,r,i)).attr("y1",this._y1(n,r,i)).attr("y2",this._y2(n,r,i)).call(fn,this,r).call(Ty,this,r,s)).node()}}class b7 extends g7{constructor(t,n={}){const{x:r,y:i,inset:s=0,insetTop:o=s,insetBottom:a=s}=n;super(t,{x:{value:r,scale:"x"},y:{value:i,scale:"y",type:"band",optional:!0}},n),this.insetTop=jt(o),this.insetBottom=jt(a)}_transform(t,n,{x:r}){t.call(be,n,{x:r},xn,0)}_x1(t,{x:n}){return r=>n[r]}_x2(t,{x:n}){return r=>n[r]}_y1({y:t},{y:n},{marginTop:r}){const{insetTop:i}=this;return n&&t?s=>n[s]+i:r+i}_y2({y:t},{y:n},{height:r,marginBottom:i}){const{insetBottom:s}=this;return n&&t?o=>n[o]+t.bandwidth()-s:r-i-s}}class v7 extends g7{constructor(t,n={}){const{x:r,y:i,inset:s=0,insetRight:o=s,insetLeft:a=s}=n;super(t,{y:{value:i,scale:"y"},x:{value:r,scale:"x",type:"band",optional:!0}},n),this.insetRight=jt(o),this.insetLeft=jt(a)}_transform(t,n,{y:r}){t.call(be,n,{y:r},0,xn)}_x1({x:t},{x:n},{marginLeft:r}){const{insetLeft:i}=this;return n&&t?s=>n[s]+i:r+i}_x2({x:t},{x:n},{width:r,marginRight:i}){const{insetRight:s}=this;return n&&t?o=>n[o]+t.bandwidth()-s:r-i-s}_y1(t,{y:n}){return r=>n[r]}_y2(t,{y:n}){return r=>n[r]}}function w7(e,{x:t=gt,...n}={}){return new b7(e,{...n,x:t})}function _7(e,{y:t=gt,...n}={}){return new v7(e,{...n,y:t})}function ult(e,{x:t=gt,y:n=null,fill:r="#ccc",fillOpacity:i,stroke:s="currentColor",strokeOpacity:o,strokeWidth:a=2,sort:l,...c}={}){const u=n!=null?Ip:tE;return Hi(Ya(e,u({x1:HE,x2:GE},{x:t,y:n,stroke:s,strokeOpacity:o,...c})),Yl(e,u({x1:"p25",x2:"p75"},{x:t,y:n,fill:r,fillOpacity:i,...c})),w7(e,u({x:"p50"},{x:t,y:n,stroke:s,strokeOpacity:o,strokeWidth:a,sort:l,...c})),fl(e,Uo({x:S7},{x:t,y:n,z:n,stroke:s,strokeOpacity:o,...c})))}function flt(e,{y:t=gt,x:n=null,fill:r="#ccc",fillOpacity:i,stroke:s="currentColor",strokeOpacity:o,strokeWidth:a=2,sort:l,...c}={}){const u=n!=null?xp:tE;return Hi(Va(e,u({y1:HE,y2:GE},{x:n,y:t,stroke:s,strokeOpacity:o,...c})),ql(e,u({y1:"p25",y2:"p75"},{x:n,y:t,fill:r,fillOpacity:i,...c})),_7(e,u({y:"p50"},{x:n,y:t,stroke:s,strokeOpacity:o,strokeWidth:a,sort:l,...c})),fl(e,Uo({y:S7},{x:n,y:t,z:n,stroke:s,strokeOpacity:o,...c})))}function S7(e){const t=HE(e),n=GE(e);return e.map(r=>r<t||r>n?r:NaN)}function HE(e){const t=x7(e)*2.5-I7(e)*1.5;return bn(e,n=>n>=t?n:NaN)}function GE(e){const t=I7(e)*2.5-x7(e)*1.5;return $e(e,n=>n<=t?n:NaN)}function x7(e){return Ua(e,.25)}function I7(e){return Ua(e,.75)}const dlt={ariaLabel:"raster",stroke:null,pixelSize:1};function Xc(e,t){const n=+e;if(isNaN(n))throw new Error(`invalid ${t}: ${e}`);return n}function dN(e,t){const n=Math.floor(e);if(isNaN(n))throw new Error(`invalid ${t}: ${e}`);return n}class E7 extends ve{constructor(t,n,r={},i){let{width:s,height:o,x:a,y:l,x1:c=a==null?0:void 0,y1:u=l==null?0:void 0,x2:f=a==null?s:void 0,y2:d=l==null?o:void 0,pixelSize:h=i.pixelSize,blur:p=0,interpolate:g}=r;if(s!=null&&(s=dN(s,"width")),o!=null&&(o=dN(o,"height")),c!=null&&(c=Xc(c,"x1")),u!=null&&(u=Xc(u,"y1")),f!=null&&(f=Xc(f,"x2")),d!=null&&(d=Xc(d,"y2")),a==null&&(c==null||f==null))throw new Error("missing x");if(l==null&&(u==null||d==null))throw new Error("missing y");t!=null&&s!=null&&o!=null&&(a===void 0&&c!=null&&f!=null&&(a=_lt(c,f,s)),l===void 0&&u!=null&&d!=null&&(l=Slt(u,d,s,o))),super(t,{x:{value:a,scale:"x",optional:!0},y:{value:l,scale:"y",optional:!0},x1:{value:c==null?null:[c],scale:"x",optional:!0,filter:null},y1:{value:u==null?null:[u],scale:"y",optional:!0,filter:null},x2:{value:f==null?null:[f],scale:"x",optional:!0,filter:null},y2:{value:d==null?null:[d],scale:"y",optional:!0,filter:null},...n},r,i),this.width=s,this.height=o,this.pixelSize=Xc(h,"pixelSize"),this.blur=Xc(p,"blur"),this.interpolate=a==null||l==null?null:plt(g)}}class T7 extends E7{constructor(t,n={}){const{imageRendering:r}=n;if(t==null){const{fill:i,fillOpacity:s}=n;Ke(s)[0]!==void 0&&(n=nx("fillOpacity",n)),br(i)[0]!==void 0&&(n=nx("fill",n))}super(t,void 0,n,dlt),this.imageRendering=Ve(r,"auto")}scale(t,{color:n,...r},i){return super.scale(t,r,i)}render(t,n,r,i,s){var M;const o=n[(M=r.channels.fill)==null?void 0:M.scale]??($=>$),{x:a,y:l}=r,{document:c}=s,[u,f,d,h]=M7(r,i,s),p=d-u,g=h-f,{pixelSize:v,width:y=Math.round(Math.abs(p)/v),height:m=Math.round(Math.abs(g)/v)}=this,b=y*m;let{fill:w,fillOpacity:S}=r,_=0;if(this.interpolate){const $=y/p,B=m/g,O=_e(a,F=>(F-u)*$,Float64Array),C=_e(l,F=>(F-f)*B,Float64Array);w&&(w=this.interpolate(t,y,m,O,C,w)),S&&(S=this.interpolate(t,y,m,O,C,S))}else this.data==null&&t&&(_=t.fi*b);const x=c.createElement("canvas");x.width=y,x.height=m;const T=x.getContext("2d"),N=T.createImageData(y,m),I=N.data;let{r:A,g:k,b:R}=gi(this.fill)??{r:0,g:0,b:0},E=(this.fillOpacity??1)*255;for(let $=0;$<b;++$){const B=$<<2;if(w){const O=o(w[$+_]);if(O==null){I[B+3]=0;continue}({r:A,g:k,b:R}=gi(O))}S&&(E=S[$+_]*255),I[B+0]=A,I[B+1]=k,I[B+2]=R,I[B+3]=E}return this.blur>0&&dG(N,this.blur),T.putImageData(N,0,0),ee("svg:g",s).call(Ne,this,i,s).call(be,this,n).call($=>$.append("image").attr("transform",`translate(${u},${f}) scale(${Math.sign(d-u)},${Math.sign(h-f)})`).attr("width",Math.abs(p)).attr("height",Math.abs(g)).attr("preserveAspectRatio","none").call(ut,"image-rendering",this.imageRendering).call(Ee,this).attr("xlink:href",x.toDataURL())).node()}}function A7(e,t,n){arguments.length<3&&(n=t,t=null);let{x:r,y:i,[e]:s,...o}=n;return r===void 0&&i===void 0&&Lrt(t)&&(r=gy,i=_p,s===void 0&&(s=krt)),[t,{...o,x:r,y:i,[e]:s}]}function hlt(){const[e,t]=A7("fill",...arguments);return new T7(e,e==null||t.fill!==void 0||t.fillOpacity!==void 0?t:{...t,fill:gt})}function M7({x1:e,y1:t,x2:n,y2:r},i,{projection:s}){const{width:o,height:a,marginTop:l,marginRight:c,marginBottom:u,marginLeft:f}=i;return[e&&s==null?e[0]:f,t&&s==null?t[0]:l,n&&s==null?n[0]:o-c,r&&s==null?r[0]:a-u]}function $7({x1:e,y1:t,x2:n,y2:r},i,s,o){const a={};return e&&(a.x1=e),t&&(a.y1=t),n&&(a.x2=n),r&&(a.y2=r),M7(lE(a,i),s,o)}function nx(e,t={}){const{[e]:n}=t;if(typeof n!="function")throw new Error(`invalid ${e}: not a function`);return wr({...t,[e]:void 0},function(r,i,s,o,a,l){const{x:c,y:u}=o;if(!c)throw new Error("missing scale: x");if(!u)throw new Error("missing scale: y");const[f,d,h,p]=$7(s,o,a,l),g=h-f,v=p-d,{pixelSize:y}=this,{width:m=Math.round(Math.abs(g)/y),height:b=Math.round(Math.abs(v)/y)}=t,w=new Array(m*b*(i?i.length:1)),S=g/m,_=v/b;let x=0;for(const T of i??[void 0])for(let N=.5;N<b;++N)for(let I=.5;I<m;++I,++x)w[x]=n(c.invert(f+I*S),u.invert(d+N*_),T);return{data:w,facets:i,channels:{[e]:{value:w,scale:"auto"}}}})}function plt(e){if(typeof e=="function")return e;if(e==null)return rx;switch(`${e}`.toLowerCase()){case"none":return rx;case"nearest":return D7;case"barycentric":return N7();case"random-walk":return k7()}throw new Error(`invalid interpolate: ${e}`)}function rx(e,t,n,r,i,s){const o=new Array(t*n);for(const a of e)r[a]<0||r[a]>=t||i[a]<0||i[a]>=n||(o[Math.floor(i[a])*t+Math.floor(r[a])]=s[a]);return o}function N7({random:e=M3(42)}={}){return(t,n,r,i,s,o)=>{const{points:a,triangles:l,hull:c}=sl.from(t,h=>i[h],h=>s[h]),u=new o.constructor(n*r).fill(NaN),f=new Uint8Array(n*r),d=wlt(o,e);for(let h=0;h<l.length;h+=3){const p=l[h],g=l[h+1],v=l[h+2],y=a[2*p],m=a[2*g],b=a[2*v],w=a[2*p+1],S=a[2*g+1],_=a[2*v+1],x=Math.min(y,m,b),T=Math.max(y,m,b),N=Math.min(w,S,_),I=Math.max(w,S,_),A=(S-_)*(y-b)+(w-_)*(b-m);if(!A)continue;const k=o[t[p]],R=o[t[g]],E=o[t[v]];for(let M=Math.floor(x);M<T;++M)for(let $=Math.floor(N);$<I;++$){if(M<0||M>=n||$<0||$>=r)continue;const B=M+.5,O=$+.5,C=((S-_)*(B-b)+(O-_)*(b-m))/A;if(C<0)continue;const F=((_-w)*(B-b)+(O-_)*(y-b))/A;if(F<0)continue;const P=1-C-F;if(P<0)continue;const z=M+n*$;u[z]=d(k,C,R,F,E,P,M,$),f[z]=1}}return ylt(u,f,i,s,o,n,r,c,t,d),u}}function ylt(e,t,n,r,i,s,o,a,l,c){n=Float64Array.from(a,h=>n[l[h]]),r=Float64Array.from(a,h=>r[l[h]]),i=Array.from(a,h=>i[l[h]]);const u=n.length,f=Array.from({length:u},(h,p)=>glt(p,n,r));let d=0;for(let h=0;h<o;++h){const p=h+.5;for(let g=0;g<s;++g){const v=g+s*h;if(!t[v]){const y=g+.5;for(let m=0;m<u;++m){const b=(u+d+(m%2?(m+1)/2:-m/2))%u;if(f[b](y,p)){const w=mlt(n.at(b-1),r.at(b-1),n[b],r[b],y,p);e[v]=c(i.at(b-1),w,i[b],1-w,i[b],0,g,h),d=b;break}}}}}}function mlt(e,t,n,r,i,s){const o=n-e,a=r-t,l=o*(n-i)+a*(r-s),c=o*(i-e)+a*(s-t);return l>0&&c>0?l/(l+c):+(l>c)}function zd(e,t,n,r){return e*r-n*t}function glt(e,t,n){const r=t.length,i=t.at(e-2),s=n.at(e-2),o=t.at(e-1),a=n.at(e-1),l=t[e],c=n[e],u=t.at(e+1-r),f=n.at(e+1-r),d=o-l,h=a-c,p=i-o,g=s-a,v=l-u,y=c-f,m=Math.hypot(d,h),b=Math.hypot(p,g),w=Math.hypot(v,y);return(S,_)=>{const x=S-o,T=_-a,N=S-l,I=_-c;return zd(x,T,N,I)>-1e-6&&zd(x,T,d,h)*b-zd(x,T,p,g)*m>-1e-6&&zd(N,I,v,y)*m-zd(N,I,d,h)*w<=0}}function D7(e,t,n,r,i,s){const o=new s.constructor(t*n),a=sl.from(e,u=>r[u],u=>i[u]);let l,c;for(let u=.5,f=0;u<n;++u){c=l;for(let d=.5;d<t;++d,++f)c=a.find(d,u,c),d===.5&&(l=c),o[f]=s[e[c]]}return o}function k7({random:e=M3(42),minDistance:t=.5,maxSteps:n=2}={}){return(r,i,s,o,a,l)=>{const c=new l.constructor(i*s),u=sl.from(r,p=>o[p],p=>a[p]);let f,d,h;for(let p=.5,g=0;p<s;++p){d=f;for(let v=.5;v<i;++v,++g){let y=v,m=p;h=d=u.find(y,m,d),v===.5&&(f=d);let b,w=0;for(;(b=Math.hypot(o[r[h]]-y,a[r[h]]-m))>t&&w<n;){const S=e(v,p,w)*2*Math.PI;y+=Math.cos(S)*b,m+=Math.sin(S)*b,h=u.find(y,m,h),++w}c[g]=l[r[h]]}}return c}}function blt(e,t,n,r,i,s){return t*e+r*n+s*i}function vlt(e){return(t,n,r,i,s,o,a,l)=>{const c=e(a,l);return c<n?t:c<n+i?r:s}}function wlt(e,t){return ku(e)||Kn(e)?blt:vlt(t)}function _lt(e,t,n){return{transform(r){const i=r.length,s=new Float64Array(i),o=(t-e)/n,a=e+o/2;for(let l=0;l<i;++l)s[l]=l%n*o+a;return s}}}function Slt(e,t,n,r){return{transform(i){const s=i.length,o=new Float64Array(s),a=(t-e)/r,l=e+a/2;for(let c=0;c<s;++c)o[c]=Math.floor(c/n)%r*a+l;return o}}}const hN={ariaLabel:"contour",fill:"none",stroke:"currentColor",strokeMiterlimit:1,pixelSize:2};class O7 extends E7{constructor(t,{smooth:n=!0,value:r,...i}={}){const s=mC({},i,hN);if(r===void 0){for(const a in s)if(s[a].value!=null){if(r!==void 0)throw new Error("ambiguous contour value");r=i[a],i[a]="value"}}if(r!=null){const a={transform:l=>l.map(c=>c.value),label:qo(r)};for(const l in s)i[l]==="value"&&(i[l]=a)}if(t==null){if(r==null)throw new Error("missing contour value");i=nx("value",{value:r,...i}),r=null}else{let{interpolate:a}=i;r===void 0&&(r=gt),a===void 0&&(i.interpolate="nearest")}super(t,{value:{value:r,optional:!0}},xlt(i),hN);const o={geometry:{value:gt}};for(const a in this.channels){const l=this.channels[a],{scale:c}=l;c==="x"||c==="y"||a==="value"||(o[a]=l,delete this.channels[a])}this.contourChannels=o,this.smooth=!!n}filter(t,{x:n,y:r,value:i,...s},o){return super.filter(t,s,o)}render(t,n,r,i,s){const{geometry:o}=r,a=ol();return ee("svg:g",s).call(Ne,this,i,s).call(be,this,n).call(l=>{l.selectAll().data(t).enter().append("path").call(Ee,this).attr("d",c=>a(o[c])).call(fn,this,r)}).node()}}function xlt({thresholds:e,interval:t,...n}){return e=Q5(e,t,l3),wr(n,function(r,i,s,o,a,l){const[c,u,f,d]=$7(s,o,a,l),h=f-c,p=d-u,{pixelSize:g,width:v=Math.round(Math.abs(h)/g),height:y=Math.round(Math.abs(p)/g)}=this,m=v/h,b=y/p,w=s.value.value,S=[];if(this.interpolate){const{x:I,y:A}=Av(s,o,l),k=_e(I,$=>($-c)*m,Float64Array),R=_e(A,$=>($-u)*b,Float64Array),E=[s.x,s.y,s.value],M=[k,R,w];for(const $ of i){const B=this.filter($,E,M);S.push(this.interpolate(B,v,y,k,R,w))}}else if(i){const I=v*y,A=i.length;for(let k=0;k<A;++k)S.push(w.slice(k*I,k*I+I))}else S.push(w);if(this.blur>0)for(const I of S)YO({data:I,width:v,height:y},this.blur);const _=Ilt(e,w,...Tlt(S));if(_===null)throw new Error(`unsupported thresholds: ${e}`);const{contour:x}=jg().size([v,y]).smooth(this.smooth),T=[],N=[];for(const I of S)N.push(Nr(T.length,T.push(..._e(_,A=>x(I,A)))));for(const{coordinates:I}of T)for(const A of I)for(const k of A)for(const R of k)R[0]=R[0]/m+c,R[1]=R[1]/b+u;return{data:T,facets:N,channels:fC(this.contourChannels,T)}})}function Ilt(e,t,n,r){if(typeof(e==null?void 0:e.range)=="function")return e.range(e.floor(n),r);if(typeof e=="function"&&(e=e(t,n,r)),typeof e!="number")return vr(e);const i=Ca(...QO(n,r,e),e);for(;i[i.length-1]>=r;)i.pop();for(;i[1]<n;)i.shift();return i}function Elt(){return new O7(...A7("value",...arguments))}function Tlt(e){return[bn(e,t=>bn(t,pN)),$e(e,t=>$e(t,pN))]}function pN(e){return isFinite(e)?e:NaN}function Alt(e,t){return XE(vE,e,t)}function Mlt(e,t={}){return XE(wE,e,t)}function $lt(e,t={}){return XE(_E,e,t)}function XE(e,t,n={}){const{x:r,y:i,maxRadius:s}=n,o=e({px:r,py:i,maxRadius:s}),a=[];r!=null&&a.push(Va(t,yN("x",{...o,inset:-6},n))),i!=null&&a.push(Ya(t,yN("y",{...o,inset:-6},n))),r!=null&&a.push(Rf(t,mN("x",{...o,dy:9,frameAnchor:"bottom",lineAnchor:"top"},n))),i!=null&&a.push(Rf(t,mN("y",{...o,dx:-9,frameAnchor:"left",textAnchor:"end"},n)));for(const l of a)l.ariaLabel=`crosshair ${l.ariaLabel}`;return Hi(...a)}function F7(e,{channels:t,...n},{facet:r,facetAnchor:i,fx:s,fy:o,[e]:a,channels:l,transform:c,initializer:u}){return{...n,facet:r,facetAnchor:i,fx:s,fy:o,[e]:a,channels:{...t,...l},transform:c,initializer:Nlt(e,u)}}function Nlt(e,t){return t==null?t:function(n,r,{x:i,y:s,px:o,py:a,...l},...c){const{channels:{x:u,y:f,...d}={},...h}=t.call(this,n,r,{...l,x:o,y:a},...c);return{channels:{...d,...u&&{px:u,...e==="x"&&{x:u}},...f&&{py:f,...e==="y"&&{y:f}}},...h}}}function yN(e,t,n){const{color:r="currentColor",opacity:i=.2,ruleStroke:s=r,ruleStrokeOpacity:o=i,ruleStrokeWidth:a}=n;return{...F7(e,t,n),stroke:s,strokeOpacity:o,strokeWidth:a}}function mN(e,t,n){const{color:r="currentColor",textFill:i=r,textFillOpacity:s,textStroke:o="white",textStrokeOpacity:a,textStrokeWidth:l=5}=n;return{...F7(e,t,Dlt(e,n)),fill:i,fillOpacity:s,stroke:o,strokeOpacity:a,strokeWidth:l}}function Dlt(e,t){return wr(t,(n,r,i)=>{var s;return{channels:{text:{value:(s=GS(i,e))==null?void 0:s.value}}}})}const klt={ariaLabel:"delaunay link",fill:"none",stroke:"currentColor",strokeMiterlimit:1},Olt={ariaLabel:"delaunay mesh",fill:null,stroke:"currentColor",strokeOpacity:.2},Flt={ariaLabel:"hull",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeMiterlimit:1},Blt={ariaLabel:"voronoi",fill:"none",stroke:"currentColor",strokeMiterlimit:1},Rlt={ariaLabel:"voronoi mesh",fill:null,stroke:"currentColor",strokeOpacity:.2};class Llt extends ve{constructor(t,n={}){const{x:r,y:i,z:s,curve:o,tension:a}=n;super(t,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},z:{value:s,optional:!0}},n,klt),this.curve=DE(o,a),ld(this,n)}render(t,n,r,i,s){const{x:o,y:a}=n,{x:l,y:c,z:u}=r,{curve:f}=this,[d,h]=qs(this,i),p=l?m=>l[m]:Ur(d),g=c?m=>c[m]:Ur(h),v=this;function y(m){let b=-1;const w=[],S={};for(const E in r)S[E]=[];const _=[],x=[],T=[],N=[];function I(E,M){E=m[E],M=m[M],w.push(++b),_[b]=p(E),T[b]=g(E),x[b]=p(M),N[b]=g(M);for(const $ in r)S[$].push(r[$][M])}const{halfedges:A,hull:k,triangles:R}=sl.from(m,p,g);for(let E=0;E<A.length;++E){const M=A[E];M>E&&I(R[E],R[M])}for(let E=0;E<k.length;++E)I(k[E],k[(E+1)%k.length]);ye(this).selectAll().data(w).enter().append("path").call(Ee,v).attr("d",E=>{const M=_o(),$=f(M);return $.lineStart(),$.point(_[E],T[E]),$.point(x[E],N[E]),$.lineEnd(),M}).call(fn,v,S).call(Ty,v,S,s)}return ee("svg:g",s).call(Ne,this,i,s).call(be,this,{x:l&&o,y:c&&a}).call(u?m=>m.selectAll().data(Vo(t,b=>u[b]).values()).enter().append("g").each(y):m=>m.datum(t).each(y)).node()}}class QE extends ve{constructor(t,n={},r,i=({z:s})=>s){const{x:s,y:o}=n;super(t,{x:{value:s,scale:"x",optional:!0},y:{value:o,scale:"y",optional:!0},z:{value:i(n),optional:!0}},n,r)}render(t,n,r,i,s){const{x:o,y:a}=n,{x:l,y:c,z:u}=r,[f,d]=qs(this,i),h=l?y=>l[y]:Ur(f),p=c?y=>c[y]:Ur(d),g=this;function v(y){const m=sl.from(y,h,p);ye(this).append("path").datum(y[0]).call(Ee,g).attr("d",g._render(m,i)).call(fn,g,r)}return ee("svg:g",s).call(Ne,this,i,s).call(be,this,{x:l&&o,y:c&&a}).call(u?y=>y.selectAll().data(Vo(t,m=>u[m]).values()).enter().append("g").each(v):y=>y.datum(t).each(v)).node()}}class Clt extends QE{constructor(t,n={}){super(t,n,Olt),this.fill="none"}_render(t){return t.render()}}class Ult extends QE{constructor(t,n={}){super(t,n,Flt,ll)}_render(t){return t.renderHull()}}class Plt extends ve{constructor(t,n={}){const{x:r,y:i,z:s}=n;super(t,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},z:{value:s,optional:!0}},n,Blt)}render(t,n,r,i,s){const{x:o,y:a}=n,{x:l,y:c,z:u}=r,[f,d]=qs(this,i),h=l?y=>l[y]:Ur(f),p=c?y=>c[y]:Ur(d),g=this;function v(y){const m=sl.from(y,h,p),b=B7(m,i);ye(this).selectAll().data(y).enter().append("path").call(Ee,g).attr("d",(w,S)=>b.renderCell(S)).call(fn,g,r)}return ee("svg:g",s).call(Ne,this,i,s).call(be,this,{x:l&&o,y:c&&a}).call(u?y=>y.selectAll().data(Vo(t,m=>u[m]).values()).enter().append("g").each(v):y=>y.datum(t).each(v)).node()}}class zlt extends QE{constructor(t,n){super(t,n,Rlt),this.fill="none"}_render(t,n){return B7(t,n).render()}}function B7(e,t){const{width:n,height:r,marginTop:i,marginRight:s,marginBottom:o,marginLeft:a}=t;return e.voronoi([a,i,n-s,r-o])}function $y(e,t,{x:n,y:r,...i}={}){return[n,r]=Ki(n,r),new e(t,{...i,x:n,y:r})}function jlt(e,t){return $y(Llt,e,t)}function Vlt(e,t){return $y(Clt,e,t)}function Ylt(e,t){return $y(Ult,e,t)}function qlt(e,t){return $y(Plt,e,t)}function Wlt(e,t){return $y(zlt,e,t)}const Hlt={ariaLabel:"density",fill:"none",stroke:"currentColor",strokeMiterlimit:1};class R7 extends ve{constructor(t,{x:n,y:r,z:i,weight:s,fill:o,stroke:a,...l}={}){const c=gN(o)&&(o="currentColor",!0),u=gN(a)&&(a="currentColor",!0);super(t,{x:{value:n,scale:"x",optional:!0},y:{value:r,scale:"y",optional:!0},z:{value:ll({z:i,fill:o,stroke:a}),optional:!0},weight:{value:s,optional:!0}},Qlt({...l,fill:o,stroke:a},c,u),Hlt),c&&(this.fill=void 0),u&&(this.stroke=void 0),this.z=i}filter(t){return t}render(t,n,r,i,s){const{contours:o}=r,a=ol();return ee("svg:g",s).call(Ne,this,i,s).call(be,this,{}).call(l=>l.selectAll().data(t).enter().append("path").call(Ee,this).call(fn,this,r).attr("d",c=>a(o[c]))).node()}}function Glt(e,{x:t,y:n,...r}={}){return[t,n]=Ki(t,n),new R7(e,{...r,x:t,y:n})}const Xlt=new Set(["x","y","z","weight"]);function Qlt(e,t,n){let{bandwidth:i,thresholds:s}=e;return i=i===void 0?20:+i,s=s===void 0?20:typeof(s==null?void 0:s[Symbol.iterator])=="function"?lr(s):+s,wr(e,function(o,a,l,c,u,f){var R;const d=l.weight?lr(l.weight.value):null,h=(R=l.z)==null?void 0:R.value,{z:p}=this,[g,v]=qs(this,u),{width:y,height:m}=u,{x:b,y:w}=Av(l,c,f),S=Object.fromEntries(Object.entries(l).filter(([E])=>!Xlt.has(E)).map(([E,M])=>[E,{...M,value:[]}])),_=t&&[],x=n&&[],T=HZ().x(b?E=>b[E]:g).y(w?E=>w[E]:v).weight(d?E=>d[E]:1).size([y,m]).bandwidth(i),N=[];for(const E of a){const M=[];N.push(M);for(const $ of h?uE(E,h,p):[E]){const B=T.contours($);M.push([$,B])}}let I=s;if(!(I instanceof Of)){let E=0;for(const M of N)for(const[,$]of M){const B=$.max;B>E&&(E=B)}I=Float64Array.from({length:s-1},(M,$)=>E*100*($+1)/s)}const A=[],k=[];for(const E of N){const M=[];A.push(M);for(const[$,B]of E)for(const O of I){M.push(k.length),k.push(B(O/100)),_&&_.push(O),x&&x.push(O);for(const C in S)S[C].value.push(l[C].value[$[0]])}}return _&&_.push(0),x&&x.push(0),{data:o,facets:A,channels:{...S,..._&&{fill:{value:_,scale:"color"}},...x&&{stroke:{value:x,scale:"color"}},contours:{value:k}}}})}function gN(e){return/^density$/i.test(e)}const Klt={ariaLabel:"geo",fill:"none",stroke:"currentColor",strokeWidth:1,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class L7 extends ve{constructor(t,n={}){const[r,i]=Ke(n.r,3);super(t,{geometry:{value:n.geometry,scale:"projection"},r:{value:r,scale:"r",filter:Ao,optional:!0}},jE(n),Klt),this.r=i}render(t,n,r,i,s){const{geometry:o,r:a}=r,l=ol(s.projection??Zlt(n)),{r:c}=this;return bv(c)?t=[]:c!==void 0&&l.pointRadius(c),ee("svg:g",s).call(Ne,this,i,s).call(be,this,n).call(u=>{u.selectAll().data(t).enter().append("path").call(Ee,this).attr("d",a?f=>l.pointRadius(a[f])(o[f]):f=>l(o[f])).call(fn,this,r)}).node()}}function Zlt({x:e,y:t}){if(e||t)return e??(e=n=>n),t??(t=n=>n),c1({point(n,r){this.stream.point(e(n),t(r))}})}function KE(e,{geometry:t=gt,...n}={}){switch(e==null?void 0:e.type){case"FeatureCollection":e=e.features;break;case"GeometryCollection":e=e.geometries;break;case"Feature":case"LineString":case"MultiLineString":case"MultiPoint":case"MultiPolygon":case"Point":case"Polygon":case"Sphere":e=[e];break}return new L7(e,{geometry:t,...n})}function Jlt({strokeWidth:e=1.5,...t}={}){return KE({type:"Sphere"},{strokeWidth:e,...t})}function tct({strokeOpacity:e=.1,...t}={}){return KE(jJ(),{strokeOpacity:e,...t})}const kh=.5,Oh=0;function ect(e={fill:"count"},{binWidth:t,...n}={}){const{z:r}=n;return t=t===void 0?20:jt(t),e=nE(e,n),ba(e,"fill")&&(n.channels={...n.channels,fill:{value:[]}}),n.symbol===void 0&&(n.symbol="hexagon"),n.r===void 0&&!ba(e,"r")&&(n.r=t/2),wr(n,(i,s,o,a,l,c)=>{let{x:u,y:f,z:d,fill:h,stroke:p,symbol:g}=o;if(u===void 0)throw new Error("missing channel: x");if(f===void 0)throw new Error("missing channel: y");({x:u,y:f}=Av(o,a,c)),d=d?d.value:Ut(i,r),h=h==null?void 0:h.value,p=p==null?void 0:p.value,g=g==null?void 0:g.value;const v=sE(e,{z:d,fill:h,stroke:p,symbol:g}),y=d&&[],m=h&&[],b=p&&[],w=g&&[],S=[],_=[],x=[];let T=-1;for(const k of e)k.initialize(i);for(const k of s){const R=[];for(const E of e)E.scope("facet",k);for(const[E,M]of Ku(k,v))for(const $ of nct(M,u,f,t)){R.push(++T),_.push($.x),x.push($.y),d&&y.push(v===d?E:d[$[0]]),h&&m.push(v===h?E:h[$[0]]),p&&b.push(v===p?E:p[$[0]]),g&&w.push(v===g?E:g[$[0]]);for(const B of e)B.reduce($)}S.push(R)}const N=o.x.scale,I=o.y.scale,A={x:{value:_,source:a[N]?{value:_e(_,a[N].invert),scale:N}:null},y:{value:x,source:a[I]?{value:_e(x,a[I].invert),scale:I}:null},...d&&{z:{value:y}},...h&&{fill:{value:m,scale:"auto"}},...p&&{stroke:{value:b,scale:"auto"}},...g&&{symbol:{value:w,scale:"auto"}},...Object.fromEntries(e.map(({name:k,output:R})=>[k,{scale:"auto",label:R.label,radius:k==="r"?t/2:void 0,value:R.transform()}]))};return{data:i,facets:S,channels:A}})}function nct(e,t,n,r){const i=r*(1.5/oC),s=new Map;for(const o of e){let a=t[o],l=n[o];if(isNaN(a)||isNaN(l))continue;let c=Math.round(l=(l-Oh)/i),u=Math.round(a=(a-kh)/r-(c&1)/2),f=l-c;if(Math.abs(f)*3>1){let p=a-u,g=u+(a<u?-1:1)/2,v=c+(l<c?-1:1),y=a-g,m=l-v;p*p+f*f>y*y+m*m&&(u=g+(c&1?1:-1)/2,c=v)}const d=`${u},${c}`;let h=s.get(d);h===void 0&&(s.set(d,h=[]),h.x=(u+(c&1)/2)*r+kh,h.y=c*i+Oh),h.push(o)}return s.values()}const rct={ariaLabel:"hexgrid",fill:"none",stroke:"currentColor",strokeOpacity:.1};function ict(e){return new C7(e)}class C7 extends ve{constructor({binWidth:t=20,clip:n=!0,...r}={}){super(Dh,void 0,{clip:n,...r},rct),this.binWidth=jt(t)}render(t,n,r,i,s){const{binWidth:o}=this,{marginTop:a,marginRight:l,marginBottom:c,marginLeft:u,width:f,height:d}=i,h=u-kh,p=f-l-kh,g=a-Oh,v=d-c-Oh,y=o/2,m=y*aC,b=m/2,w=y*2,S=m*1.5,_=Math.floor(h/w),x=Math.ceil(p/w),T=Math.floor((g+b)/S),N=Math.ceil((v-b)/S)+1,I=`m0,${Jo(-m)}l${Jo(y)},${Jo(b)}v${Jo(m)}l${Jo(-y)},${Jo(b)}`;let A=I;for(let k=T;k<N;++k)for(let R=_;R<x;++R)A+=`M${Jo(R*w+(k&1)*y)},${Jo(k*S)}${I}`;return ee("svg:g",s).datum(0).call(Ne,this,i,s).call(be,this,{},xn+kh,xn+Oh).call(k=>k.append("path").call(Ee,this).call(fn,this,r).attr("d",A)).node()}}function Jo(e){return Math.round(e*1e3)/1e3}const sct={ariaLabel:"image",fill:null,stroke:null};function oct(e){return/^\.*\//.test(e)}function act(e){return/^(blob|data|file|http|https):/i.test(e)}function lct(e){return typeof e=="string"&&(oct(e)||act(e))?[void 0,e]:[e,void 0]}class U7 extends ve{constructor(t,n={}){let{x:r,y:i,r:s,width:o,height:a,rotate:l,src:c,preserveAspectRatio:u,crossOrigin:f,frameAnchor:d,imageRendering:h}=n;s==null&&(s=void 0),s===void 0&&o===void 0&&a===void 0?o=a=16:o===void 0&&a!==void 0?o=a:a===void 0&&o!==void 0&&(a=o);const[p,g]=lct(c),[v,y]=Ke(s),[m,b]=Ke(o,y!==void 0?y*2:void 0),[w,S]=Ke(a,y!==void 0?y*2:void 0),[_,x]=Ke(l,0);super(t,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},r:{value:v,scale:"r",filter:Ao,optional:!0},width:{value:m,filter:Ao,optional:!0},height:{value:w,filter:Ao,optional:!0},rotate:{value:_,optional:!0},src:{value:p,optional:!0}},jE(n),sct),this.src=g,this.width=b,this.rotate=x,this.height=S,this.r=y,this.preserveAspectRatio=Ve(u,"xMidYMid"),this.crossOrigin=Fn(f),this.frameAnchor=wy(d),this.imageRendering=Ve(h,"auto")}render(t,n,r,i,s){const{x:o,y:a}=n,{x:l,y:c,width:u,height:f,r:d,rotate:h,src:p}=r,{r:g,width:v,height:y,rotate:m}=this,[b,w]=qs(this,i);return ee("svg:g",s).call(Ne,this,i,s).call(be,this,{x:l&&o,y:c&&a}).call(S=>S.selectAll().data(t).enter().append("image").call(Ee,this).attr("x",bN(l,u,d,b,v,g)).attr("y",bN(c,f,d,w,y,g)).attr("width",u?_=>u[_]:v!==void 0?v:d?_=>d[_]*2:g*2).attr("height",f?_=>f[_]:y!==void 0?y:d?_=>d[_]*2:g*2).attr("transform",h?_=>`rotate(${h[_]})`:m?`rotate(${m})`:null).attr("transform-origin",h||m?kv`${l?_=>l[_]:b}px ${c?_=>c[_]:w}px`:null).call(ut,"href",p?_=>p[_]:this.src).call(ut,"preserveAspectRatio",this.preserveAspectRatio).call(ut,"crossorigin",this.crossOrigin).call(ut,"image-rendering",this.imageRendering).call(ut,"clip-path",d?_=>`circle(${d[_]}px)`:g!==void 0?`circle(${g}px)`:null).call(fn,this,r)).node()}}function bN(e,t,n,r,i,s){return t&&e?o=>e[o]-t[o]/2:t?o=>r-t[o]/2:e&&i!==void 0?o=>e[o]-i/2:i!==void 0?r-i/2:n&&e?o=>e[o]-n[o]:n?o=>r-n[o]:e?o=>e[o]-s:r-s}function cct(e,{x:t,y:n,...r}={}){return r.frameAnchor===void 0&&([t,n]=Ki(t,n)),new U7(e,{...r,x:t,y:n})}function uct(e,t,n){var r=1e-8,i=t-1,s=n-1,o=0,a,l,c,u,f,d,h,p,g,v,y;if(e<=0)return 0;if(e>=1)return 1;for(t>=1&&n>=1?(c=e<.5?e:1-e,u=Math.sqrt(-2*Math.log(c)),h=(2.30753+u*.27061)/(1+u*(.99229+u*.04481))-u,e<.5&&(h=-h),p=(h*h-3)/6,g=2/(1/(2*t-1)+1/(2*n-1)),v=h*Math.sqrt(p+g)/g-(1/(2*n-1)-1/(2*t-1))*(p+5/6-2/(3*g)),h=t/(t+n*Math.exp(2*v))):(a=Math.log(t/(t+n)),l=Math.log(n/(t+n)),u=Math.exp(t*a)/t,f=Math.exp(n*l)/n,v=u+f,e<u/v?h=Math.pow(t*v*e,1/t):h=1-Math.pow(n*v*(1-e),1/n)),y=-Ju(t)-Ju(n)+Ju(t+n);o<10;o++){if(h===0||h===1)return h;if(d=fct(h,t,n)-e,u=Math.exp(i*Math.log(h)+s*Math.log(1-h)+y),f=d/u,h-=u=f/(1-.5*Math.min(1,f*(i/h-s/(1-h)))),h<=0&&(h=.5*(h+u)),h>=1&&(h=.5*(h+u+1)),Math.abs(u)<r*h&&o>0)break}return h}function fct(e,t,n){var r=e===0||e===1?0:Math.exp(Ju(t+n)-Ju(t)-Ju(n)+t*Math.log(e)+n*Math.log(1-e));return e<0||e>1?!1:e<(t+1)/(t+n+2)?r*vN(e,t,n)/t:1-r*vN(1-e,n,t)/n}function vN(e,t,n){var r=1e-30,i=1,s=t+n,o=t+1,a=t-1,l=1,c=1-s*e/o,u,f,d,h;for(Math.abs(c)<r&&(c=r),c=1/c,h=c;i<=100&&(u=2*i,f=i*(n-i)*e/((a+u)*(t+u)),c=1+f*c,Math.abs(c)<r&&(c=r),l=1+f/l,Math.abs(l)<r&&(l=r),c=1/c,h*=c*l,f=-(t+i)*(s+i)*e/((t+u)*(o+u)),c=1+f*c,Math.abs(c)<r&&(c=r),l=1+f/l,Math.abs(l)<r&&(l=r),c=1/c,d=c*l,h*=d,!(Math.abs(d-1)<3e-7));i++);return h}function Ju(e){var t=0,n=[76.18009172947146,-86.5053203294167,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18],r=1.000000000190015,i,s,o;for(o=(s=i=e)+5.5,o-=(i+.5)*Math.log(o);t<6;t++)r+=n[t]/++s;return Math.log(2.506628274631*r/i)-o}function dct(e,t){var n=uct(2*Math.min(e,1-e),.5*t,.5);return n=Math.sqrt(t*(1-n)/n),e>.5?n:-n}const hct={ariaLabel:"linear-regression",fill:"currentColor",fillOpacity:.1,stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class P7 extends ve{constructor(t,n={}){const{x:r,y:i,z:s,ci:o=.95,precision:a=4}=n;if(super(t,{x:{value:r,scale:"x"},y:{value:i,scale:"y"},z:{value:ll(n),optional:!0}},n,hct),this.z=s,this.ci=+o,this.precision=+a,!(0<=this.ci&&this.ci<1))throw new Error(`invalid ci; not in [0, 1): ${o}`);if(!(this.precision>0))throw new Error(`invalid precision: ${a}`)}render(t,n,r,i,s){const{x:o,y:a,z:l}=r,{ci:c}=this;return ee("svg:g",s).call(Ne,this,i,s).call(be,this,n).call(u=>u.selectAll().data(l?uE(t,l,this.z):[t]).enter().call(f=>f.append("path").attr("fill","none").call(Ee,this).call(A1,this,{...r,fill:null,fillOpacity:null}).attr("d",d=>this._renderLine(d,o,a)).call(c&&!Ff(this.fill)?d=>d.select(pct).attr("stroke","none").call(Ee,this).call(A1,this,{...r,stroke:null,strokeOpacity:null,strokeWidth:null}).attr("d",h=>this._renderBand(h,o,a)):()=>{}))).node()}}function pct(){return this.parentNode.insertBefore(this.ownerDocument.createElementNS(vc.svg,"path"),this)}class yct extends P7{constructor(t,n){super(t,n)}_renderBand(t,n,r){const{ci:i,precision:s}=this,[o,a]=yn(t,u=>r[u]),l=B1(t,r,n),c=z7(t,r,n,(1-i)/2,l);return F3().y(u=>u).x0(u=>c(u,-1)).x1(u=>c(u,1))(Nr(o,a-s/2,s).concat(a))}_renderLine(t,n,r){const[i,s]=yn(t,a=>r[a]),o=B1(t,r,n);return`M${o(i)},${i}L${o(s)},${s}`}}class mct extends P7{constructor(t,n){super(t,n)}_renderBand(t,n,r){const{ci:i,precision:s}=this,[o,a]=yn(t,u=>n[u]),l=B1(t,n,r),c=z7(t,n,r,(1-i)/2,l);return F3().x(u=>u).y0(u=>c(u,-1)).y1(u=>c(u,1))(Nr(o,a-s/2,s).concat(a))}_renderLine(t,n,r){const[i,s]=yn(t,a=>n[a]),o=B1(t,n,r);return`M${i},${o(i)}L${s},${o(s)}`}}function gct(e,{y:t=Ir,x:n=gt,stroke:r,fill:i=We(r)?"currentColor":r,...s}={}){return new yct(e,OE({...s,x:n,y:t,fill:i,stroke:r}))}function bct(e,{x:t=Ir,y:n=gt,stroke:r,fill:i=We(r)?"currentColor":r,...s}={}){return new mct(e,kE({...s,x:t,y:n,fill:i,stroke:r}))}function B1(e,t,n){let r=0,i=0,s=0,o=0;for(const u of e){const f=t[u],d=n[u];r+=f,i+=d,s+=f*d,o+=f*f}const a=e.length,l=(a*s-r*i)/(a*o-r*r),c=(i-l*r)/a;return u=>l*u+c}function z7(e,t,n,r,i){const s=Ls(e,u=>t[u])/e.length;let o=0,a=0;for(const u of e)o+=(t[u]-s)**2,a+=(n[u]-i(t[u]))**2;const l=Math.sqrt(a/(e.length-2)),c=dct(r,e.length-2);return(u,f)=>{const d=i(u),h=l*Math.sqrt(1/e.length+(u-s)**2/o);return d+f*c*h}}function ix({path:e=gt,delimiter:t,frameAnchor:n,treeLayout:r=h1,treeSort:i,treeSeparation:s,treeAnchor:o,treeFilter:a,...l}={}){o=ZE(o),i=V7(i),a!=null&&(a=ox(a)),n===void 0&&(n=o.frameAnchor);const c=Y7(t),u=K7(l,ox),[f,d]=kr(),[h,p]=kr();return{x:f,y:h,frameAnchor:n,...Ys(l,(g,v)=>{const y=c(Ut(g,e)),m=d([]),b=p([]);let w=-1;const S=[],_=[],x=AB().path(N=>y[N]),T=r();T.nodeSize&&T.nodeSize([1,1]),T.separation&&s!==void 0&&T.separation(s??j3);for(const N of u)N[R1]=N[X7]([]);for(const N of v){const I=[],A=x(N.filter(k=>y[k]!=null)).each(k=>k.data=g[k.data]);i!=null&&A.sort(i),T(A);for(const k of A.descendants())if(!(a!=null&&!a(k))){I.push(++w),S[w]=k.data,o.position(k,w,m,b);for(const R of u)R[R1][w]=R[Q7](k)}_.push(I)}return{data:S,facets:_}}),...Object.fromEntries(u)}}function j7({path:e=gt,delimiter:t,curve:n="bump-x",stroke:r="#555",strokeWidth:i=1.5,strokeOpacity:s=.5,treeLayout:o=h1,treeSort:a,treeSeparation:l,treeAnchor:c,treeFilter:u,...f}={}){c=ZE(c),a=V7(a),u!=null&&(u=_N(u)),f={curve:n,stroke:r,strokeWidth:i,strokeOpacity:s,...f};const d=Y7(t),h=K7(f,_N),[p,g]=kr(),[v,y]=kr(),[m,b]=kr(),[w,S]=kr();return{x1:p,x2:v,y1:m,y2:w,...Ys(f,(_,x)=>{const T=d(Ut(_,e)),N=g([]),I=y([]),A=b([]),k=S([]);let R=-1;const E=[],M=[],$=AB().path(O=>T[O]),B=o();B.nodeSize&&B.nodeSize([1,1]),B.separation&&l!==void 0&&B.separation(l??j3);for(const O of h)O[R1]=O[X7]([]);for(const O of x){const C=[],F=$(O.filter(P=>T[P]!=null)).each(P=>P.data=_[P.data]);a!=null&&F.sort(a),B(F);for(const{source:P,target:z}of F.links())if(!(u!=null&&!u(z,P))){C.push(++R),E[R]=z.data,c.position(P,R,N,A),c.position(z,R,I,k);for(const H of h)H[R1][R]=H[Q7](z,P)}M.push(C)}return{data:E,facets:M}}),...Object.fromEntries(h)}}function ZE(e="left"){switch(`${e}`.trim().toLowerCase()){case"left":return vct;case"right":return wct}throw new Error(`invalid tree anchor: ${e}`)}const vct={frameAnchor:"left",dx:6,position({x:e,y:t},n,r,i){r[n]=t,i[n]=-e}},wct={frameAnchor:"right",dx:-6,position({x:e,y:t},n,r,i){r[n]=-t,i[n]=-e}};function V7(e){return e==null||typeof e=="function"?e:`${e}`.trim().toLowerCase().startsWith("node:")?wN(ox(e)):wN(_ct(e))}function wN(e){return(t,n)=>bi(e(t),e(n))}function _ct(e){return t=>{var n;return(n=t.data)==null?void 0:n[e]}}function Y7(e="/"){if(e=`${e}`,e==="/")return n=>n;if(e.length!==1)throw new Error("delimiter must be exactly one character");const t=e.charCodeAt(0);return n=>n.map(r=>Sct(r,t))}const sx=92,q7=47;function Sct(e,t){if(t===sx)throw new Error("delimiter cannot be backslash");let n=!1;for(let r=0,i=e.length;r<i;++r){switch(e.charCodeAt(r)){case sx:if(!n){n=!0;continue}break;case t:n?(e=e.slice(0,r-1)+e.slice(r),--r,--i):e=e.slice(0,r)+"/"+e.slice(r+1);break;case q7:n?(e=e.slice(0,r)+"\\\\"+e.slice(r),r+=2,i+=2):(e=e.slice(0,r)+"\\"+e.slice(r),++r,++i);break}n=!1}return e}function xct(e){let t=!1;for(let n=0,r=e.length;n<r;++n){switch(e.charCodeAt(n)){case sx:if(!t){t=!0;continue}case q7:t&&(e=e.slice(0,n-1)+e.slice(n),--n,--r);break}t=!1}return e}function W7(e){return _i(e)&&typeof e.node=="function"}function Ict(e){return _i(e)&&typeof e.link=="function"}function ox(e){if(W7(e))return e.node;if(e=`${e}`.trim().toLowerCase(),!!e.startsWith("node:")){switch(e){case"node:name":return lx;case"node:path":return ax;case"node:internal":return H7;case"node:external":return G7;case"node:depth":return cx;case"node:height":return ux}throw new Error(`invalid node value: ${e}`)}}function _N(e){if(W7(e))return e.node;if(Ict(e))return e.link;if(e=`${e}`.trim().toLowerCase(),!(!e.startsWith("node:")&&!e.startsWith("parent:"))){switch(e){case"parent:name":return L0(lx);case"parent:path":return L0(ax);case"parent:depth":return L0(cx);case"parent:height":return L0(ux);case"node:name":return lx;case"node:path":return ax;case"node:internal":return H7;case"node:external":return G7;case"node:depth":return cx;case"node:height":return ux}throw new Error(`invalid link value: ${e}`)}}function ax(e){return e.id}function lx(e){return Ect(e.id)}function cx(e){return e.depth}function ux(e){return e.height}function H7(e){return!!e.children}function G7(e){return!e.children}function L0(e){return(t,n)=>n==null?void 0:e(n)}function Ect(e){let t=e.length;for(;--t>0&&!Tct(e,t););return xct(e.slice(t+1))}function Tct(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}const X7=2,Q7=3,R1=4;function K7(e,t){const n=[];for(const r in e){const i=e[r],s=t(i);s!==void 0&&n.push([r,...kr(i),s])}return n}function Z7(e,{fill:t,stroke:n,strokeWidth:r,strokeOpacity:i,strokeLinejoin:s,strokeLinecap:o,strokeMiterlimit:a,strokeDasharray:l,strokeDashoffset:c,marker:u,markerStart:f=u,markerEnd:d=u,dot:h=We(f)&&We(d),text:p="node:name",textStroke:g="white",title:v="node:path",dx:y,dy:m,textAnchor:b,treeLayout:w=h1,textLayout:S=w===h1||w===IB?"mirrored":"normal",tip:_,...x}={}){if(y===void 0&&(y=ZE(x.treeAnchor).dx),b!==void 0)throw new Error("textAnchor is not a configurable tree option");S=Yr(S,"textLayout",["mirrored","normal"]);function T(N){return Rf(e,ix({treeLayout:w,text:p,fill:t===void 0?"currentColor":t,stroke:g,dx:y,dy:m,title:v,...N,...x}))}return Hi(l7(e,j7({treeLayout:w,markerStart:f,markerEnd:d,stroke:n!==void 0?n:t===void 0?"node:internal":t,strokeWidth:r,strokeOpacity:i,strokeLinejoin:s,strokeLinecap:o,strokeMiterlimit:a,strokeDasharray:l,strokeDashoffset:c,...x})),h?fl(e,ix({treeLayout:w,fill:t===void 0?"node:internal":t,title:v,tip:_,...x})):null,p!=null?S==="mirrored"?[T({textAnchor:"start",treeFilter:"node:external"}),T({textAnchor:"end",treeFilter:"node:internal",dx:-y})]:T():null)}function Act(e,t){return Z7(e,{...t,treeLayout:IB})}function Mct({geometry:e=gt,...t}={}){return wr({...t,x:null,y:null},(n,r,i,s,o,{projection:a})=>{const l=Ut(n,e),c=l.length,u=new Float64Array(c),f=new Float64Array(c),d=ol(a);for(let h=0;h<c;++h)[u[h],f[h]]=d.centroid(l[h]);return{data:n,facets:r,channels:{x:{value:u,scale:a==null?"x":null,source:null},y:{value:f,scale:a==null?"y":null,source:null}}}})}function $ct({geometry:e=gt,...t}={}){let n;return{...t,x:{transform:r=>Float64Array.from(n=Ut(Ut(r,e),NJ),([i])=>i)},y:{transform:()=>Float64Array.from(n,([,r])=>r)}}}function Nct(e,t,n,r,i){for(var s=i+1;r<=i;){var o=r+i>>>1,a=e[o],l=n!==void 0?n(a,t):a-t;l>=0?(s=o,i=o-1):r=o+1}return s}function Dct(e,t,n,r,i){for(var s=i+1;r<=i;){var o=r+i>>>1,a=e[o],l=n!==void 0?n(a,t):a-t;l>0?(s=o,i=o-1):r=o+1}return s}function kct(e,t,n,r,i){for(var s=r-1;r<=i;){var o=r+i>>>1,a=e[o],l=n!==void 0?n(a,t):a-t;l<0?(s=o,r=o+1):i=o-1}return s}function Oct(e,t,n,r,i){for(var s=r-1;r<=i;){var o=r+i>>>1,a=e[o],l=n!==void 0?n(a,t):a-t;l<=0?(s=o,r=o+1):i=o-1}return s}function Fct(e,t,n,r,i){for(;r<=i;){var s=r+i>>>1,o=e[s],a=n!==void 0?n(o,t):o-t;if(a===0)return s;a<=0?r=s+1:i=s-1}return-1}function jd(e,t,n,r,i,s){return typeof n=="function"?s(e,t,n,r===void 0?0:r|0,i===void 0?e.length-1:i|0):s(e,t,void 0,n===void 0?0:n|0,r===void 0?e.length-1:r|0)}var Bct={ge:function(e,t,n,r,i){return jd(e,t,n,r,i,Nct)},gt:function(e,t,n,r,i){return jd(e,t,n,r,i,Dct)},lt:function(e,t,n,r,i){return jd(e,t,n,r,i,kct)},le:function(e,t,n,r,i){return jd(e,t,n,r,i,Oct)},eq:function(e,t,n,r,i){return jd(e,t,n,r,i,Fct)}},L1=Bct,Fu=0,kl=1,wm=2,Rct=Cct;function JE(e,t,n,r,i){this.mid=e,this.left=t,this.right=n,this.leftPoints=r,this.rightPoints=i,this.count=(t?t.count:0)+(n?n.count:0)+r.length}var Ny=JE.prototype;function M_(e,t){e.mid=t.mid,e.left=t.left,e.right=t.right,e.leftPoints=t.leftPoints,e.rightPoints=t.rightPoints,e.count=t.count}function J7(e,t){var n=Pf(t);e.mid=n.mid,e.left=n.left,e.right=n.right,e.leftPoints=n.leftPoints,e.rightPoints=n.rightPoints,e.count=n.count}function SN(e,t){var n=e.intervals([]);n.push(t),J7(e,n)}function xN(e,t){var n=e.intervals([]),r=n.indexOf(t);return r<0?Fu:(n.splice(r,1),J7(e,n),kl)}Ny.intervals=function(e){return e.push.apply(e,this.leftPoints),this.left&&this.left.intervals(e),this.right&&this.right.intervals(e),e};Ny.insert=function(e){var t=this.count-this.leftPoints.length;if(this.count+=1,e[1]<this.mid)this.left?4*(this.left.count+1)>3*(t+1)?SN(this,e):this.left.insert(e):this.left=Pf([e]);else if(e[0]>this.mid)this.right?4*(this.right.count+1)>3*(t+1)?SN(this,e):this.right.insert(e):this.right=Pf([e]);else{var n=L1.ge(this.leftPoints,e,tT),r=L1.ge(this.rightPoints,e,eT);this.leftPoints.splice(n,0,e),this.rightPoints.splice(r,0,e)}};Ny.remove=function(e){var t=this.count-this.leftPoints;if(e[1]<this.mid){if(!this.left)return Fu;var n=this.right?this.right.count:0;if(4*n>3*(t-1))return xN(this,e);var r=this.left.remove(e);return r===wm?(this.left=null,this.count-=1,kl):(r===kl&&(this.count-=1),r)}else if(e[0]>this.mid){if(!this.right)return Fu;var i=this.left?this.left.count:0;if(4*i>3*(t-1))return xN(this,e);var r=this.right.remove(e);return r===wm?(this.right=null,this.count-=1,kl):(r===kl&&(this.count-=1),r)}else{if(this.count===1)return this.leftPoints[0]===e?wm:Fu;if(this.leftPoints.length===1&&this.leftPoints[0]===e){if(this.left&&this.right){for(var s=this,o=this.left;o.right;)s=o,o=o.right;if(s===this)o.right=this.right;else{var a=this.left,r=this.right;s.count-=o.count,s.right=o.left,o.left=a,o.right=r}M_(this,o),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?M_(this,this.left):M_(this,this.right);return kl}for(var a=L1.ge(this.leftPoints,e,tT);a<this.leftPoints.length&&this.leftPoints[a][0]===e[0];++a)if(this.leftPoints[a]===e){this.count-=1,this.leftPoints.splice(a,1);for(var r=L1.ge(this.rightPoints,e,eT);r<this.rightPoints.length&&this.rightPoints[r][1]===e[1];++r)if(this.rightPoints[r]===e)return this.rightPoints.splice(r,1),kl}return Fu}};function tU(e,t,n){for(var r=0;r<e.length&&e[r][0]<=t;++r){var i=n(e[r]);if(i)return i}}function eU(e,t,n){for(var r=e.length-1;r>=0&&e[r][1]>=t;--r){var i=n(e[r]);if(i)return i}}function nU(e,t){for(var n=0;n<e.length;++n){var r=t(e[n]);if(r)return r}}Ny.queryPoint=function(e,t){if(e<this.mid){if(this.left){var n=this.left.queryPoint(e,t);if(n)return n}return tU(this.leftPoints,e,t)}else if(e>this.mid){if(this.right){var n=this.right.queryPoint(e,t);if(n)return n}return eU(this.rightPoints,e,t)}else return nU(this.leftPoints,t)};Ny.queryInterval=function(e,t,n){if(e<this.mid&&this.left){var r=this.left.queryInterval(e,t,n);if(r)return r}if(t>this.mid&&this.right){var r=this.right.queryInterval(e,t,n);if(r)return r}return t<this.mid?tU(this.leftPoints,t,n):e>this.mid?eU(this.rightPoints,e,n):nU(this.leftPoints,n)};function Lct(e,t){return e-t}function tT(e,t){var n=e[0]-t[0];return n||e[1]-t[1]}function eT(e,t){var n=e[1]-t[1];return n||e[0]-t[0]}function Pf(e){if(e.length===0)return null;for(var t=[],n=0;n<e.length;++n)t.push(e[n][0],e[n][1]);t.sort(Lct);for(var r=t[t.length>>1],i=[],s=[],o=[],n=0;n<e.length;++n){var a=e[n];a[1]<r?i.push(a):r<a[0]?s.push(a):o.push(a)}var l=o,c=o.slice();return l.sort(tT),c.sort(eT),new JE(r,Pf(i),Pf(s),l,c)}function fx(e){this.root=e}var hd=fx.prototype;hd.insert=function(e){this.root?this.root.insert(e):this.root=new JE(e[0],null,null,[e],[e])};hd.remove=function(e){if(this.root){var t=this.root.remove(e);return t===wm&&(this.root=null),t!==Fu}return!1};hd.queryPoint=function(e,t){if(this.root)return this.root.queryPoint(e,t)};hd.queryInterval=function(e,t,n){if(e<=t&&this.root)return this.root.queryInterval(e,t,n)};Object.defineProperty(hd,"count",{get:function(){return this.root?this.root.count:0}});Object.defineProperty(hd,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}});function Cct(e){return!e||e.length===0?new fx(null):new fx(Pf(e))}const Uct=d4(Rct),Pct=({marginLeft:e})=>[1,e],zct=({width:e,marginRight:t})=>[-1,e-t],jct=({width:e,marginLeft:t,marginRight:n})=>[0,(t+e-n)/2],Vct=({marginTop:e})=>[1,e],Yct=({height:e,marginBottom:t})=>[-1,e-t],qct=({height:e,marginTop:t,marginBottom:n})=>[0,(t+e-n)/2];function rU(e){return typeof e=="string"?{anchor:e}:e}function Wct(e={},t={}){arguments.length===1&&([e,t]=iU(e));let{anchor:n="left",padding:r=1,r:i=t.r}=rU(e);switch(`${n}`.toLowerCase()){case"left":n=Pct;break;case"right":n=zct;break;case"middle":n=jct;break;default:throw new Error(`unknown dodge anchor: ${n}`)}return sU("x","y",n,jt(r),i,t)}function Hct(e={},t={}){arguments.length===1&&([e,t]=iU(e));let{anchor:n="bottom",padding:r=1,r:i=t.r}=rU(e);switch(`${n}`.toLowerCase()){case"top":n=Vct;break;case"bottom":n=Yct;break;case"middle":n=qct;break;default:throw new Error(`unknown dodge anchor: ${n}`)}return sU("y","x",n,jt(r),i,t)}function iU(e){const{anchor:t,padding:n,...r}=e,{r:i}=r;return[{anchor:t,padding:n,r:i},r]}function sU(e,t,n,r,i,s){if(i!=null&&typeof i!="number"){let{channels:o,sort:a,reverse:l}=s;o=H3(o),(o==null?void 0:o.r)===void 0&&(s={...s,channels:{...o,r:{value:i,scale:"r"}}}),a===void 0&&l===void 0&&(s.sort={channel:"-r"})}return wr(s,function(o,a,l,c,u,f){let{[t]:d,r:h}=l;if(!l[t])throw new Error(`missing channel: ${t}`);({[t]:d}=Av(l,c,f));const p=h?void 0:i!==void 0?jt(i):this.r!==void 0?this.r:3;h&&(h=Ut(h.value,c[h.scale]||gt,Float64Array));let[g,v]=n(u);const y=g?Xct:Gct,m=new Float64Array(d.length),b=h?w=>h[w]:()=>p;for(let w of a){const S=Uct();w=w.filter(h?x=>x1(d[x])&&Ao(h[x]):x=>x1(d[x]));const _=new Float64Array(2*w.length+2);for(const x of w){const T=b(x),N=g?T+r:0,I=d[x]-T,A=d[x]+T;let k=2;S.queryInterval(I-r,A+r,([,,E])=>{const M=m[E]-N,$=d[x]-d[E],B=r+(h?h[x]+h[E]:2*p),O=Math.sqrt(B*B-$*$);_[k++]=M-O,_[k++]=M+O});let R=_.slice(0,k);g&&(R=R.filter(E=>E>=0));t:for(const E of R.sort(y)){for(let M=0;M<k;M+=2)if(_[M]+1e-6<E&&E<_[M+1]-1e-6)continue t;m[x]=E+N;break}S.insert([I,A,x])}}g||(g=1);for(const w of a)for(const S of w)m[S]=m[S]*g+v;return{data:o,facets:a,channels:{[e]:{value:m,source:null},[t]:{value:d,source:l[t]},...h&&{r:{value:h,source:l.r}}}}})}function Gct(e,t){return Math.abs(e)-Math.abs(t)}function Xct(e,t){return e-t}function Qct(e,t){return arguments.length===1&&({basis:e,...t}=e),qE(nT(e),t)}function Kct(e,t){return arguments.length===1&&({basis:e,...t}=e),WE(nT(e),t)}function nT(e){if(e===void 0)return IN;if(typeof e=="function")return Vv(q3(e));if(/^p\d{2}$/i.test(e))return pd(V3(e));switch(`${e}`.toLowerCase()){case"deviation":return tut;case"first":return IN;case"last":return Jct;case"max":return eut;case"mean":return nut;case"median":return rut;case"min":return iut;case"sum":return sut;case"extent":return Zct}throw new Error(`invalid basis: ${e}`)}function Vv(e){return{mapIndex(t,n,r){const i=+e(t,n);for(const s of t)r[s]=n[s]===null?NaN:n[s]/i}}}function pd(e){return Vv((t,n)=>e(t,r=>n[r]))}const Zct={mapIndex(e,t,n){const[r,i]=yn(e,o=>t[o]),s=i-r;for(const o of e)n[o]=t[o]===null?NaN:(t[o]-r)/s}},IN=Vv((e,t)=>{for(let n=0;n<e.length;++n){const r=t[e[n]];if(Gn(r))return r}}),Jct=Vv((e,t)=>{for(let n=e.length-1;n>=0;--n){const r=t[e[n]];if(Gn(r))return r}}),tut={mapIndex(e,t,n){const r=Hb(e,s=>t[s]),i=ey(e,s=>t[s]);for(const s of e)n[s]=t[s]===null?NaN:i?(t[s]-r)/i:0}},eut=pd($e),nut=pd(Hb),rut=pd(fp),iut=pd(bn),sut=pd(Ls);function out(e,t={}){if(typeof e=="string")switch(e.toLowerCase()){case"first":return oU(t);case"last":return aU(t)}if(typeof e=="function")return qa(null,e,t);let n,r;for(n in e){if(r!==void 0)throw new Error("ambiguous selector; multiple inputs");r=aut(e[n])}if(r===void 0)throw new Error(`invalid selector: ${e}`);return qa(n,r,t)}function aut(e){if(typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"min":return rT;case"max":return iT}throw new Error(`unknown selector: ${e}`)}function oU(e){return qa(null,dut,e)}function aU(e){return qa(null,hut,e)}function lut(e){return qa("x",rT,e)}function cut(e){return qa("y",rT,e)}function uut(e){return qa("x",iT,e)}function fut(e){return qa("y",iT,e)}function*dut(e){yield e[0]}function*hut(e){yield e[e.length-1]}function*rT(e,t){yield OG(e,n=>t[n])}function*iT(e,t){yield c3(e,n=>t[n])}function qa(e,t,n){if(e!=null){if(n[e]==null)throw new Error(`missing channel: ${e}`);e=n[e]}const r=ll(n);return Ys(n,(i,s)=>{const o=Ut(i,r),a=Ut(i,e),l=[];for(const c of s){const u=[];for(const f of o?Vo(c,d=>o[d]).values():[c])for(const d of t(f,a))u.push(d);l.push(u)}return{data:i,facets:l}})}const EN=Object.freeze(Object.defineProperty({__proto__:null,Area:Lv,Arrow:c7,BarX:f7,BarY:d7,Cell:Cv,Contour:O7,Density:R7,Dot:Uv,Frame:Y5,Geo:L7,Hexgrid:C7,Image:U7,Line:Pv,Link:a7,Mark:ve,Raster:T7,Rect:zv,RuleX:n5,RuleY:r5,Text:Ov,TickX:b7,TickY:v7,Tip:q5,Vector:Fv,area:Iat,areaX:Ap,areaY:Uf,arrow:Nat,auto:jat,autoSpec:h7,axisFx:T5,axisFy:E5,axisX:EE,axisY:IE,barX:Yl,barY:ql,bin:Fl,binX:pa,binY:ya,bollinger:oc,bollingerX:alt,bollingerY:llt,boxX:ult,boxY:flt,cell:Ou,cellX:kat,cellY:Oat,centroid:Mct,circle:Lat,cluster:Act,column:kr,contour:Elt,crosshair:Alt,crosshairX:Mlt,crosshairY:$lt,delaunayLink:jlt,delaunayMesh:Vlt,density:Glt,dodgeX:Wct,dodgeY:Hct,dot:fl,dotX:Bat,dotY:Rat,filter:Qrt,formatIsoDate:yC,formatMonth:mit,formatWeekday:git,frame:ME,geo:KE,geoCentroid:$ct,graticule:tct,gridFx:k5,gridFy:N5,gridX:D5,gridY:$5,group:eE,groupX:xp,groupY:Ip,groupZ:tE,hexagon:Cat,hexbin:ect,hexgrid:ict,hull:Ylt,identity:gt,image:cct,indexOf:Ir,initializer:wr,interpolateNearest:D7,interpolateNone:rx,interpolatorBarycentric:N7,interpolatorRandomWalk:k7,legend:got,line:VE,lineX:Mp,lineY:$p,linearRegressionX:gct,linearRegressionY:bct,link:l7,map:Uo,mapX:qE,mapY:WE,marks:Hi,normalize:nT,normalizeX:Qct,normalizeY:Kct,plot:$E,pointer:vE,pointerX:wE,pointerY:_E,raster:hlt,rect:YE,rectX:O1,rectY:F1,reverse:Krt,ruleX:Va,ruleY:Ya,scale:Ac,select:out,selectFirst:oU,selectLast:aU,selectMaxX:uut,selectMaxY:fut,selectMinX:lut,selectMinY:cut,shuffle:Zrt,sort:lC,sphere:Jlt,spike:iot,stackX:e7,stackX1:lat,stackX2:cat,stackY:n7,stackY1:uat,stackY2:fat,text:Rf,textX:a5,textY:l5,tickX:w7,tickY:_7,tip:W5,transform:Ys,tree:Z7,treeLink:j7,treeNode:ix,valueof:Ut,vector:b5,vectorX:v5,vectorY:w5,voronoi:qlt,voronoiMesh:Wlt,window:jv,windowX:Xat,windowY:Qat},Symbol.toStringTag,{value:"Module"})),put=new Map([["style","style"],["width","width"],["height","height"],["margin","margin"],["marginLeft","marginLeft"],["marginRight","marginRight"],["marginTop","marginTop"],["marginBottom","marginBottom"],["align","align"],["aspectRatio","aspectRatio"],["axis","axis"],["inset","inset"],["grid","grid"],["label","label"],["padding","padding"],["round","round"],["xScale","x.type"],["xDomain","x.domain"],["xRange","x.range"],["xNice","x.nice"],["xInset","x.inset"],["xInsetLeft","x.insetLeft"],["xInsetRight","x.insetRight"],["xClamp","x.clamp"],["xRound","x.round"],["xAlign","x.align"],["xPadding","x.padding"],["xPaddingInner","x.paddingInner"],["xPaddingOuter","x.paddingOuter"],["xAxis","x.axis"],["xTicks","x.ticks"],["xTickSize","x.tickSize"],["xTickSpacing","x.tickSpacing"],["xTickPadding","x.tickPadding"],["xTickFormat","x.tickFormat"],["xTickRotate","x.tickRotate"],["xGrid","x.grid"],["xLine","x.line"],["xLabel","x.label"],["xLabelAnchor","x.labelAnchor"],["xLabelOffset","x.labelOffset"],["xFontVariant","x.fontVariant"],["xAriaLabel","x.ariaLabel"],["xAriaDescription","x.ariaDescription"],["xReverse","x.reverse"],["xZero","x.zero"],["yScale","y.type"],["yDomain","y.domain"],["yRange","y.range"],["yNice","y.nice"],["yInset","y.inset"],["yInsetTop","y.insetTop"],["yInsetBottom","y.insetBottom"],["yClamp","y.clamp"],["yRound","y.round"],["yAlign","y.align"],["yPadding","y.padding"],["yPaddingInner","y.paddingInner"],["yPaddingOuter","y.paddingOuter"],["yAxis","y.axis"],["yTicks","y.ticks"],["yTickSize","y.tickSize"],["yTickSpacing","y.tickSpacing"],["yTickPadding","y.tickPadding"],["yTickFormat","y.tickFormat"],["yTickRotate","y.tickRotate"],["yGrid","y.grid"],["yLine","y.line"],["yLabel","y.label"],["yLabelAnchor","y.labelAnchor"],["yLabelOffset","y.labelOffset"],["yFontVariant","y.fontVariant"],["yAriaLabel","y.ariaLabel"],["yAriaDescription","y.ariaDescription"],["yReverse","y.reverse"],["yZero","y.zero"],["facetMargin","facet.margin"],["facetMarginTop","facet.marginTop"],["facetMarginBottom","facet.marginBottom"],["facetMarginLeft","facet.marginLeft"],["facetMarginRight","facet.marginRight"],["facetGrid","facet.grid"],["facetLabel","facet.label"],["fxDomain","fx.domain"],["fxRange","fx.range"],["fxNice","fx.nice"],["fxInset","fx.inset"],["fxInsetLeft","fx.insetLeft"],["fxInsetRight","fx.insetRight"],["fxRound","fx.round"],["fxAlign","fx.align"],["fxPadding","fx.padding"],["fxPaddingInner","fx.paddingInner"],["fxPaddingOuter","fx.paddingOuter"],["fxAxis","fx.axis"],["fxTicks","fx.ticks"],["fxTickSize","fx.tickSize"],["fxTickSpacing","fx.tickSpacing"],["fxTickPadding","fx.tickPadding"],["fxTickFormat","fx.tickFormat"],["fxTickRotate","fx.tickRotate"],["fxGrid","fx.grid"],["fxLine","fx.line"],["fxLabel","fx.label"],["fxLabelAnchor","fx.labelAnchor"],["fxLabelOffset","fx.labelOffset"],["fxFontVariant","fx.fontVariant"],["fxAriaLabel","fx.ariaLabel"],["fxAriaDescription","fx.ariaDescription"],["fxReverse","fx.reverse"],["fyDomain","fy.domain"],["fyRange","fy.range"],["fyNice","fy.mice"],["fyInset","fy,inset"],["fyInsetTop","fy.insetTop"],["fyInsetBottom","fy.insetBottom"],["fyRound","fy.round"],["fyAlign","fy.align"],["fyPadding","fy.padding"],["fyPaddingInner","fy.paddingInner"],["fyPaddingOuter","fy.paddingOuter"],["fyAxis","fy.axis"],["fyTicks","fy.ticks"],["fyTickSize","fy.tickSize"],["fyTickSpacing","fy.tickSpacing"],["fyTickPadding","fy.tickPadding"],["fyTickFormat","fy.tickFormat"],["fyTickRotate","fy.tickRotate"],["fyGrid","fy.grid"],["fyLine","fy.line"],["fyLabel","fy.label"],["fyLabelAnchor","fy.labelAnchor"],["fyLabelOffset","fy.labelOffset"],["fyFontVariant","fy.fontVariant"],["fyAriaLabel","fy.ariaLabel"],["fyAriaDescription","fy.ariaDescription"],["fyReverse","fy.reverse"],["colorScale","color.type"],["colorDomain","color.domain"],["colorRange","color.range"],["colorClamp","color.clamp"],["colorNice","color.nice"],["colorScheme","color.scheme"],["colorInterpolate","color.interpolate"],["colorPivot","color.pivot"],["colorSymmetric","color.symmetric"],["colorLabel","color.label"],["colorReverse","color.reverse"],["colorZero","color.zero"],["colorTickFormat","color.tickFormat"],["opacityScale","opacity.type"],["opacityDomain","opacity.domain"],["opacityRange","opacity.range"],["opacityClamp","opacity.clamp"],["opacityNice","opacity.nice"],["opacityLabel","opacity.label"],["opacityReverse","opacity.reverse"],["opacityZero","opacity.zero"],["opacityTickFormat","opacity.tickFormat"],["rScale","r.type"],["rDomain","r.domain"],["rRange","r.range"],["rClamp","r.clamp"],["rNice","r.nice"],["rZero","r.zero"],["lengthScale","length.type"],["lengthDomain","length.domain"],["lengthRange","length.range"],["lengthClamp","length.clamp"],["lengthNice","length.nice"],["lengthZero","length.zero"],["projectionType","projection.type"],["projectionParallels","projection.parallels"],["projectionPrecision","projection.precision"],["projectionRotate","projection.rotate"],["projectionDomain","projection.domain"],["projectionInset","projection.inset"],["projectionInsetLeft","projection.insetLeft"],["projectionInsetRight","projection.insetRight"],["projectionInsetTop","projection.insetTop"],["projectionInsetBottom","projection.insetBottom"],["projectionClip","projection.clip"]]),yut=new Set(["frame","hexgrid","sphere","graticule"]);function mut(e,t,n){for(let r=0;r<t.length;++r){const i=t[r];r===t.length-1?e[i]=n:e=e[i]||(e[i]={})}}async function gut(e){const t={marks:[]},n=[],{attributes:r,marks:i}=e;for(const a in r){const l=put.get(a);if(l==null)throw new Error(`Unrecognized plot attribute: ${a}`);const c=r[a];typeof c=="symbol"?n.push(a):c!==void 0&&mut(t,l.split("."),c)}const s=[];for(const a of i)for(const{type:l,data:c,options:u}of a.plotSpecs())yut.has(l)?t.marks.push(EN[l](u)):t.marks.push(EN[l](c,u)),s.push(a.index);vut(t,e);const o=$E(t);wut(o,s),but(e,o,r,n);for(const a of e.interactors)await a.init(o);return o}function but(e,t,n,r){r.forEach(i=>{const s=n[i];if(s===oi){if(!i.endsWith("Domain"))throw new Error(`Unsupported fixed attribute: ${i}`);const o=i.slice(0,-6),a=t.scale(o);a!=null&&a.domain&&e.setAttribute(i,n[`${o}Reverse`]?a.domain.slice().reverse():a.domain)}else throw new Error(`Unrecognized symbol: ${s}`)})}function vut(e,t){const{marks:n}=t;C0("x",e,n,["x","x1","x2"]),C0("y",e,n,["y","y1","y2"]),C0("fx",e,n),C0("fy",e,n)}function C0(e,t,n,r=[e]){const i=t[e]||{};if(i.axis===null||i.label!==void 0)return;const s=n.map(u=>{var f;return(f=u.channelField(r))==null?void 0:f.field});if(s.every(u=>u==null))return;let o,a,l;for(let u=0;u<s.length;++u){const{column:f,label:d}=s[u]||{};f===void 0&&d===void 0||(o===void 0&&a===void 0?(o=f,a=d,l=_ut(n[u].data,r)||"number"):a!==d?a=void 0:o!==f&&(o=void 0))}let c=a||o;if(c!==void 0){if((l==="number"||l==="date")&&(e==="x"||e==="y")){i.percent&&(c=`${c} (%)`);const u=(e==="x"?1:-1)*(i.reverse?-1:1);e==="x"||i.labelAnchor==="center"?c=e==="x"==u<0?` ${c}`:`${c} `:c=`${u<0?" ":" "}${c}`}t[e]={...i,label:c}}}function wut(e,t){const n=e.querySelectorAll('g[aria-label="facet"]');if(n.length)for(const r of n)TN(r,t);else TN(e,t)}function TN(e,t){let n=-1;for(const r of e.children){const i=r.getAttribute("aria-label")||"";r.nodeName==="style"||i.includes("-axis")||i.includes("-grid")||r.setAttribute("data-index",t[++n])}}function _ut(e,t){for(const n of e)for(let r=0;r<t.length;++r){const i=n[t[r]];if(i!=null)return i instanceof Date?"date":typeof i}}const Sut={width:640,marginLeft:40,marginRight:20,marginTop:20,marginBottom:30};class xut{constructor(t){this.attributes={...Sut},this.listeners=null,this.interactors=[],this.legends=[],this.marks=[],this.markset=null,this.element=t||document.createElement("div"),this.element.setAttribute("class","plot"),this.element.style.display="flex",this.element.value=this,this.params=new Map,this.synch=zH()}margins(){return{left:this.getAttribute("marginLeft"),top:this.getAttribute("marginTop"),bottom:this.getAttribute("marginBottom"),right:this.getAttribute("marginRight")}}innerWidth(){const{left:t,right:n}=this.margins();return this.getAttribute("width")-t-n}innerHeight(){const{top:t,bottom:n}=this.margins();return this.getAttribute("height")-t-n}pending(t){this.synch.pending(t)}update(t){return this.synch.ready(t)&&!this.pendingRender&&(this.pendingRender=!0,requestAnimationFrame(()=>this.render())),this.synch.promise}async render(){this.pendingRender=!1;const t=await gut(this),n=this.legends.flatMap(({legend:r,include:i})=>{const s=r.init(t);return i?s:[]});this.element.replaceChildren(t,...n),this.synch.resolve()}getAttribute(t){return this.attributes[t]}setAttribute(t,n,r){var i,s;return OO(this.attributes[t],n)?(n===void 0?delete this.attributes[t]:this.attributes[t]=n,r!=null&&r.silent||(s=(i=this.listeners)==null?void 0:i.get(t))==null||s.forEach(o=>o(t,n)),!0):!1}addAttributeListener(t,n){const r=this.listeners||(this.listeners=new Map);return r.has(t)||r.set(t,new Set),r.get(t).add(n),this}removeAttributeListener(t,n){var r,i;return(i=(r=this.listeners)==null?void 0:r.get(t))==null?void 0:i.delete(n)}addParams(t,n){const{params:r}=this;for(const i of n)r.has(i)?r.get(i).push(t):(r.set(i,[t]),i.addEventListener("value",()=>Promise.allSettled(r.get(i).map(s=>s.requestQuery()))))}addMark(t){return t.setPlot(this,this.marks.length),this.marks.push(t),this.markset=null,this}get markSet(){return this.markset||(this.markset=new Set(this.marks))}addInteractor(t){return this.interactors.push(t),this}addLegend(t,n=!0){t.setPlot(this),this.legends.push({legend:t,include:n})}}function Ge(...e){const t=new xut;return e.flat().forEach(n=>n(t)),t.marks.forEach(n=>Xn().connect(n)),t.element}class Iut extends Map{request(t,n){if(this.has(t))n(this.get(t));else{const r=this.waiting||(this.waiting=new Map),i=r.get(t)||[];r.set(t,i.concat(n))}}set(t,n){this.has(t)&&console.warn(`Overwriting named plot "${t}".`);const{waiting:r}=this;return r!=null&&r.has(t)&&(r.get(t).forEach(i=>i(n)),r.delete(t)),super.set(t,n)}}const lU=new Iut;function Eut(e){return t=>lU.set(e,t)}function cU(e,t,n){$a(n)?(n.addEventListener("value",r=>{e.setAttribute(t,r),e.update()}),n.value!==void 0&&e.setAttribute(t,n.value)):e.setAttribute(t,n)}function uU(e,t){return n=>{cU(n,e,t)}}function sT(e){return t=>{for(const[n,r]of Object.entries(e))cU(t,n,r)}}function fU(e){const{top:t,bottom:n,left:r,right:i}=e,s={};return t!==void 0&&(s.marginTop=t),n!==void 0&&(s.marginBottom=n),r!==void 0&&(s.marginLeft=r),i!==void 0&&(s.marginRight=i),sT(s)}function C1(e){return sT({xDomain:e,yDomain:e})}const L=e=>t=>uU(e,t),dU=L("style"),Bi=L("width"),Ms=L("height"),Tut=L("margin"),dh=L("marginLeft"),dx=L("marginRight"),hx=L("marginTop"),Aut=L("marginBottom"),Mut=L("align"),$ut=L("aspectRatio"),Nut=L("axis"),Dut=L("inset"),kut=L("grid"),Out=L("label"),Fut=L("padding"),But=L("round"),Rut=L("xScale"),ri=L("xDomain"),Lut=L("xRange"),Cut=L("xNice"),Uut=L("xInset"),Put=L("xInsetLeft"),zut=L("xInsetRight"),jut=L("xClamp"),Vut=L("xRound"),Yut=L("xAlign"),qut=L("xPadding"),Wut=L("xPaddingInner"),Hut=L("xPaddingOuter"),hU=L("xAxis"),Gut=L("xTicks"),Xut=L("xTickSize"),Qut=L("xTickSpacing"),Kut=L("xTickPadding"),oT=L("xTickFormat"),Zut=L("xTickRotate"),Jut=L("xGrid"),tft=L("xLine"),eft=L("xLabel"),nft=L("xLabelAnchor"),rft=L("xLabelOffset"),ift=L("xFontVariant"),sft=L("xAriaLabel"),oft=L("xAriaDescription"),aft=L("xReverse"),lft=L("xZero"),px=L("yScale"),aT=L("yDomain"),cft=L("yRange"),uft=L("yNice"),fft=L("yInset"),dft=L("yInsetTop"),hft=L("yInsetBottom"),pft=L("yClamp"),yft=L("yRound"),mft=L("yAlign"),gft=L("yPadding"),bft=L("yPaddingInner"),vft=L("yPaddingOuter"),pU=L("yAxis"),wft=L("yTicks"),_ft=L("yTickSize"),Sft=L("yTickSpacing"),xft=L("yTickPadding"),Fh=L("yTickFormat"),Ift=L("yTickRotate"),U1=L("yGrid"),Eft=L("yLine"),yU=L("yLabel"),Tft=L("yLabelAnchor"),Aft=L("yLabelOffset"),Mft=L("yFontVariant"),$ft=L("yAriaLabel"),Nft=L("yAriaDescription"),mU=L("yReverse"),Dft=L("yZero"),kft=L("facetMargin"),Oft=L("facetMarginTop"),Fft=L("facetMarginBottom"),Bft=L("facetMarginLeft"),Rft=L("facetMarginRight"),Lft=L("facetGrid"),Cft=L("facetLabel"),Uft=L("fxDomain"),Pft=L("fxRange"),zft=L("fxNice"),jft=L("fxInset"),Vft=L("fxInsetLeft"),Yft=L("fxInsetRight"),qft=L("fxRound"),Wft=L("fxAlign"),Hft=L("fxPadding"),Gft=L("fxPaddingInner"),Xft=L("fxPaddingOuter"),Qft=L("fxAxis"),Kft=L("fxTicks"),Zft=L("fxTickSize"),Jft=L("fxTickSpacing"),tdt=L("fxTickPadding"),edt=L("fxTickFormat"),ndt=L("fxTickRotate"),rdt=L("fxGrid"),idt=L("fxLine"),sdt=L("fxLabel"),odt=L("fxLabelAnchor"),adt=L("fxLabelOffset"),ldt=L("fxFontVariant"),cdt=L("fxAriaLabel"),udt=L("fxAriaDescription"),fdt=L("fxReverse"),ddt=L("fyDomain"),hdt=L("fyRange"),pdt=L("fyNice"),ydt=L("fyInset"),mdt=L("fyInsetTop"),gdt=L("fyInsetBottom"),bdt=L("fyRound"),vdt=L("fyAlign"),wdt=L("fyPadding"),_dt=L("fyPaddingInner"),Sdt=L("fyPaddingOuter"),xdt=L("fyAxis"),Idt=L("fyTicks"),Edt=L("fyTickSize"),Tdt=L("fyTickSpacing"),Adt=L("fyTickPadding"),Mdt=L("fyTickFormat"),$dt=L("fyTickRotate"),Ndt=L("fyGrid"),Ddt=L("fyLine"),kdt=L("fyLabel"),Odt=L("fyLabelAnchor"),Fdt=L("fyLabelOffset"),Bdt=L("fyFontVariant"),Rdt=L("fyAriaLabel"),Ldt=L("fyAriaDescription"),Cdt=L("fyReverse"),yx=L("colorScale"),mx=L("colorDomain"),gx=L("colorRange"),Udt=L("colorClamp"),Pdt=L("colorNice"),tf=L("colorScheme"),zdt=L("colorInterpolate"),jdt=L("colorPivot"),Vdt=L("colorSymmetric"),Ydt=L("colorLabel"),qdt=L("colorReverse"),Wdt=L("colorZero"),Hdt=L("colorTickFormat"),Gdt=L("opacityScale"),Xdt=L("opacityDomain"),Qdt=L("opacityRange"),Kdt=L("opacityClamp"),Zdt=L("opacityNice"),Jdt=L("opacityLabel"),tht=L("opacityReverse"),eht=L("opacityZero"),nht=L("opacityTickFormat"),rht=L("rScale"),gU=L("rDomain"),bU=L("rRange"),iht=L("rClamp"),sht=L("rNice"),oht=L("rZero"),aht=L("lengthScale"),lht=L("lengthDomain"),cht=L("lengthRange"),uht=L("lengthClamp"),fht=L("lengthNice"),dht=L("lengthZero"),vU=L("projectionType"),hht=L("projectionParallels"),pht=L("projectionPrecision"),wU=L("projectionRotate"),yht=L("projectionDomain"),mht=L("projectionInset"),ght=L("projectionInsetLeft"),bht=L("projectionInsetRight"),vht=L("projectionInsetTop"),wht=L("projectionInsetBottom"),_ht=L("projectionClip"),Sht=Object.freeze(Object.defineProperty({__proto__:null,align:Mut,aspectRatio:$ut,attribute:uU,attributes:sT,axis:Nut,colorClamp:Udt,colorDomain:mx,colorInterpolate:zdt,colorLabel:Ydt,colorNice:Pdt,colorPivot:jdt,colorRange:gx,colorReverse:qdt,colorScale:yx,colorScheme:tf,colorSymmetric:Vdt,colorTickFormat:Hdt,colorZero:Wdt,facetGrid:Lft,facetLabel:Cft,facetMargin:kft,facetMarginBottom:Fft,facetMarginLeft:Bft,facetMarginRight:Rft,facetMarginTop:Oft,fxAlign:Wft,fxAriaDescription:udt,fxAriaLabel:cdt,fxAxis:Qft,fxDomain:Uft,fxFontVariant:ldt,fxGrid:rdt,fxInset:jft,fxInsetLeft:Vft,fxInsetRight:Yft,fxLabel:sdt,fxLabelAnchor:odt,fxLabelOffset:adt,fxLine:idt,fxNice:zft,fxPadding:Hft,fxPaddingInner:Gft,fxPaddingOuter:Xft,fxRange:Pft,fxReverse:fdt,fxRound:qft,fxTickFormat:edt,fxTickPadding:tdt,fxTickRotate:ndt,fxTickSize:Zft,fxTickSpacing:Jft,fxTicks:Kft,fyAlign:vdt,fyAriaDescription:Ldt,fyAriaLabel:Rdt,fyAxis:xdt,fyDomain:ddt,fyFontVariant:Bdt,fyGrid:Ndt,fyInset:ydt,fyInsetBottom:gdt,fyInsetTop:mdt,fyLabel:kdt,fyLabelAnchor:Odt,fyLabelOffset:Fdt,fyLine:Ddt,fyNice:pdt,fyPadding:wdt,fyPaddingInner:_dt,fyPaddingOuter:Sdt,fyRange:hdt,fyReverse:Cdt,fyRound:bdt,fyTickFormat:Mdt,fyTickPadding:Adt,fyTickRotate:$dt,fyTickSize:Edt,fyTickSpacing:Tdt,fyTicks:Idt,grid:kut,height:Ms,inset:Dut,label:Out,lengthClamp:uht,lengthDomain:lht,lengthNice:fht,lengthRange:cht,lengthScale:aht,lengthZero:dht,margin:Tut,marginBottom:Aut,marginLeft:dh,marginRight:dx,marginTop:hx,margins:fU,name:Eut,opacityClamp:Kdt,opacityDomain:Xdt,opacityLabel:Jdt,opacityNice:Zdt,opacityRange:Qdt,opacityReverse:tht,opacityScale:Gdt,opacityTickFormat:nht,opacityZero:eht,padding:Fut,projectionClip:_ht,projectionDomain:yht,projectionInset:mht,projectionInsetBottom:wht,projectionInsetLeft:ght,projectionInsetRight:bht,projectionInsetTop:vht,projectionParallels:hht,projectionPrecision:pht,projectionRotate:wU,projectionType:vU,rClamp:iht,rDomain:gU,rNice:sht,rRange:bU,rScale:rht,rZero:oht,round:But,style:dU,width:Bi,xAlign:Yut,xAriaDescription:oft,xAriaLabel:sft,xAxis:hU,xClamp:jut,xDomain:ri,xFontVariant:ift,xGrid:Jut,xInset:Uut,xInsetLeft:Put,xInsetRight:zut,xLabel:eft,xLabelAnchor:nft,xLabelOffset:rft,xLine:tft,xNice:Cut,xPadding:qut,xPaddingInner:Wut,xPaddingOuter:Hut,xRange:Lut,xReverse:aft,xRound:Vut,xScale:Rut,xTickFormat:oT,xTickPadding:Kut,xTickRotate:Zut,xTickSize:Xut,xTickSpacing:Qut,xTicks:Gut,xZero:lft,xyDomain:C1,yAlign:mft,yAriaDescription:Nft,yAriaLabel:$ft,yAxis:pU,yClamp:pft,yDomain:aT,yFontVariant:Mft,yGrid:U1,yInset:fft,yInsetBottom:hft,yInsetTop:dft,yLabel:yU,yLabelAnchor:Tft,yLabelOffset:Aft,yLine:Eft,yNice:uft,yPadding:gft,yPaddingInner:bft,yPaddingOuter:vft,yRange:cft,yReverse:mU,yRound:yft,yScale:px,yTickFormat:Fh,yTickPadding:xft,yTickRotate:Ift,yTickSize:_ft,yTickSpacing:Sft,yTicks:wft,yZero:Dft},Symbol.toStringTag,{value:"Module"}));function Oe(e,t){return{table:e,options:t}}function lT(e){return typeof e!="string"?!1:(e=e.toLowerCase().trim(),e==="none"||e==="currentcolor"||e.startsWith("url(")&&e.endsWith(")")||e.startsWith("var(")&&e.endsWith(")")||Pa(e)!==null)}const xht=new Set(["order","sort","label","anchor","curve","tension","marker","markerStart","markerMid","markerEnd","textAnchor","lineAnchor","lineHeight","textOverflow","monospace","fontFamily","fontSize","fontStyle","fontVariant","fontWeight","frameAnchor","strokeLinejoin","strokeLinecap","strokeMiterlimit","strokeDasharray","strokeDashoffset","mixBlendMode","shapeRendering","imageRendering","preserveAspectRatio","interpolate","crossOrigin","paintOrder","pointerEvents"]);function Iht(e){return xht.has(e)}const Eht=new Set(["asterisk","circle","cross","diamond","diamond2","hexagon","plus","square","square2","star","times","triangle","triangle2","wye"]);function Tht(e){return Eht.has(`${e}`.toLowerCase())}function cT(e){return typeof(e==null?void 0:e.getChild)=="function"}const Aht=2,Mht=10;function _U(e){return cT(e)?$ht(e):e}function $ht(e){const{batches:t,numRows:n}=e;if(!n)return[];const r=Array.from({length:n},()=>({}));for(let i=0,s=0;s<t.length;++s){const o=t[s],{schema:a,numRows:l,numCols:c}=o;for(let u=0;u<c;++u){const f=o.getChildAt(u),{name:d,type:h}=a.fields[u],p=Nht(h);for(let g=i,v=0;v<l;++v,++g)r[g][d]=p(f.get(v))}i+=l}return r}function Nht(e){const{typeId:t}=e;return t===Mht?n=>n==null?n:new Date(n):t===Aht&&e.bitWidth>=64?n=>n==null?n:Number(n):n=>n}const SU=e=>e==="stroke"||e==="fill",Dht=e=>e==="symbol",kht=(e,t)=>e!=="sort"&&t!=null&&!Array.isArray(t),$_=(e,t)=>({channel:e,field:t,as:t instanceof Ra?t.column:e}),N_=(e,t)=>({channel:e,value:t});class yd extends ty{constructor(t,n,r,i={}){var l;super((l=n==null?void 0:n.options)==null?void 0:l.filterBy),this.type=t,this.reqs=i,this.source=n,Array.isArray(this.source)&&(this.data=this.source);const s=this.channels=[],o=this.params=new Set,a=(c,u)=>{const f=typeof u;if(f==="function"&&u[jO]){const d=u(this,c);for(const h in d)a(h,d[h])}else if(f==="string")Iht(c)||SU(c)&&lT(u)||Dht(c)&&Tht(u)?s.push(N_(c,u)):s.push($_(c,t3(u)));else if(Sf(u))if(Array.isArray(u.columns))s.push($_(c,u)),o.add(u);else{const d=N_(c,u.value);s.push(d),u.addEventListener("value",h=>(d.value=h,this.update()))}else f==="object"&&kht(c,u)?s.push($_(c,u)):u!==void 0&&s.push(N_(c,u))};for(const c in r)a(c,r[c])}setPlot(t,n){var r;this.plot=t,this.index=n,t.addParams(this,this.params),(r=this.source)!=null&&r.table&&this.queryPending()}hasOwnData(){return this.source==null||Array.isArray(this.source)}channel(t){return this.channels.find(n=>n.channel===t)}channelField(...t){const n=t.flat();for(const r of n){const i=this.channel(r);if(i!=null&&i.field)return i}return null}fields(){var s,o,a;if(this.hasOwnData())return null;const{source:{table:t},channels:n,reqs:r}=this,i=new Map;for(const{channel:l,field:c}of n){const u=c==null?void 0:c.column;if(u){if((s=c.stats)!=null&&s.length||r[l]){i.has(u)||i.set(u,new Set);const f=i.get(u);(o=r[l])==null||o.forEach(d=>f.add(d)),(a=c.stats)==null||a.forEach(d=>f.add(d))}}else continue}return Array.from(i,([l,c])=>({table:t,column:l,stats:Array.from(c)}))}fieldInfo(t){return this.stats=t.reduce((n,r)=>(n[r.column]=r,n),Object.create(null)),this}query(t=[]){if(this.hasOwnData())return null;const{channels:n,source:{table:r}}=this;return xU(n,r).where(t)}queryPending(){return this.plot.pending(this),this}queryResult(t){return this.data=_U(t),this}update(){return this.plot.update(this)}plotSpecs(){const{type:t,data:n,channels:r}=this,i={};for(const s of r)i[s.channel]=va(s);return[{type:t,data:n,options:i}]}}function va(e){return Object.hasOwn(e,"value")?e.value:SU(e.channel)?{value:e.as,scale:"color"}:e.as}function xU(e,t,n=[]){const r=Lt.from({source:t}),i=new Set;let s=!1;for(const o of e){const{channel:a,field:l,as:c}=o;if(!n.includes(a)){if(a==="order")r.orderby(o.value);else if(l){if(l.aggregate)s=!0;else{if(i.has(c))continue;i.add(c)}r.select({[c]:l})}}}return s&&r.groupby(Array.from(i)),r}function Wa(e,t,n){if(!e.stats)return r;const{field:r}=e.channelField(t),{type:i}=e.stats[r.column];return n=n??r,i==="date"?AO(n):n}function bx(e,t,n,r,i=!1,s=1){const o=(r-s)/(n-t),a=o!==1?` * ${o}::DOUBLE`:"";return i?G`(${+n} - ${e}::DOUBLE)${a}`:G`(${e}::DOUBLE - ${+t})${a}`}const IU={x:["min","max"]},EU={y:["min","max"]},TU={...IU,...EU};function AU(e,t,n,r,i){const{plot:s,stats:o}=e,a=s.getAttribute(r),l=s.getAttribute(i);if(Array.isArray(a)&&!a[mc])return a;{const{field:c}=e.channelField(n),{column:u}=c,{min:f,max:d}=o[u],h=MU(t,u)||(l?av().domain([f,d]).nice().domain():[f,d]);return a!==oi&&(h[mc]=!0),s.setAttribute(r,h,{silent:!0}),h}}function Dy(e,t){return AU(e,t,"x","xDomain","xNice")}function ky(e,t){return AU(e,t,"y","yDomain","yNice")}function MU(e,t){if(!e)return;let n,r;const i=(s,o)=>{if(s==="BETWEEN"&&o.field.column===t){const{range:a}=o;a&&(n==null||a[0]<n)&&(n=a[0]),a&&(r==null||a[1]>r)&&(r=a[1])}};return Array.isArray(e)?e.forEach(s=>{var o;return(o=s.visit)==null?void 0:o.call(s,i)}):e.visit&&e.visit(i),n!=null&&r!=null&&n!==r?[n,r]:void 0}class Oht extends yd{constructor(t,n,r){const i=t.endsWith("X")?"y":"x",s={[i]:["count","min","max"]};super(t,n,r,s),this.dim=i}query(t=[]){const{plot:n,dim:r,source:i,stats:s}=this,{optimize:o=!0}=i.options||{},{field:a,as:l}=this.channelField(r),c=super.query(t);if(o){const{column:u}=a,{count:f,max:d,min:h}=s[u],p=r==="x"?n.innerWidth():n.innerHeight(),[g,v]=MU(t,u)||[h,d],y=(v-g)/(d-h);if(f*y>p*4){const m=Wa(this,r,l),b=this.channelField(r==="x"?"y":"x").as,w=c.select().map(S=>S.as).filter(S=>S!==l&&S!==b);return Fht(c,m,l,b,g,v,p,w)}}return c.orderby(l)}}function Fht(e,t,n,r,i,s,o,a=[]){const l=G`FLOOR(${o/(s-i)}::DOUBLE * (${t} - ${+i}::DOUBLE))::INTEGER`,c=u=>Lt.from(e).select(u).groupby(l,a);return Lt.union(c([{[n]:ap(n),[r]:kM(r,n)},...a]),c([{[n]:op(n),[r]:OM(r,n)},...a]),c([{[n]:kM(n,r),[r]:ap(r)},...a]),c([{[n]:OM(n,r),[r]:op(r)},...a])).orderby(a,n)}function vx(e,t=!1){const n=new Float64Array(5),r=new Float64Array(4);Bht(n,r,e);const i=Float64Array.of(0,r[1]-n[1]*r[0],r[2]-n[2]*r[0],r[3]-n[3]*r[0],-n[4]*r[0]),s=1+n[1]+n[2]+n[3]+n[4],o=(r[0]+r[1]+r[2]+r[3])/s,a=(i[1]+i[2]+i[3]+i[4])/s;return{sigma:e,negative:t,a:n,b_causal:r,b_anticausal:i,sum_causal:o,sum_anticausal:a}}function Bht(e,t,n){const i=Float64Array.of(.84,1.8675,.84,-1.8675,-.34015,-.1299,-.34015,.1299),s=Math.exp(-1.783/n),o=Math.exp(-1.723/n),a=.6318/n,l=1.997/n,c=Float64Array.of(-s*Math.cos(a),s*Math.sin(a),-s*Math.cos(-a),s*Math.sin(-a),-o*Math.cos(l),o*Math.sin(l),-o*Math.cos(-l),o*Math.sin(-l)),u=n*2.5066282746310007,f=Float64Array.of(i[0],i[1],0,0,0,0,0,0),d=Float64Array.of(1,0,c[0],c[1],0,0,0,0,0,0);let h,p;for(p=2;p<8;p+=2){for(f[p]=c[p]*f[p-2]-c[p+1]*f[p-1],f[p+1]=c[p]*f[p-1]+c[p+1]*f[p-2],h=p-2;h>0;h-=2)f[h]+=c[p]*f[h-2]-c[p+1]*f[h-1],f[h+1]+=c[p]*f[h-1]+c[p+1]*f[h-2];for(h=0;h<=p;h+=2)f[h]+=i[p]*d[h]-i[p+1]*d[h+1],f[h+1]+=i[p]*d[h+1]+i[p+1]*d[h];for(d[p+2]=c[p]*d[p]-c[p+1]*d[p+1],d[p+3]=c[p]*d[p+1]+c[p+1]*d[p],h=p;h>0;h-=2)d[h]+=c[p]*d[h-2]-c[p+1]*d[h-1],d[h+1]+=c[p]*d[h-1]+c[p+1]*d[h-2]}for(p=0;p<4;++p)h=p<<1,t[p]=f[h]/u,e[p+1]=d[h+2]}function Rht(e,t,n,[r,i]){const s=new Float64Array(Math.max(r,i)),o=new Float64Array(Math.max(r,i)),a=new Float64Array(5),l=new Float64Array(n.length);for(let c=0,u=0;c<i;++c,u+=r){const f=l.subarray(u);wx(e,n.subarray(u),r,1,s,o,a,f)}for(let c=0;c<r;++c){const u=l.subarray(c);wx(t,u,i,r,s,o,a,u)}return l}function wx(e,t,n,r=1,i=new Float64Array(n),s=new Float64Array(n),o=new Float64Array(5),a=i,l=Lht){const c=r*2,u=r*3,f=r*4,d=r*n;let h,p;for(l(i,t,n,r,e.b_causal,3,e.a,4,e.sum_causal,o,e.sigma),p=4,h=f;p<n;++p,h+=r)i[p]=e.b_causal[0]*t[h]+e.b_causal[1]*t[h-r]+e.b_causal[2]*t[h-c]+e.b_causal[3]*t[h-u]-e.a[1]*i[p-1]-e.a[2]*i[p-2]-e.a[3]*i[p-3]-e.a[4]*i[p-4];for(l(s,t,n,-r,e.b_anticausal,4,e.a,4,e.sum_anticausal,o,e.sigma),p=4,h=d-r*5;p<n;++p,h-=r)s[p]=e.b_anticausal[1]*t[h+r]+e.b_anticausal[2]*t[h+c]+e.b_anticausal[3]*t[h+u]+e.b_anticausal[4]*t[h+f]-e.a[1]*s[p-1]-e.a[2]*s[p-2]-e.a[3]*s[p-3]-e.a[4]*s[p-4];if(e.negative)for(p=0,h=0;p<n;++p,h+=r)a[h]=i[p]+s[n-p-1];else for(p=0,h=0;p<n;++p,h+=r)a[h]=Math.max(0,i[p]+s[n-p-1]);return a}function Lht(e,t,n,r,i,s,o,a,l,c){const u=Math.abs(r)*n,f=r<0?u+r:0;let d,h,p;for(h=0;h<a;++h)for(c[h]=h<=s?i[h]:0,p=1;p<=a&&p<=h;++p)c[h]-=o[p]*c[h-p];for(p=0;p<a;++p)for(e[p]=0,h=1;h<=p;++h)d=f+r*h,d>=0&&d<u&&(e[p]+=c[p-h]*t[d]);const g=t[f];if(g>0)for(p=0;p<a;++p)e[p]+=c[p]*g}function Cht(e,t){return $U(new Float64Array(e),t)}function Uht(e,t,n,r=[]){return r.length?Object.values(Pht(e*t,n,r)):[{grid:$U(new Float64Array(e*t),n)}]}function $U(e,t){if(cT(t)){const n=t.numRows;if(n===0)return e;const r=t.getChild("index").toArray(),i=t.getChild("value").toArray();for(let s=0;s<n;++s)e[r[s]]=i[s]}else for(const n of t)e[n.index]=n.value;return e}function Pht(e,t,n){const r={},i=s=>(r[s]||(r[s]={key:s,grid:new Float64Array(e)})).grid;if(cT(t)){const s=t.numRows;if(s===0)return r;const o=t.getChild("index").toArray(),a=t.getChild("value").toArray(),l=n.map(c=>t.getChild(c));for(let c=0;c<s;++c){const u=l.map(f=>f.get(c));i(u)[o[c]]=a[c]}}else for(const s of t){const o=n.map(a=>s[a]);i(o)[s.index]=s.value}return r}function fi(e,t,n,r){$a(n)?(r=r||(()=>e.requestUpdate()),n.addEventListener("value",i=>(e[t]=i,r())),e[t]=n.value):e[t]=n}class NU extends yd{constructor(t,n,r){const{bins:i=1024,bandwidth:s=20,...o}=r,a=t.endsWith("X")?"y":"x";super(t,n,o,a==="x"?IU:EU),this.dim=a,fi(this,"bins",i),fi(this,"bandwidth",s,()=>this.grid?this.convolve().update():null)}get filterIndexable(){const t=this.dim==="x"?"xDomain":"yDomain",n=this.plot.getAttribute(t);return n&&!n[mc]}query(t=[]){if(this.hasOwnData())throw new Error("Density1DMark requires a data source");const{bins:n,channels:r,dim:i,source:{table:s}}=this,[o,a]=this.extent=(i==="x"?Dy:ky)(this,t),l=Wa(this,i);return zht(xU(r,s,[i]).where(t.concat(Rr(l,[o,a]))),bx(l,o,a,n),this.channelField("weight")?"weight":null)}queryResult(t){return this.grid=Cht(this.bins,t),this.convolve()}convolve(){const{bins:t,bandwidth:n,dim:r,grid:i,plot:s,extent:[o,a]}=this,l=i.some(m=>m<0),c=r==="x"?s.innerWidth():s.innerHeight(),u=vx(n*(t-1)/c,l),f=wx(u,i,t),d=this.data=[],h=r==="x"?"y":"x",p=this.channelField(r).as,g=+o,v=(a-g)/(t-1),y=1/v;for(let m=0;m<t;++m)d.push({[p]:g+m*v,[h]:f[m]*y});return this}plotSpecs(){const{type:t,data:n,channels:r,dim:i}=this,s=i==="x"?{y:"y"}:{x:"x"};for(const o of r)s[o.channel]=va(o);return[{type:t,data:n,options:s}]}}function zht(e,t,n){const r=n?`* ${n}`:"",i=e.clone().select({p:t,i:G`FLOOR(p)::INTEGER`,w:G`(FLOOR(p) + 1 - p)${r}`}),s=e.clone().select({p:t,i:G`FLOOR(p)::INTEGER + 1`,w:G`(p - FLOOR(p))${r}`});return Lt.from(Lt.unionAll(i,s)).select({index:"i",value:ed("w")}).groupby("index").having(TO("value",0))}class Yv extends yd{constructor(t,n,r){const{bandwidth:i=20,binType:s="linear",binWidth:o=2,binPad:a=1,...l}=r,c=jht(l);super(t,n,l,TU),this.densityMap=c,fi(this,"bandwidth",i,()=>this.grids?this.convolve().update():null),fi(this,"binWidth",o),fi(this,"binType",s),fi(this,"binPad",a)}setPlot(t,n){const r=()=>{this.stats&&this.requestUpdate()};return t.addAttributeListener("domainX",r),t.addAttributeListener("domainY",r),super.setPlot(t,n)}get filterIndexable(){const t=this.plot.getAttribute("xDomain"),n=this.plot.getAttribute("yDomain");return t&&n&&!t[mc]&&!n[mc]}query(t=[]){const{plot:n,binType:r,binPad:i,channels:s,densityMap:o,source:a}=this,[l,c]=this.extentX=Dy(this,t),[u,f]=this.extentY=ky(this,t),[d,h]=this.bins=this.binDimensions(this),p=Wa(this,"x"),g=Wa(this,"y"),v=!!n.getAttribute("xReverse"),y=!!n.getAttribute("yReverse"),m=AN(p,l,c,d,v,this.binPad),b=AN(g,u,f,h,y,this.binPad),w=i?[Rr(p,[l,c]),Rr(g,[u,f])]:[kg(l,p),Dg(p,c),kg(u,g),Dg(g,f)],S=Lt.from(a.table).where(t.concat(w)),_=this.groupby=[];let x=hr();for(const T of s)if(Object.hasOwn(T,"field")){const{as:N,channel:I,field:A}=T;A.aggregate?(x=A,o[I]=!0):I==="weight"?x=ed(A):I!=="x"&&I!=="y"&&(S.select({[N]:A}),_.push(N))}return r==="linear"?Yht(S,m,b,x,d,_):Vht(S,m,b,x,d,_)}binDimensions(){const{plot:t,binWidth:n}=this;return[Math.round(t.innerWidth()/n),Math.round(t.innerHeight()/n)]}queryResult(t){const[n,r]=this.bins;return this.grids=Uht(n,r,t,this.groupby),this.convolve()}convolve(){const{bandwidth:t,bins:n,grids:r,plot:i}=this;if(t<=0)this.kde=this.grids.map(({key:s,grid:o})=>(o.key=s,o));else{const s=i.innerWidth(),o=i.innerHeight(),[a,l]=n,c=r.some(({grid:d})=>d.some(h=>h<0)),u=vx(t*(a-1)/s,c),f=vx(t*(l-1)/o,c);this.kde=this.grids.map(({key:d,grid:h})=>{const p=Rht(u,f,h,n);return p.key=d,p})}return this}plotSpecs(){throw new Error("Unimplemented. Use a Grid2D mark subclass.")}}function jht(e){const t={};for(const n in e)e[n]==="density"&&(delete e[n],t[n]=!0);return t}function AN(e,t,n,r,i,s){const o=(r-s)/(n-t),a=o!==1?` * ${o}::DOUBLE`:"";return i?G`(${n} - ${e}::DOUBLE)${a}`:G`(${e}::DOUBLE - ${t})${a}`}function Vht(e,t,n,r,i,s){return e.select({index:G`FLOOR(${t})::INTEGER + FLOOR(${n})::INTEGER * ${i}`,value:r}).groupby("index",s)}function Yht(e,t,n,r,i,s){const o=r.column?`* ${r.column}`:"",a=(d,h)=>e.clone().select({xp:t,yp:n,i:d,w:h}),l=a(G`FLOOR(xp)::INTEGER + FLOOR(yp)::INTEGER * ${i}`,G`(FLOOR(xp)::INTEGER + 1 - xp) * (FLOOR(yp)::INTEGER + 1 - yp)${o}`),c=a(G`FLOOR(xp)::INTEGER + (FLOOR(yp)::INTEGER + 1) * ${i}`,G`(FLOOR(xp)::INTEGER + 1 - xp) * (yp - FLOOR(yp)::INTEGER)${o}`),u=a(G`FLOOR(xp)::INTEGER + 1 + FLOOR(yp)::INTEGER * ${i}`,G`(xp - FLOOR(xp)::INTEGER) * (FLOOR(yp)::INTEGER + 1 - yp)${o}`),f=a(G`FLOOR(xp)::INTEGER + 1 + (FLOOR(yp)::INTEGER + 1) * ${i}`,G`(xp - FLOOR(xp)::INTEGER) * (yp - FLOOR(yp)::INTEGER)${o}`);return Lt.from(Lt.unionAll(l,c,u,f)).select({index:"i",value:ed("w")},s).groupby("index",s).having(TO("value",0))}class qht extends Yv{constructor(t,n){const{type:r="dot",binsX:i,binsY:s,...o}=n;o.binPad=o.binPad??0,super(r,t,o),fi(this,"binsX",i),fi(this,"binsY",s)}convolve(){super.convolve();const{bins:t,binPad:n,extentX:r,extentY:i}=this,[s,o]=t,[a,l]=r,[c,u]=i,f=(l-a)/(s-n),d=(u-c)/(o-n),h=n?0:.5;return this.data=Wht(this.kde,t,a,c,f,d,h),this}binDimensions(){const{plot:t,binWidth:n,binsX:r,binsY:i}=this;return[r??Math.round(t.innerWidth()/n),i??Math.round(t.innerHeight()/n)]}plotSpecs(){const{type:t,channels:n,densityMap:r,data:i}=this,s={};for(const o of n){const{channel:a}=o;s[a]=a==="x"||a==="y"?a:va(o)}for(const o in r)r[o]&&(s[o]="density");return[{type:t,data:i,options:s}]}}function Wht(e,t,n,r,i,s,o){const a=1/(i*s),[l,c]=t,u=[];for(const f of e)for(let d=0,h=0;h<c;++h)for(let p=0;p<l;++p,++d)u.push({x:n+(p+o)*i,y:r+(h+o)*s,density:f[d]*a});return u}function DU(e,t,n,r,i,s){const o=(s.length>>2)-1;for(let a=0,l=0;a<r;++a)for(let c=0,u=(r-a-1)*n;c<n;++c,l+=4){const f=o*i(e[c+u])<<2;t[l+0]=s[f+0],t[l+1]=s[f+1],t[l+2]=s[f+2],t[l+3]=s[f+3]}}function P1(e,t){const n=new Uint8ClampedArray(4*e),r=e-1;for(let i=0;i<=r;++i){const s=t(i/r),{r:o,g:a,b:l,opacity:c=1}=typeof s=="string"?gi(s):s,u=i<<2;n[u+0]=o,n[u+1]=a,n[u+2]=l,n[u+3]=255*c|0}return n}function kU(e,t){if(typeof document<"u"){const n=document.createElement("canvas");return n.setAttribute("width",e),n.setAttribute("height",t),n}throw new Error("Can not create a canvas instance.")}function OU(e="black"){const{r:t,g:n,b:r}=gi(e);return i=>({r:t,g:n,b:r,opacity:i})}class FU extends Yv{constructor(t,n){super("image",t,n)}setPlot(t,n){const r=()=>{this.stats&&this.rasterize()};t.addAttributeListener("schemeColor",r),super.setPlot(t,n)}convolve(){return super.convolve().rasterize()}rasterize(){var d;const{bins:t,kde:n,groupby:r}=this,[i,s]=t,{canvas:o,ctx:a,img:l}=Hht(this,i,s),c=Ght(this),u=r.indexOf((d=this.channelField("fill"))==null?void 0:d.as),f=u<0?[]:n.map(({key:h})=>h[u]);return this.data=n.map(h=>{var g;const p=Xht(this,f,(g=h.key)==null?void 0:g[u]);return DU(h,l.data,i,s,c,p),a.putImageData(l,0,0),{src:o.toDataURL()}}),this}plotSpecs(){var s;const{type:t,plot:n,data:r}=this,i={src:"src",width:n.innerWidth(),height:n.innerHeight(),preserveAspectRatio:"none",imageRendering:(s=this.channel("imageRendering"))==null?void 0:s.value,frameAnchor:"middle"};return[{type:t,data:r,options:i}]}}function Hht(e,t,n){if(!e.image||e.image.w!==t||e.image.h!==n){const r=kU(t,n),i=r.getContext("2d",{willReadFrequently:!0}),s=i.getImageData(0,0,t,n);e.image={canvas:r,ctx:i,img:s,w:t,h:n}}return e.image}function Ght(e){const{densityMap:t,kde:n,plot:r}=e;let i=t.fill&&r.getAttribute("colorDomain");if(!i){let o=0,a=0;n.forEach(l=>{for(const c of l)c<o&&(o=c),c>a&&(a=c)}),i=o===0&&a===0?[0,1]:[o,a]}const s=r.getAttribute("colorScale");return Ac({x:{type:s,domain:i,range:[0,1]}}).apply}function Xht(e,t,n,r=1024){const{densityMap:i,plot:s}=e,o=s.getAttribute("colorScheme");let a;if(i.fill){if(o)try{return P1(r,Ac({color:{scheme:o,domain:[0,1]}}).interpolate)}catch(l){console.warn(l)}}else if(t.length){const l=s.getAttribute("colorRange");a=Ac({color:{domain:t,range:l,scheme:o||(l?void 0:"tableau10")}}).apply(n)}else{const l=e.channelField("fill");a=lT(l==null?void 0:l.value)?l.value:void 0}return P1(r,OU(a))}class Qht extends FU{constructor(t,n){const{normalize:r=!0,...i}=n;super(t,{bandwidth:0,...i}),fi(this,"normalize",r)}query(t=[]){const{plot:n,channels:r,normalize:i,source:s}=this,[o,a]=Dy(this,t),[l,c]=ky(this,t),[u,f]=this.bins=this.binDimensions(this),d=Wa(this,"x"),h=Wa(this,"y"),p=!!n.getAttribute("xReverse"),g=!!n.getAttribute("yReverse"),v=bx(d,o,a,u,p,this.binPad),y=bx(h,l,c,f,g,this.binPad),m=Lt.from(s.table).where(Kht(this,t)),b=this.groupby=[],w=[];for(const S of r)if(Object.hasOwn(S,"field")){const{channel:_,field:x}=S;_==="z"?(m.select({[_]:x}),w.push("z")):_!=="x"&&_!=="y"&&(m.select({[_]:x}),b.push(_))}return Zht(m,v,y,w,u,f,b,i)}}function Kht(e,t){if(Array.isArray(t)&&!t.length)return t;const n=e.channelField("x").field.column,r=e.channelField("y").field.column,i=o=>o.op!=="BETWEEN"||o.field.column!==n&&o.field.column!==r,s=o=>o.op==="AND"?pc(o.children.filter(a=>i(a))):o;return Array.isArray(t)?t.filter(o=>i(o)).map(o=>s(o)):s(t)}function Zht(e,t,n,r,i,s,o=[],a=!0){e.select({x:G`FLOOR(${t})::INTEGER`,y:G`FLOOR(${n})::INTEGER`});const l=o.concat(r),c=l.length?`PARTITION BY ${l.join(", ")} `:"",u=Lt.from(e).select(l,{x0:"x",y0:"y",dx:G`(lead(x) OVER sw - x)`,dy:G`(lead(y) OVER sw - y)`}).window({sw:G`${c}ORDER BY x ASC`}).qualify(pc(G`(x0 < ${i} OR x0 + dx < ${i})`,G`(y0 < ${s} OR y0 + dy < ${s})`,G`(x0 > 0 OR x0 + dx > 0)`,G`(y0 > 0 OR y0 + dy > 0)`)),f=Lt.select({x:G`GREATEST(MAX(ABS(dx)), MAX(ABS(dy)))`}).from("pairs"),d=Lt.select({i:G`UNNEST(range((${f})))::INTEGER`}),h=Lt.unionAll(Lt.select(l,{x:G`x0 + i`,y:G`y0 + ROUND(i * dy / dx::FLOAT)::INTEGER`}).from("pairs","indices").where(G`ABS(dy) <= ABS(dx) AND i < ABS(dx)`),Lt.select(l,{x:G`x0 + ROUND(SIGN(dy) * i * dx / dy::FLOAT)::INTEGER`,y:G`y0 + SIGN(dy) * i`}).from("pairs","indices").where(G`ABS(dy) > ABS(dx) AND i < ABS(dy)`),Lt.select(l,{x:"x0",y:"y0"}).from("pairs").where(EO("dx"))),p=["x"].concat(l).join(", "),g=Lt.from("raster").select(l,"x","y",a?{w:G`1.0 / COUNT(*) OVER (PARTITION BY ${p})`}:null).where(pc(Rr("x",[0,i]),Rr("y",[0,s])));return Lt.with({pairs:u,indices:d,raster:h,points:g}).from("points").select(o,{index:G`x + y * ${i}::INTEGER`,value:a?ed("w"):hr()}).groupby("index",o)}class Jht extends Yv{constructor(t,n){const{thresholds:r=10,...i}=n;super("geo",t,i),fi(this,"thresholds",r,()=>this.grids?this.contours().update():null)}convolve(){return super.convolve().contours()}contours(){const{bins:t,densityMap:n,kde:r,thresholds:i,groupby:s,plot:o}=this;let a=i;if(!Array.isArray(a)){const S=$e(r.map(_=>$e(_)));a=Array.from({length:a-1},(_,x)=>S*(x+1)/a)}(n.fill||n.stroke)&&this.plot.getAttribute("colorScale")!=="log"&&this.plot.setAttribute("colorZero",!0);const[l,c]=t,[u,f]=o.getAttribute("xDomain"),[d,h]=o.getAttribute("yDomain"),p=(f-u)/l,g=(h-d)/c,v=+u,y=+d,m=S=>v+S*p,b=S=>y+S*g,w=jg().size(t);return this.data=r.flatMap(S=>a.map(_=>{const x=tpt(w.contour(S,_),m,b);return s.forEach((T,N)=>x[T]=S.key[N]),x.density=_,x})),this}plotSpecs(){const{type:t,channels:n,densityMap:r,data:i}=this,s={};for(const o of n){const{channel:a}=o;a!=="x"&&a!=="y"&&(s[a]=va(o))}return r.fill&&(s.fill="density"),r.stroke&&(s.stroke="density"),[{type:t,data:i,options:s}]}}function tpt(e,t,n){function r(o){o.forEach(i)}function i(o){o.forEach(s)}function s(o){o[0]=t(o[0]),o[1]=n(o[1])}return e.coordinates.forEach(r),e}class ept extends yd{constructor(t,n){const{type:r="hexagon",binWidth:i=20,...s}=n;super(r,t,{r:i/2,clip:!0,...s},TU),this.binWidth=i}get filterIndexable(){const t=this.plot.getAttribute("xDomain"),n=this.plot.getAttribute("yDomain");return t&&n&&!t[mc]&&!n[mc]}query(t=[]){if(this.hasOwnData())return null;const{plot:n,binWidth:r,channels:i,source:s}=this,[o,a]=Dy(this,t),[l,c]=ky(this,t),u=.5-n.getAttribute("marginLeft"),f=0-n.getAttribute("marginTop"),d=`${r}::DOUBLE`,h=`${r*(1.5/Math.sqrt(3))}::DOUBLE`,p=`${n.innerWidth()/(a-o)}::DOUBLE`,g=`${n.innerHeight()/(c-l)}::DOUBLE`;let v,y;const m=new Set,b={};for(const T of i)T.channel==="order"?w.orderby(T.value):T.channel==="x"?v=T:T.channel==="y"?y=T:Object.hasOwn(T,"field")&&(b[T.as]=T.field,T.field.aggregate&&T.field.columns.forEach(N=>m.add(N)));const w=Lt.select({[v.as]:G`${o}::DOUBLE + ((x + 0.5 * (y & 1)) * ${d} + ${u})::DOUBLE / ${p}`,[y.as]:G`${c}::DOUBLE - (y * ${h} + ${f})::DOUBLE / ${g}`,...b}).groupby("x","y"),S=`${p} * (${v.field} - ${o}::DOUBLE)`,_=`${g} * (${c}::DOUBLE - ${y.field})`,x=Lt.select({py:G`(${_} - ${f}) / ${h}`,pj:G`ROUND(py)::INTEGER`,px:G`(${S} - ${u}) / ${d} - 0.5 * (pj & 1)`,pi:G`ROUND(px)::INTEGER`,tt:G`ABS(py-pj) * 3 > 1 AND (px-pi)**2 + (py-pj)**2 > (px - pi - 0.5 * CASE WHEN px < pi THEN -1 ELSE 1 END)**2 + (py - pj - CASE WHEN py < pj THEN -1 ELSE 1 END)**2`,x:G`CASE WHEN tt THEN (pi + (CASE WHEN px < pi THEN -0.5 ELSE 0.5 END) + (CASE WHEN pj & 1 <> 0 THEN 0.5 ELSE -0.5 END))::INTEGER ELSE pi END`,y:G`CASE WHEN tt THEN (pj + CASE WHEN py < pj THEN -1 ELSE 1 END)::INTEGER ELSE pj END`}).select(Array.from(m)).from(s.table).where(Ng(v.field),Ng(y.field),t);return w.from(x)}}class npt extends Yv{constructor(t,n){const{origin:r=[0,0],dim:i="xy",...s}=n;super("image",t,s),this.origin=r,this.tileX=i.toLowerCase().includes("x"),this.tileY=i.toLowerCase().includes("y")}setPlot(t,n){const r=()=>{this.stats&&this.rasterize()};t.addAttributeListener("schemeColor",r),super.setPlot(t,n)}requestQuery(){return this.requestTiles()}query(t=[]){return this._filter=t,null}tileQuery(t){const{plot:n,binType:r,binPad:i,channels:s,densityMap:o,source:a}=this,[[l,c],[u,f]]=t,[d,h]=this.bins,p=Wa(this,"x"),g=Wa(this,"y"),v=!!n.getAttribute("xReverse"),y=!!n.getAttribute("yReverse"),m=MN(p,l,c,d,v,i),b=MN(g,u,f,h,y,i),w=i?[Rr(p,[l,c]),Rr(g,[u,f])]:[kg(l,p),Dg(p,c),kg(u,g),Dg(g,f)],S=Lt.from(a.table).where(w),_=this.groupby=[];let x=hr();for(const T of s)if(Object.hasOwn(T,"field")){const{channel:N,field:I}=T;I.aggregate?(x=I,o[N]=!0):N==="weight"?x=ed(I):N!=="x"&&N!=="y"&&(S.select({[N]:I}),_.push(N))}return r==="linear"?cpt(S,m,b,x,d,_):lpt(S,m,b,x,d,_)}async requestTiles(){const t=Xn();this.prefetch&&t.cancel(this.prefetch);const{binPad:n,tileX:r,tileY:i,origin:[s,o]}=this,[a,l]=this.bins=this.binDimensions(this),[c,u]=Dy(this,this._filter),[f,d]=ky(this,this._filter),h=u-c,p=d-f,g=Math.floor((c-s)*(a-n)/h),v=Math.floor((f-o)*(l-n)/p),y=(I,A)=>[[s+I*h,s+(I+1)*h],[o+A*p,o+(A+1)*p]],m=Math.floor((c-s)/h),b=r?$N((u-s)/h):m,w=Math.floor((f-o)/p),S=i?$N((d-o)/p):w,_=[];for(let I=m;I<=b;++I)for(let A=w;A<=S;++A)_.push([I,A]);const x=_.map(([I,A])=>t.query(this.tileQuery(y(I,A)))),T=[];if(r)for(let I=w;I<=S;++I)T.push([b+1,I]),T.push([m-1,I]);if(i){const I=r?m-1:m,A=r?b+1:b;for(let k=I;k<=A;++k)T.push([k,S+1]),T.push([k,w-1])}this.prefetch=T.map(([I,A])=>t.prefetch(this.tileQuery(y(I,A))));const N=await Promise.all(x);this.grids=[{grid:rpt(a,l,g,v,_,N)}],this.convolve().update()}convolve(){return super.convolve().rasterize()}rasterize(){var d;const{bins:t,kde:n,groupby:r}=this,[i,s]=t,{canvas:o,ctx:a,img:l}=spt(this,i,s),c=opt(this),u=r.indexOf((d=this.channelField("fill"))==null?void 0:d.as),f=u<0?[]:n.map(({key:h})=>h[u]);return this.data=n.map(h=>{var g;const p=apt(this,f,(g=h.key)==null?void 0:g[u]);return DU(h,l.data,i,s,c,p),a.putImageData(l,0,0),{src:o.toDataURL()}}),this}plotSpecs(){var s;const{type:t,data:n,plot:r}=this,i={src:"src",width:r.innerWidth(),height:r.innerHeight(),preserveAspectRatio:"none",imageRendering:(s=this.channel("imageRendering"))==null?void 0:s.value,frameAnchor:"middle"};return[{type:t,data:n,options:i}]}}function rpt(e,t,n,r,i,s){const o=new Float64Array(e*t);return s.forEach((a,l)=>{const[c,u]=i[l],f=c*e-n,d=u*t-r;ipt(e,t,o,a,f,d)}),o}function ipt(e,t,n,r,i,s){const o=r.numRows;if(o===0)return;const a=r.getChild("index").toArray(),l=r.getChild("value").toArray();for(let c=0;c<o;++c){const u=a[c],f=i+u%e,d=s+Math.floor(u/e);0<=f&&f<e&&0<=d&&d<t&&(n[f+d*e]=l[c])}}function spt(e,t,n){if(!e.image||e.image.w!==t||e.image.h!==n){const r=kU(t,n),i=r.getContext("2d",{willReadFrequently:!0}),s=i.getImageData(0,0,t,n);e.image={canvas:r,ctx:i,img:s,w:t,h:n}}return e.image}function opt(e){const{densityMap:t,kde:n,plot:r}=e;let i=t.fill&&r.getAttribute("colorDomain");if(!i){let o=0,a=0;n.forEach(l=>{for(const c of l)c<o&&(o=c),c>a&&(a=c)}),i=o===0&&a===0?[0,1]:[o,a]}const s=r.getAttribute("colorScale");return Ac({x:{type:s,domain:i,range:[0,1]}}).apply}function apt(e,t,n,r=1024){const{densityMap:i,plot:s}=e,o=s.getAttribute("colorScheme");let a;if(i.fill){if(o)try{return P1(r,Ac({color:{scheme:o,domain:[0,1]}}).interpolate)}catch(l){console.warn(l)}}else if(t.length){const l=s.getAttribute("colorRange");a=Ac({color:{domain:t,range:l,scheme:o||(l?void 0:"tableau10")}}).apply(n)}else{const l=e.channelField("fill");a=lT(l==null?void 0:l.value)?l.value:void 0}return P1(r,OU(a))}function MN(e,t,n,r,i,s){const o=(r-s)/(n-t),a=o!==1?` * ${o}::DOUBLE`:"";return i?G`(${n} - ${e}::DOUBLE)${a}`:G`(${e}::DOUBLE - ${t})${a}`}function lpt(e,t,n,r,i,s){return e.select({index:G`FLOOR(${t})::INTEGER + FLOOR(${n})::INTEGER * ${i}`,value:r}).groupby("index",s)}function cpt(e,t,n,r,i,s){const o=r.column?`* ${r.column}`:"",a=(d,h)=>e.clone().select({xp:t,yp:n,i:d,w:h}),l=a(G`FLOOR(xp)::INTEGER + FLOOR(yp)::INTEGER * ${i}`,G`(FLOOR(xp)::INTEGER + 1 - xp) * (FLOOR(yp)::INTEGER + 1 - yp)${o}`),c=a(G`FLOOR(xp)::INTEGER + (FLOOR(yp)::INTEGER + 1) * ${i}`,G`(FLOOR(xp)::INTEGER + 1 - xp) * (yp - FLOOR(yp)::INTEGER)${o}`),u=a(G`FLOOR(xp)::INTEGER + 1 + FLOOR(yp)::INTEGER * ${i}`,G`(xp - FLOOR(xp)::INTEGER) * (FLOOR(yp)::INTEGER + 1 - yp)${o}`),f=a(G`FLOOR(xp)::INTEGER + 1 + (FLOOR(yp)::INTEGER + 1) * ${i}`,G`(xp - FLOOR(xp)::INTEGER) * (yp - FLOOR(yp)::INTEGER)${o}`);return Lt.from(Lt.unionAll(l,c,u,f)).select({index:"i",value:ed("w")},s).groupby("index",s).having(LW("value",0))}function $N(e){const t=Math.floor(e);return t===e?t-1:t}function upt(e,t,n){var r=1e-8,i=t-1,s=n-1,o=0,a,l,c,u,f,d,h,p,g,v,y;if(e<=0)return 0;if(e>=1)return 1;for(t>=1&&n>=1?(c=e<.5?e:1-e,u=Math.sqrt(-2*Math.log(c)),h=(2.30753+u*.27061)/(1+u*(.99229+u*.04481))-u,e<.5&&(h=-h),p=(h*h-3)/6,g=2/(1/(2*t-1)+1/(2*n-1)),v=h*Math.sqrt(p+g)/g-(1/(2*n-1)-1/(2*t-1))*(p+5/6-2/(3*g)),h=t/(t+n*Math.exp(2*v))):(a=Math.log(t/(t+n)),l=Math.log(n/(t+n)),u=Math.exp(t*a)/t,f=Math.exp(n*l)/n,v=u+f,e<u/v?h=Math.pow(t*v*e,1/t):h=1-Math.pow(n*v*(1-e),1/n)),y=-ef(t)-ef(n)+ef(t+n);o<10;o++){if(h===0||h===1)return h;if(d=fpt(h,t,n)-e,u=Math.exp(i*Math.log(h)+s*Math.log(1-h)+y),f=d/u,h-=u=f/(1-.5*Math.min(1,f*(i/h-s/(1-h)))),h<=0&&(h=.5*(h+u)),h>=1&&(h=.5*(h+u+1)),Math.abs(u)<r*h&&o>0)break}return h}function fpt(e,t,n){var r=e===0||e===1?0:Math.exp(ef(t+n)-ef(t)-ef(n)+t*Math.log(e)+n*Math.log(1-e));return e<0||e>1?!1:e<(t+1)/(t+n+2)?r*NN(e,t,n)/t:1-r*NN(1-e,n,t)/n}function NN(e,t,n){var r=1e-30,i=1,s=t+n,o=t+1,a=t-1,l=1,c=1-s*e/o,u,f,d,h;for(Math.abs(c)<r&&(c=r),c=1/c,h=c;i<=100&&(u=2*i,f=i*(n-i)*e/((a+u)*(t+u)),c=1+f*c,Math.abs(c)<r&&(c=r),l=1+f/l,Math.abs(l)<r&&(l=r),c=1/c,h*=c*l,f=-(t+i)*(s+i)*e/((t+u)*(o+u)),c=1+f*c,Math.abs(c)<r&&(c=r),l=1+f/l,Math.abs(l)<r&&(l=r),c=1/c,d=c*l,h*=d,!(Math.abs(d-1)<3e-7));i++);return h}function ef(e){var t=0,n=[76.18009172947146,-86.5053203294167,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18],r=1.000000000190015,i,s,o;for(o=(s=i=e)+5.5,o-=(i+.5)*Math.log(o);t<6;t++)r+=n[t]/++s;return Math.log(2.506628274631*r/i)-o}function dpt(e,t){var n=upt(2*Math.min(e,1-e),.5*t,.5);return n=Math.sqrt(t*(1-n)/n),e>.5?n:-n}class hpt extends yd{constructor(t,n){const{ci:r=.95,precision:i=4,...s}=n;super("line",t,s);const o=()=>this.modelFit?this.confidenceBand().update():null;fi(this,"ci",r,o),fi(this,"precision",i,o)}query(t=[]){const n=this.channelField("x").as,r=this.channelField("y").as,i=Array.from(new Set(["stroke","z","fx","fy"].flatMap(s=>{var o;return((o=this.channelField(s))==null?void 0:o.as)||[]})));return Lt.from(super.query(t)).select({intercept:WW(r,n),slope:HW(r,n),n:GW(r,n),ssy:XW(r,n),ssx:QW(r,n),xm:KW(r,n),x0:FM(ap(n).where(Ng(r))),x1:FM(op(n).where(Ng(r)))}).select(i).groupby(i)}queryResult(t){return this.modelFit=_U(t),this.lineData=this.modelFit.flatMap(n=>ppt(n)),this.confidenceBand()}confidenceBand(){const{ci:t,modelFit:n,precision:r,plot:i}=this,s=i.innerWidth();return this.areaData=t?n.flatMap(o=>ypt(t,r,o,s)):null,this}plotSpecs(){const{lineData:t,areaData:n,channels:r,ci:i}=this,s={x:"x",y:"y"},o={x:"x",y1:"y1",y2:"y2",fillOpacity:.1};for(const a of r)switch(a.channel){case"x":case"y":case"fill":break;case"stroke":s.stroke=o.fill=va(a);break;case"strokeOpacity":s.strokeOpacity=va(a);break;case"fillOpacity":o.fillOpacity=va(a);break;default:s[a.channel]=o[a.channel]=va(a);break}return[...i?[{type:"areaY",data:n,options:o}]:[],{type:"line",data:t,options:s}]}}function ppt(e){const{x0:t,x1:n,xm:r,intercept:i,slope:s,n:o,ssx:a,ssy:l,...c}=e;return[{x:t,y:i+t*s,...c},{x:n,y:i+n*s,...c}]}function ypt(e,t,n,r){const{x0:i,x1:s,xm:o,intercept:a,slope:l,n:c,ssx:u,ssy:f,...d}=n,h=t*(s-i)/r,p=dpt((1-e)/2,c-2)*Math.sqrt(f/(c-2));return Nr(i,s-h/2,h).concat(s).map(g=>{const v=a+g*l,y=p*Math.sqrt(1/c+(g-o)**2/u);return{x:g,y1:v-y,y2:v+y,...d}})}const mpt=new Set(["frame","axisX","axisY","axisFx","axisFy","gridX","gridY","gridFx","gridFy","hexgrid","graticule","sphere"]);function ct(e,t,n){arguments.length===2&&(n=t,t=mpt.has(e)?null:[{}]);const r=e.startsWith("area")||e.startsWith("line")?Oht:yd;return uT(r,e,t,n)}function uT(e,t,n,r){return i=>{i.addMark(new e(t,n,r))}}function Bc(e,t,n){return r=>{r.addMark(new e(t,n))}}const gpt=(...e)=>ct("area",...e),bpt=(...e)=>ct("areaX",...e),BU=(...e)=>ct("areaY",...e),vpt=(...e)=>ct("line",...e),wpt=(...e)=>ct("lineX",...e),RU=(...e)=>ct("lineY",...e),_x=(...e)=>ct("barX",...e),fT=(...e)=>ct("barY",...e),_pt=(...e)=>ct("cell",...e),Spt=(...e)=>ct("cellX",...e),xpt=(...e)=>ct("cellY",...e),Ipt=(...e)=>ct("rect",...e),Ept=(...e)=>ct("rectX",...e),nf=(...e)=>ct("rectY",...e),qv=(...e)=>ct("dot",...e),Tpt=(...e)=>ct("dotX",...e),Apt=(...e)=>ct("dotY",...e),Mpt=(...e)=>ct("circle",...e),$pt=(...e)=>ct("hexagon",...e),LU=(...e)=>ct("text",...e),Npt=(...e)=>ct("textX",...e),Dpt=(...e)=>ct("textY",...e),kpt=(...e)=>ct("ruleX",...e),Opt=(...e)=>ct("ruleY",...e),Fpt=(...e)=>ct("tickX",...e),CU=(...e)=>ct("tickY",...e),Bpt=(...e)=>ct("vector",...e),Rpt=(...e)=>ct("vectoX",...e),Lpt=(...e)=>ct("vectorY",...e),Cpt=(...e)=>ct("spike",...e),Upt=(...e)=>ct("image",...e),Ppt=(...e)=>uT(NU,"areaX",...e),zpt=(...e)=>uT(NU,"areaY",...e),jpt=(...e)=>Bc(qht,...e),UU=(...e)=>Bc(Qht,...e),PU=(...e)=>Bc(Jht,...e),z1=(...e)=>Bc(FU,...e),Vpt=(...e)=>Bc(npt,...e),zU=(...e)=>Bc(ept,...e),jU=(...e)=>ct("hexgrid",...e),VU=(...e)=>Bc(hpt,...e),Ypt=(...e)=>ct("voronoi",...e),qpt=(...e)=>ct("voronoiMesh",...e),Wpt=(...e)=>ct("delaunayLink",...e),Hpt=(...e)=>ct("delaunayMesh",...e),Gpt=(...e)=>ct("hull",...e),Xpt=(...e)=>ct("arrow",...e),Qpt=(...e)=>ct("link",...e),Kpt=(...e)=>ct("frame",...e),Zpt=(...e)=>ct("axisX",...e),Jpt=(...e)=>ct("axisY",...e),tyt=(...e)=>ct("axisFx",...e),eyt=(...e)=>ct("axisFy",...e),nyt=(...e)=>ct("gridX",...e),ryt=(...e)=>ct("gridY",...e),iyt=(...e)=>ct("gridFx",...e),syt=(...e)=>ct("gridFy",...e),YU=(...e)=>ct("geo",...e),qU=(...e)=>ct("sphere",...e),oyt=(...e)=>ct("graticule",...e),ayt=Object.freeze(Object.defineProperty({__proto__:null,area:gpt,areaX:bpt,areaY:BU,arrow:Xpt,axisFx:tyt,axisFy:eyt,axisX:Zpt,axisY:Jpt,barX:_x,barY:fT,cell:_pt,cellX:Spt,cellY:xpt,circle:Mpt,contour:PU,delaunayLink:Wpt,delaunayMesh:Hpt,denseLine:UU,density:jpt,densityX:Ppt,densityY:zpt,dot:qv,dotX:Tpt,dotY:Apt,frame:Kpt,geo:YU,graticule:oyt,gridFx:iyt,gridFy:syt,gridX:nyt,gridY:ryt,hexagon:$pt,hexbin:zU,hexgrid:jU,hull:Gpt,image:Upt,line:vpt,lineX:wpt,lineY:RU,link:Qpt,raster:z1,rasterTile:Vpt,rect:Ipt,rectX:Ept,rectY:nf,regressionY:VU,ruleX:kpt,ruleY:Opt,sphere:qU,spike:Cpt,text:LU,textX:Npt,textY:Dpt,tickX:Fpt,tickY:CU,vector:Bpt,vectorX:Rpt,vectorY:Lpt,voronoi:Ypt,voronoiMesh:qpt},Symbol.toStringTag,{value:"Module"}));function lyt(e){const t=e.toLowerCase(),n=e.length;let r="";for(let i=0;i<n;++i)r+=(e[i]!==t[i]?"-":"")+t[i];return r}function dT(e){const t={};for(const n in e)t[lyt(n)]=e[n];return t}class cyt{constructor(t,{selection:n,channels:r={}}){this.mark=t,this.selection=n;const i=Object.entries(dT(r));this.channels=i.length?i:[["opacity",.2]],this.selection.addEventListener("value",kO(()=>this.update()))}init(t){this.svg=t;const n=this.values=[],r=this.mark.index,i=this.nodes=t.querySelectorAll(`[data-index="${r}"] > *`),{channels:s}=this;for(let o=0;o<i.length;++o){const a=i[o];n.push(s.map(l=>a.getAttribute(l[0])))}return this.update()}async update(){const{svg:t,nodes:n,channels:r,values:i,mark:s,selection:o}=this;if(!t)return;const a=await uyt(s,o);for(let l=0;l<n.length;++l){const c=n[l],u=i[l],f=a(c.__data__);for(let d=0;d<r.length;++d){const[h,p]=r[d];c.setAttribute(h,f?u[d]:p)}}}}async function uyt(e,t){var c,u;const n=t==null?void 0:t.predicate(e);if(!n||n.length===0)return()=>!0;const r=(c=e.filterBy)==null?void 0:c.predicate(e,!0),i={__:pc(n)},s=e.query(r),o=s.groupby().length?s.select(i):s.$select(i),a=await Xn().query(o),l=(u=a.getChild)==null?void 0:u.call(a,"__");return a.numRows||a.length?l?f=>l.get(f):f=>a[f].__:()=>!1}class WU{constructor(t,{selection:n,channels:r,peers:i=!0}){this.value=null,this.mark=t,this.selection=n,this.peers=i,this.channels=r.map(s=>{var a;const o=s==="color"?["fill","stroke"]:s==="x"?["x","x1","x2"]:s==="y"?["y","y1","y2"]:[s];for(let l=0;l<o.length;++l){const c=t.channelField(o[l]);if(c)return{field:((a=c.field)==null?void 0:a.basis)||c.field,as:c.as}}throw new Error(`Missing channel: ${s}`)})}clause(t){const{channels:n,mark:r}=this;let i=null;if(t){const s=t.map(o=>{const a=o.map((l,c)=>CW(n[c].field,Jp(l)));return a.length>1?pc(a):a[0]});i=s.length>1?xO(s):s[0]}return{source:this,schema:{type:"point"},clients:this.peers?r.plot.markSet:new Set().add(r),value:t,predicate:i}}init(t,n,r){const{mark:i,channels:s,selection:o}=this,{data:a}=i;r=r||(c=>{const u=a[c.__data__];return s.map(f=>u[f.as])}),n=n||`[data-index="${i.index}"]`;const l=new Set(t.querySelectorAll(n));t.addEventListener("pointerdown",c=>{const u=o.single?o.value:this.value,f=c.target;let d=null;if(fyt(l,f)){const h=r(f);c.shiftKey&&(u!=null&&u.length)?(d=u.filter(p=>Sx(p,h)),d.length===u.length&&d.push(h)):(u==null?void 0:u.length)===1&&!Sx(u[0],h)?d=null:d=[h]}this.value=d,dyt(u,d)&&o.update(this.clause(d))}),t.addEventListener("pointerenter",()=>{this.selection.activate(this.clause([this.channels.map(()=>0)]))})}}function fyt(e,t){var n;return e.has(t)||e.has(t.parentNode)||e.has((n=t.parentNode)==null?void 0:n.parentNode)}function dyt(e,t){return e==null||t==null?e!=null||t!=null:e.length!==t.length||e.some((n,r)=>Sx(n,t[r]))}function Sx(e,t){const n=e.length;if(t.length!==n)return!0;for(let r=0;r<n;++r)if(e[r]!==t[r])return!0;return!1}function hT(e){const t=e.on;let n=!0;function r(i){n=!1,i(),n=!0}return e.reset=(...i)=>{r(()=>e.clear(...i))},e.moveSilent=(...i)=>{r(()=>e.move(...i))},e.on=(...i)=>{if(i.length>1&&i[1]){const s=i[1];i[1]=(...o)=>n&&s(...o)}return t(...i)},e}function hyt(){return hT(DZ())}function pyt(){return hT($Z())}function yyt(){return hT(NZ())}const DN=1e-12;function xx(e,t){return e===t||e&&t&&Math.abs(e[0]-t[0])<DN&&Math.abs(e[1]-t[1])<DN||!1}function zf(e,t){var r;const n=(r=e.channelField(t))==null?void 0:r.field;return(n==null?void 0:n.basis)||n}function Ix(e,t,n=1){return t.invert(n*Math.floor(e/n))}function HU(){const e=this,t=e.getScreenCTM;let n;e.getScreenCTM=()=>e.isConnected?n=t.call(e):n}class GU{constructor(t,{channel:n,selection:r,field:i,pixelSize:s=1,peers:o=!0,brush:a}){this.mark=t,this.channel=n,this.pixelSize=s||1,this.selection=r,this.peers=o,this.field=i||zf(t,[n,n+"1",n+"2"]),this.style=a&&dT(a),this.brush=n==="y"?yyt():pyt(),this.brush.on("brush end",({selection:l})=>this.publish(l))}reset(){this.value=void 0,this.g&&this.brush.reset(this.g)}activate(){this.selection.activate(this.clause(this.value||[0,1]))}publish(t){let n;t&&(n=t.map(r=>Ix(r,this.scale,this.pixelSize)).sort((r,i)=>r-i)),xx(n,this.value)||(this.value=n,this.g.call(this.brush.moveSilent,t),this.selection.update(this.clause(n)))}clause(t){const{mark:n,pixelSize:r,field:i,scale:s}=this;return{source:this,schema:{type:"interval",pixelSize:r,scales:[s]},clients:this.peers?n.plot.markSet:new Set().add(n),value:t,predicate:t?Rr(i,t):null}}init(t){var c;const{brush:n,channel:r,style:i}=this;this.scale=t.scale(r);const s=t.scale("x").range,o=t.scale("y").range;n.extent([[bn(s),bn(o)],[$e(s),$e(o)]]);const a=ye(t).selectAll('g[aria-label="facet"]'),l=a.size()?a:ye(t);if(this.g=l.append("g").attr("class",`interval-${r}`).each(HU).call(n).call(n.moveSilent,(c=this.value)==null?void 0:c.map(this.scale.apply)),i){const u=this.g.selectAll("rect.selection");for(const f in i)u.attr(f,i[f])}t.addEventListener("pointerenter",()=>this.activate())}}const U0=(e,t)=>e-t;class myt{constructor(t,{selection:n,xfield:r,yfield:i,pixelSize:s=1,peers:o=!0,brush:a}){this.mark=t,this.pixelSize=s||1,this.selection=n,this.peers=o,this.xfield=r||zf(t,["x","x1","x2"]),this.yfield=i||zf(t,["y","y1","y2"]),this.style=a&&dT(a),this.brush=hyt(),this.brush.on("brush end",({selection:l})=>this.publish(l))}reset(){this.value=void 0,this.g&&this.brush.reset(this.g)}activate(){this.selection.activate(this.clause(this.value||[[0,1],[0,1]]))}publish(t){const{value:n,pixelSize:r,xscale:i,yscale:s}=this;let o,a;if(t){const[l,c]=t;o=[l[0],c[0]].map(u=>Ix(u,i,r)).sort(U0),a=[l[1],c[1]].map(u=>Ix(u,s,r)).sort(U0)}(!xx(o,n==null?void 0:n[0])||!xx(a,n==null?void 0:n[1]))&&(this.value=t?[o,a]:void 0,this.g.call(this.brush.moveSilent,t),this.selection.update(this.clause(this.value)))}clause(t){const{mark:n,pixelSize:r,xfield:i,yfield:s,xscale:o,yscale:a}=this;return{source:this,schema:{type:"interval",pixelSize:r,scales:[o,a]},clients:this.peers?n.plot.markSet:new Set().add(n),value:t,predicate:t?pc(Rr(i,t[0]),Rr(s,t[1])):null}}init(t){const{brush:n,style:r}=this,i=this.xscale=t.scale("x"),s=this.yscale=t.scale("y"),o=i.range,a=s.range;n.extent([[bn(o),bn(a)],[$e(o),$e(a)]]);const l=ye(t).selectAll('g[aria-label="facet"]'),c=l.size()?l:ye(t);if(this.g=c.append("g").attr("class","interval-xy").each(HU).call(n),r){const u=this.g.selectAll("rect.selection");for(const f in r)u.attr(f,r[f])}if(this.value){const[u,f]=this.value[0].map(i.apply).sort(U0),[d,h]=this.value[1].map(s.apply).sort(U0);this.g.call(n.moveSilent,[[u,d],[f,h]])}t.addEventListener("pointerenter",()=>this.activate())}}const kN=(e,t)=>e-t;class gyt{constructor(t,{x:n=new La,y:r=new La,xfield:i,yfield:s,zoom:o=!0,panx:a=!0,pany:l=!0}){this.mark=t,this.xsel=n,this.ysel=r,this.xfield=i||zf(t,["x","x1","x2"]),this.yfield=s||zf(t,["y","y1","y2"]),this.zoom=D_(o,[0,1/0],[1,1]),this.panx=this.xsel&&a,this.pany=this.ysel&&l;const{plot:c}=t;a&&this.xsel.addEventListener("value",u=>{c.setAttribute("xDomain",u)&&c.update()}),l&&this.ysel.addEventListener("value",u=>{c.setAttribute("yDomain",u)&&c.update()})}publish(t){if(this.panx){const n=byt(t,this.xscale);this.xsel.update(this.clause(n,this.xfield,this.xscale))}if(this.pany){const n=vyt(t,this.yscale);this.ysel.update(this.clause(n,this.yfield,this.yscale))}}clause(t,n,r){return{source:this,schema:{type:"interval",scales:[r]},clients:this.mark.plot.markSet,value:t,predicate:t?Rr(n,t):null}}init(t){if(this.svg=t,this.initialized)return;this.initialized=!0;const{panx:n,pany:r,mark:{plot:{element:i}},xsel:s,ysel:o}=this;this.xscale=t.scale("x"),this.yscale=t.scale("y");const a=this.xscale.range.slice().sort(kN),l=this.yscale.range.slice().sort(kN),c=D_(n,[-1/0,1/0],a),u=D_(r,[-1/0,1/0],l),f=Irt().extent([[a[0],l[0]],[a[1],l[1]]]).scaleExtent(this.zoom).translateExtent([[c[0],u[0]],[c[1],u[1]]]).on("start",()=>{this.xscale=this.svg.scale("x"),this.yscale=this.svg.scale("y")}).on("end",()=>i.__zoom=new Ts(1,0,0)).on("zoom",({transform:d})=>this.publish(d));if(ye(i).call(f),n||r){let d=!1;i.addEventListener("mouseenter",()=>{if(!d){if(d=!0,n){const{xscale:h,xfield:p}=this;s.activate(this.clause(h.domain,p,h))}if(r){const{yscale:h,yfield:p}=this;o.activate(this.clause(h.domain,p,h))}}}),i.addEventListener("mouseleave",()=>d=!1)}}}function D_(e,t,n){return e?Array.isArray(e)?e:t:n}function byt(e,t){return t.range.map(e.invertX,e).map(t.invert,t)}function vyt(e,t){return t.range.map(e.invertY,e).map(t.invert,t)}class XU{constructor(t,{selection:n,channel:r,field:i}){this.mark=t,this.selection=n,this.clients=new Set().add(t),this.channel=r,this.field=i||zf(t,[r])}clause(t){const{clients:n,field:r}=this,i=t?e3(r,Jp(t)):null;return{source:this,schema:{type:"point"},clients:n,value:t,predicate:i}}init(t){const n=this,{mark:r,channel:i,selection:s}=this,{data:o}=r,a=r.channelField(i).as,l=ye(t).selectAll('g[aria-label="facet"]'),c=l.size()?l:ye(t),u=t.scale(i),f=!yc(s);c.on("pointerdown pointermove",function(d){const[h,p]=Mi(d,this),g=wyt(o,a,u.invert(i==="x"?h:p));s.update(f?g:n.clause(g))}),!f&&t.addEventListener("pointerenter",()=>{this.selection.activate(this.clause(0))})}}function wyt(e,t,n){let r=1/0,i;return e.forEach(s=>{const o=Math.abs(s[t]-n);o<r&&(r=o,i=s[t])}),i}function dl(e,t){return n=>{const r=n.marks[n.marks.length-1];n.addInteractor(new e(r,t))}}function j1({by:e,...t}){return dl(cyt,{selection:e,channels:t})}function Wv({as:e,...t}){return dl(WU,{...t,selection:e})}function QU(e){return Wv({...e,channels:["x"]})}function KU(e){return Wv({...e,channels:["y"]})}function _yt(e){return Wv({...e,channels:["color"]})}function Syt({as:e,...t}){return dl(XU,{...t,selection:e,channel:"x"})}function xyt({as:e,...t}){return dl(XU,{...t,selection:e,channel:"y"})}function ac({as:e,...t}){return dl(GU,{...t,selection:e,channel:"x"})}function Iyt({as:e,...t}){return dl(GU,{...t,selection:e,channel:"y"})}function Ex({as:e,...t}){return dl(myt,{...t,selection:e})}function md(e){return dl(gyt,e)}function Eyt(e={}){return md({...e,zoom:!1})}function Tyt(e={}){return md({...e,zoom:!1,pany:!1})}function Ayt(e={}){return md({...e,zoom:!1,panx:!1})}function Myt(e={}){return md(e)}function $yt(e={}){return md({...e,pany:!1})}function Nyt(e={}){return md({...e,panx:!1})}const Dyt=Object.freeze(Object.defineProperty({__proto__:null,highlight:j1,intervalX:ac,intervalXY:Ex,intervalY:Iyt,nearestX:Syt,nearestY:xyt,pan:Eyt,panX:Tyt,panY:Ayt,panZoom:Myt,panZoomX:$yt,panZoomY:Nyt,toggle:Wv,toggleColor:_yt,toggleX:QU,toggleY:KU},Symbol.toStringTag,{value:"Module"}));class ON{constructor(t,n){const{as:r,...i}=n;this.channel=t,this.options={label:null,...i},this.selection=r,this.element=document.createElement("div"),this.element.setAttribute("class","legend"),this.element.value=this}setPlot(t){const{channel:n,selection:r}=this,i=kyt(t,n);this.selection&&i&&(this.handler=new WU(i,{selection:r,channels:[n]}),this.selection.addEventListener("value",()=>this.update()))}init(t){const{channel:n,options:r,handler:i}=this,o=t.scale(n).type==="ordinal"?r:{marginTop:1,tickSize:2,height:28,...r};return this.legend=t.legend(n,o),i&&(i.init(this.legend,":scope > div",a=>[a.__data__]),this.update()),this.element.replaceChildren(this.legend),this.element}update(){if(!this.legend)return;const{value:t}=this.selection,n=t&&t.length?new Set(t.map(i=>i[0])):null,r=this.legend.querySelectorAll(":scope > div");for(const i of r){const s=n?n.has(i.__data__):!0;i.style.opacity=s?1:.2}}}function kyt({marks:e},t){const n=t==="color"?["fill","stroke"]:t==="opacity"?["opacity","fillOpacity","strokeOpacity"]:null;if(n==null)return null;for(let r=e.length-1;r>-1;--r)if(e[r].channelField(n))return e[r];return null}function pT(e,t={}){if(t.for){const{for:n,...r}=t,i=new ON(e,r),s=typeof n,o=a=>a.addLegend(i,!1);return s==="string"?lU.request(n,o):n.value&&o(n.value),i.element}else return n=>n.addLegend(new ON(e,t))}const ZU=e=>pT("color",e),Oyt=e=>pT("opacity",e),Fyt=e=>pT("symbol",e),Byt=Object.freeze(Object.defineProperty({__proto__:null,colorLegend:ZU,opacityLegend:Oyt,symbolLegend:Fyt},Symbol.toStringTag,{value:"Module"}));function JU({direction:e="vertical",wrap:t=!1},n){const r=document.createElement("div");return r.style.display="flex",r.style.flexDirection=e==="vertical"?"column":"row",r.style.flexWrap=t?t===!0?"wrap":t:"nowrap",r.style.justifyContent="flex-start",r.style.alignItems="flex-start",n.forEach(i=>r.appendChild(i)),r.value={element:r},r}function gd(...e){return JU({direction:"vertical"},e.flat())}function jf(...e){return JU({direction:"horizontal"},e.flat())}function Ryt({dim:e="width",size:t=10}){const n=document.createElement("span");n.style.display="inline-block",n.style[e]=Number.isNaN(+t)?t:`${t}px`;const r={element:n};return n.value=r,n}function Lyt(e){return Ryt({dim:"width",size:e})}function Cyt(e){return e}function Uyt(e){if(e==null)return Cyt;var t,n,r=e.scale[0],i=e.scale[1],s=e.translate[0],o=e.translate[1];return function(a,l){l||(t=n=0);var c=2,u=a.length,f=new Array(u);for(f[0]=(t+=a[0])*r+s,f[1]=(n+=a[1])*i+o;c<u;)f[c]=a[c],++c;return f}}function Pyt(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function zyt(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return FN(e,n)})}:FN(e,t)}function FN(e,t){var n=t.id,r=t.bbox,i=t.properties==null?{}:t.properties,s=jyt(e,t);return n==null&&r==null?{type:"Feature",properties:i,geometry:s}:r==null?{type:"Feature",id:n,properties:i,geometry:s}:{type:"Feature",id:n,bbox:r,properties:i,geometry:s}}function jyt(e,t){var n=Uyt(e.transform),r=e.arcs;function i(u,f){f.length&&f.pop();for(var d=r[u<0?~u:u],h=0,p=d.length;h<p;++h)f.push(n(d[h],h));u<0&&Pyt(f,p)}function s(u){return n(u)}function o(u){for(var f=[],d=0,h=u.length;d<h;++d)i(u[d],f);return f.length<2&&f.push(f[0]),f}function a(u){for(var f=o(u);f.length<4;)f.push(f[0]);return f}function l(u){return u.map(a)}function c(u){var f=u.type,d;switch(f){case"GeometryCollection":return{type:f,geometries:u.geometries.map(c)};case"Point":d=s(u.coordinates);break;case"MultiPoint":d=u.coordinates.map(s);break;case"LineString":d=o(u.arcs);break;case"MultiLineString":d=u.arcs.map(o);break;case"Polygon":d=l(u.arcs);break;case"MultiPolygon":d=u.arcs.map(l);break;default:return null}return{type:f,coordinates:d}}return c(t)}const Vyt={menu:VH,search:HH,slider:eS,table:zO};new Map(Object.entries(ayt));new Map(Object.entries(Vyt));new Map(Object.entries(Byt));new Map(Object.entries(Sht));new Map(Object.entries(Dyt));function Yyt({connect:e}){const[t,n]=Mr.useState(null),r=Mr.useCallback(s=>{n(s.target.value)},[]),i=Mr.useCallback(()=>{t&&e(t)},[e,t]);return qt.jsxs("div",{id:"connect-pane",children:[qt.jsx("div",{id:"token-input-row",children:qt.jsx("input",{id:"token-input",type:"password",placeholder:"Paste MotherDuck Service Token Here",onChange:r})}),qt.jsx("div",{id:"connect-button-row",children:qt.jsx("button",{id:"connect-button",disabled:!t,onClick:i,children:"Connect"})})]})}const qyt="assets/motherduck_logo-X5yv95Gl.svg";function Wyt(){return qt.jsxs("div",{id:"header",children:[qt.jsx("div",{id:"title",children:qt.jsx("a",{href:"https://motherduck.com",target:"_blank",children:qt.jsx("img",{src:qyt,alt:"MotherDuck logo"})})}),qt.jsxs("div",{id:"subtitle",children:["WASM Client Example:",qt.jsx("a",{href:"https://uwdata.github.io/mosaic/",target:"_blank",children:"Mosaic"}),"Integration"]})]})}class Hyt{async initialize(){await Xn().exec(`create temp view if not exists complaints as 
        select year(created_date)::int as Year, count(*)::int as Complaints
        from sample_data.nyc.service_requests
        where Year < 2023
        and agency_name = 'New York City Police Department'
        group by 1
        order by 1;`),await Xn().exec(`create temp view if not exists complaints_details as
        select year(created_date)::int as Year, complaint_type as Type, count(*)::int as Complaints
        from sample_data.nyc.service_requests
        where Year < 2023
        and agency_name = 'New York City Police Department'
        group by 1, 2
        order by 1, 3 desc;`)}render(){const t=La.single();return gd(Ge(fT(Oe("complaints"),{x:"Year",y:"Complaints",fill:"steelblue"}),j1({by:t}),QU({as:t}),oT("d"),U1(!0),Fh("s")),zO({from:"complaints_details",filterBy:t,format:{Year:n=>String(n)},width:{Year:80,Type:400,Complaints:100},height:400}))}}const rs=[hU(null),pU(null),fU({left:5,top:5,right:5,bottom:5}),Bi(160),Ms(100),aT([0,9])];class Gyt{async initialize(){await Xn().exec(nH("md",[{i:0,u:"A",v:2},{i:1,u:"B",v:8},{i:2,u:"C",v:3},{i:3,u:"D",v:7},{i:4,u:"E",v:5},{i:5,u:"F",v:4},{i:6,u:"G",v:6},{i:7,u:"H",v:1}]))}render(){return gd(jf(Ge(fT(Oe("md"),{x:"u",y:"v",fill:"steelblue"}),...rs),Ge(RU(Oe("md"),{x:"u",y:"v",stroke:"steelblue",curve:"monotone-x",marker:"circle"}),...rs),Ge(LU(Oe("md"),{x:"u",y:"v",text:"u",fill:"steelblue"}),...rs),Ge(CU(Oe("md"),{x:"u",y:"v",stroke:"steelblue"}),...rs),Ge(BU(Oe("md"),{x:"u",y:"v",fill:"steelblue"}),...rs)),jf(Ge(qv(Oe("md"),{x:"i",y:"v",fill:"currentColor",r:1.5}),VU(Oe("md"),{x:"i",y:"v",stroke:"steelblue"}),...rs,ri([-.5,7.5])),Ge(jU({stroke:"#aaa",strokeOpacity:.5}),zU(Oe("md"),{x:"i",y:"v",fill:hr()}),...rs,tf("blues"),ri([-1,8])),Ge(PU(Oe("md"),{x:"i",y:"v",stroke:"steelblue",bandwidth:15}),...rs,ri([-1,8])),Ge(z1(Oe("md"),{x:"i",y:"v",fill:"density",bandwidth:15}),...rs,tf("blues"),ri([-1,8])),Ge(UU(Oe("md"),{x:"i",y:"v",fill:"density",bandwidth:2,binWidth:1}),...rs,tf("blues"),ri([-1,8]))))}}class Xyt{async initialize(){await Xn().exec(`CREATE TEMP VIEW IF NOT EXISTS gaia_viz AS -- compute u and v with natural earth projection
      WITH prep AS (
        SELECT
          radians((-l + 540) % 360 - 180) AS lambda,
          radians(b) AS phi,
          asin(sqrt(3)/2 * sin(phi)) AS t,
          t^2 AS t2,
          t2^3 AS t6,
          *
        FROM mosaic_examples.main.gaia_5m
      )
      SELECT
        (1.340264 * lambda * cos(t)) / (sqrt(3)/2 * (1.340264 + (-0.081106 * 3 * t2) + (t6 * (0.000893 * 7 + 0.003796 * 9 * t2)))) AS u,
        t * (1.340264 + (-0.081106 * t2) + (t6 * (0.000893 + 0.003796 * t2))) AS v,
        * EXCLUDE('t', 't2', 't6')
      FROM prep
      WHERE parallax BETWEEN -5 AND 20`)}render(){const t=La.crossfilter(),n=pr.value(0),r=pr.value(2),i=pr.value("sqrt");return jf(gd(Ge(z1(Oe("gaia_viz",{filterBy:t}),{x:"u",y:"v",fill:"density",bandwidth:n,binWidth:r,binType:"normal"}),Ex({pixelSize:2,as:t}),C1(oi),yx(i),tf("viridis"),Bi(440),Ms(250),dh(25),hx(20),dx(1)),jf(Ge(nf(Oe("gaia_viz",{filterBy:t}),{x:Th("phot_g_mean_mag"),y:hr(),fill:"steelblue",inset:.5}),ac({as:t}),ri(oi),px(i),U1(!0),Bi(220),Ms(120),dh(65)),Ge(nf(Oe("gaia_viz",{filterBy:t}),{x:Th("parallax"),y:hr(),fill:"steelblue",inset:.5}),ac({as:t}),ri(oi),px(i),U1(!0),Bi(220),Ms(120),dh(65)))),Lyt(10),Ge(z1(Oe("gaia_viz",{filterBy:t}),{x:"bp_rp",y:"phot_g_mean_mag",fill:"density",bandwidth:n,binWidth:r,binType:"normal"}),Ex({pixelSize:2,as:t}),C1(oi),yx(i),tf("viridis"),mU(!0),Bi(230),Ms(370),dh(25),hx(20),dx(1)))}}class Qyt{constructor(){zy(this,"land",null)}async initialize(){await Xn().exec("CREATE TEMP VIEW IF NOT EXISTS earthquakes_viz AS SELECT * FROM mosaic_examples.main.earthquakes"),this.land=await fetch("/countries-110m.json").then(t=>t.json()).then(t=>{if(t.objects.land.type!=="GeometryCollection")throw Error("unexpected geojson type");return zyt(t,t.objects.land).features})}render(){const t=pr.value(-180),n=pr.value(-30),r=pr.array([t,n]);return gd(jf(eS({label:"Longitude",as:t,min:-180,max:180,step:1}),eS({label:"Latitude",as:n,min:-90,max:90,step:1})),Ge(YU(this.land,{fill:"currentColor",fillOpacity:.2}),qU(),qv(Oe("earthquakes_viz"),{x:"longitude",y:"latitude",r:G`POW(10, magnitude)`,stroke:"red",fill:"red",fillOpacity:.2}),dU("overflow: visible;"),vU("orthographic"),wU(r)))}}class Kyt{async initialize(){await Xn().exec("CREATE TEMP VIEW IF NOT EXISTS weather AS SELECT * FROM mosaic_examples.main.seattle_weather")}render(){const t=La.single(),n=pr.array(["sun","fog","drizzle","rain","snow"]),r=pr.array(["#e7ba52","#a7a7a7","#aec7e8","#1f77b4","#9467bd"]),i=La.intersect();return gd(jf(Ge(qv(Oe("weather",{filterBy:t}),{x:JW("date"),y:"temp_max",fill:"weather",r:"precipitation",fillOpacity:.7}),ac({as:i,brush:{fill:"none",stroke:"#888"}}),j1({by:i,fill:"#ccc",fillOpacity:.2}),ZU({as:t,columns:1}),C1(oi),oT("%b"),mx(n),gx(r),gU(oi),bU([2,10]),Bi(680),Ms(300))),Ge(_x(Oe("weather"),{x:hr(),y:"weather",fill:"#ccc",fillOpacity:.2}),_x(Oe("weather",{filterBy:i}),{x:hr(),y:"weather",fill:"weather",order:"weather"}),KU({as:t}),j1({by:t}),ri(oi),aT(n),yU(null),mx(n),gx(r),Bi(680)))}}const BN="flights_200k_viz",RN="flights_10m_viz";class LN{constructor(t="flights_200k"){zy(this,"flightsTableName");zy(this,"vizTable",null);this.flightsTableName=t}async initialize(){const t=`mosaic_examples.main.${this.flightsTableName}`;this.flightsTableName==="flights_10m"?(await Xn().exec(`
      create temp view if not exists ${RN} as
      select GREATEST(-60, LEAST(ARR_DELAY, 180))::DOUBLE AS delay, DISTANCE AS distance, DEP_TIME AS time
      from ${t}
      `),this.vizTable=RN):(await Xn().exec(`
      create temp view if not exists ${BN} as
      select *
      from ${t}
      `),this.vizTable=BN)}render(){const t=La.crossfilter();return gd(Ge(nf(Oe(this.vizTable,{filterBy:t}),{x:Th("delay"),y:hr(),fill:"steelblue",inset:.5}),ac({as:t}),ri(oi),Fh("s"),Bi(600),Ms(200)),Ge(nf(Oe(this.vizTable,{filterBy:t}),{x:Th("time"),y:hr(),fill:"steelblue",inset:.5}),ac({as:t}),ri(oi),Fh("s"),Bi(600),Ms(200)),Ge(nf(Oe(this.vizTable,{filterBy:t}),{x:Th("distance"),y:hr(),fill:"steelblue",inset:.5}),ac({as:t}),ri(oi),Fh("s"),Bi(600),Ms(200)))}}const tP={"Mark Types":new Gyt,"NYPD Complaints":new Hyt,Earthquakes:new Qyt,"Seattle Weather":new Kyt,"Flights 200K":new LN("flights_200k"),"Flights 10M":new LN("flights_10m"),"Gaia Star Catalog":new Xyt},CN=Object.keys(tP);function Zyt(){const[e,t]=Mr.useState(null),[n,r]=Mr.useState(null),[i,s]=Mr.useState(CN[0]),o=Mr.useCallback(a=>{s(a.target.value)},[]);return Mr.useEffect(()=>{(async()=>{if(n){const a=tP[i];t(null),n.innerHTML="Loading, please wait";try{await a.initialize(),n.innerHTML="",n.appendChild(a.render())}catch(l){const c=String(l);n.innerHTML=c,/Catalog "sample_data" does not exist!/.test(c)?t("sample_data"):/Catalog "mosaic_examples" does not exist!/.test(c)&&t("mosaic_examples")}}})()},[i,n]),qt.jsxs("div",{id:"vizzes-pane",children:[qt.jsx("div",{id:"selector-pane",children:qt.jsx("select",{id:"viz-selector",value:i,onChange:o,children:CN.map(a=>qt.jsx("option",{children:a},a))})}),qt.jsx("div",{id:"viz-pane",ref:r}),e==="sample_data"?qt.jsxs("div",{id:"help-pane",children:[qt.jsxs("div",{children:["This example requires the ",qt.jsx("span",{className:"code",children:"sample_data"})," share."]}),qt.jsx("div",{children:"To attach it to your account, run:"}),qt.jsx("pre",{children:"ATTACH 'md:_share/sample_data/23b0d623-1361-421d-ae77-62d701d471e6';"})]}):null,e==="mosaic_examples"?qt.jsxs("div",{id:"help-pane",children:[qt.jsxs("div",{children:["This example requires the ",qt.jsx("span",{className:"code",children:"mosaic_examples"})," share."]}),qt.jsx("div",{children:"To attach it to your account, run:"}),qt.jsx("pre",{children:"ATTACH 'md:_share/mosaic_examples/b01cfda8-239e-4148-a228-054b94cdc3b4';"})]}):null]})}const Jyt=new TextDecoder("utf-8"),Tx=e=>Jyt.decode(e),t0t=new TextEncoder,yT=e=>t0t.encode(e),e0t=e=>typeof e=="number",eP=e=>typeof e=="boolean",sn=e=>typeof e=="function",_r=e=>e!=null&&Object(e)===e,Mc=e=>_r(e)&&sn(e.then),Oy=e=>_r(e)&&sn(e[Symbol.iterator]),bd=e=>_r(e)&&sn(e[Symbol.asyncIterator]),Ax=e=>_r(e)&&_r(e.schema),nP=e=>_r(e)&&"done"in e&&"value"in e,rP=e=>_r(e)&&sn(e.stat)&&e0t(e.fd),iP=e=>_r(e)&&mT(e.body),Hv=e=>"_getDOMStream"in e&&"_getNodeStream"in e,n0t=e=>_r(e)&&sn(e.abort)&&sn(e.getWriter)&&!Hv(e),mT=e=>_r(e)&&sn(e.cancel)&&sn(e.getReader)&&!Hv(e),r0t=e=>_r(e)&&sn(e.end)&&sn(e.write)&&eP(e.writable)&&!Hv(e),sP=e=>_r(e)&&sn(e.read)&&sn(e.pipe)&&eP(e.readable)&&!Hv(e),i0t=e=>_r(e)&&sn(e.clear)&&sn(e.bytes)&&sn(e.position)&&sn(e.setPosition)&&sn(e.capacity)&&sn(e.getBufferIdentifier)&&sn(e.createLong),gT=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function s0t(e){const t=e[0]?[e[0]]:[];let n,r,i,s;for(let o,a,l=0,c=0,u=e.length;++l<u;){if(o=t[c],a=e[l],!o||!a||o.buffer!==a.buffer||a.byteOffset<o.byteOffset){a&&(t[++c]=a);continue}if({byteOffset:n,byteLength:i}=o,{byteOffset:r,byteLength:s}=a,n+i<r||r+s<n){a&&(t[++c]=a);continue}t[c]=new Uint8Array(o.buffer,n,r-n+s)}return t}function UN(e,t,n=0,r=t.byteLength){const i=e.byteLength,s=new Uint8Array(e.buffer,e.byteOffset,i),o=new Uint8Array(t.buffer,t.byteOffset,Math.min(r,i));return s.set(o,n),e}function Us(e,t){const n=s0t(e),r=n.reduce((u,f)=>u+f.byteLength,0);let i,s,o,a=0,l=-1;const c=Math.min(t||Number.POSITIVE_INFINITY,r);for(const u=n.length;++l<u;){if(i=n[l],s=i.subarray(0,Math.min(i.length,c-a)),c<=a+s.length){s.length<i.length?n[l]=i.subarray(s.length):s.length===i.length&&l++,o?UN(o,s,a):o=s;break}UN(o||(o=new Uint8Array(c)),s,a),a+=s.length}return[o||new Uint8Array(0),n.slice(l),r-(o?o.byteLength:0)]}function ce(e,t){let n=nP(t)?t.value:t;return n instanceof e?e===Uint8Array?new e(n.buffer,n.byteOffset,n.byteLength):n:n?(typeof n=="string"&&(n=yT(n)),n instanceof ArrayBuffer?new e(n):n instanceof gT?new e(n):i0t(n)?ce(e,n.bytes()):ArrayBuffer.isView(n)?n.byteLength<=0?new e(0):new e(n.buffer,n.byteOffset,n.byteLength/e.BYTES_PER_ELEMENT):e.from(n)):new e(0)}const Vd=e=>ce(Int32Array,e),Zt=e=>ce(Uint8Array,e),Mx=e=>(e.next(),e);function*o0t(e,t){const n=function*(i){yield i},r=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof gT?n(t):Oy(t)?t:n(t);return yield*Mx(function*(i){let s=null;do s=i.next(yield ce(e,s));while(!s.done)}(r[Symbol.iterator]())),new e}const a0t=e=>o0t(Uint8Array,e);function oP(e,t){return en(this,arguments,function*(){if(Mc(t))return yield K(yield K(yield*Ma(Fr(oP(e,yield K(t))))));const r=function(o){return en(this,arguments,function*(){yield yield K(yield K(o))})},i=function(o){return en(this,arguments,function*(){yield K(yield*Ma(Fr(Mx(function*(a){let l=null;do l=a.next(yield l==null?void 0:l.value);while(!l.done)}(o[Symbol.iterator]())))))})},s=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof gT?r(t):Oy(t)?i(t):bd(t)?t:r(t);return yield K(yield*Ma(Fr(Mx(function(o){return en(this,arguments,function*(){let a=null;do a=yield K(o.next(yield yield K(ce(e,a))));while(!a.done)})}(s[Symbol.asyncIterator]()))))),yield K(new e)})}const l0t=e=>oP(Uint8Array,e);function aP(e,t,n){if(e!==0){n=n.slice(0,t);for(let r=-1,i=n.length;++r<i;)n[r]+=e}return n.subarray(0,t)}function c0t(e,t){let n=0;const r=e.length;if(r!==t.length)return!1;if(r>0)do if(e[n]!==t[n])return!1;while(++n<r);return!0}const Kr={fromIterable(e){return P0(u0t(e))},fromAsyncIterable(e){return P0(f0t(e))},fromDOMStream(e){return P0(d0t(e))},fromNodeStream(e){return P0(p0t(e))},toDOMStream(e,t){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(e,t){throw new Error('"toNodeStream" not available in this environment')}},P0=e=>(e.next(),e);function*u0t(e){let t,n=!1,r=[],i,s,o,a=0;function l(){return s==="peek"?Us(r,o)[0]:([i,r,a]=Us(r,o),i)}({cmd:s,size:o}=yield null);const c=a0t(e)[Symbol.iterator]();try{do if({done:t,value:i}=Number.isNaN(o-a)?c.next():c.next(o-a),!t&&i.byteLength>0&&(r.push(i),a+=i.byteLength),t||o<=a)do({cmd:s,size:o}=yield l());while(o<a);while(!t)}catch(u){(n=!0)&&typeof c.throw=="function"&&c.throw(u)}finally{n===!1&&typeof c.return=="function"&&c.return(null)}return null}function f0t(e){return en(this,arguments,function*(){let n,r=!1,i=[],s,o,a,l=0;function c(){return o==="peek"?Us(i,a)[0]:([s,i,l]=Us(i,a),s)}({cmd:o,size:a}=yield yield K(null));const u=l0t(e)[Symbol.asyncIterator]();try{do if({done:n,value:s}=Number.isNaN(a-l)?yield K(u.next()):yield K(u.next(a-l)),!n&&s.byteLength>0&&(i.push(s),l+=s.byteLength),n||a<=l)do({cmd:o,size:a}=yield yield K(c()));while(a<l);while(!n)}catch(f){(r=!0)&&typeof u.throw=="function"&&(yield K(u.throw(f)))}finally{r===!1&&typeof u.return=="function"&&(yield K(u.return(new Uint8Array(0))))}return yield K(null)})}function d0t(e){return en(this,arguments,function*(){let n=!1,r=!1,i=[],s,o,a,l=0;function c(){return o==="peek"?Us(i,a)[0]:([s,i,l]=Us(i,a),s)}({cmd:o,size:a}=yield yield K(null));const u=new h0t(e);try{do if({done:n,value:s}=Number.isNaN(a-l)?yield K(u.read()):yield K(u.read(a-l)),!n&&s.byteLength>0&&(i.push(Zt(s)),l+=s.byteLength),n||a<=l)do({cmd:o,size:a}=yield yield K(c()));while(a<l);while(!n)}catch(f){(r=!0)&&(yield K(u.cancel(f)))}finally{r===!1?yield K(u.cancel()):e.locked&&u.releaseLock()}return yield K(null)})}class h0t{constructor(t){this.source=t,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(t){return W(this,void 0,void 0,function*(){const{reader:n,source:r}=this;n&&(yield n.cancel(t).catch(()=>{})),r&&r.locked&&this.releaseLock()})}read(t){return W(this,void 0,void 0,function*(){if(t===0)return{done:this.reader==null,value:new Uint8Array(0)};const n=yield this.reader.read();return!n.done&&(n.value=Zt(n)),n})}}const k_=(e,t)=>{const n=i=>r([t,i]);let r;return[t,n,new Promise(i=>(r=i)&&e.once(t,n))]};function p0t(e){return en(this,arguments,function*(){const n=[];let r="error",i=!1,s=null,o,a,l=0,c=[],u;function f(){return o==="peek"?Us(c,a)[0]:([u,c,l]=Us(c,a),u)}if({cmd:o,size:a}=yield yield K(null),e.isTTY)return yield yield K(new Uint8Array(0)),yield K(null);try{n[0]=k_(e,"end"),n[1]=k_(e,"error");do{if(n[2]=k_(e,"readable"),[r,s]=yield K(Promise.race(n.map(h=>h[2]))),r==="error")break;if((i=r==="end")||(Number.isFinite(a-l)?(u=Zt(e.read(a-l)),u.byteLength<a-l&&(u=Zt(e.read()))):u=Zt(e.read()),u.byteLength>0&&(c.push(u),l+=u.byteLength)),i||a<=l)do({cmd:o,size:a}=yield yield K(f()));while(a<l)}while(!i)}finally{yield K(d(n,r==="error"?s:null))}return yield K(null);function d(h,p){return u=c=null,new Promise((g,v)=>{for(const[y,m]of h)e.off(y,m);try{const y=e.destroy;y&&y.call(e,p),p=void 0}catch(y){p=y||p}finally{p!=null?v(p):g()}})}})}var Sn;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(Sn||(Sn={}));var ln;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(ln||(ln={}));var nn;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(nn||(nn={}));var Pr;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(Pr||(Pr={}));var rt;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(rt||(rt={}));var yr;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(yr||(yr={}));var re;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(re||(re={}));var D;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.Float=3]="Float",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct=13]="Struct",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.Dictionary=-1]="Dictionary",e[e.Int8=-2]="Int8",e[e.Int16=-3]="Int16",e[e.Int32=-4]="Int32",e[e.Int64=-5]="Int64",e[e.Uint8=-6]="Uint8",e[e.Uint16=-7]="Uint16",e[e.Uint32=-8]="Uint32",e[e.Uint64=-9]="Uint64",e[e.Float16=-10]="Float16",e[e.Float32=-11]="Float32",e[e.Float64=-12]="Float64",e[e.DateDay=-13]="DateDay",e[e.DateMillisecond=-14]="DateMillisecond",e[e.TimestampSecond=-15]="TimestampSecond",e[e.TimestampMillisecond=-16]="TimestampMillisecond",e[e.TimestampMicrosecond=-17]="TimestampMicrosecond",e[e.TimestampNanosecond=-18]="TimestampNanosecond",e[e.TimeSecond=-19]="TimeSecond",e[e.TimeMillisecond=-20]="TimeMillisecond",e[e.TimeMicrosecond=-21]="TimeMicrosecond",e[e.TimeNanosecond=-22]="TimeNanosecond",e[e.DenseUnion=-23]="DenseUnion",e[e.SparseUnion=-24]="SparseUnion",e[e.IntervalDayTime=-25]="IntervalDayTime",e[e.IntervalYearMonth=-26]="IntervalYearMonth",e[e.DurationSecond=-27]="DurationSecond",e[e.DurationMillisecond=-28]="DurationMillisecond",e[e.DurationMicrosecond=-29]="DurationMicrosecond",e[e.DurationNanosecond=-30]="DurationNanosecond"})(D||(D={}));var lo;(function(e){e[e.OFFSET=0]="OFFSET",e[e.DATA=1]="DATA",e[e.VALIDITY=2]="VALIDITY",e[e.TYPE=3]="TYPE"})(lo||(lo={}));const y0t=void 0;function Np(e){if(e===null)return"null";if(e===y0t)return"undefined";switch(typeof e){case"number":return`${e}`;case"bigint":return`${e}`;case"string":return`"${e}"`}return typeof e[Symbol.toPrimitive]=="function"?e[Symbol.toPrimitive]("string"):ArrayBuffer.isView(e)?e instanceof BigInt64Array||e instanceof BigUint64Array?`[${[...e].map(t=>Np(t))}]`:`[${e}]`:ArrayBuffer.isView(e)?`[${e}]`:JSON.stringify(e,(t,n)=>typeof n=="bigint"?`${n}`:n)}const m0t=Symbol.for("isArrowBigNum");function Zi(e,...t){return t.length===0?Object.setPrototypeOf(ce(this.TypedArray,e),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(e,...t),this.constructor.prototype)}Zi.prototype[m0t]=!0;Zi.prototype.toJSON=function(){return`"${kp(this)}"`};Zi.prototype.valueOf=function(){return lP(this)};Zi.prototype.toString=function(){return kp(this)};Zi.prototype[Symbol.toPrimitive]=function(e="default"){switch(e){case"number":return lP(this);case"string":return kp(this);case"default":return g0t(this)}return kp(this)};function rf(...e){return Zi.apply(this,e)}function sf(...e){return Zi.apply(this,e)}function Dp(...e){return Zi.apply(this,e)}Object.setPrototypeOf(rf.prototype,Object.create(Int32Array.prototype));Object.setPrototypeOf(sf.prototype,Object.create(Uint32Array.prototype));Object.setPrototypeOf(Dp.prototype,Object.create(Uint32Array.prototype));Object.assign(rf.prototype,Zi.prototype,{constructor:rf,signed:!0,TypedArray:Int32Array,BigIntArray:BigInt64Array});Object.assign(sf.prototype,Zi.prototype,{constructor:sf,signed:!1,TypedArray:Uint32Array,BigIntArray:BigUint64Array});Object.assign(Dp.prototype,Zi.prototype,{constructor:Dp,signed:!0,TypedArray:Uint32Array,BigIntArray:BigUint64Array});function lP(e){const{buffer:t,byteOffset:n,length:r,signed:i}=e,s=new BigUint64Array(t,n,r),o=i&&s.at(-1)&BigInt(1)<<BigInt(63);let a=BigInt(o?1:0),l=BigInt(0);if(o){for(const c of s)a+=~c*(BigInt(1)<<BigInt(32)*l++);a*=BigInt(-1)}else for(const c of s)a+=c*(BigInt(1)<<BigInt(32)*l++);return a}const kp=e=>{if(e.byteLength===8)return`${new e.BigIntArray(e.buffer,e.byteOffset,1)[0]}`;if(!e.signed)return O_(e);let t=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);if(new Int16Array([t.at(-1)])[0]>=0)return O_(e);t=t.slice();let r=1;for(let s=0;s<t.length;s++){const o=t[s],a=~o+r;t[s]=a,r&=o===0?1:0}return`-${O_(t)}`},g0t=e=>e.byteLength===8?new e.BigIntArray(e.buffer,e.byteOffset,1)[0]:kp(e);function O_(e){let t="";const n=new Uint32Array(2);let r=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);const i=new Uint32Array((r=new Uint16Array(r).reverse()).buffer);let s=-1;const o=r.length-1;do{for(n[0]=r[s=0];s<o;)r[s++]=n[1]=n[0]/10,n[0]=(n[0]-n[1]*10<<16)+r[s];r[s]=n[1]=n[0]/10,n[0]=n[0]-n[1]*10,t=`${n[0]}${t}`}while(i[0]||i[1]||i[2]||i[3]);return t??"0"}class bT{static new(t,n){switch(n){case!0:return new rf(t);case!1:return new sf(t)}switch(t.constructor){case Int8Array:case Int16Array:case Int32Array:case BigInt64Array:return new rf(t)}return t.byteLength===16?new Dp(t):new sf(t)}static signed(t){return new rf(t)}static unsigned(t){return new sf(t)}static decimal(t){return new Dp(t)}constructor(t,n){return bT.new(t,n)}}function Gi(e){if(typeof e=="bigint"&&(e<Number.MIN_SAFE_INTEGER||e>Number.MAX_SAFE_INTEGER))throw new TypeError(`${e} is not safe to convert to a number.`);return Number(e)}var cP,uP,fP,dP,hP,pP,yP,mP,gP,bP,vP,wP,_P,SP,xP,IP,EP,TP,AP,MP;class at{static isNull(t){return(t==null?void 0:t.typeId)===D.Null}static isInt(t){return(t==null?void 0:t.typeId)===D.Int}static isFloat(t){return(t==null?void 0:t.typeId)===D.Float}static isBinary(t){return(t==null?void 0:t.typeId)===D.Binary}static isUtf8(t){return(t==null?void 0:t.typeId)===D.Utf8}static isBool(t){return(t==null?void 0:t.typeId)===D.Bool}static isDecimal(t){return(t==null?void 0:t.typeId)===D.Decimal}static isDate(t){return(t==null?void 0:t.typeId)===D.Date}static isTime(t){return(t==null?void 0:t.typeId)===D.Time}static isTimestamp(t){return(t==null?void 0:t.typeId)===D.Timestamp}static isInterval(t){return(t==null?void 0:t.typeId)===D.Interval}static isDuration(t){return(t==null?void 0:t.typeId)===D.Duration}static isList(t){return(t==null?void 0:t.typeId)===D.List}static isStruct(t){return(t==null?void 0:t.typeId)===D.Struct}static isUnion(t){return(t==null?void 0:t.typeId)===D.Union}static isFixedSizeBinary(t){return(t==null?void 0:t.typeId)===D.FixedSizeBinary}static isFixedSizeList(t){return(t==null?void 0:t.typeId)===D.FixedSizeList}static isMap(t){return(t==null?void 0:t.typeId)===D.Map}static isDictionary(t){return(t==null?void 0:t.typeId)===D.Dictionary}static isDenseUnion(t){return at.isUnion(t)&&t.mode===ln.Dense}static isSparseUnion(t){return at.isUnion(t)&&t.mode===ln.Sparse}get typeId(){return D.NONE}}cP=Symbol.toStringTag;at[cP]=(e=>(e.children=null,e.ArrayType=Array,e[Symbol.toStringTag]="DataType"))(at.prototype);let Ha=class extends at{toString(){return"Null"}get typeId(){return D.Null}};uP=Symbol.toStringTag;Ha[uP]=(e=>e[Symbol.toStringTag]="Null")(Ha.prototype);class Ga extends at{constructor(t,n){super(),this.isSigned=t,this.bitWidth=n}get typeId(){return D.Int}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?BigInt64Array:BigUint64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}fP=Symbol.toStringTag;Ga[fP]=(e=>(e.isSigned=null,e.bitWidth=null,e[Symbol.toStringTag]="Int"))(Ga.prototype);class Op extends Ga{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}Object.defineProperty(Op.prototype,"ArrayType",{value:Int32Array});class Fp extends at{constructor(t){super(),this.precision=t}get typeId(){return D.Float}get ArrayType(){switch(this.precision){case nn.HALF:return Uint16Array;case nn.SINGLE:return Float32Array;case nn.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}dP=Symbol.toStringTag;Fp[dP]=(e=>(e.precision=null,e[Symbol.toStringTag]="Float"))(Fp.prototype);let V1=class extends at{constructor(){super()}get typeId(){return D.Binary}toString(){return"Binary"}};hP=Symbol.toStringTag;V1[hP]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Binary"))(V1.prototype);let Y1=class extends at{constructor(){super()}get typeId(){return D.Utf8}toString(){return"Utf8"}};pP=Symbol.toStringTag;Y1[pP]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Utf8"))(Y1.prototype);let q1=class extends at{constructor(){super()}get typeId(){return D.Bool}toString(){return"Bool"}};yP=Symbol.toStringTag;q1[yP]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Bool"))(q1.prototype);let W1=class extends at{constructor(t,n,r=128){super(),this.scale=t,this.precision=n,this.bitWidth=r}get typeId(){return D.Decimal}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}};mP=Symbol.toStringTag;W1[mP]=(e=>(e.scale=null,e.precision=null,e.ArrayType=Uint32Array,e[Symbol.toStringTag]="Decimal"))(W1.prototype);class H1 extends at{constructor(t){super(),this.unit=t}get typeId(){return D.Date}toString(){return`Date${(this.unit+1)*32}<${Pr[this.unit]}>`}}gP=Symbol.toStringTag;H1[gP]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Date"))(H1.prototype);class Bp extends at{constructor(t,n){super(),this.unit=t,this.bitWidth=n}get typeId(){return D.Time}toString(){return`Time${this.bitWidth}<${rt[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return BigInt64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}bP=Symbol.toStringTag;Bp[bP]=(e=>(e.unit=null,e.bitWidth=null,e[Symbol.toStringTag]="Time"))(Bp.prototype);class G1 extends at{constructor(t,n){super(),this.unit=t,this.timezone=n}get typeId(){return D.Timestamp}toString(){return`Timestamp<${rt[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}vP=Symbol.toStringTag;G1[vP]=(e=>(e.unit=null,e.timezone=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Timestamp"))(G1.prototype);class X1 extends at{constructor(t){super(),this.unit=t}get typeId(){return D.Interval}toString(){return`Interval<${yr[this.unit]}>`}}wP=Symbol.toStringTag;X1[wP]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Interval"))(X1.prototype);let Q1=class extends at{constructor(t){super(),this.unit=t}get typeId(){return D.Duration}toString(){return`Duration<${rt[this.unit]}>`}};_P=Symbol.toStringTag;Q1[_P]=(e=>(e.unit=null,e.ArrayType=BigInt64Array,e[Symbol.toStringTag]="Duration"))(Q1.prototype);let K1=class extends at{constructor(t){super(),this.children=[t]}get typeId(){return D.List}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}};SP=Symbol.toStringTag;K1[SP]=(e=>(e.children=null,e[Symbol.toStringTag]="List"))(K1.prototype);class qn extends at{constructor(t){super(),this.children=t}get typeId(){return D.Struct}toString(){return`Struct<{${this.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}xP=Symbol.toStringTag;qn[xP]=(e=>(e.children=null,e[Symbol.toStringTag]="Struct"))(qn.prototype);class Z1 extends at{constructor(t,n,r){super(),this.mode=t,this.children=r,this.typeIds=n=Int32Array.from(n),this.typeIdToChildIndex=n.reduce((i,s,o)=>(i[s]=o)&&i||i,Object.create(null))}get typeId(){return D.Union}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(t=>`${t.type}`).join(" | ")}>`}}IP=Symbol.toStringTag;Z1[IP]=(e=>(e.mode=null,e.typeIds=null,e.children=null,e.typeIdToChildIndex=null,e.ArrayType=Int8Array,e[Symbol.toStringTag]="Union"))(Z1.prototype);let J1=class extends at{constructor(t){super(),this.byteWidth=t}get typeId(){return D.FixedSizeBinary}toString(){return`FixedSizeBinary[${this.byteWidth}]`}};EP=Symbol.toStringTag;J1[EP]=(e=>(e.byteWidth=null,e.ArrayType=Uint8Array,e[Symbol.toStringTag]="FixedSizeBinary"))(J1.prototype);let tb=class extends at{constructor(t,n){super(),this.listSize=t,this.children=[n]}get typeId(){return D.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}};TP=Symbol.toStringTag;tb[TP]=(e=>(e.children=null,e.listSize=null,e[Symbol.toStringTag]="FixedSizeList"))(tb.prototype);class eb extends at{constructor(t,n=!1){var r,i,s;if(super(),this.children=[t],this.keysSorted=n,t&&(t.name="entries",!((r=t==null?void 0:t.type)===null||r===void 0)&&r.children)){const o=(i=t==null?void 0:t.type)===null||i===void 0?void 0:i.children[0];o&&(o.name="key");const a=(s=t==null?void 0:t.type)===null||s===void 0?void 0:s.children[1];a&&(a.name="value")}}get typeId(){return D.Map}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}AP=Symbol.toStringTag;eb[AP]=(e=>(e.children=null,e.keysSorted=null,e[Symbol.toStringTag]="Map_"))(eb.prototype);const b0t=(e=>()=>++e)(-1);class Vf extends at{constructor(t,n,r,i){super(),this.indices=n,this.dictionary=t,this.isOrdered=i||!1,this.id=r==null?b0t():Gi(r)}get typeId(){return D.Dictionary}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}MP=Symbol.toStringTag;Vf[MP]=(e=>(e.id=null,e.indices=null,e.isOrdered=null,e.dictionary=null,e[Symbol.toStringTag]="Dictionary"))(Vf.prototype);function co(e){const t=e;switch(e.typeId){case D.Decimal:return e.bitWidth/32;case D.Timestamp:return 2;case D.Date:return 1+t.unit;case D.Interval:return 1+t.unit;case D.FixedSizeList:return t.listSize;case D.FixedSizeBinary:return t.byteWidth;default:return 1}}class Ft{visitMany(t,...n){return t.map((r,i)=>this.visit(r,...n.map(s=>s[i])))}visit(...t){return this.getVisitFn(t[0],!1).apply(this,t)}getVisitFn(t,n=!0){return v0t(this,t,n)}getVisitFnByTypeId(t,n=!0){return cu(this,t,n)}visitNull(t,...n){return null}visitBool(t,...n){return null}visitInt(t,...n){return null}visitFloat(t,...n){return null}visitUtf8(t,...n){return null}visitBinary(t,...n){return null}visitFixedSizeBinary(t,...n){return null}visitDate(t,...n){return null}visitTimestamp(t,...n){return null}visitTime(t,...n){return null}visitDecimal(t,...n){return null}visitList(t,...n){return null}visitStruct(t,...n){return null}visitUnion(t,...n){return null}visitDictionary(t,...n){return null}visitInterval(t,...n){return null}visitDuration(t,...n){return null}visitFixedSizeList(t,...n){return null}visitMap(t,...n){return null}}function v0t(e,t,n=!0){return typeof t=="number"?cu(e,t,n):typeof t=="string"&&t in D?cu(e,D[t],n):t&&t instanceof at?cu(e,PN(t),n):t!=null&&t.type&&t.type instanceof at?cu(e,PN(t.type),n):cu(e,D.NONE,n)}function cu(e,t,n=!0){let r=null;switch(t){case D.Null:r=e.visitNull;break;case D.Bool:r=e.visitBool;break;case D.Int:r=e.visitInt;break;case D.Int8:r=e.visitInt8||e.visitInt;break;case D.Int16:r=e.visitInt16||e.visitInt;break;case D.Int32:r=e.visitInt32||e.visitInt;break;case D.Int64:r=e.visitInt64||e.visitInt;break;case D.Uint8:r=e.visitUint8||e.visitInt;break;case D.Uint16:r=e.visitUint16||e.visitInt;break;case D.Uint32:r=e.visitUint32||e.visitInt;break;case D.Uint64:r=e.visitUint64||e.visitInt;break;case D.Float:r=e.visitFloat;break;case D.Float16:r=e.visitFloat16||e.visitFloat;break;case D.Float32:r=e.visitFloat32||e.visitFloat;break;case D.Float64:r=e.visitFloat64||e.visitFloat;break;case D.Utf8:r=e.visitUtf8;break;case D.Binary:r=e.visitBinary;break;case D.FixedSizeBinary:r=e.visitFixedSizeBinary;break;case D.Date:r=e.visitDate;break;case D.DateDay:r=e.visitDateDay||e.visitDate;break;case D.DateMillisecond:r=e.visitDateMillisecond||e.visitDate;break;case D.Timestamp:r=e.visitTimestamp;break;case D.TimestampSecond:r=e.visitTimestampSecond||e.visitTimestamp;break;case D.TimestampMillisecond:r=e.visitTimestampMillisecond||e.visitTimestamp;break;case D.TimestampMicrosecond:r=e.visitTimestampMicrosecond||e.visitTimestamp;break;case D.TimestampNanosecond:r=e.visitTimestampNanosecond||e.visitTimestamp;break;case D.Time:r=e.visitTime;break;case D.TimeSecond:r=e.visitTimeSecond||e.visitTime;break;case D.TimeMillisecond:r=e.visitTimeMillisecond||e.visitTime;break;case D.TimeMicrosecond:r=e.visitTimeMicrosecond||e.visitTime;break;case D.TimeNanosecond:r=e.visitTimeNanosecond||e.visitTime;break;case D.Decimal:r=e.visitDecimal;break;case D.List:r=e.visitList;break;case D.Struct:r=e.visitStruct;break;case D.Union:r=e.visitUnion;break;case D.DenseUnion:r=e.visitDenseUnion||e.visitUnion;break;case D.SparseUnion:r=e.visitSparseUnion||e.visitUnion;break;case D.Dictionary:r=e.visitDictionary;break;case D.Interval:r=e.visitInterval;break;case D.IntervalDayTime:r=e.visitIntervalDayTime||e.visitInterval;break;case D.IntervalYearMonth:r=e.visitIntervalYearMonth||e.visitInterval;break;case D.Duration:r=e.visitDuration;break;case D.DurationSecond:r=e.visitDurationSecond||e.visitDuration;break;case D.DurationMillisecond:r=e.visitDurationMillisecond||e.visitDuration;break;case D.DurationMicrosecond:r=e.visitDurationMicrosecond||e.visitDuration;break;case D.DurationNanosecond:r=e.visitDurationNanosecond||e.visitDuration;break;case D.FixedSizeList:r=e.visitFixedSizeList;break;case D.Map:r=e.visitMap;break}if(typeof r=="function")return r;if(!n)return()=>null;throw new Error(`Unrecognized type '${D[t]}'`)}function PN(e){switch(e.typeId){case D.Null:return D.Null;case D.Int:{const{bitWidth:t,isSigned:n}=e;switch(t){case 8:return n?D.Int8:D.Uint8;case 16:return n?D.Int16:D.Uint16;case 32:return n?D.Int32:D.Uint32;case 64:return n?D.Int64:D.Uint64}return D.Int}case D.Float:switch(e.precision){case nn.HALF:return D.Float16;case nn.SINGLE:return D.Float32;case nn.DOUBLE:return D.Float64}return D.Float;case D.Binary:return D.Binary;case D.Utf8:return D.Utf8;case D.Bool:return D.Bool;case D.Decimal:return D.Decimal;case D.Time:switch(e.unit){case rt.SECOND:return D.TimeSecond;case rt.MILLISECOND:return D.TimeMillisecond;case rt.MICROSECOND:return D.TimeMicrosecond;case rt.NANOSECOND:return D.TimeNanosecond}return D.Time;case D.Timestamp:switch(e.unit){case rt.SECOND:return D.TimestampSecond;case rt.MILLISECOND:return D.TimestampMillisecond;case rt.MICROSECOND:return D.TimestampMicrosecond;case rt.NANOSECOND:return D.TimestampNanosecond}return D.Timestamp;case D.Date:switch(e.unit){case Pr.DAY:return D.DateDay;case Pr.MILLISECOND:return D.DateMillisecond}return D.Date;case D.Interval:switch(e.unit){case yr.DAY_TIME:return D.IntervalDayTime;case yr.YEAR_MONTH:return D.IntervalYearMonth}return D.Interval;case D.Duration:switch(e.unit){case rt.SECOND:return D.DurationSecond;case rt.MILLISECOND:return D.DurationMillisecond;case rt.MICROSECOND:return D.DurationMicrosecond;case rt.NANOSECOND:return D.DurationNanosecond}return D.Duration;case D.Map:return D.Map;case D.List:return D.List;case D.Struct:return D.Struct;case D.Union:switch(e.mode){case ln.Dense:return D.DenseUnion;case ln.Sparse:return D.SparseUnion}return D.Union;case D.FixedSizeBinary:return D.FixedSizeBinary;case D.FixedSizeList:return D.FixedSizeList;case D.Dictionary:return D.Dictionary}throw new Error(`Unrecognized type '${D[e.typeId]}'`)}Ft.prototype.visitInt8=null;Ft.prototype.visitInt16=null;Ft.prototype.visitInt32=null;Ft.prototype.visitInt64=null;Ft.prototype.visitUint8=null;Ft.prototype.visitUint16=null;Ft.prototype.visitUint32=null;Ft.prototype.visitUint64=null;Ft.prototype.visitFloat16=null;Ft.prototype.visitFloat32=null;Ft.prototype.visitFloat64=null;Ft.prototype.visitDateDay=null;Ft.prototype.visitDateMillisecond=null;Ft.prototype.visitTimestampSecond=null;Ft.prototype.visitTimestampMillisecond=null;Ft.prototype.visitTimestampMicrosecond=null;Ft.prototype.visitTimestampNanosecond=null;Ft.prototype.visitTimeSecond=null;Ft.prototype.visitTimeMillisecond=null;Ft.prototype.visitTimeMicrosecond=null;Ft.prototype.visitTimeNanosecond=null;Ft.prototype.visitDenseUnion=null;Ft.prototype.visitSparseUnion=null;Ft.prototype.visitIntervalDayTime=null;Ft.prototype.visitIntervalYearMonth=null;Ft.prototype.visitDuration=null;Ft.prototype.visitDurationSecond=null;Ft.prototype.visitDurationMillisecond=null;Ft.prototype.visitDurationMicrosecond=null;Ft.prototype.visitDurationNanosecond=null;const $P=new Float64Array(1),Qc=new Uint32Array($P.buffer);function NP(e){const t=(e&31744)>>10,n=(e&1023)/1024,r=Math.pow(-1,(e&32768)>>15);switch(t){case 31:return r*(n?Number.NaN:1/0);case 0:return r*(n?6103515625e-14*n:0)}return r*Math.pow(2,t-15)*(1+n)}function w0t(e){if(e!==e)return 32256;$P[0]=e;const t=(Qc[1]&2147483648)>>16&65535;let n=Qc[1]&2146435072,r=0;return n>=1089470464?Qc[0]>0?n=31744:(n=(n&2080374784)>>16,r=(Qc[1]&1048575)>>10):n<=1056964608?(r=1048576+(Qc[1]&1048575),r=1048576+(r<<(n>>20)-998)>>21,n=0):(n=n-1056964608>>10,r=(Qc[1]&1048575)+512>>10),t|n|r&65535}class bt extends Ft{}function _t(e){return(t,n,r)=>{if(t.setValid(n,r!=null))return e(t,n,r)}}const _0t=(e,t,n)=>{e[t]=Math.trunc(n/864e5)},vT=(e,t,n)=>{e[t]=Math.trunc(n%4294967296),e[t+1]=Math.trunc(n/4294967296)},S0t=(e,t,n)=>{e[t]=Math.trunc(n*1e3%4294967296),e[t+1]=Math.trunc(n*1e3/4294967296)},x0t=(e,t,n)=>{e[t]=Math.trunc(n*1e6%4294967296),e[t+1]=Math.trunc(n*1e6/4294967296)},DP=(e,t,n,r)=>{if(n+1<t.length){const{[n]:i,[n+1]:s}=t;e.set(r.subarray(0,s-i),i)}},I0t=({offset:e,values:t},n,r)=>{const i=e+n;r?t[i>>3]|=1<<i%8:t[i>>3]&=~(1<<i%8)},Go=({values:e},t,n)=>{e[t]=n},wT=({values:e},t,n)=>{e[t]=n},kP=({values:e},t,n)=>{e[t]=w0t(n)},E0t=(e,t,n)=>{switch(e.type.precision){case nn.HALF:return kP(e,t,n);case nn.SINGLE:case nn.DOUBLE:return wT(e,t,n)}},OP=({values:e},t,n)=>{_0t(e,t,n.valueOf())},FP=({values:e},t,n)=>{vT(e,t*2,n.valueOf())},T0t=({stride:e,values:t},n,r)=>{t.set(r.subarray(0,e),e*n)},A0t=({values:e,valueOffsets:t},n,r)=>DP(e,t,n,r),M0t=({values:e,valueOffsets:t},n,r)=>{DP(e,t,n,yT(r))},$0t=(e,t,n)=>{e.type.unit===Pr.DAY?OP(e,t,n):FP(e,t,n)},BP=({values:e},t,n)=>vT(e,t*2,n/1e3),RP=({values:e},t,n)=>vT(e,t*2,n),LP=({values:e},t,n)=>S0t(e,t*2,n),CP=({values:e},t,n)=>x0t(e,t*2,n),N0t=(e,t,n)=>{switch(e.type.unit){case rt.SECOND:return BP(e,t,n);case rt.MILLISECOND:return RP(e,t,n);case rt.MICROSECOND:return LP(e,t,n);case rt.NANOSECOND:return CP(e,t,n)}},UP=({values:e},t,n)=>{e[t]=n},PP=({values:e},t,n)=>{e[t]=n},zP=({values:e},t,n)=>{e[t]=n},jP=({values:e},t,n)=>{e[t]=n},D0t=(e,t,n)=>{switch(e.type.unit){case rt.SECOND:return UP(e,t,n);case rt.MILLISECOND:return PP(e,t,n);case rt.MICROSECOND:return zP(e,t,n);case rt.NANOSECOND:return jP(e,t,n)}},k0t=({values:e,stride:t},n,r)=>{e.set(r.subarray(0,t),t*n)},O0t=(e,t,n)=>{const r=e.children[0],i=e.valueOffsets,s=vi.getVisitFn(r);if(Array.isArray(n))for(let o=-1,a=i[t],l=i[t+1];a<l;)s(r,a++,n[++o]);else for(let o=-1,a=i[t],l=i[t+1];a<l;)s(r,a++,n.get(++o))},F0t=(e,t,n)=>{const r=e.children[0],{valueOffsets:i}=e,s=vi.getVisitFn(r);let{[t]:o,[t+1]:a}=i;const l=n instanceof Map?n.entries():Object.entries(n);for(const c of l)if(s(r,o,c),++o>=a)break},B0t=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[s]),R0t=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(s)),L0t=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(i.name)),C0t=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[i.name]),U0t=(e,t,n)=>{const r=e.type.children.map(s=>vi.getVisitFn(s.type)),i=n instanceof Map?L0t(t,n):n instanceof ie?R0t(t,n):Array.isArray(n)?B0t(t,n):C0t(t,n);e.type.children.forEach((s,o)=>i(r[o],e.children[o],s,o))},P0t=(e,t,n)=>{e.type.mode===ln.Dense?VP(e,t,n):YP(e,t,n)},VP=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];vi.visit(i,e.valueOffsets[t],n)},YP=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];vi.visit(i,t,n)},z0t=(e,t,n)=>{var r;(r=e.dictionary)===null||r===void 0||r.set(e.values[t],n)},j0t=(e,t,n)=>{e.type.unit===yr.DAY_TIME?qP(e,t,n):WP(e,t,n)},qP=({values:e},t,n)=>{e.set(n.subarray(0,2),2*t)},WP=({values:e},t,n)=>{e[t]=n[0]*12+n[1]%12},HP=({values:e},t,n)=>{e[t]=n},GP=({values:e},t,n)=>{e[t]=n},XP=({values:e},t,n)=>{e[t]=n},QP=({values:e},t,n)=>{e[t]=n},V0t=(e,t,n)=>{switch(e.type.unit){case rt.SECOND:return HP(e,t,n);case rt.MILLISECOND:return GP(e,t,n);case rt.MICROSECOND:return XP(e,t,n);case rt.NANOSECOND:return QP(e,t,n)}},Y0t=(e,t,n)=>{const{stride:r}=e,i=e.children[0],s=vi.getVisitFn(i);if(Array.isArray(n))for(let o=-1,a=t*r;++o<r;)s(i,a+o,n[o]);else for(let o=-1,a=t*r;++o<r;)s(i,a+o,n.get(o))};bt.prototype.visitBool=_t(I0t);bt.prototype.visitInt=_t(Go);bt.prototype.visitInt8=_t(Go);bt.prototype.visitInt16=_t(Go);bt.prototype.visitInt32=_t(Go);bt.prototype.visitInt64=_t(Go);bt.prototype.visitUint8=_t(Go);bt.prototype.visitUint16=_t(Go);bt.prototype.visitUint32=_t(Go);bt.prototype.visitUint64=_t(Go);bt.prototype.visitFloat=_t(E0t);bt.prototype.visitFloat16=_t(kP);bt.prototype.visitFloat32=_t(wT);bt.prototype.visitFloat64=_t(wT);bt.prototype.visitUtf8=_t(M0t);bt.prototype.visitBinary=_t(A0t);bt.prototype.visitFixedSizeBinary=_t(T0t);bt.prototype.visitDate=_t($0t);bt.prototype.visitDateDay=_t(OP);bt.prototype.visitDateMillisecond=_t(FP);bt.prototype.visitTimestamp=_t(N0t);bt.prototype.visitTimestampSecond=_t(BP);bt.prototype.visitTimestampMillisecond=_t(RP);bt.prototype.visitTimestampMicrosecond=_t(LP);bt.prototype.visitTimestampNanosecond=_t(CP);bt.prototype.visitTime=_t(D0t);bt.prototype.visitTimeSecond=_t(UP);bt.prototype.visitTimeMillisecond=_t(PP);bt.prototype.visitTimeMicrosecond=_t(zP);bt.prototype.visitTimeNanosecond=_t(jP);bt.prototype.visitDecimal=_t(k0t);bt.prototype.visitList=_t(O0t);bt.prototype.visitStruct=_t(U0t);bt.prototype.visitUnion=_t(P0t);bt.prototype.visitDenseUnion=_t(VP);bt.prototype.visitSparseUnion=_t(YP);bt.prototype.visitDictionary=_t(z0t);bt.prototype.visitInterval=_t(j0t);bt.prototype.visitIntervalDayTime=_t(qP);bt.prototype.visitIntervalYearMonth=_t(WP);bt.prototype.visitDuration=_t(V0t);bt.prototype.visitDurationSecond=_t(HP);bt.prototype.visitDurationMillisecond=_t(GP);bt.prototype.visitDurationMicrosecond=_t(XP);bt.prototype.visitDurationNanosecond=_t(QP);bt.prototype.visitFixedSizeList=_t(Y0t);bt.prototype.visitMap=_t(F0t);const vi=new bt,$i=Symbol.for("parent"),of=Symbol.for("rowIndex");class _T{constructor(t,n){return this[$i]=t,this[of]=n,new Proxy(this,new W0t)}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[of],n=this[$i],r=n.type.children,i={};for(let s=-1,o=r.length;++s<o;)i[r[s].name]=Sr.visit(n.children[s],t);return i}toString(){return`{${[...this].map(([t,n])=>`${Np(t)}: ${Np(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new q0t(this[$i],this[of])}}class q0t{constructor(t,n){this.childIndex=0,this.children=t.children,this.rowIndex=n,this.childFields=t.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const t=this.childIndex;return t<this.numChildren?(this.childIndex=t+1,{done:!1,value:[this.childFields[t].name,Sr.visit(this.children[t],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties(_T.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[$i]:{writable:!0,enumerable:!1,configurable:!1,value:null},[of]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class W0t{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[$i].type.children.map(n=>n.name)}has(t,n){return t[$i].type.children.findIndex(r=>r.name===n)!==-1}getOwnPropertyDescriptor(t,n){if(t[$i].type.children.findIndex(r=>r.name===n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[$i].type.children.findIndex(i=>i.name===n);if(r!==-1){const i=Sr.visit(t[$i].children[r],t[of]);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[$i].type.children.findIndex(s=>s.name===n);return i!==-1?(vi.visit(t[$i].children[i],t[of],r),Reflect.set(t,n,r)):Reflect.has(t,n)||typeof n=="symbol"?Reflect.set(t,n,r):!1}}class ht extends Ft{}function vt(e){return(t,n)=>t.getValid(n)?e(t,n):null}const H0t=(e,t)=>864e5*e[t],ST=(e,t)=>4294967296*e[t+1]+(e[t]>>>0),G0t=(e,t)=>4294967296*(e[t+1]/1e3)+(e[t]>>>0)/1e3,X0t=(e,t)=>4294967296*(e[t+1]/1e6)+(e[t]>>>0)/1e6,KP=e=>new Date(e),Q0t=(e,t)=>KP(H0t(e,t)),K0t=(e,t)=>KP(ST(e,t)),Z0t=(e,t)=>null,ZP=(e,t,n)=>{if(n+1>=t.length)return null;const r=t[n],i=t[n+1];return e.subarray(r,i)},J0t=({offset:e,values:t},n)=>{const r=e+n;return(t[r>>3]&1<<r%8)!==0},JP=({values:e},t)=>Q0t(e,t),t9=({values:e},t)=>K0t(e,t*2),hl=({stride:e,values:t},n)=>t[e*n],tmt=({stride:e,values:t},n)=>NP(t[e*n]),e9=({values:e},t)=>e[t],emt=({stride:e,values:t},n)=>t.subarray(e*n,e*(n+1)),nmt=({values:e,valueOffsets:t},n)=>ZP(e,t,n),rmt=({values:e,valueOffsets:t},n)=>{const r=ZP(e,t,n);return r!==null?Tx(r):null},imt=({values:e},t)=>e[t],smt=({type:e,values:t},n)=>e.precision!==nn.HALF?t[n]:NP(t[n]),omt=(e,t)=>e.type.unit===Pr.DAY?JP(e,t):t9(e,t),n9=({values:e},t)=>1e3*ST(e,t*2),r9=({values:e},t)=>ST(e,t*2),i9=({values:e},t)=>G0t(e,t*2),s9=({values:e},t)=>X0t(e,t*2),amt=(e,t)=>{switch(e.type.unit){case rt.SECOND:return n9(e,t);case rt.MILLISECOND:return r9(e,t);case rt.MICROSECOND:return i9(e,t);case rt.NANOSECOND:return s9(e,t)}},o9=({values:e},t)=>e[t],a9=({values:e},t)=>e[t],l9=({values:e},t)=>e[t],c9=({values:e},t)=>e[t],lmt=(e,t)=>{switch(e.type.unit){case rt.SECOND:return o9(e,t);case rt.MILLISECOND:return a9(e,t);case rt.MICROSECOND:return l9(e,t);case rt.NANOSECOND:return c9(e,t)}},cmt=({values:e,stride:t},n)=>bT.decimal(e.subarray(t*n,t*(n+1))),umt=(e,t)=>{const{valueOffsets:n,stride:r,children:i}=e,{[t*r]:s,[t*r+1]:o}=n,l=i[0].slice(s,o-s);return new ie([l])},fmt=(e,t)=>{const{valueOffsets:n,children:r}=e,{[t]:i,[t+1]:s}=n,o=r[0];return new xT(o.slice(i,s-i))},dmt=(e,t)=>new _T(e,t),hmt=(e,t)=>e.type.mode===ln.Dense?u9(e,t):f9(e,t),u9=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return Sr.visit(r,e.valueOffsets[t])},f9=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return Sr.visit(r,t)},pmt=(e,t)=>{var n;return(n=e.dictionary)===null||n===void 0?void 0:n.get(e.values[t])},ymt=(e,t)=>e.type.unit===yr.DAY_TIME?d9(e,t):h9(e,t),d9=({values:e},t)=>e.subarray(2*t,2*(t+1)),h9=({values:e},t)=>{const n=e[t],r=new Int32Array(2);return r[0]=Math.trunc(n/12),r[1]=Math.trunc(n%12),r},p9=({values:e},t)=>e[t],y9=({values:e},t)=>e[t],m9=({values:e},t)=>e[t],g9=({values:e},t)=>e[t],mmt=(e,t)=>{switch(e.type.unit){case rt.SECOND:return p9(e,t);case rt.MILLISECOND:return y9(e,t);case rt.MICROSECOND:return m9(e,t);case rt.NANOSECOND:return g9(e,t)}},gmt=(e,t)=>{const{stride:n,children:r}=e,s=r[0].slice(t*n,n);return new ie([s])};ht.prototype.visitNull=vt(Z0t);ht.prototype.visitBool=vt(J0t);ht.prototype.visitInt=vt(imt);ht.prototype.visitInt8=vt(hl);ht.prototype.visitInt16=vt(hl);ht.prototype.visitInt32=vt(hl);ht.prototype.visitInt64=vt(e9);ht.prototype.visitUint8=vt(hl);ht.prototype.visitUint16=vt(hl);ht.prototype.visitUint32=vt(hl);ht.prototype.visitUint64=vt(e9);ht.prototype.visitFloat=vt(smt);ht.prototype.visitFloat16=vt(tmt);ht.prototype.visitFloat32=vt(hl);ht.prototype.visitFloat64=vt(hl);ht.prototype.visitUtf8=vt(rmt);ht.prototype.visitBinary=vt(nmt);ht.prototype.visitFixedSizeBinary=vt(emt);ht.prototype.visitDate=vt(omt);ht.prototype.visitDateDay=vt(JP);ht.prototype.visitDateMillisecond=vt(t9);ht.prototype.visitTimestamp=vt(amt);ht.prototype.visitTimestampSecond=vt(n9);ht.prototype.visitTimestampMillisecond=vt(r9);ht.prototype.visitTimestampMicrosecond=vt(i9);ht.prototype.visitTimestampNanosecond=vt(s9);ht.prototype.visitTime=vt(lmt);ht.prototype.visitTimeSecond=vt(o9);ht.prototype.visitTimeMillisecond=vt(a9);ht.prototype.visitTimeMicrosecond=vt(l9);ht.prototype.visitTimeNanosecond=vt(c9);ht.prototype.visitDecimal=vt(cmt);ht.prototype.visitList=vt(umt);ht.prototype.visitStruct=vt(dmt);ht.prototype.visitUnion=vt(hmt);ht.prototype.visitDenseUnion=vt(u9);ht.prototype.visitSparseUnion=vt(f9);ht.prototype.visitDictionary=vt(pmt);ht.prototype.visitInterval=vt(ymt);ht.prototype.visitIntervalDayTime=vt(d9);ht.prototype.visitIntervalYearMonth=vt(h9);ht.prototype.visitDuration=vt(mmt);ht.prototype.visitDurationSecond=vt(p9);ht.prototype.visitDurationMillisecond=vt(y9);ht.prototype.visitDurationMicrosecond=vt(m9);ht.prototype.visitDurationNanosecond=vt(g9);ht.prototype.visitFixedSizeList=vt(gmt);ht.prototype.visitMap=vt(fmt);const Sr=new ht,vs=Symbol.for("keys"),af=Symbol.for("vals");class xT{constructor(t){return this[vs]=new ie([t.children[0]]).memoize(),this[af]=t.children[1],new Proxy(this,new vmt)}[Symbol.iterator](){return new bmt(this[vs],this[af])}get size(){return this[vs].length}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[vs],n=this[af],r={};for(let i=-1,s=t.length;++i<s;)r[t.get(i)]=Sr.visit(n,i);return r}toString(){return`{${[...this].map(([t,n])=>`${Np(t)}: ${Np(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}class bmt{constructor(t,n){this.keys=t,this.vals=n,this.keyIndex=0,this.numKeys=t.length}[Symbol.iterator](){return this}next(){const t=this.keyIndex;return t===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(t),Sr.visit(this.vals,t)]})}}class vmt{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[vs].toArray().map(String)}has(t,n){return t[vs].includes(n)}getOwnPropertyDescriptor(t,n){if(t[vs].indexOf(n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[vs].indexOf(n);if(r!==-1){const i=Sr.visit(Reflect.get(t,af),r);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[vs].indexOf(n);return i!==-1?(vi.visit(Reflect.get(t,af),i,r),Reflect.set(t,n,r)):Reflect.has(t,n)?Reflect.set(t,n,r):!1}}Object.defineProperties(xT.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[vs]:{writable:!0,enumerable:!1,configurable:!1,value:null},[af]:{writable:!0,enumerable:!1,configurable:!1,value:null}});let zN;function b9(e,t,n,r){const{length:i=0}=e;let s=typeof t!="number"?0:t,o=typeof n!="number"?i:n;return s<0&&(s=(s%i+i)%i),o<0&&(o=(o%i+i)%i),o<s&&(zN=s,s=o,o=zN),o>i&&(o=i),r?r(e,s,o):[s,o]}const jN=e=>e!==e;function vd(e){if(typeof e!=="object"||e===null)return jN(e)?jN:n=>n===e;if(e instanceof Date){const n=e.valueOf();return r=>r instanceof Date?r.valueOf()===n:!1}return ArrayBuffer.isView(e)?n=>n?c0t(e,n):!1:e instanceof Map?_mt(e):Array.isArray(e)?wmt(e):e instanceof ie?Smt(e):xmt(e,!0)}function wmt(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=vd(e[n]);return Gv(t)}function _mt(e){let t=-1;const n=[];for(const r of e.values())n[++t]=vd(r);return Gv(n)}function Smt(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=vd(e.get(n));return Gv(t)}function xmt(e,t=!1){const n=Object.keys(e);if(!t&&n.length===0)return()=>!1;const r=[];for(let i=-1,s=n.length;++i<s;)r[i]=vd(e[n[i]]);return Gv(r,n)}function Gv(e,t){return n=>{if(!n||typeof n!="object")return!1;switch(n.constructor){case Array:return Imt(e,n);case Map:return VN(e,n,n.keys());case xT:case _T:case Object:case void 0:return VN(e,n,t||Object.keys(n))}return n instanceof ie?Emt(e,n):!1}}function Imt(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t[r]))return!1;return!0}function Emt(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t.get(r)))return!1;return!0}function VN(e,t,n){const r=n[Symbol.iterator](),i=t instanceof Map?t.keys():Object.keys(t)[Symbol.iterator](),s=t instanceof Map?t.values():Object.values(t)[Symbol.iterator]();let o=0;const a=e.length;let l=s.next(),c=r.next(),u=i.next();for(;o<a&&!c.done&&!u.done&&!l.done&&!(c.value!==u.value||!e[o](l.value));++o,c=r.next(),u=i.next(),l=s.next());return o===a&&c.done&&u.done&&l.done?!0:(r.return&&r.return(),i.return&&i.return(),s.return&&s.return(),!1)}function v9(e,t,n,r){return(n&1<<r)!==0}function Tmt(e,t,n,r){return(n&1<<r)>>r}function nb(e,t,n){const r=n.byteLength+7&-8;if(e>0||n.byteLength<r){const i=new Uint8Array(r);return i.set(e%8===0?n.subarray(e>>3):rb(new IT(n,e,t,null,v9)).subarray(0,r)),i}return n}function rb(e){const t=[];let n=0,r=0,i=0;for(const o of e)o&&(i|=1<<r),++r===8&&(t[n++]=i,i=r=0);(n===0||r>0)&&(t[n++]=i);const s=new Uint8Array(t.length+7&-8);return s.set(t),s}class IT{constructor(t,n,r,i,s){this.bytes=t,this.length=r,this.context=i,this.get=s,this.bit=n%8,this.byteIndex=n>>3,this.byte=t[this.byteIndex++],this.index=0}next(){return this.index<this.length?(this.bit===8&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}function $x(e,t,n){if(n-t<=0)return 0;if(n-t<8){let s=0;for(const o of new IT(e,t,n-t,e,Tmt))s+=o;return s}const r=n>>3<<3,i=t+(t%8===0?0:8-t%8);return $x(e,t,i)+$x(e,r,n)+Amt(e,i>>3,r-i>>3)}function Amt(e,t,n){let r=0,i=Math.trunc(t);const s=new DataView(e.buffer,e.byteOffset,e.byteLength),o=n===void 0?e.byteLength:i+n;for(;o-i>=4;)r+=F_(s.getUint32(i)),i+=4;for(;o-i>=2;)r+=F_(s.getUint16(i)),i+=2;for(;o-i>=1;)r+=F_(s.getUint8(i)),i+=1;return r}function F_(e){let t=Math.trunc(e);return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),(t+(t>>>4)&252645135)*16843009>>>24}const Mmt=-1;class he{get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get nullable(){if(this._nullCount!==0){const{type:t}=this;return at.isSparseUnion(t)?this.children.some(n=>n.nullable):at.isDenseUnion(t)?this.children.some(n=>n.nullable):this.nullBitmap&&this.nullBitmap.byteLength>0}return!0}get byteLength(){let t=0;const{valueOffsets:n,values:r,nullBitmap:i,typeIds:s}=this;return n&&(t+=n.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),s&&(t+=s.byteLength),this.children.reduce((o,a)=>o+a.byteLength,t)}get nullCount(){if(at.isUnion(this.type))return this.children.reduce((r,i)=>r+i.nullCount,0);let t=this._nullCount,n;return t<=Mmt&&(n=this.nullBitmap)&&(this._nullCount=t=this.length-$x(n,this.offset,this.offset+this.length)),t}constructor(t,n,r,i,s,o=[],a){this.type=t,this.children=o,this.dictionary=a,this.offset=Math.floor(Math.max(n||0,0)),this.length=Math.floor(Math.max(r||0,0)),this._nullCount=Math.floor(Math.max(i||0,-1));let l;s instanceof he?(this.stride=s.stride,this.values=s.values,this.typeIds=s.typeIds,this.nullBitmap=s.nullBitmap,this.valueOffsets=s.valueOffsets):(this.stride=co(t),s&&((l=s[0])&&(this.valueOffsets=l),(l=s[1])&&(this.values=l),(l=s[2])&&(this.nullBitmap=l),(l=s[3])&&(this.typeIds=l)))}getValid(t){const{type:n}=this;if(at.isUnion(n)){const r=n,i=this.children[r.typeIdToChildIndex[this.typeIds[t]]],s=r.mode===ln.Dense?this.valueOffsets[t]:t;return i.getValid(s)}if(this.nullable&&this.nullCount>0){const r=this.offset+t;return(this.nullBitmap[r>>3]&1<<r%8)!==0}return!0}setValid(t,n){let r;const{type:i}=this;if(at.isUnion(i)){const s=i,o=this.children[s.typeIdToChildIndex[this.typeIds[t]]],a=s.mode===ln.Dense?this.valueOffsets[t]:t;r=o.getValid(a),o.setValid(a,n)}else{let{nullBitmap:s}=this;const{offset:o,length:a}=this,l=o+t,c=1<<l%8,u=l>>3;(!s||s.byteLength<=u)&&(s=new Uint8Array((o+a+63&-64)>>3).fill(255),this.nullCount>0&&s.set(nb(o,a,this.nullBitmap),0),Object.assign(this,{nullBitmap:s,_nullCount:-1}));const f=s[u];r=(f&c)!==0,n?s[u]=f|c:s[u]=f&~c}return r!==!!n&&(this._nullCount=this.nullCount+(n?-1:1)),n}clone(t=this.type,n=this.offset,r=this.length,i=this._nullCount,s=this,o=this.children){return new he(t,n,r,i,s,o,this.dictionary)}slice(t,n){const{stride:r,typeId:i,children:s}=this,o=+(this._nullCount===0)-1,a=i===16?r:1,l=this._sliceBuffers(t,n,r,i);return this.clone(this.type,this.offset+t,n,o,l,s.length===0||this.valueOffsets?s:this._sliceChildren(s,a*t,a*n))}_changeLengthAndBackfillNullBitmap(t){if(this.typeId===D.Null)return this.clone(this.type,0,t,0);const{length:n,nullCount:r}=this,i=new Uint8Array((t+63&-64)>>3).fill(255,0,n>>3);i[n>>3]=(1<<n-(n&-8))-1,r>0&&i.set(nb(this.offset,n,this.nullBitmap),0);const s=this.buffers;return s[lo.VALIDITY]=i,this.clone(this.type,0,t,r+(t-n),s)}_sliceBuffers(t,n,r,i){let s;const{buffers:o}=this;return(s=o[lo.TYPE])&&(o[lo.TYPE]=s.subarray(t,t+n)),(s=o[lo.OFFSET])&&(o[lo.OFFSET]=s.subarray(t,t+n+1))||(s=o[lo.DATA])&&(o[lo.DATA]=i===6?s:s.subarray(r*t,r*(t+n))),o}_sliceChildren(t,n,r){return t.map(i=>i.slice(n,r))}}he.prototype.children=Object.freeze([]);class Bh extends Ft{visit(t){return this.getVisitFn(t.type).call(this,t)}visitNull(t){const{["type"]:n,["offset"]:r=0,["length"]:i=0}=t;return new he(n,r,i,i)}visitBool(t){const{["type"]:n,["offset"]:r=0}=t,i=Zt(t.nullBitmap),s=ce(n.ArrayType,t.data),{["length"]:o=s.length>>3,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new he(n,r,o,a,[void 0,s,i])}visitInt(t){const{["type"]:n,["offset"]:r=0}=t,i=Zt(t.nullBitmap),s=ce(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new he(n,r,o,a,[void 0,s,i])}visitFloat(t){const{["type"]:n,["offset"]:r=0}=t,i=Zt(t.nullBitmap),s=ce(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new he(n,r,o,a,[void 0,s,i])}visitUtf8(t){const{["type"]:n,["offset"]:r=0}=t,i=Zt(t.data),s=Zt(t.nullBitmap),o=Vd(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:l=t.nullBitmap?-1:0}=t;return new he(n,r,a,l,[o,i,s])}visitBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=Zt(t.data),s=Zt(t.nullBitmap),o=Vd(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:l=t.nullBitmap?-1:0}=t;return new he(n,r,a,l,[o,i,s])}visitFixedSizeBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=Zt(t.nullBitmap),s=ce(n.ArrayType,t.data),{["length"]:o=s.length/co(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new he(n,r,o,a,[void 0,s,i])}visitDate(t){const{["type"]:n,["offset"]:r=0}=t,i=Zt(t.nullBitmap),s=ce(n.ArrayType,t.data),{["length"]:o=s.length/co(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new he(n,r,o,a,[void 0,s,i])}visitTimestamp(t){const{["type"]:n,["offset"]:r=0}=t,i=Zt(t.nullBitmap),s=ce(n.ArrayType,t.data),{["length"]:o=s.length/co(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new he(n,r,o,a,[void 0,s,i])}visitTime(t){const{["type"]:n,["offset"]:r=0}=t,i=Zt(t.nullBitmap),s=ce(n.ArrayType,t.data),{["length"]:o=s.length/co(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new he(n,r,o,a,[void 0,s,i])}visitDecimal(t){const{["type"]:n,["offset"]:r=0}=t,i=Zt(t.nullBitmap),s=ce(n.ArrayType,t.data),{["length"]:o=s.length/co(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new he(n,r,o,a,[void 0,s,i])}visitList(t){const{["type"]:n,["offset"]:r=0,["child"]:i}=t,s=Zt(t.nullBitmap),o=Vd(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:l=t.nullBitmap?-1:0}=t;return new he(n,r,a,l,[o,void 0,s],[i])}visitStruct(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=Zt(t.nullBitmap),{length:o=i.reduce((l,{length:c})=>Math.max(l,c),0),nullCount:a=t.nullBitmap?-1:0}=t;return new he(n,r,o,a,[void 0,void 0,s],i)}visitUnion(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=ce(n.ArrayType,t.typeIds),{["length"]:o=s.length,["nullCount"]:a=-1}=t;if(at.isSparseUnion(n))return new he(n,r,o,a,[void 0,void 0,void 0,s],i);const l=Vd(t.valueOffsets);return new he(n,r,o,a,[l,void 0,void 0,s],i)}visitDictionary(t){const{["type"]:n,["offset"]:r=0}=t,i=Zt(t.nullBitmap),s=ce(n.indices.ArrayType,t.data),{["dictionary"]:o=new ie([new Bh().visit({type:n.dictionary})])}=t,{["length"]:a=s.length,["nullCount"]:l=t.nullBitmap?-1:0}=t;return new he(n,r,a,l,[void 0,s,i],[],o)}visitInterval(t){const{["type"]:n,["offset"]:r=0}=t,i=Zt(t.nullBitmap),s=ce(n.ArrayType,t.data),{["length"]:o=s.length/co(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new he(n,r,o,a,[void 0,s,i])}visitDuration(t){const{["type"]:n,["offset"]:r=0}=t,i=Zt(t.nullBitmap),s=ce(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new he(n,r,o,a,[void 0,s,i])}visitFixedSizeList(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new Bh().visit({type:n.valueType})}=t,s=Zt(t.nullBitmap),{["length"]:o=i.length/co(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new he(n,r,o,a,[void 0,void 0,s],[i])}visitMap(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new Bh().visit({type:n.childType})}=t,s=Zt(t.nullBitmap),o=Vd(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:l=t.nullBitmap?-1:0}=t;return new he(n,r,a,l,[o,void 0,s],[i])}}const $mt=new Bh;function Ct(e){return $mt.visit(e)}class YN{constructor(t=0,n){this.numChunks=t,this.getChunkIterator=n,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const t=this.chunkIterator.next();if(!t.done)return t;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}function w9(e){return e.reduce((t,n)=>t+n.nullCount,0)}function _9(e){return e.reduce((t,n,r)=>(t[r+1]=t[r]+n.length,t),new Uint32Array(e.length+1))}function S9(e,t,n,r){const i=[];for(let s=-1,o=e.length;++s<o;){const a=e[s],l=t[s],{length:c}=a;if(l>=r)break;if(n>=l+c)continue;if(l>=n&&l+c<=r){i.push(a);continue}const u=Math.max(0,n-l),f=Math.min(r-l,c);i.push(a.slice(u,f-u))}return i.length===0&&i.push(e[0].slice(0,0)),i}function ET(e,t,n,r){let i=0,s=0,o=t.length-1;do{if(i>=o-1)return n<t[o]?r(e,i,n-t[i]):null;s=i+Math.trunc((o-i)*.5),n<t[s]?o=s:i=s}while(i<o)}function TT(e,t){return e.getValid(t)}function lf(e){function t(n,r,i){return e(n[r],i)}return function(n){const r=this.data;return ET(r,this._offsets,n,t)}}function x9(e){let t;function n(r,i,s){return e(r[i],s,t)}return function(r,i){const s=this.data;t=i;const o=ET(s,this._offsets,r,n);return t=void 0,o}}function I9(e){let t;function n(r,i,s){let o=s,a=0,l=0;for(let c=i-1,u=r.length;++c<u;){const f=r[c];if(~(a=e(f,t,o)))return l+a;o=0,l+=f.length}return-1}return function(r,i){t=r;const s=this.data,o=typeof i!="number"?n(s,0,0):ET(s,this._offsets,i,n);return t=void 0,o}}class pt extends Ft{}function Nmt(e,t){return t===null&&e.length>0?0:-1}function Dmt(e,t){const{nullBitmap:n}=e;if(!n||e.nullCount<=0)return-1;let r=0;for(const i of new IT(n,e.offset+(t||0),e.length,n,v9)){if(!i)return r;++r}return-1}function St(e,t,n){if(t===void 0)return-1;if(t===null)switch(e.typeId){case D.Union:break;case D.Dictionary:break;default:return Dmt(e,n)}const r=Sr.getVisitFn(e),i=vd(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}function E9(e,t,n){const r=Sr.getVisitFn(e),i=vd(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}pt.prototype.visitNull=Nmt;pt.prototype.visitBool=St;pt.prototype.visitInt=St;pt.prototype.visitInt8=St;pt.prototype.visitInt16=St;pt.prototype.visitInt32=St;pt.prototype.visitInt64=St;pt.prototype.visitUint8=St;pt.prototype.visitUint16=St;pt.prototype.visitUint32=St;pt.prototype.visitUint64=St;pt.prototype.visitFloat=St;pt.prototype.visitFloat16=St;pt.prototype.visitFloat32=St;pt.prototype.visitFloat64=St;pt.prototype.visitUtf8=St;pt.prototype.visitBinary=St;pt.prototype.visitFixedSizeBinary=St;pt.prototype.visitDate=St;pt.prototype.visitDateDay=St;pt.prototype.visitDateMillisecond=St;pt.prototype.visitTimestamp=St;pt.prototype.visitTimestampSecond=St;pt.prototype.visitTimestampMillisecond=St;pt.prototype.visitTimestampMicrosecond=St;pt.prototype.visitTimestampNanosecond=St;pt.prototype.visitTime=St;pt.prototype.visitTimeSecond=St;pt.prototype.visitTimeMillisecond=St;pt.prototype.visitTimeMicrosecond=St;pt.prototype.visitTimeNanosecond=St;pt.prototype.visitDecimal=St;pt.prototype.visitList=St;pt.prototype.visitStruct=St;pt.prototype.visitUnion=St;pt.prototype.visitDenseUnion=E9;pt.prototype.visitSparseUnion=E9;pt.prototype.visitDictionary=St;pt.prototype.visitInterval=St;pt.prototype.visitIntervalDayTime=St;pt.prototype.visitIntervalYearMonth=St;pt.prototype.visitDuration=St;pt.prototype.visitDurationSecond=St;pt.prototype.visitDurationMillisecond=St;pt.prototype.visitDurationMicrosecond=St;pt.prototype.visitDurationNanosecond=St;pt.prototype.visitFixedSizeList=St;pt.prototype.visitMap=St;const ib=new pt;class yt extends Ft{}function wt(e){const{type:t}=e;if(e.nullCount===0&&e.stride===1&&(t.typeId===D.Timestamp||t instanceof Ga&&t.bitWidth!==64||t instanceof Bp&&t.bitWidth!==64||t instanceof Fp&&t.precision!==nn.HALF))return new YN(e.data.length,r=>{const i=e.data[r];return i.values.subarray(0,i.length)[Symbol.iterator]()});let n=0;return new YN(e.data.length,r=>{const s=e.data[r].length,o=e.slice(n,n+s);return n+=s,new kmt(o)})}class kmt{constructor(t){this.vector=t,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}yt.prototype.visitNull=wt;yt.prototype.visitBool=wt;yt.prototype.visitInt=wt;yt.prototype.visitInt8=wt;yt.prototype.visitInt16=wt;yt.prototype.visitInt32=wt;yt.prototype.visitInt64=wt;yt.prototype.visitUint8=wt;yt.prototype.visitUint16=wt;yt.prototype.visitUint32=wt;yt.prototype.visitUint64=wt;yt.prototype.visitFloat=wt;yt.prototype.visitFloat16=wt;yt.prototype.visitFloat32=wt;yt.prototype.visitFloat64=wt;yt.prototype.visitUtf8=wt;yt.prototype.visitBinary=wt;yt.prototype.visitFixedSizeBinary=wt;yt.prototype.visitDate=wt;yt.prototype.visitDateDay=wt;yt.prototype.visitDateMillisecond=wt;yt.prototype.visitTimestamp=wt;yt.prototype.visitTimestampSecond=wt;yt.prototype.visitTimestampMillisecond=wt;yt.prototype.visitTimestampMicrosecond=wt;yt.prototype.visitTimestampNanosecond=wt;yt.prototype.visitTime=wt;yt.prototype.visitTimeSecond=wt;yt.prototype.visitTimeMillisecond=wt;yt.prototype.visitTimeMicrosecond=wt;yt.prototype.visitTimeNanosecond=wt;yt.prototype.visitDecimal=wt;yt.prototype.visitList=wt;yt.prototype.visitStruct=wt;yt.prototype.visitUnion=wt;yt.prototype.visitDenseUnion=wt;yt.prototype.visitSparseUnion=wt;yt.prototype.visitDictionary=wt;yt.prototype.visitInterval=wt;yt.prototype.visitIntervalDayTime=wt;yt.prototype.visitIntervalYearMonth=wt;yt.prototype.visitDuration=wt;yt.prototype.visitDurationSecond=wt;yt.prototype.visitDurationMillisecond=wt;yt.prototype.visitDurationMicrosecond=wt;yt.prototype.visitDurationNanosecond=wt;yt.prototype.visitFixedSizeList=wt;yt.prototype.visitMap=wt;const AT=new yt,Omt=(e,t)=>e+t;class pl extends Ft{visitNull(t,n){return 0}visitInt(t,n){return t.type.bitWidth/8}visitFloat(t,n){return t.type.ArrayType.BYTES_PER_ELEMENT}visitBool(t,n){return 1/8}visitDecimal(t,n){return t.type.bitWidth/8}visitDate(t,n){return(t.type.unit+1)*4}visitTime(t,n){return t.type.bitWidth/8}visitTimestamp(t,n){return t.type.unit===rt.SECOND?4:8}visitInterval(t,n){return(t.type.unit+1)*4}visitDuration(t,n){return 8}visitStruct(t,n){return t.children.reduce((r,i)=>r+Ps.visit(i,n),0)}visitFixedSizeBinary(t,n){return t.type.byteWidth}visitMap(t,n){return 8+t.children.reduce((r,i)=>r+Ps.visit(i,n),0)}visitDictionary(t,n){var r;return t.type.indices.bitWidth/8+(((r=t.dictionary)===null||r===void 0?void 0:r.getByteLength(t.values[n]))||0)}}const Fmt=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),Bmt=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),Rmt=({valueOffsets:e,stride:t,children:n},r)=>{const i=n[0],{[r*t]:s}=e,{[r*t+1]:o}=e,a=Ps.getVisitFn(i.type),l=i.slice(s,o-s);let c=8;for(let u=-1,f=o-s;++u<f;)c+=a(l,u);return c},Lmt=({stride:e,children:t},n)=>{const r=t[0],i=r.slice(n*e,e),s=Ps.getVisitFn(r.type);let o=0;for(let a=-1,l=i.length;++a<l;)o+=s(i,a);return o},Cmt=(e,t)=>e.type.mode===ln.Dense?T9(e,t):A9(e,t),T9=({type:e,children:t,typeIds:n,valueOffsets:r},i)=>{const s=e.typeIdToChildIndex[n[i]];return 8+Ps.visit(t[s],r[i])},A9=({children:e},t)=>4+Ps.visitMany(e,e.map(()=>t)).reduce(Omt,0);pl.prototype.visitUtf8=Fmt;pl.prototype.visitBinary=Bmt;pl.prototype.visitList=Rmt;pl.prototype.visitFixedSizeList=Lmt;pl.prototype.visitUnion=Cmt;pl.prototype.visitDenseUnion=T9;pl.prototype.visitSparseUnion=A9;const Ps=new pl;var M9;const $9={},N9={};class ie{constructor(t){var n,r,i;const s=t[0]instanceof ie?t.flatMap(a=>a.data):t;if(s.length===0||s.some(a=>!(a instanceof he)))throw new TypeError("Vector constructor expects an Array of Data instances.");const o=(n=s[0])===null||n===void 0?void 0:n.type;switch(s.length){case 0:this._offsets=[0];break;case 1:{const{get:a,set:l,indexOf:c,byteLength:u}=$9[o.typeId],f=s[0];this.isValid=d=>TT(f,d),this.get=d=>a(f,d),this.set=(d,h)=>l(f,d,h),this.indexOf=d=>c(f,d),this.getByteLength=d=>u(f,d),this._offsets=[0,f.length];break}default:Object.setPrototypeOf(this,N9[o.typeId]),this._offsets=_9(s);break}this.data=s,this.type=o,this.stride=co(o),this.numChildren=(i=(r=o.children)===null||r===void 0?void 0:r.length)!==null&&i!==void 0?i:0,this.length=this._offsets.at(-1)}get byteLength(){return this.data.reduce((t,n)=>t+n.byteLength,0)}get nullCount(){return w9(this.data)}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${D[this.type.typeId]}Vector`}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}includes(t,n){return this.indexOf(t,n)>-1}getByteLength(t){return 0}[Symbol.iterator](){return AT.visit(this)}concat(...t){return new ie(this.data.concat(t.flatMap(n=>n.data).flat(Number.POSITIVE_INFINITY)))}slice(t,n){return new ie(b9(this,t,n,({data:r,_offsets:i},s,o)=>S9(r,i,s,o)))}toJSON(){return[...this]}toArray(){const{type:t,data:n,length:r,stride:i,ArrayType:s}=this;switch(t.typeId){case D.Int:case D.Float:case D.Decimal:case D.Time:case D.Timestamp:switch(n.length){case 0:return new s;case 1:return n[0].values.subarray(0,r*i);default:return n.reduce((o,{values:a,length:l})=>(o.array.set(a.subarray(0,l*i),o.offset),o.offset+=l*i,o),{array:new s(r*i),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(t){var n;return this.getChildAt((n=this.type.children)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.numChildren?new ie(this.data.map(({children:n})=>n[t])):null}get isMemoized(){return at.isDictionary(this.type)?this.data[0].dictionary.isMemoized:!1}memoize(){if(at.isDictionary(this.type)){const t=new sb(this.data[0].dictionary),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new ie(n)}return new sb(this)}unmemoize(){if(at.isDictionary(this.type)&&this.isMemoized){const t=this.data[0].dictionary.unmemoize(),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new ie(n)}return this}}M9=Symbol.toStringTag;ie[M9]=(e=>{e.type=at.prototype,e.data=[],e.length=0,e.stride=1,e.numChildren=0,e._offsets=new Uint32Array([0]),e[Symbol.isConcatSpreadable]=!0;const t=Object.keys(D).map(n=>D[n]).filter(n=>typeof n=="number"&&n!==D.NONE);for(const n of t){const r=Sr.getVisitFnByTypeId(n),i=vi.getVisitFnByTypeId(n),s=ib.getVisitFnByTypeId(n),o=Ps.getVisitFnByTypeId(n);$9[n]={get:r,set:i,indexOf:s,byteLength:o},N9[n]=Object.create(e,{isValid:{value:lf(TT)},get:{value:lf(Sr.getVisitFnByTypeId(n))},set:{value:x9(vi.getVisitFnByTypeId(n))},indexOf:{value:I9(ib.getVisitFnByTypeId(n))},getByteLength:{value:lf(Ps.getVisitFnByTypeId(n))}})}return"Vector"})(ie.prototype);class sb extends ie{constructor(t){super(t.data);const n=this.get,r=this.set,i=this.slice,s=new Array(this.length);Object.defineProperty(this,"get",{value(o){const a=s[o];if(a!==void 0)return a;const l=n.call(this,o);return s[o]=l,l}}),Object.defineProperty(this,"set",{value(o,a){r.call(this,o,a),s[o]=a}}),Object.defineProperty(this,"slice",{value:(o,a)=>new sb(i.call(this,o,a))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new ie(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}class Nx{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(t,n,r,i){return t.prep(8,24),t.writeInt64(BigInt(i??0)),t.pad(4),t.writeInt32(r),t.writeInt64(BigInt(n??0)),t.offset()}}class on{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsKeyValue(t,n){return(n||new on).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsKeyValue(t,n){return t.setPosition(t.position()+fe),(n||new on).__init(t.readInt32(t.position())+t.position(),t)}key(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}value(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startKeyValue(t){t.startObject(2)}static addKey(t,n){t.addFieldOffset(0,n,0)}static addValue(t,n){t.addFieldOffset(1,n,0)}static endKeyValue(t){return t.endObject()}static createKeyValue(t,n,r){return on.startKeyValue(t),on.addKey(t,n),on.addValue(t,r),on.endKeyValue(t)}}var Yf;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(Yf||(Yf={}));var qf;(function(e){e[e.Little=0]="Little",e[e.Big=1]="Big"})(qf||(qf={}));var ob;(function(e){e[e.DenseArray=0]="DenseArray"})(ob||(ob={}));class Ar{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInt(t,n){return(n||new Ar).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInt(t,n){return t.setPosition(t.position()+fe),(n||new Ar).__init(t.readInt32(t.position())+t.position(),t)}bitWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}isSigned(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startInt(t){t.startObject(2)}static addBitWidth(t,n){t.addFieldInt32(0,n,0)}static addIsSigned(t,n){t.addFieldInt8(1,+n,0)}static endInt(t){return t.endObject()}static createInt(t,n,r){return Ar.startInt(t),Ar.addBitWidth(t,n),Ar.addIsSigned(t,r),Ar.endInt(t)}}class mo{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryEncoding(t,n){return(n||new mo).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryEncoding(t,n){return t.setPosition(t.position()+fe),(n||new mo).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}indexType(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new Ar).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isOrdered(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}dictionaryKind(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt16(this.bb_pos+t):ob.DenseArray}static startDictionaryEncoding(t){t.startObject(4)}static addId(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addIndexType(t,n){t.addFieldOffset(1,n,0)}static addIsOrdered(t,n){t.addFieldInt8(2,+n,0)}static addDictionaryKind(t,n){t.addFieldInt16(3,n,ob.DenseArray)}static endDictionaryEncoding(t){return t.endObject()}}class Wl{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBinary(t,n){return(n||new Wl).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBinary(t,n){return t.setPosition(t.position()+fe),(n||new Wl).__init(t.readInt32(t.position())+t.position(),t)}static startBinary(t){t.startObject(0)}static endBinary(t){return t.endObject()}static createBinary(t){return Wl.startBinary(t),Wl.endBinary(t)}}class Hl{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBool(t,n){return(n||new Hl).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBool(t,n){return t.setPosition(t.position()+fe),(n||new Hl).__init(t.readInt32(t.position())+t.position(),t)}static startBool(t){t.startObject(0)}static endBool(t){return t.endObject()}static createBool(t){return Hl.startBool(t),Hl.endBool(t)}}var ab;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(ab||(ab={}));let _m=class uu{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDate(t,n){return(n||new uu).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDate(t,n){return t.setPosition(t.position()+fe),(n||new uu).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):ab.MILLISECOND}static startDate(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,ab.MILLISECOND)}static endDate(t){return t.endObject()}static createDate(t,n){return uu.startDate(t),uu.addUnit(t,n),uu.endDate(t)}};class rr{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDecimal(t,n){return(n||new rr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDecimal(t,n){return t.setPosition(t.position()+fe),(n||new rr).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}scale(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}bitWidth(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt32(this.bb_pos+t):128}static startDecimal(t){t.startObject(3)}static addPrecision(t,n){t.addFieldInt32(0,n,0)}static addScale(t,n){t.addFieldInt32(1,n,0)}static addBitWidth(t,n){t.addFieldInt32(2,n,128)}static endDecimal(t){return t.endObject()}static createDecimal(t,n,r,i){return rr.startDecimal(t),rr.addPrecision(t,n),rr.addScale(t,r),rr.addBitWidth(t,i),rr.endDecimal(t)}}var Xa;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(Xa||(Xa={}));class ws{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDuration(t,n){return(n||new ws).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDuration(t,n){return t.setPosition(t.position()+fe),(n||new ws).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Xa.MILLISECOND}static startDuration(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,Xa.MILLISECOND)}static endDuration(t){return t.endObject()}static createDuration(t,n){return ws.startDuration(t),ws.addUnit(t,n),ws.endDuration(t)}}class _s{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeBinary(t,n){return(n||new _s).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeBinary(t,n){return t.setPosition(t.position()+fe),(n||new _s).__init(t.readInt32(t.position())+t.position(),t)}byteWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeBinary(t){t.startObject(1)}static addByteWidth(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeBinary(t){return t.endObject()}static createFixedSizeBinary(t,n){return _s.startFixedSizeBinary(t),_s.addByteWidth(t,n),_s.endFixedSizeBinary(t)}}class Ss{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeList(t,n){return(n||new Ss).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeList(t,n){return t.setPosition(t.position()+fe),(n||new Ss).__init(t.readInt32(t.position())+t.position(),t)}listSize(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeList(t){t.startObject(1)}static addListSize(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeList(t){return t.endObject()}static createFixedSizeList(t,n){return Ss.startFixedSizeList(t),Ss.addListSize(t,n),Ss.endFixedSizeList(t)}}var lb;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(lb||(lb={}));class xs{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFloatingPoint(t,n){return(n||new xs).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFloatingPoint(t,n){return t.setPosition(t.position()+fe),(n||new xs).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):lb.HALF}static startFloatingPoint(t){t.startObject(1)}static addPrecision(t,n){t.addFieldInt16(0,n,lb.HALF)}static endFloatingPoint(t){return t.endObject()}static createFloatingPoint(t,n){return xs.startFloatingPoint(t),xs.addPrecision(t,n),xs.endFloatingPoint(t)}}var cb;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(cb||(cb={}));class Is{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInterval(t,n){return(n||new Is).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInterval(t,n){return t.setPosition(t.position()+fe),(n||new Is).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):cb.YEAR_MONTH}static startInterval(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,cb.YEAR_MONTH)}static endInterval(t){return t.endObject()}static createInterval(t,n){return Is.startInterval(t),Is.addUnit(t,n),Is.endInterval(t)}}class Gl{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsList(t,n){return(n||new Gl).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsList(t,n){return t.setPosition(t.position()+fe),(n||new Gl).__init(t.readInt32(t.position())+t.position(),t)}static startList(t){t.startObject(0)}static endList(t){return t.endObject()}static createList(t){return Gl.startList(t),Gl.endList(t)}}let Sm=class fu{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMap(t,n){return(n||new fu).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMap(t,n){return t.setPosition(t.position()+fe),(n||new fu).__init(t.readInt32(t.position())+t.position(),t)}keysSorted(){const t=this.bb.__offset(this.bb_pos,4);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startMap(t){t.startObject(1)}static addKeysSorted(t,n){t.addFieldInt8(0,+n,0)}static endMap(t){return t.endObject()}static createMap(t,n){return fu.startMap(t),fu.addKeysSorted(t,n),fu.endMap(t)}};class Xl{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsNull(t,n){return(n||new Xl).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsNull(t,n){return t.setPosition(t.position()+fe),(n||new Xl).__init(t.readInt32(t.position())+t.position(),t)}static startNull(t){t.startObject(0)}static endNull(t){return t.endObject()}static createNull(t){return Xl.startNull(t),Xl.endNull(t)}}class Ql{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsStruct_(t,n){return(n||new Ql).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsStruct_(t,n){return t.setPosition(t.position()+fe),(n||new Ql).__init(t.readInt32(t.position())+t.position(),t)}static startStruct_(t){t.startObject(0)}static endStruct_(t){return t.endObject()}static createStruct_(t){return Ql.startStruct_(t),Ql.endStruct_(t)}}class ti{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTime(t,n){return(n||new ti).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTime(t,n){return t.setPosition(t.position()+fe),(n||new ti).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Xa.MILLISECOND}bitWidth(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):32}static startTime(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,Xa.MILLISECOND)}static addBitWidth(t,n){t.addFieldInt32(1,n,32)}static endTime(t){return t.endObject()}static createTime(t,n,r){return ti.startTime(t),ti.addUnit(t,n),ti.addBitWidth(t,r),ti.endTime(t)}}class ei{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTimestamp(t,n){return(n||new ei).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTimestamp(t,n){return t.setPosition(t.position()+fe),(n||new ei).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Xa.SECOND}timezone(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startTimestamp(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,Xa.SECOND)}static addTimezone(t,n){t.addFieldOffset(1,n,0)}static endTimestamp(t){return t.endObject()}static createTimestamp(t,n,r){return ei.startTimestamp(t),ei.addUnit(t,n),ei.addTimezone(t,r),ei.endTimestamp(t)}}var ub;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(ub||(ub={}));class sr{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUnion(t,n){return(n||new sr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUnion(t,n){return t.setPosition(t.position()+fe),(n||new sr).__init(t.readInt32(t.position())+t.position(),t)}mode(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):ub.Sparse}typeIds(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readInt32(this.bb.__vector(this.bb_pos+n)+t*4):0}typeIdsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}typeIdsArray(){const t=this.bb.__offset(this.bb_pos,6);return t?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startUnion(t){t.startObject(2)}static addMode(t,n){t.addFieldInt16(0,n,ub.Sparse)}static addTypeIds(t,n){t.addFieldOffset(1,n,0)}static createTypeIdsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addInt32(n[r]);return t.endVector()}static startTypeIdsVector(t,n){t.startVector(4,n,4)}static endUnion(t){return t.endObject()}static createUnion(t,n,r){return sr.startUnion(t),sr.addMode(t,n),sr.addTypeIds(t,r),sr.endUnion(t)}}class Kl{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUtf8(t,n){return(n||new Kl).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUtf8(t,n){return t.setPosition(t.position()+fe),(n||new Kl).__init(t.readInt32(t.position())+t.position(),t)}static startUtf8(t){t.startObject(0)}static endUtf8(t){return t.endObject()}static createUtf8(t){return Kl.startUtf8(t),Kl.endUtf8(t)}}var Te;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.FloatingPoint=3]="FloatingPoint",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct_=13]="Struct_",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.LargeBinary=19]="LargeBinary",e[e.LargeUtf8=20]="LargeUtf8",e[e.LargeList=21]="LargeList",e[e.RunEndEncoded=22]="RunEndEncoded"})(Te||(Te={}));let Xr=class xm{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsField(t,n){return(n||new xm).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsField(t,n){return t.setPosition(t.position()+fe),(n||new xm).__init(t.readInt32(t.position())+t.position(),t)}name(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}nullable(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}typeType(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):Te.NONE}type(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.__union(t,this.bb_pos+n):null}dictionary(t){const n=this.bb.__offset(this.bb_pos,12);return n?(t||new mo).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}children(t,n){const r=this.bb.__offset(this.bb_pos,14);return r?(n||new xm).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}childrenLength(){const t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,16);return r?(n||new on).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}static startField(t){t.startObject(7)}static addName(t,n){t.addFieldOffset(0,n,0)}static addNullable(t,n){t.addFieldInt8(1,+n,0)}static addTypeType(t,n){t.addFieldInt8(2,n,Te.NONE)}static addType(t,n){t.addFieldOffset(3,n,0)}static addDictionary(t,n){t.addFieldOffset(4,n,0)}static addChildren(t,n){t.addFieldOffset(5,n,0)}static createChildrenVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startChildrenVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(6,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endField(t){return t.endObject()}},us=class ro{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsSchema(t,n){return(n||new ro).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSchema(t,n){return t.setPosition(t.position()+fe),(n||new ro).__init(t.readInt32(t.position())+t.position(),t)}endianness(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):qf.Little}fields(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new Xr).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}fieldsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new on).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}features(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.readInt64(this.bb.__vector(this.bb_pos+n)+t*8):BigInt(0)}featuresLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}static startSchema(t){t.startObject(4)}static addEndianness(t,n){t.addFieldInt16(0,n,qf.Little)}static addFields(t,n){t.addFieldOffset(1,n,0)}static createFieldsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startFieldsVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(2,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static addFeatures(t,n){t.addFieldOffset(3,n,0)}static createFeaturesVector(t,n){t.startVector(8,n.length,8);for(let r=n.length-1;r>=0;r--)t.addInt64(n[r]);return t.endVector()}static startFeaturesVector(t,n){t.startVector(8,n,8)}static endSchema(t){return t.endObject()}static finishSchemaBuffer(t,n){t.finish(n)}static finishSizePrefixedSchemaBuffer(t,n){t.finish(n,void 0,!0)}static createSchema(t,n,r,i,s){return ro.startSchema(t),ro.addEndianness(t,n),ro.addFields(t,r),ro.addCustomMetadata(t,i),ro.addFeatures(t,s),ro.endSchema(t)}};class Er{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFooter(t,n){return(n||new Er).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFooter(t,n){return t.setPosition(t.position()+fe),(n||new Er).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Yf.V1}schema(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new us).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}dictionaries(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new Nx).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}dictionariesLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}recordBatches(t,n){const r=this.bb.__offset(this.bb_pos,10);return r?(n||new Nx).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}recordBatchesLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new on).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startFooter(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,Yf.V1)}static addSchema(t,n){t.addFieldOffset(1,n,0)}static addDictionaries(t,n){t.addFieldOffset(2,n,0)}static startDictionariesVector(t,n){t.startVector(24,n,8)}static addRecordBatches(t,n){t.addFieldOffset(3,n,0)}static startRecordBatchesVector(t,n){t.startVector(24,n,8)}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endFooter(t){return t.endObject()}static finishFooterBuffer(t,n){t.finish(n)}static finishSizePrefixedFooterBuffer(t,n){t.finish(n,void 0,!0)}}class se{constructor(t=[],n,r,i=Sn.V5){this.fields=t||[],this.metadata=n||new Map,r||(r=Dx(t)),this.dictionaries=r,this.metadataVersion=i}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(t=>t.name)}toString(){return`Schema<{ ${this.fields.map((t,n)=>`${n}: ${t}`).join(", ")} }>`}select(t){const n=new Set(t),r=this.fields.filter(i=>n.has(i.name));return new se(r,this.metadata)}selectAt(t){const n=t.map(r=>this.fields[r]).filter(Boolean);return new se(n,this.metadata)}assign(...t){const n=t[0]instanceof se?t[0]:Array.isArray(t[0])?new se(t[0]):new se(t),r=[...this.fields],i=z0(z0(new Map,this.metadata),n.metadata),s=n.fields.filter(a=>{const l=r.findIndex(c=>c.name===a.name);return~l?(r[l]=a.clone({metadata:z0(z0(new Map,r[l].metadata),a.metadata)}))&&!1:!0}),o=Dx(s,new Map);return new se([...r,...s],i,new Map([...this.dictionaries,...o]))}}se.prototype.fields=null;se.prototype.metadata=null;se.prototype.dictionaries=null;class Ie{static new(...t){let[n,r,i,s]=t;return t[0]&&typeof t[0]=="object"&&({name:n}=t[0],r===void 0&&(r=t[0].type),i===void 0&&(i=t[0].nullable),s===void 0&&(s=t[0].metadata)),new Ie(`${n}`,r,i,s)}constructor(t,n,r=!1,i){this.name=t,this.type=n,this.nullable=r,this.metadata=i||new Map}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...t){let[n,r,i,s]=t;return!t[0]||typeof t[0]!="object"?[n=this.name,r=this.type,i=this.nullable,s=this.metadata]=t:{name:n=this.name,type:r=this.type,nullable:i=this.nullable,metadata:s=this.metadata}=t[0],Ie.new(n,r,i,s)}}Ie.prototype.type=null;Ie.prototype.name=null;Ie.prototype.nullable=null;Ie.prototype.metadata=null;function z0(e,t){return new Map([...e||new Map,...t||new Map])}function Dx(e,t=new Map){for(let n=-1,r=e.length;++n<r;){const s=e[n].type;if(at.isDictionary(s)){if(!t.has(s.id))t.set(s.id,s.dictionary);else if(t.get(s.id)!==s.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}s.children&&s.children.length>0&&Dx(s.children,t)}return t}var Umt=BO,Pmt=xf;class Rp{static decode(t){t=new Pmt(Zt(t));const n=Er.getRootAsFooter(t),r=se.decode(n.schema(),new Map,n.version());return new zmt(r,n)}static encode(t){const n=new Umt,r=se.encode(n,t.schema);Er.startRecordBatchesVector(n,t.numRecordBatches);for(const o of[...t.recordBatches()].slice().reverse())Qa.encode(n,o);const i=n.endVector();Er.startDictionariesVector(n,t.numDictionaries);for(const o of[...t.dictionaryBatches()].slice().reverse())Qa.encode(n,o);const s=n.endVector();return Er.startFooter(n),Er.addSchema(n,r),Er.addVersion(n,Sn.V5),Er.addRecordBatches(n,i),Er.addDictionaries(n,s),Er.finishFooterBuffer(n,Er.endFooter(n)),n.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}constructor(t,n=Sn.V5,r,i){this.schema=t,this.version=n,r&&(this._recordBatches=r),i&&(this._dictionaryBatches=i)}*recordBatches(){for(let t,n=-1,r=this.numRecordBatches;++n<r;)(t=this.getRecordBatch(n))&&(yield t)}*dictionaryBatches(){for(let t,n=-1,r=this.numDictionaries;++n<r;)(t=this.getDictionaryBatch(n))&&(yield t)}getRecordBatch(t){return t>=0&&t<this.numRecordBatches&&this._recordBatches[t]||null}getDictionaryBatch(t){return t>=0&&t<this.numDictionaries&&this._dictionaryBatches[t]||null}}class zmt extends Rp{get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}constructor(t,n){super(t,n.version()),this._footer=n}getRecordBatch(t){if(t>=0&&t<this.numRecordBatches){const n=this._footer.recordBatches(t);if(n)return Qa.decode(n)}return null}getDictionaryBatch(t){if(t>=0&&t<this.numDictionaries){const n=this._footer.dictionaries(t);if(n)return Qa.decode(n)}return null}}class Qa{static decode(t){return new Qa(t.metaDataLength(),t.bodyLength(),t.offset())}static encode(t,n){const{metaDataLength:r}=n,i=BigInt(n.offset),s=BigInt(n.bodyLength);return Nx.createBlock(t,i,r,s)}constructor(t,n,r){this.metaDataLength=t,this.offset=Gi(r),this.bodyLength=Gi(n)}}const Ce=Object.freeze({done:!0,value:void 0});class qN{constructor(t){this._json=t}get schema(){return this._json.schema}get batches(){return this._json.batches||[]}get dictionaries(){return this._json.dictionaries||[]}}class MT{tee(){return this._getDOMStream().tee()}pipe(t,n){return this._getNodeStream().pipe(t,n)}pipeTo(t,n){return this._getDOMStream().pipeTo(t,n)}pipeThrough(t,n){return this._getDOMStream().pipeThrough(t,n)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class jmt extends MT{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(t=>this._closedPromiseResolve=t)}get closed(){return this._closedPromise}cancel(t){return W(this,void 0,void 0,function*(){yield this.return(t)})}write(t){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(t):this.resolvers.shift().resolve({done:!1,value:t}))}abort(t){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:t}:this.resolvers.shift().reject({done:!0,value:t}))}close(){if(this._closedPromiseResolve){const{resolvers:t}=this;for(;t.length>0;)t.shift().resolve(Ce);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(t){return Kr.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,t)}toNodeStream(t){return Kr.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,t)}throw(t){return W(this,void 0,void 0,function*(){return yield this.abort(t),Ce})}return(t){return W(this,void 0,void 0,function*(){return yield this.close(),Ce})}read(t){return W(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return W(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(...t){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((n,r)=>{this.resolvers.push({resolve:n,reject:r})}):Promise.resolve(Ce)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}}class Im extends jmt{write(t){if((t=Zt(t)).byteLength>0)return super.write(t)}toString(t=!1){return t?Tx(this.toUint8Array(!0)):this.toUint8Array(!1).then(Tx)}toUint8Array(t=!1){return t?Us(this._values)[0]:W(this,void 0,void 0,function*(){var n,r,i,s;const o=[];let a=0;try{for(var l=!0,c=Fr(this),u;u=yield c.next(),n=u.done,!n;l=!0){s=u.value,l=!1;const f=s;o.push(f),a+=f.byteLength}}catch(f){r={error:f}}finally{try{!l&&!n&&(i=c.return)&&(yield i.call(c))}finally{if(r)throw r.error}}return Us(o,a)[0]})}}class fb{constructor(t){t&&(this.source=new Vmt(Kr.fromIterable(t)))}[Symbol.iterator](){return this}next(t){return this.source.next(t)}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}peek(t){return this.source.peek(t)}read(t){return this.source.read(t)}}class Wf{constructor(t){t instanceof Wf?this.source=t.source:t instanceof Im?this.source=new bl(Kr.fromAsyncIterable(t)):sP(t)?this.source=new bl(Kr.fromNodeStream(t)):mT(t)?this.source=new bl(Kr.fromDOMStream(t)):iP(t)?this.source=new bl(Kr.fromDOMStream(t.body)):Oy(t)?this.source=new bl(Kr.fromIterable(t)):Mc(t)?this.source=new bl(Kr.fromAsyncIterable(t)):bd(t)&&(this.source=new bl(Kr.fromAsyncIterable(t)))}[Symbol.asyncIterator](){return this}next(t){return this.source.next(t)}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}get closed(){return this.source.closed}cancel(t){return this.source.cancel(t)}peek(t){return this.source.peek(t)}read(t){return this.source.read(t)}}class Vmt{constructor(t){this.source=t}cancel(t){this.return(t)}peek(t){return this.next(t,"peek").value}read(t){return this.next(t,"read").value}next(t,n="read"){return this.source.next({cmd:n,size:t})}throw(t){return Object.create(this.source.throw&&this.source.throw(t)||Ce)}return(t){return Object.create(this.source.return&&this.source.return(t)||Ce)}}class bl{constructor(t){this.source=t,this._closedPromise=new Promise(n=>this._closedPromiseResolve=n)}cancel(t){return W(this,void 0,void 0,function*(){yield this.return(t)})}get closed(){return this._closedPromise}read(t){return W(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return W(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(t,n="read"){return W(this,void 0,void 0,function*(){return yield this.source.next({cmd:n,size:t})})}throw(t){return W(this,void 0,void 0,function*(){const n=this.source.throw&&(yield this.source.throw(t))||Ce;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(n)})}return(t){return W(this,void 0,void 0,function*(){const n=this.source.return&&(yield this.source.return(t))||Ce;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(n)})}}class WN extends fb{constructor(t,n){super(),this.position=0,this.buffer=Zt(t),this.size=n===void 0?this.buffer.byteLength:n}readInt32(t){const{buffer:n,byteOffset:r}=this.readAt(t,4);return new DataView(n,r).getInt32(0,!0)}seek(t){return this.position=Math.min(t,this.size),t<this.size}read(t){const{buffer:n,size:r,position:i}=this;return n&&i<r?(typeof t!="number"&&(t=Number.POSITIVE_INFINITY),this.position=Math.min(r,i+Math.min(r-i,t)),n.subarray(i,this.position)):null}readAt(t,n){const r=this.buffer,i=Math.min(this.size,t+n);return r?r.subarray(t,i):new Uint8Array(n)}close(){this.buffer&&(this.buffer=null)}throw(t){return this.close(),{done:!0,value:t}}return(t){return this.close(),{done:!0,value:t}}}class db extends Wf{constructor(t,n){super(),this.position=0,this._handle=t,typeof n=="number"?this.size=n:this._pending=W(this,void 0,void 0,function*(){this.size=(yield t.stat()).size,delete this._pending})}readInt32(t){return W(this,void 0,void 0,function*(){const{buffer:n,byteOffset:r}=yield this.readAt(t,4);return new DataView(n,r).getInt32(0,!0)})}seek(t){return W(this,void 0,void 0,function*(){return this._pending&&(yield this._pending),this.position=Math.min(t,this.size),t<this.size})}read(t){return W(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:n,size:r,position:i}=this;if(n&&i<r){typeof t!="number"&&(t=Number.POSITIVE_INFINITY);let s=i,o=0,a=0;const l=Math.min(r,s+Math.min(r-s,t)),c=new Uint8Array(Math.max(0,(this.position=l)-s));for(;(s+=a)<l&&(o+=a)<c.byteLength;)({bytesRead:a}=yield n.read(c,o,c.byteLength-o,s));return c}return null})}readAt(t,n){return W(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:r,size:i}=this;if(r&&t+n<i){const s=Math.min(i,t+n),o=new Uint8Array(s-t);return(yield r.read(o,0,n,t)).buffer}return new Uint8Array(n)})}close(){return W(this,void 0,void 0,function*(){const t=this._handle;this._handle=null,t&&(yield t.close())})}throw(t){return W(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:t}})}return(t){return W(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:t}})}}const Ymt=65536;function Bu(e){return e<0&&(e=4294967295+e+1),`0x${e.toString(16)}`}const Hf=8,$T=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8];class D9{constructor(t){this.buffer=t}high(){return this.buffer[1]}low(){return this.buffer[0]}_times(t){const n=new Uint32Array([this.buffer[1]>>>16,this.buffer[1]&65535,this.buffer[0]>>>16,this.buffer[0]&65535]),r=new Uint32Array([t.buffer[1]>>>16,t.buffer[1]&65535,t.buffer[0]>>>16,t.buffer[0]&65535]);let i=n[3]*r[3];this.buffer[0]=i&65535;let s=i>>>16;return i=n[2]*r[3],s+=i,i=n[3]*r[2]>>>0,s+=i,this.buffer[0]+=s<<16,this.buffer[1]=s>>>0<i?Ymt:0,this.buffer[1]+=s>>>16,this.buffer[1]+=n[1]*r[3]+n[2]*r[2]+n[3]*r[1],this.buffer[1]+=n[0]*r[3]+n[1]*r[2]+n[2]*r[1]+n[3]*r[0]<<16,this}_plus(t){const n=this.buffer[0]+t.buffer[0]>>>0;this.buffer[1]+=t.buffer[1],n<this.buffer[0]>>>0&&++this.buffer[1],this.buffer[0]=n}lessThan(t){return this.buffer[1]<t.buffer[1]||this.buffer[1]===t.buffer[1]&&this.buffer[0]<t.buffer[0]}equals(t){return this.buffer[1]===t.buffer[1]&&this.buffer[0]==t.buffer[0]}greaterThan(t){return t.lessThan(this)}hex(){return`${Bu(this.buffer[1])} ${Bu(this.buffer[0])}`}}class ae extends D9{times(t){return this._times(t),this}plus(t){return this._plus(t),this}static from(t,n=new Uint32Array(2)){return ae.fromString(typeof t=="string"?t:t.toString(),n)}static fromNumber(t,n=new Uint32Array(2)){return ae.fromString(t.toString(),n)}static fromString(t,n=new Uint32Array(2)){const r=t.length,i=new ae(n);for(let s=0;s<r;){const o=Hf<r-s?Hf:r-s,a=new ae(new Uint32Array([Number.parseInt(t.slice(s,s+o),10),0])),l=new ae(new Uint32Array([$T[o],0]));i.times(l),i.plus(a),s+=o}return i}static convertArray(t){const n=new Uint32Array(t.length*2);for(let r=-1,i=t.length;++r<i;)ae.from(t[r],new Uint32Array(n.buffer,n.byteOffset+2*r*4,2));return n}static multiply(t,n){return new ae(new Uint32Array(t.buffer)).times(n)}static add(t,n){return new ae(new Uint32Array(t.buffer)).plus(n)}}class nr extends D9{negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[0]==0&&++this.buffer[1],this}times(t){return this._times(t),this}plus(t){return this._plus(t),this}lessThan(t){const n=this.buffer[1]<<0,r=t.buffer[1]<<0;return n<r||n===r&&this.buffer[0]<t.buffer[0]}static from(t,n=new Uint32Array(2)){return nr.fromString(typeof t=="string"?t:t.toString(),n)}static fromNumber(t,n=new Uint32Array(2)){return nr.fromString(t.toString(),n)}static fromString(t,n=new Uint32Array(2)){const r=t.startsWith("-"),i=t.length,s=new nr(n);for(let o=r?1:0;o<i;){const a=Hf<i-o?Hf:i-o,l=new nr(new Uint32Array([Number.parseInt(t.slice(o,o+a),10),0])),c=new nr(new Uint32Array([$T[a],0]));s.times(c),s.plus(l),o+=a}return r?s.negate():s}static convertArray(t){const n=new Uint32Array(t.length*2);for(let r=-1,i=t.length;++r<i;)nr.from(t[r],new Uint32Array(n.buffer,n.byteOffset+2*r*4,2));return n}static multiply(t,n){return new nr(new Uint32Array(t.buffer)).times(n)}static add(t,n){return new nr(new Uint32Array(t.buffer)).plus(n)}}class fs{constructor(t){this.buffer=t}high(){return new nr(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2))}low(){return new nr(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset,2))}negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[2]=~this.buffer[2],this.buffer[3]=~this.buffer[3],this.buffer[0]==0&&++this.buffer[1],this.buffer[1]==0&&++this.buffer[2],this.buffer[2]==0&&++this.buffer[3],this}times(t){const n=new ae(new Uint32Array([this.buffer[3],0])),r=new ae(new Uint32Array([this.buffer[2],0])),i=new ae(new Uint32Array([this.buffer[1],0])),s=new ae(new Uint32Array([this.buffer[0],0])),o=new ae(new Uint32Array([t.buffer[3],0])),a=new ae(new Uint32Array([t.buffer[2],0])),l=new ae(new Uint32Array([t.buffer[1],0])),c=new ae(new Uint32Array([t.buffer[0],0]));let u=ae.multiply(s,c);this.buffer[0]=u.low();const f=new ae(new Uint32Array([u.high(),0]));return u=ae.multiply(i,c),f.plus(u),u=ae.multiply(s,l),f.plus(u),this.buffer[1]=f.low(),this.buffer[3]=f.lessThan(u)?1:0,this.buffer[2]=f.high(),new ae(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2)).plus(ae.multiply(r,c)).plus(ae.multiply(i,l)).plus(ae.multiply(s,a)),this.buffer[3]+=ae.multiply(n,c).plus(ae.multiply(r,l)).plus(ae.multiply(i,a)).plus(ae.multiply(s,o)).low(),this}plus(t){const n=new Uint32Array(4);return n[3]=this.buffer[3]+t.buffer[3]>>>0,n[2]=this.buffer[2]+t.buffer[2]>>>0,n[1]=this.buffer[1]+t.buffer[1]>>>0,n[0]=this.buffer[0]+t.buffer[0]>>>0,n[0]<this.buffer[0]>>>0&&++n[1],n[1]<this.buffer[1]>>>0&&++n[2],n[2]<this.buffer[2]>>>0&&++n[3],this.buffer[3]=n[3],this.buffer[2]=n[2],this.buffer[1]=n[1],this.buffer[0]=n[0],this}hex(){return`${Bu(this.buffer[3])} ${Bu(this.buffer[2])} ${Bu(this.buffer[1])} ${Bu(this.buffer[0])}`}static multiply(t,n){return new fs(new Uint32Array(t.buffer)).times(n)}static add(t,n){return new fs(new Uint32Array(t.buffer)).plus(n)}static from(t,n=new Uint32Array(4)){return fs.fromString(typeof t=="string"?t:t.toString(),n)}static fromNumber(t,n=new Uint32Array(4)){return fs.fromString(t.toString(),n)}static fromString(t,n=new Uint32Array(4)){const r=t.startsWith("-"),i=t.length,s=new fs(n);for(let o=r?1:0;o<i;){const a=Hf<i-o?Hf:i-o,l=new fs(new Uint32Array([Number.parseInt(t.slice(o,o+a),10),0,0,0])),c=new fs(new Uint32Array([$T[a],0,0,0]));s.times(c),s.plus(l),o+=a}return r?s.negate():s}static convertArray(t){const n=new Uint32Array(t.length*4);for(let r=-1,i=t.length;++r<i;)fs.from(t[r],new Uint32Array(n.buffer,n.byteOffset+4*4*r,4));return n}}class k9 extends Ft{constructor(t,n,r,i,s=Sn.V5){super(),this.nodesIndex=-1,this.buffersIndex=-1,this.bytes=t,this.nodes=n,this.buffers=r,this.dictionaries=i,this.metadataVersion=s}visit(t){return super.visit(t instanceof Ie?t.type:t)}visitNull(t,{length:n}=this.nextFieldNode()){return Ct({type:t,length:n})}visitBool(t,{length:n,nullCount:r}=this.nextFieldNode()){return Ct({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitInt(t,{length:n,nullCount:r}=this.nextFieldNode()){return Ct({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitFloat(t,{length:n,nullCount:r}=this.nextFieldNode()){return Ct({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitUtf8(t,{length:n,nullCount:r}=this.nextFieldNode()){return Ct({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),valueOffsets:this.readOffsets(t),data:this.readData(t)})}visitBinary(t,{length:n,nullCount:r}=this.nextFieldNode()){return Ct({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),valueOffsets:this.readOffsets(t),data:this.readData(t)})}visitFixedSizeBinary(t,{length:n,nullCount:r}=this.nextFieldNode()){return Ct({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitDate(t,{length:n,nullCount:r}=this.nextFieldNode()){return Ct({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitTimestamp(t,{length:n,nullCount:r}=this.nextFieldNode()){return Ct({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitTime(t,{length:n,nullCount:r}=this.nextFieldNode()){return Ct({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitDecimal(t,{length:n,nullCount:r}=this.nextFieldNode()){return Ct({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitList(t,{length:n,nullCount:r}=this.nextFieldNode()){return Ct({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),valueOffsets:this.readOffsets(t),child:this.visit(t.children[0])})}visitStruct(t,{length:n,nullCount:r}=this.nextFieldNode()){return Ct({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),children:this.visitMany(t.children)})}visitUnion(t,{length:n,nullCount:r}=this.nextFieldNode()){return this.metadataVersion<Sn.V5&&this.readNullBitmap(t,r),t.mode===ln.Sparse?this.visitSparseUnion(t,{length:n,nullCount:r}):this.visitDenseUnion(t,{length:n,nullCount:r})}visitDenseUnion(t,{length:n,nullCount:r}=this.nextFieldNode()){return Ct({type:t,length:n,nullCount:r,typeIds:this.readTypeIds(t),valueOffsets:this.readOffsets(t),children:this.visitMany(t.children)})}visitSparseUnion(t,{length:n,nullCount:r}=this.nextFieldNode()){return Ct({type:t,length:n,nullCount:r,typeIds:this.readTypeIds(t),children:this.visitMany(t.children)})}visitDictionary(t,{length:n,nullCount:r}=this.nextFieldNode()){return Ct({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t.indices),dictionary:this.readDictionary(t)})}visitInterval(t,{length:n,nullCount:r}=this.nextFieldNode()){return Ct({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitDuration(t,{length:n,nullCount:r}=this.nextFieldNode()){return Ct({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitFixedSizeList(t,{length:n,nullCount:r}=this.nextFieldNode()){return Ct({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),child:this.visit(t.children[0])})}visitMap(t,{length:n,nullCount:r}=this.nextFieldNode()){return Ct({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),valueOffsets:this.readOffsets(t),child:this.visit(t.children[0])})}nextFieldNode(){return this.nodes[++this.nodesIndex]}nextBufferRange(){return this.buffers[++this.buffersIndex]}readNullBitmap(t,n,r=this.nextBufferRange()){return n>0&&this.readData(t,r)||new Uint8Array(0)}readOffsets(t,n){return this.readData(t,n)}readTypeIds(t,n){return this.readData(t,n)}readData(t,{length:n,offset:r}=this.nextBufferRange()){return this.bytes.subarray(r,r+n)}readDictionary(t){return this.dictionaries.get(t.id)}}class qmt extends k9{constructor(t,n,r,i,s){super(new Uint8Array(0),n,r,i,s),this.sources=t}readNullBitmap(t,n,{offset:r}=this.nextBufferRange()){return n<=0?new Uint8Array(0):rb(this.sources[r])}readOffsets(t,{offset:n}=this.nextBufferRange()){return ce(Uint8Array,ce(Int32Array,this.sources[n]))}readTypeIds(t,{offset:n}=this.nextBufferRange()){return ce(Uint8Array,ce(t.ArrayType,this.sources[n]))}readData(t,{offset:n}=this.nextBufferRange()){const{sources:r}=this;return at.isTimestamp(t)||(at.isInt(t)||at.isTime(t))&&t.bitWidth===64||at.isDuration(t)||at.isDate(t)&&t.unit===Pr.MILLISECOND?ce(Uint8Array,nr.convertArray(r[n])):at.isDecimal(t)?ce(Uint8Array,fs.convertArray(r[n])):at.isBinary(t)||at.isFixedSizeBinary(t)?Wmt(r[n]):at.isBool(t)?rb(r[n]):at.isUtf8(t)?yT(r[n].join("")):ce(Uint8Array,ce(t.ArrayType,r[n].map(i=>+i)))}}function Wmt(e){const t=e.join(""),n=new Uint8Array(t.length/2);for(let r=0;r<t.length;r+=2)n[r>>1]=Number.parseInt(t.slice(r,r+2),16);return n}class mt extends Ft{compareSchemas(t,n){return t===n||n instanceof t.constructor&&this.compareManyFields(t.fields,n.fields)}compareManyFields(t,n){return t===n||Array.isArray(t)&&Array.isArray(n)&&t.length===n.length&&t.every((r,i)=>this.compareFields(r,n[i]))}compareFields(t,n){return t===n||n instanceof t.constructor&&t.name===n.name&&t.nullable===n.nullable&&this.visit(t.type,n.type)}}function tr(e,t){return t instanceof e.constructor}function Fy(e,t){return e===t||tr(e,t)}function Xo(e,t){return e===t||tr(e,t)&&e.bitWidth===t.bitWidth&&e.isSigned===t.isSigned}function Xv(e,t){return e===t||tr(e,t)&&e.precision===t.precision}function Hmt(e,t){return e===t||tr(e,t)&&e.byteWidth===t.byteWidth}function NT(e,t){return e===t||tr(e,t)&&e.unit===t.unit}function By(e,t){return e===t||tr(e,t)&&e.unit===t.unit&&e.timezone===t.timezone}function Ry(e,t){return e===t||tr(e,t)&&e.unit===t.unit&&e.bitWidth===t.bitWidth}function Gmt(e,t){return e===t||tr(e,t)&&e.children.length===t.children.length&&Ka.compareManyFields(e.children,t.children)}function Xmt(e,t){return e===t||tr(e,t)&&e.children.length===t.children.length&&Ka.compareManyFields(e.children,t.children)}function DT(e,t){return e===t||tr(e,t)&&e.mode===t.mode&&e.typeIds.every((n,r)=>n===t.typeIds[r])&&Ka.compareManyFields(e.children,t.children)}function Qmt(e,t){return e===t||tr(e,t)&&e.id===t.id&&e.isOrdered===t.isOrdered&&Ka.visit(e.indices,t.indices)&&Ka.visit(e.dictionary,t.dictionary)}function kT(e,t){return e===t||tr(e,t)&&e.unit===t.unit}function Ly(e,t){return e===t||tr(e,t)&&e.unit===t.unit}function Kmt(e,t){return e===t||tr(e,t)&&e.listSize===t.listSize&&e.children.length===t.children.length&&Ka.compareManyFields(e.children,t.children)}function Zmt(e,t){return e===t||tr(e,t)&&e.keysSorted===t.keysSorted&&e.children.length===t.children.length&&Ka.compareManyFields(e.children,t.children)}mt.prototype.visitNull=Fy;mt.prototype.visitBool=Fy;mt.prototype.visitInt=Xo;mt.prototype.visitInt8=Xo;mt.prototype.visitInt16=Xo;mt.prototype.visitInt32=Xo;mt.prototype.visitInt64=Xo;mt.prototype.visitUint8=Xo;mt.prototype.visitUint16=Xo;mt.prototype.visitUint32=Xo;mt.prototype.visitUint64=Xo;mt.prototype.visitFloat=Xv;mt.prototype.visitFloat16=Xv;mt.prototype.visitFloat32=Xv;mt.prototype.visitFloat64=Xv;mt.prototype.visitUtf8=Fy;mt.prototype.visitBinary=Fy;mt.prototype.visitFixedSizeBinary=Hmt;mt.prototype.visitDate=NT;mt.prototype.visitDateDay=NT;mt.prototype.visitDateMillisecond=NT;mt.prototype.visitTimestamp=By;mt.prototype.visitTimestampSecond=By;mt.prototype.visitTimestampMillisecond=By;mt.prototype.visitTimestampMicrosecond=By;mt.prototype.visitTimestampNanosecond=By;mt.prototype.visitTime=Ry;mt.prototype.visitTimeSecond=Ry;mt.prototype.visitTimeMillisecond=Ry;mt.prototype.visitTimeMicrosecond=Ry;mt.prototype.visitTimeNanosecond=Ry;mt.prototype.visitDecimal=Fy;mt.prototype.visitList=Gmt;mt.prototype.visitStruct=Xmt;mt.prototype.visitUnion=DT;mt.prototype.visitDenseUnion=DT;mt.prototype.visitSparseUnion=DT;mt.prototype.visitDictionary=Qmt;mt.prototype.visitInterval=kT;mt.prototype.visitIntervalDayTime=kT;mt.prototype.visitIntervalYearMonth=kT;mt.prototype.visitDuration=Ly;mt.prototype.visitDurationSecond=Ly;mt.prototype.visitDurationMillisecond=Ly;mt.prototype.visitDurationMicrosecond=Ly;mt.prototype.visitDurationNanosecond=Ly;mt.prototype.visitFixedSizeList=Kmt;mt.prototype.visitMap=Zmt;const Ka=new mt;function kx(e,t){return Ka.compareSchemas(e,t)}function B_(e,t){return Jmt(e,t.map(n=>n.data.concat()))}function Jmt(e,t){const n=[...e.fields],r=[],i={numBatches:t.reduce((f,d)=>Math.max(f,d.length),0)};let s=0,o=0,a=-1;const l=t.length;let c,u=[];for(;i.numBatches-- >0;){for(o=Number.POSITIVE_INFINITY,a=-1;++a<l;)u[a]=c=t[a].shift(),o=Math.min(o,c?c.length:o);Number.isFinite(o)&&(u=tgt(n,o,u,t,i),o>0&&(r[s++]=Ct({type:new qn(n),length:o,nullCount:0,children:u.slice()})))}return[e=e.assign(n),r.map(f=>new or(e,f))]}function tgt(e,t,n,r,i){var s;const o=(t+63&-64)>>3;for(let a=-1,l=r.length;++a<l;){const c=n[a],u=c==null?void 0:c.length;if(u>=t)u===t?n[a]=c:(n[a]=c.slice(0,t),i.numBatches=Math.max(i.numBatches,r[a].unshift(c.slice(t,u-t))));else{const f=e[a];e[a]=f.clone({nullable:!0}),n[a]=(s=c==null?void 0:c._changeLengthAndBackfillNullBitmap(t))!==null&&s!==void 0?s:Ct({type:f.type,length:t,nullCount:t,nullBitmap:new Uint8Array(o)})}}return n}var O9;class On{constructor(...t){var n,r;if(t.length===0)return this.batches=[],this.schema=new se([]),this._offsets=[0],this;let i,s;t[0]instanceof se&&(i=t.shift()),t.at(-1)instanceof Uint32Array&&(s=t.pop());const o=l=>{if(l){if(l instanceof or)return[l];if(l instanceof On)return l.batches;if(l instanceof he){if(l.type instanceof qn)return[new or(new se(l.type.children),l)]}else{if(Array.isArray(l))return l.flatMap(c=>o(c));if(typeof l[Symbol.iterator]=="function")return[...l].flatMap(c=>o(c));if(typeof l=="object"){const c=Object.keys(l),u=c.map(h=>new ie([l[h]])),f=new se(c.map((h,p)=>new Ie(String(h),u[p].type))),[,d]=B_(f,u);return d.length===0?[new or(l)]:d}}}return[]},a=t.flatMap(l=>o(l));if(i=(r=i??((n=a[0])===null||n===void 0?void 0:n.schema))!==null&&r!==void 0?r:new se([]),!(i instanceof se))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const l of a){if(!(l instanceof or))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!kx(i,l.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=i,this.batches=a,this._offsets=s??_9(this.data)}get data(){return this.batches.map(({data:t})=>t)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((t,n)=>t+n.length,0)}get nullCount(){return this._nullCount===-1&&(this._nullCount=w9(this.data)),this._nullCount}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}getByteLength(t){return 0}[Symbol.iterator](){return this.batches.length>0?AT.visit(new ie(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(`,
  `)}
]`}concat(...t){const n=this.schema,r=this.data.concat(t.flatMap(({data:i})=>i));return new On(n,r.map(i=>new or(n,i)))}slice(t,n){const r=this.schema;[t,n]=b9({length:this.numRows},t,n);const i=S9(this.data,this._offsets,t,n);return new On(r,i.map(s=>new or(r,s)))}getChild(t){return this.getChildAt(this.schema.fields.findIndex(n=>n.name===t))}getChildAt(t){if(t>-1&&t<this.schema.fields.length){const n=this.data.map(r=>r.children[t]);if(n.length===0){const{type:r}=this.schema.fields[t],i=Ct({type:r,length:0,nullCount:0});n.push(i._changeLengthAndBackfillNullBitmap(this.numRows))}return new ie(n)}return null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=[...this.batches];if(t>-1&&t<this.numCols){n||(n=new ie([Ct({type:new Ha,length:this.numRows})]));const s=r.fields.slice(),o=s[t].clone({type:n.type}),a=this.schema.fields.map((l,c)=>this.getChildAt(c));[s[t],a[t]]=[o,n],[r,i]=B_(r,a)}return new On(r,i)}select(t){const n=this.schema.fields.reduce((r,i,s)=>r.set(i.name,s),new Map);return this.selectAt(t.map(r=>n.get(r)).filter(r=>r>-1))}selectAt(t){const n=this.schema.selectAt(t),r=this.batches.map(i=>i.selectAt(t));return new On(n,r)}assign(t){const n=this.schema.fields,[r,i]=t.schema.fields.reduce((a,l,c)=>{const[u,f]=a,d=n.findIndex(h=>h.name===l.name);return~d?f[d]=c:u.push(c),a},[[],[]]),s=this.schema.assign(t.schema),o=[...n.map((a,l)=>[l,i[l]]).map(([a,l])=>l===void 0?this.getChildAt(a):t.getChildAt(l)),...r.map(a=>t.getChildAt(a))].filter(Boolean);return new On(...B_(s,o))}}O9=Symbol.toStringTag;On[O9]=(e=>(e.schema=null,e.batches=[],e._offsets=new Uint32Array([0]),e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,e.isValid=lf(TT),e.get=lf(Sr.getVisitFn(D.Struct)),e.set=x9(vi.getVisitFn(D.Struct)),e.indexOf=I9(ib.getVisitFn(D.Struct)),e.getByteLength=lf(Ps.getVisitFn(D.Struct)),"Table"))(On.prototype);var F9;let or=class hh{constructor(...t){switch(t.length){case 2:{if([this.schema]=t,!(this.schema instanceof se))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=Ct({nullCount:0,type:new qn(this.schema.fields),children:this.schema.fields.map(n=>Ct({type:n.type,nullCount:0}))})]=t,!(this.data instanceof he))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=HN(this.schema,this.data.children);break}case 1:{const[n]=t,{fields:r,children:i,length:s}=Object.keys(n).reduce((l,c,u)=>(l.children[u]=n[c],l.length=Math.max(l.length,n[c].length),l.fields[u]=Ie.new({name:c,type:n[c].type,nullable:!0}),l),{length:0,fields:new Array,children:new Array}),o=new se(r),a=Ct({type:new qn(r),length:s,children:i,nullCount:0});[this.schema,this.data]=HN(o,a.children,s);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=B9(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(t){return this.data.getValid(t)}get(t){return Sr.visit(this.data,t)}set(t,n){return vi.visit(this.data,t,n)}indexOf(t,n){return ib.visit(this.data,t,n)}getByteLength(t){return Ps.visit(this.data,t)}[Symbol.iterator](){return AT.visit(new ie([this.data]))}toArray(){return[...this]}concat(...t){return new On(this.schema,[this,...t])}slice(t,n){const[r]=new ie([this.data]).slice(t,n).data;return new hh(this.schema,r)}getChild(t){var n;return this.getChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.schema.fields.length?new ie([this.data.children[t]]):null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=this.data;if(t>-1&&t<this.numCols){n||(n=new ie([Ct({type:new Ha,length:this.numRows})]));const s=r.fields.slice(),o=i.children.slice(),a=s[t].clone({type:n.type});[s[t],o[t]]=[a,n.data[0]],r=new se(s,new Map(this.schema.metadata)),i=Ct({type:new qn(s),children:o})}return new hh(r,i)}select(t){const n=this.schema.select(t),r=new qn(n.fields),i=[];for(const s of t){const o=this.schema.fields.findIndex(a=>a.name===s);~o&&(i[o]=this.data.children[o])}return new hh(n,Ct({type:r,length:this.numRows,children:i}))}selectAt(t){const n=this.schema.selectAt(t),r=t.map(s=>this.data.children[s]).filter(Boolean),i=Ct({type:new qn(n.fields),length:this.numRows,children:r});return new hh(n,i)}};F9=Symbol.toStringTag;or[F9]=(e=>(e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(or.prototype);function HN(e,t,n=t.reduce((r,i)=>Math.max(r,i.length),0)){var r;const i=[...e.fields],s=[...t],o=(n+63&-64)>>3;for(const[a,l]of e.fields.entries()){const c=t[a];(!c||c.length!==n)&&(i[a]=l.clone({nullable:!0}),s[a]=(r=c==null?void 0:c._changeLengthAndBackfillNullBitmap(n))!==null&&r!==void 0?r:Ct({type:l.type,length:n,nullCount:n,nullBitmap:new Uint8Array(o)}))}return[e.assign(i),Ct({type:new qn(i),length:n,children:s})]}function B9(e,t,n=new Map){var r,i;if(((r=e==null?void 0:e.length)!==null&&r!==void 0?r:0)>0&&(e==null?void 0:e.length)===(t==null?void 0:t.length))for(let s=-1,o=e.length;++s<o;){const{type:a}=e[s],l=t[s];for(const c of[l,...((i=l==null?void 0:l.dictionary)===null||i===void 0?void 0:i.data)||[]])B9(a.children,c==null?void 0:c.children,n);if(at.isDictionary(a)){const{id:c}=a;if(!n.has(c))l!=null&&l.dictionary&&n.set(c,l.dictionary);else if(n.get(c)!==l.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}}return n}class OT extends or{constructor(t){const n=t.fields.map(i=>Ct({type:i.type})),r=Ct({type:new qn(t.fields),nullCount:0,children:n});super(t,r)}}var hb;(function(e){e[e.BUFFER=0]="BUFFER"})(hb||(hb={}));var pb;(function(e){e[e.LZ4_FRAME=0]="LZ4_FRAME",e[e.ZSTD=1]="ZSTD"})(pb||(pb={}));class ca{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBodyCompression(t,n){return(n||new ca).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBodyCompression(t,n){return t.setPosition(t.position()+fe),(n||new ca).__init(t.readInt32(t.position())+t.position(),t)}codec(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt8(this.bb_pos+t):pb.LZ4_FRAME}method(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt8(this.bb_pos+t):hb.BUFFER}static startBodyCompression(t){t.startObject(2)}static addCodec(t,n){t.addFieldInt8(0,n,pb.LZ4_FRAME)}static addMethod(t,n){t.addFieldInt8(1,n,hb.BUFFER)}static endBodyCompression(t){return t.endObject()}static createBodyCompression(t,n,r){return ca.startBodyCompression(t),ca.addCodec(t,n),ca.addMethod(t,r),ca.endBodyCompression(t)}}class R9{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(t,n,r){return t.prep(8,16),t.writeInt64(BigInt(r??0)),t.writeInt64(BigInt(n??0)),t.offset()}}let L9=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(t,n,r){return t.prep(8,16),t.writeInt64(BigInt(r??0)),t.writeInt64(BigInt(n??0)),t.offset()}},uo=class Ox{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsRecordBatch(t,n){return(n||new Ox).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsRecordBatch(t,n){return t.setPosition(t.position()+fe),(n||new Ox).__init(t.readInt32(t.position())+t.position(),t)}length(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}nodes(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new L9).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}nodesLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}buffers(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new R9).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}buffersLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}compression(t){const n=this.bb.__offset(this.bb_pos,10);return n?(t||new ca).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}static startRecordBatch(t){t.startObject(4)}static addLength(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addNodes(t,n){t.addFieldOffset(1,n,0)}static startNodesVector(t,n){t.startVector(16,n,8)}static addBuffers(t,n){t.addFieldOffset(2,n,0)}static startBuffersVector(t,n){t.startVector(16,n,8)}static addCompression(t,n){t.addFieldOffset(3,n,0)}static endRecordBatch(t){return t.endObject()}},du=class Fx{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryBatch(t,n){return(n||new Fx).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryBatch(t,n){return t.setPosition(t.position()+fe),(n||new Fx).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}data(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new uo).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isDelta(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startDictionaryBatch(t){t.startObject(3)}static addId(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addData(t,n){t.addFieldOffset(1,n,0)}static addIsDelta(t,n){t.addFieldInt8(2,+n,0)}static endDictionaryBatch(t){return t.endObject()}};var yb;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(yb||(yb={}));let ta=class os{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMessage(t,n){return(n||new os).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMessage(t,n){return t.setPosition(t.position()+fe),(n||new os).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Yf.V1}headerType(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):yb.NONE}header(t){const n=this.bb.__offset(this.bb_pos,8);return n?this.bb.__union(t,this.bb_pos+n):null}bodyLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new on).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startMessage(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,Yf.V1)}static addHeaderType(t,n){t.addFieldInt8(1,n,yb.NONE)}static addHeader(t,n){t.addFieldOffset(2,n,0)}static addBodyLength(t,n){t.addFieldInt64(3,n,BigInt("0"))}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endMessage(t){return t.endObject()}static finishMessageBuffer(t,n){t.finish(n)}static finishSizePrefixedMessageBuffer(t,n){t.finish(n,void 0,!0)}static createMessage(t,n,r,i,s,o){return os.startMessage(t),os.addVersion(t,n),os.addHeaderType(t,r),os.addHeader(t,i),os.addBodyLength(t,s),os.addCustomMetadata(t,o),os.endMessage(t)}};class egt extends Ft{visit(t,n){return t==null||n==null?void 0:super.visit(t,n)}visitNull(t,n){return Xl.startNull(n),Xl.endNull(n)}visitInt(t,n){return Ar.startInt(n),Ar.addBitWidth(n,t.bitWidth),Ar.addIsSigned(n,t.isSigned),Ar.endInt(n)}visitFloat(t,n){return xs.startFloatingPoint(n),xs.addPrecision(n,t.precision),xs.endFloatingPoint(n)}visitBinary(t,n){return Wl.startBinary(n),Wl.endBinary(n)}visitBool(t,n){return Hl.startBool(n),Hl.endBool(n)}visitUtf8(t,n){return Kl.startUtf8(n),Kl.endUtf8(n)}visitDecimal(t,n){return rr.startDecimal(n),rr.addScale(n,t.scale),rr.addPrecision(n,t.precision),rr.addBitWidth(n,t.bitWidth),rr.endDecimal(n)}visitDate(t,n){return _m.startDate(n),_m.addUnit(n,t.unit),_m.endDate(n)}visitTime(t,n){return ti.startTime(n),ti.addUnit(n,t.unit),ti.addBitWidth(n,t.bitWidth),ti.endTime(n)}visitTimestamp(t,n){const r=t.timezone&&n.createString(t.timezone)||void 0;return ei.startTimestamp(n),ei.addUnit(n,t.unit),r!==void 0&&ei.addTimezone(n,r),ei.endTimestamp(n)}visitInterval(t,n){return Is.startInterval(n),Is.addUnit(n,t.unit),Is.endInterval(n)}visitDuration(t,n){return ws.startDuration(n),ws.addUnit(n,t.unit),ws.endDuration(n)}visitList(t,n){return Gl.startList(n),Gl.endList(n)}visitStruct(t,n){return Ql.startStruct_(n),Ql.endStruct_(n)}visitUnion(t,n){sr.startTypeIdsVector(n,t.typeIds.length);const r=sr.createTypeIdsVector(n,t.typeIds);return sr.startUnion(n),sr.addMode(n,t.mode),sr.addTypeIds(n,r),sr.endUnion(n)}visitDictionary(t,n){const r=this.visit(t.indices,n);return mo.startDictionaryEncoding(n),mo.addId(n,BigInt(t.id)),mo.addIsOrdered(n,t.isOrdered),r!==void 0&&mo.addIndexType(n,r),mo.endDictionaryEncoding(n)}visitFixedSizeBinary(t,n){return _s.startFixedSizeBinary(n),_s.addByteWidth(n,t.byteWidth),_s.endFixedSizeBinary(n)}visitFixedSizeList(t,n){return Ss.startFixedSizeList(n),Ss.addListSize(n,t.listSize),Ss.endFixedSizeList(n)}visitMap(t,n){return Sm.startMap(n),Sm.addKeysSorted(n,t.keysSorted),Sm.endMap(n)}}const R_=new egt;function ngt(e,t=new Map){return new se(igt(e,t),Em(e.metadata),t)}function C9(e){return new zr(e.count,U9(e.columns),P9(e.columns))}function rgt(e){return new zs(C9(e.data),e.id,e.isDelta)}function igt(e,t){return(e.fields||[]).filter(Boolean).map(n=>Ie.fromJSON(n,t))}function GN(e,t){return(e.children||[]).filter(Boolean).map(n=>Ie.fromJSON(n,t))}function U9(e){return(e||[]).reduce((t,n)=>[...t,new Za(n.count,sgt(n.VALIDITY)),...U9(n.children)],[])}function P9(e,t=[]){for(let n=-1,r=(e||[]).length;++n<r;){const i=e[n];i.VALIDITY&&t.push(new $s(t.length,i.VALIDITY.length)),i.TYPE_ID&&t.push(new $s(t.length,i.TYPE_ID.length)),i.OFFSET&&t.push(new $s(t.length,i.OFFSET.length)),i.DATA&&t.push(new $s(t.length,i.DATA.length)),t=P9(i.children,t)}return t}function sgt(e){return(e||[]).reduce((t,n)=>t+ +(n===0),0)}function ogt(e,t){let n,r,i,s,o,a;return!t||!(s=e.dictionary)?(o=QN(e,GN(e,t)),i=new Ie(e.name,o,e.nullable,Em(e.metadata))):t.has(n=s.id)?(r=(r=s.indexType)?XN(r):new Op,a=new Vf(t.get(n),r,n,s.isOrdered),i=new Ie(e.name,a,e.nullable,Em(e.metadata))):(r=(r=s.indexType)?XN(r):new Op,t.set(n,o=QN(e,GN(e,t))),a=new Vf(o,r,n,s.isOrdered),i=new Ie(e.name,a,e.nullable,Em(e.metadata))),i||null}function Em(e=[]){return new Map(e.map(({key:t,value:n})=>[t,n]))}function XN(e){return new Ga(e.isSigned,e.bitWidth)}function QN(e,t){const n=e.type.name;switch(n){case"NONE":return new Ha;case"null":return new Ha;case"binary":return new V1;case"utf8":return new Y1;case"bool":return new q1;case"list":return new K1((t||[])[0]);case"struct":return new qn(t||[]);case"struct_":return new qn(t||[])}switch(n){case"int":{const r=e.type;return new Ga(r.isSigned,r.bitWidth)}case"floatingpoint":{const r=e.type;return new Fp(nn[r.precision])}case"decimal":{const r=e.type;return new W1(r.scale,r.precision,r.bitWidth)}case"date":{const r=e.type;return new H1(Pr[r.unit])}case"time":{const r=e.type;return new Bp(rt[r.unit],r.bitWidth)}case"timestamp":{const r=e.type;return new G1(rt[r.unit],r.timezone)}case"interval":{const r=e.type;return new X1(yr[r.unit])}case"duration":{const r=e.type;return new Q1(rt[r.unit])}case"union":{const r=e.type,[i,...s]=(r.mode+"").toLowerCase(),o=i.toUpperCase()+s.join("");return new Z1(ln[o],r.typeIds||[],t||[])}case"fixedsizebinary":{const r=e.type;return new J1(r.byteWidth)}case"fixedsizelist":{const r=e.type;return new tb(r.listSize,(t||[])[0])}case"map":{const r=e.type;return new eb((t||[])[0],r.keysSorted)}}throw new Error(`Unrecognized type: "${n}"`)}var agt=BO,lgt=xf;class Wn{static fromJSON(t,n){const r=new Wn(0,Sn.V5,n);return r._createHeader=cgt(t,n),r}static decode(t){t=new lgt(Zt(t));const n=ta.getRootAsMessage(t),r=n.bodyLength(),i=n.version(),s=n.headerType(),o=new Wn(r,i,s);return o._createHeader=ugt(n,s),o}static encode(t){const n=new agt;let r=-1;return t.isSchema()?r=se.encode(n,t.header()):t.isRecordBatch()?r=zr.encode(n,t.header()):t.isDictionaryBatch()&&(r=zs.encode(n,t.header())),ta.startMessage(n),ta.addVersion(n,Sn.V5),ta.addHeader(n,r),ta.addHeaderType(n,t.headerType),ta.addBodyLength(n,BigInt(t.bodyLength)),ta.finishMessageBuffer(n,ta.endMessage(n)),n.asUint8Array()}static from(t,n=0){if(t instanceof se)return new Wn(0,Sn.V5,re.Schema,t);if(t instanceof zr)return new Wn(n,Sn.V5,re.RecordBatch,t);if(t instanceof zs)return new Wn(n,Sn.V5,re.DictionaryBatch,t);throw new Error(`Unrecognized Message header: ${t}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===re.Schema}isRecordBatch(){return this.headerType===re.RecordBatch}isDictionaryBatch(){return this.headerType===re.DictionaryBatch}constructor(t,n,r,i){this._version=n,this._headerType=r,this.body=new Uint8Array(0),i&&(this._createHeader=()=>i),this._bodyLength=Gi(t)}}class zr{get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}constructor(t,n,r){this._nodes=n,this._buffers=r,this._length=Gi(t)}}class zs{get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}constructor(t,n,r=!1){this._data=t,this._isDelta=r,this._id=Gi(n)}}class $s{constructor(t,n){this.offset=Gi(t),this.length=Gi(n)}}class Za{constructor(t,n){this.length=Gi(t),this.nullCount=Gi(n)}}function cgt(e,t){return()=>{switch(t){case re.Schema:return se.fromJSON(e);case re.RecordBatch:return zr.fromJSON(e);case re.DictionaryBatch:return zs.fromJSON(e)}throw new Error(`Unrecognized Message type: { name: ${re[t]}, type: ${t} }`)}}function ugt(e,t){return()=>{switch(t){case re.Schema:return se.decode(e.header(new us),new Map,e.version());case re.RecordBatch:return zr.decode(e.header(new uo),e.version());case re.DictionaryBatch:return zs.decode(e.header(new du),e.version())}throw new Error(`Unrecognized Message type: { name: ${re[t]}, type: ${t} }`)}}Ie.encode=_gt;Ie.decode=vgt;Ie.fromJSON=ogt;se.encode=wgt;se.decode=fgt;se.fromJSON=ngt;zr.encode=Sgt;zr.decode=dgt;zr.fromJSON=C9;zs.encode=xgt;zs.decode=hgt;zs.fromJSON=rgt;Za.encode=Igt;Za.decode=ygt;$s.encode=Egt;$s.decode=pgt;function fgt(e,t=new Map,n=Sn.V5){const r=bgt(e,t);return new se(r,Tm(e),t,n)}function dgt(e,t=Sn.V5){if(e.compression()!==null)throw new Error("Record batch compression not implemented");return new zr(e.length(),mgt(e),ggt(e,t))}function hgt(e,t=Sn.V5){return new zs(zr.decode(e.data(),t),e.id(),e.isDelta())}function pgt(e){return new $s(e.offset(),e.length())}function ygt(e){return new Za(e.length(),e.nullCount())}function mgt(e){const t=[];for(let n,r=-1,i=-1,s=e.nodesLength();++r<s;)(n=e.nodes(r))&&(t[++i]=Za.decode(n));return t}function ggt(e,t){const n=[];for(let r,i=-1,s=-1,o=e.buffersLength();++i<o;)(r=e.buffers(i))&&(t<Sn.V4&&(r.bb_pos+=8*(i+1)),n[++s]=$s.decode(r));return n}function bgt(e,t){const n=[];for(let r,i=-1,s=-1,o=e.fieldsLength();++i<o;)(r=e.fields(i))&&(n[++s]=Ie.decode(r,t));return n}function KN(e,t){const n=[];for(let r,i=-1,s=-1,o=e.childrenLength();++i<o;)(r=e.children(i))&&(n[++s]=Ie.decode(r,t));return n}function vgt(e,t){let n,r,i,s,o,a;return!t||!(a=e.dictionary())?(i=JN(e,KN(e,t)),r=new Ie(e.name(),i,e.nullable(),Tm(e))):t.has(n=Gi(a.id()))?(s=(s=a.indexType())?ZN(s):new Op,o=new Vf(t.get(n),s,n,a.isOrdered()),r=new Ie(e.name(),o,e.nullable(),Tm(e))):(s=(s=a.indexType())?ZN(s):new Op,t.set(n,i=JN(e,KN(e,t))),o=new Vf(i,s,n,a.isOrdered()),r=new Ie(e.name(),o,e.nullable(),Tm(e))),r||null}function Tm(e){const t=new Map;if(e)for(let n,r,i=-1,s=Math.trunc(e.customMetadataLength());++i<s;)(n=e.customMetadata(i))&&(r=n.key())!=null&&t.set(r,n.value());return t}function ZN(e){return new Ga(e.isSigned(),e.bitWidth())}function JN(e,t){const n=e.typeType();switch(n){case Te.NONE:return new Ha;case Te.Null:return new Ha;case Te.Binary:return new V1;case Te.Utf8:return new Y1;case Te.Bool:return new q1;case Te.List:return new K1((t||[])[0]);case Te.Struct_:return new qn(t||[])}switch(n){case Te.Int:{const r=e.type(new Ar);return new Ga(r.isSigned(),r.bitWidth())}case Te.FloatingPoint:{const r=e.type(new xs);return new Fp(r.precision())}case Te.Decimal:{const r=e.type(new rr);return new W1(r.scale(),r.precision(),r.bitWidth())}case Te.Date:{const r=e.type(new _m);return new H1(r.unit())}case Te.Time:{const r=e.type(new ti);return new Bp(r.unit(),r.bitWidth())}case Te.Timestamp:{const r=e.type(new ei);return new G1(r.unit(),r.timezone())}case Te.Interval:{const r=e.type(new Is);return new X1(r.unit())}case Te.Duration:{const r=e.type(new ws);return new Q1(r.unit())}case Te.Union:{const r=e.type(new sr);return new Z1(r.mode(),r.typeIdsArray()||[],t||[])}case Te.FixedSizeBinary:{const r=e.type(new _s);return new J1(r.byteWidth())}case Te.FixedSizeList:{const r=e.type(new Ss);return new tb(r.listSize(),(t||[])[0])}case Te.Map:{const r=e.type(new Sm);return new eb((t||[])[0],r.keysSorted())}}throw new Error(`Unrecognized type: "${Te[n]}" (${n})`)}function wgt(e,t){const n=t.fields.map(s=>Ie.encode(e,s));us.startFieldsVector(e,n.length);const r=us.createFieldsVector(e,n),i=t.metadata&&t.metadata.size>0?us.createCustomMetadataVector(e,[...t.metadata].map(([s,o])=>{const a=e.createString(`${s}`),l=e.createString(`${o}`);return on.startKeyValue(e),on.addKey(e,a),on.addValue(e,l),on.endKeyValue(e)})):-1;return us.startSchema(e),us.addFields(e,r),us.addEndianness(e,Tgt?qf.Little:qf.Big),i!==-1&&us.addCustomMetadata(e,i),us.endSchema(e)}function _gt(e,t){let n=-1,r=-1,i=-1;const s=t.type;let o=t.typeId;at.isDictionary(s)?(o=s.dictionary.typeId,i=R_.visit(s,e),r=R_.visit(s.dictionary,e)):r=R_.visit(s,e);const a=(s.children||[]).map(u=>Ie.encode(e,u)),l=Xr.createChildrenVector(e,a),c=t.metadata&&t.metadata.size>0?Xr.createCustomMetadataVector(e,[...t.metadata].map(([u,f])=>{const d=e.createString(`${u}`),h=e.createString(`${f}`);return on.startKeyValue(e),on.addKey(e,d),on.addValue(e,h),on.endKeyValue(e)})):-1;return t.name&&(n=e.createString(t.name)),Xr.startField(e),Xr.addType(e,r),Xr.addTypeType(e,o),Xr.addChildren(e,l),Xr.addNullable(e,!!t.nullable),n!==-1&&Xr.addName(e,n),i!==-1&&Xr.addDictionary(e,i),c!==-1&&Xr.addCustomMetadata(e,c),Xr.endField(e)}function Sgt(e,t){const n=t.nodes||[],r=t.buffers||[];uo.startNodesVector(e,n.length);for(const o of n.slice().reverse())Za.encode(e,o);const i=e.endVector();uo.startBuffersVector(e,r.length);for(const o of r.slice().reverse())$s.encode(e,o);const s=e.endVector();return uo.startRecordBatch(e),uo.addLength(e,BigInt(t.length)),uo.addNodes(e,i),uo.addBuffers(e,s),uo.endRecordBatch(e)}function xgt(e,t){const n=zr.encode(e,t.data);return du.startDictionaryBatch(e),du.addId(e,BigInt(t.id)),du.addIsDelta(e,t.isDelta),du.addData(e,n),du.endDictionaryBatch(e)}function Igt(e,t){return L9.createFieldNode(e,BigInt(t.length),BigInt(t.nullCount))}function Egt(e,t){return R9.createBuffer(e,BigInt(t.offset),BigInt(t.length))}const Tgt=(()=>{const e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),new Int16Array(e)[0]===256})(),FT=e=>`Expected ${re[e]} Message in stream, but was null or length 0.`,BT=e=>`Header pointer of flatbuffer-encoded ${re[e]} Message is null or length 0.`,z9=(e,t)=>`Expected to read ${e} metadata bytes, but only read ${t}.`,j9=(e,t)=>`Expected to read ${e} bytes for message body, but only read ${t}.`;class V9{constructor(t){this.source=t instanceof fb?t:new fb(t)}[Symbol.iterator](){return this}next(){let t;return(t=this.readMetadataLength()).done||t.value===-1&&(t=this.readMetadataLength()).done||(t=this.readMetadata(t.value)).done?Ce:t}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}readMessage(t){let n;if((n=this.next()).done)return null;if(t!=null&&n.value.headerType!==t)throw new Error(FT(t));return n.value}readMessageBody(t){if(t<=0)return new Uint8Array(0);const n=Zt(this.source.read(t));if(n.byteLength<t)throw new Error(j9(t,n.byteLength));return n.byteOffset%8===0&&n.byteOffset+n.byteLength<=n.buffer.byteLength?n:n.slice()}readSchema(t=!1){const n=re.Schema,r=this.readMessage(n),i=r==null?void 0:r.header();if(t&&!i)throw new Error(BT(n));return i}readMetadataLength(){const t=this.source.read(Qv),n=t&&new xf(t),r=(n==null?void 0:n.readInt32(0))||0;return{done:r===0,value:r}}readMetadata(t){const n=this.source.read(t);if(!n)return Ce;if(n.byteLength<t)throw new Error(z9(t,n.byteLength));return{done:!1,value:Wn.decode(n)}}}class Agt{constructor(t,n){this.source=t instanceof Wf?t:rP(t)?new db(t,n):new Wf(t)}[Symbol.asyncIterator](){return this}next(){return W(this,void 0,void 0,function*(){let t;return(t=yield this.readMetadataLength()).done||t.value===-1&&(t=yield this.readMetadataLength()).done||(t=yield this.readMetadata(t.value)).done?Ce:t})}throw(t){return W(this,void 0,void 0,function*(){return yield this.source.throw(t)})}return(t){return W(this,void 0,void 0,function*(){return yield this.source.return(t)})}readMessage(t){return W(this,void 0,void 0,function*(){let n;if((n=yield this.next()).done)return null;if(t!=null&&n.value.headerType!==t)throw new Error(FT(t));return n.value})}readMessageBody(t){return W(this,void 0,void 0,function*(){if(t<=0)return new Uint8Array(0);const n=Zt(yield this.source.read(t));if(n.byteLength<t)throw new Error(j9(t,n.byteLength));return n.byteOffset%8===0&&n.byteOffset+n.byteLength<=n.buffer.byteLength?n:n.slice()})}readSchema(t=!1){return W(this,void 0,void 0,function*(){const n=re.Schema,r=yield this.readMessage(n),i=r==null?void 0:r.header();if(t&&!i)throw new Error(BT(n));return i})}readMetadataLength(){return W(this,void 0,void 0,function*(){const t=yield this.source.read(Qv),n=t&&new xf(t),r=(n==null?void 0:n.readInt32(0))||0;return{done:r===0,value:r}})}readMetadata(t){return W(this,void 0,void 0,function*(){const n=yield this.source.read(t);if(!n)return Ce;if(n.byteLength<t)throw new Error(z9(t,n.byteLength));return{done:!1,value:Wn.decode(n)}})}}class Mgt extends V9{constructor(t){super(new Uint8Array(0)),this._schema=!1,this._body=[],this._batchIndex=0,this._dictionaryIndex=0,this._json=t instanceof qN?t:new qN(t)}next(){const{_json:t}=this;if(!this._schema)return this._schema=!0,{done:!1,value:Wn.fromJSON(t.schema,re.Schema)};if(this._dictionaryIndex<t.dictionaries.length){const n=t.dictionaries[this._dictionaryIndex++];return this._body=n.data.columns,{done:!1,value:Wn.fromJSON(n,re.DictionaryBatch)}}if(this._batchIndex<t.batches.length){const n=t.batches[this._batchIndex++];return this._body=n.columns,{done:!1,value:Wn.fromJSON(n,re.RecordBatch)}}return this._body=[],Ce}readMessageBody(t){return n(this._body);function n(r){return(r||[]).reduce((i,s)=>[...i,...s.VALIDITY&&[s.VALIDITY]||[],...s.TYPE_ID&&[s.TYPE_ID]||[],...s.OFFSET&&[s.OFFSET]||[],...s.DATA&&[s.DATA]||[],...n(s.children)],[])}}readMessage(t){let n;if((n=this.next()).done)return null;if(t!=null&&n.value.headerType!==t)throw new Error(FT(t));return n.value}readSchema(){const t=re.Schema,n=this.readMessage(t),r=n==null?void 0:n.header();if(!n||!r)throw new Error(BT(t));return r}}const Qv=4,Bx="ARROW1",Lp=new Uint8Array(Bx.length);for(let e=0;e<Bx.length;e+=1)Lp[e]=Bx.codePointAt(e);function RT(e,t=0){for(let n=-1,r=Lp.length;++n<r;)if(Lp[n]!==e[t+n])return!1;return!0}const Cy=Lp.length,Y9=Cy+Qv,$gt=Cy*2+Qv;class hi extends MT{constructor(t){super(),this._impl=t}get closed(){return this._impl.closed}get schema(){return this._impl.schema}get autoDestroy(){return this._impl.autoDestroy}get dictionaries(){return this._impl.dictionaries}get numDictionaries(){return this._impl.numDictionaries}get numRecordBatches(){return this._impl.numRecordBatches}get footer(){return this._impl.isFile()?this._impl.footer:null}isSync(){return this._impl.isSync()}isAsync(){return this._impl.isAsync()}isFile(){return this._impl.isFile()}isStream(){return this._impl.isStream()}next(){return this._impl.next()}throw(t){return this._impl.throw(t)}return(t){return this._impl.return(t)}cancel(){return this._impl.cancel()}reset(t){return this._impl.reset(t),this._DOMStream=void 0,this._nodeStream=void 0,this}open(t){const n=this._impl.open(t);return Mc(n)?n.then(()=>this):this}readRecordBatch(t){return this._impl.isFile()?this._impl.readRecordBatch(t):null}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}toDOMStream(){return Kr.toDOMStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this})}toNodeStream(){return Kr.toNodeStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this},{objectMode:!0})}static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,n){throw new Error('"throughDOM" not available in this environment')}static from(t){return t instanceof hi?t:Ax(t)?Ogt(t):rP(t)?Rgt(t):Mc(t)?W(this,void 0,void 0,function*(){return yield hi.from(yield t)}):iP(t)||mT(t)||sP(t)||bd(t)?Bgt(new Wf(t)):Fgt(new fb(t))}static readAll(t){return t instanceof hi?t.isSync()?t4(t):e4(t):Ax(t)||ArrayBuffer.isView(t)||Oy(t)||nP(t)?t4(t):e4(t)}}class mb extends hi{constructor(t){super(t),this._impl=t}readAll(){return[...this]}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return en(this,arguments,function*(){yield K(yield*Ma(Fr(this[Symbol.iterator]())))})}}class gb extends hi{constructor(t){super(t),this._impl=t}readAll(){var t,n,r,i;return W(this,void 0,void 0,function*(){const s=new Array;try{for(var o=!0,a=Fr(this),l;l=yield a.next(),t=l.done,!t;o=!0){i=l.value,o=!1;const c=i;s.push(c)}}catch(c){n={error:c}}finally{try{!o&&!t&&(r=a.return)&&(yield r.call(a))}finally{if(n)throw n.error}}return s})}[Symbol.iterator](){throw new Error("AsyncRecordBatchStreamReader is not Iterable")}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}}class q9 extends mb{constructor(t){super(t),this._impl=t}}class Ngt extends gb{constructor(t){super(t),this._impl=t}}class W9{get numDictionaries(){return this._dictionaryIndex}get numRecordBatches(){return this._recordBatchIndex}constructor(t=new Map){this.closed=!1,this.autoDestroy=!0,this._dictionaryIndex=0,this._recordBatchIndex=0,this.dictionaries=t}isSync(){return!1}isAsync(){return!1}isFile(){return!1}isStream(){return!1}reset(t){return this._dictionaryIndex=0,this._recordBatchIndex=0,this.schema=t,this.dictionaries=new Map,this}_loadRecordBatch(t,n){const r=this._loadVectors(t,n,this.schema.fields),i=Ct({type:new qn(this.schema.fields),length:t.length,children:r});return new or(this.schema,i)}_loadDictionaryBatch(t,n){const{id:r,isDelta:i}=t,{dictionaries:s,schema:o}=this,a=s.get(r);if(i||!a){const l=o.dictionaries.get(r),c=this._loadVectors(t.data,n,[l]);return(a&&i?a.concat(new ie(c)):new ie(c)).memoize()}return a.memoize()}_loadVectors(t,n,r){return new k9(n,t.nodes,t.buffers,this.dictionaries,this.schema.metadataVersion).visitMany(r)}}class bb extends W9{constructor(t,n){super(n),this._reader=Ax(t)?new Mgt(this._handle=t):new V9(this._handle=t)}isSync(){return!0}isStream(){return!0}[Symbol.iterator](){return this}cancel(){!this.closed&&(this.closed=!0)&&(this.reset()._reader.return(),this._reader=null,this.dictionaries=null)}open(t){return this.closed||(this.autoDestroy=G9(this,t),this.schema||(this.schema=this._reader.readSchema())||this.cancel()),this}throw(t){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.throw(t):Ce}return(t){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.return(t):Ce}next(){if(this.closed)return Ce;let t;const{_reader:n}=this;for(;t=this._readNextMessageAndValidate();)if(t.isSchema())this.reset(t.header());else if(t.isRecordBatch()){this._recordBatchIndex++;const r=t.header(),i=n.readMessageBody(t.bodyLength);return{done:!1,value:this._loadRecordBatch(r,i)}}else if(t.isDictionaryBatch()){this._dictionaryIndex++;const r=t.header(),i=n.readMessageBody(t.bodyLength),s=this._loadDictionaryBatch(r,i);this.dictionaries.set(r.id,s)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new OT(this.schema)}):this.return()}_readNextMessageAndValidate(t){return this._reader.readMessage(t)}}class vb extends W9{constructor(t,n){super(n),this._reader=new Agt(this._handle=t)}isAsync(){return!0}isStream(){return!0}[Symbol.asyncIterator](){return this}cancel(){return W(this,void 0,void 0,function*(){!this.closed&&(this.closed=!0)&&(yield this.reset()._reader.return(),this._reader=null,this.dictionaries=null)})}open(t){return W(this,void 0,void 0,function*(){return this.closed||(this.autoDestroy=G9(this,t),this.schema||(this.schema=yield this._reader.readSchema())||(yield this.cancel())),this})}throw(t){return W(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.throw(t):Ce})}return(t){return W(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.return(t):Ce})}next(){return W(this,void 0,void 0,function*(){if(this.closed)return Ce;let t;const{_reader:n}=this;for(;t=yield this._readNextMessageAndValidate();)if(t.isSchema())yield this.reset(t.header());else if(t.isRecordBatch()){this._recordBatchIndex++;const r=t.header(),i=yield n.readMessageBody(t.bodyLength);return{done:!1,value:this._loadRecordBatch(r,i)}}else if(t.isDictionaryBatch()){this._dictionaryIndex++;const r=t.header(),i=yield n.readMessageBody(t.bodyLength),s=this._loadDictionaryBatch(r,i);this.dictionaries.set(r.id,s)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new OT(this.schema)}):yield this.return()})}_readNextMessageAndValidate(t){return W(this,void 0,void 0,function*(){return yield this._reader.readMessage(t)})}}class H9 extends bb{get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}constructor(t,n){super(t instanceof WN?t:new WN(t),n)}isSync(){return!0}isFile(){return!0}open(t){if(!this.closed&&!this._footer){this.schema=(this._footer=this._readFooter()).schema;for(const n of this._footer.dictionaryBatches())n&&this._readDictionaryBatch(this._dictionaryIndex++)}return super.open(t)}readRecordBatch(t){var n;if(this.closed)return null;this._footer||this.open();const r=(n=this._footer)===null||n===void 0?void 0:n.getRecordBatch(t);if(r&&this._handle.seek(r.offset)){const i=this._reader.readMessage(re.RecordBatch);if(i!=null&&i.isRecordBatch()){const s=i.header(),o=this._reader.readMessageBody(i.bodyLength);return this._loadRecordBatch(s,o)}}return null}_readDictionaryBatch(t){var n;const r=(n=this._footer)===null||n===void 0?void 0:n.getDictionaryBatch(t);if(r&&this._handle.seek(r.offset)){const i=this._reader.readMessage(re.DictionaryBatch);if(i!=null&&i.isDictionaryBatch()){const s=i.header(),o=this._reader.readMessageBody(i.bodyLength),a=this._loadDictionaryBatch(s,o);this.dictionaries.set(s.id,a)}}}_readFooter(){const{_handle:t}=this,n=t.size-Y9,r=t.readInt32(n),i=t.readAt(n-r,r);return Rp.decode(i)}_readNextMessageAndValidate(t){var n;if(this._footer||this.open(),this._footer&&this._recordBatchIndex<this.numRecordBatches){const r=(n=this._footer)===null||n===void 0?void 0:n.getRecordBatch(this._recordBatchIndex);if(r&&this._handle.seek(r.offset))return this._reader.readMessage(t)}return null}}class Dgt extends vb{get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}constructor(t,...n){const r=typeof n[0]!="number"?n.shift():void 0,i=n[0]instanceof Map?n.shift():void 0;super(t instanceof db?t:new db(t,r),i)}isFile(){return!0}isAsync(){return!0}open(t){const n=Object.create(null,{open:{get:()=>super.open}});return W(this,void 0,void 0,function*(){if(!this.closed&&!this._footer){this.schema=(this._footer=yield this._readFooter()).schema;for(const r of this._footer.dictionaryBatches())r&&(yield this._readDictionaryBatch(this._dictionaryIndex++))}return yield n.open.call(this,t)})}readRecordBatch(t){var n;return W(this,void 0,void 0,function*(){if(this.closed)return null;this._footer||(yield this.open());const r=(n=this._footer)===null||n===void 0?void 0:n.getRecordBatch(t);if(r&&(yield this._handle.seek(r.offset))){const i=yield this._reader.readMessage(re.RecordBatch);if(i!=null&&i.isRecordBatch()){const s=i.header(),o=yield this._reader.readMessageBody(i.bodyLength);return this._loadRecordBatch(s,o)}}return null})}_readDictionaryBatch(t){var n;return W(this,void 0,void 0,function*(){const r=(n=this._footer)===null||n===void 0?void 0:n.getDictionaryBatch(t);if(r&&(yield this._handle.seek(r.offset))){const i=yield this._reader.readMessage(re.DictionaryBatch);if(i!=null&&i.isDictionaryBatch()){const s=i.header(),o=yield this._reader.readMessageBody(i.bodyLength),a=this._loadDictionaryBatch(s,o);this.dictionaries.set(s.id,a)}}})}_readFooter(){return W(this,void 0,void 0,function*(){const{_handle:t}=this;t._pending&&(yield t._pending);const n=t.size-Y9,r=yield t.readInt32(n),i=yield t.readAt(n-r,r);return Rp.decode(i)})}_readNextMessageAndValidate(t){return W(this,void 0,void 0,function*(){if(this._footer||(yield this.open()),this._footer&&this._recordBatchIndex<this.numRecordBatches){const n=this._footer.getRecordBatch(this._recordBatchIndex);if(n&&(yield this._handle.seek(n.offset)))return yield this._reader.readMessage(t)}return null})}}class kgt extends bb{constructor(t,n){super(t,n)}_loadVectors(t,n,r){return new qmt(n,t.nodes,t.buffers,this.dictionaries,this.schema.metadataVersion).visitMany(r)}}function G9(e,t){return t&&typeof t.autoDestroy=="boolean"?t.autoDestroy:e.autoDestroy}function*t4(e){const t=hi.from(e);try{if(!t.open({autoDestroy:!1}).closed)do yield t;while(!t.reset().open().closed)}finally{t.cancel()}}function e4(e){return en(this,arguments,function*(){const n=yield K(hi.from(e));try{if(!(yield K(n.open({autoDestroy:!1}))).closed)do yield yield K(n);while(!(yield K(n.reset().open())).closed)}finally{yield K(n.cancel())}})}function Ogt(e){return new mb(new kgt(e))}function Fgt(e){const t=e.peek(Cy+7&-8);return t&&t.byteLength>=4?RT(t)?new q9(new H9(e.read())):new mb(new bb(e)):new mb(new bb(function*(){}()))}function Bgt(e){return W(this,void 0,void 0,function*(){const t=yield e.peek(Cy+7&-8);return t&&t.byteLength>=4?RT(t)?new q9(new H9(yield e.read())):new gb(new vb(e)):new gb(new vb(function(){return en(this,arguments,function*(){})}()))})}function Rgt(e){return W(this,void 0,void 0,function*(){const{size:t}=yield e.stat(),n=new db(e,t);return t>=$gt&&RT(yield n.readAt(0,Cy+7&-8))?new Ngt(new Dgt(n)):new gb(new vb(n))})}class Ze extends Ft{static assemble(...t){const n=i=>i.flatMap(s=>Array.isArray(s)?n(s):s instanceof or?s.data.children:s.data),r=new Ze;return r.visitMany(n(t)),r}constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}visit(t){if(t instanceof ie)return this.visitMany(t.data),this;const{type:n}=t;if(!at.isDictionary(n)){const{length:r}=t;if(r>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");if(at.isUnion(n))this.nodes.push(new Za(r,0));else{const{nullCount:i}=t;at.isNull(n)||Ci.call(this,i<=0?new Uint8Array(0):nb(t.offset,r,t.nullBitmap)),this.nodes.push(new Za(r,i))}}return super.visit(t)}visitNull(t){return this}visitDictionary(t){return this.visit(t.clone(t.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function Ci(e){const t=e.byteLength+7&-8;return this.buffers.push(e),this.bufferRegions.push(new $s(this._byteLength,t)),this._byteLength+=t,this}function Lgt(e){var t;const{type:n,length:r,typeIds:i,valueOffsets:s}=e;if(Ci.call(this,i),n.mode===ln.Sparse)return Rx.call(this,e);if(n.mode===ln.Dense){if(e.offset<=0)return Ci.call(this,s),Rx.call(this,e);{const o=new Int32Array(r),a=Object.create(null),l=Object.create(null);for(let c,u,f=-1;++f<r;)(c=i[f])!==void 0&&((u=a[c])===void 0&&(u=a[c]=s[f]),o[f]=s[f]-u,l[c]=((t=l[c])!==null&&t!==void 0?t:0)+1);Ci.call(this,o),this.visitMany(e.children.map((c,u)=>{const f=n.typeIds[u],d=a[f],h=l[f];return c.slice(d,Math.min(r,h))}))}}return this}function Cgt(e){let t;return e.nullCount>=e.length?Ci.call(this,new Uint8Array(0)):(t=e.values)instanceof Uint8Array?Ci.call(this,nb(e.offset,e.length,t)):Ci.call(this,rb(e.values))}function Qo(e){return Ci.call(this,e.values.subarray(0,e.length*e.stride))}function X9(e){const{length:t,values:n,valueOffsets:r}=e,{[0]:i,[t]:s}=r,o=Math.min(s-i,n.byteLength-i);return Ci.call(this,aP(-i,t+1,r)),Ci.call(this,n.subarray(i,i+o)),this}function LT(e){const{length:t,valueOffsets:n}=e;if(n){const{[0]:r,[t]:i}=n;return Ci.call(this,aP(-r,t+1,n)),this.visit(e.children[0].slice(r,i-r))}return this.visit(e.children[0])}function Rx(e){return this.visitMany(e.type.children.map((t,n)=>e.children[n]).filter(Boolean))[0]}Ze.prototype.visitBool=Cgt;Ze.prototype.visitInt=Qo;Ze.prototype.visitFloat=Qo;Ze.prototype.visitUtf8=X9;Ze.prototype.visitBinary=X9;Ze.prototype.visitFixedSizeBinary=Qo;Ze.prototype.visitDate=Qo;Ze.prototype.visitTimestamp=Qo;Ze.prototype.visitTime=Qo;Ze.prototype.visitDecimal=Qo;Ze.prototype.visitList=LT;Ze.prototype.visitStruct=Rx;Ze.prototype.visitUnion=Lgt;Ze.prototype.visitInterval=Qo;Ze.prototype.visitDuration=Qo;Ze.prototype.visitFixedSizeList=LT;Ze.prototype.visitMap=LT;class Q9 extends MT{static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,n){throw new Error('"throughDOM" not available in this environment')}constructor(t){super(),this._position=0,this._started=!1,this._sink=new Im,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,_r(t)||(t={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy=typeof t.autoDestroy=="boolean"?t.autoDestroy:!0,this._writeLegacyIpcFormat=typeof t.writeLegacyIpcFormat=="boolean"?t.writeLegacyIpcFormat:!1}toString(t=!1){return this._sink.toString(t)}toUint8Array(t=!1){return this._sink.toUint8Array(t)}writeAll(t){return Mc(t)?t.then(n=>this.writeAll(n)):bd(t)?zT(this,t):PT(this,t)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(t){return this._sink.toDOMStream(t)}toNodeStream(t){return this._sink.toNodeStream(t)}close(){return this.reset()._sink.close()}abort(t){return this.reset()._sink.abort(t)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(t=this._sink,n=null){return t===this._sink||t instanceof Im?this._sink=t:(this._sink=new Im,t&&n0t(t)?this.toDOMStream({type:"bytes"}).pipeTo(t):t&&r0t(t)&&this.toNodeStream({objectMode:!1}).pipe(t)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,(!n||!kx(n,this._schema))&&(n==null?(this._position=0,this._schema=null):(this._started=!0,this._schema=n,this._writeSchema(n))),this}write(t){let n=null;if(this._sink){if(t==null)return this.finish()&&void 0;if(t instanceof On&&!(n=t.schema))return this.finish()&&void 0;if(t instanceof or&&!(n=t.schema))return this.finish()&&void 0}else throw new Error("RecordBatchWriter is closed");if(n&&!kx(n,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,n)}t instanceof or?t instanceof OT||this._writeRecordBatch(t):t instanceof On?this.writeAll(t.batches):Oy(t)&&this.writeAll(t)}_writeMessage(t,n=8){const r=n-1,i=Wn.encode(t),s=i.byteLength,o=this._writeLegacyIpcFormat?4:8,a=s+o+r&~r,l=a-s-o;return t.headerType===re.RecordBatch?this._recordBatchBlocks.push(new Qa(a,t.bodyLength,this._position)):t.headerType===re.DictionaryBatch&&this._dictionaryBlocks.push(new Qa(a,t.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(a-o)),s>0&&this._write(i),this._writePadding(l)}_write(t){if(this._started){const n=Zt(t);n&&n.byteLength>0&&(this._sink.write(n),this._position+=n.byteLength)}return this}_writeSchema(t){return this._writeMessage(Wn.from(t))}_writeFooter(t){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(Lp)}_writePadding(t){return t>0?this._write(new Uint8Array(t)):this}_writeRecordBatch(t){const{byteLength:n,nodes:r,bufferRegions:i,buffers:s}=Ze.assemble(t),o=new zr(t.numRows,r,i),a=Wn.from(o,n);return this._writeDictionaries(t)._writeMessage(a)._writeBodyBuffers(s)}_writeDictionaryBatch(t,n,r=!1){this._dictionaryDeltaOffsets.set(n,t.length+(this._dictionaryDeltaOffsets.get(n)||0));const{byteLength:i,nodes:s,bufferRegions:o,buffers:a}=Ze.assemble(new ie([t])),l=new zr(t.length,s,o),c=new zs(l,n,r),u=Wn.from(c,i);return this._writeMessage(u)._writeBodyBuffers(a)}_writeBodyBuffers(t){let n,r,i;for(let s=-1,o=t.length;++s<o;)(n=t[s])&&(r=n.byteLength)>0&&(this._write(n),(i=(r+7&-8)-r)>0&&this._writePadding(i));return this}_writeDictionaries(t){for(let[n,r]of t.dictionaries){let i=this._dictionaryDeltaOffsets.get(n)||0;if(i===0||(r=r==null?void 0:r.slice(i)).length>0)for(const s of r.data)this._writeDictionaryBatch(s,n,i>0),i+=s.length}return this}}class CT extends Q9{static writeAll(t,n){const r=new CT(n);return Mc(t)?t.then(i=>r.writeAll(i)):bd(t)?zT(r,t):PT(r,t)}}class UT extends Q9{static writeAll(t){const n=new UT;return Mc(t)?t.then(r=>n.writeAll(r)):bd(t)?zT(n,t):PT(n,t)}constructor(){super(),this._autoDestroy=!0}_writeSchema(t){return this._writeMagic()._writePadding(2)}_writeFooter(t){const n=Rp.encode(new Rp(t,Sn.V5,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(t)._write(n)._write(Int32Array.of(n.byteLength))._writeMagic()}}function PT(e,t){let n=t;t instanceof On&&(n=t.batches,e.reset(void 0,t.schema));for(const r of n)e.write(r);return e.finish()}function zT(e,t){var n,r,i,s,o,a,l;return W(this,void 0,void 0,function*(){try{for(n=!0,r=Fr(t);i=yield r.next(),s=i.done,!s;n=!0){l=i.value,n=!1;const c=l;e.write(c)}}catch(c){o={error:c}}finally{try{!n&&!s&&(a=r.return)&&(yield a.call(r))}finally{if(o)throw o.error}}return e.finish()})}function Ugt(e,t="stream"){return(t==="stream"?CT:UT).writeAll(e).toUint8Array(!0)}var Pgt=Object.create,K9=Object.defineProperty,zgt=Object.getOwnPropertyDescriptor,jgt=Object.getOwnPropertyNames,Vgt=Object.getPrototypeOf,Ygt=Object.prototype.hasOwnProperty,qgt=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Wgt=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of jgt(t))!Ygt.call(e,i)&&i!==n&&K9(e,i,{get:()=>t[i],enumerable:!(r=zgt(t,i))||r.enumerable});return e},Hgt=(e,t,n)=>(n=e!=null?Pgt(Vgt(e)):{},Wgt(t||!e||!e.__esModule?K9(n,"default",{value:e,enumerable:!0}):n,e)),Ggt=qgt((e,t)=>{t.exports=Worker}),Xgt=(e=>(e[e.UNDEFINED=0]="UNDEFINED",e[e.AUTOMATIC=1]="AUTOMATIC",e[e.READ_ONLY=2]="READ_ONLY",e[e.READ_WRITE=3]="READ_WRITE",e))(Xgt||{}),Qgt=(e=>(e[e.IDENTIFIER=0]="IDENTIFIER",e[e.NUMERIC_CONSTANT=1]="NUMERIC_CONSTANT",e[e.STRING_CONSTANT=2]="STRING_CONSTANT",e[e.OPERATOR=3]="OPERATOR",e[e.KEYWORD=4]="KEYWORD",e[e.COMMENT=5]="COMMENT",e))(Qgt||{}),Kgt=(e=>(e[e.NONE=0]="NONE",e[e.DEBUG=1]="DEBUG",e[e.INFO=2]="INFO",e[e.WARNING=3]="WARNING",e[e.ERROR=4]="ERROR",e))(Kgt||{}),Zgt=(e=>(e[e.NONE=0]="NONE",e[e.CONNECT=1]="CONNECT",e[e.DISCONNECT=2]="DISCONNECT",e[e.OPEN=3]="OPEN",e[e.QUERY=4]="QUERY",e[e.INSTANTIATE=5]="INSTANTIATE",e))(Zgt||{}),Jgt=(e=>(e[e.NONE=0]="NONE",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR",e[e.START=3]="START",e[e.RUN=4]="RUN",e[e.CAPTURE=5]="CAPTURE",e))(Jgt||{}),t1t=(e=>(e[e.NONE=0]="NONE",e[e.WEB_WORKER=1]="WEB_WORKER",e[e.NODE_WORKER=2]="NODE_WORKER",e[e.BINDINGS=3]="BINDINGS",e[e.ASYNC_DUCKDB=4]="ASYNC_DUCKDB",e))(t1t||{}),e1t=class{constructor(e=2){this.level=e}log(e){e.level>=this.level&&console.log(e)}},n1t=(e=>(e[e.SUCCESS=0]="SUCCESS",e))(n1t||{}),r1t=class{constructor(e,t){this._bindings=e,this._conn=t}get bindings(){return this._bindings}async close(){return this._bindings.disconnect(this._conn)}useUnsafe(e){return e(this._bindings,this._conn)}async query(e){this._bindings.logger.log({timestamp:new Date,level:2,origin:4,topic:4,event:4,value:e});let t=await this._bindings.runQuery(this._conn,e),n=hi.from(t);return console.assert(n.isSync(),"Reader is not sync"),console.assert(n.isFile(),"Reader is not file"),new On(n)}async send(e){this._bindings.logger.log({timestamp:new Date,level:2,origin:4,topic:4,event:4,value:e});let t=await this._bindings.startPendingQuery(this._conn,e);for(;t==null;)t=await this._bindings.pollPendingQuery(this._conn);let n=new Z9(this._bindings,this._conn,t),r=await hi.from(n);return console.assert(r.isAsync()),console.assert(r.isStream()),r}async cancelSent(){return await this._bindings.cancelPendingQuery(this._conn)}async getTableNames(e){return await this._bindings.getTableNames(this._conn,e)}async prepare(e){let t=await this._bindings.createPrepared(this._conn,e);return new i1t(this._bindings,this._conn,t)}async insertArrowTable(e,t){let n=Ugt(e,"stream");await this.insertArrowFromIPCStream(n,t)}async insertArrowFromIPCStream(e,t){await this._bindings.insertArrowFromIPCStream(this._conn,e,t)}async insertCSVFromPath(e,t){await this._bindings.insertCSVFromPath(this._conn,e,t)}async insertJSONFromPath(e,t){await this._bindings.insertJSONFromPath(this._conn,e,t)}},Z9=class{constructor(e,t,n){this.db=e,this.conn=t,this.header=n,this._first=!0,this._depleted=!1,this._inFlight=null}async next(){if(this._first)return this._first=!1,{done:!1,value:this.header};if(this._depleted)return{done:!0,value:null};let e;return this._inFlight!=null?(e=await this._inFlight,this._inFlight=null):e=await this.db.fetchQueryResults(this.conn),this._depleted=e.length==0,this._depleted||(this._inFlight=this.db.fetchQueryResults(this.conn)),{done:this._depleted,value:e}}[Symbol.asyncIterator](){return this}},i1t=class{constructor(e,t,n){this.bindings=e,this.connectionId=t,this.statementId=n}async close(){await this.bindings.closePrepared(this.connectionId,this.statementId)}async query(...e){let t=await this.bindings.runPrepared(this.connectionId,this.statementId,e),n=hi.from(t);return console.assert(n.isSync()),console.assert(n.isFile()),new On(n)}async send(...e){let t=await this.bindings.sendPrepared(this.connectionId,this.statementId,e),n=new Z9(this.bindings,this.connectionId,t),r=await hi.from(n);return console.assert(r.isAsync()),console.assert(r.isStream()),r}},s1t=(e=>(e.CANCEL_PENDING_QUERY="CANCEL_PENDING_QUERY",e.CLOSE_PREPARED="CLOSE_PREPARED",e.COLLECT_FILE_STATISTICS="COLLECT_FILE_STATISTICS",e.CONNECT="CONNECT",e.COPY_FILE_TO_BUFFER="COPY_FILE_TO_BUFFER",e.COPY_FILE_TO_PATH="COPY_FILE_TO_PATH",e.CREATE_PREPARED="CREATE_PREPARED",e.DISCONNECT="DISCONNECT",e.DROP_FILE="DROP_FILE",e.DROP_FILES="DROP_FILES",e.EXPORT_FILE_STATISTICS="EXPORT_FILE_STATISTICS",e.FETCH_QUERY_RESULTS="FETCH_QUERY_RESULTS",e.FLUSH_FILES="FLUSH_FILES",e.GET_FEATURE_FLAGS="GET_FEATURE_FLAGS",e.GET_TABLE_NAMES="GET_TABLE_NAMES",e.GET_VERSION="GET_VERSION",e.GLOB_FILE_INFOS="GLOB_FILE_INFOS",e.INSERT_ARROW_FROM_IPC_STREAM="INSERT_ARROW_FROM_IPC_STREAM",e.INSERT_CSV_FROM_PATH="IMPORT_CSV_FROM_PATH",e.INSERT_JSON_FROM_PATH="IMPORT_JSON_FROM_PATH",e.INSTANTIATE="INSTANTIATE",e.OPEN="OPEN",e.PING="PING",e.POLL_PENDING_QUERY="POLL_PENDING_QUERY",e.REGISTER_FILE_BUFFER="REGISTER_FILE_BUFFER",e.REGISTER_FILE_HANDLE="REGISTER_FILE_HANDLE",e.REGISTER_FILE_URL="REGISTER_FILE_URL",e.RESET="RESET",e.RUN_PREPARED="RUN_PREPARED",e.RUN_QUERY="RUN_QUERY",e.SEND_PREPARED="SEND_PREPARED",e.START_PENDING_QUERY="START_PENDING_QUERY",e.TOKENIZE="TOKENIZE",e))(s1t||{}),o1t=(e=>(e.CONNECTION_INFO="CONNECTION_INFO",e.ERROR="ERROR",e.FEATURE_FLAGS="FEATURE_FLAGS",e.FILE_BUFFER="FILE_BUFFER",e.FILE_INFOS="FILE_INFOS",e.FILE_SIZE="FILE_SIZE",e.FILE_STATISTICS="FILE_STATISTICS",e.INSTANTIATE_PROGRESS="INSTANTIATE_PROGRESS",e.LOG="LOG",e.OK="OK",e.PREPARED_STATEMENT_ID="PREPARED_STATEMENT_ID",e.QUERY_PLAN="QUERY_PLAN",e.QUERY_RESULT="QUERY_RESULT",e.QUERY_RESULT_CHUNK="QUERY_RESULT_CHUNK",e.QUERY_RESULT_HEADER="QUERY_RESULT_HEADER",e.QUERY_RESULT_HEADER_OR_NULL="QUERY_RESULT_HEADER_OR_NULL",e.REGISTERED_FILE="REGISTERED_FILE",e.SCRIPT_TOKENS="SCRIPT_TOKENS",e.SUCCESS="SUCCESS",e.TABLE_NAMES="TABLE_NAMES",e.VERSION_STRING="VERSION_STRING",e))(o1t||{}),Yt=class{constructor(e,t){this.promiseResolver=()=>{},this.promiseRejecter=()=>{},this.type=e,this.data=t,this.promise=new Promise((n,r)=>{this.promiseResolver=n,this.promiseRejecter=r})}};function Am(e){switch(e.typeId){case D.Binary:return{sqlType:"binary"};case D.Bool:return{sqlType:"bool"};case D.Date:return{sqlType:"date"};case D.DateDay:return{sqlType:"date32[d]"};case D.DateMillisecond:return{sqlType:"date64[ms]"};case D.Decimal:{let t=e;return{sqlType:"decimal",precision:t.precision,scale:t.scale}}case D.Float:return{sqlType:"float"};case D.Float16:return{sqlType:"float16"};case D.Float32:return{sqlType:"float32"};case D.Float64:return{sqlType:"float64"};case D.Int:return{sqlType:"int32"};case D.Int16:return{sqlType:"int16"};case D.Int32:return{sqlType:"int32"};case D.Int64:return{sqlType:"int64"};case D.Uint16:return{sqlType:"uint16"};case D.Uint32:return{sqlType:"uint32"};case D.Uint64:return{sqlType:"uint64"};case D.Uint8:return{sqlType:"uint8"};case D.IntervalDayTime:return{sqlType:"interval[dt]"};case D.IntervalYearMonth:return{sqlType:"interval[m]"};case D.List:return{sqlType:"list",valueType:Am(e.valueType)};case D.FixedSizeBinary:return{sqlType:"fixedsizebinary",byteWidth:e.byteWidth};case D.Null:return{sqlType:"null"};case D.Utf8:return{sqlType:"utf8"};case D.Struct:return{sqlType:"struct",fields:e.children.map(t=>Lx(t.name,t.type))};case D.Map:{let t=e;return{sqlType:"map",keyType:Am(t.keyType),valueType:Am(t.valueType)}}case D.Time:return{sqlType:"time[s]"};case D.TimeMicrosecond:return{sqlType:"time[us]"};case D.TimeMillisecond:return{sqlType:"time[ms]"};case D.TimeNanosecond:return{sqlType:"time[ns]"};case D.TimeSecond:return{sqlType:"time[s]"};case D.Timestamp:return{sqlType:"timestamp",timezone:e.timezone||void 0};case D.TimestampSecond:return{sqlType:"timestamp[s]",timezone:e.timezone||void 0};case D.TimestampMicrosecond:return{sqlType:"timestamp[us]",timezone:e.timezone||void 0};case D.TimestampNanosecond:return{sqlType:"timestamp[ns]",timezone:e.timezone||void 0};case D.TimestampMillisecond:return{sqlType:"timestamp[ms]",timezone:e.timezone||void 0}}throw new Error("unsupported arrow type: ".concat(e.toString()))}function Lx(e,t){let n=Am(t);return n.name=e,n}var a1t=new TextEncoder,l1t=class{constructor(e,t=null){this._onInstantiationProgress=[],this._worker=null,this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{},this._nextMessageId=0,this._pendingRequests=new Map,this._logger=e,this._onMessageHandler=this.onMessage.bind(this),this._onErrorHandler=this.onError.bind(this),this._onCloseHandler=this.onClose.bind(this),t!=null&&this.attach(t)}get logger(){return this._logger}attach(e){this._worker=e,this._worker.addEventListener("message",this._onMessageHandler),this._worker.addEventListener("error",this._onErrorHandler),this._worker.addEventListener("close",this._onCloseHandler),this._workerShutdownPromise=new Promise((t,n)=>{this._workerShutdownResolver=t})}detach(){this._worker&&(this._worker.removeEventListener("message",this._onMessageHandler),this._worker.removeEventListener("error",this._onErrorHandler),this._worker.removeEventListener("close",this._onCloseHandler),this._worker=null,this._workerShutdownResolver(null),this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{})}async terminate(){this._worker&&(this._worker.terminate(),this._worker=null,this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{})}async postTask(e,t=[]){if(!this._worker){console.error("cannot send a message since the worker is not set!");return}let n=this._nextMessageId++;return this._pendingRequests.set(n,e),this._worker.postMessage({messageId:n,type:e.type,data:e.data},t),await e.promise}onMessage(e){var t;let n=e.data;switch(n.type){case"LOG":{this._logger.log(n.data);return}case"INSTANTIATE_PROGRESS":{for(let i of this._onInstantiationProgress)i(n.data);return}}let r=this._pendingRequests.get(n.requestId);if(!r){console.warn("unassociated response: [".concat(n.requestId,", ").concat(n.type.toString(),"]"));return}if(this._pendingRequests.delete(n.requestId),n.type=="ERROR"){let i=new Error(n.data.message);i.name=n.data.name,(t=Object.getOwnPropertyDescriptor(i,"stack"))!=null&&t.writable&&(i.stack=n.data.stack),r.promiseRejecter(i);return}switch(r.type){case"CLOSE_PREPARED":case"COLLECT_FILE_STATISTICS":case"COPY_FILE_TO_PATH":case"DISCONNECT":case"DROP_FILE":case"DROP_FILES":case"FLUSH_FILES":case"INSERT_ARROW_FROM_IPC_STREAM":case"IMPORT_CSV_FROM_PATH":case"IMPORT_JSON_FROM_PATH":case"OPEN":case"PING":case"REGISTER_FILE_BUFFER":case"REGISTER_FILE_HANDLE":case"REGISTER_FILE_URL":case"RESET":if(n.type=="OK"){r.promiseResolver(n.data);return}break;case"INSTANTIATE":if(this._onInstantiationProgress=[],n.type=="OK"){r.promiseResolver(n.data);return}break;case"GLOB_FILE_INFOS":if(n.type=="FILE_INFOS"){r.promiseResolver(n.data);return}break;case"GET_VERSION":if(n.type=="VERSION_STRING"){r.promiseResolver(n.data);return}break;case"GET_FEATURE_FLAGS":if(n.type=="FEATURE_FLAGS"){r.promiseResolver(n.data);return}break;case"GET_TABLE_NAMES":if(n.type=="TABLE_NAMES"){r.promiseResolver(n.data);return}break;case"TOKENIZE":if(n.type=="SCRIPT_TOKENS"){r.promiseResolver(n.data);return}break;case"COPY_FILE_TO_BUFFER":if(n.type=="FILE_BUFFER"){r.promiseResolver(n.data);return}break;case"EXPORT_FILE_STATISTICS":if(n.type=="FILE_STATISTICS"){r.promiseResolver(n.data);return}break;case"CONNECT":if(n.type=="CONNECTION_INFO"){r.promiseResolver(n.data);return}break;case"RUN_PREPARED":case"RUN_QUERY":if(n.type=="QUERY_RESULT"){r.promiseResolver(n.data);return}break;case"SEND_PREPARED":if(n.type=="QUERY_RESULT_HEADER"){r.promiseResolver(n.data);return}break;case"START_PENDING_QUERY":if(n.type=="QUERY_RESULT_HEADER_OR_NULL"){r.promiseResolver(n.data);return}break;case"POLL_PENDING_QUERY":if(n.type=="QUERY_RESULT_HEADER_OR_NULL"){r.promiseResolver(n.data);return}break;case"CANCEL_PENDING_QUERY":if(this._onInstantiationProgress=[],n.type=="SUCCESS"){r.promiseResolver(n.data);return}break;case"FETCH_QUERY_RESULTS":if(n.type=="QUERY_RESULT_CHUNK"){r.promiseResolver(n.data);return}break;case"CREATE_PREPARED":if(n.type=="PREPARED_STATEMENT_ID"){r.promiseResolver(n.data);return}break}r.promiseRejecter(new Error("unexpected response type: ".concat(n.type.toString())))}onError(e){console.error(e),console.error("error in duckdb worker: ".concat(e.message)),this._pendingRequests.clear()}onClose(){if(this._workerShutdownResolver(null),this._pendingRequests.size!=0){console.warn("worker terminated with ".concat(this._pendingRequests.size," pending requests"));return}this._pendingRequests.clear()}async reset(){let e=new Yt("RESET",null);return await this.postTask(e)}async ping(){let e=new Yt("PING",null);await this.postTask(e)}async dropFile(e){let t=new Yt("DROP_FILE",e);return await this.postTask(t)}async dropFiles(){let e=new Yt("DROP_FILES",null);return await this.postTask(e)}async flushFiles(){let e=new Yt("FLUSH_FILES",null);return await this.postTask(e)}async instantiate(e,t=null,n=r=>{}){this._onInstantiationProgress.push(n);let r=new Yt("INSTANTIATE",[e,t]);return await this.postTask(r)}async getVersion(){let e=new Yt("GET_VERSION",null);return await this.postTask(e)}async getFeatureFlags(){let e=new Yt("GET_FEATURE_FLAGS",null);return await this.postTask(e)}async open(e){let t=new Yt("OPEN",e);await this.postTask(t)}async tokenize(e){let t=new Yt("TOKENIZE",e);return await this.postTask(t)}async connectInternal(){let e=new Yt("CONNECT",null);return await this.postTask(e)}async connect(){let e=await this.connectInternal();return new r1t(this,e)}async disconnect(e){let t=new Yt("DISCONNECT",e);await this.postTask(t)}async runQuery(e,t){let n=new Yt("RUN_QUERY",[e,t]);return await this.postTask(n)}async startPendingQuery(e,t){let n=new Yt("START_PENDING_QUERY",[e,t]);return await this.postTask(n)}async pollPendingQuery(e){let t=new Yt("POLL_PENDING_QUERY",e);return await this.postTask(t)}async cancelPendingQuery(e){let t=new Yt("CANCEL_PENDING_QUERY",e);return await this.postTask(t)}async fetchQueryResults(e){let t=new Yt("FETCH_QUERY_RESULTS",e);return await this.postTask(t)}async getTableNames(e,t){let n=new Yt("GET_TABLE_NAMES",[e,t]);return await this.postTask(n)}async createPrepared(e,t){let n=new Yt("CREATE_PREPARED",[e,t]);return await this.postTask(n)}async closePrepared(e,t){let n=new Yt("CLOSE_PREPARED",[e,t]);await this.postTask(n)}async runPrepared(e,t,n){let r=new Yt("RUN_PREPARED",[e,t,n]);return await this.postTask(r)}async sendPrepared(e,t,n){let r=new Yt("SEND_PREPARED",[e,t,n]);return await this.postTask(r)}async globFiles(e){let t=new Yt("GLOB_FILE_INFOS",e);return await this.postTask(t)}async registerFileText(e,t){let n=a1t.encode(t);await this.registerFileBuffer(e,n)}async registerFileURL(e,t,n,r){t===void 0&&(t=e);let i=new Yt("REGISTER_FILE_URL",[e,t,n,r]);await this.postTask(i)}async registerEmptyFileBuffer(e){let t=new Yt("REGISTER_FILE_BUFFER",[e,new Uint8Array]);await this.postTask(t)}async registerFileBuffer(e,t){let n=new Yt("REGISTER_FILE_BUFFER",[e,t]);await this.postTask(n,[t.buffer])}async registerFileHandle(e,t,n,r){let i=new Yt("REGISTER_FILE_HANDLE",[e,t,n,r]);await this.postTask(i,[])}async collectFileStatistics(e,t){let n=new Yt("COLLECT_FILE_STATISTICS",[e,t]);await this.postTask(n,[])}async exportFileStatistics(e){let t=new Yt("EXPORT_FILE_STATISTICS",e);return await this.postTask(t,[])}async copyFileToBuffer(e){let t=new Yt("COPY_FILE_TO_BUFFER",e);return await this.postTask(t)}async copyFileToPath(e,t){let n=new Yt("COPY_FILE_TO_PATH",[e,t]);await this.postTask(n)}async insertArrowFromIPCStream(e,t,n){if(t.length==0)return;let r=new Yt("INSERT_ARROW_FROM_IPC_STREAM",[e,t,n]);await this.postTask(r,[t.buffer])}async insertCSVFromPath(e,t,n){if(n.columns!==void 0){let i=[];for(let s in n.columns){let o=n.columns[s];i.push(Lx(s,o))}n.columnsFlat=i,delete n.columns}let r=new Yt("IMPORT_CSV_FROM_PATH",[e,t,n]);await this.postTask(r)}async insertJSONFromPath(e,t,n){if(n.columns!==void 0){let i=[];for(let s in n.columns){let o=n.columns[s];i.push(Lx(s,o))}n.columnsFlat=i,delete n.columns}let r=new Yt("IMPORT_JSON_FROM_PATH",[e,t,n]);await this.postTask(r)}},c1t={name:"@duckdb/duckdb-wasm",version:"1.11.0",description:"DuckDB powered by WebAssembly",license:"MIT",repository:{type:"git",url:"https://github.com/duckdb/duckdb-wasm.git"},keywords:["sql","duckdb","relational","database","data","query","wasm","analytics","olap","arrow","parquet","json","csv"],dependencies:{"apache-arrow":"^14.0.1"},devDependencies:{"@types/emscripten":"^1.39.10","@types/jasmine":"^5.1.4","@typescript-eslint/eslint-plugin":"^6.18.0","@typescript-eslint/parser":"^6.18.0",esbuild:"^0.20.0",eslint:"^8.56.0","eslint-plugin-jasmine":"^4.1.3","eslint-plugin-react":"^7.33.2","fast-glob":"^3.3.2",jasmine:"^5.1.0","jasmine-core":"^5.1.1","jasmine-spec-reporter":"^7.0.0","js-sha256":"^0.11.0",karma:"^6.4.2","karma-chrome-launcher":"^3.2.0","karma-coverage":"^2.2.1","karma-firefox-launcher":"^2.1.2","karma-jasmine":"^5.1.0","karma-jasmine-html-reporter":"^2.1.0","karma-sourcemap-loader":"^0.4.0","karma-spec-reporter":"^0.0.36","make-dir":"^4.0.0",nyc:"^15.1.0",prettier:"^3.2.4",puppeteer:"^21.7.0",rimraf:"^5.0.5",s3rver:"^3.7.1",typedoc:"^0.25.7",typescript:"^5.3.3","wasm-feature-detect":"^1.6.1","web-worker":"^1.2.0"},scripts:{"build:debug":"node bundle.mjs debug && tsc --emitDeclarationOnly","build:release":"node bundle.mjs release && tsc --emitDeclarationOnly",docs:"typedoc",report:"node ./coverage.mjs","test:node":"node --enable-source-maps ../../node_modules/jasmine/bin/jasmine ./dist/tests-node.cjs","test:node:debug":"node --inspect-brk --enable-source-maps ../../node_modules/jasmine/bin/jasmine ./dist/tests-node.cjs","test:node:coverage":"nyc -r json --report-dir ./coverage/node node ../../node_modules/jasmine/bin/jasmine ./dist/tests-node.cjs","test:firefox":"karma start ./karma/tests-firefox.cjs","test:chrome":"karma start ./karma/tests-chrome.cjs","test:chrome:eh":"karma start ./karma/tests-chrome-eh.cjs","test:chrome:coverage":"karma start ./karma/tests-chrome-coverage.cjs","test:browser":"karma start ./karma/tests-all.cjs","test:browser:debug":"karma start ./karma/tests-debug.cjs",test:"npm run test:chrome && npm run test:node","test:coverage":"npm run test:chrome:coverage && npm run test:node:coverage && npm run report",lint:"eslint src test"},files:["dist","!dist/types/test"],main:"dist/duckdb-browser.cjs",module:"dist/duckdb-browser.mjs",types:"dist/duckdb-browser.d.ts",jsdelivr:"dist/duckdb-browser.cjs",unpkg:"dist/duckdb-browser.mjs",sideEffects:!1,browser:{fs:!1,path:!1,perf_hooks:!1,os:!1,worker_threads:!1},exports:{"./dist/duckdb-mvp.wasm":"./dist/duckdb-mvp.wasm","./dist/duckdb-eh.wasm":"./dist/duckdb-eh.wasm","./dist/duckdb-coi.wasm":"./dist/duckdb-coi.wasm","./dist/duckdb-browser":"./dist/duckdb-browser.mjs","./dist/duckdb-browser.cjs":"./dist/duckdb-browser.cjs","./dist/duckdb-browser.mjs":"./dist/duckdb-browser.mjs","./dist/duckdb-browser-blocking":"./dist/duckdb-browser-blocking.mjs","./dist/duckdb-browser-blocking.mjs":"./dist/duckdb-browser-blocking.mjs","./dist/duckdb-browser-blocking.cjs":"./dist/duckdb-browser-blocking.cjs","./dist/duckdb-browser-coi.pthread.worker.js":"./dist/duckdb-browser-coi.pthread.worker.js","./dist/duckdb-browser-coi.worker.js":"./dist/duckdb-browser-coi.worker.js","./dist/duckdb-browser-eh.worker.js":"./dist/duckdb-browser-eh.worker.js","./dist/duckdb-browser-mvp.worker.js":"./dist/duckdb-browser-mvp.worker.js","./dist/duckdb-node":"./dist/duckdb-node.cjs","./dist/duckdb-node.cjs":"./dist/duckdb-node.cjs","./dist/duckdb-node-blocking":"./dist/duckdb-node-blocking.cjs","./dist/duckdb-node-blocking.cjs":"./dist/duckdb-node-blocking.cjs","./dist/duckdb-node-eh.worker.cjs":"./dist/duckdb-node-eh.worker.cjs","./dist/duckdb-node-mvp.worker.cjs":"./dist/duckdb-node-mvp.worker.cjs","./blocking":{browser:{types:"./dist/duckdb-browser-blocking.d.ts",import:"./dist/duckdb-browser-blocking.mjs",require:"./dist/duckdb-browser-blocking.cjs"},node:{types:"./dist/duckdb-node-blocking.d.ts",require:"./dist/duckdb-node-blocking.cjs",import:"./dist/duckdb-node-blocking.cjs"},types:"./dist/duckdb-browser-blocking.d.ts",import:"./dist/duckdb-browser-blocking.mjs",require:"./dist/duckdb-browser-blocking.cjs"},".":{browser:{types:"./dist/duckdb-browser.d.ts",import:"./dist/duckdb-browser.mjs",require:"./dist/duckdb-browser.cjs"},node:{types:"./dist/duckdb-node.d.ts",import:"./dist/duckdb-node.cjs",require:"./dist/duckdb-node.cjs"},types:"./dist/duckdb-browser.d.ts",import:"./dist/duckdb-browser.mjs",require:"./dist/duckdb-browser.cjs"}}},jT=c1t.version.split(".");jT[0];jT[1];jT[2];Hgt(Ggt());function u1t(){let e=new TextDecoder;return t=>(typeof SharedArrayBuffer<"u"&&t.buffer instanceof SharedArrayBuffer&&(t=new Uint8Array(t)),e.decode(t))}u1t();var f1t=(e=>(e[e.BUFFER=0]="BUFFER",e[e.NODE_FS=1]="NODE_FS",e[e.BROWSER_FILEREADER=2]="BROWSER_FILEREADER",e[e.BROWSER_FSACCESS=3]="BROWSER_FSACCESS",e[e.HTTP=4]="HTTP",e[e.S3=5]="S3",e))(f1t||{}),J9=class{singleValue(){let{columnCount:e,rowCount:t}=this;if(e===0)throw Error("no column data");if(t===0)throw Error("no rows");if(e>1)throw Error("more than one column");if(t>1)throw Error("more than one row");return this.value(0,0)}columnNames(){let{columnCount:e}=this,t=[];for(let n=0;n<e;n++)t.push(this.columnName(n));return t}deduplicatedColumnNames(){let{columnCount:e}=this,t=[],n={};for(let r=0;r<e;r++){let i=this.columnName(r),s=(n[i]||0)+1;n[i]=s,s>1?t.push(`${i}:${s-1}`):t.push(i)}return t}toRows(){let{rowCount:e,columnCount:t}=this,n=this.deduplicatedColumnNames(),r=[];for(let i=0;i<e;i++){let s={};for(let o=0;o<t;o++)s[n[o]]=this.value(o,i);r.push(s)}return r}},Xt,oe=(Xt=class{constructor(){}static DECIMAL(t,n){return t===void 0&&n===void 0?Xt.default_DECIMAL:{name:"DECIMAL",width:t,scale:n}}static LIST(t){return{name:"LIST",valueType:t}}static MAP(t,n){return{name:"MAP",keyType:t,valueType:n}}static STRUCT(t){return{name:"STRUCT",entries:t}}static STRUCT_entry(t,n){return{key:t,valueType:n}}static UNION(t){return{name:"UNION",alternatives:t}}static UNION_alternative(t,n){return{tag:t,valueType:n}}static VARCHAR_withLength(t){return{name:"VARCHAR",length:t}}},Xt.BIGINT={name:"BIGINT"},Xt.BIT={name:"BIT"},Xt.BOOLEAN={name:"BOOLEAN"},Xt.BLOB={name:"BLOB"},Xt.DATE={name:"DATE"},Xt.DOUBLE={name:"DOUBLE"},Xt.default_DECIMAL={name:"DECIMAL"},Xt.ENUM={name:"ENUM"},Xt.HUGEINT={name:"HUGEINT"},Xt.INTEGER={name:"INTEGER"},Xt.INTERVAL={name:"INTERVAL"},Xt.REAL={name:"REAL"},Xt.SMALLINT={name:"SMALLINT"},Xt.SQLNULL={name:"SQLNULL"},Xt.TIME={name:"TIME"},Xt.TIMESTAMP={name:"TIMESTAMP"},Xt.TIMESTAMP_S={name:"TIMESTAMP_S"},Xt.TIMESTAMP_MS={name:"TIMESTAMP_MS"},Xt.TIMESTAMP_NS={name:"TIMESTAMP_NS"},Xt.TIMESTAMP_TZ={name:"TIMESTAMP_TZ"},Xt.TINYINT={name:"TINYINT"},Xt.UBIGINT={name:"UBIGINT"},Xt.UINTEGER={name:"UINTEGER"},Xt.USMALLINT={name:"USMALLINT"},Xt.UTINYINT={name:"UTINYINT"},Xt.UUID={name:"UUID"},Xt.VARCHAR={name:"VARCHAR"},Xt);function hu(e){switch(e.typeId){case D.Null:return oe.SQLNULL;case D.Int:{let{isSigned:t,bitWidth:n}=e;if(t)switch(n){case 8:return oe.TINYINT;case 16:return oe.SMALLINT;case 32:return oe.INTEGER;case 64:return oe.BIGINT;default:throw Error(`unexpected integer bit width: ${n}`)}else switch(n){case 8:return oe.UTINYINT;case 16:return oe.USMALLINT;case 32:return oe.UINTEGER;case 64:return oe.UBIGINT;default:throw Error(`unexpected integer bit width: ${n}`)}}case D.Float:{let{precision:t}=e;switch(t){case nn.HALF:throw Error("DuckDB does not support half-precision floats");case nn.SINGLE:return oe.REAL;case nn.DOUBLE:return oe.DOUBLE;default:throw Error(`unexpected precision: ${t}`)}}case D.Binary:return oe.BLOB;case D.Utf8:return oe.VARCHAR;case D.Bool:return oe.BOOLEAN;case D.Decimal:{let{precision:t,scale:n}=e;return(t==null||t===18)&&(n==null||n===3)?oe.DECIMAL():oe.DECIMAL(t,n)}case D.Date:{let{unit:t}=e;switch(t){case Pr.DAY:return oe.DATE;case Pr.MILLISECOND:throw Error("DuckDB does not support millisecond-unit dates");default:throw Error(`unexpected date unit: ${t}`)}}case D.Time:{let{unit:t}=e;switch(t){case rt.SECOND:throw Error("DuckDB does not support second-unit times");case rt.MILLISECOND:throw Error("DuckDB does not support millisecond-unit times");case rt.MICROSECOND:return oe.TIME;case rt.NANOSECOND:throw Error("DuckDB does not support nanosecond-unit times");default:throw Error(`unexpected time unit: ${t}`)}}case D.Timestamp:{let{unit:t,timezone:n}=e;switch(t){case rt.SECOND:if(n)throw Error("DuckDB does not support second-unit timestamps with timezone");return oe.TIMESTAMP_S;case rt.MILLISECOND:if(n)throw Error("DuckDB does not support millisecond-unit timestamps with timezone");return oe.TIMESTAMP_MS;case rt.MICROSECOND:return n?oe.TIMESTAMP_TZ:oe.TIMESTAMP;case rt.NANOSECOND:if(n)throw Error("DuckDB does not support nanosecond-unit timestamps with timezone");return oe.TIMESTAMP_NS;default:throw Error(`unexpected time unit: ${t}`)}}case D.Interval:{let{unit:t}=e;switch(t){case yr.YEAR_MONTH:throw Error("DuckDB does not support year-month intervals");case yr.DAY_TIME:throw Error("DuckDB does not support day-time intervals");case yr.MONTH_DAY_NANO:return oe.INTERVAL;default:throw Error(`unexpected interval unit: ${t}`)}}case D.List:{let{valueType:t}=e;return oe.LIST(hu(t))}case D.Struct:{let{children:t}=e,n=t.map(r=>({key:r.name,valueType:hu(r.type)}));return oe.STRUCT(n)}case D.Union:{let{mode:t}=e;switch(t){case ln.Dense:throw Error("DuckDB does not support dense unions");case ln.Sparse:{let n=e.children.map(r=>({tag:r.name,valueType:hu(r.type)}));return oe.UNION(n)}default:throw Error(`unexpected union mode: ${t}`)}}case D.FixedSizeBinary:throw Error("DuckDB does not support fixed-size binary");case D.FixedSizeList:throw Error("DuckDB does not support fixed-size lists");case D.Map:{let{keyType:t,valueType:n}=e;return oe.MAP(hu(t),hu(n))}case D.Dictionary:return oe.ENUM;default:throw Error(`unexpected type id: ${e.typeId}`)}}function d1t(e){let t="";for(let n of e)n<=31||n===34||n===39||n>=127?t+=`\\x${n.toString(16).toUpperCase().padStart(2,"0")}`:t+=String.fromCharCode(n);return t}var Si=class{toString(){return this.toDuckDBString()}},h1t=class extends Si{constructor(e){super(),this.bytes=e}toDuckDBString(){return d1t(this.bytes)}},Cx=BigInt(1e6),p1t=BigInt(1e3),y1t=BigInt(1e3),n4=BigInt(60),r4=BigInt(60),Mm=BigInt(864e8),m1t=BigInt("-9223372036854775807"),g1t=BigInt("9223372036854775807");function b1t(e,t,n){let r=String(Math.abs(e)).padStart(4,"0"),i=String(t).padStart(2,"0"),s=String(n).padStart(2,"0");return`${r}-${i}-${s}${e<0?" (BC)":""}`}function tz(e){let t=Math.abs(e),n=e<0?-1:1,r=Math.floor(t/146097),i=n*r*400,s=t%146097,o=n*s*864e5,a=new Date(o),l=i+a.getUTCFullYear();l<0&&l--;let c=a.getUTCMonth()+1,u=a.getUTCDate();return b1t(l,c,u)}function v1t(e,t,n,r){let i=String(e).padStart(2,"0"),s=String(t).padStart(2,"0"),o=String(n).padStart(2,"0"),a=String(r).padStart(6,"0").replace(/0+$/,"");return`${i}:${s}:${o}${a.length>0?`.${a}`:""}`}function ez(e){let t=e%Cx,n=e/Cx,r=n%n4,i=n/n4,s=i%r4,o=i/r4;return v1t(o,s,r,t)}function nz(e){let t=e<0?e+Mm:e;return ez(t)}function w1t(e){let t=e<0,n=t?-e:e,r=ez(n);return t?`-${r}`:r}function _1t(e,t,n){let r=tz(Number(e)),i=nz(t),s=n?` ${n}`:"";return`${r} ${i}${s}`}function Kv(e,t){if(e===m1t)return"-infinity";if(e===g1t)return"infinity";let n=e/Mm,r=e%Mm;return r<0&&(n--,r+=Mm),_1t(n,r,t)}function S1t(e,t){return Kv(e*Cx,t)}function x1t(e,t){return Kv(e*p1t,t)}function I1t(e,t){return Kv(e/y1t,t)}function L_(e,t){return`${e} ${t}${e!==1?"s":""}`}function E1t(e,t,n){let r=[];if(e!==0){let i=e<0?-1:1,s=Math.abs(e),o=Math.floor(s/12),a=i*o,l=i*(s-o*12);a!==0&&r.push(L_(a,"year")),l!==0&&r.push(L_(l,"month"))}return t!==0&&r.push(L_(t,"day")),n!==BigInt(0)&&r.push(w1t(n)),r.length>0?r.join(" "):"00:00:00"}var T1t=class extends Si{constructor(e){super(),this.days=e}toDuckDBString(){return tz(this.days)}};function A1t(e){var t;return((t=new Intl.NumberFormat(e,{useGrouping:!1}).formatToParts(.1).find(n=>n.type==="decimal"))==null?void 0:t.value)??"."}var C_={};function M1t(e){let t=JSON.stringify(e);if(t in C_)return C_[t];let n=A1t(e);return C_[t]=n,n}function $1t(e,t){if(e){let{minimumFractionDigits:n,maximumFractionDigits:r,...i}=e.options??{};return t.toLocaleString(e==null?void 0:e.locales,i)}return String(t)}function N1t(e,t,n){var o,a;let r=String(t).padStart(n,"0");if(!e)return r;let i=((o=e==null?void 0:e.options)==null?void 0:o.minimumFractionDigits)??0,s=((a=e==null?void 0:e.options)==null?void 0:a.maximumFractionDigits)??20;return r.padEnd(i,"0").slice(0,s)}function i4(e,t,n){if(t>0){let r=BigInt(10)**BigInt(t),i=e<0?-e:e,s=e<0?"-":"",o=i/r,a=$1t(n,o),l=i%r,c=N1t(n,l,t),u=n?M1t(n.locales):".";return`${s}${a}${u}${c}`}return n?e.toLocaleString(n==null?void 0:n.locales,n==null?void 0:n.options):String(e)}var D1t=class extends Si{constructor(e,t){super(),this.scaledValue=e,this.scale=t}toDuckDBString(){return i4(this.scaledValue,this.scale)}toLocaleString(e,t){return i4(this.scaledValue,this.scale,{locales:e,options:t})}},k1t=class extends Si{constructor(e,t,n){super(),this.months=e,this.days=t,this.microseconds=n}toDuckDBString(){return E1t(this.months,this.days,this.microseconds)}};function Cp(e){return e==null?"NULL":typeof e=="string"?`'${e.replace("'","''")}'`:String(e)}var O1t=class extends Si{constructor(e){super(),this.values=e}toDuckDBString(){return`[${this.values.map(Cp).join(", ")}]`}},F1t=class extends Si{constructor(e){super(),this.entries=e}toDuckDBString(){return`{${this.entries.map(({key:e,value:t})=>`${Cp(e)}: ${Cp(t)}`).join(", ")}}`}},B1t=class extends Si{constructor(e){super(),this.entries=e}toDuckDBString(){return`{${this.entries.map(({key:e,value:t})=>`${Cp(e)}: ${Cp(t)}`).join(", ")}}`}},R1t=class extends Si{constructor(e){super(),this.microseconds=e}toDuckDBString(){return nz(this.microseconds)}},L1t=class extends Si{constructor(e,t){super(),this.microseconds=e,this.timezone=t}toDuckDBString(){return Kv(this.microseconds,this.timezone)}},C1t=class extends Si{constructor(e){super(),this.milliseconds=e}toDuckDBString(){return x1t(this.milliseconds)}},U1t=class extends Si{constructor(e){super(),this.nanoseconds=e}toDuckDBString(){return I1t(this.nanoseconds)}},P1t=class extends Si{constructor(e){super(),this.seconds=e}toDuckDBString(){return S1t(this.seconds)}},z1t=new TextDecoder;function j1t(e,t,n){return e.getValid(t)?n(e,t):null}function Ln(e){return(t,n)=>j1t(t,n,e)}function V1t(e,t,n,r){return Array.from({length:n-t}).map((i,s)=>r(e,t+s))}function rz(e){return new BigInt64Array(e.values.buffer,e.values.byteOffset,e.values.length/2)}function Uy(e,t){return rz(e)[t]}function Y1t(e,t){let n=rz(e),r=n[t*2];return(n[t*2+1]<<BigInt(64))+(r&BigInt.asUintN(64,BigInt(-1)))}function iz(e,t){let{values:n,valueOffsets:r}=e,i=r[t],s=r[t+1];return n.subarray(i,s)}function q1t(e,t){return null}function W1t(e,t){return e.values[t]}var is=Ln(W1t);function H1t(e,t){return new h1t(iz(e,t))}var G1t=Ln(H1t);function X1t(e,t){return z1t.decode(iz(e,t))}var Q1t=Ln(X1t);function K1t(e,t){let n=e.offset+t;return(e.values[n>>3]&1<<n%8)!==0}var Z1t=Ln(K1t);function J1t(e,t){return new D1t(Y1t(e,t),e.type.scale)}var tbt=Ln(J1t);function ebt(e,t){return new T1t(e.values[t])}var nbt=Ln(ebt);function rbt(e,t){return new R1t(e.values[t])}var ibt=Ln(rbt);function sbt(e,t){return new P1t(Uy(e,t))}var obt=Ln(sbt);function abt(e,t){return new C1t(Uy(e,t))}var lbt=Ln(abt);function cbt(e,t){return new L1t(Uy(e,t),e.type.timezone)}var ubt=Ln(cbt);function fbt(e,t){return new U1t(Uy(e,t))}var dbt=Ln(fbt);function hbt(e,t){return new k1t(e.values[t*4],e.values[t*4+1],Uy(e,t*2+1)/BigInt(1e3))}var pbt=Ln(hbt);function ybt(e,t){let{children:n,valueOffsets:r}=e,i=r[t],s=r[t+1];return new O1t(Ibt(n[0],i,s))}var mbt=Ln(ybt);function gbt(e,t){let n=[],{children:r,type:i}=e,s=i.children;for(let o=0;o<r.length;o++){let a=r[o],l=s[o].name,c=Up(a,t);n.push({key:l,value:c})}return new B1t(n)}var bbt=Ln(gbt);function vbt(e,t){let{children:n,typeIds:r}=e,i=r[t],s=e.type.typeIdToChildIndex[i],o=n[s];return Up(o,t)}function wbt(e,t){let n=[],{children:r,valueOffsets:i}=e,s=i[t],o=i[t+1],[a,l]=r[0].children;for(let c=s;c<o;c++)n.push({key:Up(a,c),value:Up(l,c)});return new F1t(n)}var _bt=Ln(wbt);function Sbt(e,t){return e.dictionary&&e.dictionary.length>0?e.dictionary.get(e.values[t]):e.values[t]}var xbt=Ln(Sbt);function sz(e){switch(e.typeId){case D.Null:return q1t;case D.Int:{let{isSigned:t,bitWidth:n}=e;if(t)switch(n){case 8:return is;case 16:return is;case 32:return is;case 64:return is;default:throw Error(`unexpected integer bit width: ${n}`)}else switch(n){case 8:return is;case 16:return is;case 32:return is;case 64:return is;default:throw Error(`unexpected integer bit width: ${n}`)}}case D.Float:{let{precision:t}=e;switch(t){case nn.HALF:throw Error("DuckDB does not support half-precision floats");case nn.SINGLE:return is;case nn.DOUBLE:return is;default:throw Error(`unexpected precision: ${t}`)}}case D.Binary:return G1t;case D.Utf8:return Q1t;case D.Bool:return Z1t;case D.Decimal:return tbt;case D.Date:{let{unit:t}=e;switch(t){case Pr.DAY:return nbt;case Pr.MILLISECOND:throw Error("DuckDB does not support millisecond-unit dates");default:throw Error(`unexpected date unit: ${t}`)}}case D.Time:{let{unit:t}=e;switch(t){case rt.SECOND:throw Error("DuckDB does not support second-unit times");case rt.MILLISECOND:throw Error("DuckDB does not support millisecond-unit times");case rt.MICROSECOND:return ibt;case rt.NANOSECOND:throw Error("DuckDB does not support nanosecond-unit times");default:throw Error(`unexpected time unit: ${t}`)}}case D.Timestamp:{let{unit:t,timezone:n}=e;switch(t){case rt.SECOND:if(n)throw Error("DuckDB does not support second-unit timestamps with time zone");return obt;case rt.MILLISECOND:if(n)throw Error("DuckDB does not support millisecond-unit timestamps with time zone");return lbt;case rt.MICROSECOND:return ubt;case rt.NANOSECOND:if(n)throw Error("DuckDB does not support nanosecond-unit timestamps with time zone");return dbt;default:throw Error(`unexpected time unit: ${t}`)}}case D.Interval:{let{unit:t}=e;switch(t){case yr.YEAR_MONTH:throw Error("DuckDB does not support year-month intervals");case yr.DAY_TIME:throw Error("DuckDB does not support day-time intervals");case yr.MONTH_DAY_NANO:return pbt;default:throw Error(`unexpected interval unit: ${t}`)}}case D.List:return mbt;case D.Struct:return bbt;case D.Union:{let{mode:t}=e;switch(t){case ln.Dense:throw Error("DuckDB does not support dense unions");case ln.Sparse:return vbt;default:throw Error(`unexpected union mode: ${t}`)}}case D.FixedSizeBinary:throw Error("DuckDB does not support fixed-size binary");case D.FixedSizeList:throw Error("DuckDB does not support fixed-size lists");case D.Map:return _bt;case D.Dictionary:return xbt;default:throw Error(`unexpected type id: ${e.typeId}`)}}function Up(e,t){return sz(e.type)(e,t)}function Ibt(e,t,n){let r=sz(e.type);return V1t(e,t,n,r)}var Ebt=class extends J9{constructor(e){super(),this.recordBatch=e}get columnCount(){return this.recordBatch.schema.fields.length}get rowCount(){return this.recordBatch.data.length}columnName(e){return this.recordBatch.schema.fields[e].name}columnType(e){let t=this.recordBatch.schema.fields[e];return hu(t.type)}value(e,t){let n=this.recordBatch.data.children[e];return Up(n,t)}},U_=Object.freeze({done:!0,value:void 0}),oz=class{constructor(e){this.recordBatchIterator=e}async next(){let{done:e,value:t}=await this.recordBatchIterator.next();return t?{done:!!e,value:new Ebt(t)}:U_}async return(e){return this.recordBatchIterator.return&&await this.recordBatchIterator.return(),e?{done:!0,value:e}:U_}async throw(e){return this.recordBatchIterator.throw&&await this.recordBatchIterator.throw(e),U_}[Symbol.asyncIterator](){return this}};function s4(e,t){return[0,(t-e)*1e6]}var az=class extends J9{constructor(e){super(),this.iteratorDone=!1,this.totalRowsRead=0,this.batches=[],this.batchSizeRuns=[],this.iterator=e}get columnCount(){return this.batches.length===0?0:this.batches[0].columnCount}get rowCount(){return this.totalRowsRead}columnName(e){if(this.batches.length===0)throw Error("no column data");return this.batches[0].columnName(e)}columnType(e){if(this.batches.length===0)throw Error("no column data");return this.batches[0].columnType(e)}value(e,t){if(this.totalRowsRead===0)throw Error("no data");let n=0,r=t;for(let i of this.batchSizeRuns){if(r<i.rowCount){n+=Math.floor(r/i.batchSize);let s=r%i.batchSize;return this.batches[n].value(e,s)}n+=i.batchCount,r-=i.rowCount}throw Error(`Row index ${t} requested, but only ${this.totalRowsRead} row have been read so far.`)}get done(){return this.iteratorDone}async readAll(){return this.read()}async readUntil(e){return this.read(e)}async read(e){for(;!(this.iteratorDone||e!==void 0&&this.totalRowsRead>=e);){let{value:t,done:n}=await this.iterator.next();t&&(this.updateBatchSizeRuns(t),this.batches.push(t),this.totalRowsRead+=t.rowCount),n&&(this.iteratorDone=n)}}updateBatchSizeRuns(e){if(this.batchSizeRuns.length>0){let t=this.batchSizeRuns[this.batchSizeRuns.length-1];if(t.batchSize===e.rowCount){t.batchCount+=1,t.rowCount+=t.batchSize;return}}this.batchSizeRuns.push({batchCount:1,batchSize:e.rowCount,rowCount:e.rowCount})}},j0,f4,P_=((f4=(j0=performance==null?void 0:performance.now)==null?void 0:j0.bind)==null?void 0:f4.call(j0,performance))??(()=>Date.now()/1e3),z_=class{constructor(e,t,n){this.connection=null,this.deferredConnection=e,this.query=t,this.args=n,this.creationTime=P_()}async run(e){let t=P_(),n=await this.sendQuery(),r=new oz(n),i=new az(r);await i.readAll();let s=P_();return{type:"materialized",initialQueuePosition:e,queueTime:s4(this.creationTime,t),executionTime:s4(t,s),data:i}}async cancel(){return(this.connection||await this.getConnection()).cancelSent()}async getConnection(){return this.connection=await this.deferredConnection,this.connection}async sendQuery(){var t;let e=this.connection||await this.getConnection();return this.args&&((t=this.args)==null?void 0:t.length)>0?(await e.prepare(this.query)).send(...this.args):e.send(this.query)}},o4=class{constructor(e,t,n){this.connection=null,this.deferredConnection=e,this.query=t,this.args=n}async run(){let e=await this.sendQuery(),t=new oz(e),n=new az(t);return{type:"streaming",arrowStream:e,dataStream:t,dataReader:n}}async cancel(){return(this.connection||await this.getConnection()).cancelSent()}async getConnection(){return this.connection=await this.deferredConnection,this.connection}async sendQuery(){var t;let e=this.connection||await this.getConnection();return this.args&&((t=this.args)==null?void 0:t.length)>0?(await e.prepare(this.query)).send(this.args):e.send(this.query)}};function a4(){throw new Error("should never be called")}function Tbt(){let e=a4,t=a4;return{promise:new Promise((n,r)=>{e=n,t=r}),resolve:e,reject:t}}var Abt=class{constructor(e){this.nextTaskId=1,this.queuedTaskIds=[],this.queuedTasksById={},this.processingQueue=!1,this.logSink=e}enqueueTask(e){let t=this.createTaskId();return this.logDebug(`enqueueTask: creating task id = ${t}`),this.addQueuedTask({id:t,task:e,state:0,deferred:Tbt(),cancelled:!1,initialQueuePosition:this.queuedTaskIds.length}),this.scheduleProcessQueueIfNeeded(),t}async cancelTask(e,t){this.logDebug(`cancelTask(${e}): called`);let n=this.queuedTasksById[e];if(!n)throw new Error(`Task with id ${e} not found`);switch(n.state){case 0:return n.cancelled?this.logDebug(`cancelTask(${e}): cancelling pending task (already cancelled)`):(this.logDebug(`cancelTask(${e}): cancelling pending task`),n.cancelled=!0,n.deferred.reject(new Error(t??"pending task cancelled")),this.scheduleProcessQueueIfNeeded()),!0;case 1:return this.logDebug(`cancelTask(${e}): cancelling running task`),n.cancelled=!0,n.task.cancel();case 2:return this.logDebug(`cancelTask(${e}): can't cancel resolved task`),!1;case 3:return this.logDebug(`cancelTask(${e}): can't cancel rejected task`),!1;default:throw n.state,new Error("unreachable")}}taskResult(e){this.logDebug(`taskResults(${e}): called`);let t=this.queuedTasksById[e];if(!t)throw new Error(`Task with id ${e} not found`);return t.deferred.promise}logDebug(e){this.logSink&&this.logSink.debug(e)}logWarn(e){this.logSink&&this.logSink.warn(e)}createTaskId(){return`t${this.nextTaskId++}`}addQueuedTask(e){this.queuedTaskIds.push(e.id),this.queuedTasksById[e.id]=e}scheduleProcessQueueIfNeeded(){this.processingQueue?this.logDebug("scheduleProcessQueueIfNeeded: processQueue already scheduled"):(this.logDebug("scheduleProcessQueueIfNeeded: scheduling processQueue"),this.processingQueue=!0,setTimeout(()=>{this.processQueue(),this.processingQueue=!1},0))}processQueue(){this.logDebug("processQueue: processing started");let e;do e=this.processFirstQueuedTask();while(e);this.logDebug("processQueue: processing completed")}processFirstQueuedTask(){if(this.queuedTaskIds.length===0)return this.logDebug("processFirstQueuedTask: queue empty"),!1;let e=this.queuedTaskIds[0];this.logDebug(`processFirstQueuedTask: processing task ${e}`);let t=this.queuedTasksById[e];if(!t)return this.logWarn(`processFirstQueuedTask: task ${e} not found in map`),this.queuedTaskIds.shift(),!0;switch(t.state){case 0:return t.cancelled?(this.logDebug(`processFirstQueuedTask: removing cancelled pending task ${e} from queue`),this.queuedTaskIds.shift(),delete this.queuedTasksById[t.id],!0):(this.logDebug(`processFirstQueuedTask: running pending task ${e}`),t.state=1,t.task.run(t.initialQueuePosition).then(n=>{this.logDebug(`processFirstQueuedTask: task ${e} resolved`),t.state=2,t.deferred.resolve(n)}).catch(n=>{this.logDebug(`processFirstQueuedTask: task ${e} rejected`),t.state=3,t.deferred.reject(n)}).finally(()=>{this.scheduleProcessQueueIfNeeded()}),!1);case 1:return this.logDebug(`processFirstQueuedTask: task ${e} at front of queue is already running`),!1;case 2:case 3:return this.logDebug(`processFirstQueuedTask: task ${e} at front of queue is completed, removing from queue`),this.queuedTaskIds.shift(),delete this.queuedTasksById[t.id],!0;default:throw t.state,new Error("unreachable")}}},$m=null;async function Mbt(e){let t=await(await $bt(e)).connect();return e.skipWelcomePack||await t.query("PRAGMA MD_USE_DEFAULT"),t}async function $bt(e){return $m||($m=Dbt(e),$m)}function lz(e){return e?e.endsWith("/")?e:`${e}/`:"https://app.motherduck.com/"}async function Nbt(e){let t=`${e}duckdb-assets.json`,n=await(await fetch(t)).json();return n.coi&&(n.coi.mainModule=e+n.coi.mainModule,n.coi.mainWorker=e+n.coi.mainWorker,n.coi.pthreadWorker=e+n.coi.pthreadWorker),n.mvp&&(n.mvp.mainModule=e+n.mvp.mainModule,n.mvp.mainWorker=e+n.mvp.mainWorker),n.eh&&(n.eh.mainModule=e+n.eh.mainModule,n.eh.mainWorker=e+n.eh.mainWorker),n}function l4(e,t){return URL.createObjectURL(new Blob([`importScripts("${t}");`],{type:"text/javascript"}))}async function Dbt(e){let t=await Fbt(),n=lz(e.duckDBAssetsURLPrefix),r=await Nbt(n),i=e.useDuckDBWasmCOI?r.coi:r.eh;if(!i)throw new Error("Could not find DuckDB WASM asset URLs in duckdb-assets.json");let s=/^https?:\/\//.test(n),o=s?l4(n,i.mainWorker):i.mainWorker,a=s&&i.pthreadWorker?l4(n,i.pthreadWorker):i.pthreadWorker,l=new Worker(o);t||l.addEventListener("message",p=>{if(p&&p.data&&p.data.type==="Initialize"){let g=new Worker(p.data.workerUrl);URL.revokeObjectURL(p.data.workerUrl),g.postMessage(p.data,[p.data.port])}});let c=new e1t,u=new l1t(c,l);await u.instantiate(i.mainModule,a),s&&(URL.revokeObjectURL(o),a&&URL.revokeObjectURL(a));let f=await u.connect();await Obt(f,e.version,e.duckDBAssetsURLPrefix),await f.query("LOAD icu;");let d=new URL(e.mdServerURL||"https://api.motherduck.com");await f.query(`SET motherduck_host='${d.hostname}';`),d.port&&await f.query(`SET motherduck_port='${d.port}';`),d.protocol==="http:"&&await f.query("SET motherduck_use_tls=false;"),await f.query(`SET motherduck_token='${e.mdToken}';`);let h=!1;for(let p=0;p<6e3;++p){if(await kbt(f)){h=!0;break}await new Promise(g=>setTimeout(g,10))}if(!h)throw new Error("Could not initialize worker after 1 minute.");return $m=u,u}async function kbt(e){return(await e.query("from MD_IS_NETWORK_READY();")).toArray()[0].Success}async function Obt(e,t,n){let r=lz(n),i=t;i||(i=(await(await fetch(`${r}version`)).json()).version);let s=!i||i.startsWith("DEV-")?"":i,o=r==="/"?`${window.origin}${s.length>0?"/":""}`:r;await e.query([`SET custom_extension_repository="${o}${s}";`,"LOAD motherduck;","RESET custom_extension_repository;"].join(""))}async function Fbt(){return new Promise(e=>{let t=URL.createObjectURL(new Blob(["self.postMessage({ canCreateWorker: !!self.Worker });"],{type:"application/javascript"})),n=new Worker(t);URL.revokeObjectURL(t),n.addEventListener("message",r);function r(i){n.removeEventListener("message",r),n.terminate(),e(i.data.canCreateWorker)}})}function Bbt(e){let t=/^[^{]*({.*})/.exec(e);if(t){let n=t[1];try{let r=JSON.parse(n);if(r.message)return r.message}catch{return e}}return e}function Rbt(e){return typeof e=="object"&&e!==null&&"message"in e&&typeof e.message=="string"}function Lbt(e){if(Rbt(e))return e.message;try{return JSON.stringify(e)}catch{return String(e)}}var Cbt=new Map([[/CREATE SECRET/i,"CREATE SECRET [REDACTED]"],[/s3_secret_access_key/i,"S3_SECRET_ACCESS_KEY [REDACTED]"],[/motherduck_token/i,"motherduck_token [REDACTED]"]]);function Yd(e){for(let[t,n]of Cbt)if(t.test(e))return n;return e}var Ubt=0;function Pbt(){return`MDConnection_${Ubt++}`}var Gf,zbt=(Gf=class{constructor(t,n,r){this.params=t,this.deferredDdbConnection=n,this.id=r,this.sequencer=new Abt(t.logSink)}static create(t){let n=Pbt(),r=Mbt(t),i=new Gf(t,r,n);return this.idMap[n]=i,i}async isInitialized(){return await this.deferredDdbConnection,!0}static getById(t){return this.idMap[t]}async tokenize(t){return(await this.deferredDdbConnection).bindings.tokenize(t)}enqueueQuery(t,n){var i;let r=this.sequencer.enqueueTask(new z_(this.deferredDdbConnection,t,n));return(i=this.params.logSink)==null||i.debug("enqueueQuery called",{id:r,query:Yd(t)}),r}async safeEvaluateQuery(t){try{return{status:"success",result:await this.evaluateQuery(t)}}catch(n){return{status:"error",err:n}}}async safeEvaluatePreparedStatement(t,...n){try{return{status:"success",result:await this.evaluatePreparedStatement(t,n)}}catch(r){return{status:"error",err:r}}}async safeEvaluateStreamingQuery(t){try{return{status:"success",result:await this.evaluateStreamingQuery(t)}}catch(n){return{status:"error",err:n}}}async safeEvaluateStreamingPreparedStatement(t,n){try{return{status:"success",result:await this.evaluateStreamingPreparedStatement(t,n)}}catch(r){return{status:"error",err:r}}}async safeEvaluateQueuedQuery(t){try{return{status:"success",result:await this.evaluateQueuedQuery(t)}}catch(n){return{status:"error",err:n}}}async evaluateQuery(t){var n;return(n=this.params.logSink)==null||n.debug("evaluateQuery called",{query:Yd(t)}),this.evaluateExclusive(new z_(this.deferredDdbConnection,t))}async evaluatePreparedStatement(t,n){var r;return(r=this.params.logSink)==null||r.debug("evaluatePreparedStatement called",{query:Yd(t)}),this.evaluateExclusive(new z_(this.deferredDdbConnection,t,n))}async evaluateStreamingQuery(t){var n;return(n=this.params.logSink)==null||n.debug("evaluateStreamingQuery called",{query:Yd(t)}),this.evaluateExclusive(new o4(this.deferredDdbConnection,t,void 0))}async evaluateStreamingPreparedStatement(t,n){var r;return(r=this.params.logSink)==null||r.debug("evaluateStreamingPreparedStatement called",{query:Yd(t)}),this.evaluateExclusive(new o4(this.deferredDdbConnection,t,n))}async evaluateExclusive(t){let n=this.sequencer.enqueueTask(t);return this.sequencer.taskResult(n).catch(c4)}async evaluateQueuedQuery(t){var n;return(n=this.params.logSink)==null||n.debug("evaluateQueuedQuery called",{queryId:t}),this.sequencer.taskResult(t).catch(c4)}async cancelQuery(t,n){var r;return(r=this.params.logSink)==null||r.debug("cancelQuery called",{queryId:t}),this.sequencer.cancelTask(t,n)}async close(){return(await this.deferredDdbConnection).close()}},Gf.idMap={},Gf);function c4(e){throw new Error(Bbt(Lbt(e)))}async function u4(e){if(e.type==="streaming"){const t=await e.arrowStream.readAll();return new On(t)}else throw Error("expected streaming result")}function jbt(e){const t=zbt.create({mdToken:e});return{query:async n=>{const{sql:r,type:i}=n,s=await t.evaluateStreamingQuery(r);switch(i){case"arrow":return u4(s);case"json":return Array.from(await u4(s));default:case"exec":return}}}}function Vbt(){const[e,t]=Mr.useState(!1),n=Mr.useCallback(async r=>{Xn().databaseConnector(jbt(r)),t(!0)},[]);return qt.jsxs(qt.Fragment,{children:[qt.jsx(Wyt,{}),qt.jsx("div",{id:"content-pane",children:e?qt.jsx(Zyt,{}):qt.jsx(Yyt,{connect:n})})]})}j_.createRoot(document.getElementById("root")).render(qt.jsx(Oz.StrictMode,{children:qt.jsx(Vbt,{})}));
