var pz=Object.defineProperty;var yz=(e,t,n)=>t in e?pz(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var zy=(e,t,n)=>(yz(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function u4(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var f4={exports:{}},wb={},d4={exports:{}},Pt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pp=Symbol.for("react.element"),mz=Symbol.for("react.portal"),gz=Symbol.for("react.fragment"),bz=Symbol.for("react.strict_mode"),vz=Symbol.for("react.profiler"),wz=Symbol.for("react.provider"),_z=Symbol.for("react.context"),Sz=Symbol.for("react.forward_ref"),xz=Symbol.for("react.suspense"),Iz=Symbol.for("react.memo"),Tz=Symbol.for("react.lazy"),qE=Symbol.iterator;function Ez(e){return e===null||typeof e!="object"?null:(e=qE&&e[qE]||e["@@iterator"],typeof e=="function"?e:null)}var h4={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p4=Object.assign,y4={};function Xf(e,t,n){this.props=e,this.context=t,this.refs=y4,this.updater=n||h4}Xf.prototype.isReactComponent={};Xf.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Xf.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function m4(){}m4.prototype=Xf.prototype;function Cx(e,t,n){this.props=e,this.context=t,this.refs=y4,this.updater=n||h4}var Ux=Cx.prototype=new m4;Ux.constructor=Cx;p4(Ux,Xf.prototype);Ux.isPureReactComponent=!0;var WE=Array.isArray,g4=Object.prototype.hasOwnProperty,Px={current:null},b4={key:!0,ref:!0,__self:!0,__source:!0};function v4(e,t,n){var r,i={},s=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)g4.call(t,r)&&!b4.hasOwnProperty(r)&&(i[r]=t[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Pp,type:e,key:s,ref:o,props:i,_owner:Px.current}}function Az(e,t){return{$$typeof:Pp,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function zx(e){return typeof e=="object"&&e!==null&&e.$$typeof===Pp}function Mz(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var HE=/\/+/g;function Jv(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Mz(""+e.key):t.toString(36)}function V0(e,t,n,r,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Pp:case mz:o=!0}}if(o)return o=e,i=i(o),e=r===""?"."+Jv(o,0):r,WE(i)?(n="",e!=null&&(n=e.replace(HE,"$&/")+"/"),V0(i,t,n,"",function(c){return c})):i!=null&&(zx(i)&&(i=Az(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(HE,"$&/")+"/")+e)),t.push(i)),1;if(o=0,r=r===""?".":r+":",WE(e))for(var a=0;a<e.length;a++){s=e[a];var l=r+Jv(s,a);o+=V0(s,t,n,l,i)}else if(l=Ez(e),typeof l=="function")for(e=l.call(e),a=0;!(s=e.next()).done;)s=s.value,l=r+Jv(s,a++),o+=V0(s,t,n,l,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function jy(e,t,n){if(e==null)return e;var r=[],i=0;return V0(e,r,"","",function(s){return t.call(n,s,i++)}),r}function $z(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Zn={current:null},Y0={transition:null},Nz={ReactCurrentDispatcher:Zn,ReactCurrentBatchConfig:Y0,ReactCurrentOwner:Px};Pt.Children={map:jy,forEach:function(e,t,n){jy(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return jy(e,function(){t++}),t},toArray:function(e){return jy(e,function(t){return t})||[]},only:function(e){if(!zx(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Pt.Component=Xf;Pt.Fragment=gz;Pt.Profiler=vz;Pt.PureComponent=Cx;Pt.StrictMode=bz;Pt.Suspense=xz;Pt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Nz;Pt.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=p4({},e.props),i=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=Px.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(l in t)g4.call(t,l)&&!b4.hasOwnProperty(l)&&(r[l]=t[l]===void 0&&a!==void 0?a[l]:t[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Pp,type:e.type,key:i,ref:s,props:r,_owner:o}};Pt.createContext=function(e){return e={$$typeof:_z,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:wz,_context:e},e.Consumer=e};Pt.createElement=v4;Pt.createFactory=function(e){var t=v4.bind(null,e);return t.type=e,t};Pt.createRef=function(){return{current:null}};Pt.forwardRef=function(e){return{$$typeof:Sz,render:e}};Pt.isValidElement=zx;Pt.lazy=function(e){return{$$typeof:Tz,_payload:{_status:-1,_result:e},_init:$z}};Pt.memo=function(e,t){return{$$typeof:Iz,type:e,compare:t===void 0?null:t}};Pt.startTransition=function(e){var t=Y0.transition;Y0.transition={};try{e()}finally{Y0.transition=t}};Pt.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Pt.useCallback=function(e,t){return Zn.current.useCallback(e,t)};Pt.useContext=function(e){return Zn.current.useContext(e)};Pt.useDebugValue=function(){};Pt.useDeferredValue=function(e){return Zn.current.useDeferredValue(e)};Pt.useEffect=function(e,t){return Zn.current.useEffect(e,t)};Pt.useId=function(){return Zn.current.useId()};Pt.useImperativeHandle=function(e,t,n){return Zn.current.useImperativeHandle(e,t,n)};Pt.useInsertionEffect=function(e,t){return Zn.current.useInsertionEffect(e,t)};Pt.useLayoutEffect=function(e,t){return Zn.current.useLayoutEffect(e,t)};Pt.useMemo=function(e,t){return Zn.current.useMemo(e,t)};Pt.useReducer=function(e,t,n){return Zn.current.useReducer(e,t,n)};Pt.useRef=function(e){return Zn.current.useRef(e)};Pt.useState=function(e){return Zn.current.useState(e)};Pt.useSyncExternalStore=function(e,t,n){return Zn.current.useSyncExternalStore(e,t,n)};Pt.useTransition=function(){return Zn.current.useTransition()};Pt.version="18.2.0";d4.exports=Pt;var Mr=d4.exports;const Dz=u4(Mr);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kz=Mr,Oz=Symbol.for("react.element"),Fz=Symbol.for("react.fragment"),Bz=Object.prototype.hasOwnProperty,Rz=kz.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Lz={key:!0,ref:!0,__self:!0,__source:!0};function w4(e,t,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)Bz.call(t,r)&&!Lz.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:Oz,type:e,key:s,ref:o,props:i,_owner:Rz.current}}wb.Fragment=Fz;wb.jsx=w4;wb.jsxs=w4;f4.exports=wb;var qt=f4.exports,z_={},_4={exports:{}},jr={},S4={exports:{}},x4={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(O,C){var F=O.length;O.push(C);t:for(;0<F;){var P=F-1>>>1,z=O[P];if(0<i(z,C))O[P]=C,O[F]=z,F=P;else break t}}function n(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var C=O[0],F=O.pop();if(F!==C){O[0]=F;t:for(var P=0,z=O.length,H=z>>>1;P<H;){var X=2*(P+1)-1,tt=O[X],Z=X+1,Y=O[Z];if(0>i(tt,F))Z<z&&0>i(Y,tt)?(O[P]=Y,O[Z]=F,P=Z):(O[P]=tt,O[X]=F,P=X);else if(Z<z&&0>i(Y,F))O[P]=Y,O[Z]=F,P=Z;else break t}}return C}function i(O,C){var F=O.sortIndex-C.sortIndex;return F!==0?F:O.id-C.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,f=null,d=3,h=!1,p=!1,g=!1,v=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(O){for(var C=n(c);C!==null;){if(C.callback===null)r(c);else if(C.startTime<=O)r(c),C.sortIndex=C.expirationTime,t(l,C);else break;C=n(c)}}function w(O){if(g=!1,b(O),!p)if(n(l)!==null)p=!0,$(S);else{var C=n(c);C!==null&&B(w,C.startTime-O)}}function S(O,C){p=!1,g&&(g=!1,y(E),E=-1),h=!0;var F=d;try{for(b(C),f=n(l);f!==null&&(!(f.expirationTime>C)||O&&!A());){var P=f.callback;if(typeof P=="function"){f.callback=null,d=f.priorityLevel;var z=P(f.expirationTime<=C);C=e.unstable_now(),typeof z=="function"?f.callback=z:f===n(l)&&r(l),b(C)}else r(l);f=n(l)}if(f!==null)var H=!0;else{var X=n(c);X!==null&&B(w,X.startTime-C),H=!1}return H}finally{f=null,d=F,h=!1}}var _=!1,x=null,E=-1,N=5,I=-1;function A(){return!(e.unstable_now()-I<N)}function k(){if(x!==null){var O=e.unstable_now();I=O;var C=!0;try{C=x(!0,O)}finally{C?R():(_=!1,x=null)}}else _=!1}var R;if(typeof m=="function")R=function(){m(k)};else if(typeof MessageChannel<"u"){var T=new MessageChannel,M=T.port2;T.port1.onmessage=k,R=function(){M.postMessage(null)}}else R=function(){v(k,0)};function $(O){x=O,_||(_=!0,R())}function B(O,C){E=v(function(){O(e.unstable_now())},C)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(O){O.callback=null},e.unstable_continueExecution=function(){p||h||(p=!0,$(S))},e.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<O?Math.floor(1e3/O):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(O){switch(d){case 1:case 2:case 3:var C=3;break;default:C=d}var F=d;d=C;try{return O()}finally{d=F}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(O,C){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var F=d;d=O;try{return C()}finally{d=F}},e.unstable_scheduleCallback=function(O,C,F){var P=e.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?P+F:P):F=P,O){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=F+z,O={id:u++,callback:C,priorityLevel:O,startTime:F,expirationTime:z,sortIndex:-1},F>P?(O.sortIndex=F,t(c,O),n(l)===null&&O===n(c)&&(g?(y(E),E=-1):g=!0,B(w,F-P))):(O.sortIndex=z,t(l,O),p||h||(p=!0,$(S))),O},e.unstable_shouldYield=A,e.unstable_wrapCallback=function(O){var C=d;return function(){var F=d;d=C;try{return O.apply(this,arguments)}finally{d=F}}}})(x4);S4.exports=x4;var Cz=S4.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var I4=Mr,Br=Cz;function q(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var T4=new Set,Rh={};function $c(e,t){cf(e,t),cf(e+"Capture",t)}function cf(e,t){for(Rh[e]=t,e=0;e<t.length;e++)T4.add(t[e])}var No=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),j_=Object.prototype.hasOwnProperty,Uz=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,GE={},XE={};function Pz(e){return j_.call(XE,e)?!0:j_.call(GE,e)?!1:Uz.test(e)?XE[e]=!0:(GE[e]=!0,!1)}function zz(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function jz(e,t,n,r){if(t===null||typeof t>"u"||zz(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Jn(e,t,n,r,i,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var Tn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Tn[e]=new Jn(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Tn[t]=new Jn(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Tn[e]=new Jn(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Tn[e]=new Jn(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Tn[e]=new Jn(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Tn[e]=new Jn(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Tn[e]=new Jn(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Tn[e]=new Jn(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Tn[e]=new Jn(e,5,!1,e.toLowerCase(),null,!1,!1)});var jx=/[\-:]([a-z])/g;function Vx(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(jx,Vx);Tn[t]=new Jn(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(jx,Vx);Tn[t]=new Jn(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(jx,Vx);Tn[t]=new Jn(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Tn[e]=new Jn(e,1,!1,e.toLowerCase(),null,!1,!1)});Tn.xlinkHref=new Jn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Tn[e]=new Jn(e,1,!1,e.toLowerCase(),null,!0,!0)});function Yx(e,t,n,r){var i=Tn.hasOwnProperty(t)?Tn[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(jz(t,n,i,r)&&(n=null),r||i===null?Pz(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Po=I4.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Vy=Symbol.for("react.element"),pu=Symbol.for("react.portal"),yu=Symbol.for("react.fragment"),qx=Symbol.for("react.strict_mode"),V_=Symbol.for("react.profiler"),E4=Symbol.for("react.provider"),A4=Symbol.for("react.context"),Wx=Symbol.for("react.forward_ref"),Y_=Symbol.for("react.suspense"),q_=Symbol.for("react.suspense_list"),Hx=Symbol.for("react.memo"),ra=Symbol.for("react.lazy"),M4=Symbol.for("react.offscreen"),QE=Symbol.iterator;function _d(e){return e===null||typeof e!="object"?null:(e=QE&&e[QE]||e["@@iterator"],typeof e=="function"?e:null)}var ze=Object.assign,tw;function qd(e){if(tw===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);tw=t&&t[1]||""}return`
`+tw+e}var ew=!1;function nw(e,t){if(!e||ew)return"";ew=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=o&&0<=a);break}}}finally{ew=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?qd(e):""}function Vz(e){switch(e.tag){case 5:return qd(e.type);case 16:return qd("Lazy");case 13:return qd("Suspense");case 19:return qd("SuspenseList");case 0:case 2:case 15:return e=nw(e.type,!1),e;case 11:return e=nw(e.type.render,!1),e;case 1:return e=nw(e.type,!0),e;default:return""}}function W_(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case yu:return"Fragment";case pu:return"Portal";case V_:return"Profiler";case qx:return"StrictMode";case Y_:return"Suspense";case q_:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case A4:return(e.displayName||"Context")+".Consumer";case E4:return(e._context.displayName||"Context")+".Provider";case Wx:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Hx:return t=e.displayName||null,t!==null?t:W_(e.type)||"Memo";case ra:t=e._payload,e=e._init;try{return W_(e(t))}catch{}}return null}function Yz(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return W_(t);case 8:return t===qx?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Na(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function $4(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function qz(e){var t=$4(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Yy(e){e._valueTracker||(e._valueTracker=qz(e))}function N4(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=$4(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Nm(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function H_(e,t){var n=t.checked;return ze({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function KE(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Na(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function D4(e,t){t=t.checked,t!=null&&Yx(e,"checked",t,!1)}function G_(e,t){D4(e,t);var n=Na(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?X_(e,t.type,n):t.hasOwnProperty("defaultValue")&&X_(e,t.type,Na(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function ZE(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function X_(e,t,n){(t!=="number"||Nm(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Wd=Array.isArray;function Ru(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Na(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Q_(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(q(91));return ze({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function JE(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(q(92));if(Wd(n)){if(1<n.length)throw Error(q(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Na(n)}}function k4(e,t){var n=Na(t.value),r=Na(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function tA(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function O4(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function K_(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?O4(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var qy,F4=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(qy=qy||document.createElement("div"),qy.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=qy.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Lh(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var ph={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Wz=["Webkit","ms","Moz","O"];Object.keys(ph).forEach(function(e){Wz.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ph[t]=ph[e]})});function B4(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||ph.hasOwnProperty(e)&&ph[e]?(""+t).trim():t+"px"}function R4(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=B4(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var Hz=ze({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Z_(e,t){if(t){if(Hz[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(q(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(q(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(q(61))}if(t.style!=null&&typeof t.style!="object")throw Error(q(62))}}function J_(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var t2=null;function Gx(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var e2=null,Lu=null,Cu=null;function eA(e){if(e=Vp(e)){if(typeof e2!="function")throw Error(q(280));var t=e.stateNode;t&&(t=Tb(t),e2(e.stateNode,e.type,t))}}function L4(e){Lu?Cu?Cu.push(e):Cu=[e]:Lu=e}function C4(){if(Lu){var e=Lu,t=Cu;if(Cu=Lu=null,eA(e),t)for(e=0;e<t.length;e++)eA(t[e])}}function U4(e,t){return e(t)}function P4(){}var rw=!1;function z4(e,t,n){if(rw)return e(t,n);rw=!0;try{return U4(e,t,n)}finally{rw=!1,(Lu!==null||Cu!==null)&&(P4(),C4())}}function Ch(e,t){var n=e.stateNode;if(n===null)return null;var r=Tb(n);if(r===null)return null;n=r[t];t:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break t;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(q(231,t,typeof n));return n}var n2=!1;if(No)try{var Sd={};Object.defineProperty(Sd,"passive",{get:function(){n2=!0}}),window.addEventListener("test",Sd,Sd),window.removeEventListener("test",Sd,Sd)}catch{n2=!1}function Gz(e,t,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var yh=!1,Dm=null,km=!1,r2=null,Xz={onError:function(e){yh=!0,Dm=e}};function Qz(e,t,n,r,i,s,o,a,l){yh=!1,Dm=null,Gz.apply(Xz,arguments)}function Kz(e,t,n,r,i,s,o,a,l){if(Qz.apply(this,arguments),yh){if(yh){var c=Dm;yh=!1,Dm=null}else throw Error(q(198));km||(km=!0,r2=c)}}function Nc(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function j4(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function nA(e){if(Nc(e)!==e)throw Error(q(188))}function Zz(e){var t=e.alternate;if(!t){if(t=Nc(e),t===null)throw Error(q(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return nA(i),e;if(s===r)return nA(i),t;s=s.sibling}throw Error(q(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(q(189))}}if(n.alternate!==r)throw Error(q(190))}if(n.tag!==3)throw Error(q(188));return n.stateNode.current===n?e:t}function V4(e){return e=Zz(e),e!==null?Y4(e):null}function Y4(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Y4(e);if(t!==null)return t;e=e.sibling}return null}var q4=Br.unstable_scheduleCallback,rA=Br.unstable_cancelCallback,Jz=Br.unstable_shouldYield,tj=Br.unstable_requestPaint,Xe=Br.unstable_now,ej=Br.unstable_getCurrentPriorityLevel,Xx=Br.unstable_ImmediatePriority,W4=Br.unstable_UserBlockingPriority,Om=Br.unstable_NormalPriority,nj=Br.unstable_LowPriority,H4=Br.unstable_IdlePriority,_b=null,Ns=null;function rj(e){if(Ns&&typeof Ns.onCommitFiberRoot=="function")try{Ns.onCommitFiberRoot(_b,e,void 0,(e.current.flags&128)===128)}catch{}}var Ri=Math.clz32?Math.clz32:oj,ij=Math.log,sj=Math.LN2;function oj(e){return e>>>=0,e===0?32:31-(ij(e)/sj|0)|0}var Wy=64,Hy=4194304;function Hd(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Fm(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Hd(a):(s&=o,s!==0&&(r=Hd(s)))}else o=n&~i,o!==0?r=Hd(o):s!==0&&(r=Hd(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Ri(t),i=1<<n,r|=e[n],t&=~i;return r}function aj(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function lj(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-Ri(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=aj(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}function i2(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function G4(){var e=Wy;return Wy<<=1,!(Wy&4194240)&&(Wy=64),e}function iw(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function zp(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ri(t),e[t]=n}function cj(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-Ri(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}function Qx(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Ri(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var le=0;function X4(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Q4,Kx,K4,Z4,J4,s2=!1,Gy=[],wa=null,_a=null,Sa=null,Uh=new Map,Ph=new Map,ua=[],uj="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function iA(e,t){switch(e){case"focusin":case"focusout":wa=null;break;case"dragenter":case"dragleave":_a=null;break;case"mouseover":case"mouseout":Sa=null;break;case"pointerover":case"pointerout":Uh.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ph.delete(t.pointerId)}}function xd(e,t,n,r,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},t!==null&&(t=Vp(t),t!==null&&Kx(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function fj(e,t,n,r,i){switch(t){case"focusin":return wa=xd(wa,e,t,n,r,i),!0;case"dragenter":return _a=xd(_a,e,t,n,r,i),!0;case"mouseover":return Sa=xd(Sa,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Uh.set(s,xd(Uh.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Ph.set(s,xd(Ph.get(s)||null,e,t,n,r,i)),!0}return!1}function tD(e){var t=Bl(e.target);if(t!==null){var n=Nc(t);if(n!==null){if(t=n.tag,t===13){if(t=j4(n),t!==null){e.blockedOn=t,J4(e.priority,function(){K4(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function q0(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=o2(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);t2=r,n.target.dispatchEvent(r),t2=null}else return t=Vp(n),t!==null&&Kx(t),e.blockedOn=n,!1;t.shift()}return!0}function sA(e,t,n){q0(e)&&n.delete(t)}function dj(){s2=!1,wa!==null&&q0(wa)&&(wa=null),_a!==null&&q0(_a)&&(_a=null),Sa!==null&&q0(Sa)&&(Sa=null),Uh.forEach(sA),Ph.forEach(sA)}function Id(e,t){e.blockedOn===t&&(e.blockedOn=null,s2||(s2=!0,Br.unstable_scheduleCallback(Br.unstable_NormalPriority,dj)))}function zh(e){function t(i){return Id(i,e)}if(0<Gy.length){Id(Gy[0],e);for(var n=1;n<Gy.length;n++){var r=Gy[n];r.blockedOn===e&&(r.blockedOn=null)}}for(wa!==null&&Id(wa,e),_a!==null&&Id(_a,e),Sa!==null&&Id(Sa,e),Uh.forEach(t),Ph.forEach(t),n=0;n<ua.length;n++)r=ua[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<ua.length&&(n=ua[0],n.blockedOn===null);)tD(n),n.blockedOn===null&&ua.shift()}var Uu=Po.ReactCurrentBatchConfig,Bm=!0;function hj(e,t,n,r){var i=le,s=Uu.transition;Uu.transition=null;try{le=1,Zx(e,t,n,r)}finally{le=i,Uu.transition=s}}function pj(e,t,n,r){var i=le,s=Uu.transition;Uu.transition=null;try{le=4,Zx(e,t,n,r)}finally{le=i,Uu.transition=s}}function Zx(e,t,n,r){if(Bm){var i=o2(e,t,n,r);if(i===null)pw(e,t,r,Rm,n),iA(e,r);else if(fj(i,e,t,n,r))r.stopPropagation();else if(iA(e,r),t&4&&-1<uj.indexOf(e)){for(;i!==null;){var s=Vp(i);if(s!==null&&Q4(s),s=o2(e,t,n,r),s===null&&pw(e,t,r,Rm,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else pw(e,t,r,null,n)}}var Rm=null;function o2(e,t,n,r){if(Rm=null,e=Gx(r),e=Bl(e),e!==null)if(t=Nc(e),t===null)e=null;else if(n=t.tag,n===13){if(e=j4(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Rm=e,null}function eD(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ej()){case Xx:return 1;case W4:return 4;case Om:case nj:return 16;case H4:return 536870912;default:return 16}default:return 16}}var ma=null,Jx=null,W0=null;function nD(){if(W0)return W0;var e,t=Jx,n=t.length,r,i="value"in ma?ma.value:ma.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[s-r];r++);return W0=i.slice(e,1<r?1-r:void 0)}function H0(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Xy(){return!0}function oA(){return!1}function Vr(e){function t(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Xy:oA,this.isPropagationStopped=oA,this}return ze(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Xy)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Xy)},persist:function(){},isPersistent:Xy}),t}var Qf={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tI=Vr(Qf),jp=ze({},Qf,{view:0,detail:0}),yj=Vr(jp),sw,ow,Td,Sb=ze({},jp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:eI,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Td&&(Td&&e.type==="mousemove"?(sw=e.screenX-Td.screenX,ow=e.screenY-Td.screenY):ow=sw=0,Td=e),sw)},movementY:function(e){return"movementY"in e?e.movementY:ow}}),aA=Vr(Sb),mj=ze({},Sb,{dataTransfer:0}),gj=Vr(mj),bj=ze({},jp,{relatedTarget:0}),aw=Vr(bj),vj=ze({},Qf,{animationName:0,elapsedTime:0,pseudoElement:0}),wj=Vr(vj),_j=ze({},Qf,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Sj=Vr(_j),xj=ze({},Qf,{data:0}),lA=Vr(xj),Ij={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Tj={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ej={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Aj(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Ej[e])?!!t[e]:!1}function eI(){return Aj}var Mj=ze({},jp,{key:function(e){if(e.key){var t=Ij[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=H0(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Tj[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:eI,charCode:function(e){return e.type==="keypress"?H0(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?H0(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),$j=Vr(Mj),Nj=ze({},Sb,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cA=Vr(Nj),Dj=ze({},jp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:eI}),kj=Vr(Dj),Oj=ze({},Qf,{propertyName:0,elapsedTime:0,pseudoElement:0}),Fj=Vr(Oj),Bj=ze({},Sb,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rj=Vr(Bj),Lj=[9,13,27,32],nI=No&&"CompositionEvent"in window,mh=null;No&&"documentMode"in document&&(mh=document.documentMode);var Cj=No&&"TextEvent"in window&&!mh,rD=No&&(!nI||mh&&8<mh&&11>=mh),uA=" ",fA=!1;function iD(e,t){switch(e){case"keyup":return Lj.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function sD(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var mu=!1;function Uj(e,t){switch(e){case"compositionend":return sD(t);case"keypress":return t.which!==32?null:(fA=!0,uA);case"textInput":return e=t.data,e===uA&&fA?null:e;default:return null}}function Pj(e,t){if(mu)return e==="compositionend"||!nI&&iD(e,t)?(e=nD(),W0=Jx=ma=null,mu=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return rD&&t.locale!=="ko"?null:t.data;default:return null}}var zj={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function dA(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!zj[e.type]:t==="textarea"}function oD(e,t,n,r){L4(r),t=Lm(t,"onChange"),0<t.length&&(n=new tI("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var gh=null,jh=null;function jj(e){gD(e,0)}function xb(e){var t=vu(e);if(N4(t))return e}function Vj(e,t){if(e==="change")return t}var aD=!1;if(No){var lw;if(No){var cw="oninput"in document;if(!cw){var hA=document.createElement("div");hA.setAttribute("oninput","return;"),cw=typeof hA.oninput=="function"}lw=cw}else lw=!1;aD=lw&&(!document.documentMode||9<document.documentMode)}function pA(){gh&&(gh.detachEvent("onpropertychange",lD),jh=gh=null)}function lD(e){if(e.propertyName==="value"&&xb(jh)){var t=[];oD(t,jh,e,Gx(e)),z4(jj,t)}}function Yj(e,t,n){e==="focusin"?(pA(),gh=t,jh=n,gh.attachEvent("onpropertychange",lD)):e==="focusout"&&pA()}function qj(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return xb(jh)}function Wj(e,t){if(e==="click")return xb(t)}function Hj(e,t){if(e==="input"||e==="change")return xb(t)}function Gj(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ui=typeof Object.is=="function"?Object.is:Gj;function Vh(e,t){if(Ui(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!j_.call(t,i)||!Ui(e[i],t[i]))return!1}return!0}function yA(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function mA(e,t){var n=yA(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}t:{for(;n;){if(n.nextSibling){n=n.nextSibling;break t}n=n.parentNode}n=void 0}n=yA(n)}}function cD(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?cD(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function uD(){for(var e=window,t=Nm();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Nm(e.document)}return t}function rI(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Xj(e){var t=uD(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&cD(n.ownerDocument.documentElement,n)){if(r!==null&&rI(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=mA(n,s);var o=mA(n,r);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Qj=No&&"documentMode"in document&&11>=document.documentMode,gu=null,a2=null,bh=null,l2=!1;function gA(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;l2||gu==null||gu!==Nm(r)||(r=gu,"selectionStart"in r&&rI(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),bh&&Vh(bh,r)||(bh=r,r=Lm(a2,"onSelect"),0<r.length&&(t=new tI("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gu)))}function Qy(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var bu={animationend:Qy("Animation","AnimationEnd"),animationiteration:Qy("Animation","AnimationIteration"),animationstart:Qy("Animation","AnimationStart"),transitionend:Qy("Transition","TransitionEnd")},uw={},fD={};No&&(fD=document.createElement("div").style,"AnimationEvent"in window||(delete bu.animationend.animation,delete bu.animationiteration.animation,delete bu.animationstart.animation),"TransitionEvent"in window||delete bu.transitionend.transition);function Ib(e){if(uw[e])return uw[e];if(!bu[e])return e;var t=bu[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in fD)return uw[e]=t[n];return e}var dD=Ib("animationend"),hD=Ib("animationiteration"),pD=Ib("animationstart"),yD=Ib("transitionend"),mD=new Map,bA="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ja(e,t){mD.set(e,t),$c(t,[e])}for(var fw=0;fw<bA.length;fw++){var dw=bA[fw],Kj=dw.toLowerCase(),Zj=dw[0].toUpperCase()+dw.slice(1);Ja(Kj,"on"+Zj)}Ja(dD,"onAnimationEnd");Ja(hD,"onAnimationIteration");Ja(pD,"onAnimationStart");Ja("dblclick","onDoubleClick");Ja("focusin","onFocus");Ja("focusout","onBlur");Ja(yD,"onTransitionEnd");cf("onMouseEnter",["mouseout","mouseover"]);cf("onMouseLeave",["mouseout","mouseover"]);cf("onPointerEnter",["pointerout","pointerover"]);cf("onPointerLeave",["pointerout","pointerover"]);$c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));$c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));$c("onBeforeInput",["compositionend","keypress","textInput","paste"]);$c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));$c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));$c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Gd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Jj=new Set("cancel close invalid load scroll toggle".split(" ").concat(Gd));function vA(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Kz(r,t,void 0,e),e.currentTarget=null}function gD(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;t:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break t;vA(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break t;vA(i,a,c),s=l}}}if(km)throw e=r2,km=!1,r2=null,e}function Se(e,t){var n=t[h2];n===void 0&&(n=t[h2]=new Set);var r=e+"__bubble";n.has(r)||(bD(t,e,2,!1),n.add(r))}function hw(e,t,n){var r=0;t&&(r|=4),bD(n,e,r,t)}var Ky="_reactListening"+Math.random().toString(36).slice(2);function Yh(e){if(!e[Ky]){e[Ky]=!0,T4.forEach(function(n){n!=="selectionchange"&&(Jj.has(n)||hw(n,!1,e),hw(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ky]||(t[Ky]=!0,hw("selectionchange",!1,t))}}function bD(e,t,n,r){switch(eD(t)){case 1:var i=hj;break;case 4:i=pj;break;default:i=Zx}n=i.bind(null,t,n,e),i=void 0,!n2||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function pw(e,t,n,r,i){var s=r;if(!(t&1)&&!(t&2)&&r!==null)t:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Bl(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue t}a=a.parentNode}}r=r.return}z4(function(){var c=s,u=Gx(n),f=[];t:{var d=mD.get(e);if(d!==void 0){var h=tI,p=e;switch(e){case"keypress":if(H0(n)===0)break t;case"keydown":case"keyup":h=$j;break;case"focusin":p="focus",h=aw;break;case"focusout":p="blur",h=aw;break;case"beforeblur":case"afterblur":h=aw;break;case"click":if(n.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=aA;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=gj;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=kj;break;case dD:case hD:case pD:h=wj;break;case yD:h=Fj;break;case"scroll":h=yj;break;case"wheel":h=Rj;break;case"copy":case"cut":case"paste":h=Sj;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=cA}var g=(t&4)!==0,v=!g&&e==="scroll",y=g?d!==null?d+"Capture":null:d;g=[];for(var m=c,b;m!==null;){b=m;var w=b.stateNode;if(b.tag===5&&w!==null&&(b=w,y!==null&&(w=Ch(m,y),w!=null&&g.push(qh(m,w,b)))),v)break;m=m.return}0<g.length&&(d=new h(d,p,null,n,u),f.push({event:d,listeners:g}))}}if(!(t&7)){t:{if(d=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",d&&n!==t2&&(p=n.relatedTarget||n.fromElement)&&(Bl(p)||p[Do]))break t;if((h||d)&&(d=u.window===u?u:(d=u.ownerDocument)?d.defaultView||d.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=c,p=p?Bl(p):null,p!==null&&(v=Nc(p),p!==v||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=c),h!==p)){if(g=aA,w="onMouseLeave",y="onMouseEnter",m="mouse",(e==="pointerout"||e==="pointerover")&&(g=cA,w="onPointerLeave",y="onPointerEnter",m="pointer"),v=h==null?d:vu(h),b=p==null?d:vu(p),d=new g(w,m+"leave",h,n,u),d.target=v,d.relatedTarget=b,w=null,Bl(u)===c&&(g=new g(y,m+"enter",p,n,u),g.target=b,g.relatedTarget=v,w=g),v=w,h&&p)e:{for(g=h,y=p,m=0,b=g;b;b=Lc(b))m++;for(b=0,w=y;w;w=Lc(w))b++;for(;0<m-b;)g=Lc(g),m--;for(;0<b-m;)y=Lc(y),b--;for(;m--;){if(g===y||y!==null&&g===y.alternate)break e;g=Lc(g),y=Lc(y)}g=null}else g=null;h!==null&&wA(f,d,h,g,!1),p!==null&&v!==null&&wA(f,v,p,g,!0)}}t:{if(d=c?vu(c):window,h=d.nodeName&&d.nodeName.toLowerCase(),h==="select"||h==="input"&&d.type==="file")var S=Vj;else if(dA(d))if(aD)S=Hj;else{S=qj;var _=Yj}else(h=d.nodeName)&&h.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(S=Wj);if(S&&(S=S(e,c))){oD(f,S,n,u);break t}_&&_(e,d,c),e==="focusout"&&(_=d._wrapperState)&&_.controlled&&d.type==="number"&&X_(d,"number",d.value)}switch(_=c?vu(c):window,e){case"focusin":(dA(_)||_.contentEditable==="true")&&(gu=_,a2=c,bh=null);break;case"focusout":bh=a2=gu=null;break;case"mousedown":l2=!0;break;case"contextmenu":case"mouseup":case"dragend":l2=!1,gA(f,n,u);break;case"selectionchange":if(Qj)break;case"keydown":case"keyup":gA(f,n,u)}var x;if(nI)t:{switch(e){case"compositionstart":var E="onCompositionStart";break t;case"compositionend":E="onCompositionEnd";break t;case"compositionupdate":E="onCompositionUpdate";break t}E=void 0}else mu?iD(e,n)&&(E="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(rD&&n.locale!=="ko"&&(mu||E!=="onCompositionStart"?E==="onCompositionEnd"&&mu&&(x=nD()):(ma=u,Jx="value"in ma?ma.value:ma.textContent,mu=!0)),_=Lm(c,E),0<_.length&&(E=new lA(E,e,null,n,u),f.push({event:E,listeners:_}),x?E.data=x:(x=sD(n),x!==null&&(E.data=x)))),(x=Cj?Uj(e,n):Pj(e,n))&&(c=Lm(c,"onBeforeInput"),0<c.length&&(u=new lA("onBeforeInput","beforeinput",null,n,u),f.push({event:u,listeners:c}),u.data=x))}gD(f,t)})}function qh(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Lm(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Ch(e,n),s!=null&&r.unshift(qh(e,s,i)),s=Ch(e,t),s!=null&&r.push(qh(e,s,i))),e=e.return}return r}function Lc(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function wA(e,t,n,r,i){for(var s=t._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=Ch(n,s),l!=null&&o.unshift(qh(n,l,a))):i||(l=Ch(n,s),l!=null&&o.push(qh(n,l,a)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var tV=/\r\n?/g,eV=/\u0000|\uFFFD/g;function _A(e){return(typeof e=="string"?e:""+e).replace(tV,`
`).replace(eV,"")}function Zy(e,t,n){if(t=_A(t),_A(e)!==t&&n)throw Error(q(425))}function Cm(){}var c2=null,u2=null;function f2(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var d2=typeof setTimeout=="function"?setTimeout:void 0,nV=typeof clearTimeout=="function"?clearTimeout:void 0,SA=typeof Promise=="function"?Promise:void 0,rV=typeof queueMicrotask=="function"?queueMicrotask:typeof SA<"u"?function(e){return SA.resolve(null).then(e).catch(iV)}:d2;function iV(e){setTimeout(function(){throw e})}function yw(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),zh(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);zh(t)}function xa(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function xA(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Kf=Math.random().toString(36).slice(2),hs="__reactFiber$"+Kf,Wh="__reactProps$"+Kf,Do="__reactContainer$"+Kf,h2="__reactEvents$"+Kf,sV="__reactListeners$"+Kf,oV="__reactHandles$"+Kf;function Bl(e){var t=e[hs];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Do]||n[hs]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=xA(e);e!==null;){if(n=e[hs])return n;e=xA(e)}return t}e=n,n=e.parentNode}return null}function Vp(e){return e=e[hs]||e[Do],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function vu(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(q(33))}function Tb(e){return e[Wh]||null}var p2=[],wu=-1;function tl(e){return{current:e}}function xe(e){0>wu||(e.current=p2[wu],p2[wu]=null,wu--)}function we(e,t){wu++,p2[wu]=e.current,e.current=t}var Da={},Rn=tl(Da),cr=tl(!1),lc=Da;function uf(e,t){var n=e.type.contextTypes;if(!n)return Da;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function ur(e){return e=e.childContextTypes,e!=null}function Um(){xe(cr),xe(Rn)}function IA(e,t,n){if(Rn.current!==Da)throw Error(q(168));we(Rn,t),we(cr,n)}function vD(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(q(108,Yz(e)||"Unknown",i));return ze({},n,r)}function Pm(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Da,lc=Rn.current,we(Rn,e),we(cr,cr.current),!0}function TA(e,t,n){var r=e.stateNode;if(!r)throw Error(q(169));n?(e=vD(e,t,lc),r.__reactInternalMemoizedMergedChildContext=e,xe(cr),xe(Rn),we(Rn,e)):xe(cr),we(cr,n)}var fo=null,Eb=!1,mw=!1;function wD(e){fo===null?fo=[e]:fo.push(e)}function aV(e){Eb=!0,wD(e)}function el(){if(!mw&&fo!==null){mw=!0;var e=0,t=le;try{var n=fo;for(le=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}fo=null,Eb=!1}catch(i){throw fo!==null&&(fo=fo.slice(e+1)),q4(Xx,el),i}finally{le=t,mw=!1}}return null}var _u=[],Su=0,zm=null,jm=0,Zr=[],Jr=0,cc=null,go=1,bo="";function vl(e,t){_u[Su++]=jm,_u[Su++]=zm,zm=e,jm=t}function _D(e,t,n){Zr[Jr++]=go,Zr[Jr++]=bo,Zr[Jr++]=cc,cc=e;var r=go;e=bo;var i=32-Ri(r)-1;r&=~(1<<i),n+=1;var s=32-Ri(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,go=1<<32-Ri(t)+i|n<<i|r,bo=s+e}else go=1<<s|n<<i|r,bo=e}function iI(e){e.return!==null&&(vl(e,1),_D(e,1,0))}function sI(e){for(;e===zm;)zm=_u[--Su],_u[Su]=null,jm=_u[--Su],_u[Su]=null;for(;e===cc;)cc=Zr[--Jr],Zr[Jr]=null,bo=Zr[--Jr],Zr[Jr]=null,go=Zr[--Jr],Zr[Jr]=null}var Or=null,$r=null,Ae=!1,Ni=null;function SD(e,t){var n=ii(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function EA(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Or=e,$r=xa(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Or=e,$r=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=cc!==null?{id:go,overflow:bo}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=ii(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Or=e,$r=null,!0):!1;default:return!1}}function y2(e){return(e.mode&1)!==0&&(e.flags&128)===0}function m2(e){if(Ae){var t=$r;if(t){var n=t;if(!EA(e,t)){if(y2(e))throw Error(q(418));t=xa(n.nextSibling);var r=Or;t&&EA(e,t)?SD(r,n):(e.flags=e.flags&-4097|2,Ae=!1,Or=e)}}else{if(y2(e))throw Error(q(418));e.flags=e.flags&-4097|2,Ae=!1,Or=e}}}function AA(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Or=e}function Jy(e){if(e!==Or)return!1;if(!Ae)return AA(e),Ae=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!f2(e.type,e.memoizedProps)),t&&(t=$r)){if(y2(e))throw xD(),Error(q(418));for(;t;)SD(e,t),t=xa(t.nextSibling)}if(AA(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(q(317));t:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){$r=xa(e.nextSibling);break t}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}$r=null}}else $r=Or?xa(e.stateNode.nextSibling):null;return!0}function xD(){for(var e=$r;e;)e=xa(e.nextSibling)}function ff(){$r=Or=null,Ae=!1}function oI(e){Ni===null?Ni=[e]:Ni.push(e)}var lV=Po.ReactCurrentBatchConfig;function Ti(e,t){if(e&&e.defaultProps){t=ze({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}var Vm=tl(null),Ym=null,xu=null,aI=null;function lI(){aI=xu=Ym=null}function cI(e){var t=Vm.current;xe(Vm),e._currentValue=t}function g2(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Pu(e,t){Ym=e,aI=xu=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ar=!0),e.firstContext=null)}function pi(e){var t=e._currentValue;if(aI!==e)if(e={context:e,memoizedValue:t,next:null},xu===null){if(Ym===null)throw Error(q(308));xu=e,Ym.dependencies={lanes:0,firstContext:e}}else xu=xu.next=e;return t}var Rl=null;function uI(e){Rl===null?Rl=[e]:Rl.push(e)}function ID(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,uI(t)):(n.next=i.next,i.next=n),t.interleaved=n,ko(e,r)}function ko(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var ia=!1;function fI(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function TD(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Io(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ia(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Gt&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,ko(e,n)}return i=r.interleaved,i===null?(t.next=t,uI(r)):(t.next=i.next,i.next=t),r.interleaved=t,ko(e,n)}function G0(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Qx(e,n)}}function MA(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function qm(e,t,n,r){var i=e.updateQueue;ia=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=e.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var f=i.baseState;o=0,u=c=l=null,a=s;do{var d=a.lane,h=a.eventTime;if((r&d)===d){u!==null&&(u=u.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});t:{var p=e,g=a;switch(d=t,h=n,g.tag){case 1:if(p=g.payload,typeof p=="function"){f=p.call(h,f,d);break t}f=p;break t;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,d=typeof p=="function"?p.call(h,f,d):p,d==null)break t;f=ze({},f,d);break t;case 2:ia=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,d=i.effects,d===null?i.effects=[a]:d.push(a))}else h={eventTime:h,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=h,l=f):u=u.next=h,o|=d;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;d=a,a=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(u===null&&(l=f),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);fc|=o,e.lanes=o,e.memoizedState=f}}function $A(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(q(191,i));i.call(r)}}}var ED=new I4.Component().refs;function b2(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:ze({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Ab={isMounted:function(e){return(e=e._reactInternals)?Nc(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Hn(),i=Ea(e),s=Io(r,i);s.payload=t,n!=null&&(s.callback=n),t=Ia(e,s,i),t!==null&&(Li(t,e,i,r),G0(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Hn(),i=Ea(e),s=Io(r,i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=Ia(e,s,i),t!==null&&(Li(t,e,i,r),G0(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Hn(),r=Ea(e),i=Io(n,r);i.tag=2,t!=null&&(i.callback=t),t=Ia(e,i,r),t!==null&&(Li(t,e,r,n),G0(t,e,r))}};function NA(e,t,n,r,i,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,o):t.prototype&&t.prototype.isPureReactComponent?!Vh(n,r)||!Vh(i,s):!0}function AD(e,t,n){var r=!1,i=Da,s=t.contextType;return typeof s=="object"&&s!==null?s=pi(s):(i=ur(t)?lc:Rn.current,r=t.contextTypes,s=(r=r!=null)?uf(e,i):Da),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ab,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function DA(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ab.enqueueReplaceState(t,t.state,null)}function v2(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=ED,fI(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=pi(s):(s=ur(t)?lc:Rn.current,i.context=uf(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(b2(e,t,s,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&Ab.enqueueReplaceState(i,i.state,null),qm(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Ed(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(q(309));var r=n.stateNode}if(!r)throw Error(q(147,e));var i=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var a=i.refs;a===ED&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(q(284));if(!n._owner)throw Error(q(290,e))}return e}function t0(e,t){throw e=Object.prototype.toString.call(t),Error(q(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function kA(e){var t=e._init;return t(e._payload)}function MD(e){function t(y,m){if(e){var b=y.deletions;b===null?(y.deletions=[m],y.flags|=16):b.push(m)}}function n(y,m){if(!e)return null;for(;m!==null;)t(y,m),m=m.sibling;return null}function r(y,m){for(y=new Map;m!==null;)m.key!==null?y.set(m.key,m):y.set(m.index,m),m=m.sibling;return y}function i(y,m){return y=Aa(y,m),y.index=0,y.sibling=null,y}function s(y,m,b){return y.index=b,e?(b=y.alternate,b!==null?(b=b.index,b<m?(y.flags|=2,m):b):(y.flags|=2,m)):(y.flags|=1048576,m)}function o(y){return e&&y.alternate===null&&(y.flags|=2),y}function a(y,m,b,w){return m===null||m.tag!==6?(m=xw(b,y.mode,w),m.return=y,m):(m=i(m,b),m.return=y,m)}function l(y,m,b,w){var S=b.type;return S===yu?u(y,m,b.props.children,w,b.key):m!==null&&(m.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===ra&&kA(S)===m.type)?(w=i(m,b.props),w.ref=Ed(y,m,b),w.return=y,w):(w=tm(b.type,b.key,b.props,null,y.mode,w),w.ref=Ed(y,m,b),w.return=y,w)}function c(y,m,b,w){return m===null||m.tag!==4||m.stateNode.containerInfo!==b.containerInfo||m.stateNode.implementation!==b.implementation?(m=Iw(b,y.mode,w),m.return=y,m):(m=i(m,b.children||[]),m.return=y,m)}function u(y,m,b,w,S){return m===null||m.tag!==7?(m=Jl(b,y.mode,w,S),m.return=y,m):(m=i(m,b),m.return=y,m)}function f(y,m,b){if(typeof m=="string"&&m!==""||typeof m=="number")return m=xw(""+m,y.mode,b),m.return=y,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Vy:return b=tm(m.type,m.key,m.props,null,y.mode,b),b.ref=Ed(y,null,m),b.return=y,b;case pu:return m=Iw(m,y.mode,b),m.return=y,m;case ra:var w=m._init;return f(y,w(m._payload),b)}if(Wd(m)||_d(m))return m=Jl(m,y.mode,b,null),m.return=y,m;t0(y,m)}return null}function d(y,m,b,w){var S=m!==null?m.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return S!==null?null:a(y,m,""+b,w);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Vy:return b.key===S?l(y,m,b,w):null;case pu:return b.key===S?c(y,m,b,w):null;case ra:return S=b._init,d(y,m,S(b._payload),w)}if(Wd(b)||_d(b))return S!==null?null:u(y,m,b,w,null);t0(y,b)}return null}function h(y,m,b,w,S){if(typeof w=="string"&&w!==""||typeof w=="number")return y=y.get(b)||null,a(m,y,""+w,S);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Vy:return y=y.get(w.key===null?b:w.key)||null,l(m,y,w,S);case pu:return y=y.get(w.key===null?b:w.key)||null,c(m,y,w,S);case ra:var _=w._init;return h(y,m,b,_(w._payload),S)}if(Wd(w)||_d(w))return y=y.get(b)||null,u(m,y,w,S,null);t0(m,w)}return null}function p(y,m,b,w){for(var S=null,_=null,x=m,E=m=0,N=null;x!==null&&E<b.length;E++){x.index>E?(N=x,x=null):N=x.sibling;var I=d(y,x,b[E],w);if(I===null){x===null&&(x=N);break}e&&x&&I.alternate===null&&t(y,x),m=s(I,m,E),_===null?S=I:_.sibling=I,_=I,x=N}if(E===b.length)return n(y,x),Ae&&vl(y,E),S;if(x===null){for(;E<b.length;E++)x=f(y,b[E],w),x!==null&&(m=s(x,m,E),_===null?S=x:_.sibling=x,_=x);return Ae&&vl(y,E),S}for(x=r(y,x);E<b.length;E++)N=h(x,y,E,b[E],w),N!==null&&(e&&N.alternate!==null&&x.delete(N.key===null?E:N.key),m=s(N,m,E),_===null?S=N:_.sibling=N,_=N);return e&&x.forEach(function(A){return t(y,A)}),Ae&&vl(y,E),S}function g(y,m,b,w){var S=_d(b);if(typeof S!="function")throw Error(q(150));if(b=S.call(b),b==null)throw Error(q(151));for(var _=S=null,x=m,E=m=0,N=null,I=b.next();x!==null&&!I.done;E++,I=b.next()){x.index>E?(N=x,x=null):N=x.sibling;var A=d(y,x,I.value,w);if(A===null){x===null&&(x=N);break}e&&x&&A.alternate===null&&t(y,x),m=s(A,m,E),_===null?S=A:_.sibling=A,_=A,x=N}if(I.done)return n(y,x),Ae&&vl(y,E),S;if(x===null){for(;!I.done;E++,I=b.next())I=f(y,I.value,w),I!==null&&(m=s(I,m,E),_===null?S=I:_.sibling=I,_=I);return Ae&&vl(y,E),S}for(x=r(y,x);!I.done;E++,I=b.next())I=h(x,y,E,I.value,w),I!==null&&(e&&I.alternate!==null&&x.delete(I.key===null?E:I.key),m=s(I,m,E),_===null?S=I:_.sibling=I,_=I);return e&&x.forEach(function(k){return t(y,k)}),Ae&&vl(y,E),S}function v(y,m,b,w){if(typeof b=="object"&&b!==null&&b.type===yu&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Vy:t:{for(var S=b.key,_=m;_!==null;){if(_.key===S){if(S=b.type,S===yu){if(_.tag===7){n(y,_.sibling),m=i(_,b.props.children),m.return=y,y=m;break t}}else if(_.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===ra&&kA(S)===_.type){n(y,_.sibling),m=i(_,b.props),m.ref=Ed(y,_,b),m.return=y,y=m;break t}n(y,_);break}else t(y,_);_=_.sibling}b.type===yu?(m=Jl(b.props.children,y.mode,w,b.key),m.return=y,y=m):(w=tm(b.type,b.key,b.props,null,y.mode,w),w.ref=Ed(y,m,b),w.return=y,y=w)}return o(y);case pu:t:{for(_=b.key;m!==null;){if(m.key===_)if(m.tag===4&&m.stateNode.containerInfo===b.containerInfo&&m.stateNode.implementation===b.implementation){n(y,m.sibling),m=i(m,b.children||[]),m.return=y,y=m;break t}else{n(y,m);break}else t(y,m);m=m.sibling}m=Iw(b,y.mode,w),m.return=y,y=m}return o(y);case ra:return _=b._init,v(y,m,_(b._payload),w)}if(Wd(b))return p(y,m,b,w);if(_d(b))return g(y,m,b,w);t0(y,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,m!==null&&m.tag===6?(n(y,m.sibling),m=i(m,b),m.return=y,y=m):(n(y,m),m=xw(b,y.mode,w),m.return=y,y=m),o(y)):n(y,m)}return v}var df=MD(!0),$D=MD(!1),Yp={},Ds=tl(Yp),Hh=tl(Yp),Gh=tl(Yp);function Ll(e){if(e===Yp)throw Error(q(174));return e}function dI(e,t){switch(we(Gh,t),we(Hh,e),we(Ds,Yp),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:K_(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=K_(t,e)}xe(Ds),we(Ds,t)}function hf(){xe(Ds),xe(Hh),xe(Gh)}function ND(e){Ll(Gh.current);var t=Ll(Ds.current),n=K_(t,e.type);t!==n&&(we(Hh,e),we(Ds,n))}function hI(e){Hh.current===e&&(xe(Ds),xe(Hh))}var Fe=tl(0);function Wm(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var gw=[];function pI(){for(var e=0;e<gw.length;e++)gw[e]._workInProgressVersionPrimary=null;gw.length=0}var X0=Po.ReactCurrentDispatcher,bw=Po.ReactCurrentBatchConfig,uc=0,Ue=null,rn=null,pn=null,Hm=!1,vh=!1,Xh=0,cV=0;function En(){throw Error(q(321))}function yI(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Ui(e[n],t[n]))return!1;return!0}function mI(e,t,n,r,i,s){if(uc=s,Ue=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,X0.current=e===null||e.memoizedState===null?hV:pV,e=n(r,i),vh){s=0;do{if(vh=!1,Xh=0,25<=s)throw Error(q(301));s+=1,pn=rn=null,t.updateQueue=null,X0.current=yV,e=n(r,i)}while(vh)}if(X0.current=Gm,t=rn!==null&&rn.next!==null,uc=0,pn=rn=Ue=null,Hm=!1,t)throw Error(q(300));return e}function gI(){var e=Xh!==0;return Xh=0,e}function as(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pn===null?Ue.memoizedState=pn=e:pn=pn.next=e,pn}function yi(){if(rn===null){var e=Ue.alternate;e=e!==null?e.memoizedState:null}else e=rn.next;var t=pn===null?Ue.memoizedState:pn.next;if(t!==null)pn=t,rn=e;else{if(e===null)throw Error(q(310));rn=e,e={memoizedState:rn.memoizedState,baseState:rn.baseState,baseQueue:rn.baseQueue,queue:rn.queue,next:null},pn===null?Ue.memoizedState=pn=e:pn=pn.next=e}return pn}function Qh(e,t){return typeof t=="function"?t(e):t}function vw(e){var t=yi(),n=t.queue;if(n===null)throw Error(q(311));n.lastRenderedReducer=e;var r=rn,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((uc&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var f={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=f,o=r):l=l.next=f,Ue.lanes|=u,fc|=u}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,Ui(r,t.memoizedState)||(ar=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=l,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do s=i.lane,Ue.lanes|=s,fc|=s,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ww(e){var t=yi(),n=t.queue;if(n===null)throw Error(q(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=e(s,o.action),o=o.next;while(o!==i);Ui(s,t.memoizedState)||(ar=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function DD(){}function kD(e,t){var n=Ue,r=yi(),i=t(),s=!Ui(r.memoizedState,i);if(s&&(r.memoizedState=i,ar=!0),r=r.queue,bI(BD.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||pn!==null&&pn.memoizedState.tag&1){if(n.flags|=2048,Kh(9,FD.bind(null,n,r,i,t),void 0,null),gn===null)throw Error(q(349));uc&30||OD(n,t,i)}return i}function OD(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ue.updateQueue,t===null?(t={lastEffect:null,stores:null},Ue.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function FD(e,t,n,r){t.value=n,t.getSnapshot=r,RD(t)&&LD(e)}function BD(e,t,n){return n(function(){RD(t)&&LD(e)})}function RD(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Ui(e,n)}catch{return!0}}function LD(e){var t=ko(e,1);t!==null&&Li(t,e,1,-1)}function OA(e){var t=as();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Qh,lastRenderedState:e},t.queue=e,e=e.dispatch=dV.bind(null,Ue,e),[t.memoizedState,e]}function Kh(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Ue.updateQueue,t===null?(t={lastEffect:null,stores:null},Ue.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function CD(){return yi().memoizedState}function Q0(e,t,n,r){var i=as();Ue.flags|=e,i.memoizedState=Kh(1|t,n,void 0,r===void 0?null:r)}function Mb(e,t,n,r){var i=yi();r=r===void 0?null:r;var s=void 0;if(rn!==null){var o=rn.memoizedState;if(s=o.destroy,r!==null&&yI(r,o.deps)){i.memoizedState=Kh(t,n,s,r);return}}Ue.flags|=e,i.memoizedState=Kh(1|t,n,s,r)}function FA(e,t){return Q0(8390656,8,e,t)}function bI(e,t){return Mb(2048,8,e,t)}function UD(e,t){return Mb(4,2,e,t)}function PD(e,t){return Mb(4,4,e,t)}function zD(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function jD(e,t,n){return n=n!=null?n.concat([e]):null,Mb(4,4,zD.bind(null,t,e),n)}function vI(){}function VD(e,t){var n=yi();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&yI(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function YD(e,t){var n=yi();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&yI(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function qD(e,t,n){return uc&21?(Ui(n,t)||(n=G4(),Ue.lanes|=n,fc|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ar=!0),e.memoizedState=n)}function uV(e,t){var n=le;le=n!==0&&4>n?n:4,e(!0);var r=bw.transition;bw.transition={};try{e(!1),t()}finally{le=n,bw.transition=r}}function WD(){return yi().memoizedState}function fV(e,t,n){var r=Ea(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},HD(e))GD(t,n);else if(n=ID(e,t,n,r),n!==null){var i=Hn();Li(n,e,r,i),XD(n,t,r)}}function dV(e,t,n){var r=Ea(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(HD(e))GD(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Ui(a,o)){var l=t.interleaved;l===null?(i.next=i,uI(t)):(i.next=l.next,l.next=i),t.interleaved=i;return}}catch{}finally{}n=ID(e,t,i,r),n!==null&&(i=Hn(),Li(n,e,r,i),XD(n,t,r))}}function HD(e){var t=e.alternate;return e===Ue||t!==null&&t===Ue}function GD(e,t){vh=Hm=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function XD(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Qx(e,n)}}var Gm={readContext:pi,useCallback:En,useContext:En,useEffect:En,useImperativeHandle:En,useInsertionEffect:En,useLayoutEffect:En,useMemo:En,useReducer:En,useRef:En,useState:En,useDebugValue:En,useDeferredValue:En,useTransition:En,useMutableSource:En,useSyncExternalStore:En,useId:En,unstable_isNewReconciler:!1},hV={readContext:pi,useCallback:function(e,t){return as().memoizedState=[e,t===void 0?null:t],e},useContext:pi,useEffect:FA,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Q0(4194308,4,zD.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Q0(4194308,4,e,t)},useInsertionEffect:function(e,t){return Q0(4,2,e,t)},useMemo:function(e,t){var n=as();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=as();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=fV.bind(null,Ue,e),[r.memoizedState,e]},useRef:function(e){var t=as();return e={current:e},t.memoizedState=e},useState:OA,useDebugValue:vI,useDeferredValue:function(e){return as().memoizedState=e},useTransition:function(){var e=OA(!1),t=e[0];return e=uV.bind(null,e[1]),as().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Ue,i=as();if(Ae){if(n===void 0)throw Error(q(407));n=n()}else{if(n=t(),gn===null)throw Error(q(349));uc&30||OD(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,FA(BD.bind(null,r,s,e),[e]),r.flags|=2048,Kh(9,FD.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=as(),t=gn.identifierPrefix;if(Ae){var n=bo,r=go;n=(r&~(1<<32-Ri(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Xh++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=cV++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},pV={readContext:pi,useCallback:VD,useContext:pi,useEffect:bI,useImperativeHandle:jD,useInsertionEffect:UD,useLayoutEffect:PD,useMemo:YD,useReducer:vw,useRef:CD,useState:function(){return vw(Qh)},useDebugValue:vI,useDeferredValue:function(e){var t=yi();return qD(t,rn.memoizedState,e)},useTransition:function(){var e=vw(Qh)[0],t=yi().memoizedState;return[e,t]},useMutableSource:DD,useSyncExternalStore:kD,useId:WD,unstable_isNewReconciler:!1},yV={readContext:pi,useCallback:VD,useContext:pi,useEffect:bI,useImperativeHandle:jD,useInsertionEffect:UD,useLayoutEffect:PD,useMemo:YD,useReducer:ww,useRef:CD,useState:function(){return ww(Qh)},useDebugValue:vI,useDeferredValue:function(e){var t=yi();return rn===null?t.memoizedState=e:qD(t,rn.memoizedState,e)},useTransition:function(){var e=ww(Qh)[0],t=yi().memoizedState;return[e,t]},useMutableSource:DD,useSyncExternalStore:kD,useId:WD,unstable_isNewReconciler:!1};function pf(e,t){try{var n="",r=t;do n+=Vz(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function _w(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function w2(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var mV=typeof WeakMap=="function"?WeakMap:Map;function QD(e,t,n){n=Io(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Qm||(Qm=!0,N2=r),w2(e,t)},n}function KD(e,t,n){n=Io(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){w2(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){w2(e,t),typeof r!="function"&&(Ta===null?Ta=new Set([this]):Ta.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function BA(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new mV;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=NV.bind(null,e,t,n),t.then(e,e))}function RA(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function LA(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Io(-1,1),t.tag=2,Ia(n,t,1))),n.lanes|=1),e)}var gV=Po.ReactCurrentOwner,ar=!1;function Un(e,t,n,r){t.child=e===null?$D(t,null,n,r):df(t,e.child,n,r)}function CA(e,t,n,r,i){n=n.render;var s=t.ref;return Pu(t,i),r=mI(e,t,n,r,s,i),n=gI(),e!==null&&!ar?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Oo(e,t,i)):(Ae&&n&&iI(t),t.flags|=1,Un(e,t,r,i),t.child)}function UA(e,t,n,r,i){if(e===null){var s=n.type;return typeof s=="function"&&!AI(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,ZD(e,t,s,r,i)):(e=tm(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Vh,n(o,r)&&e.ref===t.ref)return Oo(e,t,i)}return t.flags|=1,e=Aa(s,r),e.ref=t.ref,e.return=t,t.child=e}function ZD(e,t,n,r,i){if(e!==null){var s=e.memoizedProps;if(Vh(s,r)&&e.ref===t.ref)if(ar=!1,t.pendingProps=r=s,(e.lanes&i)!==0)e.flags&131072&&(ar=!0);else return t.lanes=e.lanes,Oo(e,t,i)}return _2(e,t,n,r,i)}function JD(e,t,n){var r=t.pendingProps,i=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},we(Tu,Er),Er|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,we(Tu,Er),Er|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,we(Tu,Er),Er|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,we(Tu,Er),Er|=r;return Un(e,t,i,n),t.child}function tk(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function _2(e,t,n,r,i){var s=ur(n)?lc:Rn.current;return s=uf(t,s),Pu(t,i),n=mI(e,t,n,r,s,i),r=gI(),e!==null&&!ar?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Oo(e,t,i)):(Ae&&r&&iI(t),t.flags|=1,Un(e,t,n,i),t.child)}function PA(e,t,n,r,i){if(ur(n)){var s=!0;Pm(t)}else s=!1;if(Pu(t,i),t.stateNode===null)K0(e,t),AD(t,n,r),v2(t,n,r,i),r=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=pi(c):(c=ur(n)?lc:Rn.current,c=uf(t,c));var u=n.getDerivedStateFromProps,f=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&DA(t,o,r,c),ia=!1;var d=t.memoizedState;o.state=d,qm(t,r,o,i),l=t.memoizedState,a!==r||d!==l||cr.current||ia?(typeof u=="function"&&(b2(t,n,u,r),l=t.memoizedState),(a=ia||NA(t,n,a,r,d,l,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,TD(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:Ti(t.type,a),o.props=c,f=t.pendingProps,d=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=pi(l):(l=ur(n)?lc:Rn.current,l=uf(t,l));var h=n.getDerivedStateFromProps;(u=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||d!==l)&&DA(t,o,r,l),ia=!1,d=t.memoizedState,o.state=d,qm(t,r,o,i);var p=t.memoizedState;a!==f||d!==p||cr.current||ia?(typeof h=="function"&&(b2(t,n,h,r),p=t.memoizedState),(c=ia||NA(t,n,c,r,d,p,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,l)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return S2(e,t,n,r,s,i)}function S2(e,t,n,r,i,s){tk(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return i&&TA(t,n,!1),Oo(e,t,s);r=t.stateNode,gV.current=t;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=df(t,e.child,null,s),t.child=df(t,null,a,s)):Un(e,t,a,s),t.memoizedState=r.state,i&&TA(t,n,!0),t.child}function ek(e){var t=e.stateNode;t.pendingContext?IA(e,t.pendingContext,t.pendingContext!==t.context):t.context&&IA(e,t.context,!1),dI(e,t.containerInfo)}function zA(e,t,n,r,i){return ff(),oI(i),t.flags|=256,Un(e,t,n,r),t.child}var x2={dehydrated:null,treeContext:null,retryLane:0};function I2(e){return{baseLanes:e,cachePool:null,transitions:null}}function nk(e,t,n){var r=t.pendingProps,i=Fe.current,s=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),we(Fe,i&1),e===null)return m2(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,s?(r=t.mode,s=t.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Db(o,r,0,null),e=Jl(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=I2(n),t.memoizedState=x2,e):wI(t,o));if(i=e.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return bV(e,t,o,r,a,i,n);if(s){s=r.fallback,o=t.mode,i=e.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=l,t.deletions=null):(r=Aa(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Aa(a,s):(s=Jl(s,o,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,o=e.child.memoizedState,o=o===null?I2(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~n,t.memoizedState=x2,r}return s=e.child,e=s.sibling,r=Aa(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function wI(e,t){return t=Db({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function e0(e,t,n,r){return r!==null&&oI(r),df(t,e.child,null,n),e=wI(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function bV(e,t,n,r,i,s,o){if(n)return t.flags&256?(t.flags&=-257,r=_w(Error(q(422))),e0(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=Db({mode:"visible",children:r.children},i,0,null),s=Jl(s,i,o,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&df(t,e.child,null,o),t.child.memoizedState=I2(o),t.memoizedState=x2,s);if(!(t.mode&1))return e0(e,t,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(q(419)),r=_w(s,r,void 0),e0(e,t,o,r)}if(a=(o&e.childLanes)!==0,ar||a){if(r=gn,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,ko(e,i),Li(r,e,i,-1))}return EI(),r=_w(Error(q(421))),e0(e,t,o,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=DV.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,$r=xa(i.nextSibling),Or=t,Ae=!0,Ni=null,e!==null&&(Zr[Jr++]=go,Zr[Jr++]=bo,Zr[Jr++]=cc,go=e.id,bo=e.overflow,cc=t),t=wI(t,r.children),t.flags|=4096,t)}function jA(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),g2(e.return,t,n)}function Sw(e,t,n,r,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function rk(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(Un(e,t,r.children,n),r=Fe.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)t:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&jA(e,n,t);else if(e.tag===19)jA(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break t;for(;e.sibling===null;){if(e.return===null||e.return===t)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(we(Fe,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&Wm(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Sw(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Wm(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Sw(t,!0,n,null,s);break;case"together":Sw(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function K0(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Oo(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),fc|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(q(153));if(t.child!==null){for(e=t.child,n=Aa(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Aa(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function vV(e,t,n){switch(t.tag){case 3:ek(t),ff();break;case 5:ND(t);break;case 1:ur(t.type)&&Pm(t);break;case 4:dI(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;we(Vm,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(we(Fe,Fe.current&1),t.flags|=128,null):n&t.child.childLanes?nk(e,t,n):(we(Fe,Fe.current&1),e=Oo(e,t,n),e!==null?e.sibling:null);we(Fe,Fe.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return rk(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),we(Fe,Fe.current),r)break;return null;case 22:case 23:return t.lanes=0,JD(e,t,n)}return Oo(e,t,n)}var ik,T2,sk,ok;ik=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};T2=function(){};sk=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Ll(Ds.current);var s=null;switch(n){case"input":i=H_(e,i),r=H_(e,r),s=[];break;case"select":i=ze({},i,{value:void 0}),r=ze({},r,{value:void 0}),s=[];break;case"textarea":i=Q_(e,i),r=Q_(e,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Cm)}Z_(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Rh.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Rh.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Se("scroll",e),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(t.updateQueue=c)&&(t.flags|=4)}};ok=function(e,t,n,r){n!==r&&(t.flags|=4)};function Ad(e,t){if(!Ae)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function An(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function wV(e,t,n){var r=t.pendingProps;switch(sI(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return An(t),null;case 1:return ur(t.type)&&Um(),An(t),null;case 3:return r=t.stateNode,hf(),xe(cr),xe(Rn),pI(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Jy(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ni!==null&&(O2(Ni),Ni=null))),T2(e,t),An(t),null;case 5:hI(t);var i=Ll(Gh.current);if(n=t.type,e!==null&&t.stateNode!=null)sk(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(q(166));return An(t),null}if(e=Ll(Ds.current),Jy(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[hs]=t,r[Wh]=s,e=(t.mode&1)!==0,n){case"dialog":Se("cancel",r),Se("close",r);break;case"iframe":case"object":case"embed":Se("load",r);break;case"video":case"audio":for(i=0;i<Gd.length;i++)Se(Gd[i],r);break;case"source":Se("error",r);break;case"img":case"image":case"link":Se("error",r),Se("load",r);break;case"details":Se("toggle",r);break;case"input":KE(r,s),Se("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Se("invalid",r);break;case"textarea":JE(r,s),Se("invalid",r)}Z_(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Zy(r.textContent,a,e),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Zy(r.textContent,a,e),i=["children",""+a]):Rh.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Se("scroll",r)}switch(n){case"input":Yy(r),ZE(r,s,!0);break;case"textarea":Yy(r),tA(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Cm)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=O4(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[hs]=t,e[Wh]=r,ik(e,t,!1,!1),t.stateNode=e;t:{switch(o=J_(n,r),n){case"dialog":Se("cancel",e),Se("close",e),i=r;break;case"iframe":case"object":case"embed":Se("load",e),i=r;break;case"video":case"audio":for(i=0;i<Gd.length;i++)Se(Gd[i],e);i=r;break;case"source":Se("error",e),i=r;break;case"img":case"image":case"link":Se("error",e),Se("load",e),i=r;break;case"details":Se("toggle",e),i=r;break;case"input":KE(e,r),i=H_(e,r),Se("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=ze({},r,{value:void 0}),Se("invalid",e);break;case"textarea":JE(e,r),i=Q_(e,r),Se("invalid",e);break;default:i=r}Z_(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?R4(e,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&F4(e,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Lh(e,l):typeof l=="number"&&Lh(e,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Rh.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Se("scroll",e):l!=null&&Yx(e,s,l,o))}switch(n){case"input":Yy(e),ZE(e,r,!1);break;case"textarea":Yy(e),tA(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Na(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?Ru(e,!!r.multiple,s,!1):r.defaultValue!=null&&Ru(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Cm)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break t;case"img":r=!0;break t;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return An(t),null;case 6:if(e&&t.stateNode!=null)ok(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(q(166));if(n=Ll(Gh.current),Ll(Ds.current),Jy(t)){if(r=t.stateNode,n=t.memoizedProps,r[hs]=t,(s=r.nodeValue!==n)&&(e=Or,e!==null))switch(e.tag){case 3:Zy(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Zy(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[hs]=t,t.stateNode=r}return An(t),null;case 13:if(xe(Fe),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ae&&$r!==null&&t.mode&1&&!(t.flags&128))xD(),ff(),t.flags|=98560,s=!1;else if(s=Jy(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(q(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(q(317));s[hs]=t}else ff(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;An(t),s=!1}else Ni!==null&&(O2(Ni),Ni=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Fe.current&1?an===0&&(an=3):EI())),t.updateQueue!==null&&(t.flags|=4),An(t),null);case 4:return hf(),T2(e,t),e===null&&Yh(t.stateNode.containerInfo),An(t),null;case 10:return cI(t.type._context),An(t),null;case 17:return ur(t.type)&&Um(),An(t),null;case 19:if(xe(Fe),s=t.memoizedState,s===null)return An(t),null;if(r=(t.flags&128)!==0,o=s.rendering,o===null)if(r)Ad(s,!1);else{if(an!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Wm(e),o!==null){for(t.flags|=128,Ad(s,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return we(Fe,Fe.current&1|2),t.child}e=e.sibling}s.tail!==null&&Xe()>yf&&(t.flags|=128,r=!0,Ad(s,!1),t.lanes=4194304)}else{if(!r)if(e=Wm(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Ad(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ae)return An(t),null}else 2*Xe()-s.renderingStartTime>yf&&n!==1073741824&&(t.flags|=128,r=!0,Ad(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(n=s.last,n!==null?n.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Xe(),t.sibling=null,n=Fe.current,we(Fe,r?n&1|2:n&1),t):(An(t),null);case 22:case 23:return TI(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Er&1073741824&&(An(t),t.subtreeFlags&6&&(t.flags|=8192)):An(t),null;case 24:return null;case 25:return null}throw Error(q(156,t.tag))}function _V(e,t){switch(sI(t),t.tag){case 1:return ur(t.type)&&Um(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return hf(),xe(cr),xe(Rn),pI(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return hI(t),null;case 13:if(xe(Fe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(q(340));ff()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return xe(Fe),null;case 4:return hf(),null;case 10:return cI(t.type._context),null;case 22:case 23:return TI(),null;case 24:return null;default:return null}}var n0=!1,Dn=!1,SV=typeof WeakSet=="function"?WeakSet:Set,nt=null;function Iu(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ye(e,t,r)}else n.current=null}function E2(e,t,n){try{n()}catch(r){Ye(e,t,r)}}var VA=!1;function xV(e,t){if(c2=Bm,e=uD(),rI(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else t:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break t}var o=0,a=-1,l=-1,c=0,u=0,f=e,d=null;e:for(;;){for(var h;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(h=f.firstChild)!==null;)d=f,f=h;for(;;){if(f===e)break e;if(d===n&&++c===i&&(a=o),d===s&&++u===r&&(l=o),(h=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=h}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(u2={focusedElem:e,selectionRange:n},Bm=!1,nt=t;nt!==null;)if(t=nt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,nt=e;else for(;nt!==null;){t=nt;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,v=p.memoizedState,y=t.stateNode,m=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:Ti(t.type,g),v);y.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(q(163))}}catch(w){Ye(t,t.return,w)}if(e=t.sibling,e!==null){e.return=t.return,nt=e;break}nt=t.return}return p=VA,VA=!1,p}function wh(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&E2(t,n,s)}i=i.next}while(i!==r)}}function $b(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function A2(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function ak(e){var t=e.alternate;t!==null&&(e.alternate=null,ak(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[hs],delete t[Wh],delete t[h2],delete t[sV],delete t[oV])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function lk(e){return e.tag===5||e.tag===3||e.tag===4}function YA(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||lk(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function M2(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Cm));else if(r!==4&&(e=e.child,e!==null))for(M2(e,t,n),e=e.sibling;e!==null;)M2(e,t,n),e=e.sibling}function $2(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for($2(e,t,n),e=e.sibling;e!==null;)$2(e,t,n),e=e.sibling}var wn=null,Ei=!1;function Ko(e,t,n){for(n=n.child;n!==null;)ck(e,t,n),n=n.sibling}function ck(e,t,n){if(Ns&&typeof Ns.onCommitFiberUnmount=="function")try{Ns.onCommitFiberUnmount(_b,n)}catch{}switch(n.tag){case 5:Dn||Iu(n,t);case 6:var r=wn,i=Ei;wn=null,Ko(e,t,n),wn=r,Ei=i,wn!==null&&(Ei?(e=wn,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):wn.removeChild(n.stateNode));break;case 18:wn!==null&&(Ei?(e=wn,n=n.stateNode,e.nodeType===8?yw(e.parentNode,n):e.nodeType===1&&yw(e,n),zh(e)):yw(wn,n.stateNode));break;case 4:r=wn,i=Ei,wn=n.stateNode.containerInfo,Ei=!0,Ko(e,t,n),wn=r,Ei=i;break;case 0:case 11:case 14:case 15:if(!Dn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&E2(n,t,o),i=i.next}while(i!==r)}Ko(e,t,n);break;case 1:if(!Dn&&(Iu(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ye(n,t,a)}Ko(e,t,n);break;case 21:Ko(e,t,n);break;case 22:n.mode&1?(Dn=(r=Dn)||n.memoizedState!==null,Ko(e,t,n),Dn=r):Ko(e,t,n);break;default:Ko(e,t,n)}}function qA(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new SV),t.forEach(function(r){var i=kV.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function xi(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,o=t,a=o;t:for(;a!==null;){switch(a.tag){case 5:wn=a.stateNode,Ei=!1;break t;case 3:wn=a.stateNode.containerInfo,Ei=!0;break t;case 4:wn=a.stateNode.containerInfo,Ei=!0;break t}a=a.return}if(wn===null)throw Error(q(160));ck(s,o,i),wn=null,Ei=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Ye(i,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)uk(t,e),t=t.sibling}function uk(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(xi(t,e),es(e),r&4){try{wh(3,e,e.return),$b(3,e)}catch(g){Ye(e,e.return,g)}try{wh(5,e,e.return)}catch(g){Ye(e,e.return,g)}}break;case 1:xi(t,e),es(e),r&512&&n!==null&&Iu(n,n.return);break;case 5:if(xi(t,e),es(e),r&512&&n!==null&&Iu(n,n.return),e.flags&32){var i=e.stateNode;try{Lh(i,"")}catch(g){Ye(e,e.return,g)}}if(r&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,o=n!==null?n.memoizedProps:s,a=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&D4(i,s),J_(a,o);var c=J_(a,s);for(o=0;o<l.length;o+=2){var u=l[o],f=l[o+1];u==="style"?R4(i,f):u==="dangerouslySetInnerHTML"?F4(i,f):u==="children"?Lh(i,f):Yx(i,u,f,c)}switch(a){case"input":G_(i,s);break;case"textarea":k4(i,s);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?Ru(i,!!s.multiple,h,!1):d!==!!s.multiple&&(s.defaultValue!=null?Ru(i,!!s.multiple,s.defaultValue,!0):Ru(i,!!s.multiple,s.multiple?[]:"",!1))}i[Wh]=s}catch(g){Ye(e,e.return,g)}}break;case 6:if(xi(t,e),es(e),r&4){if(e.stateNode===null)throw Error(q(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(g){Ye(e,e.return,g)}}break;case 3:if(xi(t,e),es(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{zh(t.containerInfo)}catch(g){Ye(e,e.return,g)}break;case 4:xi(t,e),es(e);break;case 13:xi(t,e),es(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(xI=Xe())),r&4&&qA(e);break;case 22:if(u=n!==null&&n.memoizedState!==null,e.mode&1?(Dn=(c=Dn)||u,xi(t,e),Dn=c):xi(t,e),es(e),r&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!u&&e.mode&1)for(nt=e,u=e.child;u!==null;){for(f=nt=u;nt!==null;){switch(d=nt,h=d.child,d.tag){case 0:case 11:case 14:case 15:wh(4,d,d.return);break;case 1:Iu(d,d.return);var p=d.stateNode;if(typeof p.componentWillUnmount=="function"){r=d,n=d.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(g){Ye(r,n,g)}}break;case 5:Iu(d,d.return);break;case 22:if(d.memoizedState!==null){HA(f);continue}}h!==null?(h.return=d,nt=h):HA(f)}u=u.sibling}t:for(u=null,f=e;;){if(f.tag===5){if(u===null){u=f;try{i=f.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=B4("display",o))}catch(g){Ye(e,e.return,g)}}}else if(f.tag===6){if(u===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(g){Ye(e,e.return,g)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break t;for(;f.sibling===null;){if(f.return===null||f.return===e)break t;u===f&&(u=null),f=f.return}u===f&&(u=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:xi(t,e),es(e),r&4&&qA(e);break;case 21:break;default:xi(t,e),es(e)}}function es(e){var t=e.flags;if(t&2){try{t:{for(var n=e.return;n!==null;){if(lk(n)){var r=n;break t}n=n.return}throw Error(q(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Lh(i,""),r.flags&=-33);var s=YA(e);$2(e,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=YA(e);M2(e,a,o);break;default:throw Error(q(161))}}catch(l){Ye(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function IV(e,t,n){nt=e,fk(e)}function fk(e,t,n){for(var r=(e.mode&1)!==0;nt!==null;){var i=nt,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||n0;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Dn;a=n0;var c=Dn;if(n0=o,(Dn=l)&&!c)for(nt=i;nt!==null;)o=nt,l=o.child,o.tag===22&&o.memoizedState!==null?GA(i):l!==null?(l.return=o,nt=l):GA(i);for(;s!==null;)nt=s,fk(s),s=s.sibling;nt=i,n0=a,Dn=c}WA(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,nt=s):WA(e)}}function WA(e){for(;nt!==null;){var t=nt;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Dn||$b(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Dn)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Ti(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&$A(t,s,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}$A(t,o,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var f=u.dehydrated;f!==null&&zh(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(q(163))}Dn||t.flags&512&&A2(t)}catch(d){Ye(t,t.return,d)}}if(t===e){nt=null;break}if(n=t.sibling,n!==null){n.return=t.return,nt=n;break}nt=t.return}}function HA(e){for(;nt!==null;){var t=nt;if(t===e){nt=null;break}var n=t.sibling;if(n!==null){n.return=t.return,nt=n;break}nt=t.return}}function GA(e){for(;nt!==null;){var t=nt;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{$b(4,t)}catch(l){Ye(t,n,l)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(l){Ye(t,i,l)}}var s=t.return;try{A2(t)}catch(l){Ye(t,s,l)}break;case 5:var o=t.return;try{A2(t)}catch(l){Ye(t,o,l)}}}catch(l){Ye(t,t.return,l)}if(t===e){nt=null;break}var a=t.sibling;if(a!==null){a.return=t.return,nt=a;break}nt=t.return}}var TV=Math.ceil,Xm=Po.ReactCurrentDispatcher,_I=Po.ReactCurrentOwner,di=Po.ReactCurrentBatchConfig,Gt=0,gn=null,tn=null,In=0,Er=0,Tu=tl(0),an=0,Zh=null,fc=0,Nb=0,SI=0,_h=null,ir=null,xI=0,yf=1/0,io=null,Qm=!1,N2=null,Ta=null,r0=!1,ga=null,Km=0,Sh=0,D2=null,Z0=-1,J0=0;function Hn(){return Gt&6?Xe():Z0!==-1?Z0:Z0=Xe()}function Ea(e){return e.mode&1?Gt&2&&In!==0?In&-In:lV.transition!==null?(J0===0&&(J0=G4()),J0):(e=le,e!==0||(e=window.event,e=e===void 0?16:eD(e.type)),e):1}function Li(e,t,n,r){if(50<Sh)throw Sh=0,D2=null,Error(q(185));zp(e,n,r),(!(Gt&2)||e!==gn)&&(e===gn&&(!(Gt&2)&&(Nb|=n),an===4&&fa(e,In)),fr(e,r),n===1&&Gt===0&&!(t.mode&1)&&(yf=Xe()+500,Eb&&el()))}function fr(e,t){var n=e.callbackNode;lj(e,t);var r=Fm(e,e===gn?In:0);if(r===0)n!==null&&rA(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&rA(n),t===1)e.tag===0?aV(XA.bind(null,e)):wD(XA.bind(null,e)),rV(function(){!(Gt&6)&&el()}),n=null;else{switch(X4(r)){case 1:n=Xx;break;case 4:n=W4;break;case 16:n=Om;break;case 536870912:n=H4;break;default:n=Om}n=vk(n,dk.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function dk(e,t){if(Z0=-1,J0=0,Gt&6)throw Error(q(327));var n=e.callbackNode;if(zu()&&e.callbackNode!==n)return null;var r=Fm(e,e===gn?In:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Zm(e,r);else{t=r;var i=Gt;Gt|=2;var s=pk();(gn!==e||In!==t)&&(io=null,yf=Xe()+500,Zl(e,t));do try{MV();break}catch(a){hk(e,a)}while(!0);lI(),Xm.current=s,Gt=i,tn!==null?t=0:(gn=null,In=0,t=an)}if(t!==0){if(t===2&&(i=i2(e),i!==0&&(r=i,t=k2(e,i))),t===1)throw n=Zh,Zl(e,0),fa(e,r),fr(e,Xe()),n;if(t===6)fa(e,r);else{if(i=e.current.alternate,!(r&30)&&!EV(i)&&(t=Zm(e,r),t===2&&(s=i2(e),s!==0&&(r=s,t=k2(e,s))),t===1))throw n=Zh,Zl(e,0),fa(e,r),fr(e,Xe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(q(345));case 2:wl(e,ir,io);break;case 3:if(fa(e,r),(r&130023424)===r&&(t=xI+500-Xe(),10<t)){if(Fm(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Hn(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=d2(wl.bind(null,e,ir,io),t);break}wl(e,ir,io);break;case 4:if(fa(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-Ri(r);s=1<<o,o=t[o],o>i&&(i=o),r&=~s}if(r=i,r=Xe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*TV(r/1960))-r,10<r){e.timeoutHandle=d2(wl.bind(null,e,ir,io),r);break}wl(e,ir,io);break;case 5:wl(e,ir,io);break;default:throw Error(q(329))}}}return fr(e,Xe()),e.callbackNode===n?dk.bind(null,e):null}function k2(e,t){var n=_h;return e.current.memoizedState.isDehydrated&&(Zl(e,t).flags|=256),e=Zm(e,t),e!==2&&(t=ir,ir=n,t!==null&&O2(t)),e}function O2(e){ir===null?ir=e:ir.push.apply(ir,e)}function EV(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Ui(s(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function fa(e,t){for(t&=~SI,t&=~Nb,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Ri(t),r=1<<n;e[n]=-1,t&=~r}}function XA(e){if(Gt&6)throw Error(q(327));zu();var t=Fm(e,0);if(!(t&1))return fr(e,Xe()),null;var n=Zm(e,t);if(e.tag!==0&&n===2){var r=i2(e);r!==0&&(t=r,n=k2(e,r))}if(n===1)throw n=Zh,Zl(e,0),fa(e,t),fr(e,Xe()),n;if(n===6)throw Error(q(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wl(e,ir,io),fr(e,Xe()),null}function II(e,t){var n=Gt;Gt|=1;try{return e(t)}finally{Gt=n,Gt===0&&(yf=Xe()+500,Eb&&el())}}function dc(e){ga!==null&&ga.tag===0&&!(Gt&6)&&zu();var t=Gt;Gt|=1;var n=di.transition,r=le;try{if(di.transition=null,le=1,e)return e()}finally{le=r,di.transition=n,Gt=t,!(Gt&6)&&el()}}function TI(){Er=Tu.current,xe(Tu)}function Zl(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,nV(n)),tn!==null)for(n=tn.return;n!==null;){var r=n;switch(sI(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Um();break;case 3:hf(),xe(cr),xe(Rn),pI();break;case 5:hI(r);break;case 4:hf();break;case 13:xe(Fe);break;case 19:xe(Fe);break;case 10:cI(r.type._context);break;case 22:case 23:TI()}n=n.return}if(gn=e,tn=e=Aa(e.current,null),In=Er=t,an=0,Zh=null,SI=Nb=fc=0,ir=_h=null,Rl!==null){for(t=0;t<Rl.length;t++)if(n=Rl[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Rl=null}return e}function hk(e,t){do{var n=tn;try{if(lI(),X0.current=Gm,Hm){for(var r=Ue.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Hm=!1}if(uc=0,pn=rn=Ue=null,vh=!1,Xh=0,_I.current=null,n===null||n.return===null){an=1,Zh=t,tn=null;break}t:{var s=e,o=n.return,a=n,l=t;if(t=In,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,f=u.tag;if(!(u.mode&1)&&(f===0||f===11||f===15)){var d=u.alternate;d?(u.updateQueue=d.updateQueue,u.memoizedState=d.memoizedState,u.lanes=d.lanes):(u.updateQueue=null,u.memoizedState=null)}var h=RA(o);if(h!==null){h.flags&=-257,LA(h,o,a,s,t),h.mode&1&&BA(s,c,t),t=h,l=c;var p=t.updateQueue;if(p===null){var g=new Set;g.add(l),t.updateQueue=g}else p.add(l);break t}else{if(!(t&1)){BA(s,c,t),EI();break t}l=Error(q(426))}}else if(Ae&&a.mode&1){var v=RA(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),LA(v,o,a,s,t),oI(pf(l,a));break t}}s=l=pf(l,a),an!==4&&(an=2),_h===null?_h=[s]:_h.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var y=QD(s,l,t);MA(s,y);break t;case 1:a=l;var m=s.type,b=s.stateNode;if(!(s.flags&128)&&(typeof m.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Ta===null||!Ta.has(b)))){s.flags|=65536,t&=-t,s.lanes|=t;var w=KD(s,a,t);MA(s,w);break t}}s=s.return}while(s!==null)}mk(n)}catch(S){t=S,tn===n&&n!==null&&(tn=n=n.return);continue}break}while(!0)}function pk(){var e=Xm.current;return Xm.current=Gm,e===null?Gm:e}function EI(){(an===0||an===3||an===2)&&(an=4),gn===null||!(fc&268435455)&&!(Nb&268435455)||fa(gn,In)}function Zm(e,t){var n=Gt;Gt|=2;var r=pk();(gn!==e||In!==t)&&(io=null,Zl(e,t));do try{AV();break}catch(i){hk(e,i)}while(!0);if(lI(),Gt=n,Xm.current=r,tn!==null)throw Error(q(261));return gn=null,In=0,an}function AV(){for(;tn!==null;)yk(tn)}function MV(){for(;tn!==null&&!Jz();)yk(tn)}function yk(e){var t=bk(e.alternate,e,Er);e.memoizedProps=e.pendingProps,t===null?mk(e):tn=t,_I.current=null}function mk(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=_V(n,t),n!==null){n.flags&=32767,tn=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{an=6,tn=null;return}}else if(n=wV(n,t,Er),n!==null){tn=n;return}if(t=t.sibling,t!==null){tn=t;return}tn=t=e}while(t!==null);an===0&&(an=5)}function wl(e,t,n){var r=le,i=di.transition;try{di.transition=null,le=1,$V(e,t,n,r)}finally{di.transition=i,le=r}return null}function $V(e,t,n,r){do zu();while(ga!==null);if(Gt&6)throw Error(q(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(q(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(cj(e,s),e===gn&&(tn=gn=null,In=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||r0||(r0=!0,vk(Om,function(){return zu(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=di.transition,di.transition=null;var o=le;le=1;var a=Gt;Gt|=4,_I.current=null,xV(e,n),uk(n,e),Xj(u2),Bm=!!c2,u2=c2=null,e.current=n,IV(n),tj(),Gt=a,le=o,di.transition=s}else e.current=n;if(r0&&(r0=!1,ga=e,Km=i),s=e.pendingLanes,s===0&&(Ta=null),rj(n.stateNode),fr(e,Xe()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Qm)throw Qm=!1,e=N2,N2=null,e;return Km&1&&e.tag!==0&&zu(),s=e.pendingLanes,s&1?e===D2?Sh++:(Sh=0,D2=e):Sh=0,el(),null}function zu(){if(ga!==null){var e=X4(Km),t=di.transition,n=le;try{if(di.transition=null,le=16>e?16:e,ga===null)var r=!1;else{if(e=ga,ga=null,Km=0,Gt&6)throw Error(q(331));var i=Gt;for(Gt|=4,nt=e.current;nt!==null;){var s=nt,o=s.child;if(nt.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(nt=c;nt!==null;){var u=nt;switch(u.tag){case 0:case 11:case 15:wh(8,u,s)}var f=u.child;if(f!==null)f.return=u,nt=f;else for(;nt!==null;){u=nt;var d=u.sibling,h=u.return;if(ak(u),u===c){nt=null;break}if(d!==null){d.return=h,nt=d;break}nt=h}}}var p=s.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(g!==null)}}nt=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,nt=o;else t:for(;nt!==null;){if(s=nt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:wh(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,nt=y;break t}nt=s.return}}var m=e.current;for(nt=m;nt!==null;){o=nt;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,nt=b;else t:for(o=m;nt!==null;){if(a=nt,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:$b(9,a)}}catch(S){Ye(a,a.return,S)}if(a===o){nt=null;break t}var w=a.sibling;if(w!==null){w.return=a.return,nt=w;break t}nt=a.return}}if(Gt=i,el(),Ns&&typeof Ns.onPostCommitFiberRoot=="function")try{Ns.onPostCommitFiberRoot(_b,e)}catch{}r=!0}return r}finally{le=n,di.transition=t}}return!1}function QA(e,t,n){t=pf(n,t),t=QD(e,t,1),e=Ia(e,t,1),t=Hn(),e!==null&&(zp(e,1,t),fr(e,t))}function Ye(e,t,n){if(e.tag===3)QA(e,e,n);else for(;t!==null;){if(t.tag===3){QA(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ta===null||!Ta.has(r))){e=pf(n,e),e=KD(t,e,1),t=Ia(t,e,1),e=Hn(),t!==null&&(zp(t,1,e),fr(t,e));break}}t=t.return}}function NV(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Hn(),e.pingedLanes|=e.suspendedLanes&n,gn===e&&(In&n)===n&&(an===4||an===3&&(In&130023424)===In&&500>Xe()-xI?Zl(e,0):SI|=n),fr(e,t)}function gk(e,t){t===0&&(e.mode&1?(t=Hy,Hy<<=1,!(Hy&130023424)&&(Hy=4194304)):t=1);var n=Hn();e=ko(e,t),e!==null&&(zp(e,t,n),fr(e,n))}function DV(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),gk(e,n)}function kV(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(q(314))}r!==null&&r.delete(t),gk(e,n)}var bk;bk=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||cr.current)ar=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return ar=!1,vV(e,t,n);ar=!!(e.flags&131072)}else ar=!1,Ae&&t.flags&1048576&&_D(t,jm,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;K0(e,t),e=t.pendingProps;var i=uf(t,Rn.current);Pu(t,n),i=mI(null,t,r,e,i,n);var s=gI();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ur(r)?(s=!0,Pm(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,fI(t),i.updater=Ab,t.stateNode=i,i._reactInternals=t,v2(t,r,e,n),t=S2(null,t,r,!0,s,n)):(t.tag=0,Ae&&s&&iI(t),Un(null,t,i,n),t=t.child),t;case 16:r=t.elementType;t:{switch(K0(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=FV(r),e=Ti(r,e),i){case 0:t=_2(null,t,r,e,n);break t;case 1:t=PA(null,t,r,e,n);break t;case 11:t=CA(null,t,r,e,n);break t;case 14:t=UA(null,t,r,Ti(r.type,e),n);break t}throw Error(q(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Ti(r,i),_2(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Ti(r,i),PA(e,t,r,i,n);case 3:t:{if(ek(t),e===null)throw Error(q(387));r=t.pendingProps,s=t.memoizedState,i=s.element,TD(e,t),qm(t,r,null,n);var o=t.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=pf(Error(q(423)),t),t=zA(e,t,r,n,i);break t}else if(r!==i){i=pf(Error(q(424)),t),t=zA(e,t,r,n,i);break t}else for($r=xa(t.stateNode.containerInfo.firstChild),Or=t,Ae=!0,Ni=null,n=$D(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ff(),r===i){t=Oo(e,t,n);break t}Un(e,t,r,n)}t=t.child}return t;case 5:return ND(t),e===null&&m2(t),r=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,o=i.children,f2(r,i)?o=null:s!==null&&f2(r,s)&&(t.flags|=32),tk(e,t),Un(e,t,o,n),t.child;case 6:return e===null&&m2(t),null;case 13:return nk(e,t,n);case 4:return dI(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=df(t,null,r,n):Un(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Ti(r,i),CA(e,t,r,i,n);case 7:return Un(e,t,t.pendingProps,n),t.child;case 8:return Un(e,t,t.pendingProps.children,n),t.child;case 12:return Un(e,t,t.pendingProps.children,n),t.child;case 10:t:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value,we(Vm,r._currentValue),r._currentValue=o,s!==null)if(Ui(s.value,o)){if(s.children===i.children&&!cr.current){t=Oo(e,t,n);break t}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Io(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),g2(s.return,n,t),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(q(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),g2(o,n,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Un(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Pu(t,n),i=pi(i),r=r(i),t.flags|=1,Un(e,t,r,n),t.child;case 14:return r=t.type,i=Ti(r,t.pendingProps),i=Ti(r.type,i),UA(e,t,r,i,n);case 15:return ZD(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Ti(r,i),K0(e,t),t.tag=1,ur(r)?(e=!0,Pm(t)):e=!1,Pu(t,n),AD(t,r,i),v2(t,r,i,n),S2(null,t,r,!0,e,n);case 19:return rk(e,t,n);case 22:return JD(e,t,n)}throw Error(q(156,t.tag))};function vk(e,t){return q4(e,t)}function OV(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ii(e,t,n,r){return new OV(e,t,n,r)}function AI(e){return e=e.prototype,!(!e||!e.isReactComponent)}function FV(e){if(typeof e=="function")return AI(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Wx)return 11;if(e===Hx)return 14}return 2}function Aa(e,t){var n=e.alternate;return n===null?(n=ii(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function tm(e,t,n,r,i,s){var o=2;if(r=e,typeof e=="function")AI(e)&&(o=1);else if(typeof e=="string")o=5;else t:switch(e){case yu:return Jl(n.children,i,s,t);case qx:o=8,i|=8;break;case V_:return e=ii(12,n,t,i|2),e.elementType=V_,e.lanes=s,e;case Y_:return e=ii(13,n,t,i),e.elementType=Y_,e.lanes=s,e;case q_:return e=ii(19,n,t,i),e.elementType=q_,e.lanes=s,e;case M4:return Db(n,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case E4:o=10;break t;case A4:o=9;break t;case Wx:o=11;break t;case Hx:o=14;break t;case ra:o=16,r=null;break t}throw Error(q(130,e==null?e:typeof e,""))}return t=ii(o,n,t,i),t.elementType=e,t.type=r,t.lanes=s,t}function Jl(e,t,n,r){return e=ii(7,e,r,t),e.lanes=n,e}function Db(e,t,n,r){return e=ii(22,e,r,t),e.elementType=M4,e.lanes=n,e.stateNode={isHidden:!1},e}function xw(e,t,n){return e=ii(6,e,null,t),e.lanes=n,e}function Iw(e,t,n){return t=ii(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function BV(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=iw(0),this.expirationTimes=iw(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=iw(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function MI(e,t,n,r,i,s,o,a,l){return e=new BV(e,t,n,a,l),t===1?(t=1,s===!0&&(t|=8)):t=0,s=ii(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},fI(s),e}function RV(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:pu,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function wk(e){if(!e)return Da;e=e._reactInternals;t:{if(Nc(e)!==e||e.tag!==1)throw Error(q(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break t;case 1:if(ur(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break t}}t=t.return}while(t!==null);throw Error(q(171))}if(e.tag===1){var n=e.type;if(ur(n))return vD(e,n,t)}return t}function _k(e,t,n,r,i,s,o,a,l){return e=MI(n,r,!0,e,i,s,o,a,l),e.context=wk(null),n=e.current,r=Hn(),i=Ea(n),s=Io(r,i),s.callback=t??null,Ia(n,s,i),e.current.lanes=i,zp(e,i,r),fr(e,r),e}function kb(e,t,n,r){var i=t.current,s=Hn(),o=Ea(i);return n=wk(n),t.context===null?t.context=n:t.pendingContext=n,t=Io(s,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Ia(i,t,o),e!==null&&(Li(e,i,o,s),G0(e,i,o)),o}function Jm(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function KA(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function $I(e,t){KA(e,t),(e=e.alternate)&&KA(e,t)}function LV(){return null}var Sk=typeof reportError=="function"?reportError:function(e){console.error(e)};function NI(e){this._internalRoot=e}Ob.prototype.render=NI.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(q(409));kb(e,t,null,null)};Ob.prototype.unmount=NI.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;dc(function(){kb(null,e,null,null)}),t[Do]=null}};function Ob(e){this._internalRoot=e}Ob.prototype.unstable_scheduleHydration=function(e){if(e){var t=Z4();e={blockedOn:null,target:e,priority:t};for(var n=0;n<ua.length&&t!==0&&t<ua[n].priority;n++);ua.splice(n,0,e),n===0&&tD(e)}};function DI(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Fb(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function ZA(){}function CV(e,t,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=Jm(o);s.call(c)}}var o=_k(t,r,e,0,null,!1,!1,"",ZA);return e._reactRootContainer=o,e[Do]=o.current,Yh(e.nodeType===8?e.parentNode:e),dc(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=Jm(l);a.call(c)}}var l=MI(e,0,!1,null,null,!1,!1,"",ZA);return e._reactRootContainer=l,e[Do]=l.current,Yh(e.nodeType===8?e.parentNode:e),dc(function(){kb(t,l,n,r)}),l}function Bb(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Jm(o);a.call(l)}}kb(t,o,e,i)}else o=CV(n,t,e,i,r);return Jm(o)}Q4=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Hd(t.pendingLanes);n!==0&&(Qx(t,n|1),fr(t,Xe()),!(Gt&6)&&(yf=Xe()+500,el()))}break;case 13:dc(function(){var r=ko(e,1);if(r!==null){var i=Hn();Li(r,e,1,i)}}),$I(e,1)}};Kx=function(e){if(e.tag===13){var t=ko(e,134217728);if(t!==null){var n=Hn();Li(t,e,134217728,n)}$I(e,134217728)}};K4=function(e){if(e.tag===13){var t=Ea(e),n=ko(e,t);if(n!==null){var r=Hn();Li(n,e,t,r)}$I(e,t)}};Z4=function(){return le};J4=function(e,t){var n=le;try{return le=e,t()}finally{le=n}};e2=function(e,t,n){switch(t){case"input":if(G_(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Tb(r);if(!i)throw Error(q(90));N4(r),G_(r,i)}}}break;case"textarea":k4(e,n);break;case"select":t=n.value,t!=null&&Ru(e,!!n.multiple,t,!1)}};U4=II;P4=dc;var UV={usingClientEntryPoint:!1,Events:[Vp,vu,Tb,L4,C4,II]},Md={findFiberByHostInstance:Bl,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},PV={bundleType:Md.bundleType,version:Md.version,rendererPackageName:Md.rendererPackageName,rendererConfig:Md.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Po.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=V4(e),e===null?null:e.stateNode},findFiberByHostInstance:Md.findFiberByHostInstance||LV,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var i0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!i0.isDisabled&&i0.supportsFiber)try{_b=i0.inject(PV),Ns=i0}catch{}}jr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=UV;jr.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!DI(t))throw Error(q(200));return RV(e,t,null,n)};jr.createRoot=function(e,t){if(!DI(e))throw Error(q(299));var n=!1,r="",i=Sk;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=MI(e,1,!1,null,null,n,!1,r,i),e[Do]=t.current,Yh(e.nodeType===8?e.parentNode:e),new NI(t)};jr.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(q(188)):(e=Object.keys(e).join(","),Error(q(268,e)));return e=V4(t),e=e===null?null:e.stateNode,e};jr.flushSync=function(e){return dc(e)};jr.hydrate=function(e,t,n){if(!Fb(t))throw Error(q(200));return Bb(null,e,t,!0,n)};jr.hydrateRoot=function(e,t,n){if(!DI(e))throw Error(q(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=Sk;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=_k(t,null,e,1,n??null,i,!1,s,o),e[Do]=t.current,Yh(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Ob(t)};jr.render=function(e,t,n){if(!Fb(t))throw Error(q(200));return Bb(null,e,t,!1,n)};jr.unmountComponentAtNode=function(e){if(!Fb(e))throw Error(q(40));return e._reactRootContainer?(dc(function(){Bb(null,null,e,!1,function(){e._reactRootContainer=null,e[Do]=null})}),!0):!1};jr.unstable_batchedUpdates=II;jr.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Fb(n))throw Error(q(200));if(e==null||e._reactInternals===void 0)throw Error(q(38));return Bb(e,t,n,!1,r)};jr.version="18.2.0-next-9e3b772b8-20220608";function xk(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(xk)}catch(e){console.error(e)}}xk(),_4.exports=jr;var zV=_4.exports,JA=zV;z_.createRoot=JA.createRoot,z_.hydrateRoot=JA.hydrateRoot;function W(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(e,t||[])).next())})}function tM(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function K(e){return this instanceof K?(this.v=e,this):new K(e)}function en(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(d){r[d]&&(i[d]=function(h){return new Promise(function(p,g){s.push([d,h,p,g])>1||a(d,h)})})}function a(d,h){try{l(r[d](h))}catch(p){f(s[0][3],p)}}function l(d){d.value instanceof K?Promise.resolve(d.value.v).then(c,u):f(s[0][2],d)}function c(d){a("next",d)}function u(d){a("throw",d)}function f(d,h){d(h),s.shift(),s.length&&a(s[0][0],s[0][1])}}function Ma(e){var t,n;return t={},r("next"),r("throw",function(i){throw i}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(i,s){t[i]=e[i]?function(o){return(n=!n)?{value:K(e[i](o)),done:!1}:s?s(o):o}:s}}function Fr(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof tM=="function"?tM(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=e[s]&&function(o){return new Promise(function(a,l){o=e[s](o),i(a,l,o.done,o.value)})}}function i(s,o,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},o)}}const jV=new TextDecoder("utf-8"),F2=e=>jV.decode(e),VV=new TextEncoder,kI=e=>VV.encode(e),[Pbt,YV]=(()=>{const e=()=>{throw new Error("BigInt is not available in this environment")};function t(){throw e()}return t.asIntN=()=>{throw e()},t.asUintN=()=>{throw e()},typeof BigInt<"u"?[BigInt,!0]:[t,!1]})(),[qp,zbt]=(()=>{const e=()=>{throw new Error("BigInt64Array is not available in this environment")};class t{static get BYTES_PER_ELEMENT(){return 8}static of(){throw e()}static from(){throw e()}constructor(){throw e()}}return typeof BigInt64Array<"u"?[BigInt64Array,!0]:[t,!1]})(),[Wp,jbt]=(()=>{const e=()=>{throw new Error("BigUint64Array is not available in this environment")};class t{static get BYTES_PER_ELEMENT(){return 8}static of(){throw e()}static from(){throw e()}constructor(){throw e()}}return typeof BigUint64Array<"u"?[BigUint64Array,!0]:[t,!1]})(),qV=e=>typeof e=="number",WV=e=>typeof e=="boolean",Pn=e=>typeof e=="function",Pi=e=>e!=null&&Object(e)===e,Jh=e=>Pi(e)&&Pn(e.then),Rb=e=>Pi(e)&&Pn(e[Symbol.iterator]),OI=e=>Pi(e)&&Pn(e[Symbol.asyncIterator]),B2=e=>Pi(e)&&Pi(e.schema),Ik=e=>Pi(e)&&"done"in e&&"value"in e,Tk=e=>Pi(e)&&Pn(e.stat)&&qV(e.fd),Ek=e=>Pi(e)&&FI(e.body),Ak=e=>"_getDOMStream"in e&&"_getNodeStream"in e,FI=e=>Pi(e)&&Pn(e.cancel)&&Pn(e.getReader)&&!Ak(e),Mk=e=>Pi(e)&&Pn(e.read)&&Pn(e.pipe)&&WV(e.readable)&&!Ak(e),HV=e=>Pi(e)&&Pn(e.clear)&&Pn(e.bytes)&&Pn(e.position)&&Pn(e.setPosition)&&Pn(e.capacity)&&Pn(e.getBufferIdentifier)&&Pn(e.createLong),BI=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function GV(e){const t=e[0]?[e[0]]:[];let n,r,i,s;for(let o,a,l=0,c=0,u=e.length;++l<u;){if(o=t[c],a=e[l],!o||!a||o.buffer!==a.buffer||a.byteOffset<o.byteOffset){a&&(t[++c]=a);continue}if({byteOffset:n,byteLength:i}=o,{byteOffset:r,byteLength:s}=a,n+i<r||r+s<n){a&&(t[++c]=a);continue}t[c]=new Uint8Array(o.buffer,n,r-n+s)}return t}function eM(e,t,n=0,r=t.byteLength){const i=e.byteLength,s=new Uint8Array(e.buffer,e.byteOffset,i),o=new Uint8Array(t.buffer,t.byteOffset,Math.min(r,i));return s.set(o,n),e}function Bs(e,t){const n=GV(e),r=n.reduce((u,f)=>u+f.byteLength,0);let i,s,o,a=0,l=-1;const c=Math.min(t||Number.POSITIVE_INFINITY,r);for(const u=n.length;++l<u;){if(i=n[l],s=i.subarray(0,Math.min(i.length,c-a)),c<=a+s.length){s.length<i.length?n[l]=i.subarray(s.length):s.length===i.length&&l++,o?eM(o,s,a):o=s;break}eM(o||(o=new Uint8Array(c)),s,a),a+=s.length}return[o||new Uint8Array(0),n.slice(l),r-(o?o.byteLength:0)]}function pe(e,t){let n=Ik(t)?t.value:t;return n instanceof e?e===Uint8Array?new e(n.buffer,n.byteOffset,n.byteLength):n:n?(typeof n=="string"&&(n=kI(n)),n instanceof ArrayBuffer?new e(n):n instanceof BI?new e(n):HV(n)?pe(e,n.bytes()):ArrayBuffer.isView(n)?n.byteLength<=0?new e(0):new e(n.buffer,n.byteOffset,n.byteLength/e.BYTES_PER_ELEMENT):e.from(n)):new e(0)}const $d=e=>pe(Int32Array,e),ne=e=>pe(Uint8Array,e),R2=e=>(e.next(),e);function*XV(e,t){const n=function*(i){yield i},r=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof BI?n(t):Rb(t)?t:n(t);return yield*R2(function*(i){let s=null;do s=i.next(yield pe(e,s));while(!s.done)}(r[Symbol.iterator]())),new e}const QV=e=>XV(Uint8Array,e);function $k(e,t){return en(this,arguments,function*(){if(Jh(t))return yield K(yield K(yield*Ma(Fr($k(e,yield K(t))))));const r=function(o){return en(this,arguments,function*(){yield yield K(yield K(o))})},i=function(o){return en(this,arguments,function*(){yield K(yield*Ma(Fr(R2(function*(a){let l=null;do l=a.next(yield l==null?void 0:l.value);while(!l.done)}(o[Symbol.iterator]())))))})},s=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof BI?r(t):Rb(t)?i(t):OI(t)?t:r(t);return yield K(yield*Ma(Fr(R2(function(o){return en(this,arguments,function*(){let a=null;do a=yield K(o.next(yield yield K(pe(e,a))));while(!a.done)})}(s[Symbol.asyncIterator]()))))),yield K(new e)})}const KV=e=>$k(Uint8Array,e);function ZV(e,t){let n=0;const r=e.length;if(r!==t.length)return!1;if(r>0)do if(e[n]!==t[n])return!1;while(++n<r);return!0}const Qr={fromIterable(e){return s0(JV(e))},fromAsyncIterable(e){return s0(tY(e))},fromDOMStream(e){return s0(eY(e))},fromNodeStream(e){return s0(rY(e))},toDOMStream(e,t){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(e,t){throw new Error('"toNodeStream" not available in this environment')}},s0=e=>(e.next(),e);function*JV(e){let t,n=!1,r=[],i,s,o,a=0;function l(){return s==="peek"?Bs(r,o)[0]:([i,r,a]=Bs(r,o),i)}({cmd:s,size:o}=yield null);const c=QV(e)[Symbol.iterator]();try{do if({done:t,value:i}=Number.isNaN(o-a)?c.next():c.next(o-a),!t&&i.byteLength>0&&(r.push(i),a+=i.byteLength),t||o<=a)do({cmd:s,size:o}=yield l());while(o<a);while(!t)}catch(u){(n=!0)&&typeof c.throw=="function"&&c.throw(u)}finally{n===!1&&typeof c.return=="function"&&c.return(null)}return null}function tY(e){return en(this,arguments,function*(){let n,r=!1,i=[],s,o,a,l=0;function c(){return o==="peek"?Bs(i,a)[0]:([s,i,l]=Bs(i,a),s)}({cmd:o,size:a}=yield yield K(null));const u=KV(e)[Symbol.asyncIterator]();try{do if({done:n,value:s}=Number.isNaN(a-l)?yield K(u.next()):yield K(u.next(a-l)),!n&&s.byteLength>0&&(i.push(s),l+=s.byteLength),n||a<=l)do({cmd:o,size:a}=yield yield K(c()));while(a<l);while(!n)}catch(f){(r=!0)&&typeof u.throw=="function"&&(yield K(u.throw(f)))}finally{r===!1&&typeof u.return=="function"&&(yield K(u.return(new Uint8Array(0))))}return yield K(null)})}function eY(e){return en(this,arguments,function*(){let n=!1,r=!1,i=[],s,o,a,l=0;function c(){return o==="peek"?Bs(i,a)[0]:([s,i,l]=Bs(i,a),s)}({cmd:o,size:a}=yield yield K(null));const u=new nY(e);try{do if({done:n,value:s}=Number.isNaN(a-l)?yield K(u.read()):yield K(u.read(a-l)),!n&&s.byteLength>0&&(i.push(ne(s)),l+=s.byteLength),n||a<=l)do({cmd:o,size:a}=yield yield K(c()));while(a<l);while(!n)}catch(f){(r=!0)&&(yield K(u.cancel(f)))}finally{r===!1?yield K(u.cancel()):e.locked&&u.releaseLock()}return yield K(null)})}let nY=class{constructor(t){this.source=t,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(t){return W(this,void 0,void 0,function*(){const{reader:n,source:r}=this;n&&(yield n.cancel(t).catch(()=>{})),r&&r.locked&&this.releaseLock()})}read(t){return W(this,void 0,void 0,function*(){if(t===0)return{done:this.reader==null,value:new Uint8Array(0)};const n=yield this.reader.read();return!n.done&&(n.value=ne(n)),n})}};const Tw=(e,t)=>{const n=i=>r([t,i]);let r;return[t,n,new Promise(i=>(r=i)&&e.once(t,n))]};function rY(e){return en(this,arguments,function*(){const n=[];let r="error",i=!1,s=null,o,a,l=0,c=[],u;function f(){return o==="peek"?Bs(c,a)[0]:([u,c,l]=Bs(c,a),u)}if({cmd:o,size:a}=yield yield K(null),e.isTTY)return yield yield K(new Uint8Array(0)),yield K(null);try{n[0]=Tw(e,"end"),n[1]=Tw(e,"error");do{if(n[2]=Tw(e,"readable"),[r,s]=yield K(Promise.race(n.map(h=>h[2]))),r==="error")break;if((i=r==="end")||(Number.isFinite(a-l)?(u=ne(e.read(a-l)),u.byteLength<a-l&&(u=ne(e.read()))):u=ne(e.read()),u.byteLength>0&&(c.push(u),l+=u.byteLength)),i||a<=l)do({cmd:o,size:a}=yield yield K(f()));while(a<l)}while(!i)}finally{yield K(d(n,r==="error"?s:null))}return yield K(null);function d(h,p){return u=c=null,new Promise((g,v)=>{for(const[y,m]of h)e.off(y,m);try{const y=e.destroy;y&&y.call(e,p),p=void 0}catch(y){p=y||p}finally{p!=null?v(p):g()}})}})}var ni;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(ni||(ni={}));var zi;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(zi||(zi={}));var dr;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(dr||(dr={}));var Fo;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(Fo||(Fo={}));var Jt;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(Jt||(Jt={}));var ka;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(ka||(ka={}));var ue;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(ue||(ue={}));var U;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.Float=3]="Float",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct=13]="Struct",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Dictionary=-1]="Dictionary",e[e.Int8=-2]="Int8",e[e.Int16=-3]="Int16",e[e.Int32=-4]="Int32",e[e.Int64=-5]="Int64",e[e.Uint8=-6]="Uint8",e[e.Uint16=-7]="Uint16",e[e.Uint32=-8]="Uint32",e[e.Uint64=-9]="Uint64",e[e.Float16=-10]="Float16",e[e.Float32=-11]="Float32",e[e.Float64=-12]="Float64",e[e.DateDay=-13]="DateDay",e[e.DateMillisecond=-14]="DateMillisecond",e[e.TimestampSecond=-15]="TimestampSecond",e[e.TimestampMillisecond=-16]="TimestampMillisecond",e[e.TimestampMicrosecond=-17]="TimestampMicrosecond",e[e.TimestampNanosecond=-18]="TimestampNanosecond",e[e.TimeSecond=-19]="TimeSecond",e[e.TimeMillisecond=-20]="TimeMillisecond",e[e.TimeMicrosecond=-21]="TimeMicrosecond",e[e.TimeNanosecond=-22]="TimeNanosecond",e[e.DenseUnion=-23]="DenseUnion",e[e.SparseUnion=-24]="SparseUnion",e[e.IntervalDayTime=-25]="IntervalDayTime",e[e.IntervalYearMonth=-26]="IntervalYearMonth"})(U||(U={}));var so;(function(e){e[e.OFFSET=0]="OFFSET",e[e.DATA=1]="DATA",e[e.VALIDITY=2]="VALIDITY",e[e.TYPE=3]="TYPE"})(so||(so={}));const iY=void 0;function tp(e){if(e===null)return"null";if(e===iY)return"undefined";switch(typeof e){case"number":return`${e}`;case"bigint":return`${e}`;case"string":return`"${e}"`}return typeof e[Symbol.toPrimitive]=="function"?e[Symbol.toPrimitive]("string"):ArrayBuffer.isView(e)?e instanceof qp||e instanceof Wp?`[${[...e].map(t=>tp(t))}]`:`[${e}]`:ArrayBuffer.isView(e)?`[${e}]`:JSON.stringify(e,(t,n)=>typeof n=="bigint"?`${n}`:n)}const sY=Symbol.for("isArrowBigNum");function Xi(e,...t){return t.length===0?Object.setPrototypeOf(pe(this.TypedArray,e),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(e,...t),this.constructor.prototype)}Xi.prototype[sY]=!0;Xi.prototype.toJSON=function(){return`"${tc(this)}"`};Xi.prototype.valueOf=function(){return Nk(this)};Xi.prototype.toString=function(){return tc(this)};Xi.prototype[Symbol.toPrimitive]=function(e="default"){switch(e){case"number":return Nk(this);case"string":return tc(this);case"default":return L2(this)}return tc(this)};function ju(...e){return Xi.apply(this,e)}function Vu(...e){return Xi.apply(this,e)}function ep(...e){return Xi.apply(this,e)}Object.setPrototypeOf(ju.prototype,Object.create(Int32Array.prototype));Object.setPrototypeOf(Vu.prototype,Object.create(Uint32Array.prototype));Object.setPrototypeOf(ep.prototype,Object.create(Uint32Array.prototype));Object.assign(ju.prototype,Xi.prototype,{constructor:ju,signed:!0,TypedArray:Int32Array,BigIntArray:qp});Object.assign(Vu.prototype,Xi.prototype,{constructor:Vu,signed:!1,TypedArray:Uint32Array,BigIntArray:Wp});Object.assign(ep.prototype,Xi.prototype,{constructor:ep,signed:!0,TypedArray:Uint32Array,BigIntArray:Wp});function Nk(e){const{buffer:t,byteOffset:n,length:r,signed:i}=e,s=new Wp(t,n,r),o=i&&s[s.length-1]&BigInt(1)<<BigInt(63);let a=BigInt(o?1:0),l=BigInt(0);if(o){for(const c of s)a+=~c*(BigInt(1)<<BigInt(32)*l++);a*=BigInt(-1)}else for(const c of s)a+=c*(BigInt(1)<<BigInt(32)*l++);return a}let tc,L2;YV?(L2=e=>e.byteLength===8?new e.BigIntArray(e.buffer,e.byteOffset,1)[0]:Ew(e),tc=e=>e.byteLength===8?`${new e.BigIntArray(e.buffer,e.byteOffset,1)[0]}`:Ew(e)):(tc=Ew,L2=tc);function Ew(e){let t="";const n=new Uint32Array(2);let r=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);const i=new Uint32Array((r=new Uint16Array(r).reverse()).buffer);let s=-1;const o=r.length-1;do{for(n[0]=r[s=0];s<o;)r[s++]=n[1]=n[0]/10,n[0]=(n[0]-n[1]*10<<16)+r[s];r[s]=n[1]=n[0]/10,n[0]=n[0]-n[1]*10,t=`${n[0]}${t}`}while(i[0]||i[1]||i[2]||i[3]);return t??"0"}let oY=class Dk{static new(t,n){switch(n){case!0:return new ju(t);case!1:return new Vu(t)}switch(t.constructor){case Int8Array:case Int16Array:case Int32Array:case qp:return new ju(t)}return t.byteLength===16?new ep(t):new Vu(t)}static signed(t){return new ju(t)}static unsigned(t){return new Vu(t)}static decimal(t){return new ep(t)}constructor(t,n){return Dk.new(t,n)}};var kk,Ok,Fk,Bk,Rk,Lk,Ck,Uk,Pk,zk,jk,Vk,Yk,qk,Wk,Hk,Gk,Xk,Qk;let Bt=class C2{static isNull(t){return(t==null?void 0:t.typeId)===U.Null}static isInt(t){return(t==null?void 0:t.typeId)===U.Int}static isFloat(t){return(t==null?void 0:t.typeId)===U.Float}static isBinary(t){return(t==null?void 0:t.typeId)===U.Binary}static isUtf8(t){return(t==null?void 0:t.typeId)===U.Utf8}static isBool(t){return(t==null?void 0:t.typeId)===U.Bool}static isDecimal(t){return(t==null?void 0:t.typeId)===U.Decimal}static isDate(t){return(t==null?void 0:t.typeId)===U.Date}static isTime(t){return(t==null?void 0:t.typeId)===U.Time}static isTimestamp(t){return(t==null?void 0:t.typeId)===U.Timestamp}static isInterval(t){return(t==null?void 0:t.typeId)===U.Interval}static isList(t){return(t==null?void 0:t.typeId)===U.List}static isStruct(t){return(t==null?void 0:t.typeId)===U.Struct}static isUnion(t){return(t==null?void 0:t.typeId)===U.Union}static isFixedSizeBinary(t){return(t==null?void 0:t.typeId)===U.FixedSizeBinary}static isFixedSizeList(t){return(t==null?void 0:t.typeId)===U.FixedSizeList}static isMap(t){return(t==null?void 0:t.typeId)===U.Map}static isDictionary(t){return(t==null?void 0:t.typeId)===U.Dictionary}static isDenseUnion(t){return C2.isUnion(t)&&t.mode===zi.Dense}static isSparseUnion(t){return C2.isUnion(t)&&t.mode===zi.Sparse}get typeId(){return U.NONE}};kk=Symbol.toStringTag;Bt[kk]=(e=>(e.children=null,e.ArrayType=Array,e[Symbol.toStringTag]="DataType"))(Bt.prototype);let Oa=class extends Bt{toString(){return"Null"}get typeId(){return U.Null}};Ok=Symbol.toStringTag;Oa[Ok]=(e=>e[Symbol.toStringTag]="Null")(Oa.prototype);let Fa=class extends Bt{constructor(t,n){super(),this.isSigned=t,this.bitWidth=n}get typeId(){return U.Int}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?qp:Wp}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}};Fk=Symbol.toStringTag;Fa[Fk]=(e=>(e.isSigned=null,e.bitWidth=null,e[Symbol.toStringTag]="Int"))(Fa.prototype);let np=class extends Fa{constructor(){super(!0,32)}get ArrayType(){return Int32Array}};Object.defineProperty(np.prototype,"ArrayType",{value:Int32Array});let rp=class extends Bt{constructor(t){super(),this.precision=t}get typeId(){return U.Float}get ArrayType(){switch(this.precision){case dr.HALF:return Uint16Array;case dr.SINGLE:return Float32Array;case dr.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}};Bk=Symbol.toStringTag;rp[Bk]=(e=>(e.precision=null,e[Symbol.toStringTag]="Float"))(rp.prototype);let tg=class extends Bt{constructor(){super()}get typeId(){return U.Binary}toString(){return"Binary"}};Rk=Symbol.toStringTag;tg[Rk]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Binary"))(tg.prototype);let eg=class extends Bt{constructor(){super()}get typeId(){return U.Utf8}toString(){return"Utf8"}};Lk=Symbol.toStringTag;eg[Lk]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Utf8"))(eg.prototype);let ng=class extends Bt{constructor(){super()}get typeId(){return U.Bool}toString(){return"Bool"}};Ck=Symbol.toStringTag;ng[Ck]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Bool"))(ng.prototype);let rg=class extends Bt{constructor(t,n,r=128){super(),this.scale=t,this.precision=n,this.bitWidth=r}get typeId(){return U.Decimal}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}};Uk=Symbol.toStringTag;rg[Uk]=(e=>(e.scale=null,e.precision=null,e.ArrayType=Uint32Array,e[Symbol.toStringTag]="Decimal"))(rg.prototype);let ig=class extends Bt{constructor(t){super(),this.unit=t}get typeId(){return U.Date}toString(){return`Date${(this.unit+1)*32}<${Fo[this.unit]}>`}};Pk=Symbol.toStringTag;ig[Pk]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Date"))(ig.prototype);let ip=class extends Bt{constructor(t,n){super(),this.unit=t,this.bitWidth=n}get typeId(){return U.Time}toString(){return`Time${this.bitWidth}<${Jt[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return qp}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}};zk=Symbol.toStringTag;ip[zk]=(e=>(e.unit=null,e.bitWidth=null,e[Symbol.toStringTag]="Time"))(ip.prototype);let sg=class extends Bt{constructor(t,n){super(),this.unit=t,this.timezone=n}get typeId(){return U.Timestamp}toString(){return`Timestamp<${Jt[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}};jk=Symbol.toStringTag;sg[jk]=(e=>(e.unit=null,e.timezone=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Timestamp"))(sg.prototype);let og=class extends Bt{constructor(t){super(),this.unit=t}get typeId(){return U.Interval}toString(){return`Interval<${ka[this.unit]}>`}};Vk=Symbol.toStringTag;og[Vk]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Interval"))(og.prototype);let ag=class extends Bt{constructor(t){super(),this.children=[t]}get typeId(){return U.List}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}};Yk=Symbol.toStringTag;ag[Yk]=(e=>(e.children=null,e[Symbol.toStringTag]="List"))(ag.prototype);let Yn=class extends Bt{constructor(t){super(),this.children=t}get typeId(){return U.Struct}toString(){return`Struct<{${this.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}};qk=Symbol.toStringTag;Yn[qk]=(e=>(e.children=null,e[Symbol.toStringTag]="Struct"))(Yn.prototype);let lg=class extends Bt{constructor(t,n,r){super(),this.mode=t,this.children=r,this.typeIds=n=Int32Array.from(n),this.typeIdToChildIndex=n.reduce((i,s,o)=>(i[s]=o)&&i||i,Object.create(null))}get typeId(){return U.Union}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(t=>`${t.type}`).join(" | ")}>`}};Wk=Symbol.toStringTag;lg[Wk]=(e=>(e.mode=null,e.typeIds=null,e.children=null,e.typeIdToChildIndex=null,e.ArrayType=Int8Array,e[Symbol.toStringTag]="Union"))(lg.prototype);let cg=class extends Bt{constructor(t){super(),this.byteWidth=t}get typeId(){return U.FixedSizeBinary}toString(){return`FixedSizeBinary[${this.byteWidth}]`}};Hk=Symbol.toStringTag;cg[Hk]=(e=>(e.byteWidth=null,e.ArrayType=Uint8Array,e[Symbol.toStringTag]="FixedSizeBinary"))(cg.prototype);let ug=class extends Bt{constructor(t,n){super(),this.listSize=t,this.children=[n]}get typeId(){return U.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}};Gk=Symbol.toStringTag;ug[Gk]=(e=>(e.children=null,e.listSize=null,e[Symbol.toStringTag]="FixedSizeList"))(ug.prototype);let fg=class extends Bt{constructor(t,n=!1){super(),this.children=[t],this.keysSorted=n}get typeId(){return U.Map}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}};Xk=Symbol.toStringTag;fg[Xk]=(e=>(e.children=null,e.keysSorted=null,e[Symbol.toStringTag]="Map_"))(fg.prototype);const aY=(e=>()=>++e)(-1);let mf=class extends Bt{constructor(t,n,r,i){super(),this.indices=n,this.dictionary=t,this.isOrdered=i||!1,this.id=r==null?aY():typeof r=="number"?r:r.low}get typeId(){return U.Dictionary}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}};Qk=Symbol.toStringTag;mf[Qk]=(e=>(e.id=null,e.indices=null,e.isOrdered=null,e.dictionary=null,e[Symbol.toStringTag]="Dictionary"))(mf.prototype);function oo(e){const t=e;switch(e.typeId){case U.Decimal:return e.bitWidth/32;case U.Timestamp:return 2;case U.Date:return 1+t.unit;case U.Interval:return 1+t.unit;case U.FixedSizeList:return t.listSize;case U.FixedSizeBinary:return t.byteWidth;default:return 1}}let Wt=class{visitMany(t,...n){return t.map((r,i)=>this.visit(r,...n.map(s=>s[i])))}visit(...t){return this.getVisitFn(t[0],!1).apply(this,t)}getVisitFn(t,n=!0){return lY(this,t,n)}getVisitFnByTypeId(t,n=!0){return Kc(this,t,n)}visitNull(t,...n){return null}visitBool(t,...n){return null}visitInt(t,...n){return null}visitFloat(t,...n){return null}visitUtf8(t,...n){return null}visitBinary(t,...n){return null}visitFixedSizeBinary(t,...n){return null}visitDate(t,...n){return null}visitTimestamp(t,...n){return null}visitTime(t,...n){return null}visitDecimal(t,...n){return null}visitList(t,...n){return null}visitStruct(t,...n){return null}visitUnion(t,...n){return null}visitDictionary(t,...n){return null}visitInterval(t,...n){return null}visitFixedSizeList(t,...n){return null}visitMap(t,...n){return null}};function lY(e,t,n=!0){return typeof t=="number"?Kc(e,t,n):typeof t=="string"&&t in U?Kc(e,U[t],n):t&&t instanceof Bt?Kc(e,nM(t),n):t!=null&&t.type&&t.type instanceof Bt?Kc(e,nM(t.type),n):Kc(e,U.NONE,n)}function Kc(e,t,n=!0){let r=null;switch(t){case U.Null:r=e.visitNull;break;case U.Bool:r=e.visitBool;break;case U.Int:r=e.visitInt;break;case U.Int8:r=e.visitInt8||e.visitInt;break;case U.Int16:r=e.visitInt16||e.visitInt;break;case U.Int32:r=e.visitInt32||e.visitInt;break;case U.Int64:r=e.visitInt64||e.visitInt;break;case U.Uint8:r=e.visitUint8||e.visitInt;break;case U.Uint16:r=e.visitUint16||e.visitInt;break;case U.Uint32:r=e.visitUint32||e.visitInt;break;case U.Uint64:r=e.visitUint64||e.visitInt;break;case U.Float:r=e.visitFloat;break;case U.Float16:r=e.visitFloat16||e.visitFloat;break;case U.Float32:r=e.visitFloat32||e.visitFloat;break;case U.Float64:r=e.visitFloat64||e.visitFloat;break;case U.Utf8:r=e.visitUtf8;break;case U.Binary:r=e.visitBinary;break;case U.FixedSizeBinary:r=e.visitFixedSizeBinary;break;case U.Date:r=e.visitDate;break;case U.DateDay:r=e.visitDateDay||e.visitDate;break;case U.DateMillisecond:r=e.visitDateMillisecond||e.visitDate;break;case U.Timestamp:r=e.visitTimestamp;break;case U.TimestampSecond:r=e.visitTimestampSecond||e.visitTimestamp;break;case U.TimestampMillisecond:r=e.visitTimestampMillisecond||e.visitTimestamp;break;case U.TimestampMicrosecond:r=e.visitTimestampMicrosecond||e.visitTimestamp;break;case U.TimestampNanosecond:r=e.visitTimestampNanosecond||e.visitTimestamp;break;case U.Time:r=e.visitTime;break;case U.TimeSecond:r=e.visitTimeSecond||e.visitTime;break;case U.TimeMillisecond:r=e.visitTimeMillisecond||e.visitTime;break;case U.TimeMicrosecond:r=e.visitTimeMicrosecond||e.visitTime;break;case U.TimeNanosecond:r=e.visitTimeNanosecond||e.visitTime;break;case U.Decimal:r=e.visitDecimal;break;case U.List:r=e.visitList;break;case U.Struct:r=e.visitStruct;break;case U.Union:r=e.visitUnion;break;case U.DenseUnion:r=e.visitDenseUnion||e.visitUnion;break;case U.SparseUnion:r=e.visitSparseUnion||e.visitUnion;break;case U.Dictionary:r=e.visitDictionary;break;case U.Interval:r=e.visitInterval;break;case U.IntervalDayTime:r=e.visitIntervalDayTime||e.visitInterval;break;case U.IntervalYearMonth:r=e.visitIntervalYearMonth||e.visitInterval;break;case U.FixedSizeList:r=e.visitFixedSizeList;break;case U.Map:r=e.visitMap;break}if(typeof r=="function")return r;if(!n)return()=>null;throw new Error(`Unrecognized type '${U[t]}'`)}function nM(e){switch(e.typeId){case U.Null:return U.Null;case U.Int:{const{bitWidth:t,isSigned:n}=e;switch(t){case 8:return n?U.Int8:U.Uint8;case 16:return n?U.Int16:U.Uint16;case 32:return n?U.Int32:U.Uint32;case 64:return n?U.Int64:U.Uint64}return U.Int}case U.Float:switch(e.precision){case dr.HALF:return U.Float16;case dr.SINGLE:return U.Float32;case dr.DOUBLE:return U.Float64}return U.Float;case U.Binary:return U.Binary;case U.Utf8:return U.Utf8;case U.Bool:return U.Bool;case U.Decimal:return U.Decimal;case U.Time:switch(e.unit){case Jt.SECOND:return U.TimeSecond;case Jt.MILLISECOND:return U.TimeMillisecond;case Jt.MICROSECOND:return U.TimeMicrosecond;case Jt.NANOSECOND:return U.TimeNanosecond}return U.Time;case U.Timestamp:switch(e.unit){case Jt.SECOND:return U.TimestampSecond;case Jt.MILLISECOND:return U.TimestampMillisecond;case Jt.MICROSECOND:return U.TimestampMicrosecond;case Jt.NANOSECOND:return U.TimestampNanosecond}return U.Timestamp;case U.Date:switch(e.unit){case Fo.DAY:return U.DateDay;case Fo.MILLISECOND:return U.DateMillisecond}return U.Date;case U.Interval:switch(e.unit){case ka.DAY_TIME:return U.IntervalDayTime;case ka.YEAR_MONTH:return U.IntervalYearMonth}return U.Interval;case U.Map:return U.Map;case U.List:return U.List;case U.Struct:return U.Struct;case U.Union:switch(e.mode){case zi.Dense:return U.DenseUnion;case zi.Sparse:return U.SparseUnion}return U.Union;case U.FixedSizeBinary:return U.FixedSizeBinary;case U.FixedSizeList:return U.FixedSizeList;case U.Dictionary:return U.Dictionary}throw new Error(`Unrecognized type '${U[e.typeId]}'`)}Wt.prototype.visitInt8=null;Wt.prototype.visitInt16=null;Wt.prototype.visitInt32=null;Wt.prototype.visitInt64=null;Wt.prototype.visitUint8=null;Wt.prototype.visitUint16=null;Wt.prototype.visitUint32=null;Wt.prototype.visitUint64=null;Wt.prototype.visitFloat16=null;Wt.prototype.visitFloat32=null;Wt.prototype.visitFloat64=null;Wt.prototype.visitDateDay=null;Wt.prototype.visitDateMillisecond=null;Wt.prototype.visitTimestampSecond=null;Wt.prototype.visitTimestampMillisecond=null;Wt.prototype.visitTimestampMicrosecond=null;Wt.prototype.visitTimestampNanosecond=null;Wt.prototype.visitTimeSecond=null;Wt.prototype.visitTimeMillisecond=null;Wt.prototype.visitTimeMicrosecond=null;Wt.prototype.visitTimeNanosecond=null;Wt.prototype.visitDenseUnion=null;Wt.prototype.visitSparseUnion=null;Wt.prototype.visitIntervalDayTime=null;Wt.prototype.visitIntervalYearMonth=null;const Kk=new Float64Array(1),Cc=new Uint32Array(Kk.buffer);function Zk(e){const t=(e&31744)>>10,n=(e&1023)/1024,r=Math.pow(-1,(e&32768)>>15);switch(t){case 31:return r*(n?Number.NaN:1/0);case 0:return r*(n?6103515625e-14*n:0)}return r*Math.pow(2,t-15)*(1+n)}function cY(e){if(e!==e)return 32256;Kk[0]=e;const t=(Cc[1]&2147483648)>>16&65535;let n=Cc[1]&2146435072,r=0;return n>=1089470464?Cc[0]>0?n=31744:(n=(n&2080374784)>>16,r=(Cc[1]&1048575)>>10):n<=1056964608?(r=1048576+(Cc[1]&1048575),r=1048576+(r<<(n>>20)-998)>>21,n=0):(n=n-1056964608>>10,r=(Cc[1]&1048575)+512>>10),t|n|r&65535}let Mt=class extends Wt{};function Dt(e){return(t,n,r)=>{if(t.setValid(n,r!=null))return e(t,n,r)}}const uY=(e,t,n)=>{e[t]=Math.trunc(n/864e5)},RI=(e,t,n)=>{e[t]=Math.trunc(n%4294967296),e[t+1]=Math.trunc(n/4294967296)},fY=(e,t,n)=>{e[t]=Math.trunc(n*1e3%4294967296),e[t+1]=Math.trunc(n*1e3/4294967296)},dY=(e,t,n)=>{e[t]=Math.trunc(n*1e6%4294967296),e[t+1]=Math.trunc(n*1e6/4294967296)},Jk=(e,t,n,r)=>{if(n+1<t.length){const{[n]:i,[n+1]:s}=t;e.set(r.subarray(0,s-i),i)}},hY=({offset:e,values:t},n,r)=>{const i=e+n;r?t[i>>3]|=1<<i%8:t[i>>3]&=~(1<<i%8)},zo=({values:e},t,n)=>{e[t]=n},LI=({values:e},t,n)=>{e[t]=n},t8=({values:e},t,n)=>{e[t]=cY(n)},pY=(e,t,n)=>{switch(e.type.precision){case dr.HALF:return t8(e,t,n);case dr.SINGLE:case dr.DOUBLE:return LI(e,t,n)}},e8=({values:e},t,n)=>{uY(e,t,n.valueOf())},n8=({values:e},t,n)=>{RI(e,t*2,n.valueOf())},yY=({stride:e,values:t},n,r)=>{t.set(r.subarray(0,e),e*n)},mY=({values:e,valueOffsets:t},n,r)=>Jk(e,t,n,r),gY=({values:e,valueOffsets:t},n,r)=>{Jk(e,t,n,kI(r))},bY=(e,t,n)=>{e.type.unit===Fo.DAY?e8(e,t,n):n8(e,t,n)},r8=({values:e},t,n)=>RI(e,t*2,n/1e3),i8=({values:e},t,n)=>RI(e,t*2,n),s8=({values:e},t,n)=>fY(e,t*2,n),o8=({values:e},t,n)=>dY(e,t*2,n),vY=(e,t,n)=>{switch(e.type.unit){case Jt.SECOND:return r8(e,t,n);case Jt.MILLISECOND:return i8(e,t,n);case Jt.MICROSECOND:return s8(e,t,n);case Jt.NANOSECOND:return o8(e,t,n)}},a8=({values:e},t,n)=>{e[t]=n},l8=({values:e},t,n)=>{e[t]=n},c8=({values:e},t,n)=>{e[t]=n},u8=({values:e},t,n)=>{e[t]=n},wY=(e,t,n)=>{switch(e.type.unit){case Jt.SECOND:return a8(e,t,n);case Jt.MILLISECOND:return l8(e,t,n);case Jt.MICROSECOND:return c8(e,t,n);case Jt.NANOSECOND:return u8(e,t,n)}},_Y=({values:e,stride:t},n,r)=>{e.set(r.subarray(0,t),t*n)},SY=(e,t,n)=>{const r=e.children[0],i=e.valueOffsets,s=mi.getVisitFn(r);if(Array.isArray(n))for(let o=-1,a=i[t],l=i[t+1];a<l;)s(r,a++,n[++o]);else for(let o=-1,a=i[t],l=i[t+1];a<l;)s(r,a++,n.get(++o))},xY=(e,t,n)=>{const r=e.children[0],{valueOffsets:i}=e,s=mi.getVisitFn(r);let{[t]:o,[t+1]:a}=i;const l=n instanceof Map?n.entries():Object.entries(n);for(const c of l)if(s(r,o,c),++o>=a)break},IY=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[s]),TY=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(s)),EY=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(i.name)),AY=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[i.name]),MY=(e,t,n)=>{const r=e.type.children.map(s=>mi.getVisitFn(s.type)),i=n instanceof Map?EY(t,n):n instanceof Qe?TY(t,n):Array.isArray(n)?IY(t,n):AY(t,n);e.type.children.forEach((s,o)=>i(r[o],e.children[o],s,o))},$Y=(e,t,n)=>{e.type.mode===zi.Dense?f8(e,t,n):d8(e,t,n)},f8=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];mi.visit(i,e.valueOffsets[t],n)},d8=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];mi.visit(i,t,n)},NY=(e,t,n)=>{var r;(r=e.dictionary)===null||r===void 0||r.set(e.values[t],n)},DY=(e,t,n)=>{e.type.unit===ka.DAY_TIME?h8(e,t,n):p8(e,t,n)},h8=({values:e},t,n)=>{e.set(n.subarray(0,2),2*t)},p8=({values:e},t,n)=>{e[t]=n[0]*12+n[1]%12},kY=(e,t,n)=>{const{stride:r}=e,i=e.children[0],s=mi.getVisitFn(i);if(Array.isArray(n))for(let o=-1,a=t*r;++o<r;)s(i,a+o,n[o]);else for(let o=-1,a=t*r;++o<r;)s(i,a+o,n.get(o))};Mt.prototype.visitBool=Dt(hY);Mt.prototype.visitInt=Dt(zo);Mt.prototype.visitInt8=Dt(zo);Mt.prototype.visitInt16=Dt(zo);Mt.prototype.visitInt32=Dt(zo);Mt.prototype.visitInt64=Dt(zo);Mt.prototype.visitUint8=Dt(zo);Mt.prototype.visitUint16=Dt(zo);Mt.prototype.visitUint32=Dt(zo);Mt.prototype.visitUint64=Dt(zo);Mt.prototype.visitFloat=Dt(pY);Mt.prototype.visitFloat16=Dt(t8);Mt.prototype.visitFloat32=Dt(LI);Mt.prototype.visitFloat64=Dt(LI);Mt.prototype.visitUtf8=Dt(gY);Mt.prototype.visitBinary=Dt(mY);Mt.prototype.visitFixedSizeBinary=Dt(yY);Mt.prototype.visitDate=Dt(bY);Mt.prototype.visitDateDay=Dt(e8);Mt.prototype.visitDateMillisecond=Dt(n8);Mt.prototype.visitTimestamp=Dt(vY);Mt.prototype.visitTimestampSecond=Dt(r8);Mt.prototype.visitTimestampMillisecond=Dt(i8);Mt.prototype.visitTimestampMicrosecond=Dt(s8);Mt.prototype.visitTimestampNanosecond=Dt(o8);Mt.prototype.visitTime=Dt(wY);Mt.prototype.visitTimeSecond=Dt(a8);Mt.prototype.visitTimeMillisecond=Dt(l8);Mt.prototype.visitTimeMicrosecond=Dt(c8);Mt.prototype.visitTimeNanosecond=Dt(u8);Mt.prototype.visitDecimal=Dt(_Y);Mt.prototype.visitList=Dt(SY);Mt.prototype.visitStruct=Dt(MY);Mt.prototype.visitUnion=Dt($Y);Mt.prototype.visitDenseUnion=Dt(f8);Mt.prototype.visitSparseUnion=Dt(d8);Mt.prototype.visitDictionary=Dt(NY);Mt.prototype.visitInterval=Dt(DY);Mt.prototype.visitIntervalDayTime=Dt(h8);Mt.prototype.visitIntervalYearMonth=Dt(p8);Mt.prototype.visitFixedSizeList=Dt(kY);Mt.prototype.visitMap=Dt(xY);const mi=new Mt,Ai=Symbol.for("parent"),Yu=Symbol.for("rowIndex");let CI=class{constructor(t,n){return this[Ai]=t,this[Yu]=n,new Proxy(this,new FY)}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[Yu],n=this[Ai],r=n.type.children,i={};for(let s=-1,o=r.length;++s<o;)i[r[s].name]=mr.visit(n.children[s],t);return i}toString(){return`{${[...this].map(([t,n])=>`${tp(t)}: ${tp(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new OY(this[Ai],this[Yu])}},OY=class{constructor(t,n){this.childIndex=0,this.children=t.children,this.rowIndex=n,this.childFields=t.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const t=this.childIndex;return t<this.numChildren?(this.childIndex=t+1,{done:!1,value:[this.childFields[t].name,mr.visit(this.children[t],this.rowIndex)]}):{done:!0,value:null}}};Object.defineProperties(CI.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[Ai]:{writable:!0,enumerable:!1,configurable:!1,value:null},[Yu]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});let FY=class{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[Ai].type.children.map(n=>n.name)}has(t,n){return t[Ai].type.children.findIndex(r=>r.name===n)!==-1}getOwnPropertyDescriptor(t,n){if(t[Ai].type.children.findIndex(r=>r.name===n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[Ai].type.children.findIndex(i=>i.name===n);if(r!==-1){const i=mr.visit(t[Ai].children[r],t[Yu]);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[Ai].type.children.findIndex(s=>s.name===n);return i!==-1?(mi.visit(t[Ai].children[i],t[Yu],r),Reflect.set(t,n,r)):Reflect.has(t,n)||typeof n=="symbol"?Reflect.set(t,n,r):!1}},xt=class extends Wt{};function $t(e){return(t,n)=>t.getValid(n)?e(t,n):null}const BY=(e,t)=>864e5*e[t],UI=(e,t)=>4294967296*e[t+1]+(e[t]>>>0),RY=(e,t)=>4294967296*(e[t+1]/1e3)+(e[t]>>>0)/1e3,LY=(e,t)=>4294967296*(e[t+1]/1e6)+(e[t]>>>0)/1e6,y8=e=>new Date(e),CY=(e,t)=>y8(BY(e,t)),UY=(e,t)=>y8(UI(e,t)),PY=(e,t)=>null,m8=(e,t,n)=>{if(n+1>=t.length)return null;const r=t[n],i=t[n+1];return e.subarray(r,i)},zY=({offset:e,values:t},n)=>{const r=e+n;return(t[r>>3]&1<<r%8)!==0},g8=({values:e},t)=>CY(e,t),b8=({values:e},t)=>UY(e,t*2),nl=({stride:e,values:t},n)=>t[e*n],jY=({stride:e,values:t},n)=>Zk(t[e*n]),v8=({values:e},t)=>e[t],VY=({stride:e,values:t},n)=>t.subarray(e*n,e*(n+1)),YY=({values:e,valueOffsets:t},n)=>m8(e,t,n),qY=({values:e,valueOffsets:t},n)=>{const r=m8(e,t,n);return r!==null?F2(r):null},WY=({values:e},t)=>e[t],HY=({type:e,values:t},n)=>e.precision!==dr.HALF?t[n]:Zk(t[n]),GY=(e,t)=>e.type.unit===Fo.DAY?g8(e,t):b8(e,t),w8=({values:e},t)=>1e3*UI(e,t*2),_8=({values:e},t)=>UI(e,t*2),S8=({values:e},t)=>RY(e,t*2),x8=({values:e},t)=>LY(e,t*2),XY=(e,t)=>{switch(e.type.unit){case Jt.SECOND:return w8(e,t);case Jt.MILLISECOND:return _8(e,t);case Jt.MICROSECOND:return S8(e,t);case Jt.NANOSECOND:return x8(e,t)}},I8=({values:e},t)=>e[t],T8=({values:e},t)=>e[t],E8=({values:e},t)=>e[t],A8=({values:e},t)=>e[t],QY=(e,t)=>{switch(e.type.unit){case Jt.SECOND:return I8(e,t);case Jt.MILLISECOND:return T8(e,t);case Jt.MICROSECOND:return E8(e,t);case Jt.NANOSECOND:return A8(e,t)}},KY=({values:e,stride:t},n)=>oY.decimal(e.subarray(t*n,t*(n+1))),ZY=(e,t)=>{const{valueOffsets:n,stride:r,children:i}=e,{[t*r]:s,[t*r+1]:o}=n,l=i[0].slice(s,o-s);return new Qe([l])},JY=(e,t)=>{const{valueOffsets:n,children:r}=e,{[t]:i,[t+1]:s}=n,o=r[0];return new PI(o.slice(i,s-i))},tq=(e,t)=>new CI(e,t),eq=(e,t)=>e.type.mode===zi.Dense?M8(e,t):$8(e,t),M8=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return mr.visit(r,e.valueOffsets[t])},$8=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return mr.visit(r,t)},nq=(e,t)=>{var n;return(n=e.dictionary)===null||n===void 0?void 0:n.get(e.values[t])},rq=(e,t)=>e.type.unit===ka.DAY_TIME?N8(e,t):D8(e,t),N8=({values:e},t)=>e.subarray(2*t,2*(t+1)),D8=({values:e},t)=>{const n=e[t],r=new Int32Array(2);return r[0]=Math.trunc(n/12),r[1]=Math.trunc(n%12),r},iq=(e,t)=>{const{stride:n,children:r}=e,s=r[0].slice(t*n,n);return new Qe([s])};xt.prototype.visitNull=$t(PY);xt.prototype.visitBool=$t(zY);xt.prototype.visitInt=$t(WY);xt.prototype.visitInt8=$t(nl);xt.prototype.visitInt16=$t(nl);xt.prototype.visitInt32=$t(nl);xt.prototype.visitInt64=$t(v8);xt.prototype.visitUint8=$t(nl);xt.prototype.visitUint16=$t(nl);xt.prototype.visitUint32=$t(nl);xt.prototype.visitUint64=$t(v8);xt.prototype.visitFloat=$t(HY);xt.prototype.visitFloat16=$t(jY);xt.prototype.visitFloat32=$t(nl);xt.prototype.visitFloat64=$t(nl);xt.prototype.visitUtf8=$t(qY);xt.prototype.visitBinary=$t(YY);xt.prototype.visitFixedSizeBinary=$t(VY);xt.prototype.visitDate=$t(GY);xt.prototype.visitDateDay=$t(g8);xt.prototype.visitDateMillisecond=$t(b8);xt.prototype.visitTimestamp=$t(XY);xt.prototype.visitTimestampSecond=$t(w8);xt.prototype.visitTimestampMillisecond=$t(_8);xt.prototype.visitTimestampMicrosecond=$t(S8);xt.prototype.visitTimestampNanosecond=$t(x8);xt.prototype.visitTime=$t(QY);xt.prototype.visitTimeSecond=$t(I8);xt.prototype.visitTimeMillisecond=$t(T8);xt.prototype.visitTimeMicrosecond=$t(E8);xt.prototype.visitTimeNanosecond=$t(A8);xt.prototype.visitDecimal=$t(KY);xt.prototype.visitList=$t(ZY);xt.prototype.visitStruct=$t(tq);xt.prototype.visitUnion=$t(eq);xt.prototype.visitDenseUnion=$t(M8);xt.prototype.visitSparseUnion=$t($8);xt.prototype.visitDictionary=$t(nq);xt.prototype.visitInterval=$t(rq);xt.prototype.visitIntervalDayTime=$t(N8);xt.prototype.visitIntervalYearMonth=$t(D8);xt.prototype.visitFixedSizeList=$t(iq);xt.prototype.visitMap=$t(JY);const mr=new xt,ps=Symbol.for("keys"),qu=Symbol.for("vals");let PI=class{constructor(t){return this[ps]=new Qe([t.children[0]]).memoize(),this[qu]=t.children[1],new Proxy(this,new oq)}[Symbol.iterator](){return new sq(this[ps],this[qu])}get size(){return this[ps].length}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[ps],n=this[qu],r={};for(let i=-1,s=t.length;++i<s;)r[t.get(i)]=mr.visit(n,i);return r}toString(){return`{${[...this].map(([t,n])=>`${tp(t)}: ${tp(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}},sq=class{constructor(t,n){this.keys=t,this.vals=n,this.keyIndex=0,this.numKeys=t.length}[Symbol.iterator](){return this}next(){const t=this.keyIndex;return t===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(t),mr.visit(this.vals,t)]})}},oq=class{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[ps].toArray().map(String)}has(t,n){return t[ps].includes(n)}getOwnPropertyDescriptor(t,n){if(t[ps].indexOf(n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[ps].indexOf(n);if(r!==-1){const i=mr.visit(Reflect.get(t,qu),r);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[ps].indexOf(n);return i!==-1?(mi.visit(Reflect.get(t,qu),i,r),Reflect.set(t,n,r)):Reflect.has(t,n)?Reflect.set(t,n,r):!1}};Object.defineProperties(PI.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[ps]:{writable:!0,enumerable:!1,configurable:!1,value:null},[qu]:{writable:!0,enumerable:!1,configurable:!1,value:null}});let rM;function k8(e,t,n,r){const{length:i=0}=e;let s=typeof t!="number"?0:t,o=typeof n!="number"?i:n;return s<0&&(s=(s%i+i)%i),o<0&&(o=(o%i+i)%i),o<s&&(rM=s,s=o,o=rM),o>i&&(o=i),r?r(e,s,o):[s,o]}const iM=e=>e!==e;function Zf(e){if(typeof e!=="object"||e===null)return iM(e)?iM:n=>n===e;if(e instanceof Date){const n=e.valueOf();return r=>r instanceof Date?r.valueOf()===n:!1}return ArrayBuffer.isView(e)?n=>n?ZV(e,n):!1:e instanceof Map?lq(e):Array.isArray(e)?aq(e):e instanceof Qe?cq(e):uq(e,!0)}function aq(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=Zf(e[n]);return Lb(t)}function lq(e){let t=-1;const n=[];for(const r of e.values())n[++t]=Zf(r);return Lb(n)}function cq(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=Zf(e.get(n));return Lb(t)}function uq(e,t=!1){const n=Object.keys(e);if(!t&&n.length===0)return()=>!1;const r=[];for(let i=-1,s=n.length;++i<s;)r[i]=Zf(e[n[i]]);return Lb(r,n)}function Lb(e,t){return n=>{if(!n||typeof n!="object")return!1;switch(n.constructor){case Array:return fq(e,n);case Map:return sM(e,n,n.keys());case PI:case CI:case Object:case void 0:return sM(e,n,t||Object.keys(n))}return n instanceof Qe?dq(e,n):!1}}function fq(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t[r]))return!1;return!0}function dq(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t.get(r)))return!1;return!0}function sM(e,t,n){const r=n[Symbol.iterator](),i=t instanceof Map?t.keys():Object.keys(t)[Symbol.iterator](),s=t instanceof Map?t.values():Object.values(t)[Symbol.iterator]();let o=0;const a=e.length;let l=s.next(),c=r.next(),u=i.next();for(;o<a&&!c.done&&!u.done&&!l.done&&!(c.value!==u.value||!e[o](l.value));++o,c=r.next(),u=i.next(),l=s.next());return o===a&&c.done&&u.done&&l.done?!0:(r.return&&r.return(),i.return&&i.return(),s.return&&s.return(),!1)}function O8(e,t,n,r){return(n&1<<r)!==0}function hq(e,t,n,r){return(n&1<<r)>>r}function pq(e,t,n){const r=n.byteLength+7&-8;if(e>0||n.byteLength<r){const i=new Uint8Array(r);return i.set(e%8===0?n.subarray(e>>3):U2(new zI(n,e,t,null,O8)).subarray(0,r)),i}return n}function U2(e){const t=[];let n=0,r=0,i=0;for(const o of e)o&&(i|=1<<r),++r===8&&(t[n++]=i,i=r=0);(n===0||r>0)&&(t[n++]=i);const s=new Uint8Array(t.length+7&-8);return s.set(t),s}let zI=class{constructor(t,n,r,i,s){this.bytes=t,this.length=r,this.context=i,this.get=s,this.bit=n%8,this.byteIndex=n>>3,this.byte=t[this.byteIndex++],this.index=0}next(){return this.index<this.length?(this.bit===8&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}};function P2(e,t,n){if(n-t<=0)return 0;if(n-t<8){let s=0;for(const o of new zI(e,t,n-t,e,hq))s+=o;return s}const r=n>>3<<3,i=t+(t%8===0?0:8-t%8);return P2(e,t,i)+P2(e,r,n)+yq(e,i>>3,r-i>>3)}function yq(e,t,n){let r=0,i=Math.trunc(t);const s=new DataView(e.buffer,e.byteOffset,e.byteLength),o=n===void 0?e.byteLength:i+n;for(;o-i>=4;)r+=Aw(s.getUint32(i)),i+=4;for(;o-i>=2;)r+=Aw(s.getUint16(i)),i+=2;for(;o-i>=1;)r+=Aw(s.getUint8(i)),i+=1;return r}function Aw(e){let t=Math.trunc(e);return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),(t+(t>>>4)&252645135)*16843009>>>24}const mq=-1;let De=class z2{constructor(t,n,r,i,s,o=[],a){this.type=t,this.children=o,this.dictionary=a,this.offset=Math.floor(Math.max(n||0,0)),this.length=Math.floor(Math.max(r||0,0)),this._nullCount=Math.floor(Math.max(i||0,-1));let l;s instanceof z2?(this.stride=s.stride,this.values=s.values,this.typeIds=s.typeIds,this.nullBitmap=s.nullBitmap,this.valueOffsets=s.valueOffsets):(this.stride=oo(t),s&&((l=s[0])&&(this.valueOffsets=l),(l=s[1])&&(this.values=l),(l=s[2])&&(this.nullBitmap=l),(l=s[3])&&(this.typeIds=l))),this.nullable=this._nullCount!==0&&this.nullBitmap&&this.nullBitmap.byteLength>0}get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get byteLength(){let t=0;const{valueOffsets:n,values:r,nullBitmap:i,typeIds:s}=this;return n&&(t+=n.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),s&&(t+=s.byteLength),this.children.reduce((o,a)=>o+a.byteLength,t)}get nullCount(){let t=this._nullCount,n;return t<=mq&&(n=this.nullBitmap)&&(this._nullCount=t=this.length-P2(n,this.offset,this.offset+this.length)),t}getValid(t){if(this.nullable&&this.nullCount>0){const n=this.offset+t;return(this.nullBitmap[n>>3]&1<<n%8)!==0}return!0}setValid(t,n){if(!this.nullable)return n;if(!this.nullBitmap||this.nullBitmap.byteLength<=t>>3){const{nullBitmap:l}=this._changeLengthAndBackfillNullBitmap(this.length);Object.assign(this,{nullBitmap:l,_nullCount:0})}const{nullBitmap:r,offset:i}=this,s=i+t>>3,o=(i+t)%8,a=r[s]>>o&1;return n?a===0&&(r[s]|=1<<o,this._nullCount=this.nullCount+1):a===1&&(r[s]&=~(1<<o),this._nullCount=this.nullCount-1),n}clone(t=this.type,n=this.offset,r=this.length,i=this._nullCount,s=this,o=this.children){return new z2(t,n,r,i,s,o,this.dictionary)}slice(t,n){const{stride:r,typeId:i,children:s}=this,o=+(this._nullCount===0)-1,a=i===16?r:1,l=this._sliceBuffers(t,n,r,i);return this.clone(this.type,this.offset+t,n,o,l,s.length===0||this.valueOffsets?s:this._sliceChildren(s,a*t,a*n))}_changeLengthAndBackfillNullBitmap(t){if(this.typeId===U.Null)return this.clone(this.type,0,t,0);const{length:n,nullCount:r}=this,i=new Uint8Array((t+63&-64)>>3).fill(255,0,n>>3);i[n>>3]=(1<<n-(n&-8))-1,r>0&&i.set(pq(this.offset,n,this.nullBitmap),0);const s=this.buffers;return s[so.VALIDITY]=i,this.clone(this.type,0,t,r+(t-n),s)}_sliceBuffers(t,n,r,i){let s;const{buffers:o}=this;return(s=o[so.TYPE])&&(o[so.TYPE]=s.subarray(t,t+n)),(s=o[so.OFFSET])&&(o[so.OFFSET]=s.subarray(t,t+n+1))||(s=o[so.DATA])&&(o[so.DATA]=i===6?s:s.subarray(r*t,r*(t+n))),o}_sliceChildren(t,n,r){return t.map(i=>i.slice(n,r))}};De.prototype.children=Object.freeze([]);let gq=class em extends Wt{visit(t){return this.getVisitFn(t.type).call(this,t)}visitNull(t){const{["type"]:n,["offset"]:r=0,["length"]:i=0}=t;return new De(n,r,i,0)}visitBool(t){const{["type"]:n,["offset"]:r=0}=t,i=ne(t.nullBitmap),s=pe(n.ArrayType,t.data),{["length"]:o=s.length>>3,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new De(n,r,o,a,[void 0,s,i])}visitInt(t){const{["type"]:n,["offset"]:r=0}=t,i=ne(t.nullBitmap),s=pe(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new De(n,r,o,a,[void 0,s,i])}visitFloat(t){const{["type"]:n,["offset"]:r=0}=t,i=ne(t.nullBitmap),s=pe(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new De(n,r,o,a,[void 0,s,i])}visitUtf8(t){const{["type"]:n,["offset"]:r=0}=t,i=ne(t.data),s=ne(t.nullBitmap),o=$d(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:l=t.nullBitmap?-1:0}=t;return new De(n,r,a,l,[o,i,s])}visitBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=ne(t.data),s=ne(t.nullBitmap),o=$d(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:l=t.nullBitmap?-1:0}=t;return new De(n,r,a,l,[o,i,s])}visitFixedSizeBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=ne(t.nullBitmap),s=pe(n.ArrayType,t.data),{["length"]:o=s.length/oo(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new De(n,r,o,a,[void 0,s,i])}visitDate(t){const{["type"]:n,["offset"]:r=0}=t,i=ne(t.nullBitmap),s=pe(n.ArrayType,t.data),{["length"]:o=s.length/oo(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new De(n,r,o,a,[void 0,s,i])}visitTimestamp(t){const{["type"]:n,["offset"]:r=0}=t,i=ne(t.nullBitmap),s=pe(n.ArrayType,t.data),{["length"]:o=s.length/oo(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new De(n,r,o,a,[void 0,s,i])}visitTime(t){const{["type"]:n,["offset"]:r=0}=t,i=ne(t.nullBitmap),s=pe(n.ArrayType,t.data),{["length"]:o=s.length/oo(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new De(n,r,o,a,[void 0,s,i])}visitDecimal(t){const{["type"]:n,["offset"]:r=0}=t,i=ne(t.nullBitmap),s=pe(n.ArrayType,t.data),{["length"]:o=s.length/oo(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new De(n,r,o,a,[void 0,s,i])}visitList(t){const{["type"]:n,["offset"]:r=0,["child"]:i}=t,s=ne(t.nullBitmap),o=$d(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:l=t.nullBitmap?-1:0}=t;return new De(n,r,a,l,[o,void 0,s],[i])}visitStruct(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=ne(t.nullBitmap),{length:o=i.reduce((l,{length:c})=>Math.max(l,c),0),nullCount:a=t.nullBitmap?-1:0}=t;return new De(n,r,o,a,[void 0,void 0,s],i)}visitUnion(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=ne(t.nullBitmap),o=pe(n.ArrayType,t.typeIds),{["length"]:a=o.length,["nullCount"]:l=t.nullBitmap?-1:0}=t;if(Bt.isSparseUnion(n))return new De(n,r,a,l,[void 0,void 0,s,o],i);const c=$d(t.valueOffsets);return new De(n,r,a,l,[c,void 0,s,o],i)}visitDictionary(t){const{["type"]:n,["offset"]:r=0}=t,i=ne(t.nullBitmap),s=pe(n.indices.ArrayType,t.data),{["dictionary"]:o=new Qe([new em().visit({type:n.dictionary})])}=t,{["length"]:a=s.length,["nullCount"]:l=t.nullBitmap?-1:0}=t;return new De(n,r,a,l,[void 0,s,i],[],o)}visitInterval(t){const{["type"]:n,["offset"]:r=0}=t,i=ne(t.nullBitmap),s=pe(n.ArrayType,t.data),{["length"]:o=s.length/oo(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new De(n,r,o,a,[void 0,s,i])}visitFixedSizeList(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new em().visit({type:n.valueType})}=t,s=ne(t.nullBitmap),{["length"]:o=i.length/oo(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new De(n,r,o,a,[void 0,void 0,s],[i])}visitMap(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new em().visit({type:n.childType})}=t,s=ne(t.nullBitmap),o=$d(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:l=t.nullBitmap?-1:0}=t;return new De(n,r,a,l,[o,void 0,s],[i])}};function zt(e){return new gq().visit(e)}let oM=class{constructor(t=0,n){this.numChunks=t,this.getChunkIterator=n,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const t=this.chunkIterator.next();if(!t.done)return t;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}};function F8(e){return e.reduce((t,n)=>t+n.nullCount,0)}function B8(e){return e.reduce((t,n,r)=>(t[r+1]=t[r]+n.length,t),new Uint32Array(e.length+1))}function R8(e,t,n,r){const i=[];for(let s=-1,o=e.length;++s<o;){const a=e[s],l=t[s],{length:c}=a;if(l>=r)break;if(n>=l+c)continue;if(l>=n&&l+c<=r){i.push(a);continue}const u=Math.max(0,n-l),f=Math.min(r-l,c);i.push(a.slice(u,f-u))}return i.length===0&&i.push(e[0].slice(0,0)),i}function jI(e,t,n,r){let i=0,s=0,o=t.length-1;do{if(i>=o-1)return n<t[o]?r(e,i,n-t[i]):null;s=i+Math.trunc((o-i)*.5),n<t[s]?o=s:i=s}while(i<o)}function VI(e,t){return e.getValid(t)}function Wu(e){function t(n,r,i){return e(n[r],i)}return function(n){const r=this.data;return jI(r,this._offsets,n,t)}}function L8(e){let t;function n(r,i,s){return e(r[i],s,t)}return function(r,i){const s=this.data;t=i;const o=jI(s,this._offsets,r,n);return t=void 0,o}}function C8(e){let t;function n(r,i,s){let o=s,a=0,l=0;for(let c=i-1,u=r.length;++c<u;){const f=r[c];if(~(a=e(f,t,o)))return l+a;o=0,l+=f.length}return-1}return function(r,i){t=r;const s=this.data,o=typeof i!="number"?n(s,0,0):jI(s,this._offsets,i,n);return t=void 0,o}}let It=class extends Wt{};function bq(e,t){return t===null&&e.length>0?0:-1}function vq(e,t){const{nullBitmap:n}=e;if(!n||e.nullCount<=0)return-1;let r=0;for(const i of new zI(n,e.offset+(t||0),e.length,n,O8)){if(!i)return r;++r}return-1}function Ot(e,t,n){if(t===void 0)return-1;if(t===null)return vq(e,n);const r=mr.getVisitFn(e),i=Zf(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}function U8(e,t,n){const r=mr.getVisitFn(e),i=Zf(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}It.prototype.visitNull=bq;It.prototype.visitBool=Ot;It.prototype.visitInt=Ot;It.prototype.visitInt8=Ot;It.prototype.visitInt16=Ot;It.prototype.visitInt32=Ot;It.prototype.visitInt64=Ot;It.prototype.visitUint8=Ot;It.prototype.visitUint16=Ot;It.prototype.visitUint32=Ot;It.prototype.visitUint64=Ot;It.prototype.visitFloat=Ot;It.prototype.visitFloat16=Ot;It.prototype.visitFloat32=Ot;It.prototype.visitFloat64=Ot;It.prototype.visitUtf8=Ot;It.prototype.visitBinary=Ot;It.prototype.visitFixedSizeBinary=Ot;It.prototype.visitDate=Ot;It.prototype.visitDateDay=Ot;It.prototype.visitDateMillisecond=Ot;It.prototype.visitTimestamp=Ot;It.prototype.visitTimestampSecond=Ot;It.prototype.visitTimestampMillisecond=Ot;It.prototype.visitTimestampMicrosecond=Ot;It.prototype.visitTimestampNanosecond=Ot;It.prototype.visitTime=Ot;It.prototype.visitTimeSecond=Ot;It.prototype.visitTimeMillisecond=Ot;It.prototype.visitTimeMicrosecond=Ot;It.prototype.visitTimeNanosecond=Ot;It.prototype.visitDecimal=Ot;It.prototype.visitList=Ot;It.prototype.visitStruct=Ot;It.prototype.visitUnion=Ot;It.prototype.visitDenseUnion=U8;It.prototype.visitSparseUnion=U8;It.prototype.visitDictionary=Ot;It.prototype.visitInterval=Ot;It.prototype.visitIntervalDayTime=Ot;It.prototype.visitIntervalYearMonth=Ot;It.prototype.visitFixedSizeList=Ot;It.prototype.visitMap=Ot;const dg=new It;let Tt=class extends Wt{};function Nt(e){const{type:t}=e;if(e.nullCount===0&&e.stride===1&&(t.typeId===U.Timestamp||t instanceof Fa&&t.bitWidth!==64||t instanceof ip&&t.bitWidth!==64||t instanceof rp&&t.precision!==dr.HALF))return new oM(e.data.length,r=>{const i=e.data[r];return i.values.subarray(0,i.length)[Symbol.iterator]()});let n=0;return new oM(e.data.length,r=>{const s=e.data[r].length,o=e.slice(n,n+s);return n+=s,new wq(o)})}let wq=class{constructor(t){this.vector=t,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}};Tt.prototype.visitNull=Nt;Tt.prototype.visitBool=Nt;Tt.prototype.visitInt=Nt;Tt.prototype.visitInt8=Nt;Tt.prototype.visitInt16=Nt;Tt.prototype.visitInt32=Nt;Tt.prototype.visitInt64=Nt;Tt.prototype.visitUint8=Nt;Tt.prototype.visitUint16=Nt;Tt.prototype.visitUint32=Nt;Tt.prototype.visitUint64=Nt;Tt.prototype.visitFloat=Nt;Tt.prototype.visitFloat16=Nt;Tt.prototype.visitFloat32=Nt;Tt.prototype.visitFloat64=Nt;Tt.prototype.visitUtf8=Nt;Tt.prototype.visitBinary=Nt;Tt.prototype.visitFixedSizeBinary=Nt;Tt.prototype.visitDate=Nt;Tt.prototype.visitDateDay=Nt;Tt.prototype.visitDateMillisecond=Nt;Tt.prototype.visitTimestamp=Nt;Tt.prototype.visitTimestampSecond=Nt;Tt.prototype.visitTimestampMillisecond=Nt;Tt.prototype.visitTimestampMicrosecond=Nt;Tt.prototype.visitTimestampNanosecond=Nt;Tt.prototype.visitTime=Nt;Tt.prototype.visitTimeSecond=Nt;Tt.prototype.visitTimeMillisecond=Nt;Tt.prototype.visitTimeMicrosecond=Nt;Tt.prototype.visitTimeNanosecond=Nt;Tt.prototype.visitDecimal=Nt;Tt.prototype.visitList=Nt;Tt.prototype.visitStruct=Nt;Tt.prototype.visitUnion=Nt;Tt.prototype.visitDenseUnion=Nt;Tt.prototype.visitSparseUnion=Nt;Tt.prototype.visitDictionary=Nt;Tt.prototype.visitInterval=Nt;Tt.prototype.visitIntervalDayTime=Nt;Tt.prototype.visitIntervalYearMonth=Nt;Tt.prototype.visitFixedSizeList=Nt;Tt.prototype.visitMap=Nt;const YI=new Tt,_q=(e,t)=>e+t;let rl=class extends Wt{visitNull(t,n){return 0}visitInt(t,n){return t.type.bitWidth/8}visitFloat(t,n){return t.type.ArrayType.BYTES_PER_ELEMENT}visitBool(t,n){return 1/8}visitDecimal(t,n){return t.type.bitWidth/8}visitDate(t,n){return(t.type.unit+1)*4}visitTime(t,n){return t.type.bitWidth/8}visitTimestamp(t,n){return t.type.unit===Jt.SECOND?4:8}visitInterval(t,n){return(t.type.unit+1)*4}visitStruct(t,n){return t.children.reduce((r,i)=>r+Rs.visit(i,n),0)}visitFixedSizeBinary(t,n){return t.type.byteWidth}visitMap(t,n){return 8+t.children.reduce((r,i)=>r+Rs.visit(i,n),0)}visitDictionary(t,n){var r;return t.type.indices.bitWidth/8+(((r=t.dictionary)===null||r===void 0?void 0:r.getByteLength(t.values[n]))||0)}};const Sq=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),xq=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),Iq=({valueOffsets:e,stride:t,children:n},r)=>{const i=n[0],{[r*t]:s}=e,{[r*t+1]:o}=e,a=Rs.getVisitFn(i.type),l=i.slice(s,o-s);let c=8;for(let u=-1,f=o-s;++u<f;)c+=a(l,u);return c},Tq=({stride:e,children:t},n)=>{const r=t[0],i=r.slice(n*e,e),s=Rs.getVisitFn(r.type);let o=0;for(let a=-1,l=i.length;++a<l;)o+=s(i,a);return o},Eq=(e,t)=>e.type.mode===zi.Dense?P8(e,t):z8(e,t),P8=({type:e,children:t,typeIds:n,valueOffsets:r},i)=>{const s=e.typeIdToChildIndex[n[i]];return 8+Rs.visit(t[s],r[i])},z8=({children:e},t)=>4+Rs.visitMany(e,e.map(()=>t)).reduce(_q,0);rl.prototype.visitUtf8=Sq;rl.prototype.visitBinary=xq;rl.prototype.visitList=Iq;rl.prototype.visitFixedSizeList=Tq;rl.prototype.visitUnion=Eq;rl.prototype.visitDenseUnion=P8;rl.prototype.visitSparseUnion=z8;const Rs=new rl;var j8;const V8={},Y8={};let Qe=class _l{constructor(t){var n,r,i;const s=t[0]instanceof _l?t.flatMap(a=>a.data):t;if(s.length===0||s.some(a=>!(a instanceof De)))throw new TypeError("Vector constructor expects an Array of Data instances.");const o=(n=s[0])===null||n===void 0?void 0:n.type;switch(s.length){case 0:this._offsets=[0];break;case 1:{const{get:a,set:l,indexOf:c,byteLength:u}=V8[o.typeId],f=s[0];this.isValid=d=>VI(f,d),this.get=d=>a(f,d),this.set=(d,h)=>l(f,d,h),this.indexOf=d=>c(f,d),this.getByteLength=d=>u(f,d),this._offsets=[0,f.length];break}default:Object.setPrototypeOf(this,Y8[o.typeId]),this._offsets=B8(s);break}this.data=s,this.type=o,this.stride=oo(o),this.numChildren=(i=(r=o.children)===null||r===void 0?void 0:r.length)!==null&&i!==void 0?i:0,this.length=this._offsets[this._offsets.length-1]}get byteLength(){return this._byteLength===-1&&(this._byteLength=this.data.reduce((t,n)=>t+n.byteLength,0)),this._byteLength}get nullCount(){return this._nullCount===-1&&(this._nullCount=F8(this.data)),this._nullCount}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${U[this.type.typeId]}Vector`}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}includes(t,n){return this.indexOf(t,n)>0}getByteLength(t){return 0}[Symbol.iterator](){return YI.visit(this)}concat(...t){return new _l(this.data.concat(t.flatMap(n=>n.data).flat(Number.POSITIVE_INFINITY)))}slice(t,n){return new _l(k8(this,t,n,({data:r,_offsets:i},s,o)=>R8(r,i,s,o)))}toJSON(){return[...this]}toArray(){const{type:t,data:n,length:r,stride:i,ArrayType:s}=this;switch(t.typeId){case U.Int:case U.Float:case U.Decimal:case U.Time:case U.Timestamp:switch(n.length){case 0:return new s;case 1:return n[0].values.subarray(0,r*i);default:return n.reduce((o,{values:a,length:l})=>(o.array.set(a.subarray(0,l*i),o.offset),o.offset+=l*i,o),{array:new s(r*i),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(t){var n;return this.getChildAt((n=this.type.children)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.numChildren?new _l(this.data.map(({children:n})=>n[t])):null}get isMemoized(){return Bt.isDictionary(this.type)?this.data[0].dictionary.isMemoized:!1}memoize(){if(Bt.isDictionary(this.type)){const t=new aM(this.data[0].dictionary),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new _l(n)}return new aM(this)}unmemoize(){if(Bt.isDictionary(this.type)&&this.isMemoized){const t=this.data[0].dictionary.unmemoize(),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new _l(n)}return this}};j8=Symbol.toStringTag;Qe[j8]=(e=>{e.type=Bt.prototype,e.data=[],e.length=0,e.stride=1,e.numChildren=0,e._nullCount=-1,e._byteLength=-1,e._offsets=new Uint32Array([0]),e[Symbol.isConcatSpreadable]=!0;const t=Object.keys(U).map(n=>U[n]).filter(n=>typeof n=="number"&&n!==U.NONE);for(const n of t){const r=mr.getVisitFnByTypeId(n),i=mi.getVisitFnByTypeId(n),s=dg.getVisitFnByTypeId(n),o=Rs.getVisitFnByTypeId(n);V8[n]={get:r,set:i,indexOf:s,byteLength:o},Y8[n]=Object.create(e,{isValid:{value:Wu(VI)},get:{value:Wu(mr.getVisitFnByTypeId(n))},set:{value:L8(mi.getVisitFnByTypeId(n))},indexOf:{value:C8(dg.getVisitFnByTypeId(n))},getByteLength:{value:Wu(Rs.getVisitFnByTypeId(n))}})}return"Vector"})(Qe.prototype);let aM=class q8 extends Qe{constructor(t){super(t.data);const n=this.get,r=this.set,i=this.slice,s=new Array(this.length);Object.defineProperty(this,"get",{value(o){const a=s[o];if(a!==void 0)return a;const l=n.call(this,o);return s[o]=l,l}}),Object.defineProperty(this,"set",{value(o,a){r.call(this,o,a),s[o]=a}}),Object.defineProperty(this,"slice",{value:(o,a)=>new q8(i.call(this,o,a))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new Qe(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}},j2=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(t,n,r,i){return t.prep(8,24),t.writeInt64(i),t.pad(4),t.writeInt32(r),t.writeInt64(n),t.offset()}};const Mw=2,ys=4,po=4,me=4,sa=new Int32Array(2),lM=new Float32Array(sa.buffer),cM=new Float64Array(sa.buffer),o0=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;let To=class V2{constructor(t,n){this.low=t|0,this.high=n|0}static create(t,n){return t==0&&n==0?V2.ZERO:new V2(t,n)}toFloat64(){return(this.low>>>0)+this.high*4294967296}equals(t){return this.low==t.low&&this.high==t.high}};To.ZERO=new To(0,0);var Y2;(function(e){e[e.UTF8_BYTES=1]="UTF8_BYTES",e[e.UTF16_STRING=2]="UTF16_STRING"})(Y2||(Y2={}));let gf=class W8{constructor(t){this.bytes_=t,this.position_=0}static allocate(t){return new W8(new Uint8Array(t))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(t){this.position_=t}capacity(){return this.bytes_.length}readInt8(t){return this.readUint8(t)<<24>>24}readUint8(t){return this.bytes_[t]}readInt16(t){return this.readUint16(t)<<16>>16}readUint16(t){return this.bytes_[t]|this.bytes_[t+1]<<8}readInt32(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}readUint32(t){return this.readInt32(t)>>>0}readInt64(t){return new To(this.readInt32(t),this.readInt32(t+4))}readUint64(t){return new To(this.readUint32(t),this.readUint32(t+4))}readFloat32(t){return sa[0]=this.readInt32(t),lM[0]}readFloat64(t){return sa[o0?0:1]=this.readInt32(t),sa[o0?1:0]=this.readInt32(t+4),cM[0]}writeInt8(t,n){this.bytes_[t]=n}writeUint8(t,n){this.bytes_[t]=n}writeInt16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeUint16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeInt32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeUint32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeInt64(t,n){this.writeInt32(t,n.low),this.writeInt32(t+4,n.high)}writeUint64(t,n){this.writeUint32(t,n.low),this.writeUint32(t+4,n.high)}writeFloat32(t,n){lM[0]=n,this.writeInt32(t,sa[0])}writeFloat64(t,n){cM[0]=n,this.writeInt32(t,sa[o0?0:1]),this.writeInt32(t+4,sa[o0?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+ys+po)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let t="";for(let n=0;n<po;n++)t+=String.fromCharCode(this.readInt8(this.position_+ys+n));return t}__offset(t,n){const r=t-this.readInt32(t);return n<this.readInt16(r)?this.readInt16(r+n):0}__union(t,n){return t.bb_pos=n+this.readInt32(n),t.bb=this,t}__string(t,n){t+=this.readInt32(t);const r=this.readInt32(t);let i="",s=0;if(t+=ys,n===Y2.UTF8_BYTES)return this.bytes_.subarray(t,t+r);for(;s<r;){let o;const a=this.readUint8(t+s++);if(a<192)o=a;else{const l=this.readUint8(t+s++);if(a<224)o=(a&31)<<6|l&63;else{const c=this.readUint8(t+s++);if(a<240)o=(a&15)<<12|(l&63)<<6|c&63;else{const u=this.readUint8(t+s++);o=(a&7)<<18|(l&63)<<12|(c&63)<<6|u&63}}}o<65536?i+=String.fromCharCode(o):(o-=65536,i+=String.fromCharCode((o>>10)+55296,(o&1023)+56320))}return i}__union_with_string(t,n){return typeof t=="string"?this.__string(n):this.__union(t,n)}__indirect(t){return t+this.readInt32(t)}__vector(t){return t+this.readInt32(t)+ys}__vector_len(t){return this.readInt32(t+this.readInt32(t))}__has_identifier(t){if(t.length!=po)throw new Error("FlatBuffers: file identifier must be length "+po);for(let n=0;n<po;n++)if(t.charCodeAt(n)!=this.readInt8(this.position()+ys+n))return!1;return!0}createLong(t,n){return To.create(t,n)}createScalarList(t,n){const r=[];for(let i=0;i<n;++i)t(i)!==null&&r.push(t(i));return r}createObjList(t,n){const r=[];for(let i=0;i<n;++i){const s=t(i);s!==null&&r.push(s.unpack())}return r}},H8=class G8{constructor(t){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null;let n;t?n=t:n=1024,this.bb=gf.allocate(n),this.space=n}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(t){this.force_defaults=t}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(t,n){t>this.minalign&&(this.minalign=t);const r=~(this.bb.capacity()-this.space+n)+1&t-1;for(;this.space<r+t+n;){const i=this.bb.capacity();this.bb=G8.growByteBuffer(this.bb),this.space+=this.bb.capacity()-i}this.pad(r)}pad(t){for(let n=0;n<t;n++)this.bb.writeInt8(--this.space,0)}writeInt8(t){this.bb.writeInt8(this.space-=1,t)}writeInt16(t){this.bb.writeInt16(this.space-=2,t)}writeInt32(t){this.bb.writeInt32(this.space-=4,t)}writeInt64(t){this.bb.writeInt64(this.space-=8,t)}writeFloat32(t){this.bb.writeFloat32(this.space-=4,t)}writeFloat64(t){this.bb.writeFloat64(this.space-=8,t)}addInt8(t){this.prep(1,0),this.writeInt8(t)}addInt16(t){this.prep(2,0),this.writeInt16(t)}addInt32(t){this.prep(4,0),this.writeInt32(t)}addInt64(t){this.prep(8,0),this.writeInt64(t)}addFloat32(t){this.prep(4,0),this.writeFloat32(t)}addFloat64(t){this.prep(8,0),this.writeFloat64(t)}addFieldInt8(t,n,r){(this.force_defaults||n!=r)&&(this.addInt8(n),this.slot(t))}addFieldInt16(t,n,r){(this.force_defaults||n!=r)&&(this.addInt16(n),this.slot(t))}addFieldInt32(t,n,r){(this.force_defaults||n!=r)&&(this.addInt32(n),this.slot(t))}addFieldInt64(t,n,r){(this.force_defaults||!n.equals(r))&&(this.addInt64(n),this.slot(t))}addFieldFloat32(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat32(n),this.slot(t))}addFieldFloat64(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat64(n),this.slot(t))}addFieldOffset(t,n,r){(this.force_defaults||n!=r)&&(this.addOffset(n),this.slot(t))}addFieldStruct(t,n,r){n!=r&&(this.nested(n),this.slot(t))}nested(t){if(t!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")}slot(t){this.vtable!==null&&(this.vtable[t]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(t){const n=t.capacity();if(n&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const r=n<<1,i=gf.allocate(r);return i.setPosition(r-n),i.bytes().set(t.bytes(),r-n),i}addOffset(t){this.prep(ys,0),this.writeInt32(this.offset()-t+ys)}startObject(t){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=t;for(let n=0;n<t;n++)this.vtable[n]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const t=this.offset();let n=this.vtable_in_use-1;for(;n>=0&&this.vtable[n]==0;n--);const r=n+1;for(;n>=0;n--)this.addInt16(this.vtable[n]!=0?t-this.vtable[n]:0);const i=2;this.addInt16(t-this.object_start);const s=(r+i)*Mw;this.addInt16(s);let o=0;const a=this.space;t:for(n=0;n<this.vtables.length;n++){const l=this.bb.capacity()-this.vtables[n];if(s==this.bb.readInt16(l)){for(let c=Mw;c<s;c+=Mw)if(this.bb.readInt16(a+c)!=this.bb.readInt16(l+c))continue t;o=this.vtables[n];break}}return o?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,o-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t}finish(t,n,r){const i=r?me:0;if(n){const s=n;if(this.prep(this.minalign,ys+po+i),s.length!=po)throw new Error("FlatBuffers: file identifier must be length "+po);for(let o=po-1;o>=0;o--)this.writeInt8(s.charCodeAt(o))}this.prep(this.minalign,ys+i),this.addOffset(t),i&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(t,n){this.finish(t,n,!0)}requiredField(t,n){const r=this.bb.capacity()-t,i=r-this.bb.readInt32(r);if(!(this.bb.readInt16(i+n)!=0))throw new Error("FlatBuffers: field "+n+" must be set")}startVector(t,n,r){this.notNested(),this.vector_num_elems=n,this.prep(ys,t*n),this.prep(r,t*n)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(t){if(!t)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(t))return this.string_maps.get(t);const n=this.createString(t);return this.string_maps.set(t,n),n}createString(t){if(!t)return 0;let n;if(t instanceof Uint8Array)n=t;else{n=[];let r=0;for(;r<t.length;){let i;const s=t.charCodeAt(r++);if(s<55296||s>=56320)i=s;else{const o=t.charCodeAt(r++);i=(s<<10)+o+-56613888}i<128?n.push(i):(i<2048?n.push(i>>6&31|192):(i<65536?n.push(i>>12&15|224):n.push(i>>18&7|240,i>>12&63|128),n.push(i>>6&63|128)),n.push(i&63|128))}}this.addInt8(0),this.startVector(1,n.length,1),this.bb.setPosition(this.space-=n.length);for(let r=0,i=this.space,s=this.bb.bytes();r<n.length;r++)s[i++]=n[r];return this.endVector()}createLong(t,n){return To.create(t,n)}createObjectOffset(t){return t===null?0:typeof t=="string"?this.createString(t):t.pack(this)}createObjectOffsetList(t){const n=[];for(let r=0;r<t.length;++r){const i=t[r];if(i!==null)n.push(this.createObjectOffset(i));else throw new Error("FlatBuffers: Argument for createObjectOffsetList cannot contain null.")}return n}createStructOffsetList(t,n){return n(this,t.length),this.createObjectOffsetList(t),this.endVector()}},si=class Sl{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsKeyValue(t,n){return(n||new Sl).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsKeyValue(t,n){return t.setPosition(t.position()+me),(n||new Sl).__init(t.readInt32(t.position())+t.position(),t)}key(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}value(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startKeyValue(t){t.startObject(2)}static addKey(t,n){t.addFieldOffset(0,n,0)}static addValue(t,n){t.addFieldOffset(1,n,0)}static endKeyValue(t){return t.endObject()}static createKeyValue(t,n,r){return Sl.startKeyValue(t),Sl.addKey(t,n),Sl.addValue(t,r),Sl.endKeyValue(t)}};var bf;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(bf||(bf={}));var vf;(function(e){e[e.Little=0]="Little",e[e.Big=1]="Big"})(vf||(vf={}));var hg;(function(e){e[e.DenseArray=0]="DenseArray"})(hg||(hg={}));let Eu=class xl{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInt(t,n){return(n||new xl).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInt(t,n){return t.setPosition(t.position()+me),(n||new xl).__init(t.readInt32(t.position())+t.position(),t)}bitWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}isSigned(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startInt(t){t.startObject(2)}static addBitWidth(t,n){t.addFieldInt32(0,n,0)}static addIsSigned(t,n){t.addFieldInt8(1,+n,0)}static endInt(t){return t.endObject()}static createInt(t,n,r){return xl.startInt(t),xl.addBitWidth(t,n),xl.addIsSigned(t,r),xl.endInt(t)}},Zc=class q2{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryEncoding(t,n){return(n||new q2).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryEncoding(t,n){return t.setPosition(t.position()+me),(n||new q2).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}indexType(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new Eu).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isOrdered(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}dictionaryKind(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt16(this.bb_pos+t):hg.DenseArray}static startDictionaryEncoding(t){t.startObject(4)}static addId(t,n){t.addFieldInt64(0,n,t.createLong(0,0))}static addIndexType(t,n){t.addFieldOffset(1,n,0)}static addIsOrdered(t,n){t.addFieldInt8(2,+n,0)}static addDictionaryKind(t,n){t.addFieldInt16(3,n,hg.DenseArray)}static endDictionaryEncoding(t){return t.endObject()}},uM=class Xd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBinary(t,n){return(n||new Xd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBinary(t,n){return t.setPosition(t.position()+me),(n||new Xd).__init(t.readInt32(t.position())+t.position(),t)}static startBinary(t){t.startObject(0)}static endBinary(t){return t.endObject()}static createBinary(t){return Xd.startBinary(t),Xd.endBinary(t)}},fM=class Qd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBool(t,n){return(n||new Qd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBool(t,n){return t.setPosition(t.position()+me),(n||new Qd).__init(t.readInt32(t.position())+t.position(),t)}static startBool(t){t.startObject(0)}static endBool(t){return t.endObject()}static createBool(t){return Qd.startBool(t),Qd.endBool(t)}};var pg;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(pg||(pg={}));let nm=class Jc{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDate(t,n){return(n||new Jc).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDate(t,n){return t.setPosition(t.position()+me),(n||new Jc).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):pg.MILLISECOND}static startDate(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,pg.MILLISECOND)}static endDate(t){return t.endObject()}static createDate(t,n){return Jc.startDate(t),Jc.addUnit(t,n),Jc.endDate(t)}},tu=class ea{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDecimal(t,n){return(n||new ea).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDecimal(t,n){return t.setPosition(t.position()+me),(n||new ea).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}scale(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}bitWidth(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt32(this.bb_pos+t):128}static startDecimal(t){t.startObject(3)}static addPrecision(t,n){t.addFieldInt32(0,n,0)}static addScale(t,n){t.addFieldInt32(1,n,0)}static addBitWidth(t,n){t.addFieldInt32(2,n,128)}static endDecimal(t){return t.endObject()}static createDecimal(t,n,r,i){return ea.startDecimal(t),ea.addPrecision(t,n),ea.addScale(t,r),ea.addBitWidth(t,i),ea.endDecimal(t)}};var wf;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(wf||(wf={}));let rm=class eu{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeBinary(t,n){return(n||new eu).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeBinary(t,n){return t.setPosition(t.position()+me),(n||new eu).__init(t.readInt32(t.position())+t.position(),t)}byteWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeBinary(t){t.startObject(1)}static addByteWidth(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeBinary(t){return t.endObject()}static createFixedSizeBinary(t,n){return eu.startFixedSizeBinary(t),eu.addByteWidth(t,n),eu.endFixedSizeBinary(t)}},im=class nu{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeList(t,n){return(n||new nu).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeList(t,n){return t.setPosition(t.position()+me),(n||new nu).__init(t.readInt32(t.position())+t.position(),t)}listSize(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeList(t){t.startObject(1)}static addListSize(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeList(t){return t.endObject()}static createFixedSizeList(t,n){return nu.startFixedSizeList(t),nu.addListSize(t,n),nu.endFixedSizeList(t)}};var yg;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(yg||(yg={}));let sm=class ru{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFloatingPoint(t,n){return(n||new ru).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFloatingPoint(t,n){return t.setPosition(t.position()+me),(n||new ru).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):yg.HALF}static startFloatingPoint(t){t.startObject(1)}static addPrecision(t,n){t.addFieldInt16(0,n,yg.HALF)}static endFloatingPoint(t){return t.endObject()}static createFloatingPoint(t,n){return ru.startFloatingPoint(t),ru.addPrecision(t,n),ru.endFloatingPoint(t)}};var mg;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(mg||(mg={}));let om=class iu{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInterval(t,n){return(n||new iu).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInterval(t,n){return t.setPosition(t.position()+me),(n||new iu).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):mg.YEAR_MONTH}static startInterval(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,mg.YEAR_MONTH)}static endInterval(t){return t.endObject()}static createInterval(t,n){return iu.startInterval(t),iu.addUnit(t,n),iu.endInterval(t)}},dM=class Kd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsList(t,n){return(n||new Kd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsList(t,n){return t.setPosition(t.position()+me),(n||new Kd).__init(t.readInt32(t.position())+t.position(),t)}static startList(t){t.startObject(0)}static endList(t){return t.endObject()}static createList(t){return Kd.startList(t),Kd.endList(t)}},am=class su{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMap(t,n){return(n||new su).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMap(t,n){return t.setPosition(t.position()+me),(n||new su).__init(t.readInt32(t.position())+t.position(),t)}keysSorted(){const t=this.bb.__offset(this.bb_pos,4);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startMap(t){t.startObject(1)}static addKeysSorted(t,n){t.addFieldInt8(0,+n,0)}static endMap(t){return t.endObject()}static createMap(t,n){return su.startMap(t),su.addKeysSorted(t,n),su.endMap(t)}},hM=class Zd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsNull(t,n){return(n||new Zd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsNull(t,n){return t.setPosition(t.position()+me),(n||new Zd).__init(t.readInt32(t.position())+t.position(),t)}static startNull(t){t.startObject(0)}static endNull(t){return t.endObject()}static createNull(t){return Zd.startNull(t),Zd.endNull(t)}},pM=class Jd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsStruct_(t,n){return(n||new Jd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsStruct_(t,n){return t.setPosition(t.position()+me),(n||new Jd).__init(t.readInt32(t.position())+t.position(),t)}static startStruct_(t){t.startObject(0)}static endStruct_(t){return t.endObject()}static createStruct_(t){return Jd.startStruct_(t),Jd.endStruct_(t)}},th=class Il{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTime(t,n){return(n||new Il).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTime(t,n){return t.setPosition(t.position()+me),(n||new Il).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):wf.MILLISECOND}bitWidth(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):32}static startTime(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,wf.MILLISECOND)}static addBitWidth(t,n){t.addFieldInt32(1,n,32)}static endTime(t){return t.endObject()}static createTime(t,n,r){return Il.startTime(t),Il.addUnit(t,n),Il.addBitWidth(t,r),Il.endTime(t)}},eh=class Tl{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTimestamp(t,n){return(n||new Tl).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTimestamp(t,n){return t.setPosition(t.position()+me),(n||new Tl).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):wf.SECOND}timezone(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startTimestamp(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,wf.SECOND)}static addTimezone(t,n){t.addFieldOffset(1,n,0)}static endTimestamp(t){return t.endObject()}static createTimestamp(t,n,r){return Tl.startTimestamp(t),Tl.addUnit(t,n),Tl.addTimezone(t,r),Tl.endTimestamp(t)}};var gg;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(gg||(gg={}));let El=class Al{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUnion(t,n){return(n||new Al).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUnion(t,n){return t.setPosition(t.position()+me),(n||new Al).__init(t.readInt32(t.position())+t.position(),t)}mode(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):gg.Sparse}typeIds(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readInt32(this.bb.__vector(this.bb_pos+n)+t*4):0}typeIdsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}typeIdsArray(){const t=this.bb.__offset(this.bb_pos,6);return t?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startUnion(t){t.startObject(2)}static addMode(t,n){t.addFieldInt16(0,n,gg.Sparse)}static addTypeIds(t,n){t.addFieldOffset(1,n,0)}static createTypeIdsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addInt32(n[r]);return t.endVector()}static startTypeIdsVector(t,n){t.startVector(4,n,4)}static endUnion(t){return t.endObject()}static createUnion(t,n,r){return Al.startUnion(t),Al.addMode(t,n),Al.addTypeIds(t,r),Al.endUnion(t)}},yM=class nh{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUtf8(t,n){return(n||new nh).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUtf8(t,n){return t.setPosition(t.position()+me),(n||new nh).__init(t.readInt32(t.position())+t.position(),t)}static startUtf8(t){t.startObject(0)}static endUtf8(t){return t.endObject()}static createUtf8(t){return nh.startUtf8(t),nh.endUtf8(t)}};var ke;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.FloatingPoint=3]="FloatingPoint",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct_=13]="Struct_",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.LargeBinary=19]="LargeBinary",e[e.LargeUtf8=20]="LargeUtf8",e[e.LargeList=21]="LargeList"})(ke||(ke={}));let Gr=class lm{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsField(t,n){return(n||new lm).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsField(t,n){return t.setPosition(t.position()+me),(n||new lm).__init(t.readInt32(t.position())+t.position(),t)}name(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}nullable(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}typeType(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):ke.NONE}type(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.__union(t,this.bb_pos+n):null}dictionary(t){const n=this.bb.__offset(this.bb_pos,12);return n?(t||new Zc).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}children(t,n){const r=this.bb.__offset(this.bb_pos,14);return r?(n||new lm).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}childrenLength(){const t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,16);return r?(n||new si).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}static startField(t){t.startObject(7)}static addName(t,n){t.addFieldOffset(0,n,0)}static addNullable(t,n){t.addFieldInt8(1,+n,0)}static addTypeType(t,n){t.addFieldInt8(2,n,ke.NONE)}static addType(t,n){t.addFieldOffset(3,n,0)}static addDictionary(t,n){t.addFieldOffset(4,n,0)}static addChildren(t,n){t.addFieldOffset(5,n,0)}static createChildrenVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startChildrenVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(6,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endField(t){return t.endObject()}},ls=class Zs{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsSchema(t,n){return(n||new Zs).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSchema(t,n){return t.setPosition(t.position()+me),(n||new Zs).__init(t.readInt32(t.position())+t.position(),t)}endianness(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):vf.Little}fields(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new Gr).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}fieldsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new si).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}features(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.readInt64(this.bb.__vector(this.bb_pos+n)+t*8):this.bb.createLong(0,0)}featuresLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}static startSchema(t){t.startObject(4)}static addEndianness(t,n){t.addFieldInt16(0,n,vf.Little)}static addFields(t,n){t.addFieldOffset(1,n,0)}static createFieldsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startFieldsVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(2,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static addFeatures(t,n){t.addFieldOffset(3,n,0)}static createFeaturesVector(t,n){t.startVector(8,n.length,8);for(let r=n.length-1;r>=0;r--)t.addInt64(n[r]);return t.endVector()}static startFeaturesVector(t,n){t.startVector(8,n,8)}static endSchema(t){return t.endObject()}static finishSchemaBuffer(t,n){t.finish(n)}static finishSizePrefixedSchemaBuffer(t,n){t.finish(n,void 0,!0)}static createSchema(t,n,r,i,s){return Zs.startSchema(t),Zs.addEndianness(t,n),Zs.addFields(t,r),Zs.addCustomMetadata(t,i),Zs.addFeatures(t,s),Zs.endSchema(t)}},ns=class W2{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFooter(t,n){return(n||new W2).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFooter(t,n){return t.setPosition(t.position()+me),(n||new W2).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):bf.V1}schema(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new ls).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}dictionaries(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new j2).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}dictionariesLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}recordBatches(t,n){const r=this.bb.__offset(this.bb_pos,10);return r?(n||new j2).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}recordBatchesLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new si).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startFooter(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,bf.V1)}static addSchema(t,n){t.addFieldOffset(1,n,0)}static addDictionaries(t,n){t.addFieldOffset(2,n,0)}static startDictionariesVector(t,n){t.startVector(24,n,8)}static addRecordBatches(t,n){t.addFieldOffset(3,n,0)}static startRecordBatchesVector(t,n){t.startVector(24,n,8)}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endFooter(t){return t.endObject()}static finishFooterBuffer(t,n){t.finish(n)}static finishSizePrefixedFooterBuffer(t,n){t.finish(n,void 0,!0)}},Be=class Ml{constructor(t=[],n,r){this.fields=t||[],this.metadata=n||new Map,r||(r=G2(t)),this.dictionaries=r}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(t=>t.name)}toString(){return`Schema<{ ${this.fields.map((t,n)=>`${n}: ${t}`).join(", ")} }>`}select(t){const n=new Set(t),r=this.fields.filter(i=>n.has(i.name));return new Ml(r,this.metadata)}selectAt(t){const n=t.map(r=>this.fields[r]).filter(Boolean);return new Ml(n,this.metadata)}assign(...t){const n=t[0]instanceof Ml?t[0]:Array.isArray(t[0])?new Ml(t[0]):new Ml(t),r=[...this.fields],i=a0(a0(new Map,this.metadata),n.metadata),s=n.fields.filter(a=>{const l=r.findIndex(c=>c.name===a.name);return~l?(r[l]=a.clone({metadata:a0(a0(new Map,r[l].metadata),a.metadata)}))&&!1:!0}),o=G2(s,new Map);return new Ml([...r,...s],i,new Map([...this.dictionaries,...o]))}};Be.prototype.fields=null;Be.prototype.metadata=null;Be.prototype.dictionaries=null;let He=class H2{constructor(t,n,r=!1,i){this.name=t,this.type=n,this.nullable=r,this.metadata=i||new Map}static new(...t){let[n,r,i,s]=t;return t[0]&&typeof t[0]=="object"&&({name:n}=t[0],r===void 0&&(r=t[0].type),i===void 0&&(i=t[0].nullable),s===void 0&&(s=t[0].metadata)),new H2(`${n}`,r,i,s)}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...t){let[n,r,i,s]=t;return!t[0]||typeof t[0]!="object"?[n=this.name,r=this.type,i=this.nullable,s=this.metadata]=t:{name:n=this.name,type:r=this.type,nullable:i=this.nullable,metadata:s=this.metadata}=t[0],H2.new(n,r,i,s)}};He.prototype.type=null;He.prototype.name=null;He.prototype.nullable=null;He.prototype.metadata=null;function a0(e,t){return new Map([...e||new Map,...t||new Map])}function G2(e,t=new Map){for(let n=-1,r=e.length;++n<r;){const s=e[n].type;if(Bt.isDictionary(s)){if(!t.has(s.id))t.set(s.id,s.dictionary);else if(t.get(s.id)!==s.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}s.children&&s.children.length>0&&G2(s.children,t)}return t}var mM=To,Aq=H8,Mq=gf;let qI=class{constructor(t,n=ni.V4,r,i){this.schema=t,this.version=n,r&&(this._recordBatches=r),i&&(this._dictionaryBatches=i)}static decode(t){t=new Mq(ne(t));const n=ns.getRootAsFooter(t),r=Be.decode(n.schema());return new $q(r,n)}static encode(t){const n=new Aq,r=Be.encode(n,t.schema);ns.startRecordBatchesVector(n,t.numRecordBatches);for(const o of[...t.recordBatches()].slice().reverse())bg.encode(n,o);const i=n.endVector();ns.startDictionariesVector(n,t.numDictionaries);for(const o of[...t.dictionaryBatches()].slice().reverse())bg.encode(n,o);const s=n.endVector();return ns.startFooter(n),ns.addSchema(n,r),ns.addVersion(n,ni.V4),ns.addRecordBatches(n,i),ns.addDictionaries(n,s),ns.finishFooterBuffer(n,ns.endFooter(n)),n.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}*recordBatches(){for(let t,n=-1,r=this.numRecordBatches;++n<r;)(t=this.getRecordBatch(n))&&(yield t)}*dictionaryBatches(){for(let t,n=-1,r=this.numDictionaries;++n<r;)(t=this.getDictionaryBatch(n))&&(yield t)}getRecordBatch(t){return t>=0&&t<this.numRecordBatches&&this._recordBatches[t]||null}getDictionaryBatch(t){return t>=0&&t<this.numDictionaries&&this._dictionaryBatches[t]||null}},$q=class extends qI{constructor(t,n){super(t,n.version()),this._footer=n}get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}getRecordBatch(t){if(t>=0&&t<this.numRecordBatches){const n=this._footer.recordBatches(t);if(n)return bg.decode(n)}return null}getDictionaryBatch(t){if(t>=0&&t<this.numDictionaries){const n=this._footer.dictionaries(t);if(n)return bg.decode(n)}return null}},bg=class X8{constructor(t,n,r){this.metaDataLength=t,this.offset=typeof r=="number"?r:r.low,this.bodyLength=typeof n=="number"?n:n.low}static decode(t){return new X8(t.metaDataLength(),t.bodyLength(),t.offset())}static encode(t,n){const{metaDataLength:r}=n,i=new mM(n.offset,0),s=new mM(n.bodyLength,0);return j2.createBlock(t,i,r,s)}};const Re=Object.freeze({done:!0,value:void 0});let gM=class{constructor(t){this._json=t}get schema(){return this._json.schema}get batches(){return this._json.batches||[]}get dictionaries(){return this._json.dictionaries||[]}},Q8=class{tee(){return this._getDOMStream().tee()}pipe(t,n){return this._getNodeStream().pipe(t,n)}pipeTo(t,n){return this._getDOMStream().pipeTo(t,n)}pipeThrough(t,n){return this._getDOMStream().pipeThrough(t,n)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}},Nq=class extends Q8{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(t=>this._closedPromiseResolve=t)}get closed(){return this._closedPromise}cancel(t){return W(this,void 0,void 0,function*(){yield this.return(t)})}write(t){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(t):this.resolvers.shift().resolve({done:!1,value:t}))}abort(t){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:t}:this.resolvers.shift().reject({done:!0,value:t}))}close(){if(this._closedPromiseResolve){const{resolvers:t}=this;for(;t.length>0;)t.shift().resolve(Re);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(t){return Qr.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,t)}toNodeStream(t){return Qr.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,t)}throw(t){return W(this,void 0,void 0,function*(){return yield this.abort(t),Re})}return(t){return W(this,void 0,void 0,function*(){return yield this.close(),Re})}read(t){return W(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return W(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(...t){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((n,r)=>{this.resolvers.push({resolve:n,reject:r})}):Promise.resolve(Re)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}},Dq=class extends Nq{write(t){if((t=ne(t)).byteLength>0)return super.write(t)}toString(t=!1){return t?F2(this.toUint8Array(!0)):this.toUint8Array(!1).then(F2)}toUint8Array(t=!1){return t?Bs(this._values)[0]:W(this,void 0,void 0,function*(){var n,r;const i=[];let s=0;try{for(var o=Fr(this),a;a=yield o.next(),!a.done;){const l=a.value;i.push(l),s+=l.byteLength}}catch(l){n={error:l}}finally{try{a&&!a.done&&(r=o.return)&&(yield r.call(o))}finally{if(n)throw n.error}}return Bs(i,s)[0]})}},vg=class{constructor(t){t&&(this.source=new kq(Qr.fromIterable(t)))}[Symbol.iterator](){return this}next(t){return this.source.next(t)}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}peek(t){return this.source.peek(t)}read(t){return this.source.read(t)}},wg=class K8{constructor(t){t instanceof K8?this.source=t.source:t instanceof Dq?this.source=new ml(Qr.fromAsyncIterable(t)):Mk(t)?this.source=new ml(Qr.fromNodeStream(t)):FI(t)?this.source=new ml(Qr.fromDOMStream(t)):Ek(t)?this.source=new ml(Qr.fromDOMStream(t.body)):Rb(t)?this.source=new ml(Qr.fromIterable(t)):Jh(t)?this.source=new ml(Qr.fromAsyncIterable(t)):OI(t)&&(this.source=new ml(Qr.fromAsyncIterable(t)))}[Symbol.asyncIterator](){return this}next(t){return this.source.next(t)}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}get closed(){return this.source.closed}cancel(t){return this.source.cancel(t)}peek(t){return this.source.peek(t)}read(t){return this.source.read(t)}},kq=class{constructor(t){this.source=t}cancel(t){this.return(t)}peek(t){return this.next(t,"peek").value}read(t){return this.next(t,"read").value}next(t,n="read"){return this.source.next({cmd:n,size:t})}throw(t){return Object.create(this.source.throw&&this.source.throw(t)||Re)}return(t){return Object.create(this.source.return&&this.source.return(t)||Re)}},ml=class{constructor(t){this.source=t,this._closedPromise=new Promise(n=>this._closedPromiseResolve=n)}cancel(t){return W(this,void 0,void 0,function*(){yield this.return(t)})}get closed(){return this._closedPromise}read(t){return W(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return W(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(t,n="read"){return W(this,void 0,void 0,function*(){return yield this.source.next({cmd:n,size:t})})}throw(t){return W(this,void 0,void 0,function*(){const n=this.source.throw&&(yield this.source.throw(t))||Re;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(n)})}return(t){return W(this,void 0,void 0,function*(){const n=this.source.return&&(yield this.source.return(t))||Re;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(n)})}},bM=class extends vg{constructor(t,n){super(),this.position=0,this.buffer=ne(t),this.size=typeof n>"u"?this.buffer.byteLength:n}readInt32(t){const{buffer:n,byteOffset:r}=this.readAt(t,4);return new DataView(n,r).getInt32(0,!0)}seek(t){return this.position=Math.min(t,this.size),t<this.size}read(t){const{buffer:n,size:r,position:i}=this;return n&&i<r?(typeof t!="number"&&(t=Number.POSITIVE_INFINITY),this.position=Math.min(r,i+Math.min(r-i,t)),n.subarray(i,this.position)):null}readAt(t,n){const r=this.buffer,i=Math.min(this.size,t+n);return r?r.subarray(t,i):new Uint8Array(n)}close(){this.buffer&&(this.buffer=null)}throw(t){return this.close(),{done:!0,value:t}}return(t){return this.close(),{done:!0,value:t}}},_g=class extends wg{constructor(t,n){super(),this.position=0,this._handle=t,typeof n=="number"?this.size=n:this._pending=W(this,void 0,void 0,function*(){this.size=(yield t.stat()).size,delete this._pending})}readInt32(t){return W(this,void 0,void 0,function*(){const{buffer:n,byteOffset:r}=yield this.readAt(t,4);return new DataView(n,r).getInt32(0,!0)})}seek(t){return W(this,void 0,void 0,function*(){return this._pending&&(yield this._pending),this.position=Math.min(t,this.size),t<this.size})}read(t){return W(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:n,size:r,position:i}=this;if(n&&i<r){typeof t!="number"&&(t=Number.POSITIVE_INFINITY);let s=i,o=0,a=0;const l=Math.min(r,s+Math.min(r-s,t)),c=new Uint8Array(Math.max(0,(this.position=l)-s));for(;(s+=a)<l&&(o+=a)<c.byteLength;)({bytesRead:a}=yield n.read(c,o,c.byteLength-o,s));return c}return null})}readAt(t,n){return W(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:r,size:i}=this;if(r&&t+n<i){const s=Math.min(i,t+n),o=new Uint8Array(s-t);return(yield r.read(o,0,n,t)).buffer}return new Uint8Array(n)})}close(){return W(this,void 0,void 0,function*(){const t=this._handle;this._handle=null,t&&(yield t.close())})}throw(t){return W(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:t}})}return(t){return W(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:t}})}};const Oq=65536;function Au(e){return e<0&&(e=4294967295+e+1),`0x${e.toString(16)}`}const _f=8,WI=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8];let Z8=class{constructor(t){this.buffer=t}high(){return this.buffer[1]}low(){return this.buffer[0]}_times(t){const n=new Uint32Array([this.buffer[1]>>>16,this.buffer[1]&65535,this.buffer[0]>>>16,this.buffer[0]&65535]),r=new Uint32Array([t.buffer[1]>>>16,t.buffer[1]&65535,t.buffer[0]>>>16,t.buffer[0]&65535]);let i=n[3]*r[3];this.buffer[0]=i&65535;let s=i>>>16;return i=n[2]*r[3],s+=i,i=n[3]*r[2]>>>0,s+=i,this.buffer[0]+=s<<16,this.buffer[1]=s>>>0<i?Oq:0,this.buffer[1]+=s>>>16,this.buffer[1]+=n[1]*r[3]+n[2]*r[2]+n[3]*r[1],this.buffer[1]+=n[0]*r[3]+n[1]*r[2]+n[2]*r[1]+n[3]*r[0]<<16,this}_plus(t){const n=this.buffer[0]+t.buffer[0]>>>0;this.buffer[1]+=t.buffer[1],n<this.buffer[0]>>>0&&++this.buffer[1],this.buffer[0]=n}lessThan(t){return this.buffer[1]<t.buffer[1]||this.buffer[1]===t.buffer[1]&&this.buffer[0]<t.buffer[0]}equals(t){return this.buffer[1]===t.buffer[1]&&this.buffer[0]==t.buffer[0]}greaterThan(t){return t.lessThan(this)}hex(){return`${Au(this.buffer[1])} ${Au(this.buffer[0])}`}},Je=class Js extends Z8{times(t){return this._times(t),this}plus(t){return this._plus(t),this}static from(t,n=new Uint32Array(2)){return Js.fromString(typeof t=="string"?t:t.toString(),n)}static fromNumber(t,n=new Uint32Array(2)){return Js.fromString(t.toString(),n)}static fromString(t,n=new Uint32Array(2)){const r=t.length,i=new Js(n);for(let s=0;s<r;){const o=_f<r-s?_f:r-s,a=new Js(new Uint32Array([Number.parseInt(t.slice(s,s+o),10),0])),l=new Js(new Uint32Array([WI[o],0]));i.times(l),i.plus(a),s+=o}return i}static convertArray(t){const n=new Uint32Array(t.length*2);for(let r=-1,i=t.length;++r<i;)Js.from(t[r],new Uint32Array(n.buffer,n.byteOffset+2*r*4,2));return n}static multiply(t,n){return new Js(new Uint32Array(t.buffer)).times(n)}static add(t,n){return new Js(new Uint32Array(t.buffer)).plus(n)}},xh=class to extends Z8{negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[0]==0&&++this.buffer[1],this}times(t){return this._times(t),this}plus(t){return this._plus(t),this}lessThan(t){const n=this.buffer[1]<<0,r=t.buffer[1]<<0;return n<r||n===r&&this.buffer[0]<t.buffer[0]}static from(t,n=new Uint32Array(2)){return to.fromString(typeof t=="string"?t:t.toString(),n)}static fromNumber(t,n=new Uint32Array(2)){return to.fromString(t.toString(),n)}static fromString(t,n=new Uint32Array(2)){const r=t.startsWith("-"),i=t.length,s=new to(n);for(let o=r?1:0;o<i;){const a=_f<i-o?_f:i-o,l=new to(new Uint32Array([Number.parseInt(t.slice(o,o+a),10),0])),c=new to(new Uint32Array([WI[a],0]));s.times(c),s.plus(l),o+=a}return r?s.negate():s}static convertArray(t){const n=new Uint32Array(t.length*2);for(let r=-1,i=t.length;++r<i;)to.from(t[r],new Uint32Array(n.buffer,n.byteOffset+2*r*4,2));return n}static multiply(t,n){return new to(new Uint32Array(t.buffer)).times(n)}static add(t,n){return new to(new Uint32Array(t.buffer)).plus(n)}},Fq=class eo{constructor(t){this.buffer=t}high(){return new xh(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2))}low(){return new xh(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset,2))}negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[2]=~this.buffer[2],this.buffer[3]=~this.buffer[3],this.buffer[0]==0&&++this.buffer[1],this.buffer[1]==0&&++this.buffer[2],this.buffer[2]==0&&++this.buffer[3],this}times(t){const n=new Je(new Uint32Array([this.buffer[3],0])),r=new Je(new Uint32Array([this.buffer[2],0])),i=new Je(new Uint32Array([this.buffer[1],0])),s=new Je(new Uint32Array([this.buffer[0],0])),o=new Je(new Uint32Array([t.buffer[3],0])),a=new Je(new Uint32Array([t.buffer[2],0])),l=new Je(new Uint32Array([t.buffer[1],0])),c=new Je(new Uint32Array([t.buffer[0],0]));let u=Je.multiply(s,c);this.buffer[0]=u.low();const f=new Je(new Uint32Array([u.high(),0]));return u=Je.multiply(i,c),f.plus(u),u=Je.multiply(s,l),f.plus(u),this.buffer[1]=f.low(),this.buffer[3]=f.lessThan(u)?1:0,this.buffer[2]=f.high(),new Je(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2)).plus(Je.multiply(r,c)).plus(Je.multiply(i,l)).plus(Je.multiply(s,a)),this.buffer[3]+=Je.multiply(n,c).plus(Je.multiply(r,l)).plus(Je.multiply(i,a)).plus(Je.multiply(s,o)).low(),this}plus(t){const n=new Uint32Array(4);return n[3]=this.buffer[3]+t.buffer[3]>>>0,n[2]=this.buffer[2]+t.buffer[2]>>>0,n[1]=this.buffer[1]+t.buffer[1]>>>0,n[0]=this.buffer[0]+t.buffer[0]>>>0,n[0]<this.buffer[0]>>>0&&++n[1],n[1]<this.buffer[1]>>>0&&++n[2],n[2]<this.buffer[2]>>>0&&++n[3],this.buffer[3]=n[3],this.buffer[2]=n[2],this.buffer[1]=n[1],this.buffer[0]=n[0],this}hex(){return`${Au(this.buffer[3])} ${Au(this.buffer[2])} ${Au(this.buffer[1])} ${Au(this.buffer[0])}`}static multiply(t,n){return new eo(new Uint32Array(t.buffer)).times(n)}static add(t,n){return new eo(new Uint32Array(t.buffer)).plus(n)}static from(t,n=new Uint32Array(4)){return eo.fromString(typeof t=="string"?t:t.toString(),n)}static fromNumber(t,n=new Uint32Array(4)){return eo.fromString(t.toString(),n)}static fromString(t,n=new Uint32Array(4)){const r=t.startsWith("-"),i=t.length,s=new eo(n);for(let o=r?1:0;o<i;){const a=_f<i-o?_f:i-o,l=new eo(new Uint32Array([Number.parseInt(t.slice(o,o+a),10),0,0,0])),c=new eo(new Uint32Array([WI[a],0,0,0]));s.times(c),s.plus(l),o+=a}return r?s.negate():s}static convertArray(t){const n=new Uint32Array(t.length*4);for(let r=-1,i=t.length;++r<i;)eo.from(t[r],new Uint32Array(n.buffer,n.byteOffset+4*4*r,4));return n}},J8=class extends Wt{constructor(t,n,r,i){super(),this.nodesIndex=-1,this.buffersIndex=-1,this.bytes=t,this.nodes=n,this.buffers=r,this.dictionaries=i}visit(t){return super.visit(t instanceof He?t.type:t)}visitNull(t,{length:n}=this.nextFieldNode()){return zt({type:t,length:n})}visitBool(t,{length:n,nullCount:r}=this.nextFieldNode()){return zt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitInt(t,{length:n,nullCount:r}=this.nextFieldNode()){return zt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitFloat(t,{length:n,nullCount:r}=this.nextFieldNode()){return zt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitUtf8(t,{length:n,nullCount:r}=this.nextFieldNode()){return zt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),valueOffsets:this.readOffsets(t),data:this.readData(t)})}visitBinary(t,{length:n,nullCount:r}=this.nextFieldNode()){return zt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),valueOffsets:this.readOffsets(t),data:this.readData(t)})}visitFixedSizeBinary(t,{length:n,nullCount:r}=this.nextFieldNode()){return zt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitDate(t,{length:n,nullCount:r}=this.nextFieldNode()){return zt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitTimestamp(t,{length:n,nullCount:r}=this.nextFieldNode()){return zt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitTime(t,{length:n,nullCount:r}=this.nextFieldNode()){return zt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitDecimal(t,{length:n,nullCount:r}=this.nextFieldNode()){return zt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitList(t,{length:n,nullCount:r}=this.nextFieldNode()){return zt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),valueOffsets:this.readOffsets(t),child:this.visit(t.children[0])})}visitStruct(t,{length:n,nullCount:r}=this.nextFieldNode()){return zt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),children:this.visitMany(t.children)})}visitUnion(t){return t.mode===zi.Sparse?this.visitSparseUnion(t):this.visitDenseUnion(t)}visitDenseUnion(t,{length:n,nullCount:r}=this.nextFieldNode()){return zt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),typeIds:this.readTypeIds(t),valueOffsets:this.readOffsets(t),children:this.visitMany(t.children)})}visitSparseUnion(t,{length:n,nullCount:r}=this.nextFieldNode()){return zt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),typeIds:this.readTypeIds(t),children:this.visitMany(t.children)})}visitDictionary(t,{length:n,nullCount:r}=this.nextFieldNode()){return zt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t.indices),dictionary:this.readDictionary(t)})}visitInterval(t,{length:n,nullCount:r}=this.nextFieldNode()){return zt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitFixedSizeList(t,{length:n,nullCount:r}=this.nextFieldNode()){return zt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),child:this.visit(t.children[0])})}visitMap(t,{length:n,nullCount:r}=this.nextFieldNode()){return zt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),valueOffsets:this.readOffsets(t),child:this.visit(t.children[0])})}nextFieldNode(){return this.nodes[++this.nodesIndex]}nextBufferRange(){return this.buffers[++this.buffersIndex]}readNullBitmap(t,n,r=this.nextBufferRange()){return n>0&&this.readData(t,r)||new Uint8Array(0)}readOffsets(t,n){return this.readData(t,n)}readTypeIds(t,n){return this.readData(t,n)}readData(t,{length:n,offset:r}=this.nextBufferRange()){return this.bytes.subarray(r,r+n)}readDictionary(t){return this.dictionaries.get(t.id)}},Bq=class extends J8{constructor(t,n,r,i){super(new Uint8Array(0),n,r,i),this.sources=t}readNullBitmap(t,n,{offset:r}=this.nextBufferRange()){return n<=0?new Uint8Array(0):U2(this.sources[r])}readOffsets(t,{offset:n}=this.nextBufferRange()){return pe(Uint8Array,pe(Int32Array,this.sources[n]))}readTypeIds(t,{offset:n}=this.nextBufferRange()){return pe(Uint8Array,pe(t.ArrayType,this.sources[n]))}readData(t,{offset:n}=this.nextBufferRange()){const{sources:r}=this;return Bt.isTimestamp(t)||(Bt.isInt(t)||Bt.isTime(t))&&t.bitWidth===64||Bt.isDate(t)&&t.unit===Fo.MILLISECOND?pe(Uint8Array,xh.convertArray(r[n])):Bt.isDecimal(t)?pe(Uint8Array,Fq.convertArray(r[n])):Bt.isBinary(t)||Bt.isFixedSizeBinary(t)?Rq(r[n]):Bt.isBool(t)?U2(r[n]):Bt.isUtf8(t)?kI(r[n].join("")):pe(Uint8Array,pe(t.ArrayType,r[n].map(i=>+i)))}};function Rq(e){const t=e.join(""),n=new Uint8Array(t.length/2);for(let r=0;r<t.length;r+=2)n[r>>1]=Number.parseInt(t.slice(r,r+2),16);return n}let Et=class extends Wt{compareSchemas(t,n){return t===n||n instanceof t.constructor&&this.compareManyFields(t.fields,n.fields)}compareManyFields(t,n){return t===n||Array.isArray(t)&&Array.isArray(n)&&t.length===n.length&&t.every((r,i)=>this.compareFields(r,n[i]))}compareFields(t,n){return t===n||n instanceof t.constructor&&t.name===n.name&&t.nullable===n.nullable&&this.visit(t.type,n.type)}};function xr(e,t){return t instanceof e.constructor}function Hp(e,t){return e===t||xr(e,t)}function jo(e,t){return e===t||xr(e,t)&&e.bitWidth===t.bitWidth&&e.isSigned===t.isSigned}function Cb(e,t){return e===t||xr(e,t)&&e.precision===t.precision}function Lq(e,t){return e===t||xr(e,t)&&e.byteWidth===t.byteWidth}function HI(e,t){return e===t||xr(e,t)&&e.unit===t.unit}function Gp(e,t){return e===t||xr(e,t)&&e.unit===t.unit&&e.timezone===t.timezone}function Xp(e,t){return e===t||xr(e,t)&&e.unit===t.unit&&e.bitWidth===t.bitWidth}function Cq(e,t){return e===t||xr(e,t)&&e.children.length===t.children.length&&Ba.compareManyFields(e.children,t.children)}function Uq(e,t){return e===t||xr(e,t)&&e.children.length===t.children.length&&Ba.compareManyFields(e.children,t.children)}function GI(e,t){return e===t||xr(e,t)&&e.mode===t.mode&&e.typeIds.every((n,r)=>n===t.typeIds[r])&&Ba.compareManyFields(e.children,t.children)}function Pq(e,t){return e===t||xr(e,t)&&e.id===t.id&&e.isOrdered===t.isOrdered&&Ba.visit(e.indices,t.indices)&&Ba.visit(e.dictionary,t.dictionary)}function XI(e,t){return e===t||xr(e,t)&&e.unit===t.unit}function zq(e,t){return e===t||xr(e,t)&&e.listSize===t.listSize&&e.children.length===t.children.length&&Ba.compareManyFields(e.children,t.children)}function jq(e,t){return e===t||xr(e,t)&&e.keysSorted===t.keysSorted&&e.children.length===t.children.length&&Ba.compareManyFields(e.children,t.children)}Et.prototype.visitNull=Hp;Et.prototype.visitBool=Hp;Et.prototype.visitInt=jo;Et.prototype.visitInt8=jo;Et.prototype.visitInt16=jo;Et.prototype.visitInt32=jo;Et.prototype.visitInt64=jo;Et.prototype.visitUint8=jo;Et.prototype.visitUint16=jo;Et.prototype.visitUint32=jo;Et.prototype.visitUint64=jo;Et.prototype.visitFloat=Cb;Et.prototype.visitFloat16=Cb;Et.prototype.visitFloat32=Cb;Et.prototype.visitFloat64=Cb;Et.prototype.visitUtf8=Hp;Et.prototype.visitBinary=Hp;Et.prototype.visitFixedSizeBinary=Lq;Et.prototype.visitDate=HI;Et.prototype.visitDateDay=HI;Et.prototype.visitDateMillisecond=HI;Et.prototype.visitTimestamp=Gp;Et.prototype.visitTimestampSecond=Gp;Et.prototype.visitTimestampMillisecond=Gp;Et.prototype.visitTimestampMicrosecond=Gp;Et.prototype.visitTimestampNanosecond=Gp;Et.prototype.visitTime=Xp;Et.prototype.visitTimeSecond=Xp;Et.prototype.visitTimeMillisecond=Xp;Et.prototype.visitTimeMicrosecond=Xp;Et.prototype.visitTimeNanosecond=Xp;Et.prototype.visitDecimal=Hp;Et.prototype.visitList=Cq;Et.prototype.visitStruct=Uq;Et.prototype.visitUnion=GI;Et.prototype.visitDenseUnion=GI;Et.prototype.visitSparseUnion=GI;Et.prototype.visitDictionary=Pq;Et.prototype.visitInterval=XI;Et.prototype.visitIntervalDayTime=XI;Et.prototype.visitIntervalYearMonth=XI;Et.prototype.visitFixedSizeList=zq;Et.prototype.visitMap=jq;const Ba=new Et;function Vq(e,t){return Ba.compareSchemas(e,t)}function $w(e,t){return Yq(e,t.map(n=>n.data.concat()))}function Yq(e,t){const n=[...e.fields],r=[],i={numBatches:t.reduce((f,d)=>Math.max(f,d.length),0)};let s=0,o=0,a=-1;const l=t.length;let c,u=[];for(;i.numBatches-- >0;){for(o=Number.POSITIVE_INFINITY,a=-1;++a<l;)u[a]=c=t[a].shift(),o=Math.min(o,c?c.length:o);Number.isFinite(o)&&(u=qq(n,o,u,t,i),o>0&&(r[s++]=zt({type:new Yn(n),length:o,nullCount:0,children:u.slice()})))}return[e=e.assign(n),r.map(f=>new Di(e,f))]}function qq(e,t,n,r,i){var s;const o=(t+63&-64)>>3;for(let a=-1,l=r.length;++a<l;){const c=n[a],u=c==null?void 0:c.length;if(u>=t)u===t?n[a]=c:(n[a]=c.slice(0,t),i.numBatches=Math.max(i.numBatches,r[a].unshift(c.slice(t,u-t))));else{const f=e[a];e[a]=f.clone({nullable:!0}),n[a]=(s=c==null?void 0:c._changeLengthAndBackfillNullBitmap(t))!==null&&s!==void 0?s:zt({type:f.type,length:t,nullCount:t,nullBitmap:new Uint8Array(o)})}}return n}var tO;let sp=class $l{constructor(...t){var n,r;if(t.length===0)return this.batches=[],this.schema=new Be([]),this._offsets=[0],this;let i,s;t[0]instanceof Be&&(i=t.shift()),t[t.length-1]instanceof Uint32Array&&(s=t.pop());const o=l=>{if(l){if(l instanceof Di)return[l];if(l instanceof $l)return l.batches;if(l instanceof De){if(l.type instanceof Yn)return[new Di(new Be(l.type.children),l)]}else{if(Array.isArray(l))return l.flatMap(c=>o(c));if(typeof l[Symbol.iterator]=="function")return[...l].flatMap(c=>o(c));if(typeof l=="object"){const c=Object.keys(l),u=c.map(h=>new Qe([l[h]])),f=new Be(c.map((h,p)=>new He(String(h),u[p].type))),[,d]=$w(f,u);return d.length===0?[new Di(l)]:d}}}return[]},a=t.flatMap(l=>o(l));if(i=(r=i??((n=a[0])===null||n===void 0?void 0:n.schema))!==null&&r!==void 0?r:new Be([]),!(i instanceof Be))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const l of a){if(!(l instanceof Di))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!Vq(i,l.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=i,this.batches=a,this._offsets=s??B8(this.data)}get data(){return this.batches.map(({data:t})=>t)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((t,n)=>t+n.length,0)}get nullCount(){return this._nullCount===-1&&(this._nullCount=F8(this.data)),this._nullCount}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}getByteLength(t){return 0}[Symbol.iterator](){return this.batches.length>0?YI.visit(new Qe(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(`,
  `)}
]`}concat(...t){const n=this.schema,r=this.data.concat(t.flatMap(({data:i})=>i));return new $l(n,r.map(i=>new Di(n,i)))}slice(t,n){const r=this.schema;[t,n]=k8({length:this.numRows},t,n);const i=R8(this.data,this._offsets,t,n);return new $l(r,i.map(s=>new Di(r,s)))}getChild(t){return this.getChildAt(this.schema.fields.findIndex(n=>n.name===t))}getChildAt(t){if(t>-1&&t<this.schema.fields.length){const n=this.data.map(r=>r.children[t]);if(n.length===0){const{type:r}=this.schema.fields[t],i=zt({type:r,length:0,nullCount:0});n.push(i._changeLengthAndBackfillNullBitmap(this.numRows))}return new Qe(n)}return null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=[...this.batches];if(t>-1&&t<this.numCols){n||(n=new Qe([zt({type:new Oa,length:this.numRows})]));const s=r.fields.slice(),o=s[t].clone({type:n.type}),a=this.schema.fields.map((l,c)=>this.getChildAt(c));[s[t],a[t]]=[o,n],[r,i]=$w(r,a)}return new $l(r,i)}select(t){const n=this.schema.fields.reduce((r,i,s)=>r.set(i.name,s),new Map);return this.selectAt(t.map(r=>n.get(r)).filter(r=>r>-1))}selectAt(t){const n=this.schema.selectAt(t),r=this.batches.map(i=>i.selectAt(t));return new $l(n,r)}assign(t){const n=this.schema.fields,[r,i]=t.schema.fields.reduce((a,l,c)=>{const[u,f]=a,d=n.findIndex(h=>h.name===l.name);return~d?f[d]=c:u.push(c),a},[[],[]]),s=this.schema.assign(t.schema),o=[...n.map((a,l)=>[l,i[l]]).map(([a,l])=>l===void 0?this.getChildAt(a):t.getChildAt(l)),...r.map(a=>t.getChildAt(a))].filter(Boolean);return new $l(...$w(s,o))}};tO=Symbol.toStringTag;sp[tO]=(e=>(e.schema=null,e.batches=[],e._offsets=new Uint32Array([0]),e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,e.isValid=Wu(VI),e.get=Wu(mr.getVisitFn(U.Struct)),e.set=L8(mi.getVisitFn(U.Struct)),e.indexOf=C8(dg.getVisitFn(U.Struct)),e.getByteLength=Wu(Rs.getVisitFn(U.Struct)),"Table"))(sp.prototype);var eO;let Di=class rh{constructor(...t){switch(t.length){case 2:{if([this.schema]=t,!(this.schema instanceof Be))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=zt({nullCount:0,type:new Yn(this.schema.fields),children:this.schema.fields.map(n=>zt({type:n.type,nullCount:0}))})]=t,!(this.data instanceof De))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=vM(this.schema,this.data.children);break}case 1:{const[n]=t,{fields:r,children:i,length:s}=Object.keys(n).reduce((l,c,u)=>(l.children[u]=n[c],l.length=Math.max(l.length,n[c].length),l.fields[u]=He.new({name:c,type:n[c].type,nullable:!0}),l),{length:0,fields:new Array,children:new Array}),o=new Be(r),a=zt({type:new Yn(r),length:s,children:i,nullCount:0});[this.schema,this.data]=vM(o,a.children,s);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=nO(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(t){return this.data.getValid(t)}get(t){return mr.visit(this.data,t)}set(t,n){return mi.visit(this.data,t,n)}indexOf(t,n){return dg.visit(this.data,t,n)}getByteLength(t){return Rs.visit(this.data,t)}[Symbol.iterator](){return YI.visit(new Qe([this.data]))}toArray(){return[...this]}concat(...t){return new sp(this.schema,[this,...t])}slice(t,n){const[r]=new Qe([this.data]).slice(t,n).data;return new rh(this.schema,r)}getChild(t){var n;return this.getChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.schema.fields.length?new Qe([this.data.children[t]]):null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=this.data;if(t>-1&&t<this.numCols){n||(n=new Qe([zt({type:new Oa,length:this.numRows})]));const s=r.fields.slice(),o=i.children.slice(),a=s[t].clone({type:n.type});[s[t],o[t]]=[a,n.data[0]],r=new Be(s,new Map(this.schema.metadata)),i=zt({type:new Yn(s),children:o})}return new rh(r,i)}select(t){const n=this.schema.select(t),r=new Yn(n.fields),i=[];for(const s of t){const o=this.schema.fields.findIndex(a=>a.name===s);~o&&(i[o]=this.data.children[o])}return new rh(n,zt({type:r,length:this.numRows,children:i}))}selectAt(t){const n=this.schema.selectAt(t),r=t.map(s=>this.data.children[s]).filter(Boolean),i=zt({type:new Yn(n.fields),length:this.numRows,children:r});return new rh(n,i)}};eO=Symbol.toStringTag;Di[eO]=(e=>(e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(Di.prototype);function vM(e,t,n=t.reduce((r,i)=>Math.max(r,i.length),0)){var r;const i=[...e.fields],s=[...t],o=(n+63&-64)>>3;for(const[a,l]of e.fields.entries()){const c=t[a];(!c||c.length!==n)&&(i[a]=l.clone({nullable:!0}),s[a]=(r=c==null?void 0:c._changeLengthAndBackfillNullBitmap(n))!==null&&r!==void 0?r:zt({type:l.type,length:n,nullCount:n,nullBitmap:new Uint8Array(o)}))}return[e.assign(i),zt({type:new Yn(i),length:n,children:s})]}function nO(e,t,n=new Map){for(let r=-1,i=e.length;++r<i;){const o=e[r].type,a=t[r];if(Bt.isDictionary(o)){if(!n.has(o.id))a.dictionary&&n.set(o.id,a.dictionary);else if(n.get(o.id)!==a.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}o.children&&o.children.length>0&&nO(o.children,a.children,n)}return n}let rO=class extends Di{constructor(t){const n=t.fields.map(i=>zt({type:i.type})),r=zt({type:new Yn(t.fields),nullCount:0,children:n});super(t,r)}};var Sg;(function(e){e[e.BUFFER=0]="BUFFER"})(Sg||(Sg={}));var xg;(function(e){e[e.LZ4_FRAME=0]="LZ4_FRAME",e[e.ZSTD=1]="ZSTD"})(xg||(xg={}));let Wq=class Nl{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBodyCompression(t,n){return(n||new Nl).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBodyCompression(t,n){return t.setPosition(t.position()+me),(n||new Nl).__init(t.readInt32(t.position())+t.position(),t)}codec(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt8(this.bb_pos+t):xg.LZ4_FRAME}method(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt8(this.bb_pos+t):Sg.BUFFER}static startBodyCompression(t){t.startObject(2)}static addCodec(t,n){t.addFieldInt8(0,n,xg.LZ4_FRAME)}static addMethod(t,n){t.addFieldInt8(1,n,Sg.BUFFER)}static endBodyCompression(t){return t.endObject()}static createBodyCompression(t,n,r){return Nl.startBodyCompression(t),Nl.addCodec(t,n),Nl.addMethod(t,r),Nl.endBodyCompression(t)}},iO=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(t,n,r){return t.prep(8,16),t.writeInt64(r),t.writeInt64(n),t.offset()}},sO=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(t,n,r){return t.prep(8,16),t.writeInt64(r),t.writeInt64(n),t.offset()}},ao=class X2{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsRecordBatch(t,n){return(n||new X2).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsRecordBatch(t,n){return t.setPosition(t.position()+me),(n||new X2).__init(t.readInt32(t.position())+t.position(),t)}length(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}nodes(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new sO).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}nodesLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}buffers(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new iO).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}buffersLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}compression(t){const n=this.bb.__offset(this.bb_pos,10);return n?(t||new Wq).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}static startRecordBatch(t){t.startObject(4)}static addLength(t,n){t.addFieldInt64(0,n,t.createLong(0,0))}static addNodes(t,n){t.addFieldOffset(1,n,0)}static startNodesVector(t,n){t.startVector(16,n,8)}static addBuffers(t,n){t.addFieldOffset(2,n,0)}static startBuffersVector(t,n){t.startVector(16,n,8)}static addCompression(t,n){t.addFieldOffset(3,n,0)}static endRecordBatch(t){return t.endObject()}},ou=class Q2{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryBatch(t,n){return(n||new Q2).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryBatch(t,n){return t.setPosition(t.position()+me),(n||new Q2).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}data(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new ao).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isDelta(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startDictionaryBatch(t){t.startObject(3)}static addId(t,n){t.addFieldInt64(0,n,t.createLong(0,0))}static addData(t,n){t.addFieldOffset(1,n,0)}static addIsDelta(t,n){t.addFieldInt8(2,+n,0)}static endDictionaryBatch(t){return t.endObject()}};var Ig;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(Ig||(Ig={}));let Zo=class ss{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMessage(t,n){return(n||new ss).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMessage(t,n){return t.setPosition(t.position()+me),(n||new ss).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):bf.V1}headerType(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):Ig.NONE}header(t){const n=this.bb.__offset(this.bb_pos,8);return n?this.bb.__union(t,this.bb_pos+n):null}bodyLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new si).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startMessage(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,bf.V1)}static addHeaderType(t,n){t.addFieldInt8(1,n,Ig.NONE)}static addHeader(t,n){t.addFieldOffset(2,n,0)}static addBodyLength(t,n){t.addFieldInt64(3,n,t.createLong(0,0))}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endMessage(t){return t.endObject()}static finishMessageBuffer(t,n){t.finish(n)}static finishSizePrefixedMessageBuffer(t,n){t.finish(n,void 0,!0)}static createMessage(t,n,r,i,s,o){return ss.startMessage(t),ss.addVersion(t,n),ss.addHeaderType(t,r),ss.addHeader(t,i),ss.addBodyLength(t,s),ss.addCustomMetadata(t,o),ss.endMessage(t)}};var Hq=To;let Gq=class extends Wt{visit(t,n){return t==null||n==null?void 0:super.visit(t,n)}visitNull(t,n){return hM.startNull(n),hM.endNull(n)}visitInt(t,n){return Eu.startInt(n),Eu.addBitWidth(n,t.bitWidth),Eu.addIsSigned(n,t.isSigned),Eu.endInt(n)}visitFloat(t,n){return sm.startFloatingPoint(n),sm.addPrecision(n,t.precision),sm.endFloatingPoint(n)}visitBinary(t,n){return uM.startBinary(n),uM.endBinary(n)}visitBool(t,n){return fM.startBool(n),fM.endBool(n)}visitUtf8(t,n){return yM.startUtf8(n),yM.endUtf8(n)}visitDecimal(t,n){return tu.startDecimal(n),tu.addScale(n,t.scale),tu.addPrecision(n,t.precision),tu.addBitWidth(n,t.bitWidth),tu.endDecimal(n)}visitDate(t,n){return nm.startDate(n),nm.addUnit(n,t.unit),nm.endDate(n)}visitTime(t,n){return th.startTime(n),th.addUnit(n,t.unit),th.addBitWidth(n,t.bitWidth),th.endTime(n)}visitTimestamp(t,n){const r=t.timezone&&n.createString(t.timezone)||void 0;return eh.startTimestamp(n),eh.addUnit(n,t.unit),r!==void 0&&eh.addTimezone(n,r),eh.endTimestamp(n)}visitInterval(t,n){return om.startInterval(n),om.addUnit(n,t.unit),om.endInterval(n)}visitList(t,n){return dM.startList(n),dM.endList(n)}visitStruct(t,n){return pM.startStruct_(n),pM.endStruct_(n)}visitUnion(t,n){El.startTypeIdsVector(n,t.typeIds.length);const r=El.createTypeIdsVector(n,t.typeIds);return El.startUnion(n),El.addMode(n,t.mode),El.addTypeIds(n,r),El.endUnion(n)}visitDictionary(t,n){const r=this.visit(t.indices,n);return Zc.startDictionaryEncoding(n),Zc.addId(n,new Hq(t.id,0)),Zc.addIsOrdered(n,t.isOrdered),r!==void 0&&Zc.addIndexType(n,r),Zc.endDictionaryEncoding(n)}visitFixedSizeBinary(t,n){return rm.startFixedSizeBinary(n),rm.addByteWidth(n,t.byteWidth),rm.endFixedSizeBinary(n)}visitFixedSizeList(t,n){return im.startFixedSizeList(n),im.addListSize(n,t.listSize),im.endFixedSizeList(n)}visitMap(t,n){return am.startMap(n),am.addKeysSorted(n,t.keysSorted),am.endMap(n)}};const Nw=new Gq;function Xq(e,t=new Map){return new Be(Kq(e,t),cm(e.customMetadata),t)}function oO(e){return new ji(e.count,aO(e.columns),lO(e.columns))}function Qq(e){return new Bo(oO(e.data),e.id,e.isDelta)}function Kq(e,t){return(e.fields||[]).filter(Boolean).map(n=>He.fromJSON(n,t))}function wM(e,t){return(e.children||[]).filter(Boolean).map(n=>He.fromJSON(n,t))}function aO(e){return(e||[]).reduce((t,n)=>[...t,new Jf(n.count,Zq(n.VALIDITY)),...aO(n.children)],[])}function lO(e,t=[]){for(let n=-1,r=(e||[]).length;++n<r;){const i=e[n];i.VALIDITY&&t.push(new vo(t.length,i.VALIDITY.length)),i.TYPE&&t.push(new vo(t.length,i.TYPE.length)),i.OFFSET&&t.push(new vo(t.length,i.OFFSET.length)),i.DATA&&t.push(new vo(t.length,i.DATA.length)),t=lO(i.children,t)}return t}function Zq(e){return(e||[]).reduce((t,n)=>t+ +(n===0),0)}function Jq(e,t){let n,r,i,s,o,a;return!t||!(s=e.dictionary)?(o=SM(e,wM(e,t)),i=new He(e.name,o,e.nullable,cm(e.customMetadata))):t.has(n=s.id)?(r=(r=s.indexType)?_M(r):new np,a=new mf(t.get(n),r,n,s.isOrdered),i=new He(e.name,a,e.nullable,cm(e.customMetadata))):(r=(r=s.indexType)?_M(r):new np,t.set(n,o=SM(e,wM(e,t))),a=new mf(o,r,n,s.isOrdered),i=new He(e.name,a,e.nullable,cm(e.customMetadata))),i||null}function cm(e){return new Map(Object.entries(e||{}))}function _M(e){return new Fa(e.isSigned,e.bitWidth)}function SM(e,t){const n=e.type.name;switch(n){case"NONE":return new Oa;case"null":return new Oa;case"binary":return new tg;case"utf8":return new eg;case"bool":return new ng;case"list":return new ag((t||[])[0]);case"struct":return new Yn(t||[]);case"struct_":return new Yn(t||[])}switch(n){case"int":{const r=e.type;return new Fa(r.isSigned,r.bitWidth)}case"floatingpoint":{const r=e.type;return new rp(dr[r.precision])}case"decimal":{const r=e.type;return new rg(r.scale,r.precision,r.bitWidth)}case"date":{const r=e.type;return new ig(Fo[r.unit])}case"time":{const r=e.type;return new ip(Jt[r.unit],r.bitWidth)}case"timestamp":{const r=e.type;return new sg(Jt[r.unit],r.timezone)}case"interval":{const r=e.type;return new og(ka[r.unit])}case"union":{const r=e.type;return new lg(zi[r.mode],r.typeIds||[],t||[])}case"fixedsizebinary":{const r=e.type;return new cg(r.byteWidth)}case"fixedsizelist":{const r=e.type;return new ug(r.listSize,(t||[])[0])}case"map":{const r=e.type;return new fg((t||[])[0],r.keysSorted)}}throw new Error(`Unrecognized type: "${n}"`)}var hc=To,tW=H8,eW=gf;let Ih=class au{constructor(t,n,r,i){this._version=n,this._headerType=r,this.body=new Uint8Array(0),i&&(this._createHeader=()=>i),this._bodyLength=typeof t=="number"?t:t.low}static fromJSON(t,n){const r=new au(0,ni.V4,n);return r._createHeader=nW(t,n),r}static decode(t){t=new eW(ne(t));const n=Zo.getRootAsMessage(t),r=n.bodyLength(),i=n.version(),s=n.headerType(),o=new au(r,i,s);return o._createHeader=rW(n,s),o}static encode(t){const n=new tW;let r=-1;return t.isSchema()?r=Be.encode(n,t.header()):t.isRecordBatch()?r=ji.encode(n,t.header()):t.isDictionaryBatch()&&(r=Bo.encode(n,t.header())),Zo.startMessage(n),Zo.addVersion(n,ni.V4),Zo.addHeader(n,r),Zo.addHeaderType(n,t.headerType),Zo.addBodyLength(n,new hc(t.bodyLength,0)),Zo.finishMessageBuffer(n,Zo.endMessage(n)),n.asUint8Array()}static from(t,n=0){if(t instanceof Be)return new au(0,ni.V4,ue.Schema,t);if(t instanceof ji)return new au(n,ni.V4,ue.RecordBatch,t);if(t instanceof Bo)return new au(n,ni.V4,ue.DictionaryBatch,t);throw new Error(`Unrecognized Message header: ${t}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===ue.Schema}isRecordBatch(){return this.headerType===ue.RecordBatch}isDictionaryBatch(){return this.headerType===ue.DictionaryBatch}},ji=class{constructor(t,n,r){this._nodes=n,this._buffers=r,this._length=typeof t=="number"?t:t.low}get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}},Bo=class{constructor(t,n,r=!1){this._data=t,this._isDelta=r,this._id=typeof n=="number"?n:n.low}get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}},vo=class{constructor(t,n){this.offset=typeof t=="number"?t:t.low,this.length=typeof n=="number"?n:n.low}},Jf=class{constructor(t,n){this.length=typeof t=="number"?t:t.low,this.nullCount=typeof n=="number"?n:n.low}};function nW(e,t){return()=>{switch(t){case ue.Schema:return Be.fromJSON(e);case ue.RecordBatch:return ji.fromJSON(e);case ue.DictionaryBatch:return Bo.fromJSON(e)}throw new Error(`Unrecognized Message type: { name: ${ue[t]}, type: ${t} }`)}}function rW(e,t){return()=>{switch(t){case ue.Schema:return Be.decode(e.header(new ls));case ue.RecordBatch:return ji.decode(e.header(new ao),e.version());case ue.DictionaryBatch:return Bo.decode(e.header(new ou),e.version())}throw new Error(`Unrecognized Message type: { name: ${ue[t]}, type: ${t} }`)}}He.encode=pW;He.decode=dW;He.fromJSON=Jq;Be.encode=hW;Be.decode=iW;Be.fromJSON=Xq;ji.encode=yW;ji.decode=sW;ji.fromJSON=oO;Bo.encode=mW;Bo.decode=oW;Bo.fromJSON=Qq;Jf.encode=gW;Jf.decode=lW;vo.encode=bW;vo.decode=aW;function iW(e,t=new Map){const n=fW(e,t);return new Be(n,um(e),t)}function sW(e,t=ni.V4){if(e.compression()!==null)throw new Error("Record batch compression not implemented");return new ji(e.length(),cW(e),uW(e,t))}function oW(e,t=ni.V4){return new Bo(ji.decode(e.data(),t),e.id(),e.isDelta())}function aW(e){return new vo(e.offset(),e.length())}function lW(e){return new Jf(e.length(),e.nullCount())}function cW(e){const t=[];for(let n,r=-1,i=-1,s=e.nodesLength();++r<s;)(n=e.nodes(r))&&(t[++i]=Jf.decode(n));return t}function uW(e,t){const n=[];for(let r,i=-1,s=-1,o=e.buffersLength();++i<o;)(r=e.buffers(i))&&(t<ni.V4&&(r.bb_pos+=8*(i+1)),n[++s]=vo.decode(r));return n}function fW(e,t){const n=[];for(let r,i=-1,s=-1,o=e.fieldsLength();++i<o;)(r=e.fields(i))&&(n[++s]=He.decode(r,t));return n}function xM(e,t){const n=[];for(let r,i=-1,s=-1,o=e.childrenLength();++i<o;)(r=e.children(i))&&(n[++s]=He.decode(r,t));return n}function dW(e,t){let n,r,i,s,o,a;return!t||!(a=e.dictionary())?(i=TM(e,xM(e,t)),r=new He(e.name(),i,e.nullable(),um(e))):t.has(n=a.id().low)?(s=(s=a.indexType())?IM(s):new np,o=new mf(t.get(n),s,n,a.isOrdered()),r=new He(e.name(),o,e.nullable(),um(e))):(s=(s=a.indexType())?IM(s):new np,t.set(n,i=TM(e,xM(e,t))),o=new mf(i,s,n,a.isOrdered()),r=new He(e.name(),o,e.nullable(),um(e))),r||null}function um(e){const t=new Map;if(e)for(let n,r,i=-1,s=Math.trunc(e.customMetadataLength());++i<s;)(n=e.customMetadata(i))&&(r=n.key())!=null&&t.set(r,n.value());return t}function IM(e){return new Fa(e.isSigned(),e.bitWidth())}function TM(e,t){const n=e.typeType();switch(n){case ke.NONE:return new Oa;case ke.Null:return new Oa;case ke.Binary:return new tg;case ke.Utf8:return new eg;case ke.Bool:return new ng;case ke.List:return new ag((t||[])[0]);case ke.Struct_:return new Yn(t||[])}switch(n){case ke.Int:{const r=e.type(new Eu);return new Fa(r.isSigned(),r.bitWidth())}case ke.FloatingPoint:{const r=e.type(new sm);return new rp(r.precision())}case ke.Decimal:{const r=e.type(new tu);return new rg(r.scale(),r.precision(),r.bitWidth())}case ke.Date:{const r=e.type(new nm);return new ig(r.unit())}case ke.Time:{const r=e.type(new th);return new ip(r.unit(),r.bitWidth())}case ke.Timestamp:{const r=e.type(new eh);return new sg(r.unit(),r.timezone())}case ke.Interval:{const r=e.type(new om);return new og(r.unit())}case ke.Union:{const r=e.type(new El);return new lg(r.mode(),r.typeIdsArray()||[],t||[])}case ke.FixedSizeBinary:{const r=e.type(new rm);return new cg(r.byteWidth())}case ke.FixedSizeList:{const r=e.type(new im);return new ug(r.listSize(),(t||[])[0])}case ke.Map:{const r=e.type(new am);return new fg((t||[])[0],r.keysSorted())}}throw new Error(`Unrecognized type: "${ke[n]}" (${n})`)}function hW(e,t){const n=t.fields.map(s=>He.encode(e,s));ls.startFieldsVector(e,n.length);const r=ls.createFieldsVector(e,n),i=t.metadata&&t.metadata.size>0?ls.createCustomMetadataVector(e,[...t.metadata].map(([s,o])=>{const a=e.createString(`${s}`),l=e.createString(`${o}`);return si.startKeyValue(e),si.addKey(e,a),si.addValue(e,l),si.endKeyValue(e)})):-1;return ls.startSchema(e),ls.addFields(e,r),ls.addEndianness(e,vW?vf.Little:vf.Big),i!==-1&&ls.addCustomMetadata(e,i),ls.endSchema(e)}function pW(e,t){let n=-1,r=-1,i=-1;const s=t.type;let o=t.typeId;Bt.isDictionary(s)?(o=s.dictionary.typeId,i=Nw.visit(s,e),r=Nw.visit(s.dictionary,e)):r=Nw.visit(s,e);const a=(s.children||[]).map(u=>He.encode(e,u)),l=Gr.createChildrenVector(e,a),c=t.metadata&&t.metadata.size>0?Gr.createCustomMetadataVector(e,[...t.metadata].map(([u,f])=>{const d=e.createString(`${u}`),h=e.createString(`${f}`);return si.startKeyValue(e),si.addKey(e,d),si.addValue(e,h),si.endKeyValue(e)})):-1;return t.name&&(n=e.createString(t.name)),Gr.startField(e),Gr.addType(e,r),Gr.addTypeType(e,o),Gr.addChildren(e,l),Gr.addNullable(e,!!t.nullable),n!==-1&&Gr.addName(e,n),i!==-1&&Gr.addDictionary(e,i),c!==-1&&Gr.addCustomMetadata(e,c),Gr.endField(e)}function yW(e,t){const n=t.nodes||[],r=t.buffers||[];ao.startNodesVector(e,n.length);for(const o of n.slice().reverse())Jf.encode(e,o);const i=e.endVector();ao.startBuffersVector(e,r.length);for(const o of r.slice().reverse())vo.encode(e,o);const s=e.endVector();return ao.startRecordBatch(e),ao.addLength(e,new hc(t.length,0)),ao.addNodes(e,i),ao.addBuffers(e,s),ao.endRecordBatch(e)}function mW(e,t){const n=ji.encode(e,t.data);return ou.startDictionaryBatch(e),ou.addId(e,new hc(t.id,0)),ou.addIsDelta(e,t.isDelta),ou.addData(e,n),ou.endDictionaryBatch(e)}function gW(e,t){return sO.createFieldNode(e,new hc(t.length,0),new hc(t.nullCount,0))}function bW(e,t){return iO.createBuffer(e,new hc(t.offset,0),new hc(t.length,0))}const vW=(()=>{const e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),new Int16Array(e)[0]===256})(),QI=e=>`Expected ${ue[e]} Message in stream, but was null or length 0.`,KI=e=>`Header pointer of flatbuffer-encoded ${ue[e]} Message is null or length 0.`,cO=(e,t)=>`Expected to read ${e} metadata bytes, but only read ${t}.`,uO=(e,t)=>`Expected to read ${e} bytes for message body, but only read ${t}.`;let fO=class{constructor(t){this.source=t instanceof vg?t:new vg(t)}[Symbol.iterator](){return this}next(){let t;return(t=this.readMetadataLength()).done||t.value===-1&&(t=this.readMetadataLength()).done||(t=this.readMetadata(t.value)).done?Re:t}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}readMessage(t){let n;if((n=this.next()).done)return null;if(t!=null&&n.value.headerType!==t)throw new Error(QI(t));return n.value}readMessageBody(t){if(t<=0)return new Uint8Array(0);const n=ne(this.source.read(t));if(n.byteLength<t)throw new Error(uO(t,n.byteLength));return n.byteOffset%8===0&&n.byteOffset+n.byteLength<=n.buffer.byteLength?n:n.slice()}readSchema(t=!1){const n=ue.Schema,r=this.readMessage(n),i=r==null?void 0:r.header();if(t&&!i)throw new Error(KI(n));return i}readMetadataLength(){const t=this.source.read(Ub),n=t&&new gf(t),r=(n==null?void 0:n.readInt32(0))||0;return{done:r===0,value:r}}readMetadata(t){const n=this.source.read(t);if(!n)return Re;if(n.byteLength<t)throw new Error(cO(t,n.byteLength));return{done:!1,value:Ih.decode(n)}}},wW=class{constructor(t,n){this.source=t instanceof wg?t:Tk(t)?new _g(t,n):new wg(t)}[Symbol.asyncIterator](){return this}next(){return W(this,void 0,void 0,function*(){let t;return(t=yield this.readMetadataLength()).done||t.value===-1&&(t=yield this.readMetadataLength()).done||(t=yield this.readMetadata(t.value)).done?Re:t})}throw(t){return W(this,void 0,void 0,function*(){return yield this.source.throw(t)})}return(t){return W(this,void 0,void 0,function*(){return yield this.source.return(t)})}readMessage(t){return W(this,void 0,void 0,function*(){let n;if((n=yield this.next()).done)return null;if(t!=null&&n.value.headerType!==t)throw new Error(QI(t));return n.value})}readMessageBody(t){return W(this,void 0,void 0,function*(){if(t<=0)return new Uint8Array(0);const n=ne(yield this.source.read(t));if(n.byteLength<t)throw new Error(uO(t,n.byteLength));return n.byteOffset%8===0&&n.byteOffset+n.byteLength<=n.buffer.byteLength?n:n.slice()})}readSchema(t=!1){return W(this,void 0,void 0,function*(){const n=ue.Schema,r=yield this.readMessage(n),i=r==null?void 0:r.header();if(t&&!i)throw new Error(KI(n));return i})}readMetadataLength(){return W(this,void 0,void 0,function*(){const t=yield this.source.read(Ub),n=t&&new gf(t),r=(n==null?void 0:n.readInt32(0))||0;return{done:r===0,value:r}})}readMetadata(t){return W(this,void 0,void 0,function*(){const n=yield this.source.read(t);if(!n)return Re;if(n.byteLength<t)throw new Error(cO(t,n.byteLength));return{done:!1,value:Ih.decode(n)}})}},_W=class extends fO{constructor(t){super(new Uint8Array(0)),this._schema=!1,this._body=[],this._batchIndex=0,this._dictionaryIndex=0,this._json=t instanceof gM?t:new gM(t)}next(){const{_json:t}=this;if(!this._schema)return this._schema=!0,{done:!1,value:Ih.fromJSON(t.schema,ue.Schema)};if(this._dictionaryIndex<t.dictionaries.length){const n=t.dictionaries[this._dictionaryIndex++];return this._body=n.data.columns,{done:!1,value:Ih.fromJSON(n,ue.DictionaryBatch)}}if(this._batchIndex<t.batches.length){const n=t.batches[this._batchIndex++];return this._body=n.columns,{done:!1,value:Ih.fromJSON(n,ue.RecordBatch)}}return this._body=[],Re}readMessageBody(t){return n(this._body);function n(r){return(r||[]).reduce((i,s)=>[...i,...s.VALIDITY&&[s.VALIDITY]||[],...s.TYPE&&[s.TYPE]||[],...s.OFFSET&&[s.OFFSET]||[],...s.DATA&&[s.DATA]||[],...n(s.children)],[])}}readMessage(t){let n;if((n=this.next()).done)return null;if(t!=null&&n.value.headerType!==t)throw new Error(QI(t));return n.value}readSchema(){const t=ue.Schema,n=this.readMessage(t),r=n==null?void 0:n.header();if(!n||!r)throw new Error(KI(t));return r}};const Ub=4,K2="ARROW1",Tg=new Uint8Array(K2.length);for(let e=0;e<K2.length;e+=1)Tg[e]=K2.codePointAt(e);function ZI(e,t=0){for(let n=-1,r=Tg.length;++n<r;)if(Tg[n]!==e[t+n])return!1;return!0}const Qp=Tg.length,dO=Qp+Ub,SW=Qp*2+Ub;let Kp=class fm extends Q8{constructor(t){super(),this._impl=t}get closed(){return this._impl.closed}get schema(){return this._impl.schema}get autoDestroy(){return this._impl.autoDestroy}get dictionaries(){return this._impl.dictionaries}get numDictionaries(){return this._impl.numDictionaries}get numRecordBatches(){return this._impl.numRecordBatches}get footer(){return this._impl.isFile()?this._impl.footer:null}isSync(){return this._impl.isSync()}isAsync(){return this._impl.isAsync()}isFile(){return this._impl.isFile()}isStream(){return this._impl.isStream()}next(){return this._impl.next()}throw(t){return this._impl.throw(t)}return(t){return this._impl.return(t)}cancel(){return this._impl.cancel()}reset(t){return this._impl.reset(t),this._DOMStream=void 0,this._nodeStream=void 0,this}open(t){const n=this._impl.open(t);return Jh(n)?n.then(()=>this):this}readRecordBatch(t){return this._impl.isFile()?this._impl.readRecordBatch(t):null}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}toDOMStream(){return Qr.toDOMStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this})}toNodeStream(){return Qr.toNodeStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this},{objectMode:!0})}static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,n){throw new Error('"throughDOM" not available in this environment')}static from(t){return t instanceof fm?t:B2(t)?EW(t):Tk(t)?$W(t):Jh(t)?W(this,void 0,void 0,function*(){return yield fm.from(yield t)}):Ek(t)||FI(t)||Mk(t)||OI(t)?MW(new wg(t)):AW(new vg(t))}static readAll(t){return t instanceof fm?t.isSync()?EM(t):AM(t):B2(t)||ArrayBuffer.isView(t)||Rb(t)||Ik(t)?EM(t):AM(t)}},Eg=class extends Kp{constructor(t){super(t),this._impl=t}readAll(){return[...this]}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return en(this,arguments,function*(){yield K(yield*Ma(Fr(this[Symbol.iterator]())))})}},Ag=class extends Kp{constructor(t){super(t),this._impl=t}readAll(){var t,n;return W(this,void 0,void 0,function*(){const r=new Array;try{for(var i=Fr(this),s;s=yield i.next(),!s.done;){const o=s.value;r.push(o)}}catch(o){t={error:o}}finally{try{s&&!s.done&&(n=i.return)&&(yield n.call(i))}finally{if(t)throw t.error}}return r})}[Symbol.iterator](){throw new Error("AsyncRecordBatchStreamReader is not Iterable")}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}},hO=class extends Eg{constructor(t){super(t),this._impl=t}},xW=class extends Ag{constructor(t){super(t),this._impl=t}},pO=class{constructor(t=new Map){this.closed=!1,this.autoDestroy=!0,this._dictionaryIndex=0,this._recordBatchIndex=0,this.dictionaries=t}get numDictionaries(){return this._dictionaryIndex}get numRecordBatches(){return this._recordBatchIndex}isSync(){return!1}isAsync(){return!1}isFile(){return!1}isStream(){return!1}reset(t){return this._dictionaryIndex=0,this._recordBatchIndex=0,this.schema=t,this.dictionaries=new Map,this}_loadRecordBatch(t,n){const r=this._loadVectors(t,n,this.schema.fields),i=zt({type:new Yn(this.schema.fields),length:t.length,children:r});return new Di(this.schema,i)}_loadDictionaryBatch(t,n){const{id:r,isDelta:i}=t,{dictionaries:s,schema:o}=this,a=s.get(r);if(i||!a){const l=o.dictionaries.get(r),c=this._loadVectors(t.data,n,[l]);return(a&&i?a.concat(new Qe(c)):new Qe(c)).memoize()}return a.memoize()}_loadVectors(t,n,r){return new J8(n,t.nodes,t.buffers,this.dictionaries).visitMany(r)}},Mg=class extends pO{constructor(t,n){super(n),this._reader=B2(t)?new _W(this._handle=t):new fO(this._handle=t)}isSync(){return!0}isStream(){return!0}[Symbol.iterator](){return this}cancel(){!this.closed&&(this.closed=!0)&&(this.reset()._reader.return(),this._reader=null,this.dictionaries=null)}open(t){return this.closed||(this.autoDestroy=mO(this,t),this.schema||(this.schema=this._reader.readSchema())||this.cancel()),this}throw(t){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.throw(t):Re}return(t){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.return(t):Re}next(){if(this.closed)return Re;let t;const{_reader:n}=this;for(;t=this._readNextMessageAndValidate();)if(t.isSchema())this.reset(t.header());else if(t.isRecordBatch()){this._recordBatchIndex++;const r=t.header(),i=n.readMessageBody(t.bodyLength);return{done:!1,value:this._loadRecordBatch(r,i)}}else if(t.isDictionaryBatch()){this._dictionaryIndex++;const r=t.header(),i=n.readMessageBody(t.bodyLength),s=this._loadDictionaryBatch(r,i);this.dictionaries.set(r.id,s)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new rO(this.schema)}):this.return()}_readNextMessageAndValidate(t){return this._reader.readMessage(t)}},$g=class extends pO{constructor(t,n){super(n),this._reader=new wW(this._handle=t)}isAsync(){return!0}isStream(){return!0}[Symbol.asyncIterator](){return this}cancel(){return W(this,void 0,void 0,function*(){!this.closed&&(this.closed=!0)&&(yield this.reset()._reader.return(),this._reader=null,this.dictionaries=null)})}open(t){return W(this,void 0,void 0,function*(){return this.closed||(this.autoDestroy=mO(this,t),this.schema||(this.schema=yield this._reader.readSchema())||(yield this.cancel())),this})}throw(t){return W(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.throw(t):Re})}return(t){return W(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.return(t):Re})}next(){return W(this,void 0,void 0,function*(){if(this.closed)return Re;let t;const{_reader:n}=this;for(;t=yield this._readNextMessageAndValidate();)if(t.isSchema())yield this.reset(t.header());else if(t.isRecordBatch()){this._recordBatchIndex++;const r=t.header(),i=yield n.readMessageBody(t.bodyLength);return{done:!1,value:this._loadRecordBatch(r,i)}}else if(t.isDictionaryBatch()){this._dictionaryIndex++;const r=t.header(),i=yield n.readMessageBody(t.bodyLength),s=this._loadDictionaryBatch(r,i);this.dictionaries.set(r.id,s)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new rO(this.schema)}):yield this.return()})}_readNextMessageAndValidate(t){return W(this,void 0,void 0,function*(){return yield this._reader.readMessage(t)})}},yO=class extends Mg{constructor(t,n){super(t instanceof bM?t:new bM(t),n)}get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}isSync(){return!0}isFile(){return!0}open(t){if(!this.closed&&!this._footer){this.schema=(this._footer=this._readFooter()).schema;for(const n of this._footer.dictionaryBatches())n&&this._readDictionaryBatch(this._dictionaryIndex++)}return super.open(t)}readRecordBatch(t){var n;if(this.closed)return null;this._footer||this.open();const r=(n=this._footer)===null||n===void 0?void 0:n.getRecordBatch(t);if(r&&this._handle.seek(r.offset)){const i=this._reader.readMessage(ue.RecordBatch);if(i!=null&&i.isRecordBatch()){const s=i.header(),o=this._reader.readMessageBody(i.bodyLength);return this._loadRecordBatch(s,o)}}return null}_readDictionaryBatch(t){var n;const r=(n=this._footer)===null||n===void 0?void 0:n.getDictionaryBatch(t);if(r&&this._handle.seek(r.offset)){const i=this._reader.readMessage(ue.DictionaryBatch);if(i!=null&&i.isDictionaryBatch()){const s=i.header(),o=this._reader.readMessageBody(i.bodyLength),a=this._loadDictionaryBatch(s,o);this.dictionaries.set(s.id,a)}}}_readFooter(){const{_handle:t}=this,n=t.size-dO,r=t.readInt32(n),i=t.readAt(n-r,r);return qI.decode(i)}_readNextMessageAndValidate(t){var n;if(this._footer||this.open(),this._footer&&this._recordBatchIndex<this.numRecordBatches){const r=(n=this._footer)===null||n===void 0?void 0:n.getRecordBatch(this._recordBatchIndex);if(r&&this._handle.seek(r.offset))return this._reader.readMessage(t)}return null}},IW=class extends $g{constructor(t,...n){const r=typeof n[0]!="number"?n.shift():void 0,i=n[0]instanceof Map?n.shift():void 0;super(t instanceof _g?t:new _g(t,r),i)}get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}isFile(){return!0}isAsync(){return!0}open(t){const n=Object.create(null,{open:{get:()=>super.open}});return W(this,void 0,void 0,function*(){if(!this.closed&&!this._footer){this.schema=(this._footer=yield this._readFooter()).schema;for(const r of this._footer.dictionaryBatches())r&&(yield this._readDictionaryBatch(this._dictionaryIndex++))}return yield n.open.call(this,t)})}readRecordBatch(t){var n;return W(this,void 0,void 0,function*(){if(this.closed)return null;this._footer||(yield this.open());const r=(n=this._footer)===null||n===void 0?void 0:n.getRecordBatch(t);if(r&&(yield this._handle.seek(r.offset))){const i=yield this._reader.readMessage(ue.RecordBatch);if(i!=null&&i.isRecordBatch()){const s=i.header(),o=yield this._reader.readMessageBody(i.bodyLength);return this._loadRecordBatch(s,o)}}return null})}_readDictionaryBatch(t){var n;return W(this,void 0,void 0,function*(){const r=(n=this._footer)===null||n===void 0?void 0:n.getDictionaryBatch(t);if(r&&(yield this._handle.seek(r.offset))){const i=yield this._reader.readMessage(ue.DictionaryBatch);if(i!=null&&i.isDictionaryBatch()){const s=i.header(),o=yield this._reader.readMessageBody(i.bodyLength),a=this._loadDictionaryBatch(s,o);this.dictionaries.set(s.id,a)}}})}_readFooter(){return W(this,void 0,void 0,function*(){const{_handle:t}=this;t._pending&&(yield t._pending);const n=t.size-dO,r=yield t.readInt32(n),i=yield t.readAt(n-r,r);return qI.decode(i)})}_readNextMessageAndValidate(t){return W(this,void 0,void 0,function*(){if(this._footer||(yield this.open()),this._footer&&this._recordBatchIndex<this.numRecordBatches){const n=this._footer.getRecordBatch(this._recordBatchIndex);if(n&&(yield this._handle.seek(n.offset)))return yield this._reader.readMessage(t)}return null})}},TW=class extends Mg{constructor(t,n){super(t,n)}_loadVectors(t,n,r){return new Bq(n,t.nodes,t.buffers,this.dictionaries).visitMany(r)}};function mO(e,t){return t&&typeof t.autoDestroy=="boolean"?t.autoDestroy:e.autoDestroy}function*EM(e){const t=Kp.from(e);try{if(!t.open({autoDestroy:!1}).closed)do yield t;while(!t.reset().open().closed)}finally{t.cancel()}}function AM(e){return en(this,arguments,function*(){const n=yield K(Kp.from(e));try{if(!(yield K(n.open({autoDestroy:!1}))).closed)do yield yield K(n);while(!(yield K(n.reset().open())).closed)}finally{yield K(n.cancel())}})}function EW(e){return new Eg(new TW(e))}function AW(e){const t=e.peek(Qp+7&-8);return t&&t.byteLength>=4?ZI(t)?new hO(new yO(e.read())):new Eg(new Mg(e)):new Eg(new Mg(function*(){}()))}function MW(e){return W(this,void 0,void 0,function*(){const t=yield e.peek(Qp+7&-8);return t&&t.byteLength>=4?ZI(t)?new hO(new yO(yield e.read())):new Ag(new $g(e)):new Ag(new $g(function(){return en(this,arguments,function*(){})}()))})}function $W(e){return W(this,void 0,void 0,function*(){const{size:t}=yield e.stat(),n=new _g(e,t);return t>=SW&&ZI(yield n.readAt(0,Qp+7&-8))?new xW(new IW(n)):new Ag(new $g(n))})}function gO(e){const t=Kp.from(e);return Jh(t)?t.then(n=>gO(n)):t.isAsync()?t.readAll().then(n=>new sp(n)):new sp(t.readAll())}function NW(e="ws://localhost:3000/"){const t=[];let n=!1,r=null,i;const s={open(){n=!0,l()},close(){for(n=!1,r=null,i=null;t.length;)t.shift().reject("Socket closed")},error(c){if(r){const{reject:u}=r;r=null,l(),u(c)}else console.error("WebSocket error: ",c)},message({data:c}){if(r){const{query:u,resolve:f,reject:d}=r;if(r=null,l(),typeof c=="string"){const h=JSON.parse(c);h.error?d(h.error):f(h)}else if(u.type==="exec")f();else if(u.type==="arrow")f(gO(c.arrayBuffer()));else throw new Error(`Unexpected socket data: ${c}`)}else console.log("WebSocket message: ",c)}};function o(){i=new WebSocket(e);for(const c in s)i.addEventListener(c,s[c])}function a(c,u,f){i==null&&o(),t.push({query:c,resolve:u,reject:f}),n&&!r&&l()}function l(){t.length&&(r=t.shift(),i.send(JSON.stringify(r.query)))}return{get connected(){return n},query(c){return new Promise((u,f)=>a(c,u,f))}}}class Ra{constructor(t,n){t&&(this.table=String(t)),n&&(this.column=n)}get columns(){return this.column?[this.column]:[]}toString(){const{table:t,column:n}=this;if(n){const r=n.startsWith("*")?n:`"${n}"`;return`${t?`${MM(t)}.`:""}${r}`}else return t?MM(t):"NULL"}}function MM(e){return e.split(".").map(n=>`"${n}"`).join(".")}function DW(e,t){return e instanceof Ra&&e.column===t}function Me(e){return typeof e=="string"?JI(e):e}function dm(e){return typeof e=="string"?kW(e):e}function kW(e){return new Ra(e)}function JI(e,t){return arguments.length===1&&(t=e,e=null),new Ra(e,t)}function Zp(e){switch(typeof e){case"boolean":return e?"TRUE":"FALSE";case"string":return`'${e}'`;case"number":return Number.isFinite(e)?String(e):"NULL";default:if(e==null)return"NULL";if(e instanceof Date){const t=+e;if(Number.isNaN(t))return"NULL";const n=e.getUTCFullYear(),r=e.getUTCMonth(),i=e.getUTCDate();return t===Date.UTC(n,r,i)?`MAKE_DATE(${n}, ${r+1}, ${i})`:`EPOCH_MS(${t})`}else return e instanceof RegExp?`'${e.source}'`:String(e)}}const Sf=e=>typeof(e==null?void 0:e.addEventListener)=="function";function bO(e){return e instanceof Pb}class Pb{constructor(t,n,r){this._expr=Array.isArray(t)?t:[t],this._deps=n||[],this.annotate(r);const i=this._expr.filter(s=>Sf(s));i.length>0?(this._params=Array.from(new Set(i)),this._params.forEach(s=>{s.addEventListener("value",()=>{var o;return OW(this,(o=this.map)==null?void 0:o.get("value"))})})):this.addEventListener=void 0}get value(){return this}get columns(){const{_params:t,_deps:n}=this;if(t){const r=new Set(t.flatMap(i=>{var o;const s=(o=i.value)==null?void 0:o.columns;return Array.isArray(s)?s:[]}));if(r.size){const i=new Set(n);return r.forEach(s=>i.add(s)),Array.from(i)}}return n}get column(){return this._deps.length?this._deps[0]:this.columns[0]}annotate(...t){return Object.assign(this,...t)}toString(){return this._expr.map(t=>Sf(t)&&!bO(t)?Zp(t.value):t).join("")}addEventListener(t,n){const r=this.map||(this.map=new Map);(r.get(t)||(r.set(t,new Set),r.get(t))).add(n)}}function OW(e,t){if(t!=null&&t.size)return Promise.allSettled(Array.from(t,n=>n(e)))}function vO(e,t){const n=[e[0]],r=new Set,i=t.length;for(let s=0,o=0;s<i;){const a=t[s];Sf(a)?n[++o]=a:(Array.isArray(a==null?void 0:a.columns)&&a.columns.forEach(c=>r.add(c)),n[o]+=typeof a=="string"?a:Zp(a));const l=e[++s];Sf(n[o])?n[++o]=l:n[o]+=l}return{spans:n,cols:Array.from(r)}}function G(e,...t){const{spans:n,cols:r}=vO(e,t);return new Pb(n,r)}function FW(e){const t=Me(e);return G`${t} DESC NULLS LAST`.annotate({label:t==null?void 0:t.label,desc:!0})}const Jp=e=>({value:e,toString:()=>Zp(e)});function zb(e){var t;e(this.op,this),(t=this.children)==null||t.forEach(n=>n.visit(e))}function wO(e,t){const n=t.filter(i=>i!=null).map(Me),r=n.map((i,s)=>s?` ${e} `:"");return t.length&&r.push(""),G(r,...n).annotate({op:e,children:n,visit:zb})}const pc=(...e)=>wO("AND",e.flat()),_O=(...e)=>wO("OR",e.flat()),SO=e=>t=>G`(${Me(t)} ${e})`.annotate({op:e,a:t,visit:zb}),xO=SO("IS NULL"),Ng=SO("IS NOT NULL"),td=e=>(t,n)=>G`(${Me(t)} ${e} ${Me(n)})`.annotate({op:e,a:t,b:n,visit:zb}),t3=td("="),BW=td("<>"),Dg=td("<"),IO=td(">"),kg=td("<="),RW=td("IS NOT DISTINCT FROM");function LW(e,t,n,r){t=Me(t);const i=e.startsWith("NOT ")?"NOT ":"";return(n?r?G`${i}(${n[0]} <= ${t} AND ${t} < ${n[1]})`:G`(${t} ${e} ${n[0]} AND ${n[1]})`:G``).annotate({op:e,visit:zb,field:t,range:n})}const Rr=(e,t,n)=>LW("BETWEEN",e,t,n);function Og(e,t){return Array.from({length:e},()=>t)}function jb(e,t){return(...n)=>{const r=n.map(Me),i=t?`::${t}`:"";return(r.length?G([`${e}(`,...Og(r.length-1,", "),`)${i}`],...r):G`${e}()${i}`).annotate({func:e,args:r})}}const CW=jb("REGEXP_MATCHES"),UW=jb("CONTAINS"),PW=jb("PREFIX"),zW=jb("SUFFIX");class Ol extends Pb{constructor(t,n,r,i,s="",o="",a=""){let l;if(i&&!(s||o||a))l=i?G`${n} OVER "${i}"`:G`${n} OVER ()`;else{const d=s&&o?" ":"",h=(s||o)&&a?" ":"";l=G`${n} OVER (${i?`"${i}" `:""}${s}${d}${o}${h}${a})`}r&&(l=G`(${l})::${r}`);const{_expr:u,_deps:f}=l;super(u,f,{window:t,func:n,type:r,name:i,group:s,order:o,frame:a})}get basis(){return this.column}get label(){const{func:t}=this;return t.label??t.toString()}over(t){const{window:n,func:r,type:i,group:s,order:o,frame:a}=this;return new Ol(n,r,i,t,s,o,a)}partitionby(...t){const n=t.flat().filter(u=>u).map(Me),r=G(["PARTITION BY ",Og(n.length-1,", "),""],...n),{window:i,func:s,type:o,name:a,order:l,frame:c}=this;return new Ol(i,s,o,a,r,l,c)}orderby(...t){const n=t.flat().filter(u=>u).map(Me),r=G(["ORDER BY ",Og(n.length-1,", "),""],...n),{window:i,func:s,type:o,name:a,group:l,frame:c}=this;return new Ol(i,s,o,a,l,r,c)}rows(t){const n=$M("ROWS",t),{window:r,func:i,type:s,name:o,group:a,order:l}=this;return new Ol(r,i,s,o,a,l,n)}range(t){const n=$M("RANGE",t),{window:r,func:i,type:s,name:o,group:a,order:l}=this;return new Ol(r,i,s,o,a,l,n)}}function $M(e,t){if(Sf(t)){const n=G`${t}`;return n.toString=()=>`${e} ${NM(t.value)}`,n}return`${e} ${NM(t)}`}function NM(e){const[t,n]=e,r=t===0?"CURRENT ROW":Number.isFinite(t)?`${Math.abs(t)} PRECEDING`:"UNBOUNDED PRECEDING",i=n===0?"CURRENT ROW":Number.isFinite(n)?`${Math.abs(n)} FOLLOWING`:"UNBOUNDED FOLLOWING";return`BETWEEN ${r} AND ${i}`}class Th extends Pb{constructor(t,n,r,i,s){n=(n||[]).map(Me);const{strings:o,exprs:a}=jW(t,n,r,i,s),{spans:l,cols:c}=vO(o,a);super(l,c,{aggregate:t,args:n,type:r,isDistinct:i,filter:s})}get basis(){return this.column}get label(){const{aggregate:t,args:n,isDistinct:r}=this,i=r?"DISTINCT"+(n.length?" ":""):"",s=n.length?`(${i}${n.map(VW).join(", ")})`:"";return`${t.toLowerCase()}${s}`}distinct(){const{aggregate:t,args:n,type:r,filter:i}=this;return new Th(t,n,r,!0,i)}where(t){const{aggregate:n,args:r,type:i,isDistinct:s}=this;return new Th(n,r,i,s,t)}window(){const{aggregate:t,args:n,type:r,isDistinct:i}=this,s=new Th(t,n,null,i);return new Ol(t,s,r)}partitionby(...t){return this.window().partitionby(...t)}orderby(...t){return this.window().orderby(...t)}rows(t,n){return this.window().rows(t,n)}range(t,n){return this.window().range(t,n)}}function jW(e,t,n,r,i){const s=`)${n?`::${n}`:""}`;let o=[`${e}(${r?"DISTINCT ":""}`],a=[];return t.length?(o=o.concat([...Og(t.length-1,", "),`${s}${i?" FILTER (WHERE ":""}`,...i?[")"]:[]]),a=[...t,...i?[i]:[]]):o[0]+="*"+s,{exprs:a,strings:o}}function VW(e){const t=Zp(e);return t&&t.startsWith('"')&&t.endsWith('"')?t.slice(1,-1):t}function wi(e,t){return(...n)=>new Th(e,n,t)}const hr=wi("COUNT","INTEGER"),op=wi("MAX"),ap=wi("MIN"),ed=wi("SUM","DOUBLE"),YW=wi("REGR_INTERCEPT"),qW=wi("REGR_SLOPE"),WW=wi("REGR_COUNT"),HW=wi("REGR_SYY"),GW=wi("REGR_SXX"),XW=wi("REGR_AVGX"),DM=wi("ARG_MIN"),kM=wi("ARG_MAX");function QW(e,t){const n=Me(e),r=G`CAST(${n} AS ${t})`;return Object.defineProperty(r,"label",{enumerable:!0,get(){return e.label}}),Object.defineProperty(r,"aggregate",{enumerable:!0,get(){return e.aggregate||!1}}),r}const OM=e=>QW(e,"DOUBLE"),TO=e=>{const t=Me(e);return G`(1000 * (epoch(${t}) - second(${t})) + millisecond(${t}))::DOUBLE`},KW=e=>{const t=Me(e);return G`MAKE_DATE(2012, MONTH(${t}), DAY(${t}))`.annotate({label:"date"})};class Lt{static select(...t){return new Lt().select(...t)}static from(...t){return new Lt().from(...t)}static with(...t){return new Lt().with(...t)}static union(...t){return new Cl("UNION",t.flat())}static unionAll(...t){return new Cl("UNION ALL",t.flat())}static intersect(...t){return new Cl("INTERSECT",t.flat())}static except(...t){return new Cl("EXCEPT",t.flat())}constructor(){this.query={with:[],select:[],from:[],where:[],groupby:[],having:[],window:[],qualify:[],orderby:[]}}clone(){const t=new Lt;return t.query={...this.query},t}with(...t){const{query:n}=this;if(t.length===0)return n.with;{const r=[],i=(s,o)=>{const a=o.clone();a.cteFor=this,r.push({as:s,query:a})};return t.flat().forEach(s=>{if(s!=null)if(s.as&&s.query)i(s.as,s.query);else for(const o in s)i(o,s[o])}),n.with=n.with.concat(r),this}}select(...t){const{query:n}=this;if(t.length===0)return n.select;{const r=[];for(const i of t.flat())if(i!=null)if(typeof i=="string")r.push({as:i,expr:Me(i)});else if(i instanceof Ra)r.push({as:i.column,expr:i});else if(Array.isArray(i))r.push({as:i[0],expr:i[1]});else for(const s in i)r.push({as:l0(s),expr:Me(i[s])});return n.select=n.select.concat(r),this}}$select(...t){return this.query.select=[],this.select(...t)}distinct(t=!0){return this.query.distinct=!!t,this}from(...t){const{query:n}=this;if(t.length===0)return n.from;{const r=[];return t.flat().forEach(i=>{if(i!=null)if(typeof i=="string")r.push({as:i,from:dm(i)});else if(i instanceof Ra)r.push({as:i.table,from:i});else if(Dw(i)||bO(i))r.push({from:i});else if(Array.isArray(i))r.push({as:l0(i[0]),from:dm(i[1])});else for(const s in i)r.push({as:l0(s),from:dm(i[s])})}),n.from=n.from.concat(r),this}}$from(...t){return this.query.from=[],this.from(...t)}sample(t,n){const{query:r}=this;if(arguments.length===0)return r.sample;{let i=t;return typeof t=="number"&&(i=t>0&&t<1?{perc:100*t,method:n}:{rows:Math.round(t),method:n}),r.sample=i,this}}where(...t){const{query:n}=this;return t.length===0?n.where:(n.where=n.where.concat(t.flat().filter(r=>r)),this)}$where(...t){return this.query.where=[],this.where(...t)}groupby(...t){const{query:n}=this;return t.length===0?n.groupby:(n.groupby=n.groupby.concat(t.flat().filter(r=>r).map(Me)),this)}$groupby(...t){return this.query.groupby=[],this.groupby(...t)}having(...t){const{query:n}=this;return t.length===0?n.having:(n.having=n.having.concat(t.flat().filter(r=>r)),this)}window(...t){const{query:n}=this;if(t.length===0)return n.window;{const r=[];return t.flat().forEach(i=>{if(i!=null)for(const s in i)r.push({as:l0(s),expr:i[s]})}),n.window=n.window.concat(r),this}}qualify(...t){const{query:n}=this;return t.length===0?n.qualify:(n.qualify=n.qualify.concat(t.flat().filter(r=>r)),this)}orderby(...t){const{query:n}=this;return t.length===0?n.orderby:(n.orderby=n.orderby.concat(t.flat().filter(r=>r).map(Me)),this)}limit(t){const{query:n}=this;return arguments.length===0?n.limit:(n.limit=Number.isFinite(t)?t:void 0,this)}offset(t){const{query:n}=this;return arguments.length===0?n.offset:(n.offset=Number.isFinite(t)?t:void 0,this)}get subqueries(){const{query:t,cteFor:n}=this,r=((n==null?void 0:n.query)||t).with,i=r==null?void 0:r.reduce((o,{as:a,query:l})=>(o[a]=l,o),{}),s=[];return t.from.forEach(({from:o})=>{if(Dw(o))s.push(o);else if(i[o.table]){const a=i[o.table];s.push(a)}}),s}toString(){const{select:t,distinct:n,from:r,sample:i,where:s,groupby:o,having:a,window:l,qualify:c,orderby:u,limit:f,offset:d,with:h}=this.query,p=[];if(h.length){const v=h.map(({as:y,query:m})=>`"${y}" AS (${m})`);p.push(`WITH ${v.join(", ")}`)}const g=t.map(({as:v,expr:y})=>DW(y,v)&&!y.table?`${y}`:`${y} AS "${v}"`);if(p.push(`SELECT${n?" DISTINCT":""} ${g.join(", ")}`),r.length){const v=r.map(({as:y,from:m})=>{const b=Dw(m)?`(${m})`:`${m}`;return!y||y===m.table?b:`${b} AS "${y}"`});p.push(`FROM ${v.join(", ")}`)}if(s.length){const v=s.map(String).filter(y=>y).join(" AND ");v&&p.push(`WHERE ${v}`)}if(i){const{rows:v,perc:y,method:m,seed:b}=i,w=v?`${v} ROWS`:`${y} PERCENT`,S=m?` (${m}${b!=null?`, ${b}`:""})`:"";p.push(`USING SAMPLE ${w}${S}`)}if(o.length&&p.push(`GROUP BY ${o.join(", ")}`),a.length){const v=a.map(String).filter(y=>y).join(" AND ");v&&p.push(`HAVING ${v}`)}if(l.length){const v=l.map(({as:y,expr:m})=>`"${y}" AS (${m})`);p.push(`WINDOW ${v.join(", ")}`)}if(c.length){const v=c.map(String).filter(y=>y).join(" AND ");v&&p.push(`QUALIFY ${v}`)}return u.length&&p.push(`ORDER BY ${u.join(", ")}`),Number.isFinite(f)&&p.push(`LIMIT ${f}`),Number.isFinite(d)&&p.push(`OFFSET ${d}`),p.join(" ")}}class Cl{constructor(t,n){this.op=t,this.queries=n.map(r=>r.clone()),this.query={orderby:[]}}clone(){const t=new Cl(this.op,this.queries);return t.query={...this.query},t}orderby(...t){const{query:n}=this;return t.length===0?n.orderby:(n.orderby=n.orderby.concat(t.flat().filter(r=>r).map(Me)),this)}limit(t){const{query:n}=this;return arguments.length===0?n.limit:(n.limit=Number.isFinite(t)?t:void 0,this)}offset(t){const{query:n}=this;return arguments.length===0?n.offset:(n.offset=Number.isFinite(t)?t:void 0,this)}get subqueries(){const{queries:t,cteFor:n}=this;return n&&t.forEach(r=>r.cteFor=n),t}toString(){const{op:t,queries:n,query:{orderby:r,limit:i,offset:s}}=this,o=[n.join(` ${t} `)];return r.length&&o.push(`ORDER BY ${r.join(", ")}`),Number.isFinite(i)&&o.push(`LIMIT ${i}`),Number.isFinite(s)&&o.push(`OFFSET ${s}`),o.join(" ")}}function Dw(e){return e instanceof Lt||e instanceof Cl}function l0(e){return ZW(e)?e.slice(1,-1):e}function ZW(e){return e[0]==='"'&&e[e.length-1]==='"'}function EO(e,t,{replace:n=!1,temp:r=!0,view:i=!1}={}){return"CREATE"+(n?" OR REPLACE ":" ")+(r?"TEMP ":"")+(i?"VIEW":"TABLE")+(n?" ":" IF NOT EXISTS ")+e+" AS "+t}function JW(e,{columns:t=Object.keys((e==null?void 0:e[0])||{})}={}){let n=[];if(Array.isArray(t)?(n=t,t=n.reduce((i,s)=>(i[s]=s,i),{})):t&&(n=Object.keys(t)),!n.length)throw new Error("Can not create table from empty column set.");const r=[];for(const i of e){const s=n.map(o=>`${Zp(i[o])} AS "${t[o]}"`);r.push(`(SELECT ${s.join(", ")})`)}return r.join(" UNION ALL ")}function tH(e,t,n={}){const{select:r=["*"],...i}=n,s=JW(t),o=r.length===1&&r[0]==="*"?s:`SELECT ${r} FROM ${s}`;return EO(e,o,i)}function eH(e){switch(e){case"BIGINT":case"HUGEINT":case"INTEGER":case"SMALLINT":case"TINYINT":case"UBIGINT":case"UINTEGER":case"USMALLINT":case"UTINYINT":case"DOUBLE":case"FLOAT":case"REAL":case"DECIMAL":return"number";case"DATE":case"TIMESTAMP":case"TIMESTAMPTZ":case"TIME":return"date";case"BOOLEAN":return"boolean";case"VARCHAR":case"UUID":return"string";case"LIST":return"array";case"BLOB":case"STRUCT":case"MAP":return"object";default:throw new Error(`Unsupported type: ${e}`)}}const nH="count",rH="nulls",iH="max",sH="min",oH="distinct",aH={[nH]:hr,[oH]:e=>hr(e).distinct(),[iH]:op,[sH]:ap,[rH]:e=>hr().where(xO(e))};function lH({table:e,column:t},n){return Lt.from(e).select(n.map(r=>[r,aH[r](t)]))}const AO=()=>Object.create(null);class cH{constructor(t){this.mc=t,this.clear()}clear(){this.tables=AO()}tableInfo(t){const n=this.tables;if(n[t])return n[t];const r=uH(this.mc,t).catch(i=>{throw n[t]=null,i});return n[t]=r}async fieldInfo({table:t,column:n,stats:r}){const s=(await this.tableInfo(t))[n];if(s==null)return;if(!(r!=null&&r.length))return s;const o=await this.mc.query(lH(s,r),{persist:!0}),a={...s,...Array.from(o)[0]};for(const l in a){const c=a[l];typeof c=="bigint"&&(a[l]=Number(c))}return a}async queryFields(t){const n=await fH(this,t);return(await Promise.all(n.map(i=>this.fieldInfo(i)))).filter(i=>i)}}async function uH(e,t){const n=await e.query(`DESCRIBE ${dm(t)}`,{type:"json",cache:!1}),r=AO();for(const i of n)r[i.column_name]={table:t,column:i.column_name,sqlType:i.column_type,type:eH(i.column_type),nullable:i.null==="YES"};return r}async function fH(e,t){return t.length===1&&t[0].column==="*"?Object.values(await e.tableInfo(t[0].table)):t}function dH(e){let t=2166136261;for(let n=0,r=e.length;n<r;++n){const i=e.charCodeAt(n),s=i&65280;s&&(t=FM(t^s>>8)),t=FM(t^i&255)}return hH(t)}function FM(e){return e+(e<<1)+(e<<4)+(e<<7)+(e<<8)+(e<<24)}function hH(e){return e+=e<<13,e^=e>>>7,e+=e<<3,e^=e>>>17,e+=e<<5,e&4294967295}const MO=e=>e;class pH{constructor(t,{selection:n,temp:r=!0}){this.mc=t,this.selection=n,this.temp=r,this.reset()}reset(){this.enabled=!1,this.clients=null,this.indices=null,this.activeView=null}clear(){this.indices&&(this.mc.cancel(Array.from(this.indices.values(),t=>t.result)),this.indices=null)}index(t,n){var c,u;if(this.clients!==t){const f=Array.from(t,RM),d=(c=f[0])==null?void 0:c.from;this.enabled=f.every(h=>h&&h.from===d),this.clients=t,this.activeView=null,this.clear()}if(!this.enabled)return!1;n=n||this.selection.active;const{source:r}=n;if(r&&r===((u=this.activeView)==null?void 0:u.source))return!0;if(this.clear(),!r)return!1;const i=this.activeView=yH(n);if(!i)return!1;this.mc.logger().warn("DATA CUBE INDEX CONSTRUCTION");const s=this.selection.remove(r),o=this.indices=new Map,{mc:a,temp:l}=this;for(const f of t){if(s.skip(f,n))continue;const d=RM(f),h=f.query(s.predicate(f)).select({...i.columns,...d.count}).groupby(Object.keys(i.columns)),[p]=h.subqueries;if(p){const w=Object.values(i.columns).map(S=>S.columns[0]);bH(p,w)}const g=h.orderby();h.query.orderby=[];const v=h.toString(),m=`cube_index_${(dH(v)>>>0).toString(16)}`,b=a.exec(EO(m,v,{temp:l}));o.set(f,{table:m,result:b,order:g,...d})}}async update(){const{clients:t,selection:n,activeView:r}=this,i=r.predicate(n.active.predicate);return Promise.all(Array.from(t).map(s=>this.updateClient(s,i)))}async updateClient(t,n){const r=this.indices.get(t);if(!r)return;n||(n=this.activeView.predicate(this.selection.active.predicate));const{table:i,dims:s,aggr:o,order:a=[]}=r,l=Lt.select(s,o).from(i).groupby(s).where(n).orderby(a);return this.mc.updateClient(t,l)}}function yH(e){var l;const{source:t,schema:n}=e;let r=(l=e.predicate)==null?void 0:l.columns;if(!n||!r)return null;const{type:i,scales:s,pixelSize:o=1}=n;let a;if(i==="interval"&&s){const c=s.map(u=>mH(u,o));if(c.some(u=>u==null))return null;c.length===1?(a=u=>u?Rr("active0",u.range.map(c[0])):[],r={active0:c[0](e.predicate.field)}):(a=u=>u?pc(u.children.map(({range:f},d)=>Rr(`active${d}`,f.map(c[d])))):[],r=Object.fromEntries(e.predicate.children.map((u,f)=>[`active${f}`,c[f](u.field)])))}else if(i==="point")a=MO,r=Object.fromEntries(r.map(c=>[c.toString(),c]));else return null;return{source:t,columns:r,predicate:a}}function mH(e,t){const{type:n,domain:r,range:i}=e;let s,o;switch(n){case"linear":s=MO,o=Me;break;case"log":s=Math.log,o=a=>G`LN(${Me(a)})`;break;case"symlog":s=a=>Math.sign(a)*Math.log1p(Math.abs(a)),o=a=>(a=Me(a),G`SIGN(${a}) * LN(1 + ABS(${a}))`);break;case"sqrt":s=Math.sqrt,o=a=>G`SQRT(${Me(a)})`;break;case"utc":case"time":s=a=>+a,o=a=>a instanceof Date?+a:TO(Me(a));break}return s?gH(r,i,t,s,o):null}function gH(e,t,n,r,i){const s=r(Math.min(e[0],e[1])),o=r(Math.max(e[0],e[1])),a=Math.abs(r(t[1])-r(t[0]))/(o-s)/n,l=n===1?"":`${n}::INTEGER * `;return c=>G`${l}FLOOR(${a}::DOUBLE * (${i(c)} - ${s}::DOUBLE))::INTEGER`}const BM={from:NaN};function RM(e){if(!e.filterIndexable)return BM;const t=e.query(),n=Z2(t);if(!n||!t.groupby)return BM;const r=new Set(t.groupby().map(a=>a.column)),i=[],s=[];let o;for(const{as:a,expr:{aggregate:l}}of t.select())switch(l==null?void 0:l.toUpperCase()){case"COUNT":case"SUM":i.push({[a]:G`SUM("${a}")::DOUBLE`});break;case"AVG":o="_count_",i.push({[a]:G`(SUM("${a}" * ${o}) / SUM(${o}))::DOUBLE`});break;case"MAX":i.push({[a]:G`MAX("${a}")`});break;case"MIN":i.push({[a]:G`MIN("${a}")`});break;default:if(r.has(a))s.push(a);else return null}return{aggr:i,dims:s,count:o?{[o]:G`COUNT(*)`}:{},from:n}}function Z2(e){const t=e.subqueries;if(e.select){const r=e.from();if(!r.length)return;if(t.length===0)return r[0].from.table}const n=Z2(t[0]);for(let r=1;r<t.length;++r){const i=Z2(t[r]);if(i!==void 0&&i!==n)return NaN}return n}function bH(e,t){const n=new Set,r=i=>{n.has(i)||(n.add(i),i.select&&i.from().length&&i.select(t),i.subqueries.forEach(r))};r(e)}class vH{constructor(t,n,r=!0){this.mc=t,this.selection=n,this.clients=new Set,this.indexer=r?new pH(this.mc,{...r,selection:n}):null;const{value:i,activate:s}=this.handlers={value:()=>this.update(),activate:o=>{var a;return(a=this.indexer)==null?void 0:a.index(this.clients,o)}};n.addEventListener("value",i),n.addEventListener("activate",s)}finalize(){const{value:t,activate:n}=this.handlers;this.selection.removeEventListener("value",t),this.selection.removeEventListener("activate",n)}reset(){var t;(t=this.indexer)==null||t.reset()}add(t){return(this.clients=new Set(this.clients)).add(t),this}remove(t){return this.clients.has(t)&&(this.clients=new Set(this.clients)).delete(t),this}update(){const{mc:t,indexer:n,clients:r,selection:i}=this;return n!=null&&n.index(r)?n.update():wH(t,r,i)}}function wH(e,t,n){return Promise.all(Array.from(t).map(r=>{const i=n.predicate(r);if(i!=null)return e.updateClient(r,r.query(i))}))}function $O(){let e,t;const n=new Promise((r,i)=>{e=r,t=i});return n.fulfill=r=>(e(r),n),n.reject=r=>(t(r),n),n}function _H(e,t,n){let r=[],i=0;function s(){const o=SH(r,t);r=[],i=0;for(const a of o)IH(a,e,n),AH(a,t)}return{add(o,a){o.request.type==="arrow"?(i=i||requestAnimationFrame(()=>s()),r.push({entry:o,priority:a,index:r.length})):e(o,a)}}}function SH(e,t){const n=[],r=new Map;for(const i of e){const{entry:{request:s}}=i,o=xH(s.query,t);if(!r.has(o)){const a=[];n.push(a),r.set(o,a)}r.get(o).push(i)}return n}function xH(e,t){const n=`${e}`;if(e instanceof Lt&&!t.get(n)){if(e.orderby().length||e.where().length||e.qualify().length||e.having().length)return n;const r=e.clone().$select("*"),i=e.groupby();if(i.length){const s={};e.select().forEach(({as:o,expr:a})=>s[o]=a),r.$groupby(i.map(o=>o instanceof Ra&&s[o.column]||o))}return`${r}`}else return n}function IH(e,t,n){if(TH(e))t({request:{type:"arrow",cache:!1,record:!1,query:EH(e,n)},result:e.result=$O()});else for(const{entry:r,priority:i}of e)t(r,i)}function TH(e){if(e.length>1){const t=`${e[0].entry.request.query}`;for(let n=1;n<e.length;++n)if(t!==`${e[n].entry.request.query}`)return!0}return!1}function EH(e,t){const n=e.maps=[],r=new Map;for(const o of e){const{query:a}=o.entry.request,l=[];n.push(l);for(const{as:c,expr:u}of a.select()){const f=`${u}`;r.has(f)||r.set(f,[`col${r.size}`,u]);const[d]=r.get(f);l.push([d,c])}t(`${a}`)}const i=e[0].entry.request.query.clone(),s=i.groupby();if(s.length){const o={};e.maps[0].forEach(([a,l])=>o[l]=a),i.$groupby(s.map(a=>a instanceof Ra&&o[a.column]||a))}return i.$select(Array.from(r.values()))}async function AH(e,t){const{maps:n,result:r}=e;if(!n)return;let i;try{i=await r}catch(s){for(const{entry:o}of e)o.result.reject(s);return}e.forEach(({entry:s},o)=>{const{request:a,result:l}=s,c=MH(i,n[o]);a.cache&&t.set(String(a.query),c),l.fulfill(c)})}function MH(e,t){if(t){const n={};for(const[r,i]of t)n[i]=e.getChild(r);return new e.constructor(n)}else return e}const $H=typeof requestIdleCallback<"u"?requestIdleCallback:setTimeout,NH=()=>({get:()=>{},set:(e,t)=>t,clear:()=>{}});function DH({max:e=1e3,ttl:t=3*60*60*1e3}={}){let n=new Map;function r(){const i=performance.now()-t;let s=null,o=1/0;for(const[a,l]of n){const{last:c}=l;c<o&&(s=a,o=c),i>c&&n.delete(a)}s&&n.delete(s)}return{get(i){const s=n.get(i);if(s)return s.last=performance.now(),s.value},set(i,s){return n.set(i,{last:performance.now(),value:s}),n.size>e&&$H(r),s},clear(){n=new Map}}}function kH(e){const t=Array.from({length:e},()=>({head:null,tail:null}));return{isEmpty(){return t.every(n=>!n.head)},insert(n,r){const i=t[r];if(!i)throw new Error(`Invalid queue priority rank: ${r}`);const s={item:n,next:null};i.head===null?i.head=i.tail=s:i.tail=i.tail.next=s},remove(n){for(const r of t){let{head:i,tail:s}=r;for(let o=null,a=i;a;o=a,a=a.next)n(a.item)&&(a===i?i=a.next:o.next=a.next,a===s&&(s=o||i));r.head=i,r.tail=s}},next(){for(const n of t){const{head:r}=n;if(r!==null)return n.head=r.next,n.tail===r&&(n.tail=null),r.item}}}}const oa={High:0,Normal:1,Low:2};function OH(){const e=kH(3);let t,n,r,i=[],s=null,o;function a(){if(s||e.isEmpty())return;const{request:f,result:d}=e.next();s=u(f,d),s.finally(()=>{s=null,a()})}function l(f,d=oa.Normal){e.insert(f,d),a()}function c(f){i.length&&f&&i.forEach(d=>d.add(f))}async function u(f,d){try{const{query:h,type:p,cache:g=!1,record:v=!0,options:y}=f,m=h?`${h}`:null;if(v&&c(m),g){const S=n.get(m);if(S){r.debug("Cache"),d.fulfill(S);return}}const b=performance.now(),w=await t.query({type:p,sql:m,...y});g&&n.set(m,w),r.debug(`Request: ${(performance.now()-b).toFixed(1)}`),d.fulfill(w)}catch(h){d.reject(h)}}return{cache(f){return f!==void 0?n=f===!0?DH():f||NH():n},logger(f){return f?r=f:r},connector(f){return f?t=f:t},consolidate(f){f&&!o?o=_H(l,n,c):!f&&o&&(o=null)},request(f,d=oa.Normal){const h=$O(),p={request:f,result:h};return o?o.add(p,d):l(p,d),h},cancel(f){const d=new Set(f);e.remove(({result:h})=>d.has(h))},clear(){e.remove(({result:f})=>(f.reject("Cleared"),!0))},record(){let f=[];const d={add(h){f.push(h)},reset(){f=[]},snapshot(){return f.slice()},stop(){return i=i.filter(h=>h!==d),f}};return i.push(d),d}}}function FH(){return{debug(){},info(){},log(){},warn(){},error(){}}}let c0;function Xn(e){return e?c0=e:c0==null&&(c0=new BH),c0}class BH{constructor(t=NW(),n={}){this.catalog=new cH(this),this.manager=n.manager||OH(),this.logger(n.logger||console),this.configure(n),this.databaseConnector(t),this.clear()}logger(t){return arguments.length&&(this._logger=t||FH(),this.manager.logger(this._logger)),this._logger}configure({cache:t=!0,consolidate:n=!0,indexes:r=!0}){this.manager.cache(t),this.manager.consolidate(n),this.indexes=r}clear({clients:t=!0,cache:n=!0,catalog:r=!1}={}){var i,s;this.manager.clear(),t&&((i=this.clients)==null||i.forEach(o=>this.disconnect(o)),(s=this.filterGroups)==null||s.forEach(o=>o.finalize()),this.clients=new Set,this.filterGroups=new Map),n&&this.manager.cache().clear(),r&&this.catalog.clear()}databaseConnector(t){return this.manager.connector(t)}cancel(t){this.manager.cancel(t)}exec(t,{priority:n=oa.Normal}={}){return this.manager.request({type:"exec",query:t},n)}query(t,{type:n="arrow",cache:r=!0,priority:i=oa.Normal,...s}={}){return this.manager.request({type:n,query:t,cache:r,options:s},i)}prefetch(t,n={}){return this.query(t,{...n,cache:!0,priority:oa.Low})}createBundle(t,n,r=oa.Low){const i={name:t,queries:n};return this.manager.request({type:"create-bundle",options:i},r)}loadBundle(t,n=oa.High){const r={name:t};return this.manager.request({type:"load-bundle",options:r},n)}updateClient(t,n,r=oa.Normal){return t.queryPending(),this.query(n,{priority:r}).then(i=>t.queryResult(i).update(),i=>{t.queryError(i),this._logger.error(i)})}requestQuery(t,n){var r;return(r=this.filterGroups.get(t.filterBy))==null||r.reset(),n?this.updateClient(t,n):t.update()}async connect(t){const{catalog:n,clients:r,filterGroups:i,indexes:s}=this;if(r.has(t))throw new Error("Client already connected.");r.add(t);const o=t.fields();o!=null&&o.length&&t.fieldInfo(await n.queryFields(o));const a=t.filterBy;if(a)if(i.has(a))i.get(a).add(t);else{const l=new vH(this,a,s);i.set(a,l.add(t))}t.requestQuery()}disconnect(t){var i;const{clients:n,filterGroups:r}=this;n.has(t)&&(n.delete(t),(i=r.get(t.filterBy))==null||i.remove(t))}}const LM={};function NO(e,t=!1){let n,r,i=LM;function s(c){n=e(c).then(()=>{if(r){const{value:u}=r;r=null,s(u)}else n=null})}function o(c){r={event:c}}function a(c){n?o(c):s(c)}function l(c){i!==c&&requestAnimationFrame(()=>{const u=i;i=LM,a(u)}),i=c}return t?l:a}class ty{constructor(t){this._filterBy=t,this._requestUpdate=NO(()=>this.requestQuery(),!0)}get filterBy(){return this._filterBy}get filterIndexable(){return!0}fields(){return null}fieldInfo(){return this}query(){return null}queryPending(){return this}queryResult(){return this}queryError(t){return console.error(t),this}requestQuery(t){var r;const n=t||this.query((r=this.filterBy)==null?void 0:r.predicate(this));return Xn().requestQuery(this,n)}requestUpdate(){this._requestUpdate()}update(){return this}}class RH{constructor(){this._callbacks=new Map}addEventListener(t,n){this._callbacks.has(t)||this._callbacks.set(t,{callbacks:new Set,pending:null,queue:new LH}),this._callbacks.get(t).callbacks.add(n)}removeEventListener(t,n){const r=this._callbacks.get(t);r&&r.callbacks.delete(n)}willEmit(t,n){return n}emitQueueFilter(){return null}cancel(t){const n=this._callbacks.get(t);n==null||n.queue.clear()}emit(t,n){const r=this._callbacks.get(t)||{};if(r.pending)r.queue.enqueue(n,this.emitQueueFilter(t,n));else{const i=this.willEmit(t,n),{callbacks:s,queue:o}=r;if(s!=null&&s.size){const a=Promise.allSettled(Array.from(s,l=>l(i))).then(()=>{r.pending=null,o.isEmpty()||this.emit(t,o.dequeue())});r.pending=a}}}}class LH{constructor(){this.clear()}clear(){this.next=null}isEmpty(){return!this.next}enqueue(t,n){const r={value:t};if(n&&this.next){let i=this;for(;i.next;)n(i.next.value)?i=i.next:i.next=i.next.next;i.next=r}else this.next=r}dequeue(){const{next:t}=this;return this.next=t==null?void 0:t.next,t==null?void 0:t.value}}function DO(e,t){return e===t?!1:e instanceof Date&&t instanceof Date?+e!=+t:Array.isArray(e)&&Array.isArray(t)?CH(e,t):!0}function CH(e,t){if(e.length!==t.length)return!0;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!0;return!1}function $a(e){return e instanceof pr}class pr extends RH{constructor(t){super(),this._value=t}static value(t){return new pr(t)}static array(t){if(t.some(n=>$a(n))){const n=new pr,r=()=>n.update(t.map(i=>$a(i)?i.value:i));return r(),t.forEach(i=>$a(i)?i.addEventListener("value",r):0),n}return new pr(t)}get value(){return this._value}update(t,{force:n}={}){return DO(this._value,t)||n?this.emit("value",t):this.cancel("value"),this}willEmit(t,n){return t==="value"&&(this._value=n),n}}function yc(e){return e instanceof La}let La=class lu extends pr{static intersect({cross:t=!1}={}){return new lu(new Nd({cross:t}))}static union({cross:t=!1}={}){return new lu(new Nd({cross:t,union:!0}))}static single({cross:t=!1}={}){return new lu(new Nd({cross:t,single:!0}))}static crossfilter(){return new lu(new Nd({cross:!0}))}constructor(t=new Nd){super([]),this._resolved=this._value,this._resolver=t}clone(){const t=new lu(this._resolver);return t._value=t._resolved=this._value,t}remove(t){const n=this.clone();return n._value=n._resolved=n._resolver.resolve(this._resolved,{source:t}),n._value.active={source:t},n}get active(){return this.clauses.active}get value(){var t;return(t=this.active)==null?void 0:t.value}get clauses(){return super.value}get single(){return this._resolver.single}activate(t){this.emit("activate",t)}update(t){return this._resolved=this._resolver.resolve(this._resolved,t,!0),this._resolved.active=t,super.update(this._resolved)}willEmit(t,n){return t==="value"?(this._value=n,this.value):n}emitQueueFilter(t,n){return t==="value"?this._resolver.queueFilter(n):null}skip(t,n){return this._resolver.skip(t,n)}predicate(t,n=!1){const{clauses:r}=this,i=n?null:r.active;return this._resolver.predicate(r,i,t)}};class Nd{constructor({union:t,cross:n,single:r}={}){this.union=!!t,this.cross=!!n,this.single=!!r}resolve(t,n,r=!1){const{source:i,predicate:s}=n,o=t.filter(l=>i!==l.source),a=this.single?[]:o;return this.single&&r&&o.forEach(l=>{var c,u;return(u=(c=l.source)==null?void 0:c.reset)==null?void 0:u.call(c)}),s&&a.push(n),a}skip(t,n){var r;return this.cross&&((r=n==null?void 0:n.clients)==null?void 0:r.has(t))}predicate(t,n,r){const{union:i}=this;if(this.skip(r,n))return;const s=t.filter(o=>!this.skip(r,o)).map(o=>o.predicate);return i&&s.length>1?_O(s):s}queueFilter(t){var n;if(this.cross){const r=(n=t.active)==null?void 0:n.source;return i=>{var s;return((s=i.active)==null?void 0:s.source)!==r}}}}const kw=2,ms=4,yo=4,fe=4,aa=new Int32Array(2),CM=new Float32Array(aa.buffer),UM=new Float64Array(aa.buffer),u0=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;var J2;(function(e){e[e.UTF8_BYTES=1]="UTF8_BYTES",e[e.UTF16_STRING=2]="UTF16_STRING"})(J2||(J2={}));let xf=class kO{constructor(t){this.bytes_=t,this.position_=0,this.text_decoder_=new TextDecoder}static allocate(t){return new kO(new Uint8Array(t))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(t){this.position_=t}capacity(){return this.bytes_.length}readInt8(t){return this.readUint8(t)<<24>>24}readUint8(t){return this.bytes_[t]}readInt16(t){return this.readUint16(t)<<16>>16}readUint16(t){return this.bytes_[t]|this.bytes_[t+1]<<8}readInt32(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}readUint32(t){return this.readInt32(t)>>>0}readInt64(t){return BigInt.asIntN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readUint64(t){return BigInt.asUintN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readFloat32(t){return aa[0]=this.readInt32(t),CM[0]}readFloat64(t){return aa[u0?0:1]=this.readInt32(t),aa[u0?1:0]=this.readInt32(t+4),UM[0]}writeInt8(t,n){this.bytes_[t]=n}writeUint8(t,n){this.bytes_[t]=n}writeInt16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeUint16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeInt32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeUint32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeInt64(t,n){this.writeInt32(t,Number(BigInt.asIntN(32,n))),this.writeInt32(t+4,Number(BigInt.asIntN(32,n>>BigInt(32))))}writeUint64(t,n){this.writeUint32(t,Number(BigInt.asUintN(32,n))),this.writeUint32(t+4,Number(BigInt.asUintN(32,n>>BigInt(32))))}writeFloat32(t,n){CM[0]=n,this.writeInt32(t,aa[0])}writeFloat64(t,n){UM[0]=n,this.writeInt32(t,aa[u0?0:1]),this.writeInt32(t+4,aa[u0?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+ms+yo)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let t="";for(let n=0;n<yo;n++)t+=String.fromCharCode(this.readInt8(this.position_+ms+n));return t}__offset(t,n){const r=t-this.readInt32(t);return n<this.readInt16(r)?this.readInt16(r+n):0}__union(t,n){return t.bb_pos=n+this.readInt32(n),t.bb=this,t}__string(t,n){t+=this.readInt32(t);const r=this.readInt32(t);t+=ms;const i=this.bytes_.subarray(t,t+r);return n===J2.UTF8_BYTES?i:this.text_decoder_.decode(i)}__union_with_string(t,n){return typeof t=="string"?this.__string(n):this.__union(t,n)}__indirect(t){return t+this.readInt32(t)}__vector(t){return t+this.readInt32(t)+ms}__vector_len(t){return this.readInt32(t+this.readInt32(t))}__has_identifier(t){if(t.length!=yo)throw new Error("FlatBuffers: file identifier must be length "+yo);for(let n=0;n<yo;n++)if(t.charCodeAt(n)!=this.readInt8(this.position()+ms+n))return!1;return!0}createScalarList(t,n){const r=[];for(let i=0;i<n;++i){const s=t(i);s!==null&&r.push(s)}return r}createObjList(t,n){const r=[];for(let i=0;i<n;++i){const s=t(i);s!==null&&r.push(s.unpack())}return r}},OO=class FO{constructor(t){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null,this.text_encoder=new TextEncoder;let n;t?n=t:n=1024,this.bb=xf.allocate(n),this.space=n}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(t){this.force_defaults=t}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(t,n){t>this.minalign&&(this.minalign=t);const r=~(this.bb.capacity()-this.space+n)+1&t-1;for(;this.space<r+t+n;){const i=this.bb.capacity();this.bb=FO.growByteBuffer(this.bb),this.space+=this.bb.capacity()-i}this.pad(r)}pad(t){for(let n=0;n<t;n++)this.bb.writeInt8(--this.space,0)}writeInt8(t){this.bb.writeInt8(this.space-=1,t)}writeInt16(t){this.bb.writeInt16(this.space-=2,t)}writeInt32(t){this.bb.writeInt32(this.space-=4,t)}writeInt64(t){this.bb.writeInt64(this.space-=8,t)}writeFloat32(t){this.bb.writeFloat32(this.space-=4,t)}writeFloat64(t){this.bb.writeFloat64(this.space-=8,t)}addInt8(t){this.prep(1,0),this.writeInt8(t)}addInt16(t){this.prep(2,0),this.writeInt16(t)}addInt32(t){this.prep(4,0),this.writeInt32(t)}addInt64(t){this.prep(8,0),this.writeInt64(t)}addFloat32(t){this.prep(4,0),this.writeFloat32(t)}addFloat64(t){this.prep(8,0),this.writeFloat64(t)}addFieldInt8(t,n,r){(this.force_defaults||n!=r)&&(this.addInt8(n),this.slot(t))}addFieldInt16(t,n,r){(this.force_defaults||n!=r)&&(this.addInt16(n),this.slot(t))}addFieldInt32(t,n,r){(this.force_defaults||n!=r)&&(this.addInt32(n),this.slot(t))}addFieldInt64(t,n,r){(this.force_defaults||n!==r)&&(this.addInt64(n),this.slot(t))}addFieldFloat32(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat32(n),this.slot(t))}addFieldFloat64(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat64(n),this.slot(t))}addFieldOffset(t,n,r){(this.force_defaults||n!=r)&&(this.addOffset(n),this.slot(t))}addFieldStruct(t,n,r){n!=r&&(this.nested(n),this.slot(t))}nested(t){if(t!=this.offset())throw new TypeError("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new TypeError("FlatBuffers: object serialization must not be nested.")}slot(t){this.vtable!==null&&(this.vtable[t]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(t){const n=t.capacity();if(n&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const r=n<<1,i=xf.allocate(r);return i.setPosition(r-n),i.bytes().set(t.bytes(),r-n),i}addOffset(t){this.prep(ms,0),this.writeInt32(this.offset()-t+ms)}startObject(t){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=t;for(let n=0;n<t;n++)this.vtable[n]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const t=this.offset();let n=this.vtable_in_use-1;for(;n>=0&&this.vtable[n]==0;n--);const r=n+1;for(;n>=0;n--)this.addInt16(this.vtable[n]!=0?t-this.vtable[n]:0);const i=2;this.addInt16(t-this.object_start);const s=(r+i)*kw;this.addInt16(s);let o=0;const a=this.space;t:for(n=0;n<this.vtables.length;n++){const l=this.bb.capacity()-this.vtables[n];if(s==this.bb.readInt16(l)){for(let c=kw;c<s;c+=kw)if(this.bb.readInt16(a+c)!=this.bb.readInt16(l+c))continue t;o=this.vtables[n];break}}return o?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,o-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t}finish(t,n,r){const i=r?fe:0;if(n){const s=n;if(this.prep(this.minalign,ms+yo+i),s.length!=yo)throw new TypeError("FlatBuffers: file identifier must be length "+yo);for(let o=yo-1;o>=0;o--)this.writeInt8(s.charCodeAt(o))}this.prep(this.minalign,ms+i),this.addOffset(t),i&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(t,n){this.finish(t,n,!0)}requiredField(t,n){const r=this.bb.capacity()-t,i=r-this.bb.readInt32(r);if(!(n<this.bb.readInt16(i)&&this.bb.readInt16(i+n)!=0))throw new TypeError("FlatBuffers: field "+n+" must be set")}startVector(t,n,r){this.notNested(),this.vector_num_elems=n,this.prep(ms,t*n),this.prep(r,t*n)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(t){if(!t)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(t))return this.string_maps.get(t);const n=this.createString(t);return this.string_maps.set(t,n),n}createString(t){if(t==null)return 0;let n;t instanceof Uint8Array?n=t:n=this.text_encoder.encode(t),this.addInt8(0),this.startVector(1,n.length,1),this.bb.setPosition(this.space-=n.length);for(let r=0,i=this.space,s=this.bb.bytes();r<n.length;r++)s[i++]=n[r];return this.endVector()}createObjectOffset(t){return t===null?0:typeof t=="string"?this.createString(t):t.pack(this)}createObjectOffsetList(t){const n=[];for(let r=0;r<t.length;++r){const i=t[r];if(i!==null)n.push(this.createObjectOffset(i));else throw new TypeError("FlatBuffers: Argument for createObjectOffsetList cannot contain null.")}return n}createStructOffsetList(t,n){return n(this,t.length),this.createObjectOffsetList(t.slice().reverse()),this.endVector()}};function UH(){const e=new Set;let t,n=new Promise(r=>t=r);return{pending(r){e.add(r)},ready(r){return e.delete(r),e.size===0},resolve(){n=new Promise(r=>{t(),t=r})},get promise(){return n}}}function Vb(e,t){const n=new e(t);return Xn().connect(n),n.element}const PH=e=>e&&typeof e=="object"&&!Array.isArray(e),zH=e=>Vb(jH,e);class jH extends ty{constructor({element:t,filterBy:n,from:r,column:i,label:s=i,format:o=u=>u,options:a,value:l,as:c}={}){var f,d,h,p;super(n),this.from=r,this.column=i,this.selection=c,this.format=o,this.element=t??document.createElement("div"),this.element.setAttribute("class","input"),this.element.value=this;const u=document.createElement("label");u.innerText=s||i,this.element.appendChild(u),this.select=document.createElement("select"),a&&(this.data=a.map(g=>PH(g)?g:{value:g}),this.update()),l=l??((f=this.selection)==null?void 0:f.value)??((h=(d=this.data)==null?void 0:d[0])==null?void 0:h.value),((p=this.selection)==null?void 0:p.value)===void 0&&this.publish(l),this.element.appendChild(this.select),this.selection&&(this.select.addEventListener("input",()=>{this.publish(this.selectedValue()??null)}),yc(this.selection)||this.selection.addEventListener("value",g=>{g!==this.select.value&&this.selectedValue(g)}))}selectedValue(t){var n;if(arguments.length===0){const r=this.select.selectedIndex;return this.data[r].value}else{const r=(n=this.data)==null?void 0:n.findIndex(i=>i.value===t);r>=0?this.select.selectedIndex=r:this.select.value=String(t)}}reset(){this.select.selectedIndex=this.from?0:-1}publish(t){const{selection:n,column:r}=this;yc(n)?n.update({source:this,schema:{type:"point"},value:t,predicate:t?t3(r,Jp(t)):null}):$a(n)&&n.update(t)}query(t=[]){const{from:n,column:r}=this;return n?Lt.from(n).select({value:r}).distinct().where(t).orderby(r):null}queryResult(t){return this.data=[{value:"",label:"All"},...t],this}update(){var i;const{data:t,format:n,select:r}=this;r.replaceChildren();for(const{value:s,label:o}of t){const a=document.createElement("option");a.setAttribute("value",s),a.innerText=o??n(s),this.select.appendChild(a)}return this.selection&&this.selectedValue(((i=this.selection)==null?void 0:i.value)??""),this}}const VH={contains:UW,prefix:PW,suffix:zW,regexp:CW};let YH=0;const qH=e=>Vb(WH,e);class WH extends ty{constructor({element:t,filterBy:n,from:r,column:i,label:s,type:o="contains",as:a}={}){if(super(n),this.id="search_"+ ++YH,this.type=o,this.from=r,this.column=i,this.selection=a,this.element=t??document.createElement("div"),this.element.setAttribute("class","input"),this.element.value=this,s){const l=document.createElement("label");l.setAttribute("for",this.id),l.innerText=s,this.element.appendChild(l)}this.searchbox=document.createElement("input"),this.searchbox.setAttribute("id",this.id),this.searchbox.setAttribute("type","text"),this.searchbox.setAttribute("placeholder","Query"),this.element.appendChild(this.searchbox),this.selection&&(this.searchbox.addEventListener("input",()=>{this.publish(this.searchbox.value||null)}),yc(this.selection)||this.selection.addEventListener("value",l=>{l!==this.searchbox.value&&(this.searchbox.value=l)}))}reset(){this.searchbox.value=""}publish(t){const{selection:n,column:r,type:i}=this;yc(n)?n.update({source:this,schema:{type:i},value:t,predicate:t?VH[i](r,Jp(t)):null}):$a(n)&&n.update(t)}query(t=[]){const{from:n,column:r}=this;return n?Lt.from(n).select({list:r}).distinct().where(t):null}queryResult(t){return this.data=t,this}update(){const t=document.createElement("datalist"),n=`${this.id}_list`;t.setAttribute("id",n);for(const r of this.data){const i=document.createElement("option");i.setAttribute("value",r.list),t.append(i)}return this.datalist&&this.datalist.remove(),this.element.appendChild(this.datalist=t),this.searchbox.setAttribute("list",n),this}}let HH=0;const tS=e=>Vb(GH,e);class GH extends ty{constructor({element:t,filterBy:n,as:r,min:i,max:s,step:o,from:a,column:l,label:c=l,value:u=r==null?void 0:r.value,width:f}={}){var d;if(super(n),this.id="slider_"+ ++HH,this.from=a,this.column=l||"value",this.selection=r,this.min=i,this.max=s,this.step=o,this.element=t||document.createElement("div"),this.element.setAttribute("class","input"),this.element.value=this,c){const h=document.createElement("label");h.setAttribute("for",this.id),h.innerText=c,this.element.appendChild(h)}this.slider=document.createElement("input"),this.slider.setAttribute("id",this.id),this.slider.setAttribute("type","range"),f!=null&&(this.slider.style.width=`${+f}px`),i!=null&&this.slider.setAttribute("min",i),s!=null&&this.slider.setAttribute("max",s),o!=null&&this.slider.setAttribute("step",o),u!=null&&(this.slider.setAttribute("value",u),((d=this.selection)==null?void 0:d.value)===void 0&&this.publish(u)),this.element.appendChild(this.slider),this.selection&&(this.slider.addEventListener("input",()=>{this.publish(+this.slider.value)}),yc(this.selection)||this.selection.addEventListener("value",h=>{h!==+this.slider.value&&(this.slider.value=h)}))}query(t=[]){const{from:n,column:r}=this;return!n||this.min!=null&&this.max!=null?null:Lt.select({min:ap(r),max:op(r)}).from(n).where(t)}queryResult(t){const{min:n,max:r}=Array.from(t)[0];return this.min==null&&this.slider.setAttribute("min",n),this.max==null&&this.slider.setAttribute("max",r),this.step==null&&this.slider.setAttribute("step",(r-n)/500),this}publish(t){const{selection:n,column:r}=this;yc(n)?n.update({source:this,schema:{type:"point"},value:t,predicate:t3(r,Jp(t))}):$a(this.selection)&&n.update(t)}}function BO(e,t){if(e instanceof Date||(e=new Date(+e)),isNaN(e))return typeof t=="function"?t(e):t;const n=e.getUTCHours(),r=e.getUTCMinutes(),i=e.getUTCSeconds(),s=e.getUTCMilliseconds();return`${XH(e.getUTCFullYear())}-${ho(e.getUTCMonth()+1,2)}-${ho(e.getUTCDate(),2)}${n||r||i||s?`T${ho(n,2)}:${ho(r,2)}${i||s?`:${ho(i,2)}${s?`.${ho(s,3)}`:""}`:""}Z`:""}`}function XH(e){return e<0?`-${ho(-e,6)}`:e>9999?`+${ho(e,6)}`:ho(e,4)}function ho(e,t){return`${e}`.padStart(t,"0")}const QH=/^(?:[-+]\d{2})?\d{4}(?:-\d{2}(?:-\d{2})?)?(?:T\d{2}:\d{2}(?::\d{2}(?:\.\d{3})?)?(?:Z|[-+]\d{2}:?\d{2})?)?$/;function RO(e,t){return QH.test(e+="")?new Date(e):typeof t=="function"?t(e):t}const LO=n3(e=>{const t=e3(e);return n=>n==null?"":typeof n=="number"?t(n):n instanceof Date?CO(n):`${n}`}),e3=n3(e=>t=>t===0?"0":t.toLocaleString(e));LO();e3();function CO(e){return BO(e,"Invalid Date")}function n3(e){let t=n3,n;return(r="en")=>r===t?n:n=e(t=r)}let KH=-1;const UO=e=>Vb(ZH,e);let ZH=class extends ty{constructor({element:t,filterBy:n,from:r,columns:i=["*"],align:s={},format:o,width:a,maxWidth:l,height:c=500,rowBatch:u=100}={}){super(n),this.id=`table-${++KH}`,this.from=r,this.columns=i,this.format=o,this.align=s,this.widths=typeof a=="object"?a:{},this.offset=0,this.limit=+u,this.pending=!1,this.sortHeader=null,this.sortColumn=null,this.sortDesc=!1,this.element=t||document.createElement("div"),this.element.setAttribute("id",this.id),this.element.value=this,typeof a=="number"&&(this.element.style.width=`${a}px`),l&&(this.element.style.maxWidth=`${l}px`),this.element.style.maxHeight=`${c}px`,this.element.style.overflow="auto";let f=-1;this.element.addEventListener("scroll",d=>{const{pending:h,loaded:p}=this,{scrollHeight:g,scrollTop:v,clientHeight:y}=d.target,m=v<f;f=v,!(m||h||p)&&g-v<2*y&&(this.pending=!0,this.requestData(this.offset+this.limit))}),this.tbl=document.createElement("table"),this.element.appendChild(this.tbl),this.head=document.createElement("thead"),this.tbl.appendChild(this.head),this.body=document.createElement("tbody"),this.tbl.appendChild(this.body),this.style=document.createElement("style"),this.element.appendChild(this.style)}requestData(t=0){var r;this.offset=t;const n=this.query((r=this.filterBy)==null?void 0:r.predicate(this));this.requestQuery(n),Xn().prefetch(n.clone().offset(t+this.limit))}fields(){return this.columns.map(t=>JI(this.from,t))}fieldInfo(t){this.schema=t;const n=this.head;n.innerHTML="";const r=document.createElement("tr");for(const{column:i}of t){const s=document.createElement("th");s.addEventListener("click",o=>this.sort(o,i)),s.appendChild(document.createElement("span")),s.appendChild(document.createTextNode(i)),r.appendChild(s)}return n.appendChild(r),this.formats=JH(this.format,t),this.style.innerText=nG(this.id,tG(this.align,t),eG(this.widths,t)),this}query(t=[]){const{from:n,limit:r,offset:i,schema:s,sortColumn:o,sortDesc:a}=this;return Lt.from(n).select(s.map(l=>l.column)).where(t).orderby(o?a?FW(o):o:[]).limit(r).offset(i)}queryResult(t){return this.pending||(this.loaded=!1,this.body.replaceChildren()),this.data=t,this}update(){const{body:t,formats:n,data:r,schema:i,limit:s}=this,o=i.length;let a=0;for(const l of r){++a;const c=document.createElement("tr");for(let u=0;u<o;++u){const f=l[i[u].column],d=document.createElement("td");d.innerText=f==null?"":n[u](f),c.appendChild(d)}t.appendChild(c)}return a<s&&(this.loaded=!0),this.pending=!1,this}sort(t,n){n===this.sortColumn?this.sortDesc=!this.sortDesc:(this.sortColumn=n,this.sortDesc=!1);const r=t.currentTarget,i=this.sortHeader;i===r&&t.metaKey?(i.firstChild.textContent="",this.sortHeader=null,this.sortColumn=null):(i&&(i.firstChild.textContent=""),this.sortHeader=r,r.firstChild.textContent=this.sortDesc?"":""),this.requestData()}};function JH(e={},t,n){return t.map(({column:r,type:i})=>{if(r in e)return e[r];switch(i){case"number":return e3(n);case"date":return CO;default:return LO(n)}})}function tG(e={},t){return t.map(({column:n,type:r})=>n in e?e[n]:r==="number"?"right":"left")}function eG(e={},t){return t.map(({column:n})=>e[n])}function nG(e,t,n){const r=[];return t.forEach((i,s)=>{const o=+n[s];if(i!=="left"||o){const a=i!=="left"?`text-align:${i};`:"",l=o?`width:${o}px;max-width:${o}px;`:"";r.push(`#${e} tr>:nth-child(${s+1}) {${a}${l}}`)}}),r.join(" ")}const oi=Symbol("Fixed"),mc=Symbol("Transient"),PO=Symbol("Transform"),rG=["rectY-x","rectX-y","rect-x","rect-y"];function iG(e,t){return rG.includes(`${t}-${e}`)}function Eh(e,t={steps:25}){const n=(r,i)=>iG(i,r.type)?{[`${i}1`]:Ow(r,e,t),[`${i}2`]:Ow(r,e,{...t,offset:1})}:{[i]:Ow(r,e,t)};return n[PO]=!0,n}function Ow(e,t,n){return{column:t,label:t,get stats(){return["min","max"]},get columns(){return[t]},get basis(){return t},toString(){const{min:r,max:i}=e.stats[t],s=sG(r,i,n),o=Me(t),a=s.min===0?o:`(${o} - ${s.min})`,l=`${(s.max-s.min)/s.steps}::DOUBLE`,c=n.offset?`${n.offset} + `:"";return`${s.min} + ${l} * (${c}FLOOR(${a} / ${l})::INTEGER)`}}}function sG(e,t,n){let{steps:r=25,minstep:i=0,nice:s=!0}=n;if(s!==!1){const o=t-e,a=r,l=Math.LN10,c=Math.ceil(Math.log(a)/l);let u=Math.max(i,Math.pow(10,Math.round(Math.log(o)/l)-c));for(;Math.ceil(o/u)>a;)u*=10;const f=[5,2];let d;for(let g=0,v=f.length;g<v;++g)d=u/f[g],d>=i&&o/d<=a&&(u=d);d=Math.log(u);const h=d>=0?0:~~(-d/l)+1,p=Math.pow(10,-h-1);d=Math.floor(e/u+p)*u,e=e<d?d-u:d,t=Math.ceil(t/u)*u,r=Math.round((t-e)/u)}return{min:e,max:t,steps:r}}function Pe(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function gc(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Yb(e){let t,n,r;e.length!==2?(t=Pe,n=(a,l)=>Pe(e(a),l),r=(a,l)=>e(a)-l):(t=e===Pe||e===gc?e:oG,n=e,r=e);function i(a,l,c=0,u=a.length){if(c<u){if(t(l,l)!==0)return u;do{const f=c+u>>>1;n(a[f],l)<0?c=f+1:u=f}while(c<u)}return c}function s(a,l,c=0,u=a.length){if(c<u){if(t(l,l)!==0)return u;do{const f=c+u>>>1;n(a[f],l)<=0?c=f+1:u=f}while(c<u)}return c}function o(a,l,c=0,u=a.length){const f=i(a,l,c,u-1);return f>c&&r(a[f-1],l)>-r(a[f],l)?f-1:f}return{left:i,center:o,right:s}}function oG(){return 0}function zO(e){return e===null?NaN:+e}function*aG(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const lG=Yb(Pe),cG=lG.right;Yb(zO).center;const qb=cG,jO=VO(YO),uG=VO(fG);function VO(e){return function(t,n,r=n){if(!((n=+n)>=0))throw new RangeError("invalid rx");if(!((r=+r)>=0))throw new RangeError("invalid ry");let{data:i,width:s,height:o}=t;if(!((s=Math.floor(s))>=0))throw new RangeError("invalid width");if(!((o=Math.floor(o!==void 0?o:i.length/s))>=0))throw new RangeError("invalid height");if(!s||!o||!n&&!r)return t;const a=n&&e(n),l=r&&e(r),c=i.slice();return a&&l?(Uc(a,c,i,s,o),Uc(a,i,c,s,o),Uc(a,c,i,s,o),Pc(l,i,c,s,o),Pc(l,c,i,s,o),Pc(l,i,c,s,o)):a?(Uc(a,i,c,s,o),Uc(a,c,i,s,o),Uc(a,i,c,s,o)):l&&(Pc(l,i,c,s,o),Pc(l,c,i,s,o),Pc(l,i,c,s,o)),t}}function Uc(e,t,n,r,i){for(let s=0,o=r*i;s<o;)e(t,n,s,s+=r,1)}function Pc(e,t,n,r,i){for(let s=0,o=r*i;s<r;++s)e(t,n,s,s+o,r)}function fG(e){const t=YO(e);return(n,r,i,s,o)=>{i<<=2,s<<=2,o<<=2,t(n,r,i+0,s+0,o),t(n,r,i+1,s+1,o),t(n,r,i+2,s+2,o),t(n,r,i+3,s+3,o)}}function YO(e){const t=Math.floor(e);if(t===e)return dG(e);const n=e-t,r=2*e+1;return(i,s,o,a,l)=>{if(!((a-=l)>=o))return;let c=t*s[o];const u=l*t,f=u+l;for(let d=o,h=o+u;d<h;d+=l)c+=s[Math.min(a,d)];for(let d=o,h=a;d<=h;d+=l)c+=s[Math.min(a,d+u)],i[d]=(c+n*(s[Math.max(o,d-f)]+s[Math.min(a,d+f)]))/r,c-=s[Math.max(o,d-u)]}}function dG(e){const t=2*e+1;return(n,r,i,s,o)=>{if(!((s-=o)>=i))return;let a=e*r[i];const l=o*e;for(let c=i,u=i+l;c<u;c+=o)a+=r[Math.min(s,c)];for(let c=i,u=s;c<=u;c+=o)a+=r[Math.min(s,c+l)],n[c]=a/t,a-=r[Math.max(i,c-l)]}}function Wb(e,t){let n=0;if(t===void 0)for(let r of e)r!=null&&(r=+r)>=r&&++n;else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(i=+i)>=i&&++n}return n}function hG(e){return e.length|0}function pG(e){return!(e>0)}function yG(e){return typeof e!="object"||"length"in e?e:Array.from(e)}function mG(e){return t=>e(...t)}function gG(...e){const t=typeof e[e.length-1]=="function"&&mG(e.pop());e=e.map(yG);const n=e.map(hG),r=e.length-1,i=new Array(r+1).fill(0),s=[];if(r<0||n.some(pG))return s;for(;;){s.push(i.map((a,l)=>e[l][a]));let o=r;for(;++i[o]===n[o];){if(o===0)return t?s.map(t):s;i[o--]=0}}}function bG(e,t){var n=0,r=0;return Float64Array.from(e,t===void 0?i=>n+=+i||0:i=>n+=+t(i,r++,e)||0)}function r3(e,t){let n=0,r,i=0,s=0;if(t===void 0)for(let o of e)o!=null&&(o=+o)>=o&&(r=o-i,i+=r/++n,s+=r*(o-i));else{let o=-1;for(let a of e)(a=t(a,++o,e))!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,s+=r*(a-i))}if(n>1)return s/(n-1)}function ey(e,t){const n=r3(e,t);return n&&Math.sqrt(n)}function yn(e,t){let n,r;if(t===void 0)for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(n===void 0?s>=s&&(n=r=s):(n>s&&(n=s),r<s&&(r=s)))}return[n,r]}class ks{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const s=n[i],o=t+s,a=Math.abs(t)<Math.abs(s)?t-(o-s):s-(o-t);a&&(n[r++]=a),t=o}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,s,o=0;if(n>0){for(o=t[--n];n>0&&(r=o,i=t[--n],o=r+i,s=i-(o-r),!s););n>0&&(s<0&&t[n-1]<0||s>0&&t[n-1]>0)&&(i=s*2,r=o+i,i==r-o&&(o=r))}return o}}class bc extends Map{constructor(t,n=HO){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(eS(this,t))}has(t){return super.has(eS(this,t))}set(t,n){return super.set(qO(this,t),n)}delete(t){return super.delete(WO(this,t))}}class ny extends Set{constructor(t,n=HO){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(eS(this,t))}add(t){return super.add(qO(this,t))}delete(t){return super.delete(WO(this,t))}}function eS({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function qO({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function WO({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function HO(e){return e!==null&&typeof e=="object"?e.valueOf():e}function nS(e){return e}function Vo(e,...t){return i3(e,nS,nS,t)}function Hu(e,t,...n){return i3(e,nS,t,n)}function vG(e,t,...n){return i3(e,Array.from,t,n)}function i3(e,t,n,r){return function i(s,o){if(o>=r.length)return n(s);const a=new bc,l=r[o++];let c=-1;for(const u of s){const f=l(u,++c,s),d=a.get(f);d?d.push(u):a.set(f,[u])}for(const[u,f]of a)a.set(u,i(f,o));return t(a)}(e,0)}function wG(e,t){return Array.from(t,n=>e[n])}function lp(e,...t){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");e=Array.from(e);let[n]=t;if(n&&n.length!==2||t.length>1){const r=Uint32Array.from(e,(i,s)=>s);return t.length>1?(t=t.map(i=>e.map(i)),r.sort((i,s)=>{for(const o of t){const a=cp(o[i],o[s]);if(a)return a}})):(n=e.map(n),r.sort((i,s)=>cp(n[i],n[s]))),wG(e,r)}return e.sort(s3(n))}function s3(e=Pe){if(e===Pe)return cp;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function cp(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}function o3(e,t,n){return(t.length!==2?lp(Hu(e,t,n),([r,i],[s,o])=>Pe(i,o)||Pe(r,s)):lp(Vo(e,n),([r,i],[s,o])=>t(i,o)||Pe(r,s))).map(([r])=>r)}const _G=Math.sqrt(50),SG=Math.sqrt(10),xG=Math.sqrt(2);function Fg(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=_G?10:s>=SG?5:s>=xG?2:1;let a,l,c;return i<0?(c=Math.pow(10,-i)/o,a=Math.round(e*c),l=Math.round(t*c),a/c<e&&++a,l/c>t&&--l,c=-c):(c=Math.pow(10,i)*o,a=Math.round(e/c),l=Math.round(t/c),a*c<e&&++a,l*c>t&&--l),l<a&&.5<=n&&n<2?Fg(e,t,n*2):[a,l,c]}function Ca(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,s,o]=r?Fg(t,e,n):Fg(e,t,n);if(!(s>=i))return[];const a=s-i+1,l=new Array(a);if(r)if(o<0)for(let c=0;c<a;++c)l[c]=(s-c)/-o;else for(let c=0;c<a;++c)l[c]=(s-c)*o;else if(o<0)for(let c=0;c<a;++c)l[c]=(i+c)/-o;else for(let c=0;c<a;++c)l[c]=(i+c)*o;return l}function up(e,t,n){return t=+t,e=+e,n=+n,Fg(e,t,n)[2]}function rS(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?up(t,e,n):up(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function GO(e,t,n){let r;for(;;){const i=up(e,t,n);if(i===r||i===0||!isFinite(i))return[e,t];i>0?(e=Math.floor(e/i)*i,t=Math.ceil(t/i)*i):i<0&&(e=Math.ceil(e*i)/i,t=Math.floor(t*i)/i),r=i}}function a3(e){return Math.max(1,Math.ceil(Math.log(Wb(e))/Math.LN2)+1)}function $e(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function IG(e,t){let n,r=-1,i=-1;if(t===void 0)for(const s of e)++i,s!=null&&(n<s||n===void 0&&s>=s)&&(n=s,r=i);else for(let s of e)(s=t(s,++i,e))!=null&&(n<s||n===void 0&&s>=s)&&(n=s,r=i);return r}function bn(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function TG(e,t){let n,r=-1,i=-1;if(t===void 0)for(const s of e)++i,s!=null&&(n>s||n===void 0&&s>=s)&&(n=s,r=i);else for(let s of e)(s=t(s,++i,e))!=null&&(n>s||n===void 0&&s>=s)&&(n=s,r=i);return r}function XO(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?cp:s3(i);r>n;){if(r-n>600){const l=r-n+1,c=t-n+1,u=Math.log(l),f=.5*Math.exp(2*u/3),d=.5*Math.sqrt(u*f*(l-f)/l)*(c-l/2<0?-1:1),h=Math.max(n,Math.floor(t-c*f/l+d)),p=Math.min(r,Math.floor(t+(l-c)*f/l+d));XO(e,t,h,p,i)}const s=e[t];let o=n,a=r;for(Dd(e,n,t),i(e[r],s)>0&&Dd(e,n,r);o<a;){for(Dd(e,o,a),++o,--a;i(e[o],s)<0;)++o;for(;i(e[a],s)>0;)--a}i(e[n],s)===0?Dd(e,n,a):(++a,Dd(e,a,r)),a<=t&&(n=a+1),t<=a&&(r=a-1)}return e}function Dd(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function l3(e,t=Pe){let n,r=!1;if(t.length===1){let i;for(const s of e){const o=t(s);(r?Pe(o,i)>0:Pe(o,o)===0)&&(n=s,i=o,r=!0)}}else for(const i of e)(r?t(i,n)>0:t(i,i)===0)&&(n=i,r=!0);return n}function Ua(e,t,n){if(e=Float64Array.from(aG(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return bn(e);if(t>=1)return $e(e);var r,i=(r-1)*t,s=Math.floor(i),o=$e(XO(e,s).subarray(0,s+1)),a=bn(e.subarray(s+1));return o+(a-o)*(i-s)}}function EG(e,t,n=zO){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,s=Math.floor(i),o=+n(e[s],s,e),a=+n(e[s+1],s+1,e);return o+(a-o)*(i-s)}}function AG(e,t,n){const r=Wb(e),i=Ua(e,.75)-Ua(e,.25);return r&&i?Math.ceil((n-t)/(2*i*Math.pow(r,-1/3))):1}function QO(e,t,n){const r=Wb(e),i=ey(e);return r&&i?Math.ceil((n-t)*Math.cbrt(r)/(3.49*i)):1}function Hb(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(s=+s)>=s&&(++n,r+=s)}if(n)return r/n}function fp(e,t){return Ua(e,.5,t)}function*MG(e){for(const t of e)yield*t}function KO(e){return Array.from(MG(e))}function ZO(e,t){const n=new bc;if(t===void 0)for(let s of e)s!=null&&s>=s&&n.set(s,(n.get(s)||0)+1);else{let s=-1;for(let o of e)(o=t(o,++s,e))!=null&&o>=o&&n.set(o,(n.get(o)||0)+1)}let r,i=0;for(const[s,o]of n)o>i&&(i=o,r=s);return r}function $G(e,t=NG){const n=[];let r,i=!1;for(const s of e)i&&n.push(t(r,s)),r=s,i=!0;return n}function NG(e,t){return[e,t]}function Nr(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function JO(e,t=Pe){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");let n=Array.from(e);const r=new Float64Array(n.length);t.length!==2&&(n=n.map(t),t=Pe);const i=(a,l)=>t(n[a],n[l]);let s,o;return e=Uint32Array.from(n,(a,l)=>l),e.sort(t===Pe?(a,l)=>cp(n[a],n[l]):s3(i)),e.forEach((a,l)=>{const c=i(a,s===void 0?a:s);c>=0?((s===void 0||c>0)&&(s=a,o=l),r[a]=o):r[a]=NaN}),r}function DG(e,t=Pe){let n,r=!1;if(t.length===1){let i;for(const s of e){const o=t(s);(r?Pe(o,i)<0:Pe(o,o)===0)&&(n=s,i=o,r=!0)}}else for(const i of e)(r?t(i,n)<0:t(i,i)===0)&&(n=i,r=!0);return n}function Ls(e,t){let n=0;if(t===void 0)for(let r of e)(r=+r)&&(n+=r);else{let r=-1;for(let i of e)(i=+t(i,++r,e))&&(n+=i)}return n}function Bg(e){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");return Array.from(e).reverse()}function kG(e){return e}var Fw=1,Bw=2,iS=3,f0=4,PM=1e-6;function OG(e){return"translate("+e+",0)"}function FG(e){return"translate(0,"+e+")"}function BG(e){return t=>+e(t)}function RG(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),n=>+e(n)+t}function LG(){return!this.__axis}function CG(e,t){var n=[],r=null,i=null,s=6,o=6,a=3,l=typeof window<"u"&&window.devicePixelRatio>1?0:.5,c=e===Fw||e===f0?-1:1,u=e===f0||e===Bw?"x":"y",f=e===Fw||e===iS?OG:FG;function d(h){var p=r??(t.ticks?t.ticks.apply(t,n):t.domain()),g=i??(t.tickFormat?t.tickFormat.apply(t,n):kG),v=Math.max(s,0)+a,y=t.range(),m=+y[0]+l,b=+y[y.length-1]+l,w=(t.bandwidth?RG:BG)(t.copy(),l),S=h.selection?h.selection():h,_=S.selectAll(".domain").data([null]),x=S.selectAll(".tick").data(p,t).order(),E=x.exit(),N=x.enter().append("g").attr("class","tick"),I=x.select("line"),A=x.select("text");_=_.merge(_.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),x=x.merge(N),I=I.merge(N.append("line").attr("stroke","currentColor").attr(u+"2",c*s)),A=A.merge(N.append("text").attr("fill","currentColor").attr(u,c*v).attr("dy",e===Fw?"0em":e===iS?"0.71em":"0.32em")),h!==S&&(_=_.transition(h),x=x.transition(h),I=I.transition(h),A=A.transition(h),E=E.transition(h).attr("opacity",PM).attr("transform",function(k){return isFinite(k=w(k))?f(k+l):this.getAttribute("transform")}),N.attr("opacity",PM).attr("transform",function(k){var R=this.parentNode.__axis;return f((R&&isFinite(R=R(k))?R:w(k))+l)})),E.remove(),_.attr("d",e===f0||e===Bw?o?"M"+c*o+","+m+"H"+l+"V"+b+"H"+c*o:"M"+l+","+m+"V"+b:o?"M"+m+","+c*o+"V"+l+"H"+b+"V"+c*o:"M"+m+","+l+"H"+b),x.attr("opacity",1).attr("transform",function(k){return f(w(k)+l)}),I.attr(u+"2",c*s),A.attr(u,c*v).text(g),S.filter(LG).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===Bw?"start":e===f0?"end":"middle"),S.each(function(){this.__axis=w})}return d.scale=function(h){return arguments.length?(t=h,d):t},d.ticks=function(){return n=Array.from(arguments),d},d.tickArguments=function(h){return arguments.length?(n=h==null?[]:Array.from(h),d):n.slice()},d.tickValues=function(h){return arguments.length?(r=h==null?null:Array.from(h),d):r&&r.slice()},d.tickFormat=function(h){return arguments.length?(i=h,d):i},d.tickSize=function(h){return arguments.length?(s=o=+h,d):s},d.tickSizeInner=function(h){return arguments.length?(s=+h,d):s},d.tickSizeOuter=function(h){return arguments.length?(o=+h,d):o},d.tickPadding=function(h){return arguments.length?(a=+h,d):a},d.offset=function(h){return arguments.length?(l=+h,d):l},d}function UG(e){return CG(iS,e)}var PG={value:()=>{}};function Gb(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new hm(n)}function hm(e){this._=e}function zG(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}hm.prototype=Gb.prototype={constructor:hm,on:function(e,t){var n=this._,r=zG(e+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(e=r[s]).type)&&(i=jG(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(i=(e=r[s]).type)n[i]=zM(n[i],e.name,t);else if(t==null)for(i in n)n[i]=zM(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new hm(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function jG(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function zM(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=PG,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var sS="http://www.w3.org/1999/xhtml";const vc={svg:"http://www.w3.org/2000/svg",xhtml:sS,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Xb(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),vc.hasOwnProperty(t)?{space:vc[t],local:e}:e}function VG(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===sS&&t.documentElement.namespaceURI===sS?t.createElement(e):t.createElementNS(n,e)}}function YG(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Qb(e){var t=Xb(e);return(t.local?YG:VG)(t)}function qG(){}function c3(e){return e==null?qG:function(){return this.querySelector(e)}}function WG(e){typeof e!="function"&&(e=c3(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=new Array(o),l,c,u=0;u<o;++u)(l=s[u])&&(c=e.call(l,l.__data__,u,s))&&("__data__"in l&&(c.__data__=l.__data__),a[u]=c);return new Lr(r,this._parents)}function HG(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function GG(){return[]}function tF(e){return e==null?GG:function(){return this.querySelectorAll(e)}}function XG(e){return function(){return HG(e.apply(this,arguments))}}function QG(e){typeof e=="function"?e=XG(e):e=tF(e);for(var t=this._groups,n=t.length,r=[],i=[],s=0;s<n;++s)for(var o=t[s],a=o.length,l,c=0;c<a;++c)(l=o[c])&&(r.push(e.call(l,l.__data__,c,o)),i.push(l));return new Lr(r,i)}function eF(e){return function(){return this.matches(e)}}function nF(e){return function(t){return t.matches(e)}}var KG=Array.prototype.find;function ZG(e){return function(){return KG.call(this.children,e)}}function JG(){return this.firstElementChild}function tX(e){return this.select(e==null?JG:ZG(typeof e=="function"?e:nF(e)))}var eX=Array.prototype.filter;function nX(){return Array.from(this.children)}function rX(e){return function(){return eX.call(this.children,e)}}function iX(e){return this.selectAll(e==null?nX:rX(typeof e=="function"?e:nF(e)))}function sX(e){typeof e!="function"&&(e=eF(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],l,c=0;c<o;++c)(l=s[c])&&e.call(l,l.__data__,c,s)&&a.push(l);return new Lr(r,this._parents)}function rF(e){return new Array(e.length)}function oX(){return new Lr(this._enter||this._groups.map(rF),this._parents)}function Rg(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Rg.prototype={constructor:Rg,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function aX(e){return function(){return e}}function lX(e,t,n,r,i,s){for(var o=0,a,l=t.length,c=s.length;o<c;++o)(a=t[o])?(a.__data__=s[o],r[o]=a):n[o]=new Rg(e,s[o]);for(;o<l;++o)(a=t[o])&&(i[o]=a)}function cX(e,t,n,r,i,s,o){var a,l,c=new Map,u=t.length,f=s.length,d=new Array(u),h;for(a=0;a<u;++a)(l=t[a])&&(d[a]=h=o.call(l,l.__data__,a,t)+"",c.has(h)?i[a]=l:c.set(h,l));for(a=0;a<f;++a)h=o.call(e,s[a],a,s)+"",(l=c.get(h))?(r[a]=l,l.__data__=s[a],c.delete(h)):n[a]=new Rg(e,s[a]);for(a=0;a<u;++a)(l=t[a])&&c.get(d[a])===l&&(i[a]=l)}function uX(e){return e.__data__}function fX(e,t){if(!arguments.length)return Array.from(this,uX);var n=t?cX:lX,r=this._parents,i=this._groups;typeof e!="function"&&(e=aX(e));for(var s=i.length,o=new Array(s),a=new Array(s),l=new Array(s),c=0;c<s;++c){var u=r[c],f=i[c],d=f.length,h=dX(e.call(u,u&&u.__data__,c,r)),p=h.length,g=a[c]=new Array(p),v=o[c]=new Array(p),y=l[c]=new Array(d);n(u,f,g,v,y,h,t);for(var m=0,b=0,w,S;m<p;++m)if(w=g[m]){for(m>=b&&(b=m+1);!(S=v[b])&&++b<p;);w._next=S||null}}return o=new Lr(o,r),o._enter=a,o._exit=l,o}function dX(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function hX(){return new Lr(this._exit||this._groups.map(rF),this._parents)}function pX(e,t,n){var r=this.enter(),i=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function yX(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,s=r.length,o=Math.min(i,s),a=new Array(i),l=0;l<o;++l)for(var c=n[l],u=r[l],f=c.length,d=a[l]=new Array(f),h,p=0;p<f;++p)(h=c[p]||u[p])&&(d[p]=h);for(;l<i;++l)a[l]=n[l];return new Lr(a,this._parents)}function mX(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function gX(e){e||(e=bX);function t(f,d){return f&&d?e(f.__data__,d.__data__):!f-!d}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],a=o.length,l=i[s]=new Array(a),c,u=0;u<a;++u)(c=o[u])&&(l[u]=c);l.sort(t)}return new Lr(i,this._parents).order()}function bX(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function vX(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function wX(){return Array.from(this)}function _X(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function SX(){let e=0;for(const t of this)++e;return e}function xX(){return!this.node()}function IX(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],s=0,o=i.length,a;s<o;++s)(a=i[s])&&e.call(a,a.__data__,s,i);return this}function TX(e){return function(){this.removeAttribute(e)}}function EX(e){return function(){this.removeAttributeNS(e.space,e.local)}}function AX(e,t){return function(){this.setAttribute(e,t)}}function MX(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function $X(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function NX(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function DX(e,t){var n=Xb(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?EX:TX:typeof t=="function"?n.local?NX:$X:n.local?MX:AX)(n,t))}function iF(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function kX(e){return function(){this.style.removeProperty(e)}}function OX(e,t,n){return function(){this.style.setProperty(e,t,n)}}function FX(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function BX(e,t,n){return arguments.length>1?this.each((t==null?kX:typeof t=="function"?FX:OX)(e,t,n??"")):If(this.node(),e)}function If(e,t){return e.style.getPropertyValue(t)||iF(e).getComputedStyle(e,null).getPropertyValue(t)}function RX(e){return function(){delete this[e]}}function LX(e,t){return function(){this[e]=t}}function CX(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function UX(e,t){return arguments.length>1?this.each((t==null?RX:typeof t=="function"?CX:LX)(e,t)):this.node()[e]}function sF(e){return e.trim().split(/^|\s+/)}function u3(e){return e.classList||new oF(e)}function oF(e){this._node=e,this._names=sF(e.getAttribute("class")||"")}oF.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function aF(e,t){for(var n=u3(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function lF(e,t){for(var n=u3(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function PX(e){return function(){aF(this,e)}}function zX(e){return function(){lF(this,e)}}function jX(e,t){return function(){(t.apply(this,arguments)?aF:lF)(this,e)}}function VX(e,t){var n=sF(e+"");if(arguments.length<2){for(var r=u3(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?jX:t?PX:zX)(n,t))}function YX(){this.textContent=""}function qX(e){return function(){this.textContent=e}}function WX(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function HX(e){return arguments.length?this.each(e==null?YX:(typeof e=="function"?WX:qX)(e)):this.node().textContent}function GX(){this.innerHTML=""}function XX(e){return function(){this.innerHTML=e}}function QX(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function KX(e){return arguments.length?this.each(e==null?GX:(typeof e=="function"?QX:XX)(e)):this.node().innerHTML}function ZX(){this.nextSibling&&this.parentNode.appendChild(this)}function JX(){return this.each(ZX)}function tQ(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function eQ(){return this.each(tQ)}function nQ(e){var t=typeof e=="function"?e:Qb(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function rQ(){return null}function iQ(e,t){var n=typeof e=="function"?e:Qb(e),r=t==null?rQ:typeof t=="function"?t:c3(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function sQ(){var e=this.parentNode;e&&e.removeChild(this)}function oQ(){return this.each(sQ)}function aQ(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function lQ(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function cQ(e){return this.select(e?lQ:aQ)}function uQ(e){return arguments.length?this.property("__data__",e):this.node().__data__}function fQ(e){return function(t){e.call(this,t,this.__data__)}}function dQ(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function hQ(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,s;n<i;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function pQ(e,t,n){return function(){var r=this.__on,i,s=fQ(t);if(r){for(var o=0,a=r.length;o<a;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=t;return}}this.addEventListener(e.type,s,n),i={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(i):this.__on=[i]}}function yQ(e,t,n){var r=dQ(e+""),i,s=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,c=a.length,u;l<c;++l)for(i=0,u=a[l];i<s;++i)if((o=r[i]).type===u.type&&o.name===u.name)return u.value}return}for(a=t?pQ:hQ,i=0;i<s;++i)this.each(a(r[i],t,n));return this}function cF(e,t,n){var r=iF(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function mQ(e,t){return function(){return cF(this,e,t)}}function gQ(e,t){return function(){return cF(this,e,t.apply(this,arguments))}}function bQ(e,t){return this.each((typeof t=="function"?gQ:mQ)(e,t))}function*vQ(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var uF=[null];function Lr(e,t){this._groups=e,this._parents=t}function ry(){return new Lr([[document.documentElement]],uF)}function wQ(){return this}Lr.prototype=ry.prototype={constructor:Lr,select:WG,selectAll:QG,selectChild:tX,selectChildren:iX,filter:sX,data:fX,enter:oX,exit:hX,join:pX,merge:yX,selection:wQ,order:mX,sort:gX,call:vX,nodes:wX,node:_X,size:SX,empty:xX,each:IX,attr:DX,style:BX,property:UX,classed:VX,text:HX,html:KX,raise:JX,lower:eQ,append:nQ,insert:iQ,remove:oQ,clone:cQ,datum:uQ,on:yQ,dispatch:bQ,[Symbol.iterator]:vQ};function ye(e){return typeof e=="string"?new Lr([[document.querySelector(e)]],[document.documentElement]):new Lr([[e]],uF)}function _Q(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Mi(e,t){if(e=_Q(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const oS={capture:!0,passive:!1};function aS(e){e.preventDefault(),e.stopImmediatePropagation()}function fF(e){var t=e.document.documentElement,n=ye(e).on("dragstart.drag",aS,oS);"onselectstart"in t?n.on("selectstart.drag",aS,oS):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function dF(e,t){var n=e.document.documentElement,r=ye(e).on("dragstart.drag",null);t&&(r.on("click.drag",aS,oS),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function nd(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function iy(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function il(){}var wc=.7,Tf=1/wc,Gu="\\s*([+-]?\\d+)\\s*",dp="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Os="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",SQ=/^#([0-9a-f]{3,8})$/,xQ=new RegExp(`^rgb\\(${Gu},${Gu},${Gu}\\)$`),IQ=new RegExp(`^rgb\\(${Os},${Os},${Os}\\)$`),TQ=new RegExp(`^rgba\\(${Gu},${Gu},${Gu},${dp}\\)$`),EQ=new RegExp(`^rgba\\(${Os},${Os},${Os},${dp}\\)$`),AQ=new RegExp(`^hsl\\(${dp},${Os},${Os}\\)$`),MQ=new RegExp(`^hsla\\(${dp},${Os},${Os},${dp}\\)$`),jM={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};nd(il,Pa,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:VM,formatHex:VM,formatHex8:$Q,formatHsl:NQ,formatRgb:YM,toString:YM});function VM(){return this.rgb().formatHex()}function $Q(){return this.rgb().formatHex8()}function NQ(){return hF(this).formatHsl()}function YM(){return this.rgb().formatRgb()}function Pa(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=SQ.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?qM(t):n===3?new mn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?d0(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?d0(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=xQ.exec(e))?new mn(t[1],t[2],t[3],1):(t=IQ.exec(e))?new mn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=TQ.exec(e))?d0(t[1],t[2],t[3],t[4]):(t=EQ.exec(e))?d0(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=AQ.exec(e))?GM(t[1],t[2]/100,t[3]/100,1):(t=MQ.exec(e))?GM(t[1],t[2]/100,t[3]/100,t[4]):jM.hasOwnProperty(e)?qM(jM[e]):e==="transparent"?new mn(NaN,NaN,NaN,0):null}function qM(e){return new mn(e>>16&255,e>>8&255,e&255,1)}function d0(e,t,n,r){return r<=0&&(e=t=n=NaN),new mn(e,t,n,r)}function f3(e){return e instanceof il||(e=Pa(e)),e?(e=e.rgb(),new mn(e.r,e.g,e.b,e.opacity)):new mn}function gi(e,t,n,r){return arguments.length===1?f3(e):new mn(e,t,n,r??1)}function mn(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}nd(mn,gi,iy(il,{brighter(e){return e=e==null?Tf:Math.pow(Tf,e),new mn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?wc:Math.pow(wc,e),new mn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new mn(ec(this.r),ec(this.g),ec(this.b),Lg(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:WM,formatHex:WM,formatHex8:DQ,formatRgb:HM,toString:HM}));function WM(){return`#${Ul(this.r)}${Ul(this.g)}${Ul(this.b)}`}function DQ(){return`#${Ul(this.r)}${Ul(this.g)}${Ul(this.b)}${Ul((isNaN(this.opacity)?1:this.opacity)*255)}`}function HM(){const e=Lg(this.opacity);return`${e===1?"rgb(":"rgba("}${ec(this.r)}, ${ec(this.g)}, ${ec(this.b)}${e===1?")":`, ${e})`}`}function Lg(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function ec(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Ul(e){return e=ec(e),(e<16?"0":"")+e.toString(16)}function GM(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new ki(e,t,n,r)}function hF(e){if(e instanceof ki)return new ki(e.h,e.s,e.l,e.opacity);if(e instanceof il||(e=Pa(e)),!e)return new ki;if(e instanceof ki)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),o=NaN,a=s-i,l=(s+i)/2;return a?(t===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-t)/a+2:o=(t-n)/a+4,a/=l<.5?s+i:2-s-i,o*=60):a=l>0&&l<1?0:o,new ki(o,a,l,e.opacity)}function lS(e,t,n,r){return arguments.length===1?hF(e):new ki(e,t,n,r??1)}function ki(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}nd(ki,lS,iy(il,{brighter(e){return e=e==null?Tf:Math.pow(Tf,e),new ki(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?wc:Math.pow(wc,e),new ki(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new mn(Rw(e>=240?e-240:e+120,i,r),Rw(e,i,r),Rw(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new ki(XM(this.h),h0(this.s),h0(this.l),Lg(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Lg(this.opacity);return`${e===1?"hsl(":"hsla("}${XM(this.h)}, ${h0(this.s)*100}%, ${h0(this.l)*100}%${e===1?")":`, ${e})`}`}}));function XM(e){return e=(e||0)%360,e<0?e+360:e}function h0(e){return Math.max(0,Math.min(1,e||0))}function Rw(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const pF=Math.PI/180,yF=180/Math.PI,Cg=18,mF=.96422,gF=1,bF=.82521,vF=4/29,Xu=6/29,wF=3*Xu*Xu,kQ=Xu*Xu*Xu;function _F(e){if(e instanceof Fs)return new Fs(e.l,e.a,e.b,e.opacity);if(e instanceof wo)return SF(e);e instanceof mn||(e=f3(e));var t=Pw(e.r),n=Pw(e.g),r=Pw(e.b),i=Lw((.2225045*t+.7168786*n+.0606169*r)/gF),s,o;return t===n&&n===r?s=o=i:(s=Lw((.4360747*t+.3850649*n+.1430804*r)/mF),o=Lw((.0139322*t+.0971045*n+.7141733*r)/bF)),new Fs(116*i-16,500*(s-i),200*(i-o),e.opacity)}function cS(e,t,n,r){return arguments.length===1?_F(e):new Fs(e,t,n,r??1)}function Fs(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}nd(Fs,cS,iy(il,{brighter(e){return new Fs(this.l+Cg*(e??1),this.a,this.b,this.opacity)},darker(e){return new Fs(this.l-Cg*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=mF*Cw(t),e=gF*Cw(e),n=bF*Cw(n),new mn(Uw(3.1338561*t-1.6168667*e-.4906146*n),Uw(-.9787684*t+1.9161415*e+.033454*n),Uw(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function Lw(e){return e>kQ?Math.pow(e,1/3):e/wF+vF}function Cw(e){return e>Xu?e*e*e:wF*(e-vF)}function Uw(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function Pw(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function OQ(e){if(e instanceof wo)return new wo(e.h,e.c,e.l,e.opacity);if(e instanceof Fs||(e=_F(e)),e.a===0&&e.b===0)return new wo(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*yF;return new wo(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function uS(e,t,n,r){return arguments.length===1?OQ(e):new wo(e,t,n,r??1)}function wo(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function SF(e){if(isNaN(e.h))return new Fs(e.l,0,0,e.opacity);var t=e.h*pF;return new Fs(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}nd(wo,uS,iy(il,{brighter(e){return new wo(this.h,this.c,this.l+Cg*(e??1),this.opacity)},darker(e){return new wo(this.h,this.c,this.l-Cg*(e??1),this.opacity)},rgb(){return SF(this).rgb()}}));var xF=-.14861,d3=1.78277,h3=-.29227,Kb=-.90649,hp=1.97294,QM=hp*Kb,KM=hp*d3,ZM=d3*h3-Kb*xF;function FQ(e){if(e instanceof nc)return new nc(e.h,e.s,e.l,e.opacity);e instanceof mn||(e=f3(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(ZM*r+QM*t-KM*n)/(ZM+QM-KM),s=r-i,o=(hp*(n-i)-h3*s)/Kb,a=Math.sqrt(o*o+s*s)/(hp*i*(1-i)),l=a?Math.atan2(o,s)*yF-120:NaN;return new nc(l<0?l+360:l,a,i,e.opacity)}function Cs(e,t,n,r){return arguments.length===1?FQ(e):new nc(e,t,n,r??1)}function nc(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}nd(nc,Cs,iy(il,{brighter(e){return e=e==null?Tf:Math.pow(Tf,e),new nc(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?wc:Math.pow(wc,e),new nc(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*pF,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new mn(255*(t+n*(xF*r+d3*i)),255*(t+n*(h3*r+Kb*i)),255*(t+n*(hp*r)),this.opacity)}}));function BQ(e,t,n,r,i){var s=e*e,o=s*e;return((1-3*e+3*s-o)*t+(4-6*s+3*o)*n+(1+3*e+3*s-3*o)*r+o*i)/6}function RQ(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],s=e[r+1],o=r>0?e[r-1]:2*i-s,a=r<t-1?e[r+2]:2*s-i;return BQ((n-r/t)*t,o,i,s,a)}}const Zb=e=>()=>e;function IF(e,t){return function(n){return e+n*t}}function LQ(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function p3(e,t){var n=t-e;return n?IF(e,n>180||n<-180?n-360*Math.round(n/360):n):Zb(isNaN(e)?t:e)}function CQ(e){return(e=+e)==1?Bn:function(t,n){return n-t?LQ(t,n,e):Zb(isNaN(t)?n:t)}}function Bn(e,t){var n=t-e;return n?IF(e,n):Zb(isNaN(e)?t:e)}const _c=function e(t){var n=CQ(t);function r(i,s){var o=n((i=gi(i)).r,(s=gi(s)).r),a=n(i.g,s.g),l=n(i.b,s.b),c=Bn(i.opacity,s.opacity);return function(u){return i.r=o(u),i.g=a(u),i.b=l(u),i.opacity=c(u),i+""}}return r.gamma=e,r}(1);function UQ(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),s=new Array(n),o,a;for(o=0;o<n;++o)a=gi(t[o]),r[o]=a.r||0,i[o]=a.g||0,s[o]=a.b||0;return r=e(r),i=e(i),s=e(s),a.opacity=1,function(l){return a.r=r(l),a.g=i(l),a.b=s(l),a+""}}}var PQ=UQ(RQ);function zQ(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function jQ(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function VQ(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=rd(e[o],t[o]);for(;o<n;++o)s[o]=t[o];return function(a){for(o=0;o<r;++o)s[o]=i[o](a);return s}}function YQ(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function kn(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function qQ(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=rd(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var fS=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,zw=new RegExp(fS.source,"g");function WQ(e){return function(){return e}}function HQ(e){return function(t){return e(t)+""}}function TF(e,t){var n=fS.lastIndex=zw.lastIndex=0,r,i,s,o=-1,a=[],l=[];for(e=e+"",t=t+"";(r=fS.exec(e))&&(i=zw.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,l.push({i:o,x:kn(r,i)})),n=zw.lastIndex;return n<t.length&&(s=t.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?l[0]?HQ(l[0].x):WQ(t):(t=l.length,function(c){for(var u=0,f;u<t;++u)a[(f=l[u]).i]=f.x(c);return a.join("")})}function rd(e,t){var n=typeof t,r;return t==null||n==="boolean"?Zb(t):(n==="number"?kn:n==="string"?(r=Pa(t))?(t=r,_c):TF:t instanceof Pa?_c:t instanceof Date?YQ:jQ(t)?zQ:Array.isArray(t)?VQ:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?qQ:kn)(e,t)}function y3(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var JM=180/Math.PI,dS={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function EF(e,t,n,r,i,s){var o,a,l;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,l/=a),e*r<t*n&&(e=-e,t=-t,l=-l,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*JM,skewX:Math.atan(l)*JM,scaleX:o,scaleY:a}}var p0;function GQ(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?dS:EF(t.a,t.b,t.c,t.d,t.e,t.f)}function XQ(e){return e==null||(p0||(p0=document.createElementNS("http://www.w3.org/2000/svg","g")),p0.setAttribute("transform",e),!(e=p0.transform.baseVal.consolidate()))?dS:(e=e.matrix,EF(e.a,e.b,e.c,e.d,e.e,e.f))}function AF(e,t,n,r){function i(c){return c.length?c.pop()+" ":""}function s(c,u,f,d,h,p){if(c!==f||u!==d){var g=h.push("translate(",null,t,null,n);p.push({i:g-4,x:kn(c,f)},{i:g-2,x:kn(u,d)})}else(f||d)&&h.push("translate("+f+t+d+n)}function o(c,u,f,d){c!==u?(c-u>180?u+=360:u-c>180&&(c+=360),d.push({i:f.push(i(f)+"rotate(",null,r)-2,x:kn(c,u)})):u&&f.push(i(f)+"rotate("+u+r)}function a(c,u,f,d){c!==u?d.push({i:f.push(i(f)+"skewX(",null,r)-2,x:kn(c,u)}):u&&f.push(i(f)+"skewX("+u+r)}function l(c,u,f,d,h,p){if(c!==f||u!==d){var g=h.push(i(h)+"scale(",null,",",null,")");p.push({i:g-4,x:kn(c,f)},{i:g-2,x:kn(u,d)})}else(f!==1||d!==1)&&h.push(i(h)+"scale("+f+","+d+")")}return function(c,u){var f=[],d=[];return c=e(c),u=e(u),s(c.translateX,c.translateY,u.translateX,u.translateY,f,d),o(c.rotate,u.rotate,f,d),a(c.skewX,u.skewX,f,d),l(c.scaleX,c.scaleY,u.scaleX,u.scaleY,f,d),c=u=null,function(h){for(var p=-1,g=d.length,v;++p<g;)f[(v=d[p]).i]=v.x(h);return f.join("")}}}var QQ=AF(GQ,"px, ","px)","deg)"),KQ=AF(XQ,", ",")",")"),ZQ=1e-12;function t6(e){return((e=Math.exp(e))+1/e)/2}function JQ(e){return((e=Math.exp(e))-1/e)/2}function tK(e){return((e=Math.exp(2*e))-1)/(e+1)}const eK=function e(t,n,r){function i(s,o){var a=s[0],l=s[1],c=s[2],u=o[0],f=o[1],d=o[2],h=u-a,p=f-l,g=h*h+p*p,v,y;if(g<ZQ)y=Math.log(d/c)/t,v=function(x){return[a+x*h,l+x*p,c*Math.exp(t*x*y)]};else{var m=Math.sqrt(g),b=(d*d-c*c+r*g)/(2*c*n*m),w=(d*d-c*c-r*g)/(2*d*n*m),S=Math.log(Math.sqrt(b*b+1)-b),_=Math.log(Math.sqrt(w*w+1)-w);y=(_-S)/t,v=function(x){var E=x*y,N=t6(S),I=c/(n*m)*(N*tK(t*E+S)-JQ(S));return[a+I*h,l+I*p,c*N/t6(t*E+S)]}}return v.duration=y*1e3*t/Math.SQRT2,v}return i.rho=function(s){var o=Math.max(.001,+s),a=o*o,l=a*a;return e(o,a,l)},i}(Math.SQRT2,2,4);function nK(e){return function(t,n){var r=e((t=lS(t)).h,(n=lS(n)).h),i=Bn(t.s,n.s),s=Bn(t.l,n.l),o=Bn(t.opacity,n.opacity);return function(a){return t.h=r(a),t.s=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const rK=nK(p3);function iK(e,t){var n=Bn((e=cS(e)).l,(t=cS(t)).l),r=Bn(e.a,t.a),i=Bn(e.b,t.b),s=Bn(e.opacity,t.opacity);return function(o){return e.l=n(o),e.a=r(o),e.b=i(o),e.opacity=s(o),e+""}}function sK(e){return function(t,n){var r=e((t=uS(t)).h,(n=uS(n)).h),i=Bn(t.c,n.c),s=Bn(t.l,n.l),o=Bn(t.opacity,n.opacity);return function(a){return t.h=r(a),t.c=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const oK=sK(p3);function MF(e){return function t(n){n=+n;function r(i,s){var o=e((i=Cs(i)).h,(s=Cs(s)).h),a=Bn(i.s,s.s),l=Bn(i.l,s.l),c=Bn(i.opacity,s.opacity);return function(u){return i.h=o(u),i.s=a(u),i.l=l(Math.pow(u,n)),i.opacity=c(u),i+""}}return r.gamma=t,r}(1)}MF(p3);var m3=MF(Bn);function Jb(e,t){t===void 0&&(t=e,e=rd);for(var n=0,r=t.length-1,i=t[0],s=new Array(r<0?0:r);n<r;)s[n]=e(i,i=t[++n]);return function(o){var a=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return s[a](o-a)}}function Vi(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}var Ef=0,ih=0,kd=0,$F=1e3,Ug,sh,Pg=0,Sc=0,tv=0,pp=typeof performance=="object"&&performance.now?performance:Date,NF=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function g3(){return Sc||(NF(aK),Sc=pp.now()+tv)}function aK(){Sc=0}function zg(){this._call=this._time=this._next=null}zg.prototype=DF.prototype={constructor:zg,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?g3():+n)+(t==null?0:+t),!this._next&&sh!==this&&(sh?sh._next=this:Ug=this,sh=this),this._call=e,this._time=n,hS()},stop:function(){this._call&&(this._call=null,this._time=1/0,hS())}};function DF(e,t,n){var r=new zg;return r.restart(e,t,n),r}function lK(){g3(),++Ef;for(var e=Ug,t;e;)(t=Sc-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Ef}function e6(){Sc=(Pg=pp.now())+tv,Ef=ih=0;try{lK()}finally{Ef=0,uK(),Sc=0}}function cK(){var e=pp.now(),t=e-Pg;t>$F&&(tv-=t,Pg=e)}function uK(){for(var e,t=Ug,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Ug=n);sh=e,hS(r)}function hS(e){if(!Ef){ih&&(ih=clearTimeout(ih));var t=e-Sc;t>24?(e<1/0&&(ih=setTimeout(e6,e-pp.now()-tv)),kd&&(kd=clearInterval(kd))):(kd||(Pg=pp.now(),kd=setInterval(cK,$F)),Ef=1,NF(e6))}}function n6(e,t,n){var r=new zg;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var fK=Gb("start","end","cancel","interrupt"),dK=[],kF=0,r6=1,pS=2,pm=3,i6=4,yS=5,ym=6;function ev(e,t,n,r,i,s){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;hK(e,n,{name:t,index:r,group:i,on:fK,tween:dK,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:kF})}function b3(e,t){var n=Qi(e,t);if(n.state>kF)throw new Error("too late; already scheduled");return n}function js(e,t){var n=Qi(e,t);if(n.state>pm)throw new Error("too late; already running");return n}function Qi(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function hK(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=DF(s,0,n.time);function s(c){n.state=r6,n.timer.restart(o,n.delay,n.time),n.delay<=c&&o(c-n.delay)}function o(c){var u,f,d,h;if(n.state!==r6)return l();for(u in r)if(h=r[u],h.name===n.name){if(h.state===pm)return n6(o);h.state===i6?(h.state=ym,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[u]):+u<t&&(h.state=ym,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[u])}if(n6(function(){n.state===pm&&(n.state=i6,n.timer.restart(a,n.delay,n.time),a(c))}),n.state=pS,n.on.call("start",e,e.__data__,n.index,n.group),n.state===pS){for(n.state=pm,i=new Array(d=n.tween.length),u=0,f=-1;u<d;++u)(h=n.tween[u].value.call(e,e.__data__,n.index,n.group))&&(i[++f]=h);i.length=f+1}}function a(c){for(var u=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(l),n.state=yS,1),f=-1,d=i.length;++f<d;)i[f].call(e,u);n.state===yS&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=ym,n.timer.stop(),delete r[t];for(var c in r)return;delete e.__transition}}function Qu(e,t){var n=e.__transition,r,i,s=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){s=!1;continue}i=r.state>pS&&r.state<yS,r.state=ym,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}s&&delete e.__transition}}function pK(e){return this.each(function(){Qu(this,e)})}function yK(e,t){var n,r;return function(){var i=js(this,e),s=i.tween;if(s!==n){r=n=s;for(var o=0,a=r.length;o<a;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function mK(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=js(this,e),o=s.tween;if(o!==r){i=(r=o).slice();for(var a={name:t,value:n},l=0,c=i.length;l<c;++l)if(i[l].name===t){i[l]=a;break}l===c&&i.push(a)}s.tween=i}}function gK(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Qi(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?yK:mK)(n,e,t))}function v3(e,t,n){var r=e._id;return e.each(function(){var i=js(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return Qi(i,r).value[t]}}function OF(e,t){var n;return(typeof t=="number"?kn:t instanceof Pa?_c:(n=Pa(t))?(t=n,_c):TF)(e,t)}function bK(e){return function(){this.removeAttribute(e)}}function vK(e){return function(){this.removeAttributeNS(e.space,e.local)}}function wK(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttribute(e);return o===i?null:o===r?s:s=t(r=o,n)}}function _K(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?s:s=t(r=o,n)}}function SK(e,t,n){var r,i,s;return function(){var o,a=n(this),l;return a==null?void this.removeAttribute(e):(o=this.getAttribute(e),l=a+"",o===l?null:o===r&&l===i?s:(i=l,s=t(r=o,a)))}}function xK(e,t,n){var r,i,s;return function(){var o,a=n(this),l;return a==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),l=a+"",o===l?null:o===r&&l===i?s:(i=l,s=t(r=o,a)))}}function IK(e,t){var n=Xb(e),r=n==="transform"?KQ:OF;return this.attrTween(e,typeof t=="function"?(n.local?xK:SK)(n,r,v3(this,"attr."+e,t)):t==null?(n.local?vK:bK)(n):(n.local?_K:wK)(n,r,t))}function TK(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function EK(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function AK(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&EK(e,s)),n}return i._value=t,i}function MK(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&TK(e,s)),n}return i._value=t,i}function $K(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=Xb(e);return this.tween(n,(r.local?AK:MK)(r,t))}function NK(e,t){return function(){b3(this,e).delay=+t.apply(this,arguments)}}function DK(e,t){return t=+t,function(){b3(this,e).delay=t}}function kK(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?NK:DK)(t,e)):Qi(this.node(),t).delay}function OK(e,t){return function(){js(this,e).duration=+t.apply(this,arguments)}}function FK(e,t){return t=+t,function(){js(this,e).duration=t}}function BK(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?OK:FK)(t,e)):Qi(this.node(),t).duration}function RK(e,t){if(typeof t!="function")throw new Error;return function(){js(this,e).ease=t}}function LK(e){var t=this._id;return arguments.length?this.each(RK(t,e)):Qi(this.node(),t).ease}function CK(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;js(this,e).ease=n}}function UK(e){if(typeof e!="function")throw new Error;return this.each(CK(this._id,e))}function PK(e){typeof e!="function"&&(e=eF(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],l,c=0;c<o;++c)(l=s[c])&&e.call(l,l.__data__,c,s)&&a.push(l);return new Ro(r,this._parents,this._name,this._id)}function zK(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var l=t[a],c=n[a],u=l.length,f=o[a]=new Array(u),d,h=0;h<u;++h)(d=l[h]||c[h])&&(f[h]=d);for(;a<r;++a)o[a]=t[a];return new Ro(o,this._parents,this._name,this._id)}function jK(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function VK(e,t,n){var r,i,s=jK(t)?b3:js;return function(){var o=s(this,e),a=o.on;a!==r&&(i=(r=a).copy()).on(t,n),o.on=i}}function YK(e,t){var n=this._id;return arguments.length<2?Qi(this.node(),n).on.on(e):this.each(VK(n,e,t))}function qK(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function WK(){return this.on("end.remove",qK(this._id))}function HK(e){var t=this._name,n=this._id;typeof e!="function"&&(e=c3(e));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a=r[o],l=a.length,c=s[o]=new Array(l),u,f,d=0;d<l;++d)(u=a[d])&&(f=e.call(u,u.__data__,d,a))&&("__data__"in u&&(f.__data__=u.__data__),c[d]=f,ev(c[d],t,n,d,c,Qi(u,n)));return new Ro(s,this._parents,t,n)}function GK(e){var t=this._name,n=this._id;typeof e!="function"&&(e=tF(e));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var l=r[a],c=l.length,u,f=0;f<c;++f)if(u=l[f]){for(var d=e.call(u,u.__data__,f,l),h,p=Qi(u,n),g=0,v=d.length;g<v;++g)(h=d[g])&&ev(h,t,n,g,d,p);s.push(d),o.push(u)}return new Ro(s,o,t,n)}var XK=ry.prototype.constructor;function QK(){return new XK(this._groups,this._parents)}function KK(e,t){var n,r,i;return function(){var s=If(this,e),o=(this.style.removeProperty(e),If(this,e));return s===o?null:s===n&&o===r?i:i=t(n=s,r=o)}}function FF(e){return function(){this.style.removeProperty(e)}}function ZK(e,t,n){var r,i=n+"",s;return function(){var o=If(this,e);return o===i?null:o===r?s:s=t(r=o,n)}}function JK(e,t,n){var r,i,s;return function(){var o=If(this,e),a=n(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(e),If(this,e))),o===l?null:o===r&&l===i?s:(i=l,s=t(r=o,a))}}function tZ(e,t){var n,r,i,s="style."+t,o="end."+s,a;return function(){var l=js(this,e),c=l.on,u=l.value[s]==null?a||(a=FF(t)):void 0;(c!==n||i!==u)&&(r=(n=c).copy()).on(o,i=u),l.on=r}}function eZ(e,t,n){var r=(e+="")=="transform"?QQ:OF;return t==null?this.styleTween(e,KK(e,r)).on("end.style."+e,FF(e)):typeof t=="function"?this.styleTween(e,JK(e,r,v3(this,"style."+e,t))).each(tZ(this._id,e)):this.styleTween(e,ZK(e,r,t),n).on("end.style."+e,null)}function nZ(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function rZ(e,t,n){var r,i;function s(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&nZ(e,o,n)),r}return s._value=t,s}function iZ(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,rZ(e,t,n??""))}function sZ(e){return function(){this.textContent=e}}function oZ(e){return function(){var t=e(this);this.textContent=t??""}}function aZ(e){return this.tween("text",typeof e=="function"?oZ(v3(this,"text",e)):sZ(e==null?"":e+""))}function lZ(e){return function(t){this.textContent=e.call(this,t)}}function cZ(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&lZ(i)),t}return r._value=e,r}function uZ(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,cZ(e))}function fZ(){for(var e=this._name,t=this._id,n=BF(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,l,c=0;c<a;++c)if(l=o[c]){var u=Qi(l,t);ev(l,e,n,c,o,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new Ro(r,this._parents,e,n)}function dZ(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var a={value:o},l={value:function(){--i===0&&s()}};n.each(function(){var c=js(this,r),u=c.on;u!==e&&(t=(e=u).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(l)),c.on=t}),i===0&&s()})}var hZ=0;function Ro(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function BF(){return++hZ}var Ws=ry.prototype;Ro.prototype={constructor:Ro,select:HK,selectAll:GK,selectChild:Ws.selectChild,selectChildren:Ws.selectChildren,filter:PK,merge:zK,selection:QK,transition:fZ,call:Ws.call,nodes:Ws.nodes,node:Ws.node,size:Ws.size,empty:Ws.empty,each:Ws.each,on:YK,attr:IK,attrTween:$K,style:eZ,styleTween:iZ,text:aZ,textTween:uZ,remove:WK,tween:gK,delay:kK,duration:BK,ease:LK,easeVarying:UK,end:dZ,[Symbol.iterator]:Ws[Symbol.iterator]};function pZ(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var yZ={time:null,delay:0,duration:250,ease:pZ};function mZ(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function gZ(e){var t,n;e instanceof Ro?(t=e._id,e=e._name):(t=BF(),(n=yZ).time=g3(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,l,c=0;c<a;++c)(l=o[c])&&ev(l,e,t,c,o,n||mZ(l,t));return new Ro(r,this._parents,e,t)}ry.prototype.interrupt=pK;ry.prototype.transition=gZ;const jw=e=>()=>e;function bZ(e,{sourceEvent:t,target:n,selection:r,mode:i,dispatch:s}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:s}})}function vZ(e){e.stopImmediatePropagation()}function Vw(e){e.preventDefault(),e.stopImmediatePropagation()}var s6={name:"drag"},Yw={name:"space"},zc={name:"handle"},jc={name:"center"};const{abs:o6,max:Mn,min:$n}=Math;function a6(e){return[+e[0],+e[1]]}function mS(e){return[a6(e[0]),a6(e[1])]}var mm={name:"x",handles:["w","e"].map(yp),input:function(e,t){return e==null?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},gm={name:"y",handles:["n","s"].map(yp),input:function(e,t){return e==null?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},wZ={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(yp),input:function(e){return e==null?null:mS(e)},output:function(e){return e}},Hs={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},l6={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},c6={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},_Z={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},SZ={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function yp(e){return{type:e}}function xZ(e){return!e.ctrlKey&&!e.button}function IZ(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function TZ(){return navigator.maxTouchPoints||"ontouchstart"in this}function qw(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function EZ(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function AZ(){return w3(mm)}function MZ(){return w3(gm)}function $Z(){return w3(wZ)}function w3(e){var t=IZ,n=xZ,r=TZ,i=!0,s=Gb("start","brush","end"),o=6,a;function l(v){var y=v.property("__brush",g).selectAll(".overlay").data([yp("overlay")]);y.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Hs.overlay).merge(y).each(function(){var b=qw(this).extent;ye(this).attr("x",b[0][0]).attr("y",b[0][1]).attr("width",b[1][0]-b[0][0]).attr("height",b[1][1]-b[0][1])}),v.selectAll(".selection").data([yp("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Hs.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var m=v.selectAll(".handle").data(e.handles,function(b){return b.type});m.exit().remove(),m.enter().append("rect").attr("class",function(b){return"handle handle--"+b.type}).attr("cursor",function(b){return Hs[b.type]}),v.each(c).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",d).filter(r).on("touchstart.brush",d).on("touchmove.brush",h).on("touchend.brush touchcancel.brush",p).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}l.move=function(v,y,m){v.tween?v.on("start.brush",function(b){u(this,arguments).beforestart().start(b)}).on("interrupt.brush end.brush",function(b){u(this,arguments).end(b)}).tween("brush",function(){var b=this,w=b.__brush,S=u(b,arguments),_=w.selection,x=e.input(typeof y=="function"?y.apply(this,arguments):y,w.extent),E=rd(_,x);function N(I){w.selection=I===1&&x===null?null:E(I),c.call(b),S.brush()}return _!==null&&x!==null?N:N(1)}):v.each(function(){var b=this,w=arguments,S=b.__brush,_=e.input(typeof y=="function"?y.apply(b,w):y,S.extent),x=u(b,w).beforestart();Qu(b),S.selection=_===null?null:_,c.call(b),x.start(m).brush(m).end(m)})},l.clear=function(v,y){l.move(v,null,y)};function c(){var v=ye(this),y=qw(this).selection;y?(v.selectAll(".selection").style("display",null).attr("x",y[0][0]).attr("y",y[0][1]).attr("width",y[1][0]-y[0][0]).attr("height",y[1][1]-y[0][1]),v.selectAll(".handle").style("display",null).attr("x",function(m){return m.type[m.type.length-1]==="e"?y[1][0]-o/2:y[0][0]-o/2}).attr("y",function(m){return m.type[0]==="s"?y[1][1]-o/2:y[0][1]-o/2}).attr("width",function(m){return m.type==="n"||m.type==="s"?y[1][0]-y[0][0]+o:o}).attr("height",function(m){return m.type==="e"||m.type==="w"?y[1][1]-y[0][1]+o:o})):v.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function u(v,y,m){var b=v.__brush.emitter;return b&&(!m||!b.clean)?b:new f(v,y,m)}function f(v,y,m){this.that=v,this.args=y,this.state=v.__brush,this.active=0,this.clean=m}f.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(v,y){return this.starting?(this.starting=!1,this.emit("start",v,y)):this.emit("brush",v),this},brush:function(v,y){return this.emit("brush",v,y),this},end:function(v,y){return--this.active===0&&(delete this.state.emitter,this.emit("end",v,y)),this},emit:function(v,y,m){var b=ye(this.that).datum();s.call(v,this.that,new bZ(v,{sourceEvent:y,target:l,selection:e.output(this.state.selection),mode:m,dispatch:s}),b)}};function d(v){if(a&&!v.touches||!n.apply(this,arguments))return;var y=this,m=v.target.__data__.type,b=(i&&v.metaKey?m="overlay":m)==="selection"?s6:i&&v.altKey?jc:zc,w=e===gm?null:_Z[m],S=e===mm?null:SZ[m],_=qw(y),x=_.extent,E=_.selection,N=x[0][0],I,A,k=x[0][1],R,T,M=x[1][0],$,B,O=x[1][1],C,F,P=0,z=0,H,X=w&&S&&i&&v.shiftKey,tt,Z,Y=Array.from(v.touches||[v],st=>{const de=st.identifier;return st=Mi(st,y),st.point0=st.slice(),st.identifier=de,st});Qu(y);var Q=u(y,arguments,!0).beforestart();if(m==="overlay"){E&&(H=!0);const st=[Y[0],Y[1]||Y[0]];_.selection=E=[[I=e===gm?N:$n(st[0][0],st[1][0]),R=e===mm?k:$n(st[0][1],st[1][1])],[$=e===gm?M:Mn(st[0][0],st[1][0]),C=e===mm?O:Mn(st[0][1],st[1][1])]],Y.length>1&&At(v)}else I=E[0][0],R=E[0][1],$=E[1][0],C=E[1][1];A=I,T=R,B=$,F=C;var V=ye(y).attr("pointer-events","none"),J=V.selectAll(".overlay").attr("cursor",Hs[m]);if(v.touches)Q.moved=j,Q.ended=ot;else{var et=ye(v.view).on("mousemove.brush",j,!0).on("mouseup.brush",ot,!0);i&&et.on("keydown.brush",Vt,!0).on("keyup.brush",Ht,!0),fF(v.view)}c.call(y),Q.start(v,b.name);function j(st){for(const de of st.changedTouches||[st])for(const Ji of Y)Ji.identifier===de.identifier&&(Ji.cur=Mi(de,y));if(X&&!tt&&!Z&&Y.length===1){const de=Y[0];o6(de.cur[0]-de[0])>o6(de.cur[1]-de[1])?Z=!0:tt=!0}for(const de of Y)de.cur&&(de[0]=de.cur[0],de[1]=de.cur[1]);H=!0,Vw(st),At(st)}function At(st){const de=Y[0],Ji=de.point0;var qr;switch(P=de[0]-Ji[0],z=de[1]-Ji[1],b){case Yw:case s6:{w&&(P=Mn(N-I,$n(M-$,P)),A=I+P,B=$+P),S&&(z=Mn(k-R,$n(O-C,z)),T=R+z,F=C+z);break}case zc:{Y[1]?(w&&(A=Mn(N,$n(M,Y[0][0])),B=Mn(N,$n(M,Y[1][0])),w=1),S&&(T=Mn(k,$n(O,Y[0][1])),F=Mn(k,$n(O,Y[1][1])),S=1)):(w<0?(P=Mn(N-I,$n(M-I,P)),A=I+P,B=$):w>0&&(P=Mn(N-$,$n(M-$,P)),A=I,B=$+P),S<0?(z=Mn(k-R,$n(O-R,z)),T=R+z,F=C):S>0&&(z=Mn(k-C,$n(O-C,z)),T=R,F=C+z));break}case jc:{w&&(A=Mn(N,$n(M,I-P*w)),B=Mn(N,$n(M,$+P*w))),S&&(T=Mn(k,$n(O,R-z*S)),F=Mn(k,$n(O,C+z*S)));break}}B<A&&(w*=-1,qr=I,I=$,$=qr,qr=A,A=B,B=qr,m in l6&&J.attr("cursor",Hs[m=l6[m]])),F<T&&(S*=-1,qr=R,R=C,C=qr,qr=T,T=F,F=qr,m in c6&&J.attr("cursor",Hs[m=c6[m]])),_.selection&&(E=_.selection),tt&&(A=E[0][0],B=E[1][0]),Z&&(T=E[0][1],F=E[1][1]),(E[0][0]!==A||E[0][1]!==T||E[1][0]!==B||E[1][1]!==F)&&(_.selection=[[A,T],[B,F]],c.call(y),Q.brush(st,b.name))}function ot(st){if(vZ(st),st.touches){if(st.touches.length)return;a&&clearTimeout(a),a=setTimeout(function(){a=null},500)}else dF(st.view,H),et.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);V.attr("pointer-events","all"),J.attr("cursor",Hs.overlay),_.selection&&(E=_.selection),EZ(E)&&(_.selection=null,c.call(y)),Q.end(st,b.name)}function Vt(st){switch(st.keyCode){case 16:{X=w&&S;break}case 18:{b===zc&&(w&&($=B-P*w,I=A+P*w),S&&(C=F-z*S,R=T+z*S),b=jc,At(st));break}case 32:{(b===zc||b===jc)&&(w<0?$=B-P:w>0&&(I=A-P),S<0?C=F-z:S>0&&(R=T-z),b=Yw,J.attr("cursor",Hs.selection),At(st));break}default:return}Vw(st)}function Ht(st){switch(st.keyCode){case 16:{X&&(tt=Z=X=!1,At(st));break}case 18:{b===jc&&(w<0?$=B:w>0&&(I=A),S<0?C=F:S>0&&(R=T),b=zc,At(st));break}case 32:{b===Yw&&(st.altKey?(w&&($=B-P*w,I=A+P*w),S&&(C=F-z*S,R=T+z*S),b=jc):(w<0?$=B:w>0&&(I=A),S<0?C=F:S>0&&(R=T),b=zc),J.attr("cursor",Hs[m]),At(st));break}default:return}Vw(st)}}function h(v){u(this,arguments).moved(v)}function p(v){u(this,arguments).ended(v)}function g(){var v=this.__brush||{selection:null};return v.extent=mS(t.apply(this,arguments)),v.dim=e,v}return l.extent=function(v){return arguments.length?(t=typeof v=="function"?v:jw(mS(v)),l):t},l.filter=function(v){return arguments.length?(n=typeof v=="function"?v:jw(!!v),l):n},l.touchable=function(v){return arguments.length?(r=typeof v=="function"?v:jw(!!v),l):r},l.handleSize=function(v){return arguments.length?(o=+v,l):o},l.keyModifiers=function(v){return arguments.length?(i=!!v,l):i},l.on=function(){var v=s.on.apply(s,arguments);return v===s?l:v},l}const gS=Math.PI,bS=2*gS,Dl=1e-6,NZ=bS-Dl;function RF(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function DZ(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return RF;const n=10**t;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let LF=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?RF:DZ(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,s,o){this._append`C${+t},${+n},${+r},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(t,n,r,i,s){if(t=+t,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,l=r-t,c=i-n,u=o-t,f=a-n,d=u*u+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(d>Dl)if(!(Math.abs(f*l-c*u)>Dl)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let h=r-o,p=i-a,g=l*l+c*c,v=h*h+p*p,y=Math.sqrt(g),m=Math.sqrt(d),b=s*Math.tan((gS-Math.acos((g+d-v)/(2*y*m)))/2),w=b/m,S=b/y;Math.abs(w-1)>Dl&&this._append`L${t+w*u},${n+w*f}`,this._append`A${s},${s},0,0,${+(f*h>u*p)},${this._x1=t+S*l},${this._y1=n+S*c}`}}arc(t,n,r,i,s,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),l=r*Math.sin(i),c=t+a,u=n+l,f=1^o,d=o?i-s:s-i;this._x1===null?this._append`M${c},${u}`:(Math.abs(this._x1-c)>Dl||Math.abs(this._y1-u)>Dl)&&this._append`L${c},${u}`,r&&(d<0&&(d=d%bS+bS),d>NZ?this._append`A${r},${r},0,1,${f},${t-a},${n-l}A${r},${r},0,1,${f},${this._x1=c},${this._y1=u}`:d>Dl&&this._append`A${r},${r},0,${+(d>=gS)},${f},${this._x1=t+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function _o(e=3){return new LF(+e)}var kZ=Array.prototype,CF=kZ.slice;function OZ(e,t){return e-t}function FZ(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}const la=e=>()=>e;function BZ(e,t){for(var n=-1,r=t.length,i;++n<r;)if(i=RZ(e,t[n]))return i;return 0}function RZ(e,t){for(var n=t[0],r=t[1],i=-1,s=0,o=e.length,a=o-1;s<o;a=s++){var l=e[s],c=l[0],u=l[1],f=e[a],d=f[0],h=f[1];if(LZ(l,f,t))return 0;u>r!=h>r&&n<(d-c)*(r-u)/(h-u)+c&&(i=-i)}return i}function LZ(e,t,n){var r;return CZ(e,t,n)&&UZ(e[r=+(e[0]===t[0])],n[r],t[r])}function CZ(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function UZ(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function PZ(){}var Gs=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function jg(){var e=1,t=1,n=a3,r=l;function i(c){var u=n(c);if(Array.isArray(u))u=u.slice().sort(OZ);else{const f=yn(c,zZ);for(u=Ca(...GO(f[0],f[1],u),u);u[u.length-1]>=f[1];)u.pop();for(;u[1]<f[0];)u.shift()}return u.map(f=>s(c,f))}function s(c,u){const f=u==null?NaN:+u;if(isNaN(f))throw new Error(`invalid value: ${u}`);var d=[],h=[];return o(c,f,function(p){r(p,c,f),FZ(p)>0?d.push([p]):h.push(p)}),h.forEach(function(p){for(var g=0,v=d.length,y;g<v;++g)if(BZ((y=d[g])[0],p)!==-1){y.push(p);return}}),{type:"MultiPolygon",value:u,coordinates:d}}function o(c,u,f){var d=new Array,h=new Array,p,g,v,y,m,b;for(p=g=-1,y=gl(c[0],u),Gs[y<<1].forEach(w);++p<e-1;)v=y,y=gl(c[p+1],u),Gs[v|y<<1].forEach(w);for(Gs[y<<0].forEach(w);++g<t-1;){for(p=-1,y=gl(c[g*e+e],u),m=gl(c[g*e],u),Gs[y<<1|m<<2].forEach(w);++p<e-1;)v=y,y=gl(c[g*e+e+p+1],u),b=m,m=gl(c[g*e+p+1],u),Gs[v|y<<1|m<<2|b<<3].forEach(w);Gs[y|m<<3].forEach(w)}for(p=-1,m=c[g*e]>=u,Gs[m<<2].forEach(w);++p<e-1;)b=m,m=gl(c[g*e+p+1],u),Gs[m<<2|b<<3].forEach(w);Gs[m<<3].forEach(w);function w(S){var _=[S[0][0]+p,S[0][1]+g],x=[S[1][0]+p,S[1][1]+g],E=a(_),N=a(x),I,A;(I=h[E])?(A=d[N])?(delete h[I.end],delete d[A.start],I===A?(I.ring.push(x),f(I.ring)):d[I.start]=h[A.end]={start:I.start,end:A.end,ring:I.ring.concat(A.ring)}):(delete h[I.end],I.ring.push(x),h[I.end=N]=I):(I=d[N])?(A=h[E])?(delete d[I.start],delete h[A.end],I===A?(I.ring.push(x),f(I.ring)):d[A.start]=h[I.end]={start:A.start,end:I.end,ring:A.ring.concat(I.ring)}):(delete d[I.start],I.ring.unshift(_),d[I.start=E]=I):d[E]=h[N]={start:E,end:N,ring:[_,x]}}}function a(c){return c[0]*2+c[1]*(e+1)*4}function l(c,u,f){c.forEach(function(d){var h=d[0],p=d[1],g=h|0,v=p|0,y=Ww(u[v*e+g]);h>0&&h<e&&g===h&&(d[0]=u6(h,Ww(u[v*e+g-1]),y,f)),p>0&&p<t&&v===p&&(d[1]=u6(p,Ww(u[(v-1)*e+g]),y,f))})}return i.contour=s,i.size=function(c){if(!arguments.length)return[e,t];var u=Math.floor(c[0]),f=Math.floor(c[1]);if(!(u>=0&&f>=0))throw new Error("invalid size");return e=u,t=f,i},i.thresholds=function(c){return arguments.length?(n=typeof c=="function"?c:Array.isArray(c)?la(CF.call(c)):la(c),i):n},i.smooth=function(c){return arguments.length?(r=c?l:PZ,i):r===l},i}function zZ(e){return isFinite(e)?e:NaN}function gl(e,t){return e==null?!1:+e>=t}function Ww(e){return e==null||isNaN(e=+e)?-1/0:e}function u6(e,t,n,r){const i=r-t,s=n-t,o=isFinite(i)||isFinite(s)?i/s:Math.sign(i)/Math.sign(s);return isNaN(o)?e:e+o-.5}function jZ(e){return e[0]}function VZ(e){return e[1]}function YZ(){return 1}function qZ(){var e=jZ,t=VZ,n=YZ,r=960,i=500,s=20,o=2,a=s*3,l=r+a*2>>o,c=i+a*2>>o,u=la(20);function f(m){var b=new Float32Array(l*c),w=Math.pow(2,-o),S=-1;for(const R of m){var _=(e(R,++S,m)+a)*w,x=(t(R,S,m)+a)*w,E=+n(R,S,m);if(E&&_>=0&&_<l&&x>=0&&x<c){var N=Math.floor(_),I=Math.floor(x),A=_-N-.5,k=x-I-.5;b[N+I*l]+=(1-A)*(1-k)*E,b[N+1+I*l]+=A*(1-k)*E,b[N+1+(I+1)*l]+=A*k*E,b[N+(I+1)*l]+=(1-A)*k*E}}return jO({data:b,width:l,height:c},s*w),b}function d(m){var b=f(m),w=u(b),S=Math.pow(2,2*o);return Array.isArray(w)||(w=Ca(Number.MIN_VALUE,$e(b)/S,w)),jg().size([l,c]).thresholds(w.map(_=>_*S))(b).map((_,x)=>(_.value=+w[x],h(_)))}d.contours=function(m){var b=f(m),w=jg().size([l,c]),S=Math.pow(2,2*o),_=x=>{x=+x;var E=h(w.contour(b,x*S));return E.value=x,E};return Object.defineProperty(_,"max",{get:()=>$e(b)/S}),_};function h(m){return m.coordinates.forEach(p),m}function p(m){m.forEach(g)}function g(m){m.forEach(v)}function v(m){m[0]=m[0]*Math.pow(2,o)-a,m[1]=m[1]*Math.pow(2,o)-a}function y(){return a=s*3,l=r+a*2>>o,c=i+a*2>>o,d}return d.x=function(m){return arguments.length?(e=typeof m=="function"?m:la(+m),d):e},d.y=function(m){return arguments.length?(t=typeof m=="function"?m:la(+m),d):t},d.weight=function(m){return arguments.length?(n=typeof m=="function"?m:la(+m),d):n},d.size=function(m){if(!arguments.length)return[r,i];var b=+m[0],w=+m[1];if(!(b>=0&&w>=0))throw new Error("invalid size");return r=b,i=w,y()},d.cellSize=function(m){if(!arguments.length)return 1<<o;if(!((m=+m)>=1))throw new Error("invalid cell size");return o=Math.floor(Math.log(m)/Math.LN2),y()},d.thresholds=function(m){return arguments.length?(u=typeof m=="function"?m:Array.isArray(m)?la(CF.call(m)):la(m),d):u},d.bandwidth=function(m){if(!arguments.length)return Math.sqrt(s*(s+1));if(!((m=+m)>=0))throw new Error("invalid bandwidth");return s=(Math.sqrt(4*m*m+1)-1)/2,y()},d}const Eo=11102230246251565e-32,Nn=134217729,WZ=(3+8*Eo)*Eo;function Hw(e,t,n,r,i){let s,o,a,l,c=t[0],u=r[0],f=0,d=0;u>c==u>-c?(s=c,c=t[++f]):(s=u,u=r[++d]);let h=0;if(f<e&&d<n)for(u>c==u>-c?(o=c+s,a=s-(o-c),c=t[++f]):(o=u+s,a=s-(o-u),u=r[++d]),s=o,a!==0&&(i[h++]=a);f<e&&d<n;)u>c==u>-c?(o=s+c,l=o-s,a=s-(o-l)+(c-l),c=t[++f]):(o=s+u,l=o-s,a=s-(o-l)+(u-l),u=r[++d]),s=o,a!==0&&(i[h++]=a);for(;f<e;)o=s+c,l=o-s,a=s-(o-l)+(c-l),c=t[++f],s=o,a!==0&&(i[h++]=a);for(;d<n;)o=s+u,l=o-s,a=s-(o-l)+(u-l),u=r[++d],s=o,a!==0&&(i[h++]=a);return(s!==0||h===0)&&(i[h++]=s),h}function HZ(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}function sy(e){return new Float64Array(e)}const GZ=(3+16*Eo)*Eo,XZ=(2+12*Eo)*Eo,QZ=(9+64*Eo)*Eo*Eo,Vc=sy(4),f6=sy(8),d6=sy(12),h6=sy(16),Cn=sy(4);function KZ(e,t,n,r,i,s,o){let a,l,c,u,f,d,h,p,g,v,y,m,b,w,S,_,x,E;const N=e-i,I=n-i,A=t-s,k=r-s;w=N*k,d=Nn*N,h=d-(d-N),p=N-h,d=Nn*k,g=d-(d-k),v=k-g,S=p*v-(w-h*g-p*g-h*v),_=A*I,d=Nn*A,h=d-(d-A),p=A-h,d=Nn*I,g=d-(d-I),v=I-g,x=p*v-(_-h*g-p*g-h*v),y=S-x,f=S-y,Vc[0]=S-(y+f)+(f-x),m=w+y,f=m-w,b=w-(m-f)+(y-f),y=b-_,f=b-y,Vc[1]=b-(y+f)+(f-_),E=m+y,f=E-m,Vc[2]=m-(E-f)+(y-f),Vc[3]=E;let R=HZ(4,Vc),T=XZ*o;if(R>=T||-R>=T||(f=e-N,a=e-(N+f)+(f-i),f=n-I,c=n-(I+f)+(f-i),f=t-A,l=t-(A+f)+(f-s),f=r-k,u=r-(k+f)+(f-s),a===0&&l===0&&c===0&&u===0)||(T=QZ*o+WZ*Math.abs(R),R+=N*u+k*a-(A*c+I*l),R>=T||-R>=T))return R;w=a*k,d=Nn*a,h=d-(d-a),p=a-h,d=Nn*k,g=d-(d-k),v=k-g,S=p*v-(w-h*g-p*g-h*v),_=l*I,d=Nn*l,h=d-(d-l),p=l-h,d=Nn*I,g=d-(d-I),v=I-g,x=p*v-(_-h*g-p*g-h*v),y=S-x,f=S-y,Cn[0]=S-(y+f)+(f-x),m=w+y,f=m-w,b=w-(m-f)+(y-f),y=b-_,f=b-y,Cn[1]=b-(y+f)+(f-_),E=m+y,f=E-m,Cn[2]=m-(E-f)+(y-f),Cn[3]=E;const M=Hw(4,Vc,4,Cn,f6);w=N*u,d=Nn*N,h=d-(d-N),p=N-h,d=Nn*u,g=d-(d-u),v=u-g,S=p*v-(w-h*g-p*g-h*v),_=A*c,d=Nn*A,h=d-(d-A),p=A-h,d=Nn*c,g=d-(d-c),v=c-g,x=p*v-(_-h*g-p*g-h*v),y=S-x,f=S-y,Cn[0]=S-(y+f)+(f-x),m=w+y,f=m-w,b=w-(m-f)+(y-f),y=b-_,f=b-y,Cn[1]=b-(y+f)+(f-_),E=m+y,f=E-m,Cn[2]=m-(E-f)+(y-f),Cn[3]=E;const $=Hw(M,f6,4,Cn,d6);w=a*u,d=Nn*a,h=d-(d-a),p=a-h,d=Nn*u,g=d-(d-u),v=u-g,S=p*v-(w-h*g-p*g-h*v),_=l*c,d=Nn*l,h=d-(d-l),p=l-h,d=Nn*c,g=d-(d-c),v=c-g,x=p*v-(_-h*g-p*g-h*v),y=S-x,f=S-y,Cn[0]=S-(y+f)+(f-x),m=w+y,f=m-w,b=w-(m-f)+(y-f),y=b-_,f=b-y,Cn[1]=b-(y+f)+(f-_),E=m+y,f=E-m,Cn[2]=m-(E-f)+(y-f),Cn[3]=E;const B=Hw($,d6,4,Cn,h6);return h6[B-1]}function y0(e,t,n,r,i,s){const o=(t-s)*(n-i),a=(e-i)*(r-s),l=o-a,c=Math.abs(o+a);return Math.abs(l)>=GZ*c?l:-KZ(e,t,n,r,i,s,c)}const p6=Math.pow(2,-52),m0=new Uint32Array(512);class Vg{static from(t,n=nJ,r=rJ){const i=t.length,s=new Float64Array(i*2);for(let o=0;o<i;o++){const a=t[o];s[2*o]=n(a),s[2*o+1]=r(a)}return new Vg(s)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:s}=this,o=t.length>>1;let a=1/0,l=1/0,c=-1/0,u=-1/0;for(let I=0;I<o;I++){const A=t[2*I],k=t[2*I+1];A<a&&(a=A),k<l&&(l=k),A>c&&(c=A),k>u&&(u=k),this._ids[I]=I}const f=(a+c)/2,d=(l+u)/2;let h=1/0,p,g,v;for(let I=0;I<o;I++){const A=Gw(f,d,t[2*I],t[2*I+1]);A<h&&(p=I,h=A)}const y=t[2*p],m=t[2*p+1];h=1/0;for(let I=0;I<o;I++){if(I===p)continue;const A=Gw(y,m,t[2*I],t[2*I+1]);A<h&&A>0&&(g=I,h=A)}let b=t[2*g],w=t[2*g+1],S=1/0;for(let I=0;I<o;I++){if(I===p||I===g)continue;const A=tJ(y,m,b,w,t[2*I],t[2*I+1]);A<S&&(v=I,S=A)}let _=t[2*v],x=t[2*v+1];if(S===1/0){for(let k=0;k<o;k++)this._dists[k]=t[2*k]-t[0]||t[2*k+1]-t[1];Mu(this._ids,this._dists,0,o-1);const I=new Uint32Array(o);let A=0;for(let k=0,R=-1/0;k<o;k++){const T=this._ids[k];this._dists[T]>R&&(I[A++]=T,R=this._dists[T])}this.hull=I.subarray(0,A),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(y0(y,m,b,w,_,x)<0){const I=g,A=b,k=w;g=v,b=_,w=x,v=I,_=A,x=k}const E=eJ(y,m,b,w,_,x);this._cx=E.x,this._cy=E.y;for(let I=0;I<o;I++)this._dists[I]=Gw(t[2*I],t[2*I+1],E.x,E.y);Mu(this._ids,this._dists,0,o-1),this._hullStart=p;let N=3;r[p]=n[v]=g,r[g]=n[p]=v,r[v]=n[g]=p,i[p]=0,i[g]=1,i[v]=2,s.fill(-1),s[this._hashKey(y,m)]=p,s[this._hashKey(b,w)]=g,s[this._hashKey(_,x)]=v,this.trianglesLen=0,this._addTriangle(p,g,v,-1,-1,-1);for(let I=0,A,k;I<this._ids.length;I++){const R=this._ids[I],T=t[2*R],M=t[2*R+1];if(I>0&&Math.abs(T-A)<=p6&&Math.abs(M-k)<=p6||(A=T,k=M,R===p||R===g||R===v))continue;let $=0;for(let P=0,z=this._hashKey(T,M);P<this._hashSize&&($=s[(z+P)%this._hashSize],!($!==-1&&$!==r[$]));P++);$=n[$];let B=$,O;for(;O=r[B],y0(T,M,t[2*B],t[2*B+1],t[2*O],t[2*O+1])>=0;)if(B=O,B===$){B=-1;break}if(B===-1)continue;let C=this._addTriangle(B,R,r[B],-1,-1,i[B]);i[R]=this._legalize(C+2),i[B]=C,N++;let F=r[B];for(;O=r[F],y0(T,M,t[2*F],t[2*F+1],t[2*O],t[2*O+1])<0;)C=this._addTriangle(F,R,O,i[R],-1,i[F]),i[R]=this._legalize(C+2),r[F]=F,N--,F=O;if(B===$)for(;O=n[B],y0(T,M,t[2*O],t[2*O+1],t[2*B],t[2*B+1])<0;)C=this._addTriangle(O,R,B,-1,i[B],i[O]),this._legalize(C+2),i[O]=C,r[B]=B,N--,B=O;this._hullStart=n[R]=B,r[B]=n[F]=R,r[R]=F,s[this._hashKey(T,M)]=R,s[this._hashKey(t[2*B],t[2*B+1])]=B}this.hull=new Uint32Array(N);for(let I=0,A=this._hullStart;I<N;I++)this.hull[I]=A,A=r[A];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(ZZ(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:r,coords:i}=this;let s=0,o=0;for(;;){const a=r[t],l=t-t%3;if(o=l+(t+2)%3,a===-1){if(s===0)break;t=m0[--s];continue}const c=a-a%3,u=l+(t+1)%3,f=c+(a+2)%3,d=n[o],h=n[t],p=n[u],g=n[f];if(JZ(i[2*d],i[2*d+1],i[2*h],i[2*h+1],i[2*p],i[2*p+1],i[2*g],i[2*g+1])){n[t]=g,n[a]=d;const y=r[f];if(y===-1){let b=this._hullStart;do{if(this._hullTri[b]===f){this._hullTri[b]=t;break}b=this._hullPrev[b]}while(b!==this._hullStart)}this._link(t,y),this._link(a,r[o]),this._link(o,f);const m=c+(a+1)%3;s<m0.length&&(m0[s++]=m)}else{if(s===0)break;t=m0[--s]}}return o}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,r,i,s,o){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=n,this._triangles[a+2]=r,this._link(a,i),this._link(a+1,s),this._link(a+2,o),this.trianglesLen+=3,a}}function ZZ(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function Gw(e,t,n,r){const i=e-n,s=t-r;return i*i+s*s}function JZ(e,t,n,r,i,s,o,a){const l=e-o,c=t-a,u=n-o,f=r-a,d=i-o,h=s-a,p=l*l+c*c,g=u*u+f*f,v=d*d+h*h;return l*(f*v-g*h)-c*(u*v-g*d)+p*(u*h-f*d)<0}function tJ(e,t,n,r,i,s){const o=n-e,a=r-t,l=i-e,c=s-t,u=o*o+a*a,f=l*l+c*c,d=.5/(o*c-a*l),h=(c*u-a*f)*d,p=(o*f-l*u)*d;return h*h+p*p}function eJ(e,t,n,r,i,s){const o=n-e,a=r-t,l=i-e,c=s-t,u=o*o+a*a,f=l*l+c*c,d=.5/(o*c-a*l),h=e+(c*u-a*f)*d,p=t+(o*f-l*u)*d;return{x:h,y:p}}function Mu(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const s=e[i],o=t[s];let a=i-1;for(;a>=n&&t[e[a]]>o;)e[a+1]=e[a--];e[a+1]=s}else{const i=n+r>>1;let s=n+1,o=r;Od(e,i,s),t[e[n]]>t[e[r]]&&Od(e,n,r),t[e[s]]>t[e[r]]&&Od(e,s,r),t[e[n]]>t[e[s]]&&Od(e,n,s);const a=e[s],l=t[a];for(;;){do s++;while(t[e[s]]<l);do o--;while(t[e[o]]>l);if(o<s)break;Od(e,s,o)}e[n+1]=e[o],e[o]=a,r-s+1>=o-n?(Mu(e,t,s,r),Mu(e,t,n,o-1)):(Mu(e,t,n,o-1),Mu(e,t,s,r))}}function Od(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function nJ(e){return e[0]}function rJ(e){return e[1]}const y6=1e-6;class Pl{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,r){t=+t,n=+n,r=+r;const i=t+r,s=n;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${s}`:(Math.abs(this._x1-i)>y6||Math.abs(this._y1-s)>y6)&&(this._+="L"+i+","+s),r&&(this._+=`A${r},${r},0,1,1,${t-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=s}`)}rect(t,n,r,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class vS{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let iJ=class{constructor(t,[n,r,i,s]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((s=+s)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=i,this.xmin=n,this.ymax=s,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:r},vectors:i}=this;let s,o;const a=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let g=0,v=0,y=r.length,m,b;g<y;g+=3,v+=2){const w=r[g]*2,S=r[g+1]*2,_=r[g+2]*2,x=t[w],E=t[w+1],N=t[S],I=t[S+1],A=t[_],k=t[_+1],R=N-x,T=I-E,M=A-x,$=k-E,B=(R*$-T*M)*2;if(Math.abs(B)<1e-9){if(s===void 0){s=o=0;for(const C of n)s+=t[C*2],o+=t[C*2+1];s/=n.length,o/=n.length}const O=1e9*Math.sign((s-x)*$-(o-E)*M);m=(x+A)/2-O*$,b=(E+k)/2+O*M}else{const O=1/B,C=R*R+T*T,F=M*M+$*$;m=x+($*C-T*F)*O,b=E+(R*F-M*C)*O}a[v]=m,a[v+1]=b}let l=n[n.length-1],c,u=l*4,f,d=t[2*l],h,p=t[2*l+1];i.fill(0);for(let g=0;g<n.length;++g)l=n[g],c=u,f=d,h=p,u=l*4,d=t[2*l],p=t[2*l+1],i[c+2]=i[u]=h-p,i[c+3]=i[u+1]=d-f}render(t){const n=t==null?t=new Pl:void 0,{delaunay:{halfedges:r,inedges:i,hull:s},circumcenters:o,vectors:a}=this;if(s.length<=1)return null;for(let u=0,f=r.length;u<f;++u){const d=r[u];if(d<u)continue;const h=Math.floor(u/3)*2,p=Math.floor(d/3)*2,g=o[h],v=o[h+1],y=o[p],m=o[p+1];this._renderSegment(g,v,y,m,t)}let l,c=s[s.length-1];for(let u=0;u<s.length;++u){l=c,c=s[u];const f=Math.floor(i[c]/3)*2,d=o[f],h=o[f+1],p=l*4,g=this._project(d,h,a[p+2],a[p+3]);g&&this._renderSegment(d,h,g[0],g[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new Pl:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const r=n==null?n=new Pl:void 0,i=this._clip(t);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let s=i.length;for(;i[0]===i[s-2]&&i[1]===i[s-1]&&s>1;)s-=2;for(let o=2;o<s;o+=2)(i[o]!==i[o-2]||i[o+1]!==i[o-1])&&n.lineTo(i[o],i[o+1]);return n.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,r=t.length/2;n<r;++n){const i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(t){const n=new vS;return this.renderCell(t,n),n.value()}_renderSegment(t,n,r,i,s){let o;const a=this._regioncode(t,n),l=this._regioncode(r,i);a===0&&l===0?(s.moveTo(t,n),s.lineTo(r,i)):(o=this._clipSegment(t,n,r,i,a,l))&&(s.moveTo(o[0],o[1]),s.lineTo(o[2],o[3]))}contains(t,n,r){return n=+n,n!==n||(r=+r,r!==r)?!1:this.delaunay._step(t,n,r)===t}*neighbors(t){const n=this._clip(t);if(n)for(const r of this.delaunay.neighbors(t)){const i=this._clip(r);if(i){t:for(let s=0,o=n.length;s<o;s+=2)for(let a=0,l=i.length;a<l;a+=2)if(n[s]===i[a]&&n[s+1]===i[a+1]&&n[(s+2)%o]===i[(a+l-2)%l]&&n[(s+3)%o]===i[(a+l-1)%l]){yield r;break t}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:s}}=this,o=r[t];if(o===-1)return null;const a=[];let l=o;do{const c=Math.floor(l/3);if(a.push(n[c*2],n[c*2+1]),l=l%3===2?l-2:l+1,s[l]!==t)break;l=i[l]}while(l!==o&&l!==-1);return a}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:r}=this,i=t*4;return this._simplify(r[i]||r[i+1]?this._clipInfinite(t,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(t,n))}_clipFinite(t,n){const r=n.length;let i=null,s,o,a=n[r-2],l=n[r-1],c,u=this._regioncode(a,l),f,d=0;for(let h=0;h<r;h+=2)if(s=a,o=l,a=n[h],l=n[h+1],c=u,u=this._regioncode(a,l),c===0&&u===0)f=d,d=0,i?i.push(a,l):i=[a,l];else{let p,g,v,y,m;if(c===0){if((p=this._clipSegment(s,o,a,l,c,u))===null)continue;[g,v,y,m]=p}else{if((p=this._clipSegment(a,l,s,o,u,c))===null)continue;[y,m,g,v]=p,f=d,d=this._edgecode(g,v),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(g,v):i=[g,v]}f=d,d=this._edgecode(y,m),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(y,m):i=[y,m]}if(i)f=d,d=this._edgecode(i[0],i[1]),f&&d&&this._edge(t,f,d,i,i.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(t,n,r,i,s,o){const a=s<o;for(a&&([t,n,r,i,s,o]=[r,i,t,n,o,s]);;){if(s===0&&o===0)return a?[r,i,t,n]:[t,n,r,i];if(s&o)return null;let l,c,u=s||o;u&8?(l=t+(r-t)*(this.ymax-n)/(i-n),c=this.ymax):u&4?(l=t+(r-t)*(this.ymin-n)/(i-n),c=this.ymin):u&2?(c=n+(i-n)*(this.xmax-t)/(r-t),l=this.xmax):(c=n+(i-n)*(this.xmin-t)/(r-t),l=this.xmin),s?(t=l,n=c,s=this._regioncode(t,n)):(r=l,i=c,o=this._regioncode(r,i))}}_clipInfinite(t,n,r,i,s,o){let a=Array.from(n),l;if((l=this._project(a[0],a[1],r,i))&&a.unshift(l[0],l[1]),(l=this._project(a[a.length-2],a[a.length-1],s,o))&&a.push(l[0],l[1]),a=this._clipFinite(t,a))for(let c=0,u=a.length,f,d=this._edgecode(a[u-2],a[u-1]);c<u;c+=2)f=d,d=this._edgecode(a[c],a[c+1]),f&&d&&(c=this._edge(t,f,d,a,c),u=a.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(t,n,r,i,s){for(;n!==r;){let o,a;switch(n){case 5:n=4;continue;case 4:n=6,o=this.xmax,a=this.ymin;break;case 6:n=2;continue;case 2:n=10,o=this.xmax,a=this.ymax;break;case 10:n=8;continue;case 8:n=9,o=this.xmin,a=this.ymax;break;case 9:n=1;continue;case 1:n=5,o=this.xmin,a=this.ymin;break}(i[s]!==o||i[s+1]!==a)&&this.contains(t,o,a)&&(i.splice(s,0,o,a),s+=2)}return s}_project(t,n,r,i){let s=1/0,o,a,l;if(i<0){if(n<=this.ymin)return null;(o=(this.ymin-n)/i)<s&&(l=this.ymin,a=t+(s=o)*r)}else if(i>0){if(n>=this.ymax)return null;(o=(this.ymax-n)/i)<s&&(l=this.ymax,a=t+(s=o)*r)}if(r>0){if(t>=this.xmax)return null;(o=(this.xmax-t)/r)<s&&(a=this.xmax,l=n+(s=o)*i)}else if(r<0){if(t<=this.xmin)return null;(o=(this.xmin-t)/r)<s&&(a=this.xmin,l=n+(s=o)*i)}return[a,l]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const r=(n+2)%t.length,i=(n+4)%t.length;(t[n]===t[r]&&t[r]===t[i]||t[n+1]===t[r+1]&&t[r+1]===t[i+1])&&(t.splice(r,2),n-=2)}t.length||(t=null)}return t}};const sJ=2*Math.PI,Yc=Math.pow;function oJ(e){return e[0]}function aJ(e){return e[1]}function lJ(e){const{triangles:t,coords:n}=e;for(let r=0;r<t.length;r+=3){const i=2*t[r],s=2*t[r+1],o=2*t[r+2];if((n[o]-n[i])*(n[s+1]-n[i+1])-(n[s]-n[i])*(n[o+1]-n[i+1])>1e-10)return!1}return!0}function cJ(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class sl{static from(t,n=oJ,r=aJ,i){return new sl("length"in t?uJ(t,n,r,i):Float64Array.from(fJ(t,n,r,i)))}constructor(t){this._delaunator=new Vg(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&lJ(t)){this.collinear=Int32Array.from({length:n.length/2},(d,h)=>h).sort((d,h)=>n[2*d]-n[2*h]||n[2*d+1]-n[2*h+1]);const l=this.collinear[0],c=this.collinear[this.collinear.length-1],u=[n[2*l],n[2*l+1],n[2*c],n[2*c+1]],f=1e-8*Math.hypot(u[3]-u[1],u[2]-u[0]);for(let d=0,h=n.length/2;d<h;++d){const p=cJ(n[2*d],n[2*d+1],f);n[2*d]=p[0],n[2*d+1]=p[1]}this._delaunator=new Vg(n)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,s=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let l=0,c=r.length;l<c;++l){const u=s[l%3===2?l-2:l+1];(r[l]===-1||o[u]===-1)&&(o[u]=l)}for(let l=0,c=i.length;l<c;++l)a[i[l]]=l;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],o[i[0]]=1,i.length===2&&(o[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(t){return new iJ(this,t)}*neighbors(t){const{inedges:n,hull:r,_hullIndex:i,halfedges:s,triangles:o,collinear:a}=this;if(a){const f=a.indexOf(t);f>0&&(yield a[f-1]),f<a.length-1&&(yield a[f+1]);return}const l=n[t];if(l===-1)return;let c=l,u=-1;do{if(yield u=o[c],c=c%3===2?c-2:c+1,o[c]!==t)return;if(c=s[c],c===-1){const f=r[(i[t]+1)%r.length];f!==u&&(yield f);return}}while(c!==l)}find(t,n,r=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const i=r;let s;for(;(s=this._step(r,t,n))>=0&&s!==r&&s!==i;)r=s;return s}_step(t,n,r){const{inedges:i,hull:s,_hullIndex:o,halfedges:a,triangles:l,points:c}=this;if(i[t]===-1||!c.length)return(t+1)%(c.length>>1);let u=t,f=Yc(n-c[t*2],2)+Yc(r-c[t*2+1],2);const d=i[t];let h=d;do{let p=l[h];const g=Yc(n-c[p*2],2)+Yc(r-c[p*2+1],2);if(g<f&&(f=g,u=p),h=h%3===2?h-2:h+1,l[h]!==t)break;if(h=a[h],h===-1){if(h=s[(o[t]+1)%s.length],h!==p&&Yc(n-c[h*2],2)+Yc(r-c[h*2+1],2)<f)return h;break}}while(h!==d);return u}render(t){const n=t==null?t=new Pl:void 0,{points:r,halfedges:i,triangles:s}=this;for(let o=0,a=i.length;o<a;++o){const l=i[o];if(l<o)continue;const c=s[o]*2,u=s[l]*2;t.moveTo(r[c],r[c+1]),t.lineTo(r[u],r[u+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const r=t==null?t=new Pl:void 0,{points:i}=this;for(let s=0,o=i.length;s<o;s+=2){const a=i[s],l=i[s+1];t.moveTo(a+n,l),t.arc(a,l,n,0,sJ)}return r&&r.value()}renderHull(t){const n=t==null?t=new Pl:void 0,{hull:r,points:i}=this,s=r[0]*2,o=r.length;t.moveTo(i[s],i[s+1]);for(let a=1;a<o;++a){const l=2*r[a];t.lineTo(i[l],i[l+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new vS;return this.renderHull(t),t.value()}renderTriangle(t,n){const r=n==null?n=new Pl:void 0,{points:i,triangles:s}=this,o=s[t*=3]*2,a=s[t+1]*2,l=s[t+2]*2;return n.moveTo(i[o],i[o+1]),n.lineTo(i[a],i[a+1]),n.lineTo(i[l],i[l+1]),n.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,r=t.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new vS;return this.renderTriangle(t,n),n.value()}}function uJ(e,t,n,r){const i=e.length,s=new Float64Array(i*2);for(let o=0;o<i;++o){const a=e[o];s[o*2]=t.call(r,a,o,e),s[o*2+1]=n.call(r,a,o,e)}return s}function*fJ(e,t,n,r){let i=0;for(const s of e)yield t.call(r,s,i,e),yield n.call(r,s,i,e),++i}function dJ(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Yg(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function Af(e){return e=Yg(Math.abs(e)),e?e[1]:NaN}function hJ(e,t){return function(n,r){for(var i=n.length,s=[],o=0,a=e[0],l=0;i>0&&a>0&&(l+a+1>r&&(a=Math.max(1,r-l)),s.push(n.substring(i-=a,i+a)),!((l+=a+1)>r));)a=e[o=(o+1)%e.length];return s.reverse().join(t)}}function pJ(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var yJ=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function mp(e){if(!(t=yJ.exec(e)))throw new Error("invalid format: "+e);var t;return new _3({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}mp.prototype=_3.prototype;function _3(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}_3.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function mJ(e){t:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break t;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var UF;function gJ(e,t){var n=Yg(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(UF=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+Yg(e,Math.max(0,t+s-1))[0]}function m6(e,t){var n=Yg(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const g6={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:dJ,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>m6(e*100,t),r:m6,s:gJ,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function b6(e){return e}var v6=Array.prototype.map,w6=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function bJ(e){var t=e.grouping===void 0||e.thousands===void 0?b6:hJ(v6.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?b6:pJ(v6.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function c(f){f=mp(f);var d=f.fill,h=f.align,p=f.sign,g=f.symbol,v=f.zero,y=f.width,m=f.comma,b=f.precision,w=f.trim,S=f.type;S==="n"?(m=!0,S="g"):g6[S]||(b===void 0&&(b=12),w=!0,S="g"),(v||d==="0"&&h==="=")&&(v=!0,d="0",h="=");var _=g==="$"?n:g==="#"&&/[boxX]/.test(S)?"0"+S.toLowerCase():"",x=g==="$"?r:/[%p]/.test(S)?o:"",E=g6[S],N=/[defgprs%]/.test(S);b=b===void 0?6:/[gprs]/.test(S)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function I(A){var k=_,R=x,T,M,$;if(S==="c")R=E(A)+R,A="";else{A=+A;var B=A<0||1/A<0;if(A=isNaN(A)?l:E(Math.abs(A),b),w&&(A=mJ(A)),B&&+A==0&&p!=="+"&&(B=!1),k=(B?p==="("?p:a:p==="-"||p==="("?"":p)+k,R=(S==="s"?w6[8+UF/3]:"")+R+(B&&p==="("?")":""),N){for(T=-1,M=A.length;++T<M;)if($=A.charCodeAt(T),48>$||$>57){R=($===46?i+A.slice(T+1):A.slice(T))+R,A=A.slice(0,T);break}}}m&&!v&&(A=t(A,1/0));var O=k.length+A.length+R.length,C=O<y?new Array(y-O+1).join(d):"";switch(m&&v&&(A=t(C+A,C.length?y-R.length:1/0),C=""),h){case"<":A=k+A+R+C;break;case"=":A=k+C+A+R;break;case"^":A=C.slice(0,O=C.length>>1)+k+A+R+C.slice(O);break;default:A=C+k+A+R;break}return s(A)}return I.toString=function(){return f+""},I}function u(f,d){var h=c((f=mp(f),f.type="f",f)),p=Math.max(-8,Math.min(8,Math.floor(Af(d)/3)))*3,g=Math.pow(10,-p),v=w6[8+p/3];return function(y){return h(g*y)+v}}return{format:c,formatPrefix:u}}var g0,id,PF;vJ({thousands:",",grouping:[3],currency:["$",""]});function vJ(e){return g0=bJ(e),id=g0.format,PF=g0.formatPrefix,g0}function wJ(e){return Math.max(0,-Af(Math.abs(e)))}function _J(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Af(t)/3)))*3-Af(Math.abs(e)))}function SJ(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Af(t)-Af(e))+1}var ft=1e-6,qg=1e-12,Rt=Math.PI,qe=Rt/2,_6=Rt/4,Cr=Rt*2,_n=180/Rt,Qt=Rt/180,te=Math.abs,sd=Math.atan,Yi=Math.atan2,dt=Math.cos,b0=Math.ceil,zF=Math.exp,wS=Math.hypot,Wg=Math.log,Xw=Math.pow,lt=Math.sin,ai=Math.sign||function(e){return e>0?1:e<0?-1:0},Qn=Math.sqrt,S3=Math.tan;function jF(e){return e>1?0:e<-1?Rt:Math.acos(e)}function gr(e){return e>1?qe:e<-1?-qe:Math.asin(e)}function Dr(){}function Hg(e,t){e&&x6.hasOwnProperty(e.type)&&x6[e.type](e,t)}var S6={Feature:function(e,t){Hg(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)Hg(n[r].geometry,t)}},x6={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){_S(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)_S(n[r],t,0)},Polygon:function(e,t){I6(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)I6(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)Hg(n[r],t)}};function _S(e,t,n){var r=-1,i=e.length-n,s;for(t.lineStart();++r<i;)s=e[r],t.point(s[0],s[1],s[2]);t.lineEnd()}function I6(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)_S(e[n],t,1);t.polygonEnd()}function da(e,t){e&&S6.hasOwnProperty(e.type)?S6[e.type](e,t):Hg(e,t)}function SS(e){return[Yi(e[1],e[0]),gr(e[2])]}function Mf(e){var t=e[0],n=e[1],r=dt(n);return[r*dt(t),r*lt(t),lt(n)]}function v0(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Gg(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function Qw(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function w0(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function xS(e){var t=Qn(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var oh,Xg,Qg,Kg,Zg,Jg,t1,e1,IS,TS,ES,VF,YF,zn,jn,Vn,Fi={sphere:Dr,point:x3,lineStart:T6,lineEnd:E6,polygonStart:function(){Fi.lineStart=TJ,Fi.lineEnd=EJ},polygonEnd:function(){Fi.lineStart=T6,Fi.lineEnd=E6}};function x3(e,t){e*=Qt,t*=Qt;var n=dt(t);oy(n*dt(e),n*lt(e),lt(t))}function oy(e,t,n){++oh,Qg+=(e-Qg)/oh,Kg+=(t-Kg)/oh,Zg+=(n-Zg)/oh}function T6(){Fi.point=xJ}function xJ(e,t){e*=Qt,t*=Qt;var n=dt(t);zn=n*dt(e),jn=n*lt(e),Vn=lt(t),Fi.point=IJ,oy(zn,jn,Vn)}function IJ(e,t){e*=Qt,t*=Qt;var n=dt(t),r=n*dt(e),i=n*lt(e),s=lt(t),o=Yi(Qn((o=jn*s-Vn*i)*o+(o=Vn*r-zn*s)*o+(o=zn*i-jn*r)*o),zn*r+jn*i+Vn*s);Xg+=o,Jg+=o*(zn+(zn=r)),t1+=o*(jn+(jn=i)),e1+=o*(Vn+(Vn=s)),oy(zn,jn,Vn)}function E6(){Fi.point=x3}function TJ(){Fi.point=AJ}function EJ(){qF(VF,YF),Fi.point=x3}function AJ(e,t){VF=e,YF=t,e*=Qt,t*=Qt,Fi.point=qF;var n=dt(t);zn=n*dt(e),jn=n*lt(e),Vn=lt(t),oy(zn,jn,Vn)}function qF(e,t){e*=Qt,t*=Qt;var n=dt(t),r=n*dt(e),i=n*lt(e),s=lt(t),o=jn*s-Vn*i,a=Vn*r-zn*s,l=zn*i-jn*r,c=wS(o,a,l),u=gr(c),f=c&&-u/c;IS.add(f*o),TS.add(f*a),ES.add(f*l),Xg+=u,Jg+=u*(zn+(zn=r)),t1+=u*(jn+(jn=i)),e1+=u*(Vn+(Vn=s)),oy(zn,jn,Vn)}function MJ(e){oh=Xg=Qg=Kg=Zg=Jg=t1=e1=0,IS=new ks,TS=new ks,ES=new ks,da(e,Fi);var t=+IS,n=+TS,r=+ES,i=wS(t,n,r);return i<qg&&(t=Jg,n=t1,r=e1,Xg<ft&&(t=Qg,n=Kg,r=Zg),i=wS(t,n,r),i<qg)?[NaN,NaN]:[Yi(n,t)*_n,gr(r/i)*_n]}function AS(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function MS(e,t){return te(e)>Rt&&(e-=Math.round(e/Cr)*Cr),[e,t]}MS.invert=MS;function WF(e,t,n){return(e%=Cr)?t||n?AS(M6(e),$6(t,n)):M6(e):t||n?$6(t,n):MS}function A6(e){return function(t,n){return t+=e,te(t)>Rt&&(t-=Math.round(t/Cr)*Cr),[t,n]}}function M6(e){var t=A6(e);return t.invert=A6(-e),t}function $6(e,t){var n=dt(e),r=lt(e),i=dt(t),s=lt(t);function o(a,l){var c=dt(l),u=dt(a)*c,f=lt(a)*c,d=lt(l),h=d*n+u*r;return[Yi(f*i-h*s,u*n-d*r),gr(h*i+f*s)]}return o.invert=function(a,l){var c=dt(l),u=dt(a)*c,f=lt(a)*c,d=lt(l),h=d*i-f*s;return[Yi(f*i+d*s,u*n+h*r),gr(h*n-u*r)]},o}function $J(e){e=WF(e[0]*Qt,e[1]*Qt,e.length>2?e[2]*Qt:0);function t(n){return n=e(n[0]*Qt,n[1]*Qt),n[0]*=_n,n[1]*=_n,n}return t.invert=function(n){return n=e.invert(n[0]*Qt,n[1]*Qt),n[0]*=_n,n[1]*=_n,n},t}function NJ(e,t,n,r,i,s){if(n){var o=dt(t),a=lt(t),l=r*n;i==null?(i=t+r*Cr,s=t-l/2):(i=N6(o,i),s=N6(o,s),(r>0?i<s:i>s)&&(i+=r*Cr));for(var c,u=i;r>0?u>s:u<s;u-=l)c=SS([o,-a*dt(u),-a*lt(u)]),e.point(c[0],c[1])}}function N6(e,t){t=Mf(t),t[0]-=e,xS(t);var n=jF(-t[1]);return((-t[2]<0?-n:n)+Cr-ft)%Cr}function HF(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:Dr,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function bm(e,t){return te(e[0]-t[0])<ft&&te(e[1]-t[1])<ft}function _0(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function GF(e,t,n,r,i){var s=[],o=[],a,l;if(e.forEach(function(p){if(!((g=p.length-1)<=0)){var g,v=p[0],y=p[g],m;if(bm(v,y)){if(!v[2]&&!y[2]){for(i.lineStart(),a=0;a<g;++a)i.point((v=p[a])[0],v[1]);i.lineEnd();return}y[0]+=2*ft}s.push(m=new _0(v,p,null,!0)),o.push(m.o=new _0(v,null,m,!1)),s.push(m=new _0(y,p,null,!1)),o.push(m.o=new _0(y,null,m,!0))}}),!!s.length){for(o.sort(t),D6(s),D6(o),a=0,l=o.length;a<l;++a)o[a].e=n=!n;for(var c=s[0],u,f;;){for(var d=c,h=!0;d.v;)if((d=d.n)===c)return;u=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(a=0,l=u.length;a<l;++a)i.point((f=u[a])[0],f[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(h)for(u=d.p.z,a=u.length-1;a>=0;--a)i.point((f=u[a])[0],f[1]);else r(d.x,d.p.x,-1,i);d=d.p}d=d.o,u=d.z,h=!h}while(!d.v);i.lineEnd()}}}function D6(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function Kw(e){return te(e[0])<=Rt?e[0]:ai(e[0])*((te(e[0])+Rt)%Cr-Rt)}function DJ(e,t){var n=Kw(t),r=t[1],i=lt(r),s=[lt(n),-dt(n),0],o=0,a=0,l=new ks;i===1?r=qe+ft:i===-1&&(r=-qe-ft);for(var c=0,u=e.length;c<u;++c)if(d=(f=e[c]).length)for(var f,d,h=f[d-1],p=Kw(h),g=h[1]/2+_6,v=lt(g),y=dt(g),m=0;m<d;++m,p=w,v=_,y=x,h=b){var b=f[m],w=Kw(b),S=b[1]/2+_6,_=lt(S),x=dt(S),E=w-p,N=E>=0?1:-1,I=N*E,A=I>Rt,k=v*_;if(l.add(Yi(k*N*lt(I),y*x+k*dt(I))),o+=A?E+N*Cr:E,A^p>=n^w>=n){var R=Gg(Mf(h),Mf(b));xS(R);var T=Gg(s,R);xS(T);var M=(A^E>=0?-1:1)*gr(T[2]);(r>M||r===M&&(R[0]||R[1]))&&(a+=A^E>=0?1:-1)}}return(o<-ft||o<ft&&l<-qg)^a&1}function XF(e,t,n,r){return function(i){var s=t(i),o=HF(),a=t(o),l=!1,c,u,f,d={point:h,lineStart:g,lineEnd:v,polygonStart:function(){d.point=y,d.lineStart=m,d.lineEnd=b,u=[],c=[]},polygonEnd:function(){d.point=h,d.lineStart=g,d.lineEnd=v,u=KO(u);var w=DJ(c,r);u.length?(l||(i.polygonStart(),l=!0),GF(u,OJ,w,n,i)):w&&(l||(i.polygonStart(),l=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),l&&(i.polygonEnd(),l=!1),u=c=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(w,S){e(w,S)&&i.point(w,S)}function p(w,S){s.point(w,S)}function g(){d.point=p,s.lineStart()}function v(){d.point=h,s.lineEnd()}function y(w,S){f.push([w,S]),a.point(w,S)}function m(){a.lineStart(),f=[]}function b(){y(f[0][0],f[0][1]),a.lineEnd();var w=a.clean(),S=o.result(),_,x=S.length,E,N,I;if(f.pop(),c.push(f),f=null,!!x){if(w&1){if(N=S[0],(E=N.length-1)>0){for(l||(i.polygonStart(),l=!0),i.lineStart(),_=0;_<E;++_)i.point((I=N[_])[0],I[1]);i.lineEnd()}return}x>1&&w&2&&S.push(S.pop().concat(S.shift())),u.push(S.filter(kJ))}}return d}}function kJ(e){return e.length>1}function OJ(e,t){return((e=e.x)[0]<0?e[1]-qe-ft:qe-e[1])-((t=t.x)[0]<0?t[1]-qe-ft:qe-t[1])}const k6=XF(function(){return!0},FJ,RJ,[-Rt,-qe]);function FJ(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(s,o){var a=s>0?Rt:-Rt,l=te(s-t);te(l-Rt)<ft?(e.point(t,n=(n+o)/2>0?qe:-qe),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),e.point(s,n),i=0):r!==a&&l>=Rt&&(te(t-r)<ft&&(t-=r*ft),te(s-a)<ft&&(s-=a*ft),n=BJ(t,n,s,o),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),i=0),e.point(t=s,n=o),r=a},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function BJ(e,t,n,r){var i,s,o=lt(e-n);return te(o)>ft?sd((lt(t)*(s=dt(r))*lt(n)-lt(r)*(i=dt(t))*lt(e))/(i*s*o)):(t+r)/2}function RJ(e,t,n,r){var i;if(e==null)i=n*qe,r.point(-Rt,i),r.point(0,i),r.point(Rt,i),r.point(Rt,0),r.point(Rt,-i),r.point(0,-i),r.point(-Rt,-i),r.point(-Rt,0),r.point(-Rt,i);else if(te(e[0]-t[0])>ft){var s=e[0]<t[0]?Rt:-Rt;i=n*s/2,r.point(-s,i),r.point(0,i),r.point(s,i)}else r.point(t[0],t[1])}function LJ(e){var t=dt(e),n=6*Qt,r=t>0,i=te(t)>ft;function s(u,f,d,h){NJ(h,e,n,d,u,f)}function o(u,f){return dt(u)*dt(f)>t}function a(u){var f,d,h,p,g;return{lineStart:function(){p=h=!1,g=1},point:function(v,y){var m=[v,y],b,w=o(v,y),S=r?w?0:c(v,y):w?c(v+(v<0?Rt:-Rt),y):0;if(!f&&(p=h=w)&&u.lineStart(),w!==h&&(b=l(f,m),(!b||bm(f,b)||bm(m,b))&&(m[2]=1)),w!==h)g=0,w?(u.lineStart(),b=l(m,f),u.point(b[0],b[1])):(b=l(f,m),u.point(b[0],b[1],2),u.lineEnd()),f=b;else if(i&&f&&r^w){var _;!(S&d)&&(_=l(m,f,!0))&&(g=0,r?(u.lineStart(),u.point(_[0][0],_[0][1]),u.point(_[1][0],_[1][1]),u.lineEnd()):(u.point(_[1][0],_[1][1]),u.lineEnd(),u.lineStart(),u.point(_[0][0],_[0][1],3)))}w&&(!f||!bm(f,m))&&u.point(m[0],m[1]),f=m,h=w,d=S},lineEnd:function(){h&&u.lineEnd(),f=null},clean:function(){return g|(p&&h)<<1}}}function l(u,f,d){var h=Mf(u),p=Mf(f),g=[1,0,0],v=Gg(h,p),y=v0(v,v),m=v[0],b=y-m*m;if(!b)return!d&&u;var w=t*y/b,S=-t*m/b,_=Gg(g,v),x=w0(g,w),E=w0(v,S);Qw(x,E);var N=_,I=v0(x,N),A=v0(N,N),k=I*I-A*(v0(x,x)-1);if(!(k<0)){var R=Qn(k),T=w0(N,(-I-R)/A);if(Qw(T,x),T=SS(T),!d)return T;var M=u[0],$=f[0],B=u[1],O=f[1],C;$<M&&(C=M,M=$,$=C);var F=$-M,P=te(F-Rt)<ft,z=P||F<ft;if(!P&&O<B&&(C=B,B=O,O=C),z?P?B+O>0^T[1]<(te(T[0]-M)<ft?B:O):B<=T[1]&&T[1]<=O:F>Rt^(M<=T[0]&&T[0]<=$)){var H=w0(N,(-I+R)/A);return Qw(H,x),[T,SS(H)]}}}function c(u,f){var d=r?e:Rt-e,h=0;return u<-d?h|=1:u>d&&(h|=2),f<-d?h|=4:f>d&&(h|=8),h}return XF(o,a,s,r?[0,-e]:[-Rt,e-Rt])}function CJ(e,t,n,r,i,s){var o=e[0],a=e[1],l=t[0],c=t[1],u=0,f=1,d=l-o,h=c-a,p;if(p=n-o,!(!d&&p>0)){if(p/=d,d<0){if(p<u)return;p<f&&(f=p)}else if(d>0){if(p>f)return;p>u&&(u=p)}if(p=i-o,!(!d&&p<0)){if(p/=d,d<0){if(p>f)return;p>u&&(u=p)}else if(d>0){if(p<u)return;p<f&&(f=p)}if(p=r-a,!(!h&&p>0)){if(p/=h,h<0){if(p<u)return;p<f&&(f=p)}else if(h>0){if(p>f)return;p>u&&(u=p)}if(p=s-a,!(!h&&p<0)){if(p/=h,h<0){if(p>f)return;p>u&&(u=p)}else if(h>0){if(p<u)return;p<f&&(f=p)}return u>0&&(e[0]=o+u*d,e[1]=a+u*h),f<1&&(t[0]=o+f*d,t[1]=a+f*h),!0}}}}}var ah=1e9,S0=-ah;function QF(e,t,n,r){function i(c,u){return e<=c&&c<=n&&t<=u&&u<=r}function s(c,u,f,d){var h=0,p=0;if(c==null||(h=o(c,f))!==(p=o(u,f))||l(c,u)<0^f>0)do d.point(h===0||h===3?e:n,h>1?r:t);while((h=(h+f+4)%4)!==p);else d.point(u[0],u[1])}function o(c,u){return te(c[0]-e)<ft?u>0?0:3:te(c[0]-n)<ft?u>0?2:1:te(c[1]-t)<ft?u>0?1:0:u>0?3:2}function a(c,u){return l(c.x,u.x)}function l(c,u){var f=o(c,1),d=o(u,1);return f!==d?f-d:f===0?u[1]-c[1]:f===1?c[0]-u[0]:f===2?c[1]-u[1]:u[0]-c[0]}return function(c){var u=c,f=HF(),d,h,p,g,v,y,m,b,w,S,_,x={point:E,lineStart:k,lineEnd:R,polygonStart:I,polygonEnd:A};function E(M,$){i(M,$)&&u.point(M,$)}function N(){for(var M=0,$=0,B=h.length;$<B;++$)for(var O=h[$],C=1,F=O.length,P=O[0],z,H,X=P[0],tt=P[1];C<F;++C)z=X,H=tt,P=O[C],X=P[0],tt=P[1],H<=r?tt>r&&(X-z)*(r-H)>(tt-H)*(e-z)&&++M:tt<=r&&(X-z)*(r-H)<(tt-H)*(e-z)&&--M;return M}function I(){u=f,d=[],h=[],_=!0}function A(){var M=N(),$=_&&M,B=(d=KO(d)).length;($||B)&&(c.polygonStart(),$&&(c.lineStart(),s(null,null,1,c),c.lineEnd()),B&&GF(d,a,M,s,c),c.polygonEnd()),u=c,d=h=p=null}function k(){x.point=T,h&&h.push(p=[]),S=!0,w=!1,m=b=NaN}function R(){d&&(T(g,v),y&&w&&f.rejoin(),d.push(f.result())),x.point=E,w&&u.lineEnd()}function T(M,$){var B=i(M,$);if(h&&p.push([M,$]),S)g=M,v=$,y=B,S=!1,B&&(u.lineStart(),u.point(M,$));else if(B&&w)u.point(M,$);else{var O=[m=Math.max(S0,Math.min(ah,m)),b=Math.max(S0,Math.min(ah,b))],C=[M=Math.max(S0,Math.min(ah,M)),$=Math.max(S0,Math.min(ah,$))];CJ(O,C,e,t,n,r)?(w||(u.lineStart(),u.point(O[0],O[1])),u.point(C[0],C[1]),B||u.lineEnd(),_=!1):B&&(u.lineStart(),u.point(M,$),_=!1)}m=M,b=$,w=B}return x}}function O6(e,t,n){var r=Nr(e,t-ft,n).concat(t);return function(i){return r.map(function(s){return[i,s]})}}function F6(e,t,n){var r=Nr(e,t-ft,n).concat(t);return function(i){return r.map(function(s){return[s,i]})}}function UJ(){var e,t,n,r,i,s,o,a,l=10,c=l,u=90,f=360,d,h,p,g,v=2.5;function y(){return{type:"MultiLineString",coordinates:m()}}function m(){return Nr(b0(r/u)*u,n,u).map(p).concat(Nr(b0(a/f)*f,o,f).map(g)).concat(Nr(b0(t/l)*l,e,l).filter(function(b){return te(b%u)>ft}).map(d)).concat(Nr(b0(s/c)*c,i,c).filter(function(b){return te(b%f)>ft}).map(h))}return y.lines=function(){return m().map(function(b){return{type:"LineString",coordinates:b}})},y.outline=function(){return{type:"Polygon",coordinates:[p(r).concat(g(o).slice(1),p(n).reverse().slice(1),g(a).reverse().slice(1))]}},y.extent=function(b){return arguments.length?y.extentMajor(b).extentMinor(b):y.extentMinor()},y.extentMajor=function(b){return arguments.length?(r=+b[0][0],n=+b[1][0],a=+b[0][1],o=+b[1][1],r>n&&(b=r,r=n,n=b),a>o&&(b=a,a=o,o=b),y.precision(v)):[[r,a],[n,o]]},y.extentMinor=function(b){return arguments.length?(t=+b[0][0],e=+b[1][0],s=+b[0][1],i=+b[1][1],t>e&&(b=t,t=e,e=b),s>i&&(b=s,s=i,i=b),y.precision(v)):[[t,s],[e,i]]},y.step=function(b){return arguments.length?y.stepMajor(b).stepMinor(b):y.stepMinor()},y.stepMajor=function(b){return arguments.length?(u=+b[0],f=+b[1],y):[u,f]},y.stepMinor=function(b){return arguments.length?(l=+b[0],c=+b[1],y):[l,c]},y.precision=function(b){return arguments.length?(v=+b,d=O6(s,i,90),h=F6(t,e,v),p=O6(a,o,90),g=F6(r,n,v),y):v},y.extentMajor([[-180,-90+ft],[180,90-ft]]).extentMinor([[-180,-80-ft],[180,80+ft]])}function PJ(){return UJ()()}const $S=e=>e;var Zw=new ks,NS=new ks,KF,ZF,DS,kS,ha={point:Dr,lineStart:Dr,lineEnd:Dr,polygonStart:function(){ha.lineStart=zJ,ha.lineEnd=VJ},polygonEnd:function(){ha.lineStart=ha.lineEnd=ha.point=Dr,Zw.add(te(NS)),NS=new ks},result:function(){var e=Zw/2;return Zw=new ks,e}};function zJ(){ha.point=jJ}function jJ(e,t){ha.point=JF,KF=DS=e,ZF=kS=t}function JF(e,t){NS.add(kS*e-DS*t),DS=e,kS=t}function VJ(){JF(KF,ZF)}const B6=ha;var $f=1/0,n1=$f,gp=-$f,r1=gp,YJ={point:qJ,lineStart:Dr,lineEnd:Dr,polygonStart:Dr,polygonEnd:Dr,result:function(){var e=[[$f,n1],[gp,r1]];return gp=r1=-(n1=$f=1/0),e}};function qJ(e,t){e<$f&&($f=e),e>gp&&(gp=e),t<n1&&(n1=t),t>r1&&(r1=t)}const i1=YJ;var OS=0,FS=0,lh=0,s1=0,o1=0,$u=0,BS=0,RS=0,ch=0,tB,eB,gs,bs,Oi={point:xc,lineStart:R6,lineEnd:L6,polygonStart:function(){Oi.lineStart=GJ,Oi.lineEnd=XJ},polygonEnd:function(){Oi.point=xc,Oi.lineStart=R6,Oi.lineEnd=L6},result:function(){var e=ch?[BS/ch,RS/ch]:$u?[s1/$u,o1/$u]:lh?[OS/lh,FS/lh]:[NaN,NaN];return OS=FS=lh=s1=o1=$u=BS=RS=ch=0,e}};function xc(e,t){OS+=e,FS+=t,++lh}function R6(){Oi.point=WJ}function WJ(e,t){Oi.point=HJ,xc(gs=e,bs=t)}function HJ(e,t){var n=e-gs,r=t-bs,i=Qn(n*n+r*r);s1+=i*(gs+e)/2,o1+=i*(bs+t)/2,$u+=i,xc(gs=e,bs=t)}function L6(){Oi.point=xc}function GJ(){Oi.point=QJ}function XJ(){nB(tB,eB)}function QJ(e,t){Oi.point=nB,xc(tB=gs=e,eB=bs=t)}function nB(e,t){var n=e-gs,r=t-bs,i=Qn(n*n+r*r);s1+=i*(gs+e)/2,o1+=i*(bs+t)/2,$u+=i,i=bs*e-gs*t,BS+=i*(gs+e),RS+=i*(bs+t),ch+=i*3,xc(gs=e,bs=t)}const C6=Oi;function rB(e){this._context=e}rB.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,Cr);break}}},result:Dr};var LS=new ks,Jw,iB,sB,uh,fh,a1={point:Dr,lineStart:function(){a1.point=KJ},lineEnd:function(){Jw&&oB(iB,sB),a1.point=Dr},polygonStart:function(){Jw=!0},polygonEnd:function(){Jw=null},result:function(){var e=+LS;return LS=new ks,e}};function KJ(e,t){a1.point=oB,iB=uh=e,sB=fh=t}function oB(e,t){uh-=e,fh-=t,LS.add(Qn(uh*uh+fh*fh)),uh=e,fh=t}const U6=a1;let P6,l1,z6,j6;class V6{constructor(t){this._append=t==null?aB:ZJ(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==z6||this._append!==l1){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,z6=r,l1=this._append,j6=this._,this._=i}this._+=j6;break}}}result(){const t=this._;return this._="",t.length?t:null}}function aB(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function ZJ(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return aB;if(t!==P6){const n=10**t;P6=t,l1=function(i){let s=1;this._+=i[0];for(const o=i.length;s<o;++s)this._+=Math.round(arguments[s]*n)/n+i[s]}}return l1}function ol(e,t){let n=3,r=4.5,i,s;function o(a){return a&&(typeof r=="function"&&s.pointRadius(+r.apply(this,arguments)),da(a,i(s))),s.result()}return o.area=function(a){return da(a,i(B6)),B6.result()},o.measure=function(a){return da(a,i(U6)),U6.result()},o.bounds=function(a){return da(a,i(i1)),i1.result()},o.centroid=function(a){return da(a,i(C6)),C6.result()},o.projection=function(a){return arguments.length?(i=a==null?(e=null,$S):(e=a).stream,o):e},o.context=function(a){return arguments.length?(s=a==null?(t=null,new V6(n)):new rB(t=a),typeof r!="function"&&s.pointRadius(r),o):t},o.pointRadius=function(a){return arguments.length?(r=typeof a=="function"?a:(s.pointRadius(+a),+a),o):r},o.digits=function(a){if(!arguments.length)return n;if(a==null)n=null;else{const l=Math.floor(a);if(!(l>=0))throw new RangeError(`invalid digits: ${a}`);n=l}return t===null&&(s=new V6(n)),o},o.projection(e).digits(n).context(t)}function c1(e){return{stream:nv(e)}}function nv(e){return function(t){var n=new CS;for(var r in e)n[r]=e[r];return n.stream=t,n}}function CS(){}CS.prototype={constructor:CS,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function I3(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),da(n,e.stream(i1)),t(i1.result()),r!=null&&e.clipExtent(r),e}function T3(e,t,n){return I3(e,function(r){var i=t[1][0]-t[0][0],s=t[1][1]-t[0][1],o=Math.min(i/(r[1][0]-r[0][0]),s/(r[1][1]-r[0][1])),a=+t[0][0]+(i-o*(r[1][0]+r[0][0]))/2,l=+t[0][1]+(s-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([a,l])},n)}function lB(e,t,n){return T3(e,[[0,0],t],n)}function cB(e,t,n){return I3(e,function(r){var i=+t,s=i/(r[1][0]-r[0][0]),o=(i-s*(r[1][0]+r[0][0]))/2,a=-s*r[0][1];e.scale(150*s).translate([o,a])},n)}function uB(e,t,n){return I3(e,function(r){var i=+t,s=i/(r[1][1]-r[0][1]),o=-s*r[0][0],a=(i-s*(r[1][1]+r[0][1]))/2;e.scale(150*s).translate([o,a])},n)}var Y6=16,JJ=dt(30*Qt);function q6(e,t){return+t?ett(e,t):ttt(e)}function ttt(e){return nv({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function ett(e,t){function n(r,i,s,o,a,l,c,u,f,d,h,p,g,v){var y=c-r,m=u-i,b=y*y+m*m;if(b>4*t&&g--){var w=o+d,S=a+h,_=l+p,x=Qn(w*w+S*S+_*_),E=gr(_/=x),N=te(te(_)-1)<ft||te(s-f)<ft?(s+f)/2:Yi(S,w),I=e(N,E),A=I[0],k=I[1],R=A-r,T=k-i,M=m*R-y*T;(M*M/b>t||te((y*R+m*T)/b-.5)>.3||o*d+a*h+l*p<JJ)&&(n(r,i,s,o,a,l,A,k,N,w/=x,S/=x,_,g,v),v.point(A,k),n(A,k,N,w,S,_,c,u,f,d,h,p,g,v))}}return function(r){var i,s,o,a,l,c,u,f,d,h,p,g,v={point:y,lineStart:m,lineEnd:w,polygonStart:function(){r.polygonStart(),v.lineStart=S},polygonEnd:function(){r.polygonEnd(),v.lineStart=m}};function y(E,N){E=e(E,N),r.point(E[0],E[1])}function m(){f=NaN,v.point=b,r.lineStart()}function b(E,N){var I=Mf([E,N]),A=e(E,N);n(f,d,u,h,p,g,f=A[0],d=A[1],u=E,h=I[0],p=I[1],g=I[2],Y6,r),r.point(f,d)}function w(){v.point=y,r.lineEnd()}function S(){m(),v.point=_,v.lineEnd=x}function _(E,N){b(i=E,N),s=f,o=d,a=h,l=p,c=g,v.point=b}function x(){n(f,d,u,h,p,g,s,o,i,a,l,c,Y6,r),v.lineEnd=w,w()}return v}}var ntt=nv({point:function(e,t){this.stream.point(e*Qt,t*Qt)}});function rtt(e){return nv({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function itt(e,t,n,r,i){function s(o,a){return o*=r,a*=i,[t+e*o,n-e*a]}return s.invert=function(o,a){return[(o-t)/e*r,(n-a)/e*i]},s}function W6(e,t,n,r,i,s){if(!s)return itt(e,t,n,r,i);var o=dt(s),a=lt(s),l=o*e,c=a*e,u=o/e,f=a/e,d=(a*n-o*t)/e,h=(a*t+o*n)/e;function p(g,v){return g*=r,v*=i,[l*g-c*v+t,n-c*g-l*v]}return p.invert=function(g,v){return[r*(u*g-f*v+d),i*(h-f*g-u*v)]},p}function al(e){return fB(function(){return e})()}function fB(e){var t,n=150,r=480,i=250,s=0,o=0,a=0,l=0,c=0,u,f=0,d=1,h=1,p=null,g=k6,v=null,y,m,b,w=$S,S=.5,_,x,E,N,I;function A(M){return E(M[0]*Qt,M[1]*Qt)}function k(M){return M=E.invert(M[0],M[1]),M&&[M[0]*_n,M[1]*_n]}A.stream=function(M){return N&&I===M?N:N=ntt(rtt(u)(g(_(w(I=M)))))},A.preclip=function(M){return arguments.length?(g=M,p=void 0,T()):g},A.postclip=function(M){return arguments.length?(w=M,v=y=m=b=null,T()):w},A.clipAngle=function(M){return arguments.length?(g=+M?LJ(p=M*Qt):(p=null,k6),T()):p*_n},A.clipExtent=function(M){return arguments.length?(w=M==null?(v=y=m=b=null,$S):QF(v=+M[0][0],y=+M[0][1],m=+M[1][0],b=+M[1][1]),T()):v==null?null:[[v,y],[m,b]]},A.scale=function(M){return arguments.length?(n=+M,R()):n},A.translate=function(M){return arguments.length?(r=+M[0],i=+M[1],R()):[r,i]},A.center=function(M){return arguments.length?(s=M[0]%360*Qt,o=M[1]%360*Qt,R()):[s*_n,o*_n]},A.rotate=function(M){return arguments.length?(a=M[0]%360*Qt,l=M[1]%360*Qt,c=M.length>2?M[2]%360*Qt:0,R()):[a*_n,l*_n,c*_n]},A.angle=function(M){return arguments.length?(f=M%360*Qt,R()):f*_n},A.reflectX=function(M){return arguments.length?(d=M?-1:1,R()):d<0},A.reflectY=function(M){return arguments.length?(h=M?-1:1,R()):h<0},A.precision=function(M){return arguments.length?(_=q6(x,S=M*M),T()):Qn(S)},A.fitExtent=function(M,$){return T3(A,M,$)},A.fitSize=function(M,$){return lB(A,M,$)},A.fitWidth=function(M,$){return cB(A,M,$)},A.fitHeight=function(M,$){return uB(A,M,$)};function R(){var M=W6(n,0,0,d,h,f).apply(null,t(s,o)),$=W6(n,r-M[0],i-M[1],d,h,f);return u=WF(a,l,c),x=AS(t,$),E=AS(u,x),_=q6(x,S),T()}function T(){return N=I=null,A}return function(){return t=e.apply(this,arguments),A.invert=t.invert&&k,R()}}function E3(e){var t=0,n=Rt/3,r=fB(e),i=r(t,n);return i.parallels=function(s){return arguments.length?r(t=s[0]*Qt,n=s[1]*Qt):[t*_n,n*_n]},i}function stt(e){var t=dt(e);function n(r,i){return[r*t,lt(i)/t]}return n.invert=function(r,i){return[r/t,gr(i*t)]},n}function ott(e,t){var n=lt(e),r=(n+lt(t))/2;if(te(r)<ft)return stt(e);var i=1+n*(2*r-n),s=Qn(i)/r;function o(a,l){var c=Qn(i-2*r*lt(l))/r;return[c*lt(a*=r),s-c*dt(a)]}return o.invert=function(a,l){var c=s-l,u=Yi(a,te(c))*ai(c);return c*r<0&&(u-=Rt*ai(a)*ai(c)),[u/r,gr((i-(a*a+c*c)*r*r)/(2*r))]},o}function u1(){return E3(ott).scale(155.424).center([0,33.6442])}function dB(){return u1().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function att(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function ltt(){var e,t,n=dB(),r,i=u1().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s,o=u1().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,l,c={point:function(d,h){l=[d,h]}};function u(d){var h=d[0],p=d[1];return l=null,r.point(h,p),l||(s.point(h,p),l)||(a.point(h,p),l)}u.invert=function(d){var h=n.scale(),p=n.translate(),g=(d[0]-p[0])/h,v=(d[1]-p[1])/h;return(v>=.12&&v<.234&&g>=-.425&&g<-.214?i:v>=.166&&v<.234&&g>=-.214&&g<-.115?o:n).invert(d)},u.stream=function(d){return e&&t===d?e:e=att([n.stream(t=d),i.stream(d),o.stream(d)])},u.precision=function(d){return arguments.length?(n.precision(d),i.precision(d),o.precision(d),f()):n.precision()},u.scale=function(d){return arguments.length?(n.scale(d),i.scale(d*.35),o.scale(d),u.translate(n.translate())):n.scale()},u.translate=function(d){if(!arguments.length)return n.translate();var h=n.scale(),p=+d[0],g=+d[1];return r=n.translate(d).clipExtent([[p-.455*h,g-.238*h],[p+.455*h,g+.238*h]]).stream(c),s=i.translate([p-.307*h,g+.201*h]).clipExtent([[p-.425*h+ft,g+.12*h+ft],[p-.214*h-ft,g+.234*h-ft]]).stream(c),a=o.translate([p-.205*h,g+.212*h]).clipExtent([[p-.214*h+ft,g+.166*h+ft],[p-.115*h-ft,g+.234*h-ft]]).stream(c),f()},u.fitExtent=function(d,h){return T3(u,d,h)},u.fitSize=function(d,h){return lB(u,d,h)},u.fitWidth=function(d,h){return cB(u,d,h)},u.fitHeight=function(d,h){return uB(u,d,h)};function f(){return e=t=null,u}return u.scale(1070)}function hB(e){return function(t,n){var r=dt(t),i=dt(n),s=e(r*i);return s===1/0?[2,0]:[s*i*lt(t),s*lt(n)]}}function ay(e){return function(t,n){var r=Qn(t*t+n*n),i=e(r),s=lt(i),o=dt(i);return[Yi(t*s,r*o),gr(r&&n*s/r)]}}var pB=hB(function(e){return Qn(2/(1+e))});pB.invert=ay(function(e){return 2*gr(e/2)});function ctt(){return al(pB).scale(124.75).clipAngle(180-.001)}var yB=hB(function(e){return(e=jF(e))&&e/lt(e)});yB.invert=ay(function(e){return e});function utt(){return al(yB).scale(79.4188).clipAngle(180-.001)}function rv(e,t){return[e,Wg(S3((qe+t)/2))]}rv.invert=function(e,t){return[e,2*sd(zF(t))-qe]};function ftt(){return mB(rv).scale(961/Cr)}function mB(e){var t=al(e),n=t.center,r=t.scale,i=t.translate,s=t.clipExtent,o=null,a,l,c;t.scale=function(f){return arguments.length?(r(f),u()):r()},t.translate=function(f){return arguments.length?(i(f),u()):i()},t.center=function(f){return arguments.length?(n(f),u()):n()},t.clipExtent=function(f){return arguments.length?(f==null?o=a=l=c=null:(o=+f[0][0],a=+f[0][1],l=+f[1][0],c=+f[1][1]),u()):o==null?null:[[o,a],[l,c]]};function u(){var f=Rt*r(),d=t($J(t.rotate()).invert([0,0]));return s(o==null?[[d[0]-f,d[1]-f],[d[0]+f,d[1]+f]]:e===rv?[[Math.max(d[0]-f,o),a],[Math.min(d[0]+f,l),c]]:[[o,Math.max(d[1]-f,a)],[l,Math.min(d[1]+f,c)]])}return u()}function x0(e){return S3((qe+e)/2)}function dtt(e,t){var n=dt(e),r=e===t?lt(e):Wg(n/dt(t))/Wg(x0(t)/x0(e)),i=n*Xw(x0(e),r)/r;if(!r)return rv;function s(o,a){i>0?a<-qe+ft&&(a=-qe+ft):a>qe-ft&&(a=qe-ft);var l=i/Xw(x0(a),r);return[l*lt(r*o),i-l*dt(r*o)]}return s.invert=function(o,a){var l=i-a,c=ai(r)*Qn(o*o+l*l),u=Yi(o,te(l))*ai(l);return l*r<0&&(u-=Rt*ai(o)*ai(l)),[u/r,2*sd(Xw(i/c,1/r))-qe]},s}function htt(){return E3(dtt).scale(109.5).parallels([30,30])}function f1(e,t){return[e,t]}f1.invert=f1;function ptt(){return al(f1).scale(152.63)}function ytt(e,t){var n=dt(e),r=e===t?lt(e):(n-dt(t))/(t-e),i=n/r+e;if(te(r)<ft)return f1;function s(o,a){var l=i-a,c=r*o;return[l*lt(c),i-l*dt(c)]}return s.invert=function(o,a){var l=i-a,c=Yi(o,te(l))*ai(l);return l*r<0&&(c-=Rt*ai(o)*ai(l)),[c/r,i-ai(r)*Qn(o*o+l*l)]},s}function mtt(){return E3(ytt).scale(131.154).center([0,13.9389])}var Ah=1.340264,Mh=-.081106,$h=893e-6,Nh=.003796,d1=Qn(3)/2,gtt=12;function gB(e,t){var n=gr(d1*lt(t)),r=n*n,i=r*r*r;return[e*dt(n)/(d1*(Ah+3*Mh*r+i*(7*$h+9*Nh*r))),n*(Ah+Mh*r+i*($h+Nh*r))]}gB.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,s=0,o,a,l;s<gtt&&(a=n*(Ah+Mh*r+i*($h+Nh*r))-t,l=Ah+3*Mh*r+i*(7*$h+9*Nh*r),n-=o=a/l,r=n*n,i=r*r*r,!(te(o)<qg));++s);return[d1*e*(Ah+3*Mh*r+i*(7*$h+9*Nh*r))/dt(n),gr(lt(n)/d1)]};function btt(){return al(gB).scale(177.158)}function bB(e,t){var n=dt(t),r=dt(e)*n;return[n*lt(e)/r,lt(t)/r]}bB.invert=ay(sd);function vtt(){return al(bB).scale(144.049).clipAngle(60)}function vB(e,t){return[dt(t)*lt(e),lt(t)]}vB.invert=ay(gr);function wtt(){return al(vB).scale(249.5).clipAngle(90+ft)}function wB(e,t){var n=dt(t),r=1+dt(e)*n;return[n*lt(e)/r,lt(t)/r]}wB.invert=ay(function(e){return 2*sd(e)});function _tt(){return al(wB).scale(250).clipAngle(142)}function _B(e,t){return[Wg(S3((qe+t)/2)),-e]}_B.invert=function(e,t){return[-t,2*sd(zF(e))-qe]};function Stt(){var e=mB(_B),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}function xtt(e,t){return e.parent===t.parent?1:2}function Itt(e){return e.reduce(Ttt,0)/e.length}function Ttt(e,t){return e+t.x}function Ett(e){return 1+e.reduce(Att,0)}function Att(e,t){return Math.max(e,t.y)}function Mtt(e){for(var t;t=e.children;)e=t[0];return e}function $tt(e){for(var t;t=e.children;)e=t[t.length-1];return e}function SB(){var e=xtt,t=1,n=1,r=!1;function i(s){var o,a=0;s.eachAfter(function(d){var h=d.children;h?(d.x=Itt(h),d.y=Ett(h)):(d.x=o?a+=e(d,o):0,d.y=0,o=d)});var l=Mtt(s),c=$tt(s),u=l.x-e(l,c)/2,f=c.x+e(c,l)/2;return s.eachAfter(r?function(d){d.x=(d.x-s.x)*t,d.y=(s.y-d.y)*n}:function(d){d.x=(d.x-u)/(f-u)*t,d.y=(1-(s.y?d.y/s.y:1))*n})}return i.separation=function(s){return arguments.length?(e=s,i):e},i.size=function(s){return arguments.length?(r=!1,t=+s[0],n=+s[1],i):r?null:[t,n]},i.nodeSize=function(s){return arguments.length?(r=!0,t=+s[0],n=+s[1],i):r?[t,n]:null},i}function Ntt(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function Dtt(){return this.eachAfter(Ntt)}function ktt(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function Ott(e,t){for(var n=this,r=[n],i,s,o=-1;n=r.pop();)if(e.call(t,n,++o,this),i=n.children)for(s=i.length-1;s>=0;--s)r.push(i[s]);return this}function Ftt(e,t){for(var n=this,r=[n],i=[],s,o,a,l=-1;n=r.pop();)if(i.push(n),s=n.children)for(o=0,a=s.length;o<a;++o)r.push(s[o]);for(;n=i.pop();)e.call(t,n,++l,this);return this}function Btt(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function Rtt(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function Ltt(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function Ctt(e){for(var t=this,n=Utt(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function Utt(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function Ptt(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function ztt(){return Array.from(this)}function jtt(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function Vtt(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*Ytt(){var e=this,t,n=[e],r,i,s;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,s=r.length;i<s;++i)n.push(r[i]);while(n.length)}function xB(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=Htt)):t===void 0&&(t=Wtt);for(var n=new Nf(e),r,i=[n],s,o,a,l;r=i.pop();)if((o=t(r.data))&&(l=(o=Array.from(o)).length))for(r.children=o,a=l-1;a>=0;--a)i.push(s=o[a]=new Nf(o[a])),s.parent=r,s.depth=r.depth+1;return n.eachBefore(IB)}function qtt(){return xB(this).eachBefore(Gtt)}function Wtt(e){return e.children}function Htt(e){return Array.isArray(e)?e[1]:null}function Gtt(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function IB(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function Nf(e){this.data=e,this.depth=this.height=0,this.parent=null}Nf.prototype=xB.prototype={constructor:Nf,count:Dtt,each:ktt,eachAfter:Ftt,eachBefore:Ott,find:Btt,sum:Rtt,sort:Ltt,path:Ctt,ancestors:Ptt,descendants:ztt,leaves:jtt,links:Vtt,copy:qtt,[Symbol.iterator]:Ytt};function t_(e){return e==null?null:Xtt(e)}function Xtt(e){if(typeof e!="function")throw new Error;return e}var Qtt={depth:-1},H6={},e_={};function Ktt(e){return e.id}function Ztt(e){return e.parentId}function TB(){var e=Ktt,t=Ztt,n;function r(i){var s=Array.from(i),o=e,a=t,l,c,u,f,d,h,p,g,v=new Map;if(n!=null){const y=s.map((w,S)=>Jtt(n(w,S,i))),m=y.map(G6),b=new Set(y).add("");for(const w of m)b.has(w)||(b.add(w),y.push(w),m.push(G6(w)),s.push(e_));o=(w,S)=>y[S],a=(w,S)=>m[S]}for(u=0,l=s.length;u<l;++u)c=s[u],h=s[u]=new Nf(c),(p=o(c,u,i))!=null&&(p+="")&&(g=h.id=p,v.set(g,v.has(g)?H6:h)),(p=a(c,u,i))!=null&&(p+="")&&(h.parent=p);for(u=0;u<l;++u)if(h=s[u],p=h.parent){if(d=v.get(p),!d)throw new Error("missing: "+p);if(d===H6)throw new Error("ambiguous: "+p);d.children?d.children.push(h):d.children=[h],h.parent=d}else{if(f)throw new Error("multiple roots");f=h}if(!f)throw new Error("no root");if(n!=null){for(;f.data===e_&&f.children.length===1;)f=f.children[0],--l;for(let y=s.length-1;y>=0&&(h=s[y],h.data===e_);--y)h.data=null}if(f.parent=Qtt,f.eachBefore(function(y){y.depth=y.parent.depth+1,--l}).eachBefore(IB),f.parent=null,l>0)throw new Error("cycle");return f}return r.id=function(i){return arguments.length?(e=t_(i),r):e},r.parentId=function(i){return arguments.length?(t=t_(i),r):t},r.path=function(i){return arguments.length?(n=t_(i),r):n},r}function Jtt(e){e=`${e}`;let t=e.length;return US(e,t-1)&&!US(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function G6(e){let t=e.length;if(t<2)return"";for(;--t>1&&!US(e,t););return e.slice(0,t)}function US(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}function tet(e,t){return e.parent===t.parent?1:2}function n_(e){var t=e.children;return t?t[0]:e.t}function r_(e){var t=e.children;return t?t[t.length-1]:e.t}function eet(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function net(e){for(var t=0,n=0,r=e.children,i=r.length,s;--i>=0;)s=r[i],s.z+=t,s.m+=t,t+=s.s+(n+=s.c)}function ret(e,t,n){return e.a.parent===t.parent?e.a:n}function vm(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}vm.prototype=Object.create(Nf.prototype);function iet(e){for(var t=new vm(e,0),n,r=[t],i,s,o,a;n=r.pop();)if(s=n._.children)for(n.children=new Array(a=s.length),o=a-1;o>=0;--o)r.push(i=n.children[o]=new vm(s[o],o)),i.parent=n;return(t.parent=new vm(null,0)).children=[t],t}function h1(){var e=tet,t=1,n=1,r=null;function i(c){var u=iet(c);if(u.eachAfter(s),u.parent.m=-u.z,u.eachBefore(o),r)c.eachBefore(l);else{var f=c,d=c,h=c;c.eachBefore(function(m){m.x<f.x&&(f=m),m.x>d.x&&(d=m),m.depth>h.depth&&(h=m)});var p=f===d?1:e(f,d)/2,g=p-f.x,v=t/(d.x+p+g),y=n/(h.depth||1);c.eachBefore(function(m){m.x=(m.x+g)*v,m.y=m.depth*y})}return c}function s(c){var u=c.children,f=c.parent.children,d=c.i?f[c.i-1]:null;if(u){net(c);var h=(u[0].z+u[u.length-1].z)/2;d?(c.z=d.z+e(c._,d._),c.m=c.z-h):c.z=h}else d&&(c.z=d.z+e(c._,d._));c.parent.A=a(c,d,c.parent.A||f[0])}function o(c){c._.x=c.z+c.parent.m,c.m+=c.parent.m}function a(c,u,f){if(u){for(var d=c,h=c,p=u,g=d.parent.children[0],v=d.m,y=h.m,m=p.m,b=g.m,w;p=r_(p),d=n_(d),p&&d;)g=n_(g),h=r_(h),h.a=c,w=p.z+m-d.z-v+e(p._,d._),w>0&&(eet(ret(p,c,f),c,w),v+=w,y+=w),m+=p.m,v+=d.m,b+=g.m,y+=h.m;p&&!r_(h)&&(h.t=p,h.m+=m-y),d&&!n_(g)&&(g.t=d,g.m+=v-b,f=c)}return f}function l(c){c.x*=t,c.y=c.depth*n}return i.separation=function(c){return arguments.length?(e=c,i):e},i.size=function(c){return arguments.length?(r=!1,t=+c[0],n=+c[1],i):r?null:[t,n]},i.nodeSize=function(c){return arguments.length?(r=!0,t=+c[0],n=+c[1],i):r?[t,n]:null},i}const set=1664525,oet=1013904223,X6=1/4294967296;function A3(e=Math.random()){let t=(0<=e&&e<1?e/X6:Math.abs(e))|0;return()=>(t=set*t+oet|0,X6*(t>>>0))}function Vs(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function iv(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const PS=Symbol("implicit");function M3(){var e=new bc,t=[],n=[],r=PS;function i(s){let o=e.get(s);if(o===void 0){if(r!==PS)return r;e.set(s,o=t.push(s)-1)}return n[o%n.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new bc;for(const o of s)e.has(o)||e.set(o,t.push(o)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return M3(t,n).unknown(r)},Vs.apply(i,arguments),i}function sv(){var e=M3().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,s,o,a=!1,l=0,c=0,u=.5;delete e.unknown;function f(){var d=t().length,h=i<r,p=h?i:r,g=h?r:i;s=(g-p)/Math.max(1,d-l+c*2),a&&(s=Math.floor(s)),p+=(g-p-s*(d-l))*u,o=s*(1-l),a&&(p=Math.round(p),o=Math.round(o));var v=Nr(d).map(function(y){return p+s*y});return n(h?v.reverse():v)}return e.domain=function(d){return arguments.length?(t(d),f()):t()},e.range=function(d){return arguments.length?([r,i]=d,r=+r,i=+i,f()):[r,i]},e.rangeRound=function(d){return[r,i]=d,r=+r,i=+i,a=!0,f()},e.bandwidth=function(){return o},e.step=function(){return s},e.round=function(d){return arguments.length?(a=!!d,f()):a},e.padding=function(d){return arguments.length?(l=Math.min(1,c=+d),f()):l},e.paddingInner=function(d){return arguments.length?(l=Math.min(1,d),f()):l},e.paddingOuter=function(d){return arguments.length?(c=+d,f()):c},e.align=function(d){return arguments.length?(u=Math.max(0,Math.min(1,d)),f()):u},e.copy=function(){return sv(t(),[r,i]).round(a).paddingInner(l).paddingOuter(c).align(u)},Vs.apply(f(),arguments)}function EB(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return EB(t())},e}function aet(){return EB(sv.apply(null,arguments).paddingInner(1))}function cet(e){return function(){return e}}function zS(e){return+e}var Q6=[0,1];function li(e){return e}function jS(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:cet(isNaN(t)?NaN:.5)}function uet(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function fet(e,t,n){var r=e[0],i=e[1],s=t[0],o=t[1];return i<r?(r=jS(i,r),s=n(o,s)):(r=jS(r,i),s=n(s,o)),function(a){return s(r(a))}}function det(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),s=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=jS(e[o],e[o+1]),s[o]=n(t[o],t[o+1]);return function(a){var l=qb(e,a,1,r)-1;return s[l](i[l](a))}}function ly(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function ov(){var e=Q6,t=Q6,n=rd,r,i,s,o=li,a,l,c;function u(){var d=Math.min(e.length,t.length);return o!==li&&(o=uet(e[0],e[d-1])),a=d>2?det:fet,l=c=null,f}function f(d){return d==null||isNaN(d=+d)?s:(l||(l=a(e.map(r),t,n)))(r(o(d)))}return f.invert=function(d){return o(i((c||(c=a(t,e.map(r),kn)))(d)))},f.domain=function(d){return arguments.length?(e=Array.from(d,zS),u()):e.slice()},f.range=function(d){return arguments.length?(t=Array.from(d),u()):t.slice()},f.rangeRound=function(d){return t=Array.from(d),n=y3,u()},f.clamp=function(d){return arguments.length?(o=d?!0:li,u()):o!==li},f.interpolate=function(d){return arguments.length?(n=d,u()):n},f.unknown=function(d){return arguments.length?(s=d,f):s},function(d,h){return r=d,i=h,u()}}function AB(){return ov()(li,li)}function het(e,t,n,r){var i=rS(e,t,n),s;switch(r=mp(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(s=_J(i,o))&&(r.precision=s),PF(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=SJ(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=wJ(i))&&(r.precision=s-(r.type==="%")*2);break}}return id(r)}function cy(e){var t=e.domain;return e.ticks=function(n){var r=t();return Ca(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return het(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,s=r.length-1,o=r[i],a=r[s],l,c,u=10;for(a<o&&(c=o,o=a,a=c,c=i,i=s,s=c);u-- >0;){if(c=up(o,a,n),c===l)return r[i]=o,r[s]=a,t(r);if(c>0)o=Math.floor(o/c)*c,a=Math.ceil(a/c)*c;else if(c<0)o=Math.ceil(o*c)/c,a=Math.floor(a*c)/c;else break;l=c}return e},e}function av(){var e=AB();return e.copy=function(){return ly(e,av())},Vs.apply(e,arguments),cy(e)}function MB(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,zS),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return MB(e).unknown(t)},e=arguments.length?Array.from(e,zS):[0,1],cy(n)}function $B(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],s=e[r],o;return s<i&&(o=n,n=r,r=o,o=i,i=s,s=o),e[n]=t.floor(i),e[r]=t.ceil(s),e}function K6(e){return Math.log(e)}function Z6(e){return Math.exp(e)}function pet(e){return-Math.log(-e)}function yet(e){return-Math.exp(-e)}function met(e){return isFinite(e)?+("1e"+e):e<0?0:e}function get(e){return e===10?met:e===Math.E?Math.exp:t=>Math.pow(e,t)}function bet(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function J6(e){return(t,n)=>-e(-t,n)}function NB(e){const t=e(K6,Z6),n=t.domain;let r=10,i,s;function o(){return i=bet(r),s=get(r),n()[0]<0?(i=J6(i),s=J6(s),e(pet,yet)):e(K6,Z6),t}return t.base=function(a){return arguments.length?(r=+a,o()):r},t.domain=function(a){return arguments.length?(n(a),o()):n()},t.ticks=a=>{const l=n();let c=l[0],u=l[l.length-1];const f=u<c;f&&([c,u]=[u,c]);let d=i(c),h=i(u),p,g;const v=a==null?10:+a;let y=[];if(!(r%1)&&h-d<v){if(d=Math.floor(d),h=Math.ceil(h),c>0){for(;d<=h;++d)for(p=1;p<r;++p)if(g=d<0?p/s(-d):p*s(d),!(g<c)){if(g>u)break;y.push(g)}}else for(;d<=h;++d)for(p=r-1;p>=1;--p)if(g=d>0?p/s(-d):p*s(d),!(g<c)){if(g>u)break;y.push(g)}y.length*2<v&&(y=Ca(c,u,v))}else y=Ca(d,h,Math.min(h-d,v)).map(s);return f?y.reverse():y},t.tickFormat=(a,l)=>{if(a==null&&(a=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=mp(l)).precision==null&&(l.trim=!0),l=id(l)),a===1/0)return l;const c=Math.max(1,r*a/t.ticks().length);return u=>{let f=u/s(Math.round(i(u)));return f*r<r-.5&&(f*=r),f<=c?l(u):""}},t.nice=()=>n($B(n(),{floor:a=>s(Math.floor(i(a))),ceil:a=>s(Math.ceil(i(a)))})),t}function DB(){const e=NB(ov()).domain([1,10]);return e.copy=()=>ly(e,DB()).base(e.base()),Vs.apply(e,arguments),e}function t$(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function e$(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function kB(e){var t=1,n=e(t$(t),e$(t));return n.constant=function(r){return arguments.length?e(t$(t=+r),e$(t)):t},cy(n)}function OB(){var e=kB(ov());return e.copy=function(){return ly(e,OB()).constant(e.constant())},Vs.apply(e,arguments)}function n$(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function vet(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function wet(e){return e<0?-e*e:e*e}function FB(e){var t=e(li,li),n=1;function r(){return n===1?e(li,li):n===.5?e(vet,wet):e(n$(n),n$(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},cy(t)}function BB(){var e=FB(ov());return e.copy=function(){return ly(e,BB()).exponent(e.exponent())},Vs.apply(e,arguments),e}function RB(){var e=[],t=[],n=[],r;function i(){var o=0,a=Math.max(1,t.length);for(n=new Array(a-1);++o<a;)n[o-1]=EG(e,o/a);return s}function s(o){return o==null||isNaN(o=+o)?r:t[qb(n,o)]}return s.invertExtent=function(o){var a=t.indexOf(o);return a<0?[NaN,NaN]:[a>0?n[a-1]:e[0],a<n.length?n[a]:e[e.length-1]]},s.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let a of o)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(Pe),i()},s.range=function(o){return arguments.length?(t=Array.from(o),i()):t.slice()},s.unknown=function(o){return arguments.length?(r=o,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return RB().domain(e).range(t).unknown(r)},Vs.apply(s,arguments)}function LB(){var e=[.5],t=[0,1],n,r=1;function i(s){return s!=null&&s<=s?t[qb(e,s,0,r)]:n}return i.domain=function(s){return arguments.length?(e=Array.from(s),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(s){return arguments.length?(t=Array.from(s),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(s){var o=t.indexOf(s);return[e[o-1],e[o]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return LB().domain(e).range(t).unknown(n)},Vs.apply(i,arguments)}const i_=new Date,s_=new Date;function cn(e,t,n,r){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(e(s=new Date(+s)),s),i.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),i.round=s=>{const o=i(s),a=i.ceil(s);return s-o<a-s?o:a},i.offset=(s,o)=>(t(s=new Date(+s),o==null?1:Math.floor(o)),s),i.range=(s,o,a)=>{const l=[];if(s=i.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return l;let c;do l.push(c=new Date(+s)),t(s,a),e(s);while(c<s&&s<o);return l},i.filter=s=>cn(o=>{if(o>=o)for(;e(o),!s(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;t(o,-1),!s(o););else for(;--a>=0;)for(;t(o,1),!s(o););}),n&&(i.count=(s,o)=>(i_.setTime(+s),s_.setTime(+o),e(i_),e(s_),Math.floor(n(i_,s_))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?o=>r(o)%s===0:o=>i.count(0,o)%s===0):i)),i}const p1=cn(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);p1.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?cn(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):p1);p1.range;const So=1e3,ci=So*60,xo=ci*60,Lo=xo*24,$3=Lo*7,r$=Lo*30,o_=Lo*365,Ts=cn(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*So)},(e,t)=>(t-e)/So,e=>e.getUTCSeconds());Ts.range;const lv=cn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*So)},(e,t)=>{e.setTime(+e+t*ci)},(e,t)=>(t-e)/ci,e=>e.getMinutes());lv.range;const uy=cn(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*ci)},(e,t)=>(t-e)/ci,e=>e.getUTCMinutes());uy.range;const cv=cn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*So-e.getMinutes()*ci)},(e,t)=>{e.setTime(+e+t*xo)},(e,t)=>(t-e)/xo,e=>e.getHours());cv.range;const fy=cn(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*xo)},(e,t)=>(t-e)/xo,e=>e.getUTCHours());fy.range;const Dc=cn(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*ci)/Lo,e=>e.getDate()-1);Dc.range;const uv=cn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Lo,e=>e.getUTCDate()-1);uv.range;const fv=cn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Lo,e=>Math.floor(e/Lo));fv.range;function kc(e){return cn(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*ci)/$3)}const Df=kc(0),bp=kc(1),CB=kc(2),UB=kc(3),Ic=kc(4),PB=kc(5),zB=kc(6);Df.range;bp.range;CB.range;UB.range;Ic.range;PB.range;zB.range;function Oc(e){return cn(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/$3)}const kf=Oc(0),vp=Oc(1),jB=Oc(2),VB=Oc(3),Tc=Oc(4),YB=Oc(5),qB=Oc(6);kf.range;vp.range;jB.range;VB.range;Tc.range;YB.range;qB.range;const dy=cn(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());dy.range;const hy=cn(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());hy.range;const qi=cn(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());qi.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:cn(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});qi.range;const Wi=cn(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Wi.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:cn(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Wi.range;function WB(e,t,n,r,i,s){const o=[[Ts,1,So],[Ts,5,5*So],[Ts,15,15*So],[Ts,30,30*So],[s,1,ci],[s,5,5*ci],[s,15,15*ci],[s,30,30*ci],[i,1,xo],[i,3,3*xo],[i,6,6*xo],[i,12,12*xo],[r,1,Lo],[r,2,2*Lo],[n,1,$3],[t,1,r$],[t,3,3*r$],[e,1,o_]];function a(c,u,f){const d=u<c;d&&([c,u]=[u,c]);const h=f&&typeof f.range=="function"?f:l(c,u,f),p=h?h.range(c,+u+1):[];return d?p.reverse():p}function l(c,u,f){const d=Math.abs(u-c)/f,h=Yb(([,,v])=>v).right(o,d);if(h===o.length)return e.every(rS(c/o_,u/o_,f));if(h===0)return p1.every(Math.max(rS(c,u,f),1));const[p,g]=o[d/o[h-1][2]<o[h][2]/d?h-1:h];return p.every(g)}return[a,l]}const[_et,HB]=WB(Wi,hy,kf,fv,fy,uy),[xet,Iet]=WB(qi,dy,Df,Dc,cv,lv);function a_(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function l_(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Fd(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function Tet(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,s=e.days,o=e.shortDays,a=e.months,l=e.shortMonths,c=Bd(i),u=Rd(i),f=Bd(s),d=Rd(s),h=Bd(o),p=Rd(o),g=Bd(a),v=Rd(a),y=Bd(l),m=Rd(l),b={a:B,A:O,b:C,B:F,c:null,d:c$,e:c$,f:Get,g:int,G:ont,H:qet,I:Wet,j:Het,L:GB,m:Xet,M:Qet,p:P,q:z,Q:d$,s:h$,S:Ket,u:Zet,U:Jet,V:tnt,w:ent,W:nnt,x:null,X:null,y:rnt,Y:snt,Z:ant,"%":f$},w={a:H,A:X,b:tt,B:Z,c:null,d:u$,e:u$,f:fnt,g:_nt,G:xnt,H:lnt,I:cnt,j:unt,L:QB,m:dnt,M:hnt,p:Y,q:Q,Q:d$,s:h$,S:pnt,u:ynt,U:mnt,V:gnt,w:bnt,W:vnt,x:null,X:null,y:wnt,Y:Snt,Z:Int,"%":f$},S={a:I,A,b:k,B:R,c:T,d:a$,e:a$,f:zet,g:o$,G:s$,H:l$,I:l$,j:Let,L:Pet,m:Ret,M:Cet,p:N,q:Bet,Q:Vet,s:Yet,S:Uet,u:Net,U:Det,V:ket,w:$et,W:Oet,x:M,X:$,y:o$,Y:s$,Z:Fet,"%":jet};b.x=_(n,b),b.X=_(r,b),b.c=_(t,b),w.x=_(n,w),w.X=_(r,w),w.c=_(t,w);function _(V,J){return function(et){var j=[],At=-1,ot=0,Vt=V.length,Ht,st,de;for(et instanceof Date||(et=new Date(+et));++At<Vt;)V.charCodeAt(At)===37&&(j.push(V.slice(ot,At)),(st=i$[Ht=V.charAt(++At)])!=null?Ht=V.charAt(++At):st=Ht==="e"?" ":"0",(de=J[Ht])&&(Ht=de(et,st)),j.push(Ht),ot=At+1);return j.push(V.slice(ot,At)),j.join("")}}function x(V,J){return function(et){var j=Fd(1900,void 0,1),At=E(j,V,et+="",0),ot,Vt;if(At!=et.length)return null;if("Q"in j)return new Date(j.Q);if("s"in j)return new Date(j.s*1e3+("L"in j?j.L:0));if(J&&!("Z"in j)&&(j.Z=0),"p"in j&&(j.H=j.H%12+j.p*12),j.m===void 0&&(j.m="q"in j?j.q:0),"V"in j){if(j.V<1||j.V>53)return null;"w"in j||(j.w=1),"Z"in j?(ot=l_(Fd(j.y,0,1)),Vt=ot.getUTCDay(),ot=Vt>4||Vt===0?vp.ceil(ot):vp(ot),ot=uv.offset(ot,(j.V-1)*7),j.y=ot.getUTCFullYear(),j.m=ot.getUTCMonth(),j.d=ot.getUTCDate()+(j.w+6)%7):(ot=a_(Fd(j.y,0,1)),Vt=ot.getDay(),ot=Vt>4||Vt===0?bp.ceil(ot):bp(ot),ot=Dc.offset(ot,(j.V-1)*7),j.y=ot.getFullYear(),j.m=ot.getMonth(),j.d=ot.getDate()+(j.w+6)%7)}else("W"in j||"U"in j)&&("w"in j||(j.w="u"in j?j.u%7:"W"in j?1:0),Vt="Z"in j?l_(Fd(j.y,0,1)).getUTCDay():a_(Fd(j.y,0,1)).getDay(),j.m=0,j.d="W"in j?(j.w+6)%7+j.W*7-(Vt+5)%7:j.w+j.U*7-(Vt+6)%7);return"Z"in j?(j.H+=j.Z/100|0,j.M+=j.Z%100,l_(j)):a_(j)}}function E(V,J,et,j){for(var At=0,ot=J.length,Vt=et.length,Ht,st;At<ot;){if(j>=Vt)return-1;if(Ht=J.charCodeAt(At++),Ht===37){if(Ht=J.charAt(At++),st=S[Ht in i$?J.charAt(At++):Ht],!st||(j=st(V,et,j))<0)return-1}else if(Ht!=et.charCodeAt(j++))return-1}return j}function N(V,J,et){var j=c.exec(J.slice(et));return j?(V.p=u.get(j[0].toLowerCase()),et+j[0].length):-1}function I(V,J,et){var j=h.exec(J.slice(et));return j?(V.w=p.get(j[0].toLowerCase()),et+j[0].length):-1}function A(V,J,et){var j=f.exec(J.slice(et));return j?(V.w=d.get(j[0].toLowerCase()),et+j[0].length):-1}function k(V,J,et){var j=y.exec(J.slice(et));return j?(V.m=m.get(j[0].toLowerCase()),et+j[0].length):-1}function R(V,J,et){var j=g.exec(J.slice(et));return j?(V.m=v.get(j[0].toLowerCase()),et+j[0].length):-1}function T(V,J,et){return E(V,t,J,et)}function M(V,J,et){return E(V,n,J,et)}function $(V,J,et){return E(V,r,J,et)}function B(V){return o[V.getDay()]}function O(V){return s[V.getDay()]}function C(V){return l[V.getMonth()]}function F(V){return a[V.getMonth()]}function P(V){return i[+(V.getHours()>=12)]}function z(V){return 1+~~(V.getMonth()/3)}function H(V){return o[V.getUTCDay()]}function X(V){return s[V.getUTCDay()]}function tt(V){return l[V.getUTCMonth()]}function Z(V){return a[V.getUTCMonth()]}function Y(V){return i[+(V.getUTCHours()>=12)]}function Q(V){return 1+~~(V.getUTCMonth()/3)}return{format:function(V){var J=_(V+="",b);return J.toString=function(){return V},J},parse:function(V){var J=x(V+="",!1);return J.toString=function(){return V},J},utcFormat:function(V){var J=_(V+="",w);return J.toString=function(){return V},J},utcParse:function(V){var J=x(V+="",!0);return J.toString=function(){return V},J}}}var i$={"-":"",_:" ",0:"0"},vn=/^\s*\d+/,Eet=/^%/,Aet=/[\\^$*+?|[\]().{}]/g;function Kt(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(t)+i:i)}function Met(e){return e.replace(Aet,"\\$&")}function Bd(e){return new RegExp("^(?:"+e.map(Met).join("|")+")","i")}function Rd(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function $et(e,t,n){var r=vn.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function Net(e,t,n){var r=vn.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function Det(e,t,n){var r=vn.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function ket(e,t,n){var r=vn.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function Oet(e,t,n){var r=vn.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function s$(e,t,n){var r=vn.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function o$(e,t,n){var r=vn.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Fet(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Bet(e,t,n){var r=vn.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function Ret(e,t,n){var r=vn.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function a$(e,t,n){var r=vn.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function Let(e,t,n){var r=vn.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function l$(e,t,n){var r=vn.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function Cet(e,t,n){var r=vn.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function Uet(e,t,n){var r=vn.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function Pet(e,t,n){var r=vn.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function zet(e,t,n){var r=vn.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function jet(e,t,n){var r=Eet.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function Vet(e,t,n){var r=vn.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function Yet(e,t,n){var r=vn.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function c$(e,t){return Kt(e.getDate(),t,2)}function qet(e,t){return Kt(e.getHours(),t,2)}function Wet(e,t){return Kt(e.getHours()%12||12,t,2)}function Het(e,t){return Kt(1+Dc.count(qi(e),e),t,3)}function GB(e,t){return Kt(e.getMilliseconds(),t,3)}function Get(e,t){return GB(e,t)+"000"}function Xet(e,t){return Kt(e.getMonth()+1,t,2)}function Qet(e,t){return Kt(e.getMinutes(),t,2)}function Ket(e,t){return Kt(e.getSeconds(),t,2)}function Zet(e){var t=e.getDay();return t===0?7:t}function Jet(e,t){return Kt(Df.count(qi(e)-1,e),t,2)}function XB(e){var t=e.getDay();return t>=4||t===0?Ic(e):Ic.ceil(e)}function tnt(e,t){return e=XB(e),Kt(Ic.count(qi(e),e)+(qi(e).getDay()===4),t,2)}function ent(e){return e.getDay()}function nnt(e,t){return Kt(bp.count(qi(e)-1,e),t,2)}function rnt(e,t){return Kt(e.getFullYear()%100,t,2)}function int(e,t){return e=XB(e),Kt(e.getFullYear()%100,t,2)}function snt(e,t){return Kt(e.getFullYear()%1e4,t,4)}function ont(e,t){var n=e.getDay();return e=n>=4||n===0?Ic(e):Ic.ceil(e),Kt(e.getFullYear()%1e4,t,4)}function ant(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Kt(t/60|0,"0",2)+Kt(t%60,"0",2)}function u$(e,t){return Kt(e.getUTCDate(),t,2)}function lnt(e,t){return Kt(e.getUTCHours(),t,2)}function cnt(e,t){return Kt(e.getUTCHours()%12||12,t,2)}function unt(e,t){return Kt(1+uv.count(Wi(e),e),t,3)}function QB(e,t){return Kt(e.getUTCMilliseconds(),t,3)}function fnt(e,t){return QB(e,t)+"000"}function dnt(e,t){return Kt(e.getUTCMonth()+1,t,2)}function hnt(e,t){return Kt(e.getUTCMinutes(),t,2)}function pnt(e,t){return Kt(e.getUTCSeconds(),t,2)}function ynt(e){var t=e.getUTCDay();return t===0?7:t}function mnt(e,t){return Kt(kf.count(Wi(e)-1,e),t,2)}function KB(e){var t=e.getUTCDay();return t>=4||t===0?Tc(e):Tc.ceil(e)}function gnt(e,t){return e=KB(e),Kt(Tc.count(Wi(e),e)+(Wi(e).getUTCDay()===4),t,2)}function bnt(e){return e.getUTCDay()}function vnt(e,t){return Kt(vp.count(Wi(e)-1,e),t,2)}function wnt(e,t){return Kt(e.getUTCFullYear()%100,t,2)}function _nt(e,t){return e=KB(e),Kt(e.getUTCFullYear()%100,t,2)}function Snt(e,t){return Kt(e.getUTCFullYear()%1e4,t,4)}function xnt(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Tc(e):Tc.ceil(e),Kt(e.getUTCFullYear()%1e4,t,4)}function Int(){return"+0000"}function f$(){return"%"}function d$(e){return+e}function h$(e){return Math.floor(+e/1e3)}var qc,N3,py;Tnt({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Tnt(e){return qc=Tet(e),N3=qc.format,qc.parse,py=qc.utcFormat,qc.utcParse,qc}function Ent(e){return new Date(e)}function Ant(e){return e instanceof Date?+e:+new Date(+e)}function D3(e,t,n,r,i,s,o,a,l,c){var u=AB(),f=u.invert,d=u.domain,h=c(".%L"),p=c(":%S"),g=c("%I:%M"),v=c("%I %p"),y=c("%a %d"),m=c("%b %d"),b=c("%B"),w=c("%Y");function S(_){return(l(_)<_?h:a(_)<_?p:o(_)<_?g:s(_)<_?v:r(_)<_?i(_)<_?y:m:n(_)<_?b:w)(_)}return u.invert=function(_){return new Date(f(_))},u.domain=function(_){return arguments.length?d(Array.from(_,Ant)):d().map(Ent)},u.ticks=function(_){var x=d();return e(x[0],x[x.length-1],_??10)},u.tickFormat=function(_,x){return x==null?S:c(x)},u.nice=function(_){var x=d();return(!_||typeof _.range!="function")&&(_=t(x[0],x[x.length-1],_??10)),_?d($B(x,_)):u},u.copy=function(){return ly(u,D3(e,t,n,r,i,s,o,a,l,c))},u}function Mnt(){return Vs.apply(D3(xet,Iet,qi,dy,Df,Dc,cv,lv,Ts,N3).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function $nt(){return Vs.apply(D3(_et,HB,Wi,hy,kf,uv,fy,uy,Ts,py).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function dv(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function hv(){var e=0,t=.5,n=1,r=1,i,s,o,a,l,c=li,u,f=!1,d;function h(g){return isNaN(g=+g)?d:(g=.5+((g=+u(g))-s)*(r*g<r*s?a:l),c(f?Math.max(0,Math.min(1,g)):g))}h.domain=function(g){return arguments.length?([e,t,n]=g,i=u(e=+e),s=u(t=+t),o=u(n=+n),a=i===s?0:.5/(s-i),l=s===o?0:.5/(o-s),r=s<i?-1:1,h):[e,t,n]},h.clamp=function(g){return arguments.length?(f=!!g,h):f},h.interpolator=function(g){return arguments.length?(c=g,h):c};function p(g){return function(v){var y,m,b;return arguments.length?([y,m,b]=v,c=Jb(g,[y,m,b]),h):[c(0),c(.5),c(1)]}}return h.range=p(rd),h.rangeRound=p(y3),h.unknown=function(g){return arguments.length?(d=g,h):d},function(g){return u=g,i=g(e),s=g(t),o=g(n),a=i===s?0:.5/(s-i),l=s===o?0:.5/(o-s),r=s<i?-1:1,h}}function ZB(){var e=cy(hv()(li));return e.copy=function(){return dv(e,ZB())},iv.apply(e,arguments)}function JB(){var e=NB(hv()).domain([.1,1,10]);return e.copy=function(){return dv(e,JB()).base(e.base())},iv.apply(e,arguments)}function tR(){var e=kB(hv());return e.copy=function(){return dv(e,tR()).constant(e.constant())},iv.apply(e,arguments)}function eR(){var e=FB(hv());return e.copy=function(){return dv(e,eR()).exponent(e.exponent())},iv.apply(e,arguments)}function kt(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const Nnt=kt("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Dnt=kt("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),knt=kt("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),Ont=kt("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),Fnt=kt("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),Bnt=kt("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),Rnt=kt("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),Lnt=kt("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),Cnt=kt("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),Unt=kt("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),ge=e=>PQ(e[e.length-1]);var nR=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(kt);const rR=ge(nR);var iR=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(kt);const sR=ge(iR);var oR=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(kt);const aR=ge(oR);var lR=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(kt);const cR=ge(lR);var VS=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(kt);const y1=ge(VS);var uR=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(kt);const fR=ge(uR);var YS=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(kt);const m1=ge(YS);var dR=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(kt);const hR=ge(dR);var pR=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(kt);const yR=ge(pR);var mR=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(kt);const gR=ge(mR);var bR=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(kt);const vR=ge(bR);var wR=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(kt);const _R=ge(wR);var SR=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(kt);const xR=ge(SR);var IR=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(kt);const TR=ge(IR);var ER=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(kt);const AR=ge(ER);var MR=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(kt);const $R=ge(MR);var NR=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(kt);const DR=ge(NR);var kR=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(kt);const OR=ge(kR);var FR=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(kt);const BR=ge(FR);var RR=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(kt);const LR=ge(RR);var CR=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(kt);const UR=ge(CR);var PR=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(kt);const zR=ge(PR);var jR=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(kt);const VR=ge(jR);var YR=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(kt);const qR=ge(YR);var WR=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(kt);const HR=ge(WR);var GR=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(kt);const XR=ge(GR);var QR=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(kt);const KR=ge(QR);function ZR(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-e*(35.34-e*(2381.73-e*(6402.7-e*(7024.72-e*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+e*(170.73+e*(52.82-e*(131.46-e*(176.58-e*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+e*(442.36-e*(2482.43-e*(6167.24-e*(6614.94-e*2475.67)))))))+")"}const JR=m3(Cs(300,.5,0),Cs(-240,.5,1));var tL=m3(Cs(-100,.75,.35),Cs(80,1.5,.8)),eL=m3(Cs(260,.75,.35),Cs(80,1.5,.8)),I0=Cs();function nL(e){(e<0||e>1)&&(e-=Math.floor(e));var t=Math.abs(e-.5);return I0.h=360*e-100,I0.s=1.5-1.5*t,I0.l=.8-.9*t,I0+""}var T0=gi(),Pnt=Math.PI/3,znt=Math.PI*2/3;function rL(e){var t;return e=(.5-e)*Math.PI,T0.r=255*(t=Math.sin(e))*t,T0.g=255*(t=Math.sin(e+Pnt))*t,T0.b=255*(t=Math.sin(e+znt))*t,T0+""}function iL(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+e*(1172.33-e*(10793.56-e*(33300.12-e*(38394.49-e*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+e*(557.33+e*(1225.33-e*(3574.96-e*(1073.77+e*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+e*(3211.1-e*(15327.97-e*(27814-e*(22569.18-e*6838.66)))))))+")"}function pv(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}const sL=pv(kt("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var oL=pv(kt("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),aL=pv(kt("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),lL=pv(kt("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function hn(e){return function(){return e}}const cL=Math.cos,k3=Math.min,g1=Math.sin,un=Math.sqrt,p$=1e-12,b1=Math.PI,yv=2*b1;function uL(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new LF(t)}function fL(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function dL(e){this._context=e}dL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function yy(e){return new dL(e)}function hL(e){return e[0]}function pL(e){return e[1]}function yL(e,t){var n=hn(!0),r=null,i=yy,s=null,o=uL(a);e=typeof e=="function"?e:e===void 0?hL:hn(e),t=typeof t=="function"?t:t===void 0?pL:hn(t);function a(l){var c,u=(l=fL(l)).length,f,d=!1,h;for(r==null&&(s=i(h=o())),c=0;c<=u;++c)!(c<u&&n(f=l[c],c,l))===d&&((d=!d)?s.lineStart():s.lineEnd()),d&&s.point(+e(f,c,l),+t(f,c,l));if(h)return s=null,h+""||null}return a.x=function(l){return arguments.length?(e=typeof l=="function"?l:hn(+l),a):e},a.y=function(l){return arguments.length?(t=typeof l=="function"?l:hn(+l),a):t},a.defined=function(l){return arguments.length?(n=typeof l=="function"?l:hn(!!l),a):n},a.curve=function(l){return arguments.length?(i=l,r!=null&&(s=i(r)),a):i},a.context=function(l){return arguments.length?(l==null?r=s=null:s=i(r=l),a):r},a}function O3(e,t,n){var r=null,i=hn(!0),s=null,o=yy,a=null,l=uL(c);e=typeof e=="function"?e:e===void 0?hL:hn(+e),t=typeof t=="function"?t:hn(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?pL:hn(+n);function c(f){var d,h,p,g=(f=fL(f)).length,v,y=!1,m,b=new Array(g),w=new Array(g);for(s==null&&(a=o(m=l())),d=0;d<=g;++d){if(!(d<g&&i(v=f[d],d,f))===y)if(y=!y)h=d,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),p=d-1;p>=h;--p)a.point(b[p],w[p]);a.lineEnd(),a.areaEnd()}y&&(b[d]=+e(v,d,f),w[d]=+t(v,d,f),a.point(r?+r(v,d,f):b[d],n?+n(v,d,f):w[d]))}if(m)return a=null,m+""||null}function u(){return yL().defined(i).curve(o).context(s)}return c.x=function(f){return arguments.length?(e=typeof f=="function"?f:hn(+f),r=null,c):e},c.x0=function(f){return arguments.length?(e=typeof f=="function"?f:hn(+f),c):e},c.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:hn(+f),c):r},c.y=function(f){return arguments.length?(t=typeof f=="function"?f:hn(+f),n=null,c):t},c.y0=function(f){return arguments.length?(t=typeof f=="function"?f:hn(+f),c):t},c.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:hn(+f),c):n},c.lineX0=c.lineY0=function(){return u().x(e).y(t)},c.lineY1=function(){return u().x(e).y(n)},c.lineX1=function(){return u().x(r).y(t)},c.defined=function(f){return arguments.length?(i=typeof f=="function"?f:hn(!!f),c):i},c.curve=function(f){return arguments.length?(o=f,s!=null&&(a=o(s)),c):o},c.context=function(f){return arguments.length?(f==null?s=a=null:a=o(s=f),c):s},c}class mL{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function jnt(e){return new mL(e,!0)}function Vnt(e){return new mL(e,!1)}const Ynt=un(3),gL={draw(e,t){const n=un(t+k3(t/28,.75))*.59436,r=n/2,i=r*Ynt;e.moveTo(0,n),e.lineTo(0,-n),e.moveTo(-i,-r),e.lineTo(i,r),e.moveTo(-i,r),e.lineTo(i,-r)}},wp={draw(e,t){const n=un(t/b1);e.moveTo(n,0),e.arc(0,0,n,0,yv)}},bL={draw(e,t){const n=un(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},vL=un(1/3),qnt=vL*2,wL={draw(e,t){const n=un(t/qnt),r=n*vL;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},_L={draw(e,t){const n=un(t)*.62625;e.moveTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.lineTo(-n,0),e.closePath()}},SL={draw(e,t){const n=un(t-k3(t/7,2))*.87559;e.moveTo(-n,0),e.lineTo(n,0),e.moveTo(0,n),e.lineTo(0,-n)}},xL={draw(e,t){const n=un(t),r=-n/2;e.rect(r,r,n,n)}},IL={draw(e,t){const n=un(t)*.4431;e.moveTo(n,n),e.lineTo(n,-n),e.lineTo(-n,-n),e.lineTo(-n,n),e.closePath()}},Wnt=.8908130915292852,TL=g1(b1/10)/g1(7*b1/10),Hnt=g1(yv/10)*TL,Gnt=-cL(yv/10)*TL,EL={draw(e,t){const n=un(t*Wnt),r=Hnt*n,i=Gnt*n;e.moveTo(0,-n),e.lineTo(r,i);for(let s=1;s<5;++s){const o=yv*s/5,a=cL(o),l=g1(o);e.lineTo(l*n,-a*n),e.lineTo(a*r-l*i,l*r+a*i)}e.closePath()}},c_=un(3),AL={draw(e,t){const n=-un(t/(c_*3));e.moveTo(0,n*2),e.lineTo(-c_*n,-n),e.lineTo(c_*n,-n),e.closePath()}},Xnt=un(3),ML={draw(e,t){const n=un(t)*.6824,r=n/2,i=n*Xnt/2;e.moveTo(0,-n),e.lineTo(i,r),e.lineTo(-i,r),e.closePath()}},Wr=-.5,Hr=un(3)/2,qS=1/un(12),Qnt=(qS/2+1)*3,$L={draw(e,t){const n=un(t/Qnt),r=n/2,i=n*qS,s=r,o=n*qS+n,a=-s,l=o;e.moveTo(r,i),e.lineTo(s,o),e.lineTo(a,l),e.lineTo(Wr*r-Hr*i,Hr*r+Wr*i),e.lineTo(Wr*s-Hr*o,Hr*s+Wr*o),e.lineTo(Wr*a-Hr*l,Hr*a+Wr*l),e.lineTo(Wr*r+Hr*i,Wr*i-Hr*r),e.lineTo(Wr*s+Hr*o,Wr*o-Hr*s),e.lineTo(Wr*a+Hr*l,Wr*l-Hr*a),e.closePath()}},NL={draw(e,t){const n=un(t-k3(t/6,1.7))*.6189;e.moveTo(-n,-n),e.lineTo(n,n),e.moveTo(-n,n),e.lineTo(n,-n)}},Knt=[wp,bL,wL,xL,EL,AL,$L],Znt=[wp,SL,NL,ML,gL,IL,_L];function za(){}function v1(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function mv(e){this._context=e}mv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:v1(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:v1(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Jnt(e){return new mv(e)}function DL(e){this._context=e}DL.prototype={areaStart:za,areaEnd:za,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:v1(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function trt(e){return new DL(e)}function kL(e){this._context=e}kL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:v1(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function ert(e){return new kL(e)}function OL(e,t){this._basis=new mv(e),this._beta=t}OL.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],s=e[n]-r,o=t[n]-i,a=-1,l;++a<=n;)l=a/n,this._basis.point(this._beta*e[a]+(1-this._beta)*(r+l*s),this._beta*t[a]+(1-this._beta)*(i+l*o));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const nrt=function e(t){function n(r){return t===1?new mv(r):new OL(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function w1(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function F3(e,t){this._context=e,this._k=(1-t)/6}F3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:w1(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:w1(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const rrt=function e(t){function n(r){return new F3(r,t)}return n.tension=function(r){return e(+r)},n}(0);function B3(e,t){this._context=e,this._k=(1-t)/6}B3.prototype={areaStart:za,areaEnd:za,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:w1(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const irt=function e(t){function n(r){return new B3(r,t)}return n.tension=function(r){return e(+r)},n}(0);function R3(e,t){this._context=e,this._k=(1-t)/6}R3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:w1(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const srt=function e(t){function n(r){return new R3(r,t)}return n.tension=function(r){return e(+r)},n}(0);function L3(e,t,n){var r=e._x1,i=e._y1,s=e._x2,o=e._y2;if(e._l01_a>p$){var a=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,l=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*a-e._x0*e._l12_2a+e._x2*e._l01_2a)/l,i=(i*a-e._y0*e._l12_2a+e._y2*e._l01_2a)/l}if(e._l23_a>p$){var c=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,u=3*e._l23_a*(e._l23_a+e._l12_a);s=(s*c+e._x1*e._l23_2a-t*e._l12_2a)/u,o=(o*c+e._y1*e._l23_2a-n*e._l12_2a)/u}e._context.bezierCurveTo(r,i,s,o,e._x2,e._y2)}function FL(e,t){this._context=e,this._alpha=t}FL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:L3(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const ort=function e(t){function n(r){return t?new FL(r,t):new F3(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function BL(e,t){this._context=e,this._alpha=t}BL.prototype={areaStart:za,areaEnd:za,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:L3(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const art=function e(t){function n(r){return t?new BL(r,t):new B3(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function RL(e,t){this._context=e,this._alpha=t}RL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:L3(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const lrt=function e(t){function n(r){return t?new RL(r,t):new R3(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function LL(e){this._context=e}LL.prototype={areaStart:za,areaEnd:za,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function crt(e){return new LL(e)}function y$(e){return e<0?-1:1}function m$(e,t,n){var r=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(r||i<0&&-0),o=(n-e._y1)/(i||r<0&&-0),a=(s*i+o*r)/(r+i);return(y$(s)+y$(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function g$(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function u_(e,t,n){var r=e._x0,i=e._y0,s=e._x1,o=e._y1,a=(s-r)/3;e._context.bezierCurveTo(r+a,i+a*t,s-a,o-a*n,s,o)}function _1(e){this._context=e}_1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:u_(this,this._t0,g$(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,u_(this,g$(this,n=m$(this,e,t)),n);break;default:u_(this,this._t0,n=m$(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function CL(e){this._context=new UL(e)}(CL.prototype=Object.create(_1.prototype)).point=function(e,t){_1.prototype.point.call(this,t,e)};function UL(e){this._context=e}UL.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,s){this._context.bezierCurveTo(t,e,r,n,s,i)}};function urt(e){return new _1(e)}function frt(e){return new CL(e)}function PL(e){this._context=e}PL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=b$(e),i=b$(t),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function b$(e){var t,n=e.length-1,r,i=new Array(n),s=new Array(n),o=new Array(n);for(i[0]=0,s[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,s[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,s[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/s[t-1],s[t]-=r,o[t]-=r*o[t-1];for(i[n-1]=o[n-1]/s[n-1],t=n-2;t>=0;--t)i[t]=(o[t]-i[t+1])/s[t];for(s[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function drt(e){return new PL(e)}function gv(e,t){this._context=e,this._t=t}gv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function hrt(e){return new gv(e,.5)}function prt(e){return new gv(e,0)}function yrt(e){return new gv(e,1)}const E0=e=>()=>e;function mrt(e,{sourceEvent:t,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function Es(e,t,n){this.k=e,this.x=t,this.y=n}Es.prototype={constructor:Es,scale:function(e){return e===1?this:new Es(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Es(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var zL=new Es(1,0,0);Es.prototype;function f_(e){e.stopImmediatePropagation()}function Ld(e){e.preventDefault(),e.stopImmediatePropagation()}function grt(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function brt(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function v$(){return this.__zoom||zL}function vrt(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function wrt(){return navigator.maxTouchPoints||"ontouchstart"in this}function _rt(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],s=e.invertY(t[0][1])-n[0][1],o=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),o>s?(s+o)/2:Math.min(0,s)||Math.max(0,o))}function Srt(){var e=grt,t=brt,n=_rt,r=vrt,i=wrt,s=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],a=250,l=eK,c=Gb("start","zoom","end"),u,f,d,h=500,p=150,g=0,v=10;function y(T){T.property("__zoom",v$).on("wheel.zoom",E,{passive:!1}).on("mousedown.zoom",N).on("dblclick.zoom",I).filter(i).on("touchstart.zoom",A).on("touchmove.zoom",k).on("touchend.zoom touchcancel.zoom",R).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}y.transform=function(T,M,$,B){var O=T.selection?T.selection():T;O.property("__zoom",v$),T!==O?S(T,M,$,B):O.interrupt().each(function(){_(this,arguments).event(B).start().zoom(null,typeof M=="function"?M.apply(this,arguments):M).end()})},y.scaleBy=function(T,M,$,B){y.scaleTo(T,function(){var O=this.__zoom.k,C=typeof M=="function"?M.apply(this,arguments):M;return O*C},$,B)},y.scaleTo=function(T,M,$,B){y.transform(T,function(){var O=t.apply(this,arguments),C=this.__zoom,F=$==null?w(O):typeof $=="function"?$.apply(this,arguments):$,P=C.invert(F),z=typeof M=="function"?M.apply(this,arguments):M;return n(b(m(C,z),F,P),O,o)},$,B)},y.translateBy=function(T,M,$,B){y.transform(T,function(){return n(this.__zoom.translate(typeof M=="function"?M.apply(this,arguments):M,typeof $=="function"?$.apply(this,arguments):$),t.apply(this,arguments),o)},null,B)},y.translateTo=function(T,M,$,B,O){y.transform(T,function(){var C=t.apply(this,arguments),F=this.__zoom,P=B==null?w(C):typeof B=="function"?B.apply(this,arguments):B;return n(zL.translate(P[0],P[1]).scale(F.k).translate(typeof M=="function"?-M.apply(this,arguments):-M,typeof $=="function"?-$.apply(this,arguments):-$),C,o)},B,O)};function m(T,M){return M=Math.max(s[0],Math.min(s[1],M)),M===T.k?T:new Es(M,T.x,T.y)}function b(T,M,$){var B=M[0]-$[0]*T.k,O=M[1]-$[1]*T.k;return B===T.x&&O===T.y?T:new Es(T.k,B,O)}function w(T){return[(+T[0][0]+ +T[1][0])/2,(+T[0][1]+ +T[1][1])/2]}function S(T,M,$,B){T.on("start.zoom",function(){_(this,arguments).event(B).start()}).on("interrupt.zoom end.zoom",function(){_(this,arguments).event(B).end()}).tween("zoom",function(){var O=this,C=arguments,F=_(O,C).event(B),P=t.apply(O,C),z=$==null?w(P):typeof $=="function"?$.apply(O,C):$,H=Math.max(P[1][0]-P[0][0],P[1][1]-P[0][1]),X=O.__zoom,tt=typeof M=="function"?M.apply(O,C):M,Z=l(X.invert(z).concat(H/X.k),tt.invert(z).concat(H/tt.k));return function(Y){if(Y===1)Y=tt;else{var Q=Z(Y),V=H/Q[2];Y=new Es(V,z[0]-Q[0]*V,z[1]-Q[1]*V)}F.zoom(null,Y)}})}function _(T,M,$){return!$&&T.__zooming||new x(T,M)}function x(T,M){this.that=T,this.args=M,this.active=0,this.sourceEvent=null,this.extent=t.apply(T,M),this.taps=0}x.prototype={event:function(T){return T&&(this.sourceEvent=T),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(T,M){return this.mouse&&T!=="mouse"&&(this.mouse[1]=M.invert(this.mouse[0])),this.touch0&&T!=="touch"&&(this.touch0[1]=M.invert(this.touch0[0])),this.touch1&&T!=="touch"&&(this.touch1[1]=M.invert(this.touch1[0])),this.that.__zoom=M,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(T){var M=ye(this.that).datum();c.call(T,this.that,new mrt(T,{sourceEvent:this.sourceEvent,target:y,type:T,transform:this.that.__zoom,dispatch:c}),M)}};function E(T,...M){if(!e.apply(this,arguments))return;var $=_(this,M).event(T),B=this.__zoom,O=Math.max(s[0],Math.min(s[1],B.k*Math.pow(2,r.apply(this,arguments)))),C=Mi(T);if($.wheel)($.mouse[0][0]!==C[0]||$.mouse[0][1]!==C[1])&&($.mouse[1]=B.invert($.mouse[0]=C)),clearTimeout($.wheel);else{if(B.k===O)return;$.mouse=[C,B.invert(C)],Qu(this),$.start()}Ld(T),$.wheel=setTimeout(F,p),$.zoom("mouse",n(b(m(B,O),$.mouse[0],$.mouse[1]),$.extent,o));function F(){$.wheel=null,$.end()}}function N(T,...M){if(d||!e.apply(this,arguments))return;var $=T.currentTarget,B=_(this,M,!0).event(T),O=ye(T.view).on("mousemove.zoom",z,!0).on("mouseup.zoom",H,!0),C=Mi(T,$),F=T.clientX,P=T.clientY;fF(T.view),f_(T),B.mouse=[C,this.__zoom.invert(C)],Qu(this),B.start();function z(X){if(Ld(X),!B.moved){var tt=X.clientX-F,Z=X.clientY-P;B.moved=tt*tt+Z*Z>g}B.event(X).zoom("mouse",n(b(B.that.__zoom,B.mouse[0]=Mi(X,$),B.mouse[1]),B.extent,o))}function H(X){O.on("mousemove.zoom mouseup.zoom",null),dF(X.view,B.moved),Ld(X),B.event(X).end()}}function I(T,...M){if(e.apply(this,arguments)){var $=this.__zoom,B=Mi(T.changedTouches?T.changedTouches[0]:T,this),O=$.invert(B),C=$.k*(T.shiftKey?.5:2),F=n(b(m($,C),B,O),t.apply(this,M),o);Ld(T),a>0?ye(this).transition().duration(a).call(S,F,B,T):ye(this).call(y.transform,F,B,T)}}function A(T,...M){if(e.apply(this,arguments)){var $=T.touches,B=$.length,O=_(this,M,T.changedTouches.length===B).event(T),C,F,P,z;for(f_(T),F=0;F<B;++F)P=$[F],z=Mi(P,this),z=[z,this.__zoom.invert(z),P.identifier],O.touch0?!O.touch1&&O.touch0[2]!==z[2]&&(O.touch1=z,O.taps=0):(O.touch0=z,C=!0,O.taps=1+!!u);u&&(u=clearTimeout(u)),C&&(O.taps<2&&(f=z[0],u=setTimeout(function(){u=null},h)),Qu(this),O.start())}}function k(T,...M){if(this.__zooming){var $=_(this,M).event(T),B=T.changedTouches,O=B.length,C,F,P,z;for(Ld(T),C=0;C<O;++C)F=B[C],P=Mi(F,this),$.touch0&&$.touch0[2]===F.identifier?$.touch0[0]=P:$.touch1&&$.touch1[2]===F.identifier&&($.touch1[0]=P);if(F=$.that.__zoom,$.touch1){var H=$.touch0[0],X=$.touch0[1],tt=$.touch1[0],Z=$.touch1[1],Y=(Y=tt[0]-H[0])*Y+(Y=tt[1]-H[1])*Y,Q=(Q=Z[0]-X[0])*Q+(Q=Z[1]-X[1])*Q;F=m(F,Math.sqrt(Y/Q)),P=[(H[0]+tt[0])/2,(H[1]+tt[1])/2],z=[(X[0]+Z[0])/2,(X[1]+Z[1])/2]}else if($.touch0)P=$.touch0[0],z=$.touch0[1];else return;$.zoom("touch",n(b(F,P,z),$.extent,o))}}function R(T,...M){if(this.__zooming){var $=_(this,M).event(T),B=T.changedTouches,O=B.length,C,F;for(f_(T),d&&clearTimeout(d),d=setTimeout(function(){d=null},h),C=0;C<O;++C)F=B[C],$.touch0&&$.touch0[2]===F.identifier?delete $.touch0:$.touch1&&$.touch1[2]===F.identifier&&delete $.touch1;if($.touch1&&!$.touch0&&($.touch0=$.touch1,delete $.touch1),$.touch0)$.touch0[1]=this.__zoom.invert($.touch0[0]);else if($.end(),$.taps===2&&(F=Mi(F,this),Math.hypot(f[0]-F[0],f[1]-F[1])<v)){var P=ye(this).on("dblclick.zoom");P&&P.apply(this,arguments)}}}return y.wheelDelta=function(T){return arguments.length?(r=typeof T=="function"?T:E0(+T),y):r},y.filter=function(T){return arguments.length?(e=typeof T=="function"?T:E0(!!T),y):e},y.touchable=function(T){return arguments.length?(i=typeof T=="function"?T:E0(!!T),y):i},y.extent=function(T){return arguments.length?(t=typeof T=="function"?T:E0([[+T[0][0],+T[0][1]],[+T[1][0],+T[1][1]]]),y):t},y.scaleExtent=function(T){return arguments.length?(s[0]=+T[0],s[1]=+T[1],y):[s[0],s[1]]},y.translateExtent=function(T){return arguments.length?(o[0][0]=+T[0][0],o[1][0]=+T[1][0],o[0][1]=+T[0][1],o[1][1]=+T[1][1],y):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},y.constrain=function(T){return arguments.length?(n=T,y):n},y.duration=function(T){return arguments.length?(a=+T,y):a},y.interpolate=function(T){return arguments.length?(l=T,y):l},y.on=function(){var T=c.on.apply(c,arguments);return T===c?y:T},y.clickDistance=function(T){return arguments.length?(g=(T=+T)*T,y):Math.sqrt(g)},y.tapDistance=function(T){return arguments.length?(v=+T,y):v},y}function Gn(e){return e!=null&&!Number.isNaN(e)}function bi(e,t){return+Gn(t)-+Gn(e)||Pe(e,t)}function S1(e,t){return+Gn(t)-+Gn(e)||gc(e,t)}function C3(e){return e!=null&&`${e}`!=""}function x1(e){return isFinite(e)?e:NaN}function Ao(e){return e>0&&isFinite(e)?e:NaN}function bv(e){return e<0&&isFinite(e)?e:NaN}const Nu=1e3,zl=Nu*60,jl=zl*60,Co=jl*24,cs=Co*7,rc=Co*30,na=Co*365,d_=[["millisecond",1],["2 milliseconds",2],["5 milliseconds",5],["10 milliseconds",10],["20 milliseconds",20],["50 milliseconds",50],["100 milliseconds",100],["200 milliseconds",200],["500 milliseconds",500],["second",Nu],["5 seconds",5*Nu],["15 seconds",15*Nu],["30 seconds",30*Nu],["minute",zl],["5 minutes",5*zl],["15 minutes",15*zl],["30 minutes",30*zl],["hour",jl],["3 hours",3*jl],["6 hours",6*jl],["12 hours",12*jl],["day",Co],["2 days",2*Co],["week",cs],["2 weeks",2*cs],["month",rc],["3 months",3*rc],["6 months",6*rc],["year",na],["2 years",2*na],["5 years",5*na],["10 years",10*na],["20 years",20*na],["50 years",50*na],["100 years",100*na]],U3=new Map([["second",Nu],["minute",zl],["hour",jl],["day",Co],["monday",cs],["tuesday",cs],["wednesday",cs],["thursday",cs],["friday",cs],["saturday",cs],["sunday",cs],["week",cs],["month",rc],["year",na]]),jL=new Map([["second",Ts],["minute",lv],["hour",cv],["day",Dc],["monday",bp],["tuesday",CB],["wednesday",UB],["thursday",Ic],["friday",PB],["saturday",zB],["sunday",Df],["week",Df],["month",dy],["year",qi]]),VL=new Map([["second",Ts],["minute",uy],["hour",fy],["day",fv],["monday",vp],["tuesday",jB],["wednesday",VB],["thursday",Tc],["friday",YB],["saturday",qB],["sunday",kf],["week",kf],["month",hy],["year",Wi]]),my=Symbol("intervalDuration"),vv=Symbol("intervalType");for(const[e,t]of jL)t[my]=U3.get(e),t[vv]="time";for(const[e,t]of VL)t[my]=U3.get(e),t[vv]="utc";const xrt=[["year",Wi,"utc"],["year",qi,"time"],["month",hy,"utc"],["month",dy,"time"],["day",fv,"utc",6*rc],["day",Dc,"time",6*rc],["hour",fy,"utc",3*Co],["minute",uy,"utc",6*jl],["second",Ts,"utc",30*zl]];function YL(e,t,n){let r=`${e}`.toLowerCase();r.endsWith("s")&&(r=r.slice(0,-1));let i=1;const s=/^(?:(\d+)\s+)/.exec(r);switch(s&&(r=r.slice(s[0].length),i=+s[1]),r){case"quarter":r="month",i*=3;break;case"half":r="month",i*=6;break}let o=t.get(r);if(!o)throw new Error(`unknown interval: ${e}`);if(i>1){if(!o.every)throw new Error(`non-periodic interval: ${r}`);o=o.every(i),o[my]=U3.get(r)*i,o[vv]=n}return o}function qL(e){return YL(e,jL,"time")}function P3(e){return YL(e,VL,"utc")}function w$(e,t){if(!(t>1))return;const n=e[my];if(!d_.some(([,i])=>i===n)||n%Co===0&&Co<n&&n<rc)return;const[r]=d_[Yb(([,i])=>Math.log(i)).center(d_,Math.log(n*t))];return(e[vv]==="time"?qL:P3)(r)}function _$(e,t,n){const r=t==="time"?N3:py;if(n==null)return r(e==="year"?"%Y":e==="month"?"%Y-%m":e==="day"?"%Y-%m-%d":e==="hour"||e==="minute"?"%Y-%m-%dT%H:%M":e==="second"?"%Y-%m-%dT%H:%M:%S":"%Y-%m-%dT%H:%M:%S.%L");const i=Irt(n);switch(e){case"millisecond":return Wc(r(".%L"),r(":%M:%S"),i);case"second":return Wc(r(":%S"),r("%-I:%M"),i);case"minute":return Wc(r("%-I:%M"),r("%p"),i);case"hour":return Wc(r("%-I %p"),r("%b %-d"),i);case"day":return Wc(r("%-d"),r("%b"),i);case"month":return Wc(r("%b"),r("%Y"),i);case"year":return r("%Y")}throw new Error("unable to format time ticks")}function Irt(e){return e==="left"||e==="right"?(t,n)=>`
${t}
${n}`:e==="top"?(t,n)=>`${n}
${t}`:(t,n)=>`${t}
${n}`}function Trt(e,t){const n=$e($G(e,(r,i)=>Math.abs(i-r)));if(n<1e3)return _$("millisecond","utc",t);for(const[r,i,s,o]of xrt){if(n>o||r==="hour"&&!n)break;if(e.every(a=>i.floor(a)>=a))return _$(r,s,t)}}function Wc(e,t,n){return(r,i,s)=>{const o=e(r,i),a=t(r,i),l=i-Bf(s);return i!==l&&s[l]!==void 0&&a===t(s[l],l)?o:n(o,a)}}const Of=Object.getPrototypeOf(Uint8Array),Ert=Object.prototype.toString,WL=Symbol("reindex");function Ut(e,t,n){const r=typeof t;return r==="string"?S$(e,HL(t),n):r==="function"?S$(e,t,n):r==="number"||t instanceof Date||r==="boolean"?_e(e,Ur(t),n):typeof(t==null?void 0:t.transform)=="function"?x$(t.transform(e),n):Art(x$(t,n),e==null?void 0:e[WL])}function Art(e,t){return t?_v(e,t):e}function S$(e,t,n){return _e(e,(n==null?void 0:n.prototype)instanceof Of?Mrt(t):t,n)}function x$(e,t){return t===void 0?vr(e):e instanceof t?e:t.prototype instanceof Of&&!(e instanceof Of)?t.from(e,V3):t.from(e)}function Mrt(e){return(t,n)=>V3(e(t,n))}const Dh=[null],HL=e=>t=>t[e],Ir={transform:Yo},gt={transform:e=>e},z3=()=>1,$rt=()=>!0,Fn=e=>e==null?e:`${e}`,jt=e=>e==null?e:+e,gy=e=>e?e[0]:void 0,_p=e=>e?e[1]:void 0,Nrt=e=>e?e[2]:void 0,Ur=e=>()=>e;function j3(e){const t=+`${e}`.slice(1)/100;return(n,r)=>Ua(n,t,r)}function lr(e){return e instanceof Of?e:_e(e,V3,Float64Array)}function V3(e){return e==null?NaN:Number(e)}function Drt(e){return _e(e,GL)}function GL(e){return e instanceof Date&&!isNaN(e)?e:typeof e=="string"?RO(e):e==null||isNaN(e=+e)?void 0:new Date(e)}function br(e,t){return e===void 0&&(e=t),e===null?[void 0,"none"]:vy(e)?[void 0,e]:[e,void 0]}function Ke(e,t){return e===void 0&&(e=t),e===null||typeof e=="number"?[void 0,e]:[e,void 0]}function XL(e,t,n){if(e!=null)return Yr(e,t,n)}function Yr(e,t,n){const r=`${e}`.toLowerCase();if(!n.includes(r))throw new Error(`invalid ${t}: ${e}`);return r}function vr(e){return e==null||e instanceof Array||e instanceof Of?e:Array.from(e)}function _e(e,t,n=Array){return e==null?e:e instanceof n?e.map(t):n.from(e,t)}function Sp(e,t=Array){return e instanceof t?e.slice():t.from(e)}function QL({x:e,x1:t,x2:n}){return e!==void 0||t!==void 0||n!==void 0}function KL({y:e,y1:t,y2:n}){return e!==void 0||t!==void 0||n!==void 0}function wv(e){return QL(e)||KL(e)||e.interval!==void 0}function _i(e){return(e==null?void 0:e.toString)===Ert}function ic(e){return _i(e)&&(e.type!==void 0||e.domain!==void 0)}function ds(e){return _i(e)&&typeof e.transform!="function"}function ja(e){return ds(e)&&e.value===void 0&&e.channel===void 0}function ZL(e,t,n,r=gt){return t===void 0&&n===void 0?(t=0,n=e===void 0?r:e):t===void 0?t=e===void 0?0:e:n===void 0&&(n=e===void 0?0:e),[t,n]}function Ki(e,t){return e===void 0&&t===void 0?[gy,_p]:[e,t]}function ll({z:e,fill:t,stroke:n}={}){return e===void 0&&([e]=br(t)),e===void 0&&([e]=br(n)),e}function Yo(e){const t=e.length,n=new Uint32Array(t);for(let r=0;r<t;++r)n[r]=r;return n}function _v(e,t){return _e(t,n=>e[n],e.constructor)}function Y3(e){return e.length===1?(t,n)=>e(_v(n,t)):e}function sc(e,t,n){return e.subarray?e.subarray(t,n):e.slice(t,n)}function Vl(e){return e!==null&&typeof e=="object"?e.valueOf():e}function JL(e,t){if(t[e]!==void 0)return t[e];switch(e){case"x1":case"x2":e="x";break;case"y1":case"y2":e="y";break}return t[e]}function kr(e){let t;return[{transform:()=>t,label:qo(e)},n=>t=n]}function er(e){return e==null?[e]:kr(e)}function qo(e,t){return typeof e=="string"?e:e&&e.label!==void 0?e.label:t}function I1(e,t){return{transform(n){const r=e.transform(n),i=t.transform(n);return Kn(r)||Kn(i)?_e(r,(s,o)=>new Date((+r[o]+ +i[o])/2)):_e(r,(s,o)=>(+r[o]+ +i[o])/2,Float64Array)},label:e.label}}function T1(e,t){const n=tC(t==null?void 0:t.interval,t==null?void 0:t.type);return n?_e(e,n):e}function tC(e,t){const n=q3(e,t);return n&&(r=>Gn(r)?n.floor(r):r)}function q3(e,t){if(e!=null){if(typeof e=="number"){0<e&&e<1&&Number.isInteger(1/e)&&(e=-1/e);const n=Math.abs(e);return e<0?{floor:r=>Math.floor(r*n)/n,offset:r=>(r*n+1)/n,range:(r,i)=>Nr(Math.ceil(r*n),i*n).map(s=>s/n)}:{floor:r=>Math.floor(r/n)*n,offset:r=>r+n,range:(r,i)=>Nr(Math.ceil(r/n),i/n).map(s=>s*n)}}if(typeof e=="string")return(t==="time"?qL:P3)(e);if(typeof e.floor!="function")throw new Error("invalid interval; missing floor method");if(typeof e.offset!="function")throw new Error("invalid interval; missing offset method");return e}}function od(e,t){if(e=q3(e,t),e&&typeof e.range!="function")throw new Error("invalid interval: missing range method");return e}function krt(e,t){if(e=od(e,t),e&&typeof e.ceil!="function")throw new Error("invalid interval: missing ceil method");return e}function Ort(e){return Du(e)&&typeof(e==null?void 0:e.floor)=="function"&&e.floor()instanceof Date}function Du(e){return typeof(e==null?void 0:e.range)=="function"}function by(e){return e===void 0||ds(e)?e:{value:e}}function Frt(e){return e==null?null:{transform:t=>Ut(t,e,Float64Array),label:qo(e)}}function Brt(e){if(!Wo(e))return!1;for(const t of e)if(t!=null)return typeof t=="object"&&"0"in t&&"1"in t}function Wo(e){return e&&typeof e[Symbol.iterator]=="function"}function eC(e){for(const t of e)if(t!=null)return typeof t!="object"||t instanceof Date}function je(e){for(const t of e){if(t==null)continue;const n=typeof t;return n==="string"||n==="boolean"}}function Kn(e){for(const t of e)if(t!=null)return t instanceof Date}function Rrt(e){for(const t of e)if(t!=null)return typeof t=="string"&&isNaN(t)&&RO(t)}function Lrt(e){for(const t of e)if(t!=null){if(typeof t!="string")return!1;if(t.trim())return!isNaN(t)}}function ku(e){for(const t of e)if(t!=null)return typeof t=="number"}function h_(e,t){let n;for(const r of e)if(r!=null){if(!t(r))return!1;n=!0}return n}const Crt=new Set("none,currentcolor,transparent,aliceblue,antiquewhite,aqua,aquamarine,azure,beige,bisque,black,blanchedalmond,blue,blueviolet,brown,burlywood,cadetblue,chartreuse,chocolate,coral,cornflowerblue,cornsilk,crimson,cyan,darkblue,darkcyan,darkgoldenrod,darkgray,darkgreen,darkgrey,darkkhaki,darkmagenta,darkolivegreen,darkorange,darkorchid,darkred,darksalmon,darkseagreen,darkslateblue,darkslategray,darkslategrey,darkturquoise,darkviolet,deeppink,deepskyblue,dimgray,dimgrey,dodgerblue,firebrick,floralwhite,forestgreen,fuchsia,gainsboro,ghostwhite,gold,goldenrod,gray,green,greenyellow,grey,honeydew,hotpink,indianred,indigo,ivory,khaki,lavender,lavenderblush,lawngreen,lemonchiffon,lightblue,lightcoral,lightcyan,lightgoldenrodyellow,lightgray,lightgreen,lightgrey,lightpink,lightsalmon,lightseagreen,lightskyblue,lightslategray,lightslategrey,lightsteelblue,lightyellow,lime,limegreen,linen,magenta,maroon,mediumaquamarine,mediumblue,mediumorchid,mediumpurple,mediumseagreen,mediumslateblue,mediumspringgreen,mediumturquoise,mediumvioletred,midnightblue,mintcream,mistyrose,moccasin,navajowhite,navy,oldlace,olive,olivedrab,orange,orangered,orchid,palegoldenrod,palegreen,paleturquoise,palevioletred,papayawhip,peachpuff,peru,pink,plum,powderblue,purple,rebeccapurple,red,rosybrown,royalblue,saddlebrown,salmon,sandybrown,seagreen,seashell,sienna,silver,skyblue,slateblue,slategray,slategrey,snow,springgreen,steelblue,tan,teal,thistle,tomato,turquoise,violet,wheat,white,whitesmoke,yellow".split(","));function vy(e){return typeof e!="string"?!1:(e=e.toLowerCase().trim(),/^#[0-9a-f]{3,8}$/.test(e)||/^(?:url|var|rgb|rgba|hsl|hsla|hwb|lab|lch|oklab|oklch|color|color-mix)\(.*\)$/.test(e)||Crt.has(e))}function Urt(e){return typeof e=="number"&&(0<=e&&e<=1||isNaN(e))}function We(e){return e==null||Ff(e)}function Ff(e){return/^\s*none\s*$/i.test(e)}function Prt(e){return/^\s*round\s*$/i.test(e)}function nC(e,t){return XL(e,t,["middle","top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"])}function wy(e="middle"){return nC(e,"frameAnchor")}function Bf(e){if(e==null)return;const t=e[0],n=e[e.length-1];return gc(t,n)}function zrt(e={},...t){let n=e;for(const r of t)for(const i in r)if(n[i]===void 0){const s=r[i];n===e?n={...n,[i]:s}:n[i]=s}return n}function jrt(e){console.warn("named iterables are deprecated; please use an object instead");const t=new Set;return Object.fromEntries(Array.from(e,n=>{const{name:r}=n;if(r==null)throw new Error("missing name");const i=`${r}`;if(i==="__proto__")throw new Error(`illegal name: ${i}`);if(t.has(i))throw new Error(`duplicate name: ${i}`);return t.add(i),[r,n]}))}function W3(e){return Wo(e)?jrt(e):e}const As=Symbol("position"),Ho=Symbol("color"),_y=Symbol("radius"),Sy=Symbol("length"),xy=Symbol("opacity"),Sv=Symbol("symbol"),rC=Symbol("projection"),Le=new Map([["x",As],["y",As],["fx",As],["fy",As],["r",_y],["color",Ho],["opacity",xy],["symbol",Sv],["length",Sy],["projection",rC]]);function Vrt(e){return e===As||e===rC}function Yrt(e){return e===As||e===_y||e===Sy||e===xy}const iC=Math.sqrt(3),sC=2/iC,qrt={draw(e,t){const n=Math.sqrt(t/Math.PI),r=n*sC,i=r/2;e.moveTo(0,r),e.lineTo(n,i),e.lineTo(n,-i),e.lineTo(0,-r),e.lineTo(-n,-i),e.lineTo(-n,i),e.closePath()}},H3=new Map([["asterisk",gL],["circle",wp],["cross",bL],["diamond",wL],["diamond2",_L],["hexagon",qrt],["plus",SL],["square",xL],["square2",IL],["star",EL],["times",NL],["triangle",AL],["triangle2",ML],["wye",$L]]);function G3(e){return e&&typeof e.draw=="function"}function Wrt(e){return G3(e)?!0:typeof e!="string"?!1:H3.has(e.toLowerCase())}function X3(e){if(e==null||G3(e))return e;const t=H3.get(`${e}`.toLowerCase());if(t)return t;throw new Error(`invalid symbol: ${e}`)}function Hrt(e){if(e==null||G3(e))return[void 0,e];if(typeof e=="string"){const t=H3.get(`${e}`.toLowerCase());if(t)return[void 0,t]}return[e,void 0]}function Ys({filter:e,sort:t,reverse:n,transform:r,initializer:i,...s}={},o){if(r===void 0&&(e!=null&&(r=Q3(e)),t!=null&&!ja(t)&&(r=p_(r,Z3(t))),n&&(r=p_(r,K3))),o!=null&&i!=null)throw new Error("transforms cannot be applied after initializers");return{...s,...(t===null||ja(t))&&{sort:t},transform:p_(r,o)}}function wr({filter:e,sort:t,reverse:n,initializer:r,...i}={},s){return r===void 0&&(e!=null&&(r=Q3(e)),t!=null&&!ja(t)&&(r=y_(r,Z3(t))),n&&(r=y_(r,K3))),{...i,...(t===null||ja(t))&&{sort:t},initializer:y_(r,s)}}function p_(e,t){return e==null?t===null?void 0:t:t==null?e===null?void 0:e:function(n,r,i){return{data:n,facets:r}=e.call(this,n,r,i),t.call(this,vr(n),r,i)}}function y_(e,t){return e==null?t===null?void 0:t:t==null?e===null?void 0:e:function(n,r,i,...s){let o,a,l,c,u,f;return{data:a=n,facets:l=r,channels:o}=e.call(this,n,r,i,...s),{data:u=a,facets:f=l,channels:c}=t.call(this,a,l,{...i,...o},...s),{data:u,facets:f,channels:{...o,...c}}}}function xv(e,t){return(e.initializer!=null?wr:Ys)(e,t)}function Grt(e,t){return xv(t,Q3(e))}function Q3(e){return(t,n)=>{const r=Ut(t,e);return{data:t,facets:n.map(i=>i.filter(s=>r[s]))}}}function Xrt({sort:e,...t}={}){return{...xv(t,K3),sort:ja(e)?e:null}}function K3(e,t){return{data:e,facets:t.map(n=>n.slice().reverse())}}function Qrt({seed:e,sort:t,...n}={}){return{...xv(n,aC(e==null?Math.random:A3(e))),sort:ja(t)?t:null}}function oC(e,{sort:t,...n}={}){return{...(ds(e)&&e.channel!==void 0?wr:xv)(n,Z3(e)),sort:ja(t)?t:null}}function Z3(e){return(typeof e=="function"&&e.length!==1?Krt:aC)(e)}function Krt(e){return(t,n)=>{const r=(i,s)=>e(t[i],t[s]);return{data:t,facets:n.map(i=>i.slice().sort(r))}}}function aC(e){let t,n;({channel:t,value:e,order:n}={...by(e)});const r=t==null?void 0:t.startsWith("-");if(r&&(t=t.slice(1)),n===void 0&&(n=r?S1:bi),typeof n!="function")switch(`${n}`.toLowerCase()){case"ascending":n=bi;break;case"descending":n=S1;break;default:throw new Error(`invalid order: ${n}`)}return(i,s,o)=>{let a;if(t===void 0)a=Ut(i,e);else{if(o===void 0)throw new Error("channel sort requires an initializer");if(a=o[t],!a)return{};a=a.value}const l=(c,u)=>n(a[c],a[u]);return{data:i,facets:s.map(c=>c.slice().sort(l))}}}function J3(e,t){return Iv(null,null,e,t)}function xp(e={y:"count"},t={}){const{x:n=gt}=t;if(n==null)throw new Error("missing channel: x");return Iv(n,null,e,t)}function Ip(e={x:"count"},t={}){const{y:n=gt}=t;if(n==null)throw new Error("missing channel: y");return Iv(null,n,e,t)}function tT(e={fill:"count"},t={}){let{x:n,y:r}=t;if([n,r]=Ki(n,r),n==null)throw new Error("missing channel: x");if(r==null)throw new Error("missing channel: y");return Iv(n,r,e,t)}function Iv(e,t,{data:n=sT,filter:r,sort:i,reverse:s,...o}={},a={}){o=eT(o,a),n=Tv(n,gt),i=i==null?void 0:nT("sort",i,a),r=r==null?void 0:rT("filter",r,a);const[l,c]=er(e),[u,f]=er(t),{z:d,fill:h,stroke:p,x1:g,x2:v,y1:y,y2:m,...b}=a,[w,S]=er(d),[_]=br(h),[x]=br(p),[E,N]=er(_),[I,A]=er(x);return{..."z"in a&&{z:w||d},..."fill"in a&&{fill:E||h},..."stroke"in a&&{stroke:I||p},...Ys(b,(k,R,T)=>{const M=T1(Ut(k,e),T==null?void 0:T.x),$=T1(Ut(k,t),T==null?void 0:T.y),B=Ut(k,d),O=Ut(k,_),C=Ut(k,x),F=iT(o,{z:B,fill:O,stroke:C}),P=[],z=[],H=M&&c([]),X=$&&f([]),tt=B&&S([]),Z=O&&N([]),Y=C&&A([]);let Q=0;for(const V of o)V.initialize(k);i&&i.initialize(k),r&&r.initialize(k);for(const V of R){const J=[];for(const et of o)et.scope("facet",V);i&&i.scope("facet",V),r&&r.scope("facet",V);for(const[et,j]of Ku(V,F))for(const[At,ot]of Ku(j,$))for(const[Vt,Ht]of Ku(ot,M))if(!(r&&!r.reduce(Ht))){J.push(Q++),z.push(n.reduceIndex(Ht,k)),M&&H.push(Vt),$&&X.push(At),B&&tt.push(F===B?et:B[Ht[0]]),O&&Z.push(F===O?et:O[Ht[0]]),C&&Y.push(F===C?et:C[Ht[0]]);for(const st of o)st.reduce(Ht);i&&i.reduce(Ht)}P.push(J)}return lC(P,i,s),{data:z,facets:P}}),...!ba(o,"x")&&(l?{x:l}:{x1:g,x2:v}),...!ba(o,"y")&&(u?{y:u}:{y1:y,y2:m}),...Object.fromEntries(o.map(({name:k,output:R})=>[k,R]))}}function ba(e,...t){for(const{name:n}of e)if(t.includes(n))return!0;return!1}function eT(e,t,n=nT){const r=Object.entries(e);return t.title!=null&&e.title===void 0&&r.push(["title",nit]),t.href!=null&&e.href===void 0&&r.push(["href",oT]),r.filter(([,i])=>i!==void 0).map(([i,s])=>s===null?Zrt(i):n(i,s,t))}function nT(e,t,n,r=rT){let i;_i(t)&&"reduce"in t&&(i=t.scale,t=t.reduce);const s=r(e,t,n),[o,a]=kr(s.label);let l;return{name:e,output:i===void 0?o:{value:o,scale:i},initialize(c){s.initialize(c),l=a([])},scope(c,u){s.scope(c,u)},reduce(c,u){l.push(s.reduce(c,u))}}}function Zrt(e){return{name:e,initialize(){},scope(){},reduce(){}}}function rT(e,t,n,r=Tv){const i=JL(e,n),s=r(t,i);let o,a;return{label:qo(s===E1?null:i,s.label),initialize(l){o=i===void 0?l:Ut(l,i),s.scope==="data"&&(a=s.reduceIndex(Yo(l),o))},scope(l,c){s.scope===l&&(a=s.reduceIndex(c,o))},reduce(l,c){return s.scope==null?s.reduceIndex(l,o,c):s.reduceIndex(l,o,a,c)}}}function Ku(e,t){return t?lp(Vo(e,n=>t[n]),gy):[[,e]]}function Tv(e,t,n=Jrt){if(e==null)return n(e);if(typeof e.reduceIndex=="function")return e;if(typeof e.reduce=="function"&&_i(e))return tit(e);if(typeof e=="function")return eit(e);if(/^p\d{2}$/i.test(e))return no(j3(e));switch(`${e}`.toLowerCase()){case"first":return oT;case"last":return rit;case"identity":return sT;case"count":return E1;case"distinct":return iit;case"sum":return t==null?E1:sit;case"proportion":return T$(t,"data");case"proportion-facet":return T$(t,"facet");case"deviation":return no(ey);case"min":return no(bn);case"min-index":return no(TG);case"max":return no($e);case"max-index":return no(IG);case"mean":return I$(Hb);case"median":return I$(fp);case"variance":return no(r3);case"mode":return no(ZO)}return n(e)}function Jrt(e){throw new Error(`invalid reduce: ${e}`)}function iT(e,t){for(const n in t){const r=t[n];if(r!==void 0&&!e.some(i=>i.name===n))return r}}function lC(e,t,n){if(t){const r=t.output.transform(),i=(s,o)=>bi(r[s],r[o]);e.forEach(s=>s.sort(i))}n&&e.forEach(r=>r.reverse())}function tit(e){return console.warn("deprecated reduce interface; implement reduceIndex instead."),{...e,reduceIndex:e.reduce.bind(e)}}function eit(e){return{reduceIndex(t,n,r){return e(_v(n,t),r)}}}function no(e){return{reduceIndex(t,n){return e(t,r=>n[r])}}}function I$(e){return{reduceIndex(t,n){const r=e(t,i=>n[i]);return Kn(n)?new Date(r):r}}}const sT={reduceIndex(e,t){return _v(t,e)}},oT={reduceIndex(e,t){return t[e[0]]}},nit={reduceIndex(e,t){const r=lp(Hu(e,s=>s.length,s=>t[s]),_p),i=r.slice(-5).reverse();if(i.length<r.length){const s=r.slice(0,-4);i[4]=[` ${s.length.toLocaleString("en-US")} more`,Ls(s,_p)]}return i.map(([s,o])=>`${s} (${o.toLocaleString("en-US")})`).join(`
`)}},rit={reduceIndex(e,t){return t[e[e.length-1]]}},E1={label:"Frequency",reduceIndex(e){return e.length}},iit={label:"Distinct",reduceIndex(e,t){const n=new ny;for(const r of e)n.add(t[r]);return n.size}},sit=no(Ls);function T$(e,t){return e==null?{scope:t,label:"Frequency",reduceIndex:(n,r,i=1)=>n.length/i}:{scope:t,reduceIndex:(n,r,i=1)=>Ls(n,s=>r[s])/i}}function Tp(e,{scale:t,type:n,value:r,filter:i,hint:s,label:o=qo(r)},a){return s===void 0&&typeof(r==null?void 0:r.transform)=="function"&&(s=r.hint),uC(a,{scale:t,type:n,value:Ut(e,r),label:o,filter:i,hint:s})}function cC(e,t){return Object.fromEntries(Object.entries(e).map(([n,r])=>[n,Tp(t,r,n)]))}function aT(e,t){const n=Object.fromEntries(Object.entries(e).map(([r,{scale:i,value:s}])=>{const o=i==null?null:t[i];return[r,o==null?s:_e(s,o)]}));return n.channels=e,n}function uC(e,t){const{scale:n,value:r}=t;if(n===!0||n==="auto")switch(e){case"fill":case"stroke":case"color":t.scale=n!==!0&&h_(r,vy)?null:"color";break;case"fillOpacity":case"strokeOpacity":case"opacity":t.scale=n!==!0&&h_(r,Urt)?null:"opacity";break;case"symbol":n!==!0&&h_(r,Wrt)?(t.scale=null,t.value=_e(r,X3)):t.scale="symbol";break;default:t.scale=Le.has(e)?e:null;break}else if(n===!1)t.scale=null;else if(n!=null&&!Le.has(n))throw new Error(`unknown scale: ${n}`);return t}function oit(e,t,n,r,i){const{order:s,reverse:o,reduce:a=!0,limit:l}=i;for(const c in i){if(!Le.has(c))continue;let{value:u,order:f=s,reverse:d=o,reduce:h=a,limit:p=l}=by(i[c]);const g=u==null?void 0:u.startsWith("-");if(g&&(u=u.slice(1)),f=f===void 0?g!==(u==="width"||u==="height")?dC:fC:cit(f),h==null||h===!1)continue;const v=c==="fx"||c==="fy"?lit(t,r[c]):ait(n,c);if(!v)throw new Error(`missing channel for scale: ${c}`);const y=v.value,[m=0,b=1/0]=Wo(p)?p:p<0?[p]:[0,p];if(u==null)v.domain=()=>{let w=Array.from(new ny(y));return d&&(w=w.reverse()),(m!==0||b!==1/0)&&(w=w.slice(m,b)),w};else{const w=u==="data"?e:u==="height"?E$(n,"y1","y2"):u==="width"?E$(n,"x1","x2"):WS(n,u,u==="y"?"y2":u==="x"?"x2":void 0),S=Tv(h===!0?"max":h,w);v.domain=()=>{let _=vG(Yo(y),x=>S.reduceIndex(x,w),x=>y[x]);return f&&_.sort(f),d&&_.reverse(),(m!==0||b!==1/0)&&(_=_.slice(m,b)),_.map(gy)}}}}function ait(e,t){for(const n in e){const r=e[n];if(r.scale===t)return r}}function lit(e,t){const n=e.original;if(n===e)return t;const r=t.value,i=t.value=[];for(let s=0;s<n.length;++s){const o=r[n[s][0]];for(const a of e[s])i[a]=o}return t}function E$(e,t,n){const r=WS(e,t),i=WS(e,n);return _e(i,(s,o)=>Math.abs(s-r[o]),Float64Array)}function WS(e,t,n){let r=e[t];if(!r&&n!==void 0&&(r=e[n]),r)return r.value;throw new Error(`missing channel: ${t}`)}function cit(e){if(e==null||typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"ascending":return fC;case"descending":return dC}throw new Error(`invalid order: ${e}`)}function fC([e,t],[n,r]){return bi(t,r)||bi(e,n)}function dC([e,t],[n,r]){return S1(t,r)||bi(e,n)}function HS(e,t){let n=e[t];if(n){for(;n.source;)n=n.source;return n.source===null?null:n}}function lT(e){let t,n;return(...r)=>(((n==null?void 0:n.length)!==r.length||n.some((i,s)=>i!==r[s]))&&(n=r,t=e(...r)),t)}const uit=lT(e=>new Intl.NumberFormat(e)),fit=lT((e,t)=>new Intl.DateTimeFormat(e,{timeZone:"UTC",...t&&{month:t}})),dit=lT((e,t)=>new Intl.DateTimeFormat(e,{timeZone:"UTC",...t&&{weekday:t}}));function hit(e="en-US"){const t=uit(e);return n=>n!=null&&!isNaN(n)?t.format(n):void 0}function pit(e="en-US",t="short"){const n=fit(e,t);return r=>r!=null&&!isNaN(r=+new Date(Date.UTC(2e3,+r)))?n.format(r):void 0}function yit(e="en-US",t="short"){const n=dit(e,t);return r=>r!=null&&!isNaN(r=+new Date(Date.UTC(2001,0,+r)))?n.format(r):void 0}function hC(e){return BO(e,"Invalid Date")}function mit(e="en-US"){const t=hit(e);return n=>(n instanceof Date?hC:typeof n=="number"?t:Fn)(n)}const Ec=mit();let GS=0,XS;function git(){const e=GS;return GS=0,XS=void 0,e}function Mo(e){e!==XS&&(XS=e,console.warn(e),++GS)}const xn=(typeof window<"u"?window.devicePixelRatio>1:typeof it>"u")?0:.5;let bit=0;function A$(){return`plot-clip-${++bit}`}function pC(e,{title:t,href:n,ariaLabel:r,ariaDescription:i,ariaHidden:s,target:o,fill:a,fillOpacity:l,stroke:c,strokeWidth:u,strokeOpacity:f,strokeLinejoin:d,strokeLinecap:h,strokeMiterlimit:p,strokeDasharray:g,strokeDashoffset:v,opacity:y,mixBlendMode:m,imageFilter:b,paintOrder:w,pointerEvents:S,shapeRendering:_,channels:x},{ariaLabel:E,fill:N="currentColor",fillOpacity:I,stroke:A="none",strokeOpacity:k,strokeWidth:R,strokeLinecap:T,strokeLinejoin:M,strokeMiterlimit:$,paintOrder:B}){N===null&&(a=null,l=null),A===null&&(c=null,f=null),We(N)?!We(A)&&(!We(a)||x!=null&&x.fill)&&(A="none"):We(A)&&(!We(c)||x!=null&&x.stroke)&&(N="none");const[O,C]=br(a,N),[F,P]=Ke(l,I),[z,H]=br(c,A),[X,tt]=Ke(f,k),[Z,Y]=Ke(y);Ff(H)||(u===void 0&&(u=R),h===void 0&&(h=T),d===void 0&&(d=M),p===void 0&&!Prt(d)&&(p=$),!Ff(C)&&w===void 0&&(w=B));const[Q,V]=Ke(u);return N!==null&&(e.fill=Ve(C,"currentColor"),e.fillOpacity=Cd(P,1)),A!==null&&(e.stroke=Ve(H,"none"),e.strokeWidth=Cd(V,1),e.strokeOpacity=Cd(tt,1),e.strokeLinejoin=Ve(d,"miter"),e.strokeLinecap=Ve(h,"butt"),e.strokeMiterlimit=Cd(p,4),e.strokeDasharray=Ve(g,"none"),e.strokeDashoffset=Ve(v,"0")),e.target=Fn(o),e.ariaLabel=Fn(E),e.ariaDescription=Fn(i),e.ariaHidden=Fn(s),e.opacity=Cd(Y,1),e.mixBlendMode=Ve(m,"normal"),e.imageFilter=Ve(b,"none"),e.paintOrder=Ve(w,"normal"),e.pointerEvents=Ve(S,"auto"),e.shapeRendering=Ve(_,"auto"),{title:{value:t,optional:!0,filter:null},href:{value:n,optional:!0,filter:null},ariaLabel:{value:r,optional:!0,filter:null},fill:{value:O,scale:"auto",optional:!0},fillOpacity:{value:F,scale:"auto",optional:!0},stroke:{value:z,scale:"auto",optional:!0},strokeOpacity:{value:X,scale:"auto",optional:!0},strokeWidth:{value:Q,optional:!0},opacity:{value:Z,scale:"auto",optional:!0}}}function vit(e,t){t&&e.filter(n=>C3(t[n])).append("title").call(_it,t)}function wit(e,t){t&&e.filter(([n])=>C3(t[n])).append("title").call(Sit,t)}function _it(e,t){t&&e.text(n=>Ec(t[n]))}function Sit(e,t){t&&e.text(([n])=>Ec(t[n]))}function fn(e,{target:t,tip:n},{ariaLabel:r,title:i,fill:s,fillOpacity:o,stroke:a,strokeOpacity:l,strokeWidth:c,opacity:u,href:f}){r&&ut(e,"aria-label",d=>r[d]),s&&ut(e,"fill",d=>s[d]),o&&ut(e,"fill-opacity",d=>o[d]),a&&ut(e,"stroke",d=>a[d]),l&&ut(e,"stroke-opacity",d=>l[d]),c&&ut(e,"stroke-width",d=>c[d]),u&&ut(e,"opacity",d=>u[d]),f&&gC(e,d=>f[d],t),n||vit(e,i)}function A1(e,{target:t,tip:n},{ariaLabel:r,title:i,fill:s,fillOpacity:o,stroke:a,strokeOpacity:l,strokeWidth:c,opacity:u,href:f}){r&&ut(e,"aria-label",([d])=>r[d]),s&&ut(e,"fill",([d])=>s[d]),o&&ut(e,"fill-opacity",([d])=>o[d]),a&&ut(e,"stroke",([d])=>a[d]),l&&ut(e,"stroke-opacity",([d])=>l[d]),c&&ut(e,"stroke-width",([d])=>c[d]),u&&ut(e,"opacity",([d])=>u[d]),f&&gC(e,([d])=>f[d],t),n||wit(e,i)}function xit({ariaLabel:e,title:t,fill:n,fillOpacity:r,stroke:i,strokeOpacity:s,strokeWidth:o,opacity:a,href:l},{tip:c}){return[e,c?void 0:t,n,r,i,s,o,a,l].filter(u=>u!==void 0)}function cT(e,t,n){const r=Vo(e,i=>t[i]);return n===void 0&&r.size>1+e.length>>1&&Mo("Warning: the implicit z channel has high cardinality. This may occur when the fill or stroke channel is associated with quantitative data rather than ordinal or categorical data. You can suppress this warning by setting the z option explicitly; if this data represents a single series, set z to null."),r.values()}function*yC(e,t,n,r){const{z:i}=n,{z:s}=r,o=xit(r,n),a=[...t,...o];for(const l of s?cT(e,s,i):[e]){let c,u;t:for(const f of l){for(const d of a)if(!Gn(d[f])){u&&u.push(-1);continue t}if(c===void 0){u&&(yield u),c=o.map(d=>Vl(d[f])),u=[f];continue}u.push(f);for(let d=0;d<o.length;++d)if(Vl(o[d][f])!==c[d]){yield u,c=o.map(p=>Vl(p[f])),u=[f];continue t}}u&&(yield u)}}function mC(e){return e===!0?e="frame":e===!1?e=null:e!=null&&(e=Yr(e,"clip",["frame","sphere"])),e}function Iit(e,t,n,r){let i;const{clip:s=r.clip}=t;switch(s){case"frame":{const{width:o,height:a,marginLeft:l,marginRight:c,marginTop:u,marginBottom:f}=n,d=A$();i=`url(#${d})`,e=ee("svg:g",r).call(h=>h.append("svg:clipPath").attr("id",d).append("rect").attr("x",l).attr("y",u).attr("width",o-c-l).attr("height",a-u-f)).each(function(){this.appendChild(e.node()),e.node=()=>this});break}case"sphere":{const{projection:o}=r;if(!o)throw new Error('the "sphere" clip option requires a projection');const a=A$();i=`url(#${a})`,e.append("clipPath").attr("id",a).append("path").attr("d",ol(o)({type:"Sphere"}));break}}ut(e,"aria-label",t.ariaLabel),ut(e,"aria-description",t.ariaDescription),ut(e,"aria-hidden",t.ariaHidden),ut(e,"clip-path",i)}function Ne(e,t,n,r){Iit(e,t,n,r),ut(e,"fill",t.fill),ut(e,"fill-opacity",t.fillOpacity),ut(e,"stroke",t.stroke),ut(e,"stroke-width",t.strokeWidth),ut(e,"stroke-opacity",t.strokeOpacity),ut(e,"stroke-linejoin",t.strokeLinejoin),ut(e,"stroke-linecap",t.strokeLinecap),ut(e,"stroke-miterlimit",t.strokeMiterlimit),ut(e,"stroke-dasharray",t.strokeDasharray),ut(e,"stroke-dashoffset",t.strokeDashoffset),ut(e,"shape-rendering",t.shapeRendering),ut(e,"filter",t.imageFilter),ut(e,"paint-order",t.paintOrder);const{pointerEvents:i=r.pointerSticky===!1?"none":void 0}=t;ut(e,"pointer-events",i)}function Te(e,t){Tit(e,"mix-blend-mode",t.mixBlendMode),ut(e,"opacity",t.opacity)}function gC(e,t,n){e.each(function(r){const i=t(r);if(i!=null){const s=this.ownerDocument.createElementNS(vc.svg,"a");s.setAttribute("fill","inherit"),s.setAttributeNS(vc.xlink,"href",i),n!=null&&s.setAttribute("target",n),this.parentNode.insertBefore(s,this).appendChild(this)}})}function ut(e,t,n){n!=null&&e.attr(t,n)}function Tit(e,t,n){n!=null&&e.style(t,n)}function be(e,t,{x:n,y:r},i=xn,s=xn){i+=t.dx,s+=t.dy,n!=null&&n.bandwidth&&(i+=n.bandwidth()/2),r!=null&&r.bandwidth&&(s+=r.bandwidth()/2),(i||s)&&e.attr("transform",`translate(${i},${s})`)}function Ve(e,t){if((e=Fn(e))!==t)return e}function Cd(e,t){if((e=jt(e))!==t)return e}const Eit=/^-?([_a-z]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])([_a-z0-9-]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])*$/i;function uT(e){if(e===void 0)return"plot-d6a7b5";if(e=`${e}`,!Eit.test(e))throw new Error(`invalid class name: ${e}`);return e}function fT(e,t){if(typeof t=="string")e.property("style",t);else if(t!=null)for(const n of e)Object.assign(n.style,t)}function qs({frameAnchor:e},{width:t,height:n,marginTop:r,marginRight:i,marginBottom:s,marginLeft:o}){return[/left$/.test(e)?o:/right$/.test(e)?t-i:(o+t-i)/2,/^top/.test(e)?r:/^bottom/.test(e)?n-s:(r+n-s)/2]}function Ev(e={}){const{document:t=typeof window<"u"?window.document:void 0,clip:n}=e;return{document:t,clip:mC(n)}}function ee(e,{document:t}){return ye(Qb(e).call(t.documentElement))}const bC=Math.PI,Xs=2*bC,M$=.618;function Ait({projection:e,inset:t=0,insetTop:n=t,insetRight:r=t,insetBottom:i=t,insetLeft:s=t}={},o){if(e==null)return;if(typeof e.stream=="function")return e;let a,l,c="frame";if(_i(e)){let S;if({type:e,domain:l,inset:S,insetTop:n=S!==void 0?S:n,insetRight:r=S!==void 0?S:r,insetBottom:i=S!==void 0?S:i,insetLeft:s=S!==void 0?S:s,clip:c=c,...a}=e,e==null)return}typeof e!="function"&&({type:e}=vC(e));const{width:u,height:f,marginLeft:d,marginRight:h,marginTop:p,marginBottom:g}=o,v=u-d-h-s-r,y=f-p-g-n-i;if(e=e==null?void 0:e({width:v,height:y,clip:c,...a}),e==null)return;c=Mit(c,d,p,u-h,f-g);let m=d+s,b=p+n,w;if(l!=null){const[[S,_],[x,E]]=ol(e).bounds(l),N=Math.min(v/(x-S),y/(E-_));N>0?(m-=(N*(S+x)-v)/2,b-=(N*(_+E)-y)/2,w=c1({point(I,A){this.stream.point(I*N+m,A*N+b)}})):Mo("Warning: the projection could not be fit to the specified domain; using the default scale.")}return w??(w=m===0&&b===0?wC():c1({point(S,_){this.stream.point(S+m,_+b)}})),{stream:S=>e.stream(w.stream(c(S)))}}function vC(e){switch(`${e}`.toLowerCase()){case"albers-usa":return Ii(ltt,.7463,.4673);case"albers":return A0(dB,.7463,.4673);case"azimuthal-equal-area":return Ii(ctt,4,4);case"azimuthal-equidistant":return Ii(utt,Xs,Xs);case"conic-conformal":return A0(htt,Xs,Xs);case"conic-equal-area":return A0(u1,6.1702,2.9781);case"conic-equidistant":return A0(mtt,7.312,3.6282);case"equal-earth":return Ii(btt,5.4133,2.6347);case"equirectangular":return Ii(ptt,Xs,bC);case"gnomonic":return Ii(vtt,3.4641,3.4641);case"identity":return{type:wC};case"reflect-y":return{type:$it};case"mercator":return Ii(ftt,Xs,Xs);case"orthographic":return Ii(wtt,2,2);case"stereographic":return Ii(_tt,2,2);case"transverse-mercator":return Ii(Stt,Xs,Xs);default:throw new Error(`unknown projection type: ${e}`)}}function Mit(e,t,n,r,i){if(e===!1||e==null||typeof e=="number")return s=>s;switch(e===!0&&(e="frame"),`${e}`.toLowerCase()){case"frame":return QF(t,n,r,i);default:throw new Error(`unknown projection clip type: ${e}`)}}function Ii(e,t,n){return{type:({width:r,height:i,rotate:s,precision:o=.15,clip:a})=>{var c,u,f;const l=e();return o!=null&&((c=l.precision)==null||c.call(l,o)),s!=null&&((u=l.rotate)==null||u.call(l,s)),typeof a=="number"&&((f=l.clipAngle)==null||f.call(l,a)),l.scale(Math.min(r/t,i/n)),l.translate([r/2,i/2]),l},aspectRatio:n/t}}function A0(e,t,n){const{type:r,aspectRatio:i}=Ii(e,t,n);return{type:s=>{const{parallels:o,domain:a,width:l,height:c}=s,u=r(s);return o!=null&&(u.parallels(o),a===void 0&&u.fitSize([l,c],{type:"Sphere"})),u},aspectRatio:i}}const wC=Ur({stream:e=>e}),$it=Ur(c1({point(e,t){this.stream.point(e,-t)}}));function _C(e,t,n,r){const i=n[e],s=n[t],o=i.length,a=n[e]=new Float64Array(o).fill(NaN),l=n[t]=new Float64Array(o).fill(NaN);let c;const u=r.stream({point(f,d){a[c]=f,l[c]=d}});for(c=0;c<o;++c)u.point(i[c],s[c])}function Nit({projection:e}={}){return e==null?!1:typeof e.stream=="function"?!0:(_i(e)&&(e=e.type),e!=null)}function Dit(e){if(typeof(e==null?void 0:e.stream)=="function")return M$;if(_i(e)&&(e=e.type),e!=null){if(typeof e!="function"){const{aspectRatio:t}=vC(e);if(t)return t}return M$}}function Av(e,t,{projection:n}){const{x:r,y:i}=e;let s={};return r&&(s.x=r),i&&(s.y=i),s=aT(s,t),n&&(r==null?void 0:r.scale)==="x"&&(i==null?void 0:i.scale)==="y"&&_C("x","y",s,n),r&&(s.x=lr(s.x)),i&&(s.y=lr(s.y)),s}function kit(e){const t=[],n=[],r={scale:"x",value:t},i={scale:"y",value:n},s={point(o,a){t.push(o),n.push(a)},lineStart(){},lineEnd(){},polygonStart(){},polygonEnd(){},sphere(){}};for(const o of e.value)da(o,s);return[r,i]}const SC=new Map([["accent",Dnt],["category10",Nnt],["dark2",knt],["paired",Ont],["pastel1",Fnt],["pastel2",Bnt],["set1",Rnt],["set2",Lnt],["set3",Cnt],["tableau10",Unt]]);function Oit(e){return e!=null&&SC.has(`${e}`.toLowerCase())}const $$=new Map([...SC,["brbg",Qs(nR,rR)],["prgn",Qs(iR,sR)],["piyg",Qs(oR,aR)],["puor",Qs(lR,cR)],["rdbu",Qs(VS,y1)],["rdgy",Qs(uR,fR)],["rdylbu",Qs(YS,m1)],["rdylgn",Qs(dR,hR)],["spectral",Qs(pR,yR)],["burd",N$(VS,y1)],["buylrd",N$(YS,m1)],["blues",dn(PR,zR)],["greens",dn(jR,VR)],["greys",dn(YR,qR)],["oranges",dn(QR,KR)],["purples",dn(WR,HR)],["reds",dn(GR,XR)],["turbo",Ks(iL)],["viridis",Ks(sL)],["magma",Ks(oL)],["inferno",Ks(aL)],["plasma",Ks(lL)],["cividis",Ks(ZR)],["cubehelix",Ks(JR)],["warm",Ks(tL)],["cool",Ks(eL)],["bugn",dn(mR,gR)],["bupu",dn(bR,vR)],["gnbu",dn(wR,_R)],["orrd",dn(SR,xR)],["pubu",dn(ER,AR)],["pubugn",dn(IR,TR)],["purd",dn(MR,$R)],["rdpu",dn(NR,DR)],["ylgn",dn(FR,BR)],["ylgnbu",dn(kR,OR)],["ylorbr",dn(RR,LR)],["ylorrd",dn(CR,UR)],["rainbow",D$(nL)],["sinebow",D$(rL)]]);function dn(e,t){return({length:n})=>n===1?[e[3][1]]:n===2?[e[3][1],e[3][2]]:(n=Math.max(3,Math.floor(n)),n>9?Vi(t,n):e[n])}function Qs(e,t){return({length:n})=>n===2?[e[3][0],e[3][2]]:(n=Math.max(3,Math.floor(n)),n>11?Vi(t,n):e[n])}function N$(e,t){return({length:n})=>n===2?[e[3][2],e[3][0]]:(n=Math.max(3,Math.floor(n)),n>11?Vi(r=>t(1-r),n):e[n].slice().reverse())}function Ks(e){return({length:t})=>Vi(e,Math.max(2,Math.floor(t)))}function D$(e){return({length:t})=>Vi(e,Math.floor(t)+1).slice(0,-1)}function xC(e){const t=`${e}`.toLowerCase();if(!$$.has(t))throw new Error(`unknown ordinal scheme: ${t}`);return $$.get(t)}function Mv(e,t){const n=xC(e),r=typeof n=="function"?n({length:t}):n;return r.length!==t?r.slice(0,t):r}function Fit(e,t="greys"){const n=new Set,[r,i]=Mv(t,2);for(const s of e)if(s!=null)if(s===!0)n.add(i);else if(s===!1)n.add(r);else return;return[...n]}const k$=new Map([["brbg",rR],["prgn",sR],["piyg",aR],["puor",cR],["rdbu",y1],["rdgy",fR],["rdylbu",m1],["rdylgn",hR],["spectral",yR],["burd",e=>y1(1-e)],["buylrd",e=>m1(1-e)],["blues",zR],["greens",VR],["greys",qR],["purples",HR],["reds",XR],["oranges",KR],["turbo",iL],["viridis",sL],["magma",oL],["inferno",aL],["plasma",lL],["cividis",ZR],["cubehelix",JR],["warm",tL],["cool",eL],["bugn",gR],["bupu",vR],["gnbu",_R],["orrd",xR],["pubugn",TR],["pubu",AR],["purd",$R],["rdpu",DR],["ylgnbu",OR],["ylgn",BR],["ylorbr",LR],["ylorrd",UR],["rainbow",nL],["sinebow",rL]]);function dT(e){const t=`${e}`.toLowerCase();if(!k$.has(t))throw new Error(`unknown quantitative scheme: ${t}`);return k$.get(t)}const Bit=new Set(["brbg","prgn","piyg","puor","rdbu","rdgy","rdylbu","rdylgn","spectral","burd","buylrd"]);function Rit(e){return e!=null&&Bit.has(`${e}`.toLowerCase())}const IC=e=>t=>e(1-t),m_=[0,1],O$=new Map([["number",kn],["rgb",_c],["hsl",rK],["hcl",oK],["lab",iK]]);function TC(e){const t=`${e}`.toLowerCase();if(!O$.has(t))throw new Error(`unknown interpolator: ${t}`);return O$.get(t)}function Iy(e,t,n,{type:r,nice:i,clamp:s,zero:o,domain:a=AC(e,n),unknown:l,round:c,scheme:u,interval:f,range:d=Le.get(e)===_y?Hit(n,a):Le.get(e)===Sy?Git(n,a):Le.get(e)===xy?m_:void 0,interpolate:h=Le.get(e)===Ho?u==null&&d!==void 0?_c:dT(u!==void 0?u:r==="cyclical"?"rainbow":"turbo"):c?y3:kn,reverse:p}){if(f=od(f,r),(r==="cyclical"||r==="sequential")&&(r="linear"),typeof h!="function"&&(h=TC(h)),p=!!p,d!==void 0){const g=(a=vr(a)).length,v=(d=vr(d)).length;if(g!==v){if(h.length===1)throw new Error("invalid piecewise interpolator");h=Jb(h,d),d=void 0}}if(h.length===1?(p&&(h=IC(h),p=!1),d===void 0&&(d=Float64Array.from(a,(g,v)=>v/(a.length-1)),d.length===2&&(d=m_)),t.interpolate((d===m_?Ur:pT)(h))):t.interpolate(h),o){const[g,v]=yn(a);(g>0||v<0)&&(a=Sp(a),Bf(a)!==Math.sign(g)?a[a.length-1]=0:a[0]=0)}return p&&(a=Bg(a)),t.domain(a).unknown(l),i&&(t.nice(Lit(i,r)),a=t.domain()),d!==void 0&&t.range(d),s&&t.clamp(s),{type:r,domain:a,range:d,scale:t,interpolate:h,interval:f}}function Lit(e,t){return e===!0?void 0:typeof e=="number"?e:krt(e,t)}function Cit(e,t,n){return Iy(e,av(),t,n)}function Uit(e,t,n){return EC(e,t,{...n,exponent:.5})}function EC(e,t,{exponent:n=1,...r}){return Iy(e,BB().exponent(n),t,{...r,type:"pow"})}function Pit(e,t,{base:n=10,domain:r=Xit(t),...i}){return Iy(e,DB().base(n),t,{...i,domain:r})}function zit(e,t,{constant:n=1,...r}){return Iy(e,OB().constant(n),t,r)}function jit(e,t,{range:n,quantiles:r=n===void 0?5:(n=[...n]).length,n:i=r,scheme:s="rdylbu",domain:o=Qit(t),unknown:a,interpolate:l,reverse:c}){return n===void 0&&(n=l!==void 0?Vi(l,i):Le.get(e)===Ho?Mv(s,i):void 0),o.length>0&&(o=RB(o,n===void 0?{length:i}:n).quantiles()),hT(e,t,{domain:o,range:n,reverse:c,unknown:a})}function Vit(e,t,{range:n,n:r=n===void 0?5:(n=[...n]).length,scheme:i="rdylbu",domain:s=AC(e,t),unknown:o,interpolate:a,reverse:l}){const[c,u]=yn(s);let f;return n===void 0?(f=Ca(c,u,r),f[0]<=c&&f.splice(0,1),f[f.length-1]>=u&&f.pop(),r=f.length+1,n=a!==void 0?Vi(a,r):Le.get(e)===Ho?Mv(i,r):void 0):(f=Vi(kn(c,u),r+1).slice(1,-1),c instanceof Date&&(f=f.map(d=>new Date(d)))),Bf(vr(s))<0&&f.reverse(),hT(e,t,{domain:f,range:n,reverse:l,unknown:o})}function hT(e,t,{domain:n=[0],unknown:r,scheme:i="rdylbu",interpolate:s,range:o=s!==void 0?Vi(s,n.length+1):Le.get(e)===Ho?Mv(i,n.length+1):void 0,reverse:a}){n=vr(n);const l=Bf(n);if(!isNaN(l)&&!Yit(n,l))throw new Error(`the ${e} scale has a non-monotonic domain`);return a&&(o=Bg(o)),{type:"threshold",scale:LB(l<0?Bg(n):n,o===void 0?[]:o).unknown(r),domain:n,range:o}}function Yit(e,t){for(let n=1,r=e.length,i=e[0];n<r;++n){const s=gc(i,i=e[n]);if(s!==0&&s!==t)return!1}return!0}function qit(e){return{type:"identity",scale:Yrt(Le.get(e))?MB():t=>t}}function Ep(e,t=x1){return e.length?[bn(e,({value:n})=>n===void 0?n:bn(n,t)),$e(e,({value:n})=>n===void 0?n:$e(n,t))]:[0,1]}function AC(e,t){const n=Le.get(e);return(n===_y||n===xy||n===Sy?Wit:Ep)(t)}function Wit(e){return[0,e.length?$e(e,({value:t})=>t===void 0?t:$e(t,x1)):1]}function Hit(e,t){const n=e.find(({radius:o})=>o!==void 0);if(n!==void 0)return[0,n.radius];const r=Ua(e,.5,({value:o})=>o===void 0?NaN:Ua(o,.25,Ao)),i=t.map(o=>3*Math.sqrt(o/r)),s=30/$e(i);return s<1?i.map(o=>o*s):i}function Git(e,t){const n=fp(e,({value:s})=>s===void 0?NaN:fp(s,Math.abs)),r=t.map(s=>12*s/n),i=60/$e(r);return i<1?r.map(s=>s*i):r}function Xit(e){for(const{value:t}of e)if(t!==void 0)for(let n of t){if(n>0)return Ep(e,Ao);if(n<0)return Ep(e,bv)}return[1,10]}function Qit(e){const t=[];for(const{value:n}of e)if(n!==void 0)for(const r of n)t.push(r);return t}function pT(e){return(t,n)=>r=>e(t+r*(n-t))}function $v(e,t,n,r,{type:i,nice:s,clamp:o,domain:a=Ep(r),unknown:l,pivot:c=0,scheme:u,range:f,symmetric:d=!0,interpolate:h=Le.get(e)===Ho?u==null&&f!==void 0?_c:dT(u!==void 0?u:"rdbu"):kn,reverse:p}){c=+c,a=vr(a);let[g,v]=a;if(a.length>2&&Mo(`Warning: the diverging ${e} scale domain contains extra elements.`),gc(g,v)<0&&([g,v]=[v,g],p=!p),g=Math.min(g,c),v=Math.max(v,c),typeof h!="function"&&(h=TC(h)),f!==void 0&&(h=h.length===1?pT(h)(...f):Jb(h,f)),p&&(h=IC(h)),d){const y=n.apply(c),m=y-n.apply(g),b=n.apply(v)-y;m<b?g=n.invert(y-b):m>b&&(v=n.invert(y+m))}return t.domain([g,c,v]).unknown(l).interpolator(h),o&&t.clamp(o),s&&t.nice(s),{type:i,domain:[g,v],pivot:c,interpolate:h,scale:t}}function Kit(e,t,n){return $v(e,ZB(),est,t,n)}function Zit(e,t,n){return MC(e,t,{...n,exponent:.5})}function MC(e,t,{exponent:n=1,...r}){return $v(e,eR().exponent(n=+n),ist(n),t,{...r,type:"diverging-pow"})}function Jit(e,t,{base:n=10,pivot:r=1,domain:i=Ep(t,r<0?bv:Ao),...s}){return $v(e,JB().base(n=+n),nst,t,{domain:i,pivot:r,...s})}function tst(e,t,{constant:n=1,...r}){return $v(e,tR().constant(n=+n),sst(n),t,r)}const est={apply(e){return e},invert(e){return e}},nst={apply:Math.log,invert:Math.exp},rst={apply(e){return Math.sign(e)*Math.sqrt(Math.abs(e))},invert(e){return Math.sign(e)*(e*e)}};function ist(e){return e===.5?rst:{apply(t){return Math.sign(t)*Math.pow(Math.abs(t),e)},invert(t){return Math.sign(t)*Math.pow(Math.abs(t),1/e)}}}function sst(e){return{apply(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))},invert(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}}function $C(e,t,n,r){return Iy(e,t,n,r)}function ost(e,t,n){return $C(e,Mnt(),t,n)}function ast(e,t,n){return $C(e,$nt(),t,n)}const Ty=Symbol("ordinal");function NC(e,t,n,{type:r,interval:i,domain:s,range:o,reverse:a,hint:l}){return i=od(i,r),s===void 0&&(s=kC(n,i,e)),(r==="categorical"||r===Ty)&&(r="ordinal"),a&&(s=Bg(s)),s=t.domain(s).domain(),o!==void 0&&(typeof o=="function"&&(o=o(s)),t.range(o)),{type:r,domain:s,range:o,scale:t,hint:l,interval:i}}function lst(e,t,{type:n,interval:r,domain:i,range:s,scheme:o,unknown:a,...l}){r=od(r,n),i===void 0&&(i=kC(t,r,e));let c;if(Le.get(e)===Sv)c=fst(t),s=s===void 0?dst(c):_e(s,X3);else if(Le.get(e)===Ho&&(s===void 0&&(n==="ordinal"||n===Ty)&&(s=Fit(i,o),s!==void 0&&(o=void 0)),o===void 0&&s===void 0&&(o=n==="ordinal"?"turbo":"tableau10"),o!==void 0))if(s!==void 0){const u=dT(o),f=s[0],d=s[1]-s[0];s=({length:h})=>Vi(p=>u(f+d*p),h)}else s=xC(o);if(a===PS)throw new Error(`implicit unknown on ${e} scale is not supported`);return NC(e,M3().unknown(a),t,{...l,type:n,domain:i,range:s,hint:c})}function cst(e,t,{align:n=.5,padding:r=.5,...i}){return DC(aet().align(n).padding(r),t,i,e)}function ust(e,t,{align:n=.5,padding:r=.1,paddingInner:i=r,paddingOuter:s=e==="fx"||e==="fy"?0:r,...o}){return DC(sv().align(n).paddingInner(i).paddingOuter(s),t,o,e)}function DC(e,t,n,r){let{round:i}=n;return i!==void 0&&e.round(i=!!i),e=NC(r,e,t,n),e.round=i,e}function kC(e,t,n){const r=new ny;for(const{value:i,domain:s}of e){if(s!==void 0)return s();if(i!==void 0)for(const o of i)r.add(o)}if(t!==void 0){const[i,s]=yn(r).map(t.floor,t);return t.range(i,t.offset(s))}if(r.size>1e4&&Le.get(n)===As)throw new Error(`implicit ordinal domain of ${n} scale has more than 10,000 values`);return lp(r,bi)}function F$(e,t){let n;for(const{hint:r}of e){const i=r==null?void 0:r[t];if(i!==void 0){if(n===void 0)n=i;else if(n!==i)return}}return n}function fst(e){return{fill:F$(e,"fill"),stroke:F$(e,"stroke")}}function dst(e){return We(e.fill)?Znt:Knt}function QS(e,{label:t,inset:n=0,insetTop:r=n,insetRight:i=n,insetBottom:s=n,insetLeft:o=n,round:a,nice:l,clamp:c,zero:u,align:f,padding:d,projection:h,facet:{label:p=t}={},...g}={}){const v={};for(const[y,m]of e){const b=g[y],w=RC(y,m,{round:Le.get(y)===As?a:void 0,nice:l,clamp:c,zero:u,align:f,padding:d,projection:h,...b});if(w){let{label:S=y==="fx"||y==="fy"?p:t,percent:_,transform:x,inset:E,insetTop:N=E!==void 0?E:y==="y"?r:0,insetRight:I=E!==void 0?E:y==="x"?i:0,insetBottom:A=E!==void 0?E:y==="y"?s:0,insetLeft:k=E!==void 0?E:y==="x"?o:0}=b||{};if(x==null)x=void 0;else if(typeof x!="function")throw new Error("invalid scale transform; not a function");w.percent=!!_,w.label=S===void 0?pst(m,w):S,w.transform=x,y==="x"||y==="fx"?(w.insetLeft=+k,w.insetRight=+I):(y==="y"||y==="fy")&&(w.insetTop=+N,w.insetBottom=+A),v[y]=w}}return v}function B$(e){const t={},n={scales:t};for(const[r,i]of Object.entries(e)){const{scale:s,type:o,interval:a,label:l}=i;t[r]=CC(i),n[r]=s,s.type=o,a!=null&&(s.interval=a),l!=null&&(s.label=l)}return n}function hst(e,t){const{x:n,y:r,fx:i,fy:s}=e,o=i||s?yT(t):t;i&&R$(i,o),s&&L$(s,o);const a=i||s?OC(e,t):t;n&&R$(n,a),r&&L$(r,a)}function pst(e=[],t){let n;for(const{label:r}of e)if(r!==void 0){if(n===void 0)n=r;else if(n!==r)return}if(n!==void 0)return!Fc(t)&&t.percent&&(n=`${n} (%)`),{inferred:!0,toString:()=>n}}function yT(e){const{marginTop:t,marginRight:n,marginBottom:r,marginLeft:i,width:s,height:o,facet:{marginTop:a,marginRight:l,marginBottom:c,marginLeft:u}}=e;return{marginTop:Math.max(t,a),marginRight:Math.max(n,l),marginBottom:Math.max(r,c),marginLeft:Math.max(i,u),width:s,height:o}}function OC({fx:e,fy:t},n){const{marginTop:r,marginRight:i,marginBottom:s,marginLeft:o,width:a,height:l}=yT(n);return{marginTop:r,marginRight:i,marginBottom:s,marginLeft:o,width:e?e.scale.bandwidth()+o+i:a,height:t?t.scale.bandwidth()+r+s:l,facet:{width:a,height:l}}}function R$(e,t){if(e.range===void 0){const{insetLeft:n,insetRight:r}=e,{width:i,marginLeft:s=0,marginRight:o=0}=t,a=s+n,l=i-o-r;e.range=[a,Math.max(a,l)],Fc(e)||(e.range=BC(e)),e.scale.range(e.range)}FC(e)}function L$(e,t){if(e.range===void 0){const{insetTop:n,insetBottom:r}=e,{height:i,marginTop:s=0,marginBottom:o=0}=t,a=s+n,l=i-o-r;e.range=[Math.max(a,l),a],Fc(e)?e.range.reverse():e.range=BC(e),e.scale.range(e.range)}FC(e)}function FC(e){e.round===void 0&&gst(e)&&yst(e)<=30&&e.scale.round(!0)}function yst({scale:e}){const t=e.domain().length,[n,r]=e.range(),i=e.paddingInner?e.paddingInner():1,s=e.paddingOuter?e.paddingOuter():e.padding(),o=t-i,a=Math.abs(r-n)/Math.max(1,o+s*2);return(a-Math.floor(a))*o}function BC(e){const t=e.scale.domain().length+LC(e);if(!(t>2))return e.range;const[n,r]=e.range;return Array.from({length:t},(i,s)=>n+s/(t-1)*(r-n))}function KS(e,t,n){return RC(e,n===void 0?void 0:[{hint:n}],{...t})}function RC(e,t=[],n={}){const r=mst(e,t,n);if(n.type===void 0&&n.domain===void 0&&n.range===void 0&&n.interval==null&&e!=="fx"&&e!=="fy"&&Fc({type:r})){const i=t.map(({value:s})=>s).filter(s=>s!==void 0);i.some(Kn)?Mo(`Warning: some data associated with the ${e} scale are dates. Dates are typically associated with a "utc" or "time" scale rather than a "${Hc(r)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can specify the interval of the ${e} scale (e.g., d3.utcDay), or you can suppress this warning by setting the type of the ${e} scale to "${Hc(r)}".`):i.some(Rrt)?Mo(`Warning: some data associated with the ${e} scale are strings that appear to be dates (e.g., YYYY-MM-DD). If these strings represent dates, you should parse them to Date objects. Dates are typically associated with a "utc" or "time" scale rather than a "${Hc(r)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can suppress this warning by setting the type of the ${e} scale to "${Hc(r)}".`):i.some(Lrt)&&Mo(`Warning: some data associated with the ${e} scale are strings that appear to be numbers. If these strings represent numbers, you should parse or coerce them to numbers. Numbers are typically associated with a "linear" scale rather than a "${Hc(r)}" scale. If you want to treat this data as ordinal, you can specify the interval of the ${e} scale (e.g., 1 for integers), or you can suppress this warning by setting the type of the ${e} scale to "${Hc(r)}".`)}switch(n.type=r,r){case"diverging":case"diverging-sqrt":case"diverging-pow":case"diverging-log":case"diverging-symlog":case"cyclical":case"sequential":case"linear":case"sqrt":case"threshold":case"quantile":case"pow":case"log":case"symlog":n=M0(t,n,lr);break;case"identity":switch(Le.get(e)){case As:n=M0(t,n,lr);break;case Sv:n=M0(t,n,bst);break}break;case"utc":case"time":n=M0(t,n,Drt);break}switch(r){case"diverging":return Kit(e,t,n);case"diverging-sqrt":return Zit(e,t,n);case"diverging-pow":return MC(e,t,n);case"diverging-log":return Jit(e,t,n);case"diverging-symlog":return tst(e,t,n);case"categorical":case"ordinal":case Ty:return lst(e,t,n);case"cyclical":case"sequential":case"linear":return Cit(e,t,n);case"sqrt":return Uit(e,t,n);case"threshold":return hT(e,t,n);case"quantile":return jit(e,t,n);case"quantize":return Vit(e,t,n);case"pow":return EC(e,t,n);case"log":return Pit(e,t,n);case"symlog":return zit(e,t,n);case"utc":return ast(e,t,n);case"time":return ost(e,t,n);case"point":return cst(e,t,n);case"band":return ust(e,t,n);case"identity":return qit(e);case void 0:return;default:throw new Error(`unknown scale type: ${r}`)}}function Hc(e){return typeof e=="symbol"?e.description:e}const C$={toString:()=>"projection"};function mst(e,t,{type:n,domain:r,range:i,scheme:s,pivot:o,projection:a}){if(e==="fx"||e==="fy")return"band";(e==="x"||e==="y")&&a!=null&&(n=C$);for(const{type:c}of t)if(c!==void 0){if(n===void 0)n=c;else if(n!==c)throw new Error(`scale incompatible with channel: ${n} !== ${c}`)}if(n===C$)return;if(n!==void 0)return n;if(r===void 0&&!t.some(({value:c})=>c!==void 0))return;const l=Le.get(e);if(l===_y)return"sqrt";if(l===xy||l===Sy)return"linear";if(l===Sv)return"ordinal";if((r||i||[]).length>2)return g_(l);if(r!==void 0){if(je(r))return g_(l);if(Kn(r))return"utc"}else{const c=t.map(({value:u})=>u).filter(u=>u!==void 0);if(c.some(je))return g_(l);if(c.some(Kn))return"utc"}if(l===Ho){if(o!=null||Rit(s))return"diverging";if(Oit(s))return"categorical"}return"linear"}function g_(e){switch(e){case As:return"point";case Ho:return Ty;default:return"ordinal"}}function Fc({type:e}){return e==="ordinal"||e==="point"||e==="band"||e===Ty}function LC({type:e}){return e==="threshold"}function gst({type:e}){return e==="point"||e==="band"}function ui(e){if(e===void 0)return!0;const t=e.domain(),n=e(t[0]);for(let r=1,i=t.length;r<i;++r)if(e(t[r])-n)return!1;return!0}function M0(e,{domain:t,...n},r){for(const i of e)i.value!==void 0&&(i.value=r(i.value));return{domain:t===void 0?t:r(t),...n}}function bst(e){return _e(e,X3)}function Ac(e={}){let t;for(const n in e)if(Le.has(n)&&ic(e[n])){if(t!==void 0)throw new Error("ambiguous scale definition; multiple scales found");t=CC(KS(n,e[n]))}if(t===void 0)throw new Error("invalid scale definition; no scale found");return t}function vst(e){return t=>{if(!Le.has(t=`${t}`))throw new Error(`unknown scale: ${t}`);return e[t]}}function CC({scale:e,type:t,domain:n,range:r,interpolate:i,interval:s,transform:o,percent:a,pivot:l}){if(t==="identity")return{type:"identity",apply:u=>u,invert:u=>u};const c=e.unknown?e.unknown():void 0;return{type:t,domain:Sp(n),...r!==void 0&&{range:Sp(r)},...o!==void 0&&{transform:o},...a&&{percent:a},...c!==void 0&&{unknown:c},...s!==void 0&&{interval:s},...i!==void 0&&{interpolate:i},...e.clamp&&{clamp:e.clamp()},...l!==void 0&&{pivot:l,symmetric:!1},...e.base&&{base:e.base()},...e.exponent&&{exponent:e.exponent()},...e.constant&&{constant:e.constant()},...e.align&&{align:e.align(),round:e.round()},...e.padding&&(e.paddingInner?{paddingInner:e.paddingInner(),paddingOuter:e.paddingOuter()}:{padding:e.padding()}),...e.bandwidth&&{bandwidth:e.bandwidth(),step:e.step()},apply:u=>e(u),...e.invert&&{invert:u=>e.invert(u)}}}function wst(e,t,n={}){let r=.5-xn,i=.5+xn,s=.5+xn,o=.5-xn;for(const{marginTop:g,marginRight:v,marginBottom:y,marginLeft:m}of t)g>r&&(r=g),v>i&&(i=v),y>s&&(s=y),m>o&&(o=m);let{margin:a,marginTop:l=a!==void 0?a:r,marginRight:c=a!==void 0?a:i,marginBottom:u=a!==void 0?a:s,marginLeft:f=a!==void 0?a:o}=n;l=+l,c=+c,u=+u,f=+f;let{width:d=640,height:h=_st(e,n,{width:d,marginTopDefault:r,marginRightDefault:i,marginBottomDefault:s,marginLeftDefault:o})+Math.max(0,l-r+u-s)}=n;d=+d,h=+h;const p={width:d,height:h,marginTop:l,marginRight:c,marginBottom:u,marginLeft:f};if(e.fx||e.fy){let{margin:g,marginTop:v=g!==void 0?g:l,marginRight:y=g!==void 0?g:c,marginBottom:m=g!==void 0?g:u,marginLeft:b=g!==void 0?g:f}=n.facet??{};v=+v,y=+y,m=+m,b=+b,p.facet={marginTop:v,marginRight:y,marginBottom:m,marginLeft:b}}return p}function _st({x:e,y:t,fy:n,fx:r},{projection:i,aspectRatio:s},{width:o,marginTopDefault:a,marginRightDefault:l,marginBottomDefault:c,marginLeftDefault:u}){const f=n?n.scale.domain().length:1,d=Dit(i);if(d){const p=r?r.scale.domain().length:1,g=(1.1*f-.1)/(1.1*p-.1)*d,v=Math.max(.1,Math.min(10,g));return Math.round((o-u-l)*v+a+c)}const h=t?Fc(t)?t.scale.domain().length:Math.max(7,17/f):1;if(s!=null){if(s=+s,!(isFinite(s)&&s>0))throw new Error(`invalid aspectRatio: ${s}`);const p=U$("y",t)/(U$("x",e)*s),g=r?r.scale.bandwidth():1,v=n?n.scale.bandwidth():1,y=g*(o-u-l)-e.insetLeft-e.insetRight;return(p*y+t.insetTop+t.insetBottom)/v+a+c}return!!(t||n)*Math.max(1,Math.min(60,h*f))*20+!!r*30+60}function U$(e,t){if(!t)throw new Error(`aspectRatio requires ${e} scale`);const{type:n,domain:r}=t;let i;switch(n){case"linear":case"utc":case"time":i=Number;break;case"pow":{const a=t.scale.exponent();i=l=>Math.pow(l,a);break}case"log":i=Math.log;break;case"point":case"band":return r.length;default:throw new Error(`unsupported ${e} scale for aspectRatio: ${n}`)}const[s,o]=yn(r);return Math.abs(i(o)-i(s))}function Sst(e,t){const{fx:n,fy:r}=QS(e,t),i=n==null?void 0:n.scale.domain(),s=r==null?void 0:r.scale.domain();return i&&s?gG(i,s).map(([o,a],l)=>({x:o,y:a,i:l})):i?i.map((o,a)=>({x:o,i:a})):s?s.map((o,a)=>({y:o,i:a})):void 0}function xst(e,{x:t,y:n}){return t&&(t=ZS(t)),n&&(n=ZS(n)),e.filter(t&&n?r=>t.has(r.x)&&n.has(r.y):t?r=>t.has(r.x):r=>n.has(r.y)).sort(t&&n?(r,i)=>t.get(r.x)-t.get(i.x)||n.get(r.y)-n.get(i.y):t?(r,i)=>t.get(r.x)-t.get(i.x):(r,i)=>n.get(r.y)-n.get(i.y))}function mT(e,{fx:t,fy:n}){const r=Yo(e),i=t==null?void 0:t.value,s=n==null?void 0:n.value;return t&&n?Hu(r,o=>(o.fx=i[o[0]],o.fy=s[o[0]],o),o=>i[o],o=>s[o]):t?Hu(r,o=>(o.fx=i[o[0]],o),o=>i[o]):Hu(r,o=>(o.fy=s[o[0]],o),o=>s[o])}function Ist(e,t,{marginTop:n,marginLeft:r}){return e&&t?({x:i,y:s})=>`translate(${e(i)-r},${t(s)-n})`:e?({x:i})=>`translate(${e(i)-r},0)`:({y:i})=>`translate(0,${t(i)-n})`}function Tst(e){const t=[],n=new Uint32Array(Ls(e,r=>r.length));for(const r of e){let i=0;for(const s of e)r!==s&&(n.set(s,i),i+=s.length);t.push(n.slice(0,i))}return t}const Est=new Map([["top",b_],["right",__],["bottom",v_],["left",w_],["top-left",$0(b_,w_)],["top-right",$0(b_,__)],["bottom-left",$0(v_,w_)],["bottom-right",$0(v_,__)],["top-empty",$st],["right-empty",kst],["bottom-empty",Nst],["left-empty",Dst],["empty",Ost]]);function Ast(e){if(e==null)return null;const t=Est.get(`${e}`.toLowerCase());if(t)return t;throw new Error(`invalid facet anchor: ${e}`)}const P$=new WeakMap;function ZS(e){let t=P$.get(e);return t||P$.set(e,t=new bc(_e(e,(n,r)=>[n,r]))),t}function cl(e,t){return ZS(e).get(t)}function Mst(e,t,n){return t=Vl(t),n=Vl(n),e.find(r=>Object.is(Vl(r.x),t)&&Object.is(Vl(r.y),n))}function Nv(e,t,n){var r;return(r=Mst(e,t,n))==null?void 0:r.empty}function b_(e,{y:t},{y:n}){return t?cl(t,n)===0:!0}function v_(e,{y:t},{y:n}){return t?cl(t,n)===t.length-1:!0}function w_(e,{x:t},{x:n}){return t?cl(t,n)===0:!0}function __(e,{x:t},{x:n}){return t?cl(t,n)===t.length-1:!0}function $st(e,{y:t},{x:n,y:r,empty:i}){if(i)return!1;if(!t)return;const s=cl(t,r);if(s>0)return Nv(e,n,t[s-1])}function Nst(e,{y:t},{x:n,y:r,empty:i}){if(i)return!1;if(!t)return;const s=cl(t,r);if(s<t.length-1)return Nv(e,n,t[s+1])}function Dst(e,{x:t},{x:n,y:r,empty:i}){if(i)return!1;if(!t)return;const s=cl(t,n);if(s>0)return Nv(e,t[s-1],r)}function kst(e,{x:t},{x:n,y:r,empty:i}){if(i)return!1;if(!t)return;const s=cl(t,n);if(s<t.length-1)return Nv(e,t[s+1],r)}function Ost(e,t,{empty:n}){return n}function $0(e,t){return function(){return e.apply(null,arguments)&&t.apply(null,arguments)}}function S_(e,{channels:{fx:t,fy:n},groups:r}){return t&&n?e.map(({x:i,y:s})=>{var o;return((o=r.get(i))==null?void 0:o.get(s))??[]}):t?e.map(({x:i})=>r.get(i)??[]):e.map(({y:i})=>r.get(i)??[])}let ve=class{constructor(t,n={},r={},i){const{facet:s="auto",facetAnchor:o,fx:a,fy:l,sort:c,dx:u=0,dy:f=0,margin:d=0,marginTop:h=d,marginRight:p=d,marginBottom:g=d,marginLeft:v=d,clip:y=i==null?void 0:i.clip,channels:m,tip:b,render:w}=r;if(this.data=t,this.sort=ja(c)?c:null,this.initializer=wr(r).initializer,this.transform=this.initializer?r.transform:Ys(r).transform,s===null||s===!1?this.facet=null:(this.facet=Yr(s===!0?"include":s,"facet",["auto","include","exclude","super"]),this.fx=t===Dh&&typeof a=="string"?[a]:a,this.fy=t===Dh&&typeof l=="string"?[l]:l),this.facetAnchor=Ast(o),n=W3(n),m!==void 0&&(n={...Fst(m),...n}),i!==void 0&&(n={...pC(this,r,i),...n}),this.channels=Object.fromEntries(Object.entries(n).map(([S,_])=>{if(ds(_.value)){const{value:x,label:E=_.label,scale:N=_.scale}=_.value;_={..._,label:E,scale:N,value:x}}if(t===Dh&&typeof _.value=="string"){const{value:x}=_;_={..._,value:[x]}}return[S,_]}).filter(([S,{value:_,optional:x}])=>{if(_!=null)return!0;if(x)return!1;throw new Error(`missing channel value: ${S}`)})),this.dx=+u,this.dy=+f,this.marginTop=+h,this.marginRight=+p,this.marginBottom=+g,this.marginLeft=+v,this.clip=mC(y),this.tip=Bst(b),this.facet==="super"){if(a||l)throw new Error("super-faceting cannot use fx or fy");for(const S in this.channels){const{scale:_}=n[S];if(!(_!=="x"&&_!=="y"))throw new Error("super-faceting cannot use x or y")}}w!=null&&(this.render=UC(w,this.render))}initialize(t,n,r){let i=vr(this.data);t===void 0&&i!=null&&(t=[Yo(i)]);const s=t;this.transform!=null&&({facets:t,data:i}=this.transform(i,t,r),i=vr(i)),t!==void 0&&(t.original=s);const o=cC(this.channels,i);return this.sort!=null&&oit(i,t,o,n,this.sort),{data:i,facets:t,channels:o}}filter(t,n,r){for(const i in n){const{filter:s=Gn}=n[i];if(s!==null){const o=r[i];t=t.filter(a=>s(o[a]))}}return t}project(t,n,r){for(const i in t)if(t[i].scale==="x"&&/^x|x$/.test(i)){const s=i.replace(/^x|x$/,"y");s in t&&t[s].scale==="y"&&_C(i,s,n,r.projection)}}scale(t,n,r){const i=aT(t,n);return r.projection&&this.project(t,i,r),i}};function Hi(...e){return e.plot=ve.prototype.plot,e}function UC(e,t){if(e==null)return t===null?void 0:t;if(t==null)return e===null?void 0:e;if(typeof e!="function")throw new TypeError(`invalid render transform: ${e}`);if(typeof t!="function")throw new TypeError(`invalid render transform: ${t}`);return function(n,r,i,s,o,a){return e.call(this,n,r,i,s,o,(l,c,u,f,d)=>t.call(this,l,c,u,f,d,a))}}function Fst(e){return Object.fromEntries(Object.entries(W3(e)).map(([t,n])=>(n=typeof n=="string"?{value:n,label:t}:by(n),n.filter===void 0&&n.scale==null&&(n={...n,filter:null}),[t,n])))}function Bst(e){return e===!0?"xy":e===!1||e==null?null:typeof e=="string"?Yr(e,"tip",["x","y","xy"]):e}function ad(e,t){return(e==null?void 0:e.tip)===!0?{...e,tip:t}:_i(e==null?void 0:e.tip)&&e.tip.pointer===void 0?{...e,tip:{...e.tip,pointer:t}}:e}const z$=new WeakMap;function gT(e,t,{x:n,y:r,px:i,py:s,maxRadius:o=40,channels:a,render:l,...c}={}){return o=+o,i!=null&&(n??(n=null),a={...a,px:{value:i,scale:"x"}}),s!=null&&(r??(r=null),a={...a,py:{value:s,scale:"y"}}),{x:n,y:r,channels:a,...c,render:UC(function(u,f,d,h,p,g){p={...p,pointerSticky:!1};const v=p.ownerSVGElement,{data:y}=p.getMarkState(this);let m=z$.get(v);m||z$.set(v,m={sticky:!1,roots:[],renders:[]});let b=m.renders.push(H)-1;const{x:w,y:S,fx:_,fy:x}=f;let E=_?_(u.fx)-h.marginLeft:0,N=x?x(u.fy)-h.marginTop:0;w!=null&&w.bandwidth&&(E+=w.bandwidth()/2),S!=null&&S.bandwidth&&(N+=S.bandwidth()/2);const I=u.fi!=null;let A;if(I){let Y=m.facetStates;Y||(m.facetStates=Y=new Map),A=Y.get(this),A||Y.set(this,A=new Map)}const[k,R]=qs(this,h),{px:T,py:M}=d,$=T?Y=>T[Y]:PC(d,k),B=M?Y=>M[Y]:zC(d,R);let O,C,F,P;function z(Y,Q){if(I)if(P&&(P=cancelAnimationFrame(P)),Y==null)A.delete(u.fi);else{A.set(u.fi,Q),P=requestAnimationFrame(()=>{P=null;for(const[V,J]of A)if(J<Q||J===Q&&V<u.fi){Y=null;break}H(Y)});return}H(Y)}function H(Y){if(O===Y&&F===m.sticky)return;O=Y,F=p.pointerSticky=m.sticky;const Q=O==null?[]:[O];I&&(Q.fx=u.fx,Q.fy=u.fy,Q.fi=u.fi);const V=g(Q,f,d,h,p);if(C){if(I){const J=C.parentNode,et=C.getAttribute("transform"),j=V.getAttribute("transform");et?V.setAttribute("transform",et):V.removeAttribute("transform"),j?J.setAttribute("transform",j):J.removeAttribute("transform"),V.removeAttribute("aria-label"),V.removeAttribute("aria-description"),V.removeAttribute("aria-hidden")}C.replaceWith(V)}return m.roots[b]=C=V,O==null&&(A==null?void 0:A.size)>1||p.dispatchValue(O==null?null:y[O]),V}function X(Y){if(m.sticky||Y.pointerType==="mouse"&&Y.buttons===1)return;let[Q,V]=Mi(Y);Q-=E,V-=N;const J=Q<h.marginLeft||Q>h.width-h.marginRight?1:e,et=V<h.marginTop||V>h.height-h.marginBottom?1:t;let j=null,At=o*o;for(const ot of u){const Vt=J*($(ot)-Q),Ht=et*(B(ot)-V),st=Vt*Vt+Ht*Ht;st<=At&&(j=ot,At=st)}if(j!=null&&(e!==1||t!==1)){const ot=$(j)-Q,Vt=B(j)-V;At=ot*ot+Vt*Vt}z(j,At)}function tt(Y){Y.pointerType==="mouse"&&O!=null&&(m.sticky&&m.roots.some(Q=>Q==null?void 0:Q.contains(Y.target))||(m.sticky?(m.sticky=!1,m.renders.forEach(Q=>Q(null))):(m.sticky=!0,H(O)),Y.stopImmediatePropagation()))}function Z(Y){Y.pointerType==="mouse"&&(m.sticky||z(null))}return v.addEventListener("pointerenter",X),v.addEventListener("pointermove",X),v.addEventListener("pointerdown",tt),v.addEventListener("pointerleave",Z),H(null)},l)}}function bT(e){return gT(1,1,e)}function vT(e){return gT(1,.01,e)}function wT(e){return gT(.01,1,e)}function PC({x1:e,x2:t,x:n=e},r){return e&&t?i=>(e[i]+t[i])/2:n?i=>n[i]:()=>r}function zC({y1:e,y2:t,y:n=e},r){return e&&t?i=>(e[i]+t[i])/2:n?i=>n[i]:()=>r}function jC(e){return Fc(e)&&e.interval===void 0?void 0:"tabular-nums"}function Rst(e,t){let{label:n=e.label,tickSize:r=6,width:i=240,height:s=44+r,marginTop:o=18,marginRight:a=0,marginBottom:l=16+r,marginLeft:c=0,style:u,ticks:f=(i-c-a)/64,tickFormat:d,fontVariant:h=jC(e),round:p=!0,opacity:g,className:v}=t;const y=Ev(t);v=uT(v),g=Ke(g)[1],d===null&&(d=()=>null);const m=ee("svg",y).attr("class",`${v}-ramp`).attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("width",i).attr("height",s).attr("viewBox",`0 0 ${i} ${s}`).call(k=>k.append("style").text(`.${v}-ramp {
  display: block;
  background: white;
  height: auto;
  height: intrinsic;
  max-width: 100%;
  overflow: visible;
}
.${v}-ramp text {
  white-space: pre;
}`)).call(fT,u);let b=k=>k.selectAll(".tick line").attr("y1",o+l-s),w;const S=p?(k,R)=>k.rangeRound(R):(k,R)=>k.range(R),{type:_,domain:x,range:E,interpolate:N,scale:I,pivot:A}=e;if(N){const k=E===void 0?N:Jb(N.length===1?pT(N):N,E);w=S(I.copy(),Vi(kn(c,i-a),Math.min(x.length+(A!==void 0),E===void 0?1/0:E.length)));const R=256,T=y.document.createElement("canvas");T.width=R,T.height=1;const M=T.getContext("2d");for(let $=0,B=R-1;$<R;++$)M.fillStyle=k($/B),M.fillRect($,0,1,1);m.append("image").attr("opacity",g).attr("x",c).attr("y",o).attr("width",i-c-a).attr("height",s-o-l).attr("preserveAspectRatio","none").attr("xlink:href",T.toDataURL())}else if(_==="threshold"){const k=x,R=d===void 0?T=>T:typeof d=="string"?id(d):d;w=S(av().domain([-1,E.length-1]),[c,i-a]),m.append("g").attr("fill-opacity",g).selectAll().data(E).enter().append("rect").attr("x",(T,M)=>w(M-1)).attr("y",o).attr("width",(T,M)=>w(M)-w(M-1)).attr("height",s-o-l).attr("fill",T=>T),f=_e(k,(T,M)=>M),d=T=>R(k[T],T)}else w=S(sv().domain(x),[c,i-a]),m.append("g").attr("fill-opacity",g).selectAll().data(x).enter().append("rect").attr("x",w).attr("y",o).attr("width",Math.max(0,w.bandwidth()-1)).attr("height",s-o-l).attr("fill",I),b=()=>{};return m.append("g").attr("transform",`translate(0,${s-l})`).call(UG(w).ticks(Array.isArray(f)?null:f,typeof d=="string"?d:void 0).tickFormat(typeof d=="function"?d:void 0).tickSize(r).tickValues(Array.isArray(f)?f:null)).attr("font-size",null).attr("font-family",null).attr("font-variant",Ve(h,"normal")).call(b).call(k=>k.select(".domain").remove()),n!==void 0&&m.append("text").attr("x",c).attr("y",o-6).attr("fill","currentColor").attr("font-weight","bold").text(n),m.node()}const M1=Math.PI/180;function ld(e,{marker:t,markerStart:n=t,markerMid:r=t,markerEnd:i=t}={}){e.markerStart=x_(n),e.markerMid=x_(r),e.markerEnd=x_(i)}function x_(e){if(e==null||e===!1)return null;if(e===!0)return V$;if(typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"none":return null;case"arrow":return j$("auto");case"arrow-reverse":return j$("auto-start-reverse");case"dot":return Lst;case"circle":case"circle-fill":return V$;case"circle-stroke":return Cst}throw new Error(`invalid marker: ${e}`)}function j$(e){return(t,n)=>ee("svg:marker",n).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("orient",e).attr("fill","none").attr("stroke",t).attr("stroke-width",1.5).attr("stroke-linecap","round").attr("stroke-linejoin","round").call(r=>r.append("path").attr("d","M-1.5,-3l3,3l-3,3")).node()}function Lst(e,t){return ee("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",e).attr("stroke","none").call(n=>n.append("circle").attr("r",2.5)).node()}function V$(e,t){return ee("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",e).attr("stroke","white").attr("stroke-width",1.5).call(n=>n.append("circle").attr("r",3)).node()}function Cst(e,t){return ee("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill","white").attr("stroke",e).attr("stroke-width",1.5).call(n=>n.append("circle").attr("r",3)).node()}let Ust=0;function Ey(e,t,{stroke:n},r){return VC(e,t,n&&(i=>n[i]),r)}function Pst(e,t,{stroke:n},r){return VC(e,t,n&&(([i])=>n[i]),r)}function VC(e,{markerStart:t,markerMid:n,markerEnd:r,stroke:i},s=()=>i,o){const a=new Map;function l(c){return function(u){const f=s(u);let d=a.get(c);d||a.set(c,d=new Map);let h=d.get(f);if(!h){const p=this.parentNode.insertBefore(c(f,o),this),g=`plot-marker-${++Ust}`;p.setAttribute("id",g),d.set(f,h=`url(#${g})`)}return h}}t&&e.attr("marker-start",l(t)),n&&e.attr("marker-mid",l(n)),r&&e.attr("marker-end",l(r))}function Ay({inset:e,insetLeft:t,insetRight:n,...r}={}){return[t,n]=YC(e,t,n),{inset:e,insetLeft:t,insetRight:n,...r}}function My({inset:e,insetTop:t,insetBottom:n,...r}={}){return[t,n]=YC(e,t,n),{inset:e,insetTop:t,insetBottom:n,...r}}function YC(e,t,n){return e===void 0&&t===void 0&&n===void 0?xn?[1,0]:[.5,.5]:[t,n]}function qC(e,{interval:t}){return e={...by(e)},e.interval=q3(e.interval===void 0?t:e.interval),e}function Dv(e,t,n,r){const{[e]:i,[`${e}1`]:s,[`${e}2`]:o}=n,{value:a,interval:l}=qC(i,n);if(a==null||l==null&&!r)return n;const c=qo(i);if(l==null){let h;const p={transform:g=>h||(h=Ut(g,a)),label:c};return{...n,[e]:void 0,[`${e}1`]:s===void 0?p:s,[`${e}2`]:o===void 0?p:o}}let u,f;function d(h){return f!==void 0&&h===u?f:f=_e(Ut(u=h,a),p=>l.floor(p))}return t({...n,[e]:void 0,[`${e}1`]:s===void 0?{transform:d,label:c}:s,[`${e}2`]:o===void 0?{transform:h=>d(h).map(p=>l.offset(p)),label:c}:o})}function WC(e,t,n){const{[e]:r}=n,{value:i,interval:s}=qC(r,n);return i==null||s==null?n:t({...n,[e]:{label:qo(r),transform:o=>{const a=_e(Ut(o,i),c=>s.floor(c)),l=a.map(c=>s.offset(c));return a.map(Kn(a)?(c,u)=>c==null||isNaN(c=+c)||(u=l[u],u==null)||isNaN(u=+u)?void 0:new Date((c+u)/2):(c,u)=>c==null||(u=l[u],u==null)?NaN:(+c+ +u)/2)}}})}function HC(e={}){return Dv("x",Ay,e,!0)}function GC(e={}){return Dv("y",My,e,!0)}function XC(e={}){return Dv("x",Ay,e)}function QC(e={}){return Dv("y",My,e)}function KC(e={}){return WC("x",Ay,e)}function ZC(e={}){return WC("y",My,e)}const JC={ariaLabel:"rule",fill:null,stroke:"currentColor"};class t5 extends ve{constructor(t,n={}){const{x:r,y1:i,y2:s,inset:o=0,insetTop:a=o,insetBottom:l=o}=n;super(t,{x:{value:r,scale:"x",optional:!0},y1:{value:i,scale:"y",optional:!0},y2:{value:s,scale:"y",optional:!0}},ad(n,"x"),JC),this.insetTop=jt(a),this.insetBottom=jt(l),ld(this,n)}render(t,n,r,i,s){const{x:o,y:a}=n,{x:l,y1:c,y2:u}=r,{width:f,height:d,marginTop:h,marginRight:p,marginLeft:g,marginBottom:v}=i,{insetTop:y,insetBottom:m}=this;return ee("svg:g",s).call(Ne,this,i,s).call(be,this,{x:l&&o},xn,0).call(b=>b.selectAll().data(t).enter().append("line").call(Te,this).attr("x1",l?w=>l[w]:(g+f-p)/2).attr("x2",l?w=>l[w]:(g+f-p)/2).attr("y1",c&&!ui(a)?w=>c[w]+y:h+y).attr("y2",u&&!ui(a)?a.bandwidth?w=>u[w]+a.bandwidth()-m:w=>u[w]-m:d-v-m).call(fn,this,r).call(Ey,this,r,s)).node()}}class e5 extends ve{constructor(t,n={}){const{x1:r,x2:i,y:s,inset:o=0,insetRight:a=o,insetLeft:l=o}=n;super(t,{y:{value:s,scale:"y",optional:!0},x1:{value:r,scale:"x",optional:!0},x2:{value:i,scale:"x",optional:!0}},ad(n,"y"),JC),this.insetRight=jt(a),this.insetLeft=jt(l),ld(this,n)}render(t,n,r,i,s){const{x:o,y:a}=n,{y:l,x1:c,x2:u}=r,{width:f,height:d,marginTop:h,marginRight:p,marginLeft:g,marginBottom:v}=i,{insetLeft:y,insetRight:m}=this;return ee("svg:g",s).call(Ne,this,i,s).call(be,this,{y:l&&a},0,xn).call(b=>b.selectAll().data(t).enter().append("line").call(Te,this).attr("x1",c&&!ui(o)?w=>c[w]+y:g+y).attr("x2",u&&!ui(o)?o.bandwidth?w=>u[w]+o.bandwidth()-m:w=>u[w]-m:f-p-m).attr("y1",l?w=>l[w]:(h+d-v)/2).attr("y2",l?w=>l[w]:(h+d-v)/2).call(fn,this,r).call(Ey,this,r,s)).node()}}function Va(e,t){let{x:n=gt,y:r,y1:i,y2:s,...o}=QC(t);return[i,s]=n5(r,i,s),new t5(e,{...o,x:n,y1:i,y2:s})}function Ya(e,t){let{y:n=gt,x:r,x1:i,x2:s,...o}=XC(t);return[i,s]=n5(r,i,s),new e5(e,{...o,y:n,x1:i,x2:s})}function n5(e,t,n){if(e==null){if(t===void 0){if(n!==void 0)return[0,n]}else if(n===void 0)return[0,t]}else{if(t===void 0)return n===void 0?[0,e]:[e,n];if(n===void 0)return[e,t]}return[t,n]}function kv(e,...t){let n=t.length;for(let r=0,i=!0;r<n;++r)typeof t[r]!="function"&&(i&&(e=e.slice(),i=!1),e.splice(r,2,e[r]+t[r]+e[r+1]),t.splice(r,1),--r,--n);return r=>{let i=e[0];for(let s=0;s<n;++s)i+=t[s](r)+e[s+1];return i}}const zst={ariaLabel:"text",strokeLinejoin:"round",strokeWidth:3,paintOrder:"stroke"},r5="";class Ov extends ve{constructor(t,n={}){const{x:r,y:i,text:s=Wo(t)&&eC(t)?gt:Ir,frameAnchor:o,textAnchor:a=/right$/i.test(o)?"end":/left$/i.test(o)?"start":"middle",lineAnchor:l=/^top/i.test(o)?"top":/^bottom/i.test(o)?"bottom":"middle",lineHeight:c=1,lineWidth:u=1/0,textOverflow:f,monospace:d,fontFamily:h=d?"ui-monospace, monospace":void 0,fontSize:p,fontStyle:g,fontVariant:v,fontWeight:y,rotate:m}=n,[b,w]=Ke(m,0),[S,_]=qst(p);if(super(t,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},fontSize:{value:S,optional:!0},rotate:{value:Frt(b),optional:!0},text:{value:s,filter:C3,optional:!0}},n,zst),this.rotate=w,this.textAnchor=Ve(a,"middle"),this.lineAnchor=Yr(l,"lineAnchor",["top","middle","bottom"]),this.lineHeight=+c,this.lineWidth=+u,this.textOverflow=i5(f),this.monospace=!!d,this.fontFamily=Fn(h),this.fontSize=_,this.fontStyle=Fn(g),this.fontVariant=Fn(v),this.fontWeight=Fn(y),this.frameAnchor=wy(o),!(this.lineWidth>=0))throw new Error(`invalid lineWidth: ${u}`);this.splitLines=l5(this),this.clipLine=c5(this)}render(t,n,r,i,s){const{x:o,y:a}=n,{x:l,y:c,rotate:u,text:f,title:d,fontSize:h}=r,{rotate:p}=this,[g,v]=qs(this,i);return ee("svg:g",s).call(Ne,this,i,s).call(a5,this,f,i).call(be,this,{x:l&&o,y:c&&a}).call(y=>y.selectAll().data(t).enter().append("text").call(Te,this).call(jst,this,f,d).attr("transform",kv`translate(${l?m=>l[m]:g},${c?m=>c[m]:v})${u?m=>` rotate(${u[m]})`:p?` rotate(${p})`:""}`).call(ut,"font-size",h&&(m=>h[m])).call(fn,this,r)).node()}}function i5(e){return e==null?null:Yr(e,"textOverflow",["clip","ellipsis","clip-start","clip-end","ellipsis-start","ellipsis-middle","ellipsis-end"]).replace(/^(clip|ellipsis)$/,"$1-end")}function jst(e,t,n,r){if(!n)return;const{lineAnchor:i,lineHeight:s,textOverflow:o,splitLines:a,clipLine:l}=t;e.each(function(c){const u=a(Ec(n[c])??"").map(l),f=u.length,d=i==="top"?.71:i==="bottom"?1-f:(164-f*100)/200;if(f>1){let h=0;for(let p=0;p<f;++p){if(++h,!u[p])continue;const g=this.ownerDocument.createElementNS(vc.svg,"tspan");g.setAttribute("x",0),p===h-1?g.setAttribute("y",`${(d+p)*s}em`):g.setAttribute("dy",`${h*s}em`),g.textContent=u[p],this.appendChild(g),h=0}}else d&&this.setAttribute("y",`${d*s}em`),this.textContent=u[0];if(o&&!r&&u[0]!==n[c]){const h=this.ownerDocument.createElementNS(vc.svg,"title");h.textContent=n[c],this.appendChild(h)}})}function Rf(e,{x:t,y:n,...r}={}){return r.frameAnchor===void 0&&([t,n]=Ki(t,n)),new Ov(e,{...r,x:t,y:n})}function s5(e,{x:t=gt,...n}={}){return new Ov(e,ZC({...n,x:t}))}function o5(e,{y:t=gt,...n}={}){return new Ov(e,KC({...n,y:t}))}function a5(e,t,n){ut(e,"text-anchor",t.textAnchor),ut(e,"font-family",t.fontFamily),ut(e,"font-size",t.fontSize),ut(e,"font-style",t.fontStyle),ut(e,"font-variant",t.fontVariant===void 0?Vst(n):t.fontVariant),ut(e,"font-weight",t.fontWeight)}function Vst(e){return e&&(ku(e)||Kn(e))?"tabular-nums":void 0}const Yst=new Set(["inherit","initial","revert","unset","xx-small","x-small","small","medium","large","x-large","xx-large","xxx-large","larger","smaller"]);function qst(e){return e==null||typeof e=="number"?[void 0,e]:typeof e!="string"?[e,void 0]:(e=e.trim().toLowerCase(),Yst.has(e)||/^[+-]?\d*\.?\d+(e[+-]?\d+)?(\w*|%)$/.test(e)?[void 0,e]:[e,void 0])}function Wst(e,t,n){const r=[];let i,s=0;for(const[o,a,l]of Hst(e)){if(i===void 0&&(i=o),s>i&&n(e,i,a)>t&&(r.push(e.slice(i,s)+(e[s-1]===r5?"-":"")),i=o),l){r.push(e.slice(i,a)),i=void 0;continue}s=a}return r}function*Hst(e){let t=0,n=0;const r=e.length;for(;n<r;){let i=1;switch(e[n]){case r5:case"-":++n,yield[t,n,!1],t=n;break;case" ":for(yield[t,n,!1];e[++n]===" ";);t=n;break;case"\r":e[n+1]===`
`&&++i;case`
`:yield[t,n,!0],n+=i,t=n;break;default:++n;break}}yield[t,n,!0]}const Y$={a:56,b:63,c:57,d:63,e:58,f:37,g:62,h:60,i:26,j:26,k:55,l:26,m:88,n:60,o:60,p:62,q:62,r:39,s:54,t:38,u:60,v:55,w:79,x:54,y:55,z:55,A:69,B:67,C:73,D:74,E:61,F:58,G:76,H:75,I:28,J:55,K:67,L:58,M:89,N:75,O:78,P:65,Q:78,R:67,S:65,T:65,U:75,V:69,W:98,X:69,Y:67,Z:67,0:64,1:48,2:62,3:64,4:66,5:63,6:65,7:58,8:65,9:65," ":29,"!":32,'"':49,"'":31,"(":39,")":39,",":31,"-":48,".":31,"/":32,":":31,";":31,"?":52,"":31,"":31,"":47,"":47,"":82};function _T(e,t=0,n=e.length){let r=0;for(let i=t;i<n;i=cd(e,i))r+=Y$[e[i]]??(f5(e,i)?120:Y$.e);return r}function ST(e,t=0,n=e.length){let r=0;for(let i=t;i<n;i=cd(e,i))r+=f5(e,i)?200:100;return r}function l5({monospace:e,lineWidth:t,textOverflow:n}){if(n!=null||t==1/0)return s=>s.split(/\r\n?|\n/g);const r=e?ST:_T,i=t*100;return s=>Wst(s,i,r)}function c5({monospace:e,lineWidth:t,textOverflow:n}){if(n==null||t==1/0)return s=>s;const r=e?ST:_T,i=t*100;switch(n){case"clip-start":return s=>W$(s,i,r,"");case"clip-end":return s=>q$(s,i,r,"");case"ellipsis-start":return s=>W$(s,i,r,Zu);case"ellipsis-middle":return s=>Gst(s,i,r,Zu);case"ellipsis-end":return s=>q$(s,i,r,Zu)}}const Zu="";function Lf(e,t,n,r){const i=[];let s=0;for(let o=0,a=0,l=e.length;o<l;o=a){a=cd(e,o);const c=n(e,o,a);if(s+c>t){for(s+=r;s>t&&o>0;)a=o,o=i.pop(),s-=n(e,o,a);return[o,t-s]}s+=c,i.push(o)}return[-1,0]}function q$(e,t,n,r){e=e.trim();const i=n(r),[s]=Lf(e,t,n,i);return s<0?e:e.slice(0,s).trimEnd()+r}function Gst(e,t,n,r){e=e.trim();const i=n(e);if(i<=t)return e;const s=n(r)/2,[o,a]=Lf(e,t/2,n,s),[l]=Lf(e,i-t/2-a+s,n,-s);return l<0?r:e.slice(0,o).trimEnd()+r+e.slice(cd(e,l)).trimStart()}function W$(e,t,n,r){e=e.trim();const i=n(e);if(i<=t)return e;const s=n(r),[o]=Lf(e,i-t+s,n,-s);return o<0?r:r+e.slice(cd(e,o)).trimStart()}const JS=/[\p{Combining_Mark}\p{Emoji_Modifier}]+/uy,H$=new RegExp("\\p{Extended_Pictographic}","uy");function cd(e,t){return t+=Xst(e,t)?2:1,Kst(e,t)&&(t=JS.lastIndex),Qst(e,t)?cd(e,t+1):t}function u5(e,t){return e.charCodeAt(t)<128}function Xst(e,t){const n=e.charCodeAt(t);if(n>=55296&&n<56320){const r=e.charCodeAt(t+1);return r>=56320&&r<57344}return!1}function Qst(e,t){return e.charCodeAt(t)===8205}function Kst(e,t){return u5(e,t)?!1:(JS.lastIndex=t,JS.test(e))}function f5(e,t){return u5(e,t)?!1:(H$.lastIndex=t,H$.test(e))}const d5={ariaLabel:"vector",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinejoin:"round",strokeLinecap:"round"},h5=3.5,Zst=h5*5,p5={draw(e,t,n){const r=t*n/Zst;e.moveTo(0,0),e.lineTo(0,-t),e.moveTo(-r,r-t),e.lineTo(0,-t),e.lineTo(r,r-t)}},y5={draw(e,t,n){e.moveTo(-n,0),e.lineTo(0,-t),e.lineTo(n,0)}},Jst=new Map([["arrow",p5],["spike",y5]]);function tot(e){return e&&typeof e.draw=="function"}function eot(e){if(tot(e))return e;const t=Jst.get(`${e}`.toLowerCase());if(t)return t;throw new Error(`invalid shape: ${e}`)}let Fv=class extends ve{constructor(t,n={}){const{x:r,y:i,r:s=h5,length:o,rotate:a,shape:l=p5,anchor:c="middle",frameAnchor:u}=n,[f,d]=Ke(o,12),[h,p]=Ke(a,0);super(t,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},length:{value:f,scale:"length",optional:!0},rotate:{value:h,optional:!0}},n,d5),this.r=+s,this.length=d,this.rotate=p,this.shape=eot(l),this.anchor=Yr(c,"anchor",["start","middle","end"]),this.frameAnchor=wy(u)}render(t,n,r,i,s){const{x:o,y:a}=n,{x:l,y:c,length:u,rotate:f}=r,{length:d,rotate:h,anchor:p,shape:g,r:v}=this,[y,m]=qs(this,i);return ee("svg:g",s).call(Ne,this,i,s).call(be,this,{x:l&&o,y:c&&a}).call(b=>b.selectAll().data(t).enter().append("path").call(Te,this).attr("transform",kv`translate(${l?w=>l[w]:y},${c?w=>c[w]:m})${f?w=>` rotate(${f[w]})`:h?` rotate(${h})`:""}${p==="start"?"":p==="end"?u?w=>` translate(0,${u[w]})`:` translate(0,${d})`:u?w=>` translate(0,${u[w]/2})`:` translate(0,${d/2})`}`).attr("d",u?w=>{const S=_o();return g.draw(S,u[w],v),S}:(()=>{const w=_o();return g.draw(w,d,v),w})()).call(fn,this,r)).node()}};function m5(e,t={}){let{x:n,y:r,...i}=t;return t.frameAnchor===void 0&&([n,r]=Ki(n,r)),new Fv(e,{...i,x:n,y:r})}function g5(e,t={}){const{x:n=gt,...r}=t;return new Fv(e,{...r,x:n})}function b5(e,t={}){const{y:n=gt,...r}=t;return new Fv(e,{...r,y:n})}function not(e,t={}){const{shape:n=y5,stroke:r=d5.stroke,strokeWidth:i=1,fill:s=r,fillOpacity:o=.3,anchor:a="start",...l}=t;return m5(e,{...l,shape:n,stroke:r,strokeWidth:i,fill:s,fillOpacity:o,anchor:a})}function ul(e,t){return arguments.length<2&&!Wo(e)&&(t=e,e=null),t===void 0&&(t={}),[e,t]}function Bv({anchor:e}={},t){return e===void 0?t[0]:Yr(e,"anchor",t)}function v5(e){return Bv(e,["left","right"])}function w5(e){return Bv(e,["right","left"])}function _5(e){return Bv(e,["bottom","top"])}function S5(e){return Bv(e,["top","bottom"])}function xT(){const[e,t]=ul(...arguments);return T5("y",v5(t),e,t)}function x5(){const[e,t]=ul(...arguments);return T5("fy",w5(t),e,t)}function IT(){const[e,t]=ul(...arguments);return E5("x",_5(t),e,t)}function I5(){const[e,t]=ul(...arguments);return E5("fx",S5(t),e,t)}function T5(e,t,n,{color:r="currentColor",opacity:i=1,stroke:s=r,strokeOpacity:o=i,strokeWidth:a=1,fill:l=r,fillOpacity:c=i,textAnchor:u,textStroke:f,textStrokeOpacity:d,textStrokeWidth:h,tickSize:p=e==="y"?6:0,tickPadding:g,tickRotate:v,x:y,margin:m,marginTop:b=m===void 0?20:m,marginRight:w=m===void 0?t==="right"?40:0:m,marginBottom:S=m===void 0?20:m,marginLeft:_=m===void 0?t==="left"?40:0:m,label:x,labelAnchor:E,labelArrow:N,labelOffset:I,...A}){return p=jt(p),g=jt(g),v=jt(v),E!==void 0&&(E=Yr(E,"labelAnchor",["center","top","bottom"])),N=C5(N),Hi(p&&!We(s)?rot(e,t,n,{stroke:s,strokeOpacity:o,strokeWidth:a,tickSize:p,tickPadding:g,tickRotate:v,x:y,...A}):null,We(l)?null:sot(e,t,n,{fill:l,fillOpacity:c,stroke:f,strokeOpacity:d,strokeWidth:h,textAnchor:u,tickSize:p,tickPadding:g,tickRotate:v,x:y,marginTop:b,marginRight:w,marginBottom:S,marginLeft:_,...A}),!We(l)&&x!==null?Rf([],F5({fill:l,fillOpacity:c,...A},function(k,R,T,M,$){const B=M[e],{marginTop:O,marginRight:C,marginBottom:F,marginLeft:P}=e==="y"&&$.inset||$,z=E??(B.bandwidth?"center":"top"),H=I??(t==="right"?C:P)-3;return z==="center"?(this.textAnchor=void 0,this.lineAnchor=t==="right"?"bottom":"top",this.frameAnchor=t,this.rotate=-90):(this.textAnchor=t==="right"?"end":"start",this.lineAnchor=z,this.frameAnchor=`${z}-${t}`,this.rotate=0),this.dy=z==="top"?3-O:z==="bottom"?F-3:0,this.dx=t==="right"?H:-H,this.ariaLabel=`${e}-axis label`,{facets:[[0]],channels:{text:{value:[L5(e,B,{anchor:t,label:x,labelAnchor:z,labelArrow:N})]}}}})):null)}function E5(e,t,n,{color:r="currentColor",opacity:i=1,stroke:s=r,strokeOpacity:o=i,strokeWidth:a=1,fill:l=r,fillOpacity:c=i,textAnchor:u,textStroke:f,textStrokeOpacity:d,textStrokeWidth:h,tickSize:p=e==="x"?6:0,tickPadding:g,tickRotate:v,y,margin:m,marginTop:b=m===void 0?t==="top"?30:0:m,marginRight:w=m===void 0?20:m,marginBottom:S=m===void 0?t==="bottom"?30:0:m,marginLeft:_=m===void 0?20:m,label:x,labelAnchor:E,labelArrow:N,labelOffset:I,...A}){return p=jt(p),g=jt(g),v=jt(v),E!==void 0&&(E=Yr(E,"labelAnchor",["center","left","right"])),N=C5(N),Hi(p&&!We(s)?iot(e,t,n,{stroke:s,strokeOpacity:o,strokeWidth:a,tickSize:p,tickPadding:g,tickRotate:v,y,...A}):null,We(l)?null:oot(e,t,n,{fill:l,fillOpacity:c,stroke:f,strokeOpacity:d,strokeWidth:h,textAnchor:u,tickSize:p,tickPadding:g,tickRotate:v,y,marginTop:b,marginRight:w,marginBottom:S,marginLeft:_,...A}),!We(l)&&x!==null?Rf([],F5({fill:l,fillOpacity:c,...A},function(k,R,T,M,$){const B=M[e],{marginTop:O,marginRight:C,marginBottom:F,marginLeft:P}=e==="x"&&$.inset||$,z=E??(B.bandwidth?"center":"right"),H=I??(t==="top"?O:F)-3;return z==="center"?(this.frameAnchor=t,this.textAnchor=void 0):(this.frameAnchor=`${t}-${z}`,this.textAnchor=z==="right"?"end":"start"),this.lineAnchor=t,this.dy=t==="top"?-H:H,this.dx=z==="right"?C-3:z==="left"?3-P:0,this.ariaLabel=`${e}-axis label`,{facets:[[0]],channels:{text:{value:[L5(e,B,{anchor:t,label:x,labelAnchor:z,labelArrow:N})]}}}})):null)}function rot(e,t,n,{strokeWidth:r=1,strokeLinecap:i=null,strokeLinejoin:s=null,facetAnchor:o=t+(e==="y"?"-empty":""),frameAnchor:a=t,tickSize:l,inset:c=0,insetLeft:u=c,insetRight:f=c,dx:d=0,y:h=e==="y"?void 0:null,...p}){return ud(b5,e,t,`${e}-axis tick`,n,{strokeWidth:r,strokeLinecap:i,strokeLinejoin:s,facetAnchor:o,frameAnchor:a,y:h,...p,dx:t==="left"?+d-xn+ +u:+d+xn-f,anchor:"start",length:l,shape:t==="left"?uot:fot})}function iot(e,t,n,{strokeWidth:r=1,strokeLinecap:i=null,strokeLinejoin:s=null,facetAnchor:o=t+(e==="x"?"-empty":""),frameAnchor:a=t,tickSize:l,inset:c=0,insetTop:u=c,insetBottom:f=c,dy:d=0,x:h=e==="x"?void 0:null,...p}){return ud(g5,e,t,`${e}-axis tick`,n,{strokeWidth:r,strokeLinejoin:s,strokeLinecap:i,facetAnchor:o,frameAnchor:a,x:h,...p,dy:t==="bottom"?+d-xn-f:+d+xn+ +u,anchor:"start",length:l,shape:t==="bottom"?lot:cot})}function sot(e,t,n,{facetAnchor:r=t+(e==="y"?"-empty":""),frameAnchor:i=t,tickSize:s,tickRotate:o=0,tickPadding:a=Math.max(3,9-s)+(Math.abs(o)>60?4*Math.cos(o*M1):0),text:l,textAnchor:c=Math.abs(o)>60?"middle":t==="left"?"end":"start",lineAnchor:u=o>60?"top":o<-60?"bottom":"middle",fontVariant:f,inset:d=0,insetLeft:h=d,insetRight:p=d,dx:g=0,y:v=e==="y"?void 0:null,...y}){return ud(o5,e,t,`${e}-axis tick label`,n,{facetAnchor:r,frameAnchor:i,text:l,textAnchor:c,lineAnchor:u,fontVariant:f,rotate:o,y:v,...y,dx:t==="left"?+g-s-a+ +h:+g+ +s+ +a-p},function(m,b,w,S,_){f===void 0&&(this.fontVariant=R5(m)),l===void 0&&(_.text=B5(m,b,w,S,t))})}function oot(e,t,n,{facetAnchor:r=t+(e==="x"?"-empty":""),frameAnchor:i=t,tickSize:s,tickRotate:o=0,tickPadding:a=Math.max(3,9-s)+(Math.abs(o)>=10?4*Math.cos(o*M1):0),text:l,textAnchor:c=Math.abs(o)>=10?o<0^t==="bottom"?"start":"end":"middle",lineAnchor:u=Math.abs(o)>=10?"middle":t==="bottom"?"top":"bottom",fontVariant:f,inset:d=0,insetTop:h=d,insetBottom:p=d,dy:g=0,x:v=e==="x"?void 0:null,...y}){return ud(s5,e,t,`${e}-axis tick label`,n,{facetAnchor:r,frameAnchor:i,text:l===void 0?null:l,textAnchor:c,lineAnchor:u,fontVariant:f,rotate:o,x:v,...y,dy:t==="bottom"?+g+ +s+ +a-p:+g-s-a+ +h},function(m,b,w,S,_){f===void 0&&(this.fontVariant=R5(m)),l===void 0&&(_.text=B5(m,b,w,S,t))})}function A5(){const[e,t]=ul(...arguments);return D5("y",v5(t),e,t)}function M5(){const[e,t]=ul(...arguments);return D5("fy",w5(t),e,t)}function $5(){const[e,t]=ul(...arguments);return k5("x",_5(t),e,t)}function N5(){const[e,t]=ul(...arguments);return k5("fx",S5(t),e,t)}function D5(e,t,n,{y:r=e==="y"?void 0:null,x:i=null,x1:s=t==="left"?i:null,x2:o=t==="right"?i:null,...a}){return ud(Ya,e,t,`${e}-grid`,n,{y:r,x1:s,x2:o,...O5(a)})}function k5(e,t,n,{x:r=e==="x"?void 0:null,y:i=null,y1:s=t==="top"?i:null,y2:o=t==="bottom"?i:null,...a}){return ud(Va,e,t,`${e}-grid`,n,{x:r,y1:s,y2:o,...O5(a)})}function O5({color:e="currentColor",opacity:t=.1,stroke:n=e,strokeOpacity:r=t,strokeWidth:i=1,...s}){return{stroke:n,strokeOpacity:r,strokeWidth:i,...s}}function F5({fill:e,fillOpacity:t,fontFamily:n,fontSize:r,fontStyle:i,fontVariant:s,fontWeight:o,monospace:a,pointerEvents:l,shapeRendering:c,clip:u=!1},f){return[,e]=br(e),[,t]=Ke(t),{facet:"super",x:null,y:null,fill:e,fillOpacity:t,fontFamily:n,fontSize:r,fontStyle:i,fontVariant:s,fontWeight:o,monospace:a,pointerEvents:l,shapeRendering:c,clip:u,initializer:f}}function ud(e,t,n,r,i,s,o){let a;function l(f,d,h,p,g,v){const y=f==null&&(t==="fx"||t==="fy"),{[t]:m}=p;if(!m)throw new Error(`missing scale: ${t}`);const b=m.domain();let{interval:w,ticks:S,tickFormat:_,tickSpacing:x=t==="x"?80:35}=s;if(typeof S=="string"&&U5(m)&&(w=S,S=void 0),S===void 0&&(S=od(w,m.type)??aot(m,x)),f==null){if(Wo(S))f=vr(S);else if(Du(S))f=I_(S,...yn(b));else if(m.interval){let N=m.interval;if(m.ticks){const[I,A]=yn(b),k=(A-I)/N[my];N=w$(N,k/S)??N,f=I_(N,I,A)}else{f=b;const I=f.length;N=w$(N,I/S)??N,N!==m.interval&&(f=I_(N,...yn(f)))}if(N===m.interval){const I=Math.round(f.length/S);I>1&&(f=f.filter((A,k)=>k%I===0))}}else m.ticks?f=m.ticks(S):f=b;if(!m.ticks&&f.length&&f!==b){const N=new ny(b);f=f.filter(I=>N.has(I)),f.length||Mo(`Warning: the ${t}-axis ticks appear to not align with the scale domain, resulting in no ticks. Try different ticks?`)}t==="y"||t==="x"?d=[Yo(f)]:a[t]={scale:t,value:gt}}o==null||o.call(this,m,f,S,_,a);const E=Object.fromEntries(Object.entries(a).map(([N,I])=>[N,{...I,value:Ut(f,I.value)}]));return y&&(d=v.filterFacets(f,E)),{data:f,facets:d,channels:E}}const c=wr(s).initializer,u=e(i,wr({...s,initializer:l},c));return i==null?(a=u.channels,u.channels={}):a={},u.ariaLabel=r,u.clip===void 0&&(u.clip=!1),u}function aot(e,t){const[n,r]=yn(e.range());return(r-n)/t}function B5(e,t,n,r,i){return{value:TT(e,t,n,r,i)}}function TT(e,t,n,r,i){return typeof r=="function"?r:r===void 0&&t&&Kn(t)?Trt(t,i)??Ec:e.tickFormat?e.tickFormat(typeof n=="number"?n:null,r):r===void 0?Ec:typeof r=="string"?(Kn(e.domain())?py:id)(r):Ur(r)}function I_(e,t,n){return e.range(t,e.offset(e.floor(n)))}const lot={draw(e,t){e.moveTo(0,0),e.lineTo(0,t)}},cot={draw(e,t){e.moveTo(0,0),e.lineTo(0,-t)}},uot={draw(e,t){e.moveTo(0,0),e.lineTo(-t,0)}},fot={draw(e,t){e.moveTo(0,0),e.lineTo(t,0)}};function R5(e){return e.bandwidth&&!e.interval?void 0:"tabular-nums"}function dot(e){return Math.sign(Bf(e.domain()))*Math.sign(Bf(e.range()))}function L5(e,t,{anchor:n,label:r=t.label,labelAnchor:i,labelArrow:s}={}){if(!(r==null||r.inferred&&U5(t)&&/^(date|time|year)$/i.test(r))){if(r=String(r),s==="auto"&&(s=(!t.bandwidth||t.interval)&&!/[]/.test(r)),!s)return r;if(s===!0){const o=dot(t);o&&(s=/x$/.test(e)||i==="center"?/x$/.test(e)===o<0?"left":"right":o<0?"up":"down")}switch(s){case"left":return` ${r}`;case"right":return`${r} `;case"up":return n==="right"?`${r} `:` ${r}`;case"down":return n==="right"?`${r} `:` ${r}`}return r}}function C5(e="auto"){return We(e)?!1:typeof e=="boolean"?e:Yr(e,"labelArrow",["auto","up","right","down","left"])}function U5(e){return Kn(e.domain())}function G$(e,t){if(t==null)return t;const n=e(t);if(!n)throw new Error(`scale not found: ${t}`);return n}function hot(e,{opacity:t,...n}={}){if(!Fc(e)&&!LC(e))throw new Error(`swatches legend requires ordinal or threshold color scale (not ${e.type})`);return P5(e,n,(r,i,s,o)=>r.append("svg").attr("width",s).attr("height",o).attr("fill",i.scale).attr("fill-opacity",Ke(t)[1]).append("rect").attr("width","100%").attr("height","100%"))}function pot(e,{fill:t=(c=>(c=e.hint)==null?void 0:c.fill)()!==void 0?e.hint.fill:"none",fillOpacity:n=1,stroke:r=(u=>(u=e.hint)==null?void 0:u.stroke)()!==void 0?e.hint.stroke:We(t)?"currentColor":"none",strokeOpacity:i=1,strokeWidth:s=1.5,r:o=4.5,...a}={},l){const[f,d]=br(t),[h,p]=br(r),g=G$(l,f),v=G$(l,h),y=o*o*Math.PI;return n=Ke(n)[1],i=Ke(i)[1],s=Ke(s)[1],P5(e,a,(m,b,w,S)=>m.append("svg").attr("viewBox","-8 -8 16 16").attr("width",w).attr("height",S).attr("fill",f==="color"?_=>g.scale(_):d).attr("fill-opacity",n).attr("stroke",h==="color"?_=>v.scale(_):p).attr("stroke-opacity",i).attr("stroke-width",s).append("path").attr("d",_=>{const x=_o();return e.scale(_).draw(x,y),x}))}function P5(e,t={},n){let{columns:r,tickFormat:i,fontVariant:s=jC(e),swatchSize:o=15,swatchWidth:a=o,swatchHeight:l=o,marginLeft:c=0,className:u,style:f,width:d}=t;const h=Ev(t);u=uT(u),i=TT(e.scale,e.domain,void 0,i);const p=ee("div",h).attr("class",`${u}-swatches ${u}-swatches-${r!=null?"columns":"wrap"}`);let g;return r!=null?(g=`.${u}-swatches-columns .${u}-swatch {
  display: flex;
  align-items: center;
  break-inside: avoid;
  padding-bottom: 1px;
}
.${u}-swatches-columns .${u}-swatch::before {
  flex-shrink: 0;
}
.${u}-swatches-columns .${u}-swatch-label {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}`,p.style("columns",r).selectAll().data(e.domain).enter().append("div").attr("class",`${u}-swatch`).call(n,e,a,l).call(v=>v.append("div").attr("class",`${u}-swatch-label`).attr("title",i).text(i))):(g=`.${u}-swatches-wrap {
  display: flex;
  align-items: center;
  min-height: 33px;
  flex-wrap: wrap;
}
.${u}-swatches-wrap .${u}-swatch {
  display: inline-flex;
  align-items: center;
  margin-right: 1em;
}`,p.selectAll().data(e.domain).enter().append("span").attr("class",`${u}-swatch`).call(n,e,a,l).append(function(){return this.ownerDocument.createTextNode(i.apply(this,arguments))})),p.call(v=>v.insert("style","*").text(`.${u}-swatches {
  font-family: system-ui, sans-serif;
  font-size: 10px;
  margin-bottom: 0.5em;
}
.${u}-swatch > svg {
  margin-right: 0.5em;
  overflow: visible;
}
${g}`)).style("margin-left",c?`${+c}px`:null).style("width",d===void 0?null:`${+d}px`).style("font-variant",Ve(s,"normal")).call(fT,f).node()}const $1=new Map([["symbol",pot],["color",z5],["opacity",got]]);function yot(e={}){for(const[t,n]of $1){const r=e[t];if(ic(r)){const i=Ev(e);let s;if(t==="symbol"){const{fill:o,stroke:a=o===void 0&&ic(e.color)?"color":void 0}=e;s={fill:o,stroke:a}}return n(KS(t,r,s),ET(i,r,e),o=>ic(e[o])?KS(o,e[o]):null)}}throw new Error("unknown legend type; no scale found")}function mot(e,t,n={}){return(r,i)=>{if(!$1.has(r))throw new Error(`unknown legend type: ${r}`);if(r in e)return $1.get(r)(e[r],ET(t,n[r],i),s=>e[s])}}function ET({className:e,...t},{label:n,ticks:r,tickFormat:i}={},s){return zrt(s,{className:e,...t},{label:n,ticks:r,tickFormat:i})}function z5(e,{legend:t=!0,...n}){if(t===!0&&(t=e.type==="ordinal"?"swatches":"ramp"),e.domain!==void 0)switch(`${t}`.toLowerCase()){case"swatches":return hot(e,n);case"ramp":return Rst(e,n);default:throw new Error(`unknown legend type: ${t}`)}}function got({type:e,interpolate:t,...n},{legend:r=!0,color:i=gi(0,0,0),...s}){if(!t)throw new Error(`${e} opacity scales are not supported`);if(r===!0&&(r="ramp"),`${r}`.toLowerCase()!=="ramp")throw new Error(`${r} opacity legends are not supported`);return z5({type:e,...n,interpolate:bot(i)},{legend:r,...s})}function bot(e){const{r:t,g:n,b:r}=gi(e)||gi(0,0,0);return i=>`rgba(${t},${n},${r},${i})`}function vot(e,t,n){const r=[];for(const[i,s]of $1){const o=n[i];if(o!=null&&o.legend&&i in e){const a=s(e[i],ET(t,e[i],o),l=>e[l]);a!=null&&r.push(a)}}return r}const wot={ariaLabel:"frame",fill:"none",stroke:"currentColor",clip:!1},_ot={ariaLabel:"frame",fill:null,stroke:"currentColor",strokeLinecap:"square",clip:!1};class j5 extends ve{constructor(t={}){const{anchor:n=null,inset:r=0,insetTop:i=r,insetRight:s=r,insetBottom:o=r,insetLeft:a=r,rx:l,ry:c}=t;super(Dh,void 0,t,n==null?wot:_ot),this.anchor=XL(n,"anchor",["top","right","bottom","left"]),this.insetTop=jt(i),this.insetRight=jt(s),this.insetBottom=jt(o),this.insetLeft=jt(a),this.rx=jt(l),this.ry=jt(c)}render(t,n,r,i,s){const{marginTop:o,marginRight:a,marginBottom:l,marginLeft:c,width:u,height:f}=i,{anchor:d,insetTop:h,insetRight:p,insetBottom:g,insetLeft:v,rx:y,ry:m}=this,b=c+v,w=u-a-p,S=o+h,_=f-l-g;return ee(d?"svg:line":"svg:rect",s).datum(0).call(Ne,this,i,s).call(Te,this).call(fn,this,r).call(be,this,{}).call(d==="left"?x=>x.attr("x1",b).attr("x2",b).attr("y1",S).attr("y2",_):d==="right"?x=>x.attr("x1",w).attr("x2",w).attr("y1",S).attr("y2",_):d==="top"?x=>x.attr("x1",b).attr("x2",w).attr("y1",S).attr("y2",S):d==="bottom"?x=>x.attr("x1",b).attr("x2",w).attr("y1",_).attr("y2",_):x=>x.attr("x",b).attr("y",S).attr("width",w-b).attr("height",_-S).attr("rx",y).attr("ry",m)).node()}}function AT(e){return new j5(e)}const T_={ariaLabel:"tip",fill:"white",stroke:"currentColor"},Sot=new Set(["geometry","href","src","ariaLabel","scales"]);class V5 extends ve{constructor(t,n={}){n.tip&&(n={...n,tip:!1}),n.title===void 0&&Wo(t)&&eC(t)&&(n={...n,title:gt});const{x:r,y:i,x1:s,x2:o,y1:a,y2:l,anchor:c,monospace:u,fontFamily:f=u?"ui-monospace, monospace":void 0,fontSize:d,fontStyle:h,fontVariant:p,fontWeight:g,lineHeight:v=1,lineWidth:y=20,frameAnchor:m,format:b,textAnchor:w="start",textOverflow:S,textPadding:_=8,title:x,pointerSize:E=12,pathFilter:N="drop-shadow(0 3px 4px rgba(0,0,0,0.2))"}=n;super(t,{x:{value:s!=null&&o!=null?null:r,scale:"x",optional:!0},y:{value:a!=null&&l!=null?null:i,scale:"y",optional:!0},x1:{value:s,scale:"x",optional:o==null},y1:{value:a,scale:"y",optional:l==null},x2:{value:o,scale:"x",optional:s==null},y2:{value:l,scale:"y",optional:a==null},title:{value:x,optional:!0}},n,T_),this.anchor=nC(c,"anchor"),this.previousAnchor=this.anchor??"top-left",this.frameAnchor=wy(m),this.textAnchor=Ve(w,"middle"),this.textPadding=+_,this.pointerSize=+E,this.pathFilter=Fn(N),this.lineHeight=+v,this.lineWidth=+y,this.textOverflow=i5(S),this.monospace=!!u,this.fontFamily=Fn(f),this.fontSize=jt(d),this.fontStyle=Fn(h),this.fontVariant=Fn(p),this.fontWeight=Fn(g);for(const I in T_)I in this.channels&&(this[I]=T_[I]);this.splitLines=l5(this),this.clipLine=c5(this),this.format={...b}}render(t,n,r,i,s){const o=this,{x:a,y:l,fx:c,fy:u}=n,{ownerSVGElement:f,document:d}=s,{anchor:h,monospace:p,lineHeight:g,lineWidth:v}=this,{textPadding:y,pointerSize:m,pathFilter:b}=this,{marginTop:w,marginLeft:S}=i,{x1:_,y1:x,x2:E,y2:N,x:I=_??E,y:A=x??N}=r,k=c?c(t.fx)-S:0,R=u?u(t.fy)-w:0,[T,M]=qs(this,i),$=PC(r,T),B=zC(r,M),O=p?ST:_T,C=O(Zu);let F,P;"title"in r?(F=r.channels,P=Aot):(F=Eot.call(this,r,n),P=Mot);const z=ee("svg:g",s).call(Ne,this,i,s).call(a5,this).call(be,this,{x:I&&a,y:A&&l}).call(tt=>tt.selectAll().data(t).enter().append("g").attr("transform",Z=>`translate(${Math.round($(Z))},${Math.round(B(Z))})`).call(Te,this).call(Z=>Z.append("path").attr("filter",b)).call(Z=>Z.append("text").each(function(Y){const Q=ye(this);this.setAttribute("fill","currentColor"),this.setAttribute("fill-opacity",1),this.setAttribute("stroke","none");const V=P.call(o,Y,t,F,n,r);if(typeof V=="string")for(const J of o.splitLines(V))H(Q,{value:o.clipLine(J)});else{const J=new Set;for(const et of V){const{label:j=""}=et;j&&J.has(j)||(J.add(j),H(Q,et))}}})));function H(tt,{label:Z,value:Y,color:Q,opacity:V}){Z??(Z=""),Y??(Y="");const J=Q!=null||V!=null;let et,j=v*100;const[At]=Lf(Z,j,O,C);if(At>=0)Z=Z.slice(0,At).trimEnd()+Zu,et=Y.trim(),Y="";else{(Z||!Y&&!J)&&(Y=" "+Y);const[Vt]=Lf(Y,j-O(Z),O,C);Vt>=0&&(Y=Y.slice(0,Vt).trimEnd()+Zu,et=Y.trim())}const ot=tt.append("tspan").attr("x",0).attr("dy",`${g}em`).text("");Z&&ot.append("tspan").attr("font-weight","bold").text(Z),Y&&ot.append(()=>d.createTextNode(Y)),J&&ot.append("tspan").text(" ").attr("fill",Q).attr("fill-opacity",V).style("user-select","none"),et&&ot.append("title").text(et)}function X(){const{width:tt,height:Z}=i.facet??i;z.selectChildren().each(function(Y){let{x:Q,width:V,height:J}=this.getBBox();V=Math.round(V),J=Math.round(J);let et=h;if(et===void 0){et=o.previousAnchor;const ot=$(Y)+k,Vt=B(Y)+R,Ht=ot+V+y*2<tt,st=ot-V-y*2>0,de=Vt+J+m+y*2+7<Z,Ji=Vt-J-m-y*2>0,qr=(/-left$/.test(et)?Ht||!st:Ht&&!st)?"left":"right",Zv=(/^top-/.test(et)?de||!Ji:de&&!Ji)?"top":"bottom";et=o.previousAnchor=`${Zv}-${qr}`}const j=this.firstChild,At=this.lastChild;if(j.setAttribute("d",Tot(et,m,y,V,J)),Q)for(const ot of At.childNodes)ot.setAttribute("x",-Q);At.setAttribute("y",`${+xot(et,At.childNodes.length,g).toFixed(6)}em`),At.setAttribute("transform",`translate(${Iot(et,m,y,V,J)})`)}),z.attr("visibility",null)}return t.length&&(z.attr("visibility","hidden"),f.isConnected?Promise.resolve().then(X):typeof requestAnimationFrame<"u"&&requestAnimationFrame(X)),z.node()}}function Y5(e,{x:t,y:n,...r}={}){return r.frameAnchor===void 0&&([t,n]=Ki(t,n)),new V5(e,{...r,x:t,y:n})}function xot(e,t,n){return/^top(?:-|$)/.test(e)?.94-n:-.29-t*n}function Iot(e,t,n,r,i){switch(e){case"middle":return[-r/2,i/2];case"top-left":return[n,t+n];case"top":return[-r/2,t/2+n];case"top-right":return[-r-n,t+n];case"right":return[-t/2-r-n,i/2];case"bottom-left":return[n,-t-n];case"bottom":return[-r/2,-t/2-n];case"bottom-right":return[-r-n,-t-n];case"left":return[n+t/2,i/2]}}function Tot(e,t,n,r,i){const s=r+n*2,o=i+n*2;switch(e){case"middle":return`M${-s/2},${-o/2}h${s}v${o}h${-s}z`;case"top-left":return`M0,0l${t},${t}h${s-t}v${o}h${-s}z`;case"top":return`M0,0l${t/2},${t/2}h${(s-t)/2}v${o}h${-s}v${-o}h${(s-t)/2}z`;case"top-right":return`M0,0l${-t},${t}h${t-s}v${o}h${s}z`;case"right":return`M0,0l${-t/2},${-t/2}v${t/2-o/2}h${-s}v${o}h${s}v${t/2-o/2}z`;case"bottom-left":return`M0,0l${t},${-t}h${s-t}v${-o}h${-s}z`;case"bottom":return`M0,0l${t/2},${-t/2}h${(s-t)/2}v${-o}h${-s}v${o}h${(s-t)/2}z`;case"bottom-right":return`M0,0l${-t},${-t}h${t-s}v${-o}h${s}z`;case"left":return`M0,0l${t/2},${-t/2}v${t/2-o/2}h${s}v${o}h${-s}v${t/2-o/2}z`}}function Eot({channels:e},t){var i,s;const n={};let r=this.format;r=X$(r,e,"x"),r=X$(r,e,"y"),this.format=r;for(const o in r){const a=r[o];if(!(a===null||a===!1))if(o==="fx"||o==="fy")n[o]=!0;else{const l=HS(e,o);l&&(n[o]=l)}}for(const o in e){if(o in n||o in r||Sot.has(o))continue;const a=HS(e,o);a&&(n[o]=a)}this.facet&&(t.fx&&!("fx"in r)&&(n.fx=!0),t.fy&&!("fy"in r)&&(n.fy=!0));for(const o in n){const a=this.format[o];if(typeof a=="string"){const l=((i=n[o])==null?void 0:i.value)??((s=t[o])==null?void 0:s.domain())??[];this.format[o]=(Kn(l)?py:id)(a)}else if(a===void 0||a===!0){const l=t[o];this.format[o]=l!=null&&l.bandwidth?TT(l,l.domain()):Ec}}return n}function X$(e,t,n){if(!(n in e))return e;const r=`${n}1`,i=`${n}2`;if((r in e||!(r in t))&&(i in e||!(i in t)))return e;const s=Object.entries(e),o=e[n];return s.splice(s.findIndex(([a])=>a===n)+1,0,[r,o],[i,o]),Object.fromEntries(s)}function Aot(e,t,{title:n}){return Ec(n.value[e],e)}function*Mot(e,t,n,r,i){for(const s in n){if(s==="fx"||s==="fy"){yield{label:N1(r,n,s),value:this.format[s](t[s],e)};continue}if(s==="x1"&&"x2"in n||s==="y1"&&"y2"in n)continue;const o=n[s];if(s==="x2"&&"x1"in n)yield{label:K$(r,n,"x"),value:Q$(this.format.x2,n.x1,o,e)};else if(s==="y2"&&"y1"in n)yield{label:K$(r,n,"y"),value:Q$(this.format.y2,n.y1,o,e)};else{const a=o.value[e],l=o.scale;if(!Gn(a)&&l==null)continue;yield{label:N1(r,n,s),value:this.format[s](a,e),color:l==="color"?i[s][e]:null,opacity:l==="opacity"?i[s][e]:null}}}}function Q$(e,t,n,r){var i;return(i=n.hint)!=null&&i.length?`${e(n.value[r]-t.value[r],r)}`:`${e(t.value[r],r)}${e(n.value[r],r)}`}function K$(e,t,n){const r=N1(e,t,`${n}1`,n),i=N1(e,t,`${n}2`,n);return r===i?r:`${r}${i}`}function N1(e,t,n,r=n){const i=t[n],s=e[(i==null?void 0:i.scale)??n];return String((s==null?void 0:s.label)??(i==null?void 0:i.label)??r)}function MT(e={}){var C;const{facet:t,style:n,title:r,subtitle:i,caption:s,ariaLabel:o,ariaDescription:a}=e,l=uT(e.className),c=e.marks===void 0?[]:J$(e.marks);c.push(...Rot(c));const u=Fot(t,e),f=new Map;for(const F of c){const P=tN(F,u,e);P&&f.set(F,P)}const d=new Map;u&&Ud(d,[u],e),Ud(d,f,e);const h=J$(Lot(c,d,e));for(const F of h){const P=tN(F,u,e);P&&f.set(F,P)}c.unshift(...h);let p=Sst(d,e);if(p!==void 0){const F=u?S_(p,u):void 0;for(const z of c){if(z.facet===null||z.facet==="super")continue;const H=f.get(z);H!==void 0&&(H.facetsIndex=z.fx!=null||z.fy!=null?S_(p,H):F)}const P=new Set;for(const{facetsIndex:z}of f.values())z==null||z.forEach((H,X)=>{(H==null?void 0:H.length)>0&&P.add(X)});p.forEach(0<P.size&&P.size<p.length?(z,H)=>z.empty=!P.has(H):z=>z.empty=!1);for(const z of c)if(z.facet==="exclude"){const H=f.get(z);H!==void 0&&(H.facetsIndex=Tst(H.facetsIndex))}}for(const F of Le.keys())ic(e[F])&&F!=="fx"&&F!=="fy"&&d.set(F,[]);const g=new Map;for(const F of c){if(g.has(F))throw new Error("duplicate mark; each mark must be unique");const{facetsIndex:P,channels:z}=f.get(F)??{},{data:H,facets:X,channels:tt}=F.initialize(P,z,e);$T(tt,e),g.set(F,{data:H,facets:X,channels:tt})}const v=QS(Ud(d,g,e),e),y=wst(v,c,e);hst(v,y);const m=B$(v),{fx:b,fy:w}=m,S=b||w?OC(v,y):y,_=b||w?Yot(m,y):y,x=Ev(e),E=x.document,N=Qb("svg").call(E.documentElement);let I=N;x.ownerSVGElement=N,x.className=l,x.projection=Ait(e,S),x.filterFacets=(F,P)=>S_(p,{channels:P,groups:mT(F,P)}),x.getMarkState=F=>{const P=g.get(F),z=f.get(F);return{...P,channels:{...P.channels,...z==null?void 0:z.channels}}},x.dispatchValue=F=>{I.value!==F&&(I.value=F,I.dispatchEvent(new Event("input",{bubbles:!0})))};const A=new Set;for(const[F,P]of g)if(F.initializer!=null){const z=F.facet==="super"?_:S,H=F.initializer(P.data,P.facets,P.channels,m,z,x);if(H.data!==void 0&&(P.data=H.data),H.facets!==void 0&&(P.facets=H.facets),H.channels!==void 0){const{fx:X,fy:tt,...Z}=H.channels;Oot(Z),Object.assign(P.channels,Z);for(const Y of Object.values(Z)){const{scale:Q}=Y;Q!=null&&!Vrt(Le.get(Q))&&(q5(Y,e),A.add(Q))}(X!=null||tt!=null)&&f.set(F,!0)}}if(A.size){const F=new Map;Ud(F,g,e,X=>A.has(X)),Ud(d,g,e,X=>A.has(X));const P=Vot(QS(F,e),v),{scales:z,...H}=B$(P);Object.assign(v,P),Object.assign(m,H),Object.assign(m.scales,z)}let k,R;p!==void 0&&(k={x:b==null?void 0:b.domain(),y:w==null?void 0:w.domain()},p=xst(p,k),R=Ist(b,w,y));for(const[F,P]of g)P.values=F.scale(P.channels,m,x);const{width:T,height:M}=y;ye(N).attr("class",l).attr("fill","currentColor").attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("text-anchor","middle").attr("width",T).attr("height",M).attr("viewBox",`0 0 ${T} ${M}`).attr("aria-label",o).attr("aria-description",a).call(F=>F.append("style").text(`.${l} {
  display: block;
  background: white;
  height: auto;
  height: intrinsic;
  max-width: 100%;
}
.${l} text,
.${l} tspan {
  white-space: pre;
}`)).call(fT,n);for(const F of c){const{channels:P,values:z,facets:H}=g.get(F);if(p===void 0||F.facet==="super"){let X=null;if(H&&(X=H[0],X=F.filter(X,P,z),X.length===0))continue;const tt=F.render(X,m,z,_,x);if(tt==null)continue;N.appendChild(tt)}else{let X;for(const tt of p){if(!(((C=F.facetAnchor)==null?void 0:C.call(F,p,k,tt))??!tt.empty))continue;let Z=null;if(H){const Q=f.has(F);if(Z=H[Q?tt.i:0],Z=F.filter(Z,P,z),Z.length===0)continue;!Q&&Z===H[0]&&(Z=sc(Z)),Z.fx=tt.x,Z.fy=tt.y,Z.fi=tt.i}const Y=F.render(Z,m,z,S,x);if(Y!=null){(X??(X=ye(N).append("g"))).append(()=>Y).datum(tt);for(const Q of["aria-label","aria-description","aria-hidden","transform"])Y.hasAttribute(Q)&&(X.attr(Q,Y.getAttribute(Q)),Y.removeAttribute(Q))}}X==null||X.selectChildren().attr("transform",R)}}const $=vot(v,x,e),{figure:B=r!=null||i!=null||s!=null||$.length>0}=e;B&&(I=E.createElement("figure"),I.className=`${l}-figure`,I.style.maxWidth="initial",r!=null&&I.append(Z$(E,r,"h2")),i!=null&&I.append(Z$(E,i,"h3")),I.append(...$,N),s!=null&&I.append($ot(E,s))),I.scale=vst(m.scales),I.legend=mot(v,x,e);const O=git();return O>0&&ye(N).append("text").attr("x",T).attr("y",20).attr("dy","-1em").attr("text-anchor","end").attr("font-family","initial").text("").append("title").text(`${O.toLocaleString("en-US")} warning${O===1?"":"s"}. Please check the console.`),I}function Z$(e,t,n){if(t.ownerDocument)return t;const r=e.createElement(n);return r.append(t),r}function $ot(e,t){const n=e.createElement("figcaption");return n.append(t),n}function Not({marks:e=[],...t}={}){return MT({...t,marks:[...e,this]})}ve.prototype.plot=Not;function J$(e){return e.flat(1/0).filter(t=>t!=null).map(Dot)}function Dot(e){return typeof e.render=="function"?e:new kot(e)}class kot extends ve{constructor(t){if(typeof t!="function")throw new TypeError("invalid mark; missing render function");super(),this.render=t}render(){}}function $T(e,t){for(const n in e)q5(e[n],t);return e}function q5(e,t){const{scale:n,transform:r=!0}=e;if(n==null||!r)return;const{type:i,percent:s,interval:o,transform:a=s?l=>l*100:tC(o,i)}=t[n]??{};a!=null&&(e.value=_e(e.value,a),e.transform=!1)}function Oot(e){for(const t in e)uC(t,e[t])}function Ud(e,t,n,r=$rt){var i,s;for(const{channels:o}of t.values())for(const a in o){const l=o[a],{scale:c}=l;if(c!=null&&r(c))if(c==="projection"){if(!Nit(n)){const u=((i=n.x)==null?void 0:i.domain)===void 0,f=((s=n.y)==null?void 0:s.domain)===void 0;if(u||f){const[d,h]=kit(l);u&&E_(e,"x",d),f&&E_(e,"y",h)}}}else E_(e,c,l)}return e}function E_(e,t,n){const r=e.get(t);r!==void 0?r.push(n):e.set(t,[n])}function Fot(e,t){if(e==null)return;const{x:n,y:r}=e;if(n==null&&r==null)return;const i=vr(e.data);if(i==null)throw new Error("missing facet data");const s={};n!=null&&(s.fx=Tp(i,{value:n,scale:"fx"})),r!=null&&(s.fy=Tp(i,{value:r,scale:"fy"})),$T(s,t);const o=mT(i,s);return{channels:s,groups:o,data:e.data}}function tN(e,t,n){var l;if(e.facet===null||e.facet==="super")return;const{fx:r,fy:i}=e;if(r!=null||i!=null){const c=vr(e.data??r??i);if(c===void 0)throw new Error(`missing facet data in ${e.ariaLabel}`);if(c===null)return;const u={};return r!=null&&(u.fx=Tp(c,{value:r,scale:"fx"})),i!=null&&(u.fy=Tp(c,{value:i,scale:"fy"})),$T(u,n),{channels:u,groups:mT(c,u)}}if(t===void 0)return;const{channels:s,groups:o,data:a}=t;if(e.facet!=="auto"||e.data===a)return{channels:s,groups:o};a.length>0&&(o.size>1||o.size===1&&s.fx&&s.fy&&[...o][0][1].size>1)&&((l=vr(e.data))==null?void 0:l.length)===a.length&&Mo(`Warning: the ${e.ariaLabel} mark appears to use faceted data, but isnt faceted. The mark data has the same length as the facet data and the mark facet option is "auto", but the mark data and facet data are distinct. If this mark should be faceted, set the mark facet option to true; otherwise, suppress this warning by setting the mark facet option to false.`)}function Bot(e,t={}){return wr({...t,x:null,y:null},(n,r,i,s,o,a)=>a.getMarkState(e))}function Rot(e){const t=[];for(const n of e){let r=n.tip;if(r){r===!0?r={}:typeof r=="string"&&(r={pointer:r});let{pointer:i}=r;i=/^x$/i.test(i)?vT:/^y$/i.test(i)?wT:bT,r=i(Bot(n,r)),r.title=null;const s=Y5(n.data,r);s.facet=n.facet,s.facetAnchor=n.facetAnchor,t.push(s)}}return t}function Lot(e,t,n){let{projection:r,x:i={},y:s={},fx:o={},fy:a={},axis:l,grid:c,facet:u={},facet:{axis:f=l,grid:d}=u,x:{axis:h=l,grid:p=h===null?null:c}=i,y:{axis:g=l,grid:v=g===null?null:c}=s,fx:{axis:y=f,grid:m=y===null?null:d}=o,fy:{axis:b=f,grid:w=b===null?null:d}=a}=n;(r||!ic(i)&&!eN("x",e))&&(h=p=null),(r||!ic(s)&&!eN("y",e))&&(g=v=null),t.has("fx")||(y=m=null),t.has("fy")||(b=w=null),h===void 0&&(h=!k0(e,"x")),g===void 0&&(g=!k0(e,"y")),y===void 0&&(y=!k0(e,"fx")),b===void 0&&(b=!k0(e,"fy")),h===!0&&(h="bottom"),g===!0&&(g="left"),y===!0&&(y=h==="top"||h===null?"bottom":"top"),b===!0&&(b=g==="right"||g===null?"left":"right");const S=[];return D0(S,w,M5,a),N0(S,b,x5,"right","left",u,a),D0(S,m,N5,o),N0(S,y,I5,"top","bottom",u,o),D0(S,v,A5,s),N0(S,g,xT,"left","right",n,s),D0(S,p,$5,i),N0(S,h,IT,"bottom","top",n,i),S}function N0(e,t,n,r,i,s,o){if(!t)return;const a=Cot(t);o=Uot(a?r:t,s,o);const{line:l}=o;(n===xT||n===IT)&&l&&!Ff(l)&&e.push(AT(Pot(o))),e.push(n(o)),a&&e.push(n({...o,anchor:i,label:null}))}function D0(e,t,n,r){!t||Ff(t)||e.push(n(zot(t,r)))}function Cot(e){return/^\s*both\s*$/i.test(e)}function Uot(e,t,{line:n=t.line,ticks:r,tickSize:i,tickSpacing:s,tickPadding:o,tickFormat:a,tickRotate:l,fontVariant:c,ariaLabel:u,ariaDescription:f,label:d=t.label,labelAnchor:h,labelArrow:p=t.labelArrow,labelOffset:g}){return{anchor:e,line:n,ticks:r,tickSize:i,tickSpacing:s,tickPadding:o,tickFormat:a,tickRotate:l,fontVariant:c,ariaLabel:u,ariaDescription:f,label:d,labelAnchor:h,labelArrow:p,labelOffset:g}}function Pot(e){const{anchor:t,line:n}=e;return{anchor:t,facetAnchor:t+"-empty",stroke:n===!0?void 0:n}}function zot(e,{stroke:t=vy(e)?e:void 0,ticks:n=jot(e)?e:void 0,tickSpacing:r,ariaLabel:i,ariaDescription:s}){return{stroke:t,ticks:n,tickSpacing:r,ariaLabel:i,ariaDescription:s}}function jot(e){switch(typeof e){case"number":return!0;case"string":return!vy(e)}return Wo(e)||typeof(e==null?void 0:e.range)=="function"}function k0(e,t){const n=`${t}-axis `;return e.some(r=>{var i;return(i=r.ariaLabel)==null?void 0:i.startsWith(n)})}function eN(e,t){for(const n of t)for(const r in n.channels){const{scale:i}=n.channels[r];if(i===e||i==="projection")return!0}return!1}function Vot(e,t){for(const n in e){const r=e[n],i=t[n];r.label===void 0&&i&&(r.label=i.label)}return e}function Yot({fx:e,fy:t},n){const{marginTop:r,marginRight:i,marginBottom:s,marginLeft:o,width:a,height:l}=yT(n),c=e&&nN(e),u=t&&nN(t);return{marginTop:t?u[0]:r,marginRight:e?a-c[1]:i,marginBottom:t?l-u[1]:s,marginLeft:e?c[0]:o,inset:{marginTop:n.marginTop,marginRight:n.marginRight,marginBottom:n.marginBottom,marginLeft:n.marginLeft},width:a,height:l}}function nN(e){const t=e.domain();let n=e(t[0]),r=e(t[t.length-1]);return r<n&&([n,r]=[r,n]),[n,r+e.bandwidth()]}const qot=new Map([["basis",Jnt],["basis-closed",trt],["basis-open",ert],["bundle",nrt],["bump-x",jnt],["bump-y",Vnt],["cardinal",rrt],["cardinal-closed",irt],["cardinal-open",srt],["catmull-rom",ort],["catmull-rom-closed",art],["catmull-rom-open",lrt],["linear",yy],["linear-closed",crt],["monotone-x",urt],["monotone-y",frt],["natural",drt],["step",hrt],["step-after",yrt],["step-before",prt]]);function NT(e=yy,t){if(typeof e=="function")return e;const n=qot.get(`${e}`.toLowerCase());if(!n)throw new Error(`unknown curve: ${e}`);if(t!==void 0){if("beta"in n)return n.beta(t);if("tension"in n)return n.tension(t);if("alpha"in n)return n.alpha(t)}return n}function W5(e=Cf,t){return typeof e!="function"&&`${e}`.toLowerCase()==="auto"?Cf:NT(e,t)}function Cf(e){return yy(e)}function pa(e={y:"count"},t={}){[e,t]=FT(e,t);const{x:n,y:r}=t;return OT(D1(n,t,gt),null,null,r,e,Ay(t))}function ya(e={x:"count"},t={}){[e,t]=FT(e,t);const{x:n,y:r}=t;return OT(null,D1(r,t,gt),n,null,e,My(t))}function Fl(e={fill:"count"},t={}){[e,t]=FT(e,t);const{x:n,y:r}=Wot(t);return OT(n,r,null,null,e,Ay(My(t)))}function H5(e,t,n={}){if((n==null?void 0:n.interval)==null)return n;const{reduce:r=oT}=n,i={filter:null};return n[t]!=null&&(i[t]=r),n[`${t}1`]!=null&&(i[`${t}1`]=r),n[`${t}2`]!=null&&(i[`${t}2`]=r),e(i,n)}function DT(e={}){return H5(pa,"y",ad(e,"x"))}function kT(e={}){return H5(ya,"x",ad(e,"y"))}function OT(e,t,n,r,{data:i=sT,filter:s=E1,sort:o,reverse:a,...l}={},c={}){e=rN(e),t=rN(t),l=Hot(l,c),i=K5(i,gt),o=o==null?void 0:X5("sort",o,c),s=s==null?void 0:Q5("filter",s,c),n!=null&&ba(l,"x","x1","x2")&&(n=null),r!=null&&ba(l,"y","y1","y2")&&(r=null);const[u,f]=er(e),[d,h]=er(e),[p,g]=er(t),[v,y]=er(t),[m,b]=n!=null?[n,"x"]:r!=null?[r,"y"]:[],[w,S]=er(m),{x:_,y:x,z:E,fill:N,stroke:I,x1:A,x2:k,y1:R,y2:T,domain:M,cumulative:$,thresholds:B,interval:O,...C}=c,[F,P]=er(E),[z]=br(N),[H]=br(I),[X,tt]=er(z),[Z,Y]=er(H);return{..."z"in c&&{z:F||E},..."fill"in c&&{fill:X||N},..."stroke"in c&&{stroke:Z||I},...Ys(C,(Q,V,J)=>{const et=T1(Ut(Q,m),J==null?void 0:J[b]),j=Ut(Q,E),At=Ut(Q,z),ot=Ut(Q,H),Vt=iT(l,{z:j,fill:At,stroke:ot}),Ht=[],st=[],de=et&&S([]),Ji=j&&P([]),qr=At&&tt([]),Zv=ot&&Y([]),jE=e&&f([]),az=e&&h([]),VE=t&&g([]),lz=t&&y([]),cz=Qot(e==null?void 0:e(Q),t==null?void 0:t(Q));let uz=0;for(const Rc of l)Rc.initialize(Q);o&&o.initialize(Q),s&&s.initialize(Q);for(const Rc of V){const YE=[];for(const wd of l)wd.scope("facet",Rc);o&&o.scope("facet",Rc),s&&s.scope("facet",Rc);for(const[wd,fz]of Ku(Rc,Vt))for(const[dz,Py]of Ku(fz,et))for(const[ts,yl]of cz(Py))if(!(s&&!s.reduce(ts,yl))){YE.push(uz++),st.push(i.reduceIndex(ts,Q,yl)),et&&de.push(dz),j&&Ji.push(Vt===j?wd:j[(ts.length>0?ts:Py)[0]]),At&&qr.push(Vt===At?wd:At[(ts.length>0?ts:Py)[0]]),ot&&Zv.push(Vt===ot?wd:ot[(ts.length>0?ts:Py)[0]]),jE&&(jE.push(yl.x1),az.push(yl.x2)),VE&&(VE.push(yl.y1),lz.push(yl.y2));for(const hz of l)hz.reduce(ts,yl);o&&o.reduce(ts)}Ht.push(YE)}return lC(Ht,o,a),{data:st,facets:Ht}}),...!ba(l,"x")&&(u?{x1:u,x2:d,x:I1(u,d)}:{x:_,x1:A,x2:k}),...!ba(l,"y")&&(p?{y1:p,y2:v,y:I1(p,v)}:{y:x,y1:R,y2:T}),...w&&{[b]:w},...Object.fromEntries(l.map(({name:Q,output:V})=>[Q,V]))}}function FT({cumulative:e,domain:t,thresholds:n,interval:r,...i},s){return[i,{cumulative:e,domain:t,thresholds:n,interval:r,...s}]}function D1(e,{cumulative:t,domain:n,thresholds:r,interval:i},s){return e={...by(e)},e.domain===void 0&&(e.domain=n),e.cumulative===void 0&&(e.cumulative=t),e.thresholds===void 0&&(e.thresholds=r),e.interval===void 0&&(e.interval=i),e.value===void 0&&(e.value=s),e.thresholds=G5(e.thresholds,e.interval),e}function Wot(e){let{x:t,y:n}=e;return t=D1(t,e),n=D1(n,e),[t.value,n.value]=Ki(t.value,n.value),{x:t,y:n}}function rN(e){if(e==null)return;const{value:t,cumulative:n,domain:r=yn,thresholds:i}=e,s=o=>{let a=Ut(o,t),l;if(Kn(a)||Xot(i)){a=_e(a,GL,Float64Array);let[u,f]=typeof r=="function"?r(a):r,d=typeof i=="function"&&!Du(i)?i(a,u,f):i;typeof d=="number"&&(d=HB(u,f,d)),Du(d)&&(r===yn&&(u=d.floor(u),f=d.offset(d.floor(f))),d=d.range(u,d.offset(f))),l=d}else{a=lr(a);let[u,f]=typeof r=="function"?r(a):r,d=typeof i=="function"&&!Du(i)?i(a,u,f):i;if(typeof d=="number")if(r===yn){let h=up(u,f,d);if(isFinite(h))if(h>0){let p=Math.round(u/h),g=Math.round(f/h);p*h<=u||--p,g*h>f||++g;let v=g-p+1;d=new Float64Array(v);for(let y=0;y<v;++y)d[y]=(p+y)*h}else if(h<0){h=-h;let p=Math.round(u*h),g=Math.round(f*h);p/h<=u||--p,g/h>f||++g;let v=g-p+1;d=new Float64Array(v);for(let y=0;y<v;++y)d[y]=(p+y)/h}else d=[u];else d=[u]}else d=Ca(u,f,d);else Du(d)&&(r===yn&&(u=d.floor(u),f=d.offset(d.floor(f))),d=d.range(u,d.offset(f)));l=d}const c=[];if(l.length===1)c.push([l[0],l[0]]);else for(let u=1;u<l.length;++u)c.push([l[u-1],l[u]]);return c.bin=(n<0?Zot:n>0?Kot:BT)(c,l,a),c};return s.label=qo(t),s}function G5(e,t,n=iN){if(e===void 0)return t===void 0?n:od(t);if(typeof e=="string"){switch(e.toLowerCase()){case"freedman-diaconis":return AG;case"scott":return QO;case"sturges":return a3;case"auto":return iN}return P3(e)}return e}function Hot(e,t){return eT(e,t,X5)}function X5(e,t,n){return nT(e,t,n,Q5)}function Q5(e,t,n){return rT(e,t,n,K5)}function K5(e,t){return Tv(e,t,Got)}function Got(e){switch(`${e}`.toLowerCase()){case"x":return Jot;case"x1":return eat;case"x2":return nat;case"y":return tat;case"y1":return rat;case"y2":return iat}throw new Error(`invalid bin reduce: ${e}`)}function iN(e,t,n){return Math.min(200,QO(e,t,n))}function Xot(e){return Ort(e)||Wo(e)&&Kn(e)}function Qot(e,t){return e&&t?function*(n){const r=e.bin(n);for(const[i,[s,o]]of e.entries()){const a=t.bin(r[i]);for(const[l,[c,u]]of t.entries())yield[a[l],{x1:s,y1:c,x2:o,y2:u}]}}:e?function*(n){const r=e.bin(n);for(const[i,[s,o]]of e.entries())yield[r[i],{x1:s,x2:o}]}:function*(n){const r=t.bin(n);for(const[i,[s,o]]of t.entries())yield[r[i],{y1:s,y2:o}]}}function BT(e,t,n){return t=lr(t),r=>{var s;const i=e.map(()=>[]);for(const o of r)(s=i[qb(t,n[o])-1])==null||s.push(o);return i}}function Kot(e,t,n){const r=BT(e,t,n);return i=>{const s=r(i);for(let o=1,a=s.length;o<a;++o){const l=s[o-1],c=s[o];for(const u of l)c.push(u)}return s}}function Zot(e,t,n){const r=BT(e,t,n);return i=>{const s=r(i);for(let o=s.length-2;o>=0;--o){const a=s[o+1],l=s[o];for(const c of a)l.push(c)}return s}}function Z5(e,t){const n=(+e+ +t)/2;return e instanceof Date?new Date(n):n}const Jot={reduceIndex(e,t,{x1:n,x2:r}){return Z5(n,r)}},tat={reduceIndex(e,t,{y1:n,y2:r}){return Z5(n,r)}},eat={reduceIndex(e,t,{x1:n}){return n}},nat={reduceIndex(e,t,{x2:n}){return n}},rat={reduceIndex(e,t,{y1:n}){return n}},iat={reduceIndex(e,t,{y2:n}){return n}};function RT(e={}){return QL(e)?e:{...e,x:gt}}function LT(e={}){return KL(e)?e:{...e,y:gt}}function sat(e,t){if(t.length===1)return{data:e,facets:t};const n=e.length,r=new Uint8Array(n);let i=0;for(const a of t)for(const l of a)r[l]&&++i,r[l]=1;if(i===0)return{data:e,facets:t};e=Sp(e);const s=e[WL]=new Uint32Array(n+i);t=t.map(a=>Sp(a,Uint32Array));let o=n;r.fill(0);for(const a of t)for(let l=0,c=a.length;l<c;++l){const u=a[l];r[u]?(a[l]=o,e[o]=e[u],s[o]=u,++o):s[u]=u,r[u]=1}return{data:e,facets:t}}function J5(e={},t={}){arguments.length===1&&([e,t]=fd(e));const{y1:n,y:r=n,x:i,...s}=t,[o,a,l,c]=dd(r,i,"y","x",e,s);return{...o,y1:n,y:a,x1:l,x2:c,x:I1(l,c)}}function oat(e={},t={}){arguments.length===1&&([e,t]=fd(e));const{y1:n,y:r=n,x:i}=t,[s,o,a]=dd(r,i,"y","x",e,t);return{...s,y1:n,y:o,x:a}}function aat(e={},t={}){arguments.length===1&&([e,t]=fd(e));const{y1:n,y:r=n,x:i}=t,[s,o,,a]=dd(r,i,"y","x",e,t);return{...s,y1:n,y:o,x:a}}function t7(e={},t={}){arguments.length===1&&([e,t]=fd(e));const{x1:n,x:r=n,y:i,...s}=t,[o,a,l,c]=dd(r,i,"x","y",e,s);return{...o,x1:n,x:a,y1:l,y2:c,y:I1(l,c)}}function lat(e={},t={}){arguments.length===1&&([e,t]=fd(e));const{x1:n,x:r=n,y:i}=t,[s,o,a]=dd(r,i,"x","y",e,t);return{...s,x1:n,x:o,y:a}}function cat(e={},t={}){arguments.length===1&&([e,t]=fd(e));const{x1:n,x:r=n,y:i}=t,[s,o,,a]=dd(r,i,"x","y",e,t);return{...s,x1:n,x:o,y:a}}function CT({x:e,x1:t,x2:n,...r}={}){return r=ad(r,"y"),t===void 0&&n===void 0?J5({x:e,...r}):([t,n]=ZL(e,t,n),{...r,x1:t,x2:n})}function UT({y:e,y1:t,y2:n,...r}={}){return r=ad(r,"x"),t===void 0&&n===void 0?t7({y:e,...r}):([t,n]=ZL(e,t,n),{...r,y1:t,y2:n})}function fd(e){const{offset:t,order:n,reverse:r,...i}=e;return[{offset:t,order:n,reverse:r},i]}const uat={length:!0};function dd(e,t=z3,n,r,{offset:i,order:s,reverse:o},a){if(t===null)throw new Error(`stack requires ${r}`);const l=ll(a),[c,u]=er(e),[f,d]=kr(t),[h,p]=kr(t);return f.hint=h.hint=uat,i=fat(i),s=pat(s,i,r),[Ys(a,(g,v,y)=>{({data:g,facets:v}=sat(g,v));const m=e==null?void 0:u(T1(Ut(g,e),y==null?void 0:y[n])),b=Ut(g,t,Float64Array),w=Ut(g,l),S=s&&s(g,m,b,w),_=g.length,x=d(new Float64Array(_)),E=p(new Float64Array(_)),N=[];for(const I of v){const A=m?Array.from(Vo(I,k=>m[k]).values()):[I];if(S)for(const k of A)k.sort(S);for(const k of A){let R=0,T=0;o&&k.reverse();for(const M of k){const $=b[M];$<0?R=E[M]=(x[M]=R)+$:$>0?T=E[M]=(x[M]=T)+$:E[M]=x[M]=T}}N.push(A)}return i&&i(N,x,E,w),{data:g,facets:v}}),c,f,h]}function fat(e){if(e!=null){if(typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"expand":case"normalize":return dat;case"center":case"silhouette":return hat;case"wiggle":return n7}throw new Error(`unknown offset: ${e}`)}}function e7(e,t){let n=0,r=0;for(const i of e){const s=t[i];s<n&&(n=s),s>r&&(r=s)}return[n,r]}function dat(e,t,n){for(const r of e)for(const i of r){const[s,o]=e7(i,n);for(const a of i){const l=1/(o-s||1);t[a]=l*(t[a]-s),n[a]=l*(n[a]-s)}}}function hat(e,t,n){for(const r of e){for(const i of r){const[s,o]=e7(i,n);for(const a of i){const l=(o+s)/2;t[a]-=l,n[a]-=l}}r7(r,t,n)}i7(e,t,n)}function n7(e,t,n,r){for(const i of e){const s=new bc;let o=0;for(const a of i){let l=-1;const c=a.map(h=>Math.abs(n[h]-t[h])),u=a.map(h=>{l=r?r[h]:++l;const p=n[h]-t[h],g=s.has(l)?p-s.get(l):0;return s.set(l,p),g}),f=[0,...bG(u)];for(const h of a)t[h]+=o,n[h]+=o;const d=Ls(c);d&&(o-=Ls(c,(h,p)=>(u[p]/2+f[p])*h)/d)}r7(i,t,n)}i7(e,t,n)}function r7(e,t,n){const r=bn(e,i=>bn(i,s=>t[s]));for(const i of e)for(const s of i)t[s]-=r,n[s]-=r}function i7(e,t,n){const r=e.length;if(r===1)return;const i=e.map(a=>a.flat()),s=i.map(a=>(bn(a,l=>t[l])+$e(a,l=>n[l]))/2),o=bn(s);for(let a=0;a<r;a++){const l=o-s[a];for(const c of i[a])t[c]+=l,n[c]+=l}}function pat(e,t,n){if(e===void 0&&t===n7)return sN(bi);if(e!=null){if(typeof e=="string"){const r=e.startsWith("-"),i=r?S1:bi;switch((r?e.slice(1):e).toLowerCase()){case"value":case n:return yat(i);case"z":return mat(i);case"sum":return gat(i);case"appearance":return bat(i);case"inside-out":return sN(i)}return oN(HL(e))}if(typeof e=="function")return(e.length===1?oN:vat)(e);if(Array.isArray(e))return wat(e);throw new Error(`invalid order: ${e}`)}}function yat(e){return(t,n,r)=>(i,s)=>e(r[i],r[s])}function mat(e){return(t,n,r,i)=>(s,o)=>e(i[s],i[o])}function gat(e){return Rv(e,(t,n,r,i)=>o3(Yo(t),s=>Ls(s,o=>r[o]),s=>i[s]))}function bat(e){return Rv(e,(t,n,r,i)=>o3(Yo(t),s=>n[l3(s,o=>r[o])],s=>i[s]))}function sN(e){return Rv(e,(t,n,r,i)=>{const s=Yo(t),o=o3(s,f=>n[l3(f,d=>r[d])],f=>i[f]),a=Hu(s,f=>Ls(f,d=>r[d]),f=>i[f]),l=[],c=[];let u=0;for(const f of o)u<0?(u+=a.get(f),l.push(f)):(u-=a.get(f),c.push(f));return c.reverse().concat(l)})}function oN(e){return t=>{const n=Ut(t,e);return(r,i)=>bi(n[r],n[i])}}function vat(e){return t=>(n,r)=>e(t[n],t[r])}function wat(e){return Rv(bi,()=>e)}function Rv(e,t){return(n,r,i,s)=>{if(!s)throw new Error("missing channel: z");const o=new bc(t(n,r,i,s).map((a,l)=>[a,l]));return(a,l)=>e(o.get(s[a]),o.get(s[l]))}}const _at={ariaLabel:"area",strokeWidth:1,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class Lv extends ve{constructor(t,n={}){const{x1:r,y1:i,x2:s,y2:o,z:a,curve:l,tension:c}=n;super(t,{x1:{value:r,scale:"x"},y1:{value:i,scale:"y"},x2:{value:s,scale:"x",optional:!0},y2:{value:o,scale:"y",optional:!0},z:{value:ll(n),optional:!0}},n,_at),this.z=a,this.curve=NT(l,c)}filter(t){return t}render(t,n,r,i,s){const{x1:o,y1:a,x2:l=o,y2:c=a}=r;return ee("svg:g",s).call(Ne,this,i,s).call(be,this,n,0,0).call(u=>u.selectAll().data(yC(t,[o,a,l,c],this,r)).enter().append("path").call(Te,this).call(A1,this,r).attr("d",O3().curve(this.curve).defined(f=>f>=0).x0(f=>o[f]).y0(f=>a[f]).x1(f=>l[f]).y1(f=>c[f]))).node()}}function Sat(e,t){return t===void 0?Uf(e,{x:gy,y:_p}):new Lv(e,t)}function Ap(e,t){const{y:n=Ir,...r}=kT(t);return new Lv(e,CT(RT({...r,y1:n,y2:void 0})))}function Uf(e,t){const{x:n=Ir,...r}=DT(t);return new Lv(e,UT(LT({...r,x1:n,x2:void 0})))}const xat={ariaLabel:"link",fill:"none",stroke:"currentColor",strokeMiterlimit:1};class s7 extends ve{constructor(t,n={}){const{x1:r,y1:i,x2:s,y2:o,curve:a,tension:l}=n;super(t,{x1:{value:r,scale:"x"},y1:{value:i,scale:"y"},x2:{value:s,scale:"x",optional:!0},y2:{value:o,scale:"y",optional:!0}},n,xat),this.curve=W5(a,l),ld(this,n)}project(t,n,r){this.curve!==Cf&&super.project(t,n,r)}render(t,n,r,i,s){const{x1:o,y1:a,x2:l=o,y2:c=a}=r,{curve:u}=this;return ee("svg:g",s).call(Ne,this,i,s).call(be,this,n).call(f=>f.selectAll().data(t).enter().append("path").call(Te,this).attr("d",u===Cf&&s.projection?Iat(s.projection,o,a,l,c):d=>{const h=_o(),p=u(h);return p.lineStart(),p.point(o[d],a[d]),p.point(l[d],c[d]),p.lineEnd(),h}).call(fn,this,r).call(Ey,this,r,s)).node()}}function Iat(e,t,n,r,i){const s=ol(e);return t=lr(t),n=lr(n),r=lr(r),i=lr(i),o=>s({type:"LineString",coordinates:[[t[o],n[o]],[r[o],i[o]]]})}function o7(e,{x:t,x1:n,x2:r,y:i,y1:s,y2:o,...a}={}){return[n,r]=k1(t,n,r),[s,o]=k1(i,s,o),new s7(e,{...a,x1:n,x2:r,y1:s,y2:o})}function k1(e,t,n){if(e===void 0){if(t===void 0){if(n!==void 0)return[n]}else if(n===void 0)return[t]}else{if(t===void 0)return n===void 0?[e]:[e,n];if(n===void 0)return[e,t]}return[t,n]}const Tat={ariaLabel:"arrow",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeMiterlimit:1,strokeWidth:1.5};class a7 extends ve{constructor(t,n={}){const{x1:r,y1:i,x2:s,y2:o,bend:a=0,headAngle:l=60,headLength:c=8,inset:u=0,insetStart:f=u,insetEnd:d=u,sweep:h}=n;super(t,{x1:{value:r,scale:"x"},y1:{value:i,scale:"y"},x2:{value:s,scale:"x",optional:!0},y2:{value:o,scale:"y",optional:!0}},n,Tat),this.bend=a===!0?22.5:Math.max(-90,Math.min(90,a)),this.headAngle=+l,this.headLength=+c,this.insetStart=+f,this.insetEnd=+d,this.sweep=Eat(h)}render(t,n,r,i,s){const{x1:o,y1:a,x2:l=o,y2:c=a,SW:u}=r,{strokeWidth:f,bend:d,headAngle:h,headLength:p,insetStart:g,insetEnd:v}=this,y=u?w=>u[w]:Ur(f===void 0?1:f),m=h*M1/2,b=p/1.5;return ee("svg:g",s).call(Ne,this,i,s).call(be,this,n).call(w=>w.selectAll().data(t).enter().append("path").call(Te,this).attr("d",S=>{let _=o[S],x=a[S],E=l[S],N=c[S];const I=Math.hypot(E-_,N-x);if(I<=g+v)return null;let A=Math.atan2(N-x,E-_);const k=Math.min(b*y(S),I/3),R=this.sweep(_,x,E,N)*d*M1,T=Math.hypot(I/Math.tan(R),I)/2;if(g||v)if(T<1e5){const X=Math.sign(R),[tt,Z]=Aat([_,x],[E,N],T,X);if(g&&([_,x]=aN([tt,Z,T],[_,x,g],-X*Math.sign(g))),v){const[Y,Q]=aN([tt,Z,T],[E,N,v],X*Math.sign(v));A+=Math.atan2(Q-Z,Y-tt)-Math.atan2(N-Z,E-tt),E=Y,N=Q}}else{const X=E-_,tt=N-x,Z=Math.hypot(X,tt);g&&(_+=X/Z*g,x+=tt/Z*g),v&&(E-=X/Z*v,N-=tt/Z*v)}const M=A+R,$=M+m,B=M-m,O=E-k*Math.cos($),C=N-k*Math.sin($),F=E-k*Math.cos(B),P=N-k*Math.sin(B),z=T<1e5?`A${T},${T} 0,0,${R>0?1:0} `:"L",H=k?`M${O},${C}L${E},${N}L${F},${P}`:"";return`M${_},${x}${z}${E},${N}${H}`}).call(fn,this,r)).node()}}function Eat(e=1){if(typeof e=="number")return Ur(Math.sign(e));if(typeof e=="function")return(t,n,r,i)=>Math.sign(e(t,n,r,i));switch(Yr(e,"sweep",["+x","-x","+y","-y"])){case"+x":return(t,n,r)=>Pe(t,r);case"-x":return(t,n,r)=>gc(t,r);case"+y":return(t,n,r,i)=>Pe(n,i);case"-y":return(t,n,r,i)=>gc(n,i)}}function Aat([e,t],[n,r],i,s){const o=n-e,a=r-t,l=Math.hypot(o,a),c=s*Math.sqrt(i*i-l*l/4)/l;return[(e+n)/2-a*c,(t+r)/2+o*c]}function aN([e,t,n],[r,i,s],o){const a=r-e,l=i-t,c=Math.hypot(a,l),u=(a*a+l*l-s*s+n*n)/(2*c),f=o*Math.sqrt(n*n-u*u);return[e+(a*u+l*f)/c,t+(l*u-a*f)/c]}function Mat(e,{x:t,x1:n,x2:r,y:i,y1:s,y2:o,...a}={}){return[n,r]=k1(t,n,r),[s,o]=k1(i,s,o),new a7(e,{...a,x1:n,x2:r,y1:s,y2:o})}class PT extends ve{constructor(t,n,r={},i){super(t,n,r,i);const{inset:s=0,insetTop:o=s,insetRight:a=s,insetBottom:l=s,insetLeft:c=s,rx:u,ry:f}=r;this.insetTop=jt(o),this.insetRight=jt(a),this.insetBottom=jt(l),this.insetLeft=jt(c),this.rx=Ve(u,"auto"),this.ry=Ve(f,"auto")}render(t,n,r,i,s){const{rx:o,ry:a}=this;return ee("svg:g",s).call(Ne,this,i,s).call(this._transform,this,n).call(l=>l.selectAll().data(t).enter().append("rect").call(Te,this).attr("x",this._x(n,r,i)).attr("width",this._width(n,r,i)).attr("y",this._y(n,r,i)).attr("height",this._height(n,r,i)).call(ut,"rx",o).call(ut,"ry",a).call(fn,this,r)).node()}_x(t,{x:n},{marginLeft:r}){const{insetLeft:i}=this;return n?s=>n[s]+i:r+i}_y(t,{y:n},{marginTop:r}){const{insetTop:i}=this;return n?s=>n[s]+i:r+i}_width({x:t},{x:n},{marginRight:r,marginLeft:i,width:s}){const{insetLeft:o,insetRight:a}=this,l=n&&t?t.bandwidth():s-r-i;return Math.max(0,l-o-a)}_height({y:t},{y:n},{marginTop:r,marginBottom:i,height:s}){const{insetTop:o,insetBottom:a}=this,l=n&&t?t.bandwidth():s-r-i;return Math.max(0,l-o-a)}}const l7={ariaLabel:"bar"};class c7 extends PT{constructor(t,n={}){const{x1:r,x2:i,y:s}=n;super(t,{x1:{value:r,scale:"x"},x2:{value:i,scale:"x"},y:{value:s,scale:"y",type:"band",optional:!0}},n,l7)}_transform(t,n,{x:r}){t.call(be,n,{x:r},0,0)}_x({x:t},{x1:n,x2:r},{marginLeft:i}){const{insetLeft:s}=this;return ui(t)?i+s:o=>Math.min(n[o],r[o])+s}_width({x:t},{x1:n,x2:r},{marginRight:i,marginLeft:s,width:o}){const{insetLeft:a,insetRight:l}=this;return ui(t)?o-i-s-a-l:c=>Math.max(0,Math.abs(r[c]-n[c])-a-l)}}class u7 extends PT{constructor(t,n={}){const{x:r,y1:i,y2:s}=n;super(t,{y1:{value:i,scale:"y"},y2:{value:s,scale:"y"},x:{value:r,scale:"x",type:"band",optional:!0}},n,l7)}_transform(t,n,{y:r}){t.call(be,n,{y:r},0,0)}_y({y:t},{y1:n,y2:r},{marginTop:i}){const{insetTop:s}=this;return ui(t)?i+s:o=>Math.min(n[o],r[o])+s}_height({y:t},{y1:n,y2:r},{marginTop:i,marginBottom:s,height:o}){const{insetTop:a,insetBottom:l}=this;return ui(t)?o-i-s-a-l:c=>Math.max(0,Math.abs(r[c]-n[c])-a-l)}}function Yl(e,t={}){return wv(t)||(t={...t,y:Ir,x2:gt}),new c7(e,CT(XC(RT(t))))}function ql(e,t={}){return wv(t)||(t={...t,x:Ir,y2:gt}),new u7(e,UT(QC(LT(t))))}const $at={ariaLabel:"cell"};class Cv extends PT{constructor(t,{x:n,y:r,...i}={}){super(t,{x:{value:n,scale:"x",type:"band",optional:!0},y:{value:r,scale:"y",type:"band",optional:!0}},i,$at)}_transform(t,n){t.call(be,n,{},0,0)}}function Ou(e,{x:t,y:n,...r}={}){return[t,n]=Ki(t,n),new Cv(e,{...r,x:t,y:n})}function Nat(e,{x:t=Ir,fill:n,stroke:r,...i}={}){return n===void 0&&br(r)[0]===void 0&&(n=gt),new Cv(e,{...i,x:t,fill:n,stroke:r})}function Dat(e,{y:t=Ir,fill:n,stroke:r,...i}={}){return n===void 0&&br(r)[0]===void 0&&(n=gt),new Cv(e,{...i,y:t,fill:n,stroke:r})}const kat={ariaLabel:"dot",fill:"none",stroke:"currentColor",strokeWidth:1.5};function zT(e){return e.sort===void 0&&e.reverse===void 0?oC({channel:"-r"},e):e}class Uv extends ve{constructor(t,n={}){const{x:r,y:i,r:s,rotate:o,symbol:a=wp,frameAnchor:l}=n,[c,u]=Ke(o,0),[f,d]=Hrt(a),[h,p]=Ke(s,f==null?3:4.5);super(t,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},r:{value:h,scale:"r",filter:Ao,optional:!0},rotate:{value:c,optional:!0},symbol:{value:f,scale:"auto",optional:!0}},zT(n),kat),this.r=p,this.rotate=u,this.symbol=d,this.frameAnchor=wy(l);const{channels:g}=this,{symbol:v}=g;if(v){const{fill:y,stroke:m}=g;v.hint={fill:y?y.value===v.value?"color":"currentColor":this.fill??"currentColor",stroke:m?m.value===v.value?"color":"currentColor":this.stroke??"none"}}}render(t,n,r,i,s){const{x:o,y:a}=n,{x:l,y:c,r:u,rotate:f,symbol:d}=r,{r:h,rotate:p,symbol:g}=this,[v,y]=qs(this,i),m=g===wp,b=u?void 0:h*h*Math.PI;return bv(h)&&(t=[]),ee("svg:g",s).call(Ne,this,i,s).call(be,this,{x:l&&o,y:c&&a}).call(w=>w.selectAll().data(t).enter().append(m?"circle":"path").call(Te,this).call(m?S=>{S.attr("cx",l?_=>l[_]:v).attr("cy",c?_=>c[_]:y).attr("r",u?_=>u[_]:h)}:S=>{S.attr("transform",kv`translate(${l?_=>l[_]:v},${c?_=>c[_]:y})${f?_=>` rotate(${f[_]})`:p?` rotate(${p})`:""}`).attr("d",u&&d?_=>{const x=_o();return d[_].draw(x,u[_]*u[_]*Math.PI),x}:u?_=>{const x=_o();return g.draw(x,u[_]*u[_]*Math.PI),x}:d?_=>{const x=_o();return d[_].draw(x,b),x}:(()=>{const _=_o();return g.draw(_,b),_})())}).call(fn,this,r)).node()}}function fl(e,{x:t,y:n,...r}={}){return r.frameAnchor===void 0&&([t,n]=Ki(t,n)),new Uv(e,{...r,x:t,y:n})}function Oat(e,{x:t=gt,...n}={}){return new Uv(e,ZC({...n,x:t}))}function Fat(e,{y:t=gt,...n}={}){return new Uv(e,KC({...n,y:t}))}function Bat(e,t){return fl(e,{...t,symbol:"circle"})}function Rat(e,t){return fl(e,{...t,symbol:"hexagon"})}const Lat={ariaLabel:"line",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class Pv extends ve{constructor(t,n={}){const{x:r,y:i,z:s,curve:o,tension:a}=n;super(t,{x:{value:r,scale:"x"},y:{value:i,scale:"y"},z:{value:ll(n),optional:!0}},n,Lat),this.z=s,this.curve=W5(o,a),ld(this,n)}filter(t){return t}project(t,n,r){this.curve!==Cf&&super.project(t,n,r)}render(t,n,r,i,s){const{x:o,y:a}=r,{curve:l}=this;return ee("svg:g",s).call(Ne,this,i,s).call(be,this,n).call(c=>c.selectAll().data(yC(t,[o,a],this,r)).enter().append("path").call(Te,this).call(A1,this,r).call(Pst,this,r,s).attr("d",l===Cf&&s.projection?Cat(s.projection,o,a):yL().curve(l).defined(u=>u>=0).x(u=>o[u]).y(u=>a[u]))).node()}}function Cat(e,t,n){const r=ol(e);return t=lr(t),n=lr(n),i=>{let s=[];const o=[s];for(const a of i)a===-1?(s=[],o.push(s)):s.push([t[a],n[a]]);return r({type:"MultiLineString",coordinates:o})}}function jT(e,{x:t,y:n,...r}={}){return[t,n]=Ki(t,n),new Pv(e,{...r,x:t,y:n})}function Mp(e,{x:t=gt,y:n=Ir,...r}={}){return new Pv(e,kT({...r,x:t,y:n}))}function $p(e,{x:t=Ir,y:n=gt,...r}={}){return new Pv(e,DT({...r,x:t,y:n}))}const Uat={ariaLabel:"rect"};class zv extends ve{constructor(t,n={}){const{x1:r,y1:i,x2:s,y2:o,inset:a=0,insetTop:l=a,insetRight:c=a,insetBottom:u=a,insetLeft:f=a,rx:d,ry:h}=n;super(t,{x1:{value:r,scale:"x",optional:!0},y1:{value:i,scale:"y",optional:!0},x2:{value:s,scale:"x",optional:!0},y2:{value:o,scale:"y",optional:!0}},n,Uat),this.insetTop=jt(l),this.insetRight=jt(c),this.insetBottom=jt(u),this.insetLeft=jt(f),this.rx=Ve(d,"auto"),this.ry=Ve(h,"auto")}render(t,n,r,i,s){const{x:o,y:a}=n,{x1:l,y1:c,x2:u,y2:f}=r,{marginTop:d,marginRight:h,marginBottom:p,marginLeft:g,width:v,height:y}=i,{projection:m}=s,{insetTop:b,insetRight:w,insetBottom:S,insetLeft:_,rx:x,ry:E}=this;return ee("svg:g",s).call(Ne,this,i,s).call(be,this,{x:l&&u&&o,y:c&&f&&a},0,0).call(N=>N.selectAll().data(t).enter().append("rect").call(Te,this).attr("x",l&&u&&(m||!ui(o))?I=>Math.min(l[I],u[I])+_:g+_).attr("y",c&&f&&(m||!ui(a))?I=>Math.min(c[I],f[I])+b:d+b).attr("width",l&&u&&(m||!ui(o))?I=>Math.max(0,Math.abs(u[I]-l[I])-_-w):v-h-g-w-_).attr("height",c&&f&&(m||!ui(a))?I=>Math.max(0,Math.abs(c[I]-f[I])-b-S):y-d-p-b-S).call(ut,"rx",x).call(ut,"ry",E).call(fn,this,r)).node()}}function VT(e,t){return new zv(e,HC(GC(t)))}function O1(e,t={}){return wv(t)||(t={...t,y:Ir,x2:gt,interval:1}),new zv(e,CT(GC(RT(t))))}function F1(e,t={}){return wv(t)||(t={...t,x:Ir,y2:gt,interval:1}),new zv(e,UT(HC(LT(t))))}function f7(e,t){t=zat(t);const{x:n,y:r,color:i,size:s}=t,o=O0(e,n),a=O0(e,r),l=O0(e,i),c=O0(e,s);let{fx:u,fy:f,x:{value:d,reduce:h,zero:p,...g},y:{value:v,reduce:y,zero:m,...b},color:{value:w,color:S,reduce:_},size:{value:x,reduce:E},mark:N}=t;if(h===void 0&&(h=y==null&&d==null&&x==null&&v!=null?"count":null),y===void 0&&(y=h==null&&v==null&&x==null&&d!=null?"count":null),E===void 0&&x==null&&_==null&&h==null&&y==null&&(d==null||je(o))&&(v==null||je(a))&&(E="count"),p===void 0&&(p=F0(h)?!0:void 0),m===void 0&&(m=F0(y)?!0:void 0),d==null&&v==null)throw new Error("must specify x or y");if(h!=null&&v==null)throw new Error("reducing x requires y");if(y!=null&&d==null)throw new Error("reducing y requires x");N===void 0&&(N=x!=null||E!=null?"dot":F0(h)||F0(y)||_!=null?"bar":d!=null&&v!=null?je(o)||je(a)||h==null&&y==null&&!Pd(o)&&!Pd(a)?"dot":"line":d!=null||v!=null?"rule":null);let I,A,k;switch(N){case"dot":k=fl,A="stroke";break;case"line":k=o&&a||h!=null||y!=null?m||y!=null||o&&Pd(o)?$p:p||h!=null||a&&Pd(a)?Mp:jT:o?Mp:$p,A="stroke",cN(l)&&(I=null);break;case"area":k=!(m||y!=null)&&(p||h!=null||a&&Pd(a))?Ap:Uf,A="fill",cN(l)&&(I=null);break;case"rule":k=o?Va:Ya,A="stroke";break;case"bar":k=h!=null?je(a)?lN(h)&&o&&je(o)?Ou:Yl:O1:y!=null?je(o)?lN(y)&&a&&je(a)?Ou:ql:F1:_!=null||E!=null?o&&je(o)&&a&&je(a)?Ou:o&&je(o)?ql:a&&je(a)?Yl:VT:o&&ku(o)&&!(a&&ku(a))?Yl:a&&ku(a)&&!(o&&ku(o))?ql:Ou,A="fill";break;default:throw new Error(`invalid mark: ${N}`)}let R={fx:u,fy:f,x:o??void 0,y:a??void 0,[A]:l??S,z:I,r:c??void 0,tip:!0},T,M={[A]:_??void 0,r:E??void 0};if(h!=null&&y!=null)throw new Error("cannot reduce both x and y");return y!=null?(M.y=y,T=je(o)?xp:pa):h!=null?(M.x=h,T=je(a)?Ip:ya):(_!=null||E!=null)&&(o&&a?T=je(o)&&je(a)?tT:je(o)?ya:je(a)?pa:Fl:o?T=je(o)?xp:pa:a&&(T=je(a)?Ip:ya)),(T===Fl||T===pa)&&(R.x={value:o,...g}),(T===Fl||T===ya)&&(R.y={value:a,...b}),p===void 0&&(p=o&&!(T===Fl||T===pa)&&(k===Yl||k===Ap||k===O1||k===Ya)),m===void 0&&(m=a&&!(T===Fl||T===ya)&&(k===ql||k===Uf||k===F1||k===Va)),{fx:u??null,fy:f??null,x:{value:d??null,reduce:h??null,zero:!!p,...g},y:{value:v??null,reduce:y??null,zero:!!m,...b},color:{value:w??null,reduce:_??null,...S!==void 0&&{color:S}},size:{value:x??null,reduce:E??null},mark:N,markImpl:uN[k],markOptions:R,transformImpl:uN[T],transformOptions:M,colorMode:A}}function Pat(e,t){const n=f7(e,t),{fx:r,fy:i,x:{zero:s},y:{zero:o},markOptions:a,transformOptions:l,colorMode:c}=n,u=tx[n.markImpl],f=tx[n.transformImpl],d=r!=null||i!=null?AT({strokeOpacity:.1}):null,h=[s?Va([0]):null,o?Ya([0]):null],p=u(e,f?f(l,a):a);return c==="stroke"?Hi(d,h,p):Hi(d,p,h)}function Pd(e){let t,n;for(const r of e){if(r==null)continue;if(t===void 0){t=r;continue}const i=Math.sign(Pe(t,r));if(i){if(n!==void 0&&i!==n)return!1;t=r,n=i}}return!0}function zat({x:e,y:t,color:n,size:r,fx:i,fy:s,mark:o}={}){return ds(e)||(e=Gc(e)),ds(t)||(t=Gc(t)),ds(n)||(n=vy(n)?{color:n}:Gc(n)),ds(r)||(r=Gc(r)),ds(i)&&({value:i}=Gc(i)),ds(s)&&({value:s}=Gc(s)),o!=null&&(o=`${o}`.toLowerCase()),{x:e,y:t,color:n,size:r,fx:i,fy:s,mark:o}}function O0(e,t){const n=Ut(e,t.value);return n&&(n.label=qo(t.value)),n}function Gc(e){return jat(e)?{reduce:e}:{value:e}}function F0(e){return/^(?:distinct|count|sum|proportion)$/i.test(e)}function lN(e){return/^(?:first|last|mode)$/i.test(e)}function jat(e){if(e==null)return!1;if(typeof e.reduceIndex=="function"||typeof e.reduce=="function"&&_i(e)||/^p\d{2}$/i.test(e))return!0;switch(`${e}`.toLowerCase()){case"first":case"last":case"count":case"distinct":case"sum":case"proportion":case"proportion-facet":case"deviation":case"min":case"min-index":case"max":case"max-index":case"mean":case"median":case"variance":case"mode":return!0}return!1}function cN(e){return e?new ny(e).size>e.length>>1:!1}const tx={dot:fl,line:jT,lineX:Mp,lineY:$p,areaX:Ap,areaY:Uf,ruleX:Va,ruleY:Ya,barX:Yl,barY:ql,rect:VT,rectX:O1,rectY:F1,cell:Ou,bin:Fl,binX:pa,binY:ya,group:tT,groupX:xp,groupY:Ip},uN=Object.fromEntries(Object.entries(tx).map(([e,t])=>[t,e]));function YT(e,t={}){let{x:n,x1:r,x2:i}=t;n===void 0&&r===void 0&&i===void 0&&(t={...t,x:n=gt});const s={};return n!=null&&(s.x=e),r!=null&&(s.x1=e),i!=null&&(s.x2=e),Uo(s,t)}function qT(e,t={}){let{y:n,y1:r,y2:i}=t;n===void 0&&r===void 0&&i===void 0&&(t={...t,y:n=gt});const s={};return n!=null&&(s.y=e),r!=null&&(s.y1=e),i!=null&&(s.y2=e),Uo(s,t)}function Uo(e={},t={}){const n=ll(t),r=Object.entries(e).map(([i,s])=>{const o=JL(i,t);if(o==null)throw new Error(`missing channel: ${i}`);const[a,l]=kr(o);return{key:i,input:o,output:a,setOutput:l,map:Vat(s)}});return{...Ys(t,(i,s)=>{const o=Ut(i,n),a=r.map(({input:c})=>Ut(i,c)),l=r.map(({setOutput:c})=>c(new Array(i.length)));for(const c of s)for(const u of o?Vo(c,f=>o[f]).values():[c])r.forEach(({map:f},d)=>f.mapIndex(u,a[d],l[d]));return{data:i,facets:s}}),...Object.fromEntries(r.map(({key:i,output:s})=>[i,s]))}}function Vat(e){if(e==null)throw new Error("missing map");if(typeof e.mapIndex=="function")return e;if(typeof e.map=="function"&&_i(e))return Yat(e);if(typeof e=="function")return A_(Y3(e));switch(`${e}`.toLowerCase()){case"cumsum":return Wat;case"rank":return A_((t,n)=>JO(t,r=>n[r]));case"quantile":return A_((t,n)=>qat(t,r=>n[r]))}throw new Error(`invalid map: ${e}`)}function Yat(e){return console.warn("deprecated map interface; implement mapIndex instead."),{mapIndex:e.map.bind(e)}}function qat(e,t){const n=Wb(e,t)-1;return JO(e,t).map(r=>r/n)}function A_(e){return{mapIndex(t,n,r){const i=e(t,n);if(i.length!==t.length)throw new Error("map function returned a mismatched length");for(let s=0,o=t.length;s<o;++s)r[t[s]]=i[s]}}}const Wat={mapIndex(e,t,n){let r=0;for(const i of e)n[i]=r+=t[i]}};function Hat(e={},t){return arguments.length===1&&(t=e),YT(jv(e),t)}function Gat(e={},t){return arguments.length===1&&(t=e),qT(jv(e),t)}function jv(e={}){typeof e=="number"&&(e={k:e});let{k:t,reduce:n,shift:r,anchor:i,strict:s}=e;if(i===void 0&&r!==void 0&&(i=Qat(r),Mo(`Warning: the shift option is deprecated; please use anchor "${i}" instead.`)),!((t=Math.floor(t))>0))throw new Error(`invalid k: ${t}`);return Kat(n)(t,Xat(i,t),s)}function Xat(e="middle",t){switch(`${e}`.toLowerCase()){case"middle":return t-1>>1;case"start":return 0;case"end":return t-1}throw new Error(`invalid anchor: ${e}`)}function Qat(e){switch(`${e}`.toLowerCase()){case"centered":return"middle";case"leading":return"start";case"trailing":return"end"}throw new Error(`invalid shift: ${e}`)}function Kat(e="mean"){if(typeof e=="string"){if(/^p\d{2}$/i.test(e))return B0(j3(e));switch(e.toLowerCase()){case"deviation":return B0(ey);case"max":return R0((t,n)=>$e(t,r=>n[r]));case"mean":return Zat;case"median":return B0(fp);case"min":return R0((t,n)=>bn(t,r=>n[r]));case"mode":return R0((t,n)=>ZO(t,r=>n[r]));case"sum":return d7;case"variance":return B0(r3);case"difference":return elt;case"ratio":return nlt;case"first":return rlt;case"last":return ilt}}if(typeof e!="function")throw new Error(`invalid reduce: ${e}`);return R0(Y3(e))}function B0(e){return(t,n,r)=>r?{mapIndex(i,s,o){const a=c=>s[c]==null?NaN:+s[c];let l=0;for(let c=0;c<t-1;++c)isNaN(a(c))&&++l;for(let c=0,u=i.length-t+1;c<u;++c)isNaN(a(c+t-1))&&++l,o[i[c+n]]=l===0?e(sc(i,c,c+t),a):NaN,isNaN(a(c))&&--l}}:{mapIndex(i,s,o){const a=l=>s[l]==null?NaN:+s[l];for(let l=-n;l<0;++l)o[i[l+n]]=e(sc(i,0,l+t),a);for(let l=0,c=i.length-n;l<c;++l)o[i[l+n]]=e(sc(i,l,l+t),a)}}}function R0(e){return(t,n,r)=>r?{mapIndex(i,s,o){let a=0;for(let l=0;l<t-1;++l)a+=Gn(s[i[l]]);for(let l=0,c=i.length-t+1;l<c;++l)a+=Gn(s[i[l+t-1]]),a===t&&(o[i[l+n]]=e(sc(i,l,l+t),s)),a-=Gn(s[i[l]])}}:{mapIndex(i,s,o){for(let a=-n;a<0;++a)o[i[a+n]]=e(sc(i,0,a+t),s);for(let a=0,l=i.length-n;a<l;++a)o[i[a+n]]=e(sc(i,a,a+t),s)}}}function d7(e,t,n){return n?{mapIndex(r,i,s){let o=0,a=0;for(let l=0;l<e-1;++l){const c=i[r[l]];c===null||isNaN(c)?++o:a+=+c}for(let l=0,c=r.length-e+1;l<c;++l){const u=i[r[l]],f=i[r[l+e-1]];f===null||isNaN(f)?++o:a+=+f,s[r[l+t]]=o===0?a:NaN,u===null||isNaN(u)?--o:a-=+u}}}:{mapIndex(r,i,s){let o=0;const a=r.length;for(let l=0,c=Math.min(a,e-t-1);l<c;++l)o+=+i[r[l]]||0;for(let l=-t,c=a-t;l<c;++l)o+=+i[r[l+e-1]]||0,s[r[l+t]]=o,o-=+i[r[l]]||0}}}function Zat(e,t,n){if(n){const r=d7(e,t,n);return{mapIndex(i,s,o){r.mapIndex(i,s,o);for(let a=0,l=i.length-e+1;a<l;++a)o[i[a+t]]/=e}}}else return{mapIndex(r,i,s){let o=0,a=0;const l=r.length;for(let c=0,u=Math.min(l,e-t-1);c<u;++c){let f=i[r[c]];f!==null&&!isNaN(f=+f)&&(o+=f,++a)}for(let c=-t,u=l-t;c<u;++c){let f=i[r[c+e-1]],d=i[r[c]];f!==null&&!isNaN(f=+f)&&(o+=f,++a),s[r[c+t]]=o/a,d!==null&&!isNaN(d=+d)&&(o-=d,--a)}}}}function Jat(e,t,n,r){for(let i=n+r;n<i;++n){const s=e[t[n]];if(Gn(s))return s}}function tlt(e,t,n,r){for(let i=n+r-1;i>=n;--i){const s=e[t[i]];if(Gn(s))return s}}function h7(e,t,n,r){for(let i=n+r;n<i;++n){let s=e[t[n]];if(s!==null&&!isNaN(s=+s))return s}}function p7(e,t,n,r){for(let i=n+r-1;i>=n;--i){let s=e[t[i]];if(s!==null&&!isNaN(s=+s))return s}}function elt(e,t,n){return n?{mapIndex(r,i,s){for(let o=0,a=r.length-e;o<a;++o){const l=i[r[o]],c=i[r[o+e-1]];s[r[o+t]]=l===null||c===null?NaN:c-l}}}:{mapIndex(r,i,s){for(let o=-t,a=r.length-e+t+1;o<a;++o)s[r[o+t]]=p7(i,r,o,e)-h7(i,r,o,e)}}}function nlt(e,t,n){return n?{mapIndex(r,i,s){for(let o=0,a=r.length-e;o<a;++o){const l=i[r[o]],c=i[r[o+e-1]];s[r[o+t]]=l===null||c===null?NaN:c/l}}}:{mapIndex(r,i,s){for(let o=-t,a=r.length-e+t+1;o<a;++o)s[r[o+t]]=p7(i,r,o,e)/h7(i,r,o,e)}}}function rlt(e,t,n){return n?{mapIndex(r,i,s){for(let o=0,a=r.length-e;o<a;++o)s[r[o+t]]=i[r[o]]}}:{mapIndex(r,i,s){for(let o=-t,a=r.length-e+t+1;o<a;++o)s[r[o+t]]=Jat(i,r,o,e)}}}function ilt(e,t,n){return n?{mapIndex(r,i,s){for(let o=0,a=r.length-e;o<a;++o)s[r[o+t]]=i[r[o+e-1]]}}:{mapIndex(r,i,s){for(let o=-t,a=r.length-e+t+1;o<a;++o)s[r[o+t]]=tlt(i,r,o,e)}}}const $o={n:20,k:2,color:"currentColor",opacity:.2,strict:!0,anchor:"end"};function slt(e,{x:t=gt,y:n,k:r=$o.k,color:i=$o.color,opacity:s=$o.opacity,fill:o=i,fillOpacity:a=s,stroke:l=i,strokeOpacity:c,strokeWidth:u,...f}={}){return Hi(We(o)?null:Ap(e,Uo({x1:oc({k:-r,...f}),x2:oc({k:r,...f})},{x1:t,x2:t,y:n,fill:o,fillOpacity:a,...f})),We(l)?null:Mp(e,Uo({x:oc(f)},{x:t,y:n,stroke:l,strokeOpacity:c,strokeWidth:u,...f})))}function olt(e,{x:t,y:n=gt,k:r=$o.k,color:i=$o.color,opacity:s=$o.opacity,fill:o=i,fillOpacity:a=s,stroke:l=i,strokeOpacity:c,strokeWidth:u,...f}={}){return Hi(We(o)?null:Uf(e,Uo({y1:oc({k:-r,...f}),y2:oc({k:r,...f})},{x:t,y1:n,y2:n,fill:o,fillOpacity:a,...f})),We(l)?null:$p(e,Uo({y:oc(f)},{x:t,y:n,stroke:l,strokeOpacity:c,strokeWidth:u,...f})))}function oc({n:e=$o.n,k:t=0,strict:n=$o.strict,anchor:r=$o.anchor}={}){return jv({k:e,reduce:i=>Hb(i)+t*(ey(i)||0),strict:n,anchor:r})}const alt={ariaLabel:"tick",fill:null,stroke:"currentColor"};class y7 extends ve{constructor(t,n,r){super(t,n,r,alt),ld(this,r)}render(t,n,r,i,s){return ee("svg:g",s).call(Ne,this,i,s).call(this._transform,this,n).call(o=>o.selectAll().data(t).enter().append("line").call(Te,this).attr("x1",this._x1(n,r,i)).attr("x2",this._x2(n,r,i)).attr("y1",this._y1(n,r,i)).attr("y2",this._y2(n,r,i)).call(fn,this,r).call(Ey,this,r,s)).node()}}class m7 extends y7{constructor(t,n={}){const{x:r,y:i,inset:s=0,insetTop:o=s,insetBottom:a=s}=n;super(t,{x:{value:r,scale:"x"},y:{value:i,scale:"y",type:"band",optional:!0}},n),this.insetTop=jt(o),this.insetBottom=jt(a)}_transform(t,n,{x:r}){t.call(be,n,{x:r},xn,0)}_x1(t,{x:n}){return r=>n[r]}_x2(t,{x:n}){return r=>n[r]}_y1({y:t},{y:n},{marginTop:r}){const{insetTop:i}=this;return n&&t?s=>n[s]+i:r+i}_y2({y:t},{y:n},{height:r,marginBottom:i}){const{insetBottom:s}=this;return n&&t?o=>n[o]+t.bandwidth()-s:r-i-s}}class g7 extends y7{constructor(t,n={}){const{x:r,y:i,inset:s=0,insetRight:o=s,insetLeft:a=s}=n;super(t,{y:{value:i,scale:"y"},x:{value:r,scale:"x",type:"band",optional:!0}},n),this.insetRight=jt(o),this.insetLeft=jt(a)}_transform(t,n,{y:r}){t.call(be,n,{y:r},0,xn)}_x1({x:t},{x:n},{marginLeft:r}){const{insetLeft:i}=this;return n&&t?s=>n[s]+i:r+i}_x2({x:t},{x:n},{width:r,marginRight:i}){const{insetRight:s}=this;return n&&t?o=>n[o]+t.bandwidth()-s:r-i-s}_y1(t,{y:n}){return r=>n[r]}_y2(t,{y:n}){return r=>n[r]}}function b7(e,{x:t=gt,...n}={}){return new m7(e,{...n,x:t})}function v7(e,{y:t=gt,...n}={}){return new g7(e,{...n,y:t})}function llt(e,{x:t=gt,y:n=null,fill:r="#ccc",fillOpacity:i,stroke:s="currentColor",strokeOpacity:o,strokeWidth:a=2,sort:l,...c}={}){const u=n!=null?Ip:J3;return Hi(Ya(e,u({x1:WT,x2:HT},{x:t,y:n,stroke:s,strokeOpacity:o,...c})),Yl(e,u({x1:"p25",x2:"p75"},{x:t,y:n,fill:r,fillOpacity:i,...c})),b7(e,u({x:"p50"},{x:t,y:n,stroke:s,strokeOpacity:o,strokeWidth:a,sort:l,...c})),fl(e,Uo({x:w7},{x:t,y:n,z:n,stroke:s,strokeOpacity:o,...c})))}function clt(e,{y:t=gt,x:n=null,fill:r="#ccc",fillOpacity:i,stroke:s="currentColor",strokeOpacity:o,strokeWidth:a=2,sort:l,...c}={}){const u=n!=null?xp:J3;return Hi(Va(e,u({y1:WT,y2:HT},{x:n,y:t,stroke:s,strokeOpacity:o,...c})),ql(e,u({y1:"p25",y2:"p75"},{x:n,y:t,fill:r,fillOpacity:i,...c})),v7(e,u({y:"p50"},{x:n,y:t,stroke:s,strokeOpacity:o,strokeWidth:a,sort:l,...c})),fl(e,Uo({y:w7},{x:n,y:t,z:n,stroke:s,strokeOpacity:o,...c})))}function w7(e){const t=WT(e),n=HT(e);return e.map(r=>r<t||r>n?r:NaN)}function WT(e){const t=_7(e)*2.5-S7(e)*1.5;return bn(e,n=>n>=t?n:NaN)}function HT(e){const t=S7(e)*2.5-_7(e)*1.5;return $e(e,n=>n<=t?n:NaN)}function _7(e){return Ua(e,.25)}function S7(e){return Ua(e,.75)}const ult={ariaLabel:"raster",stroke:null,pixelSize:1};function Xc(e,t){const n=+e;if(isNaN(n))throw new Error(`invalid ${t}: ${e}`);return n}function fN(e,t){const n=Math.floor(e);if(isNaN(n))throw new Error(`invalid ${t}: ${e}`);return n}class x7 extends ve{constructor(t,n,r={},i){let{width:s,height:o,x:a,y:l,x1:c=a==null?0:void 0,y1:u=l==null?0:void 0,x2:f=a==null?s:void 0,y2:d=l==null?o:void 0,pixelSize:h=i.pixelSize,blur:p=0,interpolate:g}=r;if(s!=null&&(s=fN(s,"width")),o!=null&&(o=fN(o,"height")),c!=null&&(c=Xc(c,"x1")),u!=null&&(u=Xc(u,"y1")),f!=null&&(f=Xc(f,"x2")),d!=null&&(d=Xc(d,"y2")),a==null&&(c==null||f==null))throw new Error("missing x");if(l==null&&(u==null||d==null))throw new Error("missing y");t!=null&&s!=null&&o!=null&&(a===void 0&&c!=null&&f!=null&&(a=vlt(c,f,s)),l===void 0&&u!=null&&d!=null&&(l=wlt(u,d,s,o))),super(t,{x:{value:a,scale:"x",optional:!0},y:{value:l,scale:"y",optional:!0},x1:{value:c==null?null:[c],scale:"x",optional:!0,filter:null},y1:{value:u==null?null:[u],scale:"y",optional:!0,filter:null},x2:{value:f==null?null:[f],scale:"x",optional:!0,filter:null},y2:{value:d==null?null:[d],scale:"y",optional:!0,filter:null},...n},r,i),this.width=s,this.height=o,this.pixelSize=Xc(h,"pixelSize"),this.blur=Xc(p,"blur"),this.interpolate=a==null||l==null?null:dlt(g)}}class I7 extends x7{constructor(t,n={}){const{imageRendering:r}=n;if(t==null){const{fill:i,fillOpacity:s}=n;Ke(s)[0]!==void 0&&(n=ex("fillOpacity",n)),br(i)[0]!==void 0&&(n=ex("fill",n))}super(t,void 0,n,ult),this.imageRendering=Ve(r,"auto")}scale(t,{color:n,...r},i){return super.scale(t,r,i)}render(t,n,r,i,s){var M;const o=n[(M=r.channels.fill)==null?void 0:M.scale]??($=>$),{x:a,y:l}=r,{document:c}=s,[u,f,d,h]=E7(r,i,s),p=d-u,g=h-f,{pixelSize:v,width:y=Math.round(Math.abs(p)/v),height:m=Math.round(Math.abs(g)/v)}=this,b=y*m;let{fill:w,fillOpacity:S}=r,_=0;if(this.interpolate){const $=y/p,B=m/g,O=_e(a,F=>(F-u)*$,Float64Array),C=_e(l,F=>(F-f)*B,Float64Array);w&&(w=this.interpolate(t,y,m,O,C,w)),S&&(S=this.interpolate(t,y,m,O,C,S))}else this.data==null&&t&&(_=t.fi*b);const x=c.createElement("canvas");x.width=y,x.height=m;const E=x.getContext("2d"),N=E.createImageData(y,m),I=N.data;let{r:A,g:k,b:R}=gi(this.fill)??{r:0,g:0,b:0},T=(this.fillOpacity??1)*255;for(let $=0;$<b;++$){const B=$<<2;if(w){const O=o(w[$+_]);if(O==null){I[B+3]=0;continue}({r:A,g:k,b:R}=gi(O))}S&&(T=S[$+_]*255),I[B+0]=A,I[B+1]=k,I[B+2]=R,I[B+3]=T}return this.blur>0&&uG(N,this.blur),E.putImageData(N,0,0),ee("svg:g",s).call(Ne,this,i,s).call(be,this,n).call($=>$.append("image").attr("transform",`translate(${u},${f}) scale(${Math.sign(d-u)},${Math.sign(h-f)})`).attr("width",Math.abs(p)).attr("height",Math.abs(g)).attr("preserveAspectRatio","none").call(ut,"image-rendering",this.imageRendering).call(Te,this).attr("xlink:href",x.toDataURL())).node()}}function T7(e,t,n){arguments.length<3&&(n=t,t=null);let{x:r,y:i,[e]:s,...o}=n;return r===void 0&&i===void 0&&Brt(t)&&(r=gy,i=_p,s===void 0&&(s=Nrt)),[t,{...o,x:r,y:i,[e]:s}]}function flt(){const[e,t]=T7("fill",...arguments);return new I7(e,e==null||t.fill!==void 0||t.fillOpacity!==void 0?t:{...t,fill:gt})}function E7({x1:e,y1:t,x2:n,y2:r},i,{projection:s}){const{width:o,height:a,marginTop:l,marginRight:c,marginBottom:u,marginLeft:f}=i;return[e&&s==null?e[0]:f,t&&s==null?t[0]:l,n&&s==null?n[0]:o-c,r&&s==null?r[0]:a-u]}function A7({x1:e,y1:t,x2:n,y2:r},i,s,o){const a={};return e&&(a.x1=e),t&&(a.y1=t),n&&(a.x2=n),r&&(a.y2=r),E7(aT(a,i),s,o)}function ex(e,t={}){const{[e]:n}=t;if(typeof n!="function")throw new Error(`invalid ${e}: not a function`);return wr({...t,[e]:void 0},function(r,i,s,o,a,l){const{x:c,y:u}=o;if(!c)throw new Error("missing scale: x");if(!u)throw new Error("missing scale: y");const[f,d,h,p]=A7(s,o,a,l),g=h-f,v=p-d,{pixelSize:y}=this,{width:m=Math.round(Math.abs(g)/y),height:b=Math.round(Math.abs(v)/y)}=t,w=new Array(m*b*(i?i.length:1)),S=g/m,_=v/b;let x=0;for(const E of i??[void 0])for(let N=.5;N<b;++N)for(let I=.5;I<m;++I,++x)w[x]=n(c.invert(f+I*S),u.invert(d+N*_),E);return{data:w,facets:i,channels:{[e]:{value:w,scale:"auto"}}}})}function dlt(e){if(typeof e=="function")return e;if(e==null)return nx;switch(`${e}`.toLowerCase()){case"none":return nx;case"nearest":return $7;case"barycentric":return M7();case"random-walk":return N7()}throw new Error(`invalid interpolate: ${e}`)}function nx(e,t,n,r,i,s){const o=new Array(t*n);for(const a of e)r[a]<0||r[a]>=t||i[a]<0||i[a]>=n||(o[Math.floor(i[a])*t+Math.floor(r[a])]=s[a]);return o}function M7({random:e=A3(42)}={}){return(t,n,r,i,s,o)=>{const{points:a,triangles:l,hull:c}=sl.from(t,h=>i[h],h=>s[h]),u=new o.constructor(n*r).fill(NaN),f=new Uint8Array(n*r),d=blt(o,e);for(let h=0;h<l.length;h+=3){const p=l[h],g=l[h+1],v=l[h+2],y=a[2*p],m=a[2*g],b=a[2*v],w=a[2*p+1],S=a[2*g+1],_=a[2*v+1],x=Math.min(y,m,b),E=Math.max(y,m,b),N=Math.min(w,S,_),I=Math.max(w,S,_),A=(S-_)*(y-b)+(w-_)*(b-m);if(!A)continue;const k=o[t[p]],R=o[t[g]],T=o[t[v]];for(let M=Math.floor(x);M<E;++M)for(let $=Math.floor(N);$<I;++$){if(M<0||M>=n||$<0||$>=r)continue;const B=M+.5,O=$+.5,C=((S-_)*(B-b)+(O-_)*(b-m))/A;if(C<0)continue;const F=((_-w)*(B-b)+(O-_)*(y-b))/A;if(F<0)continue;const P=1-C-F;if(P<0)continue;const z=M+n*$;u[z]=d(k,C,R,F,T,P,M,$),f[z]=1}}return hlt(u,f,i,s,o,n,r,c,t,d),u}}function hlt(e,t,n,r,i,s,o,a,l,c){n=Float64Array.from(a,h=>n[l[h]]),r=Float64Array.from(a,h=>r[l[h]]),i=Array.from(a,h=>i[l[h]]);const u=n.length,f=Array.from({length:u},(h,p)=>ylt(p,n,r));let d=0;for(let h=0;h<o;++h){const p=h+.5;for(let g=0;g<s;++g){const v=g+s*h;if(!t[v]){const y=g+.5;for(let m=0;m<u;++m){const b=(u+d+(m%2?(m+1)/2:-m/2))%u;if(f[b](y,p)){const w=plt(n.at(b-1),r.at(b-1),n[b],r[b],y,p);e[v]=c(i.at(b-1),w,i[b],1-w,i[b],0,g,h),d=b;break}}}}}}function plt(e,t,n,r,i,s){const o=n-e,a=r-t,l=o*(n-i)+a*(r-s),c=o*(i-e)+a*(s-t);return l>0&&c>0?l/(l+c):+(l>c)}function zd(e,t,n,r){return e*r-n*t}function ylt(e,t,n){const r=t.length,i=t.at(e-2),s=n.at(e-2),o=t.at(e-1),a=n.at(e-1),l=t[e],c=n[e],u=t.at(e+1-r),f=n.at(e+1-r),d=o-l,h=a-c,p=i-o,g=s-a,v=l-u,y=c-f,m=Math.hypot(d,h),b=Math.hypot(p,g),w=Math.hypot(v,y);return(S,_)=>{const x=S-o,E=_-a,N=S-l,I=_-c;return zd(x,E,N,I)>-1e-6&&zd(x,E,d,h)*b-zd(x,E,p,g)*m>-1e-6&&zd(N,I,v,y)*m-zd(N,I,d,h)*w<=0}}function $7(e,t,n,r,i,s){const o=new s.constructor(t*n),a=sl.from(e,u=>r[u],u=>i[u]);let l,c;for(let u=.5,f=0;u<n;++u){c=l;for(let d=.5;d<t;++d,++f)c=a.find(d,u,c),d===.5&&(l=c),o[f]=s[e[c]]}return o}function N7({random:e=A3(42),minDistance:t=.5,maxSteps:n=2}={}){return(r,i,s,o,a,l)=>{const c=new l.constructor(i*s),u=sl.from(r,p=>o[p],p=>a[p]);let f,d,h;for(let p=.5,g=0;p<s;++p){d=f;for(let v=.5;v<i;++v,++g){let y=v,m=p;h=d=u.find(y,m,d),v===.5&&(f=d);let b,w=0;for(;(b=Math.hypot(o[r[h]]-y,a[r[h]]-m))>t&&w<n;){const S=e(v,p,w)*2*Math.PI;y+=Math.cos(S)*b,m+=Math.sin(S)*b,h=u.find(y,m,h),++w}c[g]=l[r[h]]}}return c}}function mlt(e,t,n,r,i,s){return t*e+r*n+s*i}function glt(e){return(t,n,r,i,s,o,a,l)=>{const c=e(a,l);return c<n?t:c<n+i?r:s}}function blt(e,t){return ku(e)||Kn(e)?mlt:glt(t)}function vlt(e,t,n){return{transform(r){const i=r.length,s=new Float64Array(i),o=(t-e)/n,a=e+o/2;for(let l=0;l<i;++l)s[l]=l%n*o+a;return s}}}function wlt(e,t,n,r){return{transform(i){const s=i.length,o=new Float64Array(s),a=(t-e)/r,l=e+a/2;for(let c=0;c<s;++c)o[c]=Math.floor(c/n)%r*a+l;return o}}}const dN={ariaLabel:"contour",fill:"none",stroke:"currentColor",strokeMiterlimit:1,pixelSize:2};class D7 extends x7{constructor(t,{smooth:n=!0,value:r,...i}={}){const s=pC({},i,dN);if(r===void 0){for(const a in s)if(s[a].value!=null){if(r!==void 0)throw new Error("ambiguous contour value");r=i[a],i[a]="value"}}if(r!=null){const a={transform:l=>l.map(c=>c.value),label:qo(r)};for(const l in s)i[l]==="value"&&(i[l]=a)}if(t==null){if(r==null)throw new Error("missing contour value");i=ex("value",{value:r,...i}),r=null}else{let{interpolate:a}=i;r===void 0&&(r=gt),a===void 0&&(i.interpolate="nearest")}super(t,{value:{value:r,optional:!0}},_lt(i),dN);const o={geometry:{value:gt}};for(const a in this.channels){const l=this.channels[a],{scale:c}=l;c==="x"||c==="y"||a==="value"||(o[a]=l,delete this.channels[a])}this.contourChannels=o,this.smooth=!!n}filter(t,{x:n,y:r,value:i,...s},o){return super.filter(t,s,o)}render(t,n,r,i,s){const{geometry:o}=r,a=ol();return ee("svg:g",s).call(Ne,this,i,s).call(be,this,n).call(l=>{l.selectAll().data(t).enter().append("path").call(Te,this).attr("d",c=>a(o[c])).call(fn,this,r)}).node()}}function _lt({thresholds:e,interval:t,...n}){return e=G5(e,t,a3),wr(n,function(r,i,s,o,a,l){const[c,u,f,d]=A7(s,o,a,l),h=f-c,p=d-u,{pixelSize:g,width:v=Math.round(Math.abs(h)/g),height:y=Math.round(Math.abs(p)/g)}=this,m=v/h,b=y/p,w=s.value.value,S=[];if(this.interpolate){const{x:I,y:A}=Av(s,o,l),k=_e(I,$=>($-c)*m,Float64Array),R=_e(A,$=>($-u)*b,Float64Array),T=[s.x,s.y,s.value],M=[k,R,w];for(const $ of i){const B=this.filter($,T,M);S.push(this.interpolate(B,v,y,k,R,w))}}else if(i){const I=v*y,A=i.length;for(let k=0;k<A;++k)S.push(w.slice(k*I,k*I+I))}else S.push(w);if(this.blur>0)for(const I of S)jO({data:I,width:v,height:y},this.blur);const _=Slt(e,w,...Ilt(S));if(_===null)throw new Error(`unsupported thresholds: ${e}`);const{contour:x}=jg().size([v,y]).smooth(this.smooth),E=[],N=[];for(const I of S)N.push(Nr(E.length,E.push(..._e(_,A=>x(I,A)))));for(const{coordinates:I}of E)for(const A of I)for(const k of A)for(const R of k)R[0]=R[0]/m+c,R[1]=R[1]/b+u;return{data:E,facets:N,channels:cC(this.contourChannels,E)}})}function Slt(e,t,n,r){if(typeof(e==null?void 0:e.range)=="function")return e.range(e.floor(n),r);if(typeof e=="function"&&(e=e(t,n,r)),typeof e!="number")return vr(e);const i=Ca(...GO(n,r,e),e);for(;i[i.length-1]>=r;)i.pop();for(;i[1]<n;)i.shift();return i}function xlt(){return new D7(...T7("value",...arguments))}function Ilt(e){return[bn(e,t=>bn(t,hN)),$e(e,t=>$e(t,hN))]}function hN(e){return isFinite(e)?e:NaN}function Tlt(e,t){return GT(bT,e,t)}function Elt(e,t={}){return GT(vT,e,t)}function Alt(e,t={}){return GT(wT,e,t)}function GT(e,t,n={}){const{x:r,y:i,maxRadius:s}=n,o=e({px:r,py:i,maxRadius:s}),a=[];r!=null&&a.push(Va(t,pN("x",{...o,inset:-6},n))),i!=null&&a.push(Ya(t,pN("y",{...o,inset:-6},n))),r!=null&&a.push(Rf(t,yN("x",{...o,dy:9,frameAnchor:"bottom",lineAnchor:"top"},n))),i!=null&&a.push(Rf(t,yN("y",{...o,dx:-9,frameAnchor:"left",textAnchor:"end"},n)));for(const l of a)l.ariaLabel=`crosshair ${l.ariaLabel}`;return Hi(...a)}function k7(e,{channels:t,...n},{facet:r,facetAnchor:i,fx:s,fy:o,[e]:a,channels:l,transform:c,initializer:u}){return{...n,facet:r,facetAnchor:i,fx:s,fy:o,[e]:a,channels:{...t,...l},transform:c,initializer:Mlt(e,u)}}function Mlt(e,t){return t==null?t:function(n,r,{x:i,y:s,px:o,py:a,...l},...c){const{channels:{x:u,y:f,...d}={},...h}=t.call(this,n,r,{...l,x:o,y:a},...c);return{channels:{...d,...u&&{px:u,...e==="x"&&{x:u}},...f&&{py:f,...e==="y"&&{y:f}}},...h}}}function pN(e,t,n){const{color:r="currentColor",opacity:i=.2,ruleStroke:s=r,ruleStrokeOpacity:o=i,ruleStrokeWidth:a}=n;return{...k7(e,t,n),stroke:s,strokeOpacity:o,strokeWidth:a}}function yN(e,t,n){const{color:r="currentColor",textFill:i=r,textFillOpacity:s,textStroke:o="white",textStrokeOpacity:a,textStrokeWidth:l=5}=n;return{...k7(e,t,$lt(e,n)),fill:i,fillOpacity:s,stroke:o,strokeOpacity:a,strokeWidth:l}}function $lt(e,t){return wr(t,(n,r,i)=>{var s;return{channels:{text:{value:(s=HS(i,e))==null?void 0:s.value}}}})}const Nlt={ariaLabel:"delaunay link",fill:"none",stroke:"currentColor",strokeMiterlimit:1},Dlt={ariaLabel:"delaunay mesh",fill:null,stroke:"currentColor",strokeOpacity:.2},klt={ariaLabel:"hull",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeMiterlimit:1},Olt={ariaLabel:"voronoi",fill:"none",stroke:"currentColor",strokeMiterlimit:1},Flt={ariaLabel:"voronoi mesh",fill:null,stroke:"currentColor",strokeOpacity:.2};class Blt extends ve{constructor(t,n={}){const{x:r,y:i,z:s,curve:o,tension:a}=n;super(t,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},z:{value:s,optional:!0}},n,Nlt),this.curve=NT(o,a),ld(this,n)}render(t,n,r,i,s){const{x:o,y:a}=n,{x:l,y:c,z:u}=r,{curve:f}=this,[d,h]=qs(this,i),p=l?m=>l[m]:Ur(d),g=c?m=>c[m]:Ur(h),v=this;function y(m){let b=-1;const w=[],S={};for(const T in r)S[T]=[];const _=[],x=[],E=[],N=[];function I(T,M){T=m[T],M=m[M],w.push(++b),_[b]=p(T),E[b]=g(T),x[b]=p(M),N[b]=g(M);for(const $ in r)S[$].push(r[$][M])}const{halfedges:A,hull:k,triangles:R}=sl.from(m,p,g);for(let T=0;T<A.length;++T){const M=A[T];M>T&&I(R[T],R[M])}for(let T=0;T<k.length;++T)I(k[T],k[(T+1)%k.length]);ye(this).selectAll().data(w).enter().append("path").call(Te,v).attr("d",T=>{const M=_o(),$=f(M);return $.lineStart(),$.point(_[T],E[T]),$.point(x[T],N[T]),$.lineEnd(),M}).call(fn,v,S).call(Ey,v,S,s)}return ee("svg:g",s).call(Ne,this,i,s).call(be,this,{x:l&&o,y:c&&a}).call(u?m=>m.selectAll().data(Vo(t,b=>u[b]).values()).enter().append("g").each(y):m=>m.datum(t).each(y)).node()}}class XT extends ve{constructor(t,n={},r,i=({z:s})=>s){const{x:s,y:o}=n;super(t,{x:{value:s,scale:"x",optional:!0},y:{value:o,scale:"y",optional:!0},z:{value:i(n),optional:!0}},n,r)}render(t,n,r,i,s){const{x:o,y:a}=n,{x:l,y:c,z:u}=r,[f,d]=qs(this,i),h=l?y=>l[y]:Ur(f),p=c?y=>c[y]:Ur(d),g=this;function v(y){const m=sl.from(y,h,p);ye(this).append("path").datum(y[0]).call(Te,g).attr("d",g._render(m,i)).call(fn,g,r)}return ee("svg:g",s).call(Ne,this,i,s).call(be,this,{x:l&&o,y:c&&a}).call(u?y=>y.selectAll().data(Vo(t,m=>u[m]).values()).enter().append("g").each(v):y=>y.datum(t).each(v)).node()}}class Rlt extends XT{constructor(t,n={}){super(t,n,Dlt),this.fill="none"}_render(t){return t.render()}}class Llt extends XT{constructor(t,n={}){super(t,n,klt,ll)}_render(t){return t.renderHull()}}class Clt extends ve{constructor(t,n={}){const{x:r,y:i,z:s}=n;super(t,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},z:{value:s,optional:!0}},n,Olt)}render(t,n,r,i,s){const{x:o,y:a}=n,{x:l,y:c,z:u}=r,[f,d]=qs(this,i),h=l?y=>l[y]:Ur(f),p=c?y=>c[y]:Ur(d),g=this;function v(y){const m=sl.from(y,h,p),b=O7(m,i);ye(this).selectAll().data(y).enter().append("path").call(Te,g).attr("d",(w,S)=>b.renderCell(S)).call(fn,g,r)}return ee("svg:g",s).call(Ne,this,i,s).call(be,this,{x:l&&o,y:c&&a}).call(u?y=>y.selectAll().data(Vo(t,m=>u[m]).values()).enter().append("g").each(v):y=>y.datum(t).each(v)).node()}}class Ult extends XT{constructor(t,n){super(t,n,Flt),this.fill="none"}_render(t,n){return O7(t,n).render()}}function O7(e,t){const{width:n,height:r,marginTop:i,marginRight:s,marginBottom:o,marginLeft:a}=t;return e.voronoi([a,i,n-s,r-o])}function $y(e,t,{x:n,y:r,...i}={}){return[n,r]=Ki(n,r),new e(t,{...i,x:n,y:r})}function Plt(e,t){return $y(Blt,e,t)}function zlt(e,t){return $y(Rlt,e,t)}function jlt(e,t){return $y(Llt,e,t)}function Vlt(e,t){return $y(Clt,e,t)}function Ylt(e,t){return $y(Ult,e,t)}const qlt={ariaLabel:"density",fill:"none",stroke:"currentColor",strokeMiterlimit:1};class F7 extends ve{constructor(t,{x:n,y:r,z:i,weight:s,fill:o,stroke:a,...l}={}){const c=mN(o)&&(o="currentColor",!0),u=mN(a)&&(a="currentColor",!0);super(t,{x:{value:n,scale:"x",optional:!0},y:{value:r,scale:"y",optional:!0},z:{value:ll({z:i,fill:o,stroke:a}),optional:!0},weight:{value:s,optional:!0}},Glt({...l,fill:o,stroke:a},c,u),qlt),c&&(this.fill=void 0),u&&(this.stroke=void 0),this.z=i}filter(t){return t}render(t,n,r,i,s){const{contours:o}=r,a=ol();return ee("svg:g",s).call(Ne,this,i,s).call(be,this,{}).call(l=>l.selectAll().data(t).enter().append("path").call(Te,this).call(fn,this,r).attr("d",c=>a(o[c]))).node()}}function Wlt(e,{x:t,y:n,...r}={}){return[t,n]=Ki(t,n),new F7(e,{...r,x:t,y:n})}const Hlt=new Set(["x","y","z","weight"]);function Glt(e,t,n){let{bandwidth:i,thresholds:s}=e;return i=i===void 0?20:+i,s=s===void 0?20:typeof(s==null?void 0:s[Symbol.iterator])=="function"?lr(s):+s,wr(e,function(o,a,l,c,u,f){var R;const d=l.weight?lr(l.weight.value):null,h=(R=l.z)==null?void 0:R.value,{z:p}=this,[g,v]=qs(this,u),{width:y,height:m}=u,{x:b,y:w}=Av(l,c,f),S=Object.fromEntries(Object.entries(l).filter(([T])=>!Hlt.has(T)).map(([T,M])=>[T,{...M,value:[]}])),_=t&&[],x=n&&[],E=qZ().x(b?T=>b[T]:g).y(w?T=>w[T]:v).weight(d?T=>d[T]:1).size([y,m]).bandwidth(i),N=[];for(const T of a){const M=[];N.push(M);for(const $ of h?cT(T,h,p):[T]){const B=E.contours($);M.push([$,B])}}let I=s;if(!(I instanceof Of)){let T=0;for(const M of N)for(const[,$]of M){const B=$.max;B>T&&(T=B)}I=Float64Array.from({length:s-1},(M,$)=>T*100*($+1)/s)}const A=[],k=[];for(const T of N){const M=[];A.push(M);for(const[$,B]of T)for(const O of I){M.push(k.length),k.push(B(O/100)),_&&_.push(O),x&&x.push(O);for(const C in S)S[C].value.push(l[C].value[$[0]])}}return _&&_.push(0),x&&x.push(0),{data:o,facets:A,channels:{...S,..._&&{fill:{value:_,scale:"color"}},...x&&{stroke:{value:x,scale:"color"}},contours:{value:k}}}})}function mN(e){return/^density$/i.test(e)}const Xlt={ariaLabel:"geo",fill:"none",stroke:"currentColor",strokeWidth:1,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class B7 extends ve{constructor(t,n={}){const[r,i]=Ke(n.r,3);super(t,{geometry:{value:n.geometry,scale:"projection"},r:{value:r,scale:"r",filter:Ao,optional:!0}},zT(n),Xlt),this.r=i}render(t,n,r,i,s){const{geometry:o,r:a}=r,l=ol(s.projection??Qlt(n)),{r:c}=this;return bv(c)?t=[]:c!==void 0&&l.pointRadius(c),ee("svg:g",s).call(Ne,this,i,s).call(be,this,n).call(u=>{u.selectAll().data(t).enter().append("path").call(Te,this).attr("d",a?f=>l.pointRadius(a[f])(o[f]):f=>l(o[f])).call(fn,this,r)}).node()}}function Qlt({x:e,y:t}){if(e||t)return e??(e=n=>n),t??(t=n=>n),c1({point(n,r){this.stream.point(e(n),t(r))}})}function QT(e,{geometry:t=gt,...n}={}){switch(e==null?void 0:e.type){case"FeatureCollection":e=e.features;break;case"GeometryCollection":e=e.geometries;break;case"Feature":case"LineString":case"MultiLineString":case"MultiPoint":case"MultiPolygon":case"Point":case"Polygon":case"Sphere":e=[e];break}return new B7(e,{geometry:t,...n})}function Klt({strokeWidth:e=1.5,...t}={}){return QT({type:"Sphere"},{strokeWidth:e,...t})}function Zlt({strokeOpacity:e=.1,...t}={}){return QT(PJ(),{strokeOpacity:e,...t})}const kh=.5,Oh=0;function Jlt(e={fill:"count"},{binWidth:t,...n}={}){const{z:r}=n;return t=t===void 0?20:jt(t),e=eT(e,n),ba(e,"fill")&&(n.channels={...n.channels,fill:{value:[]}}),n.symbol===void 0&&(n.symbol="hexagon"),n.r===void 0&&!ba(e,"r")&&(n.r=t/2),wr(n,(i,s,o,a,l,c)=>{let{x:u,y:f,z:d,fill:h,stroke:p,symbol:g}=o;if(u===void 0)throw new Error("missing channel: x");if(f===void 0)throw new Error("missing channel: y");({x:u,y:f}=Av(o,a,c)),d=d?d.value:Ut(i,r),h=h==null?void 0:h.value,p=p==null?void 0:p.value,g=g==null?void 0:g.value;const v=iT(e,{z:d,fill:h,stroke:p,symbol:g}),y=d&&[],m=h&&[],b=p&&[],w=g&&[],S=[],_=[],x=[];let E=-1;for(const k of e)k.initialize(i);for(const k of s){const R=[];for(const T of e)T.scope("facet",k);for(const[T,M]of Ku(k,v))for(const $ of tct(M,u,f,t)){R.push(++E),_.push($.x),x.push($.y),d&&y.push(v===d?T:d[$[0]]),h&&m.push(v===h?T:h[$[0]]),p&&b.push(v===p?T:p[$[0]]),g&&w.push(v===g?T:g[$[0]]);for(const B of e)B.reduce($)}S.push(R)}const N=o.x.scale,I=o.y.scale,A={x:{value:_,source:a[N]?{value:_e(_,a[N].invert),scale:N}:null},y:{value:x,source:a[I]?{value:_e(x,a[I].invert),scale:I}:null},...d&&{z:{value:y}},...h&&{fill:{value:m,scale:"auto"}},...p&&{stroke:{value:b,scale:"auto"}},...g&&{symbol:{value:w,scale:"auto"}},...Object.fromEntries(e.map(({name:k,output:R})=>[k,{scale:"auto",label:R.label,radius:k==="r"?t/2:void 0,value:R.transform()}]))};return{data:i,facets:S,channels:A}})}function tct(e,t,n,r){const i=r*(1.5/iC),s=new Map;for(const o of e){let a=t[o],l=n[o];if(isNaN(a)||isNaN(l))continue;let c=Math.round(l=(l-Oh)/i),u=Math.round(a=(a-kh)/r-(c&1)/2),f=l-c;if(Math.abs(f)*3>1){let p=a-u,g=u+(a<u?-1:1)/2,v=c+(l<c?-1:1),y=a-g,m=l-v;p*p+f*f>y*y+m*m&&(u=g+(c&1?1:-1)/2,c=v)}const d=`${u},${c}`;let h=s.get(d);h===void 0&&(s.set(d,h=[]),h.x=(u+(c&1)/2)*r+kh,h.y=c*i+Oh),h.push(o)}return s.values()}const ect={ariaLabel:"hexgrid",fill:"none",stroke:"currentColor",strokeOpacity:.1};function nct(e){return new R7(e)}class R7 extends ve{constructor({binWidth:t=20,clip:n=!0,...r}={}){super(Dh,void 0,{clip:n,...r},ect),this.binWidth=jt(t)}render(t,n,r,i,s){const{binWidth:o}=this,{marginTop:a,marginRight:l,marginBottom:c,marginLeft:u,width:f,height:d}=i,h=u-kh,p=f-l-kh,g=a-Oh,v=d-c-Oh,y=o/2,m=y*sC,b=m/2,w=y*2,S=m*1.5,_=Math.floor(h/w),x=Math.ceil(p/w),E=Math.floor((g+b)/S),N=Math.ceil((v-b)/S)+1,I=`m0,${Jo(-m)}l${Jo(y)},${Jo(b)}v${Jo(m)}l${Jo(-y)},${Jo(b)}`;let A=I;for(let k=E;k<N;++k)for(let R=_;R<x;++R)A+=`M${Jo(R*w+(k&1)*y)},${Jo(k*S)}${I}`;return ee("svg:g",s).datum(0).call(Ne,this,i,s).call(be,this,{},xn+kh,xn+Oh).call(k=>k.append("path").call(Te,this).call(fn,this,r).attr("d",A)).node()}}function Jo(e){return Math.round(e*1e3)/1e3}const rct={ariaLabel:"image",fill:null,stroke:null};function ict(e){return/^\.*\//.test(e)}function sct(e){return/^(blob|data|file|http|https):/i.test(e)}function oct(e){return typeof e=="string"&&(ict(e)||sct(e))?[void 0,e]:[e,void 0]}class L7 extends ve{constructor(t,n={}){let{x:r,y:i,r:s,width:o,height:a,rotate:l,src:c,preserveAspectRatio:u,crossOrigin:f,frameAnchor:d,imageRendering:h}=n;s==null&&(s=void 0),s===void 0&&o===void 0&&a===void 0?o=a=16:o===void 0&&a!==void 0?o=a:a===void 0&&o!==void 0&&(a=o);const[p,g]=oct(c),[v,y]=Ke(s),[m,b]=Ke(o,y!==void 0?y*2:void 0),[w,S]=Ke(a,y!==void 0?y*2:void 0),[_,x]=Ke(l,0);super(t,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},r:{value:v,scale:"r",filter:Ao,optional:!0},width:{value:m,filter:Ao,optional:!0},height:{value:w,filter:Ao,optional:!0},rotate:{value:_,optional:!0},src:{value:p,optional:!0}},zT(n),rct),this.src=g,this.width=b,this.rotate=x,this.height=S,this.r=y,this.preserveAspectRatio=Ve(u,"xMidYMid"),this.crossOrigin=Fn(f),this.frameAnchor=wy(d),this.imageRendering=Ve(h,"auto")}render(t,n,r,i,s){const{x:o,y:a}=n,{x:l,y:c,width:u,height:f,r:d,rotate:h,src:p}=r,{r:g,width:v,height:y,rotate:m}=this,[b,w]=qs(this,i);return ee("svg:g",s).call(Ne,this,i,s).call(be,this,{x:l&&o,y:c&&a}).call(S=>S.selectAll().data(t).enter().append("image").call(Te,this).attr("x",gN(l,u,d,b,v,g)).attr("y",gN(c,f,d,w,y,g)).attr("width",u?_=>u[_]:v!==void 0?v:d?_=>d[_]*2:g*2).attr("height",f?_=>f[_]:y!==void 0?y:d?_=>d[_]*2:g*2).attr("transform",h?_=>`rotate(${h[_]})`:m?`rotate(${m})`:null).attr("transform-origin",h||m?kv`${l?_=>l[_]:b}px ${c?_=>c[_]:w}px`:null).call(ut,"href",p?_=>p[_]:this.src).call(ut,"preserveAspectRatio",this.preserveAspectRatio).call(ut,"crossorigin",this.crossOrigin).call(ut,"image-rendering",this.imageRendering).call(ut,"clip-path",d?_=>`circle(${d[_]}px)`:g!==void 0?`circle(${g}px)`:null).call(fn,this,r)).node()}}function gN(e,t,n,r,i,s){return t&&e?o=>e[o]-t[o]/2:t?o=>r-t[o]/2:e&&i!==void 0?o=>e[o]-i/2:i!==void 0?r-i/2:n&&e?o=>e[o]-n[o]:n?o=>r-n[o]:e?o=>e[o]-s:r-s}function act(e,{x:t,y:n,...r}={}){return r.frameAnchor===void 0&&([t,n]=Ki(t,n)),new L7(e,{...r,x:t,y:n})}function lct(e,t,n){var r=1e-8,i=t-1,s=n-1,o=0,a,l,c,u,f,d,h,p,g,v,y;if(e<=0)return 0;if(e>=1)return 1;for(t>=1&&n>=1?(c=e<.5?e:1-e,u=Math.sqrt(-2*Math.log(c)),h=(2.30753+u*.27061)/(1+u*(.99229+u*.04481))-u,e<.5&&(h=-h),p=(h*h-3)/6,g=2/(1/(2*t-1)+1/(2*n-1)),v=h*Math.sqrt(p+g)/g-(1/(2*n-1)-1/(2*t-1))*(p+5/6-2/(3*g)),h=t/(t+n*Math.exp(2*v))):(a=Math.log(t/(t+n)),l=Math.log(n/(t+n)),u=Math.exp(t*a)/t,f=Math.exp(n*l)/n,v=u+f,e<u/v?h=Math.pow(t*v*e,1/t):h=1-Math.pow(n*v*(1-e),1/n)),y=-Ju(t)-Ju(n)+Ju(t+n);o<10;o++){if(h===0||h===1)return h;if(d=cct(h,t,n)-e,u=Math.exp(i*Math.log(h)+s*Math.log(1-h)+y),f=d/u,h-=u=f/(1-.5*Math.min(1,f*(i/h-s/(1-h)))),h<=0&&(h=.5*(h+u)),h>=1&&(h=.5*(h+u+1)),Math.abs(u)<r*h&&o>0)break}return h}function cct(e,t,n){var r=e===0||e===1?0:Math.exp(Ju(t+n)-Ju(t)-Ju(n)+t*Math.log(e)+n*Math.log(1-e));return e<0||e>1?!1:e<(t+1)/(t+n+2)?r*bN(e,t,n)/t:1-r*bN(1-e,n,t)/n}function bN(e,t,n){var r=1e-30,i=1,s=t+n,o=t+1,a=t-1,l=1,c=1-s*e/o,u,f,d,h;for(Math.abs(c)<r&&(c=r),c=1/c,h=c;i<=100&&(u=2*i,f=i*(n-i)*e/((a+u)*(t+u)),c=1+f*c,Math.abs(c)<r&&(c=r),l=1+f/l,Math.abs(l)<r&&(l=r),c=1/c,h*=c*l,f=-(t+i)*(s+i)*e/((t+u)*(o+u)),c=1+f*c,Math.abs(c)<r&&(c=r),l=1+f/l,Math.abs(l)<r&&(l=r),c=1/c,d=c*l,h*=d,!(Math.abs(d-1)<3e-7));i++);return h}function Ju(e){var t=0,n=[76.18009172947146,-86.5053203294167,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18],r=1.000000000190015,i,s,o;for(o=(s=i=e)+5.5,o-=(i+.5)*Math.log(o);t<6;t++)r+=n[t]/++s;return Math.log(2.506628274631*r/i)-o}function uct(e,t){var n=lct(2*Math.min(e,1-e),.5*t,.5);return n=Math.sqrt(t*(1-n)/n),e>.5?n:-n}const fct={ariaLabel:"linear-regression",fill:"currentColor",fillOpacity:.1,stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class C7 extends ve{constructor(t,n={}){const{x:r,y:i,z:s,ci:o=.95,precision:a=4}=n;if(super(t,{x:{value:r,scale:"x"},y:{value:i,scale:"y"},z:{value:ll(n),optional:!0}},n,fct),this.z=s,this.ci=+o,this.precision=+a,!(0<=this.ci&&this.ci<1))throw new Error(`invalid ci; not in [0, 1): ${o}`);if(!(this.precision>0))throw new Error(`invalid precision: ${a}`)}render(t,n,r,i,s){const{x:o,y:a,z:l}=r,{ci:c}=this;return ee("svg:g",s).call(Ne,this,i,s).call(be,this,n).call(u=>u.selectAll().data(l?cT(t,l,this.z):[t]).enter().call(f=>f.append("path").attr("fill","none").call(Te,this).call(A1,this,{...r,fill:null,fillOpacity:null}).attr("d",d=>this._renderLine(d,o,a)).call(c&&!Ff(this.fill)?d=>d.select(dct).attr("stroke","none").call(Te,this).call(A1,this,{...r,stroke:null,strokeOpacity:null,strokeWidth:null}).attr("d",h=>this._renderBand(h,o,a)):()=>{}))).node()}}function dct(){return this.parentNode.insertBefore(this.ownerDocument.createElementNS(vc.svg,"path"),this)}class hct extends C7{constructor(t,n){super(t,n)}_renderBand(t,n,r){const{ci:i,precision:s}=this,[o,a]=yn(t,u=>r[u]),l=B1(t,r,n),c=U7(t,r,n,(1-i)/2,l);return O3().y(u=>u).x0(u=>c(u,-1)).x1(u=>c(u,1))(Nr(o,a-s/2,s).concat(a))}_renderLine(t,n,r){const[i,s]=yn(t,a=>r[a]),o=B1(t,r,n);return`M${o(i)},${i}L${o(s)},${s}`}}class pct extends C7{constructor(t,n){super(t,n)}_renderBand(t,n,r){const{ci:i,precision:s}=this,[o,a]=yn(t,u=>n[u]),l=B1(t,n,r),c=U7(t,n,r,(1-i)/2,l);return O3().x(u=>u).y0(u=>c(u,-1)).y1(u=>c(u,1))(Nr(o,a-s/2,s).concat(a))}_renderLine(t,n,r){const[i,s]=yn(t,a=>n[a]),o=B1(t,n,r);return`M${i},${o(i)}L${s},${o(s)}`}}function yct(e,{y:t=Ir,x:n=gt,stroke:r,fill:i=We(r)?"currentColor":r,...s}={}){return new hct(e,kT({...s,x:n,y:t,fill:i,stroke:r}))}function mct(e,{x:t=Ir,y:n=gt,stroke:r,fill:i=We(r)?"currentColor":r,...s}={}){return new pct(e,DT({...s,x:t,y:n,fill:i,stroke:r}))}function B1(e,t,n){let r=0,i=0,s=0,o=0;for(const u of e){const f=t[u],d=n[u];r+=f,i+=d,s+=f*d,o+=f*f}const a=e.length,l=(a*s-r*i)/(a*o-r*r),c=(i-l*r)/a;return u=>l*u+c}function U7(e,t,n,r,i){const s=Ls(e,u=>t[u])/e.length;let o=0,a=0;for(const u of e)o+=(t[u]-s)**2,a+=(n[u]-i(t[u]))**2;const l=Math.sqrt(a/(e.length-2)),c=uct(r,e.length-2);return(u,f)=>{const d=i(u),h=l*Math.sqrt(1/e.length+(u-s)**2/o);return d+f*c*h}}function rx({path:e=gt,delimiter:t,frameAnchor:n,treeLayout:r=h1,treeSort:i,treeSeparation:s,treeAnchor:o,treeFilter:a,...l}={}){o=KT(o),i=z7(i),a!=null&&(a=sx(a)),n===void 0&&(n=o.frameAnchor);const c=j7(t),u=X7(l,sx),[f,d]=kr(),[h,p]=kr();return{x:f,y:h,frameAnchor:n,...Ys(l,(g,v)=>{const y=c(Ut(g,e)),m=d([]),b=p([]);let w=-1;const S=[],_=[],x=TB().path(N=>y[N]),E=r();E.nodeSize&&E.nodeSize([1,1]),E.separation&&s!==void 0&&E.separation(s??z3);for(const N of u)N[R1]=N[H7]([]);for(const N of v){const I=[],A=x(N.filter(k=>y[k]!=null)).each(k=>k.data=g[k.data]);i!=null&&A.sort(i),E(A);for(const k of A.descendants())if(!(a!=null&&!a(k))){I.push(++w),S[w]=k.data,o.position(k,w,m,b);for(const R of u)R[R1][w]=R[G7](k)}_.push(I)}return{data:S,facets:_}}),...Object.fromEntries(u)}}function P7({path:e=gt,delimiter:t,curve:n="bump-x",stroke:r="#555",strokeWidth:i=1.5,strokeOpacity:s=.5,treeLayout:o=h1,treeSort:a,treeSeparation:l,treeAnchor:c,treeFilter:u,...f}={}){c=KT(c),a=z7(a),u!=null&&(u=wN(u)),f={curve:n,stroke:r,strokeWidth:i,strokeOpacity:s,...f};const d=j7(t),h=X7(f,wN),[p,g]=kr(),[v,y]=kr(),[m,b]=kr(),[w,S]=kr();return{x1:p,x2:v,y1:m,y2:w,...Ys(f,(_,x)=>{const E=d(Ut(_,e)),N=g([]),I=y([]),A=b([]),k=S([]);let R=-1;const T=[],M=[],$=TB().path(O=>E[O]),B=o();B.nodeSize&&B.nodeSize([1,1]),B.separation&&l!==void 0&&B.separation(l??z3);for(const O of h)O[R1]=O[H7]([]);for(const O of x){const C=[],F=$(O.filter(P=>E[P]!=null)).each(P=>P.data=_[P.data]);a!=null&&F.sort(a),B(F);for(const{source:P,target:z}of F.links())if(!(u!=null&&!u(z,P))){C.push(++R),T[R]=z.data,c.position(P,R,N,A),c.position(z,R,I,k);for(const H of h)H[R1][R]=H[G7](z,P)}M.push(C)}return{data:T,facets:M}}),...Object.fromEntries(h)}}function KT(e="left"){switch(`${e}`.trim().toLowerCase()){case"left":return gct;case"right":return bct}throw new Error(`invalid tree anchor: ${e}`)}const gct={frameAnchor:"left",dx:6,position({x:e,y:t},n,r,i){r[n]=t,i[n]=-e}},bct={frameAnchor:"right",dx:-6,position({x:e,y:t},n,r,i){r[n]=-t,i[n]=-e}};function z7(e){return e==null||typeof e=="function"?e:`${e}`.trim().toLowerCase().startsWith("node:")?vN(sx(e)):vN(vct(e))}function vN(e){return(t,n)=>bi(e(t),e(n))}function vct(e){return t=>{var n;return(n=t.data)==null?void 0:n[e]}}function j7(e="/"){if(e=`${e}`,e==="/")return n=>n;if(e.length!==1)throw new Error("delimiter must be exactly one character");const t=e.charCodeAt(0);return n=>n.map(r=>wct(r,t))}const ix=92,V7=47;function wct(e,t){if(t===ix)throw new Error("delimiter cannot be backslash");let n=!1;for(let r=0,i=e.length;r<i;++r){switch(e.charCodeAt(r)){case ix:if(!n){n=!0;continue}break;case t:n?(e=e.slice(0,r-1)+e.slice(r),--r,--i):e=e.slice(0,r)+"/"+e.slice(r+1);break;case V7:n?(e=e.slice(0,r)+"\\\\"+e.slice(r),r+=2,i+=2):(e=e.slice(0,r)+"\\"+e.slice(r),++r,++i);break}n=!1}return e}function _ct(e){let t=!1;for(let n=0,r=e.length;n<r;++n){switch(e.charCodeAt(n)){case ix:if(!t){t=!0;continue}case V7:t&&(e=e.slice(0,n-1)+e.slice(n),--n,--r);break}t=!1}return e}function Y7(e){return _i(e)&&typeof e.node=="function"}function Sct(e){return _i(e)&&typeof e.link=="function"}function sx(e){if(Y7(e))return e.node;if(e=`${e}`.trim().toLowerCase(),!!e.startsWith("node:")){switch(e){case"node:name":return ax;case"node:path":return ox;case"node:internal":return q7;case"node:external":return W7;case"node:depth":return lx;case"node:height":return cx}throw new Error(`invalid node value: ${e}`)}}function wN(e){if(Y7(e))return e.node;if(Sct(e))return e.link;if(e=`${e}`.trim().toLowerCase(),!(!e.startsWith("node:")&&!e.startsWith("parent:"))){switch(e){case"parent:name":return L0(ax);case"parent:path":return L0(ox);case"parent:depth":return L0(lx);case"parent:height":return L0(cx);case"node:name":return ax;case"node:path":return ox;case"node:internal":return q7;case"node:external":return W7;case"node:depth":return lx;case"node:height":return cx}throw new Error(`invalid link value: ${e}`)}}function ox(e){return e.id}function ax(e){return xct(e.id)}function lx(e){return e.depth}function cx(e){return e.height}function q7(e){return!!e.children}function W7(e){return!e.children}function L0(e){return(t,n)=>n==null?void 0:e(n)}function xct(e){let t=e.length;for(;--t>0&&!Ict(e,t););return _ct(e.slice(t+1))}function Ict(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}const H7=2,G7=3,R1=4;function X7(e,t){const n=[];for(const r in e){const i=e[r],s=t(i);s!==void 0&&n.push([r,...kr(i),s])}return n}function Q7(e,{fill:t,stroke:n,strokeWidth:r,strokeOpacity:i,strokeLinejoin:s,strokeLinecap:o,strokeMiterlimit:a,strokeDasharray:l,strokeDashoffset:c,marker:u,markerStart:f=u,markerEnd:d=u,dot:h=We(f)&&We(d),text:p="node:name",textStroke:g="white",title:v="node:path",dx:y,dy:m,textAnchor:b,treeLayout:w=h1,textLayout:S=w===h1||w===SB?"mirrored":"normal",tip:_,...x}={}){if(y===void 0&&(y=KT(x.treeAnchor).dx),b!==void 0)throw new Error("textAnchor is not a configurable tree option");S=Yr(S,"textLayout",["mirrored","normal"]);function E(N){return Rf(e,rx({treeLayout:w,text:p,fill:t===void 0?"currentColor":t,stroke:g,dx:y,dy:m,title:v,...N,...x}))}return Hi(o7(e,P7({treeLayout:w,markerStart:f,markerEnd:d,stroke:n!==void 0?n:t===void 0?"node:internal":t,strokeWidth:r,strokeOpacity:i,strokeLinejoin:s,strokeLinecap:o,strokeMiterlimit:a,strokeDasharray:l,strokeDashoffset:c,...x})),h?fl(e,rx({treeLayout:w,fill:t===void 0?"node:internal":t,title:v,tip:_,...x})):null,p!=null?S==="mirrored"?[E({textAnchor:"start",treeFilter:"node:external"}),E({textAnchor:"end",treeFilter:"node:internal",dx:-y})]:E():null)}function Tct(e,t){return Q7(e,{...t,treeLayout:SB})}function Ect({geometry:e=gt,...t}={}){return wr({...t,x:null,y:null},(n,r,i,s,o,{projection:a})=>{const l=Ut(n,e),c=l.length,u=new Float64Array(c),f=new Float64Array(c),d=ol(a);for(let h=0;h<c;++h)[u[h],f[h]]=d.centroid(l[h]);return{data:n,facets:r,channels:{x:{value:u,scale:a==null?"x":null,source:null},y:{value:f,scale:a==null?"y":null,source:null}}}})}function Act({geometry:e=gt,...t}={}){let n;return{...t,x:{transform:r=>Float64Array.from(n=Ut(Ut(r,e),MJ),([i])=>i)},y:{transform:()=>Float64Array.from(n,([,r])=>r)}}}function Mct(e,t,n,r,i){for(var s=i+1;r<=i;){var o=r+i>>>1,a=e[o],l=n!==void 0?n(a,t):a-t;l>=0?(s=o,i=o-1):r=o+1}return s}function $ct(e,t,n,r,i){for(var s=i+1;r<=i;){var o=r+i>>>1,a=e[o],l=n!==void 0?n(a,t):a-t;l>0?(s=o,i=o-1):r=o+1}return s}function Nct(e,t,n,r,i){for(var s=r-1;r<=i;){var o=r+i>>>1,a=e[o],l=n!==void 0?n(a,t):a-t;l<0?(s=o,r=o+1):i=o-1}return s}function Dct(e,t,n,r,i){for(var s=r-1;r<=i;){var o=r+i>>>1,a=e[o],l=n!==void 0?n(a,t):a-t;l<=0?(s=o,r=o+1):i=o-1}return s}function kct(e,t,n,r,i){for(;r<=i;){var s=r+i>>>1,o=e[s],a=n!==void 0?n(o,t):o-t;if(a===0)return s;a<=0?r=s+1:i=s-1}return-1}function jd(e,t,n,r,i,s){return typeof n=="function"?s(e,t,n,r===void 0?0:r|0,i===void 0?e.length-1:i|0):s(e,t,void 0,n===void 0?0:n|0,r===void 0?e.length-1:r|0)}var Oct={ge:function(e,t,n,r,i){return jd(e,t,n,r,i,Mct)},gt:function(e,t,n,r,i){return jd(e,t,n,r,i,$ct)},lt:function(e,t,n,r,i){return jd(e,t,n,r,i,Nct)},le:function(e,t,n,r,i){return jd(e,t,n,r,i,Dct)},eq:function(e,t,n,r,i){return jd(e,t,n,r,i,kct)}},L1=Oct,Fu=0,kl=1,wm=2,Fct=Rct;function ZT(e,t,n,r,i){this.mid=e,this.left=t,this.right=n,this.leftPoints=r,this.rightPoints=i,this.count=(t?t.count:0)+(n?n.count:0)+r.length}var Ny=ZT.prototype;function M_(e,t){e.mid=t.mid,e.left=t.left,e.right=t.right,e.leftPoints=t.leftPoints,e.rightPoints=t.rightPoints,e.count=t.count}function K7(e,t){var n=Pf(t);e.mid=n.mid,e.left=n.left,e.right=n.right,e.leftPoints=n.leftPoints,e.rightPoints=n.rightPoints,e.count=n.count}function _N(e,t){var n=e.intervals([]);n.push(t),K7(e,n)}function SN(e,t){var n=e.intervals([]),r=n.indexOf(t);return r<0?Fu:(n.splice(r,1),K7(e,n),kl)}Ny.intervals=function(e){return e.push.apply(e,this.leftPoints),this.left&&this.left.intervals(e),this.right&&this.right.intervals(e),e};Ny.insert=function(e){var t=this.count-this.leftPoints.length;if(this.count+=1,e[1]<this.mid)this.left?4*(this.left.count+1)>3*(t+1)?_N(this,e):this.left.insert(e):this.left=Pf([e]);else if(e[0]>this.mid)this.right?4*(this.right.count+1)>3*(t+1)?_N(this,e):this.right.insert(e):this.right=Pf([e]);else{var n=L1.ge(this.leftPoints,e,JT),r=L1.ge(this.rightPoints,e,tE);this.leftPoints.splice(n,0,e),this.rightPoints.splice(r,0,e)}};Ny.remove=function(e){var t=this.count-this.leftPoints;if(e[1]<this.mid){if(!this.left)return Fu;var n=this.right?this.right.count:0;if(4*n>3*(t-1))return SN(this,e);var r=this.left.remove(e);return r===wm?(this.left=null,this.count-=1,kl):(r===kl&&(this.count-=1),r)}else if(e[0]>this.mid){if(!this.right)return Fu;var i=this.left?this.left.count:0;if(4*i>3*(t-1))return SN(this,e);var r=this.right.remove(e);return r===wm?(this.right=null,this.count-=1,kl):(r===kl&&(this.count-=1),r)}else{if(this.count===1)return this.leftPoints[0]===e?wm:Fu;if(this.leftPoints.length===1&&this.leftPoints[0]===e){if(this.left&&this.right){for(var s=this,o=this.left;o.right;)s=o,o=o.right;if(s===this)o.right=this.right;else{var a=this.left,r=this.right;s.count-=o.count,s.right=o.left,o.left=a,o.right=r}M_(this,o),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?M_(this,this.left):M_(this,this.right);return kl}for(var a=L1.ge(this.leftPoints,e,JT);a<this.leftPoints.length&&this.leftPoints[a][0]===e[0];++a)if(this.leftPoints[a]===e){this.count-=1,this.leftPoints.splice(a,1);for(var r=L1.ge(this.rightPoints,e,tE);r<this.rightPoints.length&&this.rightPoints[r][1]===e[1];++r)if(this.rightPoints[r]===e)return this.rightPoints.splice(r,1),kl}return Fu}};function Z7(e,t,n){for(var r=0;r<e.length&&e[r][0]<=t;++r){var i=n(e[r]);if(i)return i}}function J7(e,t,n){for(var r=e.length-1;r>=0&&e[r][1]>=t;--r){var i=n(e[r]);if(i)return i}}function tU(e,t){for(var n=0;n<e.length;++n){var r=t(e[n]);if(r)return r}}Ny.queryPoint=function(e,t){if(e<this.mid){if(this.left){var n=this.left.queryPoint(e,t);if(n)return n}return Z7(this.leftPoints,e,t)}else if(e>this.mid){if(this.right){var n=this.right.queryPoint(e,t);if(n)return n}return J7(this.rightPoints,e,t)}else return tU(this.leftPoints,t)};Ny.queryInterval=function(e,t,n){if(e<this.mid&&this.left){var r=this.left.queryInterval(e,t,n);if(r)return r}if(t>this.mid&&this.right){var r=this.right.queryInterval(e,t,n);if(r)return r}return t<this.mid?Z7(this.leftPoints,t,n):e>this.mid?J7(this.rightPoints,e,n):tU(this.leftPoints,n)};function Bct(e,t){return e-t}function JT(e,t){var n=e[0]-t[0];return n||e[1]-t[1]}function tE(e,t){var n=e[1]-t[1];return n||e[0]-t[0]}function Pf(e){if(e.length===0)return null;for(var t=[],n=0;n<e.length;++n)t.push(e[n][0],e[n][1]);t.sort(Bct);for(var r=t[t.length>>1],i=[],s=[],o=[],n=0;n<e.length;++n){var a=e[n];a[1]<r?i.push(a):r<a[0]?s.push(a):o.push(a)}var l=o,c=o.slice();return l.sort(JT),c.sort(tE),new ZT(r,Pf(i),Pf(s),l,c)}function ux(e){this.root=e}var hd=ux.prototype;hd.insert=function(e){this.root?this.root.insert(e):this.root=new ZT(e[0],null,null,[e],[e])};hd.remove=function(e){if(this.root){var t=this.root.remove(e);return t===wm&&(this.root=null),t!==Fu}return!1};hd.queryPoint=function(e,t){if(this.root)return this.root.queryPoint(e,t)};hd.queryInterval=function(e,t,n){if(e<=t&&this.root)return this.root.queryInterval(e,t,n)};Object.defineProperty(hd,"count",{get:function(){return this.root?this.root.count:0}});Object.defineProperty(hd,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}});function Rct(e){return!e||e.length===0?new ux(null):new ux(Pf(e))}const Lct=u4(Fct),Cct=({marginLeft:e})=>[1,e],Uct=({width:e,marginRight:t})=>[-1,e-t],Pct=({width:e,marginLeft:t,marginRight:n})=>[0,(t+e-n)/2],zct=({marginTop:e})=>[1,e],jct=({height:e,marginBottom:t})=>[-1,e-t],Vct=({height:e,marginTop:t,marginBottom:n})=>[0,(t+e-n)/2];function eU(e){return typeof e=="string"?{anchor:e}:e}function Yct(e={},t={}){arguments.length===1&&([e,t]=nU(e));let{anchor:n="left",padding:r=1,r:i=t.r}=eU(e);switch(`${n}`.toLowerCase()){case"left":n=Cct;break;case"right":n=Uct;break;case"middle":n=Pct;break;default:throw new Error(`unknown dodge anchor: ${n}`)}return rU("x","y",n,jt(r),i,t)}function qct(e={},t={}){arguments.length===1&&([e,t]=nU(e));let{anchor:n="bottom",padding:r=1,r:i=t.r}=eU(e);switch(`${n}`.toLowerCase()){case"top":n=zct;break;case"bottom":n=jct;break;case"middle":n=Vct;break;default:throw new Error(`unknown dodge anchor: ${n}`)}return rU("y","x",n,jt(r),i,t)}function nU(e){const{anchor:t,padding:n,...r}=e,{r:i}=r;return[{anchor:t,padding:n,r:i},r]}function rU(e,t,n,r,i,s){if(i!=null&&typeof i!="number"){let{channels:o,sort:a,reverse:l}=s;o=W3(o),(o==null?void 0:o.r)===void 0&&(s={...s,channels:{...o,r:{value:i,scale:"r"}}}),a===void 0&&l===void 0&&(s.sort={channel:"-r"})}return wr(s,function(o,a,l,c,u,f){let{[t]:d,r:h}=l;if(!l[t])throw new Error(`missing channel: ${t}`);({[t]:d}=Av(l,c,f));const p=h?void 0:i!==void 0?jt(i):this.r!==void 0?this.r:3;h&&(h=Ut(h.value,c[h.scale]||gt,Float64Array));let[g,v]=n(u);const y=g?Hct:Wct,m=new Float64Array(d.length),b=h?w=>h[w]:()=>p;for(let w of a){const S=Lct();w=w.filter(h?x=>x1(d[x])&&Ao(h[x]):x=>x1(d[x]));const _=new Float64Array(2*w.length+2);for(const x of w){const E=b(x),N=g?E+r:0,I=d[x]-E,A=d[x]+E;let k=2;S.queryInterval(I-r,A+r,([,,T])=>{const M=m[T]-N,$=d[x]-d[T],B=r+(h?h[x]+h[T]:2*p),O=Math.sqrt(B*B-$*$);_[k++]=M-O,_[k++]=M+O});let R=_.slice(0,k);g&&(R=R.filter(T=>T>=0));t:for(const T of R.sort(y)){for(let M=0;M<k;M+=2)if(_[M]+1e-6<T&&T<_[M+1]-1e-6)continue t;m[x]=T+N;break}S.insert([I,A,x])}}g||(g=1);for(const w of a)for(const S of w)m[S]=m[S]*g+v;return{data:o,facets:a,channels:{[e]:{value:m,source:null},[t]:{value:d,source:l[t]},...h&&{r:{value:h,source:l.r}}}}})}function Wct(e,t){return Math.abs(e)-Math.abs(t)}function Hct(e,t){return e-t}function Gct(e,t){return arguments.length===1&&({basis:e,...t}=e),YT(eE(e),t)}function Xct(e,t){return arguments.length===1&&({basis:e,...t}=e),qT(eE(e),t)}function eE(e){if(e===void 0)return xN;if(typeof e=="function")return Vv(Y3(e));if(/^p\d{2}$/i.test(e))return pd(j3(e));switch(`${e}`.toLowerCase()){case"deviation":return Zct;case"first":return xN;case"last":return Kct;case"max":return Jct;case"mean":return tut;case"median":return eut;case"min":return nut;case"sum":return rut;case"extent":return Qct}throw new Error(`invalid basis: ${e}`)}function Vv(e){return{mapIndex(t,n,r){const i=+e(t,n);for(const s of t)r[s]=n[s]===null?NaN:n[s]/i}}}function pd(e){return Vv((t,n)=>e(t,r=>n[r]))}const Qct={mapIndex(e,t,n){const[r,i]=yn(e,o=>t[o]),s=i-r;for(const o of e)n[o]=t[o]===null?NaN:(t[o]-r)/s}},xN=Vv((e,t)=>{for(let n=0;n<e.length;++n){const r=t[e[n]];if(Gn(r))return r}}),Kct=Vv((e,t)=>{for(let n=e.length-1;n>=0;--n){const r=t[e[n]];if(Gn(r))return r}}),Zct={mapIndex(e,t,n){const r=Hb(e,s=>t[s]),i=ey(e,s=>t[s]);for(const s of e)n[s]=t[s]===null?NaN:i?(t[s]-r)/i:0}},Jct=pd($e),tut=pd(Hb),eut=pd(fp),nut=pd(bn),rut=pd(Ls);function iut(e,t={}){if(typeof e=="string")switch(e.toLowerCase()){case"first":return iU(t);case"last":return sU(t)}if(typeof e=="function")return qa(null,e,t);let n,r;for(n in e){if(r!==void 0)throw new Error("ambiguous selector; multiple inputs");r=sut(e[n])}if(r===void 0)throw new Error(`invalid selector: ${e}`);return qa(n,r,t)}function sut(e){if(typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"min":return nE;case"max":return rE}throw new Error(`unknown selector: ${e}`)}function iU(e){return qa(null,uut,e)}function sU(e){return qa(null,fut,e)}function out(e){return qa("x",nE,e)}function aut(e){return qa("y",nE,e)}function lut(e){return qa("x",rE,e)}function cut(e){return qa("y",rE,e)}function*uut(e){yield e[0]}function*fut(e){yield e[e.length-1]}function*nE(e,t){yield DG(e,n=>t[n])}function*rE(e,t){yield l3(e,n=>t[n])}function qa(e,t,n){if(e!=null){if(n[e]==null)throw new Error(`missing channel: ${e}`);e=n[e]}const r=ll(n);return Ys(n,(i,s)=>{const o=Ut(i,r),a=Ut(i,e),l=[];for(const c of s){const u=[];for(const f of o?Vo(c,d=>o[d]).values():[c])for(const d of t(f,a))u.push(d);l.push(u)}return{data:i,facets:l}})}const IN=Object.freeze(Object.defineProperty({__proto__:null,Area:Lv,Arrow:a7,BarX:c7,BarY:u7,Cell:Cv,Contour:D7,Density:F7,Dot:Uv,Frame:j5,Geo:B7,Hexgrid:R7,Image:L7,Line:Pv,Link:s7,Mark:ve,Raster:I7,Rect:zv,RuleX:t5,RuleY:e5,Text:Ov,TickX:m7,TickY:g7,Tip:V5,Vector:Fv,area:Sat,areaX:Ap,areaY:Uf,arrow:Mat,auto:Pat,autoSpec:f7,axisFx:I5,axisFy:x5,axisX:IT,axisY:xT,barX:Yl,barY:ql,bin:Fl,binX:pa,binY:ya,bollinger:oc,bollingerX:slt,bollingerY:olt,boxX:llt,boxY:clt,cell:Ou,cellX:Nat,cellY:Dat,centroid:Ect,circle:Bat,cluster:Tct,column:kr,contour:xlt,crosshair:Tlt,crosshairX:Elt,crosshairY:Alt,delaunayLink:Plt,delaunayMesh:zlt,density:Wlt,dodgeX:Yct,dodgeY:qct,dot:fl,dotX:Oat,dotY:Fat,filter:Grt,formatIsoDate:hC,formatMonth:pit,formatWeekday:yit,frame:AT,geo:QT,geoCentroid:Act,graticule:Zlt,gridFx:N5,gridFy:M5,gridX:$5,gridY:A5,group:tT,groupX:xp,groupY:Ip,groupZ:J3,hexagon:Rat,hexbin:Jlt,hexgrid:nct,hull:jlt,identity:gt,image:act,indexOf:Ir,initializer:wr,interpolateNearest:$7,interpolateNone:nx,interpolatorBarycentric:M7,interpolatorRandomWalk:N7,legend:yot,line:jT,lineX:Mp,lineY:$p,linearRegressionX:yct,linearRegressionY:mct,link:o7,map:Uo,mapX:YT,mapY:qT,marks:Hi,normalize:eE,normalizeX:Gct,normalizeY:Xct,plot:MT,pointer:bT,pointerX:vT,pointerY:wT,raster:flt,rect:VT,rectX:O1,rectY:F1,reverse:Xrt,ruleX:Va,ruleY:Ya,scale:Ac,select:iut,selectFirst:iU,selectLast:sU,selectMaxX:lut,selectMaxY:cut,selectMinX:out,selectMinY:aut,shuffle:Qrt,sort:oC,sphere:Klt,spike:not,stackX:J5,stackX1:oat,stackX2:aat,stackY:t7,stackY1:lat,stackY2:cat,text:Rf,textX:s5,textY:o5,tickX:b7,tickY:v7,tip:Y5,transform:Ys,tree:Q7,treeLink:P7,treeNode:rx,valueof:Ut,vector:m5,vectorX:g5,vectorY:b5,voronoi:Vlt,voronoiMesh:Ylt,window:jv,windowX:Hat,windowY:Gat},Symbol.toStringTag,{value:"Module"})),dut=new Map([["style","style"],["width","width"],["height","height"],["margin","margin"],["marginLeft","marginLeft"],["marginRight","marginRight"],["marginTop","marginTop"],["marginBottom","marginBottom"],["align","align"],["aspectRatio","aspectRatio"],["axis","axis"],["inset","inset"],["grid","grid"],["label","label"],["padding","padding"],["round","round"],["xScale","x.type"],["xDomain","x.domain"],["xRange","x.range"],["xNice","x.nice"],["xInset","x.inset"],["xInsetLeft","x.insetLeft"],["xInsetRight","x.insetRight"],["xClamp","x.clamp"],["xRound","x.round"],["xAlign","x.align"],["xPadding","x.padding"],["xPaddingInner","x.paddingInner"],["xPaddingOuter","x.paddingOuter"],["xAxis","x.axis"],["xTicks","x.ticks"],["xTickSize","x.tickSize"],["xTickSpacing","x.tickSpacing"],["xTickPadding","x.tickPadding"],["xTickFormat","x.tickFormat"],["xTickRotate","x.tickRotate"],["xGrid","x.grid"],["xLine","x.line"],["xLabel","x.label"],["xLabelAnchor","x.labelAnchor"],["xLabelOffset","x.labelOffset"],["xFontVariant","x.fontVariant"],["xAriaLabel","x.ariaLabel"],["xAriaDescription","x.ariaDescription"],["xReverse","x.reverse"],["xZero","x.zero"],["yScale","y.type"],["yDomain","y.domain"],["yRange","y.range"],["yNice","y.nice"],["yInset","y.inset"],["yInsetTop","y.insetTop"],["yInsetBottom","y.insetBottom"],["yClamp","y.clamp"],["yRound","y.round"],["yAlign","y.align"],["yPadding","y.padding"],["yPaddingInner","y.paddingInner"],["yPaddingOuter","y.paddingOuter"],["yAxis","y.axis"],["yTicks","y.ticks"],["yTickSize","y.tickSize"],["yTickSpacing","y.tickSpacing"],["yTickPadding","y.tickPadding"],["yTickFormat","y.tickFormat"],["yTickRotate","y.tickRotate"],["yGrid","y.grid"],["yLine","y.line"],["yLabel","y.label"],["yLabelAnchor","y.labelAnchor"],["yLabelOffset","y.labelOffset"],["yFontVariant","y.fontVariant"],["yAriaLabel","y.ariaLabel"],["yAriaDescription","y.ariaDescription"],["yReverse","y.reverse"],["yZero","y.zero"],["facetMargin","facet.margin"],["facetMarginTop","facet.marginTop"],["facetMarginBottom","facet.marginBottom"],["facetMarginLeft","facet.marginLeft"],["facetMarginRight","facet.marginRight"],["facetGrid","facet.grid"],["facetLabel","facet.label"],["fxDomain","fx.domain"],["fxRange","fx.range"],["fxNice","fx.nice"],["fxInset","fx.inset"],["fxInsetLeft","fx.insetLeft"],["fxInsetRight","fx.insetRight"],["fxRound","fx.round"],["fxAlign","fx.align"],["fxPadding","fx.padding"],["fxPaddingInner","fx.paddingInner"],["fxPaddingOuter","fx.paddingOuter"],["fxAxis","fx.axis"],["fxTicks","fx.ticks"],["fxTickSize","fx.tickSize"],["fxTickSpacing","fx.tickSpacing"],["fxTickPadding","fx.tickPadding"],["fxTickFormat","fx.tickFormat"],["fxTickRotate","fx.tickRotate"],["fxGrid","fx.grid"],["fxLine","fx.line"],["fxLabel","fx.label"],["fxLabelAnchor","fx.labelAnchor"],["fxLabelOffset","fx.labelOffset"],["fxFontVariant","fx.fontVariant"],["fxAriaLabel","fx.ariaLabel"],["fxAriaDescription","fx.ariaDescription"],["fxReverse","fx.reverse"],["fyDomain","fy.domain"],["fyRange","fy.range"],["fyNice","fy.mice"],["fyInset","fy,inset"],["fyInsetTop","fy.insetTop"],["fyInsetBottom","fy.insetBottom"],["fyRound","fy.round"],["fyAlign","fy.align"],["fyPadding","fy.padding"],["fyPaddingInner","fy.paddingInner"],["fyPaddingOuter","fy.paddingOuter"],["fyAxis","fy.axis"],["fyTicks","fy.ticks"],["fyTickSize","fy.tickSize"],["fyTickSpacing","fy.tickSpacing"],["fyTickPadding","fy.tickPadding"],["fyTickFormat","fy.tickFormat"],["fyTickRotate","fy.tickRotate"],["fyGrid","fy.grid"],["fyLine","fy.line"],["fyLabel","fy.label"],["fyLabelAnchor","fy.labelAnchor"],["fyLabelOffset","fy.labelOffset"],["fyFontVariant","fy.fontVariant"],["fyAriaLabel","fy.ariaLabel"],["fyAriaDescription","fy.ariaDescription"],["fyReverse","fy.reverse"],["colorScale","color.type"],["colorDomain","color.domain"],["colorRange","color.range"],["colorClamp","color.clamp"],["colorNice","color.nice"],["colorScheme","color.scheme"],["colorInterpolate","color.interpolate"],["colorPivot","color.pivot"],["colorSymmetric","color.symmetric"],["colorLabel","color.label"],["colorReverse","color.reverse"],["colorZero","color.zero"],["colorTickFormat","color.tickFormat"],["opacityScale","opacity.type"],["opacityDomain","opacity.domain"],["opacityRange","opacity.range"],["opacityClamp","opacity.clamp"],["opacityNice","opacity.nice"],["opacityLabel","opacity.label"],["opacityReverse","opacity.reverse"],["opacityZero","opacity.zero"],["opacityTickFormat","opacity.tickFormat"],["rScale","r.type"],["rDomain","r.domain"],["rRange","r.range"],["rClamp","r.clamp"],["rNice","r.nice"],["rZero","r.zero"],["lengthScale","length.type"],["lengthDomain","length.domain"],["lengthRange","length.range"],["lengthClamp","length.clamp"],["lengthNice","length.nice"],["lengthZero","length.zero"],["projectionType","projection.type"],["projectionParallels","projection.parallels"],["projectionPrecision","projection.precision"],["projectionRotate","projection.rotate"],["projectionDomain","projection.domain"],["projectionInset","projection.inset"],["projectionInsetLeft","projection.insetLeft"],["projectionInsetRight","projection.insetRight"],["projectionInsetTop","projection.insetTop"],["projectionInsetBottom","projection.insetBottom"],["projectionClip","projection.clip"]]),hut=new Set(["frame","hexgrid","sphere","graticule"]);function put(e,t,n){for(let r=0;r<t.length;++r){const i=t[r];r===t.length-1?e[i]=n:e=e[i]||(e[i]={})}}async function yut(e){const t={marks:[]},n=[],{attributes:r,marks:i}=e;for(const a in r){const l=dut.get(a);if(l==null)throw new Error(`Unrecognized plot attribute: ${a}`);const c=r[a];typeof c=="symbol"?n.push(a):c!==void 0&&put(t,l.split("."),c)}const s=[];for(const a of i)for(const{type:l,data:c,options:u}of a.plotSpecs())hut.has(l)?t.marks.push(IN[l](u)):t.marks.push(IN[l](c,u)),s.push(a.index);gut(t,e);const o=MT(t);but(o,s),mut(e,o,r,n);for(const a of e.interactors)await a.init(o);return o}function mut(e,t,n,r){r.forEach(i=>{const s=n[i];if(s===oi){if(!i.endsWith("Domain"))throw new Error(`Unsupported fixed attribute: ${i}`);const o=i.slice(0,-6),a=t.scale(o);a!=null&&a.domain&&e.setAttribute(i,n[`${o}Reverse`]?a.domain.slice().reverse():a.domain)}else throw new Error(`Unrecognized symbol: ${s}`)})}function gut(e,t){const{marks:n}=t;C0("x",e,n,["x","x1","x2"]),C0("y",e,n,["y","y1","y2"]),C0("fx",e,n),C0("fy",e,n)}function C0(e,t,n,r=[e]){const i=t[e]||{};if(i.axis===null||i.label!==void 0)return;const s=n.map(u=>{var f;return(f=u.channelField(r))==null?void 0:f.field});if(s.every(u=>u==null))return;let o,a,l;for(let u=0;u<s.length;++u){const{column:f,label:d}=s[u]||{};f===void 0&&d===void 0||(o===void 0&&a===void 0?(o=f,a=d,l=vut(n[u].data,r)||"number"):a!==d?a=void 0:o!==f&&(o=void 0))}let c=a||o;if(c!==void 0){if((l==="number"||l==="date")&&(e==="x"||e==="y")){i.percent&&(c=`${c} (%)`);const u=(e==="x"?1:-1)*(i.reverse?-1:1);e==="x"||i.labelAnchor==="center"?c=e==="x"==u<0?` ${c}`:`${c} `:c=`${u<0?" ":" "}${c}`}t[e]={...i,label:c}}}function but(e,t){const n=e.querySelectorAll('g[aria-label="facet"]');if(n.length)for(const r of n)TN(r,t);else TN(e,t)}function TN(e,t){let n=-1;for(const r of e.children){const i=r.getAttribute("aria-label")||"";r.nodeName==="style"||i.includes("-axis")||i.includes("-grid")||r.setAttribute("data-index",t[++n])}}function vut(e,t){for(const n of e)for(let r=0;r<t.length;++r){const i=n[t[r]];if(i!=null)return i instanceof Date?"date":typeof i}}const wut={width:640,marginLeft:40,marginRight:20,marginTop:20,marginBottom:30};class _ut{constructor(t){this.attributes={...wut},this.listeners=null,this.interactors=[],this.legends=[],this.marks=[],this.markset=null,this.element=t||document.createElement("div"),this.element.setAttribute("class","plot"),this.element.style.display="flex",this.element.value=this,this.params=new Map,this.synch=UH()}margins(){return{left:this.getAttribute("marginLeft"),top:this.getAttribute("marginTop"),bottom:this.getAttribute("marginBottom"),right:this.getAttribute("marginRight")}}innerWidth(){const{left:t,right:n}=this.margins();return this.getAttribute("width")-t-n}innerHeight(){const{top:t,bottom:n}=this.margins();return this.getAttribute("height")-t-n}pending(t){this.synch.pending(t)}update(t){return this.synch.ready(t)&&!this.pendingRender&&(this.pendingRender=!0,requestAnimationFrame(()=>this.render())),this.synch.promise}async render(){this.pendingRender=!1;const t=await yut(this),n=this.legends.flatMap(({legend:r,include:i})=>{const s=r.init(t);return i?s:[]});this.element.replaceChildren(t,...n),this.synch.resolve()}getAttribute(t){return this.attributes[t]}setAttribute(t,n,r){var i,s;return DO(this.attributes[t],n)?(n===void 0?delete this.attributes[t]:this.attributes[t]=n,r!=null&&r.silent||(s=(i=this.listeners)==null?void 0:i.get(t))==null||s.forEach(o=>o(t,n)),!0):!1}addAttributeListener(t,n){const r=this.listeners||(this.listeners=new Map);return r.has(t)||r.set(t,new Set),r.get(t).add(n),this}removeAttributeListener(t,n){var r,i;return(i=(r=this.listeners)==null?void 0:r.get(t))==null?void 0:i.delete(n)}addParams(t,n){const{params:r}=this;for(const i of n)r.has(i)?r.get(i).push(t):(r.set(i,[t]),i.addEventListener("value",()=>Promise.allSettled(r.get(i).map(s=>s.requestQuery()))))}addMark(t){return t.setPlot(this,this.marks.length),this.marks.push(t),this.markset=null,this}get markSet(){return this.markset||(this.markset=new Set(this.marks))}addInteractor(t){return this.interactors.push(t),this}addLegend(t,n=!0){t.setPlot(this),this.legends.push({legend:t,include:n})}}function Ge(...e){const t=new _ut;return e.flat().forEach(n=>n(t)),t.marks.forEach(n=>Xn().connect(n)),t.element}class Sut extends Map{request(t,n){if(this.has(t))n(this.get(t));else{const r=this.waiting||(this.waiting=new Map),i=r.get(t)||[];r.set(t,i.concat(n))}}set(t,n){this.has(t)&&console.warn(`Overwriting named plot "${t}".`);const{waiting:r}=this;return r!=null&&r.has(t)&&(r.get(t).forEach(i=>i(n)),r.delete(t)),super.set(t,n)}}const oU=new Sut;function xut(e){return t=>oU.set(e,t)}function aU(e,t,n){$a(n)?(n.addEventListener("value",r=>{e.setAttribute(t,r),e.update()}),n.value!==void 0&&e.setAttribute(t,n.value)):e.setAttribute(t,n)}function lU(e,t){return n=>{aU(n,e,t)}}function iE(e){return t=>{for(const[n,r]of Object.entries(e))aU(t,n,r)}}function cU(e){const{top:t,bottom:n,left:r,right:i}=e,s={};return t!==void 0&&(s.marginTop=t),n!==void 0&&(s.marginBottom=n),r!==void 0&&(s.marginLeft=r),i!==void 0&&(s.marginRight=i),iE(s)}function C1(e){return iE({xDomain:e,yDomain:e})}const L=e=>t=>lU(e,t),uU=L("style"),Bi=L("width"),Ms=L("height"),Iut=L("margin"),dh=L("marginLeft"),fx=L("marginRight"),dx=L("marginTop"),Tut=L("marginBottom"),Eut=L("align"),Aut=L("aspectRatio"),Mut=L("axis"),$ut=L("inset"),Nut=L("grid"),Dut=L("label"),kut=L("padding"),Out=L("round"),Fut=L("xScale"),ri=L("xDomain"),But=L("xRange"),Rut=L("xNice"),Lut=L("xInset"),Cut=L("xInsetLeft"),Uut=L("xInsetRight"),Put=L("xClamp"),zut=L("xRound"),jut=L("xAlign"),Vut=L("xPadding"),Yut=L("xPaddingInner"),qut=L("xPaddingOuter"),fU=L("xAxis"),Wut=L("xTicks"),Hut=L("xTickSize"),Gut=L("xTickSpacing"),Xut=L("xTickPadding"),sE=L("xTickFormat"),Qut=L("xTickRotate"),Kut=L("xGrid"),Zut=L("xLine"),Jut=L("xLabel"),tft=L("xLabelAnchor"),eft=L("xLabelOffset"),nft=L("xFontVariant"),rft=L("xAriaLabel"),ift=L("xAriaDescription"),sft=L("xReverse"),oft=L("xZero"),hx=L("yScale"),oE=L("yDomain"),aft=L("yRange"),lft=L("yNice"),cft=L("yInset"),uft=L("yInsetTop"),fft=L("yInsetBottom"),dft=L("yClamp"),hft=L("yRound"),pft=L("yAlign"),yft=L("yPadding"),mft=L("yPaddingInner"),gft=L("yPaddingOuter"),dU=L("yAxis"),bft=L("yTicks"),vft=L("yTickSize"),wft=L("yTickSpacing"),_ft=L("yTickPadding"),Fh=L("yTickFormat"),Sft=L("yTickRotate"),U1=L("yGrid"),xft=L("yLine"),hU=L("yLabel"),Ift=L("yLabelAnchor"),Tft=L("yLabelOffset"),Eft=L("yFontVariant"),Aft=L("yAriaLabel"),Mft=L("yAriaDescription"),pU=L("yReverse"),$ft=L("yZero"),Nft=L("facetMargin"),Dft=L("facetMarginTop"),kft=L("facetMarginBottom"),Oft=L("facetMarginLeft"),Fft=L("facetMarginRight"),Bft=L("facetGrid"),Rft=L("facetLabel"),Lft=L("fxDomain"),Cft=L("fxRange"),Uft=L("fxNice"),Pft=L("fxInset"),zft=L("fxInsetLeft"),jft=L("fxInsetRight"),Vft=L("fxRound"),Yft=L("fxAlign"),qft=L("fxPadding"),Wft=L("fxPaddingInner"),Hft=L("fxPaddingOuter"),Gft=L("fxAxis"),Xft=L("fxTicks"),Qft=L("fxTickSize"),Kft=L("fxTickSpacing"),Zft=L("fxTickPadding"),Jft=L("fxTickFormat"),tdt=L("fxTickRotate"),edt=L("fxGrid"),ndt=L("fxLine"),rdt=L("fxLabel"),idt=L("fxLabelAnchor"),sdt=L("fxLabelOffset"),odt=L("fxFontVariant"),adt=L("fxAriaLabel"),ldt=L("fxAriaDescription"),cdt=L("fxReverse"),udt=L("fyDomain"),fdt=L("fyRange"),ddt=L("fyNice"),hdt=L("fyInset"),pdt=L("fyInsetTop"),ydt=L("fyInsetBottom"),mdt=L("fyRound"),gdt=L("fyAlign"),bdt=L("fyPadding"),vdt=L("fyPaddingInner"),wdt=L("fyPaddingOuter"),_dt=L("fyAxis"),Sdt=L("fyTicks"),xdt=L("fyTickSize"),Idt=L("fyTickSpacing"),Tdt=L("fyTickPadding"),Edt=L("fyTickFormat"),Adt=L("fyTickRotate"),Mdt=L("fyGrid"),$dt=L("fyLine"),Ndt=L("fyLabel"),Ddt=L("fyLabelAnchor"),kdt=L("fyLabelOffset"),Odt=L("fyFontVariant"),Fdt=L("fyAriaLabel"),Bdt=L("fyAriaDescription"),Rdt=L("fyReverse"),px=L("colorScale"),yx=L("colorDomain"),mx=L("colorRange"),Ldt=L("colorClamp"),Cdt=L("colorNice"),tf=L("colorScheme"),Udt=L("colorInterpolate"),Pdt=L("colorPivot"),zdt=L("colorSymmetric"),jdt=L("colorLabel"),Vdt=L("colorReverse"),Ydt=L("colorZero"),qdt=L("colorTickFormat"),Wdt=L("opacityScale"),Hdt=L("opacityDomain"),Gdt=L("opacityRange"),Xdt=L("opacityClamp"),Qdt=L("opacityNice"),Kdt=L("opacityLabel"),Zdt=L("opacityReverse"),Jdt=L("opacityZero"),tht=L("opacityTickFormat"),eht=L("rScale"),yU=L("rDomain"),mU=L("rRange"),nht=L("rClamp"),rht=L("rNice"),iht=L("rZero"),sht=L("lengthScale"),oht=L("lengthDomain"),aht=L("lengthRange"),lht=L("lengthClamp"),cht=L("lengthNice"),uht=L("lengthZero"),gU=L("projectionType"),fht=L("projectionParallels"),dht=L("projectionPrecision"),bU=L("projectionRotate"),hht=L("projectionDomain"),pht=L("projectionInset"),yht=L("projectionInsetLeft"),mht=L("projectionInsetRight"),ght=L("projectionInsetTop"),bht=L("projectionInsetBottom"),vht=L("projectionClip"),wht=Object.freeze(Object.defineProperty({__proto__:null,align:Eut,aspectRatio:Aut,attribute:lU,attributes:iE,axis:Mut,colorClamp:Ldt,colorDomain:yx,colorInterpolate:Udt,colorLabel:jdt,colorNice:Cdt,colorPivot:Pdt,colorRange:mx,colorReverse:Vdt,colorScale:px,colorScheme:tf,colorSymmetric:zdt,colorTickFormat:qdt,colorZero:Ydt,facetGrid:Bft,facetLabel:Rft,facetMargin:Nft,facetMarginBottom:kft,facetMarginLeft:Oft,facetMarginRight:Fft,facetMarginTop:Dft,fxAlign:Yft,fxAriaDescription:ldt,fxAriaLabel:adt,fxAxis:Gft,fxDomain:Lft,fxFontVariant:odt,fxGrid:edt,fxInset:Pft,fxInsetLeft:zft,fxInsetRight:jft,fxLabel:rdt,fxLabelAnchor:idt,fxLabelOffset:sdt,fxLine:ndt,fxNice:Uft,fxPadding:qft,fxPaddingInner:Wft,fxPaddingOuter:Hft,fxRange:Cft,fxReverse:cdt,fxRound:Vft,fxTickFormat:Jft,fxTickPadding:Zft,fxTickRotate:tdt,fxTickSize:Qft,fxTickSpacing:Kft,fxTicks:Xft,fyAlign:gdt,fyAriaDescription:Bdt,fyAriaLabel:Fdt,fyAxis:_dt,fyDomain:udt,fyFontVariant:Odt,fyGrid:Mdt,fyInset:hdt,fyInsetBottom:ydt,fyInsetTop:pdt,fyLabel:Ndt,fyLabelAnchor:Ddt,fyLabelOffset:kdt,fyLine:$dt,fyNice:ddt,fyPadding:bdt,fyPaddingInner:vdt,fyPaddingOuter:wdt,fyRange:fdt,fyReverse:Rdt,fyRound:mdt,fyTickFormat:Edt,fyTickPadding:Tdt,fyTickRotate:Adt,fyTickSize:xdt,fyTickSpacing:Idt,fyTicks:Sdt,grid:Nut,height:Ms,inset:$ut,label:Dut,lengthClamp:lht,lengthDomain:oht,lengthNice:cht,lengthRange:aht,lengthScale:sht,lengthZero:uht,margin:Iut,marginBottom:Tut,marginLeft:dh,marginRight:fx,marginTop:dx,margins:cU,name:xut,opacityClamp:Xdt,opacityDomain:Hdt,opacityLabel:Kdt,opacityNice:Qdt,opacityRange:Gdt,opacityReverse:Zdt,opacityScale:Wdt,opacityTickFormat:tht,opacityZero:Jdt,padding:kut,projectionClip:vht,projectionDomain:hht,projectionInset:pht,projectionInsetBottom:bht,projectionInsetLeft:yht,projectionInsetRight:mht,projectionInsetTop:ght,projectionParallels:fht,projectionPrecision:dht,projectionRotate:bU,projectionType:gU,rClamp:nht,rDomain:yU,rNice:rht,rRange:mU,rScale:eht,rZero:iht,round:Out,style:uU,width:Bi,xAlign:jut,xAriaDescription:ift,xAriaLabel:rft,xAxis:fU,xClamp:Put,xDomain:ri,xFontVariant:nft,xGrid:Kut,xInset:Lut,xInsetLeft:Cut,xInsetRight:Uut,xLabel:Jut,xLabelAnchor:tft,xLabelOffset:eft,xLine:Zut,xNice:Rut,xPadding:Vut,xPaddingInner:Yut,xPaddingOuter:qut,xRange:But,xReverse:sft,xRound:zut,xScale:Fut,xTickFormat:sE,xTickPadding:Xut,xTickRotate:Qut,xTickSize:Hut,xTickSpacing:Gut,xTicks:Wut,xZero:oft,xyDomain:C1,yAlign:pft,yAriaDescription:Mft,yAriaLabel:Aft,yAxis:dU,yClamp:dft,yDomain:oE,yFontVariant:Eft,yGrid:U1,yInset:cft,yInsetBottom:fft,yInsetTop:uft,yLabel:hU,yLabelAnchor:Ift,yLabelOffset:Tft,yLine:xft,yNice:lft,yPadding:yft,yPaddingInner:mft,yPaddingOuter:gft,yRange:aft,yReverse:pU,yRound:hft,yScale:hx,yTickFormat:Fh,yTickPadding:_ft,yTickRotate:Sft,yTickSize:vft,yTickSpacing:wft,yTicks:bft,yZero:$ft},Symbol.toStringTag,{value:"Module"}));function Oe(e,t){return{table:e,options:t}}function aE(e){return typeof e!="string"?!1:(e=e.toLowerCase().trim(),e==="none"||e==="currentcolor"||e.startsWith("url(")&&e.endsWith(")")||e.startsWith("var(")&&e.endsWith(")")||Pa(e)!==null)}const _ht=new Set(["order","sort","label","anchor","curve","tension","marker","markerStart","markerMid","markerEnd","textAnchor","lineAnchor","lineHeight","textOverflow","monospace","fontFamily","fontSize","fontStyle","fontVariant","fontWeight","frameAnchor","strokeLinejoin","strokeLinecap","strokeMiterlimit","strokeDasharray","strokeDashoffset","mixBlendMode","shapeRendering","imageRendering","preserveAspectRatio","interpolate","crossOrigin","paintOrder","pointerEvents"]);function Sht(e){return _ht.has(e)}const xht=new Set(["asterisk","circle","cross","diamond","diamond2","hexagon","plus","square","square2","star","times","triangle","triangle2","wye"]);function Iht(e){return xht.has(`${e}`.toLowerCase())}function lE(e){return typeof(e==null?void 0:e.getChild)=="function"}const Tht=2,Eht=10;function vU(e){return lE(e)?Aht(e):e}function Aht(e){const{batches:t,numRows:n}=e;if(!n)return[];const r=Array.from({length:n},()=>({}));for(let i=0,s=0;s<t.length;++s){const o=t[s],{schema:a,numRows:l,numCols:c}=o;for(let u=0;u<c;++u){const f=o.getChildAt(u),{name:d,type:h}=a.fields[u],p=Mht(h);for(let g=i,v=0;v<l;++v,++g)r[g][d]=p(f.get(v))}i+=l}return r}function Mht(e){const{typeId:t}=e;return t===Eht?n=>n==null?n:new Date(n):t===Tht&&e.bitWidth>=64?n=>n==null?n:Number(n):n=>n}const wU=e=>e==="stroke"||e==="fill",$ht=e=>e==="symbol",Nht=(e,t)=>e!=="sort"&&t!=null&&!Array.isArray(t),$_=(e,t)=>({channel:e,field:t,as:t instanceof Ra?t.column:e}),N_=(e,t)=>({channel:e,value:t});class yd extends ty{constructor(t,n,r,i={}){var l;super((l=n==null?void 0:n.options)==null?void 0:l.filterBy),this.type=t,this.reqs=i,this.source=n,Array.isArray(this.source)&&(this.data=this.source);const s=this.channels=[],o=this.params=new Set,a=(c,u)=>{const f=typeof u;if(f==="function"&&u[PO]){const d=u(this,c);for(const h in d)a(h,d[h])}else if(f==="string")Sht(c)||wU(c)&&aE(u)||$ht(c)&&Iht(u)?s.push(N_(c,u)):s.push($_(c,JI(u)));else if(Sf(u))if(Array.isArray(u.columns))s.push($_(c,u)),o.add(u);else{const d=N_(c,u.value);s.push(d),u.addEventListener("value",h=>(d.value=h,this.update()))}else f==="object"&&Nht(c,u)?s.push($_(c,u)):u!==void 0&&s.push(N_(c,u))};for(const c in r)a(c,r[c])}setPlot(t,n){var r;this.plot=t,this.index=n,t.addParams(this,this.params),(r=this.source)!=null&&r.table&&this.queryPending()}hasOwnData(){return this.source==null||Array.isArray(this.source)}channel(t){return this.channels.find(n=>n.channel===t)}channelField(...t){const n=t.flat();for(const r of n){const i=this.channel(r);if(i!=null&&i.field)return i}return null}fields(){var s,o,a;if(this.hasOwnData())return null;const{source:{table:t},channels:n,reqs:r}=this,i=new Map;for(const{channel:l,field:c}of n){const u=c==null?void 0:c.column;if(u){if((s=c.stats)!=null&&s.length||r[l]){i.has(u)||i.set(u,new Set);const f=i.get(u);(o=r[l])==null||o.forEach(d=>f.add(d)),(a=c.stats)==null||a.forEach(d=>f.add(d))}}else continue}return Array.from(i,([l,c])=>({table:t,column:l,stats:Array.from(c)}))}fieldInfo(t){return this.stats=t.reduce((n,r)=>(n[r.column]=r,n),Object.create(null)),this}query(t=[]){if(this.hasOwnData())return null;const{channels:n,source:{table:r}}=this;return _U(n,r).where(t)}queryPending(){return this.plot.pending(this),this}queryResult(t){return this.data=vU(t),this}update(){return this.plot.update(this)}plotSpecs(){const{type:t,data:n,channels:r}=this,i={};for(const s of r)i[s.channel]=va(s);return[{type:t,data:n,options:i}]}}function va(e){return Object.hasOwn(e,"value")?e.value:wU(e.channel)?{value:e.as,scale:"color"}:e.as}function _U(e,t,n=[]){const r=Lt.from({source:t}),i=new Set;let s=!1;for(const o of e){const{channel:a,field:l,as:c}=o;if(!n.includes(a)){if(a==="order")r.orderby(o.value);else if(l){if(l.aggregate)s=!0;else{if(i.has(c))continue;i.add(c)}r.select({[c]:l})}}}return s&&r.groupby(Array.from(i)),r}function Wa(e,t,n){if(!e.stats)return r;const{field:r}=e.channelField(t),{type:i}=e.stats[r.column];return n=n??r,i==="date"?TO(n):n}function gx(e,t,n,r,i=!1,s=1){const o=(r-s)/(n-t),a=o!==1?` * ${o}::DOUBLE`:"";return i?G`(${+n} - ${e}::DOUBLE)${a}`:G`(${e}::DOUBLE - ${+t})${a}`}const SU={x:["min","max"]},xU={y:["min","max"]},IU={...SU,...xU};function TU(e,t,n,r,i){const{plot:s,stats:o}=e,a=s.getAttribute(r),l=s.getAttribute(i);if(Array.isArray(a)&&!a[mc])return a;{const{field:c}=e.channelField(n),{column:u}=c,{min:f,max:d}=o[u],h=EU(t,u)||(l?av().domain([f,d]).nice().domain():[f,d]);return a!==oi&&(h[mc]=!0),s.setAttribute(r,h,{silent:!0}),h}}function Dy(e,t){return TU(e,t,"x","xDomain","xNice")}function ky(e,t){return TU(e,t,"y","yDomain","yNice")}function EU(e,t){if(!e)return;let n,r;const i=(s,o)=>{if(s==="BETWEEN"&&o.field.column===t){const{range:a}=o;a&&(n==null||a[0]<n)&&(n=a[0]),a&&(r==null||a[1]>r)&&(r=a[1])}};return Array.isArray(e)?e.forEach(s=>{var o;return(o=s.visit)==null?void 0:o.call(s,i)}):e.visit&&e.visit(i),n!=null&&r!=null&&n!==r?[n,r]:void 0}class Dht extends yd{constructor(t,n,r){const i=t.endsWith("X")?"y":"x",s={[i]:["count","min","max"]};super(t,n,r,s),this.dim=i}query(t=[]){const{plot:n,dim:r,source:i,stats:s}=this,{optimize:o=!0}=i.options||{},{field:a,as:l}=this.channelField(r),c=super.query(t);if(o){const{column:u}=a,{count:f,max:d,min:h}=s[u],p=r==="x"?n.innerWidth():n.innerHeight(),[g,v]=EU(t,u)||[h,d],y=(v-g)/(d-h);if(f*y>p*4){const m=Wa(this,r,l),b=this.channelField(r==="x"?"y":"x").as,w=c.select().map(S=>S.as).filter(S=>S!==l&&S!==b);return kht(c,m,l,b,g,v,p,w)}}return c.orderby(l)}}function kht(e,t,n,r,i,s,o,a=[]){const l=G`FLOOR(${o/(s-i)}::DOUBLE * (${t} - ${+i}::DOUBLE))::INTEGER`,c=u=>Lt.from(e).select(u).groupby(l,a);return Lt.union(c([{[n]:ap(n),[r]:DM(r,n)},...a]),c([{[n]:op(n),[r]:kM(r,n)},...a]),c([{[n]:DM(n,r),[r]:ap(r)},...a]),c([{[n]:kM(n,r),[r]:op(r)},...a])).orderby(a,n)}function bx(e,t=!1){const n=new Float64Array(5),r=new Float64Array(4);Oht(n,r,e);const i=Float64Array.of(0,r[1]-n[1]*r[0],r[2]-n[2]*r[0],r[3]-n[3]*r[0],-n[4]*r[0]),s=1+n[1]+n[2]+n[3]+n[4],o=(r[0]+r[1]+r[2]+r[3])/s,a=(i[1]+i[2]+i[3]+i[4])/s;return{sigma:e,negative:t,a:n,b_causal:r,b_anticausal:i,sum_causal:o,sum_anticausal:a}}function Oht(e,t,n){const i=Float64Array.of(.84,1.8675,.84,-1.8675,-.34015,-.1299,-.34015,.1299),s=Math.exp(-1.783/n),o=Math.exp(-1.723/n),a=.6318/n,l=1.997/n,c=Float64Array.of(-s*Math.cos(a),s*Math.sin(a),-s*Math.cos(-a),s*Math.sin(-a),-o*Math.cos(l),o*Math.sin(l),-o*Math.cos(-l),o*Math.sin(-l)),u=n*2.5066282746310007,f=Float64Array.of(i[0],i[1],0,0,0,0,0,0),d=Float64Array.of(1,0,c[0],c[1],0,0,0,0,0,0);let h,p;for(p=2;p<8;p+=2){for(f[p]=c[p]*f[p-2]-c[p+1]*f[p-1],f[p+1]=c[p]*f[p-1]+c[p+1]*f[p-2],h=p-2;h>0;h-=2)f[h]+=c[p]*f[h-2]-c[p+1]*f[h-1],f[h+1]+=c[p]*f[h-1]+c[p+1]*f[h-2];for(h=0;h<=p;h+=2)f[h]+=i[p]*d[h]-i[p+1]*d[h+1],f[h+1]+=i[p]*d[h+1]+i[p+1]*d[h];for(d[p+2]=c[p]*d[p]-c[p+1]*d[p+1],d[p+3]=c[p]*d[p+1]+c[p+1]*d[p],h=p;h>0;h-=2)d[h]+=c[p]*d[h-2]-c[p+1]*d[h-1],d[h+1]+=c[p]*d[h-1]+c[p+1]*d[h-2]}for(p=0;p<4;++p)h=p<<1,t[p]=f[h]/u,e[p+1]=d[h+2]}function Fht(e,t,n,[r,i]){const s=new Float64Array(Math.max(r,i)),o=new Float64Array(Math.max(r,i)),a=new Float64Array(5),l=new Float64Array(n.length);for(let c=0,u=0;c<i;++c,u+=r){const f=l.subarray(u);vx(e,n.subarray(u),r,1,s,o,a,f)}for(let c=0;c<r;++c){const u=l.subarray(c);vx(t,u,i,r,s,o,a,u)}return l}function vx(e,t,n,r=1,i=new Float64Array(n),s=new Float64Array(n),o=new Float64Array(5),a=i,l=Bht){const c=r*2,u=r*3,f=r*4,d=r*n;let h,p;for(l(i,t,n,r,e.b_causal,3,e.a,4,e.sum_causal,o,e.sigma),p=4,h=f;p<n;++p,h+=r)i[p]=e.b_causal[0]*t[h]+e.b_causal[1]*t[h-r]+e.b_causal[2]*t[h-c]+e.b_causal[3]*t[h-u]-e.a[1]*i[p-1]-e.a[2]*i[p-2]-e.a[3]*i[p-3]-e.a[4]*i[p-4];for(l(s,t,n,-r,e.b_anticausal,4,e.a,4,e.sum_anticausal,o,e.sigma),p=4,h=d-r*5;p<n;++p,h-=r)s[p]=e.b_anticausal[1]*t[h+r]+e.b_anticausal[2]*t[h+c]+e.b_anticausal[3]*t[h+u]+e.b_anticausal[4]*t[h+f]-e.a[1]*s[p-1]-e.a[2]*s[p-2]-e.a[3]*s[p-3]-e.a[4]*s[p-4];if(e.negative)for(p=0,h=0;p<n;++p,h+=r)a[h]=i[p]+s[n-p-1];else for(p=0,h=0;p<n;++p,h+=r)a[h]=Math.max(0,i[p]+s[n-p-1]);return a}function Bht(e,t,n,r,i,s,o,a,l,c){const u=Math.abs(r)*n,f=r<0?u+r:0;let d,h,p;for(h=0;h<a;++h)for(c[h]=h<=s?i[h]:0,p=1;p<=a&&p<=h;++p)c[h]-=o[p]*c[h-p];for(p=0;p<a;++p)for(e[p]=0,h=1;h<=p;++h)d=f+r*h,d>=0&&d<u&&(e[p]+=c[p-h]*t[d]);const g=t[f];if(g>0)for(p=0;p<a;++p)e[p]+=c[p]*g}function Rht(e,t){return AU(new Float64Array(e),t)}function Lht(e,t,n,r=[]){return r.length?Object.values(Cht(e*t,n,r)):[{grid:AU(new Float64Array(e*t),n)}]}function AU(e,t){if(lE(t)){const n=t.numRows;if(n===0)return e;const r=t.getChild("index").toArray(),i=t.getChild("value").toArray();for(let s=0;s<n;++s)e[r[s]]=i[s]}else for(const n of t)e[n.index]=n.value;return e}function Cht(e,t,n){const r={},i=s=>(r[s]||(r[s]={key:s,grid:new Float64Array(e)})).grid;if(lE(t)){const s=t.numRows;if(s===0)return r;const o=t.getChild("index").toArray(),a=t.getChild("value").toArray(),l=n.map(c=>t.getChild(c));for(let c=0;c<s;++c){const u=l.map(f=>f.get(c));i(u)[o[c]]=a[c]}}else for(const s of t){const o=n.map(a=>s[a]);i(o)[s.index]=s.value}return r}function fi(e,t,n,r){$a(n)?(r=r||(()=>e.requestUpdate()),n.addEventListener("value",i=>(e[t]=i,r())),e[t]=n.value):e[t]=n}class MU extends yd{constructor(t,n,r){const{bins:i=1024,bandwidth:s=20,...o}=r,a=t.endsWith("X")?"y":"x";super(t,n,o,a==="x"?SU:xU),this.dim=a,fi(this,"bins",i),fi(this,"bandwidth",s,()=>this.grid?this.convolve().update():null)}get filterIndexable(){const t=this.dim==="x"?"xDomain":"yDomain",n=this.plot.getAttribute(t);return n&&!n[mc]}query(t=[]){if(this.hasOwnData())throw new Error("Density1DMark requires a data source");const{bins:n,channels:r,dim:i,source:{table:s}}=this,[o,a]=this.extent=(i==="x"?Dy:ky)(this,t),l=Wa(this,i);return Uht(_U(r,s,[i]).where(t.concat(Rr(l,[o,a]))),gx(l,o,a,n),this.channelField("weight")?"weight":null)}queryResult(t){return this.grid=Rht(this.bins,t),this.convolve()}convolve(){const{bins:t,bandwidth:n,dim:r,grid:i,plot:s,extent:[o,a]}=this,l=i.some(m=>m<0),c=r==="x"?s.innerWidth():s.innerHeight(),u=bx(n*(t-1)/c,l),f=vx(u,i,t),d=this.data=[],h=r==="x"?"y":"x",p=this.channelField(r).as,g=+o,v=(a-g)/(t-1),y=1/v;for(let m=0;m<t;++m)d.push({[p]:g+m*v,[h]:f[m]*y});return this}plotSpecs(){const{type:t,data:n,channels:r,dim:i}=this,s=i==="x"?{y:"y"}:{x:"x"};for(const o of r)s[o.channel]=va(o);return[{type:t,data:n,options:s}]}}function Uht(e,t,n){const r=n?`* ${n}`:"",i=e.clone().select({p:t,i:G`FLOOR(p)::INTEGER`,w:G`(FLOOR(p) + 1 - p)${r}`}),s=e.clone().select({p:t,i:G`FLOOR(p)::INTEGER + 1`,w:G`(p - FLOOR(p))${r}`});return Lt.from(Lt.unionAll(i,s)).select({index:"i",value:ed("w")}).groupby("index").having(IO("value",0))}class Yv extends yd{constructor(t,n,r){const{bandwidth:i=20,binType:s="linear",binWidth:o=2,binPad:a=1,...l}=r,c=Pht(l);super(t,n,l,IU),this.densityMap=c,fi(this,"bandwidth",i,()=>this.grids?this.convolve().update():null),fi(this,"binWidth",o),fi(this,"binType",s),fi(this,"binPad",a)}setPlot(t,n){const r=()=>{this.stats&&this.requestUpdate()};return t.addAttributeListener("domainX",r),t.addAttributeListener("domainY",r),super.setPlot(t,n)}get filterIndexable(){const t=this.plot.getAttribute("xDomain"),n=this.plot.getAttribute("yDomain");return t&&n&&!t[mc]&&!n[mc]}query(t=[]){const{plot:n,binType:r,binPad:i,channels:s,densityMap:o,source:a}=this,[l,c]=this.extentX=Dy(this,t),[u,f]=this.extentY=ky(this,t),[d,h]=this.bins=this.binDimensions(this),p=Wa(this,"x"),g=Wa(this,"y"),v=!!n.getAttribute("xReverse"),y=!!n.getAttribute("yReverse"),m=EN(p,l,c,d,v,this.binPad),b=EN(g,u,f,h,y,this.binPad),w=i?[Rr(p,[l,c]),Rr(g,[u,f])]:[kg(l,p),Dg(p,c),kg(u,g),Dg(g,f)],S=Lt.from(a.table).where(t.concat(w)),_=this.groupby=[];let x=hr();for(const E of s)if(Object.hasOwn(E,"field")){const{as:N,channel:I,field:A}=E;A.aggregate?(x=A,o[I]=!0):I==="weight"?x=ed(A):I!=="x"&&I!=="y"&&(S.select({[N]:A}),_.push(N))}return r==="linear"?jht(S,m,b,x,d,_):zht(S,m,b,x,d,_)}binDimensions(){const{plot:t,binWidth:n}=this;return[Math.round(t.innerWidth()/n),Math.round(t.innerHeight()/n)]}queryResult(t){const[n,r]=this.bins;return this.grids=Lht(n,r,t,this.groupby),this.convolve()}convolve(){const{bandwidth:t,bins:n,grids:r,plot:i}=this;if(t<=0)this.kde=this.grids.map(({key:s,grid:o})=>(o.key=s,o));else{const s=i.innerWidth(),o=i.innerHeight(),[a,l]=n,c=r.some(({grid:d})=>d.some(h=>h<0)),u=bx(t*(a-1)/s,c),f=bx(t*(l-1)/o,c);this.kde=this.grids.map(({key:d,grid:h})=>{const p=Fht(u,f,h,n);return p.key=d,p})}return this}plotSpecs(){throw new Error("Unimplemented. Use a Grid2D mark subclass.")}}function Pht(e){const t={};for(const n in e)e[n]==="density"&&(delete e[n],t[n]=!0);return t}function EN(e,t,n,r,i,s){const o=(r-s)/(n-t),a=o!==1?` * ${o}::DOUBLE`:"";return i?G`(${n} - ${e}::DOUBLE)${a}`:G`(${e}::DOUBLE - ${t})${a}`}function zht(e,t,n,r,i,s){return e.select({index:G`FLOOR(${t})::INTEGER + FLOOR(${n})::INTEGER * ${i}`,value:r}).groupby("index",s)}function jht(e,t,n,r,i,s){const o=r.column?`* ${r.column}`:"",a=(d,h)=>e.clone().select({xp:t,yp:n,i:d,w:h}),l=a(G`FLOOR(xp)::INTEGER + FLOOR(yp)::INTEGER * ${i}`,G`(FLOOR(xp)::INTEGER + 1 - xp) * (FLOOR(yp)::INTEGER + 1 - yp)${o}`),c=a(G`FLOOR(xp)::INTEGER + (FLOOR(yp)::INTEGER + 1) * ${i}`,G`(FLOOR(xp)::INTEGER + 1 - xp) * (yp - FLOOR(yp)::INTEGER)${o}`),u=a(G`FLOOR(xp)::INTEGER + 1 + FLOOR(yp)::INTEGER * ${i}`,G`(xp - FLOOR(xp)::INTEGER) * (FLOOR(yp)::INTEGER + 1 - yp)${o}`),f=a(G`FLOOR(xp)::INTEGER + 1 + (FLOOR(yp)::INTEGER + 1) * ${i}`,G`(xp - FLOOR(xp)::INTEGER) * (yp - FLOOR(yp)::INTEGER)${o}`);return Lt.from(Lt.unionAll(l,c,u,f)).select({index:"i",value:ed("w")},s).groupby("index",s).having(IO("value",0))}class Vht extends Yv{constructor(t,n){const{type:r="dot",binsX:i,binsY:s,...o}=n;o.binPad=o.binPad??0,super(r,t,o),fi(this,"binsX",i),fi(this,"binsY",s)}convolve(){super.convolve();const{bins:t,binPad:n,extentX:r,extentY:i}=this,[s,o]=t,[a,l]=r,[c,u]=i,f=(l-a)/(s-n),d=(u-c)/(o-n),h=n?0:.5;return this.data=Yht(this.kde,t,a,c,f,d,h),this}binDimensions(){const{plot:t,binWidth:n,binsX:r,binsY:i}=this;return[r??Math.round(t.innerWidth()/n),i??Math.round(t.innerHeight()/n)]}plotSpecs(){const{type:t,channels:n,densityMap:r,data:i}=this,s={};for(const o of n){const{channel:a}=o;s[a]=a==="x"||a==="y"?a:va(o)}for(const o in r)r[o]&&(s[o]="density");return[{type:t,data:i,options:s}]}}function Yht(e,t,n,r,i,s,o){const a=1/(i*s),[l,c]=t,u=[];for(const f of e)for(let d=0,h=0;h<c;++h)for(let p=0;p<l;++p,++d)u.push({x:n+(p+o)*i,y:r+(h+o)*s,density:f[d]*a});return u}function $U(e,t,n,r,i,s){const o=(s.length>>2)-1;for(let a=0,l=0;a<r;++a)for(let c=0,u=(r-a-1)*n;c<n;++c,l+=4){const f=o*i(e[c+u])<<2;t[l+0]=s[f+0],t[l+1]=s[f+1],t[l+2]=s[f+2],t[l+3]=s[f+3]}}function P1(e,t){const n=new Uint8ClampedArray(4*e),r=e-1;for(let i=0;i<=r;++i){const s=t(i/r),{r:o,g:a,b:l,opacity:c=1}=typeof s=="string"?gi(s):s,u=i<<2;n[u+0]=o,n[u+1]=a,n[u+2]=l,n[u+3]=255*c|0}return n}function NU(e,t){if(typeof document<"u"){const n=document.createElement("canvas");return n.setAttribute("width",e),n.setAttribute("height",t),n}throw new Error("Can not create a canvas instance.")}function DU(e="black"){const{r:t,g:n,b:r}=gi(e);return i=>({r:t,g:n,b:r,opacity:i})}class kU extends Yv{constructor(t,n){super("image",t,n)}setPlot(t,n){const r=()=>{this.stats&&this.rasterize()};t.addAttributeListener("schemeColor",r),super.setPlot(t,n)}convolve(){return super.convolve().rasterize()}rasterize(){var d;const{bins:t,kde:n,groupby:r}=this,[i,s]=t,{canvas:o,ctx:a,img:l}=qht(this,i,s),c=Wht(this),u=r.indexOf((d=this.channelField("fill"))==null?void 0:d.as),f=u<0?[]:n.map(({key:h})=>h[u]);return this.data=n.map(h=>{var g;const p=Hht(this,f,(g=h.key)==null?void 0:g[u]);return $U(h,l.data,i,s,c,p),a.putImageData(l,0,0),{src:o.toDataURL()}}),this}plotSpecs(){var s;const{type:t,plot:n,data:r}=this,i={src:"src",width:n.innerWidth(),height:n.innerHeight(),preserveAspectRatio:"none",imageRendering:(s=this.channel("imageRendering"))==null?void 0:s.value,frameAnchor:"middle"};return[{type:t,data:r,options:i}]}}function qht(e,t,n){if(!e.image||e.image.w!==t||e.image.h!==n){const r=NU(t,n),i=r.getContext("2d",{willReadFrequently:!0}),s=i.getImageData(0,0,t,n);e.image={canvas:r,ctx:i,img:s,w:t,h:n}}return e.image}function Wht(e){const{densityMap:t,kde:n,plot:r}=e;let i=t.fill&&r.getAttribute("colorDomain");if(!i){let o=0,a=0;n.forEach(l=>{for(const c of l)c<o&&(o=c),c>a&&(a=c)}),i=o===0&&a===0?[0,1]:[o,a]}const s=r.getAttribute("colorScale");return Ac({x:{type:s,domain:i,range:[0,1]}}).apply}function Hht(e,t,n,r=1024){const{densityMap:i,plot:s}=e,o=s.getAttribute("colorScheme");let a;if(i.fill){if(o)try{return P1(r,Ac({color:{scheme:o,domain:[0,1]}}).interpolate)}catch(l){console.warn(l)}}else if(t.length){const l=s.getAttribute("colorRange");a=Ac({color:{domain:t,range:l,scheme:o||(l?void 0:"tableau10")}}).apply(n)}else{const l=e.channelField("fill");a=aE(l==null?void 0:l.value)?l.value:void 0}return P1(r,DU(a))}class Ght extends kU{constructor(t,n){const{normalize:r=!0,...i}=n;super(t,{bandwidth:0,...i}),fi(this,"normalize",r)}query(t=[]){const{plot:n,channels:r,normalize:i,source:s}=this,[o,a]=Dy(this,t),[l,c]=ky(this,t),[u,f]=this.bins=this.binDimensions(this),d=Wa(this,"x"),h=Wa(this,"y"),p=!!n.getAttribute("xReverse"),g=!!n.getAttribute("yReverse"),v=gx(d,o,a,u,p,this.binPad),y=gx(h,l,c,f,g,this.binPad),m=Lt.from(s.table).where(Xht(this,t)),b=this.groupby=[],w=[];for(const S of r)if(Object.hasOwn(S,"field")){const{channel:_,field:x}=S;_==="z"?(m.select({[_]:x}),w.push("z")):_!=="x"&&_!=="y"&&(m.select({[_]:x}),b.push(_))}return Qht(m,v,y,w,u,f,b,i)}}function Xht(e,t){if(Array.isArray(t)&&!t.length)return t;const n=e.channelField("x").field.column,r=e.channelField("y").field.column,i=o=>o.op!=="BETWEEN"||o.field.column!==n&&o.field.column!==r,s=o=>o.op==="AND"?pc(o.children.filter(a=>i(a))):o;return Array.isArray(t)?t.filter(o=>i(o)).map(o=>s(o)):s(t)}function Qht(e,t,n,r,i,s,o=[],a=!0){e.select({x:G`FLOOR(${t})::INTEGER`,y:G`FLOOR(${n})::INTEGER`});const l=o.concat(r),c=l.length?`PARTITION BY ${l.join(", ")} `:"",u=Lt.from(e).select(l,{x0:"x",y0:"y",dx:G`(lead(x) OVER sw - x)`,dy:G`(lead(y) OVER sw - y)`}).window({sw:G`${c}ORDER BY x ASC`}).qualify(pc(G`(x0 < ${i} OR x0 + dx < ${i})`,G`(y0 < ${s} OR y0 + dy < ${s})`,G`(x0 > 0 OR x0 + dx > 0)`,G`(y0 > 0 OR y0 + dy > 0)`)),f=Lt.select({x:G`GREATEST(MAX(ABS(dx)), MAX(ABS(dy)))`}).from("pairs"),d=Lt.select({i:G`UNNEST(range((${f})))::INTEGER`}),h=Lt.unionAll(Lt.select(l,{x:G`x0 + i`,y:G`y0 + ROUND(i * dy / dx::FLOAT)::INTEGER`}).from("pairs","indices").where(G`ABS(dy) <= ABS(dx) AND i < ABS(dx)`),Lt.select(l,{x:G`x0 + ROUND(SIGN(dy) * i * dx / dy::FLOAT)::INTEGER`,y:G`y0 + SIGN(dy) * i`}).from("pairs","indices").where(G`ABS(dy) > ABS(dx) AND i < ABS(dy)`),Lt.select(l,{x:"x0",y:"y0"}).from("pairs").where(xO("dx"))),p=["x"].concat(l).join(", "),g=Lt.from("raster").select(l,"x","y",a?{w:G`1.0 / COUNT(*) OVER (PARTITION BY ${p})`}:null).where(pc(Rr("x",[0,i]),Rr("y",[0,s])));return Lt.with({pairs:u,indices:d,raster:h,points:g}).from("points").select(o,{index:G`x + y * ${i}::INTEGER`,value:a?ed("w"):hr()}).groupby("index",o)}class Kht extends Yv{constructor(t,n){const{thresholds:r=10,...i}=n;super("geo",t,i),fi(this,"thresholds",r,()=>this.grids?this.contours().update():null)}convolve(){return super.convolve().contours()}contours(){const{bins:t,densityMap:n,kde:r,thresholds:i,groupby:s,plot:o}=this;let a=i;if(!Array.isArray(a)){const S=$e(r.map(_=>$e(_)));a=Array.from({length:a-1},(_,x)=>S*(x+1)/a)}(n.fill||n.stroke)&&this.plot.getAttribute("colorScale")!=="log"&&this.plot.setAttribute("colorZero",!0);const[l,c]=t,[u,f]=o.getAttribute("xDomain"),[d,h]=o.getAttribute("yDomain"),p=(f-u)/l,g=(h-d)/c,v=+u,y=+d,m=S=>v+S*p,b=S=>y+S*g,w=jg().size(t);return this.data=r.flatMap(S=>a.map(_=>{const x=Zht(w.contour(S,_),m,b);return s.forEach((E,N)=>x[E]=S.key[N]),x.density=_,x})),this}plotSpecs(){const{type:t,channels:n,densityMap:r,data:i}=this,s={};for(const o of n){const{channel:a}=o;a!=="x"&&a!=="y"&&(s[a]=va(o))}return r.fill&&(s.fill="density"),r.stroke&&(s.stroke="density"),[{type:t,data:i,options:s}]}}function Zht(e,t,n){function r(o){o.forEach(i)}function i(o){o.forEach(s)}function s(o){o[0]=t(o[0]),o[1]=n(o[1])}return e.coordinates.forEach(r),e}class Jht extends yd{constructor(t,n){const{type:r="hexagon",binWidth:i=20,...s}=n;super(r,t,{r:i/2,clip:!0,...s},IU),this.binWidth=i}get filterIndexable(){const t=this.plot.getAttribute("xDomain"),n=this.plot.getAttribute("yDomain");return t&&n&&!t[mc]&&!n[mc]}query(t=[]){if(this.hasOwnData())return null;const{plot:n,binWidth:r,channels:i,source:s}=this,[o,a]=Dy(this,t),[l,c]=ky(this,t),u=.5-n.getAttribute("marginLeft"),f=0-n.getAttribute("marginTop"),d=`${r}::DOUBLE`,h=`${r*(1.5/Math.sqrt(3))}::DOUBLE`,p=`${n.innerWidth()/(a-o)}::DOUBLE`,g=`${n.innerHeight()/(c-l)}::DOUBLE`;let v,y;const m=new Set,b={};for(const E of i)E.channel==="order"?w.orderby(E.value):E.channel==="x"?v=E:E.channel==="y"?y=E:Object.hasOwn(E,"field")&&(b[E.as]=E.field,E.field.aggregate&&E.field.columns.forEach(N=>m.add(N)));const w=Lt.select({[v.as]:G`${o}::DOUBLE + ((x + 0.5 * (y & 1)) * ${d} + ${u})::DOUBLE / ${p}`,[y.as]:G`${c}::DOUBLE - (y * ${h} + ${f})::DOUBLE / ${g}`,...b}).groupby("x","y"),S=`${p} * (${v.field} - ${o}::DOUBLE)`,_=`${g} * (${c}::DOUBLE - ${y.field})`,x=Lt.select({py:G`(${_} - ${f}) / ${h}`,pj:G`ROUND(py)::INTEGER`,px:G`(${S} - ${u}) / ${d} - 0.5 * (pj & 1)`,pi:G`ROUND(px)::INTEGER`,tt:G`ABS(py-pj) * 3 > 1 AND (px-pi)**2 + (py-pj)**2 > (px - pi - 0.5 * CASE WHEN px < pi THEN -1 ELSE 1 END)**2 + (py - pj - CASE WHEN py < pj THEN -1 ELSE 1 END)**2`,x:G`CASE WHEN tt THEN (pi + (CASE WHEN px < pi THEN -0.5 ELSE 0.5 END) + (CASE WHEN pj & 1 <> 0 THEN 0.5 ELSE -0.5 END))::INTEGER ELSE pi END`,y:G`CASE WHEN tt THEN (pj + CASE WHEN py < pj THEN -1 ELSE 1 END)::INTEGER ELSE pj END`}).select(Array.from(m)).from(s.table).where(Ng(v.field),Ng(y.field),t);return w.from(x)}}class tpt extends Yv{constructor(t,n){const{origin:r=[0,0],dim:i="xy",...s}=n;super("image",t,s),this.origin=r,this.tileX=i.toLowerCase().includes("x"),this.tileY=i.toLowerCase().includes("y")}setPlot(t,n){const r=()=>{this.stats&&this.rasterize()};t.addAttributeListener("schemeColor",r),super.setPlot(t,n)}requestQuery(){return this.requestTiles()}query(t=[]){return this._filter=t,null}tileQuery(t){const{plot:n,binType:r,binPad:i,channels:s,densityMap:o,source:a}=this,[[l,c],[u,f]]=t,[d,h]=this.bins,p=Wa(this,"x"),g=Wa(this,"y"),v=!!n.getAttribute("xReverse"),y=!!n.getAttribute("yReverse"),m=AN(p,l,c,d,v,i),b=AN(g,u,f,h,y,i),w=i?[Rr(p,[l,c]),Rr(g,[u,f])]:[kg(l,p),Dg(p,c),kg(u,g),Dg(g,f)],S=Lt.from(a.table).where(w),_=this.groupby=[];let x=hr();for(const E of s)if(Object.hasOwn(E,"field")){const{channel:N,field:I}=E;I.aggregate?(x=I,o[N]=!0):N==="weight"?x=ed(I):N!=="x"&&N!=="y"&&(S.select({[N]:I}),_.push(N))}return r==="linear"?apt(S,m,b,x,d,_):opt(S,m,b,x,d,_)}async requestTiles(){const t=Xn();this.prefetch&&t.cancel(this.prefetch);const{binPad:n,tileX:r,tileY:i,origin:[s,o]}=this,[a,l]=this.bins=this.binDimensions(this),[c,u]=Dy(this,this._filter),[f,d]=ky(this,this._filter),h=u-c,p=d-f,g=Math.floor((c-s)*(a-n)/h),v=Math.floor((f-o)*(l-n)/p),y=(I,A)=>[[s+I*h,s+(I+1)*h],[o+A*p,o+(A+1)*p]],m=Math.floor((c-s)/h),b=r?MN((u-s)/h):m,w=Math.floor((f-o)/p),S=i?MN((d-o)/p):w,_=[];for(let I=m;I<=b;++I)for(let A=w;A<=S;++A)_.push([I,A]);const x=_.map(([I,A])=>t.query(this.tileQuery(y(I,A)))),E=[];if(r)for(let I=w;I<=S;++I)E.push([b+1,I]),E.push([m-1,I]);if(i){const I=r?m-1:m,A=r?b+1:b;for(let k=I;k<=A;++k)E.push([k,S+1]),E.push([k,w-1])}this.prefetch=E.map(([I,A])=>t.prefetch(this.tileQuery(y(I,A))));const N=await Promise.all(x);this.grids=[{grid:ept(a,l,g,v,_,N)}],this.convolve().update()}convolve(){return super.convolve().rasterize()}rasterize(){var d;const{bins:t,kde:n,groupby:r}=this,[i,s]=t,{canvas:o,ctx:a,img:l}=rpt(this,i,s),c=ipt(this),u=r.indexOf((d=this.channelField("fill"))==null?void 0:d.as),f=u<0?[]:n.map(({key:h})=>h[u]);return this.data=n.map(h=>{var g;const p=spt(this,f,(g=h.key)==null?void 0:g[u]);return $U(h,l.data,i,s,c,p),a.putImageData(l,0,0),{src:o.toDataURL()}}),this}plotSpecs(){var s;const{type:t,data:n,plot:r}=this,i={src:"src",width:r.innerWidth(),height:r.innerHeight(),preserveAspectRatio:"none",imageRendering:(s=this.channel("imageRendering"))==null?void 0:s.value,frameAnchor:"middle"};return[{type:t,data:n,options:i}]}}function ept(e,t,n,r,i,s){const o=new Float64Array(e*t);return s.forEach((a,l)=>{const[c,u]=i[l],f=c*e-n,d=u*t-r;npt(e,t,o,a,f,d)}),o}function npt(e,t,n,r,i,s){const o=r.numRows;if(o===0)return;const a=r.getChild("index").toArray(),l=r.getChild("value").toArray();for(let c=0;c<o;++c){const u=a[c],f=i+u%e,d=s+Math.floor(u/e);0<=f&&f<e&&0<=d&&d<t&&(n[f+d*e]=l[c])}}function rpt(e,t,n){if(!e.image||e.image.w!==t||e.image.h!==n){const r=NU(t,n),i=r.getContext("2d",{willReadFrequently:!0}),s=i.getImageData(0,0,t,n);e.image={canvas:r,ctx:i,img:s,w:t,h:n}}return e.image}function ipt(e){const{densityMap:t,kde:n,plot:r}=e;let i=t.fill&&r.getAttribute("colorDomain");if(!i){let o=0,a=0;n.forEach(l=>{for(const c of l)c<o&&(o=c),c>a&&(a=c)}),i=o===0&&a===0?[0,1]:[o,a]}const s=r.getAttribute("colorScale");return Ac({x:{type:s,domain:i,range:[0,1]}}).apply}function spt(e,t,n,r=1024){const{densityMap:i,plot:s}=e,o=s.getAttribute("colorScheme");let a;if(i.fill){if(o)try{return P1(r,Ac({color:{scheme:o,domain:[0,1]}}).interpolate)}catch(l){console.warn(l)}}else if(t.length){const l=s.getAttribute("colorRange");a=Ac({color:{domain:t,range:l,scheme:o||(l?void 0:"tableau10")}}).apply(n)}else{const l=e.channelField("fill");a=aE(l==null?void 0:l.value)?l.value:void 0}return P1(r,DU(a))}function AN(e,t,n,r,i,s){const o=(r-s)/(n-t),a=o!==1?` * ${o}::DOUBLE`:"";return i?G`(${n} - ${e}::DOUBLE)${a}`:G`(${e}::DOUBLE - ${t})${a}`}function opt(e,t,n,r,i,s){return e.select({index:G`FLOOR(${t})::INTEGER + FLOOR(${n})::INTEGER * ${i}`,value:r}).groupby("index",s)}function apt(e,t,n,r,i,s){const o=r.column?`* ${r.column}`:"",a=(d,h)=>e.clone().select({xp:t,yp:n,i:d,w:h}),l=a(G`FLOOR(xp)::INTEGER + FLOOR(yp)::INTEGER * ${i}`,G`(FLOOR(xp)::INTEGER + 1 - xp) * (FLOOR(yp)::INTEGER + 1 - yp)${o}`),c=a(G`FLOOR(xp)::INTEGER + (FLOOR(yp)::INTEGER + 1) * ${i}`,G`(FLOOR(xp)::INTEGER + 1 - xp) * (yp - FLOOR(yp)::INTEGER)${o}`),u=a(G`FLOOR(xp)::INTEGER + 1 + FLOOR(yp)::INTEGER * ${i}`,G`(xp - FLOOR(xp)::INTEGER) * (FLOOR(yp)::INTEGER + 1 - yp)${o}`),f=a(G`FLOOR(xp)::INTEGER + 1 + (FLOOR(yp)::INTEGER + 1) * ${i}`,G`(xp - FLOOR(xp)::INTEGER) * (yp - FLOOR(yp)::INTEGER)${o}`);return Lt.from(Lt.unionAll(l,c,u,f)).select({index:"i",value:ed("w")},s).groupby("index",s).having(BW("value",0))}function MN(e){const t=Math.floor(e);return t===e?t-1:t}function lpt(e,t,n){var r=1e-8,i=t-1,s=n-1,o=0,a,l,c,u,f,d,h,p,g,v,y;if(e<=0)return 0;if(e>=1)return 1;for(t>=1&&n>=1?(c=e<.5?e:1-e,u=Math.sqrt(-2*Math.log(c)),h=(2.30753+u*.27061)/(1+u*(.99229+u*.04481))-u,e<.5&&(h=-h),p=(h*h-3)/6,g=2/(1/(2*t-1)+1/(2*n-1)),v=h*Math.sqrt(p+g)/g-(1/(2*n-1)-1/(2*t-1))*(p+5/6-2/(3*g)),h=t/(t+n*Math.exp(2*v))):(a=Math.log(t/(t+n)),l=Math.log(n/(t+n)),u=Math.exp(t*a)/t,f=Math.exp(n*l)/n,v=u+f,e<u/v?h=Math.pow(t*v*e,1/t):h=1-Math.pow(n*v*(1-e),1/n)),y=-ef(t)-ef(n)+ef(t+n);o<10;o++){if(h===0||h===1)return h;if(d=cpt(h,t,n)-e,u=Math.exp(i*Math.log(h)+s*Math.log(1-h)+y),f=d/u,h-=u=f/(1-.5*Math.min(1,f*(i/h-s/(1-h)))),h<=0&&(h=.5*(h+u)),h>=1&&(h=.5*(h+u+1)),Math.abs(u)<r*h&&o>0)break}return h}function cpt(e,t,n){var r=e===0||e===1?0:Math.exp(ef(t+n)-ef(t)-ef(n)+t*Math.log(e)+n*Math.log(1-e));return e<0||e>1?!1:e<(t+1)/(t+n+2)?r*$N(e,t,n)/t:1-r*$N(1-e,n,t)/n}function $N(e,t,n){var r=1e-30,i=1,s=t+n,o=t+1,a=t-1,l=1,c=1-s*e/o,u,f,d,h;for(Math.abs(c)<r&&(c=r),c=1/c,h=c;i<=100&&(u=2*i,f=i*(n-i)*e/((a+u)*(t+u)),c=1+f*c,Math.abs(c)<r&&(c=r),l=1+f/l,Math.abs(l)<r&&(l=r),c=1/c,h*=c*l,f=-(t+i)*(s+i)*e/((t+u)*(o+u)),c=1+f*c,Math.abs(c)<r&&(c=r),l=1+f/l,Math.abs(l)<r&&(l=r),c=1/c,d=c*l,h*=d,!(Math.abs(d-1)<3e-7));i++);return h}function ef(e){var t=0,n=[76.18009172947146,-86.5053203294167,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18],r=1.000000000190015,i,s,o;for(o=(s=i=e)+5.5,o-=(i+.5)*Math.log(o);t<6;t++)r+=n[t]/++s;return Math.log(2.506628274631*r/i)-o}function upt(e,t){var n=lpt(2*Math.min(e,1-e),.5*t,.5);return n=Math.sqrt(t*(1-n)/n),e>.5?n:-n}class fpt extends yd{constructor(t,n){const{ci:r=.95,precision:i=4,...s}=n;super("line",t,s);const o=()=>this.modelFit?this.confidenceBand().update():null;fi(this,"ci",r,o),fi(this,"precision",i,o)}query(t=[]){const n=this.channelField("x").as,r=this.channelField("y").as,i=Array.from(new Set(["stroke","z","fx","fy"].flatMap(s=>{var o;return((o=this.channelField(s))==null?void 0:o.as)||[]})));return Lt.from(super.query(t)).select({intercept:YW(r,n),slope:qW(r,n),n:WW(r,n),ssy:HW(r,n),ssx:GW(r,n),xm:XW(r,n),x0:OM(ap(n).where(Ng(r))),x1:OM(op(n).where(Ng(r)))}).select(i).groupby(i)}queryResult(t){return this.modelFit=vU(t),this.lineData=this.modelFit.flatMap(n=>dpt(n)),this.confidenceBand()}confidenceBand(){const{ci:t,modelFit:n,precision:r,plot:i}=this,s=i.innerWidth();return this.areaData=t?n.flatMap(o=>hpt(t,r,o,s)):null,this}plotSpecs(){const{lineData:t,areaData:n,channels:r,ci:i}=this,s={x:"x",y:"y"},o={x:"x",y1:"y1",y2:"y2",fillOpacity:.1};for(const a of r)switch(a.channel){case"x":case"y":case"fill":break;case"stroke":s.stroke=o.fill=va(a);break;case"strokeOpacity":s.strokeOpacity=va(a);break;case"fillOpacity":o.fillOpacity=va(a);break;default:s[a.channel]=o[a.channel]=va(a);break}return[...i?[{type:"areaY",data:n,options:o}]:[],{type:"line",data:t,options:s}]}}function dpt(e){const{x0:t,x1:n,xm:r,intercept:i,slope:s,n:o,ssx:a,ssy:l,...c}=e;return[{x:t,y:i+t*s,...c},{x:n,y:i+n*s,...c}]}function hpt(e,t,n,r){const{x0:i,x1:s,xm:o,intercept:a,slope:l,n:c,ssx:u,ssy:f,...d}=n,h=t*(s-i)/r,p=upt((1-e)/2,c-2)*Math.sqrt(f/(c-2));return Nr(i,s-h/2,h).concat(s).map(g=>{const v=a+g*l,y=p*Math.sqrt(1/c+(g-o)**2/u);return{x:g,y1:v-y,y2:v+y,...d}})}const ppt=new Set(["frame","axisX","axisY","axisFx","axisFy","gridX","gridY","gridFx","gridFy","hexgrid","graticule","sphere"]);function ct(e,t,n){arguments.length===2&&(n=t,t=ppt.has(e)?null:[{}]);const r=e.startsWith("area")||e.startsWith("line")?Dht:yd;return cE(r,e,t,n)}function cE(e,t,n,r){return i=>{i.addMark(new e(t,n,r))}}function Bc(e,t,n){return r=>{r.addMark(new e(t,n))}}const ypt=(...e)=>ct("area",...e),mpt=(...e)=>ct("areaX",...e),OU=(...e)=>ct("areaY",...e),gpt=(...e)=>ct("line",...e),bpt=(...e)=>ct("lineX",...e),FU=(...e)=>ct("lineY",...e),wx=(...e)=>ct("barX",...e),uE=(...e)=>ct("barY",...e),vpt=(...e)=>ct("cell",...e),wpt=(...e)=>ct("cellX",...e),_pt=(...e)=>ct("cellY",...e),Spt=(...e)=>ct("rect",...e),xpt=(...e)=>ct("rectX",...e),nf=(...e)=>ct("rectY",...e),qv=(...e)=>ct("dot",...e),Ipt=(...e)=>ct("dotX",...e),Tpt=(...e)=>ct("dotY",...e),Ept=(...e)=>ct("circle",...e),Apt=(...e)=>ct("hexagon",...e),BU=(...e)=>ct("text",...e),Mpt=(...e)=>ct("textX",...e),$pt=(...e)=>ct("textY",...e),Npt=(...e)=>ct("ruleX",...e),Dpt=(...e)=>ct("ruleY",...e),kpt=(...e)=>ct("tickX",...e),RU=(...e)=>ct("tickY",...e),Opt=(...e)=>ct("vector",...e),Fpt=(...e)=>ct("vectoX",...e),Bpt=(...e)=>ct("vectorY",...e),Rpt=(...e)=>ct("spike",...e),Lpt=(...e)=>ct("image",...e),Cpt=(...e)=>cE(MU,"areaX",...e),Upt=(...e)=>cE(MU,"areaY",...e),Ppt=(...e)=>Bc(Vht,...e),LU=(...e)=>Bc(Ght,...e),CU=(...e)=>Bc(Kht,...e),z1=(...e)=>Bc(kU,...e),zpt=(...e)=>Bc(tpt,...e),UU=(...e)=>Bc(Jht,...e),PU=(...e)=>ct("hexgrid",...e),zU=(...e)=>Bc(fpt,...e),jpt=(...e)=>ct("voronoi",...e),Vpt=(...e)=>ct("voronoiMesh",...e),Ypt=(...e)=>ct("delaunayLink",...e),qpt=(...e)=>ct("delaunayMesh",...e),Wpt=(...e)=>ct("hull",...e),Hpt=(...e)=>ct("arrow",...e),Gpt=(...e)=>ct("link",...e),Xpt=(...e)=>ct("frame",...e),Qpt=(...e)=>ct("axisX",...e),Kpt=(...e)=>ct("axisY",...e),Zpt=(...e)=>ct("axisFx",...e),Jpt=(...e)=>ct("axisFy",...e),tyt=(...e)=>ct("gridX",...e),eyt=(...e)=>ct("gridY",...e),nyt=(...e)=>ct("gridFx",...e),ryt=(...e)=>ct("gridFy",...e),jU=(...e)=>ct("geo",...e),VU=(...e)=>ct("sphere",...e),iyt=(...e)=>ct("graticule",...e),syt=Object.freeze(Object.defineProperty({__proto__:null,area:ypt,areaX:mpt,areaY:OU,arrow:Hpt,axisFx:Zpt,axisFy:Jpt,axisX:Qpt,axisY:Kpt,barX:wx,barY:uE,cell:vpt,cellX:wpt,cellY:_pt,circle:Ept,contour:CU,delaunayLink:Ypt,delaunayMesh:qpt,denseLine:LU,density:Ppt,densityX:Cpt,densityY:Upt,dot:qv,dotX:Ipt,dotY:Tpt,frame:Xpt,geo:jU,graticule:iyt,gridFx:nyt,gridFy:ryt,gridX:tyt,gridY:eyt,hexagon:Apt,hexbin:UU,hexgrid:PU,hull:Wpt,image:Lpt,line:gpt,lineX:bpt,lineY:FU,link:Gpt,raster:z1,rasterTile:zpt,rect:Spt,rectX:xpt,rectY:nf,regressionY:zU,ruleX:Npt,ruleY:Dpt,sphere:VU,spike:Rpt,text:BU,textX:Mpt,textY:$pt,tickX:kpt,tickY:RU,vector:Opt,vectorX:Fpt,vectorY:Bpt,voronoi:jpt,voronoiMesh:Vpt},Symbol.toStringTag,{value:"Module"}));function oyt(e){const t=e.toLowerCase(),n=e.length;let r="";for(let i=0;i<n;++i)r+=(e[i]!==t[i]?"-":"")+t[i];return r}function fE(e){const t={};for(const n in e)t[oyt(n)]=e[n];return t}class ayt{constructor(t,{selection:n,channels:r={}}){this.mark=t,this.selection=n;const i=Object.entries(fE(r));this.channels=i.length?i:[["opacity",.2]],this.selection.addEventListener("value",NO(()=>this.update()))}init(t){this.svg=t;const n=this.values=[],r=this.mark.index,i=this.nodes=t.querySelectorAll(`[data-index="${r}"] > *`),{channels:s}=this;for(let o=0;o<i.length;++o){const a=i[o];n.push(s.map(l=>a.getAttribute(l[0])))}return this.update()}async update(){const{svg:t,nodes:n,channels:r,values:i,mark:s,selection:o}=this;if(!t)return;const a=await lyt(s,o);for(let l=0;l<n.length;++l){const c=n[l],u=i[l],f=a(c.__data__);for(let d=0;d<r.length;++d){const[h,p]=r[d];c.setAttribute(h,f?u[d]:p)}}}}async function lyt(e,t){var c,u;const n=t==null?void 0:t.predicate(e);if(!n||n.length===0)return()=>!0;const r=(c=e.filterBy)==null?void 0:c.predicate(e,!0),i={__:pc(n)},s=e.query(r),o=s.groupby().length?s.select(i):s.$select(i),a=await Xn().query(o),l=(u=a.getChild)==null?void 0:u.call(a,"__");return a.numRows||a.length?l?f=>l.get(f):f=>a[f].__:()=>!1}class YU{constructor(t,{selection:n,channels:r,peers:i=!0}){this.value=null,this.mark=t,this.selection=n,this.peers=i,this.channels=r.map(s=>{var a;const o=s==="color"?["fill","stroke"]:s==="x"?["x","x1","x2"]:s==="y"?["y","y1","y2"]:[s];for(let l=0;l<o.length;++l){const c=t.channelField(o[l]);if(c)return{field:((a=c.field)==null?void 0:a.basis)||c.field,as:c.as}}throw new Error(`Missing channel: ${s}`)})}clause(t){const{channels:n,mark:r}=this;let i=null;if(t){const s=t.map(o=>{const a=o.map((l,c)=>RW(n[c].field,Jp(l)));return a.length>1?pc(a):a[0]});i=s.length>1?_O(s):s[0]}return{source:this,schema:{type:"point"},clients:this.peers?r.plot.markSet:new Set().add(r),value:t,predicate:i}}init(t,n,r){const{mark:i,channels:s,selection:o}=this,{data:a}=i;r=r||(c=>{const u=a[c.__data__];return s.map(f=>u[f.as])}),n=n||`[data-index="${i.index}"]`;const l=new Set(t.querySelectorAll(n));t.addEventListener("pointerdown",c=>{const u=o.single?o.value:this.value,f=c.target;let d=null;if(cyt(l,f)){const h=r(f);c.shiftKey&&(u!=null&&u.length)?(d=u.filter(p=>_x(p,h)),d.length===u.length&&d.push(h)):(u==null?void 0:u.length)===1&&!_x(u[0],h)?d=null:d=[h]}this.value=d,uyt(u,d)&&o.update(this.clause(d))}),t.addEventListener("pointerenter",()=>{this.selection.activate(this.clause([this.channels.map(()=>0)]))})}}function cyt(e,t){var n;return e.has(t)||e.has(t.parentNode)||e.has((n=t.parentNode)==null?void 0:n.parentNode)}function uyt(e,t){return e==null||t==null?e!=null||t!=null:e.length!==t.length||e.some((n,r)=>_x(n,t[r]))}function _x(e,t){const n=e.length;if(t.length!==n)return!0;for(let r=0;r<n;++r)if(e[r]!==t[r])return!0;return!1}function dE(e){const t=e.on;let n=!0;function r(i){n=!1,i(),n=!0}return e.reset=(...i)=>{r(()=>e.clear(...i))},e.moveSilent=(...i)=>{r(()=>e.move(...i))},e.on=(...i)=>{if(i.length>1&&i[1]){const s=i[1];i[1]=(...o)=>n&&s(...o)}return t(...i)},e}function fyt(){return dE($Z())}function dyt(){return dE(AZ())}function hyt(){return dE(MZ())}const NN=1e-12;function Sx(e,t){return e===t||e&&t&&Math.abs(e[0]-t[0])<NN&&Math.abs(e[1]-t[1])<NN||!1}function zf(e,t){var r;const n=(r=e.channelField(t))==null?void 0:r.field;return(n==null?void 0:n.basis)||n}function xx(e,t,n=1){return t.invert(n*Math.floor(e/n))}function qU(){const e=this,t=e.getScreenCTM;let n;e.getScreenCTM=()=>e.isConnected?n=t.call(e):n}class WU{constructor(t,{channel:n,selection:r,field:i,pixelSize:s=1,peers:o=!0,brush:a}){this.mark=t,this.channel=n,this.pixelSize=s||1,this.selection=r,this.peers=o,this.field=i||zf(t,[n,n+"1",n+"2"]),this.style=a&&fE(a),this.brush=n==="y"?hyt():dyt(),this.brush.on("brush end",({selection:l})=>this.publish(l))}reset(){this.value=void 0,this.g&&this.brush.reset(this.g)}activate(){this.selection.activate(this.clause(this.value||[0,1]))}publish(t){let n;t&&(n=t.map(r=>xx(r,this.scale,this.pixelSize)).sort((r,i)=>r-i)),Sx(n,this.value)||(this.value=n,this.g.call(this.brush.moveSilent,t),this.selection.update(this.clause(n)))}clause(t){const{mark:n,pixelSize:r,field:i,scale:s}=this;return{source:this,schema:{type:"interval",pixelSize:r,scales:[s]},clients:this.peers?n.plot.markSet:new Set().add(n),value:t,predicate:t?Rr(i,t):null}}init(t){var c;const{brush:n,channel:r,style:i}=this;this.scale=t.scale(r);const s=t.scale("x").range,o=t.scale("y").range;n.extent([[bn(s),bn(o)],[$e(s),$e(o)]]);const a=ye(t).selectAll('g[aria-label="facet"]'),l=a.size()?a:ye(t);if(this.g=l.append("g").attr("class",`interval-${r}`).each(qU).call(n).call(n.moveSilent,(c=this.value)==null?void 0:c.map(this.scale.apply)),i){const u=this.g.selectAll("rect.selection");for(const f in i)u.attr(f,i[f])}t.addEventListener("pointerenter",()=>this.activate())}}const U0=(e,t)=>e-t;class pyt{constructor(t,{selection:n,xfield:r,yfield:i,pixelSize:s=1,peers:o=!0,brush:a}){this.mark=t,this.pixelSize=s||1,this.selection=n,this.peers=o,this.xfield=r||zf(t,["x","x1","x2"]),this.yfield=i||zf(t,["y","y1","y2"]),this.style=a&&fE(a),this.brush=fyt(),this.brush.on("brush end",({selection:l})=>this.publish(l))}reset(){this.value=void 0,this.g&&this.brush.reset(this.g)}activate(){this.selection.activate(this.clause(this.value||[[0,1],[0,1]]))}publish(t){const{value:n,pixelSize:r,xscale:i,yscale:s}=this;let o,a;if(t){const[l,c]=t;o=[l[0],c[0]].map(u=>xx(u,i,r)).sort(U0),a=[l[1],c[1]].map(u=>xx(u,s,r)).sort(U0)}(!Sx(o,n==null?void 0:n[0])||!Sx(a,n==null?void 0:n[1]))&&(this.value=t?[o,a]:void 0,this.g.call(this.brush.moveSilent,t),this.selection.update(this.clause(this.value)))}clause(t){const{mark:n,pixelSize:r,xfield:i,yfield:s,xscale:o,yscale:a}=this;return{source:this,schema:{type:"interval",pixelSize:r,scales:[o,a]},clients:this.peers?n.plot.markSet:new Set().add(n),value:t,predicate:t?pc(Rr(i,t[0]),Rr(s,t[1])):null}}init(t){const{brush:n,style:r}=this,i=this.xscale=t.scale("x"),s=this.yscale=t.scale("y"),o=i.range,a=s.range;n.extent([[bn(o),bn(a)],[$e(o),$e(a)]]);const l=ye(t).selectAll('g[aria-label="facet"]'),c=l.size()?l:ye(t);if(this.g=c.append("g").attr("class","interval-xy").each(qU).call(n),r){const u=this.g.selectAll("rect.selection");for(const f in r)u.attr(f,r[f])}if(this.value){const[u,f]=this.value[0].map(i.apply).sort(U0),[d,h]=this.value[1].map(s.apply).sort(U0);this.g.call(n.moveSilent,[[u,d],[f,h]])}t.addEventListener("pointerenter",()=>this.activate())}}const DN=(e,t)=>e-t;class yyt{constructor(t,{x:n=new La,y:r=new La,xfield:i,yfield:s,zoom:o=!0,panx:a=!0,pany:l=!0}){this.mark=t,this.xsel=n,this.ysel=r,this.xfield=i||zf(t,["x","x1","x2"]),this.yfield=s||zf(t,["y","y1","y2"]),this.zoom=D_(o,[0,1/0],[1,1]),this.panx=this.xsel&&a,this.pany=this.ysel&&l;const{plot:c}=t;a&&this.xsel.addEventListener("value",u=>{c.setAttribute("xDomain",u)&&c.update()}),l&&this.ysel.addEventListener("value",u=>{c.setAttribute("yDomain",u)&&c.update()})}publish(t){if(this.panx){const n=myt(t,this.xscale);this.xsel.update(this.clause(n,this.xfield,this.xscale))}if(this.pany){const n=gyt(t,this.yscale);this.ysel.update(this.clause(n,this.yfield,this.yscale))}}clause(t,n,r){return{source:this,schema:{type:"interval",scales:[r]},clients:this.mark.plot.markSet,value:t,predicate:t?Rr(n,t):null}}init(t){if(this.svg=t,this.initialized)return;this.initialized=!0;const{panx:n,pany:r,mark:{plot:{element:i}},xsel:s,ysel:o}=this;this.xscale=t.scale("x"),this.yscale=t.scale("y");const a=this.xscale.range.slice().sort(DN),l=this.yscale.range.slice().sort(DN),c=D_(n,[-1/0,1/0],a),u=D_(r,[-1/0,1/0],l),f=Srt().extent([[a[0],l[0]],[a[1],l[1]]]).scaleExtent(this.zoom).translateExtent([[c[0],u[0]],[c[1],u[1]]]).on("start",()=>{this.xscale=this.svg.scale("x"),this.yscale=this.svg.scale("y")}).on("end",()=>i.__zoom=new Es(1,0,0)).on("zoom",({transform:d})=>this.publish(d));if(ye(i).call(f),n||r){let d=!1;i.addEventListener("mouseenter",()=>{if(!d){if(d=!0,n){const{xscale:h,xfield:p}=this;s.activate(this.clause(h.domain,p,h))}if(r){const{yscale:h,yfield:p}=this;o.activate(this.clause(h.domain,p,h))}}}),i.addEventListener("mouseleave",()=>d=!1)}}}function D_(e,t,n){return e?Array.isArray(e)?e:t:n}function myt(e,t){return t.range.map(e.invertX,e).map(t.invert,t)}function gyt(e,t){return t.range.map(e.invertY,e).map(t.invert,t)}class HU{constructor(t,{selection:n,channel:r,field:i}){this.mark=t,this.selection=n,this.clients=new Set().add(t),this.channel=r,this.field=i||zf(t,[r])}clause(t){const{clients:n,field:r}=this,i=t?t3(r,Jp(t)):null;return{source:this,schema:{type:"point"},clients:n,value:t,predicate:i}}init(t){const n=this,{mark:r,channel:i,selection:s}=this,{data:o}=r,a=r.channelField(i).as,l=ye(t).selectAll('g[aria-label="facet"]'),c=l.size()?l:ye(t),u=t.scale(i),f=!yc(s);c.on("pointerdown pointermove",function(d){const[h,p]=Mi(d,this),g=byt(o,a,u.invert(i==="x"?h:p));s.update(f?g:n.clause(g))}),!f&&t.addEventListener("pointerenter",()=>{this.selection.activate(this.clause(0))})}}function byt(e,t,n){let r=1/0,i;return e.forEach(s=>{const o=Math.abs(s[t]-n);o<r&&(r=o,i=s[t])}),i}function dl(e,t){return n=>{const r=n.marks[n.marks.length-1];n.addInteractor(new e(r,t))}}function j1({by:e,...t}){return dl(ayt,{selection:e,channels:t})}function Wv({as:e,...t}){return dl(YU,{...t,selection:e})}function GU(e){return Wv({...e,channels:["x"]})}function XU(e){return Wv({...e,channels:["y"]})}function vyt(e){return Wv({...e,channels:["color"]})}function wyt({as:e,...t}){return dl(HU,{...t,selection:e,channel:"x"})}function _yt({as:e,...t}){return dl(HU,{...t,selection:e,channel:"y"})}function ac({as:e,...t}){return dl(WU,{...t,selection:e,channel:"x"})}function Syt({as:e,...t}){return dl(WU,{...t,selection:e,channel:"y"})}function Ix({as:e,...t}){return dl(pyt,{...t,selection:e})}function md(e){return dl(yyt,e)}function xyt(e={}){return md({...e,zoom:!1})}function Iyt(e={}){return md({...e,zoom:!1,pany:!1})}function Tyt(e={}){return md({...e,zoom:!1,panx:!1})}function Eyt(e={}){return md(e)}function Ayt(e={}){return md({...e,pany:!1})}function Myt(e={}){return md({...e,panx:!1})}const $yt=Object.freeze(Object.defineProperty({__proto__:null,highlight:j1,intervalX:ac,intervalXY:Ix,intervalY:Syt,nearestX:wyt,nearestY:_yt,pan:xyt,panX:Iyt,panY:Tyt,panZoom:Eyt,panZoomX:Ayt,panZoomY:Myt,toggle:Wv,toggleColor:vyt,toggleX:GU,toggleY:XU},Symbol.toStringTag,{value:"Module"}));class kN{constructor(t,n){const{as:r,...i}=n;this.channel=t,this.options={label:null,...i},this.selection=r,this.element=document.createElement("div"),this.element.setAttribute("class","legend"),this.element.value=this}setPlot(t){const{channel:n,selection:r}=this,i=Nyt(t,n);this.selection&&i&&(this.handler=new YU(i,{selection:r,channels:[n]}),this.selection.addEventListener("value",()=>this.update()))}init(t){const{channel:n,options:r,handler:i}=this,o=t.scale(n).type==="ordinal"?r:{marginTop:1,tickSize:2,height:28,...r};return this.legend=t.legend(n,o),i&&(i.init(this.legend,":scope > div",a=>[a.__data__]),this.update()),this.element.replaceChildren(this.legend),this.element}update(){if(!this.legend)return;const{value:t}=this.selection,n=t&&t.length?new Set(t.map(i=>i[0])):null,r=this.legend.querySelectorAll(":scope > div");for(const i of r){const s=n?n.has(i.__data__):!0;i.style.opacity=s?1:.2}}}function Nyt({marks:e},t){const n=t==="color"?["fill","stroke"]:t==="opacity"?["opacity","fillOpacity","strokeOpacity"]:null;if(n==null)return null;for(let r=e.length-1;r>-1;--r)if(e[r].channelField(n))return e[r];return null}function hE(e,t={}){if(t.for){const{for:n,...r}=t,i=new kN(e,r),s=typeof n,o=a=>a.addLegend(i,!1);return s==="string"?oU.request(n,o):n.value&&o(n.value),i.element}else return n=>n.addLegend(new kN(e,t))}const QU=e=>hE("color",e),Dyt=e=>hE("opacity",e),kyt=e=>hE("symbol",e),Oyt=Object.freeze(Object.defineProperty({__proto__:null,colorLegend:QU,opacityLegend:Dyt,symbolLegend:kyt},Symbol.toStringTag,{value:"Module"}));function KU({direction:e="vertical",wrap:t=!1},n){const r=document.createElement("div");return r.style.display="flex",r.style.flexDirection=e==="vertical"?"column":"row",r.style.flexWrap=t?t===!0?"wrap":t:"nowrap",r.style.justifyContent="flex-start",r.style.alignItems="flex-start",n.forEach(i=>r.appendChild(i)),r.value={element:r},r}function gd(...e){return KU({direction:"vertical"},e.flat())}function jf(...e){return KU({direction:"horizontal"},e.flat())}function Fyt({dim:e="width",size:t=10}){const n=document.createElement("span");n.style.display="inline-block",n.style[e]=Number.isNaN(+t)?t:`${t}px`;const r={element:n};return n.value=r,n}function Byt(e){return Fyt({dim:"width",size:e})}function Ryt(e){return e}function Lyt(e){if(e==null)return Ryt;var t,n,r=e.scale[0],i=e.scale[1],s=e.translate[0],o=e.translate[1];return function(a,l){l||(t=n=0);var c=2,u=a.length,f=new Array(u);for(f[0]=(t+=a[0])*r+s,f[1]=(n+=a[1])*i+o;c<u;)f[c]=a[c],++c;return f}}function Cyt(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function Uyt(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return ON(e,n)})}:ON(e,t)}function ON(e,t){var n=t.id,r=t.bbox,i=t.properties==null?{}:t.properties,s=Pyt(e,t);return n==null&&r==null?{type:"Feature",properties:i,geometry:s}:r==null?{type:"Feature",id:n,properties:i,geometry:s}:{type:"Feature",id:n,bbox:r,properties:i,geometry:s}}function Pyt(e,t){var n=Lyt(e.transform),r=e.arcs;function i(u,f){f.length&&f.pop();for(var d=r[u<0?~u:u],h=0,p=d.length;h<p;++h)f.push(n(d[h],h));u<0&&Cyt(f,p)}function s(u){return n(u)}function o(u){for(var f=[],d=0,h=u.length;d<h;++d)i(u[d],f);return f.length<2&&f.push(f[0]),f}function a(u){for(var f=o(u);f.length<4;)f.push(f[0]);return f}function l(u){return u.map(a)}function c(u){var f=u.type,d;switch(f){case"GeometryCollection":return{type:f,geometries:u.geometries.map(c)};case"Point":d=s(u.coordinates);break;case"MultiPoint":d=u.coordinates.map(s);break;case"LineString":d=o(u.arcs);break;case"MultiLineString":d=u.arcs.map(o);break;case"Polygon":d=l(u.arcs);break;case"MultiPolygon":d=u.arcs.map(l);break;default:return null}return{type:f,coordinates:d}}return c(t)}const zyt={menu:zH,search:qH,slider:tS,table:UO};new Map(Object.entries(syt));new Map(Object.entries(zyt));new Map(Object.entries(Oyt));new Map(Object.entries(wht));new Map(Object.entries($yt));function jyt({connect:e}){const[t,n]=Mr.useState(null),r=Mr.useCallback(s=>{n(s.target.value)},[]),i=Mr.useCallback(()=>{t&&e(t)},[e,t]);return qt.jsxs("div",{id:"connect-pane",children:[qt.jsx("div",{id:"token-input-row",children:qt.jsx("input",{id:"token-input",type:"password",placeholder:"Paste MotherDuck Service Token Here",onChange:r})}),qt.jsx("div",{id:"connect-button-row",children:qt.jsx("button",{id:"connect-button",disabled:!t,onClick:i,children:"Connect"})})]})}const Vyt="assets/motherduck_logo-X5yv95Gl.svg";function Yyt(){return qt.jsxs("div",{id:"header",children:[qt.jsx("div",{id:"title",children:qt.jsx("a",{href:"https://motherduck.com",target:"_blank",children:qt.jsx("img",{src:Vyt,alt:"MotherDuck logo"})})}),qt.jsxs("div",{id:"subtitle",children:["WASM Client Example:",qt.jsx("a",{href:"https://uwdata.github.io/mosaic/",target:"_blank",children:"Mosaic"}),"Integration"]})]})}class qyt{async initialize(){await Xn().exec(`create temp table if not exists complaints as 
        select year(created_date)::int as Year, count(*)::int as Complaints
        from sample_data.nyc.service_requests
        where Year < 2023
        and agency_name = 'New York City Police Department'
        group by 1
        order by 1;`),await Xn().exec(`create temp table if not exists complaints_details as
        select year(created_date)::int as Year, complaint_type as Type, count(*)::int as Complaints
        from sample_data.nyc.service_requests
        where Year < 2023
        and agency_name = 'New York City Police Department'
        group by 1, 2
        order by 1, 3 desc;`)}render(){const t=La.single();return gd(Ge(uE(Oe("complaints"),{x:"Year",y:"Complaints",fill:"steelblue"}),j1({by:t}),GU({as:t}),sE("d"),U1(!0),Fh("s")),UO({from:"complaints_details",filterBy:t,format:{Year:n=>String(n)},width:{Year:80,Type:400,Complaints:100},height:400}))}}const rs=[fU(null),dU(null),cU({left:5,top:5,right:5,bottom:5}),Bi(160),Ms(100),oE([0,9])];class Wyt{async initialize(){await Xn().exec(tH("md",[{i:0,u:"A",v:2},{i:1,u:"B",v:8},{i:2,u:"C",v:3},{i:3,u:"D",v:7},{i:4,u:"E",v:5},{i:5,u:"F",v:4},{i:6,u:"G",v:6},{i:7,u:"H",v:1}]))}render(){return gd(jf(Ge(uE(Oe("md"),{x:"u",y:"v",fill:"steelblue"}),...rs),Ge(FU(Oe("md"),{x:"u",y:"v",stroke:"steelblue",curve:"monotone-x",marker:"circle"}),...rs),Ge(BU(Oe("md"),{x:"u",y:"v",text:"u",fill:"steelblue"}),...rs),Ge(RU(Oe("md"),{x:"u",y:"v",stroke:"steelblue"}),...rs),Ge(OU(Oe("md"),{x:"u",y:"v",fill:"steelblue"}),...rs)),jf(Ge(qv(Oe("md"),{x:"i",y:"v",fill:"currentColor",r:1.5}),zU(Oe("md"),{x:"i",y:"v",stroke:"steelblue"}),...rs,ri([-.5,7.5])),Ge(PU({stroke:"#aaa",strokeOpacity:.5}),UU(Oe("md"),{x:"i",y:"v",fill:hr()}),...rs,tf("blues"),ri([-1,8])),Ge(CU(Oe("md"),{x:"i",y:"v",stroke:"steelblue",bandwidth:15}),...rs,ri([-1,8])),Ge(z1(Oe("md"),{x:"i",y:"v",fill:"density",bandwidth:15}),...rs,tf("blues"),ri([-1,8])),Ge(LU(Oe("md"),{x:"i",y:"v",fill:"density",bandwidth:2,binWidth:1}),...rs,tf("blues"),ri([-1,8]))))}}class Hyt{async initialize(){await Xn().exec(`CREATE TEMP TABLE IF NOT EXISTS gaia_viz AS -- compute u and v with natural earth projection
      WITH prep AS (
        SELECT
          radians((-l + 540) % 360 - 180) AS lambda,
          radians(b) AS phi,
          asin(sqrt(3)/2 * sin(phi)) AS t,
          t^2 AS t2,
          t2^3 AS t6,
          *
        FROM mosaic_examples.main.gaia_5m
      )
      SELECT
        (1.340264 * lambda * cos(t)) / (sqrt(3)/2 * (1.340264 + (-0.081106 * 3 * t2) + (t6 * (0.000893 * 7 + 0.003796 * 9 * t2)))) AS u,
        t * (1.340264 + (-0.081106 * t2) + (t6 * (0.000893 + 0.003796 * t2))) AS v,
        * EXCLUDE('t', 't2', 't6')
      FROM prep
      WHERE parallax BETWEEN -5 AND 20`)}render(){const t=La.crossfilter(),n=pr.value(0),r=pr.value(2),i=pr.value("sqrt");return jf(gd(Ge(z1(Oe("gaia_viz",{filterBy:t}),{x:"u",y:"v",fill:"density",bandwidth:n,binWidth:r,binType:"normal"}),Ix({pixelSize:2,as:t}),C1(oi),px(i),tf("viridis"),Bi(440),Ms(250),dh(25),dx(20),fx(1)),jf(Ge(nf(Oe("gaia_viz",{filterBy:t}),{x:Eh("phot_g_mean_mag"),y:hr(),fill:"steelblue",inset:.5}),ac({as:t}),ri(oi),hx(i),U1(!0),Bi(220),Ms(120),dh(65)),Ge(nf(Oe("gaia_viz",{filterBy:t}),{x:Eh("parallax"),y:hr(),fill:"steelblue",inset:.5}),ac({as:t}),ri(oi),hx(i),U1(!0),Bi(220),Ms(120),dh(65)))),Byt(10),Ge(z1(Oe("gaia_viz",{filterBy:t}),{x:"bp_rp",y:"phot_g_mean_mag",fill:"density",bandwidth:n,binWidth:r,binType:"normal"}),Ix({pixelSize:2,as:t}),C1(oi),px(i),tf("viridis"),pU(!0),Bi(230),Ms(370),dh(25),dx(20),fx(1)))}}class Gyt{constructor(){zy(this,"land",null)}async initialize(){await Xn().exec("CREATE TEMP TABLE IF NOT EXISTS earthquakes_viz AS SELECT * FROM mosaic_examples.main.earthquakes"),this.land=await fetch("assets/countries-110m.json").then(t=>t.json()).then(t=>{if(t.objects.land.type!=="GeometryCollection")throw Error("unexpected geojson type");return Uyt(t,t.objects.land).features})}render(){const t=pr.value(-180),n=pr.value(-30),r=pr.array([t,n]);return gd(jf(tS({label:"Longitude",as:t,min:-180,max:180,step:1}),tS({label:"Latitude",as:n,min:-90,max:90,step:1})),Ge(jU(this.land,{fill:"currentColor",fillOpacity:.2}),VU(),qv(Oe("earthquakes_viz"),{x:"longitude",y:"latitude",r:G`POW(10, magnitude)`,stroke:"red",fill:"red",fillOpacity:.2}),uU("overflow: visible;"),gU("orthographic"),bU(r)))}}class Xyt{async initialize(){await Xn().exec("CREATE TEMP TABLE IF NOT EXISTS weather AS SELECT * FROM mosaic_examples.main.seattle_weather")}render(){const t=La.single(),n=pr.array(["sun","fog","drizzle","rain","snow"]),r=pr.array(["#e7ba52","#a7a7a7","#aec7e8","#1f77b4","#9467bd"]),i=La.intersect();return gd(jf(Ge(qv(Oe("weather",{filterBy:t}),{x:KW("date"),y:"temp_max",fill:"weather",r:"precipitation",fillOpacity:.7}),ac({as:i,brush:{fill:"none",stroke:"#888"}}),j1({by:i,fill:"#ccc",fillOpacity:.2}),QU({as:t,columns:1}),C1(oi),sE("%b"),yx(n),mx(r),yU(oi),mU([2,10]),Bi(680),Ms(300))),Ge(wx(Oe("weather"),{x:hr(),y:"weather",fill:"#ccc",fillOpacity:.2}),wx(Oe("weather",{filterBy:i}),{x:hr(),y:"weather",fill:"weather",order:"weather"}),XU({as:t}),j1({by:t}),ri(oi),oE(n),hU(null),yx(n),mx(r),Bi(680)))}}const FN="flights_200k_viz",BN="flights_10m_viz";class RN{constructor(t="flights_200k"){zy(this,"flightsTableName");zy(this,"vizTable",null);this.flightsTableName=t}async initialize(){const t=`mosaic_examples.main.${this.flightsTableName}`;this.flightsTableName==="flights_10m"?(await Xn().exec(`
      create temp table if not exists ${BN} as
      select GREATEST(-60, LEAST(ARR_DELAY, 180))::DOUBLE AS delay, DISTANCE AS distance, DEP_TIME AS time
      from ${t}
      `),this.vizTable=BN):(await Xn().exec(`
      create temp table if not exists ${FN} as
      select *
      from ${t}
      `),this.vizTable=FN)}render(){const t=La.crossfilter();return gd(Ge(nf(Oe(this.vizTable,{filterBy:t}),{x:Eh("delay"),y:hr(),fill:"steelblue",inset:.5}),ac({as:t}),ri(oi),Fh("s"),Bi(600),Ms(200)),Ge(nf(Oe(this.vizTable,{filterBy:t}),{x:Eh("time"),y:hr(),fill:"steelblue",inset:.5}),ac({as:t}),ri(oi),Fh("s"),Bi(600),Ms(200)),Ge(nf(Oe(this.vizTable,{filterBy:t}),{x:Eh("distance"),y:hr(),fill:"steelblue",inset:.5}),ac({as:t}),ri(oi),Fh("s"),Bi(600),Ms(200)))}}const ZU={"Mark Types":new Wyt,"NYPD Complaints":new qyt,Earthquakes:new Gyt,"Seattle Weather":new Xyt,"Flights 200K":new RN("flights_200k"),"Flights 10M":new RN("flights_10m"),"Gaia Star Catalog":new Hyt},LN=Object.keys(ZU);function Qyt(){const[e,t]=Mr.useState(null),[n,r]=Mr.useState(null),[i,s]=Mr.useState(LN[0]),o=Mr.useCallback(a=>{s(a.target.value)},[]);return Mr.useEffect(()=>{(async()=>{if(n){const a=ZU[i];t(null),n.innerHTML="Loading, please wait";try{await a.initialize(),n.innerHTML="",n.appendChild(a.render())}catch(l){const c=String(l);n.innerHTML=c,/Catalog "sample_data" does not exist!/.test(c)?t("sample_data"):/Catalog "mosaic_examples" does not exist!/.test(c)&&t("mosaic_examples")}}})()},[i,n]),qt.jsxs("div",{id:"vizzes-pane",children:[qt.jsx("div",{id:"selector-pane",children:qt.jsx("select",{id:"viz-selector",value:i,onChange:o,children:LN.map(a=>qt.jsx("option",{children:a},a))})}),qt.jsx("div",{id:"viz-pane",ref:r}),e==="sample_data"?qt.jsxs("div",{id:"help-pane",children:[qt.jsxs("div",{children:["This example requires the ",qt.jsx("span",{className:"code",children:"sample_data"})," share."]}),qt.jsx("div",{children:"To attach it to your account, run:"}),qt.jsx("pre",{children:"ATTACH 'md:_share/sample_data/23b0d623-1361-421d-ae77-62d701d471e6';"})]}):null,e==="mosaic_examples"?qt.jsxs("div",{id:"help-pane",children:[qt.jsxs("div",{children:["This example requires the ",qt.jsx("span",{className:"code",children:"mosaic_examples"})," share."]}),qt.jsx("div",{children:"To attach it to your account, run:"}),qt.jsx("pre",{children:"ATTACH 'md:_share/mosaic_examples/b01cfda8-239e-4148-a228-054b94cdc3b4';"})]}):null]})}const Kyt=new TextDecoder("utf-8"),Tx=e=>Kyt.decode(e),Zyt=new TextEncoder,pE=e=>Zyt.encode(e),Jyt=e=>typeof e=="number",JU=e=>typeof e=="boolean",sn=e=>typeof e=="function",_r=e=>e!=null&&Object(e)===e,Mc=e=>_r(e)&&sn(e.then),Oy=e=>_r(e)&&sn(e[Symbol.iterator]),bd=e=>_r(e)&&sn(e[Symbol.asyncIterator]),Ex=e=>_r(e)&&_r(e.schema),tP=e=>_r(e)&&"done"in e&&"value"in e,eP=e=>_r(e)&&sn(e.stat)&&Jyt(e.fd),nP=e=>_r(e)&&yE(e.body),Hv=e=>"_getDOMStream"in e&&"_getNodeStream"in e,t0t=e=>_r(e)&&sn(e.abort)&&sn(e.getWriter)&&!Hv(e),yE=e=>_r(e)&&sn(e.cancel)&&sn(e.getReader)&&!Hv(e),e0t=e=>_r(e)&&sn(e.end)&&sn(e.write)&&JU(e.writable)&&!Hv(e),rP=e=>_r(e)&&sn(e.read)&&sn(e.pipe)&&JU(e.readable)&&!Hv(e),n0t=e=>_r(e)&&sn(e.clear)&&sn(e.bytes)&&sn(e.position)&&sn(e.setPosition)&&sn(e.capacity)&&sn(e.getBufferIdentifier)&&sn(e.createLong),mE=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function r0t(e){const t=e[0]?[e[0]]:[];let n,r,i,s;for(let o,a,l=0,c=0,u=e.length;++l<u;){if(o=t[c],a=e[l],!o||!a||o.buffer!==a.buffer||a.byteOffset<o.byteOffset){a&&(t[++c]=a);continue}if({byteOffset:n,byteLength:i}=o,{byteOffset:r,byteLength:s}=a,n+i<r||r+s<n){a&&(t[++c]=a);continue}t[c]=new Uint8Array(o.buffer,n,r-n+s)}return t}function CN(e,t,n=0,r=t.byteLength){const i=e.byteLength,s=new Uint8Array(e.buffer,e.byteOffset,i),o=new Uint8Array(t.buffer,t.byteOffset,Math.min(r,i));return s.set(o,n),e}function Us(e,t){const n=r0t(e),r=n.reduce((u,f)=>u+f.byteLength,0);let i,s,o,a=0,l=-1;const c=Math.min(t||Number.POSITIVE_INFINITY,r);for(const u=n.length;++l<u;){if(i=n[l],s=i.subarray(0,Math.min(i.length,c-a)),c<=a+s.length){s.length<i.length?n[l]=i.subarray(s.length):s.length===i.length&&l++,o?CN(o,s,a):o=s;break}CN(o||(o=new Uint8Array(c)),s,a),a+=s.length}return[o||new Uint8Array(0),n.slice(l),r-(o?o.byteLength:0)]}function ce(e,t){let n=tP(t)?t.value:t;return n instanceof e?e===Uint8Array?new e(n.buffer,n.byteOffset,n.byteLength):n:n?(typeof n=="string"&&(n=pE(n)),n instanceof ArrayBuffer?new e(n):n instanceof mE?new e(n):n0t(n)?ce(e,n.bytes()):ArrayBuffer.isView(n)?n.byteLength<=0?new e(0):new e(n.buffer,n.byteOffset,n.byteLength/e.BYTES_PER_ELEMENT):e.from(n)):new e(0)}const Vd=e=>ce(Int32Array,e),Zt=e=>ce(Uint8Array,e),Ax=e=>(e.next(),e);function*i0t(e,t){const n=function*(i){yield i},r=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof mE?n(t):Oy(t)?t:n(t);return yield*Ax(function*(i){let s=null;do s=i.next(yield ce(e,s));while(!s.done)}(r[Symbol.iterator]())),new e}const s0t=e=>i0t(Uint8Array,e);function iP(e,t){return en(this,arguments,function*(){if(Mc(t))return yield K(yield K(yield*Ma(Fr(iP(e,yield K(t))))));const r=function(o){return en(this,arguments,function*(){yield yield K(yield K(o))})},i=function(o){return en(this,arguments,function*(){yield K(yield*Ma(Fr(Ax(function*(a){let l=null;do l=a.next(yield l==null?void 0:l.value);while(!l.done)}(o[Symbol.iterator]())))))})},s=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof mE?r(t):Oy(t)?i(t):bd(t)?t:r(t);return yield K(yield*Ma(Fr(Ax(function(o){return en(this,arguments,function*(){let a=null;do a=yield K(o.next(yield yield K(ce(e,a))));while(!a.done)})}(s[Symbol.asyncIterator]()))))),yield K(new e)})}const o0t=e=>iP(Uint8Array,e);function sP(e,t,n){if(e!==0){n=n.slice(0,t);for(let r=-1,i=n.length;++r<i;)n[r]+=e}return n.subarray(0,t)}function a0t(e,t){let n=0;const r=e.length;if(r!==t.length)return!1;if(r>0)do if(e[n]!==t[n])return!1;while(++n<r);return!0}const Kr={fromIterable(e){return P0(l0t(e))},fromAsyncIterable(e){return P0(c0t(e))},fromDOMStream(e){return P0(u0t(e))},fromNodeStream(e){return P0(d0t(e))},toDOMStream(e,t){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(e,t){throw new Error('"toNodeStream" not available in this environment')}},P0=e=>(e.next(),e);function*l0t(e){let t,n=!1,r=[],i,s,o,a=0;function l(){return s==="peek"?Us(r,o)[0]:([i,r,a]=Us(r,o),i)}({cmd:s,size:o}=yield null);const c=s0t(e)[Symbol.iterator]();try{do if({done:t,value:i}=Number.isNaN(o-a)?c.next():c.next(o-a),!t&&i.byteLength>0&&(r.push(i),a+=i.byteLength),t||o<=a)do({cmd:s,size:o}=yield l());while(o<a);while(!t)}catch(u){(n=!0)&&typeof c.throw=="function"&&c.throw(u)}finally{n===!1&&typeof c.return=="function"&&c.return(null)}return null}function c0t(e){return en(this,arguments,function*(){let n,r=!1,i=[],s,o,a,l=0;function c(){return o==="peek"?Us(i,a)[0]:([s,i,l]=Us(i,a),s)}({cmd:o,size:a}=yield yield K(null));const u=o0t(e)[Symbol.asyncIterator]();try{do if({done:n,value:s}=Number.isNaN(a-l)?yield K(u.next()):yield K(u.next(a-l)),!n&&s.byteLength>0&&(i.push(s),l+=s.byteLength),n||a<=l)do({cmd:o,size:a}=yield yield K(c()));while(a<l);while(!n)}catch(f){(r=!0)&&typeof u.throw=="function"&&(yield K(u.throw(f)))}finally{r===!1&&typeof u.return=="function"&&(yield K(u.return(new Uint8Array(0))))}return yield K(null)})}function u0t(e){return en(this,arguments,function*(){let n=!1,r=!1,i=[],s,o,a,l=0;function c(){return o==="peek"?Us(i,a)[0]:([s,i,l]=Us(i,a),s)}({cmd:o,size:a}=yield yield K(null));const u=new f0t(e);try{do if({done:n,value:s}=Number.isNaN(a-l)?yield K(u.read()):yield K(u.read(a-l)),!n&&s.byteLength>0&&(i.push(Zt(s)),l+=s.byteLength),n||a<=l)do({cmd:o,size:a}=yield yield K(c()));while(a<l);while(!n)}catch(f){(r=!0)&&(yield K(u.cancel(f)))}finally{r===!1?yield K(u.cancel()):e.locked&&u.releaseLock()}return yield K(null)})}class f0t{constructor(t){this.source=t,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(t){return W(this,void 0,void 0,function*(){const{reader:n,source:r}=this;n&&(yield n.cancel(t).catch(()=>{})),r&&r.locked&&this.releaseLock()})}read(t){return W(this,void 0,void 0,function*(){if(t===0)return{done:this.reader==null,value:new Uint8Array(0)};const n=yield this.reader.read();return!n.done&&(n.value=Zt(n)),n})}}const k_=(e,t)=>{const n=i=>r([t,i]);let r;return[t,n,new Promise(i=>(r=i)&&e.once(t,n))]};function d0t(e){return en(this,arguments,function*(){const n=[];let r="error",i=!1,s=null,o,a,l=0,c=[],u;function f(){return o==="peek"?Us(c,a)[0]:([u,c,l]=Us(c,a),u)}if({cmd:o,size:a}=yield yield K(null),e.isTTY)return yield yield K(new Uint8Array(0)),yield K(null);try{n[0]=k_(e,"end"),n[1]=k_(e,"error");do{if(n[2]=k_(e,"readable"),[r,s]=yield K(Promise.race(n.map(h=>h[2]))),r==="error")break;if((i=r==="end")||(Number.isFinite(a-l)?(u=Zt(e.read(a-l)),u.byteLength<a-l&&(u=Zt(e.read()))):u=Zt(e.read()),u.byteLength>0&&(c.push(u),l+=u.byteLength)),i||a<=l)do({cmd:o,size:a}=yield yield K(f()));while(a<l)}while(!i)}finally{yield K(d(n,r==="error"?s:null))}return yield K(null);function d(h,p){return u=c=null,new Promise((g,v)=>{for(const[y,m]of h)e.off(y,m);try{const y=e.destroy;y&&y.call(e,p),p=void 0}catch(y){p=y||p}finally{p!=null?v(p):g()}})}})}var Sn;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(Sn||(Sn={}));var ln;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(ln||(ln={}));var nn;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(nn||(nn={}));var Pr;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(Pr||(Pr={}));var rt;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(rt||(rt={}));var yr;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(yr||(yr={}));var re;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(re||(re={}));var D;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.Float=3]="Float",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct=13]="Struct",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.Dictionary=-1]="Dictionary",e[e.Int8=-2]="Int8",e[e.Int16=-3]="Int16",e[e.Int32=-4]="Int32",e[e.Int64=-5]="Int64",e[e.Uint8=-6]="Uint8",e[e.Uint16=-7]="Uint16",e[e.Uint32=-8]="Uint32",e[e.Uint64=-9]="Uint64",e[e.Float16=-10]="Float16",e[e.Float32=-11]="Float32",e[e.Float64=-12]="Float64",e[e.DateDay=-13]="DateDay",e[e.DateMillisecond=-14]="DateMillisecond",e[e.TimestampSecond=-15]="TimestampSecond",e[e.TimestampMillisecond=-16]="TimestampMillisecond",e[e.TimestampMicrosecond=-17]="TimestampMicrosecond",e[e.TimestampNanosecond=-18]="TimestampNanosecond",e[e.TimeSecond=-19]="TimeSecond",e[e.TimeMillisecond=-20]="TimeMillisecond",e[e.TimeMicrosecond=-21]="TimeMicrosecond",e[e.TimeNanosecond=-22]="TimeNanosecond",e[e.DenseUnion=-23]="DenseUnion",e[e.SparseUnion=-24]="SparseUnion",e[e.IntervalDayTime=-25]="IntervalDayTime",e[e.IntervalYearMonth=-26]="IntervalYearMonth",e[e.DurationSecond=-27]="DurationSecond",e[e.DurationMillisecond=-28]="DurationMillisecond",e[e.DurationMicrosecond=-29]="DurationMicrosecond",e[e.DurationNanosecond=-30]="DurationNanosecond"})(D||(D={}));var lo;(function(e){e[e.OFFSET=0]="OFFSET",e[e.DATA=1]="DATA",e[e.VALIDITY=2]="VALIDITY",e[e.TYPE=3]="TYPE"})(lo||(lo={}));const h0t=void 0;function Np(e){if(e===null)return"null";if(e===h0t)return"undefined";switch(typeof e){case"number":return`${e}`;case"bigint":return`${e}`;case"string":return`"${e}"`}return typeof e[Symbol.toPrimitive]=="function"?e[Symbol.toPrimitive]("string"):ArrayBuffer.isView(e)?e instanceof BigInt64Array||e instanceof BigUint64Array?`[${[...e].map(t=>Np(t))}]`:`[${e}]`:ArrayBuffer.isView(e)?`[${e}]`:JSON.stringify(e,(t,n)=>typeof n=="bigint"?`${n}`:n)}const p0t=Symbol.for("isArrowBigNum");function Zi(e,...t){return t.length===0?Object.setPrototypeOf(ce(this.TypedArray,e),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(e,...t),this.constructor.prototype)}Zi.prototype[p0t]=!0;Zi.prototype.toJSON=function(){return`"${kp(this)}"`};Zi.prototype.valueOf=function(){return oP(this)};Zi.prototype.toString=function(){return kp(this)};Zi.prototype[Symbol.toPrimitive]=function(e="default"){switch(e){case"number":return oP(this);case"string":return kp(this);case"default":return y0t(this)}return kp(this)};function rf(...e){return Zi.apply(this,e)}function sf(...e){return Zi.apply(this,e)}function Dp(...e){return Zi.apply(this,e)}Object.setPrototypeOf(rf.prototype,Object.create(Int32Array.prototype));Object.setPrototypeOf(sf.prototype,Object.create(Uint32Array.prototype));Object.setPrototypeOf(Dp.prototype,Object.create(Uint32Array.prototype));Object.assign(rf.prototype,Zi.prototype,{constructor:rf,signed:!0,TypedArray:Int32Array,BigIntArray:BigInt64Array});Object.assign(sf.prototype,Zi.prototype,{constructor:sf,signed:!1,TypedArray:Uint32Array,BigIntArray:BigUint64Array});Object.assign(Dp.prototype,Zi.prototype,{constructor:Dp,signed:!0,TypedArray:Uint32Array,BigIntArray:BigUint64Array});function oP(e){const{buffer:t,byteOffset:n,length:r,signed:i}=e,s=new BigUint64Array(t,n,r),o=i&&s.at(-1)&BigInt(1)<<BigInt(63);let a=BigInt(o?1:0),l=BigInt(0);if(o){for(const c of s)a+=~c*(BigInt(1)<<BigInt(32)*l++);a*=BigInt(-1)}else for(const c of s)a+=c*(BigInt(1)<<BigInt(32)*l++);return a}const kp=e=>{if(e.byteLength===8)return`${new e.BigIntArray(e.buffer,e.byteOffset,1)[0]}`;if(!e.signed)return O_(e);let t=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);if(new Int16Array([t.at(-1)])[0]>=0)return O_(e);t=t.slice();let r=1;for(let s=0;s<t.length;s++){const o=t[s],a=~o+r;t[s]=a,r&=o===0?1:0}return`-${O_(t)}`},y0t=e=>e.byteLength===8?new e.BigIntArray(e.buffer,e.byteOffset,1)[0]:kp(e);function O_(e){let t="";const n=new Uint32Array(2);let r=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);const i=new Uint32Array((r=new Uint16Array(r).reverse()).buffer);let s=-1;const o=r.length-1;do{for(n[0]=r[s=0];s<o;)r[s++]=n[1]=n[0]/10,n[0]=(n[0]-n[1]*10<<16)+r[s];r[s]=n[1]=n[0]/10,n[0]=n[0]-n[1]*10,t=`${n[0]}${t}`}while(i[0]||i[1]||i[2]||i[3]);return t??"0"}class gE{static new(t,n){switch(n){case!0:return new rf(t);case!1:return new sf(t)}switch(t.constructor){case Int8Array:case Int16Array:case Int32Array:case BigInt64Array:return new rf(t)}return t.byteLength===16?new Dp(t):new sf(t)}static signed(t){return new rf(t)}static unsigned(t){return new sf(t)}static decimal(t){return new Dp(t)}constructor(t,n){return gE.new(t,n)}}function Gi(e){if(typeof e=="bigint"&&(e<Number.MIN_SAFE_INTEGER||e>Number.MAX_SAFE_INTEGER))throw new TypeError(`${e} is not safe to convert to a number.`);return Number(e)}var aP,lP,cP,uP,fP,dP,hP,pP,yP,mP,gP,bP,vP,wP,_P,SP,xP,IP,TP,EP;class at{static isNull(t){return(t==null?void 0:t.typeId)===D.Null}static isInt(t){return(t==null?void 0:t.typeId)===D.Int}static isFloat(t){return(t==null?void 0:t.typeId)===D.Float}static isBinary(t){return(t==null?void 0:t.typeId)===D.Binary}static isUtf8(t){return(t==null?void 0:t.typeId)===D.Utf8}static isBool(t){return(t==null?void 0:t.typeId)===D.Bool}static isDecimal(t){return(t==null?void 0:t.typeId)===D.Decimal}static isDate(t){return(t==null?void 0:t.typeId)===D.Date}static isTime(t){return(t==null?void 0:t.typeId)===D.Time}static isTimestamp(t){return(t==null?void 0:t.typeId)===D.Timestamp}static isInterval(t){return(t==null?void 0:t.typeId)===D.Interval}static isDuration(t){return(t==null?void 0:t.typeId)===D.Duration}static isList(t){return(t==null?void 0:t.typeId)===D.List}static isStruct(t){return(t==null?void 0:t.typeId)===D.Struct}static isUnion(t){return(t==null?void 0:t.typeId)===D.Union}static isFixedSizeBinary(t){return(t==null?void 0:t.typeId)===D.FixedSizeBinary}static isFixedSizeList(t){return(t==null?void 0:t.typeId)===D.FixedSizeList}static isMap(t){return(t==null?void 0:t.typeId)===D.Map}static isDictionary(t){return(t==null?void 0:t.typeId)===D.Dictionary}static isDenseUnion(t){return at.isUnion(t)&&t.mode===ln.Dense}static isSparseUnion(t){return at.isUnion(t)&&t.mode===ln.Sparse}get typeId(){return D.NONE}}aP=Symbol.toStringTag;at[aP]=(e=>(e.children=null,e.ArrayType=Array,e[Symbol.toStringTag]="DataType"))(at.prototype);let Ha=class extends at{toString(){return"Null"}get typeId(){return D.Null}};lP=Symbol.toStringTag;Ha[lP]=(e=>e[Symbol.toStringTag]="Null")(Ha.prototype);class Ga extends at{constructor(t,n){super(),this.isSigned=t,this.bitWidth=n}get typeId(){return D.Int}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?BigInt64Array:BigUint64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}cP=Symbol.toStringTag;Ga[cP]=(e=>(e.isSigned=null,e.bitWidth=null,e[Symbol.toStringTag]="Int"))(Ga.prototype);class Op extends Ga{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}Object.defineProperty(Op.prototype,"ArrayType",{value:Int32Array});class Fp extends at{constructor(t){super(),this.precision=t}get typeId(){return D.Float}get ArrayType(){switch(this.precision){case nn.HALF:return Uint16Array;case nn.SINGLE:return Float32Array;case nn.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}uP=Symbol.toStringTag;Fp[uP]=(e=>(e.precision=null,e[Symbol.toStringTag]="Float"))(Fp.prototype);let V1=class extends at{constructor(){super()}get typeId(){return D.Binary}toString(){return"Binary"}};fP=Symbol.toStringTag;V1[fP]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Binary"))(V1.prototype);let Y1=class extends at{constructor(){super()}get typeId(){return D.Utf8}toString(){return"Utf8"}};dP=Symbol.toStringTag;Y1[dP]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Utf8"))(Y1.prototype);let q1=class extends at{constructor(){super()}get typeId(){return D.Bool}toString(){return"Bool"}};hP=Symbol.toStringTag;q1[hP]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Bool"))(q1.prototype);let W1=class extends at{constructor(t,n,r=128){super(),this.scale=t,this.precision=n,this.bitWidth=r}get typeId(){return D.Decimal}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}};pP=Symbol.toStringTag;W1[pP]=(e=>(e.scale=null,e.precision=null,e.ArrayType=Uint32Array,e[Symbol.toStringTag]="Decimal"))(W1.prototype);class H1 extends at{constructor(t){super(),this.unit=t}get typeId(){return D.Date}toString(){return`Date${(this.unit+1)*32}<${Pr[this.unit]}>`}}yP=Symbol.toStringTag;H1[yP]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Date"))(H1.prototype);class Bp extends at{constructor(t,n){super(),this.unit=t,this.bitWidth=n}get typeId(){return D.Time}toString(){return`Time${this.bitWidth}<${rt[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return BigInt64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}mP=Symbol.toStringTag;Bp[mP]=(e=>(e.unit=null,e.bitWidth=null,e[Symbol.toStringTag]="Time"))(Bp.prototype);class G1 extends at{constructor(t,n){super(),this.unit=t,this.timezone=n}get typeId(){return D.Timestamp}toString(){return`Timestamp<${rt[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}gP=Symbol.toStringTag;G1[gP]=(e=>(e.unit=null,e.timezone=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Timestamp"))(G1.prototype);class X1 extends at{constructor(t){super(),this.unit=t}get typeId(){return D.Interval}toString(){return`Interval<${yr[this.unit]}>`}}bP=Symbol.toStringTag;X1[bP]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Interval"))(X1.prototype);let Q1=class extends at{constructor(t){super(),this.unit=t}get typeId(){return D.Duration}toString(){return`Duration<${rt[this.unit]}>`}};vP=Symbol.toStringTag;Q1[vP]=(e=>(e.unit=null,e.ArrayType=BigInt64Array,e[Symbol.toStringTag]="Duration"))(Q1.prototype);let K1=class extends at{constructor(t){super(),this.children=[t]}get typeId(){return D.List}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}};wP=Symbol.toStringTag;K1[wP]=(e=>(e.children=null,e[Symbol.toStringTag]="List"))(K1.prototype);class qn extends at{constructor(t){super(),this.children=t}get typeId(){return D.Struct}toString(){return`Struct<{${this.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}_P=Symbol.toStringTag;qn[_P]=(e=>(e.children=null,e[Symbol.toStringTag]="Struct"))(qn.prototype);class Z1 extends at{constructor(t,n,r){super(),this.mode=t,this.children=r,this.typeIds=n=Int32Array.from(n),this.typeIdToChildIndex=n.reduce((i,s,o)=>(i[s]=o)&&i||i,Object.create(null))}get typeId(){return D.Union}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(t=>`${t.type}`).join(" | ")}>`}}SP=Symbol.toStringTag;Z1[SP]=(e=>(e.mode=null,e.typeIds=null,e.children=null,e.typeIdToChildIndex=null,e.ArrayType=Int8Array,e[Symbol.toStringTag]="Union"))(Z1.prototype);let J1=class extends at{constructor(t){super(),this.byteWidth=t}get typeId(){return D.FixedSizeBinary}toString(){return`FixedSizeBinary[${this.byteWidth}]`}};xP=Symbol.toStringTag;J1[xP]=(e=>(e.byteWidth=null,e.ArrayType=Uint8Array,e[Symbol.toStringTag]="FixedSizeBinary"))(J1.prototype);let tb=class extends at{constructor(t,n){super(),this.listSize=t,this.children=[n]}get typeId(){return D.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}};IP=Symbol.toStringTag;tb[IP]=(e=>(e.children=null,e.listSize=null,e[Symbol.toStringTag]="FixedSizeList"))(tb.prototype);class eb extends at{constructor(t,n=!1){var r,i,s;if(super(),this.children=[t],this.keysSorted=n,t&&(t.name="entries",!((r=t==null?void 0:t.type)===null||r===void 0)&&r.children)){const o=(i=t==null?void 0:t.type)===null||i===void 0?void 0:i.children[0];o&&(o.name="key");const a=(s=t==null?void 0:t.type)===null||s===void 0?void 0:s.children[1];a&&(a.name="value")}}get typeId(){return D.Map}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}TP=Symbol.toStringTag;eb[TP]=(e=>(e.children=null,e.keysSorted=null,e[Symbol.toStringTag]="Map_"))(eb.prototype);const m0t=(e=>()=>++e)(-1);class Vf extends at{constructor(t,n,r,i){super(),this.indices=n,this.dictionary=t,this.isOrdered=i||!1,this.id=r==null?m0t():Gi(r)}get typeId(){return D.Dictionary}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}EP=Symbol.toStringTag;Vf[EP]=(e=>(e.id=null,e.indices=null,e.isOrdered=null,e.dictionary=null,e[Symbol.toStringTag]="Dictionary"))(Vf.prototype);function co(e){const t=e;switch(e.typeId){case D.Decimal:return e.bitWidth/32;case D.Timestamp:return 2;case D.Date:return 1+t.unit;case D.Interval:return 1+t.unit;case D.FixedSizeList:return t.listSize;case D.FixedSizeBinary:return t.byteWidth;default:return 1}}class Ft{visitMany(t,...n){return t.map((r,i)=>this.visit(r,...n.map(s=>s[i])))}visit(...t){return this.getVisitFn(t[0],!1).apply(this,t)}getVisitFn(t,n=!0){return g0t(this,t,n)}getVisitFnByTypeId(t,n=!0){return cu(this,t,n)}visitNull(t,...n){return null}visitBool(t,...n){return null}visitInt(t,...n){return null}visitFloat(t,...n){return null}visitUtf8(t,...n){return null}visitBinary(t,...n){return null}visitFixedSizeBinary(t,...n){return null}visitDate(t,...n){return null}visitTimestamp(t,...n){return null}visitTime(t,...n){return null}visitDecimal(t,...n){return null}visitList(t,...n){return null}visitStruct(t,...n){return null}visitUnion(t,...n){return null}visitDictionary(t,...n){return null}visitInterval(t,...n){return null}visitDuration(t,...n){return null}visitFixedSizeList(t,...n){return null}visitMap(t,...n){return null}}function g0t(e,t,n=!0){return typeof t=="number"?cu(e,t,n):typeof t=="string"&&t in D?cu(e,D[t],n):t&&t instanceof at?cu(e,UN(t),n):t!=null&&t.type&&t.type instanceof at?cu(e,UN(t.type),n):cu(e,D.NONE,n)}function cu(e,t,n=!0){let r=null;switch(t){case D.Null:r=e.visitNull;break;case D.Bool:r=e.visitBool;break;case D.Int:r=e.visitInt;break;case D.Int8:r=e.visitInt8||e.visitInt;break;case D.Int16:r=e.visitInt16||e.visitInt;break;case D.Int32:r=e.visitInt32||e.visitInt;break;case D.Int64:r=e.visitInt64||e.visitInt;break;case D.Uint8:r=e.visitUint8||e.visitInt;break;case D.Uint16:r=e.visitUint16||e.visitInt;break;case D.Uint32:r=e.visitUint32||e.visitInt;break;case D.Uint64:r=e.visitUint64||e.visitInt;break;case D.Float:r=e.visitFloat;break;case D.Float16:r=e.visitFloat16||e.visitFloat;break;case D.Float32:r=e.visitFloat32||e.visitFloat;break;case D.Float64:r=e.visitFloat64||e.visitFloat;break;case D.Utf8:r=e.visitUtf8;break;case D.Binary:r=e.visitBinary;break;case D.FixedSizeBinary:r=e.visitFixedSizeBinary;break;case D.Date:r=e.visitDate;break;case D.DateDay:r=e.visitDateDay||e.visitDate;break;case D.DateMillisecond:r=e.visitDateMillisecond||e.visitDate;break;case D.Timestamp:r=e.visitTimestamp;break;case D.TimestampSecond:r=e.visitTimestampSecond||e.visitTimestamp;break;case D.TimestampMillisecond:r=e.visitTimestampMillisecond||e.visitTimestamp;break;case D.TimestampMicrosecond:r=e.visitTimestampMicrosecond||e.visitTimestamp;break;case D.TimestampNanosecond:r=e.visitTimestampNanosecond||e.visitTimestamp;break;case D.Time:r=e.visitTime;break;case D.TimeSecond:r=e.visitTimeSecond||e.visitTime;break;case D.TimeMillisecond:r=e.visitTimeMillisecond||e.visitTime;break;case D.TimeMicrosecond:r=e.visitTimeMicrosecond||e.visitTime;break;case D.TimeNanosecond:r=e.visitTimeNanosecond||e.visitTime;break;case D.Decimal:r=e.visitDecimal;break;case D.List:r=e.visitList;break;case D.Struct:r=e.visitStruct;break;case D.Union:r=e.visitUnion;break;case D.DenseUnion:r=e.visitDenseUnion||e.visitUnion;break;case D.SparseUnion:r=e.visitSparseUnion||e.visitUnion;break;case D.Dictionary:r=e.visitDictionary;break;case D.Interval:r=e.visitInterval;break;case D.IntervalDayTime:r=e.visitIntervalDayTime||e.visitInterval;break;case D.IntervalYearMonth:r=e.visitIntervalYearMonth||e.visitInterval;break;case D.Duration:r=e.visitDuration;break;case D.DurationSecond:r=e.visitDurationSecond||e.visitDuration;break;case D.DurationMillisecond:r=e.visitDurationMillisecond||e.visitDuration;break;case D.DurationMicrosecond:r=e.visitDurationMicrosecond||e.visitDuration;break;case D.DurationNanosecond:r=e.visitDurationNanosecond||e.visitDuration;break;case D.FixedSizeList:r=e.visitFixedSizeList;break;case D.Map:r=e.visitMap;break}if(typeof r=="function")return r;if(!n)return()=>null;throw new Error(`Unrecognized type '${D[t]}'`)}function UN(e){switch(e.typeId){case D.Null:return D.Null;case D.Int:{const{bitWidth:t,isSigned:n}=e;switch(t){case 8:return n?D.Int8:D.Uint8;case 16:return n?D.Int16:D.Uint16;case 32:return n?D.Int32:D.Uint32;case 64:return n?D.Int64:D.Uint64}return D.Int}case D.Float:switch(e.precision){case nn.HALF:return D.Float16;case nn.SINGLE:return D.Float32;case nn.DOUBLE:return D.Float64}return D.Float;case D.Binary:return D.Binary;case D.Utf8:return D.Utf8;case D.Bool:return D.Bool;case D.Decimal:return D.Decimal;case D.Time:switch(e.unit){case rt.SECOND:return D.TimeSecond;case rt.MILLISECOND:return D.TimeMillisecond;case rt.MICROSECOND:return D.TimeMicrosecond;case rt.NANOSECOND:return D.TimeNanosecond}return D.Time;case D.Timestamp:switch(e.unit){case rt.SECOND:return D.TimestampSecond;case rt.MILLISECOND:return D.TimestampMillisecond;case rt.MICROSECOND:return D.TimestampMicrosecond;case rt.NANOSECOND:return D.TimestampNanosecond}return D.Timestamp;case D.Date:switch(e.unit){case Pr.DAY:return D.DateDay;case Pr.MILLISECOND:return D.DateMillisecond}return D.Date;case D.Interval:switch(e.unit){case yr.DAY_TIME:return D.IntervalDayTime;case yr.YEAR_MONTH:return D.IntervalYearMonth}return D.Interval;case D.Duration:switch(e.unit){case rt.SECOND:return D.DurationSecond;case rt.MILLISECOND:return D.DurationMillisecond;case rt.MICROSECOND:return D.DurationMicrosecond;case rt.NANOSECOND:return D.DurationNanosecond}return D.Duration;case D.Map:return D.Map;case D.List:return D.List;case D.Struct:return D.Struct;case D.Union:switch(e.mode){case ln.Dense:return D.DenseUnion;case ln.Sparse:return D.SparseUnion}return D.Union;case D.FixedSizeBinary:return D.FixedSizeBinary;case D.FixedSizeList:return D.FixedSizeList;case D.Dictionary:return D.Dictionary}throw new Error(`Unrecognized type '${D[e.typeId]}'`)}Ft.prototype.visitInt8=null;Ft.prototype.visitInt16=null;Ft.prototype.visitInt32=null;Ft.prototype.visitInt64=null;Ft.prototype.visitUint8=null;Ft.prototype.visitUint16=null;Ft.prototype.visitUint32=null;Ft.prototype.visitUint64=null;Ft.prototype.visitFloat16=null;Ft.prototype.visitFloat32=null;Ft.prototype.visitFloat64=null;Ft.prototype.visitDateDay=null;Ft.prototype.visitDateMillisecond=null;Ft.prototype.visitTimestampSecond=null;Ft.prototype.visitTimestampMillisecond=null;Ft.prototype.visitTimestampMicrosecond=null;Ft.prototype.visitTimestampNanosecond=null;Ft.prototype.visitTimeSecond=null;Ft.prototype.visitTimeMillisecond=null;Ft.prototype.visitTimeMicrosecond=null;Ft.prototype.visitTimeNanosecond=null;Ft.prototype.visitDenseUnion=null;Ft.prototype.visitSparseUnion=null;Ft.prototype.visitIntervalDayTime=null;Ft.prototype.visitIntervalYearMonth=null;Ft.prototype.visitDuration=null;Ft.prototype.visitDurationSecond=null;Ft.prototype.visitDurationMillisecond=null;Ft.prototype.visitDurationMicrosecond=null;Ft.prototype.visitDurationNanosecond=null;const AP=new Float64Array(1),Qc=new Uint32Array(AP.buffer);function MP(e){const t=(e&31744)>>10,n=(e&1023)/1024,r=Math.pow(-1,(e&32768)>>15);switch(t){case 31:return r*(n?Number.NaN:1/0);case 0:return r*(n?6103515625e-14*n:0)}return r*Math.pow(2,t-15)*(1+n)}function b0t(e){if(e!==e)return 32256;AP[0]=e;const t=(Qc[1]&2147483648)>>16&65535;let n=Qc[1]&2146435072,r=0;return n>=1089470464?Qc[0]>0?n=31744:(n=(n&2080374784)>>16,r=(Qc[1]&1048575)>>10):n<=1056964608?(r=1048576+(Qc[1]&1048575),r=1048576+(r<<(n>>20)-998)>>21,n=0):(n=n-1056964608>>10,r=(Qc[1]&1048575)+512>>10),t|n|r&65535}class bt extends Ft{}function _t(e){return(t,n,r)=>{if(t.setValid(n,r!=null))return e(t,n,r)}}const v0t=(e,t,n)=>{e[t]=Math.trunc(n/864e5)},bE=(e,t,n)=>{e[t]=Math.trunc(n%4294967296),e[t+1]=Math.trunc(n/4294967296)},w0t=(e,t,n)=>{e[t]=Math.trunc(n*1e3%4294967296),e[t+1]=Math.trunc(n*1e3/4294967296)},_0t=(e,t,n)=>{e[t]=Math.trunc(n*1e6%4294967296),e[t+1]=Math.trunc(n*1e6/4294967296)},$P=(e,t,n,r)=>{if(n+1<t.length){const{[n]:i,[n+1]:s}=t;e.set(r.subarray(0,s-i),i)}},S0t=({offset:e,values:t},n,r)=>{const i=e+n;r?t[i>>3]|=1<<i%8:t[i>>3]&=~(1<<i%8)},Go=({values:e},t,n)=>{e[t]=n},vE=({values:e},t,n)=>{e[t]=n},NP=({values:e},t,n)=>{e[t]=b0t(n)},x0t=(e,t,n)=>{switch(e.type.precision){case nn.HALF:return NP(e,t,n);case nn.SINGLE:case nn.DOUBLE:return vE(e,t,n)}},DP=({values:e},t,n)=>{v0t(e,t,n.valueOf())},kP=({values:e},t,n)=>{bE(e,t*2,n.valueOf())},I0t=({stride:e,values:t},n,r)=>{t.set(r.subarray(0,e),e*n)},T0t=({values:e,valueOffsets:t},n,r)=>$P(e,t,n,r),E0t=({values:e,valueOffsets:t},n,r)=>{$P(e,t,n,pE(r))},A0t=(e,t,n)=>{e.type.unit===Pr.DAY?DP(e,t,n):kP(e,t,n)},OP=({values:e},t,n)=>bE(e,t*2,n/1e3),FP=({values:e},t,n)=>bE(e,t*2,n),BP=({values:e},t,n)=>w0t(e,t*2,n),RP=({values:e},t,n)=>_0t(e,t*2,n),M0t=(e,t,n)=>{switch(e.type.unit){case rt.SECOND:return OP(e,t,n);case rt.MILLISECOND:return FP(e,t,n);case rt.MICROSECOND:return BP(e,t,n);case rt.NANOSECOND:return RP(e,t,n)}},LP=({values:e},t,n)=>{e[t]=n},CP=({values:e},t,n)=>{e[t]=n},UP=({values:e},t,n)=>{e[t]=n},PP=({values:e},t,n)=>{e[t]=n},$0t=(e,t,n)=>{switch(e.type.unit){case rt.SECOND:return LP(e,t,n);case rt.MILLISECOND:return CP(e,t,n);case rt.MICROSECOND:return UP(e,t,n);case rt.NANOSECOND:return PP(e,t,n)}},N0t=({values:e,stride:t},n,r)=>{e.set(r.subarray(0,t),t*n)},D0t=(e,t,n)=>{const r=e.children[0],i=e.valueOffsets,s=vi.getVisitFn(r);if(Array.isArray(n))for(let o=-1,a=i[t],l=i[t+1];a<l;)s(r,a++,n[++o]);else for(let o=-1,a=i[t],l=i[t+1];a<l;)s(r,a++,n.get(++o))},k0t=(e,t,n)=>{const r=e.children[0],{valueOffsets:i}=e,s=vi.getVisitFn(r);let{[t]:o,[t+1]:a}=i;const l=n instanceof Map?n.entries():Object.entries(n);for(const c of l)if(s(r,o,c),++o>=a)break},O0t=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[s]),F0t=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(s)),B0t=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(i.name)),R0t=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[i.name]),L0t=(e,t,n)=>{const r=e.type.children.map(s=>vi.getVisitFn(s.type)),i=n instanceof Map?B0t(t,n):n instanceof ie?F0t(t,n):Array.isArray(n)?O0t(t,n):R0t(t,n);e.type.children.forEach((s,o)=>i(r[o],e.children[o],s,o))},C0t=(e,t,n)=>{e.type.mode===ln.Dense?zP(e,t,n):jP(e,t,n)},zP=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];vi.visit(i,e.valueOffsets[t],n)},jP=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];vi.visit(i,t,n)},U0t=(e,t,n)=>{var r;(r=e.dictionary)===null||r===void 0||r.set(e.values[t],n)},P0t=(e,t,n)=>{e.type.unit===yr.DAY_TIME?VP(e,t,n):YP(e,t,n)},VP=({values:e},t,n)=>{e.set(n.subarray(0,2),2*t)},YP=({values:e},t,n)=>{e[t]=n[0]*12+n[1]%12},qP=({values:e},t,n)=>{e[t]=n},WP=({values:e},t,n)=>{e[t]=n},HP=({values:e},t,n)=>{e[t]=n},GP=({values:e},t,n)=>{e[t]=n},z0t=(e,t,n)=>{switch(e.type.unit){case rt.SECOND:return qP(e,t,n);case rt.MILLISECOND:return WP(e,t,n);case rt.MICROSECOND:return HP(e,t,n);case rt.NANOSECOND:return GP(e,t,n)}},j0t=(e,t,n)=>{const{stride:r}=e,i=e.children[0],s=vi.getVisitFn(i);if(Array.isArray(n))for(let o=-1,a=t*r;++o<r;)s(i,a+o,n[o]);else for(let o=-1,a=t*r;++o<r;)s(i,a+o,n.get(o))};bt.prototype.visitBool=_t(S0t);bt.prototype.visitInt=_t(Go);bt.prototype.visitInt8=_t(Go);bt.prototype.visitInt16=_t(Go);bt.prototype.visitInt32=_t(Go);bt.prototype.visitInt64=_t(Go);bt.prototype.visitUint8=_t(Go);bt.prototype.visitUint16=_t(Go);bt.prototype.visitUint32=_t(Go);bt.prototype.visitUint64=_t(Go);bt.prototype.visitFloat=_t(x0t);bt.prototype.visitFloat16=_t(NP);bt.prototype.visitFloat32=_t(vE);bt.prototype.visitFloat64=_t(vE);bt.prototype.visitUtf8=_t(E0t);bt.prototype.visitBinary=_t(T0t);bt.prototype.visitFixedSizeBinary=_t(I0t);bt.prototype.visitDate=_t(A0t);bt.prototype.visitDateDay=_t(DP);bt.prototype.visitDateMillisecond=_t(kP);bt.prototype.visitTimestamp=_t(M0t);bt.prototype.visitTimestampSecond=_t(OP);bt.prototype.visitTimestampMillisecond=_t(FP);bt.prototype.visitTimestampMicrosecond=_t(BP);bt.prototype.visitTimestampNanosecond=_t(RP);bt.prototype.visitTime=_t($0t);bt.prototype.visitTimeSecond=_t(LP);bt.prototype.visitTimeMillisecond=_t(CP);bt.prototype.visitTimeMicrosecond=_t(UP);bt.prototype.visitTimeNanosecond=_t(PP);bt.prototype.visitDecimal=_t(N0t);bt.prototype.visitList=_t(D0t);bt.prototype.visitStruct=_t(L0t);bt.prototype.visitUnion=_t(C0t);bt.prototype.visitDenseUnion=_t(zP);bt.prototype.visitSparseUnion=_t(jP);bt.prototype.visitDictionary=_t(U0t);bt.prototype.visitInterval=_t(P0t);bt.prototype.visitIntervalDayTime=_t(VP);bt.prototype.visitIntervalYearMonth=_t(YP);bt.prototype.visitDuration=_t(z0t);bt.prototype.visitDurationSecond=_t(qP);bt.prototype.visitDurationMillisecond=_t(WP);bt.prototype.visitDurationMicrosecond=_t(HP);bt.prototype.visitDurationNanosecond=_t(GP);bt.prototype.visitFixedSizeList=_t(j0t);bt.prototype.visitMap=_t(k0t);const vi=new bt,$i=Symbol.for("parent"),of=Symbol.for("rowIndex");class wE{constructor(t,n){return this[$i]=t,this[of]=n,new Proxy(this,new Y0t)}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[of],n=this[$i],r=n.type.children,i={};for(let s=-1,o=r.length;++s<o;)i[r[s].name]=Sr.visit(n.children[s],t);return i}toString(){return`{${[...this].map(([t,n])=>`${Np(t)}: ${Np(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new V0t(this[$i],this[of])}}class V0t{constructor(t,n){this.childIndex=0,this.children=t.children,this.rowIndex=n,this.childFields=t.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const t=this.childIndex;return t<this.numChildren?(this.childIndex=t+1,{done:!1,value:[this.childFields[t].name,Sr.visit(this.children[t],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties(wE.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[$i]:{writable:!0,enumerable:!1,configurable:!1,value:null},[of]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class Y0t{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[$i].type.children.map(n=>n.name)}has(t,n){return t[$i].type.children.findIndex(r=>r.name===n)!==-1}getOwnPropertyDescriptor(t,n){if(t[$i].type.children.findIndex(r=>r.name===n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[$i].type.children.findIndex(i=>i.name===n);if(r!==-1){const i=Sr.visit(t[$i].children[r],t[of]);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[$i].type.children.findIndex(s=>s.name===n);return i!==-1?(vi.visit(t[$i].children[i],t[of],r),Reflect.set(t,n,r)):Reflect.has(t,n)||typeof n=="symbol"?Reflect.set(t,n,r):!1}}class ht extends Ft{}function vt(e){return(t,n)=>t.getValid(n)?e(t,n):null}const q0t=(e,t)=>864e5*e[t],_E=(e,t)=>4294967296*e[t+1]+(e[t]>>>0),W0t=(e,t)=>4294967296*(e[t+1]/1e3)+(e[t]>>>0)/1e3,H0t=(e,t)=>4294967296*(e[t+1]/1e6)+(e[t]>>>0)/1e6,XP=e=>new Date(e),G0t=(e,t)=>XP(q0t(e,t)),X0t=(e,t)=>XP(_E(e,t)),Q0t=(e,t)=>null,QP=(e,t,n)=>{if(n+1>=t.length)return null;const r=t[n],i=t[n+1];return e.subarray(r,i)},K0t=({offset:e,values:t},n)=>{const r=e+n;return(t[r>>3]&1<<r%8)!==0},KP=({values:e},t)=>G0t(e,t),ZP=({values:e},t)=>X0t(e,t*2),hl=({stride:e,values:t},n)=>t[e*n],Z0t=({stride:e,values:t},n)=>MP(t[e*n]),JP=({values:e},t)=>e[t],J0t=({stride:e,values:t},n)=>t.subarray(e*n,e*(n+1)),tmt=({values:e,valueOffsets:t},n)=>QP(e,t,n),emt=({values:e,valueOffsets:t},n)=>{const r=QP(e,t,n);return r!==null?Tx(r):null},nmt=({values:e},t)=>e[t],rmt=({type:e,values:t},n)=>e.precision!==nn.HALF?t[n]:MP(t[n]),imt=(e,t)=>e.type.unit===Pr.DAY?KP(e,t):ZP(e,t),t9=({values:e},t)=>1e3*_E(e,t*2),e9=({values:e},t)=>_E(e,t*2),n9=({values:e},t)=>W0t(e,t*2),r9=({values:e},t)=>H0t(e,t*2),smt=(e,t)=>{switch(e.type.unit){case rt.SECOND:return t9(e,t);case rt.MILLISECOND:return e9(e,t);case rt.MICROSECOND:return n9(e,t);case rt.NANOSECOND:return r9(e,t)}},i9=({values:e},t)=>e[t],s9=({values:e},t)=>e[t],o9=({values:e},t)=>e[t],a9=({values:e},t)=>e[t],omt=(e,t)=>{switch(e.type.unit){case rt.SECOND:return i9(e,t);case rt.MILLISECOND:return s9(e,t);case rt.MICROSECOND:return o9(e,t);case rt.NANOSECOND:return a9(e,t)}},amt=({values:e,stride:t},n)=>gE.decimal(e.subarray(t*n,t*(n+1))),lmt=(e,t)=>{const{valueOffsets:n,stride:r,children:i}=e,{[t*r]:s,[t*r+1]:o}=n,l=i[0].slice(s,o-s);return new ie([l])},cmt=(e,t)=>{const{valueOffsets:n,children:r}=e,{[t]:i,[t+1]:s}=n,o=r[0];return new SE(o.slice(i,s-i))},umt=(e,t)=>new wE(e,t),fmt=(e,t)=>e.type.mode===ln.Dense?l9(e,t):c9(e,t),l9=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return Sr.visit(r,e.valueOffsets[t])},c9=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return Sr.visit(r,t)},dmt=(e,t)=>{var n;return(n=e.dictionary)===null||n===void 0?void 0:n.get(e.values[t])},hmt=(e,t)=>e.type.unit===yr.DAY_TIME?u9(e,t):f9(e,t),u9=({values:e},t)=>e.subarray(2*t,2*(t+1)),f9=({values:e},t)=>{const n=e[t],r=new Int32Array(2);return r[0]=Math.trunc(n/12),r[1]=Math.trunc(n%12),r},d9=({values:e},t)=>e[t],h9=({values:e},t)=>e[t],p9=({values:e},t)=>e[t],y9=({values:e},t)=>e[t],pmt=(e,t)=>{switch(e.type.unit){case rt.SECOND:return d9(e,t);case rt.MILLISECOND:return h9(e,t);case rt.MICROSECOND:return p9(e,t);case rt.NANOSECOND:return y9(e,t)}},ymt=(e,t)=>{const{stride:n,children:r}=e,s=r[0].slice(t*n,n);return new ie([s])};ht.prototype.visitNull=vt(Q0t);ht.prototype.visitBool=vt(K0t);ht.prototype.visitInt=vt(nmt);ht.prototype.visitInt8=vt(hl);ht.prototype.visitInt16=vt(hl);ht.prototype.visitInt32=vt(hl);ht.prototype.visitInt64=vt(JP);ht.prototype.visitUint8=vt(hl);ht.prototype.visitUint16=vt(hl);ht.prototype.visitUint32=vt(hl);ht.prototype.visitUint64=vt(JP);ht.prototype.visitFloat=vt(rmt);ht.prototype.visitFloat16=vt(Z0t);ht.prototype.visitFloat32=vt(hl);ht.prototype.visitFloat64=vt(hl);ht.prototype.visitUtf8=vt(emt);ht.prototype.visitBinary=vt(tmt);ht.prototype.visitFixedSizeBinary=vt(J0t);ht.prototype.visitDate=vt(imt);ht.prototype.visitDateDay=vt(KP);ht.prototype.visitDateMillisecond=vt(ZP);ht.prototype.visitTimestamp=vt(smt);ht.prototype.visitTimestampSecond=vt(t9);ht.prototype.visitTimestampMillisecond=vt(e9);ht.prototype.visitTimestampMicrosecond=vt(n9);ht.prototype.visitTimestampNanosecond=vt(r9);ht.prototype.visitTime=vt(omt);ht.prototype.visitTimeSecond=vt(i9);ht.prototype.visitTimeMillisecond=vt(s9);ht.prototype.visitTimeMicrosecond=vt(o9);ht.prototype.visitTimeNanosecond=vt(a9);ht.prototype.visitDecimal=vt(amt);ht.prototype.visitList=vt(lmt);ht.prototype.visitStruct=vt(umt);ht.prototype.visitUnion=vt(fmt);ht.prototype.visitDenseUnion=vt(l9);ht.prototype.visitSparseUnion=vt(c9);ht.prototype.visitDictionary=vt(dmt);ht.prototype.visitInterval=vt(hmt);ht.prototype.visitIntervalDayTime=vt(u9);ht.prototype.visitIntervalYearMonth=vt(f9);ht.prototype.visitDuration=vt(pmt);ht.prototype.visitDurationSecond=vt(d9);ht.prototype.visitDurationMillisecond=vt(h9);ht.prototype.visitDurationMicrosecond=vt(p9);ht.prototype.visitDurationNanosecond=vt(y9);ht.prototype.visitFixedSizeList=vt(ymt);ht.prototype.visitMap=vt(cmt);const Sr=new ht,vs=Symbol.for("keys"),af=Symbol.for("vals");class SE{constructor(t){return this[vs]=new ie([t.children[0]]).memoize(),this[af]=t.children[1],new Proxy(this,new gmt)}[Symbol.iterator](){return new mmt(this[vs],this[af])}get size(){return this[vs].length}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[vs],n=this[af],r={};for(let i=-1,s=t.length;++i<s;)r[t.get(i)]=Sr.visit(n,i);return r}toString(){return`{${[...this].map(([t,n])=>`${Np(t)}: ${Np(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}class mmt{constructor(t,n){this.keys=t,this.vals=n,this.keyIndex=0,this.numKeys=t.length}[Symbol.iterator](){return this}next(){const t=this.keyIndex;return t===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(t),Sr.visit(this.vals,t)]})}}class gmt{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[vs].toArray().map(String)}has(t,n){return t[vs].includes(n)}getOwnPropertyDescriptor(t,n){if(t[vs].indexOf(n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[vs].indexOf(n);if(r!==-1){const i=Sr.visit(Reflect.get(t,af),r);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[vs].indexOf(n);return i!==-1?(vi.visit(Reflect.get(t,af),i,r),Reflect.set(t,n,r)):Reflect.has(t,n)?Reflect.set(t,n,r):!1}}Object.defineProperties(SE.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[vs]:{writable:!0,enumerable:!1,configurable:!1,value:null},[af]:{writable:!0,enumerable:!1,configurable:!1,value:null}});let PN;function m9(e,t,n,r){const{length:i=0}=e;let s=typeof t!="number"?0:t,o=typeof n!="number"?i:n;return s<0&&(s=(s%i+i)%i),o<0&&(o=(o%i+i)%i),o<s&&(PN=s,s=o,o=PN),o>i&&(o=i),r?r(e,s,o):[s,o]}const zN=e=>e!==e;function vd(e){if(typeof e!=="object"||e===null)return zN(e)?zN:n=>n===e;if(e instanceof Date){const n=e.valueOf();return r=>r instanceof Date?r.valueOf()===n:!1}return ArrayBuffer.isView(e)?n=>n?a0t(e,n):!1:e instanceof Map?vmt(e):Array.isArray(e)?bmt(e):e instanceof ie?wmt(e):_mt(e,!0)}function bmt(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=vd(e[n]);return Gv(t)}function vmt(e){let t=-1;const n=[];for(const r of e.values())n[++t]=vd(r);return Gv(n)}function wmt(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=vd(e.get(n));return Gv(t)}function _mt(e,t=!1){const n=Object.keys(e);if(!t&&n.length===0)return()=>!1;const r=[];for(let i=-1,s=n.length;++i<s;)r[i]=vd(e[n[i]]);return Gv(r,n)}function Gv(e,t){return n=>{if(!n||typeof n!="object")return!1;switch(n.constructor){case Array:return Smt(e,n);case Map:return jN(e,n,n.keys());case SE:case wE:case Object:case void 0:return jN(e,n,t||Object.keys(n))}return n instanceof ie?xmt(e,n):!1}}function Smt(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t[r]))return!1;return!0}function xmt(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t.get(r)))return!1;return!0}function jN(e,t,n){const r=n[Symbol.iterator](),i=t instanceof Map?t.keys():Object.keys(t)[Symbol.iterator](),s=t instanceof Map?t.values():Object.values(t)[Symbol.iterator]();let o=0;const a=e.length;let l=s.next(),c=r.next(),u=i.next();for(;o<a&&!c.done&&!u.done&&!l.done&&!(c.value!==u.value||!e[o](l.value));++o,c=r.next(),u=i.next(),l=s.next());return o===a&&c.done&&u.done&&l.done?!0:(r.return&&r.return(),i.return&&i.return(),s.return&&s.return(),!1)}function g9(e,t,n,r){return(n&1<<r)!==0}function Imt(e,t,n,r){return(n&1<<r)>>r}function nb(e,t,n){const r=n.byteLength+7&-8;if(e>0||n.byteLength<r){const i=new Uint8Array(r);return i.set(e%8===0?n.subarray(e>>3):rb(new xE(n,e,t,null,g9)).subarray(0,r)),i}return n}function rb(e){const t=[];let n=0,r=0,i=0;for(const o of e)o&&(i|=1<<r),++r===8&&(t[n++]=i,i=r=0);(n===0||r>0)&&(t[n++]=i);const s=new Uint8Array(t.length+7&-8);return s.set(t),s}class xE{constructor(t,n,r,i,s){this.bytes=t,this.length=r,this.context=i,this.get=s,this.bit=n%8,this.byteIndex=n>>3,this.byte=t[this.byteIndex++],this.index=0}next(){return this.index<this.length?(this.bit===8&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}function Mx(e,t,n){if(n-t<=0)return 0;if(n-t<8){let s=0;for(const o of new xE(e,t,n-t,e,Imt))s+=o;return s}const r=n>>3<<3,i=t+(t%8===0?0:8-t%8);return Mx(e,t,i)+Mx(e,r,n)+Tmt(e,i>>3,r-i>>3)}function Tmt(e,t,n){let r=0,i=Math.trunc(t);const s=new DataView(e.buffer,e.byteOffset,e.byteLength),o=n===void 0?e.byteLength:i+n;for(;o-i>=4;)r+=F_(s.getUint32(i)),i+=4;for(;o-i>=2;)r+=F_(s.getUint16(i)),i+=2;for(;o-i>=1;)r+=F_(s.getUint8(i)),i+=1;return r}function F_(e){let t=Math.trunc(e);return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),(t+(t>>>4)&252645135)*16843009>>>24}const Emt=-1;class he{get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get nullable(){if(this._nullCount!==0){const{type:t}=this;return at.isSparseUnion(t)?this.children.some(n=>n.nullable):at.isDenseUnion(t)?this.children.some(n=>n.nullable):this.nullBitmap&&this.nullBitmap.byteLength>0}return!0}get byteLength(){let t=0;const{valueOffsets:n,values:r,nullBitmap:i,typeIds:s}=this;return n&&(t+=n.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),s&&(t+=s.byteLength),this.children.reduce((o,a)=>o+a.byteLength,t)}get nullCount(){if(at.isUnion(this.type))return this.children.reduce((r,i)=>r+i.nullCount,0);let t=this._nullCount,n;return t<=Emt&&(n=this.nullBitmap)&&(this._nullCount=t=this.length-Mx(n,this.offset,this.offset+this.length)),t}constructor(t,n,r,i,s,o=[],a){this.type=t,this.children=o,this.dictionary=a,this.offset=Math.floor(Math.max(n||0,0)),this.length=Math.floor(Math.max(r||0,0)),this._nullCount=Math.floor(Math.max(i||0,-1));let l;s instanceof he?(this.stride=s.stride,this.values=s.values,this.typeIds=s.typeIds,this.nullBitmap=s.nullBitmap,this.valueOffsets=s.valueOffsets):(this.stride=co(t),s&&((l=s[0])&&(this.valueOffsets=l),(l=s[1])&&(this.values=l),(l=s[2])&&(this.nullBitmap=l),(l=s[3])&&(this.typeIds=l)))}getValid(t){const{type:n}=this;if(at.isUnion(n)){const r=n,i=this.children[r.typeIdToChildIndex[this.typeIds[t]]],s=r.mode===ln.Dense?this.valueOffsets[t]:t;return i.getValid(s)}if(this.nullable&&this.nullCount>0){const r=this.offset+t;return(this.nullBitmap[r>>3]&1<<r%8)!==0}return!0}setValid(t,n){let r;const{type:i}=this;if(at.isUnion(i)){const s=i,o=this.children[s.typeIdToChildIndex[this.typeIds[t]]],a=s.mode===ln.Dense?this.valueOffsets[t]:t;r=o.getValid(a),o.setValid(a,n)}else{let{nullBitmap:s}=this;const{offset:o,length:a}=this,l=o+t,c=1<<l%8,u=l>>3;(!s||s.byteLength<=u)&&(s=new Uint8Array((o+a+63&-64)>>3).fill(255),this.nullCount>0&&s.set(nb(o,a,this.nullBitmap),0),Object.assign(this,{nullBitmap:s,_nullCount:-1}));const f=s[u];r=(f&c)!==0,n?s[u]=f|c:s[u]=f&~c}return r!==!!n&&(this._nullCount=this.nullCount+(n?-1:1)),n}clone(t=this.type,n=this.offset,r=this.length,i=this._nullCount,s=this,o=this.children){return new he(t,n,r,i,s,o,this.dictionary)}slice(t,n){const{stride:r,typeId:i,children:s}=this,o=+(this._nullCount===0)-1,a=i===16?r:1,l=this._sliceBuffers(t,n,r,i);return this.clone(this.type,this.offset+t,n,o,l,s.length===0||this.valueOffsets?s:this._sliceChildren(s,a*t,a*n))}_changeLengthAndBackfillNullBitmap(t){if(this.typeId===D.Null)return this.clone(this.type,0,t,0);const{length:n,nullCount:r}=this,i=new Uint8Array((t+63&-64)>>3).fill(255,0,n>>3);i[n>>3]=(1<<n-(n&-8))-1,r>0&&i.set(nb(this.offset,n,this.nullBitmap),0);const s=this.buffers;return s[lo.VALIDITY]=i,this.clone(this.type,0,t,r+(t-n),s)}_sliceBuffers(t,n,r,i){let s;const{buffers:o}=this;return(s=o[lo.TYPE])&&(o[lo.TYPE]=s.subarray(t,t+n)),(s=o[lo.OFFSET])&&(o[lo.OFFSET]=s.subarray(t,t+n+1))||(s=o[lo.DATA])&&(o[lo.DATA]=i===6?s:s.subarray(r*t,r*(t+n))),o}_sliceChildren(t,n,r){return t.map(i=>i.slice(n,r))}}he.prototype.children=Object.freeze([]);class Bh extends Ft{visit(t){return this.getVisitFn(t.type).call(this,t)}visitNull(t){const{["type"]:n,["offset"]:r=0,["length"]:i=0}=t;return new he(n,r,i,i)}visitBool(t){const{["type"]:n,["offset"]:r=0}=t,i=Zt(t.nullBitmap),s=ce(n.ArrayType,t.data),{["length"]:o=s.length>>3,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new he(n,r,o,a,[void 0,s,i])}visitInt(t){const{["type"]:n,["offset"]:r=0}=t,i=Zt(t.nullBitmap),s=ce(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new he(n,r,o,a,[void 0,s,i])}visitFloat(t){const{["type"]:n,["offset"]:r=0}=t,i=Zt(t.nullBitmap),s=ce(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new he(n,r,o,a,[void 0,s,i])}visitUtf8(t){const{["type"]:n,["offset"]:r=0}=t,i=Zt(t.data),s=Zt(t.nullBitmap),o=Vd(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:l=t.nullBitmap?-1:0}=t;return new he(n,r,a,l,[o,i,s])}visitBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=Zt(t.data),s=Zt(t.nullBitmap),o=Vd(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:l=t.nullBitmap?-1:0}=t;return new he(n,r,a,l,[o,i,s])}visitFixedSizeBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=Zt(t.nullBitmap),s=ce(n.ArrayType,t.data),{["length"]:o=s.length/co(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new he(n,r,o,a,[void 0,s,i])}visitDate(t){const{["type"]:n,["offset"]:r=0}=t,i=Zt(t.nullBitmap),s=ce(n.ArrayType,t.data),{["length"]:o=s.length/co(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new he(n,r,o,a,[void 0,s,i])}visitTimestamp(t){const{["type"]:n,["offset"]:r=0}=t,i=Zt(t.nullBitmap),s=ce(n.ArrayType,t.data),{["length"]:o=s.length/co(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new he(n,r,o,a,[void 0,s,i])}visitTime(t){const{["type"]:n,["offset"]:r=0}=t,i=Zt(t.nullBitmap),s=ce(n.ArrayType,t.data),{["length"]:o=s.length/co(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new he(n,r,o,a,[void 0,s,i])}visitDecimal(t){const{["type"]:n,["offset"]:r=0}=t,i=Zt(t.nullBitmap),s=ce(n.ArrayType,t.data),{["length"]:o=s.length/co(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new he(n,r,o,a,[void 0,s,i])}visitList(t){const{["type"]:n,["offset"]:r=0,["child"]:i}=t,s=Zt(t.nullBitmap),o=Vd(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:l=t.nullBitmap?-1:0}=t;return new he(n,r,a,l,[o,void 0,s],[i])}visitStruct(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=Zt(t.nullBitmap),{length:o=i.reduce((l,{length:c})=>Math.max(l,c),0),nullCount:a=t.nullBitmap?-1:0}=t;return new he(n,r,o,a,[void 0,void 0,s],i)}visitUnion(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=ce(n.ArrayType,t.typeIds),{["length"]:o=s.length,["nullCount"]:a=-1}=t;if(at.isSparseUnion(n))return new he(n,r,o,a,[void 0,void 0,void 0,s],i);const l=Vd(t.valueOffsets);return new he(n,r,o,a,[l,void 0,void 0,s],i)}visitDictionary(t){const{["type"]:n,["offset"]:r=0}=t,i=Zt(t.nullBitmap),s=ce(n.indices.ArrayType,t.data),{["dictionary"]:o=new ie([new Bh().visit({type:n.dictionary})])}=t,{["length"]:a=s.length,["nullCount"]:l=t.nullBitmap?-1:0}=t;return new he(n,r,a,l,[void 0,s,i],[],o)}visitInterval(t){const{["type"]:n,["offset"]:r=0}=t,i=Zt(t.nullBitmap),s=ce(n.ArrayType,t.data),{["length"]:o=s.length/co(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new he(n,r,o,a,[void 0,s,i])}visitDuration(t){const{["type"]:n,["offset"]:r=0}=t,i=Zt(t.nullBitmap),s=ce(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new he(n,r,o,a,[void 0,s,i])}visitFixedSizeList(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new Bh().visit({type:n.valueType})}=t,s=Zt(t.nullBitmap),{["length"]:o=i.length/co(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new he(n,r,o,a,[void 0,void 0,s],[i])}visitMap(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new Bh().visit({type:n.childType})}=t,s=Zt(t.nullBitmap),o=Vd(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:l=t.nullBitmap?-1:0}=t;return new he(n,r,a,l,[o,void 0,s],[i])}}const Amt=new Bh;function Ct(e){return Amt.visit(e)}class VN{constructor(t=0,n){this.numChunks=t,this.getChunkIterator=n,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const t=this.chunkIterator.next();if(!t.done)return t;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}function b9(e){return e.reduce((t,n)=>t+n.nullCount,0)}function v9(e){return e.reduce((t,n,r)=>(t[r+1]=t[r]+n.length,t),new Uint32Array(e.length+1))}function w9(e,t,n,r){const i=[];for(let s=-1,o=e.length;++s<o;){const a=e[s],l=t[s],{length:c}=a;if(l>=r)break;if(n>=l+c)continue;if(l>=n&&l+c<=r){i.push(a);continue}const u=Math.max(0,n-l),f=Math.min(r-l,c);i.push(a.slice(u,f-u))}return i.length===0&&i.push(e[0].slice(0,0)),i}function IE(e,t,n,r){let i=0,s=0,o=t.length-1;do{if(i>=o-1)return n<t[o]?r(e,i,n-t[i]):null;s=i+Math.trunc((o-i)*.5),n<t[s]?o=s:i=s}while(i<o)}function TE(e,t){return e.getValid(t)}function lf(e){function t(n,r,i){return e(n[r],i)}return function(n){const r=this.data;return IE(r,this._offsets,n,t)}}function _9(e){let t;function n(r,i,s){return e(r[i],s,t)}return function(r,i){const s=this.data;t=i;const o=IE(s,this._offsets,r,n);return t=void 0,o}}function S9(e){let t;function n(r,i,s){let o=s,a=0,l=0;for(let c=i-1,u=r.length;++c<u;){const f=r[c];if(~(a=e(f,t,o)))return l+a;o=0,l+=f.length}return-1}return function(r,i){t=r;const s=this.data,o=typeof i!="number"?n(s,0,0):IE(s,this._offsets,i,n);return t=void 0,o}}class pt extends Ft{}function Mmt(e,t){return t===null&&e.length>0?0:-1}function $mt(e,t){const{nullBitmap:n}=e;if(!n||e.nullCount<=0)return-1;let r=0;for(const i of new xE(n,e.offset+(t||0),e.length,n,g9)){if(!i)return r;++r}return-1}function St(e,t,n){if(t===void 0)return-1;if(t===null)switch(e.typeId){case D.Union:break;case D.Dictionary:break;default:return $mt(e,n)}const r=Sr.getVisitFn(e),i=vd(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}function x9(e,t,n){const r=Sr.getVisitFn(e),i=vd(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}pt.prototype.visitNull=Mmt;pt.prototype.visitBool=St;pt.prototype.visitInt=St;pt.prototype.visitInt8=St;pt.prototype.visitInt16=St;pt.prototype.visitInt32=St;pt.prototype.visitInt64=St;pt.prototype.visitUint8=St;pt.prototype.visitUint16=St;pt.prototype.visitUint32=St;pt.prototype.visitUint64=St;pt.prototype.visitFloat=St;pt.prototype.visitFloat16=St;pt.prototype.visitFloat32=St;pt.prototype.visitFloat64=St;pt.prototype.visitUtf8=St;pt.prototype.visitBinary=St;pt.prototype.visitFixedSizeBinary=St;pt.prototype.visitDate=St;pt.prototype.visitDateDay=St;pt.prototype.visitDateMillisecond=St;pt.prototype.visitTimestamp=St;pt.prototype.visitTimestampSecond=St;pt.prototype.visitTimestampMillisecond=St;pt.prototype.visitTimestampMicrosecond=St;pt.prototype.visitTimestampNanosecond=St;pt.prototype.visitTime=St;pt.prototype.visitTimeSecond=St;pt.prototype.visitTimeMillisecond=St;pt.prototype.visitTimeMicrosecond=St;pt.prototype.visitTimeNanosecond=St;pt.prototype.visitDecimal=St;pt.prototype.visitList=St;pt.prototype.visitStruct=St;pt.prototype.visitUnion=St;pt.prototype.visitDenseUnion=x9;pt.prototype.visitSparseUnion=x9;pt.prototype.visitDictionary=St;pt.prototype.visitInterval=St;pt.prototype.visitIntervalDayTime=St;pt.prototype.visitIntervalYearMonth=St;pt.prototype.visitDuration=St;pt.prototype.visitDurationSecond=St;pt.prototype.visitDurationMillisecond=St;pt.prototype.visitDurationMicrosecond=St;pt.prototype.visitDurationNanosecond=St;pt.prototype.visitFixedSizeList=St;pt.prototype.visitMap=St;const ib=new pt;class yt extends Ft{}function wt(e){const{type:t}=e;if(e.nullCount===0&&e.stride===1&&(t.typeId===D.Timestamp||t instanceof Ga&&t.bitWidth!==64||t instanceof Bp&&t.bitWidth!==64||t instanceof Fp&&t.precision!==nn.HALF))return new VN(e.data.length,r=>{const i=e.data[r];return i.values.subarray(0,i.length)[Symbol.iterator]()});let n=0;return new VN(e.data.length,r=>{const s=e.data[r].length,o=e.slice(n,n+s);return n+=s,new Nmt(o)})}class Nmt{constructor(t){this.vector=t,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}yt.prototype.visitNull=wt;yt.prototype.visitBool=wt;yt.prototype.visitInt=wt;yt.prototype.visitInt8=wt;yt.prototype.visitInt16=wt;yt.prototype.visitInt32=wt;yt.prototype.visitInt64=wt;yt.prototype.visitUint8=wt;yt.prototype.visitUint16=wt;yt.prototype.visitUint32=wt;yt.prototype.visitUint64=wt;yt.prototype.visitFloat=wt;yt.prototype.visitFloat16=wt;yt.prototype.visitFloat32=wt;yt.prototype.visitFloat64=wt;yt.prototype.visitUtf8=wt;yt.prototype.visitBinary=wt;yt.prototype.visitFixedSizeBinary=wt;yt.prototype.visitDate=wt;yt.prototype.visitDateDay=wt;yt.prototype.visitDateMillisecond=wt;yt.prototype.visitTimestamp=wt;yt.prototype.visitTimestampSecond=wt;yt.prototype.visitTimestampMillisecond=wt;yt.prototype.visitTimestampMicrosecond=wt;yt.prototype.visitTimestampNanosecond=wt;yt.prototype.visitTime=wt;yt.prototype.visitTimeSecond=wt;yt.prototype.visitTimeMillisecond=wt;yt.prototype.visitTimeMicrosecond=wt;yt.prototype.visitTimeNanosecond=wt;yt.prototype.visitDecimal=wt;yt.prototype.visitList=wt;yt.prototype.visitStruct=wt;yt.prototype.visitUnion=wt;yt.prototype.visitDenseUnion=wt;yt.prototype.visitSparseUnion=wt;yt.prototype.visitDictionary=wt;yt.prototype.visitInterval=wt;yt.prototype.visitIntervalDayTime=wt;yt.prototype.visitIntervalYearMonth=wt;yt.prototype.visitDuration=wt;yt.prototype.visitDurationSecond=wt;yt.prototype.visitDurationMillisecond=wt;yt.prototype.visitDurationMicrosecond=wt;yt.prototype.visitDurationNanosecond=wt;yt.prototype.visitFixedSizeList=wt;yt.prototype.visitMap=wt;const EE=new yt,Dmt=(e,t)=>e+t;class pl extends Ft{visitNull(t,n){return 0}visitInt(t,n){return t.type.bitWidth/8}visitFloat(t,n){return t.type.ArrayType.BYTES_PER_ELEMENT}visitBool(t,n){return 1/8}visitDecimal(t,n){return t.type.bitWidth/8}visitDate(t,n){return(t.type.unit+1)*4}visitTime(t,n){return t.type.bitWidth/8}visitTimestamp(t,n){return t.type.unit===rt.SECOND?4:8}visitInterval(t,n){return(t.type.unit+1)*4}visitDuration(t,n){return 8}visitStruct(t,n){return t.children.reduce((r,i)=>r+Ps.visit(i,n),0)}visitFixedSizeBinary(t,n){return t.type.byteWidth}visitMap(t,n){return 8+t.children.reduce((r,i)=>r+Ps.visit(i,n),0)}visitDictionary(t,n){var r;return t.type.indices.bitWidth/8+(((r=t.dictionary)===null||r===void 0?void 0:r.getByteLength(t.values[n]))||0)}}const kmt=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),Omt=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),Fmt=({valueOffsets:e,stride:t,children:n},r)=>{const i=n[0],{[r*t]:s}=e,{[r*t+1]:o}=e,a=Ps.getVisitFn(i.type),l=i.slice(s,o-s);let c=8;for(let u=-1,f=o-s;++u<f;)c+=a(l,u);return c},Bmt=({stride:e,children:t},n)=>{const r=t[0],i=r.slice(n*e,e),s=Ps.getVisitFn(r.type);let o=0;for(let a=-1,l=i.length;++a<l;)o+=s(i,a);return o},Rmt=(e,t)=>e.type.mode===ln.Dense?I9(e,t):T9(e,t),I9=({type:e,children:t,typeIds:n,valueOffsets:r},i)=>{const s=e.typeIdToChildIndex[n[i]];return 8+Ps.visit(t[s],r[i])},T9=({children:e},t)=>4+Ps.visitMany(e,e.map(()=>t)).reduce(Dmt,0);pl.prototype.visitUtf8=kmt;pl.prototype.visitBinary=Omt;pl.prototype.visitList=Fmt;pl.prototype.visitFixedSizeList=Bmt;pl.prototype.visitUnion=Rmt;pl.prototype.visitDenseUnion=I9;pl.prototype.visitSparseUnion=T9;const Ps=new pl;var E9;const A9={},M9={};class ie{constructor(t){var n,r,i;const s=t[0]instanceof ie?t.flatMap(a=>a.data):t;if(s.length===0||s.some(a=>!(a instanceof he)))throw new TypeError("Vector constructor expects an Array of Data instances.");const o=(n=s[0])===null||n===void 0?void 0:n.type;switch(s.length){case 0:this._offsets=[0];break;case 1:{const{get:a,set:l,indexOf:c,byteLength:u}=A9[o.typeId],f=s[0];this.isValid=d=>TE(f,d),this.get=d=>a(f,d),this.set=(d,h)=>l(f,d,h),this.indexOf=d=>c(f,d),this.getByteLength=d=>u(f,d),this._offsets=[0,f.length];break}default:Object.setPrototypeOf(this,M9[o.typeId]),this._offsets=v9(s);break}this.data=s,this.type=o,this.stride=co(o),this.numChildren=(i=(r=o.children)===null||r===void 0?void 0:r.length)!==null&&i!==void 0?i:0,this.length=this._offsets.at(-1)}get byteLength(){return this.data.reduce((t,n)=>t+n.byteLength,0)}get nullCount(){return b9(this.data)}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${D[this.type.typeId]}Vector`}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}includes(t,n){return this.indexOf(t,n)>-1}getByteLength(t){return 0}[Symbol.iterator](){return EE.visit(this)}concat(...t){return new ie(this.data.concat(t.flatMap(n=>n.data).flat(Number.POSITIVE_INFINITY)))}slice(t,n){return new ie(m9(this,t,n,({data:r,_offsets:i},s,o)=>w9(r,i,s,o)))}toJSON(){return[...this]}toArray(){const{type:t,data:n,length:r,stride:i,ArrayType:s}=this;switch(t.typeId){case D.Int:case D.Float:case D.Decimal:case D.Time:case D.Timestamp:switch(n.length){case 0:return new s;case 1:return n[0].values.subarray(0,r*i);default:return n.reduce((o,{values:a,length:l})=>(o.array.set(a.subarray(0,l*i),o.offset),o.offset+=l*i,o),{array:new s(r*i),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(t){var n;return this.getChildAt((n=this.type.children)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.numChildren?new ie(this.data.map(({children:n})=>n[t])):null}get isMemoized(){return at.isDictionary(this.type)?this.data[0].dictionary.isMemoized:!1}memoize(){if(at.isDictionary(this.type)){const t=new sb(this.data[0].dictionary),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new ie(n)}return new sb(this)}unmemoize(){if(at.isDictionary(this.type)&&this.isMemoized){const t=this.data[0].dictionary.unmemoize(),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new ie(n)}return this}}E9=Symbol.toStringTag;ie[E9]=(e=>{e.type=at.prototype,e.data=[],e.length=0,e.stride=1,e.numChildren=0,e._offsets=new Uint32Array([0]),e[Symbol.isConcatSpreadable]=!0;const t=Object.keys(D).map(n=>D[n]).filter(n=>typeof n=="number"&&n!==D.NONE);for(const n of t){const r=Sr.getVisitFnByTypeId(n),i=vi.getVisitFnByTypeId(n),s=ib.getVisitFnByTypeId(n),o=Ps.getVisitFnByTypeId(n);A9[n]={get:r,set:i,indexOf:s,byteLength:o},M9[n]=Object.create(e,{isValid:{value:lf(TE)},get:{value:lf(Sr.getVisitFnByTypeId(n))},set:{value:_9(vi.getVisitFnByTypeId(n))},indexOf:{value:S9(ib.getVisitFnByTypeId(n))},getByteLength:{value:lf(Ps.getVisitFnByTypeId(n))}})}return"Vector"})(ie.prototype);class sb extends ie{constructor(t){super(t.data);const n=this.get,r=this.set,i=this.slice,s=new Array(this.length);Object.defineProperty(this,"get",{value(o){const a=s[o];if(a!==void 0)return a;const l=n.call(this,o);return s[o]=l,l}}),Object.defineProperty(this,"set",{value(o,a){r.call(this,o,a),s[o]=a}}),Object.defineProperty(this,"slice",{value:(o,a)=>new sb(i.call(this,o,a))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new ie(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}class $x{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(t,n,r,i){return t.prep(8,24),t.writeInt64(BigInt(i??0)),t.pad(4),t.writeInt32(r),t.writeInt64(BigInt(n??0)),t.offset()}}class on{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsKeyValue(t,n){return(n||new on).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsKeyValue(t,n){return t.setPosition(t.position()+fe),(n||new on).__init(t.readInt32(t.position())+t.position(),t)}key(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}value(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startKeyValue(t){t.startObject(2)}static addKey(t,n){t.addFieldOffset(0,n,0)}static addValue(t,n){t.addFieldOffset(1,n,0)}static endKeyValue(t){return t.endObject()}static createKeyValue(t,n,r){return on.startKeyValue(t),on.addKey(t,n),on.addValue(t,r),on.endKeyValue(t)}}var Yf;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(Yf||(Yf={}));var qf;(function(e){e[e.Little=0]="Little",e[e.Big=1]="Big"})(qf||(qf={}));var ob;(function(e){e[e.DenseArray=0]="DenseArray"})(ob||(ob={}));class Ar{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInt(t,n){return(n||new Ar).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInt(t,n){return t.setPosition(t.position()+fe),(n||new Ar).__init(t.readInt32(t.position())+t.position(),t)}bitWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}isSigned(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startInt(t){t.startObject(2)}static addBitWidth(t,n){t.addFieldInt32(0,n,0)}static addIsSigned(t,n){t.addFieldInt8(1,+n,0)}static endInt(t){return t.endObject()}static createInt(t,n,r){return Ar.startInt(t),Ar.addBitWidth(t,n),Ar.addIsSigned(t,r),Ar.endInt(t)}}class mo{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryEncoding(t,n){return(n||new mo).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryEncoding(t,n){return t.setPosition(t.position()+fe),(n||new mo).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}indexType(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new Ar).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isOrdered(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}dictionaryKind(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt16(this.bb_pos+t):ob.DenseArray}static startDictionaryEncoding(t){t.startObject(4)}static addId(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addIndexType(t,n){t.addFieldOffset(1,n,0)}static addIsOrdered(t,n){t.addFieldInt8(2,+n,0)}static addDictionaryKind(t,n){t.addFieldInt16(3,n,ob.DenseArray)}static endDictionaryEncoding(t){return t.endObject()}}class Wl{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBinary(t,n){return(n||new Wl).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBinary(t,n){return t.setPosition(t.position()+fe),(n||new Wl).__init(t.readInt32(t.position())+t.position(),t)}static startBinary(t){t.startObject(0)}static endBinary(t){return t.endObject()}static createBinary(t){return Wl.startBinary(t),Wl.endBinary(t)}}class Hl{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBool(t,n){return(n||new Hl).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBool(t,n){return t.setPosition(t.position()+fe),(n||new Hl).__init(t.readInt32(t.position())+t.position(),t)}static startBool(t){t.startObject(0)}static endBool(t){return t.endObject()}static createBool(t){return Hl.startBool(t),Hl.endBool(t)}}var ab;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(ab||(ab={}));let _m=class uu{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDate(t,n){return(n||new uu).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDate(t,n){return t.setPosition(t.position()+fe),(n||new uu).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):ab.MILLISECOND}static startDate(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,ab.MILLISECOND)}static endDate(t){return t.endObject()}static createDate(t,n){return uu.startDate(t),uu.addUnit(t,n),uu.endDate(t)}};class rr{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDecimal(t,n){return(n||new rr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDecimal(t,n){return t.setPosition(t.position()+fe),(n||new rr).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}scale(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}bitWidth(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt32(this.bb_pos+t):128}static startDecimal(t){t.startObject(3)}static addPrecision(t,n){t.addFieldInt32(0,n,0)}static addScale(t,n){t.addFieldInt32(1,n,0)}static addBitWidth(t,n){t.addFieldInt32(2,n,128)}static endDecimal(t){return t.endObject()}static createDecimal(t,n,r,i){return rr.startDecimal(t),rr.addPrecision(t,n),rr.addScale(t,r),rr.addBitWidth(t,i),rr.endDecimal(t)}}var Xa;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(Xa||(Xa={}));class ws{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDuration(t,n){return(n||new ws).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDuration(t,n){return t.setPosition(t.position()+fe),(n||new ws).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Xa.MILLISECOND}static startDuration(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,Xa.MILLISECOND)}static endDuration(t){return t.endObject()}static createDuration(t,n){return ws.startDuration(t),ws.addUnit(t,n),ws.endDuration(t)}}class _s{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeBinary(t,n){return(n||new _s).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeBinary(t,n){return t.setPosition(t.position()+fe),(n||new _s).__init(t.readInt32(t.position())+t.position(),t)}byteWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeBinary(t){t.startObject(1)}static addByteWidth(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeBinary(t){return t.endObject()}static createFixedSizeBinary(t,n){return _s.startFixedSizeBinary(t),_s.addByteWidth(t,n),_s.endFixedSizeBinary(t)}}class Ss{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeList(t,n){return(n||new Ss).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeList(t,n){return t.setPosition(t.position()+fe),(n||new Ss).__init(t.readInt32(t.position())+t.position(),t)}listSize(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeList(t){t.startObject(1)}static addListSize(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeList(t){return t.endObject()}static createFixedSizeList(t,n){return Ss.startFixedSizeList(t),Ss.addListSize(t,n),Ss.endFixedSizeList(t)}}var lb;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(lb||(lb={}));class xs{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFloatingPoint(t,n){return(n||new xs).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFloatingPoint(t,n){return t.setPosition(t.position()+fe),(n||new xs).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):lb.HALF}static startFloatingPoint(t){t.startObject(1)}static addPrecision(t,n){t.addFieldInt16(0,n,lb.HALF)}static endFloatingPoint(t){return t.endObject()}static createFloatingPoint(t,n){return xs.startFloatingPoint(t),xs.addPrecision(t,n),xs.endFloatingPoint(t)}}var cb;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(cb||(cb={}));class Is{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInterval(t,n){return(n||new Is).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInterval(t,n){return t.setPosition(t.position()+fe),(n||new Is).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):cb.YEAR_MONTH}static startInterval(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,cb.YEAR_MONTH)}static endInterval(t){return t.endObject()}static createInterval(t,n){return Is.startInterval(t),Is.addUnit(t,n),Is.endInterval(t)}}class Gl{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsList(t,n){return(n||new Gl).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsList(t,n){return t.setPosition(t.position()+fe),(n||new Gl).__init(t.readInt32(t.position())+t.position(),t)}static startList(t){t.startObject(0)}static endList(t){return t.endObject()}static createList(t){return Gl.startList(t),Gl.endList(t)}}let Sm=class fu{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMap(t,n){return(n||new fu).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMap(t,n){return t.setPosition(t.position()+fe),(n||new fu).__init(t.readInt32(t.position())+t.position(),t)}keysSorted(){const t=this.bb.__offset(this.bb_pos,4);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startMap(t){t.startObject(1)}static addKeysSorted(t,n){t.addFieldInt8(0,+n,0)}static endMap(t){return t.endObject()}static createMap(t,n){return fu.startMap(t),fu.addKeysSorted(t,n),fu.endMap(t)}};class Xl{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsNull(t,n){return(n||new Xl).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsNull(t,n){return t.setPosition(t.position()+fe),(n||new Xl).__init(t.readInt32(t.position())+t.position(),t)}static startNull(t){t.startObject(0)}static endNull(t){return t.endObject()}static createNull(t){return Xl.startNull(t),Xl.endNull(t)}}class Ql{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsStruct_(t,n){return(n||new Ql).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsStruct_(t,n){return t.setPosition(t.position()+fe),(n||new Ql).__init(t.readInt32(t.position())+t.position(),t)}static startStruct_(t){t.startObject(0)}static endStruct_(t){return t.endObject()}static createStruct_(t){return Ql.startStruct_(t),Ql.endStruct_(t)}}class ti{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTime(t,n){return(n||new ti).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTime(t,n){return t.setPosition(t.position()+fe),(n||new ti).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Xa.MILLISECOND}bitWidth(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):32}static startTime(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,Xa.MILLISECOND)}static addBitWidth(t,n){t.addFieldInt32(1,n,32)}static endTime(t){return t.endObject()}static createTime(t,n,r){return ti.startTime(t),ti.addUnit(t,n),ti.addBitWidth(t,r),ti.endTime(t)}}class ei{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTimestamp(t,n){return(n||new ei).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTimestamp(t,n){return t.setPosition(t.position()+fe),(n||new ei).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Xa.SECOND}timezone(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startTimestamp(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,Xa.SECOND)}static addTimezone(t,n){t.addFieldOffset(1,n,0)}static endTimestamp(t){return t.endObject()}static createTimestamp(t,n,r){return ei.startTimestamp(t),ei.addUnit(t,n),ei.addTimezone(t,r),ei.endTimestamp(t)}}var ub;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(ub||(ub={}));class sr{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUnion(t,n){return(n||new sr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUnion(t,n){return t.setPosition(t.position()+fe),(n||new sr).__init(t.readInt32(t.position())+t.position(),t)}mode(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):ub.Sparse}typeIds(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readInt32(this.bb.__vector(this.bb_pos+n)+t*4):0}typeIdsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}typeIdsArray(){const t=this.bb.__offset(this.bb_pos,6);return t?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startUnion(t){t.startObject(2)}static addMode(t,n){t.addFieldInt16(0,n,ub.Sparse)}static addTypeIds(t,n){t.addFieldOffset(1,n,0)}static createTypeIdsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addInt32(n[r]);return t.endVector()}static startTypeIdsVector(t,n){t.startVector(4,n,4)}static endUnion(t){return t.endObject()}static createUnion(t,n,r){return sr.startUnion(t),sr.addMode(t,n),sr.addTypeIds(t,r),sr.endUnion(t)}}class Kl{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUtf8(t,n){return(n||new Kl).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUtf8(t,n){return t.setPosition(t.position()+fe),(n||new Kl).__init(t.readInt32(t.position())+t.position(),t)}static startUtf8(t){t.startObject(0)}static endUtf8(t){return t.endObject()}static createUtf8(t){return Kl.startUtf8(t),Kl.endUtf8(t)}}var Ee;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.FloatingPoint=3]="FloatingPoint",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct_=13]="Struct_",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.LargeBinary=19]="LargeBinary",e[e.LargeUtf8=20]="LargeUtf8",e[e.LargeList=21]="LargeList",e[e.RunEndEncoded=22]="RunEndEncoded"})(Ee||(Ee={}));let Xr=class xm{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsField(t,n){return(n||new xm).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsField(t,n){return t.setPosition(t.position()+fe),(n||new xm).__init(t.readInt32(t.position())+t.position(),t)}name(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}nullable(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}typeType(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):Ee.NONE}type(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.__union(t,this.bb_pos+n):null}dictionary(t){const n=this.bb.__offset(this.bb_pos,12);return n?(t||new mo).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}children(t,n){const r=this.bb.__offset(this.bb_pos,14);return r?(n||new xm).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}childrenLength(){const t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,16);return r?(n||new on).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}static startField(t){t.startObject(7)}static addName(t,n){t.addFieldOffset(0,n,0)}static addNullable(t,n){t.addFieldInt8(1,+n,0)}static addTypeType(t,n){t.addFieldInt8(2,n,Ee.NONE)}static addType(t,n){t.addFieldOffset(3,n,0)}static addDictionary(t,n){t.addFieldOffset(4,n,0)}static addChildren(t,n){t.addFieldOffset(5,n,0)}static createChildrenVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startChildrenVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(6,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endField(t){return t.endObject()}},us=class ro{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsSchema(t,n){return(n||new ro).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSchema(t,n){return t.setPosition(t.position()+fe),(n||new ro).__init(t.readInt32(t.position())+t.position(),t)}endianness(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):qf.Little}fields(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new Xr).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}fieldsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new on).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}features(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.readInt64(this.bb.__vector(this.bb_pos+n)+t*8):BigInt(0)}featuresLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}static startSchema(t){t.startObject(4)}static addEndianness(t,n){t.addFieldInt16(0,n,qf.Little)}static addFields(t,n){t.addFieldOffset(1,n,0)}static createFieldsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startFieldsVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(2,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static addFeatures(t,n){t.addFieldOffset(3,n,0)}static createFeaturesVector(t,n){t.startVector(8,n.length,8);for(let r=n.length-1;r>=0;r--)t.addInt64(n[r]);return t.endVector()}static startFeaturesVector(t,n){t.startVector(8,n,8)}static endSchema(t){return t.endObject()}static finishSchemaBuffer(t,n){t.finish(n)}static finishSizePrefixedSchemaBuffer(t,n){t.finish(n,void 0,!0)}static createSchema(t,n,r,i,s){return ro.startSchema(t),ro.addEndianness(t,n),ro.addFields(t,r),ro.addCustomMetadata(t,i),ro.addFeatures(t,s),ro.endSchema(t)}};class Tr{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFooter(t,n){return(n||new Tr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFooter(t,n){return t.setPosition(t.position()+fe),(n||new Tr).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Yf.V1}schema(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new us).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}dictionaries(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new $x).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}dictionariesLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}recordBatches(t,n){const r=this.bb.__offset(this.bb_pos,10);return r?(n||new $x).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}recordBatchesLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new on).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startFooter(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,Yf.V1)}static addSchema(t,n){t.addFieldOffset(1,n,0)}static addDictionaries(t,n){t.addFieldOffset(2,n,0)}static startDictionariesVector(t,n){t.startVector(24,n,8)}static addRecordBatches(t,n){t.addFieldOffset(3,n,0)}static startRecordBatchesVector(t,n){t.startVector(24,n,8)}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endFooter(t){return t.endObject()}static finishFooterBuffer(t,n){t.finish(n)}static finishSizePrefixedFooterBuffer(t,n){t.finish(n,void 0,!0)}}class se{constructor(t=[],n,r,i=Sn.V5){this.fields=t||[],this.metadata=n||new Map,r||(r=Nx(t)),this.dictionaries=r,this.metadataVersion=i}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(t=>t.name)}toString(){return`Schema<{ ${this.fields.map((t,n)=>`${n}: ${t}`).join(", ")} }>`}select(t){const n=new Set(t),r=this.fields.filter(i=>n.has(i.name));return new se(r,this.metadata)}selectAt(t){const n=t.map(r=>this.fields[r]).filter(Boolean);return new se(n,this.metadata)}assign(...t){const n=t[0]instanceof se?t[0]:Array.isArray(t[0])?new se(t[0]):new se(t),r=[...this.fields],i=z0(z0(new Map,this.metadata),n.metadata),s=n.fields.filter(a=>{const l=r.findIndex(c=>c.name===a.name);return~l?(r[l]=a.clone({metadata:z0(z0(new Map,r[l].metadata),a.metadata)}))&&!1:!0}),o=Nx(s,new Map);return new se([...r,...s],i,new Map([...this.dictionaries,...o]))}}se.prototype.fields=null;se.prototype.metadata=null;se.prototype.dictionaries=null;class Ie{static new(...t){let[n,r,i,s]=t;return t[0]&&typeof t[0]=="object"&&({name:n}=t[0],r===void 0&&(r=t[0].type),i===void 0&&(i=t[0].nullable),s===void 0&&(s=t[0].metadata)),new Ie(`${n}`,r,i,s)}constructor(t,n,r=!1,i){this.name=t,this.type=n,this.nullable=r,this.metadata=i||new Map}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...t){let[n,r,i,s]=t;return!t[0]||typeof t[0]!="object"?[n=this.name,r=this.type,i=this.nullable,s=this.metadata]=t:{name:n=this.name,type:r=this.type,nullable:i=this.nullable,metadata:s=this.metadata}=t[0],Ie.new(n,r,i,s)}}Ie.prototype.type=null;Ie.prototype.name=null;Ie.prototype.nullable=null;Ie.prototype.metadata=null;function z0(e,t){return new Map([...e||new Map,...t||new Map])}function Nx(e,t=new Map){for(let n=-1,r=e.length;++n<r;){const s=e[n].type;if(at.isDictionary(s)){if(!t.has(s.id))t.set(s.id,s.dictionary);else if(t.get(s.id)!==s.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}s.children&&s.children.length>0&&Nx(s.children,t)}return t}var Lmt=OO,Cmt=xf;class Rp{static decode(t){t=new Cmt(Zt(t));const n=Tr.getRootAsFooter(t),r=se.decode(n.schema(),new Map,n.version());return new Umt(r,n)}static encode(t){const n=new Lmt,r=se.encode(n,t.schema);Tr.startRecordBatchesVector(n,t.numRecordBatches);for(const o of[...t.recordBatches()].slice().reverse())Qa.encode(n,o);const i=n.endVector();Tr.startDictionariesVector(n,t.numDictionaries);for(const o of[...t.dictionaryBatches()].slice().reverse())Qa.encode(n,o);const s=n.endVector();return Tr.startFooter(n),Tr.addSchema(n,r),Tr.addVersion(n,Sn.V5),Tr.addRecordBatches(n,i),Tr.addDictionaries(n,s),Tr.finishFooterBuffer(n,Tr.endFooter(n)),n.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}constructor(t,n=Sn.V5,r,i){this.schema=t,this.version=n,r&&(this._recordBatches=r),i&&(this._dictionaryBatches=i)}*recordBatches(){for(let t,n=-1,r=this.numRecordBatches;++n<r;)(t=this.getRecordBatch(n))&&(yield t)}*dictionaryBatches(){for(let t,n=-1,r=this.numDictionaries;++n<r;)(t=this.getDictionaryBatch(n))&&(yield t)}getRecordBatch(t){return t>=0&&t<this.numRecordBatches&&this._recordBatches[t]||null}getDictionaryBatch(t){return t>=0&&t<this.numDictionaries&&this._dictionaryBatches[t]||null}}class Umt extends Rp{get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}constructor(t,n){super(t,n.version()),this._footer=n}getRecordBatch(t){if(t>=0&&t<this.numRecordBatches){const n=this._footer.recordBatches(t);if(n)return Qa.decode(n)}return null}getDictionaryBatch(t){if(t>=0&&t<this.numDictionaries){const n=this._footer.dictionaries(t);if(n)return Qa.decode(n)}return null}}class Qa{static decode(t){return new Qa(t.metaDataLength(),t.bodyLength(),t.offset())}static encode(t,n){const{metaDataLength:r}=n,i=BigInt(n.offset),s=BigInt(n.bodyLength);return $x.createBlock(t,i,r,s)}constructor(t,n,r){this.metaDataLength=t,this.offset=Gi(r),this.bodyLength=Gi(n)}}const Ce=Object.freeze({done:!0,value:void 0});class YN{constructor(t){this._json=t}get schema(){return this._json.schema}get batches(){return this._json.batches||[]}get dictionaries(){return this._json.dictionaries||[]}}class AE{tee(){return this._getDOMStream().tee()}pipe(t,n){return this._getNodeStream().pipe(t,n)}pipeTo(t,n){return this._getDOMStream().pipeTo(t,n)}pipeThrough(t,n){return this._getDOMStream().pipeThrough(t,n)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class Pmt extends AE{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(t=>this._closedPromiseResolve=t)}get closed(){return this._closedPromise}cancel(t){return W(this,void 0,void 0,function*(){yield this.return(t)})}write(t){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(t):this.resolvers.shift().resolve({done:!1,value:t}))}abort(t){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:t}:this.resolvers.shift().reject({done:!0,value:t}))}close(){if(this._closedPromiseResolve){const{resolvers:t}=this;for(;t.length>0;)t.shift().resolve(Ce);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(t){return Kr.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,t)}toNodeStream(t){return Kr.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,t)}throw(t){return W(this,void 0,void 0,function*(){return yield this.abort(t),Ce})}return(t){return W(this,void 0,void 0,function*(){return yield this.close(),Ce})}read(t){return W(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return W(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(...t){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((n,r)=>{this.resolvers.push({resolve:n,reject:r})}):Promise.resolve(Ce)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}}class Im extends Pmt{write(t){if((t=Zt(t)).byteLength>0)return super.write(t)}toString(t=!1){return t?Tx(this.toUint8Array(!0)):this.toUint8Array(!1).then(Tx)}toUint8Array(t=!1){return t?Us(this._values)[0]:W(this,void 0,void 0,function*(){var n,r,i,s;const o=[];let a=0;try{for(var l=!0,c=Fr(this),u;u=yield c.next(),n=u.done,!n;l=!0){s=u.value,l=!1;const f=s;o.push(f),a+=f.byteLength}}catch(f){r={error:f}}finally{try{!l&&!n&&(i=c.return)&&(yield i.call(c))}finally{if(r)throw r.error}}return Us(o,a)[0]})}}class fb{constructor(t){t&&(this.source=new zmt(Kr.fromIterable(t)))}[Symbol.iterator](){return this}next(t){return this.source.next(t)}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}peek(t){return this.source.peek(t)}read(t){return this.source.read(t)}}class Wf{constructor(t){t instanceof Wf?this.source=t.source:t instanceof Im?this.source=new bl(Kr.fromAsyncIterable(t)):rP(t)?this.source=new bl(Kr.fromNodeStream(t)):yE(t)?this.source=new bl(Kr.fromDOMStream(t)):nP(t)?this.source=new bl(Kr.fromDOMStream(t.body)):Oy(t)?this.source=new bl(Kr.fromIterable(t)):Mc(t)?this.source=new bl(Kr.fromAsyncIterable(t)):bd(t)&&(this.source=new bl(Kr.fromAsyncIterable(t)))}[Symbol.asyncIterator](){return this}next(t){return this.source.next(t)}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}get closed(){return this.source.closed}cancel(t){return this.source.cancel(t)}peek(t){return this.source.peek(t)}read(t){return this.source.read(t)}}class zmt{constructor(t){this.source=t}cancel(t){this.return(t)}peek(t){return this.next(t,"peek").value}read(t){return this.next(t,"read").value}next(t,n="read"){return this.source.next({cmd:n,size:t})}throw(t){return Object.create(this.source.throw&&this.source.throw(t)||Ce)}return(t){return Object.create(this.source.return&&this.source.return(t)||Ce)}}class bl{constructor(t){this.source=t,this._closedPromise=new Promise(n=>this._closedPromiseResolve=n)}cancel(t){return W(this,void 0,void 0,function*(){yield this.return(t)})}get closed(){return this._closedPromise}read(t){return W(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return W(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(t,n="read"){return W(this,void 0,void 0,function*(){return yield this.source.next({cmd:n,size:t})})}throw(t){return W(this,void 0,void 0,function*(){const n=this.source.throw&&(yield this.source.throw(t))||Ce;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(n)})}return(t){return W(this,void 0,void 0,function*(){const n=this.source.return&&(yield this.source.return(t))||Ce;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(n)})}}class qN extends fb{constructor(t,n){super(),this.position=0,this.buffer=Zt(t),this.size=n===void 0?this.buffer.byteLength:n}readInt32(t){const{buffer:n,byteOffset:r}=this.readAt(t,4);return new DataView(n,r).getInt32(0,!0)}seek(t){return this.position=Math.min(t,this.size),t<this.size}read(t){const{buffer:n,size:r,position:i}=this;return n&&i<r?(typeof t!="number"&&(t=Number.POSITIVE_INFINITY),this.position=Math.min(r,i+Math.min(r-i,t)),n.subarray(i,this.position)):null}readAt(t,n){const r=this.buffer,i=Math.min(this.size,t+n);return r?r.subarray(t,i):new Uint8Array(n)}close(){this.buffer&&(this.buffer=null)}throw(t){return this.close(),{done:!0,value:t}}return(t){return this.close(),{done:!0,value:t}}}class db extends Wf{constructor(t,n){super(),this.position=0,this._handle=t,typeof n=="number"?this.size=n:this._pending=W(this,void 0,void 0,function*(){this.size=(yield t.stat()).size,delete this._pending})}readInt32(t){return W(this,void 0,void 0,function*(){const{buffer:n,byteOffset:r}=yield this.readAt(t,4);return new DataView(n,r).getInt32(0,!0)})}seek(t){return W(this,void 0,void 0,function*(){return this._pending&&(yield this._pending),this.position=Math.min(t,this.size),t<this.size})}read(t){return W(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:n,size:r,position:i}=this;if(n&&i<r){typeof t!="number"&&(t=Number.POSITIVE_INFINITY);let s=i,o=0,a=0;const l=Math.min(r,s+Math.min(r-s,t)),c=new Uint8Array(Math.max(0,(this.position=l)-s));for(;(s+=a)<l&&(o+=a)<c.byteLength;)({bytesRead:a}=yield n.read(c,o,c.byteLength-o,s));return c}return null})}readAt(t,n){return W(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:r,size:i}=this;if(r&&t+n<i){const s=Math.min(i,t+n),o=new Uint8Array(s-t);return(yield r.read(o,0,n,t)).buffer}return new Uint8Array(n)})}close(){return W(this,void 0,void 0,function*(){const t=this._handle;this._handle=null,t&&(yield t.close())})}throw(t){return W(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:t}})}return(t){return W(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:t}})}}const jmt=65536;function Bu(e){return e<0&&(e=4294967295+e+1),`0x${e.toString(16)}`}const Hf=8,ME=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8];class $9{constructor(t){this.buffer=t}high(){return this.buffer[1]}low(){return this.buffer[0]}_times(t){const n=new Uint32Array([this.buffer[1]>>>16,this.buffer[1]&65535,this.buffer[0]>>>16,this.buffer[0]&65535]),r=new Uint32Array([t.buffer[1]>>>16,t.buffer[1]&65535,t.buffer[0]>>>16,t.buffer[0]&65535]);let i=n[3]*r[3];this.buffer[0]=i&65535;let s=i>>>16;return i=n[2]*r[3],s+=i,i=n[3]*r[2]>>>0,s+=i,this.buffer[0]+=s<<16,this.buffer[1]=s>>>0<i?jmt:0,this.buffer[1]+=s>>>16,this.buffer[1]+=n[1]*r[3]+n[2]*r[2]+n[3]*r[1],this.buffer[1]+=n[0]*r[3]+n[1]*r[2]+n[2]*r[1]+n[3]*r[0]<<16,this}_plus(t){const n=this.buffer[0]+t.buffer[0]>>>0;this.buffer[1]+=t.buffer[1],n<this.buffer[0]>>>0&&++this.buffer[1],this.buffer[0]=n}lessThan(t){return this.buffer[1]<t.buffer[1]||this.buffer[1]===t.buffer[1]&&this.buffer[0]<t.buffer[0]}equals(t){return this.buffer[1]===t.buffer[1]&&this.buffer[0]==t.buffer[0]}greaterThan(t){return t.lessThan(this)}hex(){return`${Bu(this.buffer[1])} ${Bu(this.buffer[0])}`}}class ae extends $9{times(t){return this._times(t),this}plus(t){return this._plus(t),this}static from(t,n=new Uint32Array(2)){return ae.fromString(typeof t=="string"?t:t.toString(),n)}static fromNumber(t,n=new Uint32Array(2)){return ae.fromString(t.toString(),n)}static fromString(t,n=new Uint32Array(2)){const r=t.length,i=new ae(n);for(let s=0;s<r;){const o=Hf<r-s?Hf:r-s,a=new ae(new Uint32Array([Number.parseInt(t.slice(s,s+o),10),0])),l=new ae(new Uint32Array([ME[o],0]));i.times(l),i.plus(a),s+=o}return i}static convertArray(t){const n=new Uint32Array(t.length*2);for(let r=-1,i=t.length;++r<i;)ae.from(t[r],new Uint32Array(n.buffer,n.byteOffset+2*r*4,2));return n}static multiply(t,n){return new ae(new Uint32Array(t.buffer)).times(n)}static add(t,n){return new ae(new Uint32Array(t.buffer)).plus(n)}}class nr extends $9{negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[0]==0&&++this.buffer[1],this}times(t){return this._times(t),this}plus(t){return this._plus(t),this}lessThan(t){const n=this.buffer[1]<<0,r=t.buffer[1]<<0;return n<r||n===r&&this.buffer[0]<t.buffer[0]}static from(t,n=new Uint32Array(2)){return nr.fromString(typeof t=="string"?t:t.toString(),n)}static fromNumber(t,n=new Uint32Array(2)){return nr.fromString(t.toString(),n)}static fromString(t,n=new Uint32Array(2)){const r=t.startsWith("-"),i=t.length,s=new nr(n);for(let o=r?1:0;o<i;){const a=Hf<i-o?Hf:i-o,l=new nr(new Uint32Array([Number.parseInt(t.slice(o,o+a),10),0])),c=new nr(new Uint32Array([ME[a],0]));s.times(c),s.plus(l),o+=a}return r?s.negate():s}static convertArray(t){const n=new Uint32Array(t.length*2);for(let r=-1,i=t.length;++r<i;)nr.from(t[r],new Uint32Array(n.buffer,n.byteOffset+2*r*4,2));return n}static multiply(t,n){return new nr(new Uint32Array(t.buffer)).times(n)}static add(t,n){return new nr(new Uint32Array(t.buffer)).plus(n)}}class fs{constructor(t){this.buffer=t}high(){return new nr(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2))}low(){return new nr(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset,2))}negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[2]=~this.buffer[2],this.buffer[3]=~this.buffer[3],this.buffer[0]==0&&++this.buffer[1],this.buffer[1]==0&&++this.buffer[2],this.buffer[2]==0&&++this.buffer[3],this}times(t){const n=new ae(new Uint32Array([this.buffer[3],0])),r=new ae(new Uint32Array([this.buffer[2],0])),i=new ae(new Uint32Array([this.buffer[1],0])),s=new ae(new Uint32Array([this.buffer[0],0])),o=new ae(new Uint32Array([t.buffer[3],0])),a=new ae(new Uint32Array([t.buffer[2],0])),l=new ae(new Uint32Array([t.buffer[1],0])),c=new ae(new Uint32Array([t.buffer[0],0]));let u=ae.multiply(s,c);this.buffer[0]=u.low();const f=new ae(new Uint32Array([u.high(),0]));return u=ae.multiply(i,c),f.plus(u),u=ae.multiply(s,l),f.plus(u),this.buffer[1]=f.low(),this.buffer[3]=f.lessThan(u)?1:0,this.buffer[2]=f.high(),new ae(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2)).plus(ae.multiply(r,c)).plus(ae.multiply(i,l)).plus(ae.multiply(s,a)),this.buffer[3]+=ae.multiply(n,c).plus(ae.multiply(r,l)).plus(ae.multiply(i,a)).plus(ae.multiply(s,o)).low(),this}plus(t){const n=new Uint32Array(4);return n[3]=this.buffer[3]+t.buffer[3]>>>0,n[2]=this.buffer[2]+t.buffer[2]>>>0,n[1]=this.buffer[1]+t.buffer[1]>>>0,n[0]=this.buffer[0]+t.buffer[0]>>>0,n[0]<this.buffer[0]>>>0&&++n[1],n[1]<this.buffer[1]>>>0&&++n[2],n[2]<this.buffer[2]>>>0&&++n[3],this.buffer[3]=n[3],this.buffer[2]=n[2],this.buffer[1]=n[1],this.buffer[0]=n[0],this}hex(){return`${Bu(this.buffer[3])} ${Bu(this.buffer[2])} ${Bu(this.buffer[1])} ${Bu(this.buffer[0])}`}static multiply(t,n){return new fs(new Uint32Array(t.buffer)).times(n)}static add(t,n){return new fs(new Uint32Array(t.buffer)).plus(n)}static from(t,n=new Uint32Array(4)){return fs.fromString(typeof t=="string"?t:t.toString(),n)}static fromNumber(t,n=new Uint32Array(4)){return fs.fromString(t.toString(),n)}static fromString(t,n=new Uint32Array(4)){const r=t.startsWith("-"),i=t.length,s=new fs(n);for(let o=r?1:0;o<i;){const a=Hf<i-o?Hf:i-o,l=new fs(new Uint32Array([Number.parseInt(t.slice(o,o+a),10),0,0,0])),c=new fs(new Uint32Array([ME[a],0,0,0]));s.times(c),s.plus(l),o+=a}return r?s.negate():s}static convertArray(t){const n=new Uint32Array(t.length*4);for(let r=-1,i=t.length;++r<i;)fs.from(t[r],new Uint32Array(n.buffer,n.byteOffset+4*4*r,4));return n}}class N9 extends Ft{constructor(t,n,r,i,s=Sn.V5){super(),this.nodesIndex=-1,this.buffersIndex=-1,this.bytes=t,this.nodes=n,this.buffers=r,this.dictionaries=i,this.metadataVersion=s}visit(t){return super.visit(t instanceof Ie?t.type:t)}visitNull(t,{length:n}=this.nextFieldNode()){return Ct({type:t,length:n})}visitBool(t,{length:n,nullCount:r}=this.nextFieldNode()){return Ct({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitInt(t,{length:n,nullCount:r}=this.nextFieldNode()){return Ct({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitFloat(t,{length:n,nullCount:r}=this.nextFieldNode()){return Ct({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitUtf8(t,{length:n,nullCount:r}=this.nextFieldNode()){return Ct({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),valueOffsets:this.readOffsets(t),data:this.readData(t)})}visitBinary(t,{length:n,nullCount:r}=this.nextFieldNode()){return Ct({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),valueOffsets:this.readOffsets(t),data:this.readData(t)})}visitFixedSizeBinary(t,{length:n,nullCount:r}=this.nextFieldNode()){return Ct({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitDate(t,{length:n,nullCount:r}=this.nextFieldNode()){return Ct({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitTimestamp(t,{length:n,nullCount:r}=this.nextFieldNode()){return Ct({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitTime(t,{length:n,nullCount:r}=this.nextFieldNode()){return Ct({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitDecimal(t,{length:n,nullCount:r}=this.nextFieldNode()){return Ct({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitList(t,{length:n,nullCount:r}=this.nextFieldNode()){return Ct({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),valueOffsets:this.readOffsets(t),child:this.visit(t.children[0])})}visitStruct(t,{length:n,nullCount:r}=this.nextFieldNode()){return Ct({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),children:this.visitMany(t.children)})}visitUnion(t,{length:n,nullCount:r}=this.nextFieldNode()){return this.metadataVersion<Sn.V5&&this.readNullBitmap(t,r),t.mode===ln.Sparse?this.visitSparseUnion(t,{length:n,nullCount:r}):this.visitDenseUnion(t,{length:n,nullCount:r})}visitDenseUnion(t,{length:n,nullCount:r}=this.nextFieldNode()){return Ct({type:t,length:n,nullCount:r,typeIds:this.readTypeIds(t),valueOffsets:this.readOffsets(t),children:this.visitMany(t.children)})}visitSparseUnion(t,{length:n,nullCount:r}=this.nextFieldNode()){return Ct({type:t,length:n,nullCount:r,typeIds:this.readTypeIds(t),children:this.visitMany(t.children)})}visitDictionary(t,{length:n,nullCount:r}=this.nextFieldNode()){return Ct({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t.indices),dictionary:this.readDictionary(t)})}visitInterval(t,{length:n,nullCount:r}=this.nextFieldNode()){return Ct({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitDuration(t,{length:n,nullCount:r}=this.nextFieldNode()){return Ct({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitFixedSizeList(t,{length:n,nullCount:r}=this.nextFieldNode()){return Ct({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),child:this.visit(t.children[0])})}visitMap(t,{length:n,nullCount:r}=this.nextFieldNode()){return Ct({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),valueOffsets:this.readOffsets(t),child:this.visit(t.children[0])})}nextFieldNode(){return this.nodes[++this.nodesIndex]}nextBufferRange(){return this.buffers[++this.buffersIndex]}readNullBitmap(t,n,r=this.nextBufferRange()){return n>0&&this.readData(t,r)||new Uint8Array(0)}readOffsets(t,n){return this.readData(t,n)}readTypeIds(t,n){return this.readData(t,n)}readData(t,{length:n,offset:r}=this.nextBufferRange()){return this.bytes.subarray(r,r+n)}readDictionary(t){return this.dictionaries.get(t.id)}}class Vmt extends N9{constructor(t,n,r,i,s){super(new Uint8Array(0),n,r,i,s),this.sources=t}readNullBitmap(t,n,{offset:r}=this.nextBufferRange()){return n<=0?new Uint8Array(0):rb(this.sources[r])}readOffsets(t,{offset:n}=this.nextBufferRange()){return ce(Uint8Array,ce(Int32Array,this.sources[n]))}readTypeIds(t,{offset:n}=this.nextBufferRange()){return ce(Uint8Array,ce(t.ArrayType,this.sources[n]))}readData(t,{offset:n}=this.nextBufferRange()){const{sources:r}=this;return at.isTimestamp(t)||(at.isInt(t)||at.isTime(t))&&t.bitWidth===64||at.isDuration(t)||at.isDate(t)&&t.unit===Pr.MILLISECOND?ce(Uint8Array,nr.convertArray(r[n])):at.isDecimal(t)?ce(Uint8Array,fs.convertArray(r[n])):at.isBinary(t)||at.isFixedSizeBinary(t)?Ymt(r[n]):at.isBool(t)?rb(r[n]):at.isUtf8(t)?pE(r[n].join("")):ce(Uint8Array,ce(t.ArrayType,r[n].map(i=>+i)))}}function Ymt(e){const t=e.join(""),n=new Uint8Array(t.length/2);for(let r=0;r<t.length;r+=2)n[r>>1]=Number.parseInt(t.slice(r,r+2),16);return n}class mt extends Ft{compareSchemas(t,n){return t===n||n instanceof t.constructor&&this.compareManyFields(t.fields,n.fields)}compareManyFields(t,n){return t===n||Array.isArray(t)&&Array.isArray(n)&&t.length===n.length&&t.every((r,i)=>this.compareFields(r,n[i]))}compareFields(t,n){return t===n||n instanceof t.constructor&&t.name===n.name&&t.nullable===n.nullable&&this.visit(t.type,n.type)}}function tr(e,t){return t instanceof e.constructor}function Fy(e,t){return e===t||tr(e,t)}function Xo(e,t){return e===t||tr(e,t)&&e.bitWidth===t.bitWidth&&e.isSigned===t.isSigned}function Xv(e,t){return e===t||tr(e,t)&&e.precision===t.precision}function qmt(e,t){return e===t||tr(e,t)&&e.byteWidth===t.byteWidth}function $E(e,t){return e===t||tr(e,t)&&e.unit===t.unit}function By(e,t){return e===t||tr(e,t)&&e.unit===t.unit&&e.timezone===t.timezone}function Ry(e,t){return e===t||tr(e,t)&&e.unit===t.unit&&e.bitWidth===t.bitWidth}function Wmt(e,t){return e===t||tr(e,t)&&e.children.length===t.children.length&&Ka.compareManyFields(e.children,t.children)}function Hmt(e,t){return e===t||tr(e,t)&&e.children.length===t.children.length&&Ka.compareManyFields(e.children,t.children)}function NE(e,t){return e===t||tr(e,t)&&e.mode===t.mode&&e.typeIds.every((n,r)=>n===t.typeIds[r])&&Ka.compareManyFields(e.children,t.children)}function Gmt(e,t){return e===t||tr(e,t)&&e.id===t.id&&e.isOrdered===t.isOrdered&&Ka.visit(e.indices,t.indices)&&Ka.visit(e.dictionary,t.dictionary)}function DE(e,t){return e===t||tr(e,t)&&e.unit===t.unit}function Ly(e,t){return e===t||tr(e,t)&&e.unit===t.unit}function Xmt(e,t){return e===t||tr(e,t)&&e.listSize===t.listSize&&e.children.length===t.children.length&&Ka.compareManyFields(e.children,t.children)}function Qmt(e,t){return e===t||tr(e,t)&&e.keysSorted===t.keysSorted&&e.children.length===t.children.length&&Ka.compareManyFields(e.children,t.children)}mt.prototype.visitNull=Fy;mt.prototype.visitBool=Fy;mt.prototype.visitInt=Xo;mt.prototype.visitInt8=Xo;mt.prototype.visitInt16=Xo;mt.prototype.visitInt32=Xo;mt.prototype.visitInt64=Xo;mt.prototype.visitUint8=Xo;mt.prototype.visitUint16=Xo;mt.prototype.visitUint32=Xo;mt.prototype.visitUint64=Xo;mt.prototype.visitFloat=Xv;mt.prototype.visitFloat16=Xv;mt.prototype.visitFloat32=Xv;mt.prototype.visitFloat64=Xv;mt.prototype.visitUtf8=Fy;mt.prototype.visitBinary=Fy;mt.prototype.visitFixedSizeBinary=qmt;mt.prototype.visitDate=$E;mt.prototype.visitDateDay=$E;mt.prototype.visitDateMillisecond=$E;mt.prototype.visitTimestamp=By;mt.prototype.visitTimestampSecond=By;mt.prototype.visitTimestampMillisecond=By;mt.prototype.visitTimestampMicrosecond=By;mt.prototype.visitTimestampNanosecond=By;mt.prototype.visitTime=Ry;mt.prototype.visitTimeSecond=Ry;mt.prototype.visitTimeMillisecond=Ry;mt.prototype.visitTimeMicrosecond=Ry;mt.prototype.visitTimeNanosecond=Ry;mt.prototype.visitDecimal=Fy;mt.prototype.visitList=Wmt;mt.prototype.visitStruct=Hmt;mt.prototype.visitUnion=NE;mt.prototype.visitDenseUnion=NE;mt.prototype.visitSparseUnion=NE;mt.prototype.visitDictionary=Gmt;mt.prototype.visitInterval=DE;mt.prototype.visitIntervalDayTime=DE;mt.prototype.visitIntervalYearMonth=DE;mt.prototype.visitDuration=Ly;mt.prototype.visitDurationSecond=Ly;mt.prototype.visitDurationMillisecond=Ly;mt.prototype.visitDurationMicrosecond=Ly;mt.prototype.visitDurationNanosecond=Ly;mt.prototype.visitFixedSizeList=Xmt;mt.prototype.visitMap=Qmt;const Ka=new mt;function Dx(e,t){return Ka.compareSchemas(e,t)}function B_(e,t){return Kmt(e,t.map(n=>n.data.concat()))}function Kmt(e,t){const n=[...e.fields],r=[],i={numBatches:t.reduce((f,d)=>Math.max(f,d.length),0)};let s=0,o=0,a=-1;const l=t.length;let c,u=[];for(;i.numBatches-- >0;){for(o=Number.POSITIVE_INFINITY,a=-1;++a<l;)u[a]=c=t[a].shift(),o=Math.min(o,c?c.length:o);Number.isFinite(o)&&(u=Zmt(n,o,u,t,i),o>0&&(r[s++]=Ct({type:new qn(n),length:o,nullCount:0,children:u.slice()})))}return[e=e.assign(n),r.map(f=>new or(e,f))]}function Zmt(e,t,n,r,i){var s;const o=(t+63&-64)>>3;for(let a=-1,l=r.length;++a<l;){const c=n[a],u=c==null?void 0:c.length;if(u>=t)u===t?n[a]=c:(n[a]=c.slice(0,t),i.numBatches=Math.max(i.numBatches,r[a].unshift(c.slice(t,u-t))));else{const f=e[a];e[a]=f.clone({nullable:!0}),n[a]=(s=c==null?void 0:c._changeLengthAndBackfillNullBitmap(t))!==null&&s!==void 0?s:Ct({type:f.type,length:t,nullCount:t,nullBitmap:new Uint8Array(o)})}}return n}var D9;class On{constructor(...t){var n,r;if(t.length===0)return this.batches=[],this.schema=new se([]),this._offsets=[0],this;let i,s;t[0]instanceof se&&(i=t.shift()),t.at(-1)instanceof Uint32Array&&(s=t.pop());const o=l=>{if(l){if(l instanceof or)return[l];if(l instanceof On)return l.batches;if(l instanceof he){if(l.type instanceof qn)return[new or(new se(l.type.children),l)]}else{if(Array.isArray(l))return l.flatMap(c=>o(c));if(typeof l[Symbol.iterator]=="function")return[...l].flatMap(c=>o(c));if(typeof l=="object"){const c=Object.keys(l),u=c.map(h=>new ie([l[h]])),f=new se(c.map((h,p)=>new Ie(String(h),u[p].type))),[,d]=B_(f,u);return d.length===0?[new or(l)]:d}}}return[]},a=t.flatMap(l=>o(l));if(i=(r=i??((n=a[0])===null||n===void 0?void 0:n.schema))!==null&&r!==void 0?r:new se([]),!(i instanceof se))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const l of a){if(!(l instanceof or))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!Dx(i,l.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=i,this.batches=a,this._offsets=s??v9(this.data)}get data(){return this.batches.map(({data:t})=>t)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((t,n)=>t+n.length,0)}get nullCount(){return this._nullCount===-1&&(this._nullCount=b9(this.data)),this._nullCount}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}getByteLength(t){return 0}[Symbol.iterator](){return this.batches.length>0?EE.visit(new ie(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(`,
  `)}
]`}concat(...t){const n=this.schema,r=this.data.concat(t.flatMap(({data:i})=>i));return new On(n,r.map(i=>new or(n,i)))}slice(t,n){const r=this.schema;[t,n]=m9({length:this.numRows},t,n);const i=w9(this.data,this._offsets,t,n);return new On(r,i.map(s=>new or(r,s)))}getChild(t){return this.getChildAt(this.schema.fields.findIndex(n=>n.name===t))}getChildAt(t){if(t>-1&&t<this.schema.fields.length){const n=this.data.map(r=>r.children[t]);if(n.length===0){const{type:r}=this.schema.fields[t],i=Ct({type:r,length:0,nullCount:0});n.push(i._changeLengthAndBackfillNullBitmap(this.numRows))}return new ie(n)}return null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=[...this.batches];if(t>-1&&t<this.numCols){n||(n=new ie([Ct({type:new Ha,length:this.numRows})]));const s=r.fields.slice(),o=s[t].clone({type:n.type}),a=this.schema.fields.map((l,c)=>this.getChildAt(c));[s[t],a[t]]=[o,n],[r,i]=B_(r,a)}return new On(r,i)}select(t){const n=this.schema.fields.reduce((r,i,s)=>r.set(i.name,s),new Map);return this.selectAt(t.map(r=>n.get(r)).filter(r=>r>-1))}selectAt(t){const n=this.schema.selectAt(t),r=this.batches.map(i=>i.selectAt(t));return new On(n,r)}assign(t){const n=this.schema.fields,[r,i]=t.schema.fields.reduce((a,l,c)=>{const[u,f]=a,d=n.findIndex(h=>h.name===l.name);return~d?f[d]=c:u.push(c),a},[[],[]]),s=this.schema.assign(t.schema),o=[...n.map((a,l)=>[l,i[l]]).map(([a,l])=>l===void 0?this.getChildAt(a):t.getChildAt(l)),...r.map(a=>t.getChildAt(a))].filter(Boolean);return new On(...B_(s,o))}}D9=Symbol.toStringTag;On[D9]=(e=>(e.schema=null,e.batches=[],e._offsets=new Uint32Array([0]),e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,e.isValid=lf(TE),e.get=lf(Sr.getVisitFn(D.Struct)),e.set=_9(vi.getVisitFn(D.Struct)),e.indexOf=S9(ib.getVisitFn(D.Struct)),e.getByteLength=lf(Ps.getVisitFn(D.Struct)),"Table"))(On.prototype);var k9;let or=class hh{constructor(...t){switch(t.length){case 2:{if([this.schema]=t,!(this.schema instanceof se))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=Ct({nullCount:0,type:new qn(this.schema.fields),children:this.schema.fields.map(n=>Ct({type:n.type,nullCount:0}))})]=t,!(this.data instanceof he))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=WN(this.schema,this.data.children);break}case 1:{const[n]=t,{fields:r,children:i,length:s}=Object.keys(n).reduce((l,c,u)=>(l.children[u]=n[c],l.length=Math.max(l.length,n[c].length),l.fields[u]=Ie.new({name:c,type:n[c].type,nullable:!0}),l),{length:0,fields:new Array,children:new Array}),o=new se(r),a=Ct({type:new qn(r),length:s,children:i,nullCount:0});[this.schema,this.data]=WN(o,a.children,s);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=O9(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(t){return this.data.getValid(t)}get(t){return Sr.visit(this.data,t)}set(t,n){return vi.visit(this.data,t,n)}indexOf(t,n){return ib.visit(this.data,t,n)}getByteLength(t){return Ps.visit(this.data,t)}[Symbol.iterator](){return EE.visit(new ie([this.data]))}toArray(){return[...this]}concat(...t){return new On(this.schema,[this,...t])}slice(t,n){const[r]=new ie([this.data]).slice(t,n).data;return new hh(this.schema,r)}getChild(t){var n;return this.getChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.schema.fields.length?new ie([this.data.children[t]]):null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=this.data;if(t>-1&&t<this.numCols){n||(n=new ie([Ct({type:new Ha,length:this.numRows})]));const s=r.fields.slice(),o=i.children.slice(),a=s[t].clone({type:n.type});[s[t],o[t]]=[a,n.data[0]],r=new se(s,new Map(this.schema.metadata)),i=Ct({type:new qn(s),children:o})}return new hh(r,i)}select(t){const n=this.schema.select(t),r=new qn(n.fields),i=[];for(const s of t){const o=this.schema.fields.findIndex(a=>a.name===s);~o&&(i[o]=this.data.children[o])}return new hh(n,Ct({type:r,length:this.numRows,children:i}))}selectAt(t){const n=this.schema.selectAt(t),r=t.map(s=>this.data.children[s]).filter(Boolean),i=Ct({type:new qn(n.fields),length:this.numRows,children:r});return new hh(n,i)}};k9=Symbol.toStringTag;or[k9]=(e=>(e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(or.prototype);function WN(e,t,n=t.reduce((r,i)=>Math.max(r,i.length),0)){var r;const i=[...e.fields],s=[...t],o=(n+63&-64)>>3;for(const[a,l]of e.fields.entries()){const c=t[a];(!c||c.length!==n)&&(i[a]=l.clone({nullable:!0}),s[a]=(r=c==null?void 0:c._changeLengthAndBackfillNullBitmap(n))!==null&&r!==void 0?r:Ct({type:l.type,length:n,nullCount:n,nullBitmap:new Uint8Array(o)}))}return[e.assign(i),Ct({type:new qn(i),length:n,children:s})]}function O9(e,t,n=new Map){var r,i;if(((r=e==null?void 0:e.length)!==null&&r!==void 0?r:0)>0&&(e==null?void 0:e.length)===(t==null?void 0:t.length))for(let s=-1,o=e.length;++s<o;){const{type:a}=e[s],l=t[s];for(const c of[l,...((i=l==null?void 0:l.dictionary)===null||i===void 0?void 0:i.data)||[]])O9(a.children,c==null?void 0:c.children,n);if(at.isDictionary(a)){const{id:c}=a;if(!n.has(c))l!=null&&l.dictionary&&n.set(c,l.dictionary);else if(n.get(c)!==l.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}}return n}class kE extends or{constructor(t){const n=t.fields.map(i=>Ct({type:i.type})),r=Ct({type:new qn(t.fields),nullCount:0,children:n});super(t,r)}}var hb;(function(e){e[e.BUFFER=0]="BUFFER"})(hb||(hb={}));var pb;(function(e){e[e.LZ4_FRAME=0]="LZ4_FRAME",e[e.ZSTD=1]="ZSTD"})(pb||(pb={}));class ca{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBodyCompression(t,n){return(n||new ca).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBodyCompression(t,n){return t.setPosition(t.position()+fe),(n||new ca).__init(t.readInt32(t.position())+t.position(),t)}codec(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt8(this.bb_pos+t):pb.LZ4_FRAME}method(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt8(this.bb_pos+t):hb.BUFFER}static startBodyCompression(t){t.startObject(2)}static addCodec(t,n){t.addFieldInt8(0,n,pb.LZ4_FRAME)}static addMethod(t,n){t.addFieldInt8(1,n,hb.BUFFER)}static endBodyCompression(t){return t.endObject()}static createBodyCompression(t,n,r){return ca.startBodyCompression(t),ca.addCodec(t,n),ca.addMethod(t,r),ca.endBodyCompression(t)}}class F9{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(t,n,r){return t.prep(8,16),t.writeInt64(BigInt(r??0)),t.writeInt64(BigInt(n??0)),t.offset()}}let B9=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(t,n,r){return t.prep(8,16),t.writeInt64(BigInt(r??0)),t.writeInt64(BigInt(n??0)),t.offset()}},uo=class kx{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsRecordBatch(t,n){return(n||new kx).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsRecordBatch(t,n){return t.setPosition(t.position()+fe),(n||new kx).__init(t.readInt32(t.position())+t.position(),t)}length(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}nodes(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new B9).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}nodesLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}buffers(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new F9).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}buffersLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}compression(t){const n=this.bb.__offset(this.bb_pos,10);return n?(t||new ca).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}static startRecordBatch(t){t.startObject(4)}static addLength(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addNodes(t,n){t.addFieldOffset(1,n,0)}static startNodesVector(t,n){t.startVector(16,n,8)}static addBuffers(t,n){t.addFieldOffset(2,n,0)}static startBuffersVector(t,n){t.startVector(16,n,8)}static addCompression(t,n){t.addFieldOffset(3,n,0)}static endRecordBatch(t){return t.endObject()}},du=class Ox{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryBatch(t,n){return(n||new Ox).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryBatch(t,n){return t.setPosition(t.position()+fe),(n||new Ox).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}data(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new uo).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isDelta(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startDictionaryBatch(t){t.startObject(3)}static addId(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addData(t,n){t.addFieldOffset(1,n,0)}static addIsDelta(t,n){t.addFieldInt8(2,+n,0)}static endDictionaryBatch(t){return t.endObject()}};var yb;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(yb||(yb={}));let ta=class os{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMessage(t,n){return(n||new os).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMessage(t,n){return t.setPosition(t.position()+fe),(n||new os).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Yf.V1}headerType(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):yb.NONE}header(t){const n=this.bb.__offset(this.bb_pos,8);return n?this.bb.__union(t,this.bb_pos+n):null}bodyLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new on).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startMessage(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,Yf.V1)}static addHeaderType(t,n){t.addFieldInt8(1,n,yb.NONE)}static addHeader(t,n){t.addFieldOffset(2,n,0)}static addBodyLength(t,n){t.addFieldInt64(3,n,BigInt("0"))}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endMessage(t){return t.endObject()}static finishMessageBuffer(t,n){t.finish(n)}static finishSizePrefixedMessageBuffer(t,n){t.finish(n,void 0,!0)}static createMessage(t,n,r,i,s,o){return os.startMessage(t),os.addVersion(t,n),os.addHeaderType(t,r),os.addHeader(t,i),os.addBodyLength(t,s),os.addCustomMetadata(t,o),os.endMessage(t)}};class Jmt extends Ft{visit(t,n){return t==null||n==null?void 0:super.visit(t,n)}visitNull(t,n){return Xl.startNull(n),Xl.endNull(n)}visitInt(t,n){return Ar.startInt(n),Ar.addBitWidth(n,t.bitWidth),Ar.addIsSigned(n,t.isSigned),Ar.endInt(n)}visitFloat(t,n){return xs.startFloatingPoint(n),xs.addPrecision(n,t.precision),xs.endFloatingPoint(n)}visitBinary(t,n){return Wl.startBinary(n),Wl.endBinary(n)}visitBool(t,n){return Hl.startBool(n),Hl.endBool(n)}visitUtf8(t,n){return Kl.startUtf8(n),Kl.endUtf8(n)}visitDecimal(t,n){return rr.startDecimal(n),rr.addScale(n,t.scale),rr.addPrecision(n,t.precision),rr.addBitWidth(n,t.bitWidth),rr.endDecimal(n)}visitDate(t,n){return _m.startDate(n),_m.addUnit(n,t.unit),_m.endDate(n)}visitTime(t,n){return ti.startTime(n),ti.addUnit(n,t.unit),ti.addBitWidth(n,t.bitWidth),ti.endTime(n)}visitTimestamp(t,n){const r=t.timezone&&n.createString(t.timezone)||void 0;return ei.startTimestamp(n),ei.addUnit(n,t.unit),r!==void 0&&ei.addTimezone(n,r),ei.endTimestamp(n)}visitInterval(t,n){return Is.startInterval(n),Is.addUnit(n,t.unit),Is.endInterval(n)}visitDuration(t,n){return ws.startDuration(n),ws.addUnit(n,t.unit),ws.endDuration(n)}visitList(t,n){return Gl.startList(n),Gl.endList(n)}visitStruct(t,n){return Ql.startStruct_(n),Ql.endStruct_(n)}visitUnion(t,n){sr.startTypeIdsVector(n,t.typeIds.length);const r=sr.createTypeIdsVector(n,t.typeIds);return sr.startUnion(n),sr.addMode(n,t.mode),sr.addTypeIds(n,r),sr.endUnion(n)}visitDictionary(t,n){const r=this.visit(t.indices,n);return mo.startDictionaryEncoding(n),mo.addId(n,BigInt(t.id)),mo.addIsOrdered(n,t.isOrdered),r!==void 0&&mo.addIndexType(n,r),mo.endDictionaryEncoding(n)}visitFixedSizeBinary(t,n){return _s.startFixedSizeBinary(n),_s.addByteWidth(n,t.byteWidth),_s.endFixedSizeBinary(n)}visitFixedSizeList(t,n){return Ss.startFixedSizeList(n),Ss.addListSize(n,t.listSize),Ss.endFixedSizeList(n)}visitMap(t,n){return Sm.startMap(n),Sm.addKeysSorted(n,t.keysSorted),Sm.endMap(n)}}const R_=new Jmt;function tgt(e,t=new Map){return new se(ngt(e,t),Tm(e.metadata),t)}function R9(e){return new zr(e.count,L9(e.columns),C9(e.columns))}function egt(e){return new zs(R9(e.data),e.id,e.isDelta)}function ngt(e,t){return(e.fields||[]).filter(Boolean).map(n=>Ie.fromJSON(n,t))}function HN(e,t){return(e.children||[]).filter(Boolean).map(n=>Ie.fromJSON(n,t))}function L9(e){return(e||[]).reduce((t,n)=>[...t,new Za(n.count,rgt(n.VALIDITY)),...L9(n.children)],[])}function C9(e,t=[]){for(let n=-1,r=(e||[]).length;++n<r;){const i=e[n];i.VALIDITY&&t.push(new $s(t.length,i.VALIDITY.length)),i.TYPE_ID&&t.push(new $s(t.length,i.TYPE_ID.length)),i.OFFSET&&t.push(new $s(t.length,i.OFFSET.length)),i.DATA&&t.push(new $s(t.length,i.DATA.length)),t=C9(i.children,t)}return t}function rgt(e){return(e||[]).reduce((t,n)=>t+ +(n===0),0)}function igt(e,t){let n,r,i,s,o,a;return!t||!(s=e.dictionary)?(o=XN(e,HN(e,t)),i=new Ie(e.name,o,e.nullable,Tm(e.metadata))):t.has(n=s.id)?(r=(r=s.indexType)?GN(r):new Op,a=new Vf(t.get(n),r,n,s.isOrdered),i=new Ie(e.name,a,e.nullable,Tm(e.metadata))):(r=(r=s.indexType)?GN(r):new Op,t.set(n,o=XN(e,HN(e,t))),a=new Vf(o,r,n,s.isOrdered),i=new Ie(e.name,a,e.nullable,Tm(e.metadata))),i||null}function Tm(e=[]){return new Map(e.map(({key:t,value:n})=>[t,n]))}function GN(e){return new Ga(e.isSigned,e.bitWidth)}function XN(e,t){const n=e.type.name;switch(n){case"NONE":return new Ha;case"null":return new Ha;case"binary":return new V1;case"utf8":return new Y1;case"bool":return new q1;case"list":return new K1((t||[])[0]);case"struct":return new qn(t||[]);case"struct_":return new qn(t||[])}switch(n){case"int":{const r=e.type;return new Ga(r.isSigned,r.bitWidth)}case"floatingpoint":{const r=e.type;return new Fp(nn[r.precision])}case"decimal":{const r=e.type;return new W1(r.scale,r.precision,r.bitWidth)}case"date":{const r=e.type;return new H1(Pr[r.unit])}case"time":{const r=e.type;return new Bp(rt[r.unit],r.bitWidth)}case"timestamp":{const r=e.type;return new G1(rt[r.unit],r.timezone)}case"interval":{const r=e.type;return new X1(yr[r.unit])}case"duration":{const r=e.type;return new Q1(rt[r.unit])}case"union":{const r=e.type,[i,...s]=(r.mode+"").toLowerCase(),o=i.toUpperCase()+s.join("");return new Z1(ln[o],r.typeIds||[],t||[])}case"fixedsizebinary":{const r=e.type;return new J1(r.byteWidth)}case"fixedsizelist":{const r=e.type;return new tb(r.listSize,(t||[])[0])}case"map":{const r=e.type;return new eb((t||[])[0],r.keysSorted)}}throw new Error(`Unrecognized type: "${n}"`)}var sgt=OO,ogt=xf;class Wn{static fromJSON(t,n){const r=new Wn(0,Sn.V5,n);return r._createHeader=agt(t,n),r}static decode(t){t=new ogt(Zt(t));const n=ta.getRootAsMessage(t),r=n.bodyLength(),i=n.version(),s=n.headerType(),o=new Wn(r,i,s);return o._createHeader=lgt(n,s),o}static encode(t){const n=new sgt;let r=-1;return t.isSchema()?r=se.encode(n,t.header()):t.isRecordBatch()?r=zr.encode(n,t.header()):t.isDictionaryBatch()&&(r=zs.encode(n,t.header())),ta.startMessage(n),ta.addVersion(n,Sn.V5),ta.addHeader(n,r),ta.addHeaderType(n,t.headerType),ta.addBodyLength(n,BigInt(t.bodyLength)),ta.finishMessageBuffer(n,ta.endMessage(n)),n.asUint8Array()}static from(t,n=0){if(t instanceof se)return new Wn(0,Sn.V5,re.Schema,t);if(t instanceof zr)return new Wn(n,Sn.V5,re.RecordBatch,t);if(t instanceof zs)return new Wn(n,Sn.V5,re.DictionaryBatch,t);throw new Error(`Unrecognized Message header: ${t}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===re.Schema}isRecordBatch(){return this.headerType===re.RecordBatch}isDictionaryBatch(){return this.headerType===re.DictionaryBatch}constructor(t,n,r,i){this._version=n,this._headerType=r,this.body=new Uint8Array(0),i&&(this._createHeader=()=>i),this._bodyLength=Gi(t)}}class zr{get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}constructor(t,n,r){this._nodes=n,this._buffers=r,this._length=Gi(t)}}class zs{get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}constructor(t,n,r=!1){this._data=t,this._isDelta=r,this._id=Gi(n)}}class $s{constructor(t,n){this.offset=Gi(t),this.length=Gi(n)}}class Za{constructor(t,n){this.length=Gi(t),this.nullCount=Gi(n)}}function agt(e,t){return()=>{switch(t){case re.Schema:return se.fromJSON(e);case re.RecordBatch:return zr.fromJSON(e);case re.DictionaryBatch:return zs.fromJSON(e)}throw new Error(`Unrecognized Message type: { name: ${re[t]}, type: ${t} }`)}}function lgt(e,t){return()=>{switch(t){case re.Schema:return se.decode(e.header(new us),new Map,e.version());case re.RecordBatch:return zr.decode(e.header(new uo),e.version());case re.DictionaryBatch:return zs.decode(e.header(new du),e.version())}throw new Error(`Unrecognized Message type: { name: ${re[t]}, type: ${t} }`)}}Ie.encode=vgt;Ie.decode=ggt;Ie.fromJSON=igt;se.encode=bgt;se.decode=cgt;se.fromJSON=tgt;zr.encode=wgt;zr.decode=ugt;zr.fromJSON=R9;zs.encode=_gt;zs.decode=fgt;zs.fromJSON=egt;Za.encode=Sgt;Za.decode=hgt;$s.encode=xgt;$s.decode=dgt;function cgt(e,t=new Map,n=Sn.V5){const r=mgt(e,t);return new se(r,Em(e),t,n)}function ugt(e,t=Sn.V5){if(e.compression()!==null)throw new Error("Record batch compression not implemented");return new zr(e.length(),pgt(e),ygt(e,t))}function fgt(e,t=Sn.V5){return new zs(zr.decode(e.data(),t),e.id(),e.isDelta())}function dgt(e){return new $s(e.offset(),e.length())}function hgt(e){return new Za(e.length(),e.nullCount())}function pgt(e){const t=[];for(let n,r=-1,i=-1,s=e.nodesLength();++r<s;)(n=e.nodes(r))&&(t[++i]=Za.decode(n));return t}function ygt(e,t){const n=[];for(let r,i=-1,s=-1,o=e.buffersLength();++i<o;)(r=e.buffers(i))&&(t<Sn.V4&&(r.bb_pos+=8*(i+1)),n[++s]=$s.decode(r));return n}function mgt(e,t){const n=[];for(let r,i=-1,s=-1,o=e.fieldsLength();++i<o;)(r=e.fields(i))&&(n[++s]=Ie.decode(r,t));return n}function QN(e,t){const n=[];for(let r,i=-1,s=-1,o=e.childrenLength();++i<o;)(r=e.children(i))&&(n[++s]=Ie.decode(r,t));return n}function ggt(e,t){let n,r,i,s,o,a;return!t||!(a=e.dictionary())?(i=ZN(e,QN(e,t)),r=new Ie(e.name(),i,e.nullable(),Em(e))):t.has(n=Gi(a.id()))?(s=(s=a.indexType())?KN(s):new Op,o=new Vf(t.get(n),s,n,a.isOrdered()),r=new Ie(e.name(),o,e.nullable(),Em(e))):(s=(s=a.indexType())?KN(s):new Op,t.set(n,i=ZN(e,QN(e,t))),o=new Vf(i,s,n,a.isOrdered()),r=new Ie(e.name(),o,e.nullable(),Em(e))),r||null}function Em(e){const t=new Map;if(e)for(let n,r,i=-1,s=Math.trunc(e.customMetadataLength());++i<s;)(n=e.customMetadata(i))&&(r=n.key())!=null&&t.set(r,n.value());return t}function KN(e){return new Ga(e.isSigned(),e.bitWidth())}function ZN(e,t){const n=e.typeType();switch(n){case Ee.NONE:return new Ha;case Ee.Null:return new Ha;case Ee.Binary:return new V1;case Ee.Utf8:return new Y1;case Ee.Bool:return new q1;case Ee.List:return new K1((t||[])[0]);case Ee.Struct_:return new qn(t||[])}switch(n){case Ee.Int:{const r=e.type(new Ar);return new Ga(r.isSigned(),r.bitWidth())}case Ee.FloatingPoint:{const r=e.type(new xs);return new Fp(r.precision())}case Ee.Decimal:{const r=e.type(new rr);return new W1(r.scale(),r.precision(),r.bitWidth())}case Ee.Date:{const r=e.type(new _m);return new H1(r.unit())}case Ee.Time:{const r=e.type(new ti);return new Bp(r.unit(),r.bitWidth())}case Ee.Timestamp:{const r=e.type(new ei);return new G1(r.unit(),r.timezone())}case Ee.Interval:{const r=e.type(new Is);return new X1(r.unit())}case Ee.Duration:{const r=e.type(new ws);return new Q1(r.unit())}case Ee.Union:{const r=e.type(new sr);return new Z1(r.mode(),r.typeIdsArray()||[],t||[])}case Ee.FixedSizeBinary:{const r=e.type(new _s);return new J1(r.byteWidth())}case Ee.FixedSizeList:{const r=e.type(new Ss);return new tb(r.listSize(),(t||[])[0])}case Ee.Map:{const r=e.type(new Sm);return new eb((t||[])[0],r.keysSorted())}}throw new Error(`Unrecognized type: "${Ee[n]}" (${n})`)}function bgt(e,t){const n=t.fields.map(s=>Ie.encode(e,s));us.startFieldsVector(e,n.length);const r=us.createFieldsVector(e,n),i=t.metadata&&t.metadata.size>0?us.createCustomMetadataVector(e,[...t.metadata].map(([s,o])=>{const a=e.createString(`${s}`),l=e.createString(`${o}`);return on.startKeyValue(e),on.addKey(e,a),on.addValue(e,l),on.endKeyValue(e)})):-1;return us.startSchema(e),us.addFields(e,r),us.addEndianness(e,Igt?qf.Little:qf.Big),i!==-1&&us.addCustomMetadata(e,i),us.endSchema(e)}function vgt(e,t){let n=-1,r=-1,i=-1;const s=t.type;let o=t.typeId;at.isDictionary(s)?(o=s.dictionary.typeId,i=R_.visit(s,e),r=R_.visit(s.dictionary,e)):r=R_.visit(s,e);const a=(s.children||[]).map(u=>Ie.encode(e,u)),l=Xr.createChildrenVector(e,a),c=t.metadata&&t.metadata.size>0?Xr.createCustomMetadataVector(e,[...t.metadata].map(([u,f])=>{const d=e.createString(`${u}`),h=e.createString(`${f}`);return on.startKeyValue(e),on.addKey(e,d),on.addValue(e,h),on.endKeyValue(e)})):-1;return t.name&&(n=e.createString(t.name)),Xr.startField(e),Xr.addType(e,r),Xr.addTypeType(e,o),Xr.addChildren(e,l),Xr.addNullable(e,!!t.nullable),n!==-1&&Xr.addName(e,n),i!==-1&&Xr.addDictionary(e,i),c!==-1&&Xr.addCustomMetadata(e,c),Xr.endField(e)}function wgt(e,t){const n=t.nodes||[],r=t.buffers||[];uo.startNodesVector(e,n.length);for(const o of n.slice().reverse())Za.encode(e,o);const i=e.endVector();uo.startBuffersVector(e,r.length);for(const o of r.slice().reverse())$s.encode(e,o);const s=e.endVector();return uo.startRecordBatch(e),uo.addLength(e,BigInt(t.length)),uo.addNodes(e,i),uo.addBuffers(e,s),uo.endRecordBatch(e)}function _gt(e,t){const n=zr.encode(e,t.data);return du.startDictionaryBatch(e),du.addId(e,BigInt(t.id)),du.addIsDelta(e,t.isDelta),du.addData(e,n),du.endDictionaryBatch(e)}function Sgt(e,t){return B9.createFieldNode(e,BigInt(t.length),BigInt(t.nullCount))}function xgt(e,t){return F9.createBuffer(e,BigInt(t.offset),BigInt(t.length))}const Igt=(()=>{const e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),new Int16Array(e)[0]===256})(),OE=e=>`Expected ${re[e]} Message in stream, but was null or length 0.`,FE=e=>`Header pointer of flatbuffer-encoded ${re[e]} Message is null or length 0.`,U9=(e,t)=>`Expected to read ${e} metadata bytes, but only read ${t}.`,P9=(e,t)=>`Expected to read ${e} bytes for message body, but only read ${t}.`;class z9{constructor(t){this.source=t instanceof fb?t:new fb(t)}[Symbol.iterator](){return this}next(){let t;return(t=this.readMetadataLength()).done||t.value===-1&&(t=this.readMetadataLength()).done||(t=this.readMetadata(t.value)).done?Ce:t}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}readMessage(t){let n;if((n=this.next()).done)return null;if(t!=null&&n.value.headerType!==t)throw new Error(OE(t));return n.value}readMessageBody(t){if(t<=0)return new Uint8Array(0);const n=Zt(this.source.read(t));if(n.byteLength<t)throw new Error(P9(t,n.byteLength));return n.byteOffset%8===0&&n.byteOffset+n.byteLength<=n.buffer.byteLength?n:n.slice()}readSchema(t=!1){const n=re.Schema,r=this.readMessage(n),i=r==null?void 0:r.header();if(t&&!i)throw new Error(FE(n));return i}readMetadataLength(){const t=this.source.read(Qv),n=t&&new xf(t),r=(n==null?void 0:n.readInt32(0))||0;return{done:r===0,value:r}}readMetadata(t){const n=this.source.read(t);if(!n)return Ce;if(n.byteLength<t)throw new Error(U9(t,n.byteLength));return{done:!1,value:Wn.decode(n)}}}class Tgt{constructor(t,n){this.source=t instanceof Wf?t:eP(t)?new db(t,n):new Wf(t)}[Symbol.asyncIterator](){return this}next(){return W(this,void 0,void 0,function*(){let t;return(t=yield this.readMetadataLength()).done||t.value===-1&&(t=yield this.readMetadataLength()).done||(t=yield this.readMetadata(t.value)).done?Ce:t})}throw(t){return W(this,void 0,void 0,function*(){return yield this.source.throw(t)})}return(t){return W(this,void 0,void 0,function*(){return yield this.source.return(t)})}readMessage(t){return W(this,void 0,void 0,function*(){let n;if((n=yield this.next()).done)return null;if(t!=null&&n.value.headerType!==t)throw new Error(OE(t));return n.value})}readMessageBody(t){return W(this,void 0,void 0,function*(){if(t<=0)return new Uint8Array(0);const n=Zt(yield this.source.read(t));if(n.byteLength<t)throw new Error(P9(t,n.byteLength));return n.byteOffset%8===0&&n.byteOffset+n.byteLength<=n.buffer.byteLength?n:n.slice()})}readSchema(t=!1){return W(this,void 0,void 0,function*(){const n=re.Schema,r=yield this.readMessage(n),i=r==null?void 0:r.header();if(t&&!i)throw new Error(FE(n));return i})}readMetadataLength(){return W(this,void 0,void 0,function*(){const t=yield this.source.read(Qv),n=t&&new xf(t),r=(n==null?void 0:n.readInt32(0))||0;return{done:r===0,value:r}})}readMetadata(t){return W(this,void 0,void 0,function*(){const n=yield this.source.read(t);if(!n)return Ce;if(n.byteLength<t)throw new Error(U9(t,n.byteLength));return{done:!1,value:Wn.decode(n)}})}}class Egt extends z9{constructor(t){super(new Uint8Array(0)),this._schema=!1,this._body=[],this._batchIndex=0,this._dictionaryIndex=0,this._json=t instanceof YN?t:new YN(t)}next(){const{_json:t}=this;if(!this._schema)return this._schema=!0,{done:!1,value:Wn.fromJSON(t.schema,re.Schema)};if(this._dictionaryIndex<t.dictionaries.length){const n=t.dictionaries[this._dictionaryIndex++];return this._body=n.data.columns,{done:!1,value:Wn.fromJSON(n,re.DictionaryBatch)}}if(this._batchIndex<t.batches.length){const n=t.batches[this._batchIndex++];return this._body=n.columns,{done:!1,value:Wn.fromJSON(n,re.RecordBatch)}}return this._body=[],Ce}readMessageBody(t){return n(this._body);function n(r){return(r||[]).reduce((i,s)=>[...i,...s.VALIDITY&&[s.VALIDITY]||[],...s.TYPE_ID&&[s.TYPE_ID]||[],...s.OFFSET&&[s.OFFSET]||[],...s.DATA&&[s.DATA]||[],...n(s.children)],[])}}readMessage(t){let n;if((n=this.next()).done)return null;if(t!=null&&n.value.headerType!==t)throw new Error(OE(t));return n.value}readSchema(){const t=re.Schema,n=this.readMessage(t),r=n==null?void 0:n.header();if(!n||!r)throw new Error(FE(t));return r}}const Qv=4,Fx="ARROW1",Lp=new Uint8Array(Fx.length);for(let e=0;e<Fx.length;e+=1)Lp[e]=Fx.codePointAt(e);function BE(e,t=0){for(let n=-1,r=Lp.length;++n<r;)if(Lp[n]!==e[t+n])return!1;return!0}const Cy=Lp.length,j9=Cy+Qv,Agt=Cy*2+Qv;class hi extends AE{constructor(t){super(),this._impl=t}get closed(){return this._impl.closed}get schema(){return this._impl.schema}get autoDestroy(){return this._impl.autoDestroy}get dictionaries(){return this._impl.dictionaries}get numDictionaries(){return this._impl.numDictionaries}get numRecordBatches(){return this._impl.numRecordBatches}get footer(){return this._impl.isFile()?this._impl.footer:null}isSync(){return this._impl.isSync()}isAsync(){return this._impl.isAsync()}isFile(){return this._impl.isFile()}isStream(){return this._impl.isStream()}next(){return this._impl.next()}throw(t){return this._impl.throw(t)}return(t){return this._impl.return(t)}cancel(){return this._impl.cancel()}reset(t){return this._impl.reset(t),this._DOMStream=void 0,this._nodeStream=void 0,this}open(t){const n=this._impl.open(t);return Mc(n)?n.then(()=>this):this}readRecordBatch(t){return this._impl.isFile()?this._impl.readRecordBatch(t):null}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}toDOMStream(){return Kr.toDOMStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this})}toNodeStream(){return Kr.toNodeStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this},{objectMode:!0})}static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,n){throw new Error('"throughDOM" not available in this environment')}static from(t){return t instanceof hi?t:Ex(t)?Dgt(t):eP(t)?Fgt(t):Mc(t)?W(this,void 0,void 0,function*(){return yield hi.from(yield t)}):nP(t)||yE(t)||rP(t)||bd(t)?Ogt(new Wf(t)):kgt(new fb(t))}static readAll(t){return t instanceof hi?t.isSync()?JN(t):t4(t):Ex(t)||ArrayBuffer.isView(t)||Oy(t)||tP(t)?JN(t):t4(t)}}class mb extends hi{constructor(t){super(t),this._impl=t}readAll(){return[...this]}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return en(this,arguments,function*(){yield K(yield*Ma(Fr(this[Symbol.iterator]())))})}}class gb extends hi{constructor(t){super(t),this._impl=t}readAll(){var t,n,r,i;return W(this,void 0,void 0,function*(){const s=new Array;try{for(var o=!0,a=Fr(this),l;l=yield a.next(),t=l.done,!t;o=!0){i=l.value,o=!1;const c=i;s.push(c)}}catch(c){n={error:c}}finally{try{!o&&!t&&(r=a.return)&&(yield r.call(a))}finally{if(n)throw n.error}}return s})}[Symbol.iterator](){throw new Error("AsyncRecordBatchStreamReader is not Iterable")}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}}class V9 extends mb{constructor(t){super(t),this._impl=t}}class Mgt extends gb{constructor(t){super(t),this._impl=t}}class Y9{get numDictionaries(){return this._dictionaryIndex}get numRecordBatches(){return this._recordBatchIndex}constructor(t=new Map){this.closed=!1,this.autoDestroy=!0,this._dictionaryIndex=0,this._recordBatchIndex=0,this.dictionaries=t}isSync(){return!1}isAsync(){return!1}isFile(){return!1}isStream(){return!1}reset(t){return this._dictionaryIndex=0,this._recordBatchIndex=0,this.schema=t,this.dictionaries=new Map,this}_loadRecordBatch(t,n){const r=this._loadVectors(t,n,this.schema.fields),i=Ct({type:new qn(this.schema.fields),length:t.length,children:r});return new or(this.schema,i)}_loadDictionaryBatch(t,n){const{id:r,isDelta:i}=t,{dictionaries:s,schema:o}=this,a=s.get(r);if(i||!a){const l=o.dictionaries.get(r),c=this._loadVectors(t.data,n,[l]);return(a&&i?a.concat(new ie(c)):new ie(c)).memoize()}return a.memoize()}_loadVectors(t,n,r){return new N9(n,t.nodes,t.buffers,this.dictionaries,this.schema.metadataVersion).visitMany(r)}}class bb extends Y9{constructor(t,n){super(n),this._reader=Ex(t)?new Egt(this._handle=t):new z9(this._handle=t)}isSync(){return!0}isStream(){return!0}[Symbol.iterator](){return this}cancel(){!this.closed&&(this.closed=!0)&&(this.reset()._reader.return(),this._reader=null,this.dictionaries=null)}open(t){return this.closed||(this.autoDestroy=W9(this,t),this.schema||(this.schema=this._reader.readSchema())||this.cancel()),this}throw(t){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.throw(t):Ce}return(t){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.return(t):Ce}next(){if(this.closed)return Ce;let t;const{_reader:n}=this;for(;t=this._readNextMessageAndValidate();)if(t.isSchema())this.reset(t.header());else if(t.isRecordBatch()){this._recordBatchIndex++;const r=t.header(),i=n.readMessageBody(t.bodyLength);return{done:!1,value:this._loadRecordBatch(r,i)}}else if(t.isDictionaryBatch()){this._dictionaryIndex++;const r=t.header(),i=n.readMessageBody(t.bodyLength),s=this._loadDictionaryBatch(r,i);this.dictionaries.set(r.id,s)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new kE(this.schema)}):this.return()}_readNextMessageAndValidate(t){return this._reader.readMessage(t)}}class vb extends Y9{constructor(t,n){super(n),this._reader=new Tgt(this._handle=t)}isAsync(){return!0}isStream(){return!0}[Symbol.asyncIterator](){return this}cancel(){return W(this,void 0,void 0,function*(){!this.closed&&(this.closed=!0)&&(yield this.reset()._reader.return(),this._reader=null,this.dictionaries=null)})}open(t){return W(this,void 0,void 0,function*(){return this.closed||(this.autoDestroy=W9(this,t),this.schema||(this.schema=yield this._reader.readSchema())||(yield this.cancel())),this})}throw(t){return W(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.throw(t):Ce})}return(t){return W(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.return(t):Ce})}next(){return W(this,void 0,void 0,function*(){if(this.closed)return Ce;let t;const{_reader:n}=this;for(;t=yield this._readNextMessageAndValidate();)if(t.isSchema())yield this.reset(t.header());else if(t.isRecordBatch()){this._recordBatchIndex++;const r=t.header(),i=yield n.readMessageBody(t.bodyLength);return{done:!1,value:this._loadRecordBatch(r,i)}}else if(t.isDictionaryBatch()){this._dictionaryIndex++;const r=t.header(),i=yield n.readMessageBody(t.bodyLength),s=this._loadDictionaryBatch(r,i);this.dictionaries.set(r.id,s)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new kE(this.schema)}):yield this.return()})}_readNextMessageAndValidate(t){return W(this,void 0,void 0,function*(){return yield this._reader.readMessage(t)})}}class q9 extends bb{get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}constructor(t,n){super(t instanceof qN?t:new qN(t),n)}isSync(){return!0}isFile(){return!0}open(t){if(!this.closed&&!this._footer){this.schema=(this._footer=this._readFooter()).schema;for(const n of this._footer.dictionaryBatches())n&&this._readDictionaryBatch(this._dictionaryIndex++)}return super.open(t)}readRecordBatch(t){var n;if(this.closed)return null;this._footer||this.open();const r=(n=this._footer)===null||n===void 0?void 0:n.getRecordBatch(t);if(r&&this._handle.seek(r.offset)){const i=this._reader.readMessage(re.RecordBatch);if(i!=null&&i.isRecordBatch()){const s=i.header(),o=this._reader.readMessageBody(i.bodyLength);return this._loadRecordBatch(s,o)}}return null}_readDictionaryBatch(t){var n;const r=(n=this._footer)===null||n===void 0?void 0:n.getDictionaryBatch(t);if(r&&this._handle.seek(r.offset)){const i=this._reader.readMessage(re.DictionaryBatch);if(i!=null&&i.isDictionaryBatch()){const s=i.header(),o=this._reader.readMessageBody(i.bodyLength),a=this._loadDictionaryBatch(s,o);this.dictionaries.set(s.id,a)}}}_readFooter(){const{_handle:t}=this,n=t.size-j9,r=t.readInt32(n),i=t.readAt(n-r,r);return Rp.decode(i)}_readNextMessageAndValidate(t){var n;if(this._footer||this.open(),this._footer&&this._recordBatchIndex<this.numRecordBatches){const r=(n=this._footer)===null||n===void 0?void 0:n.getRecordBatch(this._recordBatchIndex);if(r&&this._handle.seek(r.offset))return this._reader.readMessage(t)}return null}}class $gt extends vb{get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}constructor(t,...n){const r=typeof n[0]!="number"?n.shift():void 0,i=n[0]instanceof Map?n.shift():void 0;super(t instanceof db?t:new db(t,r),i)}isFile(){return!0}isAsync(){return!0}open(t){const n=Object.create(null,{open:{get:()=>super.open}});return W(this,void 0,void 0,function*(){if(!this.closed&&!this._footer){this.schema=(this._footer=yield this._readFooter()).schema;for(const r of this._footer.dictionaryBatches())r&&(yield this._readDictionaryBatch(this._dictionaryIndex++))}return yield n.open.call(this,t)})}readRecordBatch(t){var n;return W(this,void 0,void 0,function*(){if(this.closed)return null;this._footer||(yield this.open());const r=(n=this._footer)===null||n===void 0?void 0:n.getRecordBatch(t);if(r&&(yield this._handle.seek(r.offset))){const i=yield this._reader.readMessage(re.RecordBatch);if(i!=null&&i.isRecordBatch()){const s=i.header(),o=yield this._reader.readMessageBody(i.bodyLength);return this._loadRecordBatch(s,o)}}return null})}_readDictionaryBatch(t){var n;return W(this,void 0,void 0,function*(){const r=(n=this._footer)===null||n===void 0?void 0:n.getDictionaryBatch(t);if(r&&(yield this._handle.seek(r.offset))){const i=yield this._reader.readMessage(re.DictionaryBatch);if(i!=null&&i.isDictionaryBatch()){const s=i.header(),o=yield this._reader.readMessageBody(i.bodyLength),a=this._loadDictionaryBatch(s,o);this.dictionaries.set(s.id,a)}}})}_readFooter(){return W(this,void 0,void 0,function*(){const{_handle:t}=this;t._pending&&(yield t._pending);const n=t.size-j9,r=yield t.readInt32(n),i=yield t.readAt(n-r,r);return Rp.decode(i)})}_readNextMessageAndValidate(t){return W(this,void 0,void 0,function*(){if(this._footer||(yield this.open()),this._footer&&this._recordBatchIndex<this.numRecordBatches){const n=this._footer.getRecordBatch(this._recordBatchIndex);if(n&&(yield this._handle.seek(n.offset)))return yield this._reader.readMessage(t)}return null})}}class Ngt extends bb{constructor(t,n){super(t,n)}_loadVectors(t,n,r){return new Vmt(n,t.nodes,t.buffers,this.dictionaries,this.schema.metadataVersion).visitMany(r)}}function W9(e,t){return t&&typeof t.autoDestroy=="boolean"?t.autoDestroy:e.autoDestroy}function*JN(e){const t=hi.from(e);try{if(!t.open({autoDestroy:!1}).closed)do yield t;while(!t.reset().open().closed)}finally{t.cancel()}}function t4(e){return en(this,arguments,function*(){const n=yield K(hi.from(e));try{if(!(yield K(n.open({autoDestroy:!1}))).closed)do yield yield K(n);while(!(yield K(n.reset().open())).closed)}finally{yield K(n.cancel())}})}function Dgt(e){return new mb(new Ngt(e))}function kgt(e){const t=e.peek(Cy+7&-8);return t&&t.byteLength>=4?BE(t)?new V9(new q9(e.read())):new mb(new bb(e)):new mb(new bb(function*(){}()))}function Ogt(e){return W(this,void 0,void 0,function*(){const t=yield e.peek(Cy+7&-8);return t&&t.byteLength>=4?BE(t)?new V9(new q9(yield e.read())):new gb(new vb(e)):new gb(new vb(function(){return en(this,arguments,function*(){})}()))})}function Fgt(e){return W(this,void 0,void 0,function*(){const{size:t}=yield e.stat(),n=new db(e,t);return t>=Agt&&BE(yield n.readAt(0,Cy+7&-8))?new Mgt(new $gt(n)):new gb(new vb(n))})}class Ze extends Ft{static assemble(...t){const n=i=>i.flatMap(s=>Array.isArray(s)?n(s):s instanceof or?s.data.children:s.data),r=new Ze;return r.visitMany(n(t)),r}constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}visit(t){if(t instanceof ie)return this.visitMany(t.data),this;const{type:n}=t;if(!at.isDictionary(n)){const{length:r}=t;if(r>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");if(at.isUnion(n))this.nodes.push(new Za(r,0));else{const{nullCount:i}=t;at.isNull(n)||Ci.call(this,i<=0?new Uint8Array(0):nb(t.offset,r,t.nullBitmap)),this.nodes.push(new Za(r,i))}}return super.visit(t)}visitNull(t){return this}visitDictionary(t){return this.visit(t.clone(t.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function Ci(e){const t=e.byteLength+7&-8;return this.buffers.push(e),this.bufferRegions.push(new $s(this._byteLength,t)),this._byteLength+=t,this}function Bgt(e){var t;const{type:n,length:r,typeIds:i,valueOffsets:s}=e;if(Ci.call(this,i),n.mode===ln.Sparse)return Bx.call(this,e);if(n.mode===ln.Dense){if(e.offset<=0)return Ci.call(this,s),Bx.call(this,e);{const o=new Int32Array(r),a=Object.create(null),l=Object.create(null);for(let c,u,f=-1;++f<r;)(c=i[f])!==void 0&&((u=a[c])===void 0&&(u=a[c]=s[f]),o[f]=s[f]-u,l[c]=((t=l[c])!==null&&t!==void 0?t:0)+1);Ci.call(this,o),this.visitMany(e.children.map((c,u)=>{const f=n.typeIds[u],d=a[f],h=l[f];return c.slice(d,Math.min(r,h))}))}}return this}function Rgt(e){let t;return e.nullCount>=e.length?Ci.call(this,new Uint8Array(0)):(t=e.values)instanceof Uint8Array?Ci.call(this,nb(e.offset,e.length,t)):Ci.call(this,rb(e.values))}function Qo(e){return Ci.call(this,e.values.subarray(0,e.length*e.stride))}function H9(e){const{length:t,values:n,valueOffsets:r}=e,{[0]:i,[t]:s}=r,o=Math.min(s-i,n.byteLength-i);return Ci.call(this,sP(-i,t+1,r)),Ci.call(this,n.subarray(i,i+o)),this}function RE(e){const{length:t,valueOffsets:n}=e;if(n){const{[0]:r,[t]:i}=n;return Ci.call(this,sP(-r,t+1,n)),this.visit(e.children[0].slice(r,i-r))}return this.visit(e.children[0])}function Bx(e){return this.visitMany(e.type.children.map((t,n)=>e.children[n]).filter(Boolean))[0]}Ze.prototype.visitBool=Rgt;Ze.prototype.visitInt=Qo;Ze.prototype.visitFloat=Qo;Ze.prototype.visitUtf8=H9;Ze.prototype.visitBinary=H9;Ze.prototype.visitFixedSizeBinary=Qo;Ze.prototype.visitDate=Qo;Ze.prototype.visitTimestamp=Qo;Ze.prototype.visitTime=Qo;Ze.prototype.visitDecimal=Qo;Ze.prototype.visitList=RE;Ze.prototype.visitStruct=Bx;Ze.prototype.visitUnion=Bgt;Ze.prototype.visitInterval=Qo;Ze.prototype.visitDuration=Qo;Ze.prototype.visitFixedSizeList=RE;Ze.prototype.visitMap=RE;class G9 extends AE{static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,n){throw new Error('"throughDOM" not available in this environment')}constructor(t){super(),this._position=0,this._started=!1,this._sink=new Im,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,_r(t)||(t={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy=typeof t.autoDestroy=="boolean"?t.autoDestroy:!0,this._writeLegacyIpcFormat=typeof t.writeLegacyIpcFormat=="boolean"?t.writeLegacyIpcFormat:!1}toString(t=!1){return this._sink.toString(t)}toUint8Array(t=!1){return this._sink.toUint8Array(t)}writeAll(t){return Mc(t)?t.then(n=>this.writeAll(n)):bd(t)?PE(this,t):UE(this,t)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(t){return this._sink.toDOMStream(t)}toNodeStream(t){return this._sink.toNodeStream(t)}close(){return this.reset()._sink.close()}abort(t){return this.reset()._sink.abort(t)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(t=this._sink,n=null){return t===this._sink||t instanceof Im?this._sink=t:(this._sink=new Im,t&&t0t(t)?this.toDOMStream({type:"bytes"}).pipeTo(t):t&&e0t(t)&&this.toNodeStream({objectMode:!1}).pipe(t)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,(!n||!Dx(n,this._schema))&&(n==null?(this._position=0,this._schema=null):(this._started=!0,this._schema=n,this._writeSchema(n))),this}write(t){let n=null;if(this._sink){if(t==null)return this.finish()&&void 0;if(t instanceof On&&!(n=t.schema))return this.finish()&&void 0;if(t instanceof or&&!(n=t.schema))return this.finish()&&void 0}else throw new Error("RecordBatchWriter is closed");if(n&&!Dx(n,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,n)}t instanceof or?t instanceof kE||this._writeRecordBatch(t):t instanceof On?this.writeAll(t.batches):Oy(t)&&this.writeAll(t)}_writeMessage(t,n=8){const r=n-1,i=Wn.encode(t),s=i.byteLength,o=this._writeLegacyIpcFormat?4:8,a=s+o+r&~r,l=a-s-o;return t.headerType===re.RecordBatch?this._recordBatchBlocks.push(new Qa(a,t.bodyLength,this._position)):t.headerType===re.DictionaryBatch&&this._dictionaryBlocks.push(new Qa(a,t.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(a-o)),s>0&&this._write(i),this._writePadding(l)}_write(t){if(this._started){const n=Zt(t);n&&n.byteLength>0&&(this._sink.write(n),this._position+=n.byteLength)}return this}_writeSchema(t){return this._writeMessage(Wn.from(t))}_writeFooter(t){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(Lp)}_writePadding(t){return t>0?this._write(new Uint8Array(t)):this}_writeRecordBatch(t){const{byteLength:n,nodes:r,bufferRegions:i,buffers:s}=Ze.assemble(t),o=new zr(t.numRows,r,i),a=Wn.from(o,n);return this._writeDictionaries(t)._writeMessage(a)._writeBodyBuffers(s)}_writeDictionaryBatch(t,n,r=!1){this._dictionaryDeltaOffsets.set(n,t.length+(this._dictionaryDeltaOffsets.get(n)||0));const{byteLength:i,nodes:s,bufferRegions:o,buffers:a}=Ze.assemble(new ie([t])),l=new zr(t.length,s,o),c=new zs(l,n,r),u=Wn.from(c,i);return this._writeMessage(u)._writeBodyBuffers(a)}_writeBodyBuffers(t){let n,r,i;for(let s=-1,o=t.length;++s<o;)(n=t[s])&&(r=n.byteLength)>0&&(this._write(n),(i=(r+7&-8)-r)>0&&this._writePadding(i));return this}_writeDictionaries(t){for(let[n,r]of t.dictionaries){let i=this._dictionaryDeltaOffsets.get(n)||0;if(i===0||(r=r==null?void 0:r.slice(i)).length>0)for(const s of r.data)this._writeDictionaryBatch(s,n,i>0),i+=s.length}return this}}class LE extends G9{static writeAll(t,n){const r=new LE(n);return Mc(t)?t.then(i=>r.writeAll(i)):bd(t)?PE(r,t):UE(r,t)}}class CE extends G9{static writeAll(t){const n=new CE;return Mc(t)?t.then(r=>n.writeAll(r)):bd(t)?PE(n,t):UE(n,t)}constructor(){super(),this._autoDestroy=!0}_writeSchema(t){return this._writeMagic()._writePadding(2)}_writeFooter(t){const n=Rp.encode(new Rp(t,Sn.V5,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(t)._write(n)._write(Int32Array.of(n.byteLength))._writeMagic()}}function UE(e,t){let n=t;t instanceof On&&(n=t.batches,e.reset(void 0,t.schema));for(const r of n)e.write(r);return e.finish()}function PE(e,t){var n,r,i,s,o,a,l;return W(this,void 0,void 0,function*(){try{for(n=!0,r=Fr(t);i=yield r.next(),s=i.done,!s;n=!0){l=i.value,n=!1;const c=l;e.write(c)}}catch(c){o={error:c}}finally{try{!n&&!s&&(a=r.return)&&(yield a.call(r))}finally{if(o)throw o.error}}return e.finish()})}function Lgt(e,t="stream"){return(t==="stream"?LE:CE).writeAll(e).toUint8Array(!0)}var Cgt=Object.create,X9=Object.defineProperty,Ugt=Object.getOwnPropertyDescriptor,Pgt=Object.getOwnPropertyNames,zgt=Object.getPrototypeOf,jgt=Object.prototype.hasOwnProperty,Vgt=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Ygt=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of Pgt(t))!jgt.call(e,i)&&i!==n&&X9(e,i,{get:()=>t[i],enumerable:!(r=Ugt(t,i))||r.enumerable});return e},qgt=(e,t,n)=>(n=e!=null?Cgt(zgt(e)):{},Ygt(t||!e||!e.__esModule?X9(n,"default",{value:e,enumerable:!0}):n,e)),Wgt=Vgt((e,t)=>{t.exports=Worker}),Hgt=(e=>(e[e.UNDEFINED=0]="UNDEFINED",e[e.AUTOMATIC=1]="AUTOMATIC",e[e.READ_ONLY=2]="READ_ONLY",e[e.READ_WRITE=3]="READ_WRITE",e))(Hgt||{}),Ggt=(e=>(e[e.IDENTIFIER=0]="IDENTIFIER",e[e.NUMERIC_CONSTANT=1]="NUMERIC_CONSTANT",e[e.STRING_CONSTANT=2]="STRING_CONSTANT",e[e.OPERATOR=3]="OPERATOR",e[e.KEYWORD=4]="KEYWORD",e[e.COMMENT=5]="COMMENT",e))(Ggt||{}),Xgt=(e=>(e[e.NONE=0]="NONE",e[e.DEBUG=1]="DEBUG",e[e.INFO=2]="INFO",e[e.WARNING=3]="WARNING",e[e.ERROR=4]="ERROR",e))(Xgt||{}),Qgt=(e=>(e[e.NONE=0]="NONE",e[e.CONNECT=1]="CONNECT",e[e.DISCONNECT=2]="DISCONNECT",e[e.OPEN=3]="OPEN",e[e.QUERY=4]="QUERY",e[e.INSTANTIATE=5]="INSTANTIATE",e))(Qgt||{}),Kgt=(e=>(e[e.NONE=0]="NONE",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR",e[e.START=3]="START",e[e.RUN=4]="RUN",e[e.CAPTURE=5]="CAPTURE",e))(Kgt||{}),Zgt=(e=>(e[e.NONE=0]="NONE",e[e.WEB_WORKER=1]="WEB_WORKER",e[e.NODE_WORKER=2]="NODE_WORKER",e[e.BINDINGS=3]="BINDINGS",e[e.ASYNC_DUCKDB=4]="ASYNC_DUCKDB",e))(Zgt||{}),Jgt=class{constructor(e=2){this.level=e}log(e){e.level>=this.level&&console.log(e)}},t1t=(e=>(e[e.SUCCESS=0]="SUCCESS",e))(t1t||{}),e1t=class{constructor(e,t){this._bindings=e,this._conn=t}get bindings(){return this._bindings}async close(){return this._bindings.disconnect(this._conn)}useUnsafe(e){return e(this._bindings,this._conn)}async query(e){this._bindings.logger.log({timestamp:new Date,level:2,origin:4,topic:4,event:4,value:e});let t=await this._bindings.runQuery(this._conn,e),n=hi.from(t);return console.assert(n.isSync(),"Reader is not sync"),console.assert(n.isFile(),"Reader is not file"),new On(n)}async send(e){this._bindings.logger.log({timestamp:new Date,level:2,origin:4,topic:4,event:4,value:e});let t=await this._bindings.startPendingQuery(this._conn,e);for(;t==null;)t=await this._bindings.pollPendingQuery(this._conn);let n=new Q9(this._bindings,this._conn,t),r=await hi.from(n);return console.assert(r.isAsync()),console.assert(r.isStream()),r}async cancelSent(){return await this._bindings.cancelPendingQuery(this._conn)}async getTableNames(e){return await this._bindings.getTableNames(this._conn,e)}async prepare(e){let t=await this._bindings.createPrepared(this._conn,e);return new n1t(this._bindings,this._conn,t)}async insertArrowTable(e,t){let n=Lgt(e,"stream");await this.insertArrowFromIPCStream(n,t)}async insertArrowFromIPCStream(e,t){await this._bindings.insertArrowFromIPCStream(this._conn,e,t)}async insertCSVFromPath(e,t){await this._bindings.insertCSVFromPath(this._conn,e,t)}async insertJSONFromPath(e,t){await this._bindings.insertJSONFromPath(this._conn,e,t)}},Q9=class{constructor(e,t,n){this.db=e,this.conn=t,this.header=n,this._first=!0,this._depleted=!1,this._inFlight=null}async next(){if(this._first)return this._first=!1,{done:!1,value:this.header};if(this._depleted)return{done:!0,value:null};let e;return this._inFlight!=null?(e=await this._inFlight,this._inFlight=null):e=await this.db.fetchQueryResults(this.conn),this._depleted=e.length==0,this._depleted||(this._inFlight=this.db.fetchQueryResults(this.conn)),{done:this._depleted,value:e}}[Symbol.asyncIterator](){return this}},n1t=class{constructor(e,t,n){this.bindings=e,this.connectionId=t,this.statementId=n}async close(){await this.bindings.closePrepared(this.connectionId,this.statementId)}async query(...e){let t=await this.bindings.runPrepared(this.connectionId,this.statementId,e),n=hi.from(t);return console.assert(n.isSync()),console.assert(n.isFile()),new On(n)}async send(...e){let t=await this.bindings.sendPrepared(this.connectionId,this.statementId,e),n=new Q9(this.bindings,this.connectionId,t),r=await hi.from(n);return console.assert(r.isAsync()),console.assert(r.isStream()),r}},r1t=(e=>(e.CANCEL_PENDING_QUERY="CANCEL_PENDING_QUERY",e.CLOSE_PREPARED="CLOSE_PREPARED",e.COLLECT_FILE_STATISTICS="COLLECT_FILE_STATISTICS",e.CONNECT="CONNECT",e.COPY_FILE_TO_BUFFER="COPY_FILE_TO_BUFFER",e.COPY_FILE_TO_PATH="COPY_FILE_TO_PATH",e.CREATE_PREPARED="CREATE_PREPARED",e.DISCONNECT="DISCONNECT",e.DROP_FILE="DROP_FILE",e.DROP_FILES="DROP_FILES",e.EXPORT_FILE_STATISTICS="EXPORT_FILE_STATISTICS",e.FETCH_QUERY_RESULTS="FETCH_QUERY_RESULTS",e.FLUSH_FILES="FLUSH_FILES",e.GET_FEATURE_FLAGS="GET_FEATURE_FLAGS",e.GET_TABLE_NAMES="GET_TABLE_NAMES",e.GET_VERSION="GET_VERSION",e.GLOB_FILE_INFOS="GLOB_FILE_INFOS",e.INSERT_ARROW_FROM_IPC_STREAM="INSERT_ARROW_FROM_IPC_STREAM",e.INSERT_CSV_FROM_PATH="IMPORT_CSV_FROM_PATH",e.INSERT_JSON_FROM_PATH="IMPORT_JSON_FROM_PATH",e.INSTANTIATE="INSTANTIATE",e.OPEN="OPEN",e.PING="PING",e.POLL_PENDING_QUERY="POLL_PENDING_QUERY",e.REGISTER_FILE_BUFFER="REGISTER_FILE_BUFFER",e.REGISTER_FILE_HANDLE="REGISTER_FILE_HANDLE",e.REGISTER_FILE_URL="REGISTER_FILE_URL",e.RESET="RESET",e.RUN_PREPARED="RUN_PREPARED",e.RUN_QUERY="RUN_QUERY",e.SEND_PREPARED="SEND_PREPARED",e.START_PENDING_QUERY="START_PENDING_QUERY",e.TOKENIZE="TOKENIZE",e))(r1t||{}),i1t=(e=>(e.CONNECTION_INFO="CONNECTION_INFO",e.ERROR="ERROR",e.FEATURE_FLAGS="FEATURE_FLAGS",e.FILE_BUFFER="FILE_BUFFER",e.FILE_INFOS="FILE_INFOS",e.FILE_SIZE="FILE_SIZE",e.FILE_STATISTICS="FILE_STATISTICS",e.INSTANTIATE_PROGRESS="INSTANTIATE_PROGRESS",e.LOG="LOG",e.OK="OK",e.PREPARED_STATEMENT_ID="PREPARED_STATEMENT_ID",e.QUERY_PLAN="QUERY_PLAN",e.QUERY_RESULT="QUERY_RESULT",e.QUERY_RESULT_CHUNK="QUERY_RESULT_CHUNK",e.QUERY_RESULT_HEADER="QUERY_RESULT_HEADER",e.QUERY_RESULT_HEADER_OR_NULL="QUERY_RESULT_HEADER_OR_NULL",e.REGISTERED_FILE="REGISTERED_FILE",e.SCRIPT_TOKENS="SCRIPT_TOKENS",e.SUCCESS="SUCCESS",e.TABLE_NAMES="TABLE_NAMES",e.VERSION_STRING="VERSION_STRING",e))(i1t||{}),Yt=class{constructor(e,t){this.promiseResolver=()=>{},this.promiseRejecter=()=>{},this.type=e,this.data=t,this.promise=new Promise((n,r)=>{this.promiseResolver=n,this.promiseRejecter=r})}};function Am(e){switch(e.typeId){case D.Binary:return{sqlType:"binary"};case D.Bool:return{sqlType:"bool"};case D.Date:return{sqlType:"date"};case D.DateDay:return{sqlType:"date32[d]"};case D.DateMillisecond:return{sqlType:"date64[ms]"};case D.Decimal:{let t=e;return{sqlType:"decimal",precision:t.precision,scale:t.scale}}case D.Float:return{sqlType:"float"};case D.Float16:return{sqlType:"float16"};case D.Float32:return{sqlType:"float32"};case D.Float64:return{sqlType:"float64"};case D.Int:return{sqlType:"int32"};case D.Int16:return{sqlType:"int16"};case D.Int32:return{sqlType:"int32"};case D.Int64:return{sqlType:"int64"};case D.Uint16:return{sqlType:"uint16"};case D.Uint32:return{sqlType:"uint32"};case D.Uint64:return{sqlType:"uint64"};case D.Uint8:return{sqlType:"uint8"};case D.IntervalDayTime:return{sqlType:"interval[dt]"};case D.IntervalYearMonth:return{sqlType:"interval[m]"};case D.List:return{sqlType:"list",valueType:Am(e.valueType)};case D.FixedSizeBinary:return{sqlType:"fixedsizebinary",byteWidth:e.byteWidth};case D.Null:return{sqlType:"null"};case D.Utf8:return{sqlType:"utf8"};case D.Struct:return{sqlType:"struct",fields:e.children.map(t=>Rx(t.name,t.type))};case D.Map:{let t=e;return{sqlType:"map",keyType:Am(t.keyType),valueType:Am(t.valueType)}}case D.Time:return{sqlType:"time[s]"};case D.TimeMicrosecond:return{sqlType:"time[us]"};case D.TimeMillisecond:return{sqlType:"time[ms]"};case D.TimeNanosecond:return{sqlType:"time[ns]"};case D.TimeSecond:return{sqlType:"time[s]"};case D.Timestamp:return{sqlType:"timestamp",timezone:e.timezone||void 0};case D.TimestampSecond:return{sqlType:"timestamp[s]",timezone:e.timezone||void 0};case D.TimestampMicrosecond:return{sqlType:"timestamp[us]",timezone:e.timezone||void 0};case D.TimestampNanosecond:return{sqlType:"timestamp[ns]",timezone:e.timezone||void 0};case D.TimestampMillisecond:return{sqlType:"timestamp[ms]",timezone:e.timezone||void 0}}throw new Error("unsupported arrow type: ".concat(e.toString()))}function Rx(e,t){let n=Am(t);return n.name=e,n}var s1t=new TextEncoder,o1t=class{constructor(e,t=null){this._onInstantiationProgress=[],this._worker=null,this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{},this._nextMessageId=0,this._pendingRequests=new Map,this._logger=e,this._onMessageHandler=this.onMessage.bind(this),this._onErrorHandler=this.onError.bind(this),this._onCloseHandler=this.onClose.bind(this),t!=null&&this.attach(t)}get logger(){return this._logger}attach(e){this._worker=e,this._worker.addEventListener("message",this._onMessageHandler),this._worker.addEventListener("error",this._onErrorHandler),this._worker.addEventListener("close",this._onCloseHandler),this._workerShutdownPromise=new Promise((t,n)=>{this._workerShutdownResolver=t})}detach(){this._worker&&(this._worker.removeEventListener("message",this._onMessageHandler),this._worker.removeEventListener("error",this._onErrorHandler),this._worker.removeEventListener("close",this._onCloseHandler),this._worker=null,this._workerShutdownResolver(null),this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{})}async terminate(){this._worker&&(this._worker.terminate(),this._worker=null,this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{})}async postTask(e,t=[]){if(!this._worker){console.error("cannot send a message since the worker is not set!");return}let n=this._nextMessageId++;return this._pendingRequests.set(n,e),this._worker.postMessage({messageId:n,type:e.type,data:e.data},t),await e.promise}onMessage(e){var t;let n=e.data;switch(n.type){case"LOG":{this._logger.log(n.data);return}case"INSTANTIATE_PROGRESS":{for(let i of this._onInstantiationProgress)i(n.data);return}}let r=this._pendingRequests.get(n.requestId);if(!r){console.warn("unassociated response: [".concat(n.requestId,", ").concat(n.type.toString(),"]"));return}if(this._pendingRequests.delete(n.requestId),n.type=="ERROR"){let i=new Error(n.data.message);i.name=n.data.name,(t=Object.getOwnPropertyDescriptor(i,"stack"))!=null&&t.writable&&(i.stack=n.data.stack),r.promiseRejecter(i);return}switch(r.type){case"CLOSE_PREPARED":case"COLLECT_FILE_STATISTICS":case"COPY_FILE_TO_PATH":case"DISCONNECT":case"DROP_FILE":case"DROP_FILES":case"FLUSH_FILES":case"INSERT_ARROW_FROM_IPC_STREAM":case"IMPORT_CSV_FROM_PATH":case"IMPORT_JSON_FROM_PATH":case"OPEN":case"PING":case"REGISTER_FILE_BUFFER":case"REGISTER_FILE_HANDLE":case"REGISTER_FILE_URL":case"RESET":if(n.type=="OK"){r.promiseResolver(n.data);return}break;case"INSTANTIATE":if(this._onInstantiationProgress=[],n.type=="OK"){r.promiseResolver(n.data);return}break;case"GLOB_FILE_INFOS":if(n.type=="FILE_INFOS"){r.promiseResolver(n.data);return}break;case"GET_VERSION":if(n.type=="VERSION_STRING"){r.promiseResolver(n.data);return}break;case"GET_FEATURE_FLAGS":if(n.type=="FEATURE_FLAGS"){r.promiseResolver(n.data);return}break;case"GET_TABLE_NAMES":if(n.type=="TABLE_NAMES"){r.promiseResolver(n.data);return}break;case"TOKENIZE":if(n.type=="SCRIPT_TOKENS"){r.promiseResolver(n.data);return}break;case"COPY_FILE_TO_BUFFER":if(n.type=="FILE_BUFFER"){r.promiseResolver(n.data);return}break;case"EXPORT_FILE_STATISTICS":if(n.type=="FILE_STATISTICS"){r.promiseResolver(n.data);return}break;case"CONNECT":if(n.type=="CONNECTION_INFO"){r.promiseResolver(n.data);return}break;case"RUN_PREPARED":case"RUN_QUERY":if(n.type=="QUERY_RESULT"){r.promiseResolver(n.data);return}break;case"SEND_PREPARED":if(n.type=="QUERY_RESULT_HEADER"){r.promiseResolver(n.data);return}break;case"START_PENDING_QUERY":if(n.type=="QUERY_RESULT_HEADER_OR_NULL"){r.promiseResolver(n.data);return}break;case"POLL_PENDING_QUERY":if(n.type=="QUERY_RESULT_HEADER_OR_NULL"){r.promiseResolver(n.data);return}break;case"CANCEL_PENDING_QUERY":if(this._onInstantiationProgress=[],n.type=="SUCCESS"){r.promiseResolver(n.data);return}break;case"FETCH_QUERY_RESULTS":if(n.type=="QUERY_RESULT_CHUNK"){r.promiseResolver(n.data);return}break;case"CREATE_PREPARED":if(n.type=="PREPARED_STATEMENT_ID"){r.promiseResolver(n.data);return}break}r.promiseRejecter(new Error("unexpected response type: ".concat(n.type.toString())))}onError(e){console.error(e),console.error("error in duckdb worker: ".concat(e.message)),this._pendingRequests.clear()}onClose(){if(this._workerShutdownResolver(null),this._pendingRequests.size!=0){console.warn("worker terminated with ".concat(this._pendingRequests.size," pending requests"));return}this._pendingRequests.clear()}async reset(){let e=new Yt("RESET",null);return await this.postTask(e)}async ping(){let e=new Yt("PING",null);await this.postTask(e)}async dropFile(e){let t=new Yt("DROP_FILE",e);return await this.postTask(t)}async dropFiles(){let e=new Yt("DROP_FILES",null);return await this.postTask(e)}async flushFiles(){let e=new Yt("FLUSH_FILES",null);return await this.postTask(e)}async instantiate(e,t=null,n=r=>{}){this._onInstantiationProgress.push(n);let r=new Yt("INSTANTIATE",[e,t]);return await this.postTask(r)}async getVersion(){let e=new Yt("GET_VERSION",null);return await this.postTask(e)}async getFeatureFlags(){let e=new Yt("GET_FEATURE_FLAGS",null);return await this.postTask(e)}async open(e){let t=new Yt("OPEN",e);await this.postTask(t)}async tokenize(e){let t=new Yt("TOKENIZE",e);return await this.postTask(t)}async connectInternal(){let e=new Yt("CONNECT",null);return await this.postTask(e)}async connect(){let e=await this.connectInternal();return new e1t(this,e)}async disconnect(e){let t=new Yt("DISCONNECT",e);await this.postTask(t)}async runQuery(e,t){let n=new Yt("RUN_QUERY",[e,t]);return await this.postTask(n)}async startPendingQuery(e,t){let n=new Yt("START_PENDING_QUERY",[e,t]);return await this.postTask(n)}async pollPendingQuery(e){let t=new Yt("POLL_PENDING_QUERY",e);return await this.postTask(t)}async cancelPendingQuery(e){let t=new Yt("CANCEL_PENDING_QUERY",e);return await this.postTask(t)}async fetchQueryResults(e){let t=new Yt("FETCH_QUERY_RESULTS",e);return await this.postTask(t)}async getTableNames(e,t){let n=new Yt("GET_TABLE_NAMES",[e,t]);return await this.postTask(n)}async createPrepared(e,t){let n=new Yt("CREATE_PREPARED",[e,t]);return await this.postTask(n)}async closePrepared(e,t){let n=new Yt("CLOSE_PREPARED",[e,t]);await this.postTask(n)}async runPrepared(e,t,n){let r=new Yt("RUN_PREPARED",[e,t,n]);return await this.postTask(r)}async sendPrepared(e,t,n){let r=new Yt("SEND_PREPARED",[e,t,n]);return await this.postTask(r)}async globFiles(e){let t=new Yt("GLOB_FILE_INFOS",e);return await this.postTask(t)}async registerFileText(e,t){let n=s1t.encode(t);await this.registerFileBuffer(e,n)}async registerFileURL(e,t,n,r){t===void 0&&(t=e);let i=new Yt("REGISTER_FILE_URL",[e,t,n,r]);await this.postTask(i)}async registerEmptyFileBuffer(e){let t=new Yt("REGISTER_FILE_BUFFER",[e,new Uint8Array]);await this.postTask(t)}async registerFileBuffer(e,t){let n=new Yt("REGISTER_FILE_BUFFER",[e,t]);await this.postTask(n,[t.buffer])}async registerFileHandle(e,t,n,r){let i=new Yt("REGISTER_FILE_HANDLE",[e,t,n,r]);await this.postTask(i,[])}async collectFileStatistics(e,t){let n=new Yt("COLLECT_FILE_STATISTICS",[e,t]);await this.postTask(n,[])}async exportFileStatistics(e){let t=new Yt("EXPORT_FILE_STATISTICS",e);return await this.postTask(t,[])}async copyFileToBuffer(e){let t=new Yt("COPY_FILE_TO_BUFFER",e);return await this.postTask(t)}async copyFileToPath(e,t){let n=new Yt("COPY_FILE_TO_PATH",[e,t]);await this.postTask(n)}async insertArrowFromIPCStream(e,t,n){if(t.length==0)return;let r=new Yt("INSERT_ARROW_FROM_IPC_STREAM",[e,t,n]);await this.postTask(r,[t.buffer])}async insertCSVFromPath(e,t,n){if(n.columns!==void 0){let i=[];for(let s in n.columns){let o=n.columns[s];i.push(Rx(s,o))}n.columnsFlat=i,delete n.columns}let r=new Yt("IMPORT_CSV_FROM_PATH",[e,t,n]);await this.postTask(r)}async insertJSONFromPath(e,t,n){if(n.columns!==void 0){let i=[];for(let s in n.columns){let o=n.columns[s];i.push(Rx(s,o))}n.columnsFlat=i,delete n.columns}let r=new Yt("IMPORT_JSON_FROM_PATH",[e,t,n]);await this.postTask(r)}},a1t={name:"@duckdb/duckdb-wasm",version:"1.11.0",description:"DuckDB powered by WebAssembly",license:"MIT",repository:{type:"git",url:"https://github.com/duckdb/duckdb-wasm.git"},keywords:["sql","duckdb","relational","database","data","query","wasm","analytics","olap","arrow","parquet","json","csv"],dependencies:{"apache-arrow":"^14.0.1"},devDependencies:{"@types/emscripten":"^1.39.10","@types/jasmine":"^5.1.4","@typescript-eslint/eslint-plugin":"^6.18.0","@typescript-eslint/parser":"^6.18.0",esbuild:"^0.19.10",eslint:"^8.54.0","eslint-plugin-jasmine":"^4.1.3","eslint-plugin-react":"^7.33.2","fast-glob":"^3.3.2",jasmine:"^5.1.0","jasmine-core":"^5.1.1","jasmine-spec-reporter":"^7.0.0","js-sha256":"^0.10.1",karma:"^6.4.2","karma-chrome-launcher":"^3.2.0","karma-coverage":"^2.2.1","karma-firefox-launcher":"^2.1.2","karma-jasmine":"^5.1.0","karma-jasmine-html-reporter":"^2.1.0","karma-sourcemap-loader":"^0.4.0","karma-spec-reporter":"^0.0.36","make-dir":"^4.0.0",nyc:"^15.1.0",prettier:"^3.1.1",puppeteer:"^21.6.1",rimraf:"^5.0.5",s3rver:"^3.7.1",typedoc:"^0.25.4",typescript:"^5.3.3","wasm-feature-detect":"^1.6.1","web-worker":"^1.2.0"},scripts:{"build:debug":"node bundle.mjs debug && tsc --emitDeclarationOnly","build:release":"node bundle.mjs release && tsc --emitDeclarationOnly",docs:"typedoc",report:"node ./coverage.mjs","test:node":"node --enable-source-maps ../../node_modules/jasmine/bin/jasmine ./dist/tests-node.cjs","test:node:debug":"node --inspect-brk --enable-source-maps ../../node_modules/jasmine/bin/jasmine ./dist/tests-node.cjs","test:node:coverage":"nyc -r json --report-dir ./coverage/node node ../../node_modules/jasmine/bin/jasmine ./dist/tests-node.cjs","test:firefox":"karma start ./karma/tests-firefox.cjs","test:chrome":"karma start ./karma/tests-chrome.cjs","test:chrome:eh":"karma start ./karma/tests-chrome-eh.cjs","test:chrome:coverage":"karma start ./karma/tests-chrome-coverage.cjs","test:browser":"karma start ./karma/tests-all.cjs","test:browser:debug":"karma start ./karma/tests-debug.cjs",test:"npm run test:chrome && npm run test:node","test:coverage":"npm run test:chrome:coverage && npm run test:node:coverage && npm run report",lint:"eslint src test"},files:["dist","!dist/types/test"],main:"dist/duckdb-browser.cjs",module:"dist/duckdb-browser.mjs",types:"dist/duckdb-browser.d.ts",jsdelivr:"dist/duckdb-browser.cjs",unpkg:"dist/duckdb-browser.mjs",sideEffects:!1,browser:{fs:!1,path:!1,perf_hooks:!1,os:!1,worker_threads:!1},exports:{"./dist/duckdb-mvp.wasm":"./dist/duckdb-mvp.wasm","./dist/duckdb-eh.wasm":"./dist/duckdb-eh.wasm","./dist/duckdb-coi.wasm":"./dist/duckdb-coi.wasm","./dist/duckdb-browser":"./dist/duckdb-browser.mjs","./dist/duckdb-browser.cjs":"./dist/duckdb-browser.cjs","./dist/duckdb-browser.mjs":"./dist/duckdb-browser.mjs","./dist/duckdb-browser-blocking":"./dist/duckdb-browser-blocking.mjs","./dist/duckdb-browser-blocking.mjs":"./dist/duckdb-browser-blocking.mjs","./dist/duckdb-browser-blocking.cjs":"./dist/duckdb-browser-blocking.cjs","./dist/duckdb-browser-coi.pthread.worker.js":"./dist/duckdb-browser-coi.pthread.worker.js","./dist/duckdb-browser-coi.worker.js":"./dist/duckdb-browser-coi.worker.js","./dist/duckdb-browser-eh.worker.js":"./dist/duckdb-browser-eh.worker.js","./dist/duckdb-browser-mvp.worker.js":"./dist/duckdb-browser-mvp.worker.js","./dist/duckdb-node":"./dist/duckdb-node.cjs","./dist/duckdb-node.cjs":"./dist/duckdb-node.cjs","./dist/duckdb-node-blocking":"./dist/duckdb-node-blocking.cjs","./dist/duckdb-node-blocking.cjs":"./dist/duckdb-node-blocking.cjs","./dist/duckdb-node-eh.worker.cjs":"./dist/duckdb-node-eh.worker.cjs","./dist/duckdb-node-mvp.worker.cjs":"./dist/duckdb-node-mvp.worker.cjs","./blocking":{browser:{types:"./dist/duckdb-browser-blocking.d.ts",import:"./dist/duckdb-browser-blocking.mjs",require:"./dist/duckdb-browser-blocking.cjs"},node:{types:"./dist/duckdb-node-blocking.d.ts",require:"./dist/duckdb-node-blocking.cjs",import:"./dist/duckdb-node-blocking.cjs"},types:"./dist/duckdb-browser-blocking.d.ts",import:"./dist/duckdb-browser-blocking.mjs",require:"./dist/duckdb-browser-blocking.cjs"},".":{browser:{types:"./dist/duckdb-browser.d.ts",import:"./dist/duckdb-browser.mjs",require:"./dist/duckdb-browser.cjs"},node:{types:"./dist/duckdb-node.d.ts",import:"./dist/duckdb-node.cjs",require:"./dist/duckdb-node.cjs"},types:"./dist/duckdb-browser.d.ts",import:"./dist/duckdb-browser.mjs",require:"./dist/duckdb-browser.cjs"}}},zE=a1t.version.split(".");zE[0];zE[1];zE[2];qgt(Wgt());function l1t(){let e=new TextDecoder;return t=>(typeof SharedArrayBuffer<"u"&&t.buffer instanceof SharedArrayBuffer&&(t=new Uint8Array(t)),e.decode(t))}l1t();var c1t=(e=>(e[e.BUFFER=0]="BUFFER",e[e.NODE_FS=1]="NODE_FS",e[e.BROWSER_FILEREADER=2]="BROWSER_FILEREADER",e[e.BROWSER_FSACCESS=3]="BROWSER_FSACCESS",e[e.HTTP=4]="HTTP",e[e.S3=5]="S3",e))(c1t||{}),K9=class{singleValue(){let{columnCount:e,rowCount:t}=this;if(e===0)throw Error("no column data");if(t===0)throw Error("no rows");if(e>1)throw Error("more than one column");if(t>1)throw Error("more than one row");return this.value(0,0)}columnNames(){let{columnCount:e}=this,t=[];for(let n=0;n<e;n++)t.push(this.columnName(n));return t}deduplicatedColumnNames(){let{columnCount:e}=this,t=[],n={};for(let r=0;r<e;r++){let i=this.columnName(r),s=(n[i]||0)+1;n[i]=s,s>1?t.push(`${i}:${s-1}`):t.push(i)}return t}toRows(){let{rowCount:e,columnCount:t}=this,n=this.deduplicatedColumnNames(),r=[];for(let i=0;i<e;i++){let s={};for(let o=0;o<t;o++)s[n[o]]=this.value(o,i);r.push(s)}return r}},Xt,oe=(Xt=class{constructor(){}static DECIMAL(t,n){return t===void 0&&n===void 0?Xt.default_DECIMAL:{name:"DECIMAL",width:t,scale:n}}static LIST(t){return{name:"LIST",valueType:t}}static MAP(t,n){return{name:"MAP",keyType:t,valueType:n}}static STRUCT(t){return{name:"STRUCT",entries:t}}static STRUCT_entry(t,n){return{key:t,valueType:n}}static UNION(t){return{name:"UNION",alternatives:t}}static UNION_alternative(t,n){return{tag:t,valueType:n}}static VARCHAR_withLength(t){return{name:"VARCHAR",length:t}}},Xt.BIGINT={name:"BIGINT"},Xt.BIT={name:"BIT"},Xt.BOOLEAN={name:"BOOLEAN"},Xt.BLOB={name:"BLOB"},Xt.DATE={name:"DATE"},Xt.DOUBLE={name:"DOUBLE"},Xt.default_DECIMAL={name:"DECIMAL"},Xt.ENUM={name:"ENUM"},Xt.HUGEINT={name:"HUGEINT"},Xt.INTEGER={name:"INTEGER"},Xt.INTERVAL={name:"INTERVAL"},Xt.REAL={name:"REAL"},Xt.SMALLINT={name:"SMALLINT"},Xt.SQLNULL={name:"SQLNULL"},Xt.TIME={name:"TIME"},Xt.TIMESTAMP={name:"TIMESTAMP"},Xt.TIMESTAMP_S={name:"TIMESTAMP_S"},Xt.TIMESTAMP_MS={name:"TIMESTAMP_MS"},Xt.TIMESTAMP_NS={name:"TIMESTAMP_NS"},Xt.TIMESTAMP_TZ={name:"TIMESTAMP_TZ"},Xt.TINYINT={name:"TINYINT"},Xt.UBIGINT={name:"UBIGINT"},Xt.UINTEGER={name:"UINTEGER"},Xt.USMALLINT={name:"USMALLINT"},Xt.UTINYINT={name:"UTINYINT"},Xt.UUID={name:"UUID"},Xt.VARCHAR={name:"VARCHAR"},Xt);function hu(e){switch(e.typeId){case D.Null:return oe.SQLNULL;case D.Int:{let{isSigned:t,bitWidth:n}=e;if(t)switch(n){case 8:return oe.TINYINT;case 16:return oe.SMALLINT;case 32:return oe.INTEGER;case 64:return oe.BIGINT;default:throw Error(`unexpected integer bit width: ${n}`)}else switch(n){case 8:return oe.UTINYINT;case 16:return oe.USMALLINT;case 32:return oe.UINTEGER;case 64:return oe.UBIGINT;default:throw Error(`unexpected integer bit width: ${n}`)}}case D.Float:{let{precision:t}=e;switch(t){case nn.HALF:throw Error("DuckDB does not support half-precision floats");case nn.SINGLE:return oe.REAL;case nn.DOUBLE:return oe.DOUBLE;default:throw Error(`unexpected precision: ${t}`)}}case D.Binary:return oe.BLOB;case D.Utf8:return oe.VARCHAR;case D.Bool:return oe.BOOLEAN;case D.Decimal:{let{precision:t,scale:n}=e;return(t==null||t===18)&&(n==null||n===3)?oe.DECIMAL():oe.DECIMAL(t,n)}case D.Date:{let{unit:t}=e;switch(t){case Pr.DAY:return oe.DATE;case Pr.MILLISECOND:throw Error("DuckDB does not support millisecond-unit dates");default:throw Error(`unexpected date unit: ${t}`)}}case D.Time:{let{unit:t}=e;switch(t){case rt.SECOND:throw Error("DuckDB does not support second-unit times");case rt.MILLISECOND:throw Error("DuckDB does not support millisecond-unit times");case rt.MICROSECOND:return oe.TIME;case rt.NANOSECOND:throw Error("DuckDB does not support nanosecond-unit times");default:throw Error(`unexpected time unit: ${t}`)}}case D.Timestamp:{let{unit:t,timezone:n}=e;switch(t){case rt.SECOND:if(n)throw Error("DuckDB does not support second-unit timestamps with timezone");return oe.TIMESTAMP_S;case rt.MILLISECOND:if(n)throw Error("DuckDB does not support millisecond-unit timestamps with timezone");return oe.TIMESTAMP_MS;case rt.MICROSECOND:return n?oe.TIMESTAMP_TZ:oe.TIMESTAMP;case rt.NANOSECOND:if(n)throw Error("DuckDB does not support nanosecond-unit timestamps with timezone");return oe.TIMESTAMP_NS;default:throw Error(`unexpected time unit: ${t}`)}}case D.Interval:{let{unit:t}=e;switch(t){case yr.YEAR_MONTH:throw Error("DuckDB does not support year-month intervals");case yr.DAY_TIME:throw Error("DuckDB does not support day-time intervals");case yr.MONTH_DAY_NANO:return oe.INTERVAL;default:throw Error(`unexpected interval unit: ${t}`)}}case D.List:{let{valueType:t}=e;return oe.LIST(hu(t))}case D.Struct:{let{children:t}=e,n=t.map(r=>({key:r.name,valueType:hu(r.type)}));return oe.STRUCT(n)}case D.Union:{let{mode:t}=e;switch(t){case ln.Dense:throw Error("DuckDB does not support dense unions");case ln.Sparse:{let n=e.children.map(r=>({tag:r.name,valueType:hu(r.type)}));return oe.UNION(n)}default:throw Error(`unexpected union mode: ${t}`)}}case D.FixedSizeBinary:throw Error("DuckDB does not support fixed-size binary");case D.FixedSizeList:throw Error("DuckDB does not support fixed-size lists");case D.Map:{let{keyType:t,valueType:n}=e;return oe.MAP(hu(t),hu(n))}case D.Dictionary:return oe.ENUM;default:throw Error(`unexpected type id: ${e.typeId}`)}}function u1t(e){let t="";for(let n of e)n<=31||n===34||n===39||n>=127?t+=`\\x${n.toString(16).toUpperCase().padStart(2,"0")}`:t+=String.fromCharCode(n);return t}var Si=class{toString(){return this.toDuckDBString()}},f1t=class extends Si{constructor(e){super(),this.bytes=e}toDuckDBString(){return u1t(this.bytes)}},Lx=BigInt(1e6),d1t=BigInt(1e3),h1t=BigInt(1e3),e4=BigInt(60),n4=BigInt(60),Mm=BigInt(864e8),p1t=BigInt("-9223372036854775807"),y1t=BigInt("9223372036854775807");function m1t(e,t,n){let r=String(Math.abs(e)).padStart(4,"0"),i=String(t).padStart(2,"0"),s=String(n).padStart(2,"0");return`${r}-${i}-${s}${e<0?" (BC)":""}`}function Z9(e){let t=Math.abs(e),n=e<0?-1:1,r=Math.floor(t/146097),i=n*r*400,s=t%146097,o=n*s*864e5,a=new Date(o),l=i+a.getUTCFullYear();l<0&&l--;let c=a.getUTCMonth()+1,u=a.getUTCDate();return m1t(l,c,u)}function g1t(e,t,n,r){let i=String(e).padStart(2,"0"),s=String(t).padStart(2,"0"),o=String(n).padStart(2,"0"),a=String(r).padStart(6,"0").replace(/0+$/,"");return`${i}:${s}:${o}${a.length>0?`.${a}`:""}`}function J9(e){let t=e%Lx,n=e/Lx,r=n%e4,i=n/e4,s=i%n4,o=i/n4;return g1t(o,s,r,t)}function tz(e){let t=e<0?e+Mm:e;return J9(t)}function b1t(e){let t=e<0,n=t?-e:e,r=J9(n);return t?`-${r}`:r}function v1t(e,t,n){let r=Z9(Number(e)),i=tz(t),s=n?` ${n}`:"";return`${r} ${i}${s}`}function Kv(e,t){if(e===p1t)return"-infinity";if(e===y1t)return"infinity";let n=e/Mm,r=e%Mm;return r<0&&(n--,r+=Mm),v1t(n,r,t)}function w1t(e,t){return Kv(e*Lx,t)}function _1t(e,t){return Kv(e*d1t,t)}function S1t(e,t){return Kv(e/h1t,t)}function L_(e,t){return`${e} ${t}${e!==1?"s":""}`}function x1t(e,t,n){let r=[];if(e!==0){let i=e<0?-1:1,s=Math.abs(e),o=Math.floor(s/12),a=i*o,l=i*(s-o*12);a!==0&&r.push(L_(a,"year")),l!==0&&r.push(L_(l,"month"))}return t!==0&&r.push(L_(t,"day")),n!==BigInt(0)&&r.push(b1t(n)),r.length>0?r.join(" "):"00:00:00"}var I1t=class extends Si{constructor(e){super(),this.days=e}toDuckDBString(){return Z9(this.days)}};function T1t(e,t){if(t>0){let n=BigInt(10)**BigInt(t),r=e<0?-e:e,i=e<0?"-":"",s=String(r/n),o=String(r%n).padStart(t,"0");return`${i}${s}.${o}`}return String(e)}var E1t=class extends Si{constructor(e,t){super(),this.scaledValue=e,this.scale=t}toDuckDBString(){return T1t(this.scaledValue,this.scale)}},A1t=class extends Si{constructor(e,t,n){super(),this.months=e,this.days=t,this.microseconds=n}toDuckDBString(){return x1t(this.months,this.days,this.microseconds)}};function Cp(e){return e==null?"NULL":typeof e=="string"?`'${e.replace("'","''")}'`:String(e)}var M1t=class extends Si{constructor(e){super(),this.values=e}toDuckDBString(){return`[${this.values.map(Cp).join(", ")}]`}},$1t=class extends Si{constructor(e){super(),this.entries=e}toDuckDBString(){return`{${this.entries.map(({key:e,value:t})=>`${Cp(e)}: ${Cp(t)}`).join(", ")}}`}},N1t=class extends Si{constructor(e){super(),this.entries=e}toDuckDBString(){return`{${this.entries.map(({key:e,value:t})=>`${Cp(e)}: ${Cp(t)}`).join(", ")}}`}},D1t=class extends Si{constructor(e){super(),this.microseconds=e}toDuckDBString(){return tz(this.microseconds)}},k1t=class extends Si{constructor(e,t){super(),this.microseconds=e,this.timezone=t}toDuckDBString(){return Kv(this.microseconds,this.timezone)}},O1t=class extends Si{constructor(e){super(),this.milliseconds=e}toDuckDBString(){return _1t(this.milliseconds)}},F1t=class extends Si{constructor(e){super(),this.nanoseconds=e}toDuckDBString(){return S1t(this.nanoseconds)}},B1t=class extends Si{constructor(e){super(),this.seconds=e}toDuckDBString(){return w1t(this.seconds)}},R1t=new TextDecoder;function L1t(e,t,n){return e.getValid(t)?n(e,t):null}function Ln(e){return(t,n)=>L1t(t,n,e)}function C1t(e,t,n,r){return Array.from({length:n-t}).map((i,s)=>r(e,t+s))}function ez(e){return new BigInt64Array(e.values.buffer,e.values.byteOffset,e.values.length/2)}function Uy(e,t){return ez(e)[t]}function U1t(e,t){let n=ez(e),r=n[t*2];return(n[t*2+1]<<BigInt(64))+(r&BigInt.asUintN(64,BigInt(-1)))}function nz(e,t){let{values:n,valueOffsets:r}=e,i=r[t],s=r[t+1];return n.subarray(i,s)}function P1t(e,t){return null}function z1t(e,t){return e.values[t]}var is=Ln(z1t);function j1t(e,t){return new f1t(nz(e,t))}var V1t=Ln(j1t);function Y1t(e,t){return R1t.decode(nz(e,t))}var q1t=Ln(Y1t);function W1t(e,t){let n=e.offset+t;return(e.values[n>>3]&1<<n%8)!==0}var H1t=Ln(W1t);function G1t(e,t){return new E1t(U1t(e,t),e.type.scale)}var X1t=Ln(G1t);function Q1t(e,t){return new I1t(e.values[t])}var K1t=Ln(Q1t);function Z1t(e,t){return new D1t(e.values[t])}var J1t=Ln(Z1t);function tbt(e,t){return new B1t(Uy(e,t))}var ebt=Ln(tbt);function nbt(e,t){return new O1t(Uy(e,t))}var rbt=Ln(nbt);function ibt(e,t){return new k1t(Uy(e,t),e.type.timezone)}var sbt=Ln(ibt);function obt(e,t){return new F1t(Uy(e,t))}var abt=Ln(obt);function lbt(e,t){return new A1t(e.values[t*4],e.values[t*4+1],Uy(e,t*2+1)/BigInt(1e3))}var cbt=Ln(lbt);function ubt(e,t){let{children:n,valueOffsets:r}=e,i=r[t],s=r[t+1];return new M1t(vbt(n[0],i,s))}var fbt=Ln(ubt);function dbt(e,t){let n=[],{children:r,type:i}=e,s=i.children;for(let o=0;o<r.length;o++){let a=r[o],l=s[o].name,c=Up(a,t);n.push({key:l,value:c})}return new N1t(n)}var hbt=Ln(dbt);function pbt(e,t){let{children:n,typeIds:r}=e,i=r[t],s=e.type.typeIdToChildIndex[i],o=n[s];return Up(o,t)}function ybt(e,t){let n=[],{children:r,valueOffsets:i}=e,s=i[t],o=i[t+1],[a,l]=r[0].children;for(let c=s;c<o;c++)n.push({key:Up(a,c),value:Up(l,c)});return new $1t(n)}var mbt=Ln(ybt);function gbt(e,t){return e.dictionary&&e.dictionary.length>0?e.dictionary.get(e.values[t]):e.values[t]}var bbt=Ln(gbt);function rz(e){switch(e.typeId){case D.Null:return P1t;case D.Int:{let{isSigned:t,bitWidth:n}=e;if(t)switch(n){case 8:return is;case 16:return is;case 32:return is;case 64:return is;default:throw Error(`unexpected integer bit width: ${n}`)}else switch(n){case 8:return is;case 16:return is;case 32:return is;case 64:return is;default:throw Error(`unexpected integer bit width: ${n}`)}}case D.Float:{let{precision:t}=e;switch(t){case nn.HALF:throw Error("DuckDB does not support half-precision floats");case nn.SINGLE:return is;case nn.DOUBLE:return is;default:throw Error(`unexpected precision: ${t}`)}}case D.Binary:return V1t;case D.Utf8:return q1t;case D.Bool:return H1t;case D.Decimal:return X1t;case D.Date:{let{unit:t}=e;switch(t){case Pr.DAY:return K1t;case Pr.MILLISECOND:throw Error("DuckDB does not support millisecond-unit dates");default:throw Error(`unexpected date unit: ${t}`)}}case D.Time:{let{unit:t}=e;switch(t){case rt.SECOND:throw Error("DuckDB does not support second-unit times");case rt.MILLISECOND:throw Error("DuckDB does not support millisecond-unit times");case rt.MICROSECOND:return J1t;case rt.NANOSECOND:throw Error("DuckDB does not support nanosecond-unit times");default:throw Error(`unexpected time unit: ${t}`)}}case D.Timestamp:{let{unit:t,timezone:n}=e;switch(t){case rt.SECOND:if(n)throw Error("DuckDB does not support second-unit timestamps with time zone");return ebt;case rt.MILLISECOND:if(n)throw Error("DuckDB does not support millisecond-unit timestamps with time zone");return rbt;case rt.MICROSECOND:return sbt;case rt.NANOSECOND:if(n)throw Error("DuckDB does not support nanosecond-unit timestamps with time zone");return abt;default:throw Error(`unexpected time unit: ${t}`)}}case D.Interval:{let{unit:t}=e;switch(t){case yr.YEAR_MONTH:throw Error("DuckDB does not support year-month intervals");case yr.DAY_TIME:throw Error("DuckDB does not support day-time intervals");case yr.MONTH_DAY_NANO:return cbt;default:throw Error(`unexpected interval unit: ${t}`)}}case D.List:return fbt;case D.Struct:return hbt;case D.Union:{let{mode:t}=e;switch(t){case ln.Dense:throw Error("DuckDB does not support dense unions");case ln.Sparse:return pbt;default:throw Error(`unexpected union mode: ${t}`)}}case D.FixedSizeBinary:throw Error("DuckDB does not support fixed-size binary");case D.FixedSizeList:throw Error("DuckDB does not support fixed-size lists");case D.Map:return mbt;case D.Dictionary:return bbt;default:throw Error(`unexpected type id: ${e.typeId}`)}}function Up(e,t){return rz(e.type)(e,t)}function vbt(e,t,n){let r=rz(e.type);return C1t(e,t,n,r)}var wbt=class extends K9{constructor(e){super(),this.recordBatch=e}get columnCount(){return this.recordBatch.schema.fields.length}get rowCount(){return this.recordBatch.data.length}columnName(e){return this.recordBatch.schema.fields[e].name}columnType(e){let t=this.recordBatch.schema.fields[e];return hu(t.type)}value(e,t){let n=this.recordBatch.data.children[e];return Up(n,t)}},C_=Object.freeze({done:!0,value:void 0}),iz=class{constructor(e){this.recordBatchIterator=e}async next(){let{done:e,value:t}=await this.recordBatchIterator.next();return t?{done:!!e,value:new wbt(t)}:C_}async return(e){return this.recordBatchIterator.return&&await this.recordBatchIterator.return(),e?{done:!0,value:e}:C_}async throw(e){return this.recordBatchIterator.throw&&await this.recordBatchIterator.throw(e),C_}[Symbol.asyncIterator](){return this}};function r4(e,t){return[0,(t-e)*1e6]}var _bt=class extends K9{constructor(e){super(),this.iteratorDone=!1,this.totalRowsRead=0,this.batches=[],this.batchSizeRuns=[],this.iterator=e}get columnCount(){return this.batches.length===0?0:this.batches[0].columnCount}get rowCount(){return this.totalRowsRead}columnName(e){if(this.batches.length===0)throw Error("no column data");return this.batches[0].columnName(e)}columnType(e){if(this.batches.length===0)throw Error("no column data");return this.batches[0].columnType(e)}value(e,t){if(this.totalRowsRead===0)throw Error("no data");let n=0,r=t;for(let i of this.batchSizeRuns){if(r<i.rowCount){n+=Math.floor(r/i.batchSize);let s=r%i.batchSize;return this.batches[n].value(e,s)}n+=i.batchCount,r-=i.rowCount}throw Error(`Row index ${t} requested, but only ${this.totalRowsRead} row have been read so far.`)}get done(){return this.iteratorDone}async readAll(){return this.read()}async readUntil(e){return this.read(e)}async read(e){for(;!(this.iteratorDone||e!==void 0&&this.totalRowsRead>=e);){let{value:t,done:n}=await this.iterator.next();t&&(this.updateBatchSizeRuns(t),this.batches.push(t),this.totalRowsRead+=t.rowCount),n&&(this.iteratorDone=n)}}updateBatchSizeRuns(e){if(this.batchSizeRuns.length>0){let t=this.batchSizeRuns[this.batchSizeRuns.length-1];if(t.batchSize===e.rowCount){t.batchCount+=1,t.rowCount+=t.batchSize;return}}this.batchSizeRuns.push({batchCount:1,batchSize:e.rowCount,rowCount:e.rowCount})}},j0,c4,U_=((c4=(j0=performance==null?void 0:performance.now)==null?void 0:j0.bind)==null?void 0:c4.call(j0,performance))??(()=>Date.now()/1e3),P_=class{constructor(e,t,n){this.connection=null,this.deferredConnection=e,this.query=t,this.args=n,this.creationTime=U_()}async run(e){let t=U_(),n=await this.sendQuery(),r=new iz(n),i=new _bt(r);await i.readAll();let s=U_();return{type:"materialized",initialQueuePosition:e,queueTime:r4(this.creationTime,t),executionTime:r4(t,s),data:i}}async cancel(){return(this.connection||await this.getConnection()).cancelSent()}async getConnection(){return this.connection=await this.deferredConnection,this.connection}async sendQuery(){var t;let e=this.connection||await this.getConnection();return this.args&&((t=this.args)==null?void 0:t.length)>0?(await e.prepare(this.query)).send(...this.args):e.send(this.query)}},i4=class{constructor(e,t,n){this.connection=null,this.deferredConnection=e,this.query=t,this.args=n}async run(){let e=await this.sendQuery();return{type:"streaming",arrowStream:e,dataStream:new iz(e)}}async cancel(){return(this.connection||await this.getConnection()).cancelSent()}async getConnection(){return this.connection=await this.deferredConnection,this.connection}async sendQuery(){var t;let e=this.connection||await this.getConnection();return this.args&&((t=this.args)==null?void 0:t.length)>0?(await e.prepare(this.query)).send(this.args):e.send(this.query)}};function s4(){throw new Error("should never be called")}function Sbt(){let e=s4,t=s4;return{promise:new Promise((n,r)=>{e=n,t=r}),resolve:e,reject:t}}var xbt=class{constructor(e){this.nextTaskId=1,this.queuedTaskIds=[],this.queuedTasksById={},this.processingQueue=!1,this.logSink=e}enqueueTask(e){let t=this.createTaskId();return this.logDebug(`enqueueTask: creating task id = ${t}`),this.addQueuedTask({id:t,task:e,state:0,deferred:Sbt(),cancelled:!1,initialQueuePosition:this.queuedTaskIds.length}),this.scheduleProcessQueueIfNeeded(),t}async cancelTask(e,t){this.logDebug(`cancelTask(${e}): called`);let n=this.queuedTasksById[e];if(!n)throw new Error(`Task with id ${e} not found`);switch(n.state){case 0:return n.cancelled?this.logDebug(`cancelTask(${e}): cancelling pending task (already cancelled)`):(this.logDebug(`cancelTask(${e}): cancelling pending task`),n.cancelled=!0,n.deferred.reject(new Error(t??"pending task cancelled")),this.scheduleProcessQueueIfNeeded()),!0;case 1:return this.logDebug(`cancelTask(${e}): cancelling running task`),n.cancelled=!0,n.task.cancel();case 2:return this.logDebug(`cancelTask(${e}): can't cancel resolved task`),!1;case 3:return this.logDebug(`cancelTask(${e}): can't cancel rejected task`),!1;default:throw n.state,new Error("unreachable")}}taskResult(e){this.logDebug(`taskResults(${e}): called`);let t=this.queuedTasksById[e];if(!t)throw new Error(`Task with id ${e} not found`);return t.deferred.promise}logDebug(e){this.logSink&&this.logSink.debug(e)}logWarn(e){this.logSink&&this.logSink.warn(e)}createTaskId(){return`t${this.nextTaskId++}`}addQueuedTask(e){this.queuedTaskIds.push(e.id),this.queuedTasksById[e.id]=e}scheduleProcessQueueIfNeeded(){this.processingQueue?this.logDebug("scheduleProcessQueueIfNeeded: processQueue already scheduled"):(this.logDebug("scheduleProcessQueueIfNeeded: scheduling processQueue"),this.processingQueue=!0,setTimeout(()=>{this.processQueue(),this.processingQueue=!1},0))}processQueue(){this.logDebug("processQueue: processing started");let e;do e=this.processFirstQueuedTask();while(e);this.logDebug("processQueue: processing completed")}processFirstQueuedTask(){if(this.queuedTaskIds.length===0)return this.logDebug("processFirstQueuedTask: queue empty"),!1;let e=this.queuedTaskIds[0];this.logDebug(`processFirstQueuedTask: processing task ${e}`);let t=this.queuedTasksById[e];if(!t)return this.logWarn(`processFirstQueuedTask: task ${e} not found in map`),this.queuedTaskIds.shift(),!0;switch(t.state){case 0:return t.cancelled?(this.logDebug(`processFirstQueuedTask: removing cancelled pending task ${e} from queue`),this.queuedTaskIds.shift(),delete this.queuedTasksById[t.id],!0):(this.logDebug(`processFirstQueuedTask: running pending task ${e}`),t.state=1,t.task.run(t.initialQueuePosition).then(n=>{this.logDebug(`processFirstQueuedTask: task ${e} resolved`),t.state=2,t.deferred.resolve(n)}).catch(n=>{this.logDebug(`processFirstQueuedTask: task ${e} rejected`),t.state=3,t.deferred.reject(n)}).finally(()=>{this.scheduleProcessQueueIfNeeded()}),!1);case 1:return this.logDebug(`processFirstQueuedTask: task ${e} at front of queue is already running`),!1;case 2:case 3:return this.logDebug(`processFirstQueuedTask: task ${e} at front of queue is completed, removing from queue`),this.queuedTaskIds.shift(),delete this.queuedTasksById[t.id],!0;default:throw t.state,new Error("unreachable")}}},$m=null;async function Ibt(e){let t=await(await Tbt(e)).connect();return e.skipWelcomePack||await t.query("PRAGMA MD_USE_DEFAULT"),await oz(t,e.version,e.duckDBAssetsURLPrefix),t}async function Tbt(e){return $m||($m=Abt(e),$m)}function sz(e){return e?e.endsWith("/")?e:`${e}/`:"https://app.motherduck.com/"}async function Ebt(e){let t=`${e}duckdb-assets.json`,n=await(await fetch(t)).json();return n.coi&&(n.coi.mainModule=e+n.coi.mainModule,n.coi.mainWorker=e+n.coi.mainWorker,n.coi.pthreadWorker=e+n.coi.pthreadWorker),n.mvp&&(n.mvp.mainModule=e+n.mvp.mainModule,n.mvp.mainWorker=e+n.mvp.mainWorker),n.eh&&(n.eh.mainModule=e+n.eh.mainModule,n.eh.mainWorker=e+n.eh.mainWorker),n}function o4(e,t){return URL.createObjectURL(new Blob([`importScripts("${t}");`],{type:"text/javascript"}))}async function Abt(e){let t=await $bt(),n=sz(e.duckDBAssetsURLPrefix),r=await Ebt(n),i=e.useDuckDBWasmCOI?r.coi:r.eh;if(!i)throw new Error("Could not find DuckDB WASM asset URLs in duckdb-assets.json");let s=/^https?:\/\//.test(n),o=s?o4(n,i.mainWorker):i.mainWorker,a=s&&i.pthreadWorker?o4(n,i.pthreadWorker):i.pthreadWorker,l=new Worker(o);t||l.addEventListener("message",p=>{if(p&&p.data&&p.data.type==="Initialize"){let g=new Worker(p.data.workerUrl);URL.revokeObjectURL(p.data.workerUrl),g.postMessage(p.data,[p.data.port])}});let c=new Jgt,u=new o1t(c,l);await u.instantiate(i.mainModule,a),s&&(URL.revokeObjectURL(o),a&&URL.revokeObjectURL(a));let f=await u.connect();await oz(f,e.version,e.duckDBAssetsURLPrefix),await f.query("LOAD motherduck;");let d=new URL(e.mdServerURL||"https://api.motherduck.com");await f.query(`SET motherduck_host='${d.hostname}';`),d.port&&await f.query(`SET motherduck_port='${d.port}';`),d.protocol==="http:"&&await f.query("SET motherduck_use_tls=false;"),await f.query(`SET motherduck_token='${e.mdToken}';`);let h=!1;for(let p=0;p<6e3;++p){if(await Mbt(f)){h=!0;break}await new Promise(g=>setTimeout(g,10))}if(!h)throw new Error("Could not initialize worker after 1 minute.");return $m=u,u}async function Mbt(e){return(await e.query("from MD_IS_NETWORK_READY();")).toArray()[0].Success}async function oz(e,t,n){let r=sz(n),i=t;i||(i=(await(await fetch(`${r}version`)).json()).version);let s=!i||i.startsWith("DEV-")?"":i,o=r==="/"?`${window.origin}${s.length>0?"/":""}`:r;await e.query(`SET custom_extension_repository="${o}${s}";`)}async function $bt(){return new Promise(e=>{let t=URL.createObjectURL(new Blob(["self.postMessage({ canCreateWorker: !!self.Worker });"],{type:"application/javascript"})),n=new Worker(t);URL.revokeObjectURL(t),n.addEventListener("message",r);function r(i){n.removeEventListener("message",r),n.terminate(),e(i.data.canCreateWorker)}})}function Nbt(e){let t=/^[^{]*({.*})/.exec(e);if(t){let n=t[1];try{let r=JSON.parse(n);if(r.message)return r.message}catch{return e}}return e}function Dbt(e){return typeof e=="object"&&e!==null&&"message"in e&&typeof e.message=="string"}function kbt(e){if(Dbt(e))return e.message;try{return JSON.stringify(e)}catch{return String(e)}}var Obt=new Map([[/CREATE SECRET/i,"CREATE SECRET [REDACTED]"],[/s3_secret_access_key/i,"S3_SECRET_ACCESS_KEY [REDACTED]"],[/motherduck_token/i,"motherduck_token [REDACTED]"]]);function Yd(e){for(let[t,n]of Obt)if(t.test(e))return n;return e}var Fbt=0;function Bbt(){return`MDConnection_${Fbt++}`}var Gf,Rbt=(Gf=class{constructor(t,n,r){this.params=t,this.deferredDdbConnection=n,this.id=r,this.sequencer=new xbt(t.logSink)}static create(t){let n=Bbt(),r=Ibt(t),i=new Gf(t,r,n);return this.idMap[n]=i,i}async isInitialized(){return await this.deferredDdbConnection,!0}static getById(t){return this.idMap[t]}async tokenize(t){return(await this.deferredDdbConnection).bindings.tokenize(t)}enqueueQuery(t,n){var i;let r=this.sequencer.enqueueTask(new P_(this.deferredDdbConnection,t,n));return(i=this.params.logSink)==null||i.debug("enqueueQuery called",{id:r,query:Yd(t)}),r}async safeEvaluateQuery(t){try{return{status:"success",result:await this.evaluateQuery(t)}}catch(n){return{status:"error",err:n}}}async safeEvaluatePreparedStatement(t,...n){try{return{status:"success",result:await this.evaluatePreparedStatement(t,n)}}catch(r){return{status:"error",err:r}}}async safeEvaluateStreamingQuery(t){try{return{status:"success",result:await this.evaluateStreamingQuery(t)}}catch(n){return{status:"error",err:n}}}async safeEvaluateStreamingPreparedStatement(t,n){try{return{status:"success",result:await this.evaluateStreamingPreparedStatement(t,n)}}catch(r){return{status:"error",err:r}}}async safeEvaluateQueuedQuery(t){try{return{status:"success",result:await this.evaluateQueuedQuery(t)}}catch(n){return{status:"error",err:n}}}async evaluateQuery(t){var n;return(n=this.params.logSink)==null||n.debug("evaluateQuery called",{query:Yd(t)}),this.evaluateExclusive(new P_(this.deferredDdbConnection,t))}async evaluatePreparedStatement(t,n){var r;return(r=this.params.logSink)==null||r.debug("evaluatePreparedStatement called",{query:Yd(t)}),this.evaluateExclusive(new P_(this.deferredDdbConnection,t,n))}async evaluateStreamingQuery(t){var n;return(n=this.params.logSink)==null||n.debug("evaluateStreamingQuery called",{query:Yd(t)}),this.evaluateExclusive(new i4(this.deferredDdbConnection,t,void 0))}async evaluateStreamingPreparedStatement(t,n){var r;return(r=this.params.logSink)==null||r.debug("evaluateStreamingPreparedStatement called",{query:Yd(t)}),this.evaluateExclusive(new i4(this.deferredDdbConnection,t,n))}async evaluateExclusive(t){let n=this.sequencer.enqueueTask(t);return this.sequencer.taskResult(n).catch(a4)}async evaluateQueuedQuery(t){var n;return(n=this.params.logSink)==null||n.debug("evaluateQueuedQuery called",{queryId:t}),this.sequencer.taskResult(t).catch(a4)}async cancelQuery(t,n){var r;return(r=this.params.logSink)==null||r.debug("cancelQuery called",{queryId:t}),this.sequencer.cancelTask(t,n)}async close(){return(await this.deferredDdbConnection).close()}},Gf.idMap={},Gf);function a4(e){throw new Error(Nbt(kbt(e)))}async function l4(e){if(e.type==="streaming"){const t=await e.arrowStream.readAll();return new On(t)}else throw Error("expected streaming result")}function Lbt(e){const t=Rbt.create({mdToken:e});return{query:async n=>{const{sql:r,type:i}=n,s=await t.evaluateStreamingQuery(r);switch(i){case"arrow":return l4(s);case"json":return Array.from(await l4(s));default:case"exec":return}}}}function Cbt(){const[e,t]=Mr.useState(!1),n=Mr.useCallback(async r=>{Xn().databaseConnector(Lbt(r)),t(!0)},[]);return qt.jsxs(qt.Fragment,{children:[qt.jsx(Yyt,{}),qt.jsx("div",{id:"content-pane",children:e?qt.jsx(Qyt,{}):qt.jsx(jyt,{connect:n})})]})}z_.createRoot(document.getElementById("root")).render(qt.jsx(Dz.StrictMode,{children:qt.jsx(Cbt,{})}));
