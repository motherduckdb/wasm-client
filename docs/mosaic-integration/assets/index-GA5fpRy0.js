var Dz=Object.defineProperty;var Oz=(e,t,n)=>t in e?Dz(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var te=(e,t,n)=>(Oz(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function E4(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var A4={exports:{}},Mb={},M4={exports:{}},zt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hp=Symbol.for("react.element"),Fz=Symbol.for("react.portal"),Bz=Symbol.for("react.fragment"),Lz=Symbol.for("react.strict_mode"),Rz=Symbol.for("react.profiler"),Cz=Symbol.for("react.provider"),Uz=Symbol.for("react.context"),Pz=Symbol.for("react.forward_ref"),zz=Symbol.for("react.suspense"),jz=Symbol.for("react.memo"),Vz=Symbol.for("react.lazy"),KE=Symbol.iterator;function Yz(e){return e===null||typeof e!="object"?null:(e=KE&&e[KE]||e["@@iterator"],typeof e=="function"?e:null)}var $4={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N4=Object.assign,k4={};function Gf(e,t,n){this.props=e,this.context=t,this.refs=k4,this.updater=n||$4}Gf.prototype.isReactComponent={};Gf.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Gf.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function D4(){}D4.prototype=Gf.prototype;function qx(e,t,n){this.props=e,this.context=t,this.refs=k4,this.updater=n||$4}var Wx=qx.prototype=new D4;Wx.constructor=qx;N4(Wx,Gf.prototype);Wx.isPureReactComponent=!0;var ZE=Array.isArray,O4=Object.prototype.hasOwnProperty,Hx={current:null},F4={key:!0,ref:!0,__self:!0,__source:!0};function B4(e,t,n){var r,i={},s=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)O4.call(t,r)&&!F4.hasOwnProperty(r)&&(i[r]=t[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Hp,type:e,key:s,ref:o,props:i,_owner:Hx.current}}function qz(e,t){return{$$typeof:Hp,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Gx(e){return typeof e=="object"&&e!==null&&e.$$typeof===Hp}function Wz(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var JE=/\/+/g;function cw(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Wz(""+e.key):t.toString(36)}function H0(e,t,n,r,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Hp:case Fz:o=!0}}if(o)return o=e,i=i(o),e=r===""?"."+cw(o,0):r,ZE(i)?(n="",e!=null&&(n=e.replace(JE,"$&/")+"/"),H0(i,t,n,"",function(c){return c})):i!=null&&(Gx(i)&&(i=qz(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(JE,"$&/")+"/")+e)),t.push(i)),1;if(o=0,r=r===""?".":r+":",ZE(e))for(var a=0;a<e.length;a++){s=e[a];var l=r+cw(s,a);o+=H0(s,t,n,l,i)}else if(l=Yz(e),typeof l=="function")for(e=l.call(e),a=0;!(s=e.next()).done;)s=s.value,l=r+cw(s,a++),o+=H0(s,t,n,l,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Hy(e,t,n){if(e==null)return e;var r=[],i=0;return H0(e,r,"","",function(s){return t.call(n,s,i++)}),r}function Hz(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var lr={current:null},G0={transition:null},Gz={ReactCurrentDispatcher:lr,ReactCurrentBatchConfig:G0,ReactCurrentOwner:Hx};zt.Children={map:Hy,forEach:function(e,t,n){Hy(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Hy(e,function(){t++}),t},toArray:function(e){return Hy(e,function(t){return t})||[]},only:function(e){if(!Gx(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};zt.Component=Gf;zt.Fragment=Bz;zt.Profiler=Rz;zt.PureComponent=qx;zt.StrictMode=Lz;zt.Suspense=zz;zt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Gz;zt.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=N4({},e.props),i=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=Hx.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(l in t)O4.call(t,l)&&!F4.hasOwnProperty(l)&&(r[l]=t[l]===void 0&&a!==void 0?a[l]:t[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Hp,type:e.type,key:i,ref:s,props:r,_owner:o}};zt.createContext=function(e){return e={$$typeof:Uz,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Cz,_context:e},e.Consumer=e};zt.createElement=B4;zt.createFactory=function(e){var t=B4.bind(null,e);return t.type=e,t};zt.createRef=function(){return{current:null}};zt.forwardRef=function(e){return{$$typeof:Pz,render:e}};zt.isValidElement=Gx;zt.lazy=function(e){return{$$typeof:Vz,_payload:{_status:-1,_result:e},_init:Hz}};zt.memo=function(e,t){return{$$typeof:jz,type:e,compare:t===void 0?null:t}};zt.startTransition=function(e){var t=G0.transition;G0.transition={};try{e()}finally{G0.transition=t}};zt.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};zt.useCallback=function(e,t){return lr.current.useCallback(e,t)};zt.useContext=function(e){return lr.current.useContext(e)};zt.useDebugValue=function(){};zt.useDeferredValue=function(e){return lr.current.useDeferredValue(e)};zt.useEffect=function(e,t){return lr.current.useEffect(e,t)};zt.useId=function(){return lr.current.useId()};zt.useImperativeHandle=function(e,t,n){return lr.current.useImperativeHandle(e,t,n)};zt.useInsertionEffect=function(e,t){return lr.current.useInsertionEffect(e,t)};zt.useLayoutEffect=function(e,t){return lr.current.useLayoutEffect(e,t)};zt.useMemo=function(e,t){return lr.current.useMemo(e,t)};zt.useReducer=function(e,t,n){return lr.current.useReducer(e,t,n)};zt.useRef=function(e){return lr.current.useRef(e)};zt.useState=function(e){return lr.current.useState(e)};zt.useSyncExternalStore=function(e,t,n){return lr.current.useSyncExternalStore(e,t,n)};zt.useTransition=function(){return lr.current.useTransition()};zt.version="18.2.0";M4.exports=zt;var An=M4.exports;const Xz=E4(An);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qz=An,Kz=Symbol.for("react.element"),Zz=Symbol.for("react.fragment"),Jz=Object.prototype.hasOwnProperty,tj=Qz.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ej={key:!0,ref:!0,__self:!0,__source:!0};function L4(e,t,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)Jz.call(t,r)&&!ej.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:Kz,type:e,key:s,ref:o,props:i,_owner:tj.current}}Mb.Fragment=Zz;Mb.jsx=L4;Mb.jsxs=L4;A4.exports=Mb;var Ut=A4.exports,K_={},R4={exports:{}},Hr={},C4={exports:{}},U4={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(O,C){var F=O.length;O.push(C);t:for(;0<F;){var P=F-1>>>1,z=O[P];if(0<i(z,C))O[P]=C,O[F]=z,F=P;else break t}}function n(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var C=O[0],F=O.pop();if(F!==C){O[0]=F;t:for(var P=0,z=O.length,H=z>>>1;P<H;){var X=2*(P+1)-1,tt=O[X],Z=X+1,Y=O[Z];if(0>i(tt,F))Z<z&&0>i(Y,tt)?(O[P]=Y,O[Z]=F,P=Z):(O[P]=tt,O[X]=F,P=X);else if(Z<z&&0>i(Y,F))O[P]=Y,O[Z]=F,P=Z;else break t}}return C}function i(O,C){var F=O.sortIndex-C.sortIndex;return F!==0?F:O.id-C.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,f=null,d=3,h=!1,p=!1,g=!1,v=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(O){for(var C=n(c);C!==null;){if(C.callback===null)r(c);else if(C.startTime<=O)r(c),C.sortIndex=C.expirationTime,t(l,C);else break;C=n(c)}}function w(O){if(g=!1,b(O),!p)if(n(l)!==null)p=!0,N(S);else{var C=n(c);C!==null&&B(w,C.startTime-O)}}function S(O,C){p=!1,g&&(g=!1,y(E),E=-1),h=!0;var F=d;try{for(b(C),f=n(l);f!==null&&(!(f.expirationTime>C)||O&&!A());){var P=f.callback;if(typeof P=="function"){f.callback=null,d=f.priorityLevel;var z=P(f.expirationTime<=C);C=e.unstable_now(),typeof z=="function"?f.callback=z:f===n(l)&&r(l),b(C)}else r(l);f=n(l)}if(f!==null)var H=!0;else{var X=n(c);X!==null&&B(w,X.startTime-C),H=!1}return H}finally{f=null,d=F,h=!1}}var _=!1,x=null,E=-1,k=5,I=-1;function A(){return!(e.unstable_now()-I<k)}function D(){if(x!==null){var O=e.unstable_now();I=O;var C=!0;try{C=x(!0,O)}finally{C?L():(_=!1,x=null)}}else _=!1}var L;if(typeof m=="function")L=function(){m(D)};else if(typeof MessageChannel<"u"){var T=new MessageChannel,M=T.port2;T.port1.onmessage=D,L=function(){M.postMessage(null)}}else L=function(){v(D,0)};function N(O){x=O,_||(_=!0,L())}function B(O,C){E=v(function(){O(e.unstable_now())},C)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(O){O.callback=null},e.unstable_continueExecution=function(){p||h||(p=!0,N(S))},e.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<O?Math.floor(1e3/O):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(O){switch(d){case 1:case 2:case 3:var C=3;break;default:C=d}var F=d;d=C;try{return O()}finally{d=F}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(O,C){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var F=d;d=O;try{return C()}finally{d=F}},e.unstable_scheduleCallback=function(O,C,F){var P=e.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?P+F:P):F=P,O){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=F+z,O={id:u++,callback:C,priorityLevel:O,startTime:F,expirationTime:z,sortIndex:-1},F>P?(O.sortIndex=F,t(c,O),n(l)===null&&O===n(c)&&(g?(y(E),E=-1):g=!0,B(w,F-P))):(O.sortIndex=z,t(l,O),p||h||(p=!0,N(S))),O},e.unstable_shouldYield=A,e.unstable_wrapCallback=function(O){var C=d;return function(){var F=d;d=C;try{return O.apply(this,arguments)}finally{d=F}}}})(U4);C4.exports=U4;var nj=C4.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var P4=An,zr=nj;function q(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var z4=new Set,Ch={};function Ac(e,t){uf(e,t),uf(e+"Capture",t)}function uf(e,t){for(Ch[e]=t,e=0;e<t.length;e++)z4.add(t[e])}var No=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Z_=Object.prototype.hasOwnProperty,rj=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,tA={},eA={};function ij(e){return Z_.call(eA,e)?!0:Z_.call(tA,e)?!1:rj.test(e)?eA[e]=!0:(tA[e]=!0,!1)}function sj(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function oj(e,t,n,r){if(t===null||typeof t>"u"||sj(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function cr(e,t,n,r,i,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var kn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){kn[e]=new cr(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];kn[t]=new cr(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){kn[e]=new cr(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){kn[e]=new cr(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){kn[e]=new cr(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){kn[e]=new cr(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){kn[e]=new cr(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){kn[e]=new cr(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){kn[e]=new cr(e,5,!1,e.toLowerCase(),null,!1,!1)});var Xx=/[\-:]([a-z])/g;function Qx(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Xx,Qx);kn[t]=new cr(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Xx,Qx);kn[t]=new cr(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Xx,Qx);kn[t]=new cr(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){kn[e]=new cr(e,1,!1,e.toLowerCase(),null,!1,!1)});kn.xlinkHref=new cr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){kn[e]=new cr(e,1,!1,e.toLowerCase(),null,!0,!0)});function Kx(e,t,n,r){var i=kn.hasOwnProperty(t)?kn[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(oj(t,n,i,r)&&(n=null),r||i===null?ij(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Po=P4.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Gy=Symbol.for("react.element"),gu=Symbol.for("react.portal"),bu=Symbol.for("react.fragment"),Zx=Symbol.for("react.strict_mode"),J_=Symbol.for("react.profiler"),j4=Symbol.for("react.provider"),V4=Symbol.for("react.context"),Jx=Symbol.for("react.forward_ref"),t2=Symbol.for("react.suspense"),e2=Symbol.for("react.suspense_list"),tI=Symbol.for("react.memo"),ia=Symbol.for("react.lazy"),Y4=Symbol.for("react.offscreen"),nA=Symbol.iterator;function vd(e){return e===null||typeof e!="object"?null:(e=nA&&e[nA]||e["@@iterator"],typeof e=="function"?e:null)}var Ve=Object.assign,uw;function jd(e){if(uw===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);uw=t&&t[1]||""}return`
`+uw+e}var fw=!1;function dw(e,t){if(!e||fw)return"";fw=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=o&&0<=a);break}}}finally{fw=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?jd(e):""}function aj(e){switch(e.tag){case 5:return jd(e.type);case 16:return jd("Lazy");case 13:return jd("Suspense");case 19:return jd("SuspenseList");case 0:case 2:case 15:return e=dw(e.type,!1),e;case 11:return e=dw(e.type.render,!1),e;case 1:return e=dw(e.type,!0),e;default:return""}}function n2(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case bu:return"Fragment";case gu:return"Portal";case J_:return"Profiler";case Zx:return"StrictMode";case t2:return"Suspense";case e2:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case V4:return(e.displayName||"Context")+".Consumer";case j4:return(e._context.displayName||"Context")+".Provider";case Jx:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case tI:return t=e.displayName||null,t!==null?t:n2(e.type)||"Memo";case ia:t=e._payload,e=e._init;try{return n2(e(t))}catch{}}return null}function lj(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return n2(t);case 8:return t===Zx?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Fa(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function q4(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function cj(e){var t=q4(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Xy(e){e._valueTracker||(e._valueTracker=cj(e))}function W4(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=q4(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Rm(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function r2(e,t){var n=t.checked;return Ve({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function rA(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Fa(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function H4(e,t){t=t.checked,t!=null&&Kx(e,"checked",t,!1)}function i2(e,t){H4(e,t);var n=Fa(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?s2(e,t.type,n):t.hasOwnProperty("defaultValue")&&s2(e,t.type,Fa(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function iA(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function s2(e,t,n){(t!=="number"||Rm(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Vd=Array.isArray;function Pu(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Fa(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function o2(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(q(91));return Ve({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function sA(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(q(92));if(Vd(n)){if(1<n.length)throw Error(q(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Fa(n)}}function G4(e,t){var n=Fa(t.value),r=Fa(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function oA(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function X4(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function a2(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?X4(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Qy,Q4=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Qy=Qy||document.createElement("div"),Qy.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Qy.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Uh(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var gh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},uj=["Webkit","ms","Moz","O"];Object.keys(gh).forEach(function(e){uj.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),gh[t]=gh[e]})});function K4(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||gh.hasOwnProperty(e)&&gh[e]?(""+t).trim():t+"px"}function Z4(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=K4(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var fj=Ve({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function l2(e,t){if(t){if(fj[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(q(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(q(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(q(61))}if(t.style!=null&&typeof t.style!="object")throw Error(q(62))}}function c2(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var u2=null;function eI(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var f2=null,zu=null,ju=null;function aA(e){if(e=Qp(e)){if(typeof f2!="function")throw Error(q(280));var t=e.stateNode;t&&(t=Ob(t),f2(e.stateNode,e.type,t))}}function J4(e){zu?ju?ju.push(e):ju=[e]:zu=e}function tk(){if(zu){var e=zu,t=ju;if(ju=zu=null,aA(e),t)for(e=0;e<t.length;e++)aA(t[e])}}function ek(e,t){return e(t)}function nk(){}var hw=!1;function rk(e,t,n){if(hw)return e(t,n);hw=!0;try{return ek(e,t,n)}finally{hw=!1,(zu!==null||ju!==null)&&(nk(),tk())}}function Ph(e,t){var n=e.stateNode;if(n===null)return null;var r=Ob(n);if(r===null)return null;n=r[t];t:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break t;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(q(231,t,typeof n));return n}var d2=!1;if(No)try{var wd={};Object.defineProperty(wd,"passive",{get:function(){d2=!0}}),window.addEventListener("test",wd,wd),window.removeEventListener("test",wd,wd)}catch{d2=!1}function dj(e,t,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var bh=!1,Cm=null,Um=!1,h2=null,hj={onError:function(e){bh=!0,Cm=e}};function pj(e,t,n,r,i,s,o,a,l){bh=!1,Cm=null,dj.apply(hj,arguments)}function yj(e,t,n,r,i,s,o,a,l){if(pj.apply(this,arguments),bh){if(bh){var c=Cm;bh=!1,Cm=null}else throw Error(q(198));Um||(Um=!0,h2=c)}}function Mc(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function ik(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function lA(e){if(Mc(e)!==e)throw Error(q(188))}function mj(e){var t=e.alternate;if(!t){if(t=Mc(e),t===null)throw Error(q(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return lA(i),e;if(s===r)return lA(i),t;s=s.sibling}throw Error(q(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(q(189))}}if(n.alternate!==r)throw Error(q(190))}if(n.tag!==3)throw Error(q(188));return n.stateNode.current===n?e:t}function sk(e){return e=mj(e),e!==null?ok(e):null}function ok(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=ok(e);if(t!==null)return t;e=e.sibling}return null}var ak=zr.unstable_scheduleCallback,cA=zr.unstable_cancelCallback,gj=zr.unstable_shouldYield,bj=zr.unstable_requestPaint,Ze=zr.unstable_now,vj=zr.unstable_getCurrentPriorityLevel,nI=zr.unstable_ImmediatePriority,lk=zr.unstable_UserBlockingPriority,Pm=zr.unstable_NormalPriority,wj=zr.unstable_LowPriority,ck=zr.unstable_IdlePriority,$b=null,As=null;function _j(e){if(As&&typeof As.onCommitFiberRoot=="function")try{As.onCommitFiberRoot($b,e,void 0,(e.current.flags&128)===128)}catch{}}var Ci=Math.clz32?Math.clz32:Ij,Sj=Math.log,xj=Math.LN2;function Ij(e){return e>>>=0,e===0?32:31-(Sj(e)/xj|0)|0}var Ky=64,Zy=4194304;function Yd(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function zm(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Yd(a):(s&=o,s!==0&&(r=Yd(s)))}else o=n&~i,o!==0?r=Yd(o):s!==0&&(r=Yd(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Ci(t),i=1<<n,r|=e[n],t&=~i;return r}function Tj(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ej(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-Ci(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=Tj(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}function p2(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function uk(){var e=Ky;return Ky<<=1,!(Ky&4194240)&&(Ky=64),e}function pw(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Gp(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ci(t),e[t]=n}function Aj(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-Ci(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}function rI(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Ci(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var he=0;function fk(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var dk,iI,hk,pk,yk,y2=!1,Jy=[],_a=null,Sa=null,xa=null,zh=new Map,jh=new Map,fa=[],Mj="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function uA(e,t){switch(e){case"focusin":case"focusout":_a=null;break;case"dragenter":case"dragleave":Sa=null;break;case"mouseover":case"mouseout":xa=null;break;case"pointerover":case"pointerout":zh.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":jh.delete(t.pointerId)}}function _d(e,t,n,r,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},t!==null&&(t=Qp(t),t!==null&&iI(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function $j(e,t,n,r,i){switch(t){case"focusin":return _a=_d(_a,e,t,n,r,i),!0;case"dragenter":return Sa=_d(Sa,e,t,n,r,i),!0;case"mouseover":return xa=_d(xa,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return zh.set(s,_d(zh.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,jh.set(s,_d(jh.get(s)||null,e,t,n,r,i)),!0}return!1}function mk(e){var t=Cl(e.target);if(t!==null){var n=Mc(t);if(n!==null){if(t=n.tag,t===13){if(t=ik(n),t!==null){e.blockedOn=t,yk(e.priority,function(){hk(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function X0(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=m2(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);u2=r,n.target.dispatchEvent(r),u2=null}else return t=Qp(n),t!==null&&iI(t),e.blockedOn=n,!1;t.shift()}return!0}function fA(e,t,n){X0(e)&&n.delete(t)}function Nj(){y2=!1,_a!==null&&X0(_a)&&(_a=null),Sa!==null&&X0(Sa)&&(Sa=null),xa!==null&&X0(xa)&&(xa=null),zh.forEach(fA),jh.forEach(fA)}function Sd(e,t){e.blockedOn===t&&(e.blockedOn=null,y2||(y2=!0,zr.unstable_scheduleCallback(zr.unstable_NormalPriority,Nj)))}function Vh(e){function t(i){return Sd(i,e)}if(0<Jy.length){Sd(Jy[0],e);for(var n=1;n<Jy.length;n++){var r=Jy[n];r.blockedOn===e&&(r.blockedOn=null)}}for(_a!==null&&Sd(_a,e),Sa!==null&&Sd(Sa,e),xa!==null&&Sd(xa,e),zh.forEach(t),jh.forEach(t),n=0;n<fa.length;n++)r=fa[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<fa.length&&(n=fa[0],n.blockedOn===null);)mk(n),n.blockedOn===null&&fa.shift()}var Vu=Po.ReactCurrentBatchConfig,jm=!0;function kj(e,t,n,r){var i=he,s=Vu.transition;Vu.transition=null;try{he=1,sI(e,t,n,r)}finally{he=i,Vu.transition=s}}function Dj(e,t,n,r){var i=he,s=Vu.transition;Vu.transition=null;try{he=4,sI(e,t,n,r)}finally{he=i,Vu.transition=s}}function sI(e,t,n,r){if(jm){var i=m2(e,t,n,r);if(i===null)Iw(e,t,r,Vm,n),uA(e,r);else if($j(i,e,t,n,r))r.stopPropagation();else if(uA(e,r),t&4&&-1<Mj.indexOf(e)){for(;i!==null;){var s=Qp(i);if(s!==null&&dk(s),s=m2(e,t,n,r),s===null&&Iw(e,t,r,Vm,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Iw(e,t,r,null,n)}}var Vm=null;function m2(e,t,n,r){if(Vm=null,e=eI(r),e=Cl(e),e!==null)if(t=Mc(e),t===null)e=null;else if(n=t.tag,n===13){if(e=ik(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Vm=e,null}function gk(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(vj()){case nI:return 1;case lk:return 4;case Pm:case wj:return 16;case ck:return 536870912;default:return 16}default:return 16}}var ga=null,oI=null,Q0=null;function bk(){if(Q0)return Q0;var e,t=oI,n=t.length,r,i="value"in ga?ga.value:ga.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[s-r];r++);return Q0=i.slice(e,1<r?1-r:void 0)}function K0(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function t0(){return!0}function dA(){return!1}function Gr(e){function t(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?t0:dA,this.isPropagationStopped=dA,this}return Ve(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=t0)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=t0)},persist:function(){},isPersistent:t0}),t}var Xf={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},aI=Gr(Xf),Xp=Ve({},Xf,{view:0,detail:0}),Oj=Gr(Xp),yw,mw,xd,Nb=Ve({},Xp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:lI,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==xd&&(xd&&e.type==="mousemove"?(yw=e.screenX-xd.screenX,mw=e.screenY-xd.screenY):mw=yw=0,xd=e),yw)},movementY:function(e){return"movementY"in e?e.movementY:mw}}),hA=Gr(Nb),Fj=Ve({},Nb,{dataTransfer:0}),Bj=Gr(Fj),Lj=Ve({},Xp,{relatedTarget:0}),gw=Gr(Lj),Rj=Ve({},Xf,{animationName:0,elapsedTime:0,pseudoElement:0}),Cj=Gr(Rj),Uj=Ve({},Xf,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Pj=Gr(Uj),zj=Ve({},Xf,{data:0}),pA=Gr(zj),jj={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Vj={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Yj={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qj(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Yj[e])?!!t[e]:!1}function lI(){return qj}var Wj=Ve({},Xp,{key:function(e){if(e.key){var t=jj[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=K0(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Vj[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:lI,charCode:function(e){return e.type==="keypress"?K0(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?K0(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Hj=Gr(Wj),Gj=Ve({},Nb,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),yA=Gr(Gj),Xj=Ve({},Xp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:lI}),Qj=Gr(Xj),Kj=Ve({},Xf,{propertyName:0,elapsedTime:0,pseudoElement:0}),Zj=Gr(Kj),Jj=Ve({},Nb,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),tV=Gr(Jj),eV=[9,13,27,32],cI=No&&"CompositionEvent"in window,vh=null;No&&"documentMode"in document&&(vh=document.documentMode);var nV=No&&"TextEvent"in window&&!vh,vk=No&&(!cI||vh&&8<vh&&11>=vh),mA=" ",gA=!1;function wk(e,t){switch(e){case"keyup":return eV.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _k(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var vu=!1;function rV(e,t){switch(e){case"compositionend":return _k(t);case"keypress":return t.which!==32?null:(gA=!0,mA);case"textInput":return e=t.data,e===mA&&gA?null:e;default:return null}}function iV(e,t){if(vu)return e==="compositionend"||!cI&&wk(e,t)?(e=bk(),Q0=oI=ga=null,vu=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return vk&&t.locale!=="ko"?null:t.data;default:return null}}var sV={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function bA(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!sV[e.type]:t==="textarea"}function Sk(e,t,n,r){J4(r),t=Ym(t,"onChange"),0<t.length&&(n=new aI("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var wh=null,Yh=null;function oV(e){Ok(e,0)}function kb(e){var t=Su(e);if(W4(t))return e}function aV(e,t){if(e==="change")return t}var xk=!1;if(No){var bw;if(No){var vw="oninput"in document;if(!vw){var vA=document.createElement("div");vA.setAttribute("oninput","return;"),vw=typeof vA.oninput=="function"}bw=vw}else bw=!1;xk=bw&&(!document.documentMode||9<document.documentMode)}function wA(){wh&&(wh.detachEvent("onpropertychange",Ik),Yh=wh=null)}function Ik(e){if(e.propertyName==="value"&&kb(Yh)){var t=[];Sk(t,Yh,e,eI(e)),rk(oV,t)}}function lV(e,t,n){e==="focusin"?(wA(),wh=t,Yh=n,wh.attachEvent("onpropertychange",Ik)):e==="focusout"&&wA()}function cV(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return kb(Yh)}function uV(e,t){if(e==="click")return kb(t)}function fV(e,t){if(e==="input"||e==="change")return kb(t)}function dV(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var zi=typeof Object.is=="function"?Object.is:dV;function qh(e,t){if(zi(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Z_.call(t,i)||!zi(e[i],t[i]))return!1}return!0}function _A(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function SA(e,t){var n=_A(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}t:{for(;n;){if(n.nextSibling){n=n.nextSibling;break t}n=n.parentNode}n=void 0}n=_A(n)}}function Tk(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Tk(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Ek(){for(var e=window,t=Rm();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Rm(e.document)}return t}function uI(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function hV(e){var t=Ek(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Tk(n.ownerDocument.documentElement,n)){if(r!==null&&uI(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=SA(n,s);var o=SA(n,r);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var pV=No&&"documentMode"in document&&11>=document.documentMode,wu=null,g2=null,_h=null,b2=!1;function xA(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;b2||wu==null||wu!==Rm(r)||(r=wu,"selectionStart"in r&&uI(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),_h&&qh(_h,r)||(_h=r,r=Ym(g2,"onSelect"),0<r.length&&(t=new aI("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=wu)))}function e0(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _u={animationend:e0("Animation","AnimationEnd"),animationiteration:e0("Animation","AnimationIteration"),animationstart:e0("Animation","AnimationStart"),transitionend:e0("Transition","TransitionEnd")},ww={},Ak={};No&&(Ak=document.createElement("div").style,"AnimationEvent"in window||(delete _u.animationend.animation,delete _u.animationiteration.animation,delete _u.animationstart.animation),"TransitionEvent"in window||delete _u.transitionend.transition);function Db(e){if(ww[e])return ww[e];if(!_u[e])return e;var t=_u[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Ak)return ww[e]=t[n];return e}var Mk=Db("animationend"),$k=Db("animationiteration"),Nk=Db("animationstart"),kk=Db("transitionend"),Dk=new Map,IA="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function nl(e,t){Dk.set(e,t),Ac(t,[e])}for(var _w=0;_w<IA.length;_w++){var Sw=IA[_w],yV=Sw.toLowerCase(),mV=Sw[0].toUpperCase()+Sw.slice(1);nl(yV,"on"+mV)}nl(Mk,"onAnimationEnd");nl($k,"onAnimationIteration");nl(Nk,"onAnimationStart");nl("dblclick","onDoubleClick");nl("focusin","onFocus");nl("focusout","onBlur");nl(kk,"onTransitionEnd");uf("onMouseEnter",["mouseout","mouseover"]);uf("onMouseLeave",["mouseout","mouseover"]);uf("onPointerEnter",["pointerout","pointerover"]);uf("onPointerLeave",["pointerout","pointerover"]);Ac("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ac("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ac("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ac("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ac("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ac("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gV=new Set("cancel close invalid load scroll toggle".split(" ").concat(qd));function TA(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,yj(r,t,void 0,e),e.currentTarget=null}function Ok(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;t:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break t;TA(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break t;TA(i,a,c),s=l}}}if(Um)throw e=h2,Um=!1,h2=null,e}function Ee(e,t){var n=t[x2];n===void 0&&(n=t[x2]=new Set);var r=e+"__bubble";n.has(r)||(Fk(t,e,2,!1),n.add(r))}function xw(e,t,n){var r=0;t&&(r|=4),Fk(n,e,r,t)}var n0="_reactListening"+Math.random().toString(36).slice(2);function Wh(e){if(!e[n0]){e[n0]=!0,z4.forEach(function(n){n!=="selectionchange"&&(gV.has(n)||xw(n,!1,e),xw(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[n0]||(t[n0]=!0,xw("selectionchange",!1,t))}}function Fk(e,t,n,r){switch(gk(t)){case 1:var i=kj;break;case 4:i=Dj;break;default:i=sI}n=i.bind(null,t,n,e),i=void 0,!d2||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Iw(e,t,n,r,i){var s=r;if(!(t&1)&&!(t&2)&&r!==null)t:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Cl(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue t}a=a.parentNode}}r=r.return}rk(function(){var c=s,u=eI(n),f=[];t:{var d=Dk.get(e);if(d!==void 0){var h=aI,p=e;switch(e){case"keypress":if(K0(n)===0)break t;case"keydown":case"keyup":h=Hj;break;case"focusin":p="focus",h=gw;break;case"focusout":p="blur",h=gw;break;case"beforeblur":case"afterblur":h=gw;break;case"click":if(n.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=hA;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=Bj;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=Qj;break;case Mk:case $k:case Nk:h=Cj;break;case kk:h=Zj;break;case"scroll":h=Oj;break;case"wheel":h=tV;break;case"copy":case"cut":case"paste":h=Pj;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=yA}var g=(t&4)!==0,v=!g&&e==="scroll",y=g?d!==null?d+"Capture":null:d;g=[];for(var m=c,b;m!==null;){b=m;var w=b.stateNode;if(b.tag===5&&w!==null&&(b=w,y!==null&&(w=Ph(m,y),w!=null&&g.push(Hh(m,w,b)))),v)break;m=m.return}0<g.length&&(d=new h(d,p,null,n,u),f.push({event:d,listeners:g}))}}if(!(t&7)){t:{if(d=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",d&&n!==u2&&(p=n.relatedTarget||n.fromElement)&&(Cl(p)||p[ko]))break t;if((h||d)&&(d=u.window===u?u:(d=u.ownerDocument)?d.defaultView||d.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=c,p=p?Cl(p):null,p!==null&&(v=Mc(p),p!==v||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=c),h!==p)){if(g=hA,w="onMouseLeave",y="onMouseEnter",m="mouse",(e==="pointerout"||e==="pointerover")&&(g=yA,w="onPointerLeave",y="onPointerEnter",m="pointer"),v=h==null?d:Su(h),b=p==null?d:Su(p),d=new g(w,m+"leave",h,n,u),d.target=v,d.relatedTarget=b,w=null,Cl(u)===c&&(g=new g(y,m+"enter",p,n,u),g.target=b,g.relatedTarget=v,w=g),v=w,h&&p)e:{for(g=h,y=p,m=0,b=g;b;b=Lc(b))m++;for(b=0,w=y;w;w=Lc(w))b++;for(;0<m-b;)g=Lc(g),m--;for(;0<b-m;)y=Lc(y),b--;for(;m--;){if(g===y||y!==null&&g===y.alternate)break e;g=Lc(g),y=Lc(y)}g=null}else g=null;h!==null&&EA(f,d,h,g,!1),p!==null&&v!==null&&EA(f,v,p,g,!0)}}t:{if(d=c?Su(c):window,h=d.nodeName&&d.nodeName.toLowerCase(),h==="select"||h==="input"&&d.type==="file")var S=aV;else if(bA(d))if(xk)S=fV;else{S=cV;var _=lV}else(h=d.nodeName)&&h.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(S=uV);if(S&&(S=S(e,c))){Sk(f,S,n,u);break t}_&&_(e,d,c),e==="focusout"&&(_=d._wrapperState)&&_.controlled&&d.type==="number"&&s2(d,"number",d.value)}switch(_=c?Su(c):window,e){case"focusin":(bA(_)||_.contentEditable==="true")&&(wu=_,g2=c,_h=null);break;case"focusout":_h=g2=wu=null;break;case"mousedown":b2=!0;break;case"contextmenu":case"mouseup":case"dragend":b2=!1,xA(f,n,u);break;case"selectionchange":if(pV)break;case"keydown":case"keyup":xA(f,n,u)}var x;if(cI)t:{switch(e){case"compositionstart":var E="onCompositionStart";break t;case"compositionend":E="onCompositionEnd";break t;case"compositionupdate":E="onCompositionUpdate";break t}E=void 0}else vu?wk(e,n)&&(E="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(vk&&n.locale!=="ko"&&(vu||E!=="onCompositionStart"?E==="onCompositionEnd"&&vu&&(x=bk()):(ga=u,oI="value"in ga?ga.value:ga.textContent,vu=!0)),_=Ym(c,E),0<_.length&&(E=new pA(E,e,null,n,u),f.push({event:E,listeners:_}),x?E.data=x:(x=_k(n),x!==null&&(E.data=x)))),(x=nV?rV(e,n):iV(e,n))&&(c=Ym(c,"onBeforeInput"),0<c.length&&(u=new pA("onBeforeInput","beforeinput",null,n,u),f.push({event:u,listeners:c}),u.data=x))}Ok(f,t)})}function Hh(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ym(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Ph(e,n),s!=null&&r.unshift(Hh(e,s,i)),s=Ph(e,t),s!=null&&r.push(Hh(e,s,i))),e=e.return}return r}function Lc(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function EA(e,t,n,r,i){for(var s=t._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=Ph(n,s),l!=null&&o.unshift(Hh(n,l,a))):i||(l=Ph(n,s),l!=null&&o.push(Hh(n,l,a)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var bV=/\r\n?/g,vV=/\u0000|\uFFFD/g;function AA(e){return(typeof e=="string"?e:""+e).replace(bV,`
`).replace(vV,"")}function r0(e,t,n){if(t=AA(t),AA(e)!==t&&n)throw Error(q(425))}function qm(){}var v2=null,w2=null;function _2(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var S2=typeof setTimeout=="function"?setTimeout:void 0,wV=typeof clearTimeout=="function"?clearTimeout:void 0,MA=typeof Promise=="function"?Promise:void 0,_V=typeof queueMicrotask=="function"?queueMicrotask:typeof MA<"u"?function(e){return MA.resolve(null).then(e).catch(SV)}:S2;function SV(e){setTimeout(function(){throw e})}function Tw(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),Vh(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Vh(t)}function Ia(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function $A(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Qf=Math.random().toString(36).slice(2),ps="__reactFiber$"+Qf,Gh="__reactProps$"+Qf,ko="__reactContainer$"+Qf,x2="__reactEvents$"+Qf,xV="__reactListeners$"+Qf,IV="__reactHandles$"+Qf;function Cl(e){var t=e[ps];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ko]||n[ps]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=$A(e);e!==null;){if(n=e[ps])return n;e=$A(e)}return t}e=n,n=e.parentNode}return null}function Qp(e){return e=e[ps]||e[ko],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Su(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(q(33))}function Ob(e){return e[Gh]||null}var I2=[],xu=-1;function rl(e){return{current:e}}function Ae(e){0>xu||(e.current=I2[xu],I2[xu]=null,xu--)}function Ie(e,t){xu++,I2[xu]=e.current,e.current=t}var Ba={},Yn=rl(Ba),br=rl(!1),sc=Ba;function ff(e,t){var n=e.type.contextTypes;if(!n)return Ba;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function vr(e){return e=e.childContextTypes,e!=null}function Wm(){Ae(br),Ae(Yn)}function NA(e,t,n){if(Yn.current!==Ba)throw Error(q(168));Ie(Yn,t),Ie(br,n)}function Bk(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(q(108,lj(e)||"Unknown",i));return Ve({},n,r)}function Hm(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ba,sc=Yn.current,Ie(Yn,e),Ie(br,br.current),!0}function kA(e,t,n){var r=e.stateNode;if(!r)throw Error(q(169));n?(e=Bk(e,t,sc),r.__reactInternalMemoizedMergedChildContext=e,Ae(br),Ae(Yn),Ie(Yn,e)):Ae(br),Ie(br,n)}var co=null,Fb=!1,Ew=!1;function Lk(e){co===null?co=[e]:co.push(e)}function TV(e){Fb=!0,Lk(e)}function il(){if(!Ew&&co!==null){Ew=!0;var e=0,t=he;try{var n=co;for(he=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}co=null,Fb=!1}catch(i){throw co!==null&&(co=co.slice(e+1)),ak(nI,il),i}finally{he=t,Ew=!1}}return null}var Iu=[],Tu=0,Gm=null,Xm=0,ri=[],ii=0,oc=null,yo=1,mo="";function Sl(e,t){Iu[Tu++]=Xm,Iu[Tu++]=Gm,Gm=e,Xm=t}function Rk(e,t,n){ri[ii++]=yo,ri[ii++]=mo,ri[ii++]=oc,oc=e;var r=yo;e=mo;var i=32-Ci(r)-1;r&=~(1<<i),n+=1;var s=32-Ci(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,yo=1<<32-Ci(t)+i|n<<i|r,mo=s+e}else yo=1<<s|n<<i|r,mo=e}function fI(e){e.return!==null&&(Sl(e,1),Rk(e,1,0))}function dI(e){for(;e===Gm;)Gm=Iu[--Tu],Iu[Tu]=null,Xm=Iu[--Tu],Iu[Tu]=null;for(;e===oc;)oc=ri[--ii],ri[ii]=null,mo=ri[--ii],ri[ii]=null,yo=ri[--ii],ri[ii]=null}var Ur=null,Fr=null,Ne=!1,Oi=null;function Ck(e,t){var n=li(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function DA(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ur=e,Fr=Ia(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ur=e,Fr=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=oc!==null?{id:yo,overflow:mo}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=li(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Ur=e,Fr=null,!0):!1;default:return!1}}function T2(e){return(e.mode&1)!==0&&(e.flags&128)===0}function E2(e){if(Ne){var t=Fr;if(t){var n=t;if(!DA(e,t)){if(T2(e))throw Error(q(418));t=Ia(n.nextSibling);var r=Ur;t&&DA(e,t)?Ck(r,n):(e.flags=e.flags&-4097|2,Ne=!1,Ur=e)}}else{if(T2(e))throw Error(q(418));e.flags=e.flags&-4097|2,Ne=!1,Ur=e}}}function OA(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ur=e}function i0(e){if(e!==Ur)return!1;if(!Ne)return OA(e),Ne=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!_2(e.type,e.memoizedProps)),t&&(t=Fr)){if(T2(e))throw Uk(),Error(q(418));for(;t;)Ck(e,t),t=Ia(t.nextSibling)}if(OA(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(q(317));t:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Fr=Ia(e.nextSibling);break t}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Fr=null}}else Fr=Ur?Ia(e.stateNode.nextSibling):null;return!0}function Uk(){for(var e=Fr;e;)e=Ia(e.nextSibling)}function df(){Fr=Ur=null,Ne=!1}function hI(e){Oi===null?Oi=[e]:Oi.push(e)}var EV=Po.ReactCurrentBatchConfig;function Mi(e,t){if(e&&e.defaultProps){t=Ve({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}var Qm=rl(null),Km=null,Eu=null,pI=null;function yI(){pI=Eu=Km=null}function mI(e){var t=Qm.current;Ae(Qm),e._currentValue=t}function A2(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Yu(e,t){Km=e,pI=Eu=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(mr=!0),e.firstContext=null)}function gi(e){var t=e._currentValue;if(pI!==e)if(e={context:e,memoizedValue:t,next:null},Eu===null){if(Km===null)throw Error(q(308));Eu=e,Km.dependencies={lanes:0,firstContext:e}}else Eu=Eu.next=e;return t}var Ul=null;function gI(e){Ul===null?Ul=[e]:Ul.push(e)}function Pk(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,gI(t)):(n.next=i.next,i.next=n),t.interleaved=n,Do(e,r)}function Do(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var sa=!1;function bI(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function zk(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function So(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ta(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Xt&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Do(e,n)}return i=r.interleaved,i===null?(t.next=t,gI(r)):(t.next=i.next,i.next=t),r.interleaved=t,Do(e,n)}function Z0(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,rI(e,n)}}function FA(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Zm(e,t,n,r){var i=e.updateQueue;sa=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=e.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var f=i.baseState;o=0,u=c=l=null,a=s;do{var d=a.lane,h=a.eventTime;if((r&d)===d){u!==null&&(u=u.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});t:{var p=e,g=a;switch(d=t,h=n,g.tag){case 1:if(p=g.payload,typeof p=="function"){f=p.call(h,f,d);break t}f=p;break t;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,d=typeof p=="function"?p.call(h,f,d):p,d==null)break t;f=Ve({},f,d);break t;case 2:sa=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,d=i.effects,d===null?i.effects=[a]:d.push(a))}else h={eventTime:h,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=h,l=f):u=u.next=h,o|=d;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;d=a,a=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(u===null&&(l=f),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);lc|=o,e.lanes=o,e.memoizedState=f}}function BA(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(q(191,i));i.call(r)}}}var jk=new P4.Component().refs;function M2(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Ve({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Bb={isMounted:function(e){return(e=e._reactInternals)?Mc(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=nr(),i=Aa(e),s=So(r,i);s.payload=t,n!=null&&(s.callback=n),t=Ta(e,s,i),t!==null&&(Ui(t,e,i,r),Z0(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=nr(),i=Aa(e),s=So(r,i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=Ta(e,s,i),t!==null&&(Ui(t,e,i,r),Z0(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=nr(),r=Aa(e),i=So(n,r);i.tag=2,t!=null&&(i.callback=t),t=Ta(e,i,r),t!==null&&(Ui(t,e,r,n),Z0(t,e,r))}};function LA(e,t,n,r,i,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,o):t.prototype&&t.prototype.isPureReactComponent?!qh(n,r)||!qh(i,s):!0}function Vk(e,t,n){var r=!1,i=Ba,s=t.contextType;return typeof s=="object"&&s!==null?s=gi(s):(i=vr(t)?sc:Yn.current,r=t.contextTypes,s=(r=r!=null)?ff(e,i):Ba),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Bb,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function RA(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Bb.enqueueReplaceState(t,t.state,null)}function $2(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=jk,bI(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=gi(s):(s=vr(t)?sc:Yn.current,i.context=ff(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(M2(e,t,s,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&Bb.enqueueReplaceState(i,i.state,null),Zm(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Id(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(q(309));var r=n.stateNode}if(!r)throw Error(q(147,e));var i=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var a=i.refs;a===jk&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(q(284));if(!n._owner)throw Error(q(290,e))}return e}function s0(e,t){throw e=Object.prototype.toString.call(t),Error(q(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function CA(e){var t=e._init;return t(e._payload)}function Yk(e){function t(y,m){if(e){var b=y.deletions;b===null?(y.deletions=[m],y.flags|=16):b.push(m)}}function n(y,m){if(!e)return null;for(;m!==null;)t(y,m),m=m.sibling;return null}function r(y,m){for(y=new Map;m!==null;)m.key!==null?y.set(m.key,m):y.set(m.index,m),m=m.sibling;return y}function i(y,m){return y=Ma(y,m),y.index=0,y.sibling=null,y}function s(y,m,b){return y.index=b,e?(b=y.alternate,b!==null?(b=b.index,b<m?(y.flags|=2,m):b):(y.flags|=2,m)):(y.flags|=1048576,m)}function o(y){return e&&y.alternate===null&&(y.flags|=2),y}function a(y,m,b,w){return m===null||m.tag!==6?(m=Ow(b,y.mode,w),m.return=y,m):(m=i(m,b),m.return=y,m)}function l(y,m,b,w){var S=b.type;return S===bu?u(y,m,b.props.children,w,b.key):m!==null&&(m.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===ia&&CA(S)===m.type)?(w=i(m,b.props),w.ref=Id(y,m,b),w.return=y,w):(w=im(b.type,b.key,b.props,null,y.mode,w),w.ref=Id(y,m,b),w.return=y,w)}function c(y,m,b,w){return m===null||m.tag!==4||m.stateNode.containerInfo!==b.containerInfo||m.stateNode.implementation!==b.implementation?(m=Fw(b,y.mode,w),m.return=y,m):(m=i(m,b.children||[]),m.return=y,m)}function u(y,m,b,w,S){return m===null||m.tag!==7?(m=Kl(b,y.mode,w,S),m.return=y,m):(m=i(m,b),m.return=y,m)}function f(y,m,b){if(typeof m=="string"&&m!==""||typeof m=="number")return m=Ow(""+m,y.mode,b),m.return=y,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Gy:return b=im(m.type,m.key,m.props,null,y.mode,b),b.ref=Id(y,null,m),b.return=y,b;case gu:return m=Fw(m,y.mode,b),m.return=y,m;case ia:var w=m._init;return f(y,w(m._payload),b)}if(Vd(m)||vd(m))return m=Kl(m,y.mode,b,null),m.return=y,m;s0(y,m)}return null}function d(y,m,b,w){var S=m!==null?m.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return S!==null?null:a(y,m,""+b,w);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Gy:return b.key===S?l(y,m,b,w):null;case gu:return b.key===S?c(y,m,b,w):null;case ia:return S=b._init,d(y,m,S(b._payload),w)}if(Vd(b)||vd(b))return S!==null?null:u(y,m,b,w,null);s0(y,b)}return null}function h(y,m,b,w,S){if(typeof w=="string"&&w!==""||typeof w=="number")return y=y.get(b)||null,a(m,y,""+w,S);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Gy:return y=y.get(w.key===null?b:w.key)||null,l(m,y,w,S);case gu:return y=y.get(w.key===null?b:w.key)||null,c(m,y,w,S);case ia:var _=w._init;return h(y,m,b,_(w._payload),S)}if(Vd(w)||vd(w))return y=y.get(b)||null,u(m,y,w,S,null);s0(m,w)}return null}function p(y,m,b,w){for(var S=null,_=null,x=m,E=m=0,k=null;x!==null&&E<b.length;E++){x.index>E?(k=x,x=null):k=x.sibling;var I=d(y,x,b[E],w);if(I===null){x===null&&(x=k);break}e&&x&&I.alternate===null&&t(y,x),m=s(I,m,E),_===null?S=I:_.sibling=I,_=I,x=k}if(E===b.length)return n(y,x),Ne&&Sl(y,E),S;if(x===null){for(;E<b.length;E++)x=f(y,b[E],w),x!==null&&(m=s(x,m,E),_===null?S=x:_.sibling=x,_=x);return Ne&&Sl(y,E),S}for(x=r(y,x);E<b.length;E++)k=h(x,y,E,b[E],w),k!==null&&(e&&k.alternate!==null&&x.delete(k.key===null?E:k.key),m=s(k,m,E),_===null?S=k:_.sibling=k,_=k);return e&&x.forEach(function(A){return t(y,A)}),Ne&&Sl(y,E),S}function g(y,m,b,w){var S=vd(b);if(typeof S!="function")throw Error(q(150));if(b=S.call(b),b==null)throw Error(q(151));for(var _=S=null,x=m,E=m=0,k=null,I=b.next();x!==null&&!I.done;E++,I=b.next()){x.index>E?(k=x,x=null):k=x.sibling;var A=d(y,x,I.value,w);if(A===null){x===null&&(x=k);break}e&&x&&A.alternate===null&&t(y,x),m=s(A,m,E),_===null?S=A:_.sibling=A,_=A,x=k}if(I.done)return n(y,x),Ne&&Sl(y,E),S;if(x===null){for(;!I.done;E++,I=b.next())I=f(y,I.value,w),I!==null&&(m=s(I,m,E),_===null?S=I:_.sibling=I,_=I);return Ne&&Sl(y,E),S}for(x=r(y,x);!I.done;E++,I=b.next())I=h(x,y,E,I.value,w),I!==null&&(e&&I.alternate!==null&&x.delete(I.key===null?E:I.key),m=s(I,m,E),_===null?S=I:_.sibling=I,_=I);return e&&x.forEach(function(D){return t(y,D)}),Ne&&Sl(y,E),S}function v(y,m,b,w){if(typeof b=="object"&&b!==null&&b.type===bu&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Gy:t:{for(var S=b.key,_=m;_!==null;){if(_.key===S){if(S=b.type,S===bu){if(_.tag===7){n(y,_.sibling),m=i(_,b.props.children),m.return=y,y=m;break t}}else if(_.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===ia&&CA(S)===_.type){n(y,_.sibling),m=i(_,b.props),m.ref=Id(y,_,b),m.return=y,y=m;break t}n(y,_);break}else t(y,_);_=_.sibling}b.type===bu?(m=Kl(b.props.children,y.mode,w,b.key),m.return=y,y=m):(w=im(b.type,b.key,b.props,null,y.mode,w),w.ref=Id(y,m,b),w.return=y,y=w)}return o(y);case gu:t:{for(_=b.key;m!==null;){if(m.key===_)if(m.tag===4&&m.stateNode.containerInfo===b.containerInfo&&m.stateNode.implementation===b.implementation){n(y,m.sibling),m=i(m,b.children||[]),m.return=y,y=m;break t}else{n(y,m);break}else t(y,m);m=m.sibling}m=Fw(b,y.mode,w),m.return=y,y=m}return o(y);case ia:return _=b._init,v(y,m,_(b._payload),w)}if(Vd(b))return p(y,m,b,w);if(vd(b))return g(y,m,b,w);s0(y,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,m!==null&&m.tag===6?(n(y,m.sibling),m=i(m,b),m.return=y,y=m):(n(y,m),m=Ow(b,y.mode,w),m.return=y,y=m),o(y)):n(y,m)}return v}var hf=Yk(!0),qk=Yk(!1),Kp={},Ms=rl(Kp),Xh=rl(Kp),Qh=rl(Kp);function Pl(e){if(e===Kp)throw Error(q(174));return e}function vI(e,t){switch(Ie(Qh,t),Ie(Xh,e),Ie(Ms,Kp),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:a2(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=a2(t,e)}Ae(Ms),Ie(Ms,t)}function pf(){Ae(Ms),Ae(Xh),Ae(Qh)}function Wk(e){Pl(Qh.current);var t=Pl(Ms.current),n=a2(t,e.type);t!==n&&(Ie(Xh,e),Ie(Ms,n))}function wI(e){Xh.current===e&&(Ae(Ms),Ae(Xh))}var Le=rl(0);function Jm(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Aw=[];function _I(){for(var e=0;e<Aw.length;e++)Aw[e]._workInProgressVersionPrimary=null;Aw.length=0}var J0=Po.ReactCurrentDispatcher,Mw=Po.ReactCurrentBatchConfig,ac=0,ze=null,ln=null,gn=null,tg=!1,Sh=!1,Kh=0,AV=0;function On(){throw Error(q(321))}function SI(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!zi(e[n],t[n]))return!1;return!0}function xI(e,t,n,r,i,s){if(ac=s,ze=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,J0.current=e===null||e.memoizedState===null?kV:DV,e=n(r,i),Sh){s=0;do{if(Sh=!1,Kh=0,25<=s)throw Error(q(301));s+=1,gn=ln=null,t.updateQueue=null,J0.current=OV,e=n(r,i)}while(Sh)}if(J0.current=eg,t=ln!==null&&ln.next!==null,ac=0,gn=ln=ze=null,tg=!1,t)throw Error(q(300));return e}function II(){var e=Kh!==0;return Kh=0,e}function ls(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gn===null?ze.memoizedState=gn=e:gn=gn.next=e,gn}function bi(){if(ln===null){var e=ze.alternate;e=e!==null?e.memoizedState:null}else e=ln.next;var t=gn===null?ze.memoizedState:gn.next;if(t!==null)gn=t,ln=e;else{if(e===null)throw Error(q(310));ln=e,e={memoizedState:ln.memoizedState,baseState:ln.baseState,baseQueue:ln.baseQueue,queue:ln.queue,next:null},gn===null?ze.memoizedState=gn=e:gn=gn.next=e}return gn}function Zh(e,t){return typeof t=="function"?t(e):t}function $w(e){var t=bi(),n=t.queue;if(n===null)throw Error(q(311));n.lastRenderedReducer=e;var r=ln,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((ac&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var f={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=f,o=r):l=l.next=f,ze.lanes|=u,lc|=u}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,zi(r,t.memoizedState)||(mr=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=l,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do s=i.lane,ze.lanes|=s,lc|=s,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Nw(e){var t=bi(),n=t.queue;if(n===null)throw Error(q(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=e(s,o.action),o=o.next;while(o!==i);zi(s,t.memoizedState)||(mr=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Hk(){}function Gk(e,t){var n=ze,r=bi(),i=t(),s=!zi(r.memoizedState,i);if(s&&(r.memoizedState=i,mr=!0),r=r.queue,TI(Kk.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||gn!==null&&gn.memoizedState.tag&1){if(n.flags|=2048,Jh(9,Qk.bind(null,n,r,i,t),void 0,null),_n===null)throw Error(q(349));ac&30||Xk(n,t,i)}return i}function Xk(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=ze.updateQueue,t===null?(t={lastEffect:null,stores:null},ze.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Qk(e,t,n,r){t.value=n,t.getSnapshot=r,Zk(t)&&Jk(e)}function Kk(e,t,n){return n(function(){Zk(t)&&Jk(e)})}function Zk(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!zi(e,n)}catch{return!0}}function Jk(e){var t=Do(e,1);t!==null&&Ui(t,e,1,-1)}function UA(e){var t=ls();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Zh,lastRenderedState:e},t.queue=e,e=e.dispatch=NV.bind(null,ze,e),[t.memoizedState,e]}function Jh(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=ze.updateQueue,t===null?(t={lastEffect:null,stores:null},ze.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function tD(){return bi().memoizedState}function tm(e,t,n,r){var i=ls();ze.flags|=e,i.memoizedState=Jh(1|t,n,void 0,r===void 0?null:r)}function Lb(e,t,n,r){var i=bi();r=r===void 0?null:r;var s=void 0;if(ln!==null){var o=ln.memoizedState;if(s=o.destroy,r!==null&&SI(r,o.deps)){i.memoizedState=Jh(t,n,s,r);return}}ze.flags|=e,i.memoizedState=Jh(1|t,n,s,r)}function PA(e,t){return tm(8390656,8,e,t)}function TI(e,t){return Lb(2048,8,e,t)}function eD(e,t){return Lb(4,2,e,t)}function nD(e,t){return Lb(4,4,e,t)}function rD(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function iD(e,t,n){return n=n!=null?n.concat([e]):null,Lb(4,4,rD.bind(null,t,e),n)}function EI(){}function sD(e,t){var n=bi();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&SI(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function oD(e,t){var n=bi();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&SI(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function aD(e,t,n){return ac&21?(zi(n,t)||(n=uk(),ze.lanes|=n,lc|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,mr=!0),e.memoizedState=n)}function MV(e,t){var n=he;he=n!==0&&4>n?n:4,e(!0);var r=Mw.transition;Mw.transition={};try{e(!1),t()}finally{he=n,Mw.transition=r}}function lD(){return bi().memoizedState}function $V(e,t,n){var r=Aa(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},cD(e))uD(t,n);else if(n=Pk(e,t,n,r),n!==null){var i=nr();Ui(n,e,r,i),fD(n,t,r)}}function NV(e,t,n){var r=Aa(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(cD(e))uD(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,zi(a,o)){var l=t.interleaved;l===null?(i.next=i,gI(t)):(i.next=l.next,l.next=i),t.interleaved=i;return}}catch{}finally{}n=Pk(e,t,i,r),n!==null&&(i=nr(),Ui(n,e,r,i),fD(n,t,r))}}function cD(e){var t=e.alternate;return e===ze||t!==null&&t===ze}function uD(e,t){Sh=tg=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function fD(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,rI(e,n)}}var eg={readContext:gi,useCallback:On,useContext:On,useEffect:On,useImperativeHandle:On,useInsertionEffect:On,useLayoutEffect:On,useMemo:On,useReducer:On,useRef:On,useState:On,useDebugValue:On,useDeferredValue:On,useTransition:On,useMutableSource:On,useSyncExternalStore:On,useId:On,unstable_isNewReconciler:!1},kV={readContext:gi,useCallback:function(e,t){return ls().memoizedState=[e,t===void 0?null:t],e},useContext:gi,useEffect:PA,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,tm(4194308,4,rD.bind(null,t,e),n)},useLayoutEffect:function(e,t){return tm(4194308,4,e,t)},useInsertionEffect:function(e,t){return tm(4,2,e,t)},useMemo:function(e,t){var n=ls();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ls();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=$V.bind(null,ze,e),[r.memoizedState,e]},useRef:function(e){var t=ls();return e={current:e},t.memoizedState=e},useState:UA,useDebugValue:EI,useDeferredValue:function(e){return ls().memoizedState=e},useTransition:function(){var e=UA(!1),t=e[0];return e=MV.bind(null,e[1]),ls().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ze,i=ls();if(Ne){if(n===void 0)throw Error(q(407));n=n()}else{if(n=t(),_n===null)throw Error(q(349));ac&30||Xk(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,PA(Kk.bind(null,r,s,e),[e]),r.flags|=2048,Jh(9,Qk.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=ls(),t=_n.identifierPrefix;if(Ne){var n=mo,r=yo;n=(r&~(1<<32-Ci(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Kh++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=AV++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},DV={readContext:gi,useCallback:sD,useContext:gi,useEffect:TI,useImperativeHandle:iD,useInsertionEffect:eD,useLayoutEffect:nD,useMemo:oD,useReducer:$w,useRef:tD,useState:function(){return $w(Zh)},useDebugValue:EI,useDeferredValue:function(e){var t=bi();return aD(t,ln.memoizedState,e)},useTransition:function(){var e=$w(Zh)[0],t=bi().memoizedState;return[e,t]},useMutableSource:Hk,useSyncExternalStore:Gk,useId:lD,unstable_isNewReconciler:!1},OV={readContext:gi,useCallback:sD,useContext:gi,useEffect:TI,useImperativeHandle:iD,useInsertionEffect:eD,useLayoutEffect:nD,useMemo:oD,useReducer:Nw,useRef:tD,useState:function(){return Nw(Zh)},useDebugValue:EI,useDeferredValue:function(e){var t=bi();return ln===null?t.memoizedState=e:aD(t,ln.memoizedState,e)},useTransition:function(){var e=Nw(Zh)[0],t=bi().memoizedState;return[e,t]},useMutableSource:Hk,useSyncExternalStore:Gk,useId:lD,unstable_isNewReconciler:!1};function yf(e,t){try{var n="",r=t;do n+=aj(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function kw(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function N2(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var FV=typeof WeakMap=="function"?WeakMap:Map;function dD(e,t,n){n=So(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){rg||(rg=!0,P2=r),N2(e,t)},n}function hD(e,t,n){n=So(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){N2(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){N2(e,t),typeof r!="function"&&(Ea===null?Ea=new Set([this]):Ea.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function zA(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new FV;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=GV.bind(null,e,t,n),t.then(e,e))}function jA(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function VA(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=So(-1,1),t.tag=2,Ta(n,t,1))),n.lanes|=1),e)}var BV=Po.ReactCurrentOwner,mr=!1;function Hn(e,t,n,r){t.child=e===null?qk(t,null,n,r):hf(t,e.child,n,r)}function YA(e,t,n,r,i){n=n.render;var s=t.ref;return Yu(t,i),r=xI(e,t,n,r,s,i),n=II(),e!==null&&!mr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Oo(e,t,i)):(Ne&&n&&fI(t),t.flags|=1,Hn(e,t,r,i),t.child)}function qA(e,t,n,r,i){if(e===null){var s=n.type;return typeof s=="function"&&!FI(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,pD(e,t,s,r,i)):(e=im(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:qh,n(o,r)&&e.ref===t.ref)return Oo(e,t,i)}return t.flags|=1,e=Ma(s,r),e.ref=t.ref,e.return=t,t.child=e}function pD(e,t,n,r,i){if(e!==null){var s=e.memoizedProps;if(qh(s,r)&&e.ref===t.ref)if(mr=!1,t.pendingProps=r=s,(e.lanes&i)!==0)e.flags&131072&&(mr=!0);else return t.lanes=e.lanes,Oo(e,t,i)}return k2(e,t,n,r,i)}function yD(e,t,n){var r=t.pendingProps,i=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ie(Mu,Dr),Dr|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ie(Mu,Dr),Dr|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Ie(Mu,Dr),Dr|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,Ie(Mu,Dr),Dr|=r;return Hn(e,t,i,n),t.child}function mD(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function k2(e,t,n,r,i){var s=vr(n)?sc:Yn.current;return s=ff(t,s),Yu(t,i),n=xI(e,t,n,r,s,i),r=II(),e!==null&&!mr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Oo(e,t,i)):(Ne&&r&&fI(t),t.flags|=1,Hn(e,t,n,i),t.child)}function WA(e,t,n,r,i){if(vr(n)){var s=!0;Hm(t)}else s=!1;if(Yu(t,i),t.stateNode===null)em(e,t),Vk(t,n,r),$2(t,n,r,i),r=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=gi(c):(c=vr(n)?sc:Yn.current,c=ff(t,c));var u=n.getDerivedStateFromProps,f=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&RA(t,o,r,c),sa=!1;var d=t.memoizedState;o.state=d,Zm(t,r,o,i),l=t.memoizedState,a!==r||d!==l||br.current||sa?(typeof u=="function"&&(M2(t,n,u,r),l=t.memoizedState),(a=sa||LA(t,n,a,r,d,l,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,zk(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:Mi(t.type,a),o.props=c,f=t.pendingProps,d=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=gi(l):(l=vr(n)?sc:Yn.current,l=ff(t,l));var h=n.getDerivedStateFromProps;(u=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||d!==l)&&RA(t,o,r,l),sa=!1,d=t.memoizedState,o.state=d,Zm(t,r,o,i);var p=t.memoizedState;a!==f||d!==p||br.current||sa?(typeof h=="function"&&(M2(t,n,h,r),p=t.memoizedState),(c=sa||LA(t,n,c,r,d,p,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,l)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return D2(e,t,n,r,s,i)}function D2(e,t,n,r,i,s){mD(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return i&&kA(t,n,!1),Oo(e,t,s);r=t.stateNode,BV.current=t;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=hf(t,e.child,null,s),t.child=hf(t,null,a,s)):Hn(e,t,a,s),t.memoizedState=r.state,i&&kA(t,n,!0),t.child}function gD(e){var t=e.stateNode;t.pendingContext?NA(e,t.pendingContext,t.pendingContext!==t.context):t.context&&NA(e,t.context,!1),vI(e,t.containerInfo)}function HA(e,t,n,r,i){return df(),hI(i),t.flags|=256,Hn(e,t,n,r),t.child}var O2={dehydrated:null,treeContext:null,retryLane:0};function F2(e){return{baseLanes:e,cachePool:null,transitions:null}}function bD(e,t,n){var r=t.pendingProps,i=Le.current,s=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),Ie(Le,i&1),e===null)return E2(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,s?(r=t.mode,s=t.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Ub(o,r,0,null),e=Kl(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=F2(n),t.memoizedState=O2,e):AI(t,o));if(i=e.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return LV(e,t,o,r,a,i,n);if(s){s=r.fallback,o=t.mode,i=e.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=l,t.deletions=null):(r=Ma(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Ma(a,s):(s=Kl(s,o,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,o=e.child.memoizedState,o=o===null?F2(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~n,t.memoizedState=O2,r}return s=e.child,e=s.sibling,r=Ma(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function AI(e,t){return t=Ub({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function o0(e,t,n,r){return r!==null&&hI(r),hf(t,e.child,null,n),e=AI(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function LV(e,t,n,r,i,s,o){if(n)return t.flags&256?(t.flags&=-257,r=kw(Error(q(422))),o0(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=Ub({mode:"visible",children:r.children},i,0,null),s=Kl(s,i,o,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&hf(t,e.child,null,o),t.child.memoizedState=F2(o),t.memoizedState=O2,s);if(!(t.mode&1))return o0(e,t,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(q(419)),r=kw(s,r,void 0),o0(e,t,o,r)}if(a=(o&e.childLanes)!==0,mr||a){if(r=_n,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Do(e,i),Ui(r,e,i,-1))}return OI(),r=kw(Error(q(421))),o0(e,t,o,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=XV.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,Fr=Ia(i.nextSibling),Ur=t,Ne=!0,Oi=null,e!==null&&(ri[ii++]=yo,ri[ii++]=mo,ri[ii++]=oc,yo=e.id,mo=e.overflow,oc=t),t=AI(t,r.children),t.flags|=4096,t)}function GA(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),A2(e.return,t,n)}function Dw(e,t,n,r,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function vD(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(Hn(e,t,r.children,n),r=Le.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)t:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&GA(e,n,t);else if(e.tag===19)GA(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break t;for(;e.sibling===null;){if(e.return===null||e.return===t)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ie(Le,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&Jm(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Dw(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Jm(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Dw(t,!0,n,null,s);break;case"together":Dw(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function em(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Oo(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),lc|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(q(153));if(t.child!==null){for(e=t.child,n=Ma(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Ma(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function RV(e,t,n){switch(t.tag){case 3:gD(t),df();break;case 5:Wk(t);break;case 1:vr(t.type)&&Hm(t);break;case 4:vI(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ie(Qm,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Ie(Le,Le.current&1),t.flags|=128,null):n&t.child.childLanes?bD(e,t,n):(Ie(Le,Le.current&1),e=Oo(e,t,n),e!==null?e.sibling:null);Ie(Le,Le.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return vD(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ie(Le,Le.current),r)break;return null;case 22:case 23:return t.lanes=0,yD(e,t,n)}return Oo(e,t,n)}var wD,B2,_D,SD;wD=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};B2=function(){};_D=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Pl(Ms.current);var s=null;switch(n){case"input":i=r2(e,i),r=r2(e,r),s=[];break;case"select":i=Ve({},i,{value:void 0}),r=Ve({},r,{value:void 0}),s=[];break;case"textarea":i=o2(e,i),r=o2(e,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=qm)}l2(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Ch.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Ch.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Ee("scroll",e),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(t.updateQueue=c)&&(t.flags|=4)}};SD=function(e,t,n,r){n!==r&&(t.flags|=4)};function Td(e,t){if(!Ne)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Fn(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function CV(e,t,n){var r=t.pendingProps;switch(dI(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Fn(t),null;case 1:return vr(t.type)&&Wm(),Fn(t),null;case 3:return r=t.stateNode,pf(),Ae(br),Ae(Yn),_I(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(i0(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Oi!==null&&(V2(Oi),Oi=null))),B2(e,t),Fn(t),null;case 5:wI(t);var i=Pl(Qh.current);if(n=t.type,e!==null&&t.stateNode!=null)_D(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(q(166));return Fn(t),null}if(e=Pl(Ms.current),i0(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[ps]=t,r[Gh]=s,e=(t.mode&1)!==0,n){case"dialog":Ee("cancel",r),Ee("close",r);break;case"iframe":case"object":case"embed":Ee("load",r);break;case"video":case"audio":for(i=0;i<qd.length;i++)Ee(qd[i],r);break;case"source":Ee("error",r);break;case"img":case"image":case"link":Ee("error",r),Ee("load",r);break;case"details":Ee("toggle",r);break;case"input":rA(r,s),Ee("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ee("invalid",r);break;case"textarea":sA(r,s),Ee("invalid",r)}l2(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&r0(r.textContent,a,e),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&r0(r.textContent,a,e),i=["children",""+a]):Ch.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ee("scroll",r)}switch(n){case"input":Xy(r),iA(r,s,!0);break;case"textarea":Xy(r),oA(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=qm)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=X4(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[ps]=t,e[Gh]=r,wD(e,t,!1,!1),t.stateNode=e;t:{switch(o=c2(n,r),n){case"dialog":Ee("cancel",e),Ee("close",e),i=r;break;case"iframe":case"object":case"embed":Ee("load",e),i=r;break;case"video":case"audio":for(i=0;i<qd.length;i++)Ee(qd[i],e);i=r;break;case"source":Ee("error",e),i=r;break;case"img":case"image":case"link":Ee("error",e),Ee("load",e),i=r;break;case"details":Ee("toggle",e),i=r;break;case"input":rA(e,r),i=r2(e,r),Ee("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Ve({},r,{value:void 0}),Ee("invalid",e);break;case"textarea":sA(e,r),i=o2(e,r),Ee("invalid",e);break;default:i=r}l2(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?Z4(e,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Q4(e,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Uh(e,l):typeof l=="number"&&Uh(e,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Ch.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Ee("scroll",e):l!=null&&Kx(e,s,l,o))}switch(n){case"input":Xy(e),iA(e,r,!1);break;case"textarea":Xy(e),oA(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Fa(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?Pu(e,!!r.multiple,s,!1):r.defaultValue!=null&&Pu(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=qm)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break t;case"img":r=!0;break t;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Fn(t),null;case 6:if(e&&t.stateNode!=null)SD(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(q(166));if(n=Pl(Qh.current),Pl(Ms.current),i0(t)){if(r=t.stateNode,n=t.memoizedProps,r[ps]=t,(s=r.nodeValue!==n)&&(e=Ur,e!==null))switch(e.tag){case 3:r0(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&r0(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ps]=t,t.stateNode=r}return Fn(t),null;case 13:if(Ae(Le),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ne&&Fr!==null&&t.mode&1&&!(t.flags&128))Uk(),df(),t.flags|=98560,s=!1;else if(s=i0(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(q(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(q(317));s[ps]=t}else df(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Fn(t),s=!1}else Oi!==null&&(V2(Oi),Oi=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Le.current&1?fn===0&&(fn=3):OI())),t.updateQueue!==null&&(t.flags|=4),Fn(t),null);case 4:return pf(),B2(e,t),e===null&&Wh(t.stateNode.containerInfo),Fn(t),null;case 10:return mI(t.type._context),Fn(t),null;case 17:return vr(t.type)&&Wm(),Fn(t),null;case 19:if(Ae(Le),s=t.memoizedState,s===null)return Fn(t),null;if(r=(t.flags&128)!==0,o=s.rendering,o===null)if(r)Td(s,!1);else{if(fn!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Jm(e),o!==null){for(t.flags|=128,Td(s,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ie(Le,Le.current&1|2),t.child}e=e.sibling}s.tail!==null&&Ze()>mf&&(t.flags|=128,r=!0,Td(s,!1),t.lanes=4194304)}else{if(!r)if(e=Jm(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Td(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ne)return Fn(t),null}else 2*Ze()-s.renderingStartTime>mf&&n!==1073741824&&(t.flags|=128,r=!0,Td(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(n=s.last,n!==null?n.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Ze(),t.sibling=null,n=Le.current,Ie(Le,r?n&1|2:n&1),t):(Fn(t),null);case 22:case 23:return DI(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Dr&1073741824&&(Fn(t),t.subtreeFlags&6&&(t.flags|=8192)):Fn(t),null;case 24:return null;case 25:return null}throw Error(q(156,t.tag))}function UV(e,t){switch(dI(t),t.tag){case 1:return vr(t.type)&&Wm(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return pf(),Ae(br),Ae(Yn),_I(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return wI(t),null;case 13:if(Ae(Le),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(q(340));df()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ae(Le),null;case 4:return pf(),null;case 10:return mI(t.type._context),null;case 22:case 23:return DI(),null;case 24:return null;default:return null}}var a0=!1,Cn=!1,PV=typeof WeakSet=="function"?WeakSet:Set,nt=null;function Au(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){He(e,t,r)}else n.current=null}function L2(e,t,n){try{n()}catch(r){He(e,t,r)}}var XA=!1;function zV(e,t){if(v2=jm,e=Ek(),uI(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else t:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break t}var o=0,a=-1,l=-1,c=0,u=0,f=e,d=null;e:for(;;){for(var h;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(h=f.firstChild)!==null;)d=f,f=h;for(;;){if(f===e)break e;if(d===n&&++c===i&&(a=o),d===s&&++u===r&&(l=o),(h=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=h}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(w2={focusedElem:e,selectionRange:n},jm=!1,nt=t;nt!==null;)if(t=nt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,nt=e;else for(;nt!==null;){t=nt;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,v=p.memoizedState,y=t.stateNode,m=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:Mi(t.type,g),v);y.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(q(163))}}catch(w){He(t,t.return,w)}if(e=t.sibling,e!==null){e.return=t.return,nt=e;break}nt=t.return}return p=XA,XA=!1,p}function xh(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&L2(t,n,s)}i=i.next}while(i!==r)}}function Rb(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function R2(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function xD(e){var t=e.alternate;t!==null&&(e.alternate=null,xD(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ps],delete t[Gh],delete t[x2],delete t[xV],delete t[IV])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ID(e){return e.tag===5||e.tag===3||e.tag===4}function QA(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||ID(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function C2(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=qm));else if(r!==4&&(e=e.child,e!==null))for(C2(e,t,n),e=e.sibling;e!==null;)C2(e,t,n),e=e.sibling}function U2(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(U2(e,t,n),e=e.sibling;e!==null;)U2(e,t,n),e=e.sibling}var Tn=null,$i=!1;function Ko(e,t,n){for(n=n.child;n!==null;)TD(e,t,n),n=n.sibling}function TD(e,t,n){if(As&&typeof As.onCommitFiberUnmount=="function")try{As.onCommitFiberUnmount($b,n)}catch{}switch(n.tag){case 5:Cn||Au(n,t);case 6:var r=Tn,i=$i;Tn=null,Ko(e,t,n),Tn=r,$i=i,Tn!==null&&($i?(e=Tn,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Tn.removeChild(n.stateNode));break;case 18:Tn!==null&&($i?(e=Tn,n=n.stateNode,e.nodeType===8?Tw(e.parentNode,n):e.nodeType===1&&Tw(e,n),Vh(e)):Tw(Tn,n.stateNode));break;case 4:r=Tn,i=$i,Tn=n.stateNode.containerInfo,$i=!0,Ko(e,t,n),Tn=r,$i=i;break;case 0:case 11:case 14:case 15:if(!Cn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&L2(n,t,o),i=i.next}while(i!==r)}Ko(e,t,n);break;case 1:if(!Cn&&(Au(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){He(n,t,a)}Ko(e,t,n);break;case 21:Ko(e,t,n);break;case 22:n.mode&1?(Cn=(r=Cn)||n.memoizedState!==null,Ko(e,t,n),Cn=r):Ko(e,t,n);break;default:Ko(e,t,n)}}function KA(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new PV),t.forEach(function(r){var i=QV.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Ei(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,o=t,a=o;t:for(;a!==null;){switch(a.tag){case 5:Tn=a.stateNode,$i=!1;break t;case 3:Tn=a.stateNode.containerInfo,$i=!0;break t;case 4:Tn=a.stateNode.containerInfo,$i=!0;break t}a=a.return}if(Tn===null)throw Error(q(160));TD(s,o,i),Tn=null,$i=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){He(i,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)ED(t,e),t=t.sibling}function ED(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ei(t,e),ns(e),r&4){try{xh(3,e,e.return),Rb(3,e)}catch(g){He(e,e.return,g)}try{xh(5,e,e.return)}catch(g){He(e,e.return,g)}}break;case 1:Ei(t,e),ns(e),r&512&&n!==null&&Au(n,n.return);break;case 5:if(Ei(t,e),ns(e),r&512&&n!==null&&Au(n,n.return),e.flags&32){var i=e.stateNode;try{Uh(i,"")}catch(g){He(e,e.return,g)}}if(r&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,o=n!==null?n.memoizedProps:s,a=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&H4(i,s),c2(a,o);var c=c2(a,s);for(o=0;o<l.length;o+=2){var u=l[o],f=l[o+1];u==="style"?Z4(i,f):u==="dangerouslySetInnerHTML"?Q4(i,f):u==="children"?Uh(i,f):Kx(i,u,f,c)}switch(a){case"input":i2(i,s);break;case"textarea":G4(i,s);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?Pu(i,!!s.multiple,h,!1):d!==!!s.multiple&&(s.defaultValue!=null?Pu(i,!!s.multiple,s.defaultValue,!0):Pu(i,!!s.multiple,s.multiple?[]:"",!1))}i[Gh]=s}catch(g){He(e,e.return,g)}}break;case 6:if(Ei(t,e),ns(e),r&4){if(e.stateNode===null)throw Error(q(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(g){He(e,e.return,g)}}break;case 3:if(Ei(t,e),ns(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Vh(t.containerInfo)}catch(g){He(e,e.return,g)}break;case 4:Ei(t,e),ns(e);break;case 13:Ei(t,e),ns(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(NI=Ze())),r&4&&KA(e);break;case 22:if(u=n!==null&&n.memoizedState!==null,e.mode&1?(Cn=(c=Cn)||u,Ei(t,e),Cn=c):Ei(t,e),ns(e),r&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!u&&e.mode&1)for(nt=e,u=e.child;u!==null;){for(f=nt=u;nt!==null;){switch(d=nt,h=d.child,d.tag){case 0:case 11:case 14:case 15:xh(4,d,d.return);break;case 1:Au(d,d.return);var p=d.stateNode;if(typeof p.componentWillUnmount=="function"){r=d,n=d.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(g){He(r,n,g)}}break;case 5:Au(d,d.return);break;case 22:if(d.memoizedState!==null){JA(f);continue}}h!==null?(h.return=d,nt=h):JA(f)}u=u.sibling}t:for(u=null,f=e;;){if(f.tag===5){if(u===null){u=f;try{i=f.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=K4("display",o))}catch(g){He(e,e.return,g)}}}else if(f.tag===6){if(u===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(g){He(e,e.return,g)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break t;for(;f.sibling===null;){if(f.return===null||f.return===e)break t;u===f&&(u=null),f=f.return}u===f&&(u=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Ei(t,e),ns(e),r&4&&KA(e);break;case 21:break;default:Ei(t,e),ns(e)}}function ns(e){var t=e.flags;if(t&2){try{t:{for(var n=e.return;n!==null;){if(ID(n)){var r=n;break t}n=n.return}throw Error(q(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Uh(i,""),r.flags&=-33);var s=QA(e);U2(e,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=QA(e);C2(e,a,o);break;default:throw Error(q(161))}}catch(l){He(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function jV(e,t,n){nt=e,AD(e)}function AD(e,t,n){for(var r=(e.mode&1)!==0;nt!==null;){var i=nt,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||a0;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Cn;a=a0;var c=Cn;if(a0=o,(Cn=l)&&!c)for(nt=i;nt!==null;)o=nt,l=o.child,o.tag===22&&o.memoizedState!==null?tM(i):l!==null?(l.return=o,nt=l):tM(i);for(;s!==null;)nt=s,AD(s),s=s.sibling;nt=i,a0=a,Cn=c}ZA(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,nt=s):ZA(e)}}function ZA(e){for(;nt!==null;){var t=nt;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Cn||Rb(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Cn)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Mi(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&BA(t,s,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}BA(t,o,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var f=u.dehydrated;f!==null&&Vh(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(q(163))}Cn||t.flags&512&&R2(t)}catch(d){He(t,t.return,d)}}if(t===e){nt=null;break}if(n=t.sibling,n!==null){n.return=t.return,nt=n;break}nt=t.return}}function JA(e){for(;nt!==null;){var t=nt;if(t===e){nt=null;break}var n=t.sibling;if(n!==null){n.return=t.return,nt=n;break}nt=t.return}}function tM(e){for(;nt!==null;){var t=nt;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Rb(4,t)}catch(l){He(t,n,l)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(l){He(t,i,l)}}var s=t.return;try{R2(t)}catch(l){He(t,s,l)}break;case 5:var o=t.return;try{R2(t)}catch(l){He(t,o,l)}}}catch(l){He(t,t.return,l)}if(t===e){nt=null;break}var a=t.sibling;if(a!==null){a.return=t.return,nt=a;break}nt=t.return}}var VV=Math.ceil,ng=Po.ReactCurrentDispatcher,MI=Po.ReactCurrentOwner,yi=Po.ReactCurrentBatchConfig,Xt=0,_n=null,sn=null,Nn=0,Dr=0,Mu=rl(0),fn=0,tp=null,lc=0,Cb=0,$I=0,Ih=null,hr=null,NI=0,mf=1/0,no=null,rg=!1,P2=null,Ea=null,l0=!1,ba=null,ig=0,Th=0,z2=null,nm=-1,rm=0;function nr(){return Xt&6?Ze():nm!==-1?nm:nm=Ze()}function Aa(e){return e.mode&1?Xt&2&&Nn!==0?Nn&-Nn:EV.transition!==null?(rm===0&&(rm=uk()),rm):(e=he,e!==0||(e=window.event,e=e===void 0?16:gk(e.type)),e):1}function Ui(e,t,n,r){if(50<Th)throw Th=0,z2=null,Error(q(185));Gp(e,n,r),(!(Xt&2)||e!==_n)&&(e===_n&&(!(Xt&2)&&(Cb|=n),fn===4&&da(e,Nn)),wr(e,r),n===1&&Xt===0&&!(t.mode&1)&&(mf=Ze()+500,Fb&&il()))}function wr(e,t){var n=e.callbackNode;Ej(e,t);var r=zm(e,e===_n?Nn:0);if(r===0)n!==null&&cA(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&cA(n),t===1)e.tag===0?TV(eM.bind(null,e)):Lk(eM.bind(null,e)),_V(function(){!(Xt&6)&&il()}),n=null;else{switch(fk(r)){case 1:n=nI;break;case 4:n=lk;break;case 16:n=Pm;break;case 536870912:n=ck;break;default:n=Pm}n=BD(n,MD.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function MD(e,t){if(nm=-1,rm=0,Xt&6)throw Error(q(327));var n=e.callbackNode;if(qu()&&e.callbackNode!==n)return null;var r=zm(e,e===_n?Nn:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=sg(e,r);else{t=r;var i=Xt;Xt|=2;var s=ND();(_n!==e||Nn!==t)&&(no=null,mf=Ze()+500,Ql(e,t));do try{WV();break}catch(a){$D(e,a)}while(!0);yI(),ng.current=s,Xt=i,sn!==null?t=0:(_n=null,Nn=0,t=fn)}if(t!==0){if(t===2&&(i=p2(e),i!==0&&(r=i,t=j2(e,i))),t===1)throw n=tp,Ql(e,0),da(e,r),wr(e,Ze()),n;if(t===6)da(e,r);else{if(i=e.current.alternate,!(r&30)&&!YV(i)&&(t=sg(e,r),t===2&&(s=p2(e),s!==0&&(r=s,t=j2(e,s))),t===1))throw n=tp,Ql(e,0),da(e,r),wr(e,Ze()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(q(345));case 2:xl(e,hr,no);break;case 3:if(da(e,r),(r&130023424)===r&&(t=NI+500-Ze(),10<t)){if(zm(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){nr(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=S2(xl.bind(null,e,hr,no),t);break}xl(e,hr,no);break;case 4:if(da(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-Ci(r);s=1<<o,o=t[o],o>i&&(i=o),r&=~s}if(r=i,r=Ze()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*VV(r/1960))-r,10<r){e.timeoutHandle=S2(xl.bind(null,e,hr,no),r);break}xl(e,hr,no);break;case 5:xl(e,hr,no);break;default:throw Error(q(329))}}}return wr(e,Ze()),e.callbackNode===n?MD.bind(null,e):null}function j2(e,t){var n=Ih;return e.current.memoizedState.isDehydrated&&(Ql(e,t).flags|=256),e=sg(e,t),e!==2&&(t=hr,hr=n,t!==null&&V2(t)),e}function V2(e){hr===null?hr=e:hr.push.apply(hr,e)}function YV(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!zi(s(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function da(e,t){for(t&=~$I,t&=~Cb,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Ci(t),r=1<<n;e[n]=-1,t&=~r}}function eM(e){if(Xt&6)throw Error(q(327));qu();var t=zm(e,0);if(!(t&1))return wr(e,Ze()),null;var n=sg(e,t);if(e.tag!==0&&n===2){var r=p2(e);r!==0&&(t=r,n=j2(e,r))}if(n===1)throw n=tp,Ql(e,0),da(e,t),wr(e,Ze()),n;if(n===6)throw Error(q(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xl(e,hr,no),wr(e,Ze()),null}function kI(e,t){var n=Xt;Xt|=1;try{return e(t)}finally{Xt=n,Xt===0&&(mf=Ze()+500,Fb&&il())}}function cc(e){ba!==null&&ba.tag===0&&!(Xt&6)&&qu();var t=Xt;Xt|=1;var n=yi.transition,r=he;try{if(yi.transition=null,he=1,e)return e()}finally{he=r,yi.transition=n,Xt=t,!(Xt&6)&&il()}}function DI(){Dr=Mu.current,Ae(Mu)}function Ql(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,wV(n)),sn!==null)for(n=sn.return;n!==null;){var r=n;switch(dI(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Wm();break;case 3:pf(),Ae(br),Ae(Yn),_I();break;case 5:wI(r);break;case 4:pf();break;case 13:Ae(Le);break;case 19:Ae(Le);break;case 10:mI(r.type._context);break;case 22:case 23:DI()}n=n.return}if(_n=e,sn=e=Ma(e.current,null),Nn=Dr=t,fn=0,tp=null,$I=Cb=lc=0,hr=Ih=null,Ul!==null){for(t=0;t<Ul.length;t++)if(n=Ul[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Ul=null}return e}function $D(e,t){do{var n=sn;try{if(yI(),J0.current=eg,tg){for(var r=ze.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}tg=!1}if(ac=0,gn=ln=ze=null,Sh=!1,Kh=0,MI.current=null,n===null||n.return===null){fn=1,tp=t,sn=null;break}t:{var s=e,o=n.return,a=n,l=t;if(t=Nn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,f=u.tag;if(!(u.mode&1)&&(f===0||f===11||f===15)){var d=u.alternate;d?(u.updateQueue=d.updateQueue,u.memoizedState=d.memoizedState,u.lanes=d.lanes):(u.updateQueue=null,u.memoizedState=null)}var h=jA(o);if(h!==null){h.flags&=-257,VA(h,o,a,s,t),h.mode&1&&zA(s,c,t),t=h,l=c;var p=t.updateQueue;if(p===null){var g=new Set;g.add(l),t.updateQueue=g}else p.add(l);break t}else{if(!(t&1)){zA(s,c,t),OI();break t}l=Error(q(426))}}else if(Ne&&a.mode&1){var v=jA(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),VA(v,o,a,s,t),hI(yf(l,a));break t}}s=l=yf(l,a),fn!==4&&(fn=2),Ih===null?Ih=[s]:Ih.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var y=dD(s,l,t);FA(s,y);break t;case 1:a=l;var m=s.type,b=s.stateNode;if(!(s.flags&128)&&(typeof m.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Ea===null||!Ea.has(b)))){s.flags|=65536,t&=-t,s.lanes|=t;var w=hD(s,a,t);FA(s,w);break t}}s=s.return}while(s!==null)}DD(n)}catch(S){t=S,sn===n&&n!==null&&(sn=n=n.return);continue}break}while(!0)}function ND(){var e=ng.current;return ng.current=eg,e===null?eg:e}function OI(){(fn===0||fn===3||fn===2)&&(fn=4),_n===null||!(lc&268435455)&&!(Cb&268435455)||da(_n,Nn)}function sg(e,t){var n=Xt;Xt|=2;var r=ND();(_n!==e||Nn!==t)&&(no=null,Ql(e,t));do try{qV();break}catch(i){$D(e,i)}while(!0);if(yI(),Xt=n,ng.current=r,sn!==null)throw Error(q(261));return _n=null,Nn=0,fn}function qV(){for(;sn!==null;)kD(sn)}function WV(){for(;sn!==null&&!gj();)kD(sn)}function kD(e){var t=FD(e.alternate,e,Dr);e.memoizedProps=e.pendingProps,t===null?DD(e):sn=t,MI.current=null}function DD(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=UV(n,t),n!==null){n.flags&=32767,sn=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{fn=6,sn=null;return}}else if(n=CV(n,t,Dr),n!==null){sn=n;return}if(t=t.sibling,t!==null){sn=t;return}sn=t=e}while(t!==null);fn===0&&(fn=5)}function xl(e,t,n){var r=he,i=yi.transition;try{yi.transition=null,he=1,HV(e,t,n,r)}finally{yi.transition=i,he=r}return null}function HV(e,t,n,r){do qu();while(ba!==null);if(Xt&6)throw Error(q(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(q(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(Aj(e,s),e===_n&&(sn=_n=null,Nn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||l0||(l0=!0,BD(Pm,function(){return qu(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=yi.transition,yi.transition=null;var o=he;he=1;var a=Xt;Xt|=4,MI.current=null,zV(e,n),ED(n,e),hV(w2),jm=!!v2,w2=v2=null,e.current=n,jV(n),bj(),Xt=a,he=o,yi.transition=s}else e.current=n;if(l0&&(l0=!1,ba=e,ig=i),s=e.pendingLanes,s===0&&(Ea=null),_j(n.stateNode),wr(e,Ze()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(rg)throw rg=!1,e=P2,P2=null,e;return ig&1&&e.tag!==0&&qu(),s=e.pendingLanes,s&1?e===z2?Th++:(Th=0,z2=e):Th=0,il(),null}function qu(){if(ba!==null){var e=fk(ig),t=yi.transition,n=he;try{if(yi.transition=null,he=16>e?16:e,ba===null)var r=!1;else{if(e=ba,ba=null,ig=0,Xt&6)throw Error(q(331));var i=Xt;for(Xt|=4,nt=e.current;nt!==null;){var s=nt,o=s.child;if(nt.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(nt=c;nt!==null;){var u=nt;switch(u.tag){case 0:case 11:case 15:xh(8,u,s)}var f=u.child;if(f!==null)f.return=u,nt=f;else for(;nt!==null;){u=nt;var d=u.sibling,h=u.return;if(xD(u),u===c){nt=null;break}if(d!==null){d.return=h,nt=d;break}nt=h}}}var p=s.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(g!==null)}}nt=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,nt=o;else t:for(;nt!==null;){if(s=nt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:xh(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,nt=y;break t}nt=s.return}}var m=e.current;for(nt=m;nt!==null;){o=nt;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,nt=b;else t:for(o=m;nt!==null;){if(a=nt,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Rb(9,a)}}catch(S){He(a,a.return,S)}if(a===o){nt=null;break t}var w=a.sibling;if(w!==null){w.return=a.return,nt=w;break t}nt=a.return}}if(Xt=i,il(),As&&typeof As.onPostCommitFiberRoot=="function")try{As.onPostCommitFiberRoot($b,e)}catch{}r=!0}return r}finally{he=n,yi.transition=t}}return!1}function nM(e,t,n){t=yf(n,t),t=dD(e,t,1),e=Ta(e,t,1),t=nr(),e!==null&&(Gp(e,1,t),wr(e,t))}function He(e,t,n){if(e.tag===3)nM(e,e,n);else for(;t!==null;){if(t.tag===3){nM(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ea===null||!Ea.has(r))){e=yf(n,e),e=hD(t,e,1),t=Ta(t,e,1),e=nr(),t!==null&&(Gp(t,1,e),wr(t,e));break}}t=t.return}}function GV(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=nr(),e.pingedLanes|=e.suspendedLanes&n,_n===e&&(Nn&n)===n&&(fn===4||fn===3&&(Nn&130023424)===Nn&&500>Ze()-NI?Ql(e,0):$I|=n),wr(e,t)}function OD(e,t){t===0&&(e.mode&1?(t=Zy,Zy<<=1,!(Zy&130023424)&&(Zy=4194304)):t=1);var n=nr();e=Do(e,t),e!==null&&(Gp(e,t,n),wr(e,n))}function XV(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),OD(e,n)}function QV(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(q(314))}r!==null&&r.delete(t),OD(e,n)}var FD;FD=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||br.current)mr=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return mr=!1,RV(e,t,n);mr=!!(e.flags&131072)}else mr=!1,Ne&&t.flags&1048576&&Rk(t,Xm,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;em(e,t),e=t.pendingProps;var i=ff(t,Yn.current);Yu(t,n),i=xI(null,t,r,e,i,n);var s=II();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,vr(r)?(s=!0,Hm(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,bI(t),i.updater=Bb,t.stateNode=i,i._reactInternals=t,$2(t,r,e,n),t=D2(null,t,r,!0,s,n)):(t.tag=0,Ne&&s&&fI(t),Hn(null,t,i,n),t=t.child),t;case 16:r=t.elementType;t:{switch(em(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=ZV(r),e=Mi(r,e),i){case 0:t=k2(null,t,r,e,n);break t;case 1:t=WA(null,t,r,e,n);break t;case 11:t=YA(null,t,r,e,n);break t;case 14:t=qA(null,t,r,Mi(r.type,e),n);break t}throw Error(q(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Mi(r,i),k2(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Mi(r,i),WA(e,t,r,i,n);case 3:t:{if(gD(t),e===null)throw Error(q(387));r=t.pendingProps,s=t.memoizedState,i=s.element,zk(e,t),Zm(t,r,null,n);var o=t.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=yf(Error(q(423)),t),t=HA(e,t,r,n,i);break t}else if(r!==i){i=yf(Error(q(424)),t),t=HA(e,t,r,n,i);break t}else for(Fr=Ia(t.stateNode.containerInfo.firstChild),Ur=t,Ne=!0,Oi=null,n=qk(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(df(),r===i){t=Oo(e,t,n);break t}Hn(e,t,r,n)}t=t.child}return t;case 5:return Wk(t),e===null&&E2(t),r=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,o=i.children,_2(r,i)?o=null:s!==null&&_2(r,s)&&(t.flags|=32),mD(e,t),Hn(e,t,o,n),t.child;case 6:return e===null&&E2(t),null;case 13:return bD(e,t,n);case 4:return vI(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=hf(t,null,r,n):Hn(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Mi(r,i),YA(e,t,r,i,n);case 7:return Hn(e,t,t.pendingProps,n),t.child;case 8:return Hn(e,t,t.pendingProps.children,n),t.child;case 12:return Hn(e,t,t.pendingProps.children,n),t.child;case 10:t:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value,Ie(Qm,r._currentValue),r._currentValue=o,s!==null)if(zi(s.value,o)){if(s.children===i.children&&!br.current){t=Oo(e,t,n);break t}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=So(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),A2(s.return,n,t),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(q(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),A2(o,n,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Hn(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Yu(t,n),i=gi(i),r=r(i),t.flags|=1,Hn(e,t,r,n),t.child;case 14:return r=t.type,i=Mi(r,t.pendingProps),i=Mi(r.type,i),qA(e,t,r,i,n);case 15:return pD(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Mi(r,i),em(e,t),t.tag=1,vr(r)?(e=!0,Hm(t)):e=!1,Yu(t,n),Vk(t,r,i),$2(t,r,i,n),D2(null,t,r,!0,e,n);case 19:return vD(e,t,n);case 22:return yD(e,t,n)}throw Error(q(156,t.tag))};function BD(e,t){return ak(e,t)}function KV(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function li(e,t,n,r){return new KV(e,t,n,r)}function FI(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ZV(e){if(typeof e=="function")return FI(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Jx)return 11;if(e===tI)return 14}return 2}function Ma(e,t){var n=e.alternate;return n===null?(n=li(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function im(e,t,n,r,i,s){var o=2;if(r=e,typeof e=="function")FI(e)&&(o=1);else if(typeof e=="string")o=5;else t:switch(e){case bu:return Kl(n.children,i,s,t);case Zx:o=8,i|=8;break;case J_:return e=li(12,n,t,i|2),e.elementType=J_,e.lanes=s,e;case t2:return e=li(13,n,t,i),e.elementType=t2,e.lanes=s,e;case e2:return e=li(19,n,t,i),e.elementType=e2,e.lanes=s,e;case Y4:return Ub(n,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case j4:o=10;break t;case V4:o=9;break t;case Jx:o=11;break t;case tI:o=14;break t;case ia:o=16,r=null;break t}throw Error(q(130,e==null?e:typeof e,""))}return t=li(o,n,t,i),t.elementType=e,t.type=r,t.lanes=s,t}function Kl(e,t,n,r){return e=li(7,e,r,t),e.lanes=n,e}function Ub(e,t,n,r){return e=li(22,e,r,t),e.elementType=Y4,e.lanes=n,e.stateNode={isHidden:!1},e}function Ow(e,t,n){return e=li(6,e,null,t),e.lanes=n,e}function Fw(e,t,n){return t=li(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function JV(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=pw(0),this.expirationTimes=pw(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=pw(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function BI(e,t,n,r,i,s,o,a,l){return e=new JV(e,t,n,a,l),t===1?(t=1,s===!0&&(t|=8)):t=0,s=li(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},bI(s),e}function tY(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:gu,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function LD(e){if(!e)return Ba;e=e._reactInternals;t:{if(Mc(e)!==e||e.tag!==1)throw Error(q(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break t;case 1:if(vr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break t}}t=t.return}while(t!==null);throw Error(q(171))}if(e.tag===1){var n=e.type;if(vr(n))return Bk(e,n,t)}return t}function RD(e,t,n,r,i,s,o,a,l){return e=BI(n,r,!0,e,i,s,o,a,l),e.context=LD(null),n=e.current,r=nr(),i=Aa(n),s=So(r,i),s.callback=t??null,Ta(n,s,i),e.current.lanes=i,Gp(e,i,r),wr(e,r),e}function Pb(e,t,n,r){var i=t.current,s=nr(),o=Aa(i);return n=LD(n),t.context===null?t.context=n:t.pendingContext=n,t=So(s,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Ta(i,t,o),e!==null&&(Ui(e,i,o,s),Z0(e,i,o)),o}function og(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function rM(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function LI(e,t){rM(e,t),(e=e.alternate)&&rM(e,t)}function eY(){return null}var CD=typeof reportError=="function"?reportError:function(e){console.error(e)};function RI(e){this._internalRoot=e}zb.prototype.render=RI.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(q(409));Pb(e,t,null,null)};zb.prototype.unmount=RI.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;cc(function(){Pb(null,e,null,null)}),t[ko]=null}};function zb(e){this._internalRoot=e}zb.prototype.unstable_scheduleHydration=function(e){if(e){var t=pk();e={blockedOn:null,target:e,priority:t};for(var n=0;n<fa.length&&t!==0&&t<fa[n].priority;n++);fa.splice(n,0,e),n===0&&mk(e)}};function CI(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function jb(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function iM(){}function nY(e,t,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=og(o);s.call(c)}}var o=RD(t,r,e,0,null,!1,!1,"",iM);return e._reactRootContainer=o,e[ko]=o.current,Wh(e.nodeType===8?e.parentNode:e),cc(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=og(l);a.call(c)}}var l=BI(e,0,!1,null,null,!1,!1,"",iM);return e._reactRootContainer=l,e[ko]=l.current,Wh(e.nodeType===8?e.parentNode:e),cc(function(){Pb(t,l,n,r)}),l}function Vb(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=og(o);a.call(l)}}Pb(t,o,e,i)}else o=nY(n,t,e,i,r);return og(o)}dk=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Yd(t.pendingLanes);n!==0&&(rI(t,n|1),wr(t,Ze()),!(Xt&6)&&(mf=Ze()+500,il()))}break;case 13:cc(function(){var r=Do(e,1);if(r!==null){var i=nr();Ui(r,e,1,i)}}),LI(e,1)}};iI=function(e){if(e.tag===13){var t=Do(e,134217728);if(t!==null){var n=nr();Ui(t,e,134217728,n)}LI(e,134217728)}};hk=function(e){if(e.tag===13){var t=Aa(e),n=Do(e,t);if(n!==null){var r=nr();Ui(n,e,t,r)}LI(e,t)}};pk=function(){return he};yk=function(e,t){var n=he;try{return he=e,t()}finally{he=n}};f2=function(e,t,n){switch(t){case"input":if(i2(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Ob(r);if(!i)throw Error(q(90));W4(r),i2(r,i)}}}break;case"textarea":G4(e,n);break;case"select":t=n.value,t!=null&&Pu(e,!!n.multiple,t,!1)}};ek=kI;nk=cc;var rY={usingClientEntryPoint:!1,Events:[Qp,Su,Ob,J4,tk,kI]},Ed={findFiberByHostInstance:Cl,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},iY={bundleType:Ed.bundleType,version:Ed.version,rendererPackageName:Ed.rendererPackageName,rendererConfig:Ed.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Po.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=sk(e),e===null?null:e.stateNode},findFiberByHostInstance:Ed.findFiberByHostInstance||eY,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var c0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!c0.isDisabled&&c0.supportsFiber)try{$b=c0.inject(iY),As=c0}catch{}}Hr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rY;Hr.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!CI(t))throw Error(q(200));return tY(e,t,null,n)};Hr.createRoot=function(e,t){if(!CI(e))throw Error(q(299));var n=!1,r="",i=CD;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=BI(e,1,!1,null,null,n,!1,r,i),e[ko]=t.current,Wh(e.nodeType===8?e.parentNode:e),new RI(t)};Hr.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(q(188)):(e=Object.keys(e).join(","),Error(q(268,e)));return e=sk(t),e=e===null?null:e.stateNode,e};Hr.flushSync=function(e){return cc(e)};Hr.hydrate=function(e,t,n){if(!jb(t))throw Error(q(200));return Vb(null,e,t,!0,n)};Hr.hydrateRoot=function(e,t,n){if(!CI(e))throw Error(q(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=CD;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=RD(t,null,e,1,n??null,i,!1,s,o),e[ko]=t.current,Wh(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new zb(t)};Hr.render=function(e,t,n){if(!jb(t))throw Error(q(200));return Vb(null,e,t,!1,n)};Hr.unmountComponentAtNode=function(e){if(!jb(e))throw Error(q(40));return e._reactRootContainer?(cc(function(){Vb(null,null,e,!1,function(){e._reactRootContainer=null,e[ko]=null})}),!0):!1};Hr.unstable_batchedUpdates=kI;Hr.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!jb(n))throw Error(q(200));if(e==null||e._reactInternals===void 0)throw Error(q(38));return Vb(e,t,n,!1,r)};Hr.version="18.2.0-next-9e3b772b8-20220608";function UD(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(UD)}catch(e){console.error(e)}}UD(),R4.exports=Hr;var sY=R4.exports,sM=sY;K_.createRoot=sM.createRoot,K_.hydrateRoot=sM.hydrateRoot;function W(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(e,t||[])).next())})}function oM(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function K(e){return this instanceof K?(this.v=e,this):new K(e)}function on(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(d){r[d]&&(i[d]=function(h){return new Promise(function(p,g){s.push([d,h,p,g])>1||a(d,h)})})}function a(d,h){try{l(r[d](h))}catch(p){f(s[0][3],p)}}function l(d){d.value instanceof K?Promise.resolve(d.value.v).then(c,u):f(s[0][2],d)}function c(d){a("next",d)}function u(d){a("throw",d)}function f(d,h){d(h),s.shift(),s.length&&a(s[0][0],s[0][1])}}function $a(e){var t,n;return t={},r("next"),r("throw",function(i){throw i}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(i,s){t[i]=e[i]?function(o){return(n=!n)?{value:K(e[i](o)),done:!1}:s?s(o):o}:s}}function Pr(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof oM=="function"?oM(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=e[s]&&function(o){return new Promise(function(a,l){o=e[s](o),i(a,l,o.done,o.value)})}}function i(s,o,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},o)}}const oY=new TextDecoder("utf-8"),Y2=e=>oY.decode(e),aY=new TextEncoder,UI=e=>aY.encode(e),[Jbt,lY]=(()=>{const e=()=>{throw new Error("BigInt is not available in this environment")};function t(){throw e()}return t.asIntN=()=>{throw e()},t.asUintN=()=>{throw e()},typeof BigInt<"u"?[BigInt,!0]:[t,!1]})(),[Zp,tvt]=(()=>{const e=()=>{throw new Error("BigInt64Array is not available in this environment")};class t{static get BYTES_PER_ELEMENT(){return 8}static of(){throw e()}static from(){throw e()}constructor(){throw e()}}return typeof BigInt64Array<"u"?[BigInt64Array,!0]:[t,!1]})(),[Jp,evt]=(()=>{const e=()=>{throw new Error("BigUint64Array is not available in this environment")};class t{static get BYTES_PER_ELEMENT(){return 8}static of(){throw e()}static from(){throw e()}constructor(){throw e()}}return typeof BigUint64Array<"u"?[BigUint64Array,!0]:[t,!1]})(),cY=e=>typeof e=="number",uY=e=>typeof e=="boolean",Gn=e=>typeof e=="function",ji=e=>e!=null&&Object(e)===e,ep=e=>ji(e)&&Gn(e.then),Yb=e=>ji(e)&&Gn(e[Symbol.iterator]),PI=e=>ji(e)&&Gn(e[Symbol.asyncIterator]),q2=e=>ji(e)&&ji(e.schema),PD=e=>ji(e)&&"done"in e&&"value"in e,zD=e=>ji(e)&&Gn(e.stat)&&cY(e.fd),jD=e=>ji(e)&&zI(e.body),VD=e=>"_getDOMStream"in e&&"_getNodeStream"in e,zI=e=>ji(e)&&Gn(e.cancel)&&Gn(e.getReader)&&!VD(e),YD=e=>ji(e)&&Gn(e.read)&&Gn(e.pipe)&&uY(e.readable)&&!VD(e),fY=e=>ji(e)&&Gn(e.clear)&&Gn(e.bytes)&&Gn(e.position)&&Gn(e.setPosition)&&Gn(e.capacity)&&Gn(e.getBufferIdentifier)&&Gn(e.createLong),jI=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function dY(e){const t=e[0]?[e[0]]:[];let n,r,i,s;for(let o,a,l=0,c=0,u=e.length;++l<u;){if(o=t[c],a=e[l],!o||!a||o.buffer!==a.buffer||a.byteOffset<o.byteOffset){a&&(t[++c]=a);continue}if({byteOffset:n,byteLength:i}=o,{byteOffset:r,byteLength:s}=a,n+i<r||r+s<n){a&&(t[++c]=a);continue}t[c]=new Uint8Array(o.buffer,n,r-n+s)}return t}function aM(e,t,n=0,r=t.byteLength){const i=e.byteLength,s=new Uint8Array(e.buffer,e.byteOffset,i),o=new Uint8Array(t.buffer,t.byteOffset,Math.min(r,i));return s.set(o,n),e}function Os(e,t){const n=dY(e),r=n.reduce((u,f)=>u+f.byteLength,0);let i,s,o,a=0,l=-1;const c=Math.min(t||Number.POSITIVE_INFINITY,r);for(const u=n.length;++l<u;){if(i=n[l],s=i.subarray(0,Math.min(i.length,c-a)),c<=a+s.length){s.length<i.length?n[l]=i.subarray(s.length):s.length===i.length&&l++,o?aM(o,s,a):o=s;break}aM(o||(o=new Uint8Array(c)),s,a),a+=s.length}return[o||new Uint8Array(0),n.slice(l),r-(o?o.byteLength:0)]}function ge(e,t){let n=PD(t)?t.value:t;return n instanceof e?e===Uint8Array?new e(n.buffer,n.byteOffset,n.byteLength):n:n?(typeof n=="string"&&(n=UI(n)),n instanceof ArrayBuffer?new e(n):n instanceof jI?new e(n):fY(n)?ge(e,n.bytes()):ArrayBuffer.isView(n)?n.byteLength<=0?new e(0):new e(n.buffer,n.byteOffset,n.byteLength/e.BYTES_PER_ELEMENT):e.from(n)):new e(0)}const Ad=e=>ge(Int32Array,e),ie=e=>ge(Uint8Array,e),W2=e=>(e.next(),e);function*hY(e,t){const n=function*(i){yield i},r=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof jI?n(t):Yb(t)?t:n(t);return yield*W2(function*(i){let s=null;do s=i.next(yield ge(e,s));while(!s.done)}(r[Symbol.iterator]())),new e}const pY=e=>hY(Uint8Array,e);function qD(e,t){return on(this,arguments,function*(){if(ep(t))return yield K(yield K(yield*$a(Pr(qD(e,yield K(t))))));const r=function(o){return on(this,arguments,function*(){yield yield K(yield K(o))})},i=function(o){return on(this,arguments,function*(){yield K(yield*$a(Pr(W2(function*(a){let l=null;do l=a.next(yield l==null?void 0:l.value);while(!l.done)}(o[Symbol.iterator]())))))})},s=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof jI?r(t):Yb(t)?i(t):PI(t)?t:r(t);return yield K(yield*$a(Pr(W2(function(o){return on(this,arguments,function*(){let a=null;do a=yield K(o.next(yield yield K(ge(e,a))));while(!a.done)})}(s[Symbol.asyncIterator]()))))),yield K(new e)})}const yY=e=>qD(Uint8Array,e);function mY(e,t){let n=0;const r=e.length;if(r!==t.length)return!1;if(r>0)do if(e[n]!==t[n])return!1;while(++n<r);return!0}const ei={fromIterable(e){return u0(gY(e))},fromAsyncIterable(e){return u0(bY(e))},fromDOMStream(e){return u0(vY(e))},fromNodeStream(e){return u0(_Y(e))},toDOMStream(e,t){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(e,t){throw new Error('"toNodeStream" not available in this environment')}},u0=e=>(e.next(),e);function*gY(e){let t,n=!1,r=[],i,s,o,a=0;function l(){return s==="peek"?Os(r,o)[0]:([i,r,a]=Os(r,o),i)}({cmd:s,size:o}=yield null);const c=pY(e)[Symbol.iterator]();try{do if({done:t,value:i}=Number.isNaN(o-a)?c.next():c.next(o-a),!t&&i.byteLength>0&&(r.push(i),a+=i.byteLength),t||o<=a)do({cmd:s,size:o}=yield l());while(o<a);while(!t)}catch(u){(n=!0)&&typeof c.throw=="function"&&c.throw(u)}finally{n===!1&&typeof c.return=="function"&&c.return(null)}return null}function bY(e){return on(this,arguments,function*(){let n,r=!1,i=[],s,o,a,l=0;function c(){return o==="peek"?Os(i,a)[0]:([s,i,l]=Os(i,a),s)}({cmd:o,size:a}=yield yield K(null));const u=yY(e)[Symbol.asyncIterator]();try{do if({done:n,value:s}=Number.isNaN(a-l)?yield K(u.next()):yield K(u.next(a-l)),!n&&s.byteLength>0&&(i.push(s),l+=s.byteLength),n||a<=l)do({cmd:o,size:a}=yield yield K(c()));while(a<l);while(!n)}catch(f){(r=!0)&&typeof u.throw=="function"&&(yield K(u.throw(f)))}finally{r===!1&&typeof u.return=="function"&&(yield K(u.return(new Uint8Array(0))))}return yield K(null)})}function vY(e){return on(this,arguments,function*(){let n=!1,r=!1,i=[],s,o,a,l=0;function c(){return o==="peek"?Os(i,a)[0]:([s,i,l]=Os(i,a),s)}({cmd:o,size:a}=yield yield K(null));const u=new wY(e);try{do if({done:n,value:s}=Number.isNaN(a-l)?yield K(u.read()):yield K(u.read(a-l)),!n&&s.byteLength>0&&(i.push(ie(s)),l+=s.byteLength),n||a<=l)do({cmd:o,size:a}=yield yield K(c()));while(a<l);while(!n)}catch(f){(r=!0)&&(yield K(u.cancel(f)))}finally{r===!1?yield K(u.cancel()):e.locked&&u.releaseLock()}return yield K(null)})}let wY=class{constructor(t){this.source=t,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(t){return W(this,void 0,void 0,function*(){const{reader:n,source:r}=this;n&&(yield n.cancel(t).catch(()=>{})),r&&r.locked&&this.releaseLock()})}read(t){return W(this,void 0,void 0,function*(){if(t===0)return{done:this.reader==null,value:new Uint8Array(0)};const n=yield this.reader.read();return!n.done&&(n.value=ie(n)),n})}};const Bw=(e,t)=>{const n=i=>r([t,i]);let r;return[t,n,new Promise(i=>(r=i)&&e.once(t,n))]};function _Y(e){return on(this,arguments,function*(){const n=[];let r="error",i=!1,s=null,o,a,l=0,c=[],u;function f(){return o==="peek"?Os(c,a)[0]:([u,c,l]=Os(c,a),u)}if({cmd:o,size:a}=yield yield K(null),e.isTTY)return yield yield K(new Uint8Array(0)),yield K(null);try{n[0]=Bw(e,"end"),n[1]=Bw(e,"error");do{if(n[2]=Bw(e,"readable"),[r,s]=yield K(Promise.race(n.map(h=>h[2]))),r==="error")break;if((i=r==="end")||(Number.isFinite(a-l)?(u=ie(e.read(a-l)),u.byteLength<a-l&&(u=ie(e.read()))):u=ie(e.read()),u.byteLength>0&&(c.push(u),l+=u.byteLength)),i||a<=l)do({cmd:o,size:a}=yield yield K(f()));while(a<l)}while(!i)}finally{yield K(d(n,r==="error"?s:null))}return yield K(null);function d(h,p){return u=c=null,new Promise((g,v)=>{for(const[y,m]of h)e.off(y,m);try{const y=e.destroy;y&&y.call(e,p),p=void 0}catch(y){p=y||p}finally{p!=null?v(p):g()}})}})}var ai;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(ai||(ai={}));var Vi;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(Vi||(Vi={}));var _r;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(_r||(_r={}));var Fo;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(Fo||(Fo={}));var ee;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(ee||(ee={}));var La;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(La||(La={}));var ye;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(ye||(ye={}));var U;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.Float=3]="Float",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct=13]="Struct",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Dictionary=-1]="Dictionary",e[e.Int8=-2]="Int8",e[e.Int16=-3]="Int16",e[e.Int32=-4]="Int32",e[e.Int64=-5]="Int64",e[e.Uint8=-6]="Uint8",e[e.Uint16=-7]="Uint16",e[e.Uint32=-8]="Uint32",e[e.Uint64=-9]="Uint64",e[e.Float16=-10]="Float16",e[e.Float32=-11]="Float32",e[e.Float64=-12]="Float64",e[e.DateDay=-13]="DateDay",e[e.DateMillisecond=-14]="DateMillisecond",e[e.TimestampSecond=-15]="TimestampSecond",e[e.TimestampMillisecond=-16]="TimestampMillisecond",e[e.TimestampMicrosecond=-17]="TimestampMicrosecond",e[e.TimestampNanosecond=-18]="TimestampNanosecond",e[e.TimeSecond=-19]="TimeSecond",e[e.TimeMillisecond=-20]="TimeMillisecond",e[e.TimeMicrosecond=-21]="TimeMicrosecond",e[e.TimeNanosecond=-22]="TimeNanosecond",e[e.DenseUnion=-23]="DenseUnion",e[e.SparseUnion=-24]="SparseUnion",e[e.IntervalDayTime=-25]="IntervalDayTime",e[e.IntervalYearMonth=-26]="IntervalYearMonth"})(U||(U={}));var ro;(function(e){e[e.OFFSET=0]="OFFSET",e[e.DATA=1]="DATA",e[e.VALIDITY=2]="VALIDITY",e[e.TYPE=3]="TYPE"})(ro||(ro={}));const SY=void 0;function np(e){if(e===null)return"null";if(e===SY)return"undefined";switch(typeof e){case"number":return`${e}`;case"bigint":return`${e}`;case"string":return`"${e}"`}return typeof e[Symbol.toPrimitive]=="function"?e[Symbol.toPrimitive]("string"):ArrayBuffer.isView(e)?e instanceof Zp||e instanceof Jp?`[${[...e].map(t=>np(t))}]`:`[${e}]`:ArrayBuffer.isView(e)?`[${e}]`:JSON.stringify(e,(t,n)=>typeof n=="bigint"?`${n}`:n)}const xY=Symbol.for("isArrowBigNum");function Qi(e,...t){return t.length===0?Object.setPrototypeOf(ge(this.TypedArray,e),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(e,...t),this.constructor.prototype)}Qi.prototype[xY]=!0;Qi.prototype.toJSON=function(){return`"${Zl(this)}"`};Qi.prototype.valueOf=function(){return WD(this)};Qi.prototype.toString=function(){return Zl(this)};Qi.prototype[Symbol.toPrimitive]=function(e="default"){switch(e){case"number":return WD(this);case"string":return Zl(this);case"default":return H2(this)}return Zl(this)};function Wu(...e){return Qi.apply(this,e)}function Hu(...e){return Qi.apply(this,e)}function rp(...e){return Qi.apply(this,e)}Object.setPrototypeOf(Wu.prototype,Object.create(Int32Array.prototype));Object.setPrototypeOf(Hu.prototype,Object.create(Uint32Array.prototype));Object.setPrototypeOf(rp.prototype,Object.create(Uint32Array.prototype));Object.assign(Wu.prototype,Qi.prototype,{constructor:Wu,signed:!0,TypedArray:Int32Array,BigIntArray:Zp});Object.assign(Hu.prototype,Qi.prototype,{constructor:Hu,signed:!1,TypedArray:Uint32Array,BigIntArray:Jp});Object.assign(rp.prototype,Qi.prototype,{constructor:rp,signed:!0,TypedArray:Uint32Array,BigIntArray:Jp});function WD(e){const{buffer:t,byteOffset:n,length:r,signed:i}=e,s=new Jp(t,n,r),o=i&&s[s.length-1]&BigInt(1)<<BigInt(63);let a=BigInt(o?1:0),l=BigInt(0);if(o){for(const c of s)a+=~c*(BigInt(1)<<BigInt(32)*l++);a*=BigInt(-1)}else for(const c of s)a+=c*(BigInt(1)<<BigInt(32)*l++);return a}let Zl,H2;lY?(H2=e=>e.byteLength===8?new e.BigIntArray(e.buffer,e.byteOffset,1)[0]:Lw(e),Zl=e=>e.byteLength===8?`${new e.BigIntArray(e.buffer,e.byteOffset,1)[0]}`:Lw(e)):(Zl=Lw,H2=Zl);function Lw(e){let t="";const n=new Uint32Array(2);let r=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);const i=new Uint32Array((r=new Uint16Array(r).reverse()).buffer);let s=-1;const o=r.length-1;do{for(n[0]=r[s=0];s<o;)r[s++]=n[1]=n[0]/10,n[0]=(n[0]-n[1]*10<<16)+r[s];r[s]=n[1]=n[0]/10,n[0]=n[0]-n[1]*10,t=`${n[0]}${t}`}while(i[0]||i[1]||i[2]||i[3]);return t??"0"}let IY=class HD{static new(t,n){switch(n){case!0:return new Wu(t);case!1:return new Hu(t)}switch(t.constructor){case Int8Array:case Int16Array:case Int32Array:case Zp:return new Wu(t)}return t.byteLength===16?new rp(t):new Hu(t)}static signed(t){return new Wu(t)}static unsigned(t){return new Hu(t)}static decimal(t){return new rp(t)}constructor(t,n){return HD.new(t,n)}};var GD,XD,QD,KD,ZD,JD,t8,e8,n8,r8,i8,s8,o8,a8,l8,c8,u8,f8,d8;let Ft=class G2{static isNull(t){return(t==null?void 0:t.typeId)===U.Null}static isInt(t){return(t==null?void 0:t.typeId)===U.Int}static isFloat(t){return(t==null?void 0:t.typeId)===U.Float}static isBinary(t){return(t==null?void 0:t.typeId)===U.Binary}static isUtf8(t){return(t==null?void 0:t.typeId)===U.Utf8}static isBool(t){return(t==null?void 0:t.typeId)===U.Bool}static isDecimal(t){return(t==null?void 0:t.typeId)===U.Decimal}static isDate(t){return(t==null?void 0:t.typeId)===U.Date}static isTime(t){return(t==null?void 0:t.typeId)===U.Time}static isTimestamp(t){return(t==null?void 0:t.typeId)===U.Timestamp}static isInterval(t){return(t==null?void 0:t.typeId)===U.Interval}static isList(t){return(t==null?void 0:t.typeId)===U.List}static isStruct(t){return(t==null?void 0:t.typeId)===U.Struct}static isUnion(t){return(t==null?void 0:t.typeId)===U.Union}static isFixedSizeBinary(t){return(t==null?void 0:t.typeId)===U.FixedSizeBinary}static isFixedSizeList(t){return(t==null?void 0:t.typeId)===U.FixedSizeList}static isMap(t){return(t==null?void 0:t.typeId)===U.Map}static isDictionary(t){return(t==null?void 0:t.typeId)===U.Dictionary}static isDenseUnion(t){return G2.isUnion(t)&&t.mode===Vi.Dense}static isSparseUnion(t){return G2.isUnion(t)&&t.mode===Vi.Sparse}get typeId(){return U.NONE}};GD=Symbol.toStringTag;Ft[GD]=(e=>(e.children=null,e.ArrayType=Array,e[Symbol.toStringTag]="DataType"))(Ft.prototype);let Ra=class extends Ft{toString(){return"Null"}get typeId(){return U.Null}};XD=Symbol.toStringTag;Ra[XD]=(e=>e[Symbol.toStringTag]="Null")(Ra.prototype);let Ca=class extends Ft{constructor(t,n){super(),this.isSigned=t,this.bitWidth=n}get typeId(){return U.Int}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?Zp:Jp}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}};QD=Symbol.toStringTag;Ca[QD]=(e=>(e.isSigned=null,e.bitWidth=null,e[Symbol.toStringTag]="Int"))(Ca.prototype);let ip=class extends Ca{constructor(){super(!0,32)}get ArrayType(){return Int32Array}};Object.defineProperty(ip.prototype,"ArrayType",{value:Int32Array});let sp=class extends Ft{constructor(t){super(),this.precision=t}get typeId(){return U.Float}get ArrayType(){switch(this.precision){case _r.HALF:return Uint16Array;case _r.SINGLE:return Float32Array;case _r.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}};KD=Symbol.toStringTag;sp[KD]=(e=>(e.precision=null,e[Symbol.toStringTag]="Float"))(sp.prototype);let ag=class extends Ft{constructor(){super()}get typeId(){return U.Binary}toString(){return"Binary"}};ZD=Symbol.toStringTag;ag[ZD]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Binary"))(ag.prototype);let lg=class extends Ft{constructor(){super()}get typeId(){return U.Utf8}toString(){return"Utf8"}};JD=Symbol.toStringTag;lg[JD]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Utf8"))(lg.prototype);let cg=class extends Ft{constructor(){super()}get typeId(){return U.Bool}toString(){return"Bool"}};t8=Symbol.toStringTag;cg[t8]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Bool"))(cg.prototype);let ug=class extends Ft{constructor(t,n,r=128){super(),this.scale=t,this.precision=n,this.bitWidth=r}get typeId(){return U.Decimal}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}};e8=Symbol.toStringTag;ug[e8]=(e=>(e.scale=null,e.precision=null,e.ArrayType=Uint32Array,e[Symbol.toStringTag]="Decimal"))(ug.prototype);let fg=class extends Ft{constructor(t){super(),this.unit=t}get typeId(){return U.Date}toString(){return`Date${(this.unit+1)*32}<${Fo[this.unit]}>`}};n8=Symbol.toStringTag;fg[n8]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Date"))(fg.prototype);let op=class extends Ft{constructor(t,n){super(),this.unit=t,this.bitWidth=n}get typeId(){return U.Time}toString(){return`Time${this.bitWidth}<${ee[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return Zp}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}};r8=Symbol.toStringTag;op[r8]=(e=>(e.unit=null,e.bitWidth=null,e[Symbol.toStringTag]="Time"))(op.prototype);let dg=class extends Ft{constructor(t,n){super(),this.unit=t,this.timezone=n}get typeId(){return U.Timestamp}toString(){return`Timestamp<${ee[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}};i8=Symbol.toStringTag;dg[i8]=(e=>(e.unit=null,e.timezone=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Timestamp"))(dg.prototype);let hg=class extends Ft{constructor(t){super(),this.unit=t}get typeId(){return U.Interval}toString(){return`Interval<${La[this.unit]}>`}};s8=Symbol.toStringTag;hg[s8]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Interval"))(hg.prototype);let pg=class extends Ft{constructor(t){super(),this.children=[t]}get typeId(){return U.List}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}};o8=Symbol.toStringTag;pg[o8]=(e=>(e.children=null,e[Symbol.toStringTag]="List"))(pg.prototype);let Zn=class extends Ft{constructor(t){super(),this.children=t}get typeId(){return U.Struct}toString(){return`Struct<{${this.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}};a8=Symbol.toStringTag;Zn[a8]=(e=>(e.children=null,e[Symbol.toStringTag]="Struct"))(Zn.prototype);let yg=class extends Ft{constructor(t,n,r){super(),this.mode=t,this.children=r,this.typeIds=n=Int32Array.from(n),this.typeIdToChildIndex=n.reduce((i,s,o)=>(i[s]=o)&&i||i,Object.create(null))}get typeId(){return U.Union}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(t=>`${t.type}`).join(" | ")}>`}};l8=Symbol.toStringTag;yg[l8]=(e=>(e.mode=null,e.typeIds=null,e.children=null,e.typeIdToChildIndex=null,e.ArrayType=Int8Array,e[Symbol.toStringTag]="Union"))(yg.prototype);let mg=class extends Ft{constructor(t){super(),this.byteWidth=t}get typeId(){return U.FixedSizeBinary}toString(){return`FixedSizeBinary[${this.byteWidth}]`}};c8=Symbol.toStringTag;mg[c8]=(e=>(e.byteWidth=null,e.ArrayType=Uint8Array,e[Symbol.toStringTag]="FixedSizeBinary"))(mg.prototype);let gg=class extends Ft{constructor(t,n){super(),this.listSize=t,this.children=[n]}get typeId(){return U.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}};u8=Symbol.toStringTag;gg[u8]=(e=>(e.children=null,e.listSize=null,e[Symbol.toStringTag]="FixedSizeList"))(gg.prototype);let bg=class extends Ft{constructor(t,n=!1){super(),this.children=[t],this.keysSorted=n}get typeId(){return U.Map}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}};f8=Symbol.toStringTag;bg[f8]=(e=>(e.children=null,e.keysSorted=null,e[Symbol.toStringTag]="Map_"))(bg.prototype);const TY=(e=>()=>++e)(-1);let gf=class extends Ft{constructor(t,n,r,i){super(),this.indices=n,this.dictionary=t,this.isOrdered=i||!1,this.id=r==null?TY():typeof r=="number"?r:r.low}get typeId(){return U.Dictionary}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}};d8=Symbol.toStringTag;gf[d8]=(e=>(e.id=null,e.indices=null,e.isOrdered=null,e.dictionary=null,e[Symbol.toStringTag]="Dictionary"))(gf.prototype);function io(e){const t=e;switch(e.typeId){case U.Decimal:return e.bitWidth/32;case U.Timestamp:return 2;case U.Date:return 1+t.unit;case U.Interval:return 1+t.unit;case U.FixedSizeList:return t.listSize;case U.FixedSizeBinary:return t.byteWidth;default:return 1}}let Wt=class{visitMany(t,...n){return t.map((r,i)=>this.visit(r,...n.map(s=>s[i])))}visit(...t){return this.getVisitFn(t[0],!1).apply(this,t)}getVisitFn(t,n=!0){return EY(this,t,n)}getVisitFnByTypeId(t,n=!0){return Qc(this,t,n)}visitNull(t,...n){return null}visitBool(t,...n){return null}visitInt(t,...n){return null}visitFloat(t,...n){return null}visitUtf8(t,...n){return null}visitBinary(t,...n){return null}visitFixedSizeBinary(t,...n){return null}visitDate(t,...n){return null}visitTimestamp(t,...n){return null}visitTime(t,...n){return null}visitDecimal(t,...n){return null}visitList(t,...n){return null}visitStruct(t,...n){return null}visitUnion(t,...n){return null}visitDictionary(t,...n){return null}visitInterval(t,...n){return null}visitFixedSizeList(t,...n){return null}visitMap(t,...n){return null}};function EY(e,t,n=!0){return typeof t=="number"?Qc(e,t,n):typeof t=="string"&&t in U?Qc(e,U[t],n):t&&t instanceof Ft?Qc(e,lM(t),n):t!=null&&t.type&&t.type instanceof Ft?Qc(e,lM(t.type),n):Qc(e,U.NONE,n)}function Qc(e,t,n=!0){let r=null;switch(t){case U.Null:r=e.visitNull;break;case U.Bool:r=e.visitBool;break;case U.Int:r=e.visitInt;break;case U.Int8:r=e.visitInt8||e.visitInt;break;case U.Int16:r=e.visitInt16||e.visitInt;break;case U.Int32:r=e.visitInt32||e.visitInt;break;case U.Int64:r=e.visitInt64||e.visitInt;break;case U.Uint8:r=e.visitUint8||e.visitInt;break;case U.Uint16:r=e.visitUint16||e.visitInt;break;case U.Uint32:r=e.visitUint32||e.visitInt;break;case U.Uint64:r=e.visitUint64||e.visitInt;break;case U.Float:r=e.visitFloat;break;case U.Float16:r=e.visitFloat16||e.visitFloat;break;case U.Float32:r=e.visitFloat32||e.visitFloat;break;case U.Float64:r=e.visitFloat64||e.visitFloat;break;case U.Utf8:r=e.visitUtf8;break;case U.Binary:r=e.visitBinary;break;case U.FixedSizeBinary:r=e.visitFixedSizeBinary;break;case U.Date:r=e.visitDate;break;case U.DateDay:r=e.visitDateDay||e.visitDate;break;case U.DateMillisecond:r=e.visitDateMillisecond||e.visitDate;break;case U.Timestamp:r=e.visitTimestamp;break;case U.TimestampSecond:r=e.visitTimestampSecond||e.visitTimestamp;break;case U.TimestampMillisecond:r=e.visitTimestampMillisecond||e.visitTimestamp;break;case U.TimestampMicrosecond:r=e.visitTimestampMicrosecond||e.visitTimestamp;break;case U.TimestampNanosecond:r=e.visitTimestampNanosecond||e.visitTimestamp;break;case U.Time:r=e.visitTime;break;case U.TimeSecond:r=e.visitTimeSecond||e.visitTime;break;case U.TimeMillisecond:r=e.visitTimeMillisecond||e.visitTime;break;case U.TimeMicrosecond:r=e.visitTimeMicrosecond||e.visitTime;break;case U.TimeNanosecond:r=e.visitTimeNanosecond||e.visitTime;break;case U.Decimal:r=e.visitDecimal;break;case U.List:r=e.visitList;break;case U.Struct:r=e.visitStruct;break;case U.Union:r=e.visitUnion;break;case U.DenseUnion:r=e.visitDenseUnion||e.visitUnion;break;case U.SparseUnion:r=e.visitSparseUnion||e.visitUnion;break;case U.Dictionary:r=e.visitDictionary;break;case U.Interval:r=e.visitInterval;break;case U.IntervalDayTime:r=e.visitIntervalDayTime||e.visitInterval;break;case U.IntervalYearMonth:r=e.visitIntervalYearMonth||e.visitInterval;break;case U.FixedSizeList:r=e.visitFixedSizeList;break;case U.Map:r=e.visitMap;break}if(typeof r=="function")return r;if(!n)return()=>null;throw new Error(`Unrecognized type '${U[t]}'`)}function lM(e){switch(e.typeId){case U.Null:return U.Null;case U.Int:{const{bitWidth:t,isSigned:n}=e;switch(t){case 8:return n?U.Int8:U.Uint8;case 16:return n?U.Int16:U.Uint16;case 32:return n?U.Int32:U.Uint32;case 64:return n?U.Int64:U.Uint64}return U.Int}case U.Float:switch(e.precision){case _r.HALF:return U.Float16;case _r.SINGLE:return U.Float32;case _r.DOUBLE:return U.Float64}return U.Float;case U.Binary:return U.Binary;case U.Utf8:return U.Utf8;case U.Bool:return U.Bool;case U.Decimal:return U.Decimal;case U.Time:switch(e.unit){case ee.SECOND:return U.TimeSecond;case ee.MILLISECOND:return U.TimeMillisecond;case ee.MICROSECOND:return U.TimeMicrosecond;case ee.NANOSECOND:return U.TimeNanosecond}return U.Time;case U.Timestamp:switch(e.unit){case ee.SECOND:return U.TimestampSecond;case ee.MILLISECOND:return U.TimestampMillisecond;case ee.MICROSECOND:return U.TimestampMicrosecond;case ee.NANOSECOND:return U.TimestampNanosecond}return U.Timestamp;case U.Date:switch(e.unit){case Fo.DAY:return U.DateDay;case Fo.MILLISECOND:return U.DateMillisecond}return U.Date;case U.Interval:switch(e.unit){case La.DAY_TIME:return U.IntervalDayTime;case La.YEAR_MONTH:return U.IntervalYearMonth}return U.Interval;case U.Map:return U.Map;case U.List:return U.List;case U.Struct:return U.Struct;case U.Union:switch(e.mode){case Vi.Dense:return U.DenseUnion;case Vi.Sparse:return U.SparseUnion}return U.Union;case U.FixedSizeBinary:return U.FixedSizeBinary;case U.FixedSizeList:return U.FixedSizeList;case U.Dictionary:return U.Dictionary}throw new Error(`Unrecognized type '${U[e.typeId]}'`)}Wt.prototype.visitInt8=null;Wt.prototype.visitInt16=null;Wt.prototype.visitInt32=null;Wt.prototype.visitInt64=null;Wt.prototype.visitUint8=null;Wt.prototype.visitUint16=null;Wt.prototype.visitUint32=null;Wt.prototype.visitUint64=null;Wt.prototype.visitFloat16=null;Wt.prototype.visitFloat32=null;Wt.prototype.visitFloat64=null;Wt.prototype.visitDateDay=null;Wt.prototype.visitDateMillisecond=null;Wt.prototype.visitTimestampSecond=null;Wt.prototype.visitTimestampMillisecond=null;Wt.prototype.visitTimestampMicrosecond=null;Wt.prototype.visitTimestampNanosecond=null;Wt.prototype.visitTimeSecond=null;Wt.prototype.visitTimeMillisecond=null;Wt.prototype.visitTimeMicrosecond=null;Wt.prototype.visitTimeNanosecond=null;Wt.prototype.visitDenseUnion=null;Wt.prototype.visitSparseUnion=null;Wt.prototype.visitIntervalDayTime=null;Wt.prototype.visitIntervalYearMonth=null;const h8=new Float64Array(1),Rc=new Uint32Array(h8.buffer);function p8(e){const t=(e&31744)>>10,n=(e&1023)/1024,r=Math.pow(-1,(e&32768)>>15);switch(t){case 31:return r*(n?Number.NaN:1/0);case 0:return r*(n?6103515625e-14*n:0)}return r*Math.pow(2,t-15)*(1+n)}function AY(e){if(e!==e)return 32256;h8[0]=e;const t=(Rc[1]&2147483648)>>16&65535;let n=Rc[1]&2146435072,r=0;return n>=1089470464?Rc[0]>0?n=31744:(n=(n&2080374784)>>16,r=(Rc[1]&1048575)>>10):n<=1056964608?(r=1048576+(Rc[1]&1048575),r=1048576+(r<<(n>>20)-998)>>21,n=0):(n=n-1056964608>>10,r=(Rc[1]&1048575)+512>>10),t|n|r&65535}let Mt=class extends Wt{};function kt(e){return(t,n,r)=>{if(t.setValid(n,r!=null))return e(t,n,r)}}const MY=(e,t,n)=>{e[t]=Math.trunc(n/864e5)},VI=(e,t,n)=>{e[t]=Math.trunc(n%4294967296),e[t+1]=Math.trunc(n/4294967296)},$Y=(e,t,n)=>{e[t]=Math.trunc(n*1e3%4294967296),e[t+1]=Math.trunc(n*1e3/4294967296)},NY=(e,t,n)=>{e[t]=Math.trunc(n*1e6%4294967296),e[t+1]=Math.trunc(n*1e6/4294967296)},y8=(e,t,n,r)=>{if(n+1<t.length){const{[n]:i,[n+1]:s}=t;e.set(r.subarray(0,s-i),i)}},kY=({offset:e,values:t},n,r)=>{const i=e+n;r?t[i>>3]|=1<<i%8:t[i>>3]&=~(1<<i%8)},zo=({values:e},t,n)=>{e[t]=n},YI=({values:e},t,n)=>{e[t]=n},m8=({values:e},t,n)=>{e[t]=AY(n)},DY=(e,t,n)=>{switch(e.type.precision){case _r.HALF:return m8(e,t,n);case _r.SINGLE:case _r.DOUBLE:return YI(e,t,n)}},g8=({values:e},t,n)=>{MY(e,t,n.valueOf())},b8=({values:e},t,n)=>{VI(e,t*2,n.valueOf())},OY=({stride:e,values:t},n,r)=>{t.set(r.subarray(0,e),e*n)},FY=({values:e,valueOffsets:t},n,r)=>y8(e,t,n,r),BY=({values:e,valueOffsets:t},n,r)=>{y8(e,t,n,UI(r))},LY=(e,t,n)=>{e.type.unit===Fo.DAY?g8(e,t,n):b8(e,t,n)},v8=({values:e},t,n)=>VI(e,t*2,n/1e3),w8=({values:e},t,n)=>VI(e,t*2,n),_8=({values:e},t,n)=>$Y(e,t*2,n),S8=({values:e},t,n)=>NY(e,t*2,n),RY=(e,t,n)=>{switch(e.type.unit){case ee.SECOND:return v8(e,t,n);case ee.MILLISECOND:return w8(e,t,n);case ee.MICROSECOND:return _8(e,t,n);case ee.NANOSECOND:return S8(e,t,n)}},x8=({values:e},t,n)=>{e[t]=n},I8=({values:e},t,n)=>{e[t]=n},T8=({values:e},t,n)=>{e[t]=n},E8=({values:e},t,n)=>{e[t]=n},CY=(e,t,n)=>{switch(e.type.unit){case ee.SECOND:return x8(e,t,n);case ee.MILLISECOND:return I8(e,t,n);case ee.MICROSECOND:return T8(e,t,n);case ee.NANOSECOND:return E8(e,t,n)}},UY=({values:e,stride:t},n,r)=>{e.set(r.subarray(0,t),t*n)},PY=(e,t,n)=>{const r=e.children[0],i=e.valueOffsets,s=vi.getVisitFn(r);if(Array.isArray(n))for(let o=-1,a=i[t],l=i[t+1];a<l;)s(r,a++,n[++o]);else for(let o=-1,a=i[t],l=i[t+1];a<l;)s(r,a++,n.get(++o))},zY=(e,t,n)=>{const r=e.children[0],{valueOffsets:i}=e,s=vi.getVisitFn(r);let{[t]:o,[t+1]:a}=i;const l=n instanceof Map?n.entries():Object.entries(n);for(const c of l)if(s(r,o,c),++o>=a)break},jY=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[s]),VY=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(s)),YY=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(i.name)),qY=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[i.name]),WY=(e,t,n)=>{const r=e.type.children.map(s=>vi.getVisitFn(s.type)),i=n instanceof Map?YY(t,n):n instanceof tn?VY(t,n):Array.isArray(n)?jY(t,n):qY(t,n);e.type.children.forEach((s,o)=>i(r[o],e.children[o],s,o))},HY=(e,t,n)=>{e.type.mode===Vi.Dense?A8(e,t,n):M8(e,t,n)},A8=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];vi.visit(i,e.valueOffsets[t],n)},M8=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];vi.visit(i,t,n)},GY=(e,t,n)=>{var r;(r=e.dictionary)===null||r===void 0||r.set(e.values[t],n)},XY=(e,t,n)=>{e.type.unit===La.DAY_TIME?$8(e,t,n):N8(e,t,n)},$8=({values:e},t,n)=>{e.set(n.subarray(0,2),2*t)},N8=({values:e},t,n)=>{e[t]=n[0]*12+n[1]%12},QY=(e,t,n)=>{const{stride:r}=e,i=e.children[0],s=vi.getVisitFn(i);if(Array.isArray(n))for(let o=-1,a=t*r;++o<r;)s(i,a+o,n[o]);else for(let o=-1,a=t*r;++o<r;)s(i,a+o,n.get(o))};Mt.prototype.visitBool=kt(kY);Mt.prototype.visitInt=kt(zo);Mt.prototype.visitInt8=kt(zo);Mt.prototype.visitInt16=kt(zo);Mt.prototype.visitInt32=kt(zo);Mt.prototype.visitInt64=kt(zo);Mt.prototype.visitUint8=kt(zo);Mt.prototype.visitUint16=kt(zo);Mt.prototype.visitUint32=kt(zo);Mt.prototype.visitUint64=kt(zo);Mt.prototype.visitFloat=kt(DY);Mt.prototype.visitFloat16=kt(m8);Mt.prototype.visitFloat32=kt(YI);Mt.prototype.visitFloat64=kt(YI);Mt.prototype.visitUtf8=kt(BY);Mt.prototype.visitBinary=kt(FY);Mt.prototype.visitFixedSizeBinary=kt(OY);Mt.prototype.visitDate=kt(LY);Mt.prototype.visitDateDay=kt(g8);Mt.prototype.visitDateMillisecond=kt(b8);Mt.prototype.visitTimestamp=kt(RY);Mt.prototype.visitTimestampSecond=kt(v8);Mt.prototype.visitTimestampMillisecond=kt(w8);Mt.prototype.visitTimestampMicrosecond=kt(_8);Mt.prototype.visitTimestampNanosecond=kt(S8);Mt.prototype.visitTime=kt(CY);Mt.prototype.visitTimeSecond=kt(x8);Mt.prototype.visitTimeMillisecond=kt(I8);Mt.prototype.visitTimeMicrosecond=kt(T8);Mt.prototype.visitTimeNanosecond=kt(E8);Mt.prototype.visitDecimal=kt(UY);Mt.prototype.visitList=kt(PY);Mt.prototype.visitStruct=kt(WY);Mt.prototype.visitUnion=kt(HY);Mt.prototype.visitDenseUnion=kt(A8);Mt.prototype.visitSparseUnion=kt(M8);Mt.prototype.visitDictionary=kt(GY);Mt.prototype.visitInterval=kt(XY);Mt.prototype.visitIntervalDayTime=kt($8);Mt.prototype.visitIntervalYearMonth=kt(N8);Mt.prototype.visitFixedSizeList=kt(QY);Mt.prototype.visitMap=kt(zY);const vi=new Mt,Ni=Symbol.for("parent"),Gu=Symbol.for("rowIndex");let qI=class{constructor(t,n){return this[Ni]=t,this[Gu]=n,new Proxy(this,new ZY)}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[Gu],n=this[Ni],r=n.type.children,i={};for(let s=-1,o=r.length;++s<o;)i[r[s].name]=Sr.visit(n.children[s],t);return i}toString(){return`{${[...this].map(([t,n])=>`${np(t)}: ${np(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new KY(this[Ni],this[Gu])}},KY=class{constructor(t,n){this.childIndex=0,this.children=t.children,this.rowIndex=n,this.childFields=t.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const t=this.childIndex;return t<this.numChildren?(this.childIndex=t+1,{done:!1,value:[this.childFields[t].name,Sr.visit(this.children[t],this.rowIndex)]}):{done:!0,value:null}}};Object.defineProperties(qI.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[Ni]:{writable:!0,enumerable:!1,configurable:!1,value:null},[Gu]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});let ZY=class{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[Ni].type.children.map(n=>n.name)}has(t,n){return t[Ni].type.children.findIndex(r=>r.name===n)!==-1}getOwnPropertyDescriptor(t,n){if(t[Ni].type.children.findIndex(r=>r.name===n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[Ni].type.children.findIndex(i=>i.name===n);if(r!==-1){const i=Sr.visit(t[Ni].children[r],t[Gu]);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[Ni].type.children.findIndex(s=>s.name===n);return i!==-1?(vi.visit(t[Ni].children[i],t[Gu],r),Reflect.set(t,n,r)):Reflect.has(t,n)||typeof n=="symbol"?Reflect.set(t,n,r):!1}},xt=class extends Wt{};function $t(e){return(t,n)=>t.getValid(n)?e(t,n):null}const JY=(e,t)=>864e5*e[t],WI=(e,t)=>4294967296*e[t+1]+(e[t]>>>0),tq=(e,t)=>4294967296*(e[t+1]/1e3)+(e[t]>>>0)/1e3,eq=(e,t)=>4294967296*(e[t+1]/1e6)+(e[t]>>>0)/1e6,k8=e=>new Date(e),nq=(e,t)=>k8(JY(e,t)),rq=(e,t)=>k8(WI(e,t)),iq=(e,t)=>null,D8=(e,t,n)=>{if(n+1>=t.length)return null;const r=t[n],i=t[n+1];return e.subarray(r,i)},sq=({offset:e,values:t},n)=>{const r=e+n;return(t[r>>3]&1<<r%8)!==0},O8=({values:e},t)=>nq(e,t),F8=({values:e},t)=>rq(e,t*2),sl=({stride:e,values:t},n)=>t[e*n],oq=({stride:e,values:t},n)=>p8(t[e*n]),B8=({values:e},t)=>e[t],aq=({stride:e,values:t},n)=>t.subarray(e*n,e*(n+1)),lq=({values:e,valueOffsets:t},n)=>D8(e,t,n),cq=({values:e,valueOffsets:t},n)=>{const r=D8(e,t,n);return r!==null?Y2(r):null},uq=({values:e},t)=>e[t],fq=({type:e,values:t},n)=>e.precision!==_r.HALF?t[n]:p8(t[n]),dq=(e,t)=>e.type.unit===Fo.DAY?O8(e,t):F8(e,t),L8=({values:e},t)=>1e3*WI(e,t*2),R8=({values:e},t)=>WI(e,t*2),C8=({values:e},t)=>tq(e,t*2),U8=({values:e},t)=>eq(e,t*2),hq=(e,t)=>{switch(e.type.unit){case ee.SECOND:return L8(e,t);case ee.MILLISECOND:return R8(e,t);case ee.MICROSECOND:return C8(e,t);case ee.NANOSECOND:return U8(e,t)}},P8=({values:e},t)=>e[t],z8=({values:e},t)=>e[t],j8=({values:e},t)=>e[t],V8=({values:e},t)=>e[t],pq=(e,t)=>{switch(e.type.unit){case ee.SECOND:return P8(e,t);case ee.MILLISECOND:return z8(e,t);case ee.MICROSECOND:return j8(e,t);case ee.NANOSECOND:return V8(e,t)}},yq=({values:e,stride:t},n)=>IY.decimal(e.subarray(t*n,t*(n+1))),mq=(e,t)=>{const{valueOffsets:n,stride:r,children:i}=e,{[t*r]:s,[t*r+1]:o}=n,l=i[0].slice(s,o-s);return new tn([l])},gq=(e,t)=>{const{valueOffsets:n,children:r}=e,{[t]:i,[t+1]:s}=n,o=r[0];return new HI(o.slice(i,s-i))},bq=(e,t)=>new qI(e,t),vq=(e,t)=>e.type.mode===Vi.Dense?Y8(e,t):q8(e,t),Y8=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return Sr.visit(r,e.valueOffsets[t])},q8=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return Sr.visit(r,t)},wq=(e,t)=>{var n;return(n=e.dictionary)===null||n===void 0?void 0:n.get(e.values[t])},_q=(e,t)=>e.type.unit===La.DAY_TIME?W8(e,t):H8(e,t),W8=({values:e},t)=>e.subarray(2*t,2*(t+1)),H8=({values:e},t)=>{const n=e[t],r=new Int32Array(2);return r[0]=Math.trunc(n/12),r[1]=Math.trunc(n%12),r},Sq=(e,t)=>{const{stride:n,children:r}=e,s=r[0].slice(t*n,n);return new tn([s])};xt.prototype.visitNull=$t(iq);xt.prototype.visitBool=$t(sq);xt.prototype.visitInt=$t(uq);xt.prototype.visitInt8=$t(sl);xt.prototype.visitInt16=$t(sl);xt.prototype.visitInt32=$t(sl);xt.prototype.visitInt64=$t(B8);xt.prototype.visitUint8=$t(sl);xt.prototype.visitUint16=$t(sl);xt.prototype.visitUint32=$t(sl);xt.prototype.visitUint64=$t(B8);xt.prototype.visitFloat=$t(fq);xt.prototype.visitFloat16=$t(oq);xt.prototype.visitFloat32=$t(sl);xt.prototype.visitFloat64=$t(sl);xt.prototype.visitUtf8=$t(cq);xt.prototype.visitBinary=$t(lq);xt.prototype.visitFixedSizeBinary=$t(aq);xt.prototype.visitDate=$t(dq);xt.prototype.visitDateDay=$t(O8);xt.prototype.visitDateMillisecond=$t(F8);xt.prototype.visitTimestamp=$t(hq);xt.prototype.visitTimestampSecond=$t(L8);xt.prototype.visitTimestampMillisecond=$t(R8);xt.prototype.visitTimestampMicrosecond=$t(C8);xt.prototype.visitTimestampNanosecond=$t(U8);xt.prototype.visitTime=$t(pq);xt.prototype.visitTimeSecond=$t(P8);xt.prototype.visitTimeMillisecond=$t(z8);xt.prototype.visitTimeMicrosecond=$t(j8);xt.prototype.visitTimeNanosecond=$t(V8);xt.prototype.visitDecimal=$t(yq);xt.prototype.visitList=$t(mq);xt.prototype.visitStruct=$t(bq);xt.prototype.visitUnion=$t(vq);xt.prototype.visitDenseUnion=$t(Y8);xt.prototype.visitSparseUnion=$t(q8);xt.prototype.visitDictionary=$t(wq);xt.prototype.visitInterval=$t(_q);xt.prototype.visitIntervalDayTime=$t(W8);xt.prototype.visitIntervalYearMonth=$t(H8);xt.prototype.visitFixedSizeList=$t(Sq);xt.prototype.visitMap=$t(gq);const Sr=new xt,ys=Symbol.for("keys"),Xu=Symbol.for("vals");let HI=class{constructor(t){return this[ys]=new tn([t.children[0]]).memoize(),this[Xu]=t.children[1],new Proxy(this,new Iq)}[Symbol.iterator](){return new xq(this[ys],this[Xu])}get size(){return this[ys].length}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[ys],n=this[Xu],r={};for(let i=-1,s=t.length;++i<s;)r[t.get(i)]=Sr.visit(n,i);return r}toString(){return`{${[...this].map(([t,n])=>`${np(t)}: ${np(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}},xq=class{constructor(t,n){this.keys=t,this.vals=n,this.keyIndex=0,this.numKeys=t.length}[Symbol.iterator](){return this}next(){const t=this.keyIndex;return t===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(t),Sr.visit(this.vals,t)]})}},Iq=class{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[ys].toArray().map(String)}has(t,n){return t[ys].includes(n)}getOwnPropertyDescriptor(t,n){if(t[ys].indexOf(n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[ys].indexOf(n);if(r!==-1){const i=Sr.visit(Reflect.get(t,Xu),r);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[ys].indexOf(n);return i!==-1?(vi.visit(Reflect.get(t,Xu),i,r),Reflect.set(t,n,r)):Reflect.has(t,n)?Reflect.set(t,n,r):!1}};Object.defineProperties(HI.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[ys]:{writable:!0,enumerable:!1,configurable:!1,value:null},[Xu]:{writable:!0,enumerable:!1,configurable:!1,value:null}});let cM;function G8(e,t,n,r){const{length:i=0}=e;let s=typeof t!="number"?0:t,o=typeof n!="number"?i:n;return s<0&&(s=(s%i+i)%i),o<0&&(o=(o%i+i)%i),o<s&&(cM=s,s=o,o=cM),o>i&&(o=i),r?r(e,s,o):[s,o]}const uM=e=>e!==e;function Kf(e){if(typeof e!=="object"||e===null)return uM(e)?uM:n=>n===e;if(e instanceof Date){const n=e.valueOf();return r=>r instanceof Date?r.valueOf()===n:!1}return ArrayBuffer.isView(e)?n=>n?mY(e,n):!1:e instanceof Map?Eq(e):Array.isArray(e)?Tq(e):e instanceof tn?Aq(e):Mq(e,!0)}function Tq(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=Kf(e[n]);return qb(t)}function Eq(e){let t=-1;const n=[];for(const r of e.values())n[++t]=Kf(r);return qb(n)}function Aq(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=Kf(e.get(n));return qb(t)}function Mq(e,t=!1){const n=Object.keys(e);if(!t&&n.length===0)return()=>!1;const r=[];for(let i=-1,s=n.length;++i<s;)r[i]=Kf(e[n[i]]);return qb(r,n)}function qb(e,t){return n=>{if(!n||typeof n!="object")return!1;switch(n.constructor){case Array:return $q(e,n);case Map:return fM(e,n,n.keys());case HI:case qI:case Object:case void 0:return fM(e,n,t||Object.keys(n))}return n instanceof tn?Nq(e,n):!1}}function $q(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t[r]))return!1;return!0}function Nq(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t.get(r)))return!1;return!0}function fM(e,t,n){const r=n[Symbol.iterator](),i=t instanceof Map?t.keys():Object.keys(t)[Symbol.iterator](),s=t instanceof Map?t.values():Object.values(t)[Symbol.iterator]();let o=0;const a=e.length;let l=s.next(),c=r.next(),u=i.next();for(;o<a&&!c.done&&!u.done&&!l.done&&!(c.value!==u.value||!e[o](l.value));++o,c=r.next(),u=i.next(),l=s.next());return o===a&&c.done&&u.done&&l.done?!0:(r.return&&r.return(),i.return&&i.return(),s.return&&s.return(),!1)}function X8(e,t,n,r){return(n&1<<r)!==0}function kq(e,t,n,r){return(n&1<<r)>>r}function Dq(e,t,n){const r=n.byteLength+7&-8;if(e>0||n.byteLength<r){const i=new Uint8Array(r);return i.set(e%8===0?n.subarray(e>>3):X2(new GI(n,e,t,null,X8)).subarray(0,r)),i}return n}function X2(e){const t=[];let n=0,r=0,i=0;for(const o of e)o&&(i|=1<<r),++r===8&&(t[n++]=i,i=r=0);(n===0||r>0)&&(t[n++]=i);const s=new Uint8Array(t.length+7&-8);return s.set(t),s}let GI=class{constructor(t,n,r,i,s){this.bytes=t,this.length=r,this.context=i,this.get=s,this.bit=n%8,this.byteIndex=n>>3,this.byte=t[this.byteIndex++],this.index=0}next(){return this.index<this.length?(this.bit===8&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}};function Q2(e,t,n){if(n-t<=0)return 0;if(n-t<8){let s=0;for(const o of new GI(e,t,n-t,e,kq))s+=o;return s}const r=n>>3<<3,i=t+(t%8===0?0:8-t%8);return Q2(e,t,i)+Q2(e,r,n)+Oq(e,i>>3,r-i>>3)}function Oq(e,t,n){let r=0,i=Math.trunc(t);const s=new DataView(e.buffer,e.byteOffset,e.byteLength),o=n===void 0?e.byteLength:i+n;for(;o-i>=4;)r+=Rw(s.getUint32(i)),i+=4;for(;o-i>=2;)r+=Rw(s.getUint16(i)),i+=2;for(;o-i>=1;)r+=Rw(s.getUint8(i)),i+=1;return r}function Rw(e){let t=Math.trunc(e);return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),(t+(t>>>4)&252645135)*16843009>>>24}const Fq=-1;let Fe=class K2{constructor(t,n,r,i,s,o=[],a){this.type=t,this.children=o,this.dictionary=a,this.offset=Math.floor(Math.max(n||0,0)),this.length=Math.floor(Math.max(r||0,0)),this._nullCount=Math.floor(Math.max(i||0,-1));let l;s instanceof K2?(this.stride=s.stride,this.values=s.values,this.typeIds=s.typeIds,this.nullBitmap=s.nullBitmap,this.valueOffsets=s.valueOffsets):(this.stride=io(t),s&&((l=s[0])&&(this.valueOffsets=l),(l=s[1])&&(this.values=l),(l=s[2])&&(this.nullBitmap=l),(l=s[3])&&(this.typeIds=l))),this.nullable=this._nullCount!==0&&this.nullBitmap&&this.nullBitmap.byteLength>0}get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get byteLength(){let t=0;const{valueOffsets:n,values:r,nullBitmap:i,typeIds:s}=this;return n&&(t+=n.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),s&&(t+=s.byteLength),this.children.reduce((o,a)=>o+a.byteLength,t)}get nullCount(){let t=this._nullCount,n;return t<=Fq&&(n=this.nullBitmap)&&(this._nullCount=t=this.length-Q2(n,this.offset,this.offset+this.length)),t}getValid(t){if(this.nullable&&this.nullCount>0){const n=this.offset+t;return(this.nullBitmap[n>>3]&1<<n%8)!==0}return!0}setValid(t,n){if(!this.nullable)return n;if(!this.nullBitmap||this.nullBitmap.byteLength<=t>>3){const{nullBitmap:l}=this._changeLengthAndBackfillNullBitmap(this.length);Object.assign(this,{nullBitmap:l,_nullCount:0})}const{nullBitmap:r,offset:i}=this,s=i+t>>3,o=(i+t)%8,a=r[s]>>o&1;return n?a===0&&(r[s]|=1<<o,this._nullCount=this.nullCount+1):a===1&&(r[s]&=~(1<<o),this._nullCount=this.nullCount-1),n}clone(t=this.type,n=this.offset,r=this.length,i=this._nullCount,s=this,o=this.children){return new K2(t,n,r,i,s,o,this.dictionary)}slice(t,n){const{stride:r,typeId:i,children:s}=this,o=+(this._nullCount===0)-1,a=i===16?r:1,l=this._sliceBuffers(t,n,r,i);return this.clone(this.type,this.offset+t,n,o,l,s.length===0||this.valueOffsets?s:this._sliceChildren(s,a*t,a*n))}_changeLengthAndBackfillNullBitmap(t){if(this.typeId===U.Null)return this.clone(this.type,0,t,0);const{length:n,nullCount:r}=this,i=new Uint8Array((t+63&-64)>>3).fill(255,0,n>>3);i[n>>3]=(1<<n-(n&-8))-1,r>0&&i.set(Dq(this.offset,n,this.nullBitmap),0);const s=this.buffers;return s[ro.VALIDITY]=i,this.clone(this.type,0,t,r+(t-n),s)}_sliceBuffers(t,n,r,i){let s;const{buffers:o}=this;return(s=o[ro.TYPE])&&(o[ro.TYPE]=s.subarray(t,t+n)),(s=o[ro.OFFSET])&&(o[ro.OFFSET]=s.subarray(t,t+n+1))||(s=o[ro.DATA])&&(o[ro.DATA]=i===6?s:s.subarray(r*t,r*(t+n))),o}_sliceChildren(t,n,r){return t.map(i=>i.slice(n,r))}};Fe.prototype.children=Object.freeze([]);let Bq=class sm extends Wt{visit(t){return this.getVisitFn(t.type).call(this,t)}visitNull(t){const{["type"]:n,["offset"]:r=0,["length"]:i=0}=t;return new Fe(n,r,i,0)}visitBool(t){const{["type"]:n,["offset"]:r=0}=t,i=ie(t.nullBitmap),s=ge(n.ArrayType,t.data),{["length"]:o=s.length>>3,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Fe(n,r,o,a,[void 0,s,i])}visitInt(t){const{["type"]:n,["offset"]:r=0}=t,i=ie(t.nullBitmap),s=ge(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Fe(n,r,o,a,[void 0,s,i])}visitFloat(t){const{["type"]:n,["offset"]:r=0}=t,i=ie(t.nullBitmap),s=ge(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Fe(n,r,o,a,[void 0,s,i])}visitUtf8(t){const{["type"]:n,["offset"]:r=0}=t,i=ie(t.data),s=ie(t.nullBitmap),o=Ad(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:l=t.nullBitmap?-1:0}=t;return new Fe(n,r,a,l,[o,i,s])}visitBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=ie(t.data),s=ie(t.nullBitmap),o=Ad(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:l=t.nullBitmap?-1:0}=t;return new Fe(n,r,a,l,[o,i,s])}visitFixedSizeBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=ie(t.nullBitmap),s=ge(n.ArrayType,t.data),{["length"]:o=s.length/io(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Fe(n,r,o,a,[void 0,s,i])}visitDate(t){const{["type"]:n,["offset"]:r=0}=t,i=ie(t.nullBitmap),s=ge(n.ArrayType,t.data),{["length"]:o=s.length/io(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Fe(n,r,o,a,[void 0,s,i])}visitTimestamp(t){const{["type"]:n,["offset"]:r=0}=t,i=ie(t.nullBitmap),s=ge(n.ArrayType,t.data),{["length"]:o=s.length/io(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Fe(n,r,o,a,[void 0,s,i])}visitTime(t){const{["type"]:n,["offset"]:r=0}=t,i=ie(t.nullBitmap),s=ge(n.ArrayType,t.data),{["length"]:o=s.length/io(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Fe(n,r,o,a,[void 0,s,i])}visitDecimal(t){const{["type"]:n,["offset"]:r=0}=t,i=ie(t.nullBitmap),s=ge(n.ArrayType,t.data),{["length"]:o=s.length/io(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Fe(n,r,o,a,[void 0,s,i])}visitList(t){const{["type"]:n,["offset"]:r=0,["child"]:i}=t,s=ie(t.nullBitmap),o=Ad(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:l=t.nullBitmap?-1:0}=t;return new Fe(n,r,a,l,[o,void 0,s],[i])}visitStruct(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=ie(t.nullBitmap),{length:o=i.reduce((l,{length:c})=>Math.max(l,c),0),nullCount:a=t.nullBitmap?-1:0}=t;return new Fe(n,r,o,a,[void 0,void 0,s],i)}visitUnion(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=ie(t.nullBitmap),o=ge(n.ArrayType,t.typeIds),{["length"]:a=o.length,["nullCount"]:l=t.nullBitmap?-1:0}=t;if(Ft.isSparseUnion(n))return new Fe(n,r,a,l,[void 0,void 0,s,o],i);const c=Ad(t.valueOffsets);return new Fe(n,r,a,l,[c,void 0,s,o],i)}visitDictionary(t){const{["type"]:n,["offset"]:r=0}=t,i=ie(t.nullBitmap),s=ge(n.indices.ArrayType,t.data),{["dictionary"]:o=new tn([new sm().visit({type:n.dictionary})])}=t,{["length"]:a=s.length,["nullCount"]:l=t.nullBitmap?-1:0}=t;return new Fe(n,r,a,l,[void 0,s,i],[],o)}visitInterval(t){const{["type"]:n,["offset"]:r=0}=t,i=ie(t.nullBitmap),s=ge(n.ArrayType,t.data),{["length"]:o=s.length/io(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Fe(n,r,o,a,[void 0,s,i])}visitFixedSizeList(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new sm().visit({type:n.valueType})}=t,s=ie(t.nullBitmap),{["length"]:o=i.length/io(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Fe(n,r,o,a,[void 0,void 0,s],[i])}visitMap(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new sm().visit({type:n.childType})}=t,s=ie(t.nullBitmap),o=Ad(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:l=t.nullBitmap?-1:0}=t;return new Fe(n,r,a,l,[o,void 0,s],[i])}};function Vt(e){return new Bq().visit(e)}let dM=class{constructor(t=0,n){this.numChunks=t,this.getChunkIterator=n,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const t=this.chunkIterator.next();if(!t.done)return t;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}};function Q8(e){return e.reduce((t,n)=>t+n.nullCount,0)}function K8(e){return e.reduce((t,n,r)=>(t[r+1]=t[r]+n.length,t),new Uint32Array(e.length+1))}function Z8(e,t,n,r){const i=[];for(let s=-1,o=e.length;++s<o;){const a=e[s],l=t[s],{length:c}=a;if(l>=r)break;if(n>=l+c)continue;if(l>=n&&l+c<=r){i.push(a);continue}const u=Math.max(0,n-l),f=Math.min(r-l,c);i.push(a.slice(u,f-u))}return i.length===0&&i.push(e[0].slice(0,0)),i}function XI(e,t,n,r){let i=0,s=0,o=t.length-1;do{if(i>=o-1)return n<t[o]?r(e,i,n-t[i]):null;s=i+Math.trunc((o-i)*.5),n<t[s]?o=s:i=s}while(i<o)}function QI(e,t){return e.getValid(t)}function Qu(e){function t(n,r,i){return e(n[r],i)}return function(n){const r=this.data;return XI(r,this._offsets,n,t)}}function J8(e){let t;function n(r,i,s){return e(r[i],s,t)}return function(r,i){const s=this.data;t=i;const o=XI(s,this._offsets,r,n);return t=void 0,o}}function tO(e){let t;function n(r,i,s){let o=s,a=0,l=0;for(let c=i-1,u=r.length;++c<u;){const f=r[c];if(~(a=e(f,t,o)))return l+a;o=0,l+=f.length}return-1}return function(r,i){t=r;const s=this.data,o=typeof i!="number"?n(s,0,0):XI(s,this._offsets,i,n);return t=void 0,o}}let It=class extends Wt{};function Lq(e,t){return t===null&&e.length>0?0:-1}function Rq(e,t){const{nullBitmap:n}=e;if(!n||e.nullCount<=0)return-1;let r=0;for(const i of new GI(n,e.offset+(t||0),e.length,n,X8)){if(!i)return r;++r}return-1}function Ot(e,t,n){if(t===void 0)return-1;if(t===null)return Rq(e,n);const r=Sr.getVisitFn(e),i=Kf(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}function eO(e,t,n){const r=Sr.getVisitFn(e),i=Kf(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}It.prototype.visitNull=Lq;It.prototype.visitBool=Ot;It.prototype.visitInt=Ot;It.prototype.visitInt8=Ot;It.prototype.visitInt16=Ot;It.prototype.visitInt32=Ot;It.prototype.visitInt64=Ot;It.prototype.visitUint8=Ot;It.prototype.visitUint16=Ot;It.prototype.visitUint32=Ot;It.prototype.visitUint64=Ot;It.prototype.visitFloat=Ot;It.prototype.visitFloat16=Ot;It.prototype.visitFloat32=Ot;It.prototype.visitFloat64=Ot;It.prototype.visitUtf8=Ot;It.prototype.visitBinary=Ot;It.prototype.visitFixedSizeBinary=Ot;It.prototype.visitDate=Ot;It.prototype.visitDateDay=Ot;It.prototype.visitDateMillisecond=Ot;It.prototype.visitTimestamp=Ot;It.prototype.visitTimestampSecond=Ot;It.prototype.visitTimestampMillisecond=Ot;It.prototype.visitTimestampMicrosecond=Ot;It.prototype.visitTimestampNanosecond=Ot;It.prototype.visitTime=Ot;It.prototype.visitTimeSecond=Ot;It.prototype.visitTimeMillisecond=Ot;It.prototype.visitTimeMicrosecond=Ot;It.prototype.visitTimeNanosecond=Ot;It.prototype.visitDecimal=Ot;It.prototype.visitList=Ot;It.prototype.visitStruct=Ot;It.prototype.visitUnion=Ot;It.prototype.visitDenseUnion=eO;It.prototype.visitSparseUnion=eO;It.prototype.visitDictionary=Ot;It.prototype.visitInterval=Ot;It.prototype.visitIntervalDayTime=Ot;It.prototype.visitIntervalYearMonth=Ot;It.prototype.visitFixedSizeList=Ot;It.prototype.visitMap=Ot;const vg=new It;let Tt=class extends Wt{};function Nt(e){const{type:t}=e;if(e.nullCount===0&&e.stride===1&&(t.typeId===U.Timestamp||t instanceof Ca&&t.bitWidth!==64||t instanceof op&&t.bitWidth!==64||t instanceof sp&&t.precision!==_r.HALF))return new dM(e.data.length,r=>{const i=e.data[r];return i.values.subarray(0,i.length)[Symbol.iterator]()});let n=0;return new dM(e.data.length,r=>{const s=e.data[r].length,o=e.slice(n,n+s);return n+=s,new Cq(o)})}let Cq=class{constructor(t){this.vector=t,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}};Tt.prototype.visitNull=Nt;Tt.prototype.visitBool=Nt;Tt.prototype.visitInt=Nt;Tt.prototype.visitInt8=Nt;Tt.prototype.visitInt16=Nt;Tt.prototype.visitInt32=Nt;Tt.prototype.visitInt64=Nt;Tt.prototype.visitUint8=Nt;Tt.prototype.visitUint16=Nt;Tt.prototype.visitUint32=Nt;Tt.prototype.visitUint64=Nt;Tt.prototype.visitFloat=Nt;Tt.prototype.visitFloat16=Nt;Tt.prototype.visitFloat32=Nt;Tt.prototype.visitFloat64=Nt;Tt.prototype.visitUtf8=Nt;Tt.prototype.visitBinary=Nt;Tt.prototype.visitFixedSizeBinary=Nt;Tt.prototype.visitDate=Nt;Tt.prototype.visitDateDay=Nt;Tt.prototype.visitDateMillisecond=Nt;Tt.prototype.visitTimestamp=Nt;Tt.prototype.visitTimestampSecond=Nt;Tt.prototype.visitTimestampMillisecond=Nt;Tt.prototype.visitTimestampMicrosecond=Nt;Tt.prototype.visitTimestampNanosecond=Nt;Tt.prototype.visitTime=Nt;Tt.prototype.visitTimeSecond=Nt;Tt.prototype.visitTimeMillisecond=Nt;Tt.prototype.visitTimeMicrosecond=Nt;Tt.prototype.visitTimeNanosecond=Nt;Tt.prototype.visitDecimal=Nt;Tt.prototype.visitList=Nt;Tt.prototype.visitStruct=Nt;Tt.prototype.visitUnion=Nt;Tt.prototype.visitDenseUnion=Nt;Tt.prototype.visitSparseUnion=Nt;Tt.prototype.visitDictionary=Nt;Tt.prototype.visitInterval=Nt;Tt.prototype.visitIntervalDayTime=Nt;Tt.prototype.visitIntervalYearMonth=Nt;Tt.prototype.visitFixedSizeList=Nt;Tt.prototype.visitMap=Nt;const KI=new Tt,Uq=(e,t)=>e+t;class ol extends Wt{visitNull(t,n){return 0}visitInt(t,n){return t.type.bitWidth/8}visitFloat(t,n){return t.type.ArrayType.BYTES_PER_ELEMENT}visitBool(t,n){return 1/8}visitDecimal(t,n){return t.type.bitWidth/8}visitDate(t,n){return(t.type.unit+1)*4}visitTime(t,n){return t.type.bitWidth/8}visitTimestamp(t,n){return t.type.unit===ee.SECOND?4:8}visitInterval(t,n){return(t.type.unit+1)*4}visitStruct(t,n){return t.children.reduce((r,i)=>r+Fs.visit(i,n),0)}visitFixedSizeBinary(t,n){return t.type.byteWidth}visitMap(t,n){return 8+t.children.reduce((r,i)=>r+Fs.visit(i,n),0)}visitDictionary(t,n){var r;return t.type.indices.bitWidth/8+(((r=t.dictionary)===null||r===void 0?void 0:r.getByteLength(t.values[n]))||0)}}const Pq=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),zq=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),jq=({valueOffsets:e,stride:t,children:n},r)=>{const i=n[0],{[r*t]:s}=e,{[r*t+1]:o}=e,a=Fs.getVisitFn(i.type),l=i.slice(s,o-s);let c=8;for(let u=-1,f=o-s;++u<f;)c+=a(l,u);return c},Vq=({stride:e,children:t},n)=>{const r=t[0],i=r.slice(n*e,e),s=Fs.getVisitFn(r.type);let o=0;for(let a=-1,l=i.length;++a<l;)o+=s(i,a);return o},Yq=(e,t)=>e.type.mode===Vi.Dense?nO(e,t):rO(e,t),nO=({type:e,children:t,typeIds:n,valueOffsets:r},i)=>{const s=e.typeIdToChildIndex[n[i]];return 8+Fs.visit(t[s],r[i])},rO=({children:e},t)=>4+Fs.visitMany(e,e.map(()=>t)).reduce(Uq,0);ol.prototype.visitUtf8=Pq;ol.prototype.visitBinary=zq;ol.prototype.visitList=jq;ol.prototype.visitFixedSizeList=Vq;ol.prototype.visitUnion=Yq;ol.prototype.visitDenseUnion=nO;ol.prototype.visitSparseUnion=rO;const Fs=new ol;var iO;const sO={},oO={};let tn=class Il{constructor(t){var n,r,i;const s=t[0]instanceof Il?t.flatMap(a=>a.data):t;if(s.length===0||s.some(a=>!(a instanceof Fe)))throw new TypeError("Vector constructor expects an Array of Data instances.");const o=(n=s[0])===null||n===void 0?void 0:n.type;switch(s.length){case 0:this._offsets=[0];break;case 1:{const{get:a,set:l,indexOf:c,byteLength:u}=sO[o.typeId],f=s[0];this.isValid=d=>QI(f,d),this.get=d=>a(f,d),this.set=(d,h)=>l(f,d,h),this.indexOf=d=>c(f,d),this.getByteLength=d=>u(f,d),this._offsets=[0,f.length];break}default:Object.setPrototypeOf(this,oO[o.typeId]),this._offsets=K8(s);break}this.data=s,this.type=o,this.stride=io(o),this.numChildren=(i=(r=o.children)===null||r===void 0?void 0:r.length)!==null&&i!==void 0?i:0,this.length=this._offsets[this._offsets.length-1]}get byteLength(){return this._byteLength===-1&&(this._byteLength=this.data.reduce((t,n)=>t+n.byteLength,0)),this._byteLength}get nullCount(){return this._nullCount===-1&&(this._nullCount=Q8(this.data)),this._nullCount}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${U[this.type.typeId]}Vector`}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}includes(t,n){return this.indexOf(t,n)>0}getByteLength(t){return 0}[Symbol.iterator](){return KI.visit(this)}concat(...t){return new Il(this.data.concat(t.flatMap(n=>n.data).flat(Number.POSITIVE_INFINITY)))}slice(t,n){return new Il(G8(this,t,n,({data:r,_offsets:i},s,o)=>Z8(r,i,s,o)))}toJSON(){return[...this]}toArray(){const{type:t,data:n,length:r,stride:i,ArrayType:s}=this;switch(t.typeId){case U.Int:case U.Float:case U.Decimal:case U.Time:case U.Timestamp:switch(n.length){case 0:return new s;case 1:return n[0].values.subarray(0,r*i);default:return n.reduce((o,{values:a,length:l})=>(o.array.set(a.subarray(0,l*i),o.offset),o.offset+=l*i,o),{array:new s(r*i),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(t){var n;return this.getChildAt((n=this.type.children)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.numChildren?new Il(this.data.map(({children:n})=>n[t])):null}get isMemoized(){return Ft.isDictionary(this.type)?this.data[0].dictionary.isMemoized:!1}memoize(){if(Ft.isDictionary(this.type)){const t=new hM(this.data[0].dictionary),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new Il(n)}return new hM(this)}unmemoize(){if(Ft.isDictionary(this.type)&&this.isMemoized){const t=this.data[0].dictionary.unmemoize(),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new Il(n)}return this}};iO=Symbol.toStringTag;tn[iO]=(e=>{e.type=Ft.prototype,e.data=[],e.length=0,e.stride=1,e.numChildren=0,e._nullCount=-1,e._byteLength=-1,e._offsets=new Uint32Array([0]),e[Symbol.isConcatSpreadable]=!0;const t=Object.keys(U).map(n=>U[n]).filter(n=>typeof n=="number"&&n!==U.NONE);for(const n of t){const r=Sr.getVisitFnByTypeId(n),i=vi.getVisitFnByTypeId(n),s=vg.getVisitFnByTypeId(n),o=Fs.getVisitFnByTypeId(n);sO[n]={get:r,set:i,indexOf:s,byteLength:o},oO[n]=Object.create(e,{isValid:{value:Qu(QI)},get:{value:Qu(Sr.getVisitFnByTypeId(n))},set:{value:J8(vi.getVisitFnByTypeId(n))},indexOf:{value:tO(vg.getVisitFnByTypeId(n))},getByteLength:{value:Qu(Fs.getVisitFnByTypeId(n))}})}return"Vector"})(tn.prototype);let hM=class aO extends tn{constructor(t){super(t.data);const n=this.get,r=this.set,i=this.slice,s=new Array(this.length);Object.defineProperty(this,"get",{value(o){const a=s[o];if(a!==void 0)return a;const l=n.call(this,o);return s[o]=l,l}}),Object.defineProperty(this,"set",{value(o,a){r.call(this,o,a),s[o]=a}}),Object.defineProperty(this,"slice",{value:(o,a)=>new aO(i.call(this,o,a))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new tn(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}},Z2=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(t,n,r,i){return t.prep(8,24),t.writeInt64(i),t.pad(4),t.writeInt32(r),t.writeInt64(n),t.offset()}};const Cw=2,ms=4,fo=4,ve=4,oa=new Int32Array(2),pM=new Float32Array(oa.buffer),yM=new Float64Array(oa.buffer),f0=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;let xo=class J2{constructor(t,n){this.low=t|0,this.high=n|0}static create(t,n){return t==0&&n==0?J2.ZERO:new J2(t,n)}toFloat64(){return(this.low>>>0)+this.high*4294967296}equals(t){return this.low==t.low&&this.high==t.high}};xo.ZERO=new xo(0,0);var tS;(function(e){e[e.UTF8_BYTES=1]="UTF8_BYTES",e[e.UTF16_STRING=2]="UTF16_STRING"})(tS||(tS={}));let bf=class lO{constructor(t){this.bytes_=t,this.position_=0}static allocate(t){return new lO(new Uint8Array(t))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(t){this.position_=t}capacity(){return this.bytes_.length}readInt8(t){return this.readUint8(t)<<24>>24}readUint8(t){return this.bytes_[t]}readInt16(t){return this.readUint16(t)<<16>>16}readUint16(t){return this.bytes_[t]|this.bytes_[t+1]<<8}readInt32(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}readUint32(t){return this.readInt32(t)>>>0}readInt64(t){return new xo(this.readInt32(t),this.readInt32(t+4))}readUint64(t){return new xo(this.readUint32(t),this.readUint32(t+4))}readFloat32(t){return oa[0]=this.readInt32(t),pM[0]}readFloat64(t){return oa[f0?0:1]=this.readInt32(t),oa[f0?1:0]=this.readInt32(t+4),yM[0]}writeInt8(t,n){this.bytes_[t]=n}writeUint8(t,n){this.bytes_[t]=n}writeInt16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeUint16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeInt32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeUint32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeInt64(t,n){this.writeInt32(t,n.low),this.writeInt32(t+4,n.high)}writeUint64(t,n){this.writeUint32(t,n.low),this.writeUint32(t+4,n.high)}writeFloat32(t,n){pM[0]=n,this.writeInt32(t,oa[0])}writeFloat64(t,n){yM[0]=n,this.writeInt32(t,oa[f0?0:1]),this.writeInt32(t+4,oa[f0?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+ms+fo)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let t="";for(let n=0;n<fo;n++)t+=String.fromCharCode(this.readInt8(this.position_+ms+n));return t}__offset(t,n){const r=t-this.readInt32(t);return n<this.readInt16(r)?this.readInt16(r+n):0}__union(t,n){return t.bb_pos=n+this.readInt32(n),t.bb=this,t}__string(t,n){t+=this.readInt32(t);const r=this.readInt32(t);let i="",s=0;if(t+=ms,n===tS.UTF8_BYTES)return this.bytes_.subarray(t,t+r);for(;s<r;){let o;const a=this.readUint8(t+s++);if(a<192)o=a;else{const l=this.readUint8(t+s++);if(a<224)o=(a&31)<<6|l&63;else{const c=this.readUint8(t+s++);if(a<240)o=(a&15)<<12|(l&63)<<6|c&63;else{const u=this.readUint8(t+s++);o=(a&7)<<18|(l&63)<<12|(c&63)<<6|u&63}}}o<65536?i+=String.fromCharCode(o):(o-=65536,i+=String.fromCharCode((o>>10)+55296,(o&1023)+56320))}return i}__union_with_string(t,n){return typeof t=="string"?this.__string(n):this.__union(t,n)}__indirect(t){return t+this.readInt32(t)}__vector(t){return t+this.readInt32(t)+ms}__vector_len(t){return this.readInt32(t+this.readInt32(t))}__has_identifier(t){if(t.length!=fo)throw new Error("FlatBuffers: file identifier must be length "+fo);for(let n=0;n<fo;n++)if(t.charCodeAt(n)!=this.readInt8(this.position()+ms+n))return!1;return!0}createLong(t,n){return xo.create(t,n)}createScalarList(t,n){const r=[];for(let i=0;i<n;++i)t(i)!==null&&r.push(t(i));return r}createObjList(t,n){const r=[];for(let i=0;i<n;++i){const s=t(i);s!==null&&r.push(s.unpack())}return r}},cO=class uO{constructor(t){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null;let n;t?n=t:n=1024,this.bb=bf.allocate(n),this.space=n}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(t){this.force_defaults=t}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(t,n){t>this.minalign&&(this.minalign=t);const r=~(this.bb.capacity()-this.space+n)+1&t-1;for(;this.space<r+t+n;){const i=this.bb.capacity();this.bb=uO.growByteBuffer(this.bb),this.space+=this.bb.capacity()-i}this.pad(r)}pad(t){for(let n=0;n<t;n++)this.bb.writeInt8(--this.space,0)}writeInt8(t){this.bb.writeInt8(this.space-=1,t)}writeInt16(t){this.bb.writeInt16(this.space-=2,t)}writeInt32(t){this.bb.writeInt32(this.space-=4,t)}writeInt64(t){this.bb.writeInt64(this.space-=8,t)}writeFloat32(t){this.bb.writeFloat32(this.space-=4,t)}writeFloat64(t){this.bb.writeFloat64(this.space-=8,t)}addInt8(t){this.prep(1,0),this.writeInt8(t)}addInt16(t){this.prep(2,0),this.writeInt16(t)}addInt32(t){this.prep(4,0),this.writeInt32(t)}addInt64(t){this.prep(8,0),this.writeInt64(t)}addFloat32(t){this.prep(4,0),this.writeFloat32(t)}addFloat64(t){this.prep(8,0),this.writeFloat64(t)}addFieldInt8(t,n,r){(this.force_defaults||n!=r)&&(this.addInt8(n),this.slot(t))}addFieldInt16(t,n,r){(this.force_defaults||n!=r)&&(this.addInt16(n),this.slot(t))}addFieldInt32(t,n,r){(this.force_defaults||n!=r)&&(this.addInt32(n),this.slot(t))}addFieldInt64(t,n,r){(this.force_defaults||!n.equals(r))&&(this.addInt64(n),this.slot(t))}addFieldFloat32(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat32(n),this.slot(t))}addFieldFloat64(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat64(n),this.slot(t))}addFieldOffset(t,n,r){(this.force_defaults||n!=r)&&(this.addOffset(n),this.slot(t))}addFieldStruct(t,n,r){n!=r&&(this.nested(n),this.slot(t))}nested(t){if(t!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")}slot(t){this.vtable!==null&&(this.vtable[t]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(t){const n=t.capacity();if(n&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const r=n<<1,i=bf.allocate(r);return i.setPosition(r-n),i.bytes().set(t.bytes(),r-n),i}addOffset(t){this.prep(ms,0),this.writeInt32(this.offset()-t+ms)}startObject(t){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=t;for(let n=0;n<t;n++)this.vtable[n]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const t=this.offset();let n=this.vtable_in_use-1;for(;n>=0&&this.vtable[n]==0;n--);const r=n+1;for(;n>=0;n--)this.addInt16(this.vtable[n]!=0?t-this.vtable[n]:0);const i=2;this.addInt16(t-this.object_start);const s=(r+i)*Cw;this.addInt16(s);let o=0;const a=this.space;t:for(n=0;n<this.vtables.length;n++){const l=this.bb.capacity()-this.vtables[n];if(s==this.bb.readInt16(l)){for(let c=Cw;c<s;c+=Cw)if(this.bb.readInt16(a+c)!=this.bb.readInt16(l+c))continue t;o=this.vtables[n];break}}return o?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,o-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t}finish(t,n,r){const i=r?ve:0;if(n){const s=n;if(this.prep(this.minalign,ms+fo+i),s.length!=fo)throw new Error("FlatBuffers: file identifier must be length "+fo);for(let o=fo-1;o>=0;o--)this.writeInt8(s.charCodeAt(o))}this.prep(this.minalign,ms+i),this.addOffset(t),i&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(t,n){this.finish(t,n,!0)}requiredField(t,n){const r=this.bb.capacity()-t,i=r-this.bb.readInt32(r);if(!(this.bb.readInt16(i+n)!=0))throw new Error("FlatBuffers: field "+n+" must be set")}startVector(t,n,r){this.notNested(),this.vector_num_elems=n,this.prep(ms,t*n),this.prep(r,t*n)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(t){if(!t)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(t))return this.string_maps.get(t);const n=this.createString(t);return this.string_maps.set(t,n),n}createString(t){if(!t)return 0;let n;if(t instanceof Uint8Array)n=t;else{n=[];let r=0;for(;r<t.length;){let i;const s=t.charCodeAt(r++);if(s<55296||s>=56320)i=s;else{const o=t.charCodeAt(r++);i=(s<<10)+o+-56613888}i<128?n.push(i):(i<2048?n.push(i>>6&31|192):(i<65536?n.push(i>>12&15|224):n.push(i>>18&7|240,i>>12&63|128),n.push(i>>6&63|128)),n.push(i&63|128))}}this.addInt8(0),this.startVector(1,n.length,1),this.bb.setPosition(this.space-=n.length);for(let r=0,i=this.space,s=this.bb.bytes();r<n.length;r++)s[i++]=n[r];return this.endVector()}createLong(t,n){return xo.create(t,n)}createObjectOffset(t){return t===null?0:typeof t=="string"?this.createString(t):t.pack(this)}createObjectOffsetList(t){const n=[];for(let r=0;r<t.length;++r){const i=t[r];if(i!==null)n.push(this.createObjectOffset(i));else throw new Error("FlatBuffers: Argument for createObjectOffsetList cannot contain null.")}return n}createStructOffsetList(t,n){return n(this,t.length),this.createObjectOffsetList(t),this.endVector()}},ci=class Tl{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsKeyValue(t,n){return(n||new Tl).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsKeyValue(t,n){return t.setPosition(t.position()+ve),(n||new Tl).__init(t.readInt32(t.position())+t.position(),t)}key(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}value(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startKeyValue(t){t.startObject(2)}static addKey(t,n){t.addFieldOffset(0,n,0)}static addValue(t,n){t.addFieldOffset(1,n,0)}static endKeyValue(t){return t.endObject()}static createKeyValue(t,n,r){return Tl.startKeyValue(t),Tl.addKey(t,n),Tl.addValue(t,r),Tl.endKeyValue(t)}};var vf;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(vf||(vf={}));var wf;(function(e){e[e.Little=0]="Little",e[e.Big=1]="Big"})(wf||(wf={}));var wg;(function(e){e[e.DenseArray=0]="DenseArray"})(wg||(wg={}));let $u=class El{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInt(t,n){return(n||new El).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInt(t,n){return t.setPosition(t.position()+ve),(n||new El).__init(t.readInt32(t.position())+t.position(),t)}bitWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}isSigned(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startInt(t){t.startObject(2)}static addBitWidth(t,n){t.addFieldInt32(0,n,0)}static addIsSigned(t,n){t.addFieldInt8(1,+n,0)}static endInt(t){return t.endObject()}static createInt(t,n,r){return El.startInt(t),El.addBitWidth(t,n),El.addIsSigned(t,r),El.endInt(t)}},Kc=class eS{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryEncoding(t,n){return(n||new eS).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryEncoding(t,n){return t.setPosition(t.position()+ve),(n||new eS).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}indexType(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new $u).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isOrdered(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}dictionaryKind(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt16(this.bb_pos+t):wg.DenseArray}static startDictionaryEncoding(t){t.startObject(4)}static addId(t,n){t.addFieldInt64(0,n,t.createLong(0,0))}static addIndexType(t,n){t.addFieldOffset(1,n,0)}static addIsOrdered(t,n){t.addFieldInt8(2,+n,0)}static addDictionaryKind(t,n){t.addFieldInt16(3,n,wg.DenseArray)}static endDictionaryEncoding(t){return t.endObject()}},mM=class Wd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBinary(t,n){return(n||new Wd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBinary(t,n){return t.setPosition(t.position()+ve),(n||new Wd).__init(t.readInt32(t.position())+t.position(),t)}static startBinary(t){t.startObject(0)}static endBinary(t){return t.endObject()}static createBinary(t){return Wd.startBinary(t),Wd.endBinary(t)}},gM=class Hd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBool(t,n){return(n||new Hd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBool(t,n){return t.setPosition(t.position()+ve),(n||new Hd).__init(t.readInt32(t.position())+t.position(),t)}static startBool(t){t.startObject(0)}static endBool(t){return t.endObject()}static createBool(t){return Hd.startBool(t),Hd.endBool(t)}};var _g;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(_g||(_g={}));let om=class Zc{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDate(t,n){return(n||new Zc).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDate(t,n){return t.setPosition(t.position()+ve),(n||new Zc).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):_g.MILLISECOND}static startDate(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,_g.MILLISECOND)}static endDate(t){return t.endObject()}static createDate(t,n){return Zc.startDate(t),Zc.addUnit(t,n),Zc.endDate(t)}},Jc=class ea{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDecimal(t,n){return(n||new ea).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDecimal(t,n){return t.setPosition(t.position()+ve),(n||new ea).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}scale(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}bitWidth(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt32(this.bb_pos+t):128}static startDecimal(t){t.startObject(3)}static addPrecision(t,n){t.addFieldInt32(0,n,0)}static addScale(t,n){t.addFieldInt32(1,n,0)}static addBitWidth(t,n){t.addFieldInt32(2,n,128)}static endDecimal(t){return t.endObject()}static createDecimal(t,n,r,i){return ea.startDecimal(t),ea.addPrecision(t,n),ea.addScale(t,r),ea.addBitWidth(t,i),ea.endDecimal(t)}};var _f;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(_f||(_f={}));let am=class tu{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeBinary(t,n){return(n||new tu).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeBinary(t,n){return t.setPosition(t.position()+ve),(n||new tu).__init(t.readInt32(t.position())+t.position(),t)}byteWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeBinary(t){t.startObject(1)}static addByteWidth(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeBinary(t){return t.endObject()}static createFixedSizeBinary(t,n){return tu.startFixedSizeBinary(t),tu.addByteWidth(t,n),tu.endFixedSizeBinary(t)}},lm=class eu{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeList(t,n){return(n||new eu).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeList(t,n){return t.setPosition(t.position()+ve),(n||new eu).__init(t.readInt32(t.position())+t.position(),t)}listSize(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeList(t){t.startObject(1)}static addListSize(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeList(t){return t.endObject()}static createFixedSizeList(t,n){return eu.startFixedSizeList(t),eu.addListSize(t,n),eu.endFixedSizeList(t)}};var Sg;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(Sg||(Sg={}));let cm=class nu{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFloatingPoint(t,n){return(n||new nu).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFloatingPoint(t,n){return t.setPosition(t.position()+ve),(n||new nu).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Sg.HALF}static startFloatingPoint(t){t.startObject(1)}static addPrecision(t,n){t.addFieldInt16(0,n,Sg.HALF)}static endFloatingPoint(t){return t.endObject()}static createFloatingPoint(t,n){return nu.startFloatingPoint(t),nu.addPrecision(t,n),nu.endFloatingPoint(t)}};var xg;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(xg||(xg={}));let um=class ru{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInterval(t,n){return(n||new ru).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInterval(t,n){return t.setPosition(t.position()+ve),(n||new ru).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):xg.YEAR_MONTH}static startInterval(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,xg.YEAR_MONTH)}static endInterval(t){return t.endObject()}static createInterval(t,n){return ru.startInterval(t),ru.addUnit(t,n),ru.endInterval(t)}},bM=class Gd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsList(t,n){return(n||new Gd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsList(t,n){return t.setPosition(t.position()+ve),(n||new Gd).__init(t.readInt32(t.position())+t.position(),t)}static startList(t){t.startObject(0)}static endList(t){return t.endObject()}static createList(t){return Gd.startList(t),Gd.endList(t)}},fm=class iu{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMap(t,n){return(n||new iu).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMap(t,n){return t.setPosition(t.position()+ve),(n||new iu).__init(t.readInt32(t.position())+t.position(),t)}keysSorted(){const t=this.bb.__offset(this.bb_pos,4);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startMap(t){t.startObject(1)}static addKeysSorted(t,n){t.addFieldInt8(0,+n,0)}static endMap(t){return t.endObject()}static createMap(t,n){return iu.startMap(t),iu.addKeysSorted(t,n),iu.endMap(t)}},vM=class Xd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsNull(t,n){return(n||new Xd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsNull(t,n){return t.setPosition(t.position()+ve),(n||new Xd).__init(t.readInt32(t.position())+t.position(),t)}static startNull(t){t.startObject(0)}static endNull(t){return t.endObject()}static createNull(t){return Xd.startNull(t),Xd.endNull(t)}},wM=class Qd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsStruct_(t,n){return(n||new Qd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsStruct_(t,n){return t.setPosition(t.position()+ve),(n||new Qd).__init(t.readInt32(t.position())+t.position(),t)}static startStruct_(t){t.startObject(0)}static endStruct_(t){return t.endObject()}static createStruct_(t){return Qd.startStruct_(t),Qd.endStruct_(t)}},Kd=class Al{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTime(t,n){return(n||new Al).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTime(t,n){return t.setPosition(t.position()+ve),(n||new Al).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):_f.MILLISECOND}bitWidth(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):32}static startTime(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,_f.MILLISECOND)}static addBitWidth(t,n){t.addFieldInt32(1,n,32)}static endTime(t){return t.endObject()}static createTime(t,n,r){return Al.startTime(t),Al.addUnit(t,n),Al.addBitWidth(t,r),Al.endTime(t)}},Zd=class Ml{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTimestamp(t,n){return(n||new Ml).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTimestamp(t,n){return t.setPosition(t.position()+ve),(n||new Ml).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):_f.SECOND}timezone(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startTimestamp(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,_f.SECOND)}static addTimezone(t,n){t.addFieldOffset(1,n,0)}static endTimestamp(t){return t.endObject()}static createTimestamp(t,n,r){return Ml.startTimestamp(t),Ml.addUnit(t,n),Ml.addTimezone(t,r),Ml.endTimestamp(t)}};var Ig;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(Ig||(Ig={}));let $l=class Nl{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUnion(t,n){return(n||new Nl).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUnion(t,n){return t.setPosition(t.position()+ve),(n||new Nl).__init(t.readInt32(t.position())+t.position(),t)}mode(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Ig.Sparse}typeIds(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readInt32(this.bb.__vector(this.bb_pos+n)+t*4):0}typeIdsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}typeIdsArray(){const t=this.bb.__offset(this.bb_pos,6);return t?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startUnion(t){t.startObject(2)}static addMode(t,n){t.addFieldInt16(0,n,Ig.Sparse)}static addTypeIds(t,n){t.addFieldOffset(1,n,0)}static createTypeIdsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addInt32(n[r]);return t.endVector()}static startTypeIdsVector(t,n){t.startVector(4,n,4)}static endUnion(t){return t.endObject()}static createUnion(t,n,r){return Nl.startUnion(t),Nl.addMode(t,n),Nl.addTypeIds(t,r),Nl.endUnion(t)}},_M=class Jd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUtf8(t,n){return(n||new Jd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUtf8(t,n){return t.setPosition(t.position()+ve),(n||new Jd).__init(t.readInt32(t.position())+t.position(),t)}static startUtf8(t){t.startObject(0)}static endUtf8(t){return t.endObject()}static createUtf8(t){return Jd.startUtf8(t),Jd.endUtf8(t)}};var Be;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.FloatingPoint=3]="FloatingPoint",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct_=13]="Struct_",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.LargeBinary=19]="LargeBinary",e[e.LargeUtf8=20]="LargeUtf8",e[e.LargeList=21]="LargeList"})(Be||(Be={}));let Jr=class dm{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsField(t,n){return(n||new dm).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsField(t,n){return t.setPosition(t.position()+ve),(n||new dm).__init(t.readInt32(t.position())+t.position(),t)}name(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}nullable(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}typeType(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):Be.NONE}type(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.__union(t,this.bb_pos+n):null}dictionary(t){const n=this.bb.__offset(this.bb_pos,12);return n?(t||new Kc).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}children(t,n){const r=this.bb.__offset(this.bb_pos,14);return r?(n||new dm).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}childrenLength(){const t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,16);return r?(n||new ci).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}static startField(t){t.startObject(7)}static addName(t,n){t.addFieldOffset(0,n,0)}static addNullable(t,n){t.addFieldInt8(1,+n,0)}static addTypeType(t,n){t.addFieldInt8(2,n,Be.NONE)}static addType(t,n){t.addFieldOffset(3,n,0)}static addDictionary(t,n){t.addFieldOffset(4,n,0)}static addChildren(t,n){t.addFieldOffset(5,n,0)}static createChildrenVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startChildrenVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(6,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endField(t){return t.endObject()}},cs=class Qs{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsSchema(t,n){return(n||new Qs).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSchema(t,n){return t.setPosition(t.position()+ve),(n||new Qs).__init(t.readInt32(t.position())+t.position(),t)}endianness(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):wf.Little}fields(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new Jr).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}fieldsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new ci).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}features(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.readInt64(this.bb.__vector(this.bb_pos+n)+t*8):this.bb.createLong(0,0)}featuresLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}static startSchema(t){t.startObject(4)}static addEndianness(t,n){t.addFieldInt16(0,n,wf.Little)}static addFields(t,n){t.addFieldOffset(1,n,0)}static createFieldsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startFieldsVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(2,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static addFeatures(t,n){t.addFieldOffset(3,n,0)}static createFeaturesVector(t,n){t.startVector(8,n.length,8);for(let r=n.length-1;r>=0;r--)t.addInt64(n[r]);return t.endVector()}static startFeaturesVector(t,n){t.startVector(8,n,8)}static endSchema(t){return t.endObject()}static finishSchemaBuffer(t,n){t.finish(n)}static finishSizePrefixedSchemaBuffer(t,n){t.finish(n,void 0,!0)}static createSchema(t,n,r,i,s){return Qs.startSchema(t),Qs.addEndianness(t,n),Qs.addFields(t,r),Qs.addCustomMetadata(t,i),Qs.addFeatures(t,s),Qs.endSchema(t)}},rs=class nS{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFooter(t,n){return(n||new nS).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFooter(t,n){return t.setPosition(t.position()+ve),(n||new nS).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):vf.V1}schema(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new cs).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}dictionaries(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new Z2).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}dictionariesLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}recordBatches(t,n){const r=this.bb.__offset(this.bb_pos,10);return r?(n||new Z2).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}recordBatchesLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new ci).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startFooter(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,vf.V1)}static addSchema(t,n){t.addFieldOffset(1,n,0)}static addDictionaries(t,n){t.addFieldOffset(2,n,0)}static startDictionariesVector(t,n){t.startVector(24,n,8)}static addRecordBatches(t,n){t.addFieldOffset(3,n,0)}static startRecordBatchesVector(t,n){t.startVector(24,n,8)}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endFooter(t){return t.endObject()}static finishFooterBuffer(t,n){t.finish(n)}static finishSizePrefixedFooterBuffer(t,n){t.finish(n,void 0,!0)}},Re=class kl{constructor(t=[],n,r){this.fields=t||[],this.metadata=n||new Map,r||(r=iS(t)),this.dictionaries=r}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(t=>t.name)}toString(){return`Schema<{ ${this.fields.map((t,n)=>`${n}: ${t}`).join(", ")} }>`}select(t){const n=new Set(t),r=this.fields.filter(i=>n.has(i.name));return new kl(r,this.metadata)}selectAt(t){const n=t.map(r=>this.fields[r]).filter(Boolean);return new kl(n,this.metadata)}assign(...t){const n=t[0]instanceof kl?t[0]:Array.isArray(t[0])?new kl(t[0]):new kl(t),r=[...this.fields],i=d0(d0(new Map,this.metadata),n.metadata),s=n.fields.filter(a=>{const l=r.findIndex(c=>c.name===a.name);return~l?(r[l]=a.clone({metadata:d0(d0(new Map,r[l].metadata),a.metadata)}))&&!1:!0}),o=iS(s,new Map);return new kl([...r,...s],i,new Map([...this.dictionaries,...o]))}};Re.prototype.fields=null;Re.prototype.metadata=null;Re.prototype.dictionaries=null;let Qe=class rS{constructor(t,n,r=!1,i){this.name=t,this.type=n,this.nullable=r,this.metadata=i||new Map}static new(...t){let[n,r,i,s]=t;return t[0]&&typeof t[0]=="object"&&({name:n}=t[0],r===void 0&&(r=t[0].type),i===void 0&&(i=t[0].nullable),s===void 0&&(s=t[0].metadata)),new rS(`${n}`,r,i,s)}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...t){let[n,r,i,s]=t;return!t[0]||typeof t[0]!="object"?[n=this.name,r=this.type,i=this.nullable,s=this.metadata]=t:{name:n=this.name,type:r=this.type,nullable:i=this.nullable,metadata:s=this.metadata}=t[0],rS.new(n,r,i,s)}};Qe.prototype.type=null;Qe.prototype.name=null;Qe.prototype.nullable=null;Qe.prototype.metadata=null;function d0(e,t){return new Map([...e||new Map,...t||new Map])}function iS(e,t=new Map){for(let n=-1,r=e.length;++n<r;){const s=e[n].type;if(Ft.isDictionary(s)){if(!t.has(s.id))t.set(s.id,s.dictionary);else if(t.get(s.id)!==s.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}s.children&&s.children.length>0&&iS(s.children,t)}return t}var SM=xo,qq=cO,Wq=bf;let ZI=class{constructor(t,n=ai.V4,r,i){this.schema=t,this.version=n,r&&(this._recordBatches=r),i&&(this._dictionaryBatches=i)}static decode(t){t=new Wq(ie(t));const n=rs.getRootAsFooter(t),r=Re.decode(n.schema());return new Hq(r,n)}static encode(t){const n=new qq,r=Re.encode(n,t.schema);rs.startRecordBatchesVector(n,t.numRecordBatches);for(const o of[...t.recordBatches()].slice().reverse())Tg.encode(n,o);const i=n.endVector();rs.startDictionariesVector(n,t.numDictionaries);for(const o of[...t.dictionaryBatches()].slice().reverse())Tg.encode(n,o);const s=n.endVector();return rs.startFooter(n),rs.addSchema(n,r),rs.addVersion(n,ai.V4),rs.addRecordBatches(n,i),rs.addDictionaries(n,s),rs.finishFooterBuffer(n,rs.endFooter(n)),n.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}*recordBatches(){for(let t,n=-1,r=this.numRecordBatches;++n<r;)(t=this.getRecordBatch(n))&&(yield t)}*dictionaryBatches(){for(let t,n=-1,r=this.numDictionaries;++n<r;)(t=this.getDictionaryBatch(n))&&(yield t)}getRecordBatch(t){return t>=0&&t<this.numRecordBatches&&this._recordBatches[t]||null}getDictionaryBatch(t){return t>=0&&t<this.numDictionaries&&this._dictionaryBatches[t]||null}},Hq=class extends ZI{constructor(t,n){super(t,n.version()),this._footer=n}get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}getRecordBatch(t){if(t>=0&&t<this.numRecordBatches){const n=this._footer.recordBatches(t);if(n)return Tg.decode(n)}return null}getDictionaryBatch(t){if(t>=0&&t<this.numDictionaries){const n=this._footer.dictionaries(t);if(n)return Tg.decode(n)}return null}},Tg=class fO{constructor(t,n,r){this.metaDataLength=t,this.offset=typeof r=="number"?r:r.low,this.bodyLength=typeof n=="number"?n:n.low}static decode(t){return new fO(t.metaDataLength(),t.bodyLength(),t.offset())}static encode(t,n){const{metaDataLength:r}=n,i=new SM(n.offset,0),s=new SM(n.bodyLength,0);return Z2.createBlock(t,i,r,s)}};const Ce=Object.freeze({done:!0,value:void 0});let xM=class{constructor(t){this._json=t}get schema(){return this._json.schema}get batches(){return this._json.batches||[]}get dictionaries(){return this._json.dictionaries||[]}},dO=class{tee(){return this._getDOMStream().tee()}pipe(t,n){return this._getNodeStream().pipe(t,n)}pipeTo(t,n){return this._getDOMStream().pipeTo(t,n)}pipeThrough(t,n){return this._getDOMStream().pipeThrough(t,n)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}},Gq=class extends dO{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(t=>this._closedPromiseResolve=t)}get closed(){return this._closedPromise}cancel(t){return W(this,void 0,void 0,function*(){yield this.return(t)})}write(t){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(t):this.resolvers.shift().resolve({done:!1,value:t}))}abort(t){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:t}:this.resolvers.shift().reject({done:!0,value:t}))}close(){if(this._closedPromiseResolve){const{resolvers:t}=this;for(;t.length>0;)t.shift().resolve(Ce);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(t){return ei.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,t)}toNodeStream(t){return ei.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,t)}throw(t){return W(this,void 0,void 0,function*(){return yield this.abort(t),Ce})}return(t){return W(this,void 0,void 0,function*(){return yield this.close(),Ce})}read(t){return W(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return W(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(...t){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((n,r)=>{this.resolvers.push({resolve:n,reject:r})}):Promise.resolve(Ce)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}},Xq=class extends Gq{write(t){if((t=ie(t)).byteLength>0)return super.write(t)}toString(t=!1){return t?Y2(this.toUint8Array(!0)):this.toUint8Array(!1).then(Y2)}toUint8Array(t=!1){return t?Os(this._values)[0]:W(this,void 0,void 0,function*(){var n,r;const i=[];let s=0;try{for(var o=Pr(this),a;a=yield o.next(),!a.done;){const l=a.value;i.push(l),s+=l.byteLength}}catch(l){n={error:l}}finally{try{a&&!a.done&&(r=o.return)&&(yield r.call(o))}finally{if(n)throw n.error}}return Os(i,s)[0]})}},Eg=class{constructor(t){t&&(this.source=new Qq(ei.fromIterable(t)))}[Symbol.iterator](){return this}next(t){return this.source.next(t)}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}peek(t){return this.source.peek(t)}read(t){return this.source.read(t)}},Ag=class hO{constructor(t){t instanceof hO?this.source=t.source:t instanceof Xq?this.source=new vl(ei.fromAsyncIterable(t)):YD(t)?this.source=new vl(ei.fromNodeStream(t)):zI(t)?this.source=new vl(ei.fromDOMStream(t)):jD(t)?this.source=new vl(ei.fromDOMStream(t.body)):Yb(t)?this.source=new vl(ei.fromIterable(t)):ep(t)?this.source=new vl(ei.fromAsyncIterable(t)):PI(t)&&(this.source=new vl(ei.fromAsyncIterable(t)))}[Symbol.asyncIterator](){return this}next(t){return this.source.next(t)}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}get closed(){return this.source.closed}cancel(t){return this.source.cancel(t)}peek(t){return this.source.peek(t)}read(t){return this.source.read(t)}},Qq=class{constructor(t){this.source=t}cancel(t){this.return(t)}peek(t){return this.next(t,"peek").value}read(t){return this.next(t,"read").value}next(t,n="read"){return this.source.next({cmd:n,size:t})}throw(t){return Object.create(this.source.throw&&this.source.throw(t)||Ce)}return(t){return Object.create(this.source.return&&this.source.return(t)||Ce)}},vl=class{constructor(t){this.source=t,this._closedPromise=new Promise(n=>this._closedPromiseResolve=n)}cancel(t){return W(this,void 0,void 0,function*(){yield this.return(t)})}get closed(){return this._closedPromise}read(t){return W(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return W(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(t,n="read"){return W(this,void 0,void 0,function*(){return yield this.source.next({cmd:n,size:t})})}throw(t){return W(this,void 0,void 0,function*(){const n=this.source.throw&&(yield this.source.throw(t))||Ce;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(n)})}return(t){return W(this,void 0,void 0,function*(){const n=this.source.return&&(yield this.source.return(t))||Ce;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(n)})}},IM=class extends Eg{constructor(t,n){super(),this.position=0,this.buffer=ie(t),this.size=typeof n>"u"?this.buffer.byteLength:n}readInt32(t){const{buffer:n,byteOffset:r}=this.readAt(t,4);return new DataView(n,r).getInt32(0,!0)}seek(t){return this.position=Math.min(t,this.size),t<this.size}read(t){const{buffer:n,size:r,position:i}=this;return n&&i<r?(typeof t!="number"&&(t=Number.POSITIVE_INFINITY),this.position=Math.min(r,i+Math.min(r-i,t)),n.subarray(i,this.position)):null}readAt(t,n){const r=this.buffer,i=Math.min(this.size,t+n);return r?r.subarray(t,i):new Uint8Array(n)}close(){this.buffer&&(this.buffer=null)}throw(t){return this.close(),{done:!0,value:t}}return(t){return this.close(),{done:!0,value:t}}},Mg=class extends Ag{constructor(t,n){super(),this.position=0,this._handle=t,typeof n=="number"?this.size=n:this._pending=W(this,void 0,void 0,function*(){this.size=(yield t.stat()).size,delete this._pending})}readInt32(t){return W(this,void 0,void 0,function*(){const{buffer:n,byteOffset:r}=yield this.readAt(t,4);return new DataView(n,r).getInt32(0,!0)})}seek(t){return W(this,void 0,void 0,function*(){return this._pending&&(yield this._pending),this.position=Math.min(t,this.size),t<this.size})}read(t){return W(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:n,size:r,position:i}=this;if(n&&i<r){typeof t!="number"&&(t=Number.POSITIVE_INFINITY);let s=i,o=0,a=0;const l=Math.min(r,s+Math.min(r-s,t)),c=new Uint8Array(Math.max(0,(this.position=l)-s));for(;(s+=a)<l&&(o+=a)<c.byteLength;)({bytesRead:a}=yield n.read(c,o,c.byteLength-o,s));return c}return null})}readAt(t,n){return W(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:r,size:i}=this;if(r&&t+n<i){const s=Math.min(i,t+n),o=new Uint8Array(s-t);return(yield r.read(o,0,n,t)).buffer}return new Uint8Array(n)})}close(){return W(this,void 0,void 0,function*(){const t=this._handle;this._handle=null,t&&(yield t.close())})}throw(t){return W(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:t}})}return(t){return W(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:t}})}};const Kq=65536;function Nu(e){return e<0&&(e=4294967295+e+1),`0x${e.toString(16)}`}const Sf=8,JI=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8];let pO=class{constructor(t){this.buffer=t}high(){return this.buffer[1]}low(){return this.buffer[0]}_times(t){const n=new Uint32Array([this.buffer[1]>>>16,this.buffer[1]&65535,this.buffer[0]>>>16,this.buffer[0]&65535]),r=new Uint32Array([t.buffer[1]>>>16,t.buffer[1]&65535,t.buffer[0]>>>16,t.buffer[0]&65535]);let i=n[3]*r[3];this.buffer[0]=i&65535;let s=i>>>16;return i=n[2]*r[3],s+=i,i=n[3]*r[2]>>>0,s+=i,this.buffer[0]+=s<<16,this.buffer[1]=s>>>0<i?Kq:0,this.buffer[1]+=s>>>16,this.buffer[1]+=n[1]*r[3]+n[2]*r[2]+n[3]*r[1],this.buffer[1]+=n[0]*r[3]+n[1]*r[2]+n[2]*r[1]+n[3]*r[0]<<16,this}_plus(t){const n=this.buffer[0]+t.buffer[0]>>>0;this.buffer[1]+=t.buffer[1],n<this.buffer[0]>>>0&&++this.buffer[1],this.buffer[0]=n}lessThan(t){return this.buffer[1]<t.buffer[1]||this.buffer[1]===t.buffer[1]&&this.buffer[0]<t.buffer[0]}equals(t){return this.buffer[1]===t.buffer[1]&&this.buffer[0]==t.buffer[0]}greaterThan(t){return t.lessThan(this)}hex(){return`${Nu(this.buffer[1])} ${Nu(this.buffer[0])}`}},rn=class Ks extends pO{times(t){return this._times(t),this}plus(t){return this._plus(t),this}static from(t,n=new Uint32Array(2)){return Ks.fromString(typeof t=="string"?t:t.toString(),n)}static fromNumber(t,n=new Uint32Array(2)){return Ks.fromString(t.toString(),n)}static fromString(t,n=new Uint32Array(2)){const r=t.length,i=new Ks(n);for(let s=0;s<r;){const o=Sf<r-s?Sf:r-s,a=new Ks(new Uint32Array([Number.parseInt(t.slice(s,s+o),10),0])),l=new Ks(new Uint32Array([JI[o],0]));i.times(l),i.plus(a),s+=o}return i}static convertArray(t){const n=new Uint32Array(t.length*2);for(let r=-1,i=t.length;++r<i;)Ks.from(t[r],new Uint32Array(n.buffer,n.byteOffset+2*r*4,2));return n}static multiply(t,n){return new Ks(new Uint32Array(t.buffer)).times(n)}static add(t,n){return new Ks(new Uint32Array(t.buffer)).plus(n)}},Eh=class Zs extends pO{negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[0]==0&&++this.buffer[1],this}times(t){return this._times(t),this}plus(t){return this._plus(t),this}lessThan(t){const n=this.buffer[1]<<0,r=t.buffer[1]<<0;return n<r||n===r&&this.buffer[0]<t.buffer[0]}static from(t,n=new Uint32Array(2)){return Zs.fromString(typeof t=="string"?t:t.toString(),n)}static fromNumber(t,n=new Uint32Array(2)){return Zs.fromString(t.toString(),n)}static fromString(t,n=new Uint32Array(2)){const r=t.startsWith("-"),i=t.length,s=new Zs(n);for(let o=r?1:0;o<i;){const a=Sf<i-o?Sf:i-o,l=new Zs(new Uint32Array([Number.parseInt(t.slice(o,o+a),10),0])),c=new Zs(new Uint32Array([JI[a],0]));s.times(c),s.plus(l),o+=a}return r?s.negate():s}static convertArray(t){const n=new Uint32Array(t.length*2);for(let r=-1,i=t.length;++r<i;)Zs.from(t[r],new Uint32Array(n.buffer,n.byteOffset+2*r*4,2));return n}static multiply(t,n){return new Zs(new Uint32Array(t.buffer)).times(n)}static add(t,n){return new Zs(new Uint32Array(t.buffer)).plus(n)}},Zq=class Js{constructor(t){this.buffer=t}high(){return new Eh(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2))}low(){return new Eh(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset,2))}negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[2]=~this.buffer[2],this.buffer[3]=~this.buffer[3],this.buffer[0]==0&&++this.buffer[1],this.buffer[1]==0&&++this.buffer[2],this.buffer[2]==0&&++this.buffer[3],this}times(t){const n=new rn(new Uint32Array([this.buffer[3],0])),r=new rn(new Uint32Array([this.buffer[2],0])),i=new rn(new Uint32Array([this.buffer[1],0])),s=new rn(new Uint32Array([this.buffer[0],0])),o=new rn(new Uint32Array([t.buffer[3],0])),a=new rn(new Uint32Array([t.buffer[2],0])),l=new rn(new Uint32Array([t.buffer[1],0])),c=new rn(new Uint32Array([t.buffer[0],0]));let u=rn.multiply(s,c);this.buffer[0]=u.low();const f=new rn(new Uint32Array([u.high(),0]));return u=rn.multiply(i,c),f.plus(u),u=rn.multiply(s,l),f.plus(u),this.buffer[1]=f.low(),this.buffer[3]=f.lessThan(u)?1:0,this.buffer[2]=f.high(),new rn(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2)).plus(rn.multiply(r,c)).plus(rn.multiply(i,l)).plus(rn.multiply(s,a)),this.buffer[3]+=rn.multiply(n,c).plus(rn.multiply(r,l)).plus(rn.multiply(i,a)).plus(rn.multiply(s,o)).low(),this}plus(t){const n=new Uint32Array(4);return n[3]=this.buffer[3]+t.buffer[3]>>>0,n[2]=this.buffer[2]+t.buffer[2]>>>0,n[1]=this.buffer[1]+t.buffer[1]>>>0,n[0]=this.buffer[0]+t.buffer[0]>>>0,n[0]<this.buffer[0]>>>0&&++n[1],n[1]<this.buffer[1]>>>0&&++n[2],n[2]<this.buffer[2]>>>0&&++n[3],this.buffer[3]=n[3],this.buffer[2]=n[2],this.buffer[1]=n[1],this.buffer[0]=n[0],this}hex(){return`${Nu(this.buffer[3])} ${Nu(this.buffer[2])} ${Nu(this.buffer[1])} ${Nu(this.buffer[0])}`}static multiply(t,n){return new Js(new Uint32Array(t.buffer)).times(n)}static add(t,n){return new Js(new Uint32Array(t.buffer)).plus(n)}static from(t,n=new Uint32Array(4)){return Js.fromString(typeof t=="string"?t:t.toString(),n)}static fromNumber(t,n=new Uint32Array(4)){return Js.fromString(t.toString(),n)}static fromString(t,n=new Uint32Array(4)){const r=t.startsWith("-"),i=t.length,s=new Js(n);for(let o=r?1:0;o<i;){const a=Sf<i-o?Sf:i-o,l=new Js(new Uint32Array([Number.parseInt(t.slice(o,o+a),10),0,0,0])),c=new Js(new Uint32Array([JI[a],0,0,0]));s.times(c),s.plus(l),o+=a}return r?s.negate():s}static convertArray(t){const n=new Uint32Array(t.length*4);for(let r=-1,i=t.length;++r<i;)Js.from(t[r],new Uint32Array(n.buffer,n.byteOffset+4*4*r,4));return n}},yO=class extends Wt{constructor(t,n,r,i){super(),this.nodesIndex=-1,this.buffersIndex=-1,this.bytes=t,this.nodes=n,this.buffers=r,this.dictionaries=i}visit(t){return super.visit(t instanceof Qe?t.type:t)}visitNull(t,{length:n}=this.nextFieldNode()){return Vt({type:t,length:n})}visitBool(t,{length:n,nullCount:r}=this.nextFieldNode()){return Vt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitInt(t,{length:n,nullCount:r}=this.nextFieldNode()){return Vt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitFloat(t,{length:n,nullCount:r}=this.nextFieldNode()){return Vt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitUtf8(t,{length:n,nullCount:r}=this.nextFieldNode()){return Vt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),valueOffsets:this.readOffsets(t),data:this.readData(t)})}visitBinary(t,{length:n,nullCount:r}=this.nextFieldNode()){return Vt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),valueOffsets:this.readOffsets(t),data:this.readData(t)})}visitFixedSizeBinary(t,{length:n,nullCount:r}=this.nextFieldNode()){return Vt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitDate(t,{length:n,nullCount:r}=this.nextFieldNode()){return Vt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitTimestamp(t,{length:n,nullCount:r}=this.nextFieldNode()){return Vt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitTime(t,{length:n,nullCount:r}=this.nextFieldNode()){return Vt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitDecimal(t,{length:n,nullCount:r}=this.nextFieldNode()){return Vt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitList(t,{length:n,nullCount:r}=this.nextFieldNode()){return Vt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),valueOffsets:this.readOffsets(t),child:this.visit(t.children[0])})}visitStruct(t,{length:n,nullCount:r}=this.nextFieldNode()){return Vt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),children:this.visitMany(t.children)})}visitUnion(t){return t.mode===Vi.Sparse?this.visitSparseUnion(t):this.visitDenseUnion(t)}visitDenseUnion(t,{length:n,nullCount:r}=this.nextFieldNode()){return Vt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),typeIds:this.readTypeIds(t),valueOffsets:this.readOffsets(t),children:this.visitMany(t.children)})}visitSparseUnion(t,{length:n,nullCount:r}=this.nextFieldNode()){return Vt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),typeIds:this.readTypeIds(t),children:this.visitMany(t.children)})}visitDictionary(t,{length:n,nullCount:r}=this.nextFieldNode()){return Vt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t.indices),dictionary:this.readDictionary(t)})}visitInterval(t,{length:n,nullCount:r}=this.nextFieldNode()){return Vt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitFixedSizeList(t,{length:n,nullCount:r}=this.nextFieldNode()){return Vt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),child:this.visit(t.children[0])})}visitMap(t,{length:n,nullCount:r}=this.nextFieldNode()){return Vt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),valueOffsets:this.readOffsets(t),child:this.visit(t.children[0])})}nextFieldNode(){return this.nodes[++this.nodesIndex]}nextBufferRange(){return this.buffers[++this.buffersIndex]}readNullBitmap(t,n,r=this.nextBufferRange()){return n>0&&this.readData(t,r)||new Uint8Array(0)}readOffsets(t,n){return this.readData(t,n)}readTypeIds(t,n){return this.readData(t,n)}readData(t,{length:n,offset:r}=this.nextBufferRange()){return this.bytes.subarray(r,r+n)}readDictionary(t){return this.dictionaries.get(t.id)}},Jq=class extends yO{constructor(t,n,r,i){super(new Uint8Array(0),n,r,i),this.sources=t}readNullBitmap(t,n,{offset:r}=this.nextBufferRange()){return n<=0?new Uint8Array(0):X2(this.sources[r])}readOffsets(t,{offset:n}=this.nextBufferRange()){return ge(Uint8Array,ge(Int32Array,this.sources[n]))}readTypeIds(t,{offset:n}=this.nextBufferRange()){return ge(Uint8Array,ge(t.ArrayType,this.sources[n]))}readData(t,{offset:n}=this.nextBufferRange()){const{sources:r}=this;return Ft.isTimestamp(t)||(Ft.isInt(t)||Ft.isTime(t))&&t.bitWidth===64||Ft.isDate(t)&&t.unit===Fo.MILLISECOND?ge(Uint8Array,Eh.convertArray(r[n])):Ft.isDecimal(t)?ge(Uint8Array,Zq.convertArray(r[n])):Ft.isBinary(t)||Ft.isFixedSizeBinary(t)?tW(r[n]):Ft.isBool(t)?X2(r[n]):Ft.isUtf8(t)?UI(r[n].join("")):ge(Uint8Array,ge(t.ArrayType,r[n].map(i=>+i)))}};function tW(e){const t=e.join(""),n=new Uint8Array(t.length/2);for(let r=0;r<t.length;r+=2)n[r>>1]=Number.parseInt(t.slice(r,r+2),16);return n}let Et=class extends Wt{compareSchemas(t,n){return t===n||n instanceof t.constructor&&this.compareManyFields(t.fields,n.fields)}compareManyFields(t,n){return t===n||Array.isArray(t)&&Array.isArray(n)&&t.length===n.length&&t.every((r,i)=>this.compareFields(r,n[i]))}compareFields(t,n){return t===n||n instanceof t.constructor&&t.name===n.name&&t.nullable===n.nullable&&this.visit(t.type,n.type)}};function $r(e,t){return t instanceof e.constructor}function ty(e,t){return e===t||$r(e,t)}function jo(e,t){return e===t||$r(e,t)&&e.bitWidth===t.bitWidth&&e.isSigned===t.isSigned}function Wb(e,t){return e===t||$r(e,t)&&e.precision===t.precision}function eW(e,t){return e===t||$r(e,t)&&e.byteWidth===t.byteWidth}function t3(e,t){return e===t||$r(e,t)&&e.unit===t.unit}function ey(e,t){return e===t||$r(e,t)&&e.unit===t.unit&&e.timezone===t.timezone}function ny(e,t){return e===t||$r(e,t)&&e.unit===t.unit&&e.bitWidth===t.bitWidth}function nW(e,t){return e===t||$r(e,t)&&e.children.length===t.children.length&&Ua.compareManyFields(e.children,t.children)}function rW(e,t){return e===t||$r(e,t)&&e.children.length===t.children.length&&Ua.compareManyFields(e.children,t.children)}function e3(e,t){return e===t||$r(e,t)&&e.mode===t.mode&&e.typeIds.every((n,r)=>n===t.typeIds[r])&&Ua.compareManyFields(e.children,t.children)}function iW(e,t){return e===t||$r(e,t)&&e.id===t.id&&e.isOrdered===t.isOrdered&&Ua.visit(e.indices,t.indices)&&Ua.visit(e.dictionary,t.dictionary)}function n3(e,t){return e===t||$r(e,t)&&e.unit===t.unit}function sW(e,t){return e===t||$r(e,t)&&e.listSize===t.listSize&&e.children.length===t.children.length&&Ua.compareManyFields(e.children,t.children)}function oW(e,t){return e===t||$r(e,t)&&e.keysSorted===t.keysSorted&&e.children.length===t.children.length&&Ua.compareManyFields(e.children,t.children)}Et.prototype.visitNull=ty;Et.prototype.visitBool=ty;Et.prototype.visitInt=jo;Et.prototype.visitInt8=jo;Et.prototype.visitInt16=jo;Et.prototype.visitInt32=jo;Et.prototype.visitInt64=jo;Et.prototype.visitUint8=jo;Et.prototype.visitUint16=jo;Et.prototype.visitUint32=jo;Et.prototype.visitUint64=jo;Et.prototype.visitFloat=Wb;Et.prototype.visitFloat16=Wb;Et.prototype.visitFloat32=Wb;Et.prototype.visitFloat64=Wb;Et.prototype.visitUtf8=ty;Et.prototype.visitBinary=ty;Et.prototype.visitFixedSizeBinary=eW;Et.prototype.visitDate=t3;Et.prototype.visitDateDay=t3;Et.prototype.visitDateMillisecond=t3;Et.prototype.visitTimestamp=ey;Et.prototype.visitTimestampSecond=ey;Et.prototype.visitTimestampMillisecond=ey;Et.prototype.visitTimestampMicrosecond=ey;Et.prototype.visitTimestampNanosecond=ey;Et.prototype.visitTime=ny;Et.prototype.visitTimeSecond=ny;Et.prototype.visitTimeMillisecond=ny;Et.prototype.visitTimeMicrosecond=ny;Et.prototype.visitTimeNanosecond=ny;Et.prototype.visitDecimal=ty;Et.prototype.visitList=nW;Et.prototype.visitStruct=rW;Et.prototype.visitUnion=e3;Et.prototype.visitDenseUnion=e3;Et.prototype.visitSparseUnion=e3;Et.prototype.visitDictionary=iW;Et.prototype.visitInterval=n3;Et.prototype.visitIntervalDayTime=n3;Et.prototype.visitIntervalYearMonth=n3;Et.prototype.visitFixedSizeList=sW;Et.prototype.visitMap=oW;const Ua=new Et;function aW(e,t){return Ua.compareSchemas(e,t)}function Uw(e,t){return lW(e,t.map(n=>n.data.concat()))}function lW(e,t){const n=[...e.fields],r=[],i={numBatches:t.reduce((f,d)=>Math.max(f,d.length),0)};let s=0,o=0,a=-1;const l=t.length;let c,u=[];for(;i.numBatches-- >0;){for(o=Number.POSITIVE_INFINITY,a=-1;++a<l;)u[a]=c=t[a].shift(),o=Math.min(o,c?c.length:o);Number.isFinite(o)&&(u=cW(n,o,u,t,i),o>0&&(r[s++]=Vt({type:new Zn(n),length:o,nullCount:0,children:u.slice()})))}return[e=e.assign(n),r.map(f=>new Fi(e,f))]}function cW(e,t,n,r,i){var s;const o=(t+63&-64)>>3;for(let a=-1,l=r.length;++a<l;){const c=n[a],u=c==null?void 0:c.length;if(u>=t)u===t?n[a]=c:(n[a]=c.slice(0,t),i.numBatches=Math.max(i.numBatches,r[a].unshift(c.slice(t,u-t))));else{const f=e[a];e[a]=f.clone({nullable:!0}),n[a]=(s=c==null?void 0:c._changeLengthAndBackfillNullBitmap(t))!==null&&s!==void 0?s:Vt({type:f.type,length:t,nullCount:t,nullBitmap:new Uint8Array(o)})}}return n}var mO;let ap=class Dl{constructor(...t){var n,r;if(t.length===0)return this.batches=[],this.schema=new Re([]),this._offsets=[0],this;let i,s;t[0]instanceof Re&&(i=t.shift()),t[t.length-1]instanceof Uint32Array&&(s=t.pop());const o=l=>{if(l){if(l instanceof Fi)return[l];if(l instanceof Dl)return l.batches;if(l instanceof Fe){if(l.type instanceof Zn)return[new Fi(new Re(l.type.children),l)]}else{if(Array.isArray(l))return l.flatMap(c=>o(c));if(typeof l[Symbol.iterator]=="function")return[...l].flatMap(c=>o(c));if(typeof l=="object"){const c=Object.keys(l),u=c.map(h=>new tn([l[h]])),f=new Re(c.map((h,p)=>new Qe(String(h),u[p].type))),[,d]=Uw(f,u);return d.length===0?[new Fi(l)]:d}}}return[]},a=t.flatMap(l=>o(l));if(i=(r=i??((n=a[0])===null||n===void 0?void 0:n.schema))!==null&&r!==void 0?r:new Re([]),!(i instanceof Re))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const l of a){if(!(l instanceof Fi))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!aW(i,l.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=i,this.batches=a,this._offsets=s??K8(this.data)}get data(){return this.batches.map(({data:t})=>t)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((t,n)=>t+n.length,0)}get nullCount(){return this._nullCount===-1&&(this._nullCount=Q8(this.data)),this._nullCount}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}getByteLength(t){return 0}[Symbol.iterator](){return this.batches.length>0?KI.visit(new tn(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(`,
  `)}
]`}concat(...t){const n=this.schema,r=this.data.concat(t.flatMap(({data:i})=>i));return new Dl(n,r.map(i=>new Fi(n,i)))}slice(t,n){const r=this.schema;[t,n]=G8({length:this.numRows},t,n);const i=Z8(this.data,this._offsets,t,n);return new Dl(r,i.map(s=>new Fi(r,s)))}getChild(t){return this.getChildAt(this.schema.fields.findIndex(n=>n.name===t))}getChildAt(t){if(t>-1&&t<this.schema.fields.length){const n=this.data.map(r=>r.children[t]);if(n.length===0){const{type:r}=this.schema.fields[t],i=Vt({type:r,length:0,nullCount:0});n.push(i._changeLengthAndBackfillNullBitmap(this.numRows))}return new tn(n)}return null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=[...this.batches];if(t>-1&&t<this.numCols){n||(n=new tn([Vt({type:new Ra,length:this.numRows})]));const s=r.fields.slice(),o=s[t].clone({type:n.type}),a=this.schema.fields.map((l,c)=>this.getChildAt(c));[s[t],a[t]]=[o,n],[r,i]=Uw(r,a)}return new Dl(r,i)}select(t){const n=this.schema.fields.reduce((r,i,s)=>r.set(i.name,s),new Map);return this.selectAt(t.map(r=>n.get(r)).filter(r=>r>-1))}selectAt(t){const n=this.schema.selectAt(t),r=this.batches.map(i=>i.selectAt(t));return new Dl(n,r)}assign(t){const n=this.schema.fields,[r,i]=t.schema.fields.reduce((a,l,c)=>{const[u,f]=a,d=n.findIndex(h=>h.name===l.name);return~d?f[d]=c:u.push(c),a},[[],[]]),s=this.schema.assign(t.schema),o=[...n.map((a,l)=>[l,i[l]]).map(([a,l])=>l===void 0?this.getChildAt(a):t.getChildAt(l)),...r.map(a=>t.getChildAt(a))].filter(Boolean);return new Dl(...Uw(s,o))}};mO=Symbol.toStringTag;ap[mO]=(e=>(e.schema=null,e.batches=[],e._offsets=new Uint32Array([0]),e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,e.isValid=Qu(QI),e.get=Qu(Sr.getVisitFn(U.Struct)),e.set=J8(vi.getVisitFn(U.Struct)),e.indexOf=tO(vg.getVisitFn(U.Struct)),e.getByteLength=Qu(Fs.getVisitFn(U.Struct)),"Table"))(ap.prototype);var gO;let Fi=class th{constructor(...t){switch(t.length){case 2:{if([this.schema]=t,!(this.schema instanceof Re))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=Vt({nullCount:0,type:new Zn(this.schema.fields),children:this.schema.fields.map(n=>Vt({type:n.type,nullCount:0}))})]=t,!(this.data instanceof Fe))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=TM(this.schema,this.data.children);break}case 1:{const[n]=t,{fields:r,children:i,length:s}=Object.keys(n).reduce((l,c,u)=>(l.children[u]=n[c],l.length=Math.max(l.length,n[c].length),l.fields[u]=Qe.new({name:c,type:n[c].type,nullable:!0}),l),{length:0,fields:new Array,children:new Array}),o=new Re(r),a=Vt({type:new Zn(r),length:s,children:i,nullCount:0});[this.schema,this.data]=TM(o,a.children,s);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=bO(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(t){return this.data.getValid(t)}get(t){return Sr.visit(this.data,t)}set(t,n){return vi.visit(this.data,t,n)}indexOf(t,n){return vg.visit(this.data,t,n)}getByteLength(t){return Fs.visit(this.data,t)}[Symbol.iterator](){return KI.visit(new tn([this.data]))}toArray(){return[...this]}concat(...t){return new ap(this.schema,[this,...t])}slice(t,n){const[r]=new tn([this.data]).slice(t,n).data;return new th(this.schema,r)}getChild(t){var n;return this.getChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.schema.fields.length?new tn([this.data.children[t]]):null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=this.data;if(t>-1&&t<this.numCols){n||(n=new tn([Vt({type:new Ra,length:this.numRows})]));const s=r.fields.slice(),o=i.children.slice(),a=s[t].clone({type:n.type});[s[t],o[t]]=[a,n.data[0]],r=new Re(s,new Map(this.schema.metadata)),i=Vt({type:new Zn(s),children:o})}return new th(r,i)}select(t){const n=this.schema.select(t),r=new Zn(n.fields),i=[];for(const s of t){const o=this.schema.fields.findIndex(a=>a.name===s);~o&&(i[o]=this.data.children[o])}return new th(n,Vt({type:r,length:this.numRows,children:i}))}selectAt(t){const n=this.schema.selectAt(t),r=t.map(s=>this.data.children[s]).filter(Boolean),i=Vt({type:new Zn(n.fields),length:this.numRows,children:r});return new th(n,i)}};gO=Symbol.toStringTag;Fi[gO]=(e=>(e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(Fi.prototype);function TM(e,t,n=t.reduce((r,i)=>Math.max(r,i.length),0)){var r;const i=[...e.fields],s=[...t],o=(n+63&-64)>>3;for(const[a,l]of e.fields.entries()){const c=t[a];(!c||c.length!==n)&&(i[a]=l.clone({nullable:!0}),s[a]=(r=c==null?void 0:c._changeLengthAndBackfillNullBitmap(n))!==null&&r!==void 0?r:Vt({type:l.type,length:n,nullCount:n,nullBitmap:new Uint8Array(o)}))}return[e.assign(i),Vt({type:new Zn(i),length:n,children:s})]}function bO(e,t,n=new Map){for(let r=-1,i=e.length;++r<i;){const o=e[r].type,a=t[r];if(Ft.isDictionary(o)){if(!n.has(o.id))a.dictionary&&n.set(o.id,a.dictionary);else if(n.get(o.id)!==a.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}o.children&&o.children.length>0&&bO(o.children,a.children,n)}return n}let vO=class extends Fi{constructor(t){const n=t.fields.map(i=>Vt({type:i.type})),r=Vt({type:new Zn(t.fields),nullCount:0,children:n});super(t,r)}};var $g;(function(e){e[e.BUFFER=0]="BUFFER"})($g||($g={}));var Ng;(function(e){e[e.LZ4_FRAME=0]="LZ4_FRAME",e[e.ZSTD=1]="ZSTD"})(Ng||(Ng={}));let uW=class Ol{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBodyCompression(t,n){return(n||new Ol).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBodyCompression(t,n){return t.setPosition(t.position()+ve),(n||new Ol).__init(t.readInt32(t.position())+t.position(),t)}codec(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt8(this.bb_pos+t):Ng.LZ4_FRAME}method(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt8(this.bb_pos+t):$g.BUFFER}static startBodyCompression(t){t.startObject(2)}static addCodec(t,n){t.addFieldInt8(0,n,Ng.LZ4_FRAME)}static addMethod(t,n){t.addFieldInt8(1,n,$g.BUFFER)}static endBodyCompression(t){return t.endObject()}static createBodyCompression(t,n,r){return Ol.startBodyCompression(t),Ol.addCodec(t,n),Ol.addMethod(t,r),Ol.endBodyCompression(t)}},wO=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(t,n,r){return t.prep(8,16),t.writeInt64(r),t.writeInt64(n),t.offset()}},_O=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(t,n,r){return t.prep(8,16),t.writeInt64(r),t.writeInt64(n),t.offset()}},so=class sS{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsRecordBatch(t,n){return(n||new sS).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsRecordBatch(t,n){return t.setPosition(t.position()+ve),(n||new sS).__init(t.readInt32(t.position())+t.position(),t)}length(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}nodes(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new _O).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}nodesLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}buffers(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new wO).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}buffersLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}compression(t){const n=this.bb.__offset(this.bb_pos,10);return n?(t||new uW).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}static startRecordBatch(t){t.startObject(4)}static addLength(t,n){t.addFieldInt64(0,n,t.createLong(0,0))}static addNodes(t,n){t.addFieldOffset(1,n,0)}static startNodesVector(t,n){t.startVector(16,n,8)}static addBuffers(t,n){t.addFieldOffset(2,n,0)}static startBuffersVector(t,n){t.startVector(16,n,8)}static addCompression(t,n){t.addFieldOffset(3,n,0)}static endRecordBatch(t){return t.endObject()}},su=class oS{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryBatch(t,n){return(n||new oS).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryBatch(t,n){return t.setPosition(t.position()+ve),(n||new oS).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}data(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new so).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isDelta(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startDictionaryBatch(t){t.startObject(3)}static addId(t,n){t.addFieldInt64(0,n,t.createLong(0,0))}static addData(t,n){t.addFieldOffset(1,n,0)}static addIsDelta(t,n){t.addFieldInt8(2,+n,0)}static endDictionaryBatch(t){return t.endObject()}};var kg;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(kg||(kg={}));let Zo=class os{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMessage(t,n){return(n||new os).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMessage(t,n){return t.setPosition(t.position()+ve),(n||new os).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):vf.V1}headerType(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):kg.NONE}header(t){const n=this.bb.__offset(this.bb_pos,8);return n?this.bb.__union(t,this.bb_pos+n):null}bodyLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new ci).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startMessage(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,vf.V1)}static addHeaderType(t,n){t.addFieldInt8(1,n,kg.NONE)}static addHeader(t,n){t.addFieldOffset(2,n,0)}static addBodyLength(t,n){t.addFieldInt64(3,n,t.createLong(0,0))}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endMessage(t){return t.endObject()}static finishMessageBuffer(t,n){t.finish(n)}static finishSizePrefixedMessageBuffer(t,n){t.finish(n,void 0,!0)}static createMessage(t,n,r,i,s,o){return os.startMessage(t),os.addVersion(t,n),os.addHeaderType(t,r),os.addHeader(t,i),os.addBodyLength(t,s),os.addCustomMetadata(t,o),os.endMessage(t)}};var fW=xo;let dW=class extends Wt{visit(t,n){return t==null||n==null?void 0:super.visit(t,n)}visitNull(t,n){return vM.startNull(n),vM.endNull(n)}visitInt(t,n){return $u.startInt(n),$u.addBitWidth(n,t.bitWidth),$u.addIsSigned(n,t.isSigned),$u.endInt(n)}visitFloat(t,n){return cm.startFloatingPoint(n),cm.addPrecision(n,t.precision),cm.endFloatingPoint(n)}visitBinary(t,n){return mM.startBinary(n),mM.endBinary(n)}visitBool(t,n){return gM.startBool(n),gM.endBool(n)}visitUtf8(t,n){return _M.startUtf8(n),_M.endUtf8(n)}visitDecimal(t,n){return Jc.startDecimal(n),Jc.addScale(n,t.scale),Jc.addPrecision(n,t.precision),Jc.addBitWidth(n,t.bitWidth),Jc.endDecimal(n)}visitDate(t,n){return om.startDate(n),om.addUnit(n,t.unit),om.endDate(n)}visitTime(t,n){return Kd.startTime(n),Kd.addUnit(n,t.unit),Kd.addBitWidth(n,t.bitWidth),Kd.endTime(n)}visitTimestamp(t,n){const r=t.timezone&&n.createString(t.timezone)||void 0;return Zd.startTimestamp(n),Zd.addUnit(n,t.unit),r!==void 0&&Zd.addTimezone(n,r),Zd.endTimestamp(n)}visitInterval(t,n){return um.startInterval(n),um.addUnit(n,t.unit),um.endInterval(n)}visitList(t,n){return bM.startList(n),bM.endList(n)}visitStruct(t,n){return wM.startStruct_(n),wM.endStruct_(n)}visitUnion(t,n){$l.startTypeIdsVector(n,t.typeIds.length);const r=$l.createTypeIdsVector(n,t.typeIds);return $l.startUnion(n),$l.addMode(n,t.mode),$l.addTypeIds(n,r),$l.endUnion(n)}visitDictionary(t,n){const r=this.visit(t.indices,n);return Kc.startDictionaryEncoding(n),Kc.addId(n,new fW(t.id,0)),Kc.addIsOrdered(n,t.isOrdered),r!==void 0&&Kc.addIndexType(n,r),Kc.endDictionaryEncoding(n)}visitFixedSizeBinary(t,n){return am.startFixedSizeBinary(n),am.addByteWidth(n,t.byteWidth),am.endFixedSizeBinary(n)}visitFixedSizeList(t,n){return lm.startFixedSizeList(n),lm.addListSize(n,t.listSize),lm.endFixedSizeList(n)}visitMap(t,n){return fm.startMap(n),fm.addKeysSorted(n,t.keysSorted),fm.endMap(n)}};const Pw=new dW;function hW(e,t=new Map){return new Re(yW(e,t),hm(e.customMetadata),t)}function SO(e){return new Yi(e.count,xO(e.columns),IO(e.columns))}function pW(e){return new Bo(SO(e.data),e.id,e.isDelta)}function yW(e,t){return(e.fields||[]).filter(Boolean).map(n=>Qe.fromJSON(n,t))}function EM(e,t){return(e.children||[]).filter(Boolean).map(n=>Qe.fromJSON(n,t))}function xO(e){return(e||[]).reduce((t,n)=>[...t,new Zf(n.count,mW(n.VALIDITY)),...xO(n.children)],[])}function IO(e,t=[]){for(let n=-1,r=(e||[]).length;++n<r;){const i=e[n];i.VALIDITY&&t.push(new go(t.length,i.VALIDITY.length)),i.TYPE&&t.push(new go(t.length,i.TYPE.length)),i.OFFSET&&t.push(new go(t.length,i.OFFSET.length)),i.DATA&&t.push(new go(t.length,i.DATA.length)),t=IO(i.children,t)}return t}function mW(e){return(e||[]).reduce((t,n)=>t+ +(n===0),0)}function gW(e,t){let n,r,i,s,o,a;return!t||!(s=e.dictionary)?(o=MM(e,EM(e,t)),i=new Qe(e.name,o,e.nullable,hm(e.customMetadata))):t.has(n=s.id)?(r=(r=s.indexType)?AM(r):new ip,a=new gf(t.get(n),r,n,s.isOrdered),i=new Qe(e.name,a,e.nullable,hm(e.customMetadata))):(r=(r=s.indexType)?AM(r):new ip,t.set(n,o=MM(e,EM(e,t))),a=new gf(o,r,n,s.isOrdered),i=new Qe(e.name,a,e.nullable,hm(e.customMetadata))),i||null}function hm(e){return new Map(Object.entries(e||{}))}function AM(e){return new Ca(e.isSigned,e.bitWidth)}function MM(e,t){const n=e.type.name;switch(n){case"NONE":return new Ra;case"null":return new Ra;case"binary":return new ag;case"utf8":return new lg;case"bool":return new cg;case"list":return new pg((t||[])[0]);case"struct":return new Zn(t||[]);case"struct_":return new Zn(t||[])}switch(n){case"int":{const r=e.type;return new Ca(r.isSigned,r.bitWidth)}case"floatingpoint":{const r=e.type;return new sp(_r[r.precision])}case"decimal":{const r=e.type;return new ug(r.scale,r.precision,r.bitWidth)}case"date":{const r=e.type;return new fg(Fo[r.unit])}case"time":{const r=e.type;return new op(ee[r.unit],r.bitWidth)}case"timestamp":{const r=e.type;return new dg(ee[r.unit],r.timezone)}case"interval":{const r=e.type;return new hg(La[r.unit])}case"union":{const r=e.type;return new yg(Vi[r.mode],r.typeIds||[],t||[])}case"fixedsizebinary":{const r=e.type;return new mg(r.byteWidth)}case"fixedsizelist":{const r=e.type;return new gg(r.listSize,(t||[])[0])}case"map":{const r=e.type;return new bg((t||[])[0],r.keysSorted)}}throw new Error(`Unrecognized type: "${n}"`)}var uc=xo,bW=cO,vW=bf;let Ah=class ou{constructor(t,n,r,i){this._version=n,this._headerType=r,this.body=new Uint8Array(0),i&&(this._createHeader=()=>i),this._bodyLength=typeof t=="number"?t:t.low}static fromJSON(t,n){const r=new ou(0,ai.V4,n);return r._createHeader=wW(t,n),r}static decode(t){t=new vW(ie(t));const n=Zo.getRootAsMessage(t),r=n.bodyLength(),i=n.version(),s=n.headerType(),o=new ou(r,i,s);return o._createHeader=_W(n,s),o}static encode(t){const n=new bW;let r=-1;return t.isSchema()?r=Re.encode(n,t.header()):t.isRecordBatch()?r=Yi.encode(n,t.header()):t.isDictionaryBatch()&&(r=Bo.encode(n,t.header())),Zo.startMessage(n),Zo.addVersion(n,ai.V4),Zo.addHeader(n,r),Zo.addHeaderType(n,t.headerType),Zo.addBodyLength(n,new uc(t.bodyLength,0)),Zo.finishMessageBuffer(n,Zo.endMessage(n)),n.asUint8Array()}static from(t,n=0){if(t instanceof Re)return new ou(0,ai.V4,ye.Schema,t);if(t instanceof Yi)return new ou(n,ai.V4,ye.RecordBatch,t);if(t instanceof Bo)return new ou(n,ai.V4,ye.DictionaryBatch,t);throw new Error(`Unrecognized Message header: ${t}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===ye.Schema}isRecordBatch(){return this.headerType===ye.RecordBatch}isDictionaryBatch(){return this.headerType===ye.DictionaryBatch}},Yi=class{constructor(t,n,r){this._nodes=n,this._buffers=r,this._length=typeof t=="number"?t:t.low}get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}},Bo=class{constructor(t,n,r=!1){this._data=t,this._isDelta=r,this._id=typeof n=="number"?n:n.low}get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}},go=class{constructor(t,n){this.offset=typeof t=="number"?t:t.low,this.length=typeof n=="number"?n:n.low}},Zf=class{constructor(t,n){this.length=typeof t=="number"?t:t.low,this.nullCount=typeof n=="number"?n:n.low}};function wW(e,t){return()=>{switch(t){case ye.Schema:return Re.fromJSON(e);case ye.RecordBatch:return Yi.fromJSON(e);case ye.DictionaryBatch:return Bo.fromJSON(e)}throw new Error(`Unrecognized Message type: { name: ${ye[t]}, type: ${t} }`)}}function _W(e,t){return()=>{switch(t){case ye.Schema:return Re.decode(e.header(new cs));case ye.RecordBatch:return Yi.decode(e.header(new so),e.version());case ye.DictionaryBatch:return Bo.decode(e.header(new su),e.version())}throw new Error(`Unrecognized Message type: { name: ${ye[t]}, type: ${t} }`)}}Qe.encode=DW;Qe.decode=NW;Qe.fromJSON=gW;Re.encode=kW;Re.decode=SW;Re.fromJSON=hW;Yi.encode=OW;Yi.decode=xW;Yi.fromJSON=SO;Bo.encode=FW;Bo.decode=IW;Bo.fromJSON=pW;Zf.encode=BW;Zf.decode=EW;go.encode=LW;go.decode=TW;function SW(e,t=new Map){const n=$W(e,t);return new Re(n,pm(e),t)}function xW(e,t=ai.V4){if(e.compression()!==null)throw new Error("Record batch compression not implemented");return new Yi(e.length(),AW(e),MW(e,t))}function IW(e,t=ai.V4){return new Bo(Yi.decode(e.data(),t),e.id(),e.isDelta())}function TW(e){return new go(e.offset(),e.length())}function EW(e){return new Zf(e.length(),e.nullCount())}function AW(e){const t=[];for(let n,r=-1,i=-1,s=e.nodesLength();++r<s;)(n=e.nodes(r))&&(t[++i]=Zf.decode(n));return t}function MW(e,t){const n=[];for(let r,i=-1,s=-1,o=e.buffersLength();++i<o;)(r=e.buffers(i))&&(t<ai.V4&&(r.bb_pos+=8*(i+1)),n[++s]=go.decode(r));return n}function $W(e,t){const n=[];for(let r,i=-1,s=-1,o=e.fieldsLength();++i<o;)(r=e.fields(i))&&(n[++s]=Qe.decode(r,t));return n}function $M(e,t){const n=[];for(let r,i=-1,s=-1,o=e.childrenLength();++i<o;)(r=e.children(i))&&(n[++s]=Qe.decode(r,t));return n}function NW(e,t){let n,r,i,s,o,a;return!t||!(a=e.dictionary())?(i=kM(e,$M(e,t)),r=new Qe(e.name(),i,e.nullable(),pm(e))):t.has(n=a.id().low)?(s=(s=a.indexType())?NM(s):new ip,o=new gf(t.get(n),s,n,a.isOrdered()),r=new Qe(e.name(),o,e.nullable(),pm(e))):(s=(s=a.indexType())?NM(s):new ip,t.set(n,i=kM(e,$M(e,t))),o=new gf(i,s,n,a.isOrdered()),r=new Qe(e.name(),o,e.nullable(),pm(e))),r||null}function pm(e){const t=new Map;if(e)for(let n,r,i=-1,s=Math.trunc(e.customMetadataLength());++i<s;)(n=e.customMetadata(i))&&(r=n.key())!=null&&t.set(r,n.value());return t}function NM(e){return new Ca(e.isSigned(),e.bitWidth())}function kM(e,t){const n=e.typeType();switch(n){case Be.NONE:return new Ra;case Be.Null:return new Ra;case Be.Binary:return new ag;case Be.Utf8:return new lg;case Be.Bool:return new cg;case Be.List:return new pg((t||[])[0]);case Be.Struct_:return new Zn(t||[])}switch(n){case Be.Int:{const r=e.type(new $u);return new Ca(r.isSigned(),r.bitWidth())}case Be.FloatingPoint:{const r=e.type(new cm);return new sp(r.precision())}case Be.Decimal:{const r=e.type(new Jc);return new ug(r.scale(),r.precision(),r.bitWidth())}case Be.Date:{const r=e.type(new om);return new fg(r.unit())}case Be.Time:{const r=e.type(new Kd);return new op(r.unit(),r.bitWidth())}case Be.Timestamp:{const r=e.type(new Zd);return new dg(r.unit(),r.timezone())}case Be.Interval:{const r=e.type(new um);return new hg(r.unit())}case Be.Union:{const r=e.type(new $l);return new yg(r.mode(),r.typeIdsArray()||[],t||[])}case Be.FixedSizeBinary:{const r=e.type(new am);return new mg(r.byteWidth())}case Be.FixedSizeList:{const r=e.type(new lm);return new gg(r.listSize(),(t||[])[0])}case Be.Map:{const r=e.type(new fm);return new bg((t||[])[0],r.keysSorted())}}throw new Error(`Unrecognized type: "${Be[n]}" (${n})`)}function kW(e,t){const n=t.fields.map(s=>Qe.encode(e,s));cs.startFieldsVector(e,n.length);const r=cs.createFieldsVector(e,n),i=t.metadata&&t.metadata.size>0?cs.createCustomMetadataVector(e,[...t.metadata].map(([s,o])=>{const a=e.createString(`${s}`),l=e.createString(`${o}`);return ci.startKeyValue(e),ci.addKey(e,a),ci.addValue(e,l),ci.endKeyValue(e)})):-1;return cs.startSchema(e),cs.addFields(e,r),cs.addEndianness(e,RW?wf.Little:wf.Big),i!==-1&&cs.addCustomMetadata(e,i),cs.endSchema(e)}function DW(e,t){let n=-1,r=-1,i=-1;const s=t.type;let o=t.typeId;Ft.isDictionary(s)?(o=s.dictionary.typeId,i=Pw.visit(s,e),r=Pw.visit(s.dictionary,e)):r=Pw.visit(s,e);const a=(s.children||[]).map(u=>Qe.encode(e,u)),l=Jr.createChildrenVector(e,a),c=t.metadata&&t.metadata.size>0?Jr.createCustomMetadataVector(e,[...t.metadata].map(([u,f])=>{const d=e.createString(`${u}`),h=e.createString(`${f}`);return ci.startKeyValue(e),ci.addKey(e,d),ci.addValue(e,h),ci.endKeyValue(e)})):-1;return t.name&&(n=e.createString(t.name)),Jr.startField(e),Jr.addType(e,r),Jr.addTypeType(e,o),Jr.addChildren(e,l),Jr.addNullable(e,!!t.nullable),n!==-1&&Jr.addName(e,n),i!==-1&&Jr.addDictionary(e,i),c!==-1&&Jr.addCustomMetadata(e,c),Jr.endField(e)}function OW(e,t){const n=t.nodes||[],r=t.buffers||[];so.startNodesVector(e,n.length);for(const o of n.slice().reverse())Zf.encode(e,o);const i=e.endVector();so.startBuffersVector(e,r.length);for(const o of r.slice().reverse())go.encode(e,o);const s=e.endVector();return so.startRecordBatch(e),so.addLength(e,new uc(t.length,0)),so.addNodes(e,i),so.addBuffers(e,s),so.endRecordBatch(e)}function FW(e,t){const n=Yi.encode(e,t.data);return su.startDictionaryBatch(e),su.addId(e,new uc(t.id,0)),su.addIsDelta(e,t.isDelta),su.addData(e,n),su.endDictionaryBatch(e)}function BW(e,t){return _O.createFieldNode(e,new uc(t.length,0),new uc(t.nullCount,0))}function LW(e,t){return wO.createBuffer(e,new uc(t.offset,0),new uc(t.length,0))}const RW=(()=>{const e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),new Int16Array(e)[0]===256})(),r3=e=>`Expected ${ye[e]} Message in stream, but was null or length 0.`,i3=e=>`Header pointer of flatbuffer-encoded ${ye[e]} Message is null or length 0.`,TO=(e,t)=>`Expected to read ${e} metadata bytes, but only read ${t}.`,EO=(e,t)=>`Expected to read ${e} bytes for message body, but only read ${t}.`;let AO=class{constructor(t){this.source=t instanceof Eg?t:new Eg(t)}[Symbol.iterator](){return this}next(){let t;return(t=this.readMetadataLength()).done||t.value===-1&&(t=this.readMetadataLength()).done||(t=this.readMetadata(t.value)).done?Ce:t}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}readMessage(t){let n;if((n=this.next()).done)return null;if(t!=null&&n.value.headerType!==t)throw new Error(r3(t));return n.value}readMessageBody(t){if(t<=0)return new Uint8Array(0);const n=ie(this.source.read(t));if(n.byteLength<t)throw new Error(EO(t,n.byteLength));return n.byteOffset%8===0&&n.byteOffset+n.byteLength<=n.buffer.byteLength?n:n.slice()}readSchema(t=!1){const n=ye.Schema,r=this.readMessage(n),i=r==null?void 0:r.header();if(t&&!i)throw new Error(i3(n));return i}readMetadataLength(){const t=this.source.read(Hb),n=t&&new bf(t),r=(n==null?void 0:n.readInt32(0))||0;return{done:r===0,value:r}}readMetadata(t){const n=this.source.read(t);if(!n)return Ce;if(n.byteLength<t)throw new Error(TO(t,n.byteLength));return{done:!1,value:Ah.decode(n)}}},CW=class{constructor(t,n){this.source=t instanceof Ag?t:zD(t)?new Mg(t,n):new Ag(t)}[Symbol.asyncIterator](){return this}next(){return W(this,void 0,void 0,function*(){let t;return(t=yield this.readMetadataLength()).done||t.value===-1&&(t=yield this.readMetadataLength()).done||(t=yield this.readMetadata(t.value)).done?Ce:t})}throw(t){return W(this,void 0,void 0,function*(){return yield this.source.throw(t)})}return(t){return W(this,void 0,void 0,function*(){return yield this.source.return(t)})}readMessage(t){return W(this,void 0,void 0,function*(){let n;if((n=yield this.next()).done)return null;if(t!=null&&n.value.headerType!==t)throw new Error(r3(t));return n.value})}readMessageBody(t){return W(this,void 0,void 0,function*(){if(t<=0)return new Uint8Array(0);const n=ie(yield this.source.read(t));if(n.byteLength<t)throw new Error(EO(t,n.byteLength));return n.byteOffset%8===0&&n.byteOffset+n.byteLength<=n.buffer.byteLength?n:n.slice()})}readSchema(t=!1){return W(this,void 0,void 0,function*(){const n=ye.Schema,r=yield this.readMessage(n),i=r==null?void 0:r.header();if(t&&!i)throw new Error(i3(n));return i})}readMetadataLength(){return W(this,void 0,void 0,function*(){const t=yield this.source.read(Hb),n=t&&new bf(t),r=(n==null?void 0:n.readInt32(0))||0;return{done:r===0,value:r}})}readMetadata(t){return W(this,void 0,void 0,function*(){const n=yield this.source.read(t);if(!n)return Ce;if(n.byteLength<t)throw new Error(TO(t,n.byteLength));return{done:!1,value:Ah.decode(n)}})}},UW=class extends AO{constructor(t){super(new Uint8Array(0)),this._schema=!1,this._body=[],this._batchIndex=0,this._dictionaryIndex=0,this._json=t instanceof xM?t:new xM(t)}next(){const{_json:t}=this;if(!this._schema)return this._schema=!0,{done:!1,value:Ah.fromJSON(t.schema,ye.Schema)};if(this._dictionaryIndex<t.dictionaries.length){const n=t.dictionaries[this._dictionaryIndex++];return this._body=n.data.columns,{done:!1,value:Ah.fromJSON(n,ye.DictionaryBatch)}}if(this._batchIndex<t.batches.length){const n=t.batches[this._batchIndex++];return this._body=n.columns,{done:!1,value:Ah.fromJSON(n,ye.RecordBatch)}}return this._body=[],Ce}readMessageBody(t){return n(this._body);function n(r){return(r||[]).reduce((i,s)=>[...i,...s.VALIDITY&&[s.VALIDITY]||[],...s.TYPE&&[s.TYPE]||[],...s.OFFSET&&[s.OFFSET]||[],...s.DATA&&[s.DATA]||[],...n(s.children)],[])}}readMessage(t){let n;if((n=this.next()).done)return null;if(t!=null&&n.value.headerType!==t)throw new Error(r3(t));return n.value}readSchema(){const t=ye.Schema,n=this.readMessage(t),r=n==null?void 0:n.header();if(!n||!r)throw new Error(i3(t));return r}};const Hb=4,aS="ARROW1",Dg=new Uint8Array(aS.length);for(let e=0;e<aS.length;e+=1)Dg[e]=aS.codePointAt(e);function s3(e,t=0){for(let n=-1,r=Dg.length;++n<r;)if(Dg[n]!==e[t+n])return!1;return!0}const ry=Dg.length,MO=ry+Hb,PW=ry*2+Hb;let iy=class ym extends dO{constructor(t){super(),this._impl=t}get closed(){return this._impl.closed}get schema(){return this._impl.schema}get autoDestroy(){return this._impl.autoDestroy}get dictionaries(){return this._impl.dictionaries}get numDictionaries(){return this._impl.numDictionaries}get numRecordBatches(){return this._impl.numRecordBatches}get footer(){return this._impl.isFile()?this._impl.footer:null}isSync(){return this._impl.isSync()}isAsync(){return this._impl.isAsync()}isFile(){return this._impl.isFile()}isStream(){return this._impl.isStream()}next(){return this._impl.next()}throw(t){return this._impl.throw(t)}return(t){return this._impl.return(t)}cancel(){return this._impl.cancel()}reset(t){return this._impl.reset(t),this._DOMStream=void 0,this._nodeStream=void 0,this}open(t){const n=this._impl.open(t);return ep(n)?n.then(()=>this):this}readRecordBatch(t){return this._impl.isFile()?this._impl.readRecordBatch(t):null}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}toDOMStream(){return ei.toDOMStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this})}toNodeStream(){return ei.toNodeStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this},{objectMode:!0})}static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,n){throw new Error('"throughDOM" not available in this environment')}static from(t){return t instanceof ym?t:q2(t)?YW(t):zD(t)?HW(t):ep(t)?W(this,void 0,void 0,function*(){return yield ym.from(yield t)}):jD(t)||zI(t)||YD(t)||PI(t)?WW(new Ag(t)):qW(new Eg(t))}static readAll(t){return t instanceof ym?t.isSync()?DM(t):OM(t):q2(t)||ArrayBuffer.isView(t)||Yb(t)||PD(t)?DM(t):OM(t)}},Og=class extends iy{constructor(t){super(t),this._impl=t}readAll(){return[...this]}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return on(this,arguments,function*(){yield K(yield*$a(Pr(this[Symbol.iterator]())))})}},Fg=class extends iy{constructor(t){super(t),this._impl=t}readAll(){var t,n;return W(this,void 0,void 0,function*(){const r=new Array;try{for(var i=Pr(this),s;s=yield i.next(),!s.done;){const o=s.value;r.push(o)}}catch(o){t={error:o}}finally{try{s&&!s.done&&(n=i.return)&&(yield n.call(i))}finally{if(t)throw t.error}}return r})}[Symbol.iterator](){throw new Error("AsyncRecordBatchStreamReader is not Iterable")}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}},$O=class extends Og{constructor(t){super(t),this._impl=t}},zW=class extends Fg{constructor(t){super(t),this._impl=t}},NO=class{constructor(t=new Map){this.closed=!1,this.autoDestroy=!0,this._dictionaryIndex=0,this._recordBatchIndex=0,this.dictionaries=t}get numDictionaries(){return this._dictionaryIndex}get numRecordBatches(){return this._recordBatchIndex}isSync(){return!1}isAsync(){return!1}isFile(){return!1}isStream(){return!1}reset(t){return this._dictionaryIndex=0,this._recordBatchIndex=0,this.schema=t,this.dictionaries=new Map,this}_loadRecordBatch(t,n){const r=this._loadVectors(t,n,this.schema.fields),i=Vt({type:new Zn(this.schema.fields),length:t.length,children:r});return new Fi(this.schema,i)}_loadDictionaryBatch(t,n){const{id:r,isDelta:i}=t,{dictionaries:s,schema:o}=this,a=s.get(r);if(i||!a){const l=o.dictionaries.get(r),c=this._loadVectors(t.data,n,[l]);return(a&&i?a.concat(new tn(c)):new tn(c)).memoize()}return a.memoize()}_loadVectors(t,n,r){return new yO(n,t.nodes,t.buffers,this.dictionaries).visitMany(r)}},Bg=class extends NO{constructor(t,n){super(n),this._reader=q2(t)?new UW(this._handle=t):new AO(this._handle=t)}isSync(){return!0}isStream(){return!0}[Symbol.iterator](){return this}cancel(){!this.closed&&(this.closed=!0)&&(this.reset()._reader.return(),this._reader=null,this.dictionaries=null)}open(t){return this.closed||(this.autoDestroy=DO(this,t),this.schema||(this.schema=this._reader.readSchema())||this.cancel()),this}throw(t){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.throw(t):Ce}return(t){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.return(t):Ce}next(){if(this.closed)return Ce;let t;const{_reader:n}=this;for(;t=this._readNextMessageAndValidate();)if(t.isSchema())this.reset(t.header());else if(t.isRecordBatch()){this._recordBatchIndex++;const r=t.header(),i=n.readMessageBody(t.bodyLength);return{done:!1,value:this._loadRecordBatch(r,i)}}else if(t.isDictionaryBatch()){this._dictionaryIndex++;const r=t.header(),i=n.readMessageBody(t.bodyLength),s=this._loadDictionaryBatch(r,i);this.dictionaries.set(r.id,s)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new vO(this.schema)}):this.return()}_readNextMessageAndValidate(t){return this._reader.readMessage(t)}},Lg=class extends NO{constructor(t,n){super(n),this._reader=new CW(this._handle=t)}isAsync(){return!0}isStream(){return!0}[Symbol.asyncIterator](){return this}cancel(){return W(this,void 0,void 0,function*(){!this.closed&&(this.closed=!0)&&(yield this.reset()._reader.return(),this._reader=null,this.dictionaries=null)})}open(t){return W(this,void 0,void 0,function*(){return this.closed||(this.autoDestroy=DO(this,t),this.schema||(this.schema=yield this._reader.readSchema())||(yield this.cancel())),this})}throw(t){return W(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.throw(t):Ce})}return(t){return W(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.return(t):Ce})}next(){return W(this,void 0,void 0,function*(){if(this.closed)return Ce;let t;const{_reader:n}=this;for(;t=yield this._readNextMessageAndValidate();)if(t.isSchema())yield this.reset(t.header());else if(t.isRecordBatch()){this._recordBatchIndex++;const r=t.header(),i=yield n.readMessageBody(t.bodyLength);return{done:!1,value:this._loadRecordBatch(r,i)}}else if(t.isDictionaryBatch()){this._dictionaryIndex++;const r=t.header(),i=yield n.readMessageBody(t.bodyLength),s=this._loadDictionaryBatch(r,i);this.dictionaries.set(r.id,s)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new vO(this.schema)}):yield this.return()})}_readNextMessageAndValidate(t){return W(this,void 0,void 0,function*(){return yield this._reader.readMessage(t)})}},kO=class extends Bg{constructor(t,n){super(t instanceof IM?t:new IM(t),n)}get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}isSync(){return!0}isFile(){return!0}open(t){if(!this.closed&&!this._footer){this.schema=(this._footer=this._readFooter()).schema;for(const n of this._footer.dictionaryBatches())n&&this._readDictionaryBatch(this._dictionaryIndex++)}return super.open(t)}readRecordBatch(t){var n;if(this.closed)return null;this._footer||this.open();const r=(n=this._footer)===null||n===void 0?void 0:n.getRecordBatch(t);if(r&&this._handle.seek(r.offset)){const i=this._reader.readMessage(ye.RecordBatch);if(i!=null&&i.isRecordBatch()){const s=i.header(),o=this._reader.readMessageBody(i.bodyLength);return this._loadRecordBatch(s,o)}}return null}_readDictionaryBatch(t){var n;const r=(n=this._footer)===null||n===void 0?void 0:n.getDictionaryBatch(t);if(r&&this._handle.seek(r.offset)){const i=this._reader.readMessage(ye.DictionaryBatch);if(i!=null&&i.isDictionaryBatch()){const s=i.header(),o=this._reader.readMessageBody(i.bodyLength),a=this._loadDictionaryBatch(s,o);this.dictionaries.set(s.id,a)}}}_readFooter(){const{_handle:t}=this,n=t.size-MO,r=t.readInt32(n),i=t.readAt(n-r,r);return ZI.decode(i)}_readNextMessageAndValidate(t){var n;if(this._footer||this.open(),this._footer&&this._recordBatchIndex<this.numRecordBatches){const r=(n=this._footer)===null||n===void 0?void 0:n.getRecordBatch(this._recordBatchIndex);if(r&&this._handle.seek(r.offset))return this._reader.readMessage(t)}return null}},jW=class extends Lg{constructor(t,...n){const r=typeof n[0]!="number"?n.shift():void 0,i=n[0]instanceof Map?n.shift():void 0;super(t instanceof Mg?t:new Mg(t,r),i)}get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}isFile(){return!0}isAsync(){return!0}open(t){const n=Object.create(null,{open:{get:()=>super.open}});return W(this,void 0,void 0,function*(){if(!this.closed&&!this._footer){this.schema=(this._footer=yield this._readFooter()).schema;for(const r of this._footer.dictionaryBatches())r&&(yield this._readDictionaryBatch(this._dictionaryIndex++))}return yield n.open.call(this,t)})}readRecordBatch(t){var n;return W(this,void 0,void 0,function*(){if(this.closed)return null;this._footer||(yield this.open());const r=(n=this._footer)===null||n===void 0?void 0:n.getRecordBatch(t);if(r&&(yield this._handle.seek(r.offset))){const i=yield this._reader.readMessage(ye.RecordBatch);if(i!=null&&i.isRecordBatch()){const s=i.header(),o=yield this._reader.readMessageBody(i.bodyLength);return this._loadRecordBatch(s,o)}}return null})}_readDictionaryBatch(t){var n;return W(this,void 0,void 0,function*(){const r=(n=this._footer)===null||n===void 0?void 0:n.getDictionaryBatch(t);if(r&&(yield this._handle.seek(r.offset))){const i=yield this._reader.readMessage(ye.DictionaryBatch);if(i!=null&&i.isDictionaryBatch()){const s=i.header(),o=yield this._reader.readMessageBody(i.bodyLength),a=this._loadDictionaryBatch(s,o);this.dictionaries.set(s.id,a)}}})}_readFooter(){return W(this,void 0,void 0,function*(){const{_handle:t}=this;t._pending&&(yield t._pending);const n=t.size-MO,r=yield t.readInt32(n),i=yield t.readAt(n-r,r);return ZI.decode(i)})}_readNextMessageAndValidate(t){return W(this,void 0,void 0,function*(){if(this._footer||(yield this.open()),this._footer&&this._recordBatchIndex<this.numRecordBatches){const n=this._footer.getRecordBatch(this._recordBatchIndex);if(n&&(yield this._handle.seek(n.offset)))return yield this._reader.readMessage(t)}return null})}},VW=class extends Bg{constructor(t,n){super(t,n)}_loadVectors(t,n,r){return new Jq(n,t.nodes,t.buffers,this.dictionaries).visitMany(r)}};function DO(e,t){return t&&typeof t.autoDestroy=="boolean"?t.autoDestroy:e.autoDestroy}function*DM(e){const t=iy.from(e);try{if(!t.open({autoDestroy:!1}).closed)do yield t;while(!t.reset().open().closed)}finally{t.cancel()}}function OM(e){return on(this,arguments,function*(){const n=yield K(iy.from(e));try{if(!(yield K(n.open({autoDestroy:!1}))).closed)do yield yield K(n);while(!(yield K(n.reset().open())).closed)}finally{yield K(n.cancel())}})}function YW(e){return new Og(new VW(e))}function qW(e){const t=e.peek(ry+7&-8);return t&&t.byteLength>=4?s3(t)?new $O(new kO(e.read())):new Og(new Bg(e)):new Og(new Bg(function*(){}()))}function WW(e){return W(this,void 0,void 0,function*(){const t=yield e.peek(ry+7&-8);return t&&t.byteLength>=4?s3(t)?new $O(new kO(yield e.read())):new Fg(new Lg(e)):new Fg(new Lg(function(){return on(this,arguments,function*(){})}()))})}function HW(e){return W(this,void 0,void 0,function*(){const{size:t}=yield e.stat(),n=new Mg(e,t);return t>=PW&&s3(yield n.readAt(0,ry+7&-8))?new zW(new jW(n)):new Fg(new Lg(n))})}function OO(e){const t=iy.from(e);return ep(t)?t.then(n=>OO(n)):t.isAsync()?t.readAll().then(n=>new ap(n)):new ap(t.readAll())}function GW(e="ws://localhost:3000/"){const t=[];let n=!1,r=null,i;const s={open(){n=!0,l()},close(){for(n=!1,r=null,i=null;t.length;)t.shift().reject("Socket closed")},error(c){if(r){const{reject:u}=r;r=null,l(),u(c)}else console.error("WebSocket error: ",c)},message({data:c}){if(r){const{query:u,resolve:f,reject:d}=r;if(r=null,l(),typeof c=="string"){const h=JSON.parse(c);h.error?d(h.error):f(h)}else if(u.type==="exec")f();else if(u.type==="arrow")f(OO(c.arrayBuffer()));else throw new Error(`Unexpected socket data: ${c}`)}else console.log("WebSocket message: ",c)}};function o(){i=new WebSocket(e);for(const c in s)i.addEventListener(c,s[c])}function a(c,u,f){i==null&&o(),t.push({query:c,resolve:u,reject:f}),n&&!r&&l()}function l(){t.length&&(r=t.shift(),i.send(JSON.stringify(r.query)))}return{get connected(){return n},query(c){return new Promise((u,f)=>a(c,u,f))}}}class Pa{constructor(t,n){t&&(this.table=String(t)),n&&(this.column=n)}get columns(){return this.column?[this.column]:[]}toString(){const{table:t,column:n}=this;if(n){const r=n.startsWith("*")?n:`"${n}"`;return`${t?`${FM(t)}.`:""}${r}`}else return t?FM(t):"NULL"}}function FM(e){return e.split(".").map(n=>`"${n}"`).join(".")}function XW(e,t){return e instanceof Pa&&e.column===t}function ke(e){return typeof e=="string"?o3(e):e}function mm(e){return typeof e=="string"?QW(e):e}function QW(e){return new Pa(e)}function o3(e,t){return arguments.length===1&&(t=e,e=null),new Pa(e,t)}function sy(e){switch(typeof e){case"boolean":return e?"TRUE":"FALSE";case"string":return`'${e}'`;case"number":return Number.isFinite(e)?String(e):"NULL";default:if(e==null)return"NULL";if(e instanceof Date){const t=+e;if(Number.isNaN(t))return"NULL";const n=e.getUTCFullYear(),r=e.getUTCMonth(),i=e.getUTCDate();return t===Date.UTC(n,r,i)?`MAKE_DATE(${n}, ${r+1}, ${i})`:`EPOCH_MS(${t})`}else return e instanceof RegExp?`'${e.source}'`:String(e)}}const xf=e=>typeof(e==null?void 0:e.addEventListener)=="function";function FO(e){return e instanceof Gb}class Gb{constructor(t,n,r){this._expr=Array.isArray(t)?t:[t],this._deps=n||[],this.annotate(r);const i=this._expr.filter(s=>xf(s));i.length>0?(this._params=Array.from(new Set(i)),this._params.forEach(s=>{s.addEventListener("value",()=>{var o;return KW(this,(o=this.map)==null?void 0:o.get("value"))})})):this.addEventListener=void 0}get value(){return this}get columns(){const{_params:t,_deps:n}=this;if(t){const r=new Set(t.flatMap(i=>{var o;const s=(o=i.value)==null?void 0:o.columns;return Array.isArray(s)?s:[]}));if(r.size){const i=new Set(n);return r.forEach(s=>i.add(s)),Array.from(i)}}return n}get column(){return this._deps.length?this._deps[0]:this.columns[0]}annotate(...t){return Object.assign(this,...t)}toString(){return this._expr.map(t=>xf(t)&&!FO(t)?sy(t.value):t).join("")}addEventListener(t,n){const r=this.map||(this.map=new Map);(r.get(t)||(r.set(t,new Set),r.get(t))).add(n)}}function KW(e,t){if(t!=null&&t.size)return Promise.allSettled(Array.from(t,n=>n(e)))}function BO(e,t){const n=[e[0]],r=new Set,i=t.length;for(let s=0,o=0;s<i;){const a=t[s];xf(a)?n[++o]=a:(Array.isArray(a==null?void 0:a.columns)&&a.columns.forEach(c=>r.add(c)),n[o]+=typeof a=="string"?a:sy(a));const l=e[++s];xf(n[o])?n[++o]=l:n[o]+=l}return{spans:n,cols:Array.from(r)}}function G(e,...t){const{spans:n,cols:r}=BO(e,t);return new Gb(n,r)}function ZW(e){const t=ke(e);return G`${t} DESC NULLS LAST`.annotate({label:t==null?void 0:t.label,desc:!0})}const oy=e=>({value:e,toString:()=>sy(e)});function Xb(e){var t;e(this.op,this),(t=this.children)==null||t.forEach(n=>n.visit(e))}function LO(e,t){const n=t.filter(i=>i!=null).map(ke),r=n.map((i,s)=>s?` ${e} `:"");return t.length&&r.push(""),G(r,...n).annotate({op:e,children:n,visit:Xb})}const fc=(...e)=>LO("AND",e.flat()),RO=(...e)=>LO("OR",e.flat()),CO=e=>t=>G`(${ke(t)} ${e})`.annotate({op:e,a:t,visit:Xb}),UO=CO("IS NULL"),Rg=CO("IS NOT NULL"),Jf=e=>(t,n)=>G`(${ke(t)} ${e} ${ke(n)})`.annotate({op:e,a:t,b:n,visit:Xb}),a3=Jf("="),JW=Jf("<>"),Cg=Jf("<"),PO=Jf(">"),Ug=Jf("<="),tH=Jf("IS NOT DISTINCT FROM");function eH(e,t,n,r){t=ke(t);const i=e.startsWith("NOT ")?"NOT ":"";return(n?r?G`${i}(${n[0]} <= ${t} AND ${t} < ${n[1]})`:G`(${t} ${e} ${n[0]} AND ${n[1]})`:G``).annotate({op:e,visit:Xb,field:t,range:n})}const jr=(e,t,n)=>eH("BETWEEN",e,t,n);function Pg(e,t){return Array.from({length:e},()=>t)}function Qb(e,t){return(...n)=>{const r=n.map(ke),i=t?`::${t}`:"";return(r.length?G([`${e}(`,...Pg(r.length-1,", "),`)${i}`],...r):G`${e}()${i}`).annotate({func:e,args:r})}}const nH=Qb("REGEXP_MATCHES"),rH=Qb("CONTAINS"),iH=Qb("PREFIX"),sH=Qb("SUFFIX");class Ll extends Gb{constructor(t,n,r,i,s="",o="",a=""){let l;if(i&&!(s||o||a))l=i?G`${n} OVER "${i}"`:G`${n} OVER ()`;else{const d=s&&o?" ":"",h=(s||o)&&a?" ":"";l=G`${n} OVER (${i?`"${i}" `:""}${s}${d}${o}${h}${a})`}r&&(l=G`(${l})::${r}`);const{_expr:u,_deps:f}=l;super(u,f,{window:t,func:n,type:r,name:i,group:s,order:o,frame:a})}get basis(){return this.column}get label(){const{func:t}=this;return t.label??t.toString()}over(t){const{window:n,func:r,type:i,group:s,order:o,frame:a}=this;return new Ll(n,r,i,t,s,o,a)}partitionby(...t){const n=t.flat().filter(u=>u).map(ke),r=G(["PARTITION BY ",Pg(n.length-1,", "),""],...n),{window:i,func:s,type:o,name:a,order:l,frame:c}=this;return new Ll(i,s,o,a,r,l,c)}orderby(...t){const n=t.flat().filter(u=>u).map(ke),r=G(["ORDER BY ",Pg(n.length-1,", "),""],...n),{window:i,func:s,type:o,name:a,group:l,frame:c}=this;return new Ll(i,s,o,a,l,r,c)}rows(t){const n=BM("ROWS",t),{window:r,func:i,type:s,name:o,group:a,order:l}=this;return new Ll(r,i,s,o,a,l,n)}range(t){const n=BM("RANGE",t),{window:r,func:i,type:s,name:o,group:a,order:l}=this;return new Ll(r,i,s,o,a,l,n)}}function BM(e,t){if(xf(t)){const n=G`${t}`;return n.toString=()=>`${e} ${LM(t.value)}`,n}return`${e} ${LM(t)}`}function LM(e){const[t,n]=e,r=t===0?"CURRENT ROW":Number.isFinite(t)?`${Math.abs(t)} PRECEDING`:"UNBOUNDED PRECEDING",i=n===0?"CURRENT ROW":Number.isFinite(n)?`${Math.abs(n)} FOLLOWING`:"UNBOUNDED FOLLOWING";return`BETWEEN ${r} AND ${i}`}class Mh extends Gb{constructor(t,n,r,i,s){n=(n||[]).map(ke);const{strings:o,exprs:a}=oH(t,n,r,i,s),{spans:l,cols:c}=BO(o,a);super(l,c,{aggregate:t,args:n,type:r,isDistinct:i,filter:s})}get basis(){return this.column}get label(){const{aggregate:t,args:n,isDistinct:r}=this,i=r?"DISTINCT"+(n.length?" ":""):"",s=n.length?`(${i}${n.map(aH).join(", ")})`:"";return`${t.toLowerCase()}${s}`}distinct(){const{aggregate:t,args:n,type:r,filter:i}=this;return new Mh(t,n,r,!0,i)}where(t){const{aggregate:n,args:r,type:i,isDistinct:s}=this;return new Mh(n,r,i,s,t)}window(){const{aggregate:t,args:n,type:r,isDistinct:i}=this,s=new Mh(t,n,null,i);return new Ll(t,s,r)}partitionby(...t){return this.window().partitionby(...t)}orderby(...t){return this.window().orderby(...t)}rows(t,n){return this.window().rows(t,n)}range(t,n){return this.window().range(t,n)}}function oH(e,t,n,r,i){const s=`)${n?`::${n}`:""}`;let o=[`${e}(${r?"DISTINCT ":""}`],a=[];return t.length?(o=o.concat([...Pg(t.length-1,", "),`${s}${i?" FILTER (WHERE ":""}`,...i?[")"]:[]]),a=[...t,...i?[i]:[]]):o[0]+="*"+s,{exprs:a,strings:o}}function aH(e){const t=sy(e);return t&&t.startsWith('"')&&t.endsWith('"')?t.slice(1,-1):t}function xi(e,t){return(...n)=>new Mh(e,n,t)}const Sn=xi("COUNT","INTEGER"),lp=xi("MAX"),cp=xi("MIN"),td=xi("SUM","DOUBLE"),lH=xi("REGR_INTERCEPT"),cH=xi("REGR_SLOPE"),uH=xi("REGR_COUNT"),fH=xi("REGR_SYY"),dH=xi("REGR_SXX"),hH=xi("REGR_AVGX"),RM=xi("ARG_MIN"),CM=xi("ARG_MAX");function pH(e,t){const n=ke(e),r=G`CAST(${n} AS ${t})`;return Object.defineProperty(r,"label",{enumerable:!0,get(){return e.label}}),Object.defineProperty(r,"aggregate",{enumerable:!0,get(){return e.aggregate||!1}}),r}const UM=e=>pH(e,"DOUBLE"),zO=e=>{const t=ke(e);return G`(1000 * (epoch(${t}) - second(${t})) + millisecond(${t}))::DOUBLE`},yH=e=>{const t=ke(e);return G`MAKE_DATE(2012, MONTH(${t}), DAY(${t}))`.annotate({label:"date"})};class Ct{static select(...t){return new Ct().select(...t)}static from(...t){return new Ct().from(...t)}static with(...t){return new Ct().with(...t)}static union(...t){return new zl("UNION",t.flat())}static unionAll(...t){return new zl("UNION ALL",t.flat())}static intersect(...t){return new zl("INTERSECT",t.flat())}static except(...t){return new zl("EXCEPT",t.flat())}constructor(){this.query={with:[],select:[],from:[],where:[],groupby:[],having:[],window:[],qualify:[],orderby:[]}}clone(){const t=new Ct;return t.query={...this.query},t}with(...t){const{query:n}=this;if(t.length===0)return n.with;{const r=[],i=(s,o)=>{const a=o.clone();a.cteFor=this,r.push({as:s,query:a})};return t.flat().forEach(s=>{if(s!=null)if(s.as&&s.query)i(s.as,s.query);else for(const o in s)i(o,s[o])}),n.with=n.with.concat(r),this}}select(...t){const{query:n}=this;if(t.length===0)return n.select;{const r=[];for(const i of t.flat())if(i!=null)if(typeof i=="string")r.push({as:i,expr:ke(i)});else if(i instanceof Pa)r.push({as:i.column,expr:i});else if(Array.isArray(i))r.push({as:i[0],expr:i[1]});else for(const s in i)r.push({as:h0(s),expr:ke(i[s])});return n.select=n.select.concat(r),this}}$select(...t){return this.query.select=[],this.select(...t)}distinct(t=!0){return this.query.distinct=!!t,this}from(...t){const{query:n}=this;if(t.length===0)return n.from;{const r=[];return t.flat().forEach(i=>{if(i!=null)if(typeof i=="string")r.push({as:i,from:mm(i)});else if(i instanceof Pa)r.push({as:i.table,from:i});else if(zw(i)||FO(i))r.push({from:i});else if(Array.isArray(i))r.push({as:h0(i[0]),from:mm(i[1])});else for(const s in i)r.push({as:h0(s),from:mm(i[s])})}),n.from=n.from.concat(r),this}}$from(...t){return this.query.from=[],this.from(...t)}sample(t,n){const{query:r}=this;if(arguments.length===0)return r.sample;{let i=t;return typeof t=="number"&&(i=t>0&&t<1?{perc:100*t,method:n}:{rows:Math.round(t),method:n}),r.sample=i,this}}where(...t){const{query:n}=this;return t.length===0?n.where:(n.where=n.where.concat(t.flat().filter(r=>r)),this)}$where(...t){return this.query.where=[],this.where(...t)}groupby(...t){const{query:n}=this;return t.length===0?n.groupby:(n.groupby=n.groupby.concat(t.flat().filter(r=>r).map(ke)),this)}$groupby(...t){return this.query.groupby=[],this.groupby(...t)}having(...t){const{query:n}=this;return t.length===0?n.having:(n.having=n.having.concat(t.flat().filter(r=>r)),this)}window(...t){const{query:n}=this;if(t.length===0)return n.window;{const r=[];return t.flat().forEach(i=>{if(i!=null)for(const s in i)r.push({as:h0(s),expr:i[s]})}),n.window=n.window.concat(r),this}}qualify(...t){const{query:n}=this;return t.length===0?n.qualify:(n.qualify=n.qualify.concat(t.flat().filter(r=>r)),this)}orderby(...t){const{query:n}=this;return t.length===0?n.orderby:(n.orderby=n.orderby.concat(t.flat().filter(r=>r).map(ke)),this)}limit(t){const{query:n}=this;return arguments.length===0?n.limit:(n.limit=Number.isFinite(t)?t:void 0,this)}offset(t){const{query:n}=this;return arguments.length===0?n.offset:(n.offset=Number.isFinite(t)?t:void 0,this)}get subqueries(){const{query:t,cteFor:n}=this,r=((n==null?void 0:n.query)||t).with,i=r==null?void 0:r.reduce((o,{as:a,query:l})=>(o[a]=l,o),{}),s=[];return t.from.forEach(({from:o})=>{if(zw(o))s.push(o);else if(i[o.table]){const a=i[o.table];s.push(a)}}),s}toString(){const{select:t,distinct:n,from:r,sample:i,where:s,groupby:o,having:a,window:l,qualify:c,orderby:u,limit:f,offset:d,with:h}=this.query,p=[];if(h.length){const v=h.map(({as:y,query:m})=>`"${y}" AS (${m})`);p.push(`WITH ${v.join(", ")}`)}const g=t.map(({as:v,expr:y})=>XW(y,v)&&!y.table?`${y}`:`${y} AS "${v}"`);if(p.push(`SELECT${n?" DISTINCT":""} ${g.join(", ")}`),r.length){const v=r.map(({as:y,from:m})=>{const b=zw(m)?`(${m})`:`${m}`;return!y||y===m.table?b:`${b} AS "${y}"`});p.push(`FROM ${v.join(", ")}`)}if(s.length){const v=s.map(String).filter(y=>y).join(" AND ");v&&p.push(`WHERE ${v}`)}if(i){const{rows:v,perc:y,method:m,seed:b}=i,w=v?`${v} ROWS`:`${y} PERCENT`,S=m?` (${m}${b!=null?`, ${b}`:""})`:"";p.push(`USING SAMPLE ${w}${S}`)}if(o.length&&p.push(`GROUP BY ${o.join(", ")}`),a.length){const v=a.map(String).filter(y=>y).join(" AND ");v&&p.push(`HAVING ${v}`)}if(l.length){const v=l.map(({as:y,expr:m})=>`"${y}" AS (${m})`);p.push(`WINDOW ${v.join(", ")}`)}if(c.length){const v=c.map(String).filter(y=>y).join(" AND ");v&&p.push(`QUALIFY ${v}`)}return u.length&&p.push(`ORDER BY ${u.join(", ")}`),Number.isFinite(f)&&p.push(`LIMIT ${f}`),Number.isFinite(d)&&p.push(`OFFSET ${d}`),p.join(" ")}}class zl{constructor(t,n){this.op=t,this.queries=n.map(r=>r.clone()),this.query={orderby:[]}}clone(){const t=new zl(this.op,this.queries);return t.query={...this.query},t}orderby(...t){const{query:n}=this;return t.length===0?n.orderby:(n.orderby=n.orderby.concat(t.flat().filter(r=>r).map(ke)),this)}limit(t){const{query:n}=this;return arguments.length===0?n.limit:(n.limit=Number.isFinite(t)?t:void 0,this)}offset(t){const{query:n}=this;return arguments.length===0?n.offset:(n.offset=Number.isFinite(t)?t:void 0,this)}get subqueries(){const{queries:t,cteFor:n}=this;return n&&t.forEach(r=>r.cteFor=n),t}toString(){const{op:t,queries:n,query:{orderby:r,limit:i,offset:s}}=this,o=[n.join(` ${t} `)];return r.length&&o.push(`ORDER BY ${r.join(", ")}`),Number.isFinite(i)&&o.push(`LIMIT ${i}`),Number.isFinite(s)&&o.push(`OFFSET ${s}`),o.join(" ")}}function zw(e){return e instanceof Ct||e instanceof zl}function h0(e){return mH(e)?e.slice(1,-1):e}function mH(e){return e[0]==='"'&&e[e.length-1]==='"'}function jO(e,t,{replace:n=!1,temp:r=!0,view:i=!1}={}){return"CREATE"+(n?" OR REPLACE ":" ")+(r?"TEMP ":"")+(i?"VIEW":"TABLE")+(n?" ":" IF NOT EXISTS ")+e+" AS "+t}function gH(e,{columns:t=Object.keys((e==null?void 0:e[0])||{})}={}){let n=[];if(Array.isArray(t)?(n=t,t=n.reduce((i,s)=>(i[s]=s,i),{})):t&&(n=Object.keys(t)),!n.length)throw new Error("Can not create table from empty column set.");const r=[];for(const i of e){const s=n.map(o=>`${sy(i[o])} AS "${t[o]}"`);r.push(`(SELECT ${s.join(", ")})`)}return r.join(" UNION ALL ")}function bH(e,t,n={}){const{select:r=["*"],...i}=n,s=gH(t),o=r.length===1&&r[0]==="*"?s:`SELECT ${r} FROM ${s}`;return jO(e,o,i)}function vH(e){switch(e){case"BIGINT":case"HUGEINT":case"INTEGER":case"SMALLINT":case"TINYINT":case"UBIGINT":case"UINTEGER":case"USMALLINT":case"UTINYINT":case"DOUBLE":case"FLOAT":case"REAL":case"DECIMAL":return"number";case"DATE":case"TIMESTAMP":case"TIMESTAMPTZ":case"TIME":return"date";case"BOOLEAN":return"boolean";case"VARCHAR":case"UUID":return"string";case"LIST":return"array";case"BLOB":case"STRUCT":case"MAP":return"object";default:throw new Error(`Unsupported type: ${e}`)}}const wH="count",_H="nulls",SH="max",xH="min",IH="distinct",TH={[wH]:Sn,[IH]:e=>Sn(e).distinct(),[SH]:lp,[xH]:cp,[_H]:e=>Sn().where(UO(e))};function EH({table:e,column:t},n){return Ct.from(e).select(n.map(r=>[r,TH[r](t)]))}const VO=()=>Object.create(null);class AH{constructor(t){this.mc=t,this.clear()}clear(){this.tables=VO()}tableInfo(t){const n=this.tables;if(n[t])return n[t];const r=MH(this.mc,t).catch(i=>{throw n[t]=null,i});return n[t]=r}async fieldInfo({table:t,column:n,stats:r}){const s=(await this.tableInfo(t))[n];if(s==null)return;if(!(r!=null&&r.length))return s;const o=await this.mc.query(EH(s,r),{persist:!0}),a={...s,...Array.from(o)[0]};for(const l in a){const c=a[l];typeof c=="bigint"&&(a[l]=Number(c))}return a}async queryFields(t){const n=await $H(this,t);return(await Promise.all(n.map(i=>this.fieldInfo(i)))).filter(i=>i)}}async function MH(e,t){const n=await e.query(`DESCRIBE ${mm(t)}`,{type:"json",cache:!1}),r=VO();for(const i of n)r[i.column_name]={table:t,column:i.column_name,sqlType:i.column_type,type:vH(i.column_type),nullable:i.null==="YES"};return r}async function $H(e,t){return t.length===1&&t[0].column==="*"?Object.values(await e.tableInfo(t[0].table)):t}function NH(e){let t=2166136261;for(let n=0,r=e.length;n<r;++n){const i=e.charCodeAt(n),s=i&65280;s&&(t=PM(t^s>>8)),t=PM(t^i&255)}return kH(t)}function PM(e){return e+(e<<1)+(e<<4)+(e<<7)+(e<<8)+(e<<24)}function kH(e){return e+=e<<13,e^=e>>>7,e+=e<<3,e^=e>>>17,e+=e<<5,e&4294967295}const YO=e=>e;class DH{constructor(t,{selection:n,temp:r=!0}){this.mc=t,this.selection=n,this.temp=r,this.reset()}reset(){this.enabled=!1,this.clients=null,this.indices=null,this.activeView=null}clear(){this.indices&&(this.mc.cancel(Array.from(this.indices.values(),t=>t.result)),this.indices=null)}index(t,n){var c,u;if(this.clients!==t){const f=Array.from(t,jM),d=(c=f[0])==null?void 0:c.from;this.enabled=f.every(h=>h&&h.from===d),this.clients=t,this.activeView=null,this.clear()}if(!this.enabled)return!1;n=n||this.selection.active;const{source:r}=n;if(r&&r===((u=this.activeView)==null?void 0:u.source))return!0;if(this.clear(),!r)return!1;const i=this.activeView=OH(n);if(!i)return!1;this.mc.logger().warn("DATA CUBE INDEX CONSTRUCTION");const s=this.selection.remove(r),o=this.indices=new Map,{mc:a,temp:l}=this;for(const f of t){if(s.skip(f,n))continue;const d=jM(f),h=f.query(s.predicate(f)).select({...i.columns,...d.count}).groupby(Object.keys(i.columns)),[p]=h.subqueries;if(p){const w=Object.values(i.columns).map(S=>S.columns[0]);LH(p,w)}const g=h.orderby();h.query.orderby=[];const v=h.toString(),m=`cube_index_${(NH(v)>>>0).toString(16)}`,b=a.exec(jO(m,v,{temp:l}));o.set(f,{table:m,result:b,order:g,...d})}}async update(){const{clients:t,selection:n,activeView:r}=this,i=r.predicate(n.active.predicate);return Promise.all(Array.from(t).map(s=>this.updateClient(s,i)))}async updateClient(t,n){const r=this.indices.get(t);if(!r)return;n||(n=this.activeView.predicate(this.selection.active.predicate));const{table:i,dims:s,aggr:o,order:a=[]}=r,l=Ct.select(s,o).from(i).groupby(s).where(n).orderby(a);return this.mc.updateClient(t,l)}}function OH(e){var l;const{source:t,schema:n}=e;let r=(l=e.predicate)==null?void 0:l.columns;if(!n||!r)return null;const{type:i,scales:s,pixelSize:o=1}=n;let a;if(i==="interval"&&s){const c=s.map(u=>FH(u,o));if(c.some(u=>u==null))return null;c.length===1?(a=u=>u?jr("active0",u.range.map(c[0])):[],r={active0:c[0](e.predicate.field)}):(a=u=>u?fc(u.children.map(({range:f},d)=>jr(`active${d}`,f.map(c[d])))):[],r=Object.fromEntries(e.predicate.children.map((u,f)=>[`active${f}`,c[f](u.field)])))}else if(i==="point")a=YO,r=Object.fromEntries(r.map(c=>[c.toString(),c]));else return null;return{source:t,columns:r,predicate:a}}function FH(e,t){const{type:n,domain:r,range:i}=e;let s,o;switch(n){case"linear":s=YO,o=ke;break;case"log":s=Math.log,o=a=>G`LN(${ke(a)})`;break;case"symlog":s=a=>Math.sign(a)*Math.log1p(Math.abs(a)),o=a=>(a=ke(a),G`SIGN(${a}) * LN(1 + ABS(${a}))`);break;case"sqrt":s=Math.sqrt,o=a=>G`SQRT(${ke(a)})`;break;case"utc":case"time":s=a=>+a,o=a=>a instanceof Date?+a:zO(ke(a));break}return s?BH(r,i,t,s,o):null}function BH(e,t,n,r,i){const s=r(Math.min(e[0],e[1])),o=r(Math.max(e[0],e[1])),a=Math.abs(r(t[1])-r(t[0]))/(o-s)/n,l=n===1?"":`${n}::INTEGER * `;return c=>G`${l}FLOOR(${a}::DOUBLE * (${i(c)} - ${s}::DOUBLE))::INTEGER`}const zM={from:NaN};function jM(e){if(!e.filterIndexable)return zM;const t=e.query(),n=lS(t);if(!n||!t.groupby)return zM;const r=new Set(t.groupby().map(a=>a.column)),i=[],s=[];let o;for(const{as:a,expr:{aggregate:l}}of t.select())switch(l==null?void 0:l.toUpperCase()){case"COUNT":case"SUM":i.push({[a]:G`SUM("${a}")::DOUBLE`});break;case"AVG":o="_count_",i.push({[a]:G`(SUM("${a}" * ${o}) / SUM(${o}))::DOUBLE`});break;case"MAX":i.push({[a]:G`MAX("${a}")`});break;case"MIN":i.push({[a]:G`MIN("${a}")`});break;default:if(r.has(a))s.push(a);else return null}return{aggr:i,dims:s,count:o?{[o]:G`COUNT(*)`}:{},from:n}}function lS(e){const t=e.subqueries;if(e.select){const r=e.from();if(!r.length)return;if(t.length===0)return r[0].from.table}const n=lS(t[0]);for(let r=1;r<t.length;++r){const i=lS(t[r]);if(i!==void 0&&i!==n)return NaN}return n}function LH(e,t){const n=new Set,r=i=>{n.has(i)||(n.add(i),i.select&&i.from().length&&i.select(t),i.subqueries.forEach(r))};r(e)}class RH{constructor(t,n,r=!0){this.mc=t,this.selection=n,this.clients=new Set,this.indexer=r?new DH(this.mc,{...r,selection:n}):null;const{value:i,activate:s}=this.handlers={value:()=>this.update(),activate:o=>{var a;return(a=this.indexer)==null?void 0:a.index(this.clients,o)}};n.addEventListener("value",i),n.addEventListener("activate",s)}finalize(){const{value:t,activate:n}=this.handlers;this.selection.removeEventListener("value",t),this.selection.removeEventListener("activate",n)}reset(){var t;(t=this.indexer)==null||t.reset()}add(t){return(this.clients=new Set(this.clients)).add(t),this}remove(t){return this.clients.has(t)&&(this.clients=new Set(this.clients)).delete(t),this}update(){const{mc:t,indexer:n,clients:r,selection:i}=this;return n!=null&&n.index(r)?n.update():CH(t,r,i)}}function CH(e,t,n){return Promise.all(Array.from(t).map(r=>{const i=n.predicate(r);if(i!=null)return e.updateClient(r,r.query(i))}))}function qO(){let e,t;const n=new Promise((r,i)=>{e=r,t=i});return n.fulfill=r=>(e(r),n),n.reject=r=>(t(r),n),n}function UH(e,t,n){let r=[],i=0;function s(){const o=PH(r,t);r=[],i=0;for(const a of o)jH(a,e,n),qH(a,t)}return{add(o,a){o.request.type==="arrow"?(i=i||requestAnimationFrame(()=>s()),r.push({entry:o,priority:a,index:r.length})):e(o,a)}}}function PH(e,t){const n=[],r=new Map;for(const i of e){const{entry:{request:s}}=i,o=zH(s.query,t);if(!r.has(o)){const a=[];n.push(a),r.set(o,a)}r.get(o).push(i)}return n}function zH(e,t){const n=`${e}`;if(e instanceof Ct&&!t.get(n)){if(e.orderby().length||e.where().length||e.qualify().length||e.having().length)return n;const r=e.clone().$select("*"),i=e.groupby();if(i.length){const s={};e.select().forEach(({as:o,expr:a})=>s[o]=a),r.$groupby(i.map(o=>o instanceof Pa&&s[o.column]||o))}return`${r}`}else return n}function jH(e,t,n){if(VH(e))t({request:{type:"arrow",cache:!1,record:!1,query:YH(e,n)},result:e.result=qO()});else for(const{entry:r,priority:i}of e)t(r,i)}function VH(e){if(e.length>1){const t=`${e[0].entry.request.query}`;for(let n=1;n<e.length;++n)if(t!==`${e[n].entry.request.query}`)return!0}return!1}function YH(e,t){const n=e.maps=[],r=new Map;for(const o of e){const{query:a}=o.entry.request,l=[];n.push(l);for(const{as:c,expr:u}of a.select()){const f=`${u}`;r.has(f)||r.set(f,[`col${r.size}`,u]);const[d]=r.get(f);l.push([d,c])}t(`${a}`)}const i=e[0].entry.request.query.clone(),s=i.groupby();if(s.length){const o={};e.maps[0].forEach(([a,l])=>o[l]=a),i.$groupby(s.map(a=>a instanceof Pa&&o[a.column]||a))}return i.$select(Array.from(r.values()))}async function qH(e,t){const{maps:n,result:r}=e;if(!n)return;let i;try{i=await r}catch(s){for(const{entry:o}of e)o.result.reject(s);return}e.forEach(({entry:s},o)=>{const{request:a,result:l}=s,c=WH(i,n[o]);a.cache&&t.set(String(a.query),c),l.fulfill(c)})}function WH(e,t){if(t){const n={};for(const[r,i]of t)n[i]=e.getChild(r);return new e.constructor(n)}else return e}const HH=typeof requestIdleCallback<"u"?requestIdleCallback:setTimeout,GH=()=>({get:()=>{},set:(e,t)=>t,clear:()=>{}});function XH({max:e=1e3,ttl:t=3*60*60*1e3}={}){let n=new Map;function r(){const i=performance.now()-t;let s=null,o=1/0;for(const[a,l]of n){const{last:c}=l;c<o&&(s=a,o=c),i>c&&n.delete(a)}s&&n.delete(s)}return{get(i){const s=n.get(i);if(s)return s.last=performance.now(),s.value},set(i,s){return n.set(i,{last:performance.now(),value:s}),n.size>e&&HH(r),s},clear(){n=new Map}}}function QH(e){const t=Array.from({length:e},()=>({head:null,tail:null}));return{isEmpty(){return t.every(n=>!n.head)},insert(n,r){const i=t[r];if(!i)throw new Error(`Invalid queue priority rank: ${r}`);const s={item:n,next:null};i.head===null?i.head=i.tail=s:i.tail=i.tail.next=s},remove(n){for(const r of t){let{head:i,tail:s}=r;for(let o=null,a=i;a;o=a,a=a.next)n(a.item)&&(a===i?i=a.next:o.next=a.next,a===s&&(s=o||i));r.head=i,r.tail=s}},next(){for(const n of t){const{head:r}=n;if(r!==null)return n.head=r.next,n.tail===r&&(n.tail=null),r.item}}}}const aa={High:0,Normal:1,Low:2};function KH(){const e=QH(3);let t,n,r,i=[],s=null,o;function a(){if(s||e.isEmpty())return;const{request:f,result:d}=e.next();s=u(f,d),s.finally(()=>{s=null,a()})}function l(f,d=aa.Normal){e.insert(f,d),a()}function c(f){i.length&&f&&i.forEach(d=>d.add(f))}async function u(f,d){try{const{query:h,type:p,cache:g=!1,record:v=!0,options:y}=f,m=h?`${h}`:null;if(v&&c(m),g){const S=n.get(m);if(S){r.debug("Cache"),d.fulfill(S);return}}const b=performance.now(),w=await t.query({type:p,sql:m,...y});g&&n.set(m,w),r.debug(`Request: ${(performance.now()-b).toFixed(1)}`),d.fulfill(w)}catch(h){d.reject(h)}}return{cache(f){return f!==void 0?n=f===!0?XH():f||GH():n},logger(f){return f?r=f:r},connector(f){return f?t=f:t},consolidate(f){f&&!o?o=UH(l,n,c):!f&&o&&(o=null)},request(f,d=aa.Normal){const h=qO(),p={request:f,result:h};return o?o.add(p,d):l(p,d),h},cancel(f){const d=new Set(f);e.remove(({result:h})=>d.has(h))},clear(){e.remove(({result:f})=>(f.reject("Cleared"),!0))},record(){let f=[];const d={add(h){f.push(h)},reset(){f=[]},snapshot(){return f.slice()},stop(){return i=i.filter(h=>h!==d),f}};return i.push(d),d}}}function ZH(){return{debug(){},info(){},log(){},warn(){},error(){}}}let p0;function en(e){return e?p0=e:p0==null&&(p0=new JH),p0}class JH{constructor(t=GW(),n={}){this.catalog=new AH(this),this.manager=n.manager||KH(),this.logger(n.logger||console),this.configure(n),this.databaseConnector(t),this.clear()}logger(t){return arguments.length&&(this._logger=t||ZH(),this.manager.logger(this._logger)),this._logger}configure({cache:t=!0,consolidate:n=!0,indexes:r=!0}){this.manager.cache(t),this.manager.consolidate(n),this.indexes=r}clear({clients:t=!0,cache:n=!0,catalog:r=!1}={}){var i,s;this.manager.clear(),t&&((i=this.clients)==null||i.forEach(o=>this.disconnect(o)),(s=this.filterGroups)==null||s.forEach(o=>o.finalize()),this.clients=new Set,this.filterGroups=new Map),n&&this.manager.cache().clear(),r&&this.catalog.clear()}databaseConnector(t){return this.manager.connector(t)}cancel(t){this.manager.cancel(t)}exec(t,{priority:n=aa.Normal}={}){return this.manager.request({type:"exec",query:t},n)}query(t,{type:n="arrow",cache:r=!0,priority:i=aa.Normal,...s}={}){return this.manager.request({type:n,query:t,cache:r,options:s},i)}prefetch(t,n={}){return this.query(t,{...n,cache:!0,priority:aa.Low})}createBundle(t,n,r=aa.Low){const i={name:t,queries:n};return this.manager.request({type:"create-bundle",options:i},r)}loadBundle(t,n=aa.High){const r={name:t};return this.manager.request({type:"load-bundle",options:r},n)}updateClient(t,n,r=aa.Normal){return t.queryPending(),this.query(n,{priority:r}).then(i=>t.queryResult(i).update(),i=>{t.queryError(i),this._logger.error(i)})}requestQuery(t,n){var r;return(r=this.filterGroups.get(t.filterBy))==null||r.reset(),n?this.updateClient(t,n):t.update()}async connect(t){const{catalog:n,clients:r,filterGroups:i,indexes:s}=this;if(r.has(t))throw new Error("Client already connected.");r.add(t);const o=t.fields();o!=null&&o.length&&t.fieldInfo(await n.queryFields(o));const a=t.filterBy;if(a)if(i.has(a))i.get(a).add(t);else{const l=new RH(this,a,s);i.set(a,l.add(t))}t.requestQuery()}disconnect(t){var i;const{clients:n,filterGroups:r}=this;n.has(t)&&(n.delete(t),(i=r.get(t.filterBy))==null||i.remove(t))}}const VM={};function WO(e,t=!1){let n,r,i=VM;function s(c){n=e(c).then(()=>{if(r){const{value:u}=r;r=null,s(u)}else n=null})}function o(c){r={event:c}}function a(c){n?o(c):s(c)}function l(c){i!==c&&requestAnimationFrame(()=>{const u=i;i=VM,a(u)}),i=c}return t?l:a}class ay{constructor(t){this._filterBy=t,this._requestUpdate=WO(()=>this.requestQuery(),!0)}get filterBy(){return this._filterBy}get filterIndexable(){return!0}fields(){return null}fieldInfo(){return this}query(){return null}queryPending(){return this}queryResult(){return this}queryError(t){return console.error(t),this}requestQuery(t){var r;const n=t||this.query((r=this.filterBy)==null?void 0:r.predicate(this));return en().requestQuery(this,n)}requestUpdate(){this._requestUpdate()}update(){return this}}class tG{constructor(){this._callbacks=new Map}addEventListener(t,n){this._callbacks.has(t)||this._callbacks.set(t,{callbacks:new Set,pending:null,queue:new eG}),this._callbacks.get(t).callbacks.add(n)}removeEventListener(t,n){const r=this._callbacks.get(t);r&&r.callbacks.delete(n)}willEmit(t,n){return n}emitQueueFilter(){return null}cancel(t){const n=this._callbacks.get(t);n==null||n.queue.clear()}emit(t,n){const r=this._callbacks.get(t)||{};if(r.pending)r.queue.enqueue(n,this.emitQueueFilter(t,n));else{const i=this.willEmit(t,n),{callbacks:s,queue:o}=r;if(s!=null&&s.size){const a=Promise.allSettled(Array.from(s,l=>l(i))).then(()=>{r.pending=null,o.isEmpty()||this.emit(t,o.dequeue())});r.pending=a}}}}class eG{constructor(){this.clear()}clear(){this.next=null}isEmpty(){return!this.next}enqueue(t,n){const r={value:t};if(n&&this.next){let i=this;for(;i.next;)n(i.next.value)?i=i.next:i.next=i.next.next;i.next=r}else this.next=r}dequeue(){const{next:t}=this;return this.next=t==null?void 0:t.next,t==null?void 0:t.value}}function HO(e,t){return e===t?!1:e instanceof Date&&t instanceof Date?+e!=+t:Array.isArray(e)&&Array.isArray(t)?nG(e,t):!0}function nG(e,t){if(e.length!==t.length)return!0;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!0;return!1}function Na(e){return e instanceof rr}class rr extends tG{constructor(t){super(),this._value=t}static value(t){return new rr(t)}static array(t){if(t.some(n=>Na(n))){const n=new rr,r=()=>n.update(t.map(i=>Na(i)?i.value:i));return r(),t.forEach(i=>Na(i)?i.addEventListener("value",r):0),n}return new rr(t)}get value(){return this._value}update(t,{force:n}={}){return HO(this._value,t)||n?this.emit("value",t):this.cancel("value"),this}willEmit(t,n){return t==="value"&&(this._value=n),n}}function dc(e){return e instanceof Bs}let Bs=class au extends rr{static intersect({cross:t=!1}={}){return new au(new Md({cross:t}))}static union({cross:t=!1}={}){return new au(new Md({cross:t,union:!0}))}static single({cross:t=!1}={}){return new au(new Md({cross:t,single:!0}))}static crossfilter(){return new au(new Md({cross:!0}))}constructor(t=new Md){super([]),this._resolved=this._value,this._resolver=t}clone(){const t=new au(this._resolver);return t._value=t._resolved=this._value,t}remove(t){const n=this.clone();return n._value=n._resolved=n._resolver.resolve(this._resolved,{source:t}),n._value.active={source:t},n}get active(){return this.clauses.active}get value(){var t;return(t=this.active)==null?void 0:t.value}get clauses(){return super.value}get single(){return this._resolver.single}activate(t){this.emit("activate",t)}update(t){return this._resolved=this._resolver.resolve(this._resolved,t,!0),this._resolved.active=t,super.update(this._resolved)}willEmit(t,n){return t==="value"?(this._value=n,this.value):n}emitQueueFilter(t,n){return t==="value"?this._resolver.queueFilter(n):null}skip(t,n){return this._resolver.skip(t,n)}predicate(t,n=!1){const{clauses:r}=this,i=n?null:r.active;return this._resolver.predicate(r,i,t)}};class Md{constructor({union:t,cross:n,single:r}={}){this.union=!!t,this.cross=!!n,this.single=!!r}resolve(t,n,r=!1){const{source:i,predicate:s}=n,o=t.filter(l=>i!==l.source),a=this.single?[]:o;return this.single&&r&&o.forEach(l=>{var c,u;return(u=(c=l.source)==null?void 0:c.reset)==null?void 0:u.call(c)}),s&&a.push(n),a}skip(t,n){var r;return this.cross&&((r=n==null?void 0:n.clients)==null?void 0:r.has(t))}predicate(t,n,r){const{union:i}=this;if(this.skip(r,n))return;const s=t.filter(o=>!this.skip(r,o)).map(o=>o.predicate);return i&&s.length>1?RO(s):s}queueFilter(t){var n;if(this.cross){const r=(n=t.active)==null?void 0:n.source;return i=>{var s;return((s=i.active)==null?void 0:s.source)!==r}}}}const jw=2,gs=4,ho=4,le=4,la=new Int32Array(2),YM=new Float32Array(la.buffer),qM=new Float64Array(la.buffer),y0=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;var cS;(function(e){e[e.UTF8_BYTES=1]="UTF8_BYTES",e[e.UTF16_STRING=2]="UTF16_STRING"})(cS||(cS={}));let If=class GO{constructor(t){this.bytes_=t,this.position_=0,this.text_decoder_=new TextDecoder}static allocate(t){return new GO(new Uint8Array(t))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(t){this.position_=t}capacity(){return this.bytes_.length}readInt8(t){return this.readUint8(t)<<24>>24}readUint8(t){return this.bytes_[t]}readInt16(t){return this.readUint16(t)<<16>>16}readUint16(t){return this.bytes_[t]|this.bytes_[t+1]<<8}readInt32(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}readUint32(t){return this.readInt32(t)>>>0}readInt64(t){return BigInt.asIntN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readUint64(t){return BigInt.asUintN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readFloat32(t){return la[0]=this.readInt32(t),YM[0]}readFloat64(t){return la[y0?0:1]=this.readInt32(t),la[y0?1:0]=this.readInt32(t+4),qM[0]}writeInt8(t,n){this.bytes_[t]=n}writeUint8(t,n){this.bytes_[t]=n}writeInt16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeUint16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeInt32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeUint32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeInt64(t,n){this.writeInt32(t,Number(BigInt.asIntN(32,n))),this.writeInt32(t+4,Number(BigInt.asIntN(32,n>>BigInt(32))))}writeUint64(t,n){this.writeUint32(t,Number(BigInt.asUintN(32,n))),this.writeUint32(t+4,Number(BigInt.asUintN(32,n>>BigInt(32))))}writeFloat32(t,n){YM[0]=n,this.writeInt32(t,la[0])}writeFloat64(t,n){qM[0]=n,this.writeInt32(t,la[y0?0:1]),this.writeInt32(t+4,la[y0?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+gs+ho)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let t="";for(let n=0;n<ho;n++)t+=String.fromCharCode(this.readInt8(this.position_+gs+n));return t}__offset(t,n){const r=t-this.readInt32(t);return n<this.readInt16(r)?this.readInt16(r+n):0}__union(t,n){return t.bb_pos=n+this.readInt32(n),t.bb=this,t}__string(t,n){t+=this.readInt32(t);const r=this.readInt32(t);t+=gs;const i=this.bytes_.subarray(t,t+r);return n===cS.UTF8_BYTES?i:this.text_decoder_.decode(i)}__union_with_string(t,n){return typeof t=="string"?this.__string(n):this.__union(t,n)}__indirect(t){return t+this.readInt32(t)}__vector(t){return t+this.readInt32(t)+gs}__vector_len(t){return this.readInt32(t+this.readInt32(t))}__has_identifier(t){if(t.length!=ho)throw new Error("FlatBuffers: file identifier must be length "+ho);for(let n=0;n<ho;n++)if(t.charCodeAt(n)!=this.readInt8(this.position()+gs+n))return!1;return!0}createScalarList(t,n){const r=[];for(let i=0;i<n;++i){const s=t(i);s!==null&&r.push(s)}return r}createObjList(t,n){const r=[];for(let i=0;i<n;++i){const s=t(i);s!==null&&r.push(s.unpack())}return r}},XO=class QO{constructor(t){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null,this.text_encoder=new TextEncoder;let n;t?n=t:n=1024,this.bb=If.allocate(n),this.space=n}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(t){this.force_defaults=t}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(t,n){t>this.minalign&&(this.minalign=t);const r=~(this.bb.capacity()-this.space+n)+1&t-1;for(;this.space<r+t+n;){const i=this.bb.capacity();this.bb=QO.growByteBuffer(this.bb),this.space+=this.bb.capacity()-i}this.pad(r)}pad(t){for(let n=0;n<t;n++)this.bb.writeInt8(--this.space,0)}writeInt8(t){this.bb.writeInt8(this.space-=1,t)}writeInt16(t){this.bb.writeInt16(this.space-=2,t)}writeInt32(t){this.bb.writeInt32(this.space-=4,t)}writeInt64(t){this.bb.writeInt64(this.space-=8,t)}writeFloat32(t){this.bb.writeFloat32(this.space-=4,t)}writeFloat64(t){this.bb.writeFloat64(this.space-=8,t)}addInt8(t){this.prep(1,0),this.writeInt8(t)}addInt16(t){this.prep(2,0),this.writeInt16(t)}addInt32(t){this.prep(4,0),this.writeInt32(t)}addInt64(t){this.prep(8,0),this.writeInt64(t)}addFloat32(t){this.prep(4,0),this.writeFloat32(t)}addFloat64(t){this.prep(8,0),this.writeFloat64(t)}addFieldInt8(t,n,r){(this.force_defaults||n!=r)&&(this.addInt8(n),this.slot(t))}addFieldInt16(t,n,r){(this.force_defaults||n!=r)&&(this.addInt16(n),this.slot(t))}addFieldInt32(t,n,r){(this.force_defaults||n!=r)&&(this.addInt32(n),this.slot(t))}addFieldInt64(t,n,r){(this.force_defaults||n!==r)&&(this.addInt64(n),this.slot(t))}addFieldFloat32(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat32(n),this.slot(t))}addFieldFloat64(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat64(n),this.slot(t))}addFieldOffset(t,n,r){(this.force_defaults||n!=r)&&(this.addOffset(n),this.slot(t))}addFieldStruct(t,n,r){n!=r&&(this.nested(n),this.slot(t))}nested(t){if(t!=this.offset())throw new TypeError("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new TypeError("FlatBuffers: object serialization must not be nested.")}slot(t){this.vtable!==null&&(this.vtable[t]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(t){const n=t.capacity();if(n&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const r=n<<1,i=If.allocate(r);return i.setPosition(r-n),i.bytes().set(t.bytes(),r-n),i}addOffset(t){this.prep(gs,0),this.writeInt32(this.offset()-t+gs)}startObject(t){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=t;for(let n=0;n<t;n++)this.vtable[n]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const t=this.offset();let n=this.vtable_in_use-1;for(;n>=0&&this.vtable[n]==0;n--);const r=n+1;for(;n>=0;n--)this.addInt16(this.vtable[n]!=0?t-this.vtable[n]:0);const i=2;this.addInt16(t-this.object_start);const s=(r+i)*jw;this.addInt16(s);let o=0;const a=this.space;t:for(n=0;n<this.vtables.length;n++){const l=this.bb.capacity()-this.vtables[n];if(s==this.bb.readInt16(l)){for(let c=jw;c<s;c+=jw)if(this.bb.readInt16(a+c)!=this.bb.readInt16(l+c))continue t;o=this.vtables[n];break}}return o?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,o-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t}finish(t,n,r){const i=r?le:0;if(n){const s=n;if(this.prep(this.minalign,gs+ho+i),s.length!=ho)throw new TypeError("FlatBuffers: file identifier must be length "+ho);for(let o=ho-1;o>=0;o--)this.writeInt8(s.charCodeAt(o))}this.prep(this.minalign,gs+i),this.addOffset(t),i&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(t,n){this.finish(t,n,!0)}requiredField(t,n){const r=this.bb.capacity()-t,i=r-this.bb.readInt32(r);if(!(n<this.bb.readInt16(i)&&this.bb.readInt16(i+n)!=0))throw new TypeError("FlatBuffers: field "+n+" must be set")}startVector(t,n,r){this.notNested(),this.vector_num_elems=n,this.prep(gs,t*n),this.prep(r,t*n)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(t){if(!t)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(t))return this.string_maps.get(t);const n=this.createString(t);return this.string_maps.set(t,n),n}createString(t){if(t==null)return 0;let n;t instanceof Uint8Array?n=t:n=this.text_encoder.encode(t),this.addInt8(0),this.startVector(1,n.length,1),this.bb.setPosition(this.space-=n.length);for(let r=0,i=this.space,s=this.bb.bytes();r<n.length;r++)s[i++]=n[r];return this.endVector()}createObjectOffset(t){return t===null?0:typeof t=="string"?this.createString(t):t.pack(this)}createObjectOffsetList(t){const n=[];for(let r=0;r<t.length;++r){const i=t[r];if(i!==null)n.push(this.createObjectOffset(i));else throw new TypeError("FlatBuffers: Argument for createObjectOffsetList cannot contain null.")}return n}createStructOffsetList(t,n){return n(this,t.length),this.createObjectOffsetList(t.slice().reverse()),this.endVector()}};function rG(){const e=new Set;let t,n=new Promise(r=>t=r);return{pending(r){e.add(r)},ready(r){return e.delete(r),e.size===0},resolve(){n=new Promise(r=>{t(),t=r})},get promise(){return n}}}function Kb(e,t){const n=new e(t);return en().connect(n),n.element}const iG=e=>e&&typeof e=="object"&&!Array.isArray(e),sG=e=>Kb(oG,e);class oG extends ay{constructor({element:t,filterBy:n,from:r,column:i,label:s=i,format:o=u=>u,options:a,value:l,as:c}={}){var f,d,h,p;super(n),this.from=r,this.column=i,this.selection=c,this.format=o,this.element=t??document.createElement("div"),this.element.setAttribute("class","input"),this.element.value=this;const u=document.createElement("label");u.innerText=s||i,this.element.appendChild(u),this.select=document.createElement("select"),a&&(this.data=a.map(g=>iG(g)?g:{value:g}),this.update()),l=l??((f=this.selection)==null?void 0:f.value)??((h=(d=this.data)==null?void 0:d[0])==null?void 0:h.value),((p=this.selection)==null?void 0:p.value)===void 0&&this.publish(l),this.element.appendChild(this.select),this.selection&&(this.select.addEventListener("input",()=>{this.publish(this.selectedValue()??null)}),dc(this.selection)||this.selection.addEventListener("value",g=>{g!==this.select.value&&this.selectedValue(g)}))}selectedValue(t){var n;if(arguments.length===0){const r=this.select.selectedIndex;return this.data[r].value}else{const r=(n=this.data)==null?void 0:n.findIndex(i=>i.value===t);r>=0?this.select.selectedIndex=r:this.select.value=String(t)}}reset(){this.select.selectedIndex=this.from?0:-1}publish(t){const{selection:n,column:r}=this;dc(n)?n.update({source:this,schema:{type:"point"},value:t,predicate:t?a3(r,oy(t)):null}):Na(n)&&n.update(t)}query(t=[]){const{from:n,column:r}=this;return n?Ct.from(n).select({value:r}).distinct().where(t).orderby(r):null}queryResult(t){return this.data=[{value:"",label:"All"},...t],this}update(){var i;const{data:t,format:n,select:r}=this;r.replaceChildren();for(const{value:s,label:o}of t){const a=document.createElement("option");a.setAttribute("value",s),a.innerText=o??n(s),this.select.appendChild(a)}return this.selection&&this.selectedValue(((i=this.selection)==null?void 0:i.value)??""),this}}const aG={contains:rH,prefix:iH,suffix:sH,regexp:nH};let lG=0;const cG=e=>Kb(uG,e);class uG extends ay{constructor({element:t,filterBy:n,from:r,column:i,label:s,type:o="contains",as:a}={}){if(super(n),this.id="search_"+ ++lG,this.type=o,this.from=r,this.column=i,this.selection=a,this.element=t??document.createElement("div"),this.element.setAttribute("class","input"),this.element.value=this,s){const l=document.createElement("label");l.setAttribute("for",this.id),l.innerText=s,this.element.appendChild(l)}this.searchbox=document.createElement("input"),this.searchbox.setAttribute("id",this.id),this.searchbox.setAttribute("type","text"),this.searchbox.setAttribute("placeholder","Query"),this.element.appendChild(this.searchbox),this.selection&&(this.searchbox.addEventListener("input",()=>{this.publish(this.searchbox.value||null)}),dc(this.selection)||this.selection.addEventListener("value",l=>{l!==this.searchbox.value&&(this.searchbox.value=l)}))}reset(){this.searchbox.value=""}publish(t){const{selection:n,column:r,type:i}=this;dc(n)?n.update({source:this,schema:{type:i},value:t,predicate:t?aG[i](r,oy(t)):null}):Na(n)&&n.update(t)}query(t=[]){const{from:n,column:r}=this;return n?Ct.from(n).select({list:r}).distinct().where(t):null}queryResult(t){return this.data=t,this}update(){const t=document.createElement("datalist"),n=`${this.id}_list`;t.setAttribute("id",n);for(const r of this.data){const i=document.createElement("option");i.setAttribute("value",r.list),t.append(i)}return this.datalist&&this.datalist.remove(),this.element.appendChild(this.datalist=t),this.searchbox.setAttribute("list",n),this}}let fG=0;const uS=e=>Kb(dG,e);class dG extends ay{constructor({element:t,filterBy:n,as:r,min:i,max:s,step:o,from:a,column:l,label:c=l,value:u=r==null?void 0:r.value,width:f}={}){var d;if(super(n),this.id="slider_"+ ++fG,this.from=a,this.column=l||"value",this.selection=r,this.min=i,this.max=s,this.step=o,this.element=t||document.createElement("div"),this.element.setAttribute("class","input"),this.element.value=this,c){const h=document.createElement("label");h.setAttribute("for",this.id),h.innerText=c,this.element.appendChild(h)}this.slider=document.createElement("input"),this.slider.setAttribute("id",this.id),this.slider.setAttribute("type","range"),f!=null&&(this.slider.style.width=`${+f}px`),i!=null&&this.slider.setAttribute("min",i),s!=null&&this.slider.setAttribute("max",s),o!=null&&this.slider.setAttribute("step",o),u!=null&&(this.slider.setAttribute("value",u),((d=this.selection)==null?void 0:d.value)===void 0&&this.publish(u)),this.element.appendChild(this.slider),this.selection&&(this.slider.addEventListener("input",()=>{this.publish(+this.slider.value)}),dc(this.selection)||this.selection.addEventListener("value",h=>{h!==+this.slider.value&&(this.slider.value=h)}))}query(t=[]){const{from:n,column:r}=this;return!n||this.min!=null&&this.max!=null?null:Ct.select({min:cp(r),max:lp(r)}).from(n).where(t)}queryResult(t){const{min:n,max:r}=Array.from(t)[0];return this.min==null&&this.slider.setAttribute("min",n),this.max==null&&this.slider.setAttribute("max",r),this.step==null&&this.slider.setAttribute("step",(r-n)/500),this}publish(t){const{selection:n,column:r}=this;dc(n)?n.update({source:this,schema:{type:"point"},value:t,predicate:a3(r,oy(t))}):Na(this.selection)&&n.update(t)}}function KO(e,t){if(e instanceof Date||(e=new Date(+e)),isNaN(e))return typeof t=="function"?t(e):t;const n=e.getUTCHours(),r=e.getUTCMinutes(),i=e.getUTCSeconds(),s=e.getUTCMilliseconds();return`${hG(e.getUTCFullYear())}-${uo(e.getUTCMonth()+1,2)}-${uo(e.getUTCDate(),2)}${n||r||i||s?`T${uo(n,2)}:${uo(r,2)}${i||s?`:${uo(i,2)}${s?`.${uo(s,3)}`:""}`:""}Z`:""}`}function hG(e){return e<0?`-${uo(-e,6)}`:e>9999?`+${uo(e,6)}`:uo(e,4)}function uo(e,t){return`${e}`.padStart(t,"0")}const pG=/^(?:[-+]\d{2})?\d{4}(?:-\d{2}(?:-\d{2})?)?(?:T\d{2}:\d{2}(?::\d{2}(?:\.\d{3})?)?(?:Z|[-+]\d{2}:?\d{2})?)?$/;function ZO(e,t){return pG.test(e+="")?new Date(e):typeof t=="function"?t(e):t}const JO=c3(e=>{const t=l3(e);return n=>n==null?"":typeof n=="number"?t(n):n instanceof Date?tF(n):`${n}`}),l3=c3(e=>t=>t===0?"0":t.toLocaleString(e));JO();l3();function tF(e){return KO(e,"Invalid Date")}function c3(e){let t=c3,n;return(r="en")=>r===t?n:n=e(t=r)}let yG=-1;const eF=e=>Kb(mG,e);let mG=class extends ay{constructor({element:t,filterBy:n,from:r,columns:i=["*"],align:s={},format:o,width:a,maxWidth:l,height:c=500,rowBatch:u=100}={}){super(n),this.id=`table-${++yG}`,this.from=r,this.columns=i,this.format=o,this.align=s,this.widths=typeof a=="object"?a:{},this.offset=0,this.limit=+u,this.pending=!1,this.sortHeader=null,this.sortColumn=null,this.sortDesc=!1,this.element=t||document.createElement("div"),this.element.setAttribute("id",this.id),this.element.value=this,typeof a=="number"&&(this.element.style.width=`${a}px`),l&&(this.element.style.maxWidth=`${l}px`),this.element.style.maxHeight=`${c}px`,this.element.style.overflow="auto";let f=-1;this.element.addEventListener("scroll",d=>{const{pending:h,loaded:p}=this,{scrollHeight:g,scrollTop:v,clientHeight:y}=d.target,m=v<f;f=v,!(m||h||p)&&g-v<2*y&&(this.pending=!0,this.requestData(this.offset+this.limit))}),this.tbl=document.createElement("table"),this.element.appendChild(this.tbl),this.head=document.createElement("thead"),this.tbl.appendChild(this.head),this.body=document.createElement("tbody"),this.tbl.appendChild(this.body),this.style=document.createElement("style"),this.element.appendChild(this.style)}requestData(t=0){var r;this.offset=t;const n=this.query((r=this.filterBy)==null?void 0:r.predicate(this));this.requestQuery(n),en().prefetch(n.clone().offset(t+this.limit))}fields(){return this.columns.map(t=>o3(this.from,t))}fieldInfo(t){this.schema=t;const n=this.head;n.innerHTML="";const r=document.createElement("tr");for(const{column:i}of t){const s=document.createElement("th");s.addEventListener("click",o=>this.sort(o,i)),s.appendChild(document.createElement("span")),s.appendChild(document.createTextNode(i)),r.appendChild(s)}return n.appendChild(r),this.formats=gG(this.format,t),this.style.innerText=wG(this.id,bG(this.align,t),vG(this.widths,t)),this}query(t=[]){const{from:n,limit:r,offset:i,schema:s,sortColumn:o,sortDesc:a}=this;return Ct.from(n).select(s.map(l=>l.column)).where(t).orderby(o?a?ZW(o):o:[]).limit(r).offset(i)}queryResult(t){return this.pending||(this.loaded=!1,this.body.replaceChildren()),this.data=t,this}update(){const{body:t,formats:n,data:r,schema:i,limit:s}=this,o=i.length;let a=0;for(const l of r){++a;const c=document.createElement("tr");for(let u=0;u<o;++u){const f=l[i[u].column],d=document.createElement("td");d.innerText=f==null?"":n[u](f),c.appendChild(d)}t.appendChild(c)}return a<s&&(this.loaded=!0),this.pending=!1,this}sort(t,n){n===this.sortColumn?this.sortDesc=!this.sortDesc:(this.sortColumn=n,this.sortDesc=!1);const r=t.currentTarget,i=this.sortHeader;i===r&&t.metaKey?(i.firstChild.textContent="",this.sortHeader=null,this.sortColumn=null):(i&&(i.firstChild.textContent=""),this.sortHeader=r,r.firstChild.textContent=this.sortDesc?"":""),this.requestData()}};function gG(e={},t,n){return t.map(({column:r,type:i})=>{if(r in e)return e[r];switch(i){case"number":return l3(n);case"date":return tF;default:return JO(n)}})}function bG(e={},t){return t.map(({column:n,type:r})=>n in e?e[n]:r==="number"?"right":"left")}function vG(e={},t){return t.map(({column:n})=>e[n])}function wG(e,t,n){const r=[];return t.forEach((i,s)=>{const o=+n[s];if(i!=="left"||o){const a=i!=="left"?`text-align:${i};`:"",l=o?`width:${o}px;max-width:${o}px;`:"";r.push(`#${e} tr>:nth-child(${s+1}) {${a}${l}}`)}}),r.join(" ")}const Br=Symbol("Fixed"),hc=Symbol("Transient"),nF=Symbol("Transform"),_G=["rectY-x","rectX-y","rect-x","rect-y"];function SG(e,t){return _G.includes(`${t}-${e}`)}function ka(e,t={steps:25}){const n=(r,i)=>SG(i,r.type)?{[`${i}1`]:Vw(r,e,t),[`${i}2`]:Vw(r,e,{...t,offset:1})}:{[i]:Vw(r,e,t)};return n[nF]=!0,n}function Vw(e,t,n){return{column:t,label:t,get stats(){return["min","max"]},get columns(){return[t]},get basis(){return t},toString(){const{min:r,max:i}=e.stats[t],s=xG(r,i,n),o=ke(t),a=s.min===0?o:`(${o} - ${s.min})`,l=`${(s.max-s.min)/s.steps}::DOUBLE`,c=n.offset?`${n.offset} + `:"";return`${s.min} + ${l} * (${c}FLOOR(${a} / ${l})::INTEGER)`}}}function xG(e,t,n){let{steps:r=25,minstep:i=0,nice:s=!0}=n;if(s!==!1){const o=t-e,a=r,l=Math.LN10,c=Math.ceil(Math.log(a)/l);let u=Math.max(i,Math.pow(10,Math.round(Math.log(o)/l)-c));for(;Math.ceil(o/u)>a;)u*=10;const f=[5,2];let d;for(let g=0,v=f.length;g<v;++g)d=u/f[g],d>=i&&o/d<=a&&(u=d);d=Math.log(u);const h=d>=0?0:~~(-d/l)+1,p=Math.pow(10,-h-1);d=Math.floor(e/u+p)*u,e=e<d?d-u:d,t=Math.ceil(t/u)*u,r=Math.round((t-e)/u)}return{min:e,max:t,steps:r}}function je(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function pc(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Zb(e){let t,n,r;e.length!==2?(t=je,n=(a,l)=>je(e(a),l),r=(a,l)=>e(a)-l):(t=e===je||e===pc?e:IG,n=e,r=e);function i(a,l,c=0,u=a.length){if(c<u){if(t(l,l)!==0)return u;do{const f=c+u>>>1;n(a[f],l)<0?c=f+1:u=f}while(c<u)}return c}function s(a,l,c=0,u=a.length){if(c<u){if(t(l,l)!==0)return u;do{const f=c+u>>>1;n(a[f],l)<=0?c=f+1:u=f}while(c<u)}return c}function o(a,l,c=0,u=a.length){const f=i(a,l,c,u-1);return f>c&&r(a[f-1],l)>-r(a[f],l)?f-1:f}return{left:i,center:o,right:s}}function IG(){return 0}function rF(e){return e===null?NaN:+e}function*TG(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const EG=Zb(je),AG=EG.right;Zb(rF).center;const Jb=AG,iF=sF(oF),MG=sF($G);function sF(e){return function(t,n,r=n){if(!((n=+n)>=0))throw new RangeError("invalid rx");if(!((r=+r)>=0))throw new RangeError("invalid ry");let{data:i,width:s,height:o}=t;if(!((s=Math.floor(s))>=0))throw new RangeError("invalid width");if(!((o=Math.floor(o!==void 0?o:i.length/s))>=0))throw new RangeError("invalid height");if(!s||!o||!n&&!r)return t;const a=n&&e(n),l=r&&e(r),c=i.slice();return a&&l?(Cc(a,c,i,s,o),Cc(a,i,c,s,o),Cc(a,c,i,s,o),Uc(l,i,c,s,o),Uc(l,c,i,s,o),Uc(l,i,c,s,o)):a?(Cc(a,i,c,s,o),Cc(a,c,i,s,o),Cc(a,i,c,s,o)):l&&(Uc(l,i,c,s,o),Uc(l,c,i,s,o),Uc(l,i,c,s,o)),t}}function Cc(e,t,n,r,i){for(let s=0,o=r*i;s<o;)e(t,n,s,s+=r,1)}function Uc(e,t,n,r,i){for(let s=0,o=r*i;s<r;++s)e(t,n,s,s+o,r)}function $G(e){const t=oF(e);return(n,r,i,s,o)=>{i<<=2,s<<=2,o<<=2,t(n,r,i+0,s+0,o),t(n,r,i+1,s+1,o),t(n,r,i+2,s+2,o),t(n,r,i+3,s+3,o)}}function oF(e){const t=Math.floor(e);if(t===e)return NG(e);const n=e-t,r=2*e+1;return(i,s,o,a,l)=>{if(!((a-=l)>=o))return;let c=t*s[o];const u=l*t,f=u+l;for(let d=o,h=o+u;d<h;d+=l)c+=s[Math.min(a,d)];for(let d=o,h=a;d<=h;d+=l)c+=s[Math.min(a,d+u)],i[d]=(c+n*(s[Math.max(o,d-f)]+s[Math.min(a,d+f)]))/r,c-=s[Math.max(o,d-u)]}}function NG(e){const t=2*e+1;return(n,r,i,s,o)=>{if(!((s-=o)>=i))return;let a=e*r[i];const l=o*e;for(let c=i,u=i+l;c<u;c+=o)a+=r[Math.min(s,c)];for(let c=i,u=s;c<=u;c+=o)a+=r[Math.min(s,c+l)],n[c]=a/t,a-=r[Math.max(i,c-l)]}}function tv(e,t){let n=0;if(t===void 0)for(let r of e)r!=null&&(r=+r)>=r&&++n;else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(i=+i)>=i&&++n}return n}function kG(e){return e.length|0}function DG(e){return!(e>0)}function OG(e){return typeof e!="object"||"length"in e?e:Array.from(e)}function FG(e){return t=>e(...t)}function BG(...e){const t=typeof e[e.length-1]=="function"&&FG(e.pop());e=e.map(OG);const n=e.map(kG),r=e.length-1,i=new Array(r+1).fill(0),s=[];if(r<0||n.some(DG))return s;for(;;){s.push(i.map((a,l)=>e[l][a]));let o=r;for(;++i[o]===n[o];){if(o===0)return t?s.map(t):s;i[o--]=0}}}function LG(e,t){var n=0,r=0;return Float64Array.from(e,t===void 0?i=>n+=+i||0:i=>n+=+t(i,r++,e)||0)}function u3(e,t){let n=0,r,i=0,s=0;if(t===void 0)for(let o of e)o!=null&&(o=+o)>=o&&(r=o-i,i+=r/++n,s+=r*(o-i));else{let o=-1;for(let a of e)(a=t(a,++o,e))!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,s+=r*(a-i))}if(n>1)return s/(n-1)}function ly(e,t){const n=u3(e,t);return n&&Math.sqrt(n)}function bn(e,t){let n,r;if(t===void 0)for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(n===void 0?s>=s&&(n=r=s):(n>s&&(n=s),r<s&&(r=s)))}return[n,r]}class $s{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const s=n[i],o=t+s,a=Math.abs(t)<Math.abs(s)?t-(o-s):s-(o-t);a&&(n[r++]=a),t=o}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,s,o=0;if(n>0){for(o=t[--n];n>0&&(r=o,i=t[--n],o=r+i,s=i-(o-r),!s););n>0&&(s<0&&t[n-1]<0||s>0&&t[n-1]>0)&&(i=s*2,r=o+i,i==r-o&&(o=r))}return o}}class yc extends Map{constructor(t,n=cF){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(fS(this,t))}has(t){return super.has(fS(this,t))}set(t,n){return super.set(aF(this,t),n)}delete(t){return super.delete(lF(this,t))}}class cy extends Set{constructor(t,n=cF){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(fS(this,t))}add(t){return super.add(aF(this,t))}delete(t){return super.delete(lF(this,t))}}function fS({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function aF({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function lF({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function cF(e){return e!==null&&typeof e=="object"?e.valueOf():e}function dS(e){return e}function Vo(e,...t){return f3(e,dS,dS,t)}function Ku(e,t,...n){return f3(e,dS,t,n)}function RG(e,t,...n){return f3(e,Array.from,t,n)}function f3(e,t,n,r){return function i(s,o){if(o>=r.length)return n(s);const a=new yc,l=r[o++];let c=-1;for(const u of s){const f=l(u,++c,s),d=a.get(f);d?d.push(u):a.set(f,[u])}for(const[u,f]of a)a.set(u,i(f,o));return t(a)}(e,0)}function CG(e,t){return Array.from(t,n=>e[n])}function up(e,...t){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");e=Array.from(e);let[n]=t;if(n&&n.length!==2||t.length>1){const r=Uint32Array.from(e,(i,s)=>s);return t.length>1?(t=t.map(i=>e.map(i)),r.sort((i,s)=>{for(const o of t){const a=fp(o[i],o[s]);if(a)return a}})):(n=e.map(n),r.sort((i,s)=>fp(n[i],n[s]))),CG(e,r)}return e.sort(d3(n))}function d3(e=je){if(e===je)return fp;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function fp(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}function h3(e,t,n){return(t.length!==2?up(Ku(e,t,n),([r,i],[s,o])=>je(i,o)||je(r,s)):up(Vo(e,n),([r,i],[s,o])=>t(i,o)||je(r,s))).map(([r])=>r)}const UG=Math.sqrt(50),PG=Math.sqrt(10),zG=Math.sqrt(2);function zg(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=UG?10:s>=PG?5:s>=zG?2:1;let a,l,c;return i<0?(c=Math.pow(10,-i)/o,a=Math.round(e*c),l=Math.round(t*c),a/c<e&&++a,l/c>t&&--l,c=-c):(c=Math.pow(10,i)*o,a=Math.round(e/c),l=Math.round(t/c),a*c<e&&++a,l*c>t&&--l),l<a&&.5<=n&&n<2?zg(e,t,n*2):[a,l,c]}function za(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,s,o]=r?zg(t,e,n):zg(e,t,n);if(!(s>=i))return[];const a=s-i+1,l=new Array(a);if(r)if(o<0)for(let c=0;c<a;++c)l[c]=(s-c)/-o;else for(let c=0;c<a;++c)l[c]=(s-c)*o;else if(o<0)for(let c=0;c<a;++c)l[c]=(i+c)/-o;else for(let c=0;c<a;++c)l[c]=(i+c)*o;return l}function dp(e,t,n){return t=+t,e=+e,n=+n,zg(e,t,n)[2]}function hS(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?dp(t,e,n):dp(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function uF(e,t,n){let r;for(;;){const i=dp(e,t,n);if(i===r||i===0||!isFinite(i))return[e,t];i>0?(e=Math.floor(e/i)*i,t=Math.ceil(t/i)*i):i<0&&(e=Math.ceil(e*i)/i,t=Math.floor(t*i)/i),r=i}}function p3(e){return Math.max(1,Math.ceil(Math.log(tv(e))/Math.LN2)+1)}function De(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function jG(e,t){let n,r=-1,i=-1;if(t===void 0)for(const s of e)++i,s!=null&&(n<s||n===void 0&&s>=s)&&(n=s,r=i);else for(let s of e)(s=t(s,++i,e))!=null&&(n<s||n===void 0&&s>=s)&&(n=s,r=i);return r}function xn(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function VG(e,t){let n,r=-1,i=-1;if(t===void 0)for(const s of e)++i,s!=null&&(n>s||n===void 0&&s>=s)&&(n=s,r=i);else for(let s of e)(s=t(s,++i,e))!=null&&(n>s||n===void 0&&s>=s)&&(n=s,r=i);return r}function fF(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?fp:d3(i);r>n;){if(r-n>600){const l=r-n+1,c=t-n+1,u=Math.log(l),f=.5*Math.exp(2*u/3),d=.5*Math.sqrt(u*f*(l-f)/l)*(c-l/2<0?-1:1),h=Math.max(n,Math.floor(t-c*f/l+d)),p=Math.min(r,Math.floor(t+(l-c)*f/l+d));fF(e,t,h,p,i)}const s=e[t];let o=n,a=r;for($d(e,n,t),i(e[r],s)>0&&$d(e,n,r);o<a;){for($d(e,o,a),++o,--a;i(e[o],s)<0;)++o;for(;i(e[a],s)>0;)--a}i(e[n],s)===0?$d(e,n,a):(++a,$d(e,a,r)),a<=t&&(n=a+1),t<=a&&(r=a-1)}return e}function $d(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function y3(e,t=je){let n,r=!1;if(t.length===1){let i;for(const s of e){const o=t(s);(r?je(o,i)>0:je(o,o)===0)&&(n=s,i=o,r=!0)}}else for(const i of e)(r?t(i,n)>0:t(i,i)===0)&&(n=i,r=!0);return n}function ja(e,t,n){if(e=Float64Array.from(TG(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return xn(e);if(t>=1)return De(e);var r,i=(r-1)*t,s=Math.floor(i),o=De(fF(e,s).subarray(0,s+1)),a=xn(e.subarray(s+1));return o+(a-o)*(i-s)}}function YG(e,t,n=rF){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,s=Math.floor(i),o=+n(e[s],s,e),a=+n(e[s+1],s+1,e);return o+(a-o)*(i-s)}}function qG(e,t,n){const r=tv(e),i=ja(e,.75)-ja(e,.25);return r&&i?Math.ceil((n-t)/(2*i*Math.pow(r,-1/3))):1}function dF(e,t,n){const r=tv(e),i=ly(e);return r&&i?Math.ceil((n-t)*Math.cbrt(r)/(3.49*i)):1}function ev(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(s=+s)>=s&&(++n,r+=s)}if(n)return r/n}function hp(e,t){return ja(e,.5,t)}function*WG(e){for(const t of e)yield*t}function hF(e){return Array.from(WG(e))}function pF(e,t){const n=new yc;if(t===void 0)for(let s of e)s!=null&&s>=s&&n.set(s,(n.get(s)||0)+1);else{let s=-1;for(let o of e)(o=t(o,++s,e))!=null&&o>=o&&n.set(o,(n.get(o)||0)+1)}let r,i=0;for(const[s,o]of n)o>i&&(i=o,r=s);return r}function HG(e,t=GG){const n=[];let r,i=!1;for(const s of e)i&&n.push(t(r,s)),r=s,i=!0;return n}function GG(e,t){return[e,t]}function Lr(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function yF(e,t=je){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");let n=Array.from(e);const r=new Float64Array(n.length);t.length!==2&&(n=n.map(t),t=je);const i=(a,l)=>t(n[a],n[l]);let s,o;return e=Uint32Array.from(n,(a,l)=>l),e.sort(t===je?(a,l)=>fp(n[a],n[l]):d3(i)),e.forEach((a,l)=>{const c=i(a,s===void 0?a:s);c>=0?((s===void 0||c>0)&&(s=a,o=l),r[a]=o):r[a]=NaN}),r}function XG(e,t=je){let n,r=!1;if(t.length===1){let i;for(const s of e){const o=t(s);(r?je(o,i)<0:je(o,o)===0)&&(n=s,i=o,r=!0)}}else for(const i of e)(r?t(i,n)<0:t(i,i)===0)&&(n=i,r=!0);return n}function Ls(e,t){let n=0;if(t===void 0)for(let r of e)(r=+r)&&(n+=r);else{let r=-1;for(let i of e)(i=+t(i,++r,e))&&(n+=i)}return n}function jg(e){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");return Array.from(e).reverse()}function QG(e){return e}var Yw=1,qw=2,pS=3,m0=4,WM=1e-6;function KG(e){return"translate("+e+",0)"}function ZG(e){return"translate(0,"+e+")"}function JG(e){return t=>+e(t)}function tX(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),n=>+e(n)+t}function eX(){return!this.__axis}function nX(e,t){var n=[],r=null,i=null,s=6,o=6,a=3,l=typeof window<"u"&&window.devicePixelRatio>1?0:.5,c=e===Yw||e===m0?-1:1,u=e===m0||e===qw?"x":"y",f=e===Yw||e===pS?KG:ZG;function d(h){var p=r??(t.ticks?t.ticks.apply(t,n):t.domain()),g=i??(t.tickFormat?t.tickFormat.apply(t,n):QG),v=Math.max(s,0)+a,y=t.range(),m=+y[0]+l,b=+y[y.length-1]+l,w=(t.bandwidth?tX:JG)(t.copy(),l),S=h.selection?h.selection():h,_=S.selectAll(".domain").data([null]),x=S.selectAll(".tick").data(p,t).order(),E=x.exit(),k=x.enter().append("g").attr("class","tick"),I=x.select("line"),A=x.select("text");_=_.merge(_.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),x=x.merge(k),I=I.merge(k.append("line").attr("stroke","currentColor").attr(u+"2",c*s)),A=A.merge(k.append("text").attr("fill","currentColor").attr(u,c*v).attr("dy",e===Yw?"0em":e===pS?"0.71em":"0.32em")),h!==S&&(_=_.transition(h),x=x.transition(h),I=I.transition(h),A=A.transition(h),E=E.transition(h).attr("opacity",WM).attr("transform",function(D){return isFinite(D=w(D))?f(D+l):this.getAttribute("transform")}),k.attr("opacity",WM).attr("transform",function(D){var L=this.parentNode.__axis;return f((L&&isFinite(L=L(D))?L:w(D))+l)})),E.remove(),_.attr("d",e===m0||e===qw?o?"M"+c*o+","+m+"H"+l+"V"+b+"H"+c*o:"M"+l+","+m+"V"+b:o?"M"+m+","+c*o+"V"+l+"H"+b+"V"+c*o:"M"+m+","+l+"H"+b),x.attr("opacity",1).attr("transform",function(D){return f(w(D)+l)}),I.attr(u+"2",c*s),A.attr(u,c*v).text(g),S.filter(eX).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===qw?"start":e===m0?"end":"middle"),S.each(function(){this.__axis=w})}return d.scale=function(h){return arguments.length?(t=h,d):t},d.ticks=function(){return n=Array.from(arguments),d},d.tickArguments=function(h){return arguments.length?(n=h==null?[]:Array.from(h),d):n.slice()},d.tickValues=function(h){return arguments.length?(r=h==null?null:Array.from(h),d):r&&r.slice()},d.tickFormat=function(h){return arguments.length?(i=h,d):i},d.tickSize=function(h){return arguments.length?(s=o=+h,d):s},d.tickSizeInner=function(h){return arguments.length?(s=+h,d):s},d.tickSizeOuter=function(h){return arguments.length?(o=+h,d):o},d.tickPadding=function(h){return arguments.length?(a=+h,d):a},d.offset=function(h){return arguments.length?(l=+h,d):l},d}function rX(e){return nX(pS,e)}var iX={value:()=>{}};function nv(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new gm(n)}function gm(e){this._=e}function sX(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}gm.prototype=nv.prototype={constructor:gm,on:function(e,t){var n=this._,r=sX(e+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(e=r[s]).type)&&(i=oX(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(i=(e=r[s]).type)n[i]=HM(n[i],e.name,t);else if(t==null)for(i in n)n[i]=HM(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new gm(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function oX(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function HM(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=iX,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var yS="http://www.w3.org/1999/xhtml";const mc={svg:"http://www.w3.org/2000/svg",xhtml:yS,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function rv(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),mc.hasOwnProperty(t)?{space:mc[t],local:e}:e}function aX(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===yS&&t.documentElement.namespaceURI===yS?t.createElement(e):t.createElementNS(n,e)}}function lX(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function iv(e){var t=rv(e);return(t.local?lX:aX)(t)}function cX(){}function m3(e){return e==null?cX:function(){return this.querySelector(e)}}function uX(e){typeof e!="function"&&(e=m3(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=new Array(o),l,c,u=0;u<o;++u)(l=s[u])&&(c=e.call(l,l.__data__,u,s))&&("__data__"in l&&(c.__data__=l.__data__),a[u]=c);return new Vr(r,this._parents)}function fX(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function dX(){return[]}function mF(e){return e==null?dX:function(){return this.querySelectorAll(e)}}function hX(e){return function(){return fX(e.apply(this,arguments))}}function pX(e){typeof e=="function"?e=hX(e):e=mF(e);for(var t=this._groups,n=t.length,r=[],i=[],s=0;s<n;++s)for(var o=t[s],a=o.length,l,c=0;c<a;++c)(l=o[c])&&(r.push(e.call(l,l.__data__,c,o)),i.push(l));return new Vr(r,i)}function gF(e){return function(){return this.matches(e)}}function bF(e){return function(t){return t.matches(e)}}var yX=Array.prototype.find;function mX(e){return function(){return yX.call(this.children,e)}}function gX(){return this.firstElementChild}function bX(e){return this.select(e==null?gX:mX(typeof e=="function"?e:bF(e)))}var vX=Array.prototype.filter;function wX(){return Array.from(this.children)}function _X(e){return function(){return vX.call(this.children,e)}}function SX(e){return this.selectAll(e==null?wX:_X(typeof e=="function"?e:bF(e)))}function xX(e){typeof e!="function"&&(e=gF(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],l,c=0;c<o;++c)(l=s[c])&&e.call(l,l.__data__,c,s)&&a.push(l);return new Vr(r,this._parents)}function vF(e){return new Array(e.length)}function IX(){return new Vr(this._enter||this._groups.map(vF),this._parents)}function Vg(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Vg.prototype={constructor:Vg,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function TX(e){return function(){return e}}function EX(e,t,n,r,i,s){for(var o=0,a,l=t.length,c=s.length;o<c;++o)(a=t[o])?(a.__data__=s[o],r[o]=a):n[o]=new Vg(e,s[o]);for(;o<l;++o)(a=t[o])&&(i[o]=a)}function AX(e,t,n,r,i,s,o){var a,l,c=new Map,u=t.length,f=s.length,d=new Array(u),h;for(a=0;a<u;++a)(l=t[a])&&(d[a]=h=o.call(l,l.__data__,a,t)+"",c.has(h)?i[a]=l:c.set(h,l));for(a=0;a<f;++a)h=o.call(e,s[a],a,s)+"",(l=c.get(h))?(r[a]=l,l.__data__=s[a],c.delete(h)):n[a]=new Vg(e,s[a]);for(a=0;a<u;++a)(l=t[a])&&c.get(d[a])===l&&(i[a]=l)}function MX(e){return e.__data__}function $X(e,t){if(!arguments.length)return Array.from(this,MX);var n=t?AX:EX,r=this._parents,i=this._groups;typeof e!="function"&&(e=TX(e));for(var s=i.length,o=new Array(s),a=new Array(s),l=new Array(s),c=0;c<s;++c){var u=r[c],f=i[c],d=f.length,h=NX(e.call(u,u&&u.__data__,c,r)),p=h.length,g=a[c]=new Array(p),v=o[c]=new Array(p),y=l[c]=new Array(d);n(u,f,g,v,y,h,t);for(var m=0,b=0,w,S;m<p;++m)if(w=g[m]){for(m>=b&&(b=m+1);!(S=v[b])&&++b<p;);w._next=S||null}}return o=new Vr(o,r),o._enter=a,o._exit=l,o}function NX(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function kX(){return new Vr(this._exit||this._groups.map(vF),this._parents)}function DX(e,t,n){var r=this.enter(),i=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function OX(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,s=r.length,o=Math.min(i,s),a=new Array(i),l=0;l<o;++l)for(var c=n[l],u=r[l],f=c.length,d=a[l]=new Array(f),h,p=0;p<f;++p)(h=c[p]||u[p])&&(d[p]=h);for(;l<i;++l)a[l]=n[l];return new Vr(a,this._parents)}function FX(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function BX(e){e||(e=LX);function t(f,d){return f&&d?e(f.__data__,d.__data__):!f-!d}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],a=o.length,l=i[s]=new Array(a),c,u=0;u<a;++u)(c=o[u])&&(l[u]=c);l.sort(t)}return new Vr(i,this._parents).order()}function LX(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function RX(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function CX(){return Array.from(this)}function UX(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function PX(){let e=0;for(const t of this)++e;return e}function zX(){return!this.node()}function jX(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],s=0,o=i.length,a;s<o;++s)(a=i[s])&&e.call(a,a.__data__,s,i);return this}function VX(e){return function(){this.removeAttribute(e)}}function YX(e){return function(){this.removeAttributeNS(e.space,e.local)}}function qX(e,t){return function(){this.setAttribute(e,t)}}function WX(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function HX(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function GX(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function XX(e,t){var n=rv(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?YX:VX:typeof t=="function"?n.local?GX:HX:n.local?WX:qX)(n,t))}function wF(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function QX(e){return function(){this.style.removeProperty(e)}}function KX(e,t,n){return function(){this.style.setProperty(e,t,n)}}function ZX(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function JX(e,t,n){return arguments.length>1?this.each((t==null?QX:typeof t=="function"?ZX:KX)(e,t,n??"")):Tf(this.node(),e)}function Tf(e,t){return e.style.getPropertyValue(t)||wF(e).getComputedStyle(e,null).getPropertyValue(t)}function tQ(e){return function(){delete this[e]}}function eQ(e,t){return function(){this[e]=t}}function nQ(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function rQ(e,t){return arguments.length>1?this.each((t==null?tQ:typeof t=="function"?nQ:eQ)(e,t)):this.node()[e]}function _F(e){return e.trim().split(/^|\s+/)}function g3(e){return e.classList||new SF(e)}function SF(e){this._node=e,this._names=_F(e.getAttribute("class")||"")}SF.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function xF(e,t){for(var n=g3(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function IF(e,t){for(var n=g3(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function iQ(e){return function(){xF(this,e)}}function sQ(e){return function(){IF(this,e)}}function oQ(e,t){return function(){(t.apply(this,arguments)?xF:IF)(this,e)}}function aQ(e,t){var n=_F(e+"");if(arguments.length<2){for(var r=g3(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?oQ:t?iQ:sQ)(n,t))}function lQ(){this.textContent=""}function cQ(e){return function(){this.textContent=e}}function uQ(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function fQ(e){return arguments.length?this.each(e==null?lQ:(typeof e=="function"?uQ:cQ)(e)):this.node().textContent}function dQ(){this.innerHTML=""}function hQ(e){return function(){this.innerHTML=e}}function pQ(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function yQ(e){return arguments.length?this.each(e==null?dQ:(typeof e=="function"?pQ:hQ)(e)):this.node().innerHTML}function mQ(){this.nextSibling&&this.parentNode.appendChild(this)}function gQ(){return this.each(mQ)}function bQ(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function vQ(){return this.each(bQ)}function wQ(e){var t=typeof e=="function"?e:iv(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function _Q(){return null}function SQ(e,t){var n=typeof e=="function"?e:iv(e),r=t==null?_Q:typeof t=="function"?t:m3(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function xQ(){var e=this.parentNode;e&&e.removeChild(this)}function IQ(){return this.each(xQ)}function TQ(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function EQ(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function AQ(e){return this.select(e?EQ:TQ)}function MQ(e){return arguments.length?this.property("__data__",e):this.node().__data__}function $Q(e){return function(t){e.call(this,t,this.__data__)}}function NQ(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function kQ(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,s;n<i;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function DQ(e,t,n){return function(){var r=this.__on,i,s=$Q(t);if(r){for(var o=0,a=r.length;o<a;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=t;return}}this.addEventListener(e.type,s,n),i={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(i):this.__on=[i]}}function OQ(e,t,n){var r=NQ(e+""),i,s=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,c=a.length,u;l<c;++l)for(i=0,u=a[l];i<s;++i)if((o=r[i]).type===u.type&&o.name===u.name)return u.value}return}for(a=t?DQ:kQ,i=0;i<s;++i)this.each(a(r[i],t,n));return this}function TF(e,t,n){var r=wF(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function FQ(e,t){return function(){return TF(this,e,t)}}function BQ(e,t){return function(){return TF(this,e,t.apply(this,arguments))}}function LQ(e,t){return this.each((typeof t=="function"?BQ:FQ)(e,t))}function*RQ(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var EF=[null];function Vr(e,t){this._groups=e,this._parents=t}function uy(){return new Vr([[document.documentElement]],EF)}function CQ(){return this}Vr.prototype=uy.prototype={constructor:Vr,select:uX,selectAll:pX,selectChild:bX,selectChildren:SX,filter:xX,data:$X,enter:IX,exit:kX,join:DX,merge:OX,selection:CQ,order:FX,sort:BX,call:RX,nodes:CX,node:UX,size:PX,empty:zX,each:jX,attr:XX,style:JX,property:rQ,classed:aQ,text:fQ,html:yQ,raise:gQ,lower:vQ,append:wQ,insert:SQ,remove:IQ,clone:AQ,datum:MQ,on:OQ,dispatch:LQ,[Symbol.iterator]:RQ};function be(e){return typeof e=="string"?new Vr([[document.querySelector(e)]],[document.documentElement]):new Vr([[e]],EF)}function UQ(e){let t;for(;t=e.sourceEvent;)e=t;return e}function ki(e,t){if(e=UQ(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const mS={capture:!0,passive:!1};function gS(e){e.preventDefault(),e.stopImmediatePropagation()}function AF(e){var t=e.document.documentElement,n=be(e).on("dragstart.drag",gS,mS);"onselectstart"in t?n.on("selectstart.drag",gS,mS):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function MF(e,t){var n=e.document.documentElement,r=be(e).on("dragstart.drag",null);t&&(r.on("click.drag",gS,mS),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function ed(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function fy(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function al(){}var gc=.7,Ef=1/gc,Zu="\\s*([+-]?\\d+)\\s*",pp="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ns="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",PQ=/^#([0-9a-f]{3,8})$/,zQ=new RegExp(`^rgb\\(${Zu},${Zu},${Zu}\\)$`),jQ=new RegExp(`^rgb\\(${Ns},${Ns},${Ns}\\)$`),VQ=new RegExp(`^rgba\\(${Zu},${Zu},${Zu},${pp}\\)$`),YQ=new RegExp(`^rgba\\(${Ns},${Ns},${Ns},${pp}\\)$`),qQ=new RegExp(`^hsl\\(${pp},${Ns},${Ns}\\)$`),WQ=new RegExp(`^hsla\\(${pp},${Ns},${Ns},${pp}\\)$`),GM={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ed(al,Va,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:XM,formatHex:XM,formatHex8:HQ,formatHsl:GQ,formatRgb:QM,toString:QM});function XM(){return this.rgb().formatHex()}function HQ(){return this.rgb().formatHex8()}function GQ(){return $F(this).formatHsl()}function QM(){return this.rgb().formatRgb()}function Va(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=PQ.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?KM(t):n===3?new vn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?g0(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?g0(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=zQ.exec(e))?new vn(t[1],t[2],t[3],1):(t=jQ.exec(e))?new vn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=VQ.exec(e))?g0(t[1],t[2],t[3],t[4]):(t=YQ.exec(e))?g0(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=qQ.exec(e))?t6(t[1],t[2]/100,t[3]/100,1):(t=WQ.exec(e))?t6(t[1],t[2]/100,t[3]/100,t[4]):GM.hasOwnProperty(e)?KM(GM[e]):e==="transparent"?new vn(NaN,NaN,NaN,0):null}function KM(e){return new vn(e>>16&255,e>>8&255,e&255,1)}function g0(e,t,n,r){return r<=0&&(e=t=n=NaN),new vn(e,t,n,r)}function b3(e){return e instanceof al||(e=Va(e)),e?(e=e.rgb(),new vn(e.r,e.g,e.b,e.opacity)):new vn}function wi(e,t,n,r){return arguments.length===1?b3(e):new vn(e,t,n,r??1)}function vn(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}ed(vn,wi,fy(al,{brighter(e){return e=e==null?Ef:Math.pow(Ef,e),new vn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?gc:Math.pow(gc,e),new vn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new vn(Jl(this.r),Jl(this.g),Jl(this.b),Yg(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ZM,formatHex:ZM,formatHex8:XQ,formatRgb:JM,toString:JM}));function ZM(){return`#${jl(this.r)}${jl(this.g)}${jl(this.b)}`}function XQ(){return`#${jl(this.r)}${jl(this.g)}${jl(this.b)}${jl((isNaN(this.opacity)?1:this.opacity)*255)}`}function JM(){const e=Yg(this.opacity);return`${e===1?"rgb(":"rgba("}${Jl(this.r)}, ${Jl(this.g)}, ${Jl(this.b)}${e===1?")":`, ${e})`}`}function Yg(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Jl(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function jl(e){return e=Jl(e),(e<16?"0":"")+e.toString(16)}function t6(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Bi(e,t,n,r)}function $F(e){if(e instanceof Bi)return new Bi(e.h,e.s,e.l,e.opacity);if(e instanceof al||(e=Va(e)),!e)return new Bi;if(e instanceof Bi)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),o=NaN,a=s-i,l=(s+i)/2;return a?(t===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-t)/a+2:o=(t-n)/a+4,a/=l<.5?s+i:2-s-i,o*=60):a=l>0&&l<1?0:o,new Bi(o,a,l,e.opacity)}function bS(e,t,n,r){return arguments.length===1?$F(e):new Bi(e,t,n,r??1)}function Bi(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}ed(Bi,bS,fy(al,{brighter(e){return e=e==null?Ef:Math.pow(Ef,e),new Bi(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?gc:Math.pow(gc,e),new Bi(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new vn(Ww(e>=240?e-240:e+120,i,r),Ww(e,i,r),Ww(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Bi(e6(this.h),b0(this.s),b0(this.l),Yg(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Yg(this.opacity);return`${e===1?"hsl(":"hsla("}${e6(this.h)}, ${b0(this.s)*100}%, ${b0(this.l)*100}%${e===1?")":`, ${e})`}`}}));function e6(e){return e=(e||0)%360,e<0?e+360:e}function b0(e){return Math.max(0,Math.min(1,e||0))}function Ww(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const NF=Math.PI/180,kF=180/Math.PI,qg=18,DF=.96422,OF=1,FF=.82521,BF=4/29,Ju=6/29,LF=3*Ju*Ju,QQ=Ju*Ju*Ju;function RF(e){if(e instanceof ks)return new ks(e.l,e.a,e.b,e.opacity);if(e instanceof bo)return CF(e);e instanceof vn||(e=b3(e));var t=Qw(e.r),n=Qw(e.g),r=Qw(e.b),i=Hw((.2225045*t+.7168786*n+.0606169*r)/OF),s,o;return t===n&&n===r?s=o=i:(s=Hw((.4360747*t+.3850649*n+.1430804*r)/DF),o=Hw((.0139322*t+.0971045*n+.7141733*r)/FF)),new ks(116*i-16,500*(s-i),200*(i-o),e.opacity)}function vS(e,t,n,r){return arguments.length===1?RF(e):new ks(e,t,n,r??1)}function ks(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}ed(ks,vS,fy(al,{brighter(e){return new ks(this.l+qg*(e??1),this.a,this.b,this.opacity)},darker(e){return new ks(this.l-qg*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=DF*Gw(t),e=OF*Gw(e),n=FF*Gw(n),new vn(Xw(3.1338561*t-1.6168667*e-.4906146*n),Xw(-.9787684*t+1.9161415*e+.033454*n),Xw(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function Hw(e){return e>QQ?Math.pow(e,1/3):e/LF+BF}function Gw(e){return e>Ju?e*e*e:LF*(e-BF)}function Xw(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function Qw(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function KQ(e){if(e instanceof bo)return new bo(e.h,e.c,e.l,e.opacity);if(e instanceof ks||(e=RF(e)),e.a===0&&e.b===0)return new bo(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*kF;return new bo(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function wS(e,t,n,r){return arguments.length===1?KQ(e):new bo(e,t,n,r??1)}function bo(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function CF(e){if(isNaN(e.h))return new ks(e.l,0,0,e.opacity);var t=e.h*NF;return new ks(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}ed(bo,wS,fy(al,{brighter(e){return new bo(this.h,this.c,this.l+qg*(e??1),this.opacity)},darker(e){return new bo(this.h,this.c,this.l-qg*(e??1),this.opacity)},rgb(){return CF(this).rgb()}}));var UF=-.14861,v3=1.78277,w3=-.29227,sv=-.90649,yp=1.97294,n6=yp*sv,r6=yp*v3,i6=v3*w3-sv*UF;function ZQ(e){if(e instanceof tc)return new tc(e.h,e.s,e.l,e.opacity);e instanceof vn||(e=b3(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(i6*r+n6*t-r6*n)/(i6+n6-r6),s=r-i,o=(yp*(n-i)-w3*s)/sv,a=Math.sqrt(o*o+s*s)/(yp*i*(1-i)),l=a?Math.atan2(o,s)*kF-120:NaN;return new tc(l<0?l+360:l,a,i,e.opacity)}function Rs(e,t,n,r){return arguments.length===1?ZQ(e):new tc(e,t,n,r??1)}function tc(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}ed(tc,Rs,fy(al,{brighter(e){return e=e==null?Ef:Math.pow(Ef,e),new tc(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?gc:Math.pow(gc,e),new tc(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*NF,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new vn(255*(t+n*(UF*r+v3*i)),255*(t+n*(w3*r+sv*i)),255*(t+n*(yp*r)),this.opacity)}}));function JQ(e,t,n,r,i){var s=e*e,o=s*e;return((1-3*e+3*s-o)*t+(4-6*s+3*o)*n+(1+3*e+3*s-3*o)*r+o*i)/6}function tK(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],s=e[r+1],o=r>0?e[r-1]:2*i-s,a=r<t-1?e[r+2]:2*s-i;return JQ((n-r/t)*t,o,i,s,a)}}const ov=e=>()=>e;function PF(e,t){return function(n){return e+n*t}}function eK(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function _3(e,t){var n=t-e;return n?PF(e,n>180||n<-180?n-360*Math.round(n/360):n):ov(isNaN(e)?t:e)}function nK(e){return(e=+e)==1?jn:function(t,n){return n-t?eK(t,n,e):ov(isNaN(t)?n:t)}}function jn(e,t){var n=t-e;return n?PF(e,n):ov(isNaN(e)?t:e)}const bc=function e(t){var n=nK(t);function r(i,s){var o=n((i=wi(i)).r,(s=wi(s)).r),a=n(i.g,s.g),l=n(i.b,s.b),c=jn(i.opacity,s.opacity);return function(u){return i.r=o(u),i.g=a(u),i.b=l(u),i.opacity=c(u),i+""}}return r.gamma=e,r}(1);function rK(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),s=new Array(n),o,a;for(o=0;o<n;++o)a=wi(t[o]),r[o]=a.r||0,i[o]=a.g||0,s[o]=a.b||0;return r=e(r),i=e(i),s=e(s),a.opacity=1,function(l){return a.r=r(l),a.g=i(l),a.b=s(l),a+""}}}var iK=rK(tK);function sK(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function oK(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function aK(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=nd(e[o],t[o]);for(;o<n;++o)s[o]=t[o];return function(a){for(o=0;o<r;++o)s[o]=i[o](a);return s}}function lK(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Un(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function cK(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=nd(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var _S=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Kw=new RegExp(_S.source,"g");function uK(e){return function(){return e}}function fK(e){return function(t){return e(t)+""}}function zF(e,t){var n=_S.lastIndex=Kw.lastIndex=0,r,i,s,o=-1,a=[],l=[];for(e=e+"",t=t+"";(r=_S.exec(e))&&(i=Kw.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,l.push({i:o,x:Un(r,i)})),n=Kw.lastIndex;return n<t.length&&(s=t.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?l[0]?fK(l[0].x):uK(t):(t=l.length,function(c){for(var u=0,f;u<t;++u)a[(f=l[u]).i]=f.x(c);return a.join("")})}function nd(e,t){var n=typeof t,r;return t==null||n==="boolean"?ov(t):(n==="number"?Un:n==="string"?(r=Va(t))?(t=r,bc):zF:t instanceof Va?bc:t instanceof Date?lK:oK(t)?sK:Array.isArray(t)?aK:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?cK:Un)(e,t)}function S3(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var s6=180/Math.PI,SS={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function jF(e,t,n,r,i,s){var o,a,l;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,l/=a),e*r<t*n&&(e=-e,t=-t,l=-l,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*s6,skewX:Math.atan(l)*s6,scaleX:o,scaleY:a}}var v0;function dK(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?SS:jF(t.a,t.b,t.c,t.d,t.e,t.f)}function hK(e){return e==null||(v0||(v0=document.createElementNS("http://www.w3.org/2000/svg","g")),v0.setAttribute("transform",e),!(e=v0.transform.baseVal.consolidate()))?SS:(e=e.matrix,jF(e.a,e.b,e.c,e.d,e.e,e.f))}function VF(e,t,n,r){function i(c){return c.length?c.pop()+" ":""}function s(c,u,f,d,h,p){if(c!==f||u!==d){var g=h.push("translate(",null,t,null,n);p.push({i:g-4,x:Un(c,f)},{i:g-2,x:Un(u,d)})}else(f||d)&&h.push("translate("+f+t+d+n)}function o(c,u,f,d){c!==u?(c-u>180?u+=360:u-c>180&&(c+=360),d.push({i:f.push(i(f)+"rotate(",null,r)-2,x:Un(c,u)})):u&&f.push(i(f)+"rotate("+u+r)}function a(c,u,f,d){c!==u?d.push({i:f.push(i(f)+"skewX(",null,r)-2,x:Un(c,u)}):u&&f.push(i(f)+"skewX("+u+r)}function l(c,u,f,d,h,p){if(c!==f||u!==d){var g=h.push(i(h)+"scale(",null,",",null,")");p.push({i:g-4,x:Un(c,f)},{i:g-2,x:Un(u,d)})}else(f!==1||d!==1)&&h.push(i(h)+"scale("+f+","+d+")")}return function(c,u){var f=[],d=[];return c=e(c),u=e(u),s(c.translateX,c.translateY,u.translateX,u.translateY,f,d),o(c.rotate,u.rotate,f,d),a(c.skewX,u.skewX,f,d),l(c.scaleX,c.scaleY,u.scaleX,u.scaleY,f,d),c=u=null,function(h){for(var p=-1,g=d.length,v;++p<g;)f[(v=d[p]).i]=v.x(h);return f.join("")}}}var pK=VF(dK,"px, ","px)","deg)"),yK=VF(hK,", ",")",")"),mK=1e-12;function o6(e){return((e=Math.exp(e))+1/e)/2}function gK(e){return((e=Math.exp(e))-1/e)/2}function bK(e){return((e=Math.exp(2*e))-1)/(e+1)}const vK=function e(t,n,r){function i(s,o){var a=s[0],l=s[1],c=s[2],u=o[0],f=o[1],d=o[2],h=u-a,p=f-l,g=h*h+p*p,v,y;if(g<mK)y=Math.log(d/c)/t,v=function(x){return[a+x*h,l+x*p,c*Math.exp(t*x*y)]};else{var m=Math.sqrt(g),b=(d*d-c*c+r*g)/(2*c*n*m),w=(d*d-c*c-r*g)/(2*d*n*m),S=Math.log(Math.sqrt(b*b+1)-b),_=Math.log(Math.sqrt(w*w+1)-w);y=(_-S)/t,v=function(x){var E=x*y,k=o6(S),I=c/(n*m)*(k*bK(t*E+S)-gK(S));return[a+I*h,l+I*p,c*k/o6(t*E+S)]}}return v.duration=y*1e3*t/Math.SQRT2,v}return i.rho=function(s){var o=Math.max(.001,+s),a=o*o,l=a*a;return e(o,a,l)},i}(Math.SQRT2,2,4);function wK(e){return function(t,n){var r=e((t=bS(t)).h,(n=bS(n)).h),i=jn(t.s,n.s),s=jn(t.l,n.l),o=jn(t.opacity,n.opacity);return function(a){return t.h=r(a),t.s=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const _K=wK(_3);function SK(e,t){var n=jn((e=vS(e)).l,(t=vS(t)).l),r=jn(e.a,t.a),i=jn(e.b,t.b),s=jn(e.opacity,t.opacity);return function(o){return e.l=n(o),e.a=r(o),e.b=i(o),e.opacity=s(o),e+""}}function xK(e){return function(t,n){var r=e((t=wS(t)).h,(n=wS(n)).h),i=jn(t.c,n.c),s=jn(t.l,n.l),o=jn(t.opacity,n.opacity);return function(a){return t.h=r(a),t.c=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const IK=xK(_3);function YF(e){return function t(n){n=+n;function r(i,s){var o=e((i=Rs(i)).h,(s=Rs(s)).h),a=jn(i.s,s.s),l=jn(i.l,s.l),c=jn(i.opacity,s.opacity);return function(u){return i.h=o(u),i.s=a(u),i.l=l(Math.pow(u,n)),i.opacity=c(u),i+""}}return r.gamma=t,r}(1)}YF(_3);var x3=YF(jn);function av(e,t){t===void 0&&(t=e,e=nd);for(var n=0,r=t.length-1,i=t[0],s=new Array(r<0?0:r);n<r;)s[n]=e(i,i=t[++n]);return function(o){var a=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return s[a](o-a)}}function qi(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}var Af=0,eh=0,Nd=0,qF=1e3,Wg,nh,Hg=0,vc=0,lv=0,mp=typeof performance=="object"&&performance.now?performance:Date,WF=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function I3(){return vc||(WF(TK),vc=mp.now()+lv)}function TK(){vc=0}function Gg(){this._call=this._time=this._next=null}Gg.prototype=HF.prototype={constructor:Gg,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?I3():+n)+(t==null?0:+t),!this._next&&nh!==this&&(nh?nh._next=this:Wg=this,nh=this),this._call=e,this._time=n,xS()},stop:function(){this._call&&(this._call=null,this._time=1/0,xS())}};function HF(e,t,n){var r=new Gg;return r.restart(e,t,n),r}function EK(){I3(),++Af;for(var e=Wg,t;e;)(t=vc-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Af}function a6(){vc=(Hg=mp.now())+lv,Af=eh=0;try{EK()}finally{Af=0,MK(),vc=0}}function AK(){var e=mp.now(),t=e-Hg;t>qF&&(lv-=t,Hg=e)}function MK(){for(var e,t=Wg,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Wg=n);nh=e,xS(r)}function xS(e){if(!Af){eh&&(eh=clearTimeout(eh));var t=e-vc;t>24?(e<1/0&&(eh=setTimeout(a6,e-mp.now()-lv)),Nd&&(Nd=clearInterval(Nd))):(Nd||(Hg=mp.now(),Nd=setInterval(AK,qF)),Af=1,WF(a6))}}function l6(e,t,n){var r=new Gg;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var $K=nv("start","end","cancel","interrupt"),NK=[],GF=0,c6=1,IS=2,bm=3,u6=4,TS=5,vm=6;function cv(e,t,n,r,i,s){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;kK(e,n,{name:t,index:r,group:i,on:$K,tween:NK,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:GF})}function T3(e,t){var n=Ki(e,t);if(n.state>GF)throw new Error("too late; already scheduled");return n}function Ps(e,t){var n=Ki(e,t);if(n.state>bm)throw new Error("too late; already running");return n}function Ki(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function kK(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=HF(s,0,n.time);function s(c){n.state=c6,n.timer.restart(o,n.delay,n.time),n.delay<=c&&o(c-n.delay)}function o(c){var u,f,d,h;if(n.state!==c6)return l();for(u in r)if(h=r[u],h.name===n.name){if(h.state===bm)return l6(o);h.state===u6?(h.state=vm,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[u]):+u<t&&(h.state=vm,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[u])}if(l6(function(){n.state===bm&&(n.state=u6,n.timer.restart(a,n.delay,n.time),a(c))}),n.state=IS,n.on.call("start",e,e.__data__,n.index,n.group),n.state===IS){for(n.state=bm,i=new Array(d=n.tween.length),u=0,f=-1;u<d;++u)(h=n.tween[u].value.call(e,e.__data__,n.index,n.group))&&(i[++f]=h);i.length=f+1}}function a(c){for(var u=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(l),n.state=TS,1),f=-1,d=i.length;++f<d;)i[f].call(e,u);n.state===TS&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=vm,n.timer.stop(),delete r[t];for(var c in r)return;delete e.__transition}}function tf(e,t){var n=e.__transition,r,i,s=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){s=!1;continue}i=r.state>IS&&r.state<TS,r.state=vm,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}s&&delete e.__transition}}function DK(e){return this.each(function(){tf(this,e)})}function OK(e,t){var n,r;return function(){var i=Ps(this,e),s=i.tween;if(s!==n){r=n=s;for(var o=0,a=r.length;o<a;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function FK(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=Ps(this,e),o=s.tween;if(o!==r){i=(r=o).slice();for(var a={name:t,value:n},l=0,c=i.length;l<c;++l)if(i[l].name===t){i[l]=a;break}l===c&&i.push(a)}s.tween=i}}function BK(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Ki(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?OK:FK)(n,e,t))}function E3(e,t,n){var r=e._id;return e.each(function(){var i=Ps(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return Ki(i,r).value[t]}}function XF(e,t){var n;return(typeof t=="number"?Un:t instanceof Va?bc:(n=Va(t))?(t=n,bc):zF)(e,t)}function LK(e){return function(){this.removeAttribute(e)}}function RK(e){return function(){this.removeAttributeNS(e.space,e.local)}}function CK(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttribute(e);return o===i?null:o===r?s:s=t(r=o,n)}}function UK(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?s:s=t(r=o,n)}}function PK(e,t,n){var r,i,s;return function(){var o,a=n(this),l;return a==null?void this.removeAttribute(e):(o=this.getAttribute(e),l=a+"",o===l?null:o===r&&l===i?s:(i=l,s=t(r=o,a)))}}function zK(e,t,n){var r,i,s;return function(){var o,a=n(this),l;return a==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),l=a+"",o===l?null:o===r&&l===i?s:(i=l,s=t(r=o,a)))}}function jK(e,t){var n=rv(e),r=n==="transform"?yK:XF;return this.attrTween(e,typeof t=="function"?(n.local?zK:PK)(n,r,E3(this,"attr."+e,t)):t==null?(n.local?RK:LK)(n):(n.local?UK:CK)(n,r,t))}function VK(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function YK(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function qK(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&YK(e,s)),n}return i._value=t,i}function WK(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&VK(e,s)),n}return i._value=t,i}function HK(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=rv(e);return this.tween(n,(r.local?qK:WK)(r,t))}function GK(e,t){return function(){T3(this,e).delay=+t.apply(this,arguments)}}function XK(e,t){return t=+t,function(){T3(this,e).delay=t}}function QK(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?GK:XK)(t,e)):Ki(this.node(),t).delay}function KK(e,t){return function(){Ps(this,e).duration=+t.apply(this,arguments)}}function ZK(e,t){return t=+t,function(){Ps(this,e).duration=t}}function JK(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?KK:ZK)(t,e)):Ki(this.node(),t).duration}function tZ(e,t){if(typeof t!="function")throw new Error;return function(){Ps(this,e).ease=t}}function eZ(e){var t=this._id;return arguments.length?this.each(tZ(t,e)):Ki(this.node(),t).ease}function nZ(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Ps(this,e).ease=n}}function rZ(e){if(typeof e!="function")throw new Error;return this.each(nZ(this._id,e))}function iZ(e){typeof e!="function"&&(e=gF(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],l,c=0;c<o;++c)(l=s[c])&&e.call(l,l.__data__,c,s)&&a.push(l);return new Lo(r,this._parents,this._name,this._id)}function sZ(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var l=t[a],c=n[a],u=l.length,f=o[a]=new Array(u),d,h=0;h<u;++h)(d=l[h]||c[h])&&(f[h]=d);for(;a<r;++a)o[a]=t[a];return new Lo(o,this._parents,this._name,this._id)}function oZ(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function aZ(e,t,n){var r,i,s=oZ(t)?T3:Ps;return function(){var o=s(this,e),a=o.on;a!==r&&(i=(r=a).copy()).on(t,n),o.on=i}}function lZ(e,t){var n=this._id;return arguments.length<2?Ki(this.node(),n).on.on(e):this.each(aZ(n,e,t))}function cZ(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function uZ(){return this.on("end.remove",cZ(this._id))}function fZ(e){var t=this._name,n=this._id;typeof e!="function"&&(e=m3(e));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a=r[o],l=a.length,c=s[o]=new Array(l),u,f,d=0;d<l;++d)(u=a[d])&&(f=e.call(u,u.__data__,d,a))&&("__data__"in u&&(f.__data__=u.__data__),c[d]=f,cv(c[d],t,n,d,c,Ki(u,n)));return new Lo(s,this._parents,t,n)}function dZ(e){var t=this._name,n=this._id;typeof e!="function"&&(e=mF(e));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var l=r[a],c=l.length,u,f=0;f<c;++f)if(u=l[f]){for(var d=e.call(u,u.__data__,f,l),h,p=Ki(u,n),g=0,v=d.length;g<v;++g)(h=d[g])&&cv(h,t,n,g,d,p);s.push(d),o.push(u)}return new Lo(s,o,t,n)}var hZ=uy.prototype.constructor;function pZ(){return new hZ(this._groups,this._parents)}function yZ(e,t){var n,r,i;return function(){var s=Tf(this,e),o=(this.style.removeProperty(e),Tf(this,e));return s===o?null:s===n&&o===r?i:i=t(n=s,r=o)}}function QF(e){return function(){this.style.removeProperty(e)}}function mZ(e,t,n){var r,i=n+"",s;return function(){var o=Tf(this,e);return o===i?null:o===r?s:s=t(r=o,n)}}function gZ(e,t,n){var r,i,s;return function(){var o=Tf(this,e),a=n(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(e),Tf(this,e))),o===l?null:o===r&&l===i?s:(i=l,s=t(r=o,a))}}function bZ(e,t){var n,r,i,s="style."+t,o="end."+s,a;return function(){var l=Ps(this,e),c=l.on,u=l.value[s]==null?a||(a=QF(t)):void 0;(c!==n||i!==u)&&(r=(n=c).copy()).on(o,i=u),l.on=r}}function vZ(e,t,n){var r=(e+="")=="transform"?pK:XF;return t==null?this.styleTween(e,yZ(e,r)).on("end.style."+e,QF(e)):typeof t=="function"?this.styleTween(e,gZ(e,r,E3(this,"style."+e,t))).each(bZ(this._id,e)):this.styleTween(e,mZ(e,r,t),n).on("end.style."+e,null)}function wZ(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function _Z(e,t,n){var r,i;function s(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&wZ(e,o,n)),r}return s._value=t,s}function SZ(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,_Z(e,t,n??""))}function xZ(e){return function(){this.textContent=e}}function IZ(e){return function(){var t=e(this);this.textContent=t??""}}function TZ(e){return this.tween("text",typeof e=="function"?IZ(E3(this,"text",e)):xZ(e==null?"":e+""))}function EZ(e){return function(t){this.textContent=e.call(this,t)}}function AZ(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&EZ(i)),t}return r._value=e,r}function MZ(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,AZ(e))}function $Z(){for(var e=this._name,t=this._id,n=KF(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,l,c=0;c<a;++c)if(l=o[c]){var u=Ki(l,t);cv(l,e,n,c,o,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new Lo(r,this._parents,e,n)}function NZ(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var a={value:o},l={value:function(){--i===0&&s()}};n.each(function(){var c=Ps(this,r),u=c.on;u!==e&&(t=(e=u).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(l)),c.on=t}),i===0&&s()})}var kZ=0;function Lo(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function KF(){return++kZ}var Ys=uy.prototype;Lo.prototype={constructor:Lo,select:fZ,selectAll:dZ,selectChild:Ys.selectChild,selectChildren:Ys.selectChildren,filter:iZ,merge:sZ,selection:pZ,transition:$Z,call:Ys.call,nodes:Ys.nodes,node:Ys.node,size:Ys.size,empty:Ys.empty,each:Ys.each,on:lZ,attr:jK,attrTween:HK,style:vZ,styleTween:SZ,text:TZ,textTween:MZ,remove:uZ,tween:BK,delay:QK,duration:JK,ease:eZ,easeVarying:rZ,end:NZ,[Symbol.iterator]:Ys[Symbol.iterator]};function DZ(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var OZ={time:null,delay:0,duration:250,ease:DZ};function FZ(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function BZ(e){var t,n;e instanceof Lo?(t=e._id,e=e._name):(t=KF(),(n=OZ).time=I3(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,l,c=0;c<a;++c)(l=o[c])&&cv(l,e,t,c,o,n||FZ(l,t));return new Lo(r,this._parents,e,t)}uy.prototype.interrupt=DK;uy.prototype.transition=BZ;const Zw=e=>()=>e;function LZ(e,{sourceEvent:t,target:n,selection:r,mode:i,dispatch:s}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:s}})}function RZ(e){e.stopImmediatePropagation()}function Jw(e){e.preventDefault(),e.stopImmediatePropagation()}var f6={name:"drag"},t_={name:"space"},Pc={name:"handle"},zc={name:"center"};const{abs:d6,max:Bn,min:Ln}=Math;function h6(e){return[+e[0],+e[1]]}function ES(e){return[h6(e[0]),h6(e[1])]}var wm={name:"x",handles:["w","e"].map(gp),input:function(e,t){return e==null?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},_m={name:"y",handles:["n","s"].map(gp),input:function(e,t){return e==null?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},CZ={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(gp),input:function(e){return e==null?null:ES(e)},output:function(e){return e}},qs={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},p6={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},y6={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},UZ={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},PZ={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function gp(e){return{type:e}}function zZ(e){return!e.ctrlKey&&!e.button}function jZ(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function VZ(){return navigator.maxTouchPoints||"ontouchstart"in this}function e_(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function YZ(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function qZ(){return A3(wm)}function WZ(){return A3(_m)}function HZ(){return A3(CZ)}function A3(e){var t=jZ,n=zZ,r=VZ,i=!0,s=nv("start","brush","end"),o=6,a;function l(v){var y=v.property("__brush",g).selectAll(".overlay").data([gp("overlay")]);y.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",qs.overlay).merge(y).each(function(){var b=e_(this).extent;be(this).attr("x",b[0][0]).attr("y",b[0][1]).attr("width",b[1][0]-b[0][0]).attr("height",b[1][1]-b[0][1])}),v.selectAll(".selection").data([gp("selection")]).enter().append("rect").attr("class","selection").attr("cursor",qs.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var m=v.selectAll(".handle").data(e.handles,function(b){return b.type});m.exit().remove(),m.enter().append("rect").attr("class",function(b){return"handle handle--"+b.type}).attr("cursor",function(b){return qs[b.type]}),v.each(c).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",d).filter(r).on("touchstart.brush",d).on("touchmove.brush",h).on("touchend.brush touchcancel.brush",p).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}l.move=function(v,y,m){v.tween?v.on("start.brush",function(b){u(this,arguments).beforestart().start(b)}).on("interrupt.brush end.brush",function(b){u(this,arguments).end(b)}).tween("brush",function(){var b=this,w=b.__brush,S=u(b,arguments),_=w.selection,x=e.input(typeof y=="function"?y.apply(this,arguments):y,w.extent),E=nd(_,x);function k(I){w.selection=I===1&&x===null?null:E(I),c.call(b),S.brush()}return _!==null&&x!==null?k:k(1)}):v.each(function(){var b=this,w=arguments,S=b.__brush,_=e.input(typeof y=="function"?y.apply(b,w):y,S.extent),x=u(b,w).beforestart();tf(b),S.selection=_===null?null:_,c.call(b),x.start(m).brush(m).end(m)})},l.clear=function(v,y){l.move(v,null,y)};function c(){var v=be(this),y=e_(this).selection;y?(v.selectAll(".selection").style("display",null).attr("x",y[0][0]).attr("y",y[0][1]).attr("width",y[1][0]-y[0][0]).attr("height",y[1][1]-y[0][1]),v.selectAll(".handle").style("display",null).attr("x",function(m){return m.type[m.type.length-1]==="e"?y[1][0]-o/2:y[0][0]-o/2}).attr("y",function(m){return m.type[0]==="s"?y[1][1]-o/2:y[0][1]-o/2}).attr("width",function(m){return m.type==="n"||m.type==="s"?y[1][0]-y[0][0]+o:o}).attr("height",function(m){return m.type==="e"||m.type==="w"?y[1][1]-y[0][1]+o:o})):v.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function u(v,y,m){var b=v.__brush.emitter;return b&&(!m||!b.clean)?b:new f(v,y,m)}function f(v,y,m){this.that=v,this.args=y,this.state=v.__brush,this.active=0,this.clean=m}f.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(v,y){return this.starting?(this.starting=!1,this.emit("start",v,y)):this.emit("brush",v),this},brush:function(v,y){return this.emit("brush",v,y),this},end:function(v,y){return--this.active===0&&(delete this.state.emitter,this.emit("end",v,y)),this},emit:function(v,y,m){var b=be(this.that).datum();s.call(v,this.that,new LZ(v,{sourceEvent:y,target:l,selection:e.output(this.state.selection),mode:m,dispatch:s}),b)}};function d(v){if(a&&!v.touches||!n.apply(this,arguments))return;var y=this,m=v.target.__data__.type,b=(i&&v.metaKey?m="overlay":m)==="selection"?f6:i&&v.altKey?zc:Pc,w=e===_m?null:UZ[m],S=e===wm?null:PZ[m],_=e_(y),x=_.extent,E=_.selection,k=x[0][0],I,A,D=x[0][1],L,T,M=x[1][0],N,B,O=x[1][1],C,F,P=0,z=0,H,X=w&&S&&i&&v.shiftKey,tt,Z,Y=Array.from(v.touches||[v],st=>{const me=st.identifier;return st=ki(st,y),st.point0=st.slice(),st.identifier=me,st});tf(y);var Q=u(y,arguments,!0).beforestart();if(m==="overlay"){E&&(H=!0);const st=[Y[0],Y[1]||Y[0]];_.selection=E=[[I=e===_m?k:Ln(st[0][0],st[1][0]),L=e===wm?D:Ln(st[0][1],st[1][1])],[N=e===_m?M:Bn(st[0][0],st[1][0]),C=e===wm?O:Bn(st[0][1],st[1][1])]],Y.length>1&&At(v)}else I=E[0][0],L=E[0][1],N=E[1][0],C=E[1][1];A=I,T=L,B=N,F=C;var V=be(y).attr("pointer-events","none"),J=V.selectAll(".overlay").attr("cursor",qs[m]);if(v.touches)Q.moved=j,Q.ended=at;else{var et=be(v.view).on("mousemove.brush",j,!0).on("mouseup.brush",at,!0);i&&et.on("keydown.brush",qt,!0).on("keyup.brush",Ht,!0),AF(v.view)}c.call(y),Q.start(v,b.name);function j(st){for(const me of st.changedTouches||[st])for(const ts of Y)ts.identifier===me.identifier&&(ts.cur=ki(me,y));if(X&&!tt&&!Z&&Y.length===1){const me=Y[0];d6(me.cur[0]-me[0])>d6(me.cur[1]-me[1])?Z=!0:tt=!0}for(const me of Y)me.cur&&(me[0]=me.cur[0],me[1]=me.cur[1]);H=!0,Jw(st),At(st)}function At(st){const me=Y[0],ts=me.point0;var Qr;switch(P=me[0]-ts[0],z=me[1]-ts[1],b){case t_:case f6:{w&&(P=Bn(k-I,Ln(M-N,P)),A=I+P,B=N+P),S&&(z=Bn(D-L,Ln(O-C,z)),T=L+z,F=C+z);break}case Pc:{Y[1]?(w&&(A=Bn(k,Ln(M,Y[0][0])),B=Bn(k,Ln(M,Y[1][0])),w=1),S&&(T=Bn(D,Ln(O,Y[0][1])),F=Bn(D,Ln(O,Y[1][1])),S=1)):(w<0?(P=Bn(k-I,Ln(M-I,P)),A=I+P,B=N):w>0&&(P=Bn(k-N,Ln(M-N,P)),A=I,B=N+P),S<0?(z=Bn(D-L,Ln(O-L,z)),T=L+z,F=C):S>0&&(z=Bn(D-C,Ln(O-C,z)),T=L,F=C+z));break}case zc:{w&&(A=Bn(k,Ln(M,I-P*w)),B=Bn(k,Ln(M,N+P*w))),S&&(T=Bn(D,Ln(O,L-z*S)),F=Bn(D,Ln(O,C+z*S)));break}}B<A&&(w*=-1,Qr=I,I=N,N=Qr,Qr=A,A=B,B=Qr,m in p6&&J.attr("cursor",qs[m=p6[m]])),F<T&&(S*=-1,Qr=L,L=C,C=Qr,Qr=T,T=F,F=Qr,m in y6&&J.attr("cursor",qs[m=y6[m]])),_.selection&&(E=_.selection),tt&&(A=E[0][0],B=E[1][0]),Z&&(T=E[0][1],F=E[1][1]),(E[0][0]!==A||E[0][1]!==T||E[1][0]!==B||E[1][1]!==F)&&(_.selection=[[A,T],[B,F]],c.call(y),Q.brush(st,b.name))}function at(st){if(RZ(st),st.touches){if(st.touches.length)return;a&&clearTimeout(a),a=setTimeout(function(){a=null},500)}else MF(st.view,H),et.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);V.attr("pointer-events","all"),J.attr("cursor",qs.overlay),_.selection&&(E=_.selection),YZ(E)&&(_.selection=null,c.call(y)),Q.end(st,b.name)}function qt(st){switch(st.keyCode){case 16:{X=w&&S;break}case 18:{b===Pc&&(w&&(N=B-P*w,I=A+P*w),S&&(C=F-z*S,L=T+z*S),b=zc,At(st));break}case 32:{(b===Pc||b===zc)&&(w<0?N=B-P:w>0&&(I=A-P),S<0?C=F-z:S>0&&(L=T-z),b=t_,J.attr("cursor",qs.selection),At(st));break}default:return}Jw(st)}function Ht(st){switch(st.keyCode){case 16:{X&&(tt=Z=X=!1,At(st));break}case 18:{b===zc&&(w<0?N=B:w>0&&(I=A),S<0?C=F:S>0&&(L=T),b=Pc,At(st));break}case 32:{b===t_&&(st.altKey?(w&&(N=B-P*w,I=A+P*w),S&&(C=F-z*S,L=T+z*S),b=zc):(w<0?N=B:w>0&&(I=A),S<0?C=F:S>0&&(L=T),b=Pc),J.attr("cursor",qs[m]),At(st));break}default:return}Jw(st)}}function h(v){u(this,arguments).moved(v)}function p(v){u(this,arguments).ended(v)}function g(){var v=this.__brush||{selection:null};return v.extent=ES(t.apply(this,arguments)),v.dim=e,v}return l.extent=function(v){return arguments.length?(t=typeof v=="function"?v:Zw(ES(v)),l):t},l.filter=function(v){return arguments.length?(n=typeof v=="function"?v:Zw(!!v),l):n},l.touchable=function(v){return arguments.length?(r=typeof v=="function"?v:Zw(!!v),l):r},l.handleSize=function(v){return arguments.length?(o=+v,l):o},l.keyModifiers=function(v){return arguments.length?(i=!!v,l):i},l.on=function(){var v=s.on.apply(s,arguments);return v===s?l:v},l}const AS=Math.PI,MS=2*AS,Fl=1e-6,GZ=MS-Fl;function ZF(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function XZ(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return ZF;const n=10**t;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let JF=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?ZF:XZ(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,s,o){this._append`C${+t},${+n},${+r},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(t,n,r,i,s){if(t=+t,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,l=r-t,c=i-n,u=o-t,f=a-n,d=u*u+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(d>Fl)if(!(Math.abs(f*l-c*u)>Fl)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let h=r-o,p=i-a,g=l*l+c*c,v=h*h+p*p,y=Math.sqrt(g),m=Math.sqrt(d),b=s*Math.tan((AS-Math.acos((g+d-v)/(2*y*m)))/2),w=b/m,S=b/y;Math.abs(w-1)>Fl&&this._append`L${t+w*u},${n+w*f}`,this._append`A${s},${s},0,0,${+(f*h>u*p)},${this._x1=t+S*l},${this._y1=n+S*c}`}}arc(t,n,r,i,s,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),l=r*Math.sin(i),c=t+a,u=n+l,f=1^o,d=o?i-s:s-i;this._x1===null?this._append`M${c},${u}`:(Math.abs(this._x1-c)>Fl||Math.abs(this._y1-u)>Fl)&&this._append`L${c},${u}`,r&&(d<0&&(d=d%MS+MS),d>GZ?this._append`A${r},${r},0,1,${f},${t-a},${n-l}A${r},${r},0,1,${f},${this._x1=c},${this._y1=u}`:d>Fl&&this._append`A${r},${r},0,${+(d>=AS)},${f},${this._x1=t+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function vo(e=3){return new JF(+e)}var QZ=Array.prototype,tB=QZ.slice;function KZ(e,t){return e-t}function ZZ(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}const ca=e=>()=>e;function JZ(e,t){for(var n=-1,r=t.length,i;++n<r;)if(i=tJ(e,t[n]))return i;return 0}function tJ(e,t){for(var n=t[0],r=t[1],i=-1,s=0,o=e.length,a=o-1;s<o;a=s++){var l=e[s],c=l[0],u=l[1],f=e[a],d=f[0],h=f[1];if(eJ(l,f,t))return 0;u>r!=h>r&&n<(d-c)*(r-u)/(h-u)+c&&(i=-i)}return i}function eJ(e,t,n){var r;return nJ(e,t,n)&&rJ(e[r=+(e[0]===t[0])],n[r],t[r])}function nJ(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function rJ(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function iJ(){}var Ws=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function Xg(){var e=1,t=1,n=p3,r=l;function i(c){var u=n(c);if(Array.isArray(u))u=u.slice().sort(KZ);else{const f=bn(c,sJ);for(u=za(...uF(f[0],f[1],u),u);u[u.length-1]>=f[1];)u.pop();for(;u[1]<f[0];)u.shift()}return u.map(f=>s(c,f))}function s(c,u){const f=u==null?NaN:+u;if(isNaN(f))throw new Error(`invalid value: ${u}`);var d=[],h=[];return o(c,f,function(p){r(p,c,f),ZZ(p)>0?d.push([p]):h.push(p)}),h.forEach(function(p){for(var g=0,v=d.length,y;g<v;++g)if(JZ((y=d[g])[0],p)!==-1){y.push(p);return}}),{type:"MultiPolygon",value:u,coordinates:d}}function o(c,u,f){var d=new Array,h=new Array,p,g,v,y,m,b;for(p=g=-1,y=wl(c[0],u),Ws[y<<1].forEach(w);++p<e-1;)v=y,y=wl(c[p+1],u),Ws[v|y<<1].forEach(w);for(Ws[y<<0].forEach(w);++g<t-1;){for(p=-1,y=wl(c[g*e+e],u),m=wl(c[g*e],u),Ws[y<<1|m<<2].forEach(w);++p<e-1;)v=y,y=wl(c[g*e+e+p+1],u),b=m,m=wl(c[g*e+p+1],u),Ws[v|y<<1|m<<2|b<<3].forEach(w);Ws[y|m<<3].forEach(w)}for(p=-1,m=c[g*e]>=u,Ws[m<<2].forEach(w);++p<e-1;)b=m,m=wl(c[g*e+p+1],u),Ws[m<<2|b<<3].forEach(w);Ws[m<<3].forEach(w);function w(S){var _=[S[0][0]+p,S[0][1]+g],x=[S[1][0]+p,S[1][1]+g],E=a(_),k=a(x),I,A;(I=h[E])?(A=d[k])?(delete h[I.end],delete d[A.start],I===A?(I.ring.push(x),f(I.ring)):d[I.start]=h[A.end]={start:I.start,end:A.end,ring:I.ring.concat(A.ring)}):(delete h[I.end],I.ring.push(x),h[I.end=k]=I):(I=d[k])?(A=h[E])?(delete d[I.start],delete h[A.end],I===A?(I.ring.push(x),f(I.ring)):d[A.start]=h[I.end]={start:A.start,end:I.end,ring:A.ring.concat(I.ring)}):(delete d[I.start],I.ring.unshift(_),d[I.start=E]=I):d[E]=h[k]={start:E,end:k,ring:[_,x]}}}function a(c){return c[0]*2+c[1]*(e+1)*4}function l(c,u,f){c.forEach(function(d){var h=d[0],p=d[1],g=h|0,v=p|0,y=n_(u[v*e+g]);h>0&&h<e&&g===h&&(d[0]=m6(h,n_(u[v*e+g-1]),y,f)),p>0&&p<t&&v===p&&(d[1]=m6(p,n_(u[(v-1)*e+g]),y,f))})}return i.contour=s,i.size=function(c){if(!arguments.length)return[e,t];var u=Math.floor(c[0]),f=Math.floor(c[1]);if(!(u>=0&&f>=0))throw new Error("invalid size");return e=u,t=f,i},i.thresholds=function(c){return arguments.length?(n=typeof c=="function"?c:Array.isArray(c)?ca(tB.call(c)):ca(c),i):n},i.smooth=function(c){return arguments.length?(r=c?l:iJ,i):r===l},i}function sJ(e){return isFinite(e)?e:NaN}function wl(e,t){return e==null?!1:+e>=t}function n_(e){return e==null||isNaN(e=+e)?-1/0:e}function m6(e,t,n,r){const i=r-t,s=n-t,o=isFinite(i)||isFinite(s)?i/s:Math.sign(i)/Math.sign(s);return isNaN(o)?e:e+o-.5}function oJ(e){return e[0]}function aJ(e){return e[1]}function lJ(){return 1}function cJ(){var e=oJ,t=aJ,n=lJ,r=960,i=500,s=20,o=2,a=s*3,l=r+a*2>>o,c=i+a*2>>o,u=ca(20);function f(m){var b=new Float32Array(l*c),w=Math.pow(2,-o),S=-1;for(const L of m){var _=(e(L,++S,m)+a)*w,x=(t(L,S,m)+a)*w,E=+n(L,S,m);if(E&&_>=0&&_<l&&x>=0&&x<c){var k=Math.floor(_),I=Math.floor(x),A=_-k-.5,D=x-I-.5;b[k+I*l]+=(1-A)*(1-D)*E,b[k+1+I*l]+=A*(1-D)*E,b[k+1+(I+1)*l]+=A*D*E,b[k+(I+1)*l]+=(1-A)*D*E}}return iF({data:b,width:l,height:c},s*w),b}function d(m){var b=f(m),w=u(b),S=Math.pow(2,2*o);return Array.isArray(w)||(w=za(Number.MIN_VALUE,De(b)/S,w)),Xg().size([l,c]).thresholds(w.map(_=>_*S))(b).map((_,x)=>(_.value=+w[x],h(_)))}d.contours=function(m){var b=f(m),w=Xg().size([l,c]),S=Math.pow(2,2*o),_=x=>{x=+x;var E=h(w.contour(b,x*S));return E.value=x,E};return Object.defineProperty(_,"max",{get:()=>De(b)/S}),_};function h(m){return m.coordinates.forEach(p),m}function p(m){m.forEach(g)}function g(m){m.forEach(v)}function v(m){m[0]=m[0]*Math.pow(2,o)-a,m[1]=m[1]*Math.pow(2,o)-a}function y(){return a=s*3,l=r+a*2>>o,c=i+a*2>>o,d}return d.x=function(m){return arguments.length?(e=typeof m=="function"?m:ca(+m),d):e},d.y=function(m){return arguments.length?(t=typeof m=="function"?m:ca(+m),d):t},d.weight=function(m){return arguments.length?(n=typeof m=="function"?m:ca(+m),d):n},d.size=function(m){if(!arguments.length)return[r,i];var b=+m[0],w=+m[1];if(!(b>=0&&w>=0))throw new Error("invalid size");return r=b,i=w,y()},d.cellSize=function(m){if(!arguments.length)return 1<<o;if(!((m=+m)>=1))throw new Error("invalid cell size");return o=Math.floor(Math.log(m)/Math.LN2),y()},d.thresholds=function(m){return arguments.length?(u=typeof m=="function"?m:Array.isArray(m)?ca(tB.call(m)):ca(m),d):u},d.bandwidth=function(m){if(!arguments.length)return Math.sqrt(s*(s+1));if(!((m=+m)>=0))throw new Error("invalid bandwidth");return s=(Math.sqrt(4*m*m+1)-1)/2,y()},d}const Io=11102230246251565e-32,Rn=134217729,uJ=(3+8*Io)*Io;function r_(e,t,n,r,i){let s,o,a,l,c=t[0],u=r[0],f=0,d=0;u>c==u>-c?(s=c,c=t[++f]):(s=u,u=r[++d]);let h=0;if(f<e&&d<n)for(u>c==u>-c?(o=c+s,a=s-(o-c),c=t[++f]):(o=u+s,a=s-(o-u),u=r[++d]),s=o,a!==0&&(i[h++]=a);f<e&&d<n;)u>c==u>-c?(o=s+c,l=o-s,a=s-(o-l)+(c-l),c=t[++f]):(o=s+u,l=o-s,a=s-(o-l)+(u-l),u=r[++d]),s=o,a!==0&&(i[h++]=a);for(;f<e;)o=s+c,l=o-s,a=s-(o-l)+(c-l),c=t[++f],s=o,a!==0&&(i[h++]=a);for(;d<n;)o=s+u,l=o-s,a=s-(o-l)+(u-l),u=r[++d],s=o,a!==0&&(i[h++]=a);return(s!==0||h===0)&&(i[h++]=s),h}function fJ(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}function dy(e){return new Float64Array(e)}const dJ=(3+16*Io)*Io,hJ=(2+12*Io)*Io,pJ=(9+64*Io)*Io*Io,jc=dy(4),g6=dy(8),b6=dy(12),v6=dy(16),Wn=dy(4);function yJ(e,t,n,r,i,s,o){let a,l,c,u,f,d,h,p,g,v,y,m,b,w,S,_,x,E;const k=e-i,I=n-i,A=t-s,D=r-s;w=k*D,d=Rn*k,h=d-(d-k),p=k-h,d=Rn*D,g=d-(d-D),v=D-g,S=p*v-(w-h*g-p*g-h*v),_=A*I,d=Rn*A,h=d-(d-A),p=A-h,d=Rn*I,g=d-(d-I),v=I-g,x=p*v-(_-h*g-p*g-h*v),y=S-x,f=S-y,jc[0]=S-(y+f)+(f-x),m=w+y,f=m-w,b=w-(m-f)+(y-f),y=b-_,f=b-y,jc[1]=b-(y+f)+(f-_),E=m+y,f=E-m,jc[2]=m-(E-f)+(y-f),jc[3]=E;let L=fJ(4,jc),T=hJ*o;if(L>=T||-L>=T||(f=e-k,a=e-(k+f)+(f-i),f=n-I,c=n-(I+f)+(f-i),f=t-A,l=t-(A+f)+(f-s),f=r-D,u=r-(D+f)+(f-s),a===0&&l===0&&c===0&&u===0)||(T=pJ*o+uJ*Math.abs(L),L+=k*u+D*a-(A*c+I*l),L>=T||-L>=T))return L;w=a*D,d=Rn*a,h=d-(d-a),p=a-h,d=Rn*D,g=d-(d-D),v=D-g,S=p*v-(w-h*g-p*g-h*v),_=l*I,d=Rn*l,h=d-(d-l),p=l-h,d=Rn*I,g=d-(d-I),v=I-g,x=p*v-(_-h*g-p*g-h*v),y=S-x,f=S-y,Wn[0]=S-(y+f)+(f-x),m=w+y,f=m-w,b=w-(m-f)+(y-f),y=b-_,f=b-y,Wn[1]=b-(y+f)+(f-_),E=m+y,f=E-m,Wn[2]=m-(E-f)+(y-f),Wn[3]=E;const M=r_(4,jc,4,Wn,g6);w=k*u,d=Rn*k,h=d-(d-k),p=k-h,d=Rn*u,g=d-(d-u),v=u-g,S=p*v-(w-h*g-p*g-h*v),_=A*c,d=Rn*A,h=d-(d-A),p=A-h,d=Rn*c,g=d-(d-c),v=c-g,x=p*v-(_-h*g-p*g-h*v),y=S-x,f=S-y,Wn[0]=S-(y+f)+(f-x),m=w+y,f=m-w,b=w-(m-f)+(y-f),y=b-_,f=b-y,Wn[1]=b-(y+f)+(f-_),E=m+y,f=E-m,Wn[2]=m-(E-f)+(y-f),Wn[3]=E;const N=r_(M,g6,4,Wn,b6);w=a*u,d=Rn*a,h=d-(d-a),p=a-h,d=Rn*u,g=d-(d-u),v=u-g,S=p*v-(w-h*g-p*g-h*v),_=l*c,d=Rn*l,h=d-(d-l),p=l-h,d=Rn*c,g=d-(d-c),v=c-g,x=p*v-(_-h*g-p*g-h*v),y=S-x,f=S-y,Wn[0]=S-(y+f)+(f-x),m=w+y,f=m-w,b=w-(m-f)+(y-f),y=b-_,f=b-y,Wn[1]=b-(y+f)+(f-_),E=m+y,f=E-m,Wn[2]=m-(E-f)+(y-f),Wn[3]=E;const B=r_(N,b6,4,Wn,v6);return v6[B-1]}function w0(e,t,n,r,i,s){const o=(t-s)*(n-i),a=(e-i)*(r-s),l=o-a,c=Math.abs(o+a);return Math.abs(l)>=dJ*c?l:-yJ(e,t,n,r,i,s,c)}const w6=Math.pow(2,-52),_0=new Uint32Array(512);class Qg{static from(t,n=wJ,r=_J){const i=t.length,s=new Float64Array(i*2);for(let o=0;o<i;o++){const a=t[o];s[2*o]=n(a),s[2*o+1]=r(a)}return new Qg(s)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:s}=this,o=t.length>>1;let a=1/0,l=1/0,c=-1/0,u=-1/0;for(let I=0;I<o;I++){const A=t[2*I],D=t[2*I+1];A<a&&(a=A),D<l&&(l=D),A>c&&(c=A),D>u&&(u=D),this._ids[I]=I}const f=(a+c)/2,d=(l+u)/2;let h=1/0,p,g,v;for(let I=0;I<o;I++){const A=i_(f,d,t[2*I],t[2*I+1]);A<h&&(p=I,h=A)}const y=t[2*p],m=t[2*p+1];h=1/0;for(let I=0;I<o;I++){if(I===p)continue;const A=i_(y,m,t[2*I],t[2*I+1]);A<h&&A>0&&(g=I,h=A)}let b=t[2*g],w=t[2*g+1],S=1/0;for(let I=0;I<o;I++){if(I===p||I===g)continue;const A=bJ(y,m,b,w,t[2*I],t[2*I+1]);A<S&&(v=I,S=A)}let _=t[2*v],x=t[2*v+1];if(S===1/0){for(let D=0;D<o;D++)this._dists[D]=t[2*D]-t[0]||t[2*D+1]-t[1];ku(this._ids,this._dists,0,o-1);const I=new Uint32Array(o);let A=0;for(let D=0,L=-1/0;D<o;D++){const T=this._ids[D];this._dists[T]>L&&(I[A++]=T,L=this._dists[T])}this.hull=I.subarray(0,A),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(w0(y,m,b,w,_,x)<0){const I=g,A=b,D=w;g=v,b=_,w=x,v=I,_=A,x=D}const E=vJ(y,m,b,w,_,x);this._cx=E.x,this._cy=E.y;for(let I=0;I<o;I++)this._dists[I]=i_(t[2*I],t[2*I+1],E.x,E.y);ku(this._ids,this._dists,0,o-1),this._hullStart=p;let k=3;r[p]=n[v]=g,r[g]=n[p]=v,r[v]=n[g]=p,i[p]=0,i[g]=1,i[v]=2,s.fill(-1),s[this._hashKey(y,m)]=p,s[this._hashKey(b,w)]=g,s[this._hashKey(_,x)]=v,this.trianglesLen=0,this._addTriangle(p,g,v,-1,-1,-1);for(let I=0,A,D;I<this._ids.length;I++){const L=this._ids[I],T=t[2*L],M=t[2*L+1];if(I>0&&Math.abs(T-A)<=w6&&Math.abs(M-D)<=w6||(A=T,D=M,L===p||L===g||L===v))continue;let N=0;for(let P=0,z=this._hashKey(T,M);P<this._hashSize&&(N=s[(z+P)%this._hashSize],!(N!==-1&&N!==r[N]));P++);N=n[N];let B=N,O;for(;O=r[B],w0(T,M,t[2*B],t[2*B+1],t[2*O],t[2*O+1])>=0;)if(B=O,B===N){B=-1;break}if(B===-1)continue;let C=this._addTriangle(B,L,r[B],-1,-1,i[B]);i[L]=this._legalize(C+2),i[B]=C,k++;let F=r[B];for(;O=r[F],w0(T,M,t[2*F],t[2*F+1],t[2*O],t[2*O+1])<0;)C=this._addTriangle(F,L,O,i[L],-1,i[F]),i[L]=this._legalize(C+2),r[F]=F,k--,F=O;if(B===N)for(;O=n[B],w0(T,M,t[2*O],t[2*O+1],t[2*B],t[2*B+1])<0;)C=this._addTriangle(O,L,B,-1,i[B],i[O]),this._legalize(C+2),i[O]=C,r[B]=B,k--,B=O;this._hullStart=n[L]=B,r[B]=n[F]=L,r[L]=F,s[this._hashKey(T,M)]=L,s[this._hashKey(t[2*B],t[2*B+1])]=B}this.hull=new Uint32Array(k);for(let I=0,A=this._hullStart;I<k;I++)this.hull[I]=A,A=r[A];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(mJ(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:r,coords:i}=this;let s=0,o=0;for(;;){const a=r[t],l=t-t%3;if(o=l+(t+2)%3,a===-1){if(s===0)break;t=_0[--s];continue}const c=a-a%3,u=l+(t+1)%3,f=c+(a+2)%3,d=n[o],h=n[t],p=n[u],g=n[f];if(gJ(i[2*d],i[2*d+1],i[2*h],i[2*h+1],i[2*p],i[2*p+1],i[2*g],i[2*g+1])){n[t]=g,n[a]=d;const y=r[f];if(y===-1){let b=this._hullStart;do{if(this._hullTri[b]===f){this._hullTri[b]=t;break}b=this._hullPrev[b]}while(b!==this._hullStart)}this._link(t,y),this._link(a,r[o]),this._link(o,f);const m=c+(a+1)%3;s<_0.length&&(_0[s++]=m)}else{if(s===0)break;t=_0[--s]}}return o}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,r,i,s,o){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=n,this._triangles[a+2]=r,this._link(a,i),this._link(a+1,s),this._link(a+2,o),this.trianglesLen+=3,a}}function mJ(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function i_(e,t,n,r){const i=e-n,s=t-r;return i*i+s*s}function gJ(e,t,n,r,i,s,o,a){const l=e-o,c=t-a,u=n-o,f=r-a,d=i-o,h=s-a,p=l*l+c*c,g=u*u+f*f,v=d*d+h*h;return l*(f*v-g*h)-c*(u*v-g*d)+p*(u*h-f*d)<0}function bJ(e,t,n,r,i,s){const o=n-e,a=r-t,l=i-e,c=s-t,u=o*o+a*a,f=l*l+c*c,d=.5/(o*c-a*l),h=(c*u-a*f)*d,p=(o*f-l*u)*d;return h*h+p*p}function vJ(e,t,n,r,i,s){const o=n-e,a=r-t,l=i-e,c=s-t,u=o*o+a*a,f=l*l+c*c,d=.5/(o*c-a*l),h=e+(c*u-a*f)*d,p=t+(o*f-l*u)*d;return{x:h,y:p}}function ku(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const s=e[i],o=t[s];let a=i-1;for(;a>=n&&t[e[a]]>o;)e[a+1]=e[a--];e[a+1]=s}else{const i=n+r>>1;let s=n+1,o=r;kd(e,i,s),t[e[n]]>t[e[r]]&&kd(e,n,r),t[e[s]]>t[e[r]]&&kd(e,s,r),t[e[n]]>t[e[s]]&&kd(e,n,s);const a=e[s],l=t[a];for(;;){do s++;while(t[e[s]]<l);do o--;while(t[e[o]]>l);if(o<s)break;kd(e,s,o)}e[n+1]=e[o],e[o]=a,r-s+1>=o-n?(ku(e,t,s,r),ku(e,t,n,o-1)):(ku(e,t,n,o-1),ku(e,t,s,r))}}function kd(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function wJ(e){return e[0]}function _J(e){return e[1]}const _6=1e-6;class Vl{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,r){t=+t,n=+n,r=+r;const i=t+r,s=n;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${s}`:(Math.abs(this._x1-i)>_6||Math.abs(this._y1-s)>_6)&&(this._+="L"+i+","+s),r&&(this._+=`A${r},${r},0,1,1,${t-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=s}`)}rect(t,n,r,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class $S{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let SJ=class{constructor(t,[n,r,i,s]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((s=+s)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=i,this.xmin=n,this.ymax=s,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:r},vectors:i}=this;let s,o;const a=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let g=0,v=0,y=r.length,m,b;g<y;g+=3,v+=2){const w=r[g]*2,S=r[g+1]*2,_=r[g+2]*2,x=t[w],E=t[w+1],k=t[S],I=t[S+1],A=t[_],D=t[_+1],L=k-x,T=I-E,M=A-x,N=D-E,B=(L*N-T*M)*2;if(Math.abs(B)<1e-9){if(s===void 0){s=o=0;for(const C of n)s+=t[C*2],o+=t[C*2+1];s/=n.length,o/=n.length}const O=1e9*Math.sign((s-x)*N-(o-E)*M);m=(x+A)/2-O*N,b=(E+D)/2+O*M}else{const O=1/B,C=L*L+T*T,F=M*M+N*N;m=x+(N*C-T*F)*O,b=E+(L*F-M*C)*O}a[v]=m,a[v+1]=b}let l=n[n.length-1],c,u=l*4,f,d=t[2*l],h,p=t[2*l+1];i.fill(0);for(let g=0;g<n.length;++g)l=n[g],c=u,f=d,h=p,u=l*4,d=t[2*l],p=t[2*l+1],i[c+2]=i[u]=h-p,i[c+3]=i[u+1]=d-f}render(t){const n=t==null?t=new Vl:void 0,{delaunay:{halfedges:r,inedges:i,hull:s},circumcenters:o,vectors:a}=this;if(s.length<=1)return null;for(let u=0,f=r.length;u<f;++u){const d=r[u];if(d<u)continue;const h=Math.floor(u/3)*2,p=Math.floor(d/3)*2,g=o[h],v=o[h+1],y=o[p],m=o[p+1];this._renderSegment(g,v,y,m,t)}let l,c=s[s.length-1];for(let u=0;u<s.length;++u){l=c,c=s[u];const f=Math.floor(i[c]/3)*2,d=o[f],h=o[f+1],p=l*4,g=this._project(d,h,a[p+2],a[p+3]);g&&this._renderSegment(d,h,g[0],g[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new Vl:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const r=n==null?n=new Vl:void 0,i=this._clip(t);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let s=i.length;for(;i[0]===i[s-2]&&i[1]===i[s-1]&&s>1;)s-=2;for(let o=2;o<s;o+=2)(i[o]!==i[o-2]||i[o+1]!==i[o-1])&&n.lineTo(i[o],i[o+1]);return n.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,r=t.length/2;n<r;++n){const i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(t){const n=new $S;return this.renderCell(t,n),n.value()}_renderSegment(t,n,r,i,s){let o;const a=this._regioncode(t,n),l=this._regioncode(r,i);a===0&&l===0?(s.moveTo(t,n),s.lineTo(r,i)):(o=this._clipSegment(t,n,r,i,a,l))&&(s.moveTo(o[0],o[1]),s.lineTo(o[2],o[3]))}contains(t,n,r){return n=+n,n!==n||(r=+r,r!==r)?!1:this.delaunay._step(t,n,r)===t}*neighbors(t){const n=this._clip(t);if(n)for(const r of this.delaunay.neighbors(t)){const i=this._clip(r);if(i){t:for(let s=0,o=n.length;s<o;s+=2)for(let a=0,l=i.length;a<l;a+=2)if(n[s]===i[a]&&n[s+1]===i[a+1]&&n[(s+2)%o]===i[(a+l-2)%l]&&n[(s+3)%o]===i[(a+l-1)%l]){yield r;break t}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:s}}=this,o=r[t];if(o===-1)return null;const a=[];let l=o;do{const c=Math.floor(l/3);if(a.push(n[c*2],n[c*2+1]),l=l%3===2?l-2:l+1,s[l]!==t)break;l=i[l]}while(l!==o&&l!==-1);return a}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:r}=this,i=t*4;return this._simplify(r[i]||r[i+1]?this._clipInfinite(t,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(t,n))}_clipFinite(t,n){const r=n.length;let i=null,s,o,a=n[r-2],l=n[r-1],c,u=this._regioncode(a,l),f,d=0;for(let h=0;h<r;h+=2)if(s=a,o=l,a=n[h],l=n[h+1],c=u,u=this._regioncode(a,l),c===0&&u===0)f=d,d=0,i?i.push(a,l):i=[a,l];else{let p,g,v,y,m;if(c===0){if((p=this._clipSegment(s,o,a,l,c,u))===null)continue;[g,v,y,m]=p}else{if((p=this._clipSegment(a,l,s,o,u,c))===null)continue;[y,m,g,v]=p,f=d,d=this._edgecode(g,v),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(g,v):i=[g,v]}f=d,d=this._edgecode(y,m),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(y,m):i=[y,m]}if(i)f=d,d=this._edgecode(i[0],i[1]),f&&d&&this._edge(t,f,d,i,i.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(t,n,r,i,s,o){const a=s<o;for(a&&([t,n,r,i,s,o]=[r,i,t,n,o,s]);;){if(s===0&&o===0)return a?[r,i,t,n]:[t,n,r,i];if(s&o)return null;let l,c,u=s||o;u&8?(l=t+(r-t)*(this.ymax-n)/(i-n),c=this.ymax):u&4?(l=t+(r-t)*(this.ymin-n)/(i-n),c=this.ymin):u&2?(c=n+(i-n)*(this.xmax-t)/(r-t),l=this.xmax):(c=n+(i-n)*(this.xmin-t)/(r-t),l=this.xmin),s?(t=l,n=c,s=this._regioncode(t,n)):(r=l,i=c,o=this._regioncode(r,i))}}_clipInfinite(t,n,r,i,s,o){let a=Array.from(n),l;if((l=this._project(a[0],a[1],r,i))&&a.unshift(l[0],l[1]),(l=this._project(a[a.length-2],a[a.length-1],s,o))&&a.push(l[0],l[1]),a=this._clipFinite(t,a))for(let c=0,u=a.length,f,d=this._edgecode(a[u-2],a[u-1]);c<u;c+=2)f=d,d=this._edgecode(a[c],a[c+1]),f&&d&&(c=this._edge(t,f,d,a,c),u=a.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(t,n,r,i,s){for(;n!==r;){let o,a;switch(n){case 5:n=4;continue;case 4:n=6,o=this.xmax,a=this.ymin;break;case 6:n=2;continue;case 2:n=10,o=this.xmax,a=this.ymax;break;case 10:n=8;continue;case 8:n=9,o=this.xmin,a=this.ymax;break;case 9:n=1;continue;case 1:n=5,o=this.xmin,a=this.ymin;break}(i[s]!==o||i[s+1]!==a)&&this.contains(t,o,a)&&(i.splice(s,0,o,a),s+=2)}return s}_project(t,n,r,i){let s=1/0,o,a,l;if(i<0){if(n<=this.ymin)return null;(o=(this.ymin-n)/i)<s&&(l=this.ymin,a=t+(s=o)*r)}else if(i>0){if(n>=this.ymax)return null;(o=(this.ymax-n)/i)<s&&(l=this.ymax,a=t+(s=o)*r)}if(r>0){if(t>=this.xmax)return null;(o=(this.xmax-t)/r)<s&&(a=this.xmax,l=n+(s=o)*i)}else if(r<0){if(t<=this.xmin)return null;(o=(this.xmin-t)/r)<s&&(a=this.xmin,l=n+(s=o)*i)}return[a,l]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const r=(n+2)%t.length,i=(n+4)%t.length;(t[n]===t[r]&&t[r]===t[i]||t[n+1]===t[r+1]&&t[r+1]===t[i+1])&&(t.splice(r,2),n-=2)}t.length||(t=null)}return t}};const xJ=2*Math.PI,Vc=Math.pow;function IJ(e){return e[0]}function TJ(e){return e[1]}function EJ(e){const{triangles:t,coords:n}=e;for(let r=0;r<t.length;r+=3){const i=2*t[r],s=2*t[r+1],o=2*t[r+2];if((n[o]-n[i])*(n[s+1]-n[i+1])-(n[s]-n[i])*(n[o+1]-n[i+1])>1e-10)return!1}return!0}function AJ(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class ll{static from(t,n=IJ,r=TJ,i){return new ll("length"in t?MJ(t,n,r,i):Float64Array.from($J(t,n,r,i)))}constructor(t){this._delaunator=new Qg(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&EJ(t)){this.collinear=Int32Array.from({length:n.length/2},(d,h)=>h).sort((d,h)=>n[2*d]-n[2*h]||n[2*d+1]-n[2*h+1]);const l=this.collinear[0],c=this.collinear[this.collinear.length-1],u=[n[2*l],n[2*l+1],n[2*c],n[2*c+1]],f=1e-8*Math.hypot(u[3]-u[1],u[2]-u[0]);for(let d=0,h=n.length/2;d<h;++d){const p=AJ(n[2*d],n[2*d+1],f);n[2*d]=p[0],n[2*d+1]=p[1]}this._delaunator=new Qg(n)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,s=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let l=0,c=r.length;l<c;++l){const u=s[l%3===2?l-2:l+1];(r[l]===-1||o[u]===-1)&&(o[u]=l)}for(let l=0,c=i.length;l<c;++l)a[i[l]]=l;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],o[i[0]]=1,i.length===2&&(o[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(t){return new SJ(this,t)}*neighbors(t){const{inedges:n,hull:r,_hullIndex:i,halfedges:s,triangles:o,collinear:a}=this;if(a){const f=a.indexOf(t);f>0&&(yield a[f-1]),f<a.length-1&&(yield a[f+1]);return}const l=n[t];if(l===-1)return;let c=l,u=-1;do{if(yield u=o[c],c=c%3===2?c-2:c+1,o[c]!==t)return;if(c=s[c],c===-1){const f=r[(i[t]+1)%r.length];f!==u&&(yield f);return}}while(c!==l)}find(t,n,r=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const i=r;let s;for(;(s=this._step(r,t,n))>=0&&s!==r&&s!==i;)r=s;return s}_step(t,n,r){const{inedges:i,hull:s,_hullIndex:o,halfedges:a,triangles:l,points:c}=this;if(i[t]===-1||!c.length)return(t+1)%(c.length>>1);let u=t,f=Vc(n-c[t*2],2)+Vc(r-c[t*2+1],2);const d=i[t];let h=d;do{let p=l[h];const g=Vc(n-c[p*2],2)+Vc(r-c[p*2+1],2);if(g<f&&(f=g,u=p),h=h%3===2?h-2:h+1,l[h]!==t)break;if(h=a[h],h===-1){if(h=s[(o[t]+1)%s.length],h!==p&&Vc(n-c[h*2],2)+Vc(r-c[h*2+1],2)<f)return h;break}}while(h!==d);return u}render(t){const n=t==null?t=new Vl:void 0,{points:r,halfedges:i,triangles:s}=this;for(let o=0,a=i.length;o<a;++o){const l=i[o];if(l<o)continue;const c=s[o]*2,u=s[l]*2;t.moveTo(r[c],r[c+1]),t.lineTo(r[u],r[u+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const r=t==null?t=new Vl:void 0,{points:i}=this;for(let s=0,o=i.length;s<o;s+=2){const a=i[s],l=i[s+1];t.moveTo(a+n,l),t.arc(a,l,n,0,xJ)}return r&&r.value()}renderHull(t){const n=t==null?t=new Vl:void 0,{hull:r,points:i}=this,s=r[0]*2,o=r.length;t.moveTo(i[s],i[s+1]);for(let a=1;a<o;++a){const l=2*r[a];t.lineTo(i[l],i[l+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new $S;return this.renderHull(t),t.value()}renderTriangle(t,n){const r=n==null?n=new Vl:void 0,{points:i,triangles:s}=this,o=s[t*=3]*2,a=s[t+1]*2,l=s[t+2]*2;return n.moveTo(i[o],i[o+1]),n.lineTo(i[a],i[a+1]),n.lineTo(i[l],i[l+1]),n.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,r=t.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new $S;return this.renderTriangle(t,n),n.value()}}function MJ(e,t,n,r){const i=e.length,s=new Float64Array(i*2);for(let o=0;o<i;++o){const a=e[o];s[o*2]=t.call(r,a,o,e),s[o*2+1]=n.call(r,a,o,e)}return s}function*$J(e,t,n,r){let i=0;for(const s of e)yield t.call(r,s,i,e),yield n.call(r,s,i,e),++i}function NJ(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Kg(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function Mf(e){return e=Kg(Math.abs(e)),e?e[1]:NaN}function kJ(e,t){return function(n,r){for(var i=n.length,s=[],o=0,a=e[0],l=0;i>0&&a>0&&(l+a+1>r&&(a=Math.max(1,r-l)),s.push(n.substring(i-=a,i+a)),!((l+=a+1)>r));)a=e[o=(o+1)%e.length];return s.reverse().join(t)}}function DJ(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var OJ=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function bp(e){if(!(t=OJ.exec(e)))throw new Error("invalid format: "+e);var t;return new M3({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}bp.prototype=M3.prototype;function M3(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}M3.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function FJ(e){t:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break t;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var eB;function BJ(e,t){var n=Kg(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(eB=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+Kg(e,Math.max(0,t+s-1))[0]}function S6(e,t){var n=Kg(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const x6={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:NJ,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>S6(e*100,t),r:S6,s:BJ,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function I6(e){return e}var T6=Array.prototype.map,E6=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function LJ(e){var t=e.grouping===void 0||e.thousands===void 0?I6:kJ(T6.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?I6:DJ(T6.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function c(f){f=bp(f);var d=f.fill,h=f.align,p=f.sign,g=f.symbol,v=f.zero,y=f.width,m=f.comma,b=f.precision,w=f.trim,S=f.type;S==="n"?(m=!0,S="g"):x6[S]||(b===void 0&&(b=12),w=!0,S="g"),(v||d==="0"&&h==="=")&&(v=!0,d="0",h="=");var _=g==="$"?n:g==="#"&&/[boxX]/.test(S)?"0"+S.toLowerCase():"",x=g==="$"?r:/[%p]/.test(S)?o:"",E=x6[S],k=/[defgprs%]/.test(S);b=b===void 0?6:/[gprs]/.test(S)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function I(A){var D=_,L=x,T,M,N;if(S==="c")L=E(A)+L,A="";else{A=+A;var B=A<0||1/A<0;if(A=isNaN(A)?l:E(Math.abs(A),b),w&&(A=FJ(A)),B&&+A==0&&p!=="+"&&(B=!1),D=(B?p==="("?p:a:p==="-"||p==="("?"":p)+D,L=(S==="s"?E6[8+eB/3]:"")+L+(B&&p==="("?")":""),k){for(T=-1,M=A.length;++T<M;)if(N=A.charCodeAt(T),48>N||N>57){L=(N===46?i+A.slice(T+1):A.slice(T))+L,A=A.slice(0,T);break}}}m&&!v&&(A=t(A,1/0));var O=D.length+A.length+L.length,C=O<y?new Array(y-O+1).join(d):"";switch(m&&v&&(A=t(C+A,C.length?y-L.length:1/0),C=""),h){case"<":A=D+A+L+C;break;case"=":A=D+C+A+L;break;case"^":A=C.slice(0,O=C.length>>1)+D+A+L+C.slice(O);break;default:A=C+D+A+L;break}return s(A)}return I.toString=function(){return f+""},I}function u(f,d){var h=c((f=bp(f),f.type="f",f)),p=Math.max(-8,Math.min(8,Math.floor(Mf(d)/3)))*3,g=Math.pow(10,-p),v=E6[8+p/3];return function(y){return h(g*y)+v}}return{format:c,formatPrefix:u}}var S0,rd,nB;RJ({thousands:",",grouping:[3],currency:["$",""]});function RJ(e){return S0=LJ(e),rd=S0.format,nB=S0.formatPrefix,S0}function CJ(e){return Math.max(0,-Mf(Math.abs(e)))}function UJ(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Mf(t)/3)))*3-Mf(Math.abs(e)))}function PJ(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Mf(t)-Mf(e))+1}var yt=1e-6,Zg=1e-12,Rt=Math.PI,Ge=Rt/2,A6=Rt/4,Yr=Rt*2,En=180/Rt,Kt=Rt/180,ne=Math.abs,id=Math.atan,Wi=Math.atan2,vt=Math.cos,x0=Math.ceil,rB=Math.exp,NS=Math.hypot,Jg=Math.log,s_=Math.pow,lt=Math.sin,ui=Math.sign||function(e){return e>0?1:e<0?-1:0},sr=Math.sqrt,$3=Math.tan;function iB(e){return e>1?0:e<-1?Rt:Math.acos(e)}function xr(e){return e>1?Ge:e<-1?-Ge:Math.asin(e)}function Rr(){}function t1(e,t){e&&$6.hasOwnProperty(e.type)&&$6[e.type](e,t)}var M6={Feature:function(e,t){t1(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)t1(n[r].geometry,t)}},$6={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){kS(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)kS(n[r],t,0)},Polygon:function(e,t){N6(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)N6(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)t1(n[r],t)}};function kS(e,t,n){var r=-1,i=e.length-n,s;for(t.lineStart();++r<i;)s=e[r],t.point(s[0],s[1],s[2]);t.lineEnd()}function N6(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)kS(e[n],t,1);t.polygonEnd()}function ha(e,t){e&&M6.hasOwnProperty(e.type)?M6[e.type](e,t):t1(e,t)}function DS(e){return[Wi(e[1],e[0]),xr(e[2])]}function $f(e){var t=e[0],n=e[1],r=vt(n);return[r*vt(t),r*lt(t),lt(n)]}function I0(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function e1(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function o_(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function T0(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function OS(e){var t=sr(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var rh,n1,r1,i1,s1,o1,a1,l1,FS,BS,LS,sB,oB,Xn,Qn,Kn,Ri={sphere:Rr,point:N3,lineStart:k6,lineEnd:D6,polygonStart:function(){Ri.lineStart=VJ,Ri.lineEnd=YJ},polygonEnd:function(){Ri.lineStart=k6,Ri.lineEnd=D6}};function N3(e,t){e*=Kt,t*=Kt;var n=vt(t);hy(n*vt(e),n*lt(e),lt(t))}function hy(e,t,n){++rh,r1+=(e-r1)/rh,i1+=(t-i1)/rh,s1+=(n-s1)/rh}function k6(){Ri.point=zJ}function zJ(e,t){e*=Kt,t*=Kt;var n=vt(t);Xn=n*vt(e),Qn=n*lt(e),Kn=lt(t),Ri.point=jJ,hy(Xn,Qn,Kn)}function jJ(e,t){e*=Kt,t*=Kt;var n=vt(t),r=n*vt(e),i=n*lt(e),s=lt(t),o=Wi(sr((o=Qn*s-Kn*i)*o+(o=Kn*r-Xn*s)*o+(o=Xn*i-Qn*r)*o),Xn*r+Qn*i+Kn*s);n1+=o,o1+=o*(Xn+(Xn=r)),a1+=o*(Qn+(Qn=i)),l1+=o*(Kn+(Kn=s)),hy(Xn,Qn,Kn)}function D6(){Ri.point=N3}function VJ(){Ri.point=qJ}function YJ(){aB(sB,oB),Ri.point=N3}function qJ(e,t){sB=e,oB=t,e*=Kt,t*=Kt,Ri.point=aB;var n=vt(t);Xn=n*vt(e),Qn=n*lt(e),Kn=lt(t),hy(Xn,Qn,Kn)}function aB(e,t){e*=Kt,t*=Kt;var n=vt(t),r=n*vt(e),i=n*lt(e),s=lt(t),o=Qn*s-Kn*i,a=Kn*r-Xn*s,l=Xn*i-Qn*r,c=NS(o,a,l),u=xr(c),f=c&&-u/c;FS.add(f*o),BS.add(f*a),LS.add(f*l),n1+=u,o1+=u*(Xn+(Xn=r)),a1+=u*(Qn+(Qn=i)),l1+=u*(Kn+(Kn=s)),hy(Xn,Qn,Kn)}function WJ(e){rh=n1=r1=i1=s1=o1=a1=l1=0,FS=new $s,BS=new $s,LS=new $s,ha(e,Ri);var t=+FS,n=+BS,r=+LS,i=NS(t,n,r);return i<Zg&&(t=o1,n=a1,r=l1,n1<yt&&(t=r1,n=i1,r=s1),i=NS(t,n,r),i<Zg)?[NaN,NaN]:[Wi(n,t)*En,xr(r/i)*En]}function RS(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function CS(e,t){return ne(e)>Rt&&(e-=Math.round(e/Yr)*Yr),[e,t]}CS.invert=CS;function lB(e,t,n){return(e%=Yr)?t||n?RS(F6(e),B6(t,n)):F6(e):t||n?B6(t,n):CS}function O6(e){return function(t,n){return t+=e,ne(t)>Rt&&(t-=Math.round(t/Yr)*Yr),[t,n]}}function F6(e){var t=O6(e);return t.invert=O6(-e),t}function B6(e,t){var n=vt(e),r=lt(e),i=vt(t),s=lt(t);function o(a,l){var c=vt(l),u=vt(a)*c,f=lt(a)*c,d=lt(l),h=d*n+u*r;return[Wi(f*i-h*s,u*n-d*r),xr(h*i+f*s)]}return o.invert=function(a,l){var c=vt(l),u=vt(a)*c,f=lt(a)*c,d=lt(l),h=d*i-f*s;return[Wi(f*i+d*s,u*n+h*r),xr(h*n-u*r)]},o}function HJ(e){e=lB(e[0]*Kt,e[1]*Kt,e.length>2?e[2]*Kt:0);function t(n){return n=e(n[0]*Kt,n[1]*Kt),n[0]*=En,n[1]*=En,n}return t.invert=function(n){return n=e.invert(n[0]*Kt,n[1]*Kt),n[0]*=En,n[1]*=En,n},t}function GJ(e,t,n,r,i,s){if(n){var o=vt(t),a=lt(t),l=r*n;i==null?(i=t+r*Yr,s=t-l/2):(i=L6(o,i),s=L6(o,s),(r>0?i<s:i>s)&&(i+=r*Yr));for(var c,u=i;r>0?u>s:u<s;u-=l)c=DS([o,-a*vt(u),-a*lt(u)]),e.point(c[0],c[1])}}function L6(e,t){t=$f(t),t[0]-=e,OS(t);var n=iB(-t[1]);return((-t[2]<0?-n:n)+Yr-yt)%Yr}function cB(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:Rr,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function Sm(e,t){return ne(e[0]-t[0])<yt&&ne(e[1]-t[1])<yt}function E0(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function uB(e,t,n,r,i){var s=[],o=[],a,l;if(e.forEach(function(p){if(!((g=p.length-1)<=0)){var g,v=p[0],y=p[g],m;if(Sm(v,y)){if(!v[2]&&!y[2]){for(i.lineStart(),a=0;a<g;++a)i.point((v=p[a])[0],v[1]);i.lineEnd();return}y[0]+=2*yt}s.push(m=new E0(v,p,null,!0)),o.push(m.o=new E0(v,null,m,!1)),s.push(m=new E0(y,p,null,!1)),o.push(m.o=new E0(y,null,m,!0))}}),!!s.length){for(o.sort(t),R6(s),R6(o),a=0,l=o.length;a<l;++a)o[a].e=n=!n;for(var c=s[0],u,f;;){for(var d=c,h=!0;d.v;)if((d=d.n)===c)return;u=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(a=0,l=u.length;a<l;++a)i.point((f=u[a])[0],f[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(h)for(u=d.p.z,a=u.length-1;a>=0;--a)i.point((f=u[a])[0],f[1]);else r(d.x,d.p.x,-1,i);d=d.p}d=d.o,u=d.z,h=!h}while(!d.v);i.lineEnd()}}}function R6(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function a_(e){return ne(e[0])<=Rt?e[0]:ui(e[0])*((ne(e[0])+Rt)%Yr-Rt)}function XJ(e,t){var n=a_(t),r=t[1],i=lt(r),s=[lt(n),-vt(n),0],o=0,a=0,l=new $s;i===1?r=Ge+yt:i===-1&&(r=-Ge-yt);for(var c=0,u=e.length;c<u;++c)if(d=(f=e[c]).length)for(var f,d,h=f[d-1],p=a_(h),g=h[1]/2+A6,v=lt(g),y=vt(g),m=0;m<d;++m,p=w,v=_,y=x,h=b){var b=f[m],w=a_(b),S=b[1]/2+A6,_=lt(S),x=vt(S),E=w-p,k=E>=0?1:-1,I=k*E,A=I>Rt,D=v*_;if(l.add(Wi(D*k*lt(I),y*x+D*vt(I))),o+=A?E+k*Yr:E,A^p>=n^w>=n){var L=e1($f(h),$f(b));OS(L);var T=e1(s,L);OS(T);var M=(A^E>=0?-1:1)*xr(T[2]);(r>M||r===M&&(L[0]||L[1]))&&(a+=A^E>=0?1:-1)}}return(o<-yt||o<yt&&l<-Zg)^a&1}function fB(e,t,n,r){return function(i){var s=t(i),o=cB(),a=t(o),l=!1,c,u,f,d={point:h,lineStart:g,lineEnd:v,polygonStart:function(){d.point=y,d.lineStart=m,d.lineEnd=b,u=[],c=[]},polygonEnd:function(){d.point=h,d.lineStart=g,d.lineEnd=v,u=hF(u);var w=XJ(c,r);u.length?(l||(i.polygonStart(),l=!0),uB(u,KJ,w,n,i)):w&&(l||(i.polygonStart(),l=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),l&&(i.polygonEnd(),l=!1),u=c=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(w,S){e(w,S)&&i.point(w,S)}function p(w,S){s.point(w,S)}function g(){d.point=p,s.lineStart()}function v(){d.point=h,s.lineEnd()}function y(w,S){f.push([w,S]),a.point(w,S)}function m(){a.lineStart(),f=[]}function b(){y(f[0][0],f[0][1]),a.lineEnd();var w=a.clean(),S=o.result(),_,x=S.length,E,k,I;if(f.pop(),c.push(f),f=null,!!x){if(w&1){if(k=S[0],(E=k.length-1)>0){for(l||(i.polygonStart(),l=!0),i.lineStart(),_=0;_<E;++_)i.point((I=k[_])[0],I[1]);i.lineEnd()}return}x>1&&w&2&&S.push(S.pop().concat(S.shift())),u.push(S.filter(QJ))}}return d}}function QJ(e){return e.length>1}function KJ(e,t){return((e=e.x)[0]<0?e[1]-Ge-yt:Ge-e[1])-((t=t.x)[0]<0?t[1]-Ge-yt:Ge-t[1])}const C6=fB(function(){return!0},ZJ,ttt,[-Rt,-Ge]);function ZJ(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(s,o){var a=s>0?Rt:-Rt,l=ne(s-t);ne(l-Rt)<yt?(e.point(t,n=(n+o)/2>0?Ge:-Ge),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),e.point(s,n),i=0):r!==a&&l>=Rt&&(ne(t-r)<yt&&(t-=r*yt),ne(s-a)<yt&&(s-=a*yt),n=JJ(t,n,s,o),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),i=0),e.point(t=s,n=o),r=a},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function JJ(e,t,n,r){var i,s,o=lt(e-n);return ne(o)>yt?id((lt(t)*(s=vt(r))*lt(n)-lt(r)*(i=vt(t))*lt(e))/(i*s*o)):(t+r)/2}function ttt(e,t,n,r){var i;if(e==null)i=n*Ge,r.point(-Rt,i),r.point(0,i),r.point(Rt,i),r.point(Rt,0),r.point(Rt,-i),r.point(0,-i),r.point(-Rt,-i),r.point(-Rt,0),r.point(-Rt,i);else if(ne(e[0]-t[0])>yt){var s=e[0]<t[0]?Rt:-Rt;i=n*s/2,r.point(-s,i),r.point(0,i),r.point(s,i)}else r.point(t[0],t[1])}function ett(e){var t=vt(e),n=6*Kt,r=t>0,i=ne(t)>yt;function s(u,f,d,h){GJ(h,e,n,d,u,f)}function o(u,f){return vt(u)*vt(f)>t}function a(u){var f,d,h,p,g;return{lineStart:function(){p=h=!1,g=1},point:function(v,y){var m=[v,y],b,w=o(v,y),S=r?w?0:c(v,y):w?c(v+(v<0?Rt:-Rt),y):0;if(!f&&(p=h=w)&&u.lineStart(),w!==h&&(b=l(f,m),(!b||Sm(f,b)||Sm(m,b))&&(m[2]=1)),w!==h)g=0,w?(u.lineStart(),b=l(m,f),u.point(b[0],b[1])):(b=l(f,m),u.point(b[0],b[1],2),u.lineEnd()),f=b;else if(i&&f&&r^w){var _;!(S&d)&&(_=l(m,f,!0))&&(g=0,r?(u.lineStart(),u.point(_[0][0],_[0][1]),u.point(_[1][0],_[1][1]),u.lineEnd()):(u.point(_[1][0],_[1][1]),u.lineEnd(),u.lineStart(),u.point(_[0][0],_[0][1],3)))}w&&(!f||!Sm(f,m))&&u.point(m[0],m[1]),f=m,h=w,d=S},lineEnd:function(){h&&u.lineEnd(),f=null},clean:function(){return g|(p&&h)<<1}}}function l(u,f,d){var h=$f(u),p=$f(f),g=[1,0,0],v=e1(h,p),y=I0(v,v),m=v[0],b=y-m*m;if(!b)return!d&&u;var w=t*y/b,S=-t*m/b,_=e1(g,v),x=T0(g,w),E=T0(v,S);o_(x,E);var k=_,I=I0(x,k),A=I0(k,k),D=I*I-A*(I0(x,x)-1);if(!(D<0)){var L=sr(D),T=T0(k,(-I-L)/A);if(o_(T,x),T=DS(T),!d)return T;var M=u[0],N=f[0],B=u[1],O=f[1],C;N<M&&(C=M,M=N,N=C);var F=N-M,P=ne(F-Rt)<yt,z=P||F<yt;if(!P&&O<B&&(C=B,B=O,O=C),z?P?B+O>0^T[1]<(ne(T[0]-M)<yt?B:O):B<=T[1]&&T[1]<=O:F>Rt^(M<=T[0]&&T[0]<=N)){var H=T0(k,(-I+L)/A);return o_(H,x),[T,DS(H)]}}}function c(u,f){var d=r?e:Rt-e,h=0;return u<-d?h|=1:u>d&&(h|=2),f<-d?h|=4:f>d&&(h|=8),h}return fB(o,a,s,r?[0,-e]:[-Rt,e-Rt])}function ntt(e,t,n,r,i,s){var o=e[0],a=e[1],l=t[0],c=t[1],u=0,f=1,d=l-o,h=c-a,p;if(p=n-o,!(!d&&p>0)){if(p/=d,d<0){if(p<u)return;p<f&&(f=p)}else if(d>0){if(p>f)return;p>u&&(u=p)}if(p=i-o,!(!d&&p<0)){if(p/=d,d<0){if(p>f)return;p>u&&(u=p)}else if(d>0){if(p<u)return;p<f&&(f=p)}if(p=r-a,!(!h&&p>0)){if(p/=h,h<0){if(p<u)return;p<f&&(f=p)}else if(h>0){if(p>f)return;p>u&&(u=p)}if(p=s-a,!(!h&&p<0)){if(p/=h,h<0){if(p>f)return;p>u&&(u=p)}else if(h>0){if(p<u)return;p<f&&(f=p)}return u>0&&(e[0]=o+u*d,e[1]=a+u*h),f<1&&(t[0]=o+f*d,t[1]=a+f*h),!0}}}}}var ih=1e9,A0=-ih;function dB(e,t,n,r){function i(c,u){return e<=c&&c<=n&&t<=u&&u<=r}function s(c,u,f,d){var h=0,p=0;if(c==null||(h=o(c,f))!==(p=o(u,f))||l(c,u)<0^f>0)do d.point(h===0||h===3?e:n,h>1?r:t);while((h=(h+f+4)%4)!==p);else d.point(u[0],u[1])}function o(c,u){return ne(c[0]-e)<yt?u>0?0:3:ne(c[0]-n)<yt?u>0?2:1:ne(c[1]-t)<yt?u>0?1:0:u>0?3:2}function a(c,u){return l(c.x,u.x)}function l(c,u){var f=o(c,1),d=o(u,1);return f!==d?f-d:f===0?u[1]-c[1]:f===1?c[0]-u[0]:f===2?c[1]-u[1]:u[0]-c[0]}return function(c){var u=c,f=cB(),d,h,p,g,v,y,m,b,w,S,_,x={point:E,lineStart:D,lineEnd:L,polygonStart:I,polygonEnd:A};function E(M,N){i(M,N)&&u.point(M,N)}function k(){for(var M=0,N=0,B=h.length;N<B;++N)for(var O=h[N],C=1,F=O.length,P=O[0],z,H,X=P[0],tt=P[1];C<F;++C)z=X,H=tt,P=O[C],X=P[0],tt=P[1],H<=r?tt>r&&(X-z)*(r-H)>(tt-H)*(e-z)&&++M:tt<=r&&(X-z)*(r-H)<(tt-H)*(e-z)&&--M;return M}function I(){u=f,d=[],h=[],_=!0}function A(){var M=k(),N=_&&M,B=(d=hF(d)).length;(N||B)&&(c.polygonStart(),N&&(c.lineStart(),s(null,null,1,c),c.lineEnd()),B&&uB(d,a,M,s,c),c.polygonEnd()),u=c,d=h=p=null}function D(){x.point=T,h&&h.push(p=[]),S=!0,w=!1,m=b=NaN}function L(){d&&(T(g,v),y&&w&&f.rejoin(),d.push(f.result())),x.point=E,w&&u.lineEnd()}function T(M,N){var B=i(M,N);if(h&&p.push([M,N]),S)g=M,v=N,y=B,S=!1,B&&(u.lineStart(),u.point(M,N));else if(B&&w)u.point(M,N);else{var O=[m=Math.max(A0,Math.min(ih,m)),b=Math.max(A0,Math.min(ih,b))],C=[M=Math.max(A0,Math.min(ih,M)),N=Math.max(A0,Math.min(ih,N))];ntt(O,C,e,t,n,r)?(w||(u.lineStart(),u.point(O[0],O[1])),u.point(C[0],C[1]),B||u.lineEnd(),_=!1):B&&(u.lineStart(),u.point(M,N),_=!1)}m=M,b=N,w=B}return x}}function U6(e,t,n){var r=Lr(e,t-yt,n).concat(t);return function(i){return r.map(function(s){return[i,s]})}}function P6(e,t,n){var r=Lr(e,t-yt,n).concat(t);return function(i){return r.map(function(s){return[s,i]})}}function rtt(){var e,t,n,r,i,s,o,a,l=10,c=l,u=90,f=360,d,h,p,g,v=2.5;function y(){return{type:"MultiLineString",coordinates:m()}}function m(){return Lr(x0(r/u)*u,n,u).map(p).concat(Lr(x0(a/f)*f,o,f).map(g)).concat(Lr(x0(t/l)*l,e,l).filter(function(b){return ne(b%u)>yt}).map(d)).concat(Lr(x0(s/c)*c,i,c).filter(function(b){return ne(b%f)>yt}).map(h))}return y.lines=function(){return m().map(function(b){return{type:"LineString",coordinates:b}})},y.outline=function(){return{type:"Polygon",coordinates:[p(r).concat(g(o).slice(1),p(n).reverse().slice(1),g(a).reverse().slice(1))]}},y.extent=function(b){return arguments.length?y.extentMajor(b).extentMinor(b):y.extentMinor()},y.extentMajor=function(b){return arguments.length?(r=+b[0][0],n=+b[1][0],a=+b[0][1],o=+b[1][1],r>n&&(b=r,r=n,n=b),a>o&&(b=a,a=o,o=b),y.precision(v)):[[r,a],[n,o]]},y.extentMinor=function(b){return arguments.length?(t=+b[0][0],e=+b[1][0],s=+b[0][1],i=+b[1][1],t>e&&(b=t,t=e,e=b),s>i&&(b=s,s=i,i=b),y.precision(v)):[[t,s],[e,i]]},y.step=function(b){return arguments.length?y.stepMajor(b).stepMinor(b):y.stepMinor()},y.stepMajor=function(b){return arguments.length?(u=+b[0],f=+b[1],y):[u,f]},y.stepMinor=function(b){return arguments.length?(l=+b[0],c=+b[1],y):[l,c]},y.precision=function(b){return arguments.length?(v=+b,d=U6(s,i,90),h=P6(t,e,v),p=U6(a,o,90),g=P6(r,n,v),y):v},y.extentMajor([[-180,-90+yt],[180,90-yt]]).extentMinor([[-180,-80-yt],[180,80+yt]])}function itt(){return rtt()()}const US=e=>e;var l_=new $s,PS=new $s,hB,pB,zS,jS,pa={point:Rr,lineStart:Rr,lineEnd:Rr,polygonStart:function(){pa.lineStart=stt,pa.lineEnd=att},polygonEnd:function(){pa.lineStart=pa.lineEnd=pa.point=Rr,l_.add(ne(PS)),PS=new $s},result:function(){var e=l_/2;return l_=new $s,e}};function stt(){pa.point=ott}function ott(e,t){pa.point=yB,hB=zS=e,pB=jS=t}function yB(e,t){PS.add(jS*e-zS*t),zS=e,jS=t}function att(){yB(hB,pB)}const z6=pa;var Nf=1/0,c1=Nf,vp=-Nf,u1=vp,ltt={point:ctt,lineStart:Rr,lineEnd:Rr,polygonStart:Rr,polygonEnd:Rr,result:function(){var e=[[Nf,c1],[vp,u1]];return vp=u1=-(c1=Nf=1/0),e}};function ctt(e,t){e<Nf&&(Nf=e),e>vp&&(vp=e),t<c1&&(c1=t),t>u1&&(u1=t)}const f1=ltt;var VS=0,YS=0,sh=0,d1=0,h1=0,Du=0,qS=0,WS=0,oh=0,mB,gB,bs,vs,Li={point:wc,lineStart:j6,lineEnd:V6,polygonStart:function(){Li.lineStart=dtt,Li.lineEnd=htt},polygonEnd:function(){Li.point=wc,Li.lineStart=j6,Li.lineEnd=V6},result:function(){var e=oh?[qS/oh,WS/oh]:Du?[d1/Du,h1/Du]:sh?[VS/sh,YS/sh]:[NaN,NaN];return VS=YS=sh=d1=h1=Du=qS=WS=oh=0,e}};function wc(e,t){VS+=e,YS+=t,++sh}function j6(){Li.point=utt}function utt(e,t){Li.point=ftt,wc(bs=e,vs=t)}function ftt(e,t){var n=e-bs,r=t-vs,i=sr(n*n+r*r);d1+=i*(bs+e)/2,h1+=i*(vs+t)/2,Du+=i,wc(bs=e,vs=t)}function V6(){Li.point=wc}function dtt(){Li.point=ptt}function htt(){bB(mB,gB)}function ptt(e,t){Li.point=bB,wc(mB=bs=e,gB=vs=t)}function bB(e,t){var n=e-bs,r=t-vs,i=sr(n*n+r*r);d1+=i*(bs+e)/2,h1+=i*(vs+t)/2,Du+=i,i=vs*e-bs*t,qS+=i*(bs+e),WS+=i*(vs+t),oh+=i*3,wc(bs=e,vs=t)}const Y6=Li;function vB(e){this._context=e}vB.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,Yr);break}}},result:Rr};var HS=new $s,c_,wB,_B,ah,lh,p1={point:Rr,lineStart:function(){p1.point=ytt},lineEnd:function(){c_&&SB(wB,_B),p1.point=Rr},polygonStart:function(){c_=!0},polygonEnd:function(){c_=null},result:function(){var e=+HS;return HS=new $s,e}};function ytt(e,t){p1.point=SB,wB=ah=e,_B=lh=t}function SB(e,t){ah-=e,lh-=t,HS.add(sr(ah*ah+lh*lh)),ah=e,lh=t}const q6=p1;let W6,y1,H6,G6;class X6{constructor(t){this._append=t==null?xB:mtt(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==H6||this._append!==y1){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,H6=r,y1=this._append,G6=this._,this._=i}this._+=G6;break}}}result(){const t=this._;return this._="",t.length?t:null}}function xB(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function mtt(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return xB;if(t!==W6){const n=10**t;W6=t,y1=function(i){let s=1;this._+=i[0];for(const o=i.length;s<o;++s)this._+=Math.round(arguments[s]*n)/n+i[s]}}return y1}function cl(e,t){let n=3,r=4.5,i,s;function o(a){return a&&(typeof r=="function"&&s.pointRadius(+r.apply(this,arguments)),ha(a,i(s))),s.result()}return o.area=function(a){return ha(a,i(z6)),z6.result()},o.measure=function(a){return ha(a,i(q6)),q6.result()},o.bounds=function(a){return ha(a,i(f1)),f1.result()},o.centroid=function(a){return ha(a,i(Y6)),Y6.result()},o.projection=function(a){return arguments.length?(i=a==null?(e=null,US):(e=a).stream,o):e},o.context=function(a){return arguments.length?(s=a==null?(t=null,new X6(n)):new vB(t=a),typeof r!="function"&&s.pointRadius(r),o):t},o.pointRadius=function(a){return arguments.length?(r=typeof a=="function"?a:(s.pointRadius(+a),+a),o):r},o.digits=function(a){if(!arguments.length)return n;if(a==null)n=null;else{const l=Math.floor(a);if(!(l>=0))throw new RangeError(`invalid digits: ${a}`);n=l}return t===null&&(s=new X6(n)),o},o.projection(e).digits(n).context(t)}function m1(e){return{stream:uv(e)}}function uv(e){return function(t){var n=new GS;for(var r in e)n[r]=e[r];return n.stream=t,n}}function GS(){}GS.prototype={constructor:GS,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function k3(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),ha(n,e.stream(f1)),t(f1.result()),r!=null&&e.clipExtent(r),e}function D3(e,t,n){return k3(e,function(r){var i=t[1][0]-t[0][0],s=t[1][1]-t[0][1],o=Math.min(i/(r[1][0]-r[0][0]),s/(r[1][1]-r[0][1])),a=+t[0][0]+(i-o*(r[1][0]+r[0][0]))/2,l=+t[0][1]+(s-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([a,l])},n)}function IB(e,t,n){return D3(e,[[0,0],t],n)}function TB(e,t,n){return k3(e,function(r){var i=+t,s=i/(r[1][0]-r[0][0]),o=(i-s*(r[1][0]+r[0][0]))/2,a=-s*r[0][1];e.scale(150*s).translate([o,a])},n)}function EB(e,t,n){return k3(e,function(r){var i=+t,s=i/(r[1][1]-r[0][1]),o=-s*r[0][0],a=(i-s*(r[1][1]+r[0][1]))/2;e.scale(150*s).translate([o,a])},n)}var Q6=16,gtt=vt(30*Kt);function K6(e,t){return+t?vtt(e,t):btt(e)}function btt(e){return uv({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function vtt(e,t){function n(r,i,s,o,a,l,c,u,f,d,h,p,g,v){var y=c-r,m=u-i,b=y*y+m*m;if(b>4*t&&g--){var w=o+d,S=a+h,_=l+p,x=sr(w*w+S*S+_*_),E=xr(_/=x),k=ne(ne(_)-1)<yt||ne(s-f)<yt?(s+f)/2:Wi(S,w),I=e(k,E),A=I[0],D=I[1],L=A-r,T=D-i,M=m*L-y*T;(M*M/b>t||ne((y*L+m*T)/b-.5)>.3||o*d+a*h+l*p<gtt)&&(n(r,i,s,o,a,l,A,D,k,w/=x,S/=x,_,g,v),v.point(A,D),n(A,D,k,w,S,_,c,u,f,d,h,p,g,v))}}return function(r){var i,s,o,a,l,c,u,f,d,h,p,g,v={point:y,lineStart:m,lineEnd:w,polygonStart:function(){r.polygonStart(),v.lineStart=S},polygonEnd:function(){r.polygonEnd(),v.lineStart=m}};function y(E,k){E=e(E,k),r.point(E[0],E[1])}function m(){f=NaN,v.point=b,r.lineStart()}function b(E,k){var I=$f([E,k]),A=e(E,k);n(f,d,u,h,p,g,f=A[0],d=A[1],u=E,h=I[0],p=I[1],g=I[2],Q6,r),r.point(f,d)}function w(){v.point=y,r.lineEnd()}function S(){m(),v.point=_,v.lineEnd=x}function _(E,k){b(i=E,k),s=f,o=d,a=h,l=p,c=g,v.point=b}function x(){n(f,d,u,h,p,g,s,o,i,a,l,c,Q6,r),v.lineEnd=w,w()}return v}}var wtt=uv({point:function(e,t){this.stream.point(e*Kt,t*Kt)}});function _tt(e){return uv({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function Stt(e,t,n,r,i){function s(o,a){return o*=r,a*=i,[t+e*o,n-e*a]}return s.invert=function(o,a){return[(o-t)/e*r,(n-a)/e*i]},s}function Z6(e,t,n,r,i,s){if(!s)return Stt(e,t,n,r,i);var o=vt(s),a=lt(s),l=o*e,c=a*e,u=o/e,f=a/e,d=(a*n-o*t)/e,h=(a*t+o*n)/e;function p(g,v){return g*=r,v*=i,[l*g-c*v+t,n-c*g-l*v]}return p.invert=function(g,v){return[r*(u*g-f*v+d),i*(h-f*g-u*v)]},p}function ul(e){return AB(function(){return e})()}function AB(e){var t,n=150,r=480,i=250,s=0,o=0,a=0,l=0,c=0,u,f=0,d=1,h=1,p=null,g=C6,v=null,y,m,b,w=US,S=.5,_,x,E,k,I;function A(M){return E(M[0]*Kt,M[1]*Kt)}function D(M){return M=E.invert(M[0],M[1]),M&&[M[0]*En,M[1]*En]}A.stream=function(M){return k&&I===M?k:k=wtt(_tt(u)(g(_(w(I=M)))))},A.preclip=function(M){return arguments.length?(g=M,p=void 0,T()):g},A.postclip=function(M){return arguments.length?(w=M,v=y=m=b=null,T()):w},A.clipAngle=function(M){return arguments.length?(g=+M?ett(p=M*Kt):(p=null,C6),T()):p*En},A.clipExtent=function(M){return arguments.length?(w=M==null?(v=y=m=b=null,US):dB(v=+M[0][0],y=+M[0][1],m=+M[1][0],b=+M[1][1]),T()):v==null?null:[[v,y],[m,b]]},A.scale=function(M){return arguments.length?(n=+M,L()):n},A.translate=function(M){return arguments.length?(r=+M[0],i=+M[1],L()):[r,i]},A.center=function(M){return arguments.length?(s=M[0]%360*Kt,o=M[1]%360*Kt,L()):[s*En,o*En]},A.rotate=function(M){return arguments.length?(a=M[0]%360*Kt,l=M[1]%360*Kt,c=M.length>2?M[2]%360*Kt:0,L()):[a*En,l*En,c*En]},A.angle=function(M){return arguments.length?(f=M%360*Kt,L()):f*En},A.reflectX=function(M){return arguments.length?(d=M?-1:1,L()):d<0},A.reflectY=function(M){return arguments.length?(h=M?-1:1,L()):h<0},A.precision=function(M){return arguments.length?(_=K6(x,S=M*M),T()):sr(S)},A.fitExtent=function(M,N){return D3(A,M,N)},A.fitSize=function(M,N){return IB(A,M,N)},A.fitWidth=function(M,N){return TB(A,M,N)},A.fitHeight=function(M,N){return EB(A,M,N)};function L(){var M=Z6(n,0,0,d,h,f).apply(null,t(s,o)),N=Z6(n,r-M[0],i-M[1],d,h,f);return u=lB(a,l,c),x=RS(t,N),E=RS(u,x),_=K6(x,S),T()}function T(){return k=I=null,A}return function(){return t=e.apply(this,arguments),A.invert=t.invert&&D,L()}}function O3(e){var t=0,n=Rt/3,r=AB(e),i=r(t,n);return i.parallels=function(s){return arguments.length?r(t=s[0]*Kt,n=s[1]*Kt):[t*En,n*En]},i}function xtt(e){var t=vt(e);function n(r,i){return[r*t,lt(i)/t]}return n.invert=function(r,i){return[r/t,xr(i*t)]},n}function Itt(e,t){var n=lt(e),r=(n+lt(t))/2;if(ne(r)<yt)return xtt(e);var i=1+n*(2*r-n),s=sr(i)/r;function o(a,l){var c=sr(i-2*r*lt(l))/r;return[c*lt(a*=r),s-c*vt(a)]}return o.invert=function(a,l){var c=s-l,u=Wi(a,ne(c))*ui(c);return c*r<0&&(u-=Rt*ui(a)*ui(c)),[u/r,xr((i-(a*a+c*c)*r*r)/(2*r))]},o}function g1(){return O3(Itt).scale(155.424).center([0,33.6442])}function MB(){return g1().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Ttt(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function Ett(){var e,t,n=MB(),r,i=g1().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s,o=g1().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,l,c={point:function(d,h){l=[d,h]}};function u(d){var h=d[0],p=d[1];return l=null,r.point(h,p),l||(s.point(h,p),l)||(a.point(h,p),l)}u.invert=function(d){var h=n.scale(),p=n.translate(),g=(d[0]-p[0])/h,v=(d[1]-p[1])/h;return(v>=.12&&v<.234&&g>=-.425&&g<-.214?i:v>=.166&&v<.234&&g>=-.214&&g<-.115?o:n).invert(d)},u.stream=function(d){return e&&t===d?e:e=Ttt([n.stream(t=d),i.stream(d),o.stream(d)])},u.precision=function(d){return arguments.length?(n.precision(d),i.precision(d),o.precision(d),f()):n.precision()},u.scale=function(d){return arguments.length?(n.scale(d),i.scale(d*.35),o.scale(d),u.translate(n.translate())):n.scale()},u.translate=function(d){if(!arguments.length)return n.translate();var h=n.scale(),p=+d[0],g=+d[1];return r=n.translate(d).clipExtent([[p-.455*h,g-.238*h],[p+.455*h,g+.238*h]]).stream(c),s=i.translate([p-.307*h,g+.201*h]).clipExtent([[p-.425*h+yt,g+.12*h+yt],[p-.214*h-yt,g+.234*h-yt]]).stream(c),a=o.translate([p-.205*h,g+.212*h]).clipExtent([[p-.214*h+yt,g+.166*h+yt],[p-.115*h-yt,g+.234*h-yt]]).stream(c),f()},u.fitExtent=function(d,h){return D3(u,d,h)},u.fitSize=function(d,h){return IB(u,d,h)},u.fitWidth=function(d,h){return TB(u,d,h)},u.fitHeight=function(d,h){return EB(u,d,h)};function f(){return e=t=null,u}return u.scale(1070)}function $B(e){return function(t,n){var r=vt(t),i=vt(n),s=e(r*i);return s===1/0?[2,0]:[s*i*lt(t),s*lt(n)]}}function py(e){return function(t,n){var r=sr(t*t+n*n),i=e(r),s=lt(i),o=vt(i);return[Wi(t*s,r*o),xr(r&&n*s/r)]}}var NB=$B(function(e){return sr(2/(1+e))});NB.invert=py(function(e){return 2*xr(e/2)});function Att(){return ul(NB).scale(124.75).clipAngle(180-.001)}var kB=$B(function(e){return(e=iB(e))&&e/lt(e)});kB.invert=py(function(e){return e});function Mtt(){return ul(kB).scale(79.4188).clipAngle(180-.001)}function fv(e,t){return[e,Jg($3((Ge+t)/2))]}fv.invert=function(e,t){return[e,2*id(rB(t))-Ge]};function $tt(){return DB(fv).scale(961/Yr)}function DB(e){var t=ul(e),n=t.center,r=t.scale,i=t.translate,s=t.clipExtent,o=null,a,l,c;t.scale=function(f){return arguments.length?(r(f),u()):r()},t.translate=function(f){return arguments.length?(i(f),u()):i()},t.center=function(f){return arguments.length?(n(f),u()):n()},t.clipExtent=function(f){return arguments.length?(f==null?o=a=l=c=null:(o=+f[0][0],a=+f[0][1],l=+f[1][0],c=+f[1][1]),u()):o==null?null:[[o,a],[l,c]]};function u(){var f=Rt*r(),d=t(HJ(t.rotate()).invert([0,0]));return s(o==null?[[d[0]-f,d[1]-f],[d[0]+f,d[1]+f]]:e===fv?[[Math.max(d[0]-f,o),a],[Math.min(d[0]+f,l),c]]:[[o,Math.max(d[1]-f,a)],[l,Math.min(d[1]+f,c)]])}return u()}function M0(e){return $3((Ge+e)/2)}function Ntt(e,t){var n=vt(e),r=e===t?lt(e):Jg(n/vt(t))/Jg(M0(t)/M0(e)),i=n*s_(M0(e),r)/r;if(!r)return fv;function s(o,a){i>0?a<-Ge+yt&&(a=-Ge+yt):a>Ge-yt&&(a=Ge-yt);var l=i/s_(M0(a),r);return[l*lt(r*o),i-l*vt(r*o)]}return s.invert=function(o,a){var l=i-a,c=ui(r)*sr(o*o+l*l),u=Wi(o,ne(l))*ui(l);return l*r<0&&(u-=Rt*ui(o)*ui(l)),[u/r,2*id(s_(i/c,1/r))-Ge]},s}function ktt(){return O3(Ntt).scale(109.5).parallels([30,30])}function b1(e,t){return[e,t]}b1.invert=b1;function Dtt(){return ul(b1).scale(152.63)}function Ott(e,t){var n=vt(e),r=e===t?lt(e):(n-vt(t))/(t-e),i=n/r+e;if(ne(r)<yt)return b1;function s(o,a){var l=i-a,c=r*o;return[l*lt(c),i-l*vt(c)]}return s.invert=function(o,a){var l=i-a,c=Wi(o,ne(l))*ui(l);return l*r<0&&(c-=Rt*ui(o)*ui(l)),[c/r,i-ui(r)*sr(o*o+l*l)]},s}function Ftt(){return O3(Ott).scale(131.154).center([0,13.9389])}var $h=1.340264,Nh=-.081106,kh=893e-6,Dh=.003796,v1=sr(3)/2,Btt=12;function OB(e,t){var n=xr(v1*lt(t)),r=n*n,i=r*r*r;return[e*vt(n)/(v1*($h+3*Nh*r+i*(7*kh+9*Dh*r))),n*($h+Nh*r+i*(kh+Dh*r))]}OB.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,s=0,o,a,l;s<Btt&&(a=n*($h+Nh*r+i*(kh+Dh*r))-t,l=$h+3*Nh*r+i*(7*kh+9*Dh*r),n-=o=a/l,r=n*n,i=r*r*r,!(ne(o)<Zg));++s);return[v1*e*($h+3*Nh*r+i*(7*kh+9*Dh*r))/vt(n),xr(lt(n)/v1)]};function Ltt(){return ul(OB).scale(177.158)}function FB(e,t){var n=vt(t),r=vt(e)*n;return[n*lt(e)/r,lt(t)/r]}FB.invert=py(id);function Rtt(){return ul(FB).scale(144.049).clipAngle(60)}function BB(e,t){return[vt(t)*lt(e),lt(t)]}BB.invert=py(xr);function Ctt(){return ul(BB).scale(249.5).clipAngle(90+yt)}function LB(e,t){var n=vt(t),r=1+vt(e)*n;return[n*lt(e)/r,lt(t)/r]}LB.invert=py(function(e){return 2*id(e)});function Utt(){return ul(LB).scale(250).clipAngle(142)}function RB(e,t){return[Jg($3((Ge+t)/2)),-e]}RB.invert=function(e,t){return[-t,2*id(rB(e))-Ge]};function Ptt(){var e=DB(RB),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}function ztt(e,t){return e.parent===t.parent?1:2}function jtt(e){return e.reduce(Vtt,0)/e.length}function Vtt(e,t){return e+t.x}function Ytt(e){return 1+e.reduce(qtt,0)}function qtt(e,t){return Math.max(e,t.y)}function Wtt(e){for(var t;t=e.children;)e=t[0];return e}function Htt(e){for(var t;t=e.children;)e=t[t.length-1];return e}function CB(){var e=ztt,t=1,n=1,r=!1;function i(s){var o,a=0;s.eachAfter(function(d){var h=d.children;h?(d.x=jtt(h),d.y=Ytt(h)):(d.x=o?a+=e(d,o):0,d.y=0,o=d)});var l=Wtt(s),c=Htt(s),u=l.x-e(l,c)/2,f=c.x+e(c,l)/2;return s.eachAfter(r?function(d){d.x=(d.x-s.x)*t,d.y=(s.y-d.y)*n}:function(d){d.x=(d.x-u)/(f-u)*t,d.y=(1-(s.y?d.y/s.y:1))*n})}return i.separation=function(s){return arguments.length?(e=s,i):e},i.size=function(s){return arguments.length?(r=!1,t=+s[0],n=+s[1],i):r?null:[t,n]},i.nodeSize=function(s){return arguments.length?(r=!0,t=+s[0],n=+s[1],i):r?[t,n]:null},i}function Gtt(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function Xtt(){return this.eachAfter(Gtt)}function Qtt(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function Ktt(e,t){for(var n=this,r=[n],i,s,o=-1;n=r.pop();)if(e.call(t,n,++o,this),i=n.children)for(s=i.length-1;s>=0;--s)r.push(i[s]);return this}function Ztt(e,t){for(var n=this,r=[n],i=[],s,o,a,l=-1;n=r.pop();)if(i.push(n),s=n.children)for(o=0,a=s.length;o<a;++o)r.push(s[o]);for(;n=i.pop();)e.call(t,n,++l,this);return this}function Jtt(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function tet(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function eet(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function net(e){for(var t=this,n=ret(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function ret(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function iet(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function set(){return Array.from(this)}function oet(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function aet(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*cet(){var e=this,t,n=[e],r,i,s;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,s=r.length;i<s;++i)n.push(r[i]);while(n.length)}function UB(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=det)):t===void 0&&(t=fet);for(var n=new kf(e),r,i=[n],s,o,a,l;r=i.pop();)if((o=t(r.data))&&(l=(o=Array.from(o)).length))for(r.children=o,a=l-1;a>=0;--a)i.push(s=o[a]=new kf(o[a])),s.parent=r,s.depth=r.depth+1;return n.eachBefore(PB)}function uet(){return UB(this).eachBefore(het)}function fet(e){return e.children}function det(e){return Array.isArray(e)?e[1]:null}function het(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function PB(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function kf(e){this.data=e,this.depth=this.height=0,this.parent=null}kf.prototype=UB.prototype={constructor:kf,count:Xtt,each:Qtt,eachAfter:Ztt,eachBefore:Ktt,find:Jtt,sum:tet,sort:eet,path:net,ancestors:iet,descendants:set,leaves:oet,links:aet,copy:uet,[Symbol.iterator]:cet};function u_(e){return e==null?null:pet(e)}function pet(e){if(typeof e!="function")throw new Error;return e}var yet={depth:-1},J6={},f_={};function met(e){return e.id}function get(e){return e.parentId}function zB(){var e=met,t=get,n;function r(i){var s=Array.from(i),o=e,a=t,l,c,u,f,d,h,p,g,v=new Map;if(n!=null){const y=s.map((w,S)=>bet(n(w,S,i))),m=y.map(t$),b=new Set(y).add("");for(const w of m)b.has(w)||(b.add(w),y.push(w),m.push(t$(w)),s.push(f_));o=(w,S)=>y[S],a=(w,S)=>m[S]}for(u=0,l=s.length;u<l;++u)c=s[u],h=s[u]=new kf(c),(p=o(c,u,i))!=null&&(p+="")&&(g=h.id=p,v.set(g,v.has(g)?J6:h)),(p=a(c,u,i))!=null&&(p+="")&&(h.parent=p);for(u=0;u<l;++u)if(h=s[u],p=h.parent){if(d=v.get(p),!d)throw new Error("missing: "+p);if(d===J6)throw new Error("ambiguous: "+p);d.children?d.children.push(h):d.children=[h],h.parent=d}else{if(f)throw new Error("multiple roots");f=h}if(!f)throw new Error("no root");if(n!=null){for(;f.data===f_&&f.children.length===1;)f=f.children[0],--l;for(let y=s.length-1;y>=0&&(h=s[y],h.data===f_);--y)h.data=null}if(f.parent=yet,f.eachBefore(function(y){y.depth=y.parent.depth+1,--l}).eachBefore(PB),f.parent=null,l>0)throw new Error("cycle");return f}return r.id=function(i){return arguments.length?(e=u_(i),r):e},r.parentId=function(i){return arguments.length?(t=u_(i),r):t},r.path=function(i){return arguments.length?(n=u_(i),r):n},r}function bet(e){e=`${e}`;let t=e.length;return XS(e,t-1)&&!XS(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function t$(e){let t=e.length;if(t<2)return"";for(;--t>1&&!XS(e,t););return e.slice(0,t)}function XS(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}function vet(e,t){return e.parent===t.parent?1:2}function d_(e){var t=e.children;return t?t[0]:e.t}function h_(e){var t=e.children;return t?t[t.length-1]:e.t}function wet(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function _et(e){for(var t=0,n=0,r=e.children,i=r.length,s;--i>=0;)s=r[i],s.z+=t,s.m+=t,t+=s.s+(n+=s.c)}function xet(e,t,n){return e.a.parent===t.parent?e.a:n}function xm(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}xm.prototype=Object.create(kf.prototype);function Iet(e){for(var t=new xm(e,0),n,r=[t],i,s,o,a;n=r.pop();)if(s=n._.children)for(n.children=new Array(a=s.length),o=a-1;o>=0;--o)r.push(i=n.children[o]=new xm(s[o],o)),i.parent=n;return(t.parent=new xm(null,0)).children=[t],t}function w1(){var e=vet,t=1,n=1,r=null;function i(c){var u=Iet(c);if(u.eachAfter(s),u.parent.m=-u.z,u.eachBefore(o),r)c.eachBefore(l);else{var f=c,d=c,h=c;c.eachBefore(function(m){m.x<f.x&&(f=m),m.x>d.x&&(d=m),m.depth>h.depth&&(h=m)});var p=f===d?1:e(f,d)/2,g=p-f.x,v=t/(d.x+p+g),y=n/(h.depth||1);c.eachBefore(function(m){m.x=(m.x+g)*v,m.y=m.depth*y})}return c}function s(c){var u=c.children,f=c.parent.children,d=c.i?f[c.i-1]:null;if(u){_et(c);var h=(u[0].z+u[u.length-1].z)/2;d?(c.z=d.z+e(c._,d._),c.m=c.z-h):c.z=h}else d&&(c.z=d.z+e(c._,d._));c.parent.A=a(c,d,c.parent.A||f[0])}function o(c){c._.x=c.z+c.parent.m,c.m+=c.parent.m}function a(c,u,f){if(u){for(var d=c,h=c,p=u,g=d.parent.children[0],v=d.m,y=h.m,m=p.m,b=g.m,w;p=h_(p),d=d_(d),p&&d;)g=d_(g),h=h_(h),h.a=c,w=p.z+m-d.z-v+e(p._,d._),w>0&&(wet(xet(p,c,f),c,w),v+=w,y+=w),m+=p.m,v+=d.m,b+=g.m,y+=h.m;p&&!h_(h)&&(h.t=p,h.m+=m-y),d&&!d_(g)&&(g.t=d,g.m+=v-b,f=c)}return f}function l(c){c.x*=t,c.y=c.depth*n}return i.separation=function(c){return arguments.length?(e=c,i):e},i.size=function(c){return arguments.length?(r=!1,t=+c[0],n=+c[1],i):r?null:[t,n]},i.nodeSize=function(c){return arguments.length?(r=!0,t=+c[0],n=+c[1],i):r?[t,n]:null},i}const Tet=1664525,Eet=1013904223,e$=1/4294967296;function F3(e=Math.random()){let t=(0<=e&&e<1?e/e$:Math.abs(e))|0;return()=>(t=Tet*t+Eet|0,e$*(t>>>0))}function zs(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function dv(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const QS=Symbol("implicit");function B3(){var e=new yc,t=[],n=[],r=QS;function i(s){let o=e.get(s);if(o===void 0){if(r!==QS)return r;e.set(s,o=t.push(s)-1)}return n[o%n.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new yc;for(const o of s)e.has(o)||e.set(o,t.push(o)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return B3(t,n).unknown(r)},zs.apply(i,arguments),i}function hv(){var e=B3().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,s,o,a=!1,l=0,c=0,u=.5;delete e.unknown;function f(){var d=t().length,h=i<r,p=h?i:r,g=h?r:i;s=(g-p)/Math.max(1,d-l+c*2),a&&(s=Math.floor(s)),p+=(g-p-s*(d-l))*u,o=s*(1-l),a&&(p=Math.round(p),o=Math.round(o));var v=Lr(d).map(function(y){return p+s*y});return n(h?v.reverse():v)}return e.domain=function(d){return arguments.length?(t(d),f()):t()},e.range=function(d){return arguments.length?([r,i]=d,r=+r,i=+i,f()):[r,i]},e.rangeRound=function(d){return[r,i]=d,r=+r,i=+i,a=!0,f()},e.bandwidth=function(){return o},e.step=function(){return s},e.round=function(d){return arguments.length?(a=!!d,f()):a},e.padding=function(d){return arguments.length?(l=Math.min(1,c=+d),f()):l},e.paddingInner=function(d){return arguments.length?(l=Math.min(1,d),f()):l},e.paddingOuter=function(d){return arguments.length?(c=+d,f()):c},e.align=function(d){return arguments.length?(u=Math.max(0,Math.min(1,d)),f()):u},e.copy=function(){return hv(t(),[r,i]).round(a).paddingInner(l).paddingOuter(c).align(u)},zs.apply(f(),arguments)}function jB(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return jB(t())},e}function Aet(){return jB(hv.apply(null,arguments).paddingInner(1))}function Met(e){return function(){return e}}function KS(e){return+e}var n$=[0,1];function fi(e){return e}function ZS(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Met(isNaN(t)?NaN:.5)}function $et(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function Net(e,t,n){var r=e[0],i=e[1],s=t[0],o=t[1];return i<r?(r=ZS(i,r),s=n(o,s)):(r=ZS(r,i),s=n(s,o)),function(a){return s(r(a))}}function ket(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),s=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=ZS(e[o],e[o+1]),s[o]=n(t[o],t[o+1]);return function(a){var l=Jb(e,a,1,r)-1;return s[l](i[l](a))}}function yy(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function pv(){var e=n$,t=n$,n=nd,r,i,s,o=fi,a,l,c;function u(){var d=Math.min(e.length,t.length);return o!==fi&&(o=$et(e[0],e[d-1])),a=d>2?ket:Net,l=c=null,f}function f(d){return d==null||isNaN(d=+d)?s:(l||(l=a(e.map(r),t,n)))(r(o(d)))}return f.invert=function(d){return o(i((c||(c=a(t,e.map(r),Un)))(d)))},f.domain=function(d){return arguments.length?(e=Array.from(d,KS),u()):e.slice()},f.range=function(d){return arguments.length?(t=Array.from(d),u()):t.slice()},f.rangeRound=function(d){return t=Array.from(d),n=S3,u()},f.clamp=function(d){return arguments.length?(o=d?!0:fi,u()):o!==fi},f.interpolate=function(d){return arguments.length?(n=d,u()):n},f.unknown=function(d){return arguments.length?(s=d,f):s},function(d,h){return r=d,i=h,u()}}function VB(){return pv()(fi,fi)}function Det(e,t,n,r){var i=hS(e,t,n),s;switch(r=bp(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(s=UJ(i,o))&&(r.precision=s),nB(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=PJ(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=CJ(i))&&(r.precision=s-(r.type==="%")*2);break}}return rd(r)}function my(e){var t=e.domain;return e.ticks=function(n){var r=t();return za(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return Det(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,s=r.length-1,o=r[i],a=r[s],l,c,u=10;for(a<o&&(c=o,o=a,a=c,c=i,i=s,s=c);u-- >0;){if(c=dp(o,a,n),c===l)return r[i]=o,r[s]=a,t(r);if(c>0)o=Math.floor(o/c)*c,a=Math.ceil(a/c)*c;else if(c<0)o=Math.ceil(o*c)/c,a=Math.floor(a*c)/c;else break;l=c}return e},e}function yv(){var e=VB();return e.copy=function(){return yy(e,yv())},zs.apply(e,arguments),my(e)}function YB(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,KS),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return YB(e).unknown(t)},e=arguments.length?Array.from(e,KS):[0,1],my(n)}function qB(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],s=e[r],o;return s<i&&(o=n,n=r,r=o,o=i,i=s,s=o),e[n]=t.floor(i),e[r]=t.ceil(s),e}function r$(e){return Math.log(e)}function i$(e){return Math.exp(e)}function Oet(e){return-Math.log(-e)}function Fet(e){return-Math.exp(-e)}function Bet(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Let(e){return e===10?Bet:e===Math.E?Math.exp:t=>Math.pow(e,t)}function Ret(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function s$(e){return(t,n)=>-e(-t,n)}function WB(e){const t=e(r$,i$),n=t.domain;let r=10,i,s;function o(){return i=Ret(r),s=Let(r),n()[0]<0?(i=s$(i),s=s$(s),e(Oet,Fet)):e(r$,i$),t}return t.base=function(a){return arguments.length?(r=+a,o()):r},t.domain=function(a){return arguments.length?(n(a),o()):n()},t.ticks=a=>{const l=n();let c=l[0],u=l[l.length-1];const f=u<c;f&&([c,u]=[u,c]);let d=i(c),h=i(u),p,g;const v=a==null?10:+a;let y=[];if(!(r%1)&&h-d<v){if(d=Math.floor(d),h=Math.ceil(h),c>0){for(;d<=h;++d)for(p=1;p<r;++p)if(g=d<0?p/s(-d):p*s(d),!(g<c)){if(g>u)break;y.push(g)}}else for(;d<=h;++d)for(p=r-1;p>=1;--p)if(g=d>0?p/s(-d):p*s(d),!(g<c)){if(g>u)break;y.push(g)}y.length*2<v&&(y=za(c,u,v))}else y=za(d,h,Math.min(h-d,v)).map(s);return f?y.reverse():y},t.tickFormat=(a,l)=>{if(a==null&&(a=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=bp(l)).precision==null&&(l.trim=!0),l=rd(l)),a===1/0)return l;const c=Math.max(1,r*a/t.ticks().length);return u=>{let f=u/s(Math.round(i(u)));return f*r<r-.5&&(f*=r),f<=c?l(u):""}},t.nice=()=>n(qB(n(),{floor:a=>s(Math.floor(i(a))),ceil:a=>s(Math.ceil(i(a)))})),t}function HB(){const e=WB(pv()).domain([1,10]);return e.copy=()=>yy(e,HB()).base(e.base()),zs.apply(e,arguments),e}function o$(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function a$(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function GB(e){var t=1,n=e(o$(t),a$(t));return n.constant=function(r){return arguments.length?e(o$(t=+r),a$(t)):t},my(n)}function XB(){var e=GB(pv());return e.copy=function(){return yy(e,XB()).constant(e.constant())},zs.apply(e,arguments)}function l$(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Cet(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Uet(e){return e<0?-e*e:e*e}function QB(e){var t=e(fi,fi),n=1;function r(){return n===1?e(fi,fi):n===.5?e(Cet,Uet):e(l$(n),l$(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},my(t)}function KB(){var e=QB(pv());return e.copy=function(){return yy(e,KB()).exponent(e.exponent())},zs.apply(e,arguments),e}function ZB(){var e=[],t=[],n=[],r;function i(){var o=0,a=Math.max(1,t.length);for(n=new Array(a-1);++o<a;)n[o-1]=YG(e,o/a);return s}function s(o){return o==null||isNaN(o=+o)?r:t[Jb(n,o)]}return s.invertExtent=function(o){var a=t.indexOf(o);return a<0?[NaN,NaN]:[a>0?n[a-1]:e[0],a<n.length?n[a]:e[e.length-1]]},s.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let a of o)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(je),i()},s.range=function(o){return arguments.length?(t=Array.from(o),i()):t.slice()},s.unknown=function(o){return arguments.length?(r=o,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return ZB().domain(e).range(t).unknown(r)},zs.apply(s,arguments)}function JB(){var e=[.5],t=[0,1],n,r=1;function i(s){return s!=null&&s<=s?t[Jb(e,s,0,r)]:n}return i.domain=function(s){return arguments.length?(e=Array.from(s),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(s){return arguments.length?(t=Array.from(s),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(s){var o=t.indexOf(s);return[e[o-1],e[o]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return JB().domain(e).range(t).unknown(n)},zs.apply(i,arguments)}const p_=new Date,y_=new Date;function dn(e,t,n,r){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(e(s=new Date(+s)),s),i.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),i.round=s=>{const o=i(s),a=i.ceil(s);return s-o<a-s?o:a},i.offset=(s,o)=>(t(s=new Date(+s),o==null?1:Math.floor(o)),s),i.range=(s,o,a)=>{const l=[];if(s=i.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return l;let c;do l.push(c=new Date(+s)),t(s,a),e(s);while(c<s&&s<o);return l},i.filter=s=>dn(o=>{if(o>=o)for(;e(o),!s(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;t(o,-1),!s(o););else for(;--a>=0;)for(;t(o,1),!s(o););}),n&&(i.count=(s,o)=>(p_.setTime(+s),y_.setTime(+o),e(p_),e(y_),Math.floor(n(p_,y_))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?o=>r(o)%s===0:o=>i.count(0,o)%s===0):i)),i}const _1=dn(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);_1.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?dn(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):_1);_1.range;const wo=1e3,di=wo*60,_o=di*60,Ro=_o*24,L3=Ro*7,c$=Ro*30,m_=Ro*365,xs=dn(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*wo)},(e,t)=>(t-e)/wo,e=>e.getUTCSeconds());xs.range;const mv=dn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*wo)},(e,t)=>{e.setTime(+e+t*di)},(e,t)=>(t-e)/di,e=>e.getMinutes());mv.range;const gy=dn(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*di)},(e,t)=>(t-e)/di,e=>e.getUTCMinutes());gy.range;const gv=dn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*wo-e.getMinutes()*di)},(e,t)=>{e.setTime(+e+t*_o)},(e,t)=>(t-e)/_o,e=>e.getHours());gv.range;const by=dn(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*_o)},(e,t)=>(t-e)/_o,e=>e.getUTCHours());by.range;const $c=dn(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*di)/Ro,e=>e.getDate()-1);$c.range;const bv=dn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ro,e=>e.getUTCDate()-1);bv.range;const vv=dn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ro,e=>Math.floor(e/Ro));vv.range;function Nc(e){return dn(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*di)/L3)}const Df=Nc(0),wp=Nc(1),tL=Nc(2),eL=Nc(3),_c=Nc(4),nL=Nc(5),rL=Nc(6);Df.range;wp.range;tL.range;eL.range;_c.range;nL.range;rL.range;function kc(e){return dn(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/L3)}const Of=kc(0),_p=kc(1),iL=kc(2),sL=kc(3),Sc=kc(4),oL=kc(5),aL=kc(6);Of.range;_p.range;iL.range;sL.range;Sc.range;oL.range;aL.range;const vy=dn(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());vy.range;const wy=dn(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());wy.range;const Hi=dn(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Hi.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:dn(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Hi.range;const Gi=dn(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Gi.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:dn(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Gi.range;function lL(e,t,n,r,i,s){const o=[[xs,1,wo],[xs,5,5*wo],[xs,15,15*wo],[xs,30,30*wo],[s,1,di],[s,5,5*di],[s,15,15*di],[s,30,30*di],[i,1,_o],[i,3,3*_o],[i,6,6*_o],[i,12,12*_o],[r,1,Ro],[r,2,2*Ro],[n,1,L3],[t,1,c$],[t,3,3*c$],[e,1,m_]];function a(c,u,f){const d=u<c;d&&([c,u]=[u,c]);const h=f&&typeof f.range=="function"?f:l(c,u,f),p=h?h.range(c,+u+1):[];return d?p.reverse():p}function l(c,u,f){const d=Math.abs(u-c)/f,h=Zb(([,,v])=>v).right(o,d);if(h===o.length)return e.every(hS(c/m_,u/m_,f));if(h===0)return _1.every(Math.max(hS(c,u,f),1));const[p,g]=o[d/o[h-1][2]<o[h][2]/d?h-1:h];return p.every(g)}return[a,l]}const[Pet,cL]=lL(Gi,wy,Of,vv,by,gy),[zet,jet]=lL(Hi,vy,Df,$c,gv,mv);function g_(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function b_(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Dd(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function Vet(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,s=e.days,o=e.shortDays,a=e.months,l=e.shortMonths,c=Od(i),u=Fd(i),f=Od(s),d=Fd(s),h=Od(o),p=Fd(o),g=Od(a),v=Fd(a),y=Od(l),m=Fd(l),b={a:B,A:O,b:C,B:F,c:null,d:y$,e:y$,f:dnt,g:Snt,G:Int,H:cnt,I:unt,j:fnt,L:uL,m:hnt,M:pnt,p:P,q:z,Q:b$,s:v$,S:ynt,u:mnt,U:gnt,V:bnt,w:vnt,W:wnt,x:null,X:null,y:_nt,Y:xnt,Z:Tnt,"%":g$},w={a:H,A:X,b:tt,B:Z,c:null,d:m$,e:m$,f:$nt,g:Unt,G:znt,H:Ent,I:Ant,j:Mnt,L:dL,m:Nnt,M:knt,p:Y,q:Q,Q:b$,s:v$,S:Dnt,u:Ont,U:Fnt,V:Bnt,w:Lnt,W:Rnt,x:null,X:null,y:Cnt,Y:Pnt,Z:jnt,"%":g$},S={a:I,A,b:D,B:L,c:T,d:h$,e:h$,f:snt,g:d$,G:f$,H:p$,I:p$,j:ent,L:int,m:tnt,M:nnt,p:k,q:Jet,Q:ant,s:lnt,S:rnt,u:Get,U:Xet,V:Qet,w:Het,W:Ket,x:M,X:N,y:d$,Y:f$,Z:Zet,"%":ont};b.x=_(n,b),b.X=_(r,b),b.c=_(t,b),w.x=_(n,w),w.X=_(r,w),w.c=_(t,w);function _(V,J){return function(et){var j=[],At=-1,at=0,qt=V.length,Ht,st,me;for(et instanceof Date||(et=new Date(+et));++At<qt;)V.charCodeAt(At)===37&&(j.push(V.slice(at,At)),(st=u$[Ht=V.charAt(++At)])!=null?Ht=V.charAt(++At):st=Ht==="e"?" ":"0",(me=J[Ht])&&(Ht=me(et,st)),j.push(Ht),at=At+1);return j.push(V.slice(at,At)),j.join("")}}function x(V,J){return function(et){var j=Dd(1900,void 0,1),At=E(j,V,et+="",0),at,qt;if(At!=et.length)return null;if("Q"in j)return new Date(j.Q);if("s"in j)return new Date(j.s*1e3+("L"in j?j.L:0));if(J&&!("Z"in j)&&(j.Z=0),"p"in j&&(j.H=j.H%12+j.p*12),j.m===void 0&&(j.m="q"in j?j.q:0),"V"in j){if(j.V<1||j.V>53)return null;"w"in j||(j.w=1),"Z"in j?(at=b_(Dd(j.y,0,1)),qt=at.getUTCDay(),at=qt>4||qt===0?_p.ceil(at):_p(at),at=bv.offset(at,(j.V-1)*7),j.y=at.getUTCFullYear(),j.m=at.getUTCMonth(),j.d=at.getUTCDate()+(j.w+6)%7):(at=g_(Dd(j.y,0,1)),qt=at.getDay(),at=qt>4||qt===0?wp.ceil(at):wp(at),at=$c.offset(at,(j.V-1)*7),j.y=at.getFullYear(),j.m=at.getMonth(),j.d=at.getDate()+(j.w+6)%7)}else("W"in j||"U"in j)&&("w"in j||(j.w="u"in j?j.u%7:"W"in j?1:0),qt="Z"in j?b_(Dd(j.y,0,1)).getUTCDay():g_(Dd(j.y,0,1)).getDay(),j.m=0,j.d="W"in j?(j.w+6)%7+j.W*7-(qt+5)%7:j.w+j.U*7-(qt+6)%7);return"Z"in j?(j.H+=j.Z/100|0,j.M+=j.Z%100,b_(j)):g_(j)}}function E(V,J,et,j){for(var At=0,at=J.length,qt=et.length,Ht,st;At<at;){if(j>=qt)return-1;if(Ht=J.charCodeAt(At++),Ht===37){if(Ht=J.charAt(At++),st=S[Ht in u$?J.charAt(At++):Ht],!st||(j=st(V,et,j))<0)return-1}else if(Ht!=et.charCodeAt(j++))return-1}return j}function k(V,J,et){var j=c.exec(J.slice(et));return j?(V.p=u.get(j[0].toLowerCase()),et+j[0].length):-1}function I(V,J,et){var j=h.exec(J.slice(et));return j?(V.w=p.get(j[0].toLowerCase()),et+j[0].length):-1}function A(V,J,et){var j=f.exec(J.slice(et));return j?(V.w=d.get(j[0].toLowerCase()),et+j[0].length):-1}function D(V,J,et){var j=y.exec(J.slice(et));return j?(V.m=m.get(j[0].toLowerCase()),et+j[0].length):-1}function L(V,J,et){var j=g.exec(J.slice(et));return j?(V.m=v.get(j[0].toLowerCase()),et+j[0].length):-1}function T(V,J,et){return E(V,t,J,et)}function M(V,J,et){return E(V,n,J,et)}function N(V,J,et){return E(V,r,J,et)}function B(V){return o[V.getDay()]}function O(V){return s[V.getDay()]}function C(V){return l[V.getMonth()]}function F(V){return a[V.getMonth()]}function P(V){return i[+(V.getHours()>=12)]}function z(V){return 1+~~(V.getMonth()/3)}function H(V){return o[V.getUTCDay()]}function X(V){return s[V.getUTCDay()]}function tt(V){return l[V.getUTCMonth()]}function Z(V){return a[V.getUTCMonth()]}function Y(V){return i[+(V.getUTCHours()>=12)]}function Q(V){return 1+~~(V.getUTCMonth()/3)}return{format:function(V){var J=_(V+="",b);return J.toString=function(){return V},J},parse:function(V){var J=x(V+="",!1);return J.toString=function(){return V},J},utcFormat:function(V){var J=_(V+="",w);return J.toString=function(){return V},J},utcParse:function(V){var J=x(V+="",!0);return J.toString=function(){return V},J}}}var u$={"-":"",_:" ",0:"0"},In=/^\s*\d+/,Yet=/^%/,qet=/[\\^$*+?|[\]().{}]/g;function Jt(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(t)+i:i)}function Wet(e){return e.replace(qet,"\\$&")}function Od(e){return new RegExp("^(?:"+e.map(Wet).join("|")+")","i")}function Fd(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function Het(e,t,n){var r=In.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function Get(e,t,n){var r=In.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function Xet(e,t,n){var r=In.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function Qet(e,t,n){var r=In.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function Ket(e,t,n){var r=In.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function f$(e,t,n){var r=In.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function d$(e,t,n){var r=In.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Zet(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Jet(e,t,n){var r=In.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function tnt(e,t,n){var r=In.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function h$(e,t,n){var r=In.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function ent(e,t,n){var r=In.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function p$(e,t,n){var r=In.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function nnt(e,t,n){var r=In.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function rnt(e,t,n){var r=In.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function int(e,t,n){var r=In.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function snt(e,t,n){var r=In.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function ont(e,t,n){var r=Yet.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function ant(e,t,n){var r=In.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function lnt(e,t,n){var r=In.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function y$(e,t){return Jt(e.getDate(),t,2)}function cnt(e,t){return Jt(e.getHours(),t,2)}function unt(e,t){return Jt(e.getHours()%12||12,t,2)}function fnt(e,t){return Jt(1+$c.count(Hi(e),e),t,3)}function uL(e,t){return Jt(e.getMilliseconds(),t,3)}function dnt(e,t){return uL(e,t)+"000"}function hnt(e,t){return Jt(e.getMonth()+1,t,2)}function pnt(e,t){return Jt(e.getMinutes(),t,2)}function ynt(e,t){return Jt(e.getSeconds(),t,2)}function mnt(e){var t=e.getDay();return t===0?7:t}function gnt(e,t){return Jt(Df.count(Hi(e)-1,e),t,2)}function fL(e){var t=e.getDay();return t>=4||t===0?_c(e):_c.ceil(e)}function bnt(e,t){return e=fL(e),Jt(_c.count(Hi(e),e)+(Hi(e).getDay()===4),t,2)}function vnt(e){return e.getDay()}function wnt(e,t){return Jt(wp.count(Hi(e)-1,e),t,2)}function _nt(e,t){return Jt(e.getFullYear()%100,t,2)}function Snt(e,t){return e=fL(e),Jt(e.getFullYear()%100,t,2)}function xnt(e,t){return Jt(e.getFullYear()%1e4,t,4)}function Int(e,t){var n=e.getDay();return e=n>=4||n===0?_c(e):_c.ceil(e),Jt(e.getFullYear()%1e4,t,4)}function Tnt(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Jt(t/60|0,"0",2)+Jt(t%60,"0",2)}function m$(e,t){return Jt(e.getUTCDate(),t,2)}function Ent(e,t){return Jt(e.getUTCHours(),t,2)}function Ant(e,t){return Jt(e.getUTCHours()%12||12,t,2)}function Mnt(e,t){return Jt(1+bv.count(Gi(e),e),t,3)}function dL(e,t){return Jt(e.getUTCMilliseconds(),t,3)}function $nt(e,t){return dL(e,t)+"000"}function Nnt(e,t){return Jt(e.getUTCMonth()+1,t,2)}function knt(e,t){return Jt(e.getUTCMinutes(),t,2)}function Dnt(e,t){return Jt(e.getUTCSeconds(),t,2)}function Ont(e){var t=e.getUTCDay();return t===0?7:t}function Fnt(e,t){return Jt(Of.count(Gi(e)-1,e),t,2)}function hL(e){var t=e.getUTCDay();return t>=4||t===0?Sc(e):Sc.ceil(e)}function Bnt(e,t){return e=hL(e),Jt(Sc.count(Gi(e),e)+(Gi(e).getUTCDay()===4),t,2)}function Lnt(e){return e.getUTCDay()}function Rnt(e,t){return Jt(_p.count(Gi(e)-1,e),t,2)}function Cnt(e,t){return Jt(e.getUTCFullYear()%100,t,2)}function Unt(e,t){return e=hL(e),Jt(e.getUTCFullYear()%100,t,2)}function Pnt(e,t){return Jt(e.getUTCFullYear()%1e4,t,4)}function znt(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Sc(e):Sc.ceil(e),Jt(e.getUTCFullYear()%1e4,t,4)}function jnt(){return"+0000"}function g$(){return"%"}function b$(e){return+e}function v$(e){return Math.floor(+e/1e3)}var Yc,R3,_y;Vnt({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Vnt(e){return Yc=Vet(e),R3=Yc.format,Yc.parse,_y=Yc.utcFormat,Yc.utcParse,Yc}function Ynt(e){return new Date(e)}function qnt(e){return e instanceof Date?+e:+new Date(+e)}function C3(e,t,n,r,i,s,o,a,l,c){var u=VB(),f=u.invert,d=u.domain,h=c(".%L"),p=c(":%S"),g=c("%I:%M"),v=c("%I %p"),y=c("%a %d"),m=c("%b %d"),b=c("%B"),w=c("%Y");function S(_){return(l(_)<_?h:a(_)<_?p:o(_)<_?g:s(_)<_?v:r(_)<_?i(_)<_?y:m:n(_)<_?b:w)(_)}return u.invert=function(_){return new Date(f(_))},u.domain=function(_){return arguments.length?d(Array.from(_,qnt)):d().map(Ynt)},u.ticks=function(_){var x=d();return e(x[0],x[x.length-1],_??10)},u.tickFormat=function(_,x){return x==null?S:c(x)},u.nice=function(_){var x=d();return(!_||typeof _.range!="function")&&(_=t(x[0],x[x.length-1],_??10)),_?d(qB(x,_)):u},u.copy=function(){return yy(u,C3(e,t,n,r,i,s,o,a,l,c))},u}function Wnt(){return zs.apply(C3(zet,jet,Hi,vy,Df,$c,gv,mv,xs,R3).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Hnt(){return zs.apply(C3(Pet,cL,Gi,wy,Of,bv,by,gy,xs,_y).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function wv(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function _v(){var e=0,t=.5,n=1,r=1,i,s,o,a,l,c=fi,u,f=!1,d;function h(g){return isNaN(g=+g)?d:(g=.5+((g=+u(g))-s)*(r*g<r*s?a:l),c(f?Math.max(0,Math.min(1,g)):g))}h.domain=function(g){return arguments.length?([e,t,n]=g,i=u(e=+e),s=u(t=+t),o=u(n=+n),a=i===s?0:.5/(s-i),l=s===o?0:.5/(o-s),r=s<i?-1:1,h):[e,t,n]},h.clamp=function(g){return arguments.length?(f=!!g,h):f},h.interpolator=function(g){return arguments.length?(c=g,h):c};function p(g){return function(v){var y,m,b;return arguments.length?([y,m,b]=v,c=av(g,[y,m,b]),h):[c(0),c(.5),c(1)]}}return h.range=p(nd),h.rangeRound=p(S3),h.unknown=function(g){return arguments.length?(d=g,h):d},function(g){return u=g,i=g(e),s=g(t),o=g(n),a=i===s?0:.5/(s-i),l=s===o?0:.5/(o-s),r=s<i?-1:1,h}}function pL(){var e=my(_v()(fi));return e.copy=function(){return wv(e,pL())},dv.apply(e,arguments)}function yL(){var e=WB(_v()).domain([.1,1,10]);return e.copy=function(){return wv(e,yL()).base(e.base())},dv.apply(e,arguments)}function mL(){var e=GB(_v());return e.copy=function(){return wv(e,mL()).constant(e.constant())},dv.apply(e,arguments)}function gL(){var e=QB(_v());return e.copy=function(){return wv(e,gL()).exponent(e.exponent())},dv.apply(e,arguments)}function Dt(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const Gnt=Dt("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Xnt=Dt("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),Qnt=Dt("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),Knt=Dt("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),Znt=Dt("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),Jnt=Dt("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),trt=Dt("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),ert=Dt("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),nrt=Dt("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),rrt=Dt("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),we=e=>iK(e[e.length-1]);var bL=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(Dt);const vL=we(bL);var wL=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(Dt);const _L=we(wL);var SL=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(Dt);const xL=we(SL);var IL=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(Dt);const TL=we(IL);var JS=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(Dt);const S1=we(JS);var EL=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(Dt);const AL=we(EL);var tx=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(Dt);const x1=we(tx);var ML=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(Dt);const $L=we(ML);var NL=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(Dt);const kL=we(NL);var DL=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(Dt);const OL=we(DL);var FL=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(Dt);const BL=we(FL);var LL=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(Dt);const RL=we(LL);var CL=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(Dt);const UL=we(CL);var PL=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(Dt);const zL=we(PL);var jL=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(Dt);const VL=we(jL);var YL=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(Dt);const qL=we(YL);var WL=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(Dt);const HL=we(WL);var GL=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(Dt);const XL=we(GL);var QL=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(Dt);const KL=we(QL);var ZL=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(Dt);const JL=we(ZL);var tR=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(Dt);const eR=we(tR);var nR=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(Dt);const rR=we(nR);var iR=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(Dt);const sR=we(iR);var oR=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(Dt);const aR=we(oR);var lR=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(Dt);const cR=we(lR);var uR=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(Dt);const fR=we(uR);var dR=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(Dt);const hR=we(dR);function pR(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-e*(35.34-e*(2381.73-e*(6402.7-e*(7024.72-e*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+e*(170.73+e*(52.82-e*(131.46-e*(176.58-e*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+e*(442.36-e*(2482.43-e*(6167.24-e*(6614.94-e*2475.67)))))))+")"}const yR=x3(Rs(300,.5,0),Rs(-240,.5,1));var mR=x3(Rs(-100,.75,.35),Rs(80,1.5,.8)),gR=x3(Rs(260,.75,.35),Rs(80,1.5,.8)),$0=Rs();function bR(e){(e<0||e>1)&&(e-=Math.floor(e));var t=Math.abs(e-.5);return $0.h=360*e-100,$0.s=1.5-1.5*t,$0.l=.8-.9*t,$0+""}var N0=wi(),irt=Math.PI/3,srt=Math.PI*2/3;function vR(e){var t;return e=(.5-e)*Math.PI,N0.r=255*(t=Math.sin(e))*t,N0.g=255*(t=Math.sin(e+irt))*t,N0.b=255*(t=Math.sin(e+srt))*t,N0+""}function wR(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+e*(1172.33-e*(10793.56-e*(33300.12-e*(38394.49-e*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+e*(557.33+e*(1225.33-e*(3574.96-e*(1073.77+e*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+e*(3211.1-e*(15327.97-e*(27814-e*(22569.18-e*6838.66)))))))+")"}function Sv(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}const _R=Sv(Dt("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var SR=Sv(Dt("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),xR=Sv(Dt("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),IR=Sv(Dt("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function mn(e){return function(){return e}}const TR=Math.cos,U3=Math.min,I1=Math.sin,hn=Math.sqrt,w$=1e-12,T1=Math.PI,xv=2*T1;function ER(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new JF(t)}function AR(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function MR(e){this._context=e}MR.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Sy(e){return new MR(e)}function $R(e){return e[0]}function NR(e){return e[1]}function kR(e,t){var n=mn(!0),r=null,i=Sy,s=null,o=ER(a);e=typeof e=="function"?e:e===void 0?$R:mn(e),t=typeof t=="function"?t:t===void 0?NR:mn(t);function a(l){var c,u=(l=AR(l)).length,f,d=!1,h;for(r==null&&(s=i(h=o())),c=0;c<=u;++c)!(c<u&&n(f=l[c],c,l))===d&&((d=!d)?s.lineStart():s.lineEnd()),d&&s.point(+e(f,c,l),+t(f,c,l));if(h)return s=null,h+""||null}return a.x=function(l){return arguments.length?(e=typeof l=="function"?l:mn(+l),a):e},a.y=function(l){return arguments.length?(t=typeof l=="function"?l:mn(+l),a):t},a.defined=function(l){return arguments.length?(n=typeof l=="function"?l:mn(!!l),a):n},a.curve=function(l){return arguments.length?(i=l,r!=null&&(s=i(r)),a):i},a.context=function(l){return arguments.length?(l==null?r=s=null:s=i(r=l),a):r},a}function P3(e,t,n){var r=null,i=mn(!0),s=null,o=Sy,a=null,l=ER(c);e=typeof e=="function"?e:e===void 0?$R:mn(+e),t=typeof t=="function"?t:mn(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?NR:mn(+n);function c(f){var d,h,p,g=(f=AR(f)).length,v,y=!1,m,b=new Array(g),w=new Array(g);for(s==null&&(a=o(m=l())),d=0;d<=g;++d){if(!(d<g&&i(v=f[d],d,f))===y)if(y=!y)h=d,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),p=d-1;p>=h;--p)a.point(b[p],w[p]);a.lineEnd(),a.areaEnd()}y&&(b[d]=+e(v,d,f),w[d]=+t(v,d,f),a.point(r?+r(v,d,f):b[d],n?+n(v,d,f):w[d]))}if(m)return a=null,m+""||null}function u(){return kR().defined(i).curve(o).context(s)}return c.x=function(f){return arguments.length?(e=typeof f=="function"?f:mn(+f),r=null,c):e},c.x0=function(f){return arguments.length?(e=typeof f=="function"?f:mn(+f),c):e},c.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:mn(+f),c):r},c.y=function(f){return arguments.length?(t=typeof f=="function"?f:mn(+f),n=null,c):t},c.y0=function(f){return arguments.length?(t=typeof f=="function"?f:mn(+f),c):t},c.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:mn(+f),c):n},c.lineX0=c.lineY0=function(){return u().x(e).y(t)},c.lineY1=function(){return u().x(e).y(n)},c.lineX1=function(){return u().x(r).y(t)},c.defined=function(f){return arguments.length?(i=typeof f=="function"?f:mn(!!f),c):i},c.curve=function(f){return arguments.length?(o=f,s!=null&&(a=o(s)),c):o},c.context=function(f){return arguments.length?(f==null?s=a=null:a=o(s=f),c):s},c}class DR{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function ort(e){return new DR(e,!0)}function art(e){return new DR(e,!1)}const lrt=hn(3),OR={draw(e,t){const n=hn(t+U3(t/28,.75))*.59436,r=n/2,i=r*lrt;e.moveTo(0,n),e.lineTo(0,-n),e.moveTo(-i,-r),e.lineTo(i,r),e.moveTo(-i,r),e.lineTo(i,-r)}},Sp={draw(e,t){const n=hn(t/T1);e.moveTo(n,0),e.arc(0,0,n,0,xv)}},FR={draw(e,t){const n=hn(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},BR=hn(1/3),crt=BR*2,LR={draw(e,t){const n=hn(t/crt),r=n*BR;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},RR={draw(e,t){const n=hn(t)*.62625;e.moveTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.lineTo(-n,0),e.closePath()}},CR={draw(e,t){const n=hn(t-U3(t/7,2))*.87559;e.moveTo(-n,0),e.lineTo(n,0),e.moveTo(0,n),e.lineTo(0,-n)}},UR={draw(e,t){const n=hn(t),r=-n/2;e.rect(r,r,n,n)}},PR={draw(e,t){const n=hn(t)*.4431;e.moveTo(n,n),e.lineTo(n,-n),e.lineTo(-n,-n),e.lineTo(-n,n),e.closePath()}},urt=.8908130915292852,zR=I1(T1/10)/I1(7*T1/10),frt=I1(xv/10)*zR,drt=-TR(xv/10)*zR,jR={draw(e,t){const n=hn(t*urt),r=frt*n,i=drt*n;e.moveTo(0,-n),e.lineTo(r,i);for(let s=1;s<5;++s){const o=xv*s/5,a=TR(o),l=I1(o);e.lineTo(l*n,-a*n),e.lineTo(a*r-l*i,l*r+a*i)}e.closePath()}},v_=hn(3),VR={draw(e,t){const n=-hn(t/(v_*3));e.moveTo(0,n*2),e.lineTo(-v_*n,-n),e.lineTo(v_*n,-n),e.closePath()}},hrt=hn(3),YR={draw(e,t){const n=hn(t)*.6824,r=n/2,i=n*hrt/2;e.moveTo(0,-n),e.lineTo(i,r),e.lineTo(-i,r),e.closePath()}},Kr=-.5,Zr=hn(3)/2,ex=1/hn(12),prt=(ex/2+1)*3,qR={draw(e,t){const n=hn(t/prt),r=n/2,i=n*ex,s=r,o=n*ex+n,a=-s,l=o;e.moveTo(r,i),e.lineTo(s,o),e.lineTo(a,l),e.lineTo(Kr*r-Zr*i,Zr*r+Kr*i),e.lineTo(Kr*s-Zr*o,Zr*s+Kr*o),e.lineTo(Kr*a-Zr*l,Zr*a+Kr*l),e.lineTo(Kr*r+Zr*i,Kr*i-Zr*r),e.lineTo(Kr*s+Zr*o,Kr*o-Zr*s),e.lineTo(Kr*a+Zr*l,Kr*l-Zr*a),e.closePath()}},WR={draw(e,t){const n=hn(t-U3(t/6,1.7))*.6189;e.moveTo(-n,-n),e.lineTo(n,n),e.moveTo(-n,n),e.lineTo(n,-n)}},yrt=[Sp,FR,LR,UR,jR,VR,qR],mrt=[Sp,CR,WR,YR,OR,PR,RR];function Ya(){}function E1(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function Iv(e){this._context=e}Iv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:E1(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:E1(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function grt(e){return new Iv(e)}function HR(e){this._context=e}HR.prototype={areaStart:Ya,areaEnd:Ya,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:E1(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function brt(e){return new HR(e)}function GR(e){this._context=e}GR.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:E1(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function vrt(e){return new GR(e)}function XR(e,t){this._basis=new Iv(e),this._beta=t}XR.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],s=e[n]-r,o=t[n]-i,a=-1,l;++a<=n;)l=a/n,this._basis.point(this._beta*e[a]+(1-this._beta)*(r+l*s),this._beta*t[a]+(1-this._beta)*(i+l*o));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const wrt=function e(t){function n(r){return t===1?new Iv(r):new XR(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function A1(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function z3(e,t){this._context=e,this._k=(1-t)/6}z3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:A1(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:A1(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const _rt=function e(t){function n(r){return new z3(r,t)}return n.tension=function(r){return e(+r)},n}(0);function j3(e,t){this._context=e,this._k=(1-t)/6}j3.prototype={areaStart:Ya,areaEnd:Ya,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:A1(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Srt=function e(t){function n(r){return new j3(r,t)}return n.tension=function(r){return e(+r)},n}(0);function V3(e,t){this._context=e,this._k=(1-t)/6}V3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:A1(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const xrt=function e(t){function n(r){return new V3(r,t)}return n.tension=function(r){return e(+r)},n}(0);function Y3(e,t,n){var r=e._x1,i=e._y1,s=e._x2,o=e._y2;if(e._l01_a>w$){var a=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,l=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*a-e._x0*e._l12_2a+e._x2*e._l01_2a)/l,i=(i*a-e._y0*e._l12_2a+e._y2*e._l01_2a)/l}if(e._l23_a>w$){var c=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,u=3*e._l23_a*(e._l23_a+e._l12_a);s=(s*c+e._x1*e._l23_2a-t*e._l12_2a)/u,o=(o*c+e._y1*e._l23_2a-n*e._l12_2a)/u}e._context.bezierCurveTo(r,i,s,o,e._x2,e._y2)}function QR(e,t){this._context=e,this._alpha=t}QR.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:Y3(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Irt=function e(t){function n(r){return t?new QR(r,t):new z3(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function KR(e,t){this._context=e,this._alpha=t}KR.prototype={areaStart:Ya,areaEnd:Ya,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:Y3(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Trt=function e(t){function n(r){return t?new KR(r,t):new j3(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function ZR(e,t){this._context=e,this._alpha=t}ZR.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Y3(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Ert=function e(t){function n(r){return t?new ZR(r,t):new V3(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function JR(e){this._context=e}JR.prototype={areaStart:Ya,areaEnd:Ya,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function Art(e){return new JR(e)}function _$(e){return e<0?-1:1}function S$(e,t,n){var r=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(r||i<0&&-0),o=(n-e._y1)/(i||r<0&&-0),a=(s*i+o*r)/(r+i);return(_$(s)+_$(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function x$(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function w_(e,t,n){var r=e._x0,i=e._y0,s=e._x1,o=e._y1,a=(s-r)/3;e._context.bezierCurveTo(r+a,i+a*t,s-a,o-a*n,s,o)}function M1(e){this._context=e}M1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:w_(this,this._t0,x$(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,w_(this,x$(this,n=S$(this,e,t)),n);break;default:w_(this,this._t0,n=S$(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function tC(e){this._context=new eC(e)}(tC.prototype=Object.create(M1.prototype)).point=function(e,t){M1.prototype.point.call(this,t,e)};function eC(e){this._context=e}eC.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,s){this._context.bezierCurveTo(t,e,r,n,s,i)}};function Mrt(e){return new M1(e)}function $rt(e){return new tC(e)}function nC(e){this._context=e}nC.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=I$(e),i=I$(t),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function I$(e){var t,n=e.length-1,r,i=new Array(n),s=new Array(n),o=new Array(n);for(i[0]=0,s[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,s[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,s[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/s[t-1],s[t]-=r,o[t]-=r*o[t-1];for(i[n-1]=o[n-1]/s[n-1],t=n-2;t>=0;--t)i[t]=(o[t]-i[t+1])/s[t];for(s[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function Nrt(e){return new nC(e)}function Tv(e,t){this._context=e,this._t=t}Tv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function krt(e){return new Tv(e,.5)}function Drt(e){return new Tv(e,0)}function Ort(e){return new Tv(e,1)}const k0=e=>()=>e;function Frt(e,{sourceEvent:t,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function Is(e,t,n){this.k=e,this.x=t,this.y=n}Is.prototype={constructor:Is,scale:function(e){return e===1?this:new Is(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Is(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var rC=new Is(1,0,0);Is.prototype;function __(e){e.stopImmediatePropagation()}function Bd(e){e.preventDefault(),e.stopImmediatePropagation()}function Brt(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function Lrt(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function T$(){return this.__zoom||rC}function Rrt(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Crt(){return navigator.maxTouchPoints||"ontouchstart"in this}function Urt(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],s=e.invertY(t[0][1])-n[0][1],o=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),o>s?(s+o)/2:Math.min(0,s)||Math.max(0,o))}function Prt(){var e=Brt,t=Lrt,n=Urt,r=Rrt,i=Crt,s=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],a=250,l=vK,c=nv("start","zoom","end"),u,f,d,h=500,p=150,g=0,v=10;function y(T){T.property("__zoom",T$).on("wheel.zoom",E,{passive:!1}).on("mousedown.zoom",k).on("dblclick.zoom",I).filter(i).on("touchstart.zoom",A).on("touchmove.zoom",D).on("touchend.zoom touchcancel.zoom",L).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}y.transform=function(T,M,N,B){var O=T.selection?T.selection():T;O.property("__zoom",T$),T!==O?S(T,M,N,B):O.interrupt().each(function(){_(this,arguments).event(B).start().zoom(null,typeof M=="function"?M.apply(this,arguments):M).end()})},y.scaleBy=function(T,M,N,B){y.scaleTo(T,function(){var O=this.__zoom.k,C=typeof M=="function"?M.apply(this,arguments):M;return O*C},N,B)},y.scaleTo=function(T,M,N,B){y.transform(T,function(){var O=t.apply(this,arguments),C=this.__zoom,F=N==null?w(O):typeof N=="function"?N.apply(this,arguments):N,P=C.invert(F),z=typeof M=="function"?M.apply(this,arguments):M;return n(b(m(C,z),F,P),O,o)},N,B)},y.translateBy=function(T,M,N,B){y.transform(T,function(){return n(this.__zoom.translate(typeof M=="function"?M.apply(this,arguments):M,typeof N=="function"?N.apply(this,arguments):N),t.apply(this,arguments),o)},null,B)},y.translateTo=function(T,M,N,B,O){y.transform(T,function(){var C=t.apply(this,arguments),F=this.__zoom,P=B==null?w(C):typeof B=="function"?B.apply(this,arguments):B;return n(rC.translate(P[0],P[1]).scale(F.k).translate(typeof M=="function"?-M.apply(this,arguments):-M,typeof N=="function"?-N.apply(this,arguments):-N),C,o)},B,O)};function m(T,M){return M=Math.max(s[0],Math.min(s[1],M)),M===T.k?T:new Is(M,T.x,T.y)}function b(T,M,N){var B=M[0]-N[0]*T.k,O=M[1]-N[1]*T.k;return B===T.x&&O===T.y?T:new Is(T.k,B,O)}function w(T){return[(+T[0][0]+ +T[1][0])/2,(+T[0][1]+ +T[1][1])/2]}function S(T,M,N,B){T.on("start.zoom",function(){_(this,arguments).event(B).start()}).on("interrupt.zoom end.zoom",function(){_(this,arguments).event(B).end()}).tween("zoom",function(){var O=this,C=arguments,F=_(O,C).event(B),P=t.apply(O,C),z=N==null?w(P):typeof N=="function"?N.apply(O,C):N,H=Math.max(P[1][0]-P[0][0],P[1][1]-P[0][1]),X=O.__zoom,tt=typeof M=="function"?M.apply(O,C):M,Z=l(X.invert(z).concat(H/X.k),tt.invert(z).concat(H/tt.k));return function(Y){if(Y===1)Y=tt;else{var Q=Z(Y),V=H/Q[2];Y=new Is(V,z[0]-Q[0]*V,z[1]-Q[1]*V)}F.zoom(null,Y)}})}function _(T,M,N){return!N&&T.__zooming||new x(T,M)}function x(T,M){this.that=T,this.args=M,this.active=0,this.sourceEvent=null,this.extent=t.apply(T,M),this.taps=0}x.prototype={event:function(T){return T&&(this.sourceEvent=T),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(T,M){return this.mouse&&T!=="mouse"&&(this.mouse[1]=M.invert(this.mouse[0])),this.touch0&&T!=="touch"&&(this.touch0[1]=M.invert(this.touch0[0])),this.touch1&&T!=="touch"&&(this.touch1[1]=M.invert(this.touch1[0])),this.that.__zoom=M,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(T){var M=be(this.that).datum();c.call(T,this.that,new Frt(T,{sourceEvent:this.sourceEvent,target:y,type:T,transform:this.that.__zoom,dispatch:c}),M)}};function E(T,...M){if(!e.apply(this,arguments))return;var N=_(this,M).event(T),B=this.__zoom,O=Math.max(s[0],Math.min(s[1],B.k*Math.pow(2,r.apply(this,arguments)))),C=ki(T);if(N.wheel)(N.mouse[0][0]!==C[0]||N.mouse[0][1]!==C[1])&&(N.mouse[1]=B.invert(N.mouse[0]=C)),clearTimeout(N.wheel);else{if(B.k===O)return;N.mouse=[C,B.invert(C)],tf(this),N.start()}Bd(T),N.wheel=setTimeout(F,p),N.zoom("mouse",n(b(m(B,O),N.mouse[0],N.mouse[1]),N.extent,o));function F(){N.wheel=null,N.end()}}function k(T,...M){if(d||!e.apply(this,arguments))return;var N=T.currentTarget,B=_(this,M,!0).event(T),O=be(T.view).on("mousemove.zoom",z,!0).on("mouseup.zoom",H,!0),C=ki(T,N),F=T.clientX,P=T.clientY;AF(T.view),__(T),B.mouse=[C,this.__zoom.invert(C)],tf(this),B.start();function z(X){if(Bd(X),!B.moved){var tt=X.clientX-F,Z=X.clientY-P;B.moved=tt*tt+Z*Z>g}B.event(X).zoom("mouse",n(b(B.that.__zoom,B.mouse[0]=ki(X,N),B.mouse[1]),B.extent,o))}function H(X){O.on("mousemove.zoom mouseup.zoom",null),MF(X.view,B.moved),Bd(X),B.event(X).end()}}function I(T,...M){if(e.apply(this,arguments)){var N=this.__zoom,B=ki(T.changedTouches?T.changedTouches[0]:T,this),O=N.invert(B),C=N.k*(T.shiftKey?.5:2),F=n(b(m(N,C),B,O),t.apply(this,M),o);Bd(T),a>0?be(this).transition().duration(a).call(S,F,B,T):be(this).call(y.transform,F,B,T)}}function A(T,...M){if(e.apply(this,arguments)){var N=T.touches,B=N.length,O=_(this,M,T.changedTouches.length===B).event(T),C,F,P,z;for(__(T),F=0;F<B;++F)P=N[F],z=ki(P,this),z=[z,this.__zoom.invert(z),P.identifier],O.touch0?!O.touch1&&O.touch0[2]!==z[2]&&(O.touch1=z,O.taps=0):(O.touch0=z,C=!0,O.taps=1+!!u);u&&(u=clearTimeout(u)),C&&(O.taps<2&&(f=z[0],u=setTimeout(function(){u=null},h)),tf(this),O.start())}}function D(T,...M){if(this.__zooming){var N=_(this,M).event(T),B=T.changedTouches,O=B.length,C,F,P,z;for(Bd(T),C=0;C<O;++C)F=B[C],P=ki(F,this),N.touch0&&N.touch0[2]===F.identifier?N.touch0[0]=P:N.touch1&&N.touch1[2]===F.identifier&&(N.touch1[0]=P);if(F=N.that.__zoom,N.touch1){var H=N.touch0[0],X=N.touch0[1],tt=N.touch1[0],Z=N.touch1[1],Y=(Y=tt[0]-H[0])*Y+(Y=tt[1]-H[1])*Y,Q=(Q=Z[0]-X[0])*Q+(Q=Z[1]-X[1])*Q;F=m(F,Math.sqrt(Y/Q)),P=[(H[0]+tt[0])/2,(H[1]+tt[1])/2],z=[(X[0]+Z[0])/2,(X[1]+Z[1])/2]}else if(N.touch0)P=N.touch0[0],z=N.touch0[1];else return;N.zoom("touch",n(b(F,P,z),N.extent,o))}}function L(T,...M){if(this.__zooming){var N=_(this,M).event(T),B=T.changedTouches,O=B.length,C,F;for(__(T),d&&clearTimeout(d),d=setTimeout(function(){d=null},h),C=0;C<O;++C)F=B[C],N.touch0&&N.touch0[2]===F.identifier?delete N.touch0:N.touch1&&N.touch1[2]===F.identifier&&delete N.touch1;if(N.touch1&&!N.touch0&&(N.touch0=N.touch1,delete N.touch1),N.touch0)N.touch0[1]=this.__zoom.invert(N.touch0[0]);else if(N.end(),N.taps===2&&(F=ki(F,this),Math.hypot(f[0]-F[0],f[1]-F[1])<v)){var P=be(this).on("dblclick.zoom");P&&P.apply(this,arguments)}}}return y.wheelDelta=function(T){return arguments.length?(r=typeof T=="function"?T:k0(+T),y):r},y.filter=function(T){return arguments.length?(e=typeof T=="function"?T:k0(!!T),y):e},y.touchable=function(T){return arguments.length?(i=typeof T=="function"?T:k0(!!T),y):i},y.extent=function(T){return arguments.length?(t=typeof T=="function"?T:k0([[+T[0][0],+T[0][1]],[+T[1][0],+T[1][1]]]),y):t},y.scaleExtent=function(T){return arguments.length?(s[0]=+T[0],s[1]=+T[1],y):[s[0],s[1]]},y.translateExtent=function(T){return arguments.length?(o[0][0]=+T[0][0],o[1][0]=+T[1][0],o[0][1]=+T[0][1],o[1][1]=+T[1][1],y):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},y.constrain=function(T){return arguments.length?(n=T,y):n},y.duration=function(T){return arguments.length?(a=+T,y):a},y.interpolate=function(T){return arguments.length?(l=T,y):l},y.on=function(){var T=c.on.apply(c,arguments);return T===c?y:T},y.clickDistance=function(T){return arguments.length?(g=(T=+T)*T,y):Math.sqrt(g)},y.tapDistance=function(T){return arguments.length?(v=+T,y):v},y}function ir(e){return e!=null&&!Number.isNaN(e)}function _i(e,t){return+ir(t)-+ir(e)||je(e,t)}function $1(e,t){return+ir(t)-+ir(e)||pc(e,t)}function q3(e){return e!=null&&`${e}`!=""}function N1(e){return isFinite(e)?e:NaN}function To(e){return e>0&&isFinite(e)?e:NaN}function Ev(e){return e<0&&isFinite(e)?e:NaN}const Ou=1e3,Yl=Ou*60,ql=Yl*60,Co=ql*24,us=Co*7,ec=Co*30,na=Co*365,S_=[["millisecond",1],["2 milliseconds",2],["5 milliseconds",5],["10 milliseconds",10],["20 milliseconds",20],["50 milliseconds",50],["100 milliseconds",100],["200 milliseconds",200],["500 milliseconds",500],["second",Ou],["5 seconds",5*Ou],["15 seconds",15*Ou],["30 seconds",30*Ou],["minute",Yl],["5 minutes",5*Yl],["15 minutes",15*Yl],["30 minutes",30*Yl],["hour",ql],["3 hours",3*ql],["6 hours",6*ql],["12 hours",12*ql],["day",Co],["2 days",2*Co],["week",us],["2 weeks",2*us],["month",ec],["3 months",3*ec],["6 months",6*ec],["year",na],["2 years",2*na],["5 years",5*na],["10 years",10*na],["20 years",20*na],["50 years",50*na],["100 years",100*na]],W3=new Map([["second",Ou],["minute",Yl],["hour",ql],["day",Co],["monday",us],["tuesday",us],["wednesday",us],["thursday",us],["friday",us],["saturday",us],["sunday",us],["week",us],["month",ec],["year",na]]),iC=new Map([["second",xs],["minute",mv],["hour",gv],["day",$c],["monday",wp],["tuesday",tL],["wednesday",eL],["thursday",_c],["friday",nL],["saturday",rL],["sunday",Df],["week",Df],["month",vy],["year",Hi]]),sC=new Map([["second",xs],["minute",gy],["hour",by],["day",vv],["monday",_p],["tuesday",iL],["wednesday",sL],["thursday",Sc],["friday",oL],["saturday",aL],["sunday",Of],["week",Of],["month",wy],["year",Gi]]),xy=Symbol("intervalDuration"),Av=Symbol("intervalType");for(const[e,t]of iC)t[xy]=W3.get(e),t[Av]="time";for(const[e,t]of sC)t[xy]=W3.get(e),t[Av]="utc";const zrt=[["year",Gi,"utc"],["year",Hi,"time"],["month",wy,"utc"],["month",vy,"time"],["day",vv,"utc",6*ec],["day",$c,"time",6*ec],["hour",by,"utc",3*Co],["minute",gy,"utc",6*ql],["second",xs,"utc",30*Yl]];function oC(e,t,n){let r=`${e}`.toLowerCase();r.endsWith("s")&&(r=r.slice(0,-1));let i=1;const s=/^(?:(\d+)\s+)/.exec(r);switch(s&&(r=r.slice(s[0].length),i=+s[1]),r){case"quarter":r="month",i*=3;break;case"half":r="month",i*=6;break}let o=t.get(r);if(!o)throw new Error(`unknown interval: ${e}`);if(i>1){if(!o.every)throw new Error(`non-periodic interval: ${r}`);o=o.every(i),o[xy]=W3.get(r)*i,o[Av]=n}return o}function aC(e){return oC(e,iC,"time")}function H3(e){return oC(e,sC,"utc")}function E$(e,t){if(!(t>1))return;const n=e[xy];if(!S_.some(([,i])=>i===n)||n%Co===0&&Co<n&&n<ec)return;const[r]=S_[Zb(([,i])=>Math.log(i)).center(S_,Math.log(n*t))];return(e[Av]==="time"?aC:H3)(r)}function A$(e,t,n){const r=t==="time"?R3:_y;if(n==null)return r(e==="year"?"%Y":e==="month"?"%Y-%m":e==="day"?"%Y-%m-%d":e==="hour"||e==="minute"?"%Y-%m-%dT%H:%M":e==="second"?"%Y-%m-%dT%H:%M:%S":"%Y-%m-%dT%H:%M:%S.%L");const i=jrt(n);switch(e){case"millisecond":return qc(r(".%L"),r(":%M:%S"),i);case"second":return qc(r(":%S"),r("%-I:%M"),i);case"minute":return qc(r("%-I:%M"),r("%p"),i);case"hour":return qc(r("%-I %p"),r("%b %-d"),i);case"day":return qc(r("%-d"),r("%b"),i);case"month":return qc(r("%b"),r("%Y"),i);case"year":return r("%Y")}throw new Error("unable to format time ticks")}function jrt(e){return e==="left"||e==="right"?(t,n)=>`
${t}
${n}`:e==="top"?(t,n)=>`${n}
${t}`:(t,n)=>`${t}
${n}`}function Vrt(e,t){const n=De(HG(e,(r,i)=>Math.abs(i-r)));if(n<1e3)return A$("millisecond","utc",t);for(const[r,i,s,o]of zrt){if(n>o||r==="hour"&&!n)break;if(e.every(a=>i.floor(a)>=a))return A$(r,s,t)}}function qc(e,t,n){return(r,i,s)=>{const o=e(r,i),a=t(r,i),l=i-Lf(s);return i!==l&&s[l]!==void 0&&a===t(s[l],l)?o:n(o,a)}}const Ff=Object.getPrototypeOf(Uint8Array),Yrt=Object.prototype.toString,lC=Symbol("reindex");function Pt(e,t,n){const r=typeof t;return r==="string"?M$(e,cC(t),n):r==="function"?M$(e,t,n):r==="number"||t instanceof Date||r==="boolean"?Te(e,qr(t),n):typeof(t==null?void 0:t.transform)=="function"?$$(t.transform(e),n):qrt($$(t,n),e==null?void 0:e[lC])}function qrt(e,t){return t?$v(e,t):e}function M$(e,t,n){return Te(e,(n==null?void 0:n.prototype)instanceof Ff?Wrt(t):t,n)}function $$(e,t){return t===void 0?Tr(e):e instanceof t?e:t.prototype instanceof Ff&&!(e instanceof Ff)?t.from(e,Q3):t.from(e)}function Wrt(e){return(t,n)=>Q3(e(t,n))}const Oh=[null],cC=e=>t=>t[e],Nr={transform:Yo},_t={transform:e=>e},G3=()=>1,Hrt=()=>!0,zn=e=>e==null?e:`${e}`,Yt=e=>e==null?e:+e,Iy=e=>e?e[0]:void 0,xp=e=>e?e[1]:void 0,Grt=e=>e?e[2]:void 0,qr=e=>()=>e;function X3(e){const t=+`${e}`.slice(1)/100;return(n,r)=>ja(n,t,r)}function gr(e){return e instanceof Ff?e:Te(e,Q3,Float64Array)}function Q3(e){return e==null?NaN:Number(e)}function Xrt(e){return Te(e,uC)}function uC(e){return e instanceof Date&&!isNaN(e)?e:typeof e=="string"?ZO(e):e==null||isNaN(e=+e)?void 0:new Date(e)}function Ir(e,t){return e===void 0&&(e=t),e===null?[void 0,"none"]:Ey(e)?[void 0,e]:[e,void 0]}function nn(e,t){return e===void 0&&(e=t),e===null||typeof e=="number"?[void 0,e]:[e,void 0]}function fC(e,t,n){if(e!=null)return Xr(e,t,n)}function Xr(e,t,n){const r=`${e}`.toLowerCase();if(!n.includes(r))throw new Error(`invalid ${t}: ${e}`);return r}function Tr(e){return e==null||e instanceof Array||e instanceof Ff?e:Array.from(e)}function Te(e,t,n=Array){return e==null?e:e instanceof n?e.map(t):n.from(e,t)}function Ip(e,t=Array){return e instanceof t?e.slice():t.from(e)}function dC({x:e,x1:t,x2:n}){return e!==void 0||t!==void 0||n!==void 0}function hC({y:e,y1:t,y2:n}){return e!==void 0||t!==void 0||n!==void 0}function Mv(e){return dC(e)||hC(e)||e.interval!==void 0}function Ii(e){return(e==null?void 0:e.toString)===Yrt}function nc(e){return Ii(e)&&(e.type!==void 0||e.domain!==void 0)}function hs(e){return Ii(e)&&typeof e.transform!="function"}function qa(e){return hs(e)&&e.value===void 0&&e.channel===void 0}function pC(e,t,n,r=_t){return t===void 0&&n===void 0?(t=0,n=e===void 0?r:e):t===void 0?t=e===void 0?0:e:n===void 0&&(n=e===void 0?0:e),[t,n]}function Zi(e,t){return e===void 0&&t===void 0?[Iy,xp]:[e,t]}function fl({z:e,fill:t,stroke:n}={}){return e===void 0&&([e]=Ir(t)),e===void 0&&([e]=Ir(n)),e}function Yo(e){const t=e.length,n=new Uint32Array(t);for(let r=0;r<t;++r)n[r]=r;return n}function $v(e,t){return Te(t,n=>e[n],e.constructor)}function K3(e){return e.length===1?(t,n)=>e($v(n,t)):e}function rc(e,t,n){return e.subarray?e.subarray(t,n):e.slice(t,n)}function Wl(e){return e!==null&&typeof e=="object"?e.valueOf():e}function yC(e,t){if(t[e]!==void 0)return t[e];switch(e){case"x1":case"x2":e="x";break;case"y1":case"y2":e="y";break}return t[e]}function Cr(e){let t;return[{transform:()=>t,label:qo(e)},n=>t=n]}function fr(e){return e==null?[e]:Cr(e)}function qo(e,t){return typeof e=="string"?e:e&&e.label!==void 0?e.label:t}function k1(e,t){return{transform(n){const r=e.transform(n),i=t.transform(n);return or(r)||or(i)?Te(r,(s,o)=>new Date((+r[o]+ +i[o])/2)):Te(r,(s,o)=>(+r[o]+ +i[o])/2,Float64Array)},label:e.label}}function D1(e,t){const n=mC(t==null?void 0:t.interval,t==null?void 0:t.type);return n?Te(e,n):e}function mC(e,t){const n=Z3(e,t);return n&&(r=>ir(r)?n.floor(r):r)}function Z3(e,t){if(e!=null){if(typeof e=="number"){0<e&&e<1&&Number.isInteger(1/e)&&(e=-1/e);const n=Math.abs(e);return e<0?{floor:r=>Math.floor(r*n)/n,offset:r=>(r*n+1)/n,range:(r,i)=>Lr(Math.ceil(r*n),i*n).map(s=>s/n)}:{floor:r=>Math.floor(r/n)*n,offset:r=>r+n,range:(r,i)=>Lr(Math.ceil(r/n),i/n).map(s=>s*n)}}if(typeof e=="string")return(t==="time"?aC:H3)(e);if(typeof e.floor!="function")throw new Error("invalid interval; missing floor method");if(typeof e.offset!="function")throw new Error("invalid interval; missing offset method");return e}}function sd(e,t){if(e=Z3(e,t),e&&typeof e.range!="function")throw new Error("invalid interval: missing range method");return e}function Qrt(e,t){if(e=sd(e,t),e&&typeof e.ceil!="function")throw new Error("invalid interval: missing ceil method");return e}function Krt(e){return Fu(e)&&typeof(e==null?void 0:e.floor)=="function"&&e.floor()instanceof Date}function Fu(e){return typeof(e==null?void 0:e.range)=="function"}function Ty(e){return e===void 0||hs(e)?e:{value:e}}function Zrt(e){return e==null?null:{transform:t=>Pt(t,e,Float64Array),label:qo(e)}}function Jrt(e){if(!Wo(e))return!1;for(const t of e)if(t!=null)return typeof t=="object"&&"0"in t&&"1"in t}function Wo(e){return e&&typeof e[Symbol.iterator]=="function"}function gC(e){for(const t of e)if(t!=null)return typeof t!="object"||t instanceof Date}function qe(e){for(const t of e){if(t==null)continue;const n=typeof t;return n==="string"||n==="boolean"}}function or(e){for(const t of e)if(t!=null)return t instanceof Date}function tit(e){for(const t of e)if(t!=null)return typeof t=="string"&&isNaN(t)&&ZO(t)}function eit(e){for(const t of e)if(t!=null){if(typeof t!="string")return!1;if(t.trim())return!isNaN(t)}}function Bu(e){for(const t of e)if(t!=null)return typeof t=="number"}function x_(e,t){let n;for(const r of e)if(r!=null){if(!t(r))return!1;n=!0}return n}const nit=new Set("none,currentcolor,transparent,aliceblue,antiquewhite,aqua,aquamarine,azure,beige,bisque,black,blanchedalmond,blue,blueviolet,brown,burlywood,cadetblue,chartreuse,chocolate,coral,cornflowerblue,cornsilk,crimson,cyan,darkblue,darkcyan,darkgoldenrod,darkgray,darkgreen,darkgrey,darkkhaki,darkmagenta,darkolivegreen,darkorange,darkorchid,darkred,darksalmon,darkseagreen,darkslateblue,darkslategray,darkslategrey,darkturquoise,darkviolet,deeppink,deepskyblue,dimgray,dimgrey,dodgerblue,firebrick,floralwhite,forestgreen,fuchsia,gainsboro,ghostwhite,gold,goldenrod,gray,green,greenyellow,grey,honeydew,hotpink,indianred,indigo,ivory,khaki,lavender,lavenderblush,lawngreen,lemonchiffon,lightblue,lightcoral,lightcyan,lightgoldenrodyellow,lightgray,lightgreen,lightgrey,lightpink,lightsalmon,lightseagreen,lightskyblue,lightslategray,lightslategrey,lightsteelblue,lightyellow,lime,limegreen,linen,magenta,maroon,mediumaquamarine,mediumblue,mediumorchid,mediumpurple,mediumseagreen,mediumslateblue,mediumspringgreen,mediumturquoise,mediumvioletred,midnightblue,mintcream,mistyrose,moccasin,navajowhite,navy,oldlace,olive,olivedrab,orange,orangered,orchid,palegoldenrod,palegreen,paleturquoise,palevioletred,papayawhip,peachpuff,peru,pink,plum,powderblue,purple,rebeccapurple,red,rosybrown,royalblue,saddlebrown,salmon,sandybrown,seagreen,seashell,sienna,silver,skyblue,slateblue,slategray,slategrey,snow,springgreen,steelblue,tan,teal,thistle,tomato,turquoise,violet,wheat,white,whitesmoke,yellow".split(","));function Ey(e){return typeof e!="string"?!1:(e=e.toLowerCase().trim(),/^#[0-9a-f]{3,8}$/.test(e)||/^(?:url|var|rgb|rgba|hsl|hsla|hwb|lab|lch|oklab|oklch|color|color-mix)\(.*\)$/.test(e)||nit.has(e))}function rit(e){return typeof e=="number"&&(0<=e&&e<=1||isNaN(e))}function Xe(e){return e==null||Bf(e)}function Bf(e){return/^\s*none\s*$/i.test(e)}function iit(e){return/^\s*round\s*$/i.test(e)}function bC(e,t){return fC(e,t,["middle","top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"])}function Ay(e="middle"){return bC(e,"frameAnchor")}function Lf(e){if(e==null)return;const t=e[0],n=e[e.length-1];return pc(t,n)}function sit(e={},...t){let n=e;for(const r of t)for(const i in r)if(n[i]===void 0){const s=r[i];n===e?n={...n,[i]:s}:n[i]=s}return n}function oit(e){console.warn("named iterables are deprecated; please use an object instead");const t=new Set;return Object.fromEntries(Array.from(e,n=>{const{name:r}=n;if(r==null)throw new Error("missing name");const i=`${r}`;if(i==="__proto__")throw new Error(`illegal name: ${i}`);if(t.has(i))throw new Error(`duplicate name: ${i}`);return t.add(i),[r,n]}))}function J3(e){return Wo(e)?oit(e):e}const Ts=Symbol("position"),Ho=Symbol("color"),My=Symbol("radius"),$y=Symbol("length"),Ny=Symbol("opacity"),Nv=Symbol("symbol"),vC=Symbol("projection"),Ue=new Map([["x",Ts],["y",Ts],["fx",Ts],["fy",Ts],["r",My],["color",Ho],["opacity",Ny],["symbol",Nv],["length",$y],["projection",vC]]);function ait(e){return e===Ts||e===vC}function lit(e){return e===Ts||e===My||e===$y||e===Ny}const wC=Math.sqrt(3),_C=2/wC,cit={draw(e,t){const n=Math.sqrt(t/Math.PI),r=n*_C,i=r/2;e.moveTo(0,r),e.lineTo(n,i),e.lineTo(n,-i),e.lineTo(0,-r),e.lineTo(-n,-i),e.lineTo(-n,i),e.closePath()}},tT=new Map([["asterisk",OR],["circle",Sp],["cross",FR],["diamond",LR],["diamond2",RR],["hexagon",cit],["plus",CR],["square",UR],["square2",PR],["star",jR],["times",WR],["triangle",VR],["triangle2",YR],["wye",qR]]);function eT(e){return e&&typeof e.draw=="function"}function uit(e){return eT(e)?!0:typeof e!="string"?!1:tT.has(e.toLowerCase())}function nT(e){if(e==null||eT(e))return e;const t=tT.get(`${e}`.toLowerCase());if(t)return t;throw new Error(`invalid symbol: ${e}`)}function fit(e){if(e==null||eT(e))return[void 0,e];if(typeof e=="string"){const t=tT.get(`${e}`.toLowerCase());if(t)return[void 0,t]}return[e,void 0]}function js({filter:e,sort:t,reverse:n,transform:r,initializer:i,...s}={},o){if(r===void 0&&(e!=null&&(r=rT(e)),t!=null&&!qa(t)&&(r=I_(r,sT(t))),n&&(r=I_(r,iT))),o!=null&&i!=null)throw new Error("transforms cannot be applied after initializers");return{...s,...(t===null||qa(t))&&{sort:t},transform:I_(r,o)}}function Er({filter:e,sort:t,reverse:n,initializer:r,...i}={},s){return r===void 0&&(e!=null&&(r=rT(e)),t!=null&&!qa(t)&&(r=T_(r,sT(t))),n&&(r=T_(r,iT))),{...i,...(t===null||qa(t))&&{sort:t},initializer:T_(r,s)}}function I_(e,t){return e==null?t===null?void 0:t:t==null?e===null?void 0:e:function(n,r,i){return{data:n,facets:r}=e.call(this,n,r,i),t.call(this,Tr(n),r,i)}}function T_(e,t){return e==null?t===null?void 0:t:t==null?e===null?void 0:e:function(n,r,i,...s){let o,a,l,c,u,f;return{data:a=n,facets:l=r,channels:o}=e.call(this,n,r,i,...s),{data:u=a,facets:f=l,channels:c}=t.call(this,a,l,{...i,...o},...s),{data:u,facets:f,channels:{...o,...c}}}}function kv(e,t){return(e.initializer!=null?Er:js)(e,t)}function dit(e,t){return kv(t,rT(e))}function rT(e){return(t,n)=>{const r=Pt(t,e);return{data:t,facets:n.map(i=>i.filter(s=>r[s]))}}}function hit({sort:e,...t}={}){return{...kv(t,iT),sort:qa(e)?e:null}}function iT(e,t){return{data:e,facets:t.map(n=>n.slice().reverse())}}function pit({seed:e,sort:t,...n}={}){return{...kv(n,xC(e==null?Math.random:F3(e))),sort:qa(t)?t:null}}function SC(e,{sort:t,...n}={}){return{...(hs(e)&&e.channel!==void 0?Er:kv)(n,sT(e)),sort:qa(t)?t:null}}function sT(e){return(typeof e=="function"&&e.length!==1?yit:xC)(e)}function yit(e){return(t,n)=>{const r=(i,s)=>e(t[i],t[s]);return{data:t,facets:n.map(i=>i.slice().sort(r))}}}function xC(e){let t,n;({channel:t,value:e,order:n}={...Ty(e)});const r=t==null?void 0:t.startsWith("-");if(r&&(t=t.slice(1)),n===void 0&&(n=r?$1:_i),typeof n!="function")switch(`${n}`.toLowerCase()){case"ascending":n=_i;break;case"descending":n=$1;break;default:throw new Error(`invalid order: ${n}`)}return(i,s,o)=>{let a;if(t===void 0)a=Pt(i,e);else{if(o===void 0)throw new Error("channel sort requires an initializer");if(a=o[t],!a)return{};a=a.value}const l=(c,u)=>n(a[c],a[u]);return{data:i,facets:s.map(c=>c.slice().sort(l))}}}function oT(e,t){return Dv(null,null,e,t)}function Tp(e={y:"count"},t={}){const{x:n=_t}=t;if(n==null)throw new Error("missing channel: x");return Dv(n,null,e,t)}function Ep(e={x:"count"},t={}){const{y:n=_t}=t;if(n==null)throw new Error("missing channel: y");return Dv(null,n,e,t)}function aT(e={fill:"count"},t={}){let{x:n,y:r}=t;if([n,r]=Zi(n,r),n==null)throw new Error("missing channel: x");if(r==null)throw new Error("missing channel: y");return Dv(n,r,e,t)}function Dv(e,t,{data:n=dT,filter:r,sort:i,reverse:s,...o}={},a={}){o=lT(o,a),n=Ov(n,_t),i=i==null?void 0:cT("sort",i,a),r=r==null?void 0:uT("filter",r,a);const[l,c]=fr(e),[u,f]=fr(t),{z:d,fill:h,stroke:p,x1:g,x2:v,y1:y,y2:m,...b}=a,[w,S]=fr(d),[_]=Ir(h),[x]=Ir(p),[E,k]=fr(_),[I,A]=fr(x);return{..."z"in a&&{z:w||d},..."fill"in a&&{fill:E||h},..."stroke"in a&&{stroke:I||p},...js(b,(D,L,T)=>{const M=D1(Pt(D,e),T==null?void 0:T.x),N=D1(Pt(D,t),T==null?void 0:T.y),B=Pt(D,d),O=Pt(D,_),C=Pt(D,x),F=fT(o,{z:B,fill:O,stroke:C}),P=[],z=[],H=M&&c([]),X=N&&f([]),tt=B&&S([]),Z=O&&k([]),Y=C&&A([]);let Q=0;for(const V of o)V.initialize(D);i&&i.initialize(D),r&&r.initialize(D);for(const V of L){const J=[];for(const et of o)et.scope("facet",V);i&&i.scope("facet",V),r&&r.scope("facet",V);for(const[et,j]of ef(V,F))for(const[At,at]of ef(j,N))for(const[qt,Ht]of ef(at,M))if(!(r&&!r.reduce(Ht))){J.push(Q++),z.push(n.reduceIndex(Ht,D)),M&&H.push(qt),N&&X.push(At),B&&tt.push(F===B?et:B[Ht[0]]),O&&Z.push(F===O?et:O[Ht[0]]),C&&Y.push(F===C?et:C[Ht[0]]);for(const st of o)st.reduce(Ht);i&&i.reduce(Ht)}P.push(J)}return IC(P,i,s),{data:z,facets:P}}),...!va(o,"x")&&(l?{x:l}:{x1:g,x2:v}),...!va(o,"y")&&(u?{y:u}:{y1:y,y2:m}),...Object.fromEntries(o.map(({name:D,output:L})=>[D,L]))}}function va(e,...t){for(const{name:n}of e)if(t.includes(n))return!0;return!1}function lT(e,t,n=cT){const r=Object.entries(e);return t.title!=null&&e.title===void 0&&r.push(["title",wit]),t.href!=null&&e.href===void 0&&r.push(["href",hT]),r.filter(([,i])=>i!==void 0).map(([i,s])=>s===null?mit(i):n(i,s,t))}function cT(e,t,n,r=uT){let i;Ii(t)&&"reduce"in t&&(i=t.scale,t=t.reduce);const s=r(e,t,n),[o,a]=Cr(s.label);let l;return{name:e,output:i===void 0?o:{value:o,scale:i},initialize(c){s.initialize(c),l=a([])},scope(c,u){s.scope(c,u)},reduce(c,u){l.push(s.reduce(c,u))}}}function mit(e){return{name:e,initialize(){},scope(){},reduce(){}}}function uT(e,t,n,r=Ov){const i=yC(e,n),s=r(t,i);let o,a;return{label:qo(s===O1?null:i,s.label),initialize(l){o=i===void 0?l:Pt(l,i),s.scope==="data"&&(a=s.reduceIndex(Yo(l),o))},scope(l,c){s.scope===l&&(a=s.reduceIndex(c,o))},reduce(l,c){return s.scope==null?s.reduceIndex(l,o,c):s.reduceIndex(l,o,a,c)}}}function ef(e,t){return t?up(Vo(e,n=>t[n]),Iy):[[,e]]}function Ov(e,t,n=git){if(e==null)return n(e);if(typeof e.reduceIndex=="function")return e;if(typeof e.reduce=="function"&&Ii(e))return bit(e);if(typeof e=="function")return vit(e);if(/^p\d{2}$/i.test(e))return to(X3(e));switch(`${e}`.toLowerCase()){case"first":return hT;case"last":return _it;case"identity":return dT;case"count":return O1;case"distinct":return Sit;case"sum":return t==null?O1:xit;case"proportion":return k$(t,"data");case"proportion-facet":return k$(t,"facet");case"deviation":return to(ly);case"min":return to(xn);case"min-index":return to(VG);case"max":return to(De);case"max-index":return to(jG);case"mean":return N$(ev);case"median":return N$(hp);case"variance":return to(u3);case"mode":return to(pF)}return n(e)}function git(e){throw new Error(`invalid reduce: ${e}`)}function fT(e,t){for(const n in t){const r=t[n];if(r!==void 0&&!e.some(i=>i.name===n))return r}}function IC(e,t,n){if(t){const r=t.output.transform(),i=(s,o)=>_i(r[s],r[o]);e.forEach(s=>s.sort(i))}n&&e.forEach(r=>r.reverse())}function bit(e){return console.warn("deprecated reduce interface; implement reduceIndex instead."),{...e,reduceIndex:e.reduce.bind(e)}}function vit(e){return{reduceIndex(t,n,r){return e($v(n,t),r)}}}function to(e){return{reduceIndex(t,n){return e(t,r=>n[r])}}}function N$(e){return{reduceIndex(t,n){const r=e(t,i=>n[i]);return or(n)?new Date(r):r}}}const dT={reduceIndex(e,t){return $v(t,e)}},hT={reduceIndex(e,t){return t[e[0]]}},wit={reduceIndex(e,t){const r=up(Ku(e,s=>s.length,s=>t[s]),xp),i=r.slice(-5).reverse();if(i.length<r.length){const s=r.slice(0,-4);i[4]=[` ${s.length.toLocaleString("en-US")} more`,Ls(s,xp)]}return i.map(([s,o])=>`${s} (${o.toLocaleString("en-US")})`).join(`
`)}},_it={reduceIndex(e,t){return t[e[e.length-1]]}},O1={label:"Frequency",reduceIndex(e){return e.length}},Sit={label:"Distinct",reduceIndex(e,t){const n=new cy;for(const r of e)n.add(t[r]);return n.size}},xit=to(Ls);function k$(e,t){return e==null?{scope:t,label:"Frequency",reduceIndex:(n,r,i=1)=>n.length/i}:{scope:t,reduceIndex:(n,r,i=1)=>Ls(n,s=>r[s])/i}}function Ap(e,{scale:t,type:n,value:r,filter:i,hint:s,label:o=qo(r)},a){return s===void 0&&typeof(r==null?void 0:r.transform)=="function"&&(s=r.hint),EC(a,{scale:t,type:n,value:Pt(e,r),label:o,filter:i,hint:s})}function TC(e,t){return Object.fromEntries(Object.entries(e).map(([n,r])=>[n,Ap(t,r,n)]))}function pT(e,t){const n=Object.fromEntries(Object.entries(e).map(([r,{scale:i,value:s}])=>{const o=i==null?null:t[i];return[r,o==null?s:Te(s,o)]}));return n.channels=e,n}function EC(e,t){const{scale:n,value:r}=t;if(n===!0||n==="auto")switch(e){case"fill":case"stroke":case"color":t.scale=n!==!0&&x_(r,Ey)?null:"color";break;case"fillOpacity":case"strokeOpacity":case"opacity":t.scale=n!==!0&&x_(r,rit)?null:"opacity";break;case"symbol":n!==!0&&x_(r,uit)?(t.scale=null,t.value=Te(r,nT)):t.scale="symbol";break;default:t.scale=Ue.has(e)?e:null;break}else if(n===!1)t.scale=null;else if(n!=null&&!Ue.has(n))throw new Error(`unknown scale: ${n}`);return t}function Iit(e,t,n,r,i){const{order:s,reverse:o,reduce:a=!0,limit:l}=i;for(const c in i){if(!Ue.has(c))continue;let{value:u,order:f=s,reverse:d=o,reduce:h=a,limit:p=l}=Ty(i[c]);const g=u==null?void 0:u.startsWith("-");if(g&&(u=u.slice(1)),f=f===void 0?g!==(u==="width"||u==="height")?MC:AC:Ait(f),h==null||h===!1)continue;const v=c==="fx"||c==="fy"?Eit(t,r[c]):Tit(n,c);if(!v)throw new Error(`missing channel for scale: ${c}`);const y=v.value,[m=0,b=1/0]=Wo(p)?p:p<0?[p]:[0,p];if(u==null)v.domain=()=>{let w=Array.from(new cy(y));return d&&(w=w.reverse()),(m!==0||b!==1/0)&&(w=w.slice(m,b)),w};else{const w=u==="data"?e:u==="height"?D$(n,"y1","y2"):u==="width"?D$(n,"x1","x2"):nx(n,u,u==="y"?"y2":u==="x"?"x2":void 0),S=Ov(h===!0?"max":h,w);v.domain=()=>{let _=RG(Yo(y),x=>S.reduceIndex(x,w),x=>y[x]);return f&&_.sort(f),d&&_.reverse(),(m!==0||b!==1/0)&&(_=_.slice(m,b)),_.map(Iy)}}}}function Tit(e,t){for(const n in e){const r=e[n];if(r.scale===t)return r}}function Eit(e,t){const n=e.original;if(n===e)return t;const r=t.value,i=t.value=[];for(let s=0;s<n.length;++s){const o=r[n[s][0]];for(const a of e[s])i[a]=o}return t}function D$(e,t,n){const r=nx(e,t),i=nx(e,n);return Te(i,(s,o)=>Math.abs(s-r[o]),Float64Array)}function nx(e,t,n){let r=e[t];if(!r&&n!==void 0&&(r=e[n]),r)return r.value;throw new Error(`missing channel: ${t}`)}function Ait(e){if(e==null||typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"ascending":return AC;case"descending":return MC}throw new Error(`invalid order: ${e}`)}function AC([e,t],[n,r]){return _i(t,r)||_i(e,n)}function MC([e,t],[n,r]){return $1(t,r)||_i(e,n)}function rx(e,t){let n=e[t];if(n){for(;n.source;)n=n.source;return n.source===null?null:n}}function yT(e){let t,n;return(...r)=>(((n==null?void 0:n.length)!==r.length||n.some((i,s)=>i!==r[s]))&&(n=r,t=e(...r)),t)}const Mit=yT(e=>new Intl.NumberFormat(e)),$it=yT((e,t)=>new Intl.DateTimeFormat(e,{timeZone:"UTC",...t&&{month:t}})),Nit=yT((e,t)=>new Intl.DateTimeFormat(e,{timeZone:"UTC",...t&&{weekday:t}}));function kit(e="en-US"){const t=Mit(e);return n=>n!=null&&!isNaN(n)?t.format(n):void 0}function Dit(e="en-US",t="short"){const n=$it(e,t);return r=>r!=null&&!isNaN(r=+new Date(Date.UTC(2e3,+r)))?n.format(r):void 0}function Oit(e="en-US",t="short"){const n=Nit(e,t);return r=>r!=null&&!isNaN(r=+new Date(Date.UTC(2001,0,+r)))?n.format(r):void 0}function $C(e){return KO(e,"Invalid Date")}function Fit(e="en-US"){const t=kit(e);return n=>(n instanceof Date?$C:typeof n=="number"?t:zn)(n)}const xc=Fit();let ix=0,sx;function Bit(){const e=ix;return ix=0,sx=void 0,e}function Eo(e){e!==sx&&(sx=e,console.warn(e),++ix)}const Mn=(typeof window<"u"?window.devicePixelRatio>1:typeof it>"u")?0:.5;let Lit=0;function O$(){return`plot-clip-${++Lit}`}function NC(e,{title:t,href:n,ariaLabel:r,ariaDescription:i,ariaHidden:s,target:o,fill:a,fillOpacity:l,stroke:c,strokeWidth:u,strokeOpacity:f,strokeLinejoin:d,strokeLinecap:h,strokeMiterlimit:p,strokeDasharray:g,strokeDashoffset:v,opacity:y,mixBlendMode:m,imageFilter:b,paintOrder:w,pointerEvents:S,shapeRendering:_,channels:x},{ariaLabel:E,fill:k="currentColor",fillOpacity:I,stroke:A="none",strokeOpacity:D,strokeWidth:L,strokeLinecap:T,strokeLinejoin:M,strokeMiterlimit:N,paintOrder:B}){k===null&&(a=null,l=null),A===null&&(c=null,f=null),Xe(k)?!Xe(A)&&(!Xe(a)||x!=null&&x.fill)&&(A="none"):Xe(A)&&(!Xe(c)||x!=null&&x.stroke)&&(k="none");const[O,C]=Ir(a,k),[F,P]=nn(l,I),[z,H]=Ir(c,A),[X,tt]=nn(f,D),[Z,Y]=nn(y);Bf(H)||(u===void 0&&(u=L),h===void 0&&(h=T),d===void 0&&(d=M),p===void 0&&!iit(d)&&(p=N),!Bf(C)&&w===void 0&&(w=B));const[Q,V]=nn(u);return k!==null&&(e.fill=We(C,"currentColor"),e.fillOpacity=Ld(P,1)),A!==null&&(e.stroke=We(H,"none"),e.strokeWidth=Ld(V,1),e.strokeOpacity=Ld(tt,1),e.strokeLinejoin=We(d,"miter"),e.strokeLinecap=We(h,"butt"),e.strokeMiterlimit=Ld(p,4),e.strokeDasharray=We(g,"none"),e.strokeDashoffset=We(v,"0")),e.target=zn(o),e.ariaLabel=zn(E),e.ariaDescription=zn(i),e.ariaHidden=zn(s),e.opacity=Ld(Y,1),e.mixBlendMode=We(m,"normal"),e.imageFilter=We(b,"none"),e.paintOrder=We(w,"normal"),e.pointerEvents=We(S,"auto"),e.shapeRendering=We(_,"auto"),{title:{value:t,optional:!0,filter:null},href:{value:n,optional:!0,filter:null},ariaLabel:{value:r,optional:!0,filter:null},fill:{value:O,scale:"auto",optional:!0},fillOpacity:{value:F,scale:"auto",optional:!0},stroke:{value:z,scale:"auto",optional:!0},strokeOpacity:{value:X,scale:"auto",optional:!0},strokeWidth:{value:Q,optional:!0},opacity:{value:Z,scale:"auto",optional:!0}}}function Rit(e,t){t&&e.filter(n=>q3(t[n])).append("title").call(Uit,t)}function Cit(e,t){t&&e.filter(([n])=>q3(t[n])).append("title").call(Pit,t)}function Uit(e,t){t&&e.text(n=>xc(t[n]))}function Pit(e,t){t&&e.text(([n])=>xc(t[n]))}function pn(e,{target:t,tip:n},{ariaLabel:r,title:i,fill:s,fillOpacity:o,stroke:a,strokeOpacity:l,strokeWidth:c,opacity:u,href:f}){r&&pt(e,"aria-label",d=>r[d]),s&&pt(e,"fill",d=>s[d]),o&&pt(e,"fill-opacity",d=>o[d]),a&&pt(e,"stroke",d=>a[d]),l&&pt(e,"stroke-opacity",d=>l[d]),c&&pt(e,"stroke-width",d=>c[d]),u&&pt(e,"opacity",d=>u[d]),f&&OC(e,d=>f[d],t),n||Rit(e,i)}function F1(e,{target:t,tip:n},{ariaLabel:r,title:i,fill:s,fillOpacity:o,stroke:a,strokeOpacity:l,strokeWidth:c,opacity:u,href:f}){r&&pt(e,"aria-label",([d])=>r[d]),s&&pt(e,"fill",([d])=>s[d]),o&&pt(e,"fill-opacity",([d])=>o[d]),a&&pt(e,"stroke",([d])=>a[d]),l&&pt(e,"stroke-opacity",([d])=>l[d]),c&&pt(e,"stroke-width",([d])=>c[d]),u&&pt(e,"opacity",([d])=>u[d]),f&&OC(e,([d])=>f[d],t),n||Cit(e,i)}function zit({ariaLabel:e,title:t,fill:n,fillOpacity:r,stroke:i,strokeOpacity:s,strokeWidth:o,opacity:a,href:l},{tip:c}){return[e,c?void 0:t,n,r,i,s,o,a,l].filter(u=>u!==void 0)}function mT(e,t,n){const r=Vo(e,i=>t[i]);return n===void 0&&r.size>1+e.length>>1&&Eo("Warning: the implicit z channel has high cardinality. This may occur when the fill or stroke channel is associated with quantitative data rather than ordinal or categorical data. You can suppress this warning by setting the z option explicitly; if this data represents a single series, set z to null."),r.values()}function*kC(e,t,n,r){const{z:i}=n,{z:s}=r,o=zit(r,n),a=[...t,...o];for(const l of s?mT(e,s,i):[e]){let c,u;t:for(const f of l){for(const d of a)if(!ir(d[f])){u&&u.push(-1);continue t}if(c===void 0){u&&(yield u),c=o.map(d=>Wl(d[f])),u=[f];continue}u.push(f);for(let d=0;d<o.length;++d)if(Wl(o[d][f])!==c[d]){yield u,c=o.map(p=>Wl(p[f])),u=[f];continue t}}u&&(yield u)}}function DC(e){return e===!0?e="frame":e===!1?e=null:e!=null&&(e=Xr(e,"clip",["frame","sphere"])),e}function jit(e,t,n,r){let i;const{clip:s=r.clip}=t;switch(s){case"frame":{const{width:o,height:a,marginLeft:l,marginRight:c,marginTop:u,marginBottom:f}=n,d=O$();i=`url(#${d})`,e=re("svg:g",r).call(h=>h.append("svg:clipPath").attr("id",d).append("rect").attr("x",l).attr("y",u).attr("width",o-c-l).attr("height",a-u-f)).each(function(){this.appendChild(e.node()),e.node=()=>this});break}case"sphere":{const{projection:o}=r;if(!o)throw new Error('the "sphere" clip option requires a projection');const a=O$();i=`url(#${a})`,e.append("clipPath").attr("id",a).append("path").attr("d",cl(o)({type:"Sphere"}));break}}pt(e,"aria-label",t.ariaLabel),pt(e,"aria-description",t.ariaDescription),pt(e,"aria-hidden",t.ariaHidden),pt(e,"clip-path",i)}function Oe(e,t,n,r){jit(e,t,n,r),pt(e,"fill",t.fill),pt(e,"fill-opacity",t.fillOpacity),pt(e,"stroke",t.stroke),pt(e,"stroke-width",t.strokeWidth),pt(e,"stroke-opacity",t.strokeOpacity),pt(e,"stroke-linejoin",t.strokeLinejoin),pt(e,"stroke-linecap",t.strokeLinecap),pt(e,"stroke-miterlimit",t.strokeMiterlimit),pt(e,"stroke-dasharray",t.strokeDasharray),pt(e,"stroke-dashoffset",t.strokeDashoffset),pt(e,"shape-rendering",t.shapeRendering),pt(e,"filter",t.imageFilter),pt(e,"paint-order",t.paintOrder);const{pointerEvents:i=r.pointerSticky===!1?"none":void 0}=t;pt(e,"pointer-events",i)}function $e(e,t){Vit(e,"mix-blend-mode",t.mixBlendMode),pt(e,"opacity",t.opacity)}function OC(e,t,n){e.each(function(r){const i=t(r);if(i!=null){const s=this.ownerDocument.createElementNS(mc.svg,"a");s.setAttribute("fill","inherit"),s.setAttributeNS(mc.xlink,"href",i),n!=null&&s.setAttribute("target",n),this.parentNode.insertBefore(s,this).appendChild(this)}})}function pt(e,t,n){n!=null&&e.attr(t,n)}function Vit(e,t,n){n!=null&&e.style(t,n)}function _e(e,t,{x:n,y:r},i=Mn,s=Mn){i+=t.dx,s+=t.dy,n!=null&&n.bandwidth&&(i+=n.bandwidth()/2),r!=null&&r.bandwidth&&(s+=r.bandwidth()/2),(i||s)&&e.attr("transform",`translate(${i},${s})`)}function We(e,t){if((e=zn(e))!==t)return e}function Ld(e,t){if((e=Yt(e))!==t)return e}const Yit=/^-?([_a-z]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])([_a-z0-9-]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])*$/i;function gT(e){if(e===void 0)return"plot-d6a7b5";if(e=`${e}`,!Yit.test(e))throw new Error(`invalid class name: ${e}`);return e}function bT(e,t){if(typeof t=="string")e.property("style",t);else if(t!=null)for(const n of e)Object.assign(n.style,t)}function Vs({frameAnchor:e},{width:t,height:n,marginTop:r,marginRight:i,marginBottom:s,marginLeft:o}){return[/left$/.test(e)?o:/right$/.test(e)?t-i:(o+t-i)/2,/^top/.test(e)?r:/^bottom/.test(e)?n-s:(r+n-s)/2]}function Fv(e={}){const{document:t=typeof window<"u"?window.document:void 0,clip:n}=e;return{document:t,clip:DC(n)}}function re(e,{document:t}){return be(iv(e).call(t.documentElement))}const FC=Math.PI,Hs=2*FC,F$=.618;function qit({projection:e,inset:t=0,insetTop:n=t,insetRight:r=t,insetBottom:i=t,insetLeft:s=t}={},o){if(e==null)return;if(typeof e.stream=="function")return e;let a,l,c="frame";if(Ii(e)){let S;if({type:e,domain:l,inset:S,insetTop:n=S!==void 0?S:n,insetRight:r=S!==void 0?S:r,insetBottom:i=S!==void 0?S:i,insetLeft:s=S!==void 0?S:s,clip:c=c,...a}=e,e==null)return}typeof e!="function"&&({type:e}=BC(e));const{width:u,height:f,marginLeft:d,marginRight:h,marginTop:p,marginBottom:g}=o,v=u-d-h-s-r,y=f-p-g-n-i;if(e=e==null?void 0:e({width:v,height:y,clip:c,...a}),e==null)return;c=Wit(c,d,p,u-h,f-g);let m=d+s,b=p+n,w;if(l!=null){const[[S,_],[x,E]]=cl(e).bounds(l),k=Math.min(v/(x-S),y/(E-_));k>0?(m-=(k*(S+x)-v)/2,b-=(k*(_+E)-y)/2,w=m1({point(I,A){this.stream.point(I*k+m,A*k+b)}})):Eo("Warning: the projection could not be fit to the specified domain; using the default scale.")}return w??(w=m===0&&b===0?LC():m1({point(S,_){this.stream.point(S+m,_+b)}})),{stream:S=>e.stream(w.stream(c(S)))}}function BC(e){switch(`${e}`.toLowerCase()){case"albers-usa":return Ai(Ett,.7463,.4673);case"albers":return D0(MB,.7463,.4673);case"azimuthal-equal-area":return Ai(Att,4,4);case"azimuthal-equidistant":return Ai(Mtt,Hs,Hs);case"conic-conformal":return D0(ktt,Hs,Hs);case"conic-equal-area":return D0(g1,6.1702,2.9781);case"conic-equidistant":return D0(Ftt,7.312,3.6282);case"equal-earth":return Ai(Ltt,5.4133,2.6347);case"equirectangular":return Ai(Dtt,Hs,FC);case"gnomonic":return Ai(Rtt,3.4641,3.4641);case"identity":return{type:LC};case"reflect-y":return{type:Hit};case"mercator":return Ai($tt,Hs,Hs);case"orthographic":return Ai(Ctt,2,2);case"stereographic":return Ai(Utt,2,2);case"transverse-mercator":return Ai(Ptt,Hs,Hs);default:throw new Error(`unknown projection type: ${e}`)}}function Wit(e,t,n,r,i){if(e===!1||e==null||typeof e=="number")return s=>s;switch(e===!0&&(e="frame"),`${e}`.toLowerCase()){case"frame":return dB(t,n,r,i);default:throw new Error(`unknown projection clip type: ${e}`)}}function Ai(e,t,n){return{type:({width:r,height:i,rotate:s,precision:o=.15,clip:a})=>{var c,u,f;const l=e();return o!=null&&((c=l.precision)==null||c.call(l,o)),s!=null&&((u=l.rotate)==null||u.call(l,s)),typeof a=="number"&&((f=l.clipAngle)==null||f.call(l,a)),l.scale(Math.min(r/t,i/n)),l.translate([r/2,i/2]),l},aspectRatio:n/t}}function D0(e,t,n){const{type:r,aspectRatio:i}=Ai(e,t,n);return{type:s=>{const{parallels:o,domain:a,width:l,height:c}=s,u=r(s);return o!=null&&(u.parallels(o),a===void 0&&u.fitSize([l,c],{type:"Sphere"})),u},aspectRatio:i}}const LC=qr({stream:e=>e}),Hit=qr(m1({point(e,t){this.stream.point(e,-t)}}));function RC(e,t,n,r){const i=n[e],s=n[t],o=i.length,a=n[e]=new Float64Array(o).fill(NaN),l=n[t]=new Float64Array(o).fill(NaN);let c;const u=r.stream({point(f,d){a[c]=f,l[c]=d}});for(c=0;c<o;++c)u.point(i[c],s[c])}function Git({projection:e}={}){return e==null?!1:typeof e.stream=="function"?!0:(Ii(e)&&(e=e.type),e!=null)}function Xit(e){if(typeof(e==null?void 0:e.stream)=="function")return F$;if(Ii(e)&&(e=e.type),e!=null){if(typeof e!="function"){const{aspectRatio:t}=BC(e);if(t)return t}return F$}}function Bv(e,t,{projection:n}){const{x:r,y:i}=e;let s={};return r&&(s.x=r),i&&(s.y=i),s=pT(s,t),n&&(r==null?void 0:r.scale)==="x"&&(i==null?void 0:i.scale)==="y"&&RC("x","y",s,n),r&&(s.x=gr(s.x)),i&&(s.y=gr(s.y)),s}function Qit(e){const t=[],n=[],r={scale:"x",value:t},i={scale:"y",value:n},s={point(o,a){t.push(o),n.push(a)},lineStart(){},lineEnd(){},polygonStart(){},polygonEnd(){},sphere(){}};for(const o of e.value)ha(o,s);return[r,i]}const CC=new Map([["accent",Xnt],["category10",Gnt],["dark2",Qnt],["paired",Knt],["pastel1",Znt],["pastel2",Jnt],["set1",trt],["set2",ert],["set3",nrt],["tableau10",rrt]]);function Kit(e){return e!=null&&CC.has(`${e}`.toLowerCase())}const B$=new Map([...CC,["brbg",Gs(bL,vL)],["prgn",Gs(wL,_L)],["piyg",Gs(SL,xL)],["puor",Gs(IL,TL)],["rdbu",Gs(JS,S1)],["rdgy",Gs(EL,AL)],["rdylbu",Gs(tx,x1)],["rdylgn",Gs(ML,$L)],["spectral",Gs(NL,kL)],["burd",L$(JS,S1)],["buylrd",L$(tx,x1)],["blues",yn(nR,rR)],["greens",yn(iR,sR)],["greys",yn(oR,aR)],["oranges",yn(dR,hR)],["purples",yn(lR,cR)],["reds",yn(uR,fR)],["turbo",Xs(wR)],["viridis",Xs(_R)],["magma",Xs(SR)],["inferno",Xs(xR)],["plasma",Xs(IR)],["cividis",Xs(pR)],["cubehelix",Xs(yR)],["warm",Xs(mR)],["cool",Xs(gR)],["bugn",yn(DL,OL)],["bupu",yn(FL,BL)],["gnbu",yn(LL,RL)],["orrd",yn(CL,UL)],["pubu",yn(jL,VL)],["pubugn",yn(PL,zL)],["purd",yn(YL,qL)],["rdpu",yn(WL,HL)],["ylgn",yn(QL,KL)],["ylgnbu",yn(GL,XL)],["ylorbr",yn(ZL,JL)],["ylorrd",yn(tR,eR)],["rainbow",R$(bR)],["sinebow",R$(vR)]]);function yn(e,t){return({length:n})=>n===1?[e[3][1]]:n===2?[e[3][1],e[3][2]]:(n=Math.max(3,Math.floor(n)),n>9?qi(t,n):e[n])}function Gs(e,t){return({length:n})=>n===2?[e[3][0],e[3][2]]:(n=Math.max(3,Math.floor(n)),n>11?qi(t,n):e[n])}function L$(e,t){return({length:n})=>n===2?[e[3][2],e[3][0]]:(n=Math.max(3,Math.floor(n)),n>11?qi(r=>t(1-r),n):e[n].slice().reverse())}function Xs(e){return({length:t})=>qi(e,Math.max(2,Math.floor(t)))}function R$(e){return({length:t})=>qi(e,Math.floor(t)+1).slice(0,-1)}function UC(e){const t=`${e}`.toLowerCase();if(!B$.has(t))throw new Error(`unknown ordinal scheme: ${t}`);return B$.get(t)}function Lv(e,t){const n=UC(e),r=typeof n=="function"?n({length:t}):n;return r.length!==t?r.slice(0,t):r}function Zit(e,t="greys"){const n=new Set,[r,i]=Lv(t,2);for(const s of e)if(s!=null)if(s===!0)n.add(i);else if(s===!1)n.add(r);else return;return[...n]}const C$=new Map([["brbg",vL],["prgn",_L],["piyg",xL],["puor",TL],["rdbu",S1],["rdgy",AL],["rdylbu",x1],["rdylgn",$L],["spectral",kL],["burd",e=>S1(1-e)],["buylrd",e=>x1(1-e)],["blues",rR],["greens",sR],["greys",aR],["purples",cR],["reds",fR],["oranges",hR],["turbo",wR],["viridis",_R],["magma",SR],["inferno",xR],["plasma",IR],["cividis",pR],["cubehelix",yR],["warm",mR],["cool",gR],["bugn",OL],["bupu",BL],["gnbu",RL],["orrd",UL],["pubugn",zL],["pubu",VL],["purd",qL],["rdpu",HL],["ylgnbu",XL],["ylgn",KL],["ylorbr",JL],["ylorrd",eR],["rainbow",bR],["sinebow",vR]]);function vT(e){const t=`${e}`.toLowerCase();if(!C$.has(t))throw new Error(`unknown quantitative scheme: ${t}`);return C$.get(t)}const Jit=new Set(["brbg","prgn","piyg","puor","rdbu","rdgy","rdylbu","rdylgn","spectral","burd","buylrd"]);function tst(e){return e!=null&&Jit.has(`${e}`.toLowerCase())}const PC=e=>t=>e(1-t),E_=[0,1],U$=new Map([["number",Un],["rgb",bc],["hsl",_K],["hcl",IK],["lab",SK]]);function zC(e){const t=`${e}`.toLowerCase();if(!U$.has(t))throw new Error(`unknown interpolator: ${t}`);return U$.get(t)}function ky(e,t,n,{type:r,nice:i,clamp:s,zero:o,domain:a=VC(e,n),unknown:l,round:c,scheme:u,interval:f,range:d=Ue.get(e)===My?fst(n,a):Ue.get(e)===$y?dst(n,a):Ue.get(e)===Ny?E_:void 0,interpolate:h=Ue.get(e)===Ho?u==null&&d!==void 0?bc:vT(u!==void 0?u:r==="cyclical"?"rainbow":"turbo"):c?S3:Un,reverse:p}){if(f=sd(f,r),(r==="cyclical"||r==="sequential")&&(r="linear"),typeof h!="function"&&(h=zC(h)),p=!!p,d!==void 0){const g=(a=Tr(a)).length,v=(d=Tr(d)).length;if(g!==v){if(h.length===1)throw new Error("invalid piecewise interpolator");h=av(h,d),d=void 0}}if(h.length===1?(p&&(h=PC(h),p=!1),d===void 0&&(d=Float64Array.from(a,(g,v)=>v/(a.length-1)),d.length===2&&(d=E_)),t.interpolate((d===E_?qr:_T)(h))):t.interpolate(h),o){const[g,v]=bn(a);(g>0||v<0)&&(a=Ip(a),Lf(a)!==Math.sign(g)?a[a.length-1]=0:a[0]=0)}return p&&(a=jg(a)),t.domain(a).unknown(l),i&&(t.nice(est(i,r)),a=t.domain()),d!==void 0&&t.range(d),s&&t.clamp(s),{type:r,domain:a,range:d,scale:t,interpolate:h,interval:f}}function est(e,t){return e===!0?void 0:typeof e=="number"?e:Qrt(e,t)}function nst(e,t,n){return ky(e,yv(),t,n)}function rst(e,t,n){return jC(e,t,{...n,exponent:.5})}function jC(e,t,{exponent:n=1,...r}){return ky(e,KB().exponent(n),t,{...r,type:"pow"})}function ist(e,t,{base:n=10,domain:r=hst(t),...i}){return ky(e,HB().base(n),t,{...i,domain:r})}function sst(e,t,{constant:n=1,...r}){return ky(e,XB().constant(n),t,r)}function ost(e,t,{range:n,quantiles:r=n===void 0?5:(n=[...n]).length,n:i=r,scheme:s="rdylbu",domain:o=pst(t),unknown:a,interpolate:l,reverse:c}){return n===void 0&&(n=l!==void 0?qi(l,i):Ue.get(e)===Ho?Lv(s,i):void 0),o.length>0&&(o=ZB(o,n===void 0?{length:i}:n).quantiles()),wT(e,t,{domain:o,range:n,reverse:c,unknown:a})}function ast(e,t,{range:n,n:r=n===void 0?5:(n=[...n]).length,scheme:i="rdylbu",domain:s=VC(e,t),unknown:o,interpolate:a,reverse:l}){const[c,u]=bn(s);let f;return n===void 0?(f=za(c,u,r),f[0]<=c&&f.splice(0,1),f[f.length-1]>=u&&f.pop(),r=f.length+1,n=a!==void 0?qi(a,r):Ue.get(e)===Ho?Lv(i,r):void 0):(f=qi(Un(c,u),r+1).slice(1,-1),c instanceof Date&&(f=f.map(d=>new Date(d)))),Lf(Tr(s))<0&&f.reverse(),wT(e,t,{domain:f,range:n,reverse:l,unknown:o})}function wT(e,t,{domain:n=[0],unknown:r,scheme:i="rdylbu",interpolate:s,range:o=s!==void 0?qi(s,n.length+1):Ue.get(e)===Ho?Lv(i,n.length+1):void 0,reverse:a}){n=Tr(n);const l=Lf(n);if(!isNaN(l)&&!lst(n,l))throw new Error(`the ${e} scale has a non-monotonic domain`);return a&&(o=jg(o)),{type:"threshold",scale:JB(l<0?jg(n):n,o===void 0?[]:o).unknown(r),domain:n,range:o}}function lst(e,t){for(let n=1,r=e.length,i=e[0];n<r;++n){const s=pc(i,i=e[n]);if(s!==0&&s!==t)return!1}return!0}function cst(e){return{type:"identity",scale:lit(Ue.get(e))?YB():t=>t}}function Mp(e,t=N1){return e.length?[xn(e,({value:n})=>n===void 0?n:xn(n,t)),De(e,({value:n})=>n===void 0?n:De(n,t))]:[0,1]}function VC(e,t){const n=Ue.get(e);return(n===My||n===Ny||n===$y?ust:Mp)(t)}function ust(e){return[0,e.length?De(e,({value:t})=>t===void 0?t:De(t,N1)):1]}function fst(e,t){const n=e.find(({radius:o})=>o!==void 0);if(n!==void 0)return[0,n.radius];const r=ja(e,.5,({value:o})=>o===void 0?NaN:ja(o,.25,To)),i=t.map(o=>3*Math.sqrt(o/r)),s=30/De(i);return s<1?i.map(o=>o*s):i}function dst(e,t){const n=hp(e,({value:s})=>s===void 0?NaN:hp(s,Math.abs)),r=t.map(s=>12*s/n),i=60/De(r);return i<1?r.map(s=>s*i):r}function hst(e){for(const{value:t}of e)if(t!==void 0)for(let n of t){if(n>0)return Mp(e,To);if(n<0)return Mp(e,Ev)}return[1,10]}function pst(e){const t=[];for(const{value:n}of e)if(n!==void 0)for(const r of n)t.push(r);return t}function _T(e){return(t,n)=>r=>e(t+r*(n-t))}function Rv(e,t,n,r,{type:i,nice:s,clamp:o,domain:a=Mp(r),unknown:l,pivot:c=0,scheme:u,range:f,symmetric:d=!0,interpolate:h=Ue.get(e)===Ho?u==null&&f!==void 0?bc:vT(u!==void 0?u:"rdbu"):Un,reverse:p}){c=+c,a=Tr(a);let[g,v]=a;if(a.length>2&&Eo(`Warning: the diverging ${e} scale domain contains extra elements.`),pc(g,v)<0&&([g,v]=[v,g],p=!p),g=Math.min(g,c),v=Math.max(v,c),typeof h!="function"&&(h=zC(h)),f!==void 0&&(h=h.length===1?_T(h)(...f):av(h,f)),p&&(h=PC(h)),d){const y=n.apply(c),m=y-n.apply(g),b=n.apply(v)-y;m<b?g=n.invert(y-b):m>b&&(v=n.invert(y+m))}return t.domain([g,c,v]).unknown(l).interpolator(h),o&&t.clamp(o),s&&t.nice(s),{type:i,domain:[g,v],pivot:c,interpolate:h,scale:t}}function yst(e,t,n){return Rv(e,pL(),vst,t,n)}function mst(e,t,n){return YC(e,t,{...n,exponent:.5})}function YC(e,t,{exponent:n=1,...r}){return Rv(e,gL().exponent(n=+n),Sst(n),t,{...r,type:"diverging-pow"})}function gst(e,t,{base:n=10,pivot:r=1,domain:i=Mp(t,r<0?Ev:To),...s}){return Rv(e,yL().base(n=+n),wst,t,{domain:i,pivot:r,...s})}function bst(e,t,{constant:n=1,...r}){return Rv(e,mL().constant(n=+n),xst(n),t,r)}const vst={apply(e){return e},invert(e){return e}},wst={apply:Math.log,invert:Math.exp},_st={apply(e){return Math.sign(e)*Math.sqrt(Math.abs(e))},invert(e){return Math.sign(e)*(e*e)}};function Sst(e){return e===.5?_st:{apply(t){return Math.sign(t)*Math.pow(Math.abs(t),e)},invert(t){return Math.sign(t)*Math.pow(Math.abs(t),1/e)}}}function xst(e){return{apply(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))},invert(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}}function qC(e,t,n,r){return ky(e,t,n,r)}function Ist(e,t,n){return qC(e,Wnt(),t,n)}function Tst(e,t,n){return qC(e,Hnt(),t,n)}const Dy=Symbol("ordinal");function WC(e,t,n,{type:r,interval:i,domain:s,range:o,reverse:a,hint:l}){return i=sd(i,r),s===void 0&&(s=GC(n,i,e)),(r==="categorical"||r===Dy)&&(r="ordinal"),a&&(s=jg(s)),s=t.domain(s).domain(),o!==void 0&&(typeof o=="function"&&(o=o(s)),t.range(o)),{type:r,domain:s,range:o,scale:t,hint:l,interval:i}}function Est(e,t,{type:n,interval:r,domain:i,range:s,scheme:o,unknown:a,...l}){r=sd(r,n),i===void 0&&(i=GC(t,r,e));let c;if(Ue.get(e)===Nv)c=$st(t),s=s===void 0?Nst(c):Te(s,nT);else if(Ue.get(e)===Ho&&(s===void 0&&(n==="ordinal"||n===Dy)&&(s=Zit(i,o),s!==void 0&&(o=void 0)),o===void 0&&s===void 0&&(o=n==="ordinal"?"turbo":"tableau10"),o!==void 0))if(s!==void 0){const u=vT(o),f=s[0],d=s[1]-s[0];s=({length:h})=>qi(p=>u(f+d*p),h)}else s=UC(o);if(a===QS)throw new Error(`implicit unknown on ${e} scale is not supported`);return WC(e,B3().unknown(a),t,{...l,type:n,domain:i,range:s,hint:c})}function Ast(e,t,{align:n=.5,padding:r=.5,...i}){return HC(Aet().align(n).padding(r),t,i,e)}function Mst(e,t,{align:n=.5,padding:r=.1,paddingInner:i=r,paddingOuter:s=e==="fx"||e==="fy"?0:r,...o}){return HC(hv().align(n).paddingInner(i).paddingOuter(s),t,o,e)}function HC(e,t,n,r){let{round:i}=n;return i!==void 0&&e.round(i=!!i),e=WC(r,e,t,n),e.round=i,e}function GC(e,t,n){const r=new cy;for(const{value:i,domain:s}of e){if(s!==void 0)return s();if(i!==void 0)for(const o of i)r.add(o)}if(t!==void 0){const[i,s]=bn(r).map(t.floor,t);return t.range(i,t.offset(s))}if(r.size>1e4&&Ue.get(n)===Ts)throw new Error(`implicit ordinal domain of ${n} scale has more than 10,000 values`);return up(r,_i)}function P$(e,t){let n;for(const{hint:r}of e){const i=r==null?void 0:r[t];if(i!==void 0){if(n===void 0)n=i;else if(n!==i)return}}return n}function $st(e){return{fill:P$(e,"fill"),stroke:P$(e,"stroke")}}function Nst(e){return Xe(e.fill)?mrt:yrt}function ox(e,{label:t,inset:n=0,insetTop:r=n,insetRight:i=n,insetBottom:s=n,insetLeft:o=n,round:a,nice:l,clamp:c,zero:u,align:f,padding:d,projection:h,facet:{label:p=t}={},...g}={}){const v={};for(const[y,m]of e){const b=g[y],w=ZC(y,m,{round:Ue.get(y)===Ts?a:void 0,nice:l,clamp:c,zero:u,align:f,padding:d,projection:h,...b});if(w){let{label:S=y==="fx"||y==="fy"?p:t,percent:_,transform:x,inset:E,insetTop:k=E!==void 0?E:y==="y"?r:0,insetRight:I=E!==void 0?E:y==="x"?i:0,insetBottom:A=E!==void 0?E:y==="y"?s:0,insetLeft:D=E!==void 0?E:y==="x"?o:0}=b||{};if(x==null)x=void 0;else if(typeof x!="function")throw new Error("invalid scale transform; not a function");w.percent=!!_,w.label=S===void 0?Dst(m,w):S,w.transform=x,y==="x"||y==="fx"?(w.insetLeft=+D,w.insetRight=+I):(y==="y"||y==="fy")&&(w.insetTop=+k,w.insetBottom=+A),v[y]=w}}return v}function z$(e){const t={},n={scales:t};for(const[r,i]of Object.entries(e)){const{scale:s,type:o,interval:a,label:l}=i;t[r]=t5(i),n[r]=s,s.type=o,a!=null&&(s.interval=a),l!=null&&(s.label=l)}return n}function kst(e,t){const{x:n,y:r,fx:i,fy:s}=e,o=i||s?ST(t):t;i&&j$(i,o),s&&V$(s,o);const a=i||s?XC(e,t):t;n&&j$(n,a),r&&V$(r,a)}function Dst(e=[],t){let n;for(const{label:r}of e)if(r!==void 0){if(n===void 0)n=r;else if(n!==r)return}if(n!==void 0)return!Dc(t)&&t.percent&&(n=`${n} (%)`),{inferred:!0,toString:()=>n}}function ST(e){const{marginTop:t,marginRight:n,marginBottom:r,marginLeft:i,width:s,height:o,facet:{marginTop:a,marginRight:l,marginBottom:c,marginLeft:u}}=e;return{marginTop:Math.max(t,a),marginRight:Math.max(n,l),marginBottom:Math.max(r,c),marginLeft:Math.max(i,u),width:s,height:o}}function XC({fx:e,fy:t},n){const{marginTop:r,marginRight:i,marginBottom:s,marginLeft:o,width:a,height:l}=ST(n);return{marginTop:r,marginRight:i,marginBottom:s,marginLeft:o,width:e?e.scale.bandwidth()+o+i:a,height:t?t.scale.bandwidth()+r+s:l,facet:{width:a,height:l}}}function j$(e,t){if(e.range===void 0){const{insetLeft:n,insetRight:r}=e,{width:i,marginLeft:s=0,marginRight:o=0}=t,a=s+n,l=i-o-r;e.range=[a,Math.max(a,l)],Dc(e)||(e.range=KC(e)),e.scale.range(e.range)}QC(e)}function V$(e,t){if(e.range===void 0){const{insetTop:n,insetBottom:r}=e,{height:i,marginTop:s=0,marginBottom:o=0}=t,a=s+n,l=i-o-r;e.range=[Math.max(a,l),a],Dc(e)?e.range.reverse():e.range=KC(e),e.scale.range(e.range)}QC(e)}function QC(e){e.round===void 0&&Bst(e)&&Ost(e)<=30&&e.scale.round(!0)}function Ost({scale:e}){const t=e.domain().length,[n,r]=e.range(),i=e.paddingInner?e.paddingInner():1,s=e.paddingOuter?e.paddingOuter():e.padding(),o=t-i,a=Math.abs(r-n)/Math.max(1,o+s*2);return(a-Math.floor(a))*o}function KC(e){const t=e.scale.domain().length+JC(e);if(!(t>2))return e.range;const[n,r]=e.range;return Array.from({length:t},(i,s)=>n+s/(t-1)*(r-n))}function ax(e,t,n){return ZC(e,n===void 0?void 0:[{hint:n}],{...t})}function ZC(e,t=[],n={}){const r=Fst(e,t,n);if(n.type===void 0&&n.domain===void 0&&n.range===void 0&&n.interval==null&&e!=="fx"&&e!=="fy"&&Dc({type:r})){const i=t.map(({value:s})=>s).filter(s=>s!==void 0);i.some(or)?Eo(`Warning: some data associated with the ${e} scale are dates. Dates are typically associated with a "utc" or "time" scale rather than a "${Wc(r)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can specify the interval of the ${e} scale (e.g., d3.utcDay), or you can suppress this warning by setting the type of the ${e} scale to "${Wc(r)}".`):i.some(tit)?Eo(`Warning: some data associated with the ${e} scale are strings that appear to be dates (e.g., YYYY-MM-DD). If these strings represent dates, you should parse them to Date objects. Dates are typically associated with a "utc" or "time" scale rather than a "${Wc(r)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can suppress this warning by setting the type of the ${e} scale to "${Wc(r)}".`):i.some(eit)&&Eo(`Warning: some data associated with the ${e} scale are strings that appear to be numbers. If these strings represent numbers, you should parse or coerce them to numbers. Numbers are typically associated with a "linear" scale rather than a "${Wc(r)}" scale. If you want to treat this data as ordinal, you can specify the interval of the ${e} scale (e.g., 1 for integers), or you can suppress this warning by setting the type of the ${e} scale to "${Wc(r)}".`)}switch(n.type=r,r){case"diverging":case"diverging-sqrt":case"diverging-pow":case"diverging-log":case"diverging-symlog":case"cyclical":case"sequential":case"linear":case"sqrt":case"threshold":case"quantile":case"pow":case"log":case"symlog":n=O0(t,n,gr);break;case"identity":switch(Ue.get(e)){case Ts:n=O0(t,n,gr);break;case Nv:n=O0(t,n,Lst);break}break;case"utc":case"time":n=O0(t,n,Xrt);break}switch(r){case"diverging":return yst(e,t,n);case"diverging-sqrt":return mst(e,t,n);case"diverging-pow":return YC(e,t,n);case"diverging-log":return gst(e,t,n);case"diverging-symlog":return bst(e,t,n);case"categorical":case"ordinal":case Dy:return Est(e,t,n);case"cyclical":case"sequential":case"linear":return nst(e,t,n);case"sqrt":return rst(e,t,n);case"threshold":return wT(e,t,n);case"quantile":return ost(e,t,n);case"quantize":return ast(e,t,n);case"pow":return jC(e,t,n);case"log":return ist(e,t,n);case"symlog":return sst(e,t,n);case"utc":return Tst(e,t,n);case"time":return Ist(e,t,n);case"point":return Ast(e,t,n);case"band":return Mst(e,t,n);case"identity":return cst(e);case void 0:return;default:throw new Error(`unknown scale type: ${r}`)}}function Wc(e){return typeof e=="symbol"?e.description:e}const Y$={toString:()=>"projection"};function Fst(e,t,{type:n,domain:r,range:i,scheme:s,pivot:o,projection:a}){if(e==="fx"||e==="fy")return"band";(e==="x"||e==="y")&&a!=null&&(n=Y$);for(const{type:c}of t)if(c!==void 0){if(n===void 0)n=c;else if(n!==c)throw new Error(`scale incompatible with channel: ${n} !== ${c}`)}if(n===Y$)return;if(n!==void 0)return n;if(r===void 0&&!t.some(({value:c})=>c!==void 0))return;const l=Ue.get(e);if(l===My)return"sqrt";if(l===Ny||l===$y)return"linear";if(l===Nv)return"ordinal";if((r||i||[]).length>2)return A_(l);if(r!==void 0){if(qe(r))return A_(l);if(or(r))return"utc"}else{const c=t.map(({value:u})=>u).filter(u=>u!==void 0);if(c.some(qe))return A_(l);if(c.some(or))return"utc"}if(l===Ho){if(o!=null||tst(s))return"diverging";if(Kit(s))return"categorical"}return"linear"}function A_(e){switch(e){case Ts:return"point";case Ho:return Dy;default:return"ordinal"}}function Dc({type:e}){return e==="ordinal"||e==="point"||e==="band"||e===Dy}function JC({type:e}){return e==="threshold"}function Bst({type:e}){return e==="point"||e==="band"}function hi(e){if(e===void 0)return!0;const t=e.domain(),n=e(t[0]);for(let r=1,i=t.length;r<i;++r)if(e(t[r])-n)return!1;return!0}function O0(e,{domain:t,...n},r){for(const i of e)i.value!==void 0&&(i.value=r(i.value));return{domain:t===void 0?t:r(t),...n}}function Lst(e){return Te(e,nT)}function Ic(e={}){let t;for(const n in e)if(Ue.has(n)&&nc(e[n])){if(t!==void 0)throw new Error("ambiguous scale definition; multiple scales found");t=t5(ax(n,e[n]))}if(t===void 0)throw new Error("invalid scale definition; no scale found");return t}function Rst(e){return t=>{if(!Ue.has(t=`${t}`))throw new Error(`unknown scale: ${t}`);return e[t]}}function t5({scale:e,type:t,domain:n,range:r,interpolate:i,interval:s,transform:o,percent:a,pivot:l}){if(t==="identity")return{type:"identity",apply:u=>u,invert:u=>u};const c=e.unknown?e.unknown():void 0;return{type:t,domain:Ip(n),...r!==void 0&&{range:Ip(r)},...o!==void 0&&{transform:o},...a&&{percent:a},...c!==void 0&&{unknown:c},...s!==void 0&&{interval:s},...i!==void 0&&{interpolate:i},...e.clamp&&{clamp:e.clamp()},...l!==void 0&&{pivot:l,symmetric:!1},...e.base&&{base:e.base()},...e.exponent&&{exponent:e.exponent()},...e.constant&&{constant:e.constant()},...e.align&&{align:e.align(),round:e.round()},...e.padding&&(e.paddingInner?{paddingInner:e.paddingInner(),paddingOuter:e.paddingOuter()}:{padding:e.padding()}),...e.bandwidth&&{bandwidth:e.bandwidth(),step:e.step()},apply:u=>e(u),...e.invert&&{invert:u=>e.invert(u)}}}function Cst(e,t,n={}){let r=.5-Mn,i=.5+Mn,s=.5+Mn,o=.5-Mn;for(const{marginTop:g,marginRight:v,marginBottom:y,marginLeft:m}of t)g>r&&(r=g),v>i&&(i=v),y>s&&(s=y),m>o&&(o=m);let{margin:a,marginTop:l=a!==void 0?a:r,marginRight:c=a!==void 0?a:i,marginBottom:u=a!==void 0?a:s,marginLeft:f=a!==void 0?a:o}=n;l=+l,c=+c,u=+u,f=+f;let{width:d=640,height:h=Ust(e,n,{width:d,marginTopDefault:r,marginRightDefault:i,marginBottomDefault:s,marginLeftDefault:o})+Math.max(0,l-r+u-s)}=n;d=+d,h=+h;const p={width:d,height:h,marginTop:l,marginRight:c,marginBottom:u,marginLeft:f};if(e.fx||e.fy){let{margin:g,marginTop:v=g!==void 0?g:l,marginRight:y=g!==void 0?g:c,marginBottom:m=g!==void 0?g:u,marginLeft:b=g!==void 0?g:f}=n.facet??{};v=+v,y=+y,m=+m,b=+b,p.facet={marginTop:v,marginRight:y,marginBottom:m,marginLeft:b}}return p}function Ust({x:e,y:t,fy:n,fx:r},{projection:i,aspectRatio:s},{width:o,marginTopDefault:a,marginRightDefault:l,marginBottomDefault:c,marginLeftDefault:u}){const f=n?n.scale.domain().length:1,d=Xit(i);if(d){const p=r?r.scale.domain().length:1,g=(1.1*f-.1)/(1.1*p-.1)*d,v=Math.max(.1,Math.min(10,g));return Math.round((o-u-l)*v+a+c)}const h=t?Dc(t)?t.scale.domain().length:Math.max(7,17/f):1;if(s!=null){if(s=+s,!(isFinite(s)&&s>0))throw new Error(`invalid aspectRatio: ${s}`);const p=q$("y",t)/(q$("x",e)*s),g=r?r.scale.bandwidth():1,v=n?n.scale.bandwidth():1,y=g*(o-u-l)-e.insetLeft-e.insetRight;return(p*y+t.insetTop+t.insetBottom)/v+a+c}return!!(t||n)*Math.max(1,Math.min(60,h*f))*20+!!r*30+60}function q$(e,t){if(!t)throw new Error(`aspectRatio requires ${e} scale`);const{type:n,domain:r}=t;let i;switch(n){case"linear":case"utc":case"time":i=Number;break;case"pow":{const a=t.scale.exponent();i=l=>Math.pow(l,a);break}case"log":i=Math.log;break;case"point":case"band":return r.length;default:throw new Error(`unsupported ${e} scale for aspectRatio: ${n}`)}const[s,o]=bn(r);return Math.abs(i(o)-i(s))}function Pst(e,t){const{fx:n,fy:r}=ox(e,t),i=n==null?void 0:n.scale.domain(),s=r==null?void 0:r.scale.domain();return i&&s?BG(i,s).map(([o,a],l)=>({x:o,y:a,i:l})):i?i.map((o,a)=>({x:o,i:a})):s?s.map((o,a)=>({y:o,i:a})):void 0}function zst(e,{x:t,y:n}){return t&&(t=lx(t)),n&&(n=lx(n)),e.filter(t&&n?r=>t.has(r.x)&&n.has(r.y):t?r=>t.has(r.x):r=>n.has(r.y)).sort(t&&n?(r,i)=>t.get(r.x)-t.get(i.x)||n.get(r.y)-n.get(i.y):t?(r,i)=>t.get(r.x)-t.get(i.x):(r,i)=>n.get(r.y)-n.get(i.y))}function xT(e,{fx:t,fy:n}){const r=Yo(e),i=t==null?void 0:t.value,s=n==null?void 0:n.value;return t&&n?Ku(r,o=>(o.fx=i[o[0]],o.fy=s[o[0]],o),o=>i[o],o=>s[o]):t?Ku(r,o=>(o.fx=i[o[0]],o),o=>i[o]):Ku(r,o=>(o.fy=s[o[0]],o),o=>s[o])}function jst(e,t,{marginTop:n,marginLeft:r}){return e&&t?({x:i,y:s})=>`translate(${e(i)-r},${t(s)-n})`:e?({x:i})=>`translate(${e(i)-r},0)`:({y:i})=>`translate(0,${t(i)-n})`}function Vst(e){const t=[],n=new Uint32Array(Ls(e,r=>r.length));for(const r of e){let i=0;for(const s of e)r!==s&&(n.set(s,i),i+=s.length);t.push(n.slice(0,i))}return t}const Yst=new Map([["top",M_],["right",k_],["bottom",$_],["left",N_],["top-left",F0(M_,N_)],["top-right",F0(M_,k_)],["bottom-left",F0($_,N_)],["bottom-right",F0($_,k_)],["top-empty",Hst],["right-empty",Qst],["bottom-empty",Gst],["left-empty",Xst],["empty",Kst]]);function qst(e){if(e==null)return null;const t=Yst.get(`${e}`.toLowerCase());if(t)return t;throw new Error(`invalid facet anchor: ${e}`)}const W$=new WeakMap;function lx(e){let t=W$.get(e);return t||W$.set(e,t=new yc(Te(e,(n,r)=>[n,r]))),t}function dl(e,t){return lx(e).get(t)}function Wst(e,t,n){return t=Wl(t),n=Wl(n),e.find(r=>Object.is(Wl(r.x),t)&&Object.is(Wl(r.y),n))}function Cv(e,t,n){var r;return(r=Wst(e,t,n))==null?void 0:r.empty}function M_(e,{y:t},{y:n}){return t?dl(t,n)===0:!0}function $_(e,{y:t},{y:n}){return t?dl(t,n)===t.length-1:!0}function N_(e,{x:t},{x:n}){return t?dl(t,n)===0:!0}function k_(e,{x:t},{x:n}){return t?dl(t,n)===t.length-1:!0}function Hst(e,{y:t},{x:n,y:r,empty:i}){if(i)return!1;if(!t)return;const s=dl(t,r);if(s>0)return Cv(e,n,t[s-1])}function Gst(e,{y:t},{x:n,y:r,empty:i}){if(i)return!1;if(!t)return;const s=dl(t,r);if(s<t.length-1)return Cv(e,n,t[s+1])}function Xst(e,{x:t},{x:n,y:r,empty:i}){if(i)return!1;if(!t)return;const s=dl(t,n);if(s>0)return Cv(e,t[s-1],r)}function Qst(e,{x:t},{x:n,y:r,empty:i}){if(i)return!1;if(!t)return;const s=dl(t,n);if(s<t.length-1)return Cv(e,t[s+1],r)}function Kst(e,t,{empty:n}){return n}function F0(e,t){return function(){return e.apply(null,arguments)&&t.apply(null,arguments)}}function D_(e,{channels:{fx:t,fy:n},groups:r}){return t&&n?e.map(({x:i,y:s})=>{var o;return((o=r.get(i))==null?void 0:o.get(s))??[]}):t?e.map(({x:i})=>r.get(i)??[]):e.map(({y:i})=>r.get(i)??[])}let Se=class{constructor(t,n={},r={},i){const{facet:s="auto",facetAnchor:o,fx:a,fy:l,sort:c,dx:u=0,dy:f=0,margin:d=0,marginTop:h=d,marginRight:p=d,marginBottom:g=d,marginLeft:v=d,clip:y=i==null?void 0:i.clip,channels:m,tip:b,render:w}=r;if(this.data=t,this.sort=qa(c)?c:null,this.initializer=Er(r).initializer,this.transform=this.initializer?r.transform:js(r).transform,s===null||s===!1?this.facet=null:(this.facet=Xr(s===!0?"include":s,"facet",["auto","include","exclude","super"]),this.fx=t===Oh&&typeof a=="string"?[a]:a,this.fy=t===Oh&&typeof l=="string"?[l]:l),this.facetAnchor=qst(o),n=J3(n),m!==void 0&&(n={...Zst(m),...n}),i!==void 0&&(n={...NC(this,r,i),...n}),this.channels=Object.fromEntries(Object.entries(n).map(([S,_])=>{if(hs(_.value)){const{value:x,label:E=_.label,scale:k=_.scale}=_.value;_={..._,label:E,scale:k,value:x}}if(t===Oh&&typeof _.value=="string"){const{value:x}=_;_={..._,value:[x]}}return[S,_]}).filter(([S,{value:_,optional:x}])=>{if(_!=null)return!0;if(x)return!1;throw new Error(`missing channel value: ${S}`)})),this.dx=+u,this.dy=+f,this.marginTop=+h,this.marginRight=+p,this.marginBottom=+g,this.marginLeft=+v,this.clip=DC(y),this.tip=Jst(b),this.facet==="super"){if(a||l)throw new Error("super-faceting cannot use fx or fy");for(const S in this.channels){const{scale:_}=n[S];if(!(_!=="x"&&_!=="y"))throw new Error("super-faceting cannot use x or y")}}w!=null&&(this.render=e5(w,this.render))}initialize(t,n,r){let i=Tr(this.data);t===void 0&&i!=null&&(t=[Yo(i)]);const s=t;this.transform!=null&&({facets:t,data:i}=this.transform(i,t,r),i=Tr(i)),t!==void 0&&(t.original=s);const o=TC(this.channels,i);return this.sort!=null&&Iit(i,t,o,n,this.sort),{data:i,facets:t,channels:o}}filter(t,n,r){for(const i in n){const{filter:s=ir}=n[i];if(s!==null){const o=r[i];t=t.filter(a=>s(o[a]))}}return t}project(t,n,r){for(const i in t)if(t[i].scale==="x"&&/^x|x$/.test(i)){const s=i.replace(/^x|x$/,"y");s in t&&t[s].scale==="y"&&RC(i,s,n,r.projection)}}scale(t,n,r){const i=pT(t,n);return r.projection&&this.project(t,i,r),i}};function Xi(...e){return e.plot=Se.prototype.plot,e}function e5(e,t){if(e==null)return t===null?void 0:t;if(t==null)return e===null?void 0:e;if(typeof e!="function")throw new TypeError(`invalid render transform: ${e}`);if(typeof t!="function")throw new TypeError(`invalid render transform: ${t}`);return function(n,r,i,s,o,a){return e.call(this,n,r,i,s,o,(l,c,u,f,d)=>t.call(this,l,c,u,f,d,a))}}function Zst(e){return Object.fromEntries(Object.entries(J3(e)).map(([t,n])=>(n=typeof n=="string"?{value:n,label:t}:Ty(n),n.filter===void 0&&n.scale==null&&(n={...n,filter:null}),[t,n])))}function Jst(e){return e===!0?"xy":e===!1||e==null?null:typeof e=="string"?Xr(e,"tip",["x","y","xy"]):e}function od(e,t){return(e==null?void 0:e.tip)===!0?{...e,tip:t}:Ii(e==null?void 0:e.tip)&&e.tip.pointer===void 0?{...e,tip:{...e.tip,pointer:t}}:e}const H$=new WeakMap;function IT(e,t,{x:n,y:r,px:i,py:s,maxRadius:o=40,channels:a,render:l,...c}={}){return o=+o,i!=null&&(n??(n=null),a={...a,px:{value:i,scale:"x"}}),s!=null&&(r??(r=null),a={...a,py:{value:s,scale:"y"}}),{x:n,y:r,channels:a,...c,render:e5(function(u,f,d,h,p,g){p={...p,pointerSticky:!1};const v=p.ownerSVGElement,{data:y}=p.getMarkState(this);let m=H$.get(v);m||H$.set(v,m={sticky:!1,roots:[],renders:[]});let b=m.renders.push(H)-1;const{x:w,y:S,fx:_,fy:x}=f;let E=_?_(u.fx)-h.marginLeft:0,k=x?x(u.fy)-h.marginTop:0;w!=null&&w.bandwidth&&(E+=w.bandwidth()/2),S!=null&&S.bandwidth&&(k+=S.bandwidth()/2);const I=u.fi!=null;let A;if(I){let Y=m.facetStates;Y||(m.facetStates=Y=new Map),A=Y.get(this),A||Y.set(this,A=new Map)}const[D,L]=Vs(this,h),{px:T,py:M}=d,N=T?Y=>T[Y]:n5(d,D),B=M?Y=>M[Y]:r5(d,L);let O,C,F,P;function z(Y,Q){if(I)if(P&&(P=cancelAnimationFrame(P)),Y==null)A.delete(u.fi);else{A.set(u.fi,Q),P=requestAnimationFrame(()=>{P=null;for(const[V,J]of A)if(J<Q||J===Q&&V<u.fi){Y=null;break}H(Y)});return}H(Y)}function H(Y){if(O===Y&&F===m.sticky)return;O=Y,F=p.pointerSticky=m.sticky;const Q=O==null?[]:[O];I&&(Q.fx=u.fx,Q.fy=u.fy,Q.fi=u.fi);const V=g(Q,f,d,h,p);if(C){if(I){const J=C.parentNode,et=C.getAttribute("transform"),j=V.getAttribute("transform");et?V.setAttribute("transform",et):V.removeAttribute("transform"),j?J.setAttribute("transform",j):J.removeAttribute("transform"),V.removeAttribute("aria-label"),V.removeAttribute("aria-description"),V.removeAttribute("aria-hidden")}C.replaceWith(V)}return m.roots[b]=C=V,O==null&&(A==null?void 0:A.size)>1||p.dispatchValue(O==null?null:y[O]),V}function X(Y){if(m.sticky||Y.pointerType==="mouse"&&Y.buttons===1)return;let[Q,V]=ki(Y);Q-=E,V-=k;const J=Q<h.marginLeft||Q>h.width-h.marginRight?1:e,et=V<h.marginTop||V>h.height-h.marginBottom?1:t;let j=null,At=o*o;for(const at of u){const qt=J*(N(at)-Q),Ht=et*(B(at)-V),st=qt*qt+Ht*Ht;st<=At&&(j=at,At=st)}if(j!=null&&(e!==1||t!==1)){const at=N(j)-Q,qt=B(j)-V;At=at*at+qt*qt}z(j,At)}function tt(Y){Y.pointerType==="mouse"&&O!=null&&(m.sticky&&m.roots.some(Q=>Q==null?void 0:Q.contains(Y.target))||(m.sticky?(m.sticky=!1,m.renders.forEach(Q=>Q(null))):(m.sticky=!0,H(O)),Y.stopImmediatePropagation()))}function Z(Y){Y.pointerType==="mouse"&&(m.sticky||z(null))}return v.addEventListener("pointerenter",X),v.addEventListener("pointermove",X),v.addEventListener("pointerdown",tt),v.addEventListener("pointerleave",Z),H(null)},l)}}function TT(e){return IT(1,1,e)}function ET(e){return IT(1,.01,e)}function AT(e){return IT(.01,1,e)}function n5({x1:e,x2:t,x:n=e},r){return e&&t?i=>(e[i]+t[i])/2:n?i=>n[i]:()=>r}function r5({y1:e,y2:t,y:n=e},r){return e&&t?i=>(e[i]+t[i])/2:n?i=>n[i]:()=>r}function i5(e){return Dc(e)&&e.interval===void 0?void 0:"tabular-nums"}function tot(e,t){let{label:n=e.label,tickSize:r=6,width:i=240,height:s=44+r,marginTop:o=18,marginRight:a=0,marginBottom:l=16+r,marginLeft:c=0,style:u,ticks:f=(i-c-a)/64,tickFormat:d,fontVariant:h=i5(e),round:p=!0,opacity:g,className:v}=t;const y=Fv(t);v=gT(v),g=nn(g)[1],d===null&&(d=()=>null);const m=re("svg",y).attr("class",`${v}-ramp`).attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("width",i).attr("height",s).attr("viewBox",`0 0 ${i} ${s}`).call(D=>D.append("style").text(`.${v}-ramp {
  display: block;
  background: white;
  height: auto;
  height: intrinsic;
  max-width: 100%;
  overflow: visible;
}
.${v}-ramp text {
  white-space: pre;
}`)).call(bT,u);let b=D=>D.selectAll(".tick line").attr("y1",o+l-s),w;const S=p?(D,L)=>D.rangeRound(L):(D,L)=>D.range(L),{type:_,domain:x,range:E,interpolate:k,scale:I,pivot:A}=e;if(k){const D=E===void 0?k:av(k.length===1?_T(k):k,E);w=S(I.copy(),qi(Un(c,i-a),Math.min(x.length+(A!==void 0),E===void 0?1/0:E.length)));const L=256,T=y.document.createElement("canvas");T.width=L,T.height=1;const M=T.getContext("2d");for(let N=0,B=L-1;N<L;++N)M.fillStyle=D(N/B),M.fillRect(N,0,1,1);m.append("image").attr("opacity",g).attr("x",c).attr("y",o).attr("width",i-c-a).attr("height",s-o-l).attr("preserveAspectRatio","none").attr("xlink:href",T.toDataURL())}else if(_==="threshold"){const D=x,L=d===void 0?T=>T:typeof d=="string"?rd(d):d;w=S(yv().domain([-1,E.length-1]),[c,i-a]),m.append("g").attr("fill-opacity",g).selectAll().data(E).enter().append("rect").attr("x",(T,M)=>w(M-1)).attr("y",o).attr("width",(T,M)=>w(M)-w(M-1)).attr("height",s-o-l).attr("fill",T=>T),f=Te(D,(T,M)=>M),d=T=>L(D[T],T)}else w=S(hv().domain(x),[c,i-a]),m.append("g").attr("fill-opacity",g).selectAll().data(x).enter().append("rect").attr("x",w).attr("y",o).attr("width",Math.max(0,w.bandwidth()-1)).attr("height",s-o-l).attr("fill",I),b=()=>{};return m.append("g").attr("transform",`translate(0,${s-l})`).call(rX(w).ticks(Array.isArray(f)?null:f,typeof d=="string"?d:void 0).tickFormat(typeof d=="function"?d:void 0).tickSize(r).tickValues(Array.isArray(f)?f:null)).attr("font-size",null).attr("font-family",null).attr("font-variant",We(h,"normal")).call(b).call(D=>D.select(".domain").remove()),n!==void 0&&m.append("text").attr("x",c).attr("y",o-6).attr("fill","currentColor").attr("font-weight","bold").text(n),m.node()}const B1=Math.PI/180;function ad(e,{marker:t,markerStart:n=t,markerMid:r=t,markerEnd:i=t}={}){e.markerStart=O_(n),e.markerMid=O_(r),e.markerEnd=O_(i)}function O_(e){if(e==null||e===!1)return null;if(e===!0)return X$;if(typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"none":return null;case"arrow":return G$("auto");case"arrow-reverse":return G$("auto-start-reverse");case"dot":return eot;case"circle":case"circle-fill":return X$;case"circle-stroke":return not}throw new Error(`invalid marker: ${e}`)}function G$(e){return(t,n)=>re("svg:marker",n).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("orient",e).attr("fill","none").attr("stroke",t).attr("stroke-width",1.5).attr("stroke-linecap","round").attr("stroke-linejoin","round").call(r=>r.append("path").attr("d","M-1.5,-3l3,3l-3,3")).node()}function eot(e,t){return re("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",e).attr("stroke","none").call(n=>n.append("circle").attr("r",2.5)).node()}function X$(e,t){return re("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",e).attr("stroke","white").attr("stroke-width",1.5).call(n=>n.append("circle").attr("r",3)).node()}function not(e,t){return re("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill","white").attr("stroke",e).attr("stroke-width",1.5).call(n=>n.append("circle").attr("r",3)).node()}let rot=0;function Oy(e,t,{stroke:n},r){return s5(e,t,n&&(i=>n[i]),r)}function iot(e,t,{stroke:n},r){return s5(e,t,n&&(([i])=>n[i]),r)}function s5(e,{markerStart:t,markerMid:n,markerEnd:r,stroke:i},s=()=>i,o){const a=new Map;function l(c){return function(u){const f=s(u);let d=a.get(c);d||a.set(c,d=new Map);let h=d.get(f);if(!h){const p=this.parentNode.insertBefore(c(f,o),this),g=`plot-marker-${++rot}`;p.setAttribute("id",g),d.set(f,h=`url(#${g})`)}return h}}t&&e.attr("marker-start",l(t)),n&&e.attr("marker-mid",l(n)),r&&e.attr("marker-end",l(r))}function Fy({inset:e,insetLeft:t,insetRight:n,...r}={}){return[t,n]=o5(e,t,n),{inset:e,insetLeft:t,insetRight:n,...r}}function By({inset:e,insetTop:t,insetBottom:n,...r}={}){return[t,n]=o5(e,t,n),{inset:e,insetTop:t,insetBottom:n,...r}}function o5(e,t,n){return e===void 0&&t===void 0&&n===void 0?Mn?[1,0]:[.5,.5]:[t,n]}function a5(e,{interval:t}){return e={...Ty(e)},e.interval=Z3(e.interval===void 0?t:e.interval),e}function Uv(e,t,n,r){const{[e]:i,[`${e}1`]:s,[`${e}2`]:o}=n,{value:a,interval:l}=a5(i,n);if(a==null||l==null&&!r)return n;const c=qo(i);if(l==null){let h;const p={transform:g=>h||(h=Pt(g,a)),label:c};return{...n,[e]:void 0,[`${e}1`]:s===void 0?p:s,[`${e}2`]:o===void 0?p:o}}let u,f;function d(h){return f!==void 0&&h===u?f:f=Te(Pt(u=h,a),p=>l.floor(p))}return t({...n,[e]:void 0,[`${e}1`]:s===void 0?{transform:d,label:c}:s,[`${e}2`]:o===void 0?{transform:h=>d(h).map(p=>l.offset(p)),label:c}:o})}function l5(e,t,n){const{[e]:r}=n,{value:i,interval:s}=a5(r,n);return i==null||s==null?n:t({...n,[e]:{label:qo(r),transform:o=>{const a=Te(Pt(o,i),c=>s.floor(c)),l=a.map(c=>s.offset(c));return a.map(or(a)?(c,u)=>c==null||isNaN(c=+c)||(u=l[u],u==null)||isNaN(u=+u)?void 0:new Date((c+u)/2):(c,u)=>c==null||(u=l[u],u==null)?NaN:(+c+ +u)/2)}}})}function c5(e={}){return Uv("x",Fy,e,!0)}function u5(e={}){return Uv("y",By,e,!0)}function f5(e={}){return Uv("x",Fy,e)}function d5(e={}){return Uv("y",By,e)}function h5(e={}){return l5("x",Fy,e)}function p5(e={}){return l5("y",By,e)}const y5={ariaLabel:"rule",fill:null,stroke:"currentColor"};class m5 extends Se{constructor(t,n={}){const{x:r,y1:i,y2:s,inset:o=0,insetTop:a=o,insetBottom:l=o}=n;super(t,{x:{value:r,scale:"x",optional:!0},y1:{value:i,scale:"y",optional:!0},y2:{value:s,scale:"y",optional:!0}},od(n,"x"),y5),this.insetTop=Yt(a),this.insetBottom=Yt(l),ad(this,n)}render(t,n,r,i,s){const{x:o,y:a}=n,{x:l,y1:c,y2:u}=r,{width:f,height:d,marginTop:h,marginRight:p,marginLeft:g,marginBottom:v}=i,{insetTop:y,insetBottom:m}=this;return re("svg:g",s).call(Oe,this,i,s).call(_e,this,{x:l&&o},Mn,0).call(b=>b.selectAll().data(t).enter().append("line").call($e,this).attr("x1",l?w=>l[w]:(g+f-p)/2).attr("x2",l?w=>l[w]:(g+f-p)/2).attr("y1",c&&!hi(a)?w=>c[w]+y:h+y).attr("y2",u&&!hi(a)?a.bandwidth?w=>u[w]+a.bandwidth()-m:w=>u[w]-m:d-v-m).call(pn,this,r).call(Oy,this,r,s)).node()}}class g5 extends Se{constructor(t,n={}){const{x1:r,x2:i,y:s,inset:o=0,insetRight:a=o,insetLeft:l=o}=n;super(t,{y:{value:s,scale:"y",optional:!0},x1:{value:r,scale:"x",optional:!0},x2:{value:i,scale:"x",optional:!0}},od(n,"y"),y5),this.insetRight=Yt(a),this.insetLeft=Yt(l),ad(this,n)}render(t,n,r,i,s){const{x:o,y:a}=n,{y:l,x1:c,x2:u}=r,{width:f,height:d,marginTop:h,marginRight:p,marginLeft:g,marginBottom:v}=i,{insetLeft:y,insetRight:m}=this;return re("svg:g",s).call(Oe,this,i,s).call(_e,this,{y:l&&a},0,Mn).call(b=>b.selectAll().data(t).enter().append("line").call($e,this).attr("x1",c&&!hi(o)?w=>c[w]+y:g+y).attr("x2",u&&!hi(o)?o.bandwidth?w=>u[w]+o.bandwidth()-m:w=>u[w]-m:f-p-m).attr("y1",l?w=>l[w]:(h+d-v)/2).attr("y2",l?w=>l[w]:(h+d-v)/2).call(pn,this,r).call(Oy,this,r,s)).node()}}function Wa(e,t){let{x:n=_t,y:r,y1:i,y2:s,...o}=d5(t);return[i,s]=b5(r,i,s),new m5(e,{...o,x:n,y1:i,y2:s})}function Ha(e,t){let{y:n=_t,x:r,x1:i,x2:s,...o}=f5(t);return[i,s]=b5(r,i,s),new g5(e,{...o,y:n,x1:i,x2:s})}function b5(e,t,n){if(e==null){if(t===void 0){if(n!==void 0)return[0,n]}else if(n===void 0)return[0,t]}else{if(t===void 0)return n===void 0?[0,e]:[e,n];if(n===void 0)return[e,t]}return[t,n]}function Pv(e,...t){let n=t.length;for(let r=0,i=!0;r<n;++r)typeof t[r]!="function"&&(i&&(e=e.slice(),i=!1),e.splice(r,2,e[r]+t[r]+e[r+1]),t.splice(r,1),--r,--n);return r=>{let i=e[0];for(let s=0;s<n;++s)i+=t[s](r)+e[s+1];return i}}const sot={ariaLabel:"text",strokeLinejoin:"round",strokeWidth:3,paintOrder:"stroke"},v5="";class zv extends Se{constructor(t,n={}){const{x:r,y:i,text:s=Wo(t)&&gC(t)?_t:Nr,frameAnchor:o,textAnchor:a=/right$/i.test(o)?"end":/left$/i.test(o)?"start":"middle",lineAnchor:l=/^top/i.test(o)?"top":/^bottom/i.test(o)?"bottom":"middle",lineHeight:c=1,lineWidth:u=1/0,textOverflow:f,monospace:d,fontFamily:h=d?"ui-monospace, monospace":void 0,fontSize:p,fontStyle:g,fontVariant:v,fontWeight:y,rotate:m}=n,[b,w]=nn(m,0),[S,_]=cot(p);if(super(t,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},fontSize:{value:S,optional:!0},rotate:{value:Zrt(b),optional:!0},text:{value:s,filter:q3,optional:!0}},n,sot),this.rotate=w,this.textAnchor=We(a,"middle"),this.lineAnchor=Xr(l,"lineAnchor",["top","middle","bottom"]),this.lineHeight=+c,this.lineWidth=+u,this.textOverflow=w5(f),this.monospace=!!d,this.fontFamily=zn(h),this.fontSize=_,this.fontStyle=zn(g),this.fontVariant=zn(v),this.fontWeight=zn(y),this.frameAnchor=Ay(o),!(this.lineWidth>=0))throw new Error(`invalid lineWidth: ${u}`);this.splitLines=I5(this),this.clipLine=T5(this)}render(t,n,r,i,s){const{x:o,y:a}=n,{x:l,y:c,rotate:u,text:f,title:d,fontSize:h}=r,{rotate:p}=this,[g,v]=Vs(this,i);return re("svg:g",s).call(Oe,this,i,s).call(x5,this,f,i).call(_e,this,{x:l&&o,y:c&&a}).call(y=>y.selectAll().data(t).enter().append("text").call($e,this).call(oot,this,f,d).attr("transform",Pv`translate(${l?m=>l[m]:g},${c?m=>c[m]:v})${u?m=>` rotate(${u[m]})`:p?` rotate(${p})`:""}`).call(pt,"font-size",h&&(m=>h[m])).call(pn,this,r)).node()}}function w5(e){return e==null?null:Xr(e,"textOverflow",["clip","ellipsis","clip-start","clip-end","ellipsis-start","ellipsis-middle","ellipsis-end"]).replace(/^(clip|ellipsis)$/,"$1-end")}function oot(e,t,n,r){if(!n)return;const{lineAnchor:i,lineHeight:s,textOverflow:o,splitLines:a,clipLine:l}=t;e.each(function(c){const u=a(xc(n[c])??"").map(l),f=u.length,d=i==="top"?.71:i==="bottom"?1-f:(164-f*100)/200;if(f>1){let h=0;for(let p=0;p<f;++p){if(++h,!u[p])continue;const g=this.ownerDocument.createElementNS(mc.svg,"tspan");g.setAttribute("x",0),p===h-1?g.setAttribute("y",`${(d+p)*s}em`):g.setAttribute("dy",`${h*s}em`),g.textContent=u[p],this.appendChild(g),h=0}}else d&&this.setAttribute("y",`${d*s}em`),this.textContent=u[0];if(o&&!r&&u[0]!==n[c]){const h=this.ownerDocument.createElementNS(mc.svg,"title");h.textContent=n[c],this.appendChild(h)}})}function Rf(e,{x:t,y:n,...r}={}){return r.frameAnchor===void 0&&([t,n]=Zi(t,n)),new zv(e,{...r,x:t,y:n})}function _5(e,{x:t=_t,...n}={}){return new zv(e,p5({...n,x:t}))}function S5(e,{y:t=_t,...n}={}){return new zv(e,h5({...n,y:t}))}function x5(e,t,n){pt(e,"text-anchor",t.textAnchor),pt(e,"font-family",t.fontFamily),pt(e,"font-size",t.fontSize),pt(e,"font-style",t.fontStyle),pt(e,"font-variant",t.fontVariant===void 0?aot(n):t.fontVariant),pt(e,"font-weight",t.fontWeight)}function aot(e){return e&&(Bu(e)||or(e))?"tabular-nums":void 0}const lot=new Set(["inherit","initial","revert","unset","xx-small","x-small","small","medium","large","x-large","xx-large","xxx-large","larger","smaller"]);function cot(e){return e==null||typeof e=="number"?[void 0,e]:typeof e!="string"?[e,void 0]:(e=e.trim().toLowerCase(),lot.has(e)||/^[+-]?\d*\.?\d+(e[+-]?\d+)?(\w*|%)$/.test(e)?[void 0,e]:[e,void 0])}function uot(e,t,n){const r=[];let i,s=0;for(const[o,a,l]of fot(e)){if(i===void 0&&(i=o),s>i&&n(e,i,a)>t&&(r.push(e.slice(i,s)+(e[s-1]===v5?"-":"")),i=o),l){r.push(e.slice(i,a)),i=void 0;continue}s=a}return r}function*fot(e){let t=0,n=0;const r=e.length;for(;n<r;){let i=1;switch(e[n]){case v5:case"-":++n,yield[t,n,!1],t=n;break;case" ":for(yield[t,n,!1];e[++n]===" ";);t=n;break;case"\r":e[n+1]===`
`&&++i;case`
`:yield[t,n,!0],n+=i,t=n;break;default:++n;break}}yield[t,n,!0]}const Q$={a:56,b:63,c:57,d:63,e:58,f:37,g:62,h:60,i:26,j:26,k:55,l:26,m:88,n:60,o:60,p:62,q:62,r:39,s:54,t:38,u:60,v:55,w:79,x:54,y:55,z:55,A:69,B:67,C:73,D:74,E:61,F:58,G:76,H:75,I:28,J:55,K:67,L:58,M:89,N:75,O:78,P:65,Q:78,R:67,S:65,T:65,U:75,V:69,W:98,X:69,Y:67,Z:67,0:64,1:48,2:62,3:64,4:66,5:63,6:65,7:58,8:65,9:65," ":29,"!":32,'"':49,"'":31,"(":39,")":39,",":31,"-":48,".":31,"/":32,":":31,";":31,"?":52,"":31,"":31,"":47,"":47,"":82};function MT(e,t=0,n=e.length){let r=0;for(let i=t;i<n;i=ld(e,i))r+=Q$[e[i]]??(A5(e,i)?120:Q$.e);return r}function $T(e,t=0,n=e.length){let r=0;for(let i=t;i<n;i=ld(e,i))r+=A5(e,i)?200:100;return r}function I5({monospace:e,lineWidth:t,textOverflow:n}){if(n!=null||t==1/0)return s=>s.split(/\r\n?|\n/g);const r=e?$T:MT,i=t*100;return s=>uot(s,i,r)}function T5({monospace:e,lineWidth:t,textOverflow:n}){if(n==null||t==1/0)return s=>s;const r=e?$T:MT,i=t*100;switch(n){case"clip-start":return s=>Z$(s,i,r,"");case"clip-end":return s=>K$(s,i,r,"");case"ellipsis-start":return s=>Z$(s,i,r,nf);case"ellipsis-middle":return s=>dot(s,i,r,nf);case"ellipsis-end":return s=>K$(s,i,r,nf)}}const nf="";function Cf(e,t,n,r){const i=[];let s=0;for(let o=0,a=0,l=e.length;o<l;o=a){a=ld(e,o);const c=n(e,o,a);if(s+c>t){for(s+=r;s>t&&o>0;)a=o,o=i.pop(),s-=n(e,o,a);return[o,t-s]}s+=c,i.push(o)}return[-1,0]}function K$(e,t,n,r){e=e.trim();const i=n(r),[s]=Cf(e,t,n,i);return s<0?e:e.slice(0,s).trimEnd()+r}function dot(e,t,n,r){e=e.trim();const i=n(e);if(i<=t)return e;const s=n(r)/2,[o,a]=Cf(e,t/2,n,s),[l]=Cf(e,i-t/2-a+s,n,-s);return l<0?r:e.slice(0,o).trimEnd()+r+e.slice(ld(e,l)).trimStart()}function Z$(e,t,n,r){e=e.trim();const i=n(e);if(i<=t)return e;const s=n(r),[o]=Cf(e,i-t+s,n,-s);return o<0?r:r+e.slice(ld(e,o)).trimStart()}const cx=/[\p{Combining_Mark}\p{Emoji_Modifier}]+/uy,J$=new RegExp("\\p{Extended_Pictographic}","uy");function ld(e,t){return t+=hot(e,t)?2:1,yot(e,t)&&(t=cx.lastIndex),pot(e,t)?ld(e,t+1):t}function E5(e,t){return e.charCodeAt(t)<128}function hot(e,t){const n=e.charCodeAt(t);if(n>=55296&&n<56320){const r=e.charCodeAt(t+1);return r>=56320&&r<57344}return!1}function pot(e,t){return e.charCodeAt(t)===8205}function yot(e,t){return E5(e,t)?!1:(cx.lastIndex=t,cx.test(e))}function A5(e,t){return E5(e,t)?!1:(J$.lastIndex=t,J$.test(e))}const M5={ariaLabel:"vector",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinejoin:"round",strokeLinecap:"round"},$5=3.5,mot=$5*5,N5={draw(e,t,n){const r=t*n/mot;e.moveTo(0,0),e.lineTo(0,-t),e.moveTo(-r,r-t),e.lineTo(0,-t),e.lineTo(r,r-t)}},k5={draw(e,t,n){e.moveTo(-n,0),e.lineTo(0,-t),e.lineTo(n,0)}},got=new Map([["arrow",N5],["spike",k5]]);function bot(e){return e&&typeof e.draw=="function"}function vot(e){if(bot(e))return e;const t=got.get(`${e}`.toLowerCase());if(t)return t;throw new Error(`invalid shape: ${e}`)}let jv=class extends Se{constructor(t,n={}){const{x:r,y:i,r:s=$5,length:o,rotate:a,shape:l=N5,anchor:c="middle",frameAnchor:u}=n,[f,d]=nn(o,12),[h,p]=nn(a,0);super(t,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},length:{value:f,scale:"length",optional:!0},rotate:{value:h,optional:!0}},n,M5),this.r=+s,this.length=d,this.rotate=p,this.shape=vot(l),this.anchor=Xr(c,"anchor",["start","middle","end"]),this.frameAnchor=Ay(u)}render(t,n,r,i,s){const{x:o,y:a}=n,{x:l,y:c,length:u,rotate:f}=r,{length:d,rotate:h,anchor:p,shape:g,r:v}=this,[y,m]=Vs(this,i);return re("svg:g",s).call(Oe,this,i,s).call(_e,this,{x:l&&o,y:c&&a}).call(b=>b.selectAll().data(t).enter().append("path").call($e,this).attr("transform",Pv`translate(${l?w=>l[w]:y},${c?w=>c[w]:m})${f?w=>` rotate(${f[w]})`:h?` rotate(${h})`:""}${p==="start"?"":p==="end"?u?w=>` translate(0,${u[w]})`:` translate(0,${d})`:u?w=>` translate(0,${u[w]/2})`:` translate(0,${d/2})`}`).attr("d",u?w=>{const S=vo();return g.draw(S,u[w],v),S}:(()=>{const w=vo();return g.draw(w,d,v),w})()).call(pn,this,r)).node()}};function D5(e,t={}){let{x:n,y:r,...i}=t;return t.frameAnchor===void 0&&([n,r]=Zi(n,r)),new jv(e,{...i,x:n,y:r})}function O5(e,t={}){const{x:n=_t,...r}=t;return new jv(e,{...r,x:n})}function F5(e,t={}){const{y:n=_t,...r}=t;return new jv(e,{...r,y:n})}function wot(e,t={}){const{shape:n=k5,stroke:r=M5.stroke,strokeWidth:i=1,fill:s=r,fillOpacity:o=.3,anchor:a="start",...l}=t;return D5(e,{...l,shape:n,stroke:r,strokeWidth:i,fill:s,fillOpacity:o,anchor:a})}function hl(e,t){return arguments.length<2&&!Wo(e)&&(t=e,e=null),t===void 0&&(t={}),[e,t]}function Vv({anchor:e}={},t){return e===void 0?t[0]:Xr(e,"anchor",t)}function B5(e){return Vv(e,["left","right"])}function L5(e){return Vv(e,["right","left"])}function R5(e){return Vv(e,["bottom","top"])}function C5(e){return Vv(e,["top","bottom"])}function NT(){const[e,t]=hl(...arguments);return z5("y",B5(t),e,t)}function U5(){const[e,t]=hl(...arguments);return z5("fy",L5(t),e,t)}function kT(){const[e,t]=hl(...arguments);return j5("x",R5(t),e,t)}function P5(){const[e,t]=hl(...arguments);return j5("fx",C5(t),e,t)}function z5(e,t,n,{color:r="currentColor",opacity:i=1,stroke:s=r,strokeOpacity:o=i,strokeWidth:a=1,fill:l=r,fillOpacity:c=i,textAnchor:u,textStroke:f,textStrokeOpacity:d,textStrokeWidth:h,tickSize:p=e==="y"?6:0,tickPadding:g,tickRotate:v,x:y,margin:m,marginTop:b=m===void 0?20:m,marginRight:w=m===void 0?t==="right"?40:0:m,marginBottom:S=m===void 0?20:m,marginLeft:_=m===void 0?t==="left"?40:0:m,label:x,labelAnchor:E,labelArrow:k,labelOffset:I,...A}){return p=Yt(p),g=Yt(g),v=Yt(v),E!==void 0&&(E=Xr(E,"labelAnchor",["center","top","bottom"])),k=t7(k),Xi(p&&!Xe(s)?_ot(e,t,n,{stroke:s,strokeOpacity:o,strokeWidth:a,tickSize:p,tickPadding:g,tickRotate:v,x:y,...A}):null,Xe(l)?null:xot(e,t,n,{fill:l,fillOpacity:c,stroke:f,strokeOpacity:d,strokeWidth:h,textAnchor:u,tickSize:p,tickPadding:g,tickRotate:v,x:y,marginTop:b,marginRight:w,marginBottom:S,marginLeft:_,...A}),!Xe(l)&&x!==null?Rf([],Q5({fill:l,fillOpacity:c,...A},function(D,L,T,M,N){const B=M[e],{marginTop:O,marginRight:C,marginBottom:F,marginLeft:P}=e==="y"&&N.inset||N,z=E??(B.bandwidth?"center":"top"),H=I??(t==="right"?C:P)-3;return z==="center"?(this.textAnchor=void 0,this.lineAnchor=t==="right"?"bottom":"top",this.frameAnchor=t,this.rotate=-90):(this.textAnchor=t==="right"?"end":"start",this.lineAnchor=z,this.frameAnchor=`${z}-${t}`,this.rotate=0),this.dy=z==="top"?3-O:z==="bottom"?F-3:0,this.dx=t==="right"?H:-H,this.ariaLabel=`${e}-axis label`,{facets:[[0]],channels:{text:{value:[J5(e,B,{anchor:t,label:x,labelAnchor:z,labelArrow:k})]}}}})):null)}function j5(e,t,n,{color:r="currentColor",opacity:i=1,stroke:s=r,strokeOpacity:o=i,strokeWidth:a=1,fill:l=r,fillOpacity:c=i,textAnchor:u,textStroke:f,textStrokeOpacity:d,textStrokeWidth:h,tickSize:p=e==="x"?6:0,tickPadding:g,tickRotate:v,y,margin:m,marginTop:b=m===void 0?t==="top"?30:0:m,marginRight:w=m===void 0?20:m,marginBottom:S=m===void 0?t==="bottom"?30:0:m,marginLeft:_=m===void 0?20:m,label:x,labelAnchor:E,labelArrow:k,labelOffset:I,...A}){return p=Yt(p),g=Yt(g),v=Yt(v),E!==void 0&&(E=Xr(E,"labelAnchor",["center","left","right"])),k=t7(k),Xi(p&&!Xe(s)?Sot(e,t,n,{stroke:s,strokeOpacity:o,strokeWidth:a,tickSize:p,tickPadding:g,tickRotate:v,y,...A}):null,Xe(l)?null:Iot(e,t,n,{fill:l,fillOpacity:c,stroke:f,strokeOpacity:d,strokeWidth:h,textAnchor:u,tickSize:p,tickPadding:g,tickRotate:v,y,marginTop:b,marginRight:w,marginBottom:S,marginLeft:_,...A}),!Xe(l)&&x!==null?Rf([],Q5({fill:l,fillOpacity:c,...A},function(D,L,T,M,N){const B=M[e],{marginTop:O,marginRight:C,marginBottom:F,marginLeft:P}=e==="x"&&N.inset||N,z=E??(B.bandwidth?"center":"right"),H=I??(t==="top"?O:F)-3;return z==="center"?(this.frameAnchor=t,this.textAnchor=void 0):(this.frameAnchor=`${t}-${z}`,this.textAnchor=z==="right"?"end":"start"),this.lineAnchor=t,this.dy=t==="top"?-H:H,this.dx=z==="right"?C-3:z==="left"?3-P:0,this.ariaLabel=`${e}-axis label`,{facets:[[0]],channels:{text:{value:[J5(e,B,{anchor:t,label:x,labelAnchor:z,labelArrow:k})]}}}})):null)}function _ot(e,t,n,{strokeWidth:r=1,strokeLinecap:i=null,strokeLinejoin:s=null,facetAnchor:o=t+(e==="y"?"-empty":""),frameAnchor:a=t,tickSize:l,inset:c=0,insetLeft:u=c,insetRight:f=c,dx:d=0,y:h=e==="y"?void 0:null,...p}){return cd(F5,e,t,`${e}-axis tick`,n,{strokeWidth:r,strokeLinecap:i,strokeLinejoin:s,facetAnchor:o,frameAnchor:a,y:h,...p,dx:t==="left"?+d-Mn+ +u:+d+Mn-f,anchor:"start",length:l,shape:t==="left"?Mot:$ot})}function Sot(e,t,n,{strokeWidth:r=1,strokeLinecap:i=null,strokeLinejoin:s=null,facetAnchor:o=t+(e==="x"?"-empty":""),frameAnchor:a=t,tickSize:l,inset:c=0,insetTop:u=c,insetBottom:f=c,dy:d=0,x:h=e==="x"?void 0:null,...p}){return cd(O5,e,t,`${e}-axis tick`,n,{strokeWidth:r,strokeLinejoin:s,strokeLinecap:i,facetAnchor:o,frameAnchor:a,x:h,...p,dy:t==="bottom"?+d-Mn-f:+d+Mn+ +u,anchor:"start",length:l,shape:t==="bottom"?Eot:Aot})}function xot(e,t,n,{facetAnchor:r=t+(e==="y"?"-empty":""),frameAnchor:i=t,tickSize:s,tickRotate:o=0,tickPadding:a=Math.max(3,9-s)+(Math.abs(o)>60?4*Math.cos(o*B1):0),text:l,textAnchor:c=Math.abs(o)>60?"middle":t==="left"?"end":"start",lineAnchor:u=o>60?"top":o<-60?"bottom":"middle",fontVariant:f,inset:d=0,insetLeft:h=d,insetRight:p=d,dx:g=0,y:v=e==="y"?void 0:null,...y}){return cd(S5,e,t,`${e}-axis tick label`,n,{facetAnchor:r,frameAnchor:i,text:l,textAnchor:c,lineAnchor:u,fontVariant:f,rotate:o,y:v,...y,dx:t==="left"?+g-s-a+ +h:+g+ +s+ +a-p},function(m,b,w,S,_){f===void 0&&(this.fontVariant=Z5(m)),l===void 0&&(_.text=K5(m,b,w,S,t))})}function Iot(e,t,n,{facetAnchor:r=t+(e==="x"?"-empty":""),frameAnchor:i=t,tickSize:s,tickRotate:o=0,tickPadding:a=Math.max(3,9-s)+(Math.abs(o)>=10?4*Math.cos(o*B1):0),text:l,textAnchor:c=Math.abs(o)>=10?o<0^t==="bottom"?"start":"end":"middle",lineAnchor:u=Math.abs(o)>=10?"middle":t==="bottom"?"top":"bottom",fontVariant:f,inset:d=0,insetTop:h=d,insetBottom:p=d,dy:g=0,x:v=e==="x"?void 0:null,...y}){return cd(_5,e,t,`${e}-axis tick label`,n,{facetAnchor:r,frameAnchor:i,text:l===void 0?null:l,textAnchor:c,lineAnchor:u,fontVariant:f,rotate:o,x:v,...y,dy:t==="bottom"?+g+ +s+ +a-p:+g-s-a+ +h},function(m,b,w,S,_){f===void 0&&(this.fontVariant=Z5(m)),l===void 0&&(_.text=K5(m,b,w,S,t))})}function V5(){const[e,t]=hl(...arguments);return H5("y",B5(t),e,t)}function Y5(){const[e,t]=hl(...arguments);return H5("fy",L5(t),e,t)}function q5(){const[e,t]=hl(...arguments);return G5("x",R5(t),e,t)}function W5(){const[e,t]=hl(...arguments);return G5("fx",C5(t),e,t)}function H5(e,t,n,{y:r=e==="y"?void 0:null,x:i=null,x1:s=t==="left"?i:null,x2:o=t==="right"?i:null,...a}){return cd(Ha,e,t,`${e}-grid`,n,{y:r,x1:s,x2:o,...X5(a)})}function G5(e,t,n,{x:r=e==="x"?void 0:null,y:i=null,y1:s=t==="top"?i:null,y2:o=t==="bottom"?i:null,...a}){return cd(Wa,e,t,`${e}-grid`,n,{x:r,y1:s,y2:o,...X5(a)})}function X5({color:e="currentColor",opacity:t=.1,stroke:n=e,strokeOpacity:r=t,strokeWidth:i=1,...s}){return{stroke:n,strokeOpacity:r,strokeWidth:i,...s}}function Q5({fill:e,fillOpacity:t,fontFamily:n,fontSize:r,fontStyle:i,fontVariant:s,fontWeight:o,monospace:a,pointerEvents:l,shapeRendering:c,clip:u=!1},f){return[,e]=Ir(e),[,t]=nn(t),{facet:"super",x:null,y:null,fill:e,fillOpacity:t,fontFamily:n,fontSize:r,fontStyle:i,fontVariant:s,fontWeight:o,monospace:a,pointerEvents:l,shapeRendering:c,clip:u,initializer:f}}function cd(e,t,n,r,i,s,o){let a;function l(f,d,h,p,g,v){const y=f==null&&(t==="fx"||t==="fy"),{[t]:m}=p;if(!m)throw new Error(`missing scale: ${t}`);const b=m.domain();let{interval:w,ticks:S,tickFormat:_,tickSpacing:x=t==="x"?80:35}=s;if(typeof S=="string"&&e7(m)&&(w=S,S=void 0),S===void 0&&(S=sd(w,m.type)??Tot(m,x)),f==null){if(Wo(S))f=Tr(S);else if(Fu(S))f=F_(S,...bn(b));else if(m.interval){let k=m.interval;if(m.ticks){const[I,A]=bn(b),D=(A-I)/k[xy];k=E$(k,D/S)??k,f=F_(k,I,A)}else{f=b;const I=f.length;k=E$(k,I/S)??k,k!==m.interval&&(f=F_(k,...bn(f)))}if(k===m.interval){const I=Math.round(f.length/S);I>1&&(f=f.filter((A,D)=>D%I===0))}}else m.ticks?f=m.ticks(S):f=b;if(!m.ticks&&f.length&&f!==b){const k=new cy(b);f=f.filter(I=>k.has(I)),f.length||Eo(`Warning: the ${t}-axis ticks appear to not align with the scale domain, resulting in no ticks. Try different ticks?`)}t==="y"||t==="x"?d=[Yo(f)]:a[t]={scale:t,value:_t}}o==null||o.call(this,m,f,S,_,a);const E=Object.fromEntries(Object.entries(a).map(([k,I])=>[k,{...I,value:Pt(f,I.value)}]));return y&&(d=v.filterFacets(f,E)),{data:f,facets:d,channels:E}}const c=Er(s).initializer,u=e(i,Er({...s,initializer:l},c));return i==null?(a=u.channels,u.channels={}):a={},u.ariaLabel=r,u.clip===void 0&&(u.clip=!1),u}function Tot(e,t){const[n,r]=bn(e.range());return(r-n)/t}function K5(e,t,n,r,i){return{value:DT(e,t,n,r,i)}}function DT(e,t,n,r,i){return typeof r=="function"?r:r===void 0&&t&&or(t)?Vrt(t,i)??xc:e.tickFormat?e.tickFormat(typeof n=="number"?n:null,r):r===void 0?xc:typeof r=="string"?(or(e.domain())?_y:rd)(r):qr(r)}function F_(e,t,n){return e.range(t,e.offset(e.floor(n)))}const Eot={draw(e,t){e.moveTo(0,0),e.lineTo(0,t)}},Aot={draw(e,t){e.moveTo(0,0),e.lineTo(0,-t)}},Mot={draw(e,t){e.moveTo(0,0),e.lineTo(-t,0)}},$ot={draw(e,t){e.moveTo(0,0),e.lineTo(t,0)}};function Z5(e){return e.bandwidth&&!e.interval?void 0:"tabular-nums"}function Not(e){return Math.sign(Lf(e.domain()))*Math.sign(Lf(e.range()))}function J5(e,t,{anchor:n,label:r=t.label,labelAnchor:i,labelArrow:s}={}){if(!(r==null||r.inferred&&e7(t)&&/^(date|time|year)$/i.test(r))){if(r=String(r),s==="auto"&&(s=(!t.bandwidth||t.interval)&&!/[]/.test(r)),!s)return r;if(s===!0){const o=Not(t);o&&(s=/x$/.test(e)||i==="center"?/x$/.test(e)===o<0?"left":"right":o<0?"up":"down")}switch(s){case"left":return` ${r}`;case"right":return`${r} `;case"up":return n==="right"?`${r} `:` ${r}`;case"down":return n==="right"?`${r} `:` ${r}`}return r}}function t7(e="auto"){return Xe(e)?!1:typeof e=="boolean"?e:Xr(e,"labelArrow",["auto","up","right","down","left"])}function e7(e){return or(e.domain())}function tN(e,t){if(t==null)return t;const n=e(t);if(!n)throw new Error(`scale not found: ${t}`);return n}function kot(e,{opacity:t,...n}={}){if(!Dc(e)&&!JC(e))throw new Error(`swatches legend requires ordinal or threshold color scale (not ${e.type})`);return n7(e,n,(r,i,s,o)=>r.append("svg").attr("width",s).attr("height",o).attr("fill",i.scale).attr("fill-opacity",nn(t)[1]).append("rect").attr("width","100%").attr("height","100%"))}function Dot(e,{fill:t=(c=>(c=e.hint)==null?void 0:c.fill)()!==void 0?e.hint.fill:"none",fillOpacity:n=1,stroke:r=(u=>(u=e.hint)==null?void 0:u.stroke)()!==void 0?e.hint.stroke:Xe(t)?"currentColor":"none",strokeOpacity:i=1,strokeWidth:s=1.5,r:o=4.5,...a}={},l){const[f,d]=Ir(t),[h,p]=Ir(r),g=tN(l,f),v=tN(l,h),y=o*o*Math.PI;return n=nn(n)[1],i=nn(i)[1],s=nn(s)[1],n7(e,a,(m,b,w,S)=>m.append("svg").attr("viewBox","-8 -8 16 16").attr("width",w).attr("height",S).attr("fill",f==="color"?_=>g.scale(_):d).attr("fill-opacity",n).attr("stroke",h==="color"?_=>v.scale(_):p).attr("stroke-opacity",i).attr("stroke-width",s).append("path").attr("d",_=>{const x=vo();return e.scale(_).draw(x,y),x}))}function n7(e,t={},n){let{columns:r,tickFormat:i,fontVariant:s=i5(e),swatchSize:o=15,swatchWidth:a=o,swatchHeight:l=o,marginLeft:c=0,className:u,style:f,width:d}=t;const h=Fv(t);u=gT(u),i=DT(e.scale,e.domain,void 0,i);const p=re("div",h).attr("class",`${u}-swatches ${u}-swatches-${r!=null?"columns":"wrap"}`);let g;return r!=null?(g=`.${u}-swatches-columns .${u}-swatch {
  display: flex;
  align-items: center;
  break-inside: avoid;
  padding-bottom: 1px;
}
.${u}-swatches-columns .${u}-swatch::before {
  flex-shrink: 0;
}
.${u}-swatches-columns .${u}-swatch-label {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}`,p.style("columns",r).selectAll().data(e.domain).enter().append("div").attr("class",`${u}-swatch`).call(n,e,a,l).call(v=>v.append("div").attr("class",`${u}-swatch-label`).attr("title",i).text(i))):(g=`.${u}-swatches-wrap {
  display: flex;
  align-items: center;
  min-height: 33px;
  flex-wrap: wrap;
}
.${u}-swatches-wrap .${u}-swatch {
  display: inline-flex;
  align-items: center;
  margin-right: 1em;
}`,p.selectAll().data(e.domain).enter().append("span").attr("class",`${u}-swatch`).call(n,e,a,l).append(function(){return this.ownerDocument.createTextNode(i.apply(this,arguments))})),p.call(v=>v.insert("style","*").text(`.${u}-swatches {
  font-family: system-ui, sans-serif;
  font-size: 10px;
  margin-bottom: 0.5em;
}
.${u}-swatch > svg {
  margin-right: 0.5em;
  overflow: visible;
}
${g}`)).style("margin-left",c?`${+c}px`:null).style("width",d===void 0?null:`${+d}px`).style("font-variant",We(s,"normal")).call(bT,f).node()}const L1=new Map([["symbol",Dot],["color",r7],["opacity",Bot]]);function Oot(e={}){for(const[t,n]of L1){const r=e[t];if(nc(r)){const i=Fv(e);let s;if(t==="symbol"){const{fill:o,stroke:a=o===void 0&&nc(e.color)?"color":void 0}=e;s={fill:o,stroke:a}}return n(ax(t,r,s),OT(i,r,e),o=>nc(e[o])?ax(o,e[o]):null)}}throw new Error("unknown legend type; no scale found")}function Fot(e,t,n={}){return(r,i)=>{if(!L1.has(r))throw new Error(`unknown legend type: ${r}`);if(r in e)return L1.get(r)(e[r],OT(t,n[r],i),s=>e[s])}}function OT({className:e,...t},{label:n,ticks:r,tickFormat:i}={},s){return sit(s,{className:e,...t},{label:n,ticks:r,tickFormat:i})}function r7(e,{legend:t=!0,...n}){if(t===!0&&(t=e.type==="ordinal"?"swatches":"ramp"),e.domain!==void 0)switch(`${t}`.toLowerCase()){case"swatches":return kot(e,n);case"ramp":return tot(e,n);default:throw new Error(`unknown legend type: ${t}`)}}function Bot({type:e,interpolate:t,...n},{legend:r=!0,color:i=wi(0,0,0),...s}){if(!t)throw new Error(`${e} opacity scales are not supported`);if(r===!0&&(r="ramp"),`${r}`.toLowerCase()!=="ramp")throw new Error(`${r} opacity legends are not supported`);return r7({type:e,...n,interpolate:Lot(i)},{legend:r,...s})}function Lot(e){const{r:t,g:n,b:r}=wi(e)||wi(0,0,0);return i=>`rgba(${t},${n},${r},${i})`}function Rot(e,t,n){const r=[];for(const[i,s]of L1){const o=n[i];if(o!=null&&o.legend&&i in e){const a=s(e[i],OT(t,e[i],o),l=>e[l]);a!=null&&r.push(a)}}return r}const Cot={ariaLabel:"frame",fill:"none",stroke:"currentColor",clip:!1},Uot={ariaLabel:"frame",fill:null,stroke:"currentColor",strokeLinecap:"square",clip:!1};class i7 extends Se{constructor(t={}){const{anchor:n=null,inset:r=0,insetTop:i=r,insetRight:s=r,insetBottom:o=r,insetLeft:a=r,rx:l,ry:c}=t;super(Oh,void 0,t,n==null?Cot:Uot),this.anchor=fC(n,"anchor",["top","right","bottom","left"]),this.insetTop=Yt(i),this.insetRight=Yt(s),this.insetBottom=Yt(o),this.insetLeft=Yt(a),this.rx=Yt(l),this.ry=Yt(c)}render(t,n,r,i,s){const{marginTop:o,marginRight:a,marginBottom:l,marginLeft:c,width:u,height:f}=i,{anchor:d,insetTop:h,insetRight:p,insetBottom:g,insetLeft:v,rx:y,ry:m}=this,b=c+v,w=u-a-p,S=o+h,_=f-l-g;return re(d?"svg:line":"svg:rect",s).datum(0).call(Oe,this,i,s).call($e,this).call(pn,this,r).call(_e,this,{}).call(d==="left"?x=>x.attr("x1",b).attr("x2",b).attr("y1",S).attr("y2",_):d==="right"?x=>x.attr("x1",w).attr("x2",w).attr("y1",S).attr("y2",_):d==="top"?x=>x.attr("x1",b).attr("x2",w).attr("y1",S).attr("y2",S):d==="bottom"?x=>x.attr("x1",b).attr("x2",w).attr("y1",_).attr("y2",_):x=>x.attr("x",b).attr("y",S).attr("width",w-b).attr("height",_-S).attr("rx",y).attr("ry",m)).node()}}function FT(e){return new i7(e)}const B_={ariaLabel:"tip",fill:"white",stroke:"currentColor"},Pot=new Set(["geometry","href","src","ariaLabel","scales"]);class s7 extends Se{constructor(t,n={}){n.tip&&(n={...n,tip:!1}),n.title===void 0&&Wo(t)&&gC(t)&&(n={...n,title:_t});const{x:r,y:i,x1:s,x2:o,y1:a,y2:l,anchor:c,monospace:u,fontFamily:f=u?"ui-monospace, monospace":void 0,fontSize:d,fontStyle:h,fontVariant:p,fontWeight:g,lineHeight:v=1,lineWidth:y=20,frameAnchor:m,format:b,textAnchor:w="start",textOverflow:S,textPadding:_=8,title:x,pointerSize:E=12,pathFilter:k="drop-shadow(0 3px 4px rgba(0,0,0,0.2))"}=n;super(t,{x:{value:s!=null&&o!=null?null:r,scale:"x",optional:!0},y:{value:a!=null&&l!=null?null:i,scale:"y",optional:!0},x1:{value:s,scale:"x",optional:o==null},y1:{value:a,scale:"y",optional:l==null},x2:{value:o,scale:"x",optional:s==null},y2:{value:l,scale:"y",optional:a==null},title:{value:x,optional:!0}},n,B_),this.anchor=bC(c,"anchor"),this.previousAnchor=this.anchor??"top-left",this.frameAnchor=Ay(m),this.textAnchor=We(w,"middle"),this.textPadding=+_,this.pointerSize=+E,this.pathFilter=zn(k),this.lineHeight=+v,this.lineWidth=+y,this.textOverflow=w5(S),this.monospace=!!u,this.fontFamily=zn(f),this.fontSize=Yt(d),this.fontStyle=zn(h),this.fontVariant=zn(p),this.fontWeight=zn(g);for(const I in B_)I in this.channels&&(this[I]=B_[I]);this.splitLines=I5(this),this.clipLine=T5(this),this.format={...b}}render(t,n,r,i,s){const o=this,{x:a,y:l,fx:c,fy:u}=n,{ownerSVGElement:f,document:d}=s,{anchor:h,monospace:p,lineHeight:g,lineWidth:v}=this,{textPadding:y,pointerSize:m,pathFilter:b}=this,{marginTop:w,marginLeft:S}=i,{x1:_,y1:x,x2:E,y2:k,x:I=_??E,y:A=x??k}=r,D=c?c(t.fx)-S:0,L=u?u(t.fy)-w:0,[T,M]=Vs(this,i),N=n5(r,T),B=r5(r,M),O=p?$T:MT,C=O(nf);let F,P;"title"in r?(F=r.channels,P=qot):(F=Yot.call(this,r,n),P=Wot);const z=re("svg:g",s).call(Oe,this,i,s).call(x5,this).call(_e,this,{x:I&&a,y:A&&l}).call(tt=>tt.selectAll().data(t).enter().append("g").attr("transform",Z=>`translate(${Math.round(N(Z))},${Math.round(B(Z))})`).call($e,this).call(Z=>Z.append("path").attr("filter",b)).call(Z=>Z.append("text").each(function(Y){const Q=be(this);this.setAttribute("fill","currentColor"),this.setAttribute("fill-opacity",1),this.setAttribute("stroke","none");const V=P.call(o,Y,t,F,n,r);if(typeof V=="string")for(const J of o.splitLines(V))H(Q,{value:o.clipLine(J)});else{const J=new Set;for(const et of V){const{label:j=""}=et;j&&J.has(j)||(J.add(j),H(Q,et))}}})));function H(tt,{label:Z,value:Y,color:Q,opacity:V}){Z??(Z=""),Y??(Y="");const J=Q!=null||V!=null;let et,j=v*100;const[At]=Cf(Z,j,O,C);if(At>=0)Z=Z.slice(0,At).trimEnd()+nf,et=Y.trim(),Y="";else{(Z||!Y&&!J)&&(Y=" "+Y);const[qt]=Cf(Y,j-O(Z),O,C);qt>=0&&(Y=Y.slice(0,qt).trimEnd()+nf,et=Y.trim())}const at=tt.append("tspan").attr("x",0).attr("dy",`${g}em`).text("");Z&&at.append("tspan").attr("font-weight","bold").text(Z),Y&&at.append(()=>d.createTextNode(Y)),J&&at.append("tspan").text(" ").attr("fill",Q).attr("fill-opacity",V).style("user-select","none"),et&&at.append("title").text(et)}function X(){const{width:tt,height:Z}=i.facet??i;z.selectChildren().each(function(Y){let{x:Q,width:V,height:J}=this.getBBox();V=Math.round(V),J=Math.round(J);let et=h;if(et===void 0){et=o.previousAnchor;const at=N(Y)+D,qt=B(Y)+L,Ht=at+V+y*2<tt,st=at-V-y*2>0,me=qt+J+m+y*2+7<Z,ts=qt-J-m-y*2>0,Qr=(/-left$/.test(et)?Ht||!st:Ht&&!st)?"left":"right",lw=(/^top-/.test(et)?me||!ts:me&&!ts)?"top":"bottom";et=o.previousAnchor=`${lw}-${Qr}`}const j=this.firstChild,At=this.lastChild;if(j.setAttribute("d",Vot(et,m,y,V,J)),Q)for(const at of At.childNodes)at.setAttribute("x",-Q);At.setAttribute("y",`${+zot(et,At.childNodes.length,g).toFixed(6)}em`),At.setAttribute("transform",`translate(${jot(et,m,y,V,J)})`)}),z.attr("visibility",null)}return t.length&&(z.attr("visibility","hidden"),f.isConnected?Promise.resolve().then(X):typeof requestAnimationFrame<"u"&&requestAnimationFrame(X)),z.node()}}function o7(e,{x:t,y:n,...r}={}){return r.frameAnchor===void 0&&([t,n]=Zi(t,n)),new s7(e,{...r,x:t,y:n})}function zot(e,t,n){return/^top(?:-|$)/.test(e)?.94-n:-.29-t*n}function jot(e,t,n,r,i){switch(e){case"middle":return[-r/2,i/2];case"top-left":return[n,t+n];case"top":return[-r/2,t/2+n];case"top-right":return[-r-n,t+n];case"right":return[-t/2-r-n,i/2];case"bottom-left":return[n,-t-n];case"bottom":return[-r/2,-t/2-n];case"bottom-right":return[-r-n,-t-n];case"left":return[n+t/2,i/2]}}function Vot(e,t,n,r,i){const s=r+n*2,o=i+n*2;switch(e){case"middle":return`M${-s/2},${-o/2}h${s}v${o}h${-s}z`;case"top-left":return`M0,0l${t},${t}h${s-t}v${o}h${-s}z`;case"top":return`M0,0l${t/2},${t/2}h${(s-t)/2}v${o}h${-s}v${-o}h${(s-t)/2}z`;case"top-right":return`M0,0l${-t},${t}h${t-s}v${o}h${s}z`;case"right":return`M0,0l${-t/2},${-t/2}v${t/2-o/2}h${-s}v${o}h${s}v${t/2-o/2}z`;case"bottom-left":return`M0,0l${t},${-t}h${s-t}v${-o}h${-s}z`;case"bottom":return`M0,0l${t/2},${-t/2}h${(s-t)/2}v${-o}h${-s}v${o}h${(s-t)/2}z`;case"bottom-right":return`M0,0l${-t},${-t}h${t-s}v${-o}h${s}z`;case"left":return`M0,0l${t/2},${-t/2}v${t/2-o/2}h${s}v${o}h${-s}v${t/2-o/2}z`}}function Yot({channels:e},t){var i,s;const n={};let r=this.format;r=eN(r,e,"x"),r=eN(r,e,"y"),this.format=r;for(const o in r){const a=r[o];if(!(a===null||a===!1))if(o==="fx"||o==="fy")n[o]=!0;else{const l=rx(e,o);l&&(n[o]=l)}}for(const o in e){if(o in n||o in r||Pot.has(o))continue;const a=rx(e,o);a&&(n[o]=a)}this.facet&&(t.fx&&!("fx"in r)&&(n.fx=!0),t.fy&&!("fy"in r)&&(n.fy=!0));for(const o in n){const a=this.format[o];if(typeof a=="string"){const l=((i=n[o])==null?void 0:i.value)??((s=t[o])==null?void 0:s.domain())??[];this.format[o]=(or(l)?_y:rd)(a)}else if(a===void 0||a===!0){const l=t[o];this.format[o]=l!=null&&l.bandwidth?DT(l,l.domain()):xc}}return n}function eN(e,t,n){if(!(n in e))return e;const r=`${n}1`,i=`${n}2`;if((r in e||!(r in t))&&(i in e||!(i in t)))return e;const s=Object.entries(e),o=e[n];return s.splice(s.findIndex(([a])=>a===n)+1,0,[r,o],[i,o]),Object.fromEntries(s)}function qot(e,t,{title:n}){return xc(n.value[e],e)}function*Wot(e,t,n,r,i){for(const s in n){if(s==="fx"||s==="fy"){yield{label:R1(r,n,s),value:this.format[s](t[s],e)};continue}if(s==="x1"&&"x2"in n||s==="y1"&&"y2"in n)continue;const o=n[s];if(s==="x2"&&"x1"in n)yield{label:rN(r,n,"x"),value:nN(this.format.x2,n.x1,o,e)};else if(s==="y2"&&"y1"in n)yield{label:rN(r,n,"y"),value:nN(this.format.y2,n.y1,o,e)};else{const a=o.value[e],l=o.scale;if(!ir(a)&&l==null)continue;yield{label:R1(r,n,s),value:this.format[s](a,e),color:l==="color"?i[s][e]:null,opacity:l==="opacity"?i[s][e]:null}}}}function nN(e,t,n,r){var i;return(i=n.hint)!=null&&i.length?`${e(n.value[r]-t.value[r],r)}`:`${e(t.value[r],r)}${e(n.value[r],r)}`}function rN(e,t,n){const r=R1(e,t,`${n}1`,n),i=R1(e,t,`${n}2`,n);return r===i?r:`${r}${i}`}function R1(e,t,n,r=n){const i=t[n],s=e[(i==null?void 0:i.scale)??n];return String((s==null?void 0:s.label)??(i==null?void 0:i.label)??r)}function BT(e={}){var C;const{facet:t,style:n,title:r,subtitle:i,caption:s,ariaLabel:o,ariaDescription:a}=e,l=gT(e.className),c=e.marks===void 0?[]:sN(e.marks);c.push(...tat(c));const u=Zot(t,e),f=new Map;for(const F of c){const P=oN(F,u,e);P&&f.set(F,P)}const d=new Map;u&&Rd(d,[u],e),Rd(d,f,e);const h=sN(eat(c,d,e));for(const F of h){const P=oN(F,u,e);P&&f.set(F,P)}c.unshift(...h);let p=Pst(d,e);if(p!==void 0){const F=u?D_(p,u):void 0;for(const z of c){if(z.facet===null||z.facet==="super")continue;const H=f.get(z);H!==void 0&&(H.facetsIndex=z.fx!=null||z.fy!=null?D_(p,H):F)}const P=new Set;for(const{facetsIndex:z}of f.values())z==null||z.forEach((H,X)=>{(H==null?void 0:H.length)>0&&P.add(X)});p.forEach(0<P.size&&P.size<p.length?(z,H)=>z.empty=!P.has(H):z=>z.empty=!1);for(const z of c)if(z.facet==="exclude"){const H=f.get(z);H!==void 0&&(H.facetsIndex=Vst(H.facetsIndex))}}for(const F of Ue.keys())nc(e[F])&&F!=="fx"&&F!=="fy"&&d.set(F,[]);const g=new Map;for(const F of c){if(g.has(F))throw new Error("duplicate mark; each mark must be unique");const{facetsIndex:P,channels:z}=f.get(F)??{},{data:H,facets:X,channels:tt}=F.initialize(P,z,e);LT(tt,e),g.set(F,{data:H,facets:X,channels:tt})}const v=ox(Rd(d,g,e),e),y=Cst(v,c,e);kst(v,y);const m=z$(v),{fx:b,fy:w}=m,S=b||w?XC(v,y):y,_=b||w?lat(m,y):y,x=Fv(e),E=x.document,k=iv("svg").call(E.documentElement);let I=k;x.ownerSVGElement=k,x.className=l,x.projection=qit(e,S),x.filterFacets=(F,P)=>D_(p,{channels:P,groups:xT(F,P)}),x.getMarkState=F=>{const P=g.get(F),z=f.get(F);return{...P,channels:{...P.channels,...z==null?void 0:z.channels}}},x.dispatchValue=F=>{I.value!==F&&(I.value=F,I.dispatchEvent(new Event("input",{bubbles:!0})))};const A=new Set;for(const[F,P]of g)if(F.initializer!=null){const z=F.facet==="super"?_:S,H=F.initializer(P.data,P.facets,P.channels,m,z,x);if(H.data!==void 0&&(P.data=H.data),H.facets!==void 0&&(P.facets=H.facets),H.channels!==void 0){const{fx:X,fy:tt,...Z}=H.channels;Kot(Z),Object.assign(P.channels,Z);for(const Y of Object.values(Z)){const{scale:Q}=Y;Q!=null&&!ait(Ue.get(Q))&&(a7(Y,e),A.add(Q))}(X!=null||tt!=null)&&f.set(F,!0)}}if(A.size){const F=new Map;Rd(F,g,e,X=>A.has(X)),Rd(d,g,e,X=>A.has(X));const P=aat(ox(F,e),v),{scales:z,...H}=z$(P);Object.assign(v,P),Object.assign(m,H),Object.assign(m.scales,z)}let D,L;p!==void 0&&(D={x:b==null?void 0:b.domain(),y:w==null?void 0:w.domain()},p=zst(p,D),L=jst(b,w,y));for(const[F,P]of g)P.values=F.scale(P.channels,m,x);const{width:T,height:M}=y;be(k).attr("class",l).attr("fill","currentColor").attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("text-anchor","middle").attr("width",T).attr("height",M).attr("viewBox",`0 0 ${T} ${M}`).attr("aria-label",o).attr("aria-description",a).call(F=>F.append("style").text(`.${l} {
  display: block;
  background: white;
  height: auto;
  height: intrinsic;
  max-width: 100%;
}
.${l} text,
.${l} tspan {
  white-space: pre;
}`)).call(bT,n);for(const F of c){const{channels:P,values:z,facets:H}=g.get(F);if(p===void 0||F.facet==="super"){let X=null;if(H&&(X=H[0],X=F.filter(X,P,z),X.length===0))continue;const tt=F.render(X,m,z,_,x);if(tt==null)continue;k.appendChild(tt)}else{let X;for(const tt of p){if(!(((C=F.facetAnchor)==null?void 0:C.call(F,p,D,tt))??!tt.empty))continue;let Z=null;if(H){const Q=f.has(F);if(Z=H[Q?tt.i:0],Z=F.filter(Z,P,z),Z.length===0)continue;!Q&&Z===H[0]&&(Z=rc(Z)),Z.fx=tt.x,Z.fy=tt.y,Z.fi=tt.i}const Y=F.render(Z,m,z,S,x);if(Y!=null){(X??(X=be(k).append("g"))).append(()=>Y).datum(tt);for(const Q of["aria-label","aria-description","aria-hidden","transform"])Y.hasAttribute(Q)&&(X.attr(Q,Y.getAttribute(Q)),Y.removeAttribute(Q))}}X==null||X.selectChildren().attr("transform",L)}}const N=Rot(v,x,e),{figure:B=r!=null||i!=null||s!=null||N.length>0}=e;B&&(I=E.createElement("figure"),I.className=`${l}-figure`,I.style.maxWidth="initial",r!=null&&I.append(iN(E,r,"h2")),i!=null&&I.append(iN(E,i,"h3")),I.append(...N,k),s!=null&&I.append(Hot(E,s))),I.scale=Rst(m.scales),I.legend=Fot(v,x,e);const O=Bit();return O>0&&be(k).append("text").attr("x",T).attr("y",20).attr("dy","-1em").attr("text-anchor","end").attr("font-family","initial").text("").append("title").text(`${O.toLocaleString("en-US")} warning${O===1?"":"s"}. Please check the console.`),I}function iN(e,t,n){if(t.ownerDocument)return t;const r=e.createElement(n);return r.append(t),r}function Hot(e,t){const n=e.createElement("figcaption");return n.append(t),n}function Got({marks:e=[],...t}={}){return BT({...t,marks:[...e,this]})}Se.prototype.plot=Got;function sN(e){return e.flat(1/0).filter(t=>t!=null).map(Xot)}function Xot(e){return typeof e.render=="function"?e:new Qot(e)}class Qot extends Se{constructor(t){if(typeof t!="function")throw new TypeError("invalid mark; missing render function");super(),this.render=t}render(){}}function LT(e,t){for(const n in e)a7(e[n],t);return e}function a7(e,t){const{scale:n,transform:r=!0}=e;if(n==null||!r)return;const{type:i,percent:s,interval:o,transform:a=s?l=>l*100:mC(o,i)}=t[n]??{};a!=null&&(e.value=Te(e.value,a),e.transform=!1)}function Kot(e){for(const t in e)EC(t,e[t])}function Rd(e,t,n,r=Hrt){var i,s;for(const{channels:o}of t.values())for(const a in o){const l=o[a],{scale:c}=l;if(c!=null&&r(c))if(c==="projection"){if(!Git(n)){const u=((i=n.x)==null?void 0:i.domain)===void 0,f=((s=n.y)==null?void 0:s.domain)===void 0;if(u||f){const[d,h]=Qit(l);u&&L_(e,"x",d),f&&L_(e,"y",h)}}}else L_(e,c,l)}return e}function L_(e,t,n){const r=e.get(t);r!==void 0?r.push(n):e.set(t,[n])}function Zot(e,t){if(e==null)return;const{x:n,y:r}=e;if(n==null&&r==null)return;const i=Tr(e.data);if(i==null)throw new Error("missing facet data");const s={};n!=null&&(s.fx=Ap(i,{value:n,scale:"fx"})),r!=null&&(s.fy=Ap(i,{value:r,scale:"fy"})),LT(s,t);const o=xT(i,s);return{channels:s,groups:o,data:e.data}}function oN(e,t,n){var l;if(e.facet===null||e.facet==="super")return;const{fx:r,fy:i}=e;if(r!=null||i!=null){const c=Tr(e.data??r??i);if(c===void 0)throw new Error(`missing facet data in ${e.ariaLabel}`);if(c===null)return;const u={};return r!=null&&(u.fx=Ap(c,{value:r,scale:"fx"})),i!=null&&(u.fy=Ap(c,{value:i,scale:"fy"})),LT(u,n),{channels:u,groups:xT(c,u)}}if(t===void 0)return;const{channels:s,groups:o,data:a}=t;if(e.facet!=="auto"||e.data===a)return{channels:s,groups:o};a.length>0&&(o.size>1||o.size===1&&s.fx&&s.fy&&[...o][0][1].size>1)&&((l=Tr(e.data))==null?void 0:l.length)===a.length&&Eo(`Warning: the ${e.ariaLabel} mark appears to use faceted data, but isnt faceted. The mark data has the same length as the facet data and the mark facet option is "auto", but the mark data and facet data are distinct. If this mark should be faceted, set the mark facet option to true; otherwise, suppress this warning by setting the mark facet option to false.`)}function Jot(e,t={}){return Er({...t,x:null,y:null},(n,r,i,s,o,a)=>a.getMarkState(e))}function tat(e){const t=[];for(const n of e){let r=n.tip;if(r){r===!0?r={}:typeof r=="string"&&(r={pointer:r});let{pointer:i}=r;i=/^x$/i.test(i)?ET:/^y$/i.test(i)?AT:TT,r=i(Jot(n,r)),r.title=null;const s=o7(n.data,r);s.facet=n.facet,s.facetAnchor=n.facetAnchor,t.push(s)}}return t}function eat(e,t,n){let{projection:r,x:i={},y:s={},fx:o={},fy:a={},axis:l,grid:c,facet:u={},facet:{axis:f=l,grid:d}=u,x:{axis:h=l,grid:p=h===null?null:c}=i,y:{axis:g=l,grid:v=g===null?null:c}=s,fx:{axis:y=f,grid:m=y===null?null:d}=o,fy:{axis:b=f,grid:w=b===null?null:d}=a}=n;(r||!nc(i)&&!aN("x",e))&&(h=p=null),(r||!nc(s)&&!aN("y",e))&&(g=v=null),t.has("fx")||(y=m=null),t.has("fy")||(b=w=null),h===void 0&&(h=!R0(e,"x")),g===void 0&&(g=!R0(e,"y")),y===void 0&&(y=!R0(e,"fx")),b===void 0&&(b=!R0(e,"fy")),h===!0&&(h="bottom"),g===!0&&(g="left"),y===!0&&(y=h==="top"||h===null?"bottom":"top"),b===!0&&(b=g==="right"||g===null?"left":"right");const S=[];return L0(S,w,Y5,a),B0(S,b,U5,"right","left",u,a),L0(S,m,W5,o),B0(S,y,P5,"top","bottom",u,o),L0(S,v,V5,s),B0(S,g,NT,"left","right",n,s),L0(S,p,q5,i),B0(S,h,kT,"bottom","top",n,i),S}function B0(e,t,n,r,i,s,o){if(!t)return;const a=nat(t);o=rat(a?r:t,s,o);const{line:l}=o;(n===NT||n===kT)&&l&&!Bf(l)&&e.push(FT(iat(o))),e.push(n(o)),a&&e.push(n({...o,anchor:i,label:null}))}function L0(e,t,n,r){!t||Bf(t)||e.push(n(sat(t,r)))}function nat(e){return/^\s*both\s*$/i.test(e)}function rat(e,t,{line:n=t.line,ticks:r,tickSize:i,tickSpacing:s,tickPadding:o,tickFormat:a,tickRotate:l,fontVariant:c,ariaLabel:u,ariaDescription:f,label:d=t.label,labelAnchor:h,labelArrow:p=t.labelArrow,labelOffset:g}){return{anchor:e,line:n,ticks:r,tickSize:i,tickSpacing:s,tickPadding:o,tickFormat:a,tickRotate:l,fontVariant:c,ariaLabel:u,ariaDescription:f,label:d,labelAnchor:h,labelArrow:p,labelOffset:g}}function iat(e){const{anchor:t,line:n}=e;return{anchor:t,facetAnchor:t+"-empty",stroke:n===!0?void 0:n}}function sat(e,{stroke:t=Ey(e)?e:void 0,ticks:n=oat(e)?e:void 0,tickSpacing:r,ariaLabel:i,ariaDescription:s}){return{stroke:t,ticks:n,tickSpacing:r,ariaLabel:i,ariaDescription:s}}function oat(e){switch(typeof e){case"number":return!0;case"string":return!Ey(e)}return Wo(e)||typeof(e==null?void 0:e.range)=="function"}function R0(e,t){const n=`${t}-axis `;return e.some(r=>{var i;return(i=r.ariaLabel)==null?void 0:i.startsWith(n)})}function aN(e,t){for(const n of t)for(const r in n.channels){const{scale:i}=n.channels[r];if(i===e||i==="projection")return!0}return!1}function aat(e,t){for(const n in e){const r=e[n],i=t[n];r.label===void 0&&i&&(r.label=i.label)}return e}function lat({fx:e,fy:t},n){const{marginTop:r,marginRight:i,marginBottom:s,marginLeft:o,width:a,height:l}=ST(n),c=e&&lN(e),u=t&&lN(t);return{marginTop:t?u[0]:r,marginRight:e?a-c[1]:i,marginBottom:t?l-u[1]:s,marginLeft:e?c[0]:o,inset:{marginTop:n.marginTop,marginRight:n.marginRight,marginBottom:n.marginBottom,marginLeft:n.marginLeft},width:a,height:l}}function lN(e){const t=e.domain();let n=e(t[0]),r=e(t[t.length-1]);return r<n&&([n,r]=[r,n]),[n,r+e.bandwidth()]}const cat=new Map([["basis",grt],["basis-closed",brt],["basis-open",vrt],["bundle",wrt],["bump-x",ort],["bump-y",art],["cardinal",_rt],["cardinal-closed",Srt],["cardinal-open",xrt],["catmull-rom",Irt],["catmull-rom-closed",Trt],["catmull-rom-open",Ert],["linear",Sy],["linear-closed",Art],["monotone-x",Mrt],["monotone-y",$rt],["natural",Nrt],["step",krt],["step-after",Ort],["step-before",Drt]]);function RT(e=Sy,t){if(typeof e=="function")return e;const n=cat.get(`${e}`.toLowerCase());if(!n)throw new Error(`unknown curve: ${e}`);if(t!==void 0){if("beta"in n)return n.beta(t);if("tension"in n)return n.tension(t);if("alpha"in n)return n.alpha(t)}return n}function l7(e=Uf,t){return typeof e!="function"&&`${e}`.toLowerCase()==="auto"?Uf:RT(e,t)}function Uf(e){return Sy(e)}function ya(e={y:"count"},t={}){[e,t]=zT(e,t);const{x:n,y:r}=t;return PT(C1(n,t,_t),null,null,r,e,Fy(t))}function ma(e={x:"count"},t={}){[e,t]=zT(e,t);const{x:n,y:r}=t;return PT(null,C1(r,t,_t),n,null,e,By(t))}function Rl(e={fill:"count"},t={}){[e,t]=zT(e,t);const{x:n,y:r}=uat(t);return PT(n,r,null,null,e,Fy(By(t)))}function c7(e,t,n={}){if((n==null?void 0:n.interval)==null)return n;const{reduce:r=hT}=n,i={filter:null};return n[t]!=null&&(i[t]=r),n[`${t}1`]!=null&&(i[`${t}1`]=r),n[`${t}2`]!=null&&(i[`${t}2`]=r),e(i,n)}function CT(e={}){return c7(ya,"y",od(e,"x"))}function UT(e={}){return c7(ma,"x",od(e,"y"))}function PT(e,t,n,r,{data:i=dT,filter:s=O1,sort:o,reverse:a,...l}={},c={}){e=cN(e),t=cN(t),l=fat(l,c),i=h7(i,_t),o=o==null?void 0:f7("sort",o,c),s=s==null?void 0:d7("filter",s,c),n!=null&&va(l,"x","x1","x2")&&(n=null),r!=null&&va(l,"y","y1","y2")&&(r=null);const[u,f]=fr(e),[d,h]=fr(e),[p,g]=fr(t),[v,y]=fr(t),[m,b]=n!=null?[n,"x"]:r!=null?[r,"y"]:[],[w,S]=fr(m),{x:_,y:x,z:E,fill:k,stroke:I,x1:A,x2:D,y1:L,y2:T,domain:M,cumulative:N,thresholds:B,interval:O,...C}=c,[F,P]=fr(E),[z]=Ir(k),[H]=Ir(I),[X,tt]=fr(z),[Z,Y]=fr(H);return{..."z"in c&&{z:F||E},..."fill"in c&&{fill:X||k},..."stroke"in c&&{stroke:Z||I},...js(C,(Q,V,J)=>{const et=D1(Pt(Q,m),J==null?void 0:J[b]),j=Pt(Q,E),At=Pt(Q,z),at=Pt(Q,H),qt=fT(l,{z:j,fill:At,stroke:at}),Ht=[],st=[],me=et&&S([]),ts=j&&P([]),Qr=At&&tt([]),lw=at&&Y([]),GE=e&&f([]),Tz=e&&h([]),XE=t&&g([]),Ez=t&&y([]),Az=pat(e==null?void 0:e(Q),t==null?void 0:t(Q));let Mz=0;for(const Bc of l)Bc.initialize(Q);o&&o.initialize(Q),s&&s.initialize(Q);for(const Bc of V){const QE=[];for(const bd of l)bd.scope("facet",Bc);o&&o.scope("facet",Bc),s&&s.scope("facet",Bc);for(const[bd,$z]of ef(Bc,qt))for(const[Nz,Wy]of ef($z,et))for(const[es,bl]of Az(Wy))if(!(s&&!s.reduce(es,bl))){QE.push(Mz++),st.push(i.reduceIndex(es,Q,bl)),et&&me.push(Nz),j&&ts.push(qt===j?bd:j[(es.length>0?es:Wy)[0]]),At&&Qr.push(qt===At?bd:At[(es.length>0?es:Wy)[0]]),at&&lw.push(qt===at?bd:at[(es.length>0?es:Wy)[0]]),GE&&(GE.push(bl.x1),Tz.push(bl.x2)),XE&&(XE.push(bl.y1),Ez.push(bl.y2));for(const kz of l)kz.reduce(es,bl);o&&o.reduce(es)}Ht.push(QE)}return IC(Ht,o,a),{data:st,facets:Ht}}),...!va(l,"x")&&(u?{x1:u,x2:d,x:k1(u,d)}:{x:_,x1:A,x2:D}),...!va(l,"y")&&(p?{y1:p,y2:v,y:k1(p,v)}:{y:x,y1:L,y2:T}),...w&&{[b]:w},...Object.fromEntries(l.map(({name:Q,output:V})=>[Q,V]))}}function zT({cumulative:e,domain:t,thresholds:n,interval:r,...i},s){return[i,{cumulative:e,domain:t,thresholds:n,interval:r,...s}]}function C1(e,{cumulative:t,domain:n,thresholds:r,interval:i},s){return e={...Ty(e)},e.domain===void 0&&(e.domain=n),e.cumulative===void 0&&(e.cumulative=t),e.thresholds===void 0&&(e.thresholds=r),e.interval===void 0&&(e.interval=i),e.value===void 0&&(e.value=s),e.thresholds=u7(e.thresholds,e.interval),e}function uat(e){let{x:t,y:n}=e;return t=C1(t,e),n=C1(n,e),[t.value,n.value]=Zi(t.value,n.value),{x:t,y:n}}function cN(e){if(e==null)return;const{value:t,cumulative:n,domain:r=bn,thresholds:i}=e,s=o=>{let a=Pt(o,t),l;if(or(a)||hat(i)){a=Te(a,uC,Float64Array);let[u,f]=typeof r=="function"?r(a):r,d=typeof i=="function"&&!Fu(i)?i(a,u,f):i;typeof d=="number"&&(d=cL(u,f,d)),Fu(d)&&(r===bn&&(u=d.floor(u),f=d.offset(d.floor(f))),d=d.range(u,d.offset(f))),l=d}else{a=gr(a);let[u,f]=typeof r=="function"?r(a):r,d=typeof i=="function"&&!Fu(i)?i(a,u,f):i;if(typeof d=="number")if(r===bn){let h=dp(u,f,d);if(isFinite(h))if(h>0){let p=Math.round(u/h),g=Math.round(f/h);p*h<=u||--p,g*h>f||++g;let v=g-p+1;d=new Float64Array(v);for(let y=0;y<v;++y)d[y]=(p+y)*h}else if(h<0){h=-h;let p=Math.round(u*h),g=Math.round(f*h);p/h<=u||--p,g/h>f||++g;let v=g-p+1;d=new Float64Array(v);for(let y=0;y<v;++y)d[y]=(p+y)/h}else d=[u];else d=[u]}else d=za(u,f,d);else Fu(d)&&(r===bn&&(u=d.floor(u),f=d.offset(d.floor(f))),d=d.range(u,d.offset(f)));l=d}const c=[];if(l.length===1)c.push([l[0],l[0]]);else for(let u=1;u<l.length;++u)c.push([l[u-1],l[u]]);return c.bin=(n<0?mat:n>0?yat:jT)(c,l,a),c};return s.label=qo(t),s}function u7(e,t,n=uN){if(e===void 0)return t===void 0?n:sd(t);if(typeof e=="string"){switch(e.toLowerCase()){case"freedman-diaconis":return qG;case"scott":return dF;case"sturges":return p3;case"auto":return uN}return H3(e)}return e}function fat(e,t){return lT(e,t,f7)}function f7(e,t,n){return cT(e,t,n,d7)}function d7(e,t,n){return uT(e,t,n,h7)}function h7(e,t){return Ov(e,t,dat)}function dat(e){switch(`${e}`.toLowerCase()){case"x":return gat;case"x1":return vat;case"x2":return wat;case"y":return bat;case"y1":return _at;case"y2":return Sat}throw new Error(`invalid bin reduce: ${e}`)}function uN(e,t,n){return Math.min(200,dF(e,t,n))}function hat(e){return Krt(e)||Wo(e)&&or(e)}function pat(e,t){return e&&t?function*(n){const r=e.bin(n);for(const[i,[s,o]]of e.entries()){const a=t.bin(r[i]);for(const[l,[c,u]]of t.entries())yield[a[l],{x1:s,y1:c,x2:o,y2:u}]}}:e?function*(n){const r=e.bin(n);for(const[i,[s,o]]of e.entries())yield[r[i],{x1:s,x2:o}]}:function*(n){const r=t.bin(n);for(const[i,[s,o]]of t.entries())yield[r[i],{y1:s,y2:o}]}}function jT(e,t,n){return t=gr(t),r=>{var s;const i=e.map(()=>[]);for(const o of r)(s=i[Jb(t,n[o])-1])==null||s.push(o);return i}}function yat(e,t,n){const r=jT(e,t,n);return i=>{const s=r(i);for(let o=1,a=s.length;o<a;++o){const l=s[o-1],c=s[o];for(const u of l)c.push(u)}return s}}function mat(e,t,n){const r=jT(e,t,n);return i=>{const s=r(i);for(let o=s.length-2;o>=0;--o){const a=s[o+1],l=s[o];for(const c of a)l.push(c)}return s}}function p7(e,t){const n=(+e+ +t)/2;return e instanceof Date?new Date(n):n}const gat={reduceIndex(e,t,{x1:n,x2:r}){return p7(n,r)}},bat={reduceIndex(e,t,{y1:n,y2:r}){return p7(n,r)}},vat={reduceIndex(e,t,{x1:n}){return n}},wat={reduceIndex(e,t,{x2:n}){return n}},_at={reduceIndex(e,t,{y1:n}){return n}},Sat={reduceIndex(e,t,{y2:n}){return n}};function VT(e={}){return dC(e)?e:{...e,x:_t}}function YT(e={}){return hC(e)?e:{...e,y:_t}}function xat(e,t){if(t.length===1)return{data:e,facets:t};const n=e.length,r=new Uint8Array(n);let i=0;for(const a of t)for(const l of a)r[l]&&++i,r[l]=1;if(i===0)return{data:e,facets:t};e=Ip(e);const s=e[lC]=new Uint32Array(n+i);t=t.map(a=>Ip(a,Uint32Array));let o=n;r.fill(0);for(const a of t)for(let l=0,c=a.length;l<c;++l){const u=a[l];r[u]?(a[l]=o,e[o]=e[u],s[o]=u,++o):s[u]=u,r[u]=1}return{data:e,facets:t}}function y7(e={},t={}){arguments.length===1&&([e,t]=ud(e));const{y1:n,y:r=n,x:i,...s}=t,[o,a,l,c]=fd(r,i,"y","x",e,s);return{...o,y1:n,y:a,x1:l,x2:c,x:k1(l,c)}}function Iat(e={},t={}){arguments.length===1&&([e,t]=ud(e));const{y1:n,y:r=n,x:i}=t,[s,o,a]=fd(r,i,"y","x",e,t);return{...s,y1:n,y:o,x:a}}function Tat(e={},t={}){arguments.length===1&&([e,t]=ud(e));const{y1:n,y:r=n,x:i}=t,[s,o,,a]=fd(r,i,"y","x",e,t);return{...s,y1:n,y:o,x:a}}function m7(e={},t={}){arguments.length===1&&([e,t]=ud(e));const{x1:n,x:r=n,y:i,...s}=t,[o,a,l,c]=fd(r,i,"x","y",e,s);return{...o,x1:n,x:a,y1:l,y2:c,y:k1(l,c)}}function Eat(e={},t={}){arguments.length===1&&([e,t]=ud(e));const{x1:n,x:r=n,y:i}=t,[s,o,a]=fd(r,i,"x","y",e,t);return{...s,x1:n,x:o,y:a}}function Aat(e={},t={}){arguments.length===1&&([e,t]=ud(e));const{x1:n,x:r=n,y:i}=t,[s,o,,a]=fd(r,i,"x","y",e,t);return{...s,x1:n,x:o,y:a}}function qT({x:e,x1:t,x2:n,...r}={}){return r=od(r,"y"),t===void 0&&n===void 0?y7({x:e,...r}):([t,n]=pC(e,t,n),{...r,x1:t,x2:n})}function WT({y:e,y1:t,y2:n,...r}={}){return r=od(r,"x"),t===void 0&&n===void 0?m7({y:e,...r}):([t,n]=pC(e,t,n),{...r,y1:t,y2:n})}function ud(e){const{offset:t,order:n,reverse:r,...i}=e;return[{offset:t,order:n,reverse:r},i]}const Mat={length:!0};function fd(e,t=G3,n,r,{offset:i,order:s,reverse:o},a){if(t===null)throw new Error(`stack requires ${r}`);const l=fl(a),[c,u]=fr(e),[f,d]=Cr(t),[h,p]=Cr(t);return f.hint=h.hint=Mat,i=$at(i),s=Dat(s,i,r),[js(a,(g,v,y)=>{({data:g,facets:v}=xat(g,v));const m=e==null?void 0:u(D1(Pt(g,e),y==null?void 0:y[n])),b=Pt(g,t,Float64Array),w=Pt(g,l),S=s&&s(g,m,b,w),_=g.length,x=d(new Float64Array(_)),E=p(new Float64Array(_)),k=[];for(const I of v){const A=m?Array.from(Vo(I,D=>m[D]).values()):[I];if(S)for(const D of A)D.sort(S);for(const D of A){let L=0,T=0;o&&D.reverse();for(const M of D){const N=b[M];N<0?L=E[M]=(x[M]=L)+N:N>0?T=E[M]=(x[M]=T)+N:E[M]=x[M]=T}}k.push(A)}return i&&i(k,x,E,w),{data:g,facets:v}}),c,f,h]}function $at(e){if(e!=null){if(typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"expand":case"normalize":return Nat;case"center":case"silhouette":return kat;case"wiggle":return b7}throw new Error(`unknown offset: ${e}`)}}function g7(e,t){let n=0,r=0;for(const i of e){const s=t[i];s<n&&(n=s),s>r&&(r=s)}return[n,r]}function Nat(e,t,n){for(const r of e)for(const i of r){const[s,o]=g7(i,n);for(const a of i){const l=1/(o-s||1);t[a]=l*(t[a]-s),n[a]=l*(n[a]-s)}}}function kat(e,t,n){for(const r of e){for(const i of r){const[s,o]=g7(i,n);for(const a of i){const l=(o+s)/2;t[a]-=l,n[a]-=l}}v7(r,t,n)}w7(e,t,n)}function b7(e,t,n,r){for(const i of e){const s=new yc;let o=0;for(const a of i){let l=-1;const c=a.map(h=>Math.abs(n[h]-t[h])),u=a.map(h=>{l=r?r[h]:++l;const p=n[h]-t[h],g=s.has(l)?p-s.get(l):0;return s.set(l,p),g}),f=[0,...LG(u)];for(const h of a)t[h]+=o,n[h]+=o;const d=Ls(c);d&&(o-=Ls(c,(h,p)=>(u[p]/2+f[p])*h)/d)}v7(i,t,n)}w7(e,t,n)}function v7(e,t,n){const r=xn(e,i=>xn(i,s=>t[s]));for(const i of e)for(const s of i)t[s]-=r,n[s]-=r}function w7(e,t,n){const r=e.length;if(r===1)return;const i=e.map(a=>a.flat()),s=i.map(a=>(xn(a,l=>t[l])+De(a,l=>n[l]))/2),o=xn(s);for(let a=0;a<r;a++){const l=o-s[a];for(const c of i[a])t[c]+=l,n[c]+=l}}function Dat(e,t,n){if(e===void 0&&t===b7)return fN(_i);if(e!=null){if(typeof e=="string"){const r=e.startsWith("-"),i=r?$1:_i;switch((r?e.slice(1):e).toLowerCase()){case"value":case n:return Oat(i);case"z":return Fat(i);case"sum":return Bat(i);case"appearance":return Lat(i);case"inside-out":return fN(i)}return dN(cC(e))}if(typeof e=="function")return(e.length===1?dN:Rat)(e);if(Array.isArray(e))return Cat(e);throw new Error(`invalid order: ${e}`)}}function Oat(e){return(t,n,r)=>(i,s)=>e(r[i],r[s])}function Fat(e){return(t,n,r,i)=>(s,o)=>e(i[s],i[o])}function Bat(e){return Yv(e,(t,n,r,i)=>h3(Yo(t),s=>Ls(s,o=>r[o]),s=>i[s]))}function Lat(e){return Yv(e,(t,n,r,i)=>h3(Yo(t),s=>n[y3(s,o=>r[o])],s=>i[s]))}function fN(e){return Yv(e,(t,n,r,i)=>{const s=Yo(t),o=h3(s,f=>n[y3(f,d=>r[d])],f=>i[f]),a=Ku(s,f=>Ls(f,d=>r[d]),f=>i[f]),l=[],c=[];let u=0;for(const f of o)u<0?(u+=a.get(f),l.push(f)):(u-=a.get(f),c.push(f));return c.reverse().concat(l)})}function dN(e){return t=>{const n=Pt(t,e);return(r,i)=>_i(n[r],n[i])}}function Rat(e){return t=>(n,r)=>e(t[n],t[r])}function Cat(e){return Yv(_i,()=>e)}function Yv(e,t){return(n,r,i,s)=>{if(!s)throw new Error("missing channel: z");const o=new yc(t(n,r,i,s).map((a,l)=>[a,l]));return(a,l)=>e(o.get(s[a]),o.get(s[l]))}}const Uat={ariaLabel:"area",strokeWidth:1,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class qv extends Se{constructor(t,n={}){const{x1:r,y1:i,x2:s,y2:o,z:a,curve:l,tension:c}=n;super(t,{x1:{value:r,scale:"x"},y1:{value:i,scale:"y"},x2:{value:s,scale:"x",optional:!0},y2:{value:o,scale:"y",optional:!0},z:{value:fl(n),optional:!0}},n,Uat),this.z=a,this.curve=RT(l,c)}filter(t){return t}render(t,n,r,i,s){const{x1:o,y1:a,x2:l=o,y2:c=a}=r;return re("svg:g",s).call(Oe,this,i,s).call(_e,this,n,0,0).call(u=>u.selectAll().data(kC(t,[o,a,l,c],this,r)).enter().append("path").call($e,this).call(F1,this,r).attr("d",P3().curve(this.curve).defined(f=>f>=0).x0(f=>o[f]).y0(f=>a[f]).x1(f=>l[f]).y1(f=>c[f]))).node()}}function Pat(e,t){return t===void 0?Pf(e,{x:Iy,y:xp}):new qv(e,t)}function $p(e,t){const{y:n=Nr,...r}=UT(t);return new qv(e,qT(VT({...r,y1:n,y2:void 0})))}function Pf(e,t){const{x:n=Nr,...r}=CT(t);return new qv(e,WT(YT({...r,x1:n,x2:void 0})))}const zat={ariaLabel:"link",fill:"none",stroke:"currentColor",strokeMiterlimit:1};class _7 extends Se{constructor(t,n={}){const{x1:r,y1:i,x2:s,y2:o,curve:a,tension:l}=n;super(t,{x1:{value:r,scale:"x"},y1:{value:i,scale:"y"},x2:{value:s,scale:"x",optional:!0},y2:{value:o,scale:"y",optional:!0}},n,zat),this.curve=l7(a,l),ad(this,n)}project(t,n,r){this.curve!==Uf&&super.project(t,n,r)}render(t,n,r,i,s){const{x1:o,y1:a,x2:l=o,y2:c=a}=r,{curve:u}=this;return re("svg:g",s).call(Oe,this,i,s).call(_e,this,n).call(f=>f.selectAll().data(t).enter().append("path").call($e,this).attr("d",u===Uf&&s.projection?jat(s.projection,o,a,l,c):d=>{const h=vo(),p=u(h);return p.lineStart(),p.point(o[d],a[d]),p.point(l[d],c[d]),p.lineEnd(),h}).call(pn,this,r).call(Oy,this,r,s)).node()}}function jat(e,t,n,r,i){const s=cl(e);return t=gr(t),n=gr(n),r=gr(r),i=gr(i),o=>s({type:"LineString",coordinates:[[t[o],n[o]],[r[o],i[o]]]})}function S7(e,{x:t,x1:n,x2:r,y:i,y1:s,y2:o,...a}={}){return[n,r]=U1(t,n,r),[s,o]=U1(i,s,o),new _7(e,{...a,x1:n,x2:r,y1:s,y2:o})}function U1(e,t,n){if(e===void 0){if(t===void 0){if(n!==void 0)return[n]}else if(n===void 0)return[t]}else{if(t===void 0)return n===void 0?[e]:[e,n];if(n===void 0)return[e,t]}return[t,n]}const Vat={ariaLabel:"arrow",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeMiterlimit:1,strokeWidth:1.5};class x7 extends Se{constructor(t,n={}){const{x1:r,y1:i,x2:s,y2:o,bend:a=0,headAngle:l=60,headLength:c=8,inset:u=0,insetStart:f=u,insetEnd:d=u,sweep:h}=n;super(t,{x1:{value:r,scale:"x"},y1:{value:i,scale:"y"},x2:{value:s,scale:"x",optional:!0},y2:{value:o,scale:"y",optional:!0}},n,Vat),this.bend=a===!0?22.5:Math.max(-90,Math.min(90,a)),this.headAngle=+l,this.headLength=+c,this.insetStart=+f,this.insetEnd=+d,this.sweep=Yat(h)}render(t,n,r,i,s){const{x1:o,y1:a,x2:l=o,y2:c=a,SW:u}=r,{strokeWidth:f,bend:d,headAngle:h,headLength:p,insetStart:g,insetEnd:v}=this,y=u?w=>u[w]:qr(f===void 0?1:f),m=h*B1/2,b=p/1.5;return re("svg:g",s).call(Oe,this,i,s).call(_e,this,n).call(w=>w.selectAll().data(t).enter().append("path").call($e,this).attr("d",S=>{let _=o[S],x=a[S],E=l[S],k=c[S];const I=Math.hypot(E-_,k-x);if(I<=g+v)return null;let A=Math.atan2(k-x,E-_);const D=Math.min(b*y(S),I/3),L=this.sweep(_,x,E,k)*d*B1,T=Math.hypot(I/Math.tan(L),I)/2;if(g||v)if(T<1e5){const X=Math.sign(L),[tt,Z]=qat([_,x],[E,k],T,X);if(g&&([_,x]=hN([tt,Z,T],[_,x,g],-X*Math.sign(g))),v){const[Y,Q]=hN([tt,Z,T],[E,k,v],X*Math.sign(v));A+=Math.atan2(Q-Z,Y-tt)-Math.atan2(k-Z,E-tt),E=Y,k=Q}}else{const X=E-_,tt=k-x,Z=Math.hypot(X,tt);g&&(_+=X/Z*g,x+=tt/Z*g),v&&(E-=X/Z*v,k-=tt/Z*v)}const M=A+L,N=M+m,B=M-m,O=E-D*Math.cos(N),C=k-D*Math.sin(N),F=E-D*Math.cos(B),P=k-D*Math.sin(B),z=T<1e5?`A${T},${T} 0,0,${L>0?1:0} `:"L",H=D?`M${O},${C}L${E},${k}L${F},${P}`:"";return`M${_},${x}${z}${E},${k}${H}`}).call(pn,this,r)).node()}}function Yat(e=1){if(typeof e=="number")return qr(Math.sign(e));if(typeof e=="function")return(t,n,r,i)=>Math.sign(e(t,n,r,i));switch(Xr(e,"sweep",["+x","-x","+y","-y"])){case"+x":return(t,n,r)=>je(t,r);case"-x":return(t,n,r)=>pc(t,r);case"+y":return(t,n,r,i)=>je(n,i);case"-y":return(t,n,r,i)=>pc(n,i)}}function qat([e,t],[n,r],i,s){const o=n-e,a=r-t,l=Math.hypot(o,a),c=s*Math.sqrt(i*i-l*l/4)/l;return[(e+n)/2-a*c,(t+r)/2+o*c]}function hN([e,t,n],[r,i,s],o){const a=r-e,l=i-t,c=Math.hypot(a,l),u=(a*a+l*l-s*s+n*n)/(2*c),f=o*Math.sqrt(n*n-u*u);return[e+(a*u+l*f)/c,t+(l*u-a*f)/c]}function Wat(e,{x:t,x1:n,x2:r,y:i,y1:s,y2:o,...a}={}){return[n,r]=U1(t,n,r),[s,o]=U1(i,s,o),new x7(e,{...a,x1:n,x2:r,y1:s,y2:o})}class HT extends Se{constructor(t,n,r={},i){super(t,n,r,i);const{inset:s=0,insetTop:o=s,insetRight:a=s,insetBottom:l=s,insetLeft:c=s,rx:u,ry:f}=r;this.insetTop=Yt(o),this.insetRight=Yt(a),this.insetBottom=Yt(l),this.insetLeft=Yt(c),this.rx=We(u,"auto"),this.ry=We(f,"auto")}render(t,n,r,i,s){const{rx:o,ry:a}=this;return re("svg:g",s).call(Oe,this,i,s).call(this._transform,this,n).call(l=>l.selectAll().data(t).enter().append("rect").call($e,this).attr("x",this._x(n,r,i)).attr("width",this._width(n,r,i)).attr("y",this._y(n,r,i)).attr("height",this._height(n,r,i)).call(pt,"rx",o).call(pt,"ry",a).call(pn,this,r)).node()}_x(t,{x:n},{marginLeft:r}){const{insetLeft:i}=this;return n?s=>n[s]+i:r+i}_y(t,{y:n},{marginTop:r}){const{insetTop:i}=this;return n?s=>n[s]+i:r+i}_width({x:t},{x:n},{marginRight:r,marginLeft:i,width:s}){const{insetLeft:o,insetRight:a}=this,l=n&&t?t.bandwidth():s-r-i;return Math.max(0,l-o-a)}_height({y:t},{y:n},{marginTop:r,marginBottom:i,height:s}){const{insetTop:o,insetBottom:a}=this,l=n&&t?t.bandwidth():s-r-i;return Math.max(0,l-o-a)}}const I7={ariaLabel:"bar"};class T7 extends HT{constructor(t,n={}){const{x1:r,x2:i,y:s}=n;super(t,{x1:{value:r,scale:"x"},x2:{value:i,scale:"x"},y:{value:s,scale:"y",type:"band",optional:!0}},n,I7)}_transform(t,n,{x:r}){t.call(_e,n,{x:r},0,0)}_x({x:t},{x1:n,x2:r},{marginLeft:i}){const{insetLeft:s}=this;return hi(t)?i+s:o=>Math.min(n[o],r[o])+s}_width({x:t},{x1:n,x2:r},{marginRight:i,marginLeft:s,width:o}){const{insetLeft:a,insetRight:l}=this;return hi(t)?o-i-s-a-l:c=>Math.max(0,Math.abs(r[c]-n[c])-a-l)}}class E7 extends HT{constructor(t,n={}){const{x:r,y1:i,y2:s}=n;super(t,{y1:{value:i,scale:"y"},y2:{value:s,scale:"y"},x:{value:r,scale:"x",type:"band",optional:!0}},n,I7)}_transform(t,n,{y:r}){t.call(_e,n,{y:r},0,0)}_y({y:t},{y1:n,y2:r},{marginTop:i}){const{insetTop:s}=this;return hi(t)?i+s:o=>Math.min(n[o],r[o])+s}_height({y:t},{y1:n,y2:r},{marginTop:i,marginBottom:s,height:o}){const{insetTop:a,insetBottom:l}=this;return hi(t)?o-i-s-a-l:c=>Math.max(0,Math.abs(r[c]-n[c])-a-l)}}function Hl(e,t={}){return Mv(t)||(t={...t,y:Nr,x2:_t}),new T7(e,qT(f5(VT(t))))}function Gl(e,t={}){return Mv(t)||(t={...t,x:Nr,y2:_t}),new E7(e,WT(d5(YT(t))))}const Hat={ariaLabel:"cell"};class Wv extends HT{constructor(t,{x:n,y:r,...i}={}){super(t,{x:{value:n,scale:"x",type:"band",optional:!0},y:{value:r,scale:"y",type:"band",optional:!0}},i,Hat)}_transform(t,n){t.call(_e,n,{},0,0)}}function Lu(e,{x:t,y:n,...r}={}){return[t,n]=Zi(t,n),new Wv(e,{...r,x:t,y:n})}function Gat(e,{x:t=Nr,fill:n,stroke:r,...i}={}){return n===void 0&&Ir(r)[0]===void 0&&(n=_t),new Wv(e,{...i,x:t,fill:n,stroke:r})}function Xat(e,{y:t=Nr,fill:n,stroke:r,...i}={}){return n===void 0&&Ir(r)[0]===void 0&&(n=_t),new Wv(e,{...i,y:t,fill:n,stroke:r})}const Qat={ariaLabel:"dot",fill:"none",stroke:"currentColor",strokeWidth:1.5};function GT(e){return e.sort===void 0&&e.reverse===void 0?SC({channel:"-r"},e):e}class Hv extends Se{constructor(t,n={}){const{x:r,y:i,r:s,rotate:o,symbol:a=Sp,frameAnchor:l}=n,[c,u]=nn(o,0),[f,d]=fit(a),[h,p]=nn(s,f==null?3:4.5);super(t,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},r:{value:h,scale:"r",filter:To,optional:!0},rotate:{value:c,optional:!0},symbol:{value:f,scale:"auto",optional:!0}},GT(n),Qat),this.r=p,this.rotate=u,this.symbol=d,this.frameAnchor=Ay(l);const{channels:g}=this,{symbol:v}=g;if(v){const{fill:y,stroke:m}=g;v.hint={fill:y?y.value===v.value?"color":"currentColor":this.fill??"currentColor",stroke:m?m.value===v.value?"color":"currentColor":this.stroke??"none"}}}render(t,n,r,i,s){const{x:o,y:a}=n,{x:l,y:c,r:u,rotate:f,symbol:d}=r,{r:h,rotate:p,symbol:g}=this,[v,y]=Vs(this,i),m=g===Sp,b=u?void 0:h*h*Math.PI;return Ev(h)&&(t=[]),re("svg:g",s).call(Oe,this,i,s).call(_e,this,{x:l&&o,y:c&&a}).call(w=>w.selectAll().data(t).enter().append(m?"circle":"path").call($e,this).call(m?S=>{S.attr("cx",l?_=>l[_]:v).attr("cy",c?_=>c[_]:y).attr("r",u?_=>u[_]:h)}:S=>{S.attr("transform",Pv`translate(${l?_=>l[_]:v},${c?_=>c[_]:y})${f?_=>` rotate(${f[_]})`:p?` rotate(${p})`:""}`).attr("d",u&&d?_=>{const x=vo();return d[_].draw(x,u[_]*u[_]*Math.PI),x}:u?_=>{const x=vo();return g.draw(x,u[_]*u[_]*Math.PI),x}:d?_=>{const x=vo();return d[_].draw(x,b),x}:(()=>{const _=vo();return g.draw(_,b),_})())}).call(pn,this,r)).node()}}function pl(e,{x:t,y:n,...r}={}){return r.frameAnchor===void 0&&([t,n]=Zi(t,n)),new Hv(e,{...r,x:t,y:n})}function Kat(e,{x:t=_t,...n}={}){return new Hv(e,p5({...n,x:t}))}function Zat(e,{y:t=_t,...n}={}){return new Hv(e,h5({...n,y:t}))}function Jat(e,t){return pl(e,{...t,symbol:"circle"})}function tlt(e,t){return pl(e,{...t,symbol:"hexagon"})}const elt={ariaLabel:"line",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class Gv extends Se{constructor(t,n={}){const{x:r,y:i,z:s,curve:o,tension:a}=n;super(t,{x:{value:r,scale:"x"},y:{value:i,scale:"y"},z:{value:fl(n),optional:!0}},n,elt),this.z=s,this.curve=l7(o,a),ad(this,n)}filter(t){return t}project(t,n,r){this.curve!==Uf&&super.project(t,n,r)}render(t,n,r,i,s){const{x:o,y:a}=r,{curve:l}=this;return re("svg:g",s).call(Oe,this,i,s).call(_e,this,n).call(c=>c.selectAll().data(kC(t,[o,a],this,r)).enter().append("path").call($e,this).call(F1,this,r).call(iot,this,r,s).attr("d",l===Uf&&s.projection?nlt(s.projection,o,a):kR().curve(l).defined(u=>u>=0).x(u=>o[u]).y(u=>a[u]))).node()}}function nlt(e,t,n){const r=cl(e);return t=gr(t),n=gr(n),i=>{let s=[];const o=[s];for(const a of i)a===-1?(s=[],o.push(s)):s.push([t[a],n[a]]);return r({type:"MultiLineString",coordinates:o})}}function XT(e,{x:t,y:n,...r}={}){return[t,n]=Zi(t,n),new Gv(e,{...r,x:t,y:n})}function Np(e,{x:t=_t,y:n=Nr,...r}={}){return new Gv(e,UT({...r,x:t,y:n}))}function kp(e,{x:t=Nr,y:n=_t,...r}={}){return new Gv(e,CT({...r,x:t,y:n}))}const rlt={ariaLabel:"rect"};class Xv extends Se{constructor(t,n={}){const{x1:r,y1:i,x2:s,y2:o,inset:a=0,insetTop:l=a,insetRight:c=a,insetBottom:u=a,insetLeft:f=a,rx:d,ry:h}=n;super(t,{x1:{value:r,scale:"x",optional:!0},y1:{value:i,scale:"y",optional:!0},x2:{value:s,scale:"x",optional:!0},y2:{value:o,scale:"y",optional:!0}},n,rlt),this.insetTop=Yt(l),this.insetRight=Yt(c),this.insetBottom=Yt(u),this.insetLeft=Yt(f),this.rx=We(d,"auto"),this.ry=We(h,"auto")}render(t,n,r,i,s){const{x:o,y:a}=n,{x1:l,y1:c,x2:u,y2:f}=r,{marginTop:d,marginRight:h,marginBottom:p,marginLeft:g,width:v,height:y}=i,{projection:m}=s,{insetTop:b,insetRight:w,insetBottom:S,insetLeft:_,rx:x,ry:E}=this;return re("svg:g",s).call(Oe,this,i,s).call(_e,this,{x:l&&u&&o,y:c&&f&&a},0,0).call(k=>k.selectAll().data(t).enter().append("rect").call($e,this).attr("x",l&&u&&(m||!hi(o))?I=>Math.min(l[I],u[I])+_:g+_).attr("y",c&&f&&(m||!hi(a))?I=>Math.min(c[I],f[I])+b:d+b).attr("width",l&&u&&(m||!hi(o))?I=>Math.max(0,Math.abs(u[I]-l[I])-_-w):v-h-g-w-_).attr("height",c&&f&&(m||!hi(a))?I=>Math.max(0,Math.abs(c[I]-f[I])-b-S):y-d-p-b-S).call(pt,"rx",x).call(pt,"ry",E).call(pn,this,r)).node()}}function QT(e,t){return new Xv(e,c5(u5(t)))}function P1(e,t={}){return Mv(t)||(t={...t,y:Nr,x2:_t,interval:1}),new Xv(e,qT(u5(VT(t))))}function z1(e,t={}){return Mv(t)||(t={...t,x:Nr,y2:_t,interval:1}),new Xv(e,WT(c5(YT(t))))}function A7(e,t){t=slt(t);const{x:n,y:r,color:i,size:s}=t,o=C0(e,n),a=C0(e,r),l=C0(e,i),c=C0(e,s);let{fx:u,fy:f,x:{value:d,reduce:h,zero:p,...g},y:{value:v,reduce:y,zero:m,...b},color:{value:w,color:S,reduce:_},size:{value:x,reduce:E},mark:k}=t;if(h===void 0&&(h=y==null&&d==null&&x==null&&v!=null?"count":null),y===void 0&&(y=h==null&&v==null&&x==null&&d!=null?"count":null),E===void 0&&x==null&&_==null&&h==null&&y==null&&(d==null||qe(o))&&(v==null||qe(a))&&(E="count"),p===void 0&&(p=U0(h)?!0:void 0),m===void 0&&(m=U0(y)?!0:void 0),d==null&&v==null)throw new Error("must specify x or y");if(h!=null&&v==null)throw new Error("reducing x requires y");if(y!=null&&d==null)throw new Error("reducing y requires x");k===void 0&&(k=x!=null||E!=null?"dot":U0(h)||U0(y)||_!=null?"bar":d!=null&&v!=null?qe(o)||qe(a)||h==null&&y==null&&!Cd(o)&&!Cd(a)?"dot":"line":d!=null||v!=null?"rule":null);let I,A,D;switch(k){case"dot":D=pl,A="stroke";break;case"line":D=o&&a||h!=null||y!=null?m||y!=null||o&&Cd(o)?kp:p||h!=null||a&&Cd(a)?Np:XT:o?Np:kp,A="stroke",yN(l)&&(I=null);break;case"area":D=!(m||y!=null)&&(p||h!=null||a&&Cd(a))?$p:Pf,A="fill",yN(l)&&(I=null);break;case"rule":D=o?Wa:Ha,A="stroke";break;case"bar":D=h!=null?qe(a)?pN(h)&&o&&qe(o)?Lu:Hl:P1:y!=null?qe(o)?pN(y)&&a&&qe(a)?Lu:Gl:z1:_!=null||E!=null?o&&qe(o)&&a&&qe(a)?Lu:o&&qe(o)?Gl:a&&qe(a)?Hl:QT:o&&Bu(o)&&!(a&&Bu(a))?Hl:a&&Bu(a)&&!(o&&Bu(o))?Gl:Lu,A="fill";break;default:throw new Error(`invalid mark: ${k}`)}let L={fx:u,fy:f,x:o??void 0,y:a??void 0,[A]:l??S,z:I,r:c??void 0,tip:!0},T,M={[A]:_??void 0,r:E??void 0};if(h!=null&&y!=null)throw new Error("cannot reduce both x and y");return y!=null?(M.y=y,T=qe(o)?Tp:ya):h!=null?(M.x=h,T=qe(a)?Ep:ma):(_!=null||E!=null)&&(o&&a?T=qe(o)&&qe(a)?aT:qe(o)?ma:qe(a)?ya:Rl:o?T=qe(o)?Tp:ya:a&&(T=qe(a)?Ep:ma)),(T===Rl||T===ya)&&(L.x={value:o,...g}),(T===Rl||T===ma)&&(L.y={value:a,...b}),p===void 0&&(p=o&&!(T===Rl||T===ya)&&(D===Hl||D===$p||D===P1||D===Ha)),m===void 0&&(m=a&&!(T===Rl||T===ma)&&(D===Gl||D===Pf||D===z1||D===Wa)),{fx:u??null,fy:f??null,x:{value:d??null,reduce:h??null,zero:!!p,...g},y:{value:v??null,reduce:y??null,zero:!!m,...b},color:{value:w??null,reduce:_??null,...S!==void 0&&{color:S}},size:{value:x??null,reduce:E??null},mark:k,markImpl:mN[D],markOptions:L,transformImpl:mN[T],transformOptions:M,colorMode:A}}function ilt(e,t){const n=A7(e,t),{fx:r,fy:i,x:{zero:s},y:{zero:o},markOptions:a,transformOptions:l,colorMode:c}=n,u=ux[n.markImpl],f=ux[n.transformImpl],d=r!=null||i!=null?FT({strokeOpacity:.1}):null,h=[s?Wa([0]):null,o?Ha([0]):null],p=u(e,f?f(l,a):a);return c==="stroke"?Xi(d,h,p):Xi(d,p,h)}function Cd(e){let t,n;for(const r of e){if(r==null)continue;if(t===void 0){t=r;continue}const i=Math.sign(je(t,r));if(i){if(n!==void 0&&i!==n)return!1;t=r,n=i}}return!0}function slt({x:e,y:t,color:n,size:r,fx:i,fy:s,mark:o}={}){return hs(e)||(e=Hc(e)),hs(t)||(t=Hc(t)),hs(n)||(n=Ey(n)?{color:n}:Hc(n)),hs(r)||(r=Hc(r)),hs(i)&&({value:i}=Hc(i)),hs(s)&&({value:s}=Hc(s)),o!=null&&(o=`${o}`.toLowerCase()),{x:e,y:t,color:n,size:r,fx:i,fy:s,mark:o}}function C0(e,t){const n=Pt(e,t.value);return n&&(n.label=qo(t.value)),n}function Hc(e){return olt(e)?{reduce:e}:{value:e}}function U0(e){return/^(?:distinct|count|sum|proportion)$/i.test(e)}function pN(e){return/^(?:first|last|mode)$/i.test(e)}function olt(e){if(e==null)return!1;if(typeof e.reduceIndex=="function"||typeof e.reduce=="function"&&Ii(e)||/^p\d{2}$/i.test(e))return!0;switch(`${e}`.toLowerCase()){case"first":case"last":case"count":case"distinct":case"sum":case"proportion":case"proportion-facet":case"deviation":case"min":case"min-index":case"max":case"max-index":case"mean":case"median":case"variance":case"mode":return!0}return!1}function yN(e){return e?new cy(e).size>e.length>>1:!1}const ux={dot:pl,line:XT,lineX:Np,lineY:kp,areaX:$p,areaY:Pf,ruleX:Wa,ruleY:Ha,barX:Hl,barY:Gl,rect:QT,rectX:P1,rectY:z1,cell:Lu,bin:Rl,binX:ya,binY:ma,group:aT,groupX:Tp,groupY:Ep},mN=Object.fromEntries(Object.entries(ux).map(([e,t])=>[t,e]));function KT(e,t={}){let{x:n,x1:r,x2:i}=t;n===void 0&&r===void 0&&i===void 0&&(t={...t,x:n=_t});const s={};return n!=null&&(s.x=e),r!=null&&(s.x1=e),i!=null&&(s.x2=e),Uo(s,t)}function ZT(e,t={}){let{y:n,y1:r,y2:i}=t;n===void 0&&r===void 0&&i===void 0&&(t={...t,y:n=_t});const s={};return n!=null&&(s.y=e),r!=null&&(s.y1=e),i!=null&&(s.y2=e),Uo(s,t)}function Uo(e={},t={}){const n=fl(t),r=Object.entries(e).map(([i,s])=>{const o=yC(i,t);if(o==null)throw new Error(`missing channel: ${i}`);const[a,l]=Cr(o);return{key:i,input:o,output:a,setOutput:l,map:alt(s)}});return{...js(t,(i,s)=>{const o=Pt(i,n),a=r.map(({input:c})=>Pt(i,c)),l=r.map(({setOutput:c})=>c(new Array(i.length)));for(const c of s)for(const u of o?Vo(c,f=>o[f]).values():[c])r.forEach(({map:f},d)=>f.mapIndex(u,a[d],l[d]));return{data:i,facets:s}}),...Object.fromEntries(r.map(({key:i,output:s})=>[i,s]))}}function alt(e){if(e==null)throw new Error("missing map");if(typeof e.mapIndex=="function")return e;if(typeof e.map=="function"&&Ii(e))return llt(e);if(typeof e=="function")return R_(K3(e));switch(`${e}`.toLowerCase()){case"cumsum":return ult;case"rank":return R_((t,n)=>yF(t,r=>n[r]));case"quantile":return R_((t,n)=>clt(t,r=>n[r]))}throw new Error(`invalid map: ${e}`)}function llt(e){return console.warn("deprecated map interface; implement mapIndex instead."),{mapIndex:e.map.bind(e)}}function clt(e,t){const n=tv(e,t)-1;return yF(e,t).map(r=>r/n)}function R_(e){return{mapIndex(t,n,r){const i=e(t,n);if(i.length!==t.length)throw new Error("map function returned a mismatched length");for(let s=0,o=t.length;s<o;++s)r[t[s]]=i[s]}}}const ult={mapIndex(e,t,n){let r=0;for(const i of e)n[i]=r+=t[i]}};function flt(e={},t){return arguments.length===1&&(t=e),KT(Qv(e),t)}function dlt(e={},t){return arguments.length===1&&(t=e),ZT(Qv(e),t)}function Qv(e={}){typeof e=="number"&&(e={k:e});let{k:t,reduce:n,shift:r,anchor:i,strict:s}=e;if(i===void 0&&r!==void 0&&(i=plt(r),Eo(`Warning: the shift option is deprecated; please use anchor "${i}" instead.`)),!((t=Math.floor(t))>0))throw new Error(`invalid k: ${t}`);return ylt(n)(t,hlt(i,t),s)}function hlt(e="middle",t){switch(`${e}`.toLowerCase()){case"middle":return t-1>>1;case"start":return 0;case"end":return t-1}throw new Error(`invalid anchor: ${e}`)}function plt(e){switch(`${e}`.toLowerCase()){case"centered":return"middle";case"leading":return"start";case"trailing":return"end"}throw new Error(`invalid shift: ${e}`)}function ylt(e="mean"){if(typeof e=="string"){if(/^p\d{2}$/i.test(e))return P0(X3(e));switch(e.toLowerCase()){case"deviation":return P0(ly);case"max":return z0((t,n)=>De(t,r=>n[r]));case"mean":return mlt;case"median":return P0(hp);case"min":return z0((t,n)=>xn(t,r=>n[r]));case"mode":return z0((t,n)=>pF(t,r=>n[r]));case"sum":return M7;case"variance":return P0(u3);case"difference":return vlt;case"ratio":return wlt;case"first":return _lt;case"last":return Slt}}if(typeof e!="function")throw new Error(`invalid reduce: ${e}`);return z0(K3(e))}function P0(e){return(t,n,r)=>r?{mapIndex(i,s,o){const a=c=>s[c]==null?NaN:+s[c];let l=0;for(let c=0;c<t-1;++c)isNaN(a(c))&&++l;for(let c=0,u=i.length-t+1;c<u;++c)isNaN(a(c+t-1))&&++l,o[i[c+n]]=l===0?e(rc(i,c,c+t),a):NaN,isNaN(a(c))&&--l}}:{mapIndex(i,s,o){const a=l=>s[l]==null?NaN:+s[l];for(let l=-n;l<0;++l)o[i[l+n]]=e(rc(i,0,l+t),a);for(let l=0,c=i.length-n;l<c;++l)o[i[l+n]]=e(rc(i,l,l+t),a)}}}function z0(e){return(t,n,r)=>r?{mapIndex(i,s,o){let a=0;for(let l=0;l<t-1;++l)a+=ir(s[i[l]]);for(let l=0,c=i.length-t+1;l<c;++l)a+=ir(s[i[l+t-1]]),a===t&&(o[i[l+n]]=e(rc(i,l,l+t),s)),a-=ir(s[i[l]])}}:{mapIndex(i,s,o){for(let a=-n;a<0;++a)o[i[a+n]]=e(rc(i,0,a+t),s);for(let a=0,l=i.length-n;a<l;++a)o[i[a+n]]=e(rc(i,a,a+t),s)}}}function M7(e,t,n){return n?{mapIndex(r,i,s){let o=0,a=0;for(let l=0;l<e-1;++l){const c=i[r[l]];c===null||isNaN(c)?++o:a+=+c}for(let l=0,c=r.length-e+1;l<c;++l){const u=i[r[l]],f=i[r[l+e-1]];f===null||isNaN(f)?++o:a+=+f,s[r[l+t]]=o===0?a:NaN,u===null||isNaN(u)?--o:a-=+u}}}:{mapIndex(r,i,s){let o=0;const a=r.length;for(let l=0,c=Math.min(a,e-t-1);l<c;++l)o+=+i[r[l]]||0;for(let l=-t,c=a-t;l<c;++l)o+=+i[r[l+e-1]]||0,s[r[l+t]]=o,o-=+i[r[l]]||0}}}function mlt(e,t,n){if(n){const r=M7(e,t,n);return{mapIndex(i,s,o){r.mapIndex(i,s,o);for(let a=0,l=i.length-e+1;a<l;++a)o[i[a+t]]/=e}}}else return{mapIndex(r,i,s){let o=0,a=0;const l=r.length;for(let c=0,u=Math.min(l,e-t-1);c<u;++c){let f=i[r[c]];f!==null&&!isNaN(f=+f)&&(o+=f,++a)}for(let c=-t,u=l-t;c<u;++c){let f=i[r[c+e-1]],d=i[r[c]];f!==null&&!isNaN(f=+f)&&(o+=f,++a),s[r[c+t]]=o/a,d!==null&&!isNaN(d=+d)&&(o-=d,--a)}}}}function glt(e,t,n,r){for(let i=n+r;n<i;++n){const s=e[t[n]];if(ir(s))return s}}function blt(e,t,n,r){for(let i=n+r-1;i>=n;--i){const s=e[t[i]];if(ir(s))return s}}function $7(e,t,n,r){for(let i=n+r;n<i;++n){let s=e[t[n]];if(s!==null&&!isNaN(s=+s))return s}}function N7(e,t,n,r){for(let i=n+r-1;i>=n;--i){let s=e[t[i]];if(s!==null&&!isNaN(s=+s))return s}}function vlt(e,t,n){return n?{mapIndex(r,i,s){for(let o=0,a=r.length-e;o<a;++o){const l=i[r[o]],c=i[r[o+e-1]];s[r[o+t]]=l===null||c===null?NaN:c-l}}}:{mapIndex(r,i,s){for(let o=-t,a=r.length-e+t+1;o<a;++o)s[r[o+t]]=N7(i,r,o,e)-$7(i,r,o,e)}}}function wlt(e,t,n){return n?{mapIndex(r,i,s){for(let o=0,a=r.length-e;o<a;++o){const l=i[r[o]],c=i[r[o+e-1]];s[r[o+t]]=l===null||c===null?NaN:c/l}}}:{mapIndex(r,i,s){for(let o=-t,a=r.length-e+t+1;o<a;++o)s[r[o+t]]=N7(i,r,o,e)/$7(i,r,o,e)}}}function _lt(e,t,n){return n?{mapIndex(r,i,s){for(let o=0,a=r.length-e;o<a;++o)s[r[o+t]]=i[r[o]]}}:{mapIndex(r,i,s){for(let o=-t,a=r.length-e+t+1;o<a;++o)s[r[o+t]]=glt(i,r,o,e)}}}function Slt(e,t,n){return n?{mapIndex(r,i,s){for(let o=0,a=r.length-e;o<a;++o)s[r[o+t]]=i[r[o+e-1]]}}:{mapIndex(r,i,s){for(let o=-t,a=r.length-e+t+1;o<a;++o)s[r[o+t]]=blt(i,r,o,e)}}}const Ao={n:20,k:2,color:"currentColor",opacity:.2,strict:!0,anchor:"end"};function xlt(e,{x:t=_t,y:n,k:r=Ao.k,color:i=Ao.color,opacity:s=Ao.opacity,fill:o=i,fillOpacity:a=s,stroke:l=i,strokeOpacity:c,strokeWidth:u,...f}={}){return Xi(Xe(o)?null:$p(e,Uo({x1:ic({k:-r,...f}),x2:ic({k:r,...f})},{x1:t,x2:t,y:n,fill:o,fillOpacity:a,...f})),Xe(l)?null:Np(e,Uo({x:ic(f)},{x:t,y:n,stroke:l,strokeOpacity:c,strokeWidth:u,...f})))}function Ilt(e,{x:t,y:n=_t,k:r=Ao.k,color:i=Ao.color,opacity:s=Ao.opacity,fill:o=i,fillOpacity:a=s,stroke:l=i,strokeOpacity:c,strokeWidth:u,...f}={}){return Xi(Xe(o)?null:Pf(e,Uo({y1:ic({k:-r,...f}),y2:ic({k:r,...f})},{x:t,y1:n,y2:n,fill:o,fillOpacity:a,...f})),Xe(l)?null:kp(e,Uo({y:ic(f)},{x:t,y:n,stroke:l,strokeOpacity:c,strokeWidth:u,...f})))}function ic({n:e=Ao.n,k:t=0,strict:n=Ao.strict,anchor:r=Ao.anchor}={}){return Qv({k:e,reduce:i=>ev(i)+t*(ly(i)||0),strict:n,anchor:r})}const Tlt={ariaLabel:"tick",fill:null,stroke:"currentColor"};class k7 extends Se{constructor(t,n,r){super(t,n,r,Tlt),ad(this,r)}render(t,n,r,i,s){return re("svg:g",s).call(Oe,this,i,s).call(this._transform,this,n).call(o=>o.selectAll().data(t).enter().append("line").call($e,this).attr("x1",this._x1(n,r,i)).attr("x2",this._x2(n,r,i)).attr("y1",this._y1(n,r,i)).attr("y2",this._y2(n,r,i)).call(pn,this,r).call(Oy,this,r,s)).node()}}class D7 extends k7{constructor(t,n={}){const{x:r,y:i,inset:s=0,insetTop:o=s,insetBottom:a=s}=n;super(t,{x:{value:r,scale:"x"},y:{value:i,scale:"y",type:"band",optional:!0}},n),this.insetTop=Yt(o),this.insetBottom=Yt(a)}_transform(t,n,{x:r}){t.call(_e,n,{x:r},Mn,0)}_x1(t,{x:n}){return r=>n[r]}_x2(t,{x:n}){return r=>n[r]}_y1({y:t},{y:n},{marginTop:r}){const{insetTop:i}=this;return n&&t?s=>n[s]+i:r+i}_y2({y:t},{y:n},{height:r,marginBottom:i}){const{insetBottom:s}=this;return n&&t?o=>n[o]+t.bandwidth()-s:r-i-s}}class O7 extends k7{constructor(t,n={}){const{x:r,y:i,inset:s=0,insetRight:o=s,insetLeft:a=s}=n;super(t,{y:{value:i,scale:"y"},x:{value:r,scale:"x",type:"band",optional:!0}},n),this.insetRight=Yt(o),this.insetLeft=Yt(a)}_transform(t,n,{y:r}){t.call(_e,n,{y:r},0,Mn)}_x1({x:t},{x:n},{marginLeft:r}){const{insetLeft:i}=this;return n&&t?s=>n[s]+i:r+i}_x2({x:t},{x:n},{width:r,marginRight:i}){const{insetRight:s}=this;return n&&t?o=>n[o]+t.bandwidth()-s:r-i-s}_y1(t,{y:n}){return r=>n[r]}_y2(t,{y:n}){return r=>n[r]}}function F7(e,{x:t=_t,...n}={}){return new D7(e,{...n,x:t})}function B7(e,{y:t=_t,...n}={}){return new O7(e,{...n,y:t})}function Elt(e,{x:t=_t,y:n=null,fill:r="#ccc",fillOpacity:i,stroke:s="currentColor",strokeOpacity:o,strokeWidth:a=2,sort:l,...c}={}){const u=n!=null?Ep:oT;return Xi(Ha(e,u({x1:JT,x2:tE},{x:t,y:n,stroke:s,strokeOpacity:o,...c})),Hl(e,u({x1:"p25",x2:"p75"},{x:t,y:n,fill:r,fillOpacity:i,...c})),F7(e,u({x:"p50"},{x:t,y:n,stroke:s,strokeOpacity:o,strokeWidth:a,sort:l,...c})),pl(e,Uo({x:L7},{x:t,y:n,z:n,stroke:s,strokeOpacity:o,...c})))}function Alt(e,{y:t=_t,x:n=null,fill:r="#ccc",fillOpacity:i,stroke:s="currentColor",strokeOpacity:o,strokeWidth:a=2,sort:l,...c}={}){const u=n!=null?Tp:oT;return Xi(Wa(e,u({y1:JT,y2:tE},{x:n,y:t,stroke:s,strokeOpacity:o,...c})),Gl(e,u({y1:"p25",y2:"p75"},{x:n,y:t,fill:r,fillOpacity:i,...c})),B7(e,u({y:"p50"},{x:n,y:t,stroke:s,strokeOpacity:o,strokeWidth:a,sort:l,...c})),pl(e,Uo({y:L7},{x:n,y:t,z:n,stroke:s,strokeOpacity:o,...c})))}function L7(e){const t=JT(e),n=tE(e);return e.map(r=>r<t||r>n?r:NaN)}function JT(e){const t=R7(e)*2.5-C7(e)*1.5;return xn(e,n=>n>=t?n:NaN)}function tE(e){const t=C7(e)*2.5-R7(e)*1.5;return De(e,n=>n<=t?n:NaN)}function R7(e){return ja(e,.25)}function C7(e){return ja(e,.75)}const Mlt={ariaLabel:"raster",stroke:null,pixelSize:1};function Gc(e,t){const n=+e;if(isNaN(n))throw new Error(`invalid ${t}: ${e}`);return n}function gN(e,t){const n=Math.floor(e);if(isNaN(n))throw new Error(`invalid ${t}: ${e}`);return n}class U7 extends Se{constructor(t,n,r={},i){let{width:s,height:o,x:a,y:l,x1:c=a==null?0:void 0,y1:u=l==null?0:void 0,x2:f=a==null?s:void 0,y2:d=l==null?o:void 0,pixelSize:h=i.pixelSize,blur:p=0,interpolate:g}=r;if(s!=null&&(s=gN(s,"width")),o!=null&&(o=gN(o,"height")),c!=null&&(c=Gc(c,"x1")),u!=null&&(u=Gc(u,"y1")),f!=null&&(f=Gc(f,"x2")),d!=null&&(d=Gc(d,"y2")),a==null&&(c==null||f==null))throw new Error("missing x");if(l==null&&(u==null||d==null))throw new Error("missing y");t!=null&&s!=null&&o!=null&&(a===void 0&&c!=null&&f!=null&&(a=Rlt(c,f,s)),l===void 0&&u!=null&&d!=null&&(l=Clt(u,d,s,o))),super(t,{x:{value:a,scale:"x",optional:!0},y:{value:l,scale:"y",optional:!0},x1:{value:c==null?null:[c],scale:"x",optional:!0,filter:null},y1:{value:u==null?null:[u],scale:"y",optional:!0,filter:null},x2:{value:f==null?null:[f],scale:"x",optional:!0,filter:null},y2:{value:d==null?null:[d],scale:"y",optional:!0,filter:null},...n},r,i),this.width=s,this.height=o,this.pixelSize=Gc(h,"pixelSize"),this.blur=Gc(p,"blur"),this.interpolate=a==null||l==null?null:Nlt(g)}}class P7 extends U7{constructor(t,n={}){const{imageRendering:r}=n;if(t==null){const{fill:i,fillOpacity:s}=n;nn(s)[0]!==void 0&&(n=fx("fillOpacity",n)),Ir(i)[0]!==void 0&&(n=fx("fill",n))}super(t,void 0,n,Mlt),this.imageRendering=We(r,"auto")}scale(t,{color:n,...r},i){return super.scale(t,r,i)}render(t,n,r,i,s){var M;const o=n[(M=r.channels.fill)==null?void 0:M.scale]??(N=>N),{x:a,y:l}=r,{document:c}=s,[u,f,d,h]=j7(r,i,s),p=d-u,g=h-f,{pixelSize:v,width:y=Math.round(Math.abs(p)/v),height:m=Math.round(Math.abs(g)/v)}=this,b=y*m;let{fill:w,fillOpacity:S}=r,_=0;if(this.interpolate){const N=y/p,B=m/g,O=Te(a,F=>(F-u)*N,Float64Array),C=Te(l,F=>(F-f)*B,Float64Array);w&&(w=this.interpolate(t,y,m,O,C,w)),S&&(S=this.interpolate(t,y,m,O,C,S))}else this.data==null&&t&&(_=t.fi*b);const x=c.createElement("canvas");x.width=y,x.height=m;const E=x.getContext("2d"),k=E.createImageData(y,m),I=k.data;let{r:A,g:D,b:L}=wi(this.fill)??{r:0,g:0,b:0},T=(this.fillOpacity??1)*255;for(let N=0;N<b;++N){const B=N<<2;if(w){const O=o(w[N+_]);if(O==null){I[B+3]=0;continue}({r:A,g:D,b:L}=wi(O))}S&&(T=S[N+_]*255),I[B+0]=A,I[B+1]=D,I[B+2]=L,I[B+3]=T}return this.blur>0&&MG(k,this.blur),E.putImageData(k,0,0),re("svg:g",s).call(Oe,this,i,s).call(_e,this,n).call(N=>N.append("image").attr("transform",`translate(${u},${f}) scale(${Math.sign(d-u)},${Math.sign(h-f)})`).attr("width",Math.abs(p)).attr("height",Math.abs(g)).attr("preserveAspectRatio","none").call(pt,"image-rendering",this.imageRendering).call($e,this).attr("xlink:href",x.toDataURL())).node()}}function z7(e,t,n){arguments.length<3&&(n=t,t=null);let{x:r,y:i,[e]:s,...o}=n;return r===void 0&&i===void 0&&Jrt(t)&&(r=Iy,i=xp,s===void 0&&(s=Grt)),[t,{...o,x:r,y:i,[e]:s}]}function $lt(){const[e,t]=z7("fill",...arguments);return new P7(e,e==null||t.fill!==void 0||t.fillOpacity!==void 0?t:{...t,fill:_t})}function j7({x1:e,y1:t,x2:n,y2:r},i,{projection:s}){const{width:o,height:a,marginTop:l,marginRight:c,marginBottom:u,marginLeft:f}=i;return[e&&s==null?e[0]:f,t&&s==null?t[0]:l,n&&s==null?n[0]:o-c,r&&s==null?r[0]:a-u]}function V7({x1:e,y1:t,x2:n,y2:r},i,s,o){const a={};return e&&(a.x1=e),t&&(a.y1=t),n&&(a.x2=n),r&&(a.y2=r),j7(pT(a,i),s,o)}function fx(e,t={}){const{[e]:n}=t;if(typeof n!="function")throw new Error(`invalid ${e}: not a function`);return Er({...t,[e]:void 0},function(r,i,s,o,a,l){const{x:c,y:u}=o;if(!c)throw new Error("missing scale: x");if(!u)throw new Error("missing scale: y");const[f,d,h,p]=V7(s,o,a,l),g=h-f,v=p-d,{pixelSize:y}=this,{width:m=Math.round(Math.abs(g)/y),height:b=Math.round(Math.abs(v)/y)}=t,w=new Array(m*b*(i?i.length:1)),S=g/m,_=v/b;let x=0;for(const E of i??[void 0])for(let k=.5;k<b;++k)for(let I=.5;I<m;++I,++x)w[x]=n(c.invert(f+I*S),u.invert(d+k*_),E);return{data:w,facets:i,channels:{[e]:{value:w,scale:"auto"}}}})}function Nlt(e){if(typeof e=="function")return e;if(e==null)return dx;switch(`${e}`.toLowerCase()){case"none":return dx;case"nearest":return q7;case"barycentric":return Y7();case"random-walk":return W7()}throw new Error(`invalid interpolate: ${e}`)}function dx(e,t,n,r,i,s){const o=new Array(t*n);for(const a of e)r[a]<0||r[a]>=t||i[a]<0||i[a]>=n||(o[Math.floor(i[a])*t+Math.floor(r[a])]=s[a]);return o}function Y7({random:e=F3(42)}={}){return(t,n,r,i,s,o)=>{const{points:a,triangles:l,hull:c}=ll.from(t,h=>i[h],h=>s[h]),u=new o.constructor(n*r).fill(NaN),f=new Uint8Array(n*r),d=Llt(o,e);for(let h=0;h<l.length;h+=3){const p=l[h],g=l[h+1],v=l[h+2],y=a[2*p],m=a[2*g],b=a[2*v],w=a[2*p+1],S=a[2*g+1],_=a[2*v+1],x=Math.min(y,m,b),E=Math.max(y,m,b),k=Math.min(w,S,_),I=Math.max(w,S,_),A=(S-_)*(y-b)+(w-_)*(b-m);if(!A)continue;const D=o[t[p]],L=o[t[g]],T=o[t[v]];for(let M=Math.floor(x);M<E;++M)for(let N=Math.floor(k);N<I;++N){if(M<0||M>=n||N<0||N>=r)continue;const B=M+.5,O=N+.5,C=((S-_)*(B-b)+(O-_)*(b-m))/A;if(C<0)continue;const F=((_-w)*(B-b)+(O-_)*(y-b))/A;if(F<0)continue;const P=1-C-F;if(P<0)continue;const z=M+n*N;u[z]=d(D,C,L,F,T,P,M,N),f[z]=1}}return klt(u,f,i,s,o,n,r,c,t,d),u}}function klt(e,t,n,r,i,s,o,a,l,c){n=Float64Array.from(a,h=>n[l[h]]),r=Float64Array.from(a,h=>r[l[h]]),i=Array.from(a,h=>i[l[h]]);const u=n.length,f=Array.from({length:u},(h,p)=>Olt(p,n,r));let d=0;for(let h=0;h<o;++h){const p=h+.5;for(let g=0;g<s;++g){const v=g+s*h;if(!t[v]){const y=g+.5;for(let m=0;m<u;++m){const b=(u+d+(m%2?(m+1)/2:-m/2))%u;if(f[b](y,p)){const w=Dlt(n.at(b-1),r.at(b-1),n[b],r[b],y,p);e[v]=c(i.at(b-1),w,i[b],1-w,i[b],0,g,h),d=b;break}}}}}}function Dlt(e,t,n,r,i,s){const o=n-e,a=r-t,l=o*(n-i)+a*(r-s),c=o*(i-e)+a*(s-t);return l>0&&c>0?l/(l+c):+(l>c)}function Ud(e,t,n,r){return e*r-n*t}function Olt(e,t,n){const r=t.length,i=t.at(e-2),s=n.at(e-2),o=t.at(e-1),a=n.at(e-1),l=t[e],c=n[e],u=t.at(e+1-r),f=n.at(e+1-r),d=o-l,h=a-c,p=i-o,g=s-a,v=l-u,y=c-f,m=Math.hypot(d,h),b=Math.hypot(p,g),w=Math.hypot(v,y);return(S,_)=>{const x=S-o,E=_-a,k=S-l,I=_-c;return Ud(x,E,k,I)>-1e-6&&Ud(x,E,d,h)*b-Ud(x,E,p,g)*m>-1e-6&&Ud(k,I,v,y)*m-Ud(k,I,d,h)*w<=0}}function q7(e,t,n,r,i,s){const o=new s.constructor(t*n),a=ll.from(e,u=>r[u],u=>i[u]);let l,c;for(let u=.5,f=0;u<n;++u){c=l;for(let d=.5;d<t;++d,++f)c=a.find(d,u,c),d===.5&&(l=c),o[f]=s[e[c]]}return o}function W7({random:e=F3(42),minDistance:t=.5,maxSteps:n=2}={}){return(r,i,s,o,a,l)=>{const c=new l.constructor(i*s),u=ll.from(r,p=>o[p],p=>a[p]);let f,d,h;for(let p=.5,g=0;p<s;++p){d=f;for(let v=.5;v<i;++v,++g){let y=v,m=p;h=d=u.find(y,m,d),v===.5&&(f=d);let b,w=0;for(;(b=Math.hypot(o[r[h]]-y,a[r[h]]-m))>t&&w<n;){const S=e(v,p,w)*2*Math.PI;y+=Math.cos(S)*b,m+=Math.sin(S)*b,h=u.find(y,m,h),++w}c[g]=l[r[h]]}}return c}}function Flt(e,t,n,r,i,s){return t*e+r*n+s*i}function Blt(e){return(t,n,r,i,s,o,a,l)=>{const c=e(a,l);return c<n?t:c<n+i?r:s}}function Llt(e,t){return Bu(e)||or(e)?Flt:Blt(t)}function Rlt(e,t,n){return{transform(r){const i=r.length,s=new Float64Array(i),o=(t-e)/n,a=e+o/2;for(let l=0;l<i;++l)s[l]=l%n*o+a;return s}}}function Clt(e,t,n,r){return{transform(i){const s=i.length,o=new Float64Array(s),a=(t-e)/r,l=e+a/2;for(let c=0;c<s;++c)o[c]=Math.floor(c/n)%r*a+l;return o}}}const bN={ariaLabel:"contour",fill:"none",stroke:"currentColor",strokeMiterlimit:1,pixelSize:2};class H7 extends U7{constructor(t,{smooth:n=!0,value:r,...i}={}){const s=NC({},i,bN);if(r===void 0){for(const a in s)if(s[a].value!=null){if(r!==void 0)throw new Error("ambiguous contour value");r=i[a],i[a]="value"}}if(r!=null){const a={transform:l=>l.map(c=>c.value),label:qo(r)};for(const l in s)i[l]==="value"&&(i[l]=a)}if(t==null){if(r==null)throw new Error("missing contour value");i=fx("value",{value:r,...i}),r=null}else{let{interpolate:a}=i;r===void 0&&(r=_t),a===void 0&&(i.interpolate="nearest")}super(t,{value:{value:r,optional:!0}},Ult(i),bN);const o={geometry:{value:_t}};for(const a in this.channels){const l=this.channels[a],{scale:c}=l;c==="x"||c==="y"||a==="value"||(o[a]=l,delete this.channels[a])}this.contourChannels=o,this.smooth=!!n}filter(t,{x:n,y:r,value:i,...s},o){return super.filter(t,s,o)}render(t,n,r,i,s){const{geometry:o}=r,a=cl();return re("svg:g",s).call(Oe,this,i,s).call(_e,this,n).call(l=>{l.selectAll().data(t).enter().append("path").call($e,this).attr("d",c=>a(o[c])).call(pn,this,r)}).node()}}function Ult({thresholds:e,interval:t,...n}){return e=u7(e,t,p3),Er(n,function(r,i,s,o,a,l){const[c,u,f,d]=V7(s,o,a,l),h=f-c,p=d-u,{pixelSize:g,width:v=Math.round(Math.abs(h)/g),height:y=Math.round(Math.abs(p)/g)}=this,m=v/h,b=y/p,w=s.value.value,S=[];if(this.interpolate){const{x:I,y:A}=Bv(s,o,l),D=Te(I,N=>(N-c)*m,Float64Array),L=Te(A,N=>(N-u)*b,Float64Array),T=[s.x,s.y,s.value],M=[D,L,w];for(const N of i){const B=this.filter(N,T,M);S.push(this.interpolate(B,v,y,D,L,w))}}else if(i){const I=v*y,A=i.length;for(let D=0;D<A;++D)S.push(w.slice(D*I,D*I+I))}else S.push(w);if(this.blur>0)for(const I of S)iF({data:I,width:v,height:y},this.blur);const _=Plt(e,w,...jlt(S));if(_===null)throw new Error(`unsupported thresholds: ${e}`);const{contour:x}=Xg().size([v,y]).smooth(this.smooth),E=[],k=[];for(const I of S)k.push(Lr(E.length,E.push(...Te(_,A=>x(I,A)))));for(const{coordinates:I}of E)for(const A of I)for(const D of A)for(const L of D)L[0]=L[0]/m+c,L[1]=L[1]/b+u;return{data:E,facets:k,channels:TC(this.contourChannels,E)}})}function Plt(e,t,n,r){if(typeof(e==null?void 0:e.range)=="function")return e.range(e.floor(n),r);if(typeof e=="function"&&(e=e(t,n,r)),typeof e!="number")return Tr(e);const i=za(...uF(n,r,e),e);for(;i[i.length-1]>=r;)i.pop();for(;i[1]<n;)i.shift();return i}function zlt(){return new H7(...z7("value",...arguments))}function jlt(e){return[xn(e,t=>xn(t,vN)),De(e,t=>De(t,vN))]}function vN(e){return isFinite(e)?e:NaN}function Vlt(e,t){return eE(TT,e,t)}function Ylt(e,t={}){return eE(ET,e,t)}function qlt(e,t={}){return eE(AT,e,t)}function eE(e,t,n={}){const{x:r,y:i,maxRadius:s}=n,o=e({px:r,py:i,maxRadius:s}),a=[];r!=null&&a.push(Wa(t,wN("x",{...o,inset:-6},n))),i!=null&&a.push(Ha(t,wN("y",{...o,inset:-6},n))),r!=null&&a.push(Rf(t,_N("x",{...o,dy:9,frameAnchor:"bottom",lineAnchor:"top"},n))),i!=null&&a.push(Rf(t,_N("y",{...o,dx:-9,frameAnchor:"left",textAnchor:"end"},n)));for(const l of a)l.ariaLabel=`crosshair ${l.ariaLabel}`;return Xi(...a)}function G7(e,{channels:t,...n},{facet:r,facetAnchor:i,fx:s,fy:o,[e]:a,channels:l,transform:c,initializer:u}){return{...n,facet:r,facetAnchor:i,fx:s,fy:o,[e]:a,channels:{...t,...l},transform:c,initializer:Wlt(e,u)}}function Wlt(e,t){return t==null?t:function(n,r,{x:i,y:s,px:o,py:a,...l},...c){const{channels:{x:u,y:f,...d}={},...h}=t.call(this,n,r,{...l,x:o,y:a},...c);return{channels:{...d,...u&&{px:u,...e==="x"&&{x:u}},...f&&{py:f,...e==="y"&&{y:f}}},...h}}}function wN(e,t,n){const{color:r="currentColor",opacity:i=.2,ruleStroke:s=r,ruleStrokeOpacity:o=i,ruleStrokeWidth:a}=n;return{...G7(e,t,n),stroke:s,strokeOpacity:o,strokeWidth:a}}function _N(e,t,n){const{color:r="currentColor",textFill:i=r,textFillOpacity:s,textStroke:o="white",textStrokeOpacity:a,textStrokeWidth:l=5}=n;return{...G7(e,t,Hlt(e,n)),fill:i,fillOpacity:s,stroke:o,strokeOpacity:a,strokeWidth:l}}function Hlt(e,t){return Er(t,(n,r,i)=>{var s;return{channels:{text:{value:(s=rx(i,e))==null?void 0:s.value}}}})}const Glt={ariaLabel:"delaunay link",fill:"none",stroke:"currentColor",strokeMiterlimit:1},Xlt={ariaLabel:"delaunay mesh",fill:null,stroke:"currentColor",strokeOpacity:.2},Qlt={ariaLabel:"hull",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeMiterlimit:1},Klt={ariaLabel:"voronoi",fill:"none",stroke:"currentColor",strokeMiterlimit:1},Zlt={ariaLabel:"voronoi mesh",fill:null,stroke:"currentColor",strokeOpacity:.2};class Jlt extends Se{constructor(t,n={}){const{x:r,y:i,z:s,curve:o,tension:a}=n;super(t,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},z:{value:s,optional:!0}},n,Glt),this.curve=RT(o,a),ad(this,n)}render(t,n,r,i,s){const{x:o,y:a}=n,{x:l,y:c,z:u}=r,{curve:f}=this,[d,h]=Vs(this,i),p=l?m=>l[m]:qr(d),g=c?m=>c[m]:qr(h),v=this;function y(m){let b=-1;const w=[],S={};for(const T in r)S[T]=[];const _=[],x=[],E=[],k=[];function I(T,M){T=m[T],M=m[M],w.push(++b),_[b]=p(T),E[b]=g(T),x[b]=p(M),k[b]=g(M);for(const N in r)S[N].push(r[N][M])}const{halfedges:A,hull:D,triangles:L}=ll.from(m,p,g);for(let T=0;T<A.length;++T){const M=A[T];M>T&&I(L[T],L[M])}for(let T=0;T<D.length;++T)I(D[T],D[(T+1)%D.length]);be(this).selectAll().data(w).enter().append("path").call($e,v).attr("d",T=>{const M=vo(),N=f(M);return N.lineStart(),N.point(_[T],E[T]),N.point(x[T],k[T]),N.lineEnd(),M}).call(pn,v,S).call(Oy,v,S,s)}return re("svg:g",s).call(Oe,this,i,s).call(_e,this,{x:l&&o,y:c&&a}).call(u?m=>m.selectAll().data(Vo(t,b=>u[b]).values()).enter().append("g").each(y):m=>m.datum(t).each(y)).node()}}class nE extends Se{constructor(t,n={},r,i=({z:s})=>s){const{x:s,y:o}=n;super(t,{x:{value:s,scale:"x",optional:!0},y:{value:o,scale:"y",optional:!0},z:{value:i(n),optional:!0}},n,r)}render(t,n,r,i,s){const{x:o,y:a}=n,{x:l,y:c,z:u}=r,[f,d]=Vs(this,i),h=l?y=>l[y]:qr(f),p=c?y=>c[y]:qr(d),g=this;function v(y){const m=ll.from(y,h,p);be(this).append("path").datum(y[0]).call($e,g).attr("d",g._render(m,i)).call(pn,g,r)}return re("svg:g",s).call(Oe,this,i,s).call(_e,this,{x:l&&o,y:c&&a}).call(u?y=>y.selectAll().data(Vo(t,m=>u[m]).values()).enter().append("g").each(v):y=>y.datum(t).each(v)).node()}}class tct extends nE{constructor(t,n={}){super(t,n,Xlt),this.fill="none"}_render(t){return t.render()}}class ect extends nE{constructor(t,n={}){super(t,n,Qlt,fl)}_render(t){return t.renderHull()}}class nct extends Se{constructor(t,n={}){const{x:r,y:i,z:s}=n;super(t,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},z:{value:s,optional:!0}},n,Klt)}render(t,n,r,i,s){const{x:o,y:a}=n,{x:l,y:c,z:u}=r,[f,d]=Vs(this,i),h=l?y=>l[y]:qr(f),p=c?y=>c[y]:qr(d),g=this;function v(y){const m=ll.from(y,h,p),b=X7(m,i);be(this).selectAll().data(y).enter().append("path").call($e,g).attr("d",(w,S)=>b.renderCell(S)).call(pn,g,r)}return re("svg:g",s).call(Oe,this,i,s).call(_e,this,{x:l&&o,y:c&&a}).call(u?y=>y.selectAll().data(Vo(t,m=>u[m]).values()).enter().append("g").each(v):y=>y.datum(t).each(v)).node()}}class rct extends nE{constructor(t,n){super(t,n,Zlt),this.fill="none"}_render(t,n){return X7(t,n).render()}}function X7(e,t){const{width:n,height:r,marginTop:i,marginRight:s,marginBottom:o,marginLeft:a}=t;return e.voronoi([a,i,n-s,r-o])}function Ly(e,t,{x:n,y:r,...i}={}){return[n,r]=Zi(n,r),new e(t,{...i,x:n,y:r})}function ict(e,t){return Ly(Jlt,e,t)}function sct(e,t){return Ly(tct,e,t)}function oct(e,t){return Ly(ect,e,t)}function act(e,t){return Ly(nct,e,t)}function lct(e,t){return Ly(rct,e,t)}const cct={ariaLabel:"density",fill:"none",stroke:"currentColor",strokeMiterlimit:1};class Q7 extends Se{constructor(t,{x:n,y:r,z:i,weight:s,fill:o,stroke:a,...l}={}){const c=SN(o)&&(o="currentColor",!0),u=SN(a)&&(a="currentColor",!0);super(t,{x:{value:n,scale:"x",optional:!0},y:{value:r,scale:"y",optional:!0},z:{value:fl({z:i,fill:o,stroke:a}),optional:!0},weight:{value:s,optional:!0}},dct({...l,fill:o,stroke:a},c,u),cct),c&&(this.fill=void 0),u&&(this.stroke=void 0),this.z=i}filter(t){return t}render(t,n,r,i,s){const{contours:o}=r,a=cl();return re("svg:g",s).call(Oe,this,i,s).call(_e,this,{}).call(l=>l.selectAll().data(t).enter().append("path").call($e,this).call(pn,this,r).attr("d",c=>a(o[c]))).node()}}function uct(e,{x:t,y:n,...r}={}){return[t,n]=Zi(t,n),new Q7(e,{...r,x:t,y:n})}const fct=new Set(["x","y","z","weight"]);function dct(e,t,n){let{bandwidth:i,thresholds:s}=e;return i=i===void 0?20:+i,s=s===void 0?20:typeof(s==null?void 0:s[Symbol.iterator])=="function"?gr(s):+s,Er(e,function(o,a,l,c,u,f){var L;const d=l.weight?gr(l.weight.value):null,h=(L=l.z)==null?void 0:L.value,{z:p}=this,[g,v]=Vs(this,u),{width:y,height:m}=u,{x:b,y:w}=Bv(l,c,f),S=Object.fromEntries(Object.entries(l).filter(([T])=>!fct.has(T)).map(([T,M])=>[T,{...M,value:[]}])),_=t&&[],x=n&&[],E=cJ().x(b?T=>b[T]:g).y(w?T=>w[T]:v).weight(d?T=>d[T]:1).size([y,m]).bandwidth(i),k=[];for(const T of a){const M=[];k.push(M);for(const N of h?mT(T,h,p):[T]){const B=E.contours(N);M.push([N,B])}}let I=s;if(!(I instanceof Ff)){let T=0;for(const M of k)for(const[,N]of M){const B=N.max;B>T&&(T=B)}I=Float64Array.from({length:s-1},(M,N)=>T*100*(N+1)/s)}const A=[],D=[];for(const T of k){const M=[];A.push(M);for(const[N,B]of T)for(const O of I){M.push(D.length),D.push(B(O/100)),_&&_.push(O),x&&x.push(O);for(const C in S)S[C].value.push(l[C].value[N[0]])}}return _&&_.push(0),x&&x.push(0),{data:o,facets:A,channels:{...S,..._&&{fill:{value:_,scale:"color"}},...x&&{stroke:{value:x,scale:"color"}},contours:{value:D}}}})}function SN(e){return/^density$/i.test(e)}const hct={ariaLabel:"geo",fill:"none",stroke:"currentColor",strokeWidth:1,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class K7 extends Se{constructor(t,n={}){const[r,i]=nn(n.r,3);super(t,{geometry:{value:n.geometry,scale:"projection"},r:{value:r,scale:"r",filter:To,optional:!0}},GT(n),hct),this.r=i}render(t,n,r,i,s){const{geometry:o,r:a}=r,l=cl(s.projection??pct(n)),{r:c}=this;return Ev(c)?t=[]:c!==void 0&&l.pointRadius(c),re("svg:g",s).call(Oe,this,i,s).call(_e,this,n).call(u=>{u.selectAll().data(t).enter().append("path").call($e,this).attr("d",a?f=>l.pointRadius(a[f])(o[f]):f=>l(o[f])).call(pn,this,r)}).node()}}function pct({x:e,y:t}){if(e||t)return e??(e=n=>n),t??(t=n=>n),m1({point(n,r){this.stream.point(e(n),t(r))}})}function rE(e,{geometry:t=_t,...n}={}){switch(e==null?void 0:e.type){case"FeatureCollection":e=e.features;break;case"GeometryCollection":e=e.geometries;break;case"Feature":case"LineString":case"MultiLineString":case"MultiPoint":case"MultiPolygon":case"Point":case"Polygon":case"Sphere":e=[e];break}return new K7(e,{geometry:t,...n})}function yct({strokeWidth:e=1.5,...t}={}){return rE({type:"Sphere"},{strokeWidth:e,...t})}function mct({strokeOpacity:e=.1,...t}={}){return rE(itt(),{strokeOpacity:e,...t})}const Fh=.5,Bh=0;function gct(e={fill:"count"},{binWidth:t,...n}={}){const{z:r}=n;return t=t===void 0?20:Yt(t),e=lT(e,n),va(e,"fill")&&(n.channels={...n.channels,fill:{value:[]}}),n.symbol===void 0&&(n.symbol="hexagon"),n.r===void 0&&!va(e,"r")&&(n.r=t/2),Er(n,(i,s,o,a,l,c)=>{let{x:u,y:f,z:d,fill:h,stroke:p,symbol:g}=o;if(u===void 0)throw new Error("missing channel: x");if(f===void 0)throw new Error("missing channel: y");({x:u,y:f}=Bv(o,a,c)),d=d?d.value:Pt(i,r),h=h==null?void 0:h.value,p=p==null?void 0:p.value,g=g==null?void 0:g.value;const v=fT(e,{z:d,fill:h,stroke:p,symbol:g}),y=d&&[],m=h&&[],b=p&&[],w=g&&[],S=[],_=[],x=[];let E=-1;for(const D of e)D.initialize(i);for(const D of s){const L=[];for(const T of e)T.scope("facet",D);for(const[T,M]of ef(D,v))for(const N of bct(M,u,f,t)){L.push(++E),_.push(N.x),x.push(N.y),d&&y.push(v===d?T:d[N[0]]),h&&m.push(v===h?T:h[N[0]]),p&&b.push(v===p?T:p[N[0]]),g&&w.push(v===g?T:g[N[0]]);for(const B of e)B.reduce(N)}S.push(L)}const k=o.x.scale,I=o.y.scale,A={x:{value:_,source:a[k]?{value:Te(_,a[k].invert),scale:k}:null},y:{value:x,source:a[I]?{value:Te(x,a[I].invert),scale:I}:null},...d&&{z:{value:y}},...h&&{fill:{value:m,scale:"auto"}},...p&&{stroke:{value:b,scale:"auto"}},...g&&{symbol:{value:w,scale:"auto"}},...Object.fromEntries(e.map(({name:D,output:L})=>[D,{scale:"auto",label:L.label,radius:D==="r"?t/2:void 0,value:L.transform()}]))};return{data:i,facets:S,channels:A}})}function bct(e,t,n,r){const i=r*(1.5/wC),s=new Map;for(const o of e){let a=t[o],l=n[o];if(isNaN(a)||isNaN(l))continue;let c=Math.round(l=(l-Bh)/i),u=Math.round(a=(a-Fh)/r-(c&1)/2),f=l-c;if(Math.abs(f)*3>1){let p=a-u,g=u+(a<u?-1:1)/2,v=c+(l<c?-1:1),y=a-g,m=l-v;p*p+f*f>y*y+m*m&&(u=g+(c&1?1:-1)/2,c=v)}const d=`${u},${c}`;let h=s.get(d);h===void 0&&(s.set(d,h=[]),h.x=(u+(c&1)/2)*r+Fh,h.y=c*i+Bh),h.push(o)}return s.values()}const vct={ariaLabel:"hexgrid",fill:"none",stroke:"currentColor",strokeOpacity:.1};function wct(e){return new Z7(e)}class Z7 extends Se{constructor({binWidth:t=20,clip:n=!0,...r}={}){super(Oh,void 0,{clip:n,...r},vct),this.binWidth=Yt(t)}render(t,n,r,i,s){const{binWidth:o}=this,{marginTop:a,marginRight:l,marginBottom:c,marginLeft:u,width:f,height:d}=i,h=u-Fh,p=f-l-Fh,g=a-Bh,v=d-c-Bh,y=o/2,m=y*_C,b=m/2,w=y*2,S=m*1.5,_=Math.floor(h/w),x=Math.ceil(p/w),E=Math.floor((g+b)/S),k=Math.ceil((v-b)/S)+1,I=`m0,${Jo(-m)}l${Jo(y)},${Jo(b)}v${Jo(m)}l${Jo(-y)},${Jo(b)}`;let A=I;for(let D=E;D<k;++D)for(let L=_;L<x;++L)A+=`M${Jo(L*w+(D&1)*y)},${Jo(D*S)}${I}`;return re("svg:g",s).datum(0).call(Oe,this,i,s).call(_e,this,{},Mn+Fh,Mn+Bh).call(D=>D.append("path").call($e,this).call(pn,this,r).attr("d",A)).node()}}function Jo(e){return Math.round(e*1e3)/1e3}const _ct={ariaLabel:"image",fill:null,stroke:null};function Sct(e){return/^\.*\//.test(e)}function xct(e){return/^(blob|data|file|http|https):/i.test(e)}function Ict(e){return typeof e=="string"&&(Sct(e)||xct(e))?[void 0,e]:[e,void 0]}class J7 extends Se{constructor(t,n={}){let{x:r,y:i,r:s,width:o,height:a,rotate:l,src:c,preserveAspectRatio:u,crossOrigin:f,frameAnchor:d,imageRendering:h}=n;s==null&&(s=void 0),s===void 0&&o===void 0&&a===void 0?o=a=16:o===void 0&&a!==void 0?o=a:a===void 0&&o!==void 0&&(a=o);const[p,g]=Ict(c),[v,y]=nn(s),[m,b]=nn(o,y!==void 0?y*2:void 0),[w,S]=nn(a,y!==void 0?y*2:void 0),[_,x]=nn(l,0);super(t,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},r:{value:v,scale:"r",filter:To,optional:!0},width:{value:m,filter:To,optional:!0},height:{value:w,filter:To,optional:!0},rotate:{value:_,optional:!0},src:{value:p,optional:!0}},GT(n),_ct),this.src=g,this.width=b,this.rotate=x,this.height=S,this.r=y,this.preserveAspectRatio=We(u,"xMidYMid"),this.crossOrigin=zn(f),this.frameAnchor=Ay(d),this.imageRendering=We(h,"auto")}render(t,n,r,i,s){const{x:o,y:a}=n,{x:l,y:c,width:u,height:f,r:d,rotate:h,src:p}=r,{r:g,width:v,height:y,rotate:m}=this,[b,w]=Vs(this,i);return re("svg:g",s).call(Oe,this,i,s).call(_e,this,{x:l&&o,y:c&&a}).call(S=>S.selectAll().data(t).enter().append("image").call($e,this).attr("x",xN(l,u,d,b,v,g)).attr("y",xN(c,f,d,w,y,g)).attr("width",u?_=>u[_]:v!==void 0?v:d?_=>d[_]*2:g*2).attr("height",f?_=>f[_]:y!==void 0?y:d?_=>d[_]*2:g*2).attr("transform",h?_=>`rotate(${h[_]})`:m?`rotate(${m})`:null).attr("transform-origin",h||m?Pv`${l?_=>l[_]:b}px ${c?_=>c[_]:w}px`:null).call(pt,"href",p?_=>p[_]:this.src).call(pt,"preserveAspectRatio",this.preserveAspectRatio).call(pt,"crossorigin",this.crossOrigin).call(pt,"image-rendering",this.imageRendering).call(pt,"clip-path",d?_=>`circle(${d[_]}px)`:g!==void 0?`circle(${g}px)`:null).call(pn,this,r)).node()}}function xN(e,t,n,r,i,s){return t&&e?o=>e[o]-t[o]/2:t?o=>r-t[o]/2:e&&i!==void 0?o=>e[o]-i/2:i!==void 0?r-i/2:n&&e?o=>e[o]-n[o]:n?o=>r-n[o]:e?o=>e[o]-s:r-s}function Tct(e,{x:t,y:n,...r}={}){return r.frameAnchor===void 0&&([t,n]=Zi(t,n)),new J7(e,{...r,x:t,y:n})}function Ect(e,t,n){var r=1e-8,i=t-1,s=n-1,o=0,a,l,c,u,f,d,h,p,g,v,y;if(e<=0)return 0;if(e>=1)return 1;for(t>=1&&n>=1?(c=e<.5?e:1-e,u=Math.sqrt(-2*Math.log(c)),h=(2.30753+u*.27061)/(1+u*(.99229+u*.04481))-u,e<.5&&(h=-h),p=(h*h-3)/6,g=2/(1/(2*t-1)+1/(2*n-1)),v=h*Math.sqrt(p+g)/g-(1/(2*n-1)-1/(2*t-1))*(p+5/6-2/(3*g)),h=t/(t+n*Math.exp(2*v))):(a=Math.log(t/(t+n)),l=Math.log(n/(t+n)),u=Math.exp(t*a)/t,f=Math.exp(n*l)/n,v=u+f,e<u/v?h=Math.pow(t*v*e,1/t):h=1-Math.pow(n*v*(1-e),1/n)),y=-rf(t)-rf(n)+rf(t+n);o<10;o++){if(h===0||h===1)return h;if(d=Act(h,t,n)-e,u=Math.exp(i*Math.log(h)+s*Math.log(1-h)+y),f=d/u,h-=u=f/(1-.5*Math.min(1,f*(i/h-s/(1-h)))),h<=0&&(h=.5*(h+u)),h>=1&&(h=.5*(h+u+1)),Math.abs(u)<r*h&&o>0)break}return h}function Act(e,t,n){var r=e===0||e===1?0:Math.exp(rf(t+n)-rf(t)-rf(n)+t*Math.log(e)+n*Math.log(1-e));return e<0||e>1?!1:e<(t+1)/(t+n+2)?r*IN(e,t,n)/t:1-r*IN(1-e,n,t)/n}function IN(e,t,n){var r=1e-30,i=1,s=t+n,o=t+1,a=t-1,l=1,c=1-s*e/o,u,f,d,h;for(Math.abs(c)<r&&(c=r),c=1/c,h=c;i<=100&&(u=2*i,f=i*(n-i)*e/((a+u)*(t+u)),c=1+f*c,Math.abs(c)<r&&(c=r),l=1+f/l,Math.abs(l)<r&&(l=r),c=1/c,h*=c*l,f=-(t+i)*(s+i)*e/((t+u)*(o+u)),c=1+f*c,Math.abs(c)<r&&(c=r),l=1+f/l,Math.abs(l)<r&&(l=r),c=1/c,d=c*l,h*=d,!(Math.abs(d-1)<3e-7));i++);return h}function rf(e){var t=0,n=[76.18009172947146,-86.5053203294167,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18],r=1.000000000190015,i,s,o;for(o=(s=i=e)+5.5,o-=(i+.5)*Math.log(o);t<6;t++)r+=n[t]/++s;return Math.log(2.506628274631*r/i)-o}function Mct(e,t){var n=Ect(2*Math.min(e,1-e),.5*t,.5);return n=Math.sqrt(t*(1-n)/n),e>.5?n:-n}const $ct={ariaLabel:"linear-regression",fill:"currentColor",fillOpacity:.1,stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class tU extends Se{constructor(t,n={}){const{x:r,y:i,z:s,ci:o=.95,precision:a=4}=n;if(super(t,{x:{value:r,scale:"x"},y:{value:i,scale:"y"},z:{value:fl(n),optional:!0}},n,$ct),this.z=s,this.ci=+o,this.precision=+a,!(0<=this.ci&&this.ci<1))throw new Error(`invalid ci; not in [0, 1): ${o}`);if(!(this.precision>0))throw new Error(`invalid precision: ${a}`)}render(t,n,r,i,s){const{x:o,y:a,z:l}=r,{ci:c}=this;return re("svg:g",s).call(Oe,this,i,s).call(_e,this,n).call(u=>u.selectAll().data(l?mT(t,l,this.z):[t]).enter().call(f=>f.append("path").attr("fill","none").call($e,this).call(F1,this,{...r,fill:null,fillOpacity:null}).attr("d",d=>this._renderLine(d,o,a)).call(c&&!Bf(this.fill)?d=>d.select(Nct).attr("stroke","none").call($e,this).call(F1,this,{...r,stroke:null,strokeOpacity:null,strokeWidth:null}).attr("d",h=>this._renderBand(h,o,a)):()=>{}))).node()}}function Nct(){return this.parentNode.insertBefore(this.ownerDocument.createElementNS(mc.svg,"path"),this)}class kct extends tU{constructor(t,n){super(t,n)}_renderBand(t,n,r){const{ci:i,precision:s}=this,[o,a]=bn(t,u=>r[u]),l=j1(t,r,n),c=eU(t,r,n,(1-i)/2,l);return P3().y(u=>u).x0(u=>c(u,-1)).x1(u=>c(u,1))(Lr(o,a-s/2,s).concat(a))}_renderLine(t,n,r){const[i,s]=bn(t,a=>r[a]),o=j1(t,r,n);return`M${o(i)},${i}L${o(s)},${s}`}}class Dct extends tU{constructor(t,n){super(t,n)}_renderBand(t,n,r){const{ci:i,precision:s}=this,[o,a]=bn(t,u=>n[u]),l=j1(t,n,r),c=eU(t,n,r,(1-i)/2,l);return P3().x(u=>u).y0(u=>c(u,-1)).y1(u=>c(u,1))(Lr(o,a-s/2,s).concat(a))}_renderLine(t,n,r){const[i,s]=bn(t,a=>n[a]),o=j1(t,n,r);return`M${i},${o(i)}L${s},${o(s)}`}}function Oct(e,{y:t=Nr,x:n=_t,stroke:r,fill:i=Xe(r)?"currentColor":r,...s}={}){return new kct(e,UT({...s,x:n,y:t,fill:i,stroke:r}))}function Fct(e,{x:t=Nr,y:n=_t,stroke:r,fill:i=Xe(r)?"currentColor":r,...s}={}){return new Dct(e,CT({...s,x:t,y:n,fill:i,stroke:r}))}function j1(e,t,n){let r=0,i=0,s=0,o=0;for(const u of e){const f=t[u],d=n[u];r+=f,i+=d,s+=f*d,o+=f*f}const a=e.length,l=(a*s-r*i)/(a*o-r*r),c=(i-l*r)/a;return u=>l*u+c}function eU(e,t,n,r,i){const s=Ls(e,u=>t[u])/e.length;let o=0,a=0;for(const u of e)o+=(t[u]-s)**2,a+=(n[u]-i(t[u]))**2;const l=Math.sqrt(a/(e.length-2)),c=Mct(r,e.length-2);return(u,f)=>{const d=i(u),h=l*Math.sqrt(1/e.length+(u-s)**2/o);return d+f*c*h}}function hx({path:e=_t,delimiter:t,frameAnchor:n,treeLayout:r=w1,treeSort:i,treeSeparation:s,treeAnchor:o,treeFilter:a,...l}={}){o=iE(o),i=rU(i),a!=null&&(a=yx(a)),n===void 0&&(n=o.frameAnchor);const c=iU(t),u=fU(l,yx),[f,d]=Cr(),[h,p]=Cr();return{x:f,y:h,frameAnchor:n,...js(l,(g,v)=>{const y=c(Pt(g,e)),m=d([]),b=p([]);let w=-1;const S=[],_=[],x=zB().path(k=>y[k]),E=r();E.nodeSize&&E.nodeSize([1,1]),E.separation&&s!==void 0&&E.separation(s??G3);for(const k of u)k[V1]=k[cU]([]);for(const k of v){const I=[],A=x(k.filter(D=>y[D]!=null)).each(D=>D.data=g[D.data]);i!=null&&A.sort(i),E(A);for(const D of A.descendants())if(!(a!=null&&!a(D))){I.push(++w),S[w]=D.data,o.position(D,w,m,b);for(const L of u)L[V1][w]=L[uU](D)}_.push(I)}return{data:S,facets:_}}),...Object.fromEntries(u)}}function nU({path:e=_t,delimiter:t,curve:n="bump-x",stroke:r="#555",strokeWidth:i=1.5,strokeOpacity:s=.5,treeLayout:o=w1,treeSort:a,treeSeparation:l,treeAnchor:c,treeFilter:u,...f}={}){c=iE(c),a=rU(a),u!=null&&(u=EN(u)),f={curve:n,stroke:r,strokeWidth:i,strokeOpacity:s,...f};const d=iU(t),h=fU(f,EN),[p,g]=Cr(),[v,y]=Cr(),[m,b]=Cr(),[w,S]=Cr();return{x1:p,x2:v,y1:m,y2:w,...js(f,(_,x)=>{const E=d(Pt(_,e)),k=g([]),I=y([]),A=b([]),D=S([]);let L=-1;const T=[],M=[],N=zB().path(O=>E[O]),B=o();B.nodeSize&&B.nodeSize([1,1]),B.separation&&l!==void 0&&B.separation(l??G3);for(const O of h)O[V1]=O[cU]([]);for(const O of x){const C=[],F=N(O.filter(P=>E[P]!=null)).each(P=>P.data=_[P.data]);a!=null&&F.sort(a),B(F);for(const{source:P,target:z}of F.links())if(!(u!=null&&!u(z,P))){C.push(++L),T[L]=z.data,c.position(P,L,k,A),c.position(z,L,I,D);for(const H of h)H[V1][L]=H[uU](z,P)}M.push(C)}return{data:T,facets:M}}),...Object.fromEntries(h)}}function iE(e="left"){switch(`${e}`.trim().toLowerCase()){case"left":return Bct;case"right":return Lct}throw new Error(`invalid tree anchor: ${e}`)}const Bct={frameAnchor:"left",dx:6,position({x:e,y:t},n,r,i){r[n]=t,i[n]=-e}},Lct={frameAnchor:"right",dx:-6,position({x:e,y:t},n,r,i){r[n]=-t,i[n]=-e}};function rU(e){return e==null||typeof e=="function"?e:`${e}`.trim().toLowerCase().startsWith("node:")?TN(yx(e)):TN(Rct(e))}function TN(e){return(t,n)=>_i(e(t),e(n))}function Rct(e){return t=>{var n;return(n=t.data)==null?void 0:n[e]}}function iU(e="/"){if(e=`${e}`,e==="/")return n=>n;if(e.length!==1)throw new Error("delimiter must be exactly one character");const t=e.charCodeAt(0);return n=>n.map(r=>Cct(r,t))}const px=92,sU=47;function Cct(e,t){if(t===px)throw new Error("delimiter cannot be backslash");let n=!1;for(let r=0,i=e.length;r<i;++r){switch(e.charCodeAt(r)){case px:if(!n){n=!0;continue}break;case t:n?(e=e.slice(0,r-1)+e.slice(r),--r,--i):e=e.slice(0,r)+"/"+e.slice(r+1);break;case sU:n?(e=e.slice(0,r)+"\\\\"+e.slice(r),r+=2,i+=2):(e=e.slice(0,r)+"\\"+e.slice(r),++r,++i);break}n=!1}return e}function Uct(e){let t=!1;for(let n=0,r=e.length;n<r;++n){switch(e.charCodeAt(n)){case px:if(!t){t=!0;continue}case sU:t&&(e=e.slice(0,n-1)+e.slice(n),--n,--r);break}t=!1}return e}function oU(e){return Ii(e)&&typeof e.node=="function"}function Pct(e){return Ii(e)&&typeof e.link=="function"}function yx(e){if(oU(e))return e.node;if(e=`${e}`.trim().toLowerCase(),!!e.startsWith("node:")){switch(e){case"node:name":return gx;case"node:path":return mx;case"node:internal":return aU;case"node:external":return lU;case"node:depth":return bx;case"node:height":return vx}throw new Error(`invalid node value: ${e}`)}}function EN(e){if(oU(e))return e.node;if(Pct(e))return e.link;if(e=`${e}`.trim().toLowerCase(),!(!e.startsWith("node:")&&!e.startsWith("parent:"))){switch(e){case"parent:name":return j0(gx);case"parent:path":return j0(mx);case"parent:depth":return j0(bx);case"parent:height":return j0(vx);case"node:name":return gx;case"node:path":return mx;case"node:internal":return aU;case"node:external":return lU;case"node:depth":return bx;case"node:height":return vx}throw new Error(`invalid link value: ${e}`)}}function mx(e){return e.id}function gx(e){return zct(e.id)}function bx(e){return e.depth}function vx(e){return e.height}function aU(e){return!!e.children}function lU(e){return!e.children}function j0(e){return(t,n)=>n==null?void 0:e(n)}function zct(e){let t=e.length;for(;--t>0&&!jct(e,t););return Uct(e.slice(t+1))}function jct(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}const cU=2,uU=3,V1=4;function fU(e,t){const n=[];for(const r in e){const i=e[r],s=t(i);s!==void 0&&n.push([r,...Cr(i),s])}return n}function dU(e,{fill:t,stroke:n,strokeWidth:r,strokeOpacity:i,strokeLinejoin:s,strokeLinecap:o,strokeMiterlimit:a,strokeDasharray:l,strokeDashoffset:c,marker:u,markerStart:f=u,markerEnd:d=u,dot:h=Xe(f)&&Xe(d),text:p="node:name",textStroke:g="white",title:v="node:path",dx:y,dy:m,textAnchor:b,treeLayout:w=w1,textLayout:S=w===w1||w===CB?"mirrored":"normal",tip:_,...x}={}){if(y===void 0&&(y=iE(x.treeAnchor).dx),b!==void 0)throw new Error("textAnchor is not a configurable tree option");S=Xr(S,"textLayout",["mirrored","normal"]);function E(k){return Rf(e,hx({treeLayout:w,text:p,fill:t===void 0?"currentColor":t,stroke:g,dx:y,dy:m,title:v,...k,...x}))}return Xi(S7(e,nU({treeLayout:w,markerStart:f,markerEnd:d,stroke:n!==void 0?n:t===void 0?"node:internal":t,strokeWidth:r,strokeOpacity:i,strokeLinejoin:s,strokeLinecap:o,strokeMiterlimit:a,strokeDasharray:l,strokeDashoffset:c,...x})),h?pl(e,hx({treeLayout:w,fill:t===void 0?"node:internal":t,title:v,tip:_,...x})):null,p!=null?S==="mirrored"?[E({textAnchor:"start",treeFilter:"node:external"}),E({textAnchor:"end",treeFilter:"node:internal",dx:-y})]:E():null)}function Vct(e,t){return dU(e,{...t,treeLayout:CB})}function Yct({geometry:e=_t,...t}={}){return Er({...t,x:null,y:null},(n,r,i,s,o,{projection:a})=>{const l=Pt(n,e),c=l.length,u=new Float64Array(c),f=new Float64Array(c),d=cl(a);for(let h=0;h<c;++h)[u[h],f[h]]=d.centroid(l[h]);return{data:n,facets:r,channels:{x:{value:u,scale:a==null?"x":null,source:null},y:{value:f,scale:a==null?"y":null,source:null}}}})}function qct({geometry:e=_t,...t}={}){let n;return{...t,x:{transform:r=>Float64Array.from(n=Pt(Pt(r,e),WJ),([i])=>i)},y:{transform:()=>Float64Array.from(n,([,r])=>r)}}}function Wct(e,t,n,r,i){for(var s=i+1;r<=i;){var o=r+i>>>1,a=e[o],l=n!==void 0?n(a,t):a-t;l>=0?(s=o,i=o-1):r=o+1}return s}function Hct(e,t,n,r,i){for(var s=i+1;r<=i;){var o=r+i>>>1,a=e[o],l=n!==void 0?n(a,t):a-t;l>0?(s=o,i=o-1):r=o+1}return s}function Gct(e,t,n,r,i){for(var s=r-1;r<=i;){var o=r+i>>>1,a=e[o],l=n!==void 0?n(a,t):a-t;l<0?(s=o,r=o+1):i=o-1}return s}function Xct(e,t,n,r,i){for(var s=r-1;r<=i;){var o=r+i>>>1,a=e[o],l=n!==void 0?n(a,t):a-t;l<=0?(s=o,r=o+1):i=o-1}return s}function Qct(e,t,n,r,i){for(;r<=i;){var s=r+i>>>1,o=e[s],a=n!==void 0?n(o,t):o-t;if(a===0)return s;a<=0?r=s+1:i=s-1}return-1}function Pd(e,t,n,r,i,s){return typeof n=="function"?s(e,t,n,r===void 0?0:r|0,i===void 0?e.length-1:i|0):s(e,t,void 0,n===void 0?0:n|0,r===void 0?e.length-1:r|0)}var Kct={ge:function(e,t,n,r,i){return Pd(e,t,n,r,i,Wct)},gt:function(e,t,n,r,i){return Pd(e,t,n,r,i,Hct)},lt:function(e,t,n,r,i){return Pd(e,t,n,r,i,Gct)},le:function(e,t,n,r,i){return Pd(e,t,n,r,i,Xct)},eq:function(e,t,n,r,i){return Pd(e,t,n,r,i,Qct)}},Y1=Kct,Ru=0,Bl=1,Im=2,Zct=tut;function sE(e,t,n,r,i){this.mid=e,this.left=t,this.right=n,this.leftPoints=r,this.rightPoints=i,this.count=(t?t.count:0)+(n?n.count:0)+r.length}var Ry=sE.prototype;function C_(e,t){e.mid=t.mid,e.left=t.left,e.right=t.right,e.leftPoints=t.leftPoints,e.rightPoints=t.rightPoints,e.count=t.count}function hU(e,t){var n=zf(t);e.mid=n.mid,e.left=n.left,e.right=n.right,e.leftPoints=n.leftPoints,e.rightPoints=n.rightPoints,e.count=n.count}function AN(e,t){var n=e.intervals([]);n.push(t),hU(e,n)}function MN(e,t){var n=e.intervals([]),r=n.indexOf(t);return r<0?Ru:(n.splice(r,1),hU(e,n),Bl)}Ry.intervals=function(e){return e.push.apply(e,this.leftPoints),this.left&&this.left.intervals(e),this.right&&this.right.intervals(e),e};Ry.insert=function(e){var t=this.count-this.leftPoints.length;if(this.count+=1,e[1]<this.mid)this.left?4*(this.left.count+1)>3*(t+1)?AN(this,e):this.left.insert(e):this.left=zf([e]);else if(e[0]>this.mid)this.right?4*(this.right.count+1)>3*(t+1)?AN(this,e):this.right.insert(e):this.right=zf([e]);else{var n=Y1.ge(this.leftPoints,e,oE),r=Y1.ge(this.rightPoints,e,aE);this.leftPoints.splice(n,0,e),this.rightPoints.splice(r,0,e)}};Ry.remove=function(e){var t=this.count-this.leftPoints;if(e[1]<this.mid){if(!this.left)return Ru;var n=this.right?this.right.count:0;if(4*n>3*(t-1))return MN(this,e);var r=this.left.remove(e);return r===Im?(this.left=null,this.count-=1,Bl):(r===Bl&&(this.count-=1),r)}else if(e[0]>this.mid){if(!this.right)return Ru;var i=this.left?this.left.count:0;if(4*i>3*(t-1))return MN(this,e);var r=this.right.remove(e);return r===Im?(this.right=null,this.count-=1,Bl):(r===Bl&&(this.count-=1),r)}else{if(this.count===1)return this.leftPoints[0]===e?Im:Ru;if(this.leftPoints.length===1&&this.leftPoints[0]===e){if(this.left&&this.right){for(var s=this,o=this.left;o.right;)s=o,o=o.right;if(s===this)o.right=this.right;else{var a=this.left,r=this.right;s.count-=o.count,s.right=o.left,o.left=a,o.right=r}C_(this,o),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?C_(this,this.left):C_(this,this.right);return Bl}for(var a=Y1.ge(this.leftPoints,e,oE);a<this.leftPoints.length&&this.leftPoints[a][0]===e[0];++a)if(this.leftPoints[a]===e){this.count-=1,this.leftPoints.splice(a,1);for(var r=Y1.ge(this.rightPoints,e,aE);r<this.rightPoints.length&&this.rightPoints[r][1]===e[1];++r)if(this.rightPoints[r]===e)return this.rightPoints.splice(r,1),Bl}return Ru}};function pU(e,t,n){for(var r=0;r<e.length&&e[r][0]<=t;++r){var i=n(e[r]);if(i)return i}}function yU(e,t,n){for(var r=e.length-1;r>=0&&e[r][1]>=t;--r){var i=n(e[r]);if(i)return i}}function mU(e,t){for(var n=0;n<e.length;++n){var r=t(e[n]);if(r)return r}}Ry.queryPoint=function(e,t){if(e<this.mid){if(this.left){var n=this.left.queryPoint(e,t);if(n)return n}return pU(this.leftPoints,e,t)}else if(e>this.mid){if(this.right){var n=this.right.queryPoint(e,t);if(n)return n}return yU(this.rightPoints,e,t)}else return mU(this.leftPoints,t)};Ry.queryInterval=function(e,t,n){if(e<this.mid&&this.left){var r=this.left.queryInterval(e,t,n);if(r)return r}if(t>this.mid&&this.right){var r=this.right.queryInterval(e,t,n);if(r)return r}return t<this.mid?pU(this.leftPoints,t,n):e>this.mid?yU(this.rightPoints,e,n):mU(this.leftPoints,n)};function Jct(e,t){return e-t}function oE(e,t){var n=e[0]-t[0];return n||e[1]-t[1]}function aE(e,t){var n=e[1]-t[1];return n||e[0]-t[0]}function zf(e){if(e.length===0)return null;for(var t=[],n=0;n<e.length;++n)t.push(e[n][0],e[n][1]);t.sort(Jct);for(var r=t[t.length>>1],i=[],s=[],o=[],n=0;n<e.length;++n){var a=e[n];a[1]<r?i.push(a):r<a[0]?s.push(a):o.push(a)}var l=o,c=o.slice();return l.sort(oE),c.sort(aE),new sE(r,zf(i),zf(s),l,c)}function wx(e){this.root=e}var dd=wx.prototype;dd.insert=function(e){this.root?this.root.insert(e):this.root=new sE(e[0],null,null,[e],[e])};dd.remove=function(e){if(this.root){var t=this.root.remove(e);return t===Im&&(this.root=null),t!==Ru}return!1};dd.queryPoint=function(e,t){if(this.root)return this.root.queryPoint(e,t)};dd.queryInterval=function(e,t,n){if(e<=t&&this.root)return this.root.queryInterval(e,t,n)};Object.defineProperty(dd,"count",{get:function(){return this.root?this.root.count:0}});Object.defineProperty(dd,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}});function tut(e){return!e||e.length===0?new wx(null):new wx(zf(e))}const eut=E4(Zct),nut=({marginLeft:e})=>[1,e],rut=({width:e,marginRight:t})=>[-1,e-t],iut=({width:e,marginLeft:t,marginRight:n})=>[0,(t+e-n)/2],sut=({marginTop:e})=>[1,e],out=({height:e,marginBottom:t})=>[-1,e-t],aut=({height:e,marginTop:t,marginBottom:n})=>[0,(t+e-n)/2];function gU(e){return typeof e=="string"?{anchor:e}:e}function lut(e={},t={}){arguments.length===1&&([e,t]=bU(e));let{anchor:n="left",padding:r=1,r:i=t.r}=gU(e);switch(`${n}`.toLowerCase()){case"left":n=nut;break;case"right":n=rut;break;case"middle":n=iut;break;default:throw new Error(`unknown dodge anchor: ${n}`)}return vU("x","y",n,Yt(r),i,t)}function cut(e={},t={}){arguments.length===1&&([e,t]=bU(e));let{anchor:n="bottom",padding:r=1,r:i=t.r}=gU(e);switch(`${n}`.toLowerCase()){case"top":n=sut;break;case"bottom":n=out;break;case"middle":n=aut;break;default:throw new Error(`unknown dodge anchor: ${n}`)}return vU("y","x",n,Yt(r),i,t)}function bU(e){const{anchor:t,padding:n,...r}=e,{r:i}=r;return[{anchor:t,padding:n,r:i},r]}function vU(e,t,n,r,i,s){if(i!=null&&typeof i!="number"){let{channels:o,sort:a,reverse:l}=s;o=J3(o),(o==null?void 0:o.r)===void 0&&(s={...s,channels:{...o,r:{value:i,scale:"r"}}}),a===void 0&&l===void 0&&(s.sort={channel:"-r"})}return Er(s,function(o,a,l,c,u,f){let{[t]:d,r:h}=l;if(!l[t])throw new Error(`missing channel: ${t}`);({[t]:d}=Bv(l,c,f));const p=h?void 0:i!==void 0?Yt(i):this.r!==void 0?this.r:3;h&&(h=Pt(h.value,c[h.scale]||_t,Float64Array));let[g,v]=n(u);const y=g?fut:uut,m=new Float64Array(d.length),b=h?w=>h[w]:()=>p;for(let w of a){const S=eut();w=w.filter(h?x=>N1(d[x])&&To(h[x]):x=>N1(d[x]));const _=new Float64Array(2*w.length+2);for(const x of w){const E=b(x),k=g?E+r:0,I=d[x]-E,A=d[x]+E;let D=2;S.queryInterval(I-r,A+r,([,,T])=>{const M=m[T]-k,N=d[x]-d[T],B=r+(h?h[x]+h[T]:2*p),O=Math.sqrt(B*B-N*N);_[D++]=M-O,_[D++]=M+O});let L=_.slice(0,D);g&&(L=L.filter(T=>T>=0));t:for(const T of L.sort(y)){for(let M=0;M<D;M+=2)if(_[M]+1e-6<T&&T<_[M+1]-1e-6)continue t;m[x]=T+k;break}S.insert([I,A,x])}}g||(g=1);for(const w of a)for(const S of w)m[S]=m[S]*g+v;return{data:o,facets:a,channels:{[e]:{value:m,source:null},[t]:{value:d,source:l[t]},...h&&{r:{value:h,source:l.r}}}}})}function uut(e,t){return Math.abs(e)-Math.abs(t)}function fut(e,t){return e-t}function dut(e,t){return arguments.length===1&&({basis:e,...t}=e),KT(lE(e),t)}function hut(e,t){return arguments.length===1&&({basis:e,...t}=e),ZT(lE(e),t)}function lE(e){if(e===void 0)return $N;if(typeof e=="function")return Kv(K3(e));if(/^p\d{2}$/i.test(e))return hd(X3(e));switch(`${e}`.toLowerCase()){case"deviation":return mut;case"first":return $N;case"last":return yut;case"max":return gut;case"mean":return but;case"median":return vut;case"min":return wut;case"sum":return _ut;case"extent":return put}throw new Error(`invalid basis: ${e}`)}function Kv(e){return{mapIndex(t,n,r){const i=+e(t,n);for(const s of t)r[s]=n[s]===null?NaN:n[s]/i}}}function hd(e){return Kv((t,n)=>e(t,r=>n[r]))}const put={mapIndex(e,t,n){const[r,i]=bn(e,o=>t[o]),s=i-r;for(const o of e)n[o]=t[o]===null?NaN:(t[o]-r)/s}},$N=Kv((e,t)=>{for(let n=0;n<e.length;++n){const r=t[e[n]];if(ir(r))return r}}),yut=Kv((e,t)=>{for(let n=e.length-1;n>=0;--n){const r=t[e[n]];if(ir(r))return r}}),mut={mapIndex(e,t,n){const r=ev(e,s=>t[s]),i=ly(e,s=>t[s]);for(const s of e)n[s]=t[s]===null?NaN:i?(t[s]-r)/i:0}},gut=hd(De),but=hd(ev),vut=hd(hp),wut=hd(xn),_ut=hd(Ls);function Sut(e,t={}){if(typeof e=="string")switch(e.toLowerCase()){case"first":return wU(t);case"last":return _U(t)}if(typeof e=="function")return Ga(null,e,t);let n,r;for(n in e){if(r!==void 0)throw new Error("ambiguous selector; multiple inputs");r=xut(e[n])}if(r===void 0)throw new Error(`invalid selector: ${e}`);return Ga(n,r,t)}function xut(e){if(typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"min":return cE;case"max":return uE}throw new Error(`unknown selector: ${e}`)}function wU(e){return Ga(null,Mut,e)}function _U(e){return Ga(null,$ut,e)}function Iut(e){return Ga("x",cE,e)}function Tut(e){return Ga("y",cE,e)}function Eut(e){return Ga("x",uE,e)}function Aut(e){return Ga("y",uE,e)}function*Mut(e){yield e[0]}function*$ut(e){yield e[e.length-1]}function*cE(e,t){yield XG(e,n=>t[n])}function*uE(e,t){yield y3(e,n=>t[n])}function Ga(e,t,n){if(e!=null){if(n[e]==null)throw new Error(`missing channel: ${e}`);e=n[e]}const r=fl(n);return js(n,(i,s)=>{const o=Pt(i,r),a=Pt(i,e),l=[];for(const c of s){const u=[];for(const f of o?Vo(c,d=>o[d]).values():[c])for(const d of t(f,a))u.push(d);l.push(u)}return{data:i,facets:l}})}const NN=Object.freeze(Object.defineProperty({__proto__:null,Area:qv,Arrow:x7,BarX:T7,BarY:E7,Cell:Wv,Contour:H7,Density:Q7,Dot:Hv,Frame:i7,Geo:K7,Hexgrid:Z7,Image:J7,Line:Gv,Link:_7,Mark:Se,Raster:P7,Rect:Xv,RuleX:m5,RuleY:g5,Text:zv,TickX:D7,TickY:O7,Tip:s7,Vector:jv,area:Pat,areaX:$p,areaY:Pf,arrow:Wat,auto:ilt,autoSpec:A7,axisFx:P5,axisFy:U5,axisX:kT,axisY:NT,barX:Hl,barY:Gl,bin:Rl,binX:ya,binY:ma,bollinger:ic,bollingerX:xlt,bollingerY:Ilt,boxX:Elt,boxY:Alt,cell:Lu,cellX:Gat,cellY:Xat,centroid:Yct,circle:Jat,cluster:Vct,column:Cr,contour:zlt,crosshair:Vlt,crosshairX:Ylt,crosshairY:qlt,delaunayLink:ict,delaunayMesh:sct,density:uct,dodgeX:lut,dodgeY:cut,dot:pl,dotX:Kat,dotY:Zat,filter:dit,formatIsoDate:$C,formatMonth:Dit,formatWeekday:Oit,frame:FT,geo:rE,geoCentroid:qct,graticule:mct,gridFx:W5,gridFy:Y5,gridX:q5,gridY:V5,group:aT,groupX:Tp,groupY:Ep,groupZ:oT,hexagon:tlt,hexbin:gct,hexgrid:wct,hull:oct,identity:_t,image:Tct,indexOf:Nr,initializer:Er,interpolateNearest:q7,interpolateNone:dx,interpolatorBarycentric:Y7,interpolatorRandomWalk:W7,legend:Oot,line:XT,lineX:Np,lineY:kp,linearRegressionX:Oct,linearRegressionY:Fct,link:S7,map:Uo,mapX:KT,mapY:ZT,marks:Xi,normalize:lE,normalizeX:dut,normalizeY:hut,plot:BT,pointer:TT,pointerX:ET,pointerY:AT,raster:$lt,rect:QT,rectX:P1,rectY:z1,reverse:hit,ruleX:Wa,ruleY:Ha,scale:Ic,select:Sut,selectFirst:wU,selectLast:_U,selectMaxX:Eut,selectMaxY:Aut,selectMinX:Iut,selectMinY:Tut,shuffle:pit,sort:SC,sphere:yct,spike:wot,stackX:y7,stackX1:Iat,stackX2:Tat,stackY:m7,stackY1:Eat,stackY2:Aat,text:Rf,textX:_5,textY:S5,tickX:F7,tickY:B7,tip:o7,transform:js,tree:dU,treeLink:nU,treeNode:hx,valueof:Pt,vector:D5,vectorX:O5,vectorY:F5,voronoi:act,voronoiMesh:lct,window:Qv,windowX:flt,windowY:dlt},Symbol.toStringTag,{value:"Module"})),Nut=new Map([["style","style"],["width","width"],["height","height"],["margin","margin"],["marginLeft","marginLeft"],["marginRight","marginRight"],["marginTop","marginTop"],["marginBottom","marginBottom"],["align","align"],["aspectRatio","aspectRatio"],["axis","axis"],["inset","inset"],["grid","grid"],["label","label"],["padding","padding"],["round","round"],["xScale","x.type"],["xDomain","x.domain"],["xRange","x.range"],["xNice","x.nice"],["xInset","x.inset"],["xInsetLeft","x.insetLeft"],["xInsetRight","x.insetRight"],["xClamp","x.clamp"],["xRound","x.round"],["xAlign","x.align"],["xPadding","x.padding"],["xPaddingInner","x.paddingInner"],["xPaddingOuter","x.paddingOuter"],["xAxis","x.axis"],["xTicks","x.ticks"],["xTickSize","x.tickSize"],["xTickSpacing","x.tickSpacing"],["xTickPadding","x.tickPadding"],["xTickFormat","x.tickFormat"],["xTickRotate","x.tickRotate"],["xGrid","x.grid"],["xLine","x.line"],["xLabel","x.label"],["xLabelAnchor","x.labelAnchor"],["xLabelOffset","x.labelOffset"],["xFontVariant","x.fontVariant"],["xAriaLabel","x.ariaLabel"],["xAriaDescription","x.ariaDescription"],["xReverse","x.reverse"],["xZero","x.zero"],["yScale","y.type"],["yDomain","y.domain"],["yRange","y.range"],["yNice","y.nice"],["yInset","y.inset"],["yInsetTop","y.insetTop"],["yInsetBottom","y.insetBottom"],["yClamp","y.clamp"],["yRound","y.round"],["yAlign","y.align"],["yPadding","y.padding"],["yPaddingInner","y.paddingInner"],["yPaddingOuter","y.paddingOuter"],["yAxis","y.axis"],["yTicks","y.ticks"],["yTickSize","y.tickSize"],["yTickSpacing","y.tickSpacing"],["yTickPadding","y.tickPadding"],["yTickFormat","y.tickFormat"],["yTickRotate","y.tickRotate"],["yGrid","y.grid"],["yLine","y.line"],["yLabel","y.label"],["yLabelAnchor","y.labelAnchor"],["yLabelOffset","y.labelOffset"],["yFontVariant","y.fontVariant"],["yAriaLabel","y.ariaLabel"],["yAriaDescription","y.ariaDescription"],["yReverse","y.reverse"],["yZero","y.zero"],["facetMargin","facet.margin"],["facetMarginTop","facet.marginTop"],["facetMarginBottom","facet.marginBottom"],["facetMarginLeft","facet.marginLeft"],["facetMarginRight","facet.marginRight"],["facetGrid","facet.grid"],["facetLabel","facet.label"],["fxDomain","fx.domain"],["fxRange","fx.range"],["fxNice","fx.nice"],["fxInset","fx.inset"],["fxInsetLeft","fx.insetLeft"],["fxInsetRight","fx.insetRight"],["fxRound","fx.round"],["fxAlign","fx.align"],["fxPadding","fx.padding"],["fxPaddingInner","fx.paddingInner"],["fxPaddingOuter","fx.paddingOuter"],["fxAxis","fx.axis"],["fxTicks","fx.ticks"],["fxTickSize","fx.tickSize"],["fxTickSpacing","fx.tickSpacing"],["fxTickPadding","fx.tickPadding"],["fxTickFormat","fx.tickFormat"],["fxTickRotate","fx.tickRotate"],["fxGrid","fx.grid"],["fxLine","fx.line"],["fxLabel","fx.label"],["fxLabelAnchor","fx.labelAnchor"],["fxLabelOffset","fx.labelOffset"],["fxFontVariant","fx.fontVariant"],["fxAriaLabel","fx.ariaLabel"],["fxAriaDescription","fx.ariaDescription"],["fxReverse","fx.reverse"],["fyDomain","fy.domain"],["fyRange","fy.range"],["fyNice","fy.mice"],["fyInset","fy,inset"],["fyInsetTop","fy.insetTop"],["fyInsetBottom","fy.insetBottom"],["fyRound","fy.round"],["fyAlign","fy.align"],["fyPadding","fy.padding"],["fyPaddingInner","fy.paddingInner"],["fyPaddingOuter","fy.paddingOuter"],["fyAxis","fy.axis"],["fyTicks","fy.ticks"],["fyTickSize","fy.tickSize"],["fyTickSpacing","fy.tickSpacing"],["fyTickPadding","fy.tickPadding"],["fyTickFormat","fy.tickFormat"],["fyTickRotate","fy.tickRotate"],["fyGrid","fy.grid"],["fyLine","fy.line"],["fyLabel","fy.label"],["fyLabelAnchor","fy.labelAnchor"],["fyLabelOffset","fy.labelOffset"],["fyFontVariant","fy.fontVariant"],["fyAriaLabel","fy.ariaLabel"],["fyAriaDescription","fy.ariaDescription"],["fyReverse","fy.reverse"],["colorScale","color.type"],["colorDomain","color.domain"],["colorRange","color.range"],["colorClamp","color.clamp"],["colorNice","color.nice"],["colorScheme","color.scheme"],["colorInterpolate","color.interpolate"],["colorPivot","color.pivot"],["colorSymmetric","color.symmetric"],["colorLabel","color.label"],["colorReverse","color.reverse"],["colorZero","color.zero"],["colorTickFormat","color.tickFormat"],["opacityScale","opacity.type"],["opacityDomain","opacity.domain"],["opacityRange","opacity.range"],["opacityClamp","opacity.clamp"],["opacityNice","opacity.nice"],["opacityLabel","opacity.label"],["opacityReverse","opacity.reverse"],["opacityZero","opacity.zero"],["opacityTickFormat","opacity.tickFormat"],["rScale","r.type"],["rDomain","r.domain"],["rRange","r.range"],["rClamp","r.clamp"],["rNice","r.nice"],["rZero","r.zero"],["lengthScale","length.type"],["lengthDomain","length.domain"],["lengthRange","length.range"],["lengthClamp","length.clamp"],["lengthNice","length.nice"],["lengthZero","length.zero"],["projectionType","projection.type"],["projectionParallels","projection.parallels"],["projectionPrecision","projection.precision"],["projectionRotate","projection.rotate"],["projectionDomain","projection.domain"],["projectionInset","projection.inset"],["projectionInsetLeft","projection.insetLeft"],["projectionInsetRight","projection.insetRight"],["projectionInsetTop","projection.insetTop"],["projectionInsetBottom","projection.insetBottom"],["projectionClip","projection.clip"]]),kut=new Set(["frame","hexgrid","sphere","graticule"]);function Dut(e,t,n){for(let r=0;r<t.length;++r){const i=t[r];r===t.length-1?e[i]=n:e=e[i]||(e[i]={})}}async function Out(e){const t={marks:[]},n=[],{attributes:r,marks:i}=e;for(const a in r){const l=Nut.get(a);if(l==null)throw new Error(`Unrecognized plot attribute: ${a}`);const c=r[a];typeof c=="symbol"?n.push(a):c!==void 0&&Dut(t,l.split("."),c)}const s=[];for(const a of i)for(const{type:l,data:c,options:u}of a.plotSpecs())kut.has(l)?t.marks.push(NN[l](u)):t.marks.push(NN[l](c,u)),s.push(a.index);But(t,e);const o=BT(t);Lut(o,s),Fut(e,o,r,n);for(const a of e.interactors)await a.init(o);return o}function Fut(e,t,n,r){r.forEach(i=>{const s=n[i];if(s===Br){if(!i.endsWith("Domain"))throw new Error(`Unsupported fixed attribute: ${i}`);const o=i.slice(0,-6),a=t.scale(o);a!=null&&a.domain&&e.setAttribute(i,n[`${o}Reverse`]?a.domain.slice().reverse():a.domain)}else throw new Error(`Unrecognized symbol: ${s}`)})}function But(e,t){const{marks:n}=t;V0("x",e,n,["x","x1","x2"]),V0("y",e,n,["y","y1","y2"]),V0("fx",e,n),V0("fy",e,n)}function V0(e,t,n,r=[e]){const i=t[e]||{};if(i.axis===null||i.label!==void 0)return;const s=n.map(u=>{var f;return(f=u.channelField(r))==null?void 0:f.field});if(s.every(u=>u==null))return;let o,a,l;for(let u=0;u<s.length;++u){const{column:f,label:d}=s[u]||{};f===void 0&&d===void 0||(o===void 0&&a===void 0?(o=f,a=d,l=Rut(n[u].data,r)||"number"):a!==d?a=void 0:o!==f&&(o=void 0))}let c=a||o;if(c!==void 0){if((l==="number"||l==="date")&&(e==="x"||e==="y")){i.percent&&(c=`${c} (%)`);const u=(e==="x"?1:-1)*(i.reverse?-1:1);e==="x"||i.labelAnchor==="center"?c=e==="x"==u<0?` ${c}`:`${c} `:c=`${u<0?" ":" "}${c}`}t[e]={...i,label:c}}}function Lut(e,t){const n=e.querySelectorAll('g[aria-label="facet"]');if(n.length)for(const r of n)kN(r,t);else kN(e,t)}function kN(e,t){let n=-1;for(const r of e.children){const i=r.getAttribute("aria-label")||"";r.nodeName==="style"||i.includes("-axis")||i.includes("-grid")||r.setAttribute("data-index",t[++n])}}function Rut(e,t){for(const n of e)for(let r=0;r<t.length;++r){const i=n[t[r]];if(i!=null)return i instanceof Date?"date":typeof i}}const Cut={width:640,marginLeft:40,marginRight:20,marginTop:20,marginBottom:30};class Uut{constructor(t){this.attributes={...Cut},this.listeners=null,this.interactors=[],this.legends=[],this.marks=[],this.markset=null,this.element=t||document.createElement("div"),this.element.setAttribute("class","plot"),this.element.style.display="flex",this.element.value=this,this.params=new Map,this.synch=rG()}margins(){return{left:this.getAttribute("marginLeft"),top:this.getAttribute("marginTop"),bottom:this.getAttribute("marginBottom"),right:this.getAttribute("marginRight")}}innerWidth(){const{left:t,right:n}=this.margins();return this.getAttribute("width")-t-n}innerHeight(){const{top:t,bottom:n}=this.margins();return this.getAttribute("height")-t-n}pending(t){this.synch.pending(t)}update(t){return this.synch.ready(t)&&!this.pendingRender&&(this.pendingRender=!0,requestAnimationFrame(()=>this.render())),this.synch.promise}async render(){this.pendingRender=!1;const t=await Out(this),n=this.legends.flatMap(({legend:r,include:i})=>{const s=r.init(t);return i?s:[]});this.element.replaceChildren(t,...n),this.synch.resolve()}getAttribute(t){return this.attributes[t]}setAttribute(t,n,r){var i,s;return HO(this.attributes[t],n)?(n===void 0?delete this.attributes[t]:this.attributes[t]=n,r!=null&&r.silent||(s=(i=this.listeners)==null?void 0:i.get(t))==null||s.forEach(o=>o(t,n)),!0):!1}addAttributeListener(t,n){const r=this.listeners||(this.listeners=new Map);return r.has(t)||r.set(t,new Set),r.get(t).add(n),this}removeAttributeListener(t,n){var r,i;return(i=(r=this.listeners)==null?void 0:r.get(t))==null?void 0:i.delete(n)}addParams(t,n){const{params:r}=this;for(const i of n)r.has(i)?r.get(i).push(t):(r.set(i,[t]),i.addEventListener("value",()=>Promise.allSettled(r.get(i).map(s=>s.requestQuery()))))}addMark(t){return t.setPlot(this,this.marks.length),this.marks.push(t),this.markset=null,this}get markSet(){return this.markset||(this.markset=new Set(this.marks))}addInteractor(t){return this.interactors.push(t),this}addLegend(t,n=!0){t.setPlot(this),this.legends.push({legend:t,include:n})}}function pe(...e){const t=new Uut;return e.flat().forEach(n=>n(t)),t.marks.forEach(n=>en().connect(n)),t.element}class Put extends Map{request(t,n){if(this.has(t))n(this.get(t));else{const r=this.waiting||(this.waiting=new Map),i=r.get(t)||[];r.set(t,i.concat(n))}}set(t,n){this.has(t)&&console.warn(`Overwriting named plot "${t}".`);const{waiting:r}=this;return r!=null&&r.has(t)&&(r.get(t).forEach(i=>i(n)),r.delete(t)),super.set(t,n)}}const SU=new Put;function zut(e){return t=>SU.set(e,t)}function xU(e,t,n){Na(n)?(n.addEventListener("value",r=>{e.setAttribute(t,r),e.update()}),n.value!==void 0&&e.setAttribute(t,n.value)):e.setAttribute(t,n)}function IU(e,t){return n=>{xU(n,e,t)}}function fE(e){return t=>{for(const[n,r]of Object.entries(e))xU(t,n,r)}}function TU(e){const{top:t,bottom:n,left:r,right:i}=e,s={};return t!==void 0&&(s.marginTop=t),n!==void 0&&(s.marginBottom=n),r!==void 0&&(s.marginLeft=r),i!==void 0&&(s.marginRight=i),fE(s)}function q1(e){return fE({xDomain:e,yDomain:e})}const R=e=>t=>IU(e,t),EU=R("style"),wn=R("width"),$n=R("height"),W1=R("margin"),Cu=R("marginLeft"),_x=R("marginRight"),H1=R("marginTop"),AU=R("marginBottom"),jut=R("align"),Vut=R("aspectRatio"),Yut=R("axis"),qut=R("inset"),Wut=R("grid"),Hut=R("label"),Gut=R("padding"),Xut=R("round"),Qut=R("xScale"),Jn=R("xDomain"),Kut=R("xRange"),Zut=R("xNice"),Jut=R("xInset"),tft=R("xInsetLeft"),eft=R("xInsetRight"),nft=R("xClamp"),rft=R("xRound"),ift=R("xAlign"),sft=R("xPadding"),oft=R("xPaddingInner"),aft=R("xPaddingOuter"),Dp=R("xAxis"),lft=R("xTicks"),cft=R("xTickSize"),uft=R("xTickSpacing"),fft=R("xTickPadding"),Zv=R("xTickFormat"),dft=R("xTickRotate"),hft=R("xGrid"),pft=R("xLine"),Lh=R("xLabel"),yft=R("xLabelAnchor"),mft=R("xLabelOffset"),gft=R("xFontVariant"),bft=R("xAriaLabel"),vft=R("xAriaDescription"),wft=R("xReverse"),_ft=R("xZero"),Sx=R("yScale"),Da=R("yDomain"),Sft=R("yRange"),xft=R("yNice"),Ift=R("yInset"),Tft=R("yInsetTop"),Eft=R("yInsetBottom"),Aft=R("yClamp"),Mft=R("yRound"),$ft=R("yAlign"),Nft=R("yPadding"),kft=R("yPaddingInner"),Dft=R("yPaddingOuter"),Op=R("yAxis"),Oft=R("yTicks"),Fft=R("yTickSize"),Bft=R("yTickSpacing"),Lft=R("yTickPadding"),Oa=R("yTickFormat"),Rft=R("yTickRotate"),G1=R("yGrid"),Cft=R("yLine"),dE=R("yLabel"),Uft=R("yLabelAnchor"),Pft=R("yLabelOffset"),zft=R("yFontVariant"),jft=R("yAriaLabel"),Vft=R("yAriaDescription"),MU=R("yReverse"),Yft=R("yZero"),qft=R("facetMargin"),Wft=R("facetMarginTop"),Hft=R("facetMarginBottom"),Gft=R("facetMarginLeft"),Xft=R("facetMarginRight"),Qft=R("facetGrid"),Kft=R("facetLabel"),Zft=R("fxDomain"),Jft=R("fxRange"),tdt=R("fxNice"),edt=R("fxInset"),ndt=R("fxInsetLeft"),rdt=R("fxInsetRight"),idt=R("fxRound"),sdt=R("fxAlign"),odt=R("fxPadding"),adt=R("fxPaddingInner"),ldt=R("fxPaddingOuter"),cdt=R("fxAxis"),udt=R("fxTicks"),fdt=R("fxTickSize"),ddt=R("fxTickSpacing"),hdt=R("fxTickPadding"),pdt=R("fxTickFormat"),ydt=R("fxTickRotate"),mdt=R("fxGrid"),gdt=R("fxLine"),bdt=R("fxLabel"),vdt=R("fxLabelAnchor"),wdt=R("fxLabelOffset"),_dt=R("fxFontVariant"),Sdt=R("fxAriaLabel"),xdt=R("fxAriaDescription"),Idt=R("fxReverse"),Tdt=R("fyDomain"),Edt=R("fyRange"),Adt=R("fyNice"),Mdt=R("fyInset"),$dt=R("fyInsetTop"),Ndt=R("fyInsetBottom"),kdt=R("fyRound"),Ddt=R("fyAlign"),Odt=R("fyPadding"),Fdt=R("fyPaddingInner"),Bdt=R("fyPaddingOuter"),Ldt=R("fyAxis"),Rdt=R("fyTicks"),Cdt=R("fyTickSize"),Udt=R("fyTickSpacing"),Pdt=R("fyTickPadding"),zdt=R("fyTickFormat"),jdt=R("fyTickRotate"),Vdt=R("fyGrid"),Ydt=R("fyLine"),qdt=R("fyLabel"),Wdt=R("fyLabelAnchor"),Hdt=R("fyLabelOffset"),Gdt=R("fyFontVariant"),Xdt=R("fyAriaLabel"),Qdt=R("fyAriaDescription"),Kdt=R("fyReverse"),xx=R("colorScale"),Fp=R("colorDomain"),Ix=R("colorRange"),Zdt=R("colorClamp"),Jdt=R("colorNice"),Mo=R("colorScheme"),tht=R("colorInterpolate"),eht=R("colorPivot"),nht=R("colorSymmetric"),rht=R("colorLabel"),iht=R("colorReverse"),sht=R("colorZero"),oht=R("colorTickFormat"),aht=R("opacityScale"),lht=R("opacityDomain"),cht=R("opacityRange"),uht=R("opacityClamp"),fht=R("opacityNice"),dht=R("opacityLabel"),hht=R("opacityReverse"),pht=R("opacityZero"),yht=R("opacityTickFormat"),mht=R("rScale"),$U=R("rDomain"),NU=R("rRange"),ght=R("rClamp"),bht=R("rNice"),vht=R("rZero"),wht=R("lengthScale"),_ht=R("lengthDomain"),Sht=R("lengthRange"),xht=R("lengthClamp"),Iht=R("lengthNice"),Tht=R("lengthZero"),kU=R("projectionType"),Eht=R("projectionParallels"),Aht=R("projectionPrecision"),DU=R("projectionRotate"),Mht=R("projectionDomain"),$ht=R("projectionInset"),Nht=R("projectionInsetLeft"),kht=R("projectionInsetRight"),Dht=R("projectionInsetTop"),Oht=R("projectionInsetBottom"),Fht=R("projectionClip"),Bht=Object.freeze(Object.defineProperty({__proto__:null,align:jut,aspectRatio:Vut,attribute:IU,attributes:fE,axis:Yut,colorClamp:Zdt,colorDomain:Fp,colorInterpolate:tht,colorLabel:rht,colorNice:Jdt,colorPivot:eht,colorRange:Ix,colorReverse:iht,colorScale:xx,colorScheme:Mo,colorSymmetric:nht,colorTickFormat:oht,colorZero:sht,facetGrid:Qft,facetLabel:Kft,facetMargin:qft,facetMarginBottom:Hft,facetMarginLeft:Gft,facetMarginRight:Xft,facetMarginTop:Wft,fxAlign:sdt,fxAriaDescription:xdt,fxAriaLabel:Sdt,fxAxis:cdt,fxDomain:Zft,fxFontVariant:_dt,fxGrid:mdt,fxInset:edt,fxInsetLeft:ndt,fxInsetRight:rdt,fxLabel:bdt,fxLabelAnchor:vdt,fxLabelOffset:wdt,fxLine:gdt,fxNice:tdt,fxPadding:odt,fxPaddingInner:adt,fxPaddingOuter:ldt,fxRange:Jft,fxReverse:Idt,fxRound:idt,fxTickFormat:pdt,fxTickPadding:hdt,fxTickRotate:ydt,fxTickSize:fdt,fxTickSpacing:ddt,fxTicks:udt,fyAlign:Ddt,fyAriaDescription:Qdt,fyAriaLabel:Xdt,fyAxis:Ldt,fyDomain:Tdt,fyFontVariant:Gdt,fyGrid:Vdt,fyInset:Mdt,fyInsetBottom:Ndt,fyInsetTop:$dt,fyLabel:qdt,fyLabelAnchor:Wdt,fyLabelOffset:Hdt,fyLine:Ydt,fyNice:Adt,fyPadding:Odt,fyPaddingInner:Fdt,fyPaddingOuter:Bdt,fyRange:Edt,fyReverse:Kdt,fyRound:kdt,fyTickFormat:zdt,fyTickPadding:Pdt,fyTickRotate:jdt,fyTickSize:Cdt,fyTickSpacing:Udt,fyTicks:Rdt,grid:Wut,height:$n,inset:qut,label:Hut,lengthClamp:xht,lengthDomain:_ht,lengthNice:Iht,lengthRange:Sht,lengthScale:wht,lengthZero:Tht,margin:W1,marginBottom:AU,marginLeft:Cu,marginRight:_x,marginTop:H1,margins:TU,name:zut,opacityClamp:uht,opacityDomain:lht,opacityLabel:dht,opacityNice:fht,opacityRange:cht,opacityReverse:hht,opacityScale:aht,opacityTickFormat:yht,opacityZero:pht,padding:Gut,projectionClip:Fht,projectionDomain:Mht,projectionInset:$ht,projectionInsetBottom:Oht,projectionInsetLeft:Nht,projectionInsetRight:kht,projectionInsetTop:Dht,projectionParallels:Eht,projectionPrecision:Aht,projectionRotate:DU,projectionType:kU,rClamp:ght,rDomain:$U,rNice:bht,rRange:NU,rScale:mht,rZero:vht,round:Xut,style:EU,width:wn,xAlign:ift,xAriaDescription:vft,xAriaLabel:bft,xAxis:Dp,xClamp:nft,xDomain:Jn,xFontVariant:gft,xGrid:hft,xInset:Jut,xInsetLeft:tft,xInsetRight:eft,xLabel:Lh,xLabelAnchor:yft,xLabelOffset:mft,xLine:pft,xNice:Zut,xPadding:sft,xPaddingInner:oft,xPaddingOuter:aft,xRange:Kut,xReverse:wft,xRound:rft,xScale:Qut,xTickFormat:Zv,xTickPadding:fft,xTickRotate:dft,xTickSize:cft,xTickSpacing:uft,xTicks:lft,xZero:_ft,xyDomain:q1,yAlign:$ft,yAriaDescription:Vft,yAriaLabel:jft,yAxis:Op,yClamp:Aft,yDomain:Da,yFontVariant:zft,yGrid:G1,yInset:Ift,yInsetBottom:Eft,yInsetTop:Tft,yLabel:dE,yLabelAnchor:Uft,yLabelOffset:Pft,yLine:Cft,yNice:xft,yPadding:Nft,yPaddingInner:kft,yPaddingOuter:Dft,yRange:Sft,yReverse:MU,yRound:Mft,yScale:Sx,yTickFormat:Oa,yTickPadding:Lft,yTickRotate:Rft,yTickSize:Fft,yTickSpacing:Bft,yTicks:Oft,yZero:Yft},Symbol.toStringTag,{value:"Module"}));function se(e,t){return{table:e,options:t}}function hE(e){return typeof e!="string"?!1:(e=e.toLowerCase().trim(),e==="none"||e==="currentcolor"||e.startsWith("url(")&&e.endsWith(")")||e.startsWith("var(")&&e.endsWith(")")||Va(e)!==null)}const Lht=new Set(["order","sort","label","anchor","curve","tension","marker","markerStart","markerMid","markerEnd","textAnchor","lineAnchor","lineHeight","textOverflow","monospace","fontFamily","fontSize","fontStyle","fontVariant","fontWeight","frameAnchor","strokeLinejoin","strokeLinecap","strokeMiterlimit","strokeDasharray","strokeDashoffset","mixBlendMode","shapeRendering","imageRendering","preserveAspectRatio","interpolate","crossOrigin","paintOrder","pointerEvents"]);function Rht(e){return Lht.has(e)}const Cht=new Set(["asterisk","circle","cross","diamond","diamond2","hexagon","plus","square","square2","star","times","triangle","triangle2","wye"]);function Uht(e){return Cht.has(`${e}`.toLowerCase())}function pE(e){return typeof(e==null?void 0:e.getChild)=="function"}const Pht=2,zht=10;function OU(e){return pE(e)?jht(e):e}function jht(e){const{batches:t,numRows:n}=e;if(!n)return[];const r=Array.from({length:n},()=>({}));for(let i=0,s=0;s<t.length;++s){const o=t[s],{schema:a,numRows:l,numCols:c}=o;for(let u=0;u<c;++u){const f=o.getChildAt(u),{name:d,type:h}=a.fields[u],p=Vht(h);for(let g=i,v=0;v<l;++v,++g)r[g][d]=p(f.get(v))}i+=l}return r}function Vht(e){const{typeId:t}=e;return t===zht?n=>n==null?n:new Date(n):t===Pht&&e.bitWidth>=64?n=>n==null?n:Number(n):n=>n}const FU=e=>e==="stroke"||e==="fill",Yht=e=>e==="symbol",qht=(e,t)=>e!=="sort"&&t!=null&&!Array.isArray(t),U_=(e,t)=>({channel:e,field:t,as:t instanceof Pa?t.column:e}),P_=(e,t)=>({channel:e,value:t});class pd extends ay{constructor(t,n,r,i={}){var l;super((l=n==null?void 0:n.options)==null?void 0:l.filterBy),this.type=t,this.reqs=i,this.source=n,Array.isArray(this.source)&&(this.data=this.source);const s=this.channels=[],o=this.params=new Set,a=(c,u)=>{const f=typeof u;if(f==="function"&&u[nF]){const d=u(this,c);for(const h in d)a(h,d[h])}else if(f==="string")Rht(c)||FU(c)&&hE(u)||Yht(c)&&Uht(u)?s.push(P_(c,u)):s.push(U_(c,o3(u)));else if(xf(u))if(Array.isArray(u.columns))s.push(U_(c,u)),o.add(u);else{const d=P_(c,u.value);s.push(d),u.addEventListener("value",h=>(d.value=h,this.update()))}else f==="object"&&qht(c,u)?s.push(U_(c,u)):u!==void 0&&s.push(P_(c,u))};for(const c in r)a(c,r[c])}setPlot(t,n){var r;this.plot=t,this.index=n,t.addParams(this,this.params),(r=this.source)!=null&&r.table&&this.queryPending()}hasOwnData(){return this.source==null||Array.isArray(this.source)}channel(t){return this.channels.find(n=>n.channel===t)}channelField(...t){const n=t.flat();for(const r of n){const i=this.channel(r);if(i!=null&&i.field)return i}return null}fields(){var s,o,a;if(this.hasOwnData())return null;const{source:{table:t},channels:n,reqs:r}=this,i=new Map;for(const{channel:l,field:c}of n){const u=c==null?void 0:c.column;if(u){if((s=c.stats)!=null&&s.length||r[l]){i.has(u)||i.set(u,new Set);const f=i.get(u);(o=r[l])==null||o.forEach(d=>f.add(d)),(a=c.stats)==null||a.forEach(d=>f.add(d))}}else continue}return Array.from(i,([l,c])=>({table:t,column:l,stats:Array.from(c)}))}fieldInfo(t){return this.stats=t.reduce((n,r)=>(n[r.column]=r,n),Object.create(null)),this}query(t=[]){if(this.hasOwnData())return null;const{channels:n,source:{table:r}}=this;return BU(n,r).where(t)}queryPending(){return this.plot.pending(this),this}queryResult(t){return this.data=OU(t),this}update(){return this.plot.update(this)}plotSpecs(){const{type:t,data:n,channels:r}=this,i={};for(const s of r)i[s.channel]=wa(s);return[{type:t,data:n,options:i}]}}function wa(e){return Object.hasOwn(e,"value")?e.value:FU(e.channel)?{value:e.as,scale:"color"}:e.as}function BU(e,t,n=[]){const r=Ct.from({source:t}),i=new Set;let s=!1;for(const o of e){const{channel:a,field:l,as:c}=o;if(!n.includes(a)){if(a==="order")r.orderby(o.value);else if(l){if(l.aggregate)s=!0;else{if(i.has(c))continue;i.add(c)}r.select({[c]:l})}}}return s&&r.groupby(Array.from(i)),r}function Xa(e,t,n){if(!e.stats)return r;const{field:r}=e.channelField(t),{type:i}=e.stats[r.column];return n=n??r,i==="date"?zO(n):n}function Tx(e,t,n,r,i=!1,s=1){const o=(r-s)/(n-t),a=o!==1?` * ${o}::DOUBLE`:"";return i?G`(${+n} - ${e}::DOUBLE)${a}`:G`(${e}::DOUBLE - ${+t})${a}`}const LU={x:["min","max"]},RU={y:["min","max"]},CU={...LU,...RU};function UU(e,t,n,r,i){const{plot:s,stats:o}=e,a=s.getAttribute(r),l=s.getAttribute(i);if(Array.isArray(a)&&!a[hc])return a;{const{field:c}=e.channelField(n),{column:u}=c,{min:f,max:d}=o[u],h=PU(t,u)||(l?yv().domain([f,d]).nice().domain():[f,d]);return a!==Br&&(h[hc]=!0),s.setAttribute(r,h,{silent:!0}),h}}function Cy(e,t){return UU(e,t,"x","xDomain","xNice")}function Uy(e,t){return UU(e,t,"y","yDomain","yNice")}function PU(e,t){if(!e)return;let n,r;const i=(s,o)=>{if(s==="BETWEEN"&&o.field.column===t){const{range:a}=o;a&&(n==null||a[0]<n)&&(n=a[0]),a&&(r==null||a[1]>r)&&(r=a[1])}};return Array.isArray(e)?e.forEach(s=>{var o;return(o=s.visit)==null?void 0:o.call(s,i)}):e.visit&&e.visit(i),n!=null&&r!=null&&n!==r?[n,r]:void 0}class Wht extends pd{constructor(t,n,r){const i=t.endsWith("X")?"y":"x",s={[i]:["count","min","max"]};super(t,n,r,s),this.dim=i}query(t=[]){const{plot:n,dim:r,source:i,stats:s}=this,{optimize:o=!0}=i.options||{},{field:a,as:l}=this.channelField(r),c=super.query(t);if(o){const{column:u}=a,{count:f,max:d,min:h}=s[u],p=r==="x"?n.innerWidth():n.innerHeight(),[g,v]=PU(t,u)||[h,d],y=(v-g)/(d-h);if(f*y>p*4){const m=Xa(this,r,l),b=this.channelField(r==="x"?"y":"x").as,w=c.select().map(S=>S.as).filter(S=>S!==l&&S!==b);return Hht(c,m,l,b,g,v,p,w)}}return c.orderby(l)}}function Hht(e,t,n,r,i,s,o,a=[]){const l=G`FLOOR(${o/(s-i)}::DOUBLE * (${t} - ${+i}::DOUBLE))::INTEGER`,c=u=>Ct.from(e).select(u).groupby(l,a);return Ct.union(c([{[n]:cp(n),[r]:RM(r,n)},...a]),c([{[n]:lp(n),[r]:CM(r,n)},...a]),c([{[n]:RM(n,r),[r]:cp(r)},...a]),c([{[n]:CM(n,r),[r]:lp(r)},...a])).orderby(a,n)}function Ex(e,t=!1){const n=new Float64Array(5),r=new Float64Array(4);Ght(n,r,e);const i=Float64Array.of(0,r[1]-n[1]*r[0],r[2]-n[2]*r[0],r[3]-n[3]*r[0],-n[4]*r[0]),s=1+n[1]+n[2]+n[3]+n[4],o=(r[0]+r[1]+r[2]+r[3])/s,a=(i[1]+i[2]+i[3]+i[4])/s;return{sigma:e,negative:t,a:n,b_causal:r,b_anticausal:i,sum_causal:o,sum_anticausal:a}}function Ght(e,t,n){const i=Float64Array.of(.84,1.8675,.84,-1.8675,-.34015,-.1299,-.34015,.1299),s=Math.exp(-1.783/n),o=Math.exp(-1.723/n),a=.6318/n,l=1.997/n,c=Float64Array.of(-s*Math.cos(a),s*Math.sin(a),-s*Math.cos(-a),s*Math.sin(-a),-o*Math.cos(l),o*Math.sin(l),-o*Math.cos(-l),o*Math.sin(-l)),u=n*2.5066282746310007,f=Float64Array.of(i[0],i[1],0,0,0,0,0,0),d=Float64Array.of(1,0,c[0],c[1],0,0,0,0,0,0);let h,p;for(p=2;p<8;p+=2){for(f[p]=c[p]*f[p-2]-c[p+1]*f[p-1],f[p+1]=c[p]*f[p-1]+c[p+1]*f[p-2],h=p-2;h>0;h-=2)f[h]+=c[p]*f[h-2]-c[p+1]*f[h-1],f[h+1]+=c[p]*f[h-1]+c[p+1]*f[h-2];for(h=0;h<=p;h+=2)f[h]+=i[p]*d[h]-i[p+1]*d[h+1],f[h+1]+=i[p]*d[h+1]+i[p+1]*d[h];for(d[p+2]=c[p]*d[p]-c[p+1]*d[p+1],d[p+3]=c[p]*d[p+1]+c[p+1]*d[p],h=p;h>0;h-=2)d[h]+=c[p]*d[h-2]-c[p+1]*d[h-1],d[h+1]+=c[p]*d[h-1]+c[p+1]*d[h-2]}for(p=0;p<4;++p)h=p<<1,t[p]=f[h]/u,e[p+1]=d[h+2]}function Xht(e,t,n,[r,i]){const s=new Float64Array(Math.max(r,i)),o=new Float64Array(Math.max(r,i)),a=new Float64Array(5),l=new Float64Array(n.length);for(let c=0,u=0;c<i;++c,u+=r){const f=l.subarray(u);Ax(e,n.subarray(u),r,1,s,o,a,f)}for(let c=0;c<r;++c){const u=l.subarray(c);Ax(t,u,i,r,s,o,a,u)}return l}function Ax(e,t,n,r=1,i=new Float64Array(n),s=new Float64Array(n),o=new Float64Array(5),a=i,l=Qht){const c=r*2,u=r*3,f=r*4,d=r*n;let h,p;for(l(i,t,n,r,e.b_causal,3,e.a,4,e.sum_causal,o,e.sigma),p=4,h=f;p<n;++p,h+=r)i[p]=e.b_causal[0]*t[h]+e.b_causal[1]*t[h-r]+e.b_causal[2]*t[h-c]+e.b_causal[3]*t[h-u]-e.a[1]*i[p-1]-e.a[2]*i[p-2]-e.a[3]*i[p-3]-e.a[4]*i[p-4];for(l(s,t,n,-r,e.b_anticausal,4,e.a,4,e.sum_anticausal,o,e.sigma),p=4,h=d-r*5;p<n;++p,h-=r)s[p]=e.b_anticausal[1]*t[h+r]+e.b_anticausal[2]*t[h+c]+e.b_anticausal[3]*t[h+u]+e.b_anticausal[4]*t[h+f]-e.a[1]*s[p-1]-e.a[2]*s[p-2]-e.a[3]*s[p-3]-e.a[4]*s[p-4];if(e.negative)for(p=0,h=0;p<n;++p,h+=r)a[h]=i[p]+s[n-p-1];else for(p=0,h=0;p<n;++p,h+=r)a[h]=Math.max(0,i[p]+s[n-p-1]);return a}function Qht(e,t,n,r,i,s,o,a,l,c){const u=Math.abs(r)*n,f=r<0?u+r:0;let d,h,p;for(h=0;h<a;++h)for(c[h]=h<=s?i[h]:0,p=1;p<=a&&p<=h;++p)c[h]-=o[p]*c[h-p];for(p=0;p<a;++p)for(e[p]=0,h=1;h<=p;++h)d=f+r*h,d>=0&&d<u&&(e[p]+=c[p-h]*t[d]);const g=t[f];if(g>0)for(p=0;p<a;++p)e[p]+=c[p]*g}function Kht(e,t){return zU(new Float64Array(e),t)}function Zht(e,t,n,r=[]){return r.length?Object.values(Jht(e*t,n,r)):[{grid:zU(new Float64Array(e*t),n)}]}function zU(e,t){if(pE(t)){const n=t.numRows;if(n===0)return e;const r=t.getChild("index").toArray(),i=t.getChild("value").toArray();for(let s=0;s<n;++s)e[r[s]]=i[s]}else for(const n of t)e[n.index]=n.value;return e}function Jht(e,t,n){const r={},i=s=>(r[s]||(r[s]={key:s,grid:new Float64Array(e)})).grid;if(pE(t)){const s=t.numRows;if(s===0)return r;const o=t.getChild("index").toArray(),a=t.getChild("value").toArray(),l=n.map(c=>t.getChild(c));for(let c=0;c<s;++c){const u=l.map(f=>f.get(c));i(u)[o[c]]=a[c]}}else for(const s of t){const o=n.map(a=>s[a]);i(o)[s.index]=s.value}return r}function pi(e,t,n,r){Na(n)?(r=r||(()=>e.requestUpdate()),n.addEventListener("value",i=>(e[t]=i,r())),e[t]=n.value):e[t]=n}class jU extends pd{constructor(t,n,r){const{bins:i=1024,bandwidth:s=20,...o}=r,a=t.endsWith("X")?"y":"x";super(t,n,o,a==="x"?LU:RU),this.dim=a,pi(this,"bins",i),pi(this,"bandwidth",s,()=>this.grid?this.convolve().update():null)}get filterIndexable(){const t=this.dim==="x"?"xDomain":"yDomain",n=this.plot.getAttribute(t);return n&&!n[hc]}query(t=[]){if(this.hasOwnData())throw new Error("Density1DMark requires a data source");const{bins:n,channels:r,dim:i,source:{table:s}}=this,[o,a]=this.extent=(i==="x"?Cy:Uy)(this,t),l=Xa(this,i);return tpt(BU(r,s,[i]).where(t.concat(jr(l,[o,a]))),Tx(l,o,a,n),this.channelField("weight")?"weight":null)}queryResult(t){return this.grid=Kht(this.bins,t),this.convolve()}convolve(){const{bins:t,bandwidth:n,dim:r,grid:i,plot:s,extent:[o,a]}=this,l=i.some(m=>m<0),c=r==="x"?s.innerWidth():s.innerHeight(),u=Ex(n*(t-1)/c,l),f=Ax(u,i,t),d=this.data=[],h=r==="x"?"y":"x",p=this.channelField(r).as,g=+o,v=(a-g)/(t-1),y=1/v;for(let m=0;m<t;++m)d.push({[p]:g+m*v,[h]:f[m]*y});return this}plotSpecs(){const{type:t,data:n,channels:r,dim:i}=this,s=i==="x"?{y:"y"}:{x:"x"};for(const o of r)s[o.channel]=wa(o);return[{type:t,data:n,options:s}]}}function tpt(e,t,n){const r=n?`* ${n}`:"",i=e.clone().select({p:t,i:G`FLOOR(p)::INTEGER`,w:G`(FLOOR(p) + 1 - p)${r}`}),s=e.clone().select({p:t,i:G`FLOOR(p)::INTEGER + 1`,w:G`(p - FLOOR(p))${r}`});return Ct.from(Ct.unionAll(i,s)).select({index:"i",value:td("w")}).groupby("index").having(PO("value",0))}class Jv extends pd{constructor(t,n,r){const{bandwidth:i=20,binType:s="linear",binWidth:o=2,binPad:a=1,...l}=r,c=ept(l);super(t,n,l,CU),this.densityMap=c,pi(this,"bandwidth",i,()=>this.grids?this.convolve().update():null),pi(this,"binWidth",o),pi(this,"binType",s),pi(this,"binPad",a)}setPlot(t,n){const r=()=>{this.stats&&this.requestUpdate()};return t.addAttributeListener("domainX",r),t.addAttributeListener("domainY",r),super.setPlot(t,n)}get filterIndexable(){const t=this.plot.getAttribute("xDomain"),n=this.plot.getAttribute("yDomain");return t&&n&&!t[hc]&&!n[hc]}query(t=[]){const{plot:n,binType:r,binPad:i,channels:s,densityMap:o,source:a}=this,[l,c]=this.extentX=Cy(this,t),[u,f]=this.extentY=Uy(this,t),[d,h]=this.bins=this.binDimensions(this),p=Xa(this,"x"),g=Xa(this,"y"),v=!!n.getAttribute("xReverse"),y=!!n.getAttribute("yReverse"),m=DN(p,l,c,d,v,this.binPad),b=DN(g,u,f,h,y,this.binPad),w=i?[jr(p,[l,c]),jr(g,[u,f])]:[Ug(l,p),Cg(p,c),Ug(u,g),Cg(g,f)],S=Ct.from(a.table).where(t.concat(w)),_=this.groupby=[];let x=Sn();for(const E of s)if(Object.hasOwn(E,"field")){const{as:k,channel:I,field:A}=E;A.aggregate?(x=A,o[I]=!0):I==="weight"?x=td(A):I!=="x"&&I!=="y"&&(S.select({[k]:A}),_.push(k))}return r==="linear"?rpt(S,m,b,x,d,_):npt(S,m,b,x,d,_)}binDimensions(){const{plot:t,binWidth:n}=this;return[Math.round(t.innerWidth()/n),Math.round(t.innerHeight()/n)]}queryResult(t){const[n,r]=this.bins;return this.grids=Zht(n,r,t,this.groupby),this.convolve()}convolve(){const{bandwidth:t,bins:n,grids:r,plot:i}=this;if(t<=0)this.kde=this.grids.map(({key:s,grid:o})=>(o.key=s,o));else{const s=i.innerWidth(),o=i.innerHeight(),[a,l]=n,c=r.some(({grid:d})=>d.some(h=>h<0)),u=Ex(t*(a-1)/s,c),f=Ex(t*(l-1)/o,c);this.kde=this.grids.map(({key:d,grid:h})=>{const p=Xht(u,f,h,n);return p.key=d,p})}return this}plotSpecs(){throw new Error("Unimplemented. Use a Grid2D mark subclass.")}}function ept(e){const t={};for(const n in e)e[n]==="density"&&(delete e[n],t[n]=!0);return t}function DN(e,t,n,r,i,s){const o=(r-s)/(n-t),a=o!==1?` * ${o}::DOUBLE`:"";return i?G`(${n} - ${e}::DOUBLE)${a}`:G`(${e}::DOUBLE - ${t})${a}`}function npt(e,t,n,r,i,s){return e.select({index:G`FLOOR(${t})::INTEGER + FLOOR(${n})::INTEGER * ${i}`,value:r}).groupby("index",s)}function rpt(e,t,n,r,i,s){const o=r.column?`* ${r.column}`:"",a=(d,h)=>e.clone().select({xp:t,yp:n,i:d,w:h}),l=a(G`FLOOR(xp)::INTEGER + FLOOR(yp)::INTEGER * ${i}`,G`(FLOOR(xp)::INTEGER + 1 - xp) * (FLOOR(yp)::INTEGER + 1 - yp)${o}`),c=a(G`FLOOR(xp)::INTEGER + (FLOOR(yp)::INTEGER + 1) * ${i}`,G`(FLOOR(xp)::INTEGER + 1 - xp) * (yp - FLOOR(yp)::INTEGER)${o}`),u=a(G`FLOOR(xp)::INTEGER + 1 + FLOOR(yp)::INTEGER * ${i}`,G`(xp - FLOOR(xp)::INTEGER) * (FLOOR(yp)::INTEGER + 1 - yp)${o}`),f=a(G`FLOOR(xp)::INTEGER + 1 + (FLOOR(yp)::INTEGER + 1) * ${i}`,G`(xp - FLOOR(xp)::INTEGER) * (yp - FLOOR(yp)::INTEGER)${o}`);return Ct.from(Ct.unionAll(l,c,u,f)).select({index:"i",value:td("w")},s).groupby("index",s).having(PO("value",0))}class ipt extends Jv{constructor(t,n){const{type:r="dot",binsX:i,binsY:s,...o}=n;o.binPad=o.binPad??0,super(r,t,o),pi(this,"binsX",i),pi(this,"binsY",s)}convolve(){super.convolve();const{bins:t,binPad:n,extentX:r,extentY:i}=this,[s,o]=t,[a,l]=r,[c,u]=i,f=(l-a)/(s-n),d=(u-c)/(o-n),h=n?0:.5;return this.data=spt(this.kde,t,a,c,f,d,h),this}binDimensions(){const{plot:t,binWidth:n,binsX:r,binsY:i}=this;return[r??Math.round(t.innerWidth()/n),i??Math.round(t.innerHeight()/n)]}plotSpecs(){const{type:t,channels:n,densityMap:r,data:i}=this,s={};for(const o of n){const{channel:a}=o;s[a]=a==="x"||a==="y"?a:wa(o)}for(const o in r)r[o]&&(s[o]="density");return[{type:t,data:i,options:s}]}}function spt(e,t,n,r,i,s,o){const a=1/(i*s),[l,c]=t,u=[];for(const f of e)for(let d=0,h=0;h<c;++h)for(let p=0;p<l;++p,++d)u.push({x:n+(p+o)*i,y:r+(h+o)*s,density:f[d]*a});return u}function VU(e,t,n,r,i,s){const o=(s.length>>2)-1;for(let a=0,l=0;a<r;++a)for(let c=0,u=(r-a-1)*n;c<n;++c,l+=4){const f=o*i(e[c+u])<<2;t[l+0]=s[f+0],t[l+1]=s[f+1],t[l+2]=s[f+2],t[l+3]=s[f+3]}}function X1(e,t){const n=new Uint8ClampedArray(4*e),r=e-1;for(let i=0;i<=r;++i){const s=t(i/r),{r:o,g:a,b:l,opacity:c=1}=typeof s=="string"?wi(s):s,u=i<<2;n[u+0]=o,n[u+1]=a,n[u+2]=l,n[u+3]=255*c|0}return n}function YU(e,t){if(typeof document<"u"){const n=document.createElement("canvas");return n.setAttribute("width",e),n.setAttribute("height",t),n}throw new Error("Can not create a canvas instance.")}function qU(e="black"){const{r:t,g:n,b:r}=wi(e);return i=>({r:t,g:n,b:r,opacity:i})}class WU extends Jv{constructor(t,n){super("image",t,n)}setPlot(t,n){const r=()=>{this.stats&&this.rasterize()};t.addAttributeListener("schemeColor",r),super.setPlot(t,n)}convolve(){return super.convolve().rasterize()}rasterize(){var d;const{bins:t,kde:n,groupby:r}=this,[i,s]=t,{canvas:o,ctx:a,img:l}=opt(this,i,s),c=apt(this),u=r.indexOf((d=this.channelField("fill"))==null?void 0:d.as),f=u<0?[]:n.map(({key:h})=>h[u]);return this.data=n.map(h=>{var g;const p=lpt(this,f,(g=h.key)==null?void 0:g[u]);return VU(h,l.data,i,s,c,p),a.putImageData(l,0,0),{src:o.toDataURL()}}),this}plotSpecs(){var s;const{type:t,plot:n,data:r}=this,i={src:"src",width:n.innerWidth(),height:n.innerHeight(),preserveAspectRatio:"none",imageRendering:(s=this.channel("imageRendering"))==null?void 0:s.value,frameAnchor:"middle"};return[{type:t,data:r,options:i}]}}function opt(e,t,n){if(!e.image||e.image.w!==t||e.image.h!==n){const r=YU(t,n),i=r.getContext("2d",{willReadFrequently:!0}),s=i.getImageData(0,0,t,n);e.image={canvas:r,ctx:i,img:s,w:t,h:n}}return e.image}function apt(e){const{densityMap:t,kde:n,plot:r}=e;let i=t.fill&&r.getAttribute("colorDomain");if(!i){let o=0,a=0;n.forEach(l=>{for(const c of l)c<o&&(o=c),c>a&&(a=c)}),i=o===0&&a===0?[0,1]:[o,a]}const s=r.getAttribute("colorScale");return Ic({x:{type:s,domain:i,range:[0,1]}}).apply}function lpt(e,t,n,r=1024){const{densityMap:i,plot:s}=e,o=s.getAttribute("colorScheme");let a;if(i.fill){if(o)try{return X1(r,Ic({color:{scheme:o,domain:[0,1]}}).interpolate)}catch(l){console.warn(l)}}else if(t.length){const l=s.getAttribute("colorRange");a=Ic({color:{domain:t,range:l,scheme:o||(l?void 0:"tableau10")}}).apply(n)}else{const l=e.channelField("fill");a=hE(l==null?void 0:l.value)?l.value:void 0}return X1(r,qU(a))}class cpt extends WU{constructor(t,n){const{normalize:r=!0,...i}=n;super(t,{bandwidth:0,...i}),pi(this,"normalize",r)}query(t=[]){const{plot:n,channels:r,normalize:i,source:s}=this,[o,a]=Cy(this,t),[l,c]=Uy(this,t),[u,f]=this.bins=this.binDimensions(this),d=Xa(this,"x"),h=Xa(this,"y"),p=!!n.getAttribute("xReverse"),g=!!n.getAttribute("yReverse"),v=Tx(d,o,a,u,p,this.binPad),y=Tx(h,l,c,f,g,this.binPad),m=Ct.from(s.table).where(upt(this,t)),b=this.groupby=[],w=[];for(const S of r)if(Object.hasOwn(S,"field")){const{channel:_,field:x}=S;_==="z"?(m.select({[_]:x}),w.push("z")):_!=="x"&&_!=="y"&&(m.select({[_]:x}),b.push(_))}return fpt(m,v,y,w,u,f,b,i)}}function upt(e,t){if(Array.isArray(t)&&!t.length)return t;const n=e.channelField("x").field.column,r=e.channelField("y").field.column,i=o=>o.op!=="BETWEEN"||o.field.column!==n&&o.field.column!==r,s=o=>o.op==="AND"?fc(o.children.filter(a=>i(a))):o;return Array.isArray(t)?t.filter(o=>i(o)).map(o=>s(o)):s(t)}function fpt(e,t,n,r,i,s,o=[],a=!0){e.select({x:G`FLOOR(${t})::INTEGER`,y:G`FLOOR(${n})::INTEGER`});const l=o.concat(r),c=l.length?`PARTITION BY ${l.join(", ")} `:"",u=Ct.from(e).select(l,{x0:"x",y0:"y",dx:G`(lead(x) OVER sw - x)`,dy:G`(lead(y) OVER sw - y)`}).window({sw:G`${c}ORDER BY x ASC`}).qualify(fc(G`(x0 < ${i} OR x0 + dx < ${i})`,G`(y0 < ${s} OR y0 + dy < ${s})`,G`(x0 > 0 OR x0 + dx > 0)`,G`(y0 > 0 OR y0 + dy > 0)`)),f=Ct.select({x:G`GREATEST(MAX(ABS(dx)), MAX(ABS(dy)))`}).from("pairs"),d=Ct.select({i:G`UNNEST(range((${f})))::INTEGER`}),h=Ct.unionAll(Ct.select(l,{x:G`x0 + i`,y:G`y0 + ROUND(i * dy / dx::FLOAT)::INTEGER`}).from("pairs","indices").where(G`ABS(dy) <= ABS(dx) AND i < ABS(dx)`),Ct.select(l,{x:G`x0 + ROUND(SIGN(dy) * i * dx / dy::FLOAT)::INTEGER`,y:G`y0 + SIGN(dy) * i`}).from("pairs","indices").where(G`ABS(dy) > ABS(dx) AND i < ABS(dy)`),Ct.select(l,{x:"x0",y:"y0"}).from("pairs").where(UO("dx"))),p=["x"].concat(l).join(", "),g=Ct.from("raster").select(l,"x","y",a?{w:G`1.0 / COUNT(*) OVER (PARTITION BY ${p})`}:null).where(fc(jr("x",[0,i]),jr("y",[0,s])));return Ct.with({pairs:u,indices:d,raster:h,points:g}).from("points").select(o,{index:G`x + y * ${i}::INTEGER`,value:a?td("w"):Sn()}).groupby("index",o)}class dpt extends Jv{constructor(t,n){const{thresholds:r=10,...i}=n;super("geo",t,i),pi(this,"thresholds",r,()=>this.grids?this.contours().update():null)}convolve(){return super.convolve().contours()}contours(){const{bins:t,densityMap:n,kde:r,thresholds:i,groupby:s,plot:o}=this;let a=i;if(!Array.isArray(a)){const S=De(r.map(_=>De(_)));a=Array.from({length:a-1},(_,x)=>S*(x+1)/a)}(n.fill||n.stroke)&&this.plot.getAttribute("colorScale")!=="log"&&this.plot.setAttribute("colorZero",!0);const[l,c]=t,[u,f]=o.getAttribute("xDomain"),[d,h]=o.getAttribute("yDomain"),p=(f-u)/l,g=(h-d)/c,v=+u,y=+d,m=S=>v+S*p,b=S=>y+S*g,w=Xg().size(t);return this.data=r.flatMap(S=>a.map(_=>{const x=hpt(w.contour(S,_),m,b);return s.forEach((E,k)=>x[E]=S.key[k]),x.density=_,x})),this}plotSpecs(){const{type:t,channels:n,densityMap:r,data:i}=this,s={};for(const o of n){const{channel:a}=o;a!=="x"&&a!=="y"&&(s[a]=wa(o))}return r.fill&&(s.fill="density"),r.stroke&&(s.stroke="density"),[{type:t,data:i,options:s}]}}function hpt(e,t,n){function r(o){o.forEach(i)}function i(o){o.forEach(s)}function s(o){o[0]=t(o[0]),o[1]=n(o[1])}return e.coordinates.forEach(r),e}class ppt extends pd{constructor(t,n){const{type:r="hexagon",binWidth:i=20,...s}=n;super(r,t,{r:i/2,clip:!0,...s},CU),this.binWidth=i}get filterIndexable(){const t=this.plot.getAttribute("xDomain"),n=this.plot.getAttribute("yDomain");return t&&n&&!t[hc]&&!n[hc]}query(t=[]){if(this.hasOwnData())return null;const{plot:n,binWidth:r,channels:i,source:s}=this,[o,a]=Cy(this,t),[l,c]=Uy(this,t),u=.5-n.getAttribute("marginLeft"),f=0-n.getAttribute("marginTop"),d=`${r}::DOUBLE`,h=`${r*(1.5/Math.sqrt(3))}::DOUBLE`,p=`${n.innerWidth()/(a-o)}::DOUBLE`,g=`${n.innerHeight()/(c-l)}::DOUBLE`;let v,y;const m=new Set,b={};for(const E of i)E.channel==="order"?w.orderby(E.value):E.channel==="x"?v=E:E.channel==="y"?y=E:Object.hasOwn(E,"field")&&(b[E.as]=E.field,E.field.aggregate&&E.field.columns.forEach(k=>m.add(k)));const w=Ct.select({[v.as]:G`${o}::DOUBLE + ((x + 0.5 * (y & 1)) * ${d} + ${u})::DOUBLE / ${p}`,[y.as]:G`${c}::DOUBLE - (y * ${h} + ${f})::DOUBLE / ${g}`,...b}).groupby("x","y"),S=`${p} * (${v.field} - ${o}::DOUBLE)`,_=`${g} * (${c}::DOUBLE - ${y.field})`,x=Ct.select({py:G`(${_} - ${f}) / ${h}`,pj:G`ROUND(py)::INTEGER`,px:G`(${S} - ${u}) / ${d} - 0.5 * (pj & 1)`,pi:G`ROUND(px)::INTEGER`,tt:G`ABS(py-pj) * 3 > 1 AND (px-pi)**2 + (py-pj)**2 > (px - pi - 0.5 * CASE WHEN px < pi THEN -1 ELSE 1 END)**2 + (py - pj - CASE WHEN py < pj THEN -1 ELSE 1 END)**2`,x:G`CASE WHEN tt THEN (pi + (CASE WHEN px < pi THEN -0.5 ELSE 0.5 END) + (CASE WHEN pj & 1 <> 0 THEN 0.5 ELSE -0.5 END))::INTEGER ELSE pi END`,y:G`CASE WHEN tt THEN (pj + CASE WHEN py < pj THEN -1 ELSE 1 END)::INTEGER ELSE pj END`}).select(Array.from(m)).from(s.table).where(Rg(v.field),Rg(y.field),t);return w.from(x)}}class ypt extends Jv{constructor(t,n){const{origin:r=[0,0],dim:i="xy",...s}=n;super("image",t,s),this.origin=r,this.tileX=i.toLowerCase().includes("x"),this.tileY=i.toLowerCase().includes("y")}setPlot(t,n){const r=()=>{this.stats&&this.rasterize()};t.addAttributeListener("schemeColor",r),super.setPlot(t,n)}requestQuery(){return this.requestTiles()}query(t=[]){return this._filter=t,null}tileQuery(t){const{plot:n,binType:r,binPad:i,channels:s,densityMap:o,source:a}=this,[[l,c],[u,f]]=t,[d,h]=this.bins,p=Xa(this,"x"),g=Xa(this,"y"),v=!!n.getAttribute("xReverse"),y=!!n.getAttribute("yReverse"),m=ON(p,l,c,d,v,i),b=ON(g,u,f,h,y,i),w=i?[jr(p,[l,c]),jr(g,[u,f])]:[Ug(l,p),Cg(p,c),Ug(u,g),Cg(g,f)],S=Ct.from(a.table).where(w),_=this.groupby=[];let x=Sn();for(const E of s)if(Object.hasOwn(E,"field")){const{channel:k,field:I}=E;I.aggregate?(x=I,o[k]=!0):k==="weight"?x=td(I):k!=="x"&&k!=="y"&&(S.select({[k]:I}),_.push(k))}return r==="linear"?Spt(S,m,b,x,d,_):_pt(S,m,b,x,d,_)}async requestTiles(){const t=en();this.prefetch&&t.cancel(this.prefetch);const{binPad:n,tileX:r,tileY:i,origin:[s,o]}=this,[a,l]=this.bins=this.binDimensions(this),[c,u]=Cy(this,this._filter),[f,d]=Uy(this,this._filter),h=u-c,p=d-f,g=Math.floor((c-s)*(a-n)/h),v=Math.floor((f-o)*(l-n)/p),y=(I,A)=>[[s+I*h,s+(I+1)*h],[o+A*p,o+(A+1)*p]],m=Math.floor((c-s)/h),b=r?FN((u-s)/h):m,w=Math.floor((f-o)/p),S=i?FN((d-o)/p):w,_=[];for(let I=m;I<=b;++I)for(let A=w;A<=S;++A)_.push([I,A]);const x=_.map(([I,A])=>t.query(this.tileQuery(y(I,A)))),E=[];if(r)for(let I=w;I<=S;++I)E.push([b+1,I]),E.push([m-1,I]);if(i){const I=r?m-1:m,A=r?b+1:b;for(let D=I;D<=A;++D)E.push([D,S+1]),E.push([D,w-1])}this.prefetch=E.map(([I,A])=>t.prefetch(this.tileQuery(y(I,A))));const k=await Promise.all(x);this.grids=[{grid:mpt(a,l,g,v,_,k)}],this.convolve().update()}convolve(){return super.convolve().rasterize()}rasterize(){var d;const{bins:t,kde:n,groupby:r}=this,[i,s]=t,{canvas:o,ctx:a,img:l}=bpt(this,i,s),c=vpt(this),u=r.indexOf((d=this.channelField("fill"))==null?void 0:d.as),f=u<0?[]:n.map(({key:h})=>h[u]);return this.data=n.map(h=>{var g;const p=wpt(this,f,(g=h.key)==null?void 0:g[u]);return VU(h,l.data,i,s,c,p),a.putImageData(l,0,0),{src:o.toDataURL()}}),this}plotSpecs(){var s;const{type:t,data:n,plot:r}=this,i={src:"src",width:r.innerWidth(),height:r.innerHeight(),preserveAspectRatio:"none",imageRendering:(s=this.channel("imageRendering"))==null?void 0:s.value,frameAnchor:"middle"};return[{type:t,data:n,options:i}]}}function mpt(e,t,n,r,i,s){const o=new Float64Array(e*t);return s.forEach((a,l)=>{const[c,u]=i[l],f=c*e-n,d=u*t-r;gpt(e,t,o,a,f,d)}),o}function gpt(e,t,n,r,i,s){const o=r.numRows;if(o===0)return;const a=r.getChild("index").toArray(),l=r.getChild("value").toArray();for(let c=0;c<o;++c){const u=a[c],f=i+u%e,d=s+Math.floor(u/e);0<=f&&f<e&&0<=d&&d<t&&(n[f+d*e]=l[c])}}function bpt(e,t,n){if(!e.image||e.image.w!==t||e.image.h!==n){const r=YU(t,n),i=r.getContext("2d",{willReadFrequently:!0}),s=i.getImageData(0,0,t,n);e.image={canvas:r,ctx:i,img:s,w:t,h:n}}return e.image}function vpt(e){const{densityMap:t,kde:n,plot:r}=e;let i=t.fill&&r.getAttribute("colorDomain");if(!i){let o=0,a=0;n.forEach(l=>{for(const c of l)c<o&&(o=c),c>a&&(a=c)}),i=o===0&&a===0?[0,1]:[o,a]}const s=r.getAttribute("colorScale");return Ic({x:{type:s,domain:i,range:[0,1]}}).apply}function wpt(e,t,n,r=1024){const{densityMap:i,plot:s}=e,o=s.getAttribute("colorScheme");let a;if(i.fill){if(o)try{return X1(r,Ic({color:{scheme:o,domain:[0,1]}}).interpolate)}catch(l){console.warn(l)}}else if(t.length){const l=s.getAttribute("colorRange");a=Ic({color:{domain:t,range:l,scheme:o||(l?void 0:"tableau10")}}).apply(n)}else{const l=e.channelField("fill");a=hE(l==null?void 0:l.value)?l.value:void 0}return X1(r,qU(a))}function ON(e,t,n,r,i,s){const o=(r-s)/(n-t),a=o!==1?` * ${o}::DOUBLE`:"";return i?G`(${n} - ${e}::DOUBLE)${a}`:G`(${e}::DOUBLE - ${t})${a}`}function _pt(e,t,n,r,i,s){return e.select({index:G`FLOOR(${t})::INTEGER + FLOOR(${n})::INTEGER * ${i}`,value:r}).groupby("index",s)}function Spt(e,t,n,r,i,s){const o=r.column?`* ${r.column}`:"",a=(d,h)=>e.clone().select({xp:t,yp:n,i:d,w:h}),l=a(G`FLOOR(xp)::INTEGER + FLOOR(yp)::INTEGER * ${i}`,G`(FLOOR(xp)::INTEGER + 1 - xp) * (FLOOR(yp)::INTEGER + 1 - yp)${o}`),c=a(G`FLOOR(xp)::INTEGER + (FLOOR(yp)::INTEGER + 1) * ${i}`,G`(FLOOR(xp)::INTEGER + 1 - xp) * (yp - FLOOR(yp)::INTEGER)${o}`),u=a(G`FLOOR(xp)::INTEGER + 1 + FLOOR(yp)::INTEGER * ${i}`,G`(xp - FLOOR(xp)::INTEGER) * (FLOOR(yp)::INTEGER + 1 - yp)${o}`),f=a(G`FLOOR(xp)::INTEGER + 1 + (FLOOR(yp)::INTEGER + 1) * ${i}`,G`(xp - FLOOR(xp)::INTEGER) * (yp - FLOOR(yp)::INTEGER)${o}`);return Ct.from(Ct.unionAll(l,c,u,f)).select({index:"i",value:td("w")},s).groupby("index",s).having(JW("value",0))}function FN(e){const t=Math.floor(e);return t===e?t-1:t}function xpt(e,t,n){var r=1e-8,i=t-1,s=n-1,o=0,a,l,c,u,f,d,h,p,g,v,y;if(e<=0)return 0;if(e>=1)return 1;for(t>=1&&n>=1?(c=e<.5?e:1-e,u=Math.sqrt(-2*Math.log(c)),h=(2.30753+u*.27061)/(1+u*(.99229+u*.04481))-u,e<.5&&(h=-h),p=(h*h-3)/6,g=2/(1/(2*t-1)+1/(2*n-1)),v=h*Math.sqrt(p+g)/g-(1/(2*n-1)-1/(2*t-1))*(p+5/6-2/(3*g)),h=t/(t+n*Math.exp(2*v))):(a=Math.log(t/(t+n)),l=Math.log(n/(t+n)),u=Math.exp(t*a)/t,f=Math.exp(n*l)/n,v=u+f,e<u/v?h=Math.pow(t*v*e,1/t):h=1-Math.pow(n*v*(1-e),1/n)),y=-sf(t)-sf(n)+sf(t+n);o<10;o++){if(h===0||h===1)return h;if(d=Ipt(h,t,n)-e,u=Math.exp(i*Math.log(h)+s*Math.log(1-h)+y),f=d/u,h-=u=f/(1-.5*Math.min(1,f*(i/h-s/(1-h)))),h<=0&&(h=.5*(h+u)),h>=1&&(h=.5*(h+u+1)),Math.abs(u)<r*h&&o>0)break}return h}function Ipt(e,t,n){var r=e===0||e===1?0:Math.exp(sf(t+n)-sf(t)-sf(n)+t*Math.log(e)+n*Math.log(1-e));return e<0||e>1?!1:e<(t+1)/(t+n+2)?r*BN(e,t,n)/t:1-r*BN(1-e,n,t)/n}function BN(e,t,n){var r=1e-30,i=1,s=t+n,o=t+1,a=t-1,l=1,c=1-s*e/o,u,f,d,h;for(Math.abs(c)<r&&(c=r),c=1/c,h=c;i<=100&&(u=2*i,f=i*(n-i)*e/((a+u)*(t+u)),c=1+f*c,Math.abs(c)<r&&(c=r),l=1+f/l,Math.abs(l)<r&&(l=r),c=1/c,h*=c*l,f=-(t+i)*(s+i)*e/((t+u)*(o+u)),c=1+f*c,Math.abs(c)<r&&(c=r),l=1+f/l,Math.abs(l)<r&&(l=r),c=1/c,d=c*l,h*=d,!(Math.abs(d-1)<3e-7));i++);return h}function sf(e){var t=0,n=[76.18009172947146,-86.5053203294167,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18],r=1.000000000190015,i,s,o;for(o=(s=i=e)+5.5,o-=(i+.5)*Math.log(o);t<6;t++)r+=n[t]/++s;return Math.log(2.506628274631*r/i)-o}function Tpt(e,t){var n=xpt(2*Math.min(e,1-e),.5*t,.5);return n=Math.sqrt(t*(1-n)/n),e>.5?n:-n}class Ept extends pd{constructor(t,n){const{ci:r=.95,precision:i=4,...s}=n;super("line",t,s);const o=()=>this.modelFit?this.confidenceBand().update():null;pi(this,"ci",r,o),pi(this,"precision",i,o)}query(t=[]){const n=this.channelField("x").as,r=this.channelField("y").as,i=Array.from(new Set(["stroke","z","fx","fy"].flatMap(s=>{var o;return((o=this.channelField(s))==null?void 0:o.as)||[]})));return Ct.from(super.query(t)).select({intercept:lH(r,n),slope:cH(r,n),n:uH(r,n),ssy:fH(r,n),ssx:dH(r,n),xm:hH(r,n),x0:UM(cp(n).where(Rg(r))),x1:UM(lp(n).where(Rg(r)))}).select(i).groupby(i)}queryResult(t){return this.modelFit=OU(t),this.lineData=this.modelFit.flatMap(n=>Apt(n)),this.confidenceBand()}confidenceBand(){const{ci:t,modelFit:n,precision:r,plot:i}=this,s=i.innerWidth();return this.areaData=t?n.flatMap(o=>Mpt(t,r,o,s)):null,this}plotSpecs(){const{lineData:t,areaData:n,channels:r,ci:i}=this,s={x:"x",y:"y"},o={x:"x",y1:"y1",y2:"y2",fillOpacity:.1};for(const a of r)switch(a.channel){case"x":case"y":case"fill":break;case"stroke":s.stroke=o.fill=wa(a);break;case"strokeOpacity":s.strokeOpacity=wa(a);break;case"fillOpacity":o.fillOpacity=wa(a);break;default:s[a.channel]=o[a.channel]=wa(a);break}return[...i?[{type:"areaY",data:n,options:o}]:[],{type:"line",data:t,options:s}]}}function Apt(e){const{x0:t,x1:n,xm:r,intercept:i,slope:s,n:o,ssx:a,ssy:l,...c}=e;return[{x:t,y:i+t*s,...c},{x:n,y:i+n*s,...c}]}function Mpt(e,t,n,r){const{x0:i,x1:s,xm:o,intercept:a,slope:l,n:c,ssx:u,ssy:f,...d}=n,h=t*(s-i)/r,p=Tpt((1-e)/2,c-2)*Math.sqrt(f/(c-2));return Lr(i,s-h/2,h).concat(s).map(g=>{const v=a+g*l,y=p*Math.sqrt(1/c+(g-o)**2/u);return{x:g,y1:v-y,y2:v+y,...d}})}const $pt=new Set(["frame","axisX","axisY","axisFx","axisFy","gridX","gridY","gridFx","gridFy","hexgrid","graticule","sphere"]);function ct(e,t,n){arguments.length===2&&(n=t,t=$pt.has(e)?null:[{}]);const r=e.startsWith("area")||e.startsWith("line")?Wht:pd;return yE(r,e,t,n)}function yE(e,t,n,r){return i=>{i.addMark(new e(t,n,r))}}function Oc(e,t,n){return r=>{r.addMark(new e(t,n))}}const Npt=(...e)=>ct("area",...e),kpt=(...e)=>ct("areaX",...e),HU=(...e)=>ct("areaY",...e),Dpt=(...e)=>ct("line",...e),Opt=(...e)=>ct("lineX",...e),GU=(...e)=>ct("lineY",...e),Q1=(...e)=>ct("barX",...e),mE=(...e)=>ct("barY",...e),Fpt=(...e)=>ct("cell",...e),Bpt=(...e)=>ct("cellX",...e),Lpt=(...e)=>ct("cellY",...e),Rpt=(...e)=>ct("rect",...e),Cpt=(...e)=>ct("rectX",...e),$o=(...e)=>ct("rectY",...e),tw=(...e)=>ct("dot",...e),Upt=(...e)=>ct("dotX",...e),Ppt=(...e)=>ct("dotY",...e),zpt=(...e)=>ct("circle",...e),jpt=(...e)=>ct("hexagon",...e),Bp=(...e)=>ct("text",...e),Vpt=(...e)=>ct("textX",...e),Ypt=(...e)=>ct("textY",...e),qpt=(...e)=>ct("ruleX",...e),Wpt=(...e)=>ct("ruleY",...e),Hpt=(...e)=>ct("tickX",...e),XU=(...e)=>ct("tickY",...e),Gpt=(...e)=>ct("vector",...e),Xpt=(...e)=>ct("vectoX",...e),Qpt=(...e)=>ct("vectorY",...e),Kpt=(...e)=>ct("spike",...e),Zpt=(...e)=>ct("image",...e),Jpt=(...e)=>yE(jU,"areaX",...e),tyt=(...e)=>yE(jU,"areaY",...e),eyt=(...e)=>Oc(ipt,...e),QU=(...e)=>Oc(cpt,...e),KU=(...e)=>Oc(dpt,...e),Tc=(...e)=>Oc(WU,...e),nyt=(...e)=>Oc(ypt,...e),ZU=(...e)=>Oc(ppt,...e),JU=(...e)=>ct("hexgrid",...e),tP=(...e)=>Oc(Ept,...e),ryt=(...e)=>ct("voronoi",...e),iyt=(...e)=>ct("voronoiMesh",...e),syt=(...e)=>ct("delaunayLink",...e),oyt=(...e)=>ct("delaunayMesh",...e),ayt=(...e)=>ct("hull",...e),lyt=(...e)=>ct("arrow",...e),cyt=(...e)=>ct("link",...e),uyt=(...e)=>ct("frame",...e),fyt=(...e)=>ct("axisX",...e),dyt=(...e)=>ct("axisY",...e),hyt=(...e)=>ct("axisFx",...e),pyt=(...e)=>ct("axisFy",...e),yyt=(...e)=>ct("gridX",...e),myt=(...e)=>ct("gridY",...e),gyt=(...e)=>ct("gridFx",...e),byt=(...e)=>ct("gridFy",...e),eP=(...e)=>ct("geo",...e),nP=(...e)=>ct("sphere",...e),vyt=(...e)=>ct("graticule",...e),wyt=Object.freeze(Object.defineProperty({__proto__:null,area:Npt,areaX:kpt,areaY:HU,arrow:lyt,axisFx:hyt,axisFy:pyt,axisX:fyt,axisY:dyt,barX:Q1,barY:mE,cell:Fpt,cellX:Bpt,cellY:Lpt,circle:zpt,contour:KU,delaunayLink:syt,delaunayMesh:oyt,denseLine:QU,density:eyt,densityX:Jpt,densityY:tyt,dot:tw,dotX:Upt,dotY:Ppt,frame:uyt,geo:eP,graticule:vyt,gridFx:gyt,gridFy:byt,gridX:yyt,gridY:myt,hexagon:jpt,hexbin:ZU,hexgrid:JU,hull:ayt,image:Zpt,line:Dpt,lineX:Opt,lineY:GU,link:cyt,raster:Tc,rasterTile:nyt,rect:Rpt,rectX:Cpt,rectY:$o,regressionY:tP,ruleX:qpt,ruleY:Wpt,sphere:nP,spike:Kpt,text:Bp,textX:Vpt,textY:Ypt,tickX:Hpt,tickY:XU,vector:Gpt,vectorX:Xpt,vectorY:Qpt,voronoi:ryt,voronoiMesh:iyt},Symbol.toStringTag,{value:"Module"}));function _yt(e){const t=e.toLowerCase(),n=e.length;let r="";for(let i=0;i<n;++i)r+=(e[i]!==t[i]?"-":"")+t[i];return r}function gE(e){const t={};for(const n in e)t[_yt(n)]=e[n];return t}class Syt{constructor(t,{selection:n,channels:r={}}){this.mark=t,this.selection=n;const i=Object.entries(gE(r));this.channels=i.length?i:[["opacity",.2]],this.selection.addEventListener("value",WO(()=>this.update()))}init(t){this.svg=t;const n=this.values=[],r=this.mark.index,i=this.nodes=t.querySelectorAll(`[data-index="${r}"] > *`),{channels:s}=this;for(let o=0;o<i.length;++o){const a=i[o];n.push(s.map(l=>a.getAttribute(l[0])))}return this.update()}async update(){const{svg:t,nodes:n,channels:r,values:i,mark:s,selection:o}=this;if(!t)return;const a=await xyt(s,o);for(let l=0;l<n.length;++l){const c=n[l],u=i[l],f=a(c.__data__);for(let d=0;d<r.length;++d){const[h,p]=r[d];c.setAttribute(h,f?u[d]:p)}}}}async function xyt(e,t){var c,u;const n=t==null?void 0:t.predicate(e);if(!n||n.length===0)return()=>!0;const r=(c=e.filterBy)==null?void 0:c.predicate(e,!0),i={__:fc(n)},s=e.query(r),o=s.groupby().length?s.select(i):s.$select(i),a=await en().query(o),l=(u=a.getChild)==null?void 0:u.call(a,"__");return a.numRows||a.length?l?f=>l.get(f):f=>a[f].__:()=>!1}class rP{constructor(t,{selection:n,channels:r,peers:i=!0}){this.value=null,this.mark=t,this.selection=n,this.peers=i,this.channels=r.map(s=>{var a;const o=s==="color"?["fill","stroke"]:s==="x"?["x","x1","x2"]:s==="y"?["y","y1","y2"]:[s];for(let l=0;l<o.length;++l){const c=t.channelField(o[l]);if(c)return{field:((a=c.field)==null?void 0:a.basis)||c.field,as:c.as}}throw new Error(`Missing channel: ${s}`)})}clause(t){const{channels:n,mark:r}=this;let i=null;if(t){const s=t.map(o=>{const a=o.map((l,c)=>tH(n[c].field,oy(l)));return a.length>1?fc(a):a[0]});i=s.length>1?RO(s):s[0]}return{source:this,schema:{type:"point"},clients:this.peers?r.plot.markSet:new Set().add(r),value:t,predicate:i}}init(t,n,r){const{mark:i,channels:s,selection:o}=this,{data:a}=i;r=r||(c=>{const u=a[c.__data__];return s.map(f=>u[f.as])}),n=n||`[data-index="${i.index}"]`;const l=new Set(t.querySelectorAll(n));t.addEventListener("pointerdown",c=>{const u=o.single?o.value:this.value,f=c.target;let d=null;if(Iyt(l,f)){const h=r(f);c.shiftKey&&(u!=null&&u.length)?(d=u.filter(p=>Mx(p,h)),d.length===u.length&&d.push(h)):(u==null?void 0:u.length)===1&&!Mx(u[0],h)?d=null:d=[h]}this.value=d,Tyt(u,d)&&o.update(this.clause(d))}),t.addEventListener("pointerenter",()=>{this.selection.activate(this.clause([this.channels.map(()=>0)]))})}}function Iyt(e,t){var n;return e.has(t)||e.has(t.parentNode)||e.has((n=t.parentNode)==null?void 0:n.parentNode)}function Tyt(e,t){return e==null||t==null?e!=null||t!=null:e.length!==t.length||e.some((n,r)=>Mx(n,t[r]))}function Mx(e,t){const n=e.length;if(t.length!==n)return!0;for(let r=0;r<n;++r)if(e[r]!==t[r])return!0;return!1}function bE(e){const t=e.on;let n=!0;function r(i){n=!1,i(),n=!0}return e.reset=(...i)=>{r(()=>e.clear(...i))},e.moveSilent=(...i)=>{r(()=>e.move(...i))},e.on=(...i)=>{if(i.length>1&&i[1]){const s=i[1];i[1]=(...o)=>n&&s(...o)}return t(...i)},e}function Eyt(){return bE(HZ())}function Ayt(){return bE(qZ())}function Myt(){return bE(WZ())}const LN=1e-12;function $x(e,t){return e===t||e&&t&&Math.abs(e[0]-t[0])<LN&&Math.abs(e[1]-t[1])<LN||!1}function jf(e,t){var r;const n=(r=e.channelField(t))==null?void 0:r.field;return(n==null?void 0:n.basis)||n}function Nx(e,t,n=1){return t.invert(n*Math.floor(e/n))}function iP(){const e=this,t=e.getScreenCTM;let n;e.getScreenCTM=()=>e.isConnected?n=t.call(e):n}class sP{constructor(t,{channel:n,selection:r,field:i,pixelSize:s=1,peers:o=!0,brush:a}){this.mark=t,this.channel=n,this.pixelSize=s||1,this.selection=r,this.peers=o,this.field=i||jf(t,[n,n+"1",n+"2"]),this.style=a&&gE(a),this.brush=n==="y"?Myt():Ayt(),this.brush.on("brush end",({selection:l})=>this.publish(l))}reset(){this.value=void 0,this.g&&this.brush.reset(this.g)}activate(){this.selection.activate(this.clause(this.value||[0,1]))}publish(t){let n;t&&(n=t.map(r=>Nx(r,this.scale,this.pixelSize)).sort((r,i)=>r-i)),$x(n,this.value)||(this.value=n,this.g.call(this.brush.moveSilent,t),this.selection.update(this.clause(n)))}clause(t){const{mark:n,pixelSize:r,field:i,scale:s}=this;return{source:this,schema:{type:"interval",pixelSize:r,scales:[s]},clients:this.peers?n.plot.markSet:new Set().add(n),value:t,predicate:t?jr(i,t):null}}init(t){var c;const{brush:n,channel:r,style:i}=this;this.scale=t.scale(r);const s=t.scale("x").range,o=t.scale("y").range;n.extent([[xn(s),xn(o)],[De(s),De(o)]]);const a=be(t).selectAll('g[aria-label="facet"]'),l=a.size()?a:be(t);if(this.g=l.append("g").attr("class",`interval-${r}`).each(iP).call(n).call(n.moveSilent,(c=this.value)==null?void 0:c.map(this.scale.apply)),i){const u=this.g.selectAll("rect.selection");for(const f in i)u.attr(f,i[f])}t.addEventListener("pointerenter",()=>this.activate())}}const Y0=(e,t)=>e-t;class $yt{constructor(t,{selection:n,xfield:r,yfield:i,pixelSize:s=1,peers:o=!0,brush:a}){this.mark=t,this.pixelSize=s||1,this.selection=n,this.peers=o,this.xfield=r||jf(t,["x","x1","x2"]),this.yfield=i||jf(t,["y","y1","y2"]),this.style=a&&gE(a),this.brush=Eyt(),this.brush.on("brush end",({selection:l})=>this.publish(l))}reset(){this.value=void 0,this.g&&this.brush.reset(this.g)}activate(){this.selection.activate(this.clause(this.value||[[0,1],[0,1]]))}publish(t){const{value:n,pixelSize:r,xscale:i,yscale:s}=this;let o,a;if(t){const[l,c]=t;o=[l[0],c[0]].map(u=>Nx(u,i,r)).sort(Y0),a=[l[1],c[1]].map(u=>Nx(u,s,r)).sort(Y0)}(!$x(o,n==null?void 0:n[0])||!$x(a,n==null?void 0:n[1]))&&(this.value=t?[o,a]:void 0,this.g.call(this.brush.moveSilent,t),this.selection.update(this.clause(this.value)))}clause(t){const{mark:n,pixelSize:r,xfield:i,yfield:s,xscale:o,yscale:a}=this;return{source:this,schema:{type:"interval",pixelSize:r,scales:[o,a]},clients:this.peers?n.plot.markSet:new Set().add(n),value:t,predicate:t?fc(jr(i,t[0]),jr(s,t[1])):null}}init(t){const{brush:n,style:r}=this,i=this.xscale=t.scale("x"),s=this.yscale=t.scale("y"),o=i.range,a=s.range;n.extent([[xn(o),xn(a)],[De(o),De(a)]]);const l=be(t).selectAll('g[aria-label="facet"]'),c=l.size()?l:be(t);if(this.g=c.append("g").attr("class","interval-xy").each(iP).call(n),r){const u=this.g.selectAll("rect.selection");for(const f in r)u.attr(f,r[f])}if(this.value){const[u,f]=this.value[0].map(i.apply).sort(Y0),[d,h]=this.value[1].map(s.apply).sort(Y0);this.g.call(n.moveSilent,[[u,d],[f,h]])}t.addEventListener("pointerenter",()=>this.activate())}}const RN=(e,t)=>e-t;class Nyt{constructor(t,{x:n=new Bs,y:r=new Bs,xfield:i,yfield:s,zoom:o=!0,panx:a=!0,pany:l=!0}){this.mark=t,this.xsel=n,this.ysel=r,this.xfield=i||jf(t,["x","x1","x2"]),this.yfield=s||jf(t,["y","y1","y2"]),this.zoom=z_(o,[0,1/0],[1,1]),this.panx=this.xsel&&a,this.pany=this.ysel&&l;const{plot:c}=t;a&&this.xsel.addEventListener("value",u=>{c.setAttribute("xDomain",u)&&c.update()}),l&&this.ysel.addEventListener("value",u=>{c.setAttribute("yDomain",u)&&c.update()})}publish(t){if(this.panx){const n=kyt(t,this.xscale);this.xsel.update(this.clause(n,this.xfield,this.xscale))}if(this.pany){const n=Dyt(t,this.yscale);this.ysel.update(this.clause(n,this.yfield,this.yscale))}}clause(t,n,r){return{source:this,schema:{type:"interval",scales:[r]},clients:this.mark.plot.markSet,value:t,predicate:t?jr(n,t):null}}init(t){if(this.svg=t,this.initialized)return;this.initialized=!0;const{panx:n,pany:r,mark:{plot:{element:i}},xsel:s,ysel:o}=this;this.xscale=t.scale("x"),this.yscale=t.scale("y");const a=this.xscale.range.slice().sort(RN),l=this.yscale.range.slice().sort(RN),c=z_(n,[-1/0,1/0],a),u=z_(r,[-1/0,1/0],l),f=Prt().extent([[a[0],l[0]],[a[1],l[1]]]).scaleExtent(this.zoom).translateExtent([[c[0],u[0]],[c[1],u[1]]]).on("start",()=>{this.xscale=this.svg.scale("x"),this.yscale=this.svg.scale("y")}).on("end",()=>i.__zoom=new Is(1,0,0)).on("zoom",({transform:d})=>this.publish(d));if(be(i).call(f),n||r){let d=!1;i.addEventListener("mouseenter",()=>{if(!d){if(d=!0,n){const{xscale:h,xfield:p}=this;s.activate(this.clause(h.domain,p,h))}if(r){const{yscale:h,yfield:p}=this;o.activate(this.clause(h.domain,p,h))}}}),i.addEventListener("mouseleave",()=>d=!1)}}}function z_(e,t,n){return e?Array.isArray(e)?e:t:n}function kyt(e,t){return t.range.map(e.invertX,e).map(t.invert,t)}function Dyt(e,t){return t.range.map(e.invertY,e).map(t.invert,t)}class oP{constructor(t,{selection:n,channel:r,field:i}){this.mark=t,this.selection=n,this.clients=new Set().add(t),this.channel=r,this.field=i||jf(t,[r])}clause(t){const{clients:n,field:r}=this,i=t?a3(r,oy(t)):null;return{source:this,schema:{type:"point"},clients:n,value:t,predicate:i}}init(t){const n=this,{mark:r,channel:i,selection:s}=this,{data:o}=r,a=r.channelField(i).as,l=be(t).selectAll('g[aria-label="facet"]'),c=l.size()?l:be(t),u=t.scale(i),f=!dc(s);c.on("pointerdown pointermove",function(d){const[h,p]=ki(d,this),g=Oyt(o,a,u.invert(i==="x"?h:p));s.update(f?g:n.clause(g))}),!f&&t.addEventListener("pointerenter",()=>{this.selection.activate(this.clause(0))})}}function Oyt(e,t,n){let r=1/0,i;return e.forEach(s=>{const o=Math.abs(s[t]-n);o<r&&(r=o,i=s[t])}),i}function yl(e,t){return n=>{const r=n.marks[n.marks.length-1];n.addInteractor(new e(r,t))}}function K1({by:e,...t}){return yl(Syt,{selection:e,channels:t})}function ew({as:e,...t}){return yl(rP,{...t,selection:e})}function aP(e){return ew({...e,channels:["x"]})}function lP(e){return ew({...e,channels:["y"]})}function Fyt(e){return ew({...e,channels:["color"]})}function Byt({as:e,...t}){return yl(oP,{...t,selection:e,channel:"x"})}function Lyt({as:e,...t}){return yl(oP,{...t,selection:e,channel:"y"})}function Ds({as:e,...t}){return yl(sP,{...t,selection:e,channel:"x"})}function Ryt({as:e,...t}){return yl(sP,{...t,selection:e,channel:"y"})}function Lp({as:e,...t}){return yl($yt,{...t,selection:e})}function yd(e){return yl(Nyt,e)}function Cyt(e={}){return yd({...e,zoom:!1})}function Uyt(e={}){return yd({...e,zoom:!1,pany:!1})}function Pyt(e={}){return yd({...e,zoom:!1,panx:!1})}function zyt(e={}){return yd(e)}function jyt(e={}){return yd({...e,pany:!1})}function Vyt(e={}){return yd({...e,panx:!1})}const Yyt=Object.freeze(Object.defineProperty({__proto__:null,highlight:K1,intervalX:Ds,intervalXY:Lp,intervalY:Ryt,nearestX:Byt,nearestY:Lyt,pan:Cyt,panX:Uyt,panY:Pyt,panZoom:zyt,panZoomX:jyt,panZoomY:Vyt,toggle:ew,toggleColor:Fyt,toggleX:aP,toggleY:lP},Symbol.toStringTag,{value:"Module"}));class CN{constructor(t,n){const{as:r,...i}=n;this.channel=t,this.options={label:null,...i},this.selection=r,this.element=document.createElement("div"),this.element.setAttribute("class","legend"),this.element.value=this}setPlot(t){const{channel:n,selection:r}=this,i=qyt(t,n);this.selection&&i&&(this.handler=new rP(i,{selection:r,channels:[n]}),this.selection.addEventListener("value",()=>this.update()))}init(t){const{channel:n,options:r,handler:i}=this,o=t.scale(n).type==="ordinal"?r:{marginTop:1,tickSize:2,height:28,...r};return this.legend=t.legend(n,o),i&&(i.init(this.legend,":scope > div",a=>[a.__data__]),this.update()),this.element.replaceChildren(this.legend),this.element}update(){if(!this.legend)return;const{value:t}=this.selection,n=t&&t.length?new Set(t.map(i=>i[0])):null,r=this.legend.querySelectorAll(":scope > div");for(const i of r){const s=n?n.has(i.__data__):!0;i.style.opacity=s?1:.2}}}function qyt({marks:e},t){const n=t==="color"?["fill","stroke"]:t==="opacity"?["opacity","fillOpacity","strokeOpacity"]:null;if(n==null)return null;for(let r=e.length-1;r>-1;--r)if(e[r].channelField(n))return e[r];return null}function vE(e,t={}){if(t.for){const{for:n,...r}=t,i=new CN(e,r),s=typeof n,o=a=>a.addLegend(i,!1);return s==="string"?SU.request(n,o):n.value&&o(n.value),i.element}else return n=>n.addLegend(new CN(e,t))}const cP=e=>vE("color",e),Wyt=e=>vE("opacity",e),Hyt=e=>vE("symbol",e),Gyt=Object.freeze(Object.defineProperty({__proto__:null,colorLegend:cP,opacityLegend:Wyt,symbolLegend:Hyt},Symbol.toStringTag,{value:"Module"}));function uP({direction:e="vertical",wrap:t=!1},n){const r=document.createElement("div");return r.style.display="flex",r.style.flexDirection=e==="vertical"?"column":"row",r.style.flexWrap=t?t===!0?"wrap":t:"nowrap",r.style.justifyContent="flex-start",r.style.alignItems="flex-start",n.forEach(i=>r.appendChild(i)),r.value={element:r},r}function ml(...e){return uP({direction:"vertical"},e.flat())}function Qa(...e){return uP({direction:"horizontal"},e.flat())}function fP({dim:e="width",size:t=10}){const n=document.createElement("span");n.style.display="inline-block",n.style[e]=Number.isNaN(+t)?t:`${t}px`;const r={element:n};return n.value=r,n}function dP(e){return fP({dim:"height",size:e})}function Z1(e){return fP({dim:"width",size:e})}function Xyt(e){return e}function Qyt(e){if(e==null)return Xyt;var t,n,r=e.scale[0],i=e.scale[1],s=e.translate[0],o=e.translate[1];return function(a,l){l||(t=n=0);var c=2,u=a.length,f=new Array(u);for(f[0]=(t+=a[0])*r+s,f[1]=(n+=a[1])*i+o;c<u;)f[c]=a[c],++c;return f}}function Kyt(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function Zyt(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return UN(e,n)})}:UN(e,t)}function UN(e,t){var n=t.id,r=t.bbox,i=t.properties==null?{}:t.properties,s=Jyt(e,t);return n==null&&r==null?{type:"Feature",properties:i,geometry:s}:r==null?{type:"Feature",id:n,properties:i,geometry:s}:{type:"Feature",id:n,bbox:r,properties:i,geometry:s}}function Jyt(e,t){var n=Qyt(e.transform),r=e.arcs;function i(u,f){f.length&&f.pop();for(var d=r[u<0?~u:u],h=0,p=d.length;h<p;++h)f.push(n(d[h],h));u<0&&Kyt(f,p)}function s(u){return n(u)}function o(u){for(var f=[],d=0,h=u.length;d<h;++d)i(u[d],f);return f.length<2&&f.push(f[0]),f}function a(u){for(var f=o(u);f.length<4;)f.push(f[0]);return f}function l(u){return u.map(a)}function c(u){var f=u.type,d;switch(f){case"GeometryCollection":return{type:f,geometries:u.geometries.map(c)};case"Point":d=s(u.coordinates);break;case"MultiPoint":d=u.coordinates.map(s);break;case"LineString":d=o(u.arcs);break;case"MultiLineString":d=u.arcs.map(o);break;case"Polygon":d=l(u.arcs);break;case"MultiPolygon":d=u.arcs.map(l);break;default:return null}return{type:f,coordinates:d}}return c(t)}const t0t={menu:sG,search:cG,slider:uS,table:eF};new Map(Object.entries(wyt));new Map(Object.entries(t0t));new Map(Object.entries(Gyt));new Map(Object.entries(Bht));new Map(Object.entries(Yyt));const e0t="https://app.motherduck.com",n0t="WASM Client Library Example: Mosaic Integration";function r0t({connect:e}){const[t,n]=An.useState(null),[r,i]=An.useState(!1),s=An.useCallback(c=>{n(c.target.value)},[]),o=An.useCallback(()=>{const c=new URL(window.location.href);c.searchParams.set("tokenInClipboard","y"),window.location.href=`${e0t}/token-request?appName=${encodeURIComponent(n0t)}&returnTo=${encodeURIComponent(c.toString())}`},[]),a=An.useCallback(()=>{if(t){const c=new URL(window.location.href);c.searchParams.get("tokenInClipboard")&&(c.searchParams.delete("tokenInClipboard"),history.pushState({},"",c)),e(t)}},[e,t]);An.useEffect(()=>{async function c(){const u=new URL(window.location.href);if(u.searchParams.get("tokenInClipboard")){if(navigator.clipboard.readText){const f=await navigator.clipboard.readText();if(f){u.searchParams.delete("tokenInClipboard"),history.pushState({},"",u),e(f);return}}i(!0)}}c()},[e]);const l=An.useCallback(c=>{c&&c.focus()},[]);return Ut.jsxs("div",{id:"connect-pane",children:[Ut.jsx("div",{id:"token-in-clipboard-note",style:{visibility:r?"visible":"hidden"},children:"Your token is in the clipboard. Paste it and click Connect."}),Ut.jsx("div",{id:"token-input-row",children:Ut.jsx("input",{ref:l,id:"token-input",type:"password",placeholder:"Paste MotherDuck Service Token Here",onChange:s})}),Ut.jsxs("div",{id:"connect-button-row",children:[Ut.jsx("button",{id:"get-token-button",onClick:o,children:"Get Token"}),Ut.jsx("button",{id:"connect-button",disabled:!t,onClick:a,children:"Connect"})]})]})}const i0t="assets/motherduck_logo-X5yv95Gl.svg";function s0t(){return Ut.jsxs("div",{id:"header",children:[Ut.jsx("div",{id:"title",children:Ut.jsx("a",{href:"https://motherduck.com",target:"_blank",children:Ut.jsx("img",{src:i0t,alt:"MotherDuck logo"})})}),Ut.jsxs("div",{id:"subtitle",children:["WASM Client Example:",Ut.jsx("a",{href:"https://uwdata.github.io/mosaic/",target:"_blank",children:"Mosaic"}),"Integration"]})]})}class o0t{async initialize(){await en().exec(`create temp table if not exists complaints as 
        select year(created_date)::int as Year, count(*)::int as Complaints
        from sample_data.nyc.service_requests
        where Year < 2023
        and agency_name = 'New York City Police Department'
        group by 1
        order by 1;`),await en().exec(`create temp table if not exists complaints_details as
        select year(created_date)::int as Year, complaint_type as Type, count(*)::int as Complaints
        from sample_data.nyc.service_requests
        where Year < 2023
        and agency_name = 'New York City Police Department'
        group by 1, 2
        order by 1, 3 desc;`)}render(){const t=Bs.single();return ml(pe(mE(se("complaints"),{x:"Year",y:"Complaints",fill:"steelblue"}),K1({by:t}),aP({as:t}),Zv("d"),G1(!0),Oa("s")),eF({from:"complaints_details",filterBy:t,format:{Year:n=>String(n)},width:{Year:80,Type:400,Complaints:100},height:400}))}}const is=[Dp(null),Op(null),TU({left:5,top:5,right:5,bottom:5}),wn(160),$n(100),Da([0,9])];class a0t{async initialize(){await en().exec(bH("md",[{i:0,u:"A",v:2},{i:1,u:"B",v:8},{i:2,u:"C",v:3},{i:3,u:"D",v:7},{i:4,u:"E",v:5},{i:5,u:"F",v:4},{i:6,u:"G",v:6},{i:7,u:"H",v:1}]))}render(){return ml(Qa(pe(mE(se("md"),{x:"u",y:"v",fill:"steelblue"}),...is),pe(GU(se("md"),{x:"u",y:"v",stroke:"steelblue",curve:"monotone-x",marker:"circle"}),...is),pe(Bp(se("md"),{x:"u",y:"v",text:"u",fill:"steelblue"}),...is),pe(XU(se("md"),{x:"u",y:"v",stroke:"steelblue"}),...is),pe(HU(se("md"),{x:"u",y:"v",fill:"steelblue"}),...is)),Qa(pe(tw(se("md"),{x:"i",y:"v",fill:"currentColor",r:1.5}),tP(se("md"),{x:"i",y:"v",stroke:"steelblue"}),...is,Jn([-.5,7.5])),pe(JU({stroke:"#aaa",strokeOpacity:.5}),ZU(se("md"),{x:"i",y:"v",fill:Sn()}),...is,Mo("blues"),Jn([-1,8])),pe(KU(se("md"),{x:"i",y:"v",stroke:"steelblue",bandwidth:15}),...is,Jn([-1,8])),pe(Tc(se("md"),{x:"i",y:"v",fill:"density",bandwidth:15}),...is,Mo("blues"),Jn([-1,8])),pe(QU(se("md"),{x:"i",y:"v",fill:"density",bandwidth:2,binWidth:1}),...is,Mo("blues"),Jn([-1,8]))))}}class l0t{async initialize(){await en().exec(`CREATE TEMP VIEW IF NOT EXISTS gaia_viz AS -- compute u and v with natural earth projection
      WITH prep AS (
        SELECT
          radians((-l + 540) % 360 - 180) AS lambda,
          radians(b) AS phi,
          asin(sqrt(3)/2 * sin(phi)) AS t,
          t^2 AS t2,
          t2^3 AS t6,
          *
        FROM mosaic_examples.main.gaia_5m
      )
      SELECT
        (1.340264 * lambda * cos(t)) / (sqrt(3)/2 * (1.340264 + (-0.081106 * 3 * t2) + (t6 * (0.000893 * 7 + 0.003796 * 9 * t2)))) AS u,
        t * (1.340264 + (-0.081106 * t2) + (t6 * (0.000893 + 0.003796 * t2))) AS v,
        * EXCLUDE('t', 't2', 't6')
      FROM prep
      WHERE parallax BETWEEN -5 AND 20`)}render(){const t=Bs.crossfilter(),n=rr.value(0),r=rr.value(2),i=rr.value("sqrt");return Qa(ml(pe(Tc(se("gaia_viz",{filterBy:t}),{x:"u",y:"v",fill:"density",bandwidth:n,binWidth:r,binType:"normal"}),Lp({pixelSize:2,as:t}),q1(Br),xx(i),Mo("viridis"),wn(440),$n(250),Cu(25),H1(20),_x(1)),Qa(pe($o(se("gaia_viz",{filterBy:t}),{x:ka("phot_g_mean_mag"),y:Sn(),fill:"steelblue",inset:.5}),Ds({as:t}),Jn(Br),Sx(i),G1(!0),wn(220),$n(120),Cu(65)),pe($o(se("gaia_viz",{filterBy:t}),{x:ka("parallax"),y:Sn(),fill:"steelblue",inset:.5}),Ds({as:t}),Jn(Br),Sx(i),G1(!0),wn(220),$n(120),Cu(65)))),Z1(10),pe(Tc(se("gaia_viz",{filterBy:t}),{x:"bp_rp",y:"phot_g_mean_mag",fill:"density",bandwidth:n,binWidth:r,binType:"normal"}),Lp({pixelSize:2,as:t}),q1(Br),xx(i),Mo("viridis"),MU(!0),wn(230),$n(370),Cu(25),H1(20),_x(1)))}}const c0t="assets/countries-110m-MkhAC_yf.json";class u0t{constructor(){te(this,"land",null)}async initialize(){this.land=await fetch(c0t).then(t=>t.json()).then(t=>{if(t.objects.land.type!=="GeometryCollection")throw Error("unexpected geojson type");return Zyt(t,t.objects.land).features})}render(){const t=rr.value(-180),n=rr.value(-30),r=rr.array([t,n]);return ml(Qa(uS({label:"Longitude",as:t,min:-180,max:180,step:1}),uS({label:"Latitude",as:n,min:-90,max:90,step:1})),pe(eP(this.land,{fill:"currentColor",fillOpacity:.2}),nP(),tw(se("mosaic_examples.main.earthquakes"),{x:"longitude",y:"latitude",r:G`POW(10, magnitude)`,stroke:"red",fill:"red",fillOpacity:.2}),EU("overflow: visible;"),kU("orthographic"),DU(r)))}}class f0t{async initialize(){await en().exec("CREATE TEMP TABLE IF NOT EXISTS weather AS SELECT * FROM mosaic_examples.main.seattle_weather")}render(){const t=Bs.single(),n=rr.array(["sun","fog","drizzle","rain","snow"]),r=rr.array(["#e7ba52","#a7a7a7","#aec7e8","#1f77b4","#9467bd"]),i=Bs.intersect();return ml(Qa(pe(tw(se("weather",{filterBy:t}),{x:yH("date"),y:"temp_max",fill:"weather",r:"precipitation",fillOpacity:.7}),Ds({as:i,brush:{fill:"none",stroke:"#888"}}),K1({by:i,fill:"#ccc",fillOpacity:.2}),cP({as:t,columns:1}),q1(Br),Zv("%b"),Fp(n),Ix(r),$U(Br),NU([2,10]),wn(680),$n(300))),pe(Q1(se("weather"),{x:Sn(),y:"weather",fill:"#ccc",fillOpacity:.2}),Q1(se("weather",{filterBy:i}),{x:Sn(),y:"weather",fill:"weather",order:"weather"}),lP({as:t}),K1({by:t}),Jn(Br),Da(n),dE(null),Fp(n),Ix(r),wn(680)))}}const PN="flights_200k_viz",zN="flights_10m_viz";class jN{constructor(t="flights_200k"){te(this,"flightsTableName");te(this,"vizTable",null);this.flightsTableName=t}async initialize(){const t=`mosaic_examples.main.${this.flightsTableName}`;this.flightsTableName==="flights_10m"?(await en().exec(`
      create temp view if not exists ${zN} as
      select GREATEST(-60, LEAST(ARR_DELAY, 180))::DOUBLE AS delay, DISTANCE AS distance, DEP_TIME AS time
      from ${t}
      `),this.vizTable=zN):(await en().exec(`
      create temp view if not exists ${PN} as
      select *
      from ${t}
      `),this.vizTable=PN)}render(){const t=Bs.crossfilter();return ml(pe($o(se(this.vizTable,{filterBy:t}),{x:ka("delay"),y:Sn(),fill:"steelblue",inset:.5}),Ds({as:t}),Jn(Br),Oa("s"),wn(600),$n(200)),pe($o(se(this.vizTable,{filterBy:t}),{x:ka("time"),y:Sn(),fill:"steelblue",inset:.5}),Ds({as:t}),Jn(Br),Oa("s"),wn(600),$n(200)),pe($o(se(this.vizTable,{filterBy:t}),{x:ka("distance"),y:Sn(),fill:"steelblue",inset:.5}),Ds({as:t}),Jn(Br),Oa("s"),wn(600),$n(200)))}}class d0t{async initialize(){await en().exec("INSTALL spatial"),await en().exec("LOAD spatial"),await en().exec(`
    CREATE TABLE IF NOT EXISTS fsq_places_by_year_nyc AS
      WITH dates_location AS
        (
          SELECT
            date_created::TIMESTAMP AS date_created,
            date_closed::TIMESTAMP AS date_closed,
            ST_Transform(ST_Point(latitude, longitude), 'EPSG:4326', 'ESRI:102718') AS location,
            list_any_value(fsq_category_labels) as label
            FROM foursquare_places
            WHERE locality='New York'
        )
        SELECT
          YEAR(date_created) AS created,
          YEAR(date_closed) AS closed,
          ST_X(location) AS x,
          ST_Y(location) AS y,
          label,
          level1_category_name,
          level2_category_name
        FROM dates_location dl
        JOIN foursquare_categories cat
        ON dl.label = cat.category_label
    `),await en().exec(`
    CREATE TEMP TABLE IF NOT EXISTS fsq_places AS
      SELECT * FROM fsq_places_by_year_nyc
      WHERE
        x > 900000
        AND x < 1100000
        AND y > 100000
        AND y < 400000
    `)}render(){const t=Bs.crossfilter(),n=rr.array(["Arts and Entertainment","Business and Professional Services","Community and Government","Dining and Drinking","Event","Health and Medicine","Landmarks and Outdoors","Retail","Sports and Recreation","Travel and Transportation"]);return ml(Qa(pe(Tc(se("fsq_places",{filterBy:t}),{x:"x",y:"y",bandwidth:0}),Bp([{label:"Places of interest in NYC"}],{dx:10,dy:10,text:"label",fill:"black",fontSize:"1.2em",frameAnchor:"top-left"}),wn(335),$n(550),W1(0),Dp(null),Op(null),Jn([975e3,1005e3]),Da([19e4,24e4]),Mo("blues")),dP(10),pe(Q1(se("fsq_places",{filterBy:t}),{x:Sn(),y:"level1_category_name",fill:"level1_category_name"}),Fp(Br),dE("Level 1 category"),Zv("s"),Lh("count"),Da(n),Fp(n),wn(680),$n(550),H1(5),Cu(220),AU(35))),Z1(10),pe($o(se("fsq_places"),{x:ka("created"),y:Sn(),fill:"steelblue",inset:.5}),Ds({as:t}),Oa("s"),Lh("Year created "),wn(680),$n(100)),Z1(10),pe($o(se("fsq_places"),{x:ka("closed"),y:Sn(),fill:"steelblue",inset:.5}),Da([0,1e4]),Ds({as:t}),Oa("s"),Lh("Year closed "),wn(680),$n(100)))}}class h0t{async initialize(){await en().exec("INSTALL spatial"),await en().exec("LOAD spatial"),await en().exec(`CREATE TABLE IF NOT EXISTS trips AS
        WITH rides AS (
          SELECT
            pickup_datetime::TIMESTAMP AS datetime,
            ST_Transform(ST_Point(pickup_latitude, pickup_longitude), 'EPSG:4326', 'ESRI:102718') AS pick,
            ST_Transform(ST_Point(dropoff_latitude, dropoff_longitude), 'EPSG:4326', 'ESRI:102718') AS drop
            from 'https://idl.uw.edu/mosaic-datasets/data/nyc-rides-2010.parquet'
        )
        SELECT
          (HOUR(datetime) + MINUTE(datetime)/60) AS time,
          ST_X(pick) AS px, ST_Y(pick) AS py,
          ST_X(drop) AS dx, ST_Y(drop) AS dy
        FROM rides`)}render(){const t=Bs.crossfilter();return ml(Qa(pe(Tc(se("trips",{filterBy:t}),{x:"px",y:"py",bandwidth:0}),Lp({as:t}),Bp([{label:"Taxi Pickups"}],{dx:10,dy:10,text:"label",fill:"black",fontSize:"1.2em",frameAnchor:"top-left"}),wn(335),$n(550),W1(0),Dp(null),Op(null),Jn([975e3,1005e3]),Da([19e4,24e4]),Mo("blues")),Z1(10),pe(Tc(se("trips",{filterBy:t}),{x:"dx",y:"dy",bandwidth:0}),Lp({as:t}),Bp([{label:"Taxi Dropoffs"}],{dx:10,dy:10,text:"label",fill:"black",fontSize:"1.2em",frameAnchor:"top-left"}),wn(335),$n(550),W1(0),Dp(null),Op(null),Jn([975e3,1005e3]),Da([19e4,24e4]),Mo("oranges"))),dP(10),pe($o(se("trips"),{x:ka("time"),y:Sn(),fill:"steelblue",inset:.5}),Ds({as:t}),Oa("s"),Lh("Pickup Hour "),wn(680),$n(100)))}}const hP={"Mark Types":new a0t,"NYPD Complaints":new o0t,Earthquakes:new u0t,"Seattle Weather":new f0t,"Flights 200K":new jN("flights_200k"),"Flights 10M":new jN("flights_10m"),"Gaia Star Catalog":new l0t,"NYC Rides":new h0t,"Foursquare Places":new d0t},VN=Object.keys(hP);function p0t(){const[e,t]=An.useState(null),[n,r]=An.useState(null),[i,s]=An.useState(VN[0]),o=An.useCallback(a=>{s(a.target.value)},[]);return An.useEffect(()=>{(async()=>{if(n){const a=hP[i];t(null),n.innerHTML="Loading, please wait";try{await a.initialize(),n.innerHTML="",n.appendChild(a.render())}catch(l){const c=String(l);n.innerHTML=c,/Catalog "sample_data" does not exist!/.test(c)?t("sample_data"):/Catalog "mosaic_examples" does not exist!/.test(c)&&t("mosaic_examples")}}})()},[i,n]),Ut.jsxs("div",{id:"vizzes-pane",children:[Ut.jsx("div",{id:"selector-pane",children:Ut.jsx("select",{id:"viz-selector",value:i,onChange:o,children:VN.map(a=>Ut.jsx("option",{children:a},a))})}),Ut.jsx("div",{id:"viz-pane",ref:r}),e==="sample_data"?Ut.jsxs("div",{id:"help-pane",children:[Ut.jsxs("div",{children:["This example requires the ",Ut.jsx("span",{className:"code",children:"sample_data"})," share."]}),Ut.jsx("div",{children:"To attach it to your account, run:"}),Ut.jsx("pre",{children:"ATTACH 'md:_share/sample_data/23b0d623-1361-421d-ae77-62d701d471e6';"})]}):null,e==="mosaic_examples"?Ut.jsxs("div",{id:"help-pane",children:[Ut.jsxs("div",{children:["This example requires the ",Ut.jsx("span",{className:"code",children:"mosaic_examples"})," share."]}),Ut.jsx("div",{children:"To attach it to your account, run:"}),Ut.jsx("pre",{children:"ATTACH 'md:_share/mosaic_examples/b01cfda8-239e-4148-a228-054b94cdc3b4';"})]}):null]})}const y0t=new TextDecoder("utf-8"),kx=e=>y0t.decode(e),m0t=new TextEncoder,wE=e=>m0t.encode(e),g0t=e=>typeof e=="number",pP=e=>typeof e=="boolean",cn=e=>typeof e=="function",Ar=e=>e!=null&&Object(e)===e,Ec=e=>Ar(e)&&cn(e.then),Py=e=>Ar(e)&&cn(e[Symbol.iterator]),md=e=>Ar(e)&&cn(e[Symbol.asyncIterator]),Dx=e=>Ar(e)&&Ar(e.schema),yP=e=>Ar(e)&&"done"in e&&"value"in e,mP=e=>Ar(e)&&cn(e.stat)&&g0t(e.fd),gP=e=>Ar(e)&&_E(e.body),nw=e=>"_getDOMStream"in e&&"_getNodeStream"in e,b0t=e=>Ar(e)&&cn(e.abort)&&cn(e.getWriter)&&!nw(e),_E=e=>Ar(e)&&cn(e.cancel)&&cn(e.getReader)&&!nw(e),v0t=e=>Ar(e)&&cn(e.end)&&cn(e.write)&&pP(e.writable)&&!nw(e),bP=e=>Ar(e)&&cn(e.read)&&cn(e.pipe)&&pP(e.readable)&&!nw(e),w0t=e=>Ar(e)&&cn(e.clear)&&cn(e.bytes)&&cn(e.position)&&cn(e.setPosition)&&cn(e.capacity)&&cn(e.getBufferIdentifier)&&cn(e.createLong),SE=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function _0t(e){const t=e[0]?[e[0]]:[];let n,r,i,s;for(let o,a,l=0,c=0,u=e.length;++l<u;){if(o=t[c],a=e[l],!o||!a||o.buffer!==a.buffer||a.byteOffset<o.byteOffset){a&&(t[++c]=a);continue}if({byteOffset:n,byteLength:i}=o,{byteOffset:r,byteLength:s}=a,n+i<r||r+s<n){a&&(t[++c]=a);continue}t[c]=new Uint8Array(o.buffer,n,r-n+s)}return t}function YN(e,t,n=0,r=t.byteLength){const i=e.byteLength,s=new Uint8Array(e.buffer,e.byteOffset,i),o=new Uint8Array(t.buffer,t.byteOffset,Math.min(r,i));return s.set(o,n),e}function Cs(e,t){const n=_0t(e),r=n.reduce((u,f)=>u+f.byteLength,0);let i,s,o,a=0,l=-1;const c=Math.min(t||Number.POSITIVE_INFINITY,r);for(const u=n.length;++l<u;){if(i=n[l],s=i.subarray(0,Math.min(i.length,c-a)),c<=a+s.length){s.length<i.length?n[l]=i.subarray(s.length):s.length===i.length&&l++,o?YN(o,s,a):o=s;break}YN(o||(o=new Uint8Array(c)),s,a),a+=s.length}return[o||new Uint8Array(0),n.slice(l),r-(o?o.byteLength:0)]}function de(e,t){let n=yP(t)?t.value:t;return n instanceof e?e===Uint8Array?new e(n.buffer,n.byteOffset,n.byteLength):n:n?(typeof n=="string"&&(n=wE(n)),n instanceof ArrayBuffer?new e(n):n instanceof SE?new e(n):w0t(n)?de(e,n.bytes()):ArrayBuffer.isView(n)?n.byteLength<=0?new e(0):new e(n.buffer,n.byteOffset,n.byteLength/e.BYTES_PER_ELEMENT):e.from(n)):new e(0)}const zd=e=>de(Int32Array,e),qN=e=>de(BigInt64Array,e),jt=e=>de(Uint8Array,e),Ox=e=>(e.next(),e);function*S0t(e,t){const n=function*(i){yield i},r=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof SE?n(t):Py(t)?t:n(t);return yield*Ox(function*(i){let s=null;do s=i.next(yield de(e,s));while(!s.done)}(r[Symbol.iterator]())),new e}const x0t=e=>S0t(Uint8Array,e);function vP(e,t){return on(this,arguments,function*(){if(Ec(t))return yield K(yield K(yield*$a(Pr(vP(e,yield K(t))))));const r=function(o){return on(this,arguments,function*(){yield yield K(yield K(o))})},i=function(o){return on(this,arguments,function*(){yield K(yield*$a(Pr(Ox(function*(a){let l=null;do l=a.next(yield l==null?void 0:l.value);while(!l.done)}(o[Symbol.iterator]())))))})},s=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof SE?r(t):Py(t)?i(t):md(t)?t:r(t);return yield K(yield*$a(Pr(Ox(function(o){return on(this,arguments,function*(){let a=null;do a=yield K(o.next(yield yield K(de(e,a))));while(!a.done)})}(s[Symbol.asyncIterator]()))))),yield K(new e)})}const I0t=e=>vP(Uint8Array,e);function wP(e,t,n){if(e!==0){n=n.slice(0,t);for(let r=-1,i=n.length;++r<i;)n[r]+=e}return n.subarray(0,t)}function T0t(e,t){let n=0;const r=e.length;if(r!==t.length)return!1;if(r>0)do if(e[n]!==t[n])return!1;while(++n<r);return!0}const ni={fromIterable(e){return q0(E0t(e))},fromAsyncIterable(e){return q0(A0t(e))},fromDOMStream(e){return q0(M0t(e))},fromNodeStream(e){return q0(N0t(e))},toDOMStream(e,t){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(e,t){throw new Error('"toNodeStream" not available in this environment')}},q0=e=>(e.next(),e);function*E0t(e){let t,n=!1,r=[],i,s,o,a=0;function l(){return s==="peek"?Cs(r,o)[0]:([i,r,a]=Cs(r,o),i)}({cmd:s,size:o}=(yield null)||{cmd:"read",size:0});const c=x0t(e)[Symbol.iterator]();try{do if({done:t,value:i}=Number.isNaN(o-a)?c.next():c.next(o-a),!t&&i.byteLength>0&&(r.push(i),a+=i.byteLength),t||o<=a)do({cmd:s,size:o}=yield l());while(o<a);while(!t)}catch(u){(n=!0)&&typeof c.throw=="function"&&c.throw(u)}finally{n===!1&&typeof c.return=="function"&&c.return(null)}return null}function A0t(e){return on(this,arguments,function*(){let n,r=!1,i=[],s,o,a,l=0;function c(){return o==="peek"?Cs(i,a)[0]:([s,i,l]=Cs(i,a),s)}({cmd:o,size:a}=(yield yield K(null))||{cmd:"read",size:0});const u=I0t(e)[Symbol.asyncIterator]();try{do if({done:n,value:s}=Number.isNaN(a-l)?yield K(u.next()):yield K(u.next(a-l)),!n&&s.byteLength>0&&(i.push(s),l+=s.byteLength),n||a<=l)do({cmd:o,size:a}=yield yield K(c()));while(a<l);while(!n)}catch(f){(r=!0)&&typeof u.throw=="function"&&(yield K(u.throw(f)))}finally{r===!1&&typeof u.return=="function"&&(yield K(u.return(new Uint8Array(0))))}return yield K(null)})}function M0t(e){return on(this,arguments,function*(){let n=!1,r=!1,i=[],s,o,a,l=0;function c(){return o==="peek"?Cs(i,a)[0]:([s,i,l]=Cs(i,a),s)}({cmd:o,size:a}=(yield yield K(null))||{cmd:"read",size:0});const u=new $0t(e);try{do if({done:n,value:s}=Number.isNaN(a-l)?yield K(u.read()):yield K(u.read(a-l)),!n&&s.byteLength>0&&(i.push(jt(s)),l+=s.byteLength),n||a<=l)do({cmd:o,size:a}=yield yield K(c()));while(a<l);while(!n)}catch(f){(r=!0)&&(yield K(u.cancel(f)))}finally{r===!1?yield K(u.cancel()):e.locked&&u.releaseLock()}return yield K(null)})}class $0t{constructor(t){this.source=t,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(t){return W(this,void 0,void 0,function*(){const{reader:n,source:r}=this;n&&(yield n.cancel(t).catch(()=>{})),r&&r.locked&&this.releaseLock()})}read(t){return W(this,void 0,void 0,function*(){if(t===0)return{done:this.reader==null,value:new Uint8Array(0)};const n=yield this.reader.read();return!n.done&&(n.value=jt(n)),n})}}const j_=(e,t)=>{const n=i=>r([t,i]);let r;return[t,n,new Promise(i=>(r=i)&&e.once(t,n))]};function N0t(e){return on(this,arguments,function*(){const n=[];let r="error",i=!1,s=null,o,a,l=0,c=[],u;function f(){return o==="peek"?Cs(c,a)[0]:([u,c,l]=Cs(c,a),u)}if({cmd:o,size:a}=(yield yield K(null))||{cmd:"read",size:0},e.isTTY)return yield yield K(new Uint8Array(0)),yield K(null);try{n[0]=j_(e,"end"),n[1]=j_(e,"error");do{if(n[2]=j_(e,"readable"),[r,s]=yield K(Promise.race(n.map(h=>h[2]))),r==="error")break;if((i=r==="end")||(Number.isFinite(a-l)?(u=jt(e.read(a-l)),u.byteLength<a-l&&(u=jt(e.read()))):u=jt(e.read()),u.byteLength>0&&(c.push(u),l+=u.byteLength)),i||a<=l)do({cmd:o,size:a}=yield yield K(f()));while(a<l)}while(!i)}finally{yield K(d(n,r==="error"?s:null))}return yield K(null);function d(h,p){return u=c=null,new Promise((g,v)=>{for(const[y,m]of h)e.off(y,m);try{const y=e.destroy;y&&y.call(e,p),p=void 0}catch(y){p=y||p}finally{p!=null?v(p):g()}})}})}var Je;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(Je||(Je={}));var an;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(an||(an={}));var Ke;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(Ke||(Ke={}));var ar;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(ar||(ar={}));var rt;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(rt||(rt={}));var Vn;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(Vn||(Vn={}));var J1;(function(e){e[e.BUFFER=0]="BUFFER"})(J1||(J1={}));var tb;(function(e){e[e.LZ4_FRAME=0]="LZ4_FRAME",e[e.ZSTD=1]="ZSTD"})(tb||(tb={}));class ua{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBodyCompression(t,n){return(n||new ua).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBodyCompression(t,n){return t.setPosition(t.position()+le),(n||new ua).__init(t.readInt32(t.position())+t.position(),t)}codec(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt8(this.bb_pos+t):tb.LZ4_FRAME}method(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt8(this.bb_pos+t):J1.BUFFER}static startBodyCompression(t){t.startObject(2)}static addCodec(t,n){t.addFieldInt8(0,n,tb.LZ4_FRAME)}static addMethod(t,n){t.addFieldInt8(1,n,J1.BUFFER)}static endBodyCompression(t){return t.endObject()}static createBodyCompression(t,n,r){return ua.startBodyCompression(t),ua.addCodec(t,n),ua.addMethod(t,r),ua.endBodyCompression(t)}}class _P{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(t,n,r){return t.prep(8,16),t.writeInt64(BigInt(r??0)),t.writeInt64(BigInt(n??0)),t.offset()}}let SP=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(t,n,r){return t.prep(8,16),t.writeInt64(BigInt(r??0)),t.writeInt64(BigInt(n??0)),t.offset()}},oo=class Fx{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsRecordBatch(t,n){return(n||new Fx).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsRecordBatch(t,n){return t.setPosition(t.position()+le),(n||new Fx).__init(t.readInt32(t.position())+t.position(),t)}length(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}nodes(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new SP).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}nodesLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}buffers(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new _P).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}buffersLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}compression(t){const n=this.bb.__offset(this.bb_pos,10);return n?(t||new ua).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}static startRecordBatch(t){t.startObject(4)}static addLength(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addNodes(t,n){t.addFieldOffset(1,n,0)}static startNodesVector(t,n){t.startVector(16,n,8)}static addBuffers(t,n){t.addFieldOffset(2,n,0)}static startBuffersVector(t,n){t.startVector(16,n,8)}static addCompression(t,n){t.addFieldOffset(3,n,0)}static endRecordBatch(t){return t.endObject()}},lu=class Bx{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryBatch(t,n){return(n||new Bx).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryBatch(t,n){return t.setPosition(t.position()+le),(n||new Bx).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}data(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new oo).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isDelta(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startDictionaryBatch(t){t.startObject(3)}static addId(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addData(t,n){t.addFieldOffset(1,n,0)}static addIsDelta(t,n){t.addFieldInt8(2,+n,0)}static endDictionaryBatch(t){return t.endObject()}};var Vf;(function(e){e[e.Little=0]="Little",e[e.Big=1]="Big"})(Vf||(Vf={}));var eb;(function(e){e[e.DenseArray=0]="DenseArray"})(eb||(eb={}));class Or{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInt(t,n){return(n||new Or).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInt(t,n){return t.setPosition(t.position()+le),(n||new Or).__init(t.readInt32(t.position())+t.position(),t)}bitWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}isSigned(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startInt(t){t.startObject(2)}static addBitWidth(t,n){t.addFieldInt32(0,n,0)}static addIsSigned(t,n){t.addFieldInt8(1,+n,0)}static endInt(t){return t.endObject()}static createInt(t,n,r){return Or.startInt(t),Or.addBitWidth(t,n),Or.addIsSigned(t,r),Or.endInt(t)}}class po{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryEncoding(t,n){return(n||new po).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryEncoding(t,n){return t.setPosition(t.position()+le),(n||new po).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}indexType(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new Or).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isOrdered(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}dictionaryKind(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt16(this.bb_pos+t):eb.DenseArray}static startDictionaryEncoding(t){t.startObject(4)}static addId(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addIndexType(t,n){t.addFieldOffset(1,n,0)}static addIsOrdered(t,n){t.addFieldInt8(2,+n,0)}static addDictionaryKind(t,n){t.addFieldInt16(3,n,eb.DenseArray)}static endDictionaryEncoding(t){return t.endObject()}}class un{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsKeyValue(t,n){return(n||new un).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsKeyValue(t,n){return t.setPosition(t.position()+le),(n||new un).__init(t.readInt32(t.position())+t.position(),t)}key(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}value(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startKeyValue(t){t.startObject(2)}static addKey(t,n){t.addFieldOffset(0,n,0)}static addValue(t,n){t.addFieldOffset(1,n,0)}static endKeyValue(t){return t.endObject()}static createKeyValue(t,n,r){return un.startKeyValue(t),un.addKey(t,n),un.addValue(t,r),un.endKeyValue(t)}}let WN=class ch{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBinary(t,n){return(n||new ch).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBinary(t,n){return t.setPosition(t.position()+le),(n||new ch).__init(t.readInt32(t.position())+t.position(),t)}static startBinary(t){t.startObject(0)}static endBinary(t){return t.endObject()}static createBinary(t){return ch.startBinary(t),ch.endBinary(t)}},HN=class uh{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBool(t,n){return(n||new uh).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBool(t,n){return t.setPosition(t.position()+le),(n||new uh).__init(t.readInt32(t.position())+t.position(),t)}static startBool(t){t.startObject(0)}static endBool(t){return t.endObject()}static createBool(t){return uh.startBool(t),uh.endBool(t)}},Tm=class cu{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDate(t,n){return(n||new cu).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDate(t,n){return t.setPosition(t.position()+le),(n||new cu).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):ar.MILLISECOND}static startDate(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,ar.MILLISECOND)}static endDate(t){return t.endObject()}static createDate(t,n){return cu.startDate(t),cu.addUnit(t,n),cu.endDate(t)}},uu=class ra{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDecimal(t,n){return(n||new ra).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDecimal(t,n){return t.setPosition(t.position()+le),(n||new ra).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}scale(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}bitWidth(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt32(this.bb_pos+t):128}static startDecimal(t){t.startObject(3)}static addPrecision(t,n){t.addFieldInt32(0,n,0)}static addScale(t,n){t.addFieldInt32(1,n,0)}static addBitWidth(t,n){t.addFieldInt32(2,n,128)}static endDecimal(t){return t.endObject()}static createDecimal(t,n,r,i){return ra.startDecimal(t),ra.addPrecision(t,n),ra.addScale(t,r),ra.addBitWidth(t,i),ra.endDecimal(t)}},Em=class fu{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDuration(t,n){return(n||new fu).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDuration(t,n){return t.setPosition(t.position()+le),(n||new fu).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):rt.MILLISECOND}static startDuration(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,rt.MILLISECOND)}static endDuration(t){return t.endObject()}static createDuration(t,n){return fu.startDuration(t),fu.addUnit(t,n),fu.endDuration(t)}},Am=class du{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeBinary(t,n){return(n||new du).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeBinary(t,n){return t.setPosition(t.position()+le),(n||new du).__init(t.readInt32(t.position())+t.position(),t)}byteWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeBinary(t){t.startObject(1)}static addByteWidth(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeBinary(t){return t.endObject()}static createFixedSizeBinary(t,n){return du.startFixedSizeBinary(t),du.addByteWidth(t,n),du.endFixedSizeBinary(t)}},Mm=class hu{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeList(t,n){return(n||new hu).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeList(t,n){return t.setPosition(t.position()+le),(n||new hu).__init(t.readInt32(t.position())+t.position(),t)}listSize(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeList(t){t.startObject(1)}static addListSize(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeList(t){return t.endObject()}static createFixedSizeList(t,n){return hu.startFixedSizeList(t),hu.addListSize(t,n),hu.endFixedSizeList(t)}};class ws{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFloatingPoint(t,n){return(n||new ws).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFloatingPoint(t,n){return t.setPosition(t.position()+le),(n||new ws).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Ke.HALF}static startFloatingPoint(t){t.startObject(1)}static addPrecision(t,n){t.addFieldInt16(0,n,Ke.HALF)}static endFloatingPoint(t){return t.endObject()}static createFloatingPoint(t,n){return ws.startFloatingPoint(t),ws.addPrecision(t,n),ws.endFloatingPoint(t)}}class _s{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInterval(t,n){return(n||new _s).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInterval(t,n){return t.setPosition(t.position()+le),(n||new _s).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Vn.YEAR_MONTH}static startInterval(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,Vn.YEAR_MONTH)}static endInterval(t){return t.endObject()}static createInterval(t,n){return _s.startInterval(t),_s.addUnit(t,n),_s.endInterval(t)}}let GN=class fh{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsLargeBinary(t,n){return(n||new fh).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsLargeBinary(t,n){return t.setPosition(t.position()+le),(n||new fh).__init(t.readInt32(t.position())+t.position(),t)}static startLargeBinary(t){t.startObject(0)}static endLargeBinary(t){return t.endObject()}static createLargeBinary(t){return fh.startLargeBinary(t),fh.endLargeBinary(t)}},XN=class dh{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsLargeUtf8(t,n){return(n||new dh).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsLargeUtf8(t,n){return t.setPosition(t.position()+le),(n||new dh).__init(t.readInt32(t.position())+t.position(),t)}static startLargeUtf8(t){t.startObject(0)}static endLargeUtf8(t){return t.endObject()}static createLargeUtf8(t){return dh.startLargeUtf8(t),dh.endLargeUtf8(t)}},QN=class hh{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsList(t,n){return(n||new hh).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsList(t,n){return t.setPosition(t.position()+le),(n||new hh).__init(t.readInt32(t.position())+t.position(),t)}static startList(t){t.startObject(0)}static endList(t){return t.endObject()}static createList(t){return hh.startList(t),hh.endList(t)}},$m=class pu{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMap(t,n){return(n||new pu).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMap(t,n){return t.setPosition(t.position()+le),(n||new pu).__init(t.readInt32(t.position())+t.position(),t)}keysSorted(){const t=this.bb.__offset(this.bb_pos,4);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startMap(t){t.startObject(1)}static addKeysSorted(t,n){t.addFieldInt8(0,+n,0)}static endMap(t){return t.endObject()}static createMap(t,n){return pu.startMap(t),pu.addKeysSorted(t,n),pu.endMap(t)}},KN=class ph{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsNull(t,n){return(n||new ph).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsNull(t,n){return t.setPosition(t.position()+le),(n||new ph).__init(t.readInt32(t.position())+t.position(),t)}static startNull(t){t.startObject(0)}static endNull(t){return t.endObject()}static createNull(t){return ph.startNull(t),ph.endNull(t)}};class Xl{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsStruct_(t,n){return(n||new Xl).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsStruct_(t,n){return t.setPosition(t.position()+le),(n||new Xl).__init(t.readInt32(t.position())+t.position(),t)}static startStruct_(t){t.startObject(0)}static endStruct_(t){return t.endObject()}static createStruct_(t){return Xl.startStruct_(t),Xl.endStruct_(t)}}class si{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTime(t,n){return(n||new si).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTime(t,n){return t.setPosition(t.position()+le),(n||new si).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):rt.MILLISECOND}bitWidth(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):32}static startTime(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,rt.MILLISECOND)}static addBitWidth(t,n){t.addFieldInt32(1,n,32)}static endTime(t){return t.endObject()}static createTime(t,n,r){return si.startTime(t),si.addUnit(t,n),si.addBitWidth(t,r),si.endTime(t)}}class oi{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTimestamp(t,n){return(n||new oi).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTimestamp(t,n){return t.setPosition(t.position()+le),(n||new oi).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):rt.SECOND}timezone(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startTimestamp(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,rt.SECOND)}static addTimezone(t,n){t.addFieldOffset(1,n,0)}static endTimestamp(t){return t.endObject()}static createTimestamp(t,n,r){return oi.startTimestamp(t),oi.addUnit(t,n),oi.addTimezone(t,r),oi.endTimestamp(t)}}class pr{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUnion(t,n){return(n||new pr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUnion(t,n){return t.setPosition(t.position()+le),(n||new pr).__init(t.readInt32(t.position())+t.position(),t)}mode(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):an.Sparse}typeIds(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readInt32(this.bb.__vector(this.bb_pos+n)+t*4):0}typeIdsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}typeIdsArray(){const t=this.bb.__offset(this.bb_pos,6);return t?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startUnion(t){t.startObject(2)}static addMode(t,n){t.addFieldInt16(0,n,an.Sparse)}static addTypeIds(t,n){t.addFieldOffset(1,n,0)}static createTypeIdsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addInt32(n[r]);return t.endVector()}static startTypeIdsVector(t,n){t.startVector(4,n,4)}static endUnion(t){return t.endObject()}static createUnion(t,n,r){return pr.startUnion(t),pr.addMode(t,n),pr.addTypeIds(t,r),pr.endUnion(t)}}let ZN=class yh{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUtf8(t,n){return(n||new yh).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUtf8(t,n){return t.setPosition(t.position()+le),(n||new yh).__init(t.readInt32(t.position())+t.position(),t)}static startUtf8(t){t.startObject(0)}static endUtf8(t){return t.endObject()}static createUtf8(t){return yh.startUtf8(t),yh.endUtf8(t)}};var xe;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.FloatingPoint=3]="FloatingPoint",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct_=13]="Struct_",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.LargeBinary=19]="LargeBinary",e[e.LargeUtf8=20]="LargeUtf8",e[e.LargeList=21]="LargeList",e[e.RunEndEncoded=22]="RunEndEncoded"})(xe||(xe={}));let ti=class Nm{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsField(t,n){return(n||new Nm).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsField(t,n){return t.setPosition(t.position()+le),(n||new Nm).__init(t.readInt32(t.position())+t.position(),t)}name(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}nullable(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}typeType(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):xe.NONE}type(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.__union(t,this.bb_pos+n):null}dictionary(t){const n=this.bb.__offset(this.bb_pos,12);return n?(t||new po).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}children(t,n){const r=this.bb.__offset(this.bb_pos,14);return r?(n||new Nm).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}childrenLength(){const t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,16);return r?(n||new un).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}static startField(t){t.startObject(7)}static addName(t,n){t.addFieldOffset(0,n,0)}static addNullable(t,n){t.addFieldInt8(1,+n,0)}static addTypeType(t,n){t.addFieldInt8(2,n,xe.NONE)}static addType(t,n){t.addFieldOffset(3,n,0)}static addDictionary(t,n){t.addFieldOffset(4,n,0)}static addChildren(t,n){t.addFieldOffset(5,n,0)}static createChildrenVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startChildrenVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(6,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endField(t){return t.endObject()}},fs=class eo{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsSchema(t,n){return(n||new eo).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSchema(t,n){return t.setPosition(t.position()+le),(n||new eo).__init(t.readInt32(t.position())+t.position(),t)}endianness(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Vf.Little}fields(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new ti).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}fieldsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new un).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}features(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.readInt64(this.bb.__vector(this.bb_pos+n)+t*8):BigInt(0)}featuresLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}static startSchema(t){t.startObject(4)}static addEndianness(t,n){t.addFieldInt16(0,n,Vf.Little)}static addFields(t,n){t.addFieldOffset(1,n,0)}static createFieldsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startFieldsVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(2,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static addFeatures(t,n){t.addFieldOffset(3,n,0)}static createFeaturesVector(t,n){t.startVector(8,n.length,8);for(let r=n.length-1;r>=0;r--)t.addInt64(n[r]);return t.endVector()}static startFeaturesVector(t,n){t.startVector(8,n,8)}static endSchema(t){return t.endObject()}static finishSchemaBuffer(t,n){t.finish(n)}static finishSizePrefixedSchemaBuffer(t,n){t.finish(n,void 0,!0)}static createSchema(t,n,r,i,s){return eo.startSchema(t),eo.addEndianness(t,n),eo.addFields(t,r),eo.addCustomMetadata(t,i),eo.addFeatures(t,s),eo.endSchema(t)}};var Zt;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(Zt||(Zt={}));var $;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.Float=3]="Float",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct=13]="Struct",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.LargeBinary=19]="LargeBinary",e[e.LargeUtf8=20]="LargeUtf8",e[e.Dictionary=-1]="Dictionary",e[e.Int8=-2]="Int8",e[e.Int16=-3]="Int16",e[e.Int32=-4]="Int32",e[e.Int64=-5]="Int64",e[e.Uint8=-6]="Uint8",e[e.Uint16=-7]="Uint16",e[e.Uint32=-8]="Uint32",e[e.Uint64=-9]="Uint64",e[e.Float16=-10]="Float16",e[e.Float32=-11]="Float32",e[e.Float64=-12]="Float64",e[e.DateDay=-13]="DateDay",e[e.DateMillisecond=-14]="DateMillisecond",e[e.TimestampSecond=-15]="TimestampSecond",e[e.TimestampMillisecond=-16]="TimestampMillisecond",e[e.TimestampMicrosecond=-17]="TimestampMicrosecond",e[e.TimestampNanosecond=-18]="TimestampNanosecond",e[e.TimeSecond=-19]="TimeSecond",e[e.TimeMillisecond=-20]="TimeMillisecond",e[e.TimeMicrosecond=-21]="TimeMicrosecond",e[e.TimeNanosecond=-22]="TimeNanosecond",e[e.DenseUnion=-23]="DenseUnion",e[e.SparseUnion=-24]="SparseUnion",e[e.IntervalDayTime=-25]="IntervalDayTime",e[e.IntervalYearMonth=-26]="IntervalYearMonth",e[e.DurationSecond=-27]="DurationSecond",e[e.DurationMillisecond=-28]="DurationMillisecond",e[e.DurationMicrosecond=-29]="DurationMicrosecond",e[e.DurationNanosecond=-30]="DurationNanosecond"})($||($={}));var ao;(function(e){e[e.OFFSET=0]="OFFSET",e[e.DATA=1]="DATA",e[e.VALIDITY=2]="VALIDITY",e[e.TYPE=3]="TYPE"})(ao||(ao={}));const k0t=void 0;function Rp(e){if(e===null)return"null";if(e===k0t)return"undefined";switch(typeof e){case"number":return`${e}`;case"bigint":return`${e}`;case"string":return`"${e}"`}return typeof e[Symbol.toPrimitive]=="function"?e[Symbol.toPrimitive]("string"):ArrayBuffer.isView(e)?e instanceof BigInt64Array||e instanceof BigUint64Array?`[${[...e].map(t=>Rp(t))}]`:`[${e}]`:ArrayBuffer.isView(e)?`[${e}]`:JSON.stringify(e,(t,n)=>typeof n=="bigint"?`${n}`:n)}const D0t=Symbol.for("isArrowBigNum");function Ji(e,...t){return t.length===0?Object.setPrototypeOf(de(this.TypedArray,e),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(e,...t),this.constructor.prototype)}Ji.prototype[D0t]=!0;Ji.prototype.toJSON=function(){return`"${Up(this)}"`};Ji.prototype.valueOf=function(){return xP(this)};Ji.prototype.toString=function(){return Up(this)};Ji.prototype[Symbol.toPrimitive]=function(e="default"){switch(e){case"number":return xP(this);case"string":return Up(this);case"default":return O0t(this)}return Up(this)};function of(...e){return Ji.apply(this,e)}function af(...e){return Ji.apply(this,e)}function Cp(...e){return Ji.apply(this,e)}Object.setPrototypeOf(of.prototype,Object.create(Int32Array.prototype));Object.setPrototypeOf(af.prototype,Object.create(Uint32Array.prototype));Object.setPrototypeOf(Cp.prototype,Object.create(Uint32Array.prototype));Object.assign(of.prototype,Ji.prototype,{constructor:of,signed:!0,TypedArray:Int32Array,BigIntArray:BigInt64Array});Object.assign(af.prototype,Ji.prototype,{constructor:af,signed:!1,TypedArray:Uint32Array,BigIntArray:BigUint64Array});Object.assign(Cp.prototype,Ji.prototype,{constructor:Cp,signed:!0,TypedArray:Uint32Array,BigIntArray:BigUint64Array});function xP(e){const{buffer:t,byteOffset:n,length:r,signed:i}=e,s=new BigUint64Array(t,n,r),o=i&&s.at(-1)&BigInt(1)<<BigInt(63);let a=BigInt(o?1:0),l=BigInt(0);if(o){for(const c of s)a+=~c*(BigInt(1)<<BigInt(32)*l++);a*=BigInt(-1)}else for(const c of s)a+=c*(BigInt(1)<<BigInt(32)*l++);return a}const Up=e=>{if(e.byteLength===8)return`${new e.BigIntArray(e.buffer,e.byteOffset,1)[0]}`;if(!e.signed)return V_(e);let t=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);if(new Int16Array([t.at(-1)])[0]>=0)return V_(e);t=t.slice();let r=1;for(let s=0;s<t.length;s++){const o=t[s],a=~o+r;t[s]=a,r&=o===0?1:0}return`-${V_(t)}`},O0t=e=>e.byteLength===8?new e.BigIntArray(e.buffer,e.byteOffset,1)[0]:Up(e);function V_(e){let t="";const n=new Uint32Array(2);let r=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);const i=new Uint32Array((r=new Uint16Array(r).reverse()).buffer);let s=-1;const o=r.length-1;do{for(n[0]=r[s=0];s<o;)r[s++]=n[1]=n[0]/10,n[0]=(n[0]-n[1]*10<<16)+r[s];r[s]=n[1]=n[0]/10,n[0]=n[0]-n[1]*10,t=`${n[0]}${t}`}while(i[0]||i[1]||i[2]||i[3]);return t??"0"}class xE{static new(t,n){switch(n){case!0:return new of(t);case!1:return new af(t)}switch(t.constructor){case Int8Array:case Int16Array:case Int32Array:case BigInt64Array:return new of(t)}return t.byteLength===16?new Cp(t):new af(t)}static signed(t){return new of(t)}static unsigned(t){return new af(t)}static decimal(t){return new Cp(t)}constructor(t,n){return xE.new(t,n)}}function Dn(e){if(typeof e=="bigint"&&(e<Number.MIN_SAFE_INTEGER||e>Number.MAX_SAFE_INTEGER))throw new TypeError(`${e} is not safe to convert to a number.`);return Number(e)}var IP,TP,EP,AP,MP,$P,NP,kP,DP,OP,FP,BP,LP,RP,CP,UP,PP,zP,jP,VP,YP,qP;class ot{static isNull(t){return(t==null?void 0:t.typeId)===$.Null}static isInt(t){return(t==null?void 0:t.typeId)===$.Int}static isFloat(t){return(t==null?void 0:t.typeId)===$.Float}static isBinary(t){return(t==null?void 0:t.typeId)===$.Binary}static isLargeBinary(t){return(t==null?void 0:t.typeId)===$.LargeBinary}static isUtf8(t){return(t==null?void 0:t.typeId)===$.Utf8}static isLargeUtf8(t){return(t==null?void 0:t.typeId)===$.LargeUtf8}static isBool(t){return(t==null?void 0:t.typeId)===$.Bool}static isDecimal(t){return(t==null?void 0:t.typeId)===$.Decimal}static isDate(t){return(t==null?void 0:t.typeId)===$.Date}static isTime(t){return(t==null?void 0:t.typeId)===$.Time}static isTimestamp(t){return(t==null?void 0:t.typeId)===$.Timestamp}static isInterval(t){return(t==null?void 0:t.typeId)===$.Interval}static isDuration(t){return(t==null?void 0:t.typeId)===$.Duration}static isList(t){return(t==null?void 0:t.typeId)===$.List}static isStruct(t){return(t==null?void 0:t.typeId)===$.Struct}static isUnion(t){return(t==null?void 0:t.typeId)===$.Union}static isFixedSizeBinary(t){return(t==null?void 0:t.typeId)===$.FixedSizeBinary}static isFixedSizeList(t){return(t==null?void 0:t.typeId)===$.FixedSizeList}static isMap(t){return(t==null?void 0:t.typeId)===$.Map}static isDictionary(t){return(t==null?void 0:t.typeId)===$.Dictionary}static isDenseUnion(t){return ot.isUnion(t)&&t.mode===an.Dense}static isSparseUnion(t){return ot.isUnion(t)&&t.mode===an.Sparse}constructor(t){this.typeId=t}}IP=Symbol.toStringTag;ot[IP]=(e=>(e.children=null,e.ArrayType=Array,e.OffsetArrayType=Int32Array,e[Symbol.toStringTag]="DataType"))(ot.prototype);class Ka extends ot{constructor(){super($.Null)}toString(){return"Null"}}TP=Symbol.toStringTag;Ka[TP]=(e=>e[Symbol.toStringTag]="Null")(Ka.prototype);class Za extends ot{constructor(t,n){super($.Int),this.isSigned=t,this.bitWidth=n}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?BigInt64Array:BigUint64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}EP=Symbol.toStringTag;Za[EP]=(e=>(e.isSigned=null,e.bitWidth=null,e[Symbol.toStringTag]="Int"))(Za.prototype);class Pp extends Za{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}Object.defineProperty(Pp.prototype,"ArrayType",{value:Int32Array});class zp extends ot{constructor(t){super($.Float),this.precision=t}get ArrayType(){switch(this.precision){case Ke.HALF:return Uint16Array;case Ke.SINGLE:return Float32Array;case Ke.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}AP=Symbol.toStringTag;zp[AP]=(e=>(e.precision=null,e[Symbol.toStringTag]="Float"))(zp.prototype);class nb extends ot{constructor(){super($.Binary)}toString(){return"Binary"}}MP=Symbol.toStringTag;nb[MP]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Binary"))(nb.prototype);class rb extends ot{constructor(){super($.LargeBinary)}toString(){return"LargeBinary"}}$P=Symbol.toStringTag;rb[$P]=(e=>(e.ArrayType=Uint8Array,e.OffsetArrayType=BigInt64Array,e[Symbol.toStringTag]="LargeBinary"))(rb.prototype);class ib extends ot{constructor(){super($.Utf8)}toString(){return"Utf8"}}NP=Symbol.toStringTag;ib[NP]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Utf8"))(ib.prototype);class sb extends ot{constructor(){super($.LargeUtf8)}toString(){return"LargeUtf8"}}kP=Symbol.toStringTag;sb[kP]=(e=>(e.ArrayType=Uint8Array,e.OffsetArrayType=BigInt64Array,e[Symbol.toStringTag]="LargeUtf8"))(sb.prototype);class ob extends ot{constructor(){super($.Bool)}toString(){return"Bool"}}DP=Symbol.toStringTag;ob[DP]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Bool"))(ob.prototype);class ab extends ot{constructor(t,n,r=128){super($.Decimal),this.scale=t,this.precision=n,this.bitWidth=r}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}}OP=Symbol.toStringTag;ab[OP]=(e=>(e.scale=null,e.precision=null,e.ArrayType=Uint32Array,e[Symbol.toStringTag]="Decimal"))(ab.prototype);class lb extends ot{constructor(t){super($.Date),this.unit=t}toString(){return`Date${(this.unit+1)*32}<${ar[this.unit]}>`}}FP=Symbol.toStringTag;lb[FP]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Date"))(lb.prototype);class jp extends ot{constructor(t,n){super($.Time),this.unit=t,this.bitWidth=n}toString(){return`Time${this.bitWidth}<${rt[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return BigInt64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}BP=Symbol.toStringTag;jp[BP]=(e=>(e.unit=null,e.bitWidth=null,e[Symbol.toStringTag]="Time"))(jp.prototype);class cb extends ot{constructor(t,n){super($.Timestamp),this.unit=t,this.timezone=n}toString(){return`Timestamp<${rt[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}LP=Symbol.toStringTag;cb[LP]=(e=>(e.unit=null,e.timezone=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Timestamp"))(cb.prototype);class ub extends ot{constructor(t){super($.Interval),this.unit=t}toString(){return`Interval<${Vn[this.unit]}>`}}RP=Symbol.toStringTag;ub[RP]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Interval"))(ub.prototype);class fb extends ot{constructor(t){super($.Duration),this.unit=t}toString(){return`Duration<${rt[this.unit]}>`}}CP=Symbol.toStringTag;fb[CP]=(e=>(e.unit=null,e.ArrayType=BigInt64Array,e[Symbol.toStringTag]="Duration"))(fb.prototype);class db extends ot{constructor(t){super($.List),this.children=[t]}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}}UP=Symbol.toStringTag;db[UP]=(e=>(e.children=null,e[Symbol.toStringTag]="List"))(db.prototype);class tr extends ot{constructor(t){super($.Struct),this.children=t}toString(){return`Struct<{${this.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}PP=Symbol.toStringTag;tr[PP]=(e=>(e.children=null,e[Symbol.toStringTag]="Struct"))(tr.prototype);class hb extends ot{constructor(t,n,r){super($.Union),this.mode=t,this.children=r,this.typeIds=n=Int32Array.from(n),this.typeIdToChildIndex=n.reduce((i,s,o)=>(i[s]=o)&&i||i,Object.create(null))}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(t=>`${t.type}`).join(" | ")}>`}}zP=Symbol.toStringTag;hb[zP]=(e=>(e.mode=null,e.typeIds=null,e.children=null,e.typeIdToChildIndex=null,e.ArrayType=Int8Array,e[Symbol.toStringTag]="Union"))(hb.prototype);class pb extends ot{constructor(t){super($.FixedSizeBinary),this.byteWidth=t}toString(){return`FixedSizeBinary[${this.byteWidth}]`}}jP=Symbol.toStringTag;pb[jP]=(e=>(e.byteWidth=null,e.ArrayType=Uint8Array,e[Symbol.toStringTag]="FixedSizeBinary"))(pb.prototype);class yb extends ot{constructor(t,n){super($.FixedSizeList),this.listSize=t,this.children=[n]}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}}VP=Symbol.toStringTag;yb[VP]=(e=>(e.children=null,e.listSize=null,e[Symbol.toStringTag]="FixedSizeList"))(yb.prototype);class mb extends ot{constructor(t,n=!1){var r,i,s;if(super($.Map),this.children=[t],this.keysSorted=n,t&&(t.name="entries",!((r=t==null?void 0:t.type)===null||r===void 0)&&r.children)){const o=(i=t==null?void 0:t.type)===null||i===void 0?void 0:i.children[0];o&&(o.name="key");const a=(s=t==null?void 0:t.type)===null||s===void 0?void 0:s.children[1];a&&(a.name="value")}}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}YP=Symbol.toStringTag;mb[YP]=(e=>(e.children=null,e.keysSorted=null,e[Symbol.toStringTag]="Map_"))(mb.prototype);const F0t=(e=>()=>++e)(-1);class Yf extends ot{constructor(t,n,r,i){super($.Dictionary),this.indices=n,this.dictionary=t,this.isOrdered=i||!1,this.id=r==null?F0t():Dn(r)}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}qP=Symbol.toStringTag;Yf[qP]=(e=>(e.id=null,e.indices=null,e.isOrdered=null,e.dictionary=null,e[Symbol.toStringTag]="Dictionary"))(Yf.prototype);function lo(e){const t=e;switch(e.typeId){case $.Decimal:return e.bitWidth/32;case $.Timestamp:return 2;case $.Date:return 1+t.unit;case $.Interval:return 1+t.unit;case $.FixedSizeList:return t.listSize;case $.FixedSizeBinary:return t.byteWidth;default:return 1}}class Bt{visitMany(t,...n){return t.map((r,i)=>this.visit(r,...n.map(s=>s[i])))}visit(...t){return this.getVisitFn(t[0],!1).apply(this,t)}getVisitFn(t,n=!0){return B0t(this,t,n)}getVisitFnByTypeId(t,n=!0){return yu(this,t,n)}visitNull(t,...n){return null}visitBool(t,...n){return null}visitInt(t,...n){return null}visitFloat(t,...n){return null}visitUtf8(t,...n){return null}visitLargeUtf8(t,...n){return null}visitBinary(t,...n){return null}visitLargeBinary(t,...n){return null}visitFixedSizeBinary(t,...n){return null}visitDate(t,...n){return null}visitTimestamp(t,...n){return null}visitTime(t,...n){return null}visitDecimal(t,...n){return null}visitList(t,...n){return null}visitStruct(t,...n){return null}visitUnion(t,...n){return null}visitDictionary(t,...n){return null}visitInterval(t,...n){return null}visitDuration(t,...n){return null}visitFixedSizeList(t,...n){return null}visitMap(t,...n){return null}}function B0t(e,t,n=!0){return typeof t=="number"?yu(e,t,n):typeof t=="string"&&t in $?yu(e,$[t],n):t&&t instanceof ot?yu(e,JN(t),n):t!=null&&t.type&&t.type instanceof ot?yu(e,JN(t.type),n):yu(e,$.NONE,n)}function yu(e,t,n=!0){let r=null;switch(t){case $.Null:r=e.visitNull;break;case $.Bool:r=e.visitBool;break;case $.Int:r=e.visitInt;break;case $.Int8:r=e.visitInt8||e.visitInt;break;case $.Int16:r=e.visitInt16||e.visitInt;break;case $.Int32:r=e.visitInt32||e.visitInt;break;case $.Int64:r=e.visitInt64||e.visitInt;break;case $.Uint8:r=e.visitUint8||e.visitInt;break;case $.Uint16:r=e.visitUint16||e.visitInt;break;case $.Uint32:r=e.visitUint32||e.visitInt;break;case $.Uint64:r=e.visitUint64||e.visitInt;break;case $.Float:r=e.visitFloat;break;case $.Float16:r=e.visitFloat16||e.visitFloat;break;case $.Float32:r=e.visitFloat32||e.visitFloat;break;case $.Float64:r=e.visitFloat64||e.visitFloat;break;case $.Utf8:r=e.visitUtf8;break;case $.LargeUtf8:r=e.visitLargeUtf8;break;case $.Binary:r=e.visitBinary;break;case $.LargeBinary:r=e.visitLargeBinary;break;case $.FixedSizeBinary:r=e.visitFixedSizeBinary;break;case $.Date:r=e.visitDate;break;case $.DateDay:r=e.visitDateDay||e.visitDate;break;case $.DateMillisecond:r=e.visitDateMillisecond||e.visitDate;break;case $.Timestamp:r=e.visitTimestamp;break;case $.TimestampSecond:r=e.visitTimestampSecond||e.visitTimestamp;break;case $.TimestampMillisecond:r=e.visitTimestampMillisecond||e.visitTimestamp;break;case $.TimestampMicrosecond:r=e.visitTimestampMicrosecond||e.visitTimestamp;break;case $.TimestampNanosecond:r=e.visitTimestampNanosecond||e.visitTimestamp;break;case $.Time:r=e.visitTime;break;case $.TimeSecond:r=e.visitTimeSecond||e.visitTime;break;case $.TimeMillisecond:r=e.visitTimeMillisecond||e.visitTime;break;case $.TimeMicrosecond:r=e.visitTimeMicrosecond||e.visitTime;break;case $.TimeNanosecond:r=e.visitTimeNanosecond||e.visitTime;break;case $.Decimal:r=e.visitDecimal;break;case $.List:r=e.visitList;break;case $.Struct:r=e.visitStruct;break;case $.Union:r=e.visitUnion;break;case $.DenseUnion:r=e.visitDenseUnion||e.visitUnion;break;case $.SparseUnion:r=e.visitSparseUnion||e.visitUnion;break;case $.Dictionary:r=e.visitDictionary;break;case $.Interval:r=e.visitInterval;break;case $.IntervalDayTime:r=e.visitIntervalDayTime||e.visitInterval;break;case $.IntervalYearMonth:r=e.visitIntervalYearMonth||e.visitInterval;break;case $.Duration:r=e.visitDuration;break;case $.DurationSecond:r=e.visitDurationSecond||e.visitDuration;break;case $.DurationMillisecond:r=e.visitDurationMillisecond||e.visitDuration;break;case $.DurationMicrosecond:r=e.visitDurationMicrosecond||e.visitDuration;break;case $.DurationNanosecond:r=e.visitDurationNanosecond||e.visitDuration;break;case $.FixedSizeList:r=e.visitFixedSizeList;break;case $.Map:r=e.visitMap;break}if(typeof r=="function")return r;if(!n)return()=>null;throw new Error(`Unrecognized type '${$[t]}'`)}function JN(e){switch(e.typeId){case $.Null:return $.Null;case $.Int:{const{bitWidth:t,isSigned:n}=e;switch(t){case 8:return n?$.Int8:$.Uint8;case 16:return n?$.Int16:$.Uint16;case 32:return n?$.Int32:$.Uint32;case 64:return n?$.Int64:$.Uint64}return $.Int}case $.Float:switch(e.precision){case Ke.HALF:return $.Float16;case Ke.SINGLE:return $.Float32;case Ke.DOUBLE:return $.Float64}return $.Float;case $.Binary:return $.Binary;case $.LargeBinary:return $.LargeBinary;case $.Utf8:return $.Utf8;case $.LargeUtf8:return $.LargeUtf8;case $.Bool:return $.Bool;case $.Decimal:return $.Decimal;case $.Time:switch(e.unit){case rt.SECOND:return $.TimeSecond;case rt.MILLISECOND:return $.TimeMillisecond;case rt.MICROSECOND:return $.TimeMicrosecond;case rt.NANOSECOND:return $.TimeNanosecond}return $.Time;case $.Timestamp:switch(e.unit){case rt.SECOND:return $.TimestampSecond;case rt.MILLISECOND:return $.TimestampMillisecond;case rt.MICROSECOND:return $.TimestampMicrosecond;case rt.NANOSECOND:return $.TimestampNanosecond}return $.Timestamp;case $.Date:switch(e.unit){case ar.DAY:return $.DateDay;case ar.MILLISECOND:return $.DateMillisecond}return $.Date;case $.Interval:switch(e.unit){case Vn.DAY_TIME:return $.IntervalDayTime;case Vn.YEAR_MONTH:return $.IntervalYearMonth}return $.Interval;case $.Duration:switch(e.unit){case rt.SECOND:return $.DurationSecond;case rt.MILLISECOND:return $.DurationMillisecond;case rt.MICROSECOND:return $.DurationMicrosecond;case rt.NANOSECOND:return $.DurationNanosecond}return $.Duration;case $.Map:return $.Map;case $.List:return $.List;case $.Struct:return $.Struct;case $.Union:switch(e.mode){case an.Dense:return $.DenseUnion;case an.Sparse:return $.SparseUnion}return $.Union;case $.FixedSizeBinary:return $.FixedSizeBinary;case $.FixedSizeList:return $.FixedSizeList;case $.Dictionary:return $.Dictionary}throw new Error(`Unrecognized type '${$[e.typeId]}'`)}Bt.prototype.visitInt8=null;Bt.prototype.visitInt16=null;Bt.prototype.visitInt32=null;Bt.prototype.visitInt64=null;Bt.prototype.visitUint8=null;Bt.prototype.visitUint16=null;Bt.prototype.visitUint32=null;Bt.prototype.visitUint64=null;Bt.prototype.visitFloat16=null;Bt.prototype.visitFloat32=null;Bt.prototype.visitFloat64=null;Bt.prototype.visitDateDay=null;Bt.prototype.visitDateMillisecond=null;Bt.prototype.visitTimestampSecond=null;Bt.prototype.visitTimestampMillisecond=null;Bt.prototype.visitTimestampMicrosecond=null;Bt.prototype.visitTimestampNanosecond=null;Bt.prototype.visitTimeSecond=null;Bt.prototype.visitTimeMillisecond=null;Bt.prototype.visitTimeMicrosecond=null;Bt.prototype.visitTimeNanosecond=null;Bt.prototype.visitDenseUnion=null;Bt.prototype.visitSparseUnion=null;Bt.prototype.visitIntervalDayTime=null;Bt.prototype.visitIntervalYearMonth=null;Bt.prototype.visitDuration=null;Bt.prototype.visitDurationSecond=null;Bt.prototype.visitDurationMillisecond=null;Bt.prototype.visitDurationMicrosecond=null;Bt.prototype.visitDurationNanosecond=null;const WP=new Float64Array(1),Xc=new Uint32Array(WP.buffer);function HP(e){const t=(e&31744)>>10,n=(e&1023)/1024,r=Math.pow(-1,(e&32768)>>15);switch(t){case 31:return r*(n?Number.NaN:1/0);case 0:return r*(n?6103515625e-14*n:0)}return r*Math.pow(2,t-15)*(1+n)}function L0t(e){if(e!==e)return 32256;WP[0]=e;const t=(Xc[1]&2147483648)>>16&65535;let n=Xc[1]&2146435072,r=0;return n>=1089470464?Xc[0]>0?n=31744:(n=(n&2080374784)>>16,r=(Xc[1]&1048575)>>10):n<=1056964608?(r=1048576+(Xc[1]&1048575),r=1048576+(r<<(n>>20)-998)>>21,n=0):(n=n-1056964608>>10,r=(Xc[1]&1048575)+512>>10),t|n|r&65535}class mt extends Bt{}function wt(e){return(t,n,r)=>{if(t.setValid(n,r!=null))return e(t,n,r)}}const R0t=(e,t,n)=>{e[t]=Math.trunc(n/864e5)},IE=(e,t,n)=>{e[t]=Math.trunc(n%4294967296),e[t+1]=Math.trunc(n/4294967296)},C0t=(e,t,n)=>{e[t]=Math.trunc(n*1e3%4294967296),e[t+1]=Math.trunc(n*1e3/4294967296)},U0t=(e,t,n)=>{e[t]=Math.trunc(n*1e6%4294967296),e[t+1]=Math.trunc(n*1e6/4294967296)},GP=(e,t,n,r)=>{if(n+1<t.length){const i=Dn(t[n]),s=Dn(t[n+1]);e.set(r.subarray(0,s-i),i)}},P0t=({offset:e,values:t},n,r)=>{const i=e+n;r?t[i>>3]|=1<<i%8:t[i>>3]&=~(1<<i%8)},Go=({values:e},t,n)=>{e[t]=n},TE=({values:e},t,n)=>{e[t]=n},XP=({values:e},t,n)=>{e[t]=L0t(n)},z0t=(e,t,n)=>{switch(e.type.precision){case Ke.HALF:return XP(e,t,n);case Ke.SINGLE:case Ke.DOUBLE:return TE(e,t,n)}},QP=({values:e},t,n)=>{R0t(e,t,n.valueOf())},KP=({values:e},t,n)=>{IE(e,t*2,n.valueOf())},j0t=({stride:e,values:t},n,r)=>{t.set(r.subarray(0,e),e*n)},ZP=({values:e,valueOffsets:t},n,r)=>GP(e,t,n,r),JP=({values:e,valueOffsets:t},n,r)=>GP(e,t,n,wE(r)),V0t=(e,t,n)=>{e.type.unit===ar.DAY?QP(e,t,n):KP(e,t,n)},t9=({values:e},t,n)=>IE(e,t*2,n/1e3),e9=({values:e},t,n)=>IE(e,t*2,n),n9=({values:e},t,n)=>C0t(e,t*2,n),r9=({values:e},t,n)=>U0t(e,t*2,n),Y0t=(e,t,n)=>{switch(e.type.unit){case rt.SECOND:return t9(e,t,n);case rt.MILLISECOND:return e9(e,t,n);case rt.MICROSECOND:return n9(e,t,n);case rt.NANOSECOND:return r9(e,t,n)}},i9=({values:e},t,n)=>{e[t]=n},s9=({values:e},t,n)=>{e[t]=n},o9=({values:e},t,n)=>{e[t]=n},a9=({values:e},t,n)=>{e[t]=n},q0t=(e,t,n)=>{switch(e.type.unit){case rt.SECOND:return i9(e,t,n);case rt.MILLISECOND:return s9(e,t,n);case rt.MICROSECOND:return o9(e,t,n);case rt.NANOSECOND:return a9(e,t,n)}},W0t=({values:e,stride:t},n,r)=>{e.set(r.subarray(0,t),t*n)},H0t=(e,t,n)=>{const r=e.children[0],i=e.valueOffsets,s=Si.getVisitFn(r);if(Array.isArray(n))for(let o=-1,a=i[t],l=i[t+1];a<l;)s(r,a++,n[++o]);else for(let o=-1,a=i[t],l=i[t+1];a<l;)s(r,a++,n.get(++o))},G0t=(e,t,n)=>{const r=e.children[0],{valueOffsets:i}=e,s=Si.getVisitFn(r);let{[t]:o,[t+1]:a}=i;const l=n instanceof Map?n.entries():Object.entries(n);for(const c of l)if(s(r,o,c),++o>=a)break},X0t=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[s]),Q0t=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(s)),K0t=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(i.name)),Z0t=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[i.name]),J0t=(e,t,n)=>{const r=e.type.children.map(s=>Si.getVisitFn(s.type)),i=n instanceof Map?K0t(t,n):n instanceof oe?Q0t(t,n):Array.isArray(n)?X0t(t,n):Z0t(t,n);e.type.children.forEach((s,o)=>i(r[o],e.children[o],s,o))},tmt=(e,t,n)=>{e.type.mode===an.Dense?l9(e,t,n):c9(e,t,n)},l9=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];Si.visit(i,e.valueOffsets[t],n)},c9=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];Si.visit(i,t,n)},emt=(e,t,n)=>{var r;(r=e.dictionary)===null||r===void 0||r.set(e.values[t],n)},nmt=(e,t,n)=>{e.type.unit===Vn.DAY_TIME?u9(e,t,n):f9(e,t,n)},u9=({values:e},t,n)=>{e.set(n.subarray(0,2),2*t)},f9=({values:e},t,n)=>{e[t]=n[0]*12+n[1]%12},d9=({values:e},t,n)=>{e[t]=n},h9=({values:e},t,n)=>{e[t]=n},p9=({values:e},t,n)=>{e[t]=n},y9=({values:e},t,n)=>{e[t]=n},rmt=(e,t,n)=>{switch(e.type.unit){case rt.SECOND:return d9(e,t,n);case rt.MILLISECOND:return h9(e,t,n);case rt.MICROSECOND:return p9(e,t,n);case rt.NANOSECOND:return y9(e,t,n)}},imt=(e,t,n)=>{const{stride:r}=e,i=e.children[0],s=Si.getVisitFn(i);if(Array.isArray(n))for(let o=-1,a=t*r;++o<r;)s(i,a+o,n[o]);else for(let o=-1,a=t*r;++o<r;)s(i,a+o,n.get(o))};mt.prototype.visitBool=wt(P0t);mt.prototype.visitInt=wt(Go);mt.prototype.visitInt8=wt(Go);mt.prototype.visitInt16=wt(Go);mt.prototype.visitInt32=wt(Go);mt.prototype.visitInt64=wt(Go);mt.prototype.visitUint8=wt(Go);mt.prototype.visitUint16=wt(Go);mt.prototype.visitUint32=wt(Go);mt.prototype.visitUint64=wt(Go);mt.prototype.visitFloat=wt(z0t);mt.prototype.visitFloat16=wt(XP);mt.prototype.visitFloat32=wt(TE);mt.prototype.visitFloat64=wt(TE);mt.prototype.visitUtf8=wt(JP);mt.prototype.visitLargeUtf8=wt(JP);mt.prototype.visitBinary=wt(ZP);mt.prototype.visitLargeBinary=wt(ZP);mt.prototype.visitFixedSizeBinary=wt(j0t);mt.prototype.visitDate=wt(V0t);mt.prototype.visitDateDay=wt(QP);mt.prototype.visitDateMillisecond=wt(KP);mt.prototype.visitTimestamp=wt(Y0t);mt.prototype.visitTimestampSecond=wt(t9);mt.prototype.visitTimestampMillisecond=wt(e9);mt.prototype.visitTimestampMicrosecond=wt(n9);mt.prototype.visitTimestampNanosecond=wt(r9);mt.prototype.visitTime=wt(q0t);mt.prototype.visitTimeSecond=wt(i9);mt.prototype.visitTimeMillisecond=wt(s9);mt.prototype.visitTimeMicrosecond=wt(o9);mt.prototype.visitTimeNanosecond=wt(a9);mt.prototype.visitDecimal=wt(W0t);mt.prototype.visitList=wt(H0t);mt.prototype.visitStruct=wt(J0t);mt.prototype.visitUnion=wt(tmt);mt.prototype.visitDenseUnion=wt(l9);mt.prototype.visitSparseUnion=wt(c9);mt.prototype.visitDictionary=wt(emt);mt.prototype.visitInterval=wt(nmt);mt.prototype.visitIntervalDayTime=wt(u9);mt.prototype.visitIntervalYearMonth=wt(f9);mt.prototype.visitDuration=wt(rmt);mt.prototype.visitDurationSecond=wt(d9);mt.prototype.visitDurationMillisecond=wt(h9);mt.prototype.visitDurationMicrosecond=wt(p9);mt.prototype.visitDurationNanosecond=wt(y9);mt.prototype.visitFixedSizeList=wt(imt);mt.prototype.visitMap=wt(G0t);const Si=new mt,Di=Symbol.for("parent"),lf=Symbol.for("rowIndex");class EE{constructor(t,n){return this[Di]=t,this[lf]=n,new Proxy(this,new omt)}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[lf],n=this[Di],r=n.type.children,i={};for(let s=-1,o=r.length;++s<o;)i[r[s].name]=Mr.visit(n.children[s],t);return i}toString(){return`{${[...this].map(([t,n])=>`${Rp(t)}: ${Rp(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new smt(this[Di],this[lf])}}class smt{constructor(t,n){this.childIndex=0,this.children=t.children,this.rowIndex=n,this.childFields=t.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const t=this.childIndex;return t<this.numChildren?(this.childIndex=t+1,{done:!1,value:[this.childFields[t].name,Mr.visit(this.children[t],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties(EE.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[Di]:{writable:!0,enumerable:!1,configurable:!1,value:null},[lf]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class omt{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[Di].type.children.map(n=>n.name)}has(t,n){return t[Di].type.children.findIndex(r=>r.name===n)!==-1}getOwnPropertyDescriptor(t,n){if(t[Di].type.children.findIndex(r=>r.name===n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[Di].type.children.findIndex(i=>i.name===n);if(r!==-1){const i=Mr.visit(t[Di].children[r],t[lf]);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[Di].type.children.findIndex(s=>s.name===n);return i!==-1?(Si.visit(t[Di].children[i],t[lf],r),Reflect.set(t,n,r)):Reflect.has(t,n)||typeof n=="symbol"?Reflect.set(t,n,r):!1}}class ut extends Bt{}function gt(e){return(t,n)=>t.getValid(n)?e(t,n):null}const amt=(e,t)=>864e5*e[t],AE=(e,t)=>4294967296*e[t+1]+(e[t]>>>0),lmt=(e,t)=>4294967296*(e[t+1]/1e3)+(e[t]>>>0)/1e3,cmt=(e,t)=>4294967296*(e[t+1]/1e6)+(e[t]>>>0)/1e6,m9=e=>new Date(e),umt=(e,t)=>m9(amt(e,t)),fmt=(e,t)=>m9(AE(e,t)),dmt=(e,t)=>null,g9=(e,t,n)=>{if(n+1>=t.length)return null;const r=Dn(t[n]),i=Dn(t[n+1]);return e.subarray(r,i)},hmt=({offset:e,values:t},n)=>{const r=e+n;return(t[r>>3]&1<<r%8)!==0},b9=({values:e},t)=>umt(e,t),v9=({values:e},t)=>fmt(e,t*2),gl=({stride:e,values:t},n)=>t[e*n],pmt=({stride:e,values:t},n)=>HP(t[e*n]),w9=({values:e},t)=>e[t],ymt=({stride:e,values:t},n)=>t.subarray(e*n,e*(n+1)),_9=({values:e,valueOffsets:t},n)=>g9(e,t,n),S9=({values:e,valueOffsets:t},n)=>{const r=g9(e,t,n);return r!==null?kx(r):null},mmt=({values:e},t)=>e[t],gmt=({type:e,values:t},n)=>e.precision!==Ke.HALF?t[n]:HP(t[n]),bmt=(e,t)=>e.type.unit===ar.DAY?b9(e,t):v9(e,t),x9=({values:e},t)=>1e3*AE(e,t*2),I9=({values:e},t)=>AE(e,t*2),T9=({values:e},t)=>lmt(e,t*2),E9=({values:e},t)=>cmt(e,t*2),vmt=(e,t)=>{switch(e.type.unit){case rt.SECOND:return x9(e,t);case rt.MILLISECOND:return I9(e,t);case rt.MICROSECOND:return T9(e,t);case rt.NANOSECOND:return E9(e,t)}},A9=({values:e},t)=>e[t],M9=({values:e},t)=>e[t],$9=({values:e},t)=>e[t],N9=({values:e},t)=>e[t],wmt=(e,t)=>{switch(e.type.unit){case rt.SECOND:return A9(e,t);case rt.MILLISECOND:return M9(e,t);case rt.MICROSECOND:return $9(e,t);case rt.NANOSECOND:return N9(e,t)}},_mt=({values:e,stride:t},n)=>xE.decimal(e.subarray(t*n,t*(n+1))),Smt=(e,t)=>{const{valueOffsets:n,stride:r,children:i}=e,{[t*r]:s,[t*r+1]:o}=n,l=i[0].slice(s,o-s);return new oe([l])},xmt=(e,t)=>{const{valueOffsets:n,children:r}=e,{[t]:i,[t+1]:s}=n,o=r[0];return new ME(o.slice(i,s-i))},Imt=(e,t)=>new EE(e,t),Tmt=(e,t)=>e.type.mode===an.Dense?k9(e,t):D9(e,t),k9=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return Mr.visit(r,e.valueOffsets[t])},D9=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return Mr.visit(r,t)},Emt=(e,t)=>{var n;return(n=e.dictionary)===null||n===void 0?void 0:n.get(e.values[t])},Amt=(e,t)=>e.type.unit===Vn.DAY_TIME?O9(e,t):F9(e,t),O9=({values:e},t)=>e.subarray(2*t,2*(t+1)),F9=({values:e},t)=>{const n=e[t],r=new Int32Array(2);return r[0]=Math.trunc(n/12),r[1]=Math.trunc(n%12),r},B9=({values:e},t)=>e[t],L9=({values:e},t)=>e[t],R9=({values:e},t)=>e[t],C9=({values:e},t)=>e[t],Mmt=(e,t)=>{switch(e.type.unit){case rt.SECOND:return B9(e,t);case rt.MILLISECOND:return L9(e,t);case rt.MICROSECOND:return R9(e,t);case rt.NANOSECOND:return C9(e,t)}},$mt=(e,t)=>{const{stride:n,children:r}=e,s=r[0].slice(t*n,n);return new oe([s])};ut.prototype.visitNull=gt(dmt);ut.prototype.visitBool=gt(hmt);ut.prototype.visitInt=gt(mmt);ut.prototype.visitInt8=gt(gl);ut.prototype.visitInt16=gt(gl);ut.prototype.visitInt32=gt(gl);ut.prototype.visitInt64=gt(w9);ut.prototype.visitUint8=gt(gl);ut.prototype.visitUint16=gt(gl);ut.prototype.visitUint32=gt(gl);ut.prototype.visitUint64=gt(w9);ut.prototype.visitFloat=gt(gmt);ut.prototype.visitFloat16=gt(pmt);ut.prototype.visitFloat32=gt(gl);ut.prototype.visitFloat64=gt(gl);ut.prototype.visitUtf8=gt(S9);ut.prototype.visitLargeUtf8=gt(S9);ut.prototype.visitBinary=gt(_9);ut.prototype.visitLargeBinary=gt(_9);ut.prototype.visitFixedSizeBinary=gt(ymt);ut.prototype.visitDate=gt(bmt);ut.prototype.visitDateDay=gt(b9);ut.prototype.visitDateMillisecond=gt(v9);ut.prototype.visitTimestamp=gt(vmt);ut.prototype.visitTimestampSecond=gt(x9);ut.prototype.visitTimestampMillisecond=gt(I9);ut.prototype.visitTimestampMicrosecond=gt(T9);ut.prototype.visitTimestampNanosecond=gt(E9);ut.prototype.visitTime=gt(wmt);ut.prototype.visitTimeSecond=gt(A9);ut.prototype.visitTimeMillisecond=gt(M9);ut.prototype.visitTimeMicrosecond=gt($9);ut.prototype.visitTimeNanosecond=gt(N9);ut.prototype.visitDecimal=gt(_mt);ut.prototype.visitList=gt(Smt);ut.prototype.visitStruct=gt(Imt);ut.prototype.visitUnion=gt(Tmt);ut.prototype.visitDenseUnion=gt(k9);ut.prototype.visitSparseUnion=gt(D9);ut.prototype.visitDictionary=gt(Emt);ut.prototype.visitInterval=gt(Amt);ut.prototype.visitIntervalDayTime=gt(O9);ut.prototype.visitIntervalYearMonth=gt(F9);ut.prototype.visitDuration=gt(Mmt);ut.prototype.visitDurationSecond=gt(B9);ut.prototype.visitDurationMillisecond=gt(L9);ut.prototype.visitDurationMicrosecond=gt(R9);ut.prototype.visitDurationNanosecond=gt(C9);ut.prototype.visitFixedSizeList=gt($mt);ut.prototype.visitMap=gt(xmt);const Mr=new ut,Ss=Symbol.for("keys"),cf=Symbol.for("vals");class ME{constructor(t){return this[Ss]=new oe([t.children[0]]).memoize(),this[cf]=t.children[1],new Proxy(this,new kmt)}[Symbol.iterator](){return new Nmt(this[Ss],this[cf])}get size(){return this[Ss].length}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[Ss],n=this[cf],r={};for(let i=-1,s=t.length;++i<s;)r[t.get(i)]=Mr.visit(n,i);return r}toString(){return`{${[...this].map(([t,n])=>`${Rp(t)}: ${Rp(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}class Nmt{constructor(t,n){this.keys=t,this.vals=n,this.keyIndex=0,this.numKeys=t.length}[Symbol.iterator](){return this}next(){const t=this.keyIndex;return t===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(t),Mr.visit(this.vals,t)]})}}class kmt{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[Ss].toArray().map(String)}has(t,n){return t[Ss].includes(n)}getOwnPropertyDescriptor(t,n){if(t[Ss].indexOf(n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[Ss].indexOf(n);if(r!==-1){const i=Mr.visit(Reflect.get(t,cf),r);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[Ss].indexOf(n);return i!==-1?(Si.visit(Reflect.get(t,cf),i,r),Reflect.set(t,n,r)):Reflect.has(t,n)?Reflect.set(t,n,r):!1}}Object.defineProperties(ME.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[Ss]:{writable:!0,enumerable:!1,configurable:!1,value:null},[cf]:{writable:!0,enumerable:!1,configurable:!1,value:null}});let t4;function U9(e,t,n,r){const{length:i=0}=e;let s=typeof t!="number"?0:t,o=typeof n!="number"?i:n;return s<0&&(s=(s%i+i)%i),o<0&&(o=(o%i+i)%i),o<s&&(t4=s,s=o,o=t4),o>i&&(o=i),r?r(e,s,o):[s,o]}const e4=e=>e!==e;function gd(e){if(typeof e!=="object"||e===null)return e4(e)?e4:n=>n===e;if(e instanceof Date){const n=e.valueOf();return r=>r instanceof Date?r.valueOf()===n:!1}return ArrayBuffer.isView(e)?n=>n?T0t(e,n):!1:e instanceof Map?Omt(e):Array.isArray(e)?Dmt(e):e instanceof oe?Fmt(e):Bmt(e,!0)}function Dmt(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=gd(e[n]);return rw(t)}function Omt(e){let t=-1;const n=[];for(const r of e.values())n[++t]=gd(r);return rw(n)}function Fmt(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=gd(e.get(n));return rw(t)}function Bmt(e,t=!1){const n=Object.keys(e);if(!t&&n.length===0)return()=>!1;const r=[];for(let i=-1,s=n.length;++i<s;)r[i]=gd(e[n[i]]);return rw(r,n)}function rw(e,t){return n=>{if(!n||typeof n!="object")return!1;switch(n.constructor){case Array:return Lmt(e,n);case Map:return n4(e,n,n.keys());case ME:case EE:case Object:case void 0:return n4(e,n,t||Object.keys(n))}return n instanceof oe?Rmt(e,n):!1}}function Lmt(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t[r]))return!1;return!0}function Rmt(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t.get(r)))return!1;return!0}function n4(e,t,n){const r=n[Symbol.iterator](),i=t instanceof Map?t.keys():Object.keys(t)[Symbol.iterator](),s=t instanceof Map?t.values():Object.values(t)[Symbol.iterator]();let o=0;const a=e.length;let l=s.next(),c=r.next(),u=i.next();for(;o<a&&!c.done&&!u.done&&!l.done&&!(c.value!==u.value||!e[o](l.value));++o,c=r.next(),u=i.next(),l=s.next());return o===a&&c.done&&u.done&&l.done?!0:(r.return&&r.return(),i.return&&i.return(),s.return&&s.return(),!1)}function P9(e,t,n,r){return(n&1<<r)!==0}function Cmt(e,t,n,r){return(n&1<<r)>>r}function gb(e,t,n){const r=n.byteLength+7&-8;if(e>0||n.byteLength<r){const i=new Uint8Array(r);return i.set(e%8===0?n.subarray(e>>3):bb(new $E(n,e,t,null,P9)).subarray(0,r)),i}return n}function bb(e){const t=[];let n=0,r=0,i=0;for(const o of e)o&&(i|=1<<r),++r===8&&(t[n++]=i,i=r=0);(n===0||r>0)&&(t[n++]=i);const s=new Uint8Array(t.length+7&-8);return s.set(t),s}class $E{constructor(t,n,r,i,s){this.bytes=t,this.length=r,this.context=i,this.get=s,this.bit=n%8,this.byteIndex=n>>3,this.byte=t[this.byteIndex++],this.index=0}next(){return this.index<this.length?(this.bit===8&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}function Lx(e,t,n){if(n-t<=0)return 0;if(n-t<8){let s=0;for(const o of new $E(e,t,n-t,e,Cmt))s+=o;return s}const r=n>>3<<3,i=t+(t%8===0?0:8-t%8);return Lx(e,t,i)+Lx(e,r,n)+Umt(e,i>>3,r-i>>3)}function Umt(e,t,n){let r=0,i=Math.trunc(t);const s=new DataView(e.buffer,e.byteOffset,e.byteLength),o=n===void 0?e.byteLength:i+n;for(;o-i>=4;)r+=Y_(s.getUint32(i)),i+=4;for(;o-i>=2;)r+=Y_(s.getUint16(i)),i+=2;for(;o-i>=1;)r+=Y_(s.getUint8(i)),i+=1;return r}function Y_(e){let t=Math.trunc(e);return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),(t+(t>>>4)&252645135)*16843009>>>24}const Pmt=-1;class ue{get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get nullable(){if(this._nullCount!==0){const{type:t}=this;return ot.isSparseUnion(t)?this.children.some(n=>n.nullable):ot.isDenseUnion(t)?this.children.some(n=>n.nullable):this.nullBitmap&&this.nullBitmap.byteLength>0}return!0}get byteLength(){let t=0;const{valueOffsets:n,values:r,nullBitmap:i,typeIds:s}=this;return n&&(t+=n.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),s&&(t+=s.byteLength),this.children.reduce((o,a)=>o+a.byteLength,t)}get nullCount(){if(ot.isUnion(this.type))return this.children.reduce((r,i)=>r+i.nullCount,0);let t=this._nullCount,n;return t<=Pmt&&(n=this.nullBitmap)&&(this._nullCount=t=this.length-Lx(n,this.offset,this.offset+this.length)),t}constructor(t,n,r,i,s,o=[],a){this.type=t,this.children=o,this.dictionary=a,this.offset=Math.floor(Math.max(n||0,0)),this.length=Math.floor(Math.max(r||0,0)),this._nullCount=Math.floor(Math.max(i||0,-1));let l;s instanceof ue?(this.stride=s.stride,this.values=s.values,this.typeIds=s.typeIds,this.nullBitmap=s.nullBitmap,this.valueOffsets=s.valueOffsets):(this.stride=lo(t),s&&((l=s[0])&&(this.valueOffsets=l),(l=s[1])&&(this.values=l),(l=s[2])&&(this.nullBitmap=l),(l=s[3])&&(this.typeIds=l)))}getValid(t){const{type:n}=this;if(ot.isUnion(n)){const r=n,i=this.children[r.typeIdToChildIndex[this.typeIds[t]]],s=r.mode===an.Dense?this.valueOffsets[t]:t;return i.getValid(s)}if(this.nullable&&this.nullCount>0){const r=this.offset+t;return(this.nullBitmap[r>>3]&1<<r%8)!==0}return!0}setValid(t,n){let r;const{type:i}=this;if(ot.isUnion(i)){const s=i,o=this.children[s.typeIdToChildIndex[this.typeIds[t]]],a=s.mode===an.Dense?this.valueOffsets[t]:t;r=o.getValid(a),o.setValid(a,n)}else{let{nullBitmap:s}=this;const{offset:o,length:a}=this,l=o+t,c=1<<l%8,u=l>>3;(!s||s.byteLength<=u)&&(s=new Uint8Array((o+a+63&-64)>>3).fill(255),this.nullCount>0&&s.set(gb(o,a,this.nullBitmap),0),Object.assign(this,{nullBitmap:s,_nullCount:-1}));const f=s[u];r=(f&c)!==0,n?s[u]=f|c:s[u]=f&~c}return r!==!!n&&(this._nullCount=this.nullCount+(n?-1:1)),n}clone(t=this.type,n=this.offset,r=this.length,i=this._nullCount,s=this,o=this.children){return new ue(t,n,r,i,s,o,this.dictionary)}slice(t,n){const{stride:r,typeId:i,children:s}=this,o=+(this._nullCount===0)-1,a=i===16?r:1,l=this._sliceBuffers(t,n,r,i);return this.clone(this.type,this.offset+t,n,o,l,s.length===0||this.valueOffsets?s:this._sliceChildren(s,a*t,a*n))}_changeLengthAndBackfillNullBitmap(t){if(this.typeId===$.Null)return this.clone(this.type,0,t,0);const{length:n,nullCount:r}=this,i=new Uint8Array((t+63&-64)>>3).fill(255,0,n>>3);i[n>>3]=(1<<n-(n&-8))-1,r>0&&i.set(gb(this.offset,n,this.nullBitmap),0);const s=this.buffers;return s[ao.VALIDITY]=i,this.clone(this.type,0,t,r+(t-n),s)}_sliceBuffers(t,n,r,i){let s;const{buffers:o}=this;return(s=o[ao.TYPE])&&(o[ao.TYPE]=s.subarray(t,t+n)),(s=o[ao.OFFSET])&&(o[ao.OFFSET]=s.subarray(t,t+n+1))||(s=o[ao.DATA])&&(o[ao.DATA]=i===6?s:s.subarray(r*t,r*(t+n))),o}_sliceChildren(t,n,r){return t.map(i=>i.slice(n,r))}}ue.prototype.children=Object.freeze([]);class Rh extends Bt{visit(t){return this.getVisitFn(t.type).call(this,t)}visitNull(t){const{["type"]:n,["offset"]:r=0,["length"]:i=0}=t;return new ue(n,r,i,i)}visitBool(t){const{["type"]:n,["offset"]:r=0}=t,i=jt(t.nullBitmap),s=de(n.ArrayType,t.data),{["length"]:o=s.length>>3,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new ue(n,r,o,a,[void 0,s,i])}visitInt(t){const{["type"]:n,["offset"]:r=0}=t,i=jt(t.nullBitmap),s=de(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new ue(n,r,o,a,[void 0,s,i])}visitFloat(t){const{["type"]:n,["offset"]:r=0}=t,i=jt(t.nullBitmap),s=de(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new ue(n,r,o,a,[void 0,s,i])}visitUtf8(t){const{["type"]:n,["offset"]:r=0}=t,i=jt(t.data),s=jt(t.nullBitmap),o=zd(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:l=t.nullBitmap?-1:0}=t;return new ue(n,r,a,l,[o,i,s])}visitLargeUtf8(t){const{["type"]:n,["offset"]:r=0}=t,i=jt(t.data),s=jt(t.nullBitmap),o=qN(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:l=t.nullBitmap?-1:0}=t;return new ue(n,r,a,l,[o,i,s])}visitBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=jt(t.data),s=jt(t.nullBitmap),o=zd(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:l=t.nullBitmap?-1:0}=t;return new ue(n,r,a,l,[o,i,s])}visitLargeBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=jt(t.data),s=jt(t.nullBitmap),o=qN(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:l=t.nullBitmap?-1:0}=t;return new ue(n,r,a,l,[o,i,s])}visitFixedSizeBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=jt(t.nullBitmap),s=de(n.ArrayType,t.data),{["length"]:o=s.length/lo(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new ue(n,r,o,a,[void 0,s,i])}visitDate(t){const{["type"]:n,["offset"]:r=0}=t,i=jt(t.nullBitmap),s=de(n.ArrayType,t.data),{["length"]:o=s.length/lo(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new ue(n,r,o,a,[void 0,s,i])}visitTimestamp(t){const{["type"]:n,["offset"]:r=0}=t,i=jt(t.nullBitmap),s=de(n.ArrayType,t.data),{["length"]:o=s.length/lo(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new ue(n,r,o,a,[void 0,s,i])}visitTime(t){const{["type"]:n,["offset"]:r=0}=t,i=jt(t.nullBitmap),s=de(n.ArrayType,t.data),{["length"]:o=s.length/lo(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new ue(n,r,o,a,[void 0,s,i])}visitDecimal(t){const{["type"]:n,["offset"]:r=0}=t,i=jt(t.nullBitmap),s=de(n.ArrayType,t.data),{["length"]:o=s.length/lo(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new ue(n,r,o,a,[void 0,s,i])}visitList(t){const{["type"]:n,["offset"]:r=0,["child"]:i}=t,s=jt(t.nullBitmap),o=zd(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:l=t.nullBitmap?-1:0}=t;return new ue(n,r,a,l,[o,void 0,s],[i])}visitStruct(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=jt(t.nullBitmap),{length:o=i.reduce((l,{length:c})=>Math.max(l,c),0),nullCount:a=t.nullBitmap?-1:0}=t;return new ue(n,r,o,a,[void 0,void 0,s],i)}visitUnion(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=de(n.ArrayType,t.typeIds),{["length"]:o=s.length,["nullCount"]:a=-1}=t;if(ot.isSparseUnion(n))return new ue(n,r,o,a,[void 0,void 0,void 0,s],i);const l=zd(t.valueOffsets);return new ue(n,r,o,a,[l,void 0,void 0,s],i)}visitDictionary(t){const{["type"]:n,["offset"]:r=0}=t,i=jt(t.nullBitmap),s=de(n.indices.ArrayType,t.data),{["dictionary"]:o=new oe([new Rh().visit({type:n.dictionary})])}=t,{["length"]:a=s.length,["nullCount"]:l=t.nullBitmap?-1:0}=t;return new ue(n,r,a,l,[void 0,s,i],[],o)}visitInterval(t){const{["type"]:n,["offset"]:r=0}=t,i=jt(t.nullBitmap),s=de(n.ArrayType,t.data),{["length"]:o=s.length/lo(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new ue(n,r,o,a,[void 0,s,i])}visitDuration(t){const{["type"]:n,["offset"]:r=0}=t,i=jt(t.nullBitmap),s=de(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new ue(n,r,o,a,[void 0,s,i])}visitFixedSizeList(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new Rh().visit({type:n.valueType})}=t,s=jt(t.nullBitmap),{["length"]:o=i.length/lo(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new ue(n,r,o,a,[void 0,void 0,s],[i])}visitMap(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new Rh().visit({type:n.childType})}=t,s=jt(t.nullBitmap),o=zd(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:l=t.nullBitmap?-1:0}=t;return new ue(n,r,a,l,[o,void 0,s],[i])}}const zmt=new Rh;function Lt(e){return zmt.visit(e)}class r4{constructor(t=0,n){this.numChunks=t,this.getChunkIterator=n,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const t=this.chunkIterator.next();if(!t.done)return t;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}function jmt(e){return e.some(t=>t.nullable)}function z9(e){return e.reduce((t,n)=>t+n.nullCount,0)}function j9(e){return e.reduce((t,n,r)=>(t[r+1]=t[r]+n.length,t),new Uint32Array(e.length+1))}function V9(e,t,n,r){const i=[];for(let s=-1,o=e.length;++s<o;){const a=e[s],l=t[s],{length:c}=a;if(l>=r)break;if(n>=l+c)continue;if(l>=n&&l+c<=r){i.push(a);continue}const u=Math.max(0,n-l),f=Math.min(r-l,c);i.push(a.slice(u,f-u))}return i.length===0&&i.push(e[0].slice(0,0)),i}function NE(e,t,n,r){let i=0,s=0,o=t.length-1;do{if(i>=o-1)return n<t[o]?r(e,i,n-t[i]):null;s=i+Math.trunc((o-i)*.5),n<t[s]?o=s:i=s}while(i<o)}function kE(e,t){return e.getValid(t)}function vb(e){function t(n,r,i){return e(n[r],i)}return function(n){const r=this.data;return NE(r,this._offsets,n,t)}}function Y9(e){let t;function n(r,i,s){return e(r[i],s,t)}return function(r,i){const s=this.data;t=i;const o=NE(s,this._offsets,r,n);return t=void 0,o}}function q9(e){let t;function n(r,i,s){let o=s,a=0,l=0;for(let c=i-1,u=r.length;++c<u;){const f=r[c];if(~(a=e(f,t,o)))return l+a;o=0,l+=f.length}return-1}return function(r,i){t=r;const s=this.data,o=typeof i!="number"?n(s,0,0):NE(s,this._offsets,i,n);return t=void 0,o}}class ft extends Bt{}function Vmt(e,t){return t===null&&e.length>0?0:-1}function Ymt(e,t){const{nullBitmap:n}=e;if(!n||e.nullCount<=0)return-1;let r=0;for(const i of new $E(n,e.offset+(t||0),e.length,n,P9)){if(!i)return r;++r}return-1}function St(e,t,n){if(t===void 0)return-1;if(t===null)switch(e.typeId){case $.Union:break;case $.Dictionary:break;default:return Ymt(e,n)}const r=Mr.getVisitFn(e),i=gd(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}function W9(e,t,n){const r=Mr.getVisitFn(e),i=gd(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}ft.prototype.visitNull=Vmt;ft.prototype.visitBool=St;ft.prototype.visitInt=St;ft.prototype.visitInt8=St;ft.prototype.visitInt16=St;ft.prototype.visitInt32=St;ft.prototype.visitInt64=St;ft.prototype.visitUint8=St;ft.prototype.visitUint16=St;ft.prototype.visitUint32=St;ft.prototype.visitUint64=St;ft.prototype.visitFloat=St;ft.prototype.visitFloat16=St;ft.prototype.visitFloat32=St;ft.prototype.visitFloat64=St;ft.prototype.visitUtf8=St;ft.prototype.visitLargeUtf8=St;ft.prototype.visitBinary=St;ft.prototype.visitLargeBinary=St;ft.prototype.visitFixedSizeBinary=St;ft.prototype.visitDate=St;ft.prototype.visitDateDay=St;ft.prototype.visitDateMillisecond=St;ft.prototype.visitTimestamp=St;ft.prototype.visitTimestampSecond=St;ft.prototype.visitTimestampMillisecond=St;ft.prototype.visitTimestampMicrosecond=St;ft.prototype.visitTimestampNanosecond=St;ft.prototype.visitTime=St;ft.prototype.visitTimeSecond=St;ft.prototype.visitTimeMillisecond=St;ft.prototype.visitTimeMicrosecond=St;ft.prototype.visitTimeNanosecond=St;ft.prototype.visitDecimal=St;ft.prototype.visitList=St;ft.prototype.visitStruct=St;ft.prototype.visitUnion=St;ft.prototype.visitDenseUnion=W9;ft.prototype.visitSparseUnion=W9;ft.prototype.visitDictionary=St;ft.prototype.visitInterval=St;ft.prototype.visitIntervalDayTime=St;ft.prototype.visitIntervalYearMonth=St;ft.prototype.visitDuration=St;ft.prototype.visitDurationSecond=St;ft.prototype.visitDurationMillisecond=St;ft.prototype.visitDurationMicrosecond=St;ft.prototype.visitDurationNanosecond=St;ft.prototype.visitFixedSizeList=St;ft.prototype.visitMap=St;const wb=new ft;class dt extends Bt{}function bt(e){const{type:t}=e;if(e.nullCount===0&&e.stride===1&&(t.typeId===$.Timestamp||t instanceof Za&&t.bitWidth!==64||t instanceof jp&&t.bitWidth!==64||t instanceof zp&&t.precision!==Ke.HALF))return new r4(e.data.length,r=>{const i=e.data[r];return i.values.subarray(0,i.length)[Symbol.iterator]()});let n=0;return new r4(e.data.length,r=>{const s=e.data[r].length,o=e.slice(n,n+s);return n+=s,new qmt(o)})}class qmt{constructor(t){this.vector=t,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}dt.prototype.visitNull=bt;dt.prototype.visitBool=bt;dt.prototype.visitInt=bt;dt.prototype.visitInt8=bt;dt.prototype.visitInt16=bt;dt.prototype.visitInt32=bt;dt.prototype.visitInt64=bt;dt.prototype.visitUint8=bt;dt.prototype.visitUint16=bt;dt.prototype.visitUint32=bt;dt.prototype.visitUint64=bt;dt.prototype.visitFloat=bt;dt.prototype.visitFloat16=bt;dt.prototype.visitFloat32=bt;dt.prototype.visitFloat64=bt;dt.prototype.visitUtf8=bt;dt.prototype.visitLargeUtf8=bt;dt.prototype.visitBinary=bt;dt.prototype.visitLargeBinary=bt;dt.prototype.visitFixedSizeBinary=bt;dt.prototype.visitDate=bt;dt.prototype.visitDateDay=bt;dt.prototype.visitDateMillisecond=bt;dt.prototype.visitTimestamp=bt;dt.prototype.visitTimestampSecond=bt;dt.prototype.visitTimestampMillisecond=bt;dt.prototype.visitTimestampMicrosecond=bt;dt.prototype.visitTimestampNanosecond=bt;dt.prototype.visitTime=bt;dt.prototype.visitTimeSecond=bt;dt.prototype.visitTimeMillisecond=bt;dt.prototype.visitTimeMicrosecond=bt;dt.prototype.visitTimeNanosecond=bt;dt.prototype.visitDecimal=bt;dt.prototype.visitList=bt;dt.prototype.visitStruct=bt;dt.prototype.visitUnion=bt;dt.prototype.visitDenseUnion=bt;dt.prototype.visitSparseUnion=bt;dt.prototype.visitDictionary=bt;dt.prototype.visitInterval=bt;dt.prototype.visitIntervalDayTime=bt;dt.prototype.visitIntervalYearMonth=bt;dt.prototype.visitDuration=bt;dt.prototype.visitDurationSecond=bt;dt.prototype.visitDurationMillisecond=bt;dt.prototype.visitDurationMicrosecond=bt;dt.prototype.visitDurationNanosecond=bt;dt.prototype.visitFixedSizeList=bt;dt.prototype.visitMap=bt;const DE=new dt;var H9;const G9={},X9={};class oe{constructor(t){var n,r,i;const s=t[0]instanceof oe?t.flatMap(a=>a.data):t;if(s.length===0||s.some(a=>!(a instanceof ue)))throw new TypeError("Vector constructor expects an Array of Data instances.");const o=(n=s[0])===null||n===void 0?void 0:n.type;switch(s.length){case 0:this._offsets=[0];break;case 1:{const{get:a,set:l,indexOf:c}=G9[o.typeId],u=s[0];this.isValid=f=>kE(u,f),this.get=f=>a(u,f),this.set=(f,d)=>l(u,f,d),this.indexOf=f=>c(u,f),this._offsets=[0,u.length];break}default:Object.setPrototypeOf(this,X9[o.typeId]),this._offsets=j9(s);break}this.data=s,this.type=o,this.stride=lo(o),this.numChildren=(i=(r=o.children)===null||r===void 0?void 0:r.length)!==null&&i!==void 0?i:0,this.length=this._offsets.at(-1)}get byteLength(){return this.data.reduce((t,n)=>t+n.byteLength,0)}get nullable(){return jmt(this.data)}get nullCount(){return z9(this.data)}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${$[this.type.typeId]}Vector`}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}includes(t,n){return this.indexOf(t,n)>-1}[Symbol.iterator](){return DE.visit(this)}concat(...t){return new oe(this.data.concat(t.flatMap(n=>n.data).flat(Number.POSITIVE_INFINITY)))}slice(t,n){return new oe(U9(this,t,n,({data:r,_offsets:i},s,o)=>V9(r,i,s,o)))}toJSON(){return[...this]}toArray(){const{type:t,data:n,length:r,stride:i,ArrayType:s}=this;switch(t.typeId){case $.Int:case $.Float:case $.Decimal:case $.Time:case $.Timestamp:switch(n.length){case 0:return new s;case 1:return n[0].values.subarray(0,r*i);default:return n.reduce((o,{values:a,length:l})=>(o.array.set(a.subarray(0,l*i),o.offset),o.offset+=l*i,o),{array:new s(r*i),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(t){var n;return this.getChildAt((n=this.type.children)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.numChildren?new oe(this.data.map(({children:n})=>n[t])):null}get isMemoized(){return ot.isDictionary(this.type)?this.data[0].dictionary.isMemoized:!1}memoize(){if(ot.isDictionary(this.type)){const t=new _b(this.data[0].dictionary),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new oe(n)}return new _b(this)}unmemoize(){if(ot.isDictionary(this.type)&&this.isMemoized){const t=this.data[0].dictionary.unmemoize(),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new oe(n)}return this}}H9=Symbol.toStringTag;oe[H9]=(e=>{e.type=ot.prototype,e.data=[],e.length=0,e.stride=1,e.numChildren=0,e._offsets=new Uint32Array([0]),e[Symbol.isConcatSpreadable]=!0;const t=Object.keys($).map(n=>$[n]).filter(n=>typeof n=="number"&&n!==$.NONE);for(const n of t){const r=Mr.getVisitFnByTypeId(n),i=Si.getVisitFnByTypeId(n),s=wb.getVisitFnByTypeId(n);G9[n]={get:r,set:i,indexOf:s},X9[n]=Object.create(e,{isValid:{value:vb(kE)},get:{value:vb(Mr.getVisitFnByTypeId(n))},set:{value:Y9(Si.getVisitFnByTypeId(n))},indexOf:{value:q9(wb.getVisitFnByTypeId(n))}})}return"Vector"})(oe.prototype);class _b extends oe{constructor(t){super(t.data);const n=this.get,r=this.set,i=this.slice,s=new Array(this.length);Object.defineProperty(this,"get",{value(o){const a=s[o];if(a!==void 0)return a;const l=n.call(this,o);return s[o]=l,l}}),Object.defineProperty(this,"set",{value(o,a){r.call(this,o,a),s[o]=a}}),Object.defineProperty(this,"slice",{value:(o,a)=>new _b(i.call(this,o,a))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new oe(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}class Rx{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(t,n,r,i){return t.prep(8,24),t.writeInt64(BigInt(i??0)),t.pad(4),t.writeInt32(r),t.writeInt64(BigInt(n??0)),t.offset()}}class kr{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFooter(t,n){return(n||new kr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFooter(t,n){return t.setPosition(t.position()+le),(n||new kr).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Je.V1}schema(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new fs).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}dictionaries(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new Rx).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}dictionariesLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}recordBatches(t,n){const r=this.bb.__offset(this.bb_pos,10);return r?(n||new Rx).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}recordBatchesLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new un).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startFooter(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,Je.V1)}static addSchema(t,n){t.addFieldOffset(1,n,0)}static addDictionaries(t,n){t.addFieldOffset(2,n,0)}static startDictionariesVector(t,n){t.startVector(24,n,8)}static addRecordBatches(t,n){t.addFieldOffset(3,n,0)}static startRecordBatchesVector(t,n){t.startVector(24,n,8)}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endFooter(t){return t.endObject()}static finishFooterBuffer(t,n){t.finish(n)}static finishSizePrefixedFooterBuffer(t,n){t.finish(n,void 0,!0)}}class ae{constructor(t=[],n,r,i=Je.V5){this.fields=t||[],this.metadata=n||new Map,r||(r=Cx(t)),this.dictionaries=r,this.metadataVersion=i}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(t=>t.name)}toString(){return`Schema<{ ${this.fields.map((t,n)=>`${n}: ${t}`).join(", ")} }>`}select(t){const n=new Set(t),r=this.fields.filter(i=>n.has(i.name));return new ae(r,this.metadata)}selectAt(t){const n=t.map(r=>this.fields[r]).filter(Boolean);return new ae(n,this.metadata)}assign(...t){const n=t[0]instanceof ae?t[0]:Array.isArray(t[0])?new ae(t[0]):new ae(t),r=[...this.fields],i=W0(W0(new Map,this.metadata),n.metadata),s=n.fields.filter(a=>{const l=r.findIndex(c=>c.name===a.name);return~l?(r[l]=a.clone({metadata:W0(W0(new Map,r[l].metadata),a.metadata)}))&&!1:!0}),o=Cx(s,new Map);return new ae([...r,...s],i,new Map([...this.dictionaries,...o]))}}ae.prototype.fields=null;ae.prototype.metadata=null;ae.prototype.dictionaries=null;class Me{static new(...t){let[n,r,i,s]=t;return t[0]&&typeof t[0]=="object"&&({name:n}=t[0],r===void 0&&(r=t[0].type),i===void 0&&(i=t[0].nullable),s===void 0&&(s=t[0].metadata)),new Me(`${n}`,r,i,s)}constructor(t,n,r=!1,i){this.name=t,this.type=n,this.nullable=r,this.metadata=i||new Map}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...t){let[n,r,i,s]=t;return!t[0]||typeof t[0]!="object"?[n=this.name,r=this.type,i=this.nullable,s=this.metadata]=t:{name:n=this.name,type:r=this.type,nullable:i=this.nullable,metadata:s=this.metadata}=t[0],Me.new(n,r,i,s)}}Me.prototype.type=null;Me.prototype.name=null;Me.prototype.nullable=null;Me.prototype.metadata=null;function W0(e,t){return new Map([...e||new Map,...t||new Map])}function Cx(e,t=new Map){for(let n=-1,r=e.length;++n<r;){const s=e[n].type;if(ot.isDictionary(s)){if(!t.has(s.id))t.set(s.id,s.dictionary);else if(t.get(s.id)!==s.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}s.children&&s.children.length>0&&Cx(s.children,t)}return t}var Wmt=XO,Hmt=If;class Vp{static decode(t){t=new Hmt(jt(t));const n=kr.getRootAsFooter(t),r=ae.decode(n.schema(),new Map,n.version());return new Gmt(r,n)}static encode(t){const n=new Wmt,r=ae.encode(n,t.schema);kr.startRecordBatchesVector(n,t.numRecordBatches);for(const o of[...t.recordBatches()].slice().reverse())Ja.encode(n,o);const i=n.endVector();kr.startDictionariesVector(n,t.numDictionaries);for(const o of[...t.dictionaryBatches()].slice().reverse())Ja.encode(n,o);const s=n.endVector();return kr.startFooter(n),kr.addSchema(n,r),kr.addVersion(n,Je.V5),kr.addRecordBatches(n,i),kr.addDictionaries(n,s),kr.finishFooterBuffer(n,kr.endFooter(n)),n.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}constructor(t,n=Je.V5,r,i){this.schema=t,this.version=n,r&&(this._recordBatches=r),i&&(this._dictionaryBatches=i)}*recordBatches(){for(let t,n=-1,r=this.numRecordBatches;++n<r;)(t=this.getRecordBatch(n))&&(yield t)}*dictionaryBatches(){for(let t,n=-1,r=this.numDictionaries;++n<r;)(t=this.getDictionaryBatch(n))&&(yield t)}getRecordBatch(t){return t>=0&&t<this.numRecordBatches&&this._recordBatches[t]||null}getDictionaryBatch(t){return t>=0&&t<this.numDictionaries&&this._dictionaryBatches[t]||null}}class Gmt extends Vp{get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}constructor(t,n){super(t,n.version()),this._footer=n}getRecordBatch(t){if(t>=0&&t<this.numRecordBatches){const n=this._footer.recordBatches(t);if(n)return Ja.decode(n)}return null}getDictionaryBatch(t){if(t>=0&&t<this.numDictionaries){const n=this._footer.dictionaries(t);if(n)return Ja.decode(n)}return null}}class Ja{static decode(t){return new Ja(t.metaDataLength(),t.bodyLength(),t.offset())}static encode(t,n){const{metaDataLength:r}=n,i=BigInt(n.offset),s=BigInt(n.bodyLength);return Rx.createBlock(t,i,r,s)}constructor(t,n,r){this.metaDataLength=t,this.offset=Dn(r),this.bodyLength=Dn(n)}}const Pe=Object.freeze({done:!0,value:void 0});class i4{constructor(t){this._json=t}get schema(){return this._json.schema}get batches(){return this._json.batches||[]}get dictionaries(){return this._json.dictionaries||[]}}class OE{tee(){return this._getDOMStream().tee()}pipe(t,n){return this._getNodeStream().pipe(t,n)}pipeTo(t,n){return this._getDOMStream().pipeTo(t,n)}pipeThrough(t,n){return this._getDOMStream().pipeThrough(t,n)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class Xmt extends OE{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(t=>this._closedPromiseResolve=t)}get closed(){return this._closedPromise}cancel(t){return W(this,void 0,void 0,function*(){yield this.return(t)})}write(t){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(t):this.resolvers.shift().resolve({done:!1,value:t}))}abort(t){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:t}:this.resolvers.shift().reject({done:!0,value:t}))}close(){if(this._closedPromiseResolve){const{resolvers:t}=this;for(;t.length>0;)t.shift().resolve(Pe);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(t){return ni.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,t)}toNodeStream(t){return ni.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,t)}throw(t){return W(this,void 0,void 0,function*(){return yield this.abort(t),Pe})}return(t){return W(this,void 0,void 0,function*(){return yield this.close(),Pe})}read(t){return W(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return W(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(...t){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((n,r)=>{this.resolvers.push({resolve:n,reject:r})}):Promise.resolve(Pe)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}}class km extends Xmt{write(t){if((t=jt(t)).byteLength>0)return super.write(t)}toString(t=!1){return t?kx(this.toUint8Array(!0)):this.toUint8Array(!1).then(kx)}toUint8Array(t=!1){return t?Cs(this._values)[0]:W(this,void 0,void 0,function*(){var n,r,i,s;const o=[];let a=0;try{for(var l=!0,c=Pr(this),u;u=yield c.next(),n=u.done,!n;l=!0){s=u.value,l=!1;const f=s;o.push(f),a+=f.byteLength}}catch(f){r={error:f}}finally{try{!l&&!n&&(i=c.return)&&(yield i.call(c))}finally{if(r)throw r.error}}return Cs(o,a)[0]})}}class Sb{constructor(t){t&&(this.source=new Qmt(ni.fromIterable(t)))}[Symbol.iterator](){return this}next(t){return this.source.next(t)}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}peek(t){return this.source.peek(t)}read(t){return this.source.read(t)}}class qf{constructor(t){t instanceof qf?this.source=t.source:t instanceof km?this.source=new _l(ni.fromAsyncIterable(t)):bP(t)?this.source=new _l(ni.fromNodeStream(t)):_E(t)?this.source=new _l(ni.fromDOMStream(t)):gP(t)?this.source=new _l(ni.fromDOMStream(t.body)):Py(t)?this.source=new _l(ni.fromIterable(t)):Ec(t)?this.source=new _l(ni.fromAsyncIterable(t)):md(t)&&(this.source=new _l(ni.fromAsyncIterable(t)))}[Symbol.asyncIterator](){return this}next(t){return this.source.next(t)}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}get closed(){return this.source.closed}cancel(t){return this.source.cancel(t)}peek(t){return this.source.peek(t)}read(t){return this.source.read(t)}}class Qmt{constructor(t){this.source=t}cancel(t){this.return(t)}peek(t){return this.next(t,"peek").value}read(t){return this.next(t,"read").value}next(t,n="read"){return this.source.next({cmd:n,size:t})}throw(t){return Object.create(this.source.throw&&this.source.throw(t)||Pe)}return(t){return Object.create(this.source.return&&this.source.return(t)||Pe)}}class _l{constructor(t){this.source=t,this._closedPromise=new Promise(n=>this._closedPromiseResolve=n)}cancel(t){return W(this,void 0,void 0,function*(){yield this.return(t)})}get closed(){return this._closedPromise}read(t){return W(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return W(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(t,n="read"){return W(this,void 0,void 0,function*(){return yield this.source.next({cmd:n,size:t})})}throw(t){return W(this,void 0,void 0,function*(){const n=this.source.throw&&(yield this.source.throw(t))||Pe;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(n)})}return(t){return W(this,void 0,void 0,function*(){const n=this.source.return&&(yield this.source.return(t))||Pe;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(n)})}}class s4 extends Sb{constructor(t,n){super(),this.position=0,this.buffer=jt(t),this.size=n===void 0?this.buffer.byteLength:n}readInt32(t){const{buffer:n,byteOffset:r}=this.readAt(t,4);return new DataView(n,r).getInt32(0,!0)}seek(t){return this.position=Math.min(t,this.size),t<this.size}read(t){const{buffer:n,size:r,position:i}=this;return n&&i<r?(typeof t!="number"&&(t=Number.POSITIVE_INFINITY),this.position=Math.min(r,i+Math.min(r-i,t)),n.subarray(i,this.position)):null}readAt(t,n){const r=this.buffer,i=Math.min(this.size,t+n);return r?r.subarray(t,i):new Uint8Array(n)}close(){this.buffer&&(this.buffer=null)}throw(t){return this.close(),{done:!0,value:t}}return(t){return this.close(),{done:!0,value:t}}}class xb extends qf{constructor(t,n){super(),this.position=0,this._handle=t,typeof n=="number"?this.size=n:this._pending=W(this,void 0,void 0,function*(){this.size=(yield t.stat()).size,delete this._pending})}readInt32(t){return W(this,void 0,void 0,function*(){const{buffer:n,byteOffset:r}=yield this.readAt(t,4);return new DataView(n,r).getInt32(0,!0)})}seek(t){return W(this,void 0,void 0,function*(){return this._pending&&(yield this._pending),this.position=Math.min(t,this.size),t<this.size})}read(t){return W(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:n,size:r,position:i}=this;if(n&&i<r){typeof t!="number"&&(t=Number.POSITIVE_INFINITY);let s=i,o=0,a=0;const l=Math.min(r,s+Math.min(r-s,t)),c=new Uint8Array(Math.max(0,(this.position=l)-s));for(;(s+=a)<l&&(o+=a)<c.byteLength;)({bytesRead:a}=yield n.read(c,o,c.byteLength-o,s));return c}return null})}readAt(t,n){return W(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:r,size:i}=this;if(r&&t+n<i){const s=Math.min(i,t+n),o=new Uint8Array(s-t);return(yield r.read(o,0,n,t)).buffer}return new Uint8Array(n)})}close(){return W(this,void 0,void 0,function*(){const t=this._handle;this._handle=null,t&&(yield t.close())})}throw(t){return W(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:t}})}return(t){return W(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:t}})}}const Kmt=65536;function Uu(e){return e<0&&(e=4294967295+e+1),`0x${e.toString(16)}`}const Wf=8,FE=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8];class Q9{constructor(t){this.buffer=t}high(){return this.buffer[1]}low(){return this.buffer[0]}_times(t){const n=new Uint32Array([this.buffer[1]>>>16,this.buffer[1]&65535,this.buffer[0]>>>16,this.buffer[0]&65535]),r=new Uint32Array([t.buffer[1]>>>16,t.buffer[1]&65535,t.buffer[0]>>>16,t.buffer[0]&65535]);let i=n[3]*r[3];this.buffer[0]=i&65535;let s=i>>>16;return i=n[2]*r[3],s+=i,i=n[3]*r[2]>>>0,s+=i,this.buffer[0]+=s<<16,this.buffer[1]=s>>>0<i?Kmt:0,this.buffer[1]+=s>>>16,this.buffer[1]+=n[1]*r[3]+n[2]*r[2]+n[3]*r[1],this.buffer[1]+=n[0]*r[3]+n[1]*r[2]+n[2]*r[1]+n[3]*r[0]<<16,this}_plus(t){const n=this.buffer[0]+t.buffer[0]>>>0;this.buffer[1]+=t.buffer[1],n<this.buffer[0]>>>0&&++this.buffer[1],this.buffer[0]=n}lessThan(t){return this.buffer[1]<t.buffer[1]||this.buffer[1]===t.buffer[1]&&this.buffer[0]<t.buffer[0]}equals(t){return this.buffer[1]===t.buffer[1]&&this.buffer[0]==t.buffer[0]}greaterThan(t){return t.lessThan(this)}hex(){return`${Uu(this.buffer[1])} ${Uu(this.buffer[0])}`}}class fe extends Q9{times(t){return this._times(t),this}plus(t){return this._plus(t),this}static from(t,n=new Uint32Array(2)){return fe.fromString(typeof t=="string"?t:t.toString(),n)}static fromNumber(t,n=new Uint32Array(2)){return fe.fromString(t.toString(),n)}static fromString(t,n=new Uint32Array(2)){const r=t.length,i=new fe(n);for(let s=0;s<r;){const o=Wf<r-s?Wf:r-s,a=new fe(new Uint32Array([Number.parseInt(t.slice(s,s+o),10),0])),l=new fe(new Uint32Array([FE[o],0]));i.times(l),i.plus(a),s+=o}return i}static convertArray(t){const n=new Uint32Array(t.length*2);for(let r=-1,i=t.length;++r<i;)fe.from(t[r],new Uint32Array(n.buffer,n.byteOffset+2*r*4,2));return n}static multiply(t,n){return new fe(new Uint32Array(t.buffer)).times(n)}static add(t,n){return new fe(new Uint32Array(t.buffer)).plus(n)}}class dr extends Q9{negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[0]==0&&++this.buffer[1],this}times(t){return this._times(t),this}plus(t){return this._plus(t),this}lessThan(t){const n=this.buffer[1]<<0,r=t.buffer[1]<<0;return n<r||n===r&&this.buffer[0]<t.buffer[0]}static from(t,n=new Uint32Array(2)){return dr.fromString(typeof t=="string"?t:t.toString(),n)}static fromNumber(t,n=new Uint32Array(2)){return dr.fromString(t.toString(),n)}static fromString(t,n=new Uint32Array(2)){const r=t.startsWith("-"),i=t.length,s=new dr(n);for(let o=r?1:0;o<i;){const a=Wf<i-o?Wf:i-o,l=new dr(new Uint32Array([Number.parseInt(t.slice(o,o+a),10),0])),c=new dr(new Uint32Array([FE[a],0]));s.times(c),s.plus(l),o+=a}return r?s.negate():s}static convertArray(t){const n=new Uint32Array(t.length*2);for(let r=-1,i=t.length;++r<i;)dr.from(t[r],new Uint32Array(n.buffer,n.byteOffset+2*r*4,2));return n}static multiply(t,n){return new dr(new Uint32Array(t.buffer)).times(n)}static add(t,n){return new dr(new Uint32Array(t.buffer)).plus(n)}}class ds{constructor(t){this.buffer=t}high(){return new dr(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2))}low(){return new dr(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset,2))}negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[2]=~this.buffer[2],this.buffer[3]=~this.buffer[3],this.buffer[0]==0&&++this.buffer[1],this.buffer[1]==0&&++this.buffer[2],this.buffer[2]==0&&++this.buffer[3],this}times(t){const n=new fe(new Uint32Array([this.buffer[3],0])),r=new fe(new Uint32Array([this.buffer[2],0])),i=new fe(new Uint32Array([this.buffer[1],0])),s=new fe(new Uint32Array([this.buffer[0],0])),o=new fe(new Uint32Array([t.buffer[3],0])),a=new fe(new Uint32Array([t.buffer[2],0])),l=new fe(new Uint32Array([t.buffer[1],0])),c=new fe(new Uint32Array([t.buffer[0],0]));let u=fe.multiply(s,c);this.buffer[0]=u.low();const f=new fe(new Uint32Array([u.high(),0]));return u=fe.multiply(i,c),f.plus(u),u=fe.multiply(s,l),f.plus(u),this.buffer[1]=f.low(),this.buffer[3]=f.lessThan(u)?1:0,this.buffer[2]=f.high(),new fe(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2)).plus(fe.multiply(r,c)).plus(fe.multiply(i,l)).plus(fe.multiply(s,a)),this.buffer[3]+=fe.multiply(n,c).plus(fe.multiply(r,l)).plus(fe.multiply(i,a)).plus(fe.multiply(s,o)).low(),this}plus(t){const n=new Uint32Array(4);return n[3]=this.buffer[3]+t.buffer[3]>>>0,n[2]=this.buffer[2]+t.buffer[2]>>>0,n[1]=this.buffer[1]+t.buffer[1]>>>0,n[0]=this.buffer[0]+t.buffer[0]>>>0,n[0]<this.buffer[0]>>>0&&++n[1],n[1]<this.buffer[1]>>>0&&++n[2],n[2]<this.buffer[2]>>>0&&++n[3],this.buffer[3]=n[3],this.buffer[2]=n[2],this.buffer[1]=n[1],this.buffer[0]=n[0],this}hex(){return`${Uu(this.buffer[3])} ${Uu(this.buffer[2])} ${Uu(this.buffer[1])} ${Uu(this.buffer[0])}`}static multiply(t,n){return new ds(new Uint32Array(t.buffer)).times(n)}static add(t,n){return new ds(new Uint32Array(t.buffer)).plus(n)}static from(t,n=new Uint32Array(4)){return ds.fromString(typeof t=="string"?t:t.toString(),n)}static fromNumber(t,n=new Uint32Array(4)){return ds.fromString(t.toString(),n)}static fromString(t,n=new Uint32Array(4)){const r=t.startsWith("-"),i=t.length,s=new ds(n);for(let o=r?1:0;o<i;){const a=Wf<i-o?Wf:i-o,l=new ds(new Uint32Array([Number.parseInt(t.slice(o,o+a),10),0,0,0])),c=new ds(new Uint32Array([FE[a],0,0,0]));s.times(c),s.plus(l),o+=a}return r?s.negate():s}static convertArray(t){const n=new Uint32Array(t.length*4);for(let r=-1,i=t.length;++r<i;)ds.from(t[r],new Uint32Array(n.buffer,n.byteOffset+4*4*r,4));return n}}class K9 extends Bt{constructor(t,n,r,i,s=Je.V5){super(),this.nodesIndex=-1,this.buffersIndex=-1,this.bytes=t,this.nodes=n,this.buffers=r,this.dictionaries=i,this.metadataVersion=s}visit(t){return super.visit(t instanceof Me?t.type:t)}visitNull(t,{length:n}=this.nextFieldNode()){return Lt({type:t,length:n})}visitBool(t,{length:n,nullCount:r}=this.nextFieldNode()){return Lt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitInt(t,{length:n,nullCount:r}=this.nextFieldNode()){return Lt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitFloat(t,{length:n,nullCount:r}=this.nextFieldNode()){return Lt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitUtf8(t,{length:n,nullCount:r}=this.nextFieldNode()){return Lt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),valueOffsets:this.readOffsets(t),data:this.readData(t)})}visitLargeUtf8(t,{length:n,nullCount:r}=this.nextFieldNode()){return Lt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),valueOffsets:this.readOffsets(t),data:this.readData(t)})}visitBinary(t,{length:n,nullCount:r}=this.nextFieldNode()){return Lt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),valueOffsets:this.readOffsets(t),data:this.readData(t)})}visitLargeBinary(t,{length:n,nullCount:r}=this.nextFieldNode()){return Lt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),valueOffsets:this.readOffsets(t),data:this.readData(t)})}visitFixedSizeBinary(t,{length:n,nullCount:r}=this.nextFieldNode()){return Lt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitDate(t,{length:n,nullCount:r}=this.nextFieldNode()){return Lt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitTimestamp(t,{length:n,nullCount:r}=this.nextFieldNode()){return Lt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitTime(t,{length:n,nullCount:r}=this.nextFieldNode()){return Lt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitDecimal(t,{length:n,nullCount:r}=this.nextFieldNode()){return Lt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitList(t,{length:n,nullCount:r}=this.nextFieldNode()){return Lt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),valueOffsets:this.readOffsets(t),child:this.visit(t.children[0])})}visitStruct(t,{length:n,nullCount:r}=this.nextFieldNode()){return Lt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),children:this.visitMany(t.children)})}visitUnion(t,{length:n,nullCount:r}=this.nextFieldNode()){return this.metadataVersion<Je.V5&&this.readNullBitmap(t,r),t.mode===an.Sparse?this.visitSparseUnion(t,{length:n,nullCount:r}):this.visitDenseUnion(t,{length:n,nullCount:r})}visitDenseUnion(t,{length:n,nullCount:r}=this.nextFieldNode()){return Lt({type:t,length:n,nullCount:r,typeIds:this.readTypeIds(t),valueOffsets:this.readOffsets(t),children:this.visitMany(t.children)})}visitSparseUnion(t,{length:n,nullCount:r}=this.nextFieldNode()){return Lt({type:t,length:n,nullCount:r,typeIds:this.readTypeIds(t),children:this.visitMany(t.children)})}visitDictionary(t,{length:n,nullCount:r}=this.nextFieldNode()){return Lt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t.indices),dictionary:this.readDictionary(t)})}visitInterval(t,{length:n,nullCount:r}=this.nextFieldNode()){return Lt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitDuration(t,{length:n,nullCount:r}=this.nextFieldNode()){return Lt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitFixedSizeList(t,{length:n,nullCount:r}=this.nextFieldNode()){return Lt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),child:this.visit(t.children[0])})}visitMap(t,{length:n,nullCount:r}=this.nextFieldNode()){return Lt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),valueOffsets:this.readOffsets(t),child:this.visit(t.children[0])})}nextFieldNode(){return this.nodes[++this.nodesIndex]}nextBufferRange(){return this.buffers[++this.buffersIndex]}readNullBitmap(t,n,r=this.nextBufferRange()){return n>0&&this.readData(t,r)||new Uint8Array(0)}readOffsets(t,n){return this.readData(t,n)}readTypeIds(t,n){return this.readData(t,n)}readData(t,{length:n,offset:r}=this.nextBufferRange()){return this.bytes.subarray(r,r+n)}readDictionary(t){return this.dictionaries.get(t.id)}}class Zmt extends K9{constructor(t,n,r,i,s){super(new Uint8Array(0),n,r,i,s),this.sources=t}readNullBitmap(t,n,{offset:r}=this.nextBufferRange()){return n<=0?new Uint8Array(0):bb(this.sources[r])}readOffsets(t,{offset:n}=this.nextBufferRange()){return de(Uint8Array,de(t.OffsetArrayType,this.sources[n]))}readTypeIds(t,{offset:n}=this.nextBufferRange()){return de(Uint8Array,de(t.ArrayType,this.sources[n]))}readData(t,{offset:n}=this.nextBufferRange()){const{sources:r}=this;return ot.isTimestamp(t)||(ot.isInt(t)||ot.isTime(t))&&t.bitWidth===64||ot.isDuration(t)||ot.isDate(t)&&t.unit===ar.MILLISECOND?de(Uint8Array,dr.convertArray(r[n])):ot.isDecimal(t)?de(Uint8Array,ds.convertArray(r[n])):ot.isBinary(t)||ot.isLargeBinary(t)||ot.isFixedSizeBinary(t)?Jmt(r[n]):ot.isBool(t)?bb(r[n]):ot.isUtf8(t)||ot.isLargeUtf8(t)?wE(r[n].join("")):de(Uint8Array,de(t.ArrayType,r[n].map(i=>+i)))}}function Jmt(e){const t=e.join(""),n=new Uint8Array(t.length/2);for(let r=0;r<t.length;r+=2)n[r>>1]=Number.parseInt(t.slice(r,r+2),16);return n}class ht extends Bt{compareSchemas(t,n){return t===n||n instanceof t.constructor&&this.compareManyFields(t.fields,n.fields)}compareManyFields(t,n){return t===n||Array.isArray(t)&&Array.isArray(n)&&t.length===n.length&&t.every((r,i)=>this.compareFields(r,n[i]))}compareFields(t,n){return t===n||n instanceof t.constructor&&t.name===n.name&&t.nullable===n.nullable&&this.visit(t.type,n.type)}}function ur(e,t){return t instanceof e.constructor}function Fc(e,t){return e===t||ur(e,t)}function Xo(e,t){return e===t||ur(e,t)&&e.bitWidth===t.bitWidth&&e.isSigned===t.isSigned}function iw(e,t){return e===t||ur(e,t)&&e.precision===t.precision}function tgt(e,t){return e===t||ur(e,t)&&e.byteWidth===t.byteWidth}function BE(e,t){return e===t||ur(e,t)&&e.unit===t.unit}function zy(e,t){return e===t||ur(e,t)&&e.unit===t.unit&&e.timezone===t.timezone}function jy(e,t){return e===t||ur(e,t)&&e.unit===t.unit&&e.bitWidth===t.bitWidth}function egt(e,t){return e===t||ur(e,t)&&e.children.length===t.children.length&&tl.compareManyFields(e.children,t.children)}function ngt(e,t){return e===t||ur(e,t)&&e.children.length===t.children.length&&tl.compareManyFields(e.children,t.children)}function LE(e,t){return e===t||ur(e,t)&&e.mode===t.mode&&e.typeIds.every((n,r)=>n===t.typeIds[r])&&tl.compareManyFields(e.children,t.children)}function rgt(e,t){return e===t||ur(e,t)&&e.id===t.id&&e.isOrdered===t.isOrdered&&tl.visit(e.indices,t.indices)&&tl.visit(e.dictionary,t.dictionary)}function RE(e,t){return e===t||ur(e,t)&&e.unit===t.unit}function Vy(e,t){return e===t||ur(e,t)&&e.unit===t.unit}function igt(e,t){return e===t||ur(e,t)&&e.listSize===t.listSize&&e.children.length===t.children.length&&tl.compareManyFields(e.children,t.children)}function sgt(e,t){return e===t||ur(e,t)&&e.keysSorted===t.keysSorted&&e.children.length===t.children.length&&tl.compareManyFields(e.children,t.children)}ht.prototype.visitNull=Fc;ht.prototype.visitBool=Fc;ht.prototype.visitInt=Xo;ht.prototype.visitInt8=Xo;ht.prototype.visitInt16=Xo;ht.prototype.visitInt32=Xo;ht.prototype.visitInt64=Xo;ht.prototype.visitUint8=Xo;ht.prototype.visitUint16=Xo;ht.prototype.visitUint32=Xo;ht.prototype.visitUint64=Xo;ht.prototype.visitFloat=iw;ht.prototype.visitFloat16=iw;ht.prototype.visitFloat32=iw;ht.prototype.visitFloat64=iw;ht.prototype.visitUtf8=Fc;ht.prototype.visitLargeUtf8=Fc;ht.prototype.visitBinary=Fc;ht.prototype.visitLargeBinary=Fc;ht.prototype.visitFixedSizeBinary=tgt;ht.prototype.visitDate=BE;ht.prototype.visitDateDay=BE;ht.prototype.visitDateMillisecond=BE;ht.prototype.visitTimestamp=zy;ht.prototype.visitTimestampSecond=zy;ht.prototype.visitTimestampMillisecond=zy;ht.prototype.visitTimestampMicrosecond=zy;ht.prototype.visitTimestampNanosecond=zy;ht.prototype.visitTime=jy;ht.prototype.visitTimeSecond=jy;ht.prototype.visitTimeMillisecond=jy;ht.prototype.visitTimeMicrosecond=jy;ht.prototype.visitTimeNanosecond=jy;ht.prototype.visitDecimal=Fc;ht.prototype.visitList=egt;ht.prototype.visitStruct=ngt;ht.prototype.visitUnion=LE;ht.prototype.visitDenseUnion=LE;ht.prototype.visitSparseUnion=LE;ht.prototype.visitDictionary=rgt;ht.prototype.visitInterval=RE;ht.prototype.visitIntervalDayTime=RE;ht.prototype.visitIntervalYearMonth=RE;ht.prototype.visitDuration=Vy;ht.prototype.visitDurationSecond=Vy;ht.prototype.visitDurationMillisecond=Vy;ht.prototype.visitDurationMicrosecond=Vy;ht.prototype.visitDurationNanosecond=Vy;ht.prototype.visitFixedSizeList=igt;ht.prototype.visitMap=sgt;const tl=new ht;function Ux(e,t){return tl.compareSchemas(e,t)}function q_(e,t){return ogt(e,t.map(n=>n.data.concat()))}function ogt(e,t){const n=[...e.fields],r=[],i={numBatches:t.reduce((f,d)=>Math.max(f,d.length),0)};let s=0,o=0,a=-1;const l=t.length;let c,u=[];for(;i.numBatches-- >0;){for(o=Number.POSITIVE_INFINITY,a=-1;++a<l;)u[a]=c=t[a].shift(),o=Math.min(o,c?c.length:o);Number.isFinite(o)&&(u=agt(n,o,u,t,i),o>0&&(r[s++]=Lt({type:new tr(n),length:o,nullCount:0,children:u.slice()})))}return[e=e.assign(n),r.map(f=>new yr(e,f))]}function agt(e,t,n,r,i){var s;const o=(t+63&-64)>>3;for(let a=-1,l=r.length;++a<l;){const c=n[a],u=c==null?void 0:c.length;if(u>=t)u===t?n[a]=c:(n[a]=c.slice(0,t),i.numBatches=Math.max(i.numBatches,r[a].unshift(c.slice(t,u-t))));else{const f=e[a];e[a]=f.clone({nullable:!0}),n[a]=(s=c==null?void 0:c._changeLengthAndBackfillNullBitmap(t))!==null&&s!==void 0?s:Lt({type:f.type,length:t,nullCount:t,nullBitmap:new Uint8Array(o)})}}return n}var Z9;class Pn{constructor(...t){var n,r;if(t.length===0)return this.batches=[],this.schema=new ae([]),this._offsets=[0],this;let i,s;t[0]instanceof ae&&(i=t.shift()),t.at(-1)instanceof Uint32Array&&(s=t.pop());const o=l=>{if(l){if(l instanceof yr)return[l];if(l instanceof Pn)return l.batches;if(l instanceof ue){if(l.type instanceof tr)return[new yr(new ae(l.type.children),l)]}else{if(Array.isArray(l))return l.flatMap(c=>o(c));if(typeof l[Symbol.iterator]=="function")return[...l].flatMap(c=>o(c));if(typeof l=="object"){const c=Object.keys(l),u=c.map(h=>new oe([l[h]])),f=i??new ae(c.map((h,p)=>new Me(String(h),u[p].type,u[p].nullable))),[,d]=q_(f,u);return d.length===0?[new yr(l)]:d}}}return[]},a=t.flatMap(l=>o(l));if(i=(r=i??((n=a[0])===null||n===void 0?void 0:n.schema))!==null&&r!==void 0?r:new ae([]),!(i instanceof ae))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const l of a){if(!(l instanceof yr))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!Ux(i,l.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=i,this.batches=a,this._offsets=s??j9(this.data)}get data(){return this.batches.map(({data:t})=>t)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((t,n)=>t+n.length,0)}get nullCount(){return this._nullCount===-1&&(this._nullCount=z9(this.data)),this._nullCount}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}[Symbol.iterator](){return this.batches.length>0?DE.visit(new oe(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(`,
  `)}
]`}concat(...t){const n=this.schema,r=this.data.concat(t.flatMap(({data:i})=>i));return new Pn(n,r.map(i=>new yr(n,i)))}slice(t,n){const r=this.schema;[t,n]=U9({length:this.numRows},t,n);const i=V9(this.data,this._offsets,t,n);return new Pn(r,i.map(s=>new yr(r,s)))}getChild(t){return this.getChildAt(this.schema.fields.findIndex(n=>n.name===t))}getChildAt(t){if(t>-1&&t<this.schema.fields.length){const n=this.data.map(r=>r.children[t]);if(n.length===0){const{type:r}=this.schema.fields[t],i=Lt({type:r,length:0,nullCount:0});n.push(i._changeLengthAndBackfillNullBitmap(this.numRows))}return new oe(n)}return null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=[...this.batches];if(t>-1&&t<this.numCols){n||(n=new oe([Lt({type:new Ka,length:this.numRows})]));const s=r.fields.slice(),o=s[t].clone({type:n.type}),a=this.schema.fields.map((l,c)=>this.getChildAt(c));[s[t],a[t]]=[o,n],[r,i]=q_(r,a)}return new Pn(r,i)}select(t){const n=this.schema.fields.reduce((r,i,s)=>r.set(i.name,s),new Map);return this.selectAt(t.map(r=>n.get(r)).filter(r=>r>-1))}selectAt(t){const n=this.schema.selectAt(t),r=this.batches.map(i=>i.selectAt(t));return new Pn(n,r)}assign(t){const n=this.schema.fields,[r,i]=t.schema.fields.reduce((a,l,c)=>{const[u,f]=a,d=n.findIndex(h=>h.name===l.name);return~d?f[d]=c:u.push(c),a},[[],[]]),s=this.schema.assign(t.schema),o=[...n.map((a,l)=>[l,i[l]]).map(([a,l])=>l===void 0?this.getChildAt(a):t.getChildAt(l)),...r.map(a=>t.getChildAt(a))].filter(Boolean);return new Pn(...q_(s,o))}}Z9=Symbol.toStringTag;Pn[Z9]=(e=>(e.schema=null,e.batches=[],e._offsets=new Uint32Array([0]),e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,e.isValid=vb(kE),e.get=vb(Mr.getVisitFn($.Struct)),e.set=Y9(Si.getVisitFn($.Struct)),e.indexOf=q9(wb.getVisitFn($.Struct)),"Table"))(Pn.prototype);var J9;let yr=class mh{constructor(...t){switch(t.length){case 2:{if([this.schema]=t,!(this.schema instanceof ae))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=Lt({nullCount:0,type:new tr(this.schema.fields),children:this.schema.fields.map(n=>Lt({type:n.type,nullCount:0}))})]=t,!(this.data instanceof ue))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=o4(this.schema,this.data.children);break}case 1:{const[n]=t,{fields:r,children:i,length:s}=Object.keys(n).reduce((l,c,u)=>(l.children[u]=n[c],l.length=Math.max(l.length,n[c].length),l.fields[u]=Me.new({name:c,type:n[c].type,nullable:!0}),l),{length:0,fields:new Array,children:new Array}),o=new ae(r),a=Lt({type:new tr(r),length:s,children:i,nullCount:0});[this.schema,this.data]=o4(o,a.children,s);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=tz(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(t){return this.data.getValid(t)}get(t){return Mr.visit(this.data,t)}set(t,n){return Si.visit(this.data,t,n)}indexOf(t,n){return wb.visit(this.data,t,n)}[Symbol.iterator](){return DE.visit(new oe([this.data]))}toArray(){return[...this]}concat(...t){return new Pn(this.schema,[this,...t])}slice(t,n){const[r]=new oe([this.data]).slice(t,n).data;return new mh(this.schema,r)}getChild(t){var n;return this.getChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.schema.fields.length?new oe([this.data.children[t]]):null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=this.data;if(t>-1&&t<this.numCols){n||(n=new oe([Lt({type:new Ka,length:this.numRows})]));const s=r.fields.slice(),o=i.children.slice(),a=s[t].clone({type:n.type});[s[t],o[t]]=[a,n.data[0]],r=new ae(s,new Map(this.schema.metadata)),i=Lt({type:new tr(s),children:o})}return new mh(r,i)}select(t){const n=this.schema.select(t),r=new tr(n.fields),i=[];for(const s of t){const o=this.schema.fields.findIndex(a=>a.name===s);~o&&(i[o]=this.data.children[o])}return new mh(n,Lt({type:r,length:this.numRows,children:i}))}selectAt(t){const n=this.schema.selectAt(t),r=t.map(s=>this.data.children[s]).filter(Boolean),i=Lt({type:new tr(n.fields),length:this.numRows,children:r});return new mh(n,i)}};J9=Symbol.toStringTag;yr[J9]=(e=>(e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(yr.prototype);function o4(e,t,n=t.reduce((r,i)=>Math.max(r,i.length),0)){var r;const i=[...e.fields],s=[...t],o=(n+63&-64)>>3;for(const[a,l]of e.fields.entries()){const c=t[a];(!c||c.length!==n)&&(i[a]=l.clone({nullable:!0}),s[a]=(r=c==null?void 0:c._changeLengthAndBackfillNullBitmap(n))!==null&&r!==void 0?r:Lt({type:l.type,length:n,nullCount:n,nullBitmap:new Uint8Array(o)}))}return[e.assign(i),Lt({type:new tr(i),length:n,children:s})]}function tz(e,t,n=new Map){var r,i;if(((r=e==null?void 0:e.length)!==null&&r!==void 0?r:0)>0&&(e==null?void 0:e.length)===(t==null?void 0:t.length))for(let s=-1,o=e.length;++s<o;){const{type:a}=e[s],l=t[s];for(const c of[l,...((i=l==null?void 0:l.dictionary)===null||i===void 0?void 0:i.data)||[]])tz(a.children,c==null?void 0:c.children,n);if(ot.isDictionary(a)){const{id:c}=a;if(!n.has(c))l!=null&&l.dictionary&&n.set(c,l.dictionary);else if(n.get(c)!==l.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}}return n}class CE extends yr{constructor(t){const n=t.fields.map(i=>Lt({type:i.type})),r=Lt({type:new tr(t.fields),nullCount:0,children:n});super(t,r)}}let ta=class as{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMessage(t,n){return(n||new as).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMessage(t,n){return t.setPosition(t.position()+le),(n||new as).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Je.V1}headerType(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):Zt.NONE}header(t){const n=this.bb.__offset(this.bb_pos,8);return n?this.bb.__union(t,this.bb_pos+n):null}bodyLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new un).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startMessage(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,Je.V1)}static addHeaderType(t,n){t.addFieldInt8(1,n,Zt.NONE)}static addHeader(t,n){t.addFieldOffset(2,n,0)}static addBodyLength(t,n){t.addFieldInt64(3,n,BigInt("0"))}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endMessage(t){return t.endObject()}static finishMessageBuffer(t,n){t.finish(n)}static finishSizePrefixedMessageBuffer(t,n){t.finish(n,void 0,!0)}static createMessage(t,n,r,i,s,o){return as.startMessage(t),as.addVersion(t,n),as.addHeaderType(t,r),as.addHeader(t,i),as.addBodyLength(t,s),as.addCustomMetadata(t,o),as.endMessage(t)}};class lgt extends Bt{visit(t,n){return t==null||n==null?void 0:super.visit(t,n)}visitNull(t,n){return KN.startNull(n),KN.endNull(n)}visitInt(t,n){return Or.startInt(n),Or.addBitWidth(n,t.bitWidth),Or.addIsSigned(n,t.isSigned),Or.endInt(n)}visitFloat(t,n){return ws.startFloatingPoint(n),ws.addPrecision(n,t.precision),ws.endFloatingPoint(n)}visitBinary(t,n){return WN.startBinary(n),WN.endBinary(n)}visitLargeBinary(t,n){return GN.startLargeBinary(n),GN.endLargeBinary(n)}visitBool(t,n){return HN.startBool(n),HN.endBool(n)}visitUtf8(t,n){return ZN.startUtf8(n),ZN.endUtf8(n)}visitLargeUtf8(t,n){return XN.startLargeUtf8(n),XN.endLargeUtf8(n)}visitDecimal(t,n){return uu.startDecimal(n),uu.addScale(n,t.scale),uu.addPrecision(n,t.precision),uu.addBitWidth(n,t.bitWidth),uu.endDecimal(n)}visitDate(t,n){return Tm.startDate(n),Tm.addUnit(n,t.unit),Tm.endDate(n)}visitTime(t,n){return si.startTime(n),si.addUnit(n,t.unit),si.addBitWidth(n,t.bitWidth),si.endTime(n)}visitTimestamp(t,n){const r=t.timezone&&n.createString(t.timezone)||void 0;return oi.startTimestamp(n),oi.addUnit(n,t.unit),r!==void 0&&oi.addTimezone(n,r),oi.endTimestamp(n)}visitInterval(t,n){return _s.startInterval(n),_s.addUnit(n,t.unit),_s.endInterval(n)}visitDuration(t,n){return Em.startDuration(n),Em.addUnit(n,t.unit),Em.endDuration(n)}visitList(t,n){return QN.startList(n),QN.endList(n)}visitStruct(t,n){return Xl.startStruct_(n),Xl.endStruct_(n)}visitUnion(t,n){pr.startTypeIdsVector(n,t.typeIds.length);const r=pr.createTypeIdsVector(n,t.typeIds);return pr.startUnion(n),pr.addMode(n,t.mode),pr.addTypeIds(n,r),pr.endUnion(n)}visitDictionary(t,n){const r=this.visit(t.indices,n);return po.startDictionaryEncoding(n),po.addId(n,BigInt(t.id)),po.addIsOrdered(n,t.isOrdered),r!==void 0&&po.addIndexType(n,r),po.endDictionaryEncoding(n)}visitFixedSizeBinary(t,n){return Am.startFixedSizeBinary(n),Am.addByteWidth(n,t.byteWidth),Am.endFixedSizeBinary(n)}visitFixedSizeList(t,n){return Mm.startFixedSizeList(n),Mm.addListSize(n,t.listSize),Mm.endFixedSizeList(n)}visitMap(t,n){return $m.startMap(n),$m.addKeysSorted(n,t.keysSorted),$m.endMap(n)}}const W_=new lgt;function cgt(e,t=new Map){return new ae(fgt(e,t),Dm(e.metadata),t)}function ez(e){return new Wr(e.count,nz(e.columns),rz(e.columns))}function ugt(e){return new Us(ez(e.data),e.id,e.isDelta)}function fgt(e,t){return(e.fields||[]).filter(Boolean).map(n=>Me.fromJSON(n,t))}function a4(e,t){return(e.children||[]).filter(Boolean).map(n=>Me.fromJSON(n,t))}function nz(e){return(e||[]).reduce((t,n)=>[...t,new el(n.count,dgt(n.VALIDITY)),...nz(n.children)],[])}function rz(e,t=[]){for(let n=-1,r=(e||[]).length;++n<r;){const i=e[n];i.VALIDITY&&t.push(new Es(t.length,i.VALIDITY.length)),i.TYPE_ID&&t.push(new Es(t.length,i.TYPE_ID.length)),i.OFFSET&&t.push(new Es(t.length,i.OFFSET.length)),i.DATA&&t.push(new Es(t.length,i.DATA.length)),t=rz(i.children,t)}return t}function dgt(e){return(e||[]).reduce((t,n)=>t+ +(n===0),0)}function hgt(e,t){let n,r,i,s,o,a;return!t||!(s=e.dictionary)?(o=c4(e,a4(e,t)),i=new Me(e.name,o,e.nullable,Dm(e.metadata))):t.has(n=s.id)?(r=(r=s.indexType)?l4(r):new Pp,a=new Yf(t.get(n),r,n,s.isOrdered),i=new Me(e.name,a,e.nullable,Dm(e.metadata))):(r=(r=s.indexType)?l4(r):new Pp,t.set(n,o=c4(e,a4(e,t))),a=new Yf(o,r,n,s.isOrdered),i=new Me(e.name,a,e.nullable,Dm(e.metadata))),i||null}function Dm(e=[]){return new Map(e.map(({key:t,value:n})=>[t,n]))}function l4(e){return new Za(e.isSigned,e.bitWidth)}function c4(e,t){const n=e.type.name;switch(n){case"NONE":return new Ka;case"null":return new Ka;case"binary":return new nb;case"largebinary":return new rb;case"utf8":return new ib;case"largeutf8":return new sb;case"bool":return new ob;case"list":return new db((t||[])[0]);case"struct":return new tr(t||[]);case"struct_":return new tr(t||[])}switch(n){case"int":{const r=e.type;return new Za(r.isSigned,r.bitWidth)}case"floatingpoint":{const r=e.type;return new zp(Ke[r.precision])}case"decimal":{const r=e.type;return new ab(r.scale,r.precision,r.bitWidth)}case"date":{const r=e.type;return new lb(ar[r.unit])}case"time":{const r=e.type;return new jp(rt[r.unit],r.bitWidth)}case"timestamp":{const r=e.type;return new cb(rt[r.unit],r.timezone)}case"interval":{const r=e.type;return new ub(Vn[r.unit])}case"duration":{const r=e.type;return new fb(rt[r.unit])}case"union":{const r=e.type,[i,...s]=(r.mode+"").toLowerCase(),o=i.toUpperCase()+s.join("");return new hb(an[o],r.typeIds||[],t||[])}case"fixedsizebinary":{const r=e.type;return new pb(r.byteWidth)}case"fixedsizelist":{const r=e.type;return new yb(r.listSize,(t||[])[0])}case"map":{const r=e.type;return new mb((t||[])[0],r.keysSorted)}}throw new Error(`Unrecognized type: "${n}"`)}var pgt=XO,ygt=If;class er{static fromJSON(t,n){const r=new er(0,Je.V5,n);return r._createHeader=mgt(t,n),r}static decode(t){t=new ygt(jt(t));const n=ta.getRootAsMessage(t),r=n.bodyLength(),i=n.version(),s=n.headerType(),o=new er(r,i,s);return o._createHeader=ggt(n,s),o}static encode(t){const n=new pgt;let r=-1;return t.isSchema()?r=ae.encode(n,t.header()):t.isRecordBatch()?r=Wr.encode(n,t.header()):t.isDictionaryBatch()&&(r=Us.encode(n,t.header())),ta.startMessage(n),ta.addVersion(n,Je.V5),ta.addHeader(n,r),ta.addHeaderType(n,t.headerType),ta.addBodyLength(n,BigInt(t.bodyLength)),ta.finishMessageBuffer(n,ta.endMessage(n)),n.asUint8Array()}static from(t,n=0){if(t instanceof ae)return new er(0,Je.V5,Zt.Schema,t);if(t instanceof Wr)return new er(n,Je.V5,Zt.RecordBatch,t);if(t instanceof Us)return new er(n,Je.V5,Zt.DictionaryBatch,t);throw new Error(`Unrecognized Message header: ${t}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===Zt.Schema}isRecordBatch(){return this.headerType===Zt.RecordBatch}isDictionaryBatch(){return this.headerType===Zt.DictionaryBatch}constructor(t,n,r,i){this._version=n,this._headerType=r,this.body=new Uint8Array(0),i&&(this._createHeader=()=>i),this._bodyLength=Dn(t)}}class Wr{get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}constructor(t,n,r){this._nodes=n,this._buffers=r,this._length=Dn(t)}}class Us{get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}constructor(t,n,r=!1){this._data=t,this._isDelta=r,this._id=Dn(n)}}class Es{constructor(t,n){this.offset=Dn(t),this.length=Dn(n)}}class el{constructor(t,n){this.length=Dn(t),this.nullCount=Dn(n)}}function mgt(e,t){return()=>{switch(t){case Zt.Schema:return ae.fromJSON(e);case Zt.RecordBatch:return Wr.fromJSON(e);case Zt.DictionaryBatch:return Us.fromJSON(e)}throw new Error(`Unrecognized Message type: { name: ${Zt[t]}, type: ${t} }`)}}function ggt(e,t){return()=>{switch(t){case Zt.Schema:return ae.decode(e.header(new fs),new Map,e.version());case Zt.RecordBatch:return Wr.decode(e.header(new oo),e.version());case Zt.DictionaryBatch:return Us.decode(e.header(new lu),e.version())}throw new Error(`Unrecognized Message type: { name: ${Zt[t]}, type: ${t} }`)}}Me.encode=Mgt;Me.decode=Egt;Me.fromJSON=hgt;ae.encode=Agt;ae.decode=bgt;ae.fromJSON=cgt;Wr.encode=$gt;Wr.decode=vgt;Wr.fromJSON=ez;Us.encode=Ngt;Us.decode=wgt;Us.fromJSON=ugt;el.encode=kgt;el.decode=Sgt;Es.encode=Dgt;Es.decode=_gt;function bgt(e,t=new Map,n=Je.V5){const r=Tgt(e,t);return new ae(r,Om(e),t,n)}function vgt(e,t=Je.V5){if(e.compression()!==null)throw new Error("Record batch compression not implemented");return new Wr(e.length(),xgt(e),Igt(e,t))}function wgt(e,t=Je.V5){return new Us(Wr.decode(e.data(),t),e.id(),e.isDelta())}function _gt(e){return new Es(e.offset(),e.length())}function Sgt(e){return new el(e.length(),e.nullCount())}function xgt(e){const t=[];for(let n,r=-1,i=-1,s=e.nodesLength();++r<s;)(n=e.nodes(r))&&(t[++i]=el.decode(n));return t}function Igt(e,t){const n=[];for(let r,i=-1,s=-1,o=e.buffersLength();++i<o;)(r=e.buffers(i))&&(t<Je.V4&&(r.bb_pos+=8*(i+1)),n[++s]=Es.decode(r));return n}function Tgt(e,t){const n=[];for(let r,i=-1,s=-1,o=e.fieldsLength();++i<o;)(r=e.fields(i))&&(n[++s]=Me.decode(r,t));return n}function u4(e,t){const n=[];for(let r,i=-1,s=-1,o=e.childrenLength();++i<o;)(r=e.children(i))&&(n[++s]=Me.decode(r,t));return n}function Egt(e,t){let n,r,i,s,o,a;return!t||!(a=e.dictionary())?(i=d4(e,u4(e,t)),r=new Me(e.name(),i,e.nullable(),Om(e))):t.has(n=Dn(a.id()))?(s=(s=a.indexType())?f4(s):new Pp,o=new Yf(t.get(n),s,n,a.isOrdered()),r=new Me(e.name(),o,e.nullable(),Om(e))):(s=(s=a.indexType())?f4(s):new Pp,t.set(n,i=d4(e,u4(e,t))),o=new Yf(i,s,n,a.isOrdered()),r=new Me(e.name(),o,e.nullable(),Om(e))),r||null}function Om(e){const t=new Map;if(e)for(let n,r,i=-1,s=Math.trunc(e.customMetadataLength());++i<s;)(n=e.customMetadata(i))&&(r=n.key())!=null&&t.set(r,n.value());return t}function f4(e){return new Za(e.isSigned(),e.bitWidth())}function d4(e,t){const n=e.typeType();switch(n){case xe.NONE:return new Ka;case xe.Null:return new Ka;case xe.Binary:return new nb;case xe.LargeBinary:return new rb;case xe.Utf8:return new ib;case xe.LargeUtf8:return new sb;case xe.Bool:return new ob;case xe.List:return new db((t||[])[0]);case xe.Struct_:return new tr(t||[])}switch(n){case xe.Int:{const r=e.type(new Or);return new Za(r.isSigned(),r.bitWidth())}case xe.FloatingPoint:{const r=e.type(new ws);return new zp(r.precision())}case xe.Decimal:{const r=e.type(new uu);return new ab(r.scale(),r.precision(),r.bitWidth())}case xe.Date:{const r=e.type(new Tm);return new lb(r.unit())}case xe.Time:{const r=e.type(new si);return new jp(r.unit(),r.bitWidth())}case xe.Timestamp:{const r=e.type(new oi);return new cb(r.unit(),r.timezone())}case xe.Interval:{const r=e.type(new _s);return new ub(r.unit())}case xe.Duration:{const r=e.type(new Em);return new fb(r.unit())}case xe.Union:{const r=e.type(new pr);return new hb(r.mode(),r.typeIdsArray()||[],t||[])}case xe.FixedSizeBinary:{const r=e.type(new Am);return new pb(r.byteWidth())}case xe.FixedSizeList:{const r=e.type(new Mm);return new yb(r.listSize(),(t||[])[0])}case xe.Map:{const r=e.type(new $m);return new mb((t||[])[0],r.keysSorted())}}throw new Error(`Unrecognized type: "${xe[n]}" (${n})`)}function Agt(e,t){const n=t.fields.map(s=>Me.encode(e,s));fs.startFieldsVector(e,n.length);const r=fs.createFieldsVector(e,n),i=t.metadata&&t.metadata.size>0?fs.createCustomMetadataVector(e,[...t.metadata].map(([s,o])=>{const a=e.createString(`${s}`),l=e.createString(`${o}`);return un.startKeyValue(e),un.addKey(e,a),un.addValue(e,l),un.endKeyValue(e)})):-1;return fs.startSchema(e),fs.addFields(e,r),fs.addEndianness(e,Ogt?Vf.Little:Vf.Big),i!==-1&&fs.addCustomMetadata(e,i),fs.endSchema(e)}function Mgt(e,t){let n=-1,r=-1,i=-1;const s=t.type;let o=t.typeId;ot.isDictionary(s)?(o=s.dictionary.typeId,i=W_.visit(s,e),r=W_.visit(s.dictionary,e)):r=W_.visit(s,e);const a=(s.children||[]).map(u=>Me.encode(e,u)),l=ti.createChildrenVector(e,a),c=t.metadata&&t.metadata.size>0?ti.createCustomMetadataVector(e,[...t.metadata].map(([u,f])=>{const d=e.createString(`${u}`),h=e.createString(`${f}`);return un.startKeyValue(e),un.addKey(e,d),un.addValue(e,h),un.endKeyValue(e)})):-1;return t.name&&(n=e.createString(t.name)),ti.startField(e),ti.addType(e,r),ti.addTypeType(e,o),ti.addChildren(e,l),ti.addNullable(e,!!t.nullable),n!==-1&&ti.addName(e,n),i!==-1&&ti.addDictionary(e,i),c!==-1&&ti.addCustomMetadata(e,c),ti.endField(e)}function $gt(e,t){const n=t.nodes||[],r=t.buffers||[];oo.startNodesVector(e,n.length);for(const o of n.slice().reverse())el.encode(e,o);const i=e.endVector();oo.startBuffersVector(e,r.length);for(const o of r.slice().reverse())Es.encode(e,o);const s=e.endVector();return oo.startRecordBatch(e),oo.addLength(e,BigInt(t.length)),oo.addNodes(e,i),oo.addBuffers(e,s),oo.endRecordBatch(e)}function Ngt(e,t){const n=Wr.encode(e,t.data);return lu.startDictionaryBatch(e),lu.addId(e,BigInt(t.id)),lu.addIsDelta(e,t.isDelta),lu.addData(e,n),lu.endDictionaryBatch(e)}function kgt(e,t){return SP.createFieldNode(e,BigInt(t.length),BigInt(t.nullCount))}function Dgt(e,t){return _P.createBuffer(e,BigInt(t.offset),BigInt(t.length))}const Ogt=(()=>{const e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),new Int16Array(e)[0]===256})(),UE=e=>`Expected ${Zt[e]} Message in stream, but was null or length 0.`,PE=e=>`Header pointer of flatbuffer-encoded ${Zt[e]} Message is null or length 0.`,iz=(e,t)=>`Expected to read ${e} metadata bytes, but only read ${t}.`,sz=(e,t)=>`Expected to read ${e} bytes for message body, but only read ${t}.`;class oz{constructor(t){this.source=t instanceof Sb?t:new Sb(t)}[Symbol.iterator](){return this}next(){let t;return(t=this.readMetadataLength()).done||t.value===-1&&(t=this.readMetadataLength()).done||(t=this.readMetadata(t.value)).done?Pe:t}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}readMessage(t){let n;if((n=this.next()).done)return null;if(t!=null&&n.value.headerType!==t)throw new Error(UE(t));return n.value}readMessageBody(t){if(t<=0)return new Uint8Array(0);const n=jt(this.source.read(t));if(n.byteLength<t)throw new Error(sz(t,n.byteLength));return n.byteOffset%8===0&&n.byteOffset+n.byteLength<=n.buffer.byteLength?n:n.slice()}readSchema(t=!1){const n=Zt.Schema,r=this.readMessage(n),i=r==null?void 0:r.header();if(t&&!i)throw new Error(PE(n));return i}readMetadataLength(){const t=this.source.read(sw),n=t&&new If(t),r=(n==null?void 0:n.readInt32(0))||0;return{done:r===0,value:r}}readMetadata(t){const n=this.source.read(t);if(!n)return Pe;if(n.byteLength<t)throw new Error(iz(t,n.byteLength));return{done:!1,value:er.decode(n)}}}class Fgt{constructor(t,n){this.source=t instanceof qf?t:mP(t)?new xb(t,n):new qf(t)}[Symbol.asyncIterator](){return this}next(){return W(this,void 0,void 0,function*(){let t;return(t=yield this.readMetadataLength()).done||t.value===-1&&(t=yield this.readMetadataLength()).done||(t=yield this.readMetadata(t.value)).done?Pe:t})}throw(t){return W(this,void 0,void 0,function*(){return yield this.source.throw(t)})}return(t){return W(this,void 0,void 0,function*(){return yield this.source.return(t)})}readMessage(t){return W(this,void 0,void 0,function*(){let n;if((n=yield this.next()).done)return null;if(t!=null&&n.value.headerType!==t)throw new Error(UE(t));return n.value})}readMessageBody(t){return W(this,void 0,void 0,function*(){if(t<=0)return new Uint8Array(0);const n=jt(yield this.source.read(t));if(n.byteLength<t)throw new Error(sz(t,n.byteLength));return n.byteOffset%8===0&&n.byteOffset+n.byteLength<=n.buffer.byteLength?n:n.slice()})}readSchema(t=!1){return W(this,void 0,void 0,function*(){const n=Zt.Schema,r=yield this.readMessage(n),i=r==null?void 0:r.header();if(t&&!i)throw new Error(PE(n));return i})}readMetadataLength(){return W(this,void 0,void 0,function*(){const t=yield this.source.read(sw),n=t&&new If(t),r=(n==null?void 0:n.readInt32(0))||0;return{done:r===0,value:r}})}readMetadata(t){return W(this,void 0,void 0,function*(){const n=yield this.source.read(t);if(!n)return Pe;if(n.byteLength<t)throw new Error(iz(t,n.byteLength));return{done:!1,value:er.decode(n)}})}}class Bgt extends oz{constructor(t){super(new Uint8Array(0)),this._schema=!1,this._body=[],this._batchIndex=0,this._dictionaryIndex=0,this._json=t instanceof i4?t:new i4(t)}next(){const{_json:t}=this;if(!this._schema)return this._schema=!0,{done:!1,value:er.fromJSON(t.schema,Zt.Schema)};if(this._dictionaryIndex<t.dictionaries.length){const n=t.dictionaries[this._dictionaryIndex++];return this._body=n.data.columns,{done:!1,value:er.fromJSON(n,Zt.DictionaryBatch)}}if(this._batchIndex<t.batches.length){const n=t.batches[this._batchIndex++];return this._body=n.columns,{done:!1,value:er.fromJSON(n,Zt.RecordBatch)}}return this._body=[],Pe}readMessageBody(t){return n(this._body);function n(r){return(r||[]).reduce((i,s)=>[...i,...s.VALIDITY&&[s.VALIDITY]||[],...s.TYPE_ID&&[s.TYPE_ID]||[],...s.OFFSET&&[s.OFFSET]||[],...s.DATA&&[s.DATA]||[],...n(s.children)],[])}}readMessage(t){let n;if((n=this.next()).done)return null;if(t!=null&&n.value.headerType!==t)throw new Error(UE(t));return n.value}readSchema(){const t=Zt.Schema,n=this.readMessage(t),r=n==null?void 0:n.header();if(!n||!r)throw new Error(PE(t));return r}}const sw=4,Px="ARROW1",Yp=new Uint8Array(Px.length);for(let e=0;e<Px.length;e+=1)Yp[e]=Px.codePointAt(e);function zE(e,t=0){for(let n=-1,r=Yp.length;++n<r;)if(Yp[n]!==e[t+n])return!1;return!0}const Yy=Yp.length,az=Yy+sw,Lgt=Yy*2+sw;class mi extends OE{constructor(t){super(),this._impl=t}get closed(){return this._impl.closed}get schema(){return this._impl.schema}get autoDestroy(){return this._impl.autoDestroy}get dictionaries(){return this._impl.dictionaries}get numDictionaries(){return this._impl.numDictionaries}get numRecordBatches(){return this._impl.numRecordBatches}get footer(){return this._impl.isFile()?this._impl.footer:null}isSync(){return this._impl.isSync()}isAsync(){return this._impl.isAsync()}isFile(){return this._impl.isFile()}isStream(){return this._impl.isStream()}next(){return this._impl.next()}throw(t){return this._impl.throw(t)}return(t){return this._impl.return(t)}cancel(){return this._impl.cancel()}reset(t){return this._impl.reset(t),this._DOMStream=void 0,this._nodeStream=void 0,this}open(t){const n=this._impl.open(t);return Ec(n)?n.then(()=>this):this}readRecordBatch(t){return this._impl.isFile()?this._impl.readRecordBatch(t):null}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}toDOMStream(){return ni.toDOMStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this})}toNodeStream(){return ni.toNodeStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this},{objectMode:!0})}static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,n){throw new Error('"throughDOM" not available in this environment')}static from(t){return t instanceof mi?t:Dx(t)?Pgt(t):mP(t)?Vgt(t):Ec(t)?W(this,void 0,void 0,function*(){return yield mi.from(yield t)}):gP(t)||_E(t)||bP(t)||md(t)?jgt(new qf(t)):zgt(new Sb(t))}static readAll(t){return t instanceof mi?t.isSync()?h4(t):p4(t):Dx(t)||ArrayBuffer.isView(t)||Py(t)||yP(t)?h4(t):p4(t)}}class Ib extends mi{constructor(t){super(t),this._impl=t}readAll(){return[...this]}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return on(this,arguments,function*(){yield K(yield*$a(Pr(this[Symbol.iterator]())))})}}class Tb extends mi{constructor(t){super(t),this._impl=t}readAll(){var t,n,r,i;return W(this,void 0,void 0,function*(){const s=new Array;try{for(var o=!0,a=Pr(this),l;l=yield a.next(),t=l.done,!t;o=!0){i=l.value,o=!1;const c=i;s.push(c)}}catch(c){n={error:c}}finally{try{!o&&!t&&(r=a.return)&&(yield r.call(a))}finally{if(n)throw n.error}}return s})}[Symbol.iterator](){throw new Error("AsyncRecordBatchStreamReader is not Iterable")}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}}class lz extends Ib{constructor(t){super(t),this._impl=t}}class Rgt extends Tb{constructor(t){super(t),this._impl=t}}class cz{get numDictionaries(){return this._dictionaryIndex}get numRecordBatches(){return this._recordBatchIndex}constructor(t=new Map){this.closed=!1,this.autoDestroy=!0,this._dictionaryIndex=0,this._recordBatchIndex=0,this.dictionaries=t}isSync(){return!1}isAsync(){return!1}isFile(){return!1}isStream(){return!1}reset(t){return this._dictionaryIndex=0,this._recordBatchIndex=0,this.schema=t,this.dictionaries=new Map,this}_loadRecordBatch(t,n){const r=this._loadVectors(t,n,this.schema.fields),i=Lt({type:new tr(this.schema.fields),length:t.length,children:r});return new yr(this.schema,i)}_loadDictionaryBatch(t,n){const{id:r,isDelta:i}=t,{dictionaries:s,schema:o}=this,a=s.get(r);if(i||!a){const l=o.dictionaries.get(r),c=this._loadVectors(t.data,n,[l]);return(a&&i?a.concat(new oe(c)):new oe(c)).memoize()}return a.memoize()}_loadVectors(t,n,r){return new K9(n,t.nodes,t.buffers,this.dictionaries,this.schema.metadataVersion).visitMany(r)}}class Eb extends cz{constructor(t,n){super(n),this._reader=Dx(t)?new Bgt(this._handle=t):new oz(this._handle=t)}isSync(){return!0}isStream(){return!0}[Symbol.iterator](){return this}cancel(){!this.closed&&(this.closed=!0)&&(this.reset()._reader.return(),this._reader=null,this.dictionaries=null)}open(t){return this.closed||(this.autoDestroy=fz(this,t),this.schema||(this.schema=this._reader.readSchema())||this.cancel()),this}throw(t){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.throw(t):Pe}return(t){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.return(t):Pe}next(){if(this.closed)return Pe;let t;const{_reader:n}=this;for(;t=this._readNextMessageAndValidate();)if(t.isSchema())this.reset(t.header());else if(t.isRecordBatch()){this._recordBatchIndex++;const r=t.header(),i=n.readMessageBody(t.bodyLength);return{done:!1,value:this._loadRecordBatch(r,i)}}else if(t.isDictionaryBatch()){this._dictionaryIndex++;const r=t.header(),i=n.readMessageBody(t.bodyLength),s=this._loadDictionaryBatch(r,i);this.dictionaries.set(r.id,s)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new CE(this.schema)}):this.return()}_readNextMessageAndValidate(t){return this._reader.readMessage(t)}}class Ab extends cz{constructor(t,n){super(n),this._reader=new Fgt(this._handle=t)}isAsync(){return!0}isStream(){return!0}[Symbol.asyncIterator](){return this}cancel(){return W(this,void 0,void 0,function*(){!this.closed&&(this.closed=!0)&&(yield this.reset()._reader.return(),this._reader=null,this.dictionaries=null)})}open(t){return W(this,void 0,void 0,function*(){return this.closed||(this.autoDestroy=fz(this,t),this.schema||(this.schema=yield this._reader.readSchema())||(yield this.cancel())),this})}throw(t){return W(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.throw(t):Pe})}return(t){return W(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.return(t):Pe})}next(){return W(this,void 0,void 0,function*(){if(this.closed)return Pe;let t;const{_reader:n}=this;for(;t=yield this._readNextMessageAndValidate();)if(t.isSchema())yield this.reset(t.header());else if(t.isRecordBatch()){this._recordBatchIndex++;const r=t.header(),i=yield n.readMessageBody(t.bodyLength);return{done:!1,value:this._loadRecordBatch(r,i)}}else if(t.isDictionaryBatch()){this._dictionaryIndex++;const r=t.header(),i=yield n.readMessageBody(t.bodyLength),s=this._loadDictionaryBatch(r,i);this.dictionaries.set(r.id,s)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new CE(this.schema)}):yield this.return()})}_readNextMessageAndValidate(t){return W(this,void 0,void 0,function*(){return yield this._reader.readMessage(t)})}}class uz extends Eb{get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}constructor(t,n){super(t instanceof s4?t:new s4(t),n)}isSync(){return!0}isFile(){return!0}open(t){if(!this.closed&&!this._footer){this.schema=(this._footer=this._readFooter()).schema;for(const n of this._footer.dictionaryBatches())n&&this._readDictionaryBatch(this._dictionaryIndex++)}return super.open(t)}readRecordBatch(t){var n;if(this.closed)return null;this._footer||this.open();const r=(n=this._footer)===null||n===void 0?void 0:n.getRecordBatch(t);if(r&&this._handle.seek(r.offset)){const i=this._reader.readMessage(Zt.RecordBatch);if(i!=null&&i.isRecordBatch()){const s=i.header(),o=this._reader.readMessageBody(i.bodyLength);return this._loadRecordBatch(s,o)}}return null}_readDictionaryBatch(t){var n;const r=(n=this._footer)===null||n===void 0?void 0:n.getDictionaryBatch(t);if(r&&this._handle.seek(r.offset)){const i=this._reader.readMessage(Zt.DictionaryBatch);if(i!=null&&i.isDictionaryBatch()){const s=i.header(),o=this._reader.readMessageBody(i.bodyLength),a=this._loadDictionaryBatch(s,o);this.dictionaries.set(s.id,a)}}}_readFooter(){const{_handle:t}=this,n=t.size-az,r=t.readInt32(n),i=t.readAt(n-r,r);return Vp.decode(i)}_readNextMessageAndValidate(t){var n;if(this._footer||this.open(),this._footer&&this._recordBatchIndex<this.numRecordBatches){const r=(n=this._footer)===null||n===void 0?void 0:n.getRecordBatch(this._recordBatchIndex);if(r&&this._handle.seek(r.offset))return this._reader.readMessage(t)}return null}}class Cgt extends Ab{get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}constructor(t,...n){const r=typeof n[0]!="number"?n.shift():void 0,i=n[0]instanceof Map?n.shift():void 0;super(t instanceof xb?t:new xb(t,r),i)}isFile(){return!0}isAsync(){return!0}open(t){const n=Object.create(null,{open:{get:()=>super.open}});return W(this,void 0,void 0,function*(){if(!this.closed&&!this._footer){this.schema=(this._footer=yield this._readFooter()).schema;for(const r of this._footer.dictionaryBatches())r&&(yield this._readDictionaryBatch(this._dictionaryIndex++))}return yield n.open.call(this,t)})}readRecordBatch(t){var n;return W(this,void 0,void 0,function*(){if(this.closed)return null;this._footer||(yield this.open());const r=(n=this._footer)===null||n===void 0?void 0:n.getRecordBatch(t);if(r&&(yield this._handle.seek(r.offset))){const i=yield this._reader.readMessage(Zt.RecordBatch);if(i!=null&&i.isRecordBatch()){const s=i.header(),o=yield this._reader.readMessageBody(i.bodyLength);return this._loadRecordBatch(s,o)}}return null})}_readDictionaryBatch(t){var n;return W(this,void 0,void 0,function*(){const r=(n=this._footer)===null||n===void 0?void 0:n.getDictionaryBatch(t);if(r&&(yield this._handle.seek(r.offset))){const i=yield this._reader.readMessage(Zt.DictionaryBatch);if(i!=null&&i.isDictionaryBatch()){const s=i.header(),o=yield this._reader.readMessageBody(i.bodyLength),a=this._loadDictionaryBatch(s,o);this.dictionaries.set(s.id,a)}}})}_readFooter(){return W(this,void 0,void 0,function*(){const{_handle:t}=this;t._pending&&(yield t._pending);const n=t.size-az,r=yield t.readInt32(n),i=yield t.readAt(n-r,r);return Vp.decode(i)})}_readNextMessageAndValidate(t){return W(this,void 0,void 0,function*(){if(this._footer||(yield this.open()),this._footer&&this._recordBatchIndex<this.numRecordBatches){const n=this._footer.getRecordBatch(this._recordBatchIndex);if(n&&(yield this._handle.seek(n.offset)))return yield this._reader.readMessage(t)}return null})}}class Ugt extends Eb{constructor(t,n){super(t,n)}_loadVectors(t,n,r){return new Zmt(n,t.nodes,t.buffers,this.dictionaries,this.schema.metadataVersion).visitMany(r)}}function fz(e,t){return t&&typeof t.autoDestroy=="boolean"?t.autoDestroy:e.autoDestroy}function*h4(e){const t=mi.from(e);try{if(!t.open({autoDestroy:!1}).closed)do yield t;while(!t.reset().open().closed)}finally{t.cancel()}}function p4(e){return on(this,arguments,function*(){const n=yield K(mi.from(e));try{if(!(yield K(n.open({autoDestroy:!1}))).closed)do yield yield K(n);while(!(yield K(n.reset().open())).closed)}finally{yield K(n.cancel())}})}function Pgt(e){return new Ib(new Ugt(e))}function zgt(e){const t=e.peek(Yy+7&-8);return t&&t.byteLength>=4?zE(t)?new lz(new uz(e.read())):new Ib(new Eb(e)):new Ib(new Eb(function*(){}()))}function jgt(e){return W(this,void 0,void 0,function*(){const t=yield e.peek(Yy+7&-8);return t&&t.byteLength>=4?zE(t)?new lz(new uz(yield e.read())):new Tb(new Ab(e)):new Tb(new Ab(function(){return on(this,arguments,function*(){})}()))})}function Vgt(e){return W(this,void 0,void 0,function*(){const{size:t}=yield e.stat(),n=new xb(e,t);return t>=Lgt&&zE(yield n.readAt(0,Yy+7&-8))?new Rgt(new Cgt(n)):new Tb(new Ab(n))})}class Ye extends Bt{static assemble(...t){const n=i=>i.flatMap(s=>Array.isArray(s)?n(s):s instanceof yr?s.data.children:s.data),r=new Ye;return r.visitMany(n(t)),r}constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}visit(t){if(t instanceof oe)return this.visitMany(t.data),this;const{type:n}=t;if(!ot.isDictionary(n)){const{length:r}=t;if(r>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");if(ot.isUnion(n))this.nodes.push(new el(r,0));else{const{nullCount:i}=t;ot.isNull(n)||Pi.call(this,i<=0?new Uint8Array(0):gb(t.offset,r,t.nullBitmap)),this.nodes.push(new el(r,i))}}return super.visit(t)}visitNull(t){return this}visitDictionary(t){return this.visit(t.clone(t.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function Pi(e){const t=e.byteLength+7&-8;return this.buffers.push(e),this.bufferRegions.push(new Es(this._byteLength,t)),this._byteLength+=t,this}function Ygt(e){var t;const{type:n,length:r,typeIds:i,valueOffsets:s}=e;if(Pi.call(this,i),n.mode===an.Sparse)return zx.call(this,e);if(n.mode===an.Dense){if(e.offset<=0)return Pi.call(this,s),zx.call(this,e);{const o=new Int32Array(r),a=Object.create(null),l=Object.create(null);for(let c,u,f=-1;++f<r;)(c=i[f])!==void 0&&((u=a[c])===void 0&&(u=a[c]=s[f]),o[f]=s[f]-u,l[c]=((t=l[c])!==null&&t!==void 0?t:0)+1);Pi.call(this,o),this.visitMany(e.children.map((c,u)=>{const f=n.typeIds[u],d=a[f],h=l[f];return c.slice(d,Math.min(r,h))}))}}return this}function qgt(e){let t;return e.nullCount>=e.length?Pi.call(this,new Uint8Array(0)):(t=e.values)instanceof Uint8Array?Pi.call(this,gb(e.offset,e.length,t)):Pi.call(this,bb(e.values))}function Qo(e){return Pi.call(this,e.values.subarray(0,e.length*e.stride))}function ow(e){const{length:t,values:n,valueOffsets:r}=e,i=Dn(r[0]),s=Dn(r[t]),o=Math.min(s-i,n.byteLength-i);return Pi.call(this,wP(-i,t+1,r)),Pi.call(this,n.subarray(i,i+o)),this}function jE(e){const{length:t,valueOffsets:n}=e;if(n){const{[0]:r,[t]:i}=n;return Pi.call(this,wP(-r,t+1,n)),this.visit(e.children[0].slice(r,i-r))}return this.visit(e.children[0])}function zx(e){return this.visitMany(e.type.children.map((t,n)=>e.children[n]).filter(Boolean))[0]}Ye.prototype.visitBool=qgt;Ye.prototype.visitInt=Qo;Ye.prototype.visitFloat=Qo;Ye.prototype.visitUtf8=ow;Ye.prototype.visitLargeUtf8=ow;Ye.prototype.visitBinary=ow;Ye.prototype.visitLargeBinary=ow;Ye.prototype.visitFixedSizeBinary=Qo;Ye.prototype.visitDate=Qo;Ye.prototype.visitTimestamp=Qo;Ye.prototype.visitTime=Qo;Ye.prototype.visitDecimal=Qo;Ye.prototype.visitList=jE;Ye.prototype.visitStruct=zx;Ye.prototype.visitUnion=Ygt;Ye.prototype.visitInterval=Qo;Ye.prototype.visitDuration=Qo;Ye.prototype.visitFixedSizeList=jE;Ye.prototype.visitMap=jE;class dz extends OE{static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,n){throw new Error('"throughDOM" not available in this environment')}constructor(t){super(),this._position=0,this._started=!1,this._sink=new km,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,Ar(t)||(t={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy=typeof t.autoDestroy=="boolean"?t.autoDestroy:!0,this._writeLegacyIpcFormat=typeof t.writeLegacyIpcFormat=="boolean"?t.writeLegacyIpcFormat:!1}toString(t=!1){return this._sink.toString(t)}toUint8Array(t=!1){return this._sink.toUint8Array(t)}writeAll(t){return Ec(t)?t.then(n=>this.writeAll(n)):md(t)?WE(this,t):qE(this,t)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(t){return this._sink.toDOMStream(t)}toNodeStream(t){return this._sink.toNodeStream(t)}close(){return this.reset()._sink.close()}abort(t){return this.reset()._sink.abort(t)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(t=this._sink,n=null){return t===this._sink||t instanceof km?this._sink=t:(this._sink=new km,t&&b0t(t)?this.toDOMStream({type:"bytes"}).pipeTo(t):t&&v0t(t)&&this.toNodeStream({objectMode:!1}).pipe(t)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,(!n||!Ux(n,this._schema))&&(n==null?(this._position=0,this._schema=null):(this._started=!0,this._schema=n,this._writeSchema(n))),this}write(t){let n=null;if(this._sink){if(t==null)return this.finish()&&void 0;if(t instanceof Pn&&!(n=t.schema))return this.finish()&&void 0;if(t instanceof yr&&!(n=t.schema))return this.finish()&&void 0}else throw new Error("RecordBatchWriter is closed");if(n&&!Ux(n,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,n)}t instanceof yr?t instanceof CE||this._writeRecordBatch(t):t instanceof Pn?this.writeAll(t.batches):Py(t)&&this.writeAll(t)}_writeMessage(t,n=8){const r=n-1,i=er.encode(t),s=i.byteLength,o=this._writeLegacyIpcFormat?4:8,a=s+o+r&~r,l=a-s-o;return t.headerType===Zt.RecordBatch?this._recordBatchBlocks.push(new Ja(a,t.bodyLength,this._position)):t.headerType===Zt.DictionaryBatch&&this._dictionaryBlocks.push(new Ja(a,t.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(a-o)),s>0&&this._write(i),this._writePadding(l)}_write(t){if(this._started){const n=jt(t);n&&n.byteLength>0&&(this._sink.write(n),this._position+=n.byteLength)}return this}_writeSchema(t){return this._writeMessage(er.from(t))}_writeFooter(t){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(Yp)}_writePadding(t){return t>0?this._write(new Uint8Array(t)):this}_writeRecordBatch(t){const{byteLength:n,nodes:r,bufferRegions:i,buffers:s}=Ye.assemble(t),o=new Wr(t.numRows,r,i),a=er.from(o,n);return this._writeDictionaries(t)._writeMessage(a)._writeBodyBuffers(s)}_writeDictionaryBatch(t,n,r=!1){this._dictionaryDeltaOffsets.set(n,t.length+(this._dictionaryDeltaOffsets.get(n)||0));const{byteLength:i,nodes:s,bufferRegions:o,buffers:a}=Ye.assemble(new oe([t])),l=new Wr(t.length,s,o),c=new Us(l,n,r),u=er.from(c,i);return this._writeMessage(u)._writeBodyBuffers(a)}_writeBodyBuffers(t){let n,r,i;for(let s=-1,o=t.length;++s<o;)(n=t[s])&&(r=n.byteLength)>0&&(this._write(n),(i=(r+7&-8)-r)>0&&this._writePadding(i));return this}_writeDictionaries(t){for(let[n,r]of t.dictionaries){let i=this._dictionaryDeltaOffsets.get(n)||0;if(i===0||(r=r==null?void 0:r.slice(i)).length>0)for(const s of r.data)this._writeDictionaryBatch(s,n,i>0),i+=s.length}return this}}class VE extends dz{static writeAll(t,n){const r=new VE(n);return Ec(t)?t.then(i=>r.writeAll(i)):md(t)?WE(r,t):qE(r,t)}}class YE extends dz{static writeAll(t){const n=new YE;return Ec(t)?t.then(r=>n.writeAll(r)):md(t)?WE(n,t):qE(n,t)}constructor(){super(),this._autoDestroy=!0}_writeSchema(t){return this._writeMagic()._writePadding(2)}_writeFooter(t){const n=Vp.encode(new Vp(t,Je.V5,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(t)._write(n)._write(Int32Array.of(n.byteLength))._writeMagic()}}function qE(e,t){let n=t;t instanceof Pn&&(n=t.batches,e.reset(void 0,t.schema));for(const r of n)e.write(r);return e.finish()}function WE(e,t){var n,r,i,s,o,a,l;return W(this,void 0,void 0,function*(){try{for(n=!0,r=Pr(t);i=yield r.next(),s=i.done,!s;n=!0){l=i.value,n=!1;const c=l;e.write(c)}}catch(c){o={error:c}}finally{try{!n&&!s&&(a=r.return)&&(yield a.call(r))}finally{if(o)throw o.error}}return e.finish()})}function Wgt(e,t="stream"){return(t==="stream"?VE:YE).writeAll(e).toUint8Array(!0)}var Qt,ce=(Qt=class{constructor(){}static DECIMAL(t,n){return t===void 0&&n===void 0?Qt.default_DECIMAL:{name:"DECIMAL",width:t,scale:n}}static LIST(t){return{name:"LIST",valueType:t}}static MAP(t,n){return{name:"MAP",keyType:t,valueType:n}}static STRUCT(t){return{name:"STRUCT",entries:t}}static STRUCT_entry(t,n){return{key:t,valueType:n}}static UNION(t){return{name:"UNION",alternatives:t}}static UNION_alternative(t,n){return{tag:t,valueType:n}}static VARCHAR_withLength(t){return{name:"VARCHAR",length:t}}},te(Qt,"BIGINT",{name:"BIGINT"}),te(Qt,"BIT",{name:"BIT"}),te(Qt,"BOOLEAN",{name:"BOOLEAN"}),te(Qt,"BLOB",{name:"BLOB"}),te(Qt,"DATE",{name:"DATE"}),te(Qt,"DOUBLE",{name:"DOUBLE"}),te(Qt,"default_DECIMAL",{name:"DECIMAL"}),te(Qt,"ENUM",{name:"ENUM"}),te(Qt,"HUGEINT",{name:"HUGEINT"}),te(Qt,"INTEGER",{name:"INTEGER"}),te(Qt,"INTERVAL",{name:"INTERVAL"}),te(Qt,"REAL",{name:"REAL"}),te(Qt,"SMALLINT",{name:"SMALLINT"}),te(Qt,"SQLNULL",{name:"SQLNULL"}),te(Qt,"TIME",{name:"TIME"}),te(Qt,"TIMESTAMP",{name:"TIMESTAMP"}),te(Qt,"TIMESTAMP_S",{name:"TIMESTAMP_S"}),te(Qt,"TIMESTAMP_MS",{name:"TIMESTAMP_MS"}),te(Qt,"TIMESTAMP_NS",{name:"TIMESTAMP_NS"}),te(Qt,"TIMESTAMP_TZ",{name:"TIMESTAMP_TZ"}),te(Qt,"TINYINT",{name:"TINYINT"}),te(Qt,"UBIGINT",{name:"UBIGINT"}),te(Qt,"UINTEGER",{name:"UINTEGER"}),te(Qt,"USMALLINT",{name:"USMALLINT"}),te(Qt,"UTINYINT",{name:"UTINYINT"}),te(Qt,"UUID",{name:"UUID"}),te(Qt,"VARCHAR",{name:"VARCHAR"}),Qt),Hgt=Object.create,hz=Object.defineProperty,Ggt=Object.getOwnPropertyDescriptor,Xgt=Object.getOwnPropertyNames,Qgt=Object.getPrototypeOf,Kgt=Object.prototype.hasOwnProperty,Zgt=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Jgt=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of Xgt(t))!Kgt.call(e,i)&&i!==n&&hz(e,i,{get:()=>t[i],enumerable:!(r=Ggt(t,i))||r.enumerable});return e},t1t=(e,t,n)=>(n=e!=null?Hgt(Qgt(e)):{},Jgt(t||!e||!e.__esModule?hz(n,"default",{value:e,enumerable:!0}):n,e)),e1t=Zgt((e,t)=>{t.exports=Worker}),n1t=(e=>(e[e.UNDEFINED=0]="UNDEFINED",e[e.AUTOMATIC=1]="AUTOMATIC",e[e.READ_ONLY=2]="READ_ONLY",e[e.READ_WRITE=3]="READ_WRITE",e))(n1t||{}),r1t=(e=>(e[e.IDENTIFIER=0]="IDENTIFIER",e[e.NUMERIC_CONSTANT=1]="NUMERIC_CONSTANT",e[e.STRING_CONSTANT=2]="STRING_CONSTANT",e[e.OPERATOR=3]="OPERATOR",e[e.KEYWORD=4]="KEYWORD",e[e.COMMENT=5]="COMMENT",e))(r1t||{}),jx=(e=>(e[e.NONE=0]="NONE",e[e.DEBUG=1]="DEBUG",e[e.INFO=2]="INFO",e[e.WARNING=3]="WARNING",e[e.ERROR=4]="ERROR",e))(jx||{}),i1t=(e=>(e[e.NONE=0]="NONE",e[e.CONNECT=1]="CONNECT",e[e.DISCONNECT=2]="DISCONNECT",e[e.OPEN=3]="OPEN",e[e.QUERY=4]="QUERY",e[e.INSTANTIATE=5]="INSTANTIATE",e))(i1t||{}),s1t=(e=>(e[e.NONE=0]="NONE",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR",e[e.START=3]="START",e[e.RUN=4]="RUN",e[e.CAPTURE=5]="CAPTURE",e))(s1t||{}),o1t=(e=>(e[e.NONE=0]="NONE",e[e.WEB_WORKER=1]="WEB_WORKER",e[e.NODE_WORKER=2]="NODE_WORKER",e[e.BINDINGS=3]="BINDINGS",e[e.ASYNC_DUCKDB=4]="ASYNC_DUCKDB",e))(o1t||{}),a1t=class{constructor(e=2){this.level=e}log(e){e.level>=this.level&&console.log(e)}},l1t=(e=>(e[e.SUCCESS=0]="SUCCESS",e))(l1t||{}),c1t=class{constructor(e,t){this._bindings=e,this._conn=t}get bindings(){return this._bindings}async close(){return this._bindings.disconnect(this._conn)}useUnsafe(e){return e(this._bindings,this._conn)}async query(e){this._bindings.logger.log({timestamp:new Date,level:2,origin:4,topic:4,event:4,value:e});let t=await this._bindings.runQuery(this._conn,e),n=mi.from(t);return console.assert(n.isSync(),"Reader is not sync"),console.assert(n.isFile(),"Reader is not file"),new Pn(n)}async send(e){this._bindings.logger.log({timestamp:new Date,level:2,origin:4,topic:4,event:4,value:e});let t=await this._bindings.startPendingQuery(this._conn,e);for(;t==null;)t=await this._bindings.pollPendingQuery(this._conn);let n=new pz(this._bindings,this._conn,t),r=await mi.from(n);return console.assert(r.isAsync()),console.assert(r.isStream()),r}async cancelSent(){return await this._bindings.cancelPendingQuery(this._conn)}async getTableNames(e){return await this._bindings.getTableNames(this._conn,e)}async prepare(e){let t=await this._bindings.createPrepared(this._conn,e);return new u1t(this._bindings,this._conn,t)}async insertArrowTable(e,t){let n=Wgt(e,"stream");await this.insertArrowFromIPCStream(n,t)}async insertArrowFromIPCStream(e,t){await this._bindings.insertArrowFromIPCStream(this._conn,e,t)}async insertCSVFromPath(e,t){await this._bindings.insertCSVFromPath(this._conn,e,t)}async insertJSONFromPath(e,t){await this._bindings.insertJSONFromPath(this._conn,e,t)}},pz=class{constructor(e,t,n){this.db=e,this.conn=t,this.header=n,this._first=!0,this._depleted=!1,this._inFlight=null}async next(){if(this._first)return this._first=!1,{done:!1,value:this.header};if(this._depleted)return{done:!0,value:null};let e;return this._inFlight!=null?(e=await this._inFlight,this._inFlight=null):e=await this.db.fetchQueryResults(this.conn),this._depleted=e.length==0,this._depleted||(this._inFlight=this.db.fetchQueryResults(this.conn)),{done:this._depleted,value:e}}[Symbol.asyncIterator](){return this}},u1t=class{constructor(e,t,n){this.bindings=e,this.connectionId=t,this.statementId=n}async close(){await this.bindings.closePrepared(this.connectionId,this.statementId)}async query(...e){let t=await this.bindings.runPrepared(this.connectionId,this.statementId,e),n=mi.from(t);return console.assert(n.isSync()),console.assert(n.isFile()),new Pn(n)}async send(...e){let t=await this.bindings.sendPrepared(this.connectionId,this.statementId,e),n=new pz(this.bindings,this.connectionId,t),r=await mi.from(n);return console.assert(r.isAsync()),console.assert(r.isStream()),r}},f1t=(e=>(e.CANCEL_PENDING_QUERY="CANCEL_PENDING_QUERY",e.CLOSE_PREPARED="CLOSE_PREPARED",e.COLLECT_FILE_STATISTICS="COLLECT_FILE_STATISTICS",e.CONNECT="CONNECT",e.COPY_FILE_TO_BUFFER="COPY_FILE_TO_BUFFER",e.COPY_FILE_TO_PATH="COPY_FILE_TO_PATH",e.CREATE_PREPARED="CREATE_PREPARED",e.DISCONNECT="DISCONNECT",e.DROP_FILE="DROP_FILE",e.DROP_FILES="DROP_FILES",e.EXPORT_FILE_STATISTICS="EXPORT_FILE_STATISTICS",e.FETCH_QUERY_RESULTS="FETCH_QUERY_RESULTS",e.FLUSH_FILES="FLUSH_FILES",e.GET_FEATURE_FLAGS="GET_FEATURE_FLAGS",e.GET_TABLE_NAMES="GET_TABLE_NAMES",e.GET_VERSION="GET_VERSION",e.GLOB_FILE_INFOS="GLOB_FILE_INFOS",e.INSERT_ARROW_FROM_IPC_STREAM="INSERT_ARROW_FROM_IPC_STREAM",e.INSERT_CSV_FROM_PATH="IMPORT_CSV_FROM_PATH",e.INSERT_JSON_FROM_PATH="IMPORT_JSON_FROM_PATH",e.INSTANTIATE="INSTANTIATE",e.OPEN="OPEN",e.PING="PING",e.POLL_PENDING_QUERY="POLL_PENDING_QUERY",e.REGISTER_FILE_BUFFER="REGISTER_FILE_BUFFER",e.REGISTER_FILE_HANDLE="REGISTER_FILE_HANDLE",e.REGISTER_FILE_URL="REGISTER_FILE_URL",e.RESET="RESET",e.RUN_PREPARED="RUN_PREPARED",e.RUN_QUERY="RUN_QUERY",e.SEND_PREPARED="SEND_PREPARED",e.START_PENDING_QUERY="START_PENDING_QUERY",e.TOKENIZE="TOKENIZE",e))(f1t||{}),d1t=(e=>(e.CONNECTION_INFO="CONNECTION_INFO",e.ERROR="ERROR",e.FEATURE_FLAGS="FEATURE_FLAGS",e.FILE_BUFFER="FILE_BUFFER",e.FILE_INFOS="FILE_INFOS",e.FILE_SIZE="FILE_SIZE",e.FILE_STATISTICS="FILE_STATISTICS",e.INSTANTIATE_PROGRESS="INSTANTIATE_PROGRESS",e.LOG="LOG",e.OK="OK",e.PREPARED_STATEMENT_ID="PREPARED_STATEMENT_ID",e.QUERY_PLAN="QUERY_PLAN",e.QUERY_RESULT="QUERY_RESULT",e.QUERY_RESULT_CHUNK="QUERY_RESULT_CHUNK",e.QUERY_RESULT_HEADER="QUERY_RESULT_HEADER",e.QUERY_RESULT_HEADER_OR_NULL="QUERY_RESULT_HEADER_OR_NULL",e.REGISTERED_FILE="REGISTERED_FILE",e.SCRIPT_TOKENS="SCRIPT_TOKENS",e.SUCCESS="SUCCESS",e.TABLE_NAMES="TABLE_NAMES",e.VERSION_STRING="VERSION_STRING",e))(d1t||{}),Gt=class{constructor(e,t){this.promiseResolver=()=>{},this.promiseRejecter=()=>{},this.type=e,this.data=t,this.promise=new Promise((n,r)=>{this.promiseResolver=n,this.promiseRejecter=r})}};function Fm(e){switch(e.typeId){case $.Binary:return{sqlType:"binary"};case $.Bool:return{sqlType:"bool"};case $.Date:return{sqlType:"date"};case $.DateDay:return{sqlType:"date32[d]"};case $.DateMillisecond:return{sqlType:"date64[ms]"};case $.Decimal:{let t=e;return{sqlType:"decimal",precision:t.precision,scale:t.scale}}case $.Float:return{sqlType:"float"};case $.Float16:return{sqlType:"float16"};case $.Float32:return{sqlType:"float32"};case $.Float64:return{sqlType:"float64"};case $.Int:return{sqlType:"int32"};case $.Int16:return{sqlType:"int16"};case $.Int32:return{sqlType:"int32"};case $.Int64:return{sqlType:"int64"};case $.Uint16:return{sqlType:"uint16"};case $.Uint32:return{sqlType:"uint32"};case $.Uint64:return{sqlType:"uint64"};case $.Uint8:return{sqlType:"uint8"};case $.IntervalDayTime:return{sqlType:"interval[dt]"};case $.IntervalYearMonth:return{sqlType:"interval[m]"};case $.List:return{sqlType:"list",valueType:Fm(e.valueType)};case $.FixedSizeBinary:return{sqlType:"fixedsizebinary",byteWidth:e.byteWidth};case $.Null:return{sqlType:"null"};case $.Utf8:return{sqlType:"utf8"};case $.Struct:return{sqlType:"struct",fields:e.children.map(t=>Vx(t.name,t.type))};case $.Map:{let t=e;return{sqlType:"map",keyType:Fm(t.keyType),valueType:Fm(t.valueType)}}case $.Time:return{sqlType:"time[s]"};case $.TimeMicrosecond:return{sqlType:"time[us]"};case $.TimeMillisecond:return{sqlType:"time[ms]"};case $.TimeNanosecond:return{sqlType:"time[ns]"};case $.TimeSecond:return{sqlType:"time[s]"};case $.Timestamp:return{sqlType:"timestamp",timezone:e.timezone||void 0};case $.TimestampSecond:return{sqlType:"timestamp[s]",timezone:e.timezone||void 0};case $.TimestampMicrosecond:return{sqlType:"timestamp[us]",timezone:e.timezone||void 0};case $.TimestampNanosecond:return{sqlType:"timestamp[ns]",timezone:e.timezone||void 0};case $.TimestampMillisecond:return{sqlType:"timestamp[ms]",timezone:e.timezone||void 0}}throw new Error("unsupported arrow type: ".concat(e.toString()))}function Vx(e,t){let n=Fm(t);return n.name=e,n}var h1t=new TextEncoder,p1t=class{constructor(e,t=null){this._onInstantiationProgress=[],this._worker=null,this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{},this._nextMessageId=0,this._pendingRequests=new Map,this._logger=e,this._onMessageHandler=this.onMessage.bind(this),this._onErrorHandler=this.onError.bind(this),this._onCloseHandler=this.onClose.bind(this),t!=null&&this.attach(t)}get logger(){return this._logger}attach(e){this._worker=e,this._worker.addEventListener("message",this._onMessageHandler),this._worker.addEventListener("error",this._onErrorHandler),this._worker.addEventListener("close",this._onCloseHandler),this._workerShutdownPromise=new Promise((t,n)=>{this._workerShutdownResolver=t})}detach(){this._worker&&(this._worker.removeEventListener("message",this._onMessageHandler),this._worker.removeEventListener("error",this._onErrorHandler),this._worker.removeEventListener("close",this._onCloseHandler),this._worker=null,this._workerShutdownResolver(null),this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{})}async terminate(){this._worker&&(this._worker.terminate(),this._worker=null,this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{})}async postTask(e,t=[]){if(!this._worker){console.error("cannot send a message since the worker is not set!");return}let n=this._nextMessageId++;return this._pendingRequests.set(n,e),this._worker.postMessage({messageId:n,type:e.type,data:e.data},t),await e.promise}onMessage(e){var t;let n=e.data;switch(n.type){case"LOG":{this._logger.log(n.data);return}case"INSTANTIATE_PROGRESS":{for(let i of this._onInstantiationProgress)i(n.data);return}}let r=this._pendingRequests.get(n.requestId);if(!r){console.warn("unassociated response: [".concat(n.requestId,", ").concat(n.type.toString(),"]"));return}if(this._pendingRequests.delete(n.requestId),n.type=="ERROR"){let i=new Error(n.data.message);i.name=n.data.name,(t=Object.getOwnPropertyDescriptor(i,"stack"))!=null&&t.writable&&(i.stack=n.data.stack),r.promiseRejecter(i);return}switch(r.type){case"CLOSE_PREPARED":case"COLLECT_FILE_STATISTICS":case"COPY_FILE_TO_PATH":case"DISCONNECT":case"DROP_FILE":case"DROP_FILES":case"FLUSH_FILES":case"INSERT_ARROW_FROM_IPC_STREAM":case"IMPORT_CSV_FROM_PATH":case"IMPORT_JSON_FROM_PATH":case"OPEN":case"PING":case"REGISTER_FILE_BUFFER":case"REGISTER_FILE_HANDLE":case"REGISTER_FILE_URL":case"RESET":if(n.type=="OK"){r.promiseResolver(n.data);return}break;case"INSTANTIATE":if(this._onInstantiationProgress=[],n.type=="OK"){r.promiseResolver(n.data);return}break;case"GLOB_FILE_INFOS":if(n.type=="FILE_INFOS"){r.promiseResolver(n.data);return}break;case"GET_VERSION":if(n.type=="VERSION_STRING"){r.promiseResolver(n.data);return}break;case"GET_FEATURE_FLAGS":if(n.type=="FEATURE_FLAGS"){r.promiseResolver(n.data);return}break;case"GET_TABLE_NAMES":if(n.type=="TABLE_NAMES"){r.promiseResolver(n.data);return}break;case"TOKENIZE":if(n.type=="SCRIPT_TOKENS"){r.promiseResolver(n.data);return}break;case"COPY_FILE_TO_BUFFER":if(n.type=="FILE_BUFFER"){r.promiseResolver(n.data);return}break;case"EXPORT_FILE_STATISTICS":if(n.type=="FILE_STATISTICS"){r.promiseResolver(n.data);return}break;case"CONNECT":if(n.type=="CONNECTION_INFO"){r.promiseResolver(n.data);return}break;case"RUN_PREPARED":case"RUN_QUERY":if(n.type=="QUERY_RESULT"){r.promiseResolver(n.data);return}break;case"SEND_PREPARED":if(n.type=="QUERY_RESULT_HEADER"){r.promiseResolver(n.data);return}break;case"START_PENDING_QUERY":if(n.type=="QUERY_RESULT_HEADER_OR_NULL"){r.promiseResolver(n.data);return}break;case"POLL_PENDING_QUERY":if(n.type=="QUERY_RESULT_HEADER_OR_NULL"){r.promiseResolver(n.data);return}break;case"CANCEL_PENDING_QUERY":if(this._onInstantiationProgress=[],n.type=="SUCCESS"){r.promiseResolver(n.data);return}break;case"FETCH_QUERY_RESULTS":if(n.type=="QUERY_RESULT_CHUNK"){r.promiseResolver(n.data);return}break;case"CREATE_PREPARED":if(n.type=="PREPARED_STATEMENT_ID"){r.promiseResolver(n.data);return}break}r.promiseRejecter(new Error("unexpected response type: ".concat(n.type.toString())))}onError(e){console.error(e),console.error("error in duckdb worker: ".concat(e.message)),this._pendingRequests.clear()}onClose(){if(this._workerShutdownResolver(null),this._pendingRequests.size!=0){console.warn("worker terminated with ".concat(this._pendingRequests.size," pending requests"));return}this._pendingRequests.clear()}async reset(){let e=new Gt("RESET",null);return await this.postTask(e)}async ping(){let e=new Gt("PING",null);await this.postTask(e)}async dropFile(e){let t=new Gt("DROP_FILE",e);return await this.postTask(t)}async dropFiles(){let e=new Gt("DROP_FILES",null);return await this.postTask(e)}async flushFiles(){let e=new Gt("FLUSH_FILES",null);return await this.postTask(e)}async instantiate(e,t=null,n=r=>{}){this._onInstantiationProgress.push(n);let r=new Gt("INSTANTIATE",[e,t]);return await this.postTask(r)}async getVersion(){let e=new Gt("GET_VERSION",null);return await this.postTask(e)}async getFeatureFlags(){let e=new Gt("GET_FEATURE_FLAGS",null);return await this.postTask(e)}async open(e){let t=new Gt("OPEN",e);await this.postTask(t)}async tokenize(e){let t=new Gt("TOKENIZE",e);return await this.postTask(t)}async connectInternal(){let e=new Gt("CONNECT",null);return await this.postTask(e)}async connect(){let e=await this.connectInternal();return new c1t(this,e)}async disconnect(e){let t=new Gt("DISCONNECT",e);await this.postTask(t)}async runQuery(e,t){let n=new Gt("RUN_QUERY",[e,t]);return await this.postTask(n)}async startPendingQuery(e,t){let n=new Gt("START_PENDING_QUERY",[e,t]);return await this.postTask(n)}async pollPendingQuery(e){let t=new Gt("POLL_PENDING_QUERY",e);return await this.postTask(t)}async cancelPendingQuery(e){let t=new Gt("CANCEL_PENDING_QUERY",e);return await this.postTask(t)}async fetchQueryResults(e){let t=new Gt("FETCH_QUERY_RESULTS",e);return await this.postTask(t)}async getTableNames(e,t){let n=new Gt("GET_TABLE_NAMES",[e,t]);return await this.postTask(n)}async createPrepared(e,t){let n=new Gt("CREATE_PREPARED",[e,t]);return await this.postTask(n)}async closePrepared(e,t){let n=new Gt("CLOSE_PREPARED",[e,t]);await this.postTask(n)}async runPrepared(e,t,n){let r=new Gt("RUN_PREPARED",[e,t,n]);return await this.postTask(r)}async sendPrepared(e,t,n){let r=new Gt("SEND_PREPARED",[e,t,n]);return await this.postTask(r)}async globFiles(e){let t=new Gt("GLOB_FILE_INFOS",e);return await this.postTask(t)}async registerFileText(e,t){let n=h1t.encode(t);await this.registerFileBuffer(e,n)}async registerFileURL(e,t,n,r){t===void 0&&(t=e);let i=new Gt("REGISTER_FILE_URL",[e,t,n,r]);await this.postTask(i)}async registerEmptyFileBuffer(e){}async registerFileBuffer(e,t){let n=new Gt("REGISTER_FILE_BUFFER",[e,t]);await this.postTask(n,[t.buffer])}async registerFileHandle(e,t,n,r){let i=new Gt("REGISTER_FILE_HANDLE",[e,t,n,r]);await this.postTask(i,[])}async collectFileStatistics(e,t){let n=new Gt("COLLECT_FILE_STATISTICS",[e,t]);await this.postTask(n,[])}async exportFileStatistics(e){let t=new Gt("EXPORT_FILE_STATISTICS",e);return await this.postTask(t,[])}async copyFileToBuffer(e){let t=new Gt("COPY_FILE_TO_BUFFER",e);return await this.postTask(t)}async copyFileToPath(e,t){let n=new Gt("COPY_FILE_TO_PATH",[e,t]);await this.postTask(n)}async insertArrowFromIPCStream(e,t,n){if(t.length==0)return;let r=new Gt("INSERT_ARROW_FROM_IPC_STREAM",[e,t,n]);await this.postTask(r,[t.buffer])}async insertCSVFromPath(e,t,n){if(n.columns!==void 0){let i=[];for(let s in n.columns){let o=n.columns[s];i.push(Vx(s,o))}n.columnsFlat=i,delete n.columns}let r=new Gt("IMPORT_CSV_FROM_PATH",[e,t,n]);await this.postTask(r)}async insertJSONFromPath(e,t,n){if(n.columns!==void 0){let i=[];for(let s in n.columns){let o=n.columns[s];i.push(Vx(s,o))}n.columnsFlat=i,delete n.columns}let r=new Gt("IMPORT_JSON_FROM_PATH",[e,t,n]);await this.postTask(r)}},y1t={name:"@duckdb/duckdb-wasm",version:"1.11.0",description:"DuckDB powered by WebAssembly",license:"MIT",repository:{type:"git",url:"https://github.com/duckdb/duckdb-wasm.git"},keywords:["sql","duckdb","relational","database","data","query","wasm","analytics","olap","arrow","parquet","json","csv"],dependencies:{"apache-arrow":"^15.0.0"},devDependencies:{"@types/emscripten":"^1.39.10","@types/jasmine":"^5.1.4","@typescript-eslint/eslint-plugin":"^6.21.0","@typescript-eslint/parser":"^6.21.0",esbuild:"^0.20.1",eslint:"^8.56.0","eslint-plugin-jasmine":"^4.1.3","eslint-plugin-react":"^7.34.0","fast-glob":"^3.3.2",jasmine:"^5.1.0","jasmine-core":"^5.1.2","jasmine-spec-reporter":"^7.0.0","js-sha256":"^0.11.0",karma:"^6.4.2","karma-chrome-launcher":"^3.2.0","karma-coverage":"^2.2.1","karma-firefox-launcher":"^2.1.3","karma-jasmine":"^5.1.0","karma-jasmine-html-reporter":"^2.1.0","karma-sourcemap-loader":"^0.4.0","karma-spec-reporter":"^0.0.36","make-dir":"^4.0.0",nyc:"^15.1.0",prettier:"^3.2.5",puppeteer:"^21.7.0",rimraf:"^5.0.5",s3rver:"^3.7.1",typedoc:"^0.25.7",typescript:"^5.3.3","wasm-feature-detect":"^1.6.1","web-worker":"^1.2.0"},scripts:{"build:debug":"node bundle.mjs debug && tsc --emitDeclarationOnly","build:release":"node bundle.mjs release && tsc --emitDeclarationOnly",docs:"typedoc",report:"node ./coverage.mjs","test:node":"node --enable-source-maps ../../node_modules/jasmine/bin/jasmine ./dist/tests-node.cjs","test:node:debug":"node --inspect-brk --enable-source-maps ../../node_modules/jasmine/bin/jasmine ./dist/tests-node.cjs","test:node:coverage":"nyc -r json --report-dir ./coverage/node node ../../node_modules/jasmine/bin/jasmine ./dist/tests-node.cjs","test:firefox":"karma start ./karma/tests-firefox.cjs","test:chrome":"karma start ./karma/tests-chrome.cjs","test:chrome:eh":"karma start ./karma/tests-chrome-eh.cjs","test:chrome:coverage":"karma start ./karma/tests-chrome-coverage.cjs","test:browser":"karma start ./karma/tests-all.cjs","test:browser:debug":"karma start ./karma/tests-debug.cjs",test:"npm run test:chrome && npm run test:node","test:coverage":"npm run test:chrome:coverage && npm run test:node:coverage && npm run report",lint:"eslint src test"},files:["dist","!dist/tests-*","!dist/duckdb-browser-mvp.worker.js.map","!dist/types/test"],main:"dist/duckdb-browser.cjs",module:"dist/duckdb-browser.mjs",types:"dist/duckdb-browser.d.ts",jsdelivr:"dist/duckdb-browser.cjs",unpkg:"dist/duckdb-browser.mjs",sideEffects:!1,browser:{fs:!1,path:!1,perf_hooks:!1,os:!1,worker_threads:!1},exports:{"./dist/duckdb-mvp.wasm":"./dist/duckdb-mvp.wasm","./dist/duckdb-eh.wasm":"./dist/duckdb-eh.wasm","./dist/duckdb-coi.wasm":"./dist/duckdb-coi.wasm","./dist/duckdb-browser":"./dist/duckdb-browser.mjs","./dist/duckdb-browser.cjs":"./dist/duckdb-browser.cjs","./dist/duckdb-browser.mjs":"./dist/duckdb-browser.mjs","./dist/duckdb-browser-blocking":"./dist/duckdb-browser-blocking.mjs","./dist/duckdb-browser-blocking.mjs":"./dist/duckdb-browser-blocking.mjs","./dist/duckdb-browser-blocking.cjs":"./dist/duckdb-browser-blocking.cjs","./dist/duckdb-browser-coi.pthread.worker.js":"./dist/duckdb-browser-coi.pthread.worker.js","./dist/duckdb-browser-coi.worker.js":"./dist/duckdb-browser-coi.worker.js","./dist/duckdb-browser-eh.worker.js":"./dist/duckdb-browser-eh.worker.js","./dist/duckdb-browser-mvp.worker.js":"./dist/duckdb-browser-mvp.worker.js","./dist/duckdb-node":"./dist/duckdb-node.cjs","./dist/duckdb-node.cjs":"./dist/duckdb-node.cjs","./dist/duckdb-node-blocking":"./dist/duckdb-node-blocking.cjs","./dist/duckdb-node-blocking.cjs":"./dist/duckdb-node-blocking.cjs","./dist/duckdb-node-eh.worker.cjs":"./dist/duckdb-node-eh.worker.cjs","./dist/duckdb-node-mvp.worker.cjs":"./dist/duckdb-node-mvp.worker.cjs","./blocking":{browser:{types:"./dist/duckdb-browser-blocking.d.ts",import:"./dist/duckdb-browser-blocking.mjs",require:"./dist/duckdb-browser-blocking.cjs"},node:{types:"./dist/duckdb-node-blocking.d.ts",require:"./dist/duckdb-node-blocking.cjs",import:"./dist/duckdb-node-blocking.cjs"},types:"./dist/duckdb-browser-blocking.d.ts",import:"./dist/duckdb-browser-blocking.mjs",require:"./dist/duckdb-browser-blocking.cjs"},".":{browser:{types:"./dist/duckdb-browser.d.ts",import:"./dist/duckdb-browser.mjs",require:"./dist/duckdb-browser.cjs"},node:{types:"./dist/duckdb-node.d.ts",import:"./dist/duckdb-node.cjs",require:"./dist/duckdb-node.cjs"},types:"./dist/duckdb-browser.d.ts",import:"./dist/duckdb-browser.mjs",require:"./dist/duckdb-browser.cjs"}}},HE=y1t.version.split(".");HE[0];HE[1];HE[2];t1t(e1t());function m1t(){let e=new TextDecoder;return t=>(typeof SharedArrayBuffer<"u"&&t.buffer instanceof SharedArrayBuffer&&(t=new Uint8Array(t)),e.decode(t))}m1t();var g1t=(e=>(e[e.BUFFER=0]="BUFFER",e[e.NODE_FS=1]="NODE_FS",e[e.BROWSER_FILEREADER=2]="BROWSER_FILEREADER",e[e.BROWSER_FSACCESS=3]="BROWSER_FSACCESS",e[e.HTTP=4]="HTTP",e[e.S3=5]="S3",e))(g1t||{}),yz=class{singleValue(){let{columnCount:e,rowCount:t}=this;if(e===0)throw Error("no column data");if(t===0)throw Error("no rows");if(e>1)throw Error("more than one column");if(t>1)throw Error("more than one row");return this.value(0,0)}columnNames(){let{columnCount:e}=this,t=[];for(let n=0;n<e;n++)t.push(this.columnName(n));return t}deduplicatedColumnNames(){let{columnCount:e}=this,t=[],n={};for(let r=0;r<e;r++){let i=this.columnName(r),s=(n[i]||0)+1;n[i]=s,s>1?t.push(`${i}:${s-1}`):t.push(i)}return t}toRows(){let{rowCount:e,columnCount:t}=this,n=this.deduplicatedColumnNames(),r=[];for(let i=0;i<e;i++){let s={};for(let o=0;o<t;o++)s[n[o]]=this.value(o,i);r.push(s)}return r}};function mu(e){switch(e.typeId){case $.Null:return ce.SQLNULL;case $.Int:{let{isSigned:t,bitWidth:n}=e;if(t)switch(n){case 8:return ce.TINYINT;case 16:return ce.SMALLINT;case 32:return ce.INTEGER;case 64:return ce.BIGINT;default:throw Error(`unexpected integer bit width: ${n}`)}else switch(n){case 8:return ce.UTINYINT;case 16:return ce.USMALLINT;case 32:return ce.UINTEGER;case 64:return ce.UBIGINT;default:throw Error(`unexpected integer bit width: ${n}`)}}case $.Float:{let{precision:t}=e;switch(t){case Ke.HALF:throw Error("DuckDB does not support half-precision floats");case Ke.SINGLE:return ce.REAL;case Ke.DOUBLE:return ce.DOUBLE;default:throw Error(`unexpected precision: ${t}`)}}case $.Binary:return ce.BLOB;case $.Utf8:return ce.VARCHAR;case $.Bool:return ce.BOOLEAN;case $.Decimal:{let{precision:t,scale:n}=e;return(t==null||t===18)&&(n==null||n===3)?ce.DECIMAL():ce.DECIMAL(t,n)}case $.Date:{let{unit:t}=e;switch(t){case ar.DAY:return ce.DATE;case ar.MILLISECOND:throw Error("DuckDB does not support millisecond-unit dates");default:throw Error(`unexpected date unit: ${t}`)}}case $.Time:{let{unit:t}=e;switch(t){case rt.SECOND:throw Error("DuckDB does not support second-unit times");case rt.MILLISECOND:throw Error("DuckDB does not support millisecond-unit times");case rt.MICROSECOND:return ce.TIME;case rt.NANOSECOND:throw Error("DuckDB does not support nanosecond-unit times");default:throw Error(`unexpected time unit: ${t}`)}}case $.Timestamp:{let{unit:t,timezone:n}=e;switch(t){case rt.SECOND:if(n)throw Error("DuckDB does not support second-unit timestamps with timezone");return ce.TIMESTAMP_S;case rt.MILLISECOND:if(n)throw Error("DuckDB does not support millisecond-unit timestamps with timezone");return ce.TIMESTAMP_MS;case rt.MICROSECOND:return n?ce.TIMESTAMP_TZ:ce.TIMESTAMP;case rt.NANOSECOND:if(n)throw Error("DuckDB does not support nanosecond-unit timestamps with timezone");return ce.TIMESTAMP_NS;default:throw Error(`unexpected time unit: ${t}`)}}case $.Interval:{let{unit:t}=e;switch(t){case Vn.YEAR_MONTH:throw Error("DuckDB does not support year-month intervals");case Vn.DAY_TIME:throw Error("DuckDB does not support day-time intervals");case Vn.MONTH_DAY_NANO:return ce.INTERVAL;default:throw Error(`unexpected interval unit: ${t}`)}}case $.List:{let{valueType:t}=e;return ce.LIST(mu(t))}case $.Struct:{let{children:t}=e,n=t.map(r=>({key:r.name,valueType:mu(r.type)}));return ce.STRUCT(n)}case $.Union:{let{mode:t}=e;switch(t){case an.Dense:throw Error("DuckDB does not support dense unions");case an.Sparse:{let n=e.children.map(r=>({tag:r.name,valueType:mu(r.type)}));return ce.UNION(n)}default:throw Error(`unexpected union mode: ${t}`)}}case $.FixedSizeBinary:throw Error("DuckDB does not support fixed-size binary");case $.FixedSizeList:throw Error("DuckDB does not support fixed-size lists");case $.Map:{let{keyType:t,valueType:n}=e;return ce.MAP(mu(t),mu(n))}case $.Dictionary:return ce.ENUM;default:throw Error(`unexpected type id: ${e.typeId}`)}}function b1t(e){let t="";for(let n of e)n<=31||n===34||n===39||n>=127?t+=`\\x${n.toString(16).toUpperCase().padStart(2,"0")}`:t+=String.fromCharCode(n);return t}var Ti=class{toString(){return this.toDuckDBString()}},v1t=class extends Ti{constructor(e){super(),this.bytes=e}toDuckDBString(){return b1t(this.bytes)}},Yx=BigInt(1e6),w1t=BigInt(1e3),_1t=BigInt(1e3),y4=BigInt(60),m4=BigInt(60),Bm=BigInt(864e8),S1t=BigInt("-9223372036854775807"),x1t=BigInt("9223372036854775807");function I1t(e,t,n){let r=String(Math.abs(e)).padStart(4,"0"),i=String(t).padStart(2,"0"),s=String(n).padStart(2,"0");return`${r}-${i}-${s}${e<0?" (BC)":""}`}function mz(e){let t=Math.abs(e),n=e<0?-1:1,r=Math.floor(t/146097),i=n*r*400,s=t%146097,o=n*s*864e5,a=new Date(o),l=i+a.getUTCFullYear();l<0&&l--;let c=a.getUTCMonth()+1,u=a.getUTCDate();return I1t(l,c,u)}function T1t(e,t,n,r){let i=String(e).padStart(2,"0"),s=String(t).padStart(2,"0"),o=String(n).padStart(2,"0"),a=String(r).padStart(6,"0").replace(/0+$/,"");return`${i}:${s}:${o}${a.length>0?`.${a}`:""}`}function gz(e){let t=e%Yx,n=e/Yx,r=n%y4,i=n/y4,s=i%m4,o=i/m4;return T1t(o,s,r,t)}function bz(e){let t=e<0?e+Bm:e;return gz(t)}function E1t(e){let t=e<0,n=t?-e:e,r=gz(n);return t?`-${r}`:r}function A1t(e,t,n){let r=mz(Number(e)),i=bz(t),s=n?` ${n}`:"";return`${r} ${i}${s}`}function aw(e,t){if(e===S1t)return"-infinity";if(e===x1t)return"infinity";let n=e/Bm,r=e%Bm;return r<0&&(n--,r+=Bm),A1t(n,r,t)}function M1t(e,t){return aw(e*Yx,t)}function $1t(e,t){return aw(e*w1t,t)}function N1t(e,t){return aw(e/_1t,t)}function H_(e,t){return`${e} ${t}${e!==1?"s":""}`}function k1t(e,t,n){let r=[];if(e!==0){let i=e<0?-1:1,s=Math.abs(e),o=Math.floor(s/12),a=i*o,l=i*(s-o*12);a!==0&&r.push(H_(a,"year")),l!==0&&r.push(H_(l,"month"))}return t!==0&&r.push(H_(t,"day")),n!==BigInt(0)&&r.push(E1t(n)),r.length>0?r.join(" "):"00:00:00"}var D1t=class extends Ti{constructor(e){super(),this.days=e}toDuckDBString(){return mz(this.days)}};function O1t(e){var t;return((t=new Intl.NumberFormat(e,{useGrouping:!1}).formatToParts(.1).find(n=>n.type==="decimal"))==null?void 0:t.value)??"."}var G_={};function F1t(e){let t=JSON.stringify(e);if(t in G_)return G_[t];let n=O1t(e);return G_[t]=n,n}function B1t(e,t){if(e){let{minimumFractionDigits:n,maximumFractionDigits:r,...i}=e.options??{};return t.toLocaleString(e==null?void 0:e.locales,i)}return String(t)}function L1t(e,t,n){var o,a;let r=String(t).padStart(n,"0");if(!e)return r;let i=((o=e==null?void 0:e.options)==null?void 0:o.minimumFractionDigits)??0,s=((a=e==null?void 0:e.options)==null?void 0:a.maximumFractionDigits)??20;return r.padEnd(i,"0").slice(0,s)}function g4(e,t,n){if(t>0){let r=BigInt(10)**BigInt(t),i=e<0?-e:e,s=e<0?"-":"",o=i/r,a=B1t(n,o),l=i%r,c=L1t(n,l,t),u=n?F1t(n.locales):".";return`${s}${a}${u}${c}`}return n?e.toLocaleString(n==null?void 0:n.locales,n==null?void 0:n.options):String(e)}var R1t=class extends Ti{constructor(e,t){super(),this.scaledValue=e,this.scale=t}toDuckDBString(){return g4(this.scaledValue,this.scale)}toLocaleString(e,t){return g4(this.scaledValue,this.scale,{locales:e,options:t})}},C1t=class extends Ti{constructor(e,t,n){super(),this.months=e,this.days=t,this.microseconds=n}toDuckDBString(){return k1t(this.months,this.days,this.microseconds)}};function qp(e){return e==null?"NULL":typeof e=="string"?`'${e.replace("'","''")}'`:String(e)}var U1t=class extends Ti{constructor(e){super(),this.values=e}toDuckDBString(){return`[${this.values.map(qp).join(", ")}]`}},P1t=class extends Ti{constructor(e){super(),this.entries=e}toDuckDBString(){return`{${this.entries.map(({key:e,value:t})=>`${qp(e)}: ${qp(t)}`).join(", ")}}`}},z1t=class extends Ti{constructor(e){super(),this.entries=e}toDuckDBString(){return`{${this.entries.map(({key:e,value:t})=>`${qp(e)}: ${qp(t)}`).join(", ")}}`}},j1t=class extends Ti{constructor(e){super(),this.microseconds=e}toDuckDBString(){return bz(this.microseconds)}},V1t=class extends Ti{constructor(e,t){super(),this.microseconds=e,this.timezone=t}toDuckDBString(){return aw(this.microseconds,this.timezone)}},Y1t=class extends Ti{constructor(e){super(),this.milliseconds=e}toDuckDBString(){return $1t(this.milliseconds)}},q1t=class extends Ti{constructor(e){super(),this.nanoseconds=e}toDuckDBString(){return N1t(this.nanoseconds)}},W1t=class extends Ti{constructor(e){super(),this.seconds=e}toDuckDBString(){return M1t(this.seconds)}},H1t=new TextDecoder;function G1t(e,t,n){return e.getValid(t)?n(e,t):null}function qn(e){return(t,n)=>G1t(t,n,e)}function X1t(e,t,n,r){return Array.from({length:n-t}).map((i,s)=>r(e,t+s))}function vz(e){return new BigInt64Array(e.values.buffer,e.values.byteOffset,e.values.length/2)}function qy(e,t){return vz(e)[t]}function Q1t(e,t){let n=vz(e),r=n[t*2];return(n[t*2+1]<<BigInt(64))+(r&BigInt.asUintN(64,BigInt(-1)))}function wz(e,t){let{values:n,valueOffsets:r}=e,i=r[t],s=r[t+1];return n.subarray(i,s)}function K1t(e,t){return null}function Z1t(e,t){return e.values[t]}var ss=qn(Z1t);function J1t(e,t){return new v1t(wz(e,t))}var tbt=qn(J1t);function ebt(e,t){return H1t.decode(wz(e,t))}var nbt=qn(ebt);function rbt(e,t){let n=e.offset+t;return(e.values[n>>3]&1<<n%8)!==0}var ibt=qn(rbt);function sbt(e,t){return new R1t(Q1t(e,t),e.type.scale)}var obt=qn(sbt);function abt(e,t){return new D1t(e.values[t])}var lbt=qn(abt);function cbt(e,t){return new j1t(e.values[t])}var ubt=qn(cbt);function fbt(e,t){return new W1t(qy(e,t))}var dbt=qn(fbt);function hbt(e,t){return new Y1t(qy(e,t))}var pbt=qn(hbt);function ybt(e,t){return new V1t(qy(e,t),e.type.timezone)}var mbt=qn(ybt);function gbt(e,t){return new q1t(qy(e,t))}var bbt=qn(gbt);function vbt(e,t){return new C1t(e.values[t*4],e.values[t*4+1],qy(e,t*2+1)/BigInt(1e3))}var wbt=qn(vbt);function _bt(e,t){let{children:n,valueOffsets:r}=e,i=r[t],s=r[t+1];return new U1t(Nbt(n[0],i,s))}var Sbt=qn(_bt);function xbt(e,t){let n=[],{children:r,type:i}=e,s=i.children;for(let o=0;o<r.length;o++){let a=r[o],l=s[o].name,c=Wp(a,t);n.push({key:l,value:c})}return new z1t(n)}var Ibt=qn(xbt);function Tbt(e,t){let{children:n,typeIds:r}=e,i=r[t],s=e.type.typeIdToChildIndex[i],o=n[s];return Wp(o,t)}function Ebt(e,t){let n=[],{children:r,valueOffsets:i}=e,s=i[t],o=i[t+1],[a,l]=r[0].children;for(let c=s;c<o;c++)n.push({key:Wp(a,c),value:Wp(l,c)});return new P1t(n)}var Abt=qn(Ebt);function Mbt(e,t){return e.dictionary&&e.dictionary.length>0?e.dictionary.get(e.values[t]):e.values[t]}var $bt=qn(Mbt);function _z(e){switch(e.typeId){case $.Null:return K1t;case $.Int:{let{isSigned:t,bitWidth:n}=e;if(t)switch(n){case 8:return ss;case 16:return ss;case 32:return ss;case 64:return ss;default:throw Error(`unexpected integer bit width: ${n}`)}else switch(n){case 8:return ss;case 16:return ss;case 32:return ss;case 64:return ss;default:throw Error(`unexpected integer bit width: ${n}`)}}case $.Float:{let{precision:t}=e;switch(t){case Ke.HALF:throw Error("DuckDB does not support half-precision floats");case Ke.SINGLE:return ss;case Ke.DOUBLE:return ss;default:throw Error(`unexpected precision: ${t}`)}}case $.Binary:return tbt;case $.Utf8:return nbt;case $.Bool:return ibt;case $.Decimal:return obt;case $.Date:{let{unit:t}=e;switch(t){case ar.DAY:return lbt;case ar.MILLISECOND:throw Error("DuckDB does not support millisecond-unit dates");default:throw Error(`unexpected date unit: ${t}`)}}case $.Time:{let{unit:t}=e;switch(t){case rt.SECOND:throw Error("DuckDB does not support second-unit times");case rt.MILLISECOND:throw Error("DuckDB does not support millisecond-unit times");case rt.MICROSECOND:return ubt;case rt.NANOSECOND:throw Error("DuckDB does not support nanosecond-unit times");default:throw Error(`unexpected time unit: ${t}`)}}case $.Timestamp:{let{unit:t,timezone:n}=e;switch(t){case rt.SECOND:if(n)throw Error("DuckDB does not support second-unit timestamps with time zone");return dbt;case rt.MILLISECOND:if(n)throw Error("DuckDB does not support millisecond-unit timestamps with time zone");return pbt;case rt.MICROSECOND:return mbt;case rt.NANOSECOND:if(n)throw Error("DuckDB does not support nanosecond-unit timestamps with time zone");return bbt;default:throw Error(`unexpected time unit: ${t}`)}}case $.Interval:{let{unit:t}=e;switch(t){case Vn.YEAR_MONTH:throw Error("DuckDB does not support year-month intervals");case Vn.DAY_TIME:throw Error("DuckDB does not support day-time intervals");case Vn.MONTH_DAY_NANO:return wbt;default:throw Error(`unexpected interval unit: ${t}`)}}case $.List:return Sbt;case $.Struct:return Ibt;case $.Union:{let{mode:t}=e;switch(t){case an.Dense:throw Error("DuckDB does not support dense unions");case an.Sparse:return Tbt;default:throw Error(`unexpected union mode: ${t}`)}}case $.FixedSizeBinary:throw Error("DuckDB does not support fixed-size binary");case $.FixedSizeList:throw Error("DuckDB does not support fixed-size lists");case $.Map:return Abt;case $.Dictionary:return $bt;default:throw Error(`unexpected type id: ${e.typeId}`)}}function Wp(e,t){return _z(e.type)(e,t)}function Nbt(e,t,n){let r=_z(e.type);return X1t(e,t,n,r)}var kbt=class extends yz{constructor(e){super(),this.recordBatch=e}get columnCount(){return this.recordBatch.schema.fields.length}get rowCount(){return this.recordBatch.data.length}columnName(e){return this.recordBatch.schema.fields[e].name}columnType(e){let t=this.recordBatch.schema.fields[e];return mu(t.type)}value(e,t){let n=this.recordBatch.data.children[e];return Wp(n,t)}},X_=Object.freeze({done:!0,value:void 0}),Sz=class{constructor(e){this.recordBatchIterator=e}async next(){let{done:e,value:t}=await this.recordBatchIterator.next();return t?{done:!!e,value:new kbt(t)}:X_}async return(e){return this.recordBatchIterator.return&&await this.recordBatchIterator.return(),e?{done:!0,value:e}:X_}async throw(e){return this.recordBatchIterator.throw&&await this.recordBatchIterator.throw(e),X_}[Symbol.asyncIterator](){return this}},xz=class extends yz{constructor(e){super(),this.iteratorDone=!1,this.totalRowsRead=0,this.batches=[],this.batchSizeRuns=[],this.iterator=e}get columnCount(){return this.batches.length===0?0:this.batches[0].columnCount}get rowCount(){return this.totalRowsRead}columnName(e){if(this.batches.length===0)throw Error("no column data");return this.batches[0].columnName(e)}columnType(e){if(this.batches.length===0)throw Error("no column data");return this.batches[0].columnType(e)}value(e,t){if(this.totalRowsRead===0)throw Error("no data");let n=0,r=t;for(let i of this.batchSizeRuns){if(r<i.rowCount){n+=Math.floor(r/i.batchSize);let s=r%i.batchSize;return this.batches[n].value(e,s)}n+=i.batchCount,r-=i.rowCount}throw Error(`Row index ${t} requested, but only ${this.totalRowsRead} row have been read so far.`)}get done(){return this.iteratorDone}async readAll(){return this.read()}async readUntil(e){return this.read(e)}async read(e){for(;!(this.iteratorDone||e!==void 0&&this.totalRowsRead>=e);){let{value:t,done:n}=await this.iterator.next();t&&(this.updateBatchSizeRuns(t),this.batches.push(t),this.totalRowsRead+=t.rowCount),n&&(this.iteratorDone=n)}}updateBatchSizeRuns(e){if(this.batchSizeRuns.length>0){let t=this.batchSizeRuns[this.batchSizeRuns.length-1];if(t.batchSize===e.rowCount){t.batchCount+=1,t.rowCount+=t.batchSize;return}}this.batchSizeRuns.push({batchCount:1,batchSize:e.rowCount,rowCount:e.rowCount})}},Q_=class{constructor(e,t,n){this.connection=null,this.deferredConnection=e,this.query=t,this.args=n}async run(){let e=performance.now(),t=await this.sendQuery(),n=new Sz(t),r=new xz(n);await r.readAll();let i=performance.now();return{type:"materialized",startTimeMs:e,endTimeMs:i,data:r}}async cancel(){return(this.connection||await this.getConnection()).cancelSent()}async getConnection(){return this.connection=await this.deferredConnection,this.connection}async sendQuery(){var t;let e=this.connection||await this.getConnection();return this.args&&((t=this.args)==null?void 0:t.length)>0?(await e.prepare(this.query)).send(...this.args):e.send(this.query)}},b4=class{constructor(e,t,n){this.connection=null,this.deferredConnection=e,this.query=t,this.args=n}async run(){let e=await this.sendQuery(),t=new Sz(e),n=new xz(t);return{type:"streaming",arrowStream:e,dataStream:t,dataReader:n}}async cancel(){return(this.connection||await this.getConnection()).cancelSent()}async getConnection(){return this.connection=await this.deferredConnection,this.connection}async sendQuery(){var t;let e=this.connection||await this.getConnection();return this.args&&((t=this.args)==null?void 0:t.length)>0?(await e.prepare(this.query)).send(this.args):e.send(this.query)}};function v4(){throw new Error("should never be called")}function Dbt(){let e=v4,t=v4;return{promise:new Promise((n,r)=>{e=n,t=r}),resolve:e,reject:t}}var Obt=class{constructor(e){this.nextTaskId=1,this.queuedTaskIds=[],this.queuedTasksById={},this.processingQueue=!1,this.logSink=e}incompleteTaskCount(){let e=0;for(let t of this.queuedTaskIds){let n=this.queuedTasksById[t];n&&(n.state===0||n.state===1)&&e++}return e}enqueueTask(e){let t=this.createTaskId();return this.logDebug(`enqueueTask: creating task id = ${t}`),this.addQueuedTask({id:t,task:e,state:0,deferred:Dbt(),cancelled:!1}),this.scheduleProcessQueueIfNeeded(),t}async cancelTask(e,t){this.logDebug(`cancelTask(${e}): called`);let n=this.queuedTasksById[e];if(!n)throw new Error(`Task with id ${e} not found`);switch(n.state){case 0:return n.cancelled?this.logDebug(`cancelTask(${e}): cancelling pending task (already cancelled)`):(this.logDebug(`cancelTask(${e}): cancelling pending task`),n.cancelled=!0,n.deferred.reject(new Error(t??"pending task cancelled")),this.scheduleProcessQueueIfNeeded()),!0;case 1:return this.logDebug(`cancelTask(${e}): cancelling running task`),n.cancelled=!0,n.task.cancel();case 2:return this.logDebug(`cancelTask(${e}): can't cancel resolved task`),!1;case 3:return this.logDebug(`cancelTask(${e}): can't cancel rejected task`),!1;default:throw n.state,new Error("unreachable")}}taskResult(e){this.logDebug(`taskResults(${e}): called`);let t=this.queuedTasksById[e];if(!t)throw new Error(`Task with id ${e} not found`);return t.deferred.promise}logDebug(e){this.logSink&&this.logSink.debug(e)}logWarn(e){this.logSink&&this.logSink.warn(e)}createTaskId(){return`t${this.nextTaskId++}`}addQueuedTask(e){this.queuedTaskIds.push(e.id),this.queuedTasksById[e.id]=e}scheduleProcessQueueIfNeeded(){this.processingQueue?this.logDebug("scheduleProcessQueueIfNeeded: processQueue already scheduled"):(this.logDebug("scheduleProcessQueueIfNeeded: scheduling processQueue"),this.processingQueue=!0,setTimeout(()=>{this.processQueue(),this.processingQueue=!1},0))}processQueue(){this.logDebug("processQueue: processing started");let e;do e=this.processFirstQueuedTask();while(e);this.logDebug("processQueue: processing completed")}processFirstQueuedTask(){if(this.queuedTaskIds.length===0)return this.logDebug("processFirstQueuedTask: queue empty"),!1;let e=this.queuedTaskIds[0];this.logDebug(`processFirstQueuedTask: processing task ${e}`);let t=this.queuedTasksById[e];if(!t)return this.logWarn(`processFirstQueuedTask: task ${e} not found in map`),this.queuedTaskIds.shift(),!0;switch(t.state){case 0:return t.cancelled?(this.logDebug(`processFirstQueuedTask: removing cancelled pending task ${e} from queue`),this.queuedTaskIds.shift(),delete this.queuedTasksById[t.id],!0):(this.logDebug(`processFirstQueuedTask: running pending task ${e}`),t.state=1,t.task.run().then(n=>{this.logDebug(`processFirstQueuedTask: task ${e} resolved`),t.state=2,t.deferred.resolve(n)}).catch(n=>{this.logDebug(`processFirstQueuedTask: task ${e} rejected`),t.state=3,t.deferred.reject(n)}).finally(()=>{this.scheduleProcessQueueIfNeeded()}),!1);case 1:return this.logDebug(`processFirstQueuedTask: task ${e} at front of queue is already running`),!1;case 2:case 3:return this.logDebug(`processFirstQueuedTask: task ${e} at front of queue is completed, removing from queue`),this.queuedTaskIds.shift(),delete this.queuedTasksById[t.id],!0;default:throw t.state,new Error("unreachable")}}},w4="CatalogChangeEvent",Lm=null;async function Fbt(e){let t=await(await Bbt(e)).connect();return e.skipWelcomePack||await t.query("PRAGMA MD_USE_DEFAULT"),t}async function Bbt(e){return Lm||(Lm=Cbt(e),Lm)}function Lbt(e){return e?e.endsWith("/")?e:`${e}/`:"https://app.motherduck.com/"}async function Rbt(e,t){let n=Iz(t),r=`${e}${n}${n.length>0?"/":""}`,i=`${r}duckdb-assets.json`,s=await(await fetch(i)).json();return s.coi&&(s.coi.mainModule=r+s.coi.mainModule,s.coi.mainWorker=r+s.coi.mainWorker,s.coi.pthreadWorker=r+s.coi.pthreadWorker),s.mvp&&(s.mvp.mainModule=r+s.mvp.mainModule,s.mvp.mainWorker=r+s.mvp.mainWorker),s.eh&&(s.eh.mainModule=r+s.eh.mainModule,s.eh.mainWorker=r+s.eh.mainWorker),s}function _4(e,t){return URL.createObjectURL(new Blob([`importScripts("${t}");`],{type:"text/javascript"}))}async function Cbt(e){let t=await Vbt(),n=Lbt(e.duckDBAssetsURLPrefix),r=e.version||await zbt(n),i=await Rbt(n,r),s=e.useDuckDBWasmCOI?i.coi:i.eh;if(!s)throw new Error("Could not find DuckDB WASM asset URLs in duckdb-assets.json");let o=/^https?:\/\//.test(n),a=o?_4(n,s.mainWorker):s.mainWorker,l=o&&s.pthreadWorker?_4(n,s.pthreadWorker):s.pthreadWorker,c=new Worker(a);c.addEventListener("message",y=>{var m;((m=y==null?void 0:y.data)==null?void 0:m.type)==="MD_EVENT"&&(y.data.name===w4?document.dispatchEvent(new CustomEvent(w4,{detail:y.data})):console.error("Received unknown event",y.data))}),t||c.addEventListener("message",y=>{if(y&&y.data&&y.data.type==="Initialize"){let m=new Worker(y.data.workerUrl);URL.revokeObjectURL(y.data.workerUrl),m.postMessage(y.data,[y.data.port])}});let u=e.enableDebugLogging?jx.INFO:jx.WARNING,f=new a1t(u),d=new p1t(f,c);await d.instantiate(s.mainModule,l),o&&(URL.revokeObjectURL(a),l&&URL.revokeObjectURL(l));let h=await d.connect();await jbt(h,n,r),await h.query("LOAD icu;");let p=new URL(e.mdServerURL||"https://api.motherduck.com");await h.query(`SET motherduck_host='${p.hostname}';`),p.port&&await h.query(`SET motherduck_port='${p.port}';`),p.protocol==="http:"&&await h.query("SET motherduck_use_tls=false;"),await h.query(`SET motherduck_token='${e.mdToken}';`);let g=!1;for(let y=0;y<6e3;++y){if(await Ubt(h)){g=!0;break}await new Promise(m=>setTimeout(m,10))}if(!g)throw new Error("Could not initialize worker after 1 minute.");let v=e.enableDebugLogging?"debug":"error";return await h.query(`SET motherduck_log_level='${v}';`),Lm=d,d}async function Ubt(e){return(await e.query("from MD_IS_NETWORK_READY();")).toArray()[0].Success}var Pbt="0.10-plus",S4="app.motherduck.com",x4="app.staging.motherduck.com";async function zbt(e){let t=e.startsWith(`https://${S4}`),n=e.startsWith(`https://${x4}`);return t||n?(await(await fetch(`${e}duckdb_version_range/${Pbt}/manifest`)).json())[n?x4:S4]:(await(await fetch(`${e}version`)).json()).version}function Iz(e){return!e||e.startsWith("DEV-")?"":e}async function jbt(e,t,n){let r=Iz(n),i=t==="/"?`${window.origin}${r.length>0?"/":""}`:t;await e.query([`SET custom_extension_repository="${i}${r}${r.length>0?"/":""}duckdb-wasm";`,"LOAD motherduck;","RESET custom_extension_repository;"].join(""))}async function Vbt(){return new Promise(e=>{let t=URL.createObjectURL(new Blob(["self.postMessage({ canCreateWorker: !!self.Worker });"],{type:"application/javascript"})),n=new Worker(t);URL.revokeObjectURL(t),n.addEventListener("message",r);function r(i){n.removeEventListener("message",r),n.terminate(),e(i.data.canCreateWorker)}})}function Ybt(e){let t=/^[^{]*({.*})/.exec(e);if(t){let n=t[1];try{let r=JSON.parse(n);if(r.message)return r.message}catch{return e}}return e}function qbt(e){return typeof e=="object"&&e!==null&&"message"in e&&typeof e.message=="string"}function Wbt(e){if(qbt(e))return e.message;try{return JSON.stringify(e)}catch{return String(e)}}var Hbt=0;function Gbt(){return`MDConnection_${Hbt++}`}var Hf,Xbt=(Hf=class{constructor(t,n,r){this.params=t,this.deferredDdbConnection=n,this.id=r,this.sequencer=new Obt(t.logSink)}static create(t){let n=Gbt(),r=Fbt(t),i=new Hf(t,r,n);return this.idMap[n]=i,i}async isInitialized(){return await this.deferredDdbConnection,!0}static getById(t){return this.idMap[t]}async tokenize(t){return(await this.deferredDdbConnection).bindings.tokenize(t)}incompleteQueryCount(){return this.sequencer.incompleteTaskCount()}enqueueQuery(t,n){return this.sequencer.enqueueTask(new Q_(this.deferredDdbConnection,t,n))}async safeEvaluateQuery(t){try{return{status:"success",result:await this.evaluateQuery(t)}}catch(n){return{status:"error",err:n}}}async safeEvaluatePreparedStatement(t,...n){try{return{status:"success",result:await this.evaluatePreparedStatement(t,n)}}catch(r){return{status:"error",err:r}}}async safeEvaluateStreamingQuery(t){try{return{status:"success",result:await this.evaluateStreamingQuery(t)}}catch(n){return{status:"error",err:n}}}async safeEvaluateStreamingPreparedStatement(t,n){try{return{status:"success",result:await this.evaluateStreamingPreparedStatement(t,n)}}catch(r){return{status:"error",err:r}}}async safeEvaluateQueuedQuery(t){try{return{status:"success",result:await this.evaluateQueuedQuery(t)}}catch(n){return{status:"error",err:n}}}async evaluateQuery(t){return this.evaluateExclusive(new Q_(this.deferredDdbConnection,t))}async evaluatePreparedStatement(t,n){return this.evaluateExclusive(new Q_(this.deferredDdbConnection,t,n))}async evaluateStreamingQuery(t){return this.evaluateExclusive(new b4(this.deferredDdbConnection,t,void 0))}async evaluateStreamingPreparedStatement(t,n){return this.evaluateExclusive(new b4(this.deferredDdbConnection,t,n))}async evaluateExclusive(t){let n=this.sequencer.enqueueTask(t);return this.sequencer.taskResult(n).catch(I4)}async evaluateQueuedQuery(t){return this.sequencer.taskResult(t).catch(I4)}async cancelQuery(t,n){return this.sequencer.cancelTask(t,n)}async close(){return(await this.deferredDdbConnection).close()}},Hf.idMap={},Hf);function I4(e){throw new Error(Ybt(Wbt(e)))}async function T4(e){if(e.type==="streaming"){const t=await e.arrowStream.readAll();return new Pn(t)}else throw Error("expected streaming result")}function Qbt(e){const t=Xbt.create({mdToken:e});return{query:async n=>{const{sql:r,type:i}=n,s=await t.evaluateStreamingQuery(r);switch(i){case"arrow":return T4(s);case"json":return Array.from(await T4(s));default:case"exec":return}}}}function Kbt(){const[e,t]=An.useState(!1),n=An.useCallback(async r=>{en().databaseConnector(Qbt(r)),t(!0)},[]);return Ut.jsxs(Ut.Fragment,{children:[Ut.jsx(s0t,{}),Ut.jsx("div",{id:"content-pane",children:e?Ut.jsx(p0t,{}):Ut.jsx(r0t,{connect:n})})]})}K_.createRoot(document.getElementById("root")).render(Ut.jsx(Xz.StrictMode,{children:Ut.jsx(Kbt,{})}));
