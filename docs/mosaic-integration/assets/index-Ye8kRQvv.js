var iV=Object.defineProperty;var sV=(e,t,n)=>t in e?iV(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var tt=(e,t,n)=>(sV(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function ID(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ED={exports:{}},ab={},TD={exports:{}},Ht={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var by=Symbol.for("react.element"),oV=Symbol.for("react.portal"),aV=Symbol.for("react.fragment"),cV=Symbol.for("react.strict_mode"),lV=Symbol.for("react.profiler"),uV=Symbol.for("react.provider"),fV=Symbol.for("react.context"),dV=Symbol.for("react.forward_ref"),hV=Symbol.for("react.suspense"),pV=Symbol.for("react.memo"),yV=Symbol.for("react.lazy"),JA=Symbol.iterator;function mV(e){return e===null||typeof e!="object"?null:(e=JA&&e[JA]||e["@@iterator"],typeof e=="function"?e:null)}var AD={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},MD=Object.assign,ND={};function Sd(e,t,n){this.props=e,this.context=t,this.refs=ND,this.updater=n||AD}Sd.prototype.isReactComponent={};Sd.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Sd.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function $D(){}$D.prototype=Sd.prototype;function LI(e,t,n){this.props=e,this.context=t,this.refs=ND,this.updater=n||AD}var BI=LI.prototype=new $D;BI.constructor=LI;MD(BI,Sd.prototype);BI.isPureReactComponent=!0;var tM=Array.isArray,kD=Object.prototype.hasOwnProperty,CI={current:null},DD={key:!0,ref:!0,__self:!0,__source:!0};function OD(e,t,n){var r,i={},s=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)kD.call(t,r)&&!DD.hasOwnProperty(r)&&(i[r]=t[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var c=Array(a),l=0;l<a;l++)c[l]=arguments[l+2];i.children=c}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:by,type:e,key:s,ref:o,props:i,_owner:CI.current}}function gV(e,t){return{$$typeof:by,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function UI(e){return typeof e=="object"&&e!==null&&e.$$typeof===by}function vV(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var eM=/\/+/g;function Ww(e,t){return typeof e=="object"&&e!==null&&e.key!=null?vV(""+e.key):t.toString(36)}function x0(e,t,n,r,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case by:case oV:o=!0}}if(o)return o=e,i=i(o),e=r===""?"."+Ww(o,0):r,tM(i)?(n="",e!=null&&(n=e.replace(eM,"$&/")+"/"),x0(i,t,n,"",function(l){return l})):i!=null&&(UI(i)&&(i=gV(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(eM,"$&/")+"/")+e)),t.push(i)),1;if(o=0,r=r===""?".":r+":",tM(e))for(var a=0;a<e.length;a++){s=e[a];var c=r+Ww(s,a);o+=x0(s,t,n,c,i)}else if(c=mV(e),typeof c=="function")for(e=c.call(e),a=0;!(s=e.next()).done;)s=s.value,c=r+Ww(s,a++),o+=x0(s,t,n,c,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function xm(e,t,n){if(e==null)return e;var r=[],i=0;return x0(e,r,"","",function(s){return t.call(n,s,i++)}),r}function bV(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var vr={current:null},I0={transition:null},wV={ReactCurrentDispatcher:vr,ReactCurrentBatchConfig:I0,ReactCurrentOwner:CI};Ht.Children={map:xm,forEach:function(e,t,n){xm(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return xm(e,function(){t++}),t},toArray:function(e){return xm(e,function(t){return t})||[]},only:function(e){if(!UI(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Ht.Component=Sd;Ht.Fragment=aV;Ht.Profiler=lV;Ht.PureComponent=LI;Ht.StrictMode=cV;Ht.Suspense=hV;Ht.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=wV;Ht.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=MD({},e.props),i=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=CI.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(c in t)kD.call(t,c)&&!DD.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&a!==void 0?a[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var l=0;l<c;l++)a[l]=arguments[l+2];r.children=a}return{$$typeof:by,type:e.type,key:i,ref:s,props:r,_owner:o}};Ht.createContext=function(e){return e={$$typeof:fV,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:uV,_context:e},e.Consumer=e};Ht.createElement=OD;Ht.createFactory=function(e){var t=OD.bind(null,e);return t.type=e,t};Ht.createRef=function(){return{current:null}};Ht.forwardRef=function(e){return{$$typeof:dV,render:e}};Ht.isValidElement=UI;Ht.lazy=function(e){return{$$typeof:yV,_payload:{_status:-1,_result:e},_init:bV}};Ht.memo=function(e,t){return{$$typeof:pV,type:e,compare:t===void 0?null:t}};Ht.startTransition=function(e){var t=I0.transition;I0.transition={};try{e()}finally{I0.transition=t}};Ht.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Ht.useCallback=function(e,t){return vr.current.useCallback(e,t)};Ht.useContext=function(e){return vr.current.useContext(e)};Ht.useDebugValue=function(){};Ht.useDeferredValue=function(e){return vr.current.useDeferredValue(e)};Ht.useEffect=function(e,t){return vr.current.useEffect(e,t)};Ht.useId=function(){return vr.current.useId()};Ht.useImperativeHandle=function(e,t,n){return vr.current.useImperativeHandle(e,t,n)};Ht.useInsertionEffect=function(e,t){return vr.current.useInsertionEffect(e,t)};Ht.useLayoutEffect=function(e,t){return vr.current.useLayoutEffect(e,t)};Ht.useMemo=function(e,t){return vr.current.useMemo(e,t)};Ht.useReducer=function(e,t,n){return vr.current.useReducer(e,t,n)};Ht.useRef=function(e){return vr.current.useRef(e)};Ht.useState=function(e){return vr.current.useState(e)};Ht.useSyncExternalStore=function(e,t,n){return vr.current.useSyncExternalStore(e,t,n)};Ht.useTransition=function(){return vr.current.useTransition()};Ht.version="18.2.0";TD.exports=Ht;var Bn=TD.exports;const _V=ID(Bn);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SV=Bn,xV=Symbol.for("react.element"),IV=Symbol.for("react.fragment"),EV=Object.prototype.hasOwnProperty,TV=SV.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,AV={key:!0,ref:!0,__self:!0,__source:!0};function RD(e,t,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)EV.call(t,r)&&!AV.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:xV,type:e,key:s,ref:o,props:i,_owner:TV.current}}ab.Fragment=IV;ab.jsx=RD;ab.jsxs=RD;ED.exports=ab;var Wt=ED.exports,U2={},FD={exports:{}},ii={},LD={exports:{}},BD={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(O,C){var L=O.length;O.push(C);t:for(;0<L;){var P=L-1>>>1,z=O[P];if(0<i(z,C))O[P]=C,O[L]=z,L=P;else break t}}function n(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var C=O[0],L=O.pop();if(L!==C){O[0]=L;t:for(var P=0,z=O.length,G=z>>>1;P<G;){var Q=2*(P+1)-1,rt=O[Q],Z=Q+1,q=O[Z];if(0>i(rt,L))Z<z&&0>i(q,rt)?(O[P]=q,O[Z]=L,P=Z):(O[P]=rt,O[Q]=L,P=Q);else if(Z<z&&0>i(q,L))O[P]=q,O[Z]=L,P=Z;else break t}}return C}function i(O,C){var L=O.sortIndex-C.sortIndex;return L!==0?L:O.id-C.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var c=[],l=[],u=1,f=null,d=3,h=!1,p=!1,g=!1,b=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(O){for(var C=n(l);C!==null;){if(C.callback===null)r(l);else if(C.startTime<=O)r(l),C.sortIndex=C.expirationTime,t(c,C);else break;C=n(l)}}function w(O){if(g=!1,v(O),!p)if(n(c)!==null)p=!0,M(_);else{var C=n(l);C!==null&&R(w,C.startTime-O)}}function _(O,C){p=!1,g&&(g=!1,y(T),T=-1),h=!0;var L=d;try{for(v(C),f=n(c);f!==null&&(!(f.expirationTime>C)||O&&!A());){var P=f.callback;if(typeof P=="function"){f.callback=null,d=f.priorityLevel;var z=P(f.expirationTime<=C);C=e.unstable_now(),typeof z=="function"?f.callback=z:f===n(c)&&r(c),v(C)}else r(c);f=n(c)}if(f!==null)var G=!0;else{var Q=n(l);Q!==null&&R(w,Q.startTime-C),G=!1}return G}finally{f=null,d=L,h=!1}}var S=!1,x=null,T=-1,$=5,I=-1;function A(){return!(e.unstable_now()-I<$)}function D(){if(x!==null){var O=e.unstable_now();I=O;var C=!0;try{C=x(!0,O)}finally{C?F():(S=!1,x=null)}}else S=!1}var F;if(typeof m=="function")F=function(){m(D)};else if(typeof MessageChannel<"u"){var E=new MessageChannel,N=E.port2;E.port1.onmessage=D,F=function(){N.postMessage(null)}}else F=function(){b(D,0)};function M(O){x=O,S||(S=!0,F())}function R(O,C){T=b(function(){O(e.unstable_now())},C)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(O){O.callback=null},e.unstable_continueExecution=function(){p||h||(p=!0,M(_))},e.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<O?Math.floor(1e3/O):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(O){switch(d){case 1:case 2:case 3:var C=3;break;default:C=d}var L=d;d=C;try{return O()}finally{d=L}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(O,C){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var L=d;d=O;try{return C()}finally{d=L}},e.unstable_scheduleCallback=function(O,C,L){var P=e.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?P+L:P):L=P,O){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=L+z,O={id:u++,callback:C,priorityLevel:O,startTime:L,expirationTime:z,sortIndex:-1},L>P?(O.sortIndex=L,t(l,O),n(c)===null&&O===n(l)&&(g?(y(T),T=-1):g=!0,R(w,L-P))):(O.sortIndex=z,t(c,O),p||h||(p=!0,M(_))),O},e.unstable_shouldYield=A,e.unstable_wrapCallback=function(O){var C=d;return function(){var L=d;d=C;try{return O.apply(this,arguments)}finally{d=L}}}})(BD);LD.exports=BD;var MV=LD.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CD=Bn,Zr=MV;function W(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var UD=new Set,hp={};function Zl(e,t){Uf(e,t),Uf(e+"Capture",t)}function Uf(e,t){for(hp[e]=t,e=0;e<t.length;e++)UD.add(t[e])}var Wo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),P2=Object.prototype.hasOwnProperty,NV=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,nM={},rM={};function $V(e){return P2.call(rM,e)?!0:P2.call(nM,e)?!1:NV.test(e)?rM[e]=!0:(nM[e]=!0,!1)}function kV(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function DV(e,t,n,r){if(t===null||typeof t>"u"||kV(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function br(e,t,n,r,i,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var zn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){zn[e]=new br(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];zn[t]=new br(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){zn[e]=new br(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){zn[e]=new br(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){zn[e]=new br(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){zn[e]=new br(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){zn[e]=new br(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){zn[e]=new br(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){zn[e]=new br(e,5,!1,e.toLowerCase(),null,!1,!1)});var PI=/[\-:]([a-z])/g;function zI(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(PI,zI);zn[t]=new br(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(PI,zI);zn[t]=new br(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(PI,zI);zn[t]=new br(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){zn[e]=new br(e,1,!1,e.toLowerCase(),null,!1,!1)});zn.xlinkHref=new br("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){zn[e]=new br(e,1,!1,e.toLowerCase(),null,!0,!0)});function jI(e,t,n,r){var i=zn.hasOwnProperty(t)?zn[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(DV(t,n,i,r)&&(n=null),r||i===null?$V(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var na=CD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Im=Symbol.for("react.element"),Wu=Symbol.for("react.portal"),Gu=Symbol.for("react.fragment"),VI=Symbol.for("react.strict_mode"),z2=Symbol.for("react.profiler"),PD=Symbol.for("react.provider"),zD=Symbol.for("react.context"),YI=Symbol.for("react.forward_ref"),j2=Symbol.for("react.suspense"),V2=Symbol.for("react.suspense_list"),qI=Symbol.for("react.memo"),Ia=Symbol.for("react.lazy"),jD=Symbol.for("react.offscreen"),iM=Symbol.iterator;function Gd(e){return e===null||typeof e!="object"?null:(e=iM&&e[iM]||e["@@iterator"],typeof e=="function"?e:null)}var Xe=Object.assign,Gw;function gh(e){if(Gw===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Gw=t&&t[1]||""}return`
`+Gw+e}var Hw=!1;function Xw(e,t){if(!e||Hw)return"";Hw=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var c=`
`+i[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=a);break}}}finally{Hw=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?gh(e):""}function OV(e){switch(e.tag){case 5:return gh(e.type);case 16:return gh("Lazy");case 13:return gh("Suspense");case 19:return gh("SuspenseList");case 0:case 2:case 15:return e=Xw(e.type,!1),e;case 11:return e=Xw(e.type.render,!1),e;case 1:return e=Xw(e.type,!0),e;default:return""}}function Y2(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Gu:return"Fragment";case Wu:return"Portal";case z2:return"Profiler";case VI:return"StrictMode";case j2:return"Suspense";case V2:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case zD:return(e.displayName||"Context")+".Consumer";case PD:return(e._context.displayName||"Context")+".Provider";case YI:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case qI:return t=e.displayName||null,t!==null?t:Y2(e.type)||"Memo";case Ia:t=e._payload,e=e._init;try{return Y2(e(t))}catch{}}return null}function RV(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Y2(t);case 8:return t===VI?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ec(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function VD(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function FV(e){var t=VD(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Em(e){e._valueTracker||(e._valueTracker=FV(e))}function YD(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=VD(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function dg(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function q2(e,t){var n=t.checked;return Xe({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function sM(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=ec(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function qD(e,t){t=t.checked,t!=null&&jI(e,"checked",t,!1)}function W2(e,t){qD(e,t);var n=ec(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?G2(e,t.type,n):t.hasOwnProperty("defaultValue")&&G2(e,t.type,ec(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function oM(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function G2(e,t,n){(t!=="number"||dg(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var vh=Array.isArray;function mf(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ec(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function H2(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(W(91));return Xe({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function aM(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(W(92));if(vh(n)){if(1<n.length)throw Error(W(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:ec(n)}}function WD(e,t){var n=ec(t.value),r=ec(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function cM(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function GD(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function X2(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?GD(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Tm,HD=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Tm=Tm||document.createElement("div"),Tm.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Tm.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function pp(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Wh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},LV=["Webkit","ms","Moz","O"];Object.keys(Wh).forEach(function(e){LV.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Wh[t]=Wh[e]})});function XD(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Wh.hasOwnProperty(e)&&Wh[e]?(""+t).trim():t+"px"}function QD(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=XD(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var BV=Xe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Q2(e,t){if(t){if(BV[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(W(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(W(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(W(61))}if(t.style!=null&&typeof t.style!="object")throw Error(W(62))}}function K2(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Z2=null;function WI(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var J2=null,gf=null,vf=null;function lM(e){if(e=Sy(e)){if(typeof J2!="function")throw Error(W(280));var t=e.stateNode;t&&(t=db(t),J2(e.stateNode,e.type,t))}}function KD(e){gf?vf?vf.push(e):vf=[e]:gf=e}function ZD(){if(gf){var e=gf,t=vf;if(vf=gf=null,lM(e),t)for(e=0;e<t.length;e++)lM(t[e])}}function JD(e,t){return e(t)}function tO(){}var Qw=!1;function eO(e,t,n){if(Qw)return e(t,n);Qw=!0;try{return JD(e,t,n)}finally{Qw=!1,(gf!==null||vf!==null)&&(tO(),ZD())}}function yp(e,t){var n=e.stateNode;if(n===null)return null;var r=db(n);if(r===null)return null;n=r[t];t:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break t;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(W(231,t,typeof n));return n}var tS=!1;if(Wo)try{var Hd={};Object.defineProperty(Hd,"passive",{get:function(){tS=!0}}),window.addEventListener("test",Hd,Hd),window.removeEventListener("test",Hd,Hd)}catch{tS=!1}function CV(e,t,n,r,i,s,o,a,c){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(u){this.onError(u)}}var Gh=!1,hg=null,pg=!1,eS=null,UV={onError:function(e){Gh=!0,hg=e}};function PV(e,t,n,r,i,s,o,a,c){Gh=!1,hg=null,CV.apply(UV,arguments)}function zV(e,t,n,r,i,s,o,a,c){if(PV.apply(this,arguments),Gh){if(Gh){var l=hg;Gh=!1,hg=null}else throw Error(W(198));pg||(pg=!0,eS=l)}}function Jl(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function nO(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function uM(e){if(Jl(e)!==e)throw Error(W(188))}function jV(e){var t=e.alternate;if(!t){if(t=Jl(e),t===null)throw Error(W(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return uM(i),e;if(s===r)return uM(i),t;s=s.sibling}throw Error(W(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(W(189))}}if(n.alternate!==r)throw Error(W(190))}if(n.tag!==3)throw Error(W(188));return n.stateNode.current===n?e:t}function rO(e){return e=jV(e),e!==null?iO(e):null}function iO(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=iO(e);if(t!==null)return t;e=e.sibling}return null}var sO=Zr.unstable_scheduleCallback,fM=Zr.unstable_cancelCallback,VV=Zr.unstable_shouldYield,YV=Zr.unstable_requestPaint,sn=Zr.unstable_now,qV=Zr.unstable_getCurrentPriorityLevel,GI=Zr.unstable_ImmediatePriority,oO=Zr.unstable_UserBlockingPriority,yg=Zr.unstable_NormalPriority,WV=Zr.unstable_LowPriority,aO=Zr.unstable_IdlePriority,cb=null,Us=null;function GV(e){if(Us&&typeof Us.onCommitFiberRoot=="function")try{Us.onCommitFiberRoot(cb,e,void 0,(e.current.flags&128)===128)}catch{}}var Zi=Math.clz32?Math.clz32:QV,HV=Math.log,XV=Math.LN2;function QV(e){return e>>>=0,e===0?32:31-(HV(e)/XV|0)|0}var Am=64,Mm=4194304;function bh(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function mg(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=bh(a):(s&=o,s!==0&&(r=bh(s)))}else o=n&~i,o!==0?r=bh(o):s!==0&&(r=bh(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Zi(t),i=1<<n,r|=e[n],t&=~i;return r}function KV(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ZV(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-Zi(s),a=1<<o,c=i[o];c===-1?(!(a&n)||a&r)&&(i[o]=KV(a,t)):c<=t&&(e.expiredLanes|=a),s&=~a}}function nS(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function cO(){var e=Am;return Am<<=1,!(Am&4194240)&&(Am=64),e}function Kw(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function wy(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Zi(t),e[t]=n}function JV(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-Zi(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}function HI(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Zi(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var be=0;function lO(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var uO,XI,fO,dO,hO,rS=!1,Nm=[],za=null,ja=null,Va=null,mp=new Map,gp=new Map,ka=[],tY="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function dM(e,t){switch(e){case"focusin":case"focusout":za=null;break;case"dragenter":case"dragleave":ja=null;break;case"mouseover":case"mouseout":Va=null;break;case"pointerover":case"pointerout":mp.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":gp.delete(t.pointerId)}}function Xd(e,t,n,r,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},t!==null&&(t=Sy(t),t!==null&&XI(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function eY(e,t,n,r,i){switch(t){case"focusin":return za=Xd(za,e,t,n,r,i),!0;case"dragenter":return ja=Xd(ja,e,t,n,r,i),!0;case"mouseover":return Va=Xd(Va,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return mp.set(s,Xd(mp.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,gp.set(s,Xd(gp.get(s)||null,e,t,n,r,i)),!0}return!1}function pO(e){var t=cl(e.target);if(t!==null){var n=Jl(t);if(n!==null){if(t=n.tag,t===13){if(t=nO(n),t!==null){e.blockedOn=t,hO(e.priority,function(){fO(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function E0(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=iS(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Z2=r,n.target.dispatchEvent(r),Z2=null}else return t=Sy(n),t!==null&&XI(t),e.blockedOn=n,!1;t.shift()}return!0}function hM(e,t,n){E0(e)&&n.delete(t)}function nY(){rS=!1,za!==null&&E0(za)&&(za=null),ja!==null&&E0(ja)&&(ja=null),Va!==null&&E0(Va)&&(Va=null),mp.forEach(hM),gp.forEach(hM)}function Qd(e,t){e.blockedOn===t&&(e.blockedOn=null,rS||(rS=!0,Zr.unstable_scheduleCallback(Zr.unstable_NormalPriority,nY)))}function vp(e){function t(i){return Qd(i,e)}if(0<Nm.length){Qd(Nm[0],e);for(var n=1;n<Nm.length;n++){var r=Nm[n];r.blockedOn===e&&(r.blockedOn=null)}}for(za!==null&&Qd(za,e),ja!==null&&Qd(ja,e),Va!==null&&Qd(Va,e),mp.forEach(t),gp.forEach(t),n=0;n<ka.length;n++)r=ka[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<ka.length&&(n=ka[0],n.blockedOn===null);)pO(n),n.blockedOn===null&&ka.shift()}var bf=na.ReactCurrentBatchConfig,gg=!0;function rY(e,t,n,r){var i=be,s=bf.transition;bf.transition=null;try{be=1,QI(e,t,n,r)}finally{be=i,bf.transition=s}}function iY(e,t,n,r){var i=be,s=bf.transition;bf.transition=null;try{be=4,QI(e,t,n,r)}finally{be=i,bf.transition=s}}function QI(e,t,n,r){if(gg){var i=iS(e,t,n,r);if(i===null)a_(e,t,r,vg,n),dM(e,r);else if(eY(i,e,t,n,r))r.stopPropagation();else if(dM(e,r),t&4&&-1<tY.indexOf(e)){for(;i!==null;){var s=Sy(i);if(s!==null&&uO(s),s=iS(e,t,n,r),s===null&&a_(e,t,r,vg,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else a_(e,t,r,null,n)}}var vg=null;function iS(e,t,n,r){if(vg=null,e=WI(r),e=cl(e),e!==null)if(t=Jl(e),t===null)e=null;else if(n=t.tag,n===13){if(e=nO(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return vg=e,null}function yO(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(qV()){case GI:return 1;case oO:return 4;case yg:case WV:return 16;case aO:return 536870912;default:return 16}default:return 16}}var Ba=null,KI=null,T0=null;function mO(){if(T0)return T0;var e,t=KI,n=t.length,r,i="value"in Ba?Ba.value:Ba.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[s-r];r++);return T0=i.slice(e,1<r?1-r:void 0)}function A0(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function $m(){return!0}function pM(){return!1}function si(e){function t(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?$m:pM,this.isPropagationStopped=pM,this}return Xe(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=$m)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=$m)},persist:function(){},isPersistent:$m}),t}var xd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ZI=si(xd),_y=Xe({},xd,{view:0,detail:0}),sY=si(_y),Zw,Jw,Kd,lb=Xe({},_y,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:JI,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Kd&&(Kd&&e.type==="mousemove"?(Zw=e.screenX-Kd.screenX,Jw=e.screenY-Kd.screenY):Jw=Zw=0,Kd=e),Zw)},movementY:function(e){return"movementY"in e?e.movementY:Jw}}),yM=si(lb),oY=Xe({},lb,{dataTransfer:0}),aY=si(oY),cY=Xe({},_y,{relatedTarget:0}),t_=si(cY),lY=Xe({},xd,{animationName:0,elapsedTime:0,pseudoElement:0}),uY=si(lY),fY=Xe({},xd,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),dY=si(fY),hY=Xe({},xd,{data:0}),mM=si(hY),pY={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},yY={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mY={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gY(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=mY[e])?!!t[e]:!1}function JI(){return gY}var vY=Xe({},_y,{key:function(e){if(e.key){var t=pY[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=A0(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?yY[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:JI,charCode:function(e){return e.type==="keypress"?A0(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?A0(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),bY=si(vY),wY=Xe({},lb,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),gM=si(wY),_Y=Xe({},_y,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:JI}),SY=si(_Y),xY=Xe({},xd,{propertyName:0,elapsedTime:0,pseudoElement:0}),IY=si(xY),EY=Xe({},lb,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),TY=si(EY),AY=[9,13,27,32],tE=Wo&&"CompositionEvent"in window,Hh=null;Wo&&"documentMode"in document&&(Hh=document.documentMode);var MY=Wo&&"TextEvent"in window&&!Hh,gO=Wo&&(!tE||Hh&&8<Hh&&11>=Hh),vM=" ",bM=!1;function vO(e,t){switch(e){case"keyup":return AY.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bO(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Hu=!1;function NY(e,t){switch(e){case"compositionend":return bO(t);case"keypress":return t.which!==32?null:(bM=!0,vM);case"textInput":return e=t.data,e===vM&&bM?null:e;default:return null}}function $Y(e,t){if(Hu)return e==="compositionend"||!tE&&vO(e,t)?(e=mO(),T0=KI=Ba=null,Hu=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return gO&&t.locale!=="ko"?null:t.data;default:return null}}var kY={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wM(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!kY[e.type]:t==="textarea"}function wO(e,t,n,r){KD(r),t=bg(t,"onChange"),0<t.length&&(n=new ZI("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Xh=null,bp=null;function DY(e){kO(e,0)}function ub(e){var t=Ku(e);if(YD(t))return e}function OY(e,t){if(e==="change")return t}var _O=!1;if(Wo){var e_;if(Wo){var n_="oninput"in document;if(!n_){var _M=document.createElement("div");_M.setAttribute("oninput","return;"),n_=typeof _M.oninput=="function"}e_=n_}else e_=!1;_O=e_&&(!document.documentMode||9<document.documentMode)}function SM(){Xh&&(Xh.detachEvent("onpropertychange",SO),bp=Xh=null)}function SO(e){if(e.propertyName==="value"&&ub(bp)){var t=[];wO(t,bp,e,WI(e)),eO(DY,t)}}function RY(e,t,n){e==="focusin"?(SM(),Xh=t,bp=n,Xh.attachEvent("onpropertychange",SO)):e==="focusout"&&SM()}function FY(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ub(bp)}function LY(e,t){if(e==="click")return ub(t)}function BY(e,t){if(e==="input"||e==="change")return ub(t)}function CY(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var es=typeof Object.is=="function"?Object.is:CY;function wp(e,t){if(es(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!P2.call(t,i)||!es(e[i],t[i]))return!1}return!0}function xM(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function IM(e,t){var n=xM(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}t:{for(;n;){if(n.nextSibling){n=n.nextSibling;break t}n=n.parentNode}n=void 0}n=xM(n)}}function xO(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?xO(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function IO(){for(var e=window,t=dg();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=dg(e.document)}return t}function eE(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function UY(e){var t=IO(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&xO(n.ownerDocument.documentElement,n)){if(r!==null&&eE(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=IM(n,s);var o=IM(n,r);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var PY=Wo&&"documentMode"in document&&11>=document.documentMode,Xu=null,sS=null,Qh=null,oS=!1;function EM(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;oS||Xu==null||Xu!==dg(r)||(r=Xu,"selectionStart"in r&&eE(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Qh&&wp(Qh,r)||(Qh=r,r=bg(sS,"onSelect"),0<r.length&&(t=new ZI("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Xu)))}function km(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Qu={animationend:km("Animation","AnimationEnd"),animationiteration:km("Animation","AnimationIteration"),animationstart:km("Animation","AnimationStart"),transitionend:km("Transition","TransitionEnd")},r_={},EO={};Wo&&(EO=document.createElement("div").style,"AnimationEvent"in window||(delete Qu.animationend.animation,delete Qu.animationiteration.animation,delete Qu.animationstart.animation),"TransitionEvent"in window||delete Qu.transitionend.transition);function fb(e){if(r_[e])return r_[e];if(!Qu[e])return e;var t=Qu[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in EO)return r_[e]=t[n];return e}var TO=fb("animationend"),AO=fb("animationiteration"),MO=fb("animationstart"),NO=fb("transitionend"),$O=new Map,TM="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Sc(e,t){$O.set(e,t),Zl(t,[e])}for(var i_=0;i_<TM.length;i_++){var s_=TM[i_],zY=s_.toLowerCase(),jY=s_[0].toUpperCase()+s_.slice(1);Sc(zY,"on"+jY)}Sc(TO,"onAnimationEnd");Sc(AO,"onAnimationIteration");Sc(MO,"onAnimationStart");Sc("dblclick","onDoubleClick");Sc("focusin","onFocus");Sc("focusout","onBlur");Sc(NO,"onTransitionEnd");Uf("onMouseEnter",["mouseout","mouseover"]);Uf("onMouseLeave",["mouseout","mouseover"]);Uf("onPointerEnter",["pointerout","pointerover"]);Uf("onPointerLeave",["pointerout","pointerover"]);Zl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Zl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Zl("onBeforeInput",["compositionend","keypress","textInput","paste"]);Zl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Zl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Zl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),VY=new Set("cancel close invalid load scroll toggle".split(" ").concat(wh));function AM(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,zV(r,t,void 0,e),e.currentTarget=null}function kO(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;t:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],c=a.instance,l=a.currentTarget;if(a=a.listener,c!==s&&i.isPropagationStopped())break t;AM(i,a,l),s=c}else for(o=0;o<r.length;o++){if(a=r[o],c=a.instance,l=a.currentTarget,a=a.listener,c!==s&&i.isPropagationStopped())break t;AM(i,a,l),s=c}}}if(pg)throw e=eS,pg=!1,eS=null,e}function De(e,t){var n=t[fS];n===void 0&&(n=t[fS]=new Set);var r=e+"__bubble";n.has(r)||(DO(t,e,2,!1),n.add(r))}function o_(e,t,n){var r=0;t&&(r|=4),DO(n,e,r,t)}var Dm="_reactListening"+Math.random().toString(36).slice(2);function _p(e){if(!e[Dm]){e[Dm]=!0,UD.forEach(function(n){n!=="selectionchange"&&(VY.has(n)||o_(n,!1,e),o_(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Dm]||(t[Dm]=!0,o_("selectionchange",!1,t))}}function DO(e,t,n,r){switch(yO(t)){case 1:var i=rY;break;case 4:i=iY;break;default:i=QI}n=i.bind(null,t,n,e),i=void 0,!tS||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function a_(e,t,n,r,i){var s=r;if(!(t&1)&&!(t&2)&&r!==null)t:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;o=o.return}for(;a!==null;){if(o=cl(a),o===null)return;if(c=o.tag,c===5||c===6){r=s=o;continue t}a=a.parentNode}}r=r.return}eO(function(){var l=s,u=WI(n),f=[];t:{var d=$O.get(e);if(d!==void 0){var h=ZI,p=e;switch(e){case"keypress":if(A0(n)===0)break t;case"keydown":case"keyup":h=bY;break;case"focusin":p="focus",h=t_;break;case"focusout":p="blur",h=t_;break;case"beforeblur":case"afterblur":h=t_;break;case"click":if(n.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=yM;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=aY;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=SY;break;case TO:case AO:case MO:h=uY;break;case NO:h=IY;break;case"scroll":h=sY;break;case"wheel":h=TY;break;case"copy":case"cut":case"paste":h=dY;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=gM}var g=(t&4)!==0,b=!g&&e==="scroll",y=g?d!==null?d+"Capture":null:d;g=[];for(var m=l,v;m!==null;){v=m;var w=v.stateNode;if(v.tag===5&&w!==null&&(v=w,y!==null&&(w=yp(m,y),w!=null&&g.push(Sp(m,w,v)))),b)break;m=m.return}0<g.length&&(d=new h(d,p,null,n,u),f.push({event:d,listeners:g}))}}if(!(t&7)){t:{if(d=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",d&&n!==Z2&&(p=n.relatedTarget||n.fromElement)&&(cl(p)||p[Go]))break t;if((h||d)&&(d=u.window===u?u:(d=u.ownerDocument)?d.defaultView||d.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=l,p=p?cl(p):null,p!==null&&(b=Jl(p),p!==b||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=l),h!==p)){if(g=yM,w="onMouseLeave",y="onMouseEnter",m="mouse",(e==="pointerout"||e==="pointerover")&&(g=gM,w="onPointerLeave",y="onPointerEnter",m="pointer"),b=h==null?d:Ku(h),v=p==null?d:Ku(p),d=new g(w,m+"leave",h,n,u),d.target=b,d.relatedTarget=v,w=null,cl(u)===l&&(g=new g(y,m+"enter",p,n,u),g.target=v,g.relatedTarget=b,w=g),b=w,h&&p)e:{for(g=h,y=p,m=0,v=g;v;v=uu(v))m++;for(v=0,w=y;w;w=uu(w))v++;for(;0<m-v;)g=uu(g),m--;for(;0<v-m;)y=uu(y),v--;for(;m--;){if(g===y||y!==null&&g===y.alternate)break e;g=uu(g),y=uu(y)}g=null}else g=null;h!==null&&MM(f,d,h,g,!1),p!==null&&b!==null&&MM(f,b,p,g,!0)}}t:{if(d=l?Ku(l):window,h=d.nodeName&&d.nodeName.toLowerCase(),h==="select"||h==="input"&&d.type==="file")var _=OY;else if(wM(d))if(_O)_=BY;else{_=FY;var S=RY}else(h=d.nodeName)&&h.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(_=LY);if(_&&(_=_(e,l))){wO(f,_,n,u);break t}S&&S(e,d,l),e==="focusout"&&(S=d._wrapperState)&&S.controlled&&d.type==="number"&&G2(d,"number",d.value)}switch(S=l?Ku(l):window,e){case"focusin":(wM(S)||S.contentEditable==="true")&&(Xu=S,sS=l,Qh=null);break;case"focusout":Qh=sS=Xu=null;break;case"mousedown":oS=!0;break;case"contextmenu":case"mouseup":case"dragend":oS=!1,EM(f,n,u);break;case"selectionchange":if(PY)break;case"keydown":case"keyup":EM(f,n,u)}var x;if(tE)t:{switch(e){case"compositionstart":var T="onCompositionStart";break t;case"compositionend":T="onCompositionEnd";break t;case"compositionupdate":T="onCompositionUpdate";break t}T=void 0}else Hu?vO(e,n)&&(T="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(gO&&n.locale!=="ko"&&(Hu||T!=="onCompositionStart"?T==="onCompositionEnd"&&Hu&&(x=mO()):(Ba=u,KI="value"in Ba?Ba.value:Ba.textContent,Hu=!0)),S=bg(l,T),0<S.length&&(T=new mM(T,e,null,n,u),f.push({event:T,listeners:S}),x?T.data=x:(x=bO(n),x!==null&&(T.data=x)))),(x=MY?NY(e,n):$Y(e,n))&&(l=bg(l,"onBeforeInput"),0<l.length&&(u=new mM("onBeforeInput","beforeinput",null,n,u),f.push({event:u,listeners:l}),u.data=x))}kO(f,t)})}function Sp(e,t,n){return{instance:e,listener:t,currentTarget:n}}function bg(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=yp(e,n),s!=null&&r.unshift(Sp(e,s,i)),s=yp(e,t),s!=null&&r.push(Sp(e,s,i))),e=e.return}return r}function uu(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function MM(e,t,n,r,i){for(var s=t._reactName,o=[];n!==null&&n!==r;){var a=n,c=a.alternate,l=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&l!==null&&(a=l,i?(c=yp(n,s),c!=null&&o.unshift(Sp(n,c,a))):i||(c=yp(n,s),c!=null&&o.push(Sp(n,c,a)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var YY=/\r\n?/g,qY=/\u0000|\uFFFD/g;function NM(e){return(typeof e=="string"?e:""+e).replace(YY,`
`).replace(qY,"")}function Om(e,t,n){if(t=NM(t),NM(e)!==t&&n)throw Error(W(425))}function wg(){}var aS=null,cS=null;function lS(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var uS=typeof setTimeout=="function"?setTimeout:void 0,WY=typeof clearTimeout=="function"?clearTimeout:void 0,$M=typeof Promise=="function"?Promise:void 0,GY=typeof queueMicrotask=="function"?queueMicrotask:typeof $M<"u"?function(e){return $M.resolve(null).then(e).catch(HY)}:uS;function HY(e){setTimeout(function(){throw e})}function c_(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),vp(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);vp(t)}function Ya(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function kM(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Id=Math.random().toString(36).slice(2),As="__reactFiber$"+Id,xp="__reactProps$"+Id,Go="__reactContainer$"+Id,fS="__reactEvents$"+Id,XY="__reactListeners$"+Id,QY="__reactHandles$"+Id;function cl(e){var t=e[As];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Go]||n[As]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=kM(e);e!==null;){if(n=e[As])return n;e=kM(e)}return t}e=n,n=e.parentNode}return null}function Sy(e){return e=e[As]||e[Go],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ku(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(W(33))}function db(e){return e[xp]||null}var dS=[],Zu=-1;function xc(e){return{current:e}}function Oe(e){0>Zu||(e.current=dS[Zu],dS[Zu]=null,Zu--)}function $e(e,t){Zu++,dS[Zu]=e.current,e.current=t}var nc={},er=xc(nc),Nr=xc(!1),Nl=nc;function Pf(e,t){var n=e.type.contextTypes;if(!n)return nc;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function $r(e){return e=e.childContextTypes,e!=null}function _g(){Oe(Nr),Oe(er)}function DM(e,t,n){if(er.current!==nc)throw Error(W(168));$e(er,t),$e(Nr,n)}function OO(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(W(108,RV(e)||"Unknown",i));return Xe({},n,r)}function Sg(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||nc,Nl=er.current,$e(er,e),$e(Nr,Nr.current),!0}function OM(e,t,n){var r=e.stateNode;if(!r)throw Error(W(169));n?(e=OO(e,t,Nl),r.__reactInternalMemoizedMergedChildContext=e,Oe(Nr),Oe(er),$e(er,e)):Oe(Nr),$e(Nr,n)}var To=null,hb=!1,l_=!1;function RO(e){To===null?To=[e]:To.push(e)}function KY(e){hb=!0,RO(e)}function Ic(){if(!l_&&To!==null){l_=!0;var e=0,t=be;try{var n=To;for(be=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}To=null,hb=!1}catch(i){throw To!==null&&(To=To.slice(e+1)),sO(GI,Ic),i}finally{be=t,l_=!1}}return null}var Ju=[],tf=0,xg=null,Ig=0,gi=[],vi=0,$l=null,ko=1,Do="";function qc(e,t){Ju[tf++]=Ig,Ju[tf++]=xg,xg=e,Ig=t}function FO(e,t,n){gi[vi++]=ko,gi[vi++]=Do,gi[vi++]=$l,$l=e;var r=ko;e=Do;var i=32-Zi(r)-1;r&=~(1<<i),n+=1;var s=32-Zi(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,ko=1<<32-Zi(t)+i|n<<i|r,Do=s+e}else ko=1<<s|n<<i|r,Do=e}function nE(e){e.return!==null&&(qc(e,1),FO(e,1,0))}function rE(e){for(;e===xg;)xg=Ju[--tf],Ju[tf]=null,Ig=Ju[--tf],Ju[tf]=null;for(;e===$l;)$l=gi[--vi],gi[vi]=null,Do=gi[--vi],gi[vi]=null,ko=gi[--vi],gi[vi]=null}var Qr=null,qr=null,Le=!1,Gi=null;function LO(e,t){var n=Si(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function RM(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Qr=e,qr=Ya(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Qr=e,qr=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=$l!==null?{id:ko,overflow:Do}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Si(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Qr=e,qr=null,!0):!1;default:return!1}}function hS(e){return(e.mode&1)!==0&&(e.flags&128)===0}function pS(e){if(Le){var t=qr;if(t){var n=t;if(!RM(e,t)){if(hS(e))throw Error(W(418));t=Ya(n.nextSibling);var r=Qr;t&&RM(e,t)?LO(r,n):(e.flags=e.flags&-4097|2,Le=!1,Qr=e)}}else{if(hS(e))throw Error(W(418));e.flags=e.flags&-4097|2,Le=!1,Qr=e}}}function FM(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Qr=e}function Rm(e){if(e!==Qr)return!1;if(!Le)return FM(e),Le=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!lS(e.type,e.memoizedProps)),t&&(t=qr)){if(hS(e))throw BO(),Error(W(418));for(;t;)LO(e,t),t=Ya(t.nextSibling)}if(FM(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(W(317));t:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){qr=Ya(e.nextSibling);break t}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}qr=null}}else qr=Qr?Ya(e.stateNode.nextSibling):null;return!0}function BO(){for(var e=qr;e;)e=Ya(e.nextSibling)}function zf(){qr=Qr=null,Le=!1}function iE(e){Gi===null?Gi=[e]:Gi.push(e)}var ZY=na.ReactCurrentBatchConfig;function ji(e,t){if(e&&e.defaultProps){t=Xe({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}var Eg=xc(null),Tg=null,ef=null,sE=null;function oE(){sE=ef=Tg=null}function aE(e){var t=Eg.current;Oe(Eg),e._currentValue=t}function yS(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function wf(e,t){Tg=e,sE=ef=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ar=!0),e.firstContext=null)}function ki(e){var t=e._currentValue;if(sE!==e)if(e={context:e,memoizedValue:t,next:null},ef===null){if(Tg===null)throw Error(W(308));ef=e,Tg.dependencies={lanes:0,firstContext:e}}else ef=ef.next=e;return t}var ll=null;function cE(e){ll===null?ll=[e]:ll.push(e)}function CO(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,cE(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ho(e,r)}function Ho(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Ea=!1;function lE(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function UO(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Co(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function qa(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,ee&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ho(e,n)}return i=r.interleaved,i===null?(t.next=t,cE(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ho(e,n)}function M0(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,HI(e,n)}}function LM(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ag(e,t,n,r){var i=e.updateQueue;Ea=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var c=a,l=c.next;c.next=null,o===null?s=l:o.next=l,o=c;var u=e.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=l:a.next=l,u.lastBaseUpdate=c))}if(s!==null){var f=i.baseState;o=0,u=l=c=null,a=s;do{var d=a.lane,h=a.eventTime;if((r&d)===d){u!==null&&(u=u.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});t:{var p=e,g=a;switch(d=t,h=n,g.tag){case 1:if(p=g.payload,typeof p=="function"){f=p.call(h,f,d);break t}f=p;break t;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,d=typeof p=="function"?p.call(h,f,d):p,d==null)break t;f=Xe({},f,d);break t;case 2:Ea=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,d=i.effects,d===null?i.effects=[a]:d.push(a))}else h={eventTime:h,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(l=u=h,c=f):u=u.next=h,o|=d;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;d=a,a=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(u===null&&(c=f),i.baseState=c,i.firstBaseUpdate=l,i.lastBaseUpdate=u,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);Dl|=o,e.lanes=o,e.memoizedState=f}}function BM(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(W(191,i));i.call(r)}}}var PO=new CD.Component().refs;function mS(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Xe({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var pb={isMounted:function(e){return(e=e._reactInternals)?Jl(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=hr(),i=Ga(e),s=Co(r,i);s.payload=t,n!=null&&(s.callback=n),t=qa(e,s,i),t!==null&&(Ji(t,e,i,r),M0(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=hr(),i=Ga(e),s=Co(r,i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=qa(e,s,i),t!==null&&(Ji(t,e,i,r),M0(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=hr(),r=Ga(e),i=Co(n,r);i.tag=2,t!=null&&(i.callback=t),t=qa(e,i,r),t!==null&&(Ji(t,e,r,n),M0(t,e,r))}};function CM(e,t,n,r,i,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,o):t.prototype&&t.prototype.isPureReactComponent?!wp(n,r)||!wp(i,s):!0}function zO(e,t,n){var r=!1,i=nc,s=t.contextType;return typeof s=="object"&&s!==null?s=ki(s):(i=$r(t)?Nl:er.current,r=t.contextTypes,s=(r=r!=null)?Pf(e,i):nc),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=pb,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function UM(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&pb.enqueueReplaceState(t,t.state,null)}function gS(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=PO,lE(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=ki(s):(s=$r(t)?Nl:er.current,i.context=Pf(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(mS(e,t,s,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&pb.enqueueReplaceState(i,i.state,null),Ag(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Zd(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(W(309));var r=n.stateNode}if(!r)throw Error(W(147,e));var i=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var a=i.refs;a===PO&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(W(284));if(!n._owner)throw Error(W(290,e))}return e}function Fm(e,t){throw e=Object.prototype.toString.call(t),Error(W(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function PM(e){var t=e._init;return t(e._payload)}function jO(e){function t(y,m){if(e){var v=y.deletions;v===null?(y.deletions=[m],y.flags|=16):v.push(m)}}function n(y,m){if(!e)return null;for(;m!==null;)t(y,m),m=m.sibling;return null}function r(y,m){for(y=new Map;m!==null;)m.key!==null?y.set(m.key,m):y.set(m.index,m),m=m.sibling;return y}function i(y,m){return y=Ha(y,m),y.index=0,y.sibling=null,y}function s(y,m,v){return y.index=v,e?(v=y.alternate,v!==null?(v=v.index,v<m?(y.flags|=2,m):v):(y.flags|=2,m)):(y.flags|=1048576,m)}function o(y){return e&&y.alternate===null&&(y.flags|=2),y}function a(y,m,v,w){return m===null||m.tag!==6?(m=m_(v,y.mode,w),m.return=y,m):(m=i(m,v),m.return=y,m)}function c(y,m,v,w){var _=v.type;return _===Gu?u(y,m,v.props.children,w,v.key):m!==null&&(m.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Ia&&PM(_)===m.type)?(w=i(m,v.props),w.ref=Zd(y,m,v),w.return=y,w):(w=R0(v.type,v.key,v.props,null,y.mode,w),w.ref=Zd(y,m,v),w.return=y,w)}function l(y,m,v,w){return m===null||m.tag!==4||m.stateNode.containerInfo!==v.containerInfo||m.stateNode.implementation!==v.implementation?(m=g_(v,y.mode,w),m.return=y,m):(m=i(m,v.children||[]),m.return=y,m)}function u(y,m,v,w,_){return m===null||m.tag!==7?(m=_l(v,y.mode,w,_),m.return=y,m):(m=i(m,v),m.return=y,m)}function f(y,m,v){if(typeof m=="string"&&m!==""||typeof m=="number")return m=m_(""+m,y.mode,v),m.return=y,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Im:return v=R0(m.type,m.key,m.props,null,y.mode,v),v.ref=Zd(y,null,m),v.return=y,v;case Wu:return m=g_(m,y.mode,v),m.return=y,m;case Ia:var w=m._init;return f(y,w(m._payload),v)}if(vh(m)||Gd(m))return m=_l(m,y.mode,v,null),m.return=y,m;Fm(y,m)}return null}function d(y,m,v,w){var _=m!==null?m.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return _!==null?null:a(y,m,""+v,w);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Im:return v.key===_?c(y,m,v,w):null;case Wu:return v.key===_?l(y,m,v,w):null;case Ia:return _=v._init,d(y,m,_(v._payload),w)}if(vh(v)||Gd(v))return _!==null?null:u(y,m,v,w,null);Fm(y,v)}return null}function h(y,m,v,w,_){if(typeof w=="string"&&w!==""||typeof w=="number")return y=y.get(v)||null,a(m,y,""+w,_);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Im:return y=y.get(w.key===null?v:w.key)||null,c(m,y,w,_);case Wu:return y=y.get(w.key===null?v:w.key)||null,l(m,y,w,_);case Ia:var S=w._init;return h(y,m,v,S(w._payload),_)}if(vh(w)||Gd(w))return y=y.get(v)||null,u(m,y,w,_,null);Fm(m,w)}return null}function p(y,m,v,w){for(var _=null,S=null,x=m,T=m=0,$=null;x!==null&&T<v.length;T++){x.index>T?($=x,x=null):$=x.sibling;var I=d(y,x,v[T],w);if(I===null){x===null&&(x=$);break}e&&x&&I.alternate===null&&t(y,x),m=s(I,m,T),S===null?_=I:S.sibling=I,S=I,x=$}if(T===v.length)return n(y,x),Le&&qc(y,T),_;if(x===null){for(;T<v.length;T++)x=f(y,v[T],w),x!==null&&(m=s(x,m,T),S===null?_=x:S.sibling=x,S=x);return Le&&qc(y,T),_}for(x=r(y,x);T<v.length;T++)$=h(x,y,T,v[T],w),$!==null&&(e&&$.alternate!==null&&x.delete($.key===null?T:$.key),m=s($,m,T),S===null?_=$:S.sibling=$,S=$);return e&&x.forEach(function(A){return t(y,A)}),Le&&qc(y,T),_}function g(y,m,v,w){var _=Gd(v);if(typeof _!="function")throw Error(W(150));if(v=_.call(v),v==null)throw Error(W(151));for(var S=_=null,x=m,T=m=0,$=null,I=v.next();x!==null&&!I.done;T++,I=v.next()){x.index>T?($=x,x=null):$=x.sibling;var A=d(y,x,I.value,w);if(A===null){x===null&&(x=$);break}e&&x&&A.alternate===null&&t(y,x),m=s(A,m,T),S===null?_=A:S.sibling=A,S=A,x=$}if(I.done)return n(y,x),Le&&qc(y,T),_;if(x===null){for(;!I.done;T++,I=v.next())I=f(y,I.value,w),I!==null&&(m=s(I,m,T),S===null?_=I:S.sibling=I,S=I);return Le&&qc(y,T),_}for(x=r(y,x);!I.done;T++,I=v.next())I=h(x,y,T,I.value,w),I!==null&&(e&&I.alternate!==null&&x.delete(I.key===null?T:I.key),m=s(I,m,T),S===null?_=I:S.sibling=I,S=I);return e&&x.forEach(function(D){return t(y,D)}),Le&&qc(y,T),_}function b(y,m,v,w){if(typeof v=="object"&&v!==null&&v.type===Gu&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Im:t:{for(var _=v.key,S=m;S!==null;){if(S.key===_){if(_=v.type,_===Gu){if(S.tag===7){n(y,S.sibling),m=i(S,v.props.children),m.return=y,y=m;break t}}else if(S.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Ia&&PM(_)===S.type){n(y,S.sibling),m=i(S,v.props),m.ref=Zd(y,S,v),m.return=y,y=m;break t}n(y,S);break}else t(y,S);S=S.sibling}v.type===Gu?(m=_l(v.props.children,y.mode,w,v.key),m.return=y,y=m):(w=R0(v.type,v.key,v.props,null,y.mode,w),w.ref=Zd(y,m,v),w.return=y,y=w)}return o(y);case Wu:t:{for(S=v.key;m!==null;){if(m.key===S)if(m.tag===4&&m.stateNode.containerInfo===v.containerInfo&&m.stateNode.implementation===v.implementation){n(y,m.sibling),m=i(m,v.children||[]),m.return=y,y=m;break t}else{n(y,m);break}else t(y,m);m=m.sibling}m=g_(v,y.mode,w),m.return=y,y=m}return o(y);case Ia:return S=v._init,b(y,m,S(v._payload),w)}if(vh(v))return p(y,m,v,w);if(Gd(v))return g(y,m,v,w);Fm(y,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,m!==null&&m.tag===6?(n(y,m.sibling),m=i(m,v),m.return=y,y=m):(n(y,m),m=m_(v,y.mode,w),m.return=y,y=m),o(y)):n(y,m)}return b}var jf=jO(!0),VO=jO(!1),xy={},Ps=xc(xy),Ip=xc(xy),Ep=xc(xy);function ul(e){if(e===xy)throw Error(W(174));return e}function uE(e,t){switch($e(Ep,t),$e(Ip,e),$e(Ps,xy),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:X2(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=X2(t,e)}Oe(Ps),$e(Ps,t)}function Vf(){Oe(Ps),Oe(Ip),Oe(Ep)}function YO(e){ul(Ep.current);var t=ul(Ps.current),n=X2(t,e.type);t!==n&&($e(Ip,e),$e(Ps,n))}function fE(e){Ip.current===e&&(Oe(Ps),Oe(Ip))}var ze=xc(0);function Mg(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var u_=[];function dE(){for(var e=0;e<u_.length;e++)u_[e]._workInProgressVersionPrimary=null;u_.length=0}var N0=na.ReactCurrentDispatcher,f_=na.ReactCurrentBatchConfig,kl=0,Ge=null,mn=null,Tn=null,Ng=!1,Kh=!1,Tp=0,JY=0;function Vn(){throw Error(W(321))}function hE(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!es(e[n],t[n]))return!1;return!0}function pE(e,t,n,r,i,s){if(kl=s,Ge=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,N0.current=e===null||e.memoizedState===null?rq:iq,e=n(r,i),Kh){s=0;do{if(Kh=!1,Tp=0,25<=s)throw Error(W(301));s+=1,Tn=mn=null,t.updateQueue=null,N0.current=sq,e=n(r,i)}while(Kh)}if(N0.current=$g,t=mn!==null&&mn.next!==null,kl=0,Tn=mn=Ge=null,Ng=!1,t)throw Error(W(300));return e}function yE(){var e=Tp!==0;return Tp=0,e}function _s(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Tn===null?Ge.memoizedState=Tn=e:Tn=Tn.next=e,Tn}function Di(){if(mn===null){var e=Ge.alternate;e=e!==null?e.memoizedState:null}else e=mn.next;var t=Tn===null?Ge.memoizedState:Tn.next;if(t!==null)Tn=t,mn=e;else{if(e===null)throw Error(W(310));mn=e,e={memoizedState:mn.memoizedState,baseState:mn.baseState,baseQueue:mn.baseQueue,queue:mn.queue,next:null},Tn===null?Ge.memoizedState=Tn=e:Tn=Tn.next=e}return Tn}function Ap(e,t){return typeof t=="function"?t(e):t}function d_(e){var t=Di(),n=t.queue;if(n===null)throw Error(W(311));n.lastRenderedReducer=e;var r=mn,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,c=null,l=s;do{var u=l.lane;if((kl&u)===u)c!==null&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var f={lane:u,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};c===null?(a=c=f,o=r):c=c.next=f,Ge.lanes|=u,Dl|=u}l=l.next}while(l!==null&&l!==s);c===null?o=r:c.next=a,es(r,t.memoizedState)||(Ar=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do s=i.lane,Ge.lanes|=s,Dl|=s,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function h_(e){var t=Di(),n=t.queue;if(n===null)throw Error(W(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=e(s,o.action),o=o.next;while(o!==i);es(s,t.memoizedState)||(Ar=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function qO(){}function WO(e,t){var n=Ge,r=Di(),i=t(),s=!es(r.memoizedState,i);if(s&&(r.memoizedState=i,Ar=!0),r=r.queue,mE(XO.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||Tn!==null&&Tn.memoizedState.tag&1){if(n.flags|=2048,Mp(9,HO.bind(null,n,r,i,t),void 0,null),$n===null)throw Error(W(349));kl&30||GO(n,t,i)}return i}function GO(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ge.updateQueue,t===null?(t={lastEffect:null,stores:null},Ge.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function HO(e,t,n,r){t.value=n,t.getSnapshot=r,QO(t)&&KO(e)}function XO(e,t,n){return n(function(){QO(t)&&KO(e)})}function QO(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!es(e,n)}catch{return!0}}function KO(e){var t=Ho(e,1);t!==null&&Ji(t,e,1,-1)}function zM(e){var t=_s();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ap,lastRenderedState:e},t.queue=e,e=e.dispatch=nq.bind(null,Ge,e),[t.memoizedState,e]}function Mp(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Ge.updateQueue,t===null?(t={lastEffect:null,stores:null},Ge.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function ZO(){return Di().memoizedState}function $0(e,t,n,r){var i=_s();Ge.flags|=e,i.memoizedState=Mp(1|t,n,void 0,r===void 0?null:r)}function yb(e,t,n,r){var i=Di();r=r===void 0?null:r;var s=void 0;if(mn!==null){var o=mn.memoizedState;if(s=o.destroy,r!==null&&hE(r,o.deps)){i.memoizedState=Mp(t,n,s,r);return}}Ge.flags|=e,i.memoizedState=Mp(1|t,n,s,r)}function jM(e,t){return $0(8390656,8,e,t)}function mE(e,t){return yb(2048,8,e,t)}function JO(e,t){return yb(4,2,e,t)}function tR(e,t){return yb(4,4,e,t)}function eR(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function nR(e,t,n){return n=n!=null?n.concat([e]):null,yb(4,4,eR.bind(null,t,e),n)}function gE(){}function rR(e,t){var n=Di();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&hE(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function iR(e,t){var n=Di();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&hE(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function sR(e,t,n){return kl&21?(es(n,t)||(n=cO(),Ge.lanes|=n,Dl|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ar=!0),e.memoizedState=n)}function tq(e,t){var n=be;be=n!==0&&4>n?n:4,e(!0);var r=f_.transition;f_.transition={};try{e(!1),t()}finally{be=n,f_.transition=r}}function oR(){return Di().memoizedState}function eq(e,t,n){var r=Ga(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},aR(e))cR(t,n);else if(n=CO(e,t,n,r),n!==null){var i=hr();Ji(n,e,r,i),lR(n,t,r)}}function nq(e,t,n){var r=Ga(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(aR(e))cR(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,es(a,o)){var c=t.interleaved;c===null?(i.next=i,cE(t)):(i.next=c.next,c.next=i),t.interleaved=i;return}}catch{}finally{}n=CO(e,t,i,r),n!==null&&(i=hr(),Ji(n,e,r,i),lR(n,t,r))}}function aR(e){var t=e.alternate;return e===Ge||t!==null&&t===Ge}function cR(e,t){Kh=Ng=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function lR(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,HI(e,n)}}var $g={readContext:ki,useCallback:Vn,useContext:Vn,useEffect:Vn,useImperativeHandle:Vn,useInsertionEffect:Vn,useLayoutEffect:Vn,useMemo:Vn,useReducer:Vn,useRef:Vn,useState:Vn,useDebugValue:Vn,useDeferredValue:Vn,useTransition:Vn,useMutableSource:Vn,useSyncExternalStore:Vn,useId:Vn,unstable_isNewReconciler:!1},rq={readContext:ki,useCallback:function(e,t){return _s().memoizedState=[e,t===void 0?null:t],e},useContext:ki,useEffect:jM,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,$0(4194308,4,eR.bind(null,t,e),n)},useLayoutEffect:function(e,t){return $0(4194308,4,e,t)},useInsertionEffect:function(e,t){return $0(4,2,e,t)},useMemo:function(e,t){var n=_s();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=_s();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=eq.bind(null,Ge,e),[r.memoizedState,e]},useRef:function(e){var t=_s();return e={current:e},t.memoizedState=e},useState:zM,useDebugValue:gE,useDeferredValue:function(e){return _s().memoizedState=e},useTransition:function(){var e=zM(!1),t=e[0];return e=tq.bind(null,e[1]),_s().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Ge,i=_s();if(Le){if(n===void 0)throw Error(W(407));n=n()}else{if(n=t(),$n===null)throw Error(W(349));kl&30||GO(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,jM(XO.bind(null,r,s,e),[e]),r.flags|=2048,Mp(9,HO.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=_s(),t=$n.identifierPrefix;if(Le){var n=Do,r=ko;n=(r&~(1<<32-Zi(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Tp++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=JY++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},iq={readContext:ki,useCallback:rR,useContext:ki,useEffect:mE,useImperativeHandle:nR,useInsertionEffect:JO,useLayoutEffect:tR,useMemo:iR,useReducer:d_,useRef:ZO,useState:function(){return d_(Ap)},useDebugValue:gE,useDeferredValue:function(e){var t=Di();return sR(t,mn.memoizedState,e)},useTransition:function(){var e=d_(Ap)[0],t=Di().memoizedState;return[e,t]},useMutableSource:qO,useSyncExternalStore:WO,useId:oR,unstable_isNewReconciler:!1},sq={readContext:ki,useCallback:rR,useContext:ki,useEffect:mE,useImperativeHandle:nR,useInsertionEffect:JO,useLayoutEffect:tR,useMemo:iR,useReducer:h_,useRef:ZO,useState:function(){return h_(Ap)},useDebugValue:gE,useDeferredValue:function(e){var t=Di();return mn===null?t.memoizedState=e:sR(t,mn.memoizedState,e)},useTransition:function(){var e=h_(Ap)[0],t=Di().memoizedState;return[e,t]},useMutableSource:qO,useSyncExternalStore:WO,useId:oR,unstable_isNewReconciler:!1};function Yf(e,t){try{var n="",r=t;do n+=OV(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function p_(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function vS(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var oq=typeof WeakMap=="function"?WeakMap:Map;function uR(e,t,n){n=Co(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Dg||(Dg=!0,MS=r),vS(e,t)},n}function fR(e,t,n){n=Co(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){vS(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){vS(e,t),typeof r!="function"&&(Wa===null?Wa=new Set([this]):Wa.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function VM(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new oq;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=wq.bind(null,e,t,n),t.then(e,e))}function YM(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function qM(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Co(-1,1),t.tag=2,qa(n,t,1))),n.lanes|=1),e)}var aq=na.ReactCurrentOwner,Ar=!1;function ir(e,t,n,r){t.child=e===null?VO(t,null,n,r):jf(t,e.child,n,r)}function WM(e,t,n,r,i){n=n.render;var s=t.ref;return wf(t,i),r=pE(e,t,n,r,s,i),n=yE(),e!==null&&!Ar?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Xo(e,t,i)):(Le&&n&&nE(t),t.flags|=1,ir(e,t,r,i),t.child)}function GM(e,t,n,r,i){if(e===null){var s=n.type;return typeof s=="function"&&!EE(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,dR(e,t,s,r,i)):(e=R0(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:wp,n(o,r)&&e.ref===t.ref)return Xo(e,t,i)}return t.flags|=1,e=Ha(s,r),e.ref=t.ref,e.return=t,t.child=e}function dR(e,t,n,r,i){if(e!==null){var s=e.memoizedProps;if(wp(s,r)&&e.ref===t.ref)if(Ar=!1,t.pendingProps=r=s,(e.lanes&i)!==0)e.flags&131072&&(Ar=!0);else return t.lanes=e.lanes,Xo(e,t,i)}return bS(e,t,n,r,i)}function hR(e,t,n){var r=t.pendingProps,i=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},$e(rf,Vr),Vr|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,$e(rf,Vr),Vr|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,$e(rf,Vr),Vr|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,$e(rf,Vr),Vr|=r;return ir(e,t,i,n),t.child}function pR(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function bS(e,t,n,r,i){var s=$r(n)?Nl:er.current;return s=Pf(t,s),wf(t,i),n=pE(e,t,n,r,s,i),r=yE(),e!==null&&!Ar?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Xo(e,t,i)):(Le&&r&&nE(t),t.flags|=1,ir(e,t,n,i),t.child)}function HM(e,t,n,r,i){if($r(n)){var s=!0;Sg(t)}else s=!1;if(wf(t,i),t.stateNode===null)k0(e,t),zO(t,n,r),gS(t,n,r,i),r=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var c=o.context,l=n.contextType;typeof l=="object"&&l!==null?l=ki(l):(l=$r(n)?Nl:er.current,l=Pf(t,l));var u=n.getDerivedStateFromProps,f=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||c!==l)&&UM(t,o,r,l),Ea=!1;var d=t.memoizedState;o.state=d,Ag(t,r,o,i),c=t.memoizedState,a!==r||d!==c||Nr.current||Ea?(typeof u=="function"&&(mS(t,n,u,r),c=t.memoizedState),(a=Ea||CM(t,n,a,r,d,c,l))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),o.props=r,o.state=c,o.context=l,r=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,UO(e,t),a=t.memoizedProps,l=t.type===t.elementType?a:ji(t.type,a),o.props=l,f=t.pendingProps,d=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=ki(c):(c=$r(n)?Nl:er.current,c=Pf(t,c));var h=n.getDerivedStateFromProps;(u=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||d!==c)&&UM(t,o,r,c),Ea=!1,d=t.memoizedState,o.state=d,Ag(t,r,o,i);var p=t.memoizedState;a!==f||d!==p||Nr.current||Ea?(typeof h=="function"&&(mS(t,n,h,r),p=t.memoizedState),(l=Ea||CM(t,n,l,r,d,p,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=c,r=l):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return wS(e,t,n,r,s,i)}function wS(e,t,n,r,i,s){pR(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return i&&OM(t,n,!1),Xo(e,t,s);r=t.stateNode,aq.current=t;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=jf(t,e.child,null,s),t.child=jf(t,null,a,s)):ir(e,t,a,s),t.memoizedState=r.state,i&&OM(t,n,!0),t.child}function yR(e){var t=e.stateNode;t.pendingContext?DM(e,t.pendingContext,t.pendingContext!==t.context):t.context&&DM(e,t.context,!1),uE(e,t.containerInfo)}function XM(e,t,n,r,i){return zf(),iE(i),t.flags|=256,ir(e,t,n,r),t.child}var _S={dehydrated:null,treeContext:null,retryLane:0};function SS(e){return{baseLanes:e,cachePool:null,transitions:null}}function mR(e,t,n){var r=t.pendingProps,i=ze.current,s=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),$e(ze,i&1),e===null)return pS(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,s?(r=t.mode,s=t.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=vb(o,r,0,null),e=_l(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=SS(n),t.memoizedState=_S,e):vE(t,o));if(i=e.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return cq(e,t,o,r,a,i,n);if(s){s=r.fallback,o=t.mode,i=e.child,a=i.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=Ha(i,c),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Ha(a,s):(s=_l(s,o,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,o=e.child.memoizedState,o=o===null?SS(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~n,t.memoizedState=_S,r}return s=e.child,e=s.sibling,r=Ha(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function vE(e,t){return t=vb({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Lm(e,t,n,r){return r!==null&&iE(r),jf(t,e.child,null,n),e=vE(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function cq(e,t,n,r,i,s,o){if(n)return t.flags&256?(t.flags&=-257,r=p_(Error(W(422))),Lm(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=vb({mode:"visible",children:r.children},i,0,null),s=_l(s,i,o,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&jf(t,e.child,null,o),t.child.memoizedState=SS(o),t.memoizedState=_S,s);if(!(t.mode&1))return Lm(e,t,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(W(419)),r=p_(s,r,void 0),Lm(e,t,o,r)}if(a=(o&e.childLanes)!==0,Ar||a){if(r=$n,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Ho(e,i),Ji(r,e,i,-1))}return IE(),r=p_(Error(W(421))),Lm(e,t,o,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=_q.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,qr=Ya(i.nextSibling),Qr=t,Le=!0,Gi=null,e!==null&&(gi[vi++]=ko,gi[vi++]=Do,gi[vi++]=$l,ko=e.id,Do=e.overflow,$l=t),t=vE(t,r.children),t.flags|=4096,t)}function QM(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),yS(e.return,t,n)}function y_(e,t,n,r,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function gR(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(ir(e,t,r.children,n),r=ze.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)t:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&QM(e,n,t);else if(e.tag===19)QM(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break t;for(;e.sibling===null;){if(e.return===null||e.return===t)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if($e(ze,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&Mg(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),y_(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Mg(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}y_(t,!0,n,null,s);break;case"together":y_(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function k0(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Xo(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Dl|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(W(153));if(t.child!==null){for(e=t.child,n=Ha(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Ha(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function lq(e,t,n){switch(t.tag){case 3:yR(t),zf();break;case 5:YO(t);break;case 1:$r(t.type)&&Sg(t);break;case 4:uE(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;$e(Eg,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?($e(ze,ze.current&1),t.flags|=128,null):n&t.child.childLanes?mR(e,t,n):($e(ze,ze.current&1),e=Xo(e,t,n),e!==null?e.sibling:null);$e(ze,ze.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return gR(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),$e(ze,ze.current),r)break;return null;case 22:case 23:return t.lanes=0,hR(e,t,n)}return Xo(e,t,n)}var vR,xS,bR,wR;vR=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};xS=function(){};bR=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,ul(Ps.current);var s=null;switch(n){case"input":i=q2(e,i),r=q2(e,r),s=[];break;case"select":i=Xe({},i,{value:void 0}),r=Xe({},r,{value:void 0}),s=[];break;case"textarea":i=H2(e,i),r=H2(e,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=wg)}Q2(n,r);var o;n=null;for(l in i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var a=i[l];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(hp.hasOwnProperty(l)?s||(s=[]):(s=s||[]).push(l,null));for(l in r){var c=r[l];if(a=i!=null?i[l]:void 0,r.hasOwnProperty(l)&&c!==a&&(c!=null||a!=null))if(l==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(s||(s=[]),s.push(l,n)),n=c;else l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(s=s||[]).push(l,c)):l==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(l,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(hp.hasOwnProperty(l)?(c!=null&&l==="onScroll"&&De("scroll",e),s||a===c||(s=[])):(s=s||[]).push(l,c))}n&&(s=s||[]).push("style",n);var l=s;(t.updateQueue=l)&&(t.flags|=4)}};wR=function(e,t,n,r){n!==r&&(t.flags|=4)};function Jd(e,t){if(!Le)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Yn(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function uq(e,t,n){var r=t.pendingProps;switch(rE(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yn(t),null;case 1:return $r(t.type)&&_g(),Yn(t),null;case 3:return r=t.stateNode,Vf(),Oe(Nr),Oe(er),dE(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Rm(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Gi!==null&&(kS(Gi),Gi=null))),xS(e,t),Yn(t),null;case 5:fE(t);var i=ul(Ep.current);if(n=t.type,e!==null&&t.stateNode!=null)bR(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(W(166));return Yn(t),null}if(e=ul(Ps.current),Rm(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[As]=t,r[xp]=s,e=(t.mode&1)!==0,n){case"dialog":De("cancel",r),De("close",r);break;case"iframe":case"object":case"embed":De("load",r);break;case"video":case"audio":for(i=0;i<wh.length;i++)De(wh[i],r);break;case"source":De("error",r);break;case"img":case"image":case"link":De("error",r),De("load",r);break;case"details":De("toggle",r);break;case"input":sM(r,s),De("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},De("invalid",r);break;case"textarea":aM(r,s),De("invalid",r)}Q2(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Om(r.textContent,a,e),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Om(r.textContent,a,e),i=["children",""+a]):hp.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&De("scroll",r)}switch(n){case"input":Em(r),oM(r,s,!0);break;case"textarea":Em(r),cM(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=wg)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=GD(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[As]=t,e[xp]=r,vR(e,t,!1,!1),t.stateNode=e;t:{switch(o=K2(n,r),n){case"dialog":De("cancel",e),De("close",e),i=r;break;case"iframe":case"object":case"embed":De("load",e),i=r;break;case"video":case"audio":for(i=0;i<wh.length;i++)De(wh[i],e);i=r;break;case"source":De("error",e),i=r;break;case"img":case"image":case"link":De("error",e),De("load",e),i=r;break;case"details":De("toggle",e),i=r;break;case"input":sM(e,r),i=q2(e,r),De("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Xe({},r,{value:void 0}),De("invalid",e);break;case"textarea":aM(e,r),i=H2(e,r),De("invalid",e);break;default:i=r}Q2(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var c=a[s];s==="style"?QD(e,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&HD(e,c)):s==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&pp(e,c):typeof c=="number"&&pp(e,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(hp.hasOwnProperty(s)?c!=null&&s==="onScroll"&&De("scroll",e):c!=null&&jI(e,s,c,o))}switch(n){case"input":Em(e),oM(e,r,!1);break;case"textarea":Em(e),cM(e);break;case"option":r.value!=null&&e.setAttribute("value",""+ec(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?mf(e,!!r.multiple,s,!1):r.defaultValue!=null&&mf(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=wg)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break t;case"img":r=!0;break t;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Yn(t),null;case 6:if(e&&t.stateNode!=null)wR(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(W(166));if(n=ul(Ep.current),ul(Ps.current),Rm(t)){if(r=t.stateNode,n=t.memoizedProps,r[As]=t,(s=r.nodeValue!==n)&&(e=Qr,e!==null))switch(e.tag){case 3:Om(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Om(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[As]=t,t.stateNode=r}return Yn(t),null;case 13:if(Oe(ze),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Le&&qr!==null&&t.mode&1&&!(t.flags&128))BO(),zf(),t.flags|=98560,s=!1;else if(s=Rm(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(W(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(W(317));s[As]=t}else zf(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Yn(t),s=!1}else Gi!==null&&(kS(Gi),Gi=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||ze.current&1?bn===0&&(bn=3):IE())),t.updateQueue!==null&&(t.flags|=4),Yn(t),null);case 4:return Vf(),xS(e,t),e===null&&_p(t.stateNode.containerInfo),Yn(t),null;case 10:return aE(t.type._context),Yn(t),null;case 17:return $r(t.type)&&_g(),Yn(t),null;case 19:if(Oe(ze),s=t.memoizedState,s===null)return Yn(t),null;if(r=(t.flags&128)!==0,o=s.rendering,o===null)if(r)Jd(s,!1);else{if(bn!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Mg(e),o!==null){for(t.flags|=128,Jd(s,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return $e(ze,ze.current&1|2),t.child}e=e.sibling}s.tail!==null&&sn()>qf&&(t.flags|=128,r=!0,Jd(s,!1),t.lanes=4194304)}else{if(!r)if(e=Mg(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Jd(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Le)return Yn(t),null}else 2*sn()-s.renderingStartTime>qf&&n!==1073741824&&(t.flags|=128,r=!0,Jd(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(n=s.last,n!==null?n.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=sn(),t.sibling=null,n=ze.current,$e(ze,r?n&1|2:n&1),t):(Yn(t),null);case 22:case 23:return xE(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Vr&1073741824&&(Yn(t),t.subtreeFlags&6&&(t.flags|=8192)):Yn(t),null;case 24:return null;case 25:return null}throw Error(W(156,t.tag))}function fq(e,t){switch(rE(t),t.tag){case 1:return $r(t.type)&&_g(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Vf(),Oe(Nr),Oe(er),dE(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return fE(t),null;case 13:if(Oe(ze),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(W(340));zf()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Oe(ze),null;case 4:return Vf(),null;case 10:return aE(t.type._context),null;case 22:case 23:return xE(),null;case 24:return null;default:return null}}var Bm=!1,Xn=!1,dq=typeof WeakSet=="function"?WeakSet:Set,ot=null;function nf(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Je(e,t,r)}else n.current=null}function IS(e,t,n){try{n()}catch(r){Je(e,t,r)}}var KM=!1;function hq(e,t){if(aS=gg,e=IO(),eE(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else t:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break t}var o=0,a=-1,c=-1,l=0,u=0,f=e,d=null;e:for(;;){for(var h;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(c=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(h=f.firstChild)!==null;)d=f,f=h;for(;;){if(f===e)break e;if(d===n&&++l===i&&(a=o),d===s&&++u===r&&(c=o),(h=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=h}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(cS={focusedElem:e,selectionRange:n},gg=!1,ot=t;ot!==null;)if(t=ot,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ot=e;else for(;ot!==null;){t=ot;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,b=p.memoizedState,y=t.stateNode,m=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:ji(t.type,g),b);y.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var v=t.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(W(163))}}catch(w){Je(t,t.return,w)}if(e=t.sibling,e!==null){e.return=t.return,ot=e;break}ot=t.return}return p=KM,KM=!1,p}function Zh(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&IS(t,n,s)}i=i.next}while(i!==r)}}function mb(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ES(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function _R(e){var t=e.alternate;t!==null&&(e.alternate=null,_R(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[As],delete t[xp],delete t[fS],delete t[XY],delete t[QY])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function SR(e){return e.tag===5||e.tag===3||e.tag===4}function ZM(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||SR(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function TS(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=wg));else if(r!==4&&(e=e.child,e!==null))for(TS(e,t,n),e=e.sibling;e!==null;)TS(e,t,n),e=e.sibling}function AS(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(AS(e,t,n),e=e.sibling;e!==null;)AS(e,t,n),e=e.sibling}var Fn=null,Vi=!1;function ga(e,t,n){for(n=n.child;n!==null;)xR(e,t,n),n=n.sibling}function xR(e,t,n){if(Us&&typeof Us.onCommitFiberUnmount=="function")try{Us.onCommitFiberUnmount(cb,n)}catch{}switch(n.tag){case 5:Xn||nf(n,t);case 6:var r=Fn,i=Vi;Fn=null,ga(e,t,n),Fn=r,Vi=i,Fn!==null&&(Vi?(e=Fn,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Fn.removeChild(n.stateNode));break;case 18:Fn!==null&&(Vi?(e=Fn,n=n.stateNode,e.nodeType===8?c_(e.parentNode,n):e.nodeType===1&&c_(e,n),vp(e)):c_(Fn,n.stateNode));break;case 4:r=Fn,i=Vi,Fn=n.stateNode.containerInfo,Vi=!0,ga(e,t,n),Fn=r,Vi=i;break;case 0:case 11:case 14:case 15:if(!Xn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&IS(n,t,o),i=i.next}while(i!==r)}ga(e,t,n);break;case 1:if(!Xn&&(nf(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Je(n,t,a)}ga(e,t,n);break;case 21:ga(e,t,n);break;case 22:n.mode&1?(Xn=(r=Xn)||n.memoizedState!==null,ga(e,t,n),Xn=r):ga(e,t,n);break;default:ga(e,t,n)}}function JM(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new dq),t.forEach(function(r){var i=Sq.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Pi(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,o=t,a=o;t:for(;a!==null;){switch(a.tag){case 5:Fn=a.stateNode,Vi=!1;break t;case 3:Fn=a.stateNode.containerInfo,Vi=!0;break t;case 4:Fn=a.stateNode.containerInfo,Vi=!0;break t}a=a.return}if(Fn===null)throw Error(W(160));xR(s,o,i),Fn=null,Vi=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(l){Je(i,t,l)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)IR(t,e),t=t.sibling}function IR(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Pi(t,e),ys(e),r&4){try{Zh(3,e,e.return),mb(3,e)}catch(g){Je(e,e.return,g)}try{Zh(5,e,e.return)}catch(g){Je(e,e.return,g)}}break;case 1:Pi(t,e),ys(e),r&512&&n!==null&&nf(n,n.return);break;case 5:if(Pi(t,e),ys(e),r&512&&n!==null&&nf(n,n.return),e.flags&32){var i=e.stateNode;try{pp(i,"")}catch(g){Je(e,e.return,g)}}if(r&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,o=n!==null?n.memoizedProps:s,a=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&qD(i,s),K2(a,o);var l=K2(a,s);for(o=0;o<c.length;o+=2){var u=c[o],f=c[o+1];u==="style"?QD(i,f):u==="dangerouslySetInnerHTML"?HD(i,f):u==="children"?pp(i,f):jI(i,u,f,l)}switch(a){case"input":W2(i,s);break;case"textarea":WD(i,s);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?mf(i,!!s.multiple,h,!1):d!==!!s.multiple&&(s.defaultValue!=null?mf(i,!!s.multiple,s.defaultValue,!0):mf(i,!!s.multiple,s.multiple?[]:"",!1))}i[xp]=s}catch(g){Je(e,e.return,g)}}break;case 6:if(Pi(t,e),ys(e),r&4){if(e.stateNode===null)throw Error(W(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(g){Je(e,e.return,g)}}break;case 3:if(Pi(t,e),ys(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{vp(t.containerInfo)}catch(g){Je(e,e.return,g)}break;case 4:Pi(t,e),ys(e);break;case 13:Pi(t,e),ys(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(_E=sn())),r&4&&JM(e);break;case 22:if(u=n!==null&&n.memoizedState!==null,e.mode&1?(Xn=(l=Xn)||u,Pi(t,e),Xn=l):Pi(t,e),ys(e),r&8192){if(l=e.memoizedState!==null,(e.stateNode.isHidden=l)&&!u&&e.mode&1)for(ot=e,u=e.child;u!==null;){for(f=ot=u;ot!==null;){switch(d=ot,h=d.child,d.tag){case 0:case 11:case 14:case 15:Zh(4,d,d.return);break;case 1:nf(d,d.return);var p=d.stateNode;if(typeof p.componentWillUnmount=="function"){r=d,n=d.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(g){Je(r,n,g)}}break;case 5:nf(d,d.return);break;case 22:if(d.memoizedState!==null){eN(f);continue}}h!==null?(h.return=d,ot=h):eN(f)}u=u.sibling}t:for(u=null,f=e;;){if(f.tag===5){if(u===null){u=f;try{i=f.stateNode,l?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,c=f.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=XD("display",o))}catch(g){Je(e,e.return,g)}}}else if(f.tag===6){if(u===null)try{f.stateNode.nodeValue=l?"":f.memoizedProps}catch(g){Je(e,e.return,g)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break t;for(;f.sibling===null;){if(f.return===null||f.return===e)break t;u===f&&(u=null),f=f.return}u===f&&(u=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Pi(t,e),ys(e),r&4&&JM(e);break;case 21:break;default:Pi(t,e),ys(e)}}function ys(e){var t=e.flags;if(t&2){try{t:{for(var n=e.return;n!==null;){if(SR(n)){var r=n;break t}n=n.return}throw Error(W(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(pp(i,""),r.flags&=-33);var s=ZM(e);AS(e,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=ZM(e);TS(e,a,o);break;default:throw Error(W(161))}}catch(c){Je(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function pq(e,t,n){ot=e,ER(e)}function ER(e,t,n){for(var r=(e.mode&1)!==0;ot!==null;){var i=ot,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Bm;if(!o){var a=i.alternate,c=a!==null&&a.memoizedState!==null||Xn;a=Bm;var l=Xn;if(Bm=o,(Xn=c)&&!l)for(ot=i;ot!==null;)o=ot,c=o.child,o.tag===22&&o.memoizedState!==null?nN(i):c!==null?(c.return=o,ot=c):nN(i);for(;s!==null;)ot=s,ER(s),s=s.sibling;ot=i,Bm=a,Xn=l}tN(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,ot=s):tN(e)}}function tN(e){for(;ot!==null;){var t=ot;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Xn||mb(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Xn)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ji(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&BM(t,s,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}BM(t,o,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var l=t.alternate;if(l!==null){var u=l.memoizedState;if(u!==null){var f=u.dehydrated;f!==null&&vp(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(W(163))}Xn||t.flags&512&&ES(t)}catch(d){Je(t,t.return,d)}}if(t===e){ot=null;break}if(n=t.sibling,n!==null){n.return=t.return,ot=n;break}ot=t.return}}function eN(e){for(;ot!==null;){var t=ot;if(t===e){ot=null;break}var n=t.sibling;if(n!==null){n.return=t.return,ot=n;break}ot=t.return}}function nN(e){for(;ot!==null;){var t=ot;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{mb(4,t)}catch(c){Je(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(c){Je(t,i,c)}}var s=t.return;try{ES(t)}catch(c){Je(t,s,c)}break;case 5:var o=t.return;try{ES(t)}catch(c){Je(t,o,c)}}}catch(c){Je(t,t.return,c)}if(t===e){ot=null;break}var a=t.sibling;if(a!==null){a.return=t.return,ot=a;break}ot=t.return}}var yq=Math.ceil,kg=na.ReactCurrentDispatcher,bE=na.ReactCurrentOwner,Ni=na.ReactCurrentBatchConfig,ee=0,$n=null,dn=null,Pn=0,Vr=0,rf=xc(0),bn=0,Np=null,Dl=0,gb=0,wE=0,Jh=null,Ir=null,_E=0,qf=1/0,vo=null,Dg=!1,MS=null,Wa=null,Cm=!1,Ca=null,Og=0,tp=0,NS=null,D0=-1,O0=0;function hr(){return ee&6?sn():D0!==-1?D0:D0=sn()}function Ga(e){return e.mode&1?ee&2&&Pn!==0?Pn&-Pn:ZY.transition!==null?(O0===0&&(O0=cO()),O0):(e=be,e!==0||(e=window.event,e=e===void 0?16:yO(e.type)),e):1}function Ji(e,t,n,r){if(50<tp)throw tp=0,NS=null,Error(W(185));wy(e,n,r),(!(ee&2)||e!==$n)&&(e===$n&&(!(ee&2)&&(gb|=n),bn===4&&Da(e,Pn)),kr(e,r),n===1&&ee===0&&!(t.mode&1)&&(qf=sn()+500,hb&&Ic()))}function kr(e,t){var n=e.callbackNode;ZV(e,t);var r=mg(e,e===$n?Pn:0);if(r===0)n!==null&&fM(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&fM(n),t===1)e.tag===0?KY(rN.bind(null,e)):RO(rN.bind(null,e)),GY(function(){!(ee&6)&&Ic()}),n=null;else{switch(lO(r)){case 1:n=GI;break;case 4:n=oO;break;case 16:n=yg;break;case 536870912:n=aO;break;default:n=yg}n=OR(n,TR.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function TR(e,t){if(D0=-1,O0=0,ee&6)throw Error(W(327));var n=e.callbackNode;if(_f()&&e.callbackNode!==n)return null;var r=mg(e,e===$n?Pn:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Rg(e,r);else{t=r;var i=ee;ee|=2;var s=MR();($n!==e||Pn!==t)&&(vo=null,qf=sn()+500,wl(e,t));do try{vq();break}catch(a){AR(e,a)}while(!0);oE(),kg.current=s,ee=i,dn!==null?t=0:($n=null,Pn=0,t=bn)}if(t!==0){if(t===2&&(i=nS(e),i!==0&&(r=i,t=$S(e,i))),t===1)throw n=Np,wl(e,0),Da(e,r),kr(e,sn()),n;if(t===6)Da(e,r);else{if(i=e.current.alternate,!(r&30)&&!mq(i)&&(t=Rg(e,r),t===2&&(s=nS(e),s!==0&&(r=s,t=$S(e,s))),t===1))throw n=Np,wl(e,0),Da(e,r),kr(e,sn()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(W(345));case 2:Wc(e,Ir,vo);break;case 3:if(Da(e,r),(r&130023424)===r&&(t=_E+500-sn(),10<t)){if(mg(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){hr(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=uS(Wc.bind(null,e,Ir,vo),t);break}Wc(e,Ir,vo);break;case 4:if(Da(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-Zi(r);s=1<<o,o=t[o],o>i&&(i=o),r&=~s}if(r=i,r=sn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*yq(r/1960))-r,10<r){e.timeoutHandle=uS(Wc.bind(null,e,Ir,vo),r);break}Wc(e,Ir,vo);break;case 5:Wc(e,Ir,vo);break;default:throw Error(W(329))}}}return kr(e,sn()),e.callbackNode===n?TR.bind(null,e):null}function $S(e,t){var n=Jh;return e.current.memoizedState.isDehydrated&&(wl(e,t).flags|=256),e=Rg(e,t),e!==2&&(t=Ir,Ir=n,t!==null&&kS(t)),e}function kS(e){Ir===null?Ir=e:Ir.push.apply(Ir,e)}function mq(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!es(s(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Da(e,t){for(t&=~wE,t&=~gb,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Zi(t),r=1<<n;e[n]=-1,t&=~r}}function rN(e){if(ee&6)throw Error(W(327));_f();var t=mg(e,0);if(!(t&1))return kr(e,sn()),null;var n=Rg(e,t);if(e.tag!==0&&n===2){var r=nS(e);r!==0&&(t=r,n=$S(e,r))}if(n===1)throw n=Np,wl(e,0),Da(e,t),kr(e,sn()),n;if(n===6)throw Error(W(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Wc(e,Ir,vo),kr(e,sn()),null}function SE(e,t){var n=ee;ee|=1;try{return e(t)}finally{ee=n,ee===0&&(qf=sn()+500,hb&&Ic())}}function Ol(e){Ca!==null&&Ca.tag===0&&!(ee&6)&&_f();var t=ee;ee|=1;var n=Ni.transition,r=be;try{if(Ni.transition=null,be=1,e)return e()}finally{be=r,Ni.transition=n,ee=t,!(ee&6)&&Ic()}}function xE(){Vr=rf.current,Oe(rf)}function wl(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,WY(n)),dn!==null)for(n=dn.return;n!==null;){var r=n;switch(rE(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&_g();break;case 3:Vf(),Oe(Nr),Oe(er),dE();break;case 5:fE(r);break;case 4:Vf();break;case 13:Oe(ze);break;case 19:Oe(ze);break;case 10:aE(r.type._context);break;case 22:case 23:xE()}n=n.return}if($n=e,dn=e=Ha(e.current,null),Pn=Vr=t,bn=0,Np=null,wE=gb=Dl=0,Ir=Jh=null,ll!==null){for(t=0;t<ll.length;t++)if(n=ll[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}ll=null}return e}function AR(e,t){do{var n=dn;try{if(oE(),N0.current=$g,Ng){for(var r=Ge.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Ng=!1}if(kl=0,Tn=mn=Ge=null,Kh=!1,Tp=0,bE.current=null,n===null||n.return===null){bn=1,Np=t,dn=null;break}t:{var s=e,o=n.return,a=n,c=t;if(t=Pn,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var l=c,u=a,f=u.tag;if(!(u.mode&1)&&(f===0||f===11||f===15)){var d=u.alternate;d?(u.updateQueue=d.updateQueue,u.memoizedState=d.memoizedState,u.lanes=d.lanes):(u.updateQueue=null,u.memoizedState=null)}var h=YM(o);if(h!==null){h.flags&=-257,qM(h,o,a,s,t),h.mode&1&&VM(s,l,t),t=h,c=l;var p=t.updateQueue;if(p===null){var g=new Set;g.add(c),t.updateQueue=g}else p.add(c);break t}else{if(!(t&1)){VM(s,l,t),IE();break t}c=Error(W(426))}}else if(Le&&a.mode&1){var b=YM(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),qM(b,o,a,s,t),iE(Yf(c,a));break t}}s=c=Yf(c,a),bn!==4&&(bn=2),Jh===null?Jh=[s]:Jh.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var y=uR(s,c,t);LM(s,y);break t;case 1:a=c;var m=s.type,v=s.stateNode;if(!(s.flags&128)&&(typeof m.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Wa===null||!Wa.has(v)))){s.flags|=65536,t&=-t,s.lanes|=t;var w=fR(s,a,t);LM(s,w);break t}}s=s.return}while(s!==null)}$R(n)}catch(_){t=_,dn===n&&n!==null&&(dn=n=n.return);continue}break}while(!0)}function MR(){var e=kg.current;return kg.current=$g,e===null?$g:e}function IE(){(bn===0||bn===3||bn===2)&&(bn=4),$n===null||!(Dl&268435455)&&!(gb&268435455)||Da($n,Pn)}function Rg(e,t){var n=ee;ee|=2;var r=MR();($n!==e||Pn!==t)&&(vo=null,wl(e,t));do try{gq();break}catch(i){AR(e,i)}while(!0);if(oE(),ee=n,kg.current=r,dn!==null)throw Error(W(261));return $n=null,Pn=0,bn}function gq(){for(;dn!==null;)NR(dn)}function vq(){for(;dn!==null&&!VV();)NR(dn)}function NR(e){var t=DR(e.alternate,e,Vr);e.memoizedProps=e.pendingProps,t===null?$R(e):dn=t,bE.current=null}function $R(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=fq(n,t),n!==null){n.flags&=32767,dn=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{bn=6,dn=null;return}}else if(n=uq(n,t,Vr),n!==null){dn=n;return}if(t=t.sibling,t!==null){dn=t;return}dn=t=e}while(t!==null);bn===0&&(bn=5)}function Wc(e,t,n){var r=be,i=Ni.transition;try{Ni.transition=null,be=1,bq(e,t,n,r)}finally{Ni.transition=i,be=r}return null}function bq(e,t,n,r){do _f();while(Ca!==null);if(ee&6)throw Error(W(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(W(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(JV(e,s),e===$n&&(dn=$n=null,Pn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Cm||(Cm=!0,OR(yg,function(){return _f(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Ni.transition,Ni.transition=null;var o=be;be=1;var a=ee;ee|=4,bE.current=null,hq(e,n),IR(n,e),UY(cS),gg=!!aS,cS=aS=null,e.current=n,pq(n),YV(),ee=a,be=o,Ni.transition=s}else e.current=n;if(Cm&&(Cm=!1,Ca=e,Og=i),s=e.pendingLanes,s===0&&(Wa=null),GV(n.stateNode),kr(e,sn()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Dg)throw Dg=!1,e=MS,MS=null,e;return Og&1&&e.tag!==0&&_f(),s=e.pendingLanes,s&1?e===NS?tp++:(tp=0,NS=e):tp=0,Ic(),null}function _f(){if(Ca!==null){var e=lO(Og),t=Ni.transition,n=be;try{if(Ni.transition=null,be=16>e?16:e,Ca===null)var r=!1;else{if(e=Ca,Ca=null,Og=0,ee&6)throw Error(W(331));var i=ee;for(ee|=4,ot=e.current;ot!==null;){var s=ot,o=s.child;if(ot.flags&16){var a=s.deletions;if(a!==null){for(var c=0;c<a.length;c++){var l=a[c];for(ot=l;ot!==null;){var u=ot;switch(u.tag){case 0:case 11:case 15:Zh(8,u,s)}var f=u.child;if(f!==null)f.return=u,ot=f;else for(;ot!==null;){u=ot;var d=u.sibling,h=u.return;if(_R(u),u===l){ot=null;break}if(d!==null){d.return=h,ot=d;break}ot=h}}}var p=s.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var b=g.sibling;g.sibling=null,g=b}while(g!==null)}}ot=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,ot=o;else t:for(;ot!==null;){if(s=ot,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Zh(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,ot=y;break t}ot=s.return}}var m=e.current;for(ot=m;ot!==null;){o=ot;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,ot=v;else t:for(o=m;ot!==null;){if(a=ot,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:mb(9,a)}}catch(_){Je(a,a.return,_)}if(a===o){ot=null;break t}var w=a.sibling;if(w!==null){w.return=a.return,ot=w;break t}ot=a.return}}if(ee=i,Ic(),Us&&typeof Us.onPostCommitFiberRoot=="function")try{Us.onPostCommitFiberRoot(cb,e)}catch{}r=!0}return r}finally{be=n,Ni.transition=t}}return!1}function iN(e,t,n){t=Yf(n,t),t=uR(e,t,1),e=qa(e,t,1),t=hr(),e!==null&&(wy(e,1,t),kr(e,t))}function Je(e,t,n){if(e.tag===3)iN(e,e,n);else for(;t!==null;){if(t.tag===3){iN(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Wa===null||!Wa.has(r))){e=Yf(n,e),e=fR(t,e,1),t=qa(t,e,1),e=hr(),t!==null&&(wy(t,1,e),kr(t,e));break}}t=t.return}}function wq(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=hr(),e.pingedLanes|=e.suspendedLanes&n,$n===e&&(Pn&n)===n&&(bn===4||bn===3&&(Pn&130023424)===Pn&&500>sn()-_E?wl(e,0):wE|=n),kr(e,t)}function kR(e,t){t===0&&(e.mode&1?(t=Mm,Mm<<=1,!(Mm&130023424)&&(Mm=4194304)):t=1);var n=hr();e=Ho(e,t),e!==null&&(wy(e,t,n),kr(e,n))}function _q(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),kR(e,n)}function Sq(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(W(314))}r!==null&&r.delete(t),kR(e,n)}var DR;DR=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Nr.current)Ar=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Ar=!1,lq(e,t,n);Ar=!!(e.flags&131072)}else Ar=!1,Le&&t.flags&1048576&&FO(t,Ig,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;k0(e,t),e=t.pendingProps;var i=Pf(t,er.current);wf(t,n),i=pE(null,t,r,e,i,n);var s=yE();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,$r(r)?(s=!0,Sg(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,lE(t),i.updater=pb,t.stateNode=i,i._reactInternals=t,gS(t,r,e,n),t=wS(null,t,r,!0,s,n)):(t.tag=0,Le&&s&&nE(t),ir(null,t,i,n),t=t.child),t;case 16:r=t.elementType;t:{switch(k0(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=Iq(r),e=ji(r,e),i){case 0:t=bS(null,t,r,e,n);break t;case 1:t=HM(null,t,r,e,n);break t;case 11:t=WM(null,t,r,e,n);break t;case 14:t=GM(null,t,r,ji(r.type,e),n);break t}throw Error(W(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ji(r,i),bS(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ji(r,i),HM(e,t,r,i,n);case 3:t:{if(yR(t),e===null)throw Error(W(387));r=t.pendingProps,s=t.memoizedState,i=s.element,UO(e,t),Ag(t,r,null,n);var o=t.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=Yf(Error(W(423)),t),t=XM(e,t,r,n,i);break t}else if(r!==i){i=Yf(Error(W(424)),t),t=XM(e,t,r,n,i);break t}else for(qr=Ya(t.stateNode.containerInfo.firstChild),Qr=t,Le=!0,Gi=null,n=VO(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(zf(),r===i){t=Xo(e,t,n);break t}ir(e,t,r,n)}t=t.child}return t;case 5:return YO(t),e===null&&pS(t),r=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,o=i.children,lS(r,i)?o=null:s!==null&&lS(r,s)&&(t.flags|=32),pR(e,t),ir(e,t,o,n),t.child;case 6:return e===null&&pS(t),null;case 13:return mR(e,t,n);case 4:return uE(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=jf(t,null,r,n):ir(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ji(r,i),WM(e,t,r,i,n);case 7:return ir(e,t,t.pendingProps,n),t.child;case 8:return ir(e,t,t.pendingProps.children,n),t.child;case 12:return ir(e,t,t.pendingProps.children,n),t.child;case 10:t:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value,$e(Eg,r._currentValue),r._currentValue=o,s!==null)if(es(s.value,o)){if(s.children===i.children&&!Nr.current){t=Xo(e,t,n);break t}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(s.tag===1){c=Co(-1,n&-n),c.tag=2;var l=s.updateQueue;if(l!==null){l=l.shared;var u=l.pending;u===null?c.next=c:(c.next=u.next,u.next=c),l.pending=c}}s.lanes|=n,c=s.alternate,c!==null&&(c.lanes|=n),yS(s.return,n,t),a.lanes|=n;break}c=c.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(W(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),yS(o,n,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}ir(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,wf(t,n),i=ki(i),r=r(i),t.flags|=1,ir(e,t,r,n),t.child;case 14:return r=t.type,i=ji(r,t.pendingProps),i=ji(r.type,i),GM(e,t,r,i,n);case 15:return dR(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ji(r,i),k0(e,t),t.tag=1,$r(r)?(e=!0,Sg(t)):e=!1,wf(t,n),zO(t,r,i),gS(t,r,i,n),wS(null,t,r,!0,e,n);case 19:return gR(e,t,n);case 22:return hR(e,t,n)}throw Error(W(156,t.tag))};function OR(e,t){return sO(e,t)}function xq(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Si(e,t,n,r){return new xq(e,t,n,r)}function EE(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Iq(e){if(typeof e=="function")return EE(e)?1:0;if(e!=null){if(e=e.$$typeof,e===YI)return 11;if(e===qI)return 14}return 2}function Ha(e,t){var n=e.alternate;return n===null?(n=Si(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function R0(e,t,n,r,i,s){var o=2;if(r=e,typeof e=="function")EE(e)&&(o=1);else if(typeof e=="string")o=5;else t:switch(e){case Gu:return _l(n.children,i,s,t);case VI:o=8,i|=8;break;case z2:return e=Si(12,n,t,i|2),e.elementType=z2,e.lanes=s,e;case j2:return e=Si(13,n,t,i),e.elementType=j2,e.lanes=s,e;case V2:return e=Si(19,n,t,i),e.elementType=V2,e.lanes=s,e;case jD:return vb(n,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case PD:o=10;break t;case zD:o=9;break t;case YI:o=11;break t;case qI:o=14;break t;case Ia:o=16,r=null;break t}throw Error(W(130,e==null?e:typeof e,""))}return t=Si(o,n,t,i),t.elementType=e,t.type=r,t.lanes=s,t}function _l(e,t,n,r){return e=Si(7,e,r,t),e.lanes=n,e}function vb(e,t,n,r){return e=Si(22,e,r,t),e.elementType=jD,e.lanes=n,e.stateNode={isHidden:!1},e}function m_(e,t,n){return e=Si(6,e,null,t),e.lanes=n,e}function g_(e,t,n){return t=Si(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Eq(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Kw(0),this.expirationTimes=Kw(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Kw(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function TE(e,t,n,r,i,s,o,a,c){return e=new Eq(e,t,n,a,c),t===1?(t=1,s===!0&&(t|=8)):t=0,s=Si(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},lE(s),e}function Tq(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Wu,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function RR(e){if(!e)return nc;e=e._reactInternals;t:{if(Jl(e)!==e||e.tag!==1)throw Error(W(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break t;case 1:if($r(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break t}}t=t.return}while(t!==null);throw Error(W(171))}if(e.tag===1){var n=e.type;if($r(n))return OO(e,n,t)}return t}function FR(e,t,n,r,i,s,o,a,c){return e=TE(n,r,!0,e,i,s,o,a,c),e.context=RR(null),n=e.current,r=hr(),i=Ga(n),s=Co(r,i),s.callback=t??null,qa(n,s,i),e.current.lanes=i,wy(e,i,r),kr(e,r),e}function bb(e,t,n,r){var i=t.current,s=hr(),o=Ga(i);return n=RR(n),t.context===null?t.context=n:t.pendingContext=n,t=Co(s,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=qa(i,t,o),e!==null&&(Ji(e,i,o,s),M0(e,i,o)),o}function Fg(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function sN(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function AE(e,t){sN(e,t),(e=e.alternate)&&sN(e,t)}function Aq(){return null}var LR=typeof reportError=="function"?reportError:function(e){console.error(e)};function ME(e){this._internalRoot=e}wb.prototype.render=ME.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(W(409));bb(e,t,null,null)};wb.prototype.unmount=ME.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ol(function(){bb(null,e,null,null)}),t[Go]=null}};function wb(e){this._internalRoot=e}wb.prototype.unstable_scheduleHydration=function(e){if(e){var t=dO();e={blockedOn:null,target:e,priority:t};for(var n=0;n<ka.length&&t!==0&&t<ka[n].priority;n++);ka.splice(n,0,e),n===0&&pO(e)}};function NE(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function _b(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function oN(){}function Mq(e,t,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var l=Fg(o);s.call(l)}}var o=FR(t,r,e,0,null,!1,!1,"",oN);return e._reactRootContainer=o,e[Go]=o.current,_p(e.nodeType===8?e.parentNode:e),Ol(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var l=Fg(c);a.call(l)}}var c=TE(e,0,!1,null,null,!1,!1,"",oN);return e._reactRootContainer=c,e[Go]=c.current,_p(e.nodeType===8?e.parentNode:e),Ol(function(){bb(t,c,n,r)}),c}function Sb(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var c=Fg(o);a.call(c)}}bb(t,o,e,i)}else o=Mq(n,t,e,i,r);return Fg(o)}uO=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=bh(t.pendingLanes);n!==0&&(HI(t,n|1),kr(t,sn()),!(ee&6)&&(qf=sn()+500,Ic()))}break;case 13:Ol(function(){var r=Ho(e,1);if(r!==null){var i=hr();Ji(r,e,1,i)}}),AE(e,1)}};XI=function(e){if(e.tag===13){var t=Ho(e,134217728);if(t!==null){var n=hr();Ji(t,e,134217728,n)}AE(e,134217728)}};fO=function(e){if(e.tag===13){var t=Ga(e),n=Ho(e,t);if(n!==null){var r=hr();Ji(n,e,t,r)}AE(e,t)}};dO=function(){return be};hO=function(e,t){var n=be;try{return be=e,t()}finally{be=n}};J2=function(e,t,n){switch(t){case"input":if(W2(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=db(r);if(!i)throw Error(W(90));YD(r),W2(r,i)}}}break;case"textarea":WD(e,n);break;case"select":t=n.value,t!=null&&mf(e,!!n.multiple,t,!1)}};JD=SE;tO=Ol;var Nq={usingClientEntryPoint:!1,Events:[Sy,Ku,db,KD,ZD,SE]},th={findFiberByHostInstance:cl,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},$q={bundleType:th.bundleType,version:th.version,rendererPackageName:th.rendererPackageName,rendererConfig:th.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:na.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=rO(e),e===null?null:e.stateNode},findFiberByHostInstance:th.findFiberByHostInstance||Aq,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Um=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Um.isDisabled&&Um.supportsFiber)try{cb=Um.inject($q),Us=Um}catch{}}ii.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Nq;ii.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!NE(t))throw Error(W(200));return Tq(e,t,null,n)};ii.createRoot=function(e,t){if(!NE(e))throw Error(W(299));var n=!1,r="",i=LR;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=TE(e,1,!1,null,null,n,!1,r,i),e[Go]=t.current,_p(e.nodeType===8?e.parentNode:e),new ME(t)};ii.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(W(188)):(e=Object.keys(e).join(","),Error(W(268,e)));return e=rO(t),e=e===null?null:e.stateNode,e};ii.flushSync=function(e){return Ol(e)};ii.hydrate=function(e,t,n){if(!_b(t))throw Error(W(200));return Sb(null,e,t,!0,n)};ii.hydrateRoot=function(e,t,n){if(!NE(e))throw Error(W(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=LR;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=FR(t,null,e,1,n??null,i,!1,s,o),e[Go]=t.current,_p(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new wb(t)};ii.render=function(e,t,n){if(!_b(t))throw Error(W(200));return Sb(null,e,t,!1,n)};ii.unmountComponentAtNode=function(e){if(!_b(e))throw Error(W(40));return e._reactRootContainer?(Ol(function(){Sb(null,null,e,!1,function(){e._reactRootContainer=null,e[Go]=null})}),!0):!1};ii.unstable_batchedUpdates=SE;ii.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!_b(n))throw Error(W(200));if(e==null||e._reactInternals===void 0)throw Error(W(38));return Sb(e,t,n,!1,r)};ii.version="18.2.0-next-9e3b772b8-20220608";function BR(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(BR)}catch(e){console.error(e)}}BR(),FD.exports=ii;var kq=FD.exports,aN=kq;U2.createRoot=aN.createRoot,U2.hydrateRoot=aN.hydrateRoot;function H(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(f){o(f)}}function c(u){try{l(r.throw(u))}catch(f){o(f)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(e,t||[])).next())})}function cN(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function J(e){return this instanceof J?(this.v=e,this):new J(e)}function hn(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(h){return function(p){return Promise.resolve(p).then(h,f)}}function a(h,p){r[h]&&(i[h]=function(g){return new Promise(function(b,y){s.push([h,g,b,y])>1||c(h,g)})},p&&(i[h]=p(i[h])))}function c(h,p){try{l(r[h](p))}catch(g){d(s[0][3],g)}}function l(h){h.value instanceof J?Promise.resolve(h.value.v).then(u,f):d(s[0][2],h)}function u(h){c("next",h)}function f(h){c("throw",h)}function d(h,p){h(p),s.shift(),s.length&&c(s[0][0],s[0][1])}}function Xa(e){var t,n;return t={},r("next"),r("throw",function(i){throw i}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(i,s){t[i]=e[i]?function(o){return(n=!n)?{value:J(e[i](o)),done:!1}:s?s(o):o}:s}}function Kr(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof cN=="function"?cN(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=e[s]&&function(o){return new Promise(function(a,c){o=e[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}}const Dq=new TextDecoder("utf-8"),DS=e=>Dq.decode(e),Oq=new TextEncoder,$E=e=>Oq.encode(e),[_2t,Rq]=(()=>{const e=()=>{throw new Error("BigInt is not available in this environment")};function t(){throw e()}return t.asIntN=()=>{throw e()},t.asUintN=()=>{throw e()},typeof BigInt<"u"?[BigInt,!0]:[t,!1]})(),[Iy,S2t]=(()=>{const e=()=>{throw new Error("BigInt64Array is not available in this environment")};class t{static get BYTES_PER_ELEMENT(){return 8}static of(){throw e()}static from(){throw e()}constructor(){throw e()}}return typeof BigInt64Array<"u"?[BigInt64Array,!0]:[t,!1]})(),[Ey,x2t]=(()=>{const e=()=>{throw new Error("BigUint64Array is not available in this environment")};class t{static get BYTES_PER_ELEMENT(){return 8}static of(){throw e()}static from(){throw e()}constructor(){throw e()}}return typeof BigUint64Array<"u"?[BigUint64Array,!0]:[t,!1]})(),Fq=e=>typeof e=="number",Lq=e=>typeof e=="boolean",sr=e=>typeof e=="function",ns=e=>e!=null&&Object(e)===e,$p=e=>ns(e)&&sr(e.then),xb=e=>ns(e)&&sr(e[Symbol.iterator]),kE=e=>ns(e)&&sr(e[Symbol.asyncIterator]),OS=e=>ns(e)&&ns(e.schema),CR=e=>ns(e)&&"done"in e&&"value"in e,UR=e=>ns(e)&&sr(e.stat)&&Fq(e.fd),PR=e=>ns(e)&&DE(e.body),zR=e=>"_getDOMStream"in e&&"_getNodeStream"in e,DE=e=>ns(e)&&sr(e.cancel)&&sr(e.getReader)&&!zR(e),jR=e=>ns(e)&&sr(e.read)&&sr(e.pipe)&&Lq(e.readable)&&!zR(e),Bq=e=>ns(e)&&sr(e.clear)&&sr(e.bytes)&&sr(e.position)&&sr(e.setPosition)&&sr(e.capacity)&&sr(e.getBufferIdentifier)&&sr(e.createLong),OE=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function Cq(e){const t=e[0]?[e[0]]:[];let n,r,i,s;for(let o,a,c=0,l=0,u=e.length;++c<u;){if(o=t[l],a=e[c],!o||!a||o.buffer!==a.buffer||a.byteOffset<o.byteOffset){a&&(t[++l]=a);continue}if({byteOffset:n,byteLength:i}=o,{byteOffset:r,byteLength:s}=a,n+i<r||r+s<n){a&&(t[++l]=a);continue}t[l]=new Uint8Array(o.buffer,n,r-n+s)}return t}function lN(e,t,n=0,r=t.byteLength){const i=e.byteLength,s=new Uint8Array(e.buffer,e.byteOffset,i),o=new Uint8Array(t.buffer,t.byteOffset,Math.min(r,i));return s.set(o,n),e}function qs(e,t){const n=Cq(e),r=n.reduce((u,f)=>u+f.byteLength,0);let i,s,o,a=0,c=-1;const l=Math.min(t||Number.POSITIVE_INFINITY,r);for(const u=n.length;++c<u;){if(i=n[c],s=i.subarray(0,Math.min(i.length,l-a)),l<=a+s.length){s.length<i.length?n[c]=i.subarray(s.length):s.length===i.length&&c++,o?lN(o,s,a):o=s;break}lN(o||(o=new Uint8Array(l)),s,a),a+=s.length}return[o||new Uint8Array(0),n.slice(c),r-(o?o.byteLength:0)]}function Se(e,t){let n=CR(t)?t.value:t;return n instanceof e?e===Uint8Array?new e(n.buffer,n.byteOffset,n.byteLength):n:n?(typeof n=="string"&&(n=$E(n)),n instanceof ArrayBuffer?new e(n):n instanceof OE?new e(n):Bq(n)?Se(e,n.bytes()):ArrayBuffer.isView(n)?n.byteLength<=0?new e(0):new e(n.buffer,n.byteOffset,n.byteLength/e.BYTES_PER_ELEMENT):e.from(n)):new e(0)}const eh=e=>Se(Int32Array,e),fe=e=>Se(Uint8Array,e),RS=e=>(e.next(),e);function*Uq(e,t){const n=function*(i){yield i},r=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof OE?n(t):xb(t)?t:n(t);return yield*RS(function*(i){let s=null;do s=i.next(yield Se(e,s));while(!s.done)}(r[Symbol.iterator]())),new e}const Pq=e=>Uq(Uint8Array,e);function VR(e,t){return hn(this,arguments,function*(){if($p(t))return yield J(yield J(yield*Xa(Kr(VR(e,yield J(t))))));const r=function(o){return hn(this,arguments,function*(){yield yield J(yield J(o))})},i=function(o){return hn(this,arguments,function*(){yield J(yield*Xa(Kr(RS(function*(a){let c=null;do c=a.next(yield c==null?void 0:c.value);while(!c.done)}(o[Symbol.iterator]())))))})},s=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof OE?r(t):xb(t)?i(t):kE(t)?t:r(t);return yield J(yield*Xa(Kr(RS(function(o){return hn(this,arguments,function*(){let a=null;do a=yield J(o.next(yield yield J(Se(e,a))));while(!a.done)})}(s[Symbol.asyncIterator]()))))),yield J(new e)})}const zq=e=>VR(Uint8Array,e);function jq(e,t){let n=0;const r=e.length;if(r!==t.length)return!1;if(r>0)do if(e[n]!==t[n])return!1;while(++n<r);return!0}const yi={fromIterable(e){return Pm(Vq(e))},fromAsyncIterable(e){return Pm(Yq(e))},fromDOMStream(e){return Pm(qq(e))},fromNodeStream(e){return Pm(Gq(e))},toDOMStream(e,t){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(e,t){throw new Error('"toNodeStream" not available in this environment')}},Pm=e=>(e.next(),e);function*Vq(e){let t,n=!1,r=[],i,s,o,a=0;function c(){return s==="peek"?qs(r,o)[0]:([i,r,a]=qs(r,o),i)}({cmd:s,size:o}=yield null);const l=Pq(e)[Symbol.iterator]();try{do if({done:t,value:i}=Number.isNaN(o-a)?l.next():l.next(o-a),!t&&i.byteLength>0&&(r.push(i),a+=i.byteLength),t||o<=a)do({cmd:s,size:o}=yield c());while(o<a);while(!t)}catch(u){(n=!0)&&typeof l.throw=="function"&&l.throw(u)}finally{n===!1&&typeof l.return=="function"&&l.return(null)}return null}function Yq(e){return hn(this,arguments,function*(){let n,r=!1,i=[],s,o,a,c=0;function l(){return o==="peek"?qs(i,a)[0]:([s,i,c]=qs(i,a),s)}({cmd:o,size:a}=yield yield J(null));const u=zq(e)[Symbol.asyncIterator]();try{do if({done:n,value:s}=Number.isNaN(a-c)?yield J(u.next()):yield J(u.next(a-c)),!n&&s.byteLength>0&&(i.push(s),c+=s.byteLength),n||a<=c)do({cmd:o,size:a}=yield yield J(l()));while(a<c);while(!n)}catch(f){(r=!0)&&typeof u.throw=="function"&&(yield J(u.throw(f)))}finally{r===!1&&typeof u.return=="function"&&(yield J(u.return(new Uint8Array(0))))}return yield J(null)})}function qq(e){return hn(this,arguments,function*(){let n=!1,r=!1,i=[],s,o,a,c=0;function l(){return o==="peek"?qs(i,a)[0]:([s,i,c]=qs(i,a),s)}({cmd:o,size:a}=yield yield J(null));const u=new Wq(e);try{do if({done:n,value:s}=Number.isNaN(a-c)?yield J(u.read()):yield J(u.read(a-c)),!n&&s.byteLength>0&&(i.push(fe(s)),c+=s.byteLength),n||a<=c)do({cmd:o,size:a}=yield yield J(l()));while(a<c);while(!n)}catch(f){(r=!0)&&(yield J(u.cancel(f)))}finally{r===!1?yield J(u.cancel()):e.locked&&u.releaseLock()}return yield J(null)})}let Wq=class{constructor(t){this.source=t,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(t){return H(this,void 0,void 0,function*(){const{reader:n,source:r}=this;n&&(yield n.cancel(t).catch(()=>{})),r&&r.locked&&this.releaseLock()})}read(t){return H(this,void 0,void 0,function*(){if(t===0)return{done:this.reader==null,value:new Uint8Array(0)};const n=yield this.reader.read();return!n.done&&(n.value=fe(n)),n})}};const v_=(e,t)=>{const n=i=>r([t,i]);let r;return[t,n,new Promise(i=>(r=i)&&e.once(t,n))]};function Gq(e){return hn(this,arguments,function*(){const n=[];let r="error",i=!1,s=null,o,a,c=0,l=[],u;function f(){return o==="peek"?qs(l,a)[0]:([u,l,c]=qs(l,a),u)}if({cmd:o,size:a}=yield yield J(null),e.isTTY)return yield yield J(new Uint8Array(0)),yield J(null);try{n[0]=v_(e,"end"),n[1]=v_(e,"error");do{if(n[2]=v_(e,"readable"),[r,s]=yield J(Promise.race(n.map(h=>h[2]))),r==="error")break;if((i=r==="end")||(Number.isFinite(a-c)?(u=fe(e.read(a-c)),u.byteLength<a-c&&(u=fe(e.read()))):u=fe(e.read()),u.byteLength>0&&(l.push(u),c+=u.byteLength)),i||a<=c)do({cmd:o,size:a}=yield yield J(f()));while(a<c)}while(!i)}finally{yield J(d(n,r==="error"?s:null))}return yield J(null);function d(h,p){return u=l=null,new Promise((g,b)=>{for(const[y,m]of h)e.off(y,m);try{const y=e.destroy;y&&y.call(e,p),p=void 0}catch(y){p=y||p}finally{p!=null?b(p):g()}})}})}var _i;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(_i||(_i={}));var rs;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(rs||(rs={}));var Dr;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(Dr||(Dr={}));var Qo;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(Qo||(Qo={}));var ae;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(ae||(ae={}));var rc;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(rc||(rc={}));var _e;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(_e||(_e={}));var U;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.Float=3]="Float",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct=13]="Struct",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Dictionary=-1]="Dictionary",e[e.Int8=-2]="Int8",e[e.Int16=-3]="Int16",e[e.Int32=-4]="Int32",e[e.Int64=-5]="Int64",e[e.Uint8=-6]="Uint8",e[e.Uint16=-7]="Uint16",e[e.Uint32=-8]="Uint32",e[e.Uint64=-9]="Uint64",e[e.Float16=-10]="Float16",e[e.Float32=-11]="Float32",e[e.Float64=-12]="Float64",e[e.DateDay=-13]="DateDay",e[e.DateMillisecond=-14]="DateMillisecond",e[e.TimestampSecond=-15]="TimestampSecond",e[e.TimestampMillisecond=-16]="TimestampMillisecond",e[e.TimestampMicrosecond=-17]="TimestampMicrosecond",e[e.TimestampNanosecond=-18]="TimestampNanosecond",e[e.TimeSecond=-19]="TimeSecond",e[e.TimeMillisecond=-20]="TimeMillisecond",e[e.TimeMicrosecond=-21]="TimeMicrosecond",e[e.TimeNanosecond=-22]="TimeNanosecond",e[e.DenseUnion=-23]="DenseUnion",e[e.SparseUnion=-24]="SparseUnion",e[e.IntervalDayTime=-25]="IntervalDayTime",e[e.IntervalYearMonth=-26]="IntervalYearMonth"})(U||(U={}));var bo;(function(e){e[e.OFFSET=0]="OFFSET",e[e.DATA=1]="DATA",e[e.VALIDITY=2]="VALIDITY",e[e.TYPE=3]="TYPE"})(bo||(bo={}));const Hq=void 0;function kp(e){if(e===null)return"null";if(e===Hq)return"undefined";switch(typeof e){case"number":return`${e}`;case"bigint":return`${e}`;case"string":return`"${e}"`}return typeof e[Symbol.toPrimitive]=="function"?e[Symbol.toPrimitive]("string"):ArrayBuffer.isView(e)?e instanceof Iy||e instanceof Ey?`[${[...e].map(t=>kp(t))}]`:`[${e}]`:ArrayBuffer.isView(e)?`[${e}]`:JSON.stringify(e,(t,n)=>typeof n=="bigint"?`${n}`:n)}const Xq=Symbol.for("isArrowBigNum");function us(e,...t){return t.length===0?Object.setPrototypeOf(Se(this.TypedArray,e),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(e,...t),this.constructor.prototype)}us.prototype[Xq]=!0;us.prototype.toJSON=function(){return`"${Sl(this)}"`};us.prototype.valueOf=function(){return YR(this)};us.prototype.toString=function(){return Sl(this)};us.prototype[Symbol.toPrimitive]=function(e="default"){switch(e){case"number":return YR(this);case"string":return Sl(this);case"default":return FS(this)}return Sl(this)};function Sf(...e){return us.apply(this,e)}function xf(...e){return us.apply(this,e)}function Dp(...e){return us.apply(this,e)}Object.setPrototypeOf(Sf.prototype,Object.create(Int32Array.prototype));Object.setPrototypeOf(xf.prototype,Object.create(Uint32Array.prototype));Object.setPrototypeOf(Dp.prototype,Object.create(Uint32Array.prototype));Object.assign(Sf.prototype,us.prototype,{constructor:Sf,signed:!0,TypedArray:Int32Array,BigIntArray:Iy});Object.assign(xf.prototype,us.prototype,{constructor:xf,signed:!1,TypedArray:Uint32Array,BigIntArray:Ey});Object.assign(Dp.prototype,us.prototype,{constructor:Dp,signed:!0,TypedArray:Uint32Array,BigIntArray:Ey});function YR(e){const{buffer:t,byteOffset:n,length:r,signed:i}=e,s=new Ey(t,n,r),o=i&&s[s.length-1]&BigInt(1)<<BigInt(63);let a=BigInt(o?1:0),c=BigInt(0);if(o){for(const l of s)a+=~l*(BigInt(1)<<BigInt(32)*c++);a*=BigInt(-1)}else for(const l of s)a+=l*(BigInt(1)<<BigInt(32)*c++);return a}let Sl,FS;Rq?(FS=e=>e.byteLength===8?new e.BigIntArray(e.buffer,e.byteOffset,1)[0]:b_(e),Sl=e=>e.byteLength===8?`${new e.BigIntArray(e.buffer,e.byteOffset,1)[0]}`:b_(e)):(Sl=b_,FS=Sl);function b_(e){let t="";const n=new Uint32Array(2);let r=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);const i=new Uint32Array((r=new Uint16Array(r).reverse()).buffer);let s=-1;const o=r.length-1;do{for(n[0]=r[s=0];s<o;)r[s++]=n[1]=n[0]/10,n[0]=(n[0]-n[1]*10<<16)+r[s];r[s]=n[1]=n[0]/10,n[0]=n[0]-n[1]*10,t=`${n[0]}${t}`}while(i[0]||i[1]||i[2]||i[3]);return t??"0"}let Qq=class qR{static new(t,n){switch(n){case!0:return new Sf(t);case!1:return new xf(t)}switch(t.constructor){case Int8Array:case Int16Array:case Int32Array:case Iy:return new Sf(t)}return t.byteLength===16?new Dp(t):new xf(t)}static signed(t){return new Sf(t)}static unsigned(t){return new xf(t)}static decimal(t){return new Dp(t)}constructor(t,n){return qR.new(t,n)}};var WR,GR,HR,XR,QR,KR,ZR,JR,t4,e4,n4,r4,i4,s4,o4,a4,c4,l4,u4;let Ct=class LS{static isNull(t){return(t==null?void 0:t.typeId)===U.Null}static isInt(t){return(t==null?void 0:t.typeId)===U.Int}static isFloat(t){return(t==null?void 0:t.typeId)===U.Float}static isBinary(t){return(t==null?void 0:t.typeId)===U.Binary}static isUtf8(t){return(t==null?void 0:t.typeId)===U.Utf8}static isBool(t){return(t==null?void 0:t.typeId)===U.Bool}static isDecimal(t){return(t==null?void 0:t.typeId)===U.Decimal}static isDate(t){return(t==null?void 0:t.typeId)===U.Date}static isTime(t){return(t==null?void 0:t.typeId)===U.Time}static isTimestamp(t){return(t==null?void 0:t.typeId)===U.Timestamp}static isInterval(t){return(t==null?void 0:t.typeId)===U.Interval}static isList(t){return(t==null?void 0:t.typeId)===U.List}static isStruct(t){return(t==null?void 0:t.typeId)===U.Struct}static isUnion(t){return(t==null?void 0:t.typeId)===U.Union}static isFixedSizeBinary(t){return(t==null?void 0:t.typeId)===U.FixedSizeBinary}static isFixedSizeList(t){return(t==null?void 0:t.typeId)===U.FixedSizeList}static isMap(t){return(t==null?void 0:t.typeId)===U.Map}static isDictionary(t){return(t==null?void 0:t.typeId)===U.Dictionary}static isDenseUnion(t){return LS.isUnion(t)&&t.mode===rs.Dense}static isSparseUnion(t){return LS.isUnion(t)&&t.mode===rs.Sparse}get typeId(){return U.NONE}};WR=Symbol.toStringTag;Ct[WR]=(e=>(e.children=null,e.ArrayType=Array,e[Symbol.toStringTag]="DataType"))(Ct.prototype);let ic=class extends Ct{toString(){return"Null"}get typeId(){return U.Null}};GR=Symbol.toStringTag;ic[GR]=(e=>e[Symbol.toStringTag]="Null")(ic.prototype);let sc=class extends Ct{constructor(t,n){super(),this.isSigned=t,this.bitWidth=n}get typeId(){return U.Int}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?Iy:Ey}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}};HR=Symbol.toStringTag;sc[HR]=(e=>(e.isSigned=null,e.bitWidth=null,e[Symbol.toStringTag]="Int"))(sc.prototype);let Op=class extends sc{constructor(){super(!0,32)}get ArrayType(){return Int32Array}};Object.defineProperty(Op.prototype,"ArrayType",{value:Int32Array});let Rp=class extends Ct{constructor(t){super(),this.precision=t}get typeId(){return U.Float}get ArrayType(){switch(this.precision){case Dr.HALF:return Uint16Array;case Dr.SINGLE:return Float32Array;case Dr.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}};XR=Symbol.toStringTag;Rp[XR]=(e=>(e.precision=null,e[Symbol.toStringTag]="Float"))(Rp.prototype);let Lg=class extends Ct{constructor(){super()}get typeId(){return U.Binary}toString(){return"Binary"}};QR=Symbol.toStringTag;Lg[QR]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Binary"))(Lg.prototype);let Bg=class extends Ct{constructor(){super()}get typeId(){return U.Utf8}toString(){return"Utf8"}};KR=Symbol.toStringTag;Bg[KR]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Utf8"))(Bg.prototype);let Cg=class extends Ct{constructor(){super()}get typeId(){return U.Bool}toString(){return"Bool"}};ZR=Symbol.toStringTag;Cg[ZR]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Bool"))(Cg.prototype);let Ug=class extends Ct{constructor(t,n,r=128){super(),this.scale=t,this.precision=n,this.bitWidth=r}get typeId(){return U.Decimal}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}};JR=Symbol.toStringTag;Ug[JR]=(e=>(e.scale=null,e.precision=null,e.ArrayType=Uint32Array,e[Symbol.toStringTag]="Decimal"))(Ug.prototype);let Pg=class extends Ct{constructor(t){super(),this.unit=t}get typeId(){return U.Date}toString(){return`Date${(this.unit+1)*32}<${Qo[this.unit]}>`}};t4=Symbol.toStringTag;Pg[t4]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Date"))(Pg.prototype);let Fp=class extends Ct{constructor(t,n){super(),this.unit=t,this.bitWidth=n}get typeId(){return U.Time}toString(){return`Time${this.bitWidth}<${ae[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return Iy}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}};e4=Symbol.toStringTag;Fp[e4]=(e=>(e.unit=null,e.bitWidth=null,e[Symbol.toStringTag]="Time"))(Fp.prototype);let zg=class extends Ct{constructor(t,n){super(),this.unit=t,this.timezone=n}get typeId(){return U.Timestamp}toString(){return`Timestamp<${ae[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}};n4=Symbol.toStringTag;zg[n4]=(e=>(e.unit=null,e.timezone=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Timestamp"))(zg.prototype);let jg=class extends Ct{constructor(t){super(),this.unit=t}get typeId(){return U.Interval}toString(){return`Interval<${rc[this.unit]}>`}};r4=Symbol.toStringTag;jg[r4]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Interval"))(jg.prototype);let Vg=class extends Ct{constructor(t){super(),this.children=[t]}get typeId(){return U.List}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}};i4=Symbol.toStringTag;Vg[i4]=(e=>(e.children=null,e[Symbol.toStringTag]="List"))(Vg.prototype);let lr=class extends Ct{constructor(t){super(),this.children=t}get typeId(){return U.Struct}toString(){return`Struct<{${this.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}};s4=Symbol.toStringTag;lr[s4]=(e=>(e.children=null,e[Symbol.toStringTag]="Struct"))(lr.prototype);let Yg=class extends Ct{constructor(t,n,r){super(),this.mode=t,this.children=r,this.typeIds=n=Int32Array.from(n),this.typeIdToChildIndex=n.reduce((i,s,o)=>(i[s]=o)&&i||i,Object.create(null))}get typeId(){return U.Union}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(t=>`${t.type}`).join(" | ")}>`}};o4=Symbol.toStringTag;Yg[o4]=(e=>(e.mode=null,e.typeIds=null,e.children=null,e.typeIdToChildIndex=null,e.ArrayType=Int8Array,e[Symbol.toStringTag]="Union"))(Yg.prototype);let qg=class extends Ct{constructor(t){super(),this.byteWidth=t}get typeId(){return U.FixedSizeBinary}toString(){return`FixedSizeBinary[${this.byteWidth}]`}};a4=Symbol.toStringTag;qg[a4]=(e=>(e.byteWidth=null,e.ArrayType=Uint8Array,e[Symbol.toStringTag]="FixedSizeBinary"))(qg.prototype);let Wg=class extends Ct{constructor(t,n){super(),this.listSize=t,this.children=[n]}get typeId(){return U.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}};c4=Symbol.toStringTag;Wg[c4]=(e=>(e.children=null,e.listSize=null,e[Symbol.toStringTag]="FixedSizeList"))(Wg.prototype);let Gg=class extends Ct{constructor(t,n=!1){super(),this.children=[t],this.keysSorted=n}get typeId(){return U.Map}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}};l4=Symbol.toStringTag;Gg[l4]=(e=>(e.children=null,e.keysSorted=null,e[Symbol.toStringTag]="Map_"))(Gg.prototype);const Kq=(e=>()=>++e)(-1);let Wf=class extends Ct{constructor(t,n,r,i){super(),this.indices=n,this.dictionary=t,this.isOrdered=i||!1,this.id=r==null?Kq():typeof r=="number"?r:r.low}get typeId(){return U.Dictionary}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}};u4=Symbol.toStringTag;Wf[u4]=(e=>(e.id=null,e.indices=null,e.isOrdered=null,e.dictionary=null,e[Symbol.toStringTag]="Dictionary"))(Wf.prototype);function wo(e){const t=e;switch(e.typeId){case U.Decimal:return e.bitWidth/32;case U.Timestamp:return 2;case U.Date:return 1+t.unit;case U.Interval:return 1+t.unit;case U.FixedSizeList:return t.listSize;case U.FixedSizeBinary:return t.byteWidth;default:return 1}}let Jt=class{visitMany(t,...n){return t.map((r,i)=>this.visit(r,...n.map(s=>s[i])))}visit(...t){return this.getVisitFn(t[0],!1).apply(this,t)}getVisitFn(t,n=!0){return Zq(this,t,n)}getVisitFnByTypeId(t,n=!0){return Iu(this,t,n)}visitNull(t,...n){return null}visitBool(t,...n){return null}visitInt(t,...n){return null}visitFloat(t,...n){return null}visitUtf8(t,...n){return null}visitBinary(t,...n){return null}visitFixedSizeBinary(t,...n){return null}visitDate(t,...n){return null}visitTimestamp(t,...n){return null}visitTime(t,...n){return null}visitDecimal(t,...n){return null}visitList(t,...n){return null}visitStruct(t,...n){return null}visitUnion(t,...n){return null}visitDictionary(t,...n){return null}visitInterval(t,...n){return null}visitFixedSizeList(t,...n){return null}visitMap(t,...n){return null}};function Zq(e,t,n=!0){return typeof t=="number"?Iu(e,t,n):typeof t=="string"&&t in U?Iu(e,U[t],n):t&&t instanceof Ct?Iu(e,uN(t),n):t!=null&&t.type&&t.type instanceof Ct?Iu(e,uN(t.type),n):Iu(e,U.NONE,n)}function Iu(e,t,n=!0){let r=null;switch(t){case U.Null:r=e.visitNull;break;case U.Bool:r=e.visitBool;break;case U.Int:r=e.visitInt;break;case U.Int8:r=e.visitInt8||e.visitInt;break;case U.Int16:r=e.visitInt16||e.visitInt;break;case U.Int32:r=e.visitInt32||e.visitInt;break;case U.Int64:r=e.visitInt64||e.visitInt;break;case U.Uint8:r=e.visitUint8||e.visitInt;break;case U.Uint16:r=e.visitUint16||e.visitInt;break;case U.Uint32:r=e.visitUint32||e.visitInt;break;case U.Uint64:r=e.visitUint64||e.visitInt;break;case U.Float:r=e.visitFloat;break;case U.Float16:r=e.visitFloat16||e.visitFloat;break;case U.Float32:r=e.visitFloat32||e.visitFloat;break;case U.Float64:r=e.visitFloat64||e.visitFloat;break;case U.Utf8:r=e.visitUtf8;break;case U.Binary:r=e.visitBinary;break;case U.FixedSizeBinary:r=e.visitFixedSizeBinary;break;case U.Date:r=e.visitDate;break;case U.DateDay:r=e.visitDateDay||e.visitDate;break;case U.DateMillisecond:r=e.visitDateMillisecond||e.visitDate;break;case U.Timestamp:r=e.visitTimestamp;break;case U.TimestampSecond:r=e.visitTimestampSecond||e.visitTimestamp;break;case U.TimestampMillisecond:r=e.visitTimestampMillisecond||e.visitTimestamp;break;case U.TimestampMicrosecond:r=e.visitTimestampMicrosecond||e.visitTimestamp;break;case U.TimestampNanosecond:r=e.visitTimestampNanosecond||e.visitTimestamp;break;case U.Time:r=e.visitTime;break;case U.TimeSecond:r=e.visitTimeSecond||e.visitTime;break;case U.TimeMillisecond:r=e.visitTimeMillisecond||e.visitTime;break;case U.TimeMicrosecond:r=e.visitTimeMicrosecond||e.visitTime;break;case U.TimeNanosecond:r=e.visitTimeNanosecond||e.visitTime;break;case U.Decimal:r=e.visitDecimal;break;case U.List:r=e.visitList;break;case U.Struct:r=e.visitStruct;break;case U.Union:r=e.visitUnion;break;case U.DenseUnion:r=e.visitDenseUnion||e.visitUnion;break;case U.SparseUnion:r=e.visitSparseUnion||e.visitUnion;break;case U.Dictionary:r=e.visitDictionary;break;case U.Interval:r=e.visitInterval;break;case U.IntervalDayTime:r=e.visitIntervalDayTime||e.visitInterval;break;case U.IntervalYearMonth:r=e.visitIntervalYearMonth||e.visitInterval;break;case U.FixedSizeList:r=e.visitFixedSizeList;break;case U.Map:r=e.visitMap;break}if(typeof r=="function")return r;if(!n)return()=>null;throw new Error(`Unrecognized type '${U[t]}'`)}function uN(e){switch(e.typeId){case U.Null:return U.Null;case U.Int:{const{bitWidth:t,isSigned:n}=e;switch(t){case 8:return n?U.Int8:U.Uint8;case 16:return n?U.Int16:U.Uint16;case 32:return n?U.Int32:U.Uint32;case 64:return n?U.Int64:U.Uint64}return U.Int}case U.Float:switch(e.precision){case Dr.HALF:return U.Float16;case Dr.SINGLE:return U.Float32;case Dr.DOUBLE:return U.Float64}return U.Float;case U.Binary:return U.Binary;case U.Utf8:return U.Utf8;case U.Bool:return U.Bool;case U.Decimal:return U.Decimal;case U.Time:switch(e.unit){case ae.SECOND:return U.TimeSecond;case ae.MILLISECOND:return U.TimeMillisecond;case ae.MICROSECOND:return U.TimeMicrosecond;case ae.NANOSECOND:return U.TimeNanosecond}return U.Time;case U.Timestamp:switch(e.unit){case ae.SECOND:return U.TimestampSecond;case ae.MILLISECOND:return U.TimestampMillisecond;case ae.MICROSECOND:return U.TimestampMicrosecond;case ae.NANOSECOND:return U.TimestampNanosecond}return U.Timestamp;case U.Date:switch(e.unit){case Qo.DAY:return U.DateDay;case Qo.MILLISECOND:return U.DateMillisecond}return U.Date;case U.Interval:switch(e.unit){case rc.DAY_TIME:return U.IntervalDayTime;case rc.YEAR_MONTH:return U.IntervalYearMonth}return U.Interval;case U.Map:return U.Map;case U.List:return U.List;case U.Struct:return U.Struct;case U.Union:switch(e.mode){case rs.Dense:return U.DenseUnion;case rs.Sparse:return U.SparseUnion}return U.Union;case U.FixedSizeBinary:return U.FixedSizeBinary;case U.FixedSizeList:return U.FixedSizeList;case U.Dictionary:return U.Dictionary}throw new Error(`Unrecognized type '${U[e.typeId]}'`)}Jt.prototype.visitInt8=null;Jt.prototype.visitInt16=null;Jt.prototype.visitInt32=null;Jt.prototype.visitInt64=null;Jt.prototype.visitUint8=null;Jt.prototype.visitUint16=null;Jt.prototype.visitUint32=null;Jt.prototype.visitUint64=null;Jt.prototype.visitFloat16=null;Jt.prototype.visitFloat32=null;Jt.prototype.visitFloat64=null;Jt.prototype.visitDateDay=null;Jt.prototype.visitDateMillisecond=null;Jt.prototype.visitTimestampSecond=null;Jt.prototype.visitTimestampMillisecond=null;Jt.prototype.visitTimestampMicrosecond=null;Jt.prototype.visitTimestampNanosecond=null;Jt.prototype.visitTimeSecond=null;Jt.prototype.visitTimeMillisecond=null;Jt.prototype.visitTimeMicrosecond=null;Jt.prototype.visitTimeNanosecond=null;Jt.prototype.visitDenseUnion=null;Jt.prototype.visitSparseUnion=null;Jt.prototype.visitIntervalDayTime=null;Jt.prototype.visitIntervalYearMonth=null;const f4=new Float64Array(1),fu=new Uint32Array(f4.buffer);function d4(e){const t=(e&31744)>>10,n=(e&1023)/1024,r=Math.pow(-1,(e&32768)>>15);switch(t){case 31:return r*(n?Number.NaN:1/0);case 0:return r*(n?6103515625e-14*n:0)}return r*Math.pow(2,t-15)*(1+n)}function Jq(e){if(e!==e)return 32256;f4[0]=e;const t=(fu[1]&2147483648)>>16&65535;let n=fu[1]&2146435072,r=0;return n>=1089470464?fu[0]>0?n=31744:(n=(n&2080374784)>>16,r=(fu[1]&1048575)>>10):n<=1056964608?(r=1048576+(fu[1]&1048575),r=1048576+(r<<(n>>20)-998)>>21,n=0):(n=n-1056964608>>10,r=(fu[1]&1048575)+512>>10),t|n|r&65535}let Dt=class extends Jt{};function Ft(e){return(t,n,r)=>{if(t.setValid(n,r!=null))return e(t,n,r)}}const tW=(e,t,n)=>{e[t]=Math.trunc(n/864e5)},RE=(e,t,n)=>{e[t]=Math.trunc(n%4294967296),e[t+1]=Math.trunc(n/4294967296)},eW=(e,t,n)=>{e[t]=Math.trunc(n*1e3%4294967296),e[t+1]=Math.trunc(n*1e3/4294967296)},nW=(e,t,n)=>{e[t]=Math.trunc(n*1e6%4294967296),e[t+1]=Math.trunc(n*1e6/4294967296)},h4=(e,t,n,r)=>{if(n+1<t.length){const{[n]:i,[n+1]:s}=t;e.set(r.subarray(0,s-i),i)}},rW=({offset:e,values:t},n,r)=>{const i=e+n;r?t[i>>3]|=1<<i%8:t[i>>3]&=~(1<<i%8)},ra=({values:e},t,n)=>{e[t]=n},FE=({values:e},t,n)=>{e[t]=n},p4=({values:e},t,n)=>{e[t]=Jq(n)},iW=(e,t,n)=>{switch(e.type.precision){case Dr.HALF:return p4(e,t,n);case Dr.SINGLE:case Dr.DOUBLE:return FE(e,t,n)}},y4=({values:e},t,n)=>{tW(e,t,n.valueOf())},m4=({values:e},t,n)=>{RE(e,t*2,n.valueOf())},sW=({stride:e,values:t},n,r)=>{t.set(r.subarray(0,e),e*n)},oW=({values:e,valueOffsets:t},n,r)=>h4(e,t,n,r),aW=({values:e,valueOffsets:t},n,r)=>{h4(e,t,n,$E(r))},cW=(e,t,n)=>{e.type.unit===Qo.DAY?y4(e,t,n):m4(e,t,n)},g4=({values:e},t,n)=>RE(e,t*2,n/1e3),v4=({values:e},t,n)=>RE(e,t*2,n),b4=({values:e},t,n)=>eW(e,t*2,n),w4=({values:e},t,n)=>nW(e,t*2,n),lW=(e,t,n)=>{switch(e.type.unit){case ae.SECOND:return g4(e,t,n);case ae.MILLISECOND:return v4(e,t,n);case ae.MICROSECOND:return b4(e,t,n);case ae.NANOSECOND:return w4(e,t,n)}},_4=({values:e},t,n)=>{e[t]=n},S4=({values:e},t,n)=>{e[t]=n},x4=({values:e},t,n)=>{e[t]=n},I4=({values:e},t,n)=>{e[t]=n},uW=(e,t,n)=>{switch(e.type.unit){case ae.SECOND:return _4(e,t,n);case ae.MILLISECOND:return S4(e,t,n);case ae.MICROSECOND:return x4(e,t,n);case ae.NANOSECOND:return I4(e,t,n)}},fW=({values:e,stride:t},n,r)=>{e.set(r.subarray(0,t),t*n)},dW=(e,t,n)=>{const r=e.children[0],i=e.valueOffsets,s=Oi.getVisitFn(r);if(Array.isArray(n))for(let o=-1,a=i[t],c=i[t+1];a<c;)s(r,a++,n[++o]);else for(let o=-1,a=i[t],c=i[t+1];a<c;)s(r,a++,n.get(++o))},hW=(e,t,n)=>{const r=e.children[0],{valueOffsets:i}=e,s=Oi.getVisitFn(r);let{[t]:o,[t+1]:a}=i;const c=n instanceof Map?n.entries():Object.entries(n);for(const l of c)if(s(r,o,l),++o>=a)break},pW=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[s]),yW=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(s)),mW=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(i.name)),gW=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[i.name]),vW=(e,t,n)=>{const r=e.type.children.map(s=>Oi.getVisitFn(s.type)),i=n instanceof Map?mW(t,n):n instanceof an?yW(t,n):Array.isArray(n)?pW(t,n):gW(t,n);e.type.children.forEach((s,o)=>i(r[o],e.children[o],s,o))},bW=(e,t,n)=>{e.type.mode===rs.Dense?E4(e,t,n):T4(e,t,n)},E4=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];Oi.visit(i,e.valueOffsets[t],n)},T4=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];Oi.visit(i,t,n)},wW=(e,t,n)=>{var r;(r=e.dictionary)===null||r===void 0||r.set(e.values[t],n)},_W=(e,t,n)=>{e.type.unit===rc.DAY_TIME?A4(e,t,n):M4(e,t,n)},A4=({values:e},t,n)=>{e.set(n.subarray(0,2),2*t)},M4=({values:e},t,n)=>{e[t]=n[0]*12+n[1]%12},SW=(e,t,n)=>{const{stride:r}=e,i=e.children[0],s=Oi.getVisitFn(i);if(Array.isArray(n))for(let o=-1,a=t*r;++o<r;)s(i,a+o,n[o]);else for(let o=-1,a=t*r;++o<r;)s(i,a+o,n.get(o))};Dt.prototype.visitBool=Ft(rW);Dt.prototype.visitInt=Ft(ra);Dt.prototype.visitInt8=Ft(ra);Dt.prototype.visitInt16=Ft(ra);Dt.prototype.visitInt32=Ft(ra);Dt.prototype.visitInt64=Ft(ra);Dt.prototype.visitUint8=Ft(ra);Dt.prototype.visitUint16=Ft(ra);Dt.prototype.visitUint32=Ft(ra);Dt.prototype.visitUint64=Ft(ra);Dt.prototype.visitFloat=Ft(iW);Dt.prototype.visitFloat16=Ft(p4);Dt.prototype.visitFloat32=Ft(FE);Dt.prototype.visitFloat64=Ft(FE);Dt.prototype.visitUtf8=Ft(aW);Dt.prototype.visitBinary=Ft(oW);Dt.prototype.visitFixedSizeBinary=Ft(sW);Dt.prototype.visitDate=Ft(cW);Dt.prototype.visitDateDay=Ft(y4);Dt.prototype.visitDateMillisecond=Ft(m4);Dt.prototype.visitTimestamp=Ft(lW);Dt.prototype.visitTimestampSecond=Ft(g4);Dt.prototype.visitTimestampMillisecond=Ft(v4);Dt.prototype.visitTimestampMicrosecond=Ft(b4);Dt.prototype.visitTimestampNanosecond=Ft(w4);Dt.prototype.visitTime=Ft(uW);Dt.prototype.visitTimeSecond=Ft(_4);Dt.prototype.visitTimeMillisecond=Ft(S4);Dt.prototype.visitTimeMicrosecond=Ft(x4);Dt.prototype.visitTimeNanosecond=Ft(I4);Dt.prototype.visitDecimal=Ft(fW);Dt.prototype.visitList=Ft(dW);Dt.prototype.visitStruct=Ft(vW);Dt.prototype.visitUnion=Ft(bW);Dt.prototype.visitDenseUnion=Ft(E4);Dt.prototype.visitSparseUnion=Ft(T4);Dt.prototype.visitDictionary=Ft(wW);Dt.prototype.visitInterval=Ft(_W);Dt.prototype.visitIntervalDayTime=Ft(A4);Dt.prototype.visitIntervalYearMonth=Ft(M4);Dt.prototype.visitFixedSizeList=Ft(SW);Dt.prototype.visitMap=Ft(hW);const Oi=new Dt,Yi=Symbol.for("parent"),If=Symbol.for("rowIndex");let LE=class{constructor(t,n){return this[Yi]=t,this[If]=n,new Proxy(this,new IW)}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[If],n=this[Yi],r=n.type.children,i={};for(let s=-1,o=r.length;++s<o;)i[r[s].name]=Or.visit(n.children[s],t);return i}toString(){return`{${[...this].map(([t,n])=>`${kp(t)}: ${kp(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new xW(this[Yi],this[If])}},xW=class{constructor(t,n){this.childIndex=0,this.children=t.children,this.rowIndex=n,this.childFields=t.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const t=this.childIndex;return t<this.numChildren?(this.childIndex=t+1,{done:!1,value:[this.childFields[t].name,Or.visit(this.children[t],this.rowIndex)]}):{done:!0,value:null}}};Object.defineProperties(LE.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[Yi]:{writable:!0,enumerable:!1,configurable:!1,value:null},[If]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});let IW=class{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[Yi].type.children.map(n=>n.name)}has(t,n){return t[Yi].type.children.findIndex(r=>r.name===n)!==-1}getOwnPropertyDescriptor(t,n){if(t[Yi].type.children.findIndex(r=>r.name===n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[Yi].type.children.findIndex(i=>i.name===n);if(r!==-1){const i=Or.visit(t[Yi].children[r],t[If]);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[Yi].type.children.findIndex(s=>s.name===n);return i!==-1?(Oi.visit(t[Yi].children[i],t[If],r),Reflect.set(t,n,r)):Reflect.has(t,n)||typeof n=="symbol"?Reflect.set(t,n,r):!1}},At=class extends Jt{};function Ot(e){return(t,n)=>t.getValid(n)?e(t,n):null}const EW=(e,t)=>864e5*e[t],BE=(e,t)=>4294967296*e[t+1]+(e[t]>>>0),TW=(e,t)=>4294967296*(e[t+1]/1e3)+(e[t]>>>0)/1e3,AW=(e,t)=>4294967296*(e[t+1]/1e6)+(e[t]>>>0)/1e6,N4=e=>new Date(e),MW=(e,t)=>N4(EW(e,t)),NW=(e,t)=>N4(BE(e,t)),$W=(e,t)=>null,$4=(e,t,n)=>{if(n+1>=t.length)return null;const r=t[n],i=t[n+1];return e.subarray(r,i)},kW=({offset:e,values:t},n)=>{const r=e+n;return(t[r>>3]&1<<r%8)!==0},k4=({values:e},t)=>MW(e,t),D4=({values:e},t)=>NW(e,t*2),Ec=({stride:e,values:t},n)=>t[e*n],DW=({stride:e,values:t},n)=>d4(t[e*n]),O4=({values:e},t)=>e[t],OW=({stride:e,values:t},n)=>t.subarray(e*n,e*(n+1)),RW=({values:e,valueOffsets:t},n)=>$4(e,t,n),FW=({values:e,valueOffsets:t},n)=>{const r=$4(e,t,n);return r!==null?DS(r):null},LW=({values:e},t)=>e[t],BW=({type:e,values:t},n)=>e.precision!==Dr.HALF?t[n]:d4(t[n]),CW=(e,t)=>e.type.unit===Qo.DAY?k4(e,t):D4(e,t),R4=({values:e},t)=>1e3*BE(e,t*2),F4=({values:e},t)=>BE(e,t*2),L4=({values:e},t)=>TW(e,t*2),B4=({values:e},t)=>AW(e,t*2),UW=(e,t)=>{switch(e.type.unit){case ae.SECOND:return R4(e,t);case ae.MILLISECOND:return F4(e,t);case ae.MICROSECOND:return L4(e,t);case ae.NANOSECOND:return B4(e,t)}},C4=({values:e},t)=>e[t],U4=({values:e},t)=>e[t],P4=({values:e},t)=>e[t],z4=({values:e},t)=>e[t],PW=(e,t)=>{switch(e.type.unit){case ae.SECOND:return C4(e,t);case ae.MILLISECOND:return U4(e,t);case ae.MICROSECOND:return P4(e,t);case ae.NANOSECOND:return z4(e,t)}},zW=({values:e,stride:t},n)=>Qq.decimal(e.subarray(t*n,t*(n+1))),jW=(e,t)=>{const{valueOffsets:n,stride:r,children:i}=e,{[t*r]:s,[t*r+1]:o}=n,c=i[0].slice(s,o-s);return new an([c])},VW=(e,t)=>{const{valueOffsets:n,children:r}=e,{[t]:i,[t+1]:s}=n,o=r[0];return new CE(o.slice(i,s-i))},YW=(e,t)=>new LE(e,t),qW=(e,t)=>e.type.mode===rs.Dense?j4(e,t):V4(e,t),j4=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return Or.visit(r,e.valueOffsets[t])},V4=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return Or.visit(r,t)},WW=(e,t)=>{var n;return(n=e.dictionary)===null||n===void 0?void 0:n.get(e.values[t])},GW=(e,t)=>e.type.unit===rc.DAY_TIME?Y4(e,t):q4(e,t),Y4=({values:e},t)=>e.subarray(2*t,2*(t+1)),q4=({values:e},t)=>{const n=e[t],r=new Int32Array(2);return r[0]=Math.trunc(n/12),r[1]=Math.trunc(n%12),r},HW=(e,t)=>{const{stride:n,children:r}=e,s=r[0].slice(t*n,n);return new an([s])};At.prototype.visitNull=Ot($W);At.prototype.visitBool=Ot(kW);At.prototype.visitInt=Ot(LW);At.prototype.visitInt8=Ot(Ec);At.prototype.visitInt16=Ot(Ec);At.prototype.visitInt32=Ot(Ec);At.prototype.visitInt64=Ot(O4);At.prototype.visitUint8=Ot(Ec);At.prototype.visitUint16=Ot(Ec);At.prototype.visitUint32=Ot(Ec);At.prototype.visitUint64=Ot(O4);At.prototype.visitFloat=Ot(BW);At.prototype.visitFloat16=Ot(DW);At.prototype.visitFloat32=Ot(Ec);At.prototype.visitFloat64=Ot(Ec);At.prototype.visitUtf8=Ot(FW);At.prototype.visitBinary=Ot(RW);At.prototype.visitFixedSizeBinary=Ot(OW);At.prototype.visitDate=Ot(CW);At.prototype.visitDateDay=Ot(k4);At.prototype.visitDateMillisecond=Ot(D4);At.prototype.visitTimestamp=Ot(UW);At.prototype.visitTimestampSecond=Ot(R4);At.prototype.visitTimestampMillisecond=Ot(F4);At.prototype.visitTimestampMicrosecond=Ot(L4);At.prototype.visitTimestampNanosecond=Ot(B4);At.prototype.visitTime=Ot(PW);At.prototype.visitTimeSecond=Ot(C4);At.prototype.visitTimeMillisecond=Ot(U4);At.prototype.visitTimeMicrosecond=Ot(P4);At.prototype.visitTimeNanosecond=Ot(z4);At.prototype.visitDecimal=Ot(zW);At.prototype.visitList=Ot(jW);At.prototype.visitStruct=Ot(YW);At.prototype.visitUnion=Ot(qW);At.prototype.visitDenseUnion=Ot(j4);At.prototype.visitSparseUnion=Ot(V4);At.prototype.visitDictionary=Ot(WW);At.prototype.visitInterval=Ot(GW);At.prototype.visitIntervalDayTime=Ot(Y4);At.prototype.visitIntervalYearMonth=Ot(q4);At.prototype.visitFixedSizeList=Ot(HW);At.prototype.visitMap=Ot(VW);const Or=new At,Ms=Symbol.for("keys"),Ef=Symbol.for("vals");let CE=class{constructor(t){return this[Ms]=new an([t.children[0]]).memoize(),this[Ef]=t.children[1],new Proxy(this,new QW)}[Symbol.iterator](){return new XW(this[Ms],this[Ef])}get size(){return this[Ms].length}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[Ms],n=this[Ef],r={};for(let i=-1,s=t.length;++i<s;)r[t.get(i)]=Or.visit(n,i);return r}toString(){return`{${[...this].map(([t,n])=>`${kp(t)}: ${kp(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}},XW=class{constructor(t,n){this.keys=t,this.vals=n,this.keyIndex=0,this.numKeys=t.length}[Symbol.iterator](){return this}next(){const t=this.keyIndex;return t===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(t),Or.visit(this.vals,t)]})}},QW=class{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[Ms].toArray().map(String)}has(t,n){return t[Ms].includes(n)}getOwnPropertyDescriptor(t,n){if(t[Ms].indexOf(n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[Ms].indexOf(n);if(r!==-1){const i=Or.visit(Reflect.get(t,Ef),r);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[Ms].indexOf(n);return i!==-1?(Oi.visit(Reflect.get(t,Ef),i,r),Reflect.set(t,n,r)):Reflect.has(t,n)?Reflect.set(t,n,r):!1}};Object.defineProperties(CE.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[Ms]:{writable:!0,enumerable:!1,configurable:!1,value:null},[Ef]:{writable:!0,enumerable:!1,configurable:!1,value:null}});let fN;function W4(e,t,n,r){const{length:i=0}=e;let s=typeof t!="number"?0:t,o=typeof n!="number"?i:n;return s<0&&(s=(s%i+i)%i),o<0&&(o=(o%i+i)%i),o<s&&(fN=s,s=o,o=fN),o>i&&(o=i),r?r(e,s,o):[s,o]}const dN=e=>e!==e;function Ed(e){if(typeof e!=="object"||e===null)return dN(e)?dN:n=>n===e;if(e instanceof Date){const n=e.valueOf();return r=>r instanceof Date?r.valueOf()===n:!1}return ArrayBuffer.isView(e)?n=>n?jq(e,n):!1:e instanceof Map?ZW(e):Array.isArray(e)?KW(e):e instanceof an?JW(e):tG(e,!0)}function KW(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=Ed(e[n]);return Ib(t)}function ZW(e){let t=-1;const n=[];for(const r of e.values())n[++t]=Ed(r);return Ib(n)}function JW(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=Ed(e.get(n));return Ib(t)}function tG(e,t=!1){const n=Object.keys(e);if(!t&&n.length===0)return()=>!1;const r=[];for(let i=-1,s=n.length;++i<s;)r[i]=Ed(e[n[i]]);return Ib(r,n)}function Ib(e,t){return n=>{if(!n||typeof n!="object")return!1;switch(n.constructor){case Array:return eG(e,n);case Map:return hN(e,n,n.keys());case CE:case LE:case Object:case void 0:return hN(e,n,t||Object.keys(n))}return n instanceof an?nG(e,n):!1}}function eG(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t[r]))return!1;return!0}function nG(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t.get(r)))return!1;return!0}function hN(e,t,n){const r=n[Symbol.iterator](),i=t instanceof Map?t.keys():Object.keys(t)[Symbol.iterator](),s=t instanceof Map?t.values():Object.values(t)[Symbol.iterator]();let o=0;const a=e.length;let c=s.next(),l=r.next(),u=i.next();for(;o<a&&!l.done&&!u.done&&!c.done&&!(l.value!==u.value||!e[o](c.value));++o,l=r.next(),u=i.next(),c=s.next());return o===a&&l.done&&u.done&&c.done?!0:(r.return&&r.return(),i.return&&i.return(),s.return&&s.return(),!1)}function G4(e,t,n,r){return(n&1<<r)!==0}function rG(e,t,n,r){return(n&1<<r)>>r}function iG(e,t,n){const r=n.byteLength+7&-8;if(e>0||n.byteLength<r){const i=new Uint8Array(r);return i.set(e%8===0?n.subarray(e>>3):BS(new UE(n,e,t,null,G4)).subarray(0,r)),i}return n}function BS(e){const t=[];let n=0,r=0,i=0;for(const o of e)o&&(i|=1<<r),++r===8&&(t[n++]=i,i=r=0);(n===0||r>0)&&(t[n++]=i);const s=new Uint8Array(t.length+7&-8);return s.set(t),s}let UE=class{constructor(t,n,r,i,s){this.bytes=t,this.length=r,this.context=i,this.get=s,this.bit=n%8,this.byteIndex=n>>3,this.byte=t[this.byteIndex++],this.index=0}next(){return this.index<this.length?(this.bit===8&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}};function CS(e,t,n){if(n-t<=0)return 0;if(n-t<8){let s=0;for(const o of new UE(e,t,n-t,e,rG))s+=o;return s}const r=n>>3<<3,i=t+(t%8===0?0:8-t%8);return CS(e,t,i)+CS(e,r,n)+sG(e,i>>3,r-i>>3)}function sG(e,t,n){let r=0,i=Math.trunc(t);const s=new DataView(e.buffer,e.byteOffset,e.byteLength),o=n===void 0?e.byteLength:i+n;for(;o-i>=4;)r+=w_(s.getUint32(i)),i+=4;for(;o-i>=2;)r+=w_(s.getUint16(i)),i+=2;for(;o-i>=1;)r+=w_(s.getUint8(i)),i+=1;return r}function w_(e){let t=Math.trunc(e);return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),(t+(t>>>4)&252645135)*16843009>>>24}const oG=-1;let Ue=class US{constructor(t,n,r,i,s,o=[],a){this.type=t,this.children=o,this.dictionary=a,this.offset=Math.floor(Math.max(n||0,0)),this.length=Math.floor(Math.max(r||0,0)),this._nullCount=Math.floor(Math.max(i||0,-1));let c;s instanceof US?(this.stride=s.stride,this.values=s.values,this.typeIds=s.typeIds,this.nullBitmap=s.nullBitmap,this.valueOffsets=s.valueOffsets):(this.stride=wo(t),s&&((c=s[0])&&(this.valueOffsets=c),(c=s[1])&&(this.values=c),(c=s[2])&&(this.nullBitmap=c),(c=s[3])&&(this.typeIds=c))),this.nullable=this._nullCount!==0&&this.nullBitmap&&this.nullBitmap.byteLength>0}get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get byteLength(){let t=0;const{valueOffsets:n,values:r,nullBitmap:i,typeIds:s}=this;return n&&(t+=n.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),s&&(t+=s.byteLength),this.children.reduce((o,a)=>o+a.byteLength,t)}get nullCount(){let t=this._nullCount,n;return t<=oG&&(n=this.nullBitmap)&&(this._nullCount=t=this.length-CS(n,this.offset,this.offset+this.length)),t}getValid(t){if(this.nullable&&this.nullCount>0){const n=this.offset+t;return(this.nullBitmap[n>>3]&1<<n%8)!==0}return!0}setValid(t,n){if(!this.nullable)return n;if(!this.nullBitmap||this.nullBitmap.byteLength<=t>>3){const{nullBitmap:c}=this._changeLengthAndBackfillNullBitmap(this.length);Object.assign(this,{nullBitmap:c,_nullCount:0})}const{nullBitmap:r,offset:i}=this,s=i+t>>3,o=(i+t)%8,a=r[s]>>o&1;return n?a===0&&(r[s]|=1<<o,this._nullCount=this.nullCount+1):a===1&&(r[s]&=~(1<<o),this._nullCount=this.nullCount-1),n}clone(t=this.type,n=this.offset,r=this.length,i=this._nullCount,s=this,o=this.children){return new US(t,n,r,i,s,o,this.dictionary)}slice(t,n){const{stride:r,typeId:i,children:s}=this,o=+(this._nullCount===0)-1,a=i===16?r:1,c=this._sliceBuffers(t,n,r,i);return this.clone(this.type,this.offset+t,n,o,c,s.length===0||this.valueOffsets?s:this._sliceChildren(s,a*t,a*n))}_changeLengthAndBackfillNullBitmap(t){if(this.typeId===U.Null)return this.clone(this.type,0,t,0);const{length:n,nullCount:r}=this,i=new Uint8Array((t+63&-64)>>3).fill(255,0,n>>3);i[n>>3]=(1<<n-(n&-8))-1,r>0&&i.set(iG(this.offset,n,this.nullBitmap),0);const s=this.buffers;return s[bo.VALIDITY]=i,this.clone(this.type,0,t,r+(t-n),s)}_sliceBuffers(t,n,r,i){let s;const{buffers:o}=this;return(s=o[bo.TYPE])&&(o[bo.TYPE]=s.subarray(t,t+n)),(s=o[bo.OFFSET])&&(o[bo.OFFSET]=s.subarray(t,t+n+1))||(s=o[bo.DATA])&&(o[bo.DATA]=i===6?s:s.subarray(r*t,r*(t+n))),o}_sliceChildren(t,n,r){return t.map(i=>i.slice(n,r))}};Ue.prototype.children=Object.freeze([]);let aG=class F0 extends Jt{visit(t){return this.getVisitFn(t.type).call(this,t)}visitNull(t){const{["type"]:n,["offset"]:r=0,["length"]:i=0}=t;return new Ue(n,r,i,0)}visitBool(t){const{["type"]:n,["offset"]:r=0}=t,i=fe(t.nullBitmap),s=Se(n.ArrayType,t.data),{["length"]:o=s.length>>3,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Ue(n,r,o,a,[void 0,s,i])}visitInt(t){const{["type"]:n,["offset"]:r=0}=t,i=fe(t.nullBitmap),s=Se(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Ue(n,r,o,a,[void 0,s,i])}visitFloat(t){const{["type"]:n,["offset"]:r=0}=t,i=fe(t.nullBitmap),s=Se(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Ue(n,r,o,a,[void 0,s,i])}visitUtf8(t){const{["type"]:n,["offset"]:r=0}=t,i=fe(t.data),s=fe(t.nullBitmap),o=eh(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:c=t.nullBitmap?-1:0}=t;return new Ue(n,r,a,c,[o,i,s])}visitBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=fe(t.data),s=fe(t.nullBitmap),o=eh(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:c=t.nullBitmap?-1:0}=t;return new Ue(n,r,a,c,[o,i,s])}visitFixedSizeBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=fe(t.nullBitmap),s=Se(n.ArrayType,t.data),{["length"]:o=s.length/wo(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Ue(n,r,o,a,[void 0,s,i])}visitDate(t){const{["type"]:n,["offset"]:r=0}=t,i=fe(t.nullBitmap),s=Se(n.ArrayType,t.data),{["length"]:o=s.length/wo(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Ue(n,r,o,a,[void 0,s,i])}visitTimestamp(t){const{["type"]:n,["offset"]:r=0}=t,i=fe(t.nullBitmap),s=Se(n.ArrayType,t.data),{["length"]:o=s.length/wo(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Ue(n,r,o,a,[void 0,s,i])}visitTime(t){const{["type"]:n,["offset"]:r=0}=t,i=fe(t.nullBitmap),s=Se(n.ArrayType,t.data),{["length"]:o=s.length/wo(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Ue(n,r,o,a,[void 0,s,i])}visitDecimal(t){const{["type"]:n,["offset"]:r=0}=t,i=fe(t.nullBitmap),s=Se(n.ArrayType,t.data),{["length"]:o=s.length/wo(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Ue(n,r,o,a,[void 0,s,i])}visitList(t){const{["type"]:n,["offset"]:r=0,["child"]:i}=t,s=fe(t.nullBitmap),o=eh(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:c=t.nullBitmap?-1:0}=t;return new Ue(n,r,a,c,[o,void 0,s],[i])}visitStruct(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=fe(t.nullBitmap),{length:o=i.reduce((c,{length:l})=>Math.max(c,l),0),nullCount:a=t.nullBitmap?-1:0}=t;return new Ue(n,r,o,a,[void 0,void 0,s],i)}visitUnion(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=fe(t.nullBitmap),o=Se(n.ArrayType,t.typeIds),{["length"]:a=o.length,["nullCount"]:c=t.nullBitmap?-1:0}=t;if(Ct.isSparseUnion(n))return new Ue(n,r,a,c,[void 0,void 0,s,o],i);const l=eh(t.valueOffsets);return new Ue(n,r,a,c,[l,void 0,s,o],i)}visitDictionary(t){const{["type"]:n,["offset"]:r=0}=t,i=fe(t.nullBitmap),s=Se(n.indices.ArrayType,t.data),{["dictionary"]:o=new an([new F0().visit({type:n.dictionary})])}=t,{["length"]:a=s.length,["nullCount"]:c=t.nullBitmap?-1:0}=t;return new Ue(n,r,a,c,[void 0,s,i],[],o)}visitInterval(t){const{["type"]:n,["offset"]:r=0}=t,i=fe(t.nullBitmap),s=Se(n.ArrayType,t.data),{["length"]:o=s.length/wo(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Ue(n,r,o,a,[void 0,s,i])}visitFixedSizeList(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new F0().visit({type:n.valueType})}=t,s=fe(t.nullBitmap),{["length"]:o=i.length/wo(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Ue(n,r,o,a,[void 0,void 0,s],[i])}visitMap(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new F0().visit({type:n.childType})}=t,s=fe(t.nullBitmap),o=eh(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:c=t.nullBitmap?-1:0}=t;return new Ue(n,r,a,c,[o,void 0,s],[i])}};function Kt(e){return new aG().visit(e)}let pN=class{constructor(t=0,n){this.numChunks=t,this.getChunkIterator=n,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const t=this.chunkIterator.next();if(!t.done)return t;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}};function H4(e){return e.reduce((t,n)=>t+n.nullCount,0)}function X4(e){return e.reduce((t,n,r)=>(t[r+1]=t[r]+n.length,t),new Uint32Array(e.length+1))}function Q4(e,t,n,r){const i=[];for(let s=-1,o=e.length;++s<o;){const a=e[s],c=t[s],{length:l}=a;if(c>=r)break;if(n>=c+l)continue;if(c>=n&&c+l<=r){i.push(a);continue}const u=Math.max(0,n-c),f=Math.min(r-c,l);i.push(a.slice(u,f-u))}return i.length===0&&i.push(e[0].slice(0,0)),i}function PE(e,t,n,r){let i=0,s=0,o=t.length-1;do{if(i>=o-1)return n<t[o]?r(e,i,n-t[i]):null;s=i+Math.trunc((o-i)*.5),n<t[s]?o=s:i=s}while(i<o)}function zE(e,t){return e.getValid(t)}function Tf(e){function t(n,r,i){return e(n[r],i)}return function(n){const r=this.data;return PE(r,this._offsets,n,t)}}function K4(e){let t;function n(r,i,s){return e(r[i],s,t)}return function(r,i){const s=this.data;t=i;const o=PE(s,this._offsets,r,n);return t=void 0,o}}function Z4(e){let t;function n(r,i,s){let o=s,a=0,c=0;for(let l=i-1,u=r.length;++l<u;){const f=r[l];if(~(a=e(f,t,o)))return c+a;o=0,c+=f.length}return-1}return function(r,i){t=r;const s=this.data,o=typeof i!="number"?n(s,0,0):PE(s,this._offsets,i,n);return t=void 0,o}}let Mt=class extends Jt{};function cG(e,t){return t===null&&e.length>0?0:-1}function lG(e,t){const{nullBitmap:n}=e;if(!n||e.nullCount<=0)return-1;let r=0;for(const i of new UE(n,e.offset+(t||0),e.length,n,G4)){if(!i)return r;++r}return-1}function Bt(e,t,n){if(t===void 0)return-1;if(t===null)return lG(e,n);const r=Or.getVisitFn(e),i=Ed(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}function J4(e,t,n){const r=Or.getVisitFn(e),i=Ed(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}Mt.prototype.visitNull=cG;Mt.prototype.visitBool=Bt;Mt.prototype.visitInt=Bt;Mt.prototype.visitInt8=Bt;Mt.prototype.visitInt16=Bt;Mt.prototype.visitInt32=Bt;Mt.prototype.visitInt64=Bt;Mt.prototype.visitUint8=Bt;Mt.prototype.visitUint16=Bt;Mt.prototype.visitUint32=Bt;Mt.prototype.visitUint64=Bt;Mt.prototype.visitFloat=Bt;Mt.prototype.visitFloat16=Bt;Mt.prototype.visitFloat32=Bt;Mt.prototype.visitFloat64=Bt;Mt.prototype.visitUtf8=Bt;Mt.prototype.visitBinary=Bt;Mt.prototype.visitFixedSizeBinary=Bt;Mt.prototype.visitDate=Bt;Mt.prototype.visitDateDay=Bt;Mt.prototype.visitDateMillisecond=Bt;Mt.prototype.visitTimestamp=Bt;Mt.prototype.visitTimestampSecond=Bt;Mt.prototype.visitTimestampMillisecond=Bt;Mt.prototype.visitTimestampMicrosecond=Bt;Mt.prototype.visitTimestampNanosecond=Bt;Mt.prototype.visitTime=Bt;Mt.prototype.visitTimeSecond=Bt;Mt.prototype.visitTimeMillisecond=Bt;Mt.prototype.visitTimeMicrosecond=Bt;Mt.prototype.visitTimeNanosecond=Bt;Mt.prototype.visitDecimal=Bt;Mt.prototype.visitList=Bt;Mt.prototype.visitStruct=Bt;Mt.prototype.visitUnion=Bt;Mt.prototype.visitDenseUnion=J4;Mt.prototype.visitSparseUnion=J4;Mt.prototype.visitDictionary=Bt;Mt.prototype.visitInterval=Bt;Mt.prototype.visitIntervalDayTime=Bt;Mt.prototype.visitIntervalYearMonth=Bt;Mt.prototype.visitFixedSizeList=Bt;Mt.prototype.visitMap=Bt;const Hg=new Mt;let Nt=class extends Jt{};function Rt(e){const{type:t}=e;if(e.nullCount===0&&e.stride===1&&(t.typeId===U.Timestamp||t instanceof sc&&t.bitWidth!==64||t instanceof Fp&&t.bitWidth!==64||t instanceof Rp&&t.precision!==Dr.HALF))return new pN(e.data.length,r=>{const i=e.data[r];return i.values.subarray(0,i.length)[Symbol.iterator]()});let n=0;return new pN(e.data.length,r=>{const s=e.data[r].length,o=e.slice(n,n+s);return n+=s,new uG(o)})}let uG=class{constructor(t){this.vector=t,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}};Nt.prototype.visitNull=Rt;Nt.prototype.visitBool=Rt;Nt.prototype.visitInt=Rt;Nt.prototype.visitInt8=Rt;Nt.prototype.visitInt16=Rt;Nt.prototype.visitInt32=Rt;Nt.prototype.visitInt64=Rt;Nt.prototype.visitUint8=Rt;Nt.prototype.visitUint16=Rt;Nt.prototype.visitUint32=Rt;Nt.prototype.visitUint64=Rt;Nt.prototype.visitFloat=Rt;Nt.prototype.visitFloat16=Rt;Nt.prototype.visitFloat32=Rt;Nt.prototype.visitFloat64=Rt;Nt.prototype.visitUtf8=Rt;Nt.prototype.visitBinary=Rt;Nt.prototype.visitFixedSizeBinary=Rt;Nt.prototype.visitDate=Rt;Nt.prototype.visitDateDay=Rt;Nt.prototype.visitDateMillisecond=Rt;Nt.prototype.visitTimestamp=Rt;Nt.prototype.visitTimestampSecond=Rt;Nt.prototype.visitTimestampMillisecond=Rt;Nt.prototype.visitTimestampMicrosecond=Rt;Nt.prototype.visitTimestampNanosecond=Rt;Nt.prototype.visitTime=Rt;Nt.prototype.visitTimeSecond=Rt;Nt.prototype.visitTimeMillisecond=Rt;Nt.prototype.visitTimeMicrosecond=Rt;Nt.prototype.visitTimeNanosecond=Rt;Nt.prototype.visitDecimal=Rt;Nt.prototype.visitList=Rt;Nt.prototype.visitStruct=Rt;Nt.prototype.visitUnion=Rt;Nt.prototype.visitDenseUnion=Rt;Nt.prototype.visitSparseUnion=Rt;Nt.prototype.visitDictionary=Rt;Nt.prototype.visitInterval=Rt;Nt.prototype.visitIntervalDayTime=Rt;Nt.prototype.visitIntervalYearMonth=Rt;Nt.prototype.visitFixedSizeList=Rt;Nt.prototype.visitMap=Rt;const jE=new Nt,fG=(e,t)=>e+t;class Tc extends Jt{visitNull(t,n){return 0}visitInt(t,n){return t.type.bitWidth/8}visitFloat(t,n){return t.type.ArrayType.BYTES_PER_ELEMENT}visitBool(t,n){return 1/8}visitDecimal(t,n){return t.type.bitWidth/8}visitDate(t,n){return(t.type.unit+1)*4}visitTime(t,n){return t.type.bitWidth/8}visitTimestamp(t,n){return t.type.unit===ae.SECOND?4:8}visitInterval(t,n){return(t.type.unit+1)*4}visitStruct(t,n){return t.children.reduce((r,i)=>r+Ws.visit(i,n),0)}visitFixedSizeBinary(t,n){return t.type.byteWidth}visitMap(t,n){return 8+t.children.reduce((r,i)=>r+Ws.visit(i,n),0)}visitDictionary(t,n){var r;return t.type.indices.bitWidth/8+(((r=t.dictionary)===null||r===void 0?void 0:r.getByteLength(t.values[n]))||0)}}const dG=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),hG=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),pG=({valueOffsets:e,stride:t,children:n},r)=>{const i=n[0],{[r*t]:s}=e,{[r*t+1]:o}=e,a=Ws.getVisitFn(i.type),c=i.slice(s,o-s);let l=8;for(let u=-1,f=o-s;++u<f;)l+=a(c,u);return l},yG=({stride:e,children:t},n)=>{const r=t[0],i=r.slice(n*e,e),s=Ws.getVisitFn(r.type);let o=0;for(let a=-1,c=i.length;++a<c;)o+=s(i,a);return o},mG=(e,t)=>e.type.mode===rs.Dense?t8(e,t):e8(e,t),t8=({type:e,children:t,typeIds:n,valueOffsets:r},i)=>{const s=e.typeIdToChildIndex[n[i]];return 8+Ws.visit(t[s],r[i])},e8=({children:e},t)=>4+Ws.visitMany(e,e.map(()=>t)).reduce(fG,0);Tc.prototype.visitUtf8=dG;Tc.prototype.visitBinary=hG;Tc.prototype.visitList=pG;Tc.prototype.visitFixedSizeList=yG;Tc.prototype.visitUnion=mG;Tc.prototype.visitDenseUnion=t8;Tc.prototype.visitSparseUnion=e8;const Ws=new Tc;var n8;const r8={},i8={};let an=class Gc{constructor(t){var n,r,i;const s=t[0]instanceof Gc?t.flatMap(a=>a.data):t;if(s.length===0||s.some(a=>!(a instanceof Ue)))throw new TypeError("Vector constructor expects an Array of Data instances.");const o=(n=s[0])===null||n===void 0?void 0:n.type;switch(s.length){case 0:this._offsets=[0];break;case 1:{const{get:a,set:c,indexOf:l,byteLength:u}=r8[o.typeId],f=s[0];this.isValid=d=>zE(f,d),this.get=d=>a(f,d),this.set=(d,h)=>c(f,d,h),this.indexOf=d=>l(f,d),this.getByteLength=d=>u(f,d),this._offsets=[0,f.length];break}default:Object.setPrototypeOf(this,i8[o.typeId]),this._offsets=X4(s);break}this.data=s,this.type=o,this.stride=wo(o),this.numChildren=(i=(r=o.children)===null||r===void 0?void 0:r.length)!==null&&i!==void 0?i:0,this.length=this._offsets[this._offsets.length-1]}get byteLength(){return this._byteLength===-1&&(this._byteLength=this.data.reduce((t,n)=>t+n.byteLength,0)),this._byteLength}get nullCount(){return this._nullCount===-1&&(this._nullCount=H4(this.data)),this._nullCount}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${U[this.type.typeId]}Vector`}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}includes(t,n){return this.indexOf(t,n)>0}getByteLength(t){return 0}[Symbol.iterator](){return jE.visit(this)}concat(...t){return new Gc(this.data.concat(t.flatMap(n=>n.data).flat(Number.POSITIVE_INFINITY)))}slice(t,n){return new Gc(W4(this,t,n,({data:r,_offsets:i},s,o)=>Q4(r,i,s,o)))}toJSON(){return[...this]}toArray(){const{type:t,data:n,length:r,stride:i,ArrayType:s}=this;switch(t.typeId){case U.Int:case U.Float:case U.Decimal:case U.Time:case U.Timestamp:switch(n.length){case 0:return new s;case 1:return n[0].values.subarray(0,r*i);default:return n.reduce((o,{values:a,length:c})=>(o.array.set(a.subarray(0,c*i),o.offset),o.offset+=c*i,o),{array:new s(r*i),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(t){var n;return this.getChildAt((n=this.type.children)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.numChildren?new Gc(this.data.map(({children:n})=>n[t])):null}get isMemoized(){return Ct.isDictionary(this.type)?this.data[0].dictionary.isMemoized:!1}memoize(){if(Ct.isDictionary(this.type)){const t=new yN(this.data[0].dictionary),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new Gc(n)}return new yN(this)}unmemoize(){if(Ct.isDictionary(this.type)&&this.isMemoized){const t=this.data[0].dictionary.unmemoize(),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new Gc(n)}return this}};n8=Symbol.toStringTag;an[n8]=(e=>{e.type=Ct.prototype,e.data=[],e.length=0,e.stride=1,e.numChildren=0,e._nullCount=-1,e._byteLength=-1,e._offsets=new Uint32Array([0]),e[Symbol.isConcatSpreadable]=!0;const t=Object.keys(U).map(n=>U[n]).filter(n=>typeof n=="number"&&n!==U.NONE);for(const n of t){const r=Or.getVisitFnByTypeId(n),i=Oi.getVisitFnByTypeId(n),s=Hg.getVisitFnByTypeId(n),o=Ws.getVisitFnByTypeId(n);r8[n]={get:r,set:i,indexOf:s,byteLength:o},i8[n]=Object.create(e,{isValid:{value:Tf(zE)},get:{value:Tf(Or.getVisitFnByTypeId(n))},set:{value:K4(Oi.getVisitFnByTypeId(n))},indexOf:{value:Z4(Hg.getVisitFnByTypeId(n))},getByteLength:{value:Tf(Ws.getVisitFnByTypeId(n))}})}return"Vector"})(an.prototype);let yN=class s8 extends an{constructor(t){super(t.data);const n=this.get,r=this.set,i=this.slice,s=new Array(this.length);Object.defineProperty(this,"get",{value(o){const a=s[o];if(a!==void 0)return a;const c=n.call(this,o);return s[o]=c,c}}),Object.defineProperty(this,"set",{value(o,a){r.call(this,o,a),s[o]=a}}),Object.defineProperty(this,"slice",{value:(o,a)=>new s8(i.call(this,o,a))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new an(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}},PS=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(t,n,r,i){return t.prep(8,24),t.writeInt64(i),t.pad(4),t.writeInt32(r),t.writeInt64(n),t.offset()}};const __=2,Ns=4,Mo=4,Ee=4,Ta=new Int32Array(2),mN=new Float32Array(Ta.buffer),gN=new Float64Array(Ta.buffer),zm=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;let Uo=class zS{constructor(t,n){this.low=t|0,this.high=n|0}static create(t,n){return t==0&&n==0?zS.ZERO:new zS(t,n)}toFloat64(){return(this.low>>>0)+this.high*4294967296}equals(t){return this.low==t.low&&this.high==t.high}};Uo.ZERO=new Uo(0,0);var jS;(function(e){e[e.UTF8_BYTES=1]="UTF8_BYTES",e[e.UTF16_STRING=2]="UTF16_STRING"})(jS||(jS={}));let Gf=class o8{constructor(t){this.bytes_=t,this.position_=0}static allocate(t){return new o8(new Uint8Array(t))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(t){this.position_=t}capacity(){return this.bytes_.length}readInt8(t){return this.readUint8(t)<<24>>24}readUint8(t){return this.bytes_[t]}readInt16(t){return this.readUint16(t)<<16>>16}readUint16(t){return this.bytes_[t]|this.bytes_[t+1]<<8}readInt32(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}readUint32(t){return this.readInt32(t)>>>0}readInt64(t){return new Uo(this.readInt32(t),this.readInt32(t+4))}readUint64(t){return new Uo(this.readUint32(t),this.readUint32(t+4))}readFloat32(t){return Ta[0]=this.readInt32(t),mN[0]}readFloat64(t){return Ta[zm?0:1]=this.readInt32(t),Ta[zm?1:0]=this.readInt32(t+4),gN[0]}writeInt8(t,n){this.bytes_[t]=n}writeUint8(t,n){this.bytes_[t]=n}writeInt16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeUint16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeInt32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeUint32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeInt64(t,n){this.writeInt32(t,n.low),this.writeInt32(t+4,n.high)}writeUint64(t,n){this.writeUint32(t,n.low),this.writeUint32(t+4,n.high)}writeFloat32(t,n){mN[0]=n,this.writeInt32(t,Ta[0])}writeFloat64(t,n){gN[0]=n,this.writeInt32(t,Ta[zm?0:1]),this.writeInt32(t+4,Ta[zm?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+Ns+Mo)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let t="";for(let n=0;n<Mo;n++)t+=String.fromCharCode(this.readInt8(this.position_+Ns+n));return t}__offset(t,n){const r=t-this.readInt32(t);return n<this.readInt16(r)?this.readInt16(r+n):0}__union(t,n){return t.bb_pos=n+this.readInt32(n),t.bb=this,t}__string(t,n){t+=this.readInt32(t);const r=this.readInt32(t);let i="",s=0;if(t+=Ns,n===jS.UTF8_BYTES)return this.bytes_.subarray(t,t+r);for(;s<r;){let o;const a=this.readUint8(t+s++);if(a<192)o=a;else{const c=this.readUint8(t+s++);if(a<224)o=(a&31)<<6|c&63;else{const l=this.readUint8(t+s++);if(a<240)o=(a&15)<<12|(c&63)<<6|l&63;else{const u=this.readUint8(t+s++);o=(a&7)<<18|(c&63)<<12|(l&63)<<6|u&63}}}o<65536?i+=String.fromCharCode(o):(o-=65536,i+=String.fromCharCode((o>>10)+55296,(o&1023)+56320))}return i}__union_with_string(t,n){return typeof t=="string"?this.__string(n):this.__union(t,n)}__indirect(t){return t+this.readInt32(t)}__vector(t){return t+this.readInt32(t)+Ns}__vector_len(t){return this.readInt32(t+this.readInt32(t))}__has_identifier(t){if(t.length!=Mo)throw new Error("FlatBuffers: file identifier must be length "+Mo);for(let n=0;n<Mo;n++)if(t.charCodeAt(n)!=this.readInt8(this.position()+Ns+n))return!1;return!0}createLong(t,n){return Uo.create(t,n)}createScalarList(t,n){const r=[];for(let i=0;i<n;++i)t(i)!==null&&r.push(t(i));return r}createObjList(t,n){const r=[];for(let i=0;i<n;++i){const s=t(i);s!==null&&r.push(s.unpack())}return r}},a8=class c8{constructor(t){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null;let n;t?n=t:n=1024,this.bb=Gf.allocate(n),this.space=n}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(t){this.force_defaults=t}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(t,n){t>this.minalign&&(this.minalign=t);const r=~(this.bb.capacity()-this.space+n)+1&t-1;for(;this.space<r+t+n;){const i=this.bb.capacity();this.bb=c8.growByteBuffer(this.bb),this.space+=this.bb.capacity()-i}this.pad(r)}pad(t){for(let n=0;n<t;n++)this.bb.writeInt8(--this.space,0)}writeInt8(t){this.bb.writeInt8(this.space-=1,t)}writeInt16(t){this.bb.writeInt16(this.space-=2,t)}writeInt32(t){this.bb.writeInt32(this.space-=4,t)}writeInt64(t){this.bb.writeInt64(this.space-=8,t)}writeFloat32(t){this.bb.writeFloat32(this.space-=4,t)}writeFloat64(t){this.bb.writeFloat64(this.space-=8,t)}addInt8(t){this.prep(1,0),this.writeInt8(t)}addInt16(t){this.prep(2,0),this.writeInt16(t)}addInt32(t){this.prep(4,0),this.writeInt32(t)}addInt64(t){this.prep(8,0),this.writeInt64(t)}addFloat32(t){this.prep(4,0),this.writeFloat32(t)}addFloat64(t){this.prep(8,0),this.writeFloat64(t)}addFieldInt8(t,n,r){(this.force_defaults||n!=r)&&(this.addInt8(n),this.slot(t))}addFieldInt16(t,n,r){(this.force_defaults||n!=r)&&(this.addInt16(n),this.slot(t))}addFieldInt32(t,n,r){(this.force_defaults||n!=r)&&(this.addInt32(n),this.slot(t))}addFieldInt64(t,n,r){(this.force_defaults||!n.equals(r))&&(this.addInt64(n),this.slot(t))}addFieldFloat32(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat32(n),this.slot(t))}addFieldFloat64(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat64(n),this.slot(t))}addFieldOffset(t,n,r){(this.force_defaults||n!=r)&&(this.addOffset(n),this.slot(t))}addFieldStruct(t,n,r){n!=r&&(this.nested(n),this.slot(t))}nested(t){if(t!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")}slot(t){this.vtable!==null&&(this.vtable[t]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(t){const n=t.capacity();if(n&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const r=n<<1,i=Gf.allocate(r);return i.setPosition(r-n),i.bytes().set(t.bytes(),r-n),i}addOffset(t){this.prep(Ns,0),this.writeInt32(this.offset()-t+Ns)}startObject(t){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=t;for(let n=0;n<t;n++)this.vtable[n]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const t=this.offset();let n=this.vtable_in_use-1;for(;n>=0&&this.vtable[n]==0;n--);const r=n+1;for(;n>=0;n--)this.addInt16(this.vtable[n]!=0?t-this.vtable[n]:0);const i=2;this.addInt16(t-this.object_start);const s=(r+i)*__;this.addInt16(s);let o=0;const a=this.space;t:for(n=0;n<this.vtables.length;n++){const c=this.bb.capacity()-this.vtables[n];if(s==this.bb.readInt16(c)){for(let l=__;l<s;l+=__)if(this.bb.readInt16(a+l)!=this.bb.readInt16(c+l))continue t;o=this.vtables[n];break}}return o?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,o-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t}finish(t,n,r){const i=r?Ee:0;if(n){const s=n;if(this.prep(this.minalign,Ns+Mo+i),s.length!=Mo)throw new Error("FlatBuffers: file identifier must be length "+Mo);for(let o=Mo-1;o>=0;o--)this.writeInt8(s.charCodeAt(o))}this.prep(this.minalign,Ns+i),this.addOffset(t),i&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(t,n){this.finish(t,n,!0)}requiredField(t,n){const r=this.bb.capacity()-t,i=r-this.bb.readInt32(r);if(!(this.bb.readInt16(i+n)!=0))throw new Error("FlatBuffers: field "+n+" must be set")}startVector(t,n,r){this.notNested(),this.vector_num_elems=n,this.prep(Ns,t*n),this.prep(r,t*n)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(t){if(!t)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(t))return this.string_maps.get(t);const n=this.createString(t);return this.string_maps.set(t,n),n}createString(t){if(!t)return 0;let n;if(t instanceof Uint8Array)n=t;else{n=[];let r=0;for(;r<t.length;){let i;const s=t.charCodeAt(r++);if(s<55296||s>=56320)i=s;else{const o=t.charCodeAt(r++);i=(s<<10)+o+-56613888}i<128?n.push(i):(i<2048?n.push(i>>6&31|192):(i<65536?n.push(i>>12&15|224):n.push(i>>18&7|240,i>>12&63|128),n.push(i>>6&63|128)),n.push(i&63|128))}}this.addInt8(0),this.startVector(1,n.length,1),this.bb.setPosition(this.space-=n.length);for(let r=0,i=this.space,s=this.bb.bytes();r<n.length;r++)s[i++]=n[r];return this.endVector()}createLong(t,n){return Uo.create(t,n)}createObjectOffset(t){return t===null?0:typeof t=="string"?this.createString(t):t.pack(this)}createObjectOffsetList(t){const n=[];for(let r=0;r<t.length;++r){const i=t[r];if(i!==null)n.push(this.createObjectOffset(i));else throw new Error("FlatBuffers: Argument for createObjectOffsetList cannot contain null.")}return n}createStructOffsetList(t,n){return n(this,t.length),this.createObjectOffsetList(t),this.endVector()}},xi=class Hc{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsKeyValue(t,n){return(n||new Hc).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsKeyValue(t,n){return t.setPosition(t.position()+Ee),(n||new Hc).__init(t.readInt32(t.position())+t.position(),t)}key(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}value(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startKeyValue(t){t.startObject(2)}static addKey(t,n){t.addFieldOffset(0,n,0)}static addValue(t,n){t.addFieldOffset(1,n,0)}static endKeyValue(t){return t.endObject()}static createKeyValue(t,n,r){return Hc.startKeyValue(t),Hc.addKey(t,n),Hc.addValue(t,r),Hc.endKeyValue(t)}};var Hf;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(Hf||(Hf={}));var Xf;(function(e){e[e.Little=0]="Little",e[e.Big=1]="Big"})(Xf||(Xf={}));var Xg;(function(e){e[e.DenseArray=0]="DenseArray"})(Xg||(Xg={}));let sf=class Xc{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInt(t,n){return(n||new Xc).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInt(t,n){return t.setPosition(t.position()+Ee),(n||new Xc).__init(t.readInt32(t.position())+t.position(),t)}bitWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}isSigned(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startInt(t){t.startObject(2)}static addBitWidth(t,n){t.addFieldInt32(0,n,0)}static addIsSigned(t,n){t.addFieldInt8(1,+n,0)}static endInt(t){return t.endObject()}static createInt(t,n,r){return Xc.startInt(t),Xc.addBitWidth(t,n),Xc.addIsSigned(t,r),Xc.endInt(t)}},Eu=class VS{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryEncoding(t,n){return(n||new VS).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryEncoding(t,n){return t.setPosition(t.position()+Ee),(n||new VS).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}indexType(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new sf).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isOrdered(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}dictionaryKind(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt16(this.bb_pos+t):Xg.DenseArray}static startDictionaryEncoding(t){t.startObject(4)}static addId(t,n){t.addFieldInt64(0,n,t.createLong(0,0))}static addIndexType(t,n){t.addFieldOffset(1,n,0)}static addIsOrdered(t,n){t.addFieldInt8(2,+n,0)}static addDictionaryKind(t,n){t.addFieldInt16(3,n,Xg.DenseArray)}static endDictionaryEncoding(t){return t.endObject()}},vN=class _h{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBinary(t,n){return(n||new _h).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBinary(t,n){return t.setPosition(t.position()+Ee),(n||new _h).__init(t.readInt32(t.position())+t.position(),t)}static startBinary(t){t.startObject(0)}static endBinary(t){return t.endObject()}static createBinary(t){return _h.startBinary(t),_h.endBinary(t)}},bN=class Sh{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBool(t,n){return(n||new Sh).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBool(t,n){return t.setPosition(t.position()+Ee),(n||new Sh).__init(t.readInt32(t.position())+t.position(),t)}static startBool(t){t.startObject(0)}static endBool(t){return t.endObject()}static createBool(t){return Sh.startBool(t),Sh.endBool(t)}};var Qg;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(Qg||(Qg={}));let L0=class Tu{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDate(t,n){return(n||new Tu).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDate(t,n){return t.setPosition(t.position()+Ee),(n||new Tu).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Qg.MILLISECOND}static startDate(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,Qg.MILLISECOND)}static endDate(t){return t.endObject()}static createDate(t,n){return Tu.startDate(t),Tu.addUnit(t,n),Tu.endDate(t)}},Au=class _a{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDecimal(t,n){return(n||new _a).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDecimal(t,n){return t.setPosition(t.position()+Ee),(n||new _a).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}scale(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}bitWidth(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt32(this.bb_pos+t):128}static startDecimal(t){t.startObject(3)}static addPrecision(t,n){t.addFieldInt32(0,n,0)}static addScale(t,n){t.addFieldInt32(1,n,0)}static addBitWidth(t,n){t.addFieldInt32(2,n,128)}static endDecimal(t){return t.endObject()}static createDecimal(t,n,r,i){return _a.startDecimal(t),_a.addPrecision(t,n),_a.addScale(t,r),_a.addBitWidth(t,i),_a.endDecimal(t)}};var Qf;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(Qf||(Qf={}));let B0=class Mu{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeBinary(t,n){return(n||new Mu).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeBinary(t,n){return t.setPosition(t.position()+Ee),(n||new Mu).__init(t.readInt32(t.position())+t.position(),t)}byteWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeBinary(t){t.startObject(1)}static addByteWidth(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeBinary(t){return t.endObject()}static createFixedSizeBinary(t,n){return Mu.startFixedSizeBinary(t),Mu.addByteWidth(t,n),Mu.endFixedSizeBinary(t)}},C0=class Nu{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeList(t,n){return(n||new Nu).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeList(t,n){return t.setPosition(t.position()+Ee),(n||new Nu).__init(t.readInt32(t.position())+t.position(),t)}listSize(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeList(t){t.startObject(1)}static addListSize(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeList(t){return t.endObject()}static createFixedSizeList(t,n){return Nu.startFixedSizeList(t),Nu.addListSize(t,n),Nu.endFixedSizeList(t)}};var Kg;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(Kg||(Kg={}));let U0=class $u{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFloatingPoint(t,n){return(n||new $u).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFloatingPoint(t,n){return t.setPosition(t.position()+Ee),(n||new $u).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Kg.HALF}static startFloatingPoint(t){t.startObject(1)}static addPrecision(t,n){t.addFieldInt16(0,n,Kg.HALF)}static endFloatingPoint(t){return t.endObject()}static createFloatingPoint(t,n){return $u.startFloatingPoint(t),$u.addPrecision(t,n),$u.endFloatingPoint(t)}};var Zg;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(Zg||(Zg={}));let P0=class ku{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInterval(t,n){return(n||new ku).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInterval(t,n){return t.setPosition(t.position()+Ee),(n||new ku).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Zg.YEAR_MONTH}static startInterval(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,Zg.YEAR_MONTH)}static endInterval(t){return t.endObject()}static createInterval(t,n){return ku.startInterval(t),ku.addUnit(t,n),ku.endInterval(t)}},wN=class xh{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsList(t,n){return(n||new xh).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsList(t,n){return t.setPosition(t.position()+Ee),(n||new xh).__init(t.readInt32(t.position())+t.position(),t)}static startList(t){t.startObject(0)}static endList(t){return t.endObject()}static createList(t){return xh.startList(t),xh.endList(t)}},z0=class Du{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMap(t,n){return(n||new Du).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMap(t,n){return t.setPosition(t.position()+Ee),(n||new Du).__init(t.readInt32(t.position())+t.position(),t)}keysSorted(){const t=this.bb.__offset(this.bb_pos,4);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startMap(t){t.startObject(1)}static addKeysSorted(t,n){t.addFieldInt8(0,+n,0)}static endMap(t){return t.endObject()}static createMap(t,n){return Du.startMap(t),Du.addKeysSorted(t,n),Du.endMap(t)}},_N=class Ih{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsNull(t,n){return(n||new Ih).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsNull(t,n){return t.setPosition(t.position()+Ee),(n||new Ih).__init(t.readInt32(t.position())+t.position(),t)}static startNull(t){t.startObject(0)}static endNull(t){return t.endObject()}static createNull(t){return Ih.startNull(t),Ih.endNull(t)}},SN=class Eh{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsStruct_(t,n){return(n||new Eh).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsStruct_(t,n){return t.setPosition(t.position()+Ee),(n||new Eh).__init(t.readInt32(t.position())+t.position(),t)}static startStruct_(t){t.startObject(0)}static endStruct_(t){return t.endObject()}static createStruct_(t){return Eh.startStruct_(t),Eh.endStruct_(t)}},Th=class Qc{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTime(t,n){return(n||new Qc).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTime(t,n){return t.setPosition(t.position()+Ee),(n||new Qc).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Qf.MILLISECOND}bitWidth(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):32}static startTime(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,Qf.MILLISECOND)}static addBitWidth(t,n){t.addFieldInt32(1,n,32)}static endTime(t){return t.endObject()}static createTime(t,n,r){return Qc.startTime(t),Qc.addUnit(t,n),Qc.addBitWidth(t,r),Qc.endTime(t)}},Ah=class Kc{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTimestamp(t,n){return(n||new Kc).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTimestamp(t,n){return t.setPosition(t.position()+Ee),(n||new Kc).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Qf.SECOND}timezone(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startTimestamp(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,Qf.SECOND)}static addTimezone(t,n){t.addFieldOffset(1,n,0)}static endTimestamp(t){return t.endObject()}static createTimestamp(t,n,r){return Kc.startTimestamp(t),Kc.addUnit(t,n),Kc.addTimezone(t,r),Kc.endTimestamp(t)}};var Jg;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(Jg||(Jg={}));let Zc=class Jc{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUnion(t,n){return(n||new Jc).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUnion(t,n){return t.setPosition(t.position()+Ee),(n||new Jc).__init(t.readInt32(t.position())+t.position(),t)}mode(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Jg.Sparse}typeIds(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readInt32(this.bb.__vector(this.bb_pos+n)+t*4):0}typeIdsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}typeIdsArray(){const t=this.bb.__offset(this.bb_pos,6);return t?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startUnion(t){t.startObject(2)}static addMode(t,n){t.addFieldInt16(0,n,Jg.Sparse)}static addTypeIds(t,n){t.addFieldOffset(1,n,0)}static createTypeIdsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addInt32(n[r]);return t.endVector()}static startTypeIdsVector(t,n){t.startVector(4,n,4)}static endUnion(t){return t.endObject()}static createUnion(t,n,r){return Jc.startUnion(t),Jc.addMode(t,n),Jc.addTypeIds(t,r),Jc.endUnion(t)}},xN=class Mh{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUtf8(t,n){return(n||new Mh).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUtf8(t,n){return t.setPosition(t.position()+Ee),(n||new Mh).__init(t.readInt32(t.position())+t.position(),t)}static startUtf8(t){t.startObject(0)}static endUtf8(t){return t.endObject()}static createUtf8(t){return Mh.startUtf8(t),Mh.endUtf8(t)}};var Pe;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.FloatingPoint=3]="FloatingPoint",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct_=13]="Struct_",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.LargeBinary=19]="LargeBinary",e[e.LargeUtf8=20]="LargeUtf8",e[e.LargeList=21]="LargeList"})(Pe||(Pe={}));let hi=class j0{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsField(t,n){return(n||new j0).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsField(t,n){return t.setPosition(t.position()+Ee),(n||new j0).__init(t.readInt32(t.position())+t.position(),t)}name(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}nullable(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}typeType(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):Pe.NONE}type(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.__union(t,this.bb_pos+n):null}dictionary(t){const n=this.bb.__offset(this.bb_pos,12);return n?(t||new Eu).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}children(t,n){const r=this.bb.__offset(this.bb_pos,14);return r?(n||new j0).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}childrenLength(){const t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,16);return r?(n||new xi).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}static startField(t){t.startObject(7)}static addName(t,n){t.addFieldOffset(0,n,0)}static addNullable(t,n){t.addFieldInt8(1,+n,0)}static addTypeType(t,n){t.addFieldInt8(2,n,Pe.NONE)}static addType(t,n){t.addFieldOffset(3,n,0)}static addDictionary(t,n){t.addFieldOffset(4,n,0)}static addChildren(t,n){t.addFieldOffset(5,n,0)}static createChildrenVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startChildrenVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(6,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endField(t){return t.endObject()}},Ss=class fo{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsSchema(t,n){return(n||new fo).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSchema(t,n){return t.setPosition(t.position()+Ee),(n||new fo).__init(t.readInt32(t.position())+t.position(),t)}endianness(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Xf.Little}fields(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new hi).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}fieldsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new xi).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}features(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.readInt64(this.bb.__vector(this.bb_pos+n)+t*8):this.bb.createLong(0,0)}featuresLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}static startSchema(t){t.startObject(4)}static addEndianness(t,n){t.addFieldInt16(0,n,Xf.Little)}static addFields(t,n){t.addFieldOffset(1,n,0)}static createFieldsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startFieldsVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(2,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static addFeatures(t,n){t.addFieldOffset(3,n,0)}static createFeaturesVector(t,n){t.startVector(8,n.length,8);for(let r=n.length-1;r>=0;r--)t.addInt64(n[r]);return t.endVector()}static startFeaturesVector(t,n){t.startVector(8,n,8)}static endSchema(t){return t.endObject()}static finishSchemaBuffer(t,n){t.finish(n)}static finishSizePrefixedSchemaBuffer(t,n){t.finish(n,void 0,!0)}static createSchema(t,n,r,i,s){return fo.startSchema(t),fo.addEndianness(t,n),fo.addFields(t,r),fo.addCustomMetadata(t,i),fo.addFeatures(t,s),fo.endSchema(t)}},ms=class YS{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFooter(t,n){return(n||new YS).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFooter(t,n){return t.setPosition(t.position()+Ee),(n||new YS).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Hf.V1}schema(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new Ss).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}dictionaries(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new PS).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}dictionariesLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}recordBatches(t,n){const r=this.bb.__offset(this.bb_pos,10);return r?(n||new PS).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}recordBatchesLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new xi).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startFooter(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,Hf.V1)}static addSchema(t,n){t.addFieldOffset(1,n,0)}static addDictionaries(t,n){t.addFieldOffset(2,n,0)}static startDictionariesVector(t,n){t.startVector(24,n,8)}static addRecordBatches(t,n){t.addFieldOffset(3,n,0)}static startRecordBatchesVector(t,n){t.startVector(24,n,8)}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endFooter(t){return t.endObject()}static finishFooterBuffer(t,n){t.finish(n)}static finishSizePrefixedFooterBuffer(t,n){t.finish(n,void 0,!0)}},je=class tl{constructor(t=[],n,r){this.fields=t||[],this.metadata=n||new Map,r||(r=WS(t)),this.dictionaries=r}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(t=>t.name)}toString(){return`Schema<{ ${this.fields.map((t,n)=>`${n}: ${t}`).join(", ")} }>`}select(t){const n=new Set(t),r=this.fields.filter(i=>n.has(i.name));return new tl(r,this.metadata)}selectAt(t){const n=t.map(r=>this.fields[r]).filter(Boolean);return new tl(n,this.metadata)}assign(...t){const n=t[0]instanceof tl?t[0]:Array.isArray(t[0])?new tl(t[0]):new tl(t),r=[...this.fields],i=jm(jm(new Map,this.metadata),n.metadata),s=n.fields.filter(a=>{const c=r.findIndex(l=>l.name===a.name);return~c?(r[c]=a.clone({metadata:jm(jm(new Map,r[c].metadata),a.metadata)}))&&!1:!0}),o=WS(s,new Map);return new tl([...r,...s],i,new Map([...this.dictionaries,...o]))}};je.prototype.fields=null;je.prototype.metadata=null;je.prototype.dictionaries=null;let nn=class qS{constructor(t,n,r=!1,i){this.name=t,this.type=n,this.nullable=r,this.metadata=i||new Map}static new(...t){let[n,r,i,s]=t;return t[0]&&typeof t[0]=="object"&&({name:n}=t[0],r===void 0&&(r=t[0].type),i===void 0&&(i=t[0].nullable),s===void 0&&(s=t[0].metadata)),new qS(`${n}`,r,i,s)}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...t){let[n,r,i,s]=t;return!t[0]||typeof t[0]!="object"?[n=this.name,r=this.type,i=this.nullable,s=this.metadata]=t:{name:n=this.name,type:r=this.type,nullable:i=this.nullable,metadata:s=this.metadata}=t[0],qS.new(n,r,i,s)}};nn.prototype.type=null;nn.prototype.name=null;nn.prototype.nullable=null;nn.prototype.metadata=null;function jm(e,t){return new Map([...e||new Map,...t||new Map])}function WS(e,t=new Map){for(let n=-1,r=e.length;++n<r;){const s=e[n].type;if(Ct.isDictionary(s)){if(!t.has(s.id))t.set(s.id,s.dictionary);else if(t.get(s.id)!==s.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}s.children&&s.children.length>0&&WS(s.children,t)}return t}var IN=Uo,gG=a8,vG=Gf;let VE=class{constructor(t,n=_i.V4,r,i){this.schema=t,this.version=n,r&&(this._recordBatches=r),i&&(this._dictionaryBatches=i)}static decode(t){t=new vG(fe(t));const n=ms.getRootAsFooter(t),r=je.decode(n.schema());return new bG(r,n)}static encode(t){const n=new gG,r=je.encode(n,t.schema);ms.startRecordBatchesVector(n,t.numRecordBatches);for(const o of[...t.recordBatches()].slice().reverse())t1.encode(n,o);const i=n.endVector();ms.startDictionariesVector(n,t.numDictionaries);for(const o of[...t.dictionaryBatches()].slice().reverse())t1.encode(n,o);const s=n.endVector();return ms.startFooter(n),ms.addSchema(n,r),ms.addVersion(n,_i.V4),ms.addRecordBatches(n,i),ms.addDictionaries(n,s),ms.finishFooterBuffer(n,ms.endFooter(n)),n.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}*recordBatches(){for(let t,n=-1,r=this.numRecordBatches;++n<r;)(t=this.getRecordBatch(n))&&(yield t)}*dictionaryBatches(){for(let t,n=-1,r=this.numDictionaries;++n<r;)(t=this.getDictionaryBatch(n))&&(yield t)}getRecordBatch(t){return t>=0&&t<this.numRecordBatches&&this._recordBatches[t]||null}getDictionaryBatch(t){return t>=0&&t<this.numDictionaries&&this._dictionaryBatches[t]||null}},bG=class extends VE{constructor(t,n){super(t,n.version()),this._footer=n}get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}getRecordBatch(t){if(t>=0&&t<this.numRecordBatches){const n=this._footer.recordBatches(t);if(n)return t1.decode(n)}return null}getDictionaryBatch(t){if(t>=0&&t<this.numDictionaries){const n=this._footer.dictionaries(t);if(n)return t1.decode(n)}return null}},t1=class l8{constructor(t,n,r){this.metaDataLength=t,this.offset=typeof r=="number"?r:r.low,this.bodyLength=typeof n=="number"?n:n.low}static decode(t){return new l8(t.metaDataLength(),t.bodyLength(),t.offset())}static encode(t,n){const{metaDataLength:r}=n,i=new IN(n.offset,0),s=new IN(n.bodyLength,0);return PS.createBlock(t,i,r,s)}};const Ye=Object.freeze({done:!0,value:void 0});let EN=class{constructor(t){this._json=t}get schema(){return this._json.schema}get batches(){return this._json.batches||[]}get dictionaries(){return this._json.dictionaries||[]}},u8=class{tee(){return this._getDOMStream().tee()}pipe(t,n){return this._getNodeStream().pipe(t,n)}pipeTo(t,n){return this._getDOMStream().pipeTo(t,n)}pipeThrough(t,n){return this._getDOMStream().pipeThrough(t,n)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}},wG=class extends u8{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(t=>this._closedPromiseResolve=t)}get closed(){return this._closedPromise}cancel(t){return H(this,void 0,void 0,function*(){yield this.return(t)})}write(t){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(t):this.resolvers.shift().resolve({done:!1,value:t}))}abort(t){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:t}:this.resolvers.shift().reject({done:!0,value:t}))}close(){if(this._closedPromiseResolve){const{resolvers:t}=this;for(;t.length>0;)t.shift().resolve(Ye);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(t){return yi.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,t)}toNodeStream(t){return yi.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,t)}throw(t){return H(this,void 0,void 0,function*(){return yield this.abort(t),Ye})}return(t){return H(this,void 0,void 0,function*(){return yield this.close(),Ye})}read(t){return H(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return H(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(...t){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((n,r)=>{this.resolvers.push({resolve:n,reject:r})}):Promise.resolve(Ye)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}},_G=class extends wG{write(t){if((t=fe(t)).byteLength>0)return super.write(t)}toString(t=!1){return t?DS(this.toUint8Array(!0)):this.toUint8Array(!1).then(DS)}toUint8Array(t=!1){return t?qs(this._values)[0]:H(this,void 0,void 0,function*(){var n,r;const i=[];let s=0;try{for(var o=Kr(this),a;a=yield o.next(),!a.done;){const c=a.value;i.push(c),s+=c.byteLength}}catch(c){n={error:c}}finally{try{a&&!a.done&&(r=o.return)&&(yield r.call(o))}finally{if(n)throw n.error}}return qs(i,s)[0]})}},e1=class{constructor(t){t&&(this.source=new SG(yi.fromIterable(t)))}[Symbol.iterator](){return this}next(t){return this.source.next(t)}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}peek(t){return this.source.peek(t)}read(t){return this.source.read(t)}},n1=class f8{constructor(t){t instanceof f8?this.source=t.source:t instanceof _G?this.source=new jc(yi.fromAsyncIterable(t)):jR(t)?this.source=new jc(yi.fromNodeStream(t)):DE(t)?this.source=new jc(yi.fromDOMStream(t)):PR(t)?this.source=new jc(yi.fromDOMStream(t.body)):xb(t)?this.source=new jc(yi.fromIterable(t)):$p(t)?this.source=new jc(yi.fromAsyncIterable(t)):kE(t)&&(this.source=new jc(yi.fromAsyncIterable(t)))}[Symbol.asyncIterator](){return this}next(t){return this.source.next(t)}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}get closed(){return this.source.closed}cancel(t){return this.source.cancel(t)}peek(t){return this.source.peek(t)}read(t){return this.source.read(t)}},SG=class{constructor(t){this.source=t}cancel(t){this.return(t)}peek(t){return this.next(t,"peek").value}read(t){return this.next(t,"read").value}next(t,n="read"){return this.source.next({cmd:n,size:t})}throw(t){return Object.create(this.source.throw&&this.source.throw(t)||Ye)}return(t){return Object.create(this.source.return&&this.source.return(t)||Ye)}},jc=class{constructor(t){this.source=t,this._closedPromise=new Promise(n=>this._closedPromiseResolve=n)}cancel(t){return H(this,void 0,void 0,function*(){yield this.return(t)})}get closed(){return this._closedPromise}read(t){return H(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return H(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(t,n="read"){return H(this,void 0,void 0,function*(){return yield this.source.next({cmd:n,size:t})})}throw(t){return H(this,void 0,void 0,function*(){const n=this.source.throw&&(yield this.source.throw(t))||Ye;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(n)})}return(t){return H(this,void 0,void 0,function*(){const n=this.source.return&&(yield this.source.return(t))||Ye;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(n)})}},TN=class extends e1{constructor(t,n){super(),this.position=0,this.buffer=fe(t),this.size=typeof n>"u"?this.buffer.byteLength:n}readInt32(t){const{buffer:n,byteOffset:r}=this.readAt(t,4);return new DataView(n,r).getInt32(0,!0)}seek(t){return this.position=Math.min(t,this.size),t<this.size}read(t){const{buffer:n,size:r,position:i}=this;return n&&i<r?(typeof t!="number"&&(t=Number.POSITIVE_INFINITY),this.position=Math.min(r,i+Math.min(r-i,t)),n.subarray(i,this.position)):null}readAt(t,n){const r=this.buffer,i=Math.min(this.size,t+n);return r?r.subarray(t,i):new Uint8Array(n)}close(){this.buffer&&(this.buffer=null)}throw(t){return this.close(),{done:!0,value:t}}return(t){return this.close(),{done:!0,value:t}}},r1=class extends n1{constructor(t,n){super(),this.position=0,this._handle=t,typeof n=="number"?this.size=n:this._pending=H(this,void 0,void 0,function*(){this.size=(yield t.stat()).size,delete this._pending})}readInt32(t){return H(this,void 0,void 0,function*(){const{buffer:n,byteOffset:r}=yield this.readAt(t,4);return new DataView(n,r).getInt32(0,!0)})}seek(t){return H(this,void 0,void 0,function*(){return this._pending&&(yield this._pending),this.position=Math.min(t,this.size),t<this.size})}read(t){return H(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:n,size:r,position:i}=this;if(n&&i<r){typeof t!="number"&&(t=Number.POSITIVE_INFINITY);let s=i,o=0,a=0;const c=Math.min(r,s+Math.min(r-s,t)),l=new Uint8Array(Math.max(0,(this.position=c)-s));for(;(s+=a)<c&&(o+=a)<l.byteLength;)({bytesRead:a}=yield n.read(l,o,l.byteLength-o,s));return l}return null})}readAt(t,n){return H(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:r,size:i}=this;if(r&&t+n<i){const s=Math.min(i,t+n),o=new Uint8Array(s-t);return(yield r.read(o,0,n,t)).buffer}return new Uint8Array(n)})}close(){return H(this,void 0,void 0,function*(){const t=this._handle;this._handle=null,t&&(yield t.close())})}throw(t){return H(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:t}})}return(t){return H(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:t}})}};const xG=65536;function of(e){return e<0&&(e=4294967295+e+1),`0x${e.toString(16)}`}const Kf=8,YE=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8];let d8=class{constructor(t){this.buffer=t}high(){return this.buffer[1]}low(){return this.buffer[0]}_times(t){const n=new Uint32Array([this.buffer[1]>>>16,this.buffer[1]&65535,this.buffer[0]>>>16,this.buffer[0]&65535]),r=new Uint32Array([t.buffer[1]>>>16,t.buffer[1]&65535,t.buffer[0]>>>16,t.buffer[0]&65535]);let i=n[3]*r[3];this.buffer[0]=i&65535;let s=i>>>16;return i=n[2]*r[3],s+=i,i=n[3]*r[2]>>>0,s+=i,this.buffer[0]+=s<<16,this.buffer[1]=s>>>0<i?xG:0,this.buffer[1]+=s>>>16,this.buffer[1]+=n[1]*r[3]+n[2]*r[2]+n[3]*r[1],this.buffer[1]+=n[0]*r[3]+n[1]*r[2]+n[2]*r[1]+n[3]*r[0]<<16,this}_plus(t){const n=this.buffer[0]+t.buffer[0]>>>0;this.buffer[1]+=t.buffer[1],n<this.buffer[0]>>>0&&++this.buffer[1],this.buffer[0]=n}lessThan(t){return this.buffer[1]<t.buffer[1]||this.buffer[1]===t.buffer[1]&&this.buffer[0]<t.buffer[0]}equals(t){return this.buffer[1]===t.buffer[1]&&this.buffer[0]==t.buffer[0]}greaterThan(t){return t.lessThan(this)}hex(){return`${of(this.buffer[1])} ${of(this.buffer[0])}`}},fn=class ho extends d8{times(t){return this._times(t),this}plus(t){return this._plus(t),this}static from(t,n=new Uint32Array(2)){return ho.fromString(typeof t=="string"?t:t.toString(),n)}static fromNumber(t,n=new Uint32Array(2)){return ho.fromString(t.toString(),n)}static fromString(t,n=new Uint32Array(2)){const r=t.length,i=new ho(n);for(let s=0;s<r;){const o=Kf<r-s?Kf:r-s,a=new ho(new Uint32Array([Number.parseInt(t.slice(s,s+o),10),0])),c=new ho(new Uint32Array([YE[o],0]));i.times(c),i.plus(a),s+=o}return i}static convertArray(t){const n=new Uint32Array(t.length*2);for(let r=-1,i=t.length;++r<i;)ho.from(t[r],new Uint32Array(n.buffer,n.byteOffset+2*r*4,2));return n}static multiply(t,n){return new ho(new Uint32Array(t.buffer)).times(n)}static add(t,n){return new ho(new Uint32Array(t.buffer)).plus(n)}},ep=class po extends d8{negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[0]==0&&++this.buffer[1],this}times(t){return this._times(t),this}plus(t){return this._plus(t),this}lessThan(t){const n=this.buffer[1]<<0,r=t.buffer[1]<<0;return n<r||n===r&&this.buffer[0]<t.buffer[0]}static from(t,n=new Uint32Array(2)){return po.fromString(typeof t=="string"?t:t.toString(),n)}static fromNumber(t,n=new Uint32Array(2)){return po.fromString(t.toString(),n)}static fromString(t,n=new Uint32Array(2)){const r=t.startsWith("-"),i=t.length,s=new po(n);for(let o=r?1:0;o<i;){const a=Kf<i-o?Kf:i-o,c=new po(new Uint32Array([Number.parseInt(t.slice(o,o+a),10),0])),l=new po(new Uint32Array([YE[a],0]));s.times(l),s.plus(c),o+=a}return r?s.negate():s}static convertArray(t){const n=new Uint32Array(t.length*2);for(let r=-1,i=t.length;++r<i;)po.from(t[r],new Uint32Array(n.buffer,n.byteOffset+2*r*4,2));return n}static multiply(t,n){return new po(new Uint32Array(t.buffer)).times(n)}static add(t,n){return new po(new Uint32Array(t.buffer)).plus(n)}},IG=class yo{constructor(t){this.buffer=t}high(){return new ep(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2))}low(){return new ep(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset,2))}negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[2]=~this.buffer[2],this.buffer[3]=~this.buffer[3],this.buffer[0]==0&&++this.buffer[1],this.buffer[1]==0&&++this.buffer[2],this.buffer[2]==0&&++this.buffer[3],this}times(t){const n=new fn(new Uint32Array([this.buffer[3],0])),r=new fn(new Uint32Array([this.buffer[2],0])),i=new fn(new Uint32Array([this.buffer[1],0])),s=new fn(new Uint32Array([this.buffer[0],0])),o=new fn(new Uint32Array([t.buffer[3],0])),a=new fn(new Uint32Array([t.buffer[2],0])),c=new fn(new Uint32Array([t.buffer[1],0])),l=new fn(new Uint32Array([t.buffer[0],0]));let u=fn.multiply(s,l);this.buffer[0]=u.low();const f=new fn(new Uint32Array([u.high(),0]));return u=fn.multiply(i,l),f.plus(u),u=fn.multiply(s,c),f.plus(u),this.buffer[1]=f.low(),this.buffer[3]=f.lessThan(u)?1:0,this.buffer[2]=f.high(),new fn(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2)).plus(fn.multiply(r,l)).plus(fn.multiply(i,c)).plus(fn.multiply(s,a)),this.buffer[3]+=fn.multiply(n,l).plus(fn.multiply(r,c)).plus(fn.multiply(i,a)).plus(fn.multiply(s,o)).low(),this}plus(t){const n=new Uint32Array(4);return n[3]=this.buffer[3]+t.buffer[3]>>>0,n[2]=this.buffer[2]+t.buffer[2]>>>0,n[1]=this.buffer[1]+t.buffer[1]>>>0,n[0]=this.buffer[0]+t.buffer[0]>>>0,n[0]<this.buffer[0]>>>0&&++n[1],n[1]<this.buffer[1]>>>0&&++n[2],n[2]<this.buffer[2]>>>0&&++n[3],this.buffer[3]=n[3],this.buffer[2]=n[2],this.buffer[1]=n[1],this.buffer[0]=n[0],this}hex(){return`${of(this.buffer[3])} ${of(this.buffer[2])} ${of(this.buffer[1])} ${of(this.buffer[0])}`}static multiply(t,n){return new yo(new Uint32Array(t.buffer)).times(n)}static add(t,n){return new yo(new Uint32Array(t.buffer)).plus(n)}static from(t,n=new Uint32Array(4)){return yo.fromString(typeof t=="string"?t:t.toString(),n)}static fromNumber(t,n=new Uint32Array(4)){return yo.fromString(t.toString(),n)}static fromString(t,n=new Uint32Array(4)){const r=t.startsWith("-"),i=t.length,s=new yo(n);for(let o=r?1:0;o<i;){const a=Kf<i-o?Kf:i-o,c=new yo(new Uint32Array([Number.parseInt(t.slice(o,o+a),10),0,0,0])),l=new yo(new Uint32Array([YE[a],0,0,0]));s.times(l),s.plus(c),o+=a}return r?s.negate():s}static convertArray(t){const n=new Uint32Array(t.length*4);for(let r=-1,i=t.length;++r<i;)yo.from(t[r],new Uint32Array(n.buffer,n.byteOffset+4*4*r,4));return n}},h8=class extends Jt{constructor(t,n,r,i){super(),this.nodesIndex=-1,this.buffersIndex=-1,this.bytes=t,this.nodes=n,this.buffers=r,this.dictionaries=i}visit(t){return super.visit(t instanceof nn?t.type:t)}visitNull(t,{length:n}=this.nextFieldNode()){return Kt({type:t,length:n})}visitBool(t,{length:n,nullCount:r}=this.nextFieldNode()){return Kt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitInt(t,{length:n,nullCount:r}=this.nextFieldNode()){return Kt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitFloat(t,{length:n,nullCount:r}=this.nextFieldNode()){return Kt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitUtf8(t,{length:n,nullCount:r}=this.nextFieldNode()){return Kt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),valueOffsets:this.readOffsets(t),data:this.readData(t)})}visitBinary(t,{length:n,nullCount:r}=this.nextFieldNode()){return Kt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),valueOffsets:this.readOffsets(t),data:this.readData(t)})}visitFixedSizeBinary(t,{length:n,nullCount:r}=this.nextFieldNode()){return Kt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitDate(t,{length:n,nullCount:r}=this.nextFieldNode()){return Kt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitTimestamp(t,{length:n,nullCount:r}=this.nextFieldNode()){return Kt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitTime(t,{length:n,nullCount:r}=this.nextFieldNode()){return Kt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitDecimal(t,{length:n,nullCount:r}=this.nextFieldNode()){return Kt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitList(t,{length:n,nullCount:r}=this.nextFieldNode()){return Kt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),valueOffsets:this.readOffsets(t),child:this.visit(t.children[0])})}visitStruct(t,{length:n,nullCount:r}=this.nextFieldNode()){return Kt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),children:this.visitMany(t.children)})}visitUnion(t){return t.mode===rs.Sparse?this.visitSparseUnion(t):this.visitDenseUnion(t)}visitDenseUnion(t,{length:n,nullCount:r}=this.nextFieldNode()){return Kt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),typeIds:this.readTypeIds(t),valueOffsets:this.readOffsets(t),children:this.visitMany(t.children)})}visitSparseUnion(t,{length:n,nullCount:r}=this.nextFieldNode()){return Kt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),typeIds:this.readTypeIds(t),children:this.visitMany(t.children)})}visitDictionary(t,{length:n,nullCount:r}=this.nextFieldNode()){return Kt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t.indices),dictionary:this.readDictionary(t)})}visitInterval(t,{length:n,nullCount:r}=this.nextFieldNode()){return Kt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitFixedSizeList(t,{length:n,nullCount:r}=this.nextFieldNode()){return Kt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),child:this.visit(t.children[0])})}visitMap(t,{length:n,nullCount:r}=this.nextFieldNode()){return Kt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),valueOffsets:this.readOffsets(t),child:this.visit(t.children[0])})}nextFieldNode(){return this.nodes[++this.nodesIndex]}nextBufferRange(){return this.buffers[++this.buffersIndex]}readNullBitmap(t,n,r=this.nextBufferRange()){return n>0&&this.readData(t,r)||new Uint8Array(0)}readOffsets(t,n){return this.readData(t,n)}readTypeIds(t,n){return this.readData(t,n)}readData(t,{length:n,offset:r}=this.nextBufferRange()){return this.bytes.subarray(r,r+n)}readDictionary(t){return this.dictionaries.get(t.id)}},EG=class extends h8{constructor(t,n,r,i){super(new Uint8Array(0),n,r,i),this.sources=t}readNullBitmap(t,n,{offset:r}=this.nextBufferRange()){return n<=0?new Uint8Array(0):BS(this.sources[r])}readOffsets(t,{offset:n}=this.nextBufferRange()){return Se(Uint8Array,Se(Int32Array,this.sources[n]))}readTypeIds(t,{offset:n}=this.nextBufferRange()){return Se(Uint8Array,Se(t.ArrayType,this.sources[n]))}readData(t,{offset:n}=this.nextBufferRange()){const{sources:r}=this;return Ct.isTimestamp(t)||(Ct.isInt(t)||Ct.isTime(t))&&t.bitWidth===64||Ct.isDate(t)&&t.unit===Qo.MILLISECOND?Se(Uint8Array,ep.convertArray(r[n])):Ct.isDecimal(t)?Se(Uint8Array,IG.convertArray(r[n])):Ct.isBinary(t)||Ct.isFixedSizeBinary(t)?TG(r[n]):Ct.isBool(t)?BS(r[n]):Ct.isUtf8(t)?$E(r[n].join("")):Se(Uint8Array,Se(t.ArrayType,r[n].map(i=>+i)))}};function TG(e){const t=e.join(""),n=new Uint8Array(t.length/2);for(let r=0;r<t.length;r+=2)n[r>>1]=Number.parseInt(t.slice(r,r+2),16);return n}let $t=class extends Jt{compareSchemas(t,n){return t===n||n instanceof t.constructor&&this.compareManyFields(t.fields,n.fields)}compareManyFields(t,n){return t===n||Array.isArray(t)&&Array.isArray(n)&&t.length===n.length&&t.every((r,i)=>this.compareFields(r,n[i]))}compareFields(t,n){return t===n||n instanceof t.constructor&&t.name===n.name&&t.nullable===n.nullable&&this.visit(t.type,n.type)}};function Pr(e,t){return t instanceof e.constructor}function Ty(e,t){return e===t||Pr(e,t)}function ia(e,t){return e===t||Pr(e,t)&&e.bitWidth===t.bitWidth&&e.isSigned===t.isSigned}function Eb(e,t){return e===t||Pr(e,t)&&e.precision===t.precision}function AG(e,t){return e===t||Pr(e,t)&&e.byteWidth===t.byteWidth}function qE(e,t){return e===t||Pr(e,t)&&e.unit===t.unit}function Ay(e,t){return e===t||Pr(e,t)&&e.unit===t.unit&&e.timezone===t.timezone}function My(e,t){return e===t||Pr(e,t)&&e.unit===t.unit&&e.bitWidth===t.bitWidth}function MG(e,t){return e===t||Pr(e,t)&&e.children.length===t.children.length&&oc.compareManyFields(e.children,t.children)}function NG(e,t){return e===t||Pr(e,t)&&e.children.length===t.children.length&&oc.compareManyFields(e.children,t.children)}function WE(e,t){return e===t||Pr(e,t)&&e.mode===t.mode&&e.typeIds.every((n,r)=>n===t.typeIds[r])&&oc.compareManyFields(e.children,t.children)}function $G(e,t){return e===t||Pr(e,t)&&e.id===t.id&&e.isOrdered===t.isOrdered&&oc.visit(e.indices,t.indices)&&oc.visit(e.dictionary,t.dictionary)}function GE(e,t){return e===t||Pr(e,t)&&e.unit===t.unit}function kG(e,t){return e===t||Pr(e,t)&&e.listSize===t.listSize&&e.children.length===t.children.length&&oc.compareManyFields(e.children,t.children)}function DG(e,t){return e===t||Pr(e,t)&&e.keysSorted===t.keysSorted&&e.children.length===t.children.length&&oc.compareManyFields(e.children,t.children)}$t.prototype.visitNull=Ty;$t.prototype.visitBool=Ty;$t.prototype.visitInt=ia;$t.prototype.visitInt8=ia;$t.prototype.visitInt16=ia;$t.prototype.visitInt32=ia;$t.prototype.visitInt64=ia;$t.prototype.visitUint8=ia;$t.prototype.visitUint16=ia;$t.prototype.visitUint32=ia;$t.prototype.visitUint64=ia;$t.prototype.visitFloat=Eb;$t.prototype.visitFloat16=Eb;$t.prototype.visitFloat32=Eb;$t.prototype.visitFloat64=Eb;$t.prototype.visitUtf8=Ty;$t.prototype.visitBinary=Ty;$t.prototype.visitFixedSizeBinary=AG;$t.prototype.visitDate=qE;$t.prototype.visitDateDay=qE;$t.prototype.visitDateMillisecond=qE;$t.prototype.visitTimestamp=Ay;$t.prototype.visitTimestampSecond=Ay;$t.prototype.visitTimestampMillisecond=Ay;$t.prototype.visitTimestampMicrosecond=Ay;$t.prototype.visitTimestampNanosecond=Ay;$t.prototype.visitTime=My;$t.prototype.visitTimeSecond=My;$t.prototype.visitTimeMillisecond=My;$t.prototype.visitTimeMicrosecond=My;$t.prototype.visitTimeNanosecond=My;$t.prototype.visitDecimal=Ty;$t.prototype.visitList=MG;$t.prototype.visitStruct=NG;$t.prototype.visitUnion=WE;$t.prototype.visitDenseUnion=WE;$t.prototype.visitSparseUnion=WE;$t.prototype.visitDictionary=$G;$t.prototype.visitInterval=GE;$t.prototype.visitIntervalDayTime=GE;$t.prototype.visitIntervalYearMonth=GE;$t.prototype.visitFixedSizeList=kG;$t.prototype.visitMap=DG;const oc=new $t;function OG(e,t){return oc.compareSchemas(e,t)}function S_(e,t){return RG(e,t.map(n=>n.data.concat()))}function RG(e,t){const n=[...e.fields],r=[],i={numBatches:t.reduce((f,d)=>Math.max(f,d.length),0)};let s=0,o=0,a=-1;const c=t.length;let l,u=[];for(;i.numBatches-- >0;){for(o=Number.POSITIVE_INFINITY,a=-1;++a<c;)u[a]=l=t[a].shift(),o=Math.min(o,l?l.length:o);Number.isFinite(o)&&(u=FG(n,o,u,t,i),o>0&&(r[s++]=Kt({type:new lr(n),length:o,nullCount:0,children:u.slice()})))}return[e=e.assign(n),r.map(f=>new Hi(e,f))]}function FG(e,t,n,r,i){var s;const o=(t+63&-64)>>3;for(let a=-1,c=r.length;++a<c;){const l=n[a],u=l==null?void 0:l.length;if(u>=t)u===t?n[a]=l:(n[a]=l.slice(0,t),i.numBatches=Math.max(i.numBatches,r[a].unshift(l.slice(t,u-t))));else{const f=e[a];e[a]=f.clone({nullable:!0}),n[a]=(s=l==null?void 0:l._changeLengthAndBackfillNullBitmap(t))!==null&&s!==void 0?s:Kt({type:f.type,length:t,nullCount:t,nullBitmap:new Uint8Array(o)})}}return n}var p8;let Lp=class el{constructor(...t){var n,r;if(t.length===0)return this.batches=[],this.schema=new je([]),this._offsets=[0],this;let i,s;t[0]instanceof je&&(i=t.shift()),t[t.length-1]instanceof Uint32Array&&(s=t.pop());const o=c=>{if(c){if(c instanceof Hi)return[c];if(c instanceof el)return c.batches;if(c instanceof Ue){if(c.type instanceof lr)return[new Hi(new je(c.type.children),c)]}else{if(Array.isArray(c))return c.flatMap(l=>o(l));if(typeof c[Symbol.iterator]=="function")return[...c].flatMap(l=>o(l));if(typeof c=="object"){const l=Object.keys(c),u=l.map(h=>new an([c[h]])),f=new je(l.map((h,p)=>new nn(String(h),u[p].type))),[,d]=S_(f,u);return d.length===0?[new Hi(c)]:d}}}return[]},a=t.flatMap(c=>o(c));if(i=(r=i??((n=a[0])===null||n===void 0?void 0:n.schema))!==null&&r!==void 0?r:new je([]),!(i instanceof je))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const c of a){if(!(c instanceof Hi))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!OG(i,c.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=i,this.batches=a,this._offsets=s??X4(this.data)}get data(){return this.batches.map(({data:t})=>t)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((t,n)=>t+n.length,0)}get nullCount(){return this._nullCount===-1&&(this._nullCount=H4(this.data)),this._nullCount}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}getByteLength(t){return 0}[Symbol.iterator](){return this.batches.length>0?jE.visit(new an(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(`,
  `)}
]`}concat(...t){const n=this.schema,r=this.data.concat(t.flatMap(({data:i})=>i));return new el(n,r.map(i=>new Hi(n,i)))}slice(t,n){const r=this.schema;[t,n]=W4({length:this.numRows},t,n);const i=Q4(this.data,this._offsets,t,n);return new el(r,i.map(s=>new Hi(r,s)))}getChild(t){return this.getChildAt(this.schema.fields.findIndex(n=>n.name===t))}getChildAt(t){if(t>-1&&t<this.schema.fields.length){const n=this.data.map(r=>r.children[t]);if(n.length===0){const{type:r}=this.schema.fields[t],i=Kt({type:r,length:0,nullCount:0});n.push(i._changeLengthAndBackfillNullBitmap(this.numRows))}return new an(n)}return null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=[...this.batches];if(t>-1&&t<this.numCols){n||(n=new an([Kt({type:new ic,length:this.numRows})]));const s=r.fields.slice(),o=s[t].clone({type:n.type}),a=this.schema.fields.map((c,l)=>this.getChildAt(l));[s[t],a[t]]=[o,n],[r,i]=S_(r,a)}return new el(r,i)}select(t){const n=this.schema.fields.reduce((r,i,s)=>r.set(i.name,s),new Map);return this.selectAt(t.map(r=>n.get(r)).filter(r=>r>-1))}selectAt(t){const n=this.schema.selectAt(t),r=this.batches.map(i=>i.selectAt(t));return new el(n,r)}assign(t){const n=this.schema.fields,[r,i]=t.schema.fields.reduce((a,c,l)=>{const[u,f]=a,d=n.findIndex(h=>h.name===c.name);return~d?f[d]=l:u.push(l),a},[[],[]]),s=this.schema.assign(t.schema),o=[...n.map((a,c)=>[c,i[c]]).map(([a,c])=>c===void 0?this.getChildAt(a):t.getChildAt(c)),...r.map(a=>t.getChildAt(a))].filter(Boolean);return new el(...S_(s,o))}};p8=Symbol.toStringTag;Lp[p8]=(e=>(e.schema=null,e.batches=[],e._offsets=new Uint32Array([0]),e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,e.isValid=Tf(zE),e.get=Tf(Or.getVisitFn(U.Struct)),e.set=K4(Oi.getVisitFn(U.Struct)),e.indexOf=Z4(Hg.getVisitFn(U.Struct)),e.getByteLength=Tf(Ws.getVisitFn(U.Struct)),"Table"))(Lp.prototype);var y8;let Hi=class Nh{constructor(...t){switch(t.length){case 2:{if([this.schema]=t,!(this.schema instanceof je))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=Kt({nullCount:0,type:new lr(this.schema.fields),children:this.schema.fields.map(n=>Kt({type:n.type,nullCount:0}))})]=t,!(this.data instanceof Ue))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=AN(this.schema,this.data.children);break}case 1:{const[n]=t,{fields:r,children:i,length:s}=Object.keys(n).reduce((c,l,u)=>(c.children[u]=n[l],c.length=Math.max(c.length,n[l].length),c.fields[u]=nn.new({name:l,type:n[l].type,nullable:!0}),c),{length:0,fields:new Array,children:new Array}),o=new je(r),a=Kt({type:new lr(r),length:s,children:i,nullCount:0});[this.schema,this.data]=AN(o,a.children,s);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=m8(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(t){return this.data.getValid(t)}get(t){return Or.visit(this.data,t)}set(t,n){return Oi.visit(this.data,t,n)}indexOf(t,n){return Hg.visit(this.data,t,n)}getByteLength(t){return Ws.visit(this.data,t)}[Symbol.iterator](){return jE.visit(new an([this.data]))}toArray(){return[...this]}concat(...t){return new Lp(this.schema,[this,...t])}slice(t,n){const[r]=new an([this.data]).slice(t,n).data;return new Nh(this.schema,r)}getChild(t){var n;return this.getChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.schema.fields.length?new an([this.data.children[t]]):null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=this.data;if(t>-1&&t<this.numCols){n||(n=new an([Kt({type:new ic,length:this.numRows})]));const s=r.fields.slice(),o=i.children.slice(),a=s[t].clone({type:n.type});[s[t],o[t]]=[a,n.data[0]],r=new je(s,new Map(this.schema.metadata)),i=Kt({type:new lr(s),children:o})}return new Nh(r,i)}select(t){const n=this.schema.select(t),r=new lr(n.fields),i=[];for(const s of t){const o=this.schema.fields.findIndex(a=>a.name===s);~o&&(i[o]=this.data.children[o])}return new Nh(n,Kt({type:r,length:this.numRows,children:i}))}selectAt(t){const n=this.schema.selectAt(t),r=t.map(s=>this.data.children[s]).filter(Boolean),i=Kt({type:new lr(n.fields),length:this.numRows,children:r});return new Nh(n,i)}};y8=Symbol.toStringTag;Hi[y8]=(e=>(e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(Hi.prototype);function AN(e,t,n=t.reduce((r,i)=>Math.max(r,i.length),0)){var r;const i=[...e.fields],s=[...t],o=(n+63&-64)>>3;for(const[a,c]of e.fields.entries()){const l=t[a];(!l||l.length!==n)&&(i[a]=c.clone({nullable:!0}),s[a]=(r=l==null?void 0:l._changeLengthAndBackfillNullBitmap(n))!==null&&r!==void 0?r:Kt({type:c.type,length:n,nullCount:n,nullBitmap:new Uint8Array(o)}))}return[e.assign(i),Kt({type:new lr(i),length:n,children:s})]}function m8(e,t,n=new Map){for(let r=-1,i=e.length;++r<i;){const o=e[r].type,a=t[r];if(Ct.isDictionary(o)){if(!n.has(o.id))a.dictionary&&n.set(o.id,a.dictionary);else if(n.get(o.id)!==a.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}o.children&&o.children.length>0&&m8(o.children,a.children,n)}return n}let g8=class extends Hi{constructor(t){const n=t.fields.map(i=>Kt({type:i.type})),r=Kt({type:new lr(t.fields),nullCount:0,children:n});super(t,r)}};var i1;(function(e){e[e.BUFFER=0]="BUFFER"})(i1||(i1={}));var s1;(function(e){e[e.LZ4_FRAME=0]="LZ4_FRAME",e[e.ZSTD=1]="ZSTD"})(s1||(s1={}));let LG=class nl{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBodyCompression(t,n){return(n||new nl).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBodyCompression(t,n){return t.setPosition(t.position()+Ee),(n||new nl).__init(t.readInt32(t.position())+t.position(),t)}codec(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt8(this.bb_pos+t):s1.LZ4_FRAME}method(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt8(this.bb_pos+t):i1.BUFFER}static startBodyCompression(t){t.startObject(2)}static addCodec(t,n){t.addFieldInt8(0,n,s1.LZ4_FRAME)}static addMethod(t,n){t.addFieldInt8(1,n,i1.BUFFER)}static endBodyCompression(t){return t.endObject()}static createBodyCompression(t,n,r){return nl.startBodyCompression(t),nl.addCodec(t,n),nl.addMethod(t,r),nl.endBodyCompression(t)}},v8=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(t,n,r){return t.prep(8,16),t.writeInt64(r),t.writeInt64(n),t.offset()}},b8=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(t,n,r){return t.prep(8,16),t.writeInt64(r),t.writeInt64(n),t.offset()}},_o=class GS{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsRecordBatch(t,n){return(n||new GS).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsRecordBatch(t,n){return t.setPosition(t.position()+Ee),(n||new GS).__init(t.readInt32(t.position())+t.position(),t)}length(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}nodes(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new b8).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}nodesLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}buffers(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new v8).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}buffersLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}compression(t){const n=this.bb.__offset(this.bb_pos,10);return n?(t||new LG).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}static startRecordBatch(t){t.startObject(4)}static addLength(t,n){t.addFieldInt64(0,n,t.createLong(0,0))}static addNodes(t,n){t.addFieldOffset(1,n,0)}static startNodesVector(t,n){t.startVector(16,n,8)}static addBuffers(t,n){t.addFieldOffset(2,n,0)}static startBuffersVector(t,n){t.startVector(16,n,8)}static addCompression(t,n){t.addFieldOffset(3,n,0)}static endRecordBatch(t){return t.endObject()}},Ou=class HS{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryBatch(t,n){return(n||new HS).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryBatch(t,n){return t.setPosition(t.position()+Ee),(n||new HS).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}data(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new _o).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isDelta(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startDictionaryBatch(t){t.startObject(3)}static addId(t,n){t.addFieldInt64(0,n,t.createLong(0,0))}static addData(t,n){t.addFieldOffset(1,n,0)}static addIsDelta(t,n){t.addFieldInt8(2,+n,0)}static endDictionaryBatch(t){return t.endObject()}};var o1;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(o1||(o1={}));let va=class bs{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMessage(t,n){return(n||new bs).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMessage(t,n){return t.setPosition(t.position()+Ee),(n||new bs).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Hf.V1}headerType(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):o1.NONE}header(t){const n=this.bb.__offset(this.bb_pos,8);return n?this.bb.__union(t,this.bb_pos+n):null}bodyLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new xi).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startMessage(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,Hf.V1)}static addHeaderType(t,n){t.addFieldInt8(1,n,o1.NONE)}static addHeader(t,n){t.addFieldOffset(2,n,0)}static addBodyLength(t,n){t.addFieldInt64(3,n,t.createLong(0,0))}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endMessage(t){return t.endObject()}static finishMessageBuffer(t,n){t.finish(n)}static finishSizePrefixedMessageBuffer(t,n){t.finish(n,void 0,!0)}static createMessage(t,n,r,i,s,o){return bs.startMessage(t),bs.addVersion(t,n),bs.addHeaderType(t,r),bs.addHeader(t,i),bs.addBodyLength(t,s),bs.addCustomMetadata(t,o),bs.endMessage(t)}};var BG=Uo;let CG=class extends Jt{visit(t,n){return t==null||n==null?void 0:super.visit(t,n)}visitNull(t,n){return _N.startNull(n),_N.endNull(n)}visitInt(t,n){return sf.startInt(n),sf.addBitWidth(n,t.bitWidth),sf.addIsSigned(n,t.isSigned),sf.endInt(n)}visitFloat(t,n){return U0.startFloatingPoint(n),U0.addPrecision(n,t.precision),U0.endFloatingPoint(n)}visitBinary(t,n){return vN.startBinary(n),vN.endBinary(n)}visitBool(t,n){return bN.startBool(n),bN.endBool(n)}visitUtf8(t,n){return xN.startUtf8(n),xN.endUtf8(n)}visitDecimal(t,n){return Au.startDecimal(n),Au.addScale(n,t.scale),Au.addPrecision(n,t.precision),Au.addBitWidth(n,t.bitWidth),Au.endDecimal(n)}visitDate(t,n){return L0.startDate(n),L0.addUnit(n,t.unit),L0.endDate(n)}visitTime(t,n){return Th.startTime(n),Th.addUnit(n,t.unit),Th.addBitWidth(n,t.bitWidth),Th.endTime(n)}visitTimestamp(t,n){const r=t.timezone&&n.createString(t.timezone)||void 0;return Ah.startTimestamp(n),Ah.addUnit(n,t.unit),r!==void 0&&Ah.addTimezone(n,r),Ah.endTimestamp(n)}visitInterval(t,n){return P0.startInterval(n),P0.addUnit(n,t.unit),P0.endInterval(n)}visitList(t,n){return wN.startList(n),wN.endList(n)}visitStruct(t,n){return SN.startStruct_(n),SN.endStruct_(n)}visitUnion(t,n){Zc.startTypeIdsVector(n,t.typeIds.length);const r=Zc.createTypeIdsVector(n,t.typeIds);return Zc.startUnion(n),Zc.addMode(n,t.mode),Zc.addTypeIds(n,r),Zc.endUnion(n)}visitDictionary(t,n){const r=this.visit(t.indices,n);return Eu.startDictionaryEncoding(n),Eu.addId(n,new BG(t.id,0)),Eu.addIsOrdered(n,t.isOrdered),r!==void 0&&Eu.addIndexType(n,r),Eu.endDictionaryEncoding(n)}visitFixedSizeBinary(t,n){return B0.startFixedSizeBinary(n),B0.addByteWidth(n,t.byteWidth),B0.endFixedSizeBinary(n)}visitFixedSizeList(t,n){return C0.startFixedSizeList(n),C0.addListSize(n,t.listSize),C0.endFixedSizeList(n)}visitMap(t,n){return z0.startMap(n),z0.addKeysSorted(n,t.keysSorted),z0.endMap(n)}};const x_=new CG;function UG(e,t=new Map){return new je(zG(e,t),V0(e.customMetadata),t)}function w8(e){return new is(e.count,_8(e.columns),S8(e.columns))}function PG(e){return new Ko(w8(e.data),e.id,e.isDelta)}function zG(e,t){return(e.fields||[]).filter(Boolean).map(n=>nn.fromJSON(n,t))}function MN(e,t){return(e.children||[]).filter(Boolean).map(n=>nn.fromJSON(n,t))}function _8(e){return(e||[]).reduce((t,n)=>[...t,new Td(n.count,jG(n.VALIDITY)),..._8(n.children)],[])}function S8(e,t=[]){for(let n=-1,r=(e||[]).length;++n<r;){const i=e[n];i.VALIDITY&&t.push(new Oo(t.length,i.VALIDITY.length)),i.TYPE&&t.push(new Oo(t.length,i.TYPE.length)),i.OFFSET&&t.push(new Oo(t.length,i.OFFSET.length)),i.DATA&&t.push(new Oo(t.length,i.DATA.length)),t=S8(i.children,t)}return t}function jG(e){return(e||[]).reduce((t,n)=>t+ +(n===0),0)}function VG(e,t){let n,r,i,s,o,a;return!t||!(s=e.dictionary)?(o=$N(e,MN(e,t)),i=new nn(e.name,o,e.nullable,V0(e.customMetadata))):t.has(n=s.id)?(r=(r=s.indexType)?NN(r):new Op,a=new Wf(t.get(n),r,n,s.isOrdered),i=new nn(e.name,a,e.nullable,V0(e.customMetadata))):(r=(r=s.indexType)?NN(r):new Op,t.set(n,o=$N(e,MN(e,t))),a=new Wf(o,r,n,s.isOrdered),i=new nn(e.name,a,e.nullable,V0(e.customMetadata))),i||null}function V0(e){return new Map(Object.entries(e||{}))}function NN(e){return new sc(e.isSigned,e.bitWidth)}function $N(e,t){const n=e.type.name;switch(n){case"NONE":return new ic;case"null":return new ic;case"binary":return new Lg;case"utf8":return new Bg;case"bool":return new Cg;case"list":return new Vg((t||[])[0]);case"struct":return new lr(t||[]);case"struct_":return new lr(t||[])}switch(n){case"int":{const r=e.type;return new sc(r.isSigned,r.bitWidth)}case"floatingpoint":{const r=e.type;return new Rp(Dr[r.precision])}case"decimal":{const r=e.type;return new Ug(r.scale,r.precision,r.bitWidth)}case"date":{const r=e.type;return new Pg(Qo[r.unit])}case"time":{const r=e.type;return new Fp(ae[r.unit],r.bitWidth)}case"timestamp":{const r=e.type;return new zg(ae[r.unit],r.timezone)}case"interval":{const r=e.type;return new jg(rc[r.unit])}case"union":{const r=e.type;return new Yg(rs[r.mode],r.typeIds||[],t||[])}case"fixedsizebinary":{const r=e.type;return new qg(r.byteWidth)}case"fixedsizelist":{const r=e.type;return new Wg(r.listSize,(t||[])[0])}case"map":{const r=e.type;return new Gg((t||[])[0],r.keysSorted)}}throw new Error(`Unrecognized type: "${n}"`)}var Rl=Uo,YG=a8,qG=Gf;let np=class Ru{constructor(t,n,r,i){this._version=n,this._headerType=r,this.body=new Uint8Array(0),i&&(this._createHeader=()=>i),this._bodyLength=typeof t=="number"?t:t.low}static fromJSON(t,n){const r=new Ru(0,_i.V4,n);return r._createHeader=WG(t,n),r}static decode(t){t=new qG(fe(t));const n=va.getRootAsMessage(t),r=n.bodyLength(),i=n.version(),s=n.headerType(),o=new Ru(r,i,s);return o._createHeader=GG(n,s),o}static encode(t){const n=new YG;let r=-1;return t.isSchema()?r=je.encode(n,t.header()):t.isRecordBatch()?r=is.encode(n,t.header()):t.isDictionaryBatch()&&(r=Ko.encode(n,t.header())),va.startMessage(n),va.addVersion(n,_i.V4),va.addHeader(n,r),va.addHeaderType(n,t.headerType),va.addBodyLength(n,new Rl(t.bodyLength,0)),va.finishMessageBuffer(n,va.endMessage(n)),n.asUint8Array()}static from(t,n=0){if(t instanceof je)return new Ru(0,_i.V4,_e.Schema,t);if(t instanceof is)return new Ru(n,_i.V4,_e.RecordBatch,t);if(t instanceof Ko)return new Ru(n,_i.V4,_e.DictionaryBatch,t);throw new Error(`Unrecognized Message header: ${t}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===_e.Schema}isRecordBatch(){return this.headerType===_e.RecordBatch}isDictionaryBatch(){return this.headerType===_e.DictionaryBatch}},is=class{constructor(t,n,r){this._nodes=n,this._buffers=r,this._length=typeof t=="number"?t:t.low}get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}},Ko=class{constructor(t,n,r=!1){this._data=t,this._isDelta=r,this._id=typeof n=="number"?n:n.low}get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}},Oo=class{constructor(t,n){this.offset=typeof t=="number"?t:t.low,this.length=typeof n=="number"?n:n.low}},Td=class{constructor(t,n){this.length=typeof t=="number"?t:t.low,this.nullCount=typeof n=="number"?n:n.low}};function WG(e,t){return()=>{switch(t){case _e.Schema:return je.fromJSON(e);case _e.RecordBatch:return is.fromJSON(e);case _e.DictionaryBatch:return Ko.fromJSON(e)}throw new Error(`Unrecognized Message type: { name: ${_e[t]}, type: ${t} }`)}}function GG(e,t){return()=>{switch(t){case _e.Schema:return je.decode(e.header(new Ss));case _e.RecordBatch:return is.decode(e.header(new _o),e.version());case _e.DictionaryBatch:return Ko.decode(e.header(new Ou),e.version())}throw new Error(`Unrecognized Message type: { name: ${_e[t]}, type: ${t} }`)}}nn.encode=iH;nn.decode=nH;nn.fromJSON=VG;je.encode=rH;je.decode=HG;je.fromJSON=UG;is.encode=sH;is.decode=XG;is.fromJSON=w8;Ko.encode=oH;Ko.decode=QG;Ko.fromJSON=PG;Td.encode=aH;Td.decode=ZG;Oo.encode=cH;Oo.decode=KG;function HG(e,t=new Map){const n=eH(e,t);return new je(n,Y0(e),t)}function XG(e,t=_i.V4){if(e.compression()!==null)throw new Error("Record batch compression not implemented");return new is(e.length(),JG(e),tH(e,t))}function QG(e,t=_i.V4){return new Ko(is.decode(e.data(),t),e.id(),e.isDelta())}function KG(e){return new Oo(e.offset(),e.length())}function ZG(e){return new Td(e.length(),e.nullCount())}function JG(e){const t=[];for(let n,r=-1,i=-1,s=e.nodesLength();++r<s;)(n=e.nodes(r))&&(t[++i]=Td.decode(n));return t}function tH(e,t){const n=[];for(let r,i=-1,s=-1,o=e.buffersLength();++i<o;)(r=e.buffers(i))&&(t<_i.V4&&(r.bb_pos+=8*(i+1)),n[++s]=Oo.decode(r));return n}function eH(e,t){const n=[];for(let r,i=-1,s=-1,o=e.fieldsLength();++i<o;)(r=e.fields(i))&&(n[++s]=nn.decode(r,t));return n}function kN(e,t){const n=[];for(let r,i=-1,s=-1,o=e.childrenLength();++i<o;)(r=e.children(i))&&(n[++s]=nn.decode(r,t));return n}function nH(e,t){let n,r,i,s,o,a;return!t||!(a=e.dictionary())?(i=ON(e,kN(e,t)),r=new nn(e.name(),i,e.nullable(),Y0(e))):t.has(n=a.id().low)?(s=(s=a.indexType())?DN(s):new Op,o=new Wf(t.get(n),s,n,a.isOrdered()),r=new nn(e.name(),o,e.nullable(),Y0(e))):(s=(s=a.indexType())?DN(s):new Op,t.set(n,i=ON(e,kN(e,t))),o=new Wf(i,s,n,a.isOrdered()),r=new nn(e.name(),o,e.nullable(),Y0(e))),r||null}function Y0(e){const t=new Map;if(e)for(let n,r,i=-1,s=Math.trunc(e.customMetadataLength());++i<s;)(n=e.customMetadata(i))&&(r=n.key())!=null&&t.set(r,n.value());return t}function DN(e){return new sc(e.isSigned(),e.bitWidth())}function ON(e,t){const n=e.typeType();switch(n){case Pe.NONE:return new ic;case Pe.Null:return new ic;case Pe.Binary:return new Lg;case Pe.Utf8:return new Bg;case Pe.Bool:return new Cg;case Pe.List:return new Vg((t||[])[0]);case Pe.Struct_:return new lr(t||[])}switch(n){case Pe.Int:{const r=e.type(new sf);return new sc(r.isSigned(),r.bitWidth())}case Pe.FloatingPoint:{const r=e.type(new U0);return new Rp(r.precision())}case Pe.Decimal:{const r=e.type(new Au);return new Ug(r.scale(),r.precision(),r.bitWidth())}case Pe.Date:{const r=e.type(new L0);return new Pg(r.unit())}case Pe.Time:{const r=e.type(new Th);return new Fp(r.unit(),r.bitWidth())}case Pe.Timestamp:{const r=e.type(new Ah);return new zg(r.unit(),r.timezone())}case Pe.Interval:{const r=e.type(new P0);return new jg(r.unit())}case Pe.Union:{const r=e.type(new Zc);return new Yg(r.mode(),r.typeIdsArray()||[],t||[])}case Pe.FixedSizeBinary:{const r=e.type(new B0);return new qg(r.byteWidth())}case Pe.FixedSizeList:{const r=e.type(new C0);return new Wg(r.listSize(),(t||[])[0])}case Pe.Map:{const r=e.type(new z0);return new Gg((t||[])[0],r.keysSorted())}}throw new Error(`Unrecognized type: "${Pe[n]}" (${n})`)}function rH(e,t){const n=t.fields.map(s=>nn.encode(e,s));Ss.startFieldsVector(e,n.length);const r=Ss.createFieldsVector(e,n),i=t.metadata&&t.metadata.size>0?Ss.createCustomMetadataVector(e,[...t.metadata].map(([s,o])=>{const a=e.createString(`${s}`),c=e.createString(`${o}`);return xi.startKeyValue(e),xi.addKey(e,a),xi.addValue(e,c),xi.endKeyValue(e)})):-1;return Ss.startSchema(e),Ss.addFields(e,r),Ss.addEndianness(e,lH?Xf.Little:Xf.Big),i!==-1&&Ss.addCustomMetadata(e,i),Ss.endSchema(e)}function iH(e,t){let n=-1,r=-1,i=-1;const s=t.type;let o=t.typeId;Ct.isDictionary(s)?(o=s.dictionary.typeId,i=x_.visit(s,e),r=x_.visit(s.dictionary,e)):r=x_.visit(s,e);const a=(s.children||[]).map(u=>nn.encode(e,u)),c=hi.createChildrenVector(e,a),l=t.metadata&&t.metadata.size>0?hi.createCustomMetadataVector(e,[...t.metadata].map(([u,f])=>{const d=e.createString(`${u}`),h=e.createString(`${f}`);return xi.startKeyValue(e),xi.addKey(e,d),xi.addValue(e,h),xi.endKeyValue(e)})):-1;return t.name&&(n=e.createString(t.name)),hi.startField(e),hi.addType(e,r),hi.addTypeType(e,o),hi.addChildren(e,c),hi.addNullable(e,!!t.nullable),n!==-1&&hi.addName(e,n),i!==-1&&hi.addDictionary(e,i),l!==-1&&hi.addCustomMetadata(e,l),hi.endField(e)}function sH(e,t){const n=t.nodes||[],r=t.buffers||[];_o.startNodesVector(e,n.length);for(const o of n.slice().reverse())Td.encode(e,o);const i=e.endVector();_o.startBuffersVector(e,r.length);for(const o of r.slice().reverse())Oo.encode(e,o);const s=e.endVector();return _o.startRecordBatch(e),_o.addLength(e,new Rl(t.length,0)),_o.addNodes(e,i),_o.addBuffers(e,s),_o.endRecordBatch(e)}function oH(e,t){const n=is.encode(e,t.data);return Ou.startDictionaryBatch(e),Ou.addId(e,new Rl(t.id,0)),Ou.addIsDelta(e,t.isDelta),Ou.addData(e,n),Ou.endDictionaryBatch(e)}function aH(e,t){return b8.createFieldNode(e,new Rl(t.length,0),new Rl(t.nullCount,0))}function cH(e,t){return v8.createBuffer(e,new Rl(t.offset,0),new Rl(t.length,0))}const lH=(()=>{const e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),new Int16Array(e)[0]===256})(),HE=e=>`Expected ${_e[e]} Message in stream, but was null or length 0.`,XE=e=>`Header pointer of flatbuffer-encoded ${_e[e]} Message is null or length 0.`,x8=(e,t)=>`Expected to read ${e} metadata bytes, but only read ${t}.`,I8=(e,t)=>`Expected to read ${e} bytes for message body, but only read ${t}.`;let E8=class{constructor(t){this.source=t instanceof e1?t:new e1(t)}[Symbol.iterator](){return this}next(){let t;return(t=this.readMetadataLength()).done||t.value===-1&&(t=this.readMetadataLength()).done||(t=this.readMetadata(t.value)).done?Ye:t}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}readMessage(t){let n;if((n=this.next()).done)return null;if(t!=null&&n.value.headerType!==t)throw new Error(HE(t));return n.value}readMessageBody(t){if(t<=0)return new Uint8Array(0);const n=fe(this.source.read(t));if(n.byteLength<t)throw new Error(I8(t,n.byteLength));return n.byteOffset%8===0&&n.byteOffset+n.byteLength<=n.buffer.byteLength?n:n.slice()}readSchema(t=!1){const n=_e.Schema,r=this.readMessage(n),i=r==null?void 0:r.header();if(t&&!i)throw new Error(XE(n));return i}readMetadataLength(){const t=this.source.read(Tb),n=t&&new Gf(t),r=(n==null?void 0:n.readInt32(0))||0;return{done:r===0,value:r}}readMetadata(t){const n=this.source.read(t);if(!n)return Ye;if(n.byteLength<t)throw new Error(x8(t,n.byteLength));return{done:!1,value:np.decode(n)}}},uH=class{constructor(t,n){this.source=t instanceof n1?t:UR(t)?new r1(t,n):new n1(t)}[Symbol.asyncIterator](){return this}next(){return H(this,void 0,void 0,function*(){let t;return(t=yield this.readMetadataLength()).done||t.value===-1&&(t=yield this.readMetadataLength()).done||(t=yield this.readMetadata(t.value)).done?Ye:t})}throw(t){return H(this,void 0,void 0,function*(){return yield this.source.throw(t)})}return(t){return H(this,void 0,void 0,function*(){return yield this.source.return(t)})}readMessage(t){return H(this,void 0,void 0,function*(){let n;if((n=yield this.next()).done)return null;if(t!=null&&n.value.headerType!==t)throw new Error(HE(t));return n.value})}readMessageBody(t){return H(this,void 0,void 0,function*(){if(t<=0)return new Uint8Array(0);const n=fe(yield this.source.read(t));if(n.byteLength<t)throw new Error(I8(t,n.byteLength));return n.byteOffset%8===0&&n.byteOffset+n.byteLength<=n.buffer.byteLength?n:n.slice()})}readSchema(t=!1){return H(this,void 0,void 0,function*(){const n=_e.Schema,r=yield this.readMessage(n),i=r==null?void 0:r.header();if(t&&!i)throw new Error(XE(n));return i})}readMetadataLength(){return H(this,void 0,void 0,function*(){const t=yield this.source.read(Tb),n=t&&new Gf(t),r=(n==null?void 0:n.readInt32(0))||0;return{done:r===0,value:r}})}readMetadata(t){return H(this,void 0,void 0,function*(){const n=yield this.source.read(t);if(!n)return Ye;if(n.byteLength<t)throw new Error(x8(t,n.byteLength));return{done:!1,value:np.decode(n)}})}},fH=class extends E8{constructor(t){super(new Uint8Array(0)),this._schema=!1,this._body=[],this._batchIndex=0,this._dictionaryIndex=0,this._json=t instanceof EN?t:new EN(t)}next(){const{_json:t}=this;if(!this._schema)return this._schema=!0,{done:!1,value:np.fromJSON(t.schema,_e.Schema)};if(this._dictionaryIndex<t.dictionaries.length){const n=t.dictionaries[this._dictionaryIndex++];return this._body=n.data.columns,{done:!1,value:np.fromJSON(n,_e.DictionaryBatch)}}if(this._batchIndex<t.batches.length){const n=t.batches[this._batchIndex++];return this._body=n.columns,{done:!1,value:np.fromJSON(n,_e.RecordBatch)}}return this._body=[],Ye}readMessageBody(t){return n(this._body);function n(r){return(r||[]).reduce((i,s)=>[...i,...s.VALIDITY&&[s.VALIDITY]||[],...s.TYPE&&[s.TYPE]||[],...s.OFFSET&&[s.OFFSET]||[],...s.DATA&&[s.DATA]||[],...n(s.children)],[])}}readMessage(t){let n;if((n=this.next()).done)return null;if(t!=null&&n.value.headerType!==t)throw new Error(HE(t));return n.value}readSchema(){const t=_e.Schema,n=this.readMessage(t),r=n==null?void 0:n.header();if(!n||!r)throw new Error(XE(t));return r}};const Tb=4,XS="ARROW1",a1=new Uint8Array(XS.length);for(let e=0;e<XS.length;e+=1)a1[e]=XS.codePointAt(e);function QE(e,t=0){for(let n=-1,r=a1.length;++n<r;)if(a1[n]!==e[t+n])return!1;return!0}const Ny=a1.length,T8=Ny+Tb,dH=Ny*2+Tb;let $y=class q0 extends u8{constructor(t){super(),this._impl=t}get closed(){return this._impl.closed}get schema(){return this._impl.schema}get autoDestroy(){return this._impl.autoDestroy}get dictionaries(){return this._impl.dictionaries}get numDictionaries(){return this._impl.numDictionaries}get numRecordBatches(){return this._impl.numRecordBatches}get footer(){return this._impl.isFile()?this._impl.footer:null}isSync(){return this._impl.isSync()}isAsync(){return this._impl.isAsync()}isFile(){return this._impl.isFile()}isStream(){return this._impl.isStream()}next(){return this._impl.next()}throw(t){return this._impl.throw(t)}return(t){return this._impl.return(t)}cancel(){return this._impl.cancel()}reset(t){return this._impl.reset(t),this._DOMStream=void 0,this._nodeStream=void 0,this}open(t){const n=this._impl.open(t);return $p(n)?n.then(()=>this):this}readRecordBatch(t){return this._impl.isFile()?this._impl.readRecordBatch(t):null}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}toDOMStream(){return yi.toDOMStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this})}toNodeStream(){return yi.toNodeStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this},{objectMode:!0})}static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,n){throw new Error('"throughDOM" not available in this environment')}static from(t){return t instanceof q0?t:OS(t)?mH(t):UR(t)?bH(t):$p(t)?H(this,void 0,void 0,function*(){return yield q0.from(yield t)}):PR(t)||DE(t)||jR(t)||kE(t)?vH(new n1(t)):gH(new e1(t))}static readAll(t){return t instanceof q0?t.isSync()?RN(t):FN(t):OS(t)||ArrayBuffer.isView(t)||xb(t)||CR(t)?RN(t):FN(t)}},c1=class extends $y{constructor(t){super(t),this._impl=t}readAll(){return[...this]}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return hn(this,arguments,function*(){yield J(yield*Xa(Kr(this[Symbol.iterator]())))})}},l1=class extends $y{constructor(t){super(t),this._impl=t}readAll(){var t,n;return H(this,void 0,void 0,function*(){const r=new Array;try{for(var i=Kr(this),s;s=yield i.next(),!s.done;){const o=s.value;r.push(o)}}catch(o){t={error:o}}finally{try{s&&!s.done&&(n=i.return)&&(yield n.call(i))}finally{if(t)throw t.error}}return r})}[Symbol.iterator](){throw new Error("AsyncRecordBatchStreamReader is not Iterable")}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}},A8=class extends c1{constructor(t){super(t),this._impl=t}},hH=class extends l1{constructor(t){super(t),this._impl=t}},M8=class{constructor(t=new Map){this.closed=!1,this.autoDestroy=!0,this._dictionaryIndex=0,this._recordBatchIndex=0,this.dictionaries=t}get numDictionaries(){return this._dictionaryIndex}get numRecordBatches(){return this._recordBatchIndex}isSync(){return!1}isAsync(){return!1}isFile(){return!1}isStream(){return!1}reset(t){return this._dictionaryIndex=0,this._recordBatchIndex=0,this.schema=t,this.dictionaries=new Map,this}_loadRecordBatch(t,n){const r=this._loadVectors(t,n,this.schema.fields),i=Kt({type:new lr(this.schema.fields),length:t.length,children:r});return new Hi(this.schema,i)}_loadDictionaryBatch(t,n){const{id:r,isDelta:i}=t,{dictionaries:s,schema:o}=this,a=s.get(r);if(i||!a){const c=o.dictionaries.get(r),l=this._loadVectors(t.data,n,[c]);return(a&&i?a.concat(new an(l)):new an(l)).memoize()}return a.memoize()}_loadVectors(t,n,r){return new h8(n,t.nodes,t.buffers,this.dictionaries).visitMany(r)}},u1=class extends M8{constructor(t,n){super(n),this._reader=OS(t)?new fH(this._handle=t):new E8(this._handle=t)}isSync(){return!0}isStream(){return!0}[Symbol.iterator](){return this}cancel(){!this.closed&&(this.closed=!0)&&(this.reset()._reader.return(),this._reader=null,this.dictionaries=null)}open(t){return this.closed||(this.autoDestroy=$8(this,t),this.schema||(this.schema=this._reader.readSchema())||this.cancel()),this}throw(t){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.throw(t):Ye}return(t){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.return(t):Ye}next(){if(this.closed)return Ye;let t;const{_reader:n}=this;for(;t=this._readNextMessageAndValidate();)if(t.isSchema())this.reset(t.header());else if(t.isRecordBatch()){this._recordBatchIndex++;const r=t.header(),i=n.readMessageBody(t.bodyLength);return{done:!1,value:this._loadRecordBatch(r,i)}}else if(t.isDictionaryBatch()){this._dictionaryIndex++;const r=t.header(),i=n.readMessageBody(t.bodyLength),s=this._loadDictionaryBatch(r,i);this.dictionaries.set(r.id,s)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new g8(this.schema)}):this.return()}_readNextMessageAndValidate(t){return this._reader.readMessage(t)}},f1=class extends M8{constructor(t,n){super(n),this._reader=new uH(this._handle=t)}isAsync(){return!0}isStream(){return!0}[Symbol.asyncIterator](){return this}cancel(){return H(this,void 0,void 0,function*(){!this.closed&&(this.closed=!0)&&(yield this.reset()._reader.return(),this._reader=null,this.dictionaries=null)})}open(t){return H(this,void 0,void 0,function*(){return this.closed||(this.autoDestroy=$8(this,t),this.schema||(this.schema=yield this._reader.readSchema())||(yield this.cancel())),this})}throw(t){return H(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.throw(t):Ye})}return(t){return H(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.return(t):Ye})}next(){return H(this,void 0,void 0,function*(){if(this.closed)return Ye;let t;const{_reader:n}=this;for(;t=yield this._readNextMessageAndValidate();)if(t.isSchema())yield this.reset(t.header());else if(t.isRecordBatch()){this._recordBatchIndex++;const r=t.header(),i=yield n.readMessageBody(t.bodyLength);return{done:!1,value:this._loadRecordBatch(r,i)}}else if(t.isDictionaryBatch()){this._dictionaryIndex++;const r=t.header(),i=yield n.readMessageBody(t.bodyLength),s=this._loadDictionaryBatch(r,i);this.dictionaries.set(r.id,s)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new g8(this.schema)}):yield this.return()})}_readNextMessageAndValidate(t){return H(this,void 0,void 0,function*(){return yield this._reader.readMessage(t)})}},N8=class extends u1{constructor(t,n){super(t instanceof TN?t:new TN(t),n)}get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}isSync(){return!0}isFile(){return!0}open(t){if(!this.closed&&!this._footer){this.schema=(this._footer=this._readFooter()).schema;for(const n of this._footer.dictionaryBatches())n&&this._readDictionaryBatch(this._dictionaryIndex++)}return super.open(t)}readRecordBatch(t){var n;if(this.closed)return null;this._footer||this.open();const r=(n=this._footer)===null||n===void 0?void 0:n.getRecordBatch(t);if(r&&this._handle.seek(r.offset)){const i=this._reader.readMessage(_e.RecordBatch);if(i!=null&&i.isRecordBatch()){const s=i.header(),o=this._reader.readMessageBody(i.bodyLength);return this._loadRecordBatch(s,o)}}return null}_readDictionaryBatch(t){var n;const r=(n=this._footer)===null||n===void 0?void 0:n.getDictionaryBatch(t);if(r&&this._handle.seek(r.offset)){const i=this._reader.readMessage(_e.DictionaryBatch);if(i!=null&&i.isDictionaryBatch()){const s=i.header(),o=this._reader.readMessageBody(i.bodyLength),a=this._loadDictionaryBatch(s,o);this.dictionaries.set(s.id,a)}}}_readFooter(){const{_handle:t}=this,n=t.size-T8,r=t.readInt32(n),i=t.readAt(n-r,r);return VE.decode(i)}_readNextMessageAndValidate(t){var n;if(this._footer||this.open(),this._footer&&this._recordBatchIndex<this.numRecordBatches){const r=(n=this._footer)===null||n===void 0?void 0:n.getRecordBatch(this._recordBatchIndex);if(r&&this._handle.seek(r.offset))return this._reader.readMessage(t)}return null}},pH=class extends f1{constructor(t,...n){const r=typeof n[0]!="number"?n.shift():void 0,i=n[0]instanceof Map?n.shift():void 0;super(t instanceof r1?t:new r1(t,r),i)}get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}isFile(){return!0}isAsync(){return!0}open(t){const n=Object.create(null,{open:{get:()=>super.open}});return H(this,void 0,void 0,function*(){if(!this.closed&&!this._footer){this.schema=(this._footer=yield this._readFooter()).schema;for(const r of this._footer.dictionaryBatches())r&&(yield this._readDictionaryBatch(this._dictionaryIndex++))}return yield n.open.call(this,t)})}readRecordBatch(t){var n;return H(this,void 0,void 0,function*(){if(this.closed)return null;this._footer||(yield this.open());const r=(n=this._footer)===null||n===void 0?void 0:n.getRecordBatch(t);if(r&&(yield this._handle.seek(r.offset))){const i=yield this._reader.readMessage(_e.RecordBatch);if(i!=null&&i.isRecordBatch()){const s=i.header(),o=yield this._reader.readMessageBody(i.bodyLength);return this._loadRecordBatch(s,o)}}return null})}_readDictionaryBatch(t){var n;return H(this,void 0,void 0,function*(){const r=(n=this._footer)===null||n===void 0?void 0:n.getDictionaryBatch(t);if(r&&(yield this._handle.seek(r.offset))){const i=yield this._reader.readMessage(_e.DictionaryBatch);if(i!=null&&i.isDictionaryBatch()){const s=i.header(),o=yield this._reader.readMessageBody(i.bodyLength),a=this._loadDictionaryBatch(s,o);this.dictionaries.set(s.id,a)}}})}_readFooter(){return H(this,void 0,void 0,function*(){const{_handle:t}=this;t._pending&&(yield t._pending);const n=t.size-T8,r=yield t.readInt32(n),i=yield t.readAt(n-r,r);return VE.decode(i)})}_readNextMessageAndValidate(t){return H(this,void 0,void 0,function*(){if(this._footer||(yield this.open()),this._footer&&this._recordBatchIndex<this.numRecordBatches){const n=this._footer.getRecordBatch(this._recordBatchIndex);if(n&&(yield this._handle.seek(n.offset)))return yield this._reader.readMessage(t)}return null})}},yH=class extends u1{constructor(t,n){super(t,n)}_loadVectors(t,n,r){return new EG(n,t.nodes,t.buffers,this.dictionaries).visitMany(r)}};function $8(e,t){return t&&typeof t.autoDestroy=="boolean"?t.autoDestroy:e.autoDestroy}function*RN(e){const t=$y.from(e);try{if(!t.open({autoDestroy:!1}).closed)do yield t;while(!t.reset().open().closed)}finally{t.cancel()}}function FN(e){return hn(this,arguments,function*(){const n=yield J($y.from(e));try{if(!(yield J(n.open({autoDestroy:!1}))).closed)do yield yield J(n);while(!(yield J(n.reset().open())).closed)}finally{yield J(n.cancel())}})}function mH(e){return new c1(new yH(e))}function gH(e){const t=e.peek(Ny+7&-8);return t&&t.byteLength>=4?QE(t)?new A8(new N8(e.read())):new c1(new u1(e)):new c1(new u1(function*(){}()))}function vH(e){return H(this,void 0,void 0,function*(){const t=yield e.peek(Ny+7&-8);return t&&t.byteLength>=4?QE(t)?new A8(new N8(yield e.read())):new l1(new f1(e)):new l1(new f1(function(){return hn(this,arguments,function*(){})}()))})}function bH(e){return H(this,void 0,void 0,function*(){const{size:t}=yield e.stat(),n=new r1(e,t);return t>=dH&&QE(yield n.readAt(0,Ny+7&-8))?new hH(new pH(n)):new l1(new f1(n))})}function k8(e){const t=$y.from(e);return $p(t)?t.then(n=>k8(n)):t.isAsync()?t.readAll().then(n=>new Lp(n)):new Lp(t.readAll())}function wH(e="ws://localhost:3000/"){const t=[];let n=!1,r=null,i;const s={open(){n=!0,c()},close(){for(n=!1,r=null,i=null;t.length;)t.shift().reject("Socket closed")},error(l){if(r){const{reject:u}=r;r=null,c(),u(l)}else console.error("WebSocket error: ",l)},message({data:l}){if(r){const{query:u,resolve:f,reject:d}=r;if(r=null,c(),typeof l=="string"){const h=JSON.parse(l);h.error?d(h.error):f(h)}else if(u.type==="exec")f();else if(u.type==="arrow")f(k8(l.arrayBuffer()));else throw new Error(`Unexpected socket data: ${l}`)}else console.log("WebSocket message: ",l)}};function o(){i=new WebSocket(e);for(const l in s)i.addEventListener(l,s[l])}function a(l,u,f){i==null&&o(),t.push({query:l,resolve:u,reject:f}),n&&!r&&c()}function c(){t.length&&(r=t.shift(),i.send(JSON.stringify(r.query)))}return{get connected(){return n},query(l){return new Promise((u,f)=>a(l,u,f))}}}class ac{constructor(t,n){t&&(this.table=String(t)),n&&(this.column=n)}get columns(){return this.column?[this.column]:[]}toString(){const{table:t,column:n}=this;if(n){const r=n.startsWith("*")?n:`"${n}"`;return`${t?`${LN(t)}.`:""}${r}`}else return t?LN(t):"NULL"}}function LN(e){return e.split(".").map(n=>`"${n}"`).join(".")}function _H(e,t){return e instanceof ac&&e.column===t}function Ve(e){return typeof e=="string"?KE(e):e}function W0(e){return typeof e=="string"?SH(e):e}function SH(e){return new ac(e)}function KE(e,t){return arguments.length===1&&(t=e,e=null),new ac(e,t)}function ky(e){switch(typeof e){case"boolean":return e?"TRUE":"FALSE";case"string":return`'${e}'`;case"number":return Number.isFinite(e)?String(e):"NULL";default:if(e==null)return"NULL";if(e instanceof Date){const t=+e;if(Number.isNaN(t))return"NULL";const n=e.getUTCFullYear(),r=e.getUTCMonth(),i=e.getUTCDate();return t===Date.UTC(n,r,i)?`MAKE_DATE(${n}, ${r+1}, ${i})`:`EPOCH_MS(${t})`}else return e instanceof RegExp?`'${e.source}'`:String(e)}}const Zf=e=>typeof(e==null?void 0:e.addEventListener)=="function";function D8(e){return e instanceof Ab}class Ab{constructor(t,n,r){this._expr=Array.isArray(t)?t:[t],this._deps=n||[],this.annotate(r);const i=this._expr.filter(s=>Zf(s));i.length>0?(this._params=Array.from(new Set(i)),this._params.forEach(s=>{s.addEventListener("value",()=>{var o;return xH(this,(o=this.map)==null?void 0:o.get("value"))})})):this.addEventListener=void 0}get value(){return this}get columns(){const{_params:t,_deps:n}=this;if(t){const r=new Set(t.flatMap(i=>{var o;const s=(o=i.value)==null?void 0:o.columns;return Array.isArray(s)?s:[]}));if(r.size){const i=new Set(n);return r.forEach(s=>i.add(s)),Array.from(i)}}return n}get column(){return this._deps.length?this._deps[0]:this.columns[0]}annotate(...t){return Object.assign(this,...t)}toString(){return this._expr.map(t=>Zf(t)&&!D8(t)?ky(t.value):t).join("")}addEventListener(t,n){const r=this.map||(this.map=new Map);(r.get(t)||(r.set(t,new Set),r.get(t))).add(n)}}function xH(e,t){if(t!=null&&t.size)return Promise.allSettled(Array.from(t,n=>n(e)))}function O8(e,t){const n=[e[0]],r=new Set,i=t.length;for(let s=0,o=0;s<i;){const a=t[s];Zf(a)?n[++o]=a:(Array.isArray(a==null?void 0:a.columns)&&a.columns.forEach(l=>r.add(l)),n[o]+=typeof a=="string"?a:ky(a));const c=e[++s];Zf(n[o])?n[++o]=c:n[o]+=c}return{spans:n,cols:Array.from(r)}}function X(e,...t){const{spans:n,cols:r}=O8(e,t);return new Ab(n,r)}function IH(e){const t=Ve(e);return X`${t} DESC NULLS LAST`.annotate({label:t==null?void 0:t.label,desc:!0})}const Dy=e=>({value:e,toString:()=>ky(e)});function Mb(e){var t;e(this.op,this),(t=this.children)==null||t.forEach(n=>n.visit(e))}function R8(e,t){const n=t.filter(i=>i!=null).map(Ve),r=n.map((i,s)=>s?` ${e} `:"");return t.length&&r.push(""),X(r,...n).annotate({op:e,children:n,visit:Mb})}const Fl=(...e)=>R8("AND",e.flat()),F8=(...e)=>R8("OR",e.flat()),L8=e=>t=>X`(${Ve(t)} ${e})`.annotate({op:e,a:t,visit:Mb}),B8=L8("IS NULL"),d1=L8("IS NOT NULL"),Ad=e=>(t,n)=>X`(${Ve(t)} ${e} ${Ve(n)})`.annotate({op:e,a:t,b:n,visit:Mb}),ZE=Ad("="),EH=Ad("<>"),h1=Ad("<"),C8=Ad(">"),p1=Ad("<="),TH=Ad("IS NOT DISTINCT FROM");function AH(e,t,n,r){t=Ve(t);const i=e.startsWith("NOT ")?"NOT ":"";return(n?r?X`${i}(${n[0]} <= ${t} AND ${t} < ${n[1]})`:X`(${t} ${e} ${n[0]} AND ${n[1]})`:X``).annotate({op:e,visit:Mb,field:t,range:n})}const Jr=(e,t,n)=>AH("BETWEEN",e,t,n);function y1(e,t){return Array.from({length:e},()=>t)}function Nb(e,t){return(...n)=>{const r=n.map(Ve),i=t?`::${t}`:"";return(r.length?X([`${e}(`,...y1(r.length-1,", "),`)${i}`],...r):X`${e}()${i}`).annotate({func:e,args:r})}}const MH=Nb("REGEXP_MATCHES"),NH=Nb("CONTAINS"),$H=Nb("PREFIX"),kH=Nb("SUFFIX");class ol extends Ab{constructor(t,n,r,i,s="",o="",a=""){let c;if(i&&!(s||o||a))c=i?X`${n} OVER "${i}"`:X`${n} OVER ()`;else{const d=s&&o?" ":"",h=(s||o)&&a?" ":"";c=X`${n} OVER (${i?`"${i}" `:""}${s}${d}${o}${h}${a})`}r&&(c=X`(${c})::${r}`);const{_expr:u,_deps:f}=c;super(u,f,{window:t,func:n,type:r,name:i,group:s,order:o,frame:a})}get basis(){return this.column}get label(){const{func:t}=this;return t.label??t.toString()}over(t){const{window:n,func:r,type:i,group:s,order:o,frame:a}=this;return new ol(n,r,i,t,s,o,a)}partitionby(...t){const n=t.flat().filter(u=>u).map(Ve),r=X(["PARTITION BY ",y1(n.length-1,", "),""],...n),{window:i,func:s,type:o,name:a,order:c,frame:l}=this;return new ol(i,s,o,a,r,c,l)}orderby(...t){const n=t.flat().filter(u=>u).map(Ve),r=X(["ORDER BY ",y1(n.length-1,", "),""],...n),{window:i,func:s,type:o,name:a,group:c,frame:l}=this;return new ol(i,s,o,a,c,r,l)}rows(t){const n=BN("ROWS",t),{window:r,func:i,type:s,name:o,group:a,order:c}=this;return new ol(r,i,s,o,a,c,n)}range(t){const n=BN("RANGE",t),{window:r,func:i,type:s,name:o,group:a,order:c}=this;return new ol(r,i,s,o,a,c,n)}}function BN(e,t){if(Zf(t)){const n=X`${t}`;return n.toString=()=>`${e} ${CN(t.value)}`,n}return`${e} ${CN(t)}`}function CN(e){const[t,n]=e,r=t===0?"CURRENT ROW":Number.isFinite(t)?`${Math.abs(t)} PRECEDING`:"UNBOUNDED PRECEDING",i=n===0?"CURRENT ROW":Number.isFinite(n)?`${Math.abs(n)} FOLLOWING`:"UNBOUNDED FOLLOWING";return`BETWEEN ${r} AND ${i}`}class rp extends Ab{constructor(t,n,r,i,s){n=(n||[]).map(Ve);const{strings:o,exprs:a}=DH(t,n,r,i,s),{spans:c,cols:l}=O8(o,a);super(c,l,{aggregate:t,args:n,type:r,isDistinct:i,filter:s})}get basis(){return this.column}get label(){const{aggregate:t,args:n,isDistinct:r}=this,i=r?"DISTINCT"+(n.length?" ":""):"",s=n.length?`(${i}${n.map(OH).join(", ")})`:"";return`${t.toLowerCase()}${s}`}distinct(){const{aggregate:t,args:n,type:r,filter:i}=this;return new rp(t,n,r,!0,i)}where(t){const{aggregate:n,args:r,type:i,isDistinct:s}=this;return new rp(n,r,i,s,t)}window(){const{aggregate:t,args:n,type:r,isDistinct:i}=this,s=new rp(t,n,null,i);return new ol(t,s,r)}partitionby(...t){return this.window().partitionby(...t)}orderby(...t){return this.window().orderby(...t)}rows(t,n){return this.window().rows(t,n)}range(t,n){return this.window().range(t,n)}}function DH(e,t,n,r,i){const s=`)${n?`::${n}`:""}`;let o=[`${e}(${r?"DISTINCT ":""}`],a=[];return t.length?(o=o.concat([...y1(t.length-1,", "),`${s}${i?" FILTER (WHERE ":""}`,...i?[")"]:[]]),a=[...t,...i?[i]:[]]):o[0]+="*"+s,{exprs:a,strings:o}}function OH(e){const t=ky(e);return t&&t.startsWith('"')&&t.endsWith('"')?t.slice(1,-1):t}function Bi(e,t){return(...n)=>new rp(e,n,t)}const kn=Bi("COUNT","INTEGER"),Bp=Bi("MAX"),Cp=Bi("MIN"),Md=Bi("SUM","DOUBLE"),RH=Bi("REGR_INTERCEPT"),FH=Bi("REGR_SLOPE"),LH=Bi("REGR_COUNT"),BH=Bi("REGR_SYY"),CH=Bi("REGR_SXX"),UH=Bi("REGR_AVGX"),UN=Bi("ARG_MIN"),PN=Bi("ARG_MAX");function PH(e,t){const n=Ve(e),r=X`CAST(${n} AS ${t})`;return Object.defineProperty(r,"label",{enumerable:!0,get(){return e.label}}),Object.defineProperty(r,"aggregate",{enumerable:!0,get(){return e.aggregate||!1}}),r}const zN=e=>PH(e,"DOUBLE"),U8=e=>{const t=Ve(e);return X`(1000 * (epoch(${t}) - second(${t})) + millisecond(${t}))::DOUBLE`};class Yt{static select(...t){return new Yt().select(...t)}static from(...t){return new Yt().from(...t)}static with(...t){return new Yt().with(...t)}static union(...t){return new fl("UNION",t.flat())}static unionAll(...t){return new fl("UNION ALL",t.flat())}static intersect(...t){return new fl("INTERSECT",t.flat())}static except(...t){return new fl("EXCEPT",t.flat())}constructor(){this.query={with:[],select:[],from:[],where:[],groupby:[],having:[],window:[],qualify:[],orderby:[]}}clone(){const t=new Yt;return t.query={...this.query},t}with(...t){const{query:n}=this;if(t.length===0)return n.with;{const r=[],i=(s,o)=>{const a=o.clone();a.cteFor=this,r.push({as:s,query:a})};return t.flat().forEach(s=>{if(s!=null)if(s.as&&s.query)i(s.as,s.query);else for(const o in s)i(o,s[o])}),n.with=n.with.concat(r),this}}select(...t){const{query:n}=this;if(t.length===0)return n.select;{const r=[];for(const i of t.flat())if(i!=null)if(typeof i=="string")r.push({as:i,expr:Ve(i)});else if(i instanceof ac)r.push({as:i.column,expr:i});else if(Array.isArray(i))r.push({as:i[0],expr:i[1]});else for(const s in i)r.push({as:Vm(s),expr:Ve(i[s])});return n.select=n.select.concat(r),this}}$select(...t){return this.query.select=[],this.select(...t)}distinct(t=!0){return this.query.distinct=!!t,this}from(...t){const{query:n}=this;if(t.length===0)return n.from;{const r=[];return t.flat().forEach(i=>{if(i!=null)if(typeof i=="string")r.push({as:i,from:W0(i)});else if(i instanceof ac)r.push({as:i.table,from:i});else if(I_(i)||D8(i))r.push({from:i});else if(Array.isArray(i))r.push({as:Vm(i[0]),from:W0(i[1])});else for(const s in i)r.push({as:Vm(s),from:W0(i[s])})}),n.from=n.from.concat(r),this}}$from(...t){return this.query.from=[],this.from(...t)}sample(t,n){const{query:r}=this;if(arguments.length===0)return r.sample;{let i=t;return typeof t=="number"&&(i=t>0&&t<1?{perc:100*t,method:n}:{rows:Math.round(t),method:n}),r.sample=i,this}}where(...t){const{query:n}=this;return t.length===0?n.where:(n.where=n.where.concat(t.flat().filter(r=>r)),this)}$where(...t){return this.query.where=[],this.where(...t)}groupby(...t){const{query:n}=this;return t.length===0?n.groupby:(n.groupby=n.groupby.concat(t.flat().filter(r=>r).map(Ve)),this)}$groupby(...t){return this.query.groupby=[],this.groupby(...t)}having(...t){const{query:n}=this;return t.length===0?n.having:(n.having=n.having.concat(t.flat().filter(r=>r)),this)}window(...t){const{query:n}=this;if(t.length===0)return n.window;{const r=[];return t.flat().forEach(i=>{if(i!=null)for(const s in i)r.push({as:Vm(s),expr:i[s]})}),n.window=n.window.concat(r),this}}qualify(...t){const{query:n}=this;return t.length===0?n.qualify:(n.qualify=n.qualify.concat(t.flat().filter(r=>r)),this)}orderby(...t){const{query:n}=this;return t.length===0?n.orderby:(n.orderby=n.orderby.concat(t.flat().filter(r=>r).map(Ve)),this)}limit(t){const{query:n}=this;return arguments.length===0?n.limit:(n.limit=Number.isFinite(t)?t:void 0,this)}offset(t){const{query:n}=this;return arguments.length===0?n.offset:(n.offset=Number.isFinite(t)?t:void 0,this)}get subqueries(){const{query:t,cteFor:n}=this,r=((n==null?void 0:n.query)||t).with,i=r==null?void 0:r.reduce((o,{as:a,query:c})=>(o[a]=c,o),{}),s=[];return t.from.forEach(({from:o})=>{if(I_(o))s.push(o);else if(i[o.table]){const a=i[o.table];s.push(a)}}),s}toString(){const{select:t,distinct:n,from:r,sample:i,where:s,groupby:o,having:a,window:c,qualify:l,orderby:u,limit:f,offset:d,with:h}=this.query,p=[];if(h.length){const b=h.map(({as:y,query:m})=>`"${y}" AS (${m})`);p.push(`WITH ${b.join(", ")}`)}const g=t.map(({as:b,expr:y})=>_H(y,b)&&!y.table?`${y}`:`${y} AS "${b}"`);if(p.push(`SELECT${n?" DISTINCT":""} ${g.join(", ")}`),r.length){const b=r.map(({as:y,from:m})=>{const v=I_(m)?`(${m})`:`${m}`;return!y||y===m.table?v:`${v} AS "${y}"`});p.push(`FROM ${b.join(", ")}`)}if(s.length){const b=s.map(String).filter(y=>y).join(" AND ");b&&p.push(`WHERE ${b}`)}if(i){const{rows:b,perc:y,method:m,seed:v}=i,w=b?`${b} ROWS`:`${y} PERCENT`,_=m?` (${m}${v!=null?`, ${v}`:""})`:"";p.push(`USING SAMPLE ${w}${_}`)}if(o.length&&p.push(`GROUP BY ${o.join(", ")}`),a.length){const b=a.map(String).filter(y=>y).join(" AND ");b&&p.push(`HAVING ${b}`)}if(c.length){const b=c.map(({as:y,expr:m})=>`"${y}" AS (${m})`);p.push(`WINDOW ${b.join(", ")}`)}if(l.length){const b=l.map(String).filter(y=>y).join(" AND ");b&&p.push(`QUALIFY ${b}`)}return u.length&&p.push(`ORDER BY ${u.join(", ")}`),Number.isFinite(f)&&p.push(`LIMIT ${f}`),Number.isFinite(d)&&p.push(`OFFSET ${d}`),p.join(" ")}}class fl{constructor(t,n){this.op=t,this.queries=n.map(r=>r.clone()),this.query={orderby:[]}}clone(){const t=new fl(this.op,this.queries);return t.query={...this.query},t}orderby(...t){const{query:n}=this;return t.length===0?n.orderby:(n.orderby=n.orderby.concat(t.flat().filter(r=>r).map(Ve)),this)}limit(t){const{query:n}=this;return arguments.length===0?n.limit:(n.limit=Number.isFinite(t)?t:void 0,this)}offset(t){const{query:n}=this;return arguments.length===0?n.offset:(n.offset=Number.isFinite(t)?t:void 0,this)}get subqueries(){const{queries:t,cteFor:n}=this;return n&&t.forEach(r=>r.cteFor=n),t}toString(){const{op:t,queries:n,query:{orderby:r,limit:i,offset:s}}=this,o=[n.join(` ${t} `)];return r.length&&o.push(`ORDER BY ${r.join(", ")}`),Number.isFinite(i)&&o.push(`LIMIT ${i}`),Number.isFinite(s)&&o.push(`OFFSET ${s}`),o.join(" ")}}function I_(e){return e instanceof Yt||e instanceof fl}function Vm(e){return zH(e)?e.slice(1,-1):e}function zH(e){return e[0]==='"'&&e[e.length-1]==='"'}function P8(e,t,{replace:n=!1,temp:r=!0,view:i=!1}={}){return"CREATE"+(n?" OR REPLACE ":" ")+(r?"TEMP ":"")+(i?"VIEW":"TABLE")+(n?" ":" IF NOT EXISTS ")+e+" AS "+t}function jH(e,{columns:t=Object.keys((e==null?void 0:e[0])||{})}={}){let n=[];if(Array.isArray(t)?(n=t,t=n.reduce((i,s)=>(i[s]=s,i),{})):t&&(n=Object.keys(t)),!n.length)throw new Error("Can not create table from empty column set.");const r=[];for(const i of e){const s=n.map(o=>`${ky(i[o])} AS "${t[o]}"`);r.push(`(SELECT ${s.join(", ")})`)}return r.join(" UNION ALL ")}function VH(e,t,n={}){const{select:r=["*"],...i}=n,s=jH(t),o=r.length===1&&r[0]==="*"?s:`SELECT ${r} FROM ${s}`;return P8(e,o,i)}function YH(e){switch(e){case"BIGINT":case"HUGEINT":case"INTEGER":case"SMALLINT":case"TINYINT":case"UBIGINT":case"UINTEGER":case"USMALLINT":case"UTINYINT":case"DOUBLE":case"FLOAT":case"REAL":case"DECIMAL":return"number";case"DATE":case"TIMESTAMP":case"TIMESTAMPTZ":case"TIME":return"date";case"BOOLEAN":return"boolean";case"VARCHAR":case"UUID":return"string";case"LIST":return"array";case"BLOB":case"STRUCT":case"MAP":return"object";default:throw new Error(`Unsupported type: ${e}`)}}const qH="count",WH="nulls",GH="max",HH="min",XH="distinct",QH={[qH]:kn,[XH]:e=>kn(e).distinct(),[GH]:Bp,[HH]:Cp,[WH]:e=>kn().where(B8(e))};function KH({table:e,column:t},n){return Yt.from(e).select(n.map(r=>[r,QH[r](t)]))}const z8=()=>Object.create(null);class ZH{constructor(t){this.mc=t,this.clear()}clear(){this.tables=z8()}tableInfo(t){const n=this.tables;if(n[t])return n[t];const r=JH(this.mc,t).catch(i=>{throw n[t]=null,i});return n[t]=r}async fieldInfo({table:t,column:n,stats:r}){const s=(await this.tableInfo(t))[n];if(s==null)return;if(!(r!=null&&r.length))return s;const o=await this.mc.query(KH(s,r),{persist:!0}),a={...s,...Array.from(o)[0]};for(const c in a){const l=a[c];typeof l=="bigint"&&(a[c]=Number(l))}return a}async queryFields(t){const n=await tX(this,t);return(await Promise.all(n.map(i=>this.fieldInfo(i)))).filter(i=>i)}}async function JH(e,t){const n=await e.query(`DESCRIBE ${W0(t)}`,{type:"json",cache:!1}),r=z8();for(const i of n)r[i.column_name]={table:t,column:i.column_name,sqlType:i.column_type,type:YH(i.column_type),nullable:i.null==="YES"};return r}async function tX(e,t){return t.length===1&&t[0].column==="*"?Object.values(await e.tableInfo(t[0].table)):t}function eX(e){let t=2166136261;for(let n=0,r=e.length;n<r;++n){const i=e.charCodeAt(n),s=i&65280;s&&(t=jN(t^s>>8)),t=jN(t^i&255)}return nX(t)}function jN(e){return e+(e<<1)+(e<<4)+(e<<7)+(e<<8)+(e<<24)}function nX(e){return e+=e<<13,e^=e>>>7,e+=e<<3,e^=e>>>17,e+=e<<5,e&4294967295}const j8=e=>e;class rX{constructor(t,{selection:n,temp:r=!0}){this.mc=t,this.selection=n,this.temp=r,this.reset()}reset(){this.enabled=!1,this.clients=null,this.indices=null,this.activeView=null}clear(){this.indices&&(this.mc.cancel(Array.from(this.indices.values(),t=>t.result)),this.indices=null)}index(t,n){var l,u;if(this.clients!==t){const f=Array.from(t,YN),d=(l=f[0])==null?void 0:l.from;this.enabled=f.every(h=>h&&h.from===d),this.clients=t,this.activeView=null,this.clear()}if(!this.enabled)return!1;n=n||this.selection.active;const{source:r}=n;if(r&&r===((u=this.activeView)==null?void 0:u.source))return!0;if(this.clear(),!r)return!1;const i=this.activeView=iX(n);if(!i)return!1;this.mc.logger().warn("DATA CUBE INDEX CONSTRUCTION");const s=this.selection.remove(r),o=this.indices=new Map,{mc:a,temp:c}=this;for(const f of t){if(s.skip(f,n))continue;const d=YN(f),h=f.query(s.predicate(f)).select({...i.columns,...d.count}).groupby(Object.keys(i.columns)),[p]=h.subqueries;if(p){const w=Object.values(i.columns).map(_=>_.columns[0]);aX(p,w)}const g=h.orderby();h.query.orderby=[];const b=h.toString(),m=`cube_index_${(eX(b)>>>0).toString(16)}`,v=a.exec(P8(m,b,{temp:c}));o.set(f,{table:m,result:v,order:g,...d})}}async update(){const{clients:t,selection:n,activeView:r}=this,i=r.predicate(n.active.predicate);return Promise.all(Array.from(t).map(s=>this.updateClient(s,i)))}async updateClient(t,n){const r=this.indices.get(t);if(!r)return;n||(n=this.activeView.predicate(this.selection.active.predicate));const{table:i,dims:s,aggr:o,order:a=[]}=r,c=Yt.select(s,o).from(i).groupby(s).where(n).orderby(a);return this.mc.updateClient(t,c)}}function iX(e){var c;const{source:t,schema:n}=e;let r=(c=e.predicate)==null?void 0:c.columns;if(!n||!r)return null;const{type:i,scales:s,pixelSize:o=1}=n;let a;if(i==="interval"&&s){const l=s.map(u=>sX(u,o));if(l.some(u=>u==null))return null;l.length===1?(a=u=>u?Jr("active0",u.range.map(l[0])):[],r={active0:l[0](e.predicate.field)}):(a=u=>u?Fl(u.children.map(({range:f},d)=>Jr(`active${d}`,f.map(l[d])))):[],r=Object.fromEntries(e.predicate.children.map((u,f)=>[`active${f}`,l[f](u.field)])))}else if(i==="point")a=j8,r=Object.fromEntries(r.map(l=>[l.toString(),l]));else return null;return{source:t,columns:r,predicate:a}}function sX(e,t){const{type:n,domain:r,range:i}=e;let s,o;switch(n){case"linear":s=j8,o=Ve;break;case"log":s=Math.log,o=a=>X`LN(${Ve(a)})`;break;case"symlog":s=a=>Math.sign(a)*Math.log1p(Math.abs(a)),o=a=>(a=Ve(a),X`SIGN(${a}) * LN(1 + ABS(${a}))`);break;case"sqrt":s=Math.sqrt,o=a=>X`SQRT(${Ve(a)})`;break;case"utc":case"time":s=a=>+a,o=a=>a instanceof Date?+a:U8(Ve(a));break}return s?oX(r,i,t,s,o):null}function oX(e,t,n,r,i){const s=r(Math.min(e[0],e[1])),o=r(Math.max(e[0],e[1])),a=Math.abs(r(t[1])-r(t[0]))/(o-s)/n,c=n===1?"":`${n}::INTEGER * `;return l=>X`${c}FLOOR(${a}::DOUBLE * (${i(l)} - ${s}::DOUBLE))::INTEGER`}const VN={from:NaN};function YN(e){if(!e.filterIndexable)return VN;const t=e.query(),n=QS(t);if(!n||!t.groupby)return VN;const r=new Set(t.groupby().map(a=>a.column)),i=[],s=[];let o;for(const{as:a,expr:{aggregate:c}}of t.select())switch(c==null?void 0:c.toUpperCase()){case"COUNT":case"SUM":i.push({[a]:X`SUM("${a}")::DOUBLE`});break;case"AVG":o="_count_",i.push({[a]:X`(SUM("${a}" * ${o}) / SUM(${o}))::DOUBLE`});break;case"MAX":i.push({[a]:X`MAX("${a}")`});break;case"MIN":i.push({[a]:X`MIN("${a}")`});break;default:if(r.has(a))s.push(a);else return null}return{aggr:i,dims:s,count:o?{[o]:X`COUNT(*)`}:{},from:n}}function QS(e){const t=e.subqueries;if(e.select){const r=e.from();if(!r.length)return;if(t.length===0)return r[0].from.table}const n=QS(t[0]);for(let r=1;r<t.length;++r){const i=QS(t[r]);if(i!==void 0&&i!==n)return NaN}return n}function aX(e,t){const n=new Set,r=i=>{n.has(i)||(n.add(i),i.select&&i.from().length&&i.select(t),i.subqueries.forEach(r))};r(e)}class cX{constructor(t,n,r=!0){this.mc=t,this.selection=n,this.clients=new Set,this.indexer=r?new rX(this.mc,{...r,selection:n}):null;const{value:i,activate:s}=this.handlers={value:()=>this.update(),activate:o=>{var a;return(a=this.indexer)==null?void 0:a.index(this.clients,o)}};n.addEventListener("value",i),n.addEventListener("activate",s)}finalize(){const{value:t,activate:n}=this.handlers;this.selection.removeEventListener("value",t),this.selection.removeEventListener("activate",n)}reset(){var t;(t=this.indexer)==null||t.reset()}add(t){return(this.clients=new Set(this.clients)).add(t),this}remove(t){return this.clients.has(t)&&(this.clients=new Set(this.clients)).delete(t),this}update(){const{mc:t,indexer:n,clients:r,selection:i}=this;return n!=null&&n.index(r)?n.update():lX(t,r,i)}}function lX(e,t,n){return Promise.all(Array.from(t).map(r=>{const i=n.predicate(r);if(i!=null)return e.updateClient(r,r.query(i))}))}function V8(){let e,t;const n=new Promise((r,i)=>{e=r,t=i});return n.fulfill=r=>(e(r),n),n.reject=r=>(t(r),n),n}function uX(e,t,n){let r=[],i=0;function s(){const o=fX(r,t);r=[],i=0;for(const a of o)hX(a,e,n),mX(a,t)}return{add(o,a){o.request.type==="arrow"?(i=i||requestAnimationFrame(()=>s()),r.push({entry:o,priority:a,index:r.length})):e(o,a)}}}function fX(e,t){const n=[],r=new Map;for(const i of e){const{entry:{request:s}}=i,o=dX(s.query,t);if(!r.has(o)){const a=[];n.push(a),r.set(o,a)}r.get(o).push(i)}return n}function dX(e,t){const n=`${e}`;if(e instanceof Yt&&!t.get(n)){if(e.orderby().length||e.where().length||e.qualify().length||e.having().length)return n;const r=e.clone().$select("*"),i=e.groupby();if(i.length){const s={};e.select().forEach(({as:o,expr:a})=>s[o]=a),r.$groupby(i.map(o=>o instanceof ac&&s[o.column]||o))}return`${r}`}else return n}function hX(e,t,n){if(pX(e))t({request:{type:"arrow",cache:!1,record:!1,query:yX(e,n)},result:e.result=V8()});else for(const{entry:r,priority:i}of e)t(r,i)}function pX(e){if(e.length>1){const t=`${e[0].entry.request.query}`;for(let n=1;n<e.length;++n)if(t!==`${e[n].entry.request.query}`)return!0}return!1}function yX(e,t){const n=e.maps=[],r=new Map;for(const o of e){const{query:a}=o.entry.request,c=[];n.push(c);for(const{as:l,expr:u}of a.select()){const f=`${u}`;r.has(f)||r.set(f,[`col${r.size}`,u]);const[d]=r.get(f);c.push([d,l])}t(`${a}`)}const i=e[0].entry.request.query.clone(),s=i.groupby();if(s.length){const o={};e.maps[0].forEach(([a,c])=>o[c]=a),i.$groupby(s.map(a=>a instanceof ac&&o[a.column]||a))}return i.$select(Array.from(r.values()))}async function mX(e,t){const{maps:n,result:r}=e;if(!n)return;let i;try{i=await r}catch(s){for(const{entry:o}of e)o.result.reject(s);return}e.forEach(({entry:s},o)=>{const{request:a,result:c}=s,l=gX(i,n[o]);a.cache&&t.set(String(a.query),l),c.fulfill(l)})}function gX(e,t){if(t){const n={};for(const[r,i]of t)n[i]=e.getChild(r);return new e.constructor(n)}else return e}const vX=typeof requestIdleCallback<"u"?requestIdleCallback:setTimeout,bX=()=>({get:()=>{},set:(e,t)=>t,clear:()=>{}});function wX({max:e=1e3,ttl:t=3*60*60*1e3}={}){let n=new Map;function r(){const i=performance.now()-t;let s=null,o=1/0;for(const[a,c]of n){const{last:l}=c;l<o&&(s=a,o=l),i>l&&n.delete(a)}s&&n.delete(s)}return{get(i){const s=n.get(i);if(s)return s.last=performance.now(),s.value},set(i,s){return n.set(i,{last:performance.now(),value:s}),n.size>e&&vX(r),s},clear(){n=new Map}}}function _X(e){const t=Array.from({length:e},()=>({head:null,tail:null}));return{isEmpty(){return t.every(n=>!n.head)},insert(n,r){const i=t[r];if(!i)throw new Error(`Invalid queue priority rank: ${r}`);const s={item:n,next:null};i.head===null?i.head=i.tail=s:i.tail=i.tail.next=s},remove(n){for(const r of t){let{head:i,tail:s}=r;for(let o=null,a=i;a;o=a,a=a.next)n(a.item)&&(a===i?i=a.next:o.next=a.next,a===s&&(s=o||i));r.head=i,r.tail=s}},next(){for(const n of t){const{head:r}=n;if(r!==null)return n.head=r.next,n.tail===r&&(n.tail=null),r.item}}}}const Aa={High:0,Normal:1,Low:2};function SX(){const e=_X(3);let t,n,r,i=[],s=null,o;function a(){if(s||e.isEmpty())return;const{request:f,result:d}=e.next();s=u(f,d),s.finally(()=>{s=null,a()})}function c(f,d=Aa.Normal){e.insert(f,d),a()}function l(f){i.length&&f&&i.forEach(d=>d.add(f))}async function u(f,d){try{const{query:h,type:p,cache:g=!1,record:b=!0,options:y}=f,m=h?`${h}`:null;if(b&&l(m),g){const _=n.get(m);if(_){r.debug("Cache"),d.fulfill(_);return}}const v=performance.now(),w=await t.query({type:p,sql:m,...y});g&&n.set(m,w),r.debug(`Request: ${(performance.now()-v).toFixed(1)}`),d.fulfill(w)}catch(h){d.reject(h)}}return{cache(f){return f!==void 0?n=f===!0?wX():f||bX():n},logger(f){return f?r=f:r},connector(f){return f?t=f:t},consolidate(f){f&&!o?o=uX(c,n,l):!f&&o&&(o=null)},request(f,d=Aa.Normal){const h=V8(),p={request:f,result:h};return o?o.add(p,d):c(p,d),h},cancel(f){const d=new Set(f);e.remove(({result:h})=>d.has(h))},clear(){e.remove(({result:f})=>(f.reject("Cleared"),!0))},record(){let f=[];const d={add(h){f.push(h)},reset(){f=[]},snapshot(){return f.slice()},stop(){return i=i.filter(h=>h!==d),f}};return i.push(d),d}}}function xX(){return{debug(){},info(){},log(){},warn(){},error(){}}}let Ym;function Dn(e){return e?Ym=e:Ym==null&&(Ym=new IX),Ym}class IX{constructor(t=wH(),n={}){this.catalog=new ZH(this),this.manager=n.manager||SX(),this.logger(n.logger||console),this.configure(n),this.databaseConnector(t),this.clear()}logger(t){return arguments.length&&(this._logger=t||xX(),this.manager.logger(this._logger)),this._logger}configure({cache:t=!0,consolidate:n=!0,indexes:r=!0}){this.manager.cache(t),this.manager.consolidate(n),this.indexes=r}clear({clients:t=!0,cache:n=!0,catalog:r=!1}={}){var i,s;this.manager.clear(),t&&((i=this.clients)==null||i.forEach(o=>this.disconnect(o)),(s=this.filterGroups)==null||s.forEach(o=>o.finalize()),this.clients=new Set,this.filterGroups=new Map),n&&this.manager.cache().clear(),r&&this.catalog.clear()}databaseConnector(t){return this.manager.connector(t)}cancel(t){this.manager.cancel(t)}exec(t,{priority:n=Aa.Normal}={}){return this.manager.request({type:"exec",query:t},n)}query(t,{type:n="arrow",cache:r=!0,priority:i=Aa.Normal,...s}={}){return this.manager.request({type:n,query:t,cache:r,options:s},i)}prefetch(t,n={}){return this.query(t,{...n,cache:!0,priority:Aa.Low})}createBundle(t,n,r=Aa.Low){const i={name:t,queries:n};return this.manager.request({type:"create-bundle",options:i},r)}loadBundle(t,n=Aa.High){const r={name:t};return this.manager.request({type:"load-bundle",options:r},n)}updateClient(t,n,r=Aa.Normal){return t.queryPending(),this.query(n,{priority:r}).then(i=>t.queryResult(i).update(),i=>{t.queryError(i),this._logger.error(i)})}requestQuery(t,n){var r;return(r=this.filterGroups.get(t.filterBy))==null||r.reset(),n?this.updateClient(t,n):t.update()}async connect(t){const{catalog:n,clients:r,filterGroups:i,indexes:s}=this;if(r.has(t))throw new Error("Client already connected.");r.add(t);const o=t.fields();o!=null&&o.length&&t.fieldInfo(await n.queryFields(o));const a=t.filterBy;if(a)if(i.has(a))i.get(a).add(t);else{const c=new cX(this,a,s);i.set(a,c.add(t))}t.requestQuery()}disconnect(t){var i;const{clients:n,filterGroups:r}=this;n.has(t)&&(n.delete(t),(i=r.get(t.filterBy))==null||i.remove(t))}}const qN={};function Y8(e,t=!1){let n,r,i=qN;function s(l){n=e(l).then(()=>{if(r){const{value:u}=r;r=null,s(u)}else n=null})}function o(l){r={event:l}}function a(l){n?o(l):s(l)}function c(l){i!==l&&requestAnimationFrame(()=>{const u=i;i=qN,a(u)}),i=l}return t?c:a}class Oy{constructor(t){this._filterBy=t,this._requestUpdate=Y8(()=>this.requestQuery(),!0)}get filterBy(){return this._filterBy}get filterIndexable(){return!0}fields(){return null}fieldInfo(){return this}query(){return null}queryPending(){return this}queryResult(){return this}queryError(t){return console.error(t),this}requestQuery(t){var r;const n=t||this.query((r=this.filterBy)==null?void 0:r.predicate(this));return Dn().requestQuery(this,n)}requestUpdate(){this._requestUpdate()}update(){return this}}class EX{constructor(){this._callbacks=new Map}addEventListener(t,n){this._callbacks.has(t)||this._callbacks.set(t,{callbacks:new Set,pending:null,queue:new TX}),this._callbacks.get(t).callbacks.add(n)}removeEventListener(t,n){const r=this._callbacks.get(t);r&&r.callbacks.delete(n)}willEmit(t,n){return n}emitQueueFilter(){return null}cancel(t){const n=this._callbacks.get(t);n==null||n.queue.clear()}emit(t,n){const r=this._callbacks.get(t)||{};if(r.pending)r.queue.enqueue(n,this.emitQueueFilter(t,n));else{const i=this.willEmit(t,n),{callbacks:s,queue:o}=r;if(s!=null&&s.size){const a=Promise.allSettled(Array.from(s,c=>c(i))).then(()=>{r.pending=null,o.isEmpty()||this.emit(t,o.dequeue())});r.pending=a}}}}class TX{constructor(){this.clear()}clear(){this.next=null}isEmpty(){return!this.next}enqueue(t,n){const r={value:t};if(n&&this.next){let i=this;for(;i.next;)n(i.next.value)?i=i.next:i.next=i.next.next;i.next=r}else this.next=r}dequeue(){const{next:t}=this;return this.next=t==null?void 0:t.next,t==null?void 0:t.value}}function q8(e,t){return e===t?!1:e instanceof Date&&t instanceof Date?+e!=+t:Array.isArray(e)&&Array.isArray(t)?AX(e,t):!0}function AX(e,t){if(e.length!==t.length)return!0;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!0;return!1}function Qa(e){return e instanceof pr}class pr extends EX{constructor(t){super(),this._value=t}static value(t){return new pr(t)}static array(t){if(t.some(n=>Qa(n))){const n=new pr,r=()=>n.update(t.map(i=>Qa(i)?i.value:i));return r(),t.forEach(i=>Qa(i)?i.addEventListener("value",r):0),n}return new pr(t)}get value(){return this._value}update(t,{force:n}={}){return q8(this._value,t)||n?this.emit("value",t):this.cancel("value"),this}willEmit(t,n){return t==="value"&&(this._value=n),n}}function Ll(e){return e instanceof Gs}let Gs=class Fu extends pr{static intersect({cross:t=!1}={}){return new Fu(new nh({cross:t}))}static union({cross:t=!1}={}){return new Fu(new nh({cross:t,union:!0}))}static single({cross:t=!1}={}){return new Fu(new nh({cross:t,single:!0}))}static crossfilter(){return new Fu(new nh({cross:!0}))}constructor(t=new nh){super([]),this._resolved=this._value,this._resolver=t}clone(){const t=new Fu(this._resolver);return t._value=t._resolved=this._value,t}remove(t){const n=this.clone();return n._value=n._resolved=n._resolver.resolve(this._resolved,{source:t}),n._value.active={source:t},n}get active(){return this.clauses.active}get value(){var t;return(t=this.active)==null?void 0:t.value}get clauses(){return super.value}get single(){return this._resolver.single}activate(t){this.emit("activate",t)}update(t){return this._resolved=this._resolver.resolve(this._resolved,t,!0),this._resolved.active=t,super.update(this._resolved)}willEmit(t,n){return t==="value"?(this._value=n,this.value):n}emitQueueFilter(t,n){return t==="value"?this._resolver.queueFilter(n):null}skip(t,n){return this._resolver.skip(t,n)}predicate(t,n=!1){const{clauses:r}=this,i=n?null:r.active;return this._resolver.predicate(r,i,t)}};class nh{constructor({union:t,cross:n,single:r}={}){this.union=!!t,this.cross=!!n,this.single=!!r}resolve(t,n,r=!1){const{source:i,predicate:s}=n,o=t.filter(c=>i!==c.source),a=this.single?[]:o;return this.single&&r&&o.forEach(c=>{var l,u;return(u=(l=c.source)==null?void 0:l.reset)==null?void 0:u.call(l)}),s&&a.push(n),a}skip(t,n){var r;return this.cross&&((r=n==null?void 0:n.clients)==null?void 0:r.has(t))}predicate(t,n,r){const{union:i}=this;if(this.skip(r,n))return;const s=t.filter(o=>!this.skip(r,o)).map(o=>o.predicate);return i&&s.length>1?F8(s):s}queueFilter(t){var n;if(this.cross){const r=(n=t.active)==null?void 0:n.source;return i=>{var s;return((s=i.active)==null?void 0:s.source)!==r}}}}function MX(){const e=new Set;let t,n=new Promise(r=>t=r);return{pending(r){e.add(r)},ready(r){return e.delete(r),e.size===0},resolve(){n=new Promise(r=>{t(),t=r})},get promise(){return n}}}function $b(e,t){const n=new e(t);return Dn().connect(n),n.element}const NX=e=>e&&typeof e=="object"&&!Array.isArray(e),$X=e=>$b(kX,e);class kX extends Oy{constructor({element:t,filterBy:n,from:r,column:i,label:s=i,format:o=u=>u,options:a,value:c,as:l}={}){var f,d,h,p;super(n),this.from=r,this.column=i,this.selection=l,this.format=o,this.element=t??document.createElement("div"),this.element.setAttribute("class","input"),this.element.value=this;const u=document.createElement("label");u.innerText=s||i,this.element.appendChild(u),this.select=document.createElement("select"),a&&(this.data=a.map(g=>NX(g)?g:{value:g}),this.update()),c=c??((f=this.selection)==null?void 0:f.value)??((h=(d=this.data)==null?void 0:d[0])==null?void 0:h.value),((p=this.selection)==null?void 0:p.value)===void 0&&this.publish(c),this.element.appendChild(this.select),this.selection&&(this.select.addEventListener("input",()=>{this.publish(this.selectedValue()??null)}),Ll(this.selection)||this.selection.addEventListener("value",g=>{g!==this.select.value&&this.selectedValue(g)}))}selectedValue(t){var n;if(arguments.length===0){const r=this.select.selectedIndex;return this.data[r].value}else{const r=(n=this.data)==null?void 0:n.findIndex(i=>i.value===t);r>=0?this.select.selectedIndex=r:this.select.value=String(t)}}reset(){this.select.selectedIndex=this.from?0:-1}publish(t){const{selection:n,column:r}=this;Ll(n)?n.update({source:this,schema:{type:"point"},value:t,predicate:t?ZE(r,Dy(t)):null}):Qa(n)&&n.update(t)}query(t=[]){const{from:n,column:r}=this;return n?Yt.from(n).select({value:r}).distinct().where(t).orderby(r):null}queryResult(t){return this.data=[{value:"",label:"All"},...t],this}update(){var i;const{data:t,format:n,select:r}=this;r.replaceChildren();for(const{value:s,label:o}of t){const a=document.createElement("option");a.setAttribute("value",s),a.innerText=o??n(s),this.select.appendChild(a)}return this.selection&&this.selectedValue(((i=this.selection)==null?void 0:i.value)??""),this}}const DX={contains:NH,prefix:$H,suffix:kH,regexp:MH};let OX=0;const RX=e=>$b(FX,e);class FX extends Oy{constructor({element:t,filterBy:n,from:r,column:i,label:s,type:o="contains",as:a}={}){if(super(n),this.id="search_"+ ++OX,this.type=o,this.from=r,this.column=i,this.selection=a,this.element=t??document.createElement("div"),this.element.setAttribute("class","input"),this.element.value=this,s){const c=document.createElement("label");c.setAttribute("for",this.id),c.innerText=s,this.element.appendChild(c)}this.searchbox=document.createElement("input"),this.searchbox.setAttribute("id",this.id),this.searchbox.setAttribute("type","text"),this.searchbox.setAttribute("placeholder","Query"),this.element.appendChild(this.searchbox),this.selection&&(this.searchbox.addEventListener("input",()=>{this.publish(this.searchbox.value||null)}),Ll(this.selection)||this.selection.addEventListener("value",c=>{c!==this.searchbox.value&&(this.searchbox.value=c)}))}reset(){this.searchbox.value=""}publish(t){const{selection:n,column:r,type:i}=this;Ll(n)?n.update({source:this,schema:{type:i},value:t,predicate:t?DX[i](r,Dy(t)):null}):Qa(n)&&n.update(t)}query(t=[]){const{from:n,column:r}=this;return n?Yt.from(n).select({list:r}).distinct().where(t):null}queryResult(t){return this.data=t,this}update(){const t=document.createElement("datalist"),n=`${this.id}_list`;t.setAttribute("id",n);for(const r of this.data){const i=document.createElement("option");i.setAttribute("value",r.list),t.append(i)}return this.datalist&&this.datalist.remove(),this.element.appendChild(this.datalist=t),this.searchbox.setAttribute("list",n),this}}let LX=0;const KS=e=>$b(BX,e);class BX extends Oy{constructor({element:t,filterBy:n,as:r,min:i,max:s,step:o,from:a,column:c,label:l=c,value:u=r==null?void 0:r.value,width:f}={}){var d;if(super(n),this.id="slider_"+ ++LX,this.from=a,this.column=c||"value",this.selection=r,this.min=i,this.max=s,this.step=o,this.element=t||document.createElement("div"),this.element.setAttribute("class","input"),this.element.value=this,l){const h=document.createElement("label");h.setAttribute("for",this.id),h.innerText=l,this.element.appendChild(h)}this.slider=document.createElement("input"),this.slider.setAttribute("id",this.id),this.slider.setAttribute("type","range"),f!=null&&(this.slider.style.width=`${+f}px`),i!=null&&this.slider.setAttribute("min",i),s!=null&&this.slider.setAttribute("max",s),o!=null&&this.slider.setAttribute("step",o),u!=null&&(this.slider.setAttribute("value",u),((d=this.selection)==null?void 0:d.value)===void 0&&this.publish(u)),this.element.appendChild(this.slider),this.selection&&(this.slider.addEventListener("input",()=>{this.publish(+this.slider.value)}),Ll(this.selection)||this.selection.addEventListener("value",h=>{h!==+this.slider.value&&(this.slider.value=h)}))}query(t=[]){const{from:n,column:r}=this;return!n||this.min!=null&&this.max!=null?null:Yt.select({min:Cp(r),max:Bp(r)}).from(n).where(t)}queryResult(t){const{min:n,max:r}=Array.from(t)[0];return this.min==null&&this.slider.setAttribute("min",n),this.max==null&&this.slider.setAttribute("max",r),this.step==null&&this.slider.setAttribute("step",(r-n)/500),this}publish(t){const{selection:n,column:r}=this;Ll(n)?n.update({source:this,schema:{type:"point"},value:t,predicate:ZE(r,Dy(t))}):Qa(this.selection)&&n.update(t)}}function W8(e,t){if(e instanceof Date||(e=new Date(+e)),isNaN(e))return typeof t=="function"?t(e):t;const n=e.getUTCHours(),r=e.getUTCMinutes(),i=e.getUTCSeconds(),s=e.getUTCMilliseconds();return`${CX(e.getUTCFullYear())}-${Ao(e.getUTCMonth()+1,2)}-${Ao(e.getUTCDate(),2)}${n||r||i||s?`T${Ao(n,2)}:${Ao(r,2)}${i||s?`:${Ao(i,2)}${s?`.${Ao(s,3)}`:""}`:""}Z`:""}`}function CX(e){return e<0?`-${Ao(-e,6)}`:e>9999?`+${Ao(e,6)}`:Ao(e,4)}function Ao(e,t){return`${e}`.padStart(t,"0")}const UX=/^(?:[-+]\d{2})?\d{4}(?:-\d{2}(?:-\d{2})?)?(?:T\d{2}:\d{2}(?::\d{2}(?:\.\d{3})?)?(?:Z|[-+]\d{2}:?\d{2})?)?$/;function G8(e,t){return UX.test(e+="")?new Date(e):typeof t=="function"?t(e):t}const H8=tT(e=>{const t=JE(e);return n=>n==null?"":typeof n=="number"?t(n):n instanceof Date?X8(n):`${n}`}),JE=tT(e=>t=>t===0?"0":t.toLocaleString(e));H8();JE();function X8(e){return W8(e,"Invalid Date")}function tT(e){let t=tT,n;return(r="en")=>r===t?n:n=e(t=r)}let PX=-1;const Q8=e=>$b(zX,e);let zX=class extends Oy{constructor({element:t,filterBy:n,from:r,columns:i=["*"],align:s={},format:o,width:a,maxWidth:c,height:l=500,rowBatch:u=100}={}){super(n),this.id=`table-${++PX}`,this.from=r,this.columns=i,this.format=o,this.align=s,this.widths=typeof a=="object"?a:{},this.offset=0,this.limit=+u,this.pending=!1,this.sortHeader=null,this.sortColumn=null,this.sortDesc=!1,this.element=t||document.createElement("div"),this.element.setAttribute("id",this.id),this.element.value=this,typeof a=="number"&&(this.element.style.width=`${a}px`),c&&(this.element.style.maxWidth=`${c}px`),this.element.style.maxHeight=`${l}px`,this.element.style.overflow="auto";let f=-1;this.element.addEventListener("scroll",d=>{const{pending:h,loaded:p}=this,{scrollHeight:g,scrollTop:b,clientHeight:y}=d.target,m=b<f;f=b,!(m||h||p)&&g-b<2*y&&(this.pending=!0,this.requestData(this.offset+this.limit))}),this.tbl=document.createElement("table"),this.element.appendChild(this.tbl),this.head=document.createElement("thead"),this.tbl.appendChild(this.head),this.body=document.createElement("tbody"),this.tbl.appendChild(this.body),this.style=document.createElement("style"),this.element.appendChild(this.style)}requestData(t=0){var r;this.offset=t;const n=this.query((r=this.filterBy)==null?void 0:r.predicate(this));this.requestQuery(n),Dn().prefetch(n.clone().offset(t+this.limit))}fields(){return this.columns.map(t=>KE(this.from,t))}fieldInfo(t){this.schema=t;const n=this.head;n.innerHTML="";const r=document.createElement("tr");for(const{column:i}of t){const s=document.createElement("th");s.addEventListener("click",o=>this.sort(o,i)),s.appendChild(document.createElement("span")),s.appendChild(document.createTextNode(i)),r.appendChild(s)}return n.appendChild(r),this.formats=jX(this.format,t),this.style.innerText=qX(this.id,VX(this.align,t),YX(this.widths,t)),this}query(t=[]){const{from:n,limit:r,offset:i,schema:s,sortColumn:o,sortDesc:a}=this;return Yt.from(n).select(s.map(c=>c.column)).where(t).orderby(o?a?IH(o):o:[]).limit(r).offset(i)}queryResult(t){return this.pending||(this.loaded=!1,this.body.replaceChildren()),this.data=t,this}update(){const{body:t,formats:n,data:r,schema:i,limit:s}=this,o=i.length;let a=0;for(const c of r){++a;const l=document.createElement("tr");for(let u=0;u<o;++u){const f=c[i[u].column],d=document.createElement("td");d.innerText=f==null?"":n[u](f),l.appendChild(d)}t.appendChild(l)}return a<s&&(this.loaded=!0),this.pending=!1,this}sort(t,n){n===this.sortColumn?this.sortDesc=!this.sortDesc:(this.sortColumn=n,this.sortDesc=!1);const r=t.currentTarget,i=this.sortHeader;i===r&&t.metaKey?(i.firstChild.textContent="",this.sortHeader=null,this.sortColumn=null):(i&&(i.firstChild.textContent=""),this.sortHeader=r,r.firstChild.textContent=this.sortDesc?"▾":"▴"),this.requestData()}};function jX(e={},t,n){return t.map(({column:r,type:i})=>{if(r in e)return e[r];switch(i){case"number":return JE(n);case"date":return X8;default:return H8(n)}})}function VX(e={},t){return t.map(({column:n,type:r})=>n in e?e[n]:r==="number"?"right":"left")}function YX(e={},t){return t.map(({column:n})=>e[n])}function qX(e,t,n){const r=[];return t.forEach((i,s)=>{const o=+n[s];if(i!=="left"||o){const a=i!=="left"?`text-align:${i};`:"",c=o?`width:${o}px;max-width:${o}px;`:"";r.push(`#${e} tr>:nth-child(${s+1}) {${a}${c}}`)}}),r.join(" ")}const Wr=Symbol("Fixed"),Bl=Symbol("Transient"),K8=Symbol("Transform"),WX=["rectY-x","rectX-y","rect-x","rect-y"];function GX(e,t){return WX.includes(`${t}-${e}`)}function Ka(e,t={steps:25}){const n=(r,i)=>GX(i,r.type)?{[`${i}1`]:E_(r,e,t),[`${i}2`]:E_(r,e,{...t,offset:1})}:{[i]:E_(r,e,t)};return n[K8]=!0,n}function E_(e,t,n){return{column:t,label:t,get stats(){return["min","max"]},get columns(){return[t]},get basis(){return t},toString(){const{min:r,max:i}=e.stats[t],s=HX(r,i,n),o=Ve(t),a=s.min===0?o:`(${o} - ${s.min})`,c=`${(s.max-s.min)/s.steps}::DOUBLE`,l=n.offset?`${n.offset} + `:"";return`${s.min} + ${c} * (${l}FLOOR(${a} / ${c})::INTEGER)`}}}function HX(e,t,n){let{steps:r=25,minstep:i=0,nice:s=!0}=n;if(s!==!1){const o=t-e,a=r,c=Math.LN10,l=Math.ceil(Math.log(a)/c);let u=Math.max(i,Math.pow(10,Math.round(Math.log(o)/c)-l));for(;Math.ceil(o/u)>a;)u*=10;const f=[5,2];let d;for(let g=0,b=f.length;g<b;++g)d=u/f[g],d>=i&&o/d<=a&&(u=d);d=Math.log(u);const h=d>=0?0:~~(-d/c)+1,p=Math.pow(10,-h-1);d=Math.floor(e/u+p)*u,e=e<d?d-u:d,t=Math.ceil(t/u)*u,r=Math.round((t-e)/u)}return{min:e,max:t,steps:r}}function He(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Cl(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function kb(e){let t,n,r;e.length!==2?(t=He,n=(a,c)=>He(e(a),c),r=(a,c)=>e(a)-c):(t=e===He||e===Cl?e:XX,n=e,r=e);function i(a,c,l=0,u=a.length){if(l<u){if(t(c,c)!==0)return u;do{const f=l+u>>>1;n(a[f],c)<0?l=f+1:u=f}while(l<u)}return l}function s(a,c,l=0,u=a.length){if(l<u){if(t(c,c)!==0)return u;do{const f=l+u>>>1;n(a[f],c)<=0?l=f+1:u=f}while(l<u)}return l}function o(a,c,l=0,u=a.length){const f=i(a,c,l,u-1);return f>l&&r(a[f-1],c)>-r(a[f],c)?f-1:f}return{left:i,center:o,right:s}}function XX(){return 0}function Z8(e){return e===null?NaN:+e}function*QX(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const KX=kb(He),ZX=KX.right;kb(Z8).center;const Db=ZX,J8=tF(eF),JX=tF(tQ);function tF(e){return function(t,n,r=n){if(!((n=+n)>=0))throw new RangeError("invalid rx");if(!((r=+r)>=0))throw new RangeError("invalid ry");let{data:i,width:s,height:o}=t;if(!((s=Math.floor(s))>=0))throw new RangeError("invalid width");if(!((o=Math.floor(o!==void 0?o:i.length/s))>=0))throw new RangeError("invalid height");if(!s||!o||!n&&!r)return t;const a=n&&e(n),c=r&&e(r),l=i.slice();return a&&c?(du(a,l,i,s,o),du(a,i,l,s,o),du(a,l,i,s,o),hu(c,i,l,s,o),hu(c,l,i,s,o),hu(c,i,l,s,o)):a?(du(a,i,l,s,o),du(a,l,i,s,o),du(a,i,l,s,o)):c&&(hu(c,i,l,s,o),hu(c,l,i,s,o),hu(c,i,l,s,o)),t}}function du(e,t,n,r,i){for(let s=0,o=r*i;s<o;)e(t,n,s,s+=r,1)}function hu(e,t,n,r,i){for(let s=0,o=r*i;s<r;++s)e(t,n,s,s+o,r)}function tQ(e){const t=eF(e);return(n,r,i,s,o)=>{i<<=2,s<<=2,o<<=2,t(n,r,i+0,s+0,o),t(n,r,i+1,s+1,o),t(n,r,i+2,s+2,o),t(n,r,i+3,s+3,o)}}function eF(e){const t=Math.floor(e);if(t===e)return eQ(e);const n=e-t,r=2*e+1;return(i,s,o,a,c)=>{if(!((a-=c)>=o))return;let l=t*s[o];const u=c*t,f=u+c;for(let d=o,h=o+u;d<h;d+=c)l+=s[Math.min(a,d)];for(let d=o,h=a;d<=h;d+=c)l+=s[Math.min(a,d+u)],i[d]=(l+n*(s[Math.max(o,d-f)]+s[Math.min(a,d+f)]))/r,l-=s[Math.max(o,d-u)]}}function eQ(e){const t=2*e+1;return(n,r,i,s,o)=>{if(!((s-=o)>=i))return;let a=e*r[i];const c=o*e;for(let l=i,u=i+c;l<u;l+=o)a+=r[Math.min(s,l)];for(let l=i,u=s;l<=u;l+=o)a+=r[Math.min(s,l+c)],n[l]=a/t,a-=r[Math.max(i,l-c)]}}function Ob(e,t){let n=0;if(t===void 0)for(let r of e)r!=null&&(r=+r)>=r&&++n;else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(i=+i)>=i&&++n}return n}function nQ(e){return e.length|0}function rQ(e){return!(e>0)}function iQ(e){return typeof e!="object"||"length"in e?e:Array.from(e)}function sQ(e){return t=>e(...t)}function oQ(...e){const t=typeof e[e.length-1]=="function"&&sQ(e.pop());e=e.map(iQ);const n=e.map(nQ),r=e.length-1,i=new Array(r+1).fill(0),s=[];if(r<0||n.some(rQ))return s;for(;;){s.push(i.map((a,c)=>e[c][a]));let o=r;for(;++i[o]===n[o];){if(o===0)return t?s.map(t):s;i[o--]=0}}}function aQ(e,t){var n=0,r=0;return Float64Array.from(e,t===void 0?i=>n+=+i||0:i=>n+=+t(i,r++,e)||0)}function eT(e,t){let n=0,r,i=0,s=0;if(t===void 0)for(let o of e)o!=null&&(o=+o)>=o&&(r=o-i,i+=r/++n,s+=r*(o-i));else{let o=-1;for(let a of e)(a=t(a,++o,e))!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,s+=r*(a-i))}if(n>1)return s/(n-1)}function Ry(e,t){const n=eT(e,t);return n&&Math.sqrt(n)}function An(e,t){let n,r;if(t===void 0)for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(n===void 0?s>=s&&(n=r=s):(n>s&&(n=s),r<s&&(r=s)))}return[n,r]}class zs{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const s=n[i],o=t+s,a=Math.abs(t)<Math.abs(s)?t-(o-s):s-(o-t);a&&(n[r++]=a),t=o}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,s,o=0;if(n>0){for(o=t[--n];n>0&&(r=o,i=t[--n],o=r+i,s=i-(o-r),!s););n>0&&(s<0&&t[n-1]<0||s>0&&t[n-1]>0)&&(i=s*2,r=o+i,i==r-o&&(o=r))}return o}}class Ul extends Map{constructor(t,n=iF){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(ZS(this,t))}has(t){return super.has(ZS(this,t))}set(t,n){return super.set(nF(this,t),n)}delete(t){return super.delete(rF(this,t))}}class Fy extends Set{constructor(t,n=iF){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(ZS(this,t))}add(t){return super.add(nF(this,t))}delete(t){return super.delete(rF(this,t))}}function ZS({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function nF({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function rF({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function iF(e){return e!==null&&typeof e=="object"?e.valueOf():e}function JS(e){return e}function sa(e,...t){return nT(e,JS,JS,t)}function Af(e,t,...n){return nT(e,JS,t,n)}function cQ(e,t,...n){return nT(e,Array.from,t,n)}function nT(e,t,n,r){return function i(s,o){if(o>=r.length)return n(s);const a=new Ul,c=r[o++];let l=-1;for(const u of s){const f=c(u,++l,s),d=a.get(f);d?d.push(u):a.set(f,[u])}for(const[u,f]of a)a.set(u,i(f,o));return t(a)}(e,0)}function lQ(e,t){return Array.from(t,n=>e[n])}function Up(e,...t){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");e=Array.from(e);let[n]=t;if(n&&n.length!==2||t.length>1){const r=Uint32Array.from(e,(i,s)=>s);return t.length>1?(t=t.map(i=>e.map(i)),r.sort((i,s)=>{for(const o of t){const a=Pp(o[i],o[s]);if(a)return a}})):(n=e.map(n),r.sort((i,s)=>Pp(n[i],n[s]))),lQ(e,r)}return e.sort(rT(n))}function rT(e=He){if(e===He)return Pp;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function Pp(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}function iT(e,t,n){return(t.length!==2?Up(Af(e,t,n),([r,i],[s,o])=>He(i,o)||He(r,s)):Up(sa(e,n),([r,i],[s,o])=>t(i,o)||He(r,s))).map(([r])=>r)}const uQ=Math.sqrt(50),fQ=Math.sqrt(10),dQ=Math.sqrt(2);function m1(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=uQ?10:s>=fQ?5:s>=dQ?2:1;let a,c,l;return i<0?(l=Math.pow(10,-i)/o,a=Math.round(e*l),c=Math.round(t*l),a/l<e&&++a,c/l>t&&--c,l=-l):(l=Math.pow(10,i)*o,a=Math.round(e/l),c=Math.round(t/l),a*l<e&&++a,c*l>t&&--c),c<a&&.5<=n&&n<2?m1(e,t,n*2):[a,c,l]}function cc(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,s,o]=r?m1(t,e,n):m1(e,t,n);if(!(s>=i))return[];const a=s-i+1,c=new Array(a);if(r)if(o<0)for(let l=0;l<a;++l)c[l]=(s-l)/-o;else for(let l=0;l<a;++l)c[l]=(s-l)*o;else if(o<0)for(let l=0;l<a;++l)c[l]=(i+l)/-o;else for(let l=0;l<a;++l)c[l]=(i+l)*o;return c}function zp(e,t,n){return t=+t,e=+e,n=+n,m1(e,t,n)[2]}function tx(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?zp(t,e,n):zp(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function sF(e,t,n){let r;for(;;){const i=zp(e,t,n);if(i===r||i===0||!isFinite(i))return[e,t];i>0?(e=Math.floor(e/i)*i,t=Math.ceil(t/i)*i):i<0&&(e=Math.ceil(e*i)/i,t=Math.floor(t*i)/i),r=i}}function sT(e){return Math.max(1,Math.ceil(Math.log(Ob(e))/Math.LN2)+1)}function Be(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function hQ(e,t){let n,r=-1,i=-1;if(t===void 0)for(const s of e)++i,s!=null&&(n<s||n===void 0&&s>=s)&&(n=s,r=i);else for(let s of e)(s=t(s,++i,e))!=null&&(n<s||n===void 0&&s>=s)&&(n=s,r=i);return r}function On(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function pQ(e,t){let n,r=-1,i=-1;if(t===void 0)for(const s of e)++i,s!=null&&(n>s||n===void 0&&s>=s)&&(n=s,r=i);else for(let s of e)(s=t(s,++i,e))!=null&&(n>s||n===void 0&&s>=s)&&(n=s,r=i);return r}function oF(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?Pp:rT(i);r>n;){if(r-n>600){const c=r-n+1,l=t-n+1,u=Math.log(c),f=.5*Math.exp(2*u/3),d=.5*Math.sqrt(u*f*(c-f)/c)*(l-c/2<0?-1:1),h=Math.max(n,Math.floor(t-l*f/c+d)),p=Math.min(r,Math.floor(t+(c-l)*f/c+d));oF(e,t,h,p,i)}const s=e[t];let o=n,a=r;for(rh(e,n,t),i(e[r],s)>0&&rh(e,n,r);o<a;){for(rh(e,o,a),++o,--a;i(e[o],s)<0;)++o;for(;i(e[a],s)>0;)--a}i(e[n],s)===0?rh(e,n,a):(++a,rh(e,a,r)),a<=t&&(n=a+1),t<=a&&(r=a-1)}return e}function rh(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function oT(e,t=He){let n,r=!1;if(t.length===1){let i;for(const s of e){const o=t(s);(r?He(o,i)>0:He(o,o)===0)&&(n=s,i=o,r=!0)}}else for(const i of e)(r?t(i,n)>0:t(i,i)===0)&&(n=i,r=!0);return n}function lc(e,t,n){if(e=Float64Array.from(QX(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return On(e);if(t>=1)return Be(e);var r,i=(r-1)*t,s=Math.floor(i),o=Be(oF(e,s).subarray(0,s+1)),a=On(e.subarray(s+1));return o+(a-o)*(i-s)}}function yQ(e,t,n=Z8){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,s=Math.floor(i),o=+n(e[s],s,e),a=+n(e[s+1],s+1,e);return o+(a-o)*(i-s)}}function mQ(e,t,n){const r=Ob(e),i=lc(e,.75)-lc(e,.25);return r&&i?Math.ceil((n-t)/(2*i*Math.pow(r,-1/3))):1}function aF(e,t,n){const r=Ob(e),i=Ry(e);return r&&i?Math.ceil((n-t)*Math.cbrt(r)/(3.49*i)):1}function Rb(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(s=+s)>=s&&(++n,r+=s)}if(n)return r/n}function jp(e,t){return lc(e,.5,t)}function*gQ(e){for(const t of e)yield*t}function cF(e){return Array.from(gQ(e))}function lF(e,t){const n=new Ul;if(t===void 0)for(let s of e)s!=null&&s>=s&&n.set(s,(n.get(s)||0)+1);else{let s=-1;for(let o of e)(o=t(o,++s,e))!=null&&o>=o&&n.set(o,(n.get(o)||0)+1)}let r,i=0;for(const[s,o]of n)o>i&&(i=o,r=s);return r}function vQ(e,t=bQ){const n=[];let r,i=!1;for(const s of e)i&&n.push(t(r,s)),r=s,i=!0;return n}function bQ(e,t){return[e,t]}function Gr(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function uF(e,t=He){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");let n=Array.from(e);const r=new Float64Array(n.length);t.length!==2&&(n=n.map(t),t=He);const i=(a,c)=>t(n[a],n[c]);let s,o;return e=Uint32Array.from(n,(a,c)=>c),e.sort(t===He?(a,c)=>Pp(n[a],n[c]):rT(i)),e.forEach((a,c)=>{const l=i(a,s===void 0?a:s);l>=0?((s===void 0||l>0)&&(s=a,o=c),r[a]=o):r[a]=NaN}),r}function wQ(e,t=He){let n,r=!1;if(t.length===1){let i;for(const s of e){const o=t(s);(r?He(o,i)<0:He(o,o)===0)&&(n=s,i=o,r=!0)}}else for(const i of e)(r?t(i,n)<0:t(i,i)===0)&&(n=i,r=!0);return n}function Hs(e,t){let n=0;if(t===void 0)for(let r of e)(r=+r)&&(n+=r);else{let r=-1;for(let i of e)(i=+t(i,++r,e))&&(n+=i)}return n}function g1(e){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");return Array.from(e).reverse()}function _Q(e){return e}var T_=1,A_=2,ex=3,qm=4,WN=1e-6;function SQ(e){return"translate("+e+",0)"}function xQ(e){return"translate(0,"+e+")"}function IQ(e){return t=>+e(t)}function EQ(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),n=>+e(n)+t}function TQ(){return!this.__axis}function AQ(e,t){var n=[],r=null,i=null,s=6,o=6,a=3,c=typeof window<"u"&&window.devicePixelRatio>1?0:.5,l=e===T_||e===qm?-1:1,u=e===qm||e===A_?"x":"y",f=e===T_||e===ex?SQ:xQ;function d(h){var p=r??(t.ticks?t.ticks.apply(t,n):t.domain()),g=i??(t.tickFormat?t.tickFormat.apply(t,n):_Q),b=Math.max(s,0)+a,y=t.range(),m=+y[0]+c,v=+y[y.length-1]+c,w=(t.bandwidth?EQ:IQ)(t.copy(),c),_=h.selection?h.selection():h,S=_.selectAll(".domain").data([null]),x=_.selectAll(".tick").data(p,t).order(),T=x.exit(),$=x.enter().append("g").attr("class","tick"),I=x.select("line"),A=x.select("text");S=S.merge(S.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),x=x.merge($),I=I.merge($.append("line").attr("stroke","currentColor").attr(u+"2",l*s)),A=A.merge($.append("text").attr("fill","currentColor").attr(u,l*b).attr("dy",e===T_?"0em":e===ex?"0.71em":"0.32em")),h!==_&&(S=S.transition(h),x=x.transition(h),I=I.transition(h),A=A.transition(h),T=T.transition(h).attr("opacity",WN).attr("transform",function(D){return isFinite(D=w(D))?f(D+c):this.getAttribute("transform")}),$.attr("opacity",WN).attr("transform",function(D){var F=this.parentNode.__axis;return f((F&&isFinite(F=F(D))?F:w(D))+c)})),T.remove(),S.attr("d",e===qm||e===A_?o?"M"+l*o+","+m+"H"+c+"V"+v+"H"+l*o:"M"+c+","+m+"V"+v:o?"M"+m+","+l*o+"V"+c+"H"+v+"V"+l*o:"M"+m+","+c+"H"+v),x.attr("opacity",1).attr("transform",function(D){return f(w(D)+c)}),I.attr(u+"2",l*s),A.attr(u,l*b).text(g),_.filter(TQ).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===A_?"start":e===qm?"end":"middle"),_.each(function(){this.__axis=w})}return d.scale=function(h){return arguments.length?(t=h,d):t},d.ticks=function(){return n=Array.from(arguments),d},d.tickArguments=function(h){return arguments.length?(n=h==null?[]:Array.from(h),d):n.slice()},d.tickValues=function(h){return arguments.length?(r=h==null?null:Array.from(h),d):r&&r.slice()},d.tickFormat=function(h){return arguments.length?(i=h,d):i},d.tickSize=function(h){return arguments.length?(s=o=+h,d):s},d.tickSizeInner=function(h){return arguments.length?(s=+h,d):s},d.tickSizeOuter=function(h){return arguments.length?(o=+h,d):o},d.tickPadding=function(h){return arguments.length?(a=+h,d):a},d.offset=function(h){return arguments.length?(c=+h,d):c},d}function MQ(e){return AQ(ex,e)}var NQ={value:()=>{}};function Fb(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new G0(n)}function G0(e){this._=e}function $Q(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}G0.prototype=Fb.prototype={constructor:G0,on:function(e,t){var n=this._,r=$Q(e+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(e=r[s]).type)&&(i=kQ(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(i=(e=r[s]).type)n[i]=GN(n[i],e.name,t);else if(t==null)for(i in n)n[i]=GN(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new G0(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function kQ(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function GN(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=NQ,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var nx="http://www.w3.org/1999/xhtml";const Pl={svg:"http://www.w3.org/2000/svg",xhtml:nx,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Lb(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Pl.hasOwnProperty(t)?{space:Pl[t],local:e}:e}function DQ(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===nx&&t.documentElement.namespaceURI===nx?t.createElement(e):t.createElementNS(n,e)}}function OQ(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Bb(e){var t=Lb(e);return(t.local?OQ:DQ)(t)}function RQ(){}function aT(e){return e==null?RQ:function(){return this.querySelector(e)}}function FQ(e){typeof e!="function"&&(e=aT(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=new Array(o),c,l,u=0;u<o;++u)(c=s[u])&&(l=e.call(c,c.__data__,u,s))&&("__data__"in c&&(l.__data__=c.__data__),a[u]=l);return new ti(r,this._parents)}function LQ(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function BQ(){return[]}function fF(e){return e==null?BQ:function(){return this.querySelectorAll(e)}}function CQ(e){return function(){return LQ(e.apply(this,arguments))}}function UQ(e){typeof e=="function"?e=CQ(e):e=fF(e);for(var t=this._groups,n=t.length,r=[],i=[],s=0;s<n;++s)for(var o=t[s],a=o.length,c,l=0;l<a;++l)(c=o[l])&&(r.push(e.call(c,c.__data__,l,o)),i.push(c));return new ti(r,i)}function dF(e){return function(){return this.matches(e)}}function hF(e){return function(t){return t.matches(e)}}var PQ=Array.prototype.find;function zQ(e){return function(){return PQ.call(this.children,e)}}function jQ(){return this.firstElementChild}function VQ(e){return this.select(e==null?jQ:zQ(typeof e=="function"?e:hF(e)))}var YQ=Array.prototype.filter;function qQ(){return Array.from(this.children)}function WQ(e){return function(){return YQ.call(this.children,e)}}function GQ(e){return this.selectAll(e==null?qQ:WQ(typeof e=="function"?e:hF(e)))}function HQ(e){typeof e!="function"&&(e=dF(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],c,l=0;l<o;++l)(c=s[l])&&e.call(c,c.__data__,l,s)&&a.push(c);return new ti(r,this._parents)}function pF(e){return new Array(e.length)}function XQ(){return new ti(this._enter||this._groups.map(pF),this._parents)}function v1(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}v1.prototype={constructor:v1,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function QQ(e){return function(){return e}}function KQ(e,t,n,r,i,s){for(var o=0,a,c=t.length,l=s.length;o<l;++o)(a=t[o])?(a.__data__=s[o],r[o]=a):n[o]=new v1(e,s[o]);for(;o<c;++o)(a=t[o])&&(i[o]=a)}function ZQ(e,t,n,r,i,s,o){var a,c,l=new Map,u=t.length,f=s.length,d=new Array(u),h;for(a=0;a<u;++a)(c=t[a])&&(d[a]=h=o.call(c,c.__data__,a,t)+"",l.has(h)?i[a]=c:l.set(h,c));for(a=0;a<f;++a)h=o.call(e,s[a],a,s)+"",(c=l.get(h))?(r[a]=c,c.__data__=s[a],l.delete(h)):n[a]=new v1(e,s[a]);for(a=0;a<u;++a)(c=t[a])&&l.get(d[a])===c&&(i[a]=c)}function JQ(e){return e.__data__}function tK(e,t){if(!arguments.length)return Array.from(this,JQ);var n=t?ZQ:KQ,r=this._parents,i=this._groups;typeof e!="function"&&(e=QQ(e));for(var s=i.length,o=new Array(s),a=new Array(s),c=new Array(s),l=0;l<s;++l){var u=r[l],f=i[l],d=f.length,h=eK(e.call(u,u&&u.__data__,l,r)),p=h.length,g=a[l]=new Array(p),b=o[l]=new Array(p),y=c[l]=new Array(d);n(u,f,g,b,y,h,t);for(var m=0,v=0,w,_;m<p;++m)if(w=g[m]){for(m>=v&&(v=m+1);!(_=b[v])&&++v<p;);w._next=_||null}}return o=new ti(o,r),o._enter=a,o._exit=c,o}function eK(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function nK(){return new ti(this._exit||this._groups.map(pF),this._parents)}function rK(e,t,n){var r=this.enter(),i=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function iK(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,s=r.length,o=Math.min(i,s),a=new Array(i),c=0;c<o;++c)for(var l=n[c],u=r[c],f=l.length,d=a[c]=new Array(f),h,p=0;p<f;++p)(h=l[p]||u[p])&&(d[p]=h);for(;c<i;++c)a[c]=n[c];return new ti(a,this._parents)}function sK(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function oK(e){e||(e=aK);function t(f,d){return f&&d?e(f.__data__,d.__data__):!f-!d}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],a=o.length,c=i[s]=new Array(a),l,u=0;u<a;++u)(l=o[u])&&(c[u]=l);c.sort(t)}return new ti(i,this._parents).order()}function aK(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function cK(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function lK(){return Array.from(this)}function uK(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function fK(){let e=0;for(const t of this)++e;return e}function dK(){return!this.node()}function hK(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],s=0,o=i.length,a;s<o;++s)(a=i[s])&&e.call(a,a.__data__,s,i);return this}function pK(e){return function(){this.removeAttribute(e)}}function yK(e){return function(){this.removeAttributeNS(e.space,e.local)}}function mK(e,t){return function(){this.setAttribute(e,t)}}function gK(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function vK(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function bK(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function wK(e,t){var n=Lb(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?yK:pK:typeof t=="function"?n.local?bK:vK:n.local?gK:mK)(n,t))}function yF(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function _K(e){return function(){this.style.removeProperty(e)}}function SK(e,t,n){return function(){this.style.setProperty(e,t,n)}}function xK(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function IK(e,t,n){return arguments.length>1?this.each((t==null?_K:typeof t=="function"?xK:SK)(e,t,n??"")):Jf(this.node(),e)}function Jf(e,t){return e.style.getPropertyValue(t)||yF(e).getComputedStyle(e,null).getPropertyValue(t)}function EK(e){return function(){delete this[e]}}function TK(e,t){return function(){this[e]=t}}function AK(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function MK(e,t){return arguments.length>1?this.each((t==null?EK:typeof t=="function"?AK:TK)(e,t)):this.node()[e]}function mF(e){return e.trim().split(/^|\s+/)}function cT(e){return e.classList||new gF(e)}function gF(e){this._node=e,this._names=mF(e.getAttribute("class")||"")}gF.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function vF(e,t){for(var n=cT(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function bF(e,t){for(var n=cT(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function NK(e){return function(){vF(this,e)}}function $K(e){return function(){bF(this,e)}}function kK(e,t){return function(){(t.apply(this,arguments)?vF:bF)(this,e)}}function DK(e,t){var n=mF(e+"");if(arguments.length<2){for(var r=cT(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?kK:t?NK:$K)(n,t))}function OK(){this.textContent=""}function RK(e){return function(){this.textContent=e}}function FK(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function LK(e){return arguments.length?this.each(e==null?OK:(typeof e=="function"?FK:RK)(e)):this.node().textContent}function BK(){this.innerHTML=""}function CK(e){return function(){this.innerHTML=e}}function UK(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function PK(e){return arguments.length?this.each(e==null?BK:(typeof e=="function"?UK:CK)(e)):this.node().innerHTML}function zK(){this.nextSibling&&this.parentNode.appendChild(this)}function jK(){return this.each(zK)}function VK(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function YK(){return this.each(VK)}function qK(e){var t=typeof e=="function"?e:Bb(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function WK(){return null}function GK(e,t){var n=typeof e=="function"?e:Bb(e),r=t==null?WK:typeof t=="function"?t:aT(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function HK(){var e=this.parentNode;e&&e.removeChild(this)}function XK(){return this.each(HK)}function QK(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function KK(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function ZK(e){return this.select(e?KK:QK)}function JK(e){return arguments.length?this.property("__data__",e):this.node().__data__}function tZ(e){return function(t){e.call(this,t,this.__data__)}}function eZ(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function nZ(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,s;n<i;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function rZ(e,t,n){return function(){var r=this.__on,i,s=tZ(t);if(r){for(var o=0,a=r.length;o<a;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=t;return}}this.addEventListener(e.type,s,n),i={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(i):this.__on=[i]}}function iZ(e,t,n){var r=eZ(e+""),i,s=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var c=0,l=a.length,u;c<l;++c)for(i=0,u=a[c];i<s;++i)if((o=r[i]).type===u.type&&o.name===u.name)return u.value}return}for(a=t?rZ:nZ,i=0;i<s;++i)this.each(a(r[i],t,n));return this}function wF(e,t,n){var r=yF(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function sZ(e,t){return function(){return wF(this,e,t)}}function oZ(e,t){return function(){return wF(this,e,t.apply(this,arguments))}}function aZ(e,t){return this.each((typeof t=="function"?oZ:sZ)(e,t))}function*cZ(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var _F=[null];function ti(e,t){this._groups=e,this._parents=t}function Ly(){return new ti([[document.documentElement]],_F)}function lZ(){return this}ti.prototype=Ly.prototype={constructor:ti,select:FQ,selectAll:UQ,selectChild:VQ,selectChildren:GQ,filter:HQ,data:tK,enter:XQ,exit:nK,join:rK,merge:iK,selection:lZ,order:sK,sort:oK,call:cK,nodes:lK,node:uK,size:fK,empty:dK,each:hK,attr:wK,style:IK,property:MK,classed:DK,text:LK,html:PK,raise:jK,lower:YK,append:qK,insert:GK,remove:XK,clone:ZK,datum:JK,on:iZ,dispatch:aZ,[Symbol.iterator]:cZ};function xe(e){return typeof e=="string"?new ti([[document.querySelector(e)]],[document.documentElement]):new ti([[e]],_F)}function uZ(e){let t;for(;t=e.sourceEvent;)e=t;return e}function qi(e,t){if(e=uZ(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const rx={capture:!0,passive:!1};function ix(e){e.preventDefault(),e.stopImmediatePropagation()}function SF(e){var t=e.document.documentElement,n=xe(e).on("dragstart.drag",ix,rx);"onselectstart"in t?n.on("selectstart.drag",ix,rx):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function xF(e,t){var n=e.document.documentElement,r=xe(e).on("dragstart.drag",null);t&&(r.on("click.drag",ix,rx),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function Nd(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function By(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Ac(){}var zl=.7,td=1/zl,Mf="\\s*([+-]?\\d+)\\s*",Vp="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",js="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",fZ=/^#([0-9a-f]{3,8})$/,dZ=new RegExp(`^rgb\\(${Mf},${Mf},${Mf}\\)$`),hZ=new RegExp(`^rgb\\(${js},${js},${js}\\)$`),pZ=new RegExp(`^rgba\\(${Mf},${Mf},${Mf},${Vp}\\)$`),yZ=new RegExp(`^rgba\\(${js},${js},${js},${Vp}\\)$`),mZ=new RegExp(`^hsl\\(${Vp},${js},${js}\\)$`),gZ=new RegExp(`^hsla\\(${Vp},${js},${js},${Vp}\\)$`),HN={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Nd(Ac,uc,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:XN,formatHex:XN,formatHex8:vZ,formatHsl:bZ,formatRgb:QN,toString:QN});function XN(){return this.rgb().formatHex()}function vZ(){return this.rgb().formatHex8()}function bZ(){return IF(this).formatHsl()}function QN(){return this.rgb().formatRgb()}function uc(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=fZ.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?KN(t):n===3?new Mn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Wm(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Wm(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=dZ.exec(e))?new Mn(t[1],t[2],t[3],1):(t=hZ.exec(e))?new Mn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=pZ.exec(e))?Wm(t[1],t[2],t[3],t[4]):(t=yZ.exec(e))?Wm(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=mZ.exec(e))?t$(t[1],t[2]/100,t[3]/100,1):(t=gZ.exec(e))?t$(t[1],t[2]/100,t[3]/100,t[4]):HN.hasOwnProperty(e)?KN(HN[e]):e==="transparent"?new Mn(NaN,NaN,NaN,0):null}function KN(e){return new Mn(e>>16&255,e>>8&255,e&255,1)}function Wm(e,t,n,r){return r<=0&&(e=t=n=NaN),new Mn(e,t,n,r)}function lT(e){return e instanceof Ac||(e=uc(e)),e?(e=e.rgb(),new Mn(e.r,e.g,e.b,e.opacity)):new Mn}function Ri(e,t,n,r){return arguments.length===1?lT(e):new Mn(e,t,n,r??1)}function Mn(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Nd(Mn,Ri,By(Ac,{brighter(e){return e=e==null?td:Math.pow(td,e),new Mn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?zl:Math.pow(zl,e),new Mn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Mn(xl(this.r),xl(this.g),xl(this.b),b1(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ZN,formatHex:ZN,formatHex8:wZ,formatRgb:JN,toString:JN}));function ZN(){return`#${dl(this.r)}${dl(this.g)}${dl(this.b)}`}function wZ(){return`#${dl(this.r)}${dl(this.g)}${dl(this.b)}${dl((isNaN(this.opacity)?1:this.opacity)*255)}`}function JN(){const e=b1(this.opacity);return`${e===1?"rgb(":"rgba("}${xl(this.r)}, ${xl(this.g)}, ${xl(this.b)}${e===1?")":`, ${e})`}`}function b1(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function xl(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function dl(e){return e=xl(e),(e<16?"0":"")+e.toString(16)}function t$(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Xi(e,t,n,r)}function IF(e){if(e instanceof Xi)return new Xi(e.h,e.s,e.l,e.opacity);if(e instanceof Ac||(e=uc(e)),!e)return new Xi;if(e instanceof Xi)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),o=NaN,a=s-i,c=(s+i)/2;return a?(t===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-t)/a+2:o=(t-n)/a+4,a/=c<.5?s+i:2-s-i,o*=60):a=c>0&&c<1?0:o,new Xi(o,a,c,e.opacity)}function sx(e,t,n,r){return arguments.length===1?IF(e):new Xi(e,t,n,r??1)}function Xi(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Nd(Xi,sx,By(Ac,{brighter(e){return e=e==null?td:Math.pow(td,e),new Xi(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?zl:Math.pow(zl,e),new Xi(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Mn(M_(e>=240?e-240:e+120,i,r),M_(e,i,r),M_(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Xi(e$(this.h),Gm(this.s),Gm(this.l),b1(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=b1(this.opacity);return`${e===1?"hsl(":"hsla("}${e$(this.h)}, ${Gm(this.s)*100}%, ${Gm(this.l)*100}%${e===1?")":`, ${e})`}`}}));function e$(e){return e=(e||0)%360,e<0?e+360:e}function Gm(e){return Math.max(0,Math.min(1,e||0))}function M_(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const EF=Math.PI/180,TF=180/Math.PI,w1=18,AF=.96422,MF=1,NF=.82521,$F=4/29,Nf=6/29,kF=3*Nf*Nf,_Z=Nf*Nf*Nf;function DF(e){if(e instanceof Vs)return new Vs(e.l,e.a,e.b,e.opacity);if(e instanceof Ro)return OF(e);e instanceof Mn||(e=lT(e));var t=D_(e.r),n=D_(e.g),r=D_(e.b),i=N_((.2225045*t+.7168786*n+.0606169*r)/MF),s,o;return t===n&&n===r?s=o=i:(s=N_((.4360747*t+.3850649*n+.1430804*r)/AF),o=N_((.0139322*t+.0971045*n+.7141733*r)/NF)),new Vs(116*i-16,500*(s-i),200*(i-o),e.opacity)}function ox(e,t,n,r){return arguments.length===1?DF(e):new Vs(e,t,n,r??1)}function Vs(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}Nd(Vs,ox,By(Ac,{brighter(e){return new Vs(this.l+w1*(e??1),this.a,this.b,this.opacity)},darker(e){return new Vs(this.l-w1*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=AF*$_(t),e=MF*$_(e),n=NF*$_(n),new Mn(k_(3.1338561*t-1.6168667*e-.4906146*n),k_(-.9787684*t+1.9161415*e+.033454*n),k_(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function N_(e){return e>_Z?Math.pow(e,1/3):e/kF+$F}function $_(e){return e>Nf?e*e*e:kF*(e-$F)}function k_(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function D_(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function SZ(e){if(e instanceof Ro)return new Ro(e.h,e.c,e.l,e.opacity);if(e instanceof Vs||(e=DF(e)),e.a===0&&e.b===0)return new Ro(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*TF;return new Ro(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function ax(e,t,n,r){return arguments.length===1?SZ(e):new Ro(e,t,n,r??1)}function Ro(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function OF(e){if(isNaN(e.h))return new Vs(e.l,0,0,e.opacity);var t=e.h*EF;return new Vs(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}Nd(Ro,ax,By(Ac,{brighter(e){return new Ro(this.h,this.c,this.l+w1*(e??1),this.opacity)},darker(e){return new Ro(this.h,this.c,this.l-w1*(e??1),this.opacity)},rgb(){return OF(this).rgb()}}));var RF=-.14861,uT=1.78277,fT=-.29227,Cb=-.90649,Yp=1.97294,n$=Yp*Cb,r$=Yp*uT,i$=uT*fT-Cb*RF;function xZ(e){if(e instanceof Il)return new Il(e.h,e.s,e.l,e.opacity);e instanceof Mn||(e=lT(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(i$*r+n$*t-r$*n)/(i$+n$-r$),s=r-i,o=(Yp*(n-i)-fT*s)/Cb,a=Math.sqrt(o*o+s*s)/(Yp*i*(1-i)),c=a?Math.atan2(o,s)*TF-120:NaN;return new Il(c<0?c+360:c,a,i,e.opacity)}function Xs(e,t,n,r){return arguments.length===1?xZ(e):new Il(e,t,n,r??1)}function Il(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Nd(Il,Xs,By(Ac,{brighter(e){return e=e==null?td:Math.pow(td,e),new Il(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?zl:Math.pow(zl,e),new Il(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*EF,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new Mn(255*(t+n*(RF*r+uT*i)),255*(t+n*(fT*r+Cb*i)),255*(t+n*(Yp*r)),this.opacity)}}));function IZ(e,t,n,r,i){var s=e*e,o=s*e;return((1-3*e+3*s-o)*t+(4-6*s+3*o)*n+(1+3*e+3*s-3*o)*r+o*i)/6}function EZ(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],s=e[r+1],o=r>0?e[r-1]:2*i-s,a=r<t-1?e[r+2]:2*s-i;return IZ((n-r/t)*t,o,i,s,a)}}const Ub=e=>()=>e;function FF(e,t){return function(n){return e+n*t}}function TZ(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function dT(e,t){var n=t-e;return n?FF(e,n>180||n<-180?n-360*Math.round(n/360):n):Ub(isNaN(e)?t:e)}function AZ(e){return(e=+e)==1?Jn:function(t,n){return n-t?TZ(t,n,e):Ub(isNaN(t)?n:t)}}function Jn(e,t){var n=t-e;return n?FF(e,n):Ub(isNaN(e)?t:e)}const jl=function e(t){var n=AZ(t);function r(i,s){var o=n((i=Ri(i)).r,(s=Ri(s)).r),a=n(i.g,s.g),c=n(i.b,s.b),l=Jn(i.opacity,s.opacity);return function(u){return i.r=o(u),i.g=a(u),i.b=c(u),i.opacity=l(u),i+""}}return r.gamma=e,r}(1);function MZ(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),s=new Array(n),o,a;for(o=0;o<n;++o)a=Ri(t[o]),r[o]=a.r||0,i[o]=a.g||0,s[o]=a.b||0;return r=e(r),i=e(i),s=e(s),a.opacity=1,function(c){return a.r=r(c),a.g=i(c),a.b=s(c),a+""}}}var NZ=MZ(EZ);function $Z(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function kZ(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function DZ(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=$d(e[o],t[o]);for(;o<n;++o)s[o]=t[o];return function(a){for(o=0;o<r;++o)s[o]=i[o](a);return s}}function OZ(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Qn(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function RZ(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=$d(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var cx=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,O_=new RegExp(cx.source,"g");function FZ(e){return function(){return e}}function LZ(e){return function(t){return e(t)+""}}function LF(e,t){var n=cx.lastIndex=O_.lastIndex=0,r,i,s,o=-1,a=[],c=[];for(e=e+"",t=t+"";(r=cx.exec(e))&&(i=O_.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,c.push({i:o,x:Qn(r,i)})),n=O_.lastIndex;return n<t.length&&(s=t.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?c[0]?LZ(c[0].x):FZ(t):(t=c.length,function(l){for(var u=0,f;u<t;++u)a[(f=c[u]).i]=f.x(l);return a.join("")})}function $d(e,t){var n=typeof t,r;return t==null||n==="boolean"?Ub(t):(n==="number"?Qn:n==="string"?(r=uc(t))?(t=r,jl):LF:t instanceof uc?jl:t instanceof Date?OZ:kZ(t)?$Z:Array.isArray(t)?DZ:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?RZ:Qn)(e,t)}function hT(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var s$=180/Math.PI,lx={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function BF(e,t,n,r,i,s){var o,a,c;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(c=e*n+t*r)&&(n-=e*c,r-=t*c),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,c/=a),e*r<t*n&&(e=-e,t=-t,c=-c,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*s$,skewX:Math.atan(c)*s$,scaleX:o,scaleY:a}}var Hm;function BZ(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?lx:BF(t.a,t.b,t.c,t.d,t.e,t.f)}function CZ(e){return e==null||(Hm||(Hm=document.createElementNS("http://www.w3.org/2000/svg","g")),Hm.setAttribute("transform",e),!(e=Hm.transform.baseVal.consolidate()))?lx:(e=e.matrix,BF(e.a,e.b,e.c,e.d,e.e,e.f))}function CF(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function s(l,u,f,d,h,p){if(l!==f||u!==d){var g=h.push("translate(",null,t,null,n);p.push({i:g-4,x:Qn(l,f)},{i:g-2,x:Qn(u,d)})}else(f||d)&&h.push("translate("+f+t+d+n)}function o(l,u,f,d){l!==u?(l-u>180?u+=360:u-l>180&&(l+=360),d.push({i:f.push(i(f)+"rotate(",null,r)-2,x:Qn(l,u)})):u&&f.push(i(f)+"rotate("+u+r)}function a(l,u,f,d){l!==u?d.push({i:f.push(i(f)+"skewX(",null,r)-2,x:Qn(l,u)}):u&&f.push(i(f)+"skewX("+u+r)}function c(l,u,f,d,h,p){if(l!==f||u!==d){var g=h.push(i(h)+"scale(",null,",",null,")");p.push({i:g-4,x:Qn(l,f)},{i:g-2,x:Qn(u,d)})}else(f!==1||d!==1)&&h.push(i(h)+"scale("+f+","+d+")")}return function(l,u){var f=[],d=[];return l=e(l),u=e(u),s(l.translateX,l.translateY,u.translateX,u.translateY,f,d),o(l.rotate,u.rotate,f,d),a(l.skewX,u.skewX,f,d),c(l.scaleX,l.scaleY,u.scaleX,u.scaleY,f,d),l=u=null,function(h){for(var p=-1,g=d.length,b;++p<g;)f[(b=d[p]).i]=b.x(h);return f.join("")}}}var UZ=CF(BZ,"px, ","px)","deg)"),PZ=CF(CZ,", ",")",")"),zZ=1e-12;function o$(e){return((e=Math.exp(e))+1/e)/2}function jZ(e){return((e=Math.exp(e))-1/e)/2}function VZ(e){return((e=Math.exp(2*e))-1)/(e+1)}const YZ=function e(t,n,r){function i(s,o){var a=s[0],c=s[1],l=s[2],u=o[0],f=o[1],d=o[2],h=u-a,p=f-c,g=h*h+p*p,b,y;if(g<zZ)y=Math.log(d/l)/t,b=function(x){return[a+x*h,c+x*p,l*Math.exp(t*x*y)]};else{var m=Math.sqrt(g),v=(d*d-l*l+r*g)/(2*l*n*m),w=(d*d-l*l-r*g)/(2*d*n*m),_=Math.log(Math.sqrt(v*v+1)-v),S=Math.log(Math.sqrt(w*w+1)-w);y=(S-_)/t,b=function(x){var T=x*y,$=o$(_),I=l/(n*m)*($*VZ(t*T+_)-jZ(_));return[a+I*h,c+I*p,l*$/o$(t*T+_)]}}return b.duration=y*1e3*t/Math.SQRT2,b}return i.rho=function(s){var o=Math.max(.001,+s),a=o*o,c=a*a;return e(o,a,c)},i}(Math.SQRT2,2,4);function qZ(e){return function(t,n){var r=e((t=sx(t)).h,(n=sx(n)).h),i=Jn(t.s,n.s),s=Jn(t.l,n.l),o=Jn(t.opacity,n.opacity);return function(a){return t.h=r(a),t.s=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const WZ=qZ(dT);function GZ(e,t){var n=Jn((e=ox(e)).l,(t=ox(t)).l),r=Jn(e.a,t.a),i=Jn(e.b,t.b),s=Jn(e.opacity,t.opacity);return function(o){return e.l=n(o),e.a=r(o),e.b=i(o),e.opacity=s(o),e+""}}function HZ(e){return function(t,n){var r=e((t=ax(t)).h,(n=ax(n)).h),i=Jn(t.c,n.c),s=Jn(t.l,n.l),o=Jn(t.opacity,n.opacity);return function(a){return t.h=r(a),t.c=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const XZ=HZ(dT);function UF(e){return function t(n){n=+n;function r(i,s){var o=e((i=Xs(i)).h,(s=Xs(s)).h),a=Jn(i.s,s.s),c=Jn(i.l,s.l),l=Jn(i.opacity,s.opacity);return function(u){return i.h=o(u),i.s=a(u),i.l=c(Math.pow(u,n)),i.opacity=l(u),i+""}}return r.gamma=t,r}(1)}UF(dT);var pT=UF(Jn);function Pb(e,t){t===void 0&&(t=e,e=$d);for(var n=0,r=t.length-1,i=t[0],s=new Array(r<0?0:r);n<r;)s[n]=e(i,i=t[++n]);return function(o){var a=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return s[a](o-a)}}function ss(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}var ed=0,$h=0,ih=0,PF=1e3,_1,kh,S1=0,Vl=0,zb=0,qp=typeof performance=="object"&&performance.now?performance:Date,zF=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function yT(){return Vl||(zF(QZ),Vl=qp.now()+zb)}function QZ(){Vl=0}function x1(){this._call=this._time=this._next=null}x1.prototype=jF.prototype={constructor:x1,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?yT():+n)+(t==null?0:+t),!this._next&&kh!==this&&(kh?kh._next=this:_1=this,kh=this),this._call=e,this._time=n,ux()},stop:function(){this._call&&(this._call=null,this._time=1/0,ux())}};function jF(e,t,n){var r=new x1;return r.restart(e,t,n),r}function KZ(){yT(),++ed;for(var e=_1,t;e;)(t=Vl-e._time)>=0&&e._call.call(void 0,t),e=e._next;--ed}function a$(){Vl=(S1=qp.now())+zb,ed=$h=0;try{KZ()}finally{ed=0,JZ(),Vl=0}}function ZZ(){var e=qp.now(),t=e-S1;t>PF&&(zb-=t,S1=e)}function JZ(){for(var e,t=_1,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:_1=n);kh=e,ux(r)}function ux(e){if(!ed){$h&&($h=clearTimeout($h));var t=e-Vl;t>24?(e<1/0&&($h=setTimeout(a$,e-qp.now()-zb)),ih&&(ih=clearInterval(ih))):(ih||(S1=qp.now(),ih=setInterval(ZZ,PF)),ed=1,zF(a$))}}function c$(e,t,n){var r=new x1;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var tJ=Fb("start","end","cancel","interrupt"),eJ=[],VF=0,l$=1,fx=2,H0=3,u$=4,dx=5,X0=6;function jb(e,t,n,r,i,s){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;nJ(e,n,{name:t,index:r,group:i,on:tJ,tween:eJ,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:VF})}function mT(e,t){var n=fs(e,t);if(n.state>VF)throw new Error("too late; already scheduled");return n}function Zs(e,t){var n=fs(e,t);if(n.state>H0)throw new Error("too late; already running");return n}function fs(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function nJ(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=jF(s,0,n.time);function s(l){n.state=l$,n.timer.restart(o,n.delay,n.time),n.delay<=l&&o(l-n.delay)}function o(l){var u,f,d,h;if(n.state!==l$)return c();for(u in r)if(h=r[u],h.name===n.name){if(h.state===H0)return c$(o);h.state===u$?(h.state=X0,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[u]):+u<t&&(h.state=X0,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[u])}if(c$(function(){n.state===H0&&(n.state=u$,n.timer.restart(a,n.delay,n.time),a(l))}),n.state=fx,n.on.call("start",e,e.__data__,n.index,n.group),n.state===fx){for(n.state=H0,i=new Array(d=n.tween.length),u=0,f=-1;u<d;++u)(h=n.tween[u].value.call(e,e.__data__,n.index,n.group))&&(i[++f]=h);i.length=f+1}}function a(l){for(var u=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(c),n.state=dx,1),f=-1,d=i.length;++f<d;)i[f].call(e,u);n.state===dx&&(n.on.call("end",e,e.__data__,n.index,n.group),c())}function c(){n.state=X0,n.timer.stop(),delete r[t];for(var l in r)return;delete e.__transition}}function $f(e,t){var n=e.__transition,r,i,s=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){s=!1;continue}i=r.state>fx&&r.state<dx,r.state=X0,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}s&&delete e.__transition}}function rJ(e){return this.each(function(){$f(this,e)})}function iJ(e,t){var n,r;return function(){var i=Zs(this,e),s=i.tween;if(s!==n){r=n=s;for(var o=0,a=r.length;o<a;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function sJ(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=Zs(this,e),o=s.tween;if(o!==r){i=(r=o).slice();for(var a={name:t,value:n},c=0,l=i.length;c<l;++c)if(i[c].name===t){i[c]=a;break}c===l&&i.push(a)}s.tween=i}}function oJ(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=fs(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?iJ:sJ)(n,e,t))}function gT(e,t,n){var r=e._id;return e.each(function(){var i=Zs(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return fs(i,r).value[t]}}function YF(e,t){var n;return(typeof t=="number"?Qn:t instanceof uc?jl:(n=uc(t))?(t=n,jl):LF)(e,t)}function aJ(e){return function(){this.removeAttribute(e)}}function cJ(e){return function(){this.removeAttributeNS(e.space,e.local)}}function lJ(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttribute(e);return o===i?null:o===r?s:s=t(r=o,n)}}function uJ(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?s:s=t(r=o,n)}}function fJ(e,t,n){var r,i,s;return function(){var o,a=n(this),c;return a==null?void this.removeAttribute(e):(o=this.getAttribute(e),c=a+"",o===c?null:o===r&&c===i?s:(i=c,s=t(r=o,a)))}}function dJ(e,t,n){var r,i,s;return function(){var o,a=n(this),c;return a==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),c=a+"",o===c?null:o===r&&c===i?s:(i=c,s=t(r=o,a)))}}function hJ(e,t){var n=Lb(e),r=n==="transform"?PZ:YF;return this.attrTween(e,typeof t=="function"?(n.local?dJ:fJ)(n,r,gT(this,"attr."+e,t)):t==null?(n.local?cJ:aJ)(n):(n.local?uJ:lJ)(n,r,t))}function pJ(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function yJ(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function mJ(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&yJ(e,s)),n}return i._value=t,i}function gJ(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&pJ(e,s)),n}return i._value=t,i}function vJ(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=Lb(e);return this.tween(n,(r.local?mJ:gJ)(r,t))}function bJ(e,t){return function(){mT(this,e).delay=+t.apply(this,arguments)}}function wJ(e,t){return t=+t,function(){mT(this,e).delay=t}}function _J(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?bJ:wJ)(t,e)):fs(this.node(),t).delay}function SJ(e,t){return function(){Zs(this,e).duration=+t.apply(this,arguments)}}function xJ(e,t){return t=+t,function(){Zs(this,e).duration=t}}function IJ(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?SJ:xJ)(t,e)):fs(this.node(),t).duration}function EJ(e,t){if(typeof t!="function")throw new Error;return function(){Zs(this,e).ease=t}}function TJ(e){var t=this._id;return arguments.length?this.each(EJ(t,e)):fs(this.node(),t).ease}function AJ(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Zs(this,e).ease=n}}function MJ(e){if(typeof e!="function")throw new Error;return this.each(AJ(this._id,e))}function NJ(e){typeof e!="function"&&(e=dF(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],c,l=0;l<o;++l)(c=s[l])&&e.call(c,c.__data__,l,s)&&a.push(c);return new Zo(r,this._parents,this._name,this._id)}function $J(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var c=t[a],l=n[a],u=c.length,f=o[a]=new Array(u),d,h=0;h<u;++h)(d=c[h]||l[h])&&(f[h]=d);for(;a<r;++a)o[a]=t[a];return new Zo(o,this._parents,this._name,this._id)}function kJ(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function DJ(e,t,n){var r,i,s=kJ(t)?mT:Zs;return function(){var o=s(this,e),a=o.on;a!==r&&(i=(r=a).copy()).on(t,n),o.on=i}}function OJ(e,t){var n=this._id;return arguments.length<2?fs(this.node(),n).on.on(e):this.each(DJ(n,e,t))}function RJ(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function FJ(){return this.on("end.remove",RJ(this._id))}function LJ(e){var t=this._name,n=this._id;typeof e!="function"&&(e=aT(e));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a=r[o],c=a.length,l=s[o]=new Array(c),u,f,d=0;d<c;++d)(u=a[d])&&(f=e.call(u,u.__data__,d,a))&&("__data__"in u&&(f.__data__=u.__data__),l[d]=f,jb(l[d],t,n,d,l,fs(u,n)));return new Zo(s,this._parents,t,n)}function BJ(e){var t=this._name,n=this._id;typeof e!="function"&&(e=fF(e));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var c=r[a],l=c.length,u,f=0;f<l;++f)if(u=c[f]){for(var d=e.call(u,u.__data__,f,c),h,p=fs(u,n),g=0,b=d.length;g<b;++g)(h=d[g])&&jb(h,t,n,g,d,p);s.push(d),o.push(u)}return new Zo(s,o,t,n)}var CJ=Ly.prototype.constructor;function UJ(){return new CJ(this._groups,this._parents)}function PJ(e,t){var n,r,i;return function(){var s=Jf(this,e),o=(this.style.removeProperty(e),Jf(this,e));return s===o?null:s===n&&o===r?i:i=t(n=s,r=o)}}function qF(e){return function(){this.style.removeProperty(e)}}function zJ(e,t,n){var r,i=n+"",s;return function(){var o=Jf(this,e);return o===i?null:o===r?s:s=t(r=o,n)}}function jJ(e,t,n){var r,i,s;return function(){var o=Jf(this,e),a=n(this),c=a+"";return a==null&&(c=a=(this.style.removeProperty(e),Jf(this,e))),o===c?null:o===r&&c===i?s:(i=c,s=t(r=o,a))}}function VJ(e,t){var n,r,i,s="style."+t,o="end."+s,a;return function(){var c=Zs(this,e),l=c.on,u=c.value[s]==null?a||(a=qF(t)):void 0;(l!==n||i!==u)&&(r=(n=l).copy()).on(o,i=u),c.on=r}}function YJ(e,t,n){var r=(e+="")=="transform"?UZ:YF;return t==null?this.styleTween(e,PJ(e,r)).on("end.style."+e,qF(e)):typeof t=="function"?this.styleTween(e,jJ(e,r,gT(this,"style."+e,t))).each(VJ(this._id,e)):this.styleTween(e,zJ(e,r,t),n).on("end.style."+e,null)}function qJ(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function WJ(e,t,n){var r,i;function s(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&qJ(e,o,n)),r}return s._value=t,s}function GJ(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,WJ(e,t,n??""))}function HJ(e){return function(){this.textContent=e}}function XJ(e){return function(){var t=e(this);this.textContent=t??""}}function QJ(e){return this.tween("text",typeof e=="function"?XJ(gT(this,"text",e)):HJ(e==null?"":e+""))}function KJ(e){return function(t){this.textContent=e.call(this,t)}}function ZJ(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&KJ(i)),t}return r._value=e,r}function JJ(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,ZJ(e))}function ttt(){for(var e=this._name,t=this._id,n=WF(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,c,l=0;l<a;++l)if(c=o[l]){var u=fs(c,t);jb(c,e,n,l,o,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new Zo(r,this._parents,e,n)}function ett(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var a={value:o},c={value:function(){--i===0&&s()}};n.each(function(){var l=Zs(this,r),u=l.on;u!==e&&(t=(e=u).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(c)),l.on=t}),i===0&&s()})}var ntt=0;function Zo(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function WF(){return++ntt}var so=Ly.prototype;Zo.prototype={constructor:Zo,select:LJ,selectAll:BJ,selectChild:so.selectChild,selectChildren:so.selectChildren,filter:NJ,merge:$J,selection:UJ,transition:ttt,call:so.call,nodes:so.nodes,node:so.node,size:so.size,empty:so.empty,each:so.each,on:OJ,attr:hJ,attrTween:vJ,style:YJ,styleTween:GJ,text:QJ,textTween:JJ,remove:FJ,tween:oJ,delay:_J,duration:IJ,ease:TJ,easeVarying:MJ,end:ett,[Symbol.iterator]:so[Symbol.iterator]};function rtt(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var itt={time:null,delay:0,duration:250,ease:rtt};function stt(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function ott(e){var t,n;e instanceof Zo?(t=e._id,e=e._name):(t=WF(),(n=itt).time=yT(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,c,l=0;l<a;++l)(c=o[l])&&jb(c,e,t,l,o,n||stt(c,t));return new Zo(r,this._parents,e,t)}Ly.prototype.interrupt=rJ;Ly.prototype.transition=ott;const R_=e=>()=>e;function att(e,{sourceEvent:t,target:n,selection:r,mode:i,dispatch:s}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:s}})}function ctt(e){e.stopImmediatePropagation()}function F_(e){e.preventDefault(),e.stopImmediatePropagation()}var f$={name:"drag"},L_={name:"space"},pu={name:"handle"},yu={name:"center"};const{abs:d$,max:qn,min:Wn}=Math;function h$(e){return[+e[0],+e[1]]}function hx(e){return[h$(e[0]),h$(e[1])]}var Q0={name:"x",handles:["w","e"].map(Wp),input:function(e,t){return e==null?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},K0={name:"y",handles:["n","s"].map(Wp),input:function(e,t){return e==null?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},ltt={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(Wp),input:function(e){return e==null?null:hx(e)},output:function(e){return e}},oo={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},p$={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},y$={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},utt={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},ftt={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function Wp(e){return{type:e}}function dtt(e){return!e.ctrlKey&&!e.button}function htt(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function ptt(){return navigator.maxTouchPoints||"ontouchstart"in this}function B_(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function ytt(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function mtt(){return vT(Q0)}function gtt(){return vT(K0)}function vtt(){return vT(ltt)}function vT(e){var t=htt,n=dtt,r=ptt,i=!0,s=Fb("start","brush","end"),o=6,a;function c(b){var y=b.property("__brush",g).selectAll(".overlay").data([Wp("overlay")]);y.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",oo.overlay).merge(y).each(function(){var v=B_(this).extent;xe(this).attr("x",v[0][0]).attr("y",v[0][1]).attr("width",v[1][0]-v[0][0]).attr("height",v[1][1]-v[0][1])}),b.selectAll(".selection").data([Wp("selection")]).enter().append("rect").attr("class","selection").attr("cursor",oo.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var m=b.selectAll(".handle").data(e.handles,function(v){return v.type});m.exit().remove(),m.enter().append("rect").attr("class",function(v){return"handle handle--"+v.type}).attr("cursor",function(v){return oo[v.type]}),b.each(l).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",d).filter(r).on("touchstart.brush",d).on("touchmove.brush",h).on("touchend.brush touchcancel.brush",p).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}c.move=function(b,y,m){b.tween?b.on("start.brush",function(v){u(this,arguments).beforestart().start(v)}).on("interrupt.brush end.brush",function(v){u(this,arguments).end(v)}).tween("brush",function(){var v=this,w=v.__brush,_=u(v,arguments),S=w.selection,x=e.input(typeof y=="function"?y.apply(this,arguments):y,w.extent),T=$d(S,x);function $(I){w.selection=I===1&&x===null?null:T(I),l.call(v),_.brush()}return S!==null&&x!==null?$:$(1)}):b.each(function(){var v=this,w=arguments,_=v.__brush,S=e.input(typeof y=="function"?y.apply(v,w):y,_.extent),x=u(v,w).beforestart();$f(v),_.selection=S===null?null:S,l.call(v),x.start(m).brush(m).end(m)})},c.clear=function(b,y){c.move(b,null,y)};function l(){var b=xe(this),y=B_(this).selection;y?(b.selectAll(".selection").style("display",null).attr("x",y[0][0]).attr("y",y[0][1]).attr("width",y[1][0]-y[0][0]).attr("height",y[1][1]-y[0][1]),b.selectAll(".handle").style("display",null).attr("x",function(m){return m.type[m.type.length-1]==="e"?y[1][0]-o/2:y[0][0]-o/2}).attr("y",function(m){return m.type[0]==="s"?y[1][1]-o/2:y[0][1]-o/2}).attr("width",function(m){return m.type==="n"||m.type==="s"?y[1][0]-y[0][0]+o:o}).attr("height",function(m){return m.type==="e"||m.type==="w"?y[1][1]-y[0][1]+o:o})):b.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function u(b,y,m){var v=b.__brush.emitter;return v&&(!m||!v.clean)?v:new f(b,y,m)}function f(b,y,m){this.that=b,this.args=y,this.state=b.__brush,this.active=0,this.clean=m}f.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(b,y){return this.starting?(this.starting=!1,this.emit("start",b,y)):this.emit("brush",b),this},brush:function(b,y){return this.emit("brush",b,y),this},end:function(b,y){return--this.active===0&&(delete this.state.emitter,this.emit("end",b,y)),this},emit:function(b,y,m){var v=xe(this.that).datum();s.call(b,this.that,new att(b,{sourceEvent:y,target:c,selection:e.output(this.state.selection),mode:m,dispatch:s}),v)}};function d(b){if(a&&!b.touches||!n.apply(this,arguments))return;var y=this,m=b.target.__data__.type,v=(i&&b.metaKey?m="overlay":m)==="selection"?f$:i&&b.altKey?yu:pu,w=e===K0?null:utt[m],_=e===Q0?null:ftt[m],S=B_(y),x=S.extent,T=S.selection,$=x[0][0],I,A,D=x[0][1],F,E,N=x[1][0],M,R,O=x[1][1],C,L,P=0,z=0,G,Q=w&&_&&i&&b.shiftKey,rt,Z,q=Array.from(b.touches||[b],ct=>{const ue=ct.identifier;return ct=qi(ct,y),ct.point0=ct.slice(),ct.identifier=ue,ct});$f(y);var K=u(y,arguments,!0).beforestart();if(m==="overlay"){T&&(G=!0);const ct=[q[0],q[1]||q[0]];S.selection=T=[[I=e===K0?$:Wn(ct[0][0],ct[1][0]),F=e===Q0?D:Wn(ct[0][1],ct[1][1])],[M=e===K0?N:qn(ct[0][0],ct[1][0]),C=e===Q0?O:qn(ct[0][1],ct[1][1])]],q.length>1&&Tt(b)}else I=T[0][0],F=T[0][1],M=T[1][0],C=T[1][1];A=I,E=F,R=M,L=C;var Y=xe(y).attr("pointer-events","none"),et=Y.selectAll(".overlay").attr("cursor",oo[m]);if(b.touches)K.moved=j,K.ended=ut;else{var st=xe(b.view).on("mousemove.brush",j,!0).on("mouseup.brush",ut,!0);i&&st.on("keydown.brush",jt,!0).on("keyup.brush",qt,!0),SF(b.view)}l.call(y),K.start(b,v.name);function j(ct){for(const ue of ct.changedTouches||[ct])for(const ci of q)ci.identifier===ue.identifier&&(ci.cur=qi(ue,y));if(Q&&!rt&&!Z&&q.length===1){const ue=q[0];d$(ue.cur[0]-ue[0])>d$(ue.cur[1]-ue[1])?Z=!0:rt=!0}for(const ue of q)ue.cur&&(ue[0]=ue.cur[0],ue[1]=ue.cur[1]);G=!0,F_(ct),Tt(ct)}function Tt(ct){const ue=q[0],ci=ue.point0;var yn;switch(P=ue[0]-ci[0],z=ue[1]-ci[1],v){case L_:case f$:{w&&(P=qn($-I,Wn(N-M,P)),A=I+P,R=M+P),_&&(z=qn(D-F,Wn(O-C,z)),E=F+z,L=C+z);break}case pu:{q[1]?(w&&(A=qn($,Wn(N,q[0][0])),R=qn($,Wn(N,q[1][0])),w=1),_&&(E=qn(D,Wn(O,q[0][1])),L=qn(D,Wn(O,q[1][1])),_=1)):(w<0?(P=qn($-I,Wn(N-I,P)),A=I+P,R=M):w>0&&(P=qn($-M,Wn(N-M,P)),A=I,R=M+P),_<0?(z=qn(D-F,Wn(O-F,z)),E=F+z,L=C):_>0&&(z=qn(D-C,Wn(O-C,z)),E=F,L=C+z));break}case yu:{w&&(A=qn($,Wn(N,I-P*w)),R=qn($,Wn(N,M+P*w))),_&&(E=qn(D,Wn(O,F-z*_)),L=qn(D,Wn(O,C+z*_)));break}}R<A&&(w*=-1,yn=I,I=M,M=yn,yn=A,A=R,R=yn,m in p$&&et.attr("cursor",oo[m=p$[m]])),L<E&&(_*=-1,yn=F,F=C,C=yn,yn=E,E=L,L=yn,m in y$&&et.attr("cursor",oo[m=y$[m]])),S.selection&&(T=S.selection),rt&&(A=T[0][0],R=T[1][0]),Z&&(E=T[0][1],L=T[1][1]),(T[0][0]!==A||T[0][1]!==E||T[1][0]!==R||T[1][1]!==L)&&(S.selection=[[A,E],[R,L]],l.call(y),K.brush(ct,v.name))}function ut(ct){if(ctt(ct),ct.touches){if(ct.touches.length)return;a&&clearTimeout(a),a=setTimeout(function(){a=null},500)}else xF(ct.view,G),st.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);Y.attr("pointer-events","all"),et.attr("cursor",oo.overlay),S.selection&&(T=S.selection),ytt(T)&&(S.selection=null,l.call(y)),K.end(ct,v.name)}function jt(ct){switch(ct.keyCode){case 16:{Q=w&&_;break}case 18:{v===pu&&(w&&(M=R-P*w,I=A+P*w),_&&(C=L-z*_,F=E+z*_),v=yu,Tt(ct));break}case 32:{(v===pu||v===yu)&&(w<0?M=R-P:w>0&&(I=A-P),_<0?C=L-z:_>0&&(F=E-z),v=L_,et.attr("cursor",oo.selection),Tt(ct));break}default:return}F_(ct)}function qt(ct){switch(ct.keyCode){case 16:{Q&&(rt=Z=Q=!1,Tt(ct));break}case 18:{v===yu&&(w<0?M=R:w>0&&(I=A),_<0?C=L:_>0&&(F=E),v=pu,Tt(ct));break}case 32:{v===L_&&(ct.altKey?(w&&(M=R-P*w,I=A+P*w),_&&(C=L-z*_,F=E+z*_),v=yu):(w<0?M=R:w>0&&(I=A),_<0?C=L:_>0&&(F=E),v=pu),et.attr("cursor",oo[m]),Tt(ct));break}default:return}F_(ct)}}function h(b){u(this,arguments).moved(b)}function p(b){u(this,arguments).ended(b)}function g(){var b=this.__brush||{selection:null};return b.extent=hx(t.apply(this,arguments)),b.dim=e,b}return c.extent=function(b){return arguments.length?(t=typeof b=="function"?b:R_(hx(b)),c):t},c.filter=function(b){return arguments.length?(n=typeof b=="function"?b:R_(!!b),c):n},c.touchable=function(b){return arguments.length?(r=typeof b=="function"?b:R_(!!b),c):r},c.handleSize=function(b){return arguments.length?(o=+b,c):o},c.keyModifiers=function(b){return arguments.length?(i=!!b,c):i},c.on=function(){var b=s.on.apply(s,arguments);return b===s?c:b},c}const px=Math.PI,yx=2*px,rl=1e-6,btt=yx-rl;function GF(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function wtt(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return GF;const n=10**t;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let HF=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?GF:wtt(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,s,o){this._append`C${+t},${+n},${+r},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(t,n,r,i,s){if(t=+t,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,c=r-t,l=i-n,u=o-t,f=a-n,d=u*u+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(d>rl)if(!(Math.abs(f*c-l*u)>rl)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let h=r-o,p=i-a,g=c*c+l*l,b=h*h+p*p,y=Math.sqrt(g),m=Math.sqrt(d),v=s*Math.tan((px-Math.acos((g+d-b)/(2*y*m)))/2),w=v/m,_=v/y;Math.abs(w-1)>rl&&this._append`L${t+w*u},${n+w*f}`,this._append`A${s},${s},0,0,${+(f*h>u*p)},${this._x1=t+_*c},${this._y1=n+_*l}`}}arc(t,n,r,i,s,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),c=r*Math.sin(i),l=t+a,u=n+c,f=1^o,d=o?i-s:s-i;this._x1===null?this._append`M${l},${u}`:(Math.abs(this._x1-l)>rl||Math.abs(this._y1-u)>rl)&&this._append`L${l},${u}`,r&&(d<0&&(d=d%yx+yx),d>btt?this._append`A${r},${r},0,1,${f},${t-a},${n-c}A${r},${r},0,1,${f},${this._x1=l},${this._y1=u}`:d>rl&&this._append`A${r},${r},0,${+(d>=px)},${f},${this._x1=t+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function Fo(e=3){return new HF(+e)}var _tt=Array.prototype,XF=_tt.slice;function Stt(e,t){return e-t}function xtt(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}const Ma=e=>()=>e;function Itt(e,t){for(var n=-1,r=t.length,i;++n<r;)if(i=Ett(e,t[n]))return i;return 0}function Ett(e,t){for(var n=t[0],r=t[1],i=-1,s=0,o=e.length,a=o-1;s<o;a=s++){var c=e[s],l=c[0],u=c[1],f=e[a],d=f[0],h=f[1];if(Ttt(c,f,t))return 0;u>r!=h>r&&n<(d-l)*(r-u)/(h-u)+l&&(i=-i)}return i}function Ttt(e,t,n){var r;return Att(e,t,n)&&Mtt(e[r=+(e[0]===t[0])],n[r],t[r])}function Att(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function Mtt(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function Ntt(){}var ao=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function I1(){var e=1,t=1,n=sT,r=c;function i(l){var u=n(l);if(Array.isArray(u))u=u.slice().sort(Stt);else{const f=An(l,$tt);for(u=cc(...sF(f[0],f[1],u),u);u[u.length-1]>=f[1];)u.pop();for(;u[1]<f[0];)u.shift()}return u.map(f=>s(l,f))}function s(l,u){const f=u==null?NaN:+u;if(isNaN(f))throw new Error(`invalid value: ${u}`);var d=[],h=[];return o(l,f,function(p){r(p,l,f),xtt(p)>0?d.push([p]):h.push(p)}),h.forEach(function(p){for(var g=0,b=d.length,y;g<b;++g)if(Itt((y=d[g])[0],p)!==-1){y.push(p);return}}),{type:"MultiPolygon",value:u,coordinates:d}}function o(l,u,f){var d=new Array,h=new Array,p,g,b,y,m,v;for(p=g=-1,y=Vc(l[0],u),ao[y<<1].forEach(w);++p<e-1;)b=y,y=Vc(l[p+1],u),ao[b|y<<1].forEach(w);for(ao[y<<0].forEach(w);++g<t-1;){for(p=-1,y=Vc(l[g*e+e],u),m=Vc(l[g*e],u),ao[y<<1|m<<2].forEach(w);++p<e-1;)b=y,y=Vc(l[g*e+e+p+1],u),v=m,m=Vc(l[g*e+p+1],u),ao[b|y<<1|m<<2|v<<3].forEach(w);ao[y|m<<3].forEach(w)}for(p=-1,m=l[g*e]>=u,ao[m<<2].forEach(w);++p<e-1;)v=m,m=Vc(l[g*e+p+1],u),ao[m<<2|v<<3].forEach(w);ao[m<<3].forEach(w);function w(_){var S=[_[0][0]+p,_[0][1]+g],x=[_[1][0]+p,_[1][1]+g],T=a(S),$=a(x),I,A;(I=h[T])?(A=d[$])?(delete h[I.end],delete d[A.start],I===A?(I.ring.push(x),f(I.ring)):d[I.start]=h[A.end]={start:I.start,end:A.end,ring:I.ring.concat(A.ring)}):(delete h[I.end],I.ring.push(x),h[I.end=$]=I):(I=d[$])?(A=h[T])?(delete d[I.start],delete h[A.end],I===A?(I.ring.push(x),f(I.ring)):d[A.start]=h[I.end]={start:A.start,end:I.end,ring:A.ring.concat(I.ring)}):(delete d[I.start],I.ring.unshift(S),d[I.start=T]=I):d[T]=h[$]={start:T,end:$,ring:[S,x]}}}function a(l){return l[0]*2+l[1]*(e+1)*4}function c(l,u,f){l.forEach(function(d){var h=d[0],p=d[1],g=h|0,b=p|0,y=C_(u[b*e+g]);h>0&&h<e&&g===h&&(d[0]=m$(h,C_(u[b*e+g-1]),y,f)),p>0&&p<t&&b===p&&(d[1]=m$(p,C_(u[(b-1)*e+g]),y,f))})}return i.contour=s,i.size=function(l){if(!arguments.length)return[e,t];var u=Math.floor(l[0]),f=Math.floor(l[1]);if(!(u>=0&&f>=0))throw new Error("invalid size");return e=u,t=f,i},i.thresholds=function(l){return arguments.length?(n=typeof l=="function"?l:Array.isArray(l)?Ma(XF.call(l)):Ma(l),i):n},i.smooth=function(l){return arguments.length?(r=l?c:Ntt,i):r===c},i}function $tt(e){return isFinite(e)?e:NaN}function Vc(e,t){return e==null?!1:+e>=t}function C_(e){return e==null||isNaN(e=+e)?-1/0:e}function m$(e,t,n,r){const i=r-t,s=n-t,o=isFinite(i)||isFinite(s)?i/s:Math.sign(i)/Math.sign(s);return isNaN(o)?e:e+o-.5}function ktt(e){return e[0]}function Dtt(e){return e[1]}function Ott(){return 1}function Rtt(){var e=ktt,t=Dtt,n=Ott,r=960,i=500,s=20,o=2,a=s*3,c=r+a*2>>o,l=i+a*2>>o,u=Ma(20);function f(m){var v=new Float32Array(c*l),w=Math.pow(2,-o),_=-1;for(const F of m){var S=(e(F,++_,m)+a)*w,x=(t(F,_,m)+a)*w,T=+n(F,_,m);if(T&&S>=0&&S<c&&x>=0&&x<l){var $=Math.floor(S),I=Math.floor(x),A=S-$-.5,D=x-I-.5;v[$+I*c]+=(1-A)*(1-D)*T,v[$+1+I*c]+=A*(1-D)*T,v[$+1+(I+1)*c]+=A*D*T,v[$+(I+1)*c]+=(1-A)*D*T}}return J8({data:v,width:c,height:l},s*w),v}function d(m){var v=f(m),w=u(v),_=Math.pow(2,2*o);return Array.isArray(w)||(w=cc(Number.MIN_VALUE,Be(v)/_,w)),I1().size([c,l]).thresholds(w.map(S=>S*_))(v).map((S,x)=>(S.value=+w[x],h(S)))}d.contours=function(m){var v=f(m),w=I1().size([c,l]),_=Math.pow(2,2*o),S=x=>{x=+x;var T=h(w.contour(v,x*_));return T.value=x,T};return Object.defineProperty(S,"max",{get:()=>Be(v)/_}),S};function h(m){return m.coordinates.forEach(p),m}function p(m){m.forEach(g)}function g(m){m.forEach(b)}function b(m){m[0]=m[0]*Math.pow(2,o)-a,m[1]=m[1]*Math.pow(2,o)-a}function y(){return a=s*3,c=r+a*2>>o,l=i+a*2>>o,d}return d.x=function(m){return arguments.length?(e=typeof m=="function"?m:Ma(+m),d):e},d.y=function(m){return arguments.length?(t=typeof m=="function"?m:Ma(+m),d):t},d.weight=function(m){return arguments.length?(n=typeof m=="function"?m:Ma(+m),d):n},d.size=function(m){if(!arguments.length)return[r,i];var v=+m[0],w=+m[1];if(!(v>=0&&w>=0))throw new Error("invalid size");return r=v,i=w,y()},d.cellSize=function(m){if(!arguments.length)return 1<<o;if(!((m=+m)>=1))throw new Error("invalid cell size");return o=Math.floor(Math.log(m)/Math.LN2),y()},d.thresholds=function(m){return arguments.length?(u=typeof m=="function"?m:Array.isArray(m)?Ma(XF.call(m)):Ma(m),d):u},d.bandwidth=function(m){if(!arguments.length)return Math.sqrt(s*(s+1));if(!((m=+m)>=0))throw new Error("invalid bandwidth");return s=(Math.sqrt(4*m*m+1)-1)/2,y()},d}const Po=11102230246251565e-32,Gn=134217729,Ftt=(3+8*Po)*Po;function U_(e,t,n,r,i){let s,o,a,c,l=t[0],u=r[0],f=0,d=0;u>l==u>-l?(s=l,l=t[++f]):(s=u,u=r[++d]);let h=0;if(f<e&&d<n)for(u>l==u>-l?(o=l+s,a=s-(o-l),l=t[++f]):(o=u+s,a=s-(o-u),u=r[++d]),s=o,a!==0&&(i[h++]=a);f<e&&d<n;)u>l==u>-l?(o=s+l,c=o-s,a=s-(o-c)+(l-c),l=t[++f]):(o=s+u,c=o-s,a=s-(o-c)+(u-c),u=r[++d]),s=o,a!==0&&(i[h++]=a);for(;f<e;)o=s+l,c=o-s,a=s-(o-c)+(l-c),l=t[++f],s=o,a!==0&&(i[h++]=a);for(;d<n;)o=s+u,c=o-s,a=s-(o-c)+(u-c),u=r[++d],s=o,a!==0&&(i[h++]=a);return(s!==0||h===0)&&(i[h++]=s),h}function Ltt(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}function Cy(e){return new Float64Array(e)}const Btt=(3+16*Po)*Po,Ctt=(2+12*Po)*Po,Utt=(9+64*Po)*Po*Po,mu=Cy(4),g$=Cy(8),v$=Cy(12),b$=Cy(16),rr=Cy(4);function Ptt(e,t,n,r,i,s,o){let a,c,l,u,f,d,h,p,g,b,y,m,v,w,_,S,x,T;const $=e-i,I=n-i,A=t-s,D=r-s;w=$*D,d=Gn*$,h=d-(d-$),p=$-h,d=Gn*D,g=d-(d-D),b=D-g,_=p*b-(w-h*g-p*g-h*b),S=A*I,d=Gn*A,h=d-(d-A),p=A-h,d=Gn*I,g=d-(d-I),b=I-g,x=p*b-(S-h*g-p*g-h*b),y=_-x,f=_-y,mu[0]=_-(y+f)+(f-x),m=w+y,f=m-w,v=w-(m-f)+(y-f),y=v-S,f=v-y,mu[1]=v-(y+f)+(f-S),T=m+y,f=T-m,mu[2]=m-(T-f)+(y-f),mu[3]=T;let F=Ltt(4,mu),E=Ctt*o;if(F>=E||-F>=E||(f=e-$,a=e-($+f)+(f-i),f=n-I,l=n-(I+f)+(f-i),f=t-A,c=t-(A+f)+(f-s),f=r-D,u=r-(D+f)+(f-s),a===0&&c===0&&l===0&&u===0)||(E=Utt*o+Ftt*Math.abs(F),F+=$*u+D*a-(A*l+I*c),F>=E||-F>=E))return F;w=a*D,d=Gn*a,h=d-(d-a),p=a-h,d=Gn*D,g=d-(d-D),b=D-g,_=p*b-(w-h*g-p*g-h*b),S=c*I,d=Gn*c,h=d-(d-c),p=c-h,d=Gn*I,g=d-(d-I),b=I-g,x=p*b-(S-h*g-p*g-h*b),y=_-x,f=_-y,rr[0]=_-(y+f)+(f-x),m=w+y,f=m-w,v=w-(m-f)+(y-f),y=v-S,f=v-y,rr[1]=v-(y+f)+(f-S),T=m+y,f=T-m,rr[2]=m-(T-f)+(y-f),rr[3]=T;const N=U_(4,mu,4,rr,g$);w=$*u,d=Gn*$,h=d-(d-$),p=$-h,d=Gn*u,g=d-(d-u),b=u-g,_=p*b-(w-h*g-p*g-h*b),S=A*l,d=Gn*A,h=d-(d-A),p=A-h,d=Gn*l,g=d-(d-l),b=l-g,x=p*b-(S-h*g-p*g-h*b),y=_-x,f=_-y,rr[0]=_-(y+f)+(f-x),m=w+y,f=m-w,v=w-(m-f)+(y-f),y=v-S,f=v-y,rr[1]=v-(y+f)+(f-S),T=m+y,f=T-m,rr[2]=m-(T-f)+(y-f),rr[3]=T;const M=U_(N,g$,4,rr,v$);w=a*u,d=Gn*a,h=d-(d-a),p=a-h,d=Gn*u,g=d-(d-u),b=u-g,_=p*b-(w-h*g-p*g-h*b),S=c*l,d=Gn*c,h=d-(d-c),p=c-h,d=Gn*l,g=d-(d-l),b=l-g,x=p*b-(S-h*g-p*g-h*b),y=_-x,f=_-y,rr[0]=_-(y+f)+(f-x),m=w+y,f=m-w,v=w-(m-f)+(y-f),y=v-S,f=v-y,rr[1]=v-(y+f)+(f-S),T=m+y,f=T-m,rr[2]=m-(T-f)+(y-f),rr[3]=T;const R=U_(M,v$,4,rr,b$);return b$[R-1]}function Xm(e,t,n,r,i,s){const o=(t-s)*(n-i),a=(e-i)*(r-s),c=o-a,l=Math.abs(o+a);return Math.abs(c)>=Btt*l?c:-Ptt(e,t,n,r,i,s,l)}const w$=Math.pow(2,-52),Qm=new Uint32Array(512);class E1{static from(t,n=qtt,r=Wtt){const i=t.length,s=new Float64Array(i*2);for(let o=0;o<i;o++){const a=t[o];s[2*o]=n(a),s[2*o+1]=r(a)}return new E1(s)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:s}=this,o=t.length>>1;let a=1/0,c=1/0,l=-1/0,u=-1/0;for(let I=0;I<o;I++){const A=t[2*I],D=t[2*I+1];A<a&&(a=A),D<c&&(c=D),A>l&&(l=A),D>u&&(u=D),this._ids[I]=I}const f=(a+l)/2,d=(c+u)/2;let h=1/0,p,g,b;for(let I=0;I<o;I++){const A=P_(f,d,t[2*I],t[2*I+1]);A<h&&(p=I,h=A)}const y=t[2*p],m=t[2*p+1];h=1/0;for(let I=0;I<o;I++){if(I===p)continue;const A=P_(y,m,t[2*I],t[2*I+1]);A<h&&A>0&&(g=I,h=A)}let v=t[2*g],w=t[2*g+1],_=1/0;for(let I=0;I<o;I++){if(I===p||I===g)continue;const A=Vtt(y,m,v,w,t[2*I],t[2*I+1]);A<_&&(b=I,_=A)}let S=t[2*b],x=t[2*b+1];if(_===1/0){for(let D=0;D<o;D++)this._dists[D]=t[2*D]-t[0]||t[2*D+1]-t[1];af(this._ids,this._dists,0,o-1);const I=new Uint32Array(o);let A=0;for(let D=0,F=-1/0;D<o;D++){const E=this._ids[D];this._dists[E]>F&&(I[A++]=E,F=this._dists[E])}this.hull=I.subarray(0,A),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(Xm(y,m,v,w,S,x)<0){const I=g,A=v,D=w;g=b,v=S,w=x,b=I,S=A,x=D}const T=Ytt(y,m,v,w,S,x);this._cx=T.x,this._cy=T.y;for(let I=0;I<o;I++)this._dists[I]=P_(t[2*I],t[2*I+1],T.x,T.y);af(this._ids,this._dists,0,o-1),this._hullStart=p;let $=3;r[p]=n[b]=g,r[g]=n[p]=b,r[b]=n[g]=p,i[p]=0,i[g]=1,i[b]=2,s.fill(-1),s[this._hashKey(y,m)]=p,s[this._hashKey(v,w)]=g,s[this._hashKey(S,x)]=b,this.trianglesLen=0,this._addTriangle(p,g,b,-1,-1,-1);for(let I=0,A,D;I<this._ids.length;I++){const F=this._ids[I],E=t[2*F],N=t[2*F+1];if(I>0&&Math.abs(E-A)<=w$&&Math.abs(N-D)<=w$||(A=E,D=N,F===p||F===g||F===b))continue;let M=0;for(let P=0,z=this._hashKey(E,N);P<this._hashSize&&(M=s[(z+P)%this._hashSize],!(M!==-1&&M!==r[M]));P++);M=n[M];let R=M,O;for(;O=r[R],Xm(E,N,t[2*R],t[2*R+1],t[2*O],t[2*O+1])>=0;)if(R=O,R===M){R=-1;break}if(R===-1)continue;let C=this._addTriangle(R,F,r[R],-1,-1,i[R]);i[F]=this._legalize(C+2),i[R]=C,$++;let L=r[R];for(;O=r[L],Xm(E,N,t[2*L],t[2*L+1],t[2*O],t[2*O+1])<0;)C=this._addTriangle(L,F,O,i[F],-1,i[L]),i[F]=this._legalize(C+2),r[L]=L,$--,L=O;if(R===M)for(;O=n[R],Xm(E,N,t[2*O],t[2*O+1],t[2*R],t[2*R+1])<0;)C=this._addTriangle(O,F,R,-1,i[R],i[O]),this._legalize(C+2),i[O]=C,r[R]=R,$--,R=O;this._hullStart=n[F]=R,r[R]=n[L]=F,r[F]=L,s[this._hashKey(E,N)]=F,s[this._hashKey(t[2*R],t[2*R+1])]=R}this.hull=new Uint32Array($);for(let I=0,A=this._hullStart;I<$;I++)this.hull[I]=A,A=r[A];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(ztt(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:r,coords:i}=this;let s=0,o=0;for(;;){const a=r[t],c=t-t%3;if(o=c+(t+2)%3,a===-1){if(s===0)break;t=Qm[--s];continue}const l=a-a%3,u=c+(t+1)%3,f=l+(a+2)%3,d=n[o],h=n[t],p=n[u],g=n[f];if(jtt(i[2*d],i[2*d+1],i[2*h],i[2*h+1],i[2*p],i[2*p+1],i[2*g],i[2*g+1])){n[t]=g,n[a]=d;const y=r[f];if(y===-1){let v=this._hullStart;do{if(this._hullTri[v]===f){this._hullTri[v]=t;break}v=this._hullPrev[v]}while(v!==this._hullStart)}this._link(t,y),this._link(a,r[o]),this._link(o,f);const m=l+(a+1)%3;s<Qm.length&&(Qm[s++]=m)}else{if(s===0)break;t=Qm[--s]}}return o}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,r,i,s,o){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=n,this._triangles[a+2]=r,this._link(a,i),this._link(a+1,s),this._link(a+2,o),this.trianglesLen+=3,a}}function ztt(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function P_(e,t,n,r){const i=e-n,s=t-r;return i*i+s*s}function jtt(e,t,n,r,i,s,o,a){const c=e-o,l=t-a,u=n-o,f=r-a,d=i-o,h=s-a,p=c*c+l*l,g=u*u+f*f,b=d*d+h*h;return c*(f*b-g*h)-l*(u*b-g*d)+p*(u*h-f*d)<0}function Vtt(e,t,n,r,i,s){const o=n-e,a=r-t,c=i-e,l=s-t,u=o*o+a*a,f=c*c+l*l,d=.5/(o*l-a*c),h=(l*u-a*f)*d,p=(o*f-c*u)*d;return h*h+p*p}function Ytt(e,t,n,r,i,s){const o=n-e,a=r-t,c=i-e,l=s-t,u=o*o+a*a,f=c*c+l*l,d=.5/(o*l-a*c),h=e+(l*u-a*f)*d,p=t+(o*f-c*u)*d;return{x:h,y:p}}function af(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const s=e[i],o=t[s];let a=i-1;for(;a>=n&&t[e[a]]>o;)e[a+1]=e[a--];e[a+1]=s}else{const i=n+r>>1;let s=n+1,o=r;sh(e,i,s),t[e[n]]>t[e[r]]&&sh(e,n,r),t[e[s]]>t[e[r]]&&sh(e,s,r),t[e[n]]>t[e[s]]&&sh(e,n,s);const a=e[s],c=t[a];for(;;){do s++;while(t[e[s]]<c);do o--;while(t[e[o]]>c);if(o<s)break;sh(e,s,o)}e[n+1]=e[o],e[o]=a,r-s+1>=o-n?(af(e,t,s,r),af(e,t,n,o-1)):(af(e,t,n,o-1),af(e,t,s,r))}}function sh(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function qtt(e){return e[0]}function Wtt(e){return e[1]}const _$=1e-6;class hl{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,r){t=+t,n=+n,r=+r;const i=t+r,s=n;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${s}`:(Math.abs(this._x1-i)>_$||Math.abs(this._y1-s)>_$)&&(this._+="L"+i+","+s),r&&(this._+=`A${r},${r},0,1,1,${t-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=s}`)}rect(t,n,r,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class mx{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let Gtt=class{constructor(t,[n,r,i,s]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((s=+s)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=i,this.xmin=n,this.ymax=s,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:r},vectors:i}=this;let s,o;const a=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let g=0,b=0,y=r.length,m,v;g<y;g+=3,b+=2){const w=r[g]*2,_=r[g+1]*2,S=r[g+2]*2,x=t[w],T=t[w+1],$=t[_],I=t[_+1],A=t[S],D=t[S+1],F=$-x,E=I-T,N=A-x,M=D-T,R=(F*M-E*N)*2;if(Math.abs(R)<1e-9){if(s===void 0){s=o=0;for(const C of n)s+=t[C*2],o+=t[C*2+1];s/=n.length,o/=n.length}const O=1e9*Math.sign((s-x)*M-(o-T)*N);m=(x+A)/2-O*M,v=(T+D)/2+O*N}else{const O=1/R,C=F*F+E*E,L=N*N+M*M;m=x+(M*C-E*L)*O,v=T+(F*L-N*C)*O}a[b]=m,a[b+1]=v}let c=n[n.length-1],l,u=c*4,f,d=t[2*c],h,p=t[2*c+1];i.fill(0);for(let g=0;g<n.length;++g)c=n[g],l=u,f=d,h=p,u=c*4,d=t[2*c],p=t[2*c+1],i[l+2]=i[u]=h-p,i[l+3]=i[u+1]=d-f}render(t){const n=t==null?t=new hl:void 0,{delaunay:{halfedges:r,inedges:i,hull:s},circumcenters:o,vectors:a}=this;if(s.length<=1)return null;for(let u=0,f=r.length;u<f;++u){const d=r[u];if(d<u)continue;const h=Math.floor(u/3)*2,p=Math.floor(d/3)*2,g=o[h],b=o[h+1],y=o[p],m=o[p+1];this._renderSegment(g,b,y,m,t)}let c,l=s[s.length-1];for(let u=0;u<s.length;++u){c=l,l=s[u];const f=Math.floor(i[l]/3)*2,d=o[f],h=o[f+1],p=c*4,g=this._project(d,h,a[p+2],a[p+3]);g&&this._renderSegment(d,h,g[0],g[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new hl:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const r=n==null?n=new hl:void 0,i=this._clip(t);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let s=i.length;for(;i[0]===i[s-2]&&i[1]===i[s-1]&&s>1;)s-=2;for(let o=2;o<s;o+=2)(i[o]!==i[o-2]||i[o+1]!==i[o-1])&&n.lineTo(i[o],i[o+1]);return n.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,r=t.length/2;n<r;++n){const i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(t){const n=new mx;return this.renderCell(t,n),n.value()}_renderSegment(t,n,r,i,s){let o;const a=this._regioncode(t,n),c=this._regioncode(r,i);a===0&&c===0?(s.moveTo(t,n),s.lineTo(r,i)):(o=this._clipSegment(t,n,r,i,a,c))&&(s.moveTo(o[0],o[1]),s.lineTo(o[2],o[3]))}contains(t,n,r){return n=+n,n!==n||(r=+r,r!==r)?!1:this.delaunay._step(t,n,r)===t}*neighbors(t){const n=this._clip(t);if(n)for(const r of this.delaunay.neighbors(t)){const i=this._clip(r);if(i){t:for(let s=0,o=n.length;s<o;s+=2)for(let a=0,c=i.length;a<c;a+=2)if(n[s]===i[a]&&n[s+1]===i[a+1]&&n[(s+2)%o]===i[(a+c-2)%c]&&n[(s+3)%o]===i[(a+c-1)%c]){yield r;break t}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:s}}=this,o=r[t];if(o===-1)return null;const a=[];let c=o;do{const l=Math.floor(c/3);if(a.push(n[l*2],n[l*2+1]),c=c%3===2?c-2:c+1,s[c]!==t)break;c=i[c]}while(c!==o&&c!==-1);return a}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:r}=this,i=t*4;return this._simplify(r[i]||r[i+1]?this._clipInfinite(t,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(t,n))}_clipFinite(t,n){const r=n.length;let i=null,s,o,a=n[r-2],c=n[r-1],l,u=this._regioncode(a,c),f,d=0;for(let h=0;h<r;h+=2)if(s=a,o=c,a=n[h],c=n[h+1],l=u,u=this._regioncode(a,c),l===0&&u===0)f=d,d=0,i?i.push(a,c):i=[a,c];else{let p,g,b,y,m;if(l===0){if((p=this._clipSegment(s,o,a,c,l,u))===null)continue;[g,b,y,m]=p}else{if((p=this._clipSegment(a,c,s,o,u,l))===null)continue;[y,m,g,b]=p,f=d,d=this._edgecode(g,b),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(g,b):i=[g,b]}f=d,d=this._edgecode(y,m),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(y,m):i=[y,m]}if(i)f=d,d=this._edgecode(i[0],i[1]),f&&d&&this._edge(t,f,d,i,i.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(t,n,r,i,s,o){const a=s<o;for(a&&([t,n,r,i,s,o]=[r,i,t,n,o,s]);;){if(s===0&&o===0)return a?[r,i,t,n]:[t,n,r,i];if(s&o)return null;let c,l,u=s||o;u&8?(c=t+(r-t)*(this.ymax-n)/(i-n),l=this.ymax):u&4?(c=t+(r-t)*(this.ymin-n)/(i-n),l=this.ymin):u&2?(l=n+(i-n)*(this.xmax-t)/(r-t),c=this.xmax):(l=n+(i-n)*(this.xmin-t)/(r-t),c=this.xmin),s?(t=c,n=l,s=this._regioncode(t,n)):(r=c,i=l,o=this._regioncode(r,i))}}_clipInfinite(t,n,r,i,s,o){let a=Array.from(n),c;if((c=this._project(a[0],a[1],r,i))&&a.unshift(c[0],c[1]),(c=this._project(a[a.length-2],a[a.length-1],s,o))&&a.push(c[0],c[1]),a=this._clipFinite(t,a))for(let l=0,u=a.length,f,d=this._edgecode(a[u-2],a[u-1]);l<u;l+=2)f=d,d=this._edgecode(a[l],a[l+1]),f&&d&&(l=this._edge(t,f,d,a,l),u=a.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(t,n,r,i,s){for(;n!==r;){let o,a;switch(n){case 5:n=4;continue;case 4:n=6,o=this.xmax,a=this.ymin;break;case 6:n=2;continue;case 2:n=10,o=this.xmax,a=this.ymax;break;case 10:n=8;continue;case 8:n=9,o=this.xmin,a=this.ymax;break;case 9:n=1;continue;case 1:n=5,o=this.xmin,a=this.ymin;break}(i[s]!==o||i[s+1]!==a)&&this.contains(t,o,a)&&(i.splice(s,0,o,a),s+=2)}return s}_project(t,n,r,i){let s=1/0,o,a,c;if(i<0){if(n<=this.ymin)return null;(o=(this.ymin-n)/i)<s&&(c=this.ymin,a=t+(s=o)*r)}else if(i>0){if(n>=this.ymax)return null;(o=(this.ymax-n)/i)<s&&(c=this.ymax,a=t+(s=o)*r)}if(r>0){if(t>=this.xmax)return null;(o=(this.xmax-t)/r)<s&&(a=this.xmax,c=n+(s=o)*i)}else if(r<0){if(t<=this.xmin)return null;(o=(this.xmin-t)/r)<s&&(a=this.xmin,c=n+(s=o)*i)}return[a,c]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const r=(n+2)%t.length,i=(n+4)%t.length;(t[n]===t[r]&&t[r]===t[i]||t[n+1]===t[r+1]&&t[r+1]===t[i+1])&&(t.splice(r,2),n-=2)}t.length||(t=null)}return t}};const Htt=2*Math.PI,gu=Math.pow;function Xtt(e){return e[0]}function Qtt(e){return e[1]}function Ktt(e){const{triangles:t,coords:n}=e;for(let r=0;r<t.length;r+=3){const i=2*t[r],s=2*t[r+1],o=2*t[r+2];if((n[o]-n[i])*(n[s+1]-n[i+1])-(n[s]-n[i])*(n[o+1]-n[i+1])>1e-10)return!1}return!0}function Ztt(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class Mc{static from(t,n=Xtt,r=Qtt,i){return new Mc("length"in t?Jtt(t,n,r,i):Float64Array.from(tet(t,n,r,i)))}constructor(t){this._delaunator=new E1(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&Ktt(t)){this.collinear=Int32Array.from({length:n.length/2},(d,h)=>h).sort((d,h)=>n[2*d]-n[2*h]||n[2*d+1]-n[2*h+1]);const c=this.collinear[0],l=this.collinear[this.collinear.length-1],u=[n[2*c],n[2*c+1],n[2*l],n[2*l+1]],f=1e-8*Math.hypot(u[3]-u[1],u[2]-u[0]);for(let d=0,h=n.length/2;d<h;++d){const p=Ztt(n[2*d],n[2*d+1],f);n[2*d]=p[0],n[2*d+1]=p[1]}this._delaunator=new E1(n)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,s=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let c=0,l=r.length;c<l;++c){const u=s[c%3===2?c-2:c+1];(r[c]===-1||o[u]===-1)&&(o[u]=c)}for(let c=0,l=i.length;c<l;++c)a[i[c]]=c;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],o[i[0]]=1,i.length===2&&(o[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(t){return new Gtt(this,t)}*neighbors(t){const{inedges:n,hull:r,_hullIndex:i,halfedges:s,triangles:o,collinear:a}=this;if(a){const f=a.indexOf(t);f>0&&(yield a[f-1]),f<a.length-1&&(yield a[f+1]);return}const c=n[t];if(c===-1)return;let l=c,u=-1;do{if(yield u=o[l],l=l%3===2?l-2:l+1,o[l]!==t)return;if(l=s[l],l===-1){const f=r[(i[t]+1)%r.length];f!==u&&(yield f);return}}while(l!==c)}find(t,n,r=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const i=r;let s;for(;(s=this._step(r,t,n))>=0&&s!==r&&s!==i;)r=s;return s}_step(t,n,r){const{inedges:i,hull:s,_hullIndex:o,halfedges:a,triangles:c,points:l}=this;if(i[t]===-1||!l.length)return(t+1)%(l.length>>1);let u=t,f=gu(n-l[t*2],2)+gu(r-l[t*2+1],2);const d=i[t];let h=d;do{let p=c[h];const g=gu(n-l[p*2],2)+gu(r-l[p*2+1],2);if(g<f&&(f=g,u=p),h=h%3===2?h-2:h+1,c[h]!==t)break;if(h=a[h],h===-1){if(h=s[(o[t]+1)%s.length],h!==p&&gu(n-l[h*2],2)+gu(r-l[h*2+1],2)<f)return h;break}}while(h!==d);return u}render(t){const n=t==null?t=new hl:void 0,{points:r,halfedges:i,triangles:s}=this;for(let o=0,a=i.length;o<a;++o){const c=i[o];if(c<o)continue;const l=s[o]*2,u=s[c]*2;t.moveTo(r[l],r[l+1]),t.lineTo(r[u],r[u+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const r=t==null?t=new hl:void 0,{points:i}=this;for(let s=0,o=i.length;s<o;s+=2){const a=i[s],c=i[s+1];t.moveTo(a+n,c),t.arc(a,c,n,0,Htt)}return r&&r.value()}renderHull(t){const n=t==null?t=new hl:void 0,{hull:r,points:i}=this,s=r[0]*2,o=r.length;t.moveTo(i[s],i[s+1]);for(let a=1;a<o;++a){const c=2*r[a];t.lineTo(i[c],i[c+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new mx;return this.renderHull(t),t.value()}renderTriangle(t,n){const r=n==null?n=new hl:void 0,{points:i,triangles:s}=this,o=s[t*=3]*2,a=s[t+1]*2,c=s[t+2]*2;return n.moveTo(i[o],i[o+1]),n.lineTo(i[a],i[a+1]),n.lineTo(i[c],i[c+1]),n.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,r=t.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new mx;return this.renderTriangle(t,n),n.value()}}function Jtt(e,t,n,r){const i=e.length,s=new Float64Array(i*2);for(let o=0;o<i;++o){const a=e[o];s[o*2]=t.call(r,a,o,e),s[o*2+1]=n.call(r,a,o,e)}return s}function*tet(e,t,n,r){let i=0;for(const s of e)yield t.call(r,s,i,e),yield n.call(r,s,i,e),++i}function eet(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function T1(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function nd(e){return e=T1(Math.abs(e)),e?e[1]:NaN}function net(e,t){return function(n,r){for(var i=n.length,s=[],o=0,a=e[0],c=0;i>0&&a>0&&(c+a+1>r&&(a=Math.max(1,r-c)),s.push(n.substring(i-=a,i+a)),!((c+=a+1)>r));)a=e[o=(o+1)%e.length];return s.reverse().join(t)}}function ret(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var iet=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Gp(e){if(!(t=iet.exec(e)))throw new Error("invalid format: "+e);var t;return new bT({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Gp.prototype=bT.prototype;function bT(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}bT.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function set(e){t:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break t;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var QF;function oet(e,t){var n=T1(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(QF=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+T1(e,Math.max(0,t+s-1))[0]}function S$(e,t){var n=T1(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const x$={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:eet,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>S$(e*100,t),r:S$,s:oet,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function I$(e){return e}var E$=Array.prototype.map,T$=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function aet(e){var t=e.grouping===void 0||e.thousands===void 0?I$:net(E$.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?I$:ret(E$.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"−":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function l(f){f=Gp(f);var d=f.fill,h=f.align,p=f.sign,g=f.symbol,b=f.zero,y=f.width,m=f.comma,v=f.precision,w=f.trim,_=f.type;_==="n"?(m=!0,_="g"):x$[_]||(v===void 0&&(v=12),w=!0,_="g"),(b||d==="0"&&h==="=")&&(b=!0,d="0",h="=");var S=g==="$"?n:g==="#"&&/[boxX]/.test(_)?"0"+_.toLowerCase():"",x=g==="$"?r:/[%p]/.test(_)?o:"",T=x$[_],$=/[defgprs%]/.test(_);v=v===void 0?6:/[gprs]/.test(_)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v));function I(A){var D=S,F=x,E,N,M;if(_==="c")F=T(A)+F,A="";else{A=+A;var R=A<0||1/A<0;if(A=isNaN(A)?c:T(Math.abs(A),v),w&&(A=set(A)),R&&+A==0&&p!=="+"&&(R=!1),D=(R?p==="("?p:a:p==="-"||p==="("?"":p)+D,F=(_==="s"?T$[8+QF/3]:"")+F+(R&&p==="("?")":""),$){for(E=-1,N=A.length;++E<N;)if(M=A.charCodeAt(E),48>M||M>57){F=(M===46?i+A.slice(E+1):A.slice(E))+F,A=A.slice(0,E);break}}}m&&!b&&(A=t(A,1/0));var O=D.length+A.length+F.length,C=O<y?new Array(y-O+1).join(d):"";switch(m&&b&&(A=t(C+A,C.length?y-F.length:1/0),C=""),h){case"<":A=D+A+F+C;break;case"=":A=D+C+A+F;break;case"^":A=C.slice(0,O=C.length>>1)+D+A+F+C.slice(O);break;default:A=C+D+A+F;break}return s(A)}return I.toString=function(){return f+""},I}function u(f,d){var h=l((f=Gp(f),f.type="f",f)),p=Math.max(-8,Math.min(8,Math.floor(nd(d)/3)))*3,g=Math.pow(10,-p),b=T$[8+p/3];return function(y){return h(g*y)+b}}return{format:l,formatPrefix:u}}var Km,kd,KF;cet({thousands:",",grouping:[3],currency:["$",""]});function cet(e){return Km=aet(e),kd=Km.format,KF=Km.formatPrefix,Km}function uet(e){return Math.max(0,-nd(Math.abs(e)))}function fet(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(nd(t)/3)))*3-nd(Math.abs(e)))}function det(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,nd(t)-nd(e))+1}var vt=1e-6,A1=1e-12,zt=Math.PI,tn=zt/2,A$=zt/4,ei=zt*2,Ln=180/zt,ne=zt/180,ce=Math.abs,Dd=Math.atan,os=Math.atan2,St=Math.cos,Zm=Math.ceil,ZF=Math.exp,gx=Math.hypot,M1=Math.log,z_=Math.pow,ft=Math.sin,Ii=Math.sign||function(e){return e>0?1:e<0?-1:0},mr=Math.sqrt,wT=Math.tan;function JF(e){return e>1?0:e<-1?zt:Math.acos(e)}function Rr(e){return e>1?tn:e<-1?-tn:Math.asin(e)}function Hr(){}function N1(e,t){e&&N$.hasOwnProperty(e.type)&&N$[e.type](e,t)}var M$={Feature:function(e,t){N1(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)N1(n[r].geometry,t)}},N$={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){vx(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)vx(n[r],t,0)},Polygon:function(e,t){$$(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)$$(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)N1(n[r],t)}};function vx(e,t,n){var r=-1,i=e.length-n,s;for(t.lineStart();++r<i;)s=e[r],t.point(s[0],s[1],s[2]);t.lineEnd()}function $$(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)vx(e[n],t,1);t.polygonEnd()}function Oa(e,t){e&&M$.hasOwnProperty(e.type)?M$[e.type](e,t):N1(e,t)}function bx(e){return[os(e[1],e[0]),Rr(e[2])]}function rd(e){var t=e[0],n=e[1],r=St(n);return[r*St(t),r*ft(t),ft(n)]}function Jm(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function $1(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function j_(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function t0(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function wx(e){var t=mr(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var Dh,k1,D1,O1,R1,F1,L1,B1,_x,Sx,xx,tL,eL,or,ar,cr,Ki={sphere:Hr,point:_T,lineStart:k$,lineEnd:D$,polygonStart:function(){Ki.lineStart=yet,Ki.lineEnd=met},polygonEnd:function(){Ki.lineStart=k$,Ki.lineEnd=D$}};function _T(e,t){e*=ne,t*=ne;var n=St(t);Uy(n*St(e),n*ft(e),ft(t))}function Uy(e,t,n){++Dh,D1+=(e-D1)/Dh,O1+=(t-O1)/Dh,R1+=(n-R1)/Dh}function k$(){Ki.point=het}function het(e,t){e*=ne,t*=ne;var n=St(t);or=n*St(e),ar=n*ft(e),cr=ft(t),Ki.point=pet,Uy(or,ar,cr)}function pet(e,t){e*=ne,t*=ne;var n=St(t),r=n*St(e),i=n*ft(e),s=ft(t),o=os(mr((o=ar*s-cr*i)*o+(o=cr*r-or*s)*o+(o=or*i-ar*r)*o),or*r+ar*i+cr*s);k1+=o,F1+=o*(or+(or=r)),L1+=o*(ar+(ar=i)),B1+=o*(cr+(cr=s)),Uy(or,ar,cr)}function D$(){Ki.point=_T}function yet(){Ki.point=get}function met(){nL(tL,eL),Ki.point=_T}function get(e,t){tL=e,eL=t,e*=ne,t*=ne,Ki.point=nL;var n=St(t);or=n*St(e),ar=n*ft(e),cr=ft(t),Uy(or,ar,cr)}function nL(e,t){e*=ne,t*=ne;var n=St(t),r=n*St(e),i=n*ft(e),s=ft(t),o=ar*s-cr*i,a=cr*r-or*s,c=or*i-ar*r,l=gx(o,a,c),u=Rr(l),f=l&&-u/l;_x.add(f*o),Sx.add(f*a),xx.add(f*c),k1+=u,F1+=u*(or+(or=r)),L1+=u*(ar+(ar=i)),B1+=u*(cr+(cr=s)),Uy(or,ar,cr)}function vet(e){Dh=k1=D1=O1=R1=F1=L1=B1=0,_x=new zs,Sx=new zs,xx=new zs,Oa(e,Ki);var t=+_x,n=+Sx,r=+xx,i=gx(t,n,r);return i<A1&&(t=F1,n=L1,r=B1,k1<vt&&(t=D1,n=O1,r=R1),i=gx(t,n,r),i<A1)?[NaN,NaN]:[os(n,t)*Ln,Rr(r/i)*Ln]}function Ix(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function Ex(e,t){return ce(e)>zt&&(e-=Math.round(e/ei)*ei),[e,t]}Ex.invert=Ex;function rL(e,t,n){return(e%=ei)?t||n?Ix(R$(e),F$(t,n)):R$(e):t||n?F$(t,n):Ex}function O$(e){return function(t,n){return t+=e,ce(t)>zt&&(t-=Math.round(t/ei)*ei),[t,n]}}function R$(e){var t=O$(e);return t.invert=O$(-e),t}function F$(e,t){var n=St(e),r=ft(e),i=St(t),s=ft(t);function o(a,c){var l=St(c),u=St(a)*l,f=ft(a)*l,d=ft(c),h=d*n+u*r;return[os(f*i-h*s,u*n-d*r),Rr(h*i+f*s)]}return o.invert=function(a,c){var l=St(c),u=St(a)*l,f=ft(a)*l,d=ft(c),h=d*i-f*s;return[os(f*i+d*s,u*n+h*r),Rr(h*n-u*r)]},o}function bet(e){e=rL(e[0]*ne,e[1]*ne,e.length>2?e[2]*ne:0);function t(n){return n=e(n[0]*ne,n[1]*ne),n[0]*=Ln,n[1]*=Ln,n}return t.invert=function(n){return n=e.invert(n[0]*ne,n[1]*ne),n[0]*=Ln,n[1]*=Ln,n},t}function wet(e,t,n,r,i,s){if(n){var o=St(t),a=ft(t),c=r*n;i==null?(i=t+r*ei,s=t-c/2):(i=L$(o,i),s=L$(o,s),(r>0?i<s:i>s)&&(i+=r*ei));for(var l,u=i;r>0?u>s:u<s;u-=c)l=bx([o,-a*St(u),-a*ft(u)]),e.point(l[0],l[1])}}function L$(e,t){t=rd(t),t[0]-=e,wx(t);var n=JF(-t[1]);return((-t[2]<0?-n:n)+ei-vt)%ei}function iL(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:Hr,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function Z0(e,t){return ce(e[0]-t[0])<vt&&ce(e[1]-t[1])<vt}function e0(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function sL(e,t,n,r,i){var s=[],o=[],a,c;if(e.forEach(function(p){if(!((g=p.length-1)<=0)){var g,b=p[0],y=p[g],m;if(Z0(b,y)){if(!b[2]&&!y[2]){for(i.lineStart(),a=0;a<g;++a)i.point((b=p[a])[0],b[1]);i.lineEnd();return}y[0]+=2*vt}s.push(m=new e0(b,p,null,!0)),o.push(m.o=new e0(b,null,m,!1)),s.push(m=new e0(y,p,null,!1)),o.push(m.o=new e0(y,null,m,!0))}}),!!s.length){for(o.sort(t),B$(s),B$(o),a=0,c=o.length;a<c;++a)o[a].e=n=!n;for(var l=s[0],u,f;;){for(var d=l,h=!0;d.v;)if((d=d.n)===l)return;u=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(a=0,c=u.length;a<c;++a)i.point((f=u[a])[0],f[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(h)for(u=d.p.z,a=u.length-1;a>=0;--a)i.point((f=u[a])[0],f[1]);else r(d.x,d.p.x,-1,i);d=d.p}d=d.o,u=d.z,h=!h}while(!d.v);i.lineEnd()}}}function B$(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function V_(e){return ce(e[0])<=zt?e[0]:Ii(e[0])*((ce(e[0])+zt)%ei-zt)}function _et(e,t){var n=V_(t),r=t[1],i=ft(r),s=[ft(n),-St(n),0],o=0,a=0,c=new zs;i===1?r=tn+vt:i===-1&&(r=-tn-vt);for(var l=0,u=e.length;l<u;++l)if(d=(f=e[l]).length)for(var f,d,h=f[d-1],p=V_(h),g=h[1]/2+A$,b=ft(g),y=St(g),m=0;m<d;++m,p=w,b=S,y=x,h=v){var v=f[m],w=V_(v),_=v[1]/2+A$,S=ft(_),x=St(_),T=w-p,$=T>=0?1:-1,I=$*T,A=I>zt,D=b*S;if(c.add(os(D*$*ft(I),y*x+D*St(I))),o+=A?T+$*ei:T,A^p>=n^w>=n){var F=$1(rd(h),rd(v));wx(F);var E=$1(s,F);wx(E);var N=(A^T>=0?-1:1)*Rr(E[2]);(r>N||r===N&&(F[0]||F[1]))&&(a+=A^T>=0?1:-1)}}return(o<-vt||o<vt&&c<-A1)^a&1}function oL(e,t,n,r){return function(i){var s=t(i),o=iL(),a=t(o),c=!1,l,u,f,d={point:h,lineStart:g,lineEnd:b,polygonStart:function(){d.point=y,d.lineStart=m,d.lineEnd=v,u=[],l=[]},polygonEnd:function(){d.point=h,d.lineStart=g,d.lineEnd=b,u=cF(u);var w=_et(l,r);u.length?(c||(i.polygonStart(),c=!0),sL(u,Iet,w,n,i)):w&&(c||(i.polygonStart(),c=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),c&&(i.polygonEnd(),c=!1),u=l=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(w,_){e(w,_)&&i.point(w,_)}function p(w,_){s.point(w,_)}function g(){d.point=p,s.lineStart()}function b(){d.point=h,s.lineEnd()}function y(w,_){f.push([w,_]),a.point(w,_)}function m(){a.lineStart(),f=[]}function v(){y(f[0][0],f[0][1]),a.lineEnd();var w=a.clean(),_=o.result(),S,x=_.length,T,$,I;if(f.pop(),l.push(f),f=null,!!x){if(w&1){if($=_[0],(T=$.length-1)>0){for(c||(i.polygonStart(),c=!0),i.lineStart(),S=0;S<T;++S)i.point((I=$[S])[0],I[1]);i.lineEnd()}return}x>1&&w&2&&_.push(_.pop().concat(_.shift())),u.push(_.filter(xet))}}return d}}function xet(e){return e.length>1}function Iet(e,t){return((e=e.x)[0]<0?e[1]-tn-vt:tn-e[1])-((t=t.x)[0]<0?t[1]-tn-vt:tn-t[1])}const C$=oL(function(){return!0},Eet,Aet,[-zt,-tn]);function Eet(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(s,o){var a=s>0?zt:-zt,c=ce(s-t);ce(c-zt)<vt?(e.point(t,n=(n+o)/2>0?tn:-tn),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),e.point(s,n),i=0):r!==a&&c>=zt&&(ce(t-r)<vt&&(t-=r*vt),ce(s-a)<vt&&(s-=a*vt),n=Tet(t,n,s,o),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),i=0),e.point(t=s,n=o),r=a},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function Tet(e,t,n,r){var i,s,o=ft(e-n);return ce(o)>vt?Dd((ft(t)*(s=St(r))*ft(n)-ft(r)*(i=St(t))*ft(e))/(i*s*o)):(t+r)/2}function Aet(e,t,n,r){var i;if(e==null)i=n*tn,r.point(-zt,i),r.point(0,i),r.point(zt,i),r.point(zt,0),r.point(zt,-i),r.point(0,-i),r.point(-zt,-i),r.point(-zt,0),r.point(-zt,i);else if(ce(e[0]-t[0])>vt){var s=e[0]<t[0]?zt:-zt;i=n*s/2,r.point(-s,i),r.point(0,i),r.point(s,i)}else r.point(t[0],t[1])}function Met(e){var t=St(e),n=6*ne,r=t>0,i=ce(t)>vt;function s(u,f,d,h){wet(h,e,n,d,u,f)}function o(u,f){return St(u)*St(f)>t}function a(u){var f,d,h,p,g;return{lineStart:function(){p=h=!1,g=1},point:function(b,y){var m=[b,y],v,w=o(b,y),_=r?w?0:l(b,y):w?l(b+(b<0?zt:-zt),y):0;if(!f&&(p=h=w)&&u.lineStart(),w!==h&&(v=c(f,m),(!v||Z0(f,v)||Z0(m,v))&&(m[2]=1)),w!==h)g=0,w?(u.lineStart(),v=c(m,f),u.point(v[0],v[1])):(v=c(f,m),u.point(v[0],v[1],2),u.lineEnd()),f=v;else if(i&&f&&r^w){var S;!(_&d)&&(S=c(m,f,!0))&&(g=0,r?(u.lineStart(),u.point(S[0][0],S[0][1]),u.point(S[1][0],S[1][1]),u.lineEnd()):(u.point(S[1][0],S[1][1]),u.lineEnd(),u.lineStart(),u.point(S[0][0],S[0][1],3)))}w&&(!f||!Z0(f,m))&&u.point(m[0],m[1]),f=m,h=w,d=_},lineEnd:function(){h&&u.lineEnd(),f=null},clean:function(){return g|(p&&h)<<1}}}function c(u,f,d){var h=rd(u),p=rd(f),g=[1,0,0],b=$1(h,p),y=Jm(b,b),m=b[0],v=y-m*m;if(!v)return!d&&u;var w=t*y/v,_=-t*m/v,S=$1(g,b),x=t0(g,w),T=t0(b,_);j_(x,T);var $=S,I=Jm(x,$),A=Jm($,$),D=I*I-A*(Jm(x,x)-1);if(!(D<0)){var F=mr(D),E=t0($,(-I-F)/A);if(j_(E,x),E=bx(E),!d)return E;var N=u[0],M=f[0],R=u[1],O=f[1],C;M<N&&(C=N,N=M,M=C);var L=M-N,P=ce(L-zt)<vt,z=P||L<vt;if(!P&&O<R&&(C=R,R=O,O=C),z?P?R+O>0^E[1]<(ce(E[0]-N)<vt?R:O):R<=E[1]&&E[1]<=O:L>zt^(N<=E[0]&&E[0]<=M)){var G=t0($,(-I+F)/A);return j_(G,x),[E,bx(G)]}}}function l(u,f){var d=r?e:zt-e,h=0;return u<-d?h|=1:u>d&&(h|=2),f<-d?h|=4:f>d&&(h|=8),h}return oL(o,a,s,r?[0,-e]:[-zt,e-zt])}function Net(e,t,n,r,i,s){var o=e[0],a=e[1],c=t[0],l=t[1],u=0,f=1,d=c-o,h=l-a,p;if(p=n-o,!(!d&&p>0)){if(p/=d,d<0){if(p<u)return;p<f&&(f=p)}else if(d>0){if(p>f)return;p>u&&(u=p)}if(p=i-o,!(!d&&p<0)){if(p/=d,d<0){if(p>f)return;p>u&&(u=p)}else if(d>0){if(p<u)return;p<f&&(f=p)}if(p=r-a,!(!h&&p>0)){if(p/=h,h<0){if(p<u)return;p<f&&(f=p)}else if(h>0){if(p>f)return;p>u&&(u=p)}if(p=s-a,!(!h&&p<0)){if(p/=h,h<0){if(p>f)return;p>u&&(u=p)}else if(h>0){if(p<u)return;p<f&&(f=p)}return u>0&&(e[0]=o+u*d,e[1]=a+u*h),f<1&&(t[0]=o+f*d,t[1]=a+f*h),!0}}}}}var Oh=1e9,n0=-Oh;function aL(e,t,n,r){function i(l,u){return e<=l&&l<=n&&t<=u&&u<=r}function s(l,u,f,d){var h=0,p=0;if(l==null||(h=o(l,f))!==(p=o(u,f))||c(l,u)<0^f>0)do d.point(h===0||h===3?e:n,h>1?r:t);while((h=(h+f+4)%4)!==p);else d.point(u[0],u[1])}function o(l,u){return ce(l[0]-e)<vt?u>0?0:3:ce(l[0]-n)<vt?u>0?2:1:ce(l[1]-t)<vt?u>0?1:0:u>0?3:2}function a(l,u){return c(l.x,u.x)}function c(l,u){var f=o(l,1),d=o(u,1);return f!==d?f-d:f===0?u[1]-l[1]:f===1?l[0]-u[0]:f===2?l[1]-u[1]:u[0]-l[0]}return function(l){var u=l,f=iL(),d,h,p,g,b,y,m,v,w,_,S,x={point:T,lineStart:D,lineEnd:F,polygonStart:I,polygonEnd:A};function T(N,M){i(N,M)&&u.point(N,M)}function $(){for(var N=0,M=0,R=h.length;M<R;++M)for(var O=h[M],C=1,L=O.length,P=O[0],z,G,Q=P[0],rt=P[1];C<L;++C)z=Q,G=rt,P=O[C],Q=P[0],rt=P[1],G<=r?rt>r&&(Q-z)*(r-G)>(rt-G)*(e-z)&&++N:rt<=r&&(Q-z)*(r-G)<(rt-G)*(e-z)&&--N;return N}function I(){u=f,d=[],h=[],S=!0}function A(){var N=$(),M=S&&N,R=(d=cF(d)).length;(M||R)&&(l.polygonStart(),M&&(l.lineStart(),s(null,null,1,l),l.lineEnd()),R&&sL(d,a,N,s,l),l.polygonEnd()),u=l,d=h=p=null}function D(){x.point=E,h&&h.push(p=[]),_=!0,w=!1,m=v=NaN}function F(){d&&(E(g,b),y&&w&&f.rejoin(),d.push(f.result())),x.point=T,w&&u.lineEnd()}function E(N,M){var R=i(N,M);if(h&&p.push([N,M]),_)g=N,b=M,y=R,_=!1,R&&(u.lineStart(),u.point(N,M));else if(R&&w)u.point(N,M);else{var O=[m=Math.max(n0,Math.min(Oh,m)),v=Math.max(n0,Math.min(Oh,v))],C=[N=Math.max(n0,Math.min(Oh,N)),M=Math.max(n0,Math.min(Oh,M))];Net(O,C,e,t,n,r)?(w||(u.lineStart(),u.point(O[0],O[1])),u.point(C[0],C[1]),R||u.lineEnd(),S=!1):R&&(u.lineStart(),u.point(N,M),S=!1)}m=N,v=M,w=R}return x}}function U$(e,t,n){var r=Gr(e,t-vt,n).concat(t);return function(i){return r.map(function(s){return[i,s]})}}function P$(e,t,n){var r=Gr(e,t-vt,n).concat(t);return function(i){return r.map(function(s){return[s,i]})}}function $et(){var e,t,n,r,i,s,o,a,c=10,l=c,u=90,f=360,d,h,p,g,b=2.5;function y(){return{type:"MultiLineString",coordinates:m()}}function m(){return Gr(Zm(r/u)*u,n,u).map(p).concat(Gr(Zm(a/f)*f,o,f).map(g)).concat(Gr(Zm(t/c)*c,e,c).filter(function(v){return ce(v%u)>vt}).map(d)).concat(Gr(Zm(s/l)*l,i,l).filter(function(v){return ce(v%f)>vt}).map(h))}return y.lines=function(){return m().map(function(v){return{type:"LineString",coordinates:v}})},y.outline=function(){return{type:"Polygon",coordinates:[p(r).concat(g(o).slice(1),p(n).reverse().slice(1),g(a).reverse().slice(1))]}},y.extent=function(v){return arguments.length?y.extentMajor(v).extentMinor(v):y.extentMinor()},y.extentMajor=function(v){return arguments.length?(r=+v[0][0],n=+v[1][0],a=+v[0][1],o=+v[1][1],r>n&&(v=r,r=n,n=v),a>o&&(v=a,a=o,o=v),y.precision(b)):[[r,a],[n,o]]},y.extentMinor=function(v){return arguments.length?(t=+v[0][0],e=+v[1][0],s=+v[0][1],i=+v[1][1],t>e&&(v=t,t=e,e=v),s>i&&(v=s,s=i,i=v),y.precision(b)):[[t,s],[e,i]]},y.step=function(v){return arguments.length?y.stepMajor(v).stepMinor(v):y.stepMinor()},y.stepMajor=function(v){return arguments.length?(u=+v[0],f=+v[1],y):[u,f]},y.stepMinor=function(v){return arguments.length?(c=+v[0],l=+v[1],y):[c,l]},y.precision=function(v){return arguments.length?(b=+v,d=U$(s,i,90),h=P$(t,e,b),p=U$(a,o,90),g=P$(r,n,b),y):b},y.extentMajor([[-180,-90+vt],[180,90-vt]]).extentMinor([[-180,-80-vt],[180,80+vt]])}function ket(){return $et()()}const Tx=e=>e;var Y_=new zs,Ax=new zs,cL,lL,Mx,Nx,Ra={point:Hr,lineStart:Hr,lineEnd:Hr,polygonStart:function(){Ra.lineStart=Det,Ra.lineEnd=Ret},polygonEnd:function(){Ra.lineStart=Ra.lineEnd=Ra.point=Hr,Y_.add(ce(Ax)),Ax=new zs},result:function(){var e=Y_/2;return Y_=new zs,e}};function Det(){Ra.point=Oet}function Oet(e,t){Ra.point=uL,cL=Mx=e,lL=Nx=t}function uL(e,t){Ax.add(Nx*e-Mx*t),Mx=e,Nx=t}function Ret(){uL(cL,lL)}const z$=Ra;var id=1/0,C1=id,Hp=-id,U1=Hp,Fet={point:Let,lineStart:Hr,lineEnd:Hr,polygonStart:Hr,polygonEnd:Hr,result:function(){var e=[[id,C1],[Hp,U1]];return Hp=U1=-(C1=id=1/0),e}};function Let(e,t){e<id&&(id=e),e>Hp&&(Hp=e),t<C1&&(C1=t),t>U1&&(U1=t)}const P1=Fet;var $x=0,kx=0,Rh=0,z1=0,j1=0,cf=0,Dx=0,Ox=0,Fh=0,fL,dL,$s,ks,Qi={point:Yl,lineStart:j$,lineEnd:V$,polygonStart:function(){Qi.lineStart=Uet,Qi.lineEnd=Pet},polygonEnd:function(){Qi.point=Yl,Qi.lineStart=j$,Qi.lineEnd=V$},result:function(){var e=Fh?[Dx/Fh,Ox/Fh]:cf?[z1/cf,j1/cf]:Rh?[$x/Rh,kx/Rh]:[NaN,NaN];return $x=kx=Rh=z1=j1=cf=Dx=Ox=Fh=0,e}};function Yl(e,t){$x+=e,kx+=t,++Rh}function j$(){Qi.point=Bet}function Bet(e,t){Qi.point=Cet,Yl($s=e,ks=t)}function Cet(e,t){var n=e-$s,r=t-ks,i=mr(n*n+r*r);z1+=i*($s+e)/2,j1+=i*(ks+t)/2,cf+=i,Yl($s=e,ks=t)}function V$(){Qi.point=Yl}function Uet(){Qi.point=zet}function Pet(){hL(fL,dL)}function zet(e,t){Qi.point=hL,Yl(fL=$s=e,dL=ks=t)}function hL(e,t){var n=e-$s,r=t-ks,i=mr(n*n+r*r);z1+=i*($s+e)/2,j1+=i*(ks+t)/2,cf+=i,i=ks*e-$s*t,Dx+=i*($s+e),Ox+=i*(ks+t),Fh+=i*3,Yl($s=e,ks=t)}const Y$=Qi;function pL(e){this._context=e}pL.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,ei);break}}},result:Hr};var Rx=new zs,q_,yL,mL,Lh,Bh,V1={point:Hr,lineStart:function(){V1.point=jet},lineEnd:function(){q_&&gL(yL,mL),V1.point=Hr},polygonStart:function(){q_=!0},polygonEnd:function(){q_=null},result:function(){var e=+Rx;return Rx=new zs,e}};function jet(e,t){V1.point=gL,yL=Lh=e,mL=Bh=t}function gL(e,t){Lh-=e,Bh-=t,Rx.add(mr(Lh*Lh+Bh*Bh)),Lh=e,Bh=t}const q$=V1;let W$,Y1,G$,H$;class X${constructor(t){this._append=t==null?vL:Vet(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==G$||this._append!==Y1){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,G$=r,Y1=this._append,H$=this._,this._=i}this._+=H$;break}}}result(){const t=this._;return this._="",t.length?t:null}}function vL(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function Vet(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return vL;if(t!==W$){const n=10**t;W$=t,Y1=function(i){let s=1;this._+=i[0];for(const o=i.length;s<o;++s)this._+=Math.round(arguments[s]*n)/n+i[s]}}return Y1}function Nc(e,t){let n=3,r=4.5,i,s;function o(a){return a&&(typeof r=="function"&&s.pointRadius(+r.apply(this,arguments)),Oa(a,i(s))),s.result()}return o.area=function(a){return Oa(a,i(z$)),z$.result()},o.measure=function(a){return Oa(a,i(q$)),q$.result()},o.bounds=function(a){return Oa(a,i(P1)),P1.result()},o.centroid=function(a){return Oa(a,i(Y$)),Y$.result()},o.projection=function(a){return arguments.length?(i=a==null?(e=null,Tx):(e=a).stream,o):e},o.context=function(a){return arguments.length?(s=a==null?(t=null,new X$(n)):new pL(t=a),typeof r!="function"&&s.pointRadius(r),o):t},o.pointRadius=function(a){return arguments.length?(r=typeof a=="function"?a:(s.pointRadius(+a),+a),o):r},o.digits=function(a){if(!arguments.length)return n;if(a==null)n=null;else{const c=Math.floor(a);if(!(c>=0))throw new RangeError(`invalid digits: ${a}`);n=c}return t===null&&(s=new X$(n)),o},o.projection(e).digits(n).context(t)}function q1(e){return{stream:Vb(e)}}function Vb(e){return function(t){var n=new Fx;for(var r in e)n[r]=e[r];return n.stream=t,n}}function Fx(){}Fx.prototype={constructor:Fx,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function ST(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),Oa(n,e.stream(P1)),t(P1.result()),r!=null&&e.clipExtent(r),e}function xT(e,t,n){return ST(e,function(r){var i=t[1][0]-t[0][0],s=t[1][1]-t[0][1],o=Math.min(i/(r[1][0]-r[0][0]),s/(r[1][1]-r[0][1])),a=+t[0][0]+(i-o*(r[1][0]+r[0][0]))/2,c=+t[0][1]+(s-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([a,c])},n)}function bL(e,t,n){return xT(e,[[0,0],t],n)}function wL(e,t,n){return ST(e,function(r){var i=+t,s=i/(r[1][0]-r[0][0]),o=(i-s*(r[1][0]+r[0][0]))/2,a=-s*r[0][1];e.scale(150*s).translate([o,a])},n)}function _L(e,t,n){return ST(e,function(r){var i=+t,s=i/(r[1][1]-r[0][1]),o=-s*r[0][0],a=(i-s*(r[1][1]+r[0][1]))/2;e.scale(150*s).translate([o,a])},n)}var Q$=16,Yet=St(30*ne);function K$(e,t){return+t?Wet(e,t):qet(e)}function qet(e){return Vb({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function Wet(e,t){function n(r,i,s,o,a,c,l,u,f,d,h,p,g,b){var y=l-r,m=u-i,v=y*y+m*m;if(v>4*t&&g--){var w=o+d,_=a+h,S=c+p,x=mr(w*w+_*_+S*S),T=Rr(S/=x),$=ce(ce(S)-1)<vt||ce(s-f)<vt?(s+f)/2:os(_,w),I=e($,T),A=I[0],D=I[1],F=A-r,E=D-i,N=m*F-y*E;(N*N/v>t||ce((y*F+m*E)/v-.5)>.3||o*d+a*h+c*p<Yet)&&(n(r,i,s,o,a,c,A,D,$,w/=x,_/=x,S,g,b),b.point(A,D),n(A,D,$,w,_,S,l,u,f,d,h,p,g,b))}}return function(r){var i,s,o,a,c,l,u,f,d,h,p,g,b={point:y,lineStart:m,lineEnd:w,polygonStart:function(){r.polygonStart(),b.lineStart=_},polygonEnd:function(){r.polygonEnd(),b.lineStart=m}};function y(T,$){T=e(T,$),r.point(T[0],T[1])}function m(){f=NaN,b.point=v,r.lineStart()}function v(T,$){var I=rd([T,$]),A=e(T,$);n(f,d,u,h,p,g,f=A[0],d=A[1],u=T,h=I[0],p=I[1],g=I[2],Q$,r),r.point(f,d)}function w(){b.point=y,r.lineEnd()}function _(){m(),b.point=S,b.lineEnd=x}function S(T,$){v(i=T,$),s=f,o=d,a=h,c=p,l=g,b.point=v}function x(){n(f,d,u,h,p,g,s,o,i,a,c,l,Q$,r),b.lineEnd=w,w()}return b}}var Get=Vb({point:function(e,t){this.stream.point(e*ne,t*ne)}});function Het(e){return Vb({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function Xet(e,t,n,r,i){function s(o,a){return o*=r,a*=i,[t+e*o,n-e*a]}return s.invert=function(o,a){return[(o-t)/e*r,(n-a)/e*i]},s}function Z$(e,t,n,r,i,s){if(!s)return Xet(e,t,n,r,i);var o=St(s),a=ft(s),c=o*e,l=a*e,u=o/e,f=a/e,d=(a*n-o*t)/e,h=(a*t+o*n)/e;function p(g,b){return g*=r,b*=i,[c*g-l*b+t,n-l*g-c*b]}return p.invert=function(g,b){return[r*(u*g-f*b+d),i*(h-f*g-u*b)]},p}function $c(e){return SL(function(){return e})()}function SL(e){var t,n=150,r=480,i=250,s=0,o=0,a=0,c=0,l=0,u,f=0,d=1,h=1,p=null,g=C$,b=null,y,m,v,w=Tx,_=.5,S,x,T,$,I;function A(N){return T(N[0]*ne,N[1]*ne)}function D(N){return N=T.invert(N[0],N[1]),N&&[N[0]*Ln,N[1]*Ln]}A.stream=function(N){return $&&I===N?$:$=Get(Het(u)(g(S(w(I=N)))))},A.preclip=function(N){return arguments.length?(g=N,p=void 0,E()):g},A.postclip=function(N){return arguments.length?(w=N,b=y=m=v=null,E()):w},A.clipAngle=function(N){return arguments.length?(g=+N?Met(p=N*ne):(p=null,C$),E()):p*Ln},A.clipExtent=function(N){return arguments.length?(w=N==null?(b=y=m=v=null,Tx):aL(b=+N[0][0],y=+N[0][1],m=+N[1][0],v=+N[1][1]),E()):b==null?null:[[b,y],[m,v]]},A.scale=function(N){return arguments.length?(n=+N,F()):n},A.translate=function(N){return arguments.length?(r=+N[0],i=+N[1],F()):[r,i]},A.center=function(N){return arguments.length?(s=N[0]%360*ne,o=N[1]%360*ne,F()):[s*Ln,o*Ln]},A.rotate=function(N){return arguments.length?(a=N[0]%360*ne,c=N[1]%360*ne,l=N.length>2?N[2]%360*ne:0,F()):[a*Ln,c*Ln,l*Ln]},A.angle=function(N){return arguments.length?(f=N%360*ne,F()):f*Ln},A.reflectX=function(N){return arguments.length?(d=N?-1:1,F()):d<0},A.reflectY=function(N){return arguments.length?(h=N?-1:1,F()):h<0},A.precision=function(N){return arguments.length?(S=K$(x,_=N*N),E()):mr(_)},A.fitExtent=function(N,M){return xT(A,N,M)},A.fitSize=function(N,M){return bL(A,N,M)},A.fitWidth=function(N,M){return wL(A,N,M)},A.fitHeight=function(N,M){return _L(A,N,M)};function F(){var N=Z$(n,0,0,d,h,f).apply(null,t(s,o)),M=Z$(n,r-N[0],i-N[1],d,h,f);return u=rL(a,c,l),x=Ix(t,M),T=Ix(u,x),S=K$(x,_),E()}function E(){return $=I=null,A}return function(){return t=e.apply(this,arguments),A.invert=t.invert&&D,F()}}function IT(e){var t=0,n=zt/3,r=SL(e),i=r(t,n);return i.parallels=function(s){return arguments.length?r(t=s[0]*ne,n=s[1]*ne):[t*Ln,n*Ln]},i}function Qet(e){var t=St(e);function n(r,i){return[r*t,ft(i)/t]}return n.invert=function(r,i){return[r/t,Rr(i*t)]},n}function Ket(e,t){var n=ft(e),r=(n+ft(t))/2;if(ce(r)<vt)return Qet(e);var i=1+n*(2*r-n),s=mr(i)/r;function o(a,c){var l=mr(i-2*r*ft(c))/r;return[l*ft(a*=r),s-l*St(a)]}return o.invert=function(a,c){var l=s-c,u=os(a,ce(l))*Ii(l);return l*r<0&&(u-=zt*Ii(a)*Ii(l)),[u/r,Rr((i-(a*a+l*l)*r*r)/(2*r))]},o}function W1(){return IT(Ket).scale(155.424).center([0,33.6442])}function xL(){return W1().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Zet(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function Jet(){var e,t,n=xL(),r,i=W1().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s,o=W1().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,c,l={point:function(d,h){c=[d,h]}};function u(d){var h=d[0],p=d[1];return c=null,r.point(h,p),c||(s.point(h,p),c)||(a.point(h,p),c)}u.invert=function(d){var h=n.scale(),p=n.translate(),g=(d[0]-p[0])/h,b=(d[1]-p[1])/h;return(b>=.12&&b<.234&&g>=-.425&&g<-.214?i:b>=.166&&b<.234&&g>=-.214&&g<-.115?o:n).invert(d)},u.stream=function(d){return e&&t===d?e:e=Zet([n.stream(t=d),i.stream(d),o.stream(d)])},u.precision=function(d){return arguments.length?(n.precision(d),i.precision(d),o.precision(d),f()):n.precision()},u.scale=function(d){return arguments.length?(n.scale(d),i.scale(d*.35),o.scale(d),u.translate(n.translate())):n.scale()},u.translate=function(d){if(!arguments.length)return n.translate();var h=n.scale(),p=+d[0],g=+d[1];return r=n.translate(d).clipExtent([[p-.455*h,g-.238*h],[p+.455*h,g+.238*h]]).stream(l),s=i.translate([p-.307*h,g+.201*h]).clipExtent([[p-.425*h+vt,g+.12*h+vt],[p-.214*h-vt,g+.234*h-vt]]).stream(l),a=o.translate([p-.205*h,g+.212*h]).clipExtent([[p-.214*h+vt,g+.166*h+vt],[p-.115*h-vt,g+.234*h-vt]]).stream(l),f()},u.fitExtent=function(d,h){return xT(u,d,h)},u.fitSize=function(d,h){return bL(u,d,h)},u.fitWidth=function(d,h){return wL(u,d,h)},u.fitHeight=function(d,h){return _L(u,d,h)};function f(){return e=t=null,u}return u.scale(1070)}function IL(e){return function(t,n){var r=St(t),i=St(n),s=e(r*i);return s===1/0?[2,0]:[s*i*ft(t),s*ft(n)]}}function Py(e){return function(t,n){var r=mr(t*t+n*n),i=e(r),s=ft(i),o=St(i);return[os(t*s,r*o),Rr(r&&n*s/r)]}}var EL=IL(function(e){return mr(2/(1+e))});EL.invert=Py(function(e){return 2*Rr(e/2)});function tnt(){return $c(EL).scale(124.75).clipAngle(180-.001)}var TL=IL(function(e){return(e=JF(e))&&e/ft(e)});TL.invert=Py(function(e){return e});function ent(){return $c(TL).scale(79.4188).clipAngle(180-.001)}function Yb(e,t){return[e,M1(wT((tn+t)/2))]}Yb.invert=function(e,t){return[e,2*Dd(ZF(t))-tn]};function nnt(){return AL(Yb).scale(961/ei)}function AL(e){var t=$c(e),n=t.center,r=t.scale,i=t.translate,s=t.clipExtent,o=null,a,c,l;t.scale=function(f){return arguments.length?(r(f),u()):r()},t.translate=function(f){return arguments.length?(i(f),u()):i()},t.center=function(f){return arguments.length?(n(f),u()):n()},t.clipExtent=function(f){return arguments.length?(f==null?o=a=c=l=null:(o=+f[0][0],a=+f[0][1],c=+f[1][0],l=+f[1][1]),u()):o==null?null:[[o,a],[c,l]]};function u(){var f=zt*r(),d=t(bet(t.rotate()).invert([0,0]));return s(o==null?[[d[0]-f,d[1]-f],[d[0]+f,d[1]+f]]:e===Yb?[[Math.max(d[0]-f,o),a],[Math.min(d[0]+f,c),l]]:[[o,Math.max(d[1]-f,a)],[c,Math.min(d[1]+f,l)]])}return u()}function r0(e){return wT((tn+e)/2)}function rnt(e,t){var n=St(e),r=e===t?ft(e):M1(n/St(t))/M1(r0(t)/r0(e)),i=n*z_(r0(e),r)/r;if(!r)return Yb;function s(o,a){i>0?a<-tn+vt&&(a=-tn+vt):a>tn-vt&&(a=tn-vt);var c=i/z_(r0(a),r);return[c*ft(r*o),i-c*St(r*o)]}return s.invert=function(o,a){var c=i-a,l=Ii(r)*mr(o*o+c*c),u=os(o,ce(c))*Ii(c);return c*r<0&&(u-=zt*Ii(o)*Ii(c)),[u/r,2*Dd(z_(i/l,1/r))-tn]},s}function int(){return IT(rnt).scale(109.5).parallels([30,30])}function G1(e,t){return[e,t]}G1.invert=G1;function snt(){return $c(G1).scale(152.63)}function ont(e,t){var n=St(e),r=e===t?ft(e):(n-St(t))/(t-e),i=n/r+e;if(ce(r)<vt)return G1;function s(o,a){var c=i-a,l=r*o;return[c*ft(l),i-c*St(l)]}return s.invert=function(o,a){var c=i-a,l=os(o,ce(c))*Ii(c);return c*r<0&&(l-=zt*Ii(o)*Ii(c)),[l/r,i-Ii(r)*mr(o*o+c*c)]},s}function ant(){return IT(ont).scale(131.154).center([0,13.9389])}var ip=1.340264,sp=-.081106,op=893e-6,ap=.003796,H1=mr(3)/2,cnt=12;function ML(e,t){var n=Rr(H1*ft(t)),r=n*n,i=r*r*r;return[e*St(n)/(H1*(ip+3*sp*r+i*(7*op+9*ap*r))),n*(ip+sp*r+i*(op+ap*r))]}ML.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,s=0,o,a,c;s<cnt&&(a=n*(ip+sp*r+i*(op+ap*r))-t,c=ip+3*sp*r+i*(7*op+9*ap*r),n-=o=a/c,r=n*n,i=r*r*r,!(ce(o)<A1));++s);return[H1*e*(ip+3*sp*r+i*(7*op+9*ap*r))/St(n),Rr(ft(n)/H1)]};function lnt(){return $c(ML).scale(177.158)}function NL(e,t){var n=St(t),r=St(e)*n;return[n*ft(e)/r,ft(t)/r]}NL.invert=Py(Dd);function unt(){return $c(NL).scale(144.049).clipAngle(60)}function $L(e,t){return[St(t)*ft(e),ft(t)]}$L.invert=Py(Rr);function fnt(){return $c($L).scale(249.5).clipAngle(90+vt)}function kL(e,t){var n=St(t),r=1+St(e)*n;return[n*ft(e)/r,ft(t)/r]}kL.invert=Py(function(e){return 2*Dd(e)});function dnt(){return $c(kL).scale(250).clipAngle(142)}function DL(e,t){return[M1(wT((tn+t)/2)),-e]}DL.invert=function(e,t){return[-t,2*Dd(ZF(e))-tn]};function hnt(){var e=AL(DL),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}function pnt(e,t){return e.parent===t.parent?1:2}function ynt(e){return e.reduce(mnt,0)/e.length}function mnt(e,t){return e+t.x}function gnt(e){return 1+e.reduce(vnt,0)}function vnt(e,t){return Math.max(e,t.y)}function bnt(e){for(var t;t=e.children;)e=t[0];return e}function wnt(e){for(var t;t=e.children;)e=t[t.length-1];return e}function OL(){var e=pnt,t=1,n=1,r=!1;function i(s){var o,a=0;s.eachAfter(function(d){var h=d.children;h?(d.x=ynt(h),d.y=gnt(h)):(d.x=o?a+=e(d,o):0,d.y=0,o=d)});var c=bnt(s),l=wnt(s),u=c.x-e(c,l)/2,f=l.x+e(l,c)/2;return s.eachAfter(r?function(d){d.x=(d.x-s.x)*t,d.y=(s.y-d.y)*n}:function(d){d.x=(d.x-u)/(f-u)*t,d.y=(1-(s.y?d.y/s.y:1))*n})}return i.separation=function(s){return arguments.length?(e=s,i):e},i.size=function(s){return arguments.length?(r=!1,t=+s[0],n=+s[1],i):r?null:[t,n]},i.nodeSize=function(s){return arguments.length?(r=!0,t=+s[0],n=+s[1],i):r?[t,n]:null},i}function _nt(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function Snt(){return this.eachAfter(_nt)}function xnt(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function Int(e,t){for(var n=this,r=[n],i,s,o=-1;n=r.pop();)if(e.call(t,n,++o,this),i=n.children)for(s=i.length-1;s>=0;--s)r.push(i[s]);return this}function Ent(e,t){for(var n=this,r=[n],i=[],s,o,a,c=-1;n=r.pop();)if(i.push(n),s=n.children)for(o=0,a=s.length;o<a;++o)r.push(s[o]);for(;n=i.pop();)e.call(t,n,++c,this);return this}function Tnt(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function Ant(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function Mnt(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function Nnt(e){for(var t=this,n=$nt(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function $nt(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function knt(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function Dnt(){return Array.from(this)}function Ont(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function Rnt(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*Fnt(){var e=this,t,n=[e],r,i,s;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,s=r.length;i<s;++i)n.push(r[i]);while(n.length)}function RL(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=Cnt)):t===void 0&&(t=Bnt);for(var n=new sd(e),r,i=[n],s,o,a,c;r=i.pop();)if((o=t(r.data))&&(c=(o=Array.from(o)).length))for(r.children=o,a=c-1;a>=0;--a)i.push(s=o[a]=new sd(o[a])),s.parent=r,s.depth=r.depth+1;return n.eachBefore(FL)}function Lnt(){return RL(this).eachBefore(Unt)}function Bnt(e){return e.children}function Cnt(e){return Array.isArray(e)?e[1]:null}function Unt(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function FL(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function sd(e){this.data=e,this.depth=this.height=0,this.parent=null}sd.prototype=RL.prototype={constructor:sd,count:Snt,each:xnt,eachAfter:Ent,eachBefore:Int,find:Tnt,sum:Ant,sort:Mnt,path:Nnt,ancestors:knt,descendants:Dnt,leaves:Ont,links:Rnt,copy:Lnt,[Symbol.iterator]:Fnt};function W_(e){return e==null?null:Pnt(e)}function Pnt(e){if(typeof e!="function")throw new Error;return e}var znt={depth:-1},J$={},G_={};function jnt(e){return e.id}function Vnt(e){return e.parentId}function LL(){var e=jnt,t=Vnt,n;function r(i){var s=Array.from(i),o=e,a=t,c,l,u,f,d,h,p,g,b=new Map;if(n!=null){const y=s.map((w,_)=>Ynt(n(w,_,i))),m=y.map(tk),v=new Set(y).add("");for(const w of m)v.has(w)||(v.add(w),y.push(w),m.push(tk(w)),s.push(G_));o=(w,_)=>y[_],a=(w,_)=>m[_]}for(u=0,c=s.length;u<c;++u)l=s[u],h=s[u]=new sd(l),(p=o(l,u,i))!=null&&(p+="")&&(g=h.id=p,b.set(g,b.has(g)?J$:h)),(p=a(l,u,i))!=null&&(p+="")&&(h.parent=p);for(u=0;u<c;++u)if(h=s[u],p=h.parent){if(d=b.get(p),!d)throw new Error("missing: "+p);if(d===J$)throw new Error("ambiguous: "+p);d.children?d.children.push(h):d.children=[h],h.parent=d}else{if(f)throw new Error("multiple roots");f=h}if(!f)throw new Error("no root");if(n!=null){for(;f.data===G_&&f.children.length===1;)f=f.children[0],--c;for(let y=s.length-1;y>=0&&(h=s[y],h.data===G_);--y)h.data=null}if(f.parent=znt,f.eachBefore(function(y){y.depth=y.parent.depth+1,--c}).eachBefore(FL),f.parent=null,c>0)throw new Error("cycle");return f}return r.id=function(i){return arguments.length?(e=W_(i),r):e},r.parentId=function(i){return arguments.length?(t=W_(i),r):t},r.path=function(i){return arguments.length?(n=W_(i),r):n},r}function Ynt(e){e=`${e}`;let t=e.length;return Lx(e,t-1)&&!Lx(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function tk(e){let t=e.length;if(t<2)return"";for(;--t>1&&!Lx(e,t););return e.slice(0,t)}function Lx(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}function qnt(e,t){return e.parent===t.parent?1:2}function H_(e){var t=e.children;return t?t[0]:e.t}function X_(e){var t=e.children;return t?t[t.length-1]:e.t}function Wnt(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function Gnt(e){for(var t=0,n=0,r=e.children,i=r.length,s;--i>=0;)s=r[i],s.z+=t,s.m+=t,t+=s.s+(n+=s.c)}function Hnt(e,t,n){return e.a.parent===t.parent?e.a:n}function J0(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}J0.prototype=Object.create(sd.prototype);function Xnt(e){for(var t=new J0(e,0),n,r=[t],i,s,o,a;n=r.pop();)if(s=n._.children)for(n.children=new Array(a=s.length),o=a-1;o>=0;--o)r.push(i=n.children[o]=new J0(s[o],o)),i.parent=n;return(t.parent=new J0(null,0)).children=[t],t}function X1(){var e=qnt,t=1,n=1,r=null;function i(l){var u=Xnt(l);if(u.eachAfter(s),u.parent.m=-u.z,u.eachBefore(o),r)l.eachBefore(c);else{var f=l,d=l,h=l;l.eachBefore(function(m){m.x<f.x&&(f=m),m.x>d.x&&(d=m),m.depth>h.depth&&(h=m)});var p=f===d?1:e(f,d)/2,g=p-f.x,b=t/(d.x+p+g),y=n/(h.depth||1);l.eachBefore(function(m){m.x=(m.x+g)*b,m.y=m.depth*y})}return l}function s(l){var u=l.children,f=l.parent.children,d=l.i?f[l.i-1]:null;if(u){Gnt(l);var h=(u[0].z+u[u.length-1].z)/2;d?(l.z=d.z+e(l._,d._),l.m=l.z-h):l.z=h}else d&&(l.z=d.z+e(l._,d._));l.parent.A=a(l,d,l.parent.A||f[0])}function o(l){l._.x=l.z+l.parent.m,l.m+=l.parent.m}function a(l,u,f){if(u){for(var d=l,h=l,p=u,g=d.parent.children[0],b=d.m,y=h.m,m=p.m,v=g.m,w;p=X_(p),d=H_(d),p&&d;)g=H_(g),h=X_(h),h.a=l,w=p.z+m-d.z-b+e(p._,d._),w>0&&(Wnt(Hnt(p,l,f),l,w),b+=w,y+=w),m+=p.m,b+=d.m,v+=g.m,y+=h.m;p&&!X_(h)&&(h.t=p,h.m+=m-y),d&&!H_(g)&&(g.t=d,g.m+=b-v,f=l)}return f}function c(l){l.x*=t,l.y=l.depth*n}return i.separation=function(l){return arguments.length?(e=l,i):e},i.size=function(l){return arguments.length?(r=!1,t=+l[0],n=+l[1],i):r?null:[t,n]},i.nodeSize=function(l){return arguments.length?(r=!0,t=+l[0],n=+l[1],i):r?[t,n]:null},i}const Qnt=1664525,Knt=1013904223,ek=1/4294967296;function ET(e=Math.random()){let t=(0<=e&&e<1?e/ek:Math.abs(e))|0;return()=>(t=Qnt*t+Knt|0,ek*(t>>>0))}function Js(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function qb(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const Bx=Symbol("implicit");function TT(){var e=new Ul,t=[],n=[],r=Bx;function i(s){let o=e.get(s);if(o===void 0){if(r!==Bx)return r;e.set(s,o=t.push(s)-1)}return n[o%n.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new Ul;for(const o of s)e.has(o)||e.set(o,t.push(o)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return TT(t,n).unknown(r)},Js.apply(i,arguments),i}function Wb(){var e=TT().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,s,o,a=!1,c=0,l=0,u=.5;delete e.unknown;function f(){var d=t().length,h=i<r,p=h?i:r,g=h?r:i;s=(g-p)/Math.max(1,d-c+l*2),a&&(s=Math.floor(s)),p+=(g-p-s*(d-c))*u,o=s*(1-c),a&&(p=Math.round(p),o=Math.round(o));var b=Gr(d).map(function(y){return p+s*y});return n(h?b.reverse():b)}return e.domain=function(d){return arguments.length?(t(d),f()):t()},e.range=function(d){return arguments.length?([r,i]=d,r=+r,i=+i,f()):[r,i]},e.rangeRound=function(d){return[r,i]=d,r=+r,i=+i,a=!0,f()},e.bandwidth=function(){return o},e.step=function(){return s},e.round=function(d){return arguments.length?(a=!!d,f()):a},e.padding=function(d){return arguments.length?(c=Math.min(1,l=+d),f()):c},e.paddingInner=function(d){return arguments.length?(c=Math.min(1,d),f()):c},e.paddingOuter=function(d){return arguments.length?(l=+d,f()):l},e.align=function(d){return arguments.length?(u=Math.max(0,Math.min(1,d)),f()):u},e.copy=function(){return Wb(t(),[r,i]).round(a).paddingInner(c).paddingOuter(l).align(u)},Js.apply(f(),arguments)}function BL(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return BL(t())},e}function Znt(){return BL(Wb.apply(null,arguments).paddingInner(1))}function Jnt(e){return function(){return e}}function Cx(e){return+e}var nk=[0,1];function Ei(e){return e}function Ux(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Jnt(isNaN(t)?NaN:.5)}function trt(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function ert(e,t,n){var r=e[0],i=e[1],s=t[0],o=t[1];return i<r?(r=Ux(i,r),s=n(o,s)):(r=Ux(r,i),s=n(s,o)),function(a){return s(r(a))}}function nrt(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),s=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=Ux(e[o],e[o+1]),s[o]=n(t[o],t[o+1]);return function(a){var c=Db(e,a,1,r)-1;return s[c](i[c](a))}}function zy(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Gb(){var e=nk,t=nk,n=$d,r,i,s,o=Ei,a,c,l;function u(){var d=Math.min(e.length,t.length);return o!==Ei&&(o=trt(e[0],e[d-1])),a=d>2?nrt:ert,c=l=null,f}function f(d){return d==null||isNaN(d=+d)?s:(c||(c=a(e.map(r),t,n)))(r(o(d)))}return f.invert=function(d){return o(i((l||(l=a(t,e.map(r),Qn)))(d)))},f.domain=function(d){return arguments.length?(e=Array.from(d,Cx),u()):e.slice()},f.range=function(d){return arguments.length?(t=Array.from(d),u()):t.slice()},f.rangeRound=function(d){return t=Array.from(d),n=hT,u()},f.clamp=function(d){return arguments.length?(o=d?!0:Ei,u()):o!==Ei},f.interpolate=function(d){return arguments.length?(n=d,u()):n},f.unknown=function(d){return arguments.length?(s=d,f):s},function(d,h){return r=d,i=h,u()}}function CL(){return Gb()(Ei,Ei)}function rrt(e,t,n,r){var i=tx(e,t,n),s;switch(r=Gp(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(s=fet(i,o))&&(r.precision=s),KF(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=det(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=uet(i))&&(r.precision=s-(r.type==="%")*2);break}}return kd(r)}function jy(e){var t=e.domain;return e.ticks=function(n){var r=t();return cc(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return rrt(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,s=r.length-1,o=r[i],a=r[s],c,l,u=10;for(a<o&&(l=o,o=a,a=l,l=i,i=s,s=l);u-- >0;){if(l=zp(o,a,n),l===c)return r[i]=o,r[s]=a,t(r);if(l>0)o=Math.floor(o/l)*l,a=Math.ceil(a/l)*l;else if(l<0)o=Math.ceil(o*l)/l,a=Math.floor(a*l)/l;else break;c=l}return e},e}function Hb(){var e=CL();return e.copy=function(){return zy(e,Hb())},Js.apply(e,arguments),jy(e)}function UL(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,Cx),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return UL(e).unknown(t)},e=arguments.length?Array.from(e,Cx):[0,1],jy(n)}function PL(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],s=e[r],o;return s<i&&(o=n,n=r,r=o,o=i,i=s,s=o),e[n]=t.floor(i),e[r]=t.ceil(s),e}function rk(e){return Math.log(e)}function ik(e){return Math.exp(e)}function irt(e){return-Math.log(-e)}function srt(e){return-Math.exp(-e)}function ort(e){return isFinite(e)?+("1e"+e):e<0?0:e}function art(e){return e===10?ort:e===Math.E?Math.exp:t=>Math.pow(e,t)}function crt(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function sk(e){return(t,n)=>-e(-t,n)}function zL(e){const t=e(rk,ik),n=t.domain;let r=10,i,s;function o(){return i=crt(r),s=art(r),n()[0]<0?(i=sk(i),s=sk(s),e(irt,srt)):e(rk,ik),t}return t.base=function(a){return arguments.length?(r=+a,o()):r},t.domain=function(a){return arguments.length?(n(a),o()):n()},t.ticks=a=>{const c=n();let l=c[0],u=c[c.length-1];const f=u<l;f&&([l,u]=[u,l]);let d=i(l),h=i(u),p,g;const b=a==null?10:+a;let y=[];if(!(r%1)&&h-d<b){if(d=Math.floor(d),h=Math.ceil(h),l>0){for(;d<=h;++d)for(p=1;p<r;++p)if(g=d<0?p/s(-d):p*s(d),!(g<l)){if(g>u)break;y.push(g)}}else for(;d<=h;++d)for(p=r-1;p>=1;--p)if(g=d>0?p/s(-d):p*s(d),!(g<l)){if(g>u)break;y.push(g)}y.length*2<b&&(y=cc(l,u,b))}else y=cc(d,h,Math.min(h-d,b)).map(s);return f?y.reverse():y},t.tickFormat=(a,c)=>{if(a==null&&(a=10),c==null&&(c=r===10?"s":","),typeof c!="function"&&(!(r%1)&&(c=Gp(c)).precision==null&&(c.trim=!0),c=kd(c)),a===1/0)return c;const l=Math.max(1,r*a/t.ticks().length);return u=>{let f=u/s(Math.round(i(u)));return f*r<r-.5&&(f*=r),f<=l?c(u):""}},t.nice=()=>n(PL(n(),{floor:a=>s(Math.floor(i(a))),ceil:a=>s(Math.ceil(i(a)))})),t}function jL(){const e=zL(Gb()).domain([1,10]);return e.copy=()=>zy(e,jL()).base(e.base()),Js.apply(e,arguments),e}function ok(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function ak(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function VL(e){var t=1,n=e(ok(t),ak(t));return n.constant=function(r){return arguments.length?e(ok(t=+r),ak(t)):t},jy(n)}function YL(){var e=VL(Gb());return e.copy=function(){return zy(e,YL()).constant(e.constant())},Js.apply(e,arguments)}function ck(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function lrt(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function urt(e){return e<0?-e*e:e*e}function qL(e){var t=e(Ei,Ei),n=1;function r(){return n===1?e(Ei,Ei):n===.5?e(lrt,urt):e(ck(n),ck(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},jy(t)}function WL(){var e=qL(Gb());return e.copy=function(){return zy(e,WL()).exponent(e.exponent())},Js.apply(e,arguments),e}function GL(){var e=[],t=[],n=[],r;function i(){var o=0,a=Math.max(1,t.length);for(n=new Array(a-1);++o<a;)n[o-1]=yQ(e,o/a);return s}function s(o){return o==null||isNaN(o=+o)?r:t[Db(n,o)]}return s.invertExtent=function(o){var a=t.indexOf(o);return a<0?[NaN,NaN]:[a>0?n[a-1]:e[0],a<n.length?n[a]:e[e.length-1]]},s.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let a of o)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(He),i()},s.range=function(o){return arguments.length?(t=Array.from(o),i()):t.slice()},s.unknown=function(o){return arguments.length?(r=o,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return GL().domain(e).range(t).unknown(r)},Js.apply(s,arguments)}function HL(){var e=[.5],t=[0,1],n,r=1;function i(s){return s!=null&&s<=s?t[Db(e,s,0,r)]:n}return i.domain=function(s){return arguments.length?(e=Array.from(s),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(s){return arguments.length?(t=Array.from(s),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(s){var o=t.indexOf(s);return[e[o-1],e[o]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return HL().domain(e).range(t).unknown(n)},Js.apply(i,arguments)}const Q_=new Date,K_=new Date;function wn(e,t,n,r){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(e(s=new Date(+s)),s),i.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),i.round=s=>{const o=i(s),a=i.ceil(s);return s-o<a-s?o:a},i.offset=(s,o)=>(t(s=new Date(+s),o==null?1:Math.floor(o)),s),i.range=(s,o,a)=>{const c=[];if(s=i.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return c;let l;do c.push(l=new Date(+s)),t(s,a),e(s);while(l<s&&s<o);return c},i.filter=s=>wn(o=>{if(o>=o)for(;e(o),!s(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;t(o,-1),!s(o););else for(;--a>=0;)for(;t(o,1),!s(o););}),n&&(i.count=(s,o)=>(Q_.setTime(+s),K_.setTime(+o),e(Q_),e(K_),Math.floor(n(Q_,K_))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?o=>r(o)%s===0:o=>i.count(0,o)%s===0):i)),i}const Q1=wn(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Q1.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?wn(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):Q1);Q1.range;const Lo=1e3,Ti=Lo*60,Bo=Ti*60,Jo=Bo*24,AT=Jo*7,lk=Jo*30,Z_=Jo*365,Fs=wn(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Lo)},(e,t)=>(t-e)/Lo,e=>e.getUTCSeconds());Fs.range;const Xb=wn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Lo)},(e,t)=>{e.setTime(+e+t*Ti)},(e,t)=>(t-e)/Ti,e=>e.getMinutes());Xb.range;const Vy=wn(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Ti)},(e,t)=>(t-e)/Ti,e=>e.getUTCMinutes());Vy.range;const Qb=wn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Lo-e.getMinutes()*Ti)},(e,t)=>{e.setTime(+e+t*Bo)},(e,t)=>(t-e)/Bo,e=>e.getHours());Qb.range;const Yy=wn(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Bo)},(e,t)=>(t-e)/Bo,e=>e.getUTCHours());Yy.range;const tu=wn(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Ti)/Jo,e=>e.getDate()-1);tu.range;const Kb=wn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Jo,e=>e.getUTCDate()-1);Kb.range;const Zb=wn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Jo,e=>Math.floor(e/Jo));Zb.range;function eu(e){return wn(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Ti)/AT)}const od=eu(0),Xp=eu(1),XL=eu(2),QL=eu(3),ql=eu(4),KL=eu(5),ZL=eu(6);od.range;Xp.range;XL.range;QL.range;ql.range;KL.range;ZL.range;function nu(e){return wn(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/AT)}const ad=nu(0),Qp=nu(1),JL=nu(2),tB=nu(3),Wl=nu(4),eB=nu(5),nB=nu(6);ad.range;Qp.range;JL.range;tB.range;Wl.range;eB.range;nB.range;const qy=wn(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());qy.range;const Wy=wn(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());Wy.range;const as=wn(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());as.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:wn(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});as.range;const cs=wn(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());cs.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:wn(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});cs.range;function rB(e,t,n,r,i,s){const o=[[Fs,1,Lo],[Fs,5,5*Lo],[Fs,15,15*Lo],[Fs,30,30*Lo],[s,1,Ti],[s,5,5*Ti],[s,15,15*Ti],[s,30,30*Ti],[i,1,Bo],[i,3,3*Bo],[i,6,6*Bo],[i,12,12*Bo],[r,1,Jo],[r,2,2*Jo],[n,1,AT],[t,1,lk],[t,3,3*lk],[e,1,Z_]];function a(l,u,f){const d=u<l;d&&([l,u]=[u,l]);const h=f&&typeof f.range=="function"?f:c(l,u,f),p=h?h.range(l,+u+1):[];return d?p.reverse():p}function c(l,u,f){const d=Math.abs(u-l)/f,h=kb(([,,b])=>b).right(o,d);if(h===o.length)return e.every(tx(l/Z_,u/Z_,f));if(h===0)return Q1.every(Math.max(tx(l,u,f),1));const[p,g]=o[d/o[h-1][2]<o[h][2]/d?h-1:h];return p.every(g)}return[a,c]}const[frt,iB]=rB(cs,Wy,ad,Zb,Yy,Vy),[drt,hrt]=rB(as,qy,od,tu,Qb,Xb);function J_(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function t2(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function oh(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function prt(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,s=e.days,o=e.shortDays,a=e.months,c=e.shortMonths,l=ah(i),u=ch(i),f=ah(s),d=ch(s),h=ah(o),p=ch(o),g=ah(a),b=ch(a),y=ah(c),m=ch(c),v={a:R,A:O,b:C,B:L,c:null,d:yk,e:yk,f:Brt,g:Grt,G:Xrt,H:Rrt,I:Frt,j:Lrt,L:sB,m:Crt,M:Urt,p:P,q:z,Q:vk,s:bk,S:Prt,u:zrt,U:jrt,V:Vrt,w:Yrt,W:qrt,x:null,X:null,y:Wrt,Y:Hrt,Z:Qrt,"%":gk},w={a:G,A:Q,b:rt,B:Z,c:null,d:mk,e:mk,f:tit,g:uit,G:dit,H:Krt,I:Zrt,j:Jrt,L:aB,m:eit,M:nit,p:q,q:K,Q:vk,s:bk,S:rit,u:iit,U:sit,V:oit,w:ait,W:cit,x:null,X:null,y:lit,Y:fit,Z:hit,"%":gk},_={a:I,A,b:D,B:F,c:E,d:hk,e:hk,f:$rt,g:dk,G:fk,H:pk,I:pk,j:Trt,L:Nrt,m:Ert,M:Art,p:$,q:Irt,Q:Drt,s:Ort,S:Mrt,u:brt,U:wrt,V:_rt,w:vrt,W:Srt,x:N,X:M,y:dk,Y:fk,Z:xrt,"%":krt};v.x=S(n,v),v.X=S(r,v),v.c=S(t,v),w.x=S(n,w),w.X=S(r,w),w.c=S(t,w);function S(Y,et){return function(st){var j=[],Tt=-1,ut=0,jt=Y.length,qt,ct,ue;for(st instanceof Date||(st=new Date(+st));++Tt<jt;)Y.charCodeAt(Tt)===37&&(j.push(Y.slice(ut,Tt)),(ct=uk[qt=Y.charAt(++Tt)])!=null?qt=Y.charAt(++Tt):ct=qt==="e"?" ":"0",(ue=et[qt])&&(qt=ue(st,ct)),j.push(qt),ut=Tt+1);return j.push(Y.slice(ut,Tt)),j.join("")}}function x(Y,et){return function(st){var j=oh(1900,void 0,1),Tt=T(j,Y,st+="",0),ut,jt;if(Tt!=st.length)return null;if("Q"in j)return new Date(j.Q);if("s"in j)return new Date(j.s*1e3+("L"in j?j.L:0));if(et&&!("Z"in j)&&(j.Z=0),"p"in j&&(j.H=j.H%12+j.p*12),j.m===void 0&&(j.m="q"in j?j.q:0),"V"in j){if(j.V<1||j.V>53)return null;"w"in j||(j.w=1),"Z"in j?(ut=t2(oh(j.y,0,1)),jt=ut.getUTCDay(),ut=jt>4||jt===0?Qp.ceil(ut):Qp(ut),ut=Kb.offset(ut,(j.V-1)*7),j.y=ut.getUTCFullYear(),j.m=ut.getUTCMonth(),j.d=ut.getUTCDate()+(j.w+6)%7):(ut=J_(oh(j.y,0,1)),jt=ut.getDay(),ut=jt>4||jt===0?Xp.ceil(ut):Xp(ut),ut=tu.offset(ut,(j.V-1)*7),j.y=ut.getFullYear(),j.m=ut.getMonth(),j.d=ut.getDate()+(j.w+6)%7)}else("W"in j||"U"in j)&&("w"in j||(j.w="u"in j?j.u%7:"W"in j?1:0),jt="Z"in j?t2(oh(j.y,0,1)).getUTCDay():J_(oh(j.y,0,1)).getDay(),j.m=0,j.d="W"in j?(j.w+6)%7+j.W*7-(jt+5)%7:j.w+j.U*7-(jt+6)%7);return"Z"in j?(j.H+=j.Z/100|0,j.M+=j.Z%100,t2(j)):J_(j)}}function T(Y,et,st,j){for(var Tt=0,ut=et.length,jt=st.length,qt,ct;Tt<ut;){if(j>=jt)return-1;if(qt=et.charCodeAt(Tt++),qt===37){if(qt=et.charAt(Tt++),ct=_[qt in uk?et.charAt(Tt++):qt],!ct||(j=ct(Y,st,j))<0)return-1}else if(qt!=st.charCodeAt(j++))return-1}return j}function $(Y,et,st){var j=l.exec(et.slice(st));return j?(Y.p=u.get(j[0].toLowerCase()),st+j[0].length):-1}function I(Y,et,st){var j=h.exec(et.slice(st));return j?(Y.w=p.get(j[0].toLowerCase()),st+j[0].length):-1}function A(Y,et,st){var j=f.exec(et.slice(st));return j?(Y.w=d.get(j[0].toLowerCase()),st+j[0].length):-1}function D(Y,et,st){var j=y.exec(et.slice(st));return j?(Y.m=m.get(j[0].toLowerCase()),st+j[0].length):-1}function F(Y,et,st){var j=g.exec(et.slice(st));return j?(Y.m=b.get(j[0].toLowerCase()),st+j[0].length):-1}function E(Y,et,st){return T(Y,t,et,st)}function N(Y,et,st){return T(Y,n,et,st)}function M(Y,et,st){return T(Y,r,et,st)}function R(Y){return o[Y.getDay()]}function O(Y){return s[Y.getDay()]}function C(Y){return c[Y.getMonth()]}function L(Y){return a[Y.getMonth()]}function P(Y){return i[+(Y.getHours()>=12)]}function z(Y){return 1+~~(Y.getMonth()/3)}function G(Y){return o[Y.getUTCDay()]}function Q(Y){return s[Y.getUTCDay()]}function rt(Y){return c[Y.getUTCMonth()]}function Z(Y){return a[Y.getUTCMonth()]}function q(Y){return i[+(Y.getUTCHours()>=12)]}function K(Y){return 1+~~(Y.getUTCMonth()/3)}return{format:function(Y){var et=S(Y+="",v);return et.toString=function(){return Y},et},parse:function(Y){var et=x(Y+="",!1);return et.toString=function(){return Y},et},utcFormat:function(Y){var et=S(Y+="",w);return et.toString=function(){return Y},et},utcParse:function(Y){var et=x(Y+="",!0);return et.toString=function(){return Y},et}}}var uk={"-":"",_:" ",0:"0"},Rn=/^\s*\d+/,yrt=/^%/,mrt=/[\\^$*+?|[\]().{}]/g;function ie(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(t)+i:i)}function grt(e){return e.replace(mrt,"\\$&")}function ah(e){return new RegExp("^(?:"+e.map(grt).join("|")+")","i")}function ch(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function vrt(e,t,n){var r=Rn.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function brt(e,t,n){var r=Rn.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function wrt(e,t,n){var r=Rn.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function _rt(e,t,n){var r=Rn.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function Srt(e,t,n){var r=Rn.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function fk(e,t,n){var r=Rn.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function dk(e,t,n){var r=Rn.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function xrt(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Irt(e,t,n){var r=Rn.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function Ert(e,t,n){var r=Rn.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function hk(e,t,n){var r=Rn.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function Trt(e,t,n){var r=Rn.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function pk(e,t,n){var r=Rn.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function Art(e,t,n){var r=Rn.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function Mrt(e,t,n){var r=Rn.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function Nrt(e,t,n){var r=Rn.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function $rt(e,t,n){var r=Rn.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function krt(e,t,n){var r=yrt.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function Drt(e,t,n){var r=Rn.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function Ort(e,t,n){var r=Rn.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function yk(e,t){return ie(e.getDate(),t,2)}function Rrt(e,t){return ie(e.getHours(),t,2)}function Frt(e,t){return ie(e.getHours()%12||12,t,2)}function Lrt(e,t){return ie(1+tu.count(as(e),e),t,3)}function sB(e,t){return ie(e.getMilliseconds(),t,3)}function Brt(e,t){return sB(e,t)+"000"}function Crt(e,t){return ie(e.getMonth()+1,t,2)}function Urt(e,t){return ie(e.getMinutes(),t,2)}function Prt(e,t){return ie(e.getSeconds(),t,2)}function zrt(e){var t=e.getDay();return t===0?7:t}function jrt(e,t){return ie(od.count(as(e)-1,e),t,2)}function oB(e){var t=e.getDay();return t>=4||t===0?ql(e):ql.ceil(e)}function Vrt(e,t){return e=oB(e),ie(ql.count(as(e),e)+(as(e).getDay()===4),t,2)}function Yrt(e){return e.getDay()}function qrt(e,t){return ie(Xp.count(as(e)-1,e),t,2)}function Wrt(e,t){return ie(e.getFullYear()%100,t,2)}function Grt(e,t){return e=oB(e),ie(e.getFullYear()%100,t,2)}function Hrt(e,t){return ie(e.getFullYear()%1e4,t,4)}function Xrt(e,t){var n=e.getDay();return e=n>=4||n===0?ql(e):ql.ceil(e),ie(e.getFullYear()%1e4,t,4)}function Qrt(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+ie(t/60|0,"0",2)+ie(t%60,"0",2)}function mk(e,t){return ie(e.getUTCDate(),t,2)}function Krt(e,t){return ie(e.getUTCHours(),t,2)}function Zrt(e,t){return ie(e.getUTCHours()%12||12,t,2)}function Jrt(e,t){return ie(1+Kb.count(cs(e),e),t,3)}function aB(e,t){return ie(e.getUTCMilliseconds(),t,3)}function tit(e,t){return aB(e,t)+"000"}function eit(e,t){return ie(e.getUTCMonth()+1,t,2)}function nit(e,t){return ie(e.getUTCMinutes(),t,2)}function rit(e,t){return ie(e.getUTCSeconds(),t,2)}function iit(e){var t=e.getUTCDay();return t===0?7:t}function sit(e,t){return ie(ad.count(cs(e)-1,e),t,2)}function cB(e){var t=e.getUTCDay();return t>=4||t===0?Wl(e):Wl.ceil(e)}function oit(e,t){return e=cB(e),ie(Wl.count(cs(e),e)+(cs(e).getUTCDay()===4),t,2)}function ait(e){return e.getUTCDay()}function cit(e,t){return ie(Qp.count(cs(e)-1,e),t,2)}function lit(e,t){return ie(e.getUTCFullYear()%100,t,2)}function uit(e,t){return e=cB(e),ie(e.getUTCFullYear()%100,t,2)}function fit(e,t){return ie(e.getUTCFullYear()%1e4,t,4)}function dit(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Wl(e):Wl.ceil(e),ie(e.getUTCFullYear()%1e4,t,4)}function hit(){return"+0000"}function gk(){return"%"}function vk(e){return+e}function bk(e){return Math.floor(+e/1e3)}var vu,MT,Gy;pit({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function pit(e){return vu=prt(e),MT=vu.format,vu.parse,Gy=vu.utcFormat,vu.utcParse,vu}function yit(e){return new Date(e)}function mit(e){return e instanceof Date?+e:+new Date(+e)}function NT(e,t,n,r,i,s,o,a,c,l){var u=CL(),f=u.invert,d=u.domain,h=l(".%L"),p=l(":%S"),g=l("%I:%M"),b=l("%I %p"),y=l("%a %d"),m=l("%b %d"),v=l("%B"),w=l("%Y");function _(S){return(c(S)<S?h:a(S)<S?p:o(S)<S?g:s(S)<S?b:r(S)<S?i(S)<S?y:m:n(S)<S?v:w)(S)}return u.invert=function(S){return new Date(f(S))},u.domain=function(S){return arguments.length?d(Array.from(S,mit)):d().map(yit)},u.ticks=function(S){var x=d();return e(x[0],x[x.length-1],S??10)},u.tickFormat=function(S,x){return x==null?_:l(x)},u.nice=function(S){var x=d();return(!S||typeof S.range!="function")&&(S=t(x[0],x[x.length-1],S??10)),S?d(PL(x,S)):u},u.copy=function(){return zy(u,NT(e,t,n,r,i,s,o,a,c,l))},u}function git(){return Js.apply(NT(drt,hrt,as,qy,od,tu,Qb,Xb,Fs,MT).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function vit(){return Js.apply(NT(frt,iB,cs,Wy,ad,Kb,Yy,Vy,Fs,Gy).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Jb(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function tw(){var e=0,t=.5,n=1,r=1,i,s,o,a,c,l=Ei,u,f=!1,d;function h(g){return isNaN(g=+g)?d:(g=.5+((g=+u(g))-s)*(r*g<r*s?a:c),l(f?Math.max(0,Math.min(1,g)):g))}h.domain=function(g){return arguments.length?([e,t,n]=g,i=u(e=+e),s=u(t=+t),o=u(n=+n),a=i===s?0:.5/(s-i),c=s===o?0:.5/(o-s),r=s<i?-1:1,h):[e,t,n]},h.clamp=function(g){return arguments.length?(f=!!g,h):f},h.interpolator=function(g){return arguments.length?(l=g,h):l};function p(g){return function(b){var y,m,v;return arguments.length?([y,m,v]=b,l=Pb(g,[y,m,v]),h):[l(0),l(.5),l(1)]}}return h.range=p($d),h.rangeRound=p(hT),h.unknown=function(g){return arguments.length?(d=g,h):d},function(g){return u=g,i=g(e),s=g(t),o=g(n),a=i===s?0:.5/(s-i),c=s===o?0:.5/(o-s),r=s<i?-1:1,h}}function lB(){var e=jy(tw()(Ei));return e.copy=function(){return Jb(e,lB())},qb.apply(e,arguments)}function uB(){var e=zL(tw()).domain([.1,1,10]);return e.copy=function(){return Jb(e,uB()).base(e.base())},qb.apply(e,arguments)}function fB(){var e=VL(tw());return e.copy=function(){return Jb(e,fB()).constant(e.constant())},qb.apply(e,arguments)}function dB(){var e=qL(tw());return e.copy=function(){return Jb(e,dB()).exponent(e.exponent())},qb.apply(e,arguments)}function Lt(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const bit=Lt("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),wit=Lt("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),_it=Lt("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),Sit=Lt("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),xit=Lt("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),Iit=Lt("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),Eit=Lt("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),Tit=Lt("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),Ait=Lt("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),Mit=Lt("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),Te=e=>NZ(e[e.length-1]);var hB=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(Lt);const pB=Te(hB);var yB=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(Lt);const mB=Te(yB);var gB=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(Lt);const vB=Te(gB);var bB=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(Lt);const wB=Te(bB);var Px=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(Lt);const K1=Te(Px);var _B=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(Lt);const SB=Te(_B);var zx=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(Lt);const Z1=Te(zx);var xB=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(Lt);const IB=Te(xB);var EB=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(Lt);const TB=Te(EB);var AB=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(Lt);const MB=Te(AB);var NB=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(Lt);const $B=Te(NB);var kB=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(Lt);const DB=Te(kB);var OB=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(Lt);const RB=Te(OB);var FB=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(Lt);const LB=Te(FB);var BB=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(Lt);const CB=Te(BB);var UB=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(Lt);const PB=Te(UB);var zB=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(Lt);const jB=Te(zB);var VB=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(Lt);const YB=Te(VB);var qB=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(Lt);const WB=Te(qB);var GB=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(Lt);const HB=Te(GB);var XB=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(Lt);const QB=Te(XB);var KB=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(Lt);const ZB=Te(KB);var JB=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(Lt);const tC=Te(JB);var eC=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(Lt);const nC=Te(eC);var rC=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(Lt);const iC=Te(rC);var sC=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(Lt);const oC=Te(sC);var aC=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(Lt);const cC=Te(aC);function lC(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-e*(35.34-e*(2381.73-e*(6402.7-e*(7024.72-e*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+e*(170.73+e*(52.82-e*(131.46-e*(176.58-e*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+e*(442.36-e*(2482.43-e*(6167.24-e*(6614.94-e*2475.67)))))))+")"}const uC=pT(Xs(300,.5,0),Xs(-240,.5,1));var fC=pT(Xs(-100,.75,.35),Xs(80,1.5,.8)),dC=pT(Xs(260,.75,.35),Xs(80,1.5,.8)),i0=Xs();function hC(e){(e<0||e>1)&&(e-=Math.floor(e));var t=Math.abs(e-.5);return i0.h=360*e-100,i0.s=1.5-1.5*t,i0.l=.8-.9*t,i0+""}var s0=Ri(),Nit=Math.PI/3,$it=Math.PI*2/3;function pC(e){var t;return e=(.5-e)*Math.PI,s0.r=255*(t=Math.sin(e))*t,s0.g=255*(t=Math.sin(e+Nit))*t,s0.b=255*(t=Math.sin(e+$it))*t,s0+""}function yC(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+e*(1172.33-e*(10793.56-e*(33300.12-e*(38394.49-e*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+e*(557.33+e*(1225.33-e*(3574.96-e*(1073.77+e*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+e*(3211.1-e*(15327.97-e*(27814-e*(22569.18-e*6838.66)))))))+")"}function ew(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}const mC=ew(Lt("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var gC=ew(Lt("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),vC=ew(Lt("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),bC=ew(Lt("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function En(e){return function(){return e}}const wC=Math.cos,$T=Math.min,J1=Math.sin,_n=Math.sqrt,wk=1e-12,tv=Math.PI,nw=2*tv;function _C(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new HF(t)}function SC(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function xC(e){this._context=e}xC.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Hy(e){return new xC(e)}function IC(e){return e[0]}function EC(e){return e[1]}function TC(e,t){var n=En(!0),r=null,i=Hy,s=null,o=_C(a);e=typeof e=="function"?e:e===void 0?IC:En(e),t=typeof t=="function"?t:t===void 0?EC:En(t);function a(c){var l,u=(c=SC(c)).length,f,d=!1,h;for(r==null&&(s=i(h=o())),l=0;l<=u;++l)!(l<u&&n(f=c[l],l,c))===d&&((d=!d)?s.lineStart():s.lineEnd()),d&&s.point(+e(f,l,c),+t(f,l,c));if(h)return s=null,h+""||null}return a.x=function(c){return arguments.length?(e=typeof c=="function"?c:En(+c),a):e},a.y=function(c){return arguments.length?(t=typeof c=="function"?c:En(+c),a):t},a.defined=function(c){return arguments.length?(n=typeof c=="function"?c:En(!!c),a):n},a.curve=function(c){return arguments.length?(i=c,r!=null&&(s=i(r)),a):i},a.context=function(c){return arguments.length?(c==null?r=s=null:s=i(r=c),a):r},a}function kT(e,t,n){var r=null,i=En(!0),s=null,o=Hy,a=null,c=_C(l);e=typeof e=="function"?e:e===void 0?IC:En(+e),t=typeof t=="function"?t:En(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?EC:En(+n);function l(f){var d,h,p,g=(f=SC(f)).length,b,y=!1,m,v=new Array(g),w=new Array(g);for(s==null&&(a=o(m=c())),d=0;d<=g;++d){if(!(d<g&&i(b=f[d],d,f))===y)if(y=!y)h=d,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),p=d-1;p>=h;--p)a.point(v[p],w[p]);a.lineEnd(),a.areaEnd()}y&&(v[d]=+e(b,d,f),w[d]=+t(b,d,f),a.point(r?+r(b,d,f):v[d],n?+n(b,d,f):w[d]))}if(m)return a=null,m+""||null}function u(){return TC().defined(i).curve(o).context(s)}return l.x=function(f){return arguments.length?(e=typeof f=="function"?f:En(+f),r=null,l):e},l.x0=function(f){return arguments.length?(e=typeof f=="function"?f:En(+f),l):e},l.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:En(+f),l):r},l.y=function(f){return arguments.length?(t=typeof f=="function"?f:En(+f),n=null,l):t},l.y0=function(f){return arguments.length?(t=typeof f=="function"?f:En(+f),l):t},l.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:En(+f),l):n},l.lineX0=l.lineY0=function(){return u().x(e).y(t)},l.lineY1=function(){return u().x(e).y(n)},l.lineX1=function(){return u().x(r).y(t)},l.defined=function(f){return arguments.length?(i=typeof f=="function"?f:En(!!f),l):i},l.curve=function(f){return arguments.length?(o=f,s!=null&&(a=o(s)),l):o},l.context=function(f){return arguments.length?(f==null?s=a=null:a=o(s=f),l):s},l}class AC{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function kit(e){return new AC(e,!0)}function Dit(e){return new AC(e,!1)}const Oit=_n(3),MC={draw(e,t){const n=_n(t+$T(t/28,.75))*.59436,r=n/2,i=r*Oit;e.moveTo(0,n),e.lineTo(0,-n),e.moveTo(-i,-r),e.lineTo(i,r),e.moveTo(-i,r),e.lineTo(i,-r)}},Kp={draw(e,t){const n=_n(t/tv);e.moveTo(n,0),e.arc(0,0,n,0,nw)}},NC={draw(e,t){const n=_n(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},$C=_n(1/3),Rit=$C*2,kC={draw(e,t){const n=_n(t/Rit),r=n*$C;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},DC={draw(e,t){const n=_n(t)*.62625;e.moveTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.lineTo(-n,0),e.closePath()}},OC={draw(e,t){const n=_n(t-$T(t/7,2))*.87559;e.moveTo(-n,0),e.lineTo(n,0),e.moveTo(0,n),e.lineTo(0,-n)}},RC={draw(e,t){const n=_n(t),r=-n/2;e.rect(r,r,n,n)}},FC={draw(e,t){const n=_n(t)*.4431;e.moveTo(n,n),e.lineTo(n,-n),e.lineTo(-n,-n),e.lineTo(-n,n),e.closePath()}},Fit=.8908130915292852,LC=J1(tv/10)/J1(7*tv/10),Lit=J1(nw/10)*LC,Bit=-wC(nw/10)*LC,BC={draw(e,t){const n=_n(t*Fit),r=Lit*n,i=Bit*n;e.moveTo(0,-n),e.lineTo(r,i);for(let s=1;s<5;++s){const o=nw*s/5,a=wC(o),c=J1(o);e.lineTo(c*n,-a*n),e.lineTo(a*r-c*i,c*r+a*i)}e.closePath()}},e2=_n(3),CC={draw(e,t){const n=-_n(t/(e2*3));e.moveTo(0,n*2),e.lineTo(-e2*n,-n),e.lineTo(e2*n,-n),e.closePath()}},Cit=_n(3),UC={draw(e,t){const n=_n(t)*.6824,r=n/2,i=n*Cit/2;e.moveTo(0,-n),e.lineTo(i,r),e.lineTo(-i,r),e.closePath()}},fi=-.5,di=_n(3)/2,jx=1/_n(12),Uit=(jx/2+1)*3,PC={draw(e,t){const n=_n(t/Uit),r=n/2,i=n*jx,s=r,o=n*jx+n,a=-s,c=o;e.moveTo(r,i),e.lineTo(s,o),e.lineTo(a,c),e.lineTo(fi*r-di*i,di*r+fi*i),e.lineTo(fi*s-di*o,di*s+fi*o),e.lineTo(fi*a-di*c,di*a+fi*c),e.lineTo(fi*r+di*i,fi*i-di*r),e.lineTo(fi*s+di*o,fi*o-di*s),e.lineTo(fi*a+di*c,fi*c-di*a),e.closePath()}},zC={draw(e,t){const n=_n(t-$T(t/6,1.7))*.6189;e.moveTo(-n,-n),e.lineTo(n,n),e.moveTo(-n,n),e.lineTo(n,-n)}},Pit=[Kp,NC,kC,RC,BC,CC,PC],zit=[Kp,OC,zC,UC,MC,FC,DC];function fc(){}function ev(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function rw(e){this._context=e}rw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:ev(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:ev(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function jit(e){return new rw(e)}function jC(e){this._context=e}jC.prototype={areaStart:fc,areaEnd:fc,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:ev(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Vit(e){return new jC(e)}function VC(e){this._context=e}VC.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:ev(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Yit(e){return new VC(e)}function YC(e,t){this._basis=new rw(e),this._beta=t}YC.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],s=e[n]-r,o=t[n]-i,a=-1,c;++a<=n;)c=a/n,this._basis.point(this._beta*e[a]+(1-this._beta)*(r+c*s),this._beta*t[a]+(1-this._beta)*(i+c*o));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const qit=function e(t){function n(r){return t===1?new rw(r):new YC(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function nv(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function DT(e,t){this._context=e,this._k=(1-t)/6}DT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:nv(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:nv(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Wit=function e(t){function n(r){return new DT(r,t)}return n.tension=function(r){return e(+r)},n}(0);function OT(e,t){this._context=e,this._k=(1-t)/6}OT.prototype={areaStart:fc,areaEnd:fc,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:nv(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Git=function e(t){function n(r){return new OT(r,t)}return n.tension=function(r){return e(+r)},n}(0);function RT(e,t){this._context=e,this._k=(1-t)/6}RT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:nv(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Hit=function e(t){function n(r){return new RT(r,t)}return n.tension=function(r){return e(+r)},n}(0);function FT(e,t,n){var r=e._x1,i=e._y1,s=e._x2,o=e._y2;if(e._l01_a>wk){var a=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,c=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*a-e._x0*e._l12_2a+e._x2*e._l01_2a)/c,i=(i*a-e._y0*e._l12_2a+e._y2*e._l01_2a)/c}if(e._l23_a>wk){var l=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,u=3*e._l23_a*(e._l23_a+e._l12_a);s=(s*l+e._x1*e._l23_2a-t*e._l12_2a)/u,o=(o*l+e._y1*e._l23_2a-n*e._l12_2a)/u}e._context.bezierCurveTo(r,i,s,o,e._x2,e._y2)}function qC(e,t){this._context=e,this._alpha=t}qC.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:FT(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Xit=function e(t){function n(r){return t?new qC(r,t):new DT(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function WC(e,t){this._context=e,this._alpha=t}WC.prototype={areaStart:fc,areaEnd:fc,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:FT(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Qit=function e(t){function n(r){return t?new WC(r,t):new OT(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function GC(e,t){this._context=e,this._alpha=t}GC.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:FT(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Kit=function e(t){function n(r){return t?new GC(r,t):new RT(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function HC(e){this._context=e}HC.prototype={areaStart:fc,areaEnd:fc,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function Zit(e){return new HC(e)}function _k(e){return e<0?-1:1}function Sk(e,t,n){var r=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(r||i<0&&-0),o=(n-e._y1)/(i||r<0&&-0),a=(s*i+o*r)/(r+i);return(_k(s)+_k(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function xk(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function n2(e,t,n){var r=e._x0,i=e._y0,s=e._x1,o=e._y1,a=(s-r)/3;e._context.bezierCurveTo(r+a,i+a*t,s-a,o-a*n,s,o)}function rv(e){this._context=e}rv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:n2(this,this._t0,xk(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,n2(this,xk(this,n=Sk(this,e,t)),n);break;default:n2(this,this._t0,n=Sk(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function XC(e){this._context=new QC(e)}(XC.prototype=Object.create(rv.prototype)).point=function(e,t){rv.prototype.point.call(this,t,e)};function QC(e){this._context=e}QC.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,s){this._context.bezierCurveTo(t,e,r,n,s,i)}};function Jit(e){return new rv(e)}function tst(e){return new XC(e)}function KC(e){this._context=e}KC.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=Ik(e),i=Ik(t),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function Ik(e){var t,n=e.length-1,r,i=new Array(n),s=new Array(n),o=new Array(n);for(i[0]=0,s[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,s[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,s[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/s[t-1],s[t]-=r,o[t]-=r*o[t-1];for(i[n-1]=o[n-1]/s[n-1],t=n-2;t>=0;--t)i[t]=(o[t]-i[t+1])/s[t];for(s[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function est(e){return new KC(e)}function iw(e,t){this._context=e,this._t=t}iw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function nst(e){return new iw(e,.5)}function rst(e){return new iw(e,0)}function ist(e){return new iw(e,1)}const o0=e=>()=>e;function sst(e,{sourceEvent:t,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function Ls(e,t,n){this.k=e,this.x=t,this.y=n}Ls.prototype={constructor:Ls,scale:function(e){return e===1?this:new Ls(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Ls(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var ZC=new Ls(1,0,0);Ls.prototype;function r2(e){e.stopImmediatePropagation()}function lh(e){e.preventDefault(),e.stopImmediatePropagation()}function ost(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function ast(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Ek(){return this.__zoom||ZC}function cst(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function lst(){return navigator.maxTouchPoints||"ontouchstart"in this}function ust(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],s=e.invertY(t[0][1])-n[0][1],o=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),o>s?(s+o)/2:Math.min(0,s)||Math.max(0,o))}function fst(){var e=ost,t=ast,n=ust,r=cst,i=lst,s=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],a=250,c=YZ,l=Fb("start","zoom","end"),u,f,d,h=500,p=150,g=0,b=10;function y(E){E.property("__zoom",Ek).on("wheel.zoom",T,{passive:!1}).on("mousedown.zoom",$).on("dblclick.zoom",I).filter(i).on("touchstart.zoom",A).on("touchmove.zoom",D).on("touchend.zoom touchcancel.zoom",F).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}y.transform=function(E,N,M,R){var O=E.selection?E.selection():E;O.property("__zoom",Ek),E!==O?_(E,N,M,R):O.interrupt().each(function(){S(this,arguments).event(R).start().zoom(null,typeof N=="function"?N.apply(this,arguments):N).end()})},y.scaleBy=function(E,N,M,R){y.scaleTo(E,function(){var O=this.__zoom.k,C=typeof N=="function"?N.apply(this,arguments):N;return O*C},M,R)},y.scaleTo=function(E,N,M,R){y.transform(E,function(){var O=t.apply(this,arguments),C=this.__zoom,L=M==null?w(O):typeof M=="function"?M.apply(this,arguments):M,P=C.invert(L),z=typeof N=="function"?N.apply(this,arguments):N;return n(v(m(C,z),L,P),O,o)},M,R)},y.translateBy=function(E,N,M,R){y.transform(E,function(){return n(this.__zoom.translate(typeof N=="function"?N.apply(this,arguments):N,typeof M=="function"?M.apply(this,arguments):M),t.apply(this,arguments),o)},null,R)},y.translateTo=function(E,N,M,R,O){y.transform(E,function(){var C=t.apply(this,arguments),L=this.__zoom,P=R==null?w(C):typeof R=="function"?R.apply(this,arguments):R;return n(ZC.translate(P[0],P[1]).scale(L.k).translate(typeof N=="function"?-N.apply(this,arguments):-N,typeof M=="function"?-M.apply(this,arguments):-M),C,o)},R,O)};function m(E,N){return N=Math.max(s[0],Math.min(s[1],N)),N===E.k?E:new Ls(N,E.x,E.y)}function v(E,N,M){var R=N[0]-M[0]*E.k,O=N[1]-M[1]*E.k;return R===E.x&&O===E.y?E:new Ls(E.k,R,O)}function w(E){return[(+E[0][0]+ +E[1][0])/2,(+E[0][1]+ +E[1][1])/2]}function _(E,N,M,R){E.on("start.zoom",function(){S(this,arguments).event(R).start()}).on("interrupt.zoom end.zoom",function(){S(this,arguments).event(R).end()}).tween("zoom",function(){var O=this,C=arguments,L=S(O,C).event(R),P=t.apply(O,C),z=M==null?w(P):typeof M=="function"?M.apply(O,C):M,G=Math.max(P[1][0]-P[0][0],P[1][1]-P[0][1]),Q=O.__zoom,rt=typeof N=="function"?N.apply(O,C):N,Z=c(Q.invert(z).concat(G/Q.k),rt.invert(z).concat(G/rt.k));return function(q){if(q===1)q=rt;else{var K=Z(q),Y=G/K[2];q=new Ls(Y,z[0]-K[0]*Y,z[1]-K[1]*Y)}L.zoom(null,q)}})}function S(E,N,M){return!M&&E.__zooming||new x(E,N)}function x(E,N){this.that=E,this.args=N,this.active=0,this.sourceEvent=null,this.extent=t.apply(E,N),this.taps=0}x.prototype={event:function(E){return E&&(this.sourceEvent=E),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(E,N){return this.mouse&&E!=="mouse"&&(this.mouse[1]=N.invert(this.mouse[0])),this.touch0&&E!=="touch"&&(this.touch0[1]=N.invert(this.touch0[0])),this.touch1&&E!=="touch"&&(this.touch1[1]=N.invert(this.touch1[0])),this.that.__zoom=N,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(E){var N=xe(this.that).datum();l.call(E,this.that,new sst(E,{sourceEvent:this.sourceEvent,target:y,type:E,transform:this.that.__zoom,dispatch:l}),N)}};function T(E,...N){if(!e.apply(this,arguments))return;var M=S(this,N).event(E),R=this.__zoom,O=Math.max(s[0],Math.min(s[1],R.k*Math.pow(2,r.apply(this,arguments)))),C=qi(E);if(M.wheel)(M.mouse[0][0]!==C[0]||M.mouse[0][1]!==C[1])&&(M.mouse[1]=R.invert(M.mouse[0]=C)),clearTimeout(M.wheel);else{if(R.k===O)return;M.mouse=[C,R.invert(C)],$f(this),M.start()}lh(E),M.wheel=setTimeout(L,p),M.zoom("mouse",n(v(m(R,O),M.mouse[0],M.mouse[1]),M.extent,o));function L(){M.wheel=null,M.end()}}function $(E,...N){if(d||!e.apply(this,arguments))return;var M=E.currentTarget,R=S(this,N,!0).event(E),O=xe(E.view).on("mousemove.zoom",z,!0).on("mouseup.zoom",G,!0),C=qi(E,M),L=E.clientX,P=E.clientY;SF(E.view),r2(E),R.mouse=[C,this.__zoom.invert(C)],$f(this),R.start();function z(Q){if(lh(Q),!R.moved){var rt=Q.clientX-L,Z=Q.clientY-P;R.moved=rt*rt+Z*Z>g}R.event(Q).zoom("mouse",n(v(R.that.__zoom,R.mouse[0]=qi(Q,M),R.mouse[1]),R.extent,o))}function G(Q){O.on("mousemove.zoom mouseup.zoom",null),xF(Q.view,R.moved),lh(Q),R.event(Q).end()}}function I(E,...N){if(e.apply(this,arguments)){var M=this.__zoom,R=qi(E.changedTouches?E.changedTouches[0]:E,this),O=M.invert(R),C=M.k*(E.shiftKey?.5:2),L=n(v(m(M,C),R,O),t.apply(this,N),o);lh(E),a>0?xe(this).transition().duration(a).call(_,L,R,E):xe(this).call(y.transform,L,R,E)}}function A(E,...N){if(e.apply(this,arguments)){var M=E.touches,R=M.length,O=S(this,N,E.changedTouches.length===R).event(E),C,L,P,z;for(r2(E),L=0;L<R;++L)P=M[L],z=qi(P,this),z=[z,this.__zoom.invert(z),P.identifier],O.touch0?!O.touch1&&O.touch0[2]!==z[2]&&(O.touch1=z,O.taps=0):(O.touch0=z,C=!0,O.taps=1+!!u);u&&(u=clearTimeout(u)),C&&(O.taps<2&&(f=z[0],u=setTimeout(function(){u=null},h)),$f(this),O.start())}}function D(E,...N){if(this.__zooming){var M=S(this,N).event(E),R=E.changedTouches,O=R.length,C,L,P,z;for(lh(E),C=0;C<O;++C)L=R[C],P=qi(L,this),M.touch0&&M.touch0[2]===L.identifier?M.touch0[0]=P:M.touch1&&M.touch1[2]===L.identifier&&(M.touch1[0]=P);if(L=M.that.__zoom,M.touch1){var G=M.touch0[0],Q=M.touch0[1],rt=M.touch1[0],Z=M.touch1[1],q=(q=rt[0]-G[0])*q+(q=rt[1]-G[1])*q,K=(K=Z[0]-Q[0])*K+(K=Z[1]-Q[1])*K;L=m(L,Math.sqrt(q/K)),P=[(G[0]+rt[0])/2,(G[1]+rt[1])/2],z=[(Q[0]+Z[0])/2,(Q[1]+Z[1])/2]}else if(M.touch0)P=M.touch0[0],z=M.touch0[1];else return;M.zoom("touch",n(v(L,P,z),M.extent,o))}}function F(E,...N){if(this.__zooming){var M=S(this,N).event(E),R=E.changedTouches,O=R.length,C,L;for(r2(E),d&&clearTimeout(d),d=setTimeout(function(){d=null},h),C=0;C<O;++C)L=R[C],M.touch0&&M.touch0[2]===L.identifier?delete M.touch0:M.touch1&&M.touch1[2]===L.identifier&&delete M.touch1;if(M.touch1&&!M.touch0&&(M.touch0=M.touch1,delete M.touch1),M.touch0)M.touch0[1]=this.__zoom.invert(M.touch0[0]);else if(M.end(),M.taps===2&&(L=qi(L,this),Math.hypot(f[0]-L[0],f[1]-L[1])<b)){var P=xe(this).on("dblclick.zoom");P&&P.apply(this,arguments)}}}return y.wheelDelta=function(E){return arguments.length?(r=typeof E=="function"?E:o0(+E),y):r},y.filter=function(E){return arguments.length?(e=typeof E=="function"?E:o0(!!E),y):e},y.touchable=function(E){return arguments.length?(i=typeof E=="function"?E:o0(!!E),y):i},y.extent=function(E){return arguments.length?(t=typeof E=="function"?E:o0([[+E[0][0],+E[0][1]],[+E[1][0],+E[1][1]]]),y):t},y.scaleExtent=function(E){return arguments.length?(s[0]=+E[0],s[1]=+E[1],y):[s[0],s[1]]},y.translateExtent=function(E){return arguments.length?(o[0][0]=+E[0][0],o[1][0]=+E[1][0],o[0][1]=+E[0][1],o[1][1]=+E[1][1],y):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},y.constrain=function(E){return arguments.length?(n=E,y):n},y.duration=function(E){return arguments.length?(a=+E,y):a},y.interpolate=function(E){return arguments.length?(c=E,y):c},y.on=function(){var E=l.on.apply(l,arguments);return E===l?y:E},y.clickDistance=function(E){return arguments.length?(g=(E=+E)*E,y):Math.sqrt(g)},y.tapDistance=function(E){return arguments.length?(b=+E,y):b},y}function yr(e){return e!=null&&!Number.isNaN(e)}function Fi(e,t){return+yr(t)-+yr(e)||He(e,t)}function iv(e,t){return+yr(t)-+yr(e)||Cl(e,t)}function LT(e){return e!=null&&`${e}`!=""}function sv(e){return isFinite(e)?e:NaN}function zo(e){return e>0&&isFinite(e)?e:NaN}function sw(e){return e<0&&isFinite(e)?e:NaN}const lf=1e3,pl=lf*60,yl=pl*60,ta=yl*24,xs=ta*7,El=ta*30,Sa=ta*365,i2=[["millisecond",1],["2 milliseconds",2],["5 milliseconds",5],["10 milliseconds",10],["20 milliseconds",20],["50 milliseconds",50],["100 milliseconds",100],["200 milliseconds",200],["500 milliseconds",500],["second",lf],["5 seconds",5*lf],["15 seconds",15*lf],["30 seconds",30*lf],["minute",pl],["5 minutes",5*pl],["15 minutes",15*pl],["30 minutes",30*pl],["hour",yl],["3 hours",3*yl],["6 hours",6*yl],["12 hours",12*yl],["day",ta],["2 days",2*ta],["week",xs],["2 weeks",2*xs],["month",El],["3 months",3*El],["6 months",6*El],["year",Sa],["2 years",2*Sa],["5 years",5*Sa],["10 years",10*Sa],["20 years",20*Sa],["50 years",50*Sa],["100 years",100*Sa]],BT=new Map([["second",lf],["minute",pl],["hour",yl],["day",ta],["monday",xs],["tuesday",xs],["wednesday",xs],["thursday",xs],["friday",xs],["saturday",xs],["sunday",xs],["week",xs],["month",El],["year",Sa]]),JC=new Map([["second",Fs],["minute",Xb],["hour",Qb],["day",tu],["monday",Xp],["tuesday",XL],["wednesday",QL],["thursday",ql],["friday",KL],["saturday",ZL],["sunday",od],["week",od],["month",qy],["year",as]]),t5=new Map([["second",Fs],["minute",Vy],["hour",Yy],["day",Zb],["monday",Qp],["tuesday",JL],["wednesday",tB],["thursday",Wl],["friday",eB],["saturday",nB],["sunday",ad],["week",ad],["month",Wy],["year",cs]]),Xy=Symbol("intervalDuration"),ow=Symbol("intervalType");for(const[e,t]of JC)t[Xy]=BT.get(e),t[ow]="time";for(const[e,t]of t5)t[Xy]=BT.get(e),t[ow]="utc";const dst=[["year",cs,"utc"],["year",as,"time"],["month",Wy,"utc"],["month",qy,"time"],["day",Zb,"utc",6*El],["day",tu,"time",6*El],["hour",Yy,"utc",3*ta],["minute",Vy,"utc",6*yl],["second",Fs,"utc",30*pl]];function e5(e,t,n){let r=`${e}`.toLowerCase();r.endsWith("s")&&(r=r.slice(0,-1));let i=1;const s=/^(?:(\d+)\s+)/.exec(r);switch(s&&(r=r.slice(s[0].length),i=+s[1]),r){case"quarter":r="month",i*=3;break;case"half":r="month",i*=6;break}let o=t.get(r);if(!o)throw new Error(`unknown interval: ${e}`);if(i>1){if(!o.every)throw new Error(`non-periodic interval: ${r}`);o=o.every(i),o[Xy]=BT.get(r)*i,o[ow]=n}return o}function n5(e){return e5(e,JC,"time")}function CT(e){return e5(e,t5,"utc")}function Tk(e,t){if(!(t>1))return;const n=e[Xy];if(!i2.some(([,i])=>i===n)||n%ta===0&&ta<n&&n<El)return;const[r]=i2[kb(([,i])=>Math.log(i)).center(i2,Math.log(n*t))];return(e[ow]==="time"?n5:CT)(r)}function Ak(e,t,n){const r=t==="time"?MT:Gy;if(n==null)return r(e==="year"?"%Y":e==="month"?"%Y-%m":e==="day"?"%Y-%m-%d":e==="hour"||e==="minute"?"%Y-%m-%dT%H:%M":e==="second"?"%Y-%m-%dT%H:%M:%S":"%Y-%m-%dT%H:%M:%S.%L");const i=hst(n);switch(e){case"millisecond":return bu(r(".%L"),r(":%M:%S"),i);case"second":return bu(r(":%S"),r("%-I:%M"),i);case"minute":return bu(r("%-I:%M"),r("%p"),i);case"hour":return bu(r("%-I %p"),r("%b %-d"),i);case"day":return bu(r("%-d"),r("%b"),i);case"month":return bu(r("%b"),r("%Y"),i);case"year":return r("%Y")}throw new Error("unable to format time ticks")}function hst(e){return e==="left"||e==="right"?(t,n)=>`
${t}
${n}`:e==="top"?(t,n)=>`${n}
${t}`:(t,n)=>`${t}
${n}`}function pst(e,t){const n=Be(vQ(e,(r,i)=>Math.abs(i-r)));if(n<1e3)return Ak("millisecond","utc",t);for(const[r,i,s,o]of dst){if(n>o||r==="hour"&&!n)break;if(e.every(a=>i.floor(a)>=a))return Ak(r,s,t)}}function bu(e,t,n){return(r,i,s)=>{const o=e(r,i),a=t(r,i),c=i-ud(s);return i!==c&&s[c]!==void 0&&a===t(s[c],c)?o:n(o,a)}}const cd=Object.getPrototypeOf(Uint8Array),yst=Object.prototype.toString,r5=Symbol("reindex");function Gt(e,t,n){const r=typeof t;return r==="string"?Mk(e,i5(t),n):r==="function"?Mk(e,t,n):r==="number"||t instanceof Date||r==="boolean"?ke(e,ni(t),n):typeof(t==null?void 0:t.transform)=="function"?Nk(t.transform(e),n):mst(Nk(t,n),e==null?void 0:e[r5])}function mst(e,t){return t?cw(e,t):e}function Mk(e,t,n){return ke(e,(n==null?void 0:n.prototype)instanceof cd?gst(t):t,n)}function Nk(e,t){return t===void 0?Lr(e):e instanceof t?e:t.prototype instanceof cd&&!(e instanceof cd)?t.from(e,zT):t.from(e)}function gst(e){return(t,n)=>zT(e(t,n))}const cp=[null],i5=e=>t=>t[e],zr={transform:oa},It={transform:e=>e},UT=()=>1,vst=()=>!0,Zn=e=>e==null?e:`${e}`,Zt=e=>e==null?e:+e,Qy=e=>e?e[0]:void 0,Zp=e=>e?e[1]:void 0,bst=e=>e?e[2]:void 0,ni=e=>()=>e;function PT(e){const t=+`${e}`.slice(1)/100;return(n,r)=>lc(n,t,r)}function Mr(e){return e instanceof cd?e:ke(e,zT,Float64Array)}function zT(e){return e==null?NaN:Number(e)}function wst(e){return ke(e,s5)}function s5(e){return e instanceof Date&&!isNaN(e)?e:typeof e=="string"?G8(e):e==null||isNaN(e=+e)?void 0:new Date(e)}function Fr(e,t){return e===void 0&&(e=t),e===null?[void 0,"none"]:Zy(e)?[void 0,e]:[e,void 0]}function cn(e,t){return e===void 0&&(e=t),e===null||typeof e=="number"?[void 0,e]:[e,void 0]}function o5(e,t,n){if(e!=null)return oi(e,t,n)}function oi(e,t,n){const r=`${e}`.toLowerCase();if(!n.includes(r))throw new Error(`invalid ${t}: ${e}`);return r}function Lr(e){return e==null||e instanceof Array||e instanceof cd?e:Array.from(e)}function ke(e,t,n=Array){return e==null?e:e instanceof n?e.map(t):n.from(e,t)}function Jp(e,t=Array){return e instanceof t?e.slice():t.from(e)}function a5({x:e,x1:t,x2:n}){return e!==void 0||t!==void 0||n!==void 0}function c5({y:e,y1:t,y2:n}){return e!==void 0||t!==void 0||n!==void 0}function aw(e){return a5(e)||c5(e)||e.interval!==void 0}function Ci(e){return(e==null?void 0:e.toString)===yst}function Tl(e){return Ci(e)&&(e.type!==void 0||e.domain!==void 0)}function Ts(e){return Ci(e)&&typeof e.transform!="function"}function dc(e){return Ts(e)&&e.value===void 0&&e.channel===void 0}function l5(e,t,n,r=It){return t===void 0&&n===void 0?(t=0,n=e===void 0?r:e):t===void 0?t=e===void 0?0:e:n===void 0&&(n=e===void 0?0:e),[t,n]}function ds(e,t){return e===void 0&&t===void 0?[Qy,Zp]:[e,t]}function kc({z:e,fill:t,stroke:n}={}){return e===void 0&&([e]=Fr(t)),e===void 0&&([e]=Fr(n)),e}function oa(e){const t=e.length,n=new Uint32Array(t);for(let r=0;r<t;++r)n[r]=r;return n}function cw(e,t){return ke(t,n=>e[n],e.constructor)}function jT(e){return e.length===1?(t,n)=>e(cw(n,t)):e}function Al(e,t,n){return e.subarray?e.subarray(t,n):e.slice(t,n)}function ml(e){return e!==null&&typeof e=="object"?e.valueOf():e}function u5(e,t){if(t[e]!==void 0)return t[e];switch(e){case"x1":case"x2":e="x";break;case"y1":case"y2":e="y";break}return t[e]}function Xr(e){let t;return[{transform:()=>t,label:aa(e)},n=>t=n]}function Sr(e){return e==null?[e]:Xr(e)}function aa(e,t){return typeof e=="string"?e:e&&e.label!==void 0?e.label:t}function ov(e,t){return{transform(n){const r=e.transform(n),i=t.transform(n);return gr(r)||gr(i)?ke(r,(s,o)=>new Date((+r[o]+ +i[o])/2)):ke(r,(s,o)=>(+r[o]+ +i[o])/2,Float64Array)},label:e.label}}function av(e,t){const n=f5(t==null?void 0:t.interval,t==null?void 0:t.type);return n?ke(e,n):e}function f5(e,t){const n=VT(e,t);return n&&(r=>yr(r)?n.floor(r):r)}function VT(e,t){if(e!=null){if(typeof e=="number"){0<e&&e<1&&Number.isInteger(1/e)&&(e=-1/e);const n=Math.abs(e);return e<0?{floor:r=>Math.floor(r*n)/n,offset:r=>(r*n+1)/n,range:(r,i)=>Gr(Math.ceil(r*n),i*n).map(s=>s/n)}:{floor:r=>Math.floor(r/n)*n,offset:r=>r+n,range:(r,i)=>Gr(Math.ceil(r/n),i/n).map(s=>s*n)}}if(typeof e=="string")return(t==="time"?n5:CT)(e);if(typeof e.floor!="function")throw new Error("invalid interval; missing floor method");if(typeof e.offset!="function")throw new Error("invalid interval; missing offset method");return e}}function Od(e,t){if(e=VT(e,t),e&&typeof e.range!="function")throw new Error("invalid interval: missing range method");return e}function _st(e,t){if(e=Od(e,t),e&&typeof e.ceil!="function")throw new Error("invalid interval: missing ceil method");return e}function Sst(e){return uf(e)&&typeof(e==null?void 0:e.floor)=="function"&&e.floor()instanceof Date}function uf(e){return typeof(e==null?void 0:e.range)=="function"}function Ky(e){return e===void 0||Ts(e)?e:{value:e}}function xst(e){return e==null?null:{transform:t=>Gt(t,e,Float64Array),label:aa(e)}}function Ist(e){if(!ca(e))return!1;for(const t of e)if(t!=null)return typeof t=="object"&&"0"in t&&"1"in t}function ca(e){return e&&typeof e[Symbol.iterator]=="function"}function d5(e){for(const t of e)if(t!=null)return typeof t!="object"||t instanceof Date}function Ke(e){for(const t of e){if(t==null)continue;const n=typeof t;return n==="string"||n==="boolean"}}function gr(e){for(const t of e)if(t!=null)return t instanceof Date}function Est(e){for(const t of e)if(t!=null)return typeof t=="string"&&isNaN(t)&&G8(t)}function Tst(e){for(const t of e)if(t!=null){if(typeof t!="string")return!1;if(t.trim())return!isNaN(t)}}function ff(e){for(const t of e)if(t!=null)return typeof t=="number"}function s2(e,t){let n;for(const r of e)if(r!=null){if(!t(r))return!1;n=!0}return n}const Ast=new Set("none,currentcolor,transparent,aliceblue,antiquewhite,aqua,aquamarine,azure,beige,bisque,black,blanchedalmond,blue,blueviolet,brown,burlywood,cadetblue,chartreuse,chocolate,coral,cornflowerblue,cornsilk,crimson,cyan,darkblue,darkcyan,darkgoldenrod,darkgray,darkgreen,darkgrey,darkkhaki,darkmagenta,darkolivegreen,darkorange,darkorchid,darkred,darksalmon,darkseagreen,darkslateblue,darkslategray,darkslategrey,darkturquoise,darkviolet,deeppink,deepskyblue,dimgray,dimgrey,dodgerblue,firebrick,floralwhite,forestgreen,fuchsia,gainsboro,ghostwhite,gold,goldenrod,gray,green,greenyellow,grey,honeydew,hotpink,indianred,indigo,ivory,khaki,lavender,lavenderblush,lawngreen,lemonchiffon,lightblue,lightcoral,lightcyan,lightgoldenrodyellow,lightgray,lightgreen,lightgrey,lightpink,lightsalmon,lightseagreen,lightskyblue,lightslategray,lightslategrey,lightsteelblue,lightyellow,lime,limegreen,linen,magenta,maroon,mediumaquamarine,mediumblue,mediumorchid,mediumpurple,mediumseagreen,mediumslateblue,mediumspringgreen,mediumturquoise,mediumvioletred,midnightblue,mintcream,mistyrose,moccasin,navajowhite,navy,oldlace,olive,olivedrab,orange,orangered,orchid,palegoldenrod,palegreen,paleturquoise,palevioletred,papayawhip,peachpuff,peru,pink,plum,powderblue,purple,rebeccapurple,red,rosybrown,royalblue,saddlebrown,salmon,sandybrown,seagreen,seashell,sienna,silver,skyblue,slateblue,slategray,slategrey,snow,springgreen,steelblue,tan,teal,thistle,tomato,turquoise,violet,wheat,white,whitesmoke,yellow".split(","));function Zy(e){return typeof e!="string"?!1:(e=e.toLowerCase().trim(),/^#[0-9a-f]{3,8}$/.test(e)||/^(?:url|var|rgb|rgba|hsl|hsla|hwb|lab|lch|oklab|oklch|color|color-mix)\(.*\)$/.test(e)||Ast.has(e))}function Mst(e){return typeof e=="number"&&(0<=e&&e<=1||isNaN(e))}function en(e){return e==null||ld(e)}function ld(e){return/^\s*none\s*$/i.test(e)}function Nst(e){return/^\s*round\s*$/i.test(e)}function h5(e,t){return o5(e,t,["middle","top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"])}function Jy(e="middle"){return h5(e,"frameAnchor")}function ud(e){if(e==null)return;const t=e[0],n=e[e.length-1];return Cl(t,n)}function $st(e={},...t){let n=e;for(const r of t)for(const i in r)if(n[i]===void 0){const s=r[i];n===e?n={...n,[i]:s}:n[i]=s}return n}function kst(e){console.warn("named iterables are deprecated; please use an object instead");const t=new Set;return Object.fromEntries(Array.from(e,n=>{const{name:r}=n;if(r==null)throw new Error("missing name");const i=`${r}`;if(i==="__proto__")throw new Error(`illegal name: ${i}`);if(t.has(i))throw new Error(`duplicate name: ${i}`);return t.add(i),[r,n]}))}function YT(e){return ca(e)?kst(e):e}const Bs=Symbol("position"),la=Symbol("color"),tm=Symbol("radius"),em=Symbol("length"),nm=Symbol("opacity"),lw=Symbol("symbol"),p5=Symbol("projection"),qe=new Map([["x",Bs],["y",Bs],["fx",Bs],["fy",Bs],["r",tm],["color",la],["opacity",nm],["symbol",lw],["length",em],["projection",p5]]);function Dst(e){return e===Bs||e===p5}function Ost(e){return e===Bs||e===tm||e===em||e===nm}const y5=Math.sqrt(3),m5=2/y5,Rst={draw(e,t){const n=Math.sqrt(t/Math.PI),r=n*m5,i=r/2;e.moveTo(0,r),e.lineTo(n,i),e.lineTo(n,-i),e.lineTo(0,-r),e.lineTo(-n,-i),e.lineTo(-n,i),e.closePath()}},qT=new Map([["asterisk",MC],["circle",Kp],["cross",NC],["diamond",kC],["diamond2",DC],["hexagon",Rst],["plus",OC],["square",RC],["square2",FC],["star",BC],["times",zC],["triangle",CC],["triangle2",UC],["wye",PC]]);function WT(e){return e&&typeof e.draw=="function"}function Fst(e){return WT(e)?!0:typeof e!="string"?!1:qT.has(e.toLowerCase())}function GT(e){if(e==null||WT(e))return e;const t=qT.get(`${e}`.toLowerCase());if(t)return t;throw new Error(`invalid symbol: ${e}`)}function Lst(e){if(e==null||WT(e))return[void 0,e];if(typeof e=="string"){const t=qT.get(`${e}`.toLowerCase());if(t)return[void 0,t]}return[e,void 0]}function to({filter:e,sort:t,reverse:n,transform:r,initializer:i,...s}={},o){if(r===void 0&&(e!=null&&(r=HT(e)),t!=null&&!dc(t)&&(r=o2(r,QT(t))),n&&(r=o2(r,XT))),o!=null&&i!=null)throw new Error("transforms cannot be applied after initializers");return{...s,...(t===null||dc(t))&&{sort:t},transform:o2(r,o)}}function Br({filter:e,sort:t,reverse:n,initializer:r,...i}={},s){return r===void 0&&(e!=null&&(r=HT(e)),t!=null&&!dc(t)&&(r=a2(r,QT(t))),n&&(r=a2(r,XT))),{...i,...(t===null||dc(t))&&{sort:t},initializer:a2(r,s)}}function o2(e,t){return e==null?t===null?void 0:t:t==null?e===null?void 0:e:function(n,r,i){return{data:n,facets:r}=e.call(this,n,r,i),t.call(this,Lr(n),r,i)}}function a2(e,t){return e==null?t===null?void 0:t:t==null?e===null?void 0:e:function(n,r,i,...s){let o,a,c,l,u,f;return{data:a=n,facets:c=r,channels:o}=e.call(this,n,r,i,...s),{data:u=a,facets:f=c,channels:l}=t.call(this,a,c,{...i,...o},...s),{data:u,facets:f,channels:{...o,...l}}}}function uw(e,t){return(e.initializer!=null?Br:to)(e,t)}function Bst(e,t){return uw(t,HT(e))}function HT(e){return(t,n)=>{const r=Gt(t,e);return{data:t,facets:n.map(i=>i.filter(s=>r[s]))}}}function Cst({sort:e,...t}={}){return{...uw(t,XT),sort:dc(e)?e:null}}function XT(e,t){return{data:e,facets:t.map(n=>n.slice().reverse())}}function Ust({seed:e,sort:t,...n}={}){return{...uw(n,v5(e==null?Math.random:ET(e))),sort:dc(t)?t:null}}function g5(e,{sort:t,...n}={}){return{...(Ts(e)&&e.channel!==void 0?Br:uw)(n,QT(e)),sort:dc(t)?t:null}}function QT(e){return(typeof e=="function"&&e.length!==1?Pst:v5)(e)}function Pst(e){return(t,n)=>{const r=(i,s)=>e(t[i],t[s]);return{data:t,facets:n.map(i=>i.slice().sort(r))}}}function v5(e){let t,n;({channel:t,value:e,order:n}={...Ky(e)});const r=t==null?void 0:t.startsWith("-");if(r&&(t=t.slice(1)),n===void 0&&(n=r?iv:Fi),typeof n!="function")switch(`${n}`.toLowerCase()){case"ascending":n=Fi;break;case"descending":n=iv;break;default:throw new Error(`invalid order: ${n}`)}return(i,s,o)=>{let a;if(t===void 0)a=Gt(i,e);else{if(o===void 0)throw new Error("channel sort requires an initializer");if(a=o[t],!a)return{};a=a.value}const c=(l,u)=>n(a[l],a[u]);return{data:i,facets:s.map(l=>l.slice().sort(c))}}}function KT(e,t){return fw(null,null,e,t)}function ty(e={y:"count"},t={}){const{x:n=It}=t;if(n==null)throw new Error("missing channel: x");return fw(n,null,e,t)}function ey(e={x:"count"},t={}){const{y:n=It}=t;if(n==null)throw new Error("missing channel: y");return fw(null,n,e,t)}function ZT(e={fill:"count"},t={}){let{x:n,y:r}=t;if([n,r]=ds(n,r),n==null)throw new Error("missing channel: x");if(r==null)throw new Error("missing channel: y");return fw(n,r,e,t)}function fw(e,t,{data:n=r3,filter:r,sort:i,reverse:s,...o}={},a={}){o=JT(o,a),n=dw(n,It),i=i==null?void 0:t3("sort",i,a),r=r==null?void 0:e3("filter",r,a);const[c,l]=Sr(e),[u,f]=Sr(t),{z:d,fill:h,stroke:p,x1:g,x2:b,y1:y,y2:m,...v}=a,[w,_]=Sr(d),[S]=Fr(h),[x]=Fr(p),[T,$]=Sr(S),[I,A]=Sr(x);return{..."z"in a&&{z:w||d},..."fill"in a&&{fill:T||h},..."stroke"in a&&{stroke:I||p},...to(v,(D,F,E)=>{const N=av(Gt(D,e),E==null?void 0:E.x),M=av(Gt(D,t),E==null?void 0:E.y),R=Gt(D,d),O=Gt(D,S),C=Gt(D,x),L=n3(o,{z:R,fill:O,stroke:C}),P=[],z=[],G=N&&l([]),Q=M&&f([]),rt=R&&_([]),Z=O&&$([]),q=C&&A([]);let K=0;for(const Y of o)Y.initialize(D);i&&i.initialize(D),r&&r.initialize(D);for(const Y of F){const et=[];for(const st of o)st.scope("facet",Y);i&&i.scope("facet",Y),r&&r.scope("facet",Y);for(const[st,j]of kf(Y,L))for(const[Tt,ut]of kf(j,M))for(const[jt,qt]of kf(ut,N))if(!(r&&!r.reduce(qt))){et.push(K++),z.push(n.reduceIndex(qt,D)),N&&G.push(jt),M&&Q.push(Tt),R&&rt.push(L===R?st:R[qt[0]]),O&&Z.push(L===O?st:O[qt[0]]),C&&q.push(L===C?st:C[qt[0]]);for(const ct of o)ct.reduce(qt);i&&i.reduce(qt)}P.push(et)}return b5(P,i,s),{data:z,facets:P}}),...!Ua(o,"x")&&(c?{x:c}:{x1:g,x2:b}),...!Ua(o,"y")&&(u?{y:u}:{y1:y,y2:m}),...Object.fromEntries(o.map(({name:D,output:F})=>[D,F]))}}function Ua(e,...t){for(const{name:n}of e)if(t.includes(n))return!0;return!1}function JT(e,t,n=t3){const r=Object.entries(e);return t.title!=null&&e.title===void 0&&r.push(["title",qst]),t.href!=null&&e.href===void 0&&r.push(["href",i3]),r.filter(([,i])=>i!==void 0).map(([i,s])=>s===null?zst(i):n(i,s,t))}function t3(e,t,n,r=e3){let i;Ci(t)&&"reduce"in t&&(i=t.scale,t=t.reduce);const s=r(e,t,n),[o,a]=Xr(s.label);let c;return{name:e,output:i===void 0?o:{value:o,scale:i},initialize(l){s.initialize(l),c=a([])},scope(l,u){s.scope(l,u)},reduce(l,u){c.push(s.reduce(l,u))}}}function zst(e){return{name:e,initialize(){},scope(){},reduce(){}}}function e3(e,t,n,r=dw){const i=u5(e,n),s=r(t,i);let o,a;return{label:aa(s===cv?null:i,s.label),initialize(c){o=i===void 0?c:Gt(c,i),s.scope==="data"&&(a=s.reduceIndex(oa(c),o))},scope(c,l){s.scope===c&&(a=s.reduceIndex(l,o))},reduce(c,l){return s.scope==null?s.reduceIndex(c,o,l):s.reduceIndex(c,o,a,l)}}}function kf(e,t){return t?Up(sa(e,n=>t[n]),Qy):[[,e]]}function dw(e,t,n=jst){if(e==null)return n(e);if(typeof e.reduceIndex=="function")return e;if(typeof e.reduce=="function"&&Ci(e))return Vst(e);if(typeof e=="function")return Yst(e);if(/^p\d{2}$/i.test(e))return mo(PT(e));switch(`${e}`.toLowerCase()){case"first":return i3;case"last":return Wst;case"identity":return r3;case"count":return cv;case"distinct":return Gst;case"sum":return t==null?cv:Hst;case"proportion":return kk(t,"data");case"proportion-facet":return kk(t,"facet");case"deviation":return mo(Ry);case"min":return mo(On);case"min-index":return mo(pQ);case"max":return mo(Be);case"max-index":return mo(hQ);case"mean":return $k(Rb);case"median":return $k(jp);case"variance":return mo(eT);case"mode":return mo(lF)}return n(e)}function jst(e){throw new Error(`invalid reduce: ${e}`)}function n3(e,t){for(const n in t){const r=t[n];if(r!==void 0&&!e.some(i=>i.name===n))return r}}function b5(e,t,n){if(t){const r=t.output.transform(),i=(s,o)=>Fi(r[s],r[o]);e.forEach(s=>s.sort(i))}n&&e.forEach(r=>r.reverse())}function Vst(e){return console.warn("deprecated reduce interface; implement reduceIndex instead."),{...e,reduceIndex:e.reduce.bind(e)}}function Yst(e){return{reduceIndex(t,n,r){return e(cw(n,t),r)}}}function mo(e){return{reduceIndex(t,n){return e(t,r=>n[r])}}}function $k(e){return{reduceIndex(t,n){const r=e(t,i=>n[i]);return gr(n)?new Date(r):r}}}const r3={reduceIndex(e,t){return cw(t,e)}},i3={reduceIndex(e,t){return t[e[0]]}},qst={reduceIndex(e,t){const r=Up(Af(e,s=>s.length,s=>t[s]),Zp),i=r.slice(-5).reverse();if(i.length<r.length){const s=r.slice(0,-4);i[4]=[`… ${s.length.toLocaleString("en-US")} more`,Hs(s,Zp)]}return i.map(([s,o])=>`${s} (${o.toLocaleString("en-US")})`).join(`
`)}},Wst={reduceIndex(e,t){return t[e[e.length-1]]}},cv={label:"Frequency",reduceIndex(e){return e.length}},Gst={label:"Distinct",reduceIndex(e,t){const n=new Fy;for(const r of e)n.add(t[r]);return n.size}},Hst=mo(Hs);function kk(e,t){return e==null?{scope:t,label:"Frequency",reduceIndex:(n,r,i=1)=>n.length/i}:{scope:t,reduceIndex:(n,r,i=1)=>Hs(n,s=>r[s])/i}}function ny(e,{scale:t,type:n,value:r,filter:i,hint:s,label:o=aa(r)},a){return s===void 0&&typeof(r==null?void 0:r.transform)=="function"&&(s=r.hint),_5(a,{scale:t,type:n,value:Gt(e,r),label:o,filter:i,hint:s})}function w5(e,t){return Object.fromEntries(Object.entries(e).map(([n,r])=>[n,ny(t,r,n)]))}function s3(e,t){const n=Object.fromEntries(Object.entries(e).map(([r,{scale:i,value:s}])=>{const o=i==null?null:t[i];return[r,o==null?s:ke(s,o)]}));return n.channels=e,n}function _5(e,t){const{scale:n,value:r}=t;if(n===!0||n==="auto")switch(e){case"fill":case"stroke":case"color":t.scale=n!==!0&&s2(r,Zy)?null:"color";break;case"fillOpacity":case"strokeOpacity":case"opacity":t.scale=n!==!0&&s2(r,Mst)?null:"opacity";break;case"symbol":n!==!0&&s2(r,Fst)?(t.scale=null,t.value=ke(r,GT)):t.scale="symbol";break;default:t.scale=qe.has(e)?e:null;break}else if(n===!1)t.scale=null;else if(n!=null&&!qe.has(n))throw new Error(`unknown scale: ${n}`);return t}function Xst(e,t,n,r,i){const{order:s,reverse:o,reduce:a=!0,limit:c}=i;for(const l in i){if(!qe.has(l))continue;let{value:u,order:f=s,reverse:d=o,reduce:h=a,limit:p=c}=Ky(i[l]);const g=u==null?void 0:u.startsWith("-");if(g&&(u=u.slice(1)),f=f===void 0?g!==(u==="width"||u==="height")?x5:S5:Zst(f),h==null||h===!1)continue;const b=l==="fx"||l==="fy"?Kst(t,r[l]):Qst(n,l);if(!b)throw new Error(`missing channel for scale: ${l}`);const y=b.value,[m=0,v=1/0]=ca(p)?p:p<0?[p]:[0,p];if(u==null)b.domain=()=>{let w=Array.from(new Fy(y));return d&&(w=w.reverse()),(m!==0||v!==1/0)&&(w=w.slice(m,v)),w};else{const w=u==="data"?e:u==="height"?Dk(n,"y1","y2"):u==="width"?Dk(n,"x1","x2"):Vx(n,u,u==="y"?"y2":u==="x"?"x2":void 0),_=dw(h===!0?"max":h,w);b.domain=()=>{let S=cQ(oa(y),x=>_.reduceIndex(x,w),x=>y[x]);return f&&S.sort(f),d&&S.reverse(),(m!==0||v!==1/0)&&(S=S.slice(m,v)),S.map(Qy)}}}}function Qst(e,t){for(const n in e){const r=e[n];if(r.scale===t)return r}}function Kst(e,t){const n=e.original;if(n===e)return t;const r=t.value,i=t.value=[];for(let s=0;s<n.length;++s){const o=r[n[s][0]];for(const a of e[s])i[a]=o}return t}function Dk(e,t,n){const r=Vx(e,t),i=Vx(e,n);return ke(i,(s,o)=>Math.abs(s-r[o]),Float64Array)}function Vx(e,t,n){let r=e[t];if(!r&&n!==void 0&&(r=e[n]),r)return r.value;throw new Error(`missing channel: ${t}`)}function Zst(e){if(e==null||typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"ascending":return S5;case"descending":return x5}throw new Error(`invalid order: ${e}`)}function S5([e,t],[n,r]){return Fi(t,r)||Fi(e,n)}function x5([e,t],[n,r]){return iv(t,r)||Fi(e,n)}function Yx(e,t){let n=e[t];if(n){for(;n.source;)n=n.source;return n.source===null?null:n}}function o3(e){let t,n;return(...r)=>(((n==null?void 0:n.length)!==r.length||n.some((i,s)=>i!==r[s]))&&(n=r,t=e(...r)),t)}const Jst=o3(e=>new Intl.NumberFormat(e)),tot=o3((e,t)=>new Intl.DateTimeFormat(e,{timeZone:"UTC",...t&&{month:t}})),eot=o3((e,t)=>new Intl.DateTimeFormat(e,{timeZone:"UTC",...t&&{weekday:t}}));function not(e="en-US"){const t=Jst(e);return n=>n!=null&&!isNaN(n)?t.format(n):void 0}function rot(e="en-US",t="short"){const n=tot(e,t);return r=>r!=null&&!isNaN(r=+new Date(Date.UTC(2e3,+r)))?n.format(r):void 0}function iot(e="en-US",t="short"){const n=eot(e,t);return r=>r!=null&&!isNaN(r=+new Date(Date.UTC(2001,0,+r)))?n.format(r):void 0}function I5(e){return W8(e,"Invalid Date")}function sot(e="en-US"){const t=not(e);return n=>(n instanceof Date?I5:typeof n=="number"?t:Zn)(n)}const Gl=sot();let qx=0,Wx;function oot(){const e=qx;return qx=0,Wx=void 0,e}function jo(e){e!==Wx&&(Wx=e,console.warn(e),++qx)}const Cn=(typeof window<"u"?window.devicePixelRatio>1:typeof it>"u")?0:.5;let aot=0;function Ok(){return`plot-clip-${++aot}`}function E5(e,{title:t,href:n,ariaLabel:r,ariaDescription:i,ariaHidden:s,target:o,fill:a,fillOpacity:c,stroke:l,strokeWidth:u,strokeOpacity:f,strokeLinejoin:d,strokeLinecap:h,strokeMiterlimit:p,strokeDasharray:g,strokeDashoffset:b,opacity:y,mixBlendMode:m,imageFilter:v,paintOrder:w,pointerEvents:_,shapeRendering:S,channels:x},{ariaLabel:T,fill:$="currentColor",fillOpacity:I,stroke:A="none",strokeOpacity:D,strokeWidth:F,strokeLinecap:E,strokeLinejoin:N,strokeMiterlimit:M,paintOrder:R}){$===null&&(a=null,c=null),A===null&&(l=null,f=null),en($)?!en(A)&&(!en(a)||x!=null&&x.fill)&&(A="none"):en(A)&&(!en(l)||x!=null&&x.stroke)&&($="none");const[O,C]=Fr(a,$),[L,P]=cn(c,I),[z,G]=Fr(l,A),[Q,rt]=cn(f,D),[Z,q]=cn(y);ld(G)||(u===void 0&&(u=F),h===void 0&&(h=E),d===void 0&&(d=N),p===void 0&&!Nst(d)&&(p=M),!ld(C)&&w===void 0&&(w=R));const[K,Y]=cn(u);return $!==null&&(e.fill=Ze(C,"currentColor"),e.fillOpacity=uh(P,1)),A!==null&&(e.stroke=Ze(G,"none"),e.strokeWidth=uh(Y,1),e.strokeOpacity=uh(rt,1),e.strokeLinejoin=Ze(d,"miter"),e.strokeLinecap=Ze(h,"butt"),e.strokeMiterlimit=uh(p,4),e.strokeDasharray=Ze(g,"none"),e.strokeDashoffset=Ze(b,"0")),e.target=Zn(o),e.ariaLabel=Zn(T),e.ariaDescription=Zn(i),e.ariaHidden=Zn(s),e.opacity=uh(q,1),e.mixBlendMode=Ze(m,"normal"),e.imageFilter=Ze(v,"none"),e.paintOrder=Ze(w,"normal"),e.pointerEvents=Ze(_,"auto"),e.shapeRendering=Ze(S,"auto"),{title:{value:t,optional:!0,filter:null},href:{value:n,optional:!0,filter:null},ariaLabel:{value:r,optional:!0,filter:null},fill:{value:O,scale:"auto",optional:!0},fillOpacity:{value:L,scale:"auto",optional:!0},stroke:{value:z,scale:"auto",optional:!0},strokeOpacity:{value:Q,scale:"auto",optional:!0},strokeWidth:{value:K,optional:!0},opacity:{value:Z,scale:"auto",optional:!0}}}function cot(e,t){t&&e.filter(n=>LT(t[n])).append("title").call(uot,t)}function lot(e,t){t&&e.filter(([n])=>LT(t[n])).append("title").call(fot,t)}function uot(e,t){t&&e.text(n=>Gl(t[n]))}function fot(e,t){t&&e.text(([n])=>Gl(t[n]))}function Sn(e,{target:t,tip:n},{ariaLabel:r,title:i,fill:s,fillOpacity:o,stroke:a,strokeOpacity:c,strokeWidth:l,opacity:u,href:f}){r&&gt(e,"aria-label",d=>r[d]),s&&gt(e,"fill",d=>s[d]),o&&gt(e,"fill-opacity",d=>o[d]),a&&gt(e,"stroke",d=>a[d]),c&&gt(e,"stroke-opacity",d=>c[d]),l&&gt(e,"stroke-width",d=>l[d]),u&&gt(e,"opacity",d=>u[d]),f&&M5(e,d=>f[d],t),n||cot(e,i)}function lv(e,{target:t,tip:n},{ariaLabel:r,title:i,fill:s,fillOpacity:o,stroke:a,strokeOpacity:c,strokeWidth:l,opacity:u,href:f}){r&&gt(e,"aria-label",([d])=>r[d]),s&&gt(e,"fill",([d])=>s[d]),o&&gt(e,"fill-opacity",([d])=>o[d]),a&&gt(e,"stroke",([d])=>a[d]),c&&gt(e,"stroke-opacity",([d])=>c[d]),l&&gt(e,"stroke-width",([d])=>l[d]),u&&gt(e,"opacity",([d])=>u[d]),f&&M5(e,([d])=>f[d],t),n||lot(e,i)}function dot({ariaLabel:e,title:t,fill:n,fillOpacity:r,stroke:i,strokeOpacity:s,strokeWidth:o,opacity:a,href:c},{tip:l}){return[e,l?void 0:t,n,r,i,s,o,a,c].filter(u=>u!==void 0)}function a3(e,t,n){const r=sa(e,i=>t[i]);return n===void 0&&r.size>1+e.length>>1&&jo("Warning: the implicit z channel has high cardinality. This may occur when the fill or stroke channel is associated with quantitative data rather than ordinal or categorical data. You can suppress this warning by setting the z option explicitly; if this data represents a single series, set z to null."),r.values()}function*T5(e,t,n,r){const{z:i}=n,{z:s}=r,o=dot(r,n),a=[...t,...o];for(const c of s?a3(e,s,i):[e]){let l,u;t:for(const f of c){for(const d of a)if(!yr(d[f])){u&&u.push(-1);continue t}if(l===void 0){u&&(yield u),l=o.map(d=>ml(d[f])),u=[f];continue}u.push(f);for(let d=0;d<o.length;++d)if(ml(o[d][f])!==l[d]){yield u,l=o.map(p=>ml(p[f])),u=[f];continue t}}u&&(yield u)}}function A5(e){return e===!0?e="frame":e===!1?e=null:e!=null&&(e=oi(e,"clip",["frame","sphere"])),e}function hot(e,t,n,r){let i;const{clip:s=r.clip}=t;switch(s){case"frame":{const{width:o,height:a,marginLeft:c,marginRight:l,marginTop:u,marginBottom:f}=n,d=Ok();i=`url(#${d})`,e=le("svg:g",r).call(h=>h.append("svg:clipPath").attr("id",d).append("rect").attr("x",c).attr("y",u).attr("width",o-l-c).attr("height",a-u-f)).each(function(){this.appendChild(e.node()),e.node=()=>this});break}case"sphere":{const{projection:o}=r;if(!o)throw new Error('the "sphere" clip option requires a projection');const a=Ok();i=`url(#${a})`,e.append("clipPath").attr("id",a).append("path").attr("d",Nc(o)({type:"Sphere"}));break}}gt(e,"aria-label",t.ariaLabel),gt(e,"aria-description",t.ariaDescription),gt(e,"aria-hidden",t.ariaHidden),gt(e,"clip-path",i)}function Ce(e,t,n,r){hot(e,t,n,r),gt(e,"fill",t.fill),gt(e,"fill-opacity",t.fillOpacity),gt(e,"stroke",t.stroke),gt(e,"stroke-width",t.strokeWidth),gt(e,"stroke-opacity",t.strokeOpacity),gt(e,"stroke-linejoin",t.strokeLinejoin),gt(e,"stroke-linecap",t.strokeLinecap),gt(e,"stroke-miterlimit",t.strokeMiterlimit),gt(e,"stroke-dasharray",t.strokeDasharray),gt(e,"stroke-dashoffset",t.strokeDashoffset),gt(e,"shape-rendering",t.shapeRendering),gt(e,"filter",t.imageFilter),gt(e,"paint-order",t.paintOrder);const{pointerEvents:i=r.pointerSticky===!1?"none":void 0}=t;gt(e,"pointer-events",i)}function Fe(e,t){pot(e,"mix-blend-mode",t.mixBlendMode),gt(e,"opacity",t.opacity)}function M5(e,t,n){e.each(function(r){const i=t(r);if(i!=null){const s=this.ownerDocument.createElementNS(Pl.svg,"a");s.setAttribute("fill","inherit"),s.setAttributeNS(Pl.xlink,"href",i),n!=null&&s.setAttribute("target",n),this.parentNode.insertBefore(s,this).appendChild(this)}})}function gt(e,t,n){n!=null&&e.attr(t,n)}function pot(e,t,n){n!=null&&e.style(t,n)}function Ae(e,t,{x:n,y:r},i=Cn,s=Cn){i+=t.dx,s+=t.dy,n!=null&&n.bandwidth&&(i+=n.bandwidth()/2),r!=null&&r.bandwidth&&(s+=r.bandwidth()/2),(i||s)&&e.attr("transform",`translate(${i},${s})`)}function Ze(e,t){if((e=Zn(e))!==t)return e}function uh(e,t){if((e=Zt(e))!==t)return e}const yot=/^-?([_a-z]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])([_a-z0-9-]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])*$/i;function c3(e){if(e===void 0)return"plot-d6a7b5";if(e=`${e}`,!yot.test(e))throw new Error(`invalid class name: ${e}`);return e}function l3(e,t){if(typeof t=="string")e.property("style",t);else if(t!=null)for(const n of e)Object.assign(n.style,t)}function eo({frameAnchor:e},{width:t,height:n,marginTop:r,marginRight:i,marginBottom:s,marginLeft:o}){return[/left$/.test(e)?o:/right$/.test(e)?t-i:(o+t-i)/2,/^top/.test(e)?r:/^bottom/.test(e)?n-s:(r+n-s)/2]}function hw(e={}){const{document:t=typeof window<"u"?window.document:void 0,clip:n}=e;return{document:t,clip:A5(n)}}function le(e,{document:t}){return xe(Bb(e).call(t.documentElement))}const N5=Math.PI,co=2*N5,Rk=.618;function mot({projection:e,inset:t=0,insetTop:n=t,insetRight:r=t,insetBottom:i=t,insetLeft:s=t}={},o){if(e==null)return;if(typeof e.stream=="function")return e;let a,c,l="frame";if(Ci(e)){let _;if({type:e,domain:c,inset:_,insetTop:n=_!==void 0?_:n,insetRight:r=_!==void 0?_:r,insetBottom:i=_!==void 0?_:i,insetLeft:s=_!==void 0?_:s,clip:l=l,...a}=e,e==null)return}typeof e!="function"&&({type:e}=$5(e));const{width:u,height:f,marginLeft:d,marginRight:h,marginTop:p,marginBottom:g}=o,b=u-d-h-s-r,y=f-p-g-n-i;if(e=e==null?void 0:e({width:b,height:y,clip:l,...a}),e==null)return;l=got(l,d,p,u-h,f-g);let m=d+s,v=p+n,w;if(c!=null){const[[_,S],[x,T]]=Nc(e).bounds(c),$=Math.min(b/(x-_),y/(T-S));$>0?(m-=($*(_+x)-b)/2,v-=($*(S+T)-y)/2,w=q1({point(I,A){this.stream.point(I*$+m,A*$+v)}})):jo("Warning: the projection could not be fit to the specified domain; using the default scale.")}return w??(w=m===0&&v===0?k5():q1({point(_,S){this.stream.point(_+m,S+v)}})),{stream:_=>e.stream(w.stream(l(_)))}}function $5(e){switch(`${e}`.toLowerCase()){case"albers-usa":return zi(Jet,.7463,.4673);case"albers":return a0(xL,.7463,.4673);case"azimuthal-equal-area":return zi(tnt,4,4);case"azimuthal-equidistant":return zi(ent,co,co);case"conic-conformal":return a0(int,co,co);case"conic-equal-area":return a0(W1,6.1702,2.9781);case"conic-equidistant":return a0(ant,7.312,3.6282);case"equal-earth":return zi(lnt,5.4133,2.6347);case"equirectangular":return zi(snt,co,N5);case"gnomonic":return zi(unt,3.4641,3.4641);case"identity":return{type:k5};case"reflect-y":return{type:vot};case"mercator":return zi(nnt,co,co);case"orthographic":return zi(fnt,2,2);case"stereographic":return zi(dnt,2,2);case"transverse-mercator":return zi(hnt,co,co);default:throw new Error(`unknown projection type: ${e}`)}}function got(e,t,n,r,i){if(e===!1||e==null||typeof e=="number")return s=>s;switch(e===!0&&(e="frame"),`${e}`.toLowerCase()){case"frame":return aL(t,n,r,i);default:throw new Error(`unknown projection clip type: ${e}`)}}function zi(e,t,n){return{type:({width:r,height:i,rotate:s,precision:o=.15,clip:a})=>{var l,u,f;const c=e();return o!=null&&((l=c.precision)==null||l.call(c,o)),s!=null&&((u=c.rotate)==null||u.call(c,s)),typeof a=="number"&&((f=c.clipAngle)==null||f.call(c,a)),c.scale(Math.min(r/t,i/n)),c.translate([r/2,i/2]),c},aspectRatio:n/t}}function a0(e,t,n){const{type:r,aspectRatio:i}=zi(e,t,n);return{type:s=>{const{parallels:o,domain:a,width:c,height:l}=s,u=r(s);return o!=null&&(u.parallels(o),a===void 0&&u.fitSize([c,l],{type:"Sphere"})),u},aspectRatio:i}}const k5=ni({stream:e=>e}),vot=ni(q1({point(e,t){this.stream.point(e,-t)}}));function D5(e,t,n,r){const i=n[e],s=n[t],o=i.length,a=n[e]=new Float64Array(o).fill(NaN),c=n[t]=new Float64Array(o).fill(NaN);let l;const u=r.stream({point(f,d){a[l]=f,c[l]=d}});for(l=0;l<o;++l)u.point(i[l],s[l])}function bot({projection:e}={}){return e==null?!1:typeof e.stream=="function"?!0:(Ci(e)&&(e=e.type),e!=null)}function wot(e){if(typeof(e==null?void 0:e.stream)=="function")return Rk;if(Ci(e)&&(e=e.type),e!=null){if(typeof e!="function"){const{aspectRatio:t}=$5(e);if(t)return t}return Rk}}function pw(e,t,{projection:n}){const{x:r,y:i}=e;let s={};return r&&(s.x=r),i&&(s.y=i),s=s3(s,t),n&&(r==null?void 0:r.scale)==="x"&&(i==null?void 0:i.scale)==="y"&&D5("x","y",s,n),r&&(s.x=Mr(s.x)),i&&(s.y=Mr(s.y)),s}function _ot(e){const t=[],n=[],r={scale:"x",value:t},i={scale:"y",value:n},s={point(o,a){t.push(o),n.push(a)},lineStart(){},lineEnd(){},polygonStart(){},polygonEnd(){},sphere(){}};for(const o of e.value)Oa(o,s);return[r,i]}const O5=new Map([["accent",wit],["category10",bit],["dark2",_it],["paired",Sit],["pastel1",xit],["pastel2",Iit],["set1",Eit],["set2",Tit],["set3",Ait],["tableau10",Mit]]);function Sot(e){return e!=null&&O5.has(`${e}`.toLowerCase())}const Fk=new Map([...O5,["brbg",lo(hB,pB)],["prgn",lo(yB,mB)],["piyg",lo(gB,vB)],["puor",lo(bB,wB)],["rdbu",lo(Px,K1)],["rdgy",lo(_B,SB)],["rdylbu",lo(zx,Z1)],["rdylgn",lo(xB,IB)],["spectral",lo(EB,TB)],["burd",Lk(Px,K1)],["buylrd",Lk(zx,Z1)],["blues",In(KB,ZB)],["greens",In(JB,tC)],["greys",In(eC,nC)],["oranges",In(aC,cC)],["purples",In(rC,iC)],["reds",In(sC,oC)],["turbo",uo(yC)],["viridis",uo(mC)],["magma",uo(gC)],["inferno",uo(vC)],["plasma",uo(bC)],["cividis",uo(lC)],["cubehelix",uo(uC)],["warm",uo(fC)],["cool",uo(dC)],["bugn",In(AB,MB)],["bupu",In(NB,$B)],["gnbu",In(kB,DB)],["orrd",In(OB,RB)],["pubu",In(BB,CB)],["pubugn",In(FB,LB)],["purd",In(UB,PB)],["rdpu",In(zB,jB)],["ylgn",In(qB,WB)],["ylgnbu",In(VB,YB)],["ylorbr",In(GB,HB)],["ylorrd",In(XB,QB)],["rainbow",Bk(hC)],["sinebow",Bk(pC)]]);function In(e,t){return({length:n})=>n===1?[e[3][1]]:n===2?[e[3][1],e[3][2]]:(n=Math.max(3,Math.floor(n)),n>9?ss(t,n):e[n])}function lo(e,t){return({length:n})=>n===2?[e[3][0],e[3][2]]:(n=Math.max(3,Math.floor(n)),n>11?ss(t,n):e[n])}function Lk(e,t){return({length:n})=>n===2?[e[3][2],e[3][0]]:(n=Math.max(3,Math.floor(n)),n>11?ss(r=>t(1-r),n):e[n].slice().reverse())}function uo(e){return({length:t})=>ss(e,Math.max(2,Math.floor(t)))}function Bk(e){return({length:t})=>ss(e,Math.floor(t)+1).slice(0,-1)}function R5(e){const t=`${e}`.toLowerCase();if(!Fk.has(t))throw new Error(`unknown ordinal scheme: ${t}`);return Fk.get(t)}function yw(e,t){const n=R5(e),r=typeof n=="function"?n({length:t}):n;return r.length!==t?r.slice(0,t):r}function xot(e,t="greys"){const n=new Set,[r,i]=yw(t,2);for(const s of e)if(s!=null)if(s===!0)n.add(i);else if(s===!1)n.add(r);else return;return[...n]}const Ck=new Map([["brbg",pB],["prgn",mB],["piyg",vB],["puor",wB],["rdbu",K1],["rdgy",SB],["rdylbu",Z1],["rdylgn",IB],["spectral",TB],["burd",e=>K1(1-e)],["buylrd",e=>Z1(1-e)],["blues",ZB],["greens",tC],["greys",nC],["purples",iC],["reds",oC],["oranges",cC],["turbo",yC],["viridis",mC],["magma",gC],["inferno",vC],["plasma",bC],["cividis",lC],["cubehelix",uC],["warm",fC],["cool",dC],["bugn",MB],["bupu",$B],["gnbu",DB],["orrd",RB],["pubugn",LB],["pubu",CB],["purd",PB],["rdpu",jB],["ylgnbu",YB],["ylgn",WB],["ylorbr",HB],["ylorrd",QB],["rainbow",hC],["sinebow",pC]]);function u3(e){const t=`${e}`.toLowerCase();if(!Ck.has(t))throw new Error(`unknown quantitative scheme: ${t}`);return Ck.get(t)}const Iot=new Set(["brbg","prgn","piyg","puor","rdbu","rdgy","rdylbu","rdylgn","spectral","burd","buylrd"]);function Eot(e){return e!=null&&Iot.has(`${e}`.toLowerCase())}const F5=e=>t=>e(1-t),c2=[0,1],Uk=new Map([["number",Qn],["rgb",jl],["hsl",WZ],["hcl",XZ],["lab",GZ]]);function L5(e){const t=`${e}`.toLowerCase();if(!Uk.has(t))throw new Error(`unknown interpolator: ${t}`);return Uk.get(t)}function rm(e,t,n,{type:r,nice:i,clamp:s,zero:o,domain:a=C5(e,n),unknown:c,round:l,scheme:u,interval:f,range:d=qe.get(e)===tm?Lot(n,a):qe.get(e)===em?Bot(n,a):qe.get(e)===nm?c2:void 0,interpolate:h=qe.get(e)===la?u==null&&d!==void 0?jl:u3(u!==void 0?u:r==="cyclical"?"rainbow":"turbo"):l?hT:Qn,reverse:p}){if(f=Od(f,r),(r==="cyclical"||r==="sequential")&&(r="linear"),typeof h!="function"&&(h=L5(h)),p=!!p,d!==void 0){const g=(a=Lr(a)).length,b=(d=Lr(d)).length;if(g!==b){if(h.length===1)throw new Error("invalid piecewise interpolator");h=Pb(h,d),d=void 0}}if(h.length===1?(p&&(h=F5(h),p=!1),d===void 0&&(d=Float64Array.from(a,(g,b)=>b/(a.length-1)),d.length===2&&(d=c2)),t.interpolate((d===c2?ni:d3)(h))):t.interpolate(h),o){const[g,b]=An(a);(g>0||b<0)&&(a=Jp(a),ud(a)!==Math.sign(g)?a[a.length-1]=0:a[0]=0)}return p&&(a=g1(a)),t.domain(a).unknown(c),i&&(t.nice(Tot(i,r)),a=t.domain()),d!==void 0&&t.range(d),s&&t.clamp(s),{type:r,domain:a,range:d,scale:t,interpolate:h,interval:f}}function Tot(e,t){return e===!0?void 0:typeof e=="number"?e:_st(e,t)}function Aot(e,t,n){return rm(e,Hb(),t,n)}function Mot(e,t,n){return B5(e,t,{...n,exponent:.5})}function B5(e,t,{exponent:n=1,...r}){return rm(e,WL().exponent(n),t,{...r,type:"pow"})}function Not(e,t,{base:n=10,domain:r=Cot(t),...i}){return rm(e,jL().base(n),t,{...i,domain:r})}function $ot(e,t,{constant:n=1,...r}){return rm(e,YL().constant(n),t,r)}function kot(e,t,{range:n,quantiles:r=n===void 0?5:(n=[...n]).length,n:i=r,scheme:s="rdylbu",domain:o=Uot(t),unknown:a,interpolate:c,reverse:l}){return n===void 0&&(n=c!==void 0?ss(c,i):qe.get(e)===la?yw(s,i):void 0),o.length>0&&(o=GL(o,n===void 0?{length:i}:n).quantiles()),f3(e,t,{domain:o,range:n,reverse:l,unknown:a})}function Dot(e,t,{range:n,n:r=n===void 0?5:(n=[...n]).length,scheme:i="rdylbu",domain:s=C5(e,t),unknown:o,interpolate:a,reverse:c}){const[l,u]=An(s);let f;return n===void 0?(f=cc(l,u,r),f[0]<=l&&f.splice(0,1),f[f.length-1]>=u&&f.pop(),r=f.length+1,n=a!==void 0?ss(a,r):qe.get(e)===la?yw(i,r):void 0):(f=ss(Qn(l,u),r+1).slice(1,-1),l instanceof Date&&(f=f.map(d=>new Date(d)))),ud(Lr(s))<0&&f.reverse(),f3(e,t,{domain:f,range:n,reverse:c,unknown:o})}function f3(e,t,{domain:n=[0],unknown:r,scheme:i="rdylbu",interpolate:s,range:o=s!==void 0?ss(s,n.length+1):qe.get(e)===la?yw(i,n.length+1):void 0,reverse:a}){n=Lr(n);const c=ud(n);if(!isNaN(c)&&!Oot(n,c))throw new Error(`the ${e} scale has a non-monotonic domain`);return a&&(o=g1(o)),{type:"threshold",scale:HL(c<0?g1(n):n,o===void 0?[]:o).unknown(r),domain:n,range:o}}function Oot(e,t){for(let n=1,r=e.length,i=e[0];n<r;++n){const s=Cl(i,i=e[n]);if(s!==0&&s!==t)return!1}return!0}function Rot(e){return{type:"identity",scale:Ost(qe.get(e))?UL():t=>t}}function ry(e,t=sv){return e.length?[On(e,({value:n})=>n===void 0?n:On(n,t)),Be(e,({value:n})=>n===void 0?n:Be(n,t))]:[0,1]}function C5(e,t){const n=qe.get(e);return(n===tm||n===nm||n===em?Fot:ry)(t)}function Fot(e){return[0,e.length?Be(e,({value:t})=>t===void 0?t:Be(t,sv)):1]}function Lot(e,t){const n=e.find(({radius:o})=>o!==void 0);if(n!==void 0)return[0,n.radius];const r=lc(e,.5,({value:o})=>o===void 0?NaN:lc(o,.25,zo)),i=t.map(o=>3*Math.sqrt(o/r)),s=30/Be(i);return s<1?i.map(o=>o*s):i}function Bot(e,t){const n=jp(e,({value:s})=>s===void 0?NaN:jp(s,Math.abs)),r=t.map(s=>12*s/n),i=60/Be(r);return i<1?r.map(s=>s*i):r}function Cot(e){for(const{value:t}of e)if(t!==void 0)for(let n of t){if(n>0)return ry(e,zo);if(n<0)return ry(e,sw)}return[1,10]}function Uot(e){const t=[];for(const{value:n}of e)if(n!==void 0)for(const r of n)t.push(r);return t}function d3(e){return(t,n)=>r=>e(t+r*(n-t))}function mw(e,t,n,r,{type:i,nice:s,clamp:o,domain:a=ry(r),unknown:c,pivot:l=0,scheme:u,range:f,symmetric:d=!0,interpolate:h=qe.get(e)===la?u==null&&f!==void 0?jl:u3(u!==void 0?u:"rdbu"):Qn,reverse:p}){l=+l,a=Lr(a);let[g,b]=a;if(a.length>2&&jo(`Warning: the diverging ${e} scale domain contains extra elements.`),Cl(g,b)<0&&([g,b]=[b,g],p=!p),g=Math.min(g,l),b=Math.max(b,l),typeof h!="function"&&(h=L5(h)),f!==void 0&&(h=h.length===1?d3(h)(...f):Pb(h,f)),p&&(h=F5(h)),d){const y=n.apply(l),m=y-n.apply(g),v=n.apply(b)-y;m<v?g=n.invert(y-v):m>v&&(b=n.invert(y+m))}return t.domain([g,l,b]).unknown(c).interpolator(h),o&&t.clamp(o),s&&t.nice(s),{type:i,domain:[g,b],pivot:l,interpolate:h,scale:t}}function Pot(e,t,n){return mw(e,lB(),Yot,t,n)}function zot(e,t,n){return U5(e,t,{...n,exponent:.5})}function U5(e,t,{exponent:n=1,...r}){return mw(e,dB().exponent(n=+n),Got(n),t,{...r,type:"diverging-pow"})}function jot(e,t,{base:n=10,pivot:r=1,domain:i=ry(t,r<0?sw:zo),...s}){return mw(e,uB().base(n=+n),qot,t,{domain:i,pivot:r,...s})}function Vot(e,t,{constant:n=1,...r}){return mw(e,fB().constant(n=+n),Hot(n),t,r)}const Yot={apply(e){return e},invert(e){return e}},qot={apply:Math.log,invert:Math.exp},Wot={apply(e){return Math.sign(e)*Math.sqrt(Math.abs(e))},invert(e){return Math.sign(e)*(e*e)}};function Got(e){return e===.5?Wot:{apply(t){return Math.sign(t)*Math.pow(Math.abs(t),e)},invert(t){return Math.sign(t)*Math.pow(Math.abs(t),1/e)}}}function Hot(e){return{apply(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))},invert(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}}function P5(e,t,n,r){return rm(e,t,n,r)}function Xot(e,t,n){return P5(e,git(),t,n)}function Qot(e,t,n){return P5(e,vit(),t,n)}const im=Symbol("ordinal");function z5(e,t,n,{type:r,interval:i,domain:s,range:o,reverse:a,hint:c}){return i=Od(i,r),s===void 0&&(s=V5(n,i,e)),(r==="categorical"||r===im)&&(r="ordinal"),a&&(s=g1(s)),s=t.domain(s).domain(),o!==void 0&&(typeof o=="function"&&(o=o(s)),t.range(o)),{type:r,domain:s,range:o,scale:t,hint:c,interval:i}}function Kot(e,t,{type:n,interval:r,domain:i,range:s,scheme:o,unknown:a,...c}){r=Od(r,n),i===void 0&&(i=V5(t,r,e));let l;if(qe.get(e)===lw)l=tat(t),s=s===void 0?eat(l):ke(s,GT);else if(qe.get(e)===la&&(s===void 0&&(n==="ordinal"||n===im)&&(s=xot(i,o),s!==void 0&&(o=void 0)),o===void 0&&s===void 0&&(o=n==="ordinal"?"turbo":"tableau10"),o!==void 0))if(s!==void 0){const u=u3(o),f=s[0],d=s[1]-s[0];s=({length:h})=>ss(p=>u(f+d*p),h)}else s=R5(o);if(a===Bx)throw new Error(`implicit unknown on ${e} scale is not supported`);return z5(e,TT().unknown(a),t,{...c,type:n,domain:i,range:s,hint:l})}function Zot(e,t,{align:n=.5,padding:r=.5,...i}){return j5(Znt().align(n).padding(r),t,i,e)}function Jot(e,t,{align:n=.5,padding:r=.1,paddingInner:i=r,paddingOuter:s=e==="fx"||e==="fy"?0:r,...o}){return j5(Wb().align(n).paddingInner(i).paddingOuter(s),t,o,e)}function j5(e,t,n,r){let{round:i}=n;return i!==void 0&&e.round(i=!!i),e=z5(r,e,t,n),e.round=i,e}function V5(e,t,n){const r=new Fy;for(const{value:i,domain:s}of e){if(s!==void 0)return s();if(i!==void 0)for(const o of i)r.add(o)}if(t!==void 0){const[i,s]=An(r).map(t.floor,t);return t.range(i,t.offset(s))}if(r.size>1e4&&qe.get(n)===Bs)throw new Error(`implicit ordinal domain of ${n} scale has more than 10,000 values`);return Up(r,Fi)}function Pk(e,t){let n;for(const{hint:r}of e){const i=r==null?void 0:r[t];if(i!==void 0){if(n===void 0)n=i;else if(n!==i)return}}return n}function tat(e){return{fill:Pk(e,"fill"),stroke:Pk(e,"stroke")}}function eat(e){return en(e.fill)?zit:Pit}function Gx(e,{label:t,inset:n=0,insetTop:r=n,insetRight:i=n,insetBottom:s=n,insetLeft:o=n,round:a,nice:c,clamp:l,zero:u,align:f,padding:d,projection:h,facet:{label:p=t}={},...g}={}){const b={};for(const[y,m]of e){const v=g[y],w=G5(y,m,{round:qe.get(y)===Bs?a:void 0,nice:c,clamp:l,zero:u,align:f,padding:d,projection:h,...v});if(w){let{label:_=y==="fx"||y==="fy"?p:t,percent:S,transform:x,inset:T,insetTop:$=T!==void 0?T:y==="y"?r:0,insetRight:I=T!==void 0?T:y==="x"?i:0,insetBottom:A=T!==void 0?T:y==="y"?s:0,insetLeft:D=T!==void 0?T:y==="x"?o:0}=v||{};if(x==null)x=void 0;else if(typeof x!="function")throw new Error("invalid scale transform; not a function");w.percent=!!S,w.label=_===void 0?rat(m,w):_,w.transform=x,y==="x"||y==="fx"?(w.insetLeft=+D,w.insetRight=+I):(y==="y"||y==="fy")&&(w.insetTop=+$,w.insetBottom=+A),b[y]=w}}return b}function zk(e){const t={},n={scales:t};for(const[r,i]of Object.entries(e)){const{scale:s,type:o,interval:a,label:c}=i;t[r]=X5(i),n[r]=s,s.type=o,a!=null&&(s.interval=a),c!=null&&(s.label=c)}return n}function nat(e,t){const{x:n,y:r,fx:i,fy:s}=e,o=i||s?h3(t):t;i&&jk(i,o),s&&Vk(s,o);const a=i||s?Y5(e,t):t;n&&jk(n,a),r&&Vk(r,a)}function rat(e=[],t){let n;for(const{label:r}of e)if(r!==void 0){if(n===void 0)n=r;else if(n!==r)return}if(n!==void 0)return!ru(t)&&t.percent&&(n=`${n} (%)`),{inferred:!0,toString:()=>n}}function h3(e){const{marginTop:t,marginRight:n,marginBottom:r,marginLeft:i,width:s,height:o,facet:{marginTop:a,marginRight:c,marginBottom:l,marginLeft:u}}=e;return{marginTop:Math.max(t,a),marginRight:Math.max(n,c),marginBottom:Math.max(r,l),marginLeft:Math.max(i,u),width:s,height:o}}function Y5({fx:e,fy:t},n){const{marginTop:r,marginRight:i,marginBottom:s,marginLeft:o,width:a,height:c}=h3(n);return{marginTop:r,marginRight:i,marginBottom:s,marginLeft:o,width:e?e.scale.bandwidth()+o+i:a,height:t?t.scale.bandwidth()+r+s:c,facet:{width:a,height:c}}}function jk(e,t){if(e.range===void 0){const{insetLeft:n,insetRight:r}=e,{width:i,marginLeft:s=0,marginRight:o=0}=t,a=s+n,c=i-o-r;e.range=[a,Math.max(a,c)],ru(e)||(e.range=W5(e)),e.scale.range(e.range)}q5(e)}function Vk(e,t){if(e.range===void 0){const{insetTop:n,insetBottom:r}=e,{height:i,marginTop:s=0,marginBottom:o=0}=t,a=s+n,c=i-o-r;e.range=[Math.max(a,c),a],ru(e)?e.range.reverse():e.range=W5(e),e.scale.range(e.range)}q5(e)}function q5(e){e.round===void 0&&oat(e)&&iat(e)<=30&&e.scale.round(!0)}function iat({scale:e}){const t=e.domain().length,[n,r]=e.range(),i=e.paddingInner?e.paddingInner():1,s=e.paddingOuter?e.paddingOuter():e.padding(),o=t-i,a=Math.abs(r-n)/Math.max(1,o+s*2);return(a-Math.floor(a))*o}function W5(e){const t=e.scale.domain().length+H5(e);if(!(t>2))return e.range;const[n,r]=e.range;return Array.from({length:t},(i,s)=>n+s/(t-1)*(r-n))}function Hx(e,t,n){return G5(e,n===void 0?void 0:[{hint:n}],{...t})}function G5(e,t=[],n={}){const r=sat(e,t,n);if(n.type===void 0&&n.domain===void 0&&n.range===void 0&&n.interval==null&&e!=="fx"&&e!=="fy"&&ru({type:r})){const i=t.map(({value:s})=>s).filter(s=>s!==void 0);i.some(gr)?jo(`Warning: some data associated with the ${e} scale are dates. Dates are typically associated with a "utc" or "time" scale rather than a "${wu(r)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can specify the interval of the ${e} scale (e.g., d3.utcDay), or you can suppress this warning by setting the type of the ${e} scale to "${wu(r)}".`):i.some(Est)?jo(`Warning: some data associated with the ${e} scale are strings that appear to be dates (e.g., YYYY-MM-DD). If these strings represent dates, you should parse them to Date objects. Dates are typically associated with a "utc" or "time" scale rather than a "${wu(r)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can suppress this warning by setting the type of the ${e} scale to "${wu(r)}".`):i.some(Tst)&&jo(`Warning: some data associated with the ${e} scale are strings that appear to be numbers. If these strings represent numbers, you should parse or coerce them to numbers. Numbers are typically associated with a "linear" scale rather than a "${wu(r)}" scale. If you want to treat this data as ordinal, you can specify the interval of the ${e} scale (e.g., 1 for integers), or you can suppress this warning by setting the type of the ${e} scale to "${wu(r)}".`)}switch(n.type=r,r){case"diverging":case"diverging-sqrt":case"diverging-pow":case"diverging-log":case"diverging-symlog":case"cyclical":case"sequential":case"linear":case"sqrt":case"threshold":case"quantile":case"pow":case"log":case"symlog":n=c0(t,n,Mr);break;case"identity":switch(qe.get(e)){case Bs:n=c0(t,n,Mr);break;case lw:n=c0(t,n,aat);break}break;case"utc":case"time":n=c0(t,n,wst);break}switch(r){case"diverging":return Pot(e,t,n);case"diverging-sqrt":return zot(e,t,n);case"diverging-pow":return U5(e,t,n);case"diverging-log":return jot(e,t,n);case"diverging-symlog":return Vot(e,t,n);case"categorical":case"ordinal":case im:return Kot(e,t,n);case"cyclical":case"sequential":case"linear":return Aot(e,t,n);case"sqrt":return Mot(e,t,n);case"threshold":return f3(e,t,n);case"quantile":return kot(e,t,n);case"quantize":return Dot(e,t,n);case"pow":return B5(e,t,n);case"log":return Not(e,t,n);case"symlog":return $ot(e,t,n);case"utc":return Qot(e,t,n);case"time":return Xot(e,t,n);case"point":return Zot(e,t,n);case"band":return Jot(e,t,n);case"identity":return Rot(e);case void 0:return;default:throw new Error(`unknown scale type: ${r}`)}}function wu(e){return typeof e=="symbol"?e.description:e}const Yk={toString:()=>"projection"};function sat(e,t,{type:n,domain:r,range:i,scheme:s,pivot:o,projection:a}){if(e==="fx"||e==="fy")return"band";(e==="x"||e==="y")&&a!=null&&(n=Yk);for(const{type:l}of t)if(l!==void 0){if(n===void 0)n=l;else if(n!==l)throw new Error(`scale incompatible with channel: ${n} !== ${l}`)}if(n===Yk)return;if(n!==void 0)return n;if(r===void 0&&!t.some(({value:l})=>l!==void 0))return;const c=qe.get(e);if(c===tm)return"sqrt";if(c===nm||c===em)return"linear";if(c===lw)return"ordinal";if((r||i||[]).length>2)return l2(c);if(r!==void 0){if(Ke(r))return l2(c);if(gr(r))return"utc"}else{const l=t.map(({value:u})=>u).filter(u=>u!==void 0);if(l.some(Ke))return l2(c);if(l.some(gr))return"utc"}if(c===la){if(o!=null||Eot(s))return"diverging";if(Sot(s))return"categorical"}return"linear"}function l2(e){switch(e){case Bs:return"point";case la:return im;default:return"ordinal"}}function ru({type:e}){return e==="ordinal"||e==="point"||e==="band"||e===im}function H5({type:e}){return e==="threshold"}function oat({type:e}){return e==="point"||e==="band"}function Ai(e){if(e===void 0)return!0;const t=e.domain(),n=e(t[0]);for(let r=1,i=t.length;r<i;++r)if(e(t[r])-n)return!1;return!0}function c0(e,{domain:t,...n},r){for(const i of e)i.value!==void 0&&(i.value=r(i.value));return{domain:t===void 0?t:r(t),...n}}function aat(e){return ke(e,GT)}function Hl(e={}){let t;for(const n in e)if(qe.has(n)&&Tl(e[n])){if(t!==void 0)throw new Error("ambiguous scale definition; multiple scales found");t=X5(Hx(n,e[n]))}if(t===void 0)throw new Error("invalid scale definition; no scale found");return t}function cat(e){return t=>{if(!qe.has(t=`${t}`))throw new Error(`unknown scale: ${t}`);return e[t]}}function X5({scale:e,type:t,domain:n,range:r,interpolate:i,interval:s,transform:o,percent:a,pivot:c}){if(t==="identity")return{type:"identity",apply:u=>u,invert:u=>u};const l=e.unknown?e.unknown():void 0;return{type:t,domain:Jp(n),...r!==void 0&&{range:Jp(r)},...o!==void 0&&{transform:o},...a&&{percent:a},...l!==void 0&&{unknown:l},...s!==void 0&&{interval:s},...i!==void 0&&{interpolate:i},...e.clamp&&{clamp:e.clamp()},...c!==void 0&&{pivot:c,symmetric:!1},...e.base&&{base:e.base()},...e.exponent&&{exponent:e.exponent()},...e.constant&&{constant:e.constant()},...e.align&&{align:e.align(),round:e.round()},...e.padding&&(e.paddingInner?{paddingInner:e.paddingInner(),paddingOuter:e.paddingOuter()}:{padding:e.padding()}),...e.bandwidth&&{bandwidth:e.bandwidth(),step:e.step()},apply:u=>e(u),...e.invert&&{invert:u=>e.invert(u)}}}function lat(e,t,n={}){let r=.5-Cn,i=.5+Cn,s=.5+Cn,o=.5-Cn;for(const{marginTop:g,marginRight:b,marginBottom:y,marginLeft:m}of t)g>r&&(r=g),b>i&&(i=b),y>s&&(s=y),m>o&&(o=m);let{margin:a,marginTop:c=a!==void 0?a:r,marginRight:l=a!==void 0?a:i,marginBottom:u=a!==void 0?a:s,marginLeft:f=a!==void 0?a:o}=n;c=+c,l=+l,u=+u,f=+f;let{width:d=640,height:h=uat(e,n,{width:d,marginTopDefault:r,marginRightDefault:i,marginBottomDefault:s,marginLeftDefault:o})+Math.max(0,c-r+u-s)}=n;d=+d,h=+h;const p={width:d,height:h,marginTop:c,marginRight:l,marginBottom:u,marginLeft:f};if(e.fx||e.fy){let{margin:g,marginTop:b=g!==void 0?g:c,marginRight:y=g!==void 0?g:l,marginBottom:m=g!==void 0?g:u,marginLeft:v=g!==void 0?g:f}=n.facet??{};b=+b,y=+y,m=+m,v=+v,p.facet={marginTop:b,marginRight:y,marginBottom:m,marginLeft:v}}return p}function uat({x:e,y:t,fy:n,fx:r},{projection:i,aspectRatio:s},{width:o,marginTopDefault:a,marginRightDefault:c,marginBottomDefault:l,marginLeftDefault:u}){const f=n?n.scale.domain().length:1,d=wot(i);if(d){const p=r?r.scale.domain().length:1,g=(1.1*f-.1)/(1.1*p-.1)*d,b=Math.max(.1,Math.min(10,g));return Math.round((o-u-c)*b+a+l)}const h=t?ru(t)?t.scale.domain().length:Math.max(7,17/f):1;if(s!=null){if(s=+s,!(isFinite(s)&&s>0))throw new Error(`invalid aspectRatio: ${s}`);const p=qk("y",t)/(qk("x",e)*s),g=r?r.scale.bandwidth():1,b=n?n.scale.bandwidth():1,y=g*(o-u-c)-e.insetLeft-e.insetRight;return(p*y+t.insetTop+t.insetBottom)/b+a+l}return!!(t||n)*Math.max(1,Math.min(60,h*f))*20+!!r*30+60}function qk(e,t){if(!t)throw new Error(`aspectRatio requires ${e} scale`);const{type:n,domain:r}=t;let i;switch(n){case"linear":case"utc":case"time":i=Number;break;case"pow":{const a=t.scale.exponent();i=c=>Math.pow(c,a);break}case"log":i=Math.log;break;case"point":case"band":return r.length;default:throw new Error(`unsupported ${e} scale for aspectRatio: ${n}`)}const[s,o]=An(r);return Math.abs(i(o)-i(s))}function fat(e,t){const{fx:n,fy:r}=Gx(e,t),i=n==null?void 0:n.scale.domain(),s=r==null?void 0:r.scale.domain();return i&&s?oQ(i,s).map(([o,a],c)=>({x:o,y:a,i:c})):i?i.map((o,a)=>({x:o,i:a})):s?s.map((o,a)=>({y:o,i:a})):void 0}function dat(e,{x:t,y:n}){return t&&(t=Xx(t)),n&&(n=Xx(n)),e.filter(t&&n?r=>t.has(r.x)&&n.has(r.y):t?r=>t.has(r.x):r=>n.has(r.y)).sort(t&&n?(r,i)=>t.get(r.x)-t.get(i.x)||n.get(r.y)-n.get(i.y):t?(r,i)=>t.get(r.x)-t.get(i.x):(r,i)=>n.get(r.y)-n.get(i.y))}function p3(e,{fx:t,fy:n}){const r=oa(e),i=t==null?void 0:t.value,s=n==null?void 0:n.value;return t&&n?Af(r,o=>(o.fx=i[o[0]],o.fy=s[o[0]],o),o=>i[o],o=>s[o]):t?Af(r,o=>(o.fx=i[o[0]],o),o=>i[o]):Af(r,o=>(o.fy=s[o[0]],o),o=>s[o])}function hat(e,t,{marginTop:n,marginLeft:r}){return e&&t?({x:i,y:s})=>`translate(${e(i)-r},${t(s)-n})`:e?({x:i})=>`translate(${e(i)-r},0)`:({y:i})=>`translate(0,${t(i)-n})`}function pat(e){const t=[],n=new Uint32Array(Hs(e,r=>r.length));for(const r of e){let i=0;for(const s of e)r!==s&&(n.set(s,i),i+=s.length);t.push(n.slice(0,i))}return t}const yat=new Map([["top",u2],["right",h2],["bottom",f2],["left",d2],["top-left",l0(u2,d2)],["top-right",l0(u2,h2)],["bottom-left",l0(f2,d2)],["bottom-right",l0(f2,h2)],["top-empty",vat],["right-empty",_at],["bottom-empty",bat],["left-empty",wat],["empty",Sat]]);function mat(e){if(e==null)return null;const t=yat.get(`${e}`.toLowerCase());if(t)return t;throw new Error(`invalid facet anchor: ${e}`)}const Wk=new WeakMap;function Xx(e){let t=Wk.get(e);return t||Wk.set(e,t=new Ul(ke(e,(n,r)=>[n,r]))),t}function Dc(e,t){return Xx(e).get(t)}function gat(e,t,n){return t=ml(t),n=ml(n),e.find(r=>Object.is(ml(r.x),t)&&Object.is(ml(r.y),n))}function gw(e,t,n){var r;return(r=gat(e,t,n))==null?void 0:r.empty}function u2(e,{y:t},{y:n}){return t?Dc(t,n)===0:!0}function f2(e,{y:t},{y:n}){return t?Dc(t,n)===t.length-1:!0}function d2(e,{x:t},{x:n}){return t?Dc(t,n)===0:!0}function h2(e,{x:t},{x:n}){return t?Dc(t,n)===t.length-1:!0}function vat(e,{y:t},{x:n,y:r,empty:i}){if(i)return!1;if(!t)return;const s=Dc(t,r);if(s>0)return gw(e,n,t[s-1])}function bat(e,{y:t},{x:n,y:r,empty:i}){if(i)return!1;if(!t)return;const s=Dc(t,r);if(s<t.length-1)return gw(e,n,t[s+1])}function wat(e,{x:t},{x:n,y:r,empty:i}){if(i)return!1;if(!t)return;const s=Dc(t,n);if(s>0)return gw(e,t[s-1],r)}function _at(e,{x:t},{x:n,y:r,empty:i}){if(i)return!1;if(!t)return;const s=Dc(t,n);if(s<t.length-1)return gw(e,t[s+1],r)}function Sat(e,t,{empty:n}){return n}function l0(e,t){return function(){return e.apply(null,arguments)&&t.apply(null,arguments)}}function p2(e,{channels:{fx:t,fy:n},groups:r}){return t&&n?e.map(({x:i,y:s})=>{var o;return((o=r.get(i))==null?void 0:o.get(s))??[]}):t?e.map(({x:i})=>r.get(i)??[]):e.map(({y:i})=>r.get(i)??[])}let Me=class{constructor(t,n={},r={},i){const{facet:s="auto",facetAnchor:o,fx:a,fy:c,sort:l,dx:u=0,dy:f=0,margin:d=0,marginTop:h=d,marginRight:p=d,marginBottom:g=d,marginLeft:b=d,clip:y=i==null?void 0:i.clip,channels:m,tip:v,render:w}=r;if(this.data=t,this.sort=dc(l)?l:null,this.initializer=Br(r).initializer,this.transform=this.initializer?r.transform:to(r).transform,s===null||s===!1?this.facet=null:(this.facet=oi(s===!0?"include":s,"facet",["auto","include","exclude","super"]),this.fx=t===cp&&typeof a=="string"?[a]:a,this.fy=t===cp&&typeof c=="string"?[c]:c),this.facetAnchor=mat(o),n=YT(n),m!==void 0&&(n={...xat(m),...n}),i!==void 0&&(n={...E5(this,r,i),...n}),this.channels=Object.fromEntries(Object.entries(n).map(([_,S])=>{if(Ts(S.value)){const{value:x,label:T=S.label,scale:$=S.scale}=S.value;S={...S,label:T,scale:$,value:x}}if(t===cp&&typeof S.value=="string"){const{value:x}=S;S={...S,value:[x]}}return[_,S]}).filter(([_,{value:S,optional:x}])=>{if(S!=null)return!0;if(x)return!1;throw new Error(`missing channel value: ${_}`)})),this.dx=+u,this.dy=+f,this.marginTop=+h,this.marginRight=+p,this.marginBottom=+g,this.marginLeft=+b,this.clip=A5(y),this.tip=Iat(v),this.facet==="super"){if(a||c)throw new Error("super-faceting cannot use fx or fy");for(const _ in this.channels){const{scale:S}=n[_];if(!(S!=="x"&&S!=="y"))throw new Error("super-faceting cannot use x or y")}}w!=null&&(this.render=Q5(w,this.render))}initialize(t,n,r){let i=Lr(this.data);t===void 0&&i!=null&&(t=[oa(i)]);const s=t;this.transform!=null&&({facets:t,data:i}=this.transform(i,t,r),i=Lr(i)),t!==void 0&&(t.original=s);const o=w5(this.channels,i);return this.sort!=null&&Xst(i,t,o,n,this.sort),{data:i,facets:t,channels:o}}filter(t,n,r){for(const i in n){const{filter:s=yr}=n[i];if(s!==null){const o=r[i];t=t.filter(a=>s(o[a]))}}return t}project(t,n,r){for(const i in t)if(t[i].scale==="x"&&/^x|x$/.test(i)){const s=i.replace(/^x|x$/,"y");s in t&&t[s].scale==="y"&&D5(i,s,n,r.projection)}}scale(t,n,r){const i=s3(t,n);return r.projection&&this.project(t,i,r),i}};function ls(...e){return e.plot=Me.prototype.plot,e}function Q5(e,t){if(e==null)return t===null?void 0:t;if(t==null)return e===null?void 0:e;if(typeof e!="function")throw new TypeError(`invalid render transform: ${e}`);if(typeof t!="function")throw new TypeError(`invalid render transform: ${t}`);return function(n,r,i,s,o,a){return e.call(this,n,r,i,s,o,(c,l,u,f,d)=>t.call(this,c,l,u,f,d,a))}}function xat(e){return Object.fromEntries(Object.entries(YT(e)).map(([t,n])=>(n=typeof n=="string"?{value:n,label:t}:Ky(n),n.filter===void 0&&n.scale==null&&(n={...n,filter:null}),[t,n])))}function Iat(e){return e===!0?"xy":e===!1||e==null?null:typeof e=="string"?oi(e,"tip",["x","y","xy"]):e}function Rd(e,t){return(e==null?void 0:e.tip)===!0?{...e,tip:t}:Ci(e==null?void 0:e.tip)&&e.tip.pointer===void 0?{...e,tip:{...e.tip,pointer:t}}:e}const Gk=new WeakMap;function y3(e,t,{x:n,y:r,px:i,py:s,maxRadius:o=40,channels:a,render:c,...l}={}){return o=+o,i!=null&&(n??(n=null),a={...a,px:{value:i,scale:"x"}}),s!=null&&(r??(r=null),a={...a,py:{value:s,scale:"y"}}),{x:n,y:r,channels:a,...l,render:Q5(function(u,f,d,h,p,g){p={...p,pointerSticky:!1};const b=p.ownerSVGElement,{data:y}=p.getMarkState(this);let m=Gk.get(b);m||Gk.set(b,m={sticky:!1,roots:[],renders:[]});let v=m.renders.push(G)-1;const{x:w,y:_,fx:S,fy:x}=f;let T=S?S(u.fx)-h.marginLeft:0,$=x?x(u.fy)-h.marginTop:0;w!=null&&w.bandwidth&&(T+=w.bandwidth()/2),_!=null&&_.bandwidth&&($+=_.bandwidth()/2);const I=u.fi!=null;let A;if(I){let q=m.facetStates;q||(m.facetStates=q=new Map),A=q.get(this),A||q.set(this,A=new Map)}const[D,F]=eo(this,h),{px:E,py:N}=d,M=E?q=>E[q]:K5(d,D),R=N?q=>N[q]:Z5(d,F);let O,C,L,P;function z(q,K){if(I)if(P&&(P=cancelAnimationFrame(P)),q==null)A.delete(u.fi);else{A.set(u.fi,K),P=requestAnimationFrame(()=>{P=null;for(const[Y,et]of A)if(et<K||et===K&&Y<u.fi){q=null;break}G(q)});return}G(q)}function G(q){if(O===q&&L===m.sticky)return;O=q,L=p.pointerSticky=m.sticky;const K=O==null?[]:[O];I&&(K.fx=u.fx,K.fy=u.fy,K.fi=u.fi);const Y=g(K,f,d,h,p);if(C){if(I){const et=C.parentNode,st=C.getAttribute("transform"),j=Y.getAttribute("transform");st?Y.setAttribute("transform",st):Y.removeAttribute("transform"),j?et.setAttribute("transform",j):et.removeAttribute("transform"),Y.removeAttribute("aria-label"),Y.removeAttribute("aria-description"),Y.removeAttribute("aria-hidden")}C.replaceWith(Y)}return m.roots[v]=C=Y,O==null&&(A==null?void 0:A.size)>1||p.dispatchValue(O==null?null:y[O]),Y}function Q(q){if(m.sticky||q.pointerType==="mouse"&&q.buttons===1)return;let[K,Y]=qi(q);K-=T,Y-=$;const et=K<h.marginLeft||K>h.width-h.marginRight?1:e,st=Y<h.marginTop||Y>h.height-h.marginBottom?1:t;let j=null,Tt=o*o;for(const ut of u){const jt=et*(M(ut)-K),qt=st*(R(ut)-Y),ct=jt*jt+qt*qt;ct<=Tt&&(j=ut,Tt=ct)}if(j!=null&&(e!==1||t!==1)){const ut=M(j)-K,jt=R(j)-Y;Tt=ut*ut+jt*jt}z(j,Tt)}function rt(q){q.pointerType==="mouse"&&O!=null&&(m.sticky&&m.roots.some(K=>K==null?void 0:K.contains(q.target))||(m.sticky?(m.sticky=!1,m.renders.forEach(K=>K(null))):(m.sticky=!0,G(O)),q.stopImmediatePropagation()))}function Z(q){q.pointerType==="mouse"&&(m.sticky||z(null))}return b.addEventListener("pointerenter",Q),b.addEventListener("pointermove",Q),b.addEventListener("pointerdown",rt),b.addEventListener("pointerleave",Z),G(null)},c)}}function m3(e){return y3(1,1,e)}function g3(e){return y3(1,.01,e)}function v3(e){return y3(.01,1,e)}function K5({x1:e,x2:t,x:n=e},r){return e&&t?i=>(e[i]+t[i])/2:n?i=>n[i]:()=>r}function Z5({y1:e,y2:t,y:n=e},r){return e&&t?i=>(e[i]+t[i])/2:n?i=>n[i]:()=>r}function J5(e){return ru(e)&&e.interval===void 0?void 0:"tabular-nums"}function Eat(e,t){let{label:n=e.label,tickSize:r=6,width:i=240,height:s=44+r,marginTop:o=18,marginRight:a=0,marginBottom:c=16+r,marginLeft:l=0,style:u,ticks:f=(i-l-a)/64,tickFormat:d,fontVariant:h=J5(e),round:p=!0,opacity:g,className:b}=t;const y=hw(t);b=c3(b),g=cn(g)[1],d===null&&(d=()=>null);const m=le("svg",y).attr("class",`${b}-ramp`).attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("width",i).attr("height",s).attr("viewBox",`0 0 ${i} ${s}`).call(D=>D.append("style").text(`.${b}-ramp {
  display: block;
  background: white;
  height: auto;
  height: intrinsic;
  max-width: 100%;
  overflow: visible;
}
.${b}-ramp text {
  white-space: pre;
}`)).call(l3,u);let v=D=>D.selectAll(".tick line").attr("y1",o+c-s),w;const _=p?(D,F)=>D.rangeRound(F):(D,F)=>D.range(F),{type:S,domain:x,range:T,interpolate:$,scale:I,pivot:A}=e;if($){const D=T===void 0?$:Pb($.length===1?d3($):$,T);w=_(I.copy(),ss(Qn(l,i-a),Math.min(x.length+(A!==void 0),T===void 0?1/0:T.length)));const F=256,E=y.document.createElement("canvas");E.width=F,E.height=1;const N=E.getContext("2d");for(let M=0,R=F-1;M<F;++M)N.fillStyle=D(M/R),N.fillRect(M,0,1,1);m.append("image").attr("opacity",g).attr("x",l).attr("y",o).attr("width",i-l-a).attr("height",s-o-c).attr("preserveAspectRatio","none").attr("xlink:href",E.toDataURL())}else if(S==="threshold"){const D=x,F=d===void 0?E=>E:typeof d=="string"?kd(d):d;w=_(Hb().domain([-1,T.length-1]),[l,i-a]),m.append("g").attr("fill-opacity",g).selectAll().data(T).enter().append("rect").attr("x",(E,N)=>w(N-1)).attr("y",o).attr("width",(E,N)=>w(N)-w(N-1)).attr("height",s-o-c).attr("fill",E=>E),f=ke(D,(E,N)=>N),d=E=>F(D[E],E)}else w=_(Wb().domain(x),[l,i-a]),m.append("g").attr("fill-opacity",g).selectAll().data(x).enter().append("rect").attr("x",w).attr("y",o).attr("width",Math.max(0,w.bandwidth()-1)).attr("height",s-o-c).attr("fill",I),v=()=>{};return m.append("g").attr("transform",`translate(0,${s-c})`).call(MQ(w).ticks(Array.isArray(f)?null:f,typeof d=="string"?d:void 0).tickFormat(typeof d=="function"?d:void 0).tickSize(r).tickValues(Array.isArray(f)?f:null)).attr("font-size",null).attr("font-family",null).attr("font-variant",Ze(h,"normal")).call(v).call(D=>D.select(".domain").remove()),n!==void 0&&m.append("text").attr("x",l).attr("y",o-6).attr("fill","currentColor").attr("font-weight","bold").text(n),m.node()}const uv=Math.PI/180;function Fd(e,{marker:t,markerStart:n=t,markerMid:r=t,markerEnd:i=t}={}){e.markerStart=y2(n),e.markerMid=y2(r),e.markerEnd=y2(i)}function y2(e){if(e==null||e===!1)return null;if(e===!0)return Xk;if(typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"none":return null;case"arrow":return Hk("auto");case"arrow-reverse":return Hk("auto-start-reverse");case"dot":return Tat;case"circle":case"circle-fill":return Xk;case"circle-stroke":return Aat}throw new Error(`invalid marker: ${e}`)}function Hk(e){return(t,n)=>le("svg:marker",n).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("orient",e).attr("fill","none").attr("stroke",t).attr("stroke-width",1.5).attr("stroke-linecap","round").attr("stroke-linejoin","round").call(r=>r.append("path").attr("d","M-1.5,-3l3,3l-3,3")).node()}function Tat(e,t){return le("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",e).attr("stroke","none").call(n=>n.append("circle").attr("r",2.5)).node()}function Xk(e,t){return le("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",e).attr("stroke","white").attr("stroke-width",1.5).call(n=>n.append("circle").attr("r",3)).node()}function Aat(e,t){return le("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill","white").attr("stroke",e).attr("stroke-width",1.5).call(n=>n.append("circle").attr("r",3)).node()}let Mat=0;function sm(e,t,{stroke:n},r){return tU(e,t,n&&(i=>n[i]),r)}function Nat(e,t,{stroke:n},r){return tU(e,t,n&&(([i])=>n[i]),r)}function tU(e,{markerStart:t,markerMid:n,markerEnd:r,stroke:i},s=()=>i,o){const a=new Map;function c(l){return function(u){const f=s(u);let d=a.get(l);d||a.set(l,d=new Map);let h=d.get(f);if(!h){const p=this.parentNode.insertBefore(l(f,o),this),g=`plot-marker-${++Mat}`;p.setAttribute("id",g),d.set(f,h=`url(#${g})`)}return h}}t&&e.attr("marker-start",c(t)),n&&e.attr("marker-mid",c(n)),r&&e.attr("marker-end",c(r))}function om({inset:e,insetLeft:t,insetRight:n,...r}={}){return[t,n]=eU(e,t,n),{inset:e,insetLeft:t,insetRight:n,...r}}function am({inset:e,insetTop:t,insetBottom:n,...r}={}){return[t,n]=eU(e,t,n),{inset:e,insetTop:t,insetBottom:n,...r}}function eU(e,t,n){return e===void 0&&t===void 0&&n===void 0?Cn?[1,0]:[.5,.5]:[t,n]}function nU(e,{interval:t}){return e={...Ky(e)},e.interval=VT(e.interval===void 0?t:e.interval),e}function vw(e,t,n,r){const{[e]:i,[`${e}1`]:s,[`${e}2`]:o}=n,{value:a,interval:c}=nU(i,n);if(a==null||c==null&&!r)return n;const l=aa(i);if(c==null){let h;const p={transform:g=>h||(h=Gt(g,a)),label:l};return{...n,[e]:void 0,[`${e}1`]:s===void 0?p:s,[`${e}2`]:o===void 0?p:o}}let u,f;function d(h){return f!==void 0&&h===u?f:f=ke(Gt(u=h,a),p=>c.floor(p))}return t({...n,[e]:void 0,[`${e}1`]:s===void 0?{transform:d,label:l}:s,[`${e}2`]:o===void 0?{transform:h=>d(h).map(p=>c.offset(p)),label:l}:o})}function rU(e,t,n){const{[e]:r}=n,{value:i,interval:s}=nU(r,n);return i==null||s==null?n:t({...n,[e]:{label:aa(r),transform:o=>{const a=ke(Gt(o,i),l=>s.floor(l)),c=a.map(l=>s.offset(l));return a.map(gr(a)?(l,u)=>l==null||isNaN(l=+l)||(u=c[u],u==null)||isNaN(u=+u)?void 0:new Date((l+u)/2):(l,u)=>l==null||(u=c[u],u==null)?NaN:(+l+ +u)/2)}}})}function iU(e={}){return vw("x",om,e,!0)}function sU(e={}){return vw("y",am,e,!0)}function oU(e={}){return vw("x",om,e)}function aU(e={}){return vw("y",am,e)}function cU(e={}){return rU("x",om,e)}function lU(e={}){return rU("y",am,e)}const uU={ariaLabel:"rule",fill:null,stroke:"currentColor"};class fU extends Me{constructor(t,n={}){const{x:r,y1:i,y2:s,inset:o=0,insetTop:a=o,insetBottom:c=o}=n;super(t,{x:{value:r,scale:"x",optional:!0},y1:{value:i,scale:"y",optional:!0},y2:{value:s,scale:"y",optional:!0}},Rd(n,"x"),uU),this.insetTop=Zt(a),this.insetBottom=Zt(c),Fd(this,n)}render(t,n,r,i,s){const{x:o,y:a}=n,{x:c,y1:l,y2:u}=r,{width:f,height:d,marginTop:h,marginRight:p,marginLeft:g,marginBottom:b}=i,{insetTop:y,insetBottom:m}=this;return le("svg:g",s).call(Ce,this,i,s).call(Ae,this,{x:c&&o},Cn,0).call(v=>v.selectAll().data(t).enter().append("line").call(Fe,this).attr("x1",c?w=>c[w]:(g+f-p)/2).attr("x2",c?w=>c[w]:(g+f-p)/2).attr("y1",l&&!Ai(a)?w=>l[w]+y:h+y).attr("y2",u&&!Ai(a)?a.bandwidth?w=>u[w]+a.bandwidth()-m:w=>u[w]-m:d-b-m).call(Sn,this,r).call(sm,this,r,s)).node()}}class dU extends Me{constructor(t,n={}){const{x1:r,x2:i,y:s,inset:o=0,insetRight:a=o,insetLeft:c=o}=n;super(t,{y:{value:s,scale:"y",optional:!0},x1:{value:r,scale:"x",optional:!0},x2:{value:i,scale:"x",optional:!0}},Rd(n,"y"),uU),this.insetRight=Zt(a),this.insetLeft=Zt(c),Fd(this,n)}render(t,n,r,i,s){const{x:o,y:a}=n,{y:c,x1:l,x2:u}=r,{width:f,height:d,marginTop:h,marginRight:p,marginLeft:g,marginBottom:b}=i,{insetLeft:y,insetRight:m}=this;return le("svg:g",s).call(Ce,this,i,s).call(Ae,this,{y:c&&a},0,Cn).call(v=>v.selectAll().data(t).enter().append("line").call(Fe,this).attr("x1",l&&!Ai(o)?w=>l[w]+y:g+y).attr("x2",u&&!Ai(o)?o.bandwidth?w=>u[w]+o.bandwidth()-m:w=>u[w]-m:f-p-m).attr("y1",c?w=>c[w]:(h+d-b)/2).attr("y2",c?w=>c[w]:(h+d-b)/2).call(Sn,this,r).call(sm,this,r,s)).node()}}function hc(e,t){let{x:n=It,y:r,y1:i,y2:s,...o}=aU(t);return[i,s]=hU(r,i,s),new fU(e,{...o,x:n,y1:i,y2:s})}function pc(e,t){let{y:n=It,x:r,x1:i,x2:s,...o}=oU(t);return[i,s]=hU(r,i,s),new dU(e,{...o,y:n,x1:i,x2:s})}function hU(e,t,n){if(e==null){if(t===void 0){if(n!==void 0)return[0,n]}else if(n===void 0)return[0,t]}else{if(t===void 0)return n===void 0?[0,e]:[e,n];if(n===void 0)return[e,t]}return[t,n]}function bw(e,...t){let n=t.length;for(let r=0,i=!0;r<n;++r)typeof t[r]!="function"&&(i&&(e=e.slice(),i=!1),e.splice(r,2,e[r]+t[r]+e[r+1]),t.splice(r,1),--r,--n);return r=>{let i=e[0];for(let s=0;s<n;++s)i+=t[s](r)+e[s+1];return i}}const $at={ariaLabel:"text",strokeLinejoin:"round",strokeWidth:3,paintOrder:"stroke"},pU="­";class ww extends Me{constructor(t,n={}){const{x:r,y:i,text:s=ca(t)&&d5(t)?It:zr,frameAnchor:o,textAnchor:a=/right$/i.test(o)?"end":/left$/i.test(o)?"start":"middle",lineAnchor:c=/^top/i.test(o)?"top":/^bottom/i.test(o)?"bottom":"middle",lineHeight:l=1,lineWidth:u=1/0,textOverflow:f,monospace:d,fontFamily:h=d?"ui-monospace, monospace":void 0,fontSize:p,fontStyle:g,fontVariant:b,fontWeight:y,rotate:m}=n,[v,w]=cn(m,0),[_,S]=Rat(p);if(super(t,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},fontSize:{value:_,optional:!0},rotate:{value:xst(v),optional:!0},text:{value:s,filter:LT,optional:!0}},n,$at),this.rotate=w,this.textAnchor=Ze(a,"middle"),this.lineAnchor=oi(c,"lineAnchor",["top","middle","bottom"]),this.lineHeight=+l,this.lineWidth=+u,this.textOverflow=yU(f),this.monospace=!!d,this.fontFamily=Zn(h),this.fontSize=S,this.fontStyle=Zn(g),this.fontVariant=Zn(b),this.fontWeight=Zn(y),this.frameAnchor=Jy(o),!(this.lineWidth>=0))throw new Error(`invalid lineWidth: ${u}`);this.splitLines=bU(this),this.clipLine=wU(this)}render(t,n,r,i,s){const{x:o,y:a}=n,{x:c,y:l,rotate:u,text:f,title:d,fontSize:h}=r,{rotate:p}=this,[g,b]=eo(this,i);return le("svg:g",s).call(Ce,this,i,s).call(vU,this,f,i).call(Ae,this,{x:c&&o,y:l&&a}).call(y=>y.selectAll().data(t).enter().append("text").call(Fe,this).call(kat,this,f,d).attr("transform",bw`translate(${c?m=>c[m]:g},${l?m=>l[m]:b})${u?m=>` rotate(${u[m]})`:p?` rotate(${p})`:""}`).call(gt,"font-size",h&&(m=>h[m])).call(Sn,this,r)).node()}}function yU(e){return e==null?null:oi(e,"textOverflow",["clip","ellipsis","clip-start","clip-end","ellipsis-start","ellipsis-middle","ellipsis-end"]).replace(/^(clip|ellipsis)$/,"$1-end")}function kat(e,t,n,r){if(!n)return;const{lineAnchor:i,lineHeight:s,textOverflow:o,splitLines:a,clipLine:c}=t;e.each(function(l){const u=a(Gl(n[l])??"").map(c),f=u.length,d=i==="top"?.71:i==="bottom"?1-f:(164-f*100)/200;if(f>1){let h=0;for(let p=0;p<f;++p){if(++h,!u[p])continue;const g=this.ownerDocument.createElementNS(Pl.svg,"tspan");g.setAttribute("x",0),p===h-1?g.setAttribute("y",`${(d+p)*s}em`):g.setAttribute("dy",`${h*s}em`),g.textContent=u[p],this.appendChild(g),h=0}}else d&&this.setAttribute("y",`${d*s}em`),this.textContent=u[0];if(o&&!r&&u[0]!==n[l]){const h=this.ownerDocument.createElementNS(Pl.svg,"title");h.textContent=n[l],this.appendChild(h)}})}function fd(e,{x:t,y:n,...r}={}){return r.frameAnchor===void 0&&([t,n]=ds(t,n)),new ww(e,{...r,x:t,y:n})}function mU(e,{x:t=It,...n}={}){return new ww(e,lU({...n,x:t}))}function gU(e,{y:t=It,...n}={}){return new ww(e,cU({...n,y:t}))}function vU(e,t,n){gt(e,"text-anchor",t.textAnchor),gt(e,"font-family",t.fontFamily),gt(e,"font-size",t.fontSize),gt(e,"font-style",t.fontStyle),gt(e,"font-variant",t.fontVariant===void 0?Dat(n):t.fontVariant),gt(e,"font-weight",t.fontWeight)}function Dat(e){return e&&(ff(e)||gr(e))?"tabular-nums":void 0}const Oat=new Set(["inherit","initial","revert","unset","xx-small","x-small","small","medium","large","x-large","xx-large","xxx-large","larger","smaller"]);function Rat(e){return e==null||typeof e=="number"?[void 0,e]:typeof e!="string"?[e,void 0]:(e=e.trim().toLowerCase(),Oat.has(e)||/^[+-]?\d*\.?\d+(e[+-]?\d+)?(\w*|%)$/.test(e)?[void 0,e]:[e,void 0])}function Fat(e,t,n){const r=[];let i,s=0;for(const[o,a,c]of Lat(e)){if(i===void 0&&(i=o),s>i&&n(e,i,a)>t&&(r.push(e.slice(i,s)+(e[s-1]===pU?"-":"")),i=o),c){r.push(e.slice(i,a)),i=void 0;continue}s=a}return r}function*Lat(e){let t=0,n=0;const r=e.length;for(;n<r;){let i=1;switch(e[n]){case pU:case"-":++n,yield[t,n,!1],t=n;break;case" ":for(yield[t,n,!1];e[++n]===" ";);t=n;break;case"\r":e[n+1]===`
`&&++i;case`
`:yield[t,n,!0],n+=i,t=n;break;default:++n;break}}yield[t,n,!0]}const Qk={a:56,b:63,c:57,d:63,e:58,f:37,g:62,h:60,i:26,j:26,k:55,l:26,m:88,n:60,o:60,p:62,q:62,r:39,s:54,t:38,u:60,v:55,w:79,x:54,y:55,z:55,A:69,B:67,C:73,D:74,E:61,F:58,G:76,H:75,I:28,J:55,K:67,L:58,M:89,N:75,O:78,P:65,Q:78,R:67,S:65,T:65,U:75,V:69,W:98,X:69,Y:67,Z:67,0:64,1:48,2:62,3:64,4:66,5:63,6:65,7:58,8:65,9:65," ":29,"!":32,'"':49,"'":31,"(":39,")":39,",":31,"-":48,".":31,"/":32,":":31,";":31,"?":52,"‘":31,"’":31,"“":47,"”":47,"…":82};function b3(e,t=0,n=e.length){let r=0;for(let i=t;i<n;i=Ld(e,i))r+=Qk[e[i]]??(SU(e,i)?120:Qk.e);return r}function w3(e,t=0,n=e.length){let r=0;for(let i=t;i<n;i=Ld(e,i))r+=SU(e,i)?200:100;return r}function bU({monospace:e,lineWidth:t,textOverflow:n}){if(n!=null||t==1/0)return s=>s.split(/\r\n?|\n/g);const r=e?w3:b3,i=t*100;return s=>Fat(s,i,r)}function wU({monospace:e,lineWidth:t,textOverflow:n}){if(n==null||t==1/0)return s=>s;const r=e?w3:b3,i=t*100;switch(n){case"clip-start":return s=>Zk(s,i,r,"");case"clip-end":return s=>Kk(s,i,r,"");case"ellipsis-start":return s=>Zk(s,i,r,Df);case"ellipsis-middle":return s=>Bat(s,i,r,Df);case"ellipsis-end":return s=>Kk(s,i,r,Df)}}const Df="…";function dd(e,t,n,r){const i=[];let s=0;for(let o=0,a=0,c=e.length;o<c;o=a){a=Ld(e,o);const l=n(e,o,a);if(s+l>t){for(s+=r;s>t&&o>0;)a=o,o=i.pop(),s-=n(e,o,a);return[o,t-s]}s+=l,i.push(o)}return[-1,0]}function Kk(e,t,n,r){e=e.trim();const i=n(r),[s]=dd(e,t,n,i);return s<0?e:e.slice(0,s).trimEnd()+r}function Bat(e,t,n,r){e=e.trim();const i=n(e);if(i<=t)return e;const s=n(r)/2,[o,a]=dd(e,t/2,n,s),[c]=dd(e,i-t/2-a+s,n,-s);return c<0?r:e.slice(0,o).trimEnd()+r+e.slice(Ld(e,c)).trimStart()}function Zk(e,t,n,r){e=e.trim();const i=n(e);if(i<=t)return e;const s=n(r),[o]=dd(e,i-t+s,n,-s);return o<0?r:r+e.slice(Ld(e,o)).trimStart()}const Qx=/[\p{Combining_Mark}\p{Emoji_Modifier}]+/uy,Jk=new RegExp("\\p{Extended_Pictographic}","uy");function Ld(e,t){return t+=Cat(e,t)?2:1,Pat(e,t)&&(t=Qx.lastIndex),Uat(e,t)?Ld(e,t+1):t}function _U(e,t){return e.charCodeAt(t)<128}function Cat(e,t){const n=e.charCodeAt(t);if(n>=55296&&n<56320){const r=e.charCodeAt(t+1);return r>=56320&&r<57344}return!1}function Uat(e,t){return e.charCodeAt(t)===8205}function Pat(e,t){return _U(e,t)?!1:(Qx.lastIndex=t,Qx.test(e))}function SU(e,t){return _U(e,t)?!1:(Jk.lastIndex=t,Jk.test(e))}const xU={ariaLabel:"vector",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinejoin:"round",strokeLinecap:"round"},IU=3.5,zat=IU*5,EU={draw(e,t,n){const r=t*n/zat;e.moveTo(0,0),e.lineTo(0,-t),e.moveTo(-r,r-t),e.lineTo(0,-t),e.lineTo(r,r-t)}},TU={draw(e,t,n){e.moveTo(-n,0),e.lineTo(0,-t),e.lineTo(n,0)}},jat=new Map([["arrow",EU],["spike",TU]]);function Vat(e){return e&&typeof e.draw=="function"}function Yat(e){if(Vat(e))return e;const t=jat.get(`${e}`.toLowerCase());if(t)return t;throw new Error(`invalid shape: ${e}`)}let _w=class extends Me{constructor(t,n={}){const{x:r,y:i,r:s=IU,length:o,rotate:a,shape:c=EU,anchor:l="middle",frameAnchor:u}=n,[f,d]=cn(o,12),[h,p]=cn(a,0);super(t,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},length:{value:f,scale:"length",optional:!0},rotate:{value:h,optional:!0}},n,xU),this.r=+s,this.length=d,this.rotate=p,this.shape=Yat(c),this.anchor=oi(l,"anchor",["start","middle","end"]),this.frameAnchor=Jy(u)}render(t,n,r,i,s){const{x:o,y:a}=n,{x:c,y:l,length:u,rotate:f}=r,{length:d,rotate:h,anchor:p,shape:g,r:b}=this,[y,m]=eo(this,i);return le("svg:g",s).call(Ce,this,i,s).call(Ae,this,{x:c&&o,y:l&&a}).call(v=>v.selectAll().data(t).enter().append("path").call(Fe,this).attr("transform",bw`translate(${c?w=>c[w]:y},${l?w=>l[w]:m})${f?w=>` rotate(${f[w]})`:h?` rotate(${h})`:""}${p==="start"?"":p==="end"?u?w=>` translate(0,${u[w]})`:` translate(0,${d})`:u?w=>` translate(0,${u[w]/2})`:` translate(0,${d/2})`}`).attr("d",u?w=>{const _=Fo();return g.draw(_,u[w],b),_}:(()=>{const w=Fo();return g.draw(w,d,b),w})()).call(Sn,this,r)).node()}};function AU(e,t={}){let{x:n,y:r,...i}=t;return t.frameAnchor===void 0&&([n,r]=ds(n,r)),new _w(e,{...i,x:n,y:r})}function MU(e,t={}){const{x:n=It,...r}=t;return new _w(e,{...r,x:n})}function NU(e,t={}){const{y:n=It,...r}=t;return new _w(e,{...r,y:n})}function qat(e,t={}){const{shape:n=TU,stroke:r=xU.stroke,strokeWidth:i=1,fill:s=r,fillOpacity:o=.3,anchor:a="start",...c}=t;return AU(e,{...c,shape:n,stroke:r,strokeWidth:i,fill:s,fillOpacity:o,anchor:a})}function Oc(e,t){return arguments.length<2&&!ca(e)&&(t=e,e=null),t===void 0&&(t={}),[e,t]}function Sw({anchor:e}={},t){return e===void 0?t[0]:oi(e,"anchor",t)}function $U(e){return Sw(e,["left","right"])}function kU(e){return Sw(e,["right","left"])}function DU(e){return Sw(e,["bottom","top"])}function OU(e){return Sw(e,["top","bottom"])}function _3(){const[e,t]=Oc(...arguments);return LU("y",$U(t),e,t)}function RU(){const[e,t]=Oc(...arguments);return LU("fy",kU(t),e,t)}function S3(){const[e,t]=Oc(...arguments);return BU("x",DU(t),e,t)}function FU(){const[e,t]=Oc(...arguments);return BU("fx",OU(t),e,t)}function LU(e,t,n,{color:r="currentColor",opacity:i=1,stroke:s=r,strokeOpacity:o=i,strokeWidth:a=1,fill:c=r,fillOpacity:l=i,textAnchor:u,textStroke:f,textStrokeOpacity:d,textStrokeWidth:h,tickSize:p=e==="y"?6:0,tickPadding:g,tickRotate:b,x:y,margin:m,marginTop:v=m===void 0?20:m,marginRight:w=m===void 0?t==="right"?40:0:m,marginBottom:_=m===void 0?20:m,marginLeft:S=m===void 0?t==="left"?40:0:m,label:x,labelAnchor:T,labelArrow:$,labelOffset:I,...A}){return p=Zt(p),g=Zt(g),b=Zt(b),T!==void 0&&(T=oi(T,"labelAnchor",["center","top","bottom"])),$=XU($),ls(p&&!en(s)?Wat(e,t,n,{stroke:s,strokeOpacity:o,strokeWidth:a,tickSize:p,tickPadding:g,tickRotate:b,x:y,...A}):null,en(c)?null:Hat(e,t,n,{fill:c,fillOpacity:l,stroke:f,strokeOpacity:d,strokeWidth:h,textAnchor:u,tickSize:p,tickPadding:g,tickRotate:b,x:y,marginTop:v,marginRight:w,marginBottom:_,marginLeft:S,...A}),!en(c)&&x!==null?fd([],qU({fill:c,fillOpacity:l,...A},function(D,F,E,N,M){const R=N[e],{marginTop:O,marginRight:C,marginBottom:L,marginLeft:P}=e==="y"&&M.inset||M,z=T??(R.bandwidth?"center":"top"),G=I??(t==="right"?C:P)-3;return z==="center"?(this.textAnchor=void 0,this.lineAnchor=t==="right"?"bottom":"top",this.frameAnchor=t,this.rotate=-90):(this.textAnchor=t==="right"?"end":"start",this.lineAnchor=z,this.frameAnchor=`${z}-${t}`,this.rotate=0),this.dy=z==="top"?3-O:z==="bottom"?L-3:0,this.dx=t==="right"?G:-G,this.ariaLabel=`${e}-axis label`,{facets:[[0]],channels:{text:{value:[HU(e,R,{anchor:t,label:x,labelAnchor:z,labelArrow:$})]}}}})):null)}function BU(e,t,n,{color:r="currentColor",opacity:i=1,stroke:s=r,strokeOpacity:o=i,strokeWidth:a=1,fill:c=r,fillOpacity:l=i,textAnchor:u,textStroke:f,textStrokeOpacity:d,textStrokeWidth:h,tickSize:p=e==="x"?6:0,tickPadding:g,tickRotate:b,y,margin:m,marginTop:v=m===void 0?t==="top"?30:0:m,marginRight:w=m===void 0?20:m,marginBottom:_=m===void 0?t==="bottom"?30:0:m,marginLeft:S=m===void 0?20:m,label:x,labelAnchor:T,labelArrow:$,labelOffset:I,...A}){return p=Zt(p),g=Zt(g),b=Zt(b),T!==void 0&&(T=oi(T,"labelAnchor",["center","left","right"])),$=XU($),ls(p&&!en(s)?Gat(e,t,n,{stroke:s,strokeOpacity:o,strokeWidth:a,tickSize:p,tickPadding:g,tickRotate:b,y,...A}):null,en(c)?null:Xat(e,t,n,{fill:c,fillOpacity:l,stroke:f,strokeOpacity:d,strokeWidth:h,textAnchor:u,tickSize:p,tickPadding:g,tickRotate:b,y,marginTop:v,marginRight:w,marginBottom:_,marginLeft:S,...A}),!en(c)&&x!==null?fd([],qU({fill:c,fillOpacity:l,...A},function(D,F,E,N,M){const R=N[e],{marginTop:O,marginRight:C,marginBottom:L,marginLeft:P}=e==="x"&&M.inset||M,z=T??(R.bandwidth?"center":"right"),G=I??(t==="top"?O:L)-3;return z==="center"?(this.frameAnchor=t,this.textAnchor=void 0):(this.frameAnchor=`${t}-${z}`,this.textAnchor=z==="right"?"end":"start"),this.lineAnchor=t,this.dy=t==="top"?-G:G,this.dx=z==="right"?C-3:z==="left"?3-P:0,this.ariaLabel=`${e}-axis label`,{facets:[[0]],channels:{text:{value:[HU(e,R,{anchor:t,label:x,labelAnchor:z,labelArrow:$})]}}}})):null)}function Wat(e,t,n,{strokeWidth:r=1,strokeLinecap:i=null,strokeLinejoin:s=null,facetAnchor:o=t+(e==="y"?"-empty":""),frameAnchor:a=t,tickSize:c,inset:l=0,insetLeft:u=l,insetRight:f=l,dx:d=0,y:h=e==="y"?void 0:null,...p}){return Bd(NU,e,t,`${e}-axis tick`,n,{strokeWidth:r,strokeLinecap:i,strokeLinejoin:s,facetAnchor:o,frameAnchor:a,y:h,...p,dx:t==="left"?+d-Cn+ +u:+d+Cn-f,anchor:"start",length:c,shape:t==="left"?Jat:tct})}function Gat(e,t,n,{strokeWidth:r=1,strokeLinecap:i=null,strokeLinejoin:s=null,facetAnchor:o=t+(e==="x"?"-empty":""),frameAnchor:a=t,tickSize:c,inset:l=0,insetTop:u=l,insetBottom:f=l,dy:d=0,x:h=e==="x"?void 0:null,...p}){return Bd(MU,e,t,`${e}-axis tick`,n,{strokeWidth:r,strokeLinejoin:s,strokeLinecap:i,facetAnchor:o,frameAnchor:a,x:h,...p,dy:t==="bottom"?+d-Cn-f:+d+Cn+ +u,anchor:"start",length:c,shape:t==="bottom"?Kat:Zat})}function Hat(e,t,n,{facetAnchor:r=t+(e==="y"?"-empty":""),frameAnchor:i=t,tickSize:s,tickRotate:o=0,tickPadding:a=Math.max(3,9-s)+(Math.abs(o)>60?4*Math.cos(o*uv):0),text:c,textAnchor:l=Math.abs(o)>60?"middle":t==="left"?"end":"start",lineAnchor:u=o>60?"top":o<-60?"bottom":"middle",fontVariant:f,inset:d=0,insetLeft:h=d,insetRight:p=d,dx:g=0,y:b=e==="y"?void 0:null,...y}){return Bd(gU,e,t,`${e}-axis tick label`,n,{facetAnchor:r,frameAnchor:i,text:c,textAnchor:l,lineAnchor:u,fontVariant:f,rotate:o,y:b,...y,dx:t==="left"?+g-s-a+ +h:+g+ +s+ +a-p},function(m,v,w,_,S){f===void 0&&(this.fontVariant=GU(m)),c===void 0&&(S.text=WU(m,v,w,_,t))})}function Xat(e,t,n,{facetAnchor:r=t+(e==="x"?"-empty":""),frameAnchor:i=t,tickSize:s,tickRotate:o=0,tickPadding:a=Math.max(3,9-s)+(Math.abs(o)>=10?4*Math.cos(o*uv):0),text:c,textAnchor:l=Math.abs(o)>=10?o<0^t==="bottom"?"start":"end":"middle",lineAnchor:u=Math.abs(o)>=10?"middle":t==="bottom"?"top":"bottom",fontVariant:f,inset:d=0,insetTop:h=d,insetBottom:p=d,dy:g=0,x:b=e==="x"?void 0:null,...y}){return Bd(mU,e,t,`${e}-axis tick label`,n,{facetAnchor:r,frameAnchor:i,text:c===void 0?null:c,textAnchor:l,lineAnchor:u,fontVariant:f,rotate:o,x:b,...y,dy:t==="bottom"?+g+ +s+ +a-p:+g-s-a+ +h},function(m,v,w,_,S){f===void 0&&(this.fontVariant=GU(m)),c===void 0&&(S.text=WU(m,v,w,_,t))})}function CU(){const[e,t]=Oc(...arguments);return jU("y",$U(t),e,t)}function UU(){const[e,t]=Oc(...arguments);return jU("fy",kU(t),e,t)}function PU(){const[e,t]=Oc(...arguments);return VU("x",DU(t),e,t)}function zU(){const[e,t]=Oc(...arguments);return VU("fx",OU(t),e,t)}function jU(e,t,n,{y:r=e==="y"?void 0:null,x:i=null,x1:s=t==="left"?i:null,x2:o=t==="right"?i:null,...a}){return Bd(pc,e,t,`${e}-grid`,n,{y:r,x1:s,x2:o,...YU(a)})}function VU(e,t,n,{x:r=e==="x"?void 0:null,y:i=null,y1:s=t==="top"?i:null,y2:o=t==="bottom"?i:null,...a}){return Bd(hc,e,t,`${e}-grid`,n,{x:r,y1:s,y2:o,...YU(a)})}function YU({color:e="currentColor",opacity:t=.1,stroke:n=e,strokeOpacity:r=t,strokeWidth:i=1,...s}){return{stroke:n,strokeOpacity:r,strokeWidth:i,...s}}function qU({fill:e,fillOpacity:t,fontFamily:n,fontSize:r,fontStyle:i,fontVariant:s,fontWeight:o,monospace:a,pointerEvents:c,shapeRendering:l,clip:u=!1},f){return[,e]=Fr(e),[,t]=cn(t),{facet:"super",x:null,y:null,fill:e,fillOpacity:t,fontFamily:n,fontSize:r,fontStyle:i,fontVariant:s,fontWeight:o,monospace:a,pointerEvents:c,shapeRendering:l,clip:u,initializer:f}}function Bd(e,t,n,r,i,s,o){let a;function c(f,d,h,p,g,b){const y=f==null&&(t==="fx"||t==="fy"),{[t]:m}=p;if(!m)throw new Error(`missing scale: ${t}`);const v=m.domain();let{interval:w,ticks:_,tickFormat:S,tickSpacing:x=t==="x"?80:35}=s;if(typeof _=="string"&&QU(m)&&(w=_,_=void 0),_===void 0&&(_=Od(w,m.type)??Qat(m,x)),f==null){if(ca(_))f=Lr(_);else if(uf(_))f=m2(_,...An(v));else if(m.interval){let $=m.interval;if(m.ticks){const[I,A]=An(v),D=(A-I)/$[Xy];$=Tk($,D/_)??$,f=m2($,I,A)}else{f=v;const I=f.length;$=Tk($,I/_)??$,$!==m.interval&&(f=m2($,...An(f)))}if($===m.interval){const I=Math.round(f.length/_);I>1&&(f=f.filter((A,D)=>D%I===0))}}else m.ticks?f=m.ticks(_):f=v;if(!m.ticks&&f.length&&f!==v){const $=new Fy(v);f=f.filter(I=>$.has(I)),f.length||jo(`Warning: the ${t}-axis ticks appear to not align with the scale domain, resulting in no ticks. Try different ticks?`)}t==="y"||t==="x"?d=[oa(f)]:a[t]={scale:t,value:It}}o==null||o.call(this,m,f,_,S,a);const T=Object.fromEntries(Object.entries(a).map(([$,I])=>[$,{...I,value:Gt(f,I.value)}]));return y&&(d=b.filterFacets(f,T)),{data:f,facets:d,channels:T}}const l=Br(s).initializer,u=e(i,Br({...s,initializer:c},l));return i==null?(a=u.channels,u.channels={}):a={},u.ariaLabel=r,u.clip===void 0&&(u.clip=!1),u}function Qat(e,t){const[n,r]=An(e.range());return(r-n)/t}function WU(e,t,n,r,i){return{value:x3(e,t,n,r,i)}}function x3(e,t,n,r,i){return typeof r=="function"?r:r===void 0&&t&&gr(t)?pst(t,i)??Gl:e.tickFormat?e.tickFormat(typeof n=="number"?n:null,r):r===void 0?Gl:typeof r=="string"?(gr(e.domain())?Gy:kd)(r):ni(r)}function m2(e,t,n){return e.range(t,e.offset(e.floor(n)))}const Kat={draw(e,t){e.moveTo(0,0),e.lineTo(0,t)}},Zat={draw(e,t){e.moveTo(0,0),e.lineTo(0,-t)}},Jat={draw(e,t){e.moveTo(0,0),e.lineTo(-t,0)}},tct={draw(e,t){e.moveTo(0,0),e.lineTo(t,0)}};function GU(e){return e.bandwidth&&!e.interval?void 0:"tabular-nums"}function ect(e){return Math.sign(ud(e.domain()))*Math.sign(ud(e.range()))}function HU(e,t,{anchor:n,label:r=t.label,labelAnchor:i,labelArrow:s}={}){if(!(r==null||r.inferred&&QU(t)&&/^(date|time|year)$/i.test(r))){if(r=String(r),s==="auto"&&(s=(!t.bandwidth||t.interval)&&!/[↑↓→←]/.test(r)),!s)return r;if(s===!0){const o=ect(t);o&&(s=/x$/.test(e)||i==="center"?/x$/.test(e)===o<0?"left":"right":o<0?"up":"down")}switch(s){case"left":return`← ${r}`;case"right":return`${r} →`;case"up":return n==="right"?`${r} ↑`:`↑ ${r}`;case"down":return n==="right"?`${r} ↓`:`↓ ${r}`}return r}}function XU(e="auto"){return en(e)?!1:typeof e=="boolean"?e:oi(e,"labelArrow",["auto","up","right","down","left"])}function QU(e){return gr(e.domain())}function t6(e,t){if(t==null)return t;const n=e(t);if(!n)throw new Error(`scale not found: ${t}`);return n}function nct(e,{opacity:t,...n}={}){if(!ru(e)&&!H5(e))throw new Error(`swatches legend requires ordinal or threshold color scale (not ${e.type})`);return KU(e,n,(r,i,s,o)=>r.append("svg").attr("width",s).attr("height",o).attr("fill",i.scale).attr("fill-opacity",cn(t)[1]).append("rect").attr("width","100%").attr("height","100%"))}function rct(e,{fill:t=(l=>(l=e.hint)==null?void 0:l.fill)()!==void 0?e.hint.fill:"none",fillOpacity:n=1,stroke:r=(u=>(u=e.hint)==null?void 0:u.stroke)()!==void 0?e.hint.stroke:en(t)?"currentColor":"none",strokeOpacity:i=1,strokeWidth:s=1.5,r:o=4.5,...a}={},c){const[f,d]=Fr(t),[h,p]=Fr(r),g=t6(c,f),b=t6(c,h),y=o*o*Math.PI;return n=cn(n)[1],i=cn(i)[1],s=cn(s)[1],KU(e,a,(m,v,w,_)=>m.append("svg").attr("viewBox","-8 -8 16 16").attr("width",w).attr("height",_).attr("fill",f==="color"?S=>g.scale(S):d).attr("fill-opacity",n).attr("stroke",h==="color"?S=>b.scale(S):p).attr("stroke-opacity",i).attr("stroke-width",s).append("path").attr("d",S=>{const x=Fo();return e.scale(S).draw(x,y),x}))}function KU(e,t={},n){let{columns:r,tickFormat:i,fontVariant:s=J5(e),swatchSize:o=15,swatchWidth:a=o,swatchHeight:c=o,marginLeft:l=0,className:u,style:f,width:d}=t;const h=hw(t);u=c3(u),i=x3(e.scale,e.domain,void 0,i);const p=le("div",h).attr("class",`${u}-swatches ${u}-swatches-${r!=null?"columns":"wrap"}`);let g;return r!=null?(g=`.${u}-swatches-columns .${u}-swatch {
  display: flex;
  align-items: center;
  break-inside: avoid;
  padding-bottom: 1px;
}
.${u}-swatches-columns .${u}-swatch::before {
  flex-shrink: 0;
}
.${u}-swatches-columns .${u}-swatch-label {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}`,p.style("columns",r).selectAll().data(e.domain).enter().append("div").attr("class",`${u}-swatch`).call(n,e,a,c).call(b=>b.append("div").attr("class",`${u}-swatch-label`).attr("title",i).text(i))):(g=`.${u}-swatches-wrap {
  display: flex;
  align-items: center;
  min-height: 33px;
  flex-wrap: wrap;
}
.${u}-swatches-wrap .${u}-swatch {
  display: inline-flex;
  align-items: center;
  margin-right: 1em;
}`,p.selectAll().data(e.domain).enter().append("span").attr("class",`${u}-swatch`).call(n,e,a,c).append(function(){return this.ownerDocument.createTextNode(i.apply(this,arguments))})),p.call(b=>b.insert("style","*").text(`.${u}-swatches {
  font-family: system-ui, sans-serif;
  font-size: 10px;
  margin-bottom: 0.5em;
}
.${u}-swatch > svg {
  margin-right: 0.5em;
  overflow: visible;
}
${g}`)).style("margin-left",l?`${+l}px`:null).style("width",d===void 0?null:`${+d}px`).style("font-variant",Ze(s,"normal")).call(l3,f).node()}const fv=new Map([["symbol",rct],["color",ZU],["opacity",oct]]);function ict(e={}){for(const[t,n]of fv){const r=e[t];if(Tl(r)){const i=hw(e);let s;if(t==="symbol"){const{fill:o,stroke:a=o===void 0&&Tl(e.color)?"color":void 0}=e;s={fill:o,stroke:a}}return n(Hx(t,r,s),I3(i,r,e),o=>Tl(e[o])?Hx(o,e[o]):null)}}throw new Error("unknown legend type; no scale found")}function sct(e,t,n={}){return(r,i)=>{if(!fv.has(r))throw new Error(`unknown legend type: ${r}`);if(r in e)return fv.get(r)(e[r],I3(t,n[r],i),s=>e[s])}}function I3({className:e,...t},{label:n,ticks:r,tickFormat:i}={},s){return $st(s,{className:e,...t},{label:n,ticks:r,tickFormat:i})}function ZU(e,{legend:t=!0,...n}){if(t===!0&&(t=e.type==="ordinal"?"swatches":"ramp"),e.domain!==void 0)switch(`${t}`.toLowerCase()){case"swatches":return nct(e,n);case"ramp":return Eat(e,n);default:throw new Error(`unknown legend type: ${t}`)}}function oct({type:e,interpolate:t,...n},{legend:r=!0,color:i=Ri(0,0,0),...s}){if(!t)throw new Error(`${e} opacity scales are not supported`);if(r===!0&&(r="ramp"),`${r}`.toLowerCase()!=="ramp")throw new Error(`${r} opacity legends are not supported`);return ZU({type:e,...n,interpolate:act(i)},{legend:r,...s})}function act(e){const{r:t,g:n,b:r}=Ri(e)||Ri(0,0,0);return i=>`rgba(${t},${n},${r},${i})`}function cct(e,t,n){const r=[];for(const[i,s]of fv){const o=n[i];if(o!=null&&o.legend&&i in e){const a=s(e[i],I3(t,e[i],o),c=>e[c]);a!=null&&r.push(a)}}return r}const lct={ariaLabel:"frame",fill:"none",stroke:"currentColor",clip:!1},uct={ariaLabel:"frame",fill:null,stroke:"currentColor",strokeLinecap:"square",clip:!1};class JU extends Me{constructor(t={}){const{anchor:n=null,inset:r=0,insetTop:i=r,insetRight:s=r,insetBottom:o=r,insetLeft:a=r,rx:c,ry:l}=t;super(cp,void 0,t,n==null?lct:uct),this.anchor=o5(n,"anchor",["top","right","bottom","left"]),this.insetTop=Zt(i),this.insetRight=Zt(s),this.insetBottom=Zt(o),this.insetLeft=Zt(a),this.rx=Zt(c),this.ry=Zt(l)}render(t,n,r,i,s){const{marginTop:o,marginRight:a,marginBottom:c,marginLeft:l,width:u,height:f}=i,{anchor:d,insetTop:h,insetRight:p,insetBottom:g,insetLeft:b,rx:y,ry:m}=this,v=l+b,w=u-a-p,_=o+h,S=f-c-g;return le(d?"svg:line":"svg:rect",s).datum(0).call(Ce,this,i,s).call(Fe,this).call(Sn,this,r).call(Ae,this,{}).call(d==="left"?x=>x.attr("x1",v).attr("x2",v).attr("y1",_).attr("y2",S):d==="right"?x=>x.attr("x1",w).attr("x2",w).attr("y1",_).attr("y2",S):d==="top"?x=>x.attr("x1",v).attr("x2",w).attr("y1",_).attr("y2",_):d==="bottom"?x=>x.attr("x1",v).attr("x2",w).attr("y1",S).attr("y2",S):x=>x.attr("x",v).attr("y",_).attr("width",w-v).attr("height",S-_).attr("rx",y).attr("ry",m)).node()}}function E3(e){return new JU(e)}const g2={ariaLabel:"tip",fill:"white",stroke:"currentColor"},fct=new Set(["geometry","href","src","ariaLabel","scales"]);class tP extends Me{constructor(t,n={}){n.tip&&(n={...n,tip:!1}),n.title===void 0&&ca(t)&&d5(t)&&(n={...n,title:It});const{x:r,y:i,x1:s,x2:o,y1:a,y2:c,anchor:l,monospace:u,fontFamily:f=u?"ui-monospace, monospace":void 0,fontSize:d,fontStyle:h,fontVariant:p,fontWeight:g,lineHeight:b=1,lineWidth:y=20,frameAnchor:m,format:v,textAnchor:w="start",textOverflow:_,textPadding:S=8,title:x,pointerSize:T=12,pathFilter:$="drop-shadow(0 3px 4px rgba(0,0,0,0.2))"}=n;super(t,{x:{value:s!=null&&o!=null?null:r,scale:"x",optional:!0},y:{value:a!=null&&c!=null?null:i,scale:"y",optional:!0},x1:{value:s,scale:"x",optional:o==null},y1:{value:a,scale:"y",optional:c==null},x2:{value:o,scale:"x",optional:s==null},y2:{value:c,scale:"y",optional:a==null},title:{value:x,optional:!0}},n,g2),this.anchor=h5(l,"anchor"),this.previousAnchor=this.anchor??"top-left",this.frameAnchor=Jy(m),this.textAnchor=Ze(w,"middle"),this.textPadding=+S,this.pointerSize=+T,this.pathFilter=Zn($),this.lineHeight=+b,this.lineWidth=+y,this.textOverflow=yU(_),this.monospace=!!u,this.fontFamily=Zn(f),this.fontSize=Zt(d),this.fontStyle=Zn(h),this.fontVariant=Zn(p),this.fontWeight=Zn(g);for(const I in g2)I in this.channels&&(this[I]=g2[I]);this.splitLines=bU(this),this.clipLine=wU(this),this.format={...v}}render(t,n,r,i,s){const o=this,{x:a,y:c,fx:l,fy:u}=n,{ownerSVGElement:f,document:d}=s,{anchor:h,monospace:p,lineHeight:g,lineWidth:b}=this,{textPadding:y,pointerSize:m,pathFilter:v}=this,{marginTop:w,marginLeft:_}=i,{x1:S,y1:x,x2:T,y2:$,x:I=S??T,y:A=x??$}=r,D=l?l(t.fx)-_:0,F=u?u(t.fy)-w:0,[E,N]=eo(this,i),M=K5(r,E),R=Z5(r,N),O=p?w3:b3,C=O(Df);let L,P;"title"in r?(L=r.channels,P=mct):(L=yct.call(this,r,n),P=gct);const z=le("svg:g",s).call(Ce,this,i,s).call(vU,this).call(Ae,this,{x:I&&a,y:A&&c}).call(rt=>rt.selectAll().data(t).enter().append("g").attr("transform",Z=>`translate(${Math.round(M(Z))},${Math.round(R(Z))})`).call(Fe,this).call(Z=>Z.append("path").attr("filter",v)).call(Z=>Z.append("text").each(function(q){const K=xe(this);this.setAttribute("fill","currentColor"),this.setAttribute("fill-opacity",1),this.setAttribute("stroke","none");const Y=P.call(o,q,t,L,n,r);if(typeof Y=="string")for(const et of o.splitLines(Y))G(K,{value:o.clipLine(et)});else{const et=new Set;for(const st of Y){const{label:j=""}=st;j&&et.has(j)||(et.add(j),G(K,st))}}})));function G(rt,{label:Z,value:q,color:K,opacity:Y}){Z??(Z=""),q??(q="");const et=K!=null||Y!=null;let st,j=b*100;const[Tt]=dd(Z,j,O,C);if(Tt>=0)Z=Z.slice(0,Tt).trimEnd()+Df,st=q.trim(),q="";else{(Z||!q&&!et)&&(q=" "+q);const[jt]=dd(q,j-O(Z),O,C);jt>=0&&(q=q.slice(0,jt).trimEnd()+Df,st=q.trim())}const ut=rt.append("tspan").attr("x",0).attr("dy",`${g}em`).text("​");Z&&ut.append("tspan").attr("font-weight","bold").text(Z),q&&ut.append(()=>d.createTextNode(q)),et&&ut.append("tspan").text(" ■").attr("fill",K).attr("fill-opacity",Y).style("user-select","none"),st&&ut.append("title").text(st)}function Q(){const{width:rt,height:Z}=i.facet??i;z.selectChildren().each(function(q){let{x:K,width:Y,height:et}=this.getBBox();Y=Math.round(Y),et=Math.round(et);let st=h;if(st===void 0){st=o.previousAnchor;const ut=M(q)+D,jt=R(q)+F,qt=ut+Y+y*2<rt,ct=ut-Y-y*2>0,ue=jt+et+m+y*2+7<Z,ci=jt-et-m-y*2>0,yn=(/-left$/.test(st)?qt||!ct:qt&&!ct)?"left":"right",ps=(/^top-/.test(st)?ue||!ci:ue&&!ci)?"top":"bottom";st=o.previousAnchor=`${ps}-${yn}`}const j=this.firstChild,Tt=this.lastChild;if(j.setAttribute("d",pct(st,m,y,Y,et)),K)for(const ut of Tt.childNodes)ut.setAttribute("x",-K);Tt.setAttribute("y",`${+dct(st,Tt.childNodes.length,g).toFixed(6)}em`),Tt.setAttribute("transform",`translate(${hct(st,m,y,Y,et)})`)}),z.attr("visibility",null)}return t.length&&(z.attr("visibility","hidden"),f.isConnected?Promise.resolve().then(Q):typeof requestAnimationFrame<"u"&&requestAnimationFrame(Q)),z.node()}}function eP(e,{x:t,y:n,...r}={}){return r.frameAnchor===void 0&&([t,n]=ds(t,n)),new tP(e,{...r,x:t,y:n})}function dct(e,t,n){return/^top(?:-|$)/.test(e)?.94-n:-.29-t*n}function hct(e,t,n,r,i){switch(e){case"middle":return[-r/2,i/2];case"top-left":return[n,t+n];case"top":return[-r/2,t/2+n];case"top-right":return[-r-n,t+n];case"right":return[-t/2-r-n,i/2];case"bottom-left":return[n,-t-n];case"bottom":return[-r/2,-t/2-n];case"bottom-right":return[-r-n,-t-n];case"left":return[n+t/2,i/2]}}function pct(e,t,n,r,i){const s=r+n*2,o=i+n*2;switch(e){case"middle":return`M${-s/2},${-o/2}h${s}v${o}h${-s}z`;case"top-left":return`M0,0l${t},${t}h${s-t}v${o}h${-s}z`;case"top":return`M0,0l${t/2},${t/2}h${(s-t)/2}v${o}h${-s}v${-o}h${(s-t)/2}z`;case"top-right":return`M0,0l${-t},${t}h${t-s}v${o}h${s}z`;case"right":return`M0,0l${-t/2},${-t/2}v${t/2-o/2}h${-s}v${o}h${s}v${t/2-o/2}z`;case"bottom-left":return`M0,0l${t},${-t}h${s-t}v${-o}h${-s}z`;case"bottom":return`M0,0l${t/2},${-t/2}h${(s-t)/2}v${-o}h${-s}v${o}h${(s-t)/2}z`;case"bottom-right":return`M0,0l${-t},${-t}h${t-s}v${-o}h${s}z`;case"left":return`M0,0l${t/2},${-t/2}v${t/2-o/2}h${s}v${o}h${-s}v${t/2-o/2}z`}}function yct({channels:e},t){var i,s;const n={};let r=this.format;r=e6(r,e,"x"),r=e6(r,e,"y"),this.format=r;for(const o in r){const a=r[o];if(!(a===null||a===!1))if(o==="fx"||o==="fy")n[o]=!0;else{const c=Yx(e,o);c&&(n[o]=c)}}for(const o in e){if(o in n||o in r||fct.has(o))continue;const a=Yx(e,o);a&&(n[o]=a)}this.facet&&(t.fx&&!("fx"in r)&&(n.fx=!0),t.fy&&!("fy"in r)&&(n.fy=!0));for(const o in n){const a=this.format[o];if(typeof a=="string"){const c=((i=n[o])==null?void 0:i.value)??((s=t[o])==null?void 0:s.domain())??[];this.format[o]=(gr(c)?Gy:kd)(a)}else if(a===void 0||a===!0){const c=t[o];this.format[o]=c!=null&&c.bandwidth?x3(c,c.domain()):Gl}}return n}function e6(e,t,n){if(!(n in e))return e;const r=`${n}1`,i=`${n}2`;if((r in e||!(r in t))&&(i in e||!(i in t)))return e;const s=Object.entries(e),o=e[n];return s.splice(s.findIndex(([a])=>a===n)+1,0,[r,o],[i,o]),Object.fromEntries(s)}function mct(e,t,{title:n}){return Gl(n.value[e],e)}function*gct(e,t,n,r,i){for(const s in n){if(s==="fx"||s==="fy"){yield{label:dv(r,n,s),value:this.format[s](t[s],e)};continue}if(s==="x1"&&"x2"in n||s==="y1"&&"y2"in n)continue;const o=n[s];if(s==="x2"&&"x1"in n)yield{label:r6(r,n,"x"),value:n6(this.format.x2,n.x1,o,e)};else if(s==="y2"&&"y1"in n)yield{label:r6(r,n,"y"),value:n6(this.format.y2,n.y1,o,e)};else{const a=o.value[e],c=o.scale;if(!yr(a)&&c==null)continue;yield{label:dv(r,n,s),value:this.format[s](a,e),color:c==="color"?i[s][e]:null,opacity:c==="opacity"?i[s][e]:null}}}}function n6(e,t,n,r){var i;return(i=n.hint)!=null&&i.length?`${e(n.value[r]-t.value[r],r)}`:`${e(t.value[r],r)}–${e(n.value[r],r)}`}function r6(e,t,n){const r=dv(e,t,`${n}1`,n),i=dv(e,t,`${n}2`,n);return r===i?r:`${r}–${i}`}function dv(e,t,n,r=n){const i=t[n],s=e[(i==null?void 0:i.scale)??n];return String((s==null?void 0:s.label)??(i==null?void 0:i.label)??r)}function T3(e={}){var C;const{facet:t,style:n,title:r,subtitle:i,caption:s,ariaLabel:o,ariaDescription:a}=e,c=c3(e.className),l=e.marks===void 0?[]:s6(e.marks);l.push(...Ect(l));const u=xct(t,e),f=new Map;for(const L of l){const P=o6(L,u,e);P&&f.set(L,P)}const d=new Map;u&&fh(d,[u],e),fh(d,f,e);const h=s6(Tct(l,d,e));for(const L of h){const P=o6(L,u,e);P&&f.set(L,P)}l.unshift(...h);let p=fat(d,e);if(p!==void 0){const L=u?p2(p,u):void 0;for(const z of l){if(z.facet===null||z.facet==="super")continue;const G=f.get(z);G!==void 0&&(G.facetsIndex=z.fx!=null||z.fy!=null?p2(p,G):L)}const P=new Set;for(const{facetsIndex:z}of f.values())z==null||z.forEach((G,Q)=>{(G==null?void 0:G.length)>0&&P.add(Q)});p.forEach(0<P.size&&P.size<p.length?(z,G)=>z.empty=!P.has(G):z=>z.empty=!1);for(const z of l)if(z.facet==="exclude"){const G=f.get(z);G!==void 0&&(G.facetsIndex=pat(G.facetsIndex))}}for(const L of qe.keys())Tl(e[L])&&L!=="fx"&&L!=="fy"&&d.set(L,[]);const g=new Map;for(const L of l){if(g.has(L))throw new Error("duplicate mark; each mark must be unique");const{facetsIndex:P,channels:z}=f.get(L)??{},{data:G,facets:Q,channels:rt}=L.initialize(P,z,e);A3(rt,e),g.set(L,{data:G,facets:Q,channels:rt})}const b=Gx(fh(d,g,e),e),y=lat(b,l,e);nat(b,y);const m=zk(b),{fx:v,fy:w}=m,_=v||w?Y5(b,y):y,S=v||w?Oct(m,y):y,x=hw(e),T=x.document,$=Bb("svg").call(T.documentElement);let I=$;x.ownerSVGElement=$,x.className=c,x.projection=mot(e,_),x.filterFacets=(L,P)=>p2(p,{channels:P,groups:p3(L,P)}),x.getMarkState=L=>{const P=g.get(L),z=f.get(L);return{...P,channels:{...P.channels,...z==null?void 0:z.channels}}},x.dispatchValue=L=>{I.value!==L&&(I.value=L,I.dispatchEvent(new Event("input",{bubbles:!0})))};const A=new Set;for(const[L,P]of g)if(L.initializer!=null){const z=L.facet==="super"?S:_,G=L.initializer(P.data,P.facets,P.channels,m,z,x);if(G.data!==void 0&&(P.data=G.data),G.facets!==void 0&&(P.facets=G.facets),G.channels!==void 0){const{fx:Q,fy:rt,...Z}=G.channels;Sct(Z),Object.assign(P.channels,Z);for(const q of Object.values(Z)){const{scale:K}=q;K!=null&&!Dst(qe.get(K))&&(nP(q,e),A.add(K))}(Q!=null||rt!=null)&&f.set(L,!0)}}if(A.size){const L=new Map;fh(L,g,e,Q=>A.has(Q)),fh(d,g,e,Q=>A.has(Q));const P=Dct(Gx(L,e),b),{scales:z,...G}=zk(P);Object.assign(b,P),Object.assign(m,G),Object.assign(m.scales,z)}let D,F;p!==void 0&&(D={x:v==null?void 0:v.domain(),y:w==null?void 0:w.domain()},p=dat(p,D),F=hat(v,w,y));for(const[L,P]of g)P.values=L.scale(P.channels,m,x);const{width:E,height:N}=y;xe($).attr("class",c).attr("fill","currentColor").attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("text-anchor","middle").attr("width",E).attr("height",N).attr("viewBox",`0 0 ${E} ${N}`).attr("aria-label",o).attr("aria-description",a).call(L=>L.append("style").text(`.${c} {
  display: block;
  background: white;
  height: auto;
  height: intrinsic;
  max-width: 100%;
}
.${c} text,
.${c} tspan {
  white-space: pre;
}`)).call(l3,n);for(const L of l){const{channels:P,values:z,facets:G}=g.get(L);if(p===void 0||L.facet==="super"){let Q=null;if(G&&(Q=G[0],Q=L.filter(Q,P,z),Q.length===0))continue;const rt=L.render(Q,m,z,S,x);if(rt==null)continue;$.appendChild(rt)}else{let Q;for(const rt of p){if(!(((C=L.facetAnchor)==null?void 0:C.call(L,p,D,rt))??!rt.empty))continue;let Z=null;if(G){const K=f.has(L);if(Z=G[K?rt.i:0],Z=L.filter(Z,P,z),Z.length===0)continue;!K&&Z===G[0]&&(Z=Al(Z)),Z.fx=rt.x,Z.fy=rt.y,Z.fi=rt.i}const q=L.render(Z,m,z,_,x);if(q!=null){(Q??(Q=xe($).append("g"))).append(()=>q).datum(rt);for(const K of["aria-label","aria-description","aria-hidden","transform"])q.hasAttribute(K)&&(Q.attr(K,q.getAttribute(K)),q.removeAttribute(K))}}Q==null||Q.selectChildren().attr("transform",F)}}const M=cct(b,x,e),{figure:R=r!=null||i!=null||s!=null||M.length>0}=e;R&&(I=T.createElement("figure"),I.className=`${c}-figure`,I.style.maxWidth="initial",r!=null&&I.append(i6(T,r,"h2")),i!=null&&I.append(i6(T,i,"h3")),I.append(...M,$),s!=null&&I.append(vct(T,s))),I.scale=cat(m.scales),I.legend=sct(b,x,e);const O=oot();return O>0&&xe($).append("text").attr("x",E).attr("y",20).attr("dy","-1em").attr("text-anchor","end").attr("font-family","initial").text("⚠️").append("title").text(`${O.toLocaleString("en-US")} warning${O===1?"":"s"}. Please check the console.`),I}function i6(e,t,n){if(t.ownerDocument)return t;const r=e.createElement(n);return r.append(t),r}function vct(e,t){const n=e.createElement("figcaption");return n.append(t),n}function bct({marks:e=[],...t}={}){return T3({...t,marks:[...e,this]})}Me.prototype.plot=bct;function s6(e){return e.flat(1/0).filter(t=>t!=null).map(wct)}function wct(e){return typeof e.render=="function"?e:new _ct(e)}class _ct extends Me{constructor(t){if(typeof t!="function")throw new TypeError("invalid mark; missing render function");super(),this.render=t}render(){}}function A3(e,t){for(const n in e)nP(e[n],t);return e}function nP(e,t){const{scale:n,transform:r=!0}=e;if(n==null||!r)return;const{type:i,percent:s,interval:o,transform:a=s?c=>c*100:f5(o,i)}=t[n]??{};a!=null&&(e.value=ke(e.value,a),e.transform=!1)}function Sct(e){for(const t in e)_5(t,e[t])}function fh(e,t,n,r=vst){var i,s;for(const{channels:o}of t.values())for(const a in o){const c=o[a],{scale:l}=c;if(l!=null&&r(l))if(l==="projection"){if(!bot(n)){const u=((i=n.x)==null?void 0:i.domain)===void 0,f=((s=n.y)==null?void 0:s.domain)===void 0;if(u||f){const[d,h]=_ot(c);u&&v2(e,"x",d),f&&v2(e,"y",h)}}}else v2(e,l,c)}return e}function v2(e,t,n){const r=e.get(t);r!==void 0?r.push(n):e.set(t,[n])}function xct(e,t){if(e==null)return;const{x:n,y:r}=e;if(n==null&&r==null)return;const i=Lr(e.data);if(i==null)throw new Error("missing facet data");const s={};n!=null&&(s.fx=ny(i,{value:n,scale:"fx"})),r!=null&&(s.fy=ny(i,{value:r,scale:"fy"})),A3(s,t);const o=p3(i,s);return{channels:s,groups:o,data:e.data}}function o6(e,t,n){var c;if(e.facet===null||e.facet==="super")return;const{fx:r,fy:i}=e;if(r!=null||i!=null){const l=Lr(e.data??r??i);if(l===void 0)throw new Error(`missing facet data in ${e.ariaLabel}`);if(l===null)return;const u={};return r!=null&&(u.fx=ny(l,{value:r,scale:"fx"})),i!=null&&(u.fy=ny(l,{value:i,scale:"fy"})),A3(u,n),{channels:u,groups:p3(l,u)}}if(t===void 0)return;const{channels:s,groups:o,data:a}=t;if(e.facet!=="auto"||e.data===a)return{channels:s,groups:o};a.length>0&&(o.size>1||o.size===1&&s.fx&&s.fy&&[...o][0][1].size>1)&&((c=Lr(e.data))==null?void 0:c.length)===a.length&&jo(`Warning: the ${e.ariaLabel} mark appears to use faceted data, but isn’t faceted. The mark data has the same length as the facet data and the mark facet option is "auto", but the mark data and facet data are distinct. If this mark should be faceted, set the mark facet option to true; otherwise, suppress this warning by setting the mark facet option to false.`)}function Ict(e,t={}){return Br({...t,x:null,y:null},(n,r,i,s,o,a)=>a.getMarkState(e))}function Ect(e){const t=[];for(const n of e){let r=n.tip;if(r){r===!0?r={}:typeof r=="string"&&(r={pointer:r});let{pointer:i}=r;i=/^x$/i.test(i)?g3:/^y$/i.test(i)?v3:m3,r=i(Ict(n,r)),r.title=null;const s=eP(n.data,r);s.facet=n.facet,s.facetAnchor=n.facetAnchor,t.push(s)}}return t}function Tct(e,t,n){let{projection:r,x:i={},y:s={},fx:o={},fy:a={},axis:c,grid:l,facet:u={},facet:{axis:f=c,grid:d}=u,x:{axis:h=c,grid:p=h===null?null:l}=i,y:{axis:g=c,grid:b=g===null?null:l}=s,fx:{axis:y=f,grid:m=y===null?null:d}=o,fy:{axis:v=f,grid:w=v===null?null:d}=a}=n;(r||!Tl(i)&&!a6("x",e))&&(h=p=null),(r||!Tl(s)&&!a6("y",e))&&(g=b=null),t.has("fx")||(y=m=null),t.has("fy")||(v=w=null),h===void 0&&(h=!d0(e,"x")),g===void 0&&(g=!d0(e,"y")),y===void 0&&(y=!d0(e,"fx")),v===void 0&&(v=!d0(e,"fy")),h===!0&&(h="bottom"),g===!0&&(g="left"),y===!0&&(y=h==="top"||h===null?"bottom":"top"),v===!0&&(v=g==="right"||g===null?"left":"right");const _=[];return f0(_,w,UU,a),u0(_,v,RU,"right","left",u,a),f0(_,m,zU,o),u0(_,y,FU,"top","bottom",u,o),f0(_,b,CU,s),u0(_,g,_3,"left","right",n,s),f0(_,p,PU,i),u0(_,h,S3,"bottom","top",n,i),_}function u0(e,t,n,r,i,s,o){if(!t)return;const a=Act(t);o=Mct(a?r:t,s,o);const{line:c}=o;(n===_3||n===S3)&&c&&!ld(c)&&e.push(E3(Nct(o))),e.push(n(o)),a&&e.push(n({...o,anchor:i,label:null}))}function f0(e,t,n,r){!t||ld(t)||e.push(n($ct(t,r)))}function Act(e){return/^\s*both\s*$/i.test(e)}function Mct(e,t,{line:n=t.line,ticks:r,tickSize:i,tickSpacing:s,tickPadding:o,tickFormat:a,tickRotate:c,fontVariant:l,ariaLabel:u,ariaDescription:f,label:d=t.label,labelAnchor:h,labelArrow:p=t.labelArrow,labelOffset:g}){return{anchor:e,line:n,ticks:r,tickSize:i,tickSpacing:s,tickPadding:o,tickFormat:a,tickRotate:c,fontVariant:l,ariaLabel:u,ariaDescription:f,label:d,labelAnchor:h,labelArrow:p,labelOffset:g}}function Nct(e){const{anchor:t,line:n}=e;return{anchor:t,facetAnchor:t+"-empty",stroke:n===!0?void 0:n}}function $ct(e,{stroke:t=Zy(e)?e:void 0,ticks:n=kct(e)?e:void 0,tickSpacing:r,ariaLabel:i,ariaDescription:s}){return{stroke:t,ticks:n,tickSpacing:r,ariaLabel:i,ariaDescription:s}}function kct(e){switch(typeof e){case"number":return!0;case"string":return!Zy(e)}return ca(e)||typeof(e==null?void 0:e.range)=="function"}function d0(e,t){const n=`${t}-axis `;return e.some(r=>{var i;return(i=r.ariaLabel)==null?void 0:i.startsWith(n)})}function a6(e,t){for(const n of t)for(const r in n.channels){const{scale:i}=n.channels[r];if(i===e||i==="projection")return!0}return!1}function Dct(e,t){for(const n in e){const r=e[n],i=t[n];r.label===void 0&&i&&(r.label=i.label)}return e}function Oct({fx:e,fy:t},n){const{marginTop:r,marginRight:i,marginBottom:s,marginLeft:o,width:a,height:c}=h3(n),l=e&&c6(e),u=t&&c6(t);return{marginTop:t?u[0]:r,marginRight:e?a-l[1]:i,marginBottom:t?c-u[1]:s,marginLeft:e?l[0]:o,inset:{marginTop:n.marginTop,marginRight:n.marginRight,marginBottom:n.marginBottom,marginLeft:n.marginLeft},width:a,height:c}}function c6(e){const t=e.domain();let n=e(t[0]),r=e(t[t.length-1]);return r<n&&([n,r]=[r,n]),[n,r+e.bandwidth()]}const Rct=new Map([["basis",jit],["basis-closed",Vit],["basis-open",Yit],["bundle",qit],["bump-x",kit],["bump-y",Dit],["cardinal",Wit],["cardinal-closed",Git],["cardinal-open",Hit],["catmull-rom",Xit],["catmull-rom-closed",Qit],["catmull-rom-open",Kit],["linear",Hy],["linear-closed",Zit],["monotone-x",Jit],["monotone-y",tst],["natural",est],["step",nst],["step-after",ist],["step-before",rst]]);function M3(e=Hy,t){if(typeof e=="function")return e;const n=Rct.get(`${e}`.toLowerCase());if(!n)throw new Error(`unknown curve: ${e}`);if(t!==void 0){if("beta"in n)return n.beta(t);if("tension"in n)return n.tension(t);if("alpha"in n)return n.alpha(t)}return n}function rP(e=hd,t){return typeof e!="function"&&`${e}`.toLowerCase()==="auto"?hd:M3(e,t)}function hd(e){return Hy(e)}function Fa(e={y:"count"},t={}){[e,t]=D3(e,t);const{x:n,y:r}=t;return k3(hv(n,t,It),null,null,r,e,om(t))}function La(e={x:"count"},t={}){[e,t]=D3(e,t);const{x:n,y:r}=t;return k3(null,hv(r,t,It),n,null,e,am(t))}function al(e={fill:"count"},t={}){[e,t]=D3(e,t);const{x:n,y:r}=Fct(t);return k3(n,r,null,null,e,om(am(t)))}function iP(e,t,n={}){if((n==null?void 0:n.interval)==null)return n;const{reduce:r=i3}=n,i={filter:null};return n[t]!=null&&(i[t]=r),n[`${t}1`]!=null&&(i[`${t}1`]=r),n[`${t}2`]!=null&&(i[`${t}2`]=r),e(i,n)}function N3(e={}){return iP(Fa,"y",Rd(e,"x"))}function $3(e={}){return iP(La,"x",Rd(e,"y"))}function k3(e,t,n,r,{data:i=r3,filter:s=cv,sort:o,reverse:a,...c}={},l={}){e=l6(e),t=l6(t),c=Lct(c,l),i=cP(i,It),o=o==null?void 0:oP("sort",o,l),s=s==null?void 0:aP("filter",s,l),n!=null&&Ua(c,"x","x1","x2")&&(n=null),r!=null&&Ua(c,"y","y1","y2")&&(r=null);const[u,f]=Sr(e),[d,h]=Sr(e),[p,g]=Sr(t),[b,y]=Sr(t),[m,v]=n!=null?[n,"x"]:r!=null?[r,"y"]:[],[w,_]=Sr(m),{x:S,y:x,z:T,fill:$,stroke:I,x1:A,x2:D,y1:F,y2:E,domain:N,cumulative:M,thresholds:R,interval:O,...C}=l,[L,P]=Sr(T),[z]=Fr($),[G]=Fr(I),[Q,rt]=Sr(z),[Z,q]=Sr(G);return{..."z"in l&&{z:L||T},..."fill"in l&&{fill:Q||$},..."stroke"in l&&{stroke:Z||I},...to(C,(K,Y,et)=>{const st=av(Gt(K,m),et==null?void 0:et[v]),j=Gt(K,T),Tt=Gt(K,z),ut=Gt(K,G),jt=n3(c,{z:j,fill:Tt,stroke:ut}),qt=[],ct=[],ue=st&&_([]),ci=j&&P([]),yn=Tt&&rt([]),ps=ut&&q([]),lu=e&&f([]),nt=e&&h([]),kt=t&&g([]),se=t&&y([]),oe=Uct(e==null?void 0:e(K),t==null?void 0:t(K));let un=0;for(const Ui of c)Ui.initialize(K);o&&o.initialize(K),s&&s.initialize(K);for(const Ui of Y){const Uc=[];for(const li of c)li.scope("facet",Ui);o&&o.scope("facet",Ui),s&&s.scope("facet",Ui);for(const[li,ma]of kf(Ui,jt))for(const[Sm,Pc]of kf(ma,st))for(const[ui,zc]of oe(Pc))if(!(s&&!s.reduce(ui,zc))){Uc.push(un++),ct.push(i.reduceIndex(ui,K,zc)),st&&ue.push(Sm),j&&ci.push(jt===j?li:j[(ui.length>0?ui:Pc)[0]]),Tt&&yn.push(jt===Tt?li:Tt[(ui.length>0?ui:Pc)[0]]),ut&&ps.push(jt===ut?li:ut[(ui.length>0?ui:Pc)[0]]),lu&&(lu.push(zc.x1),nt.push(zc.x2)),kt&&(kt.push(zc.y1),se.push(zc.y2));for(const rV of c)rV.reduce(ui,zc);o&&o.reduce(ui)}qt.push(Uc)}return b5(qt,o,a),{data:ct,facets:qt}}),...!Ua(c,"x")&&(u?{x1:u,x2:d,x:ov(u,d)}:{x:S,x1:A,x2:D}),...!Ua(c,"y")&&(p?{y1:p,y2:b,y:ov(p,b)}:{y:x,y1:F,y2:E}),...w&&{[v]:w},...Object.fromEntries(c.map(({name:K,output:Y})=>[K,Y]))}}function D3({cumulative:e,domain:t,thresholds:n,interval:r,...i},s){return[i,{cumulative:e,domain:t,thresholds:n,interval:r,...s}]}function hv(e,{cumulative:t,domain:n,thresholds:r,interval:i},s){return e={...Ky(e)},e.domain===void 0&&(e.domain=n),e.cumulative===void 0&&(e.cumulative=t),e.thresholds===void 0&&(e.thresholds=r),e.interval===void 0&&(e.interval=i),e.value===void 0&&(e.value=s),e.thresholds=sP(e.thresholds,e.interval),e}function Fct(e){let{x:t,y:n}=e;return t=hv(t,e),n=hv(n,e),[t.value,n.value]=ds(t.value,n.value),{x:t,y:n}}function l6(e){if(e==null)return;const{value:t,cumulative:n,domain:r=An,thresholds:i}=e,s=o=>{let a=Gt(o,t),c;if(gr(a)||Cct(i)){a=ke(a,s5,Float64Array);let[u,f]=typeof r=="function"?r(a):r,d=typeof i=="function"&&!uf(i)?i(a,u,f):i;typeof d=="number"&&(d=iB(u,f,d)),uf(d)&&(r===An&&(u=d.floor(u),f=d.offset(d.floor(f))),d=d.range(u,d.offset(f))),c=d}else{a=Mr(a);let[u,f]=typeof r=="function"?r(a):r,d=typeof i=="function"&&!uf(i)?i(a,u,f):i;if(typeof d=="number")if(r===An){let h=zp(u,f,d);if(isFinite(h))if(h>0){let p=Math.round(u/h),g=Math.round(f/h);p*h<=u||--p,g*h>f||++g;let b=g-p+1;d=new Float64Array(b);for(let y=0;y<b;++y)d[y]=(p+y)*h}else if(h<0){h=-h;let p=Math.round(u*h),g=Math.round(f*h);p/h<=u||--p,g/h>f||++g;let b=g-p+1;d=new Float64Array(b);for(let y=0;y<b;++y)d[y]=(p+y)/h}else d=[u];else d=[u]}else d=cc(u,f,d);else uf(d)&&(r===An&&(u=d.floor(u),f=d.offset(d.floor(f))),d=d.range(u,d.offset(f)));c=d}const l=[];if(c.length===1)l.push([c[0],c[0]]);else for(let u=1;u<c.length;++u)l.push([c[u-1],c[u]]);return l.bin=(n<0?zct:n>0?Pct:O3)(l,c,a),l};return s.label=aa(t),s}function sP(e,t,n=u6){if(e===void 0)return t===void 0?n:Od(t);if(typeof e=="string"){switch(e.toLowerCase()){case"freedman-diaconis":return mQ;case"scott":return aF;case"sturges":return sT;case"auto":return u6}return CT(e)}return e}function Lct(e,t){return JT(e,t,oP)}function oP(e,t,n){return t3(e,t,n,aP)}function aP(e,t,n){return e3(e,t,n,cP)}function cP(e,t){return dw(e,t,Bct)}function Bct(e){switch(`${e}`.toLowerCase()){case"x":return jct;case"x1":return Yct;case"x2":return qct;case"y":return Vct;case"y1":return Wct;case"y2":return Gct}throw new Error(`invalid bin reduce: ${e}`)}function u6(e,t,n){return Math.min(200,aF(e,t,n))}function Cct(e){return Sst(e)||ca(e)&&gr(e)}function Uct(e,t){return e&&t?function*(n){const r=e.bin(n);for(const[i,[s,o]]of e.entries()){const a=t.bin(r[i]);for(const[c,[l,u]]of t.entries())yield[a[c],{x1:s,y1:l,x2:o,y2:u}]}}:e?function*(n){const r=e.bin(n);for(const[i,[s,o]]of e.entries())yield[r[i],{x1:s,x2:o}]}:function*(n){const r=t.bin(n);for(const[i,[s,o]]of t.entries())yield[r[i],{y1:s,y2:o}]}}function O3(e,t,n){return t=Mr(t),r=>{var s;const i=e.map(()=>[]);for(const o of r)(s=i[Db(t,n[o])-1])==null||s.push(o);return i}}function Pct(e,t,n){const r=O3(e,t,n);return i=>{const s=r(i);for(let o=1,a=s.length;o<a;++o){const c=s[o-1],l=s[o];for(const u of c)l.push(u)}return s}}function zct(e,t,n){const r=O3(e,t,n);return i=>{const s=r(i);for(let o=s.length-2;o>=0;--o){const a=s[o+1],c=s[o];for(const l of a)c.push(l)}return s}}function lP(e,t){const n=(+e+ +t)/2;return e instanceof Date?new Date(n):n}const jct={reduceIndex(e,t,{x1:n,x2:r}){return lP(n,r)}},Vct={reduceIndex(e,t,{y1:n,y2:r}){return lP(n,r)}},Yct={reduceIndex(e,t,{x1:n}){return n}},qct={reduceIndex(e,t,{x2:n}){return n}},Wct={reduceIndex(e,t,{y1:n}){return n}},Gct={reduceIndex(e,t,{y2:n}){return n}};function R3(e={}){return a5(e)?e:{...e,x:It}}function F3(e={}){return c5(e)?e:{...e,y:It}}function Hct(e,t){if(t.length===1)return{data:e,facets:t};const n=e.length,r=new Uint8Array(n);let i=0;for(const a of t)for(const c of a)r[c]&&++i,r[c]=1;if(i===0)return{data:e,facets:t};e=Jp(e);const s=e[r5]=new Uint32Array(n+i);t=t.map(a=>Jp(a,Uint32Array));let o=n;r.fill(0);for(const a of t)for(let c=0,l=a.length;c<l;++c){const u=a[c];r[u]?(a[c]=o,e[o]=e[u],s[o]=u,++o):s[u]=u,r[u]=1}return{data:e,facets:t}}function uP(e={},t={}){arguments.length===1&&([e,t]=Cd(e));const{y1:n,y:r=n,x:i,...s}=t,[o,a,c,l]=Ud(r,i,"y","x",e,s);return{...o,y1:n,y:a,x1:c,x2:l,x:ov(c,l)}}function Xct(e={},t={}){arguments.length===1&&([e,t]=Cd(e));const{y1:n,y:r=n,x:i}=t,[s,o,a]=Ud(r,i,"y","x",e,t);return{...s,y1:n,y:o,x:a}}function Qct(e={},t={}){arguments.length===1&&([e,t]=Cd(e));const{y1:n,y:r=n,x:i}=t,[s,o,,a]=Ud(r,i,"y","x",e,t);return{...s,y1:n,y:o,x:a}}function fP(e={},t={}){arguments.length===1&&([e,t]=Cd(e));const{x1:n,x:r=n,y:i,...s}=t,[o,a,c,l]=Ud(r,i,"x","y",e,s);return{...o,x1:n,x:a,y1:c,y2:l,y:ov(c,l)}}function Kct(e={},t={}){arguments.length===1&&([e,t]=Cd(e));const{x1:n,x:r=n,y:i}=t,[s,o,a]=Ud(r,i,"x","y",e,t);return{...s,x1:n,x:o,y:a}}function Zct(e={},t={}){arguments.length===1&&([e,t]=Cd(e));const{x1:n,x:r=n,y:i}=t,[s,o,,a]=Ud(r,i,"x","y",e,t);return{...s,x1:n,x:o,y:a}}function L3({x:e,x1:t,x2:n,...r}={}){return r=Rd(r,"y"),t===void 0&&n===void 0?uP({x:e,...r}):([t,n]=l5(e,t,n),{...r,x1:t,x2:n})}function B3({y:e,y1:t,y2:n,...r}={}){return r=Rd(r,"x"),t===void 0&&n===void 0?fP({y:e,...r}):([t,n]=l5(e,t,n),{...r,y1:t,y2:n})}function Cd(e){const{offset:t,order:n,reverse:r,...i}=e;return[{offset:t,order:n,reverse:r},i]}const Jct={length:!0};function Ud(e,t=UT,n,r,{offset:i,order:s,reverse:o},a){if(t===null)throw new Error(`stack requires ${r}`);const c=kc(a),[l,u]=Sr(e),[f,d]=Xr(t),[h,p]=Xr(t);return f.hint=h.hint=Jct,i=tlt(i),s=rlt(s,i,r),[to(a,(g,b,y)=>{({data:g,facets:b}=Hct(g,b));const m=e==null?void 0:u(av(Gt(g,e),y==null?void 0:y[n])),v=Gt(g,t,Float64Array),w=Gt(g,c),_=s&&s(g,m,v,w),S=g.length,x=d(new Float64Array(S)),T=p(new Float64Array(S)),$=[];for(const I of b){const A=m?Array.from(sa(I,D=>m[D]).values()):[I];if(_)for(const D of A)D.sort(_);for(const D of A){let F=0,E=0;o&&D.reverse();for(const N of D){const M=v[N];M<0?F=T[N]=(x[N]=F)+M:M>0?E=T[N]=(x[N]=E)+M:T[N]=x[N]=E}}$.push(A)}return i&&i($,x,T,w),{data:g,facets:b}}),l,f,h]}function tlt(e){if(e!=null){if(typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"expand":case"normalize":return elt;case"center":case"silhouette":return nlt;case"wiggle":return hP}throw new Error(`unknown offset: ${e}`)}}function dP(e,t){let n=0,r=0;for(const i of e){const s=t[i];s<n&&(n=s),s>r&&(r=s)}return[n,r]}function elt(e,t,n){for(const r of e)for(const i of r){const[s,o]=dP(i,n);for(const a of i){const c=1/(o-s||1);t[a]=c*(t[a]-s),n[a]=c*(n[a]-s)}}}function nlt(e,t,n){for(const r of e){for(const i of r){const[s,o]=dP(i,n);for(const a of i){const c=(o+s)/2;t[a]-=c,n[a]-=c}}pP(r,t,n)}yP(e,t,n)}function hP(e,t,n,r){for(const i of e){const s=new Ul;let o=0;for(const a of i){let c=-1;const l=a.map(h=>Math.abs(n[h]-t[h])),u=a.map(h=>{c=r?r[h]:++c;const p=n[h]-t[h],g=s.has(c)?p-s.get(c):0;return s.set(c,p),g}),f=[0,...aQ(u)];for(const h of a)t[h]+=o,n[h]+=o;const d=Hs(l);d&&(o-=Hs(l,(h,p)=>(u[p]/2+f[p])*h)/d)}pP(i,t,n)}yP(e,t,n)}function pP(e,t,n){const r=On(e,i=>On(i,s=>t[s]));for(const i of e)for(const s of i)t[s]-=r,n[s]-=r}function yP(e,t,n){const r=e.length;if(r===1)return;const i=e.map(a=>a.flat()),s=i.map(a=>(On(a,c=>t[c])+Be(a,c=>n[c]))/2),o=On(s);for(let a=0;a<r;a++){const c=o-s[a];for(const l of i[a])t[l]+=c,n[l]+=c}}function rlt(e,t,n){if(e===void 0&&t===hP)return f6(Fi);if(e!=null){if(typeof e=="string"){const r=e.startsWith("-"),i=r?iv:Fi;switch((r?e.slice(1):e).toLowerCase()){case"value":case n:return ilt(i);case"z":return slt(i);case"sum":return olt(i);case"appearance":return alt(i);case"inside-out":return f6(i)}return d6(i5(e))}if(typeof e=="function")return(e.length===1?d6:clt)(e);if(Array.isArray(e))return llt(e);throw new Error(`invalid order: ${e}`)}}function ilt(e){return(t,n,r)=>(i,s)=>e(r[i],r[s])}function slt(e){return(t,n,r,i)=>(s,o)=>e(i[s],i[o])}function olt(e){return xw(e,(t,n,r,i)=>iT(oa(t),s=>Hs(s,o=>r[o]),s=>i[s]))}function alt(e){return xw(e,(t,n,r,i)=>iT(oa(t),s=>n[oT(s,o=>r[o])],s=>i[s]))}function f6(e){return xw(e,(t,n,r,i)=>{const s=oa(t),o=iT(s,f=>n[oT(f,d=>r[d])],f=>i[f]),a=Af(s,f=>Hs(f,d=>r[d]),f=>i[f]),c=[],l=[];let u=0;for(const f of o)u<0?(u+=a.get(f),c.push(f)):(u-=a.get(f),l.push(f));return l.reverse().concat(c)})}function d6(e){return t=>{const n=Gt(t,e);return(r,i)=>Fi(n[r],n[i])}}function clt(e){return t=>(n,r)=>e(t[n],t[r])}function llt(e){return xw(Fi,()=>e)}function xw(e,t){return(n,r,i,s)=>{if(!s)throw new Error("missing channel: z");const o=new Ul(t(n,r,i,s).map((a,c)=>[a,c]));return(a,c)=>e(o.get(s[a]),o.get(s[c]))}}const ult={ariaLabel:"area",strokeWidth:1,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class Iw extends Me{constructor(t,n={}){const{x1:r,y1:i,x2:s,y2:o,z:a,curve:c,tension:l}=n;super(t,{x1:{value:r,scale:"x"},y1:{value:i,scale:"y"},x2:{value:s,scale:"x",optional:!0},y2:{value:o,scale:"y",optional:!0},z:{value:kc(n),optional:!0}},n,ult),this.z=a,this.curve=M3(c,l)}filter(t){return t}render(t,n,r,i,s){const{x1:o,y1:a,x2:c=o,y2:l=a}=r;return le("svg:g",s).call(Ce,this,i,s).call(Ae,this,n,0,0).call(u=>u.selectAll().data(T5(t,[o,a,c,l],this,r)).enter().append("path").call(Fe,this).call(lv,this,r).attr("d",kT().curve(this.curve).defined(f=>f>=0).x0(f=>o[f]).y0(f=>a[f]).x1(f=>c[f]).y1(f=>l[f]))).node()}}function flt(e,t){return t===void 0?pd(e,{x:Qy,y:Zp}):new Iw(e,t)}function iy(e,t){const{y:n=zr,...r}=$3(t);return new Iw(e,L3(R3({...r,y1:n,y2:void 0})))}function pd(e,t){const{x:n=zr,...r}=N3(t);return new Iw(e,B3(F3({...r,x1:n,x2:void 0})))}const dlt={ariaLabel:"link",fill:"none",stroke:"currentColor",strokeMiterlimit:1};class mP extends Me{constructor(t,n={}){const{x1:r,y1:i,x2:s,y2:o,curve:a,tension:c}=n;super(t,{x1:{value:r,scale:"x"},y1:{value:i,scale:"y"},x2:{value:s,scale:"x",optional:!0},y2:{value:o,scale:"y",optional:!0}},n,dlt),this.curve=rP(a,c),Fd(this,n)}project(t,n,r){this.curve!==hd&&super.project(t,n,r)}render(t,n,r,i,s){const{x1:o,y1:a,x2:c=o,y2:l=a}=r,{curve:u}=this;return le("svg:g",s).call(Ce,this,i,s).call(Ae,this,n).call(f=>f.selectAll().data(t).enter().append("path").call(Fe,this).attr("d",u===hd&&s.projection?hlt(s.projection,o,a,c,l):d=>{const h=Fo(),p=u(h);return p.lineStart(),p.point(o[d],a[d]),p.point(c[d],l[d]),p.lineEnd(),h}).call(Sn,this,r).call(sm,this,r,s)).node()}}function hlt(e,t,n,r,i){const s=Nc(e);return t=Mr(t),n=Mr(n),r=Mr(r),i=Mr(i),o=>s({type:"LineString",coordinates:[[t[o],n[o]],[r[o],i[o]]]})}function gP(e,{x:t,x1:n,x2:r,y:i,y1:s,y2:o,...a}={}){return[n,r]=pv(t,n,r),[s,o]=pv(i,s,o),new mP(e,{...a,x1:n,x2:r,y1:s,y2:o})}function pv(e,t,n){if(e===void 0){if(t===void 0){if(n!==void 0)return[n]}else if(n===void 0)return[t]}else{if(t===void 0)return n===void 0?[e]:[e,n];if(n===void 0)return[e,t]}return[t,n]}const plt={ariaLabel:"arrow",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeMiterlimit:1,strokeWidth:1.5};class vP extends Me{constructor(t,n={}){const{x1:r,y1:i,x2:s,y2:o,bend:a=0,headAngle:c=60,headLength:l=8,inset:u=0,insetStart:f=u,insetEnd:d=u,sweep:h}=n;super(t,{x1:{value:r,scale:"x"},y1:{value:i,scale:"y"},x2:{value:s,scale:"x",optional:!0},y2:{value:o,scale:"y",optional:!0}},n,plt),this.bend=a===!0?22.5:Math.max(-90,Math.min(90,a)),this.headAngle=+c,this.headLength=+l,this.insetStart=+f,this.insetEnd=+d,this.sweep=ylt(h)}render(t,n,r,i,s){const{x1:o,y1:a,x2:c=o,y2:l=a,SW:u}=r,{strokeWidth:f,bend:d,headAngle:h,headLength:p,insetStart:g,insetEnd:b}=this,y=u?w=>u[w]:ni(f===void 0?1:f),m=h*uv/2,v=p/1.5;return le("svg:g",s).call(Ce,this,i,s).call(Ae,this,n).call(w=>w.selectAll().data(t).enter().append("path").call(Fe,this).attr("d",_=>{let S=o[_],x=a[_],T=c[_],$=l[_];const I=Math.hypot(T-S,$-x);if(I<=g+b)return null;let A=Math.atan2($-x,T-S);const D=Math.min(v*y(_),I/3),F=this.sweep(S,x,T,$)*d*uv,E=Math.hypot(I/Math.tan(F),I)/2;if(g||b)if(E<1e5){const Q=Math.sign(F),[rt,Z]=mlt([S,x],[T,$],E,Q);if(g&&([S,x]=h6([rt,Z,E],[S,x,g],-Q*Math.sign(g))),b){const[q,K]=h6([rt,Z,E],[T,$,b],Q*Math.sign(b));A+=Math.atan2(K-Z,q-rt)-Math.atan2($-Z,T-rt),T=q,$=K}}else{const Q=T-S,rt=$-x,Z=Math.hypot(Q,rt);g&&(S+=Q/Z*g,x+=rt/Z*g),b&&(T-=Q/Z*b,$-=rt/Z*b)}const N=A+F,M=N+m,R=N-m,O=T-D*Math.cos(M),C=$-D*Math.sin(M),L=T-D*Math.cos(R),P=$-D*Math.sin(R),z=E<1e5?`A${E},${E} 0,0,${F>0?1:0} `:"L",G=D?`M${O},${C}L${T},${$}L${L},${P}`:"";return`M${S},${x}${z}${T},${$}${G}`}).call(Sn,this,r)).node()}}function ylt(e=1){if(typeof e=="number")return ni(Math.sign(e));if(typeof e=="function")return(t,n,r,i)=>Math.sign(e(t,n,r,i));switch(oi(e,"sweep",["+x","-x","+y","-y"])){case"+x":return(t,n,r)=>He(t,r);case"-x":return(t,n,r)=>Cl(t,r);case"+y":return(t,n,r,i)=>He(n,i);case"-y":return(t,n,r,i)=>Cl(n,i)}}function mlt([e,t],[n,r],i,s){const o=n-e,a=r-t,c=Math.hypot(o,a),l=s*Math.sqrt(i*i-c*c/4)/c;return[(e+n)/2-a*l,(t+r)/2+o*l]}function h6([e,t,n],[r,i,s],o){const a=r-e,c=i-t,l=Math.hypot(a,c),u=(a*a+c*c-s*s+n*n)/(2*l),f=o*Math.sqrt(n*n-u*u);return[e+(a*u+c*f)/l,t+(c*u-a*f)/l]}function glt(e,{x:t,x1:n,x2:r,y:i,y1:s,y2:o,...a}={}){return[n,r]=pv(t,n,r),[s,o]=pv(i,s,o),new vP(e,{...a,x1:n,x2:r,y1:s,y2:o})}class C3 extends Me{constructor(t,n,r={},i){super(t,n,r,i);const{inset:s=0,insetTop:o=s,insetRight:a=s,insetBottom:c=s,insetLeft:l=s,rx:u,ry:f}=r;this.insetTop=Zt(o),this.insetRight=Zt(a),this.insetBottom=Zt(c),this.insetLeft=Zt(l),this.rx=Ze(u,"auto"),this.ry=Ze(f,"auto")}render(t,n,r,i,s){const{rx:o,ry:a}=this;return le("svg:g",s).call(Ce,this,i,s).call(this._transform,this,n).call(c=>c.selectAll().data(t).enter().append("rect").call(Fe,this).attr("x",this._x(n,r,i)).attr("width",this._width(n,r,i)).attr("y",this._y(n,r,i)).attr("height",this._height(n,r,i)).call(gt,"rx",o).call(gt,"ry",a).call(Sn,this,r)).node()}_x(t,{x:n},{marginLeft:r}){const{insetLeft:i}=this;return n?s=>n[s]+i:r+i}_y(t,{y:n},{marginTop:r}){const{insetTop:i}=this;return n?s=>n[s]+i:r+i}_width({x:t},{x:n},{marginRight:r,marginLeft:i,width:s}){const{insetLeft:o,insetRight:a}=this,c=n&&t?t.bandwidth():s-r-i;return Math.max(0,c-o-a)}_height({y:t},{y:n},{marginTop:r,marginBottom:i,height:s}){const{insetTop:o,insetBottom:a}=this,c=n&&t?t.bandwidth():s-r-i;return Math.max(0,c-o-a)}}const bP={ariaLabel:"bar"};class wP extends C3{constructor(t,n={}){const{x1:r,x2:i,y:s}=n;super(t,{x1:{value:r,scale:"x"},x2:{value:i,scale:"x"},y:{value:s,scale:"y",type:"band",optional:!0}},n,bP)}_transform(t,n,{x:r}){t.call(Ae,n,{x:r},0,0)}_x({x:t},{x1:n,x2:r},{marginLeft:i}){const{insetLeft:s}=this;return Ai(t)?i+s:o=>Math.min(n[o],r[o])+s}_width({x:t},{x1:n,x2:r},{marginRight:i,marginLeft:s,width:o}){const{insetLeft:a,insetRight:c}=this;return Ai(t)?o-i-s-a-c:l=>Math.max(0,Math.abs(r[l]-n[l])-a-c)}}class _P extends C3{constructor(t,n={}){const{x:r,y1:i,y2:s}=n;super(t,{y1:{value:i,scale:"y"},y2:{value:s,scale:"y"},x:{value:r,scale:"x",type:"band",optional:!0}},n,bP)}_transform(t,n,{y:r}){t.call(Ae,n,{y:r},0,0)}_y({y:t},{y1:n,y2:r},{marginTop:i}){const{insetTop:s}=this;return Ai(t)?i+s:o=>Math.min(n[o],r[o])+s}_height({y:t},{y1:n,y2:r},{marginTop:i,marginBottom:s,height:o}){const{insetTop:a,insetBottom:c}=this;return Ai(t)?o-i-s-a-c:l=>Math.max(0,Math.abs(r[l]-n[l])-a-c)}}function gl(e,t={}){return aw(t)||(t={...t,y:zr,x2:It}),new wP(e,L3(oU(R3(t))))}function vl(e,t={}){return aw(t)||(t={...t,x:zr,y2:It}),new _P(e,B3(aU(F3(t))))}const vlt={ariaLabel:"cell"};class Ew extends C3{constructor(t,{x:n,y:r,...i}={}){super(t,{x:{value:n,scale:"x",type:"band",optional:!0},y:{value:r,scale:"y",type:"band",optional:!0}},i,vlt)}_transform(t,n){t.call(Ae,n,{},0,0)}}function df(e,{x:t,y:n,...r}={}){return[t,n]=ds(t,n),new Ew(e,{...r,x:t,y:n})}function blt(e,{x:t=zr,fill:n,stroke:r,...i}={}){return n===void 0&&Fr(r)[0]===void 0&&(n=It),new Ew(e,{...i,x:t,fill:n,stroke:r})}function wlt(e,{y:t=zr,fill:n,stroke:r,...i}={}){return n===void 0&&Fr(r)[0]===void 0&&(n=It),new Ew(e,{...i,y:t,fill:n,stroke:r})}const _lt={ariaLabel:"dot",fill:"none",stroke:"currentColor",strokeWidth:1.5};function U3(e){return e.sort===void 0&&e.reverse===void 0?g5({channel:"-r"},e):e}class Tw extends Me{constructor(t,n={}){const{x:r,y:i,r:s,rotate:o,symbol:a=Kp,frameAnchor:c}=n,[l,u]=cn(o,0),[f,d]=Lst(a),[h,p]=cn(s,f==null?3:4.5);super(t,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},r:{value:h,scale:"r",filter:zo,optional:!0},rotate:{value:l,optional:!0},symbol:{value:f,scale:"auto",optional:!0}},U3(n),_lt),this.r=p,this.rotate=u,this.symbol=d,this.frameAnchor=Jy(c);const{channels:g}=this,{symbol:b}=g;if(b){const{fill:y,stroke:m}=g;b.hint={fill:y?y.value===b.value?"color":"currentColor":this.fill??"currentColor",stroke:m?m.value===b.value?"color":"currentColor":this.stroke??"none"}}}render(t,n,r,i,s){const{x:o,y:a}=n,{x:c,y:l,r:u,rotate:f,symbol:d}=r,{r:h,rotate:p,symbol:g}=this,[b,y]=eo(this,i),m=g===Kp,v=u?void 0:h*h*Math.PI;return sw(h)&&(t=[]),le("svg:g",s).call(Ce,this,i,s).call(Ae,this,{x:c&&o,y:l&&a}).call(w=>w.selectAll().data(t).enter().append(m?"circle":"path").call(Fe,this).call(m?_=>{_.attr("cx",c?S=>c[S]:b).attr("cy",l?S=>l[S]:y).attr("r",u?S=>u[S]:h)}:_=>{_.attr("transform",bw`translate(${c?S=>c[S]:b},${l?S=>l[S]:y})${f?S=>` rotate(${f[S]})`:p?` rotate(${p})`:""}`).attr("d",u&&d?S=>{const x=Fo();return d[S].draw(x,u[S]*u[S]*Math.PI),x}:u?S=>{const x=Fo();return g.draw(x,u[S]*u[S]*Math.PI),x}:d?S=>{const x=Fo();return d[S].draw(x,v),x}:(()=>{const S=Fo();return g.draw(S,v),S})())}).call(Sn,this,r)).node()}}function Rc(e,{x:t,y:n,...r}={}){return r.frameAnchor===void 0&&([t,n]=ds(t,n)),new Tw(e,{...r,x:t,y:n})}function Slt(e,{x:t=It,...n}={}){return new Tw(e,lU({...n,x:t}))}function xlt(e,{y:t=It,...n}={}){return new Tw(e,cU({...n,y:t}))}function Ilt(e,t){return Rc(e,{...t,symbol:"circle"})}function Elt(e,t){return Rc(e,{...t,symbol:"hexagon"})}const Tlt={ariaLabel:"line",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class Aw extends Me{constructor(t,n={}){const{x:r,y:i,z:s,curve:o,tension:a}=n;super(t,{x:{value:r,scale:"x"},y:{value:i,scale:"y"},z:{value:kc(n),optional:!0}},n,Tlt),this.z=s,this.curve=rP(o,a),Fd(this,n)}filter(t){return t}project(t,n,r){this.curve!==hd&&super.project(t,n,r)}render(t,n,r,i,s){const{x:o,y:a}=r,{curve:c}=this;return le("svg:g",s).call(Ce,this,i,s).call(Ae,this,n).call(l=>l.selectAll().data(T5(t,[o,a],this,r)).enter().append("path").call(Fe,this).call(lv,this,r).call(Nat,this,r,s).attr("d",c===hd&&s.projection?Alt(s.projection,o,a):TC().curve(c).defined(u=>u>=0).x(u=>o[u]).y(u=>a[u]))).node()}}function Alt(e,t,n){const r=Nc(e);return t=Mr(t),n=Mr(n),i=>{let s=[];const o=[s];for(const a of i)a===-1?(s=[],o.push(s)):s.push([t[a],n[a]]);return r({type:"MultiLineString",coordinates:o})}}function P3(e,{x:t,y:n,...r}={}){return[t,n]=ds(t,n),new Aw(e,{...r,x:t,y:n})}function sy(e,{x:t=It,y:n=zr,...r}={}){return new Aw(e,$3({...r,x:t,y:n}))}function oy(e,{x:t=zr,y:n=It,...r}={}){return new Aw(e,N3({...r,x:t,y:n}))}const Mlt={ariaLabel:"rect"};class Mw extends Me{constructor(t,n={}){const{x1:r,y1:i,x2:s,y2:o,inset:a=0,insetTop:c=a,insetRight:l=a,insetBottom:u=a,insetLeft:f=a,rx:d,ry:h}=n;super(t,{x1:{value:r,scale:"x",optional:!0},y1:{value:i,scale:"y",optional:!0},x2:{value:s,scale:"x",optional:!0},y2:{value:o,scale:"y",optional:!0}},n,Mlt),this.insetTop=Zt(c),this.insetRight=Zt(l),this.insetBottom=Zt(u),this.insetLeft=Zt(f),this.rx=Ze(d,"auto"),this.ry=Ze(h,"auto")}render(t,n,r,i,s){const{x:o,y:a}=n,{x1:c,y1:l,x2:u,y2:f}=r,{marginTop:d,marginRight:h,marginBottom:p,marginLeft:g,width:b,height:y}=i,{projection:m}=s,{insetTop:v,insetRight:w,insetBottom:_,insetLeft:S,rx:x,ry:T}=this;return le("svg:g",s).call(Ce,this,i,s).call(Ae,this,{x:c&&u&&o,y:l&&f&&a},0,0).call($=>$.selectAll().data(t).enter().append("rect").call(Fe,this).attr("x",c&&u&&(m||!Ai(o))?I=>Math.min(c[I],u[I])+S:g+S).attr("y",l&&f&&(m||!Ai(a))?I=>Math.min(l[I],f[I])+v:d+v).attr("width",c&&u&&(m||!Ai(o))?I=>Math.max(0,Math.abs(u[I]-c[I])-S-w):b-h-g-w-S).attr("height",l&&f&&(m||!Ai(a))?I=>Math.max(0,Math.abs(l[I]-f[I])-v-_):y-d-p-v-_).call(gt,"rx",x).call(gt,"ry",T).call(Sn,this,r)).node()}}function z3(e,t){return new Mw(e,iU(sU(t)))}function yv(e,t={}){return aw(t)||(t={...t,y:zr,x2:It,interval:1}),new Mw(e,L3(sU(R3(t))))}function mv(e,t={}){return aw(t)||(t={...t,x:zr,y2:It,interval:1}),new Mw(e,B3(iU(F3(t))))}function SP(e,t){t=$lt(t);const{x:n,y:r,color:i,size:s}=t,o=h0(e,n),a=h0(e,r),c=h0(e,i),l=h0(e,s);let{fx:u,fy:f,x:{value:d,reduce:h,zero:p,...g},y:{value:b,reduce:y,zero:m,...v},color:{value:w,color:_,reduce:S},size:{value:x,reduce:T},mark:$}=t;if(h===void 0&&(h=y==null&&d==null&&x==null&&b!=null?"count":null),y===void 0&&(y=h==null&&b==null&&x==null&&d!=null?"count":null),T===void 0&&x==null&&S==null&&h==null&&y==null&&(d==null||Ke(o))&&(b==null||Ke(a))&&(T="count"),p===void 0&&(p=p0(h)?!0:void 0),m===void 0&&(m=p0(y)?!0:void 0),d==null&&b==null)throw new Error("must specify x or y");if(h!=null&&b==null)throw new Error("reducing x requires y");if(y!=null&&d==null)throw new Error("reducing y requires x");$===void 0&&($=x!=null||T!=null?"dot":p0(h)||p0(y)||S!=null?"bar":d!=null&&b!=null?Ke(o)||Ke(a)||h==null&&y==null&&!dh(o)&&!dh(a)?"dot":"line":d!=null||b!=null?"rule":null);let I,A,D;switch($){case"dot":D=Rc,A="stroke";break;case"line":D=o&&a||h!=null||y!=null?m||y!=null||o&&dh(o)?oy:p||h!=null||a&&dh(a)?sy:P3:o?sy:oy,A="stroke",y6(c)&&(I=null);break;case"area":D=!(m||y!=null)&&(p||h!=null||a&&dh(a))?iy:pd,A="fill",y6(c)&&(I=null);break;case"rule":D=o?hc:pc,A="stroke";break;case"bar":D=h!=null?Ke(a)?p6(h)&&o&&Ke(o)?df:gl:yv:y!=null?Ke(o)?p6(y)&&a&&Ke(a)?df:vl:mv:S!=null||T!=null?o&&Ke(o)&&a&&Ke(a)?df:o&&Ke(o)?vl:a&&Ke(a)?gl:z3:o&&ff(o)&&!(a&&ff(a))?gl:a&&ff(a)&&!(o&&ff(o))?vl:df,A="fill";break;default:throw new Error(`invalid mark: ${$}`)}let F={fx:u,fy:f,x:o??void 0,y:a??void 0,[A]:c??_,z:I,r:l??void 0,tip:!0},E,N={[A]:S??void 0,r:T??void 0};if(h!=null&&y!=null)throw new Error("cannot reduce both x and y");return y!=null?(N.y=y,E=Ke(o)?ty:Fa):h!=null?(N.x=h,E=Ke(a)?ey:La):(S!=null||T!=null)&&(o&&a?E=Ke(o)&&Ke(a)?ZT:Ke(o)?La:Ke(a)?Fa:al:o?E=Ke(o)?ty:Fa:a&&(E=Ke(a)?ey:La)),(E===al||E===Fa)&&(F.x={value:o,...g}),(E===al||E===La)&&(F.y={value:a,...v}),p===void 0&&(p=o&&!(E===al||E===Fa)&&(D===gl||D===iy||D===yv||D===pc)),m===void 0&&(m=a&&!(E===al||E===La)&&(D===vl||D===pd||D===mv||D===hc)),{fx:u??null,fy:f??null,x:{value:d??null,reduce:h??null,zero:!!p,...g},y:{value:b??null,reduce:y??null,zero:!!m,...v},color:{value:w??null,reduce:S??null,..._!==void 0&&{color:_}},size:{value:x??null,reduce:T??null},mark:$,markImpl:m6[D],markOptions:F,transformImpl:m6[E],transformOptions:N,colorMode:A}}function Nlt(e,t){const n=SP(e,t),{fx:r,fy:i,x:{zero:s},y:{zero:o},markOptions:a,transformOptions:c,colorMode:l}=n,u=Kx[n.markImpl],f=Kx[n.transformImpl],d=r!=null||i!=null?E3({strokeOpacity:.1}):null,h=[s?hc([0]):null,o?pc([0]):null],p=u(e,f?f(c,a):a);return l==="stroke"?ls(d,h,p):ls(d,p,h)}function dh(e){let t,n;for(const r of e){if(r==null)continue;if(t===void 0){t=r;continue}const i=Math.sign(He(t,r));if(i){if(n!==void 0&&i!==n)return!1;t=r,n=i}}return!0}function $lt({x:e,y:t,color:n,size:r,fx:i,fy:s,mark:o}={}){return Ts(e)||(e=_u(e)),Ts(t)||(t=_u(t)),Ts(n)||(n=Zy(n)?{color:n}:_u(n)),Ts(r)||(r=_u(r)),Ts(i)&&({value:i}=_u(i)),Ts(s)&&({value:s}=_u(s)),o!=null&&(o=`${o}`.toLowerCase()),{x:e,y:t,color:n,size:r,fx:i,fy:s,mark:o}}function h0(e,t){const n=Gt(e,t.value);return n&&(n.label=aa(t.value)),n}function _u(e){return klt(e)?{reduce:e}:{value:e}}function p0(e){return/^(?:distinct|count|sum|proportion)$/i.test(e)}function p6(e){return/^(?:first|last|mode)$/i.test(e)}function klt(e){if(e==null)return!1;if(typeof e.reduceIndex=="function"||typeof e.reduce=="function"&&Ci(e)||/^p\d{2}$/i.test(e))return!0;switch(`${e}`.toLowerCase()){case"first":case"last":case"count":case"distinct":case"sum":case"proportion":case"proportion-facet":case"deviation":case"min":case"min-index":case"max":case"max-index":case"mean":case"median":case"variance":case"mode":return!0}return!1}function y6(e){return e?new Fy(e).size>e.length>>1:!1}const Kx={dot:Rc,line:P3,lineX:sy,lineY:oy,areaX:iy,areaY:pd,ruleX:hc,ruleY:pc,barX:gl,barY:vl,rect:z3,rectX:yv,rectY:mv,cell:df,bin:al,binX:Fa,binY:La,group:ZT,groupX:ty,groupY:ey},m6=Object.fromEntries(Object.entries(Kx).map(([e,t])=>[t,e]));function j3(e,t={}){let{x:n,x1:r,x2:i}=t;n===void 0&&r===void 0&&i===void 0&&(t={...t,x:n=It});const s={};return n!=null&&(s.x=e),r!=null&&(s.x1=e),i!=null&&(s.x2=e),ea(s,t)}function V3(e,t={}){let{y:n,y1:r,y2:i}=t;n===void 0&&r===void 0&&i===void 0&&(t={...t,y:n=It});const s={};return n!=null&&(s.y=e),r!=null&&(s.y1=e),i!=null&&(s.y2=e),ea(s,t)}function ea(e={},t={}){const n=kc(t),r=Object.entries(e).map(([i,s])=>{const o=u5(i,t);if(o==null)throw new Error(`missing channel: ${i}`);const[a,c]=Xr(o);return{key:i,input:o,output:a,setOutput:c,map:Dlt(s)}});return{...to(t,(i,s)=>{const o=Gt(i,n),a=r.map(({input:l})=>Gt(i,l)),c=r.map(({setOutput:l})=>l(new Array(i.length)));for(const l of s)for(const u of o?sa(l,f=>o[f]).values():[l])r.forEach(({map:f},d)=>f.mapIndex(u,a[d],c[d]));return{data:i,facets:s}}),...Object.fromEntries(r.map(({key:i,output:s})=>[i,s]))}}function Dlt(e){if(e==null)throw new Error("missing map");if(typeof e.mapIndex=="function")return e;if(typeof e.map=="function"&&Ci(e))return Olt(e);if(typeof e=="function")return b2(jT(e));switch(`${e}`.toLowerCase()){case"cumsum":return Flt;case"rank":return b2((t,n)=>uF(t,r=>n[r]));case"quantile":return b2((t,n)=>Rlt(t,r=>n[r]))}throw new Error(`invalid map: ${e}`)}function Olt(e){return console.warn("deprecated map interface; implement mapIndex instead."),{mapIndex:e.map.bind(e)}}function Rlt(e,t){const n=Ob(e,t)-1;return uF(e,t).map(r=>r/n)}function b2(e){return{mapIndex(t,n,r){const i=e(t,n);if(i.length!==t.length)throw new Error("map function returned a mismatched length");for(let s=0,o=t.length;s<o;++s)r[t[s]]=i[s]}}}const Flt={mapIndex(e,t,n){let r=0;for(const i of e)n[i]=r+=t[i]}};function Llt(e={},t){return arguments.length===1&&(t=e),j3(Nw(e),t)}function Blt(e={},t){return arguments.length===1&&(t=e),V3(Nw(e),t)}function Nw(e={}){typeof e=="number"&&(e={k:e});let{k:t,reduce:n,shift:r,anchor:i,strict:s}=e;if(i===void 0&&r!==void 0&&(i=Ult(r),jo(`Warning: the shift option is deprecated; please use anchor "${i}" instead.`)),!((t=Math.floor(t))>0))throw new Error(`invalid k: ${t}`);return Plt(n)(t,Clt(i,t),s)}function Clt(e="middle",t){switch(`${e}`.toLowerCase()){case"middle":return t-1>>1;case"start":return 0;case"end":return t-1}throw new Error(`invalid anchor: ${e}`)}function Ult(e){switch(`${e}`.toLowerCase()){case"centered":return"middle";case"leading":return"start";case"trailing":return"end"}throw new Error(`invalid shift: ${e}`)}function Plt(e="mean"){if(typeof e=="string"){if(/^p\d{2}$/i.test(e))return y0(PT(e));switch(e.toLowerCase()){case"deviation":return y0(Ry);case"max":return m0((t,n)=>Be(t,r=>n[r]));case"mean":return zlt;case"median":return y0(jp);case"min":return m0((t,n)=>On(t,r=>n[r]));case"mode":return m0((t,n)=>lF(t,r=>n[r]));case"sum":return xP;case"variance":return y0(eT);case"difference":return Ylt;case"ratio":return qlt;case"first":return Wlt;case"last":return Glt}}if(typeof e!="function")throw new Error(`invalid reduce: ${e}`);return m0(jT(e))}function y0(e){return(t,n,r)=>r?{mapIndex(i,s,o){const a=l=>s[l]==null?NaN:+s[l];let c=0;for(let l=0;l<t-1;++l)isNaN(a(l))&&++c;for(let l=0,u=i.length-t+1;l<u;++l)isNaN(a(l+t-1))&&++c,o[i[l+n]]=c===0?e(Al(i,l,l+t),a):NaN,isNaN(a(l))&&--c}}:{mapIndex(i,s,o){const a=c=>s[c]==null?NaN:+s[c];for(let c=-n;c<0;++c)o[i[c+n]]=e(Al(i,0,c+t),a);for(let c=0,l=i.length-n;c<l;++c)o[i[c+n]]=e(Al(i,c,c+t),a)}}}function m0(e){return(t,n,r)=>r?{mapIndex(i,s,o){let a=0;for(let c=0;c<t-1;++c)a+=yr(s[i[c]]);for(let c=0,l=i.length-t+1;c<l;++c)a+=yr(s[i[c+t-1]]),a===t&&(o[i[c+n]]=e(Al(i,c,c+t),s)),a-=yr(s[i[c]])}}:{mapIndex(i,s,o){for(let a=-n;a<0;++a)o[i[a+n]]=e(Al(i,0,a+t),s);for(let a=0,c=i.length-n;a<c;++a)o[i[a+n]]=e(Al(i,a,a+t),s)}}}function xP(e,t,n){return n?{mapIndex(r,i,s){let o=0,a=0;for(let c=0;c<e-1;++c){const l=i[r[c]];l===null||isNaN(l)?++o:a+=+l}for(let c=0,l=r.length-e+1;c<l;++c){const u=i[r[c]],f=i[r[c+e-1]];f===null||isNaN(f)?++o:a+=+f,s[r[c+t]]=o===0?a:NaN,u===null||isNaN(u)?--o:a-=+u}}}:{mapIndex(r,i,s){let o=0;const a=r.length;for(let c=0,l=Math.min(a,e-t-1);c<l;++c)o+=+i[r[c]]||0;for(let c=-t,l=a-t;c<l;++c)o+=+i[r[c+e-1]]||0,s[r[c+t]]=o,o-=+i[r[c]]||0}}}function zlt(e,t,n){if(n){const r=xP(e,t,n);return{mapIndex(i,s,o){r.mapIndex(i,s,o);for(let a=0,c=i.length-e+1;a<c;++a)o[i[a+t]]/=e}}}else return{mapIndex(r,i,s){let o=0,a=0;const c=r.length;for(let l=0,u=Math.min(c,e-t-1);l<u;++l){let f=i[r[l]];f!==null&&!isNaN(f=+f)&&(o+=f,++a)}for(let l=-t,u=c-t;l<u;++l){let f=i[r[l+e-1]],d=i[r[l]];f!==null&&!isNaN(f=+f)&&(o+=f,++a),s[r[l+t]]=o/a,d!==null&&!isNaN(d=+d)&&(o-=d,--a)}}}}function jlt(e,t,n,r){for(let i=n+r;n<i;++n){const s=e[t[n]];if(yr(s))return s}}function Vlt(e,t,n,r){for(let i=n+r-1;i>=n;--i){const s=e[t[i]];if(yr(s))return s}}function IP(e,t,n,r){for(let i=n+r;n<i;++n){let s=e[t[n]];if(s!==null&&!isNaN(s=+s))return s}}function EP(e,t,n,r){for(let i=n+r-1;i>=n;--i){let s=e[t[i]];if(s!==null&&!isNaN(s=+s))return s}}function Ylt(e,t,n){return n?{mapIndex(r,i,s){for(let o=0,a=r.length-e;o<a;++o){const c=i[r[o]],l=i[r[o+e-1]];s[r[o+t]]=c===null||l===null?NaN:l-c}}}:{mapIndex(r,i,s){for(let o=-t,a=r.length-e+t+1;o<a;++o)s[r[o+t]]=EP(i,r,o,e)-IP(i,r,o,e)}}}function qlt(e,t,n){return n?{mapIndex(r,i,s){for(let o=0,a=r.length-e;o<a;++o){const c=i[r[o]],l=i[r[o+e-1]];s[r[o+t]]=c===null||l===null?NaN:l/c}}}:{mapIndex(r,i,s){for(let o=-t,a=r.length-e+t+1;o<a;++o)s[r[o+t]]=EP(i,r,o,e)/IP(i,r,o,e)}}}function Wlt(e,t,n){return n?{mapIndex(r,i,s){for(let o=0,a=r.length-e;o<a;++o)s[r[o+t]]=i[r[o]]}}:{mapIndex(r,i,s){for(let o=-t,a=r.length-e+t+1;o<a;++o)s[r[o+t]]=jlt(i,r,o,e)}}}function Glt(e,t,n){return n?{mapIndex(r,i,s){for(let o=0,a=r.length-e;o<a;++o)s[r[o+t]]=i[r[o+e-1]]}}:{mapIndex(r,i,s){for(let o=-t,a=r.length-e+t+1;o<a;++o)s[r[o+t]]=Vlt(i,r,o,e)}}}const Vo={n:20,k:2,color:"currentColor",opacity:.2,strict:!0,anchor:"end"};function Hlt(e,{x:t=It,y:n,k:r=Vo.k,color:i=Vo.color,opacity:s=Vo.opacity,fill:o=i,fillOpacity:a=s,stroke:c=i,strokeOpacity:l,strokeWidth:u,...f}={}){return ls(en(o)?null:iy(e,ea({x1:Ml({k:-r,...f}),x2:Ml({k:r,...f})},{x1:t,x2:t,y:n,fill:o,fillOpacity:a,...f})),en(c)?null:sy(e,ea({x:Ml(f)},{x:t,y:n,stroke:c,strokeOpacity:l,strokeWidth:u,...f})))}function Xlt(e,{x:t,y:n=It,k:r=Vo.k,color:i=Vo.color,opacity:s=Vo.opacity,fill:o=i,fillOpacity:a=s,stroke:c=i,strokeOpacity:l,strokeWidth:u,...f}={}){return ls(en(o)?null:pd(e,ea({y1:Ml({k:-r,...f}),y2:Ml({k:r,...f})},{x:t,y1:n,y2:n,fill:o,fillOpacity:a,...f})),en(c)?null:oy(e,ea({y:Ml(f)},{x:t,y:n,stroke:c,strokeOpacity:l,strokeWidth:u,...f})))}function Ml({n:e=Vo.n,k:t=0,strict:n=Vo.strict,anchor:r=Vo.anchor}={}){return Nw({k:e,reduce:i=>Rb(i)+t*(Ry(i)||0),strict:n,anchor:r})}const Qlt={ariaLabel:"tick",fill:null,stroke:"currentColor"};class TP extends Me{constructor(t,n,r){super(t,n,r,Qlt),Fd(this,r)}render(t,n,r,i,s){return le("svg:g",s).call(Ce,this,i,s).call(this._transform,this,n).call(o=>o.selectAll().data(t).enter().append("line").call(Fe,this).attr("x1",this._x1(n,r,i)).attr("x2",this._x2(n,r,i)).attr("y1",this._y1(n,r,i)).attr("y2",this._y2(n,r,i)).call(Sn,this,r).call(sm,this,r,s)).node()}}class AP extends TP{constructor(t,n={}){const{x:r,y:i,inset:s=0,insetTop:o=s,insetBottom:a=s}=n;super(t,{x:{value:r,scale:"x"},y:{value:i,scale:"y",type:"band",optional:!0}},n),this.insetTop=Zt(o),this.insetBottom=Zt(a)}_transform(t,n,{x:r}){t.call(Ae,n,{x:r},Cn,0)}_x1(t,{x:n}){return r=>n[r]}_x2(t,{x:n}){return r=>n[r]}_y1({y:t},{y:n},{marginTop:r}){const{insetTop:i}=this;return n&&t?s=>n[s]+i:r+i}_y2({y:t},{y:n},{height:r,marginBottom:i}){const{insetBottom:s}=this;return n&&t?o=>n[o]+t.bandwidth()-s:r-i-s}}class MP extends TP{constructor(t,n={}){const{x:r,y:i,inset:s=0,insetRight:o=s,insetLeft:a=s}=n;super(t,{y:{value:i,scale:"y"},x:{value:r,scale:"x",type:"band",optional:!0}},n),this.insetRight=Zt(o),this.insetLeft=Zt(a)}_transform(t,n,{y:r}){t.call(Ae,n,{y:r},0,Cn)}_x1({x:t},{x:n},{marginLeft:r}){const{insetLeft:i}=this;return n&&t?s=>n[s]+i:r+i}_x2({x:t},{x:n},{width:r,marginRight:i}){const{insetRight:s}=this;return n&&t?o=>n[o]+t.bandwidth()-s:r-i-s}_y1(t,{y:n}){return r=>n[r]}_y2(t,{y:n}){return r=>n[r]}}function NP(e,{x:t=It,...n}={}){return new AP(e,{...n,x:t})}function $P(e,{y:t=It,...n}={}){return new MP(e,{...n,y:t})}function Klt(e,{x:t=It,y:n=null,fill:r="#ccc",fillOpacity:i,stroke:s="currentColor",strokeOpacity:o,strokeWidth:a=2,sort:c,...l}={}){const u=n!=null?ey:KT;return ls(pc(e,u({x1:Y3,x2:q3},{x:t,y:n,stroke:s,strokeOpacity:o,...l})),gl(e,u({x1:"p25",x2:"p75"},{x:t,y:n,fill:r,fillOpacity:i,...l})),NP(e,u({x:"p50"},{x:t,y:n,stroke:s,strokeOpacity:o,strokeWidth:a,sort:c,...l})),Rc(e,ea({x:kP},{x:t,y:n,z:n,stroke:s,strokeOpacity:o,...l})))}function Zlt(e,{y:t=It,x:n=null,fill:r="#ccc",fillOpacity:i,stroke:s="currentColor",strokeOpacity:o,strokeWidth:a=2,sort:c,...l}={}){const u=n!=null?ty:KT;return ls(hc(e,u({y1:Y3,y2:q3},{x:n,y:t,stroke:s,strokeOpacity:o,...l})),vl(e,u({y1:"p25",y2:"p75"},{x:n,y:t,fill:r,fillOpacity:i,...l})),$P(e,u({y:"p50"},{x:n,y:t,stroke:s,strokeOpacity:o,strokeWidth:a,sort:c,...l})),Rc(e,ea({y:kP},{x:n,y:t,z:n,stroke:s,strokeOpacity:o,...l})))}function kP(e){const t=Y3(e),n=q3(e);return e.map(r=>r<t||r>n?r:NaN)}function Y3(e){const t=DP(e)*2.5-OP(e)*1.5;return On(e,n=>n>=t?n:NaN)}function q3(e){const t=OP(e)*2.5-DP(e)*1.5;return Be(e,n=>n<=t?n:NaN)}function DP(e){return lc(e,.25)}function OP(e){return lc(e,.75)}const Jlt={ariaLabel:"raster",stroke:null,pixelSize:1};function Su(e,t){const n=+e;if(isNaN(n))throw new Error(`invalid ${t}: ${e}`);return n}function g6(e,t){const n=Math.floor(e);if(isNaN(n))throw new Error(`invalid ${t}: ${e}`);return n}class RP extends Me{constructor(t,n,r={},i){let{width:s,height:o,x:a,y:c,x1:l=a==null?0:void 0,y1:u=c==null?0:void 0,x2:f=a==null?s:void 0,y2:d=c==null?o:void 0,pixelSize:h=i.pixelSize,blur:p=0,interpolate:g}=r;if(s!=null&&(s=g6(s,"width")),o!=null&&(o=g6(o,"height")),l!=null&&(l=Su(l,"x1")),u!=null&&(u=Su(u,"y1")),f!=null&&(f=Su(f,"x2")),d!=null&&(d=Su(d,"y2")),a==null&&(l==null||f==null))throw new Error("missing x");if(c==null&&(u==null||d==null))throw new Error("missing y");t!=null&&s!=null&&o!=null&&(a===void 0&&l!=null&&f!=null&&(a=cut(l,f,s)),c===void 0&&u!=null&&d!=null&&(c=lut(u,d,s,o))),super(t,{x:{value:a,scale:"x",optional:!0},y:{value:c,scale:"y",optional:!0},x1:{value:l==null?null:[l],scale:"x",optional:!0,filter:null},y1:{value:u==null?null:[u],scale:"y",optional:!0,filter:null},x2:{value:f==null?null:[f],scale:"x",optional:!0,filter:null},y2:{value:d==null?null:[d],scale:"y",optional:!0,filter:null},...n},r,i),this.width=s,this.height=o,this.pixelSize=Su(h,"pixelSize"),this.blur=Su(p,"blur"),this.interpolate=a==null||c==null?null:eut(g)}}class FP extends RP{constructor(t,n={}){const{imageRendering:r}=n;if(t==null){const{fill:i,fillOpacity:s}=n;cn(s)[0]!==void 0&&(n=Zx("fillOpacity",n)),Fr(i)[0]!==void 0&&(n=Zx("fill",n))}super(t,void 0,n,Jlt),this.imageRendering=Ze(r,"auto")}scale(t,{color:n,...r},i){return super.scale(t,r,i)}render(t,n,r,i,s){var N;const o=n[(N=r.channels.fill)==null?void 0:N.scale]??(M=>M),{x:a,y:c}=r,{document:l}=s,[u,f,d,h]=BP(r,i,s),p=d-u,g=h-f,{pixelSize:b,width:y=Math.round(Math.abs(p)/b),height:m=Math.round(Math.abs(g)/b)}=this,v=y*m;let{fill:w,fillOpacity:_}=r,S=0;if(this.interpolate){const M=y/p,R=m/g,O=ke(a,L=>(L-u)*M,Float64Array),C=ke(c,L=>(L-f)*R,Float64Array);w&&(w=this.interpolate(t,y,m,O,C,w)),_&&(_=this.interpolate(t,y,m,O,C,_))}else this.data==null&&t&&(S=t.fi*v);const x=l.createElement("canvas");x.width=y,x.height=m;const T=x.getContext("2d"),$=T.createImageData(y,m),I=$.data;let{r:A,g:D,b:F}=Ri(this.fill)??{r:0,g:0,b:0},E=(this.fillOpacity??1)*255;for(let M=0;M<v;++M){const R=M<<2;if(w){const O=o(w[M+S]);if(O==null){I[R+3]=0;continue}({r:A,g:D,b:F}=Ri(O))}_&&(E=_[M+S]*255),I[R+0]=A,I[R+1]=D,I[R+2]=F,I[R+3]=E}return this.blur>0&&JX($,this.blur),T.putImageData($,0,0),le("svg:g",s).call(Ce,this,i,s).call(Ae,this,n).call(M=>M.append("image").attr("transform",`translate(${u},${f}) scale(${Math.sign(d-u)},${Math.sign(h-f)})`).attr("width",Math.abs(p)).attr("height",Math.abs(g)).attr("preserveAspectRatio","none").call(gt,"image-rendering",this.imageRendering).call(Fe,this).attr("xlink:href",x.toDataURL())).node()}}function LP(e,t,n){arguments.length<3&&(n=t,t=null);let{x:r,y:i,[e]:s,...o}=n;return r===void 0&&i===void 0&&Ist(t)&&(r=Qy,i=Zp,s===void 0&&(s=bst)),[t,{...o,x:r,y:i,[e]:s}]}function tut(){const[e,t]=LP("fill",...arguments);return new FP(e,e==null||t.fill!==void 0||t.fillOpacity!==void 0?t:{...t,fill:It})}function BP({x1:e,y1:t,x2:n,y2:r},i,{projection:s}){const{width:o,height:a,marginTop:c,marginRight:l,marginBottom:u,marginLeft:f}=i;return[e&&s==null?e[0]:f,t&&s==null?t[0]:c,n&&s==null?n[0]:o-l,r&&s==null?r[0]:a-u]}function CP({x1:e,y1:t,x2:n,y2:r},i,s,o){const a={};return e&&(a.x1=e),t&&(a.y1=t),n&&(a.x2=n),r&&(a.y2=r),BP(s3(a,i),s,o)}function Zx(e,t={}){const{[e]:n}=t;if(typeof n!="function")throw new Error(`invalid ${e}: not a function`);return Br({...t,[e]:void 0},function(r,i,s,o,a,c){const{x:l,y:u}=o;if(!l)throw new Error("missing scale: x");if(!u)throw new Error("missing scale: y");const[f,d,h,p]=CP(s,o,a,c),g=h-f,b=p-d,{pixelSize:y}=this,{width:m=Math.round(Math.abs(g)/y),height:v=Math.round(Math.abs(b)/y)}=t,w=new Array(m*v*(i?i.length:1)),_=g/m,S=b/v;let x=0;for(const T of i??[void 0])for(let $=.5;$<v;++$)for(let I=.5;I<m;++I,++x)w[x]=n(l.invert(f+I*_),u.invert(d+$*S),T);return{data:w,facets:i,channels:{[e]:{value:w,scale:"auto"}}}})}function eut(e){if(typeof e=="function")return e;if(e==null)return Jx;switch(`${e}`.toLowerCase()){case"none":return Jx;case"nearest":return PP;case"barycentric":return UP();case"random-walk":return zP()}throw new Error(`invalid interpolate: ${e}`)}function Jx(e,t,n,r,i,s){const o=new Array(t*n);for(const a of e)r[a]<0||r[a]>=t||i[a]<0||i[a]>=n||(o[Math.floor(i[a])*t+Math.floor(r[a])]=s[a]);return o}function UP({random:e=ET(42)}={}){return(t,n,r,i,s,o)=>{const{points:a,triangles:c,hull:l}=Mc.from(t,h=>i[h],h=>s[h]),u=new o.constructor(n*r).fill(NaN),f=new Uint8Array(n*r),d=aut(o,e);for(let h=0;h<c.length;h+=3){const p=c[h],g=c[h+1],b=c[h+2],y=a[2*p],m=a[2*g],v=a[2*b],w=a[2*p+1],_=a[2*g+1],S=a[2*b+1],x=Math.min(y,m,v),T=Math.max(y,m,v),$=Math.min(w,_,S),I=Math.max(w,_,S),A=(_-S)*(y-v)+(w-S)*(v-m);if(!A)continue;const D=o[t[p]],F=o[t[g]],E=o[t[b]];for(let N=Math.floor(x);N<T;++N)for(let M=Math.floor($);M<I;++M){if(N<0||N>=n||M<0||M>=r)continue;const R=N+.5,O=M+.5,C=((_-S)*(R-v)+(O-S)*(v-m))/A;if(C<0)continue;const L=((S-w)*(R-v)+(O-S)*(y-v))/A;if(L<0)continue;const P=1-C-L;if(P<0)continue;const z=N+n*M;u[z]=d(D,C,F,L,E,P,N,M),f[z]=1}}return nut(u,f,i,s,o,n,r,l,t,d),u}}function nut(e,t,n,r,i,s,o,a,c,l){n=Float64Array.from(a,h=>n[c[h]]),r=Float64Array.from(a,h=>r[c[h]]),i=Array.from(a,h=>i[c[h]]);const u=n.length,f=Array.from({length:u},(h,p)=>iut(p,n,r));let d=0;for(let h=0;h<o;++h){const p=h+.5;for(let g=0;g<s;++g){const b=g+s*h;if(!t[b]){const y=g+.5;for(let m=0;m<u;++m){const v=(u+d+(m%2?(m+1)/2:-m/2))%u;if(f[v](y,p)){const w=rut(n.at(v-1),r.at(v-1),n[v],r[v],y,p);e[b]=l(i.at(v-1),w,i[v],1-w,i[v],0,g,h),d=v;break}}}}}}function rut(e,t,n,r,i,s){const o=n-e,a=r-t,c=o*(n-i)+a*(r-s),l=o*(i-e)+a*(s-t);return c>0&&l>0?c/(c+l):+(c>l)}function hh(e,t,n,r){return e*r-n*t}function iut(e,t,n){const r=t.length,i=t.at(e-2),s=n.at(e-2),o=t.at(e-1),a=n.at(e-1),c=t[e],l=n[e],u=t.at(e+1-r),f=n.at(e+1-r),d=o-c,h=a-l,p=i-o,g=s-a,b=c-u,y=l-f,m=Math.hypot(d,h),v=Math.hypot(p,g),w=Math.hypot(b,y);return(_,S)=>{const x=_-o,T=S-a,$=_-c,I=S-l;return hh(x,T,$,I)>-1e-6&&hh(x,T,d,h)*v-hh(x,T,p,g)*m>-1e-6&&hh($,I,b,y)*m-hh($,I,d,h)*w<=0}}function PP(e,t,n,r,i,s){const o=new s.constructor(t*n),a=Mc.from(e,u=>r[u],u=>i[u]);let c,l;for(let u=.5,f=0;u<n;++u){l=c;for(let d=.5;d<t;++d,++f)l=a.find(d,u,l),d===.5&&(c=l),o[f]=s[e[l]]}return o}function zP({random:e=ET(42),minDistance:t=.5,maxSteps:n=2}={}){return(r,i,s,o,a,c)=>{const l=new c.constructor(i*s),u=Mc.from(r,p=>o[p],p=>a[p]);let f,d,h;for(let p=.5,g=0;p<s;++p){d=f;for(let b=.5;b<i;++b,++g){let y=b,m=p;h=d=u.find(y,m,d),b===.5&&(f=d);let v,w=0;for(;(v=Math.hypot(o[r[h]]-y,a[r[h]]-m))>t&&w<n;){const _=e(b,p,w)*2*Math.PI;y+=Math.cos(_)*v,m+=Math.sin(_)*v,h=u.find(y,m,h),++w}l[g]=c[r[h]]}}return l}}function sut(e,t,n,r,i,s){return t*e+r*n+s*i}function out(e){return(t,n,r,i,s,o,a,c)=>{const l=e(a,c);return l<n?t:l<n+i?r:s}}function aut(e,t){return ff(e)||gr(e)?sut:out(t)}function cut(e,t,n){return{transform(r){const i=r.length,s=new Float64Array(i),o=(t-e)/n,a=e+o/2;for(let c=0;c<i;++c)s[c]=c%n*o+a;return s}}}function lut(e,t,n,r){return{transform(i){const s=i.length,o=new Float64Array(s),a=(t-e)/r,c=e+a/2;for(let l=0;l<s;++l)o[l]=Math.floor(l/n)%r*a+c;return o}}}const v6={ariaLabel:"contour",fill:"none",stroke:"currentColor",strokeMiterlimit:1,pixelSize:2};class jP extends RP{constructor(t,{smooth:n=!0,value:r,...i}={}){const s=E5({},i,v6);if(r===void 0){for(const a in s)if(s[a].value!=null){if(r!==void 0)throw new Error("ambiguous contour value");r=i[a],i[a]="value"}}if(r!=null){const a={transform:c=>c.map(l=>l.value),label:aa(r)};for(const c in s)i[c]==="value"&&(i[c]=a)}if(t==null){if(r==null)throw new Error("missing contour value");i=Zx("value",{value:r,...i}),r=null}else{let{interpolate:a}=i;r===void 0&&(r=It),a===void 0&&(i.interpolate="nearest")}super(t,{value:{value:r,optional:!0}},uut(i),v6);const o={geometry:{value:It}};for(const a in this.channels){const c=this.channels[a],{scale:l}=c;l==="x"||l==="y"||a==="value"||(o[a]=c,delete this.channels[a])}this.contourChannels=o,this.smooth=!!n}filter(t,{x:n,y:r,value:i,...s},o){return super.filter(t,s,o)}render(t,n,r,i,s){const{geometry:o}=r,a=Nc();return le("svg:g",s).call(Ce,this,i,s).call(Ae,this,n).call(c=>{c.selectAll().data(t).enter().append("path").call(Fe,this).attr("d",l=>a(o[l])).call(Sn,this,r)}).node()}}function uut({thresholds:e,interval:t,...n}){return e=sP(e,t,sT),Br(n,function(r,i,s,o,a,c){const[l,u,f,d]=CP(s,o,a,c),h=f-l,p=d-u,{pixelSize:g,width:b=Math.round(Math.abs(h)/g),height:y=Math.round(Math.abs(p)/g)}=this,m=b/h,v=y/p,w=s.value.value,_=[];if(this.interpolate){const{x:I,y:A}=pw(s,o,c),D=ke(I,M=>(M-l)*m,Float64Array),F=ke(A,M=>(M-u)*v,Float64Array),E=[s.x,s.y,s.value],N=[D,F,w];for(const M of i){const R=this.filter(M,E,N);_.push(this.interpolate(R,b,y,D,F,w))}}else if(i){const I=b*y,A=i.length;for(let D=0;D<A;++D)_.push(w.slice(D*I,D*I+I))}else _.push(w);if(this.blur>0)for(const I of _)J8({data:I,width:b,height:y},this.blur);const S=fut(e,w,...hut(_));if(S===null)throw new Error(`unsupported thresholds: ${e}`);const{contour:x}=I1().size([b,y]).smooth(this.smooth),T=[],$=[];for(const I of _)$.push(Gr(T.length,T.push(...ke(S,A=>x(I,A)))));for(const{coordinates:I}of T)for(const A of I)for(const D of A)for(const F of D)F[0]=F[0]/m+l,F[1]=F[1]/v+u;return{data:T,facets:$,channels:w5(this.contourChannels,T)}})}function fut(e,t,n,r){if(typeof(e==null?void 0:e.range)=="function")return e.range(e.floor(n),r);if(typeof e=="function"&&(e=e(t,n,r)),typeof e!="number")return Lr(e);const i=cc(...sF(n,r,e),e);for(;i[i.length-1]>=r;)i.pop();for(;i[1]<n;)i.shift();return i}function dut(){return new jP(...LP("value",...arguments))}function hut(e){return[On(e,t=>On(t,b6)),Be(e,t=>Be(t,b6))]}function b6(e){return isFinite(e)?e:NaN}function put(e,t){return W3(m3,e,t)}function yut(e,t={}){return W3(g3,e,t)}function mut(e,t={}){return W3(v3,e,t)}function W3(e,t,n={}){const{x:r,y:i,maxRadius:s}=n,o=e({px:r,py:i,maxRadius:s}),a=[];r!=null&&a.push(hc(t,w6("x",{...o,inset:-6},n))),i!=null&&a.push(pc(t,w6("y",{...o,inset:-6},n))),r!=null&&a.push(fd(t,_6("x",{...o,dy:9,frameAnchor:"bottom",lineAnchor:"top"},n))),i!=null&&a.push(fd(t,_6("y",{...o,dx:-9,frameAnchor:"left",textAnchor:"end"},n)));for(const c of a)c.ariaLabel=`crosshair ${c.ariaLabel}`;return ls(...a)}function VP(e,{channels:t,...n},{facet:r,facetAnchor:i,fx:s,fy:o,[e]:a,channels:c,transform:l,initializer:u}){return{...n,facet:r,facetAnchor:i,fx:s,fy:o,[e]:a,channels:{...t,...c},transform:l,initializer:gut(e,u)}}function gut(e,t){return t==null?t:function(n,r,{x:i,y:s,px:o,py:a,...c},...l){const{channels:{x:u,y:f,...d}={},...h}=t.call(this,n,r,{...c,x:o,y:a},...l);return{channels:{...d,...u&&{px:u,...e==="x"&&{x:u}},...f&&{py:f,...e==="y"&&{y:f}}},...h}}}function w6(e,t,n){const{color:r="currentColor",opacity:i=.2,ruleStroke:s=r,ruleStrokeOpacity:o=i,ruleStrokeWidth:a}=n;return{...VP(e,t,n),stroke:s,strokeOpacity:o,strokeWidth:a}}function _6(e,t,n){const{color:r="currentColor",textFill:i=r,textFillOpacity:s,textStroke:o="white",textStrokeOpacity:a,textStrokeWidth:c=5}=n;return{...VP(e,t,vut(e,n)),fill:i,fillOpacity:s,stroke:o,strokeOpacity:a,strokeWidth:c}}function vut(e,t){return Br(t,(n,r,i)=>{var s;return{channels:{text:{value:(s=Yx(i,e))==null?void 0:s.value}}}})}const but={ariaLabel:"delaunay link",fill:"none",stroke:"currentColor",strokeMiterlimit:1},wut={ariaLabel:"delaunay mesh",fill:null,stroke:"currentColor",strokeOpacity:.2},_ut={ariaLabel:"hull",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeMiterlimit:1},Sut={ariaLabel:"voronoi",fill:"none",stroke:"currentColor",strokeMiterlimit:1},xut={ariaLabel:"voronoi mesh",fill:null,stroke:"currentColor",strokeOpacity:.2};class Iut extends Me{constructor(t,n={}){const{x:r,y:i,z:s,curve:o,tension:a}=n;super(t,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},z:{value:s,optional:!0}},n,but),this.curve=M3(o,a),Fd(this,n)}render(t,n,r,i,s){const{x:o,y:a}=n,{x:c,y:l,z:u}=r,{curve:f}=this,[d,h]=eo(this,i),p=c?m=>c[m]:ni(d),g=l?m=>l[m]:ni(h),b=this;function y(m){let v=-1;const w=[],_={};for(const E in r)_[E]=[];const S=[],x=[],T=[],$=[];function I(E,N){E=m[E],N=m[N],w.push(++v),S[v]=p(E),T[v]=g(E),x[v]=p(N),$[v]=g(N);for(const M in r)_[M].push(r[M][N])}const{halfedges:A,hull:D,triangles:F}=Mc.from(m,p,g);for(let E=0;E<A.length;++E){const N=A[E];N>E&&I(F[E],F[N])}for(let E=0;E<D.length;++E)I(D[E],D[(E+1)%D.length]);xe(this).selectAll().data(w).enter().append("path").call(Fe,b).attr("d",E=>{const N=Fo(),M=f(N);return M.lineStart(),M.point(S[E],T[E]),M.point(x[E],$[E]),M.lineEnd(),N}).call(Sn,b,_).call(sm,b,_,s)}return le("svg:g",s).call(Ce,this,i,s).call(Ae,this,{x:c&&o,y:l&&a}).call(u?m=>m.selectAll().data(sa(t,v=>u[v]).values()).enter().append("g").each(y):m=>m.datum(t).each(y)).node()}}class G3 extends Me{constructor(t,n={},r,i=({z:s})=>s){const{x:s,y:o}=n;super(t,{x:{value:s,scale:"x",optional:!0},y:{value:o,scale:"y",optional:!0},z:{value:i(n),optional:!0}},n,r)}render(t,n,r,i,s){const{x:o,y:a}=n,{x:c,y:l,z:u}=r,[f,d]=eo(this,i),h=c?y=>c[y]:ni(f),p=l?y=>l[y]:ni(d),g=this;function b(y){const m=Mc.from(y,h,p);xe(this).append("path").datum(y[0]).call(Fe,g).attr("d",g._render(m,i)).call(Sn,g,r)}return le("svg:g",s).call(Ce,this,i,s).call(Ae,this,{x:c&&o,y:l&&a}).call(u?y=>y.selectAll().data(sa(t,m=>u[m]).values()).enter().append("g").each(b):y=>y.datum(t).each(b)).node()}}class Eut extends G3{constructor(t,n={}){super(t,n,wut),this.fill="none"}_render(t){return t.render()}}class Tut extends G3{constructor(t,n={}){super(t,n,_ut,kc)}_render(t){return t.renderHull()}}class Aut extends Me{constructor(t,n={}){const{x:r,y:i,z:s}=n;super(t,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},z:{value:s,optional:!0}},n,Sut)}render(t,n,r,i,s){const{x:o,y:a}=n,{x:c,y:l,z:u}=r,[f,d]=eo(this,i),h=c?y=>c[y]:ni(f),p=l?y=>l[y]:ni(d),g=this;function b(y){const m=Mc.from(y,h,p),v=YP(m,i);xe(this).selectAll().data(y).enter().append("path").call(Fe,g).attr("d",(w,_)=>v.renderCell(_)).call(Sn,g,r)}return le("svg:g",s).call(Ce,this,i,s).call(Ae,this,{x:c&&o,y:l&&a}).call(u?y=>y.selectAll().data(sa(t,m=>u[m]).values()).enter().append("g").each(b):y=>y.datum(t).each(b)).node()}}class Mut extends G3{constructor(t,n){super(t,n,xut),this.fill="none"}_render(t,n){return YP(t,n).render()}}function YP(e,t){const{width:n,height:r,marginTop:i,marginRight:s,marginBottom:o,marginLeft:a}=t;return e.voronoi([a,i,n-s,r-o])}function cm(e,t,{x:n,y:r,...i}={}){return[n,r]=ds(n,r),new e(t,{...i,x:n,y:r})}function Nut(e,t){return cm(Iut,e,t)}function $ut(e,t){return cm(Eut,e,t)}function kut(e,t){return cm(Tut,e,t)}function Dut(e,t){return cm(Aut,e,t)}function Out(e,t){return cm(Mut,e,t)}const Rut={ariaLabel:"density",fill:"none",stroke:"currentColor",strokeMiterlimit:1};class qP extends Me{constructor(t,{x:n,y:r,z:i,weight:s,fill:o,stroke:a,...c}={}){const l=S6(o)&&(o="currentColor",!0),u=S6(a)&&(a="currentColor",!0);super(t,{x:{value:n,scale:"x",optional:!0},y:{value:r,scale:"y",optional:!0},z:{value:kc({z:i,fill:o,stroke:a}),optional:!0},weight:{value:s,optional:!0}},But({...c,fill:o,stroke:a},l,u),Rut),l&&(this.fill=void 0),u&&(this.stroke=void 0),this.z=i}filter(t){return t}render(t,n,r,i,s){const{contours:o}=r,a=Nc();return le("svg:g",s).call(Ce,this,i,s).call(Ae,this,{}).call(c=>c.selectAll().data(t).enter().append("path").call(Fe,this).call(Sn,this,r).attr("d",l=>a(o[l]))).node()}}function Fut(e,{x:t,y:n,...r}={}){return[t,n]=ds(t,n),new qP(e,{...r,x:t,y:n})}const Lut=new Set(["x","y","z","weight"]);function But(e,t,n){let{bandwidth:i,thresholds:s}=e;return i=i===void 0?20:+i,s=s===void 0?20:typeof(s==null?void 0:s[Symbol.iterator])=="function"?Mr(s):+s,Br(e,function(o,a,c,l,u,f){var F;const d=c.weight?Mr(c.weight.value):null,h=(F=c.z)==null?void 0:F.value,{z:p}=this,[g,b]=eo(this,u),{width:y,height:m}=u,{x:v,y:w}=pw(c,l,f),_=Object.fromEntries(Object.entries(c).filter(([E])=>!Lut.has(E)).map(([E,N])=>[E,{...N,value:[]}])),S=t&&[],x=n&&[],T=Rtt().x(v?E=>v[E]:g).y(w?E=>w[E]:b).weight(d?E=>d[E]:1).size([y,m]).bandwidth(i),$=[];for(const E of a){const N=[];$.push(N);for(const M of h?a3(E,h,p):[E]){const R=T.contours(M);N.push([M,R])}}let I=s;if(!(I instanceof cd)){let E=0;for(const N of $)for(const[,M]of N){const R=M.max;R>E&&(E=R)}I=Float64Array.from({length:s-1},(N,M)=>E*100*(M+1)/s)}const A=[],D=[];for(const E of $){const N=[];A.push(N);for(const[M,R]of E)for(const O of I){N.push(D.length),D.push(R(O/100)),S&&S.push(O),x&&x.push(O);for(const C in _)_[C].value.push(c[C].value[M[0]])}}return S&&S.push(0),x&&x.push(0),{data:o,facets:A,channels:{..._,...S&&{fill:{value:S,scale:"color"}},...x&&{stroke:{value:x,scale:"color"}},contours:{value:D}}}})}function S6(e){return/^density$/i.test(e)}const Cut={ariaLabel:"geo",fill:"none",stroke:"currentColor",strokeWidth:1,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class WP extends Me{constructor(t,n={}){const[r,i]=cn(n.r,3);super(t,{geometry:{value:n.geometry,scale:"projection"},r:{value:r,scale:"r",filter:zo,optional:!0}},U3(n),Cut),this.r=i}render(t,n,r,i,s){const{geometry:o,r:a}=r,c=Nc(s.projection??Uut(n)),{r:l}=this;return sw(l)?t=[]:l!==void 0&&c.pointRadius(l),le("svg:g",s).call(Ce,this,i,s).call(Ae,this,n).call(u=>{u.selectAll().data(t).enter().append("path").call(Fe,this).attr("d",a?f=>c.pointRadius(a[f])(o[f]):f=>c(o[f])).call(Sn,this,r)}).node()}}function Uut({x:e,y:t}){if(e||t)return e??(e=n=>n),t??(t=n=>n),q1({point(n,r){this.stream.point(e(n),t(r))}})}function H3(e,{geometry:t=It,...n}={}){switch(e==null?void 0:e.type){case"FeatureCollection":e=e.features;break;case"GeometryCollection":e=e.geometries;break;case"Feature":case"LineString":case"MultiLineString":case"MultiPoint":case"MultiPolygon":case"Point":case"Polygon":case"Sphere":e=[e];break}return new WP(e,{geometry:t,...n})}function Put({strokeWidth:e=1.5,...t}={}){return H3({type:"Sphere"},{strokeWidth:e,...t})}function zut({strokeOpacity:e=.1,...t}={}){return H3(ket(),{strokeOpacity:e,...t})}const lp=.5,up=0;function jut(e={fill:"count"},{binWidth:t,...n}={}){const{z:r}=n;return t=t===void 0?20:Zt(t),e=JT(e,n),Ua(e,"fill")&&(n.channels={...n.channels,fill:{value:[]}}),n.symbol===void 0&&(n.symbol="hexagon"),n.r===void 0&&!Ua(e,"r")&&(n.r=t/2),Br(n,(i,s,o,a,c,l)=>{let{x:u,y:f,z:d,fill:h,stroke:p,symbol:g}=o;if(u===void 0)throw new Error("missing channel: x");if(f===void 0)throw new Error("missing channel: y");({x:u,y:f}=pw(o,a,l)),d=d?d.value:Gt(i,r),h=h==null?void 0:h.value,p=p==null?void 0:p.value,g=g==null?void 0:g.value;const b=n3(e,{z:d,fill:h,stroke:p,symbol:g}),y=d&&[],m=h&&[],v=p&&[],w=g&&[],_=[],S=[],x=[];let T=-1;for(const D of e)D.initialize(i);for(const D of s){const F=[];for(const E of e)E.scope("facet",D);for(const[E,N]of kf(D,b))for(const M of Vut(N,u,f,t)){F.push(++T),S.push(M.x),x.push(M.y),d&&y.push(b===d?E:d[M[0]]),h&&m.push(b===h?E:h[M[0]]),p&&v.push(b===p?E:p[M[0]]),g&&w.push(b===g?E:g[M[0]]);for(const R of e)R.reduce(M)}_.push(F)}const $=o.x.scale,I=o.y.scale,A={x:{value:S,source:a[$]?{value:ke(S,a[$].invert),scale:$}:null},y:{value:x,source:a[I]?{value:ke(x,a[I].invert),scale:I}:null},...d&&{z:{value:y}},...h&&{fill:{value:m,scale:"auto"}},...p&&{stroke:{value:v,scale:"auto"}},...g&&{symbol:{value:w,scale:"auto"}},...Object.fromEntries(e.map(({name:D,output:F})=>[D,{scale:"auto",label:F.label,radius:D==="r"?t/2:void 0,value:F.transform()}]))};return{data:i,facets:_,channels:A}})}function Vut(e,t,n,r){const i=r*(1.5/y5),s=new Map;for(const o of e){let a=t[o],c=n[o];if(isNaN(a)||isNaN(c))continue;let l=Math.round(c=(c-up)/i),u=Math.round(a=(a-lp)/r-(l&1)/2),f=c-l;if(Math.abs(f)*3>1){let p=a-u,g=u+(a<u?-1:1)/2,b=l+(c<l?-1:1),y=a-g,m=c-b;p*p+f*f>y*y+m*m&&(u=g+(l&1?1:-1)/2,l=b)}const d=`${u},${l}`;let h=s.get(d);h===void 0&&(s.set(d,h=[]),h.x=(u+(l&1)/2)*r+lp,h.y=l*i+up),h.push(o)}return s.values()}const Yut={ariaLabel:"hexgrid",fill:"none",stroke:"currentColor",strokeOpacity:.1};function qut(e){return new GP(e)}class GP extends Me{constructor({binWidth:t=20,clip:n=!0,...r}={}){super(cp,void 0,{clip:n,...r},Yut),this.binWidth=Zt(t)}render(t,n,r,i,s){const{binWidth:o}=this,{marginTop:a,marginRight:c,marginBottom:l,marginLeft:u,width:f,height:d}=i,h=u-lp,p=f-c-lp,g=a-up,b=d-l-up,y=o/2,m=y*m5,v=m/2,w=y*2,_=m*1.5,S=Math.floor(h/w),x=Math.ceil(p/w),T=Math.floor((g+v)/_),$=Math.ceil((b-v)/_)+1,I=`m0,${ba(-m)}l${ba(y)},${ba(v)}v${ba(m)}l${ba(-y)},${ba(v)}`;let A=I;for(let D=T;D<$;++D)for(let F=S;F<x;++F)A+=`M${ba(F*w+(D&1)*y)},${ba(D*_)}${I}`;return le("svg:g",s).datum(0).call(Ce,this,i,s).call(Ae,this,{},Cn+lp,Cn+up).call(D=>D.append("path").call(Fe,this).call(Sn,this,r).attr("d",A)).node()}}function ba(e){return Math.round(e*1e3)/1e3}const Wut={ariaLabel:"image",fill:null,stroke:null};function Gut(e){return/^\.*\//.test(e)}function Hut(e){return/^(blob|data|file|http|https):/i.test(e)}function Xut(e){return typeof e=="string"&&(Gut(e)||Hut(e))?[void 0,e]:[e,void 0]}class HP extends Me{constructor(t,n={}){let{x:r,y:i,r:s,width:o,height:a,rotate:c,src:l,preserveAspectRatio:u,crossOrigin:f,frameAnchor:d,imageRendering:h}=n;s==null&&(s=void 0),s===void 0&&o===void 0&&a===void 0?o=a=16:o===void 0&&a!==void 0?o=a:a===void 0&&o!==void 0&&(a=o);const[p,g]=Xut(l),[b,y]=cn(s),[m,v]=cn(o,y!==void 0?y*2:void 0),[w,_]=cn(a,y!==void 0?y*2:void 0),[S,x]=cn(c,0);super(t,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},r:{value:b,scale:"r",filter:zo,optional:!0},width:{value:m,filter:zo,optional:!0},height:{value:w,filter:zo,optional:!0},rotate:{value:S,optional:!0},src:{value:p,optional:!0}},U3(n),Wut),this.src=g,this.width=v,this.rotate=x,this.height=_,this.r=y,this.preserveAspectRatio=Ze(u,"xMidYMid"),this.crossOrigin=Zn(f),this.frameAnchor=Jy(d),this.imageRendering=Ze(h,"auto")}render(t,n,r,i,s){const{x:o,y:a}=n,{x:c,y:l,width:u,height:f,r:d,rotate:h,src:p}=r,{r:g,width:b,height:y,rotate:m}=this,[v,w]=eo(this,i);return le("svg:g",s).call(Ce,this,i,s).call(Ae,this,{x:c&&o,y:l&&a}).call(_=>_.selectAll().data(t).enter().append("image").call(Fe,this).attr("x",x6(c,u,d,v,b,g)).attr("y",x6(l,f,d,w,y,g)).attr("width",u?S=>u[S]:b!==void 0?b:d?S=>d[S]*2:g*2).attr("height",f?S=>f[S]:y!==void 0?y:d?S=>d[S]*2:g*2).attr("transform",h?S=>`rotate(${h[S]})`:m?`rotate(${m})`:null).attr("transform-origin",h||m?bw`${c?S=>c[S]:v}px ${l?S=>l[S]:w}px`:null).call(gt,"href",p?S=>p[S]:this.src).call(gt,"preserveAspectRatio",this.preserveAspectRatio).call(gt,"crossorigin",this.crossOrigin).call(gt,"image-rendering",this.imageRendering).call(gt,"clip-path",d?S=>`circle(${d[S]}px)`:g!==void 0?`circle(${g}px)`:null).call(Sn,this,r)).node()}}function x6(e,t,n,r,i,s){return t&&e?o=>e[o]-t[o]/2:t?o=>r-t[o]/2:e&&i!==void 0?o=>e[o]-i/2:i!==void 0?r-i/2:n&&e?o=>e[o]-n[o]:n?o=>r-n[o]:e?o=>e[o]-s:r-s}function Qut(e,{x:t,y:n,...r}={}){return r.frameAnchor===void 0&&([t,n]=ds(t,n)),new HP(e,{...r,x:t,y:n})}function Kut(e,t,n){var r=1e-8,i=t-1,s=n-1,o=0,a,c,l,u,f,d,h,p,g,b,y;if(e<=0)return 0;if(e>=1)return 1;for(t>=1&&n>=1?(l=e<.5?e:1-e,u=Math.sqrt(-2*Math.log(l)),h=(2.30753+u*.27061)/(1+u*(.99229+u*.04481))-u,e<.5&&(h=-h),p=(h*h-3)/6,g=2/(1/(2*t-1)+1/(2*n-1)),b=h*Math.sqrt(p+g)/g-(1/(2*n-1)-1/(2*t-1))*(p+5/6-2/(3*g)),h=t/(t+n*Math.exp(2*b))):(a=Math.log(t/(t+n)),c=Math.log(n/(t+n)),u=Math.exp(t*a)/t,f=Math.exp(n*c)/n,b=u+f,e<u/b?h=Math.pow(t*b*e,1/t):h=1-Math.pow(n*b*(1-e),1/n)),y=-Of(t)-Of(n)+Of(t+n);o<10;o++){if(h===0||h===1)return h;if(d=Zut(h,t,n)-e,u=Math.exp(i*Math.log(h)+s*Math.log(1-h)+y),f=d/u,h-=u=f/(1-.5*Math.min(1,f*(i/h-s/(1-h)))),h<=0&&(h=.5*(h+u)),h>=1&&(h=.5*(h+u+1)),Math.abs(u)<r*h&&o>0)break}return h}function Zut(e,t,n){var r=e===0||e===1?0:Math.exp(Of(t+n)-Of(t)-Of(n)+t*Math.log(e)+n*Math.log(1-e));return e<0||e>1?!1:e<(t+1)/(t+n+2)?r*I6(e,t,n)/t:1-r*I6(1-e,n,t)/n}function I6(e,t,n){var r=1e-30,i=1,s=t+n,o=t+1,a=t-1,c=1,l=1-s*e/o,u,f,d,h;for(Math.abs(l)<r&&(l=r),l=1/l,h=l;i<=100&&(u=2*i,f=i*(n-i)*e/((a+u)*(t+u)),l=1+f*l,Math.abs(l)<r&&(l=r),c=1+f/c,Math.abs(c)<r&&(c=r),l=1/l,h*=l*c,f=-(t+i)*(s+i)*e/((t+u)*(o+u)),l=1+f*l,Math.abs(l)<r&&(l=r),c=1+f/c,Math.abs(c)<r&&(c=r),l=1/l,d=l*c,h*=d,!(Math.abs(d-1)<3e-7));i++);return h}function Of(e){var t=0,n=[76.18009172947146,-86.5053203294167,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18],r=1.000000000190015,i,s,o;for(o=(s=i=e)+5.5,o-=(i+.5)*Math.log(o);t<6;t++)r+=n[t]/++s;return Math.log(2.506628274631*r/i)-o}function Jut(e,t){var n=Kut(2*Math.min(e,1-e),.5*t,.5);return n=Math.sqrt(t*(1-n)/n),e>.5?n:-n}const tft={ariaLabel:"linear-regression",fill:"currentColor",fillOpacity:.1,stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class XP extends Me{constructor(t,n={}){const{x:r,y:i,z:s,ci:o=.95,precision:a=4}=n;if(super(t,{x:{value:r,scale:"x"},y:{value:i,scale:"y"},z:{value:kc(n),optional:!0}},n,tft),this.z=s,this.ci=+o,this.precision=+a,!(0<=this.ci&&this.ci<1))throw new Error(`invalid ci; not in [0, 1): ${o}`);if(!(this.precision>0))throw new Error(`invalid precision: ${a}`)}render(t,n,r,i,s){const{x:o,y:a,z:c}=r,{ci:l}=this;return le("svg:g",s).call(Ce,this,i,s).call(Ae,this,n).call(u=>u.selectAll().data(c?a3(t,c,this.z):[t]).enter().call(f=>f.append("path").attr("fill","none").call(Fe,this).call(lv,this,{...r,fill:null,fillOpacity:null}).attr("d",d=>this._renderLine(d,o,a)).call(l&&!ld(this.fill)?d=>d.select(eft).attr("stroke","none").call(Fe,this).call(lv,this,{...r,stroke:null,strokeOpacity:null,strokeWidth:null}).attr("d",h=>this._renderBand(h,o,a)):()=>{}))).node()}}function eft(){return this.parentNode.insertBefore(this.ownerDocument.createElementNS(Pl.svg,"path"),this)}class nft extends XP{constructor(t,n){super(t,n)}_renderBand(t,n,r){const{ci:i,precision:s}=this,[o,a]=An(t,u=>r[u]),c=gv(t,r,n),l=QP(t,r,n,(1-i)/2,c);return kT().y(u=>u).x0(u=>l(u,-1)).x1(u=>l(u,1))(Gr(o,a-s/2,s).concat(a))}_renderLine(t,n,r){const[i,s]=An(t,a=>r[a]),o=gv(t,r,n);return`M${o(i)},${i}L${o(s)},${s}`}}class rft extends XP{constructor(t,n){super(t,n)}_renderBand(t,n,r){const{ci:i,precision:s}=this,[o,a]=An(t,u=>n[u]),c=gv(t,n,r),l=QP(t,n,r,(1-i)/2,c);return kT().x(u=>u).y0(u=>l(u,-1)).y1(u=>l(u,1))(Gr(o,a-s/2,s).concat(a))}_renderLine(t,n,r){const[i,s]=An(t,a=>n[a]),o=gv(t,n,r);return`M${i},${o(i)}L${s},${o(s)}`}}function ift(e,{y:t=zr,x:n=It,stroke:r,fill:i=en(r)?"currentColor":r,...s}={}){return new nft(e,$3({...s,x:n,y:t,fill:i,stroke:r}))}function sft(e,{x:t=zr,y:n=It,stroke:r,fill:i=en(r)?"currentColor":r,...s}={}){return new rft(e,N3({...s,x:t,y:n,fill:i,stroke:r}))}function gv(e,t,n){let r=0,i=0,s=0,o=0;for(const u of e){const f=t[u],d=n[u];r+=f,i+=d,s+=f*d,o+=f*f}const a=e.length,c=(a*s-r*i)/(a*o-r*r),l=(i-c*r)/a;return u=>c*u+l}function QP(e,t,n,r,i){const s=Hs(e,u=>t[u])/e.length;let o=0,a=0;for(const u of e)o+=(t[u]-s)**2,a+=(n[u]-i(t[u]))**2;const c=Math.sqrt(a/(e.length-2)),l=Jut(r,e.length-2);return(u,f)=>{const d=i(u),h=c*Math.sqrt(1/e.length+(u-s)**2/o);return d+f*l*h}}function tI({path:e=It,delimiter:t,frameAnchor:n,treeLayout:r=X1,treeSort:i,treeSeparation:s,treeAnchor:o,treeFilter:a,...c}={}){o=X3(o),i=ZP(i),a!=null&&(a=nI(a)),n===void 0&&(n=o.frameAnchor);const l=JP(t),u=o7(c,nI),[f,d]=Xr(),[h,p]=Xr();return{x:f,y:h,frameAnchor:n,...to(c,(g,b)=>{const y=l(Gt(g,e)),m=d([]),v=p([]);let w=-1;const _=[],S=[],x=LL().path($=>y[$]),T=r();T.nodeSize&&T.nodeSize([1,1]),T.separation&&s!==void 0&&T.separation(s??UT);for(const $ of u)$[vv]=$[i7]([]);for(const $ of b){const I=[],A=x($.filter(D=>y[D]!=null)).each(D=>D.data=g[D.data]);i!=null&&A.sort(i),T(A);for(const D of A.descendants())if(!(a!=null&&!a(D))){I.push(++w),_[w]=D.data,o.position(D,w,m,v);for(const F of u)F[vv][w]=F[s7](D)}S.push(I)}return{data:_,facets:S}}),...Object.fromEntries(u)}}function KP({path:e=It,delimiter:t,curve:n="bump-x",stroke:r="#555",strokeWidth:i=1.5,strokeOpacity:s=.5,treeLayout:o=X1,treeSort:a,treeSeparation:c,treeAnchor:l,treeFilter:u,...f}={}){l=X3(l),a=ZP(a),u!=null&&(u=T6(u)),f={curve:n,stroke:r,strokeWidth:i,strokeOpacity:s,...f};const d=JP(t),h=o7(f,T6),[p,g]=Xr(),[b,y]=Xr(),[m,v]=Xr(),[w,_]=Xr();return{x1:p,x2:b,y1:m,y2:w,...to(f,(S,x)=>{const T=d(Gt(S,e)),$=g([]),I=y([]),A=v([]),D=_([]);let F=-1;const E=[],N=[],M=LL().path(O=>T[O]),R=o();R.nodeSize&&R.nodeSize([1,1]),R.separation&&c!==void 0&&R.separation(c??UT);for(const O of h)O[vv]=O[i7]([]);for(const O of x){const C=[],L=M(O.filter(P=>T[P]!=null)).each(P=>P.data=S[P.data]);a!=null&&L.sort(a),R(L);for(const{source:P,target:z}of L.links())if(!(u!=null&&!u(z,P))){C.push(++F),E[F]=z.data,l.position(P,F,$,A),l.position(z,F,I,D);for(const G of h)G[vv][F]=G[s7](z,P)}N.push(C)}return{data:E,facets:N}}),...Object.fromEntries(h)}}function X3(e="left"){switch(`${e}`.trim().toLowerCase()){case"left":return oft;case"right":return aft}throw new Error(`invalid tree anchor: ${e}`)}const oft={frameAnchor:"left",dx:6,position({x:e,y:t},n,r,i){r[n]=t,i[n]=-e}},aft={frameAnchor:"right",dx:-6,position({x:e,y:t},n,r,i){r[n]=-t,i[n]=-e}};function ZP(e){return e==null||typeof e=="function"?e:`${e}`.trim().toLowerCase().startsWith("node:")?E6(nI(e)):E6(cft(e))}function E6(e){return(t,n)=>Fi(e(t),e(n))}function cft(e){return t=>{var n;return(n=t.data)==null?void 0:n[e]}}function JP(e="/"){if(e=`${e}`,e==="/")return n=>n;if(e.length!==1)throw new Error("delimiter must be exactly one character");const t=e.charCodeAt(0);return n=>n.map(r=>lft(r,t))}const eI=92,t7=47;function lft(e,t){if(t===eI)throw new Error("delimiter cannot be backslash");let n=!1;for(let r=0,i=e.length;r<i;++r){switch(e.charCodeAt(r)){case eI:if(!n){n=!0;continue}break;case t:n?(e=e.slice(0,r-1)+e.slice(r),--r,--i):e=e.slice(0,r)+"/"+e.slice(r+1);break;case t7:n?(e=e.slice(0,r)+"\\\\"+e.slice(r),r+=2,i+=2):(e=e.slice(0,r)+"\\"+e.slice(r),++r,++i);break}n=!1}return e}function uft(e){let t=!1;for(let n=0,r=e.length;n<r;++n){switch(e.charCodeAt(n)){case eI:if(!t){t=!0;continue}case t7:t&&(e=e.slice(0,n-1)+e.slice(n),--n,--r);break}t=!1}return e}function e7(e){return Ci(e)&&typeof e.node=="function"}function fft(e){return Ci(e)&&typeof e.link=="function"}function nI(e){if(e7(e))return e.node;if(e=`${e}`.trim().toLowerCase(),!!e.startsWith("node:")){switch(e){case"node:name":return iI;case"node:path":return rI;case"node:internal":return n7;case"node:external":return r7;case"node:depth":return sI;case"node:height":return oI}throw new Error(`invalid node value: ${e}`)}}function T6(e){if(e7(e))return e.node;if(fft(e))return e.link;if(e=`${e}`.trim().toLowerCase(),!(!e.startsWith("node:")&&!e.startsWith("parent:"))){switch(e){case"parent:name":return g0(iI);case"parent:path":return g0(rI);case"parent:depth":return g0(sI);case"parent:height":return g0(oI);case"node:name":return iI;case"node:path":return rI;case"node:internal":return n7;case"node:external":return r7;case"node:depth":return sI;case"node:height":return oI}throw new Error(`invalid link value: ${e}`)}}function rI(e){return e.id}function iI(e){return dft(e.id)}function sI(e){return e.depth}function oI(e){return e.height}function n7(e){return!!e.children}function r7(e){return!e.children}function g0(e){return(t,n)=>n==null?void 0:e(n)}function dft(e){let t=e.length;for(;--t>0&&!hft(e,t););return uft(e.slice(t+1))}function hft(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}const i7=2,s7=3,vv=4;function o7(e,t){const n=[];for(const r in e){const i=e[r],s=t(i);s!==void 0&&n.push([r,...Xr(i),s])}return n}function a7(e,{fill:t,stroke:n,strokeWidth:r,strokeOpacity:i,strokeLinejoin:s,strokeLinecap:o,strokeMiterlimit:a,strokeDasharray:c,strokeDashoffset:l,marker:u,markerStart:f=u,markerEnd:d=u,dot:h=en(f)&&en(d),text:p="node:name",textStroke:g="white",title:b="node:path",dx:y,dy:m,textAnchor:v,treeLayout:w=X1,textLayout:_=w===X1||w===OL?"mirrored":"normal",tip:S,...x}={}){if(y===void 0&&(y=X3(x.treeAnchor).dx),v!==void 0)throw new Error("textAnchor is not a configurable tree option");_=oi(_,"textLayout",["mirrored","normal"]);function T($){return fd(e,tI({treeLayout:w,text:p,fill:t===void 0?"currentColor":t,stroke:g,dx:y,dy:m,title:b,...$,...x}))}return ls(gP(e,KP({treeLayout:w,markerStart:f,markerEnd:d,stroke:n!==void 0?n:t===void 0?"node:internal":t,strokeWidth:r,strokeOpacity:i,strokeLinejoin:s,strokeLinecap:o,strokeMiterlimit:a,strokeDasharray:c,strokeDashoffset:l,...x})),h?Rc(e,tI({treeLayout:w,fill:t===void 0?"node:internal":t,title:b,tip:S,...x})):null,p!=null?_==="mirrored"?[T({textAnchor:"start",treeFilter:"node:external"}),T({textAnchor:"end",treeFilter:"node:internal",dx:-y})]:T():null)}function pft(e,t){return a7(e,{...t,treeLayout:OL})}function yft({geometry:e=It,...t}={}){return Br({...t,x:null,y:null},(n,r,i,s,o,{projection:a})=>{const c=Gt(n,e),l=c.length,u=new Float64Array(l),f=new Float64Array(l),d=Nc(a);for(let h=0;h<l;++h)[u[h],f[h]]=d.centroid(c[h]);return{data:n,facets:r,channels:{x:{value:u,scale:a==null?"x":null,source:null},y:{value:f,scale:a==null?"y":null,source:null}}}})}function mft({geometry:e=It,...t}={}){let n;return{...t,x:{transform:r=>Float64Array.from(n=Gt(Gt(r,e),vet),([i])=>i)},y:{transform:()=>Float64Array.from(n,([,r])=>r)}}}function gft(e,t,n,r,i){for(var s=i+1;r<=i;){var o=r+i>>>1,a=e[o],c=n!==void 0?n(a,t):a-t;c>=0?(s=o,i=o-1):r=o+1}return s}function vft(e,t,n,r,i){for(var s=i+1;r<=i;){var o=r+i>>>1,a=e[o],c=n!==void 0?n(a,t):a-t;c>0?(s=o,i=o-1):r=o+1}return s}function bft(e,t,n,r,i){for(var s=r-1;r<=i;){var o=r+i>>>1,a=e[o],c=n!==void 0?n(a,t):a-t;c<0?(s=o,r=o+1):i=o-1}return s}function wft(e,t,n,r,i){for(var s=r-1;r<=i;){var o=r+i>>>1,a=e[o],c=n!==void 0?n(a,t):a-t;c<=0?(s=o,r=o+1):i=o-1}return s}function _ft(e,t,n,r,i){for(;r<=i;){var s=r+i>>>1,o=e[s],a=n!==void 0?n(o,t):o-t;if(a===0)return s;a<=0?r=s+1:i=s-1}return-1}function ph(e,t,n,r,i,s){return typeof n=="function"?s(e,t,n,r===void 0?0:r|0,i===void 0?e.length-1:i|0):s(e,t,void 0,n===void 0?0:n|0,r===void 0?e.length-1:r|0)}var Sft={ge:function(e,t,n,r,i){return ph(e,t,n,r,i,gft)},gt:function(e,t,n,r,i){return ph(e,t,n,r,i,vft)},lt:function(e,t,n,r,i){return ph(e,t,n,r,i,bft)},le:function(e,t,n,r,i){return ph(e,t,n,r,i,wft)},eq:function(e,t,n,r,i){return ph(e,t,n,r,i,_ft)}},bv=Sft,hf=0,il=1,tg=2,xft=Eft;function Q3(e,t,n,r,i){this.mid=e,this.left=t,this.right=n,this.leftPoints=r,this.rightPoints=i,this.count=(t?t.count:0)+(n?n.count:0)+r.length}var lm=Q3.prototype;function w2(e,t){e.mid=t.mid,e.left=t.left,e.right=t.right,e.leftPoints=t.leftPoints,e.rightPoints=t.rightPoints,e.count=t.count}function c7(e,t){var n=yd(t);e.mid=n.mid,e.left=n.left,e.right=n.right,e.leftPoints=n.leftPoints,e.rightPoints=n.rightPoints,e.count=n.count}function A6(e,t){var n=e.intervals([]);n.push(t),c7(e,n)}function M6(e,t){var n=e.intervals([]),r=n.indexOf(t);return r<0?hf:(n.splice(r,1),c7(e,n),il)}lm.intervals=function(e){return e.push.apply(e,this.leftPoints),this.left&&this.left.intervals(e),this.right&&this.right.intervals(e),e};lm.insert=function(e){var t=this.count-this.leftPoints.length;if(this.count+=1,e[1]<this.mid)this.left?4*(this.left.count+1)>3*(t+1)?A6(this,e):this.left.insert(e):this.left=yd([e]);else if(e[0]>this.mid)this.right?4*(this.right.count+1)>3*(t+1)?A6(this,e):this.right.insert(e):this.right=yd([e]);else{var n=bv.ge(this.leftPoints,e,K3),r=bv.ge(this.rightPoints,e,Z3);this.leftPoints.splice(n,0,e),this.rightPoints.splice(r,0,e)}};lm.remove=function(e){var t=this.count-this.leftPoints;if(e[1]<this.mid){if(!this.left)return hf;var n=this.right?this.right.count:0;if(4*n>3*(t-1))return M6(this,e);var r=this.left.remove(e);return r===tg?(this.left=null,this.count-=1,il):(r===il&&(this.count-=1),r)}else if(e[0]>this.mid){if(!this.right)return hf;var i=this.left?this.left.count:0;if(4*i>3*(t-1))return M6(this,e);var r=this.right.remove(e);return r===tg?(this.right=null,this.count-=1,il):(r===il&&(this.count-=1),r)}else{if(this.count===1)return this.leftPoints[0]===e?tg:hf;if(this.leftPoints.length===1&&this.leftPoints[0]===e){if(this.left&&this.right){for(var s=this,o=this.left;o.right;)s=o,o=o.right;if(s===this)o.right=this.right;else{var a=this.left,r=this.right;s.count-=o.count,s.right=o.left,o.left=a,o.right=r}w2(this,o),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?w2(this,this.left):w2(this,this.right);return il}for(var a=bv.ge(this.leftPoints,e,K3);a<this.leftPoints.length&&this.leftPoints[a][0]===e[0];++a)if(this.leftPoints[a]===e){this.count-=1,this.leftPoints.splice(a,1);for(var r=bv.ge(this.rightPoints,e,Z3);r<this.rightPoints.length&&this.rightPoints[r][1]===e[1];++r)if(this.rightPoints[r]===e)return this.rightPoints.splice(r,1),il}return hf}};function l7(e,t,n){for(var r=0;r<e.length&&e[r][0]<=t;++r){var i=n(e[r]);if(i)return i}}function u7(e,t,n){for(var r=e.length-1;r>=0&&e[r][1]>=t;--r){var i=n(e[r]);if(i)return i}}function f7(e,t){for(var n=0;n<e.length;++n){var r=t(e[n]);if(r)return r}}lm.queryPoint=function(e,t){if(e<this.mid){if(this.left){var n=this.left.queryPoint(e,t);if(n)return n}return l7(this.leftPoints,e,t)}else if(e>this.mid){if(this.right){var n=this.right.queryPoint(e,t);if(n)return n}return u7(this.rightPoints,e,t)}else return f7(this.leftPoints,t)};lm.queryInterval=function(e,t,n){if(e<this.mid&&this.left){var r=this.left.queryInterval(e,t,n);if(r)return r}if(t>this.mid&&this.right){var r=this.right.queryInterval(e,t,n);if(r)return r}return t<this.mid?l7(this.leftPoints,t,n):e>this.mid?u7(this.rightPoints,e,n):f7(this.leftPoints,n)};function Ift(e,t){return e-t}function K3(e,t){var n=e[0]-t[0];return n||e[1]-t[1]}function Z3(e,t){var n=e[1]-t[1];return n||e[0]-t[0]}function yd(e){if(e.length===0)return null;for(var t=[],n=0;n<e.length;++n)t.push(e[n][0],e[n][1]);t.sort(Ift);for(var r=t[t.length>>1],i=[],s=[],o=[],n=0;n<e.length;++n){var a=e[n];a[1]<r?i.push(a):r<a[0]?s.push(a):o.push(a)}var c=o,l=o.slice();return c.sort(K3),l.sort(Z3),new Q3(r,yd(i),yd(s),c,l)}function aI(e){this.root=e}var Pd=aI.prototype;Pd.insert=function(e){this.root?this.root.insert(e):this.root=new Q3(e[0],null,null,[e],[e])};Pd.remove=function(e){if(this.root){var t=this.root.remove(e);return t===tg&&(this.root=null),t!==hf}return!1};Pd.queryPoint=function(e,t){if(this.root)return this.root.queryPoint(e,t)};Pd.queryInterval=function(e,t,n){if(e<=t&&this.root)return this.root.queryInterval(e,t,n)};Object.defineProperty(Pd,"count",{get:function(){return this.root?this.root.count:0}});Object.defineProperty(Pd,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}});function Eft(e){return!e||e.length===0?new aI(null):new aI(yd(e))}const Tft=ID(xft),Aft=({marginLeft:e})=>[1,e],Mft=({width:e,marginRight:t})=>[-1,e-t],Nft=({width:e,marginLeft:t,marginRight:n})=>[0,(t+e-n)/2],$ft=({marginTop:e})=>[1,e],kft=({height:e,marginBottom:t})=>[-1,e-t],Dft=({height:e,marginTop:t,marginBottom:n})=>[0,(t+e-n)/2];function d7(e){return typeof e=="string"?{anchor:e}:e}function Oft(e={},t={}){arguments.length===1&&([e,t]=h7(e));let{anchor:n="left",padding:r=1,r:i=t.r}=d7(e);switch(`${n}`.toLowerCase()){case"left":n=Aft;break;case"right":n=Mft;break;case"middle":n=Nft;break;default:throw new Error(`unknown dodge anchor: ${n}`)}return p7("x","y",n,Zt(r),i,t)}function Rft(e={},t={}){arguments.length===1&&([e,t]=h7(e));let{anchor:n="bottom",padding:r=1,r:i=t.r}=d7(e);switch(`${n}`.toLowerCase()){case"top":n=$ft;break;case"bottom":n=kft;break;case"middle":n=Dft;break;default:throw new Error(`unknown dodge anchor: ${n}`)}return p7("y","x",n,Zt(r),i,t)}function h7(e){const{anchor:t,padding:n,...r}=e,{r:i}=r;return[{anchor:t,padding:n,r:i},r]}function p7(e,t,n,r,i,s){if(i!=null&&typeof i!="number"){let{channels:o,sort:a,reverse:c}=s;o=YT(o),(o==null?void 0:o.r)===void 0&&(s={...s,channels:{...o,r:{value:i,scale:"r"}}}),a===void 0&&c===void 0&&(s.sort={channel:"-r"})}return Br(s,function(o,a,c,l,u,f){let{[t]:d,r:h}=c;if(!c[t])throw new Error(`missing channel: ${t}`);({[t]:d}=pw(c,l,f));const p=h?void 0:i!==void 0?Zt(i):this.r!==void 0?this.r:3;h&&(h=Gt(h.value,l[h.scale]||It,Float64Array));let[g,b]=n(u);const y=g?Lft:Fft,m=new Float64Array(d.length),v=h?w=>h[w]:()=>p;for(let w of a){const _=Tft();w=w.filter(h?x=>sv(d[x])&&zo(h[x]):x=>sv(d[x]));const S=new Float64Array(2*w.length+2);for(const x of w){const T=v(x),$=g?T+r:0,I=d[x]-T,A=d[x]+T;let D=2;_.queryInterval(I-r,A+r,([,,E])=>{const N=m[E]-$,M=d[x]-d[E],R=r+(h?h[x]+h[E]:2*p),O=Math.sqrt(R*R-M*M);S[D++]=N-O,S[D++]=N+O});let F=S.slice(0,D);g&&(F=F.filter(E=>E>=0));t:for(const E of F.sort(y)){for(let N=0;N<D;N+=2)if(S[N]+1e-6<E&&E<S[N+1]-1e-6)continue t;m[x]=E+$;break}_.insert([I,A,x])}}g||(g=1);for(const w of a)for(const _ of w)m[_]=m[_]*g+b;return{data:o,facets:a,channels:{[e]:{value:m,source:null},[t]:{value:d,source:c[t]},...h&&{r:{value:h,source:c.r}}}}})}function Fft(e,t){return Math.abs(e)-Math.abs(t)}function Lft(e,t){return e-t}function Bft(e,t){return arguments.length===1&&({basis:e,...t}=e),j3(J3(e),t)}function Cft(e,t){return arguments.length===1&&({basis:e,...t}=e),V3(J3(e),t)}function J3(e){if(e===void 0)return N6;if(typeof e=="function")return $w(jT(e));if(/^p\d{2}$/i.test(e))return zd(PT(e));switch(`${e}`.toLowerCase()){case"deviation":return zft;case"first":return N6;case"last":return Pft;case"max":return jft;case"mean":return Vft;case"median":return Yft;case"min":return qft;case"sum":return Wft;case"extent":return Uft}throw new Error(`invalid basis: ${e}`)}function $w(e){return{mapIndex(t,n,r){const i=+e(t,n);for(const s of t)r[s]=n[s]===null?NaN:n[s]/i}}}function zd(e){return $w((t,n)=>e(t,r=>n[r]))}const Uft={mapIndex(e,t,n){const[r,i]=An(e,o=>t[o]),s=i-r;for(const o of e)n[o]=t[o]===null?NaN:(t[o]-r)/s}},N6=$w((e,t)=>{for(let n=0;n<e.length;++n){const r=t[e[n]];if(yr(r))return r}}),Pft=$w((e,t)=>{for(let n=e.length-1;n>=0;--n){const r=t[e[n]];if(yr(r))return r}}),zft={mapIndex(e,t,n){const r=Rb(e,s=>t[s]),i=Ry(e,s=>t[s]);for(const s of e)n[s]=t[s]===null?NaN:i?(t[s]-r)/i:0}},jft=zd(Be),Vft=zd(Rb),Yft=zd(jp),qft=zd(On),Wft=zd(Hs);function Gft(e,t={}){if(typeof e=="string")switch(e.toLowerCase()){case"first":return y7(t);case"last":return m7(t)}if(typeof e=="function")return yc(null,e,t);let n,r;for(n in e){if(r!==void 0)throw new Error("ambiguous selector; multiple inputs");r=Hft(e[n])}if(r===void 0)throw new Error(`invalid selector: ${e}`);return yc(n,r,t)}function Hft(e){if(typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"min":return tA;case"max":return eA}throw new Error(`unknown selector: ${e}`)}function y7(e){return yc(null,Jft,e)}function m7(e){return yc(null,tdt,e)}function Xft(e){return yc("x",tA,e)}function Qft(e){return yc("y",tA,e)}function Kft(e){return yc("x",eA,e)}function Zft(e){return yc("y",eA,e)}function*Jft(e){yield e[0]}function*tdt(e){yield e[e.length-1]}function*tA(e,t){yield wQ(e,n=>t[n])}function*eA(e,t){yield oT(e,n=>t[n])}function yc(e,t,n){if(e!=null){if(n[e]==null)throw new Error(`missing channel: ${e}`);e=n[e]}const r=kc(n);return to(n,(i,s)=>{const o=Gt(i,r),a=Gt(i,e),c=[];for(const l of s){const u=[];for(const f of o?sa(l,d=>o[d]).values():[l])for(const d of t(f,a))u.push(d);c.push(u)}return{data:i,facets:c}})}const $6=Object.freeze(Object.defineProperty({__proto__:null,Area:Iw,Arrow:vP,BarX:wP,BarY:_P,Cell:Ew,Contour:jP,Density:qP,Dot:Tw,Frame:JU,Geo:WP,Hexgrid:GP,Image:HP,Line:Aw,Link:mP,Mark:Me,Raster:FP,Rect:Mw,RuleX:fU,RuleY:dU,Text:ww,TickX:AP,TickY:MP,Tip:tP,Vector:_w,area:flt,areaX:iy,areaY:pd,arrow:glt,auto:Nlt,autoSpec:SP,axisFx:FU,axisFy:RU,axisX:S3,axisY:_3,barX:gl,barY:vl,bin:al,binX:Fa,binY:La,bollinger:Ml,bollingerX:Hlt,bollingerY:Xlt,boxX:Klt,boxY:Zlt,cell:df,cellX:blt,cellY:wlt,centroid:yft,circle:Ilt,cluster:pft,column:Xr,contour:dut,crosshair:put,crosshairX:yut,crosshairY:mut,delaunayLink:Nut,delaunayMesh:$ut,density:Fut,dodgeX:Oft,dodgeY:Rft,dot:Rc,dotX:Slt,dotY:xlt,filter:Bst,formatIsoDate:I5,formatMonth:rot,formatWeekday:iot,frame:E3,geo:H3,geoCentroid:mft,graticule:zut,gridFx:zU,gridFy:UU,gridX:PU,gridY:CU,group:ZT,groupX:ty,groupY:ey,groupZ:KT,hexagon:Elt,hexbin:jut,hexgrid:qut,hull:kut,identity:It,image:Qut,indexOf:zr,initializer:Br,interpolateNearest:PP,interpolateNone:Jx,interpolatorBarycentric:UP,interpolatorRandomWalk:zP,legend:ict,line:P3,lineX:sy,lineY:oy,linearRegressionX:ift,linearRegressionY:sft,link:gP,map:ea,mapX:j3,mapY:V3,marks:ls,normalize:J3,normalizeX:Bft,normalizeY:Cft,plot:T3,pointer:m3,pointerX:g3,pointerY:v3,raster:tut,rect:z3,rectX:yv,rectY:mv,reverse:Cst,ruleX:hc,ruleY:pc,scale:Hl,select:Gft,selectFirst:y7,selectLast:m7,selectMaxX:Kft,selectMaxY:Zft,selectMinX:Xft,selectMinY:Qft,shuffle:Ust,sort:g5,sphere:Put,spike:qat,stackX:uP,stackX1:Xct,stackX2:Qct,stackY:fP,stackY1:Kct,stackY2:Zct,text:fd,textX:mU,textY:gU,tickX:NP,tickY:$P,tip:eP,transform:to,tree:a7,treeLink:KP,treeNode:tI,valueof:Gt,vector:AU,vectorX:MU,vectorY:NU,voronoi:Dut,voronoiMesh:Out,window:Nw,windowX:Llt,windowY:Blt},Symbol.toStringTag,{value:"Module"})),edt=new Map([["style","style"],["width","width"],["height","height"],["margin","margin"],["marginLeft","marginLeft"],["marginRight","marginRight"],["marginTop","marginTop"],["marginBottom","marginBottom"],["align","align"],["aspectRatio","aspectRatio"],["axis","axis"],["inset","inset"],["grid","grid"],["label","label"],["padding","padding"],["round","round"],["xScale","x.type"],["xDomain","x.domain"],["xRange","x.range"],["xNice","x.nice"],["xInset","x.inset"],["xInsetLeft","x.insetLeft"],["xInsetRight","x.insetRight"],["xClamp","x.clamp"],["xRound","x.round"],["xAlign","x.align"],["xPadding","x.padding"],["xPaddingInner","x.paddingInner"],["xPaddingOuter","x.paddingOuter"],["xAxis","x.axis"],["xTicks","x.ticks"],["xTickSize","x.tickSize"],["xTickSpacing","x.tickSpacing"],["xTickPadding","x.tickPadding"],["xTickFormat","x.tickFormat"],["xTickRotate","x.tickRotate"],["xGrid","x.grid"],["xLine","x.line"],["xLabel","x.label"],["xLabelAnchor","x.labelAnchor"],["xLabelOffset","x.labelOffset"],["xFontVariant","x.fontVariant"],["xAriaLabel","x.ariaLabel"],["xAriaDescription","x.ariaDescription"],["xReverse","x.reverse"],["xZero","x.zero"],["yScale","y.type"],["yDomain","y.domain"],["yRange","y.range"],["yNice","y.nice"],["yInset","y.inset"],["yInsetTop","y.insetTop"],["yInsetBottom","y.insetBottom"],["yClamp","y.clamp"],["yRound","y.round"],["yAlign","y.align"],["yPadding","y.padding"],["yPaddingInner","y.paddingInner"],["yPaddingOuter","y.paddingOuter"],["yAxis","y.axis"],["yTicks","y.ticks"],["yTickSize","y.tickSize"],["yTickSpacing","y.tickSpacing"],["yTickPadding","y.tickPadding"],["yTickFormat","y.tickFormat"],["yTickRotate","y.tickRotate"],["yGrid","y.grid"],["yLine","y.line"],["yLabel","y.label"],["yLabelAnchor","y.labelAnchor"],["yLabelOffset","y.labelOffset"],["yFontVariant","y.fontVariant"],["yAriaLabel","y.ariaLabel"],["yAriaDescription","y.ariaDescription"],["yReverse","y.reverse"],["yZero","y.zero"],["facetMargin","facet.margin"],["facetMarginTop","facet.marginTop"],["facetMarginBottom","facet.marginBottom"],["facetMarginLeft","facet.marginLeft"],["facetMarginRight","facet.marginRight"],["facetGrid","facet.grid"],["facetLabel","facet.label"],["fxDomain","fx.domain"],["fxRange","fx.range"],["fxNice","fx.nice"],["fxInset","fx.inset"],["fxInsetLeft","fx.insetLeft"],["fxInsetRight","fx.insetRight"],["fxRound","fx.round"],["fxAlign","fx.align"],["fxPadding","fx.padding"],["fxPaddingInner","fx.paddingInner"],["fxPaddingOuter","fx.paddingOuter"],["fxAxis","fx.axis"],["fxTicks","fx.ticks"],["fxTickSize","fx.tickSize"],["fxTickSpacing","fx.tickSpacing"],["fxTickPadding","fx.tickPadding"],["fxTickFormat","fx.tickFormat"],["fxTickRotate","fx.tickRotate"],["fxGrid","fx.grid"],["fxLine","fx.line"],["fxLabel","fx.label"],["fxLabelAnchor","fx.labelAnchor"],["fxLabelOffset","fx.labelOffset"],["fxFontVariant","fx.fontVariant"],["fxAriaLabel","fx.ariaLabel"],["fxAriaDescription","fx.ariaDescription"],["fxReverse","fx.reverse"],["fyDomain","fy.domain"],["fyRange","fy.range"],["fyNice","fy.mice"],["fyInset","fy,inset"],["fyInsetTop","fy.insetTop"],["fyInsetBottom","fy.insetBottom"],["fyRound","fy.round"],["fyAlign","fy.align"],["fyPadding","fy.padding"],["fyPaddingInner","fy.paddingInner"],["fyPaddingOuter","fy.paddingOuter"],["fyAxis","fy.axis"],["fyTicks","fy.ticks"],["fyTickSize","fy.tickSize"],["fyTickSpacing","fy.tickSpacing"],["fyTickPadding","fy.tickPadding"],["fyTickFormat","fy.tickFormat"],["fyTickRotate","fy.tickRotate"],["fyGrid","fy.grid"],["fyLine","fy.line"],["fyLabel","fy.label"],["fyLabelAnchor","fy.labelAnchor"],["fyLabelOffset","fy.labelOffset"],["fyFontVariant","fy.fontVariant"],["fyAriaLabel","fy.ariaLabel"],["fyAriaDescription","fy.ariaDescription"],["fyReverse","fy.reverse"],["colorScale","color.type"],["colorDomain","color.domain"],["colorRange","color.range"],["colorClamp","color.clamp"],["colorNice","color.nice"],["colorScheme","color.scheme"],["colorInterpolate","color.interpolate"],["colorPivot","color.pivot"],["colorSymmetric","color.symmetric"],["colorLabel","color.label"],["colorReverse","color.reverse"],["colorZero","color.zero"],["colorTickFormat","color.tickFormat"],["opacityScale","opacity.type"],["opacityDomain","opacity.domain"],["opacityRange","opacity.range"],["opacityClamp","opacity.clamp"],["opacityNice","opacity.nice"],["opacityLabel","opacity.label"],["opacityReverse","opacity.reverse"],["opacityZero","opacity.zero"],["opacityTickFormat","opacity.tickFormat"],["rScale","r.type"],["rDomain","r.domain"],["rRange","r.range"],["rClamp","r.clamp"],["rNice","r.nice"],["rZero","r.zero"],["lengthScale","length.type"],["lengthDomain","length.domain"],["lengthRange","length.range"],["lengthClamp","length.clamp"],["lengthNice","length.nice"],["lengthZero","length.zero"],["projectionType","projection.type"],["projectionParallels","projection.parallels"],["projectionPrecision","projection.precision"],["projectionRotate","projection.rotate"],["projectionDomain","projection.domain"],["projectionInset","projection.inset"],["projectionInsetLeft","projection.insetLeft"],["projectionInsetRight","projection.insetRight"],["projectionInsetTop","projection.insetTop"],["projectionInsetBottom","projection.insetBottom"],["projectionClip","projection.clip"]]),ndt=new Set(["frame","hexgrid","sphere","graticule"]);function rdt(e,t,n){for(let r=0;r<t.length;++r){const i=t[r];r===t.length-1?e[i]=n:e=e[i]||(e[i]={})}}async function idt(e){const t={marks:[]},n=[],{attributes:r,marks:i}=e;for(const a in r){const c=edt.get(a);if(c==null)throw new Error(`Unrecognized plot attribute: ${a}`);const l=r[a];typeof l=="symbol"?n.push(a):l!==void 0&&rdt(t,c.split("."),l)}const s=[];for(const a of i)for(const{type:c,data:l,options:u}of a.plotSpecs())ndt.has(c)?t.marks.push($6[c](u)):t.marks.push($6[c](l,u)),s.push(a.index);odt(t,e);const o=T3(t);adt(o,s),sdt(e,o,r,n);for(const a of e.interactors)await a.init(o);return o}function sdt(e,t,n,r){r.forEach(i=>{const s=n[i];if(s===Wr){if(!i.endsWith("Domain"))throw new Error(`Unsupported fixed attribute: ${i}`);const o=i.slice(0,-6),a=t.scale(o);a!=null&&a.domain&&e.setAttribute(i,n[`${o}Reverse`]?a.domain.slice().reverse():a.domain)}else throw new Error(`Unrecognized symbol: ${s}`)})}function odt(e,t){const{marks:n}=t;v0("x",e,n,["x","x1","x2"]),v0("y",e,n,["y","y1","y2"]),v0("fx",e,n),v0("fy",e,n)}function v0(e,t,n,r=[e]){const i=t[e]||{};if(i.axis===null||i.label!==void 0)return;const s=n.map(u=>{var f;return(f=u.channelField(r))==null?void 0:f.field});if(s.every(u=>u==null))return;let o,a,c;for(let u=0;u<s.length;++u){const{column:f,label:d}=s[u]||{};f===void 0&&d===void 0||(o===void 0&&a===void 0?(o=f,a=d,c=cdt(n[u].data,r)||"number"):a!==d?a=void 0:o!==f&&(o=void 0))}let l=a||o;if(l!==void 0){if((c==="number"||c==="date")&&(e==="x"||e==="y")){i.percent&&(l=`${l} (%)`);const u=(e==="x"?1:-1)*(i.reverse?-1:1);e==="x"||i.labelAnchor==="center"?l=e==="x"==u<0?`← ${l}`:`${l} →`:l=`${u<0?"↑ ":"↓ "}${l}`}t[e]={...i,label:l}}}function adt(e,t){const n=e.querySelectorAll('g[aria-label="facet"]');if(n.length)for(const r of n)k6(r,t);else k6(e,t)}function k6(e,t){let n=-1;for(const r of e.children){const i=r.getAttribute("aria-label")||"";r.nodeName==="style"||i.includes("-axis")||i.includes("-grid")||r.setAttribute("data-index",t[++n])}}function cdt(e,t){for(const n of e)for(let r=0;r<t.length;++r){const i=n[t[r]];if(i!=null)return i instanceof Date?"date":typeof i}}const ldt={width:640,marginLeft:40,marginRight:20,marginTop:20,marginBottom:30};class udt{constructor(t){this.attributes={...ldt},this.listeners=null,this.interactors=[],this.legends=[],this.marks=[],this.markset=null,this.element=t||document.createElement("div"),this.element.setAttribute("class","plot"),this.element.style.display="flex",this.element.value=this,this.params=new Map,this.synch=MX()}margins(){return{left:this.getAttribute("marginLeft"),top:this.getAttribute("marginTop"),bottom:this.getAttribute("marginBottom"),right:this.getAttribute("marginRight")}}innerWidth(){const{left:t,right:n}=this.margins();return this.getAttribute("width")-t-n}innerHeight(){const{top:t,bottom:n}=this.margins();return this.getAttribute("height")-t-n}pending(t){this.synch.pending(t)}update(t){return this.synch.ready(t)&&!this.pendingRender&&(this.pendingRender=!0,requestAnimationFrame(()=>this.render())),this.synch.promise}async render(){this.pendingRender=!1;const t=await idt(this),n=this.legends.flatMap(({legend:r,include:i})=>{const s=r.init(t);return i?s:[]});this.element.replaceChildren(t,...n),this.synch.resolve()}getAttribute(t){return this.attributes[t]}setAttribute(t,n,r){var i,s;return q8(this.attributes[t],n)?(n===void 0?delete this.attributes[t]:this.attributes[t]=n,r!=null&&r.silent||(s=(i=this.listeners)==null?void 0:i.get(t))==null||s.forEach(o=>o(t,n)),!0):!1}addAttributeListener(t,n){const r=this.listeners||(this.listeners=new Map);return r.has(t)||r.set(t,new Set),r.get(t).add(n),this}removeAttributeListener(t,n){var r,i;return(i=(r=this.listeners)==null?void 0:r.get(t))==null?void 0:i.delete(n)}addParams(t,n){const{params:r}=this;for(const i of n)r.has(i)?r.get(i).push(t):(r.set(i,[t]),i.addEventListener("value",()=>Promise.allSettled(r.get(i).map(s=>s.requestQuery()))))}addMark(t){return t.setPlot(this,this.marks.length),this.marks.push(t),this.markset=null,this}get markSet(){return this.markset||(this.markset=new Set(this.marks))}addInteractor(t){return this.interactors.push(t),this}addLegend(t,n=!0){t.setPlot(this),this.legends.push({legend:t,include:n})}}function we(...e){const t=new udt;return e.flat().forEach(n=>n(t)),t.marks.forEach(n=>Dn().connect(n)),t.element}class fdt extends Map{request(t,n){if(this.has(t))n(this.get(t));else{const r=this.waiting||(this.waiting=new Map),i=r.get(t)||[];r.set(t,i.concat(n))}}set(t,n){this.has(t)&&console.warn(`Overwriting named plot "${t}".`);const{waiting:r}=this;return r!=null&&r.has(t)&&(r.get(t).forEach(i=>i(n)),r.delete(t)),super.set(t,n)}}const g7=new fdt;function ddt(e){return t=>g7.set(e,t)}function v7(e,t,n){Qa(n)?(n.addEventListener("value",r=>{e.setAttribute(t,r),e.update()}),n.value!==void 0&&e.setAttribute(t,n.value)):e.setAttribute(t,n)}function b7(e,t){return n=>{v7(n,e,t)}}function nA(e){return t=>{for(const[n,r]of Object.entries(e))v7(t,n,r)}}function w7(e){const{top:t,bottom:n,left:r,right:i}=e,s={};return t!==void 0&&(s.marginTop=t),n!==void 0&&(s.marginBottom=n),r!==void 0&&(s.marginLeft=r),i!==void 0&&(s.marginRight=i),nA(s)}function wv(e){return nA({xDomain:e,yDomain:e})}const B=e=>t=>b7(e,t),_7=B("style"),Nn=B("width"),Un=B("height"),_v=B("margin"),pf=B("marginLeft"),cI=B("marginRight"),Sv=B("marginTop"),S7=B("marginBottom"),hdt=B("align"),pdt=B("aspectRatio"),ydt=B("axis"),mdt=B("inset"),gdt=B("grid"),vdt=B("label"),bdt=B("padding"),wdt=B("round"),_dt=B("xScale"),ur=B("xDomain"),Sdt=B("xRange"),xdt=B("xNice"),Idt=B("xInset"),Edt=B("xInsetLeft"),Tdt=B("xInsetRight"),Adt=B("xClamp"),Mdt=B("xRound"),Ndt=B("xAlign"),$dt=B("xPadding"),kdt=B("xPaddingInner"),Ddt=B("xPaddingOuter"),ay=B("xAxis"),Odt=B("xTicks"),Rdt=B("xTickSize"),Fdt=B("xTickSpacing"),Ldt=B("xTickPadding"),rA=B("xTickFormat"),Bdt=B("xTickRotate"),Cdt=B("xGrid"),Udt=B("xLine"),fp=B("xLabel"),Pdt=B("xLabelAnchor"),zdt=B("xLabelOffset"),jdt=B("xFontVariant"),Vdt=B("xAriaLabel"),Ydt=B("xAriaDescription"),qdt=B("xReverse"),Wdt=B("xZero"),lI=B("yScale"),Za=B("yDomain"),Gdt=B("yRange"),Hdt=B("yNice"),Xdt=B("yInset"),Qdt=B("yInsetTop"),Kdt=B("yInsetBottom"),Zdt=B("yClamp"),Jdt=B("yRound"),tht=B("yAlign"),eht=B("yPadding"),nht=B("yPaddingInner"),rht=B("yPaddingOuter"),cy=B("yAxis"),iht=B("yTicks"),sht=B("yTickSize"),oht=B("yTickSpacing"),aht=B("yTickPadding"),Ja=B("yTickFormat"),cht=B("yTickRotate"),xv=B("yGrid"),lht=B("yLine"),iA=B("yLabel"),uht=B("yLabelAnchor"),fht=B("yLabelOffset"),dht=B("yFontVariant"),hht=B("yAriaLabel"),pht=B("yAriaDescription"),x7=B("yReverse"),yht=B("yZero"),mht=B("facetMargin"),ght=B("facetMarginTop"),vht=B("facetMarginBottom"),bht=B("facetMarginLeft"),wht=B("facetMarginRight"),_ht=B("facetGrid"),Sht=B("facetLabel"),xht=B("fxDomain"),Iht=B("fxRange"),Eht=B("fxNice"),Tht=B("fxInset"),Aht=B("fxInsetLeft"),Mht=B("fxInsetRight"),Nht=B("fxRound"),$ht=B("fxAlign"),kht=B("fxPadding"),Dht=B("fxPaddingInner"),Oht=B("fxPaddingOuter"),Rht=B("fxAxis"),Fht=B("fxTicks"),Lht=B("fxTickSize"),Bht=B("fxTickSpacing"),Cht=B("fxTickPadding"),Uht=B("fxTickFormat"),Pht=B("fxTickRotate"),zht=B("fxGrid"),jht=B("fxLine"),Vht=B("fxLabel"),Yht=B("fxLabelAnchor"),qht=B("fxLabelOffset"),Wht=B("fxFontVariant"),Ght=B("fxAriaLabel"),Hht=B("fxAriaDescription"),Xht=B("fxReverse"),Qht=B("fyDomain"),Kht=B("fyRange"),Zht=B("fyNice"),Jht=B("fyInset"),tpt=B("fyInsetTop"),ept=B("fyInsetBottom"),npt=B("fyRound"),rpt=B("fyAlign"),ipt=B("fyPadding"),spt=B("fyPaddingInner"),opt=B("fyPaddingOuter"),apt=B("fyAxis"),cpt=B("fyTicks"),lpt=B("fyTickSize"),upt=B("fyTickSpacing"),fpt=B("fyTickPadding"),dpt=B("fyTickFormat"),hpt=B("fyTickRotate"),ppt=B("fyGrid"),ypt=B("fyLine"),mpt=B("fyLabel"),gpt=B("fyLabelAnchor"),vpt=B("fyLabelOffset"),bpt=B("fyFontVariant"),wpt=B("fyAriaLabel"),_pt=B("fyAriaDescription"),Spt=B("fyReverse"),uI=B("colorScale"),ly=B("colorDomain"),fI=B("colorRange"),xpt=B("colorClamp"),Ipt=B("colorNice"),Yo=B("colorScheme"),Ept=B("colorInterpolate"),Tpt=B("colorPivot"),Apt=B("colorSymmetric"),Mpt=B("colorLabel"),Npt=B("colorReverse"),$pt=B("colorZero"),kpt=B("colorTickFormat"),Dpt=B("opacityScale"),Opt=B("opacityDomain"),Rpt=B("opacityRange"),Fpt=B("opacityClamp"),Lpt=B("opacityNice"),Bpt=B("opacityLabel"),Cpt=B("opacityReverse"),Upt=B("opacityZero"),Ppt=B("opacityTickFormat"),zpt=B("rScale"),I7=B("rDomain"),E7=B("rRange"),jpt=B("rClamp"),Vpt=B("rNice"),Ypt=B("rZero"),qpt=B("lengthScale"),Wpt=B("lengthDomain"),Gpt=B("lengthRange"),Hpt=B("lengthClamp"),Xpt=B("lengthNice"),Qpt=B("lengthZero"),T7=B("projectionType"),Kpt=B("projectionParallels"),Zpt=B("projectionPrecision"),A7=B("projectionRotate"),Jpt=B("projectionDomain"),tyt=B("projectionInset"),eyt=B("projectionInsetLeft"),nyt=B("projectionInsetRight"),ryt=B("projectionInsetTop"),iyt=B("projectionInsetBottom"),syt=B("projectionClip"),oyt=Object.freeze(Object.defineProperty({__proto__:null,align:hdt,aspectRatio:pdt,attribute:b7,attributes:nA,axis:ydt,colorClamp:xpt,colorDomain:ly,colorInterpolate:Ept,colorLabel:Mpt,colorNice:Ipt,colorPivot:Tpt,colorRange:fI,colorReverse:Npt,colorScale:uI,colorScheme:Yo,colorSymmetric:Apt,colorTickFormat:kpt,colorZero:$pt,facetGrid:_ht,facetLabel:Sht,facetMargin:mht,facetMarginBottom:vht,facetMarginLeft:bht,facetMarginRight:wht,facetMarginTop:ght,fxAlign:$ht,fxAriaDescription:Hht,fxAriaLabel:Ght,fxAxis:Rht,fxDomain:xht,fxFontVariant:Wht,fxGrid:zht,fxInset:Tht,fxInsetLeft:Aht,fxInsetRight:Mht,fxLabel:Vht,fxLabelAnchor:Yht,fxLabelOffset:qht,fxLine:jht,fxNice:Eht,fxPadding:kht,fxPaddingInner:Dht,fxPaddingOuter:Oht,fxRange:Iht,fxReverse:Xht,fxRound:Nht,fxTickFormat:Uht,fxTickPadding:Cht,fxTickRotate:Pht,fxTickSize:Lht,fxTickSpacing:Bht,fxTicks:Fht,fyAlign:rpt,fyAriaDescription:_pt,fyAriaLabel:wpt,fyAxis:apt,fyDomain:Qht,fyFontVariant:bpt,fyGrid:ppt,fyInset:Jht,fyInsetBottom:ept,fyInsetTop:tpt,fyLabel:mpt,fyLabelAnchor:gpt,fyLabelOffset:vpt,fyLine:ypt,fyNice:Zht,fyPadding:ipt,fyPaddingInner:spt,fyPaddingOuter:opt,fyRange:Kht,fyReverse:Spt,fyRound:npt,fyTickFormat:dpt,fyTickPadding:fpt,fyTickRotate:hpt,fyTickSize:lpt,fyTickSpacing:upt,fyTicks:cpt,grid:gdt,height:Un,inset:mdt,label:vdt,lengthClamp:Hpt,lengthDomain:Wpt,lengthNice:Xpt,lengthRange:Gpt,lengthScale:qpt,lengthZero:Qpt,margin:_v,marginBottom:S7,marginLeft:pf,marginRight:cI,marginTop:Sv,margins:w7,name:ddt,opacityClamp:Fpt,opacityDomain:Opt,opacityLabel:Bpt,opacityNice:Lpt,opacityRange:Rpt,opacityReverse:Cpt,opacityScale:Dpt,opacityTickFormat:Ppt,opacityZero:Upt,padding:bdt,projectionClip:syt,projectionDomain:Jpt,projectionInset:tyt,projectionInsetBottom:iyt,projectionInsetLeft:eyt,projectionInsetRight:nyt,projectionInsetTop:ryt,projectionParallels:Kpt,projectionPrecision:Zpt,projectionRotate:A7,projectionType:T7,rClamp:jpt,rDomain:I7,rNice:Vpt,rRange:E7,rScale:zpt,rZero:Ypt,round:wdt,style:_7,width:Nn,xAlign:Ndt,xAriaDescription:Ydt,xAriaLabel:Vdt,xAxis:ay,xClamp:Adt,xDomain:ur,xFontVariant:jdt,xGrid:Cdt,xInset:Idt,xInsetLeft:Edt,xInsetRight:Tdt,xLabel:fp,xLabelAnchor:Pdt,xLabelOffset:zdt,xLine:Udt,xNice:xdt,xPadding:$dt,xPaddingInner:kdt,xPaddingOuter:Ddt,xRange:Sdt,xReverse:qdt,xRound:Mdt,xScale:_dt,xTickFormat:rA,xTickPadding:Ldt,xTickRotate:Bdt,xTickSize:Rdt,xTickSpacing:Fdt,xTicks:Odt,xZero:Wdt,xyDomain:wv,yAlign:tht,yAriaDescription:pht,yAriaLabel:hht,yAxis:cy,yClamp:Zdt,yDomain:Za,yFontVariant:dht,yGrid:xv,yInset:Xdt,yInsetBottom:Kdt,yInsetTop:Qdt,yLabel:iA,yLabelAnchor:uht,yLabelOffset:fht,yLine:lht,yNice:Hdt,yPadding:eht,yPaddingInner:nht,yPaddingOuter:rht,yRange:Gdt,yReverse:x7,yRound:Jdt,yScale:lI,yTickFormat:Ja,yTickPadding:aht,yTickRotate:cht,yTickSize:sht,yTickSpacing:oht,yTicks:iht,yZero:yht},Symbol.toStringTag,{value:"Module"}));function de(e,t){return{table:e,options:t}}function sA(e){return typeof e!="string"?!1:(e=e.toLowerCase().trim(),e==="none"||e==="currentcolor"||e.startsWith("url(")&&e.endsWith(")")||e.startsWith("var(")&&e.endsWith(")")||uc(e)!==null)}const ayt=new Set(["order","sort","label","anchor","curve","tension","marker","markerStart","markerMid","markerEnd","textAnchor","lineAnchor","lineHeight","textOverflow","monospace","fontFamily","fontSize","fontStyle","fontVariant","fontWeight","frameAnchor","strokeLinejoin","strokeLinecap","strokeMiterlimit","strokeDasharray","strokeDashoffset","mixBlendMode","shapeRendering","imageRendering","preserveAspectRatio","interpolate","crossOrigin","paintOrder","pointerEvents"]);function cyt(e){return ayt.has(e)}const lyt=new Set(["asterisk","circle","cross","diamond","diamond2","hexagon","plus","square","square2","star","times","triangle","triangle2","wye"]);function uyt(e){return lyt.has(`${e}`.toLowerCase())}function oA(e){return typeof(e==null?void 0:e.getChild)=="function"}const fyt=2,dyt=10;function M7(e){return oA(e)?hyt(e):e}function hyt(e){const{batches:t,numRows:n}=e;if(!n)return[];const r=Array.from({length:n},()=>({}));for(let i=0,s=0;s<t.length;++s){const o=t[s],{schema:a,numRows:c,numCols:l}=o;for(let u=0;u<l;++u){const f=o.getChildAt(u),{name:d,type:h}=a.fields[u],p=pyt(h);for(let g=i,b=0;b<c;++b,++g)r[g][d]=p(f.get(b))}i+=c}return r}function pyt(e){const{typeId:t}=e;return t===dyt?n=>n==null?n:new Date(n):t===fyt&&e.bitWidth>=64?n=>n==null?n:Number(n):n=>n}const N7=e=>e==="stroke"||e==="fill",yyt=e=>e==="symbol",myt=(e,t)=>e!=="sort"&&t!=null&&!Array.isArray(t),_2=(e,t)=>({channel:e,field:t,as:t instanceof ac?t.column:e}),S2=(e,t)=>({channel:e,value:t});class jd extends Oy{constructor(t,n,r,i={}){var c;super((c=n==null?void 0:n.options)==null?void 0:c.filterBy),this.type=t,this.reqs=i,this.source=n,Array.isArray(this.source)&&(this.data=this.source);const s=this.channels=[],o=this.params=new Set,a=(l,u)=>{const f=typeof u;if(f==="function"&&u[K8]){const d=u(this,l);for(const h in d)a(h,d[h])}else if(f==="string")cyt(l)||N7(l)&&sA(u)||yyt(l)&&uyt(u)?s.push(S2(l,u)):s.push(_2(l,KE(u)));else if(Zf(u))if(Array.isArray(u.columns))s.push(_2(l,u)),o.add(u);else{const d=S2(l,u.value);s.push(d),u.addEventListener("value",h=>(d.value=h,this.update()))}else f==="object"&&myt(l,u)?s.push(_2(l,u)):u!==void 0&&s.push(S2(l,u))};for(const l in r)a(l,r[l])}setPlot(t,n){var r;this.plot=t,this.index=n,t.addParams(this,this.params),(r=this.source)!=null&&r.table&&this.queryPending()}hasOwnData(){return this.source==null||Array.isArray(this.source)}channel(t){return this.channels.find(n=>n.channel===t)}channelField(...t){const n=t.flat();for(const r of n){const i=this.channel(r);if(i!=null&&i.field)return i}return null}fields(){var s,o,a;if(this.hasOwnData())return null;const{source:{table:t},channels:n,reqs:r}=this,i=new Map;for(const{channel:c,field:l}of n){const u=l==null?void 0:l.column;if(u){if((s=l.stats)!=null&&s.length||r[c]){i.has(u)||i.set(u,new Set);const f=i.get(u);(o=r[c])==null||o.forEach(d=>f.add(d)),(a=l.stats)==null||a.forEach(d=>f.add(d))}}else continue}return Array.from(i,([c,l])=>({table:t,column:c,stats:Array.from(l)}))}fieldInfo(t){return this.stats=t.reduce((n,r)=>(n[r.column]=r,n),Object.create(null)),this}query(t=[]){if(this.hasOwnData())return null;const{channels:n,source:{table:r}}=this;return $7(n,r).where(t)}queryPending(){return this.plot.pending(this),this}queryResult(t){return this.data=M7(t),this}update(){return this.plot.update(this)}plotSpecs(){const{type:t,data:n,channels:r}=this,i={};for(const s of r)i[s.channel]=Pa(s);return[{type:t,data:n,options:i}]}}function Pa(e){return Object.hasOwn(e,"value")?e.value:N7(e.channel)?{value:e.as,scale:"color"}:e.as}function $7(e,t,n=[]){const r=Yt.from({source:t}),i=new Set;let s=!1;for(const o of e){const{channel:a,field:c,as:l}=o;if(!n.includes(a)){if(a==="order")r.orderby(o.value);else if(c){if(c.aggregate)s=!0;else{if(i.has(l))continue;i.add(l)}r.select({[l]:c})}}}return s&&r.groupby(Array.from(i)),r}function mc(e,t,n){if(!e.stats)return r;const{field:r}=e.channelField(t),{type:i}=e.stats[r.column];return n=n??r,i==="date"?U8(n):n}function dI(e,t,n,r,i=!1,s=1){const o=(r-s)/(n-t),a=o!==1?` * ${o}::DOUBLE`:"";return i?X`(${+n} - ${e}::DOUBLE)${a}`:X`(${e}::DOUBLE - ${+t})${a}`}const k7={x:["min","max"]},D7={y:["min","max"]},O7={...k7,...D7};function R7(e,t,n,r,i){const{plot:s,stats:o}=e,a=s.getAttribute(r),c=s.getAttribute(i);if(Array.isArray(a)&&!a[Bl])return a;{const{field:l}=e.channelField(n),{column:u}=l,{min:f,max:d}=o[u],h=F7(t,u)||(c?Hb().domain([f,d]).nice().domain():[f,d]);return a!==Wr&&(h[Bl]=!0),s.setAttribute(r,h,{silent:!0}),h}}function um(e,t){return R7(e,t,"x","xDomain","xNice")}function fm(e,t){return R7(e,t,"y","yDomain","yNice")}function F7(e,t){if(!e)return;let n,r;const i=(s,o)=>{if(s==="BETWEEN"&&o.field.column===t){const{range:a}=o;a&&(n==null||a[0]<n)&&(n=a[0]),a&&(r==null||a[1]>r)&&(r=a[1])}};return Array.isArray(e)?e.forEach(s=>{var o;return(o=s.visit)==null?void 0:o.call(s,i)}):e.visit&&e.visit(i),n!=null&&r!=null&&n!==r?[n,r]:void 0}class gyt extends jd{constructor(t,n,r){const i=t.endsWith("X")?"y":"x",s={[i]:["count","min","max"]};super(t,n,r,s),this.dim=i}query(t=[]){const{plot:n,dim:r,source:i,stats:s}=this,{optimize:o=!0}=i.options||{},{field:a,as:c}=this.channelField(r),l=super.query(t);if(o){const{column:u}=a,{count:f,max:d,min:h}=s[u],p=r==="x"?n.innerWidth():n.innerHeight(),[g,b]=F7(t,u)||[h,d],y=(b-g)/(d-h);if(f*y>p*4){const m=mc(this,r,c),v=this.channelField(r==="x"?"y":"x").as,w=l.select().map(_=>_.as).filter(_=>_!==c&&_!==v);return vyt(l,m,c,v,g,b,p,w)}}return l.orderby(c)}}function vyt(e,t,n,r,i,s,o,a=[]){const c=X`FLOOR(${o/(s-i)}::DOUBLE * (${t} - ${+i}::DOUBLE))::INTEGER`,l=u=>Yt.from(e).select(u).groupby(c,a);return Yt.union(l([{[n]:Cp(n),[r]:UN(r,n)},...a]),l([{[n]:Bp(n),[r]:PN(r,n)},...a]),l([{[n]:UN(n,r),[r]:Cp(r)},...a]),l([{[n]:PN(n,r),[r]:Bp(r)},...a])).orderby(a,n)}function hI(e,t=!1){const n=new Float64Array(5),r=new Float64Array(4);byt(n,r,e);const i=Float64Array.of(0,r[1]-n[1]*r[0],r[2]-n[2]*r[0],r[3]-n[3]*r[0],-n[4]*r[0]),s=1+n[1]+n[2]+n[3]+n[4],o=(r[0]+r[1]+r[2]+r[3])/s,a=(i[1]+i[2]+i[3]+i[4])/s;return{sigma:e,negative:t,a:n,b_causal:r,b_anticausal:i,sum_causal:o,sum_anticausal:a}}function byt(e,t,n){const i=Float64Array.of(.84,1.8675,.84,-1.8675,-.34015,-.1299,-.34015,.1299),s=Math.exp(-1.783/n),o=Math.exp(-1.723/n),a=.6318/n,c=1.997/n,l=Float64Array.of(-s*Math.cos(a),s*Math.sin(a),-s*Math.cos(-a),s*Math.sin(-a),-o*Math.cos(c),o*Math.sin(c),-o*Math.cos(-c),o*Math.sin(-c)),u=n*2.5066282746310007,f=Float64Array.of(i[0],i[1],0,0,0,0,0,0),d=Float64Array.of(1,0,l[0],l[1],0,0,0,0,0,0);let h,p;for(p=2;p<8;p+=2){for(f[p]=l[p]*f[p-2]-l[p+1]*f[p-1],f[p+1]=l[p]*f[p-1]+l[p+1]*f[p-2],h=p-2;h>0;h-=2)f[h]+=l[p]*f[h-2]-l[p+1]*f[h-1],f[h+1]+=l[p]*f[h-1]+l[p+1]*f[h-2];for(h=0;h<=p;h+=2)f[h]+=i[p]*d[h]-i[p+1]*d[h+1],f[h+1]+=i[p]*d[h+1]+i[p+1]*d[h];for(d[p+2]=l[p]*d[p]-l[p+1]*d[p+1],d[p+3]=l[p]*d[p+1]+l[p+1]*d[p],h=p;h>0;h-=2)d[h]+=l[p]*d[h-2]-l[p+1]*d[h-1],d[h+1]+=l[p]*d[h-1]+l[p+1]*d[h-2]}for(p=0;p<4;++p)h=p<<1,t[p]=f[h]/u,e[p+1]=d[h+2]}function wyt(e,t,n,[r,i]){const s=new Float64Array(Math.max(r,i)),o=new Float64Array(Math.max(r,i)),a=new Float64Array(5),c=new Float64Array(n.length);for(let l=0,u=0;l<i;++l,u+=r){const f=c.subarray(u);pI(e,n.subarray(u),r,1,s,o,a,f)}for(let l=0;l<r;++l){const u=c.subarray(l);pI(t,u,i,r,s,o,a,u)}return c}function pI(e,t,n,r=1,i=new Float64Array(n),s=new Float64Array(n),o=new Float64Array(5),a=i,c=_yt){const l=r*2,u=r*3,f=r*4,d=r*n;let h,p;for(c(i,t,n,r,e.b_causal,3,e.a,4,e.sum_causal,o,e.sigma),p=4,h=f;p<n;++p,h+=r)i[p]=e.b_causal[0]*t[h]+e.b_causal[1]*t[h-r]+e.b_causal[2]*t[h-l]+e.b_causal[3]*t[h-u]-e.a[1]*i[p-1]-e.a[2]*i[p-2]-e.a[3]*i[p-3]-e.a[4]*i[p-4];for(c(s,t,n,-r,e.b_anticausal,4,e.a,4,e.sum_anticausal,o,e.sigma),p=4,h=d-r*5;p<n;++p,h-=r)s[p]=e.b_anticausal[1]*t[h+r]+e.b_anticausal[2]*t[h+l]+e.b_anticausal[3]*t[h+u]+e.b_anticausal[4]*t[h+f]-e.a[1]*s[p-1]-e.a[2]*s[p-2]-e.a[3]*s[p-3]-e.a[4]*s[p-4];if(e.negative)for(p=0,h=0;p<n;++p,h+=r)a[h]=i[p]+s[n-p-1];else for(p=0,h=0;p<n;++p,h+=r)a[h]=Math.max(0,i[p]+s[n-p-1]);return a}function _yt(e,t,n,r,i,s,o,a,c,l){const u=Math.abs(r)*n,f=r<0?u+r:0;let d,h,p;for(h=0;h<a;++h)for(l[h]=h<=s?i[h]:0,p=1;p<=a&&p<=h;++p)l[h]-=o[p]*l[h-p];for(p=0;p<a;++p)for(e[p]=0,h=1;h<=p;++h)d=f+r*h,d>=0&&d<u&&(e[p]+=l[p-h]*t[d]);const g=t[f];if(g>0)for(p=0;p<a;++p)e[p]+=l[p]*g}function Syt(e,t){return L7(new Float64Array(e),t)}function xyt(e,t,n,r=[]){return r.length?Object.values(Iyt(e*t,n,r)):[{grid:L7(new Float64Array(e*t),n)}]}function L7(e,t){if(oA(t)){const n=t.numRows;if(n===0)return e;const r=t.getChild("index").toArray(),i=t.getChild("value").toArray();for(let s=0;s<n;++s)e[r[s]]=i[s]}else for(const n of t)e[n.index]=n.value;return e}function Iyt(e,t,n){const r={},i=s=>(r[s]||(r[s]={key:s,grid:new Float64Array(e)})).grid;if(oA(t)){const s=t.numRows;if(s===0)return r;const o=t.getChild("index").toArray(),a=t.getChild("value").toArray(),c=n.map(l=>t.getChild(l));for(let l=0;l<s;++l){const u=c.map(f=>f.get(l));i(u)[o[l]]=a[l]}}else for(const s of t){const o=n.map(a=>s[a]);i(o)[s.index]=s.value}return r}function Mi(e,t,n,r){Qa(n)?(r=r||(()=>e.requestUpdate()),n.addEventListener("value",i=>(e[t]=i,r())),e[t]=n.value):e[t]=n}class B7 extends jd{constructor(t,n,r){const{bins:i=1024,bandwidth:s=20,...o}=r,a=t.endsWith("X")?"y":"x";super(t,n,o,a==="x"?k7:D7),this.dim=a,Mi(this,"bins",i),Mi(this,"bandwidth",s,()=>this.grid?this.convolve().update():null)}get filterIndexable(){const t=this.dim==="x"?"xDomain":"yDomain",n=this.plot.getAttribute(t);return n&&!n[Bl]}query(t=[]){if(this.hasOwnData())throw new Error("Density1DMark requires a data source");const{bins:n,channels:r,dim:i,source:{table:s}}=this,[o,a]=this.extent=(i==="x"?um:fm)(this,t),c=mc(this,i);return Eyt($7(r,s,[i]).where(t.concat(Jr(c,[o,a]))),dI(c,o,a,n),this.channelField("weight")?"weight":null)}queryResult(t){return this.grid=Syt(this.bins,t),this.convolve()}convolve(){const{bins:t,bandwidth:n,dim:r,grid:i,plot:s,extent:[o,a]}=this,c=i.some(m=>m<0),l=r==="x"?s.innerWidth():s.innerHeight(),u=hI(n*(t-1)/l,c),f=pI(u,i,t),d=this.data=[],h=r==="x"?"y":"x",p=this.channelField(r).as,g=+o,b=(a-g)/(t-1),y=1/b;for(let m=0;m<t;++m)d.push({[p]:g+m*b,[h]:f[m]*y});return this}plotSpecs(){const{type:t,data:n,channels:r,dim:i}=this,s=i==="x"?{y:"y"}:{x:"x"};for(const o of r)s[o.channel]=Pa(o);return[{type:t,data:n,options:s}]}}function Eyt(e,t,n){const r=n?`* ${n}`:"",i=e.clone().select({p:t,i:X`FLOOR(p)::INTEGER`,w:X`(FLOOR(p) + 1 - p)${r}`}),s=e.clone().select({p:t,i:X`FLOOR(p)::INTEGER + 1`,w:X`(p - FLOOR(p))${r}`});return Yt.from(Yt.unionAll(i,s)).select({index:"i",value:Md("w")}).groupby("index").having(C8("value",0))}class kw extends jd{constructor(t,n,r){const{bandwidth:i=20,binType:s="linear",binWidth:o=2,binPad:a=1,...c}=r,l=Tyt(c);super(t,n,c,O7),this.densityMap=l,Mi(this,"bandwidth",i,()=>this.grids?this.convolve().update():null),Mi(this,"binWidth",o),Mi(this,"binType",s),Mi(this,"binPad",a)}setPlot(t,n){const r=()=>{this.stats&&this.requestUpdate()};return t.addAttributeListener("domainX",r),t.addAttributeListener("domainY",r),super.setPlot(t,n)}get filterIndexable(){const t=this.plot.getAttribute("xDomain"),n=this.plot.getAttribute("yDomain");return t&&n&&!t[Bl]&&!n[Bl]}query(t=[]){const{plot:n,binType:r,binPad:i,channels:s,densityMap:o,source:a}=this,[c,l]=this.extentX=um(this,t),[u,f]=this.extentY=fm(this,t),[d,h]=this.bins=this.binDimensions(this),p=mc(this,"x"),g=mc(this,"y"),b=!!n.getAttribute("xReverse"),y=!!n.getAttribute("yReverse"),m=D6(p,c,l,d,b,this.binPad),v=D6(g,u,f,h,y,this.binPad),w=i?[Jr(p,[c,l]),Jr(g,[u,f])]:[p1(c,p),h1(p,l),p1(u,g),h1(g,f)],_=Yt.from(a.table).where(t.concat(w)),S=this.groupby=[];let x=kn();for(const T of s)if(Object.hasOwn(T,"field")){const{as:$,channel:I,field:A}=T;A.aggregate?(x=A,o[I]=!0):I==="weight"?x=Md(A):I!=="x"&&I!=="y"&&(_.select({[$]:A}),S.push($))}return r==="linear"?Myt(_,m,v,x,d,S):Ayt(_,m,v,x,d,S)}binDimensions(){const{plot:t,binWidth:n}=this;return[Math.round(t.innerWidth()/n),Math.round(t.innerHeight()/n)]}queryResult(t){const[n,r]=this.bins;return this.grids=xyt(n,r,t,this.groupby),this.convolve()}convolve(){const{bandwidth:t,bins:n,grids:r,plot:i}=this;if(t<=0)this.kde=this.grids.map(({key:s,grid:o})=>(o.key=s,o));else{const s=i.innerWidth(),o=i.innerHeight(),[a,c]=n,l=r.some(({grid:d})=>d.some(h=>h<0)),u=hI(t*(a-1)/s,l),f=hI(t*(c-1)/o,l);this.kde=this.grids.map(({key:d,grid:h})=>{const p=wyt(u,f,h,n);return p.key=d,p})}return this}plotSpecs(){throw new Error("Unimplemented. Use a Grid2D mark subclass.")}}function Tyt(e){const t={};for(const n in e)e[n]==="density"&&(delete e[n],t[n]=!0);return t}function D6(e,t,n,r,i,s){const o=(r-s)/(n-t),a=o!==1?` * ${o}::DOUBLE`:"";return i?X`(${n} - ${e}::DOUBLE)${a}`:X`(${e}::DOUBLE - ${t})${a}`}function Ayt(e,t,n,r,i,s){return e.select({index:X`FLOOR(${t})::INTEGER + FLOOR(${n})::INTEGER * ${i}`,value:r}).groupby("index",s)}function Myt(e,t,n,r,i,s){const o=r.column?`* ${r.column}`:"",a=(d,h)=>e.clone().select({xp:t,yp:n,i:d,w:h}),c=a(X`FLOOR(xp)::INTEGER + FLOOR(yp)::INTEGER * ${i}`,X`(FLOOR(xp)::INTEGER + 1 - xp) * (FLOOR(yp)::INTEGER + 1 - yp)${o}`),l=a(X`FLOOR(xp)::INTEGER + (FLOOR(yp)::INTEGER + 1) * ${i}`,X`(FLOOR(xp)::INTEGER + 1 - xp) * (yp - FLOOR(yp)::INTEGER)${o}`),u=a(X`FLOOR(xp)::INTEGER + 1 + FLOOR(yp)::INTEGER * ${i}`,X`(xp - FLOOR(xp)::INTEGER) * (FLOOR(yp)::INTEGER + 1 - yp)${o}`),f=a(X`FLOOR(xp)::INTEGER + 1 + (FLOOR(yp)::INTEGER + 1) * ${i}`,X`(xp - FLOOR(xp)::INTEGER) * (yp - FLOOR(yp)::INTEGER)${o}`);return Yt.from(Yt.unionAll(c,l,u,f)).select({index:"i",value:Md("w")},s).groupby("index",s).having(C8("value",0))}class Nyt extends kw{constructor(t,n){const{type:r="dot",binsX:i,binsY:s,...o}=n;o.binPad=o.binPad??0,super(r,t,o),Mi(this,"binsX",i),Mi(this,"binsY",s)}convolve(){super.convolve();const{bins:t,binPad:n,extentX:r,extentY:i}=this,[s,o]=t,[a,c]=r,[l,u]=i,f=(c-a)/(s-n),d=(u-l)/(o-n),h=n?0:.5;return this.data=$yt(this.kde,t,a,l,f,d,h),this}binDimensions(){const{plot:t,binWidth:n,binsX:r,binsY:i}=this;return[r??Math.round(t.innerWidth()/n),i??Math.round(t.innerHeight()/n)]}plotSpecs(){const{type:t,channels:n,densityMap:r,data:i}=this,s={};for(const o of n){const{channel:a}=o;s[a]=a==="x"||a==="y"?a:Pa(o)}for(const o in r)r[o]&&(s[o]="density");return[{type:t,data:i,options:s}]}}function $yt(e,t,n,r,i,s,o){const a=1/(i*s),[c,l]=t,u=[];for(const f of e)for(let d=0,h=0;h<l;++h)for(let p=0;p<c;++p,++d)u.push({x:n+(p+o)*i,y:r+(h+o)*s,density:f[d]*a});return u}function C7(e,t,n,r,i,s){const o=(s.length>>2)-1;for(let a=0,c=0;a<r;++a)for(let l=0,u=(r-a-1)*n;l<n;++l,c+=4){const f=o*i(e[l+u])<<2;t[c+0]=s[f+0],t[c+1]=s[f+1],t[c+2]=s[f+2],t[c+3]=s[f+3]}}function Iv(e,t){const n=new Uint8ClampedArray(4*e),r=e-1;for(let i=0;i<=r;++i){const s=t(i/r),{r:o,g:a,b:c,opacity:l=1}=typeof s=="string"?Ri(s):s,u=i<<2;n[u+0]=o,n[u+1]=a,n[u+2]=c,n[u+3]=255*l|0}return n}function U7(e,t){if(typeof document<"u"){const n=document.createElement("canvas");return n.setAttribute("width",e),n.setAttribute("height",t),n}throw new Error("Can not create a canvas instance.")}function P7(e="black"){const{r:t,g:n,b:r}=Ri(e);return i=>({r:t,g:n,b:r,opacity:i})}class z7 extends kw{constructor(t,n){super("image",t,n)}setPlot(t,n){const r=()=>{this.stats&&this.rasterize()};t.addAttributeListener("schemeColor",r),super.setPlot(t,n)}convolve(){return super.convolve().rasterize()}rasterize(){var d;const{bins:t,kde:n,groupby:r}=this,[i,s]=t,{canvas:o,ctx:a,img:c}=kyt(this,i,s),l=Dyt(this),u=r.indexOf((d=this.channelField("fill"))==null?void 0:d.as),f=u<0?[]:n.map(({key:h})=>h[u]);return this.data=n.map(h=>{var g;const p=Oyt(this,f,(g=h.key)==null?void 0:g[u]);return C7(h,c.data,i,s,l,p),a.putImageData(c,0,0),{src:o.toDataURL()}}),this}plotSpecs(){var s;const{type:t,plot:n,data:r}=this,i={src:"src",width:n.innerWidth(),height:n.innerHeight(),preserveAspectRatio:"none",imageRendering:(s=this.channel("imageRendering"))==null?void 0:s.value,frameAnchor:"middle"};return[{type:t,data:r,options:i}]}}function kyt(e,t,n){if(!e.image||e.image.w!==t||e.image.h!==n){const r=U7(t,n),i=r.getContext("2d",{willReadFrequently:!0}),s=i.getImageData(0,0,t,n);e.image={canvas:r,ctx:i,img:s,w:t,h:n}}return e.image}function Dyt(e){const{densityMap:t,kde:n,plot:r}=e;let i=t.fill&&r.getAttribute("colorDomain");if(!i){let o=0,a=0;n.forEach(c=>{for(const l of c)l<o&&(o=l),l>a&&(a=l)}),i=o===0&&a===0?[0,1]:[o,a]}const s=r.getAttribute("colorScale");return Hl({x:{type:s,domain:i,range:[0,1]}}).apply}function Oyt(e,t,n,r=1024){const{densityMap:i,plot:s}=e,o=s.getAttribute("colorScheme");let a;if(i.fill){if(o)try{return Iv(r,Hl({color:{scheme:o,domain:[0,1]}}).interpolate)}catch(c){console.warn(c)}}else if(t.length){const c=s.getAttribute("colorRange");a=Hl({color:{domain:t,range:c,scheme:o||(c?void 0:"tableau10")}}).apply(n)}else{const c=e.channelField("fill");a=sA(c==null?void 0:c.value)?c.value:void 0}return Iv(r,P7(a))}class Ryt extends z7{constructor(t,n){const{normalize:r=!0,...i}=n;super(t,{bandwidth:0,...i}),Mi(this,"normalize",r)}query(t=[]){const{plot:n,channels:r,normalize:i,source:s}=this,[o,a]=um(this,t),[c,l]=fm(this,t),[u,f]=this.bins=this.binDimensions(this),d=mc(this,"x"),h=mc(this,"y"),p=!!n.getAttribute("xReverse"),g=!!n.getAttribute("yReverse"),b=dI(d,o,a,u,p,this.binPad),y=dI(h,c,l,f,g,this.binPad),m=Yt.from(s.table).where(Fyt(this,t)),v=this.groupby=[],w=[];for(const _ of r)if(Object.hasOwn(_,"field")){const{channel:S,field:x}=_;S==="z"?(m.select({[S]:x}),w.push("z")):S!=="x"&&S!=="y"&&(m.select({[S]:x}),v.push(S))}return Lyt(m,b,y,w,u,f,v,i)}}function Fyt(e,t){if(Array.isArray(t)&&!t.length)return t;const n=e.channelField("x").field.column,r=e.channelField("y").field.column,i=o=>o.op!=="BETWEEN"||o.field.column!==n&&o.field.column!==r,s=o=>o.op==="AND"?Fl(o.children.filter(a=>i(a))):o;return Array.isArray(t)?t.filter(o=>i(o)).map(o=>s(o)):s(t)}function Lyt(e,t,n,r,i,s,o=[],a=!0){e.select({x:X`FLOOR(${t})::INTEGER`,y:X`FLOOR(${n})::INTEGER`});const c=o.concat(r),l=c.length?`PARTITION BY ${c.join(", ")} `:"",u=Yt.from(e).select(c,{x0:"x",y0:"y",dx:X`(lead(x) OVER sw - x)`,dy:X`(lead(y) OVER sw - y)`}).window({sw:X`${l}ORDER BY x ASC`}).qualify(Fl(X`(x0 < ${i} OR x0 + dx < ${i})`,X`(y0 < ${s} OR y0 + dy < ${s})`,X`(x0 > 0 OR x0 + dx > 0)`,X`(y0 > 0 OR y0 + dy > 0)`)),f=Yt.select({x:X`GREATEST(MAX(ABS(dx)), MAX(ABS(dy)))`}).from("pairs"),d=Yt.select({i:X`UNNEST(range((${f})))::INTEGER`}),h=Yt.unionAll(Yt.select(c,{x:X`x0 + i`,y:X`y0 + ROUND(i * dy / dx::FLOAT)::INTEGER`}).from("pairs","indices").where(X`ABS(dy) <= ABS(dx) AND i < ABS(dx)`),Yt.select(c,{x:X`x0 + ROUND(SIGN(dy) * i * dx / dy::FLOAT)::INTEGER`,y:X`y0 + SIGN(dy) * i`}).from("pairs","indices").where(X`ABS(dy) > ABS(dx) AND i < ABS(dy)`),Yt.select(c,{x:"x0",y:"y0"}).from("pairs").where(B8("dx"))),p=["x"].concat(c).join(", "),g=Yt.from("raster").select(c,"x","y",a?{w:X`1.0 / COUNT(*) OVER (PARTITION BY ${p})`}:null).where(Fl(Jr("x",[0,i]),Jr("y",[0,s])));return Yt.with({pairs:u,indices:d,raster:h,points:g}).from("points").select(o,{index:X`x + y * ${i}::INTEGER`,value:a?Md("w"):kn()}).groupby("index",o)}class Byt extends kw{constructor(t,n){const{thresholds:r=10,...i}=n;super("geo",t,i),Mi(this,"thresholds",r,()=>this.grids?this.contours().update():null)}convolve(){return super.convolve().contours()}contours(){const{bins:t,densityMap:n,kde:r,thresholds:i,groupby:s,plot:o}=this;let a=i;if(!Array.isArray(a)){const _=Be(r.map(S=>Be(S)));a=Array.from({length:a-1},(S,x)=>_*(x+1)/a)}(n.fill||n.stroke)&&this.plot.getAttribute("colorScale")!=="log"&&this.plot.setAttribute("colorZero",!0);const[c,l]=t,[u,f]=o.getAttribute("xDomain"),[d,h]=o.getAttribute("yDomain"),p=(f-u)/c,g=(h-d)/l,b=+u,y=+d,m=_=>b+_*p,v=_=>y+_*g,w=I1().size(t);return this.data=r.flatMap(_=>a.map(S=>{const x=Cyt(w.contour(_,S),m,v);return s.forEach((T,$)=>x[T]=_.key[$]),x.density=S,x})),this}plotSpecs(){const{type:t,channels:n,densityMap:r,data:i}=this,s={};for(const o of n){const{channel:a}=o;a!=="x"&&a!=="y"&&(s[a]=Pa(o))}return r.fill&&(s.fill="density"),r.stroke&&(s.stroke="density"),[{type:t,data:i,options:s}]}}function Cyt(e,t,n){function r(o){o.forEach(i)}function i(o){o.forEach(s)}function s(o){o[0]=t(o[0]),o[1]=n(o[1])}return e.coordinates.forEach(r),e}class Uyt extends jd{constructor(t,n){const{type:r="hexagon",binWidth:i=20,...s}=n;super(r,t,{r:i/2,clip:!0,...s},O7),this.binWidth=i}get filterIndexable(){const t=this.plot.getAttribute("xDomain"),n=this.plot.getAttribute("yDomain");return t&&n&&!t[Bl]&&!n[Bl]}query(t=[]){if(this.hasOwnData())return null;const{plot:n,binWidth:r,channels:i,source:s}=this,[o,a]=um(this,t),[c,l]=fm(this,t),u=.5-n.getAttribute("marginLeft"),f=0-n.getAttribute("marginTop"),d=`${r}::DOUBLE`,h=`${r*(1.5/Math.sqrt(3))}::DOUBLE`,p=`${n.innerWidth()/(a-o)}::DOUBLE`,g=`${n.innerHeight()/(l-c)}::DOUBLE`;let b,y;const m=new Set,v={};for(const T of i)T.channel==="order"?w.orderby(T.value):T.channel==="x"?b=T:T.channel==="y"?y=T:Object.hasOwn(T,"field")&&(v[T.as]=T.field,T.field.aggregate&&T.field.columns.forEach($=>m.add($)));const w=Yt.select({[b.as]:X`${o}::DOUBLE + ((x + 0.5 * (y & 1)) * ${d} + ${u})::DOUBLE / ${p}`,[y.as]:X`${l}::DOUBLE - (y * ${h} + ${f})::DOUBLE / ${g}`,...v}).groupby("x","y"),_=`${p} * (${b.field} - ${o}::DOUBLE)`,S=`${g} * (${l}::DOUBLE - ${y.field})`,x=Yt.select({py:X`(${S} - ${f}) / ${h}`,pj:X`ROUND(py)::INTEGER`,px:X`(${_} - ${u}) / ${d} - 0.5 * (pj & 1)`,pi:X`ROUND(px)::INTEGER`,tt:X`ABS(py-pj) * 3 > 1 AND (px-pi)**2 + (py-pj)**2 > (px - pi - 0.5 * CASE WHEN px < pi THEN -1 ELSE 1 END)**2 + (py - pj - CASE WHEN py < pj THEN -1 ELSE 1 END)**2`,x:X`CASE WHEN tt THEN (pi + (CASE WHEN px < pi THEN -0.5 ELSE 0.5 END) + (CASE WHEN pj & 1 <> 0 THEN 0.5 ELSE -0.5 END))::INTEGER ELSE pi END`,y:X`CASE WHEN tt THEN (pj + CASE WHEN py < pj THEN -1 ELSE 1 END)::INTEGER ELSE pj END`}).select(Array.from(m)).from(s.table).where(d1(b.field),d1(y.field),t);return w.from(x)}}class Pyt extends kw{constructor(t,n){const{origin:r=[0,0],dim:i="xy",...s}=n;super("image",t,s),this.origin=r,this.tileX=i.toLowerCase().includes("x"),this.tileY=i.toLowerCase().includes("y")}setPlot(t,n){const r=()=>{this.stats&&this.rasterize()};t.addAttributeListener("schemeColor",r),super.setPlot(t,n)}requestQuery(){return this.requestTiles()}query(t=[]){return this._filter=t,null}tileQuery(t){const{plot:n,binType:r,binPad:i,channels:s,densityMap:o,source:a}=this,[[c,l],[u,f]]=t,[d,h]=this.bins,p=mc(this,"x"),g=mc(this,"y"),b=!!n.getAttribute("xReverse"),y=!!n.getAttribute("yReverse"),m=O6(p,c,l,d,b,i),v=O6(g,u,f,h,y,i),w=i?[Jr(p,[c,l]),Jr(g,[u,f])]:[p1(c,p),h1(p,l),p1(u,g),h1(g,f)],_=Yt.from(a.table).where(w),S=this.groupby=[];let x=kn();for(const T of s)if(Object.hasOwn(T,"field")){const{channel:$,field:I}=T;I.aggregate?(x=I,o[$]=!0):$==="weight"?x=Md(I):$!=="x"&&$!=="y"&&(_.select({[$]:I}),S.push($))}return r==="linear"?Gyt(_,m,v,x,d,S):Wyt(_,m,v,x,d,S)}async requestTiles(){const t=Dn();this.prefetch&&t.cancel(this.prefetch);const{binPad:n,tileX:r,tileY:i,origin:[s,o]}=this,[a,c]=this.bins=this.binDimensions(this),[l,u]=um(this,this._filter),[f,d]=fm(this,this._filter),h=u-l,p=d-f,g=Math.floor((l-s)*(a-n)/h),b=Math.floor((f-o)*(c-n)/p),y=(I,A)=>[[s+I*h,s+(I+1)*h],[o+A*p,o+(A+1)*p]],m=Math.floor((l-s)/h),v=r?R6((u-s)/h):m,w=Math.floor((f-o)/p),_=i?R6((d-o)/p):w,S=[];for(let I=m;I<=v;++I)for(let A=w;A<=_;++A)S.push([I,A]);const x=S.map(([I,A])=>t.query(this.tileQuery(y(I,A)))),T=[];if(r)for(let I=w;I<=_;++I)T.push([v+1,I]),T.push([m-1,I]);if(i){const I=r?m-1:m,A=r?v+1:v;for(let D=I;D<=A;++D)T.push([D,_+1]),T.push([D,w-1])}this.prefetch=T.map(([I,A])=>t.prefetch(this.tileQuery(y(I,A))));const $=await Promise.all(x);this.grids=[{grid:zyt(a,c,g,b,S,$)}],this.convolve().update()}convolve(){return super.convolve().rasterize()}rasterize(){var d;const{bins:t,kde:n,groupby:r}=this,[i,s]=t,{canvas:o,ctx:a,img:c}=Vyt(this,i,s),l=Yyt(this),u=r.indexOf((d=this.channelField("fill"))==null?void 0:d.as),f=u<0?[]:n.map(({key:h})=>h[u]);return this.data=n.map(h=>{var g;const p=qyt(this,f,(g=h.key)==null?void 0:g[u]);return C7(h,c.data,i,s,l,p),a.putImageData(c,0,0),{src:o.toDataURL()}}),this}plotSpecs(){var s;const{type:t,data:n,plot:r}=this,i={src:"src",width:r.innerWidth(),height:r.innerHeight(),preserveAspectRatio:"none",imageRendering:(s=this.channel("imageRendering"))==null?void 0:s.value,frameAnchor:"middle"};return[{type:t,data:n,options:i}]}}function zyt(e,t,n,r,i,s){const o=new Float64Array(e*t);return s.forEach((a,c)=>{const[l,u]=i[c],f=l*e-n,d=u*t-r;jyt(e,t,o,a,f,d)}),o}function jyt(e,t,n,r,i,s){const o=r.numRows;if(o===0)return;const a=r.getChild("index").toArray(),c=r.getChild("value").toArray();for(let l=0;l<o;++l){const u=a[l],f=i+u%e,d=s+Math.floor(u/e);0<=f&&f<e&&0<=d&&d<t&&(n[f+d*e]=c[l])}}function Vyt(e,t,n){if(!e.image||e.image.w!==t||e.image.h!==n){const r=U7(t,n),i=r.getContext("2d",{willReadFrequently:!0}),s=i.getImageData(0,0,t,n);e.image={canvas:r,ctx:i,img:s,w:t,h:n}}return e.image}function Yyt(e){const{densityMap:t,kde:n,plot:r}=e;let i=t.fill&&r.getAttribute("colorDomain");if(!i){let o=0,a=0;n.forEach(c=>{for(const l of c)l<o&&(o=l),l>a&&(a=l)}),i=o===0&&a===0?[0,1]:[o,a]}const s=r.getAttribute("colorScale");return Hl({x:{type:s,domain:i,range:[0,1]}}).apply}function qyt(e,t,n,r=1024){const{densityMap:i,plot:s}=e,o=s.getAttribute("colorScheme");let a;if(i.fill){if(o)try{return Iv(r,Hl({color:{scheme:o,domain:[0,1]}}).interpolate)}catch(c){console.warn(c)}}else if(t.length){const c=s.getAttribute("colorRange");a=Hl({color:{domain:t,range:c,scheme:o||(c?void 0:"tableau10")}}).apply(n)}else{const c=e.channelField("fill");a=sA(c==null?void 0:c.value)?c.value:void 0}return Iv(r,P7(a))}function O6(e,t,n,r,i,s){const o=(r-s)/(n-t),a=o!==1?` * ${o}::DOUBLE`:"";return i?X`(${n} - ${e}::DOUBLE)${a}`:X`(${e}::DOUBLE - ${t})${a}`}function Wyt(e,t,n,r,i,s){return e.select({index:X`FLOOR(${t})::INTEGER + FLOOR(${n})::INTEGER * ${i}`,value:r}).groupby("index",s)}function Gyt(e,t,n,r,i,s){const o=r.column?`* ${r.column}`:"",a=(d,h)=>e.clone().select({xp:t,yp:n,i:d,w:h}),c=a(X`FLOOR(xp)::INTEGER + FLOOR(yp)::INTEGER * ${i}`,X`(FLOOR(xp)::INTEGER + 1 - xp) * (FLOOR(yp)::INTEGER + 1 - yp)${o}`),l=a(X`FLOOR(xp)::INTEGER + (FLOOR(yp)::INTEGER + 1) * ${i}`,X`(FLOOR(xp)::INTEGER + 1 - xp) * (yp - FLOOR(yp)::INTEGER)${o}`),u=a(X`FLOOR(xp)::INTEGER + 1 + FLOOR(yp)::INTEGER * ${i}`,X`(xp - FLOOR(xp)::INTEGER) * (FLOOR(yp)::INTEGER + 1 - yp)${o}`),f=a(X`FLOOR(xp)::INTEGER + 1 + (FLOOR(yp)::INTEGER + 1) * ${i}`,X`(xp - FLOOR(xp)::INTEGER) * (yp - FLOOR(yp)::INTEGER)${o}`);return Yt.from(Yt.unionAll(c,l,u,f)).select({index:"i",value:Md("w")},s).groupby("index",s).having(EH("value",0))}function R6(e){const t=Math.floor(e);return t===e?t-1:t}function Hyt(e,t,n){var r=1e-8,i=t-1,s=n-1,o=0,a,c,l,u,f,d,h,p,g,b,y;if(e<=0)return 0;if(e>=1)return 1;for(t>=1&&n>=1?(l=e<.5?e:1-e,u=Math.sqrt(-2*Math.log(l)),h=(2.30753+u*.27061)/(1+u*(.99229+u*.04481))-u,e<.5&&(h=-h),p=(h*h-3)/6,g=2/(1/(2*t-1)+1/(2*n-1)),b=h*Math.sqrt(p+g)/g-(1/(2*n-1)-1/(2*t-1))*(p+5/6-2/(3*g)),h=t/(t+n*Math.exp(2*b))):(a=Math.log(t/(t+n)),c=Math.log(n/(t+n)),u=Math.exp(t*a)/t,f=Math.exp(n*c)/n,b=u+f,e<u/b?h=Math.pow(t*b*e,1/t):h=1-Math.pow(n*b*(1-e),1/n)),y=-Rf(t)-Rf(n)+Rf(t+n);o<10;o++){if(h===0||h===1)return h;if(d=Xyt(h,t,n)-e,u=Math.exp(i*Math.log(h)+s*Math.log(1-h)+y),f=d/u,h-=u=f/(1-.5*Math.min(1,f*(i/h-s/(1-h)))),h<=0&&(h=.5*(h+u)),h>=1&&(h=.5*(h+u+1)),Math.abs(u)<r*h&&o>0)break}return h}function Xyt(e,t,n){var r=e===0||e===1?0:Math.exp(Rf(t+n)-Rf(t)-Rf(n)+t*Math.log(e)+n*Math.log(1-e));return e<0||e>1?!1:e<(t+1)/(t+n+2)?r*F6(e,t,n)/t:1-r*F6(1-e,n,t)/n}function F6(e,t,n){var r=1e-30,i=1,s=t+n,o=t+1,a=t-1,c=1,l=1-s*e/o,u,f,d,h;for(Math.abs(l)<r&&(l=r),l=1/l,h=l;i<=100&&(u=2*i,f=i*(n-i)*e/((a+u)*(t+u)),l=1+f*l,Math.abs(l)<r&&(l=r),c=1+f/c,Math.abs(c)<r&&(c=r),l=1/l,h*=l*c,f=-(t+i)*(s+i)*e/((t+u)*(o+u)),l=1+f*l,Math.abs(l)<r&&(l=r),c=1+f/c,Math.abs(c)<r&&(c=r),l=1/l,d=l*c,h*=d,!(Math.abs(d-1)<3e-7));i++);return h}function Rf(e){var t=0,n=[76.18009172947146,-86.5053203294167,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18],r=1.000000000190015,i,s,o;for(o=(s=i=e)+5.5,o-=(i+.5)*Math.log(o);t<6;t++)r+=n[t]/++s;return Math.log(2.506628274631*r/i)-o}function Qyt(e,t){var n=Hyt(2*Math.min(e,1-e),.5*t,.5);return n=Math.sqrt(t*(1-n)/n),e>.5?n:-n}class Kyt extends jd{constructor(t,n){const{ci:r=.95,precision:i=4,...s}=n;super("line",t,s);const o=()=>this.modelFit?this.confidenceBand().update():null;Mi(this,"ci",r,o),Mi(this,"precision",i,o)}query(t=[]){const n=this.channelField("x").as,r=this.channelField("y").as,i=Array.from(new Set(["stroke","z","fx","fy"].flatMap(s=>{var o;return((o=this.channelField(s))==null?void 0:o.as)||[]})));return Yt.from(super.query(t)).select({intercept:RH(r,n),slope:FH(r,n),n:LH(r,n),ssy:BH(r,n),ssx:CH(r,n),xm:UH(r,n),x0:zN(Cp(n).where(d1(r))),x1:zN(Bp(n).where(d1(r)))}).select(i).groupby(i)}queryResult(t){return this.modelFit=M7(t),this.lineData=this.modelFit.flatMap(n=>Zyt(n)),this.confidenceBand()}confidenceBand(){const{ci:t,modelFit:n,precision:r,plot:i}=this,s=i.innerWidth();return this.areaData=t?n.flatMap(o=>Jyt(t,r,o,s)):null,this}plotSpecs(){const{lineData:t,areaData:n,channels:r,ci:i}=this,s={x:"x",y:"y"},o={x:"x",y1:"y1",y2:"y2",fillOpacity:.1};for(const a of r)switch(a.channel){case"x":case"y":case"fill":break;case"stroke":s.stroke=o.fill=Pa(a);break;case"strokeOpacity":s.strokeOpacity=Pa(a);break;case"fillOpacity":o.fillOpacity=Pa(a);break;default:s[a.channel]=o[a.channel]=Pa(a);break}return[...i?[{type:"areaY",data:n,options:o}]:[],{type:"line",data:t,options:s}]}}function Zyt(e){const{x0:t,x1:n,xm:r,intercept:i,slope:s,n:o,ssx:a,ssy:c,...l}=e;return[{x:t,y:i+t*s,...l},{x:n,y:i+n*s,...l}]}function Jyt(e,t,n,r){const{x0:i,x1:s,xm:o,intercept:a,slope:c,n:l,ssx:u,ssy:f,...d}=n,h=t*(s-i)/r,p=Qyt((1-e)/2,l-2)*Math.sqrt(f/(l-2));return Gr(i,s-h/2,h).concat(s).map(g=>{const b=a+g*c,y=p*Math.sqrt(1/l+(g-o)**2/u);return{x:g,y1:b-y,y2:b+y,...d}})}const tmt=new Set(["frame","axisX","axisY","axisFx","axisFy","gridX","gridY","gridFx","gridFy","hexgrid","graticule","sphere"]);function dt(e,t,n){arguments.length===2&&(n=t,t=tmt.has(e)?null:[{}]);const r=e.startsWith("area")||e.startsWith("line")?gyt:jd;return aA(r,e,t,n)}function aA(e,t,n,r){return i=>{i.addMark(new e(t,n,r))}}function iu(e,t,n){return r=>{r.addMark(new e(t,n))}}const emt=(...e)=>dt("area",...e),nmt=(...e)=>dt("areaX",...e),j7=(...e)=>dt("areaY",...e),rmt=(...e)=>dt("line",...e),imt=(...e)=>dt("lineX",...e),V7=(...e)=>dt("lineY",...e),Ev=(...e)=>dt("barX",...e),cA=(...e)=>dt("barY",...e),smt=(...e)=>dt("cell",...e),omt=(...e)=>dt("cellX",...e),amt=(...e)=>dt("cellY",...e),cmt=(...e)=>dt("rect",...e),lmt=(...e)=>dt("rectX",...e),qo=(...e)=>dt("rectY",...e),Dw=(...e)=>dt("dot",...e),umt=(...e)=>dt("dotX",...e),fmt=(...e)=>dt("dotY",...e),dmt=(...e)=>dt("circle",...e),hmt=(...e)=>dt("hexagon",...e),uy=(...e)=>dt("text",...e),pmt=(...e)=>dt("textX",...e),ymt=(...e)=>dt("textY",...e),mmt=(...e)=>dt("ruleX",...e),gmt=(...e)=>dt("ruleY",...e),vmt=(...e)=>dt("tickX",...e),Y7=(...e)=>dt("tickY",...e),bmt=(...e)=>dt("vector",...e),wmt=(...e)=>dt("vectoX",...e),_mt=(...e)=>dt("vectorY",...e),Smt=(...e)=>dt("spike",...e),xmt=(...e)=>dt("image",...e),Imt=(...e)=>aA(B7,"areaX",...e),Emt=(...e)=>aA(B7,"areaY",...e),Tmt=(...e)=>iu(Nyt,...e),q7=(...e)=>iu(Ryt,...e),W7=(...e)=>iu(Byt,...e),Xl=(...e)=>iu(z7,...e),Amt=(...e)=>iu(Pyt,...e),G7=(...e)=>iu(Uyt,...e),H7=(...e)=>dt("hexgrid",...e),X7=(...e)=>iu(Kyt,...e),Mmt=(...e)=>dt("voronoi",...e),Nmt=(...e)=>dt("voronoiMesh",...e),$mt=(...e)=>dt("delaunayLink",...e),kmt=(...e)=>dt("delaunayMesh",...e),Dmt=(...e)=>dt("hull",...e),Omt=(...e)=>dt("arrow",...e),Rmt=(...e)=>dt("link",...e),Fmt=(...e)=>dt("frame",...e),Lmt=(...e)=>dt("axisX",...e),Bmt=(...e)=>dt("axisY",...e),Cmt=(...e)=>dt("axisFx",...e),Umt=(...e)=>dt("axisFy",...e),Pmt=(...e)=>dt("gridX",...e),zmt=(...e)=>dt("gridY",...e),jmt=(...e)=>dt("gridFx",...e),Vmt=(...e)=>dt("gridFy",...e),Q7=(...e)=>dt("geo",...e),K7=(...e)=>dt("sphere",...e),Ymt=(...e)=>dt("graticule",...e),qmt=Object.freeze(Object.defineProperty({__proto__:null,area:emt,areaX:nmt,areaY:j7,arrow:Omt,axisFx:Cmt,axisFy:Umt,axisX:Lmt,axisY:Bmt,barX:Ev,barY:cA,cell:smt,cellX:omt,cellY:amt,circle:dmt,contour:W7,delaunayLink:$mt,delaunayMesh:kmt,denseLine:q7,density:Tmt,densityX:Imt,densityY:Emt,dot:Dw,dotX:umt,dotY:fmt,frame:Fmt,geo:Q7,graticule:Ymt,gridFx:jmt,gridFy:Vmt,gridX:Pmt,gridY:zmt,hexagon:hmt,hexbin:G7,hexgrid:H7,hull:Dmt,image:xmt,line:rmt,lineX:imt,lineY:V7,link:Rmt,raster:Xl,rasterTile:Amt,rect:cmt,rectX:lmt,rectY:qo,regressionY:X7,ruleX:mmt,ruleY:gmt,sphere:K7,spike:Smt,text:uy,textX:pmt,textY:ymt,tickX:vmt,tickY:Y7,vector:bmt,vectorX:wmt,vectorY:_mt,voronoi:Mmt,voronoiMesh:Nmt},Symbol.toStringTag,{value:"Module"}));function Wmt(e){const t=e.toLowerCase(),n=e.length;let r="";for(let i=0;i<n;++i)r+=(e[i]!==t[i]?"-":"")+t[i];return r}function lA(e){const t={};for(const n in e)t[Wmt(n)]=e[n];return t}class Gmt{constructor(t,{selection:n,channels:r={}}){this.mark=t,this.selection=n;const i=Object.entries(lA(r));this.channels=i.length?i:[["opacity",.2]],this.selection.addEventListener("value",Y8(()=>this.update()))}init(t){this.svg=t;const n=this.values=[],r=this.mark.index,i=this.nodes=t.querySelectorAll(`[data-index="${r}"] > *`),{channels:s}=this;for(let o=0;o<i.length;++o){const a=i[o];n.push(s.map(c=>a.getAttribute(c[0])))}return this.update()}async update(){const{svg:t,nodes:n,channels:r,values:i,mark:s,selection:o}=this;if(!t)return;const a=await Hmt(s,o);for(let c=0;c<n.length;++c){const l=n[c],u=i[c],f=a(l.__data__);for(let d=0;d<r.length;++d){const[h,p]=r[d];l.setAttribute(h,f?u[d]:p)}}}}async function Hmt(e,t){var l,u;const n=t==null?void 0:t.predicate(e);if(!n||n.length===0)return()=>!0;const r=(l=e.filterBy)==null?void 0:l.predicate(e,!0),i={__:Fl(n)},s=e.query(r),o=s.groupby().length?s.select(i):s.$select(i),a=await Dn().query(o),c=(u=a.getChild)==null?void 0:u.call(a,"__");return a.numRows||a.length?c?f=>c.get(f):f=>a[f].__:()=>!1}class Z7{constructor(t,{selection:n,channels:r,peers:i=!0}){this.value=null,this.mark=t,this.selection=n,this.peers=i,this.channels=r.map(s=>{var a;const o=s==="color"?["fill","stroke"]:s==="x"?["x","x1","x2"]:s==="y"?["y","y1","y2"]:[s];for(let c=0;c<o.length;++c){const l=t.channelField(o[c]);if(l)return{field:((a=l.field)==null?void 0:a.basis)||l.field,as:l.as}}throw new Error(`Missing channel: ${s}`)})}clause(t){const{channels:n,mark:r}=this;let i=null;if(t){const s=t.map(o=>{const a=o.map((c,l)=>TH(n[l].field,Dy(c)));return a.length>1?Fl(a):a[0]});i=s.length>1?F8(s):s[0]}return{source:this,schema:{type:"point"},clients:this.peers?r.plot.markSet:new Set().add(r),value:t,predicate:i}}init(t,n,r){const{mark:i,channels:s,selection:o}=this,{data:a}=i;r=r||(l=>{const u=a[l.__data__];return s.map(f=>u[f.as])}),n=n||`[data-index="${i.index}"]`;const c=new Set(t.querySelectorAll(n));t.addEventListener("pointerdown",l=>{const u=o.single?o.value:this.value,f=l.target;let d=null;if(Xmt(c,f)){const h=r(f);l.shiftKey&&(u!=null&&u.length)?(d=u.filter(p=>yI(p,h)),d.length===u.length&&d.push(h)):(u==null?void 0:u.length)===1&&!yI(u[0],h)?d=null:d=[h]}this.value=d,Qmt(u,d)&&o.update(this.clause(d))}),t.addEventListener("pointerenter",()=>{this.selection.activate(this.clause([this.channels.map(()=>0)]))})}}function Xmt(e,t){var n;return e.has(t)||e.has(t.parentNode)||e.has((n=t.parentNode)==null?void 0:n.parentNode)}function Qmt(e,t){return e==null||t==null?e!=null||t!=null:e.length!==t.length||e.some((n,r)=>yI(n,t[r]))}function yI(e,t){const n=e.length;if(t.length!==n)return!0;for(let r=0;r<n;++r)if(e[r]!==t[r])return!0;return!1}function uA(e){const t=e.on;let n=!0;function r(i){n=!1,i(),n=!0}return e.reset=(...i)=>{r(()=>e.clear(...i))},e.moveSilent=(...i)=>{r(()=>e.move(...i))},e.on=(...i)=>{if(i.length>1&&i[1]){const s=i[1];i[1]=(...o)=>n&&s(...o)}return t(...i)},e}function Kmt(){return uA(vtt())}function Zmt(){return uA(mtt())}function Jmt(){return uA(gtt())}const L6=1e-12;function mI(e,t){return e===t||e&&t&&Math.abs(e[0]-t[0])<L6&&Math.abs(e[1]-t[1])<L6||!1}function md(e,t){var r;const n=(r=e.channelField(t))==null?void 0:r.field;return(n==null?void 0:n.basis)||n}function gI(e,t,n=1){return t.invert(n*Math.floor(e/n))}function J7(){const e=this,t=e.getScreenCTM;let n;e.getScreenCTM=()=>e.isConnected?n=t.call(e):n}class t9{constructor(t,{channel:n,selection:r,field:i,pixelSize:s=1,peers:o=!0,brush:a}){this.mark=t,this.channel=n,this.pixelSize=s||1,this.selection=r,this.peers=o,this.field=i||md(t,[n,n+"1",n+"2"]),this.style=a&&lA(a),this.brush=n==="y"?Jmt():Zmt(),this.brush.on("brush end",({selection:c})=>this.publish(c))}reset(){this.value=void 0,this.g&&this.brush.reset(this.g)}activate(){this.selection.activate(this.clause(this.value||[0,1]))}publish(t){let n;t&&(n=t.map(r=>gI(r,this.scale,this.pixelSize)).sort((r,i)=>r-i)),mI(n,this.value)||(this.value=n,this.g.call(this.brush.moveSilent,t),this.selection.update(this.clause(n)))}clause(t){const{mark:n,pixelSize:r,field:i,scale:s}=this;return{source:this,schema:{type:"interval",pixelSize:r,scales:[s]},clients:this.peers?n.plot.markSet:new Set().add(n),value:t,predicate:t?Jr(i,t):null}}init(t){var l;const{brush:n,channel:r,style:i}=this;this.scale=t.scale(r);const s=t.scale("x").range,o=t.scale("y").range;n.extent([[On(s),On(o)],[Be(s),Be(o)]]);const a=xe(t).selectAll('g[aria-label="facet"]'),c=a.size()?a:xe(t);if(this.g=c.append("g").attr("class",`interval-${r}`).each(J7).call(n).call(n.moveSilent,(l=this.value)==null?void 0:l.map(this.scale.apply)),i){const u=this.g.selectAll("rect.selection");for(const f in i)u.attr(f,i[f])}t.addEventListener("pointerenter",()=>this.activate())}}const b0=(e,t)=>e-t;class t0t{constructor(t,{selection:n,xfield:r,yfield:i,pixelSize:s=1,peers:o=!0,brush:a}){this.mark=t,this.pixelSize=s||1,this.selection=n,this.peers=o,this.xfield=r||md(t,["x","x1","x2"]),this.yfield=i||md(t,["y","y1","y2"]),this.style=a&&lA(a),this.brush=Kmt(),this.brush.on("brush end",({selection:c})=>this.publish(c))}reset(){this.value=void 0,this.g&&this.brush.reset(this.g)}activate(){this.selection.activate(this.clause(this.value||[[0,1],[0,1]]))}publish(t){const{value:n,pixelSize:r,xscale:i,yscale:s}=this;let o,a;if(t){const[c,l]=t;o=[c[0],l[0]].map(u=>gI(u,i,r)).sort(b0),a=[c[1],l[1]].map(u=>gI(u,s,r)).sort(b0)}(!mI(o,n==null?void 0:n[0])||!mI(a,n==null?void 0:n[1]))&&(this.value=t?[o,a]:void 0,this.g.call(this.brush.moveSilent,t),this.selection.update(this.clause(this.value)))}clause(t){const{mark:n,pixelSize:r,xfield:i,yfield:s,xscale:o,yscale:a}=this;return{source:this,schema:{type:"interval",pixelSize:r,scales:[o,a]},clients:this.peers?n.plot.markSet:new Set().add(n),value:t,predicate:t?Fl(Jr(i,t[0]),Jr(s,t[1])):null}}init(t){const{brush:n,style:r}=this,i=this.xscale=t.scale("x"),s=this.yscale=t.scale("y"),o=i.range,a=s.range;n.extent([[On(o),On(a)],[Be(o),Be(a)]]);const c=xe(t).selectAll('g[aria-label="facet"]'),l=c.size()?c:xe(t);if(this.g=l.append("g").attr("class","interval-xy").each(J7).call(n),r){const u=this.g.selectAll("rect.selection");for(const f in r)u.attr(f,r[f])}if(this.value){const[u,f]=this.value[0].map(i.apply).sort(b0),[d,h]=this.value[1].map(s.apply).sort(b0);this.g.call(n.moveSilent,[[u,d],[f,h]])}t.addEventListener("pointerenter",()=>this.activate())}}const B6=(e,t)=>e-t;class e0t{constructor(t,{x:n=new Gs,y:r=new Gs,xfield:i,yfield:s,zoom:o=!0,panx:a=!0,pany:c=!0}){this.mark=t,this.xsel=n,this.ysel=r,this.xfield=i||md(t,["x","x1","x2"]),this.yfield=s||md(t,["y","y1","y2"]),this.zoom=x2(o,[0,1/0],[1,1]),this.panx=this.xsel&&a,this.pany=this.ysel&&c;const{plot:l}=t;a&&this.xsel.addEventListener("value",u=>{l.setAttribute("xDomain",u)&&l.update()}),c&&this.ysel.addEventListener("value",u=>{l.setAttribute("yDomain",u)&&l.update()})}publish(t){if(this.panx){const n=n0t(t,this.xscale);this.xsel.update(this.clause(n,this.xfield,this.xscale))}if(this.pany){const n=r0t(t,this.yscale);this.ysel.update(this.clause(n,this.yfield,this.yscale))}}clause(t,n,r){return{source:this,schema:{type:"interval",scales:[r]},clients:this.mark.plot.markSet,value:t,predicate:t?Jr(n,t):null}}init(t){if(this.svg=t,this.initialized)return;this.initialized=!0;const{panx:n,pany:r,mark:{plot:{element:i}},xsel:s,ysel:o}=this;this.xscale=t.scale("x"),this.yscale=t.scale("y");const a=this.xscale.range.slice().sort(B6),c=this.yscale.range.slice().sort(B6),l=x2(n,[-1/0,1/0],a),u=x2(r,[-1/0,1/0],c),f=fst().extent([[a[0],c[0]],[a[1],c[1]]]).scaleExtent(this.zoom).translateExtent([[l[0],u[0]],[l[1],u[1]]]).on("start",()=>{this.xscale=this.svg.scale("x"),this.yscale=this.svg.scale("y")}).on("end",()=>i.__zoom=new Ls(1,0,0)).on("zoom",({transform:d})=>this.publish(d));if(xe(i).call(f),n||r){let d=!1;i.addEventListener("mouseenter",()=>{if(!d){if(d=!0,n){const{xscale:h,xfield:p}=this;s.activate(this.clause(h.domain,p,h))}if(r){const{yscale:h,yfield:p}=this;o.activate(this.clause(h.domain,p,h))}}}),i.addEventListener("mouseleave",()=>d=!1)}}}function x2(e,t,n){return e?Array.isArray(e)?e:t:n}function n0t(e,t){return t.range.map(e.invertX,e).map(t.invert,t)}function r0t(e,t){return t.range.map(e.invertY,e).map(t.invert,t)}class e9{constructor(t,{selection:n,channel:r,field:i}){this.mark=t,this.selection=n,this.clients=new Set().add(t),this.channel=r,this.field=i||md(t,[r])}clause(t){const{clients:n,field:r}=this,i=t?ZE(r,Dy(t)):null;return{source:this,schema:{type:"point"},clients:n,value:t,predicate:i}}init(t){const n=this,{mark:r,channel:i,selection:s}=this,{data:o}=r,a=r.channelField(i).as,c=xe(t).selectAll('g[aria-label="facet"]'),l=c.size()?c:xe(t),u=t.scale(i),f=!Ll(s);l.on("pointerdown pointermove",function(d){const[h,p]=qi(d,this),g=i0t(o,a,u.invert(i==="x"?h:p));s.update(f?g:n.clause(g))}),!f&&t.addEventListener("pointerenter",()=>{this.selection.activate(this.clause(0))})}}function i0t(e,t,n){let r=1/0,i;return e.forEach(s=>{const o=Math.abs(s[t]-n);o<r&&(r=o,i=s[t])}),i}function Fc(e,t){return n=>{const r=n.marks[n.marks.length-1];n.addInteractor(new e(r,t))}}function Tv({by:e,...t}){return Fc(Gmt,{selection:e,channels:t})}function Ow({as:e,...t}){return Fc(Z7,{...t,selection:e})}function n9(e){return Ow({...e,channels:["x"]})}function r9(e){return Ow({...e,channels:["y"]})}function s0t(e){return Ow({...e,channels:["color"]})}function o0t({as:e,...t}){return Fc(e9,{...t,selection:e,channel:"x"})}function a0t({as:e,...t}){return Fc(e9,{...t,selection:e,channel:"y"})}function Ys({as:e,...t}){return Fc(t9,{...t,selection:e,channel:"x"})}function c0t({as:e,...t}){return Fc(t9,{...t,selection:e,channel:"y"})}function fy({as:e,...t}){return Fc(t0t,{...t,selection:e})}function Vd(e){return Fc(e0t,e)}function l0t(e={}){return Vd({...e,zoom:!1})}function u0t(e={}){return Vd({...e,zoom:!1,pany:!1})}function f0t(e={}){return Vd({...e,zoom:!1,panx:!1})}function d0t(e={}){return Vd(e)}function h0t(e={}){return Vd({...e,pany:!1})}function p0t(e={}){return Vd({...e,panx:!1})}const y0t=Object.freeze(Object.defineProperty({__proto__:null,highlight:Tv,intervalX:Ys,intervalXY:fy,intervalY:c0t,nearestX:o0t,nearestY:a0t,pan:l0t,panX:u0t,panY:f0t,panZoom:d0t,panZoomX:h0t,panZoomY:p0t,toggle:Ow,toggleColor:s0t,toggleX:n9,toggleY:r9},Symbol.toStringTag,{value:"Module"}));class C6{constructor(t,n){const{as:r,...i}=n;this.channel=t,this.options={label:null,...i},this.selection=r,this.element=document.createElement("div"),this.element.setAttribute("class","legend"),this.element.value=this}setPlot(t){const{channel:n,selection:r}=this,i=m0t(t,n);this.selection&&i&&(this.handler=new Z7(i,{selection:r,channels:[n]}),this.selection.addEventListener("value",()=>this.update()))}init(t){const{channel:n,options:r,handler:i}=this,o=t.scale(n).type==="ordinal"?r:{marginTop:1,tickSize:2,height:28,...r};return this.legend=t.legend(n,o),i&&(i.init(this.legend,":scope > div",a=>[a.__data__]),this.update()),this.element.replaceChildren(this.legend),this.element}update(){if(!this.legend)return;const{value:t}=this.selection,n=t&&t.length?new Set(t.map(i=>i[0])):null,r=this.legend.querySelectorAll(":scope > div");for(const i of r){const s=n?n.has(i.__data__):!0;i.style.opacity=s?1:.2}}}function m0t({marks:e},t){const n=t==="color"?["fill","stroke"]:t==="opacity"?["opacity","fillOpacity","strokeOpacity"]:null;if(n==null)return null;for(let r=e.length-1;r>-1;--r)if(e[r].channelField(n))return e[r];return null}function fA(e,t={}){if(t.for){const{for:n,...r}=t,i=new C6(e,r),s=typeof n,o=a=>a.addLegend(i,!1);return s==="string"?g7.request(n,o):n.value&&o(n.value),i.element}else return n=>n.addLegend(new C6(e,t))}const i9=e=>fA("color",e),g0t=e=>fA("opacity",e),v0t=e=>fA("symbol",e),b0t=Object.freeze(Object.defineProperty({__proto__:null,colorLegend:i9,opacityLegend:g0t,symbolLegend:v0t},Symbol.toStringTag,{value:"Module"}));function s9({direction:e="vertical",wrap:t=!1},n){const r=document.createElement("div");return r.style.display="flex",r.style.flexDirection=e==="vertical"?"column":"row",r.style.flexWrap=t?t===!0?"wrap":t:"nowrap",r.style.justifyContent="flex-start",r.style.alignItems="flex-start",n.forEach(i=>r.appendChild(i)),r.value={element:r},r}function Lc(...e){return s9({direction:"vertical"},e.flat())}function gc(...e){return s9({direction:"horizontal"},e.flat())}function o9({dim:e="width",size:t=10}){const n=document.createElement("span");n.style.display="inline-block",n.style[e]=Number.isNaN(+t)?t:`${t}px`;const r={element:n};return n.value=r,n}function a9(e){return o9({dim:"height",size:e})}function Av(e){return o9({dim:"width",size:e})}function w0t(e){return e}function _0t(e){if(e==null)return w0t;var t,n,r=e.scale[0],i=e.scale[1],s=e.translate[0],o=e.translate[1];return function(a,c){c||(t=n=0);var l=2,u=a.length,f=new Array(u);for(f[0]=(t+=a[0])*r+s,f[1]=(n+=a[1])*i+o;l<u;)f[l]=a[l],++l;return f}}function S0t(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function x0t(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return U6(e,n)})}:U6(e,t)}function U6(e,t){var n=t.id,r=t.bbox,i=t.properties==null?{}:t.properties,s=I0t(e,t);return n==null&&r==null?{type:"Feature",properties:i,geometry:s}:r==null?{type:"Feature",id:n,properties:i,geometry:s}:{type:"Feature",id:n,bbox:r,properties:i,geometry:s}}function I0t(e,t){var n=_0t(e.transform),r=e.arcs;function i(u,f){f.length&&f.pop();for(var d=r[u<0?~u:u],h=0,p=d.length;h<p;++h)f.push(n(d[h],h));u<0&&S0t(f,p)}function s(u){return n(u)}function o(u){for(var f=[],d=0,h=u.length;d<h;++d)i(u[d],f);return f.length<2&&f.push(f[0]),f}function a(u){for(var f=o(u);f.length<4;)f.push(f[0]);return f}function c(u){return u.map(a)}function l(u){var f=u.type,d;switch(f){case"GeometryCollection":return{type:f,geometries:u.geometries.map(l)};case"Point":d=s(u.coordinates);break;case"MultiPoint":d=u.coordinates.map(s);break;case"LineString":d=o(u.arcs);break;case"MultiLineString":d=u.arcs.map(o);break;case"Polygon":d=c(u.arcs);break;case"MultiPolygon":d=u.arcs.map(c);break;default:return null}return{type:f,coordinates:d}}return l(t)}const E0t={menu:$X,search:RX,slider:KS,table:Q8};new Map(Object.entries(qmt));new Map(Object.entries(E0t));new Map(Object.entries(b0t));new Map(Object.entries(oyt));new Map(Object.entries(y0t));const T0t="https://app.motherduck.com",A0t="WASM Client Library Example: Mosaic Integration";function M0t({connect:e}){const[t,n]=Bn.useState(null),[r,i]=Bn.useState(!1),s=Bn.useCallback(l=>{n(l.target.value)},[]),o=Bn.useCallback(()=>{const l=new URL(window.location.href);l.searchParams.set("tokenInClipboard","y"),window.location.href=`${T0t}/token-request?appName=${encodeURIComponent(A0t)}&returnTo=${encodeURIComponent(l.toString())}`},[]),a=Bn.useCallback(()=>{if(t){const l=new URL(window.location.href);l.searchParams.get("tokenInClipboard")&&(l.searchParams.delete("tokenInClipboard"),history.pushState({},"",l)),e(t)}},[e,t]);Bn.useEffect(()=>{async function l(){const u=new URL(window.location.href);if(u.searchParams.get("tokenInClipboard")){if(navigator.clipboard.readText){const f=await navigator.clipboard.readText();if(f){u.searchParams.delete("tokenInClipboard"),history.pushState({},"",u),e(f);return}}i(!0)}}l()},[e]);const c=Bn.useCallback(l=>{l&&l.focus()},[]);return Wt.jsxs("div",{id:"connect-pane",children:[Wt.jsx("div",{id:"token-in-clipboard-note",style:{visibility:r?"visible":"hidden"},children:"Your token is in the clipboard. Paste it and click Connect."}),Wt.jsx("div",{id:"token-input-row",children:Wt.jsx("input",{ref:c,id:"token-input",type:"password",placeholder:"Paste MotherDuck Service Token Here",onChange:s})}),Wt.jsxs("div",{id:"connect-button-row",children:[Wt.jsx("button",{id:"get-token-button",onClick:o,children:"Get Token"}),Wt.jsx("button",{id:"connect-button",disabled:!t,onClick:a,children:"Connect"})]})]})}const N0t="assets/motherduck_logo-X5yv95Gl.svg";function $0t(){return Wt.jsxs("div",{id:"header",children:[Wt.jsx("div",{id:"title",children:Wt.jsx("a",{href:"https://motherduck.com",target:"_blank",children:Wt.jsx("img",{src:N0t,alt:"MotherDuck logo"})})}),Wt.jsxs("div",{id:"subtitle",children:["WASM Client Example: ",Wt.jsx("a",{href:"https://uwdata.github.io/mosaic/",target:"_blank",children:"Mosaic"})," Integration"]})]})}class k0t{async initialize(){await Dn().exec(`create temp table if not exists complaints as 
        select year(created_date)::int as Year, count(*)::int as Complaints
        from sample_data.nyc.service_requests
        where Year < 2023
        and agency_name = 'New York City Police Department'
        group by 1
        order by 1;`),await Dn().exec(`create temp table if not exists complaints_details as
        select year(created_date)::int as Year, complaint_type as Type, count(*)::int as Complaints
        from sample_data.nyc.service_requests
        where Year < 2023
        and agency_name = 'New York City Police Department'
        group by 1, 2
        order by 1, 3 desc;`)}render(){const t=Gs.single();return Lc(we(cA(de("complaints"),{x:"Year",y:"Complaints",fill:"steelblue"}),Tv({by:t}),n9({as:t}),rA("d"),xv(!0),Ja("s")),Q8({from:"complaints_details",filterBy:t,format:{Year:n=>String(n)},width:{Year:80,Type:400,Complaints:100},height:400}))}}const gs=[ay(null),cy(null),w7({left:5,top:5,right:5,bottom:5}),Nn(160),Un(100),Za([0,9])];class D0t{async initialize(){await Dn().exec(VH("md",[{i:0,u:"A",v:2},{i:1,u:"B",v:8},{i:2,u:"C",v:3},{i:3,u:"D",v:7},{i:4,u:"E",v:5},{i:5,u:"F",v:4},{i:6,u:"G",v:6},{i:7,u:"H",v:1}]))}render(){return Lc(gc(we(cA(de("md"),{x:"u",y:"v",fill:"steelblue"}),...gs),we(V7(de("md"),{x:"u",y:"v",stroke:"steelblue",curve:"monotone-x",marker:"circle"}),...gs),we(uy(de("md"),{x:"u",y:"v",text:"u",fill:"steelblue"}),...gs),we(Y7(de("md"),{x:"u",y:"v",stroke:"steelblue"}),...gs),we(j7(de("md"),{x:"u",y:"v",fill:"steelblue"}),...gs)),gc(we(Dw(de("md"),{x:"i",y:"v",fill:"currentColor",r:1.5}),X7(de("md"),{x:"i",y:"v",stroke:"steelblue"}),...gs,ur([-.5,7.5])),we(H7({stroke:"#aaa",strokeOpacity:.5}),G7(de("md"),{x:"i",y:"v",fill:kn()}),...gs,Yo("blues"),ur([-1,8])),we(W7(de("md"),{x:"i",y:"v",stroke:"steelblue",bandwidth:15}),...gs,ur([-1,8])),we(Xl(de("md"),{x:"i",y:"v",fill:"density",bandwidth:15}),...gs,Yo("blues"),ur([-1,8])),we(q7(de("md"),{x:"i",y:"v",fill:"density",bandwidth:2,binWidth:1}),...gs,Yo("blues"),ur([-1,8]))))}}class O0t{async initialize(){await Dn().exec(`CREATE TEMP VIEW IF NOT EXISTS gaia_viz AS -- compute u and v with natural earth projection
      WITH prep AS (
        SELECT
          radians((-l + 540) % 360 - 180) AS lambda_,
          radians(b) AS phi,
          asin(sqrt(3)/2 * sin(phi)) AS t,
          t^2 AS t2,
          t2^3 AS t6,
          *
        FROM mosaic_examples.main.gaia_5m
      )
      SELECT
        (1.340264 * lambda_ * cos(t)) / (sqrt(3)/2 * (1.340264 + (-0.081106 * 3 * t2) + (t6 * (0.000893 * 7 + 0.003796 * 9 * t2)))) AS u,
        t * (1.340264 + (-0.081106 * t2) + (t6 * (0.000893 + 0.003796 * t2))) AS v,
        * EXCLUDE('t', 't2', 't6')
      FROM prep
      WHERE parallax BETWEEN -5 AND 20`)}render(){const t=Gs.crossfilter(),n=pr.value(0),r=pr.value(2),i=pr.value("sqrt");return gc(Lc(we(Xl(de("gaia_viz",{filterBy:t}),{x:"u",y:"v",fill:"density",bandwidth:n,binWidth:r,binType:"normal"}),fy({pixelSize:2,as:t}),wv(Wr),uI(i),Yo("viridis"),Nn(440),Un(250),pf(25),Sv(20),cI(1)),gc(we(qo(de("gaia_viz",{filterBy:t}),{x:Ka("phot_g_mean_mag"),y:kn(),fill:"steelblue",inset:.5}),Ys({as:t}),ur(Wr),lI(i),xv(!0),Nn(220),Un(120),pf(65)),we(qo(de("gaia_viz",{filterBy:t}),{x:Ka("parallax"),y:kn(),fill:"steelblue",inset:.5}),Ys({as:t}),ur(Wr),lI(i),xv(!0),Nn(220),Un(120),pf(65)))),Av(10),we(Xl(de("gaia_viz",{filterBy:t}),{x:"bp_rp",y:"phot_g_mean_mag",fill:"density",bandwidth:n,binWidth:r,binType:"normal"}),fy({pixelSize:2,as:t}),wv(Wr),uI(i),Yo("viridis"),x7(!0),Nn(230),Un(370),pf(25),Sv(20),cI(1)))}}const R0t="assets/countries-110m-MkhAC_yf.json";class F0t{constructor(){tt(this,"land",null)}async initialize(){this.land=await fetch(R0t).then(t=>t.json()).then(t=>{if(t.objects.land.type!=="GeometryCollection")throw Error("unexpected geojson type");return x0t(t,t.objects.land).features})}render(){const t=pr.value(-180),n=pr.value(-30),r=pr.array([t,n]);return Lc(gc(KS({label:"Longitude",as:t,min:-180,max:180,step:1}),KS({label:"Latitude",as:n,min:-90,max:90,step:1})),we(Q7(this.land,{fill:"currentColor",fillOpacity:.2}),K7(),Dw(de("mosaic_examples.main.earthquakes"),{x:"longitude",y:"latitude",r:X`POW(10, magnitude)`,stroke:"red",fill:"red",fillOpacity:.2}),_7("overflow: visible;"),T7("orthographic"),A7(r)))}}class L0t{async initialize(){await Dn().exec(`CREATE TEMP TABLE IF NOT EXISTS weather AS
        SELECT datepart('doy', date) as doy, precipitation, temp_max, temp_min, wind, weather
        FROM mosaic_examples.main.seattle_weather`)}render(){const t=Gs.single(),n=pr.array(["sun","fog","drizzle","rain","snow"]),r=pr.array(["#e7ba52","#a7a7a7","#aec7e8","#1f77b4","#9467bd"]),i=Gs.intersect();return Lc(gc(we(Dw(de("weather",{filterBy:t}),{x:"doy",y:"temp_max",fill:"weather",r:"precipitation",fillOpacity:.7}),Ys({as:i,brush:{fill:"none",stroke:"#888"}}),Tv({by:i,fill:"#ccc",fillOpacity:.2}),i9({as:t,columns:1}),wv(Wr),ly(n),fI(r),I7(Wr),E7([2,10]),Nn(680),Un(300))),we(Ev(de("weather"),{x:kn(),y:"weather",fill:"#ccc",fillOpacity:.2}),Ev(de("weather",{filterBy:i}),{x:kn(),y:"weather",fill:"weather",order:"weather"}),r9({as:t}),Tv({by:t}),ur(Wr),Za(n),iA(null),ly(n),fI(r),Nn(680)))}}const P6="flights_200k_viz",z6="flights_10m_viz";class j6{constructor(t="flights_200k"){tt(this,"flightsTableName");tt(this,"vizTable",null);this.flightsTableName=t}async initialize(){const t=`mosaic_examples.main.${this.flightsTableName}`;this.flightsTableName==="flights_10m"?(await Dn().exec(`
      create temp view if not exists ${z6} as
      select GREATEST(-60, LEAST(ARR_DELAY, 180))::DOUBLE AS delay, DISTANCE AS distance, DEP_TIME AS time
      from ${t}
      `),this.vizTable=z6):(await Dn().exec(`
      create temp view if not exists ${P6} as
      select *
      from ${t}
      `),this.vizTable=P6)}render(){const t=Gs.crossfilter();return Lc(we(qo(de(this.vizTable,{filterBy:t}),{x:Ka("delay"),y:kn(),fill:"steelblue",inset:.5}),Ys({as:t}),ur(Wr),Ja("s"),Nn(600),Un(200)),we(qo(de(this.vizTable,{filterBy:t}),{x:Ka("time"),y:kn(),fill:"steelblue",inset:.5}),Ys({as:t}),ur(Wr),Ja("s"),Nn(600),Un(200)),we(qo(de(this.vizTable,{filterBy:t}),{x:Ka("distance"),y:kn(),fill:"steelblue",inset:.5}),Ys({as:t}),ur(Wr),Ja("s"),Nn(600),Un(200)))}}class B0t{async initialize(){await Dn().exec(`
    CREATE TEMP TABLE IF NOT EXISTS fsq_places AS
      SELECT * FROM mosaic_examples.main.fsq_places_by_year_nyc
      WHERE
        x > 900000
        AND x < 1100000
        AND y > 100000
        AND y < 400000
    `)}render(){const t=Gs.crossfilter(),n=pr.array(["Arts and Entertainment","Business and Professional Services","Community and Government","Dining and Drinking","Event","Health and Medicine","Landmarks and Outdoors","Retail","Sports and Recreation","Travel and Transportation"]);return Lc(gc(we(Xl(de("fsq_places",{filterBy:t}),{x:"x",y:"y",bandwidth:0}),uy([{label:"Places of interest in NYC"}],{dx:10,dy:10,text:"label",fill:"black",fontSize:"1.2em",frameAnchor:"top-left"}),Nn(335),Un(550),_v(0),ay(null),cy(null),ur([975e3,1005e3]),Za([19e4,24e4]),Yo("blues")),a9(10),we(Ev(de("fsq_places",{filterBy:t}),{x:kn(),y:"level1_category_name",fill:"level1_category_name"}),ly(Wr),iA("Level 1 category"),rA("s"),fp("count"),Za(n),ly(n),Nn(680),Un(550),Sv(5),pf(220),S7(35))),Av(10),we(qo(de("fsq_places"),{x:Ka("created"),y:kn(),fill:"steelblue",inset:.5}),Ys({as:t}),Ja("s"),fp("Year created →"),Nn(680),Un(100)),Av(10),we(qo(de("fsq_places"),{x:Ka("closed"),y:kn(),fill:"steelblue",inset:.5}),Za([0,1e4]),Ys({as:t}),Ja("s"),fp("Year closed →"),Nn(680),Un(100)))}}class C0t{async initialize(){await Dn().exec("INSTALL spatial"),await Dn().exec("LOAD spatial"),await Dn().exec(`CREATE TABLE IF NOT EXISTS trips AS
        WITH rides AS (
          SELECT
            pickup_datetime::TIMESTAMP AS datetime,
            ST_Transform(ST_Point(pickup_latitude, pickup_longitude), 'EPSG:4326', 'ESRI:102718') AS pick,
            ST_Transform(ST_Point(dropoff_latitude, dropoff_longitude), 'EPSG:4326', 'ESRI:102718') AS drop
            from 'https://idl.uw.edu/mosaic-datasets/data/nyc-rides-2010.parquet'
        )
        SELECT
          (HOUR(datetime) + MINUTE(datetime)/60) AS time,
          ST_X(pick) AS px, ST_Y(pick) AS py,
          ST_X(drop) AS dx, ST_Y(drop) AS dy
        FROM rides`)}render(){const t=Gs.crossfilter();return Lc(gc(we(Xl(de("trips",{filterBy:t}),{x:"px",y:"py",bandwidth:0}),fy({as:t}),uy([{label:"Taxi Pickups"}],{dx:10,dy:10,text:"label",fill:"black",fontSize:"1.2em",frameAnchor:"top-left"}),Nn(335),Un(550),_v(0),ay(null),cy(null),ur([975e3,1005e3]),Za([19e4,24e4]),Yo("blues")),Av(10),we(Xl(de("trips",{filterBy:t}),{x:"dx",y:"dy",bandwidth:0}),fy({as:t}),uy([{label:"Taxi Dropoffs"}],{dx:10,dy:10,text:"label",fill:"black",fontSize:"1.2em",frameAnchor:"top-left"}),Nn(335),Un(550),_v(0),ay(null),cy(null),ur([975e3,1005e3]),Za([19e4,24e4]),Yo("oranges"))),a9(10),we(qo(de("trips"),{x:Ka("time"),y:kn(),fill:"steelblue",inset:.5}),Ys({as:t}),Ja("s"),fp("Pickup Hour →"),Nn(680),Un(100)))}}const c9={"Mark Types":new D0t,"NYPD Complaints":new k0t,Earthquakes:new F0t,"Seattle Weather":new L0t,"Flights 200K":new j6("flights_200k"),"Flights 10M":new j6("flights_10m"),"Gaia Star Catalog":new O0t,"NYC Rides":new C0t,"Foursquare Places":new B0t},V6=Object.keys(c9);function U0t(){const[e,t]=Bn.useState(null),[n,r]=Bn.useState(null),[i,s]=Bn.useState(V6[0]),o=Bn.useCallback(a=>{s(a.target.value)},[]);return Bn.useEffect(()=>{(async()=>{if(n){const a=c9[i];t(null),n.innerHTML="Loading, please wait…";try{await a.initialize(),n.innerHTML="",n.appendChild(a.render())}catch(c){const l=String(c);n.innerHTML=l,/Catalog "sample_data" does not exist!/.test(l)?t("sample_data"):/Catalog "mosaic_examples" does not exist!/.test(l)&&t("mosaic_examples")}}})()},[i,n]),Wt.jsxs("div",{id:"vizzes-pane",children:[Wt.jsx("div",{id:"selector-pane",children:Wt.jsx("select",{id:"viz-selector",value:i,onChange:o,children:V6.map(a=>Wt.jsx("option",{children:a},a))})}),Wt.jsx("div",{id:"viz-pane",ref:r}),e==="sample_data"?Wt.jsxs("div",{id:"help-pane",children:[Wt.jsxs("div",{children:["This example requires the ",Wt.jsx("span",{className:"code",children:"sample_data"})," share."]}),Wt.jsx("div",{children:"To attach it to your account, run:"}),Wt.jsx("pre",{children:"ATTACH 'md:_share/sample_data/23b0d623-1361-421d-ae77-62d701d471e6';"})]}):null,e==="mosaic_examples"?Wt.jsxs("div",{id:"help-pane",children:[Wt.jsxs("div",{children:["This example requires the ",Wt.jsx("span",{className:"code",children:"mosaic_examples"})," share."]}),Wt.jsx("div",{children:"To attach it to your account, run:"}),Wt.jsx("pre",{children:"ATTACH 'md:_share/mosaic_examples/b01cfda8-239e-4148-a228-054b94cdc3b4';"})]}):null]})}const P0t=new TextDecoder("utf-8"),vI=e=>P0t.decode(e),z0t=new TextEncoder,dA=e=>z0t.encode(e),j0t=e=>typeof e=="number",l9=e=>typeof e=="boolean",gn=e=>typeof e=="function",Cr=e=>e!=null&&Object(e)===e,Ql=e=>Cr(e)&&gn(e.then),dm=e=>Cr(e)&&gn(e[Symbol.iterator]),Yd=e=>Cr(e)&&gn(e[Symbol.asyncIterator]),bI=e=>Cr(e)&&Cr(e.schema),u9=e=>Cr(e)&&"done"in e&&"value"in e,f9=e=>Cr(e)&&gn(e.stat)&&j0t(e.fd),d9=e=>Cr(e)&&hA(e.body),Rw=e=>"_getDOMStream"in e&&"_getNodeStream"in e,V0t=e=>Cr(e)&&gn(e.abort)&&gn(e.getWriter)&&!Rw(e),hA=e=>Cr(e)&&gn(e.cancel)&&gn(e.getReader)&&!Rw(e),Y0t=e=>Cr(e)&&gn(e.end)&&gn(e.write)&&l9(e.writable)&&!Rw(e),h9=e=>Cr(e)&&gn(e.read)&&gn(e.pipe)&&l9(e.readable)&&!Rw(e),q0t=e=>Cr(e)&&gn(e.clear)&&gn(e.bytes)&&gn(e.position)&&gn(e.setPosition)&&gn(e.capacity)&&gn(e.getBufferIdentifier)&&gn(e.createLong),pA=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function W0t(e){const t=e[0]?[e[0]]:[];let n,r,i,s;for(let o,a,c=0,l=0,u=e.length;++c<u;){if(o=t[l],a=e[c],!o||!a||o.buffer!==a.buffer||a.byteOffset<o.byteOffset){a&&(t[++l]=a);continue}if({byteOffset:n,byteLength:i}=o,{byteOffset:r,byteLength:s}=a,n+i<r||r+s<n){a&&(t[++l]=a);continue}t[l]=new Uint8Array(o.buffer,n,r-n+s)}return t}function Y6(e,t,n=0,r=t.byteLength){const i=e.byteLength,s=new Uint8Array(e.buffer,e.byteOffset,i),o=new Uint8Array(t.buffer,t.byteOffset,Math.min(r,i));return s.set(o,n),e}function Qs(e,t){const n=W0t(e),r=n.reduce((u,f)=>u+f.byteLength,0);let i,s,o,a=0,c=-1;const l=Math.min(t||Number.POSITIVE_INFINITY,r);for(const u=n.length;++c<u;){if(i=n[c],s=i.subarray(0,Math.min(i.length,l-a)),l<=a+s.length){s.length<i.length?n[c]=i.subarray(s.length):s.length===i.length&&c++,o?Y6(o,s,a):o=s;break}Y6(o||(o=new Uint8Array(l)),s,a),a+=s.length}return[o||new Uint8Array(0),n.slice(c),r-(o?o.byteLength:0)]}function ve(e,t){let n=u9(t)?t.value:t;return n instanceof e?e===Uint8Array?new e(n.buffer,n.byteOffset,n.byteLength):n:n?(typeof n=="string"&&(n=dA(n)),n instanceof ArrayBuffer?new e(n):n instanceof pA?new e(n):q0t(n)?ve(e,n.bytes()):ArrayBuffer.isView(n)?n.byteLength<=0?new e(0):new e(n.buffer,n.byteOffset,n.byteLength/e.BYTES_PER_ELEMENT):e.from(n)):new e(0)}const yh=e=>ve(Int32Array,e),q6=e=>ve(BigInt64Array,e),Qt=e=>ve(Uint8Array,e),wI=e=>(e.next(),e);function*G0t(e,t){const n=function*(i){yield i},r=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof pA?n(t):dm(t)?t:n(t);return yield*wI(function*(i){let s=null;do s=i.next(yield ve(e,s));while(!s.done)}(r[Symbol.iterator]())),new e}const H0t=e=>G0t(Uint8Array,e);function p9(e,t){return hn(this,arguments,function*(){if(Ql(t))return yield J(yield J(yield*Xa(Kr(p9(e,yield J(t))))));const r=function(o){return hn(this,arguments,function*(){yield yield J(yield J(o))})},i=function(o){return hn(this,arguments,function*(){yield J(yield*Xa(Kr(wI(function*(a){let c=null;do c=a.next(yield c==null?void 0:c.value);while(!c.done)}(o[Symbol.iterator]())))))})},s=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof pA?r(t):dm(t)?i(t):Yd(t)?t:r(t);return yield J(yield*Xa(Kr(wI(function(o){return hn(this,arguments,function*(){let a=null;do a=yield J(o.next(yield yield J(ve(e,a))));while(!a.done)})}(s[Symbol.asyncIterator]()))))),yield J(new e)})}const X0t=e=>p9(Uint8Array,e);function y9(e,t,n){if(e!==0){n=n.slice(0,t);for(let r=-1,i=n.length;++r<i;)n[r]+=e}return n.subarray(0,t)}function Q0t(e,t){let n=0;const r=e.length;if(r!==t.length)return!1;if(r>0)do if(e[n]!==t[n])return!1;while(++n<r);return!0}const mi={fromIterable(e){return w0(K0t(e))},fromAsyncIterable(e){return w0(Z0t(e))},fromDOMStream(e){return w0(J0t(e))},fromNodeStream(e){return w0(egt(e))},toDOMStream(e,t){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(e,t){throw new Error('"toNodeStream" not available in this environment')}},w0=e=>(e.next(),e);function*K0t(e){let t,n=!1,r=[],i,s,o,a=0;function c(){return s==="peek"?Qs(r,o)[0]:([i,r,a]=Qs(r,o),i)}({cmd:s,size:o}=(yield null)||{cmd:"read",size:0});const l=H0t(e)[Symbol.iterator]();try{do if({done:t,value:i}=Number.isNaN(o-a)?l.next():l.next(o-a),!t&&i.byteLength>0&&(r.push(i),a+=i.byteLength),t||o<=a)do({cmd:s,size:o}=yield c());while(o<a);while(!t)}catch(u){(n=!0)&&typeof l.throw=="function"&&l.throw(u)}finally{n===!1&&typeof l.return=="function"&&l.return(null)}return null}function Z0t(e){return hn(this,arguments,function*(){let n,r=!1,i=[],s,o,a,c=0;function l(){return o==="peek"?Qs(i,a)[0]:([s,i,c]=Qs(i,a),s)}({cmd:o,size:a}=(yield yield J(null))||{cmd:"read",size:0});const u=X0t(e)[Symbol.asyncIterator]();try{do if({done:n,value:s}=Number.isNaN(a-c)?yield J(u.next()):yield J(u.next(a-c)),!n&&s.byteLength>0&&(i.push(s),c+=s.byteLength),n||a<=c)do({cmd:o,size:a}=yield yield J(l()));while(a<c);while(!n)}catch(f){(r=!0)&&typeof u.throw=="function"&&(yield J(u.throw(f)))}finally{r===!1&&typeof u.return=="function"&&(yield J(u.return(new Uint8Array(0))))}return yield J(null)})}function J0t(e){return hn(this,arguments,function*(){let n=!1,r=!1,i=[],s,o,a,c=0;function l(){return o==="peek"?Qs(i,a)[0]:([s,i,c]=Qs(i,a),s)}({cmd:o,size:a}=(yield yield J(null))||{cmd:"read",size:0});const u=new tgt(e);try{do if({done:n,value:s}=Number.isNaN(a-c)?yield J(u.read()):yield J(u.read(a-c)),!n&&s.byteLength>0&&(i.push(Qt(s)),c+=s.byteLength),n||a<=c)do({cmd:o,size:a}=yield yield J(l()));while(a<c);while(!n)}catch(f){(r=!0)&&(yield J(u.cancel(f)))}finally{r===!1?yield J(u.cancel()):e.locked&&u.releaseLock()}return yield J(null)})}class tgt{constructor(t){this.source=t,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(t){return H(this,void 0,void 0,function*(){const{reader:n,source:r}=this;n&&(yield n.cancel(t).catch(()=>{})),r&&r.locked&&this.releaseLock()})}read(t){return H(this,void 0,void 0,function*(){if(t===0)return{done:this.reader==null,value:new Uint8Array(0)};const n=yield this.reader.read();return!n.done&&(n.value=Qt(n)),n})}}const I2=(e,t)=>{const n=i=>r([t,i]);let r;return[t,n,new Promise(i=>(r=i)&&e.once(t,n))]};function egt(e){return hn(this,arguments,function*(){const n=[];let r="error",i=!1,s=null,o,a,c=0,l=[],u;function f(){return o==="peek"?Qs(l,a)[0]:([u,l,c]=Qs(l,a),u)}if({cmd:o,size:a}=(yield yield J(null))||{cmd:"read",size:0},e.isTTY)return yield yield J(new Uint8Array(0)),yield J(null);try{n[0]=I2(e,"end"),n[1]=I2(e,"error");do{if(n[2]=I2(e,"readable"),[r,s]=yield J(Promise.race(n.map(h=>h[2]))),r==="error")break;if((i=r==="end")||(Number.isFinite(a-c)?(u=Qt(e.read(a-c)),u.byteLength<a-c&&(u=Qt(e.read()))):u=Qt(e.read()),u.byteLength>0&&(l.push(u),c+=u.byteLength)),i||a<=c)do({cmd:o,size:a}=yield yield J(f()));while(a<c)}while(!i)}finally{yield J(d(n,r==="error"?s:null))}return yield J(null);function d(h,p){return u=l=null,new Promise((g,b)=>{for(const[y,m]of h)e.off(y,m);try{const y=e.destroy;y&&y.call(e,p),p=void 0}catch(y){p=y||p}finally{p!=null?b(p):g()}})}})}var on;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(on||(on={}));var pn;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(pn||(pn={}));var rn;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(rn||(rn={}));var nr;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(nr||(nr={}));var at;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(at||(at={}));var tr;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(tr||(tr={}));const E2=2,Ds=4,No=4,ye=4,Na=new Int32Array(2),W6=new Float32Array(Na.buffer),G6=new Float64Array(Na.buffer),_0=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;var _I;(function(e){e[e.UTF8_BYTES=1]="UTF8_BYTES",e[e.UTF16_STRING=2]="UTF16_STRING"})(_I||(_I={}));let gd=class m9{constructor(t){this.bytes_=t,this.position_=0,this.text_decoder_=new TextDecoder}static allocate(t){return new m9(new Uint8Array(t))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(t){this.position_=t}capacity(){return this.bytes_.length}readInt8(t){return this.readUint8(t)<<24>>24}readUint8(t){return this.bytes_[t]}readInt16(t){return this.readUint16(t)<<16>>16}readUint16(t){return this.bytes_[t]|this.bytes_[t+1]<<8}readInt32(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}readUint32(t){return this.readInt32(t)>>>0}readInt64(t){return BigInt.asIntN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readUint64(t){return BigInt.asUintN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readFloat32(t){return Na[0]=this.readInt32(t),W6[0]}readFloat64(t){return Na[_0?0:1]=this.readInt32(t),Na[_0?1:0]=this.readInt32(t+4),G6[0]}writeInt8(t,n){this.bytes_[t]=n}writeUint8(t,n){this.bytes_[t]=n}writeInt16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeUint16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeInt32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeUint32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeInt64(t,n){this.writeInt32(t,Number(BigInt.asIntN(32,n))),this.writeInt32(t+4,Number(BigInt.asIntN(32,n>>BigInt(32))))}writeUint64(t,n){this.writeUint32(t,Number(BigInt.asUintN(32,n))),this.writeUint32(t+4,Number(BigInt.asUintN(32,n>>BigInt(32))))}writeFloat32(t,n){W6[0]=n,this.writeInt32(t,Na[0])}writeFloat64(t,n){G6[0]=n,this.writeInt32(t,Na[_0?0:1]),this.writeInt32(t+4,Na[_0?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+Ds+No)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let t="";for(let n=0;n<No;n++)t+=String.fromCharCode(this.readInt8(this.position_+Ds+n));return t}__offset(t,n){const r=t-this.readInt32(t);return n<this.readInt16(r)?this.readInt16(r+n):0}__union(t,n){return t.bb_pos=n+this.readInt32(n),t.bb=this,t}__string(t,n){t+=this.readInt32(t);const r=this.readInt32(t);t+=Ds;const i=this.bytes_.subarray(t,t+r);return n===_I.UTF8_BYTES?i:this.text_decoder_.decode(i)}__union_with_string(t,n){return typeof t=="string"?this.__string(n):this.__union(t,n)}__indirect(t){return t+this.readInt32(t)}__vector(t){return t+this.readInt32(t)+Ds}__vector_len(t){return this.readInt32(t+this.readInt32(t))}__has_identifier(t){if(t.length!=No)throw new Error("FlatBuffers: file identifier must be length "+No);for(let n=0;n<No;n++)if(t.charCodeAt(n)!=this.readInt8(this.position()+Ds+n))return!1;return!0}createScalarList(t,n){const r=[];for(let i=0;i<n;++i){const s=t(i);s!==null&&r.push(s)}return r}createObjList(t,n){const r=[];for(let i=0;i<n;++i){const s=t(i);s!==null&&r.push(s.unpack())}return r}},g9=class v9{constructor(t){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null,this.text_encoder=new TextEncoder;let n;t?n=t:n=1024,this.bb=gd.allocate(n),this.space=n}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(t){this.force_defaults=t}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(t,n){t>this.minalign&&(this.minalign=t);const r=~(this.bb.capacity()-this.space+n)+1&t-1;for(;this.space<r+t+n;){const i=this.bb.capacity();this.bb=v9.growByteBuffer(this.bb),this.space+=this.bb.capacity()-i}this.pad(r)}pad(t){for(let n=0;n<t;n++)this.bb.writeInt8(--this.space,0)}writeInt8(t){this.bb.writeInt8(this.space-=1,t)}writeInt16(t){this.bb.writeInt16(this.space-=2,t)}writeInt32(t){this.bb.writeInt32(this.space-=4,t)}writeInt64(t){this.bb.writeInt64(this.space-=8,t)}writeFloat32(t){this.bb.writeFloat32(this.space-=4,t)}writeFloat64(t){this.bb.writeFloat64(this.space-=8,t)}addInt8(t){this.prep(1,0),this.writeInt8(t)}addInt16(t){this.prep(2,0),this.writeInt16(t)}addInt32(t){this.prep(4,0),this.writeInt32(t)}addInt64(t){this.prep(8,0),this.writeInt64(t)}addFloat32(t){this.prep(4,0),this.writeFloat32(t)}addFloat64(t){this.prep(8,0),this.writeFloat64(t)}addFieldInt8(t,n,r){(this.force_defaults||n!=r)&&(this.addInt8(n),this.slot(t))}addFieldInt16(t,n,r){(this.force_defaults||n!=r)&&(this.addInt16(n),this.slot(t))}addFieldInt32(t,n,r){(this.force_defaults||n!=r)&&(this.addInt32(n),this.slot(t))}addFieldInt64(t,n,r){(this.force_defaults||n!==r)&&(this.addInt64(n),this.slot(t))}addFieldFloat32(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat32(n),this.slot(t))}addFieldFloat64(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat64(n),this.slot(t))}addFieldOffset(t,n,r){(this.force_defaults||n!=r)&&(this.addOffset(n),this.slot(t))}addFieldStruct(t,n,r){n!=r&&(this.nested(n),this.slot(t))}nested(t){if(t!=this.offset())throw new TypeError("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new TypeError("FlatBuffers: object serialization must not be nested.")}slot(t){this.vtable!==null&&(this.vtable[t]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(t){const n=t.capacity();if(n&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const r=n<<1,i=gd.allocate(r);return i.setPosition(r-n),i.bytes().set(t.bytes(),r-n),i}addOffset(t){this.prep(Ds,0),this.writeInt32(this.offset()-t+Ds)}startObject(t){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=t;for(let n=0;n<t;n++)this.vtable[n]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const t=this.offset();let n=this.vtable_in_use-1;for(;n>=0&&this.vtable[n]==0;n--);const r=n+1;for(;n>=0;n--)this.addInt16(this.vtable[n]!=0?t-this.vtable[n]:0);const i=2;this.addInt16(t-this.object_start);const s=(r+i)*E2;this.addInt16(s);let o=0;const a=this.space;t:for(n=0;n<this.vtables.length;n++){const c=this.bb.capacity()-this.vtables[n];if(s==this.bb.readInt16(c)){for(let l=E2;l<s;l+=E2)if(this.bb.readInt16(a+l)!=this.bb.readInt16(c+l))continue t;o=this.vtables[n];break}}return o?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,o-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t}finish(t,n,r){const i=r?ye:0;if(n){const s=n;if(this.prep(this.minalign,Ds+No+i),s.length!=No)throw new TypeError("FlatBuffers: file identifier must be length "+No);for(let o=No-1;o>=0;o--)this.writeInt8(s.charCodeAt(o))}this.prep(this.minalign,Ds+i),this.addOffset(t),i&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(t,n){this.finish(t,n,!0)}requiredField(t,n){const r=this.bb.capacity()-t,i=r-this.bb.readInt32(r);if(!(n<this.bb.readInt16(i)&&this.bb.readInt16(i+n)!=0))throw new TypeError("FlatBuffers: field "+n+" must be set")}startVector(t,n,r){this.notNested(),this.vector_num_elems=n,this.prep(Ds,t*n),this.prep(r,t*n)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(t){if(!t)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(t))return this.string_maps.get(t);const n=this.createString(t);return this.string_maps.set(t,n),n}createString(t){if(t==null)return 0;let n;return t instanceof Uint8Array?n=t:n=this.text_encoder.encode(t),this.addInt8(0),this.startVector(1,n.length,1),this.bb.setPosition(this.space-=n.length),this.bb.bytes().set(n,this.space),this.endVector()}createByteVector(t){return t==null?0:(this.startVector(1,t.length,1),this.bb.setPosition(this.space-=t.length),this.bb.bytes().set(t,this.space),this.endVector())}createObjectOffset(t){return t===null?0:typeof t=="string"?this.createString(t):t.pack(this)}createObjectOffsetList(t){const n=[];for(let r=0;r<t.length;++r){const i=t[r];if(i!==null)n.push(this.createObjectOffset(i));else throw new TypeError("FlatBuffers: Argument for createObjectOffsetList cannot contain null.")}return n}createStructOffsetList(t,n){return n(this,t.length),this.createObjectOffsetList(t.slice().reverse()),this.endVector()}};var Mv;(function(e){e[e.BUFFER=0]="BUFFER"})(Mv||(Mv={}));var Nv;(function(e){e[e.LZ4_FRAME=0]="LZ4_FRAME",e[e.ZSTD=1]="ZSTD"})(Nv||(Nv={}));class $a{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBodyCompression(t,n){return(n||new $a).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBodyCompression(t,n){return t.setPosition(t.position()+ye),(n||new $a).__init(t.readInt32(t.position())+t.position(),t)}codec(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt8(this.bb_pos+t):Nv.LZ4_FRAME}method(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt8(this.bb_pos+t):Mv.BUFFER}static startBodyCompression(t){t.startObject(2)}static addCodec(t,n){t.addFieldInt8(0,n,Nv.LZ4_FRAME)}static addMethod(t,n){t.addFieldInt8(1,n,Mv.BUFFER)}static endBodyCompression(t){return t.endObject()}static createBodyCompression(t,n,r){return $a.startBodyCompression(t),$a.addCodec(t,n),$a.addMethod(t,r),$a.endBodyCompression(t)}}class b9{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(t,n,r){return t.prep(8,16),t.writeInt64(BigInt(r??0)),t.writeInt64(BigInt(n??0)),t.offset()}}let w9=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(t,n,r){return t.prep(8,16),t.writeInt64(BigInt(r??0)),t.writeInt64(BigInt(n??0)),t.offset()}},So=class SI{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsRecordBatch(t,n){return(n||new SI).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsRecordBatch(t,n){return t.setPosition(t.position()+ye),(n||new SI).__init(t.readInt32(t.position())+t.position(),t)}length(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}nodes(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new w9).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}nodesLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}buffers(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new b9).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}buffersLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}compression(t){const n=this.bb.__offset(this.bb_pos,10);return n?(t||new $a).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}static startRecordBatch(t){t.startObject(4)}static addLength(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addNodes(t,n){t.addFieldOffset(1,n,0)}static startNodesVector(t,n){t.startVector(16,n,8)}static addBuffers(t,n){t.addFieldOffset(2,n,0)}static startBuffersVector(t,n){t.startVector(16,n,8)}static addCompression(t,n){t.addFieldOffset(3,n,0)}static endRecordBatch(t){return t.endObject()}},Lu=class xI{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryBatch(t,n){return(n||new xI).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryBatch(t,n){return t.setPosition(t.position()+ye),(n||new xI).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}data(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new So).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isDelta(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startDictionaryBatch(t){t.startObject(3)}static addId(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addData(t,n){t.addFieldOffset(1,n,0)}static addIsDelta(t,n){t.addFieldInt8(2,+n,0)}static endDictionaryBatch(t){return t.endObject()}};var vd;(function(e){e[e.Little=0]="Little",e[e.Big=1]="Big"})(vd||(vd={}));var $v;(function(e){e[e.DenseArray=0]="DenseArray"})($v||($v={}));class Yr{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInt(t,n){return(n||new Yr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInt(t,n){return t.setPosition(t.position()+ye),(n||new Yr).__init(t.readInt32(t.position())+t.position(),t)}bitWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}isSigned(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startInt(t){t.startObject(2)}static addBitWidth(t,n){t.addFieldInt32(0,n,0)}static addIsSigned(t,n){t.addFieldInt8(1,+n,0)}static endInt(t){return t.endObject()}static createInt(t,n,r){return Yr.startInt(t),Yr.addBitWidth(t,n),Yr.addIsSigned(t,r),Yr.endInt(t)}}class $o{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryEncoding(t,n){return(n||new $o).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryEncoding(t,n){return t.setPosition(t.position()+ye),(n||new $o).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}indexType(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new Yr).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isOrdered(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}dictionaryKind(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt16(this.bb_pos+t):$v.DenseArray}static startDictionaryEncoding(t){t.startObject(4)}static addId(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addIndexType(t,n){t.addFieldOffset(1,n,0)}static addIsOrdered(t,n){t.addFieldInt8(2,+n,0)}static addDictionaryKind(t,n){t.addFieldInt16(3,n,$v.DenseArray)}static endDictionaryEncoding(t){return t.endObject()}}class vn{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsKeyValue(t,n){return(n||new vn).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsKeyValue(t,n){return t.setPosition(t.position()+ye),(n||new vn).__init(t.readInt32(t.position())+t.position(),t)}key(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}value(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startKeyValue(t){t.startObject(2)}static addKey(t,n){t.addFieldOffset(0,n,0)}static addValue(t,n){t.addFieldOffset(1,n,0)}static endKeyValue(t){return t.endObject()}static createKeyValue(t,n,r){return vn.startKeyValue(t),vn.addKey(t,n),vn.addValue(t,r),vn.endKeyValue(t)}}let H6=class Ch{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBinary(t,n){return(n||new Ch).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBinary(t,n){return t.setPosition(t.position()+ye),(n||new Ch).__init(t.readInt32(t.position())+t.position(),t)}static startBinary(t){t.startObject(0)}static endBinary(t){return t.endObject()}static createBinary(t){return Ch.startBinary(t),Ch.endBinary(t)}},X6=class Uh{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBool(t,n){return(n||new Uh).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBool(t,n){return t.setPosition(t.position()+ye),(n||new Uh).__init(t.readInt32(t.position())+t.position(),t)}static startBool(t){t.startObject(0)}static endBool(t){return t.endObject()}static createBool(t){return Uh.startBool(t),Uh.endBool(t)}},eg=class Bu{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDate(t,n){return(n||new Bu).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDate(t,n){return t.setPosition(t.position()+ye),(n||new Bu).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):nr.MILLISECOND}static startDate(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,nr.MILLISECOND)}static endDate(t){return t.endObject()}static createDate(t,n){return Bu.startDate(t),Bu.addUnit(t,n),Bu.endDate(t)}},Cu=class xa{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDecimal(t,n){return(n||new xa).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDecimal(t,n){return t.setPosition(t.position()+ye),(n||new xa).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}scale(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}bitWidth(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt32(this.bb_pos+t):128}static startDecimal(t){t.startObject(3)}static addPrecision(t,n){t.addFieldInt32(0,n,0)}static addScale(t,n){t.addFieldInt32(1,n,0)}static addBitWidth(t,n){t.addFieldInt32(2,n,128)}static endDecimal(t){return t.endObject()}static createDecimal(t,n,r,i){return xa.startDecimal(t),xa.addPrecision(t,n),xa.addScale(t,r),xa.addBitWidth(t,i),xa.endDecimal(t)}},ng=class Uu{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDuration(t,n){return(n||new Uu).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDuration(t,n){return t.setPosition(t.position()+ye),(n||new Uu).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):at.MILLISECOND}static startDuration(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,at.MILLISECOND)}static endDuration(t){return t.endObject()}static createDuration(t,n){return Uu.startDuration(t),Uu.addUnit(t,n),Uu.endDuration(t)}},rg=class Pu{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeBinary(t,n){return(n||new Pu).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeBinary(t,n){return t.setPosition(t.position()+ye),(n||new Pu).__init(t.readInt32(t.position())+t.position(),t)}byteWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeBinary(t){t.startObject(1)}static addByteWidth(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeBinary(t){return t.endObject()}static createFixedSizeBinary(t,n){return Pu.startFixedSizeBinary(t),Pu.addByteWidth(t,n),Pu.endFixedSizeBinary(t)}},ig=class zu{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeList(t,n){return(n||new zu).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeList(t,n){return t.setPosition(t.position()+ye),(n||new zu).__init(t.readInt32(t.position())+t.position(),t)}listSize(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeList(t){t.startObject(1)}static addListSize(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeList(t){return t.endObject()}static createFixedSizeList(t,n){return zu.startFixedSizeList(t),zu.addListSize(t,n),zu.endFixedSizeList(t)}};class Os{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFloatingPoint(t,n){return(n||new Os).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFloatingPoint(t,n){return t.setPosition(t.position()+ye),(n||new Os).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):rn.HALF}static startFloatingPoint(t){t.startObject(1)}static addPrecision(t,n){t.addFieldInt16(0,n,rn.HALF)}static endFloatingPoint(t){return t.endObject()}static createFloatingPoint(t,n){return Os.startFloatingPoint(t),Os.addPrecision(t,n),Os.endFloatingPoint(t)}}class Rs{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInterval(t,n){return(n||new Rs).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInterval(t,n){return t.setPosition(t.position()+ye),(n||new Rs).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):tr.YEAR_MONTH}static startInterval(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,tr.YEAR_MONTH)}static endInterval(t){return t.endObject()}static createInterval(t,n){return Rs.startInterval(t),Rs.addUnit(t,n),Rs.endInterval(t)}}let Q6=class Ph{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsLargeBinary(t,n){return(n||new Ph).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsLargeBinary(t,n){return t.setPosition(t.position()+ye),(n||new Ph).__init(t.readInt32(t.position())+t.position(),t)}static startLargeBinary(t){t.startObject(0)}static endLargeBinary(t){return t.endObject()}static createLargeBinary(t){return Ph.startLargeBinary(t),Ph.endLargeBinary(t)}},K6=class zh{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsLargeUtf8(t,n){return(n||new zh).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsLargeUtf8(t,n){return t.setPosition(t.position()+ye),(n||new zh).__init(t.readInt32(t.position())+t.position(),t)}static startLargeUtf8(t){t.startObject(0)}static endLargeUtf8(t){return t.endObject()}static createLargeUtf8(t){return zh.startLargeUtf8(t),zh.endLargeUtf8(t)}},Z6=class jh{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsList(t,n){return(n||new jh).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsList(t,n){return t.setPosition(t.position()+ye),(n||new jh).__init(t.readInt32(t.position())+t.position(),t)}static startList(t){t.startObject(0)}static endList(t){return t.endObject()}static createList(t){return jh.startList(t),jh.endList(t)}},sg=class ju{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMap(t,n){return(n||new ju).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMap(t,n){return t.setPosition(t.position()+ye),(n||new ju).__init(t.readInt32(t.position())+t.position(),t)}keysSorted(){const t=this.bb.__offset(this.bb_pos,4);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startMap(t){t.startObject(1)}static addKeysSorted(t,n){t.addFieldInt8(0,+n,0)}static endMap(t){return t.endObject()}static createMap(t,n){return ju.startMap(t),ju.addKeysSorted(t,n),ju.endMap(t)}},J6=class Vh{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsNull(t,n){return(n||new Vh).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsNull(t,n){return t.setPosition(t.position()+ye),(n||new Vh).__init(t.readInt32(t.position())+t.position(),t)}static startNull(t){t.startObject(0)}static endNull(t){return t.endObject()}static createNull(t){return Vh.startNull(t),Vh.endNull(t)}};class bl{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsStruct_(t,n){return(n||new bl).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsStruct_(t,n){return t.setPosition(t.position()+ye),(n||new bl).__init(t.readInt32(t.position())+t.position(),t)}static startStruct_(t){t.startObject(0)}static endStruct_(t){return t.endObject()}static createStruct_(t){return bl.startStruct_(t),bl.endStruct_(t)}}class bi{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTime(t,n){return(n||new bi).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTime(t,n){return t.setPosition(t.position()+ye),(n||new bi).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):at.MILLISECOND}bitWidth(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):32}static startTime(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,at.MILLISECOND)}static addBitWidth(t,n){t.addFieldInt32(1,n,32)}static endTime(t){return t.endObject()}static createTime(t,n,r){return bi.startTime(t),bi.addUnit(t,n),bi.addBitWidth(t,r),bi.endTime(t)}}class wi{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTimestamp(t,n){return(n||new wi).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTimestamp(t,n){return t.setPosition(t.position()+ye),(n||new wi).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):at.SECOND}timezone(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startTimestamp(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,at.SECOND)}static addTimezone(t,n){t.addFieldOffset(1,n,0)}static endTimestamp(t){return t.endObject()}static createTimestamp(t,n,r){return wi.startTimestamp(t),wi.addUnit(t,n),wi.addTimezone(t,r),wi.endTimestamp(t)}}class Er{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUnion(t,n){return(n||new Er).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUnion(t,n){return t.setPosition(t.position()+ye),(n||new Er).__init(t.readInt32(t.position())+t.position(),t)}mode(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):pn.Sparse}typeIds(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readInt32(this.bb.__vector(this.bb_pos+n)+t*4):0}typeIdsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}typeIdsArray(){const t=this.bb.__offset(this.bb_pos,6);return t?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startUnion(t){t.startObject(2)}static addMode(t,n){t.addFieldInt16(0,n,pn.Sparse)}static addTypeIds(t,n){t.addFieldOffset(1,n,0)}static createTypeIdsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addInt32(n[r]);return t.endVector()}static startTypeIdsVector(t,n){t.startVector(4,n,4)}static endUnion(t){return t.endObject()}static createUnion(t,n,r){return Er.startUnion(t),Er.addMode(t,n),Er.addTypeIds(t,r),Er.endUnion(t)}}let tD=class Yh{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUtf8(t,n){return(n||new Yh).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUtf8(t,n){return t.setPosition(t.position()+ye),(n||new Yh).__init(t.readInt32(t.position())+t.position(),t)}static startUtf8(t){t.startObject(0)}static endUtf8(t){return t.endObject()}static createUtf8(t){return Yh.startUtf8(t),Yh.endUtf8(t)}};var Ne;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.FloatingPoint=3]="FloatingPoint",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct_=13]="Struct_",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.LargeBinary=19]="LargeBinary",e[e.LargeUtf8=20]="LargeUtf8",e[e.LargeList=21]="LargeList",e[e.RunEndEncoded=22]="RunEndEncoded"})(Ne||(Ne={}));let pi=class og{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsField(t,n){return(n||new og).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsField(t,n){return t.setPosition(t.position()+ye),(n||new og).__init(t.readInt32(t.position())+t.position(),t)}name(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}nullable(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}typeType(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):Ne.NONE}type(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.__union(t,this.bb_pos+n):null}dictionary(t){const n=this.bb.__offset(this.bb_pos,12);return n?(t||new $o).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}children(t,n){const r=this.bb.__offset(this.bb_pos,14);return r?(n||new og).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}childrenLength(){const t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,16);return r?(n||new vn).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}static startField(t){t.startObject(7)}static addName(t,n){t.addFieldOffset(0,n,0)}static addNullable(t,n){t.addFieldInt8(1,+n,0)}static addTypeType(t,n){t.addFieldInt8(2,n,Ne.NONE)}static addType(t,n){t.addFieldOffset(3,n,0)}static addDictionary(t,n){t.addFieldOffset(4,n,0)}static addChildren(t,n){t.addFieldOffset(5,n,0)}static createChildrenVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startChildrenVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(6,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endField(t){return t.endObject()}},Is=class go{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsSchema(t,n){return(n||new go).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSchema(t,n){return t.setPosition(t.position()+ye),(n||new go).__init(t.readInt32(t.position())+t.position(),t)}endianness(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):vd.Little}fields(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new pi).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}fieldsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new vn).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}features(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.readInt64(this.bb.__vector(this.bb_pos+n)+t*8):BigInt(0)}featuresLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}static startSchema(t){t.startObject(4)}static addEndianness(t,n){t.addFieldInt16(0,n,vd.Little)}static addFields(t,n){t.addFieldOffset(1,n,0)}static createFieldsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startFieldsVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(2,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static addFeatures(t,n){t.addFieldOffset(3,n,0)}static createFeaturesVector(t,n){t.startVector(8,n.length,8);for(let r=n.length-1;r>=0;r--)t.addInt64(n[r]);return t.endVector()}static startFeaturesVector(t,n){t.startVector(8,n,8)}static endSchema(t){return t.endObject()}static finishSchemaBuffer(t,n){t.finish(n)}static finishSizePrefixedSchemaBuffer(t,n){t.finish(n,void 0,!0)}static createSchema(t,n,r,i,s){return go.startSchema(t),go.addEndianness(t,n),go.addFields(t,r),go.addCustomMetadata(t,i),go.addFeatures(t,s),go.endSchema(t)}};var re;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(re||(re={}));var k;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.Float=3]="Float",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct=13]="Struct",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.LargeBinary=19]="LargeBinary",e[e.LargeUtf8=20]="LargeUtf8",e[e.Dictionary=-1]="Dictionary",e[e.Int8=-2]="Int8",e[e.Int16=-3]="Int16",e[e.Int32=-4]="Int32",e[e.Int64=-5]="Int64",e[e.Uint8=-6]="Uint8",e[e.Uint16=-7]="Uint16",e[e.Uint32=-8]="Uint32",e[e.Uint64=-9]="Uint64",e[e.Float16=-10]="Float16",e[e.Float32=-11]="Float32",e[e.Float64=-12]="Float64",e[e.DateDay=-13]="DateDay",e[e.DateMillisecond=-14]="DateMillisecond",e[e.TimestampSecond=-15]="TimestampSecond",e[e.TimestampMillisecond=-16]="TimestampMillisecond",e[e.TimestampMicrosecond=-17]="TimestampMicrosecond",e[e.TimestampNanosecond=-18]="TimestampNanosecond",e[e.TimeSecond=-19]="TimeSecond",e[e.TimeMillisecond=-20]="TimeMillisecond",e[e.TimeMicrosecond=-21]="TimeMicrosecond",e[e.TimeNanosecond=-22]="TimeNanosecond",e[e.DenseUnion=-23]="DenseUnion",e[e.SparseUnion=-24]="SparseUnion",e[e.IntervalDayTime=-25]="IntervalDayTime",e[e.IntervalYearMonth=-26]="IntervalYearMonth",e[e.DurationSecond=-27]="DurationSecond",e[e.DurationMillisecond=-28]="DurationMillisecond",e[e.DurationMicrosecond=-29]="DurationMicrosecond",e[e.DurationNanosecond=-30]="DurationNanosecond"})(k||(k={}));var xo;(function(e){e[e.OFFSET=0]="OFFSET",e[e.DATA=1]="DATA",e[e.VALIDITY=2]="VALIDITY",e[e.TYPE=3]="TYPE"})(xo||(xo={}));const ngt=void 0;function dy(e){if(e===null)return"null";if(e===ngt)return"undefined";switch(typeof e){case"number":return`${e}`;case"bigint":return`${e}`;case"string":return`"${e}"`}return typeof e[Symbol.toPrimitive]=="function"?e[Symbol.toPrimitive]("string"):ArrayBuffer.isView(e)?e instanceof BigInt64Array||e instanceof BigUint64Array?`[${[...e].map(t=>dy(t))}]`:`[${e}]`:ArrayBuffer.isView(e)?`[${e}]`:JSON.stringify(e,(t,n)=>typeof n=="bigint"?`${n}`:n)}function Ie(e){if(typeof e=="bigint"&&(e<Number.MIN_SAFE_INTEGER||e>Number.MAX_SAFE_INTEGER))throw new TypeError(`${e} is not safe to convert to a number.`);return Number(e)}function _9(e,t){return Ie(e/t)+Ie(e%t)/Ie(t)}const rgt=Symbol.for("isArrowBigNum");function hs(e,...t){return t.length===0?Object.setPrototypeOf(ve(this.TypedArray,e),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(e,...t),this.constructor.prototype)}hs.prototype[rgt]=!0;hs.prototype.toJSON=function(){return`"${py(this)}"`};hs.prototype.valueOf=function(e){return S9(this,e)};hs.prototype.toString=function(){return py(this)};hs.prototype[Symbol.toPrimitive]=function(e="default"){switch(e){case"number":return S9(this);case"string":return py(this);case"default":return ogt(this)}return py(this)};function Ff(...e){return hs.apply(this,e)}function Lf(...e){return hs.apply(this,e)}function hy(...e){return hs.apply(this,e)}Object.setPrototypeOf(Ff.prototype,Object.create(Int32Array.prototype));Object.setPrototypeOf(Lf.prototype,Object.create(Uint32Array.prototype));Object.setPrototypeOf(hy.prototype,Object.create(Uint32Array.prototype));Object.assign(Ff.prototype,hs.prototype,{constructor:Ff,signed:!0,TypedArray:Int32Array,BigIntArray:BigInt64Array});Object.assign(Lf.prototype,hs.prototype,{constructor:Lf,signed:!1,TypedArray:Uint32Array,BigIntArray:BigUint64Array});Object.assign(hy.prototype,hs.prototype,{constructor:hy,signed:!0,TypedArray:Uint32Array,BigIntArray:BigUint64Array});const igt=BigInt(4294967296)*BigInt(4294967296),sgt=igt-BigInt(1);function S9(e,t){const{buffer:n,byteOffset:r,byteLength:i,signed:s}=e,o=new BigUint64Array(n,r,i/8),a=s&&o.at(-1)&BigInt(1)<<BigInt(63);let c=BigInt(0),l=0;if(a){for(const u of o)c|=(u^sgt)*(BigInt(1)<<BigInt(64*l++));c*=BigInt(-1),c-=BigInt(1)}else for(const u of o)c|=u*(BigInt(1)<<BigInt(64*l++));if(typeof t=="number"){const u=BigInt(Math.pow(10,t)),f=c/u,d=c%u;return Ie(f)+Ie(d)/Ie(u)}return Ie(c)}function py(e){if(e.byteLength===8)return`${new e.BigIntArray(e.buffer,e.byteOffset,1)[0]}`;if(!e.signed)return T2(e);let t=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);if(new Int16Array([t.at(-1)])[0]>=0)return T2(e);t=t.slice();let r=1;for(let s=0;s<t.length;s++){const o=t[s],a=~o+r;t[s]=a,r&=o===0?1:0}return`-${T2(t)}`}function ogt(e){return e.byteLength===8?new e.BigIntArray(e.buffer,e.byteOffset,1)[0]:py(e)}function T2(e){let t="";const n=new Uint32Array(2);let r=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);const i=new Uint32Array((r=new Uint16Array(r).reverse()).buffer);let s=-1;const o=r.length-1;do{for(n[0]=r[s=0];s<o;)r[s++]=n[1]=n[0]/10,n[0]=(n[0]-n[1]*10<<16)+r[s];r[s]=n[1]=n[0]/10,n[0]=n[0]-n[1]*10,t=`${n[0]}${t}`}while(i[0]||i[1]||i[2]||i[3]);return t??"0"}class yA{static new(t,n){switch(n){case!0:return new Ff(t);case!1:return new Lf(t)}switch(t.constructor){case Int8Array:case Int16Array:case Int32Array:case BigInt64Array:return new Ff(t)}return t.byteLength===16?new hy(t):new Lf(t)}static signed(t){return new Ff(t)}static unsigned(t){return new Lf(t)}static decimal(t){return new hy(t)}constructor(t,n){return yA.new(t,n)}}var x9,I9,E9,T9,A9,M9,N9,$9,k9,D9,O9,R9,F9,L9,B9,C9,U9,P9,z9,j9,V9,Y9;class lt{static isNull(t){return(t==null?void 0:t.typeId)===k.Null}static isInt(t){return(t==null?void 0:t.typeId)===k.Int}static isFloat(t){return(t==null?void 0:t.typeId)===k.Float}static isBinary(t){return(t==null?void 0:t.typeId)===k.Binary}static isLargeBinary(t){return(t==null?void 0:t.typeId)===k.LargeBinary}static isUtf8(t){return(t==null?void 0:t.typeId)===k.Utf8}static isLargeUtf8(t){return(t==null?void 0:t.typeId)===k.LargeUtf8}static isBool(t){return(t==null?void 0:t.typeId)===k.Bool}static isDecimal(t){return(t==null?void 0:t.typeId)===k.Decimal}static isDate(t){return(t==null?void 0:t.typeId)===k.Date}static isTime(t){return(t==null?void 0:t.typeId)===k.Time}static isTimestamp(t){return(t==null?void 0:t.typeId)===k.Timestamp}static isInterval(t){return(t==null?void 0:t.typeId)===k.Interval}static isDuration(t){return(t==null?void 0:t.typeId)===k.Duration}static isList(t){return(t==null?void 0:t.typeId)===k.List}static isStruct(t){return(t==null?void 0:t.typeId)===k.Struct}static isUnion(t){return(t==null?void 0:t.typeId)===k.Union}static isFixedSizeBinary(t){return(t==null?void 0:t.typeId)===k.FixedSizeBinary}static isFixedSizeList(t){return(t==null?void 0:t.typeId)===k.FixedSizeList}static isMap(t){return(t==null?void 0:t.typeId)===k.Map}static isDictionary(t){return(t==null?void 0:t.typeId)===k.Dictionary}static isDenseUnion(t){return lt.isUnion(t)&&t.mode===pn.Dense}static isSparseUnion(t){return lt.isUnion(t)&&t.mode===pn.Sparse}constructor(t){this.typeId=t}}x9=Symbol.toStringTag;lt[x9]=(e=>(e.children=null,e.ArrayType=Array,e.OffsetArrayType=Int32Array,e[Symbol.toStringTag]="DataType"))(lt.prototype);class vc extends lt{constructor(){super(k.Null)}toString(){return"Null"}}I9=Symbol.toStringTag;vc[I9]=(e=>e[Symbol.toStringTag]="Null")(vc.prototype);class Kl extends lt{constructor(t,n){super(k.Int),this.isSigned=t,this.bitWidth=n}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?BigInt64Array:BigUint64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}E9=Symbol.toStringTag;Kl[E9]=(e=>(e.isSigned=null,e.bitWidth=null,e[Symbol.toStringTag]="Int"))(Kl.prototype);class yy extends Kl{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}Object.defineProperty(yy.prototype,"ArrayType",{value:Int32Array});class kv extends lt{constructor(t){super(k.Float),this.precision=t}get ArrayType(){switch(this.precision){case rn.HALF:return Uint16Array;case rn.SINGLE:return Float32Array;case rn.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}T9=Symbol.toStringTag;kv[T9]=(e=>(e.precision=null,e[Symbol.toStringTag]="Float"))(kv.prototype);class Dv extends lt{constructor(){super(k.Binary)}toString(){return"Binary"}}A9=Symbol.toStringTag;Dv[A9]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Binary"))(Dv.prototype);class Ov extends lt{constructor(){super(k.LargeBinary)}toString(){return"LargeBinary"}}M9=Symbol.toStringTag;Ov[M9]=(e=>(e.ArrayType=Uint8Array,e.OffsetArrayType=BigInt64Array,e[Symbol.toStringTag]="LargeBinary"))(Ov.prototype);class Rv extends lt{constructor(){super(k.Utf8)}toString(){return"Utf8"}}N9=Symbol.toStringTag;Rv[N9]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Utf8"))(Rv.prototype);class Fv extends lt{constructor(){super(k.LargeUtf8)}toString(){return"LargeUtf8"}}$9=Symbol.toStringTag;Fv[$9]=(e=>(e.ArrayType=Uint8Array,e.OffsetArrayType=BigInt64Array,e[Symbol.toStringTag]="LargeUtf8"))(Fv.prototype);class Lv extends lt{constructor(){super(k.Bool)}toString(){return"Bool"}}k9=Symbol.toStringTag;Lv[k9]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Bool"))(Lv.prototype);class Bv extends lt{constructor(t,n,r=128){super(k.Decimal),this.scale=t,this.precision=n,this.bitWidth=r}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}}D9=Symbol.toStringTag;Bv[D9]=(e=>(e.scale=null,e.precision=null,e.ArrayType=Uint32Array,e[Symbol.toStringTag]="Decimal"))(Bv.prototype);class Cv extends lt{constructor(t){super(k.Date),this.unit=t}toString(){return`Date${(this.unit+1)*32}<${nr[this.unit]}>`}get ArrayType(){return this.unit===nr.DAY?Int32Array:BigInt64Array}}O9=Symbol.toStringTag;Cv[O9]=(e=>(e.unit=null,e[Symbol.toStringTag]="Date"))(Cv.prototype);class Uv extends lt{constructor(t,n){super(k.Time),this.unit=t,this.bitWidth=n}toString(){return`Time${this.bitWidth}<${at[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return BigInt64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}R9=Symbol.toStringTag;Uv[R9]=(e=>(e.unit=null,e.bitWidth=null,e[Symbol.toStringTag]="Time"))(Uv.prototype);class Pv extends lt{constructor(t,n){super(k.Timestamp),this.unit=t,this.timezone=n}toString(){return`Timestamp<${at[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}F9=Symbol.toStringTag;Pv[F9]=(e=>(e.unit=null,e.timezone=null,e.ArrayType=BigInt64Array,e[Symbol.toStringTag]="Timestamp"))(Pv.prototype);class zv extends lt{constructor(t){super(k.Interval),this.unit=t}toString(){return`Interval<${tr[this.unit]}>`}}L9=Symbol.toStringTag;zv[L9]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Interval"))(zv.prototype);class jv extends lt{constructor(t){super(k.Duration),this.unit=t}toString(){return`Duration<${at[this.unit]}>`}}B9=Symbol.toStringTag;jv[B9]=(e=>(e.unit=null,e.ArrayType=BigInt64Array,e[Symbol.toStringTag]="Duration"))(jv.prototype);class Vv extends lt{constructor(t){super(k.List),this.children=[t]}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}}C9=Symbol.toStringTag;Vv[C9]=(e=>(e.children=null,e[Symbol.toStringTag]="List"))(Vv.prototype);class fr extends lt{constructor(t){super(k.Struct),this.children=t}toString(){return`Struct<{${this.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}U9=Symbol.toStringTag;fr[U9]=(e=>(e.children=null,e[Symbol.toStringTag]="Struct"))(fr.prototype);class Yv extends lt{constructor(t,n,r){super(k.Union),this.mode=t,this.children=r,this.typeIds=n=Int32Array.from(n),this.typeIdToChildIndex=n.reduce((i,s,o)=>(i[s]=o)&&i||i,Object.create(null))}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(t=>`${t.type}`).join(" | ")}>`}}P9=Symbol.toStringTag;Yv[P9]=(e=>(e.mode=null,e.typeIds=null,e.children=null,e.typeIdToChildIndex=null,e.ArrayType=Int8Array,e[Symbol.toStringTag]="Union"))(Yv.prototype);class qv extends lt{constructor(t){super(k.FixedSizeBinary),this.byteWidth=t}toString(){return`FixedSizeBinary[${this.byteWidth}]`}}z9=Symbol.toStringTag;qv[z9]=(e=>(e.byteWidth=null,e.ArrayType=Uint8Array,e[Symbol.toStringTag]="FixedSizeBinary"))(qv.prototype);class Wv extends lt{constructor(t,n){super(k.FixedSizeList),this.listSize=t,this.children=[n]}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}}j9=Symbol.toStringTag;Wv[j9]=(e=>(e.children=null,e.listSize=null,e[Symbol.toStringTag]="FixedSizeList"))(Wv.prototype);class Gv extends lt{constructor(t,n=!1){var r,i,s;if(super(k.Map),this.children=[t],this.keysSorted=n,t&&(t.name="entries",!((r=t==null?void 0:t.type)===null||r===void 0)&&r.children)){const o=(i=t==null?void 0:t.type)===null||i===void 0?void 0:i.children[0];o&&(o.name="key");const a=(s=t==null?void 0:t.type)===null||s===void 0?void 0:s.children[1];a&&(a.name="value")}}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}V9=Symbol.toStringTag;Gv[V9]=(e=>(e.children=null,e.keysSorted=null,e[Symbol.toStringTag]="Map_"))(Gv.prototype);const agt=(e=>()=>++e)(-1);class bd extends lt{constructor(t,n,r,i){super(k.Dictionary),this.indices=n,this.dictionary=t,this.isOrdered=i||!1,this.id=r==null?agt():Ie(r)}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}Y9=Symbol.toStringTag;bd[Y9]=(e=>(e.id=null,e.indices=null,e.isOrdered=null,e.dictionary=null,e[Symbol.toStringTag]="Dictionary"))(bd.prototype);function Io(e){const t=e;switch(e.typeId){case k.Decimal:return e.bitWidth/32;case k.Interval:return 1+t.unit;case k.FixedSizeList:return t.listSize;case k.FixedSizeBinary:return t.byteWidth;default:return 1}}class Ut{visitMany(t,...n){return t.map((r,i)=>this.visit(r,...n.map(s=>s[i])))}visit(...t){return this.getVisitFn(t[0],!1).apply(this,t)}getVisitFn(t,n=!0){return cgt(this,t,n)}getVisitFnByTypeId(t,n=!0){return Vu(this,t,n)}visitNull(t,...n){return null}visitBool(t,...n){return null}visitInt(t,...n){return null}visitFloat(t,...n){return null}visitUtf8(t,...n){return null}visitLargeUtf8(t,...n){return null}visitBinary(t,...n){return null}visitLargeBinary(t,...n){return null}visitFixedSizeBinary(t,...n){return null}visitDate(t,...n){return null}visitTimestamp(t,...n){return null}visitTime(t,...n){return null}visitDecimal(t,...n){return null}visitList(t,...n){return null}visitStruct(t,...n){return null}visitUnion(t,...n){return null}visitDictionary(t,...n){return null}visitInterval(t,...n){return null}visitDuration(t,...n){return null}visitFixedSizeList(t,...n){return null}visitMap(t,...n){return null}}function cgt(e,t,n=!0){return typeof t=="number"?Vu(e,t,n):typeof t=="string"&&t in k?Vu(e,k[t],n):t&&t instanceof lt?Vu(e,eD(t),n):t!=null&&t.type&&t.type instanceof lt?Vu(e,eD(t.type),n):Vu(e,k.NONE,n)}function Vu(e,t,n=!0){let r=null;switch(t){case k.Null:r=e.visitNull;break;case k.Bool:r=e.visitBool;break;case k.Int:r=e.visitInt;break;case k.Int8:r=e.visitInt8||e.visitInt;break;case k.Int16:r=e.visitInt16||e.visitInt;break;case k.Int32:r=e.visitInt32||e.visitInt;break;case k.Int64:r=e.visitInt64||e.visitInt;break;case k.Uint8:r=e.visitUint8||e.visitInt;break;case k.Uint16:r=e.visitUint16||e.visitInt;break;case k.Uint32:r=e.visitUint32||e.visitInt;break;case k.Uint64:r=e.visitUint64||e.visitInt;break;case k.Float:r=e.visitFloat;break;case k.Float16:r=e.visitFloat16||e.visitFloat;break;case k.Float32:r=e.visitFloat32||e.visitFloat;break;case k.Float64:r=e.visitFloat64||e.visitFloat;break;case k.Utf8:r=e.visitUtf8;break;case k.LargeUtf8:r=e.visitLargeUtf8;break;case k.Binary:r=e.visitBinary;break;case k.LargeBinary:r=e.visitLargeBinary;break;case k.FixedSizeBinary:r=e.visitFixedSizeBinary;break;case k.Date:r=e.visitDate;break;case k.DateDay:r=e.visitDateDay||e.visitDate;break;case k.DateMillisecond:r=e.visitDateMillisecond||e.visitDate;break;case k.Timestamp:r=e.visitTimestamp;break;case k.TimestampSecond:r=e.visitTimestampSecond||e.visitTimestamp;break;case k.TimestampMillisecond:r=e.visitTimestampMillisecond||e.visitTimestamp;break;case k.TimestampMicrosecond:r=e.visitTimestampMicrosecond||e.visitTimestamp;break;case k.TimestampNanosecond:r=e.visitTimestampNanosecond||e.visitTimestamp;break;case k.Time:r=e.visitTime;break;case k.TimeSecond:r=e.visitTimeSecond||e.visitTime;break;case k.TimeMillisecond:r=e.visitTimeMillisecond||e.visitTime;break;case k.TimeMicrosecond:r=e.visitTimeMicrosecond||e.visitTime;break;case k.TimeNanosecond:r=e.visitTimeNanosecond||e.visitTime;break;case k.Decimal:r=e.visitDecimal;break;case k.List:r=e.visitList;break;case k.Struct:r=e.visitStruct;break;case k.Union:r=e.visitUnion;break;case k.DenseUnion:r=e.visitDenseUnion||e.visitUnion;break;case k.SparseUnion:r=e.visitSparseUnion||e.visitUnion;break;case k.Dictionary:r=e.visitDictionary;break;case k.Interval:r=e.visitInterval;break;case k.IntervalDayTime:r=e.visitIntervalDayTime||e.visitInterval;break;case k.IntervalYearMonth:r=e.visitIntervalYearMonth||e.visitInterval;break;case k.Duration:r=e.visitDuration;break;case k.DurationSecond:r=e.visitDurationSecond||e.visitDuration;break;case k.DurationMillisecond:r=e.visitDurationMillisecond||e.visitDuration;break;case k.DurationMicrosecond:r=e.visitDurationMicrosecond||e.visitDuration;break;case k.DurationNanosecond:r=e.visitDurationNanosecond||e.visitDuration;break;case k.FixedSizeList:r=e.visitFixedSizeList;break;case k.Map:r=e.visitMap;break}if(typeof r=="function")return r;if(!n)return()=>null;throw new Error(`Unrecognized type '${k[t]}'`)}function eD(e){switch(e.typeId){case k.Null:return k.Null;case k.Int:{const{bitWidth:t,isSigned:n}=e;switch(t){case 8:return n?k.Int8:k.Uint8;case 16:return n?k.Int16:k.Uint16;case 32:return n?k.Int32:k.Uint32;case 64:return n?k.Int64:k.Uint64}return k.Int}case k.Float:switch(e.precision){case rn.HALF:return k.Float16;case rn.SINGLE:return k.Float32;case rn.DOUBLE:return k.Float64}return k.Float;case k.Binary:return k.Binary;case k.LargeBinary:return k.LargeBinary;case k.Utf8:return k.Utf8;case k.LargeUtf8:return k.LargeUtf8;case k.Bool:return k.Bool;case k.Decimal:return k.Decimal;case k.Time:switch(e.unit){case at.SECOND:return k.TimeSecond;case at.MILLISECOND:return k.TimeMillisecond;case at.MICROSECOND:return k.TimeMicrosecond;case at.NANOSECOND:return k.TimeNanosecond}return k.Time;case k.Timestamp:switch(e.unit){case at.SECOND:return k.TimestampSecond;case at.MILLISECOND:return k.TimestampMillisecond;case at.MICROSECOND:return k.TimestampMicrosecond;case at.NANOSECOND:return k.TimestampNanosecond}return k.Timestamp;case k.Date:switch(e.unit){case nr.DAY:return k.DateDay;case nr.MILLISECOND:return k.DateMillisecond}return k.Date;case k.Interval:switch(e.unit){case tr.DAY_TIME:return k.IntervalDayTime;case tr.YEAR_MONTH:return k.IntervalYearMonth}return k.Interval;case k.Duration:switch(e.unit){case at.SECOND:return k.DurationSecond;case at.MILLISECOND:return k.DurationMillisecond;case at.MICROSECOND:return k.DurationMicrosecond;case at.NANOSECOND:return k.DurationNanosecond}return k.Duration;case k.Map:return k.Map;case k.List:return k.List;case k.Struct:return k.Struct;case k.Union:switch(e.mode){case pn.Dense:return k.DenseUnion;case pn.Sparse:return k.SparseUnion}return k.Union;case k.FixedSizeBinary:return k.FixedSizeBinary;case k.FixedSizeList:return k.FixedSizeList;case k.Dictionary:return k.Dictionary}throw new Error(`Unrecognized type '${k[e.typeId]}'`)}Ut.prototype.visitInt8=null;Ut.prototype.visitInt16=null;Ut.prototype.visitInt32=null;Ut.prototype.visitInt64=null;Ut.prototype.visitUint8=null;Ut.prototype.visitUint16=null;Ut.prototype.visitUint32=null;Ut.prototype.visitUint64=null;Ut.prototype.visitFloat16=null;Ut.prototype.visitFloat32=null;Ut.prototype.visitFloat64=null;Ut.prototype.visitDateDay=null;Ut.prototype.visitDateMillisecond=null;Ut.prototype.visitTimestampSecond=null;Ut.prototype.visitTimestampMillisecond=null;Ut.prototype.visitTimestampMicrosecond=null;Ut.prototype.visitTimestampNanosecond=null;Ut.prototype.visitTimeSecond=null;Ut.prototype.visitTimeMillisecond=null;Ut.prototype.visitTimeMicrosecond=null;Ut.prototype.visitTimeNanosecond=null;Ut.prototype.visitDenseUnion=null;Ut.prototype.visitSparseUnion=null;Ut.prototype.visitIntervalDayTime=null;Ut.prototype.visitIntervalYearMonth=null;Ut.prototype.visitDuration=null;Ut.prototype.visitDurationSecond=null;Ut.prototype.visitDurationMillisecond=null;Ut.prototype.visitDurationMicrosecond=null;Ut.prototype.visitDurationNanosecond=null;const q9=new Float64Array(1),xu=new Uint32Array(q9.buffer);function W9(e){const t=(e&31744)>>10,n=(e&1023)/1024,r=Math.pow(-1,(e&32768)>>15);switch(t){case 31:return r*(n?Number.NaN:1/0);case 0:return r*(n?6103515625e-14*n:0)}return r*Math.pow(2,t-15)*(1+n)}function lgt(e){if(e!==e)return 32256;q9[0]=e;const t=(xu[1]&2147483648)>>16&65535;let n=xu[1]&2146435072,r=0;return n>=1089470464?xu[0]>0?n=31744:(n=(n&2080374784)>>16,r=(xu[1]&1048575)>>10):n<=1056964608?(r=1048576+(xu[1]&1048575),r=1048576+(r<<(n>>20)-998)>>21,n=0):(n=n-1056964608>>10,r=(xu[1]&1048575)+512>>10),t|n|r&65535}class bt extends Ut{}function xt(e){return(t,n,r)=>{if(t.setValid(n,r!=null))return e(t,n,r)}}const ugt=(e,t,n)=>{e[t]=Math.floor(n/864e5)},G9=(e,t,n,r)=>{if(n+1<t.length){const i=Ie(t[n]),s=Ie(t[n+1]);e.set(r.subarray(0,s-i),i)}},fgt=({offset:e,values:t},n,r)=>{const i=e+n;r?t[i>>3]|=1<<i%8:t[i>>3]&=~(1<<i%8)},ua=({values:e},t,n)=>{e[t]=n},mA=({values:e},t,n)=>{e[t]=n},H9=({values:e},t,n)=>{e[t]=lgt(n)},dgt=(e,t,n)=>{switch(e.type.precision){case rn.HALF:return H9(e,t,n);case rn.SINGLE:case rn.DOUBLE:return mA(e,t,n)}},X9=({values:e},t,n)=>{ugt(e,t,n.valueOf())},Q9=({values:e},t,n)=>{e[t]=BigInt(n)},hgt=({stride:e,values:t},n,r)=>{t.set(r.subarray(0,e),e*n)},K9=({values:e,valueOffsets:t},n,r)=>G9(e,t,n,r),Z9=({values:e,valueOffsets:t},n,r)=>G9(e,t,n,dA(r)),pgt=(e,t,n)=>{e.type.unit===nr.DAY?X9(e,t,n):Q9(e,t,n)},J9=({values:e},t,n)=>{e[t]=BigInt(n/1e3)},tz=({values:e},t,n)=>{e[t]=BigInt(n)},ez=({values:e},t,n)=>{e[t]=BigInt(n*1e3)},nz=({values:e},t,n)=>{e[t]=BigInt(n*1e6)},ygt=(e,t,n)=>{switch(e.type.unit){case at.SECOND:return J9(e,t,n);case at.MILLISECOND:return tz(e,t,n);case at.MICROSECOND:return ez(e,t,n);case at.NANOSECOND:return nz(e,t,n)}},rz=({values:e},t,n)=>{e[t]=n},iz=({values:e},t,n)=>{e[t]=n},sz=({values:e},t,n)=>{e[t]=n},oz=({values:e},t,n)=>{e[t]=n},mgt=(e,t,n)=>{switch(e.type.unit){case at.SECOND:return rz(e,t,n);case at.MILLISECOND:return iz(e,t,n);case at.MICROSECOND:return sz(e,t,n);case at.NANOSECOND:return oz(e,t,n)}},ggt=({values:e,stride:t},n,r)=>{e.set(r.subarray(0,t),t*n)},vgt=(e,t,n)=>{const r=e.children[0],i=e.valueOffsets,s=Li.getVisitFn(r);if(Array.isArray(n))for(let o=-1,a=i[t],c=i[t+1];a<c;)s(r,a++,n[++o]);else for(let o=-1,a=i[t],c=i[t+1];a<c;)s(r,a++,n.get(++o))},bgt=(e,t,n)=>{const r=e.children[0],{valueOffsets:i}=e,s=Li.getVisitFn(r);let{[t]:o,[t+1]:a}=i;const c=n instanceof Map?n.entries():Object.entries(n);for(const l of c)if(s(r,o,l),++o>=a)break},wgt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[s]),_gt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(s)),Sgt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(i.name)),xgt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[i.name]),Igt=(e,t,n)=>{const r=e.type.children.map(s=>Li.getVisitFn(s.type)),i=n instanceof Map?Sgt(t,n):n instanceof he?_gt(t,n):Array.isArray(n)?wgt(t,n):xgt(t,n);e.type.children.forEach((s,o)=>i(r[o],e.children[o],s,o))},Egt=(e,t,n)=>{e.type.mode===pn.Dense?az(e,t,n):cz(e,t,n)},az=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];Li.visit(i,e.valueOffsets[t],n)},cz=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];Li.visit(i,t,n)},Tgt=(e,t,n)=>{var r;(r=e.dictionary)===null||r===void 0||r.set(e.values[t],n)},Agt=(e,t,n)=>{e.type.unit===tr.DAY_TIME?lz(e,t,n):uz(e,t,n)},lz=({values:e},t,n)=>{e.set(n.subarray(0,2),2*t)},uz=({values:e},t,n)=>{e[t]=n[0]*12+n[1]%12},fz=({values:e},t,n)=>{e[t]=n},dz=({values:e},t,n)=>{e[t]=n},hz=({values:e},t,n)=>{e[t]=n},pz=({values:e},t,n)=>{e[t]=n},Mgt=(e,t,n)=>{switch(e.type.unit){case at.SECOND:return fz(e,t,n);case at.MILLISECOND:return dz(e,t,n);case at.MICROSECOND:return hz(e,t,n);case at.NANOSECOND:return pz(e,t,n)}},Ngt=(e,t,n)=>{const{stride:r}=e,i=e.children[0],s=Li.getVisitFn(i);if(Array.isArray(n))for(let o=-1,a=t*r;++o<r;)s(i,a+o,n[o]);else for(let o=-1,a=t*r;++o<r;)s(i,a+o,n.get(o))};bt.prototype.visitBool=xt(fgt);bt.prototype.visitInt=xt(ua);bt.prototype.visitInt8=xt(ua);bt.prototype.visitInt16=xt(ua);bt.prototype.visitInt32=xt(ua);bt.prototype.visitInt64=xt(ua);bt.prototype.visitUint8=xt(ua);bt.prototype.visitUint16=xt(ua);bt.prototype.visitUint32=xt(ua);bt.prototype.visitUint64=xt(ua);bt.prototype.visitFloat=xt(dgt);bt.prototype.visitFloat16=xt(H9);bt.prototype.visitFloat32=xt(mA);bt.prototype.visitFloat64=xt(mA);bt.prototype.visitUtf8=xt(Z9);bt.prototype.visitLargeUtf8=xt(Z9);bt.prototype.visitBinary=xt(K9);bt.prototype.visitLargeBinary=xt(K9);bt.prototype.visitFixedSizeBinary=xt(hgt);bt.prototype.visitDate=xt(pgt);bt.prototype.visitDateDay=xt(X9);bt.prototype.visitDateMillisecond=xt(Q9);bt.prototype.visitTimestamp=xt(ygt);bt.prototype.visitTimestampSecond=xt(J9);bt.prototype.visitTimestampMillisecond=xt(tz);bt.prototype.visitTimestampMicrosecond=xt(ez);bt.prototype.visitTimestampNanosecond=xt(nz);bt.prototype.visitTime=xt(mgt);bt.prototype.visitTimeSecond=xt(rz);bt.prototype.visitTimeMillisecond=xt(iz);bt.prototype.visitTimeMicrosecond=xt(sz);bt.prototype.visitTimeNanosecond=xt(oz);bt.prototype.visitDecimal=xt(ggt);bt.prototype.visitList=xt(vgt);bt.prototype.visitStruct=xt(Igt);bt.prototype.visitUnion=xt(Egt);bt.prototype.visitDenseUnion=xt(az);bt.prototype.visitSparseUnion=xt(cz);bt.prototype.visitDictionary=xt(Tgt);bt.prototype.visitInterval=xt(Agt);bt.prototype.visitIntervalDayTime=xt(lz);bt.prototype.visitIntervalYearMonth=xt(uz);bt.prototype.visitDuration=xt(Mgt);bt.prototype.visitDurationSecond=xt(fz);bt.prototype.visitDurationMillisecond=xt(dz);bt.prototype.visitDurationMicrosecond=xt(hz);bt.prototype.visitDurationNanosecond=xt(pz);bt.prototype.visitFixedSizeList=xt(Ngt);bt.prototype.visitMap=xt(bgt);const Li=new bt,Wi=Symbol.for("parent"),Bf=Symbol.for("rowIndex");class gA{constructor(t,n){return this[Wi]=t,this[Bf]=n,new Proxy(this,new kgt)}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[Bf],n=this[Wi],r=n.type.children,i={};for(let s=-1,o=r.length;++s<o;)i[r[s].name]=Ur.visit(n.children[s],t);return i}toString(){return`{${[...this].map(([t,n])=>`${dy(t)}: ${dy(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new $gt(this[Wi],this[Bf])}}class $gt{constructor(t,n){this.childIndex=0,this.children=t.children,this.rowIndex=n,this.childFields=t.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const t=this.childIndex;return t<this.numChildren?(this.childIndex=t+1,{done:!1,value:[this.childFields[t].name,Ur.visit(this.children[t],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties(gA.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[Wi]:{writable:!0,enumerable:!1,configurable:!1,value:null},[Bf]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class kgt{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[Wi].type.children.map(n=>n.name)}has(t,n){return t[Wi].type.children.findIndex(r=>r.name===n)!==-1}getOwnPropertyDescriptor(t,n){if(t[Wi].type.children.findIndex(r=>r.name===n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[Wi].type.children.findIndex(i=>i.name===n);if(r!==-1){const i=Ur.visit(t[Wi].children[r],t[Bf]);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[Wi].type.children.findIndex(s=>s.name===n);return i!==-1?(Li.visit(t[Wi].children[i],t[Bf],r),Reflect.set(t,n,r)):Reflect.has(t,n)||typeof n=="symbol"?Reflect.set(t,n,r):!1}}class ht extends Ut{}function wt(e){return(t,n)=>t.getValid(n)?e(t,n):null}const Dgt=(e,t)=>864e5*e[t],Ogt=(e,t)=>null,yz=(e,t,n)=>{if(n+1>=t.length)return null;const r=Ie(t[n]),i=Ie(t[n+1]);return e.subarray(r,i)},Rgt=({offset:e,values:t},n)=>{const r=e+n;return(t[r>>3]&1<<r%8)!==0},mz=({values:e},t)=>Dgt(e,t),gz=({values:e},t)=>Ie(e[t]),Bc=({stride:e,values:t},n)=>t[e*n],Fgt=({stride:e,values:t},n)=>W9(t[e*n]),vz=({values:e},t)=>e[t],Lgt=({stride:e,values:t},n)=>t.subarray(e*n,e*(n+1)),bz=({values:e,valueOffsets:t},n)=>yz(e,t,n),wz=({values:e,valueOffsets:t},n)=>{const r=yz(e,t,n);return r!==null?vI(r):null},Bgt=({values:e},t)=>e[t],Cgt=({type:e,values:t},n)=>e.precision!==rn.HALF?t[n]:W9(t[n]),Ugt=(e,t)=>e.type.unit===nr.DAY?mz(e,t):gz(e,t),_z=({values:e},t)=>1e3*Ie(e[t]),Sz=({values:e},t)=>Ie(e[t]),xz=({values:e},t)=>_9(e[t],BigInt(1e3)),Iz=({values:e},t)=>_9(e[t],BigInt(1e6)),Pgt=(e,t)=>{switch(e.type.unit){case at.SECOND:return _z(e,t);case at.MILLISECOND:return Sz(e,t);case at.MICROSECOND:return xz(e,t);case at.NANOSECOND:return Iz(e,t)}},Ez=({values:e},t)=>e[t],Tz=({values:e},t)=>e[t],Az=({values:e},t)=>e[t],Mz=({values:e},t)=>e[t],zgt=(e,t)=>{switch(e.type.unit){case at.SECOND:return Ez(e,t);case at.MILLISECOND:return Tz(e,t);case at.MICROSECOND:return Az(e,t);case at.NANOSECOND:return Mz(e,t)}},jgt=({values:e,stride:t},n)=>yA.decimal(e.subarray(t*n,t*(n+1))),Vgt=(e,t)=>{const{valueOffsets:n,stride:r,children:i}=e,{[t*r]:s,[t*r+1]:o}=n,c=i[0].slice(s,o-s);return new he([c])},Ygt=(e,t)=>{const{valueOffsets:n,children:r}=e,{[t]:i,[t+1]:s}=n,o=r[0];return new vA(o.slice(i,s-i))},qgt=(e,t)=>new gA(e,t),Wgt=(e,t)=>e.type.mode===pn.Dense?Nz(e,t):$z(e,t),Nz=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return Ur.visit(r,e.valueOffsets[t])},$z=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return Ur.visit(r,t)},Ggt=(e,t)=>{var n;return(n=e.dictionary)===null||n===void 0?void 0:n.get(e.values[t])},Hgt=(e,t)=>e.type.unit===tr.DAY_TIME?kz(e,t):Dz(e,t),kz=({values:e},t)=>e.subarray(2*t,2*(t+1)),Dz=({values:e},t)=>{const n=e[t],r=new Int32Array(2);return r[0]=Math.trunc(n/12),r[1]=Math.trunc(n%12),r},Oz=({values:e},t)=>e[t],Rz=({values:e},t)=>e[t],Fz=({values:e},t)=>e[t],Lz=({values:e},t)=>e[t],Xgt=(e,t)=>{switch(e.type.unit){case at.SECOND:return Oz(e,t);case at.MILLISECOND:return Rz(e,t);case at.MICROSECOND:return Fz(e,t);case at.NANOSECOND:return Lz(e,t)}},Qgt=(e,t)=>{const{stride:n,children:r}=e,s=r[0].slice(t*n,n);return new he([s])};ht.prototype.visitNull=wt(Ogt);ht.prototype.visitBool=wt(Rgt);ht.prototype.visitInt=wt(Bgt);ht.prototype.visitInt8=wt(Bc);ht.prototype.visitInt16=wt(Bc);ht.prototype.visitInt32=wt(Bc);ht.prototype.visitInt64=wt(vz);ht.prototype.visitUint8=wt(Bc);ht.prototype.visitUint16=wt(Bc);ht.prototype.visitUint32=wt(Bc);ht.prototype.visitUint64=wt(vz);ht.prototype.visitFloat=wt(Cgt);ht.prototype.visitFloat16=wt(Fgt);ht.prototype.visitFloat32=wt(Bc);ht.prototype.visitFloat64=wt(Bc);ht.prototype.visitUtf8=wt(wz);ht.prototype.visitLargeUtf8=wt(wz);ht.prototype.visitBinary=wt(bz);ht.prototype.visitLargeBinary=wt(bz);ht.prototype.visitFixedSizeBinary=wt(Lgt);ht.prototype.visitDate=wt(Ugt);ht.prototype.visitDateDay=wt(mz);ht.prototype.visitDateMillisecond=wt(gz);ht.prototype.visitTimestamp=wt(Pgt);ht.prototype.visitTimestampSecond=wt(_z);ht.prototype.visitTimestampMillisecond=wt(Sz);ht.prototype.visitTimestampMicrosecond=wt(xz);ht.prototype.visitTimestampNanosecond=wt(Iz);ht.prototype.visitTime=wt(zgt);ht.prototype.visitTimeSecond=wt(Ez);ht.prototype.visitTimeMillisecond=wt(Tz);ht.prototype.visitTimeMicrosecond=wt(Az);ht.prototype.visitTimeNanosecond=wt(Mz);ht.prototype.visitDecimal=wt(jgt);ht.prototype.visitList=wt(Vgt);ht.prototype.visitStruct=wt(qgt);ht.prototype.visitUnion=wt(Wgt);ht.prototype.visitDenseUnion=wt(Nz);ht.prototype.visitSparseUnion=wt($z);ht.prototype.visitDictionary=wt(Ggt);ht.prototype.visitInterval=wt(Hgt);ht.prototype.visitIntervalDayTime=wt(kz);ht.prototype.visitIntervalYearMonth=wt(Dz);ht.prototype.visitDuration=wt(Xgt);ht.prototype.visitDurationSecond=wt(Oz);ht.prototype.visitDurationMillisecond=wt(Rz);ht.prototype.visitDurationMicrosecond=wt(Fz);ht.prototype.visitDurationNanosecond=wt(Lz);ht.prototype.visitFixedSizeList=wt(Qgt);ht.prototype.visitMap=wt(Ygt);const Ur=new ht,Yu=Symbol.for("keys"),Cf=Symbol.for("vals"),qu=Symbol.for("kKeysAsStrings"),II=Symbol.for("_kKeysAsStrings");class vA{constructor(t){return this[Yu]=new he([t.children[0]]).memoize(),this[Cf]=t.children[1],new Proxy(this,new Zgt)}get[qu](){return this[II]||(this[II]=Array.from(this[Yu].toArray(),String))}[Symbol.iterator](){return new Kgt(this[Yu],this[Cf])}get size(){return this[Yu].length}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[Yu],n=this[Cf],r={};for(let i=-1,s=t.length;++i<s;)r[t.get(i)]=Ur.visit(n,i);return r}toString(){return`{${[...this].map(([t,n])=>`${dy(t)}: ${dy(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}class Kgt{constructor(t,n){this.keys=t,this.vals=n,this.keyIndex=0,this.numKeys=t.length}[Symbol.iterator](){return this}next(){const t=this.keyIndex;return t===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(t),Ur.visit(this.vals,t)]})}}class Zgt{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[qu]}has(t,n){return t[qu].includes(n)}getOwnPropertyDescriptor(t,n){if(t[qu].indexOf(n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[qu].indexOf(n);if(r!==-1){const i=Ur.visit(Reflect.get(t,Cf),r);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[qu].indexOf(n);return i!==-1?(Li.visit(Reflect.get(t,Cf),i,r),Reflect.set(t,n,r)):Reflect.has(t,n)?Reflect.set(t,n,r):!1}}Object.defineProperties(vA.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[Yu]:{writable:!0,enumerable:!1,configurable:!1,value:null},[Cf]:{writable:!0,enumerable:!1,configurable:!1,value:null},[II]:{writable:!0,enumerable:!1,configurable:!1,value:null}});let nD;function Bz(e,t,n,r){const{length:i=0}=e;let s=typeof t!="number"?0:t,o=typeof n!="number"?i:n;return s<0&&(s=(s%i+i)%i),o<0&&(o=(o%i+i)%i),o<s&&(nD=s,s=o,o=nD),o>i&&(o=i),r?r(e,s,o):[s,o]}const bA=(e,t)=>e<0?t+e:e,rD=e=>e!==e;function qd(e){if(typeof e!=="object"||e===null)return rD(e)?rD:n=>n===e;if(e instanceof Date){const n=e.valueOf();return r=>r instanceof Date?r.valueOf()===n:!1}return ArrayBuffer.isView(e)?n=>n?Q0t(e,n):!1:e instanceof Map?t1t(e):Array.isArray(e)?Jgt(e):e instanceof he?e1t(e):n1t(e,!0)}function Jgt(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=qd(e[n]);return Fw(t)}function t1t(e){let t=-1;const n=[];for(const r of e.values())n[++t]=qd(r);return Fw(n)}function e1t(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=qd(e.get(n));return Fw(t)}function n1t(e,t=!1){const n=Object.keys(e);if(!t&&n.length===0)return()=>!1;const r=[];for(let i=-1,s=n.length;++i<s;)r[i]=qd(e[n[i]]);return Fw(r,n)}function Fw(e,t){return n=>{if(!n||typeof n!="object")return!1;switch(n.constructor){case Array:return r1t(e,n);case Map:return iD(e,n,n.keys());case vA:case gA:case Object:case void 0:return iD(e,n,t||Object.keys(n))}return n instanceof he?i1t(e,n):!1}}function r1t(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t[r]))return!1;return!0}function i1t(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t.get(r)))return!1;return!0}function iD(e,t,n){const r=n[Symbol.iterator](),i=t instanceof Map?t.keys():Object.keys(t)[Symbol.iterator](),s=t instanceof Map?t.values():Object.values(t)[Symbol.iterator]();let o=0;const a=e.length;let c=s.next(),l=r.next(),u=i.next();for(;o<a&&!l.done&&!u.done&&!c.done&&!(l.value!==u.value||!e[o](c.value));++o,l=r.next(),u=i.next(),c=s.next());return o===a&&l.done&&u.done&&c.done?!0:(r.return&&r.return(),i.return&&i.return(),s.return&&s.return(),!1)}function Cz(e,t,n,r){return(n&1<<r)!==0}function s1t(e,t,n,r){return(n&1<<r)>>r}function Hv(e,t,n){const r=n.byteLength+7&-8;if(e>0||n.byteLength<r){const i=new Uint8Array(r);return i.set(e%8===0?n.subarray(e>>3):Xv(new wA(n,e,t,null,Cz)).subarray(0,r)),i}return n}function Xv(e){const t=[];let n=0,r=0,i=0;for(const o of e)o&&(i|=1<<r),++r===8&&(t[n++]=i,i=r=0);(n===0||r>0)&&(t[n++]=i);const s=new Uint8Array(t.length+7&-8);return s.set(t),s}class wA{constructor(t,n,r,i,s){this.bytes=t,this.length=r,this.context=i,this.get=s,this.bit=n%8,this.byteIndex=n>>3,this.byte=t[this.byteIndex++],this.index=0}next(){return this.index<this.length?(this.bit===8&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}function EI(e,t,n){if(n-t<=0)return 0;if(n-t<8){let s=0;for(const o of new wA(e,t,n-t,e,s1t))s+=o;return s}const r=n>>3<<3,i=t+(t%8===0?0:8-t%8);return EI(e,t,i)+EI(e,r,n)+o1t(e,i>>3,r-i>>3)}function o1t(e,t,n){let r=0,i=Math.trunc(t);const s=new DataView(e.buffer,e.byteOffset,e.byteLength),o=n===void 0?e.byteLength:i+n;for(;o-i>=4;)r+=A2(s.getUint32(i)),i+=4;for(;o-i>=2;)r+=A2(s.getUint16(i)),i+=2;for(;o-i>=1;)r+=A2(s.getUint8(i)),i+=1;return r}function A2(e){let t=Math.trunc(e);return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),(t+(t>>>4)&252645135)*16843009>>>24}const a1t=-1;class me{get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get nullable(){if(this._nullCount!==0){const{type:t}=this;return lt.isSparseUnion(t)?this.children.some(n=>n.nullable):lt.isDenseUnion(t)?this.children.some(n=>n.nullable):this.nullBitmap&&this.nullBitmap.byteLength>0}return!0}get byteLength(){let t=0;const{valueOffsets:n,values:r,nullBitmap:i,typeIds:s}=this;return n&&(t+=n.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),s&&(t+=s.byteLength),this.children.reduce((o,a)=>o+a.byteLength,t)}get nullCount(){if(lt.isUnion(this.type))return this.children.reduce((r,i)=>r+i.nullCount,0);let t=this._nullCount,n;return t<=a1t&&(n=this.nullBitmap)&&(this._nullCount=t=n.length===0?0:this.length-EI(n,this.offset,this.offset+this.length)),t}constructor(t,n,r,i,s,o=[],a){this.type=t,this.children=o,this.dictionary=a,this.offset=Math.floor(Math.max(n||0,0)),this.length=Math.floor(Math.max(r||0,0)),this._nullCount=Math.floor(Math.max(i||0,-1));let c;s instanceof me?(this.stride=s.stride,this.values=s.values,this.typeIds=s.typeIds,this.nullBitmap=s.nullBitmap,this.valueOffsets=s.valueOffsets):(this.stride=Io(t),s&&((c=s[0])&&(this.valueOffsets=c),(c=s[1])&&(this.values=c),(c=s[2])&&(this.nullBitmap=c),(c=s[3])&&(this.typeIds=c)))}getValid(t){const{type:n}=this;if(lt.isUnion(n)){const r=n,i=this.children[r.typeIdToChildIndex[this.typeIds[t]]],s=r.mode===pn.Dense?this.valueOffsets[t]:t;return i.getValid(s)}if(this.nullable&&this.nullCount>0){const r=this.offset+t;return(this.nullBitmap[r>>3]&1<<r%8)!==0}return!0}setValid(t,n){let r;const{type:i}=this;if(lt.isUnion(i)){const s=i,o=this.children[s.typeIdToChildIndex[this.typeIds[t]]],a=s.mode===pn.Dense?this.valueOffsets[t]:t;r=o.getValid(a),o.setValid(a,n)}else{let{nullBitmap:s}=this;const{offset:o,length:a}=this,c=o+t,l=1<<c%8,u=c>>3;(!s||s.byteLength<=u)&&(s=new Uint8Array((o+a+63&-64)>>3).fill(255),this.nullCount>0?(s.set(Hv(o,a,this.nullBitmap),0),Object.assign(this,{nullBitmap:s})):Object.assign(this,{nullBitmap:s,_nullCount:0}));const f=s[u];r=(f&l)!==0,s[u]=n?f|l:f&~l}return r!==!!n&&(this._nullCount=this.nullCount+(n?-1:1)),n}clone(t=this.type,n=this.offset,r=this.length,i=this._nullCount,s=this,o=this.children){return new me(t,n,r,i,s,o,this.dictionary)}slice(t,n){const{stride:r,typeId:i,children:s}=this,o=+(this._nullCount===0)-1,a=i===16?r:1,c=this._sliceBuffers(t,n,r,i);return this.clone(this.type,this.offset+t,n,o,c,s.length===0||this.valueOffsets?s:this._sliceChildren(s,a*t,a*n))}_changeLengthAndBackfillNullBitmap(t){if(this.typeId===k.Null)return this.clone(this.type,0,t,0);const{length:n,nullCount:r}=this,i=new Uint8Array((t+63&-64)>>3).fill(255,0,n>>3);i[n>>3]=(1<<n-(n&-8))-1,r>0&&i.set(Hv(this.offset,n,this.nullBitmap),0);const s=this.buffers;return s[xo.VALIDITY]=i,this.clone(this.type,0,t,r+(t-n),s)}_sliceBuffers(t,n,r,i){let s;const{buffers:o}=this;return(s=o[xo.TYPE])&&(o[xo.TYPE]=s.subarray(t,t+n)),(s=o[xo.OFFSET])&&(o[xo.OFFSET]=s.subarray(t,t+n+1))||(s=o[xo.DATA])&&(o[xo.DATA]=i===6?s:s.subarray(r*t,r*(t+n))),o}_sliceChildren(t,n,r){return t.map(i=>i.slice(n,r))}}me.prototype.children=Object.freeze([]);class dp extends Ut{visit(t){return this.getVisitFn(t.type).call(this,t)}visitNull(t){const{["type"]:n,["offset"]:r=0,["length"]:i=0}=t;return new me(n,r,i,i)}visitBool(t){const{["type"]:n,["offset"]:r=0}=t,i=Qt(t.nullBitmap),s=ve(n.ArrayType,t.data),{["length"]:o=s.length>>3,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new me(n,r,o,a,[void 0,s,i])}visitInt(t){const{["type"]:n,["offset"]:r=0}=t,i=Qt(t.nullBitmap),s=ve(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new me(n,r,o,a,[void 0,s,i])}visitFloat(t){const{["type"]:n,["offset"]:r=0}=t,i=Qt(t.nullBitmap),s=ve(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new me(n,r,o,a,[void 0,s,i])}visitUtf8(t){const{["type"]:n,["offset"]:r=0}=t,i=Qt(t.data),s=Qt(t.nullBitmap),o=yh(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:c=t.nullBitmap?-1:0}=t;return new me(n,r,a,c,[o,i,s])}visitLargeUtf8(t){const{["type"]:n,["offset"]:r=0}=t,i=Qt(t.data),s=Qt(t.nullBitmap),o=q6(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:c=t.nullBitmap?-1:0}=t;return new me(n,r,a,c,[o,i,s])}visitBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=Qt(t.data),s=Qt(t.nullBitmap),o=yh(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:c=t.nullBitmap?-1:0}=t;return new me(n,r,a,c,[o,i,s])}visitLargeBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=Qt(t.data),s=Qt(t.nullBitmap),o=q6(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:c=t.nullBitmap?-1:0}=t;return new me(n,r,a,c,[o,i,s])}visitFixedSizeBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=Qt(t.nullBitmap),s=ve(n.ArrayType,t.data),{["length"]:o=s.length/Io(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new me(n,r,o,a,[void 0,s,i])}visitDate(t){const{["type"]:n,["offset"]:r=0}=t,i=Qt(t.nullBitmap),s=ve(n.ArrayType,t.data),{["length"]:o=s.length/Io(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new me(n,r,o,a,[void 0,s,i])}visitTimestamp(t){const{["type"]:n,["offset"]:r=0}=t,i=Qt(t.nullBitmap),s=ve(n.ArrayType,t.data),{["length"]:o=s.length/Io(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new me(n,r,o,a,[void 0,s,i])}visitTime(t){const{["type"]:n,["offset"]:r=0}=t,i=Qt(t.nullBitmap),s=ve(n.ArrayType,t.data),{["length"]:o=s.length/Io(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new me(n,r,o,a,[void 0,s,i])}visitDecimal(t){const{["type"]:n,["offset"]:r=0}=t,i=Qt(t.nullBitmap),s=ve(n.ArrayType,t.data),{["length"]:o=s.length/Io(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new me(n,r,o,a,[void 0,s,i])}visitList(t){const{["type"]:n,["offset"]:r=0,["child"]:i}=t,s=Qt(t.nullBitmap),o=yh(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:c=t.nullBitmap?-1:0}=t;return new me(n,r,a,c,[o,void 0,s],[i])}visitStruct(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=Qt(t.nullBitmap),{length:o=i.reduce((c,{length:l})=>Math.max(c,l),0),nullCount:a=t.nullBitmap?-1:0}=t;return new me(n,r,o,a,[void 0,void 0,s],i)}visitUnion(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=ve(n.ArrayType,t.typeIds),{["length"]:o=s.length,["nullCount"]:a=-1}=t;if(lt.isSparseUnion(n))return new me(n,r,o,a,[void 0,void 0,void 0,s],i);const c=yh(t.valueOffsets);return new me(n,r,o,a,[c,void 0,void 0,s],i)}visitDictionary(t){const{["type"]:n,["offset"]:r=0}=t,i=Qt(t.nullBitmap),s=ve(n.indices.ArrayType,t.data),{["dictionary"]:o=new he([new dp().visit({type:n.dictionary})])}=t,{["length"]:a=s.length,["nullCount"]:c=t.nullBitmap?-1:0}=t;return new me(n,r,a,c,[void 0,s,i],[],o)}visitInterval(t){const{["type"]:n,["offset"]:r=0}=t,i=Qt(t.nullBitmap),s=ve(n.ArrayType,t.data),{["length"]:o=s.length/Io(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new me(n,r,o,a,[void 0,s,i])}visitDuration(t){const{["type"]:n,["offset"]:r=0}=t,i=Qt(t.nullBitmap),s=ve(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new me(n,r,o,a,[void 0,s,i])}visitFixedSizeList(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new dp().visit({type:n.valueType})}=t,s=Qt(t.nullBitmap),{["length"]:o=i.length/Io(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new me(n,r,o,a,[void 0,void 0,s],[i])}visitMap(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new dp().visit({type:n.childType})}=t,s=Qt(t.nullBitmap),o=yh(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:c=t.nullBitmap?-1:0}=t;return new me(n,r,a,c,[o,void 0,s],[i])}}const c1t=new dp;function Pt(e){return c1t.visit(e)}class sD{constructor(t=0,n){this.numChunks=t,this.getChunkIterator=n,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const t=this.chunkIterator.next();if(!t.done)return t;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}function l1t(e){return e.some(t=>t.nullable)}function Uz(e){return e.reduce((t,n)=>t+n.nullCount,0)}function Pz(e){return e.reduce((t,n,r)=>(t[r+1]=t[r]+n.length,t),new Uint32Array(e.length+1))}function zz(e,t,n,r){const i=[];for(let s=-1,o=e.length;++s<o;){const a=e[s],c=t[s],{length:l}=a;if(c>=r)break;if(n>=c+l)continue;if(c>=n&&c+l<=r){i.push(a);continue}const u=Math.max(0,n-c),f=Math.min(r-c,l);i.push(a.slice(u,f-u))}return i.length===0&&i.push(e[0].slice(0,0)),i}function _A(e,t,n,r){let i=0,s=0,o=t.length-1;do{if(i>=o-1)return n<t[o]?r(e,i,n-t[i]):null;s=i+Math.trunc((o-i)*.5),n<t[s]?o=s:i=s}while(i<o)}function SA(e,t){return e.getValid(t)}function Qv(e){function t(n,r,i){return e(n[r],i)}return function(n){const r=this.data;return _A(r,this._offsets,n,t)}}function jz(e){let t;function n(r,i,s){return e(r[i],s,t)}return function(r,i){const s=this.data;t=i;const o=_A(s,this._offsets,r,n);return t=void 0,o}}function Vz(e){let t;function n(r,i,s){let o=s,a=0,c=0;for(let l=i-1,u=r.length;++l<u;){const f=r[l];if(~(a=e(f,t,o)))return c+a;o=0,c+=f.length}return-1}return function(r,i){t=r;const s=this.data,o=typeof i!="number"?n(s,0,0):_A(s,this._offsets,i,n);return t=void 0,o}}class pt extends Ut{}function u1t(e,t){return t===null&&e.length>0?0:-1}function f1t(e,t){const{nullBitmap:n}=e;if(!n||e.nullCount<=0)return-1;let r=0;for(const i of new wA(n,e.offset+(t||0),e.length,n,Cz)){if(!i)return r;++r}return-1}function Et(e,t,n){if(t===void 0)return-1;if(t===null)switch(e.typeId){case k.Union:break;case k.Dictionary:break;default:return f1t(e,n)}const r=Ur.getVisitFn(e),i=qd(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}function Yz(e,t,n){const r=Ur.getVisitFn(e),i=qd(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}pt.prototype.visitNull=u1t;pt.prototype.visitBool=Et;pt.prototype.visitInt=Et;pt.prototype.visitInt8=Et;pt.prototype.visitInt16=Et;pt.prototype.visitInt32=Et;pt.prototype.visitInt64=Et;pt.prototype.visitUint8=Et;pt.prototype.visitUint16=Et;pt.prototype.visitUint32=Et;pt.prototype.visitUint64=Et;pt.prototype.visitFloat=Et;pt.prototype.visitFloat16=Et;pt.prototype.visitFloat32=Et;pt.prototype.visitFloat64=Et;pt.prototype.visitUtf8=Et;pt.prototype.visitLargeUtf8=Et;pt.prototype.visitBinary=Et;pt.prototype.visitLargeBinary=Et;pt.prototype.visitFixedSizeBinary=Et;pt.prototype.visitDate=Et;pt.prototype.visitDateDay=Et;pt.prototype.visitDateMillisecond=Et;pt.prototype.visitTimestamp=Et;pt.prototype.visitTimestampSecond=Et;pt.prototype.visitTimestampMillisecond=Et;pt.prototype.visitTimestampMicrosecond=Et;pt.prototype.visitTimestampNanosecond=Et;pt.prototype.visitTime=Et;pt.prototype.visitTimeSecond=Et;pt.prototype.visitTimeMillisecond=Et;pt.prototype.visitTimeMicrosecond=Et;pt.prototype.visitTimeNanosecond=Et;pt.prototype.visitDecimal=Et;pt.prototype.visitList=Et;pt.prototype.visitStruct=Et;pt.prototype.visitUnion=Et;pt.prototype.visitDenseUnion=Yz;pt.prototype.visitSparseUnion=Yz;pt.prototype.visitDictionary=Et;pt.prototype.visitInterval=Et;pt.prototype.visitIntervalDayTime=Et;pt.prototype.visitIntervalYearMonth=Et;pt.prototype.visitDuration=Et;pt.prototype.visitDurationSecond=Et;pt.prototype.visitDurationMillisecond=Et;pt.prototype.visitDurationMicrosecond=Et;pt.prototype.visitDurationNanosecond=Et;pt.prototype.visitFixedSizeList=Et;pt.prototype.visitMap=Et;const Kv=new pt;class yt extends Ut{}function _t(e){const{type:t}=e;if(e.nullCount===0&&e.stride===1&&(lt.isInt(t)&&t.bitWidth!==64||lt.isTime(t)&&t.bitWidth!==64||lt.isFloat(t)&&t.precision!==rn.HALF))return new sD(e.data.length,r=>{const i=e.data[r];return i.values.subarray(0,i.length)[Symbol.iterator]()});let n=0;return new sD(e.data.length,r=>{const s=e.data[r].length,o=e.slice(n,n+s);return n+=s,new d1t(o)})}class d1t{constructor(t){this.vector=t,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}yt.prototype.visitNull=_t;yt.prototype.visitBool=_t;yt.prototype.visitInt=_t;yt.prototype.visitInt8=_t;yt.prototype.visitInt16=_t;yt.prototype.visitInt32=_t;yt.prototype.visitInt64=_t;yt.prototype.visitUint8=_t;yt.prototype.visitUint16=_t;yt.prototype.visitUint32=_t;yt.prototype.visitUint64=_t;yt.prototype.visitFloat=_t;yt.prototype.visitFloat16=_t;yt.prototype.visitFloat32=_t;yt.prototype.visitFloat64=_t;yt.prototype.visitUtf8=_t;yt.prototype.visitLargeUtf8=_t;yt.prototype.visitBinary=_t;yt.prototype.visitLargeBinary=_t;yt.prototype.visitFixedSizeBinary=_t;yt.prototype.visitDate=_t;yt.prototype.visitDateDay=_t;yt.prototype.visitDateMillisecond=_t;yt.prototype.visitTimestamp=_t;yt.prototype.visitTimestampSecond=_t;yt.prototype.visitTimestampMillisecond=_t;yt.prototype.visitTimestampMicrosecond=_t;yt.prototype.visitTimestampNanosecond=_t;yt.prototype.visitTime=_t;yt.prototype.visitTimeSecond=_t;yt.prototype.visitTimeMillisecond=_t;yt.prototype.visitTimeMicrosecond=_t;yt.prototype.visitTimeNanosecond=_t;yt.prototype.visitDecimal=_t;yt.prototype.visitList=_t;yt.prototype.visitStruct=_t;yt.prototype.visitUnion=_t;yt.prototype.visitDenseUnion=_t;yt.prototype.visitSparseUnion=_t;yt.prototype.visitDictionary=_t;yt.prototype.visitInterval=_t;yt.prototype.visitIntervalDayTime=_t;yt.prototype.visitIntervalYearMonth=_t;yt.prototype.visitDuration=_t;yt.prototype.visitDurationSecond=_t;yt.prototype.visitDurationMillisecond=_t;yt.prototype.visitDurationMicrosecond=_t;yt.prototype.visitDurationNanosecond=_t;yt.prototype.visitFixedSizeList=_t;yt.prototype.visitMap=_t;const xA=new yt;var qz;const Wz={},Gz={};class he{constructor(t){var n,r,i;const s=t[0]instanceof he?t.flatMap(a=>a.data):t;if(s.length===0||s.some(a=>!(a instanceof me)))throw new TypeError("Vector constructor expects an Array of Data instances.");const o=(n=s[0])===null||n===void 0?void 0:n.type;switch(s.length){case 0:this._offsets=[0];break;case 1:{const{get:a,set:c,indexOf:l}=Wz[o.typeId],u=s[0];this.isValid=f=>SA(u,f),this.get=f=>a(u,f),this.set=(f,d)=>c(u,f,d),this.indexOf=f=>l(u,f),this._offsets=[0,u.length];break}default:Object.setPrototypeOf(this,Gz[o.typeId]),this._offsets=Pz(s);break}this.data=s,this.type=o,this.stride=Io(o),this.numChildren=(i=(r=o.children)===null||r===void 0?void 0:r.length)!==null&&i!==void 0?i:0,this.length=this._offsets.at(-1)}get byteLength(){return this.data.reduce((t,n)=>t+n.byteLength,0)}get nullable(){return l1t(this.data)}get nullCount(){return Uz(this.data)}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${k[this.type.typeId]}Vector`}isValid(t){return!1}get(t){return null}at(t){return this.get(bA(t,this.length))}set(t,n){}indexOf(t,n){return-1}includes(t,n){return this.indexOf(t,n)>-1}[Symbol.iterator](){return xA.visit(this)}concat(...t){return new he(this.data.concat(t.flatMap(n=>n.data).flat(Number.POSITIVE_INFINITY)))}slice(t,n){return new he(Bz(this,t,n,({data:r,_offsets:i},s,o)=>zz(r,i,s,o)))}toJSON(){return[...this]}toArray(){const{type:t,data:n,length:r,stride:i,ArrayType:s}=this;switch(t.typeId){case k.Int:case k.Float:case k.Decimal:case k.Time:case k.Timestamp:switch(n.length){case 0:return new s;case 1:return n[0].values.subarray(0,r*i);default:return n.reduce((o,{values:a,length:c})=>(o.array.set(a.subarray(0,c*i),o.offset),o.offset+=c*i,o),{array:new s(r*i),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(t){var n;return this.getChildAt((n=this.type.children)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.numChildren?new he(this.data.map(({children:n})=>n[t])):null}get isMemoized(){return lt.isDictionary(this.type)?this.data[0].dictionary.isMemoized:!1}memoize(){if(lt.isDictionary(this.type)){const t=new Zv(this.data[0].dictionary),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new he(n)}return new Zv(this)}unmemoize(){if(lt.isDictionary(this.type)&&this.isMemoized){const t=this.data[0].dictionary.unmemoize(),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new he(n)}return this}}qz=Symbol.toStringTag;he[qz]=(e=>{e.type=lt.prototype,e.data=[],e.length=0,e.stride=1,e.numChildren=0,e._offsets=new Uint32Array([0]),e[Symbol.isConcatSpreadable]=!0;const t=Object.keys(k).map(n=>k[n]).filter(n=>typeof n=="number"&&n!==k.NONE);for(const n of t){const r=Ur.getVisitFnByTypeId(n),i=Li.getVisitFnByTypeId(n),s=Kv.getVisitFnByTypeId(n);Wz[n]={get:r,set:i,indexOf:s},Gz[n]=Object.create(e,{isValid:{value:Qv(SA)},get:{value:Qv(Ur.getVisitFnByTypeId(n))},set:{value:jz(Li.getVisitFnByTypeId(n))},indexOf:{value:Vz(Kv.getVisitFnByTypeId(n))}})}return"Vector"})(he.prototype);class Zv extends he{constructor(t){super(t.data);const n=this.get,r=this.set,i=this.slice,s=new Array(this.length);Object.defineProperty(this,"get",{value(o){const a=s[o];if(a!==void 0)return a;const c=n.call(this,o);return s[o]=c,c}}),Object.defineProperty(this,"set",{value(o,a){r.call(this,o,a),s[o]=a}}),Object.defineProperty(this,"slice",{value:(o,a)=>new Zv(i.call(this,o,a))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new he(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}class TI{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(t,n,r,i){return t.prep(8,24),t.writeInt64(BigInt(i??0)),t.pad(4),t.writeInt32(r),t.writeInt64(BigInt(n??0)),t.offset()}}class jr{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFooter(t,n){return(n||new jr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFooter(t,n){return t.setPosition(t.position()+ye),(n||new jr).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):on.V1}schema(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new Is).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}dictionaries(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new TI).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}dictionariesLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}recordBatches(t,n){const r=this.bb.__offset(this.bb_pos,10);return r?(n||new TI).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}recordBatchesLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new vn).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startFooter(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,on.V1)}static addSchema(t,n){t.addFieldOffset(1,n,0)}static addDictionaries(t,n){t.addFieldOffset(2,n,0)}static startDictionariesVector(t,n){t.startVector(24,n,8)}static addRecordBatches(t,n){t.addFieldOffset(3,n,0)}static startRecordBatchesVector(t,n){t.startVector(24,n,8)}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endFooter(t){return t.endObject()}static finishFooterBuffer(t,n){t.finish(n)}static finishSizePrefixedFooterBuffer(t,n){t.finish(n,void 0,!0)}}class pe{constructor(t=[],n,r,i=on.V5){this.fields=t||[],this.metadata=n||new Map,r||(r=AI(this.fields)),this.dictionaries=r,this.metadataVersion=i}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(t=>t.name)}toString(){return`Schema<{ ${this.fields.map((t,n)=>`${n}: ${t}`).join(", ")} }>`}select(t){const n=new Set(t),r=this.fields.filter(i=>n.has(i.name));return new pe(r,this.metadata)}selectAt(t){const n=t.map(r=>this.fields[r]).filter(Boolean);return new pe(n,this.metadata)}assign(...t){const n=t[0]instanceof pe?t[0]:Array.isArray(t[0])?new pe(t[0]):new pe(t),r=[...this.fields],i=S0(S0(new Map,this.metadata),n.metadata),s=n.fields.filter(a=>{const c=r.findIndex(l=>l.name===a.name);return~c?(r[c]=a.clone({metadata:S0(S0(new Map,r[c].metadata),a.metadata)}))&&!1:!0}),o=AI(s,new Map);return new pe([...r,...s],i,new Map([...this.dictionaries,...o]))}}pe.prototype.fields=null;pe.prototype.metadata=null;pe.prototype.dictionaries=null;class Re{static new(...t){let[n,r,i,s]=t;return t[0]&&typeof t[0]=="object"&&({name:n}=t[0],r===void 0&&(r=t[0].type),i===void 0&&(i=t[0].nullable),s===void 0&&(s=t[0].metadata)),new Re(`${n}`,r,i,s)}constructor(t,n,r=!1,i){this.name=t,this.type=n,this.nullable=r,this.metadata=i||new Map}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...t){let[n,r,i,s]=t;return!t[0]||typeof t[0]!="object"?[n=this.name,r=this.type,i=this.nullable,s=this.metadata]=t:{name:n=this.name,type:r=this.type,nullable:i=this.nullable,metadata:s=this.metadata}=t[0],Re.new(n,r,i,s)}}Re.prototype.type=null;Re.prototype.name=null;Re.prototype.nullable=null;Re.prototype.metadata=null;function S0(e,t){return new Map([...e||new Map,...t||new Map])}function AI(e,t=new Map){for(let n=-1,r=e.length;++n<r;){const s=e[n].type;if(lt.isDictionary(s)){if(!t.has(s.id))t.set(s.id,s.dictionary);else if(t.get(s.id)!==s.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}s.children&&s.children.length>0&&AI(s.children,t)}return t}var h1t=g9,p1t=gd;class my{static decode(t){t=new p1t(Qt(t));const n=jr.getRootAsFooter(t),r=pe.decode(n.schema(),new Map,n.version());return new y1t(r,n)}static encode(t){const n=new h1t,r=pe.encode(n,t.schema);jr.startRecordBatchesVector(n,t.numRecordBatches);for(const o of[...t.recordBatches()].slice().reverse())bc.encode(n,o);const i=n.endVector();jr.startDictionariesVector(n,t.numDictionaries);for(const o of[...t.dictionaryBatches()].slice().reverse())bc.encode(n,o);const s=n.endVector();return jr.startFooter(n),jr.addSchema(n,r),jr.addVersion(n,on.V5),jr.addRecordBatches(n,i),jr.addDictionaries(n,s),jr.finishFooterBuffer(n,jr.endFooter(n)),n.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}constructor(t,n=on.V5,r,i){this.schema=t,this.version=n,r&&(this._recordBatches=r),i&&(this._dictionaryBatches=i)}*recordBatches(){for(let t,n=-1,r=this.numRecordBatches;++n<r;)(t=this.getRecordBatch(n))&&(yield t)}*dictionaryBatches(){for(let t,n=-1,r=this.numDictionaries;++n<r;)(t=this.getDictionaryBatch(n))&&(yield t)}getRecordBatch(t){return t>=0&&t<this.numRecordBatches&&this._recordBatches[t]||null}getDictionaryBatch(t){return t>=0&&t<this.numDictionaries&&this._dictionaryBatches[t]||null}}class y1t extends my{get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}constructor(t,n){super(t,n.version()),this._footer=n}getRecordBatch(t){if(t>=0&&t<this.numRecordBatches){const n=this._footer.recordBatches(t);if(n)return bc.decode(n)}return null}getDictionaryBatch(t){if(t>=0&&t<this.numDictionaries){const n=this._footer.dictionaries(t);if(n)return bc.decode(n)}return null}}class bc{static decode(t){return new bc(t.metaDataLength(),t.bodyLength(),t.offset())}static encode(t,n){const{metaDataLength:r}=n,i=BigInt(n.offset),s=BigInt(n.bodyLength);return TI.createBlock(t,i,r,s)}constructor(t,n,r){this.metaDataLength=t,this.offset=Ie(r),this.bodyLength=Ie(n)}}const We=Object.freeze({done:!0,value:void 0});class oD{constructor(t){this._json=t}get schema(){return this._json.schema}get batches(){return this._json.batches||[]}get dictionaries(){return this._json.dictionaries||[]}}class IA{tee(){return this._getDOMStream().tee()}pipe(t,n){return this._getNodeStream().pipe(t,n)}pipeTo(t,n){return this._getDOMStream().pipeTo(t,n)}pipeThrough(t,n){return this._getDOMStream().pipeThrough(t,n)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class m1t extends IA{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(t=>this._closedPromiseResolve=t)}get closed(){return this._closedPromise}cancel(t){return H(this,void 0,void 0,function*(){yield this.return(t)})}write(t){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(t):this.resolvers.shift().resolve({done:!1,value:t}))}abort(t){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:t}:this.resolvers.shift().reject({done:!0,value:t}))}close(){if(this._closedPromiseResolve){const{resolvers:t}=this;for(;t.length>0;)t.shift().resolve(We);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(t){return mi.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,t)}toNodeStream(t){return mi.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,t)}throw(t){return H(this,void 0,void 0,function*(){return yield this.abort(t),We})}return(t){return H(this,void 0,void 0,function*(){return yield this.close(),We})}read(t){return H(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return H(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(...t){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((n,r)=>{this.resolvers.push({resolve:n,reject:r})}):Promise.resolve(We)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}}class ag extends m1t{write(t){if((t=Qt(t)).byteLength>0)return super.write(t)}toString(t=!1){return t?vI(this.toUint8Array(!0)):this.toUint8Array(!1).then(vI)}toUint8Array(t=!1){return t?Qs(this._values)[0]:H(this,void 0,void 0,function*(){var n,r,i,s;const o=[];let a=0;try{for(var c=!0,l=Kr(this),u;u=yield l.next(),n=u.done,!n;c=!0){s=u.value,c=!1;const f=s;o.push(f),a+=f.byteLength}}catch(f){r={error:f}}finally{try{!c&&!n&&(i=l.return)&&(yield i.call(l))}finally{if(r)throw r.error}}return Qs(o,a)[0]})}}class Jv{constructor(t){t&&(this.source=new g1t(mi.fromIterable(t)))}[Symbol.iterator](){return this}next(t){return this.source.next(t)}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}peek(t){return this.source.peek(t)}read(t){return this.source.read(t)}}class wd{constructor(t){t instanceof wd?this.source=t.source:t instanceof ag?this.source=new Yc(mi.fromAsyncIterable(t)):h9(t)?this.source=new Yc(mi.fromNodeStream(t)):hA(t)?this.source=new Yc(mi.fromDOMStream(t)):d9(t)?this.source=new Yc(mi.fromDOMStream(t.body)):dm(t)?this.source=new Yc(mi.fromIterable(t)):Ql(t)?this.source=new Yc(mi.fromAsyncIterable(t)):Yd(t)&&(this.source=new Yc(mi.fromAsyncIterable(t)))}[Symbol.asyncIterator](){return this}next(t){return this.source.next(t)}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}get closed(){return this.source.closed}cancel(t){return this.source.cancel(t)}peek(t){return this.source.peek(t)}read(t){return this.source.read(t)}}class g1t{constructor(t){this.source=t}cancel(t){this.return(t)}peek(t){return this.next(t,"peek").value}read(t){return this.next(t,"read").value}next(t,n="read"){return this.source.next({cmd:n,size:t})}throw(t){return Object.create(this.source.throw&&this.source.throw(t)||We)}return(t){return Object.create(this.source.return&&this.source.return(t)||We)}}class Yc{constructor(t){this.source=t,this._closedPromise=new Promise(n=>this._closedPromiseResolve=n)}cancel(t){return H(this,void 0,void 0,function*(){yield this.return(t)})}get closed(){return this._closedPromise}read(t){return H(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return H(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(t){return H(this,arguments,void 0,function*(n,r="read"){return yield this.source.next({cmd:r,size:n})})}throw(t){return H(this,void 0,void 0,function*(){const n=this.source.throw&&(yield this.source.throw(t))||We;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(n)})}return(t){return H(this,void 0,void 0,function*(){const n=this.source.return&&(yield this.source.return(t))||We;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(n)})}}class aD extends Jv{constructor(t,n){super(),this.position=0,this.buffer=Qt(t),this.size=n===void 0?this.buffer.byteLength:n}readInt32(t){const{buffer:n,byteOffset:r}=this.readAt(t,4);return new DataView(n,r).getInt32(0,!0)}seek(t){return this.position=Math.min(t,this.size),t<this.size}read(t){const{buffer:n,size:r,position:i}=this;return n&&i<r?(typeof t!="number"&&(t=Number.POSITIVE_INFINITY),this.position=Math.min(r,i+Math.min(r-i,t)),n.subarray(i,this.position)):null}readAt(t,n){const r=this.buffer,i=Math.min(this.size,t+n);return r?r.subarray(t,i):new Uint8Array(n)}close(){this.buffer&&(this.buffer=null)}throw(t){return this.close(),{done:!0,value:t}}return(t){return this.close(),{done:!0,value:t}}}class tb extends wd{constructor(t,n){super(),this.position=0,this._handle=t,typeof n=="number"?this.size=n:this._pending=H(this,void 0,void 0,function*(){this.size=(yield t.stat()).size,delete this._pending})}readInt32(t){return H(this,void 0,void 0,function*(){const{buffer:n,byteOffset:r}=yield this.readAt(t,4);return new DataView(n,r).getInt32(0,!0)})}seek(t){return H(this,void 0,void 0,function*(){return this._pending&&(yield this._pending),this.position=Math.min(t,this.size),t<this.size})}read(t){return H(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:n,size:r,position:i}=this;if(n&&i<r){typeof t!="number"&&(t=Number.POSITIVE_INFINITY);let s=i,o=0,a=0;const c=Math.min(r,s+Math.min(r-s,t)),l=new Uint8Array(Math.max(0,(this.position=c)-s));for(;(s+=a)<c&&(o+=a)<l.byteLength;)({bytesRead:a}=yield n.read(l,o,l.byteLength-o,s));return l}return null})}readAt(t,n){return H(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:r,size:i}=this;if(r&&t+n<i){const s=Math.min(i,t+n),o=new Uint8Array(s-t);return(yield r.read(o,0,n,t)).buffer}return new Uint8Array(n)})}close(){return H(this,void 0,void 0,function*(){const t=this._handle;this._handle=null,t&&(yield t.close())})}throw(t){return H(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:t}})}return(t){return H(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:t}})}}const v1t=65536;function yf(e){return e<0&&(e=4294967295+e+1),`0x${e.toString(16)}`}const _d=8,EA=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8];class Hz{constructor(t){this.buffer=t}high(){return this.buffer[1]}low(){return this.buffer[0]}_times(t){const n=new Uint32Array([this.buffer[1]>>>16,this.buffer[1]&65535,this.buffer[0]>>>16,this.buffer[0]&65535]),r=new Uint32Array([t.buffer[1]>>>16,t.buffer[1]&65535,t.buffer[0]>>>16,t.buffer[0]&65535]);let i=n[3]*r[3];this.buffer[0]=i&65535;let s=i>>>16;return i=n[2]*r[3],s+=i,i=n[3]*r[2]>>>0,s+=i,this.buffer[0]+=s<<16,this.buffer[1]=s>>>0<i?v1t:0,this.buffer[1]+=s>>>16,this.buffer[1]+=n[1]*r[3]+n[2]*r[2]+n[3]*r[1],this.buffer[1]+=n[0]*r[3]+n[1]*r[2]+n[2]*r[1]+n[3]*r[0]<<16,this}_plus(t){const n=this.buffer[0]+t.buffer[0]>>>0;this.buffer[1]+=t.buffer[1],n<this.buffer[0]>>>0&&++this.buffer[1],this.buffer[0]=n}lessThan(t){return this.buffer[1]<t.buffer[1]||this.buffer[1]===t.buffer[1]&&this.buffer[0]<t.buffer[0]}equals(t){return this.buffer[1]===t.buffer[1]&&this.buffer[0]==t.buffer[0]}greaterThan(t){return t.lessThan(this)}hex(){return`${yf(this.buffer[1])} ${yf(this.buffer[0])}`}}class ge extends Hz{times(t){return this._times(t),this}plus(t){return this._plus(t),this}static from(t,n=new Uint32Array(2)){return ge.fromString(typeof t=="string"?t:t.toString(),n)}static fromNumber(t,n=new Uint32Array(2)){return ge.fromString(t.toString(),n)}static fromString(t,n=new Uint32Array(2)){const r=t.length,i=new ge(n);for(let s=0;s<r;){const o=_d<r-s?_d:r-s,a=new ge(new Uint32Array([Number.parseInt(t.slice(s,s+o),10),0])),c=new ge(new Uint32Array([EA[o],0]));i.times(c),i.plus(a),s+=o}return i}static convertArray(t){const n=new Uint32Array(t.length*2);for(let r=-1,i=t.length;++r<i;)ge.from(t[r],new Uint32Array(n.buffer,n.byteOffset+2*r*4,2));return n}static multiply(t,n){return new ge(new Uint32Array(t.buffer)).times(n)}static add(t,n){return new ge(new Uint32Array(t.buffer)).plus(n)}}class xr extends Hz{negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[0]==0&&++this.buffer[1],this}times(t){return this._times(t),this}plus(t){return this._plus(t),this}lessThan(t){const n=this.buffer[1]<<0,r=t.buffer[1]<<0;return n<r||n===r&&this.buffer[0]<t.buffer[0]}static from(t,n=new Uint32Array(2)){return xr.fromString(typeof t=="string"?t:t.toString(),n)}static fromNumber(t,n=new Uint32Array(2)){return xr.fromString(t.toString(),n)}static fromString(t,n=new Uint32Array(2)){const r=t.startsWith("-"),i=t.length,s=new xr(n);for(let o=r?1:0;o<i;){const a=_d<i-o?_d:i-o,c=new xr(new Uint32Array([Number.parseInt(t.slice(o,o+a),10),0])),l=new xr(new Uint32Array([EA[a],0]));s.times(l),s.plus(c),o+=a}return r?s.negate():s}static convertArray(t){const n=new Uint32Array(t.length*2);for(let r=-1,i=t.length;++r<i;)xr.from(t[r],new Uint32Array(n.buffer,n.byteOffset+2*r*4,2));return n}static multiply(t,n){return new xr(new Uint32Array(t.buffer)).times(n)}static add(t,n){return new xr(new Uint32Array(t.buffer)).plus(n)}}class Es{constructor(t){this.buffer=t}high(){return new xr(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2))}low(){return new xr(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset,2))}negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[2]=~this.buffer[2],this.buffer[3]=~this.buffer[3],this.buffer[0]==0&&++this.buffer[1],this.buffer[1]==0&&++this.buffer[2],this.buffer[2]==0&&++this.buffer[3],this}times(t){const n=new ge(new Uint32Array([this.buffer[3],0])),r=new ge(new Uint32Array([this.buffer[2],0])),i=new ge(new Uint32Array([this.buffer[1],0])),s=new ge(new Uint32Array([this.buffer[0],0])),o=new ge(new Uint32Array([t.buffer[3],0])),a=new ge(new Uint32Array([t.buffer[2],0])),c=new ge(new Uint32Array([t.buffer[1],0])),l=new ge(new Uint32Array([t.buffer[0],0]));let u=ge.multiply(s,l);this.buffer[0]=u.low();const f=new ge(new Uint32Array([u.high(),0]));return u=ge.multiply(i,l),f.plus(u),u=ge.multiply(s,c),f.plus(u),this.buffer[1]=f.low(),this.buffer[3]=f.lessThan(u)?1:0,this.buffer[2]=f.high(),new ge(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2)).plus(ge.multiply(r,l)).plus(ge.multiply(i,c)).plus(ge.multiply(s,a)),this.buffer[3]+=ge.multiply(n,l).plus(ge.multiply(r,c)).plus(ge.multiply(i,a)).plus(ge.multiply(s,o)).low(),this}plus(t){const n=new Uint32Array(4);return n[3]=this.buffer[3]+t.buffer[3]>>>0,n[2]=this.buffer[2]+t.buffer[2]>>>0,n[1]=this.buffer[1]+t.buffer[1]>>>0,n[0]=this.buffer[0]+t.buffer[0]>>>0,n[0]<this.buffer[0]>>>0&&++n[1],n[1]<this.buffer[1]>>>0&&++n[2],n[2]<this.buffer[2]>>>0&&++n[3],this.buffer[3]=n[3],this.buffer[2]=n[2],this.buffer[1]=n[1],this.buffer[0]=n[0],this}hex(){return`${yf(this.buffer[3])} ${yf(this.buffer[2])} ${yf(this.buffer[1])} ${yf(this.buffer[0])}`}static multiply(t,n){return new Es(new Uint32Array(t.buffer)).times(n)}static add(t,n){return new Es(new Uint32Array(t.buffer)).plus(n)}static from(t,n=new Uint32Array(4)){return Es.fromString(typeof t=="string"?t:t.toString(),n)}static fromNumber(t,n=new Uint32Array(4)){return Es.fromString(t.toString(),n)}static fromString(t,n=new Uint32Array(4)){const r=t.startsWith("-"),i=t.length,s=new Es(n);for(let o=r?1:0;o<i;){const a=_d<i-o?_d:i-o,c=new Es(new Uint32Array([Number.parseInt(t.slice(o,o+a),10),0,0,0])),l=new Es(new Uint32Array([EA[a],0,0,0]));s.times(l),s.plus(c),o+=a}return r?s.negate():s}static convertArray(t){const n=new Uint32Array(t.length*4);for(let r=-1,i=t.length;++r<i;)Es.from(t[r],new Uint32Array(n.buffer,n.byteOffset+4*4*r,4));return n}}class Xz extends Ut{constructor(t,n,r,i,s=on.V5){super(),this.nodesIndex=-1,this.buffersIndex=-1,this.bytes=t,this.nodes=n,this.buffers=r,this.dictionaries=i,this.metadataVersion=s}visit(t){return super.visit(t instanceof Re?t.type:t)}visitNull(t,{length:n}=this.nextFieldNode()){return Pt({type:t,length:n})}visitBool(t,{length:n,nullCount:r}=this.nextFieldNode()){return Pt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitInt(t,{length:n,nullCount:r}=this.nextFieldNode()){return Pt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitFloat(t,{length:n,nullCount:r}=this.nextFieldNode()){return Pt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitUtf8(t,{length:n,nullCount:r}=this.nextFieldNode()){return Pt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),valueOffsets:this.readOffsets(t),data:this.readData(t)})}visitLargeUtf8(t,{length:n,nullCount:r}=this.nextFieldNode()){return Pt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),valueOffsets:this.readOffsets(t),data:this.readData(t)})}visitBinary(t,{length:n,nullCount:r}=this.nextFieldNode()){return Pt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),valueOffsets:this.readOffsets(t),data:this.readData(t)})}visitLargeBinary(t,{length:n,nullCount:r}=this.nextFieldNode()){return Pt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),valueOffsets:this.readOffsets(t),data:this.readData(t)})}visitFixedSizeBinary(t,{length:n,nullCount:r}=this.nextFieldNode()){return Pt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitDate(t,{length:n,nullCount:r}=this.nextFieldNode()){return Pt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitTimestamp(t,{length:n,nullCount:r}=this.nextFieldNode()){return Pt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitTime(t,{length:n,nullCount:r}=this.nextFieldNode()){return Pt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitDecimal(t,{length:n,nullCount:r}=this.nextFieldNode()){return Pt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitList(t,{length:n,nullCount:r}=this.nextFieldNode()){return Pt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),valueOffsets:this.readOffsets(t),child:this.visit(t.children[0])})}visitStruct(t,{length:n,nullCount:r}=this.nextFieldNode()){return Pt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),children:this.visitMany(t.children)})}visitUnion(t,{length:n,nullCount:r}=this.nextFieldNode()){return this.metadataVersion<on.V5&&this.readNullBitmap(t,r),t.mode===pn.Sparse?this.visitSparseUnion(t,{length:n,nullCount:r}):this.visitDenseUnion(t,{length:n,nullCount:r})}visitDenseUnion(t,{length:n,nullCount:r}=this.nextFieldNode()){return Pt({type:t,length:n,nullCount:r,typeIds:this.readTypeIds(t),valueOffsets:this.readOffsets(t),children:this.visitMany(t.children)})}visitSparseUnion(t,{length:n,nullCount:r}=this.nextFieldNode()){return Pt({type:t,length:n,nullCount:r,typeIds:this.readTypeIds(t),children:this.visitMany(t.children)})}visitDictionary(t,{length:n,nullCount:r}=this.nextFieldNode()){return Pt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t.indices),dictionary:this.readDictionary(t)})}visitInterval(t,{length:n,nullCount:r}=this.nextFieldNode()){return Pt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitDuration(t,{length:n,nullCount:r}=this.nextFieldNode()){return Pt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitFixedSizeList(t,{length:n,nullCount:r}=this.nextFieldNode()){return Pt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),child:this.visit(t.children[0])})}visitMap(t,{length:n,nullCount:r}=this.nextFieldNode()){return Pt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),valueOffsets:this.readOffsets(t),child:this.visit(t.children[0])})}nextFieldNode(){return this.nodes[++this.nodesIndex]}nextBufferRange(){return this.buffers[++this.buffersIndex]}readNullBitmap(t,n,r=this.nextBufferRange()){return n>0&&this.readData(t,r)||new Uint8Array(0)}readOffsets(t,n){return this.readData(t,n)}readTypeIds(t,n){return this.readData(t,n)}readData(t,{length:n,offset:r}=this.nextBufferRange()){return this.bytes.subarray(r,r+n)}readDictionary(t){return this.dictionaries.get(t.id)}}class b1t extends Xz{constructor(t,n,r,i,s){super(new Uint8Array(0),n,r,i,s),this.sources=t}readNullBitmap(t,n,{offset:r}=this.nextBufferRange()){return n<=0?new Uint8Array(0):Xv(this.sources[r])}readOffsets(t,{offset:n}=this.nextBufferRange()){return ve(Uint8Array,ve(t.OffsetArrayType,this.sources[n]))}readTypeIds(t,{offset:n}=this.nextBufferRange()){return ve(Uint8Array,ve(t.ArrayType,this.sources[n]))}readData(t,{offset:n}=this.nextBufferRange()){const{sources:r}=this;return lt.isTimestamp(t)||(lt.isInt(t)||lt.isTime(t))&&t.bitWidth===64||lt.isDuration(t)||lt.isDate(t)&&t.unit===nr.MILLISECOND?ve(Uint8Array,xr.convertArray(r[n])):lt.isDecimal(t)?ve(Uint8Array,Es.convertArray(r[n])):lt.isBinary(t)||lt.isLargeBinary(t)||lt.isFixedSizeBinary(t)?w1t(r[n]):lt.isBool(t)?Xv(r[n]):lt.isUtf8(t)||lt.isLargeUtf8(t)?dA(r[n].join("")):ve(Uint8Array,ve(t.ArrayType,r[n].map(i=>+i)))}}function w1t(e){const t=e.join(""),n=new Uint8Array(t.length/2);for(let r=0;r<t.length;r+=2)n[r>>1]=Number.parseInt(t.slice(r,r+2),16);return n}class mt extends Ut{compareSchemas(t,n){return t===n||n instanceof t.constructor&&this.compareManyFields(t.fields,n.fields)}compareManyFields(t,n){return t===n||Array.isArray(t)&&Array.isArray(n)&&t.length===n.length&&t.every((r,i)=>this.compareFields(r,n[i]))}compareFields(t,n){return t===n||n instanceof t.constructor&&t.name===n.name&&t.nullable===n.nullable&&this.visit(t.type,n.type)}}function wr(e,t){return t instanceof e.constructor}function su(e,t){return e===t||wr(e,t)}function fa(e,t){return e===t||wr(e,t)&&e.bitWidth===t.bitWidth&&e.isSigned===t.isSigned}function Lw(e,t){return e===t||wr(e,t)&&e.precision===t.precision}function _1t(e,t){return e===t||wr(e,t)&&e.byteWidth===t.byteWidth}function TA(e,t){return e===t||wr(e,t)&&e.unit===t.unit}function hm(e,t){return e===t||wr(e,t)&&e.unit===t.unit&&e.timezone===t.timezone}function pm(e,t){return e===t||wr(e,t)&&e.unit===t.unit&&e.bitWidth===t.bitWidth}function S1t(e,t){return e===t||wr(e,t)&&e.children.length===t.children.length&&wc.compareManyFields(e.children,t.children)}function x1t(e,t){return e===t||wr(e,t)&&e.children.length===t.children.length&&wc.compareManyFields(e.children,t.children)}function AA(e,t){return e===t||wr(e,t)&&e.mode===t.mode&&e.typeIds.every((n,r)=>n===t.typeIds[r])&&wc.compareManyFields(e.children,t.children)}function I1t(e,t){return e===t||wr(e,t)&&e.id===t.id&&e.isOrdered===t.isOrdered&&wc.visit(e.indices,t.indices)&&wc.visit(e.dictionary,t.dictionary)}function MA(e,t){return e===t||wr(e,t)&&e.unit===t.unit}function ym(e,t){return e===t||wr(e,t)&&e.unit===t.unit}function E1t(e,t){return e===t||wr(e,t)&&e.listSize===t.listSize&&e.children.length===t.children.length&&wc.compareManyFields(e.children,t.children)}function T1t(e,t){return e===t||wr(e,t)&&e.keysSorted===t.keysSorted&&e.children.length===t.children.length&&wc.compareManyFields(e.children,t.children)}mt.prototype.visitNull=su;mt.prototype.visitBool=su;mt.prototype.visitInt=fa;mt.prototype.visitInt8=fa;mt.prototype.visitInt16=fa;mt.prototype.visitInt32=fa;mt.prototype.visitInt64=fa;mt.prototype.visitUint8=fa;mt.prototype.visitUint16=fa;mt.prototype.visitUint32=fa;mt.prototype.visitUint64=fa;mt.prototype.visitFloat=Lw;mt.prototype.visitFloat16=Lw;mt.prototype.visitFloat32=Lw;mt.prototype.visitFloat64=Lw;mt.prototype.visitUtf8=su;mt.prototype.visitLargeUtf8=su;mt.prototype.visitBinary=su;mt.prototype.visitLargeBinary=su;mt.prototype.visitFixedSizeBinary=_1t;mt.prototype.visitDate=TA;mt.prototype.visitDateDay=TA;mt.prototype.visitDateMillisecond=TA;mt.prototype.visitTimestamp=hm;mt.prototype.visitTimestampSecond=hm;mt.prototype.visitTimestampMillisecond=hm;mt.prototype.visitTimestampMicrosecond=hm;mt.prototype.visitTimestampNanosecond=hm;mt.prototype.visitTime=pm;mt.prototype.visitTimeSecond=pm;mt.prototype.visitTimeMillisecond=pm;mt.prototype.visitTimeMicrosecond=pm;mt.prototype.visitTimeNanosecond=pm;mt.prototype.visitDecimal=su;mt.prototype.visitList=S1t;mt.prototype.visitStruct=x1t;mt.prototype.visitUnion=AA;mt.prototype.visitDenseUnion=AA;mt.prototype.visitSparseUnion=AA;mt.prototype.visitDictionary=I1t;mt.prototype.visitInterval=MA;mt.prototype.visitIntervalDayTime=MA;mt.prototype.visitIntervalYearMonth=MA;mt.prototype.visitDuration=ym;mt.prototype.visitDurationSecond=ym;mt.prototype.visitDurationMillisecond=ym;mt.prototype.visitDurationMicrosecond=ym;mt.prototype.visitDurationNanosecond=ym;mt.prototype.visitFixedSizeList=E1t;mt.prototype.visitMap=T1t;const wc=new mt;function MI(e,t){return wc.compareSchemas(e,t)}function M2(e,t){return A1t(e,t.map(n=>n.data.concat()))}function A1t(e,t){const n=[...e.fields],r=[],i={numBatches:t.reduce((f,d)=>Math.max(f,d.length),0)};let s=0,o=0,a=-1;const c=t.length;let l,u=[];for(;i.numBatches-- >0;){for(o=Number.POSITIVE_INFINITY,a=-1;++a<c;)u[a]=l=t[a].shift(),o=Math.min(o,l?l.length:o);Number.isFinite(o)&&(u=M1t(n,o,u,t,i),o>0&&(r[s++]=Pt({type:new fr(n),length:o,nullCount:0,children:u.slice()})))}return[e=e.assign(n),r.map(f=>new Tr(e,f))]}function M1t(e,t,n,r,i){var s;const o=(t+63&-64)>>3;for(let a=-1,c=r.length;++a<c;){const l=n[a],u=l==null?void 0:l.length;if(u>=t)u===t?n[a]=l:(n[a]=l.slice(0,t),i.numBatches=Math.max(i.numBatches,r[a].unshift(l.slice(t,u-t))));else{const f=e[a];e[a]=f.clone({nullable:!0}),n[a]=(s=l==null?void 0:l._changeLengthAndBackfillNullBitmap(t))!==null&&s!==void 0?s:Pt({type:f.type,length:t,nullCount:t,nullBitmap:new Uint8Array(o)})}}return n}var Qz;class Kn{constructor(...t){var n,r;if(t.length===0)return this.batches=[],this.schema=new pe([]),this._offsets=[0],this;let i,s;t[0]instanceof pe&&(i=t.shift()),t.at(-1)instanceof Uint32Array&&(s=t.pop());const o=c=>{if(c){if(c instanceof Tr)return[c];if(c instanceof Kn)return c.batches;if(c instanceof me){if(c.type instanceof fr)return[new Tr(new pe(c.type.children),c)]}else{if(Array.isArray(c))return c.flatMap(l=>o(l));if(typeof c[Symbol.iterator]=="function")return[...c].flatMap(l=>o(l));if(typeof c=="object"){const l=Object.keys(c),u=l.map(h=>new he([c[h]])),f=i??new pe(l.map((h,p)=>new Re(String(h),u[p].type,u[p].nullable))),[,d]=M2(f,u);return d.length===0?[new Tr(c)]:d}}}return[]},a=t.flatMap(c=>o(c));if(i=(r=i??((n=a[0])===null||n===void 0?void 0:n.schema))!==null&&r!==void 0?r:new pe([]),!(i instanceof pe))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const c of a){if(!(c instanceof Tr))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!MI(i,c.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=i,this.batches=a,this._offsets=s??Pz(this.data)}get data(){return this.batches.map(({data:t})=>t)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((t,n)=>t+n.length,0)}get nullCount(){return this._nullCount===-1&&(this._nullCount=Uz(this.data)),this._nullCount}isValid(t){return!1}get(t){return null}at(t){return this.get(bA(t,this.numRows))}set(t,n){}indexOf(t,n){return-1}[Symbol.iterator](){return this.batches.length>0?xA.visit(new he(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(`,
  `)}
]`}concat(...t){const n=this.schema,r=this.data.concat(t.flatMap(({data:i})=>i));return new Kn(n,r.map(i=>new Tr(n,i)))}slice(t,n){const r=this.schema;[t,n]=Bz({length:this.numRows},t,n);const i=zz(this.data,this._offsets,t,n);return new Kn(r,i.map(s=>new Tr(r,s)))}getChild(t){return this.getChildAt(this.schema.fields.findIndex(n=>n.name===t))}getChildAt(t){if(t>-1&&t<this.schema.fields.length){const n=this.data.map(r=>r.children[t]);if(n.length===0){const{type:r}=this.schema.fields[t],i=Pt({type:r,length:0,nullCount:0});n.push(i._changeLengthAndBackfillNullBitmap(this.numRows))}return new he(n)}return null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=[...this.batches];if(t>-1&&t<this.numCols){n||(n=new he([Pt({type:new vc,length:this.numRows})]));const s=r.fields.slice(),o=s[t].clone({type:n.type}),a=this.schema.fields.map((c,l)=>this.getChildAt(l));[s[t],a[t]]=[o,n],[r,i]=M2(r,a)}return new Kn(r,i)}select(t){const n=this.schema.fields.reduce((r,i,s)=>r.set(i.name,s),new Map);return this.selectAt(t.map(r=>n.get(r)).filter(r=>r>-1))}selectAt(t){const n=this.schema.selectAt(t),r=this.batches.map(i=>i.selectAt(t));return new Kn(n,r)}assign(t){const n=this.schema.fields,[r,i]=t.schema.fields.reduce((a,c,l)=>{const[u,f]=a,d=n.findIndex(h=>h.name===c.name);return~d?f[d]=l:u.push(l),a},[[],[]]),s=this.schema.assign(t.schema),o=[...n.map((a,c)=>[c,i[c]]).map(([a,c])=>c===void 0?this.getChildAt(a):t.getChildAt(c)),...r.map(a=>t.getChildAt(a))].filter(Boolean);return new Kn(...M2(s,o))}}Qz=Symbol.toStringTag;Kn[Qz]=(e=>(e.schema=null,e.batches=[],e._offsets=new Uint32Array([0]),e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,e.isValid=Qv(SA),e.get=Qv(Ur.getVisitFn(k.Struct)),e.set=jz(Li.getVisitFn(k.Struct)),e.indexOf=Vz(Kv.getVisitFn(k.Struct)),"Table"))(Kn.prototype);var Kz;let Tr=class qh{constructor(...t){switch(t.length){case 2:{if([this.schema]=t,!(this.schema instanceof pe))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=Pt({nullCount:0,type:new fr(this.schema.fields),children:this.schema.fields.map(n=>Pt({type:n.type,nullCount:0}))})]=t,!(this.data instanceof me))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=cD(this.schema,this.data.children);break}case 1:{const[n]=t,{fields:r,children:i,length:s}=Object.keys(n).reduce((c,l,u)=>(c.children[u]=n[l],c.length=Math.max(c.length,n[l].length),c.fields[u]=Re.new({name:l,type:n[l].type,nullable:!0}),c),{length:0,fields:new Array,children:new Array}),o=new pe(r),a=Pt({type:new fr(r),length:s,children:i,nullCount:0});[this.schema,this.data]=cD(o,a.children,s);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=Zz(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(t){return this.data.getValid(t)}get(t){return Ur.visit(this.data,t)}at(t){return this.get(bA(t,this.numRows))}set(t,n){return Li.visit(this.data,t,n)}indexOf(t,n){return Kv.visit(this.data,t,n)}[Symbol.iterator](){return xA.visit(new he([this.data]))}toArray(){return[...this]}concat(...t){return new Kn(this.schema,[this,...t])}slice(t,n){const[r]=new he([this.data]).slice(t,n).data;return new qh(this.schema,r)}getChild(t){var n;return this.getChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.schema.fields.length?new he([this.data.children[t]]):null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=this.data;if(t>-1&&t<this.numCols){n||(n=new he([Pt({type:new vc,length:this.numRows})]));const s=r.fields.slice(),o=i.children.slice(),a=s[t].clone({type:n.type});[s[t],o[t]]=[a,n.data[0]],r=new pe(s,new Map(this.schema.metadata)),i=Pt({type:new fr(s),children:o})}return new qh(r,i)}select(t){const n=this.schema.select(t),r=new fr(n.fields),i=[];for(const s of t){const o=this.schema.fields.findIndex(a=>a.name===s);~o&&(i[o]=this.data.children[o])}return new qh(n,Pt({type:r,length:this.numRows,children:i}))}selectAt(t){const n=this.schema.selectAt(t),r=t.map(s=>this.data.children[s]).filter(Boolean),i=Pt({type:new fr(n.fields),length:this.numRows,children:r});return new qh(n,i)}};Kz=Symbol.toStringTag;Tr[Kz]=(e=>(e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(Tr.prototype);function cD(e,t,n=t.reduce((r,i)=>Math.max(r,i.length),0)){var r;const i=[...e.fields],s=[...t],o=(n+63&-64)>>3;for(const[a,c]of e.fields.entries()){const l=t[a];(!l||l.length!==n)&&(i[a]=c.clone({nullable:!0}),s[a]=(r=l==null?void 0:l._changeLengthAndBackfillNullBitmap(n))!==null&&r!==void 0?r:Pt({type:c.type,length:n,nullCount:n,nullBitmap:new Uint8Array(o)}))}return[e.assign(i),Pt({type:new fr(i),length:n,children:s})]}function Zz(e,t,n=new Map){var r,i;if(((r=e==null?void 0:e.length)!==null&&r!==void 0?r:0)>0&&(e==null?void 0:e.length)===(t==null?void 0:t.length))for(let s=-1,o=e.length;++s<o;){const{type:a}=e[s],c=t[s];for(const l of[c,...((i=c==null?void 0:c.dictionary)===null||i===void 0?void 0:i.data)||[]])Zz(a.children,l==null?void 0:l.children,n);if(lt.isDictionary(a)){const{id:l}=a;if(!n.has(l))c!=null&&c.dictionary&&n.set(l,c.dictionary);else if(n.get(l)!==c.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}}return n}class NA extends Tr{constructor(t){const n=t.fields.map(i=>Pt({type:i.type})),r=Pt({type:new fr(t.fields),nullCount:0,children:n});super(t,r)}}let wa=class ws{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMessage(t,n){return(n||new ws).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMessage(t,n){return t.setPosition(t.position()+ye),(n||new ws).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):on.V1}headerType(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):re.NONE}header(t){const n=this.bb.__offset(this.bb_pos,8);return n?this.bb.__union(t,this.bb_pos+n):null}bodyLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new vn).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startMessage(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,on.V1)}static addHeaderType(t,n){t.addFieldInt8(1,n,re.NONE)}static addHeader(t,n){t.addFieldOffset(2,n,0)}static addBodyLength(t,n){t.addFieldInt64(3,n,BigInt("0"))}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endMessage(t){return t.endObject()}static finishMessageBuffer(t,n){t.finish(n)}static finishSizePrefixedMessageBuffer(t,n){t.finish(n,void 0,!0)}static createMessage(t,n,r,i,s,o){return ws.startMessage(t),ws.addVersion(t,n),ws.addHeaderType(t,r),ws.addHeader(t,i),ws.addBodyLength(t,s),ws.addCustomMetadata(t,o),ws.endMessage(t)}};class N1t extends Ut{visit(t,n){return t==null||n==null?void 0:super.visit(t,n)}visitNull(t,n){return J6.startNull(n),J6.endNull(n)}visitInt(t,n){return Yr.startInt(n),Yr.addBitWidth(n,t.bitWidth),Yr.addIsSigned(n,t.isSigned),Yr.endInt(n)}visitFloat(t,n){return Os.startFloatingPoint(n),Os.addPrecision(n,t.precision),Os.endFloatingPoint(n)}visitBinary(t,n){return H6.startBinary(n),H6.endBinary(n)}visitLargeBinary(t,n){return Q6.startLargeBinary(n),Q6.endLargeBinary(n)}visitBool(t,n){return X6.startBool(n),X6.endBool(n)}visitUtf8(t,n){return tD.startUtf8(n),tD.endUtf8(n)}visitLargeUtf8(t,n){return K6.startLargeUtf8(n),K6.endLargeUtf8(n)}visitDecimal(t,n){return Cu.startDecimal(n),Cu.addScale(n,t.scale),Cu.addPrecision(n,t.precision),Cu.addBitWidth(n,t.bitWidth),Cu.endDecimal(n)}visitDate(t,n){return eg.startDate(n),eg.addUnit(n,t.unit),eg.endDate(n)}visitTime(t,n){return bi.startTime(n),bi.addUnit(n,t.unit),bi.addBitWidth(n,t.bitWidth),bi.endTime(n)}visitTimestamp(t,n){const r=t.timezone&&n.createString(t.timezone)||void 0;return wi.startTimestamp(n),wi.addUnit(n,t.unit),r!==void 0&&wi.addTimezone(n,r),wi.endTimestamp(n)}visitInterval(t,n){return Rs.startInterval(n),Rs.addUnit(n,t.unit),Rs.endInterval(n)}visitDuration(t,n){return ng.startDuration(n),ng.addUnit(n,t.unit),ng.endDuration(n)}visitList(t,n){return Z6.startList(n),Z6.endList(n)}visitStruct(t,n){return bl.startStruct_(n),bl.endStruct_(n)}visitUnion(t,n){Er.startTypeIdsVector(n,t.typeIds.length);const r=Er.createTypeIdsVector(n,t.typeIds);return Er.startUnion(n),Er.addMode(n,t.mode),Er.addTypeIds(n,r),Er.endUnion(n)}visitDictionary(t,n){const r=this.visit(t.indices,n);return $o.startDictionaryEncoding(n),$o.addId(n,BigInt(t.id)),$o.addIsOrdered(n,t.isOrdered),r!==void 0&&$o.addIndexType(n,r),$o.endDictionaryEncoding(n)}visitFixedSizeBinary(t,n){return rg.startFixedSizeBinary(n),rg.addByteWidth(n,t.byteWidth),rg.endFixedSizeBinary(n)}visitFixedSizeList(t,n){return ig.startFixedSizeList(n),ig.addListSize(n,t.listSize),ig.endFixedSizeList(n)}visitMap(t,n){return sg.startMap(n),sg.addKeysSorted(n,t.keysSorted),sg.endMap(n)}}const N2=new N1t;function $1t(e,t=new Map){return new pe(D1t(e,t),cg(e.metadata),t)}function Jz(e){return new ri(e.count,tj(e.columns),ej(e.columns))}function k1t(e){return new Ks(Jz(e.data),e.id,e.isDelta)}function D1t(e,t){return(e.fields||[]).filter(Boolean).map(n=>Re.fromJSON(n,t))}function lD(e,t){return(e.children||[]).filter(Boolean).map(n=>Re.fromJSON(n,t))}function tj(e){return(e||[]).reduce((t,n)=>[...t,new _c(n.count,O1t(n.VALIDITY)),...tj(n.children)],[])}function ej(e,t=[]){for(let n=-1,r=(e||[]).length;++n<r;){const i=e[n];i.VALIDITY&&t.push(new Cs(t.length,i.VALIDITY.length)),i.TYPE_ID&&t.push(new Cs(t.length,i.TYPE_ID.length)),i.OFFSET&&t.push(new Cs(t.length,i.OFFSET.length)),i.DATA&&t.push(new Cs(t.length,i.DATA.length)),t=ej(i.children,t)}return t}function O1t(e){return(e||[]).reduce((t,n)=>t+ +(n===0),0)}function R1t(e,t){let n,r,i,s,o,a;return!t||!(s=e.dictionary)?(o=fD(e,lD(e,t)),i=new Re(e.name,o,e.nullable,cg(e.metadata))):t.has(n=s.id)?(r=(r=s.indexType)?uD(r):new yy,a=new bd(t.get(n),r,n,s.isOrdered),i=new Re(e.name,a,e.nullable,cg(e.metadata))):(r=(r=s.indexType)?uD(r):new yy,t.set(n,o=fD(e,lD(e,t))),a=new bd(o,r,n,s.isOrdered),i=new Re(e.name,a,e.nullable,cg(e.metadata))),i||null}function cg(e=[]){return new Map(e.map(({key:t,value:n})=>[t,n]))}function uD(e){return new Kl(e.isSigned,e.bitWidth)}function fD(e,t){const n=e.type.name;switch(n){case"NONE":return new vc;case"null":return new vc;case"binary":return new Dv;case"largebinary":return new Ov;case"utf8":return new Rv;case"largeutf8":return new Fv;case"bool":return new Lv;case"list":return new Vv((t||[])[0]);case"struct":return new fr(t||[]);case"struct_":return new fr(t||[])}switch(n){case"int":{const r=e.type;return new Kl(r.isSigned,r.bitWidth)}case"floatingpoint":{const r=e.type;return new kv(rn[r.precision])}case"decimal":{const r=e.type;return new Bv(r.scale,r.precision,r.bitWidth)}case"date":{const r=e.type;return new Cv(nr[r.unit])}case"time":{const r=e.type;return new Uv(at[r.unit],r.bitWidth)}case"timestamp":{const r=e.type;return new Pv(at[r.unit],r.timezone)}case"interval":{const r=e.type;return new zv(tr[r.unit])}case"duration":{const r=e.type;return new jv(at[r.unit])}case"union":{const r=e.type,[i,...s]=(r.mode+"").toLowerCase(),o=i.toUpperCase()+s.join("");return new Yv(pn[o],r.typeIds||[],t||[])}case"fixedsizebinary":{const r=e.type;return new qv(r.byteWidth)}case"fixedsizelist":{const r=e.type;return new Wv(r.listSize,(t||[])[0])}case"map":{const r=e.type;return new Gv((t||[])[0],r.keysSorted)}}throw new Error(`Unrecognized type: "${n}"`)}var F1t=g9,L1t=gd;class dr{static fromJSON(t,n){const r=new dr(0,on.V5,n);return r._createHeader=B1t(t,n),r}static decode(t){t=new L1t(Qt(t));const n=wa.getRootAsMessage(t),r=n.bodyLength(),i=n.version(),s=n.headerType(),o=new dr(r,i,s);return o._createHeader=C1t(n,s),o}static encode(t){const n=new F1t;let r=-1;return t.isSchema()?r=pe.encode(n,t.header()):t.isRecordBatch()?r=ri.encode(n,t.header()):t.isDictionaryBatch()&&(r=Ks.encode(n,t.header())),wa.startMessage(n),wa.addVersion(n,on.V5),wa.addHeader(n,r),wa.addHeaderType(n,t.headerType),wa.addBodyLength(n,BigInt(t.bodyLength)),wa.finishMessageBuffer(n,wa.endMessage(n)),n.asUint8Array()}static from(t,n=0){if(t instanceof pe)return new dr(0,on.V5,re.Schema,t);if(t instanceof ri)return new dr(n,on.V5,re.RecordBatch,t);if(t instanceof Ks)return new dr(n,on.V5,re.DictionaryBatch,t);throw new Error(`Unrecognized Message header: ${t}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===re.Schema}isRecordBatch(){return this.headerType===re.RecordBatch}isDictionaryBatch(){return this.headerType===re.DictionaryBatch}constructor(t,n,r,i){this._version=n,this._headerType=r,this.body=new Uint8Array(0),i&&(this._createHeader=()=>i),this._bodyLength=Ie(t)}}class ri{get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}constructor(t,n,r){this._nodes=n,this._buffers=r,this._length=Ie(t)}}class Ks{get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}constructor(t,n,r=!1){this._data=t,this._isDelta=r,this._id=Ie(n)}}class Cs{constructor(t,n){this.offset=Ie(t),this.length=Ie(n)}}class _c{constructor(t,n){this.length=Ie(t),this.nullCount=Ie(n)}}function B1t(e,t){return()=>{switch(t){case re.Schema:return pe.fromJSON(e);case re.RecordBatch:return ri.fromJSON(e);case re.DictionaryBatch:return Ks.fromJSON(e)}throw new Error(`Unrecognized Message type: { name: ${re[t]}, type: ${t} }`)}}function C1t(e,t){return()=>{switch(t){case re.Schema:return pe.decode(e.header(new Is),new Map,e.version());case re.RecordBatch:return ri.decode(e.header(new So),e.version());case re.DictionaryBatch:return Ks.decode(e.header(new Lu),e.version())}throw new Error(`Unrecognized Message type: { name: ${re[t]}, type: ${t} }`)}}Re.encode=X1t;Re.decode=G1t;Re.fromJSON=R1t;pe.encode=H1t;pe.decode=U1t;pe.fromJSON=$1t;ri.encode=Q1t;ri.decode=P1t;ri.fromJSON=Jz;Ks.encode=K1t;Ks.decode=z1t;Ks.fromJSON=k1t;_c.encode=Z1t;_c.decode=V1t;Cs.encode=J1t;Cs.decode=j1t;function U1t(e,t=new Map,n=on.V5){const r=W1t(e,t);return new pe(r,lg(e),t,n)}function P1t(e,t=on.V5){if(e.compression()!==null)throw new Error("Record batch compression not implemented");return new ri(e.length(),Y1t(e),q1t(e,t))}function z1t(e,t=on.V5){return new Ks(ri.decode(e.data(),t),e.id(),e.isDelta())}function j1t(e){return new Cs(e.offset(),e.length())}function V1t(e){return new _c(e.length(),e.nullCount())}function Y1t(e){const t=[];for(let n,r=-1,i=-1,s=e.nodesLength();++r<s;)(n=e.nodes(r))&&(t[++i]=_c.decode(n));return t}function q1t(e,t){const n=[];for(let r,i=-1,s=-1,o=e.buffersLength();++i<o;)(r=e.buffers(i))&&(t<on.V4&&(r.bb_pos+=8*(i+1)),n[++s]=Cs.decode(r));return n}function W1t(e,t){const n=[];for(let r,i=-1,s=-1,o=e.fieldsLength();++i<o;)(r=e.fields(i))&&(n[++s]=Re.decode(r,t));return n}function dD(e,t){const n=[];for(let r,i=-1,s=-1,o=e.childrenLength();++i<o;)(r=e.children(i))&&(n[++s]=Re.decode(r,t));return n}function G1t(e,t){let n,r,i,s,o,a;return!t||!(a=e.dictionary())?(i=pD(e,dD(e,t)),r=new Re(e.name(),i,e.nullable(),lg(e))):t.has(n=Ie(a.id()))?(s=(s=a.indexType())?hD(s):new yy,o=new bd(t.get(n),s,n,a.isOrdered()),r=new Re(e.name(),o,e.nullable(),lg(e))):(s=(s=a.indexType())?hD(s):new yy,t.set(n,i=pD(e,dD(e,t))),o=new bd(i,s,n,a.isOrdered()),r=new Re(e.name(),o,e.nullable(),lg(e))),r||null}function lg(e){const t=new Map;if(e)for(let n,r,i=-1,s=Math.trunc(e.customMetadataLength());++i<s;)(n=e.customMetadata(i))&&(r=n.key())!=null&&t.set(r,n.value());return t}function hD(e){return new Kl(e.isSigned(),e.bitWidth())}function pD(e,t){const n=e.typeType();switch(n){case Ne.NONE:return new vc;case Ne.Null:return new vc;case Ne.Binary:return new Dv;case Ne.LargeBinary:return new Ov;case Ne.Utf8:return new Rv;case Ne.LargeUtf8:return new Fv;case Ne.Bool:return new Lv;case Ne.List:return new Vv((t||[])[0]);case Ne.Struct_:return new fr(t||[])}switch(n){case Ne.Int:{const r=e.type(new Yr);return new Kl(r.isSigned(),r.bitWidth())}case Ne.FloatingPoint:{const r=e.type(new Os);return new kv(r.precision())}case Ne.Decimal:{const r=e.type(new Cu);return new Bv(r.scale(),r.precision(),r.bitWidth())}case Ne.Date:{const r=e.type(new eg);return new Cv(r.unit())}case Ne.Time:{const r=e.type(new bi);return new Uv(r.unit(),r.bitWidth())}case Ne.Timestamp:{const r=e.type(new wi);return new Pv(r.unit(),r.timezone())}case Ne.Interval:{const r=e.type(new Rs);return new zv(r.unit())}case Ne.Duration:{const r=e.type(new ng);return new jv(r.unit())}case Ne.Union:{const r=e.type(new Er);return new Yv(r.mode(),r.typeIdsArray()||[],t||[])}case Ne.FixedSizeBinary:{const r=e.type(new rg);return new qv(r.byteWidth())}case Ne.FixedSizeList:{const r=e.type(new ig);return new Wv(r.listSize(),(t||[])[0])}case Ne.Map:{const r=e.type(new sg);return new Gv((t||[])[0],r.keysSorted())}}throw new Error(`Unrecognized type: "${Ne[n]}" (${n})`)}function H1t(e,t){const n=t.fields.map(s=>Re.encode(e,s));Is.startFieldsVector(e,n.length);const r=Is.createFieldsVector(e,n),i=t.metadata&&t.metadata.size>0?Is.createCustomMetadataVector(e,[...t.metadata].map(([s,o])=>{const a=e.createString(`${s}`),c=e.createString(`${o}`);return vn.startKeyValue(e),vn.addKey(e,a),vn.addValue(e,c),vn.endKeyValue(e)})):-1;return Is.startSchema(e),Is.addFields(e,r),Is.addEndianness(e,tvt?vd.Little:vd.Big),i!==-1&&Is.addCustomMetadata(e,i),Is.endSchema(e)}function X1t(e,t){let n=-1,r=-1,i=-1;const s=t.type;let o=t.typeId;lt.isDictionary(s)?(o=s.dictionary.typeId,i=N2.visit(s,e),r=N2.visit(s.dictionary,e)):r=N2.visit(s,e);const a=(s.children||[]).map(u=>Re.encode(e,u)),c=pi.createChildrenVector(e,a),l=t.metadata&&t.metadata.size>0?pi.createCustomMetadataVector(e,[...t.metadata].map(([u,f])=>{const d=e.createString(`${u}`),h=e.createString(`${f}`);return vn.startKeyValue(e),vn.addKey(e,d),vn.addValue(e,h),vn.endKeyValue(e)})):-1;return t.name&&(n=e.createString(t.name)),pi.startField(e),pi.addType(e,r),pi.addTypeType(e,o),pi.addChildren(e,c),pi.addNullable(e,!!t.nullable),n!==-1&&pi.addName(e,n),i!==-1&&pi.addDictionary(e,i),l!==-1&&pi.addCustomMetadata(e,l),pi.endField(e)}function Q1t(e,t){const n=t.nodes||[],r=t.buffers||[];So.startNodesVector(e,n.length);for(const o of n.slice().reverse())_c.encode(e,o);const i=e.endVector();So.startBuffersVector(e,r.length);for(const o of r.slice().reverse())Cs.encode(e,o);const s=e.endVector();return So.startRecordBatch(e),So.addLength(e,BigInt(t.length)),So.addNodes(e,i),So.addBuffers(e,s),So.endRecordBatch(e)}function K1t(e,t){const n=ri.encode(e,t.data);return Lu.startDictionaryBatch(e),Lu.addId(e,BigInt(t.id)),Lu.addIsDelta(e,t.isDelta),Lu.addData(e,n),Lu.endDictionaryBatch(e)}function Z1t(e,t){return w9.createFieldNode(e,BigInt(t.length),BigInt(t.nullCount))}function J1t(e,t){return b9.createBuffer(e,BigInt(t.offset),BigInt(t.length))}const tvt=(()=>{const e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),new Int16Array(e)[0]===256})(),$A=e=>`Expected ${re[e]} Message in stream, but was null or length 0.`,kA=e=>`Header pointer of flatbuffer-encoded ${re[e]} Message is null or length 0.`,nj=(e,t)=>`Expected to read ${e} metadata bytes, but only read ${t}.`,rj=(e,t)=>`Expected to read ${e} bytes for message body, but only read ${t}.`;class ij{constructor(t){this.source=t instanceof Jv?t:new Jv(t)}[Symbol.iterator](){return this}next(){let t;return(t=this.readMetadataLength()).done||t.value===-1&&(t=this.readMetadataLength()).done||(t=this.readMetadata(t.value)).done?We:t}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}readMessage(t){let n;if((n=this.next()).done)return null;if(t!=null&&n.value.headerType!==t)throw new Error($A(t));return n.value}readMessageBody(t){if(t<=0)return new Uint8Array(0);const n=Qt(this.source.read(t));if(n.byteLength<t)throw new Error(rj(t,n.byteLength));return n.byteOffset%8===0&&n.byteOffset+n.byteLength<=n.buffer.byteLength?n:n.slice()}readSchema(t=!1){const n=re.Schema,r=this.readMessage(n),i=r==null?void 0:r.header();if(t&&!i)throw new Error(kA(n));return i}readMetadataLength(){const t=this.source.read(Bw),n=t&&new gd(t),r=(n==null?void 0:n.readInt32(0))||0;return{done:r===0,value:r}}readMetadata(t){const n=this.source.read(t);if(!n)return We;if(n.byteLength<t)throw new Error(nj(t,n.byteLength));return{done:!1,value:dr.decode(n)}}}class evt{constructor(t,n){this.source=t instanceof wd?t:f9(t)?new tb(t,n):new wd(t)}[Symbol.asyncIterator](){return this}next(){return H(this,void 0,void 0,function*(){let t;return(t=yield this.readMetadataLength()).done||t.value===-1&&(t=yield this.readMetadataLength()).done||(t=yield this.readMetadata(t.value)).done?We:t})}throw(t){return H(this,void 0,void 0,function*(){return yield this.source.throw(t)})}return(t){return H(this,void 0,void 0,function*(){return yield this.source.return(t)})}readMessage(t){return H(this,void 0,void 0,function*(){let n;if((n=yield this.next()).done)return null;if(t!=null&&n.value.headerType!==t)throw new Error($A(t));return n.value})}readMessageBody(t){return H(this,void 0,void 0,function*(){if(t<=0)return new Uint8Array(0);const n=Qt(yield this.source.read(t));if(n.byteLength<t)throw new Error(rj(t,n.byteLength));return n.byteOffset%8===0&&n.byteOffset+n.byteLength<=n.buffer.byteLength?n:n.slice()})}readSchema(){return H(this,arguments,void 0,function*(t=!1){const n=re.Schema,r=yield this.readMessage(n),i=r==null?void 0:r.header();if(t&&!i)throw new Error(kA(n));return i})}readMetadataLength(){return H(this,void 0,void 0,function*(){const t=yield this.source.read(Bw),n=t&&new gd(t),r=(n==null?void 0:n.readInt32(0))||0;return{done:r===0,value:r}})}readMetadata(t){return H(this,void 0,void 0,function*(){const n=yield this.source.read(t);if(!n)return We;if(n.byteLength<t)throw new Error(nj(t,n.byteLength));return{done:!1,value:dr.decode(n)}})}}class nvt extends ij{constructor(t){super(new Uint8Array(0)),this._schema=!1,this._body=[],this._batchIndex=0,this._dictionaryIndex=0,this._json=t instanceof oD?t:new oD(t)}next(){const{_json:t}=this;if(!this._schema)return this._schema=!0,{done:!1,value:dr.fromJSON(t.schema,re.Schema)};if(this._dictionaryIndex<t.dictionaries.length){const n=t.dictionaries[this._dictionaryIndex++];return this._body=n.data.columns,{done:!1,value:dr.fromJSON(n,re.DictionaryBatch)}}if(this._batchIndex<t.batches.length){const n=t.batches[this._batchIndex++];return this._body=n.columns,{done:!1,value:dr.fromJSON(n,re.RecordBatch)}}return this._body=[],We}readMessageBody(t){return n(this._body);function n(r){return(r||[]).reduce((i,s)=>[...i,...s.VALIDITY&&[s.VALIDITY]||[],...s.TYPE_ID&&[s.TYPE_ID]||[],...s.OFFSET&&[s.OFFSET]||[],...s.DATA&&[s.DATA]||[],...n(s.children)],[])}}readMessage(t){let n;if((n=this.next()).done)return null;if(t!=null&&n.value.headerType!==t)throw new Error($A(t));return n.value}readSchema(){const t=re.Schema,n=this.readMessage(t),r=n==null?void 0:n.header();if(!n||!r)throw new Error(kA(t));return r}}const Bw=4,NI="ARROW1",gy=new Uint8Array(NI.length);for(let e=0;e<NI.length;e+=1)gy[e]=NI.codePointAt(e);function DA(e,t=0){for(let n=-1,r=gy.length;++n<r;)if(gy[n]!==e[t+n])return!1;return!0}const mm=gy.length,sj=mm+Bw,rvt=mm*2+Bw;class $i extends IA{constructor(t){super(),this._impl=t}get closed(){return this._impl.closed}get schema(){return this._impl.schema}get autoDestroy(){return this._impl.autoDestroy}get dictionaries(){return this._impl.dictionaries}get numDictionaries(){return this._impl.numDictionaries}get numRecordBatches(){return this._impl.numRecordBatches}get footer(){return this._impl.isFile()?this._impl.footer:null}isSync(){return this._impl.isSync()}isAsync(){return this._impl.isAsync()}isFile(){return this._impl.isFile()}isStream(){return this._impl.isStream()}next(){return this._impl.next()}throw(t){return this._impl.throw(t)}return(t){return this._impl.return(t)}cancel(){return this._impl.cancel()}reset(t){return this._impl.reset(t),this._DOMStream=void 0,this._nodeStream=void 0,this}open(t){const n=this._impl.open(t);return Ql(n)?n.then(()=>this):this}readRecordBatch(t){return this._impl.isFile()?this._impl.readRecordBatch(t):null}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}toDOMStream(){return mi.toDOMStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this})}toNodeStream(){return mi.toNodeStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this},{objectMode:!0})}static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,n){throw new Error('"throughDOM" not available in this environment')}static from(t){return t instanceof $i?t:bI(t)?avt(t):f9(t)?uvt(t):Ql(t)?H(this,void 0,void 0,function*(){return yield $i.from(yield t)}):d9(t)||hA(t)||h9(t)||Yd(t)?lvt(new wd(t)):cvt(new Jv(t))}static readAll(t){return t instanceof $i?t.isSync()?yD(t):mD(t):bI(t)||ArrayBuffer.isView(t)||dm(t)||u9(t)?yD(t):mD(t)}}class eb extends $i{constructor(t){super(t),this._impl=t}readAll(){return[...this]}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return hn(this,arguments,function*(){yield J(yield*Xa(Kr(this[Symbol.iterator]())))})}}class nb extends $i{constructor(t){super(t),this._impl=t}readAll(){return H(this,void 0,void 0,function*(){var t,n,r,i;const s=new Array;try{for(var o=!0,a=Kr(this),c;c=yield a.next(),t=c.done,!t;o=!0){i=c.value,o=!1;const l=i;s.push(l)}}catch(l){n={error:l}}finally{try{!o&&!t&&(r=a.return)&&(yield r.call(a))}finally{if(n)throw n.error}}return s})}[Symbol.iterator](){throw new Error("AsyncRecordBatchStreamReader is not Iterable")}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}}class oj extends eb{constructor(t){super(t),this._impl=t}}class ivt extends nb{constructor(t){super(t),this._impl=t}}class aj{get numDictionaries(){return this._dictionaryIndex}get numRecordBatches(){return this._recordBatchIndex}constructor(t=new Map){this.closed=!1,this.autoDestroy=!0,this._dictionaryIndex=0,this._recordBatchIndex=0,this.dictionaries=t}isSync(){return!1}isAsync(){return!1}isFile(){return!1}isStream(){return!1}reset(t){return this._dictionaryIndex=0,this._recordBatchIndex=0,this.schema=t,this.dictionaries=new Map,this}_loadRecordBatch(t,n){const r=this._loadVectors(t,n,this.schema.fields),i=Pt({type:new fr(this.schema.fields),length:t.length,children:r});return new Tr(this.schema,i)}_loadDictionaryBatch(t,n){const{id:r,isDelta:i}=t,{dictionaries:s,schema:o}=this,a=s.get(r),c=o.dictionaries.get(r),l=this._loadVectors(t.data,n,[c]);return(a&&i?a.concat(new he(l)):new he(l)).memoize()}_loadVectors(t,n,r){return new Xz(n,t.nodes,t.buffers,this.dictionaries,this.schema.metadataVersion).visitMany(r)}}class rb extends aj{constructor(t,n){super(n),this._reader=bI(t)?new nvt(this._handle=t):new ij(this._handle=t)}isSync(){return!0}isStream(){return!0}[Symbol.iterator](){return this}cancel(){!this.closed&&(this.closed=!0)&&(this.reset()._reader.return(),this._reader=null,this.dictionaries=null)}open(t){return this.closed||(this.autoDestroy=lj(this,t),this.schema||(this.schema=this._reader.readSchema())||this.cancel()),this}throw(t){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.throw(t):We}return(t){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.return(t):We}next(){if(this.closed)return We;let t;const{_reader:n}=this;for(;t=this._readNextMessageAndValidate();)if(t.isSchema())this.reset(t.header());else if(t.isRecordBatch()){this._recordBatchIndex++;const r=t.header(),i=n.readMessageBody(t.bodyLength);return{done:!1,value:this._loadRecordBatch(r,i)}}else if(t.isDictionaryBatch()){this._dictionaryIndex++;const r=t.header(),i=n.readMessageBody(t.bodyLength),s=this._loadDictionaryBatch(r,i);this.dictionaries.set(r.id,s)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new NA(this.schema)}):this.return()}_readNextMessageAndValidate(t){return this._reader.readMessage(t)}}class ib extends aj{constructor(t,n){super(n),this._reader=new evt(this._handle=t)}isAsync(){return!0}isStream(){return!0}[Symbol.asyncIterator](){return this}cancel(){return H(this,void 0,void 0,function*(){!this.closed&&(this.closed=!0)&&(yield this.reset()._reader.return(),this._reader=null,this.dictionaries=null)})}open(t){return H(this,void 0,void 0,function*(){return this.closed||(this.autoDestroy=lj(this,t),this.schema||(this.schema=yield this._reader.readSchema())||(yield this.cancel())),this})}throw(t){return H(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.throw(t):We})}return(t){return H(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.return(t):We})}next(){return H(this,void 0,void 0,function*(){if(this.closed)return We;let t;const{_reader:n}=this;for(;t=yield this._readNextMessageAndValidate();)if(t.isSchema())yield this.reset(t.header());else if(t.isRecordBatch()){this._recordBatchIndex++;const r=t.header(),i=yield n.readMessageBody(t.bodyLength);return{done:!1,value:this._loadRecordBatch(r,i)}}else if(t.isDictionaryBatch()){this._dictionaryIndex++;const r=t.header(),i=yield n.readMessageBody(t.bodyLength),s=this._loadDictionaryBatch(r,i);this.dictionaries.set(r.id,s)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new NA(this.schema)}):yield this.return()})}_readNextMessageAndValidate(t){return H(this,void 0,void 0,function*(){return yield this._reader.readMessage(t)})}}class cj extends rb{get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}constructor(t,n){super(t instanceof aD?t:new aD(t),n)}isSync(){return!0}isFile(){return!0}open(t){if(!this.closed&&!this._footer){this.schema=(this._footer=this._readFooter()).schema;for(const n of this._footer.dictionaryBatches())n&&this._readDictionaryBatch(this._dictionaryIndex++)}return super.open(t)}readRecordBatch(t){var n;if(this.closed)return null;this._footer||this.open();const r=(n=this._footer)===null||n===void 0?void 0:n.getRecordBatch(t);if(r&&this._handle.seek(r.offset)){const i=this._reader.readMessage(re.RecordBatch);if(i!=null&&i.isRecordBatch()){const s=i.header(),o=this._reader.readMessageBody(i.bodyLength);return this._loadRecordBatch(s,o)}}return null}_readDictionaryBatch(t){var n;const r=(n=this._footer)===null||n===void 0?void 0:n.getDictionaryBatch(t);if(r&&this._handle.seek(r.offset)){const i=this._reader.readMessage(re.DictionaryBatch);if(i!=null&&i.isDictionaryBatch()){const s=i.header(),o=this._reader.readMessageBody(i.bodyLength),a=this._loadDictionaryBatch(s,o);this.dictionaries.set(s.id,a)}}}_readFooter(){const{_handle:t}=this,n=t.size-sj,r=t.readInt32(n),i=t.readAt(n-r,r);return my.decode(i)}_readNextMessageAndValidate(t){var n;if(this._footer||this.open(),this._footer&&this._recordBatchIndex<this.numRecordBatches){const r=(n=this._footer)===null||n===void 0?void 0:n.getRecordBatch(this._recordBatchIndex);if(r&&this._handle.seek(r.offset))return this._reader.readMessage(t)}return null}}class svt extends ib{get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}constructor(t,...n){const r=typeof n[0]!="number"?n.shift():void 0,i=n[0]instanceof Map?n.shift():void 0;super(t instanceof tb?t:new tb(t,r),i)}isFile(){return!0}isAsync(){return!0}open(t){const n=Object.create(null,{open:{get:()=>super.open}});return H(this,void 0,void 0,function*(){if(!this.closed&&!this._footer){this.schema=(this._footer=yield this._readFooter()).schema;for(const r of this._footer.dictionaryBatches())r&&(yield this._readDictionaryBatch(this._dictionaryIndex++))}return yield n.open.call(this,t)})}readRecordBatch(t){return H(this,void 0,void 0,function*(){var n;if(this.closed)return null;this._footer||(yield this.open());const r=(n=this._footer)===null||n===void 0?void 0:n.getRecordBatch(t);if(r&&(yield this._handle.seek(r.offset))){const i=yield this._reader.readMessage(re.RecordBatch);if(i!=null&&i.isRecordBatch()){const s=i.header(),o=yield this._reader.readMessageBody(i.bodyLength);return this._loadRecordBatch(s,o)}}return null})}_readDictionaryBatch(t){return H(this,void 0,void 0,function*(){var n;const r=(n=this._footer)===null||n===void 0?void 0:n.getDictionaryBatch(t);if(r&&(yield this._handle.seek(r.offset))){const i=yield this._reader.readMessage(re.DictionaryBatch);if(i!=null&&i.isDictionaryBatch()){const s=i.header(),o=yield this._reader.readMessageBody(i.bodyLength),a=this._loadDictionaryBatch(s,o);this.dictionaries.set(s.id,a)}}})}_readFooter(){return H(this,void 0,void 0,function*(){const{_handle:t}=this;t._pending&&(yield t._pending);const n=t.size-sj,r=yield t.readInt32(n),i=yield t.readAt(n-r,r);return my.decode(i)})}_readNextMessageAndValidate(t){return H(this,void 0,void 0,function*(){if(this._footer||(yield this.open()),this._footer&&this._recordBatchIndex<this.numRecordBatches){const n=this._footer.getRecordBatch(this._recordBatchIndex);if(n&&(yield this._handle.seek(n.offset)))return yield this._reader.readMessage(t)}return null})}}class ovt extends rb{constructor(t,n){super(t,n)}_loadVectors(t,n,r){return new b1t(n,t.nodes,t.buffers,this.dictionaries,this.schema.metadataVersion).visitMany(r)}}function lj(e,t){return t&&typeof t.autoDestroy=="boolean"?t.autoDestroy:e.autoDestroy}function*yD(e){const t=$i.from(e);try{if(!t.open({autoDestroy:!1}).closed)do yield t;while(!t.reset().open().closed)}finally{t.cancel()}}function mD(e){return hn(this,arguments,function*(){const n=yield J($i.from(e));try{if(!(yield J(n.open({autoDestroy:!1}))).closed)do yield yield J(n);while(!(yield J(n.reset().open())).closed)}finally{yield J(n.cancel())}})}function avt(e){return new eb(new ovt(e))}function cvt(e){const t=e.peek(mm+7&-8);return t&&t.byteLength>=4?DA(t)?new oj(new cj(e.read())):new eb(new rb(e)):new eb(new rb(function*(){}()))}function lvt(e){return H(this,void 0,void 0,function*(){const t=yield e.peek(mm+7&-8);return t&&t.byteLength>=4?DA(t)?new oj(new cj(yield e.read())):new nb(new ib(e)):new nb(new ib(function(){return hn(this,arguments,function*(){})}()))})}function uvt(e){return H(this,void 0,void 0,function*(){const{size:t}=yield e.stat(),n=new tb(e,t);return t>=rvt&&DA(yield n.readAt(0,mm+7&-8))?new ivt(new svt(n)):new nb(new ib(n))})}class Qe extends Ut{static assemble(...t){const n=i=>i.flatMap(s=>Array.isArray(s)?n(s):s instanceof Tr?s.data.children:s.data),r=new Qe;return r.visitMany(n(t)),r}constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}visit(t){if(t instanceof he)return this.visitMany(t.data),this;const{type:n}=t;if(!lt.isDictionary(n)){const{length:r}=t;if(r>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");if(lt.isUnion(n))this.nodes.push(new _c(r,0));else{const{nullCount:i}=t;lt.isNull(n)||ts.call(this,i<=0?new Uint8Array(0):Hv(t.offset,r,t.nullBitmap)),this.nodes.push(new _c(r,i))}}return super.visit(t)}visitNull(t){return this}visitDictionary(t){return this.visit(t.clone(t.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function ts(e){const t=e.byteLength+7&-8;return this.buffers.push(e),this.bufferRegions.push(new Cs(this._byteLength,t)),this._byteLength+=t,this}function fvt(e){var t;const{type:n,length:r,typeIds:i,valueOffsets:s}=e;if(ts.call(this,i),n.mode===pn.Sparse)return $I.call(this,e);if(n.mode===pn.Dense){if(e.offset<=0)return ts.call(this,s),$I.call(this,e);{const o=new Int32Array(r),a=Object.create(null),c=Object.create(null);for(let l,u,f=-1;++f<r;)(l=i[f])!==void 0&&((u=a[l])===void 0&&(u=a[l]=s[f]),o[f]=s[f]-u,c[l]=((t=c[l])!==null&&t!==void 0?t:0)+1);ts.call(this,o),this.visitMany(e.children.map((l,u)=>{const f=n.typeIds[u],d=a[f],h=c[f];return l.slice(d,Math.min(r,h))}))}}return this}function dvt(e){let t;return e.nullCount>=e.length?ts.call(this,new Uint8Array(0)):(t=e.values)instanceof Uint8Array?ts.call(this,Hv(e.offset,e.length,t)):ts.call(this,Xv(e.values))}function da(e){return ts.call(this,e.values.subarray(0,e.length*e.stride))}function Cw(e){const{length:t,values:n,valueOffsets:r}=e,i=Ie(r[0]),s=Ie(r[t]),o=Math.min(s-i,n.byteLength-i);return ts.call(this,y9(-i,t+1,r)),ts.call(this,n.subarray(i,i+o)),this}function OA(e){const{length:t,valueOffsets:n}=e;if(n){const{[0]:r,[t]:i}=n;return ts.call(this,y9(-r,t+1,n)),this.visit(e.children[0].slice(r,i-r))}return this.visit(e.children[0])}function $I(e){return this.visitMany(e.type.children.map((t,n)=>e.children[n]).filter(Boolean))[0]}Qe.prototype.visitBool=dvt;Qe.prototype.visitInt=da;Qe.prototype.visitFloat=da;Qe.prototype.visitUtf8=Cw;Qe.prototype.visitLargeUtf8=Cw;Qe.prototype.visitBinary=Cw;Qe.prototype.visitLargeBinary=Cw;Qe.prototype.visitFixedSizeBinary=da;Qe.prototype.visitDate=da;Qe.prototype.visitTimestamp=da;Qe.prototype.visitTime=da;Qe.prototype.visitDecimal=da;Qe.prototype.visitList=OA;Qe.prototype.visitStruct=$I;Qe.prototype.visitUnion=fvt;Qe.prototype.visitInterval=da;Qe.prototype.visitDuration=da;Qe.prototype.visitFixedSizeList=OA;Qe.prototype.visitMap=OA;class uj extends IA{static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,n){throw new Error('"throughDOM" not available in this environment')}constructor(t){super(),this._position=0,this._started=!1,this._sink=new ag,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._seenDictionaries=new Map,this._dictionaryDeltaOffsets=new Map,Cr(t)||(t={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy=typeof t.autoDestroy=="boolean"?t.autoDestroy:!0,this._writeLegacyIpcFormat=typeof t.writeLegacyIpcFormat=="boolean"?t.writeLegacyIpcFormat:!1}toString(t=!1){return this._sink.toString(t)}toUint8Array(t=!1){return this._sink.toUint8Array(t)}writeAll(t){return Ql(t)?t.then(n=>this.writeAll(n)):Yd(t)?BA(this,t):LA(this,t)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(t){return this._sink.toDOMStream(t)}toNodeStream(t){return this._sink.toNodeStream(t)}close(){return this.reset()._sink.close()}abort(t){return this.reset()._sink.abort(t)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(t=this._sink,n=null){return t===this._sink||t instanceof ag?this._sink=t:(this._sink=new ag,t&&V0t(t)?this.toDOMStream({type:"bytes"}).pipeTo(t):t&&Y0t(t)&&this.toNodeStream({objectMode:!1}).pipe(t)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._seenDictionaries=new Map,this._dictionaryDeltaOffsets=new Map,(!n||!MI(n,this._schema))&&(n==null?(this._position=0,this._schema=null):(this._started=!0,this._schema=n,this._writeSchema(n))),this}write(t){let n=null;if(this._sink){if(t==null)return this.finish()&&void 0;if(t instanceof Kn&&!(n=t.schema))return this.finish()&&void 0;if(t instanceof Tr&&!(n=t.schema))return this.finish()&&void 0}else throw new Error("RecordBatchWriter is closed");if(n&&!MI(n,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,n)}t instanceof Tr?t instanceof NA||this._writeRecordBatch(t):t instanceof Kn?this.writeAll(t.batches):dm(t)&&this.writeAll(t)}_writeMessage(t,n=8){const r=n-1,i=dr.encode(t),s=i.byteLength,o=this._writeLegacyIpcFormat?4:8,a=s+o+r&~r,c=a-s-o;return t.headerType===re.RecordBatch?this._recordBatchBlocks.push(new bc(a,t.bodyLength,this._position)):t.headerType===re.DictionaryBatch&&this._dictionaryBlocks.push(new bc(a,t.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(a-o)),s>0&&this._write(i),this._writePadding(c)}_write(t){if(this._started){const n=Qt(t);n&&n.byteLength>0&&(this._sink.write(n),this._position+=n.byteLength)}return this}_writeSchema(t){return this._writeMessage(dr.from(t))}_writeFooter(t){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(gy)}_writePadding(t){return t>0?this._write(new Uint8Array(t)):this}_writeRecordBatch(t){const{byteLength:n,nodes:r,bufferRegions:i,buffers:s}=Qe.assemble(t),o=new ri(t.numRows,r,i),a=dr.from(o,n);return this._writeDictionaries(t)._writeMessage(a)._writeBodyBuffers(s)}_writeDictionaryBatch(t,n,r=!1){const{byteLength:i,nodes:s,bufferRegions:o,buffers:a}=Qe.assemble(new he([t])),c=new ri(t.length,s,o),l=new Ks(c,n,r),u=dr.from(l,i);return this._writeMessage(u)._writeBodyBuffers(a)}_writeBodyBuffers(t){let n,r,i;for(let s=-1,o=t.length;++s<o;)(n=t[s])&&(r=n.byteLength)>0&&(this._write(n),(i=(r+7&-8)-r)>0&&this._writePadding(i));return this}_writeDictionaries(t){var n,r;for(const[i,s]of t.dictionaries){const o=(n=s==null?void 0:s.data)!==null&&n!==void 0?n:[],a=this._seenDictionaries.get(i),c=(r=this._dictionaryDeltaOffsets.get(i))!==null&&r!==void 0?r:0;if(!a||a.data[0]!==o[0])for(const[l,u]of o.entries())this._writeDictionaryBatch(u,i,l>0);else if(c<o.length)for(const l of o.slice(c))this._writeDictionaryBatch(l,i,!0);this._seenDictionaries.set(i,s),this._dictionaryDeltaOffsets.set(i,o.length)}return this}}class RA extends uj{static writeAll(t,n){const r=new RA(n);return Ql(t)?t.then(i=>r.writeAll(i)):Yd(t)?BA(r,t):LA(r,t)}}class FA extends uj{static writeAll(t){const n=new FA;return Ql(t)?t.then(r=>n.writeAll(r)):Yd(t)?BA(n,t):LA(n,t)}constructor(){super(),this._autoDestroy=!0}_writeSchema(t){return this._writeMagic()._writePadding(2)}_writeDictionaryBatch(t,n,r=!1){if(!r&&this._seenDictionaries.has(n))throw new Error("The Arrow File format does not support replacement dictionaries. ");return super._writeDictionaryBatch(t,n,r)}_writeFooter(t){const n=my.encode(new my(t,on.V5,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(t)._write(n)._write(Int32Array.of(n.byteLength))._writeMagic()}}function LA(e,t){let n=t;t instanceof Kn&&(n=t.batches,e.reset(void 0,t.schema));for(const r of n)e.write(r);return e.finish()}function BA(e,t){return H(this,void 0,void 0,function*(){var n,r,i,s,o,a,c;try{for(n=!0,r=Kr(t);i=yield r.next(),s=i.done,!s;n=!0){c=i.value,n=!1;const l=c;e.write(l)}}catch(l){o={error:l}}finally{try{!n&&!s&&(a=r.return)&&(yield a.call(r))}finally{if(o)throw o.error}}return e.finish()})}function hvt(e,t="stream"){return(t==="stream"?RA:FA).writeAll(e).toUint8Array(!0)}var pvt=Object.create,fj=Object.defineProperty,yvt=Object.getOwnPropertyDescriptor,mvt=Object.getOwnPropertyNames,gvt=Object.getPrototypeOf,vvt=Object.prototype.hasOwnProperty,V=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),bvt=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of mvt(t))!vvt.call(e,i)&&i!==n&&fj(e,i,{get:()=>t[i],enumerable:!(r=yvt(t,i))||r.enumerable});return e},wvt=(e,t,n)=>(n=e!=null?pvt(gvt(e)):{},bvt(t||!e||!e.__esModule?fj(n,"default",{value:e,enumerable:!0}):n,e)),xn=V((e,t)=>{var n=function(r){return r&&r.Math===Math&&r};t.exports=n(typeof globalThis=="object"&&globalThis)||n(typeof window=="object"&&window)||n(typeof self=="object"&&self)||n(typeof global=="object"&&global)||n(typeof e=="object"&&e)||function(){return this}()||Function("return this")()}),no=V((e,t)=>{t.exports=function(n){try{return!!n()}catch{return!0}}}),ha=V((e,t)=>{var n=no();t.exports=!n(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7})}),Uw=V((e,t)=>{var n=no();t.exports=!n(function(){var r=(function(){}).bind();return typeof r!="function"||r.hasOwnProperty("prototype")})}),ro=V((e,t)=>{var n=Uw(),r=Function.prototype.call;t.exports=n?r.bind(r):function(){return r.apply(r,arguments)}}),_vt=V(e=>{var t={}.propertyIsEnumerable,n=Object.getOwnPropertyDescriptor,r=n&&!t.call({1:2},1);e.f=r?function(i){var s=n(this,i);return!!s&&s.enumerable}:t}),dj=V((e,t)=>{t.exports=function(n,r){return{enumerable:!(n&1),configurable:!(n&2),writable:!(n&4),value:r}}}),ai=V((e,t)=>{var n=Uw(),r=Function.prototype,i=r.call,s=n&&r.bind.bind(i,i);t.exports=n?s:function(o){return function(){return i.apply(o,arguments)}}}),Pw=V((e,t)=>{var n=ai(),r=n({}.toString),i=n("".slice);t.exports=function(s){return i(r(s),8,-1)}}),Svt=V((e,t)=>{var n=ai(),r=no(),i=Pw(),s=Object,o=n("".split);t.exports=r(function(){return!s("z").propertyIsEnumerable(0)})?function(a){return i(a)==="String"?o(a,""):s(a)}:s}),zw=V((e,t)=>{t.exports=function(n){return n==null}}),CA=V((e,t)=>{var n=zw(),r=TypeError;t.exports=function(i){if(n(i))throw new r("Can't call method on "+i);return i}}),UA=V((e,t)=>{var n=Svt(),r=CA();t.exports=function(i){return n(r(i))}}),jn=V((e,t)=>{var n=typeof document=="object"&&document.all;t.exports=typeof n>"u"&&n!==void 0?function(r){return typeof r=="function"||r===n}:function(r){return typeof r=="function"}}),pa=V((e,t)=>{var n=jn();t.exports=function(r){return typeof r=="object"?r!==null:n(r)}}),ou=V((e,t)=>{var n=xn(),r=jn(),i=function(s){return r(s)?s:void 0};t.exports=function(s,o){return arguments.length<2?i(n[s]):n[s]&&n[s][o]}}),PA=V((e,t)=>{var n=ai();t.exports=n({}.isPrototypeOf)}),gm=V((e,t)=>{var n=xn(),r=n.navigator,i=r&&r.userAgent;t.exports=i?String(i):""}),hj=V((e,t)=>{var n=xn(),r=gm(),i=n.process,s=n.Deno,o=i&&i.versions||s&&s.version,a=o&&o.v8,c,l;a&&(c=a.split("."),l=c[0]>0&&c[0]<4?1:+(c[0]+c[1])),!l&&r&&(c=r.match(/Edge\/(\d+)/),(!c||c[1]>=74)&&(c=r.match(/Chrome\/(\d+)/),c&&(l=+c[1]))),t.exports=l}),pj=V((e,t)=>{var n=hj(),r=no(),i=xn(),s=i.String;t.exports=!!Object.getOwnPropertySymbols&&!r(function(){var o=Symbol("symbol detection");return!s(o)||!(Object(o)instanceof Symbol)||!Symbol.sham&&n&&n<41})}),yj=V((e,t)=>{var n=pj();t.exports=n&&!Symbol.sham&&typeof Symbol.iterator=="symbol"}),mj=V((e,t)=>{var n=ou(),r=jn(),i=PA(),s=yj(),o=Object;t.exports=s?function(a){return typeof a=="symbol"}:function(a){var c=n("Symbol");return r(c)&&i(c.prototype,o(a))}}),jw=V((e,t)=>{var n=String;t.exports=function(r){try{return n(r)}catch{return"Object"}}}),Cc=V((e,t)=>{var n=jn(),r=jw(),i=TypeError;t.exports=function(s){if(n(s))return s;throw new i(r(s)+" is not a function")}}),zA=V((e,t)=>{var n=Cc(),r=zw();t.exports=function(i,s){var o=i[s];return r(o)?void 0:n(o)}}),xvt=V((e,t)=>{var n=ro(),r=jn(),i=pa(),s=TypeError;t.exports=function(o,a){var c,l;if(a==="string"&&r(c=o.toString)&&!i(l=n(c,o))||r(c=o.valueOf)&&!i(l=n(c,o))||a!=="string"&&r(c=o.toString)&&!i(l=n(c,o)))return l;throw new s("Can't convert object to primitive value")}}),vm=V((e,t)=>{t.exports=!1}),jA=V((e,t)=>{var n=xn(),r=Object.defineProperty;t.exports=function(i,s){try{r(n,i,{value:s,configurable:!0,writable:!0})}catch{n[i]=s}return s}}),VA=V((e,t)=>{var n=vm(),r=xn(),i=jA(),s="__core-js_shared__",o=t.exports=r[s]||i(s,{});(o.versions||(o.versions=[])).push({version:"3.38.1",mode:n?"pure":"global",copyright:"© 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.38.1/LICENSE",source:"https://github.com/zloirock/core-js"})}),gj=V((e,t)=>{var n=VA();t.exports=function(r,i){return n[r]||(n[r]=i||{})}}),Ivt=V((e,t)=>{var n=CA(),r=Object;t.exports=function(i){return r(n(i))}}),ya=V((e,t)=>{var n=ai(),r=Ivt(),i=n({}.hasOwnProperty);t.exports=Object.hasOwn||function(s,o){return i(r(s),o)}}),vj=V((e,t)=>{var n=ai(),r=0,i=Math.random(),s=n(1 .toString);t.exports=function(o){return"Symbol("+(o===void 0?"":o)+")_"+s(++r+i,36)}}),io=V((e,t)=>{var n=xn(),r=gj(),i=ya(),s=vj(),o=pj(),a=yj(),c=n.Symbol,l=r("wks"),u=a?c.for||c:c&&c.withoutSetter||s;t.exports=function(f){return i(l,f)||(l[f]=o&&i(c,f)?c[f]:u("Symbol."+f)),l[f]}}),Evt=V((e,t)=>{var n=ro(),r=pa(),i=mj(),s=zA(),o=xvt(),a=io(),c=TypeError,l=a("toPrimitive");t.exports=function(u,f){if(!r(u)||i(u))return u;var d=s(u,l),h;if(d){if(f===void 0&&(f="default"),h=n(d,u,f),!r(h)||i(h))return h;throw new c("Can't convert object to primitive value")}return f===void 0&&(f="number"),o(u,f)}}),bj=V((e,t)=>{var n=Evt(),r=mj();t.exports=function(i){var s=n(i,"string");return r(s)?s:s+""}}),wj=V((e,t)=>{var n=xn(),r=pa(),i=n.document,s=r(i)&&r(i.createElement);t.exports=function(o){return s?i.createElement(o):{}}}),_j=V((e,t)=>{var n=ha(),r=no(),i=wj();t.exports=!n&&!r(function(){return Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a!==7})}),Sj=V(e=>{var t=ha(),n=ro(),r=_vt(),i=dj(),s=UA(),o=bj(),a=ya(),c=_j(),l=Object.getOwnPropertyDescriptor;e.f=t?l:function(u,f){if(u=s(u),f=o(f),c)try{return l(u,f)}catch{}if(a(u,f))return i(!n(r.f,u,f),u[f])}}),Tvt=V((e,t)=>{var n=ha(),r=no();t.exports=n&&r(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42})}),au=V((e,t)=>{var n=pa(),r=String,i=TypeError;t.exports=function(s){if(n(s))return s;throw new i(r(s)+" is not an object")}}),bm=V(e=>{var t=ha(),n=_j(),r=Tvt(),i=au(),s=bj(),o=TypeError,a=Object.defineProperty,c=Object.getOwnPropertyDescriptor,l="enumerable",u="configurable",f="writable";e.f=t?r?function(d,h,p){if(i(d),h=s(h),i(p),typeof d=="function"&&h==="prototype"&&"value"in p&&f in p&&!p[f]){var g=c(d,h);g&&g[f]&&(d[h]=p.value,p={configurable:u in p?p[u]:g[u],enumerable:l in p?p[l]:g[l],writable:!1})}return a(d,h,p)}:a:function(d,h,p){if(i(d),h=s(h),i(p),n)try{return a(d,h,p)}catch{}if("get"in p||"set"in p)throw new o("Accessors not supported");return"value"in p&&(d[h]=p.value),d}}),xj=V((e,t)=>{var n=ha(),r=bm(),i=dj();t.exports=n?function(s,o,a){return r.f(s,o,i(1,a))}:function(s,o,a){return s[o]=a,s}}),Avt=V((e,t)=>{var n=ha(),r=ya(),i=Function.prototype,s=n&&Object.getOwnPropertyDescriptor,o=r(i,"name"),a=o&&(function(){}).name==="something",c=o&&(!n||n&&s(i,"name").configurable);t.exports={EXISTS:o,PROPER:a,CONFIGURABLE:c}}),YA=V((e,t)=>{var n=ai(),r=jn(),i=VA(),s=n(Function.toString);r(i.inspectSource)||(i.inspectSource=function(o){return s(o)}),t.exports=i.inspectSource}),Mvt=V((e,t)=>{var n=xn(),r=jn(),i=n.WeakMap;t.exports=r(i)&&/native code/.test(String(i))}),Nvt=V((e,t)=>{var n=gj(),r=vj(),i=n("keys");t.exports=function(s){return i[s]||(i[s]=r(s))}}),Ij=V((e,t)=>{t.exports={}}),Ej=V((e,t)=>{var n=Mvt(),r=xn(),i=pa(),s=xj(),o=ya(),a=VA(),c=Nvt(),l=Ij(),u="Object already initialized",f=r.TypeError,d=r.WeakMap,h,p,g,b=function(w){return g(w)?p(w):h(w,{})},y=function(w){return function(_){var S;if(!i(_)||(S=p(_)).type!==w)throw new f("Incompatible receiver, "+w+" required");return S}};n||a.state?(m=a.state||(a.state=new d),m.get=m.get,m.has=m.has,m.set=m.set,h=function(w,_){if(m.has(w))throw new f(u);return _.facade=w,m.set(w,_),_},p=function(w){return m.get(w)||{}},g=function(w){return m.has(w)}):(v=c("state"),l[v]=!0,h=function(w,_){if(o(w,v))throw new f(u);return _.facade=w,s(w,v,_),_},p=function(w){return o(w,v)?w[v]:{}},g=function(w){return o(w,v)});var m,v;t.exports={set:h,get:p,has:g,enforce:b,getterFor:y}}),Tj=V((e,t)=>{var n=ai(),r=no(),i=jn(),s=ya(),o=ha(),a=Avt().CONFIGURABLE,c=YA(),l=Ej(),u=l.enforce,f=l.get,d=String,h=Object.defineProperty,p=n("".slice),g=n("".replace),b=n([].join),y=o&&!r(function(){return h(function(){},"length",{value:8}).length!==8}),m=String(String).split("String"),v=t.exports=function(w,_,S){p(d(_),0,7)==="Symbol("&&(_="["+g(d(_),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),S&&S.getter&&(_="get "+_),S&&S.setter&&(_="set "+_),(!s(w,"name")||a&&w.name!==_)&&(o?h(w,"name",{value:_,configurable:!0}):w.name=_),y&&S&&s(S,"arity")&&w.length!==S.arity&&h(w,"length",{value:S.arity});try{S&&s(S,"constructor")&&S.constructor?o&&h(w,"prototype",{writable:!1}):w.prototype&&(w.prototype=void 0)}catch{}var x=u(w);return s(x,"source")||(x.source=b(m,typeof _=="string"?_:"")),w};Function.prototype.toString=v(function(){return i(this)&&f(this).source||c(this)},"toString")}),qA=V((e,t)=>{var n=jn(),r=bm(),i=Tj(),s=jA();t.exports=function(o,a,c,l){l||(l={});var u=l.enumerable,f=l.name!==void 0?l.name:a;if(n(c)&&i(c,f,l),l.global)u?o[a]=c:s(a,c);else{try{l.unsafe?o[a]&&(u=!0):delete o[a]}catch{}u?o[a]=c:r.f(o,a,{value:c,enumerable:!1,configurable:!l.nonConfigurable,writable:!l.nonWritable})}return o}}),$vt=V((e,t)=>{var n=Math.ceil,r=Math.floor;t.exports=Math.trunc||function(i){var s=+i;return(s>0?r:n)(s)}}),Aj=V((e,t)=>{var n=$vt();t.exports=function(r){var i=+r;return i!==i||i===0?0:n(i)}}),kvt=V((e,t)=>{var n=Aj(),r=Math.max,i=Math.min;t.exports=function(s,o){var a=n(s);return a<0?r(a+o,0):i(a,o)}}),Dvt=V((e,t)=>{var n=Aj(),r=Math.min;t.exports=function(i){var s=n(i);return s>0?r(s,9007199254740991):0}}),Mj=V((e,t)=>{var n=Dvt();t.exports=function(r){return n(r.length)}}),Ovt=V((e,t)=>{var n=UA(),r=kvt(),i=Mj(),s=function(o){return function(a,c,l){var u=n(a),f=i(u);if(f===0)return!o&&-1;var d=r(l,f),h;if(o&&c!==c){for(;f>d;)if(h=u[d++],h!==h)return!0}else for(;f>d;d++)if((o||d in u)&&u[d]===c)return o||d||0;return!o&&-1}};t.exports={includes:s(!0),indexOf:s(!1)}}),Rvt=V((e,t)=>{var n=ai(),r=ya(),i=UA(),s=Ovt().indexOf,o=Ij(),a=n([].push);t.exports=function(c,l){var u=i(c),f=0,d=[],h;for(h in u)!r(o,h)&&r(u,h)&&a(d,h);for(;l.length>f;)r(u,h=l[f++])&&(~s(d,h)||a(d,h));return d}}),Fvt=V((e,t)=>{t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]}),Lvt=V(e=>{var t=Rvt(),n=Fvt(),r=n.concat("length","prototype");e.f=Object.getOwnPropertyNames||function(i){return t(i,r)}}),Bvt=V(e=>{e.f=Object.getOwnPropertySymbols}),Cvt=V((e,t)=>{var n=ou(),r=ai(),i=Lvt(),s=Bvt(),o=au(),a=r([].concat);t.exports=n("Reflect","ownKeys")||function(c){var l=i.f(o(c)),u=s.f;return u?a(l,u(c)):l}}),Uvt=V((e,t)=>{var n=ya(),r=Cvt(),i=Sj(),s=bm();t.exports=function(o,a,c){for(var l=r(a),u=s.f,f=i.f,d=0;d<l.length;d++){var h=l[d];!n(o,h)&&!(c&&n(c,h))&&u(o,h,f(a,h))}}}),Nj=V((e,t)=>{var n=no(),r=jn(),i=/#|\.prototype\./,s=function(u,f){var d=a[o(u)];return d===l?!0:d===c?!1:r(f)?n(f):!!f},o=s.normalize=function(u){return String(u).replace(i,".").toLowerCase()},a=s.data={},c=s.NATIVE="N",l=s.POLYFILL="P";t.exports=s}),cu=V((e,t)=>{var n=xn(),r=Sj().f,i=xj(),s=qA(),o=jA(),a=Uvt(),c=Nj();t.exports=function(l,u){var f=l.target,d=l.global,h=l.stat,p,g,b,y,m,v;if(d?g=n:h?g=n[f]||o(f,{}):g=n[f]&&n[f].prototype,g)for(b in u){if(m=u[b],l.dontCallGetSet?(v=r(g,b),y=v&&v.value):y=g[b],p=c(d?b:f+(h?".":"#")+b,l.forced),!p&&y!==void 0){if(typeof m==typeof y)continue;a(m,y)}(l.sham||y&&y.sham)&&i(m,"sham",!0),s(g,b,m,l)}}}),$j=V((e,t)=>{var n=xn(),r=gm(),i=Pw(),s=function(o){return r.slice(0,o.length)===o};t.exports=function(){return s("Bun/")?"BUN":s("Cloudflare-Workers")?"CLOUDFLARE":s("Deno/")?"DENO":s("Node.js/")?"NODE":n.Bun&&typeof Bun.version=="string"?"BUN":n.Deno&&typeof Deno.version=="object"?"DENO":i(n.process)==="process"?"NODE":n.window&&n.document?"BROWSER":"REST"}()}),WA=V((e,t)=>{var n=$j();t.exports=n==="NODE"}),Pvt=V((e,t)=>{var n=ai(),r=Cc();t.exports=function(i,s,o){try{return n(r(Object.getOwnPropertyDescriptor(i,s)[o]))}catch{}}}),zvt=V((e,t)=>{var n=pa();t.exports=function(r){return n(r)||r===null}}),jvt=V((e,t)=>{var n=zvt(),r=String,i=TypeError;t.exports=function(s){if(n(s))return s;throw new i("Can't set "+r(s)+" as a prototype")}}),Vvt=V((e,t)=>{var n=Pvt(),r=pa(),i=CA(),s=jvt();t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var o=!1,a={},c;try{c=n(Object.prototype,"__proto__","set"),c(a,[]),o=a instanceof Array}catch{}return function(l,u){return i(l),s(u),r(l)&&(o?c(l,u):l.__proto__=u),l}}():void 0)}),Yvt=V((e,t)=>{var n=bm().f,r=ya(),i=io(),s=i("toStringTag");t.exports=function(o,a,c){o&&!c&&(o=o.prototype),o&&!r(o,s)&&n(o,s,{configurable:!0,value:a})}}),qvt=V((e,t)=>{var n=Tj(),r=bm();t.exports=function(i,s,o){return o.get&&n(o.get,s,{getter:!0}),o.set&&n(o.set,s,{setter:!0}),r.f(i,s,o)}}),Wvt=V((e,t)=>{var n=ou(),r=qvt(),i=io(),s=ha(),o=i("species");t.exports=function(a){var c=n(a);s&&c&&!c[o]&&r(c,o,{configurable:!0,get:function(){return this}})}}),Gvt=V((e,t)=>{var n=PA(),r=TypeError;t.exports=function(i,s){if(n(s,i))return i;throw new r("Incorrect invocation")}}),Hvt=V((e,t)=>{var n=io(),r=n("toStringTag"),i={};i[r]="z",t.exports=String(i)==="[object z]"}),kj=V((e,t)=>{var n=Hvt(),r=jn(),i=Pw(),s=io(),o=s("toStringTag"),a=Object,c=i(function(){return arguments}())==="Arguments",l=function(u,f){try{return u[f]}catch{}};t.exports=n?i:function(u){var f,d,h;return u===void 0?"Undefined":u===null?"Null":typeof(d=l(f=a(u),o))=="string"?d:c?i(f):(h=i(f))==="Object"&&r(f.callee)?"Arguments":h}}),Xvt=V((e,t)=>{var n=ai(),r=no(),i=jn(),s=kj(),o=ou(),a=YA(),c=function(){},l=o("Reflect","construct"),u=/^\s*(?:class|function)\b/,f=n(u.exec),d=!u.test(c),h=function(g){if(!i(g))return!1;try{return l(c,[],g),!0}catch{return!1}},p=function(g){if(!i(g))return!1;switch(s(g)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return d||!!f(u,a(g))}catch{return!0}};p.sham=!0,t.exports=!l||r(function(){var g;return h(h.call)||!h(Object)||!h(function(){g=!0})||g})?p:h}),Qvt=V((e,t)=>{var n=Xvt(),r=jw(),i=TypeError;t.exports=function(s){if(n(s))return s;throw new i(r(s)+" is not a constructor")}}),Kvt=V((e,t)=>{var n=au(),r=Qvt(),i=zw(),s=io(),o=s("species");t.exports=function(a,c){var l=n(a).constructor,u;return l===void 0||i(u=n(l)[o])?c:r(u)}}),Zvt=V((e,t)=>{var n=Uw(),r=Function.prototype,i=r.apply,s=r.call;t.exports=typeof Reflect=="object"&&Reflect.apply||(n?s.bind(i):function(){return s.apply(i,arguments)})}),Jvt=V((e,t)=>{var n=Pw(),r=ai();t.exports=function(i){if(n(i)==="Function")return r(i)}}),GA=V((e,t)=>{var n=Jvt(),r=Cc(),i=Uw(),s=n(n.bind);t.exports=function(o,a){return r(o),a===void 0?o:i?s(o,a):function(){return o.apply(a,arguments)}}}),tbt=V((e,t)=>{var n=ou();t.exports=n("document","documentElement")}),ebt=V((e,t)=>{var n=ai();t.exports=n([].slice)}),nbt=V((e,t)=>{var n=TypeError;t.exports=function(r,i){if(r<i)throw new n("Not enough arguments");return r}}),Dj=V((e,t)=>{var n=gm();t.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(n)}),Oj=V((e,t)=>{var n=xn(),r=Zvt(),i=GA(),s=jn(),o=ya(),a=no(),c=tbt(),l=ebt(),u=wj(),f=nbt(),d=Dj(),h=WA(),p=n.setImmediate,g=n.clearImmediate,b=n.process,y=n.Dispatch,m=n.Function,v=n.MessageChannel,w=n.String,_=0,S={},x="onreadystatechange",T,$,I,A;a(function(){T=n.location});var D=function(M){if(o(S,M)){var R=S[M];delete S[M],R()}},F=function(M){return function(){D(M)}},E=function(M){D(M.data)},N=function(M){n.postMessage(w(M),T.protocol+"//"+T.host)};(!p||!g)&&(p=function(M){f(arguments.length,1);var R=s(M)?M:m(M),O=l(arguments,1);return S[++_]=function(){r(R,void 0,O)},$(_),_},g=function(M){delete S[M]},h?$=function(M){b.nextTick(F(M))}:y&&y.now?$=function(M){y.now(F(M))}:v&&!d?(I=new v,A=I.port2,I.port1.onmessage=E,$=i(A.postMessage,A)):n.addEventListener&&s(n.postMessage)&&!n.importScripts&&T&&T.protocol!=="file:"&&!a(N)?($=N,n.addEventListener("message",E,!1)):x in u("script")?$=function(M){c.appendChild(u("script"))[x]=function(){c.removeChild(this),D(M)}}:$=function(M){setTimeout(F(M),0)}),t.exports={set:p,clear:g}}),rbt=V((e,t)=>{var n=xn(),r=ha(),i=Object.getOwnPropertyDescriptor;t.exports=function(s){if(!r)return n[s];var o=i(n,s);return o&&o.value}}),Rj=V((e,t)=>{var n=function(){this.head=null,this.tail=null};n.prototype={add:function(r){var i={item:r,next:null},s=this.tail;s?s.next=i:this.head=i,this.tail=i},get:function(){var r=this.head;if(r){var i=this.head=r.next;return i===null&&(this.tail=null),r.item}}},t.exports=n}),ibt=V((e,t)=>{var n=gm();t.exports=/ipad|iphone|ipod/i.test(n)&&typeof Pebble<"u"}),sbt=V((e,t)=>{var n=gm();t.exports=/web0s(?!.*chrome)/i.test(n)}),obt=V((e,t)=>{var n=xn(),r=rbt(),i=GA(),s=Oj().set,o=Rj(),a=Dj(),c=ibt(),l=sbt(),u=WA(),f=n.MutationObserver||n.WebKitMutationObserver,d=n.document,h=n.process,p=n.Promise,g=r("queueMicrotask"),b,y,m,v,w;g||(_=new o,S=function(){var x,T;for(u&&(x=h.domain)&&x.exit();T=_.get();)try{T()}catch($){throw _.head&&b(),$}x&&x.enter()},!a&&!u&&!l&&f&&d?(y=!0,m=d.createTextNode(""),new f(S).observe(m,{characterData:!0}),b=function(){m.data=y=!y}):!c&&p&&p.resolve?(v=p.resolve(void 0),v.constructor=p,w=i(v.then,v),b=function(){w(S)}):u?b=function(){h.nextTick(S)}:(s=i(s,n),b=function(){s(S)}),g=function(x){_.head||b(),_.add(x)});var _,S;t.exports=g}),abt=V((e,t)=>{t.exports=function(n,r){try{arguments.length===1?console.error(n):console.error(n,r)}catch{}}}),HA=V((e,t)=>{t.exports=function(n){try{return{error:!1,value:n()}}catch(r){return{error:!0,value:r}}}}),wm=V((e,t)=>{var n=xn();t.exports=n.Promise}),_m=V((e,t)=>{var n=xn(),r=wm(),i=jn(),s=Nj(),o=YA(),a=io(),c=$j(),l=vm(),u=hj(),f=r&&r.prototype,d=a("species"),h=!1,p=i(n.PromiseRejectionEvent),g=s("Promise",function(){var b=o(r),y=b!==String(r);if(!y&&u===66||l&&!(f.catch&&f.finally))return!0;if(!u||u<51||!/native code/.test(b)){var m=new r(function(_){_(1)}),v=function(_){_(function(){},function(){})},w=m.constructor={};if(w[d]=v,h=m.then(function(){})instanceof v,!h)return!0}return!y&&(c==="BROWSER"||c==="DENO")&&!p});t.exports={CONSTRUCTOR:g,REJECTION_EVENT:p,SUBCLASSING:h}}),Wd=V((e,t)=>{var n=Cc(),r=TypeError,i=function(s){var o,a;this.promise=new s(function(c,l){if(o!==void 0||a!==void 0)throw new r("Bad Promise constructor");o=c,a=l}),this.resolve=n(o),this.reject=n(a)};t.exports.f=function(s){return new i(s)}}),cbt=V(()=>{var e=cu(),t=vm(),n=WA(),r=xn(),i=ro(),s=qA(),o=Vvt(),a=Yvt(),c=Wvt(),l=Cc(),u=jn(),f=pa(),d=Gvt(),h=Kvt(),p=Oj().set,g=obt(),b=abt(),y=HA(),m=Rj(),v=Ej(),w=wm(),_=_m(),S=Wd(),x="Promise",T=_.CONSTRUCTOR,$=_.REJECTION_EVENT,I=_.SUBCLASSING,A=v.getterFor(x),D=v.set,F=w&&w.prototype,E=w,N=F,M=r.TypeError,R=r.document,O=r.process,C=S.f,L=C,P=!!(R&&R.createEvent&&r.dispatchEvent),z="unhandledrejection",G="rejectionhandled",Q=0,rt=1,Z=2,q=1,K=2,Y,et,st,j,Tt=function(nt){var kt;return f(nt)&&u(kt=nt.then)?kt:!1},ut=function(nt,kt){var se=kt.value,oe=kt.state===rt,un=oe?nt.ok:nt.fail,Ui=nt.resolve,Uc=nt.reject,li=nt.domain,ma,Sm,Pc;try{un?(oe||(kt.rejection===K&&ci(kt),kt.rejection=q),un===!0?ma=se:(li&&li.enter(),ma=un(se),li&&(li.exit(),Pc=!0)),ma===nt.promise?Uc(new M("Promise-chain cycle")):(Sm=Tt(ma))?i(Sm,ma,Ui,Uc):Ui(ma)):Uc(se)}catch(ui){li&&!Pc&&li.exit(),Uc(ui)}},jt=function(nt,kt){nt.notified||(nt.notified=!0,g(function(){for(var se=nt.reactions,oe;oe=se.get();)ut(oe,nt);nt.notified=!1,kt&&!nt.rejection&&ct(nt)}))},qt=function(nt,kt,se){var oe,un;P?(oe=R.createEvent("Event"),oe.promise=kt,oe.reason=se,oe.initEvent(nt,!1,!0),r.dispatchEvent(oe)):oe={promise:kt,reason:se},!$&&(un=r["on"+nt])?un(oe):nt===z&&b("Unhandled promise rejection",se)},ct=function(nt){i(p,r,function(){var kt=nt.facade,se=nt.value,oe=ue(nt),un;if(oe&&(un=y(function(){n?O.emit("unhandledRejection",se,kt):qt(z,kt,se)}),nt.rejection=n||ue(nt)?K:q,un.error))throw un.value})},ue=function(nt){return nt.rejection!==q&&!nt.parent},ci=function(nt){i(p,r,function(){var kt=nt.facade;n?O.emit("rejectionHandled",kt):qt(G,kt,nt.value)})},yn=function(nt,kt,se){return function(oe){nt(kt,oe,se)}},ps=function(nt,kt,se){nt.done||(nt.done=!0,se&&(nt=se),nt.value=kt,nt.state=Z,jt(nt,!0))},lu=function(nt,kt,se){if(!nt.done){nt.done=!0,se&&(nt=se);try{if(nt.facade===kt)throw new M("Promise can't be resolved itself");var oe=Tt(kt);oe?g(function(){var un={done:!1};try{i(oe,kt,yn(lu,un,nt),yn(ps,un,nt))}catch(Ui){ps(un,Ui,nt)}}):(nt.value=kt,nt.state=rt,jt(nt,!1))}catch(un){ps({done:!1},un,nt)}}};if(T&&(E=function(nt){d(this,N),l(nt),i(Y,this);var kt=A(this);try{nt(yn(lu,kt),yn(ps,kt))}catch(se){ps(kt,se)}},N=E.prototype,Y=function(nt){D(this,{type:x,done:!1,notified:!1,parent:!1,reactions:new m,rejection:!1,state:Q,value:null})},Y.prototype=s(N,"then",function(nt,kt){var se=A(this),oe=C(h(this,E));return se.parent=!0,oe.ok=u(nt)?nt:!0,oe.fail=u(kt)&&kt,oe.domain=n?O.domain:void 0,se.state===Q?se.reactions.add(oe):g(function(){ut(oe,se)}),oe.promise}),et=function(){var nt=new Y,kt=A(nt);this.promise=nt,this.resolve=yn(lu,kt),this.reject=yn(ps,kt)},S.f=C=function(nt){return nt===E||nt===st?new et(nt):L(nt)},!t&&u(w)&&F!==Object.prototype)){j=F.then,I||s(F,"then",function(nt,kt){var se=this;return new E(function(oe,un){i(j,se,oe,un)}).then(nt,kt)},{unsafe:!0});try{delete F.constructor}catch{}o&&o(F,N)}e({global:!0,constructor:!0,wrap:!0,forced:T},{Promise:E}),a(E,x,!1,!0),c(x)}),Fj=V((e,t)=>{t.exports={}}),lbt=V((e,t)=>{var n=io(),r=Fj(),i=n("iterator"),s=Array.prototype;t.exports=function(o){return o!==void 0&&(r.Array===o||s[i]===o)}}),Lj=V((e,t)=>{var n=kj(),r=zA(),i=zw(),s=Fj(),o=io(),a=o("iterator");t.exports=function(c){if(!i(c))return r(c,a)||r(c,"@@iterator")||s[n(c)]}}),ubt=V((e,t)=>{var n=ro(),r=Cc(),i=au(),s=jw(),o=Lj(),a=TypeError;t.exports=function(c,l){var u=arguments.length<2?o(c):l;if(r(u))return i(n(u,c));throw new a(s(c)+" is not iterable")}}),fbt=V((e,t)=>{var n=ro(),r=au(),i=zA();t.exports=function(s,o,a){var c,l;r(s);try{if(c=i(s,"return"),!c){if(o==="throw")throw a;return a}c=n(c,s)}catch(u){l=!0,c=u}if(o==="throw")throw a;if(l)throw c;return r(c),a}}),Bj=V((e,t)=>{var n=GA(),r=ro(),i=au(),s=jw(),o=lbt(),a=Mj(),c=PA(),l=ubt(),u=Lj(),f=fbt(),d=TypeError,h=function(g,b){this.stopped=g,this.result=b},p=h.prototype;t.exports=function(g,b,y){var m=y&&y.that,v=!!(y&&y.AS_ENTRIES),w=!!(y&&y.IS_RECORD),_=!!(y&&y.IS_ITERATOR),S=!!(y&&y.INTERRUPTED),x=n(b,m),T,$,I,A,D,F,E,N=function(R){return T&&f(T,"normal",R),new h(!0,R)},M=function(R){return v?(i(R),S?x(R[0],R[1],N):x(R[0],R[1])):S?x(R,N):x(R)};if(w)T=g.iterator;else if(_)T=g;else{if($=u(g),!$)throw new d(s(g)+" is not iterable");if(o($)){for(I=0,A=a(g);A>I;I++)if(D=M(g[I]),D&&c(p,D))return D;return new h(!1)}T=l(g,$)}for(F=w?g.next:T.next;!(E=r(F,T)).done;){try{D=M(E.value)}catch(R){f(T,"throw",R)}if(typeof D=="object"&&D&&c(p,D))return D}return new h(!1)}}),dbt=V((e,t)=>{var n=io(),r=n("iterator"),i=!1;try{s=0,o={next:function(){return{done:!!s++}},return:function(){i=!0}},o[r]=function(){return this},Array.from(o,function(){throw 2})}catch{}var s,o;t.exports=function(a,c){try{if(!c&&!i)return!1}catch{return!1}var l=!1;try{var u={};u[r]=function(){return{next:function(){return{done:l=!0}}}},a(u)}catch{}return l}}),Cj=V((e,t)=>{var n=wm(),r=dbt(),i=_m().CONSTRUCTOR;t.exports=i||!r(function(s){n.all(s).then(void 0,function(){})})}),hbt=V(()=>{var e=cu(),t=ro(),n=Cc(),r=Wd(),i=HA(),s=Bj(),o=Cj();e({target:"Promise",stat:!0,forced:o},{all:function(a){var c=this,l=r.f(c),u=l.resolve,f=l.reject,d=i(function(){var h=n(c.resolve),p=[],g=0,b=1;s(a,function(y){var m=g++,v=!1;b++,t(h,c,y).then(function(w){v||(v=!0,p[m]=w,--b||u(p))},f)}),--b||u(p)});return d.error&&f(d.value),l.promise}})}),pbt=V(()=>{var e=cu(),t=vm(),n=_m().CONSTRUCTOR,r=wm(),i=ou(),s=jn(),o=qA(),a=r&&r.prototype;e({target:"Promise",proto:!0,forced:n,real:!0},{catch:function(l){return this.then(void 0,l)}}),!t&&s(r)&&(c=i("Promise").prototype.catch,a.catch!==c&&o(a,"catch",c,{unsafe:!0}));var c}),ybt=V(()=>{var e=cu(),t=ro(),n=Cc(),r=Wd(),i=HA(),s=Bj(),o=Cj();e({target:"Promise",stat:!0,forced:o},{race:function(a){var c=this,l=r.f(c),u=l.reject,f=i(function(){var d=n(c.resolve);s(a,function(h){t(d,c,h).then(l.resolve,u)})});return f.error&&u(f.value),l.promise}})}),mbt=V(()=>{var e=cu(),t=Wd(),n=_m().CONSTRUCTOR;e({target:"Promise",stat:!0,forced:n},{reject:function(r){var i=t.f(this),s=i.reject;return s(r),i.promise}})}),gbt=V((e,t)=>{var n=au(),r=pa(),i=Wd();t.exports=function(s,o){if(n(s),r(o)&&o.constructor===s)return o;var a=i.f(s),c=a.resolve;return c(o),a.promise}}),vbt=V(()=>{var e=cu(),t=ou(),n=vm(),r=wm(),i=_m().CONSTRUCTOR,s=gbt(),o=t("Promise"),a=n&&!i;e({target:"Promise",stat:!0,forced:n||i},{resolve:function(c){return s(a&&this===o?r:this,c)}})}),bbt=V(()=>{cbt(),hbt(),pbt(),ybt(),mbt(),vbt()}),Uj=V(()=>{var e=cu(),t=Wd();e({target:"Promise",stat:!0},{withResolvers:function(){var n=t.f(this);return{promise:n.promise,resolve:n.resolve,reject:n.reject}}})}),wbt=V((e,t)=>{var n=xn();t.exports=n}),_bt=V((e,t)=>{bbt(),Uj();var n=ro(),r=jn(),i=wbt(),s=i.Promise,o=s.withResolvers;t.exports=function(){return n(o,r(this)?this:s)}}),Sbt=V((e,t)=>{var n=_bt();t.exports=n}),xbt=V(()=>{Uj()}),Ibt=V((e,t)=>{var n=Sbt();xbt(),t.exports=n}),Pj=class{singleValue(){let{columnCount:e,rowCount:t}=this;if(e===0)throw Error("no column data");if(t===0)throw Error("no rows");if(e>1)throw Error("more than one column");if(t>1)throw Error("more than one row");return this.value(0,0)}columnNames(){let{columnCount:e}=this,t=[];for(let n=0;n<e;n++)t.push(this.columnName(n));return t}deduplicatedColumnNames(){let{columnCount:e}=this,t=[],n={};for(let r=0;r<e;r++){let i=this.columnName(r),s=(n[i]||0)+1;n[i]=s,s>1?t.push(`${i}:${s-1}`):t.push(i)}return t}toRows(){let{rowCount:e,columnCount:t}=this,n=this.deduplicatedColumnNames(),r=[];for(let i=0;i<e;i++){let s={};for(let o=0;o<t;o++)s[n[o]]=this.value(o,i);r.push(s)}return r}},zj=class extends Pj{constructor(t){super();tt(this,"iterator");tt(this,"iteratorDone",!1);tt(this,"totalRowsRead",0);tt(this,"batches",[]);tt(this,"batchSizeRuns",[]);this.iterator=t}get columnCount(){return this.batches.length===0?0:this.batches[0].columnCount}get rowCount(){return this.totalRowsRead}columnName(t){if(this.batches.length===0)throw Error("no column data");return this.batches[0].columnName(t)}columnType(t){if(this.batches.length===0)throw Error("no column data");return this.batches[0].columnType(t)}value(t,n){if(this.totalRowsRead===0)throw Error("no data");let r=0,i=n;for(let s of this.batchSizeRuns){if(i<s.rowCount){r+=Math.floor(i/s.batchSize);let o=i%s.batchSize;return this.batches[r].value(t,o)}r+=s.batchCount,i-=s.rowCount}throw Error(`Row index ${n} requested, but only ${this.totalRowsRead} row have been read so far.`)}get done(){return this.iteratorDone}async readAll(){return this.read()}async readUntil(t){return this.read(t)}async read(t){for(;!(this.iteratorDone||t!==void 0&&this.totalRowsRead>=t);){let{value:n,done:r}=await this.iterator.next();n&&(this.updateBatchSizeRuns(n),this.batches.push(n),this.totalRowsRead+=n.rowCount),r&&(this.iteratorDone=r)}}updateBatchSizeRuns(t){if(this.batchSizeRuns.length>0){let n=this.batchSizeRuns[this.batchSizeRuns.length-1];if(n.batchSize===t.rowCount){n.batchCount+=1,n.rowCount+=n.batchSize;return}}this.batchSizeRuns.push({batchCount:1,batchSize:t.rowCount,rowCount:t.rowCount})}},Vt,Xt=(Vt=class{constructor(){}static ARRAY(t,n){return{name:"ARRAY",valueType:t,length:n}}static DECIMAL(t,n){return t===void 0&&n===void 0?Vt.default_DECIMAL:{name:"DECIMAL",width:t,scale:n}}static LIST(t){return{name:"LIST",valueType:t}}static MAP(t,n){return{name:"MAP",keyType:t,valueType:n}}static STRUCT(t){return{name:"STRUCT",entries:t}}static STRUCT_entry(t,n){return{key:t,valueType:n}}static UNION(t){return{name:"UNION",alternatives:t}}static UNION_alternative(t,n){return{tag:t,valueType:n}}static VARCHAR_withLength(t){return{name:"VARCHAR",length:t}}},tt(Vt,"BIGINT",{name:"BIGINT"}),tt(Vt,"BIT",{name:"BIT"}),tt(Vt,"BOOLEAN",{name:"BOOLEAN"}),tt(Vt,"BLOB",{name:"BLOB"}),tt(Vt,"DATE",{name:"DATE"}),tt(Vt,"DOUBLE",{name:"DOUBLE"}),tt(Vt,"default_DECIMAL",{name:"DECIMAL"}),tt(Vt,"ENUM",{name:"ENUM"}),tt(Vt,"GEOMETRY",{name:"GEOMETRY"}),tt(Vt,"HUGEINT",{name:"HUGEINT"}),tt(Vt,"INTEGER",{name:"INTEGER"}),tt(Vt,"INTERVAL",{name:"INTERVAL"}),tt(Vt,"JSON",{name:"JSON"}),tt(Vt,"REAL",{name:"REAL"}),tt(Vt,"SMALLINT",{name:"SMALLINT"}),tt(Vt,"SQLNULL",{name:"SQLNULL"}),tt(Vt,"TIME",{name:"TIME"}),tt(Vt,"TIME_TZ",{name:"TIME_TZ"}),tt(Vt,"TIMESTAMP",{name:"TIMESTAMP"}),tt(Vt,"TIMESTAMP_S",{name:"TIMESTAMP_S"}),tt(Vt,"TIMESTAMP_MS",{name:"TIMESTAMP_MS"}),tt(Vt,"TIMESTAMP_NS",{name:"TIMESTAMP_NS"}),tt(Vt,"TIMESTAMP_TZ",{name:"TIMESTAMP_TZ"}),tt(Vt,"TINYINT",{name:"TINYINT"}),tt(Vt,"UBIGINT",{name:"UBIGINT"}),tt(Vt,"UHUGEINT",{name:"UHUGEINT"}),tt(Vt,"UINTEGER",{name:"UINTEGER"}),tt(Vt,"USMALLINT",{name:"USMALLINT"}),tt(Vt,"UTINYINT",{name:"UTINYINT"}),tt(Vt,"UUID",{name:"UUID"}),tt(Vt,"VARCHAR",{name:"VARCHAR"}),tt(Vt,"WKB_BLOB",{name:"WKB_BLOB"}),Vt);function tc(e){return e==null?"NULL":typeof e=="string"?`'${e.replace("'","''")}'`:String(e)}var _r=class{toString(){return this.toDuckDBString()}};function Vw(e){return e===null?null:e instanceof _r?e.toJS():e}var Ebt=class extends _r{constructor(t){super();tt(this,"values");this.values=t}toDuckDBString(){return`[${this.values.map(tc).join(", ")}]`}toJS(){return this.values.map(Vw)}};function Tbt(e){let t="";for(let n of e)n<=31||n===34||n===39||n>=127?t+=`\\x${n.toString(16).toUpperCase().padStart(2,"0")}`:t+=String.fromCharCode(n);return t}var Abt=class extends _r{constructor(t){super();tt(this,"bytes");this.bytes=t}toDuckDBString(){return Tbt(this.bytes)}toJS(){return this.bytes}},kI=BigInt(1e6),Mbt=BigInt(1e3),Nbt=BigInt(1e3),gD=BigInt(60),vD=BigInt(60),ug=BigInt(864e8),$bt=BigInt("-9223372036854775807"),kbt=BigInt("9223372036854775807");function Dbt(e,t,n){let r=String(Math.abs(e)).padStart(4,"0"),i=String(t).padStart(2,"0"),s=String(n).padStart(2,"0");return`${r}-${i}-${s}${e<0?" (BC)":""}`}function jj(e){let t=Math.abs(e),n=e<0?-1:1,r=Math.floor(t/146097),i=n*r*400,s=t%146097,o=n*s*864e5,a=new Date(o),c=i+a.getUTCFullYear();c<0&&c--;let l=a.getUTCMonth()+1,u=a.getUTCDate();return Dbt(c,l,u)}function Obt(e,t,n,r){let i=String(e).padStart(2,"0"),s=String(t).padStart(2,"0"),o=String(n).padStart(2,"0"),a=String(r).padStart(6,"0").replace(/0+$/,"");return`${i}:${s}:${o}${a.length>0?`.${a}`:""}`}function Vj(e){let t=e%kI,n=e/kI,r=n%gD,i=n/gD,s=i%vD,o=i/vD;return Obt(o,s,r,t)}function Yj(e){let t=e<0?e+ug:e;return Vj(t)}function Rbt(e){let t=e<0,n=t?-e:e,r=Vj(n);return t?`-${r}`:r}function Fbt(e,t,n){let r=jj(Number(e)),i=Yj(t),s=n?` ${n}`:"";return`${r} ${i}${s}`}function Yw(e,t){if(e===$bt)return"-infinity";if(e===kbt)return"infinity";let n=e/ug,r=e%ug;return r<0&&(n--,r+=ug),Fbt(n,r,t)}function Lbt(e,t){return Yw(e*kI,t)}function Bbt(e,t){return Yw(e*Mbt,t)}function Cbt(e,t){return Yw(e/Nbt,t)}function $2(e,t){return`${e} ${t}${e!==1?"s":""}`}function Ubt(e,t,n){let r=[];if(e!==0){let i=e<0?-1:1,s=Math.abs(e),o=Math.floor(s/12),a=i*o,c=i*(s-o*12);a!==0&&r.push($2(a,"year")),c!==0&&r.push($2(c,"month"))}return t!==0&&r.push($2(t,"day")),n!==BigInt(0)&&r.push(Rbt(n)),r.length>0?r.join(" "):"00:00:00"}var Pbt=class extends _r{constructor(t){super();tt(this,"days");this.days=t}toDuckDBString(){return jj(this.days)}toJS(){return this.toDuckDBString()}};function zbt(e){var t;return((t=new Intl.NumberFormat(e,{useGrouping:!1}).formatToParts(.1).find(n=>n.type==="decimal"))==null?void 0:t.value)??"."}var k2={};function jbt(e){let t=JSON.stringify(e);if(t in k2)return k2[t];let n=zbt(e);return k2[t]=n,n}function Vbt(e,t){if(e){let{minimumFractionDigits:n,maximumFractionDigits:r,...i}=e.options??{};return t.toLocaleString(e==null?void 0:e.locales,i)}return String(t)}function Ybt(e,t,n){var o,a;let r=String(t).padStart(n,"0");if(!e)return r;let i=((o=e==null?void 0:e.options)==null?void 0:o.minimumFractionDigits)??0,s=((a=e==null?void 0:e.options)==null?void 0:a.maximumFractionDigits)??20;return r.padEnd(i,"0").slice(0,s)}function bD(e,t,n){if(t>0){let r=BigInt(10)**BigInt(t),i=e<0?-e:e,s=e<0?"-":"",o=i/r,a=Vbt(n,o),c=i%r,l=Ybt(n,c,t),u=n?jbt(n.locales):".";return`${s}${a}${u}${l}`}return n?e.toLocaleString(n==null?void 0:n.locales,n==null?void 0:n.options):String(e)}var qbt=class extends _r{constructor(t,n){super();tt(this,"scaledValue");tt(this,"scale");this.scaledValue=t,this.scale=n}toDuckDBString(){return bD(this.scaledValue,this.scale)}toLocaleString(t,n){return bD(this.scaledValue,this.scale,{locales:t,options:n})}toJS(){return this.toDuckDBString()}},Wbt=class extends _r{constructor(t,n,r){super();tt(this,"months");tt(this,"days");tt(this,"microseconds");this.months=t,this.days=n,this.microseconds=r}toDuckDBString(){return Ubt(this.months,this.days,this.microseconds)}toJS(){return this.toDuckDBString()}},Gbt=class extends _r{constructor(t){super();tt(this,"values");this.values=t}toDuckDBString(){return`[${this.values.map(tc).join(", ")}]`}toJS(){return this.values.map(Vw)}},Hbt=class extends _r{constructor(t){super();tt(this,"entries");this.entries=t}toDuckDBString(){return`{${this.entries.map(({key:t,value:n})=>`${tc(t)}: ${tc(n)}`).join(", ")}}`}toJS(){let t={};for(let{key:n,value:r}of this.entries){let i=tc(n);t[i]=Vw(r)}return t}},Xbt=class extends _r{constructor(t){super();tt(this,"entries");this.entries=t}toDuckDBString(){return`{${this.entries.map(({key:t,value:n})=>`${tc(t)}: ${tc(n)}`).join(", ")}}`}toJS(){let t={};for(let{key:n,value:r}of this.entries){let i=tc(n);t[i]=Vw(r)}return t}},Qbt=class extends _r{constructor(t){super();tt(this,"microseconds");this.microseconds=t}toDuckDBString(){return Yj(this.microseconds)}toJS(){return this.toDuckDBString()}},Kbt=class extends _r{constructor(t,n){super();tt(this,"microseconds");tt(this,"timezone");this.microseconds=t,this.timezone=n}toDuckDBString(){return Yw(this.microseconds,this.timezone)}toJS(){return this.toDuckDBString()}},Zbt=class extends _r{constructor(t){super();tt(this,"milliseconds");this.milliseconds=t}toDuckDBString(){return Bbt(this.milliseconds)}toJS(){return this.toDuckDBString()}},Jbt=class extends _r{constructor(t){super();tt(this,"nanoseconds");this.nanoseconds=t}toDuckDBString(){return Cbt(this.nanoseconds)}toJS(){return this.toDuckDBString()}},twt=class extends _r{constructor(t){super();tt(this,"seconds");this.seconds=t}toDuckDBString(){return Lbt(this.seconds)}toJS(){return this.toDuckDBString()}};function mh(e,t,n){t===void 0&&(t=0),n===void 0&&(n=e.length);let r="";for(let i=t;i<n;i++){let s=e[i];r+=(s<16?"0":"")+s.toString(16)}return r}var ewt=class extends _r{constructor(t){super();tt(this,"bytes");this.bytes=t}toDuckDBString(){if(this.bytes.length!==16)throw new Error("Invalid UUID bytes length");return`${mh(this.bytes,0,4)}-${mh(this.bytes,4,6)}-${mh(this.bytes,6,8)}-${mh(this.bytes,8,10)}-${mh(this.bytes,10,16)}`}toJS(){return this.toDuckDBString()}};function DI(e,t){return t.length===0?e:e.endsWith("/")?`${e}${t}`:`${e}/${t}`}function nwt(e){return typeof(e==null?void 0:e.version)=="string"}async function qj(e){let t=await(await fetch(DI(e.href,"version"))).json();if(!nwt(t))throw new Error(`Unexpected version information: ${JSON.stringify(t)}`);let{version:n}=t;return n}async function rwt(){return new Promise(e=>{let t=URL.createObjectURL(new Blob(["self.postMessage({ canCreateWorker: !!self.Worker });"],{type:"application/javascript"})),n=new Worker(t);URL.revokeObjectURL(t),n.addEventListener("message",r);function r(i){n.removeEventListener("message",r),n.terminate(),e(!!i.data.canCreateWorker)}})}function iwt(e,t){return DI(DI(e.href,t),"duckdb-wasm")}var swt="MD_EVENT",sb;(function(e){e.CATALOG_CHANGE_EVENT="CatalogChangeEvent"})(sb||(sb={}));var owt=class extends CustomEvent{constructor(e,t){super(e,{detail:t})}},awt=class extends owt{constructor(e){super(sb.CATALOG_CHANGE_EVENT,e)}};function cwt(e){var t;switch((t=e.data)==null?void 0:t.name){case sb.CATALOG_CHANGE_EVENT:return new awt(e.data);default:return null}}async function lwt(e){return(await e.query("from MD_IS_NETWORK_READY();")).toArray()[0].Success}async function uwt(e){for(let t=0;t<1e3;++t){if(await lwt(e))return;await new Promise(n=>setTimeout(n,10))}throw new Error("Could not initialize worker after 10 seconds.")}async function fwt(e){let{instance:t,logLevel:n,skipWelcomePack:r,token:i}=e,s=e.extensionRepositoryUrlPrefix||new URL("https://app.motherduck.com"),o=e.apiUrl||new URL("https://api.motherduck.com"),a=e.extensionVersion??await qj(s),c=iwt(s,a),l=t._worker;l&&l.addEventListener("message",f=>{var h,p;if(((h=f.data)==null?void 0:h.type)!==swt)return;let d=cwt(f);d?globalThis.dispatchEvent(d):console.warn(`Unrecognized MD_EVENT, name=${(p=f.data)==null?void 0:p.name}`)}),!(!/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||await rwt())&&l&&l.addEventListener("message",f=>{if(f&&f.data&&f.data.type==="Initialize"){let d=new Worker(f.data.workerUrl);URL.revokeObjectURL(f.data.workerUrl),d.postMessage(f.data,[f.data.port])}});let u=await t.connect();try{await u.query(`SET custom_extension_repository="${c}";`),await u.query("LOAD motherduck;"),await u.query("RESET custom_extension_repository;"),await u.query(`SET motherduck_host='${o.hostname}';`),o.port&&await u.query(`SET motherduck_port='${o.port}';`),o.protocol==="http:"&&await u.query("SET motherduck_use_tls=false;"),await u.query(`SET motherduck_token='${i}';`),await uwt(u),n&&await u.query(`SET motherduck_log_level='${n}';`),r||await u.query("PRAGMA MD_USE_DEFAULT")}finally{await u.close()}}var ob;(function(e){e.NONE="none",e.ERROR="error",e.INFO="info",e.DEBUG="debug",e.TRACE="trace"})(ob||(ob={}));var dwt=Object.create,Wj=Object.defineProperty,hwt=Object.getOwnPropertyDescriptor,pwt=Object.getOwnPropertyNames,ywt=Object.getPrototypeOf,mwt=Object.prototype.hasOwnProperty,gwt=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),vwt=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of pwt(t))!mwt.call(e,i)&&i!==n&&Wj(e,i,{get:()=>t[i],enumerable:!(r=hwt(t,i))||r.enumerable});return e},bwt=(e,t,n)=>(n=e!=null?dwt(ywt(e)):{},vwt(t||!e||!e.__esModule?Wj(n,"default",{value:e,enumerable:!0}):n,e)),wwt=gwt((e,t)=>{t.exports=Worker}),_wt=(e=>(e[e.UNDEFINED=0]="UNDEFINED",e[e.AUTOMATIC=1]="AUTOMATIC",e[e.READ_ONLY=2]="READ_ONLY",e[e.READ_WRITE=3]="READ_WRITE",e))(_wt||{}),Swt=(e=>(e[e.IDENTIFIER=0]="IDENTIFIER",e[e.NUMERIC_CONSTANT=1]="NUMERIC_CONSTANT",e[e.STRING_CONSTANT=2]="STRING_CONSTANT",e[e.OPERATOR=3]="OPERATOR",e[e.KEYWORD=4]="KEYWORD",e[e.COMMENT=5]="COMMENT",e))(Swt||{}),OI=(e=>(e[e.NONE=0]="NONE",e[e.DEBUG=1]="DEBUG",e[e.INFO=2]="INFO",e[e.WARNING=3]="WARNING",e[e.ERROR=4]="ERROR",e))(OI||{}),xwt=(e=>(e[e.NONE=0]="NONE",e[e.CONNECT=1]="CONNECT",e[e.DISCONNECT=2]="DISCONNECT",e[e.OPEN=3]="OPEN",e[e.QUERY=4]="QUERY",e[e.INSTANTIATE=5]="INSTANTIATE",e))(xwt||{}),Iwt=(e=>(e[e.NONE=0]="NONE",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR",e[e.START=3]="START",e[e.RUN=4]="RUN",e[e.CAPTURE=5]="CAPTURE",e))(Iwt||{}),Ewt=(e=>(e[e.NONE=0]="NONE",e[e.WEB_WORKER=1]="WEB_WORKER",e[e.NODE_WORKER=2]="NODE_WORKER",e[e.BINDINGS=3]="BINDINGS",e[e.ASYNC_DUCKDB=4]="ASYNC_DUCKDB",e))(Ewt||{}),Twt=(e=>(e[e.SUCCESS=0]="SUCCESS",e))(Twt||{}),Awt=(e=>(e.CANCEL_PENDING_QUERY="CANCEL_PENDING_QUERY",e.CLOSE_PREPARED="CLOSE_PREPARED",e.COLLECT_FILE_STATISTICS="COLLECT_FILE_STATISTICS",e.CONNECT="CONNECT",e.COPY_FILE_TO_BUFFER="COPY_FILE_TO_BUFFER",e.COPY_FILE_TO_PATH="COPY_FILE_TO_PATH",e.CREATE_PREPARED="CREATE_PREPARED",e.DISCONNECT="DISCONNECT",e.DROP_FILE="DROP_FILE",e.DROP_FILES="DROP_FILES",e.EXPORT_FILE_STATISTICS="EXPORT_FILE_STATISTICS",e.FETCH_QUERY_RESULTS="FETCH_QUERY_RESULTS",e.FLUSH_FILES="FLUSH_FILES",e.GET_FEATURE_FLAGS="GET_FEATURE_FLAGS",e.GET_TABLE_NAMES="GET_TABLE_NAMES",e.GET_VERSION="GET_VERSION",e.GLOB_FILE_INFOS="GLOB_FILE_INFOS",e.INSERT_ARROW_FROM_IPC_STREAM="INSERT_ARROW_FROM_IPC_STREAM",e.INSERT_CSV_FROM_PATH="IMPORT_CSV_FROM_PATH",e.INSERT_JSON_FROM_PATH="IMPORT_JSON_FROM_PATH",e.INSTANTIATE="INSTANTIATE",e.OPEN="OPEN",e.PING="PING",e.POLL_PENDING_QUERY="POLL_PENDING_QUERY",e.REGISTER_FILE_BUFFER="REGISTER_FILE_BUFFER",e.REGISTER_FILE_HANDLE="REGISTER_FILE_HANDLE",e.REGISTER_FILE_URL="REGISTER_FILE_URL",e.RESET="RESET",e.RUN_PREPARED="RUN_PREPARED",e.RUN_QUERY="RUN_QUERY",e.SEND_PREPARED="SEND_PREPARED",e.START_PENDING_QUERY="START_PENDING_QUERY",e.TOKENIZE="TOKENIZE",e))(Awt||{}),Mwt=(e=>(e.CONNECTION_INFO="CONNECTION_INFO",e.ERROR="ERROR",e.FEATURE_FLAGS="FEATURE_FLAGS",e.FILE_BUFFER="FILE_BUFFER",e.FILE_INFOS="FILE_INFOS",e.FILE_SIZE="FILE_SIZE",e.FILE_STATISTICS="FILE_STATISTICS",e.INSTANTIATE_PROGRESS="INSTANTIATE_PROGRESS",e.LOG="LOG",e.OK="OK",e.PREPARED_STATEMENT_ID="PREPARED_STATEMENT_ID",e.QUERY_PLAN="QUERY_PLAN",e.QUERY_RESULT="QUERY_RESULT",e.QUERY_RESULT_CHUNK="QUERY_RESULT_CHUNK",e.QUERY_RESULT_HEADER="QUERY_RESULT_HEADER",e.QUERY_RESULT_HEADER_OR_NULL="QUERY_RESULT_HEADER_OR_NULL",e.REGISTERED_FILE="REGISTERED_FILE",e.SCRIPT_TOKENS="SCRIPT_TOKENS",e.SUCCESS="SUCCESS",e.TABLE_NAMES="TABLE_NAMES",e.VERSION_STRING="VERSION_STRING",e))(Mwt||{});new TextEncoder;var Nwt={name:"@duckdb/duckdb-wasm",version:"1.29.1-dev3.0",description:"DuckDB powered by WebAssembly",license:"MIT",repository:{type:"git",url:"https://github.com/duckdb/duckdb-wasm.git"},keywords:["sql","duckdb","relational","database","data","query","wasm","analytics","olap","arrow","parquet","json","csv"],dependencies:{"apache-arrow":"^17.0.0"},devDependencies:{"@types/emscripten":"^1.39.10","@types/jasmine":"^5.1.4","@typescript-eslint/eslint-plugin":"^6.21.0","@typescript-eslint/parser":"^6.21.0",esbuild:"^0.20.2",eslint:"^8.57.0","eslint-plugin-jasmine":"^4.1.3","eslint-plugin-react":"^7.34.0","fast-glob":"^3.3.2",jasmine:"^5.1.0","jasmine-core":"^5.1.2","jasmine-spec-reporter":"^7.0.0","js-sha256":"^0.11.0",karma:"^6.4.2","karma-chrome-launcher":"^3.2.0","karma-coverage":"^2.2.1","karma-firefox-launcher":"^2.1.3","karma-jasmine":"^5.1.0","karma-jasmine-html-reporter":"^2.1.0","karma-sourcemap-loader":"^0.4.0","karma-spec-reporter":"^0.0.36","make-dir":"^4.0.0",nyc:"^15.1.0",prettier:"^3.2.5",puppeteer:"^22.8.0",rimraf:"^5.0.5",s3rver:"^3.7.1",typedoc:"^0.25.13",typescript:"^5.3.3","wasm-feature-detect":"^1.6.1","web-worker":"^1.2.0"},scripts:{"build:debug":"node bundle.mjs debug && tsc --emitDeclarationOnly","build:release":"node bundle.mjs release && tsc --emitDeclarationOnly",docs:"typedoc",report:"node ./coverage.mjs","test:node":"node --enable-source-maps ../../node_modules/jasmine/bin/jasmine ./dist/tests-node.cjs","test:node:debug":"node --inspect-brk --enable-source-maps ../../node_modules/jasmine/bin/jasmine ./dist/tests-node.cjs","test:node:coverage":"nyc -r json --report-dir ./coverage/node node ../../node_modules/jasmine/bin/jasmine ./dist/tests-node.cjs","test:firefox":"karma start ./karma/tests-firefox.cjs","test:chrome":"karma start ./karma/tests-chrome.cjs","test:chrome:eh":"karma start ./karma/tests-chrome-eh.cjs","test:chrome:coverage":"karma start ./karma/tests-chrome-coverage.cjs","test:browser":"karma start ./karma/tests-all.cjs","test:browser:debug":"karma start ./karma/tests-debug.cjs",test:"npm run test:chrome && npm run test:node","test:coverage":"npm run test:chrome:coverage && npm run test:node:coverage && npm run report",lint:"eslint src test"},files:["dist","!dist/tests-*","!dist/duckdb-browser-mvp.worker.js.map","!dist/types/test"],main:"dist/duckdb-browser.cjs",module:"dist/duckdb-browser.mjs",types:"dist/duckdb-browser.d.ts",jsdelivr:"dist/duckdb-browser.cjs",unpkg:"dist/duckdb-browser.mjs",sideEffects:!1,browser:{fs:!1,path:!1,perf_hooks:!1,os:!1,worker_threads:!1},exports:{"./dist/duckdb-mvp.wasm":"./dist/duckdb-mvp.wasm","./dist/duckdb-eh.wasm":"./dist/duckdb-eh.wasm","./dist/duckdb-coi.wasm":"./dist/duckdb-coi.wasm","./dist/duckdb-browser":"./dist/duckdb-browser.mjs","./dist/duckdb-browser.cjs":"./dist/duckdb-browser.cjs","./dist/duckdb-browser.mjs":"./dist/duckdb-browser.mjs","./dist/duckdb-browser-coi.pthread.worker.js":"./dist/duckdb-browser-coi.pthread.worker.js","./dist/duckdb-browser-coi.worker.js":"./dist/duckdb-browser-coi.worker.js","./dist/duckdb-browser-eh.worker.js":"./dist/duckdb-browser-eh.worker.js","./dist/duckdb-browser-mvp.worker.js":"./dist/duckdb-browser-mvp.worker.js","./dist/duckdb-node":"./dist/duckdb-node.cjs","./dist/duckdb-node.cjs":"./dist/duckdb-node.cjs","./dist/duckdb-node-blocking":"./dist/duckdb-node-blocking.cjs","./dist/duckdb-node-blocking.cjs":"./dist/duckdb-node-blocking.cjs","./dist/duckdb-node-eh.worker.cjs":"./dist/duckdb-node-eh.worker.cjs","./dist/duckdb-node-mvp.worker.cjs":"./dist/duckdb-node-mvp.worker.cjs","./blocking":{node:{types:"./dist/duckdb-node-blocking.d.ts",require:"./dist/duckdb-node-blocking.cjs",import:"./dist/duckdb-node-blocking.cjs"},types:"./dist/duckdb-node-blocking.d.ts",import:"./dist/duckdb-node-blocking.mjs",require:"./dist/duckdb-node-blocking.cjs"},".":{browser:{types:"./dist/duckdb-browser.d.ts",import:"./dist/duckdb-browser.mjs",require:"./dist/duckdb-browser.cjs"},node:{types:"./dist/duckdb-node.d.ts",import:"./dist/duckdb-node.cjs",require:"./dist/duckdb-node.cjs"},types:"./dist/duckdb-browser.d.ts",import:"./dist/duckdb-browser.mjs",require:"./dist/duckdb-browser.cjs"}}},XA=Nwt.version.split(".");XA[0];XA[1];XA[2];bwt(wwt());function $wt(){let e=new TextDecoder;return t=>(typeof SharedArrayBuffer<"u"&&t.buffer instanceof SharedArrayBuffer&&(t=new Uint8Array(t)),e.decode(t))}$wt();var kwt=(e=>(e[e.BUFFER=0]="BUFFER",e[e.NODE_FS=1]="NODE_FS",e[e.BROWSER_FILEREADER=2]="BROWSER_FILEREADER",e[e.BROWSER_FSACCESS=3]="BROWSER_FSACCESS",e[e.HTTP=4]="HTTP",e[e.S3=5]="S3",e))(kwt||{}),Gj=null;function Dwt(){return Gj}function Hj(e){Gj=e}var Owt=Object.create,Xj=Object.defineProperty,Rwt=Object.getOwnPropertyDescriptor,Fwt=Object.getOwnPropertyNames,Lwt=Object.getPrototypeOf,Bwt=Object.prototype.hasOwnProperty,Cwt=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Uwt=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of Fwt(t))!Bwt.call(e,i)&&i!==n&&Xj(e,i,{get:()=>t[i],enumerable:!(r=Rwt(t,i))||r.enumerable});return e},Pwt=(e,t,n)=>(n=e!=null?Owt(Lwt(e)):{},Uwt(t||!e||!e.__esModule?Xj(n,"default",{value:e,enumerable:!0}):n,e)),zwt=Cwt((e,t)=>{t.exports=Worker}),jwt=(e=>(e[e.UNDEFINED=0]="UNDEFINED",e[e.AUTOMATIC=1]="AUTOMATIC",e[e.READ_ONLY=2]="READ_ONLY",e[e.READ_WRITE=3]="READ_WRITE",e))(jwt||{}),Vwt=(e=>(e[e.IDENTIFIER=0]="IDENTIFIER",e[e.NUMERIC_CONSTANT=1]="NUMERIC_CONSTANT",e[e.STRING_CONSTANT=2]="STRING_CONSTANT",e[e.OPERATOR=3]="OPERATOR",e[e.KEYWORD=4]="KEYWORD",e[e.COMMENT=5]="COMMENT",e))(Vwt||{}),Ywt=(e=>(e[e.NONE=0]="NONE",e[e.DEBUG=1]="DEBUG",e[e.INFO=2]="INFO",e[e.WARNING=3]="WARNING",e[e.ERROR=4]="ERROR",e))(Ywt||{}),qwt=(e=>(e[e.NONE=0]="NONE",e[e.CONNECT=1]="CONNECT",e[e.DISCONNECT=2]="DISCONNECT",e[e.OPEN=3]="OPEN",e[e.QUERY=4]="QUERY",e[e.INSTANTIATE=5]="INSTANTIATE",e))(qwt||{}),Wwt=(e=>(e[e.NONE=0]="NONE",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR",e[e.START=3]="START",e[e.RUN=4]="RUN",e[e.CAPTURE=5]="CAPTURE",e))(Wwt||{}),Gwt=(e=>(e[e.NONE=0]="NONE",e[e.WEB_WORKER=1]="WEB_WORKER",e[e.NODE_WORKER=2]="NODE_WORKER",e[e.BINDINGS=3]="BINDINGS",e[e.ASYNC_DUCKDB=4]="ASYNC_DUCKDB",e))(Gwt||{}),Hwt=class{constructor(e=2){this.level=e}log(e){e.level>=this.level&&console.log(e)}},Xwt=(e=>(e[e.SUCCESS=0]="SUCCESS",e))(Xwt||{}),Qwt=class{constructor(e,t){this._bindings=e,this._conn=t}get bindings(){return this._bindings}async close(){return this._bindings.disconnect(this._conn)}useUnsafe(e){return e(this._bindings,this._conn)}async query(e){this._bindings.logger.log({timestamp:new Date,level:2,origin:4,topic:4,event:4,value:e});let t=await this._bindings.runQuery(this._conn,e),n=$i.from(t);return console.assert(n.isSync(),"Reader is not sync"),console.assert(n.isFile(),"Reader is not file"),new Kn(n)}async send(e){this._bindings.logger.log({timestamp:new Date,level:2,origin:4,topic:4,event:4,value:e});let t=await this._bindings.startPendingQuery(this._conn,e);for(;t==null;)t=await this._bindings.pollPendingQuery(this._conn);let n=new Qj(this._bindings,this._conn,t),r=await $i.from(n);return console.assert(r.isAsync()),console.assert(r.isStream()),r}async cancelSent(){return await this._bindings.cancelPendingQuery(this._conn)}async getTableNames(e){return await this._bindings.getTableNames(this._conn,e)}async prepare(e){let t=await this._bindings.createPrepared(this._conn,e);return new Kwt(this._bindings,this._conn,t)}async insertArrowTable(e,t){let n=hvt(e,"stream");await this.insertArrowFromIPCStream(n,t)}async insertArrowFromIPCStream(e,t){await this._bindings.insertArrowFromIPCStream(this._conn,e,t)}async insertCSVFromPath(e,t){await this._bindings.insertCSVFromPath(this._conn,e,t)}async insertJSONFromPath(e,t){await this._bindings.insertJSONFromPath(this._conn,e,t)}},Qj=class{constructor(e,t,n){this.db=e,this.conn=t,this.header=n,this._first=!0,this._depleted=!1,this._inFlight=null}async next(){if(this._first)return this._first=!1,{done:!1,value:this.header};if(this._depleted)return{done:!0,value:null};let e;return this._inFlight!=null?(e=await this._inFlight,this._inFlight=null):e=await this.db.fetchQueryResults(this.conn),this._depleted=e.length==0,this._depleted||(this._inFlight=this.db.fetchQueryResults(this.conn)),{done:this._depleted,value:e}}[Symbol.asyncIterator](){return this}},Kwt=class{constructor(e,t,n){this.bindings=e,this.connectionId=t,this.statementId=n}async close(){await this.bindings.closePrepared(this.connectionId,this.statementId)}async query(...e){let t=await this.bindings.runPrepared(this.connectionId,this.statementId,e),n=$i.from(t);return console.assert(n.isSync()),console.assert(n.isFile()),new Kn(n)}async send(...e){let t=await this.bindings.sendPrepared(this.connectionId,this.statementId,e),n=new Qj(this.bindings,this.connectionId,t),r=await $i.from(n);return console.assert(r.isAsync()),console.assert(r.isStream()),r}},Zwt=(e=>(e.CANCEL_PENDING_QUERY="CANCEL_PENDING_QUERY",e.CLOSE_PREPARED="CLOSE_PREPARED",e.COLLECT_FILE_STATISTICS="COLLECT_FILE_STATISTICS",e.CONNECT="CONNECT",e.COPY_FILE_TO_BUFFER="COPY_FILE_TO_BUFFER",e.COPY_FILE_TO_PATH="COPY_FILE_TO_PATH",e.CREATE_PREPARED="CREATE_PREPARED",e.DISCONNECT="DISCONNECT",e.DROP_FILE="DROP_FILE",e.DROP_FILES="DROP_FILES",e.EXPORT_FILE_STATISTICS="EXPORT_FILE_STATISTICS",e.FETCH_QUERY_RESULTS="FETCH_QUERY_RESULTS",e.FLUSH_FILES="FLUSH_FILES",e.GET_FEATURE_FLAGS="GET_FEATURE_FLAGS",e.GET_TABLE_NAMES="GET_TABLE_NAMES",e.GET_VERSION="GET_VERSION",e.GLOB_FILE_INFOS="GLOB_FILE_INFOS",e.INSERT_ARROW_FROM_IPC_STREAM="INSERT_ARROW_FROM_IPC_STREAM",e.INSERT_CSV_FROM_PATH="IMPORT_CSV_FROM_PATH",e.INSERT_JSON_FROM_PATH="IMPORT_JSON_FROM_PATH",e.INSTANTIATE="INSTANTIATE",e.OPEN="OPEN",e.PING="PING",e.POLL_PENDING_QUERY="POLL_PENDING_QUERY",e.REGISTER_FILE_BUFFER="REGISTER_FILE_BUFFER",e.REGISTER_FILE_HANDLE="REGISTER_FILE_HANDLE",e.REGISTER_FILE_URL="REGISTER_FILE_URL",e.RESET="RESET",e.RUN_PREPARED="RUN_PREPARED",e.RUN_QUERY="RUN_QUERY",e.SEND_PREPARED="SEND_PREPARED",e.START_PENDING_QUERY="START_PENDING_QUERY",e.TOKENIZE="TOKENIZE",e))(Zwt||{}),Jwt=(e=>(e.CONNECTION_INFO="CONNECTION_INFO",e.ERROR="ERROR",e.FEATURE_FLAGS="FEATURE_FLAGS",e.FILE_BUFFER="FILE_BUFFER",e.FILE_INFOS="FILE_INFOS",e.FILE_SIZE="FILE_SIZE",e.FILE_STATISTICS="FILE_STATISTICS",e.INSTANTIATE_PROGRESS="INSTANTIATE_PROGRESS",e.LOG="LOG",e.OK="OK",e.PREPARED_STATEMENT_ID="PREPARED_STATEMENT_ID",e.QUERY_PLAN="QUERY_PLAN",e.QUERY_RESULT="QUERY_RESULT",e.QUERY_RESULT_CHUNK="QUERY_RESULT_CHUNK",e.QUERY_RESULT_HEADER="QUERY_RESULT_HEADER",e.QUERY_RESULT_HEADER_OR_NULL="QUERY_RESULT_HEADER_OR_NULL",e.REGISTERED_FILE="REGISTERED_FILE",e.SCRIPT_TOKENS="SCRIPT_TOKENS",e.SUCCESS="SUCCESS",e.TABLE_NAMES="TABLE_NAMES",e.VERSION_STRING="VERSION_STRING",e))(Jwt||{}),te=class{constructor(e,t){this.promiseResolver=()=>{},this.promiseRejecter=()=>{},this.type=e,this.data=t,this.promise=new Promise((n,r)=>{this.promiseResolver=n,this.promiseRejecter=r})}};function fg(e){switch(e.typeId){case k.Binary:return{sqlType:"binary"};case k.Bool:return{sqlType:"bool"};case k.Date:return{sqlType:"date"};case k.DateDay:return{sqlType:"date32[d]"};case k.DateMillisecond:return{sqlType:"date64[ms]"};case k.Decimal:{let t=e;return{sqlType:"decimal",precision:t.precision,scale:t.scale}}case k.Float:return{sqlType:"float"};case k.Float16:return{sqlType:"float16"};case k.Float32:return{sqlType:"float32"};case k.Float64:return{sqlType:"float64"};case k.Int:return{sqlType:"int32"};case k.Int16:return{sqlType:"int16"};case k.Int32:return{sqlType:"int32"};case k.Int64:return{sqlType:"int64"};case k.Uint16:return{sqlType:"uint16"};case k.Uint32:return{sqlType:"uint32"};case k.Uint64:return{sqlType:"uint64"};case k.Uint8:return{sqlType:"uint8"};case k.IntervalDayTime:return{sqlType:"interval[dt]"};case k.IntervalYearMonth:return{sqlType:"interval[m]"};case k.List:return{sqlType:"list",valueType:fg(e.valueType)};case k.FixedSizeBinary:return{sqlType:"fixedsizebinary",byteWidth:e.byteWidth};case k.Null:return{sqlType:"null"};case k.Utf8:return{sqlType:"utf8"};case k.Struct:return{sqlType:"struct",fields:e.children.map(t=>RI(t.name,t.type))};case k.Map:{let t=e;return{sqlType:"map",keyType:fg(t.keyType),valueType:fg(t.valueType)}}case k.Time:return{sqlType:"time[s]"};case k.TimeMicrosecond:return{sqlType:"time[us]"};case k.TimeMillisecond:return{sqlType:"time[ms]"};case k.TimeNanosecond:return{sqlType:"time[ns]"};case k.TimeSecond:return{sqlType:"time[s]"};case k.Timestamp:return{sqlType:"timestamp",timezone:e.timezone||void 0};case k.TimestampSecond:return{sqlType:"timestamp[s]",timezone:e.timezone||void 0};case k.TimestampMicrosecond:return{sqlType:"timestamp[us]",timezone:e.timezone||void 0};case k.TimestampNanosecond:return{sqlType:"timestamp[ns]",timezone:e.timezone||void 0};case k.TimestampMillisecond:return{sqlType:"timestamp[ms]",timezone:e.timezone||void 0}}throw new Error("unsupported arrow type: ".concat(e.toString()))}function RI(e,t){let n=fg(t);return n.name=e,n}var t_t=new TextEncoder,e_t=class{constructor(e,t=null){this._onInstantiationProgress=[],this._worker=null,this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{},this._nextMessageId=0,this._pendingRequests=new Map,this._logger=e,this._onMessageHandler=this.onMessage.bind(this),this._onErrorHandler=this.onError.bind(this),this._onCloseHandler=this.onClose.bind(this),t!=null&&this.attach(t)}get logger(){return this._logger}attach(e){this._worker=e,this._worker.addEventListener("message",this._onMessageHandler),this._worker.addEventListener("error",this._onErrorHandler),this._worker.addEventListener("close",this._onCloseHandler),this._workerShutdownPromise=new Promise((t,n)=>{this._workerShutdownResolver=t})}detach(){this._worker&&(this._worker.removeEventListener("message",this._onMessageHandler),this._worker.removeEventListener("error",this._onErrorHandler),this._worker.removeEventListener("close",this._onCloseHandler),this._worker=null,this._workerShutdownResolver(null),this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{})}async terminate(){this._worker&&(this._worker.terminate(),this._worker=null,this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{})}async postTask(e,t=[]){if(!this._worker){console.error("cannot send a message since the worker is not set!");return}let n=this._nextMessageId++;return this._pendingRequests.set(n,e),this._worker.postMessage({messageId:n,type:e.type,data:e.data},t),await e.promise}onMessage(e){var t;let n=e.data;switch(n.type){case"LOG":{this._logger.log(n.data);return}case"INSTANTIATE_PROGRESS":{for(let i of this._onInstantiationProgress)i(n.data);return}}let r=this._pendingRequests.get(n.requestId);if(!r){console.warn("unassociated response: [".concat(n.requestId,", ").concat(n.type.toString(),"]"));return}if(this._pendingRequests.delete(n.requestId),n.type=="ERROR"){let i=new Error(n.data.message);i.name=n.data.name,(t=Object.getOwnPropertyDescriptor(i,"stack"))!=null&&t.writable&&(i.stack=n.data.stack),r.promiseRejecter(i);return}switch(r.type){case"CLOSE_PREPARED":case"COLLECT_FILE_STATISTICS":case"COPY_FILE_TO_PATH":case"DISCONNECT":case"DROP_FILE":case"DROP_FILES":case"FLUSH_FILES":case"INSERT_ARROW_FROM_IPC_STREAM":case"IMPORT_CSV_FROM_PATH":case"IMPORT_JSON_FROM_PATH":case"OPEN":case"PING":case"REGISTER_FILE_BUFFER":case"REGISTER_FILE_HANDLE":case"REGISTER_FILE_URL":case"RESET":if(n.type=="OK"){r.promiseResolver(n.data);return}break;case"INSTANTIATE":if(this._onInstantiationProgress=[],n.type=="OK"){r.promiseResolver(n.data);return}break;case"GLOB_FILE_INFOS":if(n.type=="FILE_INFOS"){r.promiseResolver(n.data);return}break;case"GET_VERSION":if(n.type=="VERSION_STRING"){r.promiseResolver(n.data);return}break;case"GET_FEATURE_FLAGS":if(n.type=="FEATURE_FLAGS"){r.promiseResolver(n.data);return}break;case"GET_TABLE_NAMES":if(n.type=="TABLE_NAMES"){r.promiseResolver(n.data);return}break;case"TOKENIZE":if(n.type=="SCRIPT_TOKENS"){r.promiseResolver(n.data);return}break;case"COPY_FILE_TO_BUFFER":if(n.type=="FILE_BUFFER"){r.promiseResolver(n.data);return}break;case"EXPORT_FILE_STATISTICS":if(n.type=="FILE_STATISTICS"){r.promiseResolver(n.data);return}break;case"CONNECT":if(n.type=="CONNECTION_INFO"){r.promiseResolver(n.data);return}break;case"RUN_PREPARED":case"RUN_QUERY":if(n.type=="QUERY_RESULT"){r.promiseResolver(n.data);return}break;case"SEND_PREPARED":if(n.type=="QUERY_RESULT_HEADER"){r.promiseResolver(n.data);return}break;case"START_PENDING_QUERY":if(n.type=="QUERY_RESULT_HEADER_OR_NULL"){r.promiseResolver(n.data);return}break;case"POLL_PENDING_QUERY":if(n.type=="QUERY_RESULT_HEADER_OR_NULL"){r.promiseResolver(n.data);return}break;case"CANCEL_PENDING_QUERY":if(this._onInstantiationProgress=[],n.type=="SUCCESS"){r.promiseResolver(n.data);return}break;case"FETCH_QUERY_RESULTS":if(n.type=="QUERY_RESULT_CHUNK"){r.promiseResolver(n.data);return}break;case"CREATE_PREPARED":if(n.type=="PREPARED_STATEMENT_ID"){r.promiseResolver(n.data);return}break}r.promiseRejecter(new Error("unexpected response type: ".concat(n.type.toString())))}onError(e){console.error(e),console.error("error in duckdb worker: ".concat(e.message)),this._pendingRequests.clear()}onClose(){if(this._workerShutdownResolver(null),this._pendingRequests.size!=0){console.warn("worker terminated with ".concat(this._pendingRequests.size," pending requests"));return}this._pendingRequests.clear()}async reset(){let e=new te("RESET",null);return await this.postTask(e)}async ping(){let e=new te("PING",null);await this.postTask(e)}async dropFile(e){let t=new te("DROP_FILE",e);return await this.postTask(t)}async dropFiles(){let e=new te("DROP_FILES",null);return await this.postTask(e)}async flushFiles(){let e=new te("FLUSH_FILES",null);return await this.postTask(e)}async instantiate(e,t=null,n=r=>{}){this._onInstantiationProgress.push(n);let r=new te("INSTANTIATE",[e,t]);return await this.postTask(r)}async getVersion(){let e=new te("GET_VERSION",null);return await this.postTask(e)}async getFeatureFlags(){let e=new te("GET_FEATURE_FLAGS",null);return await this.postTask(e)}async open(e){let t=new te("OPEN",e);await this.postTask(t)}async tokenize(e){let t=new te("TOKENIZE",e);return await this.postTask(t)}async connectInternal(){let e=new te("CONNECT",null);return await this.postTask(e)}async connect(){let e=await this.connectInternal();return new Qwt(this,e)}async disconnect(e){let t=new te("DISCONNECT",e);await this.postTask(t)}async runQuery(e,t){let n=new te("RUN_QUERY",[e,t]);return await this.postTask(n)}async startPendingQuery(e,t){let n=new te("START_PENDING_QUERY",[e,t]);return await this.postTask(n)}async pollPendingQuery(e){let t=new te("POLL_PENDING_QUERY",e);return await this.postTask(t)}async cancelPendingQuery(e){let t=new te("CANCEL_PENDING_QUERY",e);return await this.postTask(t)}async fetchQueryResults(e){let t=new te("FETCH_QUERY_RESULTS",e);return await this.postTask(t)}async getTableNames(e,t){let n=new te("GET_TABLE_NAMES",[e,t]);return await this.postTask(n)}async createPrepared(e,t){let n=new te("CREATE_PREPARED",[e,t]);return await this.postTask(n)}async closePrepared(e,t){let n=new te("CLOSE_PREPARED",[e,t]);await this.postTask(n)}async runPrepared(e,t,n){let r=new te("RUN_PREPARED",[e,t,n]);return await this.postTask(r)}async sendPrepared(e,t,n){let r=new te("SEND_PREPARED",[e,t,n]);return await this.postTask(r)}async globFiles(e){let t=new te("GLOB_FILE_INFOS",e);return await this.postTask(t)}async registerFileText(e,t){let n=t_t.encode(t);await this.registerFileBuffer(e,n)}async registerFileURL(e,t,n,r){t===void 0&&(t=e);let i=new te("REGISTER_FILE_URL",[e,t,n,r]);await this.postTask(i)}async registerEmptyFileBuffer(e){}async registerFileBuffer(e,t){let n=new te("REGISTER_FILE_BUFFER",[e,t]);await this.postTask(n,[t.buffer])}async registerFileHandle(e,t,n,r){let i=new te("REGISTER_FILE_HANDLE",[e,t,n,r]);await this.postTask(i,[])}async collectFileStatistics(e,t){let n=new te("COLLECT_FILE_STATISTICS",[e,t]);await this.postTask(n,[])}async exportFileStatistics(e){let t=new te("EXPORT_FILE_STATISTICS",e);return await this.postTask(t,[])}async copyFileToBuffer(e){let t=new te("COPY_FILE_TO_BUFFER",e);return await this.postTask(t)}async copyFileToPath(e,t){let n=new te("COPY_FILE_TO_PATH",[e,t]);await this.postTask(n)}async insertArrowFromIPCStream(e,t,n){if(t.length==0)return;let r=new te("INSERT_ARROW_FROM_IPC_STREAM",[e,t,n]);await this.postTask(r,[t.buffer])}async insertCSVFromPath(e,t,n){if(n.columns!==void 0){let i=[];for(let s in n.columns){let o=n.columns[s];i.push(RI(s,o))}n.columnsFlat=i,delete n.columns}let r=new te("IMPORT_CSV_FROM_PATH",[e,t,n]);await this.postTask(r)}async insertJSONFromPath(e,t,n){if(n.columns!==void 0){let i=[];for(let s in n.columns){let o=n.columns[s];i.push(RI(s,o))}n.columnsFlat=i,delete n.columns}let r=new te("IMPORT_JSON_FROM_PATH",[e,t,n]);await this.postTask(r)}},n_t=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,3,1,0,1,10,14,1,12,0,65,0,65,0,65,0,252,10,0,0,11])),r_t=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,8,1,6,0,6,64,25,11,11])),i_t=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11])),s_t=()=>(async e=>{try{return typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(e)}catch{return!1}})(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])),o_t={name:"@duckdb/duckdb-wasm",version:"1.29.1-dev3.0",description:"DuckDB powered by WebAssembly",license:"MIT",repository:{type:"git",url:"https://github.com/duckdb/duckdb-wasm.git"},keywords:["sql","duckdb","relational","database","data","query","wasm","analytics","olap","arrow","parquet","json","csv"],dependencies:{"apache-arrow":"^17.0.0"},devDependencies:{"@types/emscripten":"^1.39.10","@types/jasmine":"^5.1.4","@typescript-eslint/eslint-plugin":"^6.21.0","@typescript-eslint/parser":"^6.21.0",esbuild:"^0.20.2",eslint:"^8.57.0","eslint-plugin-jasmine":"^4.1.3","eslint-plugin-react":"^7.34.0","fast-glob":"^3.3.2",jasmine:"^5.1.0","jasmine-core":"^5.1.2","jasmine-spec-reporter":"^7.0.0","js-sha256":"^0.11.0",karma:"^6.4.2","karma-chrome-launcher":"^3.2.0","karma-coverage":"^2.2.1","karma-firefox-launcher":"^2.1.3","karma-jasmine":"^5.1.0","karma-jasmine-html-reporter":"^2.1.0","karma-sourcemap-loader":"^0.4.0","karma-spec-reporter":"^0.0.36","make-dir":"^4.0.0",nyc:"^15.1.0",prettier:"^3.2.5",puppeteer:"^22.8.0",rimraf:"^5.0.5",s3rver:"^3.7.1",typedoc:"^0.25.13",typescript:"^5.3.3","wasm-feature-detect":"^1.6.1","web-worker":"^1.2.0"},scripts:{"build:debug":"node bundle.mjs debug && tsc --emitDeclarationOnly","build:release":"node bundle.mjs release && tsc --emitDeclarationOnly",docs:"typedoc",report:"node ./coverage.mjs","test:node":"node --enable-source-maps ../../node_modules/jasmine/bin/jasmine ./dist/tests-node.cjs","test:node:debug":"node --inspect-brk --enable-source-maps ../../node_modules/jasmine/bin/jasmine ./dist/tests-node.cjs","test:node:coverage":"nyc -r json --report-dir ./coverage/node node ../../node_modules/jasmine/bin/jasmine ./dist/tests-node.cjs","test:firefox":"karma start ./karma/tests-firefox.cjs","test:chrome":"karma start ./karma/tests-chrome.cjs","test:chrome:eh":"karma start ./karma/tests-chrome-eh.cjs","test:chrome:coverage":"karma start ./karma/tests-chrome-coverage.cjs","test:browser":"karma start ./karma/tests-all.cjs","test:browser:debug":"karma start ./karma/tests-debug.cjs",test:"npm run test:chrome && npm run test:node","test:coverage":"npm run test:chrome:coverage && npm run test:node:coverage && npm run report",lint:"eslint src test"},files:["dist","!dist/tests-*","!dist/duckdb-browser-mvp.worker.js.map","!dist/types/test"],main:"dist/duckdb-browser.cjs",module:"dist/duckdb-browser.mjs",types:"dist/duckdb-browser.d.ts",jsdelivr:"dist/duckdb-browser.cjs",unpkg:"dist/duckdb-browser.mjs",sideEffects:!1,browser:{fs:!1,path:!1,perf_hooks:!1,os:!1,worker_threads:!1},exports:{"./dist/duckdb-mvp.wasm":"./dist/duckdb-mvp.wasm","./dist/duckdb-eh.wasm":"./dist/duckdb-eh.wasm","./dist/duckdb-coi.wasm":"./dist/duckdb-coi.wasm","./dist/duckdb-browser":"./dist/duckdb-browser.mjs","./dist/duckdb-browser.cjs":"./dist/duckdb-browser.cjs","./dist/duckdb-browser.mjs":"./dist/duckdb-browser.mjs","./dist/duckdb-browser-coi.pthread.worker.js":"./dist/duckdb-browser-coi.pthread.worker.js","./dist/duckdb-browser-coi.worker.js":"./dist/duckdb-browser-coi.worker.js","./dist/duckdb-browser-eh.worker.js":"./dist/duckdb-browser-eh.worker.js","./dist/duckdb-browser-mvp.worker.js":"./dist/duckdb-browser-mvp.worker.js","./dist/duckdb-node":"./dist/duckdb-node.cjs","./dist/duckdb-node.cjs":"./dist/duckdb-node.cjs","./dist/duckdb-node-blocking":"./dist/duckdb-node-blocking.cjs","./dist/duckdb-node-blocking.cjs":"./dist/duckdb-node-blocking.cjs","./dist/duckdb-node-eh.worker.cjs":"./dist/duckdb-node-eh.worker.cjs","./dist/duckdb-node-mvp.worker.cjs":"./dist/duckdb-node-mvp.worker.cjs","./blocking":{node:{types:"./dist/duckdb-node-blocking.d.ts",require:"./dist/duckdb-node-blocking.cjs",import:"./dist/duckdb-node-blocking.cjs"},types:"./dist/duckdb-node-blocking.d.ts",import:"./dist/duckdb-node-blocking.mjs",require:"./dist/duckdb-node-blocking.cjs"},".":{browser:{types:"./dist/duckdb-browser.d.ts",import:"./dist/duckdb-browser.mjs",require:"./dist/duckdb-browser.cjs"},node:{types:"./dist/duckdb-node.d.ts",import:"./dist/duckdb-node.cjs",require:"./dist/duckdb-node.cjs"},types:"./dist/duckdb-browser.d.ts",import:"./dist/duckdb-browser.mjs",require:"./dist/duckdb-browser.cjs"}}},QA=o_t.version.split(".");QA[0];QA[1];QA[2];var a_t=()=>typeof navigator>"u",D2=null,O2=null,R2=null,F2=null,L2=null;async function c_t(){return D2==null&&(D2=typeof BigInt64Array<"u"),O2==null&&(O2=await r_t()),R2==null&&(R2=await s_t()),F2==null&&(F2=await i_t()),L2==null&&(L2=await n_t()),{bigInt64Array:D2,crossOriginIsolated:a_t()||globalThis.crossOriginIsolated||!1,wasmExceptions:O2,wasmSIMD:F2,wasmThreads:R2,wasmBulkMemory:L2}}async function l_t(e){let t=await c_t();if(t.wasmExceptions){if(t.wasmSIMD&&t.wasmThreads&&t.crossOriginIsolated&&e.coi)return{mainModule:e.coi.mainModule,mainWorker:e.coi.mainWorker,pthreadWorker:e.coi.pthreadWorker};if(e.eh)return{mainModule:e.eh.mainModule,mainWorker:e.eh.mainWorker,pthreadWorker:null}}return{mainModule:e.mvp.mainModule,mainWorker:e.mvp.mainWorker,pthreadWorker:null}}Pwt(zwt());function u_t(){let e=new TextDecoder;return t=>(typeof SharedArrayBuffer<"u"&&t.buffer instanceof SharedArrayBuffer&&(t=new Uint8Array(t)),e.decode(t))}u_t();var f_t=(e=>(e[e.BUFFER=0]="BUFFER",e[e.NODE_FS=1]="NODE_FS",e[e.BROWSER_FILEREADER=2]="BROWSER_FILEREADER",e[e.BROWSER_FSACCESS=3]="BROWSER_FSACCESS",e[e.HTTP=4]="HTTP",e[e.S3=5]="S3",e))(f_t||{});function d_t(e){return URL.createObjectURL(new Blob([`importScripts("${e}");`],{type:"text/javascript"}))}function wD(e){let t=/^https?:\/\//.test(e);return t?{crossOrigin:t,url:d_t(e)}:{crossOrigin:t,url:e}}function h_t(e){let t=e==null?void 0:e.inputPrefix,n=e==null?void 0:e.includeCOI,r=t?t.endsWith("/")?t:t+"/":"/",i={eh:{mainModule:r+"duckdb-eh.wasm",mainWorker:r+"duckdb-browser-eh.worker.js"},mvp:{mainModule:r+"duckdb-mvp.wasm",mainWorker:r+"duckdb-browser-mvp.worker.js"}};return n&&(i.coi={mainModule:r+"duckdb-coi.wasm",mainWorker:r+"duckdb-browser-coi.worker.js",pthreadWorker:r+"duckdb-browser-coi.pthread.worker.js"}),i}async function p_t(e){let t=await l_t((e==null?void 0:e.bundles)??h_t({includeCOI:e==null?void 0:e.includeCOI}));if(!t.mainWorker)throw new Error("Main worker not found");let n=wD(t.mainWorker),r=t.pthreadWorker?wD(t.pthreadWorker):null,i=(e==null?void 0:e.logger)??new Hwt(e==null?void 0:e.logLevel),s=new Worker(n.url),o=e!=null&&e.createAsyncDuckDB?e.createAsyncDuckDB(i,s):new e_t(i,s);return await o.instantiate(t.mainModule,r==null?void 0:r.url,e==null?void 0:e.progress),n.crossOrigin&&URL.revokeObjectURL(n.url),r!=null&&r.crossOrigin&&URL.revokeObjectURL(r.url),o}function y_t(e){return!e||e.startsWith("DEV-")?"":e}function Eo(e,t){return t.length===0?e:e.endsWith("/")?`${e}${t}`:`${e}/${t}`}function m_t(e){return e!=null&&typeof e=="object"&&"mvp"in e}function g_t(e,t,n){let r={mvp:{mainModule:Eo(e,t.mvp.mainModule),mainWorker:Eo(e,t.mvp.mainWorker)}};return t.eh&&(r.eh={mainModule:Eo(e,t.eh.mainModule),mainWorker:Eo(e,t.eh.mainWorker)}),t.coi&&n&&(r.coi={mainModule:Eo(e,t.coi.mainModule),mainWorker:Eo(e,t.coi.mainWorker),pthreadWorker:Eo(e,t.coi.pthreadWorker)}),r}async function v_t(e,t,n){let r=y_t(t),i=Eo(e,r),s=Eo(i,"duckdb-assets.json"),o=await(await fetch(s)).json();if(!m_t(o))throw new Error(`Expected duckdb-assets.json to contain DuckDBBundles, but got: ${o}`);return g_t(i,o,n)}async function b_t(e){let t=e.duckDBAssetsURLPrefix||"https://app.motherduck.com/",n=new URL(t==="/"?window.origin:t),r=e.version||await qj(n),i=r==null?void 0:r.startsWith("DEV-"),s=await v_t(n.href,r,e.useDuckDBWasmCOI),o=await p_t({bundles:s,logLevel:e.enableDebugLogging?OI.INFO:OI.WARNING});await o.open({allowUnsignedExtensions:i,customUserAgent:e.customUserAgent});let a=await o.connect();return await a.query("LOAD icu;"),await a.close(),await fwt({instance:o,token:e.mdToken,extensionRepositoryUrlPrefix:n,extensionVersion:i?"":r,apiUrl:e.mdServerURL?new URL(e.mdServerURL):void 0,logLevel:e.enableDebugLogging?ob.DEBUG:ob.ERROR}),Hj(o),o}async function w_t(e){let t=Dwt();return t||(t=b_t(e),Hj(t),t)}wvt(Ibt(),1);var Hn;(function(e){e[e.Pending=0]="Pending",e[e.Running=1]="Running",e[e.Resolved=2]="Resolved",e[e.Rejected=3]="Rejected"})(Hn||(Hn={}));var __t=class{constructor(e){tt(this,"nextTaskId",1);tt(this,"queuedTaskIds",[]);tt(this,"queuedTasksById",{});tt(this,"processingQueue",!1);tt(this,"logger");this.logger=e}incompleteTaskCount(){let e=0;for(let t of this.queuedTaskIds){let n=this.queuedTasksById[t];n&&(n.state===Hn.Pending||n.state===Hn.Running)&&e++}return e}enqueueTask(e){let t=this.createTaskId();return this.logDebug(`enqueueTask: creating task id = ${t}`),this.addQueuedTask({id:t,task:e,state:Hn.Pending,deferred:Promise.withResolvers(),cancelled:!1}),this.scheduleProcessQueueIfNeeded(),t}async cancelTask(e,t){this.logDebug(`cancelTask(${e}): called`);let n=this.queuedTasksById[e];if(!n)throw new Error(`Task with id ${e} not found`);switch(n.state){case Hn.Pending:return n.cancelled?this.logDebug(`cancelTask(${e}): cancelling pending task (already cancelled)`):(this.logDebug(`cancelTask(${e}): cancelling pending task`),n.cancelled=!0,n.deferred.reject(new Error(t??"pending task cancelled")),this.scheduleProcessQueueIfNeeded()),!0;case Hn.Running:return this.logDebug(`cancelTask(${e}): cancelling running task`),n.cancelled=!0,n.task.cancel();case Hn.Resolved:return this.logDebug(`cancelTask(${e}): can't cancel resolved task`),!1;case Hn.Rejected:return this.logDebug(`cancelTask(${e}): can't cancel rejected task`),!1;default:throw n.state,new Error("unreachable")}}taskResult(e){this.logDebug(`taskResults(${e}): called`);let t=this.queuedTasksById[e];if(!t)throw new Error(`Task with id ${e} not found`);return t.deferred.promise}logDebug(e){this.logger&&this.logger.debug(e)}logWarn(e){this.logger&&this.logger.warn(e)}createTaskId(){return`t${this.nextTaskId++}`}addQueuedTask(e){this.queuedTaskIds.push(e.id),this.queuedTasksById[e.id]=e}scheduleProcessQueueIfNeeded(){this.processingQueue?this.logDebug("scheduleProcessQueueIfNeeded: processQueue already scheduled"):(this.logDebug("scheduleProcessQueueIfNeeded: scheduling processQueue"),this.processingQueue=!0,setTimeout(()=>{this.processQueue(),this.processingQueue=!1},0))}processQueue(){this.logDebug("processQueue: processing started");let e;do e=this.processFirstQueuedTask();while(e);this.logDebug("processQueue: processing completed")}processFirstQueuedTask(){if(this.queuedTaskIds.length===0)return this.logDebug("processFirstQueuedTask: queue empty"),!1;let e=this.queuedTaskIds[0];this.logDebug(`processFirstQueuedTask: processing task ${e}`);let t=this.queuedTasksById[e];if(!t)return this.logWarn(`processFirstQueuedTask: task ${e} not found in map`),this.queuedTaskIds.shift(),!0;switch(t.state){case Hn.Pending:return t.cancelled?(this.logDebug(`processFirstQueuedTask: removing cancelled pending task ${e} from queue`),this.queuedTaskIds.shift(),delete this.queuedTasksById[t.id],!0):(this.logDebug(`processFirstQueuedTask: running pending task ${e}`),t.state=Hn.Running,t.task.run().then(n=>{this.logDebug(`processFirstQueuedTask: task ${e} resolved`),t.state=Hn.Resolved,t.deferred.resolve(n)}).catch(n=>{this.logDebug(`processFirstQueuedTask: task ${e} rejected`),t.state=Hn.Rejected,t.deferred.reject(n)}).finally(()=>{this.scheduleProcessQueueIfNeeded()}),!1);case Hn.Running:return this.logDebug(`processFirstQueuedTask: task ${e} at front of queue is already running`),!1;case Hn.Resolved:case Hn.Rejected:return this.logDebug(`processFirstQueuedTask: task ${e} at front of queue is completed, removing from queue`),this.queuedTaskIds.shift(),delete this.queuedTasksById[t.id],!0;default:throw t.state,new Error("unreachable")}}};function sl(e,t=new Map){switch(e.typeId){case k.Null:return Xt.SQLNULL;case k.Int:{let{isSigned:n,bitWidth:r}=e;if(n)switch(r){case 8:return Xt.TINYINT;case 16:return Xt.SMALLINT;case 32:return Xt.INTEGER;case 64:return Xt.BIGINT;default:throw Error(`unexpected integer bit width: ${r}`)}else switch(r){case 8:return Xt.UTINYINT;case 16:return Xt.USMALLINT;case 32:return Xt.UINTEGER;case 64:return Xt.UBIGINT;default:throw Error(`unexpected integer bit width: ${r}`)}}case k.Float:{let{precision:n}=e;switch(n){case rn.HALF:throw Error("DuckDB does not support half-precision floats");case rn.SINGLE:return Xt.REAL;case rn.DOUBLE:return Xt.DOUBLE;default:throw Error(`unexpected precision: ${n}`)}}case k.Binary:return Xt.BLOB;case k.Utf8:return Xt.VARCHAR;case k.Bool:return Xt.BOOLEAN;case k.Decimal:{let{precision:n,scale:r}=e;return(n==null||n===18)&&(r==null||r===3)?Xt.DECIMAL():Xt.DECIMAL(n,r)}case k.Date:{let{unit:n}=e;switch(n){case nr.DAY:return Xt.DATE;case nr.MILLISECOND:throw Error("DuckDB does not support millisecond-unit dates");default:throw Error(`unexpected date unit: ${n}`)}}case k.Time:{let{unit:n}=e;switch(n){case at.SECOND:throw Error("DuckDB does not support second-unit times");case at.MILLISECOND:throw Error("DuckDB does not support millisecond-unit times");case at.MICROSECOND:return Xt.TIME;case at.NANOSECOND:throw Error("DuckDB does not support nanosecond-unit times");default:throw Error(`unexpected time unit: ${n}`)}}case k.Timestamp:{let{unit:n,timezone:r}=e;switch(n){case at.SECOND:if(r)throw Error("DuckDB does not support second-unit timestamps with timezone");return Xt.TIMESTAMP_S;case at.MILLISECOND:if(r)throw Error("DuckDB does not support millisecond-unit timestamps with timezone");return Xt.TIMESTAMP_MS;case at.MICROSECOND:return r?Xt.TIMESTAMP_TZ:Xt.TIMESTAMP;case at.NANOSECOND:if(r)throw Error("DuckDB does not support nanosecond-unit timestamps with timezone");return Xt.TIMESTAMP_NS;default:throw Error(`unexpected time unit: ${n}`)}}case k.Interval:{let{unit:n}=e;switch(n){case tr.YEAR_MONTH:throw Error("DuckDB does not support year-month intervals");case tr.DAY_TIME:throw Error("DuckDB does not support day-time intervals");case tr.MONTH_DAY_NANO:return Xt.INTERVAL;default:throw Error(`unexpected interval unit: ${n}`)}}case k.List:{let{valueType:n,children:r}=e;return Xt.LIST(sl(n,r.length>0?r[0].metadata:new Map))}case k.Struct:{let{children:n}=e,r=n.map(i=>({key:i.name,valueType:sl(i.type,i.metadata)}));return Xt.STRUCT(r)}case k.Union:{let{mode:n}=e;switch(n){case pn.Dense:throw Error("DuckDB does not support dense unions");case pn.Sparse:{let r=e.children.map(i=>({tag:i.name,valueType:sl(i.type,i.metadata)}));return Xt.UNION(r)}default:throw Error(`unexpected union mode: ${n}`)}}case k.FixedSizeBinary:switch(t.get("ARROW:extension:name")){case"arrow.uuid":return Xt.UUID;case"duckdb.uhugeint":return Xt.UHUGEINT;case"duckdb.hugeint":return Xt.HUGEINT;case"duckdb.time_tz":return Xt.TIME_TZ;default:return Xt.UHUGEINT}case k.FixedSizeList:{let{valueType:n,listSize:r,children:i}=e;return Xt.ARRAY(sl(n,i.length>0?i[0].metadata:new Map),r)}case k.Map:{let{keyType:n,valueType:r}=e;return Xt.MAP(sl(n),sl(r))}case k.Dictionary:return Xt.ENUM;default:throw Error(`unexpected type id: ${e.typeId}`)}}var KA=8,FI=KA*8,S_t=new TextDecoder;function x_t(e,t,n){return e.getValid(t)?n(e,t):null}function ln(e){return(t,n)=>x_t(t,n,e)}function I_t(e,t,n,r){return Array.from({length:n-t}).map((i,s)=>r(e,t+s))}function Kj(e){return new BigInt64Array(e.values.buffer,e.values.byteOffset,e.values.length/2)}function E_t(e,t){return Kj(e)[t]}function qw(e,t){return e.values[t]}function T_t(e,t){let n=Kj(e),r=n[t*2];return(n[t*2+1]<<BigInt(64))+(r&BigInt.asUintN(64,BigInt(-1)))}function Zj(e,t){let{values:n,valueOffsets:r}=e,i=r[t],s=r[t+1];return n.subarray(i,s)}function ZA(e,t){let{byteWidth:n}=e.type,{values:r}=e,i=n*t,s=n*(t+1);return r.subarray(i,s)}function A_t(e,t){return null}function M_t(e,t){return e.values[t]}var vs=ln(M_t);function N_t(e,t){return new Abt(Zj(e,t))}var $_t=ln(N_t);function k_t(e,t){return new ewt(ZA(e,t))}var D_t=ln(k_t);function O_t(e,t){let n=ZA(e,t),r=new DataView(n.buffer,n.byteOffset,n.byteLength),i=r.getBigInt64(KA,!0),s=r.getBigUint64(0,!0);return(i<<BigInt(FI))+(s&BigInt.asUintN(FI,BigInt(-1)))}var R_t=ln(O_t);function F_t(e,t){let n=ZA(e,t),r=new DataView(n.buffer,n.byteOffset,n.byteLength),i=r.getBigUint64(KA,!0),s=r.getBigUint64(0,!0);return(i<<BigInt(FI))+s}var _D=ln(F_t);function L_t(e,t){return S_t.decode(Zj(e,t))}var B_t=ln(L_t);function C_t(e,t){let n=e.offset+t;return(e.values[n>>3]&1<<n%8)!==0}var U_t=ln(C_t);function P_t(e,t){return new qbt(T_t(e,t),e.type.scale)}var z_t=ln(P_t);function j_t(e,t){return new Pbt(e.values[t])}var V_t=ln(j_t);function Y_t(e,t){return new Qbt(e.values[t])}var q_t=ln(Y_t);function W_t(e,t){throw Error("TIME_TZ with arrow_lossless_conversion is not supported.")}var G_t=ln(W_t);function H_t(e,t){return new twt(qw(e,t))}var X_t=ln(H_t);function Q_t(e,t){return new Zbt(qw(e,t))}var K_t=ln(Q_t);function Z_t(e,t){return new Kbt(qw(e,t),e.type.timezone)}var J_t=ln(Z_t);function t2t(e,t){return new Jbt(qw(e,t))}var e2t=ln(t2t);function n2t(e,t){return new Wbt(e.values[t*4],e.values[t*4+1],E_t(e,t*2+1)/BigInt(1e3))}var r2t=ln(n2t);function i2t(e,t){let{children:n,valueOffsets:r,type:i}=e,s=r[t],o=r[t+1];return new Gbt(tV(n[0],s,o,i.children[0].metadata))}var s2t=ln(i2t);function o2t(e,t){let n=[],{children:r,type:i}=e,s=i.children;for(let o=0;o<r.length;o++){let a=r[o],c=s[o].name,l=vy(a,t,s[o].metadata);n.push({key:c,value:l})}return new Xbt(n)}var a2t=ln(o2t);function c2t(e,t){let{children:n,typeIds:r}=e,i=r[t],s=e.type.typeIdToChildIndex[i],o=n[s];return vy(o,t,e.type.children[s].metadata)}function l2t(e,t){let{children:n,type:r}=e,{listSize:i}=r,s=t*i,o=s+i;return new Ebt(tV(n[0],s,o,r.children[0].metadata))}var u2t=ln(l2t);function f2t(e,t){let n=[],{children:r,valueOffsets:i}=e,s=i[t],o=i[t+1],[a,c]=r[0].children;for(let l=s;l<o;l++)n.push({key:vy(a,l),value:vy(c,l)});return new Hbt(n)}var d2t=ln(f2t);function h2t(e,t){return e.dictionary&&e.dictionary.length>0?e.dictionary.get(e.values[t]):e.values[t]}var p2t=ln(h2t);function Jj(e,t){switch(e.typeId){case k.Null:return A_t;case k.Int:{let{isSigned:n,bitWidth:r}=e;if(n)switch(r){case 8:return vs;case 16:return vs;case 32:return vs;case 64:return vs;default:throw Error(`unexpected integer bit width: ${r}`)}else switch(r){case 8:return vs;case 16:return vs;case 32:return vs;case 64:return vs;default:throw Error(`unexpected integer bit width: ${r}`)}}case k.Float:{let{precision:n}=e;switch(n){case rn.HALF:throw Error("DuckDB does not support half-precision floats");case rn.SINGLE:return vs;case rn.DOUBLE:return vs;default:throw Error(`unexpected precision: ${n}`)}}case k.Binary:return $_t;case k.Utf8:return B_t;case k.Bool:return U_t;case k.Decimal:return z_t;case k.Date:{let{unit:n}=e;switch(n){case nr.DAY:return V_t;case nr.MILLISECOND:throw Error("DuckDB does not support millisecond-unit dates");default:throw Error(`unexpected date unit: ${n}`)}}case k.Time:{let{unit:n}=e;switch(n){case at.SECOND:throw Error("DuckDB does not support second-unit times");case at.MILLISECOND:throw Error("DuckDB does not support millisecond-unit times");case at.MICROSECOND:return q_t;case at.NANOSECOND:throw Error("DuckDB does not support nanosecond-unit times");default:throw Error(`unexpected time unit: ${n}`)}}case k.Timestamp:{let{unit:n,timezone:r}=e;switch(n){case at.SECOND:if(r)throw Error("DuckDB does not support second-unit timestamps with time zone");return X_t;case at.MILLISECOND:if(r)throw Error("DuckDB does not support millisecond-unit timestamps with time zone");return K_t;case at.MICROSECOND:return J_t;case at.NANOSECOND:if(r)throw Error("DuckDB does not support nanosecond-unit timestamps with time zone");return e2t;default:throw Error(`unexpected time unit: ${n}`)}}case k.Interval:{let{unit:n}=e;switch(n){case tr.YEAR_MONTH:throw Error("DuckDB does not support year-month intervals");case tr.DAY_TIME:throw Error("DuckDB does not support day-time intervals");case tr.MONTH_DAY_NANO:return r2t;default:throw Error(`unexpected interval unit: ${n}`)}}case k.List:return s2t;case k.Struct:return a2t;case k.Union:{let{mode:n}=e;switch(n){case pn.Dense:throw Error("DuckDB does not support dense unions");case pn.Sparse:return c2t;default:throw Error(`unexpected union mode: ${n}`)}}case k.FixedSizeBinary:switch(t.get("ARROW:extension:name")){case"arrow.uuid":return D_t;case"duckdb.uhugeint":return _D;case"duckdb.hugeint":return R_t;case"duckdb.time_tz":return G_t;default:return _D}case k.FixedSizeList:return u2t;case k.Map:return d2t;case k.Dictionary:return p2t;default:throw Error(`unexpected type id: ${e.typeId}`)}}function vy(e,t,n=new Map){return Jj(e.type,n)(e,t)}function tV(e,t,n,r=new Map){let i=Jj(e.type,r);return I_t(e,t,n,i)}var y2t=class extends Pj{constructor(t){super();tt(this,"recordBatch");this.recordBatch=t}get columnCount(){return this.recordBatch.schema.fields.length}get rowCount(){return this.recordBatch.data.length}columnName(t){return this.recordBatch.schema.fields[t].name}columnType(t){let n=this.recordBatch.schema.fields[t];return sl(n.type,n.metadata)}value(t,n){let r=this.recordBatch.data.children[t],i=this.recordBatch.schema.fields[t].metadata;return vy(r,n,i)}},B2=Object.freeze({done:!0,value:void 0}),eV=class{constructor(e){tt(this,"recordBatchIterator");this.recordBatchIterator=e}async next(){let{done:e,value:t}=await this.recordBatchIterator.next();return t?{done:!!e,value:new y2t(t)}:B2}async return(e){return this.recordBatchIterator.return&&await this.recordBatchIterator.return(),e?{done:!0,value:e}:B2}async throw(e){return this.recordBatchIterator.throw&&await this.recordBatchIterator.throw(e),B2}[Symbol.asyncIterator](){return this}},C2=class{constructor(e,t,n){tt(this,"connection",null);tt(this,"deferredConnection");tt(this,"query");tt(this,"args");this.deferredConnection=e,this.query=t,this.args=n}async run(){let e=performance.now(),t=await this.sendQuery(),n=new eV(t),r=new zj(n);await r.readAll();let i=performance.now();for(let s=0;s<r.columnCount;s++)r.columnType(s);return{type:"materialized",startTimeMs:e,endTimeMs:i,data:r}}async cancel(){return(this.connection||await this.getConnection()).cancelSent()}async getConnection(){return this.connection=await this.deferredConnection,this.connection}async sendQuery(){var t;let e=this.connection||await this.getConnection();return this.args&&((t=this.args)==null?void 0:t.length)>0?(await e.prepare(this.query)).send(...this.args):e.send(this.query)}},SD=class{constructor(e,t,n){tt(this,"connection",null);tt(this,"deferredConnection");tt(this,"query");tt(this,"args");this.deferredConnection=e,this.query=t,this.args=n}async run(){let e=await this.sendQuery(),t=new eV(e),n=new zj(t);return{type:"streaming",arrowStream:e,dataStream:t,dataReader:n}}async cancel(){return(this.connection||await this.getConnection()).cancelSent()}async getConnection(){return this.connection=await this.deferredConnection,this.connection}async sendQuery(){var t;let e=this.connection||await this.getConnection();return this.args&&((t=this.args)==null?void 0:t.length)>0?(await e.prepare(this.query)).send(this.args):e.send(this.query)}};async function m2t(e){return await(await w_t(e)).connect()}var g2t=class nV{constructor(t,n){tt(this,"params");tt(this,"deferredDdbConnection");tt(this,"sequencer");this.params=t,this.deferredDdbConnection=n,this.sequencer=new __t(t.logger)}static create(t){let n=m2t(t);return new nV(t,n)}async isInitialized(){return await this.deferredDdbConnection,!0}async tokenize(t){return(await this.deferredDdbConnection).bindings.tokenize(t)}incompleteQueryCount(){return this.sequencer.incompleteTaskCount()}enqueueQuery(t,n){return this.sequencer.enqueueTask(new C2(this.deferredDdbConnection,t,n))}async safePrepareQuery(t){try{return{status:"success",preparedStatement:await this.prepareQuery(t)}}catch(n){return{status:"error",err:n}}}async safeEvaluateQuery(t){try{return{status:"success",result:await this.evaluateQuery(t)}}catch(n){return{status:"error",err:n}}}async safeEvaluatePreparedStatement(t,...n){try{return{status:"success",result:await this.evaluatePreparedStatement(t,n)}}catch(r){return{status:"error",err:r}}}async safeEvaluateStreamingQuery(t){try{return{status:"success",result:await this.evaluateStreamingQuery(t)}}catch(n){return{status:"error",err:n}}}async safeEvaluateStreamingPreparedStatement(t,n){try{return{status:"success",result:await this.evaluateStreamingPreparedStatement(t,n)}}catch(r){return{status:"error",err:r}}}async safeEvaluateQueuedQuery(t){try{return{status:"success",result:await this.evaluateQueuedQuery(t)}}catch(n){return{status:"error",err:n}}}async prepareQuery(t){return(await this.deferredDdbConnection).prepare(t)}async evaluateQuery(t){return this.evaluateExclusive(new C2(this.deferredDdbConnection,t))}async evaluatePreparedStatement(t,n){return this.evaluateExclusive(new C2(this.deferredDdbConnection,t,n))}async evaluateStreamingQuery(t){return this.evaluateExclusive(new SD(this.deferredDdbConnection,t,void 0))}async evaluateStreamingPreparedStatement(t,n){return this.evaluateExclusive(new SD(this.deferredDdbConnection,t,n))}async evaluateExclusive(t){let n=this.sequencer.enqueueTask(t);return this.sequencer.taskResult(n)}async evaluateQueuedQuery(t){return this.sequencer.taskResult(t)}async cancelQuery(t,n){return this.sequencer.cancelTask(t,n)}async close(){return(await this.deferredDdbConnection).close()}};async function xD(e){if(e.type==="streaming"){const t=await e.arrowStream.readAll();return new Kn(t)}else throw Error("expected streaming result")}function v2t(e){const t=g2t.create({mdToken:e});return{query:async n=>{const{sql:r,type:i}=n,s=await t.evaluateStreamingQuery(r);switch(i){case"arrow":return xD(s);case"json":return Array.from(await xD(s));default:case"exec":return}}}}function b2t(){const[e,t]=Bn.useState(!1),n=Bn.useCallback(async r=>{Dn().databaseConnector(v2t(r)),t(!0)},[]);return Wt.jsxs(Wt.Fragment,{children:[Wt.jsx($0t,{}),Wt.jsx("div",{id:"content-pane",children:e?Wt.jsx(U0t,{}):Wt.jsx(M0t,{connect:n})})]})}U2.createRoot(document.getElementById("root")).render(Wt.jsx(_V.StrictMode,{children:Wt.jsx(b2t,{})}));
