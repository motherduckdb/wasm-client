var bp=Object.defineProperty;var $p=(i,e,o)=>e in i?bp(i,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):i[e]=o;var Gl=(i,e,o)=>($p(i,typeof e!="symbol"?e+"":e,o),o);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const h of document.querySelectorAll('link[rel="modulepreload"]'))d(h);new MutationObserver(h=>{for(const g of h)if(g.type==="childList")for(const b of g.addedNodes)b.tagName==="LINK"&&b.rel==="modulepreload"&&d(b)}).observe(document,{childList:!0,subtree:!0});function o(h){const g={};return h.integrity&&(g.integrity=h.integrity),h.referrerPolicy&&(g.referrerPolicy=h.referrerPolicy),h.crossOrigin==="use-credentials"?g.credentials="include":h.crossOrigin==="anonymous"?g.credentials="omit":g.credentials="same-origin",g}function d(h){if(h.ep)return;h.ep=!0;const g=o(h);fetch(h.href,g)}})();function getDefaultExportFromCjs(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$1=Symbol.for("react.element"),n$1=Symbol.for("react.portal"),p$2=Symbol.for("react.fragment"),q$1=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),t=Symbol.for("react.provider"),u$1=Symbol.for("react.context"),v$1=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),x$1=Symbol.for("react.memo"),y$1=Symbol.for("react.lazy"),z$1=Symbol.iterator;function A$2(i){return i===null||typeof i!="object"?null:(i=z$1&&i[z$1]||i["@@iterator"],typeof i=="function"?i:null)}var B$3={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$2=Object.assign,D$3={};function E$2(i,e,o){this.props=i,this.context=e,this.refs=D$3,this.updater=o||B$3}E$2.prototype.isReactComponent={};E$2.prototype.setState=function(i,e){if(typeof i!="object"&&typeof i!="function"&&i!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,i,e,"setState")};E$2.prototype.forceUpdate=function(i){this.updater.enqueueForceUpdate(this,i,"forceUpdate")};function F(){}F.prototype=E$2.prototype;function G$1(i,e,o){this.props=i,this.context=e,this.refs=D$3,this.updater=o||B$3}var H$1=G$1.prototype=new F;H$1.constructor=G$1;C$2(H$1,E$2.prototype);H$1.isPureReactComponent=!0;var I$1=Array.isArray,J$1=Object.prototype.hasOwnProperty,K$2={current:null},L$1={key:!0,ref:!0,__self:!0,__source:!0};function M$2(i,e,o){var d,h={},g=null,b=null;if(e!=null)for(d in e.ref!==void 0&&(b=e.ref),e.key!==void 0&&(g=""+e.key),e)J$1.call(e,d)&&!L$1.hasOwnProperty(d)&&(h[d]=e[d]);var $=arguments.length-2;if($===1)h.children=o;else if(1<$){for(var j=Array($),et=0;et<$;et++)j[et]=arguments[et+2];h.children=j}if(i&&i.defaultProps)for(d in $=i.defaultProps,$)h[d]===void 0&&(h[d]=$[d]);return{$$typeof:l$1,type:i,key:g,ref:b,props:h,_owner:K$2.current}}function N$1(i,e){return{$$typeof:l$1,type:i.type,key:e,ref:i.ref,props:i.props,_owner:i._owner}}function O$2(i){return typeof i=="object"&&i!==null&&i.$$typeof===l$1}function escape(i){var e={"=":"=0",":":"=2"};return"$"+i.replace(/[=:]/g,function(o){return e[o]})}var P$2=/\/+/g;function Q$2(i,e){return typeof i=="object"&&i!==null&&i.key!=null?escape(""+i.key):e.toString(36)}function R$2(i,e,o,d,h){var g=typeof i;(g==="undefined"||g==="boolean")&&(i=null);var b=!1;if(i===null)b=!0;else switch(g){case"string":case"number":b=!0;break;case"object":switch(i.$$typeof){case l$1:case n$1:b=!0}}if(b)return b=i,h=h(b),i=d===""?"."+Q$2(b,0):d,I$1(h)?(o="",i!=null&&(o=i.replace(P$2,"$&/")+"/"),R$2(h,e,o,"",function(et){return et})):h!=null&&(O$2(h)&&(h=N$1(h,o+(!h.key||b&&b.key===h.key?"":(""+h.key).replace(P$2,"$&/")+"/")+i)),e.push(h)),1;if(b=0,d=d===""?".":d+":",I$1(i))for(var $=0;$<i.length;$++){g=i[$];var j=d+Q$2(g,$);b+=R$2(g,e,o,j,h)}else if(j=A$2(i),typeof j=="function")for(i=j.call(i),$=0;!(g=i.next()).done;)g=g.value,j=d+Q$2(g,$++),b+=R$2(g,e,o,j,h);else if(g==="object")throw e=String(i),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return b}function S$1(i,e,o){if(i==null)return i;var d=[],h=0;return R$2(i,d,"","",function(g){return e.call(o,g,h++)}),d}function T$2(i){if(i._status===-1){var e=i._result;e=e(),e.then(function(o){(i._status===0||i._status===-1)&&(i._status=1,i._result=o)},function(o){(i._status===0||i._status===-1)&&(i._status=2,i._result=o)}),i._status===-1&&(i._status=0,i._result=e)}if(i._status===1)return i._result.default;throw i._result}var U$1={current:null},V$1={transition:null},W$1={ReactCurrentDispatcher:U$1,ReactCurrentBatchConfig:V$1,ReactCurrentOwner:K$2};react_production_min.Children={map:S$1,forEach:function(i,e,o){S$1(i,function(){e.apply(this,arguments)},o)},count:function(i){var e=0;return S$1(i,function(){e++}),e},toArray:function(i){return S$1(i,function(e){return e})||[]},only:function(i){if(!O$2(i))throw Error("React.Children.only expected to receive a single React element child.");return i}};react_production_min.Component=E$2;react_production_min.Fragment=p$2;react_production_min.Profiler=r;react_production_min.PureComponent=G$1;react_production_min.StrictMode=q$1;react_production_min.Suspense=w;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$1;react_production_min.cloneElement=function(i,e,o){if(i==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+i+".");var d=C$2({},i.props),h=i.key,g=i.ref,b=i._owner;if(e!=null){if(e.ref!==void 0&&(g=e.ref,b=K$2.current),e.key!==void 0&&(h=""+e.key),i.type&&i.type.defaultProps)var $=i.type.defaultProps;for(j in e)J$1.call(e,j)&&!L$1.hasOwnProperty(j)&&(d[j]=e[j]===void 0&&$!==void 0?$[j]:e[j])}var j=arguments.length-2;if(j===1)d.children=o;else if(1<j){$=Array(j);for(var et=0;et<j;et++)$[et]=arguments[et+2];d.children=$}return{$$typeof:l$1,type:i.type,key:h,ref:g,props:d,_owner:b}};react_production_min.createContext=function(i){return i={$$typeof:u$1,_currentValue:i,_currentValue2:i,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},i.Provider={$$typeof:t,_context:i},i.Consumer=i};react_production_min.createElement=M$2;react_production_min.createFactory=function(i){var e=M$2.bind(null,i);return e.type=i,e};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(i){return{$$typeof:v$1,render:i}};react_production_min.isValidElement=O$2;react_production_min.lazy=function(i){return{$$typeof:y$1,_payload:{_status:-1,_result:i},_init:T$2}};react_production_min.memo=function(i,e){return{$$typeof:x$1,type:i,compare:e===void 0?null:e}};react_production_min.startTransition=function(i){var e=V$1.transition;V$1.transition={};try{i()}finally{V$1.transition=e}};react_production_min.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};react_production_min.useCallback=function(i,e){return U$1.current.useCallback(i,e)};react_production_min.useContext=function(i){return U$1.current.useContext(i)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(i){return U$1.current.useDeferredValue(i)};react_production_min.useEffect=function(i,e){return U$1.current.useEffect(i,e)};react_production_min.useId=function(){return U$1.current.useId()};react_production_min.useImperativeHandle=function(i,e,o){return U$1.current.useImperativeHandle(i,e,o)};react_production_min.useInsertionEffect=function(i,e){return U$1.current.useInsertionEffect(i,e)};react_production_min.useLayoutEffect=function(i,e){return U$1.current.useLayoutEffect(i,e)};react_production_min.useMemo=function(i,e){return U$1.current.useMemo(i,e)};react_production_min.useReducer=function(i,e,o){return U$1.current.useReducer(i,e,o)};react_production_min.useRef=function(i){return U$1.current.useRef(i)};react_production_min.useState=function(i){return U$1.current.useState(i)};react_production_min.useSyncExternalStore=function(i,e,o){return U$1.current.useSyncExternalStore(i,e,o)};react_production_min.useTransition=function(){return U$1.current.useTransition()};react_production_min.version="18.2.0";react.exports=react_production_min;var reactExports=react.exports;const React=getDefaultExportFromCjs(reactExports);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f=reactExports,k$1=Symbol.for("react.element"),l=Symbol.for("react.fragment"),m$1=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$1={key:!0,ref:!0,__self:!0,__source:!0};function q(i,e,o){var d,h={},g=null,b=null;o!==void 0&&(g=""+o),e.key!==void 0&&(g=""+e.key),e.ref!==void 0&&(b=e.ref);for(d in e)m$1.call(e,d)&&!p$1.hasOwnProperty(d)&&(h[d]=e[d]);if(i&&i.defaultProps)for(d in e=i.defaultProps,e)h[d]===void 0&&(h[d]=e[d]);return{$$typeof:k$1,type:i,key:g,ref:b,props:h,_owner:n.current}}reactJsxRuntime_production_min.Fragment=l;reactJsxRuntime_production_min.jsx=q;reactJsxRuntime_production_min.jsxs=q;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports,client={},reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(i){function e(Ut,Ht){var Pt=Ut.length;Ut.push(Ht);e:for(;0<Pt;){var Yt=Pt-1>>>1,Xt=Ut[Yt];if(0<h(Xt,Ht))Ut[Yt]=Ht,Ut[Pt]=Xt,Pt=Yt;else break e}}function o(Ut){return Ut.length===0?null:Ut[0]}function d(Ut){if(Ut.length===0)return null;var Ht=Ut[0],Pt=Ut.pop();if(Pt!==Ht){Ut[0]=Pt;e:for(var Yt=0,Xt=Ut.length,wn=Xt>>>1;Yt<wn;){var Mn=2*(Yt+1)-1,Cn=Ut[Mn],On=Mn+1,vn=Ut[On];if(0>h(Cn,Pt))On<Xt&&0>h(vn,Cn)?(Ut[Yt]=vn,Ut[On]=Pt,Yt=On):(Ut[Yt]=Cn,Ut[Mn]=Pt,Yt=Mn);else if(On<Xt&&0>h(vn,Pt))Ut[Yt]=vn,Ut[On]=Pt,Yt=On;else break e}}return Ht}function h(Ut,Ht){var Pt=Ut.sortIndex-Ht.sortIndex;return Pt!==0?Pt:Ut.id-Ht.id}if(typeof performance=="object"&&typeof performance.now=="function"){var g=performance;i.unstable_now=function(){return g.now()}}else{var b=Date,$=b.now();i.unstable_now=function(){return b.now()-$}}var j=[],et=[],tt=1,nt=null,rt=3,ot=!1,st=!1,bt=!1,vt=typeof setTimeout=="function"?setTimeout:null,at=typeof clearTimeout=="function"?clearTimeout:null,ut=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function $t(Ut){for(var Ht=o(et);Ht!==null;){if(Ht.callback===null)d(et);else if(Ht.startTime<=Ut)d(et),Ht.sortIndex=Ht.expirationTime,e(j,Ht);else break;Ht=o(et)}}function wt(Ut){if(bt=!1,$t(Ut),!st)if(o(j)!==null)st=!0,Ft(At);else{var Ht=o(et);Ht!==null&&Vt(wt,Ht.startTime-Ut)}}function At(Ut,Ht){st=!1,bt&&(bt=!1,at(Ot),Ot=-1),ot=!0;var Pt=rt;try{for($t(Ht),nt=o(j);nt!==null&&(!(nt.expirationTime>Ht)||Ut&&!Bt());){var Yt=nt.callback;if(typeof Yt=="function"){nt.callback=null,rt=nt.priorityLevel;var Xt=Yt(nt.expirationTime<=Ht);Ht=i.unstable_now(),typeof Xt=="function"?nt.callback=Xt:nt===o(j)&&d(j),$t(Ht)}else d(j);nt=o(j)}if(nt!==null)var wn=!0;else{var Mn=o(et);Mn!==null&&Vt(wt,Mn.startTime-Ht),wn=!1}return wn}finally{nt=null,rt=Pt,ot=!1}}var xt=!1,Rt=null,Ot=-1,kt=5,Mt=-1;function Bt(){return!(i.unstable_now()-Mt<kt)}function jt(){if(Rt!==null){var Ut=i.unstable_now();Mt=Ut;var Ht=!0;try{Ht=Rt(!0,Ut)}finally{Ht?zt():(xt=!1,Rt=null)}}else xt=!1}var zt;if(typeof ut=="function")zt=function(){ut(jt)};else if(typeof MessageChannel<"u"){var Nt=new MessageChannel,Ct=Nt.port2;Nt.port1.onmessage=jt,zt=function(){Ct.postMessage(null)}}else zt=function(){vt(jt,0)};function Ft(Ut){Rt=Ut,xt||(xt=!0,zt())}function Vt(Ut,Ht){Ot=vt(function(){Ut(i.unstable_now())},Ht)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(Ut){Ut.callback=null},i.unstable_continueExecution=function(){st||ot||(st=!0,Ft(At))},i.unstable_forceFrameRate=function(Ut){0>Ut||125<Ut?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):kt=0<Ut?Math.floor(1e3/Ut):5},i.unstable_getCurrentPriorityLevel=function(){return rt},i.unstable_getFirstCallbackNode=function(){return o(j)},i.unstable_next=function(Ut){switch(rt){case 1:case 2:case 3:var Ht=3;break;default:Ht=rt}var Pt=rt;rt=Ht;try{return Ut()}finally{rt=Pt}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(Ut,Ht){switch(Ut){case 1:case 2:case 3:case 4:case 5:break;default:Ut=3}var Pt=rt;rt=Ut;try{return Ht()}finally{rt=Pt}},i.unstable_scheduleCallback=function(Ut,Ht,Pt){var Yt=i.unstable_now();switch(typeof Pt=="object"&&Pt!==null?(Pt=Pt.delay,Pt=typeof Pt=="number"&&0<Pt?Yt+Pt:Yt):Pt=Yt,Ut){case 1:var Xt=-1;break;case 2:Xt=250;break;case 5:Xt=1073741823;break;case 4:Xt=1e4;break;default:Xt=5e3}return Xt=Pt+Xt,Ut={id:tt++,callback:Ht,priorityLevel:Ut,startTime:Pt,expirationTime:Xt,sortIndex:-1},Pt>Yt?(Ut.sortIndex=Pt,e(et,Ut),o(j)===null&&Ut===o(et)&&(bt?(at(Ot),Ot=-1):bt=!0,Vt(wt,Pt-Yt))):(Ut.sortIndex=Xt,e(j,Ut),st||ot||(st=!0,Ft(At))),Ut},i.unstable_shouldYield=Bt,i.unstable_wrapCallback=function(Ut){var Ht=rt;return function(){var Pt=rt;rt=Ht;try{return Ut.apply(this,arguments)}finally{rt=Pt}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;var schedulerExports=scheduler.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=reactExports,ca=schedulerExports;function p(i){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+i,o=1;o<arguments.length;o++)e+="&args[]="+encodeURIComponent(arguments[o]);return"Minified React error #"+i+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da=new Set,ea={};function fa(i,e){ha(i,e),ha(i+"Capture",e)}function ha(i,e){for(ea[i]=e,i=0;i<e.length;i++)da.add(e[i])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,ka$1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},ma={};function oa(i){return ja.call(ma,i)?!0:ja.call(la,i)?!1:ka$1.test(i)?ma[i]=!0:(la[i]=!0,!1)}function pa(i,e,o,d){if(o!==null&&o.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return d?!1:o!==null?!o.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function qa(i,e,o,d){if(e===null||typeof e>"u"||pa(i,e,o,d))return!0;if(d)return!1;if(o!==null)switch(o.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function v(i,e,o,d,h,g,b){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=d,this.attributeNamespace=h,this.mustUseProperty=o,this.propertyName=i,this.type=e,this.sanitizeURL=g,this.removeEmptyString=b}var z={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){z[i]=new v(i,0,!1,i,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var e=i[0];z[e]=new v(e,1,!1,i[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(i){z[i]=new v(i,2,!1,i.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){z[i]=new v(i,2,!1,i,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){z[i]=new v(i,3,!1,i.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(i){z[i]=new v(i,3,!0,i,null,!1,!1)});["capture","download"].forEach(function(i){z[i]=new v(i,4,!1,i,null,!1,!1)});["cols","rows","size","span"].forEach(function(i){z[i]=new v(i,6,!1,i,null,!1,!1)});["rowSpan","start"].forEach(function(i){z[i]=new v(i,5,!1,i.toLowerCase(),null,!1,!1)});var ra=/[\-:]([a-z])/g;function sa(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var e=i.replace(ra,sa);z[e]=new v(e,1,!1,i,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var e=i.replace(ra,sa);z[e]=new v(e,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(i){var e=i.replace(ra,sa);z[e]=new v(e,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(i){z[i]=new v(i,1,!1,i.toLowerCase(),null,!1,!1)});z.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(i){z[i]=new v(i,1,!1,i.toLowerCase(),null,!0,!0)});function ta(i,e,o,d){var h=z.hasOwnProperty(e)?z[e]:null;(h!==null?h.type!==0:d||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(qa(e,o,h,d)&&(o=null),d||h===null?oa(e)&&(o===null?i.removeAttribute(e):i.setAttribute(e,""+o)):h.mustUseProperty?i[h.propertyName]=o===null?h.type===3?!1:"":o:(e=h.attributeName,d=h.attributeNamespace,o===null?i.removeAttribute(e):(h=h.type,o=h===3||h===4&&o===!0?"":""+o,d?i.setAttributeNS(d,e,o):i.setAttribute(e,o))))}var ua=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),wa=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),za=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Ba=Symbol.for("react.provider"),Ca=Symbol.for("react.context"),Da=Symbol.for("react.forward_ref"),Ea=Symbol.for("react.suspense"),Fa=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Ha=Symbol.for("react.lazy"),Ia=Symbol.for("react.offscreen"),Ja=Symbol.iterator;function Ka(i){return i===null||typeof i!="object"?null:(i=Ja&&i[Ja]||i["@@iterator"],typeof i=="function"?i:null)}var A$1=Object.assign,La;function Ma(i){if(La===void 0)try{throw Error()}catch(o){var e=o.stack.trim().match(/\n( *(at )?)/);La=e&&e[1]||""}return`
`+La+i}var Na=!1;function Oa(i,e){if(!i||Na)return"";Na=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(et){var d=et}Reflect.construct(i,[],e)}else{try{e.call()}catch(et){d=et}i.call(e.prototype)}else{try{throw Error()}catch(et){d=et}i()}}catch(et){if(et&&d&&typeof et.stack=="string"){for(var h=et.stack.split(`
`),g=d.stack.split(`
`),b=h.length-1,$=g.length-1;1<=b&&0<=$&&h[b]!==g[$];)$--;for(;1<=b&&0<=$;b--,$--)if(h[b]!==g[$]){if(b!==1||$!==1)do if(b--,$--,0>$||h[b]!==g[$]){var j=`
`+h[b].replace(" at new "," at ");return i.displayName&&j.includes("<anonymous>")&&(j=j.replace("<anonymous>",i.displayName)),j}while(1<=b&&0<=$);break}}}finally{Na=!1,Error.prepareStackTrace=o}return(i=i?i.displayName||i.name:"")?Ma(i):""}function Pa(i){switch(i.tag){case 5:return Ma(i.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return i=Oa(i.type,!1),i;case 11:return i=Oa(i.type.render,!1),i;case 1:return i=Oa(i.type,!0),i;default:return""}}function Qa(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case ya:return"Fragment";case wa:return"Portal";case Aa:return"Profiler";case za:return"StrictMode";case Ea:return"Suspense";case Fa:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case Ca:return(i.displayName||"Context")+".Consumer";case Ba:return(i._context.displayName||"Context")+".Provider";case Da:var e=i.render;return i=i.displayName,i||(i=e.displayName||e.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case Ga:return e=i.displayName||null,e!==null?e:Qa(i.type)||"Memo";case Ha:e=i._payload,i=i._init;try{return Qa(i(e))}catch{}}return null}function Ra(i){var e=i.type;switch(i.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=e.render,i=i.displayName||i.name||"",e.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa(e);case 8:return e===za?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Sa(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Ta(i){var e=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Ua(i){var e=Ta(i)?"checked":"value",o=Object.getOwnPropertyDescriptor(i.constructor.prototype,e),d=""+i[e];if(!i.hasOwnProperty(e)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var h=o.get,g=o.set;return Object.defineProperty(i,e,{configurable:!0,get:function(){return h.call(this)},set:function(b){d=""+b,g.call(this,b)}}),Object.defineProperty(i,e,{enumerable:o.enumerable}),{getValue:function(){return d},setValue:function(b){d=""+b},stopTracking:function(){i._valueTracker=null,delete i[e]}}}}function Va(i){i._valueTracker||(i._valueTracker=Ua(i))}function Wa(i){if(!i)return!1;var e=i._valueTracker;if(!e)return!0;var o=e.getValue(),d="";return i&&(d=Ta(i)?i.checked?"true":"false":i.value),i=d,i!==o?(e.setValue(i),!0):!1}function Xa(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function Ya(i,e){var o=e.checked;return A$1({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:o??i._wrapperState.initialChecked})}function Za(i,e){var o=e.defaultValue==null?"":e.defaultValue,d=e.checked!=null?e.checked:e.defaultChecked;o=Sa(e.value!=null?e.value:o),i._wrapperState={initialChecked:d,initialValue:o,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function ab(i,e){e=e.checked,e!=null&&ta(i,"checked",e,!1)}function bb(i,e){ab(i,e);var o=Sa(e.value),d=e.type;if(o!=null)d==="number"?(o===0&&i.value===""||i.value!=o)&&(i.value=""+o):i.value!==""+o&&(i.value=""+o);else if(d==="submit"||d==="reset"){i.removeAttribute("value");return}e.hasOwnProperty("value")?cb(i,e.type,o):e.hasOwnProperty("defaultValue")&&cb(i,e.type,Sa(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(i.defaultChecked=!!e.defaultChecked)}function db(i,e,o){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var d=e.type;if(!(d!=="submit"&&d!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+i._wrapperState.initialValue,o||e===i.value||(i.value=e),i.defaultValue=e}o=i.name,o!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,o!==""&&(i.name=o)}function cb(i,e,o){(e!=="number"||Xa(i.ownerDocument)!==i)&&(o==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+o&&(i.defaultValue=""+o))}var eb=Array.isArray;function fb(i,e,o,d){if(i=i.options,e){e={};for(var h=0;h<o.length;h++)e["$"+o[h]]=!0;for(o=0;o<i.length;o++)h=e.hasOwnProperty("$"+i[o].value),i[o].selected!==h&&(i[o].selected=h),h&&d&&(i[o].defaultSelected=!0)}else{for(o=""+Sa(o),e=null,h=0;h<i.length;h++){if(i[h].value===o){i[h].selected=!0,d&&(i[h].defaultSelected=!0);return}e!==null||i[h].disabled||(e=i[h])}e!==null&&(e.selected=!0)}}function gb(i,e){if(e.dangerouslySetInnerHTML!=null)throw Error(p(91));return A$1({},e,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function hb(i,e){var o=e.value;if(o==null){if(o=e.children,e=e.defaultValue,o!=null){if(e!=null)throw Error(p(92));if(eb(o)){if(1<o.length)throw Error(p(93));o=o[0]}e=o}e==null&&(e=""),o=e}i._wrapperState={initialValue:Sa(o)}}function ib(i,e){var o=Sa(e.value),d=Sa(e.defaultValue);o!=null&&(o=""+o,o!==i.value&&(i.value=o),e.defaultValue==null&&i.defaultValue!==o&&(i.defaultValue=o)),d!=null&&(i.defaultValue=""+d)}function jb(i){var e=i.textContent;e===i._wrapperState.initialValue&&e!==""&&e!==null&&(i.value=e)}function kb(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb(i,e){return i==null||i==="http://www.w3.org/1999/xhtml"?kb(e):i==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var mb,nb=function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,o,d,h){MSApp.execUnsafeLocalFunction(function(){return i(e,o,d,h)})}:i}(function(i,e){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=e;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=mb.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;e.firstChild;)i.appendChild(e.firstChild)}});function ob(i,e){if(e){var o=i.firstChild;if(o&&o===i.lastChild&&o.nodeType===3){o.nodeValue=e;return}}i.textContent=e}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function(i){qb.forEach(function(e){e=e+i.charAt(0).toUpperCase()+i.substring(1),pb[e]=pb[i]})});function rb(i,e,o){return e==null||typeof e=="boolean"||e===""?"":o||typeof e!="number"||e===0||pb.hasOwnProperty(i)&&pb[i]?(""+e).trim():e+"px"}function sb(i,e){i=i.style;for(var o in e)if(e.hasOwnProperty(o)){var d=o.indexOf("--")===0,h=rb(o,e[o],d);o==="float"&&(o="cssFloat"),d?i.setProperty(o,h):i[o]=h}}var tb=A$1({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub(i,e){if(e){if(tb[i]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(p(137,i));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(p(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(p(61))}if(e.style!=null&&typeof e.style!="object")throw Error(p(62))}}function vb(i,e){if(i.indexOf("-")===-1)return typeof e.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var yb=null,zb=null,Ab=null;function Bb(i){if(i=Cb(i)){if(typeof yb!="function")throw Error(p(280));var e=i.stateNode;e&&(e=Db(e),yb(i.stateNode,i.type,e))}}function Eb(i){zb?Ab?Ab.push(i):Ab=[i]:zb=i}function Fb(){if(zb){var i=zb,e=Ab;if(Ab=zb=null,Bb(i),e)for(i=0;i<e.length;i++)Bb(e[i])}}function Gb(i,e){return i(e)}function Hb(){}var Ib=!1;function Jb(i,e,o){if(Ib)return i(e,o);Ib=!0;try{return Gb(i,e,o)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb(i,e){var o=i.stateNode;if(o===null)return null;var d=Db(o);if(d===null)return null;o=d[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(i=i.type,d=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!d;break e;default:i=!1}if(i)return null;if(o&&typeof o!="function")throw Error(p(231,e,typeof o));return o}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch{Lb=!1}function Nb(i,e,o,d,h,g,b,$,j){var et=Array.prototype.slice.call(arguments,3);try{e.apply(o,et)}catch(tt){this.onError(tt)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(i){Ob=!0,Pb=i}};function Tb(i,e,o,d,h,g,b,$,j){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub(i,e,o,d,h,g,b,$,j){if(Tb.apply(this,arguments),Ob){if(Ob){var et=Pb;Ob=!1,Pb=null}else throw Error(p(198));Qb||(Qb=!0,Rb=et)}}function Vb(i){var e=i,o=i;if(i.alternate)for(;e.return;)e=e.return;else{i=e;do e=i,e.flags&4098&&(o=e.return),i=e.return;while(i)}return e.tag===3?o:null}function Wb(i){if(i.tag===13){var e=i.memoizedState;if(e===null&&(i=i.alternate,i!==null&&(e=i.memoizedState)),e!==null)return e.dehydrated}return null}function Xb(i){if(Vb(i)!==i)throw Error(p(188))}function Yb(i){var e=i.alternate;if(!e){if(e=Vb(i),e===null)throw Error(p(188));return e!==i?null:i}for(var o=i,d=e;;){var h=o.return;if(h===null)break;var g=h.alternate;if(g===null){if(d=h.return,d!==null){o=d;continue}break}if(h.child===g.child){for(g=h.child;g;){if(g===o)return Xb(h),i;if(g===d)return Xb(h),e;g=g.sibling}throw Error(p(188))}if(o.return!==d.return)o=h,d=g;else{for(var b=!1,$=h.child;$;){if($===o){b=!0,o=h,d=g;break}if($===d){b=!0,d=h,o=g;break}$=$.sibling}if(!b){for($=g.child;$;){if($===o){b=!0,o=g,d=h;break}if($===d){b=!0,d=g,o=h;break}$=$.sibling}if(!b)throw Error(p(189))}}if(o.alternate!==d)throw Error(p(190))}if(o.tag!==3)throw Error(p(188));return o.stateNode.current===o?i:e}function Zb(i){return i=Yb(i),i!==null?$b(i):null}function $b(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var e=$b(i);if(e!==null)return e;i=i.sibling}return null}var ac=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B$2=ca.unstable_now,ec=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc=null;function mc(i){if(lc&&typeof lc.onCommitFiberRoot=="function")try{lc.onCommitFiberRoot(kc,i,void 0,(i.current.flags&128)===128)}catch{}}var oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc(i){return i>>>=0,i===0?32:31-(pc(i)/qc|0)|0}var rc=64,sc=4194304;function tc(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function uc(i,e){var o=i.pendingLanes;if(o===0)return 0;var d=0,h=i.suspendedLanes,g=i.pingedLanes,b=o&268435455;if(b!==0){var $=b&~h;$!==0?d=tc($):(g&=b,g!==0&&(d=tc(g)))}else b=o&~h,b!==0?d=tc(b):g!==0&&(d=tc(g));if(d===0)return 0;if(e!==0&&e!==d&&!(e&h)&&(h=d&-d,g=e&-e,h>=g||h===16&&(g&4194240)!==0))return e;if(d&4&&(d|=o&16),e=i.entangledLanes,e!==0)for(i=i.entanglements,e&=d;0<e;)o=31-oc(e),h=1<<o,d|=i[o],e&=~h;return d}function vc(i,e){switch(i){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc(i,e){for(var o=i.suspendedLanes,d=i.pingedLanes,h=i.expirationTimes,g=i.pendingLanes;0<g;){var b=31-oc(g),$=1<<b,j=h[b];j===-1?(!($&o)||$&d)&&(h[b]=vc($,e)):j<=e&&(i.expiredLanes|=$),g&=~$}}function xc(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function yc(){var i=rc;return rc<<=1,!(rc&4194240)&&(rc=64),i}function zc(i){for(var e=[],o=0;31>o;o++)e.push(i);return e}function Ac(i,e,o){i.pendingLanes|=e,e!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,e=31-oc(e),i[e]=o}function Bc(i,e){var o=i.pendingLanes&~e;i.pendingLanes=e,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=e,i.mutableReadLanes&=e,i.entangledLanes&=e,e=i.entanglements;var d=i.eventTimes;for(i=i.expirationTimes;0<o;){var h=31-oc(o),g=1<<h;e[h]=0,d[h]=-1,i[h]=-1,o&=~g}}function Cc(i,e){var o=i.entangledLanes|=e;for(i=i.entanglements;o;){var d=31-oc(o),h=1<<d;h&e|i[d]&e&&(i[d]|=e),o&=~h}}var C$1=0;function Dc(i){return i&=-i,1<i?4<i?i&268435455?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc(i,e){switch(i){case"focusin":case"focusout":Lc=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":Oc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(e.pointerId)}}function Tc(i,e,o,d,h,g){return i===null||i.nativeEvent!==g?(i={blockedOn:e,domEventName:o,eventSystemFlags:d,nativeEvent:g,targetContainers:[h]},e!==null&&(e=Cb(e),e!==null&&Fc(e)),i):(i.eventSystemFlags|=d,e=i.targetContainers,h!==null&&e.indexOf(h)===-1&&e.push(h),i)}function Uc(i,e,o,d,h){switch(e){case"focusin":return Lc=Tc(Lc,i,e,o,d,h),!0;case"dragenter":return Mc=Tc(Mc,i,e,o,d,h),!0;case"mouseover":return Nc=Tc(Nc,i,e,o,d,h),!0;case"pointerover":var g=h.pointerId;return Oc.set(g,Tc(Oc.get(g)||null,i,e,o,d,h)),!0;case"gotpointercapture":return g=h.pointerId,Pc.set(g,Tc(Pc.get(g)||null,i,e,o,d,h)),!0}return!1}function Vc(i){var e=Wc(i.target);if(e!==null){var o=Vb(e);if(o!==null){if(e=o.tag,e===13){if(e=Wb(o),e!==null){i.blockedOn=e,Ic(i.priority,function(){Gc(o)});return}}else if(e===3&&o.stateNode.current.memoizedState.isDehydrated){i.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Xc(i){if(i.blockedOn!==null)return!1;for(var e=i.targetContainers;0<e.length;){var o=Yc(i.domEventName,i.eventSystemFlags,e[0],i.nativeEvent);if(o===null){o=i.nativeEvent;var d=new o.constructor(o.type,o);wb=d,o.target.dispatchEvent(d),wb=null}else return e=Cb(o),e!==null&&Fc(e),i.blockedOn=o,!1;e.shift()}return!0}function Zc(i,e,o){Xc(i)&&o.delete(e)}function $c(){Jc=!1,Lc!==null&&Xc(Lc)&&(Lc=null),Mc!==null&&Xc(Mc)&&(Mc=null),Nc!==null&&Xc(Nc)&&(Nc=null),Oc.forEach(Zc),Pc.forEach(Zc)}function ad(i,e){i.blockedOn===e&&(i.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}function bd(i){function e(h){return ad(h,i)}if(0<Kc.length){ad(Kc[0],i);for(var o=1;o<Kc.length;o++){var d=Kc[o];d.blockedOn===i&&(d.blockedOn=null)}}for(Lc!==null&&ad(Lc,i),Mc!==null&&ad(Mc,i),Nc!==null&&ad(Nc,i),Oc.forEach(e),Pc.forEach(e),o=0;o<Qc.length;o++)d=Qc[o],d.blockedOn===i&&(d.blockedOn=null);for(;0<Qc.length&&(o=Qc[0],o.blockedOn===null);)Vc(o),o.blockedOn===null&&Qc.shift()}var cd=ua.ReactCurrentBatchConfig,dd=!0;function ed(i,e,o,d){var h=C$1,g=cd.transition;cd.transition=null;try{C$1=1,fd(i,e,o,d)}finally{C$1=h,cd.transition=g}}function gd(i,e,o,d){var h=C$1,g=cd.transition;cd.transition=null;try{C$1=4,fd(i,e,o,d)}finally{C$1=h,cd.transition=g}}function fd(i,e,o,d){if(dd){var h=Yc(i,e,o,d);if(h===null)hd(i,e,d,id$1,o),Sc(i,d);else if(Uc(h,i,e,o,d))d.stopPropagation();else if(Sc(i,d),e&4&&-1<Rc.indexOf(i)){for(;h!==null;){var g=Cb(h);if(g!==null&&Ec(g),g=Yc(i,e,o,d),g===null&&hd(i,e,d,id$1,o),g===h)break;h=g}h!==null&&d.stopPropagation()}else hd(i,e,d,null,o)}}var id$1=null;function Yc(i,e,o,d){if(id$1=null,i=xb(d),i=Wc(i),i!==null)if(e=Vb(i),e===null)i=null;else if(o=e.tag,o===13){if(i=Wb(e),i!==null)return i;i=null}else if(o===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;i=null}else e!==i&&(i=null);return id$1=i,null}function jd(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var i,e=ld,o=e.length,d,h="value"in kd?kd.value:kd.textContent,g=h.length;for(i=0;i<o&&e[i]===h[i];i++);var b=o-i;for(d=1;d<=b&&e[o-d]===h[g-d];d++);return md=h.slice(i,1<d?1-d:void 0)}function od(i){var e=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&e===13&&(i=13)):i=e,i===10&&(i=13),32<=i||i===13?i:0}function pd(){return!0}function qd(){return!1}function rd(i){function e(o,d,h,g,b){this._reactName=o,this._targetInst=h,this.type=d,this.nativeEvent=g,this.target=b,this.currentTarget=null;for(var $ in i)i.hasOwnProperty($)&&(o=i[$],this[$]=o?o(g):g[$]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return A$1(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),e}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=A$1({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A$1({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==yd&&(yd&&i.type==="mousemove"?(wd=i.screenX-yd.screenX,xd=i.screenY-yd.screenY):xd=wd=0,yd=i),wd)},movementY:function(i){return"movementY"in i?i.movementY:xd}}),Bd=rd(Ad),Cd=A$1({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A$1({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A$1({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A$1({},sd,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A$1({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(i){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(i):(i=Od[i])?!!e[i]:!1}function zd(){return Pd}var Qd=A$1({},ud,{key:function(i){if(i.key){var e=Md[i.key]||i.key;if(e!=="Unidentified")return e}return i.type==="keypress"?(i=od(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Nd[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(i){return i.type==="keypress"?od(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?od(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Rd=rd(Qd),Sd=A$1({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A$1({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A$1({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A$1({},Ad,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae=ia&&"CompositionEvent"in window,be$1=null;ia&&"documentMode"in document&&(be$1=document.documentMode);var ce$1=ia&&"TextEvent"in window&&!be$1,de=ia&&(!ae||be$1&&8<be$1&&11>=be$1),ee$1=" ",fe=!1;function ge$1(i,e){switch(i){case"keyup":return $d.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var ie=!1;function je(i,e){switch(i){case"compositionend":return he(e);case"keypress":return e.which!==32?null:(fe=!0,ee$1);case"textInput":return i=e.data,i===ee$1&&fe?null:i;default:return null}}function ke$1(i,e){if(ie)return i==="compositionend"||!ae&&ge$1(i,e)?(i=nd(),md=ld=kd=null,ie=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return de&&e.locale!=="ko"?null:e.data;default:return null}}var le$1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me(i){var e=i&&i.nodeName&&i.nodeName.toLowerCase();return e==="input"?!!le$1[i.type]:e==="textarea"}function ne$1(i,e,o,d){Eb(d),e=oe$1(e,"onChange"),0<e.length&&(o=new td("onChange","change",null,o,d),i.push({event:o,listeners:e}))}var pe$1=null,qe$1=null;function re$3(i){se(i,0)}function te$1(i){var e=ue(i);if(Wa(e))return i}function ve(i,e){if(i==="change")return e}var we=!1;if(ia){var xe$1;if(ia){var ye="oninput"in document;if(!ye){var ze$1=document.createElement("div");ze$1.setAttribute("oninput","return;"),ye=typeof ze$1.oninput=="function"}xe$1=ye}else xe$1=!1;we=xe$1&&(!document.documentMode||9<document.documentMode)}function Ae$1(){pe$1&&(pe$1.detachEvent("onpropertychange",Be),qe$1=pe$1=null)}function Be(i){if(i.propertyName==="value"&&te$1(qe$1)){var e=[];ne$1(e,qe$1,i,xb(i)),Jb(re$3,e)}}function Ce(i,e,o){i==="focusin"?(Ae$1(),pe$1=e,qe$1=o,pe$1.attachEvent("onpropertychange",Be)):i==="focusout"&&Ae$1()}function De(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return te$1(qe$1)}function Ee$1(i,e){if(i==="click")return te$1(e)}function Fe$1(i,e){if(i==="input"||i==="change")return te$1(e)}function Ge$1(i,e){return i===e&&(i!==0||1/i===1/e)||i!==i&&e!==e}var He$1=typeof Object.is=="function"?Object.is:Ge$1;function Ie(i,e){if(He$1(i,e))return!0;if(typeof i!="object"||i===null||typeof e!="object"||e===null)return!1;var o=Object.keys(i),d=Object.keys(e);if(o.length!==d.length)return!1;for(d=0;d<o.length;d++){var h=o[d];if(!ja.call(e,h)||!He$1(i[h],e[h]))return!1}return!0}function Je(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Ke$1(i,e){var o=Je(i);i=0;for(var d;o;){if(o.nodeType===3){if(d=i+o.textContent.length,i<=e&&d>=e)return{node:o,offset:e-i};i=d}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Je(o)}}function Le(i,e){return i&&e?i===e?!0:i&&i.nodeType===3?!1:e&&e.nodeType===3?Le(i,e.parentNode):"contains"in i?i.contains(e):i.compareDocumentPosition?!!(i.compareDocumentPosition(e)&16):!1:!1}function Me(){for(var i=window,e=Xa();e instanceof i.HTMLIFrameElement;){try{var o=typeof e.contentWindow.location.href=="string"}catch{o=!1}if(o)i=e.contentWindow;else break;e=Xa(i.document)}return e}function Ne(i){var e=i&&i.nodeName&&i.nodeName.toLowerCase();return e&&(e==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||e==="textarea"||i.contentEditable==="true")}function Oe(i){var e=Me(),o=i.focusedElem,d=i.selectionRange;if(e!==o&&o&&o.ownerDocument&&Le(o.ownerDocument.documentElement,o)){if(d!==null&&Ne(o)){if(e=d.start,i=d.end,i===void 0&&(i=e),"selectionStart"in o)o.selectionStart=e,o.selectionEnd=Math.min(i,o.value.length);else if(i=(e=o.ownerDocument||document)&&e.defaultView||window,i.getSelection){i=i.getSelection();var h=o.textContent.length,g=Math.min(d.start,h);d=d.end===void 0?g:Math.min(d.end,h),!i.extend&&g>d&&(h=d,d=g,g=h),h=Ke$1(o,g);var b=Ke$1(o,d);h&&b&&(i.rangeCount!==1||i.anchorNode!==h.node||i.anchorOffset!==h.offset||i.focusNode!==b.node||i.focusOffset!==b.offset)&&(e=e.createRange(),e.setStart(h.node,h.offset),i.removeAllRanges(),g>d?(i.addRange(e),i.extend(b.node,b.offset)):(e.setEnd(b.node,b.offset),i.addRange(e)))}}for(e=[],i=o;i=i.parentNode;)i.nodeType===1&&e.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<e.length;o++)i=e[o],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var Pe=ia&&"documentMode"in document&&11>=document.documentMode,Qe$1=null,Re=null,Se$1=null,Te$1=!1;function Ue(i,e,o){var d=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Te$1||Qe$1==null||Qe$1!==Xa(d)||(d=Qe$1,"selectionStart"in d&&Ne(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Se$1&&Ie(Se$1,d)||(Se$1=d,d=oe$1(Re,"onSelect"),0<d.length&&(e=new td("onSelect","select",null,e,o),i.push({event:e,listeners:d}),e.target=Qe$1)))}function Ve$1(i,e){var o={};return o[i.toLowerCase()]=e.toLowerCase(),o["Webkit"+i]="webkit"+e,o["Moz"+i]="moz"+e,o}var We={animationend:Ve$1("Animation","AnimationEnd"),animationiteration:Ve$1("Animation","AnimationIteration"),animationstart:Ve$1("Animation","AnimationStart"),transitionend:Ve$1("Transition","TransitionEnd")},Xe={},Ye={};ia&&(Ye=document.createElement("div").style,"AnimationEvent"in window||(delete We.animationend.animation,delete We.animationiteration.animation,delete We.animationstart.animation),"TransitionEvent"in window||delete We.transitionend.transition);function Ze(i){if(Xe[i])return Xe[i];if(!We[i])return i;var e=We[i],o;for(o in e)if(e.hasOwnProperty(o)&&o in Ye)return Xe[i]=e[o];return i}var $e$1=Ze("animationend"),af=Ze("animationiteration"),bf=Ze("animationstart"),cf=Ze("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff(i,e){df.set(i,e),fa(e,[i])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,"on"+kf)}ff($e$1,"onAnimationEnd");ff(af,"onAnimationIteration");ff(bf,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(cf,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf(i,e,o){var d=i.type||"unknown-event";i.currentTarget=o,Ub(d,e,void 0,i),i.currentTarget=null}function se(i,e){e=(e&4)!==0;for(var o=0;o<i.length;o++){var d=i[o],h=d.event;d=d.listeners;e:{var g=void 0;if(e)for(var b=d.length-1;0<=b;b--){var $=d[b],j=$.instance,et=$.currentTarget;if($=$.listener,j!==g&&h.isPropagationStopped())break e;nf(h,$,et),g=j}else for(b=0;b<d.length;b++){if($=d[b],j=$.instance,et=$.currentTarget,$=$.listener,j!==g&&h.isPropagationStopped())break e;nf(h,$,et),g=j}}}if(Qb)throw i=Rb,Qb=!1,Rb=null,i}function D$2(i,e){var o=e[of];o===void 0&&(o=e[of]=new Set);var d=i+"__bubble";o.has(d)||(pf(e,i,2,!1),o.add(d))}function qf(i,e,o){var d=0;e&&(d|=4),pf(o,i,d,e)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf(i){if(!i[rf]){i[rf]=!0,da.forEach(function(o){o!=="selectionchange"&&(mf.has(o)||qf(o,!1,i),qf(o,!0,i))});var e=i.nodeType===9?i:i.ownerDocument;e===null||e[rf]||(e[rf]=!0,qf("selectionchange",!1,e))}}function pf(i,e,o,d){switch(jd(e)){case 1:var h=ed;break;case 4:h=gd;break;default:h=fd}o=h.bind(null,e,o,i),h=void 0,!Lb||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(h=!0),d?h!==void 0?i.addEventListener(e,o,{capture:!0,passive:h}):i.addEventListener(e,o,!0):h!==void 0?i.addEventListener(e,o,{passive:h}):i.addEventListener(e,o,!1)}function hd(i,e,o,d,h){var g=d;if(!(e&1)&&!(e&2)&&d!==null)e:for(;;){if(d===null)return;var b=d.tag;if(b===3||b===4){var $=d.stateNode.containerInfo;if($===h||$.nodeType===8&&$.parentNode===h)break;if(b===4)for(b=d.return;b!==null;){var j=b.tag;if((j===3||j===4)&&(j=b.stateNode.containerInfo,j===h||j.nodeType===8&&j.parentNode===h))return;b=b.return}for(;$!==null;){if(b=Wc($),b===null)return;if(j=b.tag,j===5||j===6){d=g=b;continue e}$=$.parentNode}}d=d.return}Jb(function(){var et=g,tt=xb(o),nt=[];e:{var rt=df.get(i);if(rt!==void 0){var ot=td,st=i;switch(i){case"keypress":if(od(o)===0)break e;case"keydown":case"keyup":ot=Rd;break;case"focusin":st="focus",ot=Fd;break;case"focusout":st="blur",ot=Fd;break;case"beforeblur":case"afterblur":ot=Fd;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ot=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ot=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ot=Vd;break;case $e$1:case af:case bf:ot=Hd;break;case cf:ot=Xd;break;case"scroll":ot=vd;break;case"wheel":ot=Zd;break;case"copy":case"cut":case"paste":ot=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ot=Td}var bt=(e&4)!==0,vt=!bt&&i==="scroll",at=bt?rt!==null?rt+"Capture":null:rt;bt=[];for(var ut=et,$t;ut!==null;){$t=ut;var wt=$t.stateNode;if($t.tag===5&&wt!==null&&($t=wt,at!==null&&(wt=Kb(ut,at),wt!=null&&bt.push(tf(ut,wt,$t)))),vt)break;ut=ut.return}0<bt.length&&(rt=new ot(rt,st,null,o,tt),nt.push({event:rt,listeners:bt}))}}if(!(e&7)){e:{if(rt=i==="mouseover"||i==="pointerover",ot=i==="mouseout"||i==="pointerout",rt&&o!==wb&&(st=o.relatedTarget||o.fromElement)&&(Wc(st)||st[uf]))break e;if((ot||rt)&&(rt=tt.window===tt?tt:(rt=tt.ownerDocument)?rt.defaultView||rt.parentWindow:window,ot?(st=o.relatedTarget||o.toElement,ot=et,st=st?Wc(st):null,st!==null&&(vt=Vb(st),st!==vt||st.tag!==5&&st.tag!==6)&&(st=null)):(ot=null,st=et),ot!==st)){if(bt=Bd,wt="onMouseLeave",at="onMouseEnter",ut="mouse",(i==="pointerout"||i==="pointerover")&&(bt=Td,wt="onPointerLeave",at="onPointerEnter",ut="pointer"),vt=ot==null?rt:ue(ot),$t=st==null?rt:ue(st),rt=new bt(wt,ut+"leave",ot,o,tt),rt.target=vt,rt.relatedTarget=$t,wt=null,Wc(tt)===et&&(bt=new bt(at,ut+"enter",st,o,tt),bt.target=$t,bt.relatedTarget=vt,wt=bt),vt=wt,ot&&st)t:{for(bt=ot,at=st,ut=0,$t=bt;$t;$t=vf($t))ut++;for($t=0,wt=at;wt;wt=vf(wt))$t++;for(;0<ut-$t;)bt=vf(bt),ut--;for(;0<$t-ut;)at=vf(at),$t--;for(;ut--;){if(bt===at||at!==null&&bt===at.alternate)break t;bt=vf(bt),at=vf(at)}bt=null}else bt=null;ot!==null&&wf(nt,rt,ot,bt,!1),st!==null&&vt!==null&&wf(nt,vt,st,bt,!0)}}e:{if(rt=et?ue(et):window,ot=rt.nodeName&&rt.nodeName.toLowerCase(),ot==="select"||ot==="input"&&rt.type==="file")var At=ve;else if(me(rt))if(we)At=Fe$1;else{At=De;var xt=Ce}else(ot=rt.nodeName)&&ot.toLowerCase()==="input"&&(rt.type==="checkbox"||rt.type==="radio")&&(At=Ee$1);if(At&&(At=At(i,et))){ne$1(nt,At,o,tt);break e}xt&&xt(i,rt,et),i==="focusout"&&(xt=rt._wrapperState)&&xt.controlled&&rt.type==="number"&&cb(rt,"number",rt.value)}switch(xt=et?ue(et):window,i){case"focusin":(me(xt)||xt.contentEditable==="true")&&(Qe$1=xt,Re=et,Se$1=null);break;case"focusout":Se$1=Re=Qe$1=null;break;case"mousedown":Te$1=!0;break;case"contextmenu":case"mouseup":case"dragend":Te$1=!1,Ue(nt,o,tt);break;case"selectionchange":if(Pe)break;case"keydown":case"keyup":Ue(nt,o,tt)}var Rt;if(ae)e:{switch(i){case"compositionstart":var Ot="onCompositionStart";break e;case"compositionend":Ot="onCompositionEnd";break e;case"compositionupdate":Ot="onCompositionUpdate";break e}Ot=void 0}else ie?ge$1(i,o)&&(Ot="onCompositionEnd"):i==="keydown"&&o.keyCode===229&&(Ot="onCompositionStart");Ot&&(de&&o.locale!=="ko"&&(ie||Ot!=="onCompositionStart"?Ot==="onCompositionEnd"&&ie&&(Rt=nd()):(kd=tt,ld="value"in kd?kd.value:kd.textContent,ie=!0)),xt=oe$1(et,Ot),0<xt.length&&(Ot=new Ld(Ot,i,null,o,tt),nt.push({event:Ot,listeners:xt}),Rt?Ot.data=Rt:(Rt=he(o),Rt!==null&&(Ot.data=Rt)))),(Rt=ce$1?je(i,o):ke$1(i,o))&&(et=oe$1(et,"onBeforeInput"),0<et.length&&(tt=new Ld("onBeforeInput","beforeinput",null,o,tt),nt.push({event:tt,listeners:et}),tt.data=Rt))}se(nt,e)})}function tf(i,e,o){return{instance:i,listener:e,currentTarget:o}}function oe$1(i,e){for(var o=e+"Capture",d=[];i!==null;){var h=i,g=h.stateNode;h.tag===5&&g!==null&&(h=g,g=Kb(i,o),g!=null&&d.unshift(tf(i,g,h)),g=Kb(i,e),g!=null&&d.push(tf(i,g,h))),i=i.return}return d}function vf(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function wf(i,e,o,d,h){for(var g=e._reactName,b=[];o!==null&&o!==d;){var $=o,j=$.alternate,et=$.stateNode;if(j!==null&&j===d)break;$.tag===5&&et!==null&&($=et,h?(j=Kb(o,g),j!=null&&b.unshift(tf(o,j,$))):h||(j=Kb(o,g),j!=null&&b.push(tf(o,j,$)))),o=o.return}b.length!==0&&i.push({event:e,listeners:b})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf(i){return(typeof i=="string"?i:""+i).replace(xf,`
`).replace(yf,"")}function Af(i,e,o){if(e=zf(e),zf(i)!==e&&o)throw Error(p(425))}function Bf(){}var Cf=null,Df=null;function Ef(i,e){return i==="textarea"||i==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(i){return Hf.resolve(null).then(i).catch(If)}:Ff;function If(i){setTimeout(function(){throw i})}function Kf(i,e){var o=e,d=0;do{var h=o.nextSibling;if(i.removeChild(o),h&&h.nodeType===8)if(o=h.data,o==="/$"){if(d===0){i.removeChild(h),bd(e);return}d--}else o!=="$"&&o!=="$?"&&o!=="$!"||d++;o=h}while(o);bd(e)}function Lf(i){for(;i!=null;i=i.nextSibling){var e=i.nodeType;if(e===1||e===3)break;if(e===8){if(e=i.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return i}function Mf(i){i=i.previousSibling;for(var e=0;i;){if(i.nodeType===8){var o=i.data;if(o==="$"||o==="$!"||o==="$?"){if(e===0)return i;e--}else o==="/$"&&e++}i=i.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc(i){var e=i[Of];if(e)return e;for(var o=i.parentNode;o;){if(e=o[uf]||o[Of]){if(o=e.alternate,e.child!==null||o!==null&&o.child!==null)for(i=Mf(i);i!==null;){if(o=i[Of])return o;i=Mf(i)}return e}i=o,o=i.parentNode}return null}function Cb(i){return i=i[Of]||i[uf],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function ue(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(p(33))}function Db(i){return i[Pf]||null}var Sf=[],Tf=-1;function Uf(i){return{current:i}}function E$1(i){0>Tf||(i.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G(i,e){Tf++,Sf[Tf]=i.current,i.current=e}var Vf={},H=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(i,e){var o=i.type.contextTypes;if(!o)return Vf;var d=i.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===e)return d.__reactInternalMemoizedMaskedChildContext;var h={},g;for(g in o)h[g]=e[g];return d&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=e,i.__reactInternalMemoizedMaskedChildContext=h),h}function Zf(i){return i=i.childContextTypes,i!=null}function $f(){E$1(Wf),E$1(H)}function ag(i,e,o){if(H.current!==Vf)throw Error(p(168));G(H,e),G(Wf,o)}function bg(i,e,o){var d=i.stateNode;if(e=e.childContextTypes,typeof d.getChildContext!="function")return o;d=d.getChildContext();for(var h in d)if(!(h in e))throw Error(p(108,Ra(i)||"Unknown",h));return A$1({},o,d)}function cg(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||Vf,Xf=H.current,G(H,i),G(Wf,Wf.current),!0}function dg(i,e,o){var d=i.stateNode;if(!d)throw Error(p(169));o?(i=bg(i,e,Xf),d.__reactInternalMemoizedMergedChildContext=i,E$1(Wf),E$1(H),G(H,i)):E$1(Wf),G(Wf,o)}var eg=null,fg=!1,gg=!1;function hg(i){eg===null?eg=[i]:eg.push(i)}function ig(i){fg=!0,hg(i)}function jg(){if(!gg&&eg!==null){gg=!0;var i=0,e=C$1;try{var o=eg;for(C$1=1;i<o.length;i++){var d=o[i];do d=d(!0);while(d!==null)}eg=null,fg=!1}catch(h){throw eg!==null&&(eg=eg.slice(i+1)),ac(fc,jg),h}finally{C$1=e,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(i,e){kg[lg++]=ng,kg[lg++]=mg,mg=i,ng=e}function ug(i,e,o){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=i;var d=rg;i=sg;var h=32-oc(d)-1;d&=~(1<<h),o+=1;var g=32-oc(e)+h;if(30<g){var b=h-h%5;g=(d&(1<<b)-1).toString(32),d>>=b,h-=b,rg=1<<32-oc(e)+h|o<<h|d,sg=g+i}else rg=1<<g|o<<h|d,sg=i}function vg(i){i.return!==null&&(tg(i,1),ug(i,1,0))}function wg(i){for(;i===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;i===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I=!1,zg=null;function Ag(i,e){var o=Bg(5,null,null,0);o.elementType="DELETED",o.stateNode=e,o.return=i,e=i.deletions,e===null?(i.deletions=[o],i.flags|=16):e.push(o)}function Cg(i,e){switch(i.tag){case 5:var o=i.type;return e=e.nodeType!==1||o.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(i.stateNode=e,xg=i,yg=Lf(e.firstChild),!0):!1;case 6:return e=i.pendingProps===""||e.nodeType!==3?null:e,e!==null?(i.stateNode=e,xg=i,yg=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(o=qg!==null?{id:rg,overflow:sg}:null,i.memoizedState={dehydrated:e,treeContext:o,retryLane:1073741824},o=Bg(18,null,null,0),o.stateNode=e,o.return=i,i.child=o,xg=i,yg=null,!0):!1;default:return!1}}function Dg(i){return(i.mode&1)!==0&&(i.flags&128)===0}function Eg(i){if(I){var e=yg;if(e){var o=e;if(!Cg(i,e)){if(Dg(i))throw Error(p(418));e=Lf(o.nextSibling);var d=xg;e&&Cg(i,e)?Ag(d,o):(i.flags=i.flags&-4097|2,I=!1,xg=i)}}else{if(Dg(i))throw Error(p(418));i.flags=i.flags&-4097|2,I=!1,xg=i}}}function Fg(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;xg=i}function Gg(i){if(i!==xg)return!1;if(!I)return Fg(i),I=!0,!1;var e;if((e=i.tag!==3)&&!(e=i.tag!==5)&&(e=i.type,e=e!=="head"&&e!=="body"&&!Ef(i.type,i.memoizedProps)),e&&(e=yg)){if(Dg(i))throw Hg(),Error(p(418));for(;e;)Ag(i,e),e=Lf(e.nextSibling)}if(Fg(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(p(317));e:{for(i=i.nextSibling,e=0;i;){if(i.nodeType===8){var o=i.data;if(o==="/$"){if(e===0){yg=Lf(i.nextSibling);break e}e--}else o!=="$"&&o!=="$!"&&o!=="$?"||e++}i=i.nextSibling}yg=null}}else yg=xg?Lf(i.stateNode.nextSibling):null;return!0}function Hg(){for(var i=yg;i;)i=Lf(i.nextSibling)}function Ig(){yg=xg=null,I=!1}function Jg(i){zg===null?zg=[i]:zg.push(i)}var Kg=ua.ReactCurrentBatchConfig;function Lg(i,e){if(i&&i.defaultProps){e=A$1({},e),i=i.defaultProps;for(var o in i)e[o]===void 0&&(e[o]=i[o]);return e}return e}var Mg=Uf(null),Ng=null,Og=null,Pg=null;function Qg(){Pg=Og=Ng=null}function Rg(i){var e=Mg.current;E$1(Mg),i._currentValue=e}function Sg(i,e,o){for(;i!==null;){var d=i.alternate;if((i.childLanes&e)!==e?(i.childLanes|=e,d!==null&&(d.childLanes|=e)):d!==null&&(d.childLanes&e)!==e&&(d.childLanes|=e),i===o)break;i=i.return}}function Tg(i,e){Ng=i,Pg=Og=null,i=i.dependencies,i!==null&&i.firstContext!==null&&(i.lanes&e&&(Ug=!0),i.firstContext=null)}function Vg(i){var e=i._currentValue;if(Pg!==i)if(i={context:i,memoizedValue:e,next:null},Og===null){if(Ng===null)throw Error(p(308));Og=i,Ng.dependencies={lanes:0,firstContext:i}}else Og=Og.next=i;return e}var Wg=null;function Xg(i){Wg===null?Wg=[i]:Wg.push(i)}function Yg(i,e,o,d){var h=e.interleaved;return h===null?(o.next=o,Xg(e)):(o.next=h.next,h.next=o),e.interleaved=o,Zg(i,d)}function Zg(i,e){i.lanes|=e;var o=i.alternate;for(o!==null&&(o.lanes|=e),o=i,i=i.return;i!==null;)i.childLanes|=e,o=i.alternate,o!==null&&(o.childLanes|=e),o=i,i=i.return;return o.tag===3?o.stateNode:null}var $g=!1;function ah(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function bh(i,e){i=i.updateQueue,e.updateQueue===i&&(e.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function ch(i,e){return{eventTime:i,lane:e,tag:0,payload:null,callback:null,next:null}}function dh(i,e,o){var d=i.updateQueue;if(d===null)return null;if(d=d.shared,K$1&2){var h=d.pending;return h===null?e.next=e:(e.next=h.next,h.next=e),d.pending=e,Zg(i,o)}return h=d.interleaved,h===null?(e.next=e,Xg(d)):(e.next=h.next,h.next=e),d.interleaved=e,Zg(i,o)}function eh(i,e,o){if(e=e.updateQueue,e!==null&&(e=e.shared,(o&4194240)!==0)){var d=e.lanes;d&=i.pendingLanes,o|=d,e.lanes=o,Cc(i,o)}}function fh(i,e){var o=i.updateQueue,d=i.alternate;if(d!==null&&(d=d.updateQueue,o===d)){var h=null,g=null;if(o=o.firstBaseUpdate,o!==null){do{var b={eventTime:o.eventTime,lane:o.lane,tag:o.tag,payload:o.payload,callback:o.callback,next:null};g===null?h=g=b:g=g.next=b,o=o.next}while(o!==null);g===null?h=g=e:g=g.next=e}else h=g=e;o={baseState:d.baseState,firstBaseUpdate:h,lastBaseUpdate:g,shared:d.shared,effects:d.effects},i.updateQueue=o;return}i=o.lastBaseUpdate,i===null?o.firstBaseUpdate=e:i.next=e,o.lastBaseUpdate=e}function gh(i,e,o,d){var h=i.updateQueue;$g=!1;var g=h.firstBaseUpdate,b=h.lastBaseUpdate,$=h.shared.pending;if($!==null){h.shared.pending=null;var j=$,et=j.next;j.next=null,b===null?g=et:b.next=et,b=j;var tt=i.alternate;tt!==null&&(tt=tt.updateQueue,$=tt.lastBaseUpdate,$!==b&&($===null?tt.firstBaseUpdate=et:$.next=et,tt.lastBaseUpdate=j))}if(g!==null){var nt=h.baseState;b=0,tt=et=j=null,$=g;do{var rt=$.lane,ot=$.eventTime;if((d&rt)===rt){tt!==null&&(tt=tt.next={eventTime:ot,lane:0,tag:$.tag,payload:$.payload,callback:$.callback,next:null});e:{var st=i,bt=$;switch(rt=e,ot=o,bt.tag){case 1:if(st=bt.payload,typeof st=="function"){nt=st.call(ot,nt,rt);break e}nt=st;break e;case 3:st.flags=st.flags&-65537|128;case 0:if(st=bt.payload,rt=typeof st=="function"?st.call(ot,nt,rt):st,rt==null)break e;nt=A$1({},nt,rt);break e;case 2:$g=!0}}$.callback!==null&&$.lane!==0&&(i.flags|=64,rt=h.effects,rt===null?h.effects=[$]:rt.push($))}else ot={eventTime:ot,lane:rt,tag:$.tag,payload:$.payload,callback:$.callback,next:null},tt===null?(et=tt=ot,j=nt):tt=tt.next=ot,b|=rt;if($=$.next,$===null){if($=h.shared.pending,$===null)break;rt=$,$=rt.next,rt.next=null,h.lastBaseUpdate=rt,h.shared.pending=null}}while(!0);if(tt===null&&(j=nt),h.baseState=j,h.firstBaseUpdate=et,h.lastBaseUpdate=tt,e=h.shared.interleaved,e!==null){h=e;do b|=h.lane,h=h.next;while(h!==e)}else g===null&&(h.shared.lanes=0);hh|=b,i.lanes=b,i.memoizedState=nt}}function ih(i,e,o){if(i=e.effects,e.effects=null,i!==null)for(e=0;e<i.length;e++){var d=i[e],h=d.callback;if(h!==null){if(d.callback=null,d=o,typeof h!="function")throw Error(p(191,h));h.call(d)}}}var jh=new aa.Component().refs;function kh(i,e,o,d){e=i.memoizedState,o=o(d,e),o=o==null?e:A$1({},e,o),i.memoizedState=o,i.lanes===0&&(i.updateQueue.baseState=o)}var nh={isMounted:function(i){return(i=i._reactInternals)?Vb(i)===i:!1},enqueueSetState:function(i,e,o){i=i._reactInternals;var d=L(),h=lh(i),g=ch(d,h);g.payload=e,o!=null&&(g.callback=o),e=dh(i,g,h),e!==null&&(mh(e,i,h,d),eh(e,i,h))},enqueueReplaceState:function(i,e,o){i=i._reactInternals;var d=L(),h=lh(i),g=ch(d,h);g.tag=1,g.payload=e,o!=null&&(g.callback=o),e=dh(i,g,h),e!==null&&(mh(e,i,h,d),eh(e,i,h))},enqueueForceUpdate:function(i,e){i=i._reactInternals;var o=L(),d=lh(i),h=ch(o,d);h.tag=2,e!=null&&(h.callback=e),e=dh(i,h,d),e!==null&&(mh(e,i,d,o),eh(e,i,d))}};function oh(i,e,o,d,h,g,b){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(d,g,b):e.prototype&&e.prototype.isPureReactComponent?!Ie(o,d)||!Ie(h,g):!0}function ph(i,e,o){var d=!1,h=Vf,g=e.contextType;return typeof g=="object"&&g!==null?g=Vg(g):(h=Zf(e)?Xf:H.current,d=e.contextTypes,g=(d=d!=null)?Yf(i,h):Vf),e=new e(o,g),i.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=nh,i.stateNode=e,e._reactInternals=i,d&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=h,i.__reactInternalMemoizedMaskedChildContext=g),e}function qh(i,e,o,d){i=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(o,d),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(o,d),e.state!==i&&nh.enqueueReplaceState(e,e.state,null)}function rh(i,e,o,d){var h=i.stateNode;h.props=o,h.state=i.memoizedState,h.refs=jh,ah(i);var g=e.contextType;typeof g=="object"&&g!==null?h.context=Vg(g):(g=Zf(e)?Xf:H.current,h.context=Yf(i,g)),h.state=i.memoizedState,g=e.getDerivedStateFromProps,typeof g=="function"&&(kh(i,e,g,o),h.state=i.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(e=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),e!==h.state&&nh.enqueueReplaceState(h,h.state,null),gh(i,o,h,d),h.state=i.memoizedState),typeof h.componentDidMount=="function"&&(i.flags|=4194308)}function sh(i,e,o){if(i=o.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(o._owner){if(o=o._owner,o){if(o.tag!==1)throw Error(p(309));var d=o.stateNode}if(!d)throw Error(p(147,i));var h=d,g=""+i;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===g?e.ref:(e=function(b){var $=h.refs;$===jh&&($=h.refs={}),b===null?delete $[g]:$[g]=b},e._stringRef=g,e)}if(typeof i!="string")throw Error(p(284));if(!o._owner)throw Error(p(290,i))}return i}function th(i,e){throw i=Object.prototype.toString.call(e),Error(p(31,i==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":i))}function uh(i){var e=i._init;return e(i._payload)}function vh(i){function e(at,ut){if(i){var $t=at.deletions;$t===null?(at.deletions=[ut],at.flags|=16):$t.push(ut)}}function o(at,ut){if(!i)return null;for(;ut!==null;)e(at,ut),ut=ut.sibling;return null}function d(at,ut){for(at=new Map;ut!==null;)ut.key!==null?at.set(ut.key,ut):at.set(ut.index,ut),ut=ut.sibling;return at}function h(at,ut){return at=wh(at,ut),at.index=0,at.sibling=null,at}function g(at,ut,$t){return at.index=$t,i?($t=at.alternate,$t!==null?($t=$t.index,$t<ut?(at.flags|=2,ut):$t):(at.flags|=2,ut)):(at.flags|=1048576,ut)}function b(at){return i&&at.alternate===null&&(at.flags|=2),at}function $(at,ut,$t,wt){return ut===null||ut.tag!==6?(ut=xh($t,at.mode,wt),ut.return=at,ut):(ut=h(ut,$t),ut.return=at,ut)}function j(at,ut,$t,wt){var At=$t.type;return At===ya?tt(at,ut,$t.props.children,wt,$t.key):ut!==null&&(ut.elementType===At||typeof At=="object"&&At!==null&&At.$$typeof===Ha&&uh(At)===ut.type)?(wt=h(ut,$t.props),wt.ref=sh(at,ut,$t),wt.return=at,wt):(wt=yh($t.type,$t.key,$t.props,null,at.mode,wt),wt.ref=sh(at,ut,$t),wt.return=at,wt)}function et(at,ut,$t,wt){return ut===null||ut.tag!==4||ut.stateNode.containerInfo!==$t.containerInfo||ut.stateNode.implementation!==$t.implementation?(ut=zh($t,at.mode,wt),ut.return=at,ut):(ut=h(ut,$t.children||[]),ut.return=at,ut)}function tt(at,ut,$t,wt,At){return ut===null||ut.tag!==7?(ut=Ah($t,at.mode,wt,At),ut.return=at,ut):(ut=h(ut,$t),ut.return=at,ut)}function nt(at,ut,$t){if(typeof ut=="string"&&ut!==""||typeof ut=="number")return ut=xh(""+ut,at.mode,$t),ut.return=at,ut;if(typeof ut=="object"&&ut!==null){switch(ut.$$typeof){case va:return $t=yh(ut.type,ut.key,ut.props,null,at.mode,$t),$t.ref=sh(at,null,ut),$t.return=at,$t;case wa:return ut=zh(ut,at.mode,$t),ut.return=at,ut;case Ha:var wt=ut._init;return nt(at,wt(ut._payload),$t)}if(eb(ut)||Ka(ut))return ut=Ah(ut,at.mode,$t,null),ut.return=at,ut;th(at,ut)}return null}function rt(at,ut,$t,wt){var At=ut!==null?ut.key:null;if(typeof $t=="string"&&$t!==""||typeof $t=="number")return At!==null?null:$(at,ut,""+$t,wt);if(typeof $t=="object"&&$t!==null){switch($t.$$typeof){case va:return $t.key===At?j(at,ut,$t,wt):null;case wa:return $t.key===At?et(at,ut,$t,wt):null;case Ha:return At=$t._init,rt(at,ut,At($t._payload),wt)}if(eb($t)||Ka($t))return At!==null?null:tt(at,ut,$t,wt,null);th(at,$t)}return null}function ot(at,ut,$t,wt,At){if(typeof wt=="string"&&wt!==""||typeof wt=="number")return at=at.get($t)||null,$(ut,at,""+wt,At);if(typeof wt=="object"&&wt!==null){switch(wt.$$typeof){case va:return at=at.get(wt.key===null?$t:wt.key)||null,j(ut,at,wt,At);case wa:return at=at.get(wt.key===null?$t:wt.key)||null,et(ut,at,wt,At);case Ha:var xt=wt._init;return ot(at,ut,$t,xt(wt._payload),At)}if(eb(wt)||Ka(wt))return at=at.get($t)||null,tt(ut,at,wt,At,null);th(ut,wt)}return null}function st(at,ut,$t,wt){for(var At=null,xt=null,Rt=ut,Ot=ut=0,kt=null;Rt!==null&&Ot<$t.length;Ot++){Rt.index>Ot?(kt=Rt,Rt=null):kt=Rt.sibling;var Mt=rt(at,Rt,$t[Ot],wt);if(Mt===null){Rt===null&&(Rt=kt);break}i&&Rt&&Mt.alternate===null&&e(at,Rt),ut=g(Mt,ut,Ot),xt===null?At=Mt:xt.sibling=Mt,xt=Mt,Rt=kt}if(Ot===$t.length)return o(at,Rt),I&&tg(at,Ot),At;if(Rt===null){for(;Ot<$t.length;Ot++)Rt=nt(at,$t[Ot],wt),Rt!==null&&(ut=g(Rt,ut,Ot),xt===null?At=Rt:xt.sibling=Rt,xt=Rt);return I&&tg(at,Ot),At}for(Rt=d(at,Rt);Ot<$t.length;Ot++)kt=ot(Rt,at,Ot,$t[Ot],wt),kt!==null&&(i&&kt.alternate!==null&&Rt.delete(kt.key===null?Ot:kt.key),ut=g(kt,ut,Ot),xt===null?At=kt:xt.sibling=kt,xt=kt);return i&&Rt.forEach(function(Bt){return e(at,Bt)}),I&&tg(at,Ot),At}function bt(at,ut,$t,wt){var At=Ka($t);if(typeof At!="function")throw Error(p(150));if($t=At.call($t),$t==null)throw Error(p(151));for(var xt=At=null,Rt=ut,Ot=ut=0,kt=null,Mt=$t.next();Rt!==null&&!Mt.done;Ot++,Mt=$t.next()){Rt.index>Ot?(kt=Rt,Rt=null):kt=Rt.sibling;var Bt=rt(at,Rt,Mt.value,wt);if(Bt===null){Rt===null&&(Rt=kt);break}i&&Rt&&Bt.alternate===null&&e(at,Rt),ut=g(Bt,ut,Ot),xt===null?At=Bt:xt.sibling=Bt,xt=Bt,Rt=kt}if(Mt.done)return o(at,Rt),I&&tg(at,Ot),At;if(Rt===null){for(;!Mt.done;Ot++,Mt=$t.next())Mt=nt(at,Mt.value,wt),Mt!==null&&(ut=g(Mt,ut,Ot),xt===null?At=Mt:xt.sibling=Mt,xt=Mt);return I&&tg(at,Ot),At}for(Rt=d(at,Rt);!Mt.done;Ot++,Mt=$t.next())Mt=ot(Rt,at,Ot,Mt.value,wt),Mt!==null&&(i&&Mt.alternate!==null&&Rt.delete(Mt.key===null?Ot:Mt.key),ut=g(Mt,ut,Ot),xt===null?At=Mt:xt.sibling=Mt,xt=Mt);return i&&Rt.forEach(function(jt){return e(at,jt)}),I&&tg(at,Ot),At}function vt(at,ut,$t,wt){if(typeof $t=="object"&&$t!==null&&$t.type===ya&&$t.key===null&&($t=$t.props.children),typeof $t=="object"&&$t!==null){switch($t.$$typeof){case va:e:{for(var At=$t.key,xt=ut;xt!==null;){if(xt.key===At){if(At=$t.type,At===ya){if(xt.tag===7){o(at,xt.sibling),ut=h(xt,$t.props.children),ut.return=at,at=ut;break e}}else if(xt.elementType===At||typeof At=="object"&&At!==null&&At.$$typeof===Ha&&uh(At)===xt.type){o(at,xt.sibling),ut=h(xt,$t.props),ut.ref=sh(at,xt,$t),ut.return=at,at=ut;break e}o(at,xt);break}else e(at,xt);xt=xt.sibling}$t.type===ya?(ut=Ah($t.props.children,at.mode,wt,$t.key),ut.return=at,at=ut):(wt=yh($t.type,$t.key,$t.props,null,at.mode,wt),wt.ref=sh(at,ut,$t),wt.return=at,at=wt)}return b(at);case wa:e:{for(xt=$t.key;ut!==null;){if(ut.key===xt)if(ut.tag===4&&ut.stateNode.containerInfo===$t.containerInfo&&ut.stateNode.implementation===$t.implementation){o(at,ut.sibling),ut=h(ut,$t.children||[]),ut.return=at,at=ut;break e}else{o(at,ut);break}else e(at,ut);ut=ut.sibling}ut=zh($t,at.mode,wt),ut.return=at,at=ut}return b(at);case Ha:return xt=$t._init,vt(at,ut,xt($t._payload),wt)}if(eb($t))return st(at,ut,$t,wt);if(Ka($t))return bt(at,ut,$t,wt);th(at,$t)}return typeof $t=="string"&&$t!==""||typeof $t=="number"?($t=""+$t,ut!==null&&ut.tag===6?(o(at,ut.sibling),ut=h(ut,$t),ut.return=at,at=ut):(o(at,ut),ut=xh($t,at.mode,wt),ut.return=at,at=ut),b(at)):o(at,ut)}return vt}var Bh=vh(!0),Ch=vh(!1),Dh={},Eh=Uf(Dh),Fh=Uf(Dh),Gh=Uf(Dh);function Hh(i){if(i===Dh)throw Error(p(174));return i}function Ih(i,e){switch(G(Gh,e),G(Fh,i),G(Eh,Dh),i=e.nodeType,i){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:lb(null,"");break;default:i=i===8?e.parentNode:e,e=i.namespaceURI||null,i=i.tagName,e=lb(e,i)}E$1(Eh),G(Eh,e)}function Jh(){E$1(Eh),E$1(Fh),E$1(Gh)}function Kh(i){Hh(Gh.current);var e=Hh(Eh.current),o=lb(e,i.type);e!==o&&(G(Fh,i),G(Eh,o))}function Lh(i){Fh.current===i&&(E$1(Eh),E$1(Fh))}var M$1=Uf(0);function Mh(i){for(var e=i;e!==null;){if(e.tag===13){var o=e.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break;for(;e.sibling===null;){if(e.return===null||e.return===i)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Nh=[];function Oh(){for(var i=0;i<Nh.length;i++)Nh[i]._workInProgressVersionPrimary=null;Nh.length=0}var Ph=ua.ReactCurrentDispatcher,Qh=ua.ReactCurrentBatchConfig,Rh=0,N=null,O$1=null,P$1=null,Sh=!1,Th=!1,Uh=0,Vh=0;function Q$1(){throw Error(p(321))}function Wh(i,e){if(e===null)return!1;for(var o=0;o<e.length&&o<i.length;o++)if(!He$1(i[o],e[o]))return!1;return!0}function Xh(i,e,o,d,h,g){if(Rh=g,N=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ph.current=i===null||i.memoizedState===null?Yh:Zh,i=o(d,h),Th){g=0;do{if(Th=!1,Uh=0,25<=g)throw Error(p(301));g+=1,P$1=O$1=null,e.updateQueue=null,Ph.current=$h,i=o(d,h)}while(Th)}if(Ph.current=ai,e=O$1!==null&&O$1.next!==null,Rh=0,P$1=O$1=N=null,Sh=!1,e)throw Error(p(300));return i}function bi$1(){var i=Uh!==0;return Uh=0,i}function ci(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return P$1===null?N.memoizedState=P$1=i:P$1=P$1.next=i,P$1}function di(){if(O$1===null){var i=N.alternate;i=i!==null?i.memoizedState:null}else i=O$1.next;var e=P$1===null?N.memoizedState:P$1.next;if(e!==null)P$1=e,O$1=i;else{if(i===null)throw Error(p(310));O$1=i,i={memoizedState:O$1.memoizedState,baseState:O$1.baseState,baseQueue:O$1.baseQueue,queue:O$1.queue,next:null},P$1===null?N.memoizedState=P$1=i:P$1=P$1.next=i}return P$1}function ei(i,e){return typeof e=="function"?e(i):e}function fi(i){var e=di(),o=e.queue;if(o===null)throw Error(p(311));o.lastRenderedReducer=i;var d=O$1,h=d.baseQueue,g=o.pending;if(g!==null){if(h!==null){var b=h.next;h.next=g.next,g.next=b}d.baseQueue=h=g,o.pending=null}if(h!==null){g=h.next,d=d.baseState;var $=b=null,j=null,et=g;do{var tt=et.lane;if((Rh&tt)===tt)j!==null&&(j=j.next={lane:0,action:et.action,hasEagerState:et.hasEagerState,eagerState:et.eagerState,next:null}),d=et.hasEagerState?et.eagerState:i(d,et.action);else{var nt={lane:tt,action:et.action,hasEagerState:et.hasEagerState,eagerState:et.eagerState,next:null};j===null?($=j=nt,b=d):j=j.next=nt,N.lanes|=tt,hh|=tt}et=et.next}while(et!==null&&et!==g);j===null?b=d:j.next=$,He$1(d,e.memoizedState)||(Ug=!0),e.memoizedState=d,e.baseState=b,e.baseQueue=j,o.lastRenderedState=d}if(i=o.interleaved,i!==null){h=i;do g=h.lane,N.lanes|=g,hh|=g,h=h.next;while(h!==i)}else h===null&&(o.lanes=0);return[e.memoizedState,o.dispatch]}function gi(i){var e=di(),o=e.queue;if(o===null)throw Error(p(311));o.lastRenderedReducer=i;var d=o.dispatch,h=o.pending,g=e.memoizedState;if(h!==null){o.pending=null;var b=h=h.next;do g=i(g,b.action),b=b.next;while(b!==h);He$1(g,e.memoizedState)||(Ug=!0),e.memoizedState=g,e.baseQueue===null&&(e.baseState=g),o.lastRenderedState=g}return[g,d]}function hi$1(){}function ii(i,e){var o=N,d=di(),h=e(),g=!He$1(d.memoizedState,h);if(g&&(d.memoizedState=h,Ug=!0),d=d.queue,ji(ki.bind(null,o,d,i),[i]),d.getSnapshot!==e||g||P$1!==null&&P$1.memoizedState.tag&1){if(o.flags|=2048,li(9,mi$1.bind(null,o,d,h,e),void 0,null),R$1===null)throw Error(p(349));Rh&30||ni(o,e,h)}return h}function ni(i,e,o){i.flags|=16384,i={getSnapshot:e,value:o},e=N.updateQueue,e===null?(e={lastEffect:null,stores:null},N.updateQueue=e,e.stores=[i]):(o=e.stores,o===null?e.stores=[i]:o.push(i))}function mi$1(i,e,o,d){e.value=o,e.getSnapshot=d,oi(e)&&pi$4(i)}function ki(i,e,o){return o(function(){oi(e)&&pi$4(i)})}function oi(i){var e=i.getSnapshot;i=i.value;try{var o=e();return!He$1(i,o)}catch{return!0}}function pi$4(i){var e=Zg(i,1);e!==null&&mh(e,i,1,-1)}function qi(i){var e=ci();return typeof i=="function"&&(i=i()),e.memoizedState=e.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ei,lastRenderedState:i},e.queue=i,i=i.dispatch=ri.bind(null,N,i),[e.memoizedState,i]}function li(i,e,o,d){return i={tag:i,create:e,destroy:o,deps:d,next:null},e=N.updateQueue,e===null?(e={lastEffect:null,stores:null},N.updateQueue=e,e.lastEffect=i.next=i):(o=e.lastEffect,o===null?e.lastEffect=i.next=i:(d=o.next,o.next=i,i.next=d,e.lastEffect=i)),i}function si(){return di().memoizedState}function ti(i,e,o,d){var h=ci();N.flags|=i,h.memoizedState=li(1|e,o,void 0,d===void 0?null:d)}function ui(i,e,o,d){var h=di();d=d===void 0?null:d;var g=void 0;if(O$1!==null){var b=O$1.memoizedState;if(g=b.destroy,d!==null&&Wh(d,b.deps)){h.memoizedState=li(e,o,g,d);return}}N.flags|=i,h.memoizedState=li(1|e,o,g,d)}function vi(i,e){return ti(8390656,8,i,e)}function ji(i,e){return ui(2048,8,i,e)}function wi(i,e){return ui(4,2,i,e)}function xi(i,e){return ui(4,4,i,e)}function yi$1(i,e){if(typeof e=="function")return i=i(),e(i),function(){e(null)};if(e!=null)return i=i(),e.current=i,function(){e.current=null}}function zi(i,e,o){return o=o!=null?o.concat([i]):null,ui(4,4,yi$1.bind(null,e,i),o)}function Ai$1(){}function Bi(i,e){var o=di();e=e===void 0?null:e;var d=o.memoizedState;return d!==null&&e!==null&&Wh(e,d[1])?d[0]:(o.memoizedState=[i,e],i)}function Ci(i,e){var o=di();e=e===void 0?null:e;var d=o.memoizedState;return d!==null&&e!==null&&Wh(e,d[1])?d[0]:(i=i(),o.memoizedState=[i,e],i)}function Di(i,e,o){return Rh&21?(He$1(o,e)||(o=yc(),N.lanes|=o,hh|=o,i.baseState=!0),e):(i.baseState&&(i.baseState=!1,Ug=!0),i.memoizedState=o)}function Ei$1(i,e){var o=C$1;C$1=o!==0&&4>o?o:4,i(!0);var d=Qh.transition;Qh.transition={};try{i(!1),e()}finally{C$1=o,Qh.transition=d}}function Fi(){return di().memoizedState}function Gi(i,e,o){var d=lh(i);if(o={lane:d,action:o,hasEagerState:!1,eagerState:null,next:null},Hi(i))Ii(e,o);else if(o=Yg(i,e,o,d),o!==null){var h=L();mh(o,i,d,h),Ji(o,e,d)}}function ri(i,e,o){var d=lh(i),h={lane:d,action:o,hasEagerState:!1,eagerState:null,next:null};if(Hi(i))Ii(e,h);else{var g=i.alternate;if(i.lanes===0&&(g===null||g.lanes===0)&&(g=e.lastRenderedReducer,g!==null))try{var b=e.lastRenderedState,$=g(b,o);if(h.hasEagerState=!0,h.eagerState=$,He$1($,b)){var j=e.interleaved;j===null?(h.next=h,Xg(e)):(h.next=j.next,j.next=h),e.interleaved=h;return}}catch{}finally{}o=Yg(i,e,h,d),o!==null&&(h=L(),mh(o,i,d,h),Ji(o,e,d))}}function Hi(i){var e=i.alternate;return i===N||e!==null&&e===N}function Ii(i,e){Th=Sh=!0;var o=i.pending;o===null?e.next=e:(e.next=o.next,o.next=e),i.pending=e}function Ji(i,e,o){if(o&4194240){var d=e.lanes;d&=i.pendingLanes,o|=d,e.lanes=o,Cc(i,o)}}var ai={readContext:Vg,useCallback:Q$1,useContext:Q$1,useEffect:Q$1,useImperativeHandle:Q$1,useInsertionEffect:Q$1,useLayoutEffect:Q$1,useMemo:Q$1,useReducer:Q$1,useRef:Q$1,useState:Q$1,useDebugValue:Q$1,useDeferredValue:Q$1,useTransition:Q$1,useMutableSource:Q$1,useSyncExternalStore:Q$1,useId:Q$1,unstable_isNewReconciler:!1},Yh={readContext:Vg,useCallback:function(i,e){return ci().memoizedState=[i,e===void 0?null:e],i},useContext:Vg,useEffect:vi,useImperativeHandle:function(i,e,o){return o=o!=null?o.concat([i]):null,ti(4194308,4,yi$1.bind(null,e,i),o)},useLayoutEffect:function(i,e){return ti(4194308,4,i,e)},useInsertionEffect:function(i,e){return ti(4,2,i,e)},useMemo:function(i,e){var o=ci();return e=e===void 0?null:e,i=i(),o.memoizedState=[i,e],i},useReducer:function(i,e,o){var d=ci();return e=o!==void 0?o(e):e,d.memoizedState=d.baseState=e,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:e},d.queue=i,i=i.dispatch=Gi.bind(null,N,i),[d.memoizedState,i]},useRef:function(i){var e=ci();return i={current:i},e.memoizedState=i},useState:qi,useDebugValue:Ai$1,useDeferredValue:function(i){return ci().memoizedState=i},useTransition:function(){var i=qi(!1),e=i[0];return i=Ei$1.bind(null,i[1]),ci().memoizedState=i,[e,i]},useMutableSource:function(){},useSyncExternalStore:function(i,e,o){var d=N,h=ci();if(I){if(o===void 0)throw Error(p(407));o=o()}else{if(o=e(),R$1===null)throw Error(p(349));Rh&30||ni(d,e,o)}h.memoizedState=o;var g={value:o,getSnapshot:e};return h.queue=g,vi(ki.bind(null,d,g,i),[i]),d.flags|=2048,li(9,mi$1.bind(null,d,g,o,e),void 0,null),o},useId:function(){var i=ci(),e=R$1.identifierPrefix;if(I){var o=sg,d=rg;o=(d&~(1<<32-oc(d)-1)).toString(32)+o,e=":"+e+"R"+o,o=Uh++,0<o&&(e+="H"+o.toString(32)),e+=":"}else o=Vh++,e=":"+e+"r"+o.toString(32)+":";return i.memoizedState=e},unstable_isNewReconciler:!1},Zh={readContext:Vg,useCallback:Bi,useContext:Vg,useEffect:ji,useImperativeHandle:zi,useInsertionEffect:wi,useLayoutEffect:xi,useMemo:Ci,useReducer:fi,useRef:si,useState:function(){return fi(ei)},useDebugValue:Ai$1,useDeferredValue:function(i){var e=di();return Di(e,O$1.memoizedState,i)},useTransition:function(){var i=fi(ei)[0],e=di().memoizedState;return[i,e]},useMutableSource:hi$1,useSyncExternalStore:ii,useId:Fi,unstable_isNewReconciler:!1},$h={readContext:Vg,useCallback:Bi,useContext:Vg,useEffect:ji,useImperativeHandle:zi,useInsertionEffect:wi,useLayoutEffect:xi,useMemo:Ci,useReducer:gi,useRef:si,useState:function(){return gi(ei)},useDebugValue:Ai$1,useDeferredValue:function(i){var e=di();return O$1===null?e.memoizedState=i:Di(e,O$1.memoizedState,i)},useTransition:function(){var i=gi(ei)[0],e=di().memoizedState;return[i,e]},useMutableSource:hi$1,useSyncExternalStore:ii,useId:Fi,unstable_isNewReconciler:!1};function Ki(i,e){try{var o="",d=e;do o+=Pa(d),d=d.return;while(d);var h=o}catch(g){h=`
Error generating stack: `+g.message+`
`+g.stack}return{value:i,source:e,stack:h,digest:null}}function Li(i,e,o){return{value:i,source:null,stack:o??null,digest:e??null}}function Mi(i,e){try{console.error(e.value)}catch(o){setTimeout(function(){throw o})}}var Ni=typeof WeakMap=="function"?WeakMap:Map;function Oi(i,e,o){o=ch(-1,o),o.tag=3,o.payload={element:null};var d=e.value;return o.callback=function(){Pi||(Pi=!0,Qi=d),Mi(i,e)},o}function Ri$1(i,e,o){o=ch(-1,o),o.tag=3;var d=i.type.getDerivedStateFromError;if(typeof d=="function"){var h=e.value;o.payload=function(){return d(h)},o.callback=function(){Mi(i,e)}}var g=i.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(o.callback=function(){Mi(i,e),typeof d!="function"&&(Si$1===null?Si$1=new Set([this]):Si$1.add(this));var b=e.stack;this.componentDidCatch(e.value,{componentStack:b!==null?b:""})}),o}function Ti$1(i,e,o){var d=i.pingCache;if(d===null){d=i.pingCache=new Ni;var h=new Set;d.set(e,h)}else h=d.get(e),h===void 0&&(h=new Set,d.set(e,h));h.has(o)||(h.add(o),i=Ui.bind(null,i,e,o),e.then(i,i))}function Vi(i){do{var e;if((e=i.tag===13)&&(e=i.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return i;i=i.return}while(i!==null);return null}function Wi(i,e,o,d,h){return i.mode&1?(i.flags|=65536,i.lanes=h,i):(i===e?i.flags|=65536:(i.flags|=128,o.flags|=131072,o.flags&=-52805,o.tag===1&&(o.alternate===null?o.tag=17:(e=ch(-1,1),e.tag=2,dh(o,e,1))),o.lanes|=1),i)}var Xi=ua.ReactCurrentOwner,Ug=!1;function Yi(i,e,o,d){e.child=i===null?Ch(e,null,o,d):Bh(e,i.child,o,d)}function Zi(i,e,o,d,h){o=o.render;var g=e.ref;return Tg(e,h),d=Xh(i,e,o,d,g,h),o=bi$1(),i!==null&&!Ug?(e.updateQueue=i.updateQueue,e.flags&=-2053,i.lanes&=~h,$i(i,e,h)):(I&&o&&vg(e),e.flags|=1,Yi(i,e,d,h),e.child)}function aj(i,e,o,d,h){if(i===null){var g=o.type;return typeof g=="function"&&!bj(g)&&g.defaultProps===void 0&&o.compare===null&&o.defaultProps===void 0?(e.tag=15,e.type=g,cj(i,e,g,d,h)):(i=yh(o.type,null,d,e,e.mode,h),i.ref=e.ref,i.return=e,e.child=i)}if(g=i.child,!(i.lanes&h)){var b=g.memoizedProps;if(o=o.compare,o=o!==null?o:Ie,o(b,d)&&i.ref===e.ref)return $i(i,e,h)}return e.flags|=1,i=wh(g,d),i.ref=e.ref,i.return=e,e.child=i}function cj(i,e,o,d,h){if(i!==null){var g=i.memoizedProps;if(Ie(g,d)&&i.ref===e.ref)if(Ug=!1,e.pendingProps=d=g,(i.lanes&h)!==0)i.flags&131072&&(Ug=!0);else return e.lanes=i.lanes,$i(i,e,h)}return dj(i,e,o,d,h)}function ej(i,e,o){var d=e.pendingProps,h=d.children,g=i!==null?i.memoizedState:null;if(d.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},G(fj,gj),gj|=o;else{if(!(o&1073741824))return i=g!==null?g.baseLanes|o:o,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:i,cachePool:null,transitions:null},e.updateQueue=null,G(fj,gj),gj|=i,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},d=g!==null?g.baseLanes:o,G(fj,gj),gj|=d}else g!==null?(d=g.baseLanes|o,e.memoizedState=null):d=o,G(fj,gj),gj|=d;return Yi(i,e,h,o),e.child}function hj(i,e){var o=e.ref;(i===null&&o!==null||i!==null&&i.ref!==o)&&(e.flags|=512,e.flags|=2097152)}function dj(i,e,o,d,h){var g=Zf(o)?Xf:H.current;return g=Yf(e,g),Tg(e,h),o=Xh(i,e,o,d,g,h),d=bi$1(),i!==null&&!Ug?(e.updateQueue=i.updateQueue,e.flags&=-2053,i.lanes&=~h,$i(i,e,h)):(I&&d&&vg(e),e.flags|=1,Yi(i,e,o,h),e.child)}function ij(i,e,o,d,h){if(Zf(o)){var g=!0;cg(e)}else g=!1;if(Tg(e,h),e.stateNode===null)jj(i,e),ph(e,o,d),rh(e,o,d,h),d=!0;else if(i===null){var b=e.stateNode,$=e.memoizedProps;b.props=$;var j=b.context,et=o.contextType;typeof et=="object"&&et!==null?et=Vg(et):(et=Zf(o)?Xf:H.current,et=Yf(e,et));var tt=o.getDerivedStateFromProps,nt=typeof tt=="function"||typeof b.getSnapshotBeforeUpdate=="function";nt||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||($!==d||j!==et)&&qh(e,b,d,et),$g=!1;var rt=e.memoizedState;b.state=rt,gh(e,d,b,h),j=e.memoizedState,$!==d||rt!==j||Wf.current||$g?(typeof tt=="function"&&(kh(e,o,tt,d),j=e.memoizedState),($=$g||oh(e,o,$,d,rt,j,et))?(nt||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(e.flags|=4194308)):(typeof b.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=d,e.memoizedState=j),b.props=d,b.state=j,b.context=et,d=$):(typeof b.componentDidMount=="function"&&(e.flags|=4194308),d=!1)}else{b=e.stateNode,bh(i,e),$=e.memoizedProps,et=e.type===e.elementType?$:Lg(e.type,$),b.props=et,nt=e.pendingProps,rt=b.context,j=o.contextType,typeof j=="object"&&j!==null?j=Vg(j):(j=Zf(o)?Xf:H.current,j=Yf(e,j));var ot=o.getDerivedStateFromProps;(tt=typeof ot=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||($!==nt||rt!==j)&&qh(e,b,d,j),$g=!1,rt=e.memoizedState,b.state=rt,gh(e,d,b,h);var st=e.memoizedState;$!==nt||rt!==st||Wf.current||$g?(typeof ot=="function"&&(kh(e,o,ot,d),st=e.memoizedState),(et=$g||oh(e,o,et,d,rt,st,j)||!1)?(tt||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(d,st,j),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(d,st,j)),typeof b.componentDidUpdate=="function"&&(e.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof b.componentDidUpdate!="function"||$===i.memoizedProps&&rt===i.memoizedState||(e.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||$===i.memoizedProps&&rt===i.memoizedState||(e.flags|=1024),e.memoizedProps=d,e.memoizedState=st),b.props=d,b.state=st,b.context=j,d=et):(typeof b.componentDidUpdate!="function"||$===i.memoizedProps&&rt===i.memoizedState||(e.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||$===i.memoizedProps&&rt===i.memoizedState||(e.flags|=1024),d=!1)}return kj(i,e,o,d,g,h)}function kj(i,e,o,d,h,g){hj(i,e);var b=(e.flags&128)!==0;if(!d&&!b)return h&&dg(e,o,!1),$i(i,e,g);d=e.stateNode,Xi.current=e;var $=b&&typeof o.getDerivedStateFromError!="function"?null:d.render();return e.flags|=1,i!==null&&b?(e.child=Bh(e,i.child,null,g),e.child=Bh(e,null,$,g)):Yi(i,e,$,g),e.memoizedState=d.state,h&&dg(e,o,!0),e.child}function lj(i){var e=i.stateNode;e.pendingContext?ag(i,e.pendingContext,e.pendingContext!==e.context):e.context&&ag(i,e.context,!1),Ih(i,e.containerInfo)}function mj(i,e,o,d,h){return Ig(),Jg(h),e.flags|=256,Yi(i,e,o,d),e.child}var nj={dehydrated:null,treeContext:null,retryLane:0};function oj(i){return{baseLanes:i,cachePool:null,transitions:null}}function pj(i,e,o){var d=e.pendingProps,h=M$1.current,g=!1,b=(e.flags&128)!==0,$;if(($=b)||($=i!==null&&i.memoizedState===null?!1:(h&2)!==0),$?(g=!0,e.flags&=-129):(i===null||i.memoizedState!==null)&&(h|=1),G(M$1,h&1),i===null)return Eg(e),i=e.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?(e.mode&1?i.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(b=d.children,i=d.fallback,g?(d=e.mode,g=e.child,b={mode:"hidden",children:b},!(d&1)&&g!==null?(g.childLanes=0,g.pendingProps=b):g=qj(b,d,0,null),i=Ah(i,d,o,null),g.return=e,i.return=e,g.sibling=i,e.child=g,e.child.memoizedState=oj(o),e.memoizedState=nj,i):rj(e,b));if(h=i.memoizedState,h!==null&&($=h.dehydrated,$!==null))return sj(i,e,b,d,$,h,o);if(g){g=d.fallback,b=e.mode,h=i.child,$=h.sibling;var j={mode:"hidden",children:d.children};return!(b&1)&&e.child!==h?(d=e.child,d.childLanes=0,d.pendingProps=j,e.deletions=null):(d=wh(h,j),d.subtreeFlags=h.subtreeFlags&14680064),$!==null?g=wh($,g):(g=Ah(g,b,o,null),g.flags|=2),g.return=e,d.return=e,d.sibling=g,e.child=d,d=g,g=e.child,b=i.child.memoizedState,b=b===null?oj(o):{baseLanes:b.baseLanes|o,cachePool:null,transitions:b.transitions},g.memoizedState=b,g.childLanes=i.childLanes&~o,e.memoizedState=nj,d}return g=i.child,i=g.sibling,d=wh(g,{mode:"visible",children:d.children}),!(e.mode&1)&&(d.lanes=o),d.return=e,d.sibling=null,i!==null&&(o=e.deletions,o===null?(e.deletions=[i],e.flags|=16):o.push(i)),e.child=d,e.memoizedState=null,d}function rj(i,e){return e=qj({mode:"visible",children:e},i.mode,0,null),e.return=i,i.child=e}function tj(i,e,o,d){return d!==null&&Jg(d),Bh(e,i.child,null,o),i=rj(e,e.pendingProps.children),i.flags|=2,e.memoizedState=null,i}function sj(i,e,o,d,h,g,b){if(o)return e.flags&256?(e.flags&=-257,d=Li(Error(p(422))),tj(i,e,b,d)):e.memoizedState!==null?(e.child=i.child,e.flags|=128,null):(g=d.fallback,h=e.mode,d=qj({mode:"visible",children:d.children},h,0,null),g=Ah(g,h,b,null),g.flags|=2,d.return=e,g.return=e,d.sibling=g,e.child=d,e.mode&1&&Bh(e,i.child,null,b),e.child.memoizedState=oj(b),e.memoizedState=nj,g);if(!(e.mode&1))return tj(i,e,b,null);if(h.data==="$!"){if(d=h.nextSibling&&h.nextSibling.dataset,d)var $=d.dgst;return d=$,g=Error(p(419)),d=Li(g,d,void 0),tj(i,e,b,d)}if($=(b&i.childLanes)!==0,Ug||$){if(d=R$1,d!==null){switch(b&-b){case 4:h=2;break;case 16:h=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:h=32;break;case 536870912:h=268435456;break;default:h=0}h=h&(d.suspendedLanes|b)?0:h,h!==0&&h!==g.retryLane&&(g.retryLane=h,Zg(i,h),mh(d,i,h,-1))}return uj(),d=Li(Error(p(421))),tj(i,e,b,d)}return h.data==="$?"?(e.flags|=128,e.child=i.child,e=vj.bind(null,i),h._reactRetry=e,null):(i=g.treeContext,yg=Lf(h.nextSibling),xg=e,I=!0,zg=null,i!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=i.id,sg=i.overflow,qg=e),e=rj(e,d.children),e.flags|=4096,e)}function wj(i,e,o){i.lanes|=e;var d=i.alternate;d!==null&&(d.lanes|=e),Sg(i.return,e,o)}function xj(i,e,o,d,h){var g=i.memoizedState;g===null?i.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:d,tail:o,tailMode:h}:(g.isBackwards=e,g.rendering=null,g.renderingStartTime=0,g.last=d,g.tail=o,g.tailMode=h)}function yj(i,e,o){var d=e.pendingProps,h=d.revealOrder,g=d.tail;if(Yi(i,e,d.children,o),d=M$1.current,d&2)d=d&1|2,e.flags|=128;else{if(i!==null&&i.flags&128)e:for(i=e.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&wj(i,o,e);else if(i.tag===19)wj(i,o,e);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break e;for(;i.sibling===null;){if(i.return===null||i.return===e)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}d&=1}if(G(M$1,d),!(e.mode&1))e.memoizedState=null;else switch(h){case"forwards":for(o=e.child,h=null;o!==null;)i=o.alternate,i!==null&&Mh(i)===null&&(h=o),o=o.sibling;o=h,o===null?(h=e.child,e.child=null):(h=o.sibling,o.sibling=null),xj(e,!1,h,o,g);break;case"backwards":for(o=null,h=e.child,e.child=null;h!==null;){if(i=h.alternate,i!==null&&Mh(i)===null){e.child=h;break}i=h.sibling,h.sibling=o,o=h,h=i}xj(e,!0,o,null,g);break;case"together":xj(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function jj(i,e){!(e.mode&1)&&i!==null&&(i.alternate=null,e.alternate=null,e.flags|=2)}function $i(i,e,o){if(i!==null&&(e.dependencies=i.dependencies),hh|=e.lanes,!(o&e.childLanes))return null;if(i!==null&&e.child!==i.child)throw Error(p(153));if(e.child!==null){for(i=e.child,o=wh(i,i.pendingProps),e.child=o,o.return=e;i.sibling!==null;)i=i.sibling,o=o.sibling=wh(i,i.pendingProps),o.return=e;o.sibling=null}return e.child}function zj(i,e,o){switch(e.tag){case 3:lj(e),Ig();break;case 5:Kh(e);break;case 1:Zf(e.type)&&cg(e);break;case 4:Ih(e,e.stateNode.containerInfo);break;case 10:var d=e.type._context,h=e.memoizedProps.value;G(Mg,d._currentValue),d._currentValue=h;break;case 13:if(d=e.memoizedState,d!==null)return d.dehydrated!==null?(G(M$1,M$1.current&1),e.flags|=128,null):o&e.child.childLanes?pj(i,e,o):(G(M$1,M$1.current&1),i=$i(i,e,o),i!==null?i.sibling:null);G(M$1,M$1.current&1);break;case 19:if(d=(o&e.childLanes)!==0,i.flags&128){if(d)return yj(i,e,o);e.flags|=128}if(h=e.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),G(M$1,M$1.current),d)break;return null;case 22:case 23:return e.lanes=0,ej(i,e,o)}return $i(i,e,o)}var Aj,Bj,Cj,Dj;Aj=function(i,e){for(var o=e.child;o!==null;){if(o.tag===5||o.tag===6)i.appendChild(o.stateNode);else if(o.tag!==4&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===e)break;for(;o.sibling===null;){if(o.return===null||o.return===e)return;o=o.return}o.sibling.return=o.return,o=o.sibling}};Bj=function(){};Cj=function(i,e,o,d){var h=i.memoizedProps;if(h!==d){i=e.stateNode,Hh(Eh.current);var g=null;switch(o){case"input":h=Ya(i,h),d=Ya(i,d),g=[];break;case"select":h=A$1({},h,{value:void 0}),d=A$1({},d,{value:void 0}),g=[];break;case"textarea":h=gb(i,h),d=gb(i,d),g=[];break;default:typeof h.onClick!="function"&&typeof d.onClick=="function"&&(i.onclick=Bf)}ub(o,d);var b;o=null;for(et in h)if(!d.hasOwnProperty(et)&&h.hasOwnProperty(et)&&h[et]!=null)if(et==="style"){var $=h[et];for(b in $)$.hasOwnProperty(b)&&(o||(o={}),o[b]="")}else et!=="dangerouslySetInnerHTML"&&et!=="children"&&et!=="suppressContentEditableWarning"&&et!=="suppressHydrationWarning"&&et!=="autoFocus"&&(ea.hasOwnProperty(et)?g||(g=[]):(g=g||[]).push(et,null));for(et in d){var j=d[et];if($=h!=null?h[et]:void 0,d.hasOwnProperty(et)&&j!==$&&(j!=null||$!=null))if(et==="style")if($){for(b in $)!$.hasOwnProperty(b)||j&&j.hasOwnProperty(b)||(o||(o={}),o[b]="");for(b in j)j.hasOwnProperty(b)&&$[b]!==j[b]&&(o||(o={}),o[b]=j[b])}else o||(g||(g=[]),g.push(et,o)),o=j;else et==="dangerouslySetInnerHTML"?(j=j?j.__html:void 0,$=$?$.__html:void 0,j!=null&&$!==j&&(g=g||[]).push(et,j)):et==="children"?typeof j!="string"&&typeof j!="number"||(g=g||[]).push(et,""+j):et!=="suppressContentEditableWarning"&&et!=="suppressHydrationWarning"&&(ea.hasOwnProperty(et)?(j!=null&&et==="onScroll"&&D$2("scroll",i),g||$===j||(g=[])):(g=g||[]).push(et,j))}o&&(g=g||[]).push("style",o);var et=g;(e.updateQueue=et)&&(e.flags|=4)}};Dj=function(i,e,o,d){o!==d&&(e.flags|=4)};function Ej(i,e){if(!I)switch(i.tailMode){case"hidden":e=i.tail;for(var o=null;e!==null;)e.alternate!==null&&(o=e),e=e.sibling;o===null?i.tail=null:o.sibling=null;break;case"collapsed":o=i.tail;for(var d=null;o!==null;)o.alternate!==null&&(d=o),o=o.sibling;d===null?e||i.tail===null?i.tail=null:i.tail.sibling=null:d.sibling=null}}function S(i){var e=i.alternate!==null&&i.alternate.child===i.child,o=0,d=0;if(e)for(var h=i.child;h!==null;)o|=h.lanes|h.childLanes,d|=h.subtreeFlags&14680064,d|=h.flags&14680064,h.return=i,h=h.sibling;else for(h=i.child;h!==null;)o|=h.lanes|h.childLanes,d|=h.subtreeFlags,d|=h.flags,h.return=i,h=h.sibling;return i.subtreeFlags|=d,i.childLanes=o,e}function Fj(i,e,o){var d=e.pendingProps;switch(wg(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S(e),null;case 1:return Zf(e.type)&&$f(),S(e),null;case 3:return d=e.stateNode,Jh(),E$1(Wf),E$1(H),Oh(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(i===null||i.child===null)&&(Gg(e)?e.flags|=4:i===null||i.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,zg!==null&&(Gj(zg),zg=null))),Bj(i,e),S(e),null;case 5:Lh(e);var h=Hh(Gh.current);if(o=e.type,i!==null&&e.stateNode!=null)Cj(i,e,o,d,h),i.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!d){if(e.stateNode===null)throw Error(p(166));return S(e),null}if(i=Hh(Eh.current),Gg(e)){d=e.stateNode,o=e.type;var g=e.memoizedProps;switch(d[Of]=e,d[Pf]=g,i=(e.mode&1)!==0,o){case"dialog":D$2("cancel",d),D$2("close",d);break;case"iframe":case"object":case"embed":D$2("load",d);break;case"video":case"audio":for(h=0;h<lf.length;h++)D$2(lf[h],d);break;case"source":D$2("error",d);break;case"img":case"image":case"link":D$2("error",d),D$2("load",d);break;case"details":D$2("toggle",d);break;case"input":Za(d,g),D$2("invalid",d);break;case"select":d._wrapperState={wasMultiple:!!g.multiple},D$2("invalid",d);break;case"textarea":hb(d,g),D$2("invalid",d)}ub(o,g),h=null;for(var b in g)if(g.hasOwnProperty(b)){var $=g[b];b==="children"?typeof $=="string"?d.textContent!==$&&(g.suppressHydrationWarning!==!0&&Af(d.textContent,$,i),h=["children",$]):typeof $=="number"&&d.textContent!==""+$&&(g.suppressHydrationWarning!==!0&&Af(d.textContent,$,i),h=["children",""+$]):ea.hasOwnProperty(b)&&$!=null&&b==="onScroll"&&D$2("scroll",d)}switch(o){case"input":Va(d),db(d,g,!0);break;case"textarea":Va(d),jb(d);break;case"select":case"option":break;default:typeof g.onClick=="function"&&(d.onclick=Bf)}d=h,e.updateQueue=d,d!==null&&(e.flags|=4)}else{b=h.nodeType===9?h:h.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=kb(o)),i==="http://www.w3.org/1999/xhtml"?o==="script"?(i=b.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof d.is=="string"?i=b.createElement(o,{is:d.is}):(i=b.createElement(o),o==="select"&&(b=i,d.multiple?b.multiple=!0:d.size&&(b.size=d.size))):i=b.createElementNS(i,o),i[Of]=e,i[Pf]=d,Aj(i,e,!1,!1),e.stateNode=i;e:{switch(b=vb(o,d),o){case"dialog":D$2("cancel",i),D$2("close",i),h=d;break;case"iframe":case"object":case"embed":D$2("load",i),h=d;break;case"video":case"audio":for(h=0;h<lf.length;h++)D$2(lf[h],i);h=d;break;case"source":D$2("error",i),h=d;break;case"img":case"image":case"link":D$2("error",i),D$2("load",i),h=d;break;case"details":D$2("toggle",i),h=d;break;case"input":Za(i,d),h=Ya(i,d),D$2("invalid",i);break;case"option":h=d;break;case"select":i._wrapperState={wasMultiple:!!d.multiple},h=A$1({},d,{value:void 0}),D$2("invalid",i);break;case"textarea":hb(i,d),h=gb(i,d),D$2("invalid",i);break;default:h=d}ub(o,h),$=h;for(g in $)if($.hasOwnProperty(g)){var j=$[g];g==="style"?sb(i,j):g==="dangerouslySetInnerHTML"?(j=j?j.__html:void 0,j!=null&&nb(i,j)):g==="children"?typeof j=="string"?(o!=="textarea"||j!=="")&&ob(i,j):typeof j=="number"&&ob(i,""+j):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(ea.hasOwnProperty(g)?j!=null&&g==="onScroll"&&D$2("scroll",i):j!=null&&ta(i,g,j,b))}switch(o){case"input":Va(i),db(i,d,!1);break;case"textarea":Va(i),jb(i);break;case"option":d.value!=null&&i.setAttribute("value",""+Sa(d.value));break;case"select":i.multiple=!!d.multiple,g=d.value,g!=null?fb(i,!!d.multiple,g,!1):d.defaultValue!=null&&fb(i,!!d.multiple,d.defaultValue,!0);break;default:typeof h.onClick=="function"&&(i.onclick=Bf)}switch(o){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}}d&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return S(e),null;case 6:if(i&&e.stateNode!=null)Dj(i,e,i.memoizedProps,d);else{if(typeof d!="string"&&e.stateNode===null)throw Error(p(166));if(o=Hh(Gh.current),Hh(Eh.current),Gg(e)){if(d=e.stateNode,o=e.memoizedProps,d[Of]=e,(g=d.nodeValue!==o)&&(i=xg,i!==null))switch(i.tag){case 3:Af(d.nodeValue,o,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&Af(d.nodeValue,o,(i.mode&1)!==0)}g&&(e.flags|=4)}else d=(o.nodeType===9?o:o.ownerDocument).createTextNode(d),d[Of]=e,e.stateNode=d}return S(e),null;case 13:if(E$1(M$1),d=e.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(I&&yg!==null&&e.mode&1&&!(e.flags&128))Hg(),Ig(),e.flags|=98560,g=!1;else if(g=Gg(e),d!==null&&d.dehydrated!==null){if(i===null){if(!g)throw Error(p(318));if(g=e.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(p(317));g[Of]=e}else Ig(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;S(e),g=!1}else zg!==null&&(Gj(zg),zg=null),g=!0;if(!g)return e.flags&65536?e:null}return e.flags&128?(e.lanes=o,e):(d=d!==null,d!==(i!==null&&i.memoizedState!==null)&&d&&(e.child.flags|=8192,e.mode&1&&(i===null||M$1.current&1?T$1===0&&(T$1=3):uj())),e.updateQueue!==null&&(e.flags|=4),S(e),null);case 4:return Jh(),Bj(i,e),i===null&&sf(e.stateNode.containerInfo),S(e),null;case 10:return Rg(e.type._context),S(e),null;case 17:return Zf(e.type)&&$f(),S(e),null;case 19:if(E$1(M$1),g=e.memoizedState,g===null)return S(e),null;if(d=(e.flags&128)!==0,b=g.rendering,b===null)if(d)Ej(g,!1);else{if(T$1!==0||i!==null&&i.flags&128)for(i=e.child;i!==null;){if(b=Mh(i),b!==null){for(e.flags|=128,Ej(g,!1),d=b.updateQueue,d!==null&&(e.updateQueue=d,e.flags|=4),e.subtreeFlags=0,d=o,o=e.child;o!==null;)g=o,i=d,g.flags&=14680066,b=g.alternate,b===null?(g.childLanes=0,g.lanes=i,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=b.childLanes,g.lanes=b.lanes,g.child=b.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=b.memoizedProps,g.memoizedState=b.memoizedState,g.updateQueue=b.updateQueue,g.type=b.type,i=b.dependencies,g.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),o=o.sibling;return G(M$1,M$1.current&1|2),e.child}i=i.sibling}g.tail!==null&&B$2()>Hj&&(e.flags|=128,d=!0,Ej(g,!1),e.lanes=4194304)}else{if(!d)if(i=Mh(b),i!==null){if(e.flags|=128,d=!0,o=i.updateQueue,o!==null&&(e.updateQueue=o,e.flags|=4),Ej(g,!0),g.tail===null&&g.tailMode==="hidden"&&!b.alternate&&!I)return S(e),null}else 2*B$2()-g.renderingStartTime>Hj&&o!==1073741824&&(e.flags|=128,d=!0,Ej(g,!1),e.lanes=4194304);g.isBackwards?(b.sibling=e.child,e.child=b):(o=g.last,o!==null?o.sibling=b:e.child=b,g.last=b)}return g.tail!==null?(e=g.tail,g.rendering=e,g.tail=e.sibling,g.renderingStartTime=B$2(),e.sibling=null,o=M$1.current,G(M$1,d?o&1|2:o&1),e):(S(e),null);case 22:case 23:return Ij(),d=e.memoizedState!==null,i!==null&&i.memoizedState!==null!==d&&(e.flags|=8192),d&&e.mode&1?gj&1073741824&&(S(e),e.subtreeFlags&6&&(e.flags|=8192)):S(e),null;case 24:return null;case 25:return null}throw Error(p(156,e.tag))}function Jj(i,e){switch(wg(e),e.tag){case 1:return Zf(e.type)&&$f(),i=e.flags,i&65536?(e.flags=i&-65537|128,e):null;case 3:return Jh(),E$1(Wf),E$1(H),Oh(),i=e.flags,i&65536&&!(i&128)?(e.flags=i&-65537|128,e):null;case 5:return Lh(e),null;case 13:if(E$1(M$1),i=e.memoizedState,i!==null&&i.dehydrated!==null){if(e.alternate===null)throw Error(p(340));Ig()}return i=e.flags,i&65536?(e.flags=i&-65537|128,e):null;case 19:return E$1(M$1),null;case 4:return Jh(),null;case 10:return Rg(e.type._context),null;case 22:case 23:return Ij(),null;case 24:return null;default:return null}}var Kj=!1,U=!1,Lj=typeof WeakSet=="function"?WeakSet:Set,V=null;function Mj(i,e){var o=i.ref;if(o!==null)if(typeof o=="function")try{o(null)}catch(d){W(i,e,d)}else o.current=null}function Nj(i,e,o){try{o()}catch(d){W(i,e,d)}}var Oj=!1;function Pj(i,e){if(Cf=dd,i=Me(),Ne(i)){if("selectionStart"in i)var o={start:i.selectionStart,end:i.selectionEnd};else e:{o=(o=i.ownerDocument)&&o.defaultView||window;var d=o.getSelection&&o.getSelection();if(d&&d.rangeCount!==0){o=d.anchorNode;var h=d.anchorOffset,g=d.focusNode;d=d.focusOffset;try{o.nodeType,g.nodeType}catch{o=null;break e}var b=0,$=-1,j=-1,et=0,tt=0,nt=i,rt=null;t:for(;;){for(var ot;nt!==o||h!==0&&nt.nodeType!==3||($=b+h),nt!==g||d!==0&&nt.nodeType!==3||(j=b+d),nt.nodeType===3&&(b+=nt.nodeValue.length),(ot=nt.firstChild)!==null;)rt=nt,nt=ot;for(;;){if(nt===i)break t;if(rt===o&&++et===h&&($=b),rt===g&&++tt===d&&(j=b),(ot=nt.nextSibling)!==null)break;nt=rt,rt=nt.parentNode}nt=ot}o=$===-1||j===-1?null:{start:$,end:j}}else o=null}o=o||{start:0,end:0}}else o=null;for(Df={focusedElem:i,selectionRange:o},dd=!1,V=e;V!==null;)if(e=V,i=e.child,(e.subtreeFlags&1028)!==0&&i!==null)i.return=e,V=i;else for(;V!==null;){e=V;try{var st=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(st!==null){var bt=st.memoizedProps,vt=st.memoizedState,at=e.stateNode,ut=at.getSnapshotBeforeUpdate(e.elementType===e.type?bt:Lg(e.type,bt),vt);at.__reactInternalSnapshotBeforeUpdate=ut}break;case 3:var $t=e.stateNode.containerInfo;$t.nodeType===1?$t.textContent="":$t.nodeType===9&&$t.documentElement&&$t.removeChild($t.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p(163))}}catch(wt){W(e,e.return,wt)}if(i=e.sibling,i!==null){i.return=e.return,V=i;break}V=e.return}return st=Oj,Oj=!1,st}function Qj(i,e,o){var d=e.updateQueue;if(d=d!==null?d.lastEffect:null,d!==null){var h=d=d.next;do{if((h.tag&i)===i){var g=h.destroy;h.destroy=void 0,g!==void 0&&Nj(e,o,g)}h=h.next}while(h!==d)}}function Rj(i,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var o=e=e.next;do{if((o.tag&i)===i){var d=o.create;o.destroy=d()}o=o.next}while(o!==e)}}function Sj(i){var e=i.ref;if(e!==null){var o=i.stateNode;switch(i.tag){case 5:i=o;break;default:i=o}typeof e=="function"?e(i):e.current=i}}function Tj(i){var e=i.alternate;e!==null&&(i.alternate=null,Tj(e)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(e=i.stateNode,e!==null&&(delete e[Of],delete e[Pf],delete e[of],delete e[Qf],delete e[Rf])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function Uj(i){return i.tag===5||i.tag===3||i.tag===4}function Vj(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Uj(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Wj(i,e,o){var d=i.tag;if(d===5||d===6)i=i.stateNode,e?o.nodeType===8?o.parentNode.insertBefore(i,e):o.insertBefore(i,e):(o.nodeType===8?(e=o.parentNode,e.insertBefore(i,o)):(e=o,e.appendChild(i)),o=o._reactRootContainer,o!=null||e.onclick!==null||(e.onclick=Bf));else if(d!==4&&(i=i.child,i!==null))for(Wj(i,e,o),i=i.sibling;i!==null;)Wj(i,e,o),i=i.sibling}function Xj(i,e,o){var d=i.tag;if(d===5||d===6)i=i.stateNode,e?o.insertBefore(i,e):o.appendChild(i);else if(d!==4&&(i=i.child,i!==null))for(Xj(i,e,o),i=i.sibling;i!==null;)Xj(i,e,o),i=i.sibling}var X$2=null,Yj=!1;function Zj(i,e,o){for(o=o.child;o!==null;)ak(i,e,o),o=o.sibling}function ak(i,e,o){if(lc&&typeof lc.onCommitFiberUnmount=="function")try{lc.onCommitFiberUnmount(kc,o)}catch{}switch(o.tag){case 5:U||Mj(o,e);case 6:var d=X$2,h=Yj;X$2=null,Zj(i,e,o),X$2=d,Yj=h,X$2!==null&&(Yj?(i=X$2,o=o.stateNode,i.nodeType===8?i.parentNode.removeChild(o):i.removeChild(o)):X$2.removeChild(o.stateNode));break;case 18:X$2!==null&&(Yj?(i=X$2,o=o.stateNode,i.nodeType===8?Kf(i.parentNode,o):i.nodeType===1&&Kf(i,o),bd(i)):Kf(X$2,o.stateNode));break;case 4:d=X$2,h=Yj,X$2=o.stateNode.containerInfo,Yj=!0,Zj(i,e,o),X$2=d,Yj=h;break;case 0:case 11:case 14:case 15:if(!U&&(d=o.updateQueue,d!==null&&(d=d.lastEffect,d!==null))){h=d=d.next;do{var g=h,b=g.destroy;g=g.tag,b!==void 0&&(g&2||g&4)&&Nj(o,e,b),h=h.next}while(h!==d)}Zj(i,e,o);break;case 1:if(!U&&(Mj(o,e),d=o.stateNode,typeof d.componentWillUnmount=="function"))try{d.props=o.memoizedProps,d.state=o.memoizedState,d.componentWillUnmount()}catch($){W(o,e,$)}Zj(i,e,o);break;case 21:Zj(i,e,o);break;case 22:o.mode&1?(U=(d=U)||o.memoizedState!==null,Zj(i,e,o),U=d):Zj(i,e,o);break;default:Zj(i,e,o)}}function bk(i){var e=i.updateQueue;if(e!==null){i.updateQueue=null;var o=i.stateNode;o===null&&(o=i.stateNode=new Lj),e.forEach(function(d){var h=ck.bind(null,i,d);o.has(d)||(o.add(d),d.then(h,h))})}}function dk(i,e){var o=e.deletions;if(o!==null)for(var d=0;d<o.length;d++){var h=o[d];try{var g=i,b=e,$=b;e:for(;$!==null;){switch($.tag){case 5:X$2=$.stateNode,Yj=!1;break e;case 3:X$2=$.stateNode.containerInfo,Yj=!0;break e;case 4:X$2=$.stateNode.containerInfo,Yj=!0;break e}$=$.return}if(X$2===null)throw Error(p(160));ak(g,b,h),X$2=null,Yj=!1;var j=h.alternate;j!==null&&(j.return=null),h.return=null}catch(et){W(h,e,et)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)ek(e,i),e=e.sibling}function ek(i,e){var o=i.alternate,d=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(dk(e,i),fk(i),d&4){try{Qj(3,i,i.return),Rj(3,i)}catch(bt){W(i,i.return,bt)}try{Qj(5,i,i.return)}catch(bt){W(i,i.return,bt)}}break;case 1:dk(e,i),fk(i),d&512&&o!==null&&Mj(o,o.return);break;case 5:if(dk(e,i),fk(i),d&512&&o!==null&&Mj(o,o.return),i.flags&32){var h=i.stateNode;try{ob(h,"")}catch(bt){W(i,i.return,bt)}}if(d&4&&(h=i.stateNode,h!=null)){var g=i.memoizedProps,b=o!==null?o.memoizedProps:g,$=i.type,j=i.updateQueue;if(i.updateQueue=null,j!==null)try{$==="input"&&g.type==="radio"&&g.name!=null&&ab(h,g),vb($,b);var et=vb($,g);for(b=0;b<j.length;b+=2){var tt=j[b],nt=j[b+1];tt==="style"?sb(h,nt):tt==="dangerouslySetInnerHTML"?nb(h,nt):tt==="children"?ob(h,nt):ta(h,tt,nt,et)}switch($){case"input":bb(h,g);break;case"textarea":ib(h,g);break;case"select":var rt=h._wrapperState.wasMultiple;h._wrapperState.wasMultiple=!!g.multiple;var ot=g.value;ot!=null?fb(h,!!g.multiple,ot,!1):rt!==!!g.multiple&&(g.defaultValue!=null?fb(h,!!g.multiple,g.defaultValue,!0):fb(h,!!g.multiple,g.multiple?[]:"",!1))}h[Pf]=g}catch(bt){W(i,i.return,bt)}}break;case 6:if(dk(e,i),fk(i),d&4){if(i.stateNode===null)throw Error(p(162));h=i.stateNode,g=i.memoizedProps;try{h.nodeValue=g}catch(bt){W(i,i.return,bt)}}break;case 3:if(dk(e,i),fk(i),d&4&&o!==null&&o.memoizedState.isDehydrated)try{bd(e.containerInfo)}catch(bt){W(i,i.return,bt)}break;case 4:dk(e,i),fk(i);break;case 13:dk(e,i),fk(i),h=i.child,h.flags&8192&&(g=h.memoizedState!==null,h.stateNode.isHidden=g,!g||h.alternate!==null&&h.alternate.memoizedState!==null||(gk=B$2())),d&4&&bk(i);break;case 22:if(tt=o!==null&&o.memoizedState!==null,i.mode&1?(U=(et=U)||tt,dk(e,i),U=et):dk(e,i),fk(i),d&8192){if(et=i.memoizedState!==null,(i.stateNode.isHidden=et)&&!tt&&i.mode&1)for(V=i,tt=i.child;tt!==null;){for(nt=V=tt;V!==null;){switch(rt=V,ot=rt.child,rt.tag){case 0:case 11:case 14:case 15:Qj(4,rt,rt.return);break;case 1:Mj(rt,rt.return);var st=rt.stateNode;if(typeof st.componentWillUnmount=="function"){d=rt,o=rt.return;try{e=d,st.props=e.memoizedProps,st.state=e.memoizedState,st.componentWillUnmount()}catch(bt){W(d,o,bt)}}break;case 5:Mj(rt,rt.return);break;case 22:if(rt.memoizedState!==null){hk(nt);continue}}ot!==null?(ot.return=rt,V=ot):hk(nt)}tt=tt.sibling}e:for(tt=null,nt=i;;){if(nt.tag===5){if(tt===null){tt=nt;try{h=nt.stateNode,et?(g=h.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none"):($=nt.stateNode,j=nt.memoizedProps.style,b=j!=null&&j.hasOwnProperty("display")?j.display:null,$.style.display=rb("display",b))}catch(bt){W(i,i.return,bt)}}}else if(nt.tag===6){if(tt===null)try{nt.stateNode.nodeValue=et?"":nt.memoizedProps}catch(bt){W(i,i.return,bt)}}else if((nt.tag!==22&&nt.tag!==23||nt.memoizedState===null||nt===i)&&nt.child!==null){nt.child.return=nt,nt=nt.child;continue}if(nt===i)break e;for(;nt.sibling===null;){if(nt.return===null||nt.return===i)break e;tt===nt&&(tt=null),nt=nt.return}tt===nt&&(tt=null),nt.sibling.return=nt.return,nt=nt.sibling}}break;case 19:dk(e,i),fk(i),d&4&&bk(i);break;case 21:break;default:dk(e,i),fk(i)}}function fk(i){var e=i.flags;if(e&2){try{e:{for(var o=i.return;o!==null;){if(Uj(o)){var d=o;break e}o=o.return}throw Error(p(160))}switch(d.tag){case 5:var h=d.stateNode;d.flags&32&&(ob(h,""),d.flags&=-33);var g=Vj(i);Xj(i,g,h);break;case 3:case 4:var b=d.stateNode.containerInfo,$=Vj(i);Wj(i,$,b);break;default:throw Error(p(161))}}catch(j){W(i,i.return,j)}i.flags&=-3}e&4096&&(i.flags&=-4097)}function ik(i,e,o){V=i,jk(i)}function jk(i,e,o){for(var d=(i.mode&1)!==0;V!==null;){var h=V,g=h.child;if(h.tag===22&&d){var b=h.memoizedState!==null||Kj;if(!b){var $=h.alternate,j=$!==null&&$.memoizedState!==null||U;$=Kj;var et=U;if(Kj=b,(U=j)&&!et)for(V=h;V!==null;)b=V,j=b.child,b.tag===22&&b.memoizedState!==null?kk(h):j!==null?(j.return=b,V=j):kk(h);for(;g!==null;)V=g,jk(g),g=g.sibling;V=h,Kj=$,U=et}lk(i)}else h.subtreeFlags&8772&&g!==null?(g.return=h,V=g):lk(i)}}function lk(i){for(;V!==null;){var e=V;if(e.flags&8772){var o=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:U||Rj(5,e);break;case 1:var d=e.stateNode;if(e.flags&4&&!U)if(o===null)d.componentDidMount();else{var h=e.elementType===e.type?o.memoizedProps:Lg(e.type,o.memoizedProps);d.componentDidUpdate(h,o.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var g=e.updateQueue;g!==null&&ih(e,g,d);break;case 3:var b=e.updateQueue;if(b!==null){if(o=null,e.child!==null)switch(e.child.tag){case 5:o=e.child.stateNode;break;case 1:o=e.child.stateNode}ih(e,b,o)}break;case 5:var $=e.stateNode;if(o===null&&e.flags&4){o=$;var j=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":j.autoFocus&&o.focus();break;case"img":j.src&&(o.src=j.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var et=e.alternate;if(et!==null){var tt=et.memoizedState;if(tt!==null){var nt=tt.dehydrated;nt!==null&&bd(nt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p(163))}U||e.flags&512&&Sj(e)}catch(rt){W(e,e.return,rt)}}if(e===i){V=null;break}if(o=e.sibling,o!==null){o.return=e.return,V=o;break}V=e.return}}function hk(i){for(;V!==null;){var e=V;if(e===i){V=null;break}var o=e.sibling;if(o!==null){o.return=e.return,V=o;break}V=e.return}}function kk(i){for(;V!==null;){var e=V;try{switch(e.tag){case 0:case 11:case 15:var o=e.return;try{Rj(4,e)}catch(j){W(e,o,j)}break;case 1:var d=e.stateNode;if(typeof d.componentDidMount=="function"){var h=e.return;try{d.componentDidMount()}catch(j){W(e,h,j)}}var g=e.return;try{Sj(e)}catch(j){W(e,g,j)}break;case 5:var b=e.return;try{Sj(e)}catch(j){W(e,b,j)}}}catch(j){W(e,e.return,j)}if(e===i){V=null;break}var $=e.sibling;if($!==null){$.return=e.return,V=$;break}V=e.return}}var mk=Math.ceil,nk=ua.ReactCurrentDispatcher,ok=ua.ReactCurrentOwner,pk=ua.ReactCurrentBatchConfig,K$1=0,R$1=null,Y$1=null,Z$1=0,gj=0,fj=Uf(0),T$1=0,qk=null,hh=0,rk=0,sk=0,tk=null,uk=null,gk=0,Hj=1/0,vk=null,Pi=!1,Qi=null,Si$1=null,wk=!1,xk=null,yk=0,zk=0,Ak=null,Bk=-1,Ck=0;function L(){return K$1&6?B$2():Bk!==-1?Bk:Bk=B$2()}function lh(i){return i.mode&1?K$1&2&&Z$1!==0?Z$1&-Z$1:Kg.transition!==null?(Ck===0&&(Ck=yc()),Ck):(i=C$1,i!==0||(i=window.event,i=i===void 0?16:jd(i.type)),i):1}function mh(i,e,o,d){if(50<zk)throw zk=0,Ak=null,Error(p(185));Ac(i,o,d),(!(K$1&2)||i!==R$1)&&(i===R$1&&(!(K$1&2)&&(rk|=o),T$1===4&&Dk(i,Z$1)),Ek(i,d),o===1&&K$1===0&&!(e.mode&1)&&(Hj=B$2()+500,fg&&jg()))}function Ek(i,e){var o=i.callbackNode;wc(i,e);var d=uc(i,i===R$1?Z$1:0);if(d===0)o!==null&&bc(o),i.callbackNode=null,i.callbackPriority=0;else if(e=d&-d,i.callbackPriority!==e){if(o!=null&&bc(o),e===1)i.tag===0?ig(Fk.bind(null,i)):hg(Fk.bind(null,i)),Jf(function(){!(K$1&6)&&jg()}),o=null;else{switch(Dc(d)){case 1:o=fc;break;case 4:o=gc;break;case 16:o=hc;break;case 536870912:o=jc;break;default:o=hc}o=Gk(o,Hk.bind(null,i))}i.callbackPriority=e,i.callbackNode=o}}function Hk(i,e){if(Bk=-1,Ck=0,K$1&6)throw Error(p(327));var o=i.callbackNode;if(Ik()&&i.callbackNode!==o)return null;var d=uc(i,i===R$1?Z$1:0);if(d===0)return null;if(d&30||d&i.expiredLanes||e)e=Jk(i,d);else{e=d;var h=K$1;K$1|=2;var g=Kk();(R$1!==i||Z$1!==e)&&(vk=null,Hj=B$2()+500,Lk(i,e));do try{Mk();break}catch($){Nk(i,$)}while(!0);Qg(),nk.current=g,K$1=h,Y$1!==null?e=0:(R$1=null,Z$1=0,e=T$1)}if(e!==0){if(e===2&&(h=xc(i),h!==0&&(d=h,e=Ok(i,h))),e===1)throw o=qk,Lk(i,0),Dk(i,d),Ek(i,B$2()),o;if(e===6)Dk(i,d);else{if(h=i.current.alternate,!(d&30)&&!Pk(h)&&(e=Jk(i,d),e===2&&(g=xc(i),g!==0&&(d=g,e=Ok(i,g))),e===1))throw o=qk,Lk(i,0),Dk(i,d),Ek(i,B$2()),o;switch(i.finishedWork=h,i.finishedLanes=d,e){case 0:case 1:throw Error(p(345));case 2:Qk(i,uk,vk);break;case 3:if(Dk(i,d),(d&130023424)===d&&(e=gk+500-B$2(),10<e)){if(uc(i,0)!==0)break;if(h=i.suspendedLanes,(h&d)!==d){L(),i.pingedLanes|=i.suspendedLanes&h;break}i.timeoutHandle=Ff(Qk.bind(null,i,uk,vk),e);break}Qk(i,uk,vk);break;case 4:if(Dk(i,d),(d&4194240)===d)break;for(e=i.eventTimes,h=-1;0<d;){var b=31-oc(d);g=1<<b,b=e[b],b>h&&(h=b),d&=~g}if(d=h,d=B$2()-d,d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3e3>d?3e3:4320>d?4320:1960*mk(d/1960))-d,10<d){i.timeoutHandle=Ff(Qk.bind(null,i,uk,vk),d);break}Qk(i,uk,vk);break;case 5:Qk(i,uk,vk);break;default:throw Error(p(329))}}}return Ek(i,B$2()),i.callbackNode===o?Hk.bind(null,i):null}function Ok(i,e){var o=tk;return i.current.memoizedState.isDehydrated&&(Lk(i,e).flags|=256),i=Jk(i,e),i!==2&&(e=uk,uk=o,e!==null&&Gj(e)),i}function Gj(i){uk===null?uk=i:uk.push.apply(uk,i)}function Pk(i){for(var e=i;;){if(e.flags&16384){var o=e.updateQueue;if(o!==null&&(o=o.stores,o!==null))for(var d=0;d<o.length;d++){var h=o[d],g=h.getSnapshot;h=h.value;try{if(!He$1(g(),h))return!1}catch{return!1}}}if(o=e.child,e.subtreeFlags&16384&&o!==null)o.return=e,e=o;else{if(e===i)break;for(;e.sibling===null;){if(e.return===null||e.return===i)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Dk(i,e){for(e&=~sk,e&=~rk,i.suspendedLanes|=e,i.pingedLanes&=~e,i=i.expirationTimes;0<e;){var o=31-oc(e),d=1<<o;i[o]=-1,e&=~d}}function Fk(i){if(K$1&6)throw Error(p(327));Ik();var e=uc(i,0);if(!(e&1))return Ek(i,B$2()),null;var o=Jk(i,e);if(i.tag!==0&&o===2){var d=xc(i);d!==0&&(e=d,o=Ok(i,d))}if(o===1)throw o=qk,Lk(i,0),Dk(i,e),Ek(i,B$2()),o;if(o===6)throw Error(p(345));return i.finishedWork=i.current.alternate,i.finishedLanes=e,Qk(i,uk,vk),Ek(i,B$2()),null}function Rk(i,e){var o=K$1;K$1|=1;try{return i(e)}finally{K$1=o,K$1===0&&(Hj=B$2()+500,fg&&jg())}}function Sk(i){xk!==null&&xk.tag===0&&!(K$1&6)&&Ik();var e=K$1;K$1|=1;var o=pk.transition,d=C$1;try{if(pk.transition=null,C$1=1,i)return i()}finally{C$1=d,pk.transition=o,K$1=e,!(K$1&6)&&jg()}}function Ij(){gj=fj.current,E$1(fj)}function Lk(i,e){i.finishedWork=null,i.finishedLanes=0;var o=i.timeoutHandle;if(o!==-1&&(i.timeoutHandle=-1,Gf(o)),Y$1!==null)for(o=Y$1.return;o!==null;){var d=o;switch(wg(d),d.tag){case 1:d=d.type.childContextTypes,d!=null&&$f();break;case 3:Jh(),E$1(Wf),E$1(H),Oh();break;case 5:Lh(d);break;case 4:Jh();break;case 13:E$1(M$1);break;case 19:E$1(M$1);break;case 10:Rg(d.type._context);break;case 22:case 23:Ij()}o=o.return}if(R$1=i,Y$1=i=wh(i.current,null),Z$1=gj=e,T$1=0,qk=null,sk=rk=hh=0,uk=tk=null,Wg!==null){for(e=0;e<Wg.length;e++)if(o=Wg[e],d=o.interleaved,d!==null){o.interleaved=null;var h=d.next,g=o.pending;if(g!==null){var b=g.next;g.next=h,d.next=b}o.pending=d}Wg=null}return i}function Nk(i,e){do{var o=Y$1;try{if(Qg(),Ph.current=ai,Sh){for(var d=N.memoizedState;d!==null;){var h=d.queue;h!==null&&(h.pending=null),d=d.next}Sh=!1}if(Rh=0,P$1=O$1=N=null,Th=!1,Uh=0,ok.current=null,o===null||o.return===null){T$1=1,qk=e,Y$1=null;break}e:{var g=i,b=o.return,$=o,j=e;if(e=Z$1,$.flags|=32768,j!==null&&typeof j=="object"&&typeof j.then=="function"){var et=j,tt=$,nt=tt.tag;if(!(tt.mode&1)&&(nt===0||nt===11||nt===15)){var rt=tt.alternate;rt?(tt.updateQueue=rt.updateQueue,tt.memoizedState=rt.memoizedState,tt.lanes=rt.lanes):(tt.updateQueue=null,tt.memoizedState=null)}var ot=Vi(b);if(ot!==null){ot.flags&=-257,Wi(ot,b,$,g,e),ot.mode&1&&Ti$1(g,et,e),e=ot,j=et;var st=e.updateQueue;if(st===null){var bt=new Set;bt.add(j),e.updateQueue=bt}else st.add(j);break e}else{if(!(e&1)){Ti$1(g,et,e),uj();break e}j=Error(p(426))}}else if(I&&$.mode&1){var vt=Vi(b);if(vt!==null){!(vt.flags&65536)&&(vt.flags|=256),Wi(vt,b,$,g,e),Jg(Ki(j,$));break e}}g=j=Ki(j,$),T$1!==4&&(T$1=2),tk===null?tk=[g]:tk.push(g),g=b;do{switch(g.tag){case 3:g.flags|=65536,e&=-e,g.lanes|=e;var at=Oi(g,j,e);fh(g,at);break e;case 1:$=j;var ut=g.type,$t=g.stateNode;if(!(g.flags&128)&&(typeof ut.getDerivedStateFromError=="function"||$t!==null&&typeof $t.componentDidCatch=="function"&&(Si$1===null||!Si$1.has($t)))){g.flags|=65536,e&=-e,g.lanes|=e;var wt=Ri$1(g,$,e);fh(g,wt);break e}}g=g.return}while(g!==null)}Tk(o)}catch(At){e=At,Y$1===o&&o!==null&&(Y$1=o=o.return);continue}break}while(!0)}function Kk(){var i=nk.current;return nk.current=ai,i===null?ai:i}function uj(){(T$1===0||T$1===3||T$1===2)&&(T$1=4),R$1===null||!(hh&268435455)&&!(rk&268435455)||Dk(R$1,Z$1)}function Jk(i,e){var o=K$1;K$1|=2;var d=Kk();(R$1!==i||Z$1!==e)&&(vk=null,Lk(i,e));do try{Uk();break}catch(h){Nk(i,h)}while(!0);if(Qg(),K$1=o,nk.current=d,Y$1!==null)throw Error(p(261));return R$1=null,Z$1=0,T$1}function Uk(){for(;Y$1!==null;)Vk(Y$1)}function Mk(){for(;Y$1!==null&&!cc();)Vk(Y$1)}function Vk(i){var e=Wk(i.alternate,i,gj);i.memoizedProps=i.pendingProps,e===null?Tk(i):Y$1=e,ok.current=null}function Tk(i){var e=i;do{var o=e.alternate;if(i=e.return,e.flags&32768){if(o=Jj(o,e),o!==null){o.flags&=32767,Y$1=o;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{T$1=6,Y$1=null;return}}else if(o=Fj(o,e,gj),o!==null){Y$1=o;return}if(e=e.sibling,e!==null){Y$1=e;return}Y$1=e=i}while(e!==null);T$1===0&&(T$1=5)}function Qk(i,e,o){var d=C$1,h=pk.transition;try{pk.transition=null,C$1=1,Xk(i,e,o,d)}finally{pk.transition=h,C$1=d}return null}function Xk(i,e,o,d){do Ik();while(xk!==null);if(K$1&6)throw Error(p(327));o=i.finishedWork;var h=i.finishedLanes;if(o===null)return null;if(i.finishedWork=null,i.finishedLanes=0,o===i.current)throw Error(p(177));i.callbackNode=null,i.callbackPriority=0;var g=o.lanes|o.childLanes;if(Bc(i,g),i===R$1&&(Y$1=R$1=null,Z$1=0),!(o.subtreeFlags&2064)&&!(o.flags&2064)||wk||(wk=!0,Gk(hc,function(){return Ik(),null})),g=(o.flags&15990)!==0,o.subtreeFlags&15990||g){g=pk.transition,pk.transition=null;var b=C$1;C$1=1;var $=K$1;K$1|=4,ok.current=null,Pj(i,o),ek(o,i),Oe(Df),dd=!!Cf,Df=Cf=null,i.current=o,ik(o),dc(),K$1=$,C$1=b,pk.transition=g}else i.current=o;if(wk&&(wk=!1,xk=i,yk=h),g=i.pendingLanes,g===0&&(Si$1=null),mc(o.stateNode),Ek(i,B$2()),e!==null)for(d=i.onRecoverableError,o=0;o<e.length;o++)h=e[o],d(h.value,{componentStack:h.stack,digest:h.digest});if(Pi)throw Pi=!1,i=Qi,Qi=null,i;return yk&1&&i.tag!==0&&Ik(),g=i.pendingLanes,g&1?i===Ak?zk++:(zk=0,Ak=i):zk=0,jg(),null}function Ik(){if(xk!==null){var i=Dc(yk),e=pk.transition,o=C$1;try{if(pk.transition=null,C$1=16>i?16:i,xk===null)var d=!1;else{if(i=xk,xk=null,yk=0,K$1&6)throw Error(p(331));var h=K$1;for(K$1|=4,V=i.current;V!==null;){var g=V,b=g.child;if(V.flags&16){var $=g.deletions;if($!==null){for(var j=0;j<$.length;j++){var et=$[j];for(V=et;V!==null;){var tt=V;switch(tt.tag){case 0:case 11:case 15:Qj(8,tt,g)}var nt=tt.child;if(nt!==null)nt.return=tt,V=nt;else for(;V!==null;){tt=V;var rt=tt.sibling,ot=tt.return;if(Tj(tt),tt===et){V=null;break}if(rt!==null){rt.return=ot,V=rt;break}V=ot}}}var st=g.alternate;if(st!==null){var bt=st.child;if(bt!==null){st.child=null;do{var vt=bt.sibling;bt.sibling=null,bt=vt}while(bt!==null)}}V=g}}if(g.subtreeFlags&2064&&b!==null)b.return=g,V=b;else e:for(;V!==null;){if(g=V,g.flags&2048)switch(g.tag){case 0:case 11:case 15:Qj(9,g,g.return)}var at=g.sibling;if(at!==null){at.return=g.return,V=at;break e}V=g.return}}var ut=i.current;for(V=ut;V!==null;){b=V;var $t=b.child;if(b.subtreeFlags&2064&&$t!==null)$t.return=b,V=$t;else e:for(b=ut;V!==null;){if($=V,$.flags&2048)try{switch($.tag){case 0:case 11:case 15:Rj(9,$)}}catch(At){W($,$.return,At)}if($===b){V=null;break e}var wt=$.sibling;if(wt!==null){wt.return=$.return,V=wt;break e}V=$.return}}if(K$1=h,jg(),lc&&typeof lc.onPostCommitFiberRoot=="function")try{lc.onPostCommitFiberRoot(kc,i)}catch{}d=!0}return d}finally{C$1=o,pk.transition=e}}return!1}function Yk(i,e,o){e=Ki(o,e),e=Oi(i,e,1),i=dh(i,e,1),e=L(),i!==null&&(Ac(i,1,e),Ek(i,e))}function W(i,e,o){if(i.tag===3)Yk(i,i,o);else for(;e!==null;){if(e.tag===3){Yk(e,i,o);break}else if(e.tag===1){var d=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Si$1===null||!Si$1.has(d))){i=Ki(o,i),i=Ri$1(e,i,1),e=dh(e,i,1),i=L(),e!==null&&(Ac(e,1,i),Ek(e,i));break}}e=e.return}}function Ui(i,e,o){var d=i.pingCache;d!==null&&d.delete(e),e=L(),i.pingedLanes|=i.suspendedLanes&o,R$1===i&&(Z$1&o)===o&&(T$1===4||T$1===3&&(Z$1&130023424)===Z$1&&500>B$2()-gk?Lk(i,0):sk|=o),Ek(i,e)}function Zk(i,e){e===0&&(i.mode&1?(e=sc,sc<<=1,!(sc&130023424)&&(sc=4194304)):e=1);var o=L();i=Zg(i,e),i!==null&&(Ac(i,e,o),Ek(i,o))}function vj(i){var e=i.memoizedState,o=0;e!==null&&(o=e.retryLane),Zk(i,o)}function ck(i,e){var o=0;switch(i.tag){case 13:var d=i.stateNode,h=i.memoizedState;h!==null&&(o=h.retryLane);break;case 19:d=i.stateNode;break;default:throw Error(p(314))}d!==null&&d.delete(e),Zk(i,o)}var Wk;Wk=function(i,e,o){if(i!==null)if(i.memoizedProps!==e.pendingProps||Wf.current)Ug=!0;else{if(!(i.lanes&o)&&!(e.flags&128))return Ug=!1,zj(i,e,o);Ug=!!(i.flags&131072)}else Ug=!1,I&&e.flags&1048576&&ug(e,ng,e.index);switch(e.lanes=0,e.tag){case 2:var d=e.type;jj(i,e),i=e.pendingProps;var h=Yf(e,H.current);Tg(e,o),h=Xh(null,e,d,i,h,o);var g=bi$1();return e.flags|=1,typeof h=="object"&&h!==null&&typeof h.render=="function"&&h.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Zf(d)?(g=!0,cg(e)):g=!1,e.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,ah(e),h.updater=nh,e.stateNode=h,h._reactInternals=e,rh(e,d,i,o),e=kj(null,e,d,!0,g,o)):(e.tag=0,I&&g&&vg(e),Yi(null,e,h,o),e=e.child),e;case 16:d=e.elementType;e:{switch(jj(i,e),i=e.pendingProps,h=d._init,d=h(d._payload),e.type=d,h=e.tag=$k(d),i=Lg(d,i),h){case 0:e=dj(null,e,d,i,o);break e;case 1:e=ij(null,e,d,i,o);break e;case 11:e=Zi(null,e,d,i,o);break e;case 14:e=aj(null,e,d,Lg(d.type,i),o);break e}throw Error(p(306,d,""))}return e;case 0:return d=e.type,h=e.pendingProps,h=e.elementType===d?h:Lg(d,h),dj(i,e,d,h,o);case 1:return d=e.type,h=e.pendingProps,h=e.elementType===d?h:Lg(d,h),ij(i,e,d,h,o);case 3:e:{if(lj(e),i===null)throw Error(p(387));d=e.pendingProps,g=e.memoizedState,h=g.element,bh(i,e),gh(e,d,null,o);var b=e.memoizedState;if(d=b.element,g.isDehydrated)if(g={element:d,isDehydrated:!1,cache:b.cache,pendingSuspenseBoundaries:b.pendingSuspenseBoundaries,transitions:b.transitions},e.updateQueue.baseState=g,e.memoizedState=g,e.flags&256){h=Ki(Error(p(423)),e),e=mj(i,e,d,o,h);break e}else if(d!==h){h=Ki(Error(p(424)),e),e=mj(i,e,d,o,h);break e}else for(yg=Lf(e.stateNode.containerInfo.firstChild),xg=e,I=!0,zg=null,o=Ch(e,null,d,o),e.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(Ig(),d===h){e=$i(i,e,o);break e}Yi(i,e,d,o)}e=e.child}return e;case 5:return Kh(e),i===null&&Eg(e),d=e.type,h=e.pendingProps,g=i!==null?i.memoizedProps:null,b=h.children,Ef(d,h)?b=null:g!==null&&Ef(d,g)&&(e.flags|=32),hj(i,e),Yi(i,e,b,o),e.child;case 6:return i===null&&Eg(e),null;case 13:return pj(i,e,o);case 4:return Ih(e,e.stateNode.containerInfo),d=e.pendingProps,i===null?e.child=Bh(e,null,d,o):Yi(i,e,d,o),e.child;case 11:return d=e.type,h=e.pendingProps,h=e.elementType===d?h:Lg(d,h),Zi(i,e,d,h,o);case 7:return Yi(i,e,e.pendingProps,o),e.child;case 8:return Yi(i,e,e.pendingProps.children,o),e.child;case 12:return Yi(i,e,e.pendingProps.children,o),e.child;case 10:e:{if(d=e.type._context,h=e.pendingProps,g=e.memoizedProps,b=h.value,G(Mg,d._currentValue),d._currentValue=b,g!==null)if(He$1(g.value,b)){if(g.children===h.children&&!Wf.current){e=$i(i,e,o);break e}}else for(g=e.child,g!==null&&(g.return=e);g!==null;){var $=g.dependencies;if($!==null){b=g.child;for(var j=$.firstContext;j!==null;){if(j.context===d){if(g.tag===1){j=ch(-1,o&-o),j.tag=2;var et=g.updateQueue;if(et!==null){et=et.shared;var tt=et.pending;tt===null?j.next=j:(j.next=tt.next,tt.next=j),et.pending=j}}g.lanes|=o,j=g.alternate,j!==null&&(j.lanes|=o),Sg(g.return,o,e),$.lanes|=o;break}j=j.next}}else if(g.tag===10)b=g.type===e.type?null:g.child;else if(g.tag===18){if(b=g.return,b===null)throw Error(p(341));b.lanes|=o,$=b.alternate,$!==null&&($.lanes|=o),Sg(b,o,e),b=g.sibling}else b=g.child;if(b!==null)b.return=g;else for(b=g;b!==null;){if(b===e){b=null;break}if(g=b.sibling,g!==null){g.return=b.return,b=g;break}b=b.return}g=b}Yi(i,e,h.children,o),e=e.child}return e;case 9:return h=e.type,d=e.pendingProps.children,Tg(e,o),h=Vg(h),d=d(h),e.flags|=1,Yi(i,e,d,o),e.child;case 14:return d=e.type,h=Lg(d,e.pendingProps),h=Lg(d.type,h),aj(i,e,d,h,o);case 15:return cj(i,e,e.type,e.pendingProps,o);case 17:return d=e.type,h=e.pendingProps,h=e.elementType===d?h:Lg(d,h),jj(i,e),e.tag=1,Zf(d)?(i=!0,cg(e)):i=!1,Tg(e,o),ph(e,d,h),rh(e,d,h,o),kj(null,e,d,!0,i,o);case 19:return yj(i,e,o);case 22:return ej(i,e,o)}throw Error(p(156,e.tag))};function Gk(i,e){return ac(i,e)}function al(i,e,o,d){this.tag=i,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(i,e,o,d){return new al(i,e,o,d)}function bj(i){return i=i.prototype,!(!i||!i.isReactComponent)}function $k(i){if(typeof i=="function")return bj(i)?1:0;if(i!=null){if(i=i.$$typeof,i===Da)return 11;if(i===Ga)return 14}return 2}function wh(i,e){var o=i.alternate;return o===null?(o=Bg(i.tag,e,i.key,i.mode),o.elementType=i.elementType,o.type=i.type,o.stateNode=i.stateNode,o.alternate=i,i.alternate=o):(o.pendingProps=e,o.type=i.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=i.flags&14680064,o.childLanes=i.childLanes,o.lanes=i.lanes,o.child=i.child,o.memoizedProps=i.memoizedProps,o.memoizedState=i.memoizedState,o.updateQueue=i.updateQueue,e=i.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},o.sibling=i.sibling,o.index=i.index,o.ref=i.ref,o}function yh(i,e,o,d,h,g){var b=2;if(d=i,typeof i=="function")bj(i)&&(b=1);else if(typeof i=="string")b=5;else e:switch(i){case ya:return Ah(o.children,h,g,e);case za:b=8,h|=8;break;case Aa:return i=Bg(12,o,e,h|2),i.elementType=Aa,i.lanes=g,i;case Ea:return i=Bg(13,o,e,h),i.elementType=Ea,i.lanes=g,i;case Fa:return i=Bg(19,o,e,h),i.elementType=Fa,i.lanes=g,i;case Ia:return qj(o,h,g,e);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case Ba:b=10;break e;case Ca:b=9;break e;case Da:b=11;break e;case Ga:b=14;break e;case Ha:b=16,d=null;break e}throw Error(p(130,i==null?i:typeof i,""))}return e=Bg(b,o,e,h),e.elementType=i,e.type=d,e.lanes=g,e}function Ah(i,e,o,d){return i=Bg(7,i,d,e),i.lanes=o,i}function qj(i,e,o,d){return i=Bg(22,i,d,e),i.elementType=Ia,i.lanes=o,i.stateNode={isHidden:!1},i}function xh(i,e,o){return i=Bg(6,i,null,e),i.lanes=o,i}function zh(i,e,o){return e=Bg(4,i.children!==null?i.children:[],i.key,e),e.lanes=o,e.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},e}function bl(i,e,o,d,h){this.tag=e,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=d,this.onRecoverableError=h,this.mutableSourceEagerHydrationData=null}function cl(i,e,o,d,h,g,b,$,j){return i=new bl(i,e,o,$,j),e===1?(e=1,g===!0&&(e|=8)):e=0,g=Bg(3,null,null,e),i.current=g,g.stateNode=i,g.memoizedState={element:d,isDehydrated:o,cache:null,transitions:null,pendingSuspenseBoundaries:null},ah(g),i}function dl(i,e,o){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa,key:d==null?null:""+d,children:i,containerInfo:e,implementation:o}}function el(i){if(!i)return Vf;i=i._reactInternals;e:{if(Vb(i)!==i||i.tag!==1)throw Error(p(170));var e=i;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Zf(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(p(171))}if(i.tag===1){var o=i.type;if(Zf(o))return bg(i,o,e)}return e}function fl(i,e,o,d,h,g,b,$,j){return i=cl(o,d,!0,i,h,g,b,$,j),i.context=el(null),o=i.current,d=L(),h=lh(o),g=ch(d,h),g.callback=e??null,dh(o,g,h),i.current.lanes=h,Ac(i,h,d),Ek(i,d),i}function gl(i,e,o,d){var h=e.current,g=L(),b=lh(h);return o=el(o),e.context===null?e.context=o:e.pendingContext=o,e=ch(g,b),e.payload={element:i},d=d===void 0?null:d,d!==null&&(e.callback=d),i=dh(h,e,b),i!==null&&(mh(i,h,b,g),eh(i,h,b)),b}function hl(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function il(i,e){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var o=i.retryLane;i.retryLane=o!==0&&o<e?o:e}}function jl(i,e){il(i,e),(i=i.alternate)&&il(i,e)}function kl(){return null}var ll=typeof reportError=="function"?reportError:function(i){console.error(i)};function ml(i){this._internalRoot=i}nl.prototype.render=ml.prototype.render=function(i){var e=this._internalRoot;if(e===null)throw Error(p(409));gl(i,e,null,null)};nl.prototype.unmount=ml.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var e=i.containerInfo;Sk(function(){gl(null,i,null,null)}),e[uf]=null}};function nl(i){this._internalRoot=i}nl.prototype.unstable_scheduleHydration=function(i){if(i){var e=Hc();i={blockedOn:null,target:i,priority:e};for(var o=0;o<Qc.length&&e!==0&&e<Qc[o].priority;o++);Qc.splice(o,0,i),o===0&&Vc(i)}};function ol(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function pl(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function ql(){}function rl(i,e,o,d,h){if(h){if(typeof d=="function"){var g=d;d=function(){var et=hl(b);g.call(et)}}var b=fl(e,d,i,0,null,!1,!1,"",ql);return i._reactRootContainer=b,i[uf]=b.current,sf(i.nodeType===8?i.parentNode:i),Sk(),b}for(;h=i.lastChild;)i.removeChild(h);if(typeof d=="function"){var $=d;d=function(){var et=hl(j);$.call(et)}}var j=cl(i,0,!1,null,null,!1,!1,"",ql);return i._reactRootContainer=j,i[uf]=j.current,sf(i.nodeType===8?i.parentNode:i),Sk(function(){gl(e,j,o,d)}),j}function sl(i,e,o,d,h){var g=o._reactRootContainer;if(g){var b=g;if(typeof h=="function"){var $=h;h=function(){var j=hl(b);$.call(j)}}gl(e,b,i,h)}else b=rl(o,e,i,h,d);return hl(b)}Ec=function(i){switch(i.tag){case 3:var e=i.stateNode;if(e.current.memoizedState.isDehydrated){var o=tc(e.pendingLanes);o!==0&&(Cc(e,o|1),Ek(e,B$2()),!(K$1&6)&&(Hj=B$2()+500,jg()))}break;case 13:Sk(function(){var d=Zg(i,1);if(d!==null){var h=L();mh(d,i,1,h)}}),jl(i,1)}};Fc=function(i){if(i.tag===13){var e=Zg(i,134217728);if(e!==null){var o=L();mh(e,i,134217728,o)}jl(i,134217728)}};Gc=function(i){if(i.tag===13){var e=lh(i),o=Zg(i,e);if(o!==null){var d=L();mh(o,i,e,d)}jl(i,e)}};Hc=function(){return C$1};Ic=function(i,e){var o=C$1;try{return C$1=i,e()}finally{C$1=o}};yb=function(i,e,o){switch(e){case"input":if(bb(i,o),e=o.name,o.type==="radio"&&e!=null){for(o=i;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<o.length;e++){var d=o[e];if(d!==i&&d.form===i.form){var h=Db(d);if(!h)throw Error(p(90));Wa(d),bb(d,h)}}}break;case"textarea":ib(i,o);break;case"select":e=o.value,e!=null&&fb(i,!!o.multiple,e,!1)}};Gb=Rk;Hb=Sk;var tl={usingClientEntryPoint:!1,Events:[Cb,ue,Db,Eb,Fb,Rk]},ul={findFiberByHostInstance:Wc,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},vl={bundleType:ul.bundleType,version:ul.version,rendererPackageName:ul.rendererPackageName,rendererConfig:ul.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=Zb(i),i===null?null:i.stateNode},findFiberByHostInstance:ul.findFiberByHostInstance||kl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wl.isDisabled&&wl.supportsFiber)try{kc=wl.inject(vl),lc=wl}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl;reactDom_production_min.createPortal=function(i,e){var o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ol(e))throw Error(p(200));return dl(i,e,null,o)};reactDom_production_min.createRoot=function(i,e){if(!ol(i))throw Error(p(299));var o=!1,d="",h=ll;return e!=null&&(e.unstable_strictMode===!0&&(o=!0),e.identifierPrefix!==void 0&&(d=e.identifierPrefix),e.onRecoverableError!==void 0&&(h=e.onRecoverableError)),e=cl(i,1,!1,null,null,o,!1,d,h),i[uf]=e.current,sf(i.nodeType===8?i.parentNode:i),new ml(e)};reactDom_production_min.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var e=i._reactInternals;if(e===void 0)throw typeof i.render=="function"?Error(p(188)):(i=Object.keys(i).join(","),Error(p(268,i)));return i=Zb(e),i=i===null?null:i.stateNode,i};reactDom_production_min.flushSync=function(i){return Sk(i)};reactDom_production_min.hydrate=function(i,e,o){if(!pl(e))throw Error(p(200));return sl(null,i,e,!0,o)};reactDom_production_min.hydrateRoot=function(i,e,o){if(!ol(i))throw Error(p(405));var d=o!=null&&o.hydratedSources||null,h=!1,g="",b=ll;if(o!=null&&(o.unstable_strictMode===!0&&(h=!0),o.identifierPrefix!==void 0&&(g=o.identifierPrefix),o.onRecoverableError!==void 0&&(b=o.onRecoverableError)),e=fl(e,null,i,1,o??null,h,!1,g,b),i[uf]=e.current,sf(i),d)for(i=0;i<d.length;i++)o=d[i],h=o._getVersion,h=h(o._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[o,h]:e.mutableSourceEagerHydrationData.push(o,h);return new nl(e)};reactDom_production_min.render=function(i,e,o){if(!pl(e))throw Error(p(200));return sl(null,i,e,!1,o)};reactDom_production_min.unmountComponentAtNode=function(i){if(!pl(i))throw Error(p(40));return i._reactRootContainer?(Sk(function(){sl(null,null,i,!1,function(){i._reactRootContainer=null,i[uf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Rk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(i,e,o,d){if(!pl(o))throw Error(p(200));if(i==null||i._reactInternals===void 0)throw Error(p(38));return sl(i,e,o,!1,d)};reactDom_production_min.version="18.2.0-next-9e3b772b8-20220608";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(i){console.error(i)}}checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports,m=reactDomExports;client.createRoot=m.createRoot,client.hydrateRoot=m.hydrateRoot;function __awaiter(i,e,o,d){function h(g){return g instanceof o?g:new o(function(b){b(g)})}return new(o||(o=Promise))(function(g,b){function $(tt){try{et(d.next(tt))}catch(nt){b(nt)}}function j(tt){try{et(d.throw(tt))}catch(nt){b(nt)}}function et(tt){tt.done?g(tt.value):h(tt.value).then($,j)}et((d=d.apply(i,e||[])).next())})}function __values(i){var e=typeof Symbol=="function"&&Symbol.iterator,o=e&&i[e],d=0;if(o)return o.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&d>=i.length&&(i=void 0),{value:i&&i[d++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function __await(i){return this instanceof __await?(this.v=i,this):new __await(i)}function __asyncGenerator(i,e,o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var d=o.apply(i,e||[]),h,g=[];return h={},b("next"),b("throw"),b("return"),h[Symbol.asyncIterator]=function(){return this},h;function b(rt){d[rt]&&(h[rt]=function(ot){return new Promise(function(st,bt){g.push([rt,ot,st,bt])>1||$(rt,ot)})})}function $(rt,ot){try{j(d[rt](ot))}catch(st){nt(g[0][3],st)}}function j(rt){rt.value instanceof __await?Promise.resolve(rt.value.v).then(et,tt):nt(g[0][2],rt)}function et(rt){$("next",rt)}function tt(rt){$("throw",rt)}function nt(rt,ot){rt(ot),g.shift(),g.length&&$(g[0][0],g[0][1])}}function __asyncDelegator(i){var e,o;return e={},d("next"),d("throw",function(h){throw h}),d("return"),e[Symbol.iterator]=function(){return this},e;function d(h,g){e[h]=i[h]?function(b){return(o=!o)?{value:__await(i[h](b)),done:!1}:g?g(b):b}:g}}function __asyncValues(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=i[Symbol.asyncIterator],o;return e?e.call(i):(i=typeof __values=="function"?__values(i):i[Symbol.iterator](),o={},d("next"),d("throw"),d("return"),o[Symbol.asyncIterator]=function(){return this},o);function d(g){o[g]=i[g]&&function(b){return new Promise(function($,j){b=i[g](b),h($,j,b.done,b.value)})}}function h(g,b,$,j){Promise.resolve(j).then(function(et){g({value:et,done:$})},b)}}typeof SuppressedError=="function"&&SuppressedError;const decoder$1=new TextDecoder("utf-8"),decodeUtf8$1=i=>decoder$1.decode(i),encoder$1=new TextEncoder,encodeUtf8$1=i=>encoder$1.encode(i),[BigIntCtor,BigIntAvailable]=(()=>{const i=()=>{throw new Error("BigInt is not available in this environment")};function e(){throw i()}return e.asIntN=()=>{throw i()},e.asUintN=()=>{throw i()},typeof BigInt<"u"?[BigInt,!0]:[e,!1]})(),[BigInt64ArrayCtor,BigInt64ArrayAvailable]=(()=>{const i=()=>{throw new Error("BigInt64Array is not available in this environment")};class e{static get BYTES_PER_ELEMENT(){return 8}static of(){throw i()}static from(){throw i()}constructor(){throw i()}}return typeof BigInt64Array<"u"?[BigInt64Array,!0]:[e,!1]})(),[BigUint64ArrayCtor,BigUint64ArrayAvailable]=(()=>{const i=()=>{throw new Error("BigUint64Array is not available in this environment")};class e{static get BYTES_PER_ELEMENT(){return 8}static of(){throw i()}static from(){throw i()}constructor(){throw i()}}return typeof BigUint64Array<"u"?[BigUint64Array,!0]:[e,!1]})(),isNumber$1=i=>typeof i=="number",isBoolean$1=i=>typeof i=="boolean",isFunction$1=i=>typeof i=="function",isObject$3=i=>i!=null&&Object(i)===i,isPromise$1=i=>isObject$3(i)&&isFunction$1(i.then),isIterable$2=i=>isObject$3(i)&&isFunction$1(i[Symbol.iterator]),isAsyncIterable$1=i=>isObject$3(i)&&isFunction$1(i[Symbol.asyncIterator]),isArrowJSON$1=i=>isObject$3(i)&&isObject$3(i.schema),isIteratorResult$1=i=>isObject$3(i)&&"done"in i&&"value"in i,isFileHandle$1=i=>isObject$3(i)&&isFunction$1(i.stat)&&isNumber$1(i.fd),isFetchResponse$1=i=>isObject$3(i)&&isReadableDOMStream$1(i.body),isReadableInterop$1=i=>"_getDOMStream"in i&&"_getNodeStream"in i,isReadableDOMStream$1=i=>isObject$3(i)&&isFunction$1(i.cancel)&&isFunction$1(i.getReader)&&!isReadableInterop$1(i),isReadableNodeStream$1=i=>isObject$3(i)&&isFunction$1(i.read)&&isFunction$1(i.pipe)&&isBoolean$1(i.readable)&&!isReadableInterop$1(i),isFlatbuffersByteBuffer$1=i=>isObject$3(i)&&isFunction$1(i.clear)&&isFunction$1(i.bytes)&&isFunction$1(i.position)&&isFunction$1(i.setPosition)&&isFunction$1(i.capacity)&&isFunction$1(i.getBufferIdentifier)&&isFunction$1(i.createLong),SharedArrayBuf$1=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function collapseContiguousByteRanges$1(i){const e=i[0]?[i[0]]:[];let o,d,h,g;for(let b,$,j=0,et=0,tt=i.length;++j<tt;){if(b=e[et],$=i[j],!b||!$||b.buffer!==$.buffer||$.byteOffset<b.byteOffset){$&&(e[++et]=$);continue}if({byteOffset:o,byteLength:h}=b,{byteOffset:d,byteLength:g}=$,o+h<d||d+g<o){$&&(e[++et]=$);continue}e[et]=new Uint8Array(b.buffer,o,d-o+g)}return e}function memcpy$1(i,e,o=0,d=e.byteLength){const h=i.byteLength,g=new Uint8Array(i.buffer,i.byteOffset,h),b=new Uint8Array(e.buffer,e.byteOffset,Math.min(d,h));return g.set(b,o),i}function joinUint8Arrays$1(i,e){const o=collapseContiguousByteRanges$1(i),d=o.reduce((tt,nt)=>tt+nt.byteLength,0);let h,g,b,$=0,j=-1;const et=Math.min(e||Number.POSITIVE_INFINITY,d);for(const tt=o.length;++j<tt;){if(h=o[j],g=h.subarray(0,Math.min(h.length,et-$)),et<=$+g.length){g.length<h.length?o[j]=h.subarray(g.length):g.length===h.length&&j++,b?memcpy$1(b,g,$):b=g;break}memcpy$1(b||(b=new Uint8Array(et)),g,$),$+=g.length}return[b||new Uint8Array(0),o.slice(j),d-(b?b.byteLength:0)]}function toArrayBufferView$1(i,e){let o=isIteratorResult$1(e)?e.value:e;return o instanceof i?i===Uint8Array?new i(o.buffer,o.byteOffset,o.byteLength):o:o?(typeof o=="string"&&(o=encodeUtf8$1(o)),o instanceof ArrayBuffer?new i(o):o instanceof SharedArrayBuf$1?new i(o):isFlatbuffersByteBuffer$1(o)?toArrayBufferView$1(i,o.bytes()):ArrayBuffer.isView(o)?o.byteLength<=0?new i(0):new i(o.buffer,o.byteOffset,o.byteLength/i.BYTES_PER_ELEMENT):i.from(o)):new i(0)}const toInt32Array$1=i=>toArrayBufferView$1(Int32Array,i),toUint8Array$1=i=>toArrayBufferView$1(Uint8Array,i),pump$3=i=>(i.next(),i);function*toArrayBufferViewIterator$1(i,e){const o=function*(h){yield h},d=typeof e=="string"||ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof SharedArrayBuf$1?o(e):isIterable$2(e)?e:o(e);return yield*pump$3(function*(h){let g=null;do g=h.next(yield toArrayBufferView$1(i,g));while(!g.done)}(d[Symbol.iterator]())),new i}const toUint8ArrayIterator$1=i=>toArrayBufferViewIterator$1(Uint8Array,i);function toArrayBufferViewAsyncIterator$1(i,e){return __asyncGenerator(this,arguments,function*(){if(isPromise$1(e))return yield __await(yield __await(yield*__asyncDelegator(__asyncValues(toArrayBufferViewAsyncIterator$1(i,yield __await(e))))));const d=function(b){return __asyncGenerator(this,arguments,function*(){yield yield __await(yield __await(b))})},h=function(b){return __asyncGenerator(this,arguments,function*(){yield __await(yield*__asyncDelegator(__asyncValues(pump$3(function*($){let j=null;do j=$.next(yield j==null?void 0:j.value);while(!j.done)}(b[Symbol.iterator]())))))})},g=typeof e=="string"||ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof SharedArrayBuf$1?d(e):isIterable$2(e)?h(e):isAsyncIterable$1(e)?e:d(e);return yield __await(yield*__asyncDelegator(__asyncValues(pump$3(function(b){return __asyncGenerator(this,arguments,function*(){let $=null;do $=yield __await(b.next(yield yield __await(toArrayBufferView$1(i,$))));while(!$.done)})}(g[Symbol.asyncIterator]()))))),yield __await(new i)})}const toUint8ArrayAsyncIterator$1=i=>toArrayBufferViewAsyncIterator$1(Uint8Array,i);function compareArrayLike$1(i,e){let o=0;const d=i.length;if(d!==e.length)return!1;if(d>0)do if(i[o]!==e[o])return!1;while(++o<d);return!0}const streamAdapters$1={fromIterable(i){return pump$2(fromIterable$1(i))},fromAsyncIterable(i){return pump$2(fromAsyncIterable$1(i))},fromDOMStream(i){return pump$2(fromDOMStream$1(i))},fromNodeStream(i){return pump$2(fromNodeStream$1(i))},toDOMStream(i,e){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(i,e){throw new Error('"toNodeStream" not available in this environment')}},pump$2=i=>(i.next(),i);function*fromIterable$1(i){let e,o=!1,d=[],h,g,b,$=0;function j(){return g==="peek"?joinUint8Arrays$1(d,b)[0]:([h,d,$]=joinUint8Arrays$1(d,b),h)}({cmd:g,size:b}=yield null);const et=toUint8ArrayIterator$1(i)[Symbol.iterator]();try{do if({done:e,value:h}=Number.isNaN(b-$)?et.next():et.next(b-$),!e&&h.byteLength>0&&(d.push(h),$+=h.byteLength),e||b<=$)do({cmd:g,size:b}=yield j());while(b<$);while(!e)}catch(tt){(o=!0)&&typeof et.throw=="function"&&et.throw(tt)}finally{o===!1&&typeof et.return=="function"&&et.return(null)}return null}function fromAsyncIterable$1(i){return __asyncGenerator(this,arguments,function*(){let o,d=!1,h=[],g,b,$,j=0;function et(){return b==="peek"?joinUint8Arrays$1(h,$)[0]:([g,h,j]=joinUint8Arrays$1(h,$),g)}({cmd:b,size:$}=yield yield __await(null));const tt=toUint8ArrayAsyncIterator$1(i)[Symbol.asyncIterator]();try{do if({done:o,value:g}=Number.isNaN($-j)?yield __await(tt.next()):yield __await(tt.next($-j)),!o&&g.byteLength>0&&(h.push(g),j+=g.byteLength),o||$<=j)do({cmd:b,size:$}=yield yield __await(et()));while($<j);while(!o)}catch(nt){(d=!0)&&typeof tt.throw=="function"&&(yield __await(tt.throw(nt)))}finally{d===!1&&typeof tt.return=="function"&&(yield __await(tt.return(new Uint8Array(0))))}return yield __await(null)})}function fromDOMStream$1(i){return __asyncGenerator(this,arguments,function*(){let o=!1,d=!1,h=[],g,b,$,j=0;function et(){return b==="peek"?joinUint8Arrays$1(h,$)[0]:([g,h,j]=joinUint8Arrays$1(h,$),g)}({cmd:b,size:$}=yield yield __await(null));const tt=new AdaptiveByteReader$1(i);try{do if({done:o,value:g}=Number.isNaN($-j)?yield __await(tt.read()):yield __await(tt.read($-j)),!o&&g.byteLength>0&&(h.push(toUint8Array$1(g)),j+=g.byteLength),o||$<=j)do({cmd:b,size:$}=yield yield __await(et()));while($<j);while(!o)}catch(nt){(d=!0)&&(yield __await(tt.cancel(nt)))}finally{d===!1?yield __await(tt.cancel()):i.locked&&tt.releaseLock()}return yield __await(null)})}let AdaptiveByteReader$1=class{constructor(e){this.source=e,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(e){return __awaiter(this,void 0,void 0,function*(){const{reader:o,source:d}=this;o&&(yield o.cancel(e).catch(()=>{})),d&&d.locked&&this.releaseLock()})}read(e){return __awaiter(this,void 0,void 0,function*(){if(e===0)return{done:this.reader==null,value:new Uint8Array(0)};const o=yield this.reader.read();return!o.done&&(o.value=toUint8Array$1(o)),o})}};const onEvent$1=(i,e)=>{const o=h=>d([e,h]);let d;return[e,o,new Promise(h=>(d=h)&&i.once(e,o))]};function fromNodeStream$1(i){return __asyncGenerator(this,arguments,function*(){const o=[];let d="error",h=!1,g=null,b,$,j=0,et=[],tt;function nt(){return b==="peek"?joinUint8Arrays$1(et,$)[0]:([tt,et,j]=joinUint8Arrays$1(et,$),tt)}if({cmd:b,size:$}=yield yield __await(null),i.isTTY)return yield yield __await(new Uint8Array(0)),yield __await(null);try{o[0]=onEvent$1(i,"end"),o[1]=onEvent$1(i,"error");do{if(o[2]=onEvent$1(i,"readable"),[d,g]=yield __await(Promise.race(o.map(ot=>ot[2]))),d==="error")break;if((h=d==="end")||(Number.isFinite($-j)?(tt=toUint8Array$1(i.read($-j)),tt.byteLength<$-j&&(tt=toUint8Array$1(i.read()))):tt=toUint8Array$1(i.read()),tt.byteLength>0&&(et.push(tt),j+=tt.byteLength)),h||$<=j)do({cmd:b,size:$}=yield yield __await(nt()));while($<j)}while(!h)}finally{yield __await(rt(o,d==="error"?g:null))}return yield __await(null);function rt(ot,st){return tt=et=null,new Promise((bt,vt)=>{for(const[at,ut]of ot)i.off(at,ut);try{const at=i.destroy;at&&at.call(i,st),st=void 0}catch(at){st=at||st}finally{st!=null?vt(st):bt()}})}})}var MetadataVersion$3;(function(i){i[i.V1=0]="V1",i[i.V2=1]="V2",i[i.V3=2]="V3",i[i.V4=3]="V4",i[i.V5=4]="V5"})(MetadataVersion$3||(MetadataVersion$3={}));var UnionMode$3;(function(i){i[i.Sparse=0]="Sparse",i[i.Dense=1]="Dense"})(UnionMode$3||(UnionMode$3={}));var Precision$3;(function(i){i[i.HALF=0]="HALF",i[i.SINGLE=1]="SINGLE",i[i.DOUBLE=2]="DOUBLE"})(Precision$3||(Precision$3={}));var DateUnit$3;(function(i){i[i.DAY=0]="DAY",i[i.MILLISECOND=1]="MILLISECOND"})(DateUnit$3||(DateUnit$3={}));var TimeUnit$3;(function(i){i[i.SECOND=0]="SECOND",i[i.MILLISECOND=1]="MILLISECOND",i[i.MICROSECOND=2]="MICROSECOND",i[i.NANOSECOND=3]="NANOSECOND"})(TimeUnit$3||(TimeUnit$3={}));var IntervalUnit$3;(function(i){i[i.YEAR_MONTH=0]="YEAR_MONTH",i[i.DAY_TIME=1]="DAY_TIME",i[i.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(IntervalUnit$3||(IntervalUnit$3={}));var MessageHeader$3;(function(i){i[i.NONE=0]="NONE",i[i.Schema=1]="Schema",i[i.DictionaryBatch=2]="DictionaryBatch",i[i.RecordBatch=3]="RecordBatch",i[i.Tensor=4]="Tensor",i[i.SparseTensor=5]="SparseTensor"})(MessageHeader$3||(MessageHeader$3={}));var Type$3;(function(i){i[i.NONE=0]="NONE",i[i.Null=1]="Null",i[i.Int=2]="Int",i[i.Float=3]="Float",i[i.Binary=4]="Binary",i[i.Utf8=5]="Utf8",i[i.Bool=6]="Bool",i[i.Decimal=7]="Decimal",i[i.Date=8]="Date",i[i.Time=9]="Time",i[i.Timestamp=10]="Timestamp",i[i.Interval=11]="Interval",i[i.List=12]="List",i[i.Struct=13]="Struct",i[i.Union=14]="Union",i[i.FixedSizeBinary=15]="FixedSizeBinary",i[i.FixedSizeList=16]="FixedSizeList",i[i.Map=17]="Map",i[i.Dictionary=-1]="Dictionary",i[i.Int8=-2]="Int8",i[i.Int16=-3]="Int16",i[i.Int32=-4]="Int32",i[i.Int64=-5]="Int64",i[i.Uint8=-6]="Uint8",i[i.Uint16=-7]="Uint16",i[i.Uint32=-8]="Uint32",i[i.Uint64=-9]="Uint64",i[i.Float16=-10]="Float16",i[i.Float32=-11]="Float32",i[i.Float64=-12]="Float64",i[i.DateDay=-13]="DateDay",i[i.DateMillisecond=-14]="DateMillisecond",i[i.TimestampSecond=-15]="TimestampSecond",i[i.TimestampMillisecond=-16]="TimestampMillisecond",i[i.TimestampMicrosecond=-17]="TimestampMicrosecond",i[i.TimestampNanosecond=-18]="TimestampNanosecond",i[i.TimeSecond=-19]="TimeSecond",i[i.TimeMillisecond=-20]="TimeMillisecond",i[i.TimeMicrosecond=-21]="TimeMicrosecond",i[i.TimeNanosecond=-22]="TimeNanosecond",i[i.DenseUnion=-23]="DenseUnion",i[i.SparseUnion=-24]="SparseUnion",i[i.IntervalDayTime=-25]="IntervalDayTime",i[i.IntervalYearMonth=-26]="IntervalYearMonth"})(Type$3||(Type$3={}));var BufferType$1;(function(i){i[i.OFFSET=0]="OFFSET",i[i.DATA=1]="DATA",i[i.VALIDITY=2]="VALIDITY",i[i.TYPE=3]="TYPE"})(BufferType$1||(BufferType$1={}));const undf$1=void 0;function valueToString$1(i){if(i===null)return"null";if(i===undf$1)return"undefined";switch(typeof i){case"number":return`${i}`;case"bigint":return`${i}`;case"string":return`"${i}"`}return typeof i[Symbol.toPrimitive]=="function"?i[Symbol.toPrimitive]("string"):ArrayBuffer.isView(i)?i instanceof BigInt64ArrayCtor||i instanceof BigUint64ArrayCtor?`[${[...i].map(e=>valueToString$1(e))}]`:`[${i}]`:ArrayBuffer.isView(i)?`[${i}]`:JSON.stringify(i,(e,o)=>typeof o=="bigint"?`${o}`:o)}const isArrowBigNumSymbol$1=Symbol.for("isArrowBigNum");function BigNum$1(i,...e){return e.length===0?Object.setPrototypeOf(toArrayBufferView$1(this.TypedArray,i),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(i,...e),this.constructor.prototype)}BigNum$1.prototype[isArrowBigNumSymbol$1]=!0;BigNum$1.prototype.toJSON=function(){return`"${bignumToString(this)}"`};BigNum$1.prototype.valueOf=function(){return bignumToNumber(this)};BigNum$1.prototype.toString=function(){return bignumToString(this)};BigNum$1.prototype[Symbol.toPrimitive]=function(i="default"){switch(i){case"number":return bignumToNumber(this);case"string":return bignumToString(this);case"default":return bignumToBigInt(this)}return bignumToString(this)};function SignedBigNum$1(...i){return BigNum$1.apply(this,i)}function UnsignedBigNum$1(...i){return BigNum$1.apply(this,i)}function DecimalBigNum$1(...i){return BigNum$1.apply(this,i)}Object.setPrototypeOf(SignedBigNum$1.prototype,Object.create(Int32Array.prototype));Object.setPrototypeOf(UnsignedBigNum$1.prototype,Object.create(Uint32Array.prototype));Object.setPrototypeOf(DecimalBigNum$1.prototype,Object.create(Uint32Array.prototype));Object.assign(SignedBigNum$1.prototype,BigNum$1.prototype,{constructor:SignedBigNum$1,signed:!0,TypedArray:Int32Array,BigIntArray:BigInt64ArrayCtor});Object.assign(UnsignedBigNum$1.prototype,BigNum$1.prototype,{constructor:UnsignedBigNum$1,signed:!1,TypedArray:Uint32Array,BigIntArray:BigUint64ArrayCtor});Object.assign(DecimalBigNum$1.prototype,BigNum$1.prototype,{constructor:DecimalBigNum$1,signed:!0,TypedArray:Uint32Array,BigIntArray:BigUint64ArrayCtor});function bignumToNumber(i){const{buffer:e,byteOffset:o,length:d,signed:h}=i,g=new BigUint64ArrayCtor(e,o,d),b=h&&g[g.length-1]&BigInt(1)<<BigInt(63);let $=BigInt(b?1:0),j=BigInt(0);if(b){for(const et of g)$+=~et*(BigInt(1)<<BigInt(32)*j++);$*=BigInt(-1)}else for(const et of g)$+=et*(BigInt(1)<<BigInt(32)*j++);return $}let bignumToString,bignumToBigInt;BigIntAvailable?(bignumToBigInt=i=>i.byteLength===8?new i.BigIntArray(i.buffer,i.byteOffset,1)[0]:decimalToString(i),bignumToString=i=>i.byteLength===8?`${new i.BigIntArray(i.buffer,i.byteOffset,1)[0]}`:decimalToString(i)):(bignumToString=decimalToString,bignumToBigInt=bignumToString);function decimalToString(i){let e="";const o=new Uint32Array(2);let d=new Uint16Array(i.buffer,i.byteOffset,i.byteLength/2);const h=new Uint32Array((d=new Uint16Array(d).reverse()).buffer);let g=-1;const b=d.length-1;do{for(o[0]=d[g=0];g<b;)d[g++]=o[1]=o[0]/10,o[0]=(o[0]-o[1]*10<<16)+d[g];d[g]=o[1]=o[0]/10,o[0]=o[0]-o[1]*10,e=`${o[0]}${e}`}while(h[0]||h[1]||h[2]||h[3]);return e??"0"}let BN$1=class Fu{static new(e,o){switch(o){case!0:return new SignedBigNum$1(e);case!1:return new UnsignedBigNum$1(e)}switch(e.constructor){case Int8Array:case Int16Array:case Int32Array:case BigInt64ArrayCtor:return new SignedBigNum$1(e)}return e.byteLength===16?new DecimalBigNum$1(e):new UnsignedBigNum$1(e)}static signed(e){return new SignedBigNum$1(e)}static unsigned(e){return new UnsignedBigNum$1(e)}static decimal(e){return new DecimalBigNum$1(e)}constructor(e,o){return Fu.new(e,o)}};var _a$7,_b$1,_c$1,_d$1,_e$2,_f$1,_g$1,_h$1,_j$1,_k$1,_l$1,_m$1,_o$1,_p$1,_q$1,_r$2,_s$2,_t$2,_u$1;let DataType$1=class Yl{static isNull(e){return(e==null?void 0:e.typeId)===Type$3.Null}static isInt(e){return(e==null?void 0:e.typeId)===Type$3.Int}static isFloat(e){return(e==null?void 0:e.typeId)===Type$3.Float}static isBinary(e){return(e==null?void 0:e.typeId)===Type$3.Binary}static isUtf8(e){return(e==null?void 0:e.typeId)===Type$3.Utf8}static isBool(e){return(e==null?void 0:e.typeId)===Type$3.Bool}static isDecimal(e){return(e==null?void 0:e.typeId)===Type$3.Decimal}static isDate(e){return(e==null?void 0:e.typeId)===Type$3.Date}static isTime(e){return(e==null?void 0:e.typeId)===Type$3.Time}static isTimestamp(e){return(e==null?void 0:e.typeId)===Type$3.Timestamp}static isInterval(e){return(e==null?void 0:e.typeId)===Type$3.Interval}static isList(e){return(e==null?void 0:e.typeId)===Type$3.List}static isStruct(e){return(e==null?void 0:e.typeId)===Type$3.Struct}static isUnion(e){return(e==null?void 0:e.typeId)===Type$3.Union}static isFixedSizeBinary(e){return(e==null?void 0:e.typeId)===Type$3.FixedSizeBinary}static isFixedSizeList(e){return(e==null?void 0:e.typeId)===Type$3.FixedSizeList}static isMap(e){return(e==null?void 0:e.typeId)===Type$3.Map}static isDictionary(e){return(e==null?void 0:e.typeId)===Type$3.Dictionary}static isDenseUnion(e){return Yl.isUnion(e)&&e.mode===UnionMode$3.Dense}static isSparseUnion(e){return Yl.isUnion(e)&&e.mode===UnionMode$3.Sparse}get typeId(){return Type$3.NONE}};_a$7=Symbol.toStringTag;DataType$1[_a$7]=(i=>(i.children=null,i.ArrayType=Array,i[Symbol.toStringTag]="DataType"))(DataType$1.prototype);let Null$3=class extends DataType$1{toString(){return"Null"}get typeId(){return Type$3.Null}};_b$1=Symbol.toStringTag;Null$3[_b$1]=(i=>i[Symbol.toStringTag]="Null")(Null$3.prototype);let Int_$1=class extends DataType$1{constructor(e,o){super(),this.isSigned=e,this.bitWidth=o}get typeId(){return Type$3.Int}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?BigInt64ArrayCtor:BigUint64ArrayCtor}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}};_c$1=Symbol.toStringTag;Int_$1[_c$1]=(i=>(i.isSigned=null,i.bitWidth=null,i[Symbol.toStringTag]="Int"))(Int_$1.prototype);let Int32$1=class extends Int_$1{constructor(){super(!0,32)}get ArrayType(){return Int32Array}};Object.defineProperty(Int32$1.prototype,"ArrayType",{value:Int32Array});let Float$1=class extends DataType$1{constructor(e){super(),this.precision=e}get typeId(){return Type$3.Float}get ArrayType(){switch(this.precision){case Precision$3.HALF:return Uint16Array;case Precision$3.SINGLE:return Float32Array;case Precision$3.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}};_d$1=Symbol.toStringTag;Float$1[_d$1]=(i=>(i.precision=null,i[Symbol.toStringTag]="Float"))(Float$1.prototype);let Binary$3=class extends DataType$1{constructor(){super()}get typeId(){return Type$3.Binary}toString(){return"Binary"}};_e$2=Symbol.toStringTag;Binary$3[_e$2]=(i=>(i.ArrayType=Uint8Array,i[Symbol.toStringTag]="Binary"))(Binary$3.prototype);let Utf8$3=class extends DataType$1{constructor(){super()}get typeId(){return Type$3.Utf8}toString(){return"Utf8"}};_f$1=Symbol.toStringTag;Utf8$3[_f$1]=(i=>(i.ArrayType=Uint8Array,i[Symbol.toStringTag]="Utf8"))(Utf8$3.prototype);let Bool$3=class extends DataType$1{constructor(){super()}get typeId(){return Type$3.Bool}toString(){return"Bool"}};_g$1=Symbol.toStringTag;Bool$3[_g$1]=(i=>(i.ArrayType=Uint8Array,i[Symbol.toStringTag]="Bool"))(Bool$3.prototype);let Decimal$3=class extends DataType$1{constructor(e,o,d=128){super(),this.scale=e,this.precision=o,this.bitWidth=d}get typeId(){return Type$3.Decimal}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}};_h$1=Symbol.toStringTag;Decimal$3[_h$1]=(i=>(i.scale=null,i.precision=null,i.ArrayType=Uint32Array,i[Symbol.toStringTag]="Decimal"))(Decimal$3.prototype);let Date_$1=class extends DataType$1{constructor(e){super(),this.unit=e}get typeId(){return Type$3.Date}toString(){return`Date${(this.unit+1)*32}<${DateUnit$3[this.unit]}>`}};_j$1=Symbol.toStringTag;Date_$1[_j$1]=(i=>(i.unit=null,i.ArrayType=Int32Array,i[Symbol.toStringTag]="Date"))(Date_$1.prototype);let Time_$1=class extends DataType$1{constructor(e,o){super(),this.unit=e,this.bitWidth=o}get typeId(){return Type$3.Time}toString(){return`Time${this.bitWidth}<${TimeUnit$3[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return BigInt64ArrayCtor}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}};_k$1=Symbol.toStringTag;Time_$1[_k$1]=(i=>(i.unit=null,i.bitWidth=null,i[Symbol.toStringTag]="Time"))(Time_$1.prototype);let Timestamp_$1=class extends DataType$1{constructor(e,o){super(),this.unit=e,this.timezone=o}get typeId(){return Type$3.Timestamp}toString(){return`Timestamp<${TimeUnit$3[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}};_l$1=Symbol.toStringTag;Timestamp_$1[_l$1]=(i=>(i.unit=null,i.timezone=null,i.ArrayType=Int32Array,i[Symbol.toStringTag]="Timestamp"))(Timestamp_$1.prototype);let Interval_$1=class extends DataType$1{constructor(e){super(),this.unit=e}get typeId(){return Type$3.Interval}toString(){return`Interval<${IntervalUnit$3[this.unit]}>`}};_m$1=Symbol.toStringTag;Interval_$1[_m$1]=(i=>(i.unit=null,i.ArrayType=Int32Array,i[Symbol.toStringTag]="Interval"))(Interval_$1.prototype);let List$3=class extends DataType$1{constructor(e){super(),this.children=[e]}get typeId(){return Type$3.List}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}};_o$1=Symbol.toStringTag;List$3[_o$1]=(i=>(i.children=null,i[Symbol.toStringTag]="List"))(List$3.prototype);let Struct$1=class extends DataType$1{constructor(e){super(),this.children=e}get typeId(){return Type$3.Struct}toString(){return`Struct<{${this.children.map(e=>`${e.name}:${e.type}`).join(", ")}}>`}};_p$1=Symbol.toStringTag;Struct$1[_p$1]=(i=>(i.children=null,i[Symbol.toStringTag]="Struct"))(Struct$1.prototype);let Union_$1=class extends DataType$1{constructor(e,o,d){super(),this.mode=e,this.children=d,this.typeIds=o=Int32Array.from(o),this.typeIdToChildIndex=o.reduce((h,g,b)=>(h[g]=b)&&h||h,Object.create(null))}get typeId(){return Type$3.Union}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(e=>`${e.type}`).join(" | ")}>`}};_q$1=Symbol.toStringTag;Union_$1[_q$1]=(i=>(i.mode=null,i.typeIds=null,i.children=null,i.typeIdToChildIndex=null,i.ArrayType=Int8Array,i[Symbol.toStringTag]="Union"))(Union_$1.prototype);let FixedSizeBinary$3=class extends DataType$1{constructor(e){super(),this.byteWidth=e}get typeId(){return Type$3.FixedSizeBinary}toString(){return`FixedSizeBinary[${this.byteWidth}]`}};_r$2=Symbol.toStringTag;FixedSizeBinary$3[_r$2]=(i=>(i.byteWidth=null,i.ArrayType=Uint8Array,i[Symbol.toStringTag]="FixedSizeBinary"))(FixedSizeBinary$3.prototype);let FixedSizeList$3=class extends DataType$1{constructor(e,o){super(),this.listSize=e,this.children=[o]}get typeId(){return Type$3.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}};_s$2=Symbol.toStringTag;FixedSizeList$3[_s$2]=(i=>(i.children=null,i.listSize=null,i[Symbol.toStringTag]="FixedSizeList"))(FixedSizeList$3.prototype);let Map_$1=class extends DataType$1{constructor(e,o=!1){super(),this.children=[e],this.keysSorted=o}get typeId(){return Type$3.Map}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(e=>`${e.name}:${e.type}`).join(", ")}}>`}};_t$2=Symbol.toStringTag;Map_$1[_t$2]=(i=>(i.children=null,i.keysSorted=null,i[Symbol.toStringTag]="Map_"))(Map_$1.prototype);const getId$1=(i=>()=>++i)(-1);let Dictionary$1=class extends DataType$1{constructor(e,o,d,h){super(),this.indices=o,this.dictionary=e,this.isOrdered=h||!1,this.id=d==null?getId$1():typeof d=="number"?d:d.low}get typeId(){return Type$3.Dictionary}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}};_u$1=Symbol.toStringTag;Dictionary$1[_u$1]=(i=>(i.id=null,i.indices=null,i.isOrdered=null,i.dictionary=null,i[Symbol.toStringTag]="Dictionary"))(Dictionary$1.prototype);function strideForType$1(i){const e=i;switch(i.typeId){case Type$3.Decimal:return i.bitWidth/32;case Type$3.Timestamp:return 2;case Type$3.Date:return 1+e.unit;case Type$3.Interval:return 1+e.unit;case Type$3.FixedSizeList:return e.listSize;case Type$3.FixedSizeBinary:return e.byteWidth;default:return 1}}let Visitor$1=class{visitMany(e,...o){return e.map((d,h)=>this.visit(d,...o.map(g=>g[h])))}visit(...e){return this.getVisitFn(e[0],!1).apply(this,e)}getVisitFn(e,o=!0){return getVisitFn$1(this,e,o)}getVisitFnByTypeId(e,o=!0){return getVisitFnByTypeId$1(this,e,o)}visitNull(e,...o){return null}visitBool(e,...o){return null}visitInt(e,...o){return null}visitFloat(e,...o){return null}visitUtf8(e,...o){return null}visitBinary(e,...o){return null}visitFixedSizeBinary(e,...o){return null}visitDate(e,...o){return null}visitTimestamp(e,...o){return null}visitTime(e,...o){return null}visitDecimal(e,...o){return null}visitList(e,...o){return null}visitStruct(e,...o){return null}visitUnion(e,...o){return null}visitDictionary(e,...o){return null}visitInterval(e,...o){return null}visitFixedSizeList(e,...o){return null}visitMap(e,...o){return null}};function getVisitFn$1(i,e,o=!0){return typeof e=="number"?getVisitFnByTypeId$1(i,e,o):typeof e=="string"&&e in Type$3?getVisitFnByTypeId$1(i,Type$3[e],o):e&&e instanceof DataType$1?getVisitFnByTypeId$1(i,inferDType$1(e),o):e!=null&&e.type&&e.type instanceof DataType$1?getVisitFnByTypeId$1(i,inferDType$1(e.type),o):getVisitFnByTypeId$1(i,Type$3.NONE,o)}function getVisitFnByTypeId$1(i,e,o=!0){let d=null;switch(e){case Type$3.Null:d=i.visitNull;break;case Type$3.Bool:d=i.visitBool;break;case Type$3.Int:d=i.visitInt;break;case Type$3.Int8:d=i.visitInt8||i.visitInt;break;case Type$3.Int16:d=i.visitInt16||i.visitInt;break;case Type$3.Int32:d=i.visitInt32||i.visitInt;break;case Type$3.Int64:d=i.visitInt64||i.visitInt;break;case Type$3.Uint8:d=i.visitUint8||i.visitInt;break;case Type$3.Uint16:d=i.visitUint16||i.visitInt;break;case Type$3.Uint32:d=i.visitUint32||i.visitInt;break;case Type$3.Uint64:d=i.visitUint64||i.visitInt;break;case Type$3.Float:d=i.visitFloat;break;case Type$3.Float16:d=i.visitFloat16||i.visitFloat;break;case Type$3.Float32:d=i.visitFloat32||i.visitFloat;break;case Type$3.Float64:d=i.visitFloat64||i.visitFloat;break;case Type$3.Utf8:d=i.visitUtf8;break;case Type$3.Binary:d=i.visitBinary;break;case Type$3.FixedSizeBinary:d=i.visitFixedSizeBinary;break;case Type$3.Date:d=i.visitDate;break;case Type$3.DateDay:d=i.visitDateDay||i.visitDate;break;case Type$3.DateMillisecond:d=i.visitDateMillisecond||i.visitDate;break;case Type$3.Timestamp:d=i.visitTimestamp;break;case Type$3.TimestampSecond:d=i.visitTimestampSecond||i.visitTimestamp;break;case Type$3.TimestampMillisecond:d=i.visitTimestampMillisecond||i.visitTimestamp;break;case Type$3.TimestampMicrosecond:d=i.visitTimestampMicrosecond||i.visitTimestamp;break;case Type$3.TimestampNanosecond:d=i.visitTimestampNanosecond||i.visitTimestamp;break;case Type$3.Time:d=i.visitTime;break;case Type$3.TimeSecond:d=i.visitTimeSecond||i.visitTime;break;case Type$3.TimeMillisecond:d=i.visitTimeMillisecond||i.visitTime;break;case Type$3.TimeMicrosecond:d=i.visitTimeMicrosecond||i.visitTime;break;case Type$3.TimeNanosecond:d=i.visitTimeNanosecond||i.visitTime;break;case Type$3.Decimal:d=i.visitDecimal;break;case Type$3.List:d=i.visitList;break;case Type$3.Struct:d=i.visitStruct;break;case Type$3.Union:d=i.visitUnion;break;case Type$3.DenseUnion:d=i.visitDenseUnion||i.visitUnion;break;case Type$3.SparseUnion:d=i.visitSparseUnion||i.visitUnion;break;case Type$3.Dictionary:d=i.visitDictionary;break;case Type$3.Interval:d=i.visitInterval;break;case Type$3.IntervalDayTime:d=i.visitIntervalDayTime||i.visitInterval;break;case Type$3.IntervalYearMonth:d=i.visitIntervalYearMonth||i.visitInterval;break;case Type$3.FixedSizeList:d=i.visitFixedSizeList;break;case Type$3.Map:d=i.visitMap;break}if(typeof d=="function")return d;if(!o)return()=>null;throw new Error(`Unrecognized type '${Type$3[e]}'`)}function inferDType$1(i){switch(i.typeId){case Type$3.Null:return Type$3.Null;case Type$3.Int:{const{bitWidth:e,isSigned:o}=i;switch(e){case 8:return o?Type$3.Int8:Type$3.Uint8;case 16:return o?Type$3.Int16:Type$3.Uint16;case 32:return o?Type$3.Int32:Type$3.Uint32;case 64:return o?Type$3.Int64:Type$3.Uint64}return Type$3.Int}case Type$3.Float:switch(i.precision){case Precision$3.HALF:return Type$3.Float16;case Precision$3.SINGLE:return Type$3.Float32;case Precision$3.DOUBLE:return Type$3.Float64}return Type$3.Float;case Type$3.Binary:return Type$3.Binary;case Type$3.Utf8:return Type$3.Utf8;case Type$3.Bool:return Type$3.Bool;case Type$3.Decimal:return Type$3.Decimal;case Type$3.Time:switch(i.unit){case TimeUnit$3.SECOND:return Type$3.TimeSecond;case TimeUnit$3.MILLISECOND:return Type$3.TimeMillisecond;case TimeUnit$3.MICROSECOND:return Type$3.TimeMicrosecond;case TimeUnit$3.NANOSECOND:return Type$3.TimeNanosecond}return Type$3.Time;case Type$3.Timestamp:switch(i.unit){case TimeUnit$3.SECOND:return Type$3.TimestampSecond;case TimeUnit$3.MILLISECOND:return Type$3.TimestampMillisecond;case TimeUnit$3.MICROSECOND:return Type$3.TimestampMicrosecond;case TimeUnit$3.NANOSECOND:return Type$3.TimestampNanosecond}return Type$3.Timestamp;case Type$3.Date:switch(i.unit){case DateUnit$3.DAY:return Type$3.DateDay;case DateUnit$3.MILLISECOND:return Type$3.DateMillisecond}return Type$3.Date;case Type$3.Interval:switch(i.unit){case IntervalUnit$3.DAY_TIME:return Type$3.IntervalDayTime;case IntervalUnit$3.YEAR_MONTH:return Type$3.IntervalYearMonth}return Type$3.Interval;case Type$3.Map:return Type$3.Map;case Type$3.List:return Type$3.List;case Type$3.Struct:return Type$3.Struct;case Type$3.Union:switch(i.mode){case UnionMode$3.Dense:return Type$3.DenseUnion;case UnionMode$3.Sparse:return Type$3.SparseUnion}return Type$3.Union;case Type$3.FixedSizeBinary:return Type$3.FixedSizeBinary;case Type$3.FixedSizeList:return Type$3.FixedSizeList;case Type$3.Dictionary:return Type$3.Dictionary}throw new Error(`Unrecognized type '${Type$3[i.typeId]}'`)}Visitor$1.prototype.visitInt8=null;Visitor$1.prototype.visitInt16=null;Visitor$1.prototype.visitInt32=null;Visitor$1.prototype.visitInt64=null;Visitor$1.prototype.visitUint8=null;Visitor$1.prototype.visitUint16=null;Visitor$1.prototype.visitUint32=null;Visitor$1.prototype.visitUint64=null;Visitor$1.prototype.visitFloat16=null;Visitor$1.prototype.visitFloat32=null;Visitor$1.prototype.visitFloat64=null;Visitor$1.prototype.visitDateDay=null;Visitor$1.prototype.visitDateMillisecond=null;Visitor$1.prototype.visitTimestampSecond=null;Visitor$1.prototype.visitTimestampMillisecond=null;Visitor$1.prototype.visitTimestampMicrosecond=null;Visitor$1.prototype.visitTimestampNanosecond=null;Visitor$1.prototype.visitTimeSecond=null;Visitor$1.prototype.visitTimeMillisecond=null;Visitor$1.prototype.visitTimeMicrosecond=null;Visitor$1.prototype.visitTimeNanosecond=null;Visitor$1.prototype.visitDenseUnion=null;Visitor$1.prototype.visitSparseUnion=null;Visitor$1.prototype.visitIntervalDayTime=null;Visitor$1.prototype.visitIntervalYearMonth=null;const f64$1=new Float64Array(1),u32$1=new Uint32Array(f64$1.buffer);function uint16ToFloat64$1(i){const e=(i&31744)>>10,o=(i&1023)/1024,d=Math.pow(-1,(i&32768)>>15);switch(e){case 31:return d*(o?Number.NaN:1/0);case 0:return d*(o?6103515625e-14*o:0)}return d*Math.pow(2,e-15)*(1+o)}function float64ToUint16$1(i){if(i!==i)return 32256;f64$1[0]=i;const e=(u32$1[1]&2147483648)>>16&65535;let o=u32$1[1]&2146435072,d=0;return o>=1089470464?u32$1[0]>0?o=31744:(o=(o&2080374784)>>16,d=(u32$1[1]&1048575)>>10):o<=1056964608?(d=1048576+(u32$1[1]&1048575),d=1048576+(d<<(o>>20)-998)>>21,o=0):(o=o-1056964608>>10,d=(u32$1[1]&1048575)+512>>10),e|o|d&65535}let SetVisitor$1=class extends Visitor$1{};function wrapSet$1(i){return(e,o,d)=>{if(e.setValid(o,d!=null))return i(e,o,d)}}const setEpochMsToDays$1=(i,e,o)=>{i[e]=Math.trunc(o/864e5)},setEpochMsToMillisecondsLong$1=(i,e,o)=>{i[e]=Math.trunc(o%4294967296),i[e+1]=Math.trunc(o/4294967296)},setEpochMsToMicrosecondsLong$1=(i,e,o)=>{i[e]=Math.trunc(o*1e3%4294967296),i[e+1]=Math.trunc(o*1e3/4294967296)},setEpochMsToNanosecondsLong$1=(i,e,o)=>{i[e]=Math.trunc(o*1e6%4294967296),i[e+1]=Math.trunc(o*1e6/4294967296)},setVariableWidthBytes$1=(i,e,o,d)=>{if(o+1<e.length){const{[o]:h,[o+1]:g}=e;i.set(d.subarray(0,g-h),h)}},setBool$1=({offset:i,values:e},o,d)=>{const h=i+o;d?e[h>>3]|=1<<h%8:e[h>>3]&=~(1<<h%8)},setInt$1=({values:i},e,o)=>{i[e]=o},setFloat$1=({values:i},e,o)=>{i[e]=o},setFloat16$1=({values:i},e,o)=>{i[e]=float64ToUint16$1(o)},setAnyFloat$1=(i,e,o)=>{switch(i.type.precision){case Precision$3.HALF:return setFloat16$1(i,e,o);case Precision$3.SINGLE:case Precision$3.DOUBLE:return setFloat$1(i,e,o)}},setDateDay$1=({values:i},e,o)=>{setEpochMsToDays$1(i,e,o.valueOf())},setDateMillisecond$1=({values:i},e,o)=>{setEpochMsToMillisecondsLong$1(i,e*2,o.valueOf())},setFixedSizeBinary$1=({stride:i,values:e},o,d)=>{e.set(d.subarray(0,i),i*o)},setBinary$1=({values:i,valueOffsets:e},o,d)=>setVariableWidthBytes$1(i,e,o,d),setUtf8$1=({values:i,valueOffsets:e},o,d)=>{setVariableWidthBytes$1(i,e,o,encodeUtf8$1(d))},setDate$1=(i,e,o)=>{i.type.unit===DateUnit$3.DAY?setDateDay$1(i,e,o):setDateMillisecond$1(i,e,o)},setTimestampSecond$1=({values:i},e,o)=>setEpochMsToMillisecondsLong$1(i,e*2,o/1e3),setTimestampMillisecond$1=({values:i},e,o)=>setEpochMsToMillisecondsLong$1(i,e*2,o),setTimestampMicrosecond$1=({values:i},e,o)=>setEpochMsToMicrosecondsLong$1(i,e*2,o),setTimestampNanosecond$1=({values:i},e,o)=>setEpochMsToNanosecondsLong$1(i,e*2,o),setTimestamp$1=(i,e,o)=>{switch(i.type.unit){case TimeUnit$3.SECOND:return setTimestampSecond$1(i,e,o);case TimeUnit$3.MILLISECOND:return setTimestampMillisecond$1(i,e,o);case TimeUnit$3.MICROSECOND:return setTimestampMicrosecond$1(i,e,o);case TimeUnit$3.NANOSECOND:return setTimestampNanosecond$1(i,e,o)}},setTimeSecond$1=({values:i},e,o)=>{i[e]=o},setTimeMillisecond$1=({values:i},e,o)=>{i[e]=o},setTimeMicrosecond$1=({values:i},e,o)=>{i[e]=o},setTimeNanosecond$1=({values:i},e,o)=>{i[e]=o},setTime$1=(i,e,o)=>{switch(i.type.unit){case TimeUnit$3.SECOND:return setTimeSecond$1(i,e,o);case TimeUnit$3.MILLISECOND:return setTimeMillisecond$1(i,e,o);case TimeUnit$3.MICROSECOND:return setTimeMicrosecond$1(i,e,o);case TimeUnit$3.NANOSECOND:return setTimeNanosecond$1(i,e,o)}},setDecimal$1=({values:i,stride:e},o,d)=>{i.set(d.subarray(0,e),e*o)},setList$1=(i,e,o)=>{const d=i.children[0],h=i.valueOffsets,g=instance$d.getVisitFn(d);if(Array.isArray(o))for(let b=-1,$=h[e],j=h[e+1];$<j;)g(d,$++,o[++b]);else for(let b=-1,$=h[e],j=h[e+1];$<j;)g(d,$++,o.get(++b))},setMap$1=(i,e,o)=>{const d=i.children[0],{valueOffsets:h}=i,g=instance$d.getVisitFn(d);let{[e]:b,[e+1]:$}=h;const j=o instanceof Map?o.entries():Object.entries(o);for(const et of j)if(g(d,b,et),++b>=$)break},_setStructArrayValue$1=(i,e)=>(o,d,h,g)=>d&&o(d,i,e[g]),_setStructVectorValue$1=(i,e)=>(o,d,h,g)=>d&&o(d,i,e.get(g)),_setStructMapValue$1=(i,e)=>(o,d,h,g)=>d&&o(d,i,e.get(h.name)),_setStructObjectValue$1=(i,e)=>(o,d,h,g)=>d&&o(d,i,e[h.name]),setStruct$1=(i,e,o)=>{const d=i.type.children.map(g=>instance$d.getVisitFn(g.type)),h=o instanceof Map?_setStructMapValue$1(e,o):o instanceof Vector$2?_setStructVectorValue$1(e,o):Array.isArray(o)?_setStructArrayValue$1(e,o):_setStructObjectValue$1(e,o);i.type.children.forEach((g,b)=>h(d[b],i.children[b],g,b))},setUnion$1=(i,e,o)=>{i.type.mode===UnionMode$3.Dense?setDenseUnion$1(i,e,o):setSparseUnion$1(i,e,o)},setDenseUnion$1=(i,e,o)=>{const d=i.type.typeIdToChildIndex[i.typeIds[e]],h=i.children[d];instance$d.visit(h,i.valueOffsets[e],o)},setSparseUnion$1=(i,e,o)=>{const d=i.type.typeIdToChildIndex[i.typeIds[e]],h=i.children[d];instance$d.visit(h,e,o)},setDictionary$1=(i,e,o)=>{var d;(d=i.dictionary)===null||d===void 0||d.set(i.values[e],o)},setIntervalValue$1=(i,e,o)=>{i.type.unit===IntervalUnit$3.DAY_TIME?setIntervalDayTime$1(i,e,o):setIntervalYearMonth$1(i,e,o)},setIntervalDayTime$1=({values:i},e,o)=>{i.set(o.subarray(0,2),2*e)},setIntervalYearMonth$1=({values:i},e,o)=>{i[e]=o[0]*12+o[1]%12},setFixedSizeList$1=(i,e,o)=>{const{stride:d}=i,h=i.children[0],g=instance$d.getVisitFn(h);if(Array.isArray(o))for(let b=-1,$=e*d;++b<d;)g(h,$+b,o[b]);else for(let b=-1,$=e*d;++b<d;)g(h,$+b,o.get(b))};SetVisitor$1.prototype.visitBool=wrapSet$1(setBool$1);SetVisitor$1.prototype.visitInt=wrapSet$1(setInt$1);SetVisitor$1.prototype.visitInt8=wrapSet$1(setInt$1);SetVisitor$1.prototype.visitInt16=wrapSet$1(setInt$1);SetVisitor$1.prototype.visitInt32=wrapSet$1(setInt$1);SetVisitor$1.prototype.visitInt64=wrapSet$1(setInt$1);SetVisitor$1.prototype.visitUint8=wrapSet$1(setInt$1);SetVisitor$1.prototype.visitUint16=wrapSet$1(setInt$1);SetVisitor$1.prototype.visitUint32=wrapSet$1(setInt$1);SetVisitor$1.prototype.visitUint64=wrapSet$1(setInt$1);SetVisitor$1.prototype.visitFloat=wrapSet$1(setAnyFloat$1);SetVisitor$1.prototype.visitFloat16=wrapSet$1(setFloat16$1);SetVisitor$1.prototype.visitFloat32=wrapSet$1(setFloat$1);SetVisitor$1.prototype.visitFloat64=wrapSet$1(setFloat$1);SetVisitor$1.prototype.visitUtf8=wrapSet$1(setUtf8$1);SetVisitor$1.prototype.visitBinary=wrapSet$1(setBinary$1);SetVisitor$1.prototype.visitFixedSizeBinary=wrapSet$1(setFixedSizeBinary$1);SetVisitor$1.prototype.visitDate=wrapSet$1(setDate$1);SetVisitor$1.prototype.visitDateDay=wrapSet$1(setDateDay$1);SetVisitor$1.prototype.visitDateMillisecond=wrapSet$1(setDateMillisecond$1);SetVisitor$1.prototype.visitTimestamp=wrapSet$1(setTimestamp$1);SetVisitor$1.prototype.visitTimestampSecond=wrapSet$1(setTimestampSecond$1);SetVisitor$1.prototype.visitTimestampMillisecond=wrapSet$1(setTimestampMillisecond$1);SetVisitor$1.prototype.visitTimestampMicrosecond=wrapSet$1(setTimestampMicrosecond$1);SetVisitor$1.prototype.visitTimestampNanosecond=wrapSet$1(setTimestampNanosecond$1);SetVisitor$1.prototype.visitTime=wrapSet$1(setTime$1);SetVisitor$1.prototype.visitTimeSecond=wrapSet$1(setTimeSecond$1);SetVisitor$1.prototype.visitTimeMillisecond=wrapSet$1(setTimeMillisecond$1);SetVisitor$1.prototype.visitTimeMicrosecond=wrapSet$1(setTimeMicrosecond$1);SetVisitor$1.prototype.visitTimeNanosecond=wrapSet$1(setTimeNanosecond$1);SetVisitor$1.prototype.visitDecimal=wrapSet$1(setDecimal$1);SetVisitor$1.prototype.visitList=wrapSet$1(setList$1);SetVisitor$1.prototype.visitStruct=wrapSet$1(setStruct$1);SetVisitor$1.prototype.visitUnion=wrapSet$1(setUnion$1);SetVisitor$1.prototype.visitDenseUnion=wrapSet$1(setDenseUnion$1);SetVisitor$1.prototype.visitSparseUnion=wrapSet$1(setSparseUnion$1);SetVisitor$1.prototype.visitDictionary=wrapSet$1(setDictionary$1);SetVisitor$1.prototype.visitInterval=wrapSet$1(setIntervalValue$1);SetVisitor$1.prototype.visitIntervalDayTime=wrapSet$1(setIntervalDayTime$1);SetVisitor$1.prototype.visitIntervalYearMonth=wrapSet$1(setIntervalYearMonth$1);SetVisitor$1.prototype.visitFixedSizeList=wrapSet$1(setFixedSizeList$1);SetVisitor$1.prototype.visitMap=wrapSet$1(setMap$1);const instance$d=new SetVisitor$1,kParent$1=Symbol.for("parent"),kRowIndex$1=Symbol.for("rowIndex");let StructRow$1=class{constructor(e,o){return this[kParent$1]=e,this[kRowIndex$1]=o,new Proxy(this,new StructRowProxyHandler$1)}toArray(){return Object.values(this.toJSON())}toJSON(){const e=this[kRowIndex$1],o=this[kParent$1],d=o.type.children,h={};for(let g=-1,b=d.length;++g<b;)h[d[g].name]=instance$c.visit(o.children[g],e);return h}toString(){return`{${[...this].map(([e,o])=>`${valueToString$1(e)}: ${valueToString$1(o)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new StructRowIterator$1(this[kParent$1],this[kRowIndex$1])}},StructRowIterator$1=class{constructor(e,o){this.childIndex=0,this.children=e.children,this.rowIndex=o,this.childFields=e.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const e=this.childIndex;return e<this.numChildren?(this.childIndex=e+1,{done:!1,value:[this.childFields[e].name,instance$c.visit(this.children[e],this.rowIndex)]}):{done:!0,value:null}}};Object.defineProperties(StructRow$1.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[kParent$1]:{writable:!0,enumerable:!1,configurable:!1,value:null},[kRowIndex$1]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});let StructRowProxyHandler$1=class{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(e){return e[kParent$1].type.children.map(o=>o.name)}has(e,o){return e[kParent$1].type.children.findIndex(d=>d.name===o)!==-1}getOwnPropertyDescriptor(e,o){if(e[kParent$1].type.children.findIndex(d=>d.name===o)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(e,o){if(Reflect.has(e,o))return e[o];const d=e[kParent$1].type.children.findIndex(h=>h.name===o);if(d!==-1){const h=instance$c.visit(e[kParent$1].children[d],e[kRowIndex$1]);return Reflect.set(e,o,h),h}}set(e,o,d){const h=e[kParent$1].type.children.findIndex(g=>g.name===o);return h!==-1?(instance$d.visit(e[kParent$1].children[h],e[kRowIndex$1],d),Reflect.set(e,o,d)):Reflect.has(e,o)||typeof o=="symbol"?Reflect.set(e,o,d):!1}},GetVisitor$1=class extends Visitor$1{};function wrapGet$1(i){return(e,o)=>e.getValid(o)?i(e,o):null}const epochDaysToMs$1=(i,e)=>864e5*i[e],epochMillisecondsLongToMs$1=(i,e)=>4294967296*i[e+1]+(i[e]>>>0),epochMicrosecondsLongToMs$1=(i,e)=>4294967296*(i[e+1]/1e3)+(i[e]>>>0)/1e3,epochNanosecondsLongToMs$1=(i,e)=>4294967296*(i[e+1]/1e6)+(i[e]>>>0)/1e6,epochMillisecondsToDate$1=i=>new Date(i),epochDaysToDate$1=(i,e)=>epochMillisecondsToDate$1(epochDaysToMs$1(i,e)),epochMillisecondsLongToDate$1=(i,e)=>epochMillisecondsToDate$1(epochMillisecondsLongToMs$1(i,e)),getNull$1=(i,e)=>null,getVariableWidthBytes$1=(i,e,o)=>{if(o+1>=e.length)return null;const d=e[o],h=e[o+1];return i.subarray(d,h)},getBool$3=({offset:i,values:e},o)=>{const d=i+o;return(e[d>>3]&1<<d%8)!==0},getDateDay$1=({values:i},e)=>epochDaysToDate$1(i,e),getDateMillisecond$1=({values:i},e)=>epochMillisecondsLongToDate$1(i,e*2),getNumeric$1=({stride:i,values:e},o)=>e[i*o],getFloat16$1=({stride:i,values:e},o)=>uint16ToFloat64$1(e[i*o]),getBigInts$1=({values:i},e)=>i[e],getFixedSizeBinary$1=({stride:i,values:e},o)=>e.subarray(i*o,i*(o+1)),getBinary$1=({values:i,valueOffsets:e},o)=>getVariableWidthBytes$1(i,e,o),getUtf8$1=({values:i,valueOffsets:e},o)=>{const d=getVariableWidthBytes$1(i,e,o);return d!==null?decodeUtf8$1(d):null},getInt$1=({values:i},e)=>i[e],getFloat$1=({type:i,values:e},o)=>i.precision!==Precision$3.HALF?e[o]:uint16ToFloat64$1(e[o]),getDate$1=(i,e)=>i.type.unit===DateUnit$3.DAY?getDateDay$1(i,e):getDateMillisecond$1(i,e),getTimestampSecond$1=({values:i},e)=>1e3*epochMillisecondsLongToMs$1(i,e*2),getTimestampMillisecond$1=({values:i},e)=>epochMillisecondsLongToMs$1(i,e*2),getTimestampMicrosecond$1=({values:i},e)=>epochMicrosecondsLongToMs$1(i,e*2),getTimestampNanosecond$1=({values:i},e)=>epochNanosecondsLongToMs$1(i,e*2),getTimestamp$1=(i,e)=>{switch(i.type.unit){case TimeUnit$3.SECOND:return getTimestampSecond$1(i,e);case TimeUnit$3.MILLISECOND:return getTimestampMillisecond$1(i,e);case TimeUnit$3.MICROSECOND:return getTimestampMicrosecond$1(i,e);case TimeUnit$3.NANOSECOND:return getTimestampNanosecond$1(i,e)}},getTimeSecond$1=({values:i},e)=>i[e],getTimeMillisecond$1=({values:i},e)=>i[e],getTimeMicrosecond$1=({values:i},e)=>i[e],getTimeNanosecond$1=({values:i},e)=>i[e],getTime$1=(i,e)=>{switch(i.type.unit){case TimeUnit$3.SECOND:return getTimeSecond$1(i,e);case TimeUnit$3.MILLISECOND:return getTimeMillisecond$1(i,e);case TimeUnit$3.MICROSECOND:return getTimeMicrosecond$1(i,e);case TimeUnit$3.NANOSECOND:return getTimeNanosecond$1(i,e)}},getDecimal$1=({values:i,stride:e},o)=>BN$1.decimal(i.subarray(e*o,e*(o+1))),getList$1=(i,e)=>{const{valueOffsets:o,stride:d,children:h}=i,{[e*d]:g,[e*d+1]:b}=o,j=h[0].slice(g,b-g);return new Vector$2([j])},getMap$1=(i,e)=>{const{valueOffsets:o,children:d}=i,{[e]:h,[e+1]:g}=o,b=d[0];return new MapRow$1(b.slice(h,g-h))},getStruct$1=(i,e)=>new StructRow$1(i,e),getUnion$1=(i,e)=>i.type.mode===UnionMode$3.Dense?getDenseUnion$1(i,e):getSparseUnion$1(i,e),getDenseUnion$1=(i,e)=>{const o=i.type.typeIdToChildIndex[i.typeIds[e]],d=i.children[o];return instance$c.visit(d,i.valueOffsets[e])},getSparseUnion$1=(i,e)=>{const o=i.type.typeIdToChildIndex[i.typeIds[e]],d=i.children[o];return instance$c.visit(d,e)},getDictionary$1=(i,e)=>{var o;return(o=i.dictionary)===null||o===void 0?void 0:o.get(i.values[e])},getInterval$1=(i,e)=>i.type.unit===IntervalUnit$3.DAY_TIME?getIntervalDayTime$1(i,e):getIntervalYearMonth$1(i,e),getIntervalDayTime$1=({values:i},e)=>i.subarray(2*e,2*(e+1)),getIntervalYearMonth$1=({values:i},e)=>{const o=i[e],d=new Int32Array(2);return d[0]=Math.trunc(o/12),d[1]=Math.trunc(o%12),d},getFixedSizeList$1=(i,e)=>{const{stride:o,children:d}=i,g=d[0].slice(e*o,o);return new Vector$2([g])};GetVisitor$1.prototype.visitNull=wrapGet$1(getNull$1);GetVisitor$1.prototype.visitBool=wrapGet$1(getBool$3);GetVisitor$1.prototype.visitInt=wrapGet$1(getInt$1);GetVisitor$1.prototype.visitInt8=wrapGet$1(getNumeric$1);GetVisitor$1.prototype.visitInt16=wrapGet$1(getNumeric$1);GetVisitor$1.prototype.visitInt32=wrapGet$1(getNumeric$1);GetVisitor$1.prototype.visitInt64=wrapGet$1(getBigInts$1);GetVisitor$1.prototype.visitUint8=wrapGet$1(getNumeric$1);GetVisitor$1.prototype.visitUint16=wrapGet$1(getNumeric$1);GetVisitor$1.prototype.visitUint32=wrapGet$1(getNumeric$1);GetVisitor$1.prototype.visitUint64=wrapGet$1(getBigInts$1);GetVisitor$1.prototype.visitFloat=wrapGet$1(getFloat$1);GetVisitor$1.prototype.visitFloat16=wrapGet$1(getFloat16$1);GetVisitor$1.prototype.visitFloat32=wrapGet$1(getNumeric$1);GetVisitor$1.prototype.visitFloat64=wrapGet$1(getNumeric$1);GetVisitor$1.prototype.visitUtf8=wrapGet$1(getUtf8$1);GetVisitor$1.prototype.visitBinary=wrapGet$1(getBinary$1);GetVisitor$1.prototype.visitFixedSizeBinary=wrapGet$1(getFixedSizeBinary$1);GetVisitor$1.prototype.visitDate=wrapGet$1(getDate$1);GetVisitor$1.prototype.visitDateDay=wrapGet$1(getDateDay$1);GetVisitor$1.prototype.visitDateMillisecond=wrapGet$1(getDateMillisecond$1);GetVisitor$1.prototype.visitTimestamp=wrapGet$1(getTimestamp$1);GetVisitor$1.prototype.visitTimestampSecond=wrapGet$1(getTimestampSecond$1);GetVisitor$1.prototype.visitTimestampMillisecond=wrapGet$1(getTimestampMillisecond$1);GetVisitor$1.prototype.visitTimestampMicrosecond=wrapGet$1(getTimestampMicrosecond$1);GetVisitor$1.prototype.visitTimestampNanosecond=wrapGet$1(getTimestampNanosecond$1);GetVisitor$1.prototype.visitTime=wrapGet$1(getTime$1);GetVisitor$1.prototype.visitTimeSecond=wrapGet$1(getTimeSecond$1);GetVisitor$1.prototype.visitTimeMillisecond=wrapGet$1(getTimeMillisecond$1);GetVisitor$1.prototype.visitTimeMicrosecond=wrapGet$1(getTimeMicrosecond$1);GetVisitor$1.prototype.visitTimeNanosecond=wrapGet$1(getTimeNanosecond$1);GetVisitor$1.prototype.visitDecimal=wrapGet$1(getDecimal$1);GetVisitor$1.prototype.visitList=wrapGet$1(getList$1);GetVisitor$1.prototype.visitStruct=wrapGet$1(getStruct$1);GetVisitor$1.prototype.visitUnion=wrapGet$1(getUnion$1);GetVisitor$1.prototype.visitDenseUnion=wrapGet$1(getDenseUnion$1);GetVisitor$1.prototype.visitSparseUnion=wrapGet$1(getSparseUnion$1);GetVisitor$1.prototype.visitDictionary=wrapGet$1(getDictionary$1);GetVisitor$1.prototype.visitInterval=wrapGet$1(getInterval$1);GetVisitor$1.prototype.visitIntervalDayTime=wrapGet$1(getIntervalDayTime$1);GetVisitor$1.prototype.visitIntervalYearMonth=wrapGet$1(getIntervalYearMonth$1);GetVisitor$1.prototype.visitFixedSizeList=wrapGet$1(getFixedSizeList$1);GetVisitor$1.prototype.visitMap=wrapGet$1(getMap$1);const instance$c=new GetVisitor$1,kKeys$1=Symbol.for("keys"),kVals$1=Symbol.for("vals");let MapRow$1=class{constructor(e){return this[kKeys$1]=new Vector$2([e.children[0]]).memoize(),this[kVals$1]=e.children[1],new Proxy(this,new MapRowProxyHandler$1)}[Symbol.iterator](){return new MapRowIterator$1(this[kKeys$1],this[kVals$1])}get size(){return this[kKeys$1].length}toArray(){return Object.values(this.toJSON())}toJSON(){const e=this[kKeys$1],o=this[kVals$1],d={};for(let h=-1,g=e.length;++h<g;)d[e.get(h)]=instance$c.visit(o,h);return d}toString(){return`{${[...this].map(([e,o])=>`${valueToString$1(e)}: ${valueToString$1(o)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}},MapRowIterator$1=class{constructor(e,o){this.keys=e,this.vals=o,this.keyIndex=0,this.numKeys=e.length}[Symbol.iterator](){return this}next(){const e=this.keyIndex;return e===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(e),instance$c.visit(this.vals,e)]})}},MapRowProxyHandler$1=class{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(e){return e[kKeys$1].toArray().map(String)}has(e,o){return e[kKeys$1].includes(o)}getOwnPropertyDescriptor(e,o){if(e[kKeys$1].indexOf(o)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(e,o){if(Reflect.has(e,o))return e[o];const d=e[kKeys$1].indexOf(o);if(d!==-1){const h=instance$c.visit(Reflect.get(e,kVals$1),d);return Reflect.set(e,o,h),h}}set(e,o,d){const h=e[kKeys$1].indexOf(o);return h!==-1?(instance$d.visit(Reflect.get(e,kVals$1),h,d),Reflect.set(e,o,d)):Reflect.has(e,o)?Reflect.set(e,o,d):!1}};Object.defineProperties(MapRow$1.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[kKeys$1]:{writable:!0,enumerable:!1,configurable:!1,value:null},[kVals$1]:{writable:!0,enumerable:!1,configurable:!1,value:null}});let tmp$1;function clampRange$1(i,e,o,d){const{length:h=0}=i;let g=typeof e!="number"?0:e,b=typeof o!="number"?h:o;return g<0&&(g=(g%h+h)%h),b<0&&(b=(b%h+h)%h),b<g&&(tmp$1=g,g=b,b=tmp$1),b>h&&(b=h),d?d(i,g,b):[g,b]}const isNaNFast$1=i=>i!==i;function createElementComparator$1(i){if(typeof i!=="object"||i===null)return isNaNFast$1(i)?isNaNFast$1:o=>o===i;if(i instanceof Date){const o=i.valueOf();return d=>d instanceof Date?d.valueOf()===o:!1}return ArrayBuffer.isView(i)?o=>o?compareArrayLike$1(i,o):!1:i instanceof Map?createMapComparator$1(i):Array.isArray(i)?createArrayLikeComparator$1(i):i instanceof Vector$2?createVectorComparator$1(i):createObjectComparator$1(i,!0)}function createArrayLikeComparator$1(i){const e=[];for(let o=-1,d=i.length;++o<d;)e[o]=createElementComparator$1(i[o]);return createSubElementsComparator$1(e)}function createMapComparator$1(i){let e=-1;const o=[];for(const d of i.values())o[++e]=createElementComparator$1(d);return createSubElementsComparator$1(o)}function createVectorComparator$1(i){const e=[];for(let o=-1,d=i.length;++o<d;)e[o]=createElementComparator$1(i.get(o));return createSubElementsComparator$1(e)}function createObjectComparator$1(i,e=!1){const o=Object.keys(i);if(!e&&o.length===0)return()=>!1;const d=[];for(let h=-1,g=o.length;++h<g;)d[h]=createElementComparator$1(i[o[h]]);return createSubElementsComparator$1(d,o)}function createSubElementsComparator$1(i,e){return o=>{if(!o||typeof o!="object")return!1;switch(o.constructor){case Array:return compareArray$1(i,o);case Map:return compareObject$1(i,o,o.keys());case MapRow$1:case StructRow$1:case Object:case void 0:return compareObject$1(i,o,e||Object.keys(o))}return o instanceof Vector$2?compareVector$1(i,o):!1}}function compareArray$1(i,e){const o=i.length;if(e.length!==o)return!1;for(let d=-1;++d<o;)if(!i[d](e[d]))return!1;return!0}function compareVector$1(i,e){const o=i.length;if(e.length!==o)return!1;for(let d=-1;++d<o;)if(!i[d](e.get(d)))return!1;return!0}function compareObject$1(i,e,o){const d=o[Symbol.iterator](),h=e instanceof Map?e.keys():Object.keys(e)[Symbol.iterator](),g=e instanceof Map?e.values():Object.values(e)[Symbol.iterator]();let b=0;const $=i.length;let j=g.next(),et=d.next(),tt=h.next();for(;b<$&&!et.done&&!tt.done&&!j.done&&!(et.value!==tt.value||!i[b](j.value));++b,et=d.next(),tt=h.next(),j=g.next());return b===$&&et.done&&tt.done&&j.done?!0:(d.return&&d.return(),h.return&&h.return(),g.return&&g.return(),!1)}function getBool$2(i,e,o,d){return(o&1<<d)!==0}function getBit$1(i,e,o,d){return(o&1<<d)>>d}function truncateBitmap$1(i,e,o){const d=o.byteLength+7&-8;if(i>0||o.byteLength<d){const h=new Uint8Array(d);return h.set(i%8===0?o.subarray(i>>3):packBools$1(new BitIterator$1(o,i,e,null,getBool$2)).subarray(0,d)),h}return o}function packBools$1(i){const e=[];let o=0,d=0,h=0;for(const b of i)b&&(h|=1<<d),++d===8&&(e[o++]=h,h=d=0);(o===0||d>0)&&(e[o++]=h);const g=new Uint8Array(e.length+7&-8);return g.set(e),g}let BitIterator$1=class{constructor(e,o,d,h,g){this.bytes=e,this.length=d,this.context=h,this.get=g,this.bit=o%8,this.byteIndex=o>>3,this.byte=e[this.byteIndex++],this.index=0}next(){return this.index<this.length?(this.bit===8&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}};function popcnt_bit_range$1(i,e,o){if(o-e<=0)return 0;if(o-e<8){let g=0;for(const b of new BitIterator$1(i,e,o-e,i,getBit$1))g+=b;return g}const d=o>>3<<3,h=e+(e%8===0?0:8-e%8);return popcnt_bit_range$1(i,e,h)+popcnt_bit_range$1(i,d,o)+popcnt_array$1(i,h>>3,d-h>>3)}function popcnt_array$1(i,e,o){let d=0,h=Math.trunc(e);const g=new DataView(i.buffer,i.byteOffset,i.byteLength),b=o===void 0?i.byteLength:h+o;for(;b-h>=4;)d+=popcnt_uint32$1(g.getUint32(h)),h+=4;for(;b-h>=2;)d+=popcnt_uint32$1(g.getUint16(h)),h+=2;for(;b-h>=1;)d+=popcnt_uint32$1(g.getUint8(h)),h+=1;return d}function popcnt_uint32$1(i){let e=Math.trunc(i);return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),(e+(e>>>4)&252645135)*16843009>>>24}const kUnknownNullCount$1=-1;let Data$1=class Xl{constructor(e,o,d,h,g,b=[],$){this.type=e,this.children=b,this.dictionary=$,this.offset=Math.floor(Math.max(o||0,0)),this.length=Math.floor(Math.max(d||0,0)),this._nullCount=Math.floor(Math.max(h||0,-1));let j;g instanceof Xl?(this.stride=g.stride,this.values=g.values,this.typeIds=g.typeIds,this.nullBitmap=g.nullBitmap,this.valueOffsets=g.valueOffsets):(this.stride=strideForType$1(e),g&&((j=g[0])&&(this.valueOffsets=j),(j=g[1])&&(this.values=j),(j=g[2])&&(this.nullBitmap=j),(j=g[3])&&(this.typeIds=j))),this.nullable=this._nullCount!==0&&this.nullBitmap&&this.nullBitmap.byteLength>0}get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get byteLength(){let e=0;const{valueOffsets:o,values:d,nullBitmap:h,typeIds:g}=this;return o&&(e+=o.byteLength),d&&(e+=d.byteLength),h&&(e+=h.byteLength),g&&(e+=g.byteLength),this.children.reduce((b,$)=>b+$.byteLength,e)}get nullCount(){let e=this._nullCount,o;return e<=kUnknownNullCount$1&&(o=this.nullBitmap)&&(this._nullCount=e=this.length-popcnt_bit_range$1(o,this.offset,this.offset+this.length)),e}getValid(e){if(this.nullable&&this.nullCount>0){const o=this.offset+e;return(this.nullBitmap[o>>3]&1<<o%8)!==0}return!0}setValid(e,o){if(!this.nullable)return o;if(!this.nullBitmap||this.nullBitmap.byteLength<=e>>3){const{nullBitmap:j}=this._changeLengthAndBackfillNullBitmap(this.length);Object.assign(this,{nullBitmap:j,_nullCount:0})}const{nullBitmap:d,offset:h}=this,g=h+e>>3,b=(h+e)%8,$=d[g]>>b&1;return o?$===0&&(d[g]|=1<<b,this._nullCount=this.nullCount+1):$===1&&(d[g]&=~(1<<b),this._nullCount=this.nullCount-1),o}clone(e=this.type,o=this.offset,d=this.length,h=this._nullCount,g=this,b=this.children){return new Xl(e,o,d,h,g,b,this.dictionary)}slice(e,o){const{stride:d,typeId:h,children:g}=this,b=+(this._nullCount===0)-1,$=h===16?d:1,j=this._sliceBuffers(e,o,d,h);return this.clone(this.type,this.offset+e,o,b,j,g.length===0||this.valueOffsets?g:this._sliceChildren(g,$*e,$*o))}_changeLengthAndBackfillNullBitmap(e){if(this.typeId===Type$3.Null)return this.clone(this.type,0,e,0);const{length:o,nullCount:d}=this,h=new Uint8Array((e+63&-64)>>3).fill(255,0,o>>3);h[o>>3]=(1<<o-(o&-8))-1,d>0&&h.set(truncateBitmap$1(this.offset,o,this.nullBitmap),0);const g=this.buffers;return g[BufferType$1.VALIDITY]=h,this.clone(this.type,0,e,d+(e-o),g)}_sliceBuffers(e,o,d,h){let g;const{buffers:b}=this;return(g=b[BufferType$1.TYPE])&&(b[BufferType$1.TYPE]=g.subarray(e,e+o)),(g=b[BufferType$1.OFFSET])&&(b[BufferType$1.OFFSET]=g.subarray(e,e+o+1))||(g=b[BufferType$1.DATA])&&(b[BufferType$1.DATA]=h===6?g:g.subarray(d*e,d*(e+o))),b}_sliceChildren(e,o,d){return e.map(h=>h.slice(o,d))}};Data$1.prototype.children=Object.freeze([]);let MakeDataVisitor$1=class na extends Visitor$1{visit(e){return this.getVisitFn(e.type).call(this,e)}visitNull(e){const{["type"]:o,["offset"]:d=0,["length"]:h=0}=e;return new Data$1(o,d,h,0)}visitBool(e){const{["type"]:o,["offset"]:d=0}=e,h=toUint8Array$1(e.nullBitmap),g=toArrayBufferView$1(o.ArrayType,e.data),{["length"]:b=g.length>>3,["nullCount"]:$=e.nullBitmap?-1:0}=e;return new Data$1(o,d,b,$,[void 0,g,h])}visitInt(e){const{["type"]:o,["offset"]:d=0}=e,h=toUint8Array$1(e.nullBitmap),g=toArrayBufferView$1(o.ArrayType,e.data),{["length"]:b=g.length,["nullCount"]:$=e.nullBitmap?-1:0}=e;return new Data$1(o,d,b,$,[void 0,g,h])}visitFloat(e){const{["type"]:o,["offset"]:d=0}=e,h=toUint8Array$1(e.nullBitmap),g=toArrayBufferView$1(o.ArrayType,e.data),{["length"]:b=g.length,["nullCount"]:$=e.nullBitmap?-1:0}=e;return new Data$1(o,d,b,$,[void 0,g,h])}visitUtf8(e){const{["type"]:o,["offset"]:d=0}=e,h=toUint8Array$1(e.data),g=toUint8Array$1(e.nullBitmap),b=toInt32Array$1(e.valueOffsets),{["length"]:$=b.length-1,["nullCount"]:j=e.nullBitmap?-1:0}=e;return new Data$1(o,d,$,j,[b,h,g])}visitBinary(e){const{["type"]:o,["offset"]:d=0}=e,h=toUint8Array$1(e.data),g=toUint8Array$1(e.nullBitmap),b=toInt32Array$1(e.valueOffsets),{["length"]:$=b.length-1,["nullCount"]:j=e.nullBitmap?-1:0}=e;return new Data$1(o,d,$,j,[b,h,g])}visitFixedSizeBinary(e){const{["type"]:o,["offset"]:d=0}=e,h=toUint8Array$1(e.nullBitmap),g=toArrayBufferView$1(o.ArrayType,e.data),{["length"]:b=g.length/strideForType$1(o),["nullCount"]:$=e.nullBitmap?-1:0}=e;return new Data$1(o,d,b,$,[void 0,g,h])}visitDate(e){const{["type"]:o,["offset"]:d=0}=e,h=toUint8Array$1(e.nullBitmap),g=toArrayBufferView$1(o.ArrayType,e.data),{["length"]:b=g.length/strideForType$1(o),["nullCount"]:$=e.nullBitmap?-1:0}=e;return new Data$1(o,d,b,$,[void 0,g,h])}visitTimestamp(e){const{["type"]:o,["offset"]:d=0}=e,h=toUint8Array$1(e.nullBitmap),g=toArrayBufferView$1(o.ArrayType,e.data),{["length"]:b=g.length/strideForType$1(o),["nullCount"]:$=e.nullBitmap?-1:0}=e;return new Data$1(o,d,b,$,[void 0,g,h])}visitTime(e){const{["type"]:o,["offset"]:d=0}=e,h=toUint8Array$1(e.nullBitmap),g=toArrayBufferView$1(o.ArrayType,e.data),{["length"]:b=g.length/strideForType$1(o),["nullCount"]:$=e.nullBitmap?-1:0}=e;return new Data$1(o,d,b,$,[void 0,g,h])}visitDecimal(e){const{["type"]:o,["offset"]:d=0}=e,h=toUint8Array$1(e.nullBitmap),g=toArrayBufferView$1(o.ArrayType,e.data),{["length"]:b=g.length/strideForType$1(o),["nullCount"]:$=e.nullBitmap?-1:0}=e;return new Data$1(o,d,b,$,[void 0,g,h])}visitList(e){const{["type"]:o,["offset"]:d=0,["child"]:h}=e,g=toUint8Array$1(e.nullBitmap),b=toInt32Array$1(e.valueOffsets),{["length"]:$=b.length-1,["nullCount"]:j=e.nullBitmap?-1:0}=e;return new Data$1(o,d,$,j,[b,void 0,g],[h])}visitStruct(e){const{["type"]:o,["offset"]:d=0,["children"]:h=[]}=e,g=toUint8Array$1(e.nullBitmap),{length:b=h.reduce((j,{length:et})=>Math.max(j,et),0),nullCount:$=e.nullBitmap?-1:0}=e;return new Data$1(o,d,b,$,[void 0,void 0,g],h)}visitUnion(e){const{["type"]:o,["offset"]:d=0,["children"]:h=[]}=e,g=toUint8Array$1(e.nullBitmap),b=toArrayBufferView$1(o.ArrayType,e.typeIds),{["length"]:$=b.length,["nullCount"]:j=e.nullBitmap?-1:0}=e;if(DataType$1.isSparseUnion(o))return new Data$1(o,d,$,j,[void 0,void 0,g,b],h);const et=toInt32Array$1(e.valueOffsets);return new Data$1(o,d,$,j,[et,void 0,g,b],h)}visitDictionary(e){const{["type"]:o,["offset"]:d=0}=e,h=toUint8Array$1(e.nullBitmap),g=toArrayBufferView$1(o.indices.ArrayType,e.data),{["dictionary"]:b=new Vector$2([new na().visit({type:o.dictionary})])}=e,{["length"]:$=g.length,["nullCount"]:j=e.nullBitmap?-1:0}=e;return new Data$1(o,d,$,j,[void 0,g,h],[],b)}visitInterval(e){const{["type"]:o,["offset"]:d=0}=e,h=toUint8Array$1(e.nullBitmap),g=toArrayBufferView$1(o.ArrayType,e.data),{["length"]:b=g.length/strideForType$1(o),["nullCount"]:$=e.nullBitmap?-1:0}=e;return new Data$1(o,d,b,$,[void 0,g,h])}visitFixedSizeList(e){const{["type"]:o,["offset"]:d=0,["child"]:h=new na().visit({type:o.valueType})}=e,g=toUint8Array$1(e.nullBitmap),{["length"]:b=h.length/strideForType$1(o),["nullCount"]:$=e.nullBitmap?-1:0}=e;return new Data$1(o,d,b,$,[void 0,void 0,g],[h])}visitMap(e){const{["type"]:o,["offset"]:d=0,["child"]:h=new na().visit({type:o.childType})}=e,g=toUint8Array$1(e.nullBitmap),b=toInt32Array$1(e.valueOffsets),{["length"]:$=b.length-1,["nullCount"]:j=e.nullBitmap?-1:0}=e;return new Data$1(o,d,$,j,[b,void 0,g],[h])}};function makeData$1(i){return new MakeDataVisitor$1().visit(i)}let ChunkedIterator$1=class{constructor(e=0,o){this.numChunks=e,this.getChunkIterator=o,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const e=this.chunkIterator.next();if(!e.done)return e;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}};function computeChunkNullCounts$1(i){return i.reduce((e,o)=>e+o.nullCount,0)}function computeChunkOffsets$1(i){return i.reduce((e,o,d)=>(e[d+1]=e[d]+o.length,e),new Uint32Array(i.length+1))}function sliceChunks$1(i,e,o,d){const h=[];for(let g=-1,b=i.length;++g<b;){const $=i[g],j=e[g],{length:et}=$;if(j>=d)break;if(o>=j+et)continue;if(j>=o&&j+et<=d){h.push($);continue}const tt=Math.max(0,o-j),nt=Math.min(d-j,et);h.push($.slice(tt,nt-tt))}return h.length===0&&h.push(i[0].slice(0,0)),h}function binarySearch$1(i,e,o,d){let h=0,g=0,b=e.length-1;do{if(h>=b-1)return o<e[b]?d(i,h,o-e[h]):null;g=h+Math.trunc((b-h)*.5),o<e[g]?b=g:h=g}while(h<b)}function isChunkedValid$1(i,e){return i.getValid(e)}function wrapChunkedCall1$1(i){function e(o,d,h){return i(o[d],h)}return function(o){const d=this.data;return binarySearch$1(d,this._offsets,o,e)}}function wrapChunkedCall2$1(i){let e;function o(d,h,g){return i(d[h],g,e)}return function(d,h){const g=this.data;e=h;const b=binarySearch$1(g,this._offsets,d,o);return e=void 0,b}}function wrapChunkedIndexOf$1(i){let e;function o(d,h,g){let b=g,$=0,j=0;for(let et=h-1,tt=d.length;++et<tt;){const nt=d[et];if(~($=i(nt,e,b)))return j+$;b=0,j+=nt.length}return-1}return function(d,h){e=d;const g=this.data,b=typeof h!="number"?o(g,0,0):binarySearch$1(g,this._offsets,h,o);return e=void 0,b}}let IndexOfVisitor$1=class extends Visitor$1{};function nullIndexOf$1(i,e){return e===null&&i.length>0?0:-1}function indexOfNull$1(i,e){const{nullBitmap:o}=i;if(!o||i.nullCount<=0)return-1;let d=0;for(const h of new BitIterator$1(o,i.offset+(e||0),i.length,o,getBool$2)){if(!h)return d;++d}return-1}function indexOfValue$1(i,e,o){if(e===void 0)return-1;if(e===null)return indexOfNull$1(i,o);const d=instance$c.getVisitFn(i),h=createElementComparator$1(e);for(let g=(o||0)-1,b=i.length;++g<b;)if(h(d(i,g)))return g;return-1}function indexOfUnion$1(i,e,o){const d=instance$c.getVisitFn(i),h=createElementComparator$1(e);for(let g=(o||0)-1,b=i.length;++g<b;)if(h(d(i,g)))return g;return-1}IndexOfVisitor$1.prototype.visitNull=nullIndexOf$1;IndexOfVisitor$1.prototype.visitBool=indexOfValue$1;IndexOfVisitor$1.prototype.visitInt=indexOfValue$1;IndexOfVisitor$1.prototype.visitInt8=indexOfValue$1;IndexOfVisitor$1.prototype.visitInt16=indexOfValue$1;IndexOfVisitor$1.prototype.visitInt32=indexOfValue$1;IndexOfVisitor$1.prototype.visitInt64=indexOfValue$1;IndexOfVisitor$1.prototype.visitUint8=indexOfValue$1;IndexOfVisitor$1.prototype.visitUint16=indexOfValue$1;IndexOfVisitor$1.prototype.visitUint32=indexOfValue$1;IndexOfVisitor$1.prototype.visitUint64=indexOfValue$1;IndexOfVisitor$1.prototype.visitFloat=indexOfValue$1;IndexOfVisitor$1.prototype.visitFloat16=indexOfValue$1;IndexOfVisitor$1.prototype.visitFloat32=indexOfValue$1;IndexOfVisitor$1.prototype.visitFloat64=indexOfValue$1;IndexOfVisitor$1.prototype.visitUtf8=indexOfValue$1;IndexOfVisitor$1.prototype.visitBinary=indexOfValue$1;IndexOfVisitor$1.prototype.visitFixedSizeBinary=indexOfValue$1;IndexOfVisitor$1.prototype.visitDate=indexOfValue$1;IndexOfVisitor$1.prototype.visitDateDay=indexOfValue$1;IndexOfVisitor$1.prototype.visitDateMillisecond=indexOfValue$1;IndexOfVisitor$1.prototype.visitTimestamp=indexOfValue$1;IndexOfVisitor$1.prototype.visitTimestampSecond=indexOfValue$1;IndexOfVisitor$1.prototype.visitTimestampMillisecond=indexOfValue$1;IndexOfVisitor$1.prototype.visitTimestampMicrosecond=indexOfValue$1;IndexOfVisitor$1.prototype.visitTimestampNanosecond=indexOfValue$1;IndexOfVisitor$1.prototype.visitTime=indexOfValue$1;IndexOfVisitor$1.prototype.visitTimeSecond=indexOfValue$1;IndexOfVisitor$1.prototype.visitTimeMillisecond=indexOfValue$1;IndexOfVisitor$1.prototype.visitTimeMicrosecond=indexOfValue$1;IndexOfVisitor$1.prototype.visitTimeNanosecond=indexOfValue$1;IndexOfVisitor$1.prototype.visitDecimal=indexOfValue$1;IndexOfVisitor$1.prototype.visitList=indexOfValue$1;IndexOfVisitor$1.prototype.visitStruct=indexOfValue$1;IndexOfVisitor$1.prototype.visitUnion=indexOfValue$1;IndexOfVisitor$1.prototype.visitDenseUnion=indexOfUnion$1;IndexOfVisitor$1.prototype.visitSparseUnion=indexOfUnion$1;IndexOfVisitor$1.prototype.visitDictionary=indexOfValue$1;IndexOfVisitor$1.prototype.visitInterval=indexOfValue$1;IndexOfVisitor$1.prototype.visitIntervalDayTime=indexOfValue$1;IndexOfVisitor$1.prototype.visitIntervalYearMonth=indexOfValue$1;IndexOfVisitor$1.prototype.visitFixedSizeList=indexOfValue$1;IndexOfVisitor$1.prototype.visitMap=indexOfValue$1;const instance$b=new IndexOfVisitor$1;let IteratorVisitor$1=class extends Visitor$1{};function vectorIterator$1(i){const{type:e}=i;if(i.nullCount===0&&i.stride===1&&(e.typeId===Type$3.Timestamp||e instanceof Int_$1&&e.bitWidth!==64||e instanceof Time_$1&&e.bitWidth!==64||e instanceof Float$1&&e.precision!==Precision$3.HALF))return new ChunkedIterator$1(i.data.length,d=>{const h=i.data[d];return h.values.subarray(0,h.length)[Symbol.iterator]()});let o=0;return new ChunkedIterator$1(i.data.length,d=>{const g=i.data[d].length,b=i.slice(o,o+g);return o+=g,new VectorIterator$1(b)})}let VectorIterator$1=class{constructor(e){this.vector=e,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}};IteratorVisitor$1.prototype.visitNull=vectorIterator$1;IteratorVisitor$1.prototype.visitBool=vectorIterator$1;IteratorVisitor$1.prototype.visitInt=vectorIterator$1;IteratorVisitor$1.prototype.visitInt8=vectorIterator$1;IteratorVisitor$1.prototype.visitInt16=vectorIterator$1;IteratorVisitor$1.prototype.visitInt32=vectorIterator$1;IteratorVisitor$1.prototype.visitInt64=vectorIterator$1;IteratorVisitor$1.prototype.visitUint8=vectorIterator$1;IteratorVisitor$1.prototype.visitUint16=vectorIterator$1;IteratorVisitor$1.prototype.visitUint32=vectorIterator$1;IteratorVisitor$1.prototype.visitUint64=vectorIterator$1;IteratorVisitor$1.prototype.visitFloat=vectorIterator$1;IteratorVisitor$1.prototype.visitFloat16=vectorIterator$1;IteratorVisitor$1.prototype.visitFloat32=vectorIterator$1;IteratorVisitor$1.prototype.visitFloat64=vectorIterator$1;IteratorVisitor$1.prototype.visitUtf8=vectorIterator$1;IteratorVisitor$1.prototype.visitBinary=vectorIterator$1;IteratorVisitor$1.prototype.visitFixedSizeBinary=vectorIterator$1;IteratorVisitor$1.prototype.visitDate=vectorIterator$1;IteratorVisitor$1.prototype.visitDateDay=vectorIterator$1;IteratorVisitor$1.prototype.visitDateMillisecond=vectorIterator$1;IteratorVisitor$1.prototype.visitTimestamp=vectorIterator$1;IteratorVisitor$1.prototype.visitTimestampSecond=vectorIterator$1;IteratorVisitor$1.prototype.visitTimestampMillisecond=vectorIterator$1;IteratorVisitor$1.prototype.visitTimestampMicrosecond=vectorIterator$1;IteratorVisitor$1.prototype.visitTimestampNanosecond=vectorIterator$1;IteratorVisitor$1.prototype.visitTime=vectorIterator$1;IteratorVisitor$1.prototype.visitTimeSecond=vectorIterator$1;IteratorVisitor$1.prototype.visitTimeMillisecond=vectorIterator$1;IteratorVisitor$1.prototype.visitTimeMicrosecond=vectorIterator$1;IteratorVisitor$1.prototype.visitTimeNanosecond=vectorIterator$1;IteratorVisitor$1.prototype.visitDecimal=vectorIterator$1;IteratorVisitor$1.prototype.visitList=vectorIterator$1;IteratorVisitor$1.prototype.visitStruct=vectorIterator$1;IteratorVisitor$1.prototype.visitUnion=vectorIterator$1;IteratorVisitor$1.prototype.visitDenseUnion=vectorIterator$1;IteratorVisitor$1.prototype.visitSparseUnion=vectorIterator$1;IteratorVisitor$1.prototype.visitDictionary=vectorIterator$1;IteratorVisitor$1.prototype.visitInterval=vectorIterator$1;IteratorVisitor$1.prototype.visitIntervalDayTime=vectorIterator$1;IteratorVisitor$1.prototype.visitIntervalYearMonth=vectorIterator$1;IteratorVisitor$1.prototype.visitFixedSizeList=vectorIterator$1;IteratorVisitor$1.prototype.visitMap=vectorIterator$1;const instance$a=new IteratorVisitor$1,sum$4=(i,e)=>i+e;let GetByteLengthVisitor$1=class extends Visitor$1{visitNull(e,o){return 0}visitInt(e,o){return e.type.bitWidth/8}visitFloat(e,o){return e.type.ArrayType.BYTES_PER_ELEMENT}visitBool(e,o){return 1/8}visitDecimal(e,o){return e.type.bitWidth/8}visitDate(e,o){return(e.type.unit+1)*4}visitTime(e,o){return e.type.bitWidth/8}visitTimestamp(e,o){return e.type.unit===TimeUnit$3.SECOND?4:8}visitInterval(e,o){return(e.type.unit+1)*4}visitStruct(e,o){return e.children.reduce((d,h)=>d+instance$9.visit(h,o),0)}visitFixedSizeBinary(e,o){return e.type.byteWidth}visitMap(e,o){return 8+e.children.reduce((d,h)=>d+instance$9.visit(h,o),0)}visitDictionary(e,o){var d;return e.type.indices.bitWidth/8+(((d=e.dictionary)===null||d===void 0?void 0:d.getByteLength(e.values[o]))||0)}};const getUtf8ByteLength$1=({valueOffsets:i},e)=>8+(i[e+1]-i[e]),getBinaryByteLength$1=({valueOffsets:i},e)=>8+(i[e+1]-i[e]),getListByteLength$1=({valueOffsets:i,stride:e,children:o},d)=>{const h=o[0],{[d*e]:g}=i,{[d*e+1]:b}=i,$=instance$9.getVisitFn(h.type),j=h.slice(g,b-g);let et=8;for(let tt=-1,nt=b-g;++tt<nt;)et+=$(j,tt);return et},getFixedSizeListByteLength$1=({stride:i,children:e},o)=>{const d=e[0],h=d.slice(o*i,i),g=instance$9.getVisitFn(d.type);let b=0;for(let $=-1,j=h.length;++$<j;)b+=g(h,$);return b},getUnionByteLength$1=(i,e)=>i.type.mode===UnionMode$3.Dense?getDenseUnionByteLength$1(i,e):getSparseUnionByteLength$1(i,e),getDenseUnionByteLength$1=({type:i,children:e,typeIds:o,valueOffsets:d},h)=>{const g=i.typeIdToChildIndex[o[h]];return 8+instance$9.visit(e[g],d[h])},getSparseUnionByteLength$1=({children:i},e)=>4+instance$9.visitMany(i,i.map(()=>e)).reduce(sum$4,0);GetByteLengthVisitor$1.prototype.visitUtf8=getUtf8ByteLength$1;GetByteLengthVisitor$1.prototype.visitBinary=getBinaryByteLength$1;GetByteLengthVisitor$1.prototype.visitList=getListByteLength$1;GetByteLengthVisitor$1.prototype.visitFixedSizeList=getFixedSizeListByteLength$1;GetByteLengthVisitor$1.prototype.visitUnion=getUnionByteLength$1;GetByteLengthVisitor$1.prototype.visitDenseUnion=getDenseUnionByteLength$1;GetByteLengthVisitor$1.prototype.visitSparseUnion=getSparseUnionByteLength$1;const instance$9=new GetByteLengthVisitor$1;var _a$6;const visitorsByTypeId$1={},vectorPrototypesByTypeId$1={};let Vector$2=class ho{constructor(e){var o,d,h;const g=e[0]instanceof ho?e.flatMap($=>$.data):e;if(g.length===0||g.some($=>!($ instanceof Data$1)))throw new TypeError("Vector constructor expects an Array of Data instances.");const b=(o=g[0])===null||o===void 0?void 0:o.type;switch(g.length){case 0:this._offsets=[0];break;case 1:{const{get:$,set:j,indexOf:et,byteLength:tt}=visitorsByTypeId$1[b.typeId],nt=g[0];this.isValid=rt=>isChunkedValid$1(nt,rt),this.get=rt=>$(nt,rt),this.set=(rt,ot)=>j(nt,rt,ot),this.indexOf=rt=>et(nt,rt),this.getByteLength=rt=>tt(nt,rt),this._offsets=[0,nt.length];break}default:Object.setPrototypeOf(this,vectorPrototypesByTypeId$1[b.typeId]),this._offsets=computeChunkOffsets$1(g);break}this.data=g,this.type=b,this.stride=strideForType$1(b),this.numChildren=(h=(d=b.children)===null||d===void 0?void 0:d.length)!==null&&h!==void 0?h:0,this.length=this._offsets[this._offsets.length-1]}get byteLength(){return this._byteLength===-1&&(this._byteLength=this.data.reduce((e,o)=>e+o.byteLength,0)),this._byteLength}get nullCount(){return this._nullCount===-1&&(this._nullCount=computeChunkNullCounts$1(this.data)),this._nullCount}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${Type$3[this.type.typeId]}Vector`}isValid(e){return!1}get(e){return null}set(e,o){}indexOf(e,o){return-1}includes(e,o){return this.indexOf(e,o)>0}getByteLength(e){return 0}[Symbol.iterator](){return instance$a.visit(this)}concat(...e){return new ho(this.data.concat(e.flatMap(o=>o.data).flat(Number.POSITIVE_INFINITY)))}slice(e,o){return new ho(clampRange$1(this,e,o,({data:d,_offsets:h},g,b)=>sliceChunks$1(d,h,g,b)))}toJSON(){return[...this]}toArray(){const{type:e,data:o,length:d,stride:h,ArrayType:g}=this;switch(e.typeId){case Type$3.Int:case Type$3.Float:case Type$3.Decimal:case Type$3.Time:case Type$3.Timestamp:switch(o.length){case 0:return new g;case 1:return o[0].values.subarray(0,d*h);default:return o.reduce((b,{values:$,length:j})=>(b.array.set($.subarray(0,j*h),b.offset),b.offset+=j*h,b),{array:new g(d*h),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(e){var o;return this.getChildAt((o=this.type.children)===null||o===void 0?void 0:o.findIndex(d=>d.name===e))}getChildAt(e){return e>-1&&e<this.numChildren?new ho(this.data.map(({children:o})=>o[e])):null}get isMemoized(){return DataType$1.isDictionary(this.type)?this.data[0].dictionary.isMemoized:!1}memoize(){if(DataType$1.isDictionary(this.type)){const e=new MemoizedVector$1(this.data[0].dictionary),o=this.data.map(d=>{const h=d.clone();return h.dictionary=e,h});return new ho(o)}return new MemoizedVector$1(this)}unmemoize(){if(DataType$1.isDictionary(this.type)&&this.isMemoized){const e=this.data[0].dictionary.unmemoize(),o=this.data.map(d=>{const h=d.clone();return h.dictionary=e,h});return new ho(o)}return this}};_a$6=Symbol.toStringTag;Vector$2[_a$6]=(i=>{i.type=DataType$1.prototype,i.data=[],i.length=0,i.stride=1,i.numChildren=0,i._nullCount=-1,i._byteLength=-1,i._offsets=new Uint32Array([0]),i[Symbol.isConcatSpreadable]=!0;const e=Object.keys(Type$3).map(o=>Type$3[o]).filter(o=>typeof o=="number"&&o!==Type$3.NONE);for(const o of e){const d=instance$c.getVisitFnByTypeId(o),h=instance$d.getVisitFnByTypeId(o),g=instance$b.getVisitFnByTypeId(o),b=instance$9.getVisitFnByTypeId(o);visitorsByTypeId$1[o]={get:d,set:h,indexOf:g,byteLength:b},vectorPrototypesByTypeId$1[o]=Object.create(i,{isValid:{value:wrapChunkedCall1$1(isChunkedValid$1)},get:{value:wrapChunkedCall1$1(instance$c.getVisitFnByTypeId(o))},set:{value:wrapChunkedCall2$1(instance$d.getVisitFnByTypeId(o))},indexOf:{value:wrapChunkedIndexOf$1(instance$b.getVisitFnByTypeId(o))},getByteLength:{value:wrapChunkedCall1$1(instance$9.getVisitFnByTypeId(o))}})}return"Vector"})(Vector$2.prototype);let MemoizedVector$1=class ku extends Vector$2{constructor(e){super(e.data);const o=this.get,d=this.set,h=this.slice,g=new Array(this.length);Object.defineProperty(this,"get",{value(b){const $=g[b];if($!==void 0)return $;const j=o.call(this,b);return g[b]=j,j}}),Object.defineProperty(this,"set",{value(b,$){d.call(this,b,$),g[b]=$}}),Object.defineProperty(this,"slice",{value:(b,$)=>new ku(h.call(this,b,$))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new Vector$2(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}},Block$1=class{constructor(){this.bb=null,this.bb_pos=0}__init(e,o){return this.bb_pos=e,this.bb=o,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(e,o,d,h){return e.prep(8,24),e.writeInt64(h),e.pad(4),e.writeInt32(d),e.writeInt64(o),e.offset()}};const SIZEOF_SHORT$1=2,SIZEOF_INT$1=4,FILE_IDENTIFIER_LENGTH$1=4,SIZE_PREFIX_LENGTH$1=4,int32$1=new Int32Array(2),float32$1=new Float32Array(int32$1.buffer),float64$1=new Float64Array(int32$1.buffer),isLittleEndian$1=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;let Long$3=class Kl{constructor(e,o){this.low=e|0,this.high=o|0}static create(e,o){return e==0&&o==0?Kl.ZERO:new Kl(e,o)}toFloat64(){return(this.low>>>0)+this.high*4294967296}equals(e){return this.low==e.low&&this.high==e.high}};Long$3.ZERO=new Long$3(0,0);var Encoding$1;(function(i){i[i.UTF8_BYTES=1]="UTF8_BYTES",i[i.UTF16_STRING=2]="UTF16_STRING"})(Encoding$1||(Encoding$1={}));let ByteBuffer$5=class Lu{constructor(e){this.bytes_=e,this.position_=0}static allocate(e){return new Lu(new Uint8Array(e))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(e){this.position_=e}capacity(){return this.bytes_.length}readInt8(e){return this.readUint8(e)<<24>>24}readUint8(e){return this.bytes_[e]}readInt16(e){return this.readUint16(e)<<16>>16}readUint16(e){return this.bytes_[e]|this.bytes_[e+1]<<8}readInt32(e){return this.bytes_[e]|this.bytes_[e+1]<<8|this.bytes_[e+2]<<16|this.bytes_[e+3]<<24}readUint32(e){return this.readInt32(e)>>>0}readInt64(e){return new Long$3(this.readInt32(e),this.readInt32(e+4))}readUint64(e){return new Long$3(this.readUint32(e),this.readUint32(e+4))}readFloat32(e){return int32$1[0]=this.readInt32(e),float32$1[0]}readFloat64(e){return int32$1[isLittleEndian$1?0:1]=this.readInt32(e),int32$1[isLittleEndian$1?1:0]=this.readInt32(e+4),float64$1[0]}writeInt8(e,o){this.bytes_[e]=o}writeUint8(e,o){this.bytes_[e]=o}writeInt16(e,o){this.bytes_[e]=o,this.bytes_[e+1]=o>>8}writeUint16(e,o){this.bytes_[e]=o,this.bytes_[e+1]=o>>8}writeInt32(e,o){this.bytes_[e]=o,this.bytes_[e+1]=o>>8,this.bytes_[e+2]=o>>16,this.bytes_[e+3]=o>>24}writeUint32(e,o){this.bytes_[e]=o,this.bytes_[e+1]=o>>8,this.bytes_[e+2]=o>>16,this.bytes_[e+3]=o>>24}writeInt64(e,o){this.writeInt32(e,o.low),this.writeInt32(e+4,o.high)}writeUint64(e,o){this.writeUint32(e,o.low),this.writeUint32(e+4,o.high)}writeFloat32(e,o){float32$1[0]=o,this.writeInt32(e,int32$1[0])}writeFloat64(e,o){float64$1[0]=o,this.writeInt32(e,int32$1[isLittleEndian$1?0:1]),this.writeInt32(e+4,int32$1[isLittleEndian$1?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+SIZEOF_INT$1+FILE_IDENTIFIER_LENGTH$1)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let e="";for(let o=0;o<FILE_IDENTIFIER_LENGTH$1;o++)e+=String.fromCharCode(this.readInt8(this.position_+SIZEOF_INT$1+o));return e}__offset(e,o){const d=e-this.readInt32(e);return o<this.readInt16(d)?this.readInt16(d+o):0}__union(e,o){return e.bb_pos=o+this.readInt32(o),e.bb=this,e}__string(e,o){e+=this.readInt32(e);const d=this.readInt32(e);let h="",g=0;if(e+=SIZEOF_INT$1,o===Encoding$1.UTF8_BYTES)return this.bytes_.subarray(e,e+d);for(;g<d;){let b;const $=this.readUint8(e+g++);if($<192)b=$;else{const j=this.readUint8(e+g++);if($<224)b=($&31)<<6|j&63;else{const et=this.readUint8(e+g++);if($<240)b=($&15)<<12|(j&63)<<6|et&63;else{const tt=this.readUint8(e+g++);b=($&7)<<18|(j&63)<<12|(et&63)<<6|tt&63}}}b<65536?h+=String.fromCharCode(b):(b-=65536,h+=String.fromCharCode((b>>10)+55296,(b&1023)+56320))}return h}__union_with_string(e,o){return typeof e=="string"?this.__string(o):this.__union(e,o)}__indirect(e){return e+this.readInt32(e)}__vector(e){return e+this.readInt32(e)+SIZEOF_INT$1}__vector_len(e){return this.readInt32(e+this.readInt32(e))}__has_identifier(e){if(e.length!=FILE_IDENTIFIER_LENGTH$1)throw new Error("FlatBuffers: file identifier must be length "+FILE_IDENTIFIER_LENGTH$1);for(let o=0;o<FILE_IDENTIFIER_LENGTH$1;o++)if(e.charCodeAt(o)!=this.readInt8(this.position()+SIZEOF_INT$1+o))return!1;return!0}createLong(e,o){return Long$3.create(e,o)}createScalarList(e,o){const d=[];for(let h=0;h<o;++h)e(h)!==null&&d.push(e(h));return d}createObjList(e,o){const d=[];for(let h=0;h<o;++h){const g=e(h);g!==null&&d.push(g.unpack())}return d}},Builder$5=class ju{constructor(e){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null;let o;e?o=e:o=1024,this.bb=ByteBuffer$5.allocate(o),this.space=o}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(e){this.force_defaults=e}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(e,o){e>this.minalign&&(this.minalign=e);const d=~(this.bb.capacity()-this.space+o)+1&e-1;for(;this.space<d+e+o;){const h=this.bb.capacity();this.bb=ju.growByteBuffer(this.bb),this.space+=this.bb.capacity()-h}this.pad(d)}pad(e){for(let o=0;o<e;o++)this.bb.writeInt8(--this.space,0)}writeInt8(e){this.bb.writeInt8(this.space-=1,e)}writeInt16(e){this.bb.writeInt16(this.space-=2,e)}writeInt32(e){this.bb.writeInt32(this.space-=4,e)}writeInt64(e){this.bb.writeInt64(this.space-=8,e)}writeFloat32(e){this.bb.writeFloat32(this.space-=4,e)}writeFloat64(e){this.bb.writeFloat64(this.space-=8,e)}addInt8(e){this.prep(1,0),this.writeInt8(e)}addInt16(e){this.prep(2,0),this.writeInt16(e)}addInt32(e){this.prep(4,0),this.writeInt32(e)}addInt64(e){this.prep(8,0),this.writeInt64(e)}addFloat32(e){this.prep(4,0),this.writeFloat32(e)}addFloat64(e){this.prep(8,0),this.writeFloat64(e)}addFieldInt8(e,o,d){(this.force_defaults||o!=d)&&(this.addInt8(o),this.slot(e))}addFieldInt16(e,o,d){(this.force_defaults||o!=d)&&(this.addInt16(o),this.slot(e))}addFieldInt32(e,o,d){(this.force_defaults||o!=d)&&(this.addInt32(o),this.slot(e))}addFieldInt64(e,o,d){(this.force_defaults||!o.equals(d))&&(this.addInt64(o),this.slot(e))}addFieldFloat32(e,o,d){(this.force_defaults||o!=d)&&(this.addFloat32(o),this.slot(e))}addFieldFloat64(e,o,d){(this.force_defaults||o!=d)&&(this.addFloat64(o),this.slot(e))}addFieldOffset(e,o,d){(this.force_defaults||o!=d)&&(this.addOffset(o),this.slot(e))}addFieldStruct(e,o,d){o!=d&&(this.nested(o),this.slot(e))}nested(e){if(e!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")}slot(e){this.vtable!==null&&(this.vtable[e]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(e){const o=e.capacity();if(o&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const d=o<<1,h=ByteBuffer$5.allocate(d);return h.setPosition(d-o),h.bytes().set(e.bytes(),d-o),h}addOffset(e){this.prep(SIZEOF_INT$1,0),this.writeInt32(this.offset()-e+SIZEOF_INT$1)}startObject(e){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=e;for(let o=0;o<e;o++)this.vtable[o]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const e=this.offset();let o=this.vtable_in_use-1;for(;o>=0&&this.vtable[o]==0;o--);const d=o+1;for(;o>=0;o--)this.addInt16(this.vtable[o]!=0?e-this.vtable[o]:0);const h=2;this.addInt16(e-this.object_start);const g=(d+h)*SIZEOF_SHORT$1;this.addInt16(g);let b=0;const $=this.space;e:for(o=0;o<this.vtables.length;o++){const j=this.bb.capacity()-this.vtables[o];if(g==this.bb.readInt16(j)){for(let et=SIZEOF_SHORT$1;et<g;et+=SIZEOF_SHORT$1)if(this.bb.readInt16($+et)!=this.bb.readInt16(j+et))continue e;b=this.vtables[o];break}}return b?(this.space=this.bb.capacity()-e,this.bb.writeInt32(this.space,b-e)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-e,this.offset()-e)),this.isNested=!1,e}finish(e,o,d){const h=d?SIZE_PREFIX_LENGTH$1:0;if(o){const g=o;if(this.prep(this.minalign,SIZEOF_INT$1+FILE_IDENTIFIER_LENGTH$1+h),g.length!=FILE_IDENTIFIER_LENGTH$1)throw new Error("FlatBuffers: file identifier must be length "+FILE_IDENTIFIER_LENGTH$1);for(let b=FILE_IDENTIFIER_LENGTH$1-1;b>=0;b--)this.writeInt8(g.charCodeAt(b))}this.prep(this.minalign,SIZEOF_INT$1+h),this.addOffset(e),h&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(e,o){this.finish(e,o,!0)}requiredField(e,o){const d=this.bb.capacity()-e,h=d-this.bb.readInt32(d);if(!(this.bb.readInt16(h+o)!=0))throw new Error("FlatBuffers: field "+o+" must be set")}startVector(e,o,d){this.notNested(),this.vector_num_elems=o,this.prep(SIZEOF_INT$1,e*o),this.prep(d,e*o)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(e){if(!e)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(e))return this.string_maps.get(e);const o=this.createString(e);return this.string_maps.set(e,o),o}createString(e){if(!e)return 0;let o;if(e instanceof Uint8Array)o=e;else{o=[];let d=0;for(;d<e.length;){let h;const g=e.charCodeAt(d++);if(g<55296||g>=56320)h=g;else{const b=e.charCodeAt(d++);h=(g<<10)+b+-56613888}h<128?o.push(h):(h<2048?o.push(h>>6&31|192):(h<65536?o.push(h>>12&15|224):o.push(h>>18&7|240,h>>12&63|128),o.push(h>>6&63|128)),o.push(h&63|128))}}this.addInt8(0),this.startVector(1,o.length,1),this.bb.setPosition(this.space-=o.length);for(let d=0,h=this.space,g=this.bb.bytes();d<o.length;d++)g[h++]=o[d];return this.endVector()}createLong(e,o){return Long$3.create(e,o)}createObjectOffset(e){return e===null?0:typeof e=="string"?this.createString(e):e.pack(this)}createObjectOffsetList(e){const o=[];for(let d=0;d<e.length;++d){const h=e[d];if(h!==null)o.push(this.createObjectOffset(h));else throw new Error("FlatBuffers: Argument for createObjectOffsetList cannot contain null.")}return o}createStructOffsetList(e,o){return o(this,e.length),this.createObjectOffsetList(e),this.endVector()}},KeyValue$1=class po{constructor(){this.bb=null,this.bb_pos=0}__init(e,o){return this.bb_pos=e,this.bb=o,this}static getRootAsKeyValue(e,o){return(o||new po).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsKeyValue(e,o){return e.setPosition(e.position()+SIZE_PREFIX_LENGTH$1),(o||new po).__init(e.readInt32(e.position())+e.position(),e)}key(e){const o=this.bb.__offset(this.bb_pos,4);return o?this.bb.__string(this.bb_pos+o,e):null}value(e){const o=this.bb.__offset(this.bb_pos,6);return o?this.bb.__string(this.bb_pos+o,e):null}static startKeyValue(e){e.startObject(2)}static addKey(e,o){e.addFieldOffset(0,o,0)}static addValue(e,o){e.addFieldOffset(1,o,0)}static endKeyValue(e){return e.endObject()}static createKeyValue(e,o,d){return po.startKeyValue(e),po.addKey(e,o),po.addValue(e,d),po.endKeyValue(e)}};var MetadataVersion$2;(function(i){i[i.V1=0]="V1",i[i.V2=1]="V2",i[i.V3=2]="V3",i[i.V4=3]="V4",i[i.V5=4]="V5"})(MetadataVersion$2||(MetadataVersion$2={}));var Endianness$1;(function(i){i[i.Little=0]="Little",i[i.Big=1]="Big"})(Endianness$1||(Endianness$1={}));var DictionaryKind$1;(function(i){i[i.DenseArray=0]="DenseArray"})(DictionaryKind$1||(DictionaryKind$1={}));let Int$1=class go{constructor(){this.bb=null,this.bb_pos=0}__init(e,o){return this.bb_pos=e,this.bb=o,this}static getRootAsInt(e,o){return(o||new go).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsInt(e,o){return e.setPosition(e.position()+SIZE_PREFIX_LENGTH$1),(o||new go).__init(e.readInt32(e.position())+e.position(),e)}bitWidth(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}isSigned(){const e=this.bb.__offset(this.bb_pos,6);return e?!!this.bb.readInt8(this.bb_pos+e):!1}static startInt(e){e.startObject(2)}static addBitWidth(e,o){e.addFieldInt32(0,o,0)}static addIsSigned(e,o){e.addFieldInt8(1,+o,0)}static endInt(e){return e.endObject()}static createInt(e,o,d){return go.startInt(e),go.addBitWidth(e,o),go.addIsSigned(e,d),go.endInt(e)}},DictionaryEncoding$1=class Zl{constructor(){this.bb=null,this.bb_pos=0}__init(e,o){return this.bb_pos=e,this.bb=o,this}static getRootAsDictionaryEncoding(e,o){return(o||new Zl).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDictionaryEncoding(e,o){return e.setPosition(e.position()+SIZE_PREFIX_LENGTH$1),(o||new Zl).__init(e.readInt32(e.position())+e.position(),e)}id(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt64(this.bb_pos+e):this.bb.createLong(0,0)}indexType(e){const o=this.bb.__offset(this.bb_pos,6);return o?(e||new Int$1).__init(this.bb.__indirect(this.bb_pos+o),this.bb):null}isOrdered(){const e=this.bb.__offset(this.bb_pos,8);return e?!!this.bb.readInt8(this.bb_pos+e):!1}dictionaryKind(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readInt16(this.bb_pos+e):DictionaryKind$1.DenseArray}static startDictionaryEncoding(e){e.startObject(4)}static addId(e,o){e.addFieldInt64(0,o,e.createLong(0,0))}static addIndexType(e,o){e.addFieldOffset(1,o,0)}static addIsOrdered(e,o){e.addFieldInt8(2,+o,0)}static addDictionaryKind(e,o){e.addFieldInt16(3,o,DictionaryKind$1.DenseArray)}static endDictionaryEncoding(e){return e.endObject()}},Binary$2=class Bs{constructor(){this.bb=null,this.bb_pos=0}__init(e,o){return this.bb_pos=e,this.bb=o,this}static getRootAsBinary(e,o){return(o||new Bs).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsBinary(e,o){return e.setPosition(e.position()+SIZE_PREFIX_LENGTH$1),(o||new Bs).__init(e.readInt32(e.position())+e.position(),e)}static startBinary(e){e.startObject(0)}static endBinary(e){return e.endObject()}static createBinary(e){return Bs.startBinary(e),Bs.endBinary(e)}},Bool$2=class Cs{constructor(){this.bb=null,this.bb_pos=0}__init(e,o){return this.bb_pos=e,this.bb=o,this}static getRootAsBool(e,o){return(o||new Cs).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsBool(e,o){return e.setPosition(e.position()+SIZE_PREFIX_LENGTH$1),(o||new Cs).__init(e.readInt32(e.position())+e.position(),e)}static startBool(e){e.startObject(0)}static endBool(e){return e.endObject()}static createBool(e){return Cs.startBool(e),Cs.endBool(e)}};var DateUnit$2;(function(i){i[i.DAY=0]="DAY",i[i.MILLISECOND=1]="MILLISECOND"})(DateUnit$2||(DateUnit$2={}));let Date$2=class Bo{constructor(){this.bb=null,this.bb_pos=0}__init(e,o){return this.bb_pos=e,this.bb=o,this}static getRootAsDate(e,o){return(o||new Bo).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDate(e,o){return e.setPosition(e.position()+SIZE_PREFIX_LENGTH$1),(o||new Bo).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):DateUnit$2.MILLISECOND}static startDate(e){e.startObject(1)}static addUnit(e,o){e.addFieldInt16(0,o,DateUnit$2.MILLISECOND)}static endDate(e){return e.endObject()}static createDate(e,o){return Bo.startDate(e),Bo.addUnit(e,o),Bo.endDate(e)}},Decimal$2=class oo{constructor(){this.bb=null,this.bb_pos=0}__init(e,o){return this.bb_pos=e,this.bb=o,this}static getRootAsDecimal(e,o){return(o||new oo).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDecimal(e,o){return e.setPosition(e.position()+SIZE_PREFIX_LENGTH$1),(o||new oo).__init(e.readInt32(e.position())+e.position(),e)}precision(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}scale(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt32(this.bb_pos+e):0}bitWidth(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readInt32(this.bb_pos+e):128}static startDecimal(e){e.startObject(3)}static addPrecision(e,o){e.addFieldInt32(0,o,0)}static addScale(e,o){e.addFieldInt32(1,o,0)}static addBitWidth(e,o){e.addFieldInt32(2,o,128)}static endDecimal(e){return e.endObject()}static createDecimal(e,o,d,h){return oo.startDecimal(e),oo.addPrecision(e,o),oo.addScale(e,d),oo.addBitWidth(e,h),oo.endDecimal(e)}};var TimeUnit$2;(function(i){i[i.SECOND=0]="SECOND",i[i.MILLISECOND=1]="MILLISECOND",i[i.MICROSECOND=2]="MICROSECOND",i[i.NANOSECOND=3]="NANOSECOND"})(TimeUnit$2||(TimeUnit$2={}));let FixedSizeBinary$2=class jo{constructor(){this.bb=null,this.bb_pos=0}__init(e,o){return this.bb_pos=e,this.bb=o,this}static getRootAsFixedSizeBinary(e,o){return(o||new jo).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFixedSizeBinary(e,o){return e.setPosition(e.position()+SIZE_PREFIX_LENGTH$1),(o||new jo).__init(e.readInt32(e.position())+e.position(),e)}byteWidth(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}static startFixedSizeBinary(e){e.startObject(1)}static addByteWidth(e,o){e.addFieldInt32(0,o,0)}static endFixedSizeBinary(e){return e.endObject()}static createFixedSizeBinary(e,o){return jo.startFixedSizeBinary(e),jo.addByteWidth(e,o),jo.endFixedSizeBinary(e)}},FixedSizeList$2=class Wo{constructor(){this.bb=null,this.bb_pos=0}__init(e,o){return this.bb_pos=e,this.bb=o,this}static getRootAsFixedSizeList(e,o){return(o||new Wo).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFixedSizeList(e,o){return e.setPosition(e.position()+SIZE_PREFIX_LENGTH$1),(o||new Wo).__init(e.readInt32(e.position())+e.position(),e)}listSize(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}static startFixedSizeList(e){e.startObject(1)}static addListSize(e,o){e.addFieldInt32(0,o,0)}static endFixedSizeList(e){return e.endObject()}static createFixedSizeList(e,o){return Wo.startFixedSizeList(e),Wo.addListSize(e,o),Wo.endFixedSizeList(e)}};var Precision$2;(function(i){i[i.HALF=0]="HALF",i[i.SINGLE=1]="SINGLE",i[i.DOUBLE=2]="DOUBLE"})(Precision$2||(Precision$2={}));let FloatingPoint$1=class Go{constructor(){this.bb=null,this.bb_pos=0}__init(e,o){return this.bb_pos=e,this.bb=o,this}static getRootAsFloatingPoint(e,o){return(o||new Go).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFloatingPoint(e,o){return e.setPosition(e.position()+SIZE_PREFIX_LENGTH$1),(o||new Go).__init(e.readInt32(e.position())+e.position(),e)}precision(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):Precision$2.HALF}static startFloatingPoint(e){e.startObject(1)}static addPrecision(e,o){e.addFieldInt16(0,o,Precision$2.HALF)}static endFloatingPoint(e){return e.endObject()}static createFloatingPoint(e,o){return Go.startFloatingPoint(e),Go.addPrecision(e,o),Go.endFloatingPoint(e)}};var IntervalUnit$2;(function(i){i[i.YEAR_MONTH=0]="YEAR_MONTH",i[i.DAY_TIME=1]="DAY_TIME",i[i.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(IntervalUnit$2||(IntervalUnit$2={}));let Interval$1=class bs{constructor(){this.bb=null,this.bb_pos=0}__init(e,o){return this.bb_pos=e,this.bb=o,this}static getRootAsInterval(e,o){return(o||new bs).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsInterval(e,o){return e.setPosition(e.position()+SIZE_PREFIX_LENGTH$1),(o||new bs).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):IntervalUnit$2.YEAR_MONTH}static startInterval(e){e.startObject(1)}static addUnit(e,o){e.addFieldInt16(0,o,IntervalUnit$2.YEAR_MONTH)}static endInterval(e){return e.endObject()}static createInterval(e,o){return bs.startInterval(e),bs.addUnit(e,o),bs.endInterval(e)}},List$2=class Fs{constructor(){this.bb=null,this.bb_pos=0}__init(e,o){return this.bb_pos=e,this.bb=o,this}static getRootAsList(e,o){return(o||new Fs).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsList(e,o){return e.setPosition(e.position()+SIZE_PREFIX_LENGTH$1),(o||new Fs).__init(e.readInt32(e.position())+e.position(),e)}static startList(e){e.startObject(0)}static endList(e){return e.endObject()}static createList(e){return Fs.startList(e),Fs.endList(e)}},Map$2=class $s{constructor(){this.bb=null,this.bb_pos=0}__init(e,o){return this.bb_pos=e,this.bb=o,this}static getRootAsMap(e,o){return(o||new $s).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsMap(e,o){return e.setPosition(e.position()+SIZE_PREFIX_LENGTH$1),(o||new $s).__init(e.readInt32(e.position())+e.position(),e)}keysSorted(){const e=this.bb.__offset(this.bb_pos,4);return e?!!this.bb.readInt8(this.bb_pos+e):!1}static startMap(e){e.startObject(1)}static addKeysSorted(e,o){e.addFieldInt8(0,+o,0)}static endMap(e){return e.endObject()}static createMap(e,o){return $s.startMap(e),$s.addKeysSorted(e,o),$s.endMap(e)}},Null$2=class ks{constructor(){this.bb=null,this.bb_pos=0}__init(e,o){return this.bb_pos=e,this.bb=o,this}static getRootAsNull(e,o){return(o||new ks).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsNull(e,o){return e.setPosition(e.position()+SIZE_PREFIX_LENGTH$1),(o||new ks).__init(e.readInt32(e.position())+e.position(),e)}static startNull(e){e.startObject(0)}static endNull(e){return e.endObject()}static createNull(e){return ks.startNull(e),ks.endNull(e)}},Struct_$1=class Ls{constructor(){this.bb=null,this.bb_pos=0}__init(e,o){return this.bb_pos=e,this.bb=o,this}static getRootAsStruct_(e,o){return(o||new Ls).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsStruct_(e,o){return e.setPosition(e.position()+SIZE_PREFIX_LENGTH$1),(o||new Ls).__init(e.readInt32(e.position())+e.position(),e)}static startStruct_(e){e.startObject(0)}static endStruct_(e){return e.endObject()}static createStruct_(e){return Ls.startStruct_(e),Ls.endStruct_(e)}},Time$1=class yo{constructor(){this.bb=null,this.bb_pos=0}__init(e,o){return this.bb_pos=e,this.bb=o,this}static getRootAsTime(e,o){return(o||new yo).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsTime(e,o){return e.setPosition(e.position()+SIZE_PREFIX_LENGTH$1),(o||new yo).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):TimeUnit$2.MILLISECOND}bitWidth(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt32(this.bb_pos+e):32}static startTime(e){e.startObject(2)}static addUnit(e,o){e.addFieldInt16(0,o,TimeUnit$2.MILLISECOND)}static addBitWidth(e,o){e.addFieldInt32(1,o,32)}static endTime(e){return e.endObject()}static createTime(e,o,d){return yo.startTime(e),yo.addUnit(e,o),yo.addBitWidth(e,d),yo.endTime(e)}},Timestamp$1=class mo{constructor(){this.bb=null,this.bb_pos=0}__init(e,o){return this.bb_pos=e,this.bb=o,this}static getRootAsTimestamp(e,o){return(o||new mo).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsTimestamp(e,o){return e.setPosition(e.position()+SIZE_PREFIX_LENGTH$1),(o||new mo).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):TimeUnit$2.SECOND}timezone(e){const o=this.bb.__offset(this.bb_pos,6);return o?this.bb.__string(this.bb_pos+o,e):null}static startTimestamp(e){e.startObject(2)}static addUnit(e,o){e.addFieldInt16(0,o,TimeUnit$2.SECOND)}static addTimezone(e,o){e.addFieldOffset(1,o,0)}static endTimestamp(e){return e.endObject()}static createTimestamp(e,o,d){return mo.startTimestamp(e),mo.addUnit(e,o),mo.addTimezone(e,d),mo.endTimestamp(e)}};var UnionMode$2;(function(i){i[i.Sparse=0]="Sparse",i[i.Dense=1]="Dense"})(UnionMode$2||(UnionMode$2={}));let Union$1=class bo{constructor(){this.bb=null,this.bb_pos=0}__init(e,o){return this.bb_pos=e,this.bb=o,this}static getRootAsUnion(e,o){return(o||new bo).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsUnion(e,o){return e.setPosition(e.position()+SIZE_PREFIX_LENGTH$1),(o||new bo).__init(e.readInt32(e.position())+e.position(),e)}mode(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):UnionMode$2.Sparse}typeIds(e){const o=this.bb.__offset(this.bb_pos,6);return o?this.bb.readInt32(this.bb.__vector(this.bb_pos+o)+e*4):0}typeIdsLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}typeIdsArray(){const e=this.bb.__offset(this.bb_pos,6);return e?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}static startUnion(e){e.startObject(2)}static addMode(e,o){e.addFieldInt16(0,o,UnionMode$2.Sparse)}static addTypeIds(e,o){e.addFieldOffset(1,o,0)}static createTypeIdsVector(e,o){e.startVector(4,o.length,4);for(let d=o.length-1;d>=0;d--)e.addInt32(o[d]);return e.endVector()}static startTypeIdsVector(e,o){e.startVector(4,o,4)}static endUnion(e){return e.endObject()}static createUnion(e,o,d){return bo.startUnion(e),bo.addMode(e,o),bo.addTypeIds(e,d),bo.endUnion(e)}},Utf8$2=class js{constructor(){this.bb=null,this.bb_pos=0}__init(e,o){return this.bb_pos=e,this.bb=o,this}static getRootAsUtf8(e,o){return(o||new js).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsUtf8(e,o){return e.setPosition(e.position()+SIZE_PREFIX_LENGTH$1),(o||new js).__init(e.readInt32(e.position())+e.position(),e)}static startUtf8(e){e.startObject(0)}static endUtf8(e){return e.endObject()}static createUtf8(e){return js.startUtf8(e),js.endUtf8(e)}};var Type$2;(function(i){i[i.NONE=0]="NONE",i[i.Null=1]="Null",i[i.Int=2]="Int",i[i.FloatingPoint=3]="FloatingPoint",i[i.Binary=4]="Binary",i[i.Utf8=5]="Utf8",i[i.Bool=6]="Bool",i[i.Decimal=7]="Decimal",i[i.Date=8]="Date",i[i.Time=9]="Time",i[i.Timestamp=10]="Timestamp",i[i.Interval=11]="Interval",i[i.List=12]="List",i[i.Struct_=13]="Struct_",i[i.Union=14]="Union",i[i.FixedSizeBinary=15]="FixedSizeBinary",i[i.FixedSizeList=16]="FixedSizeList",i[i.Map=17]="Map",i[i.Duration=18]="Duration",i[i.LargeBinary=19]="LargeBinary",i[i.LargeUtf8=20]="LargeUtf8",i[i.LargeList=21]="LargeList"})(Type$2||(Type$2={}));let Field$3=class ga{constructor(){this.bb=null,this.bb_pos=0}__init(e,o){return this.bb_pos=e,this.bb=o,this}static getRootAsField(e,o){return(o||new ga).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsField(e,o){return e.setPosition(e.position()+SIZE_PREFIX_LENGTH$1),(o||new ga).__init(e.readInt32(e.position())+e.position(),e)}name(e){const o=this.bb.__offset(this.bb_pos,4);return o?this.bb.__string(this.bb_pos+o,e):null}nullable(){const e=this.bb.__offset(this.bb_pos,6);return e?!!this.bb.readInt8(this.bb_pos+e):!1}typeType(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readUint8(this.bb_pos+e):Type$2.NONE}type(e){const o=this.bb.__offset(this.bb_pos,10);return o?this.bb.__union(e,this.bb_pos+o):null}dictionary(e){const o=this.bb.__offset(this.bb_pos,12);return o?(e||new DictionaryEncoding$1).__init(this.bb.__indirect(this.bb_pos+o),this.bb):null}children(e,o){const d=this.bb.__offset(this.bb_pos,14);return d?(o||new ga).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+d)+e*4),this.bb):null}childrenLength(){const e=this.bb.__offset(this.bb_pos,14);return e?this.bb.__vector_len(this.bb_pos+e):0}customMetadata(e,o){const d=this.bb.__offset(this.bb_pos,16);return d?(o||new KeyValue$1).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+d)+e*4),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,16);return e?this.bb.__vector_len(this.bb_pos+e):0}static startField(e){e.startObject(7)}static addName(e,o){e.addFieldOffset(0,o,0)}static addNullable(e,o){e.addFieldInt8(1,+o,0)}static addTypeType(e,o){e.addFieldInt8(2,o,Type$2.NONE)}static addType(e,o){e.addFieldOffset(3,o,0)}static addDictionary(e,o){e.addFieldOffset(4,o,0)}static addChildren(e,o){e.addFieldOffset(5,o,0)}static createChildrenVector(e,o){e.startVector(4,o.length,4);for(let d=o.length-1;d>=0;d--)e.addOffset(o[d]);return e.endVector()}static startChildrenVector(e,o){e.startVector(4,o,4)}static addCustomMetadata(e,o){e.addFieldOffset(6,o,0)}static createCustomMetadataVector(e,o){e.startVector(4,o.length,4);for(let d=o.length-1;d>=0;d--)e.addOffset(o[d]);return e.endVector()}static startCustomMetadataVector(e,o){e.startVector(4,o,4)}static endField(e){return e.endObject()}},Schema$3=class Jr{constructor(){this.bb=null,this.bb_pos=0}__init(e,o){return this.bb_pos=e,this.bb=o,this}static getRootAsSchema(e,o){return(o||new Jr).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsSchema(e,o){return e.setPosition(e.position()+SIZE_PREFIX_LENGTH$1),(o||new Jr).__init(e.readInt32(e.position())+e.position(),e)}endianness(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):Endianness$1.Little}fields(e,o){const d=this.bb.__offset(this.bb_pos,6);return d?(o||new Field$3).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+d)+e*4),this.bb):null}fieldsLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}customMetadata(e,o){const d=this.bb.__offset(this.bb_pos,8);return d?(o||new KeyValue$1).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+d)+e*4),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}features(e){const o=this.bb.__offset(this.bb_pos,10);return o?this.bb.readInt64(this.bb.__vector(this.bb_pos+o)+e*8):this.bb.createLong(0,0)}featuresLength(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__vector_len(this.bb_pos+e):0}static startSchema(e){e.startObject(4)}static addEndianness(e,o){e.addFieldInt16(0,o,Endianness$1.Little)}static addFields(e,o){e.addFieldOffset(1,o,0)}static createFieldsVector(e,o){e.startVector(4,o.length,4);for(let d=o.length-1;d>=0;d--)e.addOffset(o[d]);return e.endVector()}static startFieldsVector(e,o){e.startVector(4,o,4)}static addCustomMetadata(e,o){e.addFieldOffset(2,o,0)}static createCustomMetadataVector(e,o){e.startVector(4,o.length,4);for(let d=o.length-1;d>=0;d--)e.addOffset(o[d]);return e.endVector()}static startCustomMetadataVector(e,o){e.startVector(4,o,4)}static addFeatures(e,o){e.addFieldOffset(3,o,0)}static createFeaturesVector(e,o){e.startVector(8,o.length,8);for(let d=o.length-1;d>=0;d--)e.addInt64(o[d]);return e.endVector()}static startFeaturesVector(e,o){e.startVector(8,o,8)}static endSchema(e){return e.endObject()}static finishSchemaBuffer(e,o){e.finish(o)}static finishSizePrefixedSchemaBuffer(e,o){e.finish(o,void 0,!0)}static createSchema(e,o,d,h,g){return Jr.startSchema(e),Jr.addEndianness(e,o),Jr.addFields(e,d),Jr.addCustomMetadata(e,h),Jr.addFeatures(e,g),Jr.endSchema(e)}},Footer$1=class Ql{constructor(){this.bb=null,this.bb_pos=0}__init(e,o){return this.bb_pos=e,this.bb=o,this}static getRootAsFooter(e,o){return(o||new Ql).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFooter(e,o){return e.setPosition(e.position()+SIZE_PREFIX_LENGTH$1),(o||new Ql).__init(e.readInt32(e.position())+e.position(),e)}version(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):MetadataVersion$2.V1}schema(e){const o=this.bb.__offset(this.bb_pos,6);return o?(e||new Schema$3).__init(this.bb.__indirect(this.bb_pos+o),this.bb):null}dictionaries(e,o){const d=this.bb.__offset(this.bb_pos,8);return d?(o||new Block$1).__init(this.bb.__vector(this.bb_pos+d)+e*24,this.bb):null}dictionariesLength(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}recordBatches(e,o){const d=this.bb.__offset(this.bb_pos,10);return d?(o||new Block$1).__init(this.bb.__vector(this.bb_pos+d)+e*24,this.bb):null}recordBatchesLength(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__vector_len(this.bb_pos+e):0}customMetadata(e,o){const d=this.bb.__offset(this.bb_pos,12);return d?(o||new KeyValue$1).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+d)+e*4),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__vector_len(this.bb_pos+e):0}static startFooter(e){e.startObject(5)}static addVersion(e,o){e.addFieldInt16(0,o,MetadataVersion$2.V1)}static addSchema(e,o){e.addFieldOffset(1,o,0)}static addDictionaries(e,o){e.addFieldOffset(2,o,0)}static startDictionariesVector(e,o){e.startVector(24,o,8)}static addRecordBatches(e,o){e.addFieldOffset(3,o,0)}static startRecordBatchesVector(e,o){e.startVector(24,o,8)}static addCustomMetadata(e,o){e.addFieldOffset(4,o,0)}static createCustomMetadataVector(e,o){e.startVector(4,o.length,4);for(let d=o.length-1;d>=0;d--)e.addOffset(o[d]);return e.endVector()}static startCustomMetadataVector(e,o){e.startVector(4,o,4)}static endFooter(e){return e.endObject()}static finishFooterBuffer(e,o){e.finish(o)}static finishSizePrefixedFooterBuffer(e,o){e.finish(o,void 0,!0)}},Schema$2=class So{constructor(e=[],o,d){this.fields=e||[],this.metadata=o||new Map,d||(d=generateDictionaryMap$1(e)),this.dictionaries=d}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(e=>e.name)}toString(){return`Schema<{ ${this.fields.map((e,o)=>`${o}: ${e}`).join(", ")} }>`}select(e){const o=new Set(e),d=this.fields.filter(h=>o.has(h.name));return new So(d,this.metadata)}selectAt(e){const o=e.map(d=>this.fields[d]).filter(Boolean);return new So(o,this.metadata)}assign(...e){const o=e[0]instanceof So?e[0]:Array.isArray(e[0])?new So(e[0]):new So(e),d=[...this.fields],h=mergeMaps$1(mergeMaps$1(new Map,this.metadata),o.metadata),g=o.fields.filter($=>{const j=d.findIndex(et=>et.name===$.name);return~j?(d[j]=$.clone({metadata:mergeMaps$1(mergeMaps$1(new Map,d[j].metadata),$.metadata)}))&&!1:!0}),b=generateDictionaryMap$1(g,new Map);return new So([...d,...g],h,new Map([...this.dictionaries,...b]))}};Schema$2.prototype.fields=null;Schema$2.prototype.metadata=null;Schema$2.prototype.dictionaries=null;let Field$2=class Jl{constructor(e,o,d=!1,h){this.name=e,this.type=o,this.nullable=d,this.metadata=h||new Map}static new(...e){let[o,d,h,g]=e;return e[0]&&typeof e[0]=="object"&&({name:o}=e[0],d===void 0&&(d=e[0].type),h===void 0&&(h=e[0].nullable),g===void 0&&(g=e[0].metadata)),new Jl(`${o}`,d,h,g)}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...e){let[o,d,h,g]=e;return!e[0]||typeof e[0]!="object"?[o=this.name,d=this.type,h=this.nullable,g=this.metadata]=e:{name:o=this.name,type:d=this.type,nullable:h=this.nullable,metadata:g=this.metadata}=e[0],Jl.new(o,d,h,g)}};Field$2.prototype.type=null;Field$2.prototype.name=null;Field$2.prototype.nullable=null;Field$2.prototype.metadata=null;function mergeMaps$1(i,e){return new Map([...i||new Map,...e||new Map])}function generateDictionaryMap$1(i,e=new Map){for(let o=-1,d=i.length;++o<d;){const g=i[o].type;if(DataType$1.isDictionary(g)){if(!e.has(g.id))e.set(g.id,g.dictionary);else if(e.get(g.id)!==g.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}g.children&&g.children.length>0&&generateDictionaryMap$1(g.children,e)}return e}var Long$2=Long$3,Builder$4=Builder$5,ByteBuffer$4=ByteBuffer$5;let Footer_$1=class{constructor(e,o=MetadataVersion$3.V4,d,h){this.schema=e,this.version=o,d&&(this._recordBatches=d),h&&(this._dictionaryBatches=h)}static decode(e){e=new ByteBuffer$4(toUint8Array$1(e));const o=Footer$1.getRootAsFooter(e),d=Schema$2.decode(o.schema());return new OffHeapFooter$1(d,o)}static encode(e){const o=new Builder$4,d=Schema$2.encode(o,e.schema);Footer$1.startRecordBatchesVector(o,e.numRecordBatches);for(const b of[...e.recordBatches()].slice().reverse())FileBlock$1.encode(o,b);const h=o.endVector();Footer$1.startDictionariesVector(o,e.numDictionaries);for(const b of[...e.dictionaryBatches()].slice().reverse())FileBlock$1.encode(o,b);const g=o.endVector();return Footer$1.startFooter(o),Footer$1.addSchema(o,d),Footer$1.addVersion(o,MetadataVersion$3.V4),Footer$1.addRecordBatches(o,h),Footer$1.addDictionaries(o,g),Footer$1.finishFooterBuffer(o,Footer$1.endFooter(o)),o.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}*recordBatches(){for(let e,o=-1,d=this.numRecordBatches;++o<d;)(e=this.getRecordBatch(o))&&(yield e)}*dictionaryBatches(){for(let e,o=-1,d=this.numDictionaries;++o<d;)(e=this.getDictionaryBatch(o))&&(yield e)}getRecordBatch(e){return e>=0&&e<this.numRecordBatches&&this._recordBatches[e]||null}getDictionaryBatch(e){return e>=0&&e<this.numDictionaries&&this._dictionaryBatches[e]||null}},OffHeapFooter$1=class extends Footer_$1{constructor(e,o){super(e,o.version()),this._footer=o}get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}getRecordBatch(e){if(e>=0&&e<this.numRecordBatches){const o=this._footer.recordBatches(e);if(o)return FileBlock$1.decode(o)}return null}getDictionaryBatch(e){if(e>=0&&e<this.numDictionaries){const o=this._footer.dictionaries(e);if(o)return FileBlock$1.decode(o)}return null}},FileBlock$1=class Uu{constructor(e,o,d){this.metaDataLength=e,this.offset=typeof d=="number"?d:d.low,this.bodyLength=typeof o=="number"?o:o.low}static decode(e){return new Uu(e.metaDataLength(),e.bodyLength(),e.offset())}static encode(e,o){const{metaDataLength:d}=o,h=new Long$2(o.offset,0),g=new Long$2(o.bodyLength,0);return Block$1.createBlock(e,h,d,g)}};const ITERATOR_DONE$1=Object.freeze({done:!0,value:void 0});let ArrowJSON$1=class{constructor(e){this._json=e}get schema(){return this._json.schema}get batches(){return this._json.batches||[]}get dictionaries(){return this._json.dictionaries||[]}},ReadableInterop$1=class{tee(){return this._getDOMStream().tee()}pipe(e,o){return this._getNodeStream().pipe(e,o)}pipeTo(e,o){return this._getDOMStream().pipeTo(e,o)}pipeThrough(e,o){return this._getDOMStream().pipeThrough(e,o)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}},AsyncQueue$1=class extends ReadableInterop$1{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(e=>this._closedPromiseResolve=e)}get closed(){return this._closedPromise}cancel(e){return __awaiter(this,void 0,void 0,function*(){yield this.return(e)})}write(e){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(e):this.resolvers.shift().resolve({done:!1,value:e}))}abort(e){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:e}:this.resolvers.shift().reject({done:!0,value:e}))}close(){if(this._closedPromiseResolve){const{resolvers:e}=this;for(;e.length>0;)e.shift().resolve(ITERATOR_DONE$1);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(e){return streamAdapters$1.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,e)}toNodeStream(e){return streamAdapters$1.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,e)}throw(e){return __awaiter(this,void 0,void 0,function*(){return yield this.abort(e),ITERATOR_DONE$1})}return(e){return __awaiter(this,void 0,void 0,function*(){return yield this.close(),ITERATOR_DONE$1})}read(e){return __awaiter(this,void 0,void 0,function*(){return(yield this.next(e,"read")).value})}peek(e){return __awaiter(this,void 0,void 0,function*(){return(yield this.next(e,"peek")).value})}next(...e){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((o,d)=>{this.resolvers.push({resolve:o,reject:d})}):Promise.resolve(ITERATOR_DONE$1)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}},AsyncByteQueue$1=class extends AsyncQueue$1{write(e){if((e=toUint8Array$1(e)).byteLength>0)return super.write(e)}toString(e=!1){return e?decodeUtf8$1(this.toUint8Array(!0)):this.toUint8Array(!1).then(decodeUtf8$1)}toUint8Array(e=!1){return e?joinUint8Arrays$1(this._values)[0]:__awaiter(this,void 0,void 0,function*(){var o,d;const h=[];let g=0;try{for(var b=__asyncValues(this),$;$=yield b.next(),!$.done;){const j=$.value;h.push(j),g+=j.byteLength}}catch(j){o={error:j}}finally{try{$&&!$.done&&(d=b.return)&&(yield d.call(b))}finally{if(o)throw o.error}}return joinUint8Arrays$1(h,g)[0]})}},ByteStream$1=class{constructor(e){e&&(this.source=new ByteStreamSource$1(streamAdapters$1.fromIterable(e)))}[Symbol.iterator](){return this}next(e){return this.source.next(e)}throw(e){return this.source.throw(e)}return(e){return this.source.return(e)}peek(e){return this.source.peek(e)}read(e){return this.source.read(e)}},AsyncByteStream$1=class Pu{constructor(e){e instanceof Pu?this.source=e.source:e instanceof AsyncByteQueue$1?this.source=new AsyncByteStreamSource$1(streamAdapters$1.fromAsyncIterable(e)):isReadableNodeStream$1(e)?this.source=new AsyncByteStreamSource$1(streamAdapters$1.fromNodeStream(e)):isReadableDOMStream$1(e)?this.source=new AsyncByteStreamSource$1(streamAdapters$1.fromDOMStream(e)):isFetchResponse$1(e)?this.source=new AsyncByteStreamSource$1(streamAdapters$1.fromDOMStream(e.body)):isIterable$2(e)?this.source=new AsyncByteStreamSource$1(streamAdapters$1.fromIterable(e)):isPromise$1(e)?this.source=new AsyncByteStreamSource$1(streamAdapters$1.fromAsyncIterable(e)):isAsyncIterable$1(e)&&(this.source=new AsyncByteStreamSource$1(streamAdapters$1.fromAsyncIterable(e)))}[Symbol.asyncIterator](){return this}next(e){return this.source.next(e)}throw(e){return this.source.throw(e)}return(e){return this.source.return(e)}get closed(){return this.source.closed}cancel(e){return this.source.cancel(e)}peek(e){return this.source.peek(e)}read(e){return this.source.read(e)}},ByteStreamSource$1=class{constructor(e){this.source=e}cancel(e){this.return(e)}peek(e){return this.next(e,"peek").value}read(e){return this.next(e,"read").value}next(e,o="read"){return this.source.next({cmd:o,size:e})}throw(e){return Object.create(this.source.throw&&this.source.throw(e)||ITERATOR_DONE$1)}return(e){return Object.create(this.source.return&&this.source.return(e)||ITERATOR_DONE$1)}},AsyncByteStreamSource$1=class{constructor(e){this.source=e,this._closedPromise=new Promise(o=>this._closedPromiseResolve=o)}cancel(e){return __awaiter(this,void 0,void 0,function*(){yield this.return(e)})}get closed(){return this._closedPromise}read(e){return __awaiter(this,void 0,void 0,function*(){return(yield this.next(e,"read")).value})}peek(e){return __awaiter(this,void 0,void 0,function*(){return(yield this.next(e,"peek")).value})}next(e,o="read"){return __awaiter(this,void 0,void 0,function*(){return yield this.source.next({cmd:o,size:e})})}throw(e){return __awaiter(this,void 0,void 0,function*(){const o=this.source.throw&&(yield this.source.throw(e))||ITERATOR_DONE$1;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(o)})}return(e){return __awaiter(this,void 0,void 0,function*(){const o=this.source.return&&(yield this.source.return(e))||ITERATOR_DONE$1;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(o)})}},RandomAccessFile$1=class extends ByteStream$1{constructor(e,o){super(),this.position=0,this.buffer=toUint8Array$1(e),this.size=typeof o>"u"?this.buffer.byteLength:o}readInt32(e){const{buffer:o,byteOffset:d}=this.readAt(e,4);return new DataView(o,d).getInt32(0,!0)}seek(e){return this.position=Math.min(e,this.size),e<this.size}read(e){const{buffer:o,size:d,position:h}=this;return o&&h<d?(typeof e!="number"&&(e=Number.POSITIVE_INFINITY),this.position=Math.min(d,h+Math.min(d-h,e)),o.subarray(h,this.position)):null}readAt(e,o){const d=this.buffer,h=Math.min(this.size,e+o);return d?d.subarray(e,h):new Uint8Array(o)}close(){this.buffer&&(this.buffer=null)}throw(e){return this.close(),{done:!0,value:e}}return(e){return this.close(),{done:!0,value:e}}},AsyncRandomAccessFile$1=class extends AsyncByteStream$1{constructor(e,o){super(),this.position=0,this._handle=e,typeof o=="number"?this.size=o:this._pending=__awaiter(this,void 0,void 0,function*(){this.size=(yield e.stat()).size,delete this._pending})}readInt32(e){return __awaiter(this,void 0,void 0,function*(){const{buffer:o,byteOffset:d}=yield this.readAt(e,4);return new DataView(o,d).getInt32(0,!0)})}seek(e){return __awaiter(this,void 0,void 0,function*(){return this._pending&&(yield this._pending),this.position=Math.min(e,this.size),e<this.size})}read(e){return __awaiter(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:o,size:d,position:h}=this;if(o&&h<d){typeof e!="number"&&(e=Number.POSITIVE_INFINITY);let g=h,b=0,$=0;const j=Math.min(d,g+Math.min(d-g,e)),et=new Uint8Array(Math.max(0,(this.position=j)-g));for(;(g+=$)<j&&(b+=$)<et.byteLength;)({bytesRead:$}=yield o.read(et,b,et.byteLength-b,g));return et}return null})}readAt(e,o){return __awaiter(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:d,size:h}=this;if(d&&e+o<h){const g=Math.min(h,e+o),b=new Uint8Array(g-e);return(yield d.read(b,0,o,e)).buffer}return new Uint8Array(o)})}close(){return __awaiter(this,void 0,void 0,function*(){const e=this._handle;this._handle=null,e&&(yield e.close())})}throw(e){return __awaiter(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:e}})}return(e){return __awaiter(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:e}})}};const carryBit16$1=65536;function intAsHex$1(i){return i<0&&(i=4294967295+i+1),`0x${i.toString(16)}`}const kInt32DecimalDigits$1=8,kPowersOfTen$1=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8];let BaseInt64$1=class{constructor(e){this.buffer=e}high(){return this.buffer[1]}low(){return this.buffer[0]}_times(e){const o=new Uint32Array([this.buffer[1]>>>16,this.buffer[1]&65535,this.buffer[0]>>>16,this.buffer[0]&65535]),d=new Uint32Array([e.buffer[1]>>>16,e.buffer[1]&65535,e.buffer[0]>>>16,e.buffer[0]&65535]);let h=o[3]*d[3];this.buffer[0]=h&65535;let g=h>>>16;return h=o[2]*d[3],g+=h,h=o[3]*d[2]>>>0,g+=h,this.buffer[0]+=g<<16,this.buffer[1]=g>>>0<h?carryBit16$1:0,this.buffer[1]+=g>>>16,this.buffer[1]+=o[1]*d[3]+o[2]*d[2]+o[3]*d[1],this.buffer[1]+=o[0]*d[3]+o[1]*d[2]+o[2]*d[1]+o[3]*d[0]<<16,this}_plus(e){const o=this.buffer[0]+e.buffer[0]>>>0;this.buffer[1]+=e.buffer[1],o<this.buffer[0]>>>0&&++this.buffer[1],this.buffer[0]=o}lessThan(e){return this.buffer[1]<e.buffer[1]||this.buffer[1]===e.buffer[1]&&this.buffer[0]<e.buffer[0]}equals(e){return this.buffer[1]===e.buffer[1]&&this.buffer[0]==e.buffer[0]}greaterThan(e){return e.lessThan(this)}hex(){return`${intAsHex$1(this.buffer[1])} ${intAsHex$1(this.buffer[0])}`}},Uint64$1=class eo extends BaseInt64$1{times(e){return this._times(e),this}plus(e){return this._plus(e),this}static from(e,o=new Uint32Array(2)){return eo.fromString(typeof e=="string"?e:e.toString(),o)}static fromNumber(e,o=new Uint32Array(2)){return eo.fromString(e.toString(),o)}static fromString(e,o=new Uint32Array(2)){const d=e.length,h=new eo(o);for(let g=0;g<d;){const b=kInt32DecimalDigits$1<d-g?kInt32DecimalDigits$1:d-g,$=new eo(new Uint32Array([Number.parseInt(e.slice(g,g+b),10),0])),j=new eo(new Uint32Array([kPowersOfTen$1[b],0]));h.times(j),h.plus($),g+=b}return h}static convertArray(e){const o=new Uint32Array(e.length*2);for(let d=-1,h=e.length;++d<h;)eo.from(e[d],new Uint32Array(o.buffer,o.byteOffset+2*d*4,2));return o}static multiply(e,o){return new eo(new Uint32Array(e.buffer)).times(o)}static add(e,o){return new eo(new Uint32Array(e.buffer)).plus(o)}},Int64$1=class to extends BaseInt64$1{negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[0]==0&&++this.buffer[1],this}times(e){return this._times(e),this}plus(e){return this._plus(e),this}lessThan(e){const o=this.buffer[1]<<0,d=e.buffer[1]<<0;return o<d||o===d&&this.buffer[0]<e.buffer[0]}static from(e,o=new Uint32Array(2)){return to.fromString(typeof e=="string"?e:e.toString(),o)}static fromNumber(e,o=new Uint32Array(2)){return to.fromString(e.toString(),o)}static fromString(e,o=new Uint32Array(2)){const d=e.startsWith("-"),h=e.length,g=new to(o);for(let b=d?1:0;b<h;){const $=kInt32DecimalDigits$1<h-b?kInt32DecimalDigits$1:h-b,j=new to(new Uint32Array([Number.parseInt(e.slice(b,b+$),10),0])),et=new to(new Uint32Array([kPowersOfTen$1[$],0]));g.times(et),g.plus(j),b+=$}return d?g.negate():g}static convertArray(e){const o=new Uint32Array(e.length*2);for(let d=-1,h=e.length;++d<h;)to.from(e[d],new Uint32Array(o.buffer,o.byteOffset+2*d*4,2));return o}static multiply(e,o){return new to(new Uint32Array(e.buffer)).times(o)}static add(e,o){return new to(new Uint32Array(e.buffer)).plus(o)}},Int128$1=class no{constructor(e){this.buffer=e}high(){return new Int64$1(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2))}low(){return new Int64$1(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset,2))}negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[2]=~this.buffer[2],this.buffer[3]=~this.buffer[3],this.buffer[0]==0&&++this.buffer[1],this.buffer[1]==0&&++this.buffer[2],this.buffer[2]==0&&++this.buffer[3],this}times(e){const o=new Uint64$1(new Uint32Array([this.buffer[3],0])),d=new Uint64$1(new Uint32Array([this.buffer[2],0])),h=new Uint64$1(new Uint32Array([this.buffer[1],0])),g=new Uint64$1(new Uint32Array([this.buffer[0],0])),b=new Uint64$1(new Uint32Array([e.buffer[3],0])),$=new Uint64$1(new Uint32Array([e.buffer[2],0])),j=new Uint64$1(new Uint32Array([e.buffer[1],0])),et=new Uint64$1(new Uint32Array([e.buffer[0],0]));let tt=Uint64$1.multiply(g,et);this.buffer[0]=tt.low();const nt=new Uint64$1(new Uint32Array([tt.high(),0]));return tt=Uint64$1.multiply(h,et),nt.plus(tt),tt=Uint64$1.multiply(g,j),nt.plus(tt),this.buffer[1]=nt.low(),this.buffer[3]=nt.lessThan(tt)?1:0,this.buffer[2]=nt.high(),new Uint64$1(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2)).plus(Uint64$1.multiply(d,et)).plus(Uint64$1.multiply(h,j)).plus(Uint64$1.multiply(g,$)),this.buffer[3]+=Uint64$1.multiply(o,et).plus(Uint64$1.multiply(d,j)).plus(Uint64$1.multiply(h,$)).plus(Uint64$1.multiply(g,b)).low(),this}plus(e){const o=new Uint32Array(4);return o[3]=this.buffer[3]+e.buffer[3]>>>0,o[2]=this.buffer[2]+e.buffer[2]>>>0,o[1]=this.buffer[1]+e.buffer[1]>>>0,o[0]=this.buffer[0]+e.buffer[0]>>>0,o[0]<this.buffer[0]>>>0&&++o[1],o[1]<this.buffer[1]>>>0&&++o[2],o[2]<this.buffer[2]>>>0&&++o[3],this.buffer[3]=o[3],this.buffer[2]=o[2],this.buffer[1]=o[1],this.buffer[0]=o[0],this}hex(){return`${intAsHex$1(this.buffer[3])} ${intAsHex$1(this.buffer[2])} ${intAsHex$1(this.buffer[1])} ${intAsHex$1(this.buffer[0])}`}static multiply(e,o){return new no(new Uint32Array(e.buffer)).times(o)}static add(e,o){return new no(new Uint32Array(e.buffer)).plus(o)}static from(e,o=new Uint32Array(4)){return no.fromString(typeof e=="string"?e:e.toString(),o)}static fromNumber(e,o=new Uint32Array(4)){return no.fromString(e.toString(),o)}static fromString(e,o=new Uint32Array(4)){const d=e.startsWith("-"),h=e.length,g=new no(o);for(let b=d?1:0;b<h;){const $=kInt32DecimalDigits$1<h-b?kInt32DecimalDigits$1:h-b,j=new no(new Uint32Array([Number.parseInt(e.slice(b,b+$),10),0,0,0])),et=new no(new Uint32Array([kPowersOfTen$1[$],0,0,0]));g.times(et),g.plus(j),b+=$}return d?g.negate():g}static convertArray(e){const o=new Uint32Array(e.length*4);for(let d=-1,h=e.length;++d<h;)no.from(e[d],new Uint32Array(o.buffer,o.byteOffset+4*4*d,4));return o}},VectorLoader$1=class extends Visitor$1{constructor(e,o,d,h){super(),this.nodesIndex=-1,this.buffersIndex=-1,this.bytes=e,this.nodes=o,this.buffers=d,this.dictionaries=h}visit(e){return super.visit(e instanceof Field$2?e.type:e)}visitNull(e,{length:o}=this.nextFieldNode()){return makeData$1({type:e,length:o})}visitBool(e,{length:o,nullCount:d}=this.nextFieldNode()){return makeData$1({type:e,length:o,nullCount:d,nullBitmap:this.readNullBitmap(e,d),data:this.readData(e)})}visitInt(e,{length:o,nullCount:d}=this.nextFieldNode()){return makeData$1({type:e,length:o,nullCount:d,nullBitmap:this.readNullBitmap(e,d),data:this.readData(e)})}visitFloat(e,{length:o,nullCount:d}=this.nextFieldNode()){return makeData$1({type:e,length:o,nullCount:d,nullBitmap:this.readNullBitmap(e,d),data:this.readData(e)})}visitUtf8(e,{length:o,nullCount:d}=this.nextFieldNode()){return makeData$1({type:e,length:o,nullCount:d,nullBitmap:this.readNullBitmap(e,d),valueOffsets:this.readOffsets(e),data:this.readData(e)})}visitBinary(e,{length:o,nullCount:d}=this.nextFieldNode()){return makeData$1({type:e,length:o,nullCount:d,nullBitmap:this.readNullBitmap(e,d),valueOffsets:this.readOffsets(e),data:this.readData(e)})}visitFixedSizeBinary(e,{length:o,nullCount:d}=this.nextFieldNode()){return makeData$1({type:e,length:o,nullCount:d,nullBitmap:this.readNullBitmap(e,d),data:this.readData(e)})}visitDate(e,{length:o,nullCount:d}=this.nextFieldNode()){return makeData$1({type:e,length:o,nullCount:d,nullBitmap:this.readNullBitmap(e,d),data:this.readData(e)})}visitTimestamp(e,{length:o,nullCount:d}=this.nextFieldNode()){return makeData$1({type:e,length:o,nullCount:d,nullBitmap:this.readNullBitmap(e,d),data:this.readData(e)})}visitTime(e,{length:o,nullCount:d}=this.nextFieldNode()){return makeData$1({type:e,length:o,nullCount:d,nullBitmap:this.readNullBitmap(e,d),data:this.readData(e)})}visitDecimal(e,{length:o,nullCount:d}=this.nextFieldNode()){return makeData$1({type:e,length:o,nullCount:d,nullBitmap:this.readNullBitmap(e,d),data:this.readData(e)})}visitList(e,{length:o,nullCount:d}=this.nextFieldNode()){return makeData$1({type:e,length:o,nullCount:d,nullBitmap:this.readNullBitmap(e,d),valueOffsets:this.readOffsets(e),child:this.visit(e.children[0])})}visitStruct(e,{length:o,nullCount:d}=this.nextFieldNode()){return makeData$1({type:e,length:o,nullCount:d,nullBitmap:this.readNullBitmap(e,d),children:this.visitMany(e.children)})}visitUnion(e){return e.mode===UnionMode$3.Sparse?this.visitSparseUnion(e):this.visitDenseUnion(e)}visitDenseUnion(e,{length:o,nullCount:d}=this.nextFieldNode()){return makeData$1({type:e,length:o,nullCount:d,nullBitmap:this.readNullBitmap(e,d),typeIds:this.readTypeIds(e),valueOffsets:this.readOffsets(e),children:this.visitMany(e.children)})}visitSparseUnion(e,{length:o,nullCount:d}=this.nextFieldNode()){return makeData$1({type:e,length:o,nullCount:d,nullBitmap:this.readNullBitmap(e,d),typeIds:this.readTypeIds(e),children:this.visitMany(e.children)})}visitDictionary(e,{length:o,nullCount:d}=this.nextFieldNode()){return makeData$1({type:e,length:o,nullCount:d,nullBitmap:this.readNullBitmap(e,d),data:this.readData(e.indices),dictionary:this.readDictionary(e)})}visitInterval(e,{length:o,nullCount:d}=this.nextFieldNode()){return makeData$1({type:e,length:o,nullCount:d,nullBitmap:this.readNullBitmap(e,d),data:this.readData(e)})}visitFixedSizeList(e,{length:o,nullCount:d}=this.nextFieldNode()){return makeData$1({type:e,length:o,nullCount:d,nullBitmap:this.readNullBitmap(e,d),child:this.visit(e.children[0])})}visitMap(e,{length:o,nullCount:d}=this.nextFieldNode()){return makeData$1({type:e,length:o,nullCount:d,nullBitmap:this.readNullBitmap(e,d),valueOffsets:this.readOffsets(e),child:this.visit(e.children[0])})}nextFieldNode(){return this.nodes[++this.nodesIndex]}nextBufferRange(){return this.buffers[++this.buffersIndex]}readNullBitmap(e,o,d=this.nextBufferRange()){return o>0&&this.readData(e,d)||new Uint8Array(0)}readOffsets(e,o){return this.readData(e,o)}readTypeIds(e,o){return this.readData(e,o)}readData(e,{length:o,offset:d}=this.nextBufferRange()){return this.bytes.subarray(d,d+o)}readDictionary(e){return this.dictionaries.get(e.id)}},JSONVectorLoader$1=class extends VectorLoader$1{constructor(e,o,d,h){super(new Uint8Array(0),o,d,h),this.sources=e}readNullBitmap(e,o,{offset:d}=this.nextBufferRange()){return o<=0?new Uint8Array(0):packBools$1(this.sources[d])}readOffsets(e,{offset:o}=this.nextBufferRange()){return toArrayBufferView$1(Uint8Array,toArrayBufferView$1(Int32Array,this.sources[o]))}readTypeIds(e,{offset:o}=this.nextBufferRange()){return toArrayBufferView$1(Uint8Array,toArrayBufferView$1(e.ArrayType,this.sources[o]))}readData(e,{offset:o}=this.nextBufferRange()){const{sources:d}=this;return DataType$1.isTimestamp(e)||(DataType$1.isInt(e)||DataType$1.isTime(e))&&e.bitWidth===64||DataType$1.isDate(e)&&e.unit===DateUnit$3.MILLISECOND?toArrayBufferView$1(Uint8Array,Int64$1.convertArray(d[o])):DataType$1.isDecimal(e)?toArrayBufferView$1(Uint8Array,Int128$1.convertArray(d[o])):DataType$1.isBinary(e)||DataType$1.isFixedSizeBinary(e)?binaryDataFromJSON$1(d[o]):DataType$1.isBool(e)?packBools$1(d[o]):DataType$1.isUtf8(e)?encodeUtf8$1(d[o].join("")):toArrayBufferView$1(Uint8Array,toArrayBufferView$1(e.ArrayType,d[o].map(h=>+h)))}};function binaryDataFromJSON$1(i){const e=i.join(""),o=new Uint8Array(e.length/2);for(let d=0;d<e.length;d+=2)o[d>>1]=Number.parseInt(e.slice(d,d+2),16);return o}let TypeComparator$1=class extends Visitor$1{compareSchemas(e,o){return e===o||o instanceof e.constructor&&this.compareManyFields(e.fields,o.fields)}compareManyFields(e,o){return e===o||Array.isArray(e)&&Array.isArray(o)&&e.length===o.length&&e.every((d,h)=>this.compareFields(d,o[h]))}compareFields(e,o){return e===o||o instanceof e.constructor&&e.name===o.name&&e.nullable===o.nullable&&this.visit(e.type,o.type)}};function compareConstructor$1(i,e){return e instanceof i.constructor}function compareAny$1(i,e){return i===e||compareConstructor$1(i,e)}function compareInt$1(i,e){return i===e||compareConstructor$1(i,e)&&i.bitWidth===e.bitWidth&&i.isSigned===e.isSigned}function compareFloat$1(i,e){return i===e||compareConstructor$1(i,e)&&i.precision===e.precision}function compareFixedSizeBinary$1(i,e){return i===e||compareConstructor$1(i,e)&&i.byteWidth===e.byteWidth}function compareDate$1(i,e){return i===e||compareConstructor$1(i,e)&&i.unit===e.unit}function compareTimestamp$1(i,e){return i===e||compareConstructor$1(i,e)&&i.unit===e.unit&&i.timezone===e.timezone}function compareTime$1(i,e){return i===e||compareConstructor$1(i,e)&&i.unit===e.unit&&i.bitWidth===e.bitWidth}function compareList$1(i,e){return i===e||compareConstructor$1(i,e)&&i.children.length===e.children.length&&instance$8.compareManyFields(i.children,e.children)}function compareStruct$1(i,e){return i===e||compareConstructor$1(i,e)&&i.children.length===e.children.length&&instance$8.compareManyFields(i.children,e.children)}function compareUnion$1(i,e){return i===e||compareConstructor$1(i,e)&&i.mode===e.mode&&i.typeIds.every((o,d)=>o===e.typeIds[d])&&instance$8.compareManyFields(i.children,e.children)}function compareDictionary$1(i,e){return i===e||compareConstructor$1(i,e)&&i.id===e.id&&i.isOrdered===e.isOrdered&&instance$8.visit(i.indices,e.indices)&&instance$8.visit(i.dictionary,e.dictionary)}function compareInterval$1(i,e){return i===e||compareConstructor$1(i,e)&&i.unit===e.unit}function compareFixedSizeList$1(i,e){return i===e||compareConstructor$1(i,e)&&i.listSize===e.listSize&&i.children.length===e.children.length&&instance$8.compareManyFields(i.children,e.children)}function compareMap$1(i,e){return i===e||compareConstructor$1(i,e)&&i.keysSorted===e.keysSorted&&i.children.length===e.children.length&&instance$8.compareManyFields(i.children,e.children)}TypeComparator$1.prototype.visitNull=compareAny$1;TypeComparator$1.prototype.visitBool=compareAny$1;TypeComparator$1.prototype.visitInt=compareInt$1;TypeComparator$1.prototype.visitInt8=compareInt$1;TypeComparator$1.prototype.visitInt16=compareInt$1;TypeComparator$1.prototype.visitInt32=compareInt$1;TypeComparator$1.prototype.visitInt64=compareInt$1;TypeComparator$1.prototype.visitUint8=compareInt$1;TypeComparator$1.prototype.visitUint16=compareInt$1;TypeComparator$1.prototype.visitUint32=compareInt$1;TypeComparator$1.prototype.visitUint64=compareInt$1;TypeComparator$1.prototype.visitFloat=compareFloat$1;TypeComparator$1.prototype.visitFloat16=compareFloat$1;TypeComparator$1.prototype.visitFloat32=compareFloat$1;TypeComparator$1.prototype.visitFloat64=compareFloat$1;TypeComparator$1.prototype.visitUtf8=compareAny$1;TypeComparator$1.prototype.visitBinary=compareAny$1;TypeComparator$1.prototype.visitFixedSizeBinary=compareFixedSizeBinary$1;TypeComparator$1.prototype.visitDate=compareDate$1;TypeComparator$1.prototype.visitDateDay=compareDate$1;TypeComparator$1.prototype.visitDateMillisecond=compareDate$1;TypeComparator$1.prototype.visitTimestamp=compareTimestamp$1;TypeComparator$1.prototype.visitTimestampSecond=compareTimestamp$1;TypeComparator$1.prototype.visitTimestampMillisecond=compareTimestamp$1;TypeComparator$1.prototype.visitTimestampMicrosecond=compareTimestamp$1;TypeComparator$1.prototype.visitTimestampNanosecond=compareTimestamp$1;TypeComparator$1.prototype.visitTime=compareTime$1;TypeComparator$1.prototype.visitTimeSecond=compareTime$1;TypeComparator$1.prototype.visitTimeMillisecond=compareTime$1;TypeComparator$1.prototype.visitTimeMicrosecond=compareTime$1;TypeComparator$1.prototype.visitTimeNanosecond=compareTime$1;TypeComparator$1.prototype.visitDecimal=compareAny$1;TypeComparator$1.prototype.visitList=compareList$1;TypeComparator$1.prototype.visitStruct=compareStruct$1;TypeComparator$1.prototype.visitUnion=compareUnion$1;TypeComparator$1.prototype.visitDenseUnion=compareUnion$1;TypeComparator$1.prototype.visitSparseUnion=compareUnion$1;TypeComparator$1.prototype.visitDictionary=compareDictionary$1;TypeComparator$1.prototype.visitInterval=compareInterval$1;TypeComparator$1.prototype.visitIntervalDayTime=compareInterval$1;TypeComparator$1.prototype.visitIntervalYearMonth=compareInterval$1;TypeComparator$1.prototype.visitFixedSizeList=compareFixedSizeList$1;TypeComparator$1.prototype.visitMap=compareMap$1;const instance$8=new TypeComparator$1;function compareSchemas$1(i,e){return instance$8.compareSchemas(i,e)}function distributeVectorsIntoRecordBatches$1(i,e){return uniformlyDistributeChunksAcrossRecordBatches$1(i,e.map(o=>o.data.concat()))}function uniformlyDistributeChunksAcrossRecordBatches$1(i,e){const o=[...i.fields],d=[],h={numBatches:e.reduce((nt,rt)=>Math.max(nt,rt.length),0)};let g=0,b=0,$=-1;const j=e.length;let et,tt=[];for(;h.numBatches-- >0;){for(b=Number.POSITIVE_INFINITY,$=-1;++$<j;)tt[$]=et=e[$].shift(),b=Math.min(b,et?et.length:b);Number.isFinite(b)&&(tt=distributeChildren$1(o,b,tt,e,h),b>0&&(d[g++]=makeData$1({type:new Struct$1(o),length:b,nullCount:0,children:tt.slice()})))}return[i=i.assign(o),d.map(nt=>new RecordBatch$5(i,nt))]}function distributeChildren$1(i,e,o,d,h){var g;const b=(e+63&-64)>>3;for(let $=-1,j=d.length;++$<j;){const et=o[$],tt=et==null?void 0:et.length;if(tt>=e)tt===e?o[$]=et:(o[$]=et.slice(0,e),h.numBatches=Math.max(h.numBatches,d[$].unshift(et.slice(e,tt-e))));else{const nt=i[$];i[$]=nt.clone({nullable:!0}),o[$]=(g=et==null?void 0:et._changeLengthAndBackfillNullBitmap(e))!==null&&g!==void 0?g:makeData$1({type:nt.type,length:e,nullCount:e,nullBitmap:new Uint8Array(b)})}}return o}var _a$5;let Table$2=class vo{constructor(...e){var o,d;if(e.length===0)return this.batches=[],this.schema=new Schema$2([]),this._offsets=[0],this;let h,g;e[0]instanceof Schema$2&&(h=e.shift()),e[e.length-1]instanceof Uint32Array&&(g=e.pop());const b=j=>{if(j){if(j instanceof RecordBatch$5)return[j];if(j instanceof vo)return j.batches;if(j instanceof Data$1){if(j.type instanceof Struct$1)return[new RecordBatch$5(new Schema$2(j.type.children),j)]}else{if(Array.isArray(j))return j.flatMap(et=>b(et));if(typeof j[Symbol.iterator]=="function")return[...j].flatMap(et=>b(et));if(typeof j=="object"){const et=Object.keys(j),tt=et.map(ot=>new Vector$2([j[ot]])),nt=new Schema$2(et.map((ot,st)=>new Field$2(String(ot),tt[st].type))),[,rt]=distributeVectorsIntoRecordBatches$1(nt,tt);return rt.length===0?[new RecordBatch$5(j)]:rt}}}return[]},$=e.flatMap(j=>b(j));if(h=(d=h??((o=$[0])===null||o===void 0?void 0:o.schema))!==null&&d!==void 0?d:new Schema$2([]),!(h instanceof Schema$2))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const j of $){if(!(j instanceof RecordBatch$5))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!compareSchemas$1(h,j.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=h,this.batches=$,this._offsets=g??computeChunkOffsets$1(this.data)}get data(){return this.batches.map(({data:e})=>e)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((e,o)=>e+o.length,0)}get nullCount(){return this._nullCount===-1&&(this._nullCount=computeChunkNullCounts$1(this.data)),this._nullCount}isValid(e){return!1}get(e){return null}set(e,o){}indexOf(e,o){return-1}getByteLength(e){return 0}[Symbol.iterator](){return this.batches.length>0?instance$a.visit(new Vector$2(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(`,
  `)}
]`}concat(...e){const o=this.schema,d=this.data.concat(e.flatMap(({data:h})=>h));return new vo(o,d.map(h=>new RecordBatch$5(o,h)))}slice(e,o){const d=this.schema;[e,o]=clampRange$1({length:this.numRows},e,o);const h=sliceChunks$1(this.data,this._offsets,e,o);return new vo(d,h.map(g=>new RecordBatch$5(d,g)))}getChild(e){return this.getChildAt(this.schema.fields.findIndex(o=>o.name===e))}getChildAt(e){if(e>-1&&e<this.schema.fields.length){const o=this.data.map(d=>d.children[e]);if(o.length===0){const{type:d}=this.schema.fields[e],h=makeData$1({type:d,length:0,nullCount:0});o.push(h._changeLengthAndBackfillNullBitmap(this.numRows))}return new Vector$2(o)}return null}setChild(e,o){var d;return this.setChildAt((d=this.schema.fields)===null||d===void 0?void 0:d.findIndex(h=>h.name===e),o)}setChildAt(e,o){let d=this.schema,h=[...this.batches];if(e>-1&&e<this.numCols){o||(o=new Vector$2([makeData$1({type:new Null$3,length:this.numRows})]));const g=d.fields.slice(),b=g[e].clone({type:o.type}),$=this.schema.fields.map((j,et)=>this.getChildAt(et));[g[e],$[e]]=[b,o],[d,h]=distributeVectorsIntoRecordBatches$1(d,$)}return new vo(d,h)}select(e){const o=this.schema.fields.reduce((d,h,g)=>d.set(h.name,g),new Map);return this.selectAt(e.map(d=>o.get(d)).filter(d=>d>-1))}selectAt(e){const o=this.schema.selectAt(e),d=this.batches.map(h=>h.selectAt(e));return new vo(o,d)}assign(e){const o=this.schema.fields,[d,h]=e.schema.fields.reduce(($,j,et)=>{const[tt,nt]=$,rt=o.findIndex(ot=>ot.name===j.name);return~rt?nt[rt]=et:tt.push(et),$},[[],[]]),g=this.schema.assign(e.schema),b=[...o.map(($,j)=>[j,h[j]]).map(([$,j])=>j===void 0?this.getChildAt($):e.getChildAt(j)),...d.map($=>e.getChildAt($))].filter(Boolean);return new vo(...distributeVectorsIntoRecordBatches$1(g,b))}};_a$5=Symbol.toStringTag;Table$2[_a$5]=(i=>(i.schema=null,i.batches=[],i._offsets=new Uint32Array([0]),i._nullCount=-1,i[Symbol.isConcatSpreadable]=!0,i.isValid=wrapChunkedCall1$1(isChunkedValid$1),i.get=wrapChunkedCall1$1(instance$c.getVisitFn(Type$3.Struct)),i.set=wrapChunkedCall2$1(instance$d.getVisitFn(Type$3.Struct)),i.indexOf=wrapChunkedIndexOf$1(instance$b.getVisitFn(Type$3.Struct)),i.getByteLength=wrapChunkedCall1$1(instance$9.getVisitFn(Type$3.Struct)),"Table"))(Table$2.prototype);var _a$4;let RecordBatch$5=class Us{constructor(...e){switch(e.length){case 2:{if([this.schema]=e,!(this.schema instanceof Schema$2))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=makeData$1({nullCount:0,type:new Struct$1(this.schema.fields),children:this.schema.fields.map(o=>makeData$1({type:o.type,nullCount:0}))})]=e,!(this.data instanceof Data$1))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=ensureSameLengthData$1(this.schema,this.data.children);break}case 1:{const[o]=e,{fields:d,children:h,length:g}=Object.keys(o).reduce((j,et,tt)=>(j.children[tt]=o[et],j.length=Math.max(j.length,o[et].length),j.fields[tt]=Field$2.new({name:et,type:o[et].type,nullable:!0}),j),{length:0,fields:new Array,children:new Array}),b=new Schema$2(d),$=makeData$1({type:new Struct$1(d),length:g,children:h,nullCount:0});[this.schema,this.data]=ensureSameLengthData$1(b,$.children,g);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=collectDictionaries$1(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(e){return this.data.getValid(e)}get(e){return instance$c.visit(this.data,e)}set(e,o){return instance$d.visit(this.data,e,o)}indexOf(e,o){return instance$b.visit(this.data,e,o)}getByteLength(e){return instance$9.visit(this.data,e)}[Symbol.iterator](){return instance$a.visit(new Vector$2([this.data]))}toArray(){return[...this]}concat(...e){return new Table$2(this.schema,[this,...e])}slice(e,o){const[d]=new Vector$2([this.data]).slice(e,o).data;return new Us(this.schema,d)}getChild(e){var o;return this.getChildAt((o=this.schema.fields)===null||o===void 0?void 0:o.findIndex(d=>d.name===e))}getChildAt(e){return e>-1&&e<this.schema.fields.length?new Vector$2([this.data.children[e]]):null}setChild(e,o){var d;return this.setChildAt((d=this.schema.fields)===null||d===void 0?void 0:d.findIndex(h=>h.name===e),o)}setChildAt(e,o){let d=this.schema,h=this.data;if(e>-1&&e<this.numCols){o||(o=new Vector$2([makeData$1({type:new Null$3,length:this.numRows})]));const g=d.fields.slice(),b=h.children.slice(),$=g[e].clone({type:o.type});[g[e],b[e]]=[$,o.data[0]],d=new Schema$2(g,new Map(this.schema.metadata)),h=makeData$1({type:new Struct$1(g),children:b})}return new Us(d,h)}select(e){const o=this.schema.select(e),d=new Struct$1(o.fields),h=[];for(const g of e){const b=this.schema.fields.findIndex($=>$.name===g);~b&&(h[b]=this.data.children[b])}return new Us(o,makeData$1({type:d,length:this.numRows,children:h}))}selectAt(e){const o=this.schema.selectAt(e),d=e.map(g=>this.data.children[g]).filter(Boolean),h=makeData$1({type:new Struct$1(o.fields),length:this.numRows,children:d});return new Us(o,h)}};_a$4=Symbol.toStringTag;RecordBatch$5[_a$4]=(i=>(i._nullCount=-1,i[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(RecordBatch$5.prototype);function ensureSameLengthData$1(i,e,o=e.reduce((d,h)=>Math.max(d,h.length),0)){var d;const h=[...i.fields],g=[...e],b=(o+63&-64)>>3;for(const[$,j]of i.fields.entries()){const et=e[$];(!et||et.length!==o)&&(h[$]=j.clone({nullable:!0}),g[$]=(d=et==null?void 0:et._changeLengthAndBackfillNullBitmap(o))!==null&&d!==void 0?d:makeData$1({type:j.type,length:o,nullCount:o,nullBitmap:new Uint8Array(b)}))}return[i.assign(h),makeData$1({type:new Struct$1(h),length:o,children:g})]}function collectDictionaries$1(i,e,o=new Map){for(let d=-1,h=i.length;++d<h;){const b=i[d].type,$=e[d];if(DataType$1.isDictionary(b)){if(!o.has(b.id))$.dictionary&&o.set(b.id,$.dictionary);else if(o.get(b.id)!==$.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}b.children&&b.children.length>0&&collectDictionaries$1(b.children,$.children,o)}return o}let _InternalEmptyPlaceholderRecordBatch$1=class extends RecordBatch$5{constructor(e){const o=e.fields.map(h=>makeData$1({type:h.type})),d=makeData$1({type:new Struct$1(e.fields),nullCount:0,children:o});super(e,d)}};var BodyCompressionMethod$1;(function(i){i[i.BUFFER=0]="BUFFER"})(BodyCompressionMethod$1||(BodyCompressionMethod$1={}));var CompressionType$1;(function(i){i[i.LZ4_FRAME=0]="LZ4_FRAME",i[i.ZSTD=1]="ZSTD"})(CompressionType$1||(CompressionType$1={}));let BodyCompression$1=class wo{constructor(){this.bb=null,this.bb_pos=0}__init(e,o){return this.bb_pos=e,this.bb=o,this}static getRootAsBodyCompression(e,o){return(o||new wo).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsBodyCompression(e,o){return e.setPosition(e.position()+SIZE_PREFIX_LENGTH$1),(o||new wo).__init(e.readInt32(e.position())+e.position(),e)}codec(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt8(this.bb_pos+e):CompressionType$1.LZ4_FRAME}method(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt8(this.bb_pos+e):BodyCompressionMethod$1.BUFFER}static startBodyCompression(e){e.startObject(2)}static addCodec(e,o){e.addFieldInt8(0,o,CompressionType$1.LZ4_FRAME)}static addMethod(e,o){e.addFieldInt8(1,o,BodyCompressionMethod$1.BUFFER)}static endBodyCompression(e){return e.endObject()}static createBodyCompression(e,o,d){return wo.startBodyCompression(e),wo.addCodec(e,o),wo.addMethod(e,d),wo.endBodyCompression(e)}},Buffer$1=class{constructor(){this.bb=null,this.bb_pos=0}__init(e,o){return this.bb_pos=e,this.bb=o,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(e,o,d){return e.prep(8,16),e.writeInt64(d),e.writeInt64(o),e.offset()}},FieldNode$3=class{constructor(){this.bb=null,this.bb_pos=0}__init(e,o){return this.bb_pos=e,this.bb=o,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(e,o,d){return e.prep(8,16),e.writeInt64(d),e.writeInt64(o),e.offset()}},RecordBatch$4=class eu{constructor(){this.bb=null,this.bb_pos=0}__init(e,o){return this.bb_pos=e,this.bb=o,this}static getRootAsRecordBatch(e,o){return(o||new eu).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsRecordBatch(e,o){return e.setPosition(e.position()+SIZE_PREFIX_LENGTH$1),(o||new eu).__init(e.readInt32(e.position())+e.position(),e)}length(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt64(this.bb_pos+e):this.bb.createLong(0,0)}nodes(e,o){const d=this.bb.__offset(this.bb_pos,6);return d?(o||new FieldNode$3).__init(this.bb.__vector(this.bb_pos+d)+e*16,this.bb):null}nodesLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}buffers(e,o){const d=this.bb.__offset(this.bb_pos,8);return d?(o||new Buffer$1).__init(this.bb.__vector(this.bb_pos+d)+e*16,this.bb):null}buffersLength(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}compression(e){const o=this.bb.__offset(this.bb_pos,10);return o?(e||new BodyCompression$1).__init(this.bb.__indirect(this.bb_pos+o),this.bb):null}static startRecordBatch(e){e.startObject(4)}static addLength(e,o){e.addFieldInt64(0,o,e.createLong(0,0))}static addNodes(e,o){e.addFieldOffset(1,o,0)}static startNodesVector(e,o){e.startVector(16,o,8)}static addBuffers(e,o){e.addFieldOffset(2,o,0)}static startBuffersVector(e,o){e.startVector(16,o,8)}static addCompression(e,o){e.addFieldOffset(3,o,0)}static endRecordBatch(e){return e.endObject()}},DictionaryBatch$3=class tu{constructor(){this.bb=null,this.bb_pos=0}__init(e,o){return this.bb_pos=e,this.bb=o,this}static getRootAsDictionaryBatch(e,o){return(o||new tu).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDictionaryBatch(e,o){return e.setPosition(e.position()+SIZE_PREFIX_LENGTH$1),(o||new tu).__init(e.readInt32(e.position())+e.position(),e)}id(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt64(this.bb_pos+e):this.bb.createLong(0,0)}data(e){const o=this.bb.__offset(this.bb_pos,6);return o?(e||new RecordBatch$4).__init(this.bb.__indirect(this.bb_pos+o),this.bb):null}isDelta(){const e=this.bb.__offset(this.bb_pos,8);return e?!!this.bb.readInt8(this.bb_pos+e):!1}static startDictionaryBatch(e){e.startObject(3)}static addId(e,o){e.addFieldInt64(0,o,e.createLong(0,0))}static addData(e,o){e.addFieldOffset(1,o,0)}static addIsDelta(e,o){e.addFieldInt8(2,+o,0)}static endDictionaryBatch(e){return e.endObject()}};var MessageHeader$2;(function(i){i[i.NONE=0]="NONE",i[i.Schema=1]="Schema",i[i.DictionaryBatch=2]="DictionaryBatch",i[i.RecordBatch=3]="RecordBatch",i[i.Tensor=4]="Tensor",i[i.SparseTensor=5]="SparseTensor"})(MessageHeader$2||(MessageHeader$2={}));let Message$3=class qr{constructor(){this.bb=null,this.bb_pos=0}__init(e,o){return this.bb_pos=e,this.bb=o,this}static getRootAsMessage(e,o){return(o||new qr).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsMessage(e,o){return e.setPosition(e.position()+SIZE_PREFIX_LENGTH$1),(o||new qr).__init(e.readInt32(e.position())+e.position(),e)}version(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):MetadataVersion$2.V1}headerType(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint8(this.bb_pos+e):MessageHeader$2.NONE}header(e){const o=this.bb.__offset(this.bb_pos,8);return o?this.bb.__union(e,this.bb_pos+o):null}bodyLength(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readInt64(this.bb_pos+e):this.bb.createLong(0,0)}customMetadata(e,o){const d=this.bb.__offset(this.bb_pos,12);return d?(o||new KeyValue$1).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+d)+e*4),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__vector_len(this.bb_pos+e):0}static startMessage(e){e.startObject(5)}static addVersion(e,o){e.addFieldInt16(0,o,MetadataVersion$2.V1)}static addHeaderType(e,o){e.addFieldInt8(1,o,MessageHeader$2.NONE)}static addHeader(e,o){e.addFieldOffset(2,o,0)}static addBodyLength(e,o){e.addFieldInt64(3,o,e.createLong(0,0))}static addCustomMetadata(e,o){e.addFieldOffset(4,o,0)}static createCustomMetadataVector(e,o){e.startVector(4,o.length,4);for(let d=o.length-1;d>=0;d--)e.addOffset(o[d]);return e.endVector()}static startCustomMetadataVector(e,o){e.startVector(4,o,4)}static endMessage(e){return e.endObject()}static finishMessageBuffer(e,o){e.finish(o)}static finishSizePrefixedMessageBuffer(e,o){e.finish(o,void 0,!0)}static createMessage(e,o,d,h,g,b){return qr.startMessage(e),qr.addVersion(e,o),qr.addHeaderType(e,d),qr.addHeader(e,h),qr.addBodyLength(e,g),qr.addCustomMetadata(e,b),qr.endMessage(e)}};var Long$1=Long$3;let TypeAssembler$1=class extends Visitor$1{visit(e,o){return e==null||o==null?void 0:super.visit(e,o)}visitNull(e,o){return Null$2.startNull(o),Null$2.endNull(o)}visitInt(e,o){return Int$1.startInt(o),Int$1.addBitWidth(o,e.bitWidth),Int$1.addIsSigned(o,e.isSigned),Int$1.endInt(o)}visitFloat(e,o){return FloatingPoint$1.startFloatingPoint(o),FloatingPoint$1.addPrecision(o,e.precision),FloatingPoint$1.endFloatingPoint(o)}visitBinary(e,o){return Binary$2.startBinary(o),Binary$2.endBinary(o)}visitBool(e,o){return Bool$2.startBool(o),Bool$2.endBool(o)}visitUtf8(e,o){return Utf8$2.startUtf8(o),Utf8$2.endUtf8(o)}visitDecimal(e,o){return Decimal$2.startDecimal(o),Decimal$2.addScale(o,e.scale),Decimal$2.addPrecision(o,e.precision),Decimal$2.addBitWidth(o,e.bitWidth),Decimal$2.endDecimal(o)}visitDate(e,o){return Date$2.startDate(o),Date$2.addUnit(o,e.unit),Date$2.endDate(o)}visitTime(e,o){return Time$1.startTime(o),Time$1.addUnit(o,e.unit),Time$1.addBitWidth(o,e.bitWidth),Time$1.endTime(o)}visitTimestamp(e,o){const d=e.timezone&&o.createString(e.timezone)||void 0;return Timestamp$1.startTimestamp(o),Timestamp$1.addUnit(o,e.unit),d!==void 0&&Timestamp$1.addTimezone(o,d),Timestamp$1.endTimestamp(o)}visitInterval(e,o){return Interval$1.startInterval(o),Interval$1.addUnit(o,e.unit),Interval$1.endInterval(o)}visitList(e,o){return List$2.startList(o),List$2.endList(o)}visitStruct(e,o){return Struct_$1.startStruct_(o),Struct_$1.endStruct_(o)}visitUnion(e,o){Union$1.startTypeIdsVector(o,e.typeIds.length);const d=Union$1.createTypeIdsVector(o,e.typeIds);return Union$1.startUnion(o),Union$1.addMode(o,e.mode),Union$1.addTypeIds(o,d),Union$1.endUnion(o)}visitDictionary(e,o){const d=this.visit(e.indices,o);return DictionaryEncoding$1.startDictionaryEncoding(o),DictionaryEncoding$1.addId(o,new Long$1(e.id,0)),DictionaryEncoding$1.addIsOrdered(o,e.isOrdered),d!==void 0&&DictionaryEncoding$1.addIndexType(o,d),DictionaryEncoding$1.endDictionaryEncoding(o)}visitFixedSizeBinary(e,o){return FixedSizeBinary$2.startFixedSizeBinary(o),FixedSizeBinary$2.addByteWidth(o,e.byteWidth),FixedSizeBinary$2.endFixedSizeBinary(o)}visitFixedSizeList(e,o){return FixedSizeList$2.startFixedSizeList(o),FixedSizeList$2.addListSize(o,e.listSize),FixedSizeList$2.endFixedSizeList(o)}visitMap(e,o){return Map$2.startMap(o),Map$2.addKeysSorted(o,e.keysSorted),Map$2.endMap(o)}};const instance$7=new TypeAssembler$1;function schemaFromJSON$1(i,e=new Map){return new Schema$2(schemaFieldsFromJSON$1(i,e),customMetadataFromJSON$1(i.customMetadata),e)}function recordBatchFromJSON$1(i){return new RecordBatch$3(i.count,fieldNodesFromJSON$1(i.columns),buffersFromJSON$1(i.columns))}function dictionaryBatchFromJSON$1(i){return new DictionaryBatch$2(recordBatchFromJSON$1(i.data),i.id,i.isDelta)}function schemaFieldsFromJSON$1(i,e){return(i.fields||[]).filter(Boolean).map(o=>Field$2.fromJSON(o,e))}function fieldChildrenFromJSON$1(i,e){return(i.children||[]).filter(Boolean).map(o=>Field$2.fromJSON(o,e))}function fieldNodesFromJSON$1(i){return(i||[]).reduce((e,o)=>[...e,new FieldNode$2(o.count,nullCountFromJSON$1(o.VALIDITY)),...fieldNodesFromJSON$1(o.children)],[])}function buffersFromJSON$1(i,e=[]){for(let o=-1,d=(i||[]).length;++o<d;){const h=i[o];h.VALIDITY&&e.push(new BufferRegion$1(e.length,h.VALIDITY.length)),h.TYPE&&e.push(new BufferRegion$1(e.length,h.TYPE.length)),h.OFFSET&&e.push(new BufferRegion$1(e.length,h.OFFSET.length)),h.DATA&&e.push(new BufferRegion$1(e.length,h.DATA.length)),e=buffersFromJSON$1(h.children,e)}return e}function nullCountFromJSON$1(i){return(i||[]).reduce((e,o)=>e+ +(o===0),0)}function fieldFromJSON$1(i,e){let o,d,h,g,b,$;return!e||!(g=i.dictionary)?(b=typeFromJSON$1(i,fieldChildrenFromJSON$1(i,e)),h=new Field$2(i.name,b,i.nullable,customMetadataFromJSON$1(i.customMetadata))):e.has(o=g.id)?(d=(d=g.indexType)?indexTypeFromJSON$1(d):new Int32$1,$=new Dictionary$1(e.get(o),d,o,g.isOrdered),h=new Field$2(i.name,$,i.nullable,customMetadataFromJSON$1(i.customMetadata))):(d=(d=g.indexType)?indexTypeFromJSON$1(d):new Int32$1,e.set(o,b=typeFromJSON$1(i,fieldChildrenFromJSON$1(i,e))),$=new Dictionary$1(b,d,o,g.isOrdered),h=new Field$2(i.name,$,i.nullable,customMetadataFromJSON$1(i.customMetadata))),h||null}function customMetadataFromJSON$1(i){return new Map(Object.entries(i||{}))}function indexTypeFromJSON$1(i){return new Int_$1(i.isSigned,i.bitWidth)}function typeFromJSON$1(i,e){const o=i.type.name;switch(o){case"NONE":return new Null$3;case"null":return new Null$3;case"binary":return new Binary$3;case"utf8":return new Utf8$3;case"bool":return new Bool$3;case"list":return new List$3((e||[])[0]);case"struct":return new Struct$1(e||[]);case"struct_":return new Struct$1(e||[])}switch(o){case"int":{const d=i.type;return new Int_$1(d.isSigned,d.bitWidth)}case"floatingpoint":{const d=i.type;return new Float$1(Precision$3[d.precision])}case"decimal":{const d=i.type;return new Decimal$3(d.scale,d.precision,d.bitWidth)}case"date":{const d=i.type;return new Date_$1(DateUnit$3[d.unit])}case"time":{const d=i.type;return new Time_$1(TimeUnit$3[d.unit],d.bitWidth)}case"timestamp":{const d=i.type;return new Timestamp_$1(TimeUnit$3[d.unit],d.timezone)}case"interval":{const d=i.type;return new Interval_$1(IntervalUnit$3[d.unit])}case"union":{const d=i.type;return new Union_$1(UnionMode$3[d.mode],d.typeIds||[],e||[])}case"fixedsizebinary":{const d=i.type;return new FixedSizeBinary$3(d.byteWidth)}case"fixedsizelist":{const d=i.type;return new FixedSizeList$3(d.listSize,(e||[])[0])}case"map":{const d=i.type;return new Map_$1((e||[])[0],d.keysSorted)}}throw new Error(`Unrecognized type: "${o}"`)}var Long=Long$3,Builder$3=Builder$5,ByteBuffer$3=ByteBuffer$5;let Message$2=class vs{constructor(e,o,d,h){this._version=o,this._headerType=d,this.body=new Uint8Array(0),h&&(this._createHeader=()=>h),this._bodyLength=typeof e=="number"?e:e.low}static fromJSON(e,o){const d=new vs(0,MetadataVersion$3.V4,o);return d._createHeader=messageHeaderFromJSON$1(e,o),d}static decode(e){e=new ByteBuffer$3(toUint8Array$1(e));const o=Message$3.getRootAsMessage(e),d=o.bodyLength(),h=o.version(),g=o.headerType(),b=new vs(d,h,g);return b._createHeader=decodeMessageHeader$1(o,g),b}static encode(e){const o=new Builder$3;let d=-1;return e.isSchema()?d=Schema$2.encode(o,e.header()):e.isRecordBatch()?d=RecordBatch$3.encode(o,e.header()):e.isDictionaryBatch()&&(d=DictionaryBatch$2.encode(o,e.header())),Message$3.startMessage(o),Message$3.addVersion(o,MetadataVersion$3.V4),Message$3.addHeader(o,d),Message$3.addHeaderType(o,e.headerType),Message$3.addBodyLength(o,new Long(e.bodyLength,0)),Message$3.finishMessageBuffer(o,Message$3.endMessage(o)),o.asUint8Array()}static from(e,o=0){if(e instanceof Schema$2)return new vs(0,MetadataVersion$3.V4,MessageHeader$3.Schema,e);if(e instanceof RecordBatch$3)return new vs(o,MetadataVersion$3.V4,MessageHeader$3.RecordBatch,e);if(e instanceof DictionaryBatch$2)return new vs(o,MetadataVersion$3.V4,MessageHeader$3.DictionaryBatch,e);throw new Error(`Unrecognized Message header: ${e}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===MessageHeader$3.Schema}isRecordBatch(){return this.headerType===MessageHeader$3.RecordBatch}isDictionaryBatch(){return this.headerType===MessageHeader$3.DictionaryBatch}},RecordBatch$3=class{constructor(e,o,d){this._nodes=o,this._buffers=d,this._length=typeof e=="number"?e:e.low}get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}},DictionaryBatch$2=class{constructor(e,o,d=!1){this._data=e,this._isDelta=d,this._id=typeof o=="number"?o:o.low}get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}},BufferRegion$1=class{constructor(e,o){this.offset=typeof e=="number"?e:e.low,this.length=typeof o=="number"?o:o.low}},FieldNode$2=class{constructor(e,o){this.length=typeof e=="number"?e:e.low,this.nullCount=typeof o=="number"?o:o.low}};function messageHeaderFromJSON$1(i,e){return()=>{switch(e){case MessageHeader$3.Schema:return Schema$2.fromJSON(i);case MessageHeader$3.RecordBatch:return RecordBatch$3.fromJSON(i);case MessageHeader$3.DictionaryBatch:return DictionaryBatch$2.fromJSON(i)}throw new Error(`Unrecognized Message type: { name: ${MessageHeader$3[e]}, type: ${e} }`)}}function decodeMessageHeader$1(i,e){return()=>{switch(e){case MessageHeader$3.Schema:return Schema$2.decode(i.header(new Schema$3));case MessageHeader$3.RecordBatch:return RecordBatch$3.decode(i.header(new RecordBatch$4),i.version());case MessageHeader$3.DictionaryBatch:return DictionaryBatch$2.decode(i.header(new DictionaryBatch$3),i.version())}throw new Error(`Unrecognized Message type: { name: ${MessageHeader$3[e]}, type: ${e} }`)}}Field$2.encode=encodeField$1;Field$2.decode=decodeField$1;Field$2.fromJSON=fieldFromJSON$1;Schema$2.encode=encodeSchema$1;Schema$2.decode=decodeSchema$1;Schema$2.fromJSON=schemaFromJSON$1;RecordBatch$3.encode=encodeRecordBatch$1;RecordBatch$3.decode=decodeRecordBatch$1;RecordBatch$3.fromJSON=recordBatchFromJSON$1;DictionaryBatch$2.encode=encodeDictionaryBatch$1;DictionaryBatch$2.decode=decodeDictionaryBatch$1;DictionaryBatch$2.fromJSON=dictionaryBatchFromJSON$1;FieldNode$2.encode=encodeFieldNode$1;FieldNode$2.decode=decodeFieldNode$1;BufferRegion$1.encode=encodeBufferRegion$1;BufferRegion$1.decode=decodeBufferRegion$1;function decodeSchema$1(i,e=new Map){const o=decodeSchemaFields$1(i,e);return new Schema$2(o,decodeCustomMetadata$1(i),e)}function decodeRecordBatch$1(i,e=MetadataVersion$3.V4){if(i.compression()!==null)throw new Error("Record batch compression not implemented");return new RecordBatch$3(i.length(),decodeFieldNodes$1(i),decodeBuffers$1(i,e))}function decodeDictionaryBatch$1(i,e=MetadataVersion$3.V4){return new DictionaryBatch$2(RecordBatch$3.decode(i.data(),e),i.id(),i.isDelta())}function decodeBufferRegion$1(i){return new BufferRegion$1(i.offset(),i.length())}function decodeFieldNode$1(i){return new FieldNode$2(i.length(),i.nullCount())}function decodeFieldNodes$1(i){const e=[];for(let o,d=-1,h=-1,g=i.nodesLength();++d<g;)(o=i.nodes(d))&&(e[++h]=FieldNode$2.decode(o));return e}function decodeBuffers$1(i,e){const o=[];for(let d,h=-1,g=-1,b=i.buffersLength();++h<b;)(d=i.buffers(h))&&(e<MetadataVersion$3.V4&&(d.bb_pos+=8*(h+1)),o[++g]=BufferRegion$1.decode(d));return o}function decodeSchemaFields$1(i,e){const o=[];for(let d,h=-1,g=-1,b=i.fieldsLength();++h<b;)(d=i.fields(h))&&(o[++g]=Field$2.decode(d,e));return o}function decodeFieldChildren$1(i,e){const o=[];for(let d,h=-1,g=-1,b=i.childrenLength();++h<b;)(d=i.children(h))&&(o[++g]=Field$2.decode(d,e));return o}function decodeField$1(i,e){let o,d,h,g,b,$;return!e||!($=i.dictionary())?(h=decodeFieldType$1(i,decodeFieldChildren$1(i,e)),d=new Field$2(i.name(),h,i.nullable(),decodeCustomMetadata$1(i))):e.has(o=$.id().low)?(g=(g=$.indexType())?decodeIndexType$1(g):new Int32$1,b=new Dictionary$1(e.get(o),g,o,$.isOrdered()),d=new Field$2(i.name(),b,i.nullable(),decodeCustomMetadata$1(i))):(g=(g=$.indexType())?decodeIndexType$1(g):new Int32$1,e.set(o,h=decodeFieldType$1(i,decodeFieldChildren$1(i,e))),b=new Dictionary$1(h,g,o,$.isOrdered()),d=new Field$2(i.name(),b,i.nullable(),decodeCustomMetadata$1(i))),d||null}function decodeCustomMetadata$1(i){const e=new Map;if(i)for(let o,d,h=-1,g=Math.trunc(i.customMetadataLength());++h<g;)(o=i.customMetadata(h))&&(d=o.key())!=null&&e.set(d,o.value());return e}function decodeIndexType$1(i){return new Int_$1(i.isSigned(),i.bitWidth())}function decodeFieldType$1(i,e){const o=i.typeType();switch(o){case Type$2.NONE:return new Null$3;case Type$2.Null:return new Null$3;case Type$2.Binary:return new Binary$3;case Type$2.Utf8:return new Utf8$3;case Type$2.Bool:return new Bool$3;case Type$2.List:return new List$3((e||[])[0]);case Type$2.Struct_:return new Struct$1(e||[])}switch(o){case Type$2.Int:{const d=i.type(new Int$1);return new Int_$1(d.isSigned(),d.bitWidth())}case Type$2.FloatingPoint:{const d=i.type(new FloatingPoint$1);return new Float$1(d.precision())}case Type$2.Decimal:{const d=i.type(new Decimal$2);return new Decimal$3(d.scale(),d.precision(),d.bitWidth())}case Type$2.Date:{const d=i.type(new Date$2);return new Date_$1(d.unit())}case Type$2.Time:{const d=i.type(new Time$1);return new Time_$1(d.unit(),d.bitWidth())}case Type$2.Timestamp:{const d=i.type(new Timestamp$1);return new Timestamp_$1(d.unit(),d.timezone())}case Type$2.Interval:{const d=i.type(new Interval$1);return new Interval_$1(d.unit())}case Type$2.Union:{const d=i.type(new Union$1);return new Union_$1(d.mode(),d.typeIdsArray()||[],e||[])}case Type$2.FixedSizeBinary:{const d=i.type(new FixedSizeBinary$2);return new FixedSizeBinary$3(d.byteWidth())}case Type$2.FixedSizeList:{const d=i.type(new FixedSizeList$2);return new FixedSizeList$3(d.listSize(),(e||[])[0])}case Type$2.Map:{const d=i.type(new Map$2);return new Map_$1((e||[])[0],d.keysSorted())}}throw new Error(`Unrecognized type: "${Type$2[o]}" (${o})`)}function encodeSchema$1(i,e){const o=e.fields.map(g=>Field$2.encode(i,g));Schema$3.startFieldsVector(i,o.length);const d=Schema$3.createFieldsVector(i,o),h=e.metadata&&e.metadata.size>0?Schema$3.createCustomMetadataVector(i,[...e.metadata].map(([g,b])=>{const $=i.createString(`${g}`),j=i.createString(`${b}`);return KeyValue$1.startKeyValue(i),KeyValue$1.addKey(i,$),KeyValue$1.addValue(i,j),KeyValue$1.endKeyValue(i)})):-1;return Schema$3.startSchema(i),Schema$3.addFields(i,d),Schema$3.addEndianness(i,platformIsLittleEndian$1?Endianness$1.Little:Endianness$1.Big),h!==-1&&Schema$3.addCustomMetadata(i,h),Schema$3.endSchema(i)}function encodeField$1(i,e){let o=-1,d=-1,h=-1;const g=e.type;let b=e.typeId;DataType$1.isDictionary(g)?(b=g.dictionary.typeId,h=instance$7.visit(g,i),d=instance$7.visit(g.dictionary,i)):d=instance$7.visit(g,i);const $=(g.children||[]).map(tt=>Field$2.encode(i,tt)),j=Field$3.createChildrenVector(i,$),et=e.metadata&&e.metadata.size>0?Field$3.createCustomMetadataVector(i,[...e.metadata].map(([tt,nt])=>{const rt=i.createString(`${tt}`),ot=i.createString(`${nt}`);return KeyValue$1.startKeyValue(i),KeyValue$1.addKey(i,rt),KeyValue$1.addValue(i,ot),KeyValue$1.endKeyValue(i)})):-1;return e.name&&(o=i.createString(e.name)),Field$3.startField(i),Field$3.addType(i,d),Field$3.addTypeType(i,b),Field$3.addChildren(i,j),Field$3.addNullable(i,!!e.nullable),o!==-1&&Field$3.addName(i,o),h!==-1&&Field$3.addDictionary(i,h),et!==-1&&Field$3.addCustomMetadata(i,et),Field$3.endField(i)}function encodeRecordBatch$1(i,e){const o=e.nodes||[],d=e.buffers||[];RecordBatch$4.startNodesVector(i,o.length);for(const b of o.slice().reverse())FieldNode$2.encode(i,b);const h=i.endVector();RecordBatch$4.startBuffersVector(i,d.length);for(const b of d.slice().reverse())BufferRegion$1.encode(i,b);const g=i.endVector();return RecordBatch$4.startRecordBatch(i),RecordBatch$4.addLength(i,new Long(e.length,0)),RecordBatch$4.addNodes(i,h),RecordBatch$4.addBuffers(i,g),RecordBatch$4.endRecordBatch(i)}function encodeDictionaryBatch$1(i,e){const o=RecordBatch$3.encode(i,e.data);return DictionaryBatch$3.startDictionaryBatch(i),DictionaryBatch$3.addId(i,new Long(e.id,0)),DictionaryBatch$3.addIsDelta(i,e.isDelta),DictionaryBatch$3.addData(i,o),DictionaryBatch$3.endDictionaryBatch(i)}function encodeFieldNode$1(i,e){return FieldNode$3.createFieldNode(i,new Long(e.length,0),new Long(e.nullCount,0))}function encodeBufferRegion$1(i,e){return Buffer$1.createBuffer(i,new Long(e.offset,0),new Long(e.length,0))}const platformIsLittleEndian$1=(()=>{const i=new ArrayBuffer(2);return new DataView(i).setInt16(0,256,!0),new Int16Array(i)[0]===256})(),invalidMessageType$1=i=>`Expected ${MessageHeader$3[i]} Message in stream, but was null or length 0.`,nullMessage$1=i=>`Header pointer of flatbuffer-encoded ${MessageHeader$3[i]} Message is null or length 0.`,invalidMessageMetadata$1=(i,e)=>`Expected to read ${i} metadata bytes, but only read ${e}.`,invalidMessageBodyLength$1=(i,e)=>`Expected to read ${i} bytes for message body, but only read ${e}.`;let MessageReader$1=class{constructor(e){this.source=e instanceof ByteStream$1?e:new ByteStream$1(e)}[Symbol.iterator](){return this}next(){let e;return(e=this.readMetadataLength()).done||e.value===-1&&(e=this.readMetadataLength()).done||(e=this.readMetadata(e.value)).done?ITERATOR_DONE$1:e}throw(e){return this.source.throw(e)}return(e){return this.source.return(e)}readMessage(e){let o;if((o=this.next()).done)return null;if(e!=null&&o.value.headerType!==e)throw new Error(invalidMessageType$1(e));return o.value}readMessageBody(e){if(e<=0)return new Uint8Array(0);const o=toUint8Array$1(this.source.read(e));if(o.byteLength<e)throw new Error(invalidMessageBodyLength$1(e,o.byteLength));return o.byteOffset%8===0&&o.byteOffset+o.byteLength<=o.buffer.byteLength?o:o.slice()}readSchema(e=!1){const o=MessageHeader$3.Schema,d=this.readMessage(o),h=d==null?void 0:d.header();if(e&&!h)throw new Error(nullMessage$1(o));return h}readMetadataLength(){const e=this.source.read(PADDING$1),o=e&&new ByteBuffer$5(e),d=(o==null?void 0:o.readInt32(0))||0;return{done:d===0,value:d}}readMetadata(e){const o=this.source.read(e);if(!o)return ITERATOR_DONE$1;if(o.byteLength<e)throw new Error(invalidMessageMetadata$1(e,o.byteLength));return{done:!1,value:Message$2.decode(o)}}},AsyncMessageReader$1=class{constructor(e,o){this.source=e instanceof AsyncByteStream$1?e:isFileHandle$1(e)?new AsyncRandomAccessFile$1(e,o):new AsyncByteStream$1(e)}[Symbol.asyncIterator](){return this}next(){return __awaiter(this,void 0,void 0,function*(){let e;return(e=yield this.readMetadataLength()).done||e.value===-1&&(e=yield this.readMetadataLength()).done||(e=yield this.readMetadata(e.value)).done?ITERATOR_DONE$1:e})}throw(e){return __awaiter(this,void 0,void 0,function*(){return yield this.source.throw(e)})}return(e){return __awaiter(this,void 0,void 0,function*(){return yield this.source.return(e)})}readMessage(e){return __awaiter(this,void 0,void 0,function*(){let o;if((o=yield this.next()).done)return null;if(e!=null&&o.value.headerType!==e)throw new Error(invalidMessageType$1(e));return o.value})}readMessageBody(e){return __awaiter(this,void 0,void 0,function*(){if(e<=0)return new Uint8Array(0);const o=toUint8Array$1(yield this.source.read(e));if(o.byteLength<e)throw new Error(invalidMessageBodyLength$1(e,o.byteLength));return o.byteOffset%8===0&&o.byteOffset+o.byteLength<=o.buffer.byteLength?o:o.slice()})}readSchema(e=!1){return __awaiter(this,void 0,void 0,function*(){const o=MessageHeader$3.Schema,d=yield this.readMessage(o),h=d==null?void 0:d.header();if(e&&!h)throw new Error(nullMessage$1(o));return h})}readMetadataLength(){return __awaiter(this,void 0,void 0,function*(){const e=yield this.source.read(PADDING$1),o=e&&new ByteBuffer$5(e),d=(o==null?void 0:o.readInt32(0))||0;return{done:d===0,value:d}})}readMetadata(e){return __awaiter(this,void 0,void 0,function*(){const o=yield this.source.read(e);if(!o)return ITERATOR_DONE$1;if(o.byteLength<e)throw new Error(invalidMessageMetadata$1(e,o.byteLength));return{done:!1,value:Message$2.decode(o)}})}},JSONMessageReader$1=class extends MessageReader$1{constructor(e){super(new Uint8Array(0)),this._schema=!1,this._body=[],this._batchIndex=0,this._dictionaryIndex=0,this._json=e instanceof ArrowJSON$1?e:new ArrowJSON$1(e)}next(){const{_json:e}=this;if(!this._schema)return this._schema=!0,{done:!1,value:Message$2.fromJSON(e.schema,MessageHeader$3.Schema)};if(this._dictionaryIndex<e.dictionaries.length){const o=e.dictionaries[this._dictionaryIndex++];return this._body=o.data.columns,{done:!1,value:Message$2.fromJSON(o,MessageHeader$3.DictionaryBatch)}}if(this._batchIndex<e.batches.length){const o=e.batches[this._batchIndex++];return this._body=o.columns,{done:!1,value:Message$2.fromJSON(o,MessageHeader$3.RecordBatch)}}return this._body=[],ITERATOR_DONE$1}readMessageBody(e){return o(this._body);function o(d){return(d||[]).reduce((h,g)=>[...h,...g.VALIDITY&&[g.VALIDITY]||[],...g.TYPE&&[g.TYPE]||[],...g.OFFSET&&[g.OFFSET]||[],...g.DATA&&[g.DATA]||[],...o(g.children)],[])}}readMessage(e){let o;if((o=this.next()).done)return null;if(e!=null&&o.value.headerType!==e)throw new Error(invalidMessageType$1(e));return o.value}readSchema(){const e=MessageHeader$3.Schema,o=this.readMessage(e),d=o==null?void 0:o.header();if(!o||!d)throw new Error(nullMessage$1(e));return d}};const PADDING$1=4,MAGIC_STR$1="ARROW1",MAGIC$1=new Uint8Array(MAGIC_STR$1.length);for(let i=0;i<MAGIC_STR$1.length;i+=1)MAGIC$1[i]=MAGIC_STR$1.codePointAt(i);function checkForMagicArrowString$1(i,e=0){for(let o=-1,d=MAGIC$1.length;++o<d;)if(MAGIC$1[o]!==i[e+o])return!1;return!0}const magicLength$1=MAGIC$1.length,magicAndPadding$1=magicLength$1+PADDING$1,magicX2AndPadding$1=magicLength$1*2+PADDING$1;let RecordBatchReader$1=class ba extends ReadableInterop$1{constructor(e){super(),this._impl=e}get closed(){return this._impl.closed}get schema(){return this._impl.schema}get autoDestroy(){return this._impl.autoDestroy}get dictionaries(){return this._impl.dictionaries}get numDictionaries(){return this._impl.numDictionaries}get numRecordBatches(){return this._impl.numRecordBatches}get footer(){return this._impl.isFile()?this._impl.footer:null}isSync(){return this._impl.isSync()}isAsync(){return this._impl.isAsync()}isFile(){return this._impl.isFile()}isStream(){return this._impl.isStream()}next(){return this._impl.next()}throw(e){return this._impl.throw(e)}return(e){return this._impl.return(e)}cancel(){return this._impl.cancel()}reset(e){return this._impl.reset(e),this._DOMStream=void 0,this._nodeStream=void 0,this}open(e){const o=this._impl.open(e);return isPromise$1(o)?o.then(()=>this):this}readRecordBatch(e){return this._impl.isFile()?this._impl.readRecordBatch(e):null}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}toDOMStream(){return streamAdapters$1.toDOMStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this})}toNodeStream(){return streamAdapters$1.toNodeStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this},{objectMode:!0})}static throughNode(e){throw new Error('"throughNode" not available in this environment')}static throughDOM(e,o){throw new Error('"throughDOM" not available in this environment')}static from(e){return e instanceof ba?e:isArrowJSON$1(e)?fromArrowJSON$1(e):isFileHandle$1(e)?fromFileHandle$1(e):isPromise$1(e)?__awaiter(this,void 0,void 0,function*(){return yield ba.from(yield e)}):isFetchResponse$1(e)||isReadableDOMStream$1(e)||isReadableNodeStream$1(e)||isAsyncIterable$1(e)?fromAsyncByteStream$1(new AsyncByteStream$1(e)):fromByteStream$1(new ByteStream$1(e))}static readAll(e){return e instanceof ba?e.isSync()?readAllSync$1(e):readAllAsync$1(e):isArrowJSON$1(e)||ArrayBuffer.isView(e)||isIterable$2(e)||isIteratorResult$1(e)?readAllSync$1(e):readAllAsync$1(e)}},RecordBatchStreamReader$1=class extends RecordBatchReader$1{constructor(e){super(e),this._impl=e}readAll(){return[...this]}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return __asyncGenerator(this,arguments,function*(){yield __await(yield*__asyncDelegator(__asyncValues(this[Symbol.iterator]())))})}},AsyncRecordBatchStreamReader$1=class extends RecordBatchReader$1{constructor(e){super(e),this._impl=e}readAll(){var e,o;return __awaiter(this,void 0,void 0,function*(){const d=new Array;try{for(var h=__asyncValues(this),g;g=yield h.next(),!g.done;){const b=g.value;d.push(b)}}catch(b){e={error:b}}finally{try{g&&!g.done&&(o=h.return)&&(yield o.call(h))}finally{if(e)throw e.error}}return d})}[Symbol.iterator](){throw new Error("AsyncRecordBatchStreamReader is not Iterable")}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}},RecordBatchFileReader$1=class extends RecordBatchStreamReader$1{constructor(e){super(e),this._impl=e}},AsyncRecordBatchFileReader$1=class extends AsyncRecordBatchStreamReader$1{constructor(e){super(e),this._impl=e}},RecordBatchReaderImpl$1=class{constructor(e=new Map){this.closed=!1,this.autoDestroy=!0,this._dictionaryIndex=0,this._recordBatchIndex=0,this.dictionaries=e}get numDictionaries(){return this._dictionaryIndex}get numRecordBatches(){return this._recordBatchIndex}isSync(){return!1}isAsync(){return!1}isFile(){return!1}isStream(){return!1}reset(e){return this._dictionaryIndex=0,this._recordBatchIndex=0,this.schema=e,this.dictionaries=new Map,this}_loadRecordBatch(e,o){const d=this._loadVectors(e,o,this.schema.fields),h=makeData$1({type:new Struct$1(this.schema.fields),length:e.length,children:d});return new RecordBatch$5(this.schema,h)}_loadDictionaryBatch(e,o){const{id:d,isDelta:h}=e,{dictionaries:g,schema:b}=this,$=g.get(d);if(h||!$){const j=b.dictionaries.get(d),et=this._loadVectors(e.data,o,[j]);return($&&h?$.concat(new Vector$2(et)):new Vector$2(et)).memoize()}return $.memoize()}_loadVectors(e,o,d){return new VectorLoader$1(o,e.nodes,e.buffers,this.dictionaries).visitMany(d)}},RecordBatchStreamReaderImpl$1=class extends RecordBatchReaderImpl$1{constructor(e,o){super(o),this._reader=isArrowJSON$1(e)?new JSONMessageReader$1(this._handle=e):new MessageReader$1(this._handle=e)}isSync(){return!0}isStream(){return!0}[Symbol.iterator](){return this}cancel(){!this.closed&&(this.closed=!0)&&(this.reset()._reader.return(),this._reader=null,this.dictionaries=null)}open(e){return this.closed||(this.autoDestroy=shouldAutoDestroy$1(this,e),this.schema||(this.schema=this._reader.readSchema())||this.cancel()),this}throw(e){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.throw(e):ITERATOR_DONE$1}return(e){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.return(e):ITERATOR_DONE$1}next(){if(this.closed)return ITERATOR_DONE$1;let e;const{_reader:o}=this;for(;e=this._readNextMessageAndValidate();)if(e.isSchema())this.reset(e.header());else if(e.isRecordBatch()){this._recordBatchIndex++;const d=e.header(),h=o.readMessageBody(e.bodyLength);return{done:!1,value:this._loadRecordBatch(d,h)}}else if(e.isDictionaryBatch()){this._dictionaryIndex++;const d=e.header(),h=o.readMessageBody(e.bodyLength),g=this._loadDictionaryBatch(d,h);this.dictionaries.set(d.id,g)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new _InternalEmptyPlaceholderRecordBatch$1(this.schema)}):this.return()}_readNextMessageAndValidate(e){return this._reader.readMessage(e)}},AsyncRecordBatchStreamReaderImpl$1=class extends RecordBatchReaderImpl$1{constructor(e,o){super(o),this._reader=new AsyncMessageReader$1(this._handle=e)}isAsync(){return!0}isStream(){return!0}[Symbol.asyncIterator](){return this}cancel(){return __awaiter(this,void 0,void 0,function*(){!this.closed&&(this.closed=!0)&&(yield this.reset()._reader.return(),this._reader=null,this.dictionaries=null)})}open(e){return __awaiter(this,void 0,void 0,function*(){return this.closed||(this.autoDestroy=shouldAutoDestroy$1(this,e),this.schema||(this.schema=yield this._reader.readSchema())||(yield this.cancel())),this})}throw(e){return __awaiter(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.throw(e):ITERATOR_DONE$1})}return(e){return __awaiter(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.return(e):ITERATOR_DONE$1})}next(){return __awaiter(this,void 0,void 0,function*(){if(this.closed)return ITERATOR_DONE$1;let e;const{_reader:o}=this;for(;e=yield this._readNextMessageAndValidate();)if(e.isSchema())yield this.reset(e.header());else if(e.isRecordBatch()){this._recordBatchIndex++;const d=e.header(),h=yield o.readMessageBody(e.bodyLength);return{done:!1,value:this._loadRecordBatch(d,h)}}else if(e.isDictionaryBatch()){this._dictionaryIndex++;const d=e.header(),h=yield o.readMessageBody(e.bodyLength),g=this._loadDictionaryBatch(d,h);this.dictionaries.set(d.id,g)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new _InternalEmptyPlaceholderRecordBatch$1(this.schema)}):yield this.return()})}_readNextMessageAndValidate(e){return __awaiter(this,void 0,void 0,function*(){return yield this._reader.readMessage(e)})}},RecordBatchFileReaderImpl$1=class extends RecordBatchStreamReaderImpl$1{constructor(e,o){super(e instanceof RandomAccessFile$1?e:new RandomAccessFile$1(e),o)}get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}isSync(){return!0}isFile(){return!0}open(e){if(!this.closed&&!this._footer){this.schema=(this._footer=this._readFooter()).schema;for(const o of this._footer.dictionaryBatches())o&&this._readDictionaryBatch(this._dictionaryIndex++)}return super.open(e)}readRecordBatch(e){var o;if(this.closed)return null;this._footer||this.open();const d=(o=this._footer)===null||o===void 0?void 0:o.getRecordBatch(e);if(d&&this._handle.seek(d.offset)){const h=this._reader.readMessage(MessageHeader$3.RecordBatch);if(h!=null&&h.isRecordBatch()){const g=h.header(),b=this._reader.readMessageBody(h.bodyLength);return this._loadRecordBatch(g,b)}}return null}_readDictionaryBatch(e){var o;const d=(o=this._footer)===null||o===void 0?void 0:o.getDictionaryBatch(e);if(d&&this._handle.seek(d.offset)){const h=this._reader.readMessage(MessageHeader$3.DictionaryBatch);if(h!=null&&h.isDictionaryBatch()){const g=h.header(),b=this._reader.readMessageBody(h.bodyLength),$=this._loadDictionaryBatch(g,b);this.dictionaries.set(g.id,$)}}}_readFooter(){const{_handle:e}=this,o=e.size-magicAndPadding$1,d=e.readInt32(o),h=e.readAt(o-d,d);return Footer_$1.decode(h)}_readNextMessageAndValidate(e){var o;if(this._footer||this.open(),this._footer&&this._recordBatchIndex<this.numRecordBatches){const d=(o=this._footer)===null||o===void 0?void 0:o.getRecordBatch(this._recordBatchIndex);if(d&&this._handle.seek(d.offset))return this._reader.readMessage(e)}return null}},AsyncRecordBatchFileReaderImpl$1=class extends AsyncRecordBatchStreamReaderImpl$1{constructor(e,...o){const d=typeof o[0]!="number"?o.shift():void 0,h=o[0]instanceof Map?o.shift():void 0;super(e instanceof AsyncRandomAccessFile$1?e:new AsyncRandomAccessFile$1(e,d),h)}get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}isFile(){return!0}isAsync(){return!0}open(e){const o=Object.create(null,{open:{get:()=>super.open}});return __awaiter(this,void 0,void 0,function*(){if(!this.closed&&!this._footer){this.schema=(this._footer=yield this._readFooter()).schema;for(const d of this._footer.dictionaryBatches())d&&(yield this._readDictionaryBatch(this._dictionaryIndex++))}return yield o.open.call(this,e)})}readRecordBatch(e){var o;return __awaiter(this,void 0,void 0,function*(){if(this.closed)return null;this._footer||(yield this.open());const d=(o=this._footer)===null||o===void 0?void 0:o.getRecordBatch(e);if(d&&(yield this._handle.seek(d.offset))){const h=yield this._reader.readMessage(MessageHeader$3.RecordBatch);if(h!=null&&h.isRecordBatch()){const g=h.header(),b=yield this._reader.readMessageBody(h.bodyLength);return this._loadRecordBatch(g,b)}}return null})}_readDictionaryBatch(e){var o;return __awaiter(this,void 0,void 0,function*(){const d=(o=this._footer)===null||o===void 0?void 0:o.getDictionaryBatch(e);if(d&&(yield this._handle.seek(d.offset))){const h=yield this._reader.readMessage(MessageHeader$3.DictionaryBatch);if(h!=null&&h.isDictionaryBatch()){const g=h.header(),b=yield this._reader.readMessageBody(h.bodyLength),$=this._loadDictionaryBatch(g,b);this.dictionaries.set(g.id,$)}}})}_readFooter(){return __awaiter(this,void 0,void 0,function*(){const{_handle:e}=this;e._pending&&(yield e._pending);const o=e.size-magicAndPadding$1,d=yield e.readInt32(o),h=yield e.readAt(o-d,d);return Footer_$1.decode(h)})}_readNextMessageAndValidate(e){return __awaiter(this,void 0,void 0,function*(){if(this._footer||(yield this.open()),this._footer&&this._recordBatchIndex<this.numRecordBatches){const o=this._footer.getRecordBatch(this._recordBatchIndex);if(o&&(yield this._handle.seek(o.offset)))return yield this._reader.readMessage(e)}return null})}},RecordBatchJSONReaderImpl$1=class extends RecordBatchStreamReaderImpl$1{constructor(e,o){super(e,o)}_loadVectors(e,o,d){return new JSONVectorLoader$1(o,e.nodes,e.buffers,this.dictionaries).visitMany(d)}};function shouldAutoDestroy$1(i,e){return e&&typeof e.autoDestroy=="boolean"?e.autoDestroy:i.autoDestroy}function*readAllSync$1(i){const e=RecordBatchReader$1.from(i);try{if(!e.open({autoDestroy:!1}).closed)do yield e;while(!e.reset().open().closed)}finally{e.cancel()}}function readAllAsync$1(i){return __asyncGenerator(this,arguments,function*(){const o=yield __await(RecordBatchReader$1.from(i));try{if(!(yield __await(o.open({autoDestroy:!1}))).closed)do yield yield __await(o);while(!(yield __await(o.reset().open())).closed)}finally{yield __await(o.cancel())}})}function fromArrowJSON$1(i){return new RecordBatchStreamReader$1(new RecordBatchJSONReaderImpl$1(i))}function fromByteStream$1(i){const e=i.peek(magicLength$1+7&-8);return e&&e.byteLength>=4?checkForMagicArrowString$1(e)?new RecordBatchFileReader$1(new RecordBatchFileReaderImpl$1(i.read())):new RecordBatchStreamReader$1(new RecordBatchStreamReaderImpl$1(i)):new RecordBatchStreamReader$1(new RecordBatchStreamReaderImpl$1(function*(){}()))}function fromAsyncByteStream$1(i){return __awaiter(this,void 0,void 0,function*(){const e=yield i.peek(magicLength$1+7&-8);return e&&e.byteLength>=4?checkForMagicArrowString$1(e)?new RecordBatchFileReader$1(new RecordBatchFileReaderImpl$1(yield i.read())):new AsyncRecordBatchStreamReader$1(new AsyncRecordBatchStreamReaderImpl$1(i)):new AsyncRecordBatchStreamReader$1(new AsyncRecordBatchStreamReaderImpl$1(function(){return __asyncGenerator(this,arguments,function*(){})}()))})}function fromFileHandle$1(i){return __awaiter(this,void 0,void 0,function*(){const{size:e}=yield i.stat(),o=new AsyncRandomAccessFile$1(i,e);return e>=magicX2AndPadding$1&&checkForMagicArrowString$1(yield o.readAt(0,magicLength$1+7&-8))?new AsyncRecordBatchFileReader$1(new AsyncRecordBatchFileReaderImpl$1(o)):new AsyncRecordBatchStreamReader$1(new AsyncRecordBatchStreamReaderImpl$1(o))})}function tableFromIPC(i){const e=RecordBatchReader$1.from(i);return isPromise$1(e)?e.then(o=>tableFromIPC(o)):e.isAsync()?e.readAll().then(o=>new Table$2(o)):new Table$2(e.readAll())}function socketConnector(i="ws://localhost:3000/"){const e=[];let o=!1,d=null,h;const g={open(){o=!0,j()},close(){for(o=!1,d=null,h=null;e.length;)e.shift().reject("Socket closed")},error(et){if(d){const{reject:tt}=d;d=null,j(),tt(et)}else console.error("WebSocket error: ",et)},message({data:et}){if(d){const{query:tt,resolve:nt,reject:rt}=d;if(d=null,j(),typeof et=="string"){const ot=JSON.parse(et);ot.error?rt(ot.error):nt(ot)}else if(tt.type==="exec")nt();else if(tt.type==="arrow")nt(tableFromIPC(et.arrayBuffer()));else throw new Error(`Unexpected socket data: ${et}`)}else console.log("WebSocket message: ",et)}};function b(){h=new WebSocket(i);for(const et in g)h.addEventListener(et,g[et])}function $(et,tt,nt){h==null&&b(),e.push({query:et,resolve:tt,reject:nt}),o&&!d&&j()}function j(){e.length&&(d=e.shift(),h.send(JSON.stringify(d.query)))}return{get connected(){return o},query(et){return new Promise((tt,nt)=>$(et,tt,nt))}}}class Ref{constructor(e,o){e&&(this.table=String(e)),o&&(this.column=o)}get columns(){return this.column?[this.column]:[]}toString(){const{table:e,column:o}=this;if(o){const d=o.startsWith("*")?o:`"${o}"`;return`${e?`${quoteTableName(e)}.`:""}${d}`}else return e?quoteTableName(e):"NULL"}}function quoteTableName(i){return i.split(".").map(o=>`"${o}"`).join(".")}function isColumnRefFor(i,e){return i instanceof Ref&&i.column===e}function asColumn(i){return typeof i=="string"?column$1(i):i}function asRelation(i){return typeof i=="string"?relation(i):i}function relation(i){return new Ref(i)}function column$1(i,e){return arguments.length===1&&(e=i,i=null),new Ref(i,e)}function literalToSQL(i){switch(typeof i){case"boolean":return i?"TRUE":"FALSE";case"string":return`'${i}'`;case"number":return Number.isFinite(i)?String(i):"NULL";default:if(i==null)return"NULL";if(i instanceof Date){const e=+i;if(Number.isNaN(e))return"NULL";const o=i.getUTCFullYear(),d=i.getUTCMonth(),h=i.getUTCDate();return e===Date.UTC(o,d,h)?`MAKE_DATE(${o}, ${d+1}, ${h})`:`EPOCH_MS(${e})`}else return i instanceof RegExp?`'${i.source}'`:String(i)}}const isParamLike=i=>typeof(i==null?void 0:i.addEventListener)=="function";function isSQLExpression(i){return i instanceof SQLExpression}class SQLExpression{constructor(e,o,d){this._expr=Array.isArray(e)?e:[e],this._deps=o||[],this.annotate(d);const h=this._expr.filter(g=>isParamLike(g));h.length>0?(this._params=Array.from(new Set(h)),this._params.forEach(g=>{g.addEventListener("value",()=>{var b;return update(this,(b=this.map)==null?void 0:b.get("value"))})})):this.addEventListener=void 0}get value(){return this}get columns(){const{_params:e,_deps:o}=this;if(e){const d=new Set(e.flatMap(h=>{var b;const g=(b=h.value)==null?void 0:b.columns;return Array.isArray(g)?g:[]}));if(d.size){const h=new Set(o);return d.forEach(g=>h.add(g)),Array.from(h)}}return o}get column(){return this._deps.length?this._deps[0]:this.columns[0]}annotate(...e){return Object.assign(this,...e)}toString(){return this._expr.map(e=>isParamLike(e)&&!isSQLExpression(e)?literalToSQL(e.value):e).join("")}addEventListener(e,o){const d=this.map||(this.map=new Map);(d.get(e)||(d.set(e,new Set),d.get(e))).add(o)}}function update(i,e){if(e!=null&&e.size)return Promise.allSettled(Array.from(e,o=>o(i)))}function parseSQL(i,e){const o=[i[0]],d=new Set,h=e.length;for(let g=0,b=0;g<h;){const $=e[g];isParamLike($)?o[++b]=$:(Array.isArray($==null?void 0:$.columns)&&$.columns.forEach(et=>d.add(et)),o[b]+=typeof $=="string"?$:literalToSQL($));const j=i[++g];isParamLike(o[b])?o[++b]=j:o[b]+=j}return{spans:o,cols:Array.from(d)}}function sql(i,...e){const{spans:o,cols:d}=parseSQL(i,e);return new SQLExpression(o,d)}function desc(i){const e=asColumn(i);return sql`${e} DESC NULLS LAST`.annotate({label:e==null?void 0:e.label,desc:!0})}const literal=i=>({value:i,toString:()=>literalToSQL(i)});function visit(i){var e;i(this.op,this),(e=this.children)==null||e.forEach(o=>o.visit(i))}function logical(i,e){const o=e.filter(h=>h!=null).map(asColumn),d=o.map((h,g)=>g?` ${i} `:"");return e.length&&d.push(""),sql(d,...o).annotate({op:i,children:o,visit})}const and$1=(...i)=>logical("AND",i.flat()),or=(...i)=>logical("OR",i.flat()),unaryPostOp=i=>e=>sql`(${asColumn(e)} ${i})`.annotate({op:i,a:e,visit}),isNull=unaryPostOp("IS NULL"),isNotNull=unaryPostOp("IS NOT NULL"),binaryOp=i=>(e,o)=>sql`(${asColumn(e)} ${i} ${asColumn(o)})`.annotate({op:i,a:e,b:o,visit}),eq$1=binaryOp("="),neq$1=binaryOp("<>"),lt$1=binaryOp("<"),gt$1=binaryOp(">"),lte=binaryOp("<="),isNotDistinct=binaryOp("IS NOT DISTINCT FROM");function rangeOp(i,e,o,d){e=asColumn(e);const h=i.startsWith("NOT ")?"NOT ":"";return(o?d?sql`${h}(${o[0]} <= ${e} AND ${e} < ${o[1]})`:sql`(${e} ${i} ${o[0]} AND ${o[1]})`:sql``).annotate({op:i,visit,field:e,range:o})}const isBetween=(i,e,o)=>rangeOp("BETWEEN",i,e,o);function repeat(i,e){return Array.from({length:i},()=>e)}function functionCall(i,e){return(...o)=>{const d=o.map(asColumn),h=e?`::${e}`:"";return(d.length?sql([`${i}(`,...repeat(d.length-1,", "),`)${h}`],...d):sql`${i}()${h}`).annotate({func:i,args:d})}}const regexp_matches=functionCall("REGEXP_MATCHES"),contains$1=functionCall("CONTAINS"),prefix=functionCall("PREFIX"),suffix=functionCall("SUFFIX");class WindowFunction extends SQLExpression{constructor(e,o,d,h,g="",b="",$=""){let j;if(h&&!(g||b||$))j=h?sql`${o} OVER "${h}"`:sql`${o} OVER ()`;else{const rt=g&&b?" ":"",ot=(g||b)&&$?" ":"";j=sql`${o} OVER (${h?`"${h}" `:""}${g}${rt}${b}${ot}${$})`}d&&(j=sql`(${j})::${d}`);const{_expr:tt,_deps:nt}=j;super(tt,nt,{window:e,func:o,type:d,name:h,group:g,order:b,frame:$})}get basis(){return this.column}get label(){const{func:e}=this;return e.label??e.toString()}over(e){const{window:o,func:d,type:h,group:g,order:b,frame:$}=this;return new WindowFunction(o,d,h,e,g,b,$)}partitionby(...e){const o=e.flat().filter(tt=>tt).map(asColumn),d=sql(["PARTITION BY ",repeat(o.length-1,", "),""],...o),{window:h,func:g,type:b,name:$,order:j,frame:et}=this;return new WindowFunction(h,g,b,$,d,j,et)}orderby(...e){const o=e.flat().filter(tt=>tt).map(asColumn),d=sql(["ORDER BY ",repeat(o.length-1,", "),""],...o),{window:h,func:g,type:b,name:$,group:j,frame:et}=this;return new WindowFunction(h,g,b,$,j,d,et)}rows(e){const o=windowFrame("ROWS",e),{window:d,func:h,type:g,name:b,group:$,order:j}=this;return new WindowFunction(d,h,g,b,$,j,o)}range(e){const o=windowFrame("RANGE",e),{window:d,func:h,type:g,name:b,group:$,order:j}=this;return new WindowFunction(d,h,g,b,$,j,o)}}function windowFrame(i,e){if(isParamLike(e)){const o=sql`${e}`;return o.toString=()=>`${i} ${frameToSQL(e.value)}`,o}return`${i} ${frameToSQL(e)}`}function frameToSQL(i){const[e,o]=i,d=e===0?"CURRENT ROW":Number.isFinite(e)?`${Math.abs(e)} PRECEDING`:"UNBOUNDED PRECEDING",h=o===0?"CURRENT ROW":Number.isFinite(o)?`${Math.abs(o)} FOLLOWING`:"UNBOUNDED FOLLOWING";return`BETWEEN ${d} AND ${h}`}class AggregateFunction extends SQLExpression{constructor(e,o,d,h,g){o=(o||[]).map(asColumn);const{strings:b,exprs:$}=aggExpr(e,o,d,h,g),{spans:j,cols:et}=parseSQL(b,$);super(j,et,{aggregate:e,args:o,type:d,isDistinct:h,filter:g})}get basis(){return this.column}get label(){const{aggregate:e,args:o,isDistinct:d}=this,h=d?"DISTINCT"+(o.length?" ":""):"",g=o.length?`(${h}${o.map(unquoted).join(", ")})`:"";return`${e.toLowerCase()}${g}`}distinct(){const{aggregate:e,args:o,type:d,filter:h}=this;return new AggregateFunction(e,o,d,!0,h)}where(e){const{aggregate:o,args:d,type:h,isDistinct:g}=this;return new AggregateFunction(o,d,h,g,e)}window(){const{aggregate:e,args:o,type:d,isDistinct:h}=this,g=new AggregateFunction(e,o,null,h);return new WindowFunction(e,g,d)}partitionby(...e){return this.window().partitionby(...e)}orderby(...e){return this.window().orderby(...e)}rows(e,o){return this.window().rows(e,o)}range(e,o){return this.window().range(e,o)}}function aggExpr(i,e,o,d,h){const g=`)${o?`::${o}`:""}`;let b=[`${i}(${d?"DISTINCT ":""}`],$=[];return e.length?(b=b.concat([...repeat(e.length-1,", "),`${g}${h?" FILTER (WHERE ":""}`,...h?[")"]:[]]),$=[...e,...h?[h]:[]]):b[0]+="*"+g,{exprs:$,strings:b}}function unquoted(i){const e=literalToSQL(i);return e&&e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function aggf(i,e){return(...o)=>new AggregateFunction(i,o,e)}const count$2=aggf("COUNT","INTEGER"),max$2=aggf("MAX"),min$3=aggf("MIN"),sum$3=aggf("SUM","DOUBLE"),regrIntercept=aggf("REGR_INTERCEPT"),regrSlope=aggf("REGR_SLOPE"),regrCount=aggf("REGR_COUNT"),regrSYY=aggf("REGR_SYY"),regrSXX=aggf("REGR_SXX"),regrAvgX=aggf("REGR_AVGX"),argmin=aggf("ARG_MIN"),argmax=aggf("ARG_MAX");function cast(i,e){const o=asColumn(i),d=sql`CAST(${o} AS ${e})`;return Object.defineProperty(d,"label",{enumerable:!0,get(){return i.label}}),Object.defineProperty(d,"aggregate",{enumerable:!0,get(){return i.aggregate||!1}}),d}const castDouble=i=>cast(i,"DOUBLE"),epoch_ms=i=>{const e=asColumn(i);return sql`(1000 * (epoch(${e}) - second(${e})) + millisecond(${e}))::DOUBLE`};class Query{static select(...e){return new Query().select(...e)}static from(...e){return new Query().from(...e)}static with(...e){return new Query().with(...e)}static union(...e){return new SetOperation("UNION",e.flat())}static unionAll(...e){return new SetOperation("UNION ALL",e.flat())}static intersect(...e){return new SetOperation("INTERSECT",e.flat())}static except(...e){return new SetOperation("EXCEPT",e.flat())}constructor(){this.query={with:[],select:[],from:[],where:[],groupby:[],having:[],window:[],qualify:[],orderby:[]}}clone(){const e=new Query;return e.query={...this.query},e}with(...e){const{query:o}=this;if(e.length===0)return o.with;{const d=[],h=(g,b)=>{const $=b.clone();$.cteFor=this,d.push({as:g,query:$})};return e.flat().forEach(g=>{if(g!=null)if(g.as&&g.query)h(g.as,g.query);else for(const b in g)h(b,g[b])}),o.with=o.with.concat(d),this}}select(...e){const{query:o}=this;if(e.length===0)return o.select;{const d=[];for(const h of e.flat())if(h!=null)if(typeof h=="string")d.push({as:h,expr:asColumn(h)});else if(h instanceof Ref)d.push({as:h.column,expr:h});else if(Array.isArray(h))d.push({as:h[0],expr:h[1]});else for(const g in h)d.push({as:unquote(g),expr:asColumn(h[g])});return o.select=o.select.concat(d),this}}$select(...e){return this.query.select=[],this.select(...e)}distinct(e=!0){return this.query.distinct=!!e,this}from(...e){const{query:o}=this;if(e.length===0)return o.from;{const d=[];return e.flat().forEach(h=>{if(h!=null)if(typeof h=="string")d.push({as:h,from:asRelation(h)});else if(h instanceof Ref)d.push({as:h.table,from:h});else if(isQuery(h)||isSQLExpression(h))d.push({from:h});else if(Array.isArray(h))d.push({as:unquote(h[0]),from:asRelation(h[1])});else for(const g in h)d.push({as:unquote(g),from:asRelation(h[g])})}),o.from=o.from.concat(d),this}}$from(...e){return this.query.from=[],this.from(...e)}sample(e,o){const{query:d}=this;if(arguments.length===0)return d.sample;{let h=e;return typeof e=="number"&&(h=e>0&&e<1?{perc:100*e,method:o}:{rows:Math.round(e),method:o}),d.sample=h,this}}where(...e){const{query:o}=this;return e.length===0?o.where:(o.where=o.where.concat(e.flat().filter(d=>d)),this)}$where(...e){return this.query.where=[],this.where(...e)}groupby(...e){const{query:o}=this;return e.length===0?o.groupby:(o.groupby=o.groupby.concat(e.flat().filter(d=>d).map(asColumn)),this)}$groupby(...e){return this.query.groupby=[],this.groupby(...e)}having(...e){const{query:o}=this;return e.length===0?o.having:(o.having=o.having.concat(e.flat().filter(d=>d)),this)}window(...e){const{query:o}=this;if(e.length===0)return o.window;{const d=[];return e.flat().forEach(h=>{if(h!=null)for(const g in h)d.push({as:unquote(g),expr:h[g]})}),o.window=o.window.concat(d),this}}qualify(...e){const{query:o}=this;return e.length===0?o.qualify:(o.qualify=o.qualify.concat(e.flat().filter(d=>d)),this)}orderby(...e){const{query:o}=this;return e.length===0?o.orderby:(o.orderby=o.orderby.concat(e.flat().filter(d=>d).map(asColumn)),this)}limit(e){const{query:o}=this;return arguments.length===0?o.limit:(o.limit=Number.isFinite(e)?e:void 0,this)}offset(e){const{query:o}=this;return arguments.length===0?o.offset:(o.offset=Number.isFinite(e)?e:void 0,this)}get subqueries(){const{query:e,cteFor:o}=this,d=((o==null?void 0:o.query)||e).with,h=d==null?void 0:d.reduce((b,{as:$,query:j})=>(b[$]=j,b),{}),g=[];return e.from.forEach(({from:b})=>{if(isQuery(b))g.push(b);else if(h[b.table]){const $=h[b.table];g.push($)}}),g}toString(){const{select:e,distinct:o,from:d,sample:h,where:g,groupby:b,having:$,window:j,qualify:et,orderby:tt,limit:nt,offset:rt,with:ot}=this.query,st=[];if(ot.length){const vt=ot.map(({as:at,query:ut})=>`"${at}" AS (${ut})`);st.push(`WITH ${vt.join(", ")}`)}const bt=e.map(({as:vt,expr:at})=>isColumnRefFor(at,vt)&&!at.table?`${at}`:`${at} AS "${vt}"`);if(st.push(`SELECT${o?" DISTINCT":""} ${bt.join(", ")}`),d.length){const vt=d.map(({as:at,from:ut})=>{const $t=isQuery(ut)?`(${ut})`:`${ut}`;return!at||at===ut.table?$t:`${$t} AS "${at}"`});st.push(`FROM ${vt.join(", ")}`)}if(g.length){const vt=g.map(String).filter(at=>at).join(" AND ");vt&&st.push(`WHERE ${vt}`)}if(h){const{rows:vt,perc:at,method:ut,seed:$t}=h,wt=vt?`${vt} ROWS`:`${at} PERCENT`,At=ut?` (${ut}${$t!=null?`, ${$t}`:""})`:"";st.push(`USING SAMPLE ${wt}${At}`)}if(b.length&&st.push(`GROUP BY ${b.join(", ")}`),$.length){const vt=$.map(String).filter(at=>at).join(" AND ");vt&&st.push(`HAVING ${vt}`)}if(j.length){const vt=j.map(({as:at,expr:ut})=>`"${at}" AS (${ut})`);st.push(`WINDOW ${vt.join(", ")}`)}if(et.length){const vt=et.map(String).filter(at=>at).join(" AND ");vt&&st.push(`QUALIFY ${vt}`)}return tt.length&&st.push(`ORDER BY ${tt.join(", ")}`),Number.isFinite(nt)&&st.push(`LIMIT ${nt}`),Number.isFinite(rt)&&st.push(`OFFSET ${rt}`),st.join(" ")}}class SetOperation{constructor(e,o){this.op=e,this.queries=o.map(d=>d.clone()),this.query={orderby:[]}}clone(){const e=new SetOperation(this.op,this.queries);return e.query={...this.query},e}orderby(...e){const{query:o}=this;return e.length===0?o.orderby:(o.orderby=o.orderby.concat(e.flat().filter(d=>d).map(asColumn)),this)}limit(e){const{query:o}=this;return arguments.length===0?o.limit:(o.limit=Number.isFinite(e)?e:void 0,this)}offset(e){const{query:o}=this;return arguments.length===0?o.offset:(o.offset=Number.isFinite(e)?e:void 0,this)}get subqueries(){const{queries:e,cteFor:o}=this;return o&&e.forEach(d=>d.cteFor=o),e}toString(){const{op:e,queries:o,query:{orderby:d,limit:h,offset:g}}=this,b=[o.join(` ${e} `)];return d.length&&b.push(`ORDER BY ${d.join(", ")}`),Number.isFinite(h)&&b.push(`LIMIT ${h}`),Number.isFinite(g)&&b.push(`OFFSET ${g}`),b.join(" ")}}function isQuery(i){return i instanceof Query||i instanceof SetOperation}function unquote(i){return isDoubleQuoted(i)?i.slice(1,-1):i}function isDoubleQuoted(i){return i[0]==='"'&&i[i.length-1]==='"'}function create$2(i,e,{replace:o=!1,temp:d=!0,view:h=!1}={}){return"CREATE"+(o?" OR REPLACE ":" ")+(d?"TEMP ":"")+(h?"VIEW":"TABLE")+(o?" ":" IF NOT EXISTS ")+i+" AS "+e}function sqlFrom(i,{columns:e=Object.keys((i==null?void 0:i[0])||{})}={}){let o=[];if(Array.isArray(e)?(o=e,e=o.reduce((h,g)=>(h[g]=g,h),{})):e&&(o=Object.keys(e)),!o.length)throw new Error("Can not create table from empty column set.");const d=[];for(const h of i){const g=o.map(b=>`${literalToSQL(h[b])} AS "${e[b]}"`);d.push(`(SELECT ${g.join(", ")})`)}return d.join(" UNION ALL ")}function loadObjects(i,e,o={}){const{select:d=["*"],...h}=o,g=sqlFrom(e),b=d.length===1&&d[0]==="*"?g:`SELECT ${d} FROM ${g}`;return create$2(i,b,h)}function jsType(i){switch(i){case"BIGINT":case"HUGEINT":case"INTEGER":case"SMALLINT":case"TINYINT":case"UBIGINT":case"UINTEGER":case"USMALLINT":case"UTINYINT":case"DOUBLE":case"FLOAT":case"REAL":case"DECIMAL":return"number";case"DATE":case"TIMESTAMP":case"TIMESTAMPTZ":case"TIME":return"date";case"BOOLEAN":return"boolean";case"VARCHAR":case"UUID":return"string";case"LIST":return"array";case"BLOB":case"STRUCT":case"MAP":return"object";default:throw new Error(`Unsupported type: ${i}`)}}const Count="count",Nulls="nulls",Max="max",Min="min",Distinct="distinct",statMap={[Count]:count$2,[Distinct]:i=>count$2(i).distinct(),[Max]:max$2,[Min]:min$3,[Nulls]:i=>count$2().where(isNull(i))};function summarize({table:i,column:e},o){return Query.from(i).select(o.map(d=>[d,statMap[d](e)]))}const object$1=()=>Object.create(null);class Catalog{constructor(e){this.mc=e,this.clear()}clear(){this.tables=object$1()}tableInfo(e){const o=this.tables;if(o[e])return o[e];const d=getTableInfo(this.mc,e).catch(h=>{throw o[e]=null,h});return o[e]=d}async fieldInfo({table:e,column:o,stats:d}){const g=(await this.tableInfo(e))[o];if(g==null)return;if(!(d!=null&&d.length))return g;const b=await this.mc.query(summarize(g,d),{persist:!0}),$={...g,...Array.from(b)[0]};for(const j in $){const et=$[j];typeof et=="bigint"&&($[j]=Number(et))}return $}async queryFields(e){const o=await resolveFields(this,e);return(await Promise.all(o.map(h=>this.fieldInfo(h)))).filter(h=>h)}}async function getTableInfo(i,e){const o=await i.query(`DESCRIBE ${asRelation(e)}`,{type:"json",cache:!1}),d=object$1();for(const h of o)d[h.column_name]={table:e,column:h.column_name,sqlType:h.column_type,type:jsType(h.column_type),nullable:h.null==="YES"};return d}async function resolveFields(i,e){return e.length===1&&e[0].column==="*"?Object.values(await i.tableInfo(e[0].table)):e}function fnv_hash(i){let e=2166136261;for(let o=0,d=i.length;o<d;++o){const h=i.charCodeAt(o),g=h&65280;g&&(e=fnv_multiply(e^g>>8)),e=fnv_multiply(e^h&255)}return fnv_mix(e)}function fnv_multiply(i){return i+(i<<1)+(i<<4)+(i<<7)+(i<<8)+(i<<24)}function fnv_mix(i){return i+=i<<13,i^=i>>>7,i+=i<<3,i^=i>>>17,i+=i<<5,i&4294967295}const identity$a=i=>i;class DataCubeIndexer{constructor(e,{selection:o,temp:d=!0}){this.mc=e,this.selection=o,this.temp=d,this.reset()}reset(){this.enabled=!1,this.clients=null,this.indices=null,this.activeView=null}clear(){this.indices&&(this.mc.cancel(Array.from(this.indices.values(),e=>e.result)),this.indices=null)}index(e,o){var et,tt;if(this.clients!==e){const nt=Array.from(e,getIndexColumns),rt=(et=nt[0])==null?void 0:et.from;this.enabled=nt.every(ot=>ot&&ot.from===rt),this.clients=e,this.activeView=null,this.clear()}if(!this.enabled)return!1;o=o||this.selection.active;const{source:d}=o;if(d&&d===((tt=this.activeView)==null?void 0:tt.source))return!0;if(this.clear(),!d)return!1;const h=this.activeView=getActiveView(o);if(!h)return!1;this.mc.logger().warn("DATA CUBE INDEX CONSTRUCTION");const g=this.selection.remove(d),b=this.indices=new Map,{mc:$,temp:j}=this;for(const nt of e){if(g.skip(nt,o))continue;const rt=getIndexColumns(nt),ot=nt.query(g.predicate(nt)).select({...h.columns,...rt.count}).groupby(Object.keys(h.columns)),[st]=ot.subqueries;if(st){const wt=Object.values(h.columns).map(At=>At.columns[0]);subqueryPushdown(st,wt)}const bt=ot.orderby();ot.query.orderby=[];const vt=ot.toString(),ut=`cube_index_${(fnv_hash(vt)>>>0).toString(16)}`,$t=$.exec(create$2(ut,vt,{temp:j}));b.set(nt,{table:ut,result:$t,order:bt,...rt})}}async update(){const{clients:e,selection:o,activeView:d}=this,h=d.predicate(o.active.predicate);return Promise.all(Array.from(e).map(g=>this.updateClient(g,h)))}async updateClient(e,o){const d=this.indices.get(e);if(!d)return;o||(o=this.activeView.predicate(this.selection.active.predicate));const{table:h,dims:g,aggr:b,order:$=[]}=d,j=Query.select(g,b).from(h).groupby(g).where(o).orderby($);return this.mc.updateClient(e,j)}}function getActiveView(i){var j;const{source:e,schema:o}=i;let d=(j=i.predicate)==null?void 0:j.columns;if(!o||!d)return null;const{type:h,scales:g,pixelSize:b=1}=o;let $;if(h==="interval"&&g){const et=g.map(tt=>binInterval(tt,b));if(et.some(tt=>tt==null))return null;et.length===1?($=tt=>tt?isBetween("active0",tt.range.map(et[0])):[],d={active0:et[0](i.predicate.field)}):($=tt=>tt?and$1(tt.children.map(({range:nt},rt)=>isBetween(`active${rt}`,nt.map(et[rt])))):[],d=Object.fromEntries(i.predicate.children.map((tt,nt)=>[`active${nt}`,et[nt](tt.field)])))}else if(h==="point")$=identity$a,d=Object.fromEntries(d.map(et=>[et.toString(),et]));else return null;return{source:e,columns:d,predicate:$}}function binInterval(i,e){const{type:o,domain:d,range:h}=i;let g,b;switch(o){case"linear":g=identity$a,b=asColumn;break;case"log":g=Math.log,b=$=>sql`LN(${asColumn($)})`;break;case"symlog":g=$=>Math.sign($)*Math.log1p(Math.abs($)),b=$=>($=asColumn($),sql`SIGN(${$}) * LN(1 + ABS(${$}))`);break;case"sqrt":g=Math.sqrt,b=$=>sql`SQRT(${asColumn($)})`;break;case"utc":case"time":g=$=>+$,b=$=>$ instanceof Date?+$:epoch_ms(asColumn($));break}return g?binFunction(d,h,e,g,b):null}function binFunction(i,e,o,d,h){const g=d(Math.min(i[0],i[1])),b=d(Math.max(i[0],i[1])),$=Math.abs(d(e[1])-d(e[0]))/(b-g)/o,j=o===1?"":`${o}::INTEGER * `;return et=>sql`${j}FLOOR(${$}::DOUBLE * (${h(et)} - ${g}::DOUBLE))::INTEGER`}const NO_INDEX={from:NaN};function getIndexColumns(i){if(!i.filterIndexable)return NO_INDEX;const e=i.query(),o=getBaseTable(e);if(!o||!e.groupby)return NO_INDEX;const d=new Set(e.groupby().map($=>$.column)),h=[],g=[];let b;for(const{as:$,expr:{aggregate:j}}of e.select())switch(j==null?void 0:j.toUpperCase()){case"COUNT":case"SUM":h.push({[$]:sql`SUM("${$}")::DOUBLE`});break;case"AVG":b="_count_",h.push({[$]:sql`(SUM("${$}" * ${b}) / SUM(${b}))::DOUBLE`});break;case"MAX":h.push({[$]:sql`MAX("${$}")`});break;case"MIN":h.push({[$]:sql`MIN("${$}")`});break;default:if(d.has($))g.push($);else return null}return{aggr:h,dims:g,count:b?{[b]:sql`COUNT(*)`}:{},from:o}}function getBaseTable(i){const e=i.subqueries;if(i.select){const d=i.from();if(!d.length)return;if(e.length===0)return d[0].from.table}const o=getBaseTable(e[0]);for(let d=1;d<e.length;++d){const h=getBaseTable(e[d]);if(h!==void 0&&h!==o)return NaN}return o}function subqueryPushdown(i,e){const o=new Set,d=h=>{o.has(h)||(o.add(h),h.select&&h.from().length&&h.select(e),h.subqueries.forEach(d))};d(i)}class FilterGroup{constructor(e,o,d=!0){this.mc=e,this.selection=o,this.clients=new Set,this.indexer=d?new DataCubeIndexer(this.mc,{...d,selection:o}):null;const{value:h,activate:g}=this.handlers={value:()=>this.update(),activate:b=>{var $;return($=this.indexer)==null?void 0:$.index(this.clients,b)}};o.addEventListener("value",h),o.addEventListener("activate",g)}finalize(){const{value:e,activate:o}=this.handlers;this.selection.removeEventListener("value",e),this.selection.removeEventListener("activate",o)}reset(){var e;(e=this.indexer)==null||e.reset()}add(e){return(this.clients=new Set(this.clients)).add(e),this}remove(e){return this.clients.has(e)&&(this.clients=new Set(this.clients)).delete(e),this}update(){const{mc:e,indexer:o,clients:d,selection:h}=this;return o!=null&&o.index(d)?o.update():defaultUpdate(e,d,h)}}function defaultUpdate(i,e,o){return Promise.all(Array.from(e).map(d=>{const h=o.predicate(d);if(h!=null)return i.updateClient(d,d.query(h))}))}function queryResult(){let i,e;const o=new Promise((d,h)=>{i=d,e=h});return o.fulfill=d=>(i(d),o),o.reject=d=>(e(d),o),o}function consolidator(i,e,o){let d=[],h=0;function g(){const b=entryGroups(d,e);d=[],h=0;for(const $ of b)consolidate($,i,o),processResults($,e)}return{add(b,$){b.request.type==="arrow"?(h=h||requestAnimationFrame(()=>g()),d.push({entry:b,priority:$,index:d.length})):i(b,$)}}}function entryGroups(i,e){const o=[],d=new Map;for(const h of i){const{entry:{request:g}}=h,b=consolidationKey(g.query,e);if(!d.has(b)){const $=[];o.push($),d.set(b,$)}d.get(b).push(h)}return o}function consolidationKey(i,e){const o=`${i}`;if(i instanceof Query&&!e.get(o)){if(i.orderby().length||i.where().length||i.qualify().length||i.having().length)return o;const d=i.clone().$select("*"),h=i.groupby();if(h.length){const g={};i.select().forEach(({as:b,expr:$})=>g[b]=$),d.$groupby(h.map(b=>b instanceof Ref&&g[b.column]||b))}return`${d}`}else return o}function consolidate(i,e,o){if(shouldConsolidate(i))e({request:{type:"arrow",cache:!1,record:!1,query:consolidatedQuery(i,o)},result:i.result=queryResult()});else for(const{entry:d,priority:h}of i)e(d,h)}function shouldConsolidate(i){if(i.length>1){const e=`${i[0].entry.request.query}`;for(let o=1;o<i.length;++o)if(e!==`${i[o].entry.request.query}`)return!0}return!1}function consolidatedQuery(i,e){const o=i.maps=[],d=new Map;for(const b of i){const{query:$}=b.entry.request,j=[];o.push(j);for(const{as:et,expr:tt}of $.select()){const nt=`${tt}`;d.has(nt)||d.set(nt,[`col${d.size}`,tt]);const[rt]=d.get(nt);j.push([rt,et])}e(`${$}`)}const h=i[0].entry.request.query.clone(),g=h.groupby();if(g.length){const b={};i.maps[0].forEach(([$,j])=>b[j]=$),h.$groupby(g.map($=>$ instanceof Ref&&b[$.column]||$))}return h.$select(Array.from(d.values()))}async function processResults(i,e){const{maps:o,result:d}=i;if(!o)return;let h;try{h=await d}catch(g){for(const{entry:b}of i)b.result.reject(g);return}i.forEach(({entry:g},b)=>{const{request:$,result:j}=g,et=projectResult(h,o[b]);$.cache&&e.set(String($.query),et),j.fulfill(et)})}function projectResult(i,e){if(e){const o={};for(const[d,h]of e)o[h]=i.getChild(d);return new i.constructor(o)}else return i}const requestIdle=typeof requestIdleCallback<"u"?requestIdleCallback:setTimeout,voidCache=()=>({get:()=>{},set:(i,e)=>e,clear:()=>{}});function lruCache({max:i=1e3,ttl:e=3*60*60*1e3}={}){let o=new Map;function d(){const h=performance.now()-e;let g=null,b=1/0;for(const[$,j]of o){const{last:et}=j;et<b&&(g=$,b=et),h>et&&o.delete($)}g&&o.delete(g)}return{get(h){const g=o.get(h);if(g)return g.last=performance.now(),g.value},set(h,g){return o.set(h,{last:performance.now(),value:g}),o.size>i&&requestIdle(d),g},clear(){o=new Map}}}function priorityQueue(i){const e=Array.from({length:i},()=>({head:null,tail:null}));return{isEmpty(){return e.every(o=>!o.head)},insert(o,d){const h=e[d];if(!h)throw new Error(`Invalid queue priority rank: ${d}`);const g={item:o,next:null};h.head===null?h.head=h.tail=g:h.tail=h.tail.next=g},remove(o){for(const d of e){let{head:h,tail:g}=d;for(let b=null,$=h;$;b=$,$=$.next)o($.item)&&($===h?h=$.next:b.next=$.next,$===g&&(g=b||h));d.head=h,d.tail=g}},next(){for(const o of e){const{head:d}=o;if(d!==null)return o.head=d.next,o.tail===d&&(o.tail=null),d.item}}}}const Priority={High:0,Normal:1,Low:2};function QueryManager(){const i=priorityQueue(3);let e,o,d,h=[],g=null,b;function $(){if(g||i.isEmpty())return;const{request:nt,result:rt}=i.next();g=tt(nt,rt),g.finally(()=>{g=null,$()})}function j(nt,rt=Priority.Normal){i.insert(nt,rt),$()}function et(nt){h.length&&nt&&h.forEach(rt=>rt.add(nt))}async function tt(nt,rt){try{const{query:ot,type:st,cache:bt=!1,record:vt=!0,options:at}=nt,ut=ot?`${ot}`:null;if(vt&&et(ut),bt){const At=o.get(ut);if(At){d.debug("Cache"),rt.fulfill(At);return}}const $t=performance.now(),wt=await e.query({type:st,sql:ut,...at});bt&&o.set(ut,wt),d.debug(`Request: ${(performance.now()-$t).toFixed(1)}`),rt.fulfill(wt)}catch(ot){rt.reject(ot)}}return{cache(nt){return nt!==void 0?o=nt===!0?lruCache():nt||voidCache():o},logger(nt){return nt?d=nt:d},connector(nt){return nt?e=nt:e},consolidate(nt){nt&&!b?b=consolidator(j,o,et):!nt&&b&&(b=null)},request(nt,rt=Priority.Normal){const ot=queryResult(),st={request:nt,result:ot};return b?b.add(st,rt):j(st,rt),ot},cancel(nt){const rt=new Set(nt);i.remove(({result:ot})=>rt.has(ot))},clear(){i.remove(({result:nt})=>(nt.reject("Cleared"),!0))},record(){let nt=[];const rt={add(ot){nt.push(ot)},reset(){nt=[]},snapshot(){return nt.slice()},stop(){return h=h.filter(ot=>ot!==rt),nt}};return h.push(rt),rt}}}function voidLogger(){return{debug(){},info(){},log(){},warn(){},error(){}}}let _instance;function coordinator(i){return i?_instance=i:_instance==null&&(_instance=new Coordinator),_instance}class Coordinator{constructor(e=socketConnector(),o={}){this.catalog=new Catalog(this),this.manager=o.manager||QueryManager(),this.logger(o.logger||console),this.configure(o),this.databaseConnector(e),this.clear()}logger(e){return arguments.length&&(this._logger=e||voidLogger(),this.manager.logger(this._logger)),this._logger}configure({cache:e=!0,consolidate:o=!0,indexes:d=!0}){this.manager.cache(e),this.manager.consolidate(o),this.indexes=d}clear({clients:e=!0,cache:o=!0,catalog:d=!1}={}){var h,g;this.manager.clear(),e&&((h=this.clients)==null||h.forEach(b=>this.disconnect(b)),(g=this.filterGroups)==null||g.forEach(b=>b.finalize()),this.clients=new Set,this.filterGroups=new Map),o&&this.manager.cache().clear(),d&&this.catalog.clear()}databaseConnector(e){return this.manager.connector(e)}cancel(e){this.manager.cancel(e)}exec(e,{priority:o=Priority.Normal}={}){return this.manager.request({type:"exec",query:e},o)}query(e,{type:o="arrow",cache:d=!0,priority:h=Priority.Normal,...g}={}){return this.manager.request({type:o,query:e,cache:d,options:g},h)}prefetch(e,o={}){return this.query(e,{...o,cache:!0,priority:Priority.Low})}createBundle(e,o,d=Priority.Low){const h={name:e,queries:o};return this.manager.request({type:"create-bundle",options:h},d)}loadBundle(e,o=Priority.High){const d={name:e};return this.manager.request({type:"load-bundle",options:d},o)}updateClient(e,o,d=Priority.Normal){return e.queryPending(),this.query(o,{priority:d}).then(h=>e.queryResult(h).update(),h=>{e.queryError(h),this._logger.error(h)})}requestQuery(e,o){var d;return(d=this.filterGroups.get(e.filterBy))==null||d.reset(),o?this.updateClient(e,o):e.update()}async connect(e){const{catalog:o,clients:d,filterGroups:h,indexes:g}=this;if(d.has(e))throw new Error("Client already connected.");d.add(e);const b=e.fields();b!=null&&b.length&&e.fieldInfo(await o.queryFields(b));const $=e.filterBy;if($)if(h.has($))h.get($).add(e);else{const j=new FilterGroup(this,$,g);h.set($,j.add(e))}e.requestQuery()}disconnect(e){var h;const{clients:o,filterGroups:d}=this;o.has(e)&&(o.delete(e),(h=d.get(e.filterBy))==null||h.remove(e))}}const NIL={};function throttle(i,e=!1){let o,d,h=NIL;function g(et){o=i(et).then(()=>{if(d){const{value:tt}=d;d=null,g(tt)}else o=null})}function b(et){d={event:et}}function $(et){o?b(et):g(et)}function j(et){h!==et&&requestAnimationFrame(()=>{const tt=h;h=NIL,$(tt)}),h=et}return e?j:$}class MosaicClient{constructor(e){this._filterBy=e,this._requestUpdate=throttle(()=>this.requestQuery(),!0)}get filterBy(){return this._filterBy}get filterIndexable(){return!0}fields(){return null}fieldInfo(){return this}query(){return null}queryPending(){return this}queryResult(){return this}queryError(e){return console.error(e),this}requestQuery(e){var d;const o=e||this.query((d=this.filterBy)==null?void 0:d.predicate(this));return coordinator().requestQuery(this,o)}requestUpdate(){this._requestUpdate()}update(){return this}}class AsyncDispatch{constructor(){this._callbacks=new Map}addEventListener(e,o){this._callbacks.has(e)||this._callbacks.set(e,{callbacks:new Set,pending:null,queue:new DispatchQueue}),this._callbacks.get(e).callbacks.add(o)}removeEventListener(e,o){const d=this._callbacks.get(e);d&&d.callbacks.delete(o)}willEmit(e,o){return o}emitQueueFilter(){return null}cancel(e){const o=this._callbacks.get(e);o==null||o.queue.clear()}emit(e,o){const d=this._callbacks.get(e)||{};if(d.pending)d.queue.enqueue(o,this.emitQueueFilter(e,o));else{const h=this.willEmit(e,o),{callbacks:g,queue:b}=d;if(g!=null&&g.size){const $=Promise.allSettled(Array.from(g,j=>j(h))).then(()=>{d.pending=null,b.isEmpty()||this.emit(e,b.dequeue())});d.pending=$}}}}class DispatchQueue{constructor(){this.clear()}clear(){this.next=null}isEmpty(){return!this.next}enqueue(e,o){const d={value:e};if(o&&this.next){let h=this;for(;h.next;)o(h.next.value)?h=h.next:h.next=h.next.next;h.next=d}else this.next=d}dequeue(){const{next:e}=this;return this.next=e==null?void 0:e.next,e==null?void 0:e.value}}function distinct(i,e){return i===e?!1:i instanceof Date&&e instanceof Date?+i!=+e:Array.isArray(i)&&Array.isArray(e)?distinctArray(i,e):!0}function distinctArray(i,e){if(i.length!==e.length)return!0;for(let o=0;o<i.length;++o)if(i[o]!==e[o])return!0;return!1}function isParam(i){return i instanceof Param}class Param extends AsyncDispatch{constructor(e){super(),this._value=e}static value(e){return new Param(e)}static array(e){if(e.some(o=>isParam(o))){const o=new Param,d=()=>o.update(e.map(h=>isParam(h)?h.value:h));return d(),e.forEach(h=>isParam(h)?h.addEventListener("value",d):0),o}return new Param(e)}get value(){return this._value}update(e,{force:o}={}){return distinct(this._value,e)||o?this.emit("value",e):this.cancel("value"),this}willEmit(e,o){return e==="value"&&(this._value=o),o}}function isSelection(i){return i instanceof Selection$2}let Selection$2=class ws extends Param{static intersect({cross:e=!1}={}){return new ws(new SelectionResolver({cross:e}))}static union({cross:e=!1}={}){return new ws(new SelectionResolver({cross:e,union:!0}))}static single({cross:e=!1}={}){return new ws(new SelectionResolver({cross:e,single:!0}))}static crossfilter(){return new ws(new SelectionResolver({cross:!0}))}constructor(e=new SelectionResolver){super([]),this._resolved=this._value,this._resolver=e}clone(){const e=new ws(this._resolver);return e._value=e._resolved=this._value,e}remove(e){const o=this.clone();return o._value=o._resolved=o._resolver.resolve(this._resolved,{source:e}),o._value.active={source:e},o}get active(){return this.clauses.active}get value(){var e;return(e=this.active)==null?void 0:e.value}get clauses(){return super.value}get single(){return this._resolver.single}activate(e){this.emit("activate",e)}update(e){return this._resolved=this._resolver.resolve(this._resolved,e,!0),this._resolved.active=e,super.update(this._resolved)}willEmit(e,o){return e==="value"?(this._value=o,this.value):o}emitQueueFilter(e,o){return e==="value"?this._resolver.queueFilter(o):null}skip(e,o){return this._resolver.skip(e,o)}predicate(e,o=!1){const{clauses:d}=this,h=o?null:d.active;return this._resolver.predicate(d,h,e)}};class SelectionResolver{constructor({union:e,cross:o,single:d}={}){this.union=!!e,this.cross=!!o,this.single=!!d}resolve(e,o,d=!1){const{source:h,predicate:g}=o,b=e.filter(j=>h!==j.source),$=this.single?[]:b;return this.single&&d&&b.forEach(j=>{var et,tt;return(tt=(et=j.source)==null?void 0:et.reset)==null?void 0:tt.call(et)}),g&&$.push(o),$}skip(e,o){var d;return this.cross&&((d=o==null?void 0:o.clients)==null?void 0:d.has(e))}predicate(e,o,d){const{union:h}=this;if(this.skip(d,o))return;const g=e.filter(b=>!this.skip(d,b)).map(b=>b.predicate);return h&&g.length>1?or(g):g}queueFilter(e){var o;if(this.cross){const d=(o=e.active)==null?void 0:o.source;return h=>{var g;return((g=h.active)==null?void 0:g.source)!==d}}}}const SIZEOF_SHORT=2,SIZEOF_INT=4,FILE_IDENTIFIER_LENGTH=4,SIZE_PREFIX_LENGTH=4,int32=new Int32Array(2),float32=new Float32Array(int32.buffer),float64=new Float64Array(int32.buffer),isLittleEndian=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;var Encoding;(function(i){i[i.UTF8_BYTES=1]="UTF8_BYTES",i[i.UTF16_STRING=2]="UTF16_STRING"})(Encoding||(Encoding={}));let ByteBuffer$2=class Vu{constructor(e){this.bytes_=e,this.position_=0,this.text_decoder_=new TextDecoder}static allocate(e){return new Vu(new Uint8Array(e))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(e){this.position_=e}capacity(){return this.bytes_.length}readInt8(e){return this.readUint8(e)<<24>>24}readUint8(e){return this.bytes_[e]}readInt16(e){return this.readUint16(e)<<16>>16}readUint16(e){return this.bytes_[e]|this.bytes_[e+1]<<8}readInt32(e){return this.bytes_[e]|this.bytes_[e+1]<<8|this.bytes_[e+2]<<16|this.bytes_[e+3]<<24}readUint32(e){return this.readInt32(e)>>>0}readInt64(e){return BigInt.asIntN(64,BigInt(this.readUint32(e))+(BigInt(this.readUint32(e+4))<<BigInt(32)))}readUint64(e){return BigInt.asUintN(64,BigInt(this.readUint32(e))+(BigInt(this.readUint32(e+4))<<BigInt(32)))}readFloat32(e){return int32[0]=this.readInt32(e),float32[0]}readFloat64(e){return int32[isLittleEndian?0:1]=this.readInt32(e),int32[isLittleEndian?1:0]=this.readInt32(e+4),float64[0]}writeInt8(e,o){this.bytes_[e]=o}writeUint8(e,o){this.bytes_[e]=o}writeInt16(e,o){this.bytes_[e]=o,this.bytes_[e+1]=o>>8}writeUint16(e,o){this.bytes_[e]=o,this.bytes_[e+1]=o>>8}writeInt32(e,o){this.bytes_[e]=o,this.bytes_[e+1]=o>>8,this.bytes_[e+2]=o>>16,this.bytes_[e+3]=o>>24}writeUint32(e,o){this.bytes_[e]=o,this.bytes_[e+1]=o>>8,this.bytes_[e+2]=o>>16,this.bytes_[e+3]=o>>24}writeInt64(e,o){this.writeInt32(e,Number(BigInt.asIntN(32,o))),this.writeInt32(e+4,Number(BigInt.asIntN(32,o>>BigInt(32))))}writeUint64(e,o){this.writeUint32(e,Number(BigInt.asUintN(32,o))),this.writeUint32(e+4,Number(BigInt.asUintN(32,o>>BigInt(32))))}writeFloat32(e,o){float32[0]=o,this.writeInt32(e,int32[0])}writeFloat64(e,o){float64[0]=o,this.writeInt32(e,int32[isLittleEndian?0:1]),this.writeInt32(e+4,int32[isLittleEndian?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+SIZEOF_INT+FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let e="";for(let o=0;o<FILE_IDENTIFIER_LENGTH;o++)e+=String.fromCharCode(this.readInt8(this.position_+SIZEOF_INT+o));return e}__offset(e,o){const d=e-this.readInt32(e);return o<this.readInt16(d)?this.readInt16(d+o):0}__union(e,o){return e.bb_pos=o+this.readInt32(o),e.bb=this,e}__string(e,o){e+=this.readInt32(e);const d=this.readInt32(e);e+=SIZEOF_INT;const h=this.bytes_.subarray(e,e+d);return o===Encoding.UTF8_BYTES?h:this.text_decoder_.decode(h)}__union_with_string(e,o){return typeof e=="string"?this.__string(o):this.__union(e,o)}__indirect(e){return e+this.readInt32(e)}__vector(e){return e+this.readInt32(e)+SIZEOF_INT}__vector_len(e){return this.readInt32(e+this.readInt32(e))}__has_identifier(e){if(e.length!=FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+FILE_IDENTIFIER_LENGTH);for(let o=0;o<FILE_IDENTIFIER_LENGTH;o++)if(e.charCodeAt(o)!=this.readInt8(this.position()+SIZEOF_INT+o))return!1;return!0}createScalarList(e,o){const d=[];for(let h=0;h<o;++h){const g=e(h);g!==null&&d.push(g)}return d}createObjList(e,o){const d=[];for(let h=0;h<o;++h){const g=e(h);g!==null&&d.push(g.unpack())}return d}},Builder$2=class zu{constructor(e){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null,this.text_encoder=new TextEncoder;let o;e?o=e:o=1024,this.bb=ByteBuffer$2.allocate(o),this.space=o}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(e){this.force_defaults=e}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(e,o){e>this.minalign&&(this.minalign=e);const d=~(this.bb.capacity()-this.space+o)+1&e-1;for(;this.space<d+e+o;){const h=this.bb.capacity();this.bb=zu.growByteBuffer(this.bb),this.space+=this.bb.capacity()-h}this.pad(d)}pad(e){for(let o=0;o<e;o++)this.bb.writeInt8(--this.space,0)}writeInt8(e){this.bb.writeInt8(this.space-=1,e)}writeInt16(e){this.bb.writeInt16(this.space-=2,e)}writeInt32(e){this.bb.writeInt32(this.space-=4,e)}writeInt64(e){this.bb.writeInt64(this.space-=8,e)}writeFloat32(e){this.bb.writeFloat32(this.space-=4,e)}writeFloat64(e){this.bb.writeFloat64(this.space-=8,e)}addInt8(e){this.prep(1,0),this.writeInt8(e)}addInt16(e){this.prep(2,0),this.writeInt16(e)}addInt32(e){this.prep(4,0),this.writeInt32(e)}addInt64(e){this.prep(8,0),this.writeInt64(e)}addFloat32(e){this.prep(4,0),this.writeFloat32(e)}addFloat64(e){this.prep(8,0),this.writeFloat64(e)}addFieldInt8(e,o,d){(this.force_defaults||o!=d)&&(this.addInt8(o),this.slot(e))}addFieldInt16(e,o,d){(this.force_defaults||o!=d)&&(this.addInt16(o),this.slot(e))}addFieldInt32(e,o,d){(this.force_defaults||o!=d)&&(this.addInt32(o),this.slot(e))}addFieldInt64(e,o,d){(this.force_defaults||o!==d)&&(this.addInt64(o),this.slot(e))}addFieldFloat32(e,o,d){(this.force_defaults||o!=d)&&(this.addFloat32(o),this.slot(e))}addFieldFloat64(e,o,d){(this.force_defaults||o!=d)&&(this.addFloat64(o),this.slot(e))}addFieldOffset(e,o,d){(this.force_defaults||o!=d)&&(this.addOffset(o),this.slot(e))}addFieldStruct(e,o,d){o!=d&&(this.nested(o),this.slot(e))}nested(e){if(e!=this.offset())throw new TypeError("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new TypeError("FlatBuffers: object serialization must not be nested.")}slot(e){this.vtable!==null&&(this.vtable[e]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(e){const o=e.capacity();if(o&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const d=o<<1,h=ByteBuffer$2.allocate(d);return h.setPosition(d-o),h.bytes().set(e.bytes(),d-o),h}addOffset(e){this.prep(SIZEOF_INT,0),this.writeInt32(this.offset()-e+SIZEOF_INT)}startObject(e){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=e;for(let o=0;o<e;o++)this.vtable[o]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const e=this.offset();let o=this.vtable_in_use-1;for(;o>=0&&this.vtable[o]==0;o--);const d=o+1;for(;o>=0;o--)this.addInt16(this.vtable[o]!=0?e-this.vtable[o]:0);const h=2;this.addInt16(e-this.object_start);const g=(d+h)*SIZEOF_SHORT;this.addInt16(g);let b=0;const $=this.space;e:for(o=0;o<this.vtables.length;o++){const j=this.bb.capacity()-this.vtables[o];if(g==this.bb.readInt16(j)){for(let et=SIZEOF_SHORT;et<g;et+=SIZEOF_SHORT)if(this.bb.readInt16($+et)!=this.bb.readInt16(j+et))continue e;b=this.vtables[o];break}}return b?(this.space=this.bb.capacity()-e,this.bb.writeInt32(this.space,b-e)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-e,this.offset()-e)),this.isNested=!1,e}finish(e,o,d){const h=d?SIZE_PREFIX_LENGTH:0;if(o){const g=o;if(this.prep(this.minalign,SIZEOF_INT+FILE_IDENTIFIER_LENGTH+h),g.length!=FILE_IDENTIFIER_LENGTH)throw new TypeError("FlatBuffers: file identifier must be length "+FILE_IDENTIFIER_LENGTH);for(let b=FILE_IDENTIFIER_LENGTH-1;b>=0;b--)this.writeInt8(g.charCodeAt(b))}this.prep(this.minalign,SIZEOF_INT+h),this.addOffset(e),h&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(e,o){this.finish(e,o,!0)}requiredField(e,o){const d=this.bb.capacity()-e,h=d-this.bb.readInt32(d);if(!(o<this.bb.readInt16(h)&&this.bb.readInt16(h+o)!=0))throw new TypeError("FlatBuffers: field "+o+" must be set")}startVector(e,o,d){this.notNested(),this.vector_num_elems=o,this.prep(SIZEOF_INT,e*o),this.prep(d,e*o)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(e){if(!e)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(e))return this.string_maps.get(e);const o=this.createString(e);return this.string_maps.set(e,o),o}createString(e){if(e==null)return 0;let o;e instanceof Uint8Array?o=e:o=this.text_encoder.encode(e),this.addInt8(0),this.startVector(1,o.length,1),this.bb.setPosition(this.space-=o.length);for(let d=0,h=this.space,g=this.bb.bytes();d<o.length;d++)g[h++]=o[d];return this.endVector()}createObjectOffset(e){return e===null?0:typeof e=="string"?this.createString(e):e.pack(this)}createObjectOffsetList(e){const o=[];for(let d=0;d<e.length;++d){const h=e[d];if(h!==null)o.push(this.createObjectOffset(h));else throw new TypeError("FlatBuffers: Argument for createObjectOffsetList cannot contain null.")}return o}createStructOffsetList(e,o){return o(this,e.length),this.createObjectOffsetList(e.slice().reverse()),this.endVector()}};function synchronizer(){const i=new Set;let e,o=new Promise(d=>e=d);return{pending(d){i.add(d)},ready(d){return i.delete(d),i.size===0},resolve(){o=new Promise(d=>{e(),e=d})},get promise(){return o}}}function input(i,e){const o=new i(e);return coordinator().connect(o),o.element}const isObject$2=i=>i&&typeof i=="object"&&!Array.isArray(i),menu=i=>input(Menu,i);class Menu extends MosaicClient{constructor({element:e,filterBy:o,from:d,column:h,label:g=h,format:b=tt=>tt,options:$,value:j,as:et}={}){var nt,rt,ot,st;super(o),this.from=d,this.column=h,this.selection=et,this.format=b,this.element=e??document.createElement("div"),this.element.setAttribute("class","input"),this.element.value=this;const tt=document.createElement("label");tt.innerText=g||h,this.element.appendChild(tt),this.select=document.createElement("select"),$&&(this.data=$.map(bt=>isObject$2(bt)?bt:{value:bt}),this.update()),j=j??((nt=this.selection)==null?void 0:nt.value)??((ot=(rt=this.data)==null?void 0:rt[0])==null?void 0:ot.value),((st=this.selection)==null?void 0:st.value)===void 0&&this.publish(j),this.element.appendChild(this.select),this.selection&&(this.select.addEventListener("input",()=>{this.publish(this.selectedValue()??null)}),isSelection(this.selection)||this.selection.addEventListener("value",bt=>{bt!==this.select.value&&this.selectedValue(bt)}))}selectedValue(e){var o;if(arguments.length===0){const d=this.select.selectedIndex;return this.data[d].value}else{const d=(o=this.data)==null?void 0:o.findIndex(h=>h.value===e);d>=0?this.select.selectedIndex=d:this.select.value=String(e)}}reset(){this.select.selectedIndex=this.from?0:-1}publish(e){const{selection:o,column:d}=this;isSelection(o)?o.update({source:this,schema:{type:"point"},value:e,predicate:e?eq$1(d,literal(e)):null}):isParam(o)&&o.update(e)}query(e=[]){const{from:o,column:d}=this;return o?Query.from(o).select({value:d}).distinct().where(e).orderby(d):null}queryResult(e){return this.data=[{value:"",label:"All"},...e],this}update(){var h;const{data:e,format:o,select:d}=this;d.replaceChildren();for(const{value:g,label:b}of e){const $=document.createElement("option");$.setAttribute("value",g),$.innerText=b??o(g),this.select.appendChild($)}return this.selection&&this.selectedValue(((h=this.selection)==null?void 0:h.value)??""),this}}const FUNCTIONS={contains:contains$1,prefix,suffix,regexp:regexp_matches};let _id$2=0;const search=i=>input(Search,i);class Search extends MosaicClient{constructor({element:e,filterBy:o,from:d,column:h,label:g,type:b="contains",as:$}={}){if(super(o),this.id="search_"+ ++_id$2,this.type=b,this.from=d,this.column=h,this.selection=$,this.element=e??document.createElement("div"),this.element.setAttribute("class","input"),this.element.value=this,g){const j=document.createElement("label");j.setAttribute("for",this.id),j.innerText=g,this.element.appendChild(j)}this.searchbox=document.createElement("input"),this.searchbox.setAttribute("id",this.id),this.searchbox.setAttribute("type","text"),this.searchbox.setAttribute("placeholder","Query"),this.element.appendChild(this.searchbox),this.selection&&(this.searchbox.addEventListener("input",()=>{this.publish(this.searchbox.value||null)}),isSelection(this.selection)||this.selection.addEventListener("value",j=>{j!==this.searchbox.value&&(this.searchbox.value=j)}))}reset(){this.searchbox.value=""}publish(e){const{selection:o,column:d,type:h}=this;isSelection(o)?o.update({source:this,schema:{type:h},value:e,predicate:e?FUNCTIONS[h](d,literal(e)):null}):isParam(o)&&o.update(e)}query(e=[]){const{from:o,column:d}=this;return o?Query.from(o).select({list:d}).distinct().where(e):null}queryResult(e){return this.data=e,this}update(){const e=document.createElement("datalist"),o=`${this.id}_list`;e.setAttribute("id",o);for(const d of this.data){const h=document.createElement("option");h.setAttribute("value",d.list),e.append(h)}return this.datalist&&this.datalist.remove(),this.element.appendChild(this.datalist=e),this.searchbox.setAttribute("list",o),this}}let _id$1=0;const slider=i=>input(Slider,i);class Slider extends MosaicClient{constructor({element:e,filterBy:o,as:d,min:h,max:g,step:b,from:$,column:j,label:et=j,value:tt=d==null?void 0:d.value,width:nt}={}){var rt;if(super(o),this.id="slider_"+ ++_id$1,this.from=$,this.column=j||"value",this.selection=d,this.min=h,this.max=g,this.step=b,this.element=e||document.createElement("div"),this.element.setAttribute("class","input"),this.element.value=this,et){const ot=document.createElement("label");ot.setAttribute("for",this.id),ot.innerText=et,this.element.appendChild(ot)}this.slider=document.createElement("input"),this.slider.setAttribute("id",this.id),this.slider.setAttribute("type","range"),nt!=null&&(this.slider.style.width=`${+nt}px`),h!=null&&this.slider.setAttribute("min",h),g!=null&&this.slider.setAttribute("max",g),b!=null&&this.slider.setAttribute("step",b),tt!=null&&(this.slider.setAttribute("value",tt),((rt=this.selection)==null?void 0:rt.value)===void 0&&this.publish(tt)),this.element.appendChild(this.slider),this.selection&&(this.slider.addEventListener("input",()=>{this.publish(+this.slider.value)}),isSelection(this.selection)||this.selection.addEventListener("value",ot=>{ot!==+this.slider.value&&(this.slider.value=ot)}))}query(e=[]){const{from:o,column:d}=this;return!o||this.min!=null&&this.max!=null?null:Query.select({min:min$3(d),max:max$2(d)}).from(o).where(e)}queryResult(e){const{min:o,max:d}=Array.from(e)[0];return this.min==null&&this.slider.setAttribute("min",o),this.max==null&&this.slider.setAttribute("max",d),this.step==null&&this.slider.setAttribute("step",(d-o)/500),this}publish(e){const{selection:o,column:d}=this;isSelection(o)?o.update({source:this,schema:{type:"point"},value:e,predicate:eq$1(d,literal(e))}):isParam(this.selection)&&o.update(e)}}function format$1(i,e){if(i instanceof Date||(i=new Date(+i)),isNaN(i))return typeof e=="function"?e(i):e;const o=i.getUTCHours(),d=i.getUTCMinutes(),h=i.getUTCSeconds(),g=i.getUTCMilliseconds();return`${formatYear$1(i.getUTCFullYear())}-${pad$1(i.getUTCMonth()+1,2)}-${pad$1(i.getUTCDate(),2)}${o||d||h||g?`T${pad$1(o,2)}:${pad$1(d,2)}${h||g?`:${pad$1(h,2)}${g?`.${pad$1(g,3)}`:""}`:""}Z`:""}`}function formatYear$1(i){return i<0?`-${pad$1(-i,6)}`:i>9999?`+${pad$1(i,6)}`:pad$1(i,4)}function pad$1(i,e){return`${i}`.padStart(e,"0")}const re$2=/^(?:[-+]\d{2})?\d{4}(?:-\d{2}(?:-\d{2})?)?(?:T\d{2}:\d{2}(?::\d{2}(?:\.\d{3})?)?(?:Z|[-+]\d{2}:?\d{2})?)?$/;function parse(i,e){return re$2.test(i+="")?new Date(i):typeof e=="function"?e(i):e}const formatLocaleAuto=localize(i=>{const e=formatLocaleNumber(i);return o=>o==null?"":typeof o=="number"?e(o):o instanceof Date?formatDate(o):`${o}`}),formatLocaleNumber=localize(i=>e=>e===0?"0":e.toLocaleString(i));formatLocaleAuto();formatLocaleNumber();function formatDate(i){return format$1(i,"Invalid Date")}function localize(i){let e=localize,o;return(d="en")=>d===e?o:o=i(e=d)}let _id=-1;const table=i=>input(Table$1,i);let Table$1=class extends MosaicClient{constructor({element:e,filterBy:o,from:d,columns:h=["*"],align:g={},format:b,width:$,maxWidth:j,height:et=500,rowBatch:tt=100}={}){super(o),this.id=`table-${++_id}`,this.from=d,this.columns=h,this.format=b,this.align=g,this.widths=typeof $=="object"?$:{},this.offset=0,this.limit=+tt,this.pending=!1,this.sortHeader=null,this.sortColumn=null,this.sortDesc=!1,this.element=e||document.createElement("div"),this.element.setAttribute("id",this.id),this.element.value=this,typeof $=="number"&&(this.element.style.width=`${$}px`),j&&(this.element.style.maxWidth=`${j}px`),this.element.style.maxHeight=`${et}px`,this.element.style.overflow="auto";let nt=-1;this.element.addEventListener("scroll",rt=>{const{pending:ot,loaded:st}=this,{scrollHeight:bt,scrollTop:vt,clientHeight:at}=rt.target,ut=vt<nt;nt=vt,!(ut||ot||st)&&bt-vt<2*at&&(this.pending=!0,this.requestData(this.offset+this.limit))}),this.tbl=document.createElement("table"),this.element.appendChild(this.tbl),this.head=document.createElement("thead"),this.tbl.appendChild(this.head),this.body=document.createElement("tbody"),this.tbl.appendChild(this.body),this.style=document.createElement("style"),this.element.appendChild(this.style)}requestData(e=0){var d;this.offset=e;const o=this.query((d=this.filterBy)==null?void 0:d.predicate(this));this.requestQuery(o),coordinator().prefetch(o.clone().offset(e+this.limit))}fields(){return this.columns.map(e=>column$1(this.from,e))}fieldInfo(e){this.schema=e;const o=this.head;o.innerHTML="";const d=document.createElement("tr");for(const{column:h}of e){const g=document.createElement("th");g.addEventListener("click",b=>this.sort(b,h)),g.appendChild(document.createElement("span")),g.appendChild(document.createTextNode(h)),d.appendChild(g)}return o.appendChild(d),this.formats=formatof(this.format,e),this.style.innerText=tableCSS(this.id,alignof(this.align,e),widthof(this.widths,e)),this}query(e=[]){const{from:o,limit:d,offset:h,schema:g,sortColumn:b,sortDesc:$}=this;return Query.from(o).select(g.map(j=>j.column)).where(e).orderby(b?$?desc(b):b:[]).limit(d).offset(h)}queryResult(e){return this.pending||(this.loaded=!1,this.body.replaceChildren()),this.data=e,this}update(){const{body:e,formats:o,data:d,schema:h,limit:g}=this,b=h.length;let $=0;for(const j of d){++$;const et=document.createElement("tr");for(let tt=0;tt<b;++tt){const nt=j[h[tt].column],rt=document.createElement("td");rt.innerText=nt==null?"":o[tt](nt),et.appendChild(rt)}e.appendChild(et)}return $<g&&(this.loaded=!0),this.pending=!1,this}sort(e,o){o===this.sortColumn?this.sortDesc=!this.sortDesc:(this.sortColumn=o,this.sortDesc=!1);const d=e.currentTarget,h=this.sortHeader;h===d&&e.metaKey?(h.firstChild.textContent="",this.sortHeader=null,this.sortColumn=null):(h&&(h.firstChild.textContent=""),this.sortHeader=d,d.firstChild.textContent=this.sortDesc?"▾":"▴"),this.requestData()}};function formatof(i={},e,o){return e.map(({column:d,type:h})=>{if(d in i)return i[d];switch(h){case"number":return formatLocaleNumber(o);case"date":return formatDate;default:return formatLocaleAuto(o)}})}function alignof(i={},e){return e.map(({column:o,type:d})=>o in i?i[o]:d==="number"?"right":"left")}function widthof(i={},e){return e.map(({column:o})=>i[o])}function tableCSS(i,e,o){const d=[];return e.forEach((h,g)=>{const b=+o[g];if(h!=="left"||b){const $=h!=="left"?`text-align:${h};`:"",j=b?`width:${b}px;max-width:${b}px;`:"";d.push(`#${i} tr>:nth-child(${g+1}) {${$}${j}}`)}}),d.join(" ")}const Fixed=Symbol("Fixed"),Transient=Symbol("Transient"),Transform$1=Symbol("Transform"),EXTENT=["rectY-x","rectX-y","rect-x","rect-y"];function hasExtent(i,e){return EXTENT.includes(`${e}-${i}`)}function bin$1(i,e={steps:25}){const o=(d,h)=>hasExtent(h,d.type)?{[`${h}1`]:binField$1(d,i,e),[`${h}2`]:binField$1(d,i,{...e,offset:1})}:{[h]:binField$1(d,i,e)};return o[Transform$1]=!0,o}function binField$1(i,e,o){return{column:e,label:e,get stats(){return["min","max"]},get columns(){return[e]},get basis(){return e},toString(){const{min:d,max:h}=i.stats[e],g=bins(d,h,o),b=asColumn(e),$=g.min===0?b:`(${b} - ${g.min})`,j=`${(g.max-g.min)/g.steps}::DOUBLE`,et=o.offset?`${o.offset} + `:"";return`${g.min} + ${j} * (${et}FLOOR(${$} / ${j})::INTEGER)`}}}function bins(i,e,o){let{steps:d=25,minstep:h=0,nice:g=!0}=o;if(g!==!1){const b=e-i,$=d,j=Math.LN10,et=Math.ceil(Math.log($)/j);let tt=Math.max(h,Math.pow(10,Math.round(Math.log(b)/j)-et));for(;Math.ceil(b/tt)>$;)tt*=10;const nt=[5,2];let rt;for(let bt=0,vt=nt.length;bt<vt;++bt)rt=tt/nt[bt],rt>=h&&b/rt<=$&&(tt=rt);rt=Math.log(tt);const ot=rt>=0?0:~~(-rt/j)+1,st=Math.pow(10,-ot-1);rt=Math.floor(i/tt+st)*tt,i=i<rt?rt-tt:rt,e=Math.ceil(e/tt)*tt,d=Math.round((e-i)/tt)}return{min:i,max:e,steps:d}}function ascending$2(i,e){return i==null||e==null?NaN:i<e?-1:i>e?1:i>=e?0:NaN}function descending(i,e){return i==null||e==null?NaN:e<i?-1:e>i?1:e>=i?0:NaN}function bisector(i){let e,o,d;i.length!==2?(e=ascending$2,o=($,j)=>ascending$2(i($),j),d=($,j)=>i($)-j):(e=i===ascending$2||i===descending?i:zero$1,o=i,d=i);function h($,j,et=0,tt=$.length){if(et<tt){if(e(j,j)!==0)return tt;do{const nt=et+tt>>>1;o($[nt],j)<0?et=nt+1:tt=nt}while(et<tt)}return et}function g($,j,et=0,tt=$.length){if(et<tt){if(e(j,j)!==0)return tt;do{const nt=et+tt>>>1;o($[nt],j)<=0?et=nt+1:tt=nt}while(et<tt)}return et}function b($,j,et=0,tt=$.length){const nt=h($,j,et,tt-1);return nt>et&&d($[nt-1],j)>-d($[nt],j)?nt-1:nt}return{left:h,center:b,right:g}}function zero$1(){return 0}function number$5(i){return i===null?NaN:+i}function*numbers(i,e){if(e===void 0)for(let o of i)o!=null&&(o=+o)>=o&&(yield o);else{let o=-1;for(let d of i)(d=e(d,++o,i))!=null&&(d=+d)>=d&&(yield d)}}const ascendingBisect=bisector(ascending$2),bisectRight=ascendingBisect.right;bisector(number$5).center;const bisect=bisectRight,blur2=Blur2(blurf),blurImage=Blur2(blurfImage);function Blur2(i){return function(e,o,d=o){if(!((o=+o)>=0))throw new RangeError("invalid rx");if(!((d=+d)>=0))throw new RangeError("invalid ry");let{data:h,width:g,height:b}=e;if(!((g=Math.floor(g))>=0))throw new RangeError("invalid width");if(!((b=Math.floor(b!==void 0?b:h.length/g))>=0))throw new RangeError("invalid height");if(!g||!b||!o&&!d)return e;const $=o&&i(o),j=d&&i(d),et=h.slice();return $&&j?(blurh($,et,h,g,b),blurh($,h,et,g,b),blurh($,et,h,g,b),blurv(j,h,et,g,b),blurv(j,et,h,g,b),blurv(j,h,et,g,b)):$?(blurh($,h,et,g,b),blurh($,et,h,g,b),blurh($,h,et,g,b)):j&&(blurv(j,h,et,g,b),blurv(j,et,h,g,b),blurv(j,h,et,g,b)),e}}function blurh(i,e,o,d,h){for(let g=0,b=d*h;g<b;)i(e,o,g,g+=d,1)}function blurv(i,e,o,d,h){for(let g=0,b=d*h;g<d;++g)i(e,o,g,g+b,d)}function blurfImage(i){const e=blurf(i);return(o,d,h,g,b)=>{h<<=2,g<<=2,b<<=2,e(o,d,h+0,g+0,b),e(o,d,h+1,g+1,b),e(o,d,h+2,g+2,b),e(o,d,h+3,g+3,b)}}function blurf(i){const e=Math.floor(i);if(e===i)return bluri(i);const o=i-e,d=2*i+1;return(h,g,b,$,j)=>{if(!(($-=j)>=b))return;let et=e*g[b];const tt=j*e,nt=tt+j;for(let rt=b,ot=b+tt;rt<ot;rt+=j)et+=g[Math.min($,rt)];for(let rt=b,ot=$;rt<=ot;rt+=j)et+=g[Math.min($,rt+tt)],h[rt]=(et+o*(g[Math.max(b,rt-nt)]+g[Math.min($,rt+nt)]))/d,et-=g[Math.max(b,rt-tt)]}}function bluri(i){const e=2*i+1;return(o,d,h,g,b)=>{if(!((g-=b)>=h))return;let $=i*d[h];const j=b*i;for(let et=h,tt=h+j;et<tt;et+=b)$+=d[Math.min(g,et)];for(let et=h,tt=g;et<=tt;et+=b)$+=d[Math.min(g,et+j)],o[et]=$/e,$-=d[Math.max(h,et-j)]}}function count$1(i,e){let o=0;if(e===void 0)for(let d of i)d!=null&&(d=+d)>=d&&++o;else{let d=-1;for(let h of i)(h=e(h,++d,i))!=null&&(h=+h)>=h&&++o}return o}function length$1(i){return i.length|0}function empty$2(i){return!(i>0)}function arrayify$1(i){return typeof i!="object"||"length"in i?i:Array.from(i)}function reducer(i){return e=>i(...e)}function cross$1(...i){const e=typeof i[i.length-1]=="function"&&reducer(i.pop());i=i.map(arrayify$1);const o=i.map(length$1),d=i.length-1,h=new Array(d+1).fill(0),g=[];if(d<0||o.some(empty$2))return g;for(;;){g.push(h.map(($,j)=>i[j][$]));let b=d;for(;++h[b]===o[b];){if(b===0)return e?g.map(e):g;h[b--]=0}}}function cumsum(i,e){var o=0,d=0;return Float64Array.from(i,e===void 0?h=>o+=+h||0:h=>o+=+e(h,d++,i)||0)}function variance(i,e){let o=0,d,h=0,g=0;if(e===void 0)for(let b of i)b!=null&&(b=+b)>=b&&(d=b-h,h+=d/++o,g+=d*(b-h));else{let b=-1;for(let $ of i)($=e($,++b,i))!=null&&($=+$)>=$&&(d=$-h,h+=d/++o,g+=d*($-h))}if(o>1)return g/(o-1)}function deviation(i,e){const o=variance(i,e);return o&&Math.sqrt(o)}function extent$2(i,e){let o,d;if(e===void 0)for(const h of i)h!=null&&(o===void 0?h>=h&&(o=d=h):(o>h&&(o=h),d<h&&(d=h)));else{let h=-1;for(let g of i)(g=e(g,++h,i))!=null&&(o===void 0?g>=g&&(o=d=g):(o>g&&(o=g),d<g&&(d=g)))}return[o,d]}class Adder{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){const o=this._partials;let d=0;for(let h=0;h<this._n&&h<32;h++){const g=o[h],b=e+g,$=Math.abs(e)<Math.abs(g)?e-(b-g):g-(b-e);$&&(o[d++]=$),e=b}return o[d]=e,this._n=d+1,this}valueOf(){const e=this._partials;let o=this._n,d,h,g,b=0;if(o>0){for(b=e[--o];o>0&&(d=b,h=e[--o],b=d+h,g=h-(b-d),!g););o>0&&(g<0&&e[o-1]<0||g>0&&e[o-1]>0)&&(h=g*2,d=b+h,h==d-b&&(b=d))}return b}}class InternMap extends Map{constructor(e,o=keyof$1){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:o}}),e!=null)for(const[d,h]of e)this.set(d,h)}get(e){return super.get(intern_get(this,e))}has(e){return super.has(intern_get(this,e))}set(e,o){return super.set(intern_set(this,e),o)}delete(e){return super.delete(intern_delete(this,e))}}class InternSet extends Set{constructor(e,o=keyof$1){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:o}}),e!=null)for(const d of e)this.add(d)}has(e){return super.has(intern_get(this,e))}add(e){return super.add(intern_set(this,e))}delete(e){return super.delete(intern_delete(this,e))}}function intern_get({_intern:i,_key:e},o){const d=e(o);return i.has(d)?i.get(d):o}function intern_set({_intern:i,_key:e},o){const d=e(o);return i.has(d)?i.get(d):(i.set(d,o),o)}function intern_delete({_intern:i,_key:e},o){const d=e(o);return i.has(d)&&(o=i.get(d),i.delete(d)),o}function keyof$1(i){return i!==null&&typeof i=="object"?i.valueOf():i}function identity$9(i){return i}function group$1(i,...e){return nest(i,identity$9,identity$9,e)}function rollup(i,e,...o){return nest(i,identity$9,e,o)}function rollups(i,e,...o){return nest(i,Array.from,e,o)}function nest(i,e,o,d){return function h(g,b){if(b>=d.length)return o(g);const $=new InternMap,j=d[b++];let et=-1;for(const tt of g){const nt=j(tt,++et,g),rt=$.get(nt);rt?rt.push(tt):$.set(nt,[tt])}for(const[tt,nt]of $)$.set(tt,h(nt,b));return e($)}(i,0)}function permute(i,e){return Array.from(e,o=>i[o])}function sort$1(i,...e){if(typeof i[Symbol.iterator]!="function")throw new TypeError("values is not iterable");i=Array.from(i);let[o]=e;if(o&&o.length!==2||e.length>1){const d=Uint32Array.from(i,(h,g)=>g);return e.length>1?(e=e.map(h=>i.map(h)),d.sort((h,g)=>{for(const b of e){const $=ascendingDefined$1(b[h],b[g]);if($)return $}})):(o=i.map(o),d.sort((h,g)=>ascendingDefined$1(o[h],o[g]))),permute(i,d)}return i.sort(compareDefined(o))}function compareDefined(i=ascending$2){if(i===ascending$2)return ascendingDefined$1;if(typeof i!="function")throw new TypeError("compare is not a function");return(e,o)=>{const d=i(e,o);return d||d===0?d:(i(o,o)===0)-(i(e,e)===0)}}function ascendingDefined$1(i,e){return(i==null||!(i>=i))-(e==null||!(e>=e))||(i<e?-1:i>e?1:0)}function groupSort(i,e,o){return(e.length!==2?sort$1(rollup(i,e,o),([d,h],[g,b])=>ascending$2(h,b)||ascending$2(d,g)):sort$1(group$1(i,o),([d,h],[g,b])=>e(h,b)||ascending$2(d,g))).map(([d])=>d)}const e10=Math.sqrt(50),e5=Math.sqrt(10),e2=Math.sqrt(2);function tickSpec(i,e,o){const d=(e-i)/Math.max(0,o),h=Math.floor(Math.log10(d)),g=d/Math.pow(10,h),b=g>=e10?10:g>=e5?5:g>=e2?2:1;let $,j,et;return h<0?(et=Math.pow(10,-h)/b,$=Math.round(i*et),j=Math.round(e*et),$/et<i&&++$,j/et>e&&--j,et=-et):(et=Math.pow(10,h)*b,$=Math.round(i/et),j=Math.round(e/et),$*et<i&&++$,j*et>e&&--j),j<$&&.5<=o&&o<2?tickSpec(i,e,o*2):[$,j,et]}function ticks(i,e,o){if(e=+e,i=+i,o=+o,!(o>0))return[];if(i===e)return[i];const d=e<i,[h,g,b]=d?tickSpec(e,i,o):tickSpec(i,e,o);if(!(g>=h))return[];const $=g-h+1,j=new Array($);if(d)if(b<0)for(let et=0;et<$;++et)j[et]=(g-et)/-b;else for(let et=0;et<$;++et)j[et]=(g-et)*b;else if(b<0)for(let et=0;et<$;++et)j[et]=(h+et)/-b;else for(let et=0;et<$;++et)j[et]=(h+et)*b;return j}function tickIncrement(i,e,o){return e=+e,i=+i,o=+o,tickSpec(i,e,o)[2]}function tickStep(i,e,o){e=+e,i=+i,o=+o;const d=e<i,h=d?tickIncrement(e,i,o):tickIncrement(i,e,o);return(d?-1:1)*(h<0?1/-h:h)}function nice$1(i,e,o){let d;for(;;){const h=tickIncrement(i,e,o);if(h===d||h===0||!isFinite(h))return[i,e];h>0?(i=Math.floor(i/h)*h,e=Math.ceil(e/h)*h):h<0&&(i=Math.ceil(i*h)/h,e=Math.floor(e*h)/h),d=h}}function thresholdSturges(i){return Math.max(1,Math.ceil(Math.log(count$1(i))/Math.LN2)+1)}function max$1(i,e){let o;if(e===void 0)for(const d of i)d!=null&&(o<d||o===void 0&&d>=d)&&(o=d);else{let d=-1;for(let h of i)(h=e(h,++d,i))!=null&&(o<h||o===void 0&&h>=h)&&(o=h)}return o}function maxIndex(i,e){let o,d=-1,h=-1;if(e===void 0)for(const g of i)++h,g!=null&&(o<g||o===void 0&&g>=g)&&(o=g,d=h);else for(let g of i)(g=e(g,++h,i))!=null&&(o<g||o===void 0&&g>=g)&&(o=g,d=h);return d}function min$2(i,e){let o;if(e===void 0)for(const d of i)d!=null&&(o>d||o===void 0&&d>=d)&&(o=d);else{let d=-1;for(let h of i)(h=e(h,++d,i))!=null&&(o>h||o===void 0&&h>=h)&&(o=h)}return o}function minIndex(i,e){let o,d=-1,h=-1;if(e===void 0)for(const g of i)++h,g!=null&&(o>g||o===void 0&&g>=g)&&(o=g,d=h);else for(let g of i)(g=e(g,++h,i))!=null&&(o>g||o===void 0&&g>=g)&&(o=g,d=h);return d}function quickselect(i,e,o=0,d=1/0,h){if(e=Math.floor(e),o=Math.floor(Math.max(0,o)),d=Math.floor(Math.min(i.length-1,d)),!(o<=e&&e<=d))return i;for(h=h===void 0?ascendingDefined$1:compareDefined(h);d>o;){if(d-o>600){const j=d-o+1,et=e-o+1,tt=Math.log(j),nt=.5*Math.exp(2*tt/3),rt=.5*Math.sqrt(tt*nt*(j-nt)/j)*(et-j/2<0?-1:1),ot=Math.max(o,Math.floor(e-et*nt/j+rt)),st=Math.min(d,Math.floor(e+(j-et)*nt/j+rt));quickselect(i,e,ot,st,h)}const g=i[e];let b=o,$=d;for(swap$1(i,o,e),h(i[d],g)>0&&swap$1(i,o,d);b<$;){for(swap$1(i,b,$),++b,--$;h(i[b],g)<0;)++b;for(;h(i[$],g)>0;)--$}h(i[o],g)===0?swap$1(i,o,$):(++$,swap$1(i,$,d)),$<=e&&(o=$+1),e<=$&&(d=$-1)}return i}function swap$1(i,e,o){const d=i[e];i[e]=i[o],i[o]=d}function greatest(i,e=ascending$2){let o,d=!1;if(e.length===1){let h;for(const g of i){const b=e(g);(d?ascending$2(b,h)>0:ascending$2(b,b)===0)&&(o=g,h=b,d=!0)}}else for(const h of i)(d?e(h,o)>0:e(h,h)===0)&&(o=h,d=!0);return o}function quantile$1(i,e,o){if(i=Float64Array.from(numbers(i,o)),!(!(d=i.length)||isNaN(e=+e))){if(e<=0||d<2)return min$2(i);if(e>=1)return max$1(i);var d,h=(d-1)*e,g=Math.floor(h),b=max$1(quickselect(i,g).subarray(0,g+1)),$=min$2(i.subarray(g+1));return b+($-b)*(h-g)}}function quantileSorted(i,e,o=number$5){if(!(!(d=i.length)||isNaN(e=+e))){if(e<=0||d<2)return+o(i[0],0,i);if(e>=1)return+o(i[d-1],d-1,i);var d,h=(d-1)*e,g=Math.floor(h),b=+o(i[g],g,i),$=+o(i[g+1],g+1,i);return b+($-b)*(h-g)}}function thresholdFreedmanDiaconis(i,e,o){const d=count$1(i),h=quantile$1(i,.75)-quantile$1(i,.25);return d&&h?Math.ceil((o-e)/(2*h*Math.pow(d,-1/3))):1}function thresholdScott(i,e,o){const d=count$1(i),h=deviation(i);return d&&h?Math.ceil((o-e)*Math.cbrt(d)/(3.49*h)):1}function mean(i,e){let o=0,d=0;if(e===void 0)for(let h of i)h!=null&&(h=+h)>=h&&(++o,d+=h);else{let h=-1;for(let g of i)(g=e(g,++h,i))!=null&&(g=+g)>=g&&(++o,d+=g)}if(o)return d/o}function median(i,e){return quantile$1(i,.5,e)}function*flatten(i){for(const e of i)yield*e}function merge(i){return Array.from(flatten(i))}function mode(i,e){const o=new InternMap;if(e===void 0)for(let g of i)g!=null&&g>=g&&o.set(g,(o.get(g)||0)+1);else{let g=-1;for(let b of i)(b=e(b,++g,i))!=null&&b>=b&&o.set(b,(o.get(b)||0)+1)}let d,h=0;for(const[g,b]of o)b>h&&(h=b,d=g);return d}function pairs(i,e=pair){const o=[];let d,h=!1;for(const g of i)h&&o.push(e(d,g)),d=g,h=!0;return o}function pair(i,e){return[i,e]}function range$1(i,e,o){i=+i,e=+e,o=(h=arguments.length)<2?(e=i,i=0,1):h<3?1:+o;for(var d=-1,h=Math.max(0,Math.ceil((e-i)/o))|0,g=new Array(h);++d<h;)g[d]=i+d*o;return g}function rank(i,e=ascending$2){if(typeof i[Symbol.iterator]!="function")throw new TypeError("values is not iterable");let o=Array.from(i);const d=new Float64Array(o.length);e.length!==2&&(o=o.map(e),e=ascending$2);const h=($,j)=>e(o[$],o[j]);let g,b;return i=Uint32Array.from(o,($,j)=>j),i.sort(e===ascending$2?($,j)=>ascendingDefined$1(o[$],o[j]):compareDefined(h)),i.forEach(($,j)=>{const et=h($,g===void 0?$:g);et>=0?((g===void 0||et>0)&&(g=$,b=j),d[$]=b):d[$]=NaN}),d}function least(i,e=ascending$2){let o,d=!1;if(e.length===1){let h;for(const g of i){const b=e(g);(d?ascending$2(b,h)<0:ascending$2(b,b)===0)&&(o=g,h=b,d=!0)}}else for(const h of i)(d?e(h,o)<0:e(h,h)===0)&&(o=h,d=!0);return o}function sum$2(i,e){let o=0;if(e===void 0)for(let d of i)(d=+d)&&(o+=d);else{let d=-1;for(let h of i)(h=+e(h,++d,i))&&(o+=h)}return o}function reverse$1(i){if(typeof i[Symbol.iterator]!="function")throw new TypeError("values is not iterable");return Array.from(i).reverse()}function identity$8(i){return i}var top=1,right=2,bottom=3,left=4,epsilon$5=1e-6;function translateX(i){return"translate("+i+",0)"}function translateY(i){return"translate(0,"+i+")"}function number$4(i){return e=>+i(e)}function center(i,e){return e=Math.max(0,i.bandwidth()-e*2)/2,i.round()&&(e=Math.round(e)),o=>+i(o)+e}function entering(){return!this.__axis}function axis$1(i,e){var o=[],d=null,h=null,g=6,b=6,$=3,j=typeof window<"u"&&window.devicePixelRatio>1?0:.5,et=i===top||i===left?-1:1,tt=i===left||i===right?"x":"y",nt=i===top||i===bottom?translateX:translateY;function rt(ot){var st=d??(e.ticks?e.ticks.apply(e,o):e.domain()),bt=h??(e.tickFormat?e.tickFormat.apply(e,o):identity$8),vt=Math.max(g,0)+$,at=e.range(),ut=+at[0]+j,$t=+at[at.length-1]+j,wt=(e.bandwidth?center:number$4)(e.copy(),j),At=ot.selection?ot.selection():ot,xt=At.selectAll(".domain").data([null]),Rt=At.selectAll(".tick").data(st,e).order(),Ot=Rt.exit(),kt=Rt.enter().append("g").attr("class","tick"),Mt=Rt.select("line"),Bt=Rt.select("text");xt=xt.merge(xt.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),Rt=Rt.merge(kt),Mt=Mt.merge(kt.append("line").attr("stroke","currentColor").attr(tt+"2",et*g)),Bt=Bt.merge(kt.append("text").attr("fill","currentColor").attr(tt,et*vt).attr("dy",i===top?"0em":i===bottom?"0.71em":"0.32em")),ot!==At&&(xt=xt.transition(ot),Rt=Rt.transition(ot),Mt=Mt.transition(ot),Bt=Bt.transition(ot),Ot=Ot.transition(ot).attr("opacity",epsilon$5).attr("transform",function(jt){return isFinite(jt=wt(jt))?nt(jt+j):this.getAttribute("transform")}),kt.attr("opacity",epsilon$5).attr("transform",function(jt){var zt=this.parentNode.__axis;return nt((zt&&isFinite(zt=zt(jt))?zt:wt(jt))+j)})),Ot.remove(),xt.attr("d",i===left||i===right?b?"M"+et*b+","+ut+"H"+j+"V"+$t+"H"+et*b:"M"+j+","+ut+"V"+$t:b?"M"+ut+","+et*b+"V"+j+"H"+$t+"V"+et*b:"M"+ut+","+j+"H"+$t),Rt.attr("opacity",1).attr("transform",function(jt){return nt(wt(jt)+j)}),Mt.attr(tt+"2",et*g),Bt.attr(tt,et*vt).text(bt),At.filter(entering).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",i===right?"start":i===left?"end":"middle"),At.each(function(){this.__axis=wt})}return rt.scale=function(ot){return arguments.length?(e=ot,rt):e},rt.ticks=function(){return o=Array.from(arguments),rt},rt.tickArguments=function(ot){return arguments.length?(o=ot==null?[]:Array.from(ot),rt):o.slice()},rt.tickValues=function(ot){return arguments.length?(d=ot==null?null:Array.from(ot),rt):d&&d.slice()},rt.tickFormat=function(ot){return arguments.length?(h=ot,rt):h},rt.tickSize=function(ot){return arguments.length?(g=b=+ot,rt):g},rt.tickSizeInner=function(ot){return arguments.length?(g=+ot,rt):g},rt.tickSizeOuter=function(ot){return arguments.length?(b=+ot,rt):b},rt.tickPadding=function(ot){return arguments.length?($=+ot,rt):$},rt.offset=function(ot){return arguments.length?(j=+ot,rt):j},rt}function axisBottom(i){return axis$1(bottom,i)}var noop$3={value:()=>{}};function dispatch(){for(var i=0,e=arguments.length,o={},d;i<e;++i){if(!(d=arguments[i]+"")||d in o||/[\s.]/.test(d))throw new Error("illegal type: "+d);o[d]=[]}return new Dispatch(o)}function Dispatch(i){this._=i}function parseTypenames$1(i,e){return i.trim().split(/^|\s+/).map(function(o){var d="",h=o.indexOf(".");if(h>=0&&(d=o.slice(h+1),o=o.slice(0,h)),o&&!e.hasOwnProperty(o))throw new Error("unknown type: "+o);return{type:o,name:d}})}Dispatch.prototype=dispatch.prototype={constructor:Dispatch,on:function(i,e){var o=this._,d=parseTypenames$1(i+"",o),h,g=-1,b=d.length;if(arguments.length<2){for(;++g<b;)if((h=(i=d[g]).type)&&(h=get$1(o[h],i.name)))return h;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++g<b;)if(h=(i=d[g]).type)o[h]=set$1(o[h],i.name,e);else if(e==null)for(h in o)o[h]=set$1(o[h],i.name,null);return this},copy:function(){var i={},e=this._;for(var o in e)i[o]=e[o].slice();return new Dispatch(i)},call:function(i,e){if((h=arguments.length-2)>0)for(var o=new Array(h),d=0,h,g;d<h;++d)o[d]=arguments[d+2];if(!this._.hasOwnProperty(i))throw new Error("unknown type: "+i);for(g=this._[i],d=0,h=g.length;d<h;++d)g[d].value.apply(e,o)},apply:function(i,e,o){if(!this._.hasOwnProperty(i))throw new Error("unknown type: "+i);for(var d=this._[i],h=0,g=d.length;h<g;++h)d[h].value.apply(e,o)}};function get$1(i,e){for(var o=0,d=i.length,h;o<d;++o)if((h=i[o]).name===e)return h.value}function set$1(i,e,o){for(var d=0,h=i.length;d<h;++d)if(i[d].name===e){i[d]=noop$3,i=i.slice(0,d).concat(i.slice(d+1));break}return o!=null&&i.push({name:e,value:o}),i}var xhtml="http://www.w3.org/1999/xhtml";const namespaces={svg:"http://www.w3.org/2000/svg",xhtml,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function namespace(i){var e=i+="",o=e.indexOf(":");return o>=0&&(e=i.slice(0,o))!=="xmlns"&&(i=i.slice(o+1)),namespaces.hasOwnProperty(e)?{space:namespaces[e],local:i}:i}function creatorInherit(i){return function(){var e=this.ownerDocument,o=this.namespaceURI;return o===xhtml&&e.documentElement.namespaceURI===xhtml?e.createElement(i):e.createElementNS(o,i)}}function creatorFixed(i){return function(){return this.ownerDocument.createElementNS(i.space,i.local)}}function creator(i){var e=namespace(i);return(e.local?creatorFixed:creatorInherit)(e)}function none(){}function selector(i){return i==null?none:function(){return this.querySelector(i)}}function selection_select(i){typeof i!="function"&&(i=selector(i));for(var e=this._groups,o=e.length,d=new Array(o),h=0;h<o;++h)for(var g=e[h],b=g.length,$=d[h]=new Array(b),j,et,tt=0;tt<b;++tt)(j=g[tt])&&(et=i.call(j,j.__data__,tt,g))&&("__data__"in j&&(et.__data__=j.__data__),$[tt]=et);return new Selection$1(d,this._parents)}function array$2(i){return i==null?[]:Array.isArray(i)?i:Array.from(i)}function empty$1(){return[]}function selectorAll(i){return i==null?empty$1:function(){return this.querySelectorAll(i)}}function arrayAll(i){return function(){return array$2(i.apply(this,arguments))}}function selection_selectAll(i){typeof i=="function"?i=arrayAll(i):i=selectorAll(i);for(var e=this._groups,o=e.length,d=[],h=[],g=0;g<o;++g)for(var b=e[g],$=b.length,j,et=0;et<$;++et)(j=b[et])&&(d.push(i.call(j,j.__data__,et,b)),h.push(j));return new Selection$1(d,h)}function matcher(i){return function(){return this.matches(i)}}function childMatcher(i){return function(e){return e.matches(i)}}var find=Array.prototype.find;function childFind(i){return function(){return find.call(this.children,i)}}function childFirst(){return this.firstElementChild}function selection_selectChild(i){return this.select(i==null?childFirst:childFind(typeof i=="function"?i:childMatcher(i)))}var filter$1=Array.prototype.filter;function children(){return Array.from(this.children)}function childrenFilter(i){return function(){return filter$1.call(this.children,i)}}function selection_selectChildren(i){return this.selectAll(i==null?children:childrenFilter(typeof i=="function"?i:childMatcher(i)))}function selection_filter(i){typeof i!="function"&&(i=matcher(i));for(var e=this._groups,o=e.length,d=new Array(o),h=0;h<o;++h)for(var g=e[h],b=g.length,$=d[h]=[],j,et=0;et<b;++et)(j=g[et])&&i.call(j,j.__data__,et,g)&&$.push(j);return new Selection$1(d,this._parents)}function sparse(i){return new Array(i.length)}function selection_enter(){return new Selection$1(this._enter||this._groups.map(sparse),this._parents)}function EnterNode(i,e){this.ownerDocument=i.ownerDocument,this.namespaceURI=i.namespaceURI,this._next=null,this._parent=i,this.__data__=e}EnterNode.prototype={constructor:EnterNode,appendChild:function(i){return this._parent.insertBefore(i,this._next)},insertBefore:function(i,e){return this._parent.insertBefore(i,e)},querySelector:function(i){return this._parent.querySelector(i)},querySelectorAll:function(i){return this._parent.querySelectorAll(i)}};function constant$6(i){return function(){return i}}function bindIndex(i,e,o,d,h,g){for(var b=0,$,j=e.length,et=g.length;b<et;++b)($=e[b])?($.__data__=g[b],d[b]=$):o[b]=new EnterNode(i,g[b]);for(;b<j;++b)($=e[b])&&(h[b]=$)}function bindKey(i,e,o,d,h,g,b){var $,j,et=new Map,tt=e.length,nt=g.length,rt=new Array(tt),ot;for($=0;$<tt;++$)(j=e[$])&&(rt[$]=ot=b.call(j,j.__data__,$,e)+"",et.has(ot)?h[$]=j:et.set(ot,j));for($=0;$<nt;++$)ot=b.call(i,g[$],$,g)+"",(j=et.get(ot))?(d[$]=j,j.__data__=g[$],et.delete(ot)):o[$]=new EnterNode(i,g[$]);for($=0;$<tt;++$)(j=e[$])&&et.get(rt[$])===j&&(h[$]=j)}function datum(i){return i.__data__}function selection_data(i,e){if(!arguments.length)return Array.from(this,datum);var o=e?bindKey:bindIndex,d=this._parents,h=this._groups;typeof i!="function"&&(i=constant$6(i));for(var g=h.length,b=new Array(g),$=new Array(g),j=new Array(g),et=0;et<g;++et){var tt=d[et],nt=h[et],rt=nt.length,ot=arraylike(i.call(tt,tt&&tt.__data__,et,d)),st=ot.length,bt=$[et]=new Array(st),vt=b[et]=new Array(st),at=j[et]=new Array(rt);o(tt,nt,bt,vt,at,ot,e);for(var ut=0,$t=0,wt,At;ut<st;++ut)if(wt=bt[ut]){for(ut>=$t&&($t=ut+1);!(At=vt[$t])&&++$t<st;);wt._next=At||null}}return b=new Selection$1(b,d),b._enter=$,b._exit=j,b}function arraylike(i){return typeof i=="object"&&"length"in i?i:Array.from(i)}function selection_exit(){return new Selection$1(this._exit||this._groups.map(sparse),this._parents)}function selection_join(i,e,o){var d=this.enter(),h=this,g=this.exit();return typeof i=="function"?(d=i(d),d&&(d=d.selection())):d=d.append(i+""),e!=null&&(h=e(h),h&&(h=h.selection())),o==null?g.remove():o(g),d&&h?d.merge(h).order():h}function selection_merge(i){for(var e=i.selection?i.selection():i,o=this._groups,d=e._groups,h=o.length,g=d.length,b=Math.min(h,g),$=new Array(h),j=0;j<b;++j)for(var et=o[j],tt=d[j],nt=et.length,rt=$[j]=new Array(nt),ot,st=0;st<nt;++st)(ot=et[st]||tt[st])&&(rt[st]=ot);for(;j<h;++j)$[j]=o[j];return new Selection$1($,this._parents)}function selection_order(){for(var i=this._groups,e=-1,o=i.length;++e<o;)for(var d=i[e],h=d.length-1,g=d[h],b;--h>=0;)(b=d[h])&&(g&&b.compareDocumentPosition(g)^4&&g.parentNode.insertBefore(b,g),g=b);return this}function selection_sort(i){i||(i=ascending$1);function e(nt,rt){return nt&&rt?i(nt.__data__,rt.__data__):!nt-!rt}for(var o=this._groups,d=o.length,h=new Array(d),g=0;g<d;++g){for(var b=o[g],$=b.length,j=h[g]=new Array($),et,tt=0;tt<$;++tt)(et=b[tt])&&(j[tt]=et);j.sort(e)}return new Selection$1(h,this._parents).order()}function ascending$1(i,e){return i<e?-1:i>e?1:i>=e?0:NaN}function selection_call(){var i=arguments[0];return arguments[0]=this,i.apply(null,arguments),this}function selection_nodes(){return Array.from(this)}function selection_node(){for(var i=this._groups,e=0,o=i.length;e<o;++e)for(var d=i[e],h=0,g=d.length;h<g;++h){var b=d[h];if(b)return b}return null}function selection_size(){let i=0;for(const e of this)++i;return i}function selection_empty(){return!this.node()}function selection_each(i){for(var e=this._groups,o=0,d=e.length;o<d;++o)for(var h=e[o],g=0,b=h.length,$;g<b;++g)($=h[g])&&i.call($,$.__data__,g,h);return this}function attrRemove$1(i){return function(){this.removeAttribute(i)}}function attrRemoveNS$1(i){return function(){this.removeAttributeNS(i.space,i.local)}}function attrConstant$1(i,e){return function(){this.setAttribute(i,e)}}function attrConstantNS$1(i,e){return function(){this.setAttributeNS(i.space,i.local,e)}}function attrFunction$1(i,e){return function(){var o=e.apply(this,arguments);o==null?this.removeAttribute(i):this.setAttribute(i,o)}}function attrFunctionNS$1(i,e){return function(){var o=e.apply(this,arguments);o==null?this.removeAttributeNS(i.space,i.local):this.setAttributeNS(i.space,i.local,o)}}function selection_attr(i,e){var o=namespace(i);if(arguments.length<2){var d=this.node();return o.local?d.getAttributeNS(o.space,o.local):d.getAttribute(o)}return this.each((e==null?o.local?attrRemoveNS$1:attrRemove$1:typeof e=="function"?o.local?attrFunctionNS$1:attrFunction$1:o.local?attrConstantNS$1:attrConstant$1)(o,e))}function defaultView(i){return i.ownerDocument&&i.ownerDocument.defaultView||i.document&&i||i.defaultView}function styleRemove$1(i){return function(){this.style.removeProperty(i)}}function styleConstant$1(i,e,o){return function(){this.style.setProperty(i,e,o)}}function styleFunction$1(i,e,o){return function(){var d=e.apply(this,arguments);d==null?this.style.removeProperty(i):this.style.setProperty(i,d,o)}}function selection_style(i,e,o){return arguments.length>1?this.each((e==null?styleRemove$1:typeof e=="function"?styleFunction$1:styleConstant$1)(i,e,o??"")):styleValue(this.node(),i)}function styleValue(i,e){return i.style.getPropertyValue(e)||defaultView(i).getComputedStyle(i,null).getPropertyValue(e)}function propertyRemove(i){return function(){delete this[i]}}function propertyConstant(i,e){return function(){this[i]=e}}function propertyFunction(i,e){return function(){var o=e.apply(this,arguments);o==null?delete this[i]:this[i]=o}}function selection_property(i,e){return arguments.length>1?this.each((e==null?propertyRemove:typeof e=="function"?propertyFunction:propertyConstant)(i,e)):this.node()[i]}function classArray(i){return i.trim().split(/^|\s+/)}function classList(i){return i.classList||new ClassList(i)}function ClassList(i){this._node=i,this._names=classArray(i.getAttribute("class")||"")}ClassList.prototype={add:function(i){var e=this._names.indexOf(i);e<0&&(this._names.push(i),this._node.setAttribute("class",this._names.join(" ")))},remove:function(i){var e=this._names.indexOf(i);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(i){return this._names.indexOf(i)>=0}};function classedAdd(i,e){for(var o=classList(i),d=-1,h=e.length;++d<h;)o.add(e[d])}function classedRemove(i,e){for(var o=classList(i),d=-1,h=e.length;++d<h;)o.remove(e[d])}function classedTrue(i){return function(){classedAdd(this,i)}}function classedFalse(i){return function(){classedRemove(this,i)}}function classedFunction(i,e){return function(){(e.apply(this,arguments)?classedAdd:classedRemove)(this,i)}}function selection_classed(i,e){var o=classArray(i+"");if(arguments.length<2){for(var d=classList(this.node()),h=-1,g=o.length;++h<g;)if(!d.contains(o[h]))return!1;return!0}return this.each((typeof e=="function"?classedFunction:e?classedTrue:classedFalse)(o,e))}function textRemove(){this.textContent=""}function textConstant$1(i){return function(){this.textContent=i}}function textFunction$1(i){return function(){var e=i.apply(this,arguments);this.textContent=e??""}}function selection_text(i){return arguments.length?this.each(i==null?textRemove:(typeof i=="function"?textFunction$1:textConstant$1)(i)):this.node().textContent}function htmlRemove(){this.innerHTML=""}function htmlConstant(i){return function(){this.innerHTML=i}}function htmlFunction(i){return function(){var e=i.apply(this,arguments);this.innerHTML=e??""}}function selection_html(i){return arguments.length?this.each(i==null?htmlRemove:(typeof i=="function"?htmlFunction:htmlConstant)(i)):this.node().innerHTML}function raise(){this.nextSibling&&this.parentNode.appendChild(this)}function selection_raise(){return this.each(raise)}function lower(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function selection_lower(){return this.each(lower)}function selection_append(i){var e=typeof i=="function"?i:creator(i);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function constantNull(){return null}function selection_insert(i,e){var o=typeof i=="function"?i:creator(i),d=e==null?constantNull:typeof e=="function"?e:selector(e);return this.select(function(){return this.insertBefore(o.apply(this,arguments),d.apply(this,arguments)||null)})}function remove(){var i=this.parentNode;i&&i.removeChild(this)}function selection_remove(){return this.each(remove)}function selection_cloneShallow(){var i=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(i,this.nextSibling):i}function selection_cloneDeep(){var i=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(i,this.nextSibling):i}function selection_clone(i){return this.select(i?selection_cloneDeep:selection_cloneShallow)}function selection_datum(i){return arguments.length?this.property("__data__",i):this.node().__data__}function contextListener(i){return function(e){i.call(this,e,this.__data__)}}function parseTypenames(i){return i.trim().split(/^|\s+/).map(function(e){var o="",d=e.indexOf(".");return d>=0&&(o=e.slice(d+1),e=e.slice(0,d)),{type:e,name:o}})}function onRemove(i){return function(){var e=this.__on;if(e){for(var o=0,d=-1,h=e.length,g;o<h;++o)g=e[o],(!i.type||g.type===i.type)&&g.name===i.name?this.removeEventListener(g.type,g.listener,g.options):e[++d]=g;++d?e.length=d:delete this.__on}}}function onAdd(i,e,o){return function(){var d=this.__on,h,g=contextListener(e);if(d){for(var b=0,$=d.length;b<$;++b)if((h=d[b]).type===i.type&&h.name===i.name){this.removeEventListener(h.type,h.listener,h.options),this.addEventListener(h.type,h.listener=g,h.options=o),h.value=e;return}}this.addEventListener(i.type,g,o),h={type:i.type,name:i.name,value:e,listener:g,options:o},d?d.push(h):this.__on=[h]}}function selection_on(i,e,o){var d=parseTypenames(i+""),h,g=d.length,b;if(arguments.length<2){var $=this.node().__on;if($){for(var j=0,et=$.length,tt;j<et;++j)for(h=0,tt=$[j];h<g;++h)if((b=d[h]).type===tt.type&&b.name===tt.name)return tt.value}return}for($=e?onAdd:onRemove,h=0;h<g;++h)this.each($(d[h],e,o));return this}function dispatchEvent(i,e,o){var d=defaultView(i),h=d.CustomEvent;typeof h=="function"?h=new h(e,o):(h=d.document.createEvent("Event"),o?(h.initEvent(e,o.bubbles,o.cancelable),h.detail=o.detail):h.initEvent(e,!1,!1)),i.dispatchEvent(h)}function dispatchConstant(i,e){return function(){return dispatchEvent(this,i,e)}}function dispatchFunction(i,e){return function(){return dispatchEvent(this,i,e.apply(this,arguments))}}function selection_dispatch(i,e){return this.each((typeof e=="function"?dispatchFunction:dispatchConstant)(i,e))}function*selection_iterator(){for(var i=this._groups,e=0,o=i.length;e<o;++e)for(var d=i[e],h=0,g=d.length,b;h<g;++h)(b=d[h])&&(yield b)}var root=[null];function Selection$1(i,e){this._groups=i,this._parents=e}function selection(){return new Selection$1([[document.documentElement]],root)}function selection_selection(){return this}Selection$1.prototype=selection.prototype={constructor:Selection$1,select:selection_select,selectAll:selection_selectAll,selectChild:selection_selectChild,selectChildren:selection_selectChildren,filter:selection_filter,data:selection_data,enter:selection_enter,exit:selection_exit,join:selection_join,merge:selection_merge,selection:selection_selection,order:selection_order,sort:selection_sort,call:selection_call,nodes:selection_nodes,node:selection_node,size:selection_size,empty:selection_empty,each:selection_each,attr:selection_attr,style:selection_style,property:selection_property,classed:selection_classed,text:selection_text,html:selection_html,raise:selection_raise,lower:selection_lower,append:selection_append,insert:selection_insert,remove:selection_remove,clone:selection_clone,datum:selection_datum,on:selection_on,dispatch:selection_dispatch,[Symbol.iterator]:selection_iterator};function select$1(i){return typeof i=="string"?new Selection$1([[document.querySelector(i)]],[document.documentElement]):new Selection$1([[i]],root)}function sourceEvent(i){let e;for(;e=i.sourceEvent;)i=e;return i}function pointer$1(i,e){if(i=sourceEvent(i),e===void 0&&(e=i.currentTarget),e){var o=e.ownerSVGElement||e;if(o.createSVGPoint){var d=o.createSVGPoint();return d.x=i.clientX,d.y=i.clientY,d=d.matrixTransform(e.getScreenCTM().inverse()),[d.x,d.y]}if(e.getBoundingClientRect){var h=e.getBoundingClientRect();return[i.clientX-h.left-e.clientLeft,i.clientY-h.top-e.clientTop]}}return[i.pageX,i.pageY]}const nonpassivecapture={capture:!0,passive:!1};function noevent$2(i){i.preventDefault(),i.stopImmediatePropagation()}function dragDisable(i){var e=i.document.documentElement,o=select$1(i).on("dragstart.drag",noevent$2,nonpassivecapture);"onselectstart"in e?o.on("selectstart.drag",noevent$2,nonpassivecapture):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function yesdrag(i,e){var o=i.document.documentElement,d=select$1(i).on("dragstart.drag",null);e&&(d.on("click.drag",noevent$2,nonpassivecapture),setTimeout(function(){d.on("click.drag",null)},0)),"onselectstart"in o?d.on("selectstart.drag",null):(o.style.MozUserSelect=o.__noselect,delete o.__noselect)}function define(i,e,o){i.prototype=e.prototype=o,o.constructor=i}function extend(i,e){var o=Object.create(i.prototype);for(var d in e)o[d]=e[d];return o}function Color(){}var darker=.7,brighter=1/darker,reI="\\s*([+-]?\\d+)\\s*",reN="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",reP="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",reHex=/^#([0-9a-f]{3,8})$/,reRgbInteger=new RegExp(`^rgb\\(${reI},${reI},${reI}\\)$`),reRgbPercent=new RegExp(`^rgb\\(${reP},${reP},${reP}\\)$`),reRgbaInteger=new RegExp(`^rgba\\(${reI},${reI},${reI},${reN}\\)$`),reRgbaPercent=new RegExp(`^rgba\\(${reP},${reP},${reP},${reN}\\)$`),reHslPercent=new RegExp(`^hsl\\(${reN},${reP},${reP}\\)$`),reHslaPercent=new RegExp(`^hsla\\(${reN},${reP},${reP},${reN}\\)$`),named$1={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};define(Color,color$1,{copy(i){return Object.assign(new this.constructor,this,i)},displayable(){return this.rgb().displayable()},hex:color_formatHex,formatHex:color_formatHex,formatHex8:color_formatHex8,formatHsl:color_formatHsl,formatRgb:color_formatRgb,toString:color_formatRgb});function color_formatHex(){return this.rgb().formatHex()}function color_formatHex8(){return this.rgb().formatHex8()}function color_formatHsl(){return hslConvert(this).formatHsl()}function color_formatRgb(){return this.rgb().formatRgb()}function color$1(i){var e,o;return i=(i+"").trim().toLowerCase(),(e=reHex.exec(i))?(o=e[1].length,e=parseInt(e[1],16),o===6?rgbn(e):o===3?new Rgb(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):o===8?rgba(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):o===4?rgba(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=reRgbInteger.exec(i))?new Rgb(e[1],e[2],e[3],1):(e=reRgbPercent.exec(i))?new Rgb(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=reRgbaInteger.exec(i))?rgba(e[1],e[2],e[3],e[4]):(e=reRgbaPercent.exec(i))?rgba(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=reHslPercent.exec(i))?hsla(e[1],e[2]/100,e[3]/100,1):(e=reHslaPercent.exec(i))?hsla(e[1],e[2]/100,e[3]/100,e[4]):named$1.hasOwnProperty(i)?rgbn(named$1[i]):i==="transparent"?new Rgb(NaN,NaN,NaN,0):null}function rgbn(i){return new Rgb(i>>16&255,i>>8&255,i&255,1)}function rgba(i,e,o,d){return d<=0&&(i=e=o=NaN),new Rgb(i,e,o,d)}function rgbConvert(i){return i instanceof Color||(i=color$1(i)),i?(i=i.rgb(),new Rgb(i.r,i.g,i.b,i.opacity)):new Rgb}function rgb(i,e,o,d){return arguments.length===1?rgbConvert(i):new Rgb(i,e,o,d??1)}function Rgb(i,e,o,d){this.r=+i,this.g=+e,this.b=+o,this.opacity=+d}define(Rgb,rgb,extend(Color,{brighter(i){return i=i==null?brighter:Math.pow(brighter,i),new Rgb(this.r*i,this.g*i,this.b*i,this.opacity)},darker(i){return i=i==null?darker:Math.pow(darker,i),new Rgb(this.r*i,this.g*i,this.b*i,this.opacity)},rgb(){return this},clamp(){return new Rgb(clampi(this.r),clampi(this.g),clampi(this.b),clampa(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rgb_formatHex,formatHex:rgb_formatHex,formatHex8:rgb_formatHex8,formatRgb:rgb_formatRgb,toString:rgb_formatRgb}));function rgb_formatHex(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}`}function rgb_formatHex8(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}${hex((isNaN(this.opacity)?1:this.opacity)*255)}`}function rgb_formatRgb(){const i=clampa(this.opacity);return`${i===1?"rgb(":"rgba("}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${i===1?")":`, ${i})`}`}function clampa(i){return isNaN(i)?1:Math.max(0,Math.min(1,i))}function clampi(i){return Math.max(0,Math.min(255,Math.round(i)||0))}function hex(i){return i=clampi(i),(i<16?"0":"")+i.toString(16)}function hsla(i,e,o,d){return d<=0?i=e=o=NaN:o<=0||o>=1?i=e=NaN:e<=0&&(i=NaN),new Hsl(i,e,o,d)}function hslConvert(i){if(i instanceof Hsl)return new Hsl(i.h,i.s,i.l,i.opacity);if(i instanceof Color||(i=color$1(i)),!i)return new Hsl;if(i instanceof Hsl)return i;i=i.rgb();var e=i.r/255,o=i.g/255,d=i.b/255,h=Math.min(e,o,d),g=Math.max(e,o,d),b=NaN,$=g-h,j=(g+h)/2;return $?(e===g?b=(o-d)/$+(o<d)*6:o===g?b=(d-e)/$+2:b=(e-o)/$+4,$/=j<.5?g+h:2-g-h,b*=60):$=j>0&&j<1?0:b,new Hsl(b,$,j,i.opacity)}function hsl$1(i,e,o,d){return arguments.length===1?hslConvert(i):new Hsl(i,e,o,d??1)}function Hsl(i,e,o,d){this.h=+i,this.s=+e,this.l=+o,this.opacity=+d}define(Hsl,hsl$1,extend(Color,{brighter(i){return i=i==null?brighter:Math.pow(brighter,i),new Hsl(this.h,this.s,this.l*i,this.opacity)},darker(i){return i=i==null?darker:Math.pow(darker,i),new Hsl(this.h,this.s,this.l*i,this.opacity)},rgb(){var i=this.h%360+(this.h<0)*360,e=isNaN(i)||isNaN(this.s)?0:this.s,o=this.l,d=o+(o<.5?o:1-o)*e,h=2*o-d;return new Rgb(hsl2rgb(i>=240?i-240:i+120,h,d),hsl2rgb(i,h,d),hsl2rgb(i<120?i+240:i-120,h,d),this.opacity)},clamp(){return new Hsl(clamph(this.h),clampt(this.s),clampt(this.l),clampa(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const i=clampa(this.opacity);return`${i===1?"hsl(":"hsla("}${clamph(this.h)}, ${clampt(this.s)*100}%, ${clampt(this.l)*100}%${i===1?")":`, ${i})`}`}}));function clamph(i){return i=(i||0)%360,i<0?i+360:i}function clampt(i){return Math.max(0,Math.min(1,i||0))}function hsl2rgb(i,e,o){return(i<60?e+(o-e)*i/60:i<180?o:i<240?e+(o-e)*(240-i)/60:e)*255}const radians$2=Math.PI/180,degrees$2=180/Math.PI,K=18,Xn$1=.96422,Yn$1=1,Zn$1=.82521,t0$1=4/29,t1$1=6/29,t2=3*t1$1*t1$1,t3=t1$1*t1$1*t1$1;function labConvert(i){if(i instanceof Lab)return new Lab(i.l,i.a,i.b,i.opacity);if(i instanceof Hcl)return hcl2lab(i);i instanceof Rgb||(i=rgbConvert(i));var e=rgb2lrgb(i.r),o=rgb2lrgb(i.g),d=rgb2lrgb(i.b),h=xyz2lab((.2225045*e+.7168786*o+.0606169*d)/Yn$1),g,b;return e===o&&o===d?g=b=h:(g=xyz2lab((.4360747*e+.3850649*o+.1430804*d)/Xn$1),b=xyz2lab((.0139322*e+.0971045*o+.7141733*d)/Zn$1)),new Lab(116*h-16,500*(g-h),200*(h-b),i.opacity)}function lab$1(i,e,o,d){return arguments.length===1?labConvert(i):new Lab(i,e,o,d??1)}function Lab(i,e,o,d){this.l=+i,this.a=+e,this.b=+o,this.opacity=+d}define(Lab,lab$1,extend(Color,{brighter(i){return new Lab(this.l+K*(i??1),this.a,this.b,this.opacity)},darker(i){return new Lab(this.l-K*(i??1),this.a,this.b,this.opacity)},rgb(){var i=(this.l+16)/116,e=isNaN(this.a)?i:i+this.a/500,o=isNaN(this.b)?i:i-this.b/200;return e=Xn$1*lab2xyz(e),i=Yn$1*lab2xyz(i),o=Zn$1*lab2xyz(o),new Rgb(lrgb2rgb(3.1338561*e-1.6168667*i-.4906146*o),lrgb2rgb(-.9787684*e+1.9161415*i+.033454*o),lrgb2rgb(.0719453*e-.2289914*i+1.4052427*o),this.opacity)}}));function xyz2lab(i){return i>t3?Math.pow(i,1/3):i/t2+t0$1}function lab2xyz(i){return i>t1$1?i*i*i:t2*(i-t0$1)}function lrgb2rgb(i){return 255*(i<=.0031308?12.92*i:1.055*Math.pow(i,1/2.4)-.055)}function rgb2lrgb(i){return(i/=255)<=.04045?i/12.92:Math.pow((i+.055)/1.055,2.4)}function hclConvert(i){if(i instanceof Hcl)return new Hcl(i.h,i.c,i.l,i.opacity);if(i instanceof Lab||(i=labConvert(i)),i.a===0&&i.b===0)return new Hcl(NaN,0<i.l&&i.l<100?0:NaN,i.l,i.opacity);var e=Math.atan2(i.b,i.a)*degrees$2;return new Hcl(e<0?e+360:e,Math.sqrt(i.a*i.a+i.b*i.b),i.l,i.opacity)}function hcl$1(i,e,o,d){return arguments.length===1?hclConvert(i):new Hcl(i,e,o,d??1)}function Hcl(i,e,o,d){this.h=+i,this.c=+e,this.l=+o,this.opacity=+d}function hcl2lab(i){if(isNaN(i.h))return new Lab(i.l,0,0,i.opacity);var e=i.h*radians$2;return new Lab(i.l,Math.cos(e)*i.c,Math.sin(e)*i.c,i.opacity)}define(Hcl,hcl$1,extend(Color,{brighter(i){return new Hcl(this.h,this.c,this.l+K*(i??1),this.opacity)},darker(i){return new Hcl(this.h,this.c,this.l-K*(i??1),this.opacity)},rgb(){return hcl2lab(this).rgb()}}));var A=-.14861,B$1=1.78277,C=-.29227,D$1=-.90649,E=1.97294,ED=E*D$1,EB=E*B$1,BC_DA=B$1*C-D$1*A;function cubehelixConvert(i){if(i instanceof Cubehelix)return new Cubehelix(i.h,i.s,i.l,i.opacity);i instanceof Rgb||(i=rgbConvert(i));var e=i.r/255,o=i.g/255,d=i.b/255,h=(BC_DA*d+ED*e-EB*o)/(BC_DA+ED-EB),g=d-h,b=(E*(o-h)-C*g)/D$1,$=Math.sqrt(b*b+g*g)/(E*h*(1-h)),j=$?Math.atan2(b,g)*degrees$2-120:NaN;return new Cubehelix(j<0?j+360:j,$,h,i.opacity)}function cubehelix$1(i,e,o,d){return arguments.length===1?cubehelixConvert(i):new Cubehelix(i,e,o,d??1)}function Cubehelix(i,e,o,d){this.h=+i,this.s=+e,this.l=+o,this.opacity=+d}define(Cubehelix,cubehelix$1,extend(Color,{brighter(i){return i=i==null?brighter:Math.pow(brighter,i),new Cubehelix(this.h,this.s,this.l*i,this.opacity)},darker(i){return i=i==null?darker:Math.pow(darker,i),new Cubehelix(this.h,this.s,this.l*i,this.opacity)},rgb(){var i=isNaN(this.h)?0:(this.h+120)*radians$2,e=+this.l,o=isNaN(this.s)?0:this.s*e*(1-e),d=Math.cos(i),h=Math.sin(i);return new Rgb(255*(e+o*(A*d+B$1*h)),255*(e+o*(C*d+D$1*h)),255*(e+o*(E*d)),this.opacity)}}));function basis(i,e,o,d,h){var g=i*i,b=g*i;return((1-3*i+3*g-b)*e+(4-6*g+3*b)*o+(1+3*i+3*g-3*b)*d+b*h)/6}function basis$1(i){var e=i.length-1;return function(o){var d=o<=0?o=0:o>=1?(o=1,e-1):Math.floor(o*e),h=i[d],g=i[d+1],b=d>0?i[d-1]:2*h-g,$=d<e-1?i[d+2]:2*g-h;return basis((o-d/e)*e,b,h,g,$)}}const constant$5=i=>()=>i;function linear$1(i,e){return function(o){return i+o*e}}function exponential(i,e,o){return i=Math.pow(i,o),e=Math.pow(e,o)-i,o=1/o,function(d){return Math.pow(i+d*e,o)}}function hue(i,e){var o=e-i;return o?linear$1(i,o>180||o<-180?o-360*Math.round(o/360):o):constant$5(isNaN(i)?e:i)}function gamma(i){return(i=+i)==1?nogamma:function(e,o){return o-e?exponential(e,o,i):constant$5(isNaN(e)?o:e)}}function nogamma(i,e){var o=e-i;return o?linear$1(i,o):constant$5(isNaN(i)?e:i)}const interpolateRgb=function i(e){var o=gamma(e);function d(h,g){var b=o((h=rgb(h)).r,(g=rgb(g)).r),$=o(h.g,g.g),j=o(h.b,g.b),et=nogamma(h.opacity,g.opacity);return function(tt){return h.r=b(tt),h.g=$(tt),h.b=j(tt),h.opacity=et(tt),h+""}}return d.gamma=i,d}(1);function rgbSpline(i){return function(e){var o=e.length,d=new Array(o),h=new Array(o),g=new Array(o),b,$;for(b=0;b<o;++b)$=rgb(e[b]),d[b]=$.r||0,h[b]=$.g||0,g[b]=$.b||0;return d=i(d),h=i(h),g=i(g),$.opacity=1,function(j){return $.r=d(j),$.g=h(j),$.b=g(j),$+""}}}var rgbBasis=rgbSpline(basis$1);function numberArray(i,e){e||(e=[]);var o=i?Math.min(e.length,i.length):0,d=e.slice(),h;return function(g){for(h=0;h<o;++h)d[h]=i[h]*(1-g)+e[h]*g;return d}}function isNumberArray(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}function genericArray(i,e){var o=e?e.length:0,d=i?Math.min(o,i.length):0,h=new Array(d),g=new Array(o),b;for(b=0;b<d;++b)h[b]=interpolate$1(i[b],e[b]);for(;b<o;++b)g[b]=e[b];return function($){for(b=0;b<d;++b)g[b]=h[b]($);return g}}function date$1(i,e){var o=new Date;return i=+i,e=+e,function(d){return o.setTime(i*(1-d)+e*d),o}}function interpolateNumber(i,e){return i=+i,e=+e,function(o){return i*(1-o)+e*o}}function object(i,e){var o={},d={},h;(i===null||typeof i!="object")&&(i={}),(e===null||typeof e!="object")&&(e={});for(h in e)h in i?o[h]=interpolate$1(i[h],e[h]):d[h]=e[h];return function(g){for(h in o)d[h]=o[h](g);return d}}var reA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,reB=new RegExp(reA.source,"g");function zero(i){return function(){return i}}function one$1(i){return function(e){return i(e)+""}}function interpolateString(i,e){var o=reA.lastIndex=reB.lastIndex=0,d,h,g,b=-1,$=[],j=[];for(i=i+"",e=e+"";(d=reA.exec(i))&&(h=reB.exec(e));)(g=h.index)>o&&(g=e.slice(o,g),$[b]?$[b]+=g:$[++b]=g),(d=d[0])===(h=h[0])?$[b]?$[b]+=h:$[++b]=h:($[++b]=null,j.push({i:b,x:interpolateNumber(d,h)})),o=reB.lastIndex;return o<e.length&&(g=e.slice(o),$[b]?$[b]+=g:$[++b]=g),$.length<2?j[0]?one$1(j[0].x):zero(e):(e=j.length,function(et){for(var tt=0,nt;tt<e;++tt)$[(nt=j[tt]).i]=nt.x(et);return $.join("")})}function interpolate$1(i,e){var o=typeof e,d;return e==null||o==="boolean"?constant$5(e):(o==="number"?interpolateNumber:o==="string"?(d=color$1(e))?(e=d,interpolateRgb):interpolateString:e instanceof color$1?interpolateRgb:e instanceof Date?date$1:isNumberArray(e)?numberArray:Array.isArray(e)?genericArray:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?object:interpolateNumber)(i,e)}function interpolateRound(i,e){return i=+i,e=+e,function(o){return Math.round(i*(1-o)+e*o)}}var degrees$1=180/Math.PI,identity$7={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function decompose(i,e,o,d,h,g){var b,$,j;return(b=Math.sqrt(i*i+e*e))&&(i/=b,e/=b),(j=i*o+e*d)&&(o-=i*j,d-=e*j),($=Math.sqrt(o*o+d*d))&&(o/=$,d/=$,j/=$),i*d<e*o&&(i=-i,e=-e,j=-j,b=-b),{translateX:h,translateY:g,rotate:Math.atan2(e,i)*degrees$1,skewX:Math.atan(j)*degrees$1,scaleX:b,scaleY:$}}var svgNode;function parseCss(i){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(i+"");return e.isIdentity?identity$7:decompose(e.a,e.b,e.c,e.d,e.e,e.f)}function parseSvg(i){return i==null||(svgNode||(svgNode=document.createElementNS("http://www.w3.org/2000/svg","g")),svgNode.setAttribute("transform",i),!(i=svgNode.transform.baseVal.consolidate()))?identity$7:(i=i.matrix,decompose(i.a,i.b,i.c,i.d,i.e,i.f))}function interpolateTransform(i,e,o,d){function h(et){return et.length?et.pop()+" ":""}function g(et,tt,nt,rt,ot,st){if(et!==nt||tt!==rt){var bt=ot.push("translate(",null,e,null,o);st.push({i:bt-4,x:interpolateNumber(et,nt)},{i:bt-2,x:interpolateNumber(tt,rt)})}else(nt||rt)&&ot.push("translate("+nt+e+rt+o)}function b(et,tt,nt,rt){et!==tt?(et-tt>180?tt+=360:tt-et>180&&(et+=360),rt.push({i:nt.push(h(nt)+"rotate(",null,d)-2,x:interpolateNumber(et,tt)})):tt&&nt.push(h(nt)+"rotate("+tt+d)}function $(et,tt,nt,rt){et!==tt?rt.push({i:nt.push(h(nt)+"skewX(",null,d)-2,x:interpolateNumber(et,tt)}):tt&&nt.push(h(nt)+"skewX("+tt+d)}function j(et,tt,nt,rt,ot,st){if(et!==nt||tt!==rt){var bt=ot.push(h(ot)+"scale(",null,",",null,")");st.push({i:bt-4,x:interpolateNumber(et,nt)},{i:bt-2,x:interpolateNumber(tt,rt)})}else(nt!==1||rt!==1)&&ot.push(h(ot)+"scale("+nt+","+rt+")")}return function(et,tt){var nt=[],rt=[];return et=i(et),tt=i(tt),g(et.translateX,et.translateY,tt.translateX,tt.translateY,nt,rt),b(et.rotate,tt.rotate,nt,rt),$(et.skewX,tt.skewX,nt,rt),j(et.scaleX,et.scaleY,tt.scaleX,tt.scaleY,nt,rt),et=tt=null,function(ot){for(var st=-1,bt=rt.length,vt;++st<bt;)nt[(vt=rt[st]).i]=vt.x(ot);return nt.join("")}}}var interpolateTransformCss=interpolateTransform(parseCss,"px, ","px)","deg)"),interpolateTransformSvg=interpolateTransform(parseSvg,", ",")",")"),epsilon2$1=1e-12;function cosh(i){return((i=Math.exp(i))+1/i)/2}function sinh(i){return((i=Math.exp(i))-1/i)/2}function tanh(i){return((i=Math.exp(2*i))-1)/(i+1)}const interpolateZoom=function i(e,o,d){function h(g,b){var $=g[0],j=g[1],et=g[2],tt=b[0],nt=b[1],rt=b[2],ot=tt-$,st=nt-j,bt=ot*ot+st*st,vt,at;if(bt<epsilon2$1)at=Math.log(rt/et)/e,vt=function(Rt){return[$+Rt*ot,j+Rt*st,et*Math.exp(e*Rt*at)]};else{var ut=Math.sqrt(bt),$t=(rt*rt-et*et+d*bt)/(2*et*o*ut),wt=(rt*rt-et*et-d*bt)/(2*rt*o*ut),At=Math.log(Math.sqrt($t*$t+1)-$t),xt=Math.log(Math.sqrt(wt*wt+1)-wt);at=(xt-At)/e,vt=function(Rt){var Ot=Rt*at,kt=cosh(At),Mt=et/(o*ut)*(kt*tanh(e*Ot+At)-sinh(At));return[$+Mt*ot,j+Mt*st,et*kt/cosh(e*Ot+At)]}}return vt.duration=at*1e3*e/Math.SQRT2,vt}return h.rho=function(g){var b=Math.max(.001,+g),$=b*b,j=$*$;return i(b,$,j)},h}(Math.SQRT2,2,4);function hsl(i){return function(e,o){var d=i((e=hsl$1(e)).h,(o=hsl$1(o)).h),h=nogamma(e.s,o.s),g=nogamma(e.l,o.l),b=nogamma(e.opacity,o.opacity);return function($){return e.h=d($),e.s=h($),e.l=g($),e.opacity=b($),e+""}}}const interpolateHsl=hsl(hue);function lab(i,e){var o=nogamma((i=lab$1(i)).l,(e=lab$1(e)).l),d=nogamma(i.a,e.a),h=nogamma(i.b,e.b),g=nogamma(i.opacity,e.opacity);return function(b){return i.l=o(b),i.a=d(b),i.b=h(b),i.opacity=g(b),i+""}}function hcl(i){return function(e,o){var d=i((e=hcl$1(e)).h,(o=hcl$1(o)).h),h=nogamma(e.c,o.c),g=nogamma(e.l,o.l),b=nogamma(e.opacity,o.opacity);return function($){return e.h=d($),e.c=h($),e.l=g($),e.opacity=b($),e+""}}}const interpolateHcl=hcl(hue);function cubehelix(i){return function e(o){o=+o;function d(h,g){var b=i((h=cubehelix$1(h)).h,(g=cubehelix$1(g)).h),$=nogamma(h.s,g.s),j=nogamma(h.l,g.l),et=nogamma(h.opacity,g.opacity);return function(tt){return h.h=b(tt),h.s=$(tt),h.l=j(Math.pow(tt,o)),h.opacity=et(tt),h+""}}return d.gamma=e,d}(1)}cubehelix(hue);var cubehelixLong=cubehelix(nogamma);function piecewise(i,e){e===void 0&&(e=i,i=interpolate$1);for(var o=0,d=e.length-1,h=e[0],g=new Array(d<0?0:d);o<d;)g[o]=i(h,h=e[++o]);return function(b){var $=Math.max(0,Math.min(d-1,Math.floor(b*=d)));return g[$](b-$)}}function quantize(i,e){for(var o=new Array(e),d=0;d<e;++d)o[d]=i(d/(e-1));return o}var frame$2=0,timeout$1=0,interval=0,pokeDelay=1e3,taskHead,taskTail,clockLast=0,clockNow=0,clockSkew=0,clock=typeof performance=="object"&&performance.now?performance:Date,setFrame=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(i){setTimeout(i,17)};function now(){return clockNow||(setFrame(clearNow),clockNow=clock.now()+clockSkew)}function clearNow(){clockNow=0}function Timer(){this._call=this._time=this._next=null}Timer.prototype=timer.prototype={constructor:Timer,restart:function(i,e,o){if(typeof i!="function")throw new TypeError("callback is not a function");o=(o==null?now():+o)+(e==null?0:+e),!this._next&&taskTail!==this&&(taskTail?taskTail._next=this:taskHead=this,taskTail=this),this._call=i,this._time=o,sleep()},stop:function(){this._call&&(this._call=null,this._time=1/0,sleep())}};function timer(i,e,o){var d=new Timer;return d.restart(i,e,o),d}function timerFlush(){now(),++frame$2;for(var i=taskHead,e;i;)(e=clockNow-i._time)>=0&&i._call.call(void 0,e),i=i._next;--frame$2}function wake(){clockNow=(clockLast=clock.now())+clockSkew,frame$2=timeout$1=0;try{timerFlush()}finally{frame$2=0,nap(),clockNow=0}}function poke(){var i=clock.now(),e=i-clockLast;e>pokeDelay&&(clockSkew-=e,clockLast=i)}function nap(){for(var i,e=taskHead,o,d=1/0;e;)e._call?(d>e._time&&(d=e._time),i=e,e=e._next):(o=e._next,e._next=null,e=i?i._next=o:taskHead=o);taskTail=i,sleep(d)}function sleep(i){if(!frame$2){timeout$1&&(timeout$1=clearTimeout(timeout$1));var e=i-clockNow;e>24?(i<1/0&&(timeout$1=setTimeout(wake,i-clock.now()-clockSkew)),interval&&(interval=clearInterval(interval))):(interval||(clockLast=clock.now(),interval=setInterval(poke,pokeDelay)),frame$2=1,setFrame(wake))}}function timeout(i,e,o){var d=new Timer;return e=e==null?0:+e,d.restart(h=>{d.stop(),i(h+e)},e,o),d}var emptyOn=dispatch("start","end","cancel","interrupt"),emptyTween=[],CREATED=0,SCHEDULED=1,STARTING=2,STARTED=3,RUNNING=4,ENDING=5,ENDED=6;function schedule(i,e,o,d,h,g){var b=i.__transition;if(!b)i.__transition={};else if(o in b)return;create$1(i,o,{name:e,index:d,group:h,on:emptyOn,tween:emptyTween,time:g.time,delay:g.delay,duration:g.duration,ease:g.ease,timer:null,state:CREATED})}function init(i,e){var o=get(i,e);if(o.state>CREATED)throw new Error("too late; already scheduled");return o}function set(i,e){var o=get(i,e);if(o.state>STARTED)throw new Error("too late; already running");return o}function get(i,e){var o=i.__transition;if(!o||!(o=o[e]))throw new Error("transition not found");return o}function create$1(i,e,o){var d=i.__transition,h;d[e]=o,o.timer=timer(g,0,o.time);function g(et){o.state=SCHEDULED,o.timer.restart(b,o.delay,o.time),o.delay<=et&&b(et-o.delay)}function b(et){var tt,nt,rt,ot;if(o.state!==SCHEDULED)return j();for(tt in d)if(ot=d[tt],ot.name===o.name){if(ot.state===STARTED)return timeout(b);ot.state===RUNNING?(ot.state=ENDED,ot.timer.stop(),ot.on.call("interrupt",i,i.__data__,ot.index,ot.group),delete d[tt]):+tt<e&&(ot.state=ENDED,ot.timer.stop(),ot.on.call("cancel",i,i.__data__,ot.index,ot.group),delete d[tt])}if(timeout(function(){o.state===STARTED&&(o.state=RUNNING,o.timer.restart($,o.delay,o.time),$(et))}),o.state=STARTING,o.on.call("start",i,i.__data__,o.index,o.group),o.state===STARTING){for(o.state=STARTED,h=new Array(rt=o.tween.length),tt=0,nt=-1;tt<rt;++tt)(ot=o.tween[tt].value.call(i,i.__data__,o.index,o.group))&&(h[++nt]=ot);h.length=nt+1}}function $(et){for(var tt=et<o.duration?o.ease.call(null,et/o.duration):(o.timer.restart(j),o.state=ENDING,1),nt=-1,rt=h.length;++nt<rt;)h[nt].call(i,tt);o.state===ENDING&&(o.on.call("end",i,i.__data__,o.index,o.group),j())}function j(){o.state=ENDED,o.timer.stop(),delete d[e];for(var et in d)return;delete i.__transition}}function interrupt(i,e){var o=i.__transition,d,h,g=!0,b;if(o){e=e==null?null:e+"";for(b in o){if((d=o[b]).name!==e){g=!1;continue}h=d.state>STARTING&&d.state<ENDING,d.state=ENDED,d.timer.stop(),d.on.call(h?"interrupt":"cancel",i,i.__data__,d.index,d.group),delete o[b]}g&&delete i.__transition}}function selection_interrupt(i){return this.each(function(){interrupt(this,i)})}function tweenRemove(i,e){var o,d;return function(){var h=set(this,i),g=h.tween;if(g!==o){d=o=g;for(var b=0,$=d.length;b<$;++b)if(d[b].name===e){d=d.slice(),d.splice(b,1);break}}h.tween=d}}function tweenFunction(i,e,o){var d,h;if(typeof o!="function")throw new Error;return function(){var g=set(this,i),b=g.tween;if(b!==d){h=(d=b).slice();for(var $={name:e,value:o},j=0,et=h.length;j<et;++j)if(h[j].name===e){h[j]=$;break}j===et&&h.push($)}g.tween=h}}function transition_tween(i,e){var o=this._id;if(i+="",arguments.length<2){for(var d=get(this.node(),o).tween,h=0,g=d.length,b;h<g;++h)if((b=d[h]).name===i)return b.value;return null}return this.each((e==null?tweenRemove:tweenFunction)(o,i,e))}function tweenValue(i,e,o){var d=i._id;return i.each(function(){var h=set(this,d);(h.value||(h.value={}))[e]=o.apply(this,arguments)}),function(h){return get(h,d).value[e]}}function interpolate(i,e){var o;return(typeof e=="number"?interpolateNumber:e instanceof color$1?interpolateRgb:(o=color$1(e))?(e=o,interpolateRgb):interpolateString)(i,e)}function attrRemove(i){return function(){this.removeAttribute(i)}}function attrRemoveNS(i){return function(){this.removeAttributeNS(i.space,i.local)}}function attrConstant(i,e,o){var d,h=o+"",g;return function(){var b=this.getAttribute(i);return b===h?null:b===d?g:g=e(d=b,o)}}function attrConstantNS(i,e,o){var d,h=o+"",g;return function(){var b=this.getAttributeNS(i.space,i.local);return b===h?null:b===d?g:g=e(d=b,o)}}function attrFunction(i,e,o){var d,h,g;return function(){var b,$=o(this),j;return $==null?void this.removeAttribute(i):(b=this.getAttribute(i),j=$+"",b===j?null:b===d&&j===h?g:(h=j,g=e(d=b,$)))}}function attrFunctionNS(i,e,o){var d,h,g;return function(){var b,$=o(this),j;return $==null?void this.removeAttributeNS(i.space,i.local):(b=this.getAttributeNS(i.space,i.local),j=$+"",b===j?null:b===d&&j===h?g:(h=j,g=e(d=b,$)))}}function transition_attr(i,e){var o=namespace(i),d=o==="transform"?interpolateTransformSvg:interpolate;return this.attrTween(i,typeof e=="function"?(o.local?attrFunctionNS:attrFunction)(o,d,tweenValue(this,"attr."+i,e)):e==null?(o.local?attrRemoveNS:attrRemove)(o):(o.local?attrConstantNS:attrConstant)(o,d,e))}function attrInterpolate(i,e){return function(o){this.setAttribute(i,e.call(this,o))}}function attrInterpolateNS(i,e){return function(o){this.setAttributeNS(i.space,i.local,e.call(this,o))}}function attrTweenNS(i,e){var o,d;function h(){var g=e.apply(this,arguments);return g!==d&&(o=(d=g)&&attrInterpolateNS(i,g)),o}return h._value=e,h}function attrTween(i,e){var o,d;function h(){var g=e.apply(this,arguments);return g!==d&&(o=(d=g)&&attrInterpolate(i,g)),o}return h._value=e,h}function transition_attrTween(i,e){var o="attr."+i;if(arguments.length<2)return(o=this.tween(o))&&o._value;if(e==null)return this.tween(o,null);if(typeof e!="function")throw new Error;var d=namespace(i);return this.tween(o,(d.local?attrTweenNS:attrTween)(d,e))}function delayFunction(i,e){return function(){init(this,i).delay=+e.apply(this,arguments)}}function delayConstant(i,e){return e=+e,function(){init(this,i).delay=e}}function transition_delay(i){var e=this._id;return arguments.length?this.each((typeof i=="function"?delayFunction:delayConstant)(e,i)):get(this.node(),e).delay}function durationFunction(i,e){return function(){set(this,i).duration=+e.apply(this,arguments)}}function durationConstant(i,e){return e=+e,function(){set(this,i).duration=e}}function transition_duration(i){var e=this._id;return arguments.length?this.each((typeof i=="function"?durationFunction:durationConstant)(e,i)):get(this.node(),e).duration}function easeConstant(i,e){if(typeof e!="function")throw new Error;return function(){set(this,i).ease=e}}function transition_ease(i){var e=this._id;return arguments.length?this.each(easeConstant(e,i)):get(this.node(),e).ease}function easeVarying(i,e){return function(){var o=e.apply(this,arguments);if(typeof o!="function")throw new Error;set(this,i).ease=o}}function transition_easeVarying(i){if(typeof i!="function")throw new Error;return this.each(easeVarying(this._id,i))}function transition_filter(i){typeof i!="function"&&(i=matcher(i));for(var e=this._groups,o=e.length,d=new Array(o),h=0;h<o;++h)for(var g=e[h],b=g.length,$=d[h]=[],j,et=0;et<b;++et)(j=g[et])&&i.call(j,j.__data__,et,g)&&$.push(j);return new Transition(d,this._parents,this._name,this._id)}function transition_merge(i){if(i._id!==this._id)throw new Error;for(var e=this._groups,o=i._groups,d=e.length,h=o.length,g=Math.min(d,h),b=new Array(d),$=0;$<g;++$)for(var j=e[$],et=o[$],tt=j.length,nt=b[$]=new Array(tt),rt,ot=0;ot<tt;++ot)(rt=j[ot]||et[ot])&&(nt[ot]=rt);for(;$<d;++$)b[$]=e[$];return new Transition(b,this._parents,this._name,this._id)}function start(i){return(i+"").trim().split(/^|\s+/).every(function(e){var o=e.indexOf(".");return o>=0&&(e=e.slice(0,o)),!e||e==="start"})}function onFunction(i,e,o){var d,h,g=start(e)?init:set;return function(){var b=g(this,i),$=b.on;$!==d&&(h=(d=$).copy()).on(e,o),b.on=h}}function transition_on(i,e){var o=this._id;return arguments.length<2?get(this.node(),o).on.on(i):this.each(onFunction(o,i,e))}function removeFunction(i){return function(){var e=this.parentNode;for(var o in this.__transition)if(+o!==i)return;e&&e.removeChild(this)}}function transition_remove(){return this.on("end.remove",removeFunction(this._id))}function transition_select(i){var e=this._name,o=this._id;typeof i!="function"&&(i=selector(i));for(var d=this._groups,h=d.length,g=new Array(h),b=0;b<h;++b)for(var $=d[b],j=$.length,et=g[b]=new Array(j),tt,nt,rt=0;rt<j;++rt)(tt=$[rt])&&(nt=i.call(tt,tt.__data__,rt,$))&&("__data__"in tt&&(nt.__data__=tt.__data__),et[rt]=nt,schedule(et[rt],e,o,rt,et,get(tt,o)));return new Transition(g,this._parents,e,o)}function transition_selectAll(i){var e=this._name,o=this._id;typeof i!="function"&&(i=selectorAll(i));for(var d=this._groups,h=d.length,g=[],b=[],$=0;$<h;++$)for(var j=d[$],et=j.length,tt,nt=0;nt<et;++nt)if(tt=j[nt]){for(var rt=i.call(tt,tt.__data__,nt,j),ot,st=get(tt,o),bt=0,vt=rt.length;bt<vt;++bt)(ot=rt[bt])&&schedule(ot,e,o,bt,rt,st);g.push(rt),b.push(tt)}return new Transition(g,b,e,o)}var Selection=selection.prototype.constructor;function transition_selection(){return new Selection(this._groups,this._parents)}function styleNull(i,e){var o,d,h;return function(){var g=styleValue(this,i),b=(this.style.removeProperty(i),styleValue(this,i));return g===b?null:g===o&&b===d?h:h=e(o=g,d=b)}}function styleRemove(i){return function(){this.style.removeProperty(i)}}function styleConstant(i,e,o){var d,h=o+"",g;return function(){var b=styleValue(this,i);return b===h?null:b===d?g:g=e(d=b,o)}}function styleFunction(i,e,o){var d,h,g;return function(){var b=styleValue(this,i),$=o(this),j=$+"";return $==null&&(j=$=(this.style.removeProperty(i),styleValue(this,i))),b===j?null:b===d&&j===h?g:(h=j,g=e(d=b,$))}}function styleMaybeRemove(i,e){var o,d,h,g="style."+e,b="end."+g,$;return function(){var j=set(this,i),et=j.on,tt=j.value[g]==null?$||($=styleRemove(e)):void 0;(et!==o||h!==tt)&&(d=(o=et).copy()).on(b,h=tt),j.on=d}}function transition_style(i,e,o){var d=(i+="")=="transform"?interpolateTransformCss:interpolate;return e==null?this.styleTween(i,styleNull(i,d)).on("end.style."+i,styleRemove(i)):typeof e=="function"?this.styleTween(i,styleFunction(i,d,tweenValue(this,"style."+i,e))).each(styleMaybeRemove(this._id,i)):this.styleTween(i,styleConstant(i,d,e),o).on("end.style."+i,null)}function styleInterpolate(i,e,o){return function(d){this.style.setProperty(i,e.call(this,d),o)}}function styleTween(i,e,o){var d,h;function g(){var b=e.apply(this,arguments);return b!==h&&(d=(h=b)&&styleInterpolate(i,b,o)),d}return g._value=e,g}function transition_styleTween(i,e,o){var d="style."+(i+="");if(arguments.length<2)return(d=this.tween(d))&&d._value;if(e==null)return this.tween(d,null);if(typeof e!="function")throw new Error;return this.tween(d,styleTween(i,e,o??""))}function textConstant(i){return function(){this.textContent=i}}function textFunction(i){return function(){var e=i(this);this.textContent=e??""}}function transition_text(i){return this.tween("text",typeof i=="function"?textFunction(tweenValue(this,"text",i)):textConstant(i==null?"":i+""))}function textInterpolate(i){return function(e){this.textContent=i.call(this,e)}}function textTween(i){var e,o;function d(){var h=i.apply(this,arguments);return h!==o&&(e=(o=h)&&textInterpolate(h)),e}return d._value=i,d}function transition_textTween(i){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(i==null)return this.tween(e,null);if(typeof i!="function")throw new Error;return this.tween(e,textTween(i))}function transition_transition(){for(var i=this._name,e=this._id,o=newId(),d=this._groups,h=d.length,g=0;g<h;++g)for(var b=d[g],$=b.length,j,et=0;et<$;++et)if(j=b[et]){var tt=get(j,e);schedule(j,i,o,et,b,{time:tt.time+tt.delay+tt.duration,delay:0,duration:tt.duration,ease:tt.ease})}return new Transition(d,this._parents,i,o)}function transition_end(){var i,e,o=this,d=o._id,h=o.size();return new Promise(function(g,b){var $={value:b},j={value:function(){--h===0&&g()}};o.each(function(){var et=set(this,d),tt=et.on;tt!==i&&(e=(i=tt).copy(),e._.cancel.push($),e._.interrupt.push($),e._.end.push(j)),et.on=e}),h===0&&g()})}var id=0;function Transition(i,e,o,d){this._groups=i,this._parents=e,this._name=o,this._id=d}function newId(){return++id}var selection_prototype=selection.prototype;Transition.prototype={constructor:Transition,select:transition_select,selectAll:transition_selectAll,selectChild:selection_prototype.selectChild,selectChildren:selection_prototype.selectChildren,filter:transition_filter,merge:transition_merge,selection:transition_selection,transition:transition_transition,call:selection_prototype.call,nodes:selection_prototype.nodes,node:selection_prototype.node,size:selection_prototype.size,empty:selection_prototype.empty,each:selection_prototype.each,on:transition_on,attr:transition_attr,attrTween:transition_attrTween,style:transition_style,styleTween:transition_styleTween,text:transition_text,textTween:transition_textTween,remove:transition_remove,tween:transition_tween,delay:transition_delay,duration:transition_duration,ease:transition_ease,easeVarying:transition_easeVarying,end:transition_end,[Symbol.iterator]:selection_prototype[Symbol.iterator]};function cubicInOut(i){return((i*=2)<=1?i*i*i:(i-=2)*i*i+2)/2}var defaultTiming={time:null,delay:0,duration:250,ease:cubicInOut};function inherit$1(i,e){for(var o;!(o=i.__transition)||!(o=o[e]);)if(!(i=i.parentNode))throw new Error(`transition ${e} not found`);return o}function selection_transition(i){var e,o;i instanceof Transition?(e=i._id,i=i._name):(e=newId(),(o=defaultTiming).time=now(),i=i==null?null:i+"");for(var d=this._groups,h=d.length,g=0;g<h;++g)for(var b=d[g],$=b.length,j,et=0;et<$;++et)(j=b[et])&&schedule(j,i,e,et,b,o||inherit$1(j,e));return new Transition(d,this._parents,i,e)}selection.prototype.interrupt=selection_interrupt;selection.prototype.transition=selection_transition;const constant$4=i=>()=>i;function BrushEvent(i,{sourceEvent:e,target:o,selection:d,mode:h,dispatch:g}){Object.defineProperties(this,{type:{value:i,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},selection:{value:d,enumerable:!0,configurable:!0},mode:{value:h,enumerable:!0,configurable:!0},_:{value:g}})}function nopropagation$1(i){i.stopImmediatePropagation()}function noevent$1(i){i.preventDefault(),i.stopImmediatePropagation()}var MODE_DRAG={name:"drag"},MODE_SPACE={name:"space"},MODE_HANDLE={name:"handle"},MODE_CENTER={name:"center"};const{abs:abs$1,max,min:min$1}=Math;function number1(i){return[+i[0],+i[1]]}function number2(i){return[number1(i[0]),number1(i[1])]}var X$1={name:"x",handles:["w","e"].map(type),input:function(i,e){return i==null?null:[[+i[0],e[0][1]],[+i[1],e[1][1]]]},output:function(i){return i&&[i[0][0],i[1][0]]}},Y={name:"y",handles:["n","s"].map(type),input:function(i,e){return i==null?null:[[e[0][0],+i[0]],[e[1][0],+i[1]]]},output:function(i){return i&&[i[0][1],i[1][1]]}},XY={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(type),input:function(i){return i==null?null:number2(i)},output:function(i){return i}},cursors={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},flipX={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},flipY={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},signsX={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},signsY={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function type(i){return{type:i}}function defaultFilter$1(i){return!i.ctrlKey&&!i.button}function defaultExtent$1(){var i=this.ownerSVGElement||this;return i.hasAttribute("viewBox")?(i=i.viewBox.baseVal,[[i.x,i.y],[i.x+i.width,i.y+i.height]]):[[0,0],[i.width.baseVal.value,i.height.baseVal.value]]}function defaultTouchable$1(){return navigator.maxTouchPoints||"ontouchstart"in this}function local(i){for(;!i.__brush;)if(!(i=i.parentNode))return;return i.__brush}function empty(i){return i[0][0]===i[1][0]||i[0][1]===i[1][1]}function brushX$1(){return brush$1(X$1)}function brushY$1(){return brush$1(Y)}function d3_brush(){return brush$1(XY)}function brush$1(i){var e=defaultExtent$1,o=defaultFilter$1,d=defaultTouchable$1,h=!0,g=dispatch("start","brush","end"),b=6,$;function j(vt){var at=vt.property("__brush",bt).selectAll(".overlay").data([type("overlay")]);at.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",cursors.overlay).merge(at).each(function(){var $t=local(this).extent;select$1(this).attr("x",$t[0][0]).attr("y",$t[0][1]).attr("width",$t[1][0]-$t[0][0]).attr("height",$t[1][1]-$t[0][1])}),vt.selectAll(".selection").data([type("selection")]).enter().append("rect").attr("class","selection").attr("cursor",cursors.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var ut=vt.selectAll(".handle").data(i.handles,function($t){return $t.type});ut.exit().remove(),ut.enter().append("rect").attr("class",function($t){return"handle handle--"+$t.type}).attr("cursor",function($t){return cursors[$t.type]}),vt.each(et).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",rt).filter(d).on("touchstart.brush",rt).on("touchmove.brush",ot).on("touchend.brush touchcancel.brush",st).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}j.move=function(vt,at,ut){vt.tween?vt.on("start.brush",function($t){tt(this,arguments).beforestart().start($t)}).on("interrupt.brush end.brush",function($t){tt(this,arguments).end($t)}).tween("brush",function(){var $t=this,wt=$t.__brush,At=tt($t,arguments),xt=wt.selection,Rt=i.input(typeof at=="function"?at.apply(this,arguments):at,wt.extent),Ot=interpolate$1(xt,Rt);function kt(Mt){wt.selection=Mt===1&&Rt===null?null:Ot(Mt),et.call($t),At.brush()}return xt!==null&&Rt!==null?kt:kt(1)}):vt.each(function(){var $t=this,wt=arguments,At=$t.__brush,xt=i.input(typeof at=="function"?at.apply($t,wt):at,At.extent),Rt=tt($t,wt).beforestart();interrupt($t),At.selection=xt===null?null:xt,et.call($t),Rt.start(ut).brush(ut).end(ut)})},j.clear=function(vt,at){j.move(vt,null,at)};function et(){var vt=select$1(this),at=local(this).selection;at?(vt.selectAll(".selection").style("display",null).attr("x",at[0][0]).attr("y",at[0][1]).attr("width",at[1][0]-at[0][0]).attr("height",at[1][1]-at[0][1]),vt.selectAll(".handle").style("display",null).attr("x",function(ut){return ut.type[ut.type.length-1]==="e"?at[1][0]-b/2:at[0][0]-b/2}).attr("y",function(ut){return ut.type[0]==="s"?at[1][1]-b/2:at[0][1]-b/2}).attr("width",function(ut){return ut.type==="n"||ut.type==="s"?at[1][0]-at[0][0]+b:b}).attr("height",function(ut){return ut.type==="e"||ut.type==="w"?at[1][1]-at[0][1]+b:b})):vt.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function tt(vt,at,ut){var $t=vt.__brush.emitter;return $t&&(!ut||!$t.clean)?$t:new nt(vt,at,ut)}function nt(vt,at,ut){this.that=vt,this.args=at,this.state=vt.__brush,this.active=0,this.clean=ut}nt.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(vt,at){return this.starting?(this.starting=!1,this.emit("start",vt,at)):this.emit("brush",vt),this},brush:function(vt,at){return this.emit("brush",vt,at),this},end:function(vt,at){return--this.active===0&&(delete this.state.emitter,this.emit("end",vt,at)),this},emit:function(vt,at,ut){var $t=select$1(this.that).datum();g.call(vt,this.that,new BrushEvent(vt,{sourceEvent:at,target:j,selection:i.output(this.state.selection),mode:ut,dispatch:g}),$t)}};function rt(vt){if($&&!vt.touches||!o.apply(this,arguments))return;var at=this,ut=vt.target.__data__.type,$t=(h&&vt.metaKey?ut="overlay":ut)==="selection"?MODE_DRAG:h&&vt.altKey?MODE_CENTER:MODE_HANDLE,wt=i===Y?null:signsX[ut],At=i===X$1?null:signsY[ut],xt=local(at),Rt=xt.extent,Ot=xt.selection,kt=Rt[0][0],Mt,Bt,jt=Rt[0][1],zt,Nt,Ct=Rt[1][0],Ft,Vt,Ut=Rt[1][1],Ht,Pt,Yt=0,Xt=0,wn,Mn=wt&&At&&h&&vt.shiftKey,Cn,On,vn=Array.from(vt.touches||[vt],er=>{const ir=er.identifier;return er=pointer$1(er,at),er.point0=er.slice(),er.identifier=ir,er});interrupt(at);var Nn=tt(at,arguments,!0).beforestart();if(ut==="overlay"){Ot&&(wn=!0);const er=[vn[0],vn[1]||vn[0]];xt.selection=Ot=[[Mt=i===Y?kt:min$1(er[0][0],er[1][0]),zt=i===X$1?jt:min$1(er[0][1],er[1][1])],[Ft=i===Y?Ct:max(er[0][0],er[1][0]),Ht=i===X$1?Ut:max(er[0][1],er[1][1])]],vn.length>1&&rr(vt)}else Mt=Ot[0][0],zt=Ot[0][1],Ft=Ot[1][0],Ht=Ot[1][1];Bt=Mt,Nt=zt,Vt=Ft,Pt=Ht;var Jt=select$1(at).attr("pointer-events","none"),Bn=Jt.selectAll(".overlay").attr("cursor",cursors[ut]);if(vt.touches)Nn.moved=Zt,Nn.ended=tr;else{var Ln=select$1(vt.view).on("mousemove.brush",Zt,!0).on("mouseup.brush",tr,!0);h&&Ln.on("keydown.brush",sr,!0).on("keyup.brush",ar,!0),dragDisable(vt.view)}et.call(at),Nn.start(vt,$t.name);function Zt(er){for(const ir of er.changedTouches||[er])for(const Mr of vn)Mr.identifier===ir.identifier&&(Mr.cur=pointer$1(ir,at));if(Mn&&!Cn&&!On&&vn.length===1){const ir=vn[0];abs$1(ir.cur[0]-ir[0])>abs$1(ir.cur[1]-ir[1])?On=!0:Cn=!0}for(const ir of vn)ir.cur&&(ir[0]=ir.cur[0],ir[1]=ir.cur[1]);wn=!0,noevent$1(er),rr(er)}function rr(er){const ir=vn[0],Mr=ir.point0;var $r;switch(Yt=ir[0]-Mr[0],Xt=ir[1]-Mr[1],$t){case MODE_SPACE:case MODE_DRAG:{wt&&(Yt=max(kt-Mt,min$1(Ct-Ft,Yt)),Bt=Mt+Yt,Vt=Ft+Yt),At&&(Xt=max(jt-zt,min$1(Ut-Ht,Xt)),Nt=zt+Xt,Pt=Ht+Xt);break}case MODE_HANDLE:{vn[1]?(wt&&(Bt=max(kt,min$1(Ct,vn[0][0])),Vt=max(kt,min$1(Ct,vn[1][0])),wt=1),At&&(Nt=max(jt,min$1(Ut,vn[0][1])),Pt=max(jt,min$1(Ut,vn[1][1])),At=1)):(wt<0?(Yt=max(kt-Mt,min$1(Ct-Mt,Yt)),Bt=Mt+Yt,Vt=Ft):wt>0&&(Yt=max(kt-Ft,min$1(Ct-Ft,Yt)),Bt=Mt,Vt=Ft+Yt),At<0?(Xt=max(jt-zt,min$1(Ut-zt,Xt)),Nt=zt+Xt,Pt=Ht):At>0&&(Xt=max(jt-Ht,min$1(Ut-Ht,Xt)),Nt=zt,Pt=Ht+Xt));break}case MODE_CENTER:{wt&&(Bt=max(kt,min$1(Ct,Mt-Yt*wt)),Vt=max(kt,min$1(Ct,Ft+Yt*wt))),At&&(Nt=max(jt,min$1(Ut,zt-Xt*At)),Pt=max(jt,min$1(Ut,Ht+Xt*At)));break}}Vt<Bt&&(wt*=-1,$r=Mt,Mt=Ft,Ft=$r,$r=Bt,Bt=Vt,Vt=$r,ut in flipX&&Bn.attr("cursor",cursors[ut=flipX[ut]])),Pt<Nt&&(At*=-1,$r=zt,zt=Ht,Ht=$r,$r=Nt,Nt=Pt,Pt=$r,ut in flipY&&Bn.attr("cursor",cursors[ut=flipY[ut]])),xt.selection&&(Ot=xt.selection),Cn&&(Bt=Ot[0][0],Vt=Ot[1][0]),On&&(Nt=Ot[0][1],Pt=Ot[1][1]),(Ot[0][0]!==Bt||Ot[0][1]!==Nt||Ot[1][0]!==Vt||Ot[1][1]!==Pt)&&(xt.selection=[[Bt,Nt],[Vt,Pt]],et.call(at),Nn.brush(er,$t.name))}function tr(er){if(nopropagation$1(er),er.touches){if(er.touches.length)return;$&&clearTimeout($),$=setTimeout(function(){$=null},500)}else yesdrag(er.view,wn),Ln.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);Jt.attr("pointer-events","all"),Bn.attr("cursor",cursors.overlay),xt.selection&&(Ot=xt.selection),empty(Ot)&&(xt.selection=null,et.call(at)),Nn.end(er,$t.name)}function sr(er){switch(er.keyCode){case 16:{Mn=wt&&At;break}case 18:{$t===MODE_HANDLE&&(wt&&(Ft=Vt-Yt*wt,Mt=Bt+Yt*wt),At&&(Ht=Pt-Xt*At,zt=Nt+Xt*At),$t=MODE_CENTER,rr(er));break}case 32:{($t===MODE_HANDLE||$t===MODE_CENTER)&&(wt<0?Ft=Vt-Yt:wt>0&&(Mt=Bt-Yt),At<0?Ht=Pt-Xt:At>0&&(zt=Nt-Xt),$t=MODE_SPACE,Bn.attr("cursor",cursors.selection),rr(er));break}default:return}noevent$1(er)}function ar(er){switch(er.keyCode){case 16:{Mn&&(Cn=On=Mn=!1,rr(er));break}case 18:{$t===MODE_CENTER&&(wt<0?Ft=Vt:wt>0&&(Mt=Bt),At<0?Ht=Pt:At>0&&(zt=Nt),$t=MODE_HANDLE,rr(er));break}case 32:{$t===MODE_SPACE&&(er.altKey?(wt&&(Ft=Vt-Yt*wt,Mt=Bt+Yt*wt),At&&(Ht=Pt-Xt*At,zt=Nt+Xt*At),$t=MODE_CENTER):(wt<0?Ft=Vt:wt>0&&(Mt=Bt),At<0?Ht=Pt:At>0&&(zt=Nt),$t=MODE_HANDLE),Bn.attr("cursor",cursors[ut]),rr(er));break}default:return}noevent$1(er)}}function ot(vt){tt(this,arguments).moved(vt)}function st(vt){tt(this,arguments).ended(vt)}function bt(){var vt=this.__brush||{selection:null};return vt.extent=number2(e.apply(this,arguments)),vt.dim=i,vt}return j.extent=function(vt){return arguments.length?(e=typeof vt=="function"?vt:constant$4(number2(vt)),j):e},j.filter=function(vt){return arguments.length?(o=typeof vt=="function"?vt:constant$4(!!vt),j):o},j.touchable=function(vt){return arguments.length?(d=typeof vt=="function"?vt:constant$4(!!vt),j):d},j.handleSize=function(vt){return arguments.length?(b=+vt,j):b},j.keyModifiers=function(vt){return arguments.length?(h=!!vt,j):h},j.on=function(){var vt=g.on.apply(g,arguments);return vt===g?j:vt},j}const pi$3=Math.PI,tau$4=2*pi$3,epsilon$4=1e-6,tauEpsilon=tau$4-epsilon$4;function append$1(i){this._+=i[0];for(let e=1,o=i.length;e<o;++e)this._+=arguments[e]+i[e]}function appendRound$1(i){let e=Math.floor(i);if(!(e>=0))throw new Error(`invalid digits: ${i}`);if(e>15)return append$1;const o=10**e;return function(d){this._+=d[0];for(let h=1,g=d.length;h<g;++h)this._+=Math.round(arguments[h]*o)/o+d[h]}}let Path$1=class{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?append$1:appendRound$1(e)}moveTo(e,o){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+o}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,o){this._append`L${this._x1=+e},${this._y1=+o}`}quadraticCurveTo(e,o,d,h){this._append`Q${+e},${+o},${this._x1=+d},${this._y1=+h}`}bezierCurveTo(e,o,d,h,g,b){this._append`C${+e},${+o},${+d},${+h},${this._x1=+g},${this._y1=+b}`}arcTo(e,o,d,h,g){if(e=+e,o=+o,d=+d,h=+h,g=+g,g<0)throw new Error(`negative radius: ${g}`);let b=this._x1,$=this._y1,j=d-e,et=h-o,tt=b-e,nt=$-o,rt=tt*tt+nt*nt;if(this._x1===null)this._append`M${this._x1=e},${this._y1=o}`;else if(rt>epsilon$4)if(!(Math.abs(nt*j-et*tt)>epsilon$4)||!g)this._append`L${this._x1=e},${this._y1=o}`;else{let ot=d-b,st=h-$,bt=j*j+et*et,vt=ot*ot+st*st,at=Math.sqrt(bt),ut=Math.sqrt(rt),$t=g*Math.tan((pi$3-Math.acos((bt+rt-vt)/(2*at*ut)))/2),wt=$t/ut,At=$t/at;Math.abs(wt-1)>epsilon$4&&this._append`L${e+wt*tt},${o+wt*nt}`,this._append`A${g},${g},0,0,${+(nt*ot>tt*st)},${this._x1=e+At*j},${this._y1=o+At*et}`}}arc(e,o,d,h,g,b){if(e=+e,o=+o,d=+d,b=!!b,d<0)throw new Error(`negative radius: ${d}`);let $=d*Math.cos(h),j=d*Math.sin(h),et=e+$,tt=o+j,nt=1^b,rt=b?h-g:g-h;this._x1===null?this._append`M${et},${tt}`:(Math.abs(this._x1-et)>epsilon$4||Math.abs(this._y1-tt)>epsilon$4)&&this._append`L${et},${tt}`,d&&(rt<0&&(rt=rt%tau$4+tau$4),rt>tauEpsilon?this._append`A${d},${d},0,1,${nt},${e-$},${o-j}A${d},${d},0,1,${nt},${this._x1=et},${this._y1=tt}`:rt>epsilon$4&&this._append`A${d},${d},0,${+(rt>=pi$3)},${nt},${this._x1=e+d*Math.cos(g)},${this._y1=o+d*Math.sin(g)}`)}rect(e,o,d,h){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+o}h${d=+d}v${+h}h${-d}Z`}toString(){return this._}};function pathRound(i=3){return new Path$1(+i)}var array$1=Array.prototype,slice$1=array$1.slice;function ascending(i,e){return i-e}function area$2(i){for(var e=0,o=i.length,d=i[o-1][1]*i[0][0]-i[o-1][0]*i[0][1];++e<o;)d+=i[e-1][1]*i[e][0]-i[e-1][0]*i[e][1];return d}const constant$3=i=>()=>i;function contains(i,e){for(var o=-1,d=e.length,h;++o<d;)if(h=ringContains(i,e[o]))return h;return 0}function ringContains(i,e){for(var o=e[0],d=e[1],h=-1,g=0,b=i.length,$=b-1;g<b;$=g++){var j=i[g],et=j[0],tt=j[1],nt=i[$],rt=nt[0],ot=nt[1];if(segmentContains(j,nt,e))return 0;tt>d!=ot>d&&o<(rt-et)*(d-tt)/(ot-tt)+et&&(h=-h)}return h}function segmentContains(i,e,o){var d;return collinear$1(i,e,o)&&within(i[d=+(i[0]===e[0])],o[d],e[d])}function collinear$1(i,e,o){return(e[0]-i[0])*(o[1]-i[1])===(o[0]-i[0])*(e[1]-i[1])}function within(i,e,o){return i<=e&&e<=o||o<=e&&e<=i}function noop$2(){}var cases=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function contours(){var i=1,e=1,o=thresholdSturges,d=j;function h(et){var tt=o(et);if(Array.isArray(tt))tt=tt.slice().sort(ascending);else{const nt=extent$2(et,finite$2);for(tt=ticks(...nice$1(nt[0],nt[1],tt),tt);tt[tt.length-1]>=nt[1];)tt.pop();for(;tt[1]<nt[0];)tt.shift()}return tt.map(nt=>g(et,nt))}function g(et,tt){const nt=tt==null?NaN:+tt;if(isNaN(nt))throw new Error(`invalid value: ${tt}`);var rt=[],ot=[];return b(et,nt,function(st){d(st,et,nt),area$2(st)>0?rt.push([st]):ot.push(st)}),ot.forEach(function(st){for(var bt=0,vt=rt.length,at;bt<vt;++bt)if(contains((at=rt[bt])[0],st)!==-1){at.push(st);return}}),{type:"MultiPolygon",value:tt,coordinates:rt}}function b(et,tt,nt){var rt=new Array,ot=new Array,st,bt,vt,at,ut,$t;for(st=bt=-1,at=above(et[0],tt),cases[at<<1].forEach(wt);++st<i-1;)vt=at,at=above(et[st+1],tt),cases[vt|at<<1].forEach(wt);for(cases[at<<0].forEach(wt);++bt<e-1;){for(st=-1,at=above(et[bt*i+i],tt),ut=above(et[bt*i],tt),cases[at<<1|ut<<2].forEach(wt);++st<i-1;)vt=at,at=above(et[bt*i+i+st+1],tt),$t=ut,ut=above(et[bt*i+st+1],tt),cases[vt|at<<1|ut<<2|$t<<3].forEach(wt);cases[at|ut<<3].forEach(wt)}for(st=-1,ut=et[bt*i]>=tt,cases[ut<<2].forEach(wt);++st<i-1;)$t=ut,ut=above(et[bt*i+st+1],tt),cases[ut<<2|$t<<3].forEach(wt);cases[ut<<3].forEach(wt);function wt(At){var xt=[At[0][0]+st,At[0][1]+bt],Rt=[At[1][0]+st,At[1][1]+bt],Ot=$(xt),kt=$(Rt),Mt,Bt;(Mt=ot[Ot])?(Bt=rt[kt])?(delete ot[Mt.end],delete rt[Bt.start],Mt===Bt?(Mt.ring.push(Rt),nt(Mt.ring)):rt[Mt.start]=ot[Bt.end]={start:Mt.start,end:Bt.end,ring:Mt.ring.concat(Bt.ring)}):(delete ot[Mt.end],Mt.ring.push(Rt),ot[Mt.end=kt]=Mt):(Mt=rt[kt])?(Bt=ot[Ot])?(delete rt[Mt.start],delete ot[Bt.end],Mt===Bt?(Mt.ring.push(Rt),nt(Mt.ring)):rt[Bt.start]=ot[Mt.end]={start:Bt.start,end:Mt.end,ring:Bt.ring.concat(Mt.ring)}):(delete rt[Mt.start],Mt.ring.unshift(xt),rt[Mt.start=Ot]=Mt):rt[Ot]=ot[kt]={start:Ot,end:kt,ring:[xt,Rt]}}}function $(et){return et[0]*2+et[1]*(i+1)*4}function j(et,tt,nt){et.forEach(function(rt){var ot=rt[0],st=rt[1],bt=ot|0,vt=st|0,at=valid(tt[vt*i+bt]);ot>0&&ot<i&&bt===ot&&(rt[0]=smooth1(ot,valid(tt[vt*i+bt-1]),at,nt)),st>0&&st<e&&vt===st&&(rt[1]=smooth1(st,valid(tt[(vt-1)*i+bt]),at,nt))})}return h.contour=g,h.size=function(et){if(!arguments.length)return[i,e];var tt=Math.floor(et[0]),nt=Math.floor(et[1]);if(!(tt>=0&&nt>=0))throw new Error("invalid size");return i=tt,e=nt,h},h.thresholds=function(et){return arguments.length?(o=typeof et=="function"?et:Array.isArray(et)?constant$3(slice$1.call(et)):constant$3(et),h):o},h.smooth=function(et){return arguments.length?(d=et?j:noop$2,h):d===j},h}function finite$2(i){return isFinite(i)?i:NaN}function above(i,e){return i==null?!1:+i>=e}function valid(i){return i==null||isNaN(i=+i)?-1/0:i}function smooth1(i,e,o,d){const h=d-e,g=o-e,b=isFinite(h)||isFinite(g)?h/g:Math.sign(h)/Math.sign(g);return isNaN(b)?i:i+b-.5}function defaultX(i){return i[0]}function defaultY(i){return i[1]}function defaultWeight(){return 1}function contourDensity(){var i=defaultX,e=defaultY,o=defaultWeight,d=960,h=500,g=20,b=2,$=g*3,j=d+$*2>>b,et=h+$*2>>b,tt=constant$3(20);function nt(ut){var $t=new Float32Array(j*et),wt=Math.pow(2,-b),At=-1;for(const zt of ut){var xt=(i(zt,++At,ut)+$)*wt,Rt=(e(zt,At,ut)+$)*wt,Ot=+o(zt,At,ut);if(Ot&&xt>=0&&xt<j&&Rt>=0&&Rt<et){var kt=Math.floor(xt),Mt=Math.floor(Rt),Bt=xt-kt-.5,jt=Rt-Mt-.5;$t[kt+Mt*j]+=(1-Bt)*(1-jt)*Ot,$t[kt+1+Mt*j]+=Bt*(1-jt)*Ot,$t[kt+1+(Mt+1)*j]+=Bt*jt*Ot,$t[kt+(Mt+1)*j]+=(1-Bt)*jt*Ot}}return blur2({data:$t,width:j,height:et},g*wt),$t}function rt(ut){var $t=nt(ut),wt=tt($t),At=Math.pow(2,2*b);return Array.isArray(wt)||(wt=ticks(Number.MIN_VALUE,max$1($t)/At,wt)),contours().size([j,et]).thresholds(wt.map(xt=>xt*At))($t).map((xt,Rt)=>(xt.value=+wt[Rt],ot(xt)))}rt.contours=function(ut){var $t=nt(ut),wt=contours().size([j,et]),At=Math.pow(2,2*b),xt=Rt=>{Rt=+Rt;var Ot=ot(wt.contour($t,Rt*At));return Ot.value=Rt,Ot};return Object.defineProperty(xt,"max",{get:()=>max$1($t)/At}),xt};function ot(ut){return ut.coordinates.forEach(st),ut}function st(ut){ut.forEach(bt)}function bt(ut){ut.forEach(vt)}function vt(ut){ut[0]=ut[0]*Math.pow(2,b)-$,ut[1]=ut[1]*Math.pow(2,b)-$}function at(){return $=g*3,j=d+$*2>>b,et=h+$*2>>b,rt}return rt.x=function(ut){return arguments.length?(i=typeof ut=="function"?ut:constant$3(+ut),rt):i},rt.y=function(ut){return arguments.length?(e=typeof ut=="function"?ut:constant$3(+ut),rt):e},rt.weight=function(ut){return arguments.length?(o=typeof ut=="function"?ut:constant$3(+ut),rt):o},rt.size=function(ut){if(!arguments.length)return[d,h];var $t=+ut[0],wt=+ut[1];if(!($t>=0&&wt>=0))throw new Error("invalid size");return d=$t,h=wt,at()},rt.cellSize=function(ut){if(!arguments.length)return 1<<b;if(!((ut=+ut)>=1))throw new Error("invalid cell size");return b=Math.floor(Math.log(ut)/Math.LN2),at()},rt.thresholds=function(ut){return arguments.length?(tt=typeof ut=="function"?ut:Array.isArray(ut)?constant$3(slice$1.call(ut)):constant$3(ut),rt):tt},rt.bandwidth=function(ut){if(!arguments.length)return Math.sqrt(g*(g+1));if(!((ut=+ut)>=0))throw new Error("invalid bandwidth");return g=(Math.sqrt(4*ut*ut+1)-1)/2,at()},rt}const epsilon$3=11102230246251565e-32,splitter$1=134217729,resulterrbound=(3+8*epsilon$3)*epsilon$3;function sum$1(i,e,o,d,h){let g,b,$,j,et=e[0],tt=d[0],nt=0,rt=0;tt>et==tt>-et?(g=et,et=e[++nt]):(g=tt,tt=d[++rt]);let ot=0;if(nt<i&&rt<o)for(tt>et==tt>-et?(b=et+g,$=g-(b-et),et=e[++nt]):(b=tt+g,$=g-(b-tt),tt=d[++rt]),g=b,$!==0&&(h[ot++]=$);nt<i&&rt<o;)tt>et==tt>-et?(b=g+et,j=b-g,$=g-(b-j)+(et-j),et=e[++nt]):(b=g+tt,j=b-g,$=g-(b-j)+(tt-j),tt=d[++rt]),g=b,$!==0&&(h[ot++]=$);for(;nt<i;)b=g+et,j=b-g,$=g-(b-j)+(et-j),et=e[++nt],g=b,$!==0&&(h[ot++]=$);for(;rt<o;)b=g+tt,j=b-g,$=g-(b-j)+(tt-j),tt=d[++rt],g=b,$!==0&&(h[ot++]=$);return(g!==0||ot===0)&&(h[ot++]=g),ot}function estimate(i,e){let o=e[0];for(let d=1;d<i;d++)o+=e[d];return o}function vec(i){return new Float64Array(i)}const ccwerrboundA=(3+16*epsilon$3)*epsilon$3,ccwerrboundB=(2+12*epsilon$3)*epsilon$3,ccwerrboundC=(9+64*epsilon$3)*epsilon$3*epsilon$3,B=vec(4),C1=vec(8),C2=vec(12),D=vec(16),u=vec(4);function orient2dadapt(i,e,o,d,h,g,b){let $,j,et,tt,nt,rt,ot,st,bt,vt,at,ut,$t,wt,At,xt,Rt,Ot;const kt=i-h,Mt=o-h,Bt=e-g,jt=d-g;wt=kt*jt,rt=splitter$1*kt,ot=rt-(rt-kt),st=kt-ot,rt=splitter$1*jt,bt=rt-(rt-jt),vt=jt-bt,At=st*vt-(wt-ot*bt-st*bt-ot*vt),xt=Bt*Mt,rt=splitter$1*Bt,ot=rt-(rt-Bt),st=Bt-ot,rt=splitter$1*Mt,bt=rt-(rt-Mt),vt=Mt-bt,Rt=st*vt-(xt-ot*bt-st*bt-ot*vt),at=At-Rt,nt=At-at,B[0]=At-(at+nt)+(nt-Rt),ut=wt+at,nt=ut-wt,$t=wt-(ut-nt)+(at-nt),at=$t-xt,nt=$t-at,B[1]=$t-(at+nt)+(nt-xt),Ot=ut+at,nt=Ot-ut,B[2]=ut-(Ot-nt)+(at-nt),B[3]=Ot;let zt=estimate(4,B),Nt=ccwerrboundB*b;if(zt>=Nt||-zt>=Nt||(nt=i-kt,$=i-(kt+nt)+(nt-h),nt=o-Mt,et=o-(Mt+nt)+(nt-h),nt=e-Bt,j=e-(Bt+nt)+(nt-g),nt=d-jt,tt=d-(jt+nt)+(nt-g),$===0&&j===0&&et===0&&tt===0)||(Nt=ccwerrboundC*b+resulterrbound*Math.abs(zt),zt+=kt*tt+jt*$-(Bt*et+Mt*j),zt>=Nt||-zt>=Nt))return zt;wt=$*jt,rt=splitter$1*$,ot=rt-(rt-$),st=$-ot,rt=splitter$1*jt,bt=rt-(rt-jt),vt=jt-bt,At=st*vt-(wt-ot*bt-st*bt-ot*vt),xt=j*Mt,rt=splitter$1*j,ot=rt-(rt-j),st=j-ot,rt=splitter$1*Mt,bt=rt-(rt-Mt),vt=Mt-bt,Rt=st*vt-(xt-ot*bt-st*bt-ot*vt),at=At-Rt,nt=At-at,u[0]=At-(at+nt)+(nt-Rt),ut=wt+at,nt=ut-wt,$t=wt-(ut-nt)+(at-nt),at=$t-xt,nt=$t-at,u[1]=$t-(at+nt)+(nt-xt),Ot=ut+at,nt=Ot-ut,u[2]=ut-(Ot-nt)+(at-nt),u[3]=Ot;const Ct=sum$1(4,B,4,u,C1);wt=kt*tt,rt=splitter$1*kt,ot=rt-(rt-kt),st=kt-ot,rt=splitter$1*tt,bt=rt-(rt-tt),vt=tt-bt,At=st*vt-(wt-ot*bt-st*bt-ot*vt),xt=Bt*et,rt=splitter$1*Bt,ot=rt-(rt-Bt),st=Bt-ot,rt=splitter$1*et,bt=rt-(rt-et),vt=et-bt,Rt=st*vt-(xt-ot*bt-st*bt-ot*vt),at=At-Rt,nt=At-at,u[0]=At-(at+nt)+(nt-Rt),ut=wt+at,nt=ut-wt,$t=wt-(ut-nt)+(at-nt),at=$t-xt,nt=$t-at,u[1]=$t-(at+nt)+(nt-xt),Ot=ut+at,nt=Ot-ut,u[2]=ut-(Ot-nt)+(at-nt),u[3]=Ot;const Ft=sum$1(Ct,C1,4,u,C2);wt=$*tt,rt=splitter$1*$,ot=rt-(rt-$),st=$-ot,rt=splitter$1*tt,bt=rt-(rt-tt),vt=tt-bt,At=st*vt-(wt-ot*bt-st*bt-ot*vt),xt=j*et,rt=splitter$1*j,ot=rt-(rt-j),st=j-ot,rt=splitter$1*et,bt=rt-(rt-et),vt=et-bt,Rt=st*vt-(xt-ot*bt-st*bt-ot*vt),at=At-Rt,nt=At-at,u[0]=At-(at+nt)+(nt-Rt),ut=wt+at,nt=ut-wt,$t=wt-(ut-nt)+(at-nt),at=$t-xt,nt=$t-at,u[1]=$t-(at+nt)+(nt-xt),Ot=ut+at,nt=Ot-ut,u[2]=ut-(Ot-nt)+(at-nt),u[3]=Ot;const Vt=sum$1(Ft,C2,4,u,D);return D[Vt-1]}function orient2d(i,e,o,d,h,g){const b=(e-g)*(o-h),$=(i-h)*(d-g),j=b-$,et=Math.abs(b+$);return Math.abs(j)>=ccwerrboundA*et?j:-orient2dadapt(i,e,o,d,h,g,et)}const EPSILON=Math.pow(2,-52),EDGE_STACK=new Uint32Array(512);class Delaunator{static from(e,o=defaultGetX,d=defaultGetY){const h=e.length,g=new Float64Array(h*2);for(let b=0;b<h;b++){const $=e[b];g[2*b]=o($),g[2*b+1]=d($)}return new Delaunator(g)}constructor(e){const o=e.length>>1;if(o>0&&typeof e[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=e;const d=Math.max(2*o-5,0);this._triangles=new Uint32Array(d*3),this._halfedges=new Int32Array(d*3),this._hashSize=Math.ceil(Math.sqrt(o)),this._hullPrev=new Uint32Array(o),this._hullNext=new Uint32Array(o),this._hullTri=new Uint32Array(o),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(o),this._dists=new Float64Array(o),this.update()}update(){const{coords:e,_hullPrev:o,_hullNext:d,_hullTri:h,_hullHash:g}=this,b=e.length>>1;let $=1/0,j=1/0,et=-1/0,tt=-1/0;for(let Mt=0;Mt<b;Mt++){const Bt=e[2*Mt],jt=e[2*Mt+1];Bt<$&&($=Bt),jt<j&&(j=jt),Bt>et&&(et=Bt),jt>tt&&(tt=jt),this._ids[Mt]=Mt}const nt=($+et)/2,rt=(j+tt)/2;let ot=1/0,st,bt,vt;for(let Mt=0;Mt<b;Mt++){const Bt=dist(nt,rt,e[2*Mt],e[2*Mt+1]);Bt<ot&&(st=Mt,ot=Bt)}const at=e[2*st],ut=e[2*st+1];ot=1/0;for(let Mt=0;Mt<b;Mt++){if(Mt===st)continue;const Bt=dist(at,ut,e[2*Mt],e[2*Mt+1]);Bt<ot&&Bt>0&&(bt=Mt,ot=Bt)}let $t=e[2*bt],wt=e[2*bt+1],At=1/0;for(let Mt=0;Mt<b;Mt++){if(Mt===st||Mt===bt)continue;const Bt=circumradius(at,ut,$t,wt,e[2*Mt],e[2*Mt+1]);Bt<At&&(vt=Mt,At=Bt)}let xt=e[2*vt],Rt=e[2*vt+1];if(At===1/0){for(let jt=0;jt<b;jt++)this._dists[jt]=e[2*jt]-e[0]||e[2*jt+1]-e[1];quicksort(this._ids,this._dists,0,b-1);const Mt=new Uint32Array(b);let Bt=0;for(let jt=0,zt=-1/0;jt<b;jt++){const Nt=this._ids[jt];this._dists[Nt]>zt&&(Mt[Bt++]=Nt,zt=this._dists[Nt])}this.hull=Mt.subarray(0,Bt),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(orient2d(at,ut,$t,wt,xt,Rt)<0){const Mt=bt,Bt=$t,jt=wt;bt=vt,$t=xt,wt=Rt,vt=Mt,xt=Bt,Rt=jt}const Ot=circumcenter(at,ut,$t,wt,xt,Rt);this._cx=Ot.x,this._cy=Ot.y;for(let Mt=0;Mt<b;Mt++)this._dists[Mt]=dist(e[2*Mt],e[2*Mt+1],Ot.x,Ot.y);quicksort(this._ids,this._dists,0,b-1),this._hullStart=st;let kt=3;d[st]=o[vt]=bt,d[bt]=o[st]=vt,d[vt]=o[bt]=st,h[st]=0,h[bt]=1,h[vt]=2,g.fill(-1),g[this._hashKey(at,ut)]=st,g[this._hashKey($t,wt)]=bt,g[this._hashKey(xt,Rt)]=vt,this.trianglesLen=0,this._addTriangle(st,bt,vt,-1,-1,-1);for(let Mt=0,Bt,jt;Mt<this._ids.length;Mt++){const zt=this._ids[Mt],Nt=e[2*zt],Ct=e[2*zt+1];if(Mt>0&&Math.abs(Nt-Bt)<=EPSILON&&Math.abs(Ct-jt)<=EPSILON||(Bt=Nt,jt=Ct,zt===st||zt===bt||zt===vt))continue;let Ft=0;for(let Yt=0,Xt=this._hashKey(Nt,Ct);Yt<this._hashSize&&(Ft=g[(Xt+Yt)%this._hashSize],!(Ft!==-1&&Ft!==d[Ft]));Yt++);Ft=o[Ft];let Vt=Ft,Ut;for(;Ut=d[Vt],orient2d(Nt,Ct,e[2*Vt],e[2*Vt+1],e[2*Ut],e[2*Ut+1])>=0;)if(Vt=Ut,Vt===Ft){Vt=-1;break}if(Vt===-1)continue;let Ht=this._addTriangle(Vt,zt,d[Vt],-1,-1,h[Vt]);h[zt]=this._legalize(Ht+2),h[Vt]=Ht,kt++;let Pt=d[Vt];for(;Ut=d[Pt],orient2d(Nt,Ct,e[2*Pt],e[2*Pt+1],e[2*Ut],e[2*Ut+1])<0;)Ht=this._addTriangle(Pt,zt,Ut,h[zt],-1,h[Pt]),h[zt]=this._legalize(Ht+2),d[Pt]=Pt,kt--,Pt=Ut;if(Vt===Ft)for(;Ut=o[Vt],orient2d(Nt,Ct,e[2*Ut],e[2*Ut+1],e[2*Vt],e[2*Vt+1])<0;)Ht=this._addTriangle(Ut,zt,Vt,-1,h[Vt],h[Ut]),this._legalize(Ht+2),h[Ut]=Ht,d[Vt]=Vt,kt--,Vt=Ut;this._hullStart=o[zt]=Vt,d[Vt]=o[Pt]=zt,d[zt]=Pt,g[this._hashKey(Nt,Ct)]=zt,g[this._hashKey(e[2*Vt],e[2*Vt+1])]=Vt}this.hull=new Uint32Array(kt);for(let Mt=0,Bt=this._hullStart;Mt<kt;Mt++)this.hull[Mt]=Bt,Bt=d[Bt];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(e,o){return Math.floor(pseudoAngle(e-this._cx,o-this._cy)*this._hashSize)%this._hashSize}_legalize(e){const{_triangles:o,_halfedges:d,coords:h}=this;let g=0,b=0;for(;;){const $=d[e],j=e-e%3;if(b=j+(e+2)%3,$===-1){if(g===0)break;e=EDGE_STACK[--g];continue}const et=$-$%3,tt=j+(e+1)%3,nt=et+($+2)%3,rt=o[b],ot=o[e],st=o[tt],bt=o[nt];if(inCircle(h[2*rt],h[2*rt+1],h[2*ot],h[2*ot+1],h[2*st],h[2*st+1],h[2*bt],h[2*bt+1])){o[e]=bt,o[$]=rt;const at=d[nt];if(at===-1){let $t=this._hullStart;do{if(this._hullTri[$t]===nt){this._hullTri[$t]=e;break}$t=this._hullPrev[$t]}while($t!==this._hullStart)}this._link(e,at),this._link($,d[b]),this._link(b,nt);const ut=et+($+1)%3;g<EDGE_STACK.length&&(EDGE_STACK[g++]=ut)}else{if(g===0)break;e=EDGE_STACK[--g]}}return b}_link(e,o){this._halfedges[e]=o,o!==-1&&(this._halfedges[o]=e)}_addTriangle(e,o,d,h,g,b){const $=this.trianglesLen;return this._triangles[$]=e,this._triangles[$+1]=o,this._triangles[$+2]=d,this._link($,h),this._link($+1,g),this._link($+2,b),this.trianglesLen+=3,$}}function pseudoAngle(i,e){const o=i/(Math.abs(i)+Math.abs(e));return(e>0?3-o:1+o)/4}function dist(i,e,o,d){const h=i-o,g=e-d;return h*h+g*g}function inCircle(i,e,o,d,h,g,b,$){const j=i-b,et=e-$,tt=o-b,nt=d-$,rt=h-b,ot=g-$,st=j*j+et*et,bt=tt*tt+nt*nt,vt=rt*rt+ot*ot;return j*(nt*vt-bt*ot)-et*(tt*vt-bt*rt)+st*(tt*ot-nt*rt)<0}function circumradius(i,e,o,d,h,g){const b=o-i,$=d-e,j=h-i,et=g-e,tt=b*b+$*$,nt=j*j+et*et,rt=.5/(b*et-$*j),ot=(et*tt-$*nt)*rt,st=(b*nt-j*tt)*rt;return ot*ot+st*st}function circumcenter(i,e,o,d,h,g){const b=o-i,$=d-e,j=h-i,et=g-e,tt=b*b+$*$,nt=j*j+et*et,rt=.5/(b*et-$*j),ot=i+(et*tt-$*nt)*rt,st=e+(b*nt-j*tt)*rt;return{x:ot,y:st}}function quicksort(i,e,o,d){if(d-o<=20)for(let h=o+1;h<=d;h++){const g=i[h],b=e[g];let $=h-1;for(;$>=o&&e[i[$]]>b;)i[$+1]=i[$--];i[$+1]=g}else{const h=o+d>>1;let g=o+1,b=d;swap(i,h,g),e[i[o]]>e[i[d]]&&swap(i,o,d),e[i[g]]>e[i[d]]&&swap(i,g,d),e[i[o]]>e[i[g]]&&swap(i,o,g);const $=i[g],j=e[$];for(;;){do g++;while(e[i[g]]<j);do b--;while(e[i[b]]>j);if(b<g)break;swap(i,g,b)}i[o+1]=i[b],i[b]=$,d-g+1>=b-o?(quicksort(i,e,g,d),quicksort(i,e,o,b-1)):(quicksort(i,e,o,b-1),quicksort(i,e,g,d))}}function swap(i,e,o){const d=i[e];i[e]=i[o],i[o]=d}function defaultGetX(i){return i[0]}function defaultGetY(i){return i[1]}const epsilon$2=1e-6;class Path{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(e,o){this._+=`M${this._x0=this._x1=+e},${this._y0=this._y1=+o}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(e,o){this._+=`L${this._x1=+e},${this._y1=+o}`}arc(e,o,d){e=+e,o=+o,d=+d;const h=e+d,g=o;if(d<0)throw new Error("negative radius");this._x1===null?this._+=`M${h},${g}`:(Math.abs(this._x1-h)>epsilon$2||Math.abs(this._y1-g)>epsilon$2)&&(this._+="L"+h+","+g),d&&(this._+=`A${d},${d},0,1,1,${e-d},${o}A${d},${d},0,1,1,${this._x1=h},${this._y1=g}`)}rect(e,o,d,h){this._+=`M${this._x0=this._x1=+e},${this._y0=this._y1=+o}h${+d}v${+h}h${-d}Z`}value(){return this._||null}}class Polygon{constructor(){this._=[]}moveTo(e,o){this._.push([e,o])}closePath(){this._.push(this._[0].slice())}lineTo(e,o){this._.push([e,o])}value(){return this._.length?this._:null}}let Voronoi$1=class{constructor(e,[o,d,h,g]=[0,0,960,500]){if(!((h=+h)>=(o=+o))||!((g=+g)>=(d=+d)))throw new Error("invalid bounds");this.delaunay=e,this._circumcenters=new Float64Array(e.points.length*2),this.vectors=new Float64Array(e.points.length*2),this.xmax=h,this.xmin=o,this.ymax=g,this.ymin=d,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:e,hull:o,triangles:d},vectors:h}=this;let g,b;const $=this.circumcenters=this._circumcenters.subarray(0,d.length/3*2);for(let bt=0,vt=0,at=d.length,ut,$t;bt<at;bt+=3,vt+=2){const wt=d[bt]*2,At=d[bt+1]*2,xt=d[bt+2]*2,Rt=e[wt],Ot=e[wt+1],kt=e[At],Mt=e[At+1],Bt=e[xt],jt=e[xt+1],zt=kt-Rt,Nt=Mt-Ot,Ct=Bt-Rt,Ft=jt-Ot,Vt=(zt*Ft-Nt*Ct)*2;if(Math.abs(Vt)<1e-9){if(g===void 0){g=b=0;for(const Ht of o)g+=e[Ht*2],b+=e[Ht*2+1];g/=o.length,b/=o.length}const Ut=1e9*Math.sign((g-Rt)*Ft-(b-Ot)*Ct);ut=(Rt+Bt)/2-Ut*Ft,$t=(Ot+jt)/2+Ut*Ct}else{const Ut=1/Vt,Ht=zt*zt+Nt*Nt,Pt=Ct*Ct+Ft*Ft;ut=Rt+(Ft*Ht-Nt*Pt)*Ut,$t=Ot+(zt*Pt-Ct*Ht)*Ut}$[vt]=ut,$[vt+1]=$t}let j=o[o.length-1],et,tt=j*4,nt,rt=e[2*j],ot,st=e[2*j+1];h.fill(0);for(let bt=0;bt<o.length;++bt)j=o[bt],et=tt,nt=rt,ot=st,tt=j*4,rt=e[2*j],st=e[2*j+1],h[et+2]=h[tt]=ot-st,h[et+3]=h[tt+1]=rt-nt}render(e){const o=e==null?e=new Path:void 0,{delaunay:{halfedges:d,inedges:h,hull:g},circumcenters:b,vectors:$}=this;if(g.length<=1)return null;for(let tt=0,nt=d.length;tt<nt;++tt){const rt=d[tt];if(rt<tt)continue;const ot=Math.floor(tt/3)*2,st=Math.floor(rt/3)*2,bt=b[ot],vt=b[ot+1],at=b[st],ut=b[st+1];this._renderSegment(bt,vt,at,ut,e)}let j,et=g[g.length-1];for(let tt=0;tt<g.length;++tt){j=et,et=g[tt];const nt=Math.floor(h[et]/3)*2,rt=b[nt],ot=b[nt+1],st=j*4,bt=this._project(rt,ot,$[st+2],$[st+3]);bt&&this._renderSegment(rt,ot,bt[0],bt[1],e)}return o&&o.value()}renderBounds(e){const o=e==null?e=new Path:void 0;return e.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),o&&o.value()}renderCell(e,o){const d=o==null?o=new Path:void 0,h=this._clip(e);if(h===null||!h.length)return;o.moveTo(h[0],h[1]);let g=h.length;for(;h[0]===h[g-2]&&h[1]===h[g-1]&&g>1;)g-=2;for(let b=2;b<g;b+=2)(h[b]!==h[b-2]||h[b+1]!==h[b-1])&&o.lineTo(h[b],h[b+1]);return o.closePath(),d&&d.value()}*cellPolygons(){const{delaunay:{points:e}}=this;for(let o=0,d=e.length/2;o<d;++o){const h=this.cellPolygon(o);h&&(h.index=o,yield h)}}cellPolygon(e){const o=new Polygon;return this.renderCell(e,o),o.value()}_renderSegment(e,o,d,h,g){let b;const $=this._regioncode(e,o),j=this._regioncode(d,h);$===0&&j===0?(g.moveTo(e,o),g.lineTo(d,h)):(b=this._clipSegment(e,o,d,h,$,j))&&(g.moveTo(b[0],b[1]),g.lineTo(b[2],b[3]))}contains(e,o,d){return o=+o,o!==o||(d=+d,d!==d)?!1:this.delaunay._step(e,o,d)===e}*neighbors(e){const o=this._clip(e);if(o)for(const d of this.delaunay.neighbors(e)){const h=this._clip(d);if(h){e:for(let g=0,b=o.length;g<b;g+=2)for(let $=0,j=h.length;$<j;$+=2)if(o[g]===h[$]&&o[g+1]===h[$+1]&&o[(g+2)%b]===h[($+j-2)%j]&&o[(g+3)%b]===h[($+j-1)%j]){yield d;break e}}}}_cell(e){const{circumcenters:o,delaunay:{inedges:d,halfedges:h,triangles:g}}=this,b=d[e];if(b===-1)return null;const $=[];let j=b;do{const et=Math.floor(j/3);if($.push(o[et*2],o[et*2+1]),j=j%3===2?j-2:j+1,g[j]!==e)break;j=h[j]}while(j!==b&&j!==-1);return $}_clip(e){if(e===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const o=this._cell(e);if(o===null)return null;const{vectors:d}=this,h=e*4;return this._simplify(d[h]||d[h+1]?this._clipInfinite(e,o,d[h],d[h+1],d[h+2],d[h+3]):this._clipFinite(e,o))}_clipFinite(e,o){const d=o.length;let h=null,g,b,$=o[d-2],j=o[d-1],et,tt=this._regioncode($,j),nt,rt=0;for(let ot=0;ot<d;ot+=2)if(g=$,b=j,$=o[ot],j=o[ot+1],et=tt,tt=this._regioncode($,j),et===0&&tt===0)nt=rt,rt=0,h?h.push($,j):h=[$,j];else{let st,bt,vt,at,ut;if(et===0){if((st=this._clipSegment(g,b,$,j,et,tt))===null)continue;[bt,vt,at,ut]=st}else{if((st=this._clipSegment($,j,g,b,tt,et))===null)continue;[at,ut,bt,vt]=st,nt=rt,rt=this._edgecode(bt,vt),nt&&rt&&this._edge(e,nt,rt,h,h.length),h?h.push(bt,vt):h=[bt,vt]}nt=rt,rt=this._edgecode(at,ut),nt&&rt&&this._edge(e,nt,rt,h,h.length),h?h.push(at,ut):h=[at,ut]}if(h)nt=rt,rt=this._edgecode(h[0],h[1]),nt&&rt&&this._edge(e,nt,rt,h,h.length);else if(this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return h}_clipSegment(e,o,d,h,g,b){const $=g<b;for($&&([e,o,d,h,g,b]=[d,h,e,o,b,g]);;){if(g===0&&b===0)return $?[d,h,e,o]:[e,o,d,h];if(g&b)return null;let j,et,tt=g||b;tt&8?(j=e+(d-e)*(this.ymax-o)/(h-o),et=this.ymax):tt&4?(j=e+(d-e)*(this.ymin-o)/(h-o),et=this.ymin):tt&2?(et=o+(h-o)*(this.xmax-e)/(d-e),j=this.xmax):(et=o+(h-o)*(this.xmin-e)/(d-e),j=this.xmin),g?(e=j,o=et,g=this._regioncode(e,o)):(d=j,h=et,b=this._regioncode(d,h))}}_clipInfinite(e,o,d,h,g,b){let $=Array.from(o),j;if((j=this._project($[0],$[1],d,h))&&$.unshift(j[0],j[1]),(j=this._project($[$.length-2],$[$.length-1],g,b))&&$.push(j[0],j[1]),$=this._clipFinite(e,$))for(let et=0,tt=$.length,nt,rt=this._edgecode($[tt-2],$[tt-1]);et<tt;et+=2)nt=rt,rt=this._edgecode($[et],$[et+1]),nt&&rt&&(et=this._edge(e,nt,rt,$,et),tt=$.length);else this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&($=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return $}_edge(e,o,d,h,g){for(;o!==d;){let b,$;switch(o){case 5:o=4;continue;case 4:o=6,b=this.xmax,$=this.ymin;break;case 6:o=2;continue;case 2:o=10,b=this.xmax,$=this.ymax;break;case 10:o=8;continue;case 8:o=9,b=this.xmin,$=this.ymax;break;case 9:o=1;continue;case 1:o=5,b=this.xmin,$=this.ymin;break}(h[g]!==b||h[g+1]!==$)&&this.contains(e,b,$)&&(h.splice(g,0,b,$),g+=2)}return g}_project(e,o,d,h){let g=1/0,b,$,j;if(h<0){if(o<=this.ymin)return null;(b=(this.ymin-o)/h)<g&&(j=this.ymin,$=e+(g=b)*d)}else if(h>0){if(o>=this.ymax)return null;(b=(this.ymax-o)/h)<g&&(j=this.ymax,$=e+(g=b)*d)}if(d>0){if(e>=this.xmax)return null;(b=(this.xmax-e)/d)<g&&($=this.xmax,j=o+(g=b)*h)}else if(d<0){if(e<=this.xmin)return null;(b=(this.xmin-e)/d)<g&&($=this.xmin,j=o+(g=b)*h)}return[$,j]}_edgecode(e,o){return(e===this.xmin?1:e===this.xmax?2:0)|(o===this.ymin?4:o===this.ymax?8:0)}_regioncode(e,o){return(e<this.xmin?1:e>this.xmax?2:0)|(o<this.ymin?4:o>this.ymax?8:0)}_simplify(e){if(e&&e.length>4){for(let o=0;o<e.length;o+=2){const d=(o+2)%e.length,h=(o+4)%e.length;(e[o]===e[d]&&e[d]===e[h]||e[o+1]===e[d+1]&&e[d+1]===e[h+1])&&(e.splice(d,2),o-=2)}e.length||(e=null)}return e}};const tau$3=2*Math.PI,pow$2=Math.pow;function pointX(i){return i[0]}function pointY(i){return i[1]}function collinear(i){const{triangles:e,coords:o}=i;for(let d=0;d<e.length;d+=3){const h=2*e[d],g=2*e[d+1],b=2*e[d+2];if((o[b]-o[h])*(o[g+1]-o[h+1])-(o[g]-o[h])*(o[b+1]-o[h+1])>1e-10)return!1}return!0}function jitter(i,e,o){return[i+Math.sin(i+e)*o,e+Math.cos(i-e)*o]}class Delaunay{static from(e,o=pointX,d=pointY,h){return new Delaunay("length"in e?flatArray(e,o,d,h):Float64Array.from(flatIterable(e,o,d,h)))}constructor(e){this._delaunator=new Delaunator(e),this.inedges=new Int32Array(e.length/2),this._hullIndex=new Int32Array(e.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const e=this._delaunator,o=this.points;if(e.hull&&e.hull.length>2&&collinear(e)){this.collinear=Int32Array.from({length:o.length/2},(rt,ot)=>ot).sort((rt,ot)=>o[2*rt]-o[2*ot]||o[2*rt+1]-o[2*ot+1]);const j=this.collinear[0],et=this.collinear[this.collinear.length-1],tt=[o[2*j],o[2*j+1],o[2*et],o[2*et+1]],nt=1e-8*Math.hypot(tt[3]-tt[1],tt[2]-tt[0]);for(let rt=0,ot=o.length/2;rt<ot;++rt){const st=jitter(o[2*rt],o[2*rt+1],nt);o[2*rt]=st[0],o[2*rt+1]=st[1]}this._delaunator=new Delaunator(o)}else delete this.collinear;const d=this.halfedges=this._delaunator.halfedges,h=this.hull=this._delaunator.hull,g=this.triangles=this._delaunator.triangles,b=this.inedges.fill(-1),$=this._hullIndex.fill(-1);for(let j=0,et=d.length;j<et;++j){const tt=g[j%3===2?j-2:j+1];(d[j]===-1||b[tt]===-1)&&(b[tt]=j)}for(let j=0,et=h.length;j<et;++j)$[h[j]]=j;h.length<=2&&h.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=h[0],b[h[0]]=1,h.length===2&&(b[h[1]]=0,this.triangles[1]=h[1],this.triangles[2]=h[1]))}voronoi(e){return new Voronoi$1(this,e)}*neighbors(e){const{inedges:o,hull:d,_hullIndex:h,halfedges:g,triangles:b,collinear:$}=this;if($){const nt=$.indexOf(e);nt>0&&(yield $[nt-1]),nt<$.length-1&&(yield $[nt+1]);return}const j=o[e];if(j===-1)return;let et=j,tt=-1;do{if(yield tt=b[et],et=et%3===2?et-2:et+1,b[et]!==e)return;if(et=g[et],et===-1){const nt=d[(h[e]+1)%d.length];nt!==tt&&(yield nt);return}}while(et!==j)}find(e,o,d=0){if(e=+e,e!==e||(o=+o,o!==o))return-1;const h=d;let g;for(;(g=this._step(d,e,o))>=0&&g!==d&&g!==h;)d=g;return g}_step(e,o,d){const{inedges:h,hull:g,_hullIndex:b,halfedges:$,triangles:j,points:et}=this;if(h[e]===-1||!et.length)return(e+1)%(et.length>>1);let tt=e,nt=pow$2(o-et[e*2],2)+pow$2(d-et[e*2+1],2);const rt=h[e];let ot=rt;do{let st=j[ot];const bt=pow$2(o-et[st*2],2)+pow$2(d-et[st*2+1],2);if(bt<nt&&(nt=bt,tt=st),ot=ot%3===2?ot-2:ot+1,j[ot]!==e)break;if(ot=$[ot],ot===-1){if(ot=g[(b[e]+1)%g.length],ot!==st&&pow$2(o-et[ot*2],2)+pow$2(d-et[ot*2+1],2)<nt)return ot;break}}while(ot!==rt);return tt}render(e){const o=e==null?e=new Path:void 0,{points:d,halfedges:h,triangles:g}=this;for(let b=0,$=h.length;b<$;++b){const j=h[b];if(j<b)continue;const et=g[b]*2,tt=g[j]*2;e.moveTo(d[et],d[et+1]),e.lineTo(d[tt],d[tt+1])}return this.renderHull(e),o&&o.value()}renderPoints(e,o){o===void 0&&(!e||typeof e.moveTo!="function")&&(o=e,e=null),o=o==null?2:+o;const d=e==null?e=new Path:void 0,{points:h}=this;for(let g=0,b=h.length;g<b;g+=2){const $=h[g],j=h[g+1];e.moveTo($+o,j),e.arc($,j,o,0,tau$3)}return d&&d.value()}renderHull(e){const o=e==null?e=new Path:void 0,{hull:d,points:h}=this,g=d[0]*2,b=d.length;e.moveTo(h[g],h[g+1]);for(let $=1;$<b;++$){const j=2*d[$];e.lineTo(h[j],h[j+1])}return e.closePath(),o&&o.value()}hullPolygon(){const e=new Polygon;return this.renderHull(e),e.value()}renderTriangle(e,o){const d=o==null?o=new Path:void 0,{points:h,triangles:g}=this,b=g[e*=3]*2,$=g[e+1]*2,j=g[e+2]*2;return o.moveTo(h[b],h[b+1]),o.lineTo(h[$],h[$+1]),o.lineTo(h[j],h[j+1]),o.closePath(),d&&d.value()}*trianglePolygons(){const{triangles:e}=this;for(let o=0,d=e.length/3;o<d;++o)yield this.trianglePolygon(o)}trianglePolygon(e){const o=new Polygon;return this.renderTriangle(e,o),o.value()}}function flatArray(i,e,o,d){const h=i.length,g=new Float64Array(h*2);for(let b=0;b<h;++b){const $=i[b];g[b*2]=e.call(d,$,b,i),g[b*2+1]=o.call(d,$,b,i)}return g}function*flatIterable(i,e,o,d){let h=0;for(const g of i)yield e.call(d,g,h,i),yield o.call(d,g,h,i),++h}function formatDecimal(i){return Math.abs(i=Math.round(i))>=1e21?i.toLocaleString("en").replace(/,/g,""):i.toString(10)}function formatDecimalParts(i,e){if((o=(i=e?i.toExponential(e-1):i.toExponential()).indexOf("e"))<0)return null;var o,d=i.slice(0,o);return[d.length>1?d[0]+d.slice(2):d,+i.slice(o+1)]}function exponent(i){return i=formatDecimalParts(Math.abs(i)),i?i[1]:NaN}function formatGroup(i,e){return function(o,d){for(var h=o.length,g=[],b=0,$=i[0],j=0;h>0&&$>0&&(j+$+1>d&&($=Math.max(1,d-j)),g.push(o.substring(h-=$,h+$)),!((j+=$+1)>d));)$=i[b=(b+1)%i.length];return g.reverse().join(e)}}function formatNumerals(i){return function(e){return e.replace(/[0-9]/g,function(o){return i[+o]})}}var re$1=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function formatSpecifier(i){if(!(e=re$1.exec(i)))throw new Error("invalid format: "+i);var e;return new FormatSpecifier({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}formatSpecifier.prototype=FormatSpecifier.prototype;function FormatSpecifier(i){this.fill=i.fill===void 0?" ":i.fill+"",this.align=i.align===void 0?">":i.align+"",this.sign=i.sign===void 0?"-":i.sign+"",this.symbol=i.symbol===void 0?"":i.symbol+"",this.zero=!!i.zero,this.width=i.width===void 0?void 0:+i.width,this.comma=!!i.comma,this.precision=i.precision===void 0?void 0:+i.precision,this.trim=!!i.trim,this.type=i.type===void 0?"":i.type+""}FormatSpecifier.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function formatTrim(i){e:for(var e=i.length,o=1,d=-1,h;o<e;++o)switch(i[o]){case".":d=h=o;break;case"0":d===0&&(d=o),h=o;break;default:if(!+i[o])break e;d>0&&(d=0);break}return d>0?i.slice(0,d)+i.slice(h+1):i}var prefixExponent;function formatPrefixAuto(i,e){var o=formatDecimalParts(i,e);if(!o)return i+"";var d=o[0],h=o[1],g=h-(prefixExponent=Math.max(-8,Math.min(8,Math.floor(h/3)))*3)+1,b=d.length;return g===b?d:g>b?d+new Array(g-b+1).join("0"):g>0?d.slice(0,g)+"."+d.slice(g):"0."+new Array(1-g).join("0")+formatDecimalParts(i,Math.max(0,e+g-1))[0]}function formatRounded(i,e){var o=formatDecimalParts(i,e);if(!o)return i+"";var d=o[0],h=o[1];return h<0?"0."+new Array(-h).join("0")+d:d.length>h+1?d.slice(0,h+1)+"."+d.slice(h+1):d+new Array(h-d.length+2).join("0")}const formatTypes={"%":(i,e)=>(i*100).toFixed(e),b:i=>Math.round(i).toString(2),c:i=>i+"",d:formatDecimal,e:(i,e)=>i.toExponential(e),f:(i,e)=>i.toFixed(e),g:(i,e)=>i.toPrecision(e),o:i=>Math.round(i).toString(8),p:(i,e)=>formatRounded(i*100,e),r:formatRounded,s:formatPrefixAuto,X:i=>Math.round(i).toString(16).toUpperCase(),x:i=>Math.round(i).toString(16)};function identity$6(i){return i}var map$2=Array.prototype.map,prefixes=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function formatLocale$1(i){var e=i.grouping===void 0||i.thousands===void 0?identity$6:formatGroup(map$2.call(i.grouping,Number),i.thousands+""),o=i.currency===void 0?"":i.currency[0]+"",d=i.currency===void 0?"":i.currency[1]+"",h=i.decimal===void 0?".":i.decimal+"",g=i.numerals===void 0?identity$6:formatNumerals(map$2.call(i.numerals,String)),b=i.percent===void 0?"%":i.percent+"",$=i.minus===void 0?"−":i.minus+"",j=i.nan===void 0?"NaN":i.nan+"";function et(nt){nt=formatSpecifier(nt);var rt=nt.fill,ot=nt.align,st=nt.sign,bt=nt.symbol,vt=nt.zero,at=nt.width,ut=nt.comma,$t=nt.precision,wt=nt.trim,At=nt.type;At==="n"?(ut=!0,At="g"):formatTypes[At]||($t===void 0&&($t=12),wt=!0,At="g"),(vt||rt==="0"&&ot==="=")&&(vt=!0,rt="0",ot="=");var xt=bt==="$"?o:bt==="#"&&/[boxX]/.test(At)?"0"+At.toLowerCase():"",Rt=bt==="$"?d:/[%p]/.test(At)?b:"",Ot=formatTypes[At],kt=/[defgprs%]/.test(At);$t=$t===void 0?6:/[gprs]/.test(At)?Math.max(1,Math.min(21,$t)):Math.max(0,Math.min(20,$t));function Mt(Bt){var jt=xt,zt=Rt,Nt,Ct,Ft;if(At==="c")zt=Ot(Bt)+zt,Bt="";else{Bt=+Bt;var Vt=Bt<0||1/Bt<0;if(Bt=isNaN(Bt)?j:Ot(Math.abs(Bt),$t),wt&&(Bt=formatTrim(Bt)),Vt&&+Bt==0&&st!=="+"&&(Vt=!1),jt=(Vt?st==="("?st:$:st==="-"||st==="("?"":st)+jt,zt=(At==="s"?prefixes[8+prefixExponent/3]:"")+zt+(Vt&&st==="("?")":""),kt){for(Nt=-1,Ct=Bt.length;++Nt<Ct;)if(Ft=Bt.charCodeAt(Nt),48>Ft||Ft>57){zt=(Ft===46?h+Bt.slice(Nt+1):Bt.slice(Nt))+zt,Bt=Bt.slice(0,Nt);break}}}ut&&!vt&&(Bt=e(Bt,1/0));var Ut=jt.length+Bt.length+zt.length,Ht=Ut<at?new Array(at-Ut+1).join(rt):"";switch(ut&&vt&&(Bt=e(Ht+Bt,Ht.length?at-zt.length:1/0),Ht=""),ot){case"<":Bt=jt+Bt+zt+Ht;break;case"=":Bt=jt+Ht+Bt+zt;break;case"^":Bt=Ht.slice(0,Ut=Ht.length>>1)+jt+Bt+zt+Ht.slice(Ut);break;default:Bt=Ht+jt+Bt+zt;break}return g(Bt)}return Mt.toString=function(){return nt+""},Mt}function tt(nt,rt){var ot=et((nt=formatSpecifier(nt),nt.type="f",nt)),st=Math.max(-8,Math.min(8,Math.floor(exponent(rt)/3)))*3,bt=Math.pow(10,-st),vt=prefixes[8+st/3];return function(at){return ot(bt*at)+vt}}return{format:et,formatPrefix:tt}}var locale$1,format,formatPrefix;defaultLocale$1({thousands:",",grouping:[3],currency:["$",""]});function defaultLocale$1(i){return locale$1=formatLocale$1(i),format=locale$1.format,formatPrefix=locale$1.formatPrefix,locale$1}function precisionFixed(i){return Math.max(0,-exponent(Math.abs(i)))}function precisionPrefix(i,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(exponent(e)/3)))*3-exponent(Math.abs(i)))}function precisionRound(i,e){return i=Math.abs(i),e=Math.abs(e)-i,Math.max(0,exponent(e)-exponent(i))+1}var epsilon$1=1e-6,epsilon2=1e-12,pi$2=Math.PI,halfPi=pi$2/2,quarterPi=pi$2/4,tau$2=pi$2*2,degrees=180/pi$2,radians$1=pi$2/180,abs=Math.abs,atan=Math.atan,atan2=Math.atan2,cos$1=Math.cos,ceil=Math.ceil,exp=Math.exp,hypot=Math.hypot,log$1=Math.log,pow$1=Math.pow,sin$1=Math.sin,sign$1=Math.sign||function(i){return i>0?1:i<0?-1:0},sqrt$1=Math.sqrt,tan=Math.tan;function acos(i){return i>1?0:i<-1?pi$2:Math.acos(i)}function asin(i){return i>1?halfPi:i<-1?-halfPi:Math.asin(i)}function noop$1(){}function streamGeometry(i,e){i&&streamGeometryType.hasOwnProperty(i.type)&&streamGeometryType[i.type](i,e)}var streamObjectType={Feature:function(i,e){streamGeometry(i.geometry,e)},FeatureCollection:function(i,e){for(var o=i.features,d=-1,h=o.length;++d<h;)streamGeometry(o[d].geometry,e)}},streamGeometryType={Sphere:function(i,e){e.sphere()},Point:function(i,e){i=i.coordinates,e.point(i[0],i[1],i[2])},MultiPoint:function(i,e){for(var o=i.coordinates,d=-1,h=o.length;++d<h;)i=o[d],e.point(i[0],i[1],i[2])},LineString:function(i,e){streamLine(i.coordinates,e,0)},MultiLineString:function(i,e){for(var o=i.coordinates,d=-1,h=o.length;++d<h;)streamLine(o[d],e,0)},Polygon:function(i,e){streamPolygon(i.coordinates,e)},MultiPolygon:function(i,e){for(var o=i.coordinates,d=-1,h=o.length;++d<h;)streamPolygon(o[d],e)},GeometryCollection:function(i,e){for(var o=i.geometries,d=-1,h=o.length;++d<h;)streamGeometry(o[d],e)}};function streamLine(i,e,o){var d=-1,h=i.length-o,g;for(e.lineStart();++d<h;)g=i[d],e.point(g[0],g[1],g[2]);e.lineEnd()}function streamPolygon(i,e){var o=-1,d=i.length;for(e.polygonStart();++o<d;)streamLine(i[o],e,1);e.polygonEnd()}function geoStream(i,e){i&&streamObjectType.hasOwnProperty(i.type)?streamObjectType[i.type](i,e):streamGeometry(i,e)}function spherical(i){return[atan2(i[1],i[0]),asin(i[2])]}function cartesian(i){var e=i[0],o=i[1],d=cos$1(o);return[d*cos$1(e),d*sin$1(e),sin$1(o)]}function cartesianDot(i,e){return i[0]*e[0]+i[1]*e[1]+i[2]*e[2]}function cartesianCross(i,e){return[i[1]*e[2]-i[2]*e[1],i[2]*e[0]-i[0]*e[2],i[0]*e[1]-i[1]*e[0]]}function cartesianAddInPlace(i,e){i[0]+=e[0],i[1]+=e[1],i[2]+=e[2]}function cartesianScale(i,e){return[i[0]*e,i[1]*e,i[2]*e]}function cartesianNormalizeInPlace(i){var e=sqrt$1(i[0]*i[0]+i[1]*i[1]+i[2]*i[2]);i[0]/=e,i[1]/=e,i[2]/=e}var W0,W1,X0$1,Y0$1,Z0$1,X1$1,Y1$1,Z1$1,X2$1,Y2$1,Z2$1,lambda00,phi00,x0$4,y0$4,z0,centroidStream$1={sphere:noop$1,point:centroidPoint$1,lineStart:centroidLineStart$1,lineEnd:centroidLineEnd$1,polygonStart:function(){centroidStream$1.lineStart=centroidRingStart$1,centroidStream$1.lineEnd=centroidRingEnd$1},polygonEnd:function(){centroidStream$1.lineStart=centroidLineStart$1,centroidStream$1.lineEnd=centroidLineEnd$1}};function centroidPoint$1(i,e){i*=radians$1,e*=radians$1;var o=cos$1(e);centroidPointCartesian(o*cos$1(i),o*sin$1(i),sin$1(e))}function centroidPointCartesian(i,e,o){++W0,X0$1+=(i-X0$1)/W0,Y0$1+=(e-Y0$1)/W0,Z0$1+=(o-Z0$1)/W0}function centroidLineStart$1(){centroidStream$1.point=centroidLinePointFirst}function centroidLinePointFirst(i,e){i*=radians$1,e*=radians$1;var o=cos$1(e);x0$4=o*cos$1(i),y0$4=o*sin$1(i),z0=sin$1(e),centroidStream$1.point=centroidLinePoint,centroidPointCartesian(x0$4,y0$4,z0)}function centroidLinePoint(i,e){i*=radians$1,e*=radians$1;var o=cos$1(e),d=o*cos$1(i),h=o*sin$1(i),g=sin$1(e),b=atan2(sqrt$1((b=y0$4*g-z0*h)*b+(b=z0*d-x0$4*g)*b+(b=x0$4*h-y0$4*d)*b),x0$4*d+y0$4*h+z0*g);W1+=b,X1$1+=b*(x0$4+(x0$4=d)),Y1$1+=b*(y0$4+(y0$4=h)),Z1$1+=b*(z0+(z0=g)),centroidPointCartesian(x0$4,y0$4,z0)}function centroidLineEnd$1(){centroidStream$1.point=centroidPoint$1}function centroidRingStart$1(){centroidStream$1.point=centroidRingPointFirst}function centroidRingEnd$1(){centroidRingPoint(lambda00,phi00),centroidStream$1.point=centroidPoint$1}function centroidRingPointFirst(i,e){lambda00=i,phi00=e,i*=radians$1,e*=radians$1,centroidStream$1.point=centroidRingPoint;var o=cos$1(e);x0$4=o*cos$1(i),y0$4=o*sin$1(i),z0=sin$1(e),centroidPointCartesian(x0$4,y0$4,z0)}function centroidRingPoint(i,e){i*=radians$1,e*=radians$1;var o=cos$1(e),d=o*cos$1(i),h=o*sin$1(i),g=sin$1(e),b=y0$4*g-z0*h,$=z0*d-x0$4*g,j=x0$4*h-y0$4*d,et=hypot(b,$,j),tt=asin(et),nt=et&&-tt/et;X2$1.add(nt*b),Y2$1.add(nt*$),Z2$1.add(nt*j),W1+=tt,X1$1+=tt*(x0$4+(x0$4=d)),Y1$1+=tt*(y0$4+(y0$4=h)),Z1$1+=tt*(z0+(z0=g)),centroidPointCartesian(x0$4,y0$4,z0)}function GeoCentroid(i){W0=W1=X0$1=Y0$1=Z0$1=X1$1=Y1$1=Z1$1=0,X2$1=new Adder,Y2$1=new Adder,Z2$1=new Adder,geoStream(i,centroidStream$1);var e=+X2$1,o=+Y2$1,d=+Z2$1,h=hypot(e,o,d);return h<epsilon2&&(e=X1$1,o=Y1$1,d=Z1$1,W1<epsilon$1&&(e=X0$1,o=Y0$1,d=Z0$1),h=hypot(e,o,d),h<epsilon2)?[NaN,NaN]:[atan2(o,e)*degrees,asin(d/h)*degrees]}function compose(i,e){function o(d,h){return d=i(d,h),e(d[0],d[1])}return i.invert&&e.invert&&(o.invert=function(d,h){return d=e.invert(d,h),d&&i.invert(d[0],d[1])}),o}function rotationIdentity(i,e){return abs(i)>pi$2&&(i-=Math.round(i/tau$2)*tau$2),[i,e]}rotationIdentity.invert=rotationIdentity;function rotateRadians(i,e,o){return(i%=tau$2)?e||o?compose(rotationLambda(i),rotationPhiGamma(e,o)):rotationLambda(i):e||o?rotationPhiGamma(e,o):rotationIdentity}function forwardRotationLambda(i){return function(e,o){return e+=i,abs(e)>pi$2&&(e-=Math.round(e/tau$2)*tau$2),[e,o]}}function rotationLambda(i){var e=forwardRotationLambda(i);return e.invert=forwardRotationLambda(-i),e}function rotationPhiGamma(i,e){var o=cos$1(i),d=sin$1(i),h=cos$1(e),g=sin$1(e);function b($,j){var et=cos$1(j),tt=cos$1($)*et,nt=sin$1($)*et,rt=sin$1(j),ot=rt*o+tt*d;return[atan2(nt*h-ot*g,tt*o-rt*d),asin(ot*h+nt*g)]}return b.invert=function($,j){var et=cos$1(j),tt=cos$1($)*et,nt=sin$1($)*et,rt=sin$1(j),ot=rt*h-nt*g;return[atan2(nt*h+rt*g,tt*o+ot*d),asin(ot*o-tt*d)]},b}function rotation(i){i=rotateRadians(i[0]*radians$1,i[1]*radians$1,i.length>2?i[2]*radians$1:0);function e(o){return o=i(o[0]*radians$1,o[1]*radians$1),o[0]*=degrees,o[1]*=degrees,o}return e.invert=function(o){return o=i.invert(o[0]*radians$1,o[1]*radians$1),o[0]*=degrees,o[1]*=degrees,o},e}function circleStream(i,e,o,d,h,g){if(o){var b=cos$1(e),$=sin$1(e),j=d*o;h==null?(h=e+d*tau$2,g=e-j/2):(h=circleRadius(b,h),g=circleRadius(b,g),(d>0?h<g:h>g)&&(h+=d*tau$2));for(var et,tt=h;d>0?tt>g:tt<g;tt-=j)et=spherical([b,-$*cos$1(tt),-$*sin$1(tt)]),i.point(et[0],et[1])}}function circleRadius(i,e){e=cartesian(e),e[0]-=i,cartesianNormalizeInPlace(e);var o=acos(-e[1]);return((-e[2]<0?-o:o)+tau$2-epsilon$1)%tau$2}function clipBuffer(){var i=[],e;return{point:function(o,d,h){e.push([o,d,h])},lineStart:function(){i.push(e=[])},lineEnd:noop$1,rejoin:function(){i.length>1&&i.push(i.pop().concat(i.shift()))},result:function(){var o=i;return i=[],e=null,o}}}function pointEqual(i,e){return abs(i[0]-e[0])<epsilon$1&&abs(i[1]-e[1])<epsilon$1}function Intersection(i,e,o,d){this.x=i,this.z=e,this.o=o,this.e=d,this.v=!1,this.n=this.p=null}function clipRejoin(i,e,o,d,h){var g=[],b=[],$,j;if(i.forEach(function(st){if(!((bt=st.length-1)<=0)){var bt,vt=st[0],at=st[bt],ut;if(pointEqual(vt,at)){if(!vt[2]&&!at[2]){for(h.lineStart(),$=0;$<bt;++$)h.point((vt=st[$])[0],vt[1]);h.lineEnd();return}at[0]+=2*epsilon$1}g.push(ut=new Intersection(vt,st,null,!0)),b.push(ut.o=new Intersection(vt,null,ut,!1)),g.push(ut=new Intersection(at,st,null,!1)),b.push(ut.o=new Intersection(at,null,ut,!0))}}),!!g.length){for(b.sort(e),link$2(g),link$2(b),$=0,j=b.length;$<j;++$)b[$].e=o=!o;for(var et=g[0],tt,nt;;){for(var rt=et,ot=!0;rt.v;)if((rt=rt.n)===et)return;tt=rt.z,h.lineStart();do{if(rt.v=rt.o.v=!0,rt.e){if(ot)for($=0,j=tt.length;$<j;++$)h.point((nt=tt[$])[0],nt[1]);else d(rt.x,rt.n.x,1,h);rt=rt.n}else{if(ot)for(tt=rt.p.z,$=tt.length-1;$>=0;--$)h.point((nt=tt[$])[0],nt[1]);else d(rt.x,rt.p.x,-1,h);rt=rt.p}rt=rt.o,tt=rt.z,ot=!ot}while(!rt.v);h.lineEnd()}}}function link$2(i){if(e=i.length){for(var e,o=0,d=i[0],h;++o<e;)d.n=h=i[o],h.p=d,d=h;d.n=h=i[0],h.p=d}}function longitude(i){return abs(i[0])<=pi$2?i[0]:sign$1(i[0])*((abs(i[0])+pi$2)%tau$2-pi$2)}function polygonContains(i,e){var o=longitude(e),d=e[1],h=sin$1(d),g=[sin$1(o),-cos$1(o),0],b=0,$=0,j=new Adder;h===1?d=halfPi+epsilon$1:h===-1&&(d=-halfPi-epsilon$1);for(var et=0,tt=i.length;et<tt;++et)if(rt=(nt=i[et]).length)for(var nt,rt,ot=nt[rt-1],st=longitude(ot),bt=ot[1]/2+quarterPi,vt=sin$1(bt),at=cos$1(bt),ut=0;ut<rt;++ut,st=wt,vt=xt,at=Rt,ot=$t){var $t=nt[ut],wt=longitude($t),At=$t[1]/2+quarterPi,xt=sin$1(At),Rt=cos$1(At),Ot=wt-st,kt=Ot>=0?1:-1,Mt=kt*Ot,Bt=Mt>pi$2,jt=vt*xt;if(j.add(atan2(jt*kt*sin$1(Mt),at*Rt+jt*cos$1(Mt))),b+=Bt?Ot+kt*tau$2:Ot,Bt^st>=o^wt>=o){var zt=cartesianCross(cartesian(ot),cartesian($t));cartesianNormalizeInPlace(zt);var Nt=cartesianCross(g,zt);cartesianNormalizeInPlace(Nt);var Ct=(Bt^Ot>=0?-1:1)*asin(Nt[2]);(d>Ct||d===Ct&&(zt[0]||zt[1]))&&($+=Bt^Ot>=0?1:-1)}}return(b<-epsilon$1||b<epsilon$1&&j<-epsilon2)^$&1}function clip(i,e,o,d){return function(h){var g=e(h),b=clipBuffer(),$=e(b),j=!1,et,tt,nt,rt={point:ot,lineStart:bt,lineEnd:vt,polygonStart:function(){rt.point=at,rt.lineStart=ut,rt.lineEnd=$t,tt=[],et=[]},polygonEnd:function(){rt.point=ot,rt.lineStart=bt,rt.lineEnd=vt,tt=merge(tt);var wt=polygonContains(et,d);tt.length?(j||(h.polygonStart(),j=!0),clipRejoin(tt,compareIntersection,wt,o,h)):wt&&(j||(h.polygonStart(),j=!0),h.lineStart(),o(null,null,1,h),h.lineEnd()),j&&(h.polygonEnd(),j=!1),tt=et=null},sphere:function(){h.polygonStart(),h.lineStart(),o(null,null,1,h),h.lineEnd(),h.polygonEnd()}};function ot(wt,At){i(wt,At)&&h.point(wt,At)}function st(wt,At){g.point(wt,At)}function bt(){rt.point=st,g.lineStart()}function vt(){rt.point=ot,g.lineEnd()}function at(wt,At){nt.push([wt,At]),$.point(wt,At)}function ut(){$.lineStart(),nt=[]}function $t(){at(nt[0][0],nt[0][1]),$.lineEnd();var wt=$.clean(),At=b.result(),xt,Rt=At.length,Ot,kt,Mt;if(nt.pop(),et.push(nt),nt=null,!!Rt){if(wt&1){if(kt=At[0],(Ot=kt.length-1)>0){for(j||(h.polygonStart(),j=!0),h.lineStart(),xt=0;xt<Ot;++xt)h.point((Mt=kt[xt])[0],Mt[1]);h.lineEnd()}return}Rt>1&&wt&2&&At.push(At.pop().concat(At.shift())),tt.push(At.filter(validSegment))}}return rt}}function validSegment(i){return i.length>1}function compareIntersection(i,e){return((i=i.x)[0]<0?i[1]-halfPi-epsilon$1:halfPi-i[1])-((e=e.x)[0]<0?e[1]-halfPi-epsilon$1:halfPi-e[1])}const clipAntimeridian=clip(function(){return!0},clipAntimeridianLine,clipAntimeridianInterpolate,[-pi$2,-halfPi]);function clipAntimeridianLine(i){var e=NaN,o=NaN,d=NaN,h;return{lineStart:function(){i.lineStart(),h=1},point:function(g,b){var $=g>0?pi$2:-pi$2,j=abs(g-e);abs(j-pi$2)<epsilon$1?(i.point(e,o=(o+b)/2>0?halfPi:-halfPi),i.point(d,o),i.lineEnd(),i.lineStart(),i.point($,o),i.point(g,o),h=0):d!==$&&j>=pi$2&&(abs(e-d)<epsilon$1&&(e-=d*epsilon$1),abs(g-$)<epsilon$1&&(g-=$*epsilon$1),o=clipAntimeridianIntersect(e,o,g,b),i.point(d,o),i.lineEnd(),i.lineStart(),i.point($,o),h=0),i.point(e=g,o=b),d=$},lineEnd:function(){i.lineEnd(),e=o=NaN},clean:function(){return 2-h}}}function clipAntimeridianIntersect(i,e,o,d){var h,g,b=sin$1(i-o);return abs(b)>epsilon$1?atan((sin$1(e)*(g=cos$1(d))*sin$1(o)-sin$1(d)*(h=cos$1(e))*sin$1(i))/(h*g*b)):(e+d)/2}function clipAntimeridianInterpolate(i,e,o,d){var h;if(i==null)h=o*halfPi,d.point(-pi$2,h),d.point(0,h),d.point(pi$2,h),d.point(pi$2,0),d.point(pi$2,-h),d.point(0,-h),d.point(-pi$2,-h),d.point(-pi$2,0),d.point(-pi$2,h);else if(abs(i[0]-e[0])>epsilon$1){var g=i[0]<e[0]?pi$2:-pi$2;h=o*g/2,d.point(-g,h),d.point(0,h),d.point(g,h)}else d.point(e[0],e[1])}function clipCircle(i){var e=cos$1(i),o=6*radians$1,d=e>0,h=abs(e)>epsilon$1;function g(tt,nt,rt,ot){circleStream(ot,i,o,rt,tt,nt)}function b(tt,nt){return cos$1(tt)*cos$1(nt)>e}function $(tt){var nt,rt,ot,st,bt;return{lineStart:function(){st=ot=!1,bt=1},point:function(vt,at){var ut=[vt,at],$t,wt=b(vt,at),At=d?wt?0:et(vt,at):wt?et(vt+(vt<0?pi$2:-pi$2),at):0;if(!nt&&(st=ot=wt)&&tt.lineStart(),wt!==ot&&($t=j(nt,ut),(!$t||pointEqual(nt,$t)||pointEqual(ut,$t))&&(ut[2]=1)),wt!==ot)bt=0,wt?(tt.lineStart(),$t=j(ut,nt),tt.point($t[0],$t[1])):($t=j(nt,ut),tt.point($t[0],$t[1],2),tt.lineEnd()),nt=$t;else if(h&&nt&&d^wt){var xt;!(At&rt)&&(xt=j(ut,nt,!0))&&(bt=0,d?(tt.lineStart(),tt.point(xt[0][0],xt[0][1]),tt.point(xt[1][0],xt[1][1]),tt.lineEnd()):(tt.point(xt[1][0],xt[1][1]),tt.lineEnd(),tt.lineStart(),tt.point(xt[0][0],xt[0][1],3)))}wt&&(!nt||!pointEqual(nt,ut))&&tt.point(ut[0],ut[1]),nt=ut,ot=wt,rt=At},lineEnd:function(){ot&&tt.lineEnd(),nt=null},clean:function(){return bt|(st&&ot)<<1}}}function j(tt,nt,rt){var ot=cartesian(tt),st=cartesian(nt),bt=[1,0,0],vt=cartesianCross(ot,st),at=cartesianDot(vt,vt),ut=vt[0],$t=at-ut*ut;if(!$t)return!rt&&tt;var wt=e*at/$t,At=-e*ut/$t,xt=cartesianCross(bt,vt),Rt=cartesianScale(bt,wt),Ot=cartesianScale(vt,At);cartesianAddInPlace(Rt,Ot);var kt=xt,Mt=cartesianDot(Rt,kt),Bt=cartesianDot(kt,kt),jt=Mt*Mt-Bt*(cartesianDot(Rt,Rt)-1);if(!(jt<0)){var zt=sqrt$1(jt),Nt=cartesianScale(kt,(-Mt-zt)/Bt);if(cartesianAddInPlace(Nt,Rt),Nt=spherical(Nt),!rt)return Nt;var Ct=tt[0],Ft=nt[0],Vt=tt[1],Ut=nt[1],Ht;Ft<Ct&&(Ht=Ct,Ct=Ft,Ft=Ht);var Pt=Ft-Ct,Yt=abs(Pt-pi$2)<epsilon$1,Xt=Yt||Pt<epsilon$1;if(!Yt&&Ut<Vt&&(Ht=Vt,Vt=Ut,Ut=Ht),Xt?Yt?Vt+Ut>0^Nt[1]<(abs(Nt[0]-Ct)<epsilon$1?Vt:Ut):Vt<=Nt[1]&&Nt[1]<=Ut:Pt>pi$2^(Ct<=Nt[0]&&Nt[0]<=Ft)){var wn=cartesianScale(kt,(-Mt+zt)/Bt);return cartesianAddInPlace(wn,Rt),[Nt,spherical(wn)]}}}function et(tt,nt){var rt=d?i:pi$2-i,ot=0;return tt<-rt?ot|=1:tt>rt&&(ot|=2),nt<-rt?ot|=4:nt>rt&&(ot|=8),ot}return clip(b,$,g,d?[0,-i]:[-pi$2,i-pi$2])}function clipLine(i,e,o,d,h,g){var b=i[0],$=i[1],j=e[0],et=e[1],tt=0,nt=1,rt=j-b,ot=et-$,st;if(st=o-b,!(!rt&&st>0)){if(st/=rt,rt<0){if(st<tt)return;st<nt&&(nt=st)}else if(rt>0){if(st>nt)return;st>tt&&(tt=st)}if(st=h-b,!(!rt&&st<0)){if(st/=rt,rt<0){if(st>nt)return;st>tt&&(tt=st)}else if(rt>0){if(st<tt)return;st<nt&&(nt=st)}if(st=d-$,!(!ot&&st>0)){if(st/=ot,ot<0){if(st<tt)return;st<nt&&(nt=st)}else if(ot>0){if(st>nt)return;st>tt&&(tt=st)}if(st=g-$,!(!ot&&st<0)){if(st/=ot,ot<0){if(st>nt)return;st>tt&&(tt=st)}else if(ot>0){if(st<tt)return;st<nt&&(nt=st)}return tt>0&&(i[0]=b+tt*rt,i[1]=$+tt*ot),nt<1&&(e[0]=b+nt*rt,e[1]=$+nt*ot),!0}}}}}var clipMax=1e9,clipMin=-clipMax;function clipRectangle(i,e,o,d){function h(et,tt){return i<=et&&et<=o&&e<=tt&&tt<=d}function g(et,tt,nt,rt){var ot=0,st=0;if(et==null||(ot=b(et,nt))!==(st=b(tt,nt))||j(et,tt)<0^nt>0)do rt.point(ot===0||ot===3?i:o,ot>1?d:e);while((ot=(ot+nt+4)%4)!==st);else rt.point(tt[0],tt[1])}function b(et,tt){return abs(et[0]-i)<epsilon$1?tt>0?0:3:abs(et[0]-o)<epsilon$1?tt>0?2:1:abs(et[1]-e)<epsilon$1?tt>0?1:0:tt>0?3:2}function $(et,tt){return j(et.x,tt.x)}function j(et,tt){var nt=b(et,1),rt=b(tt,1);return nt!==rt?nt-rt:nt===0?tt[1]-et[1]:nt===1?et[0]-tt[0]:nt===2?et[1]-tt[1]:tt[0]-et[0]}return function(et){var tt=et,nt=clipBuffer(),rt,ot,st,bt,vt,at,ut,$t,wt,At,xt,Rt={point:Ot,lineStart:jt,lineEnd:zt,polygonStart:Mt,polygonEnd:Bt};function Ot(Ct,Ft){h(Ct,Ft)&&tt.point(Ct,Ft)}function kt(){for(var Ct=0,Ft=0,Vt=ot.length;Ft<Vt;++Ft)for(var Ut=ot[Ft],Ht=1,Pt=Ut.length,Yt=Ut[0],Xt,wn,Mn=Yt[0],Cn=Yt[1];Ht<Pt;++Ht)Xt=Mn,wn=Cn,Yt=Ut[Ht],Mn=Yt[0],Cn=Yt[1],wn<=d?Cn>d&&(Mn-Xt)*(d-wn)>(Cn-wn)*(i-Xt)&&++Ct:Cn<=d&&(Mn-Xt)*(d-wn)<(Cn-wn)*(i-Xt)&&--Ct;return Ct}function Mt(){tt=nt,rt=[],ot=[],xt=!0}function Bt(){var Ct=kt(),Ft=xt&&Ct,Vt=(rt=merge(rt)).length;(Ft||Vt)&&(et.polygonStart(),Ft&&(et.lineStart(),g(null,null,1,et),et.lineEnd()),Vt&&clipRejoin(rt,$,Ct,g,et),et.polygonEnd()),tt=et,rt=ot=st=null}function jt(){Rt.point=Nt,ot&&ot.push(st=[]),At=!0,wt=!1,ut=$t=NaN}function zt(){rt&&(Nt(bt,vt),at&&wt&&nt.rejoin(),rt.push(nt.result())),Rt.point=Ot,wt&&tt.lineEnd()}function Nt(Ct,Ft){var Vt=h(Ct,Ft);if(ot&&st.push([Ct,Ft]),At)bt=Ct,vt=Ft,at=Vt,At=!1,Vt&&(tt.lineStart(),tt.point(Ct,Ft));else if(Vt&&wt)tt.point(Ct,Ft);else{var Ut=[ut=Math.max(clipMin,Math.min(clipMax,ut)),$t=Math.max(clipMin,Math.min(clipMax,$t))],Ht=[Ct=Math.max(clipMin,Math.min(clipMax,Ct)),Ft=Math.max(clipMin,Math.min(clipMax,Ft))];clipLine(Ut,Ht,i,e,o,d)?(wt||(tt.lineStart(),tt.point(Ut[0],Ut[1])),tt.point(Ht[0],Ht[1]),Vt||tt.lineEnd(),xt=!1):Vt&&(tt.lineStart(),tt.point(Ct,Ft),xt=!1)}ut=Ct,$t=Ft,wt=Vt}return Rt}}function graticuleX(i,e,o){var d=range$1(i,e-epsilon$1,o).concat(e);return function(h){return d.map(function(g){return[h,g]})}}function graticuleY(i,e,o){var d=range$1(i,e-epsilon$1,o).concat(e);return function(h){return d.map(function(g){return[g,h]})}}function graticule$2(){var i,e,o,d,h,g,b,$,j=10,et=j,tt=90,nt=360,rt,ot,st,bt,vt=2.5;function at(){return{type:"MultiLineString",coordinates:ut()}}function ut(){return range$1(ceil(d/tt)*tt,o,tt).map(st).concat(range$1(ceil($/nt)*nt,b,nt).map(bt)).concat(range$1(ceil(e/j)*j,i,j).filter(function($t){return abs($t%tt)>epsilon$1}).map(rt)).concat(range$1(ceil(g/et)*et,h,et).filter(function($t){return abs($t%nt)>epsilon$1}).map(ot))}return at.lines=function(){return ut().map(function($t){return{type:"LineString",coordinates:$t}})},at.outline=function(){return{type:"Polygon",coordinates:[st(d).concat(bt(b).slice(1),st(o).reverse().slice(1),bt($).reverse().slice(1))]}},at.extent=function($t){return arguments.length?at.extentMajor($t).extentMinor($t):at.extentMinor()},at.extentMajor=function($t){return arguments.length?(d=+$t[0][0],o=+$t[1][0],$=+$t[0][1],b=+$t[1][1],d>o&&($t=d,d=o,o=$t),$>b&&($t=$,$=b,b=$t),at.precision(vt)):[[d,$],[o,b]]},at.extentMinor=function($t){return arguments.length?(e=+$t[0][0],i=+$t[1][0],g=+$t[0][1],h=+$t[1][1],e>i&&($t=e,e=i,i=$t),g>h&&($t=g,g=h,h=$t),at.precision(vt)):[[e,g],[i,h]]},at.step=function($t){return arguments.length?at.stepMajor($t).stepMinor($t):at.stepMinor()},at.stepMajor=function($t){return arguments.length?(tt=+$t[0],nt=+$t[1],at):[tt,nt]},at.stepMinor=function($t){return arguments.length?(j=+$t[0],et=+$t[1],at):[j,et]},at.precision=function($t){return arguments.length?(vt=+$t,rt=graticuleX(g,h,90),ot=graticuleY(e,i,vt),st=graticuleX($,b,90),bt=graticuleY(d,o,vt),at):vt},at.extentMajor([[-180,-90+epsilon$1],[180,90-epsilon$1]]).extentMinor([[-180,-80-epsilon$1],[180,80+epsilon$1]])}function graticule10(){return graticule$2()()}const identity$5=i=>i;var areaSum=new Adder,areaRingSum=new Adder,x00$2,y00$2,x0$3,y0$3,areaStream={point:noop$1,lineStart:noop$1,lineEnd:noop$1,polygonStart:function(){areaStream.lineStart=areaRingStart,areaStream.lineEnd=areaRingEnd},polygonEnd:function(){areaStream.lineStart=areaStream.lineEnd=areaStream.point=noop$1,areaSum.add(abs(areaRingSum)),areaRingSum=new Adder},result:function(){var i=areaSum/2;return areaSum=new Adder,i}};function areaRingStart(){areaStream.point=areaPointFirst}function areaPointFirst(i,e){areaStream.point=areaPoint,x00$2=x0$3=i,y00$2=y0$3=e}function areaPoint(i,e){areaRingSum.add(y0$3*i-x0$3*e),x0$3=i,y0$3=e}function areaRingEnd(){areaPoint(x00$2,y00$2)}const pathArea=areaStream;var x0$2=1/0,y0$2=x0$2,x1=-x0$2,y1=x1,boundsStream={point:boundsPoint,lineStart:noop$1,lineEnd:noop$1,polygonStart:noop$1,polygonEnd:noop$1,result:function(){var i=[[x0$2,y0$2],[x1,y1]];return x1=y1=-(y0$2=x0$2=1/0),i}};function boundsPoint(i,e){i<x0$2&&(x0$2=i),i>x1&&(x1=i),e<y0$2&&(y0$2=e),e>y1&&(y1=e)}const boundsStream$1=boundsStream;var X0=0,Y0=0,Z0=0,X1=0,Y1=0,Z1=0,X2=0,Y2=0,Z2=0,x00$1,y00$1,x0$1,y0$1,centroidStream={point:centroidPoint,lineStart:centroidLineStart,lineEnd:centroidLineEnd,polygonStart:function(){centroidStream.lineStart=centroidRingStart,centroidStream.lineEnd=centroidRingEnd},polygonEnd:function(){centroidStream.point=centroidPoint,centroidStream.lineStart=centroidLineStart,centroidStream.lineEnd=centroidLineEnd},result:function(){var i=Z2?[X2/Z2,Y2/Z2]:Z1?[X1/Z1,Y1/Z1]:Z0?[X0/Z0,Y0/Z0]:[NaN,NaN];return X0=Y0=Z0=X1=Y1=Z1=X2=Y2=Z2=0,i}};function centroidPoint(i,e){X0+=i,Y0+=e,++Z0}function centroidLineStart(){centroidStream.point=centroidPointFirstLine}function centroidPointFirstLine(i,e){centroidStream.point=centroidPointLine,centroidPoint(x0$1=i,y0$1=e)}function centroidPointLine(i,e){var o=i-x0$1,d=e-y0$1,h=sqrt$1(o*o+d*d);X1+=h*(x0$1+i)/2,Y1+=h*(y0$1+e)/2,Z1+=h,centroidPoint(x0$1=i,y0$1=e)}function centroidLineEnd(){centroidStream.point=centroidPoint}function centroidRingStart(){centroidStream.point=centroidPointFirstRing}function centroidRingEnd(){centroidPointRing(x00$1,y00$1)}function centroidPointFirstRing(i,e){centroidStream.point=centroidPointRing,centroidPoint(x00$1=x0$1=i,y00$1=y0$1=e)}function centroidPointRing(i,e){var o=i-x0$1,d=e-y0$1,h=sqrt$1(o*o+d*d);X1+=h*(x0$1+i)/2,Y1+=h*(y0$1+e)/2,Z1+=h,h=y0$1*i-x0$1*e,X2+=h*(x0$1+i),Y2+=h*(y0$1+e),Z2+=h*3,centroidPoint(x0$1=i,y0$1=e)}const pathCentroid=centroidStream;function PathContext(i){this._context=i}PathContext.prototype={_radius:4.5,pointRadius:function(i){return this._radius=i,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(i,e){switch(this._point){case 0:{this._context.moveTo(i,e),this._point=1;break}case 1:{this._context.lineTo(i,e);break}default:{this._context.moveTo(i+this._radius,e),this._context.arc(i,e,this._radius,0,tau$2);break}}},result:noop$1};var lengthSum=new Adder,lengthRing,x00,y00,x0,y0,lengthStream={point:noop$1,lineStart:function(){lengthStream.point=lengthPointFirst},lineEnd:function(){lengthRing&&lengthPoint(x00,y00),lengthStream.point=noop$1},polygonStart:function(){lengthRing=!0},polygonEnd:function(){lengthRing=null},result:function(){var i=+lengthSum;return lengthSum=new Adder,i}};function lengthPointFirst(i,e){lengthStream.point=lengthPoint,x00=x0=i,y00=y0=e}function lengthPoint(i,e){x0-=i,y0-=e,lengthSum.add(sqrt$1(x0*x0+y0*y0)),x0=i,y0=e}const pathMeasure=lengthStream;let cacheDigits,cacheAppend,cacheRadius,cacheCircle;class PathString{constructor(e){this._append=e==null?append:appendRound(e),this._radius=4.5,this._=""}pointRadius(e){return this._radius=+e,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(e,o){switch(this._point){case 0:{this._append`M${e},${o}`,this._point=1;break}case 1:{this._append`L${e},${o}`;break}default:{if(this._append`M${e},${o}`,this._radius!==cacheRadius||this._append!==cacheAppend){const d=this._radius,h=this._;this._="",this._append`m0,${d}a${d},${d} 0 1,1 0,${-2*d}a${d},${d} 0 1,1 0,${2*d}z`,cacheRadius=d,cacheAppend=this._append,cacheCircle=this._,this._=h}this._+=cacheCircle;break}}}result(){const e=this._;return this._="",e.length?e:null}}function append(i){let e=1;this._+=i[0];for(const o=i.length;e<o;++e)this._+=arguments[e]+i[e]}function appendRound(i){const e=Math.floor(i);if(!(e>=0))throw new RangeError(`invalid digits: ${i}`);if(e>15)return append;if(e!==cacheDigits){const o=10**e;cacheDigits=e,cacheAppend=function(h){let g=1;this._+=h[0];for(const b=h.length;g<b;++g)this._+=Math.round(arguments[g]*o)/o+h[g]}}return cacheAppend}function geoPath(i,e){let o=3,d=4.5,h,g;function b($){return $&&(typeof d=="function"&&g.pointRadius(+d.apply(this,arguments)),geoStream($,h(g))),g.result()}return b.area=function($){return geoStream($,h(pathArea)),pathArea.result()},b.measure=function($){return geoStream($,h(pathMeasure)),pathMeasure.result()},b.bounds=function($){return geoStream($,h(boundsStream$1)),boundsStream$1.result()},b.centroid=function($){return geoStream($,h(pathCentroid)),pathCentroid.result()},b.projection=function($){return arguments.length?(h=$==null?(i=null,identity$5):(i=$).stream,b):i},b.context=function($){return arguments.length?(g=$==null?(e=null,new PathString(o)):new PathContext(e=$),typeof d!="function"&&g.pointRadius(d),b):e},b.pointRadius=function($){return arguments.length?(d=typeof $=="function"?$:(g.pointRadius(+$),+$),b):d},b.digits=function($){if(!arguments.length)return o;if($==null)o=null;else{const j=Math.floor($);if(!(j>=0))throw new RangeError(`invalid digits: ${$}`);o=j}return e===null&&(g=new PathString(o)),b},b.projection(i).digits(o).context(e)}function geoTransform(i){return{stream:transformer$2(i)}}function transformer$2(i){return function(e){var o=new TransformStream;for(var d in i)o[d]=i[d];return o.stream=e,o}}function TransformStream(){}TransformStream.prototype={constructor:TransformStream,point:function(i,e){this.stream.point(i,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function fit(i,e,o){var d=i.clipExtent&&i.clipExtent();return i.scale(150).translate([0,0]),d!=null&&i.clipExtent(null),geoStream(o,i.stream(boundsStream$1)),e(boundsStream$1.result()),d!=null&&i.clipExtent(d),i}function fitExtent(i,e,o){return fit(i,function(d){var h=e[1][0]-e[0][0],g=e[1][1]-e[0][1],b=Math.min(h/(d[1][0]-d[0][0]),g/(d[1][1]-d[0][1])),$=+e[0][0]+(h-b*(d[1][0]+d[0][0]))/2,j=+e[0][1]+(g-b*(d[1][1]+d[0][1]))/2;i.scale(150*b).translate([$,j])},o)}function fitSize(i,e,o){return fitExtent(i,[[0,0],e],o)}function fitWidth(i,e,o){return fit(i,function(d){var h=+e,g=h/(d[1][0]-d[0][0]),b=(h-g*(d[1][0]+d[0][0]))/2,$=-g*d[0][1];i.scale(150*g).translate([b,$])},o)}function fitHeight(i,e,o){return fit(i,function(d){var h=+e,g=h/(d[1][1]-d[0][1]),b=-g*d[0][0],$=(h-g*(d[1][1]+d[0][1]))/2;i.scale(150*g).translate([b,$])},o)}var maxDepth=16,cosMinDistance=cos$1(30*radians$1);function resample(i,e){return+e?resample$1(i,e):resampleNone(i)}function resampleNone(i){return transformer$2({point:function(e,o){e=i(e,o),this.stream.point(e[0],e[1])}})}function resample$1(i,e){function o(d,h,g,b,$,j,et,tt,nt,rt,ot,st,bt,vt){var at=et-d,ut=tt-h,$t=at*at+ut*ut;if($t>4*e&&bt--){var wt=b+rt,At=$+ot,xt=j+st,Rt=sqrt$1(wt*wt+At*At+xt*xt),Ot=asin(xt/=Rt),kt=abs(abs(xt)-1)<epsilon$1||abs(g-nt)<epsilon$1?(g+nt)/2:atan2(At,wt),Mt=i(kt,Ot),Bt=Mt[0],jt=Mt[1],zt=Bt-d,Nt=jt-h,Ct=ut*zt-at*Nt;(Ct*Ct/$t>e||abs((at*zt+ut*Nt)/$t-.5)>.3||b*rt+$*ot+j*st<cosMinDistance)&&(o(d,h,g,b,$,j,Bt,jt,kt,wt/=Rt,At/=Rt,xt,bt,vt),vt.point(Bt,jt),o(Bt,jt,kt,wt,At,xt,et,tt,nt,rt,ot,st,bt,vt))}}return function(d){var h,g,b,$,j,et,tt,nt,rt,ot,st,bt,vt={point:at,lineStart:ut,lineEnd:wt,polygonStart:function(){d.polygonStart(),vt.lineStart=At},polygonEnd:function(){d.polygonEnd(),vt.lineStart=ut}};function at(Ot,kt){Ot=i(Ot,kt),d.point(Ot[0],Ot[1])}function ut(){nt=NaN,vt.point=$t,d.lineStart()}function $t(Ot,kt){var Mt=cartesian([Ot,kt]),Bt=i(Ot,kt);o(nt,rt,tt,ot,st,bt,nt=Bt[0],rt=Bt[1],tt=Ot,ot=Mt[0],st=Mt[1],bt=Mt[2],maxDepth,d),d.point(nt,rt)}function wt(){vt.point=at,d.lineEnd()}function At(){ut(),vt.point=xt,vt.lineEnd=Rt}function xt(Ot,kt){$t(h=Ot,kt),g=nt,b=rt,$=ot,j=st,et=bt,vt.point=$t}function Rt(){o(nt,rt,tt,ot,st,bt,g,b,h,$,j,et,maxDepth,d),vt.lineEnd=wt,wt()}return vt}}var transformRadians=transformer$2({point:function(i,e){this.stream.point(i*radians$1,e*radians$1)}});function transformRotate(i){return transformer$2({point:function(e,o){var d=i(e,o);return this.stream.point(d[0],d[1])}})}function scaleTranslate(i,e,o,d,h){function g(b,$){return b*=d,$*=h,[e+i*b,o-i*$]}return g.invert=function(b,$){return[(b-e)/i*d,(o-$)/i*h]},g}function scaleTranslateRotate(i,e,o,d,h,g){if(!g)return scaleTranslate(i,e,o,d,h);var b=cos$1(g),$=sin$1(g),j=b*i,et=$*i,tt=b/i,nt=$/i,rt=($*o-b*e)/i,ot=($*e+b*o)/i;function st(bt,vt){return bt*=d,vt*=h,[j*bt-et*vt+e,o-et*bt-j*vt]}return st.invert=function(bt,vt){return[d*(tt*bt-nt*vt+rt),h*(ot-nt*bt-tt*vt)]},st}function projection$1(i){return projectionMutator(function(){return i})()}function projectionMutator(i){var e,o=150,d=480,h=250,g=0,b=0,$=0,j=0,et=0,tt,nt=0,rt=1,ot=1,st=null,bt=clipAntimeridian,vt=null,at,ut,$t,wt=identity$5,At=.5,xt,Rt,Ot,kt,Mt;function Bt(Ct){return Ot(Ct[0]*radians$1,Ct[1]*radians$1)}function jt(Ct){return Ct=Ot.invert(Ct[0],Ct[1]),Ct&&[Ct[0]*degrees,Ct[1]*degrees]}Bt.stream=function(Ct){return kt&&Mt===Ct?kt:kt=transformRadians(transformRotate(tt)(bt(xt(wt(Mt=Ct)))))},Bt.preclip=function(Ct){return arguments.length?(bt=Ct,st=void 0,Nt()):bt},Bt.postclip=function(Ct){return arguments.length?(wt=Ct,vt=at=ut=$t=null,Nt()):wt},Bt.clipAngle=function(Ct){return arguments.length?(bt=+Ct?clipCircle(st=Ct*radians$1):(st=null,clipAntimeridian),Nt()):st*degrees},Bt.clipExtent=function(Ct){return arguments.length?(wt=Ct==null?(vt=at=ut=$t=null,identity$5):clipRectangle(vt=+Ct[0][0],at=+Ct[0][1],ut=+Ct[1][0],$t=+Ct[1][1]),Nt()):vt==null?null:[[vt,at],[ut,$t]]},Bt.scale=function(Ct){return arguments.length?(o=+Ct,zt()):o},Bt.translate=function(Ct){return arguments.length?(d=+Ct[0],h=+Ct[1],zt()):[d,h]},Bt.center=function(Ct){return arguments.length?(g=Ct[0]%360*radians$1,b=Ct[1]%360*radians$1,zt()):[g*degrees,b*degrees]},Bt.rotate=function(Ct){return arguments.length?($=Ct[0]%360*radians$1,j=Ct[1]%360*radians$1,et=Ct.length>2?Ct[2]%360*radians$1:0,zt()):[$*degrees,j*degrees,et*degrees]},Bt.angle=function(Ct){return arguments.length?(nt=Ct%360*radians$1,zt()):nt*degrees},Bt.reflectX=function(Ct){return arguments.length?(rt=Ct?-1:1,zt()):rt<0},Bt.reflectY=function(Ct){return arguments.length?(ot=Ct?-1:1,zt()):ot<0},Bt.precision=function(Ct){return arguments.length?(xt=resample(Rt,At=Ct*Ct),Nt()):sqrt$1(At)},Bt.fitExtent=function(Ct,Ft){return fitExtent(Bt,Ct,Ft)},Bt.fitSize=function(Ct,Ft){return fitSize(Bt,Ct,Ft)},Bt.fitWidth=function(Ct,Ft){return fitWidth(Bt,Ct,Ft)},Bt.fitHeight=function(Ct,Ft){return fitHeight(Bt,Ct,Ft)};function zt(){var Ct=scaleTranslateRotate(o,0,0,rt,ot,nt).apply(null,e(g,b)),Ft=scaleTranslateRotate(o,d-Ct[0],h-Ct[1],rt,ot,nt);return tt=rotateRadians($,j,et),Rt=compose(e,Ft),Ot=compose(tt,Rt),xt=resample(Rt,At),Nt()}function Nt(){return kt=Mt=null,Bt}return function(){return e=i.apply(this,arguments),Bt.invert=e.invert&&jt,zt()}}function conicProjection$1(i){var e=0,o=pi$2/3,d=projectionMutator(i),h=d(e,o);return h.parallels=function(g){return arguments.length?d(e=g[0]*radians$1,o=g[1]*radians$1):[e*degrees,o*degrees]},h}function cylindricalEqualAreaRaw(i){var e=cos$1(i);function o(d,h){return[d*e,sin$1(h)/e]}return o.invert=function(d,h){return[d/e,asin(h*e)]},o}function conicEqualAreaRaw(i,e){var o=sin$1(i),d=(o+sin$1(e))/2;if(abs(d)<epsilon$1)return cylindricalEqualAreaRaw(i);var h=1+o*(2*d-o),g=sqrt$1(h)/d;function b($,j){var et=sqrt$1(h-2*d*sin$1(j))/d;return[et*sin$1($*=d),g-et*cos$1($)]}return b.invert=function($,j){var et=g-j,tt=atan2($,abs(et))*sign$1(et);return et*d<0&&(tt-=pi$2*sign$1($)*sign$1(et)),[tt/d,asin((h-($*$+et*et)*d*d)/(2*d))]},b}function geoConicEqualArea(){return conicProjection$1(conicEqualAreaRaw).scale(155.424).center([0,33.6442])}function geoAlbers(){return geoConicEqualArea().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function multiplex(i){var e=i.length;return{point:function(o,d){for(var h=-1;++h<e;)i[h].point(o,d)},sphere:function(){for(var o=-1;++o<e;)i[o].sphere()},lineStart:function(){for(var o=-1;++o<e;)i[o].lineStart()},lineEnd:function(){for(var o=-1;++o<e;)i[o].lineEnd()},polygonStart:function(){for(var o=-1;++o<e;)i[o].polygonStart()},polygonEnd:function(){for(var o=-1;++o<e;)i[o].polygonEnd()}}}function geoAlbersUsa(){var i,e,o=geoAlbers(),d,h=geoConicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),g,b=geoConicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),$,j,et={point:function(rt,ot){j=[rt,ot]}};function tt(rt){var ot=rt[0],st=rt[1];return j=null,d.point(ot,st),j||(g.point(ot,st),j)||($.point(ot,st),j)}tt.invert=function(rt){var ot=o.scale(),st=o.translate(),bt=(rt[0]-st[0])/ot,vt=(rt[1]-st[1])/ot;return(vt>=.12&&vt<.234&&bt>=-.425&&bt<-.214?h:vt>=.166&&vt<.234&&bt>=-.214&&bt<-.115?b:o).invert(rt)},tt.stream=function(rt){return i&&e===rt?i:i=multiplex([o.stream(e=rt),h.stream(rt),b.stream(rt)])},tt.precision=function(rt){return arguments.length?(o.precision(rt),h.precision(rt),b.precision(rt),nt()):o.precision()},tt.scale=function(rt){return arguments.length?(o.scale(rt),h.scale(rt*.35),b.scale(rt),tt.translate(o.translate())):o.scale()},tt.translate=function(rt){if(!arguments.length)return o.translate();var ot=o.scale(),st=+rt[0],bt=+rt[1];return d=o.translate(rt).clipExtent([[st-.455*ot,bt-.238*ot],[st+.455*ot,bt+.238*ot]]).stream(et),g=h.translate([st-.307*ot,bt+.201*ot]).clipExtent([[st-.425*ot+epsilon$1,bt+.12*ot+epsilon$1],[st-.214*ot-epsilon$1,bt+.234*ot-epsilon$1]]).stream(et),$=b.translate([st-.205*ot,bt+.212*ot]).clipExtent([[st-.214*ot+epsilon$1,bt+.166*ot+epsilon$1],[st-.115*ot-epsilon$1,bt+.234*ot-epsilon$1]]).stream(et),nt()},tt.fitExtent=function(rt,ot){return fitExtent(tt,rt,ot)},tt.fitSize=function(rt,ot){return fitSize(tt,rt,ot)},tt.fitWidth=function(rt,ot){return fitWidth(tt,rt,ot)},tt.fitHeight=function(rt,ot){return fitHeight(tt,rt,ot)};function nt(){return i=e=null,tt}return tt.scale(1070)}function azimuthalRaw(i){return function(e,o){var d=cos$1(e),h=cos$1(o),g=i(d*h);return g===1/0?[2,0]:[g*h*sin$1(e),g*sin$1(o)]}}function azimuthalInvert(i){return function(e,o){var d=sqrt$1(e*e+o*o),h=i(d),g=sin$1(h),b=cos$1(h);return[atan2(e*g,d*b),asin(d&&o*g/d)]}}var azimuthalEqualAreaRaw=azimuthalRaw(function(i){return sqrt$1(2/(1+i))});azimuthalEqualAreaRaw.invert=azimuthalInvert(function(i){return 2*asin(i/2)});function geoAzimuthalEqualArea(){return projection$1(azimuthalEqualAreaRaw).scale(124.75).clipAngle(180-.001)}var azimuthalEquidistantRaw=azimuthalRaw(function(i){return(i=acos(i))&&i/sin$1(i)});azimuthalEquidistantRaw.invert=azimuthalInvert(function(i){return i});function geoAzimuthalEquidistant(){return projection$1(azimuthalEquidistantRaw).scale(79.4188).clipAngle(180-.001)}function mercatorRaw(i,e){return[i,log$1(tan((halfPi+e)/2))]}mercatorRaw.invert=function(i,e){return[i,2*atan(exp(e))-halfPi]};function geoMercator(){return mercatorProjection(mercatorRaw).scale(961/tau$2)}function mercatorProjection(i){var e=projection$1(i),o=e.center,d=e.scale,h=e.translate,g=e.clipExtent,b=null,$,j,et;e.scale=function(nt){return arguments.length?(d(nt),tt()):d()},e.translate=function(nt){return arguments.length?(h(nt),tt()):h()},e.center=function(nt){return arguments.length?(o(nt),tt()):o()},e.clipExtent=function(nt){return arguments.length?(nt==null?b=$=j=et=null:(b=+nt[0][0],$=+nt[0][1],j=+nt[1][0],et=+nt[1][1]),tt()):b==null?null:[[b,$],[j,et]]};function tt(){var nt=pi$2*d(),rt=e(rotation(e.rotate()).invert([0,0]));return g(b==null?[[rt[0]-nt,rt[1]-nt],[rt[0]+nt,rt[1]+nt]]:i===mercatorRaw?[[Math.max(rt[0]-nt,b),$],[Math.min(rt[0]+nt,j),et]]:[[b,Math.max(rt[1]-nt,$)],[j,Math.min(rt[1]+nt,et)]])}return tt()}function tany(i){return tan((halfPi+i)/2)}function conicConformalRaw(i,e){var o=cos$1(i),d=i===e?sin$1(i):log$1(o/cos$1(e))/log$1(tany(e)/tany(i)),h=o*pow$1(tany(i),d)/d;if(!d)return mercatorRaw;function g(b,$){h>0?$<-halfPi+epsilon$1&&($=-halfPi+epsilon$1):$>halfPi-epsilon$1&&($=halfPi-epsilon$1);var j=h/pow$1(tany($),d);return[j*sin$1(d*b),h-j*cos$1(d*b)]}return g.invert=function(b,$){var j=h-$,et=sign$1(d)*sqrt$1(b*b+j*j),tt=atan2(b,abs(j))*sign$1(j);return j*d<0&&(tt-=pi$2*sign$1(b)*sign$1(j)),[tt/d,2*atan(pow$1(h/et,1/d))-halfPi]},g}function geoConicConformal(){return conicProjection$1(conicConformalRaw).scale(109.5).parallels([30,30])}function equirectangularRaw(i,e){return[i,e]}equirectangularRaw.invert=equirectangularRaw;function geoEquirectangular(){return projection$1(equirectangularRaw).scale(152.63)}function conicEquidistantRaw(i,e){var o=cos$1(i),d=i===e?sin$1(i):(o-cos$1(e))/(e-i),h=o/d+i;if(abs(d)<epsilon$1)return equirectangularRaw;function g(b,$){var j=h-$,et=d*b;return[j*sin$1(et),h-j*cos$1(et)]}return g.invert=function(b,$){var j=h-$,et=atan2(b,abs(j))*sign$1(j);return j*d<0&&(et-=pi$2*sign$1(b)*sign$1(j)),[et/d,h-sign$1(d)*sqrt$1(b*b+j*j)]},g}function geoConicEquidistant(){return conicProjection$1(conicEquidistantRaw).scale(131.154).center([0,13.9389])}var A1=1.340264,A2=-.081106,A3=893e-6,A4=.003796,M=sqrt$1(3)/2,iterations=12;function equalEarthRaw(i,e){var o=asin(M*sin$1(e)),d=o*o,h=d*d*d;return[i*cos$1(o)/(M*(A1+3*A2*d+h*(7*A3+9*A4*d))),o*(A1+A2*d+h*(A3+A4*d))]}equalEarthRaw.invert=function(i,e){for(var o=e,d=o*o,h=d*d*d,g=0,b,$,j;g<iterations&&($=o*(A1+A2*d+h*(A3+A4*d))-e,j=A1+3*A2*d+h*(7*A3+9*A4*d),o-=b=$/j,d=o*o,h=d*d*d,!(abs(b)<epsilon2));++g);return[M*i*(A1+3*A2*d+h*(7*A3+9*A4*d))/cos$1(o),asin(sin$1(o)/M)]};function geoEqualEarth(){return projection$1(equalEarthRaw).scale(177.158)}function gnomonicRaw(i,e){var o=cos$1(e),d=cos$1(i)*o;return[o*sin$1(i)/d,sin$1(e)/d]}gnomonicRaw.invert=azimuthalInvert(atan);function geoGnomonic(){return projection$1(gnomonicRaw).scale(144.049).clipAngle(60)}function orthographicRaw(i,e){return[cos$1(e)*sin$1(i),sin$1(e)]}orthographicRaw.invert=azimuthalInvert(asin);function geoOrthographic(){return projection$1(orthographicRaw).scale(249.5).clipAngle(90+epsilon$1)}function stereographicRaw(i,e){var o=cos$1(e),d=1+cos$1(i)*o;return[o*sin$1(i)/d,sin$1(e)/d]}stereographicRaw.invert=azimuthalInvert(function(i){return 2*atan(i)});function geoStereographic(){return projection$1(stereographicRaw).scale(250).clipAngle(142)}function transverseMercatorRaw(i,e){return[log$1(tan((halfPi+e)/2)),-i]}transverseMercatorRaw.invert=function(i,e){return[-e,2*atan(exp(i))-halfPi]};function geoTransverseMercator(){var i=mercatorProjection(transverseMercatorRaw),e=i.center,o=i.rotate;return i.center=function(d){return arguments.length?e([-d[1],d[0]]):(d=e(),[d[1],-d[0]])},i.rotate=function(d){return arguments.length?o([d[0],d[1],d.length>2?d[2]+90:90]):(d=o(),[d[0],d[1],d[2]-90])},o([0,0,90]).scale(159.155)}function defaultSeparation$1(i,e){return i.parent===e.parent?1:2}function meanX(i){return i.reduce(meanXReduce,0)/i.length}function meanXReduce(i,e){return i+e.x}function maxY(i){return 1+i.reduce(maxYReduce,0)}function maxYReduce(i,e){return Math.max(i,e.y)}function leafLeft(i){for(var e;e=i.children;)i=e[0];return i}function leafRight(i){for(var e;e=i.children;)i=e[e.length-1];return i}function Cluster(){var i=defaultSeparation$1,e=1,o=1,d=!1;function h(g){var b,$=0;g.eachAfter(function(rt){var ot=rt.children;ot?(rt.x=meanX(ot),rt.y=maxY(ot)):(rt.x=b?$+=i(rt,b):0,rt.y=0,b=rt)});var j=leafLeft(g),et=leafRight(g),tt=j.x-i(j,et)/2,nt=et.x+i(et,j)/2;return g.eachAfter(d?function(rt){rt.x=(rt.x-g.x)*e,rt.y=(g.y-rt.y)*o}:function(rt){rt.x=(rt.x-tt)/(nt-tt)*e,rt.y=(1-(g.y?rt.y/g.y:1))*o})}return h.separation=function(g){return arguments.length?(i=g,h):i},h.size=function(g){return arguments.length?(d=!1,e=+g[0],o=+g[1],h):d?null:[e,o]},h.nodeSize=function(g){return arguments.length?(d=!0,e=+g[0],o=+g[1],h):d?[e,o]:null},h}function count(i){var e=0,o=i.children,d=o&&o.length;if(!d)e=1;else for(;--d>=0;)e+=o[d].value;i.value=e}function node_count(){return this.eachAfter(count)}function node_each(i,e){let o=-1;for(const d of this)i.call(e,d,++o,this);return this}function node_eachBefore(i,e){for(var o=this,d=[o],h,g,b=-1;o=d.pop();)if(i.call(e,o,++b,this),h=o.children)for(g=h.length-1;g>=0;--g)d.push(h[g]);return this}function node_eachAfter(i,e){for(var o=this,d=[o],h=[],g,b,$,j=-1;o=d.pop();)if(h.push(o),g=o.children)for(b=0,$=g.length;b<$;++b)d.push(g[b]);for(;o=h.pop();)i.call(e,o,++j,this);return this}function node_find(i,e){let o=-1;for(const d of this)if(i.call(e,d,++o,this))return d}function node_sum(i){return this.eachAfter(function(e){for(var o=+i(e.data)||0,d=e.children,h=d&&d.length;--h>=0;)o+=d[h].value;e.value=o})}function node_sort(i){return this.eachBefore(function(e){e.children&&e.children.sort(i)})}function node_path(i){for(var e=this,o=leastCommonAncestor(e,i),d=[e];e!==o;)e=e.parent,d.push(e);for(var h=d.length;i!==o;)d.splice(h,0,i),i=i.parent;return d}function leastCommonAncestor(i,e){if(i===e)return i;var o=i.ancestors(),d=e.ancestors(),h=null;for(i=o.pop(),e=d.pop();i===e;)h=i,i=o.pop(),e=d.pop();return h}function node_ancestors(){for(var i=this,e=[i];i=i.parent;)e.push(i);return e}function node_descendants(){return Array.from(this)}function node_leaves(){var i=[];return this.eachBefore(function(e){e.children||i.push(e)}),i}function node_links(){var i=this,e=[];return i.each(function(o){o!==i&&e.push({source:o.parent,target:o})}),e}function*node_iterator(){var i=this,e,o=[i],d,h,g;do for(e=o.reverse(),o=[];i=e.pop();)if(yield i,d=i.children)for(h=0,g=d.length;h<g;++h)o.push(d[h]);while(o.length)}function hierarchy(i,e){i instanceof Map?(i=[void 0,i],e===void 0&&(e=mapChildren)):e===void 0&&(e=objectChildren);for(var o=new Node(i),d,h=[o],g,b,$,j;d=h.pop();)if((b=e(d.data))&&(j=(b=Array.from(b)).length))for(d.children=b,$=j-1;$>=0;--$)h.push(g=b[$]=new Node(b[$])),g.parent=d,g.depth=d.depth+1;return o.eachBefore(computeHeight)}function node_copy(){return hierarchy(this).eachBefore(copyData)}function objectChildren(i){return i.children}function mapChildren(i){return Array.isArray(i)?i[1]:null}function copyData(i){i.data.value!==void 0&&(i.value=i.data.value),i.data=i.data.data}function computeHeight(i){var e=0;do i.height=e;while((i=i.parent)&&i.height<++e)}function Node(i){this.data=i,this.depth=this.height=0,this.parent=null}Node.prototype=hierarchy.prototype={constructor:Node,count:node_count,each:node_each,eachAfter:node_eachAfter,eachBefore:node_eachBefore,find:node_find,sum:node_sum,sort:node_sort,path:node_path,ancestors:node_ancestors,descendants:node_descendants,leaves:node_leaves,links:node_links,copy:node_copy,[Symbol.iterator]:node_iterator};function optional(i){return i==null?null:required(i)}function required(i){if(typeof i!="function")throw new Error;return i}var preroot={depth:-1},ambiguous={},imputed={};function defaultId(i){return i.id}function defaultParentId(i){return i.parentId}function stratify(){var i=defaultId,e=defaultParentId,o;function d(h){var g=Array.from(h),b=i,$=e,j,et,tt,nt,rt,ot,st,bt,vt=new Map;if(o!=null){const at=g.map((wt,At)=>normalize$2(o(wt,At,h))),ut=at.map(parentof),$t=new Set(at).add("");for(const wt of ut)$t.has(wt)||($t.add(wt),at.push(wt),ut.push(parentof(wt)),g.push(imputed));b=(wt,At)=>at[At],$=(wt,At)=>ut[At]}for(tt=0,j=g.length;tt<j;++tt)et=g[tt],ot=g[tt]=new Node(et),(st=b(et,tt,h))!=null&&(st+="")&&(bt=ot.id=st,vt.set(bt,vt.has(bt)?ambiguous:ot)),(st=$(et,tt,h))!=null&&(st+="")&&(ot.parent=st);for(tt=0;tt<j;++tt)if(ot=g[tt],st=ot.parent){if(rt=vt.get(st),!rt)throw new Error("missing: "+st);if(rt===ambiguous)throw new Error("ambiguous: "+st);rt.children?rt.children.push(ot):rt.children=[ot],ot.parent=rt}else{if(nt)throw new Error("multiple roots");nt=ot}if(!nt)throw new Error("no root");if(o!=null){for(;nt.data===imputed&&nt.children.length===1;)nt=nt.children[0],--j;for(let at=g.length-1;at>=0&&(ot=g[at],ot.data===imputed);--at)ot.data=null}if(nt.parent=preroot,nt.eachBefore(function(at){at.depth=at.parent.depth+1,--j}).eachBefore(computeHeight),nt.parent=null,j>0)throw new Error("cycle");return nt}return d.id=function(h){return arguments.length?(i=optional(h),d):i},d.parentId=function(h){return arguments.length?(e=optional(h),d):e},d.path=function(h){return arguments.length?(o=optional(h),d):o},d}function normalize$2(i){i=`${i}`;let e=i.length;return slash$1(i,e-1)&&!slash$1(i,e-2)&&(i=i.slice(0,-1)),i[0]==="/"?i:`/${i}`}function parentof(i){let e=i.length;if(e<2)return"";for(;--e>1&&!slash$1(i,e););return i.slice(0,e)}function slash$1(i,e){if(i[e]==="/"){let o=0;for(;e>0&&i[--e]==="\\";)++o;if(!(o&1))return!0}return!1}function defaultSeparation(i,e){return i.parent===e.parent?1:2}function nextLeft(i){var e=i.children;return e?e[0]:i.t}function nextRight(i){var e=i.children;return e?e[e.length-1]:i.t}function moveSubtree(i,e,o){var d=o/(e.i-i.i);e.c-=d,e.s+=o,i.c+=d,e.z+=o,e.m+=o}function executeShifts(i){for(var e=0,o=0,d=i.children,h=d.length,g;--h>=0;)g=d[h],g.z+=e,g.m+=e,e+=g.s+(o+=g.c)}function nextAncestor(i,e,o){return i.a.parent===e.parent?i.a:o}function TreeNode(i,e){this._=i,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}TreeNode.prototype=Object.create(Node.prototype);function treeRoot(i){for(var e=new TreeNode(i,0),o,d=[e],h,g,b,$;o=d.pop();)if(g=o._.children)for(o.children=new Array($=g.length),b=$-1;b>=0;--b)d.push(h=o.children[b]=new TreeNode(g[b],b)),h.parent=o;return(e.parent=new TreeNode(null,0)).children=[e],e}function Tree(){var i=defaultSeparation,e=1,o=1,d=null;function h(et){var tt=treeRoot(et);if(tt.eachAfter(g),tt.parent.m=-tt.z,tt.eachBefore(b),d)et.eachBefore(j);else{var nt=et,rt=et,ot=et;et.eachBefore(function(ut){ut.x<nt.x&&(nt=ut),ut.x>rt.x&&(rt=ut),ut.depth>ot.depth&&(ot=ut)});var st=nt===rt?1:i(nt,rt)/2,bt=st-nt.x,vt=e/(rt.x+st+bt),at=o/(ot.depth||1);et.eachBefore(function(ut){ut.x=(ut.x+bt)*vt,ut.y=ut.depth*at})}return et}function g(et){var tt=et.children,nt=et.parent.children,rt=et.i?nt[et.i-1]:null;if(tt){executeShifts(et);var ot=(tt[0].z+tt[tt.length-1].z)/2;rt?(et.z=rt.z+i(et._,rt._),et.m=et.z-ot):et.z=ot}else rt&&(et.z=rt.z+i(et._,rt._));et.parent.A=$(et,rt,et.parent.A||nt[0])}function b(et){et._.x=et.z+et.parent.m,et.m+=et.parent.m}function $(et,tt,nt){if(tt){for(var rt=et,ot=et,st=tt,bt=rt.parent.children[0],vt=rt.m,at=ot.m,ut=st.m,$t=bt.m,wt;st=nextRight(st),rt=nextLeft(rt),st&&rt;)bt=nextLeft(bt),ot=nextRight(ot),ot.a=et,wt=st.z+ut-rt.z-vt+i(st._,rt._),wt>0&&(moveSubtree(nextAncestor(st,et,nt),et,wt),vt+=wt,at+=wt),ut+=st.m,vt+=rt.m,$t+=bt.m,at+=ot.m;st&&!nextRight(ot)&&(ot.t=st,ot.m+=ut-at),rt&&!nextLeft(bt)&&(bt.t=rt,bt.m+=vt-$t,nt=et)}return nt}function j(et){et.x*=e,et.y=et.depth*o}return h.separation=function(et){return arguments.length?(i=et,h):i},h.size=function(et){return arguments.length?(d=!1,e=+et[0],o=+et[1],h):d?null:[e,o]},h.nodeSize=function(et){return arguments.length?(d=!0,e=+et[0],o=+et[1],h):d?[e,o]:null},h}const mul=1664525,inc=1013904223,eps=1/4294967296;function lcg(i=Math.random()){let e=(0<=i&&i<1?i/eps:Math.abs(i))|0;return()=>(e=mul*e+inc|0,eps*(e>>>0))}function initRange(i,e){switch(arguments.length){case 0:break;case 1:this.range(i);break;default:this.range(e).domain(i);break}return this}function initInterpolator(i,e){switch(arguments.length){case 0:break;case 1:{typeof i=="function"?this.interpolator(i):this.range(i);break}default:{this.domain(i),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const implicit=Symbol("implicit");function ordinal(){var i=new InternMap,e=[],o=[],d=implicit;function h(g){let b=i.get(g);if(b===void 0){if(d!==implicit)return d;i.set(g,b=e.push(g)-1)}return o[b%o.length]}return h.domain=function(g){if(!arguments.length)return e.slice();e=[],i=new InternMap;for(const b of g)i.has(b)||i.set(b,e.push(b)-1);return h},h.range=function(g){return arguments.length?(o=Array.from(g),h):o.slice()},h.unknown=function(g){return arguments.length?(d=g,h):d},h.copy=function(){return ordinal(e,o).unknown(d)},initRange.apply(h,arguments),h}function band(){var i=ordinal().unknown(void 0),e=i.domain,o=i.range,d=0,h=1,g,b,$=!1,j=0,et=0,tt=.5;delete i.unknown;function nt(){var rt=e().length,ot=h<d,st=ot?h:d,bt=ot?d:h;g=(bt-st)/Math.max(1,rt-j+et*2),$&&(g=Math.floor(g)),st+=(bt-st-g*(rt-j))*tt,b=g*(1-j),$&&(st=Math.round(st),b=Math.round(b));var vt=range$1(rt).map(function(at){return st+g*at});return o(ot?vt.reverse():vt)}return i.domain=function(rt){return arguments.length?(e(rt),nt()):e()},i.range=function(rt){return arguments.length?([d,h]=rt,d=+d,h=+h,nt()):[d,h]},i.rangeRound=function(rt){return[d,h]=rt,d=+d,h=+h,$=!0,nt()},i.bandwidth=function(){return b},i.step=function(){return g},i.round=function(rt){return arguments.length?($=!!rt,nt()):$},i.padding=function(rt){return arguments.length?(j=Math.min(1,et=+rt),nt()):j},i.paddingInner=function(rt){return arguments.length?(j=Math.min(1,rt),nt()):j},i.paddingOuter=function(rt){return arguments.length?(et=+rt,nt()):et},i.align=function(rt){return arguments.length?(tt=Math.max(0,Math.min(1,rt)),nt()):tt},i.copy=function(){return band(e(),[d,h]).round($).paddingInner(j).paddingOuter(et).align(tt)},initRange.apply(nt(),arguments)}function pointish(i){var e=i.copy;return i.padding=i.paddingOuter,delete i.paddingInner,delete i.paddingOuter,i.copy=function(){return pointish(e())},i}function point$4(){return pointish(band.apply(null,arguments).paddingInner(1))}function constants(i){return function(){return i}}function number$3(i){return+i}var unit$1=[0,1];function identity$4(i){return i}function normalize$1(i,e){return(e-=i=+i)?function(o){return(o-i)/e}:constants(isNaN(e)?NaN:.5)}function clamper(i,e){var o;return i>e&&(o=i,i=e,e=o),function(d){return Math.max(i,Math.min(e,d))}}function bimap(i,e,o){var d=i[0],h=i[1],g=e[0],b=e[1];return h<d?(d=normalize$1(h,d),g=o(b,g)):(d=normalize$1(d,h),g=o(g,b)),function($){return g(d($))}}function polymap(i,e,o){var d=Math.min(i.length,e.length)-1,h=new Array(d),g=new Array(d),b=-1;for(i[d]<i[0]&&(i=i.slice().reverse(),e=e.slice().reverse());++b<d;)h[b]=normalize$1(i[b],i[b+1]),g[b]=o(e[b],e[b+1]);return function($){var j=bisect(i,$,1,d)-1;return g[j](h[j]($))}}function copy$3(i,e){return e.domain(i.domain()).range(i.range()).interpolate(i.interpolate()).clamp(i.clamp()).unknown(i.unknown())}function transformer$1(){var i=unit$1,e=unit$1,o=interpolate$1,d,h,g,b=identity$4,$,j,et;function tt(){var rt=Math.min(i.length,e.length);return b!==identity$4&&(b=clamper(i[0],i[rt-1])),$=rt>2?polymap:bimap,j=et=null,nt}function nt(rt){return rt==null||isNaN(rt=+rt)?g:(j||(j=$(i.map(d),e,o)))(d(b(rt)))}return nt.invert=function(rt){return b(h((et||(et=$(e,i.map(d),interpolateNumber)))(rt)))},nt.domain=function(rt){return arguments.length?(i=Array.from(rt,number$3),tt()):i.slice()},nt.range=function(rt){return arguments.length?(e=Array.from(rt),tt()):e.slice()},nt.rangeRound=function(rt){return e=Array.from(rt),o=interpolateRound,tt()},nt.clamp=function(rt){return arguments.length?(b=rt?!0:identity$4,tt()):b!==identity$4},nt.interpolate=function(rt){return arguments.length?(o=rt,tt()):o},nt.unknown=function(rt){return arguments.length?(g=rt,nt):g},function(rt,ot){return d=rt,h=ot,tt()}}function continuous(){return transformer$1()(identity$4,identity$4)}function tickFormat(i,e,o,d){var h=tickStep(i,e,o),g;switch(d=formatSpecifier(d??",f"),d.type){case"s":{var b=Math.max(Math.abs(i),Math.abs(e));return d.precision==null&&!isNaN(g=precisionPrefix(h,b))&&(d.precision=g),formatPrefix(d,b)}case"":case"e":case"g":case"p":case"r":{d.precision==null&&!isNaN(g=precisionRound(h,Math.max(Math.abs(i),Math.abs(e))))&&(d.precision=g-(d.type==="e"));break}case"f":case"%":{d.precision==null&&!isNaN(g=precisionFixed(h))&&(d.precision=g-(d.type==="%")*2);break}}return format(d)}function linearish(i){var e=i.domain;return i.ticks=function(o){var d=e();return ticks(d[0],d[d.length-1],o??10)},i.tickFormat=function(o,d){var h=e();return tickFormat(h[0],h[h.length-1],o??10,d)},i.nice=function(o){o==null&&(o=10);var d=e(),h=0,g=d.length-1,b=d[h],$=d[g],j,et,tt=10;for($<b&&(et=b,b=$,$=et,et=h,h=g,g=et);tt-- >0;){if(et=tickIncrement(b,$,o),et===j)return d[h]=b,d[g]=$,e(d);if(et>0)b=Math.floor(b/et)*et,$=Math.ceil($/et)*et;else if(et<0)b=Math.ceil(b*et)/et,$=Math.floor($*et)/et;else break;j=et}return i},i}function linear(){var i=continuous();return i.copy=function(){return copy$3(i,linear())},initRange.apply(i,arguments),linearish(i)}function identity$3(i){var e;function o(d){return d==null||isNaN(d=+d)?e:d}return o.invert=o,o.domain=o.range=function(d){return arguments.length?(i=Array.from(d,number$3),o):i.slice()},o.unknown=function(d){return arguments.length?(e=d,o):e},o.copy=function(){return identity$3(i).unknown(e)},i=arguments.length?Array.from(i,number$3):[0,1],linearish(o)}function nice(i,e){i=i.slice();var o=0,d=i.length-1,h=i[o],g=i[d],b;return g<h&&(b=o,o=d,d=b,b=h,h=g,g=b),i[o]=e.floor(h),i[d]=e.ceil(g),i}function transformLog$1(i){return Math.log(i)}function transformExp(i){return Math.exp(i)}function transformLogn(i){return-Math.log(-i)}function transformExpn(i){return-Math.exp(-i)}function pow10(i){return isFinite(i)?+("1e"+i):i<0?0:i}function powp(i){return i===10?pow10:i===Math.E?Math.exp:e=>Math.pow(i,e)}function logp(i){return i===Math.E?Math.log:i===10&&Math.log10||i===2&&Math.log2||(i=Math.log(i),e=>Math.log(e)/i)}function reflect(i){return(e,o)=>-i(-e,o)}function loggish(i){const e=i(transformLog$1,transformExp),o=e.domain;let d=10,h,g;function b(){return h=logp(d),g=powp(d),o()[0]<0?(h=reflect(h),g=reflect(g),i(transformLogn,transformExpn)):i(transformLog$1,transformExp),e}return e.base=function($){return arguments.length?(d=+$,b()):d},e.domain=function($){return arguments.length?(o($),b()):o()},e.ticks=$=>{const j=o();let et=j[0],tt=j[j.length-1];const nt=tt<et;nt&&([et,tt]=[tt,et]);let rt=h(et),ot=h(tt),st,bt;const vt=$==null?10:+$;let at=[];if(!(d%1)&&ot-rt<vt){if(rt=Math.floor(rt),ot=Math.ceil(ot),et>0){for(;rt<=ot;++rt)for(st=1;st<d;++st)if(bt=rt<0?st/g(-rt):st*g(rt),!(bt<et)){if(bt>tt)break;at.push(bt)}}else for(;rt<=ot;++rt)for(st=d-1;st>=1;--st)if(bt=rt>0?st/g(-rt):st*g(rt),!(bt<et)){if(bt>tt)break;at.push(bt)}at.length*2<vt&&(at=ticks(et,tt,vt))}else at=ticks(rt,ot,Math.min(ot-rt,vt)).map(g);return nt?at.reverse():at},e.tickFormat=($,j)=>{if($==null&&($=10),j==null&&(j=d===10?"s":","),typeof j!="function"&&(!(d%1)&&(j=formatSpecifier(j)).precision==null&&(j.trim=!0),j=format(j)),$===1/0)return j;const et=Math.max(1,d*$/e.ticks().length);return tt=>{let nt=tt/g(Math.round(h(tt)));return nt*d<d-.5&&(nt*=d),nt<=et?j(tt):""}},e.nice=()=>o(nice(o(),{floor:$=>g(Math.floor(h($))),ceil:$=>g(Math.ceil(h($)))})),e}function log(){const i=loggish(transformer$1()).domain([1,10]);return i.copy=()=>copy$3(i,log()).base(i.base()),initRange.apply(i,arguments),i}function transformSymlog$1(i){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/i))}}function transformSymexp(i){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*i}}function symlogish(i){var e=1,o=i(transformSymlog$1(e),transformSymexp(e));return o.constant=function(d){return arguments.length?i(transformSymlog$1(e=+d),transformSymexp(e)):e},linearish(o)}function symlog(){var i=symlogish(transformer$1());return i.copy=function(){return copy$3(i,symlog()).constant(i.constant())},initRange.apply(i,arguments)}function transformPow$1(i){return function(e){return e<0?-Math.pow(-e,i):Math.pow(e,i)}}function transformSqrt$1(i){return i<0?-Math.sqrt(-i):Math.sqrt(i)}function transformSquare(i){return i<0?-i*i:i*i}function powish(i){var e=i(identity$4,identity$4),o=1;function d(){return o===1?i(identity$4,identity$4):o===.5?i(transformSqrt$1,transformSquare):i(transformPow$1(o),transformPow$1(1/o))}return e.exponent=function(h){return arguments.length?(o=+h,d()):o},linearish(e)}function pow(){var i=powish(transformer$1());return i.copy=function(){return copy$3(i,pow()).exponent(i.exponent())},initRange.apply(i,arguments),i}function quantile(){var i=[],e=[],o=[],d;function h(){var b=0,$=Math.max(1,e.length);for(o=new Array($-1);++b<$;)o[b-1]=quantileSorted(i,b/$);return g}function g(b){return b==null||isNaN(b=+b)?d:e[bisect(o,b)]}return g.invertExtent=function(b){var $=e.indexOf(b);return $<0?[NaN,NaN]:[$>0?o[$-1]:i[0],$<o.length?o[$]:i[i.length-1]]},g.domain=function(b){if(!arguments.length)return i.slice();i=[];for(let $ of b)$!=null&&!isNaN($=+$)&&i.push($);return i.sort(ascending$2),h()},g.range=function(b){return arguments.length?(e=Array.from(b),h()):e.slice()},g.unknown=function(b){return arguments.length?(d=b,g):d},g.quantiles=function(){return o.slice()},g.copy=function(){return quantile().domain(i).range(e).unknown(d)},initRange.apply(g,arguments)}function threshold(){var i=[.5],e=[0,1],o,d=1;function h(g){return g!=null&&g<=g?e[bisect(i,g,0,d)]:o}return h.domain=function(g){return arguments.length?(i=Array.from(g),d=Math.min(i.length,e.length-1),h):i.slice()},h.range=function(g){return arguments.length?(e=Array.from(g),d=Math.min(i.length,e.length-1),h):e.slice()},h.invertExtent=function(g){var b=e.indexOf(g);return[i[b-1],i[b]]},h.unknown=function(g){return arguments.length?(o=g,h):o},h.copy=function(){return threshold().domain(i).range(e).unknown(o)},initRange.apply(h,arguments)}const t0=new Date,t1=new Date;function timeInterval(i,e,o,d){function h(g){return i(g=arguments.length===0?new Date:new Date(+g)),g}return h.floor=g=>(i(g=new Date(+g)),g),h.ceil=g=>(i(g=new Date(g-1)),e(g,1),i(g),g),h.round=g=>{const b=h(g),$=h.ceil(g);return g-b<$-g?b:$},h.offset=(g,b)=>(e(g=new Date(+g),b==null?1:Math.floor(b)),g),h.range=(g,b,$)=>{const j=[];if(g=h.ceil(g),$=$==null?1:Math.floor($),!(g<b)||!($>0))return j;let et;do j.push(et=new Date(+g)),e(g,$),i(g);while(et<g&&g<b);return j},h.filter=g=>timeInterval(b=>{if(b>=b)for(;i(b),!g(b);)b.setTime(b-1)},(b,$)=>{if(b>=b)if($<0)for(;++$<=0;)for(;e(b,-1),!g(b););else for(;--$>=0;)for(;e(b,1),!g(b););}),o&&(h.count=(g,b)=>(t0.setTime(+g),t1.setTime(+b),i(t0),i(t1),Math.floor(o(t0,t1))),h.every=g=>(g=Math.floor(g),!isFinite(g)||!(g>0)?null:g>1?h.filter(d?b=>d(b)%g===0:b=>h.count(0,b)%g===0):h)),h}const millisecond=timeInterval(()=>{},(i,e)=>{i.setTime(+i+e)},(i,e)=>e-i);millisecond.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?timeInterval(e=>{e.setTime(Math.floor(e/i)*i)},(e,o)=>{e.setTime(+e+o*i)},(e,o)=>(o-e)/i):millisecond);millisecond.range;const durationSecond$1=1e3,durationMinute$1=durationSecond$1*60,durationHour$1=durationMinute$1*60,durationDay$1=durationHour$1*24,durationWeek$1=durationDay$1*7,durationMonth$1=durationDay$1*30,durationYear$1=durationDay$1*365,second$1=timeInterval(i=>{i.setTime(i-i.getMilliseconds())},(i,e)=>{i.setTime(+i+e*durationSecond$1)},(i,e)=>(e-i)/durationSecond$1,i=>i.getUTCSeconds());second$1.range;const timeMinute=timeInterval(i=>{i.setTime(i-i.getMilliseconds()-i.getSeconds()*durationSecond$1)},(i,e)=>{i.setTime(+i+e*durationMinute$1)},(i,e)=>(e-i)/durationMinute$1,i=>i.getMinutes());timeMinute.range;const utcMinute=timeInterval(i=>{i.setUTCSeconds(0,0)},(i,e)=>{i.setTime(+i+e*durationMinute$1)},(i,e)=>(e-i)/durationMinute$1,i=>i.getUTCMinutes());utcMinute.range;const timeHour=timeInterval(i=>{i.setTime(i-i.getMilliseconds()-i.getSeconds()*durationSecond$1-i.getMinutes()*durationMinute$1)},(i,e)=>{i.setTime(+i+e*durationHour$1)},(i,e)=>(e-i)/durationHour$1,i=>i.getHours());timeHour.range;const utcHour=timeInterval(i=>{i.setUTCMinutes(0,0,0)},(i,e)=>{i.setTime(+i+e*durationHour$1)},(i,e)=>(e-i)/durationHour$1,i=>i.getUTCHours());utcHour.range;const timeDay=timeInterval(i=>i.setHours(0,0,0,0),(i,e)=>i.setDate(i.getDate()+e),(i,e)=>(e-i-(e.getTimezoneOffset()-i.getTimezoneOffset())*durationMinute$1)/durationDay$1,i=>i.getDate()-1);timeDay.range;const utcDay=timeInterval(i=>{i.setUTCHours(0,0,0,0)},(i,e)=>{i.setUTCDate(i.getUTCDate()+e)},(i,e)=>(e-i)/durationDay$1,i=>i.getUTCDate()-1);utcDay.range;const unixDay=timeInterval(i=>{i.setUTCHours(0,0,0,0)},(i,e)=>{i.setUTCDate(i.getUTCDate()+e)},(i,e)=>(e-i)/durationDay$1,i=>Math.floor(i/durationDay$1));unixDay.range;function timeWeekday(i){return timeInterval(e=>{e.setDate(e.getDate()-(e.getDay()+7-i)%7),e.setHours(0,0,0,0)},(e,o)=>{e.setDate(e.getDate()+o*7)},(e,o)=>(o-e-(o.getTimezoneOffset()-e.getTimezoneOffset())*durationMinute$1)/durationWeek$1)}const timeSunday=timeWeekday(0),timeMonday=timeWeekday(1),timeTuesday=timeWeekday(2),timeWednesday=timeWeekday(3),timeThursday=timeWeekday(4),timeFriday=timeWeekday(5),timeSaturday=timeWeekday(6);timeSunday.range;timeMonday.range;timeTuesday.range;timeWednesday.range;timeThursday.range;timeFriday.range;timeSaturday.range;function utcWeekday(i){return timeInterval(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-i)%7),e.setUTCHours(0,0,0,0)},(e,o)=>{e.setUTCDate(e.getUTCDate()+o*7)},(e,o)=>(o-e)/durationWeek$1)}const utcSunday=utcWeekday(0),utcMonday=utcWeekday(1),utcTuesday=utcWeekday(2),utcWednesday=utcWeekday(3),utcThursday=utcWeekday(4),utcFriday=utcWeekday(5),utcSaturday=utcWeekday(6);utcSunday.range;utcMonday.range;utcTuesday.range;utcWednesday.range;utcThursday.range;utcFriday.range;utcSaturday.range;const timeMonth=timeInterval(i=>{i.setDate(1),i.setHours(0,0,0,0)},(i,e)=>{i.setMonth(i.getMonth()+e)},(i,e)=>e.getMonth()-i.getMonth()+(e.getFullYear()-i.getFullYear())*12,i=>i.getMonth());timeMonth.range;const utcMonth=timeInterval(i=>{i.setUTCDate(1),i.setUTCHours(0,0,0,0)},(i,e)=>{i.setUTCMonth(i.getUTCMonth()+e)},(i,e)=>e.getUTCMonth()-i.getUTCMonth()+(e.getUTCFullYear()-i.getUTCFullYear())*12,i=>i.getUTCMonth());utcMonth.range;const timeYear=timeInterval(i=>{i.setMonth(0,1),i.setHours(0,0,0,0)},(i,e)=>{i.setFullYear(i.getFullYear()+e)},(i,e)=>e.getFullYear()-i.getFullYear(),i=>i.getFullYear());timeYear.every=i=>!isFinite(i=Math.floor(i))||!(i>0)?null:timeInterval(e=>{e.setFullYear(Math.floor(e.getFullYear()/i)*i),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,o)=>{e.setFullYear(e.getFullYear()+o*i)});timeYear.range;const utcYear=timeInterval(i=>{i.setUTCMonth(0,1),i.setUTCHours(0,0,0,0)},(i,e)=>{i.setUTCFullYear(i.getUTCFullYear()+e)},(i,e)=>e.getUTCFullYear()-i.getUTCFullYear(),i=>i.getUTCFullYear());utcYear.every=i=>!isFinite(i=Math.floor(i))||!(i>0)?null:timeInterval(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/i)*i),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,o)=>{e.setUTCFullYear(e.getUTCFullYear()+o*i)});utcYear.range;function ticker(i,e,o,d,h,g){const b=[[second$1,1,durationSecond$1],[second$1,5,5*durationSecond$1],[second$1,15,15*durationSecond$1],[second$1,30,30*durationSecond$1],[g,1,durationMinute$1],[g,5,5*durationMinute$1],[g,15,15*durationMinute$1],[g,30,30*durationMinute$1],[h,1,durationHour$1],[h,3,3*durationHour$1],[h,6,6*durationHour$1],[h,12,12*durationHour$1],[d,1,durationDay$1],[d,2,2*durationDay$1],[o,1,durationWeek$1],[e,1,durationMonth$1],[e,3,3*durationMonth$1],[i,1,durationYear$1]];function $(et,tt,nt){const rt=tt<et;rt&&([et,tt]=[tt,et]);const ot=nt&&typeof nt.range=="function"?nt:j(et,tt,nt),st=ot?ot.range(et,+tt+1):[];return rt?st.reverse():st}function j(et,tt,nt){const rt=Math.abs(tt-et)/nt,ot=bisector(([,,vt])=>vt).right(b,rt);if(ot===b.length)return i.every(tickStep(et/durationYear$1,tt/durationYear$1,nt));if(ot===0)return millisecond.every(Math.max(tickStep(et,tt,nt),1));const[st,bt]=b[rt/b[ot-1][2]<b[ot][2]/rt?ot-1:ot];return st.every(bt)}return[$,j]}const[utcTicks,utcTickInterval]=ticker(utcYear,utcMonth,utcSunday,unixDay,utcHour,utcMinute),[timeTicks,timeTickInterval]=ticker(timeYear,timeMonth,timeSunday,timeDay,timeHour,timeMinute);function localDate(i){if(0<=i.y&&i.y<100){var e=new Date(-1,i.m,i.d,i.H,i.M,i.S,i.L);return e.setFullYear(i.y),e}return new Date(i.y,i.m,i.d,i.H,i.M,i.S,i.L)}function utcDate(i){if(0<=i.y&&i.y<100){var e=new Date(Date.UTC(-1,i.m,i.d,i.H,i.M,i.S,i.L));return e.setUTCFullYear(i.y),e}return new Date(Date.UTC(i.y,i.m,i.d,i.H,i.M,i.S,i.L))}function newDate(i,e,o){return{y:i,m:e,d:o,H:0,M:0,S:0,L:0}}function formatLocale(i){var e=i.dateTime,o=i.date,d=i.time,h=i.periods,g=i.days,b=i.shortDays,$=i.months,j=i.shortMonths,et=formatRe(h),tt=formatLookup(h),nt=formatRe(g),rt=formatLookup(g),ot=formatRe(b),st=formatLookup(b),bt=formatRe($),vt=formatLookup($),at=formatRe(j),ut=formatLookup(j),$t={a:Vt,A:Ut,b:Ht,B:Pt,c:null,d:formatDayOfMonth,e:formatDayOfMonth,f:formatMicroseconds,g:formatYearISO,G:formatFullYearISO,H:formatHour24,I:formatHour12,j:formatDayOfYear,L:formatMilliseconds,m:formatMonthNumber,M:formatMinutes,p:Yt,q:Xt,Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:formatSeconds,u:formatWeekdayNumberMonday,U:formatWeekNumberSunday,V:formatWeekNumberISO,w:formatWeekdayNumberSunday,W:formatWeekNumberMonday,x:null,X:null,y:formatYear,Y:formatFullYear,Z:formatZone,"%":formatLiteralPercent},wt={a:wn,A:Mn,b:Cn,B:On,c:null,d:formatUTCDayOfMonth,e:formatUTCDayOfMonth,f:formatUTCMicroseconds,g:formatUTCYearISO,G:formatUTCFullYearISO,H:formatUTCHour24,I:formatUTCHour12,j:formatUTCDayOfYear,L:formatUTCMilliseconds,m:formatUTCMonthNumber,M:formatUTCMinutes,p:vn,q:Nn,Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:formatUTCSeconds,u:formatUTCWeekdayNumberMonday,U:formatUTCWeekNumberSunday,V:formatUTCWeekNumberISO,w:formatUTCWeekdayNumberSunday,W:formatUTCWeekNumberMonday,x:null,X:null,y:formatUTCYear,Y:formatUTCFullYear,Z:formatUTCZone,"%":formatLiteralPercent},At={a:Mt,A:Bt,b:jt,B:zt,c:Nt,d:parseDayOfMonth,e:parseDayOfMonth,f:parseMicroseconds,g:parseYear,G:parseFullYear,H:parseHour24,I:parseHour24,j:parseDayOfYear,L:parseMilliseconds,m:parseMonthNumber,M:parseMinutes,p:kt,q:parseQuarter,Q:parseUnixTimestamp,s:parseUnixTimestampSeconds,S:parseSeconds,u:parseWeekdayNumberMonday,U:parseWeekNumberSunday,V:parseWeekNumberISO,w:parseWeekdayNumberSunday,W:parseWeekNumberMonday,x:Ct,X:Ft,y:parseYear,Y:parseFullYear,Z:parseZone,"%":parseLiteralPercent};$t.x=xt(o,$t),$t.X=xt(d,$t),$t.c=xt(e,$t),wt.x=xt(o,wt),wt.X=xt(d,wt),wt.c=xt(e,wt);function xt(Jt,Bn){return function(Ln){var Zt=[],rr=-1,tr=0,sr=Jt.length,ar,er,ir;for(Ln instanceof Date||(Ln=new Date(+Ln));++rr<sr;)Jt.charCodeAt(rr)===37&&(Zt.push(Jt.slice(tr,rr)),(er=pads[ar=Jt.charAt(++rr)])!=null?ar=Jt.charAt(++rr):er=ar==="e"?" ":"0",(ir=Bn[ar])&&(ar=ir(Ln,er)),Zt.push(ar),tr=rr+1);return Zt.push(Jt.slice(tr,rr)),Zt.join("")}}function Rt(Jt,Bn){return function(Ln){var Zt=newDate(1900,void 0,1),rr=Ot(Zt,Jt,Ln+="",0),tr,sr;if(rr!=Ln.length)return null;if("Q"in Zt)return new Date(Zt.Q);if("s"in Zt)return new Date(Zt.s*1e3+("L"in Zt?Zt.L:0));if(Bn&&!("Z"in Zt)&&(Zt.Z=0),"p"in Zt&&(Zt.H=Zt.H%12+Zt.p*12),Zt.m===void 0&&(Zt.m="q"in Zt?Zt.q:0),"V"in Zt){if(Zt.V<1||Zt.V>53)return null;"w"in Zt||(Zt.w=1),"Z"in Zt?(tr=utcDate(newDate(Zt.y,0,1)),sr=tr.getUTCDay(),tr=sr>4||sr===0?utcMonday.ceil(tr):utcMonday(tr),tr=utcDay.offset(tr,(Zt.V-1)*7),Zt.y=tr.getUTCFullYear(),Zt.m=tr.getUTCMonth(),Zt.d=tr.getUTCDate()+(Zt.w+6)%7):(tr=localDate(newDate(Zt.y,0,1)),sr=tr.getDay(),tr=sr>4||sr===0?timeMonday.ceil(tr):timeMonday(tr),tr=timeDay.offset(tr,(Zt.V-1)*7),Zt.y=tr.getFullYear(),Zt.m=tr.getMonth(),Zt.d=tr.getDate()+(Zt.w+6)%7)}else("W"in Zt||"U"in Zt)&&("w"in Zt||(Zt.w="u"in Zt?Zt.u%7:"W"in Zt?1:0),sr="Z"in Zt?utcDate(newDate(Zt.y,0,1)).getUTCDay():localDate(newDate(Zt.y,0,1)).getDay(),Zt.m=0,Zt.d="W"in Zt?(Zt.w+6)%7+Zt.W*7-(sr+5)%7:Zt.w+Zt.U*7-(sr+6)%7);return"Z"in Zt?(Zt.H+=Zt.Z/100|0,Zt.M+=Zt.Z%100,utcDate(Zt)):localDate(Zt)}}function Ot(Jt,Bn,Ln,Zt){for(var rr=0,tr=Bn.length,sr=Ln.length,ar,er;rr<tr;){if(Zt>=sr)return-1;if(ar=Bn.charCodeAt(rr++),ar===37){if(ar=Bn.charAt(rr++),er=At[ar in pads?Bn.charAt(rr++):ar],!er||(Zt=er(Jt,Ln,Zt))<0)return-1}else if(ar!=Ln.charCodeAt(Zt++))return-1}return Zt}function kt(Jt,Bn,Ln){var Zt=et.exec(Bn.slice(Ln));return Zt?(Jt.p=tt.get(Zt[0].toLowerCase()),Ln+Zt[0].length):-1}function Mt(Jt,Bn,Ln){var Zt=ot.exec(Bn.slice(Ln));return Zt?(Jt.w=st.get(Zt[0].toLowerCase()),Ln+Zt[0].length):-1}function Bt(Jt,Bn,Ln){var Zt=nt.exec(Bn.slice(Ln));return Zt?(Jt.w=rt.get(Zt[0].toLowerCase()),Ln+Zt[0].length):-1}function jt(Jt,Bn,Ln){var Zt=at.exec(Bn.slice(Ln));return Zt?(Jt.m=ut.get(Zt[0].toLowerCase()),Ln+Zt[0].length):-1}function zt(Jt,Bn,Ln){var Zt=bt.exec(Bn.slice(Ln));return Zt?(Jt.m=vt.get(Zt[0].toLowerCase()),Ln+Zt[0].length):-1}function Nt(Jt,Bn,Ln){return Ot(Jt,e,Bn,Ln)}function Ct(Jt,Bn,Ln){return Ot(Jt,o,Bn,Ln)}function Ft(Jt,Bn,Ln){return Ot(Jt,d,Bn,Ln)}function Vt(Jt){return b[Jt.getDay()]}function Ut(Jt){return g[Jt.getDay()]}function Ht(Jt){return j[Jt.getMonth()]}function Pt(Jt){return $[Jt.getMonth()]}function Yt(Jt){return h[+(Jt.getHours()>=12)]}function Xt(Jt){return 1+~~(Jt.getMonth()/3)}function wn(Jt){return b[Jt.getUTCDay()]}function Mn(Jt){return g[Jt.getUTCDay()]}function Cn(Jt){return j[Jt.getUTCMonth()]}function On(Jt){return $[Jt.getUTCMonth()]}function vn(Jt){return h[+(Jt.getUTCHours()>=12)]}function Nn(Jt){return 1+~~(Jt.getUTCMonth()/3)}return{format:function(Jt){var Bn=xt(Jt+="",$t);return Bn.toString=function(){return Jt},Bn},parse:function(Jt){var Bn=Rt(Jt+="",!1);return Bn.toString=function(){return Jt},Bn},utcFormat:function(Jt){var Bn=xt(Jt+="",wt);return Bn.toString=function(){return Jt},Bn},utcParse:function(Jt){var Bn=Rt(Jt+="",!0);return Bn.toString=function(){return Jt},Bn}}}var pads={"-":"",_:" ",0:"0"},numberRe=/^\s*\d+/,percentRe=/^%/,requoteRe=/[\\^$*+?|[\]().{}]/g;function pad(i,e,o){var d=i<0?"-":"",h=(d?-i:i)+"",g=h.length;return d+(g<o?new Array(o-g+1).join(e)+h:h)}function requote(i){return i.replace(requoteRe,"\\$&")}function formatRe(i){return new RegExp("^(?:"+i.map(requote).join("|")+")","i")}function formatLookup(i){return new Map(i.map((e,o)=>[e.toLowerCase(),o]))}function parseWeekdayNumberSunday(i,e,o){var d=numberRe.exec(e.slice(o,o+1));return d?(i.w=+d[0],o+d[0].length):-1}function parseWeekdayNumberMonday(i,e,o){var d=numberRe.exec(e.slice(o,o+1));return d?(i.u=+d[0],o+d[0].length):-1}function parseWeekNumberSunday(i,e,o){var d=numberRe.exec(e.slice(o,o+2));return d?(i.U=+d[0],o+d[0].length):-1}function parseWeekNumberISO(i,e,o){var d=numberRe.exec(e.slice(o,o+2));return d?(i.V=+d[0],o+d[0].length):-1}function parseWeekNumberMonday(i,e,o){var d=numberRe.exec(e.slice(o,o+2));return d?(i.W=+d[0],o+d[0].length):-1}function parseFullYear(i,e,o){var d=numberRe.exec(e.slice(o,o+4));return d?(i.y=+d[0],o+d[0].length):-1}function parseYear(i,e,o){var d=numberRe.exec(e.slice(o,o+2));return d?(i.y=+d[0]+(+d[0]>68?1900:2e3),o+d[0].length):-1}function parseZone(i,e,o){var d=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(o,o+6));return d?(i.Z=d[1]?0:-(d[2]+(d[3]||"00")),o+d[0].length):-1}function parseQuarter(i,e,o){var d=numberRe.exec(e.slice(o,o+1));return d?(i.q=d[0]*3-3,o+d[0].length):-1}function parseMonthNumber(i,e,o){var d=numberRe.exec(e.slice(o,o+2));return d?(i.m=d[0]-1,o+d[0].length):-1}function parseDayOfMonth(i,e,o){var d=numberRe.exec(e.slice(o,o+2));return d?(i.d=+d[0],o+d[0].length):-1}function parseDayOfYear(i,e,o){var d=numberRe.exec(e.slice(o,o+3));return d?(i.m=0,i.d=+d[0],o+d[0].length):-1}function parseHour24(i,e,o){var d=numberRe.exec(e.slice(o,o+2));return d?(i.H=+d[0],o+d[0].length):-1}function parseMinutes(i,e,o){var d=numberRe.exec(e.slice(o,o+2));return d?(i.M=+d[0],o+d[0].length):-1}function parseSeconds(i,e,o){var d=numberRe.exec(e.slice(o,o+2));return d?(i.S=+d[0],o+d[0].length):-1}function parseMilliseconds(i,e,o){var d=numberRe.exec(e.slice(o,o+3));return d?(i.L=+d[0],o+d[0].length):-1}function parseMicroseconds(i,e,o){var d=numberRe.exec(e.slice(o,o+6));return d?(i.L=Math.floor(d[0]/1e3),o+d[0].length):-1}function parseLiteralPercent(i,e,o){var d=percentRe.exec(e.slice(o,o+1));return d?o+d[0].length:-1}function parseUnixTimestamp(i,e,o){var d=numberRe.exec(e.slice(o));return d?(i.Q=+d[0],o+d[0].length):-1}function parseUnixTimestampSeconds(i,e,o){var d=numberRe.exec(e.slice(o));return d?(i.s=+d[0],o+d[0].length):-1}function formatDayOfMonth(i,e){return pad(i.getDate(),e,2)}function formatHour24(i,e){return pad(i.getHours(),e,2)}function formatHour12(i,e){return pad(i.getHours()%12||12,e,2)}function formatDayOfYear(i,e){return pad(1+timeDay.count(timeYear(i),i),e,3)}function formatMilliseconds(i,e){return pad(i.getMilliseconds(),e,3)}function formatMicroseconds(i,e){return formatMilliseconds(i,e)+"000"}function formatMonthNumber(i,e){return pad(i.getMonth()+1,e,2)}function formatMinutes(i,e){return pad(i.getMinutes(),e,2)}function formatSeconds(i,e){return pad(i.getSeconds(),e,2)}function formatWeekdayNumberMonday(i){var e=i.getDay();return e===0?7:e}function formatWeekNumberSunday(i,e){return pad(timeSunday.count(timeYear(i)-1,i),e,2)}function dISO(i){var e=i.getDay();return e>=4||e===0?timeThursday(i):timeThursday.ceil(i)}function formatWeekNumberISO(i,e){return i=dISO(i),pad(timeThursday.count(timeYear(i),i)+(timeYear(i).getDay()===4),e,2)}function formatWeekdayNumberSunday(i){return i.getDay()}function formatWeekNumberMonday(i,e){return pad(timeMonday.count(timeYear(i)-1,i),e,2)}function formatYear(i,e){return pad(i.getFullYear()%100,e,2)}function formatYearISO(i,e){return i=dISO(i),pad(i.getFullYear()%100,e,2)}function formatFullYear(i,e){return pad(i.getFullYear()%1e4,e,4)}function formatFullYearISO(i,e){var o=i.getDay();return i=o>=4||o===0?timeThursday(i):timeThursday.ceil(i),pad(i.getFullYear()%1e4,e,4)}function formatZone(i){var e=i.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+pad(e/60|0,"0",2)+pad(e%60,"0",2)}function formatUTCDayOfMonth(i,e){return pad(i.getUTCDate(),e,2)}function formatUTCHour24(i,e){return pad(i.getUTCHours(),e,2)}function formatUTCHour12(i,e){return pad(i.getUTCHours()%12||12,e,2)}function formatUTCDayOfYear(i,e){return pad(1+utcDay.count(utcYear(i),i),e,3)}function formatUTCMilliseconds(i,e){return pad(i.getUTCMilliseconds(),e,3)}function formatUTCMicroseconds(i,e){return formatUTCMilliseconds(i,e)+"000"}function formatUTCMonthNumber(i,e){return pad(i.getUTCMonth()+1,e,2)}function formatUTCMinutes(i,e){return pad(i.getUTCMinutes(),e,2)}function formatUTCSeconds(i,e){return pad(i.getUTCSeconds(),e,2)}function formatUTCWeekdayNumberMonday(i){var e=i.getUTCDay();return e===0?7:e}function formatUTCWeekNumberSunday(i,e){return pad(utcSunday.count(utcYear(i)-1,i),e,2)}function UTCdISO(i){var e=i.getUTCDay();return e>=4||e===0?utcThursday(i):utcThursday.ceil(i)}function formatUTCWeekNumberISO(i,e){return i=UTCdISO(i),pad(utcThursday.count(utcYear(i),i)+(utcYear(i).getUTCDay()===4),e,2)}function formatUTCWeekdayNumberSunday(i){return i.getUTCDay()}function formatUTCWeekNumberMonday(i,e){return pad(utcMonday.count(utcYear(i)-1,i),e,2)}function formatUTCYear(i,e){return pad(i.getUTCFullYear()%100,e,2)}function formatUTCYearISO(i,e){return i=UTCdISO(i),pad(i.getUTCFullYear()%100,e,2)}function formatUTCFullYear(i,e){return pad(i.getUTCFullYear()%1e4,e,4)}function formatUTCFullYearISO(i,e){var o=i.getUTCDay();return i=o>=4||o===0?utcThursday(i):utcThursday.ceil(i),pad(i.getUTCFullYear()%1e4,e,4)}function formatUTCZone(){return"+0000"}function formatLiteralPercent(){return"%"}function formatUnixTimestamp(i){return+i}function formatUnixTimestampSeconds(i){return Math.floor(+i/1e3)}var locale,timeFormat,utcFormat;defaultLocale({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function defaultLocale(i){return locale=formatLocale(i),timeFormat=locale.format,locale.parse,utcFormat=locale.utcFormat,locale.utcParse,locale}function date(i){return new Date(i)}function number$2(i){return i instanceof Date?+i:+new Date(+i)}function calendar(i,e,o,d,h,g,b,$,j,et){var tt=continuous(),nt=tt.invert,rt=tt.domain,ot=et(".%L"),st=et(":%S"),bt=et("%I:%M"),vt=et("%I %p"),at=et("%a %d"),ut=et("%b %d"),$t=et("%B"),wt=et("%Y");function At(xt){return(j(xt)<xt?ot:$(xt)<xt?st:b(xt)<xt?bt:g(xt)<xt?vt:d(xt)<xt?h(xt)<xt?at:ut:o(xt)<xt?$t:wt)(xt)}return tt.invert=function(xt){return new Date(nt(xt))},tt.domain=function(xt){return arguments.length?rt(Array.from(xt,number$2)):rt().map(date)},tt.ticks=function(xt){var Rt=rt();return i(Rt[0],Rt[Rt.length-1],xt??10)},tt.tickFormat=function(xt,Rt){return Rt==null?At:et(Rt)},tt.nice=function(xt){var Rt=rt();return(!xt||typeof xt.range!="function")&&(xt=e(Rt[0],Rt[Rt.length-1],xt??10)),xt?rt(nice(Rt,xt)):tt},tt.copy=function(){return copy$3(tt,calendar(i,e,o,d,h,g,b,$,j,et))},tt}function time(){return initRange.apply(calendar(timeTicks,timeTickInterval,timeYear,timeMonth,timeSunday,timeDay,timeHour,timeMinute,second$1,timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function utcTime(){return initRange.apply(calendar(utcTicks,utcTickInterval,utcYear,utcMonth,utcSunday,utcDay,utcHour,utcMinute,second$1,utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function copy$2(i,e){return e.domain(i.domain()).interpolator(i.interpolator()).clamp(i.clamp()).unknown(i.unknown())}function transformer(){var i=0,e=.5,o=1,d=1,h,g,b,$,j,et=identity$4,tt,nt=!1,rt;function ot(bt){return isNaN(bt=+bt)?rt:(bt=.5+((bt=+tt(bt))-g)*(d*bt<d*g?$:j),et(nt?Math.max(0,Math.min(1,bt)):bt))}ot.domain=function(bt){return arguments.length?([i,e,o]=bt,h=tt(i=+i),g=tt(e=+e),b=tt(o=+o),$=h===g?0:.5/(g-h),j=g===b?0:.5/(b-g),d=g<h?-1:1,ot):[i,e,o]},ot.clamp=function(bt){return arguments.length?(nt=!!bt,ot):nt},ot.interpolator=function(bt){return arguments.length?(et=bt,ot):et};function st(bt){return function(vt){var at,ut,$t;return arguments.length?([at,ut,$t]=vt,et=piecewise(bt,[at,ut,$t]),ot):[et(0),et(.5),et(1)]}}return ot.range=st(interpolate$1),ot.rangeRound=st(interpolateRound),ot.unknown=function(bt){return arguments.length?(rt=bt,ot):rt},function(bt){return tt=bt,h=bt(i),g=bt(e),b=bt(o),$=h===g?0:.5/(g-h),j=g===b?0:.5/(b-g),d=g<h?-1:1,ot}}function diverging(){var i=linearish(transformer()(identity$4));return i.copy=function(){return copy$2(i,diverging())},initInterpolator.apply(i,arguments)}function divergingLog(){var i=loggish(transformer()).domain([.1,1,10]);return i.copy=function(){return copy$2(i,divergingLog()).base(i.base())},initInterpolator.apply(i,arguments)}function divergingSymlog(){var i=symlogish(transformer());return i.copy=function(){return copy$2(i,divergingSymlog()).constant(i.constant())},initInterpolator.apply(i,arguments)}function divergingPow(){var i=powish(transformer());return i.copy=function(){return copy$2(i,divergingPow()).exponent(i.exponent())},initInterpolator.apply(i,arguments)}function colors(i){for(var e=i.length/6|0,o=new Array(e),d=0;d<e;)o[d]="#"+i.slice(d*6,++d*6);return o}const schemeCategory10=colors("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),schemeAccent=colors("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),schemeDark2=colors("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),schemePaired=colors("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),schemePastel1=colors("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),schemePastel2=colors("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),schemeSet1=colors("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),schemeSet2=colors("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),schemeSet3=colors("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),schemeTableau10=colors("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),ramp$1=i=>rgbBasis(i[i.length-1]);var scheme$q=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(colors);const interpolateBrBG=ramp$1(scheme$q);var scheme$p=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(colors);const interpolatePRGn=ramp$1(scheme$p);var scheme$o=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(colors);const interpolatePiYG=ramp$1(scheme$o);var scheme$n=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(colors);const interpolatePuOr=ramp$1(scheme$n);var scheme$m=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(colors);const interpolateRdBu=ramp$1(scheme$m);var scheme$l=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(colors);const interpolateRdGy=ramp$1(scheme$l);var scheme$k=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(colors);const interpolateRdYlBu=ramp$1(scheme$k);var scheme$j=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(colors);const interpolateRdYlGn=ramp$1(scheme$j);var scheme$i=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(colors);const interpolateSpectral=ramp$1(scheme$i);var scheme$h=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(colors);const interpolateBuGn=ramp$1(scheme$h);var scheme$g=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(colors);const interpolateBuPu=ramp$1(scheme$g);var scheme$f=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(colors);const interpolateGnBu=ramp$1(scheme$f);var scheme$e=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(colors);const interpolateOrRd=ramp$1(scheme$e);var scheme$d=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(colors);const interpolatePuBuGn=ramp$1(scheme$d);var scheme$c=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(colors);const interpolatePuBu=ramp$1(scheme$c);var scheme$b=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(colors);const interpolatePuRd=ramp$1(scheme$b);var scheme$a=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(colors);const interpolateRdPu=ramp$1(scheme$a);var scheme$9=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(colors);const interpolateYlGnBu=ramp$1(scheme$9);var scheme$8=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(colors);const interpolateYlGn=ramp$1(scheme$8);var scheme$7=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(colors);const interpolateYlOrBr=ramp$1(scheme$7);var scheme$6=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(colors);const interpolateYlOrRd=ramp$1(scheme$6);var scheme$5=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(colors);const interpolateBlues=ramp$1(scheme$5);var scheme$4=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(colors);const interpolateGreens=ramp$1(scheme$4);var scheme$3=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(colors);const interpolateGreys=ramp$1(scheme$3);var scheme$2=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(colors);const interpolatePurples=ramp$1(scheme$2);var scheme$1=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(colors);const interpolateReds=ramp$1(scheme$1);var scheme=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(colors);const interpolateOranges=ramp$1(scheme);function interpolateCividis(i){return i=Math.max(0,Math.min(1,i)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-i*(35.34-i*(2381.73-i*(6402.7-i*(7024.72-i*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+i*(170.73+i*(52.82-i*(131.46-i*(176.58-i*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+i*(442.36-i*(2482.43-i*(6167.24-i*(6614.94-i*2475.67)))))))+")"}const interpolateCubehelixDefault=cubehelixLong(cubehelix$1(300,.5,0),cubehelix$1(-240,.5,1));var warm=cubehelixLong(cubehelix$1(-100,.75,.35),cubehelix$1(80,1.5,.8)),cool=cubehelixLong(cubehelix$1(260,.75,.35),cubehelix$1(80,1.5,.8)),c$2=cubehelix$1();function interpolateRainbow(i){(i<0||i>1)&&(i-=Math.floor(i));var e=Math.abs(i-.5);return c$2.h=360*i-100,c$2.s=1.5-1.5*e,c$2.l=.8-.9*e,c$2+""}var c$1=rgb(),pi_1_3=Math.PI/3,pi_2_3=Math.PI*2/3;function interpolateSinebow(i){var e;return i=(.5-i)*Math.PI,c$1.r=255*(e=Math.sin(i))*e,c$1.g=255*(e=Math.sin(i+pi_1_3))*e,c$1.b=255*(e=Math.sin(i+pi_2_3))*e,c$1+""}function interpolateTurbo(i){return i=Math.max(0,Math.min(1,i)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+i*(1172.33-i*(10793.56-i*(33300.12-i*(38394.49-i*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+i*(557.33+i*(1225.33-i*(3574.96-i*(1073.77+i*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+i*(3211.1-i*(15327.97-i*(27814-i*(22569.18-i*6838.66)))))))+")"}function ramp(i){var e=i.length;return function(o){return i[Math.max(0,Math.min(e-1,Math.floor(o*e)))]}}const interpolateViridis=ramp(colors("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var magma=ramp(colors("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),inferno=ramp(colors("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),plasma=ramp(colors("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function constant$2(i){return function(){return i}}const cos=Math.cos,min=Math.min,sin=Math.sin,sqrt=Math.sqrt,epsilon=1e-12,pi$1=Math.PI,tau$1=2*pi$1;function withPath(i){let e=3;return i.digits=function(o){if(!arguments.length)return e;if(o==null)e=null;else{const d=Math.floor(o);if(!(d>=0))throw new RangeError(`invalid digits: ${o}`);e=d}return i},()=>new Path$1(e)}function array(i){return typeof i=="object"&&"length"in i?i:Array.from(i)}function Linear(i){this._context=i}Linear.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(i,e){switch(i=+i,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(i,e):this._context.moveTo(i,e);break;case 1:this._point=2;default:this._context.lineTo(i,e);break}}};function curveLinear(i){return new Linear(i)}function x(i){return i[0]}function y(i){return i[1]}function shapeLine(i,e){var o=constant$2(!0),d=null,h=curveLinear,g=null,b=withPath($);i=typeof i=="function"?i:i===void 0?x:constant$2(i),e=typeof e=="function"?e:e===void 0?y:constant$2(e);function $(j){var et,tt=(j=array(j)).length,nt,rt=!1,ot;for(d==null&&(g=h(ot=b())),et=0;et<=tt;++et)!(et<tt&&o(nt=j[et],et,j))===rt&&((rt=!rt)?g.lineStart():g.lineEnd()),rt&&g.point(+i(nt,et,j),+e(nt,et,j));if(ot)return g=null,ot+""||null}return $.x=function(j){return arguments.length?(i=typeof j=="function"?j:constant$2(+j),$):i},$.y=function(j){return arguments.length?(e=typeof j=="function"?j:constant$2(+j),$):e},$.defined=function(j){return arguments.length?(o=typeof j=="function"?j:constant$2(!!j),$):o},$.curve=function(j){return arguments.length?(h=j,d!=null&&(g=h(d)),$):h},$.context=function(j){return arguments.length?(j==null?d=g=null:g=h(d=j),$):d},$}function shapeArea(i,e,o){var d=null,h=constant$2(!0),g=null,b=curveLinear,$=null,j=withPath(et);i=typeof i=="function"?i:i===void 0?x:constant$2(+i),e=typeof e=="function"?e:constant$2(e===void 0?0:+e),o=typeof o=="function"?o:o===void 0?y:constant$2(+o);function et(nt){var rt,ot,st,bt=(nt=array(nt)).length,vt,at=!1,ut,$t=new Array(bt),wt=new Array(bt);for(g==null&&($=b(ut=j())),rt=0;rt<=bt;++rt){if(!(rt<bt&&h(vt=nt[rt],rt,nt))===at)if(at=!at)ot=rt,$.areaStart(),$.lineStart();else{for($.lineEnd(),$.lineStart(),st=rt-1;st>=ot;--st)$.point($t[st],wt[st]);$.lineEnd(),$.areaEnd()}at&&($t[rt]=+i(vt,rt,nt),wt[rt]=+e(vt,rt,nt),$.point(d?+d(vt,rt,nt):$t[rt],o?+o(vt,rt,nt):wt[rt]))}if(ut)return $=null,ut+""||null}function tt(){return shapeLine().defined(h).curve(b).context(g)}return et.x=function(nt){return arguments.length?(i=typeof nt=="function"?nt:constant$2(+nt),d=null,et):i},et.x0=function(nt){return arguments.length?(i=typeof nt=="function"?nt:constant$2(+nt),et):i},et.x1=function(nt){return arguments.length?(d=nt==null?null:typeof nt=="function"?nt:constant$2(+nt),et):d},et.y=function(nt){return arguments.length?(e=typeof nt=="function"?nt:constant$2(+nt),o=null,et):e},et.y0=function(nt){return arguments.length?(e=typeof nt=="function"?nt:constant$2(+nt),et):e},et.y1=function(nt){return arguments.length?(o=nt==null?null:typeof nt=="function"?nt:constant$2(+nt),et):o},et.lineX0=et.lineY0=function(){return tt().x(i).y(e)},et.lineY1=function(){return tt().x(i).y(o)},et.lineX1=function(){return tt().x(d).y(e)},et.defined=function(nt){return arguments.length?(h=typeof nt=="function"?nt:constant$2(!!nt),et):h},et.curve=function(nt){return arguments.length?(b=nt,g!=null&&($=b(g)),et):b},et.context=function(nt){return arguments.length?(nt==null?g=$=null:$=b(g=nt),et):g},et}class Bump{constructor(e,o){this._context=e,this._x=o}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,o){switch(e=+e,o=+o,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,o):this._context.moveTo(e,o);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,o,e,o):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+o)/2,e,this._y0,e,o);break}}this._x0=e,this._y0=o}}function bumpX(i){return new Bump(i,!0)}function bumpY(i){return new Bump(i,!1)}const sqrt3$3=sqrt(3),symbolAsterisk={draw(i,e){const o=sqrt(e+min(e/28,.75))*.59436,d=o/2,h=d*sqrt3$3;i.moveTo(0,o),i.lineTo(0,-o),i.moveTo(-h,-d),i.lineTo(h,d),i.moveTo(-h,d),i.lineTo(h,-d)}},symbolCircle={draw(i,e){const o=sqrt(e/pi$1);i.moveTo(o,0),i.arc(0,0,o,0,tau$1)}},symbolCross={draw(i,e){const o=sqrt(e/5)/2;i.moveTo(-3*o,-o),i.lineTo(-o,-o),i.lineTo(-o,-3*o),i.lineTo(o,-3*o),i.lineTo(o,-o),i.lineTo(3*o,-o),i.lineTo(3*o,o),i.lineTo(o,o),i.lineTo(o,3*o),i.lineTo(-o,3*o),i.lineTo(-o,o),i.lineTo(-3*o,o),i.closePath()}},tan30=sqrt(1/3),tan30_2=tan30*2,symbolDiamond={draw(i,e){const o=sqrt(e/tan30_2),d=o*tan30;i.moveTo(0,-o),i.lineTo(d,0),i.lineTo(0,o),i.lineTo(-d,0),i.closePath()}},symbolDiamond2={draw(i,e){const o=sqrt(e)*.62625;i.moveTo(0,-o),i.lineTo(o,0),i.lineTo(0,o),i.lineTo(-o,0),i.closePath()}},symbolPlus={draw(i,e){const o=sqrt(e-min(e/7,2))*.87559;i.moveTo(-o,0),i.lineTo(o,0),i.moveTo(0,o),i.lineTo(0,-o)}},symbolSquare={draw(i,e){const o=sqrt(e),d=-o/2;i.rect(d,d,o,o)}},symbolSquare2={draw(i,e){const o=sqrt(e)*.4431;i.moveTo(o,o),i.lineTo(o,-o),i.lineTo(-o,-o),i.lineTo(-o,o),i.closePath()}},ka=.8908130915292852,kr$1=sin(pi$1/10)/sin(7*pi$1/10),kx=sin(tau$1/10)*kr$1,ky=-cos(tau$1/10)*kr$1,symbolStar={draw(i,e){const o=sqrt(e*ka),d=kx*o,h=ky*o;i.moveTo(0,-o),i.lineTo(d,h);for(let g=1;g<5;++g){const b=tau$1*g/5,$=cos(b),j=sin(b);i.lineTo(j*o,-$*o),i.lineTo($*d-j*h,j*d+$*h)}i.closePath()}},sqrt3$2=sqrt(3),symbolTriangle={draw(i,e){const o=-sqrt(e/(sqrt3$2*3));i.moveTo(0,o*2),i.lineTo(-sqrt3$2*o,-o),i.lineTo(sqrt3$2*o,-o),i.closePath()}},sqrt3$1=sqrt(3),symbolTriangle2={draw(i,e){const o=sqrt(e)*.6824,d=o/2,h=o*sqrt3$1/2;i.moveTo(0,-o),i.lineTo(h,d),i.lineTo(-h,d),i.closePath()}},c=-.5,s=sqrt(3)/2,k=1/sqrt(12),a=(k/2+1)*3,symbolWye={draw(i,e){const o=sqrt(e/a),d=o/2,h=o*k,g=d,b=o*k+o,$=-g,j=b;i.moveTo(d,h),i.lineTo(g,b),i.lineTo($,j),i.lineTo(c*d-s*h,s*d+c*h),i.lineTo(c*g-s*b,s*g+c*b),i.lineTo(c*$-s*j,s*$+c*j),i.lineTo(c*d+s*h,c*h-s*d),i.lineTo(c*g+s*b,c*b-s*g),i.lineTo(c*$+s*j,c*j-s*$),i.closePath()}},symbolTimes={draw(i,e){const o=sqrt(e-min(e/6,1.7))*.6189;i.moveTo(-o,-o),i.lineTo(o,o),i.moveTo(-o,o),i.lineTo(o,-o)}},symbolsFill=[symbolCircle,symbolCross,symbolDiamond,symbolSquare,symbolStar,symbolTriangle,symbolWye],symbolsStroke=[symbolCircle,symbolPlus,symbolTimes,symbolTriangle2,symbolAsterisk,symbolSquare2,symbolDiamond2];function noop(){}function point$3(i,e,o){i._context.bezierCurveTo((2*i._x0+i._x1)/3,(2*i._y0+i._y1)/3,(i._x0+2*i._x1)/3,(i._y0+2*i._y1)/3,(i._x0+4*i._x1+e)/6,(i._y0+4*i._y1+o)/6)}function Basis(i){this._context=i}Basis.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:point$3(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(i,e){switch(i=+i,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(i,e):this._context.moveTo(i,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:point$3(this,i,e);break}this._x0=this._x1,this._x1=i,this._y0=this._y1,this._y1=e}};function curveBasis(i){return new Basis(i)}function BasisClosed(i){this._context=i}BasisClosed.prototype={areaStart:noop,areaEnd:noop,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(i,e){switch(i=+i,e=+e,this._point){case 0:this._point=1,this._x2=i,this._y2=e;break;case 1:this._point=2,this._x3=i,this._y3=e;break;case 2:this._point=3,this._x4=i,this._y4=e,this._context.moveTo((this._x0+4*this._x1+i)/6,(this._y0+4*this._y1+e)/6);break;default:point$3(this,i,e);break}this._x0=this._x1,this._x1=i,this._y0=this._y1,this._y1=e}};function curveBasisClosed(i){return new BasisClosed(i)}function BasisOpen(i){this._context=i}BasisOpen.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(i,e){switch(i=+i,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var o=(this._x0+4*this._x1+i)/6,d=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(o,d):this._context.moveTo(o,d);break;case 3:this._point=4;default:point$3(this,i,e);break}this._x0=this._x1,this._x1=i,this._y0=this._y1,this._y1=e}};function curveBasisOpen(i){return new BasisOpen(i)}function Bundle(i,e){this._basis=new Basis(i),this._beta=e}Bundle.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var i=this._x,e=this._y,o=i.length-1;if(o>0)for(var d=i[0],h=e[0],g=i[o]-d,b=e[o]-h,$=-1,j;++$<=o;)j=$/o,this._basis.point(this._beta*i[$]+(1-this._beta)*(d+j*g),this._beta*e[$]+(1-this._beta)*(h+j*b));this._x=this._y=null,this._basis.lineEnd()},point:function(i,e){this._x.push(+i),this._y.push(+e)}};const curveBundle=function i(e){function o(d){return e===1?new Basis(d):new Bundle(d,e)}return o.beta=function(d){return i(+d)},o}(.85);function point$2(i,e,o){i._context.bezierCurveTo(i._x1+i._k*(i._x2-i._x0),i._y1+i._k*(i._y2-i._y0),i._x2+i._k*(i._x1-e),i._y2+i._k*(i._y1-o),i._x2,i._y2)}function Cardinal(i,e){this._context=i,this._k=(1-e)/6}Cardinal.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:point$2(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(i,e){switch(i=+i,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(i,e):this._context.moveTo(i,e);break;case 1:this._point=2,this._x1=i,this._y1=e;break;case 2:this._point=3;default:point$2(this,i,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=i,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const curveCardinal=function i(e){function o(d){return new Cardinal(d,e)}return o.tension=function(d){return i(+d)},o}(0);function CardinalClosed(i,e){this._context=i,this._k=(1-e)/6}CardinalClosed.prototype={areaStart:noop,areaEnd:noop,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(i,e){switch(i=+i,e=+e,this._point){case 0:this._point=1,this._x3=i,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=i,this._y4=e);break;case 2:this._point=3,this._x5=i,this._y5=e;break;default:point$2(this,i,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=i,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const curveCardinalClosed=function i(e){function o(d){return new CardinalClosed(d,e)}return o.tension=function(d){return i(+d)},o}(0);function CardinalOpen(i,e){this._context=i,this._k=(1-e)/6}CardinalOpen.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(i,e){switch(i=+i,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:point$2(this,i,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=i,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const curveCardinalOpen=function i(e){function o(d){return new CardinalOpen(d,e)}return o.tension=function(d){return i(+d)},o}(0);function point$1(i,e,o){var d=i._x1,h=i._y1,g=i._x2,b=i._y2;if(i._l01_a>epsilon){var $=2*i._l01_2a+3*i._l01_a*i._l12_a+i._l12_2a,j=3*i._l01_a*(i._l01_a+i._l12_a);d=(d*$-i._x0*i._l12_2a+i._x2*i._l01_2a)/j,h=(h*$-i._y0*i._l12_2a+i._y2*i._l01_2a)/j}if(i._l23_a>epsilon){var et=2*i._l23_2a+3*i._l23_a*i._l12_a+i._l12_2a,tt=3*i._l23_a*(i._l23_a+i._l12_a);g=(g*et+i._x1*i._l23_2a-e*i._l12_2a)/tt,b=(b*et+i._y1*i._l23_2a-o*i._l12_2a)/tt}i._context.bezierCurveTo(d,h,g,b,i._x2,i._y2)}function CatmullRom(i,e){this._context=i,this._alpha=e}CatmullRom.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(i,e){if(i=+i,e=+e,this._point){var o=this._x2-i,d=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(o*o+d*d,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(i,e):this._context.moveTo(i,e);break;case 1:this._point=2;break;case 2:this._point=3;default:point$1(this,i,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=i,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const curveCatmullRom=function i(e){function o(d){return e?new CatmullRom(d,e):new Cardinal(d,0)}return o.alpha=function(d){return i(+d)},o}(.5);function CatmullRomClosed(i,e){this._context=i,this._alpha=e}CatmullRomClosed.prototype={areaStart:noop,areaEnd:noop,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(i,e){if(i=+i,e=+e,this._point){var o=this._x2-i,d=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(o*o+d*d,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=i,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=i,this._y4=e);break;case 2:this._point=3,this._x5=i,this._y5=e;break;default:point$1(this,i,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=i,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const curveCatmullRomClosed=function i(e){function o(d){return e?new CatmullRomClosed(d,e):new CardinalClosed(d,0)}return o.alpha=function(d){return i(+d)},o}(.5);function CatmullRomOpen(i,e){this._context=i,this._alpha=e}CatmullRomOpen.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(i,e){if(i=+i,e=+e,this._point){var o=this._x2-i,d=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(o*o+d*d,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:point$1(this,i,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=i,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const curveCatmullRomOpen=function i(e){function o(d){return e?new CatmullRomOpen(d,e):new CardinalOpen(d,0)}return o.alpha=function(d){return i(+d)},o}(.5);function LinearClosed(i){this._context=i}LinearClosed.prototype={areaStart:noop,areaEnd:noop,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(i,e){i=+i,e=+e,this._point?this._context.lineTo(i,e):(this._point=1,this._context.moveTo(i,e))}};function curveLinearClosed(i){return new LinearClosed(i)}function sign(i){return i<0?-1:1}function slope3(i,e,o){var d=i._x1-i._x0,h=e-i._x1,g=(i._y1-i._y0)/(d||h<0&&-0),b=(o-i._y1)/(h||d<0&&-0),$=(g*h+b*d)/(d+h);return(sign(g)+sign(b))*Math.min(Math.abs(g),Math.abs(b),.5*Math.abs($))||0}function slope2(i,e){var o=i._x1-i._x0;return o?(3*(i._y1-i._y0)/o-e)/2:e}function point(i,e,o){var d=i._x0,h=i._y0,g=i._x1,b=i._y1,$=(g-d)/3;i._context.bezierCurveTo(d+$,h+$*e,g-$,b-$*o,g,b)}function MonotoneX(i){this._context=i}MonotoneX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:point(this,this._t0,slope2(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(i,e){var o=NaN;if(i=+i,e=+e,!(i===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(i,e):this._context.moveTo(i,e);break;case 1:this._point=2;break;case 2:this._point=3,point(this,slope2(this,o=slope3(this,i,e)),o);break;default:point(this,this._t0,o=slope3(this,i,e));break}this._x0=this._x1,this._x1=i,this._y0=this._y1,this._y1=e,this._t0=o}}};function MonotoneY(i){this._context=new ReflectContext(i)}(MonotoneY.prototype=Object.create(MonotoneX.prototype)).point=function(i,e){MonotoneX.prototype.point.call(this,e,i)};function ReflectContext(i){this._context=i}ReflectContext.prototype={moveTo:function(i,e){this._context.moveTo(e,i)},closePath:function(){this._context.closePath()},lineTo:function(i,e){this._context.lineTo(e,i)},bezierCurveTo:function(i,e,o,d,h,g){this._context.bezierCurveTo(e,i,d,o,g,h)}};function monotoneX(i){return new MonotoneX(i)}function monotoneY(i){return new MonotoneY(i)}function Natural(i){this._context=i}Natural.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var i=this._x,e=this._y,o=i.length;if(o)if(this._line?this._context.lineTo(i[0],e[0]):this._context.moveTo(i[0],e[0]),o===2)this._context.lineTo(i[1],e[1]);else for(var d=controlPoints(i),h=controlPoints(e),g=0,b=1;b<o;++g,++b)this._context.bezierCurveTo(d[0][g],h[0][g],d[1][g],h[1][g],i[b],e[b]);(this._line||this._line!==0&&o===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(i,e){this._x.push(+i),this._y.push(+e)}};function controlPoints(i){var e,o=i.length-1,d,h=new Array(o),g=new Array(o),b=new Array(o);for(h[0]=0,g[0]=2,b[0]=i[0]+2*i[1],e=1;e<o-1;++e)h[e]=1,g[e]=4,b[e]=4*i[e]+2*i[e+1];for(h[o-1]=2,g[o-1]=7,b[o-1]=8*i[o-1]+i[o],e=1;e<o;++e)d=h[e]/g[e-1],g[e]-=d,b[e]-=d*b[e-1];for(h[o-1]=b[o-1]/g[o-1],e=o-2;e>=0;--e)h[e]=(b[e]-h[e+1])/g[e];for(g[o-1]=(i[o]+h[o-1])/2,e=0;e<o-1;++e)g[e]=2*i[e+1]-h[e+1];return[h,g]}function curveNatural(i){return new Natural(i)}function Step(i,e){this._context=i,this._t=e}Step.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(i,e){switch(i=+i,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(i,e):this._context.moveTo(i,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(i,e);else{var o=this._x*(1-this._t)+i*this._t;this._context.lineTo(o,this._y),this._context.lineTo(o,e)}break}}this._x=i,this._y=e}};function curveStep(i){return new Step(i,.5)}function stepBefore(i){return new Step(i,0)}function stepAfter(i){return new Step(i,1)}const constant$1=i=>()=>i;function ZoomEvent(i,{sourceEvent:e,target:o,transform:d,dispatch:h}){Object.defineProperties(this,{type:{value:i,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},transform:{value:d,enumerable:!0,configurable:!0},_:{value:h}})}function Transform(i,e,o){this.k=i,this.x=e,this.y=o}Transform.prototype={constructor:Transform,scale:function(i){return i===1?this:new Transform(this.k*i,this.x,this.y)},translate:function(i,e){return i===0&e===0?this:new Transform(this.k,this.x+this.k*i,this.y+this.k*e)},apply:function(i){return[i[0]*this.k+this.x,i[1]*this.k+this.y]},applyX:function(i){return i*this.k+this.x},applyY:function(i){return i*this.k+this.y},invert:function(i){return[(i[0]-this.x)/this.k,(i[1]-this.y)/this.k]},invertX:function(i){return(i-this.x)/this.k},invertY:function(i){return(i-this.y)/this.k},rescaleX:function(i){return i.copy().domain(i.range().map(this.invertX,this).map(i.invert,i))},rescaleY:function(i){return i.copy().domain(i.range().map(this.invertY,this).map(i.invert,i))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var identity$2=new Transform(1,0,0);Transform.prototype;function nopropagation(i){i.stopImmediatePropagation()}function noevent(i){i.preventDefault(),i.stopImmediatePropagation()}function defaultFilter(i){return(!i.ctrlKey||i.type==="wheel")&&!i.button}function defaultExtent(){var i=this;return i instanceof SVGElement?(i=i.ownerSVGElement||i,i.hasAttribute("viewBox")?(i=i.viewBox.baseVal,[[i.x,i.y],[i.x+i.width,i.y+i.height]]):[[0,0],[i.width.baseVal.value,i.height.baseVal.value]]):[[0,0],[i.clientWidth,i.clientHeight]]}function defaultTransform(){return this.__zoom||identity$2}function defaultWheelDelta(i){return-i.deltaY*(i.deltaMode===1?.05:i.deltaMode?1:.002)*(i.ctrlKey?10:1)}function defaultTouchable(){return navigator.maxTouchPoints||"ontouchstart"in this}function defaultConstrain(i,e,o){var d=i.invertX(e[0][0])-o[0][0],h=i.invertX(e[1][0])-o[1][0],g=i.invertY(e[0][1])-o[0][1],b=i.invertY(e[1][1])-o[1][1];return i.translate(h>d?(d+h)/2:Math.min(0,d)||Math.max(0,h),b>g?(g+b)/2:Math.min(0,g)||Math.max(0,b))}function zoom$1(){var i=defaultFilter,e=defaultExtent,o=defaultConstrain,d=defaultWheelDelta,h=defaultTouchable,g=[0,1/0],b=[[-1/0,-1/0],[1/0,1/0]],$=250,j=interpolateZoom,et=dispatch("start","zoom","end"),tt,nt,rt,ot=500,st=150,bt=0,vt=10;function at(Nt){Nt.property("__zoom",defaultTransform).on("wheel.zoom",Ot,{passive:!1}).on("mousedown.zoom",kt).on("dblclick.zoom",Mt).filter(h).on("touchstart.zoom",Bt).on("touchmove.zoom",jt).on("touchend.zoom touchcancel.zoom",zt).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}at.transform=function(Nt,Ct,Ft,Vt){var Ut=Nt.selection?Nt.selection():Nt;Ut.property("__zoom",defaultTransform),Nt!==Ut?At(Nt,Ct,Ft,Vt):Ut.interrupt().each(function(){xt(this,arguments).event(Vt).start().zoom(null,typeof Ct=="function"?Ct.apply(this,arguments):Ct).end()})},at.scaleBy=function(Nt,Ct,Ft,Vt){at.scaleTo(Nt,function(){var Ut=this.__zoom.k,Ht=typeof Ct=="function"?Ct.apply(this,arguments):Ct;return Ut*Ht},Ft,Vt)},at.scaleTo=function(Nt,Ct,Ft,Vt){at.transform(Nt,function(){var Ut=e.apply(this,arguments),Ht=this.__zoom,Pt=Ft==null?wt(Ut):typeof Ft=="function"?Ft.apply(this,arguments):Ft,Yt=Ht.invert(Pt),Xt=typeof Ct=="function"?Ct.apply(this,arguments):Ct;return o($t(ut(Ht,Xt),Pt,Yt),Ut,b)},Ft,Vt)},at.translateBy=function(Nt,Ct,Ft,Vt){at.transform(Nt,function(){return o(this.__zoom.translate(typeof Ct=="function"?Ct.apply(this,arguments):Ct,typeof Ft=="function"?Ft.apply(this,arguments):Ft),e.apply(this,arguments),b)},null,Vt)},at.translateTo=function(Nt,Ct,Ft,Vt,Ut){at.transform(Nt,function(){var Ht=e.apply(this,arguments),Pt=this.__zoom,Yt=Vt==null?wt(Ht):typeof Vt=="function"?Vt.apply(this,arguments):Vt;return o(identity$2.translate(Yt[0],Yt[1]).scale(Pt.k).translate(typeof Ct=="function"?-Ct.apply(this,arguments):-Ct,typeof Ft=="function"?-Ft.apply(this,arguments):-Ft),Ht,b)},Vt,Ut)};function ut(Nt,Ct){return Ct=Math.max(g[0],Math.min(g[1],Ct)),Ct===Nt.k?Nt:new Transform(Ct,Nt.x,Nt.y)}function $t(Nt,Ct,Ft){var Vt=Ct[0]-Ft[0]*Nt.k,Ut=Ct[1]-Ft[1]*Nt.k;return Vt===Nt.x&&Ut===Nt.y?Nt:new Transform(Nt.k,Vt,Ut)}function wt(Nt){return[(+Nt[0][0]+ +Nt[1][0])/2,(+Nt[0][1]+ +Nt[1][1])/2]}function At(Nt,Ct,Ft,Vt){Nt.on("start.zoom",function(){xt(this,arguments).event(Vt).start()}).on("interrupt.zoom end.zoom",function(){xt(this,arguments).event(Vt).end()}).tween("zoom",function(){var Ut=this,Ht=arguments,Pt=xt(Ut,Ht).event(Vt),Yt=e.apply(Ut,Ht),Xt=Ft==null?wt(Yt):typeof Ft=="function"?Ft.apply(Ut,Ht):Ft,wn=Math.max(Yt[1][0]-Yt[0][0],Yt[1][1]-Yt[0][1]),Mn=Ut.__zoom,Cn=typeof Ct=="function"?Ct.apply(Ut,Ht):Ct,On=j(Mn.invert(Xt).concat(wn/Mn.k),Cn.invert(Xt).concat(wn/Cn.k));return function(vn){if(vn===1)vn=Cn;else{var Nn=On(vn),Jt=wn/Nn[2];vn=new Transform(Jt,Xt[0]-Nn[0]*Jt,Xt[1]-Nn[1]*Jt)}Pt.zoom(null,vn)}})}function xt(Nt,Ct,Ft){return!Ft&&Nt.__zooming||new Rt(Nt,Ct)}function Rt(Nt,Ct){this.that=Nt,this.args=Ct,this.active=0,this.sourceEvent=null,this.extent=e.apply(Nt,Ct),this.taps=0}Rt.prototype={event:function(Nt){return Nt&&(this.sourceEvent=Nt),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(Nt,Ct){return this.mouse&&Nt!=="mouse"&&(this.mouse[1]=Ct.invert(this.mouse[0])),this.touch0&&Nt!=="touch"&&(this.touch0[1]=Ct.invert(this.touch0[0])),this.touch1&&Nt!=="touch"&&(this.touch1[1]=Ct.invert(this.touch1[0])),this.that.__zoom=Ct,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(Nt){var Ct=select$1(this.that).datum();et.call(Nt,this.that,new ZoomEvent(Nt,{sourceEvent:this.sourceEvent,target:at,type:Nt,transform:this.that.__zoom,dispatch:et}),Ct)}};function Ot(Nt,...Ct){if(!i.apply(this,arguments))return;var Ft=xt(this,Ct).event(Nt),Vt=this.__zoom,Ut=Math.max(g[0],Math.min(g[1],Vt.k*Math.pow(2,d.apply(this,arguments)))),Ht=pointer$1(Nt);if(Ft.wheel)(Ft.mouse[0][0]!==Ht[0]||Ft.mouse[0][1]!==Ht[1])&&(Ft.mouse[1]=Vt.invert(Ft.mouse[0]=Ht)),clearTimeout(Ft.wheel);else{if(Vt.k===Ut)return;Ft.mouse=[Ht,Vt.invert(Ht)],interrupt(this),Ft.start()}noevent(Nt),Ft.wheel=setTimeout(Pt,st),Ft.zoom("mouse",o($t(ut(Vt,Ut),Ft.mouse[0],Ft.mouse[1]),Ft.extent,b));function Pt(){Ft.wheel=null,Ft.end()}}function kt(Nt,...Ct){if(rt||!i.apply(this,arguments))return;var Ft=Nt.currentTarget,Vt=xt(this,Ct,!0).event(Nt),Ut=select$1(Nt.view).on("mousemove.zoom",Xt,!0).on("mouseup.zoom",wn,!0),Ht=pointer$1(Nt,Ft),Pt=Nt.clientX,Yt=Nt.clientY;dragDisable(Nt.view),nopropagation(Nt),Vt.mouse=[Ht,this.__zoom.invert(Ht)],interrupt(this),Vt.start();function Xt(Mn){if(noevent(Mn),!Vt.moved){var Cn=Mn.clientX-Pt,On=Mn.clientY-Yt;Vt.moved=Cn*Cn+On*On>bt}Vt.event(Mn).zoom("mouse",o($t(Vt.that.__zoom,Vt.mouse[0]=pointer$1(Mn,Ft),Vt.mouse[1]),Vt.extent,b))}function wn(Mn){Ut.on("mousemove.zoom mouseup.zoom",null),yesdrag(Mn.view,Vt.moved),noevent(Mn),Vt.event(Mn).end()}}function Mt(Nt,...Ct){if(i.apply(this,arguments)){var Ft=this.__zoom,Vt=pointer$1(Nt.changedTouches?Nt.changedTouches[0]:Nt,this),Ut=Ft.invert(Vt),Ht=Ft.k*(Nt.shiftKey?.5:2),Pt=o($t(ut(Ft,Ht),Vt,Ut),e.apply(this,Ct),b);noevent(Nt),$>0?select$1(this).transition().duration($).call(At,Pt,Vt,Nt):select$1(this).call(at.transform,Pt,Vt,Nt)}}function Bt(Nt,...Ct){if(i.apply(this,arguments)){var Ft=Nt.touches,Vt=Ft.length,Ut=xt(this,Ct,Nt.changedTouches.length===Vt).event(Nt),Ht,Pt,Yt,Xt;for(nopropagation(Nt),Pt=0;Pt<Vt;++Pt)Yt=Ft[Pt],Xt=pointer$1(Yt,this),Xt=[Xt,this.__zoom.invert(Xt),Yt.identifier],Ut.touch0?!Ut.touch1&&Ut.touch0[2]!==Xt[2]&&(Ut.touch1=Xt,Ut.taps=0):(Ut.touch0=Xt,Ht=!0,Ut.taps=1+!!tt);tt&&(tt=clearTimeout(tt)),Ht&&(Ut.taps<2&&(nt=Xt[0],tt=setTimeout(function(){tt=null},ot)),interrupt(this),Ut.start())}}function jt(Nt,...Ct){if(this.__zooming){var Ft=xt(this,Ct).event(Nt),Vt=Nt.changedTouches,Ut=Vt.length,Ht,Pt,Yt,Xt;for(noevent(Nt),Ht=0;Ht<Ut;++Ht)Pt=Vt[Ht],Yt=pointer$1(Pt,this),Ft.touch0&&Ft.touch0[2]===Pt.identifier?Ft.touch0[0]=Yt:Ft.touch1&&Ft.touch1[2]===Pt.identifier&&(Ft.touch1[0]=Yt);if(Pt=Ft.that.__zoom,Ft.touch1){var wn=Ft.touch0[0],Mn=Ft.touch0[1],Cn=Ft.touch1[0],On=Ft.touch1[1],vn=(vn=Cn[0]-wn[0])*vn+(vn=Cn[1]-wn[1])*vn,Nn=(Nn=On[0]-Mn[0])*Nn+(Nn=On[1]-Mn[1])*Nn;Pt=ut(Pt,Math.sqrt(vn/Nn)),Yt=[(wn[0]+Cn[0])/2,(wn[1]+Cn[1])/2],Xt=[(Mn[0]+On[0])/2,(Mn[1]+On[1])/2]}else if(Ft.touch0)Yt=Ft.touch0[0],Xt=Ft.touch0[1];else return;Ft.zoom("touch",o($t(Pt,Yt,Xt),Ft.extent,b))}}function zt(Nt,...Ct){if(this.__zooming){var Ft=xt(this,Ct).event(Nt),Vt=Nt.changedTouches,Ut=Vt.length,Ht,Pt;for(nopropagation(Nt),rt&&clearTimeout(rt),rt=setTimeout(function(){rt=null},ot),Ht=0;Ht<Ut;++Ht)Pt=Vt[Ht],Ft.touch0&&Ft.touch0[2]===Pt.identifier?delete Ft.touch0:Ft.touch1&&Ft.touch1[2]===Pt.identifier&&delete Ft.touch1;if(Ft.touch1&&!Ft.touch0&&(Ft.touch0=Ft.touch1,delete Ft.touch1),Ft.touch0)Ft.touch0[1]=this.__zoom.invert(Ft.touch0[0]);else if(Ft.end(),Ft.taps===2&&(Pt=pointer$1(Pt,this),Math.hypot(nt[0]-Pt[0],nt[1]-Pt[1])<vt)){var Yt=select$1(this).on("dblclick.zoom");Yt&&Yt.apply(this,arguments)}}}return at.wheelDelta=function(Nt){return arguments.length?(d=typeof Nt=="function"?Nt:constant$1(+Nt),at):d},at.filter=function(Nt){return arguments.length?(i=typeof Nt=="function"?Nt:constant$1(!!Nt),at):i},at.touchable=function(Nt){return arguments.length?(h=typeof Nt=="function"?Nt:constant$1(!!Nt),at):h},at.extent=function(Nt){return arguments.length?(e=typeof Nt=="function"?Nt:constant$1([[+Nt[0][0],+Nt[0][1]],[+Nt[1][0],+Nt[1][1]]]),at):e},at.scaleExtent=function(Nt){return arguments.length?(g[0]=+Nt[0],g[1]=+Nt[1],at):[g[0],g[1]]},at.translateExtent=function(Nt){return arguments.length?(b[0][0]=+Nt[0][0],b[1][0]=+Nt[1][0],b[0][1]=+Nt[0][1],b[1][1]=+Nt[1][1],at):[[b[0][0],b[0][1]],[b[1][0],b[1][1]]]},at.constrain=function(Nt){return arguments.length?(o=Nt,at):o},at.duration=function(Nt){return arguments.length?($=+Nt,at):$},at.interpolate=function(Nt){return arguments.length?(j=Nt,at):j},at.on=function(){var Nt=et.on.apply(et,arguments);return Nt===et?at:Nt},at.clickDistance=function(Nt){return arguments.length?(bt=(Nt=+Nt)*Nt,at):Math.sqrt(bt)},at.tapDistance=function(Nt){return arguments.length?(vt=+Nt,at):vt},at}function defined(i){return i!=null&&!Number.isNaN(i)}function ascendingDefined(i,e){return+defined(e)-+defined(i)||ascending$2(i,e)}function descendingDefined(i,e){return+defined(e)-+defined(i)||descending(i,e)}function nonempty(i){return i!=null&&`${i}`!=""}function finite$1(i){return isFinite(i)?i:NaN}function positive(i){return i>0&&isFinite(i)?i:NaN}function negative(i){return i<0&&isFinite(i)?i:NaN}const durationSecond=1e3,durationMinute=durationSecond*60,durationHour=durationMinute*60,durationDay=durationHour*24,durationWeek=durationDay*7,durationMonth=durationDay*30,durationYear=durationDay*365,tickIntervals=[["millisecond",1],["2 milliseconds",2],["5 milliseconds",5],["10 milliseconds",10],["20 milliseconds",20],["50 milliseconds",50],["100 milliseconds",100],["200 milliseconds",200],["500 milliseconds",500],["second",durationSecond],["5 seconds",5*durationSecond],["15 seconds",15*durationSecond],["30 seconds",30*durationSecond],["minute",durationMinute],["5 minutes",5*durationMinute],["15 minutes",15*durationMinute],["30 minutes",30*durationMinute],["hour",durationHour],["3 hours",3*durationHour],["6 hours",6*durationHour],["12 hours",12*durationHour],["day",durationDay],["2 days",2*durationDay],["week",durationWeek],["2 weeks",2*durationWeek],["month",durationMonth],["3 months",3*durationMonth],["6 months",6*durationMonth],["year",durationYear],["2 years",2*durationYear],["5 years",5*durationYear],["10 years",10*durationYear],["20 years",20*durationYear],["50 years",50*durationYear],["100 years",100*durationYear]],durations=new Map([["second",durationSecond],["minute",durationMinute],["hour",durationHour],["day",durationDay],["monday",durationWeek],["tuesday",durationWeek],["wednesday",durationWeek],["thursday",durationWeek],["friday",durationWeek],["saturday",durationWeek],["sunday",durationWeek],["week",durationWeek],["month",durationMonth],["year",durationYear]]),timeIntervals=new Map([["second",second$1],["minute",timeMinute],["hour",timeHour],["day",timeDay],["monday",timeMonday],["tuesday",timeTuesday],["wednesday",timeWednesday],["thursday",timeThursday],["friday",timeFriday],["saturday",timeSaturday],["sunday",timeSunday],["week",timeSunday],["month",timeMonth],["year",timeYear]]),utcIntervals=new Map([["second",second$1],["minute",utcMinute],["hour",utcHour],["day",unixDay],["monday",utcMonday],["tuesday",utcTuesday],["wednesday",utcWednesday],["thursday",utcThursday],["friday",utcFriday],["saturday",utcSaturday],["sunday",utcSunday],["week",utcSunday],["month",utcMonth],["year",utcYear]]),intervalDuration=Symbol("intervalDuration"),intervalType=Symbol("intervalType");for(const[i,e]of timeIntervals)e[intervalDuration]=durations.get(i),e[intervalType]="time";for(const[i,e]of utcIntervals)e[intervalDuration]=durations.get(i),e[intervalType]="utc";const formatIntervals=[["year",utcYear,"utc"],["year",timeYear,"time"],["month",utcMonth,"utc"],["month",timeMonth,"time"],["day",unixDay,"utc",6*durationMonth],["day",timeDay,"time",6*durationMonth],["hour",utcHour,"utc",3*durationDay],["minute",utcMinute,"utc",6*durationHour],["second",second$1,"utc",30*durationMinute]];function parseInterval(i,e,o){let d=`${i}`.toLowerCase();d.endsWith("s")&&(d=d.slice(0,-1));let h=1;const g=/^(?:(\d+)\s+)/.exec(d);switch(g&&(d=d.slice(g[0].length),h=+g[1]),d){case"quarter":d="month",h*=3;break;case"half":d="month",h*=6;break}let b=e.get(d);if(!b)throw new Error(`unknown interval: ${i}`);if(h>1){if(!b.every)throw new Error(`non-periodic interval: ${d}`);b=b.every(h),b[intervalDuration]=durations.get(d)*h,b[intervalType]=o}return b}function maybeTimeInterval(i){return parseInterval(i,timeIntervals,"time")}function maybeUtcInterval(i){return parseInterval(i,utcIntervals,"utc")}function generalizeTimeInterval(i,e){if(!(e>1))return;const o=i[intervalDuration];if(!tickIntervals.some(([,h])=>h===o)||o%durationDay===0&&durationDay<o&&o<durationMonth)return;const[d]=tickIntervals[bisector(([,h])=>Math.log(h)).center(tickIntervals,Math.log(o*e))];return(i[intervalType]==="time"?maybeTimeInterval:maybeUtcInterval)(d)}function formatTimeInterval(i,e,o){const d=e==="time"?timeFormat:utcFormat;if(o==null)return d(i==="year"?"%Y":i==="month"?"%Y-%m":i==="day"?"%Y-%m-%d":i==="hour"||i==="minute"?"%Y-%m-%dT%H:%M":i==="second"?"%Y-%m-%dT%H:%M:%S":"%Y-%m-%dT%H:%M:%S.%L");const h=getTimeTemplate(o);switch(i){case"millisecond":return formatConditional(d(".%L"),d(":%M:%S"),h);case"second":return formatConditional(d(":%S"),d("%-I:%M"),h);case"minute":return formatConditional(d("%-I:%M"),d("%p"),h);case"hour":return formatConditional(d("%-I %p"),d("%b %-d"),h);case"day":return formatConditional(d("%-d"),d("%b"),h);case"month":return formatConditional(d("%b"),d("%Y"),h);case"year":return d("%Y")}throw new Error("unable to format time ticks")}function getTimeTemplate(i){return i==="left"||i==="right"?(e,o)=>`
${e}
${o}`:i==="top"?(e,o)=>`${o}
${e}`:(e,o)=>`${e}
${o}`}function inferTimeFormat(i,e){const o=max$1(pairs(i,(d,h)=>Math.abs(h-d)));if(o<1e3)return formatTimeInterval("millisecond","utc",e);for(const[d,h,g,b]of formatIntervals){if(o>b||d==="hour"&&!o)break;if(i.every($=>h.floor($)>=$))return formatTimeInterval(d,g,e)}}function formatConditional(i,e,o){return(d,h,g)=>{const b=i(d,h),$=e(d,h),j=h-orderof(g);return h!==j&&g[j]!==void 0&&$===e(g[j],j)?b:o(b,$)}}const TypedArray=Object.getPrototypeOf(Uint8Array),objectToString=Object.prototype.toString,reindex=Symbol("reindex");function valueof(i,e,o){const d=typeof e;return d==="string"?maybeTypedMap(i,field(e),o):d==="function"?maybeTypedMap(i,e,o):d==="number"||e instanceof Date||d==="boolean"?map$1(i,constant(e),o):typeof(e==null?void 0:e.transform)=="function"?maybeTypedArrayify(e.transform(i),o):maybeTake(maybeTypedArrayify(e,o),i==null?void 0:i[reindex])}function maybeTake(i,e){return e?take(i,e):i}function maybeTypedMap(i,e,o){return map$1(i,(o==null?void 0:o.prototype)instanceof TypedArray?floater(e):e,o)}function maybeTypedArrayify(i,e){return e===void 0?arrayify(i):i instanceof e?i:e.prototype instanceof TypedArray&&!(i instanceof TypedArray)?e.from(i,coerceNumber):e.from(i)}function floater(i){return(e,o)=>coerceNumber(i(e,o))}const singleton=[null],field=i=>e=>e[i],indexOf={transform:range},identity$1={transform:i=>i},one=()=>1,yes=()=>!0,string=i=>i==null?i:`${i}`,number$1=i=>i==null?i:+i,first=i=>i?i[0]:void 0,second=i=>i?i[1]:void 0,third=i=>i?i[2]:void 0,constant=i=>()=>i;function percentile(i){const e=+`${i}`.slice(1)/100;return(o,d)=>quantile$1(o,e,d)}function coerceNumbers(i){return i instanceof TypedArray?i:map$1(i,coerceNumber,Float64Array)}function coerceNumber(i){return i==null?NaN:Number(i)}function coerceDates(i){return map$1(i,coerceDate)}function coerceDate(i){return i instanceof Date&&!isNaN(i)?i:typeof i=="string"?parse(i):i==null||isNaN(i=+i)?void 0:new Date(i)}function maybeColorChannel(i,e){return i===void 0&&(i=e),i===null?[void 0,"none"]:isColor$1(i)?[void 0,i]:[i,void 0]}function maybeNumberChannel(i,e){return i===void 0&&(i=e),i===null||typeof i=="number"?[void 0,i]:[i,void 0]}function maybeKeyword(i,e,o){if(i!=null)return keyword(i,e,o)}function keyword(i,e,o){const d=`${i}`.toLowerCase();if(!o.includes(d))throw new Error(`invalid ${e}: ${i}`);return d}function arrayify(i){return i==null||i instanceof Array||i instanceof TypedArray?i:Array.from(i)}function map$1(i,e,o=Array){return i==null?i:i instanceof o?i.map(e):o.from(i,e)}function slice(i,e=Array){return i instanceof e?i.slice():e.from(i)}function hasX({x:i,x1:e,x2:o}){return i!==void 0||e!==void 0||o!==void 0}function hasY({y:i,y1:e,y2:o}){return i!==void 0||e!==void 0||o!==void 0}function hasXY(i){return hasX(i)||hasY(i)||i.interval!==void 0}function isObject$1(i){return(i==null?void 0:i.toString)===objectToString}function isScaleOptions(i){return isObject$1(i)&&(i.type!==void 0||i.domain!==void 0)}function isOptions(i){return isObject$1(i)&&typeof i.transform!="function"}function isDomainSort(i){return isOptions(i)&&i.value===void 0&&i.channel===void 0}function maybeZero(i,e,o,d=identity$1){return e===void 0&&o===void 0?(e=0,o=i===void 0?d:i):e===void 0?e=i===void 0?0:i:o===void 0&&(o=i===void 0?0:i),[e,o]}function maybeTuple(i,e){return i===void 0&&e===void 0?[first,second]:[i,e]}function maybeZ({z:i,fill:e,stroke:o}={}){return i===void 0&&([i]=maybeColorChannel(e)),i===void 0&&([i]=maybeColorChannel(o)),i}function range(i){const e=i.length,o=new Uint32Array(e);for(let d=0;d<e;++d)o[d]=d;return o}function take(i,e){return map$1(e,o=>i[o],i.constructor)}function taker(i){return i.length===1?(e,o)=>i(take(o,e)):i}function subarray(i,e,o){return i.subarray?i.subarray(e,o):i.slice(e,o)}function keyof(i){return i!==null&&typeof i=="object"?i.valueOf():i}function maybeInput(i,e){if(e[i]!==void 0)return e[i];switch(i){case"x1":case"x2":i="x";break;case"y1":case"y2":i="y";break}return e[i]}function column(i){let e;return[{transform:()=>e,label:labelof(i)},o=>e=o]}function maybeColumn(i){return i==null?[i]:column(i)}function labelof(i,e){return typeof i=="string"?i:i&&i.label!==void 0?i.label:e}function mid(i,e){return{transform(o){const d=i.transform(o),h=e.transform(o);return isTemporal(d)||isTemporal(h)?map$1(d,(g,b)=>new Date((+d[b]+ +h[b])/2)):map$1(d,(g,b)=>(+d[b]+ +h[b])/2,Float64Array)},label:i.label}}function maybeApplyInterval(i,e){const o=maybeIntervalTransform(e==null?void 0:e.interval,e==null?void 0:e.type);return o?map$1(i,o):i}function maybeIntervalTransform(i,e){const o=maybeInterval(i,e);return o&&(d=>defined(d)?o.floor(d):d)}function maybeInterval(i,e){if(i!=null){if(typeof i=="number"){0<i&&i<1&&Number.isInteger(1/i)&&(i=-1/i);const o=Math.abs(i);return i<0?{floor:d=>Math.floor(d*o)/o,offset:d=>(d*o+1)/o,range:(d,h)=>range$1(Math.ceil(d*o),h*o).map(g=>g/o)}:{floor:d=>Math.floor(d/o)*o,offset:d=>d+o,range:(d,h)=>range$1(Math.ceil(d/o),h/o).map(g=>g*o)}}if(typeof i=="string")return(e==="time"?maybeTimeInterval:maybeUtcInterval)(i);if(typeof i.floor!="function")throw new Error("invalid interval; missing floor method");if(typeof i.offset!="function")throw new Error("invalid interval; missing offset method");return i}}function maybeRangeInterval(i,e){if(i=maybeInterval(i,e),i&&typeof i.range!="function")throw new Error("invalid interval: missing range method");return i}function maybeNiceInterval(i,e){if(i=maybeRangeInterval(i,e),i&&typeof i.ceil!="function")throw new Error("invalid interval: missing ceil method");return i}function isTimeInterval(i){return isInterval(i)&&typeof(i==null?void 0:i.floor)=="function"&&i.floor()instanceof Date}function isInterval(i){return typeof(i==null?void 0:i.range)=="function"}function maybeValue(i){return i===void 0||isOptions(i)?i:{value:i}}function numberChannel(i){return i==null?null:{transform:e=>valueof(e,i,Float64Array),label:labelof(i)}}function isTuples(i){if(!isIterable$1(i))return!1;for(const e of i)if(e!=null)return typeof e=="object"&&"0"in e&&"1"in e}function isIterable$1(i){return i&&typeof i[Symbol.iterator]=="function"}function isTextual(i){for(const e of i)if(e!=null)return typeof e!="object"||e instanceof Date}function isOrdinal(i){for(const e of i){if(e==null)continue;const o=typeof e;return o==="string"||o==="boolean"}}function isTemporal(i){for(const e of i)if(e!=null)return e instanceof Date}function isTemporalString(i){for(const e of i)if(e!=null)return typeof e=="string"&&isNaN(e)&&parse(e)}function isNumericString(i){for(const e of i)if(e!=null){if(typeof e!="string")return!1;if(e.trim())return!isNaN(e)}}function isNumeric(i){for(const e of i)if(e!=null)return typeof e=="number"}function isEvery(i,e){let o;for(const d of i)if(d!=null){if(!e(d))return!1;o=!0}return o}const namedColors=new Set("none,currentcolor,transparent,aliceblue,antiquewhite,aqua,aquamarine,azure,beige,bisque,black,blanchedalmond,blue,blueviolet,brown,burlywood,cadetblue,chartreuse,chocolate,coral,cornflowerblue,cornsilk,crimson,cyan,darkblue,darkcyan,darkgoldenrod,darkgray,darkgreen,darkgrey,darkkhaki,darkmagenta,darkolivegreen,darkorange,darkorchid,darkred,darksalmon,darkseagreen,darkslateblue,darkslategray,darkslategrey,darkturquoise,darkviolet,deeppink,deepskyblue,dimgray,dimgrey,dodgerblue,firebrick,floralwhite,forestgreen,fuchsia,gainsboro,ghostwhite,gold,goldenrod,gray,green,greenyellow,grey,honeydew,hotpink,indianred,indigo,ivory,khaki,lavender,lavenderblush,lawngreen,lemonchiffon,lightblue,lightcoral,lightcyan,lightgoldenrodyellow,lightgray,lightgreen,lightgrey,lightpink,lightsalmon,lightseagreen,lightskyblue,lightslategray,lightslategrey,lightsteelblue,lightyellow,lime,limegreen,linen,magenta,maroon,mediumaquamarine,mediumblue,mediumorchid,mediumpurple,mediumseagreen,mediumslateblue,mediumspringgreen,mediumturquoise,mediumvioletred,midnightblue,mintcream,mistyrose,moccasin,navajowhite,navy,oldlace,olive,olivedrab,orange,orangered,orchid,palegoldenrod,palegreen,paleturquoise,palevioletred,papayawhip,peachpuff,peru,pink,plum,powderblue,purple,rebeccapurple,red,rosybrown,royalblue,saddlebrown,salmon,sandybrown,seagreen,seashell,sienna,silver,skyblue,slateblue,slategray,slategrey,snow,springgreen,steelblue,tan,teal,thistle,tomato,turquoise,violet,wheat,white,whitesmoke,yellow".split(","));function isColor$1(i){return typeof i!="string"?!1:(i=i.toLowerCase().trim(),/^#[0-9a-f]{3,8}$/.test(i)||/^(?:url|var|rgb|rgba|hsl|hsla|hwb|lab|lch|oklab|oklch|color|color-mix)\(.*\)$/.test(i)||namedColors.has(i))}function isOpacity(i){return typeof i=="number"&&(0<=i&&i<=1||isNaN(i))}function isNoneish(i){return i==null||isNone(i)}function isNone(i){return/^\s*none\s*$/i.test(i)}function isRound(i){return/^\s*round\s*$/i.test(i)}function maybeAnchor$3(i,e){return maybeKeyword(i,e,["middle","top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"])}function maybeFrameAnchor(i="middle"){return maybeAnchor$3(i,"frameAnchor")}function orderof(i){if(i==null)return;const e=i[0],o=i[i.length-1];return descending(e,o)}function inherit(i={},...e){let o=i;for(const d of e)for(const h in d)if(o[h]===void 0){const g=d[h];o===i?o={...o,[h]:g}:o[h]=g}return o}function named(i){console.warn("named iterables are deprecated; please use an object instead");const e=new Set;return Object.fromEntries(Array.from(i,o=>{const{name:d}=o;if(d==null)throw new Error("missing name");const h=`${d}`;if(h==="__proto__")throw new Error(`illegal name: ${h}`);if(e.has(h))throw new Error(`duplicate name: ${h}`);return e.add(h),[d,o]}))}function maybeNamed(i){return isIterable$1(i)?named(i):i}const position$1=Symbol("position"),color=Symbol("color"),radius=Symbol("radius"),length=Symbol("length"),opacity=Symbol("opacity"),symbol=Symbol("symbol"),projection=Symbol("projection"),registry=new Map([["x",position$1],["y",position$1],["fx",position$1],["fy",position$1],["r",radius],["color",color],["opacity",opacity],["symbol",symbol],["length",length],["projection",projection]]);function isPosition(i){return i===position$1||i===projection}function hasNumericRange(i){return i===position$1||i===radius||i===length||i===opacity}const sqrt3=Math.sqrt(3),sqrt4_3=2/sqrt3,symbolHexagon={draw(i,e){const o=Math.sqrt(e/Math.PI),d=o*sqrt4_3,h=d/2;i.moveTo(0,d),i.lineTo(o,h),i.lineTo(o,-h),i.lineTo(0,-d),i.lineTo(-o,-h),i.lineTo(-o,h),i.closePath()}},symbols$1=new Map([["asterisk",symbolAsterisk],["circle",symbolCircle],["cross",symbolCross],["diamond",symbolDiamond],["diamond2",symbolDiamond2],["hexagon",symbolHexagon],["plus",symbolPlus],["square",symbolSquare],["square2",symbolSquare2],["star",symbolStar],["times",symbolTimes],["triangle",symbolTriangle],["triangle2",symbolTriangle2],["wye",symbolWye]]);function isSymbolObject(i){return i&&typeof i.draw=="function"}function isSymbol$1(i){return isSymbolObject(i)?!0:typeof i!="string"?!1:symbols$1.has(i.toLowerCase())}function maybeSymbol(i){if(i==null||isSymbolObject(i))return i;const e=symbols$1.get(`${i}`.toLowerCase());if(e)return e;throw new Error(`invalid symbol: ${i}`)}function maybeSymbolChannel(i){if(i==null||isSymbolObject(i))return[void 0,i];if(typeof i=="string"){const e=symbols$1.get(`${i}`.toLowerCase());if(e)return[void 0,e]}return[i,void 0]}function basic({filter:i,sort:e,reverse:o,transform:d,initializer:h,...g}={},b){if(d===void 0&&(i!=null&&(d=filterTransform(i)),e!=null&&!isDomainSort(e)&&(d=composeTransform(d,sortTransform(e))),o&&(d=composeTransform(d,reverseTransform))),b!=null&&h!=null)throw new Error("transforms cannot be applied after initializers");return{...g,...(e===null||isDomainSort(e))&&{sort:e},transform:composeTransform(d,b)}}function initializer({filter:i,sort:e,reverse:o,initializer:d,...h}={},g){return d===void 0&&(i!=null&&(d=filterTransform(i)),e!=null&&!isDomainSort(e)&&(d=composeInitializer(d,sortTransform(e))),o&&(d=composeInitializer(d,reverseTransform))),{...h,...(e===null||isDomainSort(e))&&{sort:e},initializer:composeInitializer(d,g)}}function composeTransform(i,e){return i==null?e===null?void 0:e:e==null?i===null?void 0:i:function(o,d,h){return{data:o,facets:d}=i.call(this,o,d,h),e.call(this,arrayify(o),d,h)}}function composeInitializer(i,e){return i==null?e===null?void 0:e:e==null?i===null?void 0:i:function(o,d,h,...g){let b,$,j,et,tt,nt;return{data:$=o,facets:j=d,channels:b}=i.call(this,o,d,h,...g),{data:tt=$,facets:nt=j,channels:et}=e.call(this,$,j,{...h,...b},...g),{data:tt,facets:nt,channels:{...b,...et}}}}function apply(i,e){return(i.initializer!=null?initializer:basic)(i,e)}function filter(i,e){return apply(e,filterTransform(i))}function filterTransform(i){return(e,o)=>{const d=valueof(e,i);return{data:e,facets:o.map(h=>h.filter(g=>d[g]))}}}function reverse({sort:i,...e}={}){return{...apply(e,reverseTransform),sort:isDomainSort(i)?i:null}}function reverseTransform(i,e){return{data:i,facets:e.map(o=>o.slice().reverse())}}function shuffle({seed:i,sort:e,...o}={}){return{...apply(o,sortValue(i==null?Math.random:lcg(i))),sort:isDomainSort(e)?e:null}}function sort(i,{sort:e,...o}={}){return{...(isOptions(i)&&i.channel!==void 0?initializer:apply)(o,sortTransform(i)),sort:isDomainSort(e)?e:null}}function sortTransform(i){return(typeof i=="function"&&i.length!==1?sortData:sortValue)(i)}function sortData(i){return(e,o)=>{const d=(h,g)=>i(e[h],e[g]);return{data:e,facets:o.map(h=>h.slice().sort(d))}}}function sortValue(i){let e,o;({channel:e,value:i,order:o}={...maybeValue(i)});const d=e==null?void 0:e.startsWith("-");if(d&&(e=e.slice(1)),o===void 0&&(o=d?descendingDefined:ascendingDefined),typeof o!="function")switch(`${o}`.toLowerCase()){case"ascending":o=ascendingDefined;break;case"descending":o=descendingDefined;break;default:throw new Error(`invalid order: ${o}`)}return(h,g,b)=>{let $;if(e===void 0)$=valueof(h,i);else{if(b===void 0)throw new Error("channel sort requires an initializer");if($=b[e],!$)return{};$=$.value}const j=(et,tt)=>o($[et],$[tt]);return{data:h,facets:g.map(et=>et.slice().sort(j))}}}function groupZ$1(i,e){return groupn(null,null,i,e)}function groupX(i={y:"count"},e={}){const{x:o=identity$1}=e;if(o==null)throw new Error("missing channel: x");return groupn(o,null,i,e)}function groupY(i={x:"count"},e={}){const{y:o=identity$1}=e;if(o==null)throw new Error("missing channel: y");return groupn(null,o,i,e)}function group(i={fill:"count"},e={}){let{x:o,y:d}=e;if([o,d]=maybeTuple(o,d),o==null)throw new Error("missing channel: x");if(d==null)throw new Error("missing channel: y");return groupn(o,d,i,e)}function groupn(i,e,{data:o=reduceIdentity,filter:d,sort:h,reverse:g,...b}={},$={}){b=maybeOutputs(b,$),o=maybeReduce$1(o,identity$1),h=h==null?void 0:maybeOutput("sort",h,$),d=d==null?void 0:maybeEvaluator("filter",d,$);const[j,et]=maybeColumn(i),[tt,nt]=maybeColumn(e),{z:rt,fill:ot,stroke:st,x1:bt,x2:vt,y1:at,y2:ut,...$t}=$,[wt,At]=maybeColumn(rt),[xt]=maybeColorChannel(ot),[Rt]=maybeColorChannel(st),[Ot,kt]=maybeColumn(xt),[Mt,Bt]=maybeColumn(Rt);return{..."z"in $&&{z:wt||rt},..."fill"in $&&{fill:Ot||ot},..."stroke"in $&&{stroke:Mt||st},...basic($t,(jt,zt,Nt)=>{const Ct=maybeApplyInterval(valueof(jt,i),Nt==null?void 0:Nt.x),Ft=maybeApplyInterval(valueof(jt,e),Nt==null?void 0:Nt.y),Vt=valueof(jt,rt),Ut=valueof(jt,xt),Ht=valueof(jt,Rt),Pt=maybeSubgroup(b,{z:Vt,fill:Ut,stroke:Ht}),Yt=[],Xt=[],wn=Ct&&et([]),Mn=Ft&&nt([]),Cn=Vt&&At([]),On=Ut&&kt([]),vn=Ht&&Bt([]);let Nn=0;for(const Jt of b)Jt.initialize(jt);h&&h.initialize(jt),d&&d.initialize(jt);for(const Jt of zt){const Bn=[];for(const Ln of b)Ln.scope("facet",Jt);h&&h.scope("facet",Jt),d&&d.scope("facet",Jt);for(const[Ln,Zt]of maybeGroup(Jt,Pt))for(const[rr,tr]of maybeGroup(Zt,Ft))for(const[sr,ar]of maybeGroup(tr,Ct))if(!(d&&!d.reduce(ar))){Bn.push(Nn++),Xt.push(o.reduceIndex(ar,jt)),Ct&&wn.push(sr),Ft&&Mn.push(rr),Vt&&Cn.push(Pt===Vt?Ln:Vt[ar[0]]),Ut&&On.push(Pt===Ut?Ln:Ut[ar[0]]),Ht&&vn.push(Pt===Ht?Ln:Ht[ar[0]]);for(const er of b)er.reduce(ar);h&&h.reduce(ar)}Yt.push(Bn)}return maybeSort(Yt,h,g),{data:Xt,facets:Yt}}),...!hasOutput(b,"x")&&(j?{x:j}:{x1:bt,x2:vt}),...!hasOutput(b,"y")&&(tt?{y:tt}:{y1:at,y2:ut}),...Object.fromEntries(b.map(({name:jt,output:zt})=>[jt,zt]))}}function hasOutput(i,...e){for(const{name:o}of i)if(e.includes(o))return!0;return!1}function maybeOutputs(i,e,o=maybeOutput){const d=Object.entries(i);return e.title!=null&&i.title===void 0&&d.push(["title",reduceTitle]),e.href!=null&&i.href===void 0&&d.push(["href",reduceFirst$1]),d.filter(([,h])=>h!==void 0).map(([h,g])=>g===null?nullOutput(h):o(h,g,e))}function maybeOutput(i,e,o,d=maybeEvaluator){let h;isObject$1(e)&&"reduce"in e&&(h=e.scale,e=e.reduce);const g=d(i,e,o),[b,$]=column(g.label);let j;return{name:i,output:h===void 0?b:{value:b,scale:h},initialize(et){g.initialize(et),j=$([])},scope(et,tt){g.scope(et,tt)},reduce(et,tt){j.push(g.reduce(et,tt))}}}function nullOutput(i){return{name:i,initialize(){},scope(){},reduce(){}}}function maybeEvaluator(i,e,o,d=maybeReduce$1){const h=maybeInput(i,o),g=d(e,h);let b,$;return{label:labelof(g===reduceCount?null:h,g.label),initialize(j){b=h===void 0?j:valueof(j,h),g.scope==="data"&&($=g.reduceIndex(range(j),b))},scope(j,et){g.scope===j&&($=g.reduceIndex(et,b))},reduce(j,et){return g.scope==null?g.reduceIndex(j,b,et):g.reduceIndex(j,b,$,et)}}}function maybeGroup(i,e){return e?sort$1(group$1(i,o=>e[o]),first):[[,i]]}function maybeReduce$1(i,e,o=invalidReduce){if(i==null)return o(i);if(typeof i.reduceIndex=="function")return i;if(typeof i.reduce=="function"&&isObject$1(i))return reduceReduce(i);if(typeof i=="function")return reduceFunction(i);if(/^p\d{2}$/i.test(i))return reduceAccessor$1(percentile(i));switch(`${i}`.toLowerCase()){case"first":return reduceFirst$1;case"last":return reduceLast$1;case"identity":return reduceIdentity;case"count":return reduceCount;case"distinct":return reduceDistinct;case"sum":return e==null?reduceCount:reduceSum$1;case"proportion":return reduceProportion(e,"data");case"proportion-facet":return reduceProportion(e,"facet");case"deviation":return reduceAccessor$1(deviation);case"min":return reduceAccessor$1(min$2);case"min-index":return reduceAccessor$1(minIndex);case"max":return reduceAccessor$1(max$1);case"max-index":return reduceAccessor$1(maxIndex);case"mean":return reduceMaybeTemporalAccessor(mean);case"median":return reduceMaybeTemporalAccessor(median);case"variance":return reduceAccessor$1(variance);case"mode":return reduceAccessor$1(mode)}return o(i)}function invalidReduce(i){throw new Error(`invalid reduce: ${i}`)}function maybeSubgroup(i,e){for(const o in e){const d=e[o];if(d!==void 0&&!i.some(h=>h.name===o))return d}}function maybeSort(i,e,o){if(e){const d=e.output.transform(),h=(g,b)=>ascendingDefined(d[g],d[b]);i.forEach(g=>g.sort(h))}o&&i.forEach(d=>d.reverse())}function reduceReduce(i){return console.warn("deprecated reduce interface; implement reduceIndex instead."),{...i,reduceIndex:i.reduce.bind(i)}}function reduceFunction(i){return{reduceIndex(e,o,d){return i(take(o,e),d)}}}function reduceAccessor$1(i){return{reduceIndex(e,o){return i(e,d=>o[d])}}}function reduceMaybeTemporalAccessor(i){return{reduceIndex(e,o){const d=i(e,h=>o[h]);return isTemporal(o)?new Date(d):d}}}const reduceIdentity={reduceIndex(i,e){return take(e,i)}},reduceFirst$1={reduceIndex(i,e){return e[i[0]]}},reduceTitle={reduceIndex(i,e){const d=sort$1(rollup(i,g=>g.length,g=>e[g]),second),h=d.slice(-5).reverse();if(h.length<d.length){const g=d.slice(0,-4);h[4]=[`… ${g.length.toLocaleString("en-US")} more`,sum$2(g,second)]}return h.map(([g,b])=>`${g} (${b.toLocaleString("en-US")})`).join(`
`)}},reduceLast$1={reduceIndex(i,e){return e[i[i.length-1]]}},reduceCount={label:"Frequency",reduceIndex(i){return i.length}},reduceDistinct={label:"Distinct",reduceIndex(i,e){const o=new InternSet;for(const d of i)o.add(e[d]);return o.size}},reduceSum$1=reduceAccessor$1(sum$2);function reduceProportion(i,e){return i==null?{scope:e,label:"Frequency",reduceIndex:(o,d,h=1)=>o.length/h}:{scope:e,reduceIndex:(o,d,h=1)=>sum$2(o,g=>d[g])/h}}function createChannel(i,{scale:e,type:o,value:d,filter:h,hint:g,label:b=labelof(d)},$){return g===void 0&&typeof(d==null?void 0:d.transform)=="function"&&(g=d.hint),inferChannelScale($,{scale:e,type:o,value:valueof(i,d),label:b,filter:h,hint:g})}function createChannels(i,e){return Object.fromEntries(Object.entries(i).map(([o,d])=>[o,createChannel(e,d,o)]))}function valueObject(i,e){const o=Object.fromEntries(Object.entries(i).map(([d,{scale:h,value:g}])=>{const b=h==null?null:e[h];return[d,b==null?g:map$1(g,b)]}));return o.channels=i,o}function inferChannelScale(i,e){const{scale:o,value:d}=e;if(o===!0||o==="auto")switch(i){case"fill":case"stroke":case"color":e.scale=o!==!0&&isEvery(d,isColor$1)?null:"color";break;case"fillOpacity":case"strokeOpacity":case"opacity":e.scale=o!==!0&&isEvery(d,isOpacity)?null:"opacity";break;case"symbol":o!==!0&&isEvery(d,isSymbol$1)?(e.scale=null,e.value=map$1(d,maybeSymbol)):e.scale="symbol";break;default:e.scale=registry.has(i)?i:null;break}else if(o===!1)e.scale=null;else if(o!=null&&!registry.has(o))throw new Error(`unknown scale: ${o}`);return e}function channelDomain(i,e,o,d,h){const{order:g,reverse:b,reduce:$=!0,limit:j}=h;for(const et in h){if(!registry.has(et))continue;let{value:tt,order:nt=g,reverse:rt=b,reduce:ot=$,limit:st=j}=maybeValue(h[et]);const bt=tt==null?void 0:tt.startsWith("-");if(bt&&(tt=tt.slice(1)),nt=nt===void 0?bt!==(tt==="width"||tt==="height")?descendingGroup:ascendingGroup:maybeOrder$1(nt),ot==null||ot===!1)continue;const vt=et==="fx"||et==="fy"?reindexFacetChannel(e,d[et]):findScaleChannel(o,et);if(!vt)throw new Error(`missing channel for scale: ${et}`);const at=vt.value,[ut=0,$t=1/0]=isIterable$1(st)?st:st<0?[st]:[0,st];if(tt==null)vt.domain=()=>{let wt=Array.from(new InternSet(at));return rt&&(wt=wt.reverse()),(ut!==0||$t!==1/0)&&(wt=wt.slice(ut,$t)),wt};else{const wt=tt==="data"?i:tt==="height"?difference(o,"y1","y2"):tt==="width"?difference(o,"x1","x2"):values(o,tt,tt==="y"?"y2":tt==="x"?"x2":void 0),At=maybeReduce$1(ot===!0?"max":ot,wt);vt.domain=()=>{let xt=rollups(range(at),Rt=>At.reduceIndex(Rt,wt),Rt=>at[Rt]);return nt&&xt.sort(nt),rt&&xt.reverse(),(ut!==0||$t!==1/0)&&(xt=xt.slice(ut,$t)),xt.map(first)}}}}function findScaleChannel(i,e){for(const o in i){const d=i[o];if(d.scale===e)return d}}function reindexFacetChannel(i,e){const o=i.original;if(o===i)return e;const d=e.value,h=e.value=[];for(let g=0;g<o.length;++g){const b=d[o[g][0]];for(const $ of i[g])h[$]=b}return e}function difference(i,e,o){const d=values(i,e),h=values(i,o);return map$1(h,(g,b)=>Math.abs(g-d[b]),Float64Array)}function values(i,e,o){let d=i[e];if(!d&&o!==void 0&&(d=i[o]),d)return d.value;throw new Error(`missing channel: ${e}`)}function maybeOrder$1(i){if(i==null||typeof i=="function")return i;switch(`${i}`.toLowerCase()){case"ascending":return ascendingGroup;case"descending":return descendingGroup}throw new Error(`invalid order: ${i}`)}function ascendingGroup([i,e],[o,d]){return ascendingDefined(e,d)||ascendingDefined(i,o)}function descendingGroup([i,e],[o,d]){return descendingDefined(e,d)||ascendingDefined(i,o)}function getSource(i,e){let o=i[e];if(o){for(;o.source;)o=o.source;return o.source===null?null:o}}function memoize1(i){let e,o;return(...d)=>(((o==null?void 0:o.length)!==d.length||o.some((h,g)=>h!==d[g]))&&(o=d,e=i(...d)),e)}const numberFormat=memoize1(i=>new Intl.NumberFormat(i)),monthFormat=memoize1((i,e)=>new Intl.DateTimeFormat(i,{timeZone:"UTC",...e&&{month:e}})),weekdayFormat=memoize1((i,e)=>new Intl.DateTimeFormat(i,{timeZone:"UTC",...e&&{weekday:e}}));function formatNumber(i="en-US"){const e=numberFormat(i);return o=>o!=null&&!isNaN(o)?e.format(o):void 0}function formatMonth(i="en-US",e="short"){const o=monthFormat(i,e);return d=>d!=null&&!isNaN(d=+new Date(Date.UTC(2e3,+d)))?o.format(d):void 0}function formatWeekday(i="en-US",e="short"){const o=weekdayFormat(i,e);return d=>d!=null&&!isNaN(d=+new Date(Date.UTC(2001,0,+d)))?o.format(d):void 0}function formatIsoDate(i){return format$1(i,"Invalid Date")}function formatAuto(i="en-US"){const e=formatNumber(i);return o=>(o instanceof Date?formatIsoDate:typeof o=="number"?e:string)(o)}const formatDefault=formatAuto();let warnings=0,lastMessage;function consumeWarnings(){const i=warnings;return warnings=0,lastMessage=void 0,i}function warn(i){i!==lastMessage&&(lastMessage=i,console.warn(i),++warnings)}const offset=(typeof window<"u"?window.devicePixelRatio>1:typeof it>"u")?0:.5;let nextClipId=0;function getClipId(){return`plot-clip-${++nextClipId}`}function styles(i,{title:e,href:o,ariaLabel:d,ariaDescription:h,ariaHidden:g,target:b,fill:$,fillOpacity:j,stroke:et,strokeWidth:tt,strokeOpacity:nt,strokeLinejoin:rt,strokeLinecap:ot,strokeMiterlimit:st,strokeDasharray:bt,strokeDashoffset:vt,opacity:at,mixBlendMode:ut,imageFilter:$t,paintOrder:wt,pointerEvents:At,shapeRendering:xt,channels:Rt},{ariaLabel:Ot,fill:kt="currentColor",fillOpacity:Mt,stroke:Bt="none",strokeOpacity:jt,strokeWidth:zt,strokeLinecap:Nt,strokeLinejoin:Ct,strokeMiterlimit:Ft,paintOrder:Vt}){kt===null&&($=null,j=null),Bt===null&&(et=null,nt=null),isNoneish(kt)?!isNoneish(Bt)&&(!isNoneish($)||Rt!=null&&Rt.fill)&&(Bt="none"):isNoneish(Bt)&&(!isNoneish(et)||Rt!=null&&Rt.stroke)&&(kt="none");const[Ut,Ht]=maybeColorChannel($,kt),[Pt,Yt]=maybeNumberChannel(j,Mt),[Xt,wn]=maybeColorChannel(et,Bt),[Mn,Cn]=maybeNumberChannel(nt,jt),[On,vn]=maybeNumberChannel(at);isNone(wn)||(tt===void 0&&(tt=zt),ot===void 0&&(ot=Nt),rt===void 0&&(rt=Ct),st===void 0&&!isRound(rt)&&(st=Ft),!isNone(Ht)&&wt===void 0&&(wt=Vt));const[Nn,Jt]=maybeNumberChannel(tt);return kt!==null&&(i.fill=impliedString(Ht,"currentColor"),i.fillOpacity=impliedNumber(Yt,1)),Bt!==null&&(i.stroke=impliedString(wn,"none"),i.strokeWidth=impliedNumber(Jt,1),i.strokeOpacity=impliedNumber(Cn,1),i.strokeLinejoin=impliedString(rt,"miter"),i.strokeLinecap=impliedString(ot,"butt"),i.strokeMiterlimit=impliedNumber(st,4),i.strokeDasharray=impliedString(bt,"none"),i.strokeDashoffset=impliedString(vt,"0")),i.target=string(b),i.ariaLabel=string(Ot),i.ariaDescription=string(h),i.ariaHidden=string(g),i.opacity=impliedNumber(vn,1),i.mixBlendMode=impliedString(ut,"normal"),i.imageFilter=impliedString($t,"none"),i.paintOrder=impliedString(wt,"normal"),i.pointerEvents=impliedString(At,"auto"),i.shapeRendering=impliedString(xt,"auto"),{title:{value:e,optional:!0,filter:null},href:{value:o,optional:!0,filter:null},ariaLabel:{value:d,optional:!0,filter:null},fill:{value:Ut,scale:"auto",optional:!0},fillOpacity:{value:Pt,scale:"auto",optional:!0},stroke:{value:Xt,scale:"auto",optional:!0},strokeOpacity:{value:Mn,scale:"auto",optional:!0},strokeWidth:{value:Nn,optional:!0},opacity:{value:On,scale:"auto",optional:!0}}}function applyTitle(i,e){e&&i.filter(o=>nonempty(e[o])).append("title").call(applyText,e)}function applyTitleGroup(i,e){e&&i.filter(([o])=>nonempty(e[o])).append("title").call(applyTextGroup,e)}function applyText(i,e){e&&i.text(o=>formatDefault(e[o]))}function applyTextGroup(i,e){e&&i.text(([o])=>formatDefault(e[o]))}function applyChannelStyles(i,{target:e,tip:o},{ariaLabel:d,title:h,fill:g,fillOpacity:b,stroke:$,strokeOpacity:j,strokeWidth:et,opacity:tt,href:nt}){d&&applyAttr(i,"aria-label",rt=>d[rt]),g&&applyAttr(i,"fill",rt=>g[rt]),b&&applyAttr(i,"fill-opacity",rt=>b[rt]),$&&applyAttr(i,"stroke",rt=>$[rt]),j&&applyAttr(i,"stroke-opacity",rt=>j[rt]),et&&applyAttr(i,"stroke-width",rt=>et[rt]),tt&&applyAttr(i,"opacity",rt=>tt[rt]),nt&&applyHref(i,rt=>nt[rt],e),o||applyTitle(i,h)}function applyGroupedChannelStyles(i,{target:e,tip:o},{ariaLabel:d,title:h,fill:g,fillOpacity:b,stroke:$,strokeOpacity:j,strokeWidth:et,opacity:tt,href:nt}){d&&applyAttr(i,"aria-label",([rt])=>d[rt]),g&&applyAttr(i,"fill",([rt])=>g[rt]),b&&applyAttr(i,"fill-opacity",([rt])=>b[rt]),$&&applyAttr(i,"stroke",([rt])=>$[rt]),j&&applyAttr(i,"stroke-opacity",([rt])=>j[rt]),et&&applyAttr(i,"stroke-width",([rt])=>et[rt]),tt&&applyAttr(i,"opacity",([rt])=>tt[rt]),nt&&applyHref(i,([rt])=>nt[rt],e),o||applyTitleGroup(i,h)}function groupAesthetics({ariaLabel:i,title:e,fill:o,fillOpacity:d,stroke:h,strokeOpacity:g,strokeWidth:b,opacity:$,href:j},{tip:et}){return[i,et?void 0:e,o,d,h,g,b,$,j].filter(tt=>tt!==void 0)}function groupZ(i,e,o){const d=group$1(i,h=>e[h]);return o===void 0&&d.size>1+i.length>>1&&warn("Warning: the implicit z channel has high cardinality. This may occur when the fill or stroke channel is associated with quantitative data rather than ordinal or categorical data. You can suppress this warning by setting the z option explicitly; if this data represents a single series, set z to null."),d.values()}function*groupIndex(i,e,o,d){const{z:h}=o,{z:g}=d,b=groupAesthetics(d,o),$=[...e,...b];for(const j of g?groupZ(i,g,h):[i]){let et,tt;e:for(const nt of j){for(const rt of $)if(!defined(rt[nt])){tt&&tt.push(-1);continue e}if(et===void 0){tt&&(yield tt),et=b.map(rt=>keyof(rt[nt])),tt=[nt];continue}tt.push(nt);for(let rt=0;rt<b.length;++rt)if(keyof(b[rt][nt])!==et[rt]){yield tt,et=b.map(st=>keyof(st[nt])),tt=[nt];continue e}}tt&&(yield tt)}}function maybeClip(i){return i===!0?i="frame":i===!1?i=null:i!=null&&(i=keyword(i,"clip",["frame","sphere"])),i}function applyClip(i,e,o,d){let h;const{clip:g=d.clip}=e;switch(g){case"frame":{const{width:b,height:$,marginLeft:j,marginRight:et,marginTop:tt,marginBottom:nt}=o,rt=getClipId();h=`url(#${rt})`,i=create("svg:g",d).call(ot=>ot.append("svg:clipPath").attr("id",rt).append("rect").attr("x",j).attr("y",tt).attr("width",b-et-j).attr("height",$-tt-nt)).each(function(){this.appendChild(i.node()),i.node=()=>this});break}case"sphere":{const{projection:b}=d;if(!b)throw new Error('the "sphere" clip option requires a projection');const $=getClipId();h=`url(#${$})`,i.append("clipPath").attr("id",$).append("path").attr("d",geoPath(b)({type:"Sphere"}));break}}applyAttr(i,"aria-label",e.ariaLabel),applyAttr(i,"aria-description",e.ariaDescription),applyAttr(i,"aria-hidden",e.ariaHidden),applyAttr(i,"clip-path",h)}function applyIndirectStyles(i,e,o,d){applyClip(i,e,o,d),applyAttr(i,"fill",e.fill),applyAttr(i,"fill-opacity",e.fillOpacity),applyAttr(i,"stroke",e.stroke),applyAttr(i,"stroke-width",e.strokeWidth),applyAttr(i,"stroke-opacity",e.strokeOpacity),applyAttr(i,"stroke-linejoin",e.strokeLinejoin),applyAttr(i,"stroke-linecap",e.strokeLinecap),applyAttr(i,"stroke-miterlimit",e.strokeMiterlimit),applyAttr(i,"stroke-dasharray",e.strokeDasharray),applyAttr(i,"stroke-dashoffset",e.strokeDashoffset),applyAttr(i,"shape-rendering",e.shapeRendering),applyAttr(i,"filter",e.imageFilter),applyAttr(i,"paint-order",e.paintOrder);const{pointerEvents:h=d.pointerSticky===!1?"none":void 0}=e;applyAttr(i,"pointer-events",h)}function applyDirectStyles(i,e){applyStyle(i,"mix-blend-mode",e.mixBlendMode),applyAttr(i,"opacity",e.opacity)}function applyHref(i,e,o){i.each(function(d){const h=e(d);if(h!=null){const g=this.ownerDocument.createElementNS(namespaces.svg,"a");g.setAttribute("fill","inherit"),g.setAttributeNS(namespaces.xlink,"href",h),o!=null&&g.setAttribute("target",o),this.parentNode.insertBefore(g,this).appendChild(this)}})}function applyAttr(i,e,o){o!=null&&i.attr(e,o)}function applyStyle(i,e,o){o!=null&&i.style(e,o)}function applyTransform(i,e,{x:o,y:d},h=offset,g=offset){h+=e.dx,g+=e.dy,o!=null&&o.bandwidth&&(h+=o.bandwidth()/2),d!=null&&d.bandwidth&&(g+=d.bandwidth()/2),(h||g)&&i.attr("transform",`translate(${h},${g})`)}function impliedString(i,e){if((i=string(i))!==e)return i}function impliedNumber(i,e){if((i=number$1(i))!==e)return i}const validClassName=/^-?([_a-z]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])([_a-z0-9-]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])*$/i;function maybeClassName(i){if(i===void 0)return"plot-d6a7b5";if(i=`${i}`,!validClassName.test(i))throw new Error(`invalid class name: ${i}`);return i}function applyInlineStyles(i,e){if(typeof e=="string")i.property("style",e);else if(e!=null)for(const o of i)Object.assign(o.style,e)}function applyFrameAnchor({frameAnchor:i},{width:e,height:o,marginTop:d,marginRight:h,marginBottom:g,marginLeft:b}){return[/left$/.test(i)?b:/right$/.test(i)?e-h:(b+e-h)/2,/^top/.test(i)?d:/^bottom/.test(i)?o-g:(d+o-g)/2]}function createContext(i={}){const{document:e=typeof window<"u"?window.document:void 0,clip:o}=i;return{document:e,clip:maybeClip(o)}}function create(i,{document:e}){return select$1(creator(i).call(e.documentElement))}const pi=Math.PI,tau=2*pi,defaultAspectRatio=.618;function createProjection({projection:i,inset:e=0,insetTop:o=e,insetRight:d=e,insetBottom:h=e,insetLeft:g=e}={},b){if(i==null)return;if(typeof i.stream=="function")return i;let $,j,et="frame";if(isObject$1(i)){let At;if({type:i,domain:j,inset:At,insetTop:o=At!==void 0?At:o,insetRight:d=At!==void 0?At:d,insetBottom:h=At!==void 0?At:h,insetLeft:g=At!==void 0?At:g,clip:et=et,...$}=i,i==null)return}typeof i!="function"&&({type:i}=namedProjection(i));const{width:tt,height:nt,marginLeft:rt,marginRight:ot,marginTop:st,marginBottom:bt}=b,vt=tt-rt-ot-g-d,at=nt-st-bt-o-h;if(i=i==null?void 0:i({width:vt,height:at,clip:et,...$}),i==null)return;et=maybePostClip(et,rt,st,tt-ot,nt-bt);let ut=rt+g,$t=st+o,wt;if(j!=null){const[[At,xt],[Rt,Ot]]=geoPath(i).bounds(j),kt=Math.min(vt/(Rt-At),at/(Ot-xt));kt>0?(ut-=(kt*(At+Rt)-vt)/2,$t-=(kt*(xt+Ot)-at)/2,wt=geoTransform({point(Mt,Bt){this.stream.point(Mt*kt+ut,Bt*kt+$t)}})):warn("Warning: the projection could not be fit to the specified domain; using the default scale.")}return wt??(wt=ut===0&&$t===0?identity():geoTransform({point(At,xt){this.stream.point(At+ut,xt+$t)}})),{stream:At=>i.stream(wt.stream(et(At)))}}function namedProjection(i){switch(`${i}`.toLowerCase()){case"albers-usa":return scaleProjection$1(geoAlbersUsa,.7463,.4673);case"albers":return conicProjection(geoAlbers,.7463,.4673);case"azimuthal-equal-area":return scaleProjection$1(geoAzimuthalEqualArea,4,4);case"azimuthal-equidistant":return scaleProjection$1(geoAzimuthalEquidistant,tau,tau);case"conic-conformal":return conicProjection(geoConicConformal,tau,tau);case"conic-equal-area":return conicProjection(geoConicEqualArea,6.1702,2.9781);case"conic-equidistant":return conicProjection(geoConicEquidistant,7.312,3.6282);case"equal-earth":return scaleProjection$1(geoEqualEarth,5.4133,2.6347);case"equirectangular":return scaleProjection$1(geoEquirectangular,tau,pi);case"gnomonic":return scaleProjection$1(geoGnomonic,3.4641,3.4641);case"identity":return{type:identity};case"reflect-y":return{type:reflectY};case"mercator":return scaleProjection$1(geoMercator,tau,tau);case"orthographic":return scaleProjection$1(geoOrthographic,2,2);case"stereographic":return scaleProjection$1(geoStereographic,2,2);case"transverse-mercator":return scaleProjection$1(geoTransverseMercator,tau,tau);default:throw new Error(`unknown projection type: ${i}`)}}function maybePostClip(i,e,o,d,h){if(i===!1||i==null||typeof i=="number")return g=>g;switch(i===!0&&(i="frame"),`${i}`.toLowerCase()){case"frame":return clipRectangle(e,o,d,h);default:throw new Error(`unknown projection clip type: ${i}`)}}function scaleProjection$1(i,e,o){return{type:({width:d,height:h,rotate:g,precision:b=.15,clip:$})=>{var et,tt,nt;const j=i();return b!=null&&((et=j.precision)==null||et.call(j,b)),g!=null&&((tt=j.rotate)==null||tt.call(j,g)),typeof $=="number"&&((nt=j.clipAngle)==null||nt.call(j,$)),j.scale(Math.min(d/e,h/o)),j.translate([d/2,h/2]),j},aspectRatio:o/e}}function conicProjection(i,e,o){const{type:d,aspectRatio:h}=scaleProjection$1(i,e,o);return{type:g=>{const{parallels:b,domain:$,width:j,height:et}=g,tt=d(g);return b!=null&&(tt.parallels(b),$===void 0&&tt.fitSize([j,et],{type:"Sphere"})),tt},aspectRatio:h}}const identity=constant({stream:i=>i}),reflectY=constant(geoTransform({point(i,e){this.stream.point(i,-e)}}));function project(i,e,o,d){const h=o[i],g=o[e],b=h.length,$=o[i]=new Float64Array(b).fill(NaN),j=o[e]=new Float64Array(b).fill(NaN);let et;const tt=d.stream({point(nt,rt){$[et]=nt,j[et]=rt}});for(et=0;et<b;++et)tt.point(h[et],g[et])}function hasProjection({projection:i}={}){return i==null?!1:typeof i.stream=="function"?!0:(isObject$1(i)&&(i=i.type),i!=null)}function projectionAspectRatio(i){if(typeof(i==null?void 0:i.stream)=="function")return defaultAspectRatio;if(isObject$1(i)&&(i=i.type),i!=null){if(typeof i!="function"){const{aspectRatio:e}=namedProjection(i);if(e)return e}return defaultAspectRatio}}function applyPosition(i,e,{projection:o}){const{x:d,y:h}=i;let g={};return d&&(g.x=d),h&&(g.y=h),g=valueObject(g,e),o&&(d==null?void 0:d.scale)==="x"&&(h==null?void 0:h.scale)==="y"&&project("x","y",g,o),d&&(g.x=coerceNumbers(g.x)),h&&(g.y=coerceNumbers(g.y)),g}function getGeometryChannels(i){const e=[],o=[],d={scale:"x",value:e},h={scale:"y",value:o},g={point(b,$){e.push(b),o.push($)},lineStart(){},lineEnd(){},polygonStart(){},polygonEnd(){},sphere(){}};for(const b of i.value)geoStream(b,g);return[d,h]}const categoricalSchemes=new Map([["accent",schemeAccent],["category10",schemeCategory10],["dark2",schemeDark2],["paired",schemePaired],["pastel1",schemePastel1],["pastel2",schemePastel2],["set1",schemeSet1],["set2",schemeSet2],["set3",schemeSet3],["tableau10",schemeTableau10]]);function isCategoricalScheme(i){return i!=null&&categoricalSchemes.has(`${i}`.toLowerCase())}const ordinalSchemes=new Map([...categoricalSchemes,["brbg",scheme11(scheme$q,interpolateBrBG)],["prgn",scheme11(scheme$p,interpolatePRGn)],["piyg",scheme11(scheme$o,interpolatePiYG)],["puor",scheme11(scheme$n,interpolatePuOr)],["rdbu",scheme11(scheme$m,interpolateRdBu)],["rdgy",scheme11(scheme$l,interpolateRdGy)],["rdylbu",scheme11(scheme$k,interpolateRdYlBu)],["rdylgn",scheme11(scheme$j,interpolateRdYlGn)],["spectral",scheme11(scheme$i,interpolateSpectral)],["burd",scheme11r(scheme$m,interpolateRdBu)],["buylrd",scheme11r(scheme$k,interpolateRdYlBu)],["blues",scheme9(scheme$5,interpolateBlues)],["greens",scheme9(scheme$4,interpolateGreens)],["greys",scheme9(scheme$3,interpolateGreys)],["oranges",scheme9(scheme,interpolateOranges)],["purples",scheme9(scheme$2,interpolatePurples)],["reds",scheme9(scheme$1,interpolateReds)],["turbo",schemei(interpolateTurbo)],["viridis",schemei(interpolateViridis)],["magma",schemei(magma)],["inferno",schemei(inferno)],["plasma",schemei(plasma)],["cividis",schemei(interpolateCividis)],["cubehelix",schemei(interpolateCubehelixDefault)],["warm",schemei(warm)],["cool",schemei(cool)],["bugn",scheme9(scheme$h,interpolateBuGn)],["bupu",scheme9(scheme$g,interpolateBuPu)],["gnbu",scheme9(scheme$f,interpolateGnBu)],["orrd",scheme9(scheme$e,interpolateOrRd)],["pubu",scheme9(scheme$c,interpolatePuBu)],["pubugn",scheme9(scheme$d,interpolatePuBuGn)],["purd",scheme9(scheme$b,interpolatePuRd)],["rdpu",scheme9(scheme$a,interpolateRdPu)],["ylgn",scheme9(scheme$8,interpolateYlGn)],["ylgnbu",scheme9(scheme$9,interpolateYlGnBu)],["ylorbr",scheme9(scheme$7,interpolateYlOrBr)],["ylorrd",scheme9(scheme$6,interpolateYlOrRd)],["rainbow",schemeicyclical(interpolateRainbow)],["sinebow",schemeicyclical(interpolateSinebow)]]);function scheme9(i,e){return({length:o})=>o===1?[i[3][1]]:o===2?[i[3][1],i[3][2]]:(o=Math.max(3,Math.floor(o)),o>9?quantize(e,o):i[o])}function scheme11(i,e){return({length:o})=>o===2?[i[3][0],i[3][2]]:(o=Math.max(3,Math.floor(o)),o>11?quantize(e,o):i[o])}function scheme11r(i,e){return({length:o})=>o===2?[i[3][2],i[3][0]]:(o=Math.max(3,Math.floor(o)),o>11?quantize(d=>e(1-d),o):i[o].slice().reverse())}function schemei(i){return({length:e})=>quantize(i,Math.max(2,Math.floor(e)))}function schemeicyclical(i){return({length:e})=>quantize(i,Math.floor(e)+1).slice(0,-1)}function ordinalScheme(i){const e=`${i}`.toLowerCase();if(!ordinalSchemes.has(e))throw new Error(`unknown ordinal scheme: ${e}`);return ordinalSchemes.get(e)}function ordinalRange(i,e){const o=ordinalScheme(i),d=typeof o=="function"?o({length:e}):o;return d.length!==e?d.slice(0,e):d}function maybeBooleanRange(i,e="greys"){const o=new Set,[d,h]=ordinalRange(e,2);for(const g of i)if(g!=null)if(g===!0)o.add(h);else if(g===!1)o.add(d);else return;return[...o]}const quantitativeSchemes=new Map([["brbg",interpolateBrBG],["prgn",interpolatePRGn],["piyg",interpolatePiYG],["puor",interpolatePuOr],["rdbu",interpolateRdBu],["rdgy",interpolateRdGy],["rdylbu",interpolateRdYlBu],["rdylgn",interpolateRdYlGn],["spectral",interpolateSpectral],["burd",i=>interpolateRdBu(1-i)],["buylrd",i=>interpolateRdYlBu(1-i)],["blues",interpolateBlues],["greens",interpolateGreens],["greys",interpolateGreys],["purples",interpolatePurples],["reds",interpolateReds],["oranges",interpolateOranges],["turbo",interpolateTurbo],["viridis",interpolateViridis],["magma",magma],["inferno",inferno],["plasma",plasma],["cividis",interpolateCividis],["cubehelix",interpolateCubehelixDefault],["warm",warm],["cool",cool],["bugn",interpolateBuGn],["bupu",interpolateBuPu],["gnbu",interpolateGnBu],["orrd",interpolateOrRd],["pubugn",interpolatePuBuGn],["pubu",interpolatePuBu],["purd",interpolatePuRd],["rdpu",interpolateRdPu],["ylgnbu",interpolateYlGnBu],["ylgn",interpolateYlGn],["ylorbr",interpolateYlOrBr],["ylorrd",interpolateYlOrRd],["rainbow",interpolateRainbow],["sinebow",interpolateSinebow]]);function quantitativeScheme(i){const e=`${i}`.toLowerCase();if(!quantitativeSchemes.has(e))throw new Error(`unknown quantitative scheme: ${e}`);return quantitativeSchemes.get(e)}const divergingSchemes=new Set(["brbg","prgn","piyg","puor","rdbu","rdgy","rdylbu","rdylgn","spectral","burd","buylrd"]);function isDivergingScheme(i){return i!=null&&divergingSchemes.has(`${i}`.toLowerCase())}const flip=i=>e=>i(1-e),unit=[0,1],interpolators=new Map([["number",interpolateNumber],["rgb",interpolateRgb],["hsl",interpolateHsl],["hcl",interpolateHcl],["lab",lab]]);function maybeInterpolator(i){const e=`${i}`.toLowerCase();if(!interpolators.has(e))throw new Error(`unknown interpolator: ${e}`);return interpolators.get(e)}function createScaleQ(i,e,o,{type:d,nice:h,clamp:g,zero:b,domain:$=inferAutoDomain(i,o),unknown:j,round:et,scheme:tt,interval:nt,range:rt=registry.get(i)===radius?inferRadialRange(o,$):registry.get(i)===length?inferLengthRange(o,$):registry.get(i)===opacity?unit:void 0,interpolate:ot=registry.get(i)===color?tt==null&&rt!==void 0?interpolateRgb:quantitativeScheme(tt!==void 0?tt:d==="cyclical"?"rainbow":"turbo"):et?interpolateRound:interpolateNumber,reverse:st}){if(nt=maybeRangeInterval(nt,d),(d==="cyclical"||d==="sequential")&&(d="linear"),typeof ot!="function"&&(ot=maybeInterpolator(ot)),st=!!st,rt!==void 0){const bt=($=arrayify($)).length,vt=(rt=arrayify(rt)).length;if(bt!==vt){if(ot.length===1)throw new Error("invalid piecewise interpolator");ot=piecewise(ot,rt),rt=void 0}}if(ot.length===1?(st&&(ot=flip(ot),st=!1),rt===void 0&&(rt=Float64Array.from($,(bt,vt)=>vt/($.length-1)),rt.length===2&&(rt=unit)),e.interpolate((rt===unit?constant:interpolatePiecewise)(ot))):e.interpolate(ot),b){const[bt,vt]=extent$2($);(bt>0||vt<0)&&($=slice($),orderof($)!==Math.sign(bt)?$[$.length-1]=0:$[0]=0)}return st&&($=reverse$1($)),e.domain($).unknown(j),h&&(e.nice(maybeNice(h,d)),$=e.domain()),rt!==void 0&&e.range(rt),g&&e.clamp(g),{type:d,domain:$,range:rt,scale:e,interpolate:ot,interval:nt}}function maybeNice(i,e){return i===!0?void 0:typeof i=="number"?i:maybeNiceInterval(i,e)}function createScaleLinear(i,e,o){return createScaleQ(i,linear(),e,o)}function createScaleSqrt(i,e,o){return createScalePow(i,e,{...o,exponent:.5})}function createScalePow(i,e,{exponent:o=1,...d}){return createScaleQ(i,pow().exponent(o),e,{...d,type:"pow"})}function createScaleLog(i,e,{base:o=10,domain:d=inferLogDomain(e),...h}){return createScaleQ(i,log().base(o),e,{...h,domain:d})}function createScaleSymlog(i,e,{constant:o=1,...d}){return createScaleQ(i,symlog().constant(o),e,d)}function createScaleQuantile(i,e,{range:o,quantiles:d=o===void 0?5:(o=[...o]).length,n:h=d,scheme:g="rdylbu",domain:b=inferQuantileDomain(e),unknown:$,interpolate:j,reverse:et}){return o===void 0&&(o=j!==void 0?quantize(j,h):registry.get(i)===color?ordinalRange(g,h):void 0),b.length>0&&(b=quantile(b,o===void 0?{length:h}:o).quantiles()),createScaleThreshold(i,e,{domain:b,range:o,reverse:et,unknown:$})}function createScaleQuantize(i,e,{range:o,n:d=o===void 0?5:(o=[...o]).length,scheme:h="rdylbu",domain:g=inferAutoDomain(i,e),unknown:b,interpolate:$,reverse:j}){const[et,tt]=extent$2(g);let nt;return o===void 0?(nt=ticks(et,tt,d),nt[0]<=et&&nt.splice(0,1),nt[nt.length-1]>=tt&&nt.pop(),d=nt.length+1,o=$!==void 0?quantize($,d):registry.get(i)===color?ordinalRange(h,d):void 0):(nt=quantize(interpolateNumber(et,tt),d+1).slice(1,-1),et instanceof Date&&(nt=nt.map(rt=>new Date(rt)))),orderof(arrayify(g))<0&&nt.reverse(),createScaleThreshold(i,e,{domain:nt,range:o,reverse:j,unknown:b})}function createScaleThreshold(i,e,{domain:o=[0],unknown:d,scheme:h="rdylbu",interpolate:g,range:b=g!==void 0?quantize(g,o.length+1):registry.get(i)===color?ordinalRange(h,o.length+1):void 0,reverse:$}){o=arrayify(o);const j=orderof(o);if(!isNaN(j)&&!isOrdered(o,j))throw new Error(`the ${i} scale has a non-monotonic domain`);return $&&(b=reverse$1(b)),{type:"threshold",scale:threshold(j<0?reverse$1(o):o,b===void 0?[]:b).unknown(d),domain:o,range:b}}function isOrdered(i,e){for(let o=1,d=i.length,h=i[0];o<d;++o){const g=descending(h,h=i[o]);if(g!==0&&g!==e)return!1}return!0}function createScaleIdentity(i){return{type:"identity",scale:hasNumericRange(registry.get(i))?identity$3():e=>e}}function inferDomain$1(i,e=finite$1){return i.length?[min$2(i,({value:o})=>o===void 0?o:min$2(o,e)),max$1(i,({value:o})=>o===void 0?o:max$1(o,e))]:[0,1]}function inferAutoDomain(i,e){const o=registry.get(i);return(o===radius||o===opacity||o===length?inferZeroDomain:inferDomain$1)(e)}function inferZeroDomain(i){return[0,i.length?max$1(i,({value:e})=>e===void 0?e:max$1(e,finite$1)):1]}function inferRadialRange(i,e){const o=i.find(({radius:b})=>b!==void 0);if(o!==void 0)return[0,o.radius];const d=quantile$1(i,.5,({value:b})=>b===void 0?NaN:quantile$1(b,.25,positive)),h=e.map(b=>3*Math.sqrt(b/d)),g=30/max$1(h);return g<1?h.map(b=>b*g):h}function inferLengthRange(i,e){const o=median(i,({value:g})=>g===void 0?NaN:median(g,Math.abs)),d=e.map(g=>12*g/o),h=60/max$1(d);return h<1?d.map(g=>g*h):d}function inferLogDomain(i){for(const{value:e}of i)if(e!==void 0)for(let o of e){if(o>0)return inferDomain$1(i,positive);if(o<0)return inferDomain$1(i,negative)}return[1,10]}function inferQuantileDomain(i){const e=[];for(const{value:o}of i)if(o!==void 0)for(const d of o)e.push(d);return e}function interpolatePiecewise(i){return(e,o)=>d=>i(e+d*(o-e))}function createScaleD(i,e,o,d,{type:h,nice:g,clamp:b,domain:$=inferDomain$1(d),unknown:j,pivot:et=0,scheme:tt,range:nt,symmetric:rt=!0,interpolate:ot=registry.get(i)===color?tt==null&&nt!==void 0?interpolateRgb:quantitativeScheme(tt!==void 0?tt:"rdbu"):interpolateNumber,reverse:st}){et=+et,$=arrayify($);let[bt,vt]=$;if($.length>2&&warn(`Warning: the diverging ${i} scale domain contains extra elements.`),descending(bt,vt)<0&&([bt,vt]=[vt,bt],st=!st),bt=Math.min(bt,et),vt=Math.max(vt,et),typeof ot!="function"&&(ot=maybeInterpolator(ot)),nt!==void 0&&(ot=ot.length===1?interpolatePiecewise(ot)(...nt):piecewise(ot,nt)),st&&(ot=flip(ot)),rt){const at=o.apply(et),ut=at-o.apply(bt),$t=o.apply(vt)-at;ut<$t?bt=o.invert(at-$t):ut>$t&&(vt=o.invert(at+ut))}return e.domain([bt,et,vt]).unknown(j).interpolator(ot),b&&e.clamp(b),g&&e.nice(g),{type:h,domain:[bt,vt],pivot:et,interpolate:ot,scale:e}}function createScaleDiverging(i,e,o){return createScaleD(i,diverging(),transformIdentity,e,o)}function createScaleDivergingSqrt(i,e,o){return createScaleDivergingPow(i,e,{...o,exponent:.5})}function createScaleDivergingPow(i,e,{exponent:o=1,...d}){return createScaleD(i,divergingPow().exponent(o=+o),transformPow(o),e,{...d,type:"diverging-pow"})}function createScaleDivergingLog(i,e,{base:o=10,pivot:d=1,domain:h=inferDomain$1(e,d<0?negative:positive),...g}){return createScaleD(i,divergingLog().base(o=+o),transformLog,e,{domain:h,pivot:d,...g})}function createScaleDivergingSymlog(i,e,{constant:o=1,...d}){return createScaleD(i,divergingSymlog().constant(o=+o),transformSymlog(o),e,d)}const transformIdentity={apply(i){return i},invert(i){return i}},transformLog={apply:Math.log,invert:Math.exp},transformSqrt={apply(i){return Math.sign(i)*Math.sqrt(Math.abs(i))},invert(i){return Math.sign(i)*(i*i)}};function transformPow(i){return i===.5?transformSqrt:{apply(e){return Math.sign(e)*Math.pow(Math.abs(e),i)},invert(e){return Math.sign(e)*Math.pow(Math.abs(e),1/i)}}}function transformSymlog(i){return{apply(e){return Math.sign(e)*Math.log1p(Math.abs(e/i))},invert(e){return Math.sign(e)*Math.expm1(Math.abs(e))*i}}}function createScaleT(i,e,o,d){return createScaleQ(i,e,o,d)}function createScaleTime(i,e,o){return createScaleT(i,time(),e,o)}function createScaleUtc(i,e,o){return createScaleT(i,utcTime(),e,o)}const ordinalImplicit=Symbol("ordinal");function createScaleO(i,e,o,{type:d,interval:h,domain:g,range:b,reverse:$,hint:j}){return h=maybeRangeInterval(h,d),g===void 0&&(g=inferDomain(o,h,i)),(d==="categorical"||d===ordinalImplicit)&&(d="ordinal"),$&&(g=reverse$1(g)),g=e.domain(g).domain(),b!==void 0&&(typeof b=="function"&&(b=b(g)),e.range(b)),{type:d,domain:g,range:b,scale:e,hint:j,interval:h}}function createScaleOrdinal(i,e,{type:o,interval:d,domain:h,range:g,scheme:b,unknown:$,...j}){d=maybeRangeInterval(d,o),h===void 0&&(h=inferDomain(e,d,i));let et;if(registry.get(i)===symbol)et=inferSymbolHint(e),g=g===void 0?inferSymbolRange(et):map$1(g,maybeSymbol);else if(registry.get(i)===color&&(g===void 0&&(o==="ordinal"||o===ordinalImplicit)&&(g=maybeBooleanRange(h,b),g!==void 0&&(b=void 0)),b===void 0&&g===void 0&&(b=o==="ordinal"?"turbo":"tableau10"),b!==void 0))if(g!==void 0){const tt=quantitativeScheme(b),nt=g[0],rt=g[1]-g[0];g=({length:ot})=>quantize(st=>tt(nt+rt*st),ot)}else g=ordinalScheme(b);if($===implicit)throw new Error(`implicit unknown on ${i} scale is not supported`);return createScaleO(i,ordinal().unknown($),e,{...j,type:o,domain:h,range:g,hint:et})}function createScalePoint(i,e,{align:o=.5,padding:d=.5,...h}){return maybeRound(point$4().align(o).padding(d),e,h,i)}function createScaleBand(i,e,{align:o=.5,padding:d=.1,paddingInner:h=d,paddingOuter:g=i==="fx"||i==="fy"?0:d,...b}){return maybeRound(band().align(o).paddingInner(h).paddingOuter(g),e,b,i)}function maybeRound(i,e,o,d){let{round:h}=o;return h!==void 0&&i.round(h=!!h),i=createScaleO(d,i,e,o),i.round=h,i}function inferDomain(i,e,o){const d=new InternSet;for(const{value:h,domain:g}of i){if(g!==void 0)return g();if(h!==void 0)for(const b of h)d.add(b)}if(e!==void 0){const[h,g]=extent$2(d).map(e.floor,e);return e.range(h,e.offset(g))}if(d.size>1e4&&registry.get(o)===position$1)throw new Error(`implicit ordinal domain of ${o} scale has more than 10,000 values`);return sort$1(d,ascendingDefined)}function inferHint(i,e){let o;for(const{hint:d}of i){const h=d==null?void 0:d[e];if(h!==void 0){if(o===void 0)o=h;else if(o!==h)return}}return o}function inferSymbolHint(i){return{fill:inferHint(i,"fill"),stroke:inferHint(i,"stroke")}}function inferSymbolRange(i){return isNoneish(i.fill)?symbolsStroke:symbolsFill}function createScales(i,{label:e,inset:o=0,insetTop:d=o,insetRight:h=o,insetBottom:g=o,insetLeft:b=o,round:$,nice:j,clamp:et,zero:tt,align:nt,padding:rt,projection:ot,facet:{label:st=e}={},...bt}={}){const vt={};for(const[at,ut]of i){const $t=bt[at],wt=createScale(at,ut,{round:registry.get(at)===position$1?$:void 0,nice:j,clamp:et,zero:tt,align:nt,padding:rt,projection:ot,...$t});if(wt){let{label:At=at==="fx"||at==="fy"?st:e,percent:xt,transform:Rt,inset:Ot,insetTop:kt=Ot!==void 0?Ot:at==="y"?d:0,insetRight:Mt=Ot!==void 0?Ot:at==="x"?h:0,insetBottom:Bt=Ot!==void 0?Ot:at==="y"?g:0,insetLeft:jt=Ot!==void 0?Ot:at==="x"?b:0}=$t||{};if(Rt==null)Rt=void 0;else if(typeof Rt!="function")throw new Error("invalid scale transform; not a function");wt.percent=!!xt,wt.label=At===void 0?inferScaleLabel(ut,wt):At,wt.transform=Rt,at==="x"||at==="fx"?(wt.insetLeft=+jt,wt.insetRight=+Mt):(at==="y"||at==="fy")&&(wt.insetTop=+kt,wt.insetBottom=+Bt),vt[at]=wt}}return vt}function createScaleFunctions(i){const e={},o={scales:e};for(const[d,h]of Object.entries(i)){const{scale:g,type:b,interval:$,label:j}=h;e[d]=exposeScale(h),o[d]=g,g.type=b,$!=null&&(g.interval=$),j!=null&&(g.label=j)}return o}function autoScaleRange(i,e){const{x:o,y:d,fx:h,fy:g}=i,b=h||g?outerDimensions(e):e;h&&autoScaleRangeX(h,b),g&&autoScaleRangeY(g,b);const $=h||g?innerDimensions(i,e):e;o&&autoScaleRangeX(o,$),d&&autoScaleRangeY(d,$)}function inferScaleLabel(i=[],e){let o;for(const{label:d}of i)if(d!==void 0){if(o===void 0)o=d;else if(o!==d)return}if(o!==void 0)return!isOrdinalScale(e)&&e.percent&&(o=`${o} (%)`),{inferred:!0,toString:()=>o}}function outerDimensions(i){const{marginTop:e,marginRight:o,marginBottom:d,marginLeft:h,width:g,height:b,facet:{marginTop:$,marginRight:j,marginBottom:et,marginLeft:tt}}=i;return{marginTop:Math.max(e,$),marginRight:Math.max(o,j),marginBottom:Math.max(d,et),marginLeft:Math.max(h,tt),width:g,height:b}}function innerDimensions({fx:i,fy:e},o){const{marginTop:d,marginRight:h,marginBottom:g,marginLeft:b,width:$,height:j}=outerDimensions(o);return{marginTop:d,marginRight:h,marginBottom:g,marginLeft:b,width:i?i.scale.bandwidth()+b+h:$,height:e?e.scale.bandwidth()+d+g:j,facet:{width:$,height:j}}}function autoScaleRangeX(i,e){if(i.range===void 0){const{insetLeft:o,insetRight:d}=i,{width:h,marginLeft:g=0,marginRight:b=0}=e,$=g+o,j=h-b-d;i.range=[$,Math.max($,j)],isOrdinalScale(i)||(i.range=piecewiseRange(i)),i.scale.range(i.range)}autoScaleRound(i)}function autoScaleRangeY(i,e){if(i.range===void 0){const{insetTop:o,insetBottom:d}=i,{height:h,marginTop:g=0,marginBottom:b=0}=e,$=g+o,j=h-b-d;i.range=[Math.max($,j),$],isOrdinalScale(i)?i.range.reverse():i.range=piecewiseRange(i),i.scale.range(i.range)}autoScaleRound(i)}function autoScaleRound(i){i.round===void 0&&isBandScale(i)&&roundError(i)<=30&&i.scale.round(!0)}function roundError({scale:i}){const e=i.domain().length,[o,d]=i.range(),h=i.paddingInner?i.paddingInner():1,g=i.paddingOuter?i.paddingOuter():i.padding(),b=e-h,$=Math.abs(d-o)/Math.max(1,b+g*2);return($-Math.floor($))*b}function piecewiseRange(i){const e=i.scale.domain().length+isThresholdScale(i);if(!(e>2))return i.range;const[o,d]=i.range;return Array.from({length:e},(h,g)=>o+g/(e-1)*(d-o))}function normalizeScale(i,e,o){return createScale(i,o===void 0?void 0:[{hint:o}],{...e})}function createScale(i,e=[],o={}){const d=inferScaleType(i,e,o);if(o.type===void 0&&o.domain===void 0&&o.range===void 0&&o.interval==null&&i!=="fx"&&i!=="fy"&&isOrdinalScale({type:d})){const h=e.map(({value:g})=>g).filter(g=>g!==void 0);h.some(isTemporal)?warn(`Warning: some data associated with the ${i} scale are dates. Dates are typically associated with a "utc" or "time" scale rather than a "${formatScaleType(d)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can specify the interval of the ${i} scale (e.g., d3.utcDay), or you can suppress this warning by setting the type of the ${i} scale to "${formatScaleType(d)}".`):h.some(isTemporalString)?warn(`Warning: some data associated with the ${i} scale are strings that appear to be dates (e.g., YYYY-MM-DD). If these strings represent dates, you should parse them to Date objects. Dates are typically associated with a "utc" or "time" scale rather than a "${formatScaleType(d)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can suppress this warning by setting the type of the ${i} scale to "${formatScaleType(d)}".`):h.some(isNumericString)&&warn(`Warning: some data associated with the ${i} scale are strings that appear to be numbers. If these strings represent numbers, you should parse or coerce them to numbers. Numbers are typically associated with a "linear" scale rather than a "${formatScaleType(d)}" scale. If you want to treat this data as ordinal, you can specify the interval of the ${i} scale (e.g., 1 for integers), or you can suppress this warning by setting the type of the ${i} scale to "${formatScaleType(d)}".`)}switch(o.type=d,d){case"diverging":case"diverging-sqrt":case"diverging-pow":case"diverging-log":case"diverging-symlog":case"cyclical":case"sequential":case"linear":case"sqrt":case"threshold":case"quantile":case"pow":case"log":case"symlog":o=coerceType(e,o,coerceNumbers);break;case"identity":switch(registry.get(i)){case position$1:o=coerceType(e,o,coerceNumbers);break;case symbol:o=coerceType(e,o,coerceSymbols);break}break;case"utc":case"time":o=coerceType(e,o,coerceDates);break}switch(d){case"diverging":return createScaleDiverging(i,e,o);case"diverging-sqrt":return createScaleDivergingSqrt(i,e,o);case"diverging-pow":return createScaleDivergingPow(i,e,o);case"diverging-log":return createScaleDivergingLog(i,e,o);case"diverging-symlog":return createScaleDivergingSymlog(i,e,o);case"categorical":case"ordinal":case ordinalImplicit:return createScaleOrdinal(i,e,o);case"cyclical":case"sequential":case"linear":return createScaleLinear(i,e,o);case"sqrt":return createScaleSqrt(i,e,o);case"threshold":return createScaleThreshold(i,e,o);case"quantile":return createScaleQuantile(i,e,o);case"quantize":return createScaleQuantize(i,e,o);case"pow":return createScalePow(i,e,o);case"log":return createScaleLog(i,e,o);case"symlog":return createScaleSymlog(i,e,o);case"utc":return createScaleUtc(i,e,o);case"time":return createScaleTime(i,e,o);case"point":return createScalePoint(i,e,o);case"band":return createScaleBand(i,e,o);case"identity":return createScaleIdentity(i);case void 0:return;default:throw new Error(`unknown scale type: ${d}`)}}function formatScaleType(i){return typeof i=="symbol"?i.description:i}const typeProjection={toString:()=>"projection"};function inferScaleType(i,e,{type:o,domain:d,range:h,scheme:g,pivot:b,projection:$}){if(i==="fx"||i==="fy")return"band";(i==="x"||i==="y")&&$!=null&&(o=typeProjection);for(const{type:et}of e)if(et!==void 0){if(o===void 0)o=et;else if(o!==et)throw new Error(`scale incompatible with channel: ${o} !== ${et}`)}if(o===typeProjection)return;if(o!==void 0)return o;if(d===void 0&&!e.some(({value:et})=>et!==void 0))return;const j=registry.get(i);if(j===radius)return"sqrt";if(j===opacity||j===length)return"linear";if(j===symbol)return"ordinal";if((d||h||[]).length>2)return asOrdinalType(j);if(d!==void 0){if(isOrdinal(d))return asOrdinalType(j);if(isTemporal(d))return"utc"}else{const et=e.map(({value:tt})=>tt).filter(tt=>tt!==void 0);if(et.some(isOrdinal))return asOrdinalType(j);if(et.some(isTemporal))return"utc"}if(j===color){if(b!=null||isDivergingScheme(g))return"diverging";if(isCategoricalScheme(g))return"categorical"}return"linear"}function asOrdinalType(i){switch(i){case position$1:return"point";case color:return ordinalImplicit;default:return"ordinal"}}function isOrdinalScale({type:i}){return i==="ordinal"||i==="point"||i==="band"||i===ordinalImplicit}function isThresholdScale({type:i}){return i==="threshold"}function isBandScale({type:i}){return i==="point"||i==="band"}function isCollapsed(i){if(i===void 0)return!0;const e=i.domain(),o=i(e[0]);for(let d=1,h=e.length;d<h;++d)if(i(e[d])-o)return!1;return!0}function coerceType(i,{domain:e,...o},d){for(const h of i)h.value!==void 0&&(h.value=d(h.value));return{domain:e===void 0?e:d(e),...o}}function coerceSymbols(i){return map$1(i,maybeSymbol)}function scale(i={}){let e;for(const o in i)if(registry.has(o)&&isScaleOptions(i[o])){if(e!==void 0)throw new Error("ambiguous scale definition; multiple scales found");e=exposeScale(normalizeScale(o,i[o]))}if(e===void 0)throw new Error("invalid scale definition; no scale found");return e}function exposeScales(i){return e=>{if(!registry.has(e=`${e}`))throw new Error(`unknown scale: ${e}`);return i[e]}}function exposeScale({scale:i,type:e,domain:o,range:d,interpolate:h,interval:g,transform:b,percent:$,pivot:j}){if(e==="identity")return{type:"identity",apply:tt=>tt,invert:tt=>tt};const et=i.unknown?i.unknown():void 0;return{type:e,domain:slice(o),...d!==void 0&&{range:slice(d)},...b!==void 0&&{transform:b},...$&&{percent:$},...et!==void 0&&{unknown:et},...g!==void 0&&{interval:g},...h!==void 0&&{interpolate:h},...i.clamp&&{clamp:i.clamp()},...j!==void 0&&{pivot:j,symmetric:!1},...i.base&&{base:i.base()},...i.exponent&&{exponent:i.exponent()},...i.constant&&{constant:i.constant()},...i.align&&{align:i.align(),round:i.round()},...i.padding&&(i.paddingInner?{paddingInner:i.paddingInner(),paddingOuter:i.paddingOuter()}:{padding:i.padding()}),...i.bandwidth&&{bandwidth:i.bandwidth(),step:i.step()},apply:tt=>i(tt),...i.invert&&{invert:tt=>i.invert(tt)}}}function createDimensions(i,e,o={}){let d=.5-offset,h=.5+offset,g=.5+offset,b=.5-offset;for(const{marginTop:bt,marginRight:vt,marginBottom:at,marginLeft:ut}of e)bt>d&&(d=bt),vt>h&&(h=vt),at>g&&(g=at),ut>b&&(b=ut);let{margin:$,marginTop:j=$!==void 0?$:d,marginRight:et=$!==void 0?$:h,marginBottom:tt=$!==void 0?$:g,marginLeft:nt=$!==void 0?$:b}=o;j=+j,et=+et,tt=+tt,nt=+nt;let{width:rt=640,height:ot=autoHeight(i,o,{width:rt,marginTopDefault:d,marginRightDefault:h,marginBottomDefault:g,marginLeftDefault:b})+Math.max(0,j-d+tt-g)}=o;rt=+rt,ot=+ot;const st={width:rt,height:ot,marginTop:j,marginRight:et,marginBottom:tt,marginLeft:nt};if(i.fx||i.fy){let{margin:bt,marginTop:vt=bt!==void 0?bt:j,marginRight:at=bt!==void 0?bt:et,marginBottom:ut=bt!==void 0?bt:tt,marginLeft:$t=bt!==void 0?bt:nt}=o.facet??{};vt=+vt,at=+at,ut=+ut,$t=+$t,st.facet={marginTop:vt,marginRight:at,marginBottom:ut,marginLeft:$t}}return st}function autoHeight({x:i,y:e,fy:o,fx:d},{projection:h,aspectRatio:g},{width:b,marginTopDefault:$,marginRightDefault:j,marginBottomDefault:et,marginLeftDefault:tt}){const nt=o?o.scale.domain().length:1,rt=projectionAspectRatio(h);if(rt){const st=d?d.scale.domain().length:1,bt=(1.1*nt-.1)/(1.1*st-.1)*rt,vt=Math.max(.1,Math.min(10,bt));return Math.round((b-tt-j)*vt+$+et)}const ot=e?isOrdinalScale(e)?e.scale.domain().length:Math.max(7,17/nt):1;if(g!=null){if(g=+g,!(isFinite(g)&&g>0))throw new Error(`invalid aspectRatio: ${g}`);const st=aspectRatioLength("y",e)/(aspectRatioLength("x",i)*g),bt=d?d.scale.bandwidth():1,vt=o?o.scale.bandwidth():1,at=bt*(b-tt-j)-i.insetLeft-i.insetRight;return(st*at+e.insetTop+e.insetBottom)/vt+$+et}return!!(e||o)*Math.max(1,Math.min(60,ot*nt))*20+!!d*30+60}function aspectRatioLength(i,e){if(!e)throw new Error(`aspectRatio requires ${i} scale`);const{type:o,domain:d}=e;let h;switch(o){case"linear":case"utc":case"time":h=Number;break;case"pow":{const $=e.scale.exponent();h=j=>Math.pow(j,$);break}case"log":h=Math.log;break;case"point":case"band":return d.length;default:throw new Error(`unsupported ${i} scale for aspectRatio: ${o}`)}const[g,b]=extent$2(d);return Math.abs(h(b)-h(g))}function createFacets(i,e){const{fx:o,fy:d}=createScales(i,e),h=o==null?void 0:o.scale.domain(),g=d==null?void 0:d.scale.domain();return h&&g?cross$1(h,g).map(([b,$],j)=>({x:b,y:$,i:j})):h?h.map((b,$)=>({x:b,i:$})):g?g.map((b,$)=>({y:b,i:$})):void 0}function recreateFacets(i,{x:e,y:o}){return e&&(e=facetIndex(e)),o&&(o=facetIndex(o)),i.filter(e&&o?d=>e.has(d.x)&&o.has(d.y):e?d=>e.has(d.x):d=>o.has(d.y)).sort(e&&o?(d,h)=>e.get(d.x)-e.get(h.x)||o.get(d.y)-o.get(h.y):e?(d,h)=>e.get(d.x)-e.get(h.x):(d,h)=>o.get(d.y)-o.get(h.y))}function facetGroups(i,{fx:e,fy:o}){const d=range(i),h=e==null?void 0:e.value,g=o==null?void 0:o.value;return e&&o?rollup(d,b=>(b.fx=h[b[0]],b.fy=g[b[0]],b),b=>h[b],b=>g[b]):e?rollup(d,b=>(b.fx=h[b[0]],b),b=>h[b]):rollup(d,b=>(b.fy=g[b[0]],b),b=>g[b])}function facetTranslator(i,e,{marginTop:o,marginLeft:d}){return i&&e?({x:h,y:g})=>`translate(${i(h)-d},${e(g)-o})`:i?({x:h})=>`translate(${i(h)-d},0)`:({y:h})=>`translate(0,${e(h)-o})`}function facetExclude(i){const e=[],o=new Uint32Array(sum$2(i,d=>d.length));for(const d of i){let h=0;for(const g of i)d!==g&&(o.set(g,h),h+=g.length);e.push(o.slice(0,h))}return e}const facetAnchors=new Map([["top",facetAnchorTop],["right",facetAnchorRight],["bottom",facetAnchorBottom],["left",facetAnchorLeft],["top-left",and(facetAnchorTop,facetAnchorLeft)],["top-right",and(facetAnchorTop,facetAnchorRight)],["bottom-left",and(facetAnchorBottom,facetAnchorLeft)],["bottom-right",and(facetAnchorBottom,facetAnchorRight)],["top-empty",facetAnchorTopEmpty],["right-empty",facetAnchorRightEmpty],["bottom-empty",facetAnchorBottomEmpty],["left-empty",facetAnchorLeftEmpty],["empty",facetAnchorEmpty]]);function maybeFacetAnchor(i){if(i==null)return null;const e=facetAnchors.get(`${i}`.toLowerCase());if(e)return e;throw new Error(`invalid facet anchor: ${i}`)}const indexCache=new WeakMap;function facetIndex(i){let e=indexCache.get(i);return e||indexCache.set(i,e=new InternMap(map$1(i,(o,d)=>[o,d]))),e}function facetIndexOf(i,e){return facetIndex(i).get(e)}function facetFind(i,e,o){return e=keyof(e),o=keyof(o),i.find(d=>Object.is(keyof(d.x),e)&&Object.is(keyof(d.y),o))}function facetEmpty(i,e,o){var d;return(d=facetFind(i,e,o))==null?void 0:d.empty}function facetAnchorTop(i,{y:e},{y:o}){return e?facetIndexOf(e,o)===0:!0}function facetAnchorBottom(i,{y:e},{y:o}){return e?facetIndexOf(e,o)===e.length-1:!0}function facetAnchorLeft(i,{x:e},{x:o}){return e?facetIndexOf(e,o)===0:!0}function facetAnchorRight(i,{x:e},{x:o}){return e?facetIndexOf(e,o)===e.length-1:!0}function facetAnchorTopEmpty(i,{y:e},{x:o,y:d,empty:h}){if(h)return!1;if(!e)return;const g=facetIndexOf(e,d);if(g>0)return facetEmpty(i,o,e[g-1])}function facetAnchorBottomEmpty(i,{y:e},{x:o,y:d,empty:h}){if(h)return!1;if(!e)return;const g=facetIndexOf(e,d);if(g<e.length-1)return facetEmpty(i,o,e[g+1])}function facetAnchorLeftEmpty(i,{x:e},{x:o,y:d,empty:h}){if(h)return!1;if(!e)return;const g=facetIndexOf(e,o);if(g>0)return facetEmpty(i,e[g-1],d)}function facetAnchorRightEmpty(i,{x:e},{x:o,y:d,empty:h}){if(h)return!1;if(!e)return;const g=facetIndexOf(e,o);if(g<e.length-1)return facetEmpty(i,e[g+1],d)}function facetAnchorEmpty(i,e,{empty:o}){return o}function and(i,e){return function(){return i.apply(null,arguments)&&e.apply(null,arguments)}}function facetFilter(i,{channels:{fx:e,fy:o},groups:d}){return e&&o?i.map(({x:h,y:g})=>{var b;return((b=d.get(h))==null?void 0:b.get(g))??[]}):e?i.map(({x:h})=>d.get(h)??[]):i.map(({y:h})=>d.get(h)??[])}let Mark$1=class{constructor(e,o={},d={},h){const{facet:g="auto",facetAnchor:b,fx:$,fy:j,sort:et,dx:tt=0,dy:nt=0,margin:rt=0,marginTop:ot=rt,marginRight:st=rt,marginBottom:bt=rt,marginLeft:vt=rt,clip:at=h==null?void 0:h.clip,channels:ut,tip:$t,render:wt}=d;if(this.data=e,this.sort=isDomainSort(et)?et:null,this.initializer=initializer(d).initializer,this.transform=this.initializer?d.transform:basic(d).transform,g===null||g===!1?this.facet=null:(this.facet=keyword(g===!0?"include":g,"facet",["auto","include","exclude","super"]),this.fx=e===singleton&&typeof $=="string"?[$]:$,this.fy=e===singleton&&typeof j=="string"?[j]:j),this.facetAnchor=maybeFacetAnchor(b),o=maybeNamed(o),ut!==void 0&&(o={...maybeChannels(ut),...o}),h!==void 0&&(o={...styles(this,d,h),...o}),this.channels=Object.fromEntries(Object.entries(o).map(([At,xt])=>{if(isOptions(xt.value)){const{value:Rt,label:Ot=xt.label,scale:kt=xt.scale}=xt.value;xt={...xt,label:Ot,scale:kt,value:Rt}}if(e===singleton&&typeof xt.value=="string"){const{value:Rt}=xt;xt={...xt,value:[Rt]}}return[At,xt]}).filter(([At,{value:xt,optional:Rt}])=>{if(xt!=null)return!0;if(Rt)return!1;throw new Error(`missing channel value: ${At}`)})),this.dx=+tt,this.dy=+nt,this.marginTop=+ot,this.marginRight=+st,this.marginBottom=+bt,this.marginLeft=+vt,this.clip=maybeClip(at),this.tip=maybeTip($t),this.facet==="super"){if($||j)throw new Error("super-faceting cannot use fx or fy");for(const At in this.channels){const{scale:xt}=o[At];if(!(xt!=="x"&&xt!=="y"))throw new Error("super-faceting cannot use x or y")}}wt!=null&&(this.render=composeRender(wt,this.render))}initialize(e,o,d){let h=arrayify(this.data);e===void 0&&h!=null&&(e=[range(h)]);const g=e;this.transform!=null&&({facets:e,data:h}=this.transform(h,e,d),h=arrayify(h)),e!==void 0&&(e.original=g);const b=createChannels(this.channels,h);return this.sort!=null&&channelDomain(h,e,b,o,this.sort),{data:h,facets:e,channels:b}}filter(e,o,d){for(const h in o){const{filter:g=defined}=o[h];if(g!==null){const b=d[h];e=e.filter($=>g(b[$]))}}return e}project(e,o,d){for(const h in e)if(e[h].scale==="x"&&/^x|x$/.test(h)){const g=h.replace(/^x|x$/,"y");g in e&&e[g].scale==="y"&&project(h,g,o,d.projection)}}scale(e,o,d){const h=valueObject(e,o);return d.projection&&this.project(e,h,d),h}};function marks$1(...i){return i.plot=Mark$1.prototype.plot,i}function composeRender(i,e){if(i==null)return e===null?void 0:e;if(e==null)return i===null?void 0:i;if(typeof i!="function")throw new TypeError(`invalid render transform: ${i}`);if(typeof e!="function")throw new TypeError(`invalid render transform: ${e}`);return function(o,d,h,g,b,$){return i.call(this,o,d,h,g,b,(j,et,tt,nt,rt)=>e.call(this,j,et,tt,nt,rt,$))}}function maybeChannels(i){return Object.fromEntries(Object.entries(maybeNamed(i)).map(([e,o])=>(o=typeof o=="string"?{value:o,label:e}:maybeValue(o),o.filter===void 0&&o.scale==null&&(o={...o,filter:null}),[e,o])))}function maybeTip(i){return i===!0?"xy":i===!1||i==null?null:typeof i=="string"?keyword(i,"tip",["x","y","xy"]):i}function withTip(i,e){return(i==null?void 0:i.tip)===!0?{...i,tip:e}:isObject$1(i==null?void 0:i.tip)&&i.tip.pointer===void 0?{...i,tip:{...i.tip,pointer:e}}:i}const states=new WeakMap;function pointerK(i,e,{x:o,y:d,px:h,py:g,maxRadius:b=40,channels:$,render:j,...et}={}){return b=+b,h!=null&&(o??(o=null),$={...$,px:{value:h,scale:"x"}}),g!=null&&(d??(d=null),$={...$,py:{value:g,scale:"y"}}),{x:o,y:d,channels:$,...et,render:composeRender(function(tt,nt,rt,ot,st,bt){st={...st,pointerSticky:!1};const vt=st.ownerSVGElement,{data:at}=st.getMarkState(this);let ut=states.get(vt);ut||states.set(vt,ut={sticky:!1,roots:[],renders:[]});let $t=ut.renders.push(wn)-1;const{x:wt,y:At,fx:xt,fy:Rt}=nt;let Ot=xt?xt(tt.fx)-ot.marginLeft:0,kt=Rt?Rt(tt.fy)-ot.marginTop:0;wt!=null&&wt.bandwidth&&(Ot+=wt.bandwidth()/2),At!=null&&At.bandwidth&&(kt+=At.bandwidth()/2);const Mt=tt.fi!=null;let Bt;if(Mt){let vn=ut.facetStates;vn||(ut.facetStates=vn=new Map),Bt=vn.get(this),Bt||vn.set(this,Bt=new Map)}const[jt,zt]=applyFrameAnchor(this,ot),{px:Nt,py:Ct}=rt,Ft=Nt?vn=>Nt[vn]:anchorX$1(rt,jt),Vt=Ct?vn=>Ct[vn]:anchorY$1(rt,zt);let Ut,Ht,Pt,Yt;function Xt(vn,Nn){if(Mt)if(Yt&&(Yt=cancelAnimationFrame(Yt)),vn==null)Bt.delete(tt.fi);else{Bt.set(tt.fi,Nn),Yt=requestAnimationFrame(()=>{Yt=null;for(const[Jt,Bn]of Bt)if(Bn<Nn||Bn===Nn&&Jt<tt.fi){vn=null;break}wn(vn)});return}wn(vn)}function wn(vn){if(Ut===vn&&Pt===ut.sticky)return;Ut=vn,Pt=st.pointerSticky=ut.sticky;const Nn=Ut==null?[]:[Ut];Mt&&(Nn.fx=tt.fx,Nn.fy=tt.fy,Nn.fi=tt.fi);const Jt=bt(Nn,nt,rt,ot,st);if(Ht){if(Mt){const Bn=Ht.parentNode,Ln=Ht.getAttribute("transform"),Zt=Jt.getAttribute("transform");Ln?Jt.setAttribute("transform",Ln):Jt.removeAttribute("transform"),Zt?Bn.setAttribute("transform",Zt):Bn.removeAttribute("transform"),Jt.removeAttribute("aria-label"),Jt.removeAttribute("aria-description"),Jt.removeAttribute("aria-hidden")}Ht.replaceWith(Jt)}return ut.roots[$t]=Ht=Jt,Ut==null&&(Bt==null?void 0:Bt.size)>1||st.dispatchValue(Ut==null?null:at[Ut]),Jt}function Mn(vn){if(ut.sticky||vn.pointerType==="mouse"&&vn.buttons===1)return;let[Nn,Jt]=pointer$1(vn);Nn-=Ot,Jt-=kt;const Bn=Nn<ot.marginLeft||Nn>ot.width-ot.marginRight?1:i,Ln=Jt<ot.marginTop||Jt>ot.height-ot.marginBottom?1:e;let Zt=null,rr=b*b;for(const tr of tt){const sr=Bn*(Ft(tr)-Nn),ar=Ln*(Vt(tr)-Jt),er=sr*sr+ar*ar;er<=rr&&(Zt=tr,rr=er)}if(Zt!=null&&(i!==1||e!==1)){const tr=Ft(Zt)-Nn,sr=Vt(Zt)-Jt;rr=tr*tr+sr*sr}Xt(Zt,rr)}function Cn(vn){vn.pointerType==="mouse"&&Ut!=null&&(ut.sticky&&ut.roots.some(Nn=>Nn==null?void 0:Nn.contains(vn.target))||(ut.sticky?(ut.sticky=!1,ut.renders.forEach(Nn=>Nn(null))):(ut.sticky=!0,wn(Ut)),vn.stopImmediatePropagation()))}function On(vn){vn.pointerType==="mouse"&&(ut.sticky||Xt(null))}return vt.addEventListener("pointerenter",Mn),vt.addEventListener("pointermove",Mn),vt.addEventListener("pointerdown",Cn),vt.addEventListener("pointerleave",On),wn(null)},j)}}function pointer(i){return pointerK(1,1,i)}function pointerX(i){return pointerK(1,.01,i)}function pointerY(i){return pointerK(.01,1,i)}function anchorX$1({x1:i,x2:e,x:o=i},d){return i&&e?h=>(i[h]+e[h])/2:o?h=>o[h]:()=>d}function anchorY$1({y1:i,y2:e,y:o=i},d){return i&&e?h=>(i[h]+e[h])/2:o?h=>o[h]:()=>d}function inferFontVariant$2(i){return isOrdinalScale(i)&&i.interval===void 0?void 0:"tabular-nums"}function legendRamp(i,e){let{label:o=i.label,tickSize:d=6,width:h=240,height:g=44+d,marginTop:b=18,marginRight:$=0,marginBottom:j=16+d,marginLeft:et=0,style:tt,ticks:nt=(h-et-$)/64,tickFormat:rt,fontVariant:ot=inferFontVariant$2(i),round:st=!0,opacity:bt,className:vt}=e;const at=createContext(e);vt=maybeClassName(vt),bt=maybeNumberChannel(bt)[1],rt===null&&(rt=()=>null);const ut=create("svg",at).attr("class",`${vt}-ramp`).attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("width",h).attr("height",g).attr("viewBox",`0 0 ${h} ${g}`).call(jt=>jt.append("style").text(`.${vt}-ramp {
  display: block;
  background: white;
  height: auto;
  height: intrinsic;
  max-width: 100%;
  overflow: visible;
}
.${vt}-ramp text {
  white-space: pre;
}`)).call(applyInlineStyles,tt);let $t=jt=>jt.selectAll(".tick line").attr("y1",b+j-g),wt;const At=st?(jt,zt)=>jt.rangeRound(zt):(jt,zt)=>jt.range(zt),{type:xt,domain:Rt,range:Ot,interpolate:kt,scale:Mt,pivot:Bt}=i;if(kt){const jt=Ot===void 0?kt:piecewise(kt.length===1?interpolatePiecewise(kt):kt,Ot);wt=At(Mt.copy(),quantize(interpolateNumber(et,h-$),Math.min(Rt.length+(Bt!==void 0),Ot===void 0?1/0:Ot.length)));const zt=256,Nt=at.document.createElement("canvas");Nt.width=zt,Nt.height=1;const Ct=Nt.getContext("2d");for(let Ft=0,Vt=zt-1;Ft<zt;++Ft)Ct.fillStyle=jt(Ft/Vt),Ct.fillRect(Ft,0,1,1);ut.append("image").attr("opacity",bt).attr("x",et).attr("y",b).attr("width",h-et-$).attr("height",g-b-j).attr("preserveAspectRatio","none").attr("xlink:href",Nt.toDataURL())}else if(xt==="threshold"){const jt=Rt,zt=rt===void 0?Nt=>Nt:typeof rt=="string"?format(rt):rt;wt=At(linear().domain([-1,Ot.length-1]),[et,h-$]),ut.append("g").attr("fill-opacity",bt).selectAll().data(Ot).enter().append("rect").attr("x",(Nt,Ct)=>wt(Ct-1)).attr("y",b).attr("width",(Nt,Ct)=>wt(Ct)-wt(Ct-1)).attr("height",g-b-j).attr("fill",Nt=>Nt),nt=map$1(jt,(Nt,Ct)=>Ct),rt=Nt=>zt(jt[Nt],Nt)}else wt=At(band().domain(Rt),[et,h-$]),ut.append("g").attr("fill-opacity",bt).selectAll().data(Rt).enter().append("rect").attr("x",wt).attr("y",b).attr("width",Math.max(0,wt.bandwidth()-1)).attr("height",g-b-j).attr("fill",Mt),$t=()=>{};return ut.append("g").attr("transform",`translate(0,${g-j})`).call(axisBottom(wt).ticks(Array.isArray(nt)?null:nt,typeof rt=="string"?rt:void 0).tickFormat(typeof rt=="function"?rt:void 0).tickSize(d).tickValues(Array.isArray(nt)?nt:null)).attr("font-size",null).attr("font-family",null).attr("font-variant",impliedString(ot,"normal")).call($t).call(jt=>jt.select(".domain").remove()),o!==void 0&&ut.append("text").attr("x",et).attr("y",b-6).attr("fill","currentColor").attr("font-weight","bold").text(o),ut.node()}const radians=Math.PI/180;function markers(i,{marker:e,markerStart:o=e,markerMid:d=e,markerEnd:h=e}={}){i.markerStart=maybeMarker(o),i.markerMid=maybeMarker(d),i.markerEnd=maybeMarker(h)}function maybeMarker(i){if(i==null||i===!1)return null;if(i===!0)return markerCircleFill;if(typeof i=="function")return i;switch(`${i}`.toLowerCase()){case"none":return null;case"arrow":return markerArrow("auto");case"arrow-reverse":return markerArrow("auto-start-reverse");case"dot":return markerDot;case"circle":case"circle-fill":return markerCircleFill;case"circle-stroke":return markerCircleStroke}throw new Error(`invalid marker: ${i}`)}function markerArrow(i){return(e,o)=>create("svg:marker",o).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("orient",i).attr("fill","none").attr("stroke",e).attr("stroke-width",1.5).attr("stroke-linecap","round").attr("stroke-linejoin","round").call(d=>d.append("path").attr("d","M-1.5,-3l3,3l-3,3")).node()}function markerDot(i,e){return create("svg:marker",e).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",i).attr("stroke","none").call(o=>o.append("circle").attr("r",2.5)).node()}function markerCircleFill(i,e){return create("svg:marker",e).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",i).attr("stroke","white").attr("stroke-width",1.5).call(o=>o.append("circle").attr("r",3)).node()}function markerCircleStroke(i,e){return create("svg:marker",e).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill","white").attr("stroke",i).attr("stroke-width",1.5).call(o=>o.append("circle").attr("r",3)).node()}let nextMarkerId=0;function applyMarkers(i,e,{stroke:o},d){return applyMarkersColor(i,e,o&&(h=>o[h]),d)}function applyGroupedMarkers(i,e,{stroke:o},d){return applyMarkersColor(i,e,o&&(([h])=>o[h]),d)}function applyMarkersColor(i,{markerStart:e,markerMid:o,markerEnd:d,stroke:h},g=()=>h,b){const $=new Map;function j(et){return function(tt){const nt=g(tt);let rt=$.get(et);rt||$.set(et,rt=new Map);let ot=rt.get(nt);if(!ot){const st=this.parentNode.insertBefore(et(nt,b),this),bt=`plot-marker-${++nextMarkerId}`;st.setAttribute("id",bt),rt.set(nt,ot=`url(#${bt})`)}return ot}}e&&i.attr("marker-start",j(e)),o&&i.attr("marker-mid",j(o)),d&&i.attr("marker-end",j(d))}function maybeInsetX({inset:i,insetLeft:e,insetRight:o,...d}={}){return[e,o]=maybeInset(i,e,o),{inset:i,insetLeft:e,insetRight:o,...d}}function maybeInsetY({inset:i,insetTop:e,insetBottom:o,...d}={}){return[e,o]=maybeInset(i,e,o),{inset:i,insetTop:e,insetBottom:o,...d}}function maybeInset(i,e,o){return i===void 0&&e===void 0&&o===void 0?offset?[1,0]:[.5,.5]:[e,o]}function maybeIntervalValue(i,{interval:e}){return i={...maybeValue(i)},i.interval=maybeInterval(i.interval===void 0?e:i.interval),i}function maybeIntervalK(i,e,o,d){const{[i]:h,[`${i}1`]:g,[`${i}2`]:b}=o,{value:$,interval:j}=maybeIntervalValue(h,o);if($==null||j==null&&!d)return o;const et=labelof(h);if(j==null){let ot;const st={transform:bt=>ot||(ot=valueof(bt,$)),label:et};return{...o,[i]:void 0,[`${i}1`]:g===void 0?st:g,[`${i}2`]:b===void 0?st:b}}let tt,nt;function rt(ot){return nt!==void 0&&ot===tt?nt:nt=map$1(valueof(tt=ot,$),st=>j.floor(st))}return e({...o,[i]:void 0,[`${i}1`]:g===void 0?{transform:rt,label:et}:g,[`${i}2`]:b===void 0?{transform:ot=>rt(ot).map(st=>j.offset(st)),label:et}:b})}function maybeIntervalMidK(i,e,o){const{[i]:d}=o,{value:h,interval:g}=maybeIntervalValue(d,o);return h==null||g==null?o:e({...o,[i]:{label:labelof(d),transform:b=>{const $=map$1(valueof(b,h),et=>g.floor(et)),j=$.map(et=>g.offset(et));return $.map(isTemporal($)?(et,tt)=>et==null||isNaN(et=+et)||(tt=j[tt],tt==null)||isNaN(tt=+tt)?void 0:new Date((et+tt)/2):(et,tt)=>et==null||(tt=j[tt],tt==null)?NaN:(+et+ +tt)/2)}}})}function maybeTrivialIntervalX(i={}){return maybeIntervalK("x",maybeInsetX,i,!0)}function maybeTrivialIntervalY(i={}){return maybeIntervalK("y",maybeInsetY,i,!0)}function maybeIntervalX(i={}){return maybeIntervalK("x",maybeInsetX,i)}function maybeIntervalY(i={}){return maybeIntervalK("y",maybeInsetY,i)}function maybeIntervalMidX(i={}){return maybeIntervalMidK("x",maybeInsetX,i)}function maybeIntervalMidY(i={}){return maybeIntervalMidK("y",maybeInsetY,i)}const defaults$l={ariaLabel:"rule",fill:null,stroke:"currentColor"};class RuleX extends Mark$1{constructor(e,o={}){const{x:d,y1:h,y2:g,inset:b=0,insetTop:$=b,insetBottom:j=b}=o;super(e,{x:{value:d,scale:"x",optional:!0},y1:{value:h,scale:"y",optional:!0},y2:{value:g,scale:"y",optional:!0}},withTip(o,"x"),defaults$l),this.insetTop=number$1($),this.insetBottom=number$1(j),markers(this,o)}render(e,o,d,h,g){const{x:b,y:$}=o,{x:j,y1:et,y2:tt}=d,{width:nt,height:rt,marginTop:ot,marginRight:st,marginLeft:bt,marginBottom:vt}=h,{insetTop:at,insetBottom:ut}=this;return create("svg:g",g).call(applyIndirectStyles,this,h,g).call(applyTransform,this,{x:j&&b},offset,0).call($t=>$t.selectAll().data(e).enter().append("line").call(applyDirectStyles,this).attr("x1",j?wt=>j[wt]:(bt+nt-st)/2).attr("x2",j?wt=>j[wt]:(bt+nt-st)/2).attr("y1",et&&!isCollapsed($)?wt=>et[wt]+at:ot+at).attr("y2",tt&&!isCollapsed($)?$.bandwidth?wt=>tt[wt]+$.bandwidth()-ut:wt=>tt[wt]-ut:rt-vt-ut).call(applyChannelStyles,this,d).call(applyMarkers,this,d,g)).node()}}class RuleY extends Mark$1{constructor(e,o={}){const{x1:d,x2:h,y:g,inset:b=0,insetRight:$=b,insetLeft:j=b}=o;super(e,{y:{value:g,scale:"y",optional:!0},x1:{value:d,scale:"x",optional:!0},x2:{value:h,scale:"x",optional:!0}},withTip(o,"y"),defaults$l),this.insetRight=number$1($),this.insetLeft=number$1(j),markers(this,o)}render(e,o,d,h,g){const{x:b,y:$}=o,{y:j,x1:et,x2:tt}=d,{width:nt,height:rt,marginTop:ot,marginRight:st,marginLeft:bt,marginBottom:vt}=h,{insetLeft:at,insetRight:ut}=this;return create("svg:g",g).call(applyIndirectStyles,this,h,g).call(applyTransform,this,{y:j&&$},0,offset).call($t=>$t.selectAll().data(e).enter().append("line").call(applyDirectStyles,this).attr("x1",et&&!isCollapsed(b)?wt=>et[wt]+at:bt+at).attr("x2",tt&&!isCollapsed(b)?b.bandwidth?wt=>tt[wt]+b.bandwidth()-ut:wt=>tt[wt]-ut:nt-st-ut).attr("y1",j?wt=>j[wt]:(ot+rt-vt)/2).attr("y2",j?wt=>j[wt]:(ot+rt-vt)/2).call(applyChannelStyles,this,d).call(applyMarkers,this,d,g)).node()}}function ruleX$1(i,e){let{x:o=identity$1,y:d,y1:h,y2:g,...b}=maybeIntervalY(e);return[h,g]=maybeOptionalZero(d,h,g),new RuleX(i,{...b,x:o,y1:h,y2:g})}function ruleY$1(i,e){let{y:o=identity$1,x:d,x1:h,x2:g,...b}=maybeIntervalX(e);return[h,g]=maybeOptionalZero(d,h,g),new RuleY(i,{...b,y:o,x1:h,x2:g})}function maybeOptionalZero(i,e,o){if(i==null){if(e===void 0){if(o!==void 0)return[0,o]}else if(o===void 0)return[0,e]}else{if(e===void 0)return o===void 0?[0,i]:[i,o];if(o===void 0)return[i,e]}return[e,o]}function template(i,...e){let o=e.length;for(let d=0,h=!0;d<o;++d)typeof e[d]!="function"&&(h&&(i=i.slice(),h=!1),i.splice(d,2,i[d]+e[d]+i[d+1]),e.splice(d,1),--d,--o);return d=>{let h=i[0];for(let g=0;g<o;++g)h+=e[g](d)+i[g+1];return h}}const defaults$k={ariaLabel:"text",strokeLinejoin:"round",strokeWidth:3,paintOrder:"stroke"},softHyphen="­";class Text extends Mark$1{constructor(e,o={}){const{x:d,y:h,text:g=isIterable$1(e)&&isTextual(e)?identity$1:indexOf,frameAnchor:b,textAnchor:$=/right$/i.test(b)?"end":/left$/i.test(b)?"start":"middle",lineAnchor:j=/^top/i.test(b)?"top":/^bottom/i.test(b)?"bottom":"middle",lineHeight:et=1,lineWidth:tt=1/0,textOverflow:nt,monospace:rt,fontFamily:ot=rt?"ui-monospace, monospace":void 0,fontSize:st,fontStyle:bt,fontVariant:vt,fontWeight:at,rotate:ut}=o,[$t,wt]=maybeNumberChannel(ut,0),[At,xt]=maybeFontSizeChannel(st);if(super(e,{x:{value:d,scale:"x",optional:!0},y:{value:h,scale:"y",optional:!0},fontSize:{value:At,optional:!0},rotate:{value:numberChannel($t),optional:!0},text:{value:g,filter:nonempty,optional:!0}},o,defaults$k),this.rotate=wt,this.textAnchor=impliedString($,"middle"),this.lineAnchor=keyword(j,"lineAnchor",["top","middle","bottom"]),this.lineHeight=+et,this.lineWidth=+tt,this.textOverflow=maybeTextOverflow(nt),this.monospace=!!rt,this.fontFamily=string(ot),this.fontSize=xt,this.fontStyle=string(bt),this.fontVariant=string(vt),this.fontWeight=string(at),this.frameAnchor=maybeFrameAnchor(b),!(this.lineWidth>=0))throw new Error(`invalid lineWidth: ${tt}`);this.splitLines=splitter(this),this.clipLine=clipper(this)}render(e,o,d,h,g){const{x:b,y:$}=o,{x:j,y:et,rotate:tt,text:nt,title:rt,fontSize:ot}=d,{rotate:st}=this,[bt,vt]=applyFrameAnchor(this,h);return create("svg:g",g).call(applyIndirectStyles,this,h,g).call(applyIndirectTextStyles,this,nt,h).call(applyTransform,this,{x:j&&b,y:et&&$}).call(at=>at.selectAll().data(e).enter().append("text").call(applyDirectStyles,this).call(applyMultilineText,this,nt,rt).attr("transform",template`translate(${j?ut=>j[ut]:bt},${et?ut=>et[ut]:vt})${tt?ut=>` rotate(${tt[ut]})`:st?` rotate(${st})`:""}`).call(applyAttr,"font-size",ot&&(ut=>ot[ut])).call(applyChannelStyles,this,d)).node()}}function maybeTextOverflow(i){return i==null?null:keyword(i,"textOverflow",["clip","ellipsis","clip-start","clip-end","ellipsis-start","ellipsis-middle","ellipsis-end"]).replace(/^(clip|ellipsis)$/,"$1-end")}function applyMultilineText(i,e,o,d){if(!o)return;const{lineAnchor:h,lineHeight:g,textOverflow:b,splitLines:$,clipLine:j}=e;i.each(function(et){const tt=$(formatDefault(o[et])??"").map(j),nt=tt.length,rt=h==="top"?.71:h==="bottom"?1-nt:(164-nt*100)/200;if(nt>1){let ot=0;for(let st=0;st<nt;++st){if(++ot,!tt[st])continue;const bt=this.ownerDocument.createElementNS(namespaces.svg,"tspan");bt.setAttribute("x",0),st===ot-1?bt.setAttribute("y",`${(rt+st)*g}em`):bt.setAttribute("dy",`${ot*g}em`),bt.textContent=tt[st],this.appendChild(bt),ot=0}}else rt&&this.setAttribute("y",`${rt*g}em`),this.textContent=tt[0];if(b&&!d&&tt[0]!==o[et]){const ot=this.ownerDocument.createElementNS(namespaces.svg,"title");ot.textContent=o[et],this.appendChild(ot)}})}function text$1(i,{x:e,y:o,...d}={}){return d.frameAnchor===void 0&&([e,o]=maybeTuple(e,o)),new Text(i,{...d,x:e,y:o})}function textX$1(i,{x:e=identity$1,...o}={}){return new Text(i,maybeIntervalMidY({...o,x:e}))}function textY$1(i,{y:e=identity$1,...o}={}){return new Text(i,maybeIntervalMidX({...o,y:e}))}function applyIndirectTextStyles(i,e,o){applyAttr(i,"text-anchor",e.textAnchor),applyAttr(i,"font-family",e.fontFamily),applyAttr(i,"font-size",e.fontSize),applyAttr(i,"font-style",e.fontStyle),applyAttr(i,"font-variant",e.fontVariant===void 0?inferFontVariant$1(o):e.fontVariant),applyAttr(i,"font-weight",e.fontWeight)}function inferFontVariant$1(i){return i&&(isNumeric(i)||isTemporal(i))?"tabular-nums":void 0}const fontSizes=new Set(["inherit","initial","revert","unset","xx-small","x-small","small","medium","large","x-large","xx-large","xxx-large","larger","smaller"]);function maybeFontSizeChannel(i){return i==null||typeof i=="number"?[void 0,i]:typeof i!="string"?[i,void 0]:(i=i.trim().toLowerCase(),fontSizes.has(i)||/^[+-]?\d*\.?\d+(e[+-]?\d+)?(\w*|%)$/.test(i)?[void 0,i]:[i,void 0])}function lineWrap(i,e,o){const d=[];let h,g=0;for(const[b,$,j]of lineBreaks(i)){if(h===void 0&&(h=b),g>h&&o(i,h,$)>e&&(d.push(i.slice(h,g)+(i[g-1]===softHyphen?"-":"")),h=b),j){d.push(i.slice(h,$)),h=void 0;continue}g=$}return d}function*lineBreaks(i){let e=0,o=0;const d=i.length;for(;o<d;){let h=1;switch(i[o]){case softHyphen:case"-":++o,yield[e,o,!1],e=o;break;case" ":for(yield[e,o,!1];i[++o]===" ";);e=o;break;case"\r":i[o+1]===`
`&&++h;case`
`:yield[e,o,!0],o+=h,e=o;break;default:++o;break}}yield[e,o,!0]}const defaultWidthMap={a:56,b:63,c:57,d:63,e:58,f:37,g:62,h:60,i:26,j:26,k:55,l:26,m:88,n:60,o:60,p:62,q:62,r:39,s:54,t:38,u:60,v:55,w:79,x:54,y:55,z:55,A:69,B:67,C:73,D:74,E:61,F:58,G:76,H:75,I:28,J:55,K:67,L:58,M:89,N:75,O:78,P:65,Q:78,R:67,S:65,T:65,U:75,V:69,W:98,X:69,Y:67,Z:67,0:64,1:48,2:62,3:64,4:66,5:63,6:65,7:58,8:65,9:65," ":29,"!":32,'"':49,"'":31,"(":39,")":39,",":31,"-":48,".":31,"/":32,":":31,";":31,"?":52,"‘":31,"’":31,"“":47,"”":47,"…":82};function defaultWidth(i,e=0,o=i.length){let d=0;for(let h=e;h<o;h=readCharacter(i,h))d+=defaultWidthMap[i[h]]??(isPictographic(i,h)?120:defaultWidthMap.e);return d}function monospaceWidth(i,e=0,o=i.length){let d=0;for(let h=e;h<o;h=readCharacter(i,h))d+=isPictographic(i,h)?200:100;return d}function splitter({monospace:i,lineWidth:e,textOverflow:o}){if(o!=null||e==1/0)return g=>g.split(/\r\n?|\n/g);const d=i?monospaceWidth:defaultWidth,h=e*100;return g=>lineWrap(g,h,d)}function clipper({monospace:i,lineWidth:e,textOverflow:o}){if(o==null||e==1/0)return g=>g;const d=i?monospaceWidth:defaultWidth,h=e*100;switch(o){case"clip-start":return g=>clipStart(g,h,d,"");case"clip-end":return g=>clipEnd(g,h,d,"");case"ellipsis-start":return g=>clipStart(g,h,d,ellipsis);case"ellipsis-middle":return g=>clipMiddle(g,h,d,ellipsis);case"ellipsis-end":return g=>clipEnd(g,h,d,ellipsis)}}const ellipsis="…";function cut(i,e,o,d){const h=[];let g=0;for(let b=0,$=0,j=i.length;b<j;b=$){$=readCharacter(i,b);const et=o(i,b,$);if(g+et>e){for(g+=d;g>e&&b>0;)$=b,b=h.pop(),g-=o(i,b,$);return[b,e-g]}g+=et,h.push(b)}return[-1,0]}function clipEnd(i,e,o,d){i=i.trim();const h=o(d),[g]=cut(i,e,o,h);return g<0?i:i.slice(0,g).trimEnd()+d}function clipMiddle(i,e,o,d){i=i.trim();const h=o(i);if(h<=e)return i;const g=o(d)/2,[b,$]=cut(i,e/2,o,g),[j]=cut(i,h-e/2-$+g,o,-g);return j<0?d:i.slice(0,b).trimEnd()+d+i.slice(readCharacter(i,j)).trimStart()}function clipStart(i,e,o,d){i=i.trim();const h=o(i);if(h<=e)return i;const g=o(d),[b]=cut(i,h-e+g,o,-g);return b<0?d:d+i.slice(readCharacter(i,b)).trimStart()}const reCombiner=/[\p{Combining_Mark}\p{Emoji_Modifier}]+/uy,rePictographic=new RegExp("\\p{Extended_Pictographic}","uy");function readCharacter(i,e){return e+=isSurrogatePair(i,e)?2:1,isCombiner(i,e)&&(e=reCombiner.lastIndex),isZeroWidthJoiner(i,e)?readCharacter(i,e+1):e}function isAscii(i,e){return i.charCodeAt(e)<128}function isSurrogatePair(i,e){const o=i.charCodeAt(e);if(o>=55296&&o<56320){const d=i.charCodeAt(e+1);return d>=56320&&d<57344}return!1}function isZeroWidthJoiner(i,e){return i.charCodeAt(e)===8205}function isCombiner(i,e){return isAscii(i,e)?!1:(reCombiner.lastIndex=e,reCombiner.test(i))}function isPictographic(i,e){return isAscii(i,e)?!1:(rePictographic.lastIndex=e,rePictographic.test(i))}const defaults$j={ariaLabel:"vector",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinejoin:"round",strokeLinecap:"round"},defaultRadius=3.5,wingRatio=defaultRadius*5,shapeArrow={draw(i,e,o){const d=e*o/wingRatio;i.moveTo(0,0),i.lineTo(0,-e),i.moveTo(-d,d-e),i.lineTo(0,-e),i.lineTo(d,d-e)}},shapeSpike={draw(i,e,o){i.moveTo(-o,0),i.lineTo(0,-e),i.lineTo(o,0)}},shapes=new Map([["arrow",shapeArrow],["spike",shapeSpike]]);function isShapeObject(i){return i&&typeof i.draw=="function"}function maybeShape(i){if(isShapeObject(i))return i;const e=shapes.get(`${i}`.toLowerCase());if(e)return e;throw new Error(`invalid shape: ${i}`)}let Vector$1=class extends Mark$1{constructor(e,o={}){const{x:d,y:h,r:g=defaultRadius,length:b,rotate:$,shape:j=shapeArrow,anchor:et="middle",frameAnchor:tt}=o,[nt,rt]=maybeNumberChannel(b,12),[ot,st]=maybeNumberChannel($,0);super(e,{x:{value:d,scale:"x",optional:!0},y:{value:h,scale:"y",optional:!0},length:{value:nt,scale:"length",optional:!0},rotate:{value:ot,optional:!0}},o,defaults$j),this.r=+g,this.length=rt,this.rotate=st,this.shape=maybeShape(j),this.anchor=keyword(et,"anchor",["start","middle","end"]),this.frameAnchor=maybeFrameAnchor(tt)}render(e,o,d,h,g){const{x:b,y:$}=o,{x:j,y:et,length:tt,rotate:nt}=d,{length:rt,rotate:ot,anchor:st,shape:bt,r:vt}=this,[at,ut]=applyFrameAnchor(this,h);return create("svg:g",g).call(applyIndirectStyles,this,h,g).call(applyTransform,this,{x:j&&b,y:et&&$}).call($t=>$t.selectAll().data(e).enter().append("path").call(applyDirectStyles,this).attr("transform",template`translate(${j?wt=>j[wt]:at},${et?wt=>et[wt]:ut})${nt?wt=>` rotate(${nt[wt]})`:ot?` rotate(${ot})`:""}${st==="start"?"":st==="end"?tt?wt=>` translate(0,${tt[wt]})`:` translate(0,${rt})`:tt?wt=>` translate(0,${tt[wt]/2})`:` translate(0,${rt/2})`}`).attr("d",tt?wt=>{const At=pathRound();return bt.draw(At,tt[wt],vt),At}:(()=>{const wt=pathRound();return bt.draw(wt,rt,vt),wt})()).call(applyChannelStyles,this,d)).node()}};function vector$1(i,e={}){let{x:o,y:d,...h}=e;return e.frameAnchor===void 0&&([o,d]=maybeTuple(o,d)),new Vector$1(i,{...h,x:o,y:d})}function vectorX$1(i,e={}){const{x:o=identity$1,...d}=e;return new Vector$1(i,{...d,x:o})}function vectorY$1(i,e={}){const{y:o=identity$1,...d}=e;return new Vector$1(i,{...d,y:o})}function spike$1(i,e={}){const{shape:o=shapeSpike,stroke:d=defaults$j.stroke,strokeWidth:h=1,fill:g=d,fillOpacity:b=.3,anchor:$="start",...j}=e;return vector$1(i,{...j,shape:o,stroke:d,strokeWidth:h,fill:g,fillOpacity:b,anchor:$})}function maybeData(i,e){return arguments.length<2&&!isIterable$1(i)&&(e=i,i=null),e===void 0&&(e={}),[i,e]}function maybeAnchor$2({anchor:i}={},e){return i===void 0?e[0]:keyword(i,"anchor",e)}function anchorY(i){return maybeAnchor$2(i,["left","right"])}function anchorFy(i){return maybeAnchor$2(i,["right","left"])}function anchorX(i){return maybeAnchor$2(i,["bottom","top"])}function anchorFx(i){return maybeAnchor$2(i,["top","bottom"])}function axisY$1(){const[i,e]=maybeData(...arguments);return axisKy("y",anchorY(e),i,e)}function axisFy$1(){const[i,e]=maybeData(...arguments);return axisKy("fy",anchorFy(e),i,e)}function axisX$1(){const[i,e]=maybeData(...arguments);return axisKx("x",anchorX(e),i,e)}function axisFx$1(){const[i,e]=maybeData(...arguments);return axisKx("fx",anchorFx(e),i,e)}function axisKy(i,e,o,{color:d="currentColor",opacity:h=1,stroke:g=d,strokeOpacity:b=h,strokeWidth:$=1,fill:j=d,fillOpacity:et=h,textAnchor:tt,textStroke:nt,textStrokeOpacity:rt,textStrokeWidth:ot,tickSize:st=i==="y"?6:0,tickPadding:bt,tickRotate:vt,x:at,margin:ut,marginTop:$t=ut===void 0?20:ut,marginRight:wt=ut===void 0?e==="right"?40:0:ut,marginBottom:At=ut===void 0?20:ut,marginLeft:xt=ut===void 0?e==="left"?40:0:ut,label:Rt,labelAnchor:Ot,labelArrow:kt,labelOffset:Mt,...Bt}){return st=number$1(st),bt=number$1(bt),vt=number$1(vt),Ot!==void 0&&(Ot=keyword(Ot,"labelAnchor",["center","top","bottom"])),kt=maybeLabelArrow(kt),marks$1(st&&!isNoneish(g)?axisTickKy(i,e,o,{stroke:g,strokeOpacity:b,strokeWidth:$,tickSize:st,tickPadding:bt,tickRotate:vt,x:at,...Bt}):null,isNoneish(j)?null:axisTextKy(i,e,o,{fill:j,fillOpacity:et,stroke:nt,strokeOpacity:rt,strokeWidth:ot,textAnchor:tt,tickSize:st,tickPadding:bt,tickRotate:vt,x:at,marginTop:$t,marginRight:wt,marginBottom:At,marginLeft:xt,...Bt}),!isNoneish(j)&&Rt!==null?text$1([],labelOptions({fill:j,fillOpacity:et,...Bt},function(jt,zt,Nt,Ct,Ft){const Vt=Ct[i],{marginTop:Ut,marginRight:Ht,marginBottom:Pt,marginLeft:Yt}=i==="y"&&Ft.inset||Ft,Xt=Ot??(Vt.bandwidth?"center":"top"),wn=Mt??(e==="right"?Ht:Yt)-3;return Xt==="center"?(this.textAnchor=void 0,this.lineAnchor=e==="right"?"bottom":"top",this.frameAnchor=e,this.rotate=-90):(this.textAnchor=e==="right"?"end":"start",this.lineAnchor=Xt,this.frameAnchor=`${Xt}-${e}`,this.rotate=0),this.dy=Xt==="top"?3-Ut:Xt==="bottom"?Pt-3:0,this.dx=e==="right"?wn:-wn,this.ariaLabel=`${i}-axis label`,{facets:[[0]],channels:{text:{value:[formatAxisLabel(i,Vt,{anchor:e,label:Rt,labelAnchor:Xt,labelArrow:kt})]}}}})):null)}function axisKx(i,e,o,{color:d="currentColor",opacity:h=1,stroke:g=d,strokeOpacity:b=h,strokeWidth:$=1,fill:j=d,fillOpacity:et=h,textAnchor:tt,textStroke:nt,textStrokeOpacity:rt,textStrokeWidth:ot,tickSize:st=i==="x"?6:0,tickPadding:bt,tickRotate:vt,y:at,margin:ut,marginTop:$t=ut===void 0?e==="top"?30:0:ut,marginRight:wt=ut===void 0?20:ut,marginBottom:At=ut===void 0?e==="bottom"?30:0:ut,marginLeft:xt=ut===void 0?20:ut,label:Rt,labelAnchor:Ot,labelArrow:kt,labelOffset:Mt,...Bt}){return st=number$1(st),bt=number$1(bt),vt=number$1(vt),Ot!==void 0&&(Ot=keyword(Ot,"labelAnchor",["center","left","right"])),kt=maybeLabelArrow(kt),marks$1(st&&!isNoneish(g)?axisTickKx(i,e,o,{stroke:g,strokeOpacity:b,strokeWidth:$,tickSize:st,tickPadding:bt,tickRotate:vt,y:at,...Bt}):null,isNoneish(j)?null:axisTextKx(i,e,o,{fill:j,fillOpacity:et,stroke:nt,strokeOpacity:rt,strokeWidth:ot,textAnchor:tt,tickSize:st,tickPadding:bt,tickRotate:vt,y:at,marginTop:$t,marginRight:wt,marginBottom:At,marginLeft:xt,...Bt}),!isNoneish(j)&&Rt!==null?text$1([],labelOptions({fill:j,fillOpacity:et,...Bt},function(jt,zt,Nt,Ct,Ft){const Vt=Ct[i],{marginTop:Ut,marginRight:Ht,marginBottom:Pt,marginLeft:Yt}=i==="x"&&Ft.inset||Ft,Xt=Ot??(Vt.bandwidth?"center":"right"),wn=Mt??(e==="top"?Ut:Pt)-3;return Xt==="center"?(this.frameAnchor=e,this.textAnchor=void 0):(this.frameAnchor=`${e}-${Xt}`,this.textAnchor=Xt==="right"?"end":"start"),this.lineAnchor=e,this.dy=e==="top"?-wn:wn,this.dx=Xt==="right"?Ht-3:Xt==="left"?3-Yt:0,this.ariaLabel=`${i}-axis label`,{facets:[[0]],channels:{text:{value:[formatAxisLabel(i,Vt,{anchor:e,label:Rt,labelAnchor:Xt,labelArrow:kt})]}}}})):null)}function axisTickKy(i,e,o,{strokeWidth:d=1,strokeLinecap:h=null,strokeLinejoin:g=null,facetAnchor:b=e+(i==="y"?"-empty":""),frameAnchor:$=e,tickSize:j,inset:et=0,insetLeft:tt=et,insetRight:nt=et,dx:rt=0,y:ot=i==="y"?void 0:null,...st}){return axisMark(vectorY$1,i,e,`${i}-axis tick`,o,{strokeWidth:d,strokeLinecap:h,strokeLinejoin:g,facetAnchor:b,frameAnchor:$,y:ot,...st,dx:e==="left"?+rt-offset+ +tt:+rt+offset-nt,anchor:"start",length:j,shape:e==="left"?shapeTickLeft:shapeTickRight})}function axisTickKx(i,e,o,{strokeWidth:d=1,strokeLinecap:h=null,strokeLinejoin:g=null,facetAnchor:b=e+(i==="x"?"-empty":""),frameAnchor:$=e,tickSize:j,inset:et=0,insetTop:tt=et,insetBottom:nt=et,dy:rt=0,x:ot=i==="x"?void 0:null,...st}){return axisMark(vectorX$1,i,e,`${i}-axis tick`,o,{strokeWidth:d,strokeLinejoin:g,strokeLinecap:h,facetAnchor:b,frameAnchor:$,x:ot,...st,dy:e==="bottom"?+rt-offset-nt:+rt+offset+ +tt,anchor:"start",length:j,shape:e==="bottom"?shapeTickBottom:shapeTickTop})}function axisTextKy(i,e,o,{facetAnchor:d=e+(i==="y"?"-empty":""),frameAnchor:h=e,tickSize:g,tickRotate:b=0,tickPadding:$=Math.max(3,9-g)+(Math.abs(b)>60?4*Math.cos(b*radians):0),text:j,textAnchor:et=Math.abs(b)>60?"middle":e==="left"?"end":"start",lineAnchor:tt=b>60?"top":b<-60?"bottom":"middle",fontVariant:nt,inset:rt=0,insetLeft:ot=rt,insetRight:st=rt,dx:bt=0,y:vt=i==="y"?void 0:null,...at}){return axisMark(textY$1,i,e,`${i}-axis tick label`,o,{facetAnchor:d,frameAnchor:h,text:j,textAnchor:et,lineAnchor:tt,fontVariant:nt,rotate:b,y:vt,...at,dx:e==="left"?+bt-g-$+ +ot:+bt+ +g+ +$-st},function(ut,$t,wt,At,xt){nt===void 0&&(this.fontVariant=inferFontVariant(ut)),j===void 0&&(xt.text=inferTextChannel(ut,$t,wt,At,e))})}function axisTextKx(i,e,o,{facetAnchor:d=e+(i==="x"?"-empty":""),frameAnchor:h=e,tickSize:g,tickRotate:b=0,tickPadding:$=Math.max(3,9-g)+(Math.abs(b)>=10?4*Math.cos(b*radians):0),text:j,textAnchor:et=Math.abs(b)>=10?b<0^e==="bottom"?"start":"end":"middle",lineAnchor:tt=Math.abs(b)>=10?"middle":e==="bottom"?"top":"bottom",fontVariant:nt,inset:rt=0,insetTop:ot=rt,insetBottom:st=rt,dy:bt=0,x:vt=i==="x"?void 0:null,...at}){return axisMark(textX$1,i,e,`${i}-axis tick label`,o,{facetAnchor:d,frameAnchor:h,text:j===void 0?null:j,textAnchor:et,lineAnchor:tt,fontVariant:nt,rotate:b,x:vt,...at,dy:e==="bottom"?+bt+ +g+ +$-st:+bt-g-$+ +ot},function(ut,$t,wt,At,xt){nt===void 0&&(this.fontVariant=inferFontVariant(ut)),j===void 0&&(xt.text=inferTextChannel(ut,$t,wt,At,e))})}function gridY$1(){const[i,e]=maybeData(...arguments);return gridKy("y",anchorY(e),i,e)}function gridFy$1(){const[i,e]=maybeData(...arguments);return gridKy("fy",anchorFy(e),i,e)}function gridX$1(){const[i,e]=maybeData(...arguments);return gridKx("x",anchorX(e),i,e)}function gridFx$1(){const[i,e]=maybeData(...arguments);return gridKx("fx",anchorFx(e),i,e)}function gridKy(i,e,o,{y:d=i==="y"?void 0:null,x:h=null,x1:g=e==="left"?h:null,x2:b=e==="right"?h:null,...$}){return axisMark(ruleY$1,i,e,`${i}-grid`,o,{y:d,x1:g,x2:b,...gridDefaults($)})}function gridKx(i,e,o,{x:d=i==="x"?void 0:null,y:h=null,y1:g=e==="top"?h:null,y2:b=e==="bottom"?h:null,...$}){return axisMark(ruleX$1,i,e,`${i}-grid`,o,{x:d,y1:g,y2:b,...gridDefaults($)})}function gridDefaults({color:i="currentColor",opacity:e=.1,stroke:o=i,strokeOpacity:d=e,strokeWidth:h=1,...g}){return{stroke:o,strokeOpacity:d,strokeWidth:h,...g}}function labelOptions({fill:i,fillOpacity:e,fontFamily:o,fontSize:d,fontStyle:h,fontVariant:g,fontWeight:b,monospace:$,pointerEvents:j,shapeRendering:et,clip:tt=!1},nt){return[,i]=maybeColorChannel(i),[,e]=maybeNumberChannel(e),{facet:"super",x:null,y:null,fill:i,fillOpacity:e,fontFamily:o,fontSize:d,fontStyle:h,fontVariant:g,fontWeight:b,monospace:$,pointerEvents:j,shapeRendering:et,clip:tt,initializer:nt}}function axisMark(i,e,o,d,h,g,b){let $;function j(nt,rt,ot,st,bt,vt){const at=nt==null&&(e==="fx"||e==="fy"),{[e]:ut}=st;if(!ut)throw new Error(`missing scale: ${e}`);const $t=ut.domain();let{interval:wt,ticks:At,tickFormat:xt,tickSpacing:Rt=e==="x"?80:35}=g;if(typeof At=="string"&&hasTemporalDomain(ut)&&(wt=At,At=void 0),At===void 0&&(At=maybeRangeInterval(wt,ut.type)??inferTickCount(ut,Rt)),nt==null){if(isIterable$1(At))nt=arrayify(At);else if(isInterval(At))nt=inclusiveRange(At,...extent$2($t));else if(ut.interval){let kt=ut.interval;if(ut.ticks){const[Mt,Bt]=extent$2($t),jt=(Bt-Mt)/kt[intervalDuration];kt=generalizeTimeInterval(kt,jt/At)??kt,nt=inclusiveRange(kt,Mt,Bt)}else{nt=$t;const Mt=nt.length;kt=generalizeTimeInterval(kt,Mt/At)??kt,kt!==ut.interval&&(nt=inclusiveRange(kt,...extent$2(nt)))}if(kt===ut.interval){const Mt=Math.round(nt.length/At);Mt>1&&(nt=nt.filter((Bt,jt)=>jt%Mt===0))}}else ut.ticks?nt=ut.ticks(At):nt=$t;if(!ut.ticks&&nt.length&&nt!==$t){const kt=new InternSet($t);nt=nt.filter(Mt=>kt.has(Mt)),nt.length||warn(`Warning: the ${e}-axis ticks appear to not align with the scale domain, resulting in no ticks. Try different ticks?`)}e==="y"||e==="x"?rt=[range(nt)]:$[e]={scale:e,value:identity$1}}b==null||b.call(this,ut,nt,At,xt,$);const Ot=Object.fromEntries(Object.entries($).map(([kt,Mt])=>[kt,{...Mt,value:valueof(nt,Mt.value)}]));return at&&(rt=vt.filterFacets(nt,Ot)),{data:nt,facets:rt,channels:Ot}}const et=initializer(g).initializer,tt=i(h,initializer({...g,initializer:j},et));return h==null?($=tt.channels,tt.channels={}):$={},tt.ariaLabel=d,tt.clip===void 0&&(tt.clip=!1),tt}function inferTickCount(i,e){const[o,d]=extent$2(i.range());return(d-o)/e}function inferTextChannel(i,e,o,d,h){return{value:inferTickFormat(i,e,o,d,h)}}function inferTickFormat(i,e,o,d,h){return typeof d=="function"?d:d===void 0&&e&&isTemporal(e)?inferTimeFormat(e,h)??formatDefault:i.tickFormat?i.tickFormat(typeof o=="number"?o:null,d):d===void 0?formatDefault:typeof d=="string"?(isTemporal(i.domain())?utcFormat:format)(d):constant(d)}function inclusiveRange(i,e,o){return i.range(e,i.offset(i.floor(o)))}const shapeTickBottom={draw(i,e){i.moveTo(0,0),i.lineTo(0,e)}},shapeTickTop={draw(i,e){i.moveTo(0,0),i.lineTo(0,-e)}},shapeTickLeft={draw(i,e){i.moveTo(0,0),i.lineTo(-e,0)}},shapeTickRight={draw(i,e){i.moveTo(0,0),i.lineTo(e,0)}};function inferFontVariant(i){return i.bandwidth&&!i.interval?void 0:"tabular-nums"}function inferScaleOrder(i){return Math.sign(orderof(i.domain()))*Math.sign(orderof(i.range()))}function formatAxisLabel(i,e,{anchor:o,label:d=e.label,labelAnchor:h,labelArrow:g}={}){if(!(d==null||d.inferred&&hasTemporalDomain(e)&&/^(date|time|year)$/i.test(d))){if(d=String(d),g==="auto"&&(g=(!e.bandwidth||e.interval)&&!/[↑↓→←]/.test(d)),!g)return d;if(g===!0){const b=inferScaleOrder(e);b&&(g=/x$/.test(i)||h==="center"?/x$/.test(i)===b<0?"left":"right":b<0?"up":"down")}switch(g){case"left":return`← ${d}`;case"right":return`${d} →`;case"up":return o==="right"?`${d} ↑`:`↑ ${d}`;case"down":return o==="right"?`${d} ↓`:`↓ ${d}`}return d}}function maybeLabelArrow(i="auto"){return isNoneish(i)?!1:typeof i=="boolean"?i:keyword(i,"labelArrow",["auto","up","right","down","left"])}function hasTemporalDomain(i){return isTemporal(i.domain())}function maybeScale(i,e){if(e==null)return e;const o=i(e);if(!o)throw new Error(`scale not found: ${e}`);return o}function legendSwatches(i,{opacity:e,...o}={}){if(!isOrdinalScale(i)&&!isThresholdScale(i))throw new Error(`swatches legend requires ordinal or threshold color scale (not ${i.type})`);return legendItems(i,o,(d,h,g,b)=>d.append("svg").attr("width",g).attr("height",b).attr("fill",h.scale).attr("fill-opacity",maybeNumberChannel(e)[1]).append("rect").attr("width","100%").attr("height","100%"))}function legendSymbols(i,{fill:e=(et=>(et=i.hint)==null?void 0:et.fill)()!==void 0?i.hint.fill:"none",fillOpacity:o=1,stroke:d=(tt=>(tt=i.hint)==null?void 0:tt.stroke)()!==void 0?i.hint.stroke:isNoneish(e)?"currentColor":"none",strokeOpacity:h=1,strokeWidth:g=1.5,r:b=4.5,...$}={},j){const[nt,rt]=maybeColorChannel(e),[ot,st]=maybeColorChannel(d),bt=maybeScale(j,nt),vt=maybeScale(j,ot),at=b*b*Math.PI;return o=maybeNumberChannel(o)[1],h=maybeNumberChannel(h)[1],g=maybeNumberChannel(g)[1],legendItems(i,$,(ut,$t,wt,At)=>ut.append("svg").attr("viewBox","-8 -8 16 16").attr("width",wt).attr("height",At).attr("fill",nt==="color"?xt=>bt.scale(xt):rt).attr("fill-opacity",o).attr("stroke",ot==="color"?xt=>vt.scale(xt):st).attr("stroke-opacity",h).attr("stroke-width",g).append("path").attr("d",xt=>{const Rt=pathRound();return i.scale(xt).draw(Rt,at),Rt}))}function legendItems(i,e={},o){let{columns:d,tickFormat:h,fontVariant:g=inferFontVariant$2(i),swatchSize:b=15,swatchWidth:$=b,swatchHeight:j=b,marginLeft:et=0,className:tt,style:nt,width:rt}=e;const ot=createContext(e);tt=maybeClassName(tt),h=inferTickFormat(i.scale,i.domain,void 0,h);const st=create("div",ot).attr("class",`${tt}-swatches ${tt}-swatches-${d!=null?"columns":"wrap"}`);let bt;return d!=null?(bt=`.${tt}-swatches-columns .${tt}-swatch {
  display: flex;
  align-items: center;
  break-inside: avoid;
  padding-bottom: 1px;
}
.${tt}-swatches-columns .${tt}-swatch::before {
  flex-shrink: 0;
}
.${tt}-swatches-columns .${tt}-swatch-label {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}`,st.style("columns",d).selectAll().data(i.domain).enter().append("div").attr("class",`${tt}-swatch`).call(o,i,$,j).call(vt=>vt.append("div").attr("class",`${tt}-swatch-label`).attr("title",h).text(h))):(bt=`.${tt}-swatches-wrap {
  display: flex;
  align-items: center;
  min-height: 33px;
  flex-wrap: wrap;
}
.${tt}-swatches-wrap .${tt}-swatch {
  display: inline-flex;
  align-items: center;
  margin-right: 1em;
}`,st.selectAll().data(i.domain).enter().append("span").attr("class",`${tt}-swatch`).call(o,i,$,j).append(function(){return this.ownerDocument.createTextNode(h.apply(this,arguments))})),st.call(vt=>vt.insert("style","*").text(`.${tt}-swatches {
  font-family: system-ui, sans-serif;
  font-size: 10px;
  margin-bottom: 0.5em;
}
.${tt}-swatch > svg {
  margin-right: 0.5em;
  overflow: visible;
}
${bt}`)).style("margin-left",et?`${+et}px`:null).style("width",rt===void 0?null:`${+rt}px`).style("font-variant",impliedString(g,"normal")).call(applyInlineStyles,nt).node()}const legendRegistry=new Map([["symbol",legendSymbols],["color",legendColor],["opacity",legendOpacity]]);function legend$1(i={}){for(const[e,o]of legendRegistry){const d=i[e];if(isScaleOptions(d)){const h=createContext(i);let g;if(e==="symbol"){const{fill:b,stroke:$=b===void 0&&isScaleOptions(i.color)?"color":void 0}=i;g={fill:b,stroke:$}}return o(normalizeScale(e,d,g),legendOptions(h,d,i),b=>isScaleOptions(i[b])?normalizeScale(b,i[b]):null)}}throw new Error("unknown legend type; no scale found")}function exposeLegends(i,e,o={}){return(d,h)=>{if(!legendRegistry.has(d))throw new Error(`unknown legend type: ${d}`);if(d in i)return legendRegistry.get(d)(i[d],legendOptions(e,o[d],h),g=>i[g])}}function legendOptions({className:i,...e},{label:o,ticks:d,tickFormat:h}={},g){return inherit(g,{className:i,...e},{label:o,ticks:d,tickFormat:h})}function legendColor(i,{legend:e=!0,...o}){if(e===!0&&(e=i.type==="ordinal"?"swatches":"ramp"),i.domain!==void 0)switch(`${e}`.toLowerCase()){case"swatches":return legendSwatches(i,o);case"ramp":return legendRamp(i,o);default:throw new Error(`unknown legend type: ${e}`)}}function legendOpacity({type:i,interpolate:e,...o},{legend:d=!0,color:h=rgb(0,0,0),...g}){if(!e)throw new Error(`${i} opacity scales are not supported`);if(d===!0&&(d="ramp"),`${d}`.toLowerCase()!=="ramp")throw new Error(`${d} opacity legends are not supported`);return legendColor({type:i,...o,interpolate:interpolateOpacity(h)},{legend:d,...g})}function interpolateOpacity(i){const{r:e,g:o,b:d}=rgb(i)||rgb(0,0,0);return h=>`rgba(${e},${o},${d},${h})`}function createLegends(i,e,o){const d=[];for(const[h,g]of legendRegistry){const b=o[h];if(b!=null&&b.legend&&h in i){const $=g(i[h],legendOptions(e,i[h],b),j=>i[j]);$!=null&&d.push($)}}return d}const defaults$i={ariaLabel:"frame",fill:"none",stroke:"currentColor",clip:!1},lineDefaults={ariaLabel:"frame",fill:null,stroke:"currentColor",strokeLinecap:"square",clip:!1};class Frame extends Mark$1{constructor(e={}){const{anchor:o=null,inset:d=0,insetTop:h=d,insetRight:g=d,insetBottom:b=d,insetLeft:$=d,rx:j,ry:et}=e;super(singleton,void 0,e,o==null?defaults$i:lineDefaults),this.anchor=maybeKeyword(o,"anchor",["top","right","bottom","left"]),this.insetTop=number$1(h),this.insetRight=number$1(g),this.insetBottom=number$1(b),this.insetLeft=number$1($),this.rx=number$1(j),this.ry=number$1(et)}render(e,o,d,h,g){const{marginTop:b,marginRight:$,marginBottom:j,marginLeft:et,width:tt,height:nt}=h,{anchor:rt,insetTop:ot,insetRight:st,insetBottom:bt,insetLeft:vt,rx:at,ry:ut}=this,$t=et+vt,wt=tt-$-st,At=b+ot,xt=nt-j-bt;return create(rt?"svg:line":"svg:rect",g).datum(0).call(applyIndirectStyles,this,h,g).call(applyDirectStyles,this).call(applyChannelStyles,this,d).call(applyTransform,this,{}).call(rt==="left"?Rt=>Rt.attr("x1",$t).attr("x2",$t).attr("y1",At).attr("y2",xt):rt==="right"?Rt=>Rt.attr("x1",wt).attr("x2",wt).attr("y1",At).attr("y2",xt):rt==="top"?Rt=>Rt.attr("x1",$t).attr("x2",wt).attr("y1",At).attr("y2",At):rt==="bottom"?Rt=>Rt.attr("x1",$t).attr("x2",wt).attr("y1",xt).attr("y2",xt):Rt=>Rt.attr("x",$t).attr("y",At).attr("width",wt-$t).attr("height",xt-At).attr("rx",at).attr("ry",ut)).node()}}function frame$1(i){return new Frame(i)}const defaults$h={ariaLabel:"tip",fill:"white",stroke:"currentColor"},ignoreChannels=new Set(["geometry","href","src","ariaLabel","scales"]);class Tip extends Mark$1{constructor(e,o={}){o.tip&&(o={...o,tip:!1}),o.title===void 0&&isIterable$1(e)&&isTextual(e)&&(o={...o,title:identity$1});const{x:d,y:h,x1:g,x2:b,y1:$,y2:j,anchor:et,monospace:tt,fontFamily:nt=tt?"ui-monospace, monospace":void 0,fontSize:rt,fontStyle:ot,fontVariant:st,fontWeight:bt,lineHeight:vt=1,lineWidth:at=20,frameAnchor:ut,format:$t,textAnchor:wt="start",textOverflow:At,textPadding:xt=8,title:Rt,pointerSize:Ot=12,pathFilter:kt="drop-shadow(0 3px 4px rgba(0,0,0,0.2))"}=o;super(e,{x:{value:g!=null&&b!=null?null:d,scale:"x",optional:!0},y:{value:$!=null&&j!=null?null:h,scale:"y",optional:!0},x1:{value:g,scale:"x",optional:b==null},y1:{value:$,scale:"y",optional:j==null},x2:{value:b,scale:"x",optional:g==null},y2:{value:j,scale:"y",optional:$==null},title:{value:Rt,optional:!0}},o,defaults$h),this.anchor=maybeAnchor$3(et,"anchor"),this.previousAnchor=this.anchor??"top-left",this.frameAnchor=maybeFrameAnchor(ut),this.textAnchor=impliedString(wt,"middle"),this.textPadding=+xt,this.pointerSize=+Ot,this.pathFilter=string(kt),this.lineHeight=+vt,this.lineWidth=+at,this.textOverflow=maybeTextOverflow(At),this.monospace=!!tt,this.fontFamily=string(nt),this.fontSize=number$1(rt),this.fontStyle=string(ot),this.fontVariant=string(st),this.fontWeight=string(bt);for(const Mt in defaults$h)Mt in this.channels&&(this[Mt]=defaults$h[Mt]);this.splitLines=splitter(this),this.clipLine=clipper(this),this.format={...$t}}render(e,o,d,h,g){const b=this,{x:$,y:j,fx:et,fy:tt}=o,{ownerSVGElement:nt,document:rt}=g,{anchor:ot,monospace:st,lineHeight:bt,lineWidth:vt}=this,{textPadding:at,pointerSize:ut,pathFilter:$t}=this,{marginTop:wt,marginLeft:At}=h,{x1:xt,y1:Rt,x2:Ot,y2:kt,x:Mt=xt??Ot,y:Bt=Rt??kt}=d,jt=et?et(e.fx)-At:0,zt=tt?tt(e.fy)-wt:0,[Nt,Ct]=applyFrameAnchor(this,h),Ft=anchorX$1(d,Nt),Vt=anchorY$1(d,Ct),Ut=st?monospaceWidth:defaultWidth,Ht=Ut(ellipsis);let Pt,Yt;"title"in d?(Pt=d.channels,Yt=formatTitle):(Pt=getSourceChannels.call(this,d,o),Yt=formatChannels);const Xt=create("svg:g",g).call(applyIndirectStyles,this,h,g).call(applyIndirectTextStyles,this).call(applyTransform,this,{x:Mt&&$,y:Bt&&j}).call(Cn=>Cn.selectAll().data(e).enter().append("g").attr("transform",On=>`translate(${Math.round(Ft(On))},${Math.round(Vt(On))})`).call(applyDirectStyles,this).call(On=>On.append("path").attr("filter",$t)).call(On=>On.append("text").each(function(vn){const Nn=select$1(this);this.setAttribute("fill","currentColor"),this.setAttribute("fill-opacity",1),this.setAttribute("stroke","none");const Jt=Yt.call(b,vn,e,Pt,o,d);if(typeof Jt=="string")for(const Bn of b.splitLines(Jt))wn(Nn,{value:b.clipLine(Bn)});else{const Bn=new Set;for(const Ln of Jt){const{label:Zt=""}=Ln;Zt&&Bn.has(Zt)||(Bn.add(Zt),wn(Nn,Ln))}}})));function wn(Cn,{label:On,value:vn,color:Nn,opacity:Jt}){On??(On=""),vn??(vn="");const Bn=Nn!=null||Jt!=null;let Ln,Zt=vt*100;const[rr]=cut(On,Zt,Ut,Ht);if(rr>=0)On=On.slice(0,rr).trimEnd()+ellipsis,Ln=vn.trim(),vn="";else{(On||!vn&&!Bn)&&(vn=" "+vn);const[sr]=cut(vn,Zt-Ut(On),Ut,Ht);sr>=0&&(vn=vn.slice(0,sr).trimEnd()+ellipsis,Ln=vn.trim())}const tr=Cn.append("tspan").attr("x",0).attr("dy",`${bt}em`).text("​");On&&tr.append("tspan").attr("font-weight","bold").text(On),vn&&tr.append(()=>rt.createTextNode(vn)),Bn&&tr.append("tspan").text(" ■").attr("fill",Nn).attr("fill-opacity",Jt).style("user-select","none"),Ln&&tr.append("title").text(Ln)}function Mn(){const{width:Cn,height:On}=h.facet??h;Xt.selectChildren().each(function(vn){let{x:Nn,width:Jt,height:Bn}=this.getBBox();Jt=Math.round(Jt),Bn=Math.round(Bn);let Ln=ot;if(Ln===void 0){Ln=b.previousAnchor;const tr=Ft(vn)+jt,sr=Vt(vn)+zt,ar=tr+Jt+at*2<Cn,er=tr-Jt-at*2>0,ir=sr+Bn+ut+at*2+7<On,Mr=sr-Bn-ut-at*2>0,$r=(/-left$/.test(Ln)?ar||!er:ar&&!er)?"left":"right",so=(/^top-/.test(Ln)?ir||!Mr:ir&&!Mr)?"top":"bottom";Ln=b.previousAnchor=`${so}-${$r}`}const Zt=this.firstChild,rr=this.lastChild;if(Zt.setAttribute("d",getPath(Ln,ut,at,Jt,Bn)),Nn)for(const tr of rr.childNodes)tr.setAttribute("x",-Nn);rr.setAttribute("y",`${+getLineOffset(Ln,rr.childNodes.length,bt).toFixed(6)}em`),rr.setAttribute("transform",`translate(${getTextTranslate(Ln,ut,at,Jt,Bn)})`)}),Xt.attr("visibility",null)}return e.length&&(Xt.attr("visibility","hidden"),nt.isConnected?Promise.resolve().then(Mn):typeof requestAnimationFrame<"u"&&requestAnimationFrame(Mn)),Xt.node()}}function tip(i,{x:e,y:o,...d}={}){return d.frameAnchor===void 0&&([e,o]=maybeTuple(e,o)),new Tip(i,{...d,x:e,y:o})}function getLineOffset(i,e,o){return/^top(?:-|$)/.test(i)?.94-o:-.29-e*o}function getTextTranslate(i,e,o,d,h){switch(i){case"middle":return[-d/2,h/2];case"top-left":return[o,e+o];case"top":return[-d/2,e/2+o];case"top-right":return[-d-o,e+o];case"right":return[-e/2-d-o,h/2];case"bottom-left":return[o,-e-o];case"bottom":return[-d/2,-e/2-o];case"bottom-right":return[-d-o,-e-o];case"left":return[o+e/2,h/2]}}function getPath(i,e,o,d,h){const g=d+o*2,b=h+o*2;switch(i){case"middle":return`M${-g/2},${-b/2}h${g}v${b}h${-g}z`;case"top-left":return`M0,0l${e},${e}h${g-e}v${b}h${-g}z`;case"top":return`M0,0l${e/2},${e/2}h${(g-e)/2}v${b}h${-g}v${-b}h${(g-e)/2}z`;case"top-right":return`M0,0l${-e},${e}h${e-g}v${b}h${g}z`;case"right":return`M0,0l${-e/2},${-e/2}v${e/2-b/2}h${-g}v${b}h${g}v${e/2-b/2}z`;case"bottom-left":return`M0,0l${e},${-e}h${g-e}v${-b}h${-g}z`;case"bottom":return`M0,0l${e/2},${-e/2}h${(g-e)/2}v${-b}h${-g}v${b}h${(g-e)/2}z`;case"bottom-right":return`M0,0l${-e},${-e}h${e-g}v${-b}h${g}z`;case"left":return`M0,0l${e/2},${-e/2}v${e/2-b/2}h${g}v${b}h${-g}v${e/2-b/2}z`}}function getSourceChannels({channels:i},e){var h,g;const o={};let d=this.format;d=maybeExpandPairedFormat(d,i,"x"),d=maybeExpandPairedFormat(d,i,"y"),this.format=d;for(const b in d){const $=d[b];if(!($===null||$===!1))if(b==="fx"||b==="fy")o[b]=!0;else{const j=getSource(i,b);j&&(o[b]=j)}}for(const b in i){if(b in o||b in d||ignoreChannels.has(b))continue;const $=getSource(i,b);$&&(o[b]=$)}this.facet&&(e.fx&&!("fx"in d)&&(o.fx=!0),e.fy&&!("fy"in d)&&(o.fy=!0));for(const b in o){const $=this.format[b];if(typeof $=="string"){const j=((h=o[b])==null?void 0:h.value)??((g=e[b])==null?void 0:g.domain())??[];this.format[b]=(isTemporal(j)?utcFormat:format)($)}else if($===void 0||$===!0){const j=e[b];this.format[b]=j!=null&&j.bandwidth?inferTickFormat(j,j.domain()):formatDefault}}return o}function maybeExpandPairedFormat(i,e,o){if(!(o in i))return i;const d=`${o}1`,h=`${o}2`;if((d in i||!(d in e))&&(h in i||!(h in e)))return i;const g=Object.entries(i),b=i[o];return g.splice(g.findIndex(([$])=>$===o)+1,0,[d,b],[h,b]),Object.fromEntries(g)}function formatTitle(i,e,{title:o}){return formatDefault(o.value[i],i)}function*formatChannels(i,e,o,d,h){for(const g in o){if(g==="fx"||g==="fy"){yield{label:formatLabel(d,o,g),value:this.format[g](e[g],i)};continue}if(g==="x1"&&"x2"in o||g==="y1"&&"y2"in o)continue;const b=o[g];if(g==="x2"&&"x1"in o)yield{label:formatPairLabel(d,o,"x"),value:formatPair(this.format.x2,o.x1,b,i)};else if(g==="y2"&&"y1"in o)yield{label:formatPairLabel(d,o,"y"),value:formatPair(this.format.y2,o.y1,b,i)};else{const $=b.value[i],j=b.scale;if(!defined($)&&j==null)continue;yield{label:formatLabel(d,o,g),value:this.format[g]($,i),color:j==="color"?h[g][i]:null,opacity:j==="opacity"?h[g][i]:null}}}}function formatPair(i,e,o,d){var h;return(h=o.hint)!=null&&h.length?`${i(o.value[d]-e.value[d],d)}`:`${i(e.value[d],d)}–${i(o.value[d],d)}`}function formatPairLabel(i,e,o){const d=formatLabel(i,e,`${o}1`,o),h=formatLabel(i,e,`${o}2`,o);return d===h?d:`${d}–${h}`}function formatLabel(i,e,o,d=o){const h=e[o],g=i[(h==null?void 0:h.scale)??o];return String((g==null?void 0:g.label)??(h==null?void 0:h.label)??d)}function plot$1(i={}){var Ht;const{facet:e,style:o,title:d,subtitle:h,caption:g,ariaLabel:b,ariaDescription:$}=i,j=maybeClassName(i.className),et=i.marks===void 0?[]:flatMarks(i.marks);et.push(...inferTips(et));const tt=maybeTopFacet(e,i),nt=new Map;for(const Pt of et){const Yt=maybeMarkFacet(Pt,tt,i);Yt&&nt.set(Pt,Yt)}const rt=new Map;tt&&addScaleChannels(rt,[tt],i),addScaleChannels(rt,nt,i);const ot=flatMarks(inferAxes(et,rt,i));for(const Pt of ot){const Yt=maybeMarkFacet(Pt,tt,i);Yt&&nt.set(Pt,Yt)}et.unshift(...ot);let st=createFacets(rt,i);if(st!==void 0){const Pt=tt?facetFilter(st,tt):void 0;for(const Xt of et){if(Xt.facet===null||Xt.facet==="super")continue;const wn=nt.get(Xt);wn!==void 0&&(wn.facetsIndex=Xt.fx!=null||Xt.fy!=null?facetFilter(st,wn):Pt)}const Yt=new Set;for(const{facetsIndex:Xt}of nt.values())Xt==null||Xt.forEach((wn,Mn)=>{(wn==null?void 0:wn.length)>0&&Yt.add(Mn)});st.forEach(0<Yt.size&&Yt.size<st.length?(Xt,wn)=>Xt.empty=!Yt.has(wn):Xt=>Xt.empty=!1);for(const Xt of et)if(Xt.facet==="exclude"){const wn=nt.get(Xt);wn!==void 0&&(wn.facetsIndex=facetExclude(wn.facetsIndex))}}for(const Pt of registry.keys())isScaleOptions(i[Pt])&&Pt!=="fx"&&Pt!=="fy"&&rt.set(Pt,[]);const bt=new Map;for(const Pt of et){if(bt.has(Pt))throw new Error("duplicate mark; each mark must be unique");const{facetsIndex:Yt,channels:Xt}=nt.get(Pt)??{},{data:wn,facets:Mn,channels:Cn}=Pt.initialize(Yt,Xt,i);applyScaleTransforms(Cn,i),bt.set(Pt,{data:wn,facets:Mn,channels:Cn})}const vt=createScales(addScaleChannels(rt,bt,i),i),at=createDimensions(vt,et,i);autoScaleRange(vt,at);const ut=createScaleFunctions(vt),{fx:$t,fy:wt}=ut,At=$t||wt?innerDimensions(vt,at):at,xt=$t||wt?actualDimensions(ut,at):at,Rt=createContext(i),Ot=Rt.document,kt=creator("svg").call(Ot.documentElement);let Mt=kt;Rt.ownerSVGElement=kt,Rt.className=j,Rt.projection=createProjection(i,At),Rt.filterFacets=(Pt,Yt)=>facetFilter(st,{channels:Yt,groups:facetGroups(Pt,Yt)}),Rt.getMarkState=Pt=>{const Yt=bt.get(Pt),Xt=nt.get(Pt);return{...Yt,channels:{...Yt.channels,...Xt==null?void 0:Xt.channels}}},Rt.dispatchValue=Pt=>{Mt.value!==Pt&&(Mt.value=Pt,Mt.dispatchEvent(new Event("input",{bubbles:!0})))};const Bt=new Set;for(const[Pt,Yt]of bt)if(Pt.initializer!=null){const Xt=Pt.facet==="super"?xt:At,wn=Pt.initializer(Yt.data,Yt.facets,Yt.channels,ut,Xt,Rt);if(wn.data!==void 0&&(Yt.data=wn.data),wn.facets!==void 0&&(Yt.facets=wn.facets),wn.channels!==void 0){const{fx:Mn,fy:Cn,...On}=wn.channels;inferChannelScales(On),Object.assign(Yt.channels,On);for(const vn of Object.values(On)){const{scale:Nn}=vn;Nn!=null&&!isPosition(registry.get(Nn))&&(applyScaleTransform(vn,i),Bt.add(Nn))}(Mn!=null||Cn!=null)&&nt.set(Pt,!0)}}if(Bt.size){const Pt=new Map;addScaleChannels(Pt,bt,i,Mn=>Bt.has(Mn)),addScaleChannels(rt,bt,i,Mn=>Bt.has(Mn));const Yt=inheritScaleLabels(createScales(Pt,i),vt),{scales:Xt,...wn}=createScaleFunctions(Yt);Object.assign(vt,Yt),Object.assign(ut,wn),Object.assign(ut.scales,Xt)}let jt,zt;st!==void 0&&(jt={x:$t==null?void 0:$t.domain(),y:wt==null?void 0:wt.domain()},st=recreateFacets(st,jt),zt=facetTranslator($t,wt,at));for(const[Pt,Yt]of bt)Yt.values=Pt.scale(Yt.channels,ut,Rt);const{width:Nt,height:Ct}=at;select$1(kt).attr("class",j).attr("fill","currentColor").attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("text-anchor","middle").attr("width",Nt).attr("height",Ct).attr("viewBox",`0 0 ${Nt} ${Ct}`).attr("aria-label",b).attr("aria-description",$).call(Pt=>Pt.append("style").text(`.${j} {
  display: block;
  background: white;
  height: auto;
  height: intrinsic;
  max-width: 100%;
}
.${j} text,
.${j} tspan {
  white-space: pre;
}`)).call(applyInlineStyles,o);for(const Pt of et){const{channels:Yt,values:Xt,facets:wn}=bt.get(Pt);if(st===void 0||Pt.facet==="super"){let Mn=null;if(wn&&(Mn=wn[0],Mn=Pt.filter(Mn,Yt,Xt),Mn.length===0))continue;const Cn=Pt.render(Mn,ut,Xt,xt,Rt);if(Cn==null)continue;kt.appendChild(Cn)}else{let Mn;for(const Cn of st){if(!(((Ht=Pt.facetAnchor)==null?void 0:Ht.call(Pt,st,jt,Cn))??!Cn.empty))continue;let On=null;if(wn){const Nn=nt.has(Pt);if(On=wn[Nn?Cn.i:0],On=Pt.filter(On,Yt,Xt),On.length===0)continue;!Nn&&On===wn[0]&&(On=subarray(On)),On.fx=Cn.x,On.fy=Cn.y,On.fi=Cn.i}const vn=Pt.render(On,ut,Xt,At,Rt);if(vn!=null){(Mn??(Mn=select$1(kt).append("g"))).append(()=>vn).datum(Cn);for(const Nn of["aria-label","aria-description","aria-hidden","transform"])vn.hasAttribute(Nn)&&(Mn.attr(Nn,vn.getAttribute(Nn)),vn.removeAttribute(Nn))}}Mn==null||Mn.selectChildren().attr("transform",zt)}}const Ft=createLegends(vt,Rt,i),{figure:Vt=d!=null||h!=null||g!=null||Ft.length>0}=i;Vt&&(Mt=Ot.createElement("figure"),Mt.className=`${j}-figure`,Mt.style.maxWidth="initial",d!=null&&Mt.append(createTitleElement(Ot,d,"h2")),h!=null&&Mt.append(createTitleElement(Ot,h,"h3")),Mt.append(...Ft,kt),g!=null&&Mt.append(createFigcaption(Ot,g))),Mt.scale=exposeScales(ut.scales),Mt.legend=exposeLegends(vt,Rt,i);const Ut=consumeWarnings();return Ut>0&&select$1(kt).append("text").attr("x",Nt).attr("y",20).attr("dy","-1em").attr("text-anchor","end").attr("font-family","initial").text("⚠️").append("title").text(`${Ut.toLocaleString("en-US")} warning${Ut===1?"":"s"}. Please check the console.`),Mt}function createTitleElement(i,e,o){if(e.ownerDocument)return e;const d=i.createElement(o);return d.append(e),d}function createFigcaption(i,e){const o=i.createElement("figcaption");return o.append(e),o}function plotThis({marks:i=[],...e}={}){return plot$1({...e,marks:[...i,this]})}Mark$1.prototype.plot=plotThis;function flatMarks(i){return i.flat(1/0).filter(e=>e!=null).map(markify)}function markify(i){return typeof i.render=="function"?i:new Render(i)}class Render extends Mark$1{constructor(e){if(typeof e!="function")throw new TypeError("invalid mark; missing render function");super(),this.render=e}render(){}}function applyScaleTransforms(i,e){for(const o in i)applyScaleTransform(i[o],e);return i}function applyScaleTransform(i,e){const{scale:o,transform:d=!0}=i;if(o==null||!d)return;const{type:h,percent:g,interval:b,transform:$=g?j=>j*100:maybeIntervalTransform(b,h)}=e[o]??{};$!=null&&(i.value=map$1(i.value,$),i.transform=!1)}function inferChannelScales(i){for(const e in i)inferChannelScale(e,i[e])}function addScaleChannels(i,e,o,d=yes){var h,g;for(const{channels:b}of e.values())for(const $ in b){const j=b[$],{scale:et}=j;if(et!=null&&d(et))if(et==="projection"){if(!hasProjection(o)){const tt=((h=o.x)==null?void 0:h.domain)===void 0,nt=((g=o.y)==null?void 0:g.domain)===void 0;if(tt||nt){const[rt,ot]=getGeometryChannels(j);tt&&addScaleChannel(i,"x",rt),nt&&addScaleChannel(i,"y",ot)}}}else addScaleChannel(i,et,j)}return i}function addScaleChannel(i,e,o){const d=i.get(e);d!==void 0?d.push(o):i.set(e,[o])}function maybeTopFacet(i,e){if(i==null)return;const{x:o,y:d}=i;if(o==null&&d==null)return;const h=arrayify(i.data);if(h==null)throw new Error("missing facet data");const g={};o!=null&&(g.fx=createChannel(h,{value:o,scale:"fx"})),d!=null&&(g.fy=createChannel(h,{value:d,scale:"fy"})),applyScaleTransforms(g,e);const b=facetGroups(h,g);return{channels:g,groups:b,data:i.data}}function maybeMarkFacet(i,e,o){var j;if(i.facet===null||i.facet==="super")return;const{fx:d,fy:h}=i;if(d!=null||h!=null){const et=arrayify(i.data??d??h);if(et===void 0)throw new Error(`missing facet data in ${i.ariaLabel}`);if(et===null)return;const tt={};return d!=null&&(tt.fx=createChannel(et,{value:d,scale:"fx"})),h!=null&&(tt.fy=createChannel(et,{value:h,scale:"fy"})),applyScaleTransforms(tt,o),{channels:tt,groups:facetGroups(et,tt)}}if(e===void 0)return;const{channels:g,groups:b,data:$}=e;if(i.facet!=="auto"||i.data===$)return{channels:g,groups:b};$.length>0&&(b.size>1||b.size===1&&g.fx&&g.fy&&[...b][0][1].size>1)&&((j=arrayify(i.data))==null?void 0:j.length)===$.length&&warn(`Warning: the ${i.ariaLabel} mark appears to use faceted data, but isn’t faceted. The mark data has the same length as the facet data and the mark facet option is "auto", but the mark data and facet data are distinct. If this mark should be faceted, set the mark facet option to true; otherwise, suppress this warning by setting the mark facet option to false.`)}function derive(i,e={}){return initializer({...e,x:null,y:null},(o,d,h,g,b,$)=>$.getMarkState(i))}function inferTips(i){const e=[];for(const o of i){let d=o.tip;if(d){d===!0?d={}:typeof d=="string"&&(d={pointer:d});let{pointer:h}=d;h=/^x$/i.test(h)?pointerX:/^y$/i.test(h)?pointerY:pointer,d=h(derive(o,d)),d.title=null;const g=tip(o.data,d);g.facet=o.facet,g.facetAnchor=o.facetAnchor,e.push(g)}}return e}function inferAxes(i,e,o){let{projection:d,x:h={},y:g={},fx:b={},fy:$={},axis:j,grid:et,facet:tt={},facet:{axis:nt=j,grid:rt}=tt,x:{axis:ot=j,grid:st=ot===null?null:et}=h,y:{axis:bt=j,grid:vt=bt===null?null:et}=g,fx:{axis:at=nt,grid:ut=at===null?null:rt}=b,fy:{axis:$t=nt,grid:wt=$t===null?null:rt}=$}=o;(d||!isScaleOptions(h)&&!hasPositionChannel("x",i))&&(ot=st=null),(d||!isScaleOptions(g)&&!hasPositionChannel("y",i))&&(bt=vt=null),e.has("fx")||(at=ut=null),e.has("fy")||($t=wt=null),ot===void 0&&(ot=!hasAxis(i,"x")),bt===void 0&&(bt=!hasAxis(i,"y")),at===void 0&&(at=!hasAxis(i,"fx")),$t===void 0&&($t=!hasAxis(i,"fy")),ot===!0&&(ot="bottom"),bt===!0&&(bt="left"),at===!0&&(at=ot==="top"||ot===null?"bottom":"top"),$t===!0&&($t=bt==="right"||bt===null?"left":"right");const At=[];return maybeGrid(At,wt,gridFy$1,$),maybeAxis(At,$t,axisFy$1,"right","left",tt,$),maybeGrid(At,ut,gridFx$1,b),maybeAxis(At,at,axisFx$1,"top","bottom",tt,b),maybeGrid(At,vt,gridY$1,g),maybeAxis(At,bt,axisY$1,"left","right",o,g),maybeGrid(At,st,gridX$1,h),maybeAxis(At,ot,axisX$1,"bottom","top",o,h),At}function maybeAxis(i,e,o,d,h,g,b){if(!e)return;const $=isBoth(e);b=axisOptions($?d:e,g,b);const{line:j}=b;(o===axisY$1||o===axisX$1)&&j&&!isNone(j)&&i.push(frame$1(lineOptions(b))),i.push(o(b)),$&&i.push(o({...b,anchor:h,label:null}))}function maybeGrid(i,e,o,d){!e||isNone(e)||i.push(o(gridOptions(e,d)))}function isBoth(i){return/^\s*both\s*$/i.test(i)}function axisOptions(i,e,{line:o=e.line,ticks:d,tickSize:h,tickSpacing:g,tickPadding:b,tickFormat:$,tickRotate:j,fontVariant:et,ariaLabel:tt,ariaDescription:nt,label:rt=e.label,labelAnchor:ot,labelArrow:st=e.labelArrow,labelOffset:bt}){return{anchor:i,line:o,ticks:d,tickSize:h,tickSpacing:g,tickPadding:b,tickFormat:$,tickRotate:j,fontVariant:et,ariaLabel:tt,ariaDescription:nt,label:rt,labelAnchor:ot,labelArrow:st,labelOffset:bt}}function lineOptions(i){const{anchor:e,line:o}=i;return{anchor:e,facetAnchor:e+"-empty",stroke:o===!0?void 0:o}}function gridOptions(i,{stroke:e=isColor$1(i)?i:void 0,ticks:o=isGridTicks(i)?i:void 0,tickSpacing:d,ariaLabel:h,ariaDescription:g}){return{stroke:e,ticks:o,tickSpacing:d,ariaLabel:h,ariaDescription:g}}function isGridTicks(i){switch(typeof i){case"number":return!0;case"string":return!isColor$1(i)}return isIterable$1(i)||typeof(i==null?void 0:i.range)=="function"}function hasAxis(i,e){const o=`${e}-axis `;return i.some(d=>{var h;return(h=d.ariaLabel)==null?void 0:h.startsWith(o)})}function hasPositionChannel(i,e){for(const o of e)for(const d in o.channels){const{scale:h}=o.channels[d];if(h===i||h==="projection")return!0}return!1}function inheritScaleLabels(i,e){for(const o in i){const d=i[o],h=e[o];d.label===void 0&&h&&(d.label=h.label)}return i}function actualDimensions({fx:i,fy:e},o){const{marginTop:d,marginRight:h,marginBottom:g,marginLeft:b,width:$,height:j}=outerDimensions(o),et=i&&outerRange(i),tt=e&&outerRange(e);return{marginTop:e?tt[0]:d,marginRight:i?$-et[1]:h,marginBottom:e?j-tt[1]:g,marginLeft:i?et[0]:b,inset:{marginTop:o.marginTop,marginRight:o.marginRight,marginBottom:o.marginBottom,marginLeft:o.marginLeft},width:$,height:j}}function outerRange(i){const e=i.domain();let o=i(e[0]),d=i(e[e.length-1]);return d<o&&([o,d]=[d,o]),[o,d+i.bandwidth()]}const curves=new Map([["basis",curveBasis],["basis-closed",curveBasisClosed],["basis-open",curveBasisOpen],["bundle",curveBundle],["bump-x",bumpX],["bump-y",bumpY],["cardinal",curveCardinal],["cardinal-closed",curveCardinalClosed],["cardinal-open",curveCardinalOpen],["catmull-rom",curveCatmullRom],["catmull-rom-closed",curveCatmullRomClosed],["catmull-rom-open",curveCatmullRomOpen],["linear",curveLinear],["linear-closed",curveLinearClosed],["monotone-x",monotoneX],["monotone-y",monotoneY],["natural",curveNatural],["step",curveStep],["step-after",stepAfter],["step-before",stepBefore]]);function maybeCurve(i=curveLinear,e){if(typeof i=="function")return i;const o=curves.get(`${i}`.toLowerCase());if(!o)throw new Error(`unknown curve: ${i}`);if(e!==void 0){if("beta"in o)return o.beta(e);if("tension"in o)return o.tension(e);if("alpha"in o)return o.alpha(e)}return o}function maybeCurveAuto(i=curveAuto,e){return typeof i!="function"&&`${i}`.toLowerCase()==="auto"?curveAuto:maybeCurve(i,e)}function curveAuto(i){return curveLinear(i)}function binX(i={y:"count"},e={}){[i,e]=mergeOptions$2(i,e);const{x:o,y:d}=e;return binn(maybeBinValue(o,e,identity$1),null,null,d,i,maybeInsetX(e))}function binY(i={x:"count"},e={}){[i,e]=mergeOptions$2(i,e);const{x:o,y:d}=e;return binn(null,maybeBinValue(d,e,identity$1),o,null,i,maybeInsetY(e))}function bin(i={fill:"count"},e={}){[i,e]=mergeOptions$2(i,e);const{x:o,y:d}=maybeBinValueTuple(e);return binn(o,d,null,null,i,maybeInsetX(maybeInsetY(e)))}function maybeDenseInterval(i,e,o={}){if((o==null?void 0:o.interval)==null)return o;const{reduce:d=reduceFirst$1}=o,h={filter:null};return o[e]!=null&&(h[e]=d),o[`${e}1`]!=null&&(h[`${e}1`]=d),o[`${e}2`]!=null&&(h[`${e}2`]=d),i(h,o)}function maybeDenseIntervalX(i={}){return maybeDenseInterval(binX,"y",withTip(i,"x"))}function maybeDenseIntervalY(i={}){return maybeDenseInterval(binY,"x",withTip(i,"y"))}function binn(i,e,o,d,{data:h=reduceIdentity,filter:g=reduceCount,sort:b,reverse:$,...j}={},et={}){i=maybeBin(i),e=maybeBin(e),j=maybeBinOutputs(j,et),h=maybeBinReduce(h,identity$1),b=b==null?void 0:maybeBinOutput("sort",b,et),g=g==null?void 0:maybeBinEvaluator("filter",g,et),o!=null&&hasOutput(j,"x","x1","x2")&&(o=null),d!=null&&hasOutput(j,"y","y1","y2")&&(d=null);const[tt,nt]=maybeColumn(i),[rt,ot]=maybeColumn(i),[st,bt]=maybeColumn(e),[vt,at]=maybeColumn(e),[ut,$t]=o!=null?[o,"x"]:d!=null?[d,"y"]:[],[wt,At]=maybeColumn(ut),{x:xt,y:Rt,z:Ot,fill:kt,stroke:Mt,x1:Bt,x2:jt,y1:zt,y2:Nt,domain:Ct,cumulative:Ft,thresholds:Vt,interval:Ut,...Ht}=et,[Pt,Yt]=maybeColumn(Ot),[Xt]=maybeColorChannel(kt),[wn]=maybeColorChannel(Mt),[Mn,Cn]=maybeColumn(Xt),[On,vn]=maybeColumn(wn);return{..."z"in et&&{z:Pt||Ot},..."fill"in et&&{fill:Mn||kt},..."stroke"in et&&{stroke:On||Mt},...basic(Ht,(Nn,Jt,Bn)=>{const Ln=maybeApplyInterval(valueof(Nn,ut),Bn==null?void 0:Bn[$t]),Zt=valueof(Nn,Ot),rr=valueof(Nn,Xt),tr=valueof(Nn,wn),sr=maybeSubgroup(j,{z:Zt,fill:rr,stroke:tr}),ar=[],er=[],ir=Ln&&At([]),Mr=Zt&&Yt([]),$r=rr&&Cn([]),so=tr&&vn([]),To=i&&nt([]),xa=i&&ot([]),Vs=e&&bt([]),zs=e&&at([]),yl=bing(i==null?void 0:i(Nn),e==null?void 0:e(Nn));let $l=0;for(const Hr of j)Hr.initialize(Nn);b&&b.initialize(Nn),g&&g.initialize(Nn);for(const Hr of Jt){const Ws=[];for(const ao of j)ao.scope("facet",Hr);b&&b.scope("facet",Hr),g&&g.scope("facet",Hr);for(const[ao,As]of maybeGroup(Hr,sr))for(const[Sl,lo]of maybeGroup(As,Ln))for(const[Cr,Wr]of yl(lo))if(!(g&&!g.reduce(Cr,Wr))){Ws.push($l++),er.push(h.reduceIndex(Cr,Nn,Wr)),Ln&&ir.push(Sl),Zt&&Mr.push(sr===Zt?ao:Zt[(Cr.length>0?Cr:lo)[0]]),rr&&$r.push(sr===rr?ao:rr[(Cr.length>0?Cr:lo)[0]]),tr&&so.push(sr===tr?ao:tr[(Cr.length>0?Cr:lo)[0]]),To&&(To.push(Wr.x1),xa.push(Wr.x2)),Vs&&(Vs.push(Wr.y1),zs.push(Wr.y2));for(const Io of j)Io.reduce(Cr,Wr);b&&b.reduce(Cr)}ar.push(Ws)}return maybeSort(ar,b,$),{data:er,facets:ar}}),...!hasOutput(j,"x")&&(tt?{x1:tt,x2:rt,x:mid(tt,rt)}:{x:xt,x1:Bt,x2:jt}),...!hasOutput(j,"y")&&(st?{y1:st,y2:vt,y:mid(st,vt)}:{y:Rt,y1:zt,y2:Nt}),...wt&&{[$t]:wt},...Object.fromEntries(j.map(({name:Nn,output:Jt})=>[Nn,Jt]))}}function mergeOptions$2({cumulative:i,domain:e,thresholds:o,interval:d,...h},g){return[h,{cumulative:i,domain:e,thresholds:o,interval:d,...g}]}function maybeBinValue(i,{cumulative:e,domain:o,thresholds:d,interval:h},g){return i={...maybeValue(i)},i.domain===void 0&&(i.domain=o),i.cumulative===void 0&&(i.cumulative=e),i.thresholds===void 0&&(i.thresholds=d),i.interval===void 0&&(i.interval=h),i.value===void 0&&(i.value=g),i.thresholds=maybeThresholds(i.thresholds,i.interval),i}function maybeBinValueTuple(i){let{x:e,y:o}=i;return e=maybeBinValue(e,i),o=maybeBinValue(o,i),[e.value,o.value]=maybeTuple(e.value,o.value),{x:e,y:o}}function maybeBin(i){if(i==null)return;const{value:e,cumulative:o,domain:d=extent$2,thresholds:h}=i,g=b=>{let $=valueof(b,e),j;if(isTemporal($)||isTimeThresholds(h)){$=map$1($,coerceDate,Float64Array);let[tt,nt]=typeof d=="function"?d($):d,rt=typeof h=="function"&&!isInterval(h)?h($,tt,nt):h;typeof rt=="number"&&(rt=utcTickInterval(tt,nt,rt)),isInterval(rt)&&(d===extent$2&&(tt=rt.floor(tt),nt=rt.offset(rt.floor(nt))),rt=rt.range(tt,rt.offset(nt))),j=rt}else{$=coerceNumbers($);let[tt,nt]=typeof d=="function"?d($):d,rt=typeof h=="function"&&!isInterval(h)?h($,tt,nt):h;if(typeof rt=="number")if(d===extent$2){let ot=tickIncrement(tt,nt,rt);if(isFinite(ot))if(ot>0){let st=Math.round(tt/ot),bt=Math.round(nt/ot);st*ot<=tt||--st,bt*ot>nt||++bt;let vt=bt-st+1;rt=new Float64Array(vt);for(let at=0;at<vt;++at)rt[at]=(st+at)*ot}else if(ot<0){ot=-ot;let st=Math.round(tt*ot),bt=Math.round(nt*ot);st/ot<=tt||--st,bt/ot>nt||++bt;let vt=bt-st+1;rt=new Float64Array(vt);for(let at=0;at<vt;++at)rt[at]=(st+at)/ot}else rt=[tt];else rt=[tt]}else rt=ticks(tt,nt,rt);else isInterval(rt)&&(d===extent$2&&(tt=rt.floor(tt),nt=rt.offset(rt.floor(nt))),rt=rt.range(tt,rt.offset(nt)));j=rt}const et=[];if(j.length===1)et.push([j[0],j[0]]);else for(let tt=1;tt<j.length;++tt)et.push([j[tt-1],j[tt]]);return et.bin=(o<0?bin1cn:o>0?bin1cp:bin1)(et,j,$),et};return g.label=labelof(e),g}function maybeThresholds(i,e,o=thresholdAuto){if(i===void 0)return e===void 0?o:maybeRangeInterval(e);if(typeof i=="string"){switch(i.toLowerCase()){case"freedman-diaconis":return thresholdFreedmanDiaconis;case"scott":return thresholdScott;case"sturges":return thresholdSturges;case"auto":return thresholdAuto}return maybeUtcInterval(i)}return i}function maybeBinOutputs(i,e){return maybeOutputs(i,e,maybeBinOutput)}function maybeBinOutput(i,e,o){return maybeOutput(i,e,o,maybeBinEvaluator)}function maybeBinEvaluator(i,e,o){return maybeEvaluator(i,e,o,maybeBinReduce)}function maybeBinReduce(i,e){return maybeReduce$1(i,e,maybeBinReduceFallback)}function maybeBinReduceFallback(i){switch(`${i}`.toLowerCase()){case"x":return reduceX;case"x1":return reduceX1;case"x2":return reduceX2;case"y":return reduceY;case"y1":return reduceY1;case"y2":return reduceY2}throw new Error(`invalid bin reduce: ${i}`)}function thresholdAuto(i,e,o){return Math.min(200,thresholdScott(i,e,o))}function isTimeThresholds(i){return isTimeInterval(i)||isIterable$1(i)&&isTemporal(i)}function bing(i,e){return i&&e?function*(o){const d=i.bin(o);for(const[h,[g,b]]of i.entries()){const $=e.bin(d[h]);for(const[j,[et,tt]]of e.entries())yield[$[j],{x1:g,y1:et,x2:b,y2:tt}]}}:i?function*(o){const d=i.bin(o);for(const[h,[g,b]]of i.entries())yield[d[h],{x1:g,x2:b}]}:function*(o){const d=e.bin(o);for(const[h,[g,b]]of e.entries())yield[d[h],{y1:g,y2:b}]}}function bin1(i,e,o){return e=coerceNumbers(e),d=>{var g;const h=i.map(()=>[]);for(const b of d)(g=h[bisect(e,o[b])-1])==null||g.push(b);return h}}function bin1cp(i,e,o){const d=bin1(i,e,o);return h=>{const g=d(h);for(let b=1,$=g.length;b<$;++b){const j=g[b-1],et=g[b];for(const tt of j)et.push(tt)}return g}}function bin1cn(i,e,o){const d=bin1(i,e,o);return h=>{const g=d(h);for(let b=g.length-2;b>=0;--b){const $=g[b+1],j=g[b];for(const et of $)j.push(et)}return g}}function mid1(i,e){const o=(+i+ +e)/2;return i instanceof Date?new Date(o):o}const reduceX={reduceIndex(i,e,{x1:o,x2:d}){return mid1(o,d)}},reduceY={reduceIndex(i,e,{y1:o,y2:d}){return mid1(o,d)}},reduceX1={reduceIndex(i,e,{x1:o}){return o}},reduceX2={reduceIndex(i,e,{x2:o}){return o}},reduceY1={reduceIndex(i,e,{y1:o}){return o}},reduceY2={reduceIndex(i,e,{y2:o}){return o}};function maybeIdentityX(i={}){return hasX(i)?i:{...i,x:identity$1}}function maybeIdentityY(i={}){return hasY(i)?i:{...i,y:identity$1}}function exclusiveFacets(i,e){if(e.length===1)return{data:i,facets:e};const o=i.length,d=new Uint8Array(o);let h=0;for(const $ of e)for(const j of $)d[j]&&++h,d[j]=1;if(h===0)return{data:i,facets:e};i=slice(i);const g=i[reindex]=new Uint32Array(o+h);e=e.map($=>slice($,Uint32Array));let b=o;d.fill(0);for(const $ of e)for(let j=0,et=$.length;j<et;++j){const tt=$[j];d[tt]?($[j]=b,i[b]=i[tt],g[b]=tt,++b):g[tt]=tt,d[tt]=1}return{data:i,facets:e}}function stackX(i={},e={}){arguments.length===1&&([i,e]=mergeOptions$1(i));const{y1:o,y:d=o,x:h,...g}=e,[b,$,j,et]=stack(d,h,"y","x",i,g);return{...b,y1:o,y:$,x1:j,x2:et,x:mid(j,et)}}function stackX1(i={},e={}){arguments.length===1&&([i,e]=mergeOptions$1(i));const{y1:o,y:d=o,x:h}=e,[g,b,$]=stack(d,h,"y","x",i,e);return{...g,y1:o,y:b,x:$}}function stackX2(i={},e={}){arguments.length===1&&([i,e]=mergeOptions$1(i));const{y1:o,y:d=o,x:h}=e,[g,b,,$]=stack(d,h,"y","x",i,e);return{...g,y1:o,y:b,x:$}}function stackY(i={},e={}){arguments.length===1&&([i,e]=mergeOptions$1(i));const{x1:o,x:d=o,y:h,...g}=e,[b,$,j,et]=stack(d,h,"x","y",i,g);return{...b,x1:o,x:$,y1:j,y2:et,y:mid(j,et)}}function stackY1(i={},e={}){arguments.length===1&&([i,e]=mergeOptions$1(i));const{x1:o,x:d=o,y:h}=e,[g,b,$]=stack(d,h,"x","y",i,e);return{...g,x1:o,x:b,y:$}}function stackY2(i={},e={}){arguments.length===1&&([i,e]=mergeOptions$1(i));const{x1:o,x:d=o,y:h}=e,[g,b,,$]=stack(d,h,"x","y",i,e);return{...g,x1:o,x:b,y:$}}function maybeStackX({x:i,x1:e,x2:o,...d}={}){return d=withTip(d,"y"),e===void 0&&o===void 0?stackX({x:i,...d}):([e,o]=maybeZero(i,e,o),{...d,x1:e,x2:o})}function maybeStackY({y:i,y1:e,y2:o,...d}={}){return d=withTip(d,"x"),e===void 0&&o===void 0?stackY({y:i,...d}):([e,o]=maybeZero(i,e,o),{...d,y1:e,y2:o})}function mergeOptions$1(i){const{offset:e,order:o,reverse:d,...h}=i;return[{offset:e,order:o,reverse:d},h]}const lengthy={length:!0};function stack(i,e=one,o,d,{offset:h,order:g,reverse:b},$){if(e===null)throw new Error(`stack requires ${d}`);const j=maybeZ($),[et,tt]=maybeColumn(i),[nt,rt]=column(e),[ot,st]=column(e);return nt.hint=ot.hint=lengthy,h=maybeOffset(h),g=maybeOrder(g,h,d),[basic($,(bt,vt,at)=>{({data:bt,facets:vt}=exclusiveFacets(bt,vt));const ut=i==null?void 0:tt(maybeApplyInterval(valueof(bt,i),at==null?void 0:at[o])),$t=valueof(bt,e,Float64Array),wt=valueof(bt,j),At=g&&g(bt,ut,$t,wt),xt=bt.length,Rt=rt(new Float64Array(xt)),Ot=st(new Float64Array(xt)),kt=[];for(const Mt of vt){const Bt=ut?Array.from(group$1(Mt,jt=>ut[jt]).values()):[Mt];if(At)for(const jt of Bt)jt.sort(At);for(const jt of Bt){let zt=0,Nt=0;b&&jt.reverse();for(const Ct of jt){const Ft=$t[Ct];Ft<0?zt=Ot[Ct]=(Rt[Ct]=zt)+Ft:Ft>0?Nt=Ot[Ct]=(Rt[Ct]=Nt)+Ft:Ot[Ct]=Rt[Ct]=Nt}}kt.push(Bt)}return h&&h(kt,Rt,Ot,wt),{data:bt,facets:vt}}),et,nt,ot]}function maybeOffset(i){if(i!=null){if(typeof i=="function")return i;switch(`${i}`.toLowerCase()){case"expand":case"normalize":return offsetExpand;case"center":case"silhouette":return offsetCenter;case"wiggle":return offsetWiggle}throw new Error(`unknown offset: ${i}`)}}function extent$1(i,e){let o=0,d=0;for(const h of i){const g=e[h];g<o&&(o=g),g>d&&(d=g)}return[o,d]}function offsetExpand(i,e,o){for(const d of i)for(const h of d){const[g,b]=extent$1(h,o);for(const $ of h){const j=1/(b-g||1);e[$]=j*(e[$]-g),o[$]=j*(o[$]-g)}}}function offsetCenter(i,e,o){for(const d of i){for(const h of d){const[g,b]=extent$1(h,o);for(const $ of h){const j=(b+g)/2;e[$]-=j,o[$]-=j}}offsetZero(d,e,o)}offsetCenterFacets(i,e,o)}function offsetWiggle(i,e,o,d){for(const h of i){const g=new InternMap;let b=0;for(const $ of h){let j=-1;const et=$.map(ot=>Math.abs(o[ot]-e[ot])),tt=$.map(ot=>{j=d?d[ot]:++j;const st=o[ot]-e[ot],bt=g.has(j)?st-g.get(j):0;return g.set(j,st),bt}),nt=[0,...cumsum(tt)];for(const ot of $)e[ot]+=b,o[ot]+=b;const rt=sum$2(et);rt&&(b-=sum$2(et,(ot,st)=>(tt[st]/2+nt[st])*ot)/rt)}offsetZero(h,e,o)}offsetCenterFacets(i,e,o)}function offsetZero(i,e,o){const d=min$2(i,h=>min$2(h,g=>e[g]));for(const h of i)for(const g of h)e[g]-=d,o[g]-=d}function offsetCenterFacets(i,e,o){const d=i.length;if(d===1)return;const h=i.map($=>$.flat()),g=h.map($=>(min$2($,j=>e[j])+max$1($,j=>o[j]))/2),b=min$2(g);for(let $=0;$<d;$++){const j=b-g[$];for(const et of h[$])e[et]+=j,o[et]+=j}}function maybeOrder(i,e,o){if(i===void 0&&e===offsetWiggle)return orderInsideOut(ascendingDefined);if(i!=null){if(typeof i=="string"){const d=i.startsWith("-"),h=d?descendingDefined:ascendingDefined;switch((d?i.slice(1):i).toLowerCase()){case"value":case o:return orderY(h);case"z":return orderZ(h);case"sum":return orderSum(h);case"appearance":return orderAppearance(h);case"inside-out":return orderInsideOut(h)}return orderAccessor(field(i))}if(typeof i=="function")return(i.length===1?orderAccessor:orderComparator)(i);if(Array.isArray(i))return orderGiven(i);throw new Error(`invalid order: ${i}`)}}function orderY(i){return(e,o,d)=>(h,g)=>i(d[h],d[g])}function orderZ(i){return(e,o,d,h)=>(g,b)=>i(h[g],h[b])}function orderSum(i){return orderZDomain(i,(e,o,d,h)=>groupSort(range(e),g=>sum$2(g,b=>d[b]),g=>h[g]))}function orderAppearance(i){return orderZDomain(i,(e,o,d,h)=>groupSort(range(e),g=>o[greatest(g,b=>d[b])],g=>h[g]))}function orderInsideOut(i){return orderZDomain(i,(e,o,d,h)=>{const g=range(e),b=groupSort(g,nt=>o[greatest(nt,rt=>d[rt])],nt=>h[nt]),$=rollup(g,nt=>sum$2(nt,rt=>d[rt]),nt=>h[nt]),j=[],et=[];let tt=0;for(const nt of b)tt<0?(tt+=$.get(nt),j.push(nt)):(tt-=$.get(nt),et.push(nt));return et.reverse().concat(j)})}function orderAccessor(i){return e=>{const o=valueof(e,i);return(d,h)=>ascendingDefined(o[d],o[h])}}function orderComparator(i){return e=>(o,d)=>i(e[o],e[d])}function orderGiven(i){return orderZDomain(ascendingDefined,()=>i)}function orderZDomain(i,e){return(o,d,h,g)=>{if(!g)throw new Error("missing channel: z");const b=new InternMap(e(o,d,h,g).map(($,j)=>[$,j]));return($,j)=>i(b.get(g[$]),b.get(g[j]))}}const defaults$g={ariaLabel:"area",strokeWidth:1,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class Area extends Mark$1{constructor(e,o={}){const{x1:d,y1:h,x2:g,y2:b,z:$,curve:j,tension:et}=o;super(e,{x1:{value:d,scale:"x"},y1:{value:h,scale:"y"},x2:{value:g,scale:"x",optional:!0},y2:{value:b,scale:"y",optional:!0},z:{value:maybeZ(o),optional:!0}},o,defaults$g),this.z=$,this.curve=maybeCurve(j,et)}filter(e){return e}render(e,o,d,h,g){const{x1:b,y1:$,x2:j=b,y2:et=$}=d;return create("svg:g",g).call(applyIndirectStyles,this,h,g).call(applyTransform,this,o,0,0).call(tt=>tt.selectAll().data(groupIndex(e,[b,$,j,et],this,d)).enter().append("path").call(applyDirectStyles,this).call(applyGroupedChannelStyles,this,d).attr("d",shapeArea().curve(this.curve).defined(nt=>nt>=0).x0(nt=>b[nt]).y0(nt=>$[nt]).x1(nt=>j[nt]).y1(nt=>et[nt]))).node()}}function area$1(i,e){return e===void 0?areaY$1(i,{x:first,y:second}):new Area(i,e)}function areaX$1(i,e){const{y:o=indexOf,...d}=maybeDenseIntervalY(e);return new Area(i,maybeStackX(maybeIdentityX({...d,y1:o,y2:void 0})))}function areaY$1(i,e){const{x:o=indexOf,...d}=maybeDenseIntervalX(e);return new Area(i,maybeStackY(maybeIdentityY({...d,x1:o,x2:void 0})))}const defaults$f={ariaLabel:"link",fill:"none",stroke:"currentColor",strokeMiterlimit:1};class Link extends Mark$1{constructor(e,o={}){const{x1:d,y1:h,x2:g,y2:b,curve:$,tension:j}=o;super(e,{x1:{value:d,scale:"x"},y1:{value:h,scale:"y"},x2:{value:g,scale:"x",optional:!0},y2:{value:b,scale:"y",optional:!0}},o,defaults$f),this.curve=maybeCurveAuto($,j),markers(this,o)}project(e,o,d){this.curve!==curveAuto&&super.project(e,o,d)}render(e,o,d,h,g){const{x1:b,y1:$,x2:j=b,y2:et=$}=d,{curve:tt}=this;return create("svg:g",g).call(applyIndirectStyles,this,h,g).call(applyTransform,this,o).call(nt=>nt.selectAll().data(e).enter().append("path").call(applyDirectStyles,this).attr("d",tt===curveAuto&&g.projection?sphereLink(g.projection,b,$,j,et):rt=>{const ot=pathRound(),st=tt(ot);return st.lineStart(),st.point(b[rt],$[rt]),st.point(j[rt],et[rt]),st.lineEnd(),ot}).call(applyChannelStyles,this,d).call(applyMarkers,this,d,g)).node()}}function sphereLink(i,e,o,d,h){const g=geoPath(i);return e=coerceNumbers(e),o=coerceNumbers(o),d=coerceNumbers(d),h=coerceNumbers(h),b=>g({type:"LineString",coordinates:[[e[b],o[b]],[d[b],h[b]]]})}function link$1(i,{x:e,x1:o,x2:d,y:h,y1:g,y2:b,...$}={}){return[o,d]=maybeSameValue(e,o,d),[g,b]=maybeSameValue(h,g,b),new Link(i,{...$,x1:o,x2:d,y1:g,y2:b})}function maybeSameValue(i,e,o){if(i===void 0){if(e===void 0){if(o!==void 0)return[o]}else if(o===void 0)return[e]}else{if(e===void 0)return o===void 0?[i]:[i,o];if(o===void 0)return[i,e]}return[e,o]}const defaults$e={ariaLabel:"arrow",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeMiterlimit:1,strokeWidth:1.5};class Arrow extends Mark$1{constructor(e,o={}){const{x1:d,y1:h,x2:g,y2:b,bend:$=0,headAngle:j=60,headLength:et=8,inset:tt=0,insetStart:nt=tt,insetEnd:rt=tt,sweep:ot}=o;super(e,{x1:{value:d,scale:"x"},y1:{value:h,scale:"y"},x2:{value:g,scale:"x",optional:!0},y2:{value:b,scale:"y",optional:!0}},o,defaults$e),this.bend=$===!0?22.5:Math.max(-90,Math.min(90,$)),this.headAngle=+j,this.headLength=+et,this.insetStart=+nt,this.insetEnd=+rt,this.sweep=maybeSweep(ot)}render(e,o,d,h,g){const{x1:b,y1:$,x2:j=b,y2:et=$,SW:tt}=d,{strokeWidth:nt,bend:rt,headAngle:ot,headLength:st,insetStart:bt,insetEnd:vt}=this,at=tt?wt=>tt[wt]:constant(nt===void 0?1:nt),ut=ot*radians/2,$t=st/1.5;return create("svg:g",g).call(applyIndirectStyles,this,h,g).call(applyTransform,this,o).call(wt=>wt.selectAll().data(e).enter().append("path").call(applyDirectStyles,this).attr("d",At=>{let xt=b[At],Rt=$[At],Ot=j[At],kt=et[At];const Mt=Math.hypot(Ot-xt,kt-Rt);if(Mt<=bt+vt)return null;let Bt=Math.atan2(kt-Rt,Ot-xt);const jt=Math.min($t*at(At),Mt/3),zt=this.sweep(xt,Rt,Ot,kt)*rt*radians,Nt=Math.hypot(Mt/Math.tan(zt),Mt)/2;if(bt||vt)if(Nt<1e5){const Mn=Math.sign(zt),[Cn,On]=pointPointCenter([xt,Rt],[Ot,kt],Nt,Mn);if(bt&&([xt,Rt]=circleCircleIntersect([Cn,On,Nt],[xt,Rt,bt],-Mn*Math.sign(bt))),vt){const[vn,Nn]=circleCircleIntersect([Cn,On,Nt],[Ot,kt,vt],Mn*Math.sign(vt));Bt+=Math.atan2(Nn-On,vn-Cn)-Math.atan2(kt-On,Ot-Cn),Ot=vn,kt=Nn}}else{const Mn=Ot-xt,Cn=kt-Rt,On=Math.hypot(Mn,Cn);bt&&(xt+=Mn/On*bt,Rt+=Cn/On*bt),vt&&(Ot-=Mn/On*vt,kt-=Cn/On*vt)}const Ct=Bt+zt,Ft=Ct+ut,Vt=Ct-ut,Ut=Ot-jt*Math.cos(Ft),Ht=kt-jt*Math.sin(Ft),Pt=Ot-jt*Math.cos(Vt),Yt=kt-jt*Math.sin(Vt),Xt=Nt<1e5?`A${Nt},${Nt} 0,0,${zt>0?1:0} `:"L",wn=jt?`M${Ut},${Ht}L${Ot},${kt}L${Pt},${Yt}`:"";return`M${xt},${Rt}${Xt}${Ot},${kt}${wn}`}).call(applyChannelStyles,this,d)).node()}}function maybeSweep(i=1){if(typeof i=="number")return constant(Math.sign(i));if(typeof i=="function")return(e,o,d,h)=>Math.sign(i(e,o,d,h));switch(keyword(i,"sweep",["+x","-x","+y","-y"])){case"+x":return(e,o,d)=>ascending$2(e,d);case"-x":return(e,o,d)=>descending(e,d);case"+y":return(e,o,d,h)=>ascending$2(o,h);case"-y":return(e,o,d,h)=>descending(o,h)}}function pointPointCenter([i,e],[o,d],h,g){const b=o-i,$=d-e,j=Math.hypot(b,$),et=g*Math.sqrt(h*h-j*j/4)/j;return[(i+o)/2-$*et,(e+d)/2+b*et]}function circleCircleIntersect([i,e,o],[d,h,g],b){const $=d-i,j=h-e,et=Math.hypot($,j),tt=($*$+j*j-g*g+o*o)/(2*et),nt=b*Math.sqrt(o*o-tt*tt);return[i+($*tt+j*nt)/et,e+(j*tt-$*nt)/et]}function arrow$1(i,{x:e,x1:o,x2:d,y:h,y1:g,y2:b,...$}={}){return[o,d]=maybeSameValue(e,o,d),[g,b]=maybeSameValue(h,g,b),new Arrow(i,{...$,x1:o,x2:d,y1:g,y2:b})}class AbstractBar extends Mark$1{constructor(e,o,d={},h){super(e,o,d,h);const{inset:g=0,insetTop:b=g,insetRight:$=g,insetBottom:j=g,insetLeft:et=g,rx:tt,ry:nt}=d;this.insetTop=number$1(b),this.insetRight=number$1($),this.insetBottom=number$1(j),this.insetLeft=number$1(et),this.rx=impliedString(tt,"auto"),this.ry=impliedString(nt,"auto")}render(e,o,d,h,g){const{rx:b,ry:$}=this;return create("svg:g",g).call(applyIndirectStyles,this,h,g).call(this._transform,this,o).call(j=>j.selectAll().data(e).enter().append("rect").call(applyDirectStyles,this).attr("x",this._x(o,d,h)).attr("width",this._width(o,d,h)).attr("y",this._y(o,d,h)).attr("height",this._height(o,d,h)).call(applyAttr,"rx",b).call(applyAttr,"ry",$).call(applyChannelStyles,this,d)).node()}_x(e,{x:o},{marginLeft:d}){const{insetLeft:h}=this;return o?g=>o[g]+h:d+h}_y(e,{y:o},{marginTop:d}){const{insetTop:h}=this;return o?g=>o[g]+h:d+h}_width({x:e},{x:o},{marginRight:d,marginLeft:h,width:g}){const{insetLeft:b,insetRight:$}=this,j=o&&e?e.bandwidth():g-d-h;return Math.max(0,j-b-$)}_height({y:e},{y:o},{marginTop:d,marginBottom:h,height:g}){const{insetTop:b,insetBottom:$}=this,j=o&&e?e.bandwidth():g-d-h;return Math.max(0,j-b-$)}}const defaults$d={ariaLabel:"bar"};class BarX extends AbstractBar{constructor(e,o={}){const{x1:d,x2:h,y:g}=o;super(e,{x1:{value:d,scale:"x"},x2:{value:h,scale:"x"},y:{value:g,scale:"y",type:"band",optional:!0}},o,defaults$d)}_transform(e,o,{x:d}){e.call(applyTransform,o,{x:d},0,0)}_x({x:e},{x1:o,x2:d},{marginLeft:h}){const{insetLeft:g}=this;return isCollapsed(e)?h+g:b=>Math.min(o[b],d[b])+g}_width({x:e},{x1:o,x2:d},{marginRight:h,marginLeft:g,width:b}){const{insetLeft:$,insetRight:j}=this;return isCollapsed(e)?b-h-g-$-j:et=>Math.max(0,Math.abs(d[et]-o[et])-$-j)}}class BarY extends AbstractBar{constructor(e,o={}){const{x:d,y1:h,y2:g}=o;super(e,{y1:{value:h,scale:"y"},y2:{value:g,scale:"y"},x:{value:d,scale:"x",type:"band",optional:!0}},o,defaults$d)}_transform(e,o,{y:d}){e.call(applyTransform,o,{y:d},0,0)}_y({y:e},{y1:o,y2:d},{marginTop:h}){const{insetTop:g}=this;return isCollapsed(e)?h+g:b=>Math.min(o[b],d[b])+g}_height({y:e},{y1:o,y2:d},{marginTop:h,marginBottom:g,height:b}){const{insetTop:$,insetBottom:j}=this;return isCollapsed(e)?b-h-g-$-j:et=>Math.max(0,Math.abs(d[et]-o[et])-$-j)}}function barX$1(i,e={}){return hasXY(e)||(e={...e,y:indexOf,x2:identity$1}),new BarX(i,maybeStackX(maybeIntervalX(maybeIdentityX(e))))}function barY$1(i,e={}){return hasXY(e)||(e={...e,x:indexOf,y2:identity$1}),new BarY(i,maybeStackY(maybeIntervalY(maybeIdentityY(e))))}const defaults$c={ariaLabel:"cell"};class Cell extends AbstractBar{constructor(e,{x:o,y:d,...h}={}){super(e,{x:{value:o,scale:"x",type:"band",optional:!0},y:{value:d,scale:"y",type:"band",optional:!0}},h,defaults$c)}_transform(e,o){e.call(applyTransform,o,{},0,0)}}function cell$1(i,{x:e,y:o,...d}={}){return[e,o]=maybeTuple(e,o),new Cell(i,{...d,x:e,y:o})}function cellX$1(i,{x:e=indexOf,fill:o,stroke:d,...h}={}){return o===void 0&&maybeColorChannel(d)[0]===void 0&&(o=identity$1),new Cell(i,{...h,x:e,fill:o,stroke:d})}function cellY$1(i,{y:e=indexOf,fill:o,stroke:d,...h}={}){return o===void 0&&maybeColorChannel(d)[0]===void 0&&(o=identity$1),new Cell(i,{...h,y:e,fill:o,stroke:d})}const defaults$b={ariaLabel:"dot",fill:"none",stroke:"currentColor",strokeWidth:1.5};function withDefaultSort(i){return i.sort===void 0&&i.reverse===void 0?sort({channel:"-r"},i):i}class Dot extends Mark$1{constructor(e,o={}){const{x:d,y:h,r:g,rotate:b,symbol:$=symbolCircle,frameAnchor:j}=o,[et,tt]=maybeNumberChannel(b,0),[nt,rt]=maybeSymbolChannel($),[ot,st]=maybeNumberChannel(g,nt==null?3:4.5);super(e,{x:{value:d,scale:"x",optional:!0},y:{value:h,scale:"y",optional:!0},r:{value:ot,scale:"r",filter:positive,optional:!0},rotate:{value:et,optional:!0},symbol:{value:nt,scale:"auto",optional:!0}},withDefaultSort(o),defaults$b),this.r=st,this.rotate=tt,this.symbol=rt,this.frameAnchor=maybeFrameAnchor(j);const{channels:bt}=this,{symbol:vt}=bt;if(vt){const{fill:at,stroke:ut}=bt;vt.hint={fill:at?at.value===vt.value?"color":"currentColor":this.fill??"currentColor",stroke:ut?ut.value===vt.value?"color":"currentColor":this.stroke??"none"}}}render(e,o,d,h,g){const{x:b,y:$}=o,{x:j,y:et,r:tt,rotate:nt,symbol:rt}=d,{r:ot,rotate:st,symbol:bt}=this,[vt,at]=applyFrameAnchor(this,h),ut=bt===symbolCircle,$t=tt?void 0:ot*ot*Math.PI;return negative(ot)&&(e=[]),create("svg:g",g).call(applyIndirectStyles,this,h,g).call(applyTransform,this,{x:j&&b,y:et&&$}).call(wt=>wt.selectAll().data(e).enter().append(ut?"circle":"path").call(applyDirectStyles,this).call(ut?At=>{At.attr("cx",j?xt=>j[xt]:vt).attr("cy",et?xt=>et[xt]:at).attr("r",tt?xt=>tt[xt]:ot)}:At=>{At.attr("transform",template`translate(${j?xt=>j[xt]:vt},${et?xt=>et[xt]:at})${nt?xt=>` rotate(${nt[xt]})`:st?` rotate(${st})`:""}`).attr("d",tt&&rt?xt=>{const Rt=pathRound();return rt[xt].draw(Rt,tt[xt]*tt[xt]*Math.PI),Rt}:tt?xt=>{const Rt=pathRound();return bt.draw(Rt,tt[xt]*tt[xt]*Math.PI),Rt}:rt?xt=>{const Rt=pathRound();return rt[xt].draw(Rt,$t),Rt}:(()=>{const xt=pathRound();return bt.draw(xt,$t),xt})())}).call(applyChannelStyles,this,d)).node()}}function dot$1(i,{x:e,y:o,...d}={}){return d.frameAnchor===void 0&&([e,o]=maybeTuple(e,o)),new Dot(i,{...d,x:e,y:o})}function dotX$1(i,{x:e=identity$1,...o}={}){return new Dot(i,maybeIntervalMidY({...o,x:e}))}function dotY$1(i,{y:e=identity$1,...o}={}){return new Dot(i,maybeIntervalMidX({...o,y:e}))}function circle$1(i,e){return dot$1(i,{...e,symbol:"circle"})}function hexagon$1(i,e){return dot$1(i,{...e,symbol:"hexagon"})}const defaults$a={ariaLabel:"line",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class Line extends Mark$1{constructor(e,o={}){const{x:d,y:h,z:g,curve:b,tension:$}=o;super(e,{x:{value:d,scale:"x"},y:{value:h,scale:"y"},z:{value:maybeZ(o),optional:!0}},o,defaults$a),this.z=g,this.curve=maybeCurveAuto(b,$),markers(this,o)}filter(e){return e}project(e,o,d){this.curve!==curveAuto&&super.project(e,o,d)}render(e,o,d,h,g){const{x:b,y:$}=d,{curve:j}=this;return create("svg:g",g).call(applyIndirectStyles,this,h,g).call(applyTransform,this,o).call(et=>et.selectAll().data(groupIndex(e,[b,$],this,d)).enter().append("path").call(applyDirectStyles,this).call(applyGroupedChannelStyles,this,d).call(applyGroupedMarkers,this,d,g).attr("d",j===curveAuto&&g.projection?sphereLine(g.projection,b,$):shapeLine().curve(j).defined(tt=>tt>=0).x(tt=>b[tt]).y(tt=>$[tt]))).node()}}function sphereLine(i,e,o){const d=geoPath(i);return e=coerceNumbers(e),o=coerceNumbers(o),h=>{let g=[];const b=[g];for(const $ of h)$===-1?(g=[],b.push(g)):g.push([e[$],o[$]]);return d({type:"MultiLineString",coordinates:b})}}function line$1(i,{x:e,y:o,...d}={}){return[e,o]=maybeTuple(e,o),new Line(i,{...d,x:e,y:o})}function lineX$1(i,{x:e=identity$1,y:o=indexOf,...d}={}){return new Line(i,maybeDenseIntervalY({...d,x:e,y:o}))}function lineY$1(i,{x:e=indexOf,y:o=identity$1,...d}={}){return new Line(i,maybeDenseIntervalX({...d,x:e,y:o}))}const defaults$9={ariaLabel:"rect"};class Rect extends Mark$1{constructor(e,o={}){const{x1:d,y1:h,x2:g,y2:b,inset:$=0,insetTop:j=$,insetRight:et=$,insetBottom:tt=$,insetLeft:nt=$,rx:rt,ry:ot}=o;super(e,{x1:{value:d,scale:"x",optional:!0},y1:{value:h,scale:"y",optional:!0},x2:{value:g,scale:"x",optional:!0},y2:{value:b,scale:"y",optional:!0}},o,defaults$9),this.insetTop=number$1(j),this.insetRight=number$1(et),this.insetBottom=number$1(tt),this.insetLeft=number$1(nt),this.rx=impliedString(rt,"auto"),this.ry=impliedString(ot,"auto")}render(e,o,d,h,g){const{x:b,y:$}=o,{x1:j,y1:et,x2:tt,y2:nt}=d,{marginTop:rt,marginRight:ot,marginBottom:st,marginLeft:bt,width:vt,height:at}=h,{projection:ut}=g,{insetTop:$t,insetRight:wt,insetBottom:At,insetLeft:xt,rx:Rt,ry:Ot}=this;return create("svg:g",g).call(applyIndirectStyles,this,h,g).call(applyTransform,this,{x:j&&tt&&b,y:et&&nt&&$},0,0).call(kt=>kt.selectAll().data(e).enter().append("rect").call(applyDirectStyles,this).attr("x",j&&tt&&(ut||!isCollapsed(b))?Mt=>Math.min(j[Mt],tt[Mt])+xt:bt+xt).attr("y",et&&nt&&(ut||!isCollapsed($))?Mt=>Math.min(et[Mt],nt[Mt])+$t:rt+$t).attr("width",j&&tt&&(ut||!isCollapsed(b))?Mt=>Math.max(0,Math.abs(tt[Mt]-j[Mt])-xt-wt):vt-ot-bt-wt-xt).attr("height",et&&nt&&(ut||!isCollapsed($))?Mt=>Math.max(0,Math.abs(et[Mt]-nt[Mt])-$t-At):at-rt-st-$t-At).call(applyAttr,"rx",Rt).call(applyAttr,"ry",Ot).call(applyChannelStyles,this,d)).node()}}function rect$1(i,e){return new Rect(i,maybeTrivialIntervalX(maybeTrivialIntervalY(e)))}function rectX$1(i,e={}){return hasXY(e)||(e={...e,y:indexOf,x2:identity$1,interval:1}),new Rect(i,maybeStackX(maybeTrivialIntervalY(maybeIdentityX(e))))}function rectY$1(i,e={}){return hasXY(e)||(e={...e,x:indexOf,y2:identity$1,interval:1}),new Rect(i,maybeStackY(maybeTrivialIntervalX(maybeIdentityY(e))))}function autoSpec(i,e){e=normalizeOptions(e);const{x:o,y:d,color:h,size:g}=e,b=materializeValue(i,o),$=materializeValue(i,d),j=materializeValue(i,h),et=materializeValue(i,g);let{fx:tt,fy:nt,x:{value:rt,reduce:ot,zero:st,...bt},y:{value:vt,reduce:at,zero:ut,...$t},color:{value:wt,color:At,reduce:xt},size:{value:Rt,reduce:Ot},mark:kt}=e;if(ot===void 0&&(ot=at==null&&rt==null&&Rt==null&&vt!=null?"count":null),at===void 0&&(at=ot==null&&vt==null&&Rt==null&&rt!=null?"count":null),Ot===void 0&&Rt==null&&xt==null&&ot==null&&at==null&&(rt==null||isOrdinal(b))&&(vt==null||isOrdinal($))&&(Ot="count"),st===void 0&&(st=isZeroReducer(ot)?!0:void 0),ut===void 0&&(ut=isZeroReducer(at)?!0:void 0),rt==null&&vt==null)throw new Error("must specify x or y");if(ot!=null&&vt==null)throw new Error("reducing x requires y");if(at!=null&&rt==null)throw new Error("reducing y requires x");kt===void 0&&(kt=Rt!=null||Ot!=null?"dot":isZeroReducer(ot)||isZeroReducer(at)||xt!=null?"bar":rt!=null&&vt!=null?isOrdinal(b)||isOrdinal($)||ot==null&&at==null&&!isMonotonic(b)&&!isMonotonic($)?"dot":"line":rt!=null||vt!=null?"rule":null);let Mt,Bt,jt;switch(kt){case"dot":jt=dot$1,Bt="stroke";break;case"line":jt=b&&$||ot!=null||at!=null?ut||at!=null||b&&isMonotonic(b)?lineY$1:st||ot!=null||$&&isMonotonic($)?lineX$1:line$1:b?lineX$1:lineY$1,Bt="stroke",isHighCardinality(j)&&(Mt=null);break;case"area":jt=!(ut||at!=null)&&(st||ot!=null||$&&isMonotonic($))?areaX$1:areaY$1,Bt="fill",isHighCardinality(j)&&(Mt=null);break;case"rule":jt=b?ruleX$1:ruleY$1,Bt="stroke";break;case"bar":jt=ot!=null?isOrdinal($)?isSelectReducer(ot)&&b&&isOrdinal(b)?cell$1:barX$1:rectX$1:at!=null?isOrdinal(b)?isSelectReducer(at)&&$&&isOrdinal($)?cell$1:barY$1:rectY$1:xt!=null||Ot!=null?b&&isOrdinal(b)&&$&&isOrdinal($)?cell$1:b&&isOrdinal(b)?barY$1:$&&isOrdinal($)?barX$1:rect$1:b&&isNumeric(b)&&!($&&isNumeric($))?barX$1:$&&isNumeric($)&&!(b&&isNumeric(b))?barY$1:cell$1,Bt="fill";break;default:throw new Error(`invalid mark: ${kt}`)}let zt={fx:tt,fy:nt,x:b??void 0,y:$??void 0,[Bt]:j??At,z:Mt,r:et??void 0,tip:!0},Nt,Ct={[Bt]:xt??void 0,r:Ot??void 0};if(ot!=null&&at!=null)throw new Error("cannot reduce both x and y");return at!=null?(Ct.y=at,Nt=isOrdinal(b)?groupX:binX):ot!=null?(Ct.x=ot,Nt=isOrdinal($)?groupY:binY):(xt!=null||Ot!=null)&&(b&&$?Nt=isOrdinal(b)&&isOrdinal($)?group:isOrdinal(b)?binY:isOrdinal($)?binX:bin:b?Nt=isOrdinal(b)?groupX:binX:$&&(Nt=isOrdinal($)?groupY:binY)),(Nt===bin||Nt===binX)&&(zt.x={value:b,...bt}),(Nt===bin||Nt===binY)&&(zt.y={value:$,...$t}),st===void 0&&(st=b&&!(Nt===bin||Nt===binX)&&(jt===barX$1||jt===areaX$1||jt===rectX$1||jt===ruleY$1)),ut===void 0&&(ut=$&&!(Nt===bin||Nt===binY)&&(jt===barY$1||jt===areaY$1||jt===rectY$1||jt===ruleX$1)),{fx:tt??null,fy:nt??null,x:{value:rt??null,reduce:ot??null,zero:!!st,...bt},y:{value:vt??null,reduce:at??null,zero:!!ut,...$t},color:{value:wt??null,reduce:xt??null,...At!==void 0&&{color:At}},size:{value:Rt??null,reduce:Ot??null},mark:kt,markImpl:implNames[jt],markOptions:zt,transformImpl:implNames[Nt],transformOptions:Ct,colorMode:Bt}}function auto(i,e){const o=autoSpec(i,e),{fx:d,fy:h,x:{zero:g},y:{zero:b},markOptions:$,transformOptions:j,colorMode:et}=o,tt=impls[o.markImpl],nt=impls[o.transformImpl],rt=d!=null||h!=null?frame$1({strokeOpacity:.1}):null,ot=[g?ruleX$1([0]):null,b?ruleY$1([0]):null],st=tt(i,nt?nt(j,$):$);return et==="stroke"?marks$1(rt,ot,st):marks$1(rt,st,ot)}function isMonotonic(i){let e,o;for(const d of i){if(d==null)continue;if(e===void 0){e=d;continue}const h=Math.sign(ascending$2(e,d));if(h){if(o!==void 0&&h!==o)return!1;e=d,o=h}}return!0}function normalizeOptions({x:i,y:e,color:o,size:d,fx:h,fy:g,mark:b}={}){return isOptions(i)||(i=makeOptions(i)),isOptions(e)||(e=makeOptions(e)),isOptions(o)||(o=isColor$1(o)?{color:o}:makeOptions(o)),isOptions(d)||(d=makeOptions(d)),isOptions(h)&&({value:h}=makeOptions(h)),isOptions(g)&&({value:g}=makeOptions(g)),b!=null&&(b=`${b}`.toLowerCase()),{x:i,y:e,color:o,size:d,fx:h,fy:g,mark:b}}function materializeValue(i,e){const o=valueof(i,e.value);return o&&(o.label=labelof(e.value)),o}function makeOptions(i){return isReducer(i)?{reduce:i}:{value:i}}function isZeroReducer(i){return/^(?:distinct|count|sum|proportion)$/i.test(i)}function isSelectReducer(i){return/^(?:first|last|mode)$/i.test(i)}function isReducer(i){if(i==null)return!1;if(typeof i.reduceIndex=="function"||typeof i.reduce=="function"&&isObject$1(i)||/^p\d{2}$/i.test(i))return!0;switch(`${i}`.toLowerCase()){case"first":case"last":case"count":case"distinct":case"sum":case"proportion":case"proportion-facet":case"deviation":case"min":case"min-index":case"max":case"max-index":case"mean":case"median":case"variance":case"mode":return!0}return!1}function isHighCardinality(i){return i?new InternSet(i).size>i.length>>1:!1}const impls={dot:dot$1,line:line$1,lineX:lineX$1,lineY:lineY$1,areaX:areaX$1,areaY:areaY$1,ruleX:ruleX$1,ruleY:ruleY$1,barX:barX$1,barY:barY$1,rect:rect$1,rectX:rectX$1,rectY:rectY$1,cell:cell$1,bin,binX,binY,group,groupX,groupY},implNames=Object.fromEntries(Object.entries(impls).map(([i,e])=>[e,i]));function mapX(i,e={}){let{x:o,x1:d,x2:h}=e;o===void 0&&d===void 0&&h===void 0&&(e={...e,x:o=identity$1});const g={};return o!=null&&(g.x=i),d!=null&&(g.x1=i),h!=null&&(g.x2=i),map(g,e)}function mapY(i,e={}){let{y:o,y1:d,y2:h}=e;o===void 0&&d===void 0&&h===void 0&&(e={...e,y:o=identity$1});const g={};return o!=null&&(g.y=i),d!=null&&(g.y1=i),h!=null&&(g.y2=i),map(g,e)}function map(i={},e={}){const o=maybeZ(e),d=Object.entries(i).map(([h,g])=>{const b=maybeInput(h,e);if(b==null)throw new Error(`missing channel: ${h}`);const[$,j]=column(b);return{key:h,input:b,output:$,setOutput:j,map:maybeMap(g)}});return{...basic(e,(h,g)=>{const b=valueof(h,o),$=d.map(({input:et})=>valueof(h,et)),j=d.map(({setOutput:et})=>et(new Array(h.length)));for(const et of g)for(const tt of b?group$1(et,nt=>b[nt]).values():[et])d.forEach(({map:nt},rt)=>nt.mapIndex(tt,$[rt],j[rt]));return{data:h,facets:g}}),...Object.fromEntries(d.map(({key:h,output:g})=>[h,g]))}}function maybeMap(i){if(i==null)throw new Error("missing map");if(typeof i.mapIndex=="function")return i;if(typeof i.map=="function"&&isObject$1(i))return mapMap(i);if(typeof i=="function")return mapFunction(taker(i));switch(`${i}`.toLowerCase()){case"cumsum":return mapCumsum;case"rank":return mapFunction((e,o)=>rank(e,d=>o[d]));case"quantile":return mapFunction((e,o)=>rankQuantile(e,d=>o[d]))}throw new Error(`invalid map: ${i}`)}function mapMap(i){return console.warn("deprecated map interface; implement mapIndex instead."),{mapIndex:i.map.bind(i)}}function rankQuantile(i,e){const o=count$1(i,e)-1;return rank(i,e).map(d=>d/o)}function mapFunction(i){return{mapIndex(e,o,d){const h=i(e,o);if(h.length!==e.length)throw new Error("map function returned a mismatched length");for(let g=0,b=e.length;g<b;++g)d[e[g]]=h[g]}}}const mapCumsum={mapIndex(i,e,o){let d=0;for(const h of i)o[h]=d+=e[h]}};function windowX(i={},e){return arguments.length===1&&(e=i),mapX(window$1(i),e)}function windowY(i={},e){return arguments.length===1&&(e=i),mapY(window$1(i),e)}function window$1(i={}){typeof i=="number"&&(i={k:i});let{k:e,reduce:o,shift:d,anchor:h,strict:g}=i;if(h===void 0&&d!==void 0&&(h=maybeShift(d),warn(`Warning: the shift option is deprecated; please use anchor "${h}" instead.`)),!((e=Math.floor(e))>0))throw new Error(`invalid k: ${e}`);return maybeReduce(o)(e,maybeAnchor$1(h,e),g)}function maybeAnchor$1(i="middle",e){switch(`${i}`.toLowerCase()){case"middle":return e-1>>1;case"start":return 0;case"end":return e-1}throw new Error(`invalid anchor: ${i}`)}function maybeShift(i){switch(`${i}`.toLowerCase()){case"centered":return"middle";case"leading":return"start";case"trailing":return"end"}throw new Error(`invalid shift: ${i}`)}function maybeReduce(i="mean"){if(typeof i=="string"){if(/^p\d{2}$/i.test(i))return reduceAccessor(percentile(i));switch(i.toLowerCase()){case"deviation":return reduceAccessor(deviation);case"max":return reduceArray((e,o)=>max$1(e,d=>o[d]));case"mean":return reduceMean;case"median":return reduceAccessor(median);case"min":return reduceArray((e,o)=>min$2(e,d=>o[d]));case"mode":return reduceArray((e,o)=>mode(e,d=>o[d]));case"sum":return reduceSum;case"variance":return reduceAccessor(variance);case"difference":return reduceDifference;case"ratio":return reduceRatio;case"first":return reduceFirst;case"last":return reduceLast}}if(typeof i!="function")throw new Error(`invalid reduce: ${i}`);return reduceArray(taker(i))}function reduceAccessor(i){return(e,o,d)=>d?{mapIndex(h,g,b){const $=et=>g[et]==null?NaN:+g[et];let j=0;for(let et=0;et<e-1;++et)isNaN($(et))&&++j;for(let et=0,tt=h.length-e+1;et<tt;++et)isNaN($(et+e-1))&&++j,b[h[et+o]]=j===0?i(subarray(h,et,et+e),$):NaN,isNaN($(et))&&--j}}:{mapIndex(h,g,b){const $=j=>g[j]==null?NaN:+g[j];for(let j=-o;j<0;++j)b[h[j+o]]=i(subarray(h,0,j+e),$);for(let j=0,et=h.length-o;j<et;++j)b[h[j+o]]=i(subarray(h,j,j+e),$)}}}function reduceArray(i){return(e,o,d)=>d?{mapIndex(h,g,b){let $=0;for(let j=0;j<e-1;++j)$+=defined(g[h[j]]);for(let j=0,et=h.length-e+1;j<et;++j)$+=defined(g[h[j+e-1]]),$===e&&(b[h[j+o]]=i(subarray(h,j,j+e),g)),$-=defined(g[h[j]])}}:{mapIndex(h,g,b){for(let $=-o;$<0;++$)b[h[$+o]]=i(subarray(h,0,$+e),g);for(let $=0,j=h.length-o;$<j;++$)b[h[$+o]]=i(subarray(h,$,$+e),g)}}}function reduceSum(i,e,o){return o?{mapIndex(d,h,g){let b=0,$=0;for(let j=0;j<i-1;++j){const et=h[d[j]];et===null||isNaN(et)?++b:$+=+et}for(let j=0,et=d.length-i+1;j<et;++j){const tt=h[d[j]],nt=h[d[j+i-1]];nt===null||isNaN(nt)?++b:$+=+nt,g[d[j+e]]=b===0?$:NaN,tt===null||isNaN(tt)?--b:$-=+tt}}}:{mapIndex(d,h,g){let b=0;const $=d.length;for(let j=0,et=Math.min($,i-e-1);j<et;++j)b+=+h[d[j]]||0;for(let j=-e,et=$-e;j<et;++j)b+=+h[d[j+i-1]]||0,g[d[j+e]]=b,b-=+h[d[j]]||0}}}function reduceMean(i,e,o){if(o){const d=reduceSum(i,e,o);return{mapIndex(h,g,b){d.mapIndex(h,g,b);for(let $=0,j=h.length-i+1;$<j;++$)b[h[$+e]]/=i}}}else return{mapIndex(d,h,g){let b=0,$=0;const j=d.length;for(let et=0,tt=Math.min(j,i-e-1);et<tt;++et){let nt=h[d[et]];nt!==null&&!isNaN(nt=+nt)&&(b+=nt,++$)}for(let et=-e,tt=j-e;et<tt;++et){let nt=h[d[et+i-1]],rt=h[d[et]];nt!==null&&!isNaN(nt=+nt)&&(b+=nt,++$),g[d[et+e]]=b/$,rt!==null&&!isNaN(rt=+rt)&&(b-=rt,--$)}}}}function firstDefined(i,e,o,d){for(let h=o+d;o<h;++o){const g=i[e[o]];if(defined(g))return g}}function lastDefined(i,e,o,d){for(let h=o+d-1;h>=o;--h){const g=i[e[h]];if(defined(g))return g}}function firstNumber(i,e,o,d){for(let h=o+d;o<h;++o){let g=i[e[o]];if(g!==null&&!isNaN(g=+g))return g}}function lastNumber(i,e,o,d){for(let h=o+d-1;h>=o;--h){let g=i[e[h]];if(g!==null&&!isNaN(g=+g))return g}}function reduceDifference(i,e,o){return o?{mapIndex(d,h,g){for(let b=0,$=d.length-i;b<$;++b){const j=h[d[b]],et=h[d[b+i-1]];g[d[b+e]]=j===null||et===null?NaN:et-j}}}:{mapIndex(d,h,g){for(let b=-e,$=d.length-i+e+1;b<$;++b)g[d[b+e]]=lastNumber(h,d,b,i)-firstNumber(h,d,b,i)}}}function reduceRatio(i,e,o){return o?{mapIndex(d,h,g){for(let b=0,$=d.length-i;b<$;++b){const j=h[d[b]],et=h[d[b+i-1]];g[d[b+e]]=j===null||et===null?NaN:et/j}}}:{mapIndex(d,h,g){for(let b=-e,$=d.length-i+e+1;b<$;++b)g[d[b+e]]=lastNumber(h,d,b,i)/firstNumber(h,d,b,i)}}}function reduceFirst(i,e,o){return o?{mapIndex(d,h,g){for(let b=0,$=d.length-i;b<$;++b)g[d[b+e]]=h[d[b]]}}:{mapIndex(d,h,g){for(let b=-e,$=d.length-i+e+1;b<$;++b)g[d[b+e]]=firstDefined(h,d,b,i)}}}function reduceLast(i,e,o){return o?{mapIndex(d,h,g){for(let b=0,$=d.length-i;b<$;++b)g[d[b+e]]=h[d[b+i-1]]}}:{mapIndex(d,h,g){for(let b=-e,$=d.length-i+e+1;b<$;++b)g[d[b+e]]=lastDefined(h,d,b,i)}}}const defaults$8={n:20,k:2,color:"currentColor",opacity:.2,strict:!0,anchor:"end"};function bollingerX(i,{x:e=identity$1,y:o,k:d=defaults$8.k,color:h=defaults$8.color,opacity:g=defaults$8.opacity,fill:b=h,fillOpacity:$=g,stroke:j=h,strokeOpacity:et,strokeWidth:tt,...nt}={}){return marks$1(isNoneish(b)?null:areaX$1(i,map({x1:bollinger({k:-d,...nt}),x2:bollinger({k:d,...nt})},{x1:e,x2:e,y:o,fill:b,fillOpacity:$,...nt})),isNoneish(j)?null:lineX$1(i,map({x:bollinger(nt)},{x:e,y:o,stroke:j,strokeOpacity:et,strokeWidth:tt,...nt})))}function bollingerY(i,{x:e,y:o=identity$1,k:d=defaults$8.k,color:h=defaults$8.color,opacity:g=defaults$8.opacity,fill:b=h,fillOpacity:$=g,stroke:j=h,strokeOpacity:et,strokeWidth:tt,...nt}={}){return marks$1(isNoneish(b)?null:areaY$1(i,map({y1:bollinger({k:-d,...nt}),y2:bollinger({k:d,...nt})},{x:e,y1:o,y2:o,fill:b,fillOpacity:$,...nt})),isNoneish(j)?null:lineY$1(i,map({y:bollinger(nt)},{x:e,y:o,stroke:j,strokeOpacity:et,strokeWidth:tt,...nt})))}function bollinger({n:i=defaults$8.n,k:e=0,strict:o=defaults$8.strict,anchor:d=defaults$8.anchor}={}){return window$1({k:i,reduce:h=>mean(h)+e*(deviation(h)||0),strict:o,anchor:d})}const defaults$7={ariaLabel:"tick",fill:null,stroke:"currentColor"};class AbstractTick extends Mark$1{constructor(e,o,d){super(e,o,d,defaults$7),markers(this,d)}render(e,o,d,h,g){return create("svg:g",g).call(applyIndirectStyles,this,h,g).call(this._transform,this,o).call(b=>b.selectAll().data(e).enter().append("line").call(applyDirectStyles,this).attr("x1",this._x1(o,d,h)).attr("x2",this._x2(o,d,h)).attr("y1",this._y1(o,d,h)).attr("y2",this._y2(o,d,h)).call(applyChannelStyles,this,d).call(applyMarkers,this,d,g)).node()}}class TickX extends AbstractTick{constructor(e,o={}){const{x:d,y:h,inset:g=0,insetTop:b=g,insetBottom:$=g}=o;super(e,{x:{value:d,scale:"x"},y:{value:h,scale:"y",type:"band",optional:!0}},o),this.insetTop=number$1(b),this.insetBottom=number$1($)}_transform(e,o,{x:d}){e.call(applyTransform,o,{x:d},offset,0)}_x1(e,{x:o}){return d=>o[d]}_x2(e,{x:o}){return d=>o[d]}_y1({y:e},{y:o},{marginTop:d}){const{insetTop:h}=this;return o&&e?g=>o[g]+h:d+h}_y2({y:e},{y:o},{height:d,marginBottom:h}){const{insetBottom:g}=this;return o&&e?b=>o[b]+e.bandwidth()-g:d-h-g}}class TickY extends AbstractTick{constructor(e,o={}){const{x:d,y:h,inset:g=0,insetRight:b=g,insetLeft:$=g}=o;super(e,{y:{value:h,scale:"y"},x:{value:d,scale:"x",type:"band",optional:!0}},o),this.insetRight=number$1(b),this.insetLeft=number$1($)}_transform(e,o,{y:d}){e.call(applyTransform,o,{y:d},0,offset)}_x1({x:e},{x:o},{marginLeft:d}){const{insetLeft:h}=this;return o&&e?g=>o[g]+h:d+h}_x2({x:e},{x:o},{width:d,marginRight:h}){const{insetRight:g}=this;return o&&e?b=>o[b]+e.bandwidth()-g:d-h-g}_y1(e,{y:o}){return d=>o[d]}_y2(e,{y:o}){return d=>o[d]}}function tickX$1(i,{x:e=identity$1,...o}={}){return new TickX(i,{...o,x:e})}function tickY$1(i,{y:e=identity$1,...o}={}){return new TickY(i,{...o,y:e})}function boxX(i,{x:e=identity$1,y:o=null,fill:d="#ccc",fillOpacity:h,stroke:g="currentColor",strokeOpacity:b,strokeWidth:$=2,sort:j,...et}={}){const tt=o!=null?groupY:groupZ$1;return marks$1(ruleY$1(i,tt({x1:loqr1,x2:hiqr2},{x:e,y:o,stroke:g,strokeOpacity:b,...et})),barX$1(i,tt({x1:"p25",x2:"p75"},{x:e,y:o,fill:d,fillOpacity:h,...et})),tickX$1(i,tt({x:"p50"},{x:e,y:o,stroke:g,strokeOpacity:b,strokeWidth:$,sort:j,...et})),dot$1(i,map({x:oqr},{x:e,y:o,z:o,stroke:g,strokeOpacity:b,...et})))}function boxY(i,{y:e=identity$1,x:o=null,fill:d="#ccc",fillOpacity:h,stroke:g="currentColor",strokeOpacity:b,strokeWidth:$=2,sort:j,...et}={}){const tt=o!=null?groupX:groupZ$1;return marks$1(ruleX$1(i,tt({y1:loqr1,y2:hiqr2},{x:o,y:e,stroke:g,strokeOpacity:b,...et})),barY$1(i,tt({y1:"p25",y2:"p75"},{x:o,y:e,fill:d,fillOpacity:h,...et})),tickY$1(i,tt({y:"p50"},{x:o,y:e,stroke:g,strokeOpacity:b,strokeWidth:$,sort:j,...et})),dot$1(i,map({y:oqr},{x:o,y:e,z:o,stroke:g,strokeOpacity:b,...et})))}function oqr(i){const e=loqr1(i),o=hiqr2(i);return i.map(d=>d<e||d>o?d:NaN)}function loqr1(i){const e=quartile1(i)*2.5-quartile3(i)*1.5;return min$2(i,o=>o>=e?o:NaN)}function hiqr2(i){const e=quartile3(i)*2.5-quartile1(i)*1.5;return max$1(i,o=>o<=e?o:NaN)}function quartile1(i){return quantile$1(i,.25)}function quartile3(i){return quantile$1(i,.75)}const defaults$6={ariaLabel:"raster",stroke:null,pixelSize:1};function number(i,e){const o=+i;if(isNaN(o))throw new Error(`invalid ${e}: ${i}`);return o}function integer(i,e){const o=Math.floor(i);if(isNaN(o))throw new Error(`invalid ${e}: ${i}`);return o}class AbstractRaster extends Mark$1{constructor(e,o,d={},h){let{width:g,height:b,x:$,y:j,x1:et=$==null?0:void 0,y1:tt=j==null?0:void 0,x2:nt=$==null?g:void 0,y2:rt=j==null?b:void 0,pixelSize:ot=h.pixelSize,blur:st=0,interpolate:bt}=d;if(g!=null&&(g=integer(g,"width")),b!=null&&(b=integer(b,"height")),et!=null&&(et=number(et,"x1")),tt!=null&&(tt=number(tt,"y1")),nt!=null&&(nt=number(nt,"x2")),rt!=null&&(rt=number(rt,"y2")),$==null&&(et==null||nt==null))throw new Error("missing x");if(j==null&&(tt==null||rt==null))throw new Error("missing y");e!=null&&g!=null&&b!=null&&($===void 0&&et!=null&&nt!=null&&($=denseX(et,nt,g)),j===void 0&&tt!=null&&rt!=null&&(j=denseY(tt,rt,g,b))),super(e,{x:{value:$,scale:"x",optional:!0},y:{value:j,scale:"y",optional:!0},x1:{value:et==null?null:[et],scale:"x",optional:!0,filter:null},y1:{value:tt==null?null:[tt],scale:"y",optional:!0,filter:null},x2:{value:nt==null?null:[nt],scale:"x",optional:!0,filter:null},y2:{value:rt==null?null:[rt],scale:"y",optional:!0,filter:null},...o},d,h),this.width=g,this.height=b,this.pixelSize=number(ot,"pixelSize"),this.blur=number(st,"blur"),this.interpolate=$==null||j==null?null:maybeInterpolate(bt)}}class Raster extends AbstractRaster{constructor(e,o={}){const{imageRendering:d}=o;if(e==null){const{fill:h,fillOpacity:g}=o;maybeNumberChannel(g)[0]!==void 0&&(o=sampler("fillOpacity",o)),maybeColorChannel(h)[0]!==void 0&&(o=sampler("fill",o))}super(e,void 0,o,defaults$6),this.imageRendering=impliedString(d,"auto")}scale(e,{color:o,...d},h){return super.scale(e,d,h)}render(e,o,d,h,g){var Ct;const b=o[(Ct=d.channels.fill)==null?void 0:Ct.scale]??(Ft=>Ft),{x:$,y:j}=d,{document:et}=g,[tt,nt,rt,ot]=renderBounds(d,h,g),st=rt-tt,bt=ot-nt,{pixelSize:vt,width:at=Math.round(Math.abs(st)/vt),height:ut=Math.round(Math.abs(bt)/vt)}=this,$t=at*ut;let{fill:wt,fillOpacity:At}=d,xt=0;if(this.interpolate){const Ft=at/st,Vt=ut/bt,Ut=map$1($,Pt=>(Pt-tt)*Ft,Float64Array),Ht=map$1(j,Pt=>(Pt-nt)*Vt,Float64Array);wt&&(wt=this.interpolate(e,at,ut,Ut,Ht,wt)),At&&(At=this.interpolate(e,at,ut,Ut,Ht,At))}else this.data==null&&e&&(xt=e.fi*$t);const Rt=et.createElement("canvas");Rt.width=at,Rt.height=ut;const Ot=Rt.getContext("2d"),kt=Ot.createImageData(at,ut),Mt=kt.data;let{r:Bt,g:jt,b:zt}=rgb(this.fill)??{r:0,g:0,b:0},Nt=(this.fillOpacity??1)*255;for(let Ft=0;Ft<$t;++Ft){const Vt=Ft<<2;if(wt){const Ut=b(wt[Ft+xt]);if(Ut==null){Mt[Vt+3]=0;continue}({r:Bt,g:jt,b:zt}=rgb(Ut))}At&&(Nt=At[Ft+xt]*255),Mt[Vt+0]=Bt,Mt[Vt+1]=jt,Mt[Vt+2]=zt,Mt[Vt+3]=Nt}return this.blur>0&&blurImage(kt,this.blur),Ot.putImageData(kt,0,0),create("svg:g",g).call(applyIndirectStyles,this,h,g).call(applyTransform,this,o).call(Ft=>Ft.append("image").attr("transform",`translate(${tt},${nt}) scale(${Math.sign(rt-tt)},${Math.sign(ot-nt)})`).attr("width",Math.abs(st)).attr("height",Math.abs(bt)).attr("preserveAspectRatio","none").call(applyAttr,"image-rendering",this.imageRendering).call(applyDirectStyles,this).attr("xlink:href",Rt.toDataURL())).node()}}function maybeTuples(i,e,o){arguments.length<3&&(o=e,e=null);let{x:d,y:h,[i]:g,...b}=o;return d===void 0&&h===void 0&&isTuples(e)&&(d=first,h=second,g===void 0&&(g=third)),[e,{...b,x:d,y:h,[i]:g}]}function raster$2(){const[i,e]=maybeTuples("fill",...arguments);return new Raster(i,i==null||e.fill!==void 0||e.fillOpacity!==void 0?e:{...e,fill:identity$1})}function renderBounds({x1:i,y1:e,x2:o,y2:d},h,{projection:g}){const{width:b,height:$,marginTop:j,marginRight:et,marginBottom:tt,marginLeft:nt}=h;return[i&&g==null?i[0]:nt,e&&g==null?e[0]:j,o&&g==null?o[0]:b-et,d&&g==null?d[0]:$-tt]}function rasterBounds({x1:i,y1:e,x2:o,y2:d},h,g,b){const $={};return i&&($.x1=i),e&&($.y1=e),o&&($.x2=o),d&&($.y2=d),renderBounds(valueObject($,h),g,b)}function sampler(i,e={}){const{[i]:o}=e;if(typeof o!="function")throw new Error(`invalid ${i}: not a function`);return initializer({...e,[i]:void 0},function(d,h,g,b,$,j){const{x:et,y:tt}=b;if(!et)throw new Error("missing scale: x");if(!tt)throw new Error("missing scale: y");const[nt,rt,ot,st]=rasterBounds(g,b,$,j),bt=ot-nt,vt=st-rt,{pixelSize:at}=this,{width:ut=Math.round(Math.abs(bt)/at),height:$t=Math.round(Math.abs(vt)/at)}=e,wt=new Array(ut*$t*(h?h.length:1)),At=bt/ut,xt=vt/$t;let Rt=0;for(const Ot of h??[void 0])for(let kt=.5;kt<$t;++kt)for(let Mt=.5;Mt<ut;++Mt,++Rt)wt[Rt]=o(et.invert(nt+Mt*At),tt.invert(rt+kt*xt),Ot);return{data:wt,facets:h,channels:{[i]:{value:wt,scale:"auto"}}}})}function maybeInterpolate(i){if(typeof i=="function")return i;if(i==null)return interpolateNone;switch(`${i}`.toLowerCase()){case"none":return interpolateNone;case"nearest":return interpolateNearest;case"barycentric":return interpolatorBarycentric();case"random-walk":return interpolatorRandomWalk()}throw new Error(`invalid interpolate: ${i}`)}function interpolateNone(i,e,o,d,h,g){const b=new Array(e*o);for(const $ of i)d[$]<0||d[$]>=e||h[$]<0||h[$]>=o||(b[Math.floor(h[$])*e+Math.floor(d[$])]=g[$]);return b}function interpolatorBarycentric({random:i=lcg(42)}={}){return(e,o,d,h,g,b)=>{const{points:$,triangles:j,hull:et}=Delaunay.from(e,ot=>h[ot],ot=>g[ot]),tt=new b.constructor(o*d).fill(NaN),nt=new Uint8Array(o*d),rt=mixer(b,i);for(let ot=0;ot<j.length;ot+=3){const st=j[ot],bt=j[ot+1],vt=j[ot+2],at=$[2*st],ut=$[2*bt],$t=$[2*vt],wt=$[2*st+1],At=$[2*bt+1],xt=$[2*vt+1],Rt=Math.min(at,ut,$t),Ot=Math.max(at,ut,$t),kt=Math.min(wt,At,xt),Mt=Math.max(wt,At,xt),Bt=(At-xt)*(at-$t)+(wt-xt)*($t-ut);if(!Bt)continue;const jt=b[e[st]],zt=b[e[bt]],Nt=b[e[vt]];for(let Ct=Math.floor(Rt);Ct<Ot;++Ct)for(let Ft=Math.floor(kt);Ft<Mt;++Ft){if(Ct<0||Ct>=o||Ft<0||Ft>=d)continue;const Vt=Ct+.5,Ut=Ft+.5,Ht=((At-xt)*(Vt-$t)+(Ut-xt)*($t-ut))/Bt;if(Ht<0)continue;const Pt=((xt-wt)*(Vt-$t)+(Ut-xt)*(at-$t))/Bt;if(Pt<0)continue;const Yt=1-Ht-Pt;if(Yt<0)continue;const Xt=Ct+o*Ft;tt[Xt]=rt(jt,Ht,zt,Pt,Nt,Yt,Ct,Ft),nt[Xt]=1}}return extrapolateBarycentric(tt,nt,h,g,b,o,d,et,e,rt),tt}}function extrapolateBarycentric(i,e,o,d,h,g,b,$,j,et){o=Float64Array.from($,ot=>o[j[ot]]),d=Float64Array.from($,ot=>d[j[ot]]),h=Array.from($,ot=>h[j[ot]]);const tt=o.length,nt=Array.from({length:tt},(ot,st)=>ray(st,o,d));let rt=0;for(let ot=0;ot<b;++ot){const st=ot+.5;for(let bt=0;bt<g;++bt){const vt=bt+g*ot;if(!e[vt]){const at=bt+.5;for(let ut=0;ut<tt;++ut){const $t=(tt+rt+(ut%2?(ut+1)/2:-ut/2))%tt;if(nt[$t](at,st)){const wt=segmentProject(o.at($t-1),d.at($t-1),o[$t],d[$t],at,st);i[vt]=et(h.at($t-1),wt,h[$t],1-wt,h[$t],0,bt,ot),rt=$t;break}}}}}}function segmentProject(i,e,o,d,h,g){const b=o-i,$=d-e,j=b*(o-h)+$*(d-g),et=b*(h-i)+$*(g-e);return j>0&&et>0?j/(j+et):+(j>et)}function cross(i,e,o,d){return i*d-o*e}function ray(i,e,o){const d=e.length,h=e.at(i-2),g=o.at(i-2),b=e.at(i-1),$=o.at(i-1),j=e[i],et=o[i],tt=e.at(i+1-d),nt=o.at(i+1-d),rt=b-j,ot=$-et,st=h-b,bt=g-$,vt=j-tt,at=et-nt,ut=Math.hypot(rt,ot),$t=Math.hypot(st,bt),wt=Math.hypot(vt,at);return(At,xt)=>{const Rt=At-b,Ot=xt-$,kt=At-j,Mt=xt-et;return cross(Rt,Ot,kt,Mt)>-1e-6&&cross(Rt,Ot,rt,ot)*$t-cross(Rt,Ot,st,bt)*ut>-1e-6&&cross(kt,Mt,vt,at)*ut-cross(kt,Mt,rt,ot)*wt<=0}}function interpolateNearest(i,e,o,d,h,g){const b=new g.constructor(e*o),$=Delaunay.from(i,tt=>d[tt],tt=>h[tt]);let j,et;for(let tt=.5,nt=0;tt<o;++tt){et=j;for(let rt=.5;rt<e;++rt,++nt)et=$.find(rt,tt,et),rt===.5&&(j=et),b[nt]=g[i[et]]}return b}function interpolatorRandomWalk({random:i=lcg(42),minDistance:e=.5,maxSteps:o=2}={}){return(d,h,g,b,$,j)=>{const et=new j.constructor(h*g),tt=Delaunay.from(d,st=>b[st],st=>$[st]);let nt,rt,ot;for(let st=.5,bt=0;st<g;++st){rt=nt;for(let vt=.5;vt<h;++vt,++bt){let at=vt,ut=st;ot=rt=tt.find(at,ut,rt),vt===.5&&(nt=rt);let $t,wt=0;for(;($t=Math.hypot(b[d[ot]]-at,$[d[ot]]-ut))>e&&wt<o;){const At=i(vt,st,wt)*2*Math.PI;at+=Math.cos(At)*$t,ut+=Math.sin(At)*$t,ot=tt.find(at,ut,ot),++wt}et[bt]=j[d[ot]]}}return et}}function blend(i,e,o,d,h,g){return e*i+d*o+g*h}function pick(i){return(e,o,d,h,g,b,$,j)=>{const et=i($,j);return et<o?e:et<o+h?d:g}}function mixer(i,e){return isNumeric(i)||isTemporal(i)?blend:pick(e)}function denseX(i,e,o){return{transform(d){const h=d.length,g=new Float64Array(h),b=(e-i)/o,$=i+b/2;for(let j=0;j<h;++j)g[j]=j%o*b+$;return g}}}function denseY(i,e,o,d){return{transform(h){const g=h.length,b=new Float64Array(g),$=(e-i)/d,j=i+$/2;for(let et=0;et<g;++et)b[et]=Math.floor(et/o)%d*$+j;return b}}}const defaults$5={ariaLabel:"contour",fill:"none",stroke:"currentColor",strokeMiterlimit:1,pixelSize:2};class Contour extends AbstractRaster{constructor(e,{smooth:o=!0,value:d,...h}={}){const g=styles({},h,defaults$5);if(d===void 0){for(const $ in g)if(g[$].value!=null){if(d!==void 0)throw new Error("ambiguous contour value");d=h[$],h[$]="value"}}if(d!=null){const $={transform:j=>j.map(et=>et.value),label:labelof(d)};for(const j in g)h[j]==="value"&&(h[j]=$)}if(e==null){if(d==null)throw new Error("missing contour value");h=sampler("value",{value:d,...h}),d=null}else{let{interpolate:$}=h;d===void 0&&(d=identity$1),$===void 0&&(h.interpolate="nearest")}super(e,{value:{value:d,optional:!0}},contourGeometry(h),defaults$5);const b={geometry:{value:identity$1}};for(const $ in this.channels){const j=this.channels[$],{scale:et}=j;et==="x"||et==="y"||$==="value"||(b[$]=j,delete this.channels[$])}this.contourChannels=b,this.smooth=!!o}filter(e,{x:o,y:d,value:h,...g},b){return super.filter(e,g,b)}render(e,o,d,h,g){const{geometry:b}=d,$=geoPath();return create("svg:g",g).call(applyIndirectStyles,this,h,g).call(applyTransform,this,o).call(j=>{j.selectAll().data(e).enter().append("path").call(applyDirectStyles,this).attr("d",et=>$(b[et])).call(applyChannelStyles,this,d)}).node()}}function contourGeometry({thresholds:i,interval:e,...o}){return i=maybeThresholds(i,e,thresholdSturges),initializer(o,function(d,h,g,b,$,j){const[et,tt,nt,rt]=rasterBounds(g,b,$,j),ot=nt-et,st=rt-tt,{pixelSize:bt,width:vt=Math.round(Math.abs(ot)/bt),height:at=Math.round(Math.abs(st)/bt)}=this,ut=vt/ot,$t=at/st,wt=g.value.value,At=[];if(this.interpolate){const{x:Mt,y:Bt}=applyPosition(g,b,j),jt=map$1(Mt,Ft=>(Ft-et)*ut,Float64Array),zt=map$1(Bt,Ft=>(Ft-tt)*$t,Float64Array),Nt=[g.x,g.y,g.value],Ct=[jt,zt,wt];for(const Ft of h){const Vt=this.filter(Ft,Nt,Ct);At.push(this.interpolate(Vt,vt,at,jt,zt,wt))}}else if(h){const Mt=vt*at,Bt=h.length;for(let jt=0;jt<Bt;++jt)At.push(wt.slice(jt*Mt,jt*Mt+Mt))}else At.push(wt);if(this.blur>0)for(const Mt of At)blur2({data:Mt,width:vt,height:at},this.blur);const xt=maybeTicks(i,wt,...finiteExtent(At));if(xt===null)throw new Error(`unsupported thresholds: ${i}`);const{contour:Rt}=contours().size([vt,at]).smooth(this.smooth),Ot=[],kt=[];for(const Mt of At)kt.push(range$1(Ot.length,Ot.push(...map$1(xt,Bt=>Rt(Mt,Bt)))));for(const{coordinates:Mt}of Ot)for(const Bt of Mt)for(const jt of Bt)for(const zt of jt)zt[0]=zt[0]/ut+et,zt[1]=zt[1]/$t+tt;return{data:Ot,facets:kt,channels:createChannels(this.contourChannels,Ot)}})}function maybeTicks(i,e,o,d){if(typeof(i==null?void 0:i.range)=="function")return i.range(i.floor(o),d);if(typeof i=="function"&&(i=i(e,o,d)),typeof i!="number")return arrayify(i);const h=ticks(...nice$1(o,d,i),i);for(;h[h.length-1]>=d;)h.pop();for(;h[1]<o;)h.shift();return h}function contour$1(){return new Contour(...maybeTuples("value",...arguments))}function finiteExtent(i){return[min$2(i,e=>min$2(e,finite)),max$1(i,e=>max$1(e,finite))]}function finite(i){return isFinite(i)?i:NaN}function crosshair(i,e){return crosshairK(pointer,i,e)}function crosshairX(i,e={}){return crosshairK(pointerX,i,e)}function crosshairY(i,e={}){return crosshairK(pointerY,i,e)}function crosshairK(i,e,o={}){const{x:d,y:h,maxRadius:g}=o,b=i({px:d,py:h,maxRadius:g}),$=[];d!=null&&$.push(ruleX$1(e,ruleOptions("x",{...b,inset:-6},o))),h!=null&&$.push(ruleY$1(e,ruleOptions("y",{...b,inset:-6},o))),d!=null&&$.push(text$1(e,textOptions("x",{...b,dy:9,frameAnchor:"bottom",lineAnchor:"top"},o))),h!=null&&$.push(text$1(e,textOptions("y",{...b,dx:-9,frameAnchor:"left",textAnchor:"end"},o)));for(const j of $)j.ariaLabel=`crosshair ${j.ariaLabel}`;return marks$1(...$)}function markOptions(i,{channels:e,...o},{facet:d,facetAnchor:h,fx:g,fy:b,[i]:$,channels:j,transform:et,initializer:tt}){return{...o,facet:d,facetAnchor:h,fx:g,fy:b,[i]:$,channels:{...e,...j},transform:et,initializer:pxpy(i,tt)}}function pxpy(i,e){return e==null?e:function(o,d,{x:h,y:g,px:b,py:$,...j},...et){const{channels:{x:tt,y:nt,...rt}={},...ot}=e.call(this,o,d,{...j,x:b,y:$},...et);return{channels:{...rt,...tt&&{px:tt,...i==="x"&&{x:tt}},...nt&&{py:nt,...i==="y"&&{y:nt}}},...ot}}}function ruleOptions(i,e,o){const{color:d="currentColor",opacity:h=.2,ruleStroke:g=d,ruleStrokeOpacity:b=h,ruleStrokeWidth:$}=o;return{...markOptions(i,e,o),stroke:g,strokeOpacity:b,strokeWidth:$}}function textOptions(i,e,o){const{color:d="currentColor",textFill:h=d,textFillOpacity:g,textStroke:b="white",textStrokeOpacity:$,textStrokeWidth:j=5}=o;return{...markOptions(i,e,textChannel(i,o)),fill:h,fillOpacity:g,stroke:b,strokeOpacity:$,strokeWidth:j}}function textChannel(i,e){return initializer(e,(o,d,h)=>{var g;return{channels:{text:{value:(g=getSource(h,i))==null?void 0:g.value}}}})}const delaunayLinkDefaults={ariaLabel:"delaunay link",fill:"none",stroke:"currentColor",strokeMiterlimit:1},delaunayMeshDefaults={ariaLabel:"delaunay mesh",fill:null,stroke:"currentColor",strokeOpacity:.2},hullDefaults={ariaLabel:"hull",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeMiterlimit:1},voronoiDefaults={ariaLabel:"voronoi",fill:"none",stroke:"currentColor",strokeMiterlimit:1},voronoiMeshDefaults={ariaLabel:"voronoi mesh",fill:null,stroke:"currentColor",strokeOpacity:.2};class DelaunayLink extends Mark$1{constructor(e,o={}){const{x:d,y:h,z:g,curve:b,tension:$}=o;super(e,{x:{value:d,scale:"x",optional:!0},y:{value:h,scale:"y",optional:!0},z:{value:g,optional:!0}},o,delaunayLinkDefaults),this.curve=maybeCurve(b,$),markers(this,o)}render(e,o,d,h,g){const{x:b,y:$}=o,{x:j,y:et,z:tt}=d,{curve:nt}=this,[rt,ot]=applyFrameAnchor(this,h),st=j?ut=>j[ut]:constant(rt),bt=et?ut=>et[ut]:constant(ot),vt=this;function at(ut){let $t=-1;const wt=[],At={};for(const Nt in d)At[Nt]=[];const xt=[],Rt=[],Ot=[],kt=[];function Mt(Nt,Ct){Nt=ut[Nt],Ct=ut[Ct],wt.push(++$t),xt[$t]=st(Nt),Ot[$t]=bt(Nt),Rt[$t]=st(Ct),kt[$t]=bt(Ct);for(const Ft in d)At[Ft].push(d[Ft][Ct])}const{halfedges:Bt,hull:jt,triangles:zt}=Delaunay.from(ut,st,bt);for(let Nt=0;Nt<Bt.length;++Nt){const Ct=Bt[Nt];Ct>Nt&&Mt(zt[Nt],zt[Ct])}for(let Nt=0;Nt<jt.length;++Nt)Mt(jt[Nt],jt[(Nt+1)%jt.length]);select$1(this).selectAll().data(wt).enter().append("path").call(applyDirectStyles,vt).attr("d",Nt=>{const Ct=pathRound(),Ft=nt(Ct);return Ft.lineStart(),Ft.point(xt[Nt],Ot[Nt]),Ft.point(Rt[Nt],kt[Nt]),Ft.lineEnd(),Ct}).call(applyChannelStyles,vt,At).call(applyMarkers,vt,At,g)}return create("svg:g",g).call(applyIndirectStyles,this,h,g).call(applyTransform,this,{x:j&&b,y:et&&$}).call(tt?ut=>ut.selectAll().data(group$1(e,$t=>tt[$t]).values()).enter().append("g").each(at):ut=>ut.datum(e).each(at)).node()}}class AbstractDelaunayMark extends Mark$1{constructor(e,o={},d,h=({z:g})=>g){const{x:g,y:b}=o;super(e,{x:{value:g,scale:"x",optional:!0},y:{value:b,scale:"y",optional:!0},z:{value:h(o),optional:!0}},o,d)}render(e,o,d,h,g){const{x:b,y:$}=o,{x:j,y:et,z:tt}=d,[nt,rt]=applyFrameAnchor(this,h),ot=j?at=>j[at]:constant(nt),st=et?at=>et[at]:constant(rt),bt=this;function vt(at){const ut=Delaunay.from(at,ot,st);select$1(this).append("path").datum(at[0]).call(applyDirectStyles,bt).attr("d",bt._render(ut,h)).call(applyChannelStyles,bt,d)}return create("svg:g",g).call(applyIndirectStyles,this,h,g).call(applyTransform,this,{x:j&&b,y:et&&$}).call(tt?at=>at.selectAll().data(group$1(e,ut=>tt[ut]).values()).enter().append("g").each(vt):at=>at.datum(e).each(vt)).node()}}class DelaunayMesh extends AbstractDelaunayMark{constructor(e,o={}){super(e,o,delaunayMeshDefaults),this.fill="none"}_render(e){return e.render()}}class Hull extends AbstractDelaunayMark{constructor(e,o={}){super(e,o,hullDefaults,maybeZ)}_render(e){return e.renderHull()}}class Voronoi extends Mark$1{constructor(e,o={}){const{x:d,y:h,z:g}=o;super(e,{x:{value:d,scale:"x",optional:!0},y:{value:h,scale:"y",optional:!0},z:{value:g,optional:!0}},o,voronoiDefaults)}render(e,o,d,h,g){const{x:b,y:$}=o,{x:j,y:et,z:tt}=d,[nt,rt]=applyFrameAnchor(this,h),ot=j?at=>j[at]:constant(nt),st=et?at=>et[at]:constant(rt),bt=this;function vt(at){const ut=Delaunay.from(at,ot,st),$t=voronoiof(ut,h);select$1(this).selectAll().data(at).enter().append("path").call(applyDirectStyles,bt).attr("d",(wt,At)=>$t.renderCell(At)).call(applyChannelStyles,bt,d)}return create("svg:g",g).call(applyIndirectStyles,this,h,g).call(applyTransform,this,{x:j&&b,y:et&&$}).call(tt?at=>at.selectAll().data(group$1(e,ut=>tt[ut]).values()).enter().append("g").each(vt):at=>at.datum(e).each(vt)).node()}}class VoronoiMesh extends AbstractDelaunayMark{constructor(e,o){super(e,o,voronoiMeshDefaults),this.fill="none"}_render(e,o){return voronoiof(e,o).render()}}function voronoiof(i,e){const{width:o,height:d,marginTop:h,marginRight:g,marginBottom:b,marginLeft:$}=e;return i.voronoi([$,h,o-g,d-b])}function delaunayMark(i,e,{x:o,y:d,...h}={}){return[o,d]=maybeTuple(o,d),new i(e,{...h,x:o,y:d})}function delaunayLink$1(i,e){return delaunayMark(DelaunayLink,i,e)}function delaunayMesh$1(i,e){return delaunayMark(DelaunayMesh,i,e)}function hull$1(i,e){return delaunayMark(Hull,i,e)}function voronoi$1(i,e){return delaunayMark(Voronoi,i,e)}function voronoiMesh$1(i,e){return delaunayMark(VoronoiMesh,i,e)}const defaults$4={ariaLabel:"density",fill:"none",stroke:"currentColor",strokeMiterlimit:1};class Density extends Mark$1{constructor(e,{x:o,y:d,z:h,weight:g,fill:b,stroke:$,...j}={}){const et=isDensity(b)&&(b="currentColor",!0),tt=isDensity($)&&($="currentColor",!0);super(e,{x:{value:o,scale:"x",optional:!0},y:{value:d,scale:"y",optional:!0},z:{value:maybeZ({z:h,fill:b,stroke:$}),optional:!0},weight:{value:g,optional:!0}},densityInitializer({...j,fill:b,stroke:$},et,tt),defaults$4),et&&(this.fill=void 0),tt&&(this.stroke=void 0),this.z=h}filter(e){return e}render(e,o,d,h,g){const{contours:b}=d,$=geoPath();return create("svg:g",g).call(applyIndirectStyles,this,h,g).call(applyTransform,this,{}).call(j=>j.selectAll().data(e).enter().append("path").call(applyDirectStyles,this).call(applyChannelStyles,this,d).attr("d",et=>$(b[et]))).node()}}function density$1(i,{x:e,y:o,...d}={}){return[e,o]=maybeTuple(e,o),new Density(i,{...d,x:e,y:o})}const dropChannels=new Set(["x","y","z","weight"]);function densityInitializer(i,e,o){let{bandwidth:h,thresholds:g}=i;return h=h===void 0?20:+h,g=g===void 0?20:typeof(g==null?void 0:g[Symbol.iterator])=="function"?coerceNumbers(g):+g,initializer(i,function(b,$,j,et,tt,nt){var zt;const rt=j.weight?coerceNumbers(j.weight.value):null,ot=(zt=j.z)==null?void 0:zt.value,{z:st}=this,[bt,vt]=applyFrameAnchor(this,tt),{width:at,height:ut}=tt,{x:$t,y:wt}=applyPosition(j,et,nt),At=Object.fromEntries(Object.entries(j).filter(([Nt])=>!dropChannels.has(Nt)).map(([Nt,Ct])=>[Nt,{...Ct,value:[]}])),xt=e&&[],Rt=o&&[],Ot=contourDensity().x($t?Nt=>$t[Nt]:bt).y(wt?Nt=>wt[Nt]:vt).weight(rt?Nt=>rt[Nt]:1).size([at,ut]).bandwidth(h),kt=[];for(const Nt of $){const Ct=[];kt.push(Ct);for(const Ft of ot?groupZ(Nt,ot,st):[Nt]){const Vt=Ot.contours(Ft);Ct.push([Ft,Vt])}}let Mt=g;if(!(Mt instanceof TypedArray)){let Nt=0;for(const Ct of kt)for(const[,Ft]of Ct){const Vt=Ft.max;Vt>Nt&&(Nt=Vt)}Mt=Float64Array.from({length:g-1},(Ct,Ft)=>Nt*100*(Ft+1)/g)}const Bt=[],jt=[];for(const Nt of kt){const Ct=[];Bt.push(Ct);for(const[Ft,Vt]of Nt)for(const Ut of Mt){Ct.push(jt.length),jt.push(Vt(Ut/100)),xt&&xt.push(Ut),Rt&&Rt.push(Ut);for(const Ht in At)At[Ht].value.push(j[Ht].value[Ft[0]])}}return xt&&xt.push(0),Rt&&Rt.push(0),{data:b,facets:Bt,channels:{...At,...xt&&{fill:{value:xt,scale:"color"}},...Rt&&{stroke:{value:Rt,scale:"color"}},contours:{value:jt}}}})}function isDensity(i){return/^density$/i.test(i)}const defaults$3={ariaLabel:"geo",fill:"none",stroke:"currentColor",strokeWidth:1,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class Geo extends Mark$1{constructor(e,o={}){const[d,h]=maybeNumberChannel(o.r,3);super(e,{geometry:{value:o.geometry,scale:"projection"},r:{value:d,scale:"r",filter:positive,optional:!0}},withDefaultSort(o),defaults$3),this.r=h}render(e,o,d,h,g){const{geometry:b,r:$}=d,j=geoPath(g.projection??scaleProjection(o)),{r:et}=this;return negative(et)?e=[]:et!==void 0&&j.pointRadius(et),create("svg:g",g).call(applyIndirectStyles,this,h,g).call(applyTransform,this,o).call(tt=>{tt.selectAll().data(e).enter().append("path").call(applyDirectStyles,this).attr("d",$?nt=>j.pointRadius($[nt])(b[nt]):nt=>j(b[nt])).call(applyChannelStyles,this,d)}).node()}}function scaleProjection({x:i,y:e}){if(i||e)return i??(i=o=>o),e??(e=o=>o),geoTransform({point(o,d){this.stream.point(i(o),e(d))}})}function geo$1(i,{geometry:e=identity$1,...o}={}){switch(i==null?void 0:i.type){case"FeatureCollection":i=i.features;break;case"GeometryCollection":i=i.geometries;break;case"Feature":case"LineString":case"MultiLineString":case"MultiPoint":case"MultiPolygon":case"Point":case"Polygon":case"Sphere":i=[i];break}return new Geo(i,{geometry:e,...o})}function sphere$1({strokeWidth:i=1.5,...e}={}){return geo$1({type:"Sphere"},{strokeWidth:i,...e})}function graticule$1({strokeOpacity:i=.1,...e}={}){return geo$1(graticule10(),{strokeOpacity:i,...e})}const ox=.5,oy=0;function hexbin$1(i={fill:"count"},{binWidth:e,...o}={}){const{z:d}=o;return e=e===void 0?20:number$1(e),i=maybeOutputs(i,o),hasOutput(i,"fill")&&(o.channels={...o.channels,fill:{value:[]}}),o.symbol===void 0&&(o.symbol="hexagon"),o.r===void 0&&!hasOutput(i,"r")&&(o.r=e/2),initializer(o,(h,g,b,$,j,et)=>{let{x:tt,y:nt,z:rt,fill:ot,stroke:st,symbol:bt}=b;if(tt===void 0)throw new Error("missing channel: x");if(nt===void 0)throw new Error("missing channel: y");({x:tt,y:nt}=applyPosition(b,$,et)),rt=rt?rt.value:valueof(h,d),ot=ot==null?void 0:ot.value,st=st==null?void 0:st.value,bt=bt==null?void 0:bt.value;const vt=maybeSubgroup(i,{z:rt,fill:ot,stroke:st,symbol:bt}),at=rt&&[],ut=ot&&[],$t=st&&[],wt=bt&&[],At=[],xt=[],Rt=[];let Ot=-1;for(const jt of i)jt.initialize(h);for(const jt of g){const zt=[];for(const Nt of i)Nt.scope("facet",jt);for(const[Nt,Ct]of maybeGroup(jt,vt))for(const Ft of hbin(Ct,tt,nt,e)){zt.push(++Ot),xt.push(Ft.x),Rt.push(Ft.y),rt&&at.push(vt===rt?Nt:rt[Ft[0]]),ot&&ut.push(vt===ot?Nt:ot[Ft[0]]),st&&$t.push(vt===st?Nt:st[Ft[0]]),bt&&wt.push(vt===bt?Nt:bt[Ft[0]]);for(const Vt of i)Vt.reduce(Ft)}At.push(zt)}const kt=b.x.scale,Mt=b.y.scale,Bt={x:{value:xt,source:$[kt]?{value:map$1(xt,$[kt].invert),scale:kt}:null},y:{value:Rt,source:$[Mt]?{value:map$1(Rt,$[Mt].invert),scale:Mt}:null},...rt&&{z:{value:at}},...ot&&{fill:{value:ut,scale:"auto"}},...st&&{stroke:{value:$t,scale:"auto"}},...bt&&{symbol:{value:wt,scale:"auto"}},...Object.fromEntries(i.map(({name:jt,output:zt})=>[jt,{scale:"auto",label:zt.label,radius:jt==="r"?e/2:void 0,value:zt.transform()}]))};return{data:h,facets:At,channels:Bt}})}function hbin(i,e,o,d){const h=d*(1.5/sqrt3),g=new Map;for(const b of i){let $=e[b],j=o[b];if(isNaN($)||isNaN(j))continue;let et=Math.round(j=(j-oy)/h),tt=Math.round($=($-ox)/d-(et&1)/2),nt=j-et;if(Math.abs(nt)*3>1){let st=$-tt,bt=tt+($<tt?-1:1)/2,vt=et+(j<et?-1:1),at=$-bt,ut=j-vt;st*st+nt*nt>at*at+ut*ut&&(tt=bt+(et&1?1:-1)/2,et=vt)}const rt=`${tt},${et}`;let ot=g.get(rt);ot===void 0&&(g.set(rt,ot=[]),ot.x=(tt+(et&1)/2)*d+ox,ot.y=et*h+oy),ot.push(b)}return g.values()}const defaults$2={ariaLabel:"hexgrid",fill:"none",stroke:"currentColor",strokeOpacity:.1};function hexgrid$1(i){return new Hexgrid(i)}class Hexgrid extends Mark$1{constructor({binWidth:e=20,clip:o=!0,...d}={}){super(singleton,void 0,{clip:o,...d},defaults$2),this.binWidth=number$1(e)}render(e,o,d,h,g){const{binWidth:b}=this,{marginTop:$,marginRight:j,marginBottom:et,marginLeft:tt,width:nt,height:rt}=h,ot=tt-ox,st=nt-j-ox,bt=$-oy,vt=rt-et-oy,at=b/2,ut=at*sqrt4_3,$t=ut/2,wt=at*2,At=ut*1.5,xt=Math.floor(ot/wt),Rt=Math.ceil(st/wt),Ot=Math.floor((bt+$t)/At),kt=Math.ceil((vt-$t)/At)+1,Mt=`m0,${round$1(-ut)}l${round$1(at)},${round$1($t)}v${round$1(ut)}l${round$1(-at)},${round$1($t)}`;let Bt=Mt;for(let jt=Ot;jt<kt;++jt)for(let zt=xt;zt<Rt;++zt)Bt+=`M${round$1(zt*wt+(jt&1)*at)},${round$1(jt*At)}${Mt}`;return create("svg:g",g).datum(0).call(applyIndirectStyles,this,h,g).call(applyTransform,this,{},offset+ox,offset+oy).call(jt=>jt.append("path").call(applyDirectStyles,this).call(applyChannelStyles,this,d).attr("d",Bt)).node()}}function round$1(i){return Math.round(i*1e3)/1e3}const defaults$1={ariaLabel:"image",fill:null,stroke:null};function isPath(i){return/^\.*\//.test(i)}function isUrl(i){return/^(blob|data|file|http|https):/i.test(i)}function maybePathChannel(i){return typeof i=="string"&&(isPath(i)||isUrl(i))?[void 0,i]:[i,void 0]}class Image extends Mark$1{constructor(e,o={}){let{x:d,y:h,r:g,width:b,height:$,rotate:j,src:et,preserveAspectRatio:tt,crossOrigin:nt,frameAnchor:rt,imageRendering:ot}=o;g==null&&(g=void 0),g===void 0&&b===void 0&&$===void 0?b=$=16:b===void 0&&$!==void 0?b=$:$===void 0&&b!==void 0&&($=b);const[st,bt]=maybePathChannel(et),[vt,at]=maybeNumberChannel(g),[ut,$t]=maybeNumberChannel(b,at!==void 0?at*2:void 0),[wt,At]=maybeNumberChannel($,at!==void 0?at*2:void 0),[xt,Rt]=maybeNumberChannel(j,0);super(e,{x:{value:d,scale:"x",optional:!0},y:{value:h,scale:"y",optional:!0},r:{value:vt,scale:"r",filter:positive,optional:!0},width:{value:ut,filter:positive,optional:!0},height:{value:wt,filter:positive,optional:!0},rotate:{value:xt,optional:!0},src:{value:st,optional:!0}},withDefaultSort(o),defaults$1),this.src=bt,this.width=$t,this.rotate=Rt,this.height=At,this.r=at,this.preserveAspectRatio=impliedString(tt,"xMidYMid"),this.crossOrigin=string(nt),this.frameAnchor=maybeFrameAnchor(rt),this.imageRendering=impliedString(ot,"auto")}render(e,o,d,h,g){const{x:b,y:$}=o,{x:j,y:et,width:tt,height:nt,r:rt,rotate:ot,src:st}=d,{r:bt,width:vt,height:at,rotate:ut}=this,[$t,wt]=applyFrameAnchor(this,h);return create("svg:g",g).call(applyIndirectStyles,this,h,g).call(applyTransform,this,{x:j&&b,y:et&&$}).call(At=>At.selectAll().data(e).enter().append("image").call(applyDirectStyles,this).attr("x",position(j,tt,rt,$t,vt,bt)).attr("y",position(et,nt,rt,wt,at,bt)).attr("width",tt?xt=>tt[xt]:vt!==void 0?vt:rt?xt=>rt[xt]*2:bt*2).attr("height",nt?xt=>nt[xt]:at!==void 0?at:rt?xt=>rt[xt]*2:bt*2).attr("transform",ot?xt=>`rotate(${ot[xt]})`:ut?`rotate(${ut})`:null).attr("transform-origin",ot||ut?template`${j?xt=>j[xt]:$t}px ${et?xt=>et[xt]:wt}px`:null).call(applyAttr,"href",st?xt=>st[xt]:this.src).call(applyAttr,"preserveAspectRatio",this.preserveAspectRatio).call(applyAttr,"crossorigin",this.crossOrigin).call(applyAttr,"image-rendering",this.imageRendering).call(applyAttr,"clip-path",rt?xt=>`circle(${rt[xt]}px)`:bt!==void 0?`circle(${bt}px)`:null).call(applyChannelStyles,this,d)).node()}}function position(i,e,o,d,h,g){return e&&i?b=>i[b]-e[b]/2:e?b=>d-e[b]/2:i&&h!==void 0?b=>i[b]-h/2:h!==void 0?d-h/2:o&&i?b=>i[b]-o[b]:o?b=>d-o[b]:i?b=>i[b]-g:d-g}function image$1(i,{x:e,y:o,...d}={}){return d.frameAnchor===void 0&&([e,o]=maybeTuple(e,o)),new Image(i,{...d,x:e,y:o})}function ibetainv$1(i,e,o){var d=1e-8,h=e-1,g=o-1,b=0,$,j,et,tt,nt,rt,ot,st,bt,vt,at;if(i<=0)return 0;if(i>=1)return 1;for(e>=1&&o>=1?(et=i<.5?i:1-i,tt=Math.sqrt(-2*Math.log(et)),ot=(2.30753+tt*.27061)/(1+tt*(.99229+tt*.04481))-tt,i<.5&&(ot=-ot),st=(ot*ot-3)/6,bt=2/(1/(2*e-1)+1/(2*o-1)),vt=ot*Math.sqrt(st+bt)/bt-(1/(2*o-1)-1/(2*e-1))*(st+5/6-2/(3*bt)),ot=e/(e+o*Math.exp(2*vt))):($=Math.log(e/(e+o)),j=Math.log(o/(e+o)),tt=Math.exp(e*$)/e,nt=Math.exp(o*j)/o,vt=tt+nt,i<tt/vt?ot=Math.pow(e*vt*i,1/e):ot=1-Math.pow(o*vt*(1-i),1/o)),at=-gammaln$1(e)-gammaln$1(o)+gammaln$1(e+o);b<10;b++){if(ot===0||ot===1)return ot;if(rt=ibeta$1(ot,e,o)-i,tt=Math.exp(h*Math.log(ot)+g*Math.log(1-ot)+at),nt=rt/tt,ot-=tt=nt/(1-.5*Math.min(1,nt*(h/ot-g/(1-ot)))),ot<=0&&(ot=.5*(ot+tt)),ot>=1&&(ot=.5*(ot+tt+1)),Math.abs(tt)<d*ot&&b>0)break}return ot}function ibeta$1(i,e,o){var d=i===0||i===1?0:Math.exp(gammaln$1(e+o)-gammaln$1(e)-gammaln$1(o)+e*Math.log(i)+o*Math.log(1-i));return i<0||i>1?!1:i<(e+1)/(e+o+2)?d*betacf$1(i,e,o)/e:1-d*betacf$1(1-i,o,e)/o}function betacf$1(i,e,o){var d=1e-30,h=1,g=e+o,b=e+1,$=e-1,j=1,et=1-g*i/b,tt,nt,rt,ot;for(Math.abs(et)<d&&(et=d),et=1/et,ot=et;h<=100&&(tt=2*h,nt=h*(o-h)*i/(($+tt)*(e+tt)),et=1+nt*et,Math.abs(et)<d&&(et=d),j=1+nt/j,Math.abs(j)<d&&(j=d),et=1/et,ot*=et*j,nt=-(e+h)*(g+h)*i/((e+tt)*(b+tt)),et=1+nt*et,Math.abs(et)<d&&(et=d),j=1+nt/j,Math.abs(j)<d&&(j=d),et=1/et,rt=et*j,ot*=rt,!(Math.abs(rt-1)<3e-7));h++);return ot}function gammaln$1(i){var e=0,o=[76.18009172947146,-86.5053203294167,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18],d=1.000000000190015,h,g,b;for(b=(g=h=i)+5.5,b-=(h+.5)*Math.log(b);e<6;e++)d+=o[e]/++g;return Math.log(2.506628274631*d/h)-b}function qt$1(i,e){var o=ibetainv$1(2*Math.min(i,1-i),.5*e,.5);return o=Math.sqrt(e*(1-o)/o),i>.5?o:-o}const defaults={ariaLabel:"linear-regression",fill:"currentColor",fillOpacity:.1,stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class LinearRegression extends Mark$1{constructor(e,o={}){const{x:d,y:h,z:g,ci:b=.95,precision:$=4}=o;if(super(e,{x:{value:d,scale:"x"},y:{value:h,scale:"y"},z:{value:maybeZ(o),optional:!0}},o,defaults),this.z=g,this.ci=+b,this.precision=+$,!(0<=this.ci&&this.ci<1))throw new Error(`invalid ci; not in [0, 1): ${b}`);if(!(this.precision>0))throw new Error(`invalid precision: ${$}`)}render(e,o,d,h,g){const{x:b,y:$,z:j}=d,{ci:et}=this;return create("svg:g",g).call(applyIndirectStyles,this,h,g).call(applyTransform,this,o).call(tt=>tt.selectAll().data(j?groupZ(e,j,this.z):[e]).enter().call(nt=>nt.append("path").attr("fill","none").call(applyDirectStyles,this).call(applyGroupedChannelStyles,this,{...d,fill:null,fillOpacity:null}).attr("d",rt=>this._renderLine(rt,b,$)).call(et&&!isNone(this.fill)?rt=>rt.select(pathBefore).attr("stroke","none").call(applyDirectStyles,this).call(applyGroupedChannelStyles,this,{...d,stroke:null,strokeOpacity:null,strokeWidth:null}).attr("d",ot=>this._renderBand(ot,b,$)):()=>{}))).node()}}function pathBefore(){return this.parentNode.insertBefore(this.ownerDocument.createElementNS(namespaces.svg,"path"),this)}class LinearRegressionX extends LinearRegression{constructor(e,o){super(e,o)}_renderBand(e,o,d){const{ci:h,precision:g}=this,[b,$]=extent$2(e,tt=>d[tt]),j=linearRegressionF(e,d,o),et=confidenceIntervalF(e,d,o,(1-h)/2,j);return shapeArea().y(tt=>tt).x0(tt=>et(tt,-1)).x1(tt=>et(tt,1))(range$1(b,$-g/2,g).concat($))}_renderLine(e,o,d){const[h,g]=extent$2(e,$=>d[$]),b=linearRegressionF(e,d,o);return`M${b(h)},${h}L${b(g)},${g}`}}class LinearRegressionY extends LinearRegression{constructor(e,o){super(e,o)}_renderBand(e,o,d){const{ci:h,precision:g}=this,[b,$]=extent$2(e,tt=>o[tt]),j=linearRegressionF(e,o,d),et=confidenceIntervalF(e,o,d,(1-h)/2,j);return shapeArea().x(tt=>tt).y0(tt=>et(tt,-1)).y1(tt=>et(tt,1))(range$1(b,$-g/2,g).concat($))}_renderLine(e,o,d){const[h,g]=extent$2(e,$=>o[$]),b=linearRegressionF(e,o,d);return`M${h},${b(h)}L${g},${b(g)}`}}function linearRegressionX(i,{y:e=indexOf,x:o=identity$1,stroke:d,fill:h=isNoneish(d)?"currentColor":d,...g}={}){return new LinearRegressionX(i,maybeDenseIntervalY({...g,x:o,y:e,fill:h,stroke:d}))}function linearRegressionY(i,{x:e=indexOf,y:o=identity$1,stroke:d,fill:h=isNoneish(d)?"currentColor":d,...g}={}){return new LinearRegressionY(i,maybeDenseIntervalX({...g,x:e,y:o,fill:h,stroke:d}))}function linearRegressionF(i,e,o){let d=0,h=0,g=0,b=0;for(const tt of i){const nt=e[tt],rt=o[tt];d+=nt,h+=rt,g+=nt*rt,b+=nt*nt}const $=i.length,j=($*g-d*h)/($*b-d*d),et=(h-j*d)/$;return tt=>j*tt+et}function confidenceIntervalF(i,e,o,d,h){const g=sum$2(i,tt=>e[tt])/i.length;let b=0,$=0;for(const tt of i)b+=(e[tt]-g)**2,$+=(o[tt]-h(e[tt]))**2;const j=Math.sqrt($/(i.length-2)),et=qt$1(d,i.length-2);return(tt,nt)=>{const rt=h(tt),ot=j*Math.sqrt(1/i.length+(tt-g)**2/b);return rt+nt*et*ot}}function treeNode({path:i=identity$1,delimiter:e,frameAnchor:o,treeLayout:d=Tree,treeSort:h,treeSeparation:g,treeAnchor:b,treeFilter:$,...j}={}){b=maybeTreeAnchor(b),h=maybeTreeSort(h),$!=null&&($=maybeNodeValue($)),o===void 0&&(o=b.frameAnchor);const et=normalizer(e),tt=treeOutputs(j,maybeNodeValue),[nt,rt]=column(),[ot,st]=column();return{x:nt,y:ot,frameAnchor:o,...basic(j,(bt,vt)=>{const at=et(valueof(bt,i)),ut=rt([]),$t=st([]);let wt=-1;const At=[],xt=[],Rt=stratify().path(kt=>at[kt]),Ot=d();Ot.nodeSize&&Ot.nodeSize([1,1]),Ot.separation&&g!==void 0&&Ot.separation(g??one);for(const kt of tt)kt[output_values]=kt[output_setValues]([]);for(const kt of vt){const Mt=[],Bt=Rt(kt.filter(jt=>at[jt]!=null)).each(jt=>jt.data=bt[jt.data]);h!=null&&Bt.sort(h),Ot(Bt);for(const jt of Bt.descendants())if(!($!=null&&!$(jt))){Mt.push(++wt),At[wt]=jt.data,b.position(jt,wt,ut,$t);for(const zt of tt)zt[output_values][wt]=zt[output_evaluate](jt)}xt.push(Mt)}return{data:At,facets:xt}}),...Object.fromEntries(tt)}}function treeLink({path:i=identity$1,delimiter:e,curve:o="bump-x",stroke:d="#555",strokeWidth:h=1.5,strokeOpacity:g=.5,treeLayout:b=Tree,treeSort:$,treeSeparation:j,treeAnchor:et,treeFilter:tt,...nt}={}){et=maybeTreeAnchor(et),$=maybeTreeSort($),tt!=null&&(tt=maybeLinkValue(tt)),nt={curve:o,stroke:d,strokeWidth:h,strokeOpacity:g,...nt};const rt=normalizer(e),ot=treeOutputs(nt,maybeLinkValue),[st,bt]=column(),[vt,at]=column(),[ut,$t]=column(),[wt,At]=column();return{x1:st,x2:vt,y1:ut,y2:wt,...basic(nt,(xt,Rt)=>{const Ot=rt(valueof(xt,i)),kt=bt([]),Mt=at([]),Bt=$t([]),jt=At([]);let zt=-1;const Nt=[],Ct=[],Ft=stratify().path(Ut=>Ot[Ut]),Vt=b();Vt.nodeSize&&Vt.nodeSize([1,1]),Vt.separation&&j!==void 0&&Vt.separation(j??one);for(const Ut of ot)Ut[output_values]=Ut[output_setValues]([]);for(const Ut of Rt){const Ht=[],Pt=Ft(Ut.filter(Yt=>Ot[Yt]!=null)).each(Yt=>Yt.data=xt[Yt.data]);$!=null&&Pt.sort($),Vt(Pt);for(const{source:Yt,target:Xt}of Pt.links())if(!(tt!=null&&!tt(Xt,Yt))){Ht.push(++zt),Nt[zt]=Xt.data,et.position(Yt,zt,kt,Bt),et.position(Xt,zt,Mt,jt);for(const wn of ot)wn[output_values][zt]=wn[output_evaluate](Xt,Yt)}Ct.push(Ht)}return{data:Nt,facets:Ct}}),...Object.fromEntries(ot)}}function maybeTreeAnchor(i="left"){switch(`${i}`.trim().toLowerCase()){case"left":return treeAnchorLeft;case"right":return treeAnchorRight}throw new Error(`invalid tree anchor: ${i}`)}const treeAnchorLeft={frameAnchor:"left",dx:6,position({x:i,y:e},o,d,h){d[o]=e,h[o]=-i}},treeAnchorRight={frameAnchor:"right",dx:-6,position({x:i,y:e},o,d,h){d[o]=-e,h[o]=-i}};function maybeTreeSort(i){return i==null||typeof i=="function"?i:`${i}`.trim().toLowerCase().startsWith("node:")?nodeSort(maybeNodeValue(i)):nodeSort(nodeData(i))}function nodeSort(i){return(e,o)=>ascendingDefined(i(e),i(o))}function nodeData(i){return e=>{var o;return(o=e.data)==null?void 0:o[i]}}function normalizer(i="/"){if(i=`${i}`,i==="/")return o=>o;if(i.length!==1)throw new Error("delimiter must be exactly one character");const e=i.charCodeAt(0);return o=>o.map(d=>slashDelimiter(d,e))}const CODE_BACKSLASH=92,CODE_SLASH=47;function slashDelimiter(i,e){if(e===CODE_BACKSLASH)throw new Error("delimiter cannot be backslash");let o=!1;for(let d=0,h=i.length;d<h;++d){switch(i.charCodeAt(d)){case CODE_BACKSLASH:if(!o){o=!0;continue}break;case e:o?(i=i.slice(0,d-1)+i.slice(d),--d,--h):i=i.slice(0,d)+"/"+i.slice(d+1);break;case CODE_SLASH:o?(i=i.slice(0,d)+"\\\\"+i.slice(d),d+=2,h+=2):(i=i.slice(0,d)+"\\"+i.slice(d),++d,++h);break}o=!1}return i}function slashUnescape(i){let e=!1;for(let o=0,d=i.length;o<d;++o){switch(i.charCodeAt(o)){case CODE_BACKSLASH:if(!e){e=!0;continue}case CODE_SLASH:e&&(i=i.slice(0,o-1)+i.slice(o),--o,--d);break}e=!1}return i}function isNodeValue(i){return isObject$1(i)&&typeof i.node=="function"}function isLinkValue(i){return isObject$1(i)&&typeof i.link=="function"}function maybeNodeValue(i){if(isNodeValue(i))return i.node;if(i=`${i}`.trim().toLowerCase(),!!i.startsWith("node:")){switch(i){case"node:name":return nodeName;case"node:path":return nodePath;case"node:internal":return nodeInternal;case"node:external":return nodeExternal;case"node:depth":return nodeDepth;case"node:height":return nodeHeight}throw new Error(`invalid node value: ${i}`)}}function maybeLinkValue(i){if(isNodeValue(i))return i.node;if(isLinkValue(i))return i.link;if(i=`${i}`.trim().toLowerCase(),!(!i.startsWith("node:")&&!i.startsWith("parent:"))){switch(i){case"parent:name":return parentValue(nodeName);case"parent:path":return parentValue(nodePath);case"parent:depth":return parentValue(nodeDepth);case"parent:height":return parentValue(nodeHeight);case"node:name":return nodeName;case"node:path":return nodePath;case"node:internal":return nodeInternal;case"node:external":return nodeExternal;case"node:depth":return nodeDepth;case"node:height":return nodeHeight}throw new Error(`invalid link value: ${i}`)}}function nodePath(i){return i.id}function nodeName(i){return nameof(i.id)}function nodeDepth(i){return i.depth}function nodeHeight(i){return i.height}function nodeInternal(i){return!!i.children}function nodeExternal(i){return!i.children}function parentValue(i){return(e,o)=>o==null?void 0:i(o)}function nameof(i){let e=i.length;for(;--e>0&&!slash(i,e););return slashUnescape(i.slice(e+1))}function slash(i,e){if(i[e]==="/"){let o=0;for(;e>0&&i[--e]==="\\";)++o;if(!(o&1))return!0}return!1}const output_setValues=2,output_evaluate=3,output_values=4;function treeOutputs(i,e){const o=[];for(const d in i){const h=i[d],g=e(h);g!==void 0&&o.push([d,...column(h),g])}return o}function tree(i,{fill:e,stroke:o,strokeWidth:d,strokeOpacity:h,strokeLinejoin:g,strokeLinecap:b,strokeMiterlimit:$,strokeDasharray:j,strokeDashoffset:et,marker:tt,markerStart:nt=tt,markerEnd:rt=tt,dot:ot=isNoneish(nt)&&isNoneish(rt),text:st="node:name",textStroke:bt="white",title:vt="node:path",dx:at,dy:ut,textAnchor:$t,treeLayout:wt=Tree,textLayout:At=wt===Tree||wt===Cluster?"mirrored":"normal",tip:xt,...Rt}={}){if(at===void 0&&(at=maybeTreeAnchor(Rt.treeAnchor).dx),$t!==void 0)throw new Error("textAnchor is not a configurable tree option");At=keyword(At,"textLayout",["mirrored","normal"]);function Ot(kt){return text$1(i,treeNode({treeLayout:wt,text:st,fill:e===void 0?"currentColor":e,stroke:bt,dx:at,dy:ut,title:vt,...kt,...Rt}))}return marks$1(link$1(i,treeLink({treeLayout:wt,markerStart:nt,markerEnd:rt,stroke:o!==void 0?o:e===void 0?"node:internal":e,strokeWidth:d,strokeOpacity:h,strokeLinejoin:g,strokeLinecap:b,strokeMiterlimit:$,strokeDasharray:j,strokeDashoffset:et,...Rt})),ot?dot$1(i,treeNode({treeLayout:wt,fill:e===void 0?"node:internal":e,title:vt,tip:xt,...Rt})):null,st!=null?At==="mirrored"?[Ot({textAnchor:"start",treeFilter:"node:external"}),Ot({textAnchor:"end",treeFilter:"node:internal",dx:-at})]:Ot():null)}function cluster(i,e){return tree(i,{...e,treeLayout:Cluster})}function centroid({geometry:i=identity$1,...e}={}){return initializer({...e,x:null,y:null},(o,d,h,g,b,{projection:$})=>{const j=valueof(o,i),et=j.length,tt=new Float64Array(et),nt=new Float64Array(et),rt=geoPath($);for(let ot=0;ot<et;++ot)[tt[ot],nt[ot]]=rt.centroid(j[ot]);return{data:o,facets:d,channels:{x:{value:tt,scale:$==null?"x":null,source:null},y:{value:nt,scale:$==null?"y":null,source:null}}}})}function geoCentroid({geometry:i=identity$1,...e}={}){let o;return{...e,x:{transform:d=>Float64Array.from(o=valueof(valueof(d,i),GeoCentroid),([h])=>h)},y:{transform:()=>Float64Array.from(o,([,d])=>d)}}}function ge(i,e,o,d,h){for(var g=h+1;d<=h;){var b=d+h>>>1,$=i[b],j=o!==void 0?o($,e):$-e;j>=0?(g=b,h=b-1):d=b+1}return g}function gt(i,e,o,d,h){for(var g=h+1;d<=h;){var b=d+h>>>1,$=i[b],j=o!==void 0?o($,e):$-e;j>0?(g=b,h=b-1):d=b+1}return g}function lt(i,e,o,d,h){for(var g=d-1;d<=h;){var b=d+h>>>1,$=i[b],j=o!==void 0?o($,e):$-e;j<0?(g=b,d=b+1):h=b-1}return g}function le(i,e,o,d,h){for(var g=d-1;d<=h;){var b=d+h>>>1,$=i[b],j=o!==void 0?o($,e):$-e;j<=0?(g=b,d=b+1):h=b-1}return g}function eq(i,e,o,d,h){for(;d<=h;){var g=d+h>>>1,b=i[g],$=o!==void 0?o(b,e):b-e;if($===0)return g;$<=0?d=g+1:h=g-1}return-1}function norm(i,e,o,d,h,g){return typeof o=="function"?g(i,e,o,d===void 0?0:d|0,h===void 0?i.length-1:h|0):g(i,e,void 0,o===void 0?0:o|0,d===void 0?i.length-1:d|0)}var searchBounds={ge:function(i,e,o,d,h){return norm(i,e,o,d,h,ge)},gt:function(i,e,o,d,h){return norm(i,e,o,d,h,gt)},lt:function(i,e,o,d,h){return norm(i,e,o,d,h,lt)},le:function(i,e,o,d,h){return norm(i,e,o,d,h,le)},eq:function(i,e,o,d,h){return norm(i,e,o,d,h,eq)}},bounds=searchBounds,NOT_FOUND=0,SUCCESS=1,EMPTY=2,intervalTree=createWrapper;function IntervalTreeNode(i,e,o,d,h){this.mid=i,this.left=e,this.right=o,this.leftPoints=d,this.rightPoints=h,this.count=(e?e.count:0)+(o?o.count:0)+d.length}var proto$1=IntervalTreeNode.prototype;function copy$1(i,e){i.mid=e.mid,i.left=e.left,i.right=e.right,i.leftPoints=e.leftPoints,i.rightPoints=e.rightPoints,i.count=e.count}function rebuild(i,e){var o=createIntervalTree(e);i.mid=o.mid,i.left=o.left,i.right=o.right,i.leftPoints=o.leftPoints,i.rightPoints=o.rightPoints,i.count=o.count}function rebuildWithInterval(i,e){var o=i.intervals([]);o.push(e),rebuild(i,o)}function rebuildWithoutInterval(i,e){var o=i.intervals([]),d=o.indexOf(e);return d<0?NOT_FOUND:(o.splice(d,1),rebuild(i,o),SUCCESS)}proto$1.intervals=function(i){return i.push.apply(i,this.leftPoints),this.left&&this.left.intervals(i),this.right&&this.right.intervals(i),i};proto$1.insert=function(i){var e=this.count-this.leftPoints.length;if(this.count+=1,i[1]<this.mid)this.left?4*(this.left.count+1)>3*(e+1)?rebuildWithInterval(this,i):this.left.insert(i):this.left=createIntervalTree([i]);else if(i[0]>this.mid)this.right?4*(this.right.count+1)>3*(e+1)?rebuildWithInterval(this,i):this.right.insert(i):this.right=createIntervalTree([i]);else{var o=bounds.ge(this.leftPoints,i,compareBegin),d=bounds.ge(this.rightPoints,i,compareEnd);this.leftPoints.splice(o,0,i),this.rightPoints.splice(d,0,i)}};proto$1.remove=function(i){var e=this.count-this.leftPoints;if(i[1]<this.mid){if(!this.left)return NOT_FOUND;var o=this.right?this.right.count:0;if(4*o>3*(e-1))return rebuildWithoutInterval(this,i);var d=this.left.remove(i);return d===EMPTY?(this.left=null,this.count-=1,SUCCESS):(d===SUCCESS&&(this.count-=1),d)}else if(i[0]>this.mid){if(!this.right)return NOT_FOUND;var h=this.left?this.left.count:0;if(4*h>3*(e-1))return rebuildWithoutInterval(this,i);var d=this.right.remove(i);return d===EMPTY?(this.right=null,this.count-=1,SUCCESS):(d===SUCCESS&&(this.count-=1),d)}else{if(this.count===1)return this.leftPoints[0]===i?EMPTY:NOT_FOUND;if(this.leftPoints.length===1&&this.leftPoints[0]===i){if(this.left&&this.right){for(var g=this,b=this.left;b.right;)g=b,b=b.right;if(g===this)b.right=this.right;else{var $=this.left,d=this.right;g.count-=b.count,g.right=b.left,b.left=$,b.right=d}copy$1(this,b),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?copy$1(this,this.left):copy$1(this,this.right);return SUCCESS}for(var $=bounds.ge(this.leftPoints,i,compareBegin);$<this.leftPoints.length&&this.leftPoints[$][0]===i[0];++$)if(this.leftPoints[$]===i){this.count-=1,this.leftPoints.splice($,1);for(var d=bounds.ge(this.rightPoints,i,compareEnd);d<this.rightPoints.length&&this.rightPoints[d][1]===i[1];++d)if(this.rightPoints[d]===i)return this.rightPoints.splice(d,1),SUCCESS}return NOT_FOUND}};function reportLeftRange(i,e,o){for(var d=0;d<i.length&&i[d][0]<=e;++d){var h=o(i[d]);if(h)return h}}function reportRightRange(i,e,o){for(var d=i.length-1;d>=0&&i[d][1]>=e;--d){var h=o(i[d]);if(h)return h}}function reportRange(i,e){for(var o=0;o<i.length;++o){var d=e(i[o]);if(d)return d}}proto$1.queryPoint=function(i,e){if(i<this.mid){if(this.left){var o=this.left.queryPoint(i,e);if(o)return o}return reportLeftRange(this.leftPoints,i,e)}else if(i>this.mid){if(this.right){var o=this.right.queryPoint(i,e);if(o)return o}return reportRightRange(this.rightPoints,i,e)}else return reportRange(this.leftPoints,e)};proto$1.queryInterval=function(i,e,o){if(i<this.mid&&this.left){var d=this.left.queryInterval(i,e,o);if(d)return d}if(e>this.mid&&this.right){var d=this.right.queryInterval(i,e,o);if(d)return d}return e<this.mid?reportLeftRange(this.leftPoints,e,o):i>this.mid?reportRightRange(this.rightPoints,i,o):reportRange(this.leftPoints,o)};function compareNumbers(i,e){return i-e}function compareBegin(i,e){var o=i[0]-e[0];return o||i[1]-e[1]}function compareEnd(i,e){var o=i[1]-e[1];return o||i[0]-e[0]}function createIntervalTree(i){if(i.length===0)return null;for(var e=[],o=0;o<i.length;++o)e.push(i[o][0],i[o][1]);e.sort(compareNumbers);for(var d=e[e.length>>1],h=[],g=[],b=[],o=0;o<i.length;++o){var $=i[o];$[1]<d?h.push($):d<$[0]?g.push($):b.push($)}var j=b,et=b.slice();return j.sort(compareBegin),et.sort(compareEnd),new IntervalTreeNode(d,createIntervalTree(h),createIntervalTree(g),j,et)}function IntervalTree(i){this.root=i}var tproto=IntervalTree.prototype;tproto.insert=function(i){this.root?this.root.insert(i):this.root=new IntervalTreeNode(i[0],null,null,[i],[i])};tproto.remove=function(i){if(this.root){var e=this.root.remove(i);return e===EMPTY&&(this.root=null),e!==NOT_FOUND}return!1};tproto.queryPoint=function(i,e){if(this.root)return this.root.queryPoint(i,e)};tproto.queryInterval=function(i,e,o){if(i<=e&&this.root)return this.root.queryInterval(i,e,o)};Object.defineProperty(tproto,"count",{get:function(){return this.root?this.root.count:0}});Object.defineProperty(tproto,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}});function createWrapper(i){return!i||i.length===0?new IntervalTree(null):new IntervalTree(createIntervalTree(i))}const IntervalTree$1=getDefaultExportFromCjs(intervalTree),anchorXLeft=({marginLeft:i})=>[1,i],anchorXRight=({width:i,marginRight:e})=>[-1,i-e],anchorXMiddle=({width:i,marginLeft:e,marginRight:o})=>[0,(e+i-o)/2],anchorYTop=({marginTop:i})=>[1,i],anchorYBottom=({height:i,marginBottom:e})=>[-1,i-e],anchorYMiddle=({height:i,marginTop:e,marginBottom:o})=>[0,(e+i-o)/2];function maybeAnchor(i){return typeof i=="string"?{anchor:i}:i}function dodgeX(i={},e={}){arguments.length===1&&([i,e]=mergeOptions(i));let{anchor:o="left",padding:d=1,r:h=e.r}=maybeAnchor(i);switch(`${o}`.toLowerCase()){case"left":o=anchorXLeft;break;case"right":o=anchorXRight;break;case"middle":o=anchorXMiddle;break;default:throw new Error(`unknown dodge anchor: ${o}`)}return dodge("x","y",o,number$1(d),h,e)}function dodgeY(i={},e={}){arguments.length===1&&([i,e]=mergeOptions(i));let{anchor:o="bottom",padding:d=1,r:h=e.r}=maybeAnchor(i);switch(`${o}`.toLowerCase()){case"top":o=anchorYTop;break;case"bottom":o=anchorYBottom;break;case"middle":o=anchorYMiddle;break;default:throw new Error(`unknown dodge anchor: ${o}`)}return dodge("y","x",o,number$1(d),h,e)}function mergeOptions(i){const{anchor:e,padding:o,...d}=i,{r:h}=d;return[{anchor:e,padding:o,r:h},d]}function dodge(i,e,o,d,h,g){if(h!=null&&typeof h!="number"){let{channels:b,sort:$,reverse:j}=g;b=maybeNamed(b),(b==null?void 0:b.r)===void 0&&(g={...g,channels:{...b,r:{value:h,scale:"r"}}}),$===void 0&&j===void 0&&(g.sort={channel:"-r"})}return initializer(g,function(b,$,j,et,tt,nt){let{[e]:rt,r:ot}=j;if(!j[e])throw new Error(`missing channel: ${e}`);({[e]:rt}=applyPosition(j,et,nt));const st=ot?void 0:h!==void 0?number$1(h):this.r!==void 0?this.r:3;ot&&(ot=valueof(ot.value,et[ot.scale]||identity$1,Float64Array));let[bt,vt]=o(tt);const at=bt?compareAscending:compareSymmetric,ut=new Float64Array(rt.length),$t=ot?wt=>ot[wt]:()=>st;for(let wt of $){const At=IntervalTree$1();wt=wt.filter(ot?Rt=>finite$1(rt[Rt])&&positive(ot[Rt]):Rt=>finite$1(rt[Rt]));const xt=new Float64Array(2*wt.length+2);for(const Rt of wt){const Ot=$t(Rt),kt=bt?Ot+d:0,Mt=rt[Rt]-Ot,Bt=rt[Rt]+Ot;let jt=2;At.queryInterval(Mt-d,Bt+d,([,,Nt])=>{const Ct=ut[Nt]-kt,Ft=rt[Rt]-rt[Nt],Vt=d+(ot?ot[Rt]+ot[Nt]:2*st),Ut=Math.sqrt(Vt*Vt-Ft*Ft);xt[jt++]=Ct-Ut,xt[jt++]=Ct+Ut});let zt=xt.slice(0,jt);bt&&(zt=zt.filter(Nt=>Nt>=0));e:for(const Nt of zt.sort(at)){for(let Ct=0;Ct<jt;Ct+=2)if(xt[Ct]+1e-6<Nt&&Nt<xt[Ct+1]-1e-6)continue e;ut[Rt]=Nt+kt;break}At.insert([Mt,Bt,Rt])}}bt||(bt=1);for(const wt of $)for(const At of wt)ut[At]=ut[At]*bt+vt;return{data:b,facets:$,channels:{[i]:{value:ut,source:null},[e]:{value:rt,source:j[e]},...ot&&{r:{value:ot,source:j.r}}}}})}function compareSymmetric(i,e){return Math.abs(i)-Math.abs(e)}function compareAscending(i,e){return i-e}function normalizeX(i,e){return arguments.length===1&&({basis:i,...e}=i),mapX(normalize(i),e)}function normalizeY(i,e){return arguments.length===1&&({basis:i,...e}=i),mapY(normalize(i),e)}function normalize(i){if(i===void 0)return normalizeFirst;if(typeof i=="function")return normalizeBasis(taker(i));if(/^p\d{2}$/i.test(i))return normalizeAccessor(percentile(i));switch(`${i}`.toLowerCase()){case"deviation":return normalizeDeviation;case"first":return normalizeFirst;case"last":return normalizeLast;case"max":return normalizeMax;case"mean":return normalizeMean;case"median":return normalizeMedian;case"min":return normalizeMin;case"sum":return normalizeSum;case"extent":return normalizeExtent}throw new Error(`invalid basis: ${i}`)}function normalizeBasis(i){return{mapIndex(e,o,d){const h=+i(e,o);for(const g of e)d[g]=o[g]===null?NaN:o[g]/h}}}function normalizeAccessor(i){return normalizeBasis((e,o)=>i(e,d=>o[d]))}const normalizeExtent={mapIndex(i,e,o){const[d,h]=extent$2(i,b=>e[b]),g=h-d;for(const b of i)o[b]=e[b]===null?NaN:(e[b]-d)/g}},normalizeFirst=normalizeBasis((i,e)=>{for(let o=0;o<i.length;++o){const d=e[i[o]];if(defined(d))return d}}),normalizeLast=normalizeBasis((i,e)=>{for(let o=i.length-1;o>=0;--o){const d=e[i[o]];if(defined(d))return d}}),normalizeDeviation={mapIndex(i,e,o){const d=mean(i,g=>e[g]),h=deviation(i,g=>e[g]);for(const g of i)o[g]=e[g]===null?NaN:h?(e[g]-d)/h:0}},normalizeMax=normalizeAccessor(max$1),normalizeMean=normalizeAccessor(mean),normalizeMedian=normalizeAccessor(median),normalizeMin=normalizeAccessor(min$2),normalizeSum=normalizeAccessor(sum$2);function select(i,e={}){if(typeof i=="string")switch(i.toLowerCase()){case"first":return selectFirst(e);case"last":return selectLast(e)}if(typeof i=="function")return selectChannel(null,i,e);let o,d;for(o in i){if(d!==void 0)throw new Error("ambiguous selector; multiple inputs");d=maybeSelector(i[o])}if(d===void 0)throw new Error(`invalid selector: ${i}`);return selectChannel(o,d,e)}function maybeSelector(i){if(typeof i=="function")return i;switch(`${i}`.toLowerCase()){case"min":return selectorMin;case"max":return selectorMax}throw new Error(`unknown selector: ${i}`)}function selectFirst(i){return selectChannel(null,selectorFirst,i)}function selectLast(i){return selectChannel(null,selectorLast,i)}function selectMinX(i){return selectChannel("x",selectorMin,i)}function selectMinY(i){return selectChannel("y",selectorMin,i)}function selectMaxX(i){return selectChannel("x",selectorMax,i)}function selectMaxY(i){return selectChannel("y",selectorMax,i)}function*selectorFirst(i){yield i[0]}function*selectorLast(i){yield i[i.length-1]}function*selectorMin(i,e){yield least(i,o=>e[o])}function*selectorMax(i,e){yield greatest(i,o=>e[o])}function selectChannel(i,e,o){if(i!=null){if(o[i]==null)throw new Error(`missing channel: ${i}`);i=o[i]}const d=maybeZ(o);return basic(o,(h,g)=>{const b=valueof(h,d),$=valueof(h,i),j=[];for(const et of g){const tt=[];for(const nt of b?group$1(et,rt=>b[rt]).values():[et])for(const rt of e(nt,$))tt.push(rt);j.push(tt)}return{data:h,facets:j}})}const Plot$1=Object.freeze(Object.defineProperty({__proto__:null,Area,Arrow,BarX,BarY,Cell,Contour,Density,Dot,Frame,Geo,Hexgrid,Image,Line,Link,Mark:Mark$1,Raster,Rect,RuleX,RuleY,Text,TickX,TickY,Tip,Vector:Vector$1,area:area$1,areaX:areaX$1,areaY:areaY$1,arrow:arrow$1,auto,autoSpec,axisFx:axisFx$1,axisFy:axisFy$1,axisX:axisX$1,axisY:axisY$1,barX:barX$1,barY:barY$1,bin,binX,binY,bollinger,bollingerX,bollingerY,boxX,boxY,cell:cell$1,cellX:cellX$1,cellY:cellY$1,centroid,circle:circle$1,cluster,column,contour:contour$1,crosshair,crosshairX,crosshairY,delaunayLink:delaunayLink$1,delaunayMesh:delaunayMesh$1,density:density$1,dodgeX,dodgeY,dot:dot$1,dotX:dotX$1,dotY:dotY$1,filter,formatIsoDate,formatMonth,formatWeekday,frame:frame$1,geo:geo$1,geoCentroid,graticule:graticule$1,gridFx:gridFx$1,gridFy:gridFy$1,gridX:gridX$1,gridY:gridY$1,group,groupX,groupY,groupZ:groupZ$1,hexagon:hexagon$1,hexbin:hexbin$1,hexgrid:hexgrid$1,hull:hull$1,identity:identity$1,image:image$1,indexOf,initializer,interpolateNearest,interpolateNone,interpolatorBarycentric,interpolatorRandomWalk,legend:legend$1,line:line$1,lineX:lineX$1,lineY:lineY$1,linearRegressionX,linearRegressionY,link:link$1,map,mapX,mapY,marks:marks$1,normalize,normalizeX,normalizeY,plot:plot$1,pointer,pointerX,pointerY,raster:raster$2,rect:rect$1,rectX:rectX$1,rectY:rectY$1,reverse,ruleX:ruleX$1,ruleY:ruleY$1,scale,select,selectFirst,selectLast,selectMaxX,selectMaxY,selectMinX,selectMinY,shuffle,sort,sphere:sphere$1,spike:spike$1,stackX,stackX1,stackX2,stackY,stackY1,stackY2,text:text$1,textX:textX$1,textY:textY$1,tickX:tickX$1,tickY:tickY$1,tip,transform:basic,tree,treeLink,treeNode,valueof,vector:vector$1,vectorX:vectorX$1,vectorY:vectorY$1,voronoi:voronoi$1,voronoiMesh:voronoiMesh$1,window:window$1,windowX,windowY},Symbol.toStringTag,{value:"Module"})),attributeMap=new Map([["style","style"],["width","width"],["height","height"],["margin","margin"],["marginLeft","marginLeft"],["marginRight","marginRight"],["marginTop","marginTop"],["marginBottom","marginBottom"],["align","align"],["aspectRatio","aspectRatio"],["axis","axis"],["inset","inset"],["grid","grid"],["label","label"],["padding","padding"],["round","round"],["xScale","x.type"],["xDomain","x.domain"],["xRange","x.range"],["xNice","x.nice"],["xInset","x.inset"],["xInsetLeft","x.insetLeft"],["xInsetRight","x.insetRight"],["xClamp","x.clamp"],["xRound","x.round"],["xAlign","x.align"],["xPadding","x.padding"],["xPaddingInner","x.paddingInner"],["xPaddingOuter","x.paddingOuter"],["xAxis","x.axis"],["xTicks","x.ticks"],["xTickSize","x.tickSize"],["xTickSpacing","x.tickSpacing"],["xTickPadding","x.tickPadding"],["xTickFormat","x.tickFormat"],["xTickRotate","x.tickRotate"],["xGrid","x.grid"],["xLine","x.line"],["xLabel","x.label"],["xLabelAnchor","x.labelAnchor"],["xLabelOffset","x.labelOffset"],["xFontVariant","x.fontVariant"],["xAriaLabel","x.ariaLabel"],["xAriaDescription","x.ariaDescription"],["xReverse","x.reverse"],["xZero","x.zero"],["yScale","y.type"],["yDomain","y.domain"],["yRange","y.range"],["yNice","y.nice"],["yInset","y.inset"],["yInsetTop","y.insetTop"],["yInsetBottom","y.insetBottom"],["yClamp","y.clamp"],["yRound","y.round"],["yAlign","y.align"],["yPadding","y.padding"],["yPaddingInner","y.paddingInner"],["yPaddingOuter","y.paddingOuter"],["yAxis","y.axis"],["yTicks","y.ticks"],["yTickSize","y.tickSize"],["yTickSpacing","y.tickSpacing"],["yTickPadding","y.tickPadding"],["yTickFormat","y.tickFormat"],["yTickRotate","y.tickRotate"],["yGrid","y.grid"],["yLine","y.line"],["yLabel","y.label"],["yLabelAnchor","y.labelAnchor"],["yLabelOffset","y.labelOffset"],["yFontVariant","y.fontVariant"],["yAriaLabel","y.ariaLabel"],["yAriaDescription","y.ariaDescription"],["yReverse","y.reverse"],["yZero","y.zero"],["facetMargin","facet.margin"],["facetMarginTop","facet.marginTop"],["facetMarginBottom","facet.marginBottom"],["facetMarginLeft","facet.marginLeft"],["facetMarginRight","facet.marginRight"],["facetGrid","facet.grid"],["facetLabel","facet.label"],["fxDomain","fx.domain"],["fxRange","fx.range"],["fxNice","fx.nice"],["fxInset","fx.inset"],["fxInsetLeft","fx.insetLeft"],["fxInsetRight","fx.insetRight"],["fxRound","fx.round"],["fxAlign","fx.align"],["fxPadding","fx.padding"],["fxPaddingInner","fx.paddingInner"],["fxPaddingOuter","fx.paddingOuter"],["fxAxis","fx.axis"],["fxTicks","fx.ticks"],["fxTickSize","fx.tickSize"],["fxTickSpacing","fx.tickSpacing"],["fxTickPadding","fx.tickPadding"],["fxTickFormat","fx.tickFormat"],["fxTickRotate","fx.tickRotate"],["fxGrid","fx.grid"],["fxLine","fx.line"],["fxLabel","fx.label"],["fxLabelAnchor","fx.labelAnchor"],["fxLabelOffset","fx.labelOffset"],["fxFontVariant","fx.fontVariant"],["fxAriaLabel","fx.ariaLabel"],["fxAriaDescription","fx.ariaDescription"],["fxReverse","fx.reverse"],["fyDomain","fy.domain"],["fyRange","fy.range"],["fyNice","fy.mice"],["fyInset","fy,inset"],["fyInsetTop","fy.insetTop"],["fyInsetBottom","fy.insetBottom"],["fyRound","fy.round"],["fyAlign","fy.align"],["fyPadding","fy.padding"],["fyPaddingInner","fy.paddingInner"],["fyPaddingOuter","fy.paddingOuter"],["fyAxis","fy.axis"],["fyTicks","fy.ticks"],["fyTickSize","fy.tickSize"],["fyTickSpacing","fy.tickSpacing"],["fyTickPadding","fy.tickPadding"],["fyTickFormat","fy.tickFormat"],["fyTickRotate","fy.tickRotate"],["fyGrid","fy.grid"],["fyLine","fy.line"],["fyLabel","fy.label"],["fyLabelAnchor","fy.labelAnchor"],["fyLabelOffset","fy.labelOffset"],["fyFontVariant","fy.fontVariant"],["fyAriaLabel","fy.ariaLabel"],["fyAriaDescription","fy.ariaDescription"],["fyReverse","fy.reverse"],["colorScale","color.type"],["colorDomain","color.domain"],["colorRange","color.range"],["colorClamp","color.clamp"],["colorNice","color.nice"],["colorScheme","color.scheme"],["colorInterpolate","color.interpolate"],["colorPivot","color.pivot"],["colorSymmetric","color.symmetric"],["colorLabel","color.label"],["colorReverse","color.reverse"],["colorZero","color.zero"],["colorTickFormat","color.tickFormat"],["opacityScale","opacity.type"],["opacityDomain","opacity.domain"],["opacityRange","opacity.range"],["opacityClamp","opacity.clamp"],["opacityNice","opacity.nice"],["opacityLabel","opacity.label"],["opacityReverse","opacity.reverse"],["opacityZero","opacity.zero"],["opacityTickFormat","opacity.tickFormat"],["rScale","r.type"],["rDomain","r.domain"],["rRange","r.range"],["rClamp","r.clamp"],["rNice","r.nice"],["rZero","r.zero"],["lengthScale","length.type"],["lengthDomain","length.domain"],["lengthRange","length.range"],["lengthClamp","length.clamp"],["lengthNice","length.nice"],["lengthZero","length.zero"],["projectionType","projection.type"],["projectionParallels","projection.parallels"],["projectionPrecision","projection.precision"],["projectionRotate","projection.rotate"],["projectionDomain","projection.domain"],["projectionInset","projection.inset"],["projectionInsetLeft","projection.insetLeft"],["projectionInsetRight","projection.insetRight"],["projectionInsetTop","projection.insetTop"],["projectionInsetBottom","projection.insetBottom"],["projectionClip","projection.clip"]]),OPTIONS_ONLY_MARKS=new Set(["frame","hexgrid","sphere","graticule"]);function setProperty(i,e,o){for(let d=0;d<e.length;++d){const h=e[d];d===e.length-1?i[h]=o:i=i[h]||(i[h]={})}}async function plotRenderer(i){const e={marks:[]},o=[],{attributes:d,marks:h}=i;for(const $ in d){const j=attributeMap.get($);if(j==null)throw new Error(`Unrecognized plot attribute: ${$}`);const et=d[$];typeof et=="symbol"?o.push($):et!==void 0&&setProperty(e,j.split("."),et)}const g=[];for(const $ of h)for(const{type:j,data:et,options:tt}of $.plotSpecs())OPTIONS_ONLY_MARKS.has(j)?e.marks.push(Plot$1[j](tt)):e.marks.push(Plot$1[j](et,tt)),g.push($.index);inferLabels(e,i);const b=plot$1(e);annotatePlot(b,g),setSymbolAttributes(i,b,d,o);for(const $ of i.interactors)await $.init(b);return b}function setSymbolAttributes(i,e,o,d){d.forEach(h=>{const g=o[h];if(g===Fixed){if(!h.endsWith("Domain"))throw new Error(`Unsupported fixed attribute: ${h}`);const b=h.slice(0,-6),$=e.scale(b);$!=null&&$.domain&&i.setAttribute(h,o[`${b}Reverse`]?$.domain.slice().reverse():$.domain)}else throw new Error(`Unrecognized symbol: ${g}`)})}function inferLabels(i,e){const{marks:o}=e;inferLabel("x",i,o,["x","x1","x2"]),inferLabel("y",i,o,["y","y1","y2"]),inferLabel("fx",i,o),inferLabel("fy",i,o)}function inferLabel(i,e,o,d=[i]){const h=e[i]||{};if(h.axis===null||h.label!==void 0)return;const g=o.map(tt=>{var nt;return(nt=tt.channelField(d))==null?void 0:nt.field});if(g.every(tt=>tt==null))return;let b,$,j;for(let tt=0;tt<g.length;++tt){const{column:nt,label:rt}=g[tt]||{};nt===void 0&&rt===void 0||(b===void 0&&$===void 0?(b=nt,$=rt,j=getType(o[tt].data,d)||"number"):$!==rt?$=void 0:b!==nt&&(b=void 0))}let et=$||b;if(et!==void 0){if((j==="number"||j==="date")&&(i==="x"||i==="y")){h.percent&&(et=`${et} (%)`);const tt=(i==="x"?1:-1)*(h.reverse?-1:1);i==="x"||h.labelAnchor==="center"?et=i==="x"==tt<0?`← ${et}`:`${et} →`:et=`${tt<0?"↑ ":"↓ "}${et}`}e[i]={...h,label:et}}}function annotatePlot(i,e){const o=i.querySelectorAll('g[aria-label="facet"]');if(o.length)for(const d of o)annotateMarks(d,e);else annotateMarks(i,e)}function annotateMarks(i,e){let o=-1;for(const d of i.children){const h=d.getAttribute("aria-label")||"";d.nodeName==="style"||h.includes("-axis")||h.includes("-grid")||d.setAttribute("data-index",e[++o])}}function getType(i,e){for(const o of i)for(let d=0;d<e.length;++d){const h=o[e[d]];if(h!=null)return h instanceof Date?"date":typeof h}}const DEFAULT_ATTRIBUTES={width:640,marginLeft:40,marginRight:20,marginTop:20,marginBottom:30};class Plot{constructor(e){this.attributes={...DEFAULT_ATTRIBUTES},this.listeners=null,this.interactors=[],this.legends=[],this.marks=[],this.markset=null,this.element=e||document.createElement("div"),this.element.setAttribute("class","plot"),this.element.style.display="flex",this.element.value=this,this.params=new Map,this.synch=synchronizer()}margins(){return{left:this.getAttribute("marginLeft"),top:this.getAttribute("marginTop"),bottom:this.getAttribute("marginBottom"),right:this.getAttribute("marginRight")}}innerWidth(){const{left:e,right:o}=this.margins();return this.getAttribute("width")-e-o}innerHeight(){const{top:e,bottom:o}=this.margins();return this.getAttribute("height")-e-o}pending(e){this.synch.pending(e)}update(e){return this.synch.ready(e)&&!this.pendingRender&&(this.pendingRender=!0,requestAnimationFrame(()=>this.render())),this.synch.promise}async render(){this.pendingRender=!1;const e=await plotRenderer(this),o=this.legends.flatMap(({legend:d,include:h})=>{const g=d.init(e);return h?g:[]});this.element.replaceChildren(e,...o),this.synch.resolve()}getAttribute(e){return this.attributes[e]}setAttribute(e,o,d){var h,g;return distinct(this.attributes[e],o)?(o===void 0?delete this.attributes[e]:this.attributes[e]=o,d!=null&&d.silent||(g=(h=this.listeners)==null?void 0:h.get(e))==null||g.forEach(b=>b(e,o)),!0):!1}addAttributeListener(e,o){const d=this.listeners||(this.listeners=new Map);return d.has(e)||d.set(e,new Set),d.get(e).add(o),this}removeAttributeListener(e,o){var d,h;return(h=(d=this.listeners)==null?void 0:d.get(e))==null?void 0:h.delete(o)}addParams(e,o){const{params:d}=this;for(const h of o)d.has(h)?d.get(h).push(e):(d.set(h,[e]),h.addEventListener("value",()=>Promise.allSettled(d.get(h).map(g=>g.requestQuery()))))}addMark(e){return e.setPlot(this,this.marks.length),this.marks.push(e),this.markset=null,this}get markSet(){return this.markset||(this.markset=new Set(this.marks))}addInteractor(e){return this.interactors.push(e),this}addLegend(e,o=!0){e.setPlot(this),this.legends.push({legend:e,include:o})}}function plot(...i){const e=new Plot;return i.flat().forEach(o=>o(e)),e.marks.forEach(o=>coordinator().connect(o)),e.element}class NamedPlots extends Map{request(e,o){if(this.has(e))o(this.get(e));else{const d=this.waiting||(this.waiting=new Map),h=d.get(e)||[];d.set(e,h.concat(o))}}set(e,o){this.has(e)&&console.warn(`Overwriting named plot "${e}".`);const{waiting:d}=this;return d!=null&&d.has(e)&&(d.get(e).forEach(h=>h(o)),d.delete(e)),super.set(e,o)}}const namedPlots=new NamedPlots;function name(i){return e=>namedPlots.set(i,e)}function setAttribute(i,e,o){isParam(o)?(o.addEventListener("value",d=>{i.setAttribute(e,d),i.update()}),o.value!==void 0&&i.setAttribute(e,o.value)):i.setAttribute(e,o)}function attribute(i,e){return o=>{setAttribute(o,i,e)}}function attributes(i){return e=>{for(const[o,d]of Object.entries(i))setAttribute(e,o,d)}}function margins(i){const{top:e,bottom:o,left:d,right:h}=i,g={};return e!==void 0&&(g.marginTop=e),o!==void 0&&(g.marginBottom=o),d!==void 0&&(g.marginLeft=d),h!==void 0&&(g.marginRight=h),attributes(g)}function xyDomain(i){return attributes({xDomain:i,yDomain:i})}const attrf=i=>e=>attribute(i,e),style=attrf("style"),width=attrf("width"),height=attrf("height"),margin=attrf("margin"),marginLeft=attrf("marginLeft"),marginRight=attrf("marginRight"),marginTop=attrf("marginTop"),marginBottom=attrf("marginBottom"),align=attrf("align"),aspectRatio=attrf("aspectRatio"),axis=attrf("axis"),inset=attrf("inset"),grid=attrf("grid"),label=attrf("label"),padding=attrf("padding"),round=attrf("round"),xScale=attrf("xScale"),xDomain=attrf("xDomain"),xRange=attrf("xRange"),xNice=attrf("xNice"),xInset=attrf("xInset"),xInsetLeft=attrf("xInsetLeft"),xInsetRight=attrf("xInsetRight"),xClamp=attrf("xClamp"),xRound=attrf("xRound"),xAlign=attrf("xAlign"),xPadding=attrf("xPadding"),xPaddingInner=attrf("xPaddingInner"),xPaddingOuter=attrf("xPaddingOuter"),xAxis=attrf("xAxis"),xTicks=attrf("xTicks"),xTickSize=attrf("xTickSize"),xTickSpacing=attrf("xTickSpacing"),xTickPadding=attrf("xTickPadding"),xTickFormat=attrf("xTickFormat"),xTickRotate=attrf("xTickRotate"),xGrid=attrf("xGrid"),xLine=attrf("xLine"),xLabel=attrf("xLabel"),xLabelAnchor=attrf("xLabelAnchor"),xLabelOffset=attrf("xLabelOffset"),xFontVariant=attrf("xFontVariant"),xAriaLabel=attrf("xAriaLabel"),xAriaDescription=attrf("xAriaDescription"),xReverse=attrf("xReverse"),xZero=attrf("xZero"),yScale=attrf("yScale"),yDomain=attrf("yDomain"),yRange=attrf("yRange"),yNice=attrf("yNice"),yInset=attrf("yInset"),yInsetTop=attrf("yInsetTop"),yInsetBottom=attrf("yInsetBottom"),yClamp=attrf("yClamp"),yRound=attrf("yRound"),yAlign=attrf("yAlign"),yPadding=attrf("yPadding"),yPaddingInner=attrf("yPaddingInner"),yPaddingOuter=attrf("yPaddingOuter"),yAxis=attrf("yAxis"),yTicks=attrf("yTicks"),yTickSize=attrf("yTickSize"),yTickSpacing=attrf("yTickSpacing"),yTickPadding=attrf("yTickPadding"),yTickFormat=attrf("yTickFormat"),yTickRotate=attrf("yTickRotate"),yGrid=attrf("yGrid"),yLine=attrf("yLine"),yLabel=attrf("yLabel"),yLabelAnchor=attrf("yLabelAnchor"),yLabelOffset=attrf("yLabelOffset"),yFontVariant=attrf("yFontVariant"),yAriaLabel=attrf("yAriaLabel"),yAriaDescription=attrf("yAriaDescription"),yReverse=attrf("yReverse"),yZero=attrf("yZero"),facetMargin=attrf("facetMargin"),facetMarginTop=attrf("facetMarginTop"),facetMarginBottom=attrf("facetMarginBottom"),facetMarginLeft=attrf("facetMarginLeft"),facetMarginRight=attrf("facetMarginRight"),facetGrid=attrf("facetGrid"),facetLabel=attrf("facetLabel"),fxDomain=attrf("fxDomain"),fxRange=attrf("fxRange"),fxNice=attrf("fxNice"),fxInset=attrf("fxInset"),fxInsetLeft=attrf("fxInsetLeft"),fxInsetRight=attrf("fxInsetRight"),fxRound=attrf("fxRound"),fxAlign=attrf("fxAlign"),fxPadding=attrf("fxPadding"),fxPaddingInner=attrf("fxPaddingInner"),fxPaddingOuter=attrf("fxPaddingOuter"),fxAxis=attrf("fxAxis"),fxTicks=attrf("fxTicks"),fxTickSize=attrf("fxTickSize"),fxTickSpacing=attrf("fxTickSpacing"),fxTickPadding=attrf("fxTickPadding"),fxTickFormat=attrf("fxTickFormat"),fxTickRotate=attrf("fxTickRotate"),fxGrid=attrf("fxGrid"),fxLine=attrf("fxLine"),fxLabel=attrf("fxLabel"),fxLabelAnchor=attrf("fxLabelAnchor"),fxLabelOffset=attrf("fxLabelOffset"),fxFontVariant=attrf("fxFontVariant"),fxAriaLabel=attrf("fxAriaLabel"),fxAriaDescription=attrf("fxAriaDescription"),fxReverse=attrf("fxReverse"),fyDomain=attrf("fyDomain"),fyRange=attrf("fyRange"),fyNice=attrf("fyNice"),fyInset=attrf("fyInset"),fyInsetTop=attrf("fyInsetTop"),fyInsetBottom=attrf("fyInsetBottom"),fyRound=attrf("fyRound"),fyAlign=attrf("fyAlign"),fyPadding=attrf("fyPadding"),fyPaddingInner=attrf("fyPaddingInner"),fyPaddingOuter=attrf("fyPaddingOuter"),fyAxis=attrf("fyAxis"),fyTicks=attrf("fyTicks"),fyTickSize=attrf("fyTickSize"),fyTickSpacing=attrf("fyTickSpacing"),fyTickPadding=attrf("fyTickPadding"),fyTickFormat=attrf("fyTickFormat"),fyTickRotate=attrf("fyTickRotate"),fyGrid=attrf("fyGrid"),fyLine=attrf("fyLine"),fyLabel=attrf("fyLabel"),fyLabelAnchor=attrf("fyLabelAnchor"),fyLabelOffset=attrf("fyLabelOffset"),fyFontVariant=attrf("fyFontVariant"),fyAriaLabel=attrf("fyAriaLabel"),fyAriaDescription=attrf("fyAriaDescription"),fyReverse=attrf("fyReverse"),colorScale=attrf("colorScale"),colorDomain=attrf("colorDomain"),colorRange=attrf("colorRange"),colorClamp=attrf("colorClamp"),colorNice=attrf("colorNice"),colorScheme=attrf("colorScheme"),colorInterpolate=attrf("colorInterpolate"),colorPivot=attrf("colorPivot"),colorSymmetric=attrf("colorSymmetric"),colorLabel=attrf("colorLabel"),colorReverse=attrf("colorReverse"),colorZero=attrf("colorZero"),colorTickFormat=attrf("colorTickFormat"),opacityScale=attrf("opacityScale"),opacityDomain=attrf("opacityDomain"),opacityRange=attrf("opacityRange"),opacityClamp=attrf("opacityClamp"),opacityNice=attrf("opacityNice"),opacityLabel=attrf("opacityLabel"),opacityReverse=attrf("opacityReverse"),opacityZero=attrf("opacityZero"),opacityTickFormat=attrf("opacityTickFormat"),rScale=attrf("rScale"),rDomain=attrf("rDomain"),rRange=attrf("rRange"),rClamp=attrf("rClamp"),rNice=attrf("rNice"),rZero=attrf("rZero"),lengthScale=attrf("lengthScale"),lengthDomain=attrf("lengthDomain"),lengthRange=attrf("lengthRange"),lengthClamp=attrf("lengthClamp"),lengthNice=attrf("lengthNice"),lengthZero=attrf("lengthZero"),projectionType=attrf("projectionType"),projectionParallels=attrf("projectionParallels"),projectionPrecision=attrf("projectionPrecision"),projectionRotate=attrf("projectionRotate"),projectionDomain=attrf("projectionDomain"),projectionInset=attrf("projectionInset"),projectionInsetLeft=attrf("projectionInsetLeft"),projectionInsetRight=attrf("projectionInsetRight"),projectionInsetTop=attrf("projectionInsetTop"),projectionInsetBottom=attrf("projectionInsetBottom"),projectionClip=attrf("projectionClip"),attributes$1=Object.freeze(Object.defineProperty({__proto__:null,align,aspectRatio,attribute,attributes,axis,colorClamp,colorDomain,colorInterpolate,colorLabel,colorNice,colorPivot,colorRange,colorReverse,colorScale,colorScheme,colorSymmetric,colorTickFormat,colorZero,facetGrid,facetLabel,facetMargin,facetMarginBottom,facetMarginLeft,facetMarginRight,facetMarginTop,fxAlign,fxAriaDescription,fxAriaLabel,fxAxis,fxDomain,fxFontVariant,fxGrid,fxInset,fxInsetLeft,fxInsetRight,fxLabel,fxLabelAnchor,fxLabelOffset,fxLine,fxNice,fxPadding,fxPaddingInner,fxPaddingOuter,fxRange,fxReverse,fxRound,fxTickFormat,fxTickPadding,fxTickRotate,fxTickSize,fxTickSpacing,fxTicks,fyAlign,fyAriaDescription,fyAriaLabel,fyAxis,fyDomain,fyFontVariant,fyGrid,fyInset,fyInsetBottom,fyInsetTop,fyLabel,fyLabelAnchor,fyLabelOffset,fyLine,fyNice,fyPadding,fyPaddingInner,fyPaddingOuter,fyRange,fyReverse,fyRound,fyTickFormat,fyTickPadding,fyTickRotate,fyTickSize,fyTickSpacing,fyTicks,grid,height,inset,label,lengthClamp,lengthDomain,lengthNice,lengthRange,lengthScale,lengthZero,margin,marginBottom,marginLeft,marginRight,marginTop,margins,name,opacityClamp,opacityDomain,opacityLabel,opacityNice,opacityRange,opacityReverse,opacityScale,opacityTickFormat,opacityZero,padding,projectionClip,projectionDomain,projectionInset,projectionInsetBottom,projectionInsetLeft,projectionInsetRight,projectionInsetTop,projectionParallels,projectionPrecision,projectionRotate,projectionType,rClamp,rDomain,rNice,rRange,rScale,rZero,round,style,width,xAlign,xAriaDescription,xAriaLabel,xAxis,xClamp,xDomain,xFontVariant,xGrid,xInset,xInsetLeft,xInsetRight,xLabel,xLabelAnchor,xLabelOffset,xLine,xNice,xPadding,xPaddingInner,xPaddingOuter,xRange,xReverse,xRound,xScale,xTickFormat,xTickPadding,xTickRotate,xTickSize,xTickSpacing,xTicks,xZero,xyDomain,yAlign,yAriaDescription,yAriaLabel,yAxis,yClamp,yDomain,yFontVariant,yGrid,yInset,yInsetBottom,yInsetTop,yLabel,yLabelAnchor,yLabelOffset,yLine,yNice,yPadding,yPaddingInner,yPaddingOuter,yRange,yReverse,yRound,yScale,yTickFormat,yTickPadding,yTickRotate,yTickSize,yTickSpacing,yTicks,yZero},Symbol.toStringTag,{value:"Module"}));function from(i,e){return{table:i,options:e}}function isColor(i){return typeof i!="string"?!1:(i=i.toLowerCase().trim(),i==="none"||i==="currentcolor"||i.startsWith("url(")&&i.endsWith(")")||i.startsWith("var(")&&i.endsWith(")")||color$1(i)!==null)}const constantOptions=new Set(["order","sort","label","anchor","curve","tension","marker","markerStart","markerMid","markerEnd","textAnchor","lineAnchor","lineHeight","textOverflow","monospace","fontFamily","fontSize","fontStyle","fontVariant","fontWeight","frameAnchor","strokeLinejoin","strokeLinecap","strokeMiterlimit","strokeDasharray","strokeDashoffset","mixBlendMode","shapeRendering","imageRendering","preserveAspectRatio","interpolate","crossOrigin","paintOrder","pointerEvents"]);function isConstantOption(i){return constantOptions.has(i)}const symbols=new Set(["asterisk","circle","cross","diamond","diamond2","hexagon","plus","square","square2","star","times","triangle","triangle2","wye"]);function isSymbol(i){return symbols.has(`${i}`.toLowerCase())}function isArrowTable(i){return typeof(i==null?void 0:i.getChild)=="function"}const INTEGER=2,TIMESTAMP=10;function toDataArray(i){return isArrowTable(i)?arrowToObjects(i):i}function arrowToObjects(i){const{batches:e,numRows:o}=i;if(!o)return[];const d=Array.from({length:o},()=>({}));for(let h=0,g=0;g<e.length;++g){const b=e[g],{schema:$,numRows:j,numCols:et}=b;for(let tt=0;tt<et;++tt){const nt=b.getChildAt(tt),{name:rt,type:ot}=$.fields[tt],st=convert(ot);for(let bt=h,vt=0;vt<j;++vt,++bt)d[bt][rt]=st(nt.get(vt))}h+=j}return d}function convert(i){const{typeId:e}=i;return e===TIMESTAMP?o=>o==null?o:new Date(o):e===INTEGER&&i.bitWidth>=64?o=>o==null?o:Number(o):o=>o}const isColorChannel=i=>i==="stroke"||i==="fill",isSymbolChannel=i=>i==="symbol",isFieldObject=(i,e)=>i!=="sort"&&e!=null&&!Array.isArray(e),fieldEntry=(i,e)=>({channel:i,field:e,as:e instanceof Ref?e.column:i}),valueEntry=(i,e)=>({channel:i,value:e});class Mark extends MosaicClient{constructor(e,o,d,h={}){var j;super((j=o==null?void 0:o.options)==null?void 0:j.filterBy),this.type=e,this.reqs=h,this.source=o,Array.isArray(this.source)&&(this.data=this.source);const g=this.channels=[],b=this.params=new Set,$=(et,tt)=>{const nt=typeof tt;if(nt==="function"&&tt[Transform$1]){const rt=tt(this,et);for(const ot in rt)$(ot,rt[ot])}else if(nt==="string")isConstantOption(et)||isColorChannel(et)&&isColor(tt)||isSymbolChannel(et)&&isSymbol(tt)?g.push(valueEntry(et,tt)):g.push(fieldEntry(et,column$1(tt)));else if(isParamLike(tt))if(Array.isArray(tt.columns))g.push(fieldEntry(et,tt)),b.add(tt);else{const rt=valueEntry(et,tt.value);g.push(rt),tt.addEventListener("value",ot=>(rt.value=ot,this.update()))}else nt==="object"&&isFieldObject(et,tt)?g.push(fieldEntry(et,tt)):tt!==void 0&&g.push(valueEntry(et,tt))};for(const et in d)$(et,d[et])}setPlot(e,o){var d;this.plot=e,this.index=o,e.addParams(this,this.params),(d=this.source)!=null&&d.table&&this.queryPending()}hasOwnData(){return this.source==null||Array.isArray(this.source)}channel(e){return this.channels.find(o=>o.channel===e)}channelField(...e){const o=e.flat();for(const d of o){const h=this.channel(d);if(h!=null&&h.field)return h}return null}fields(){var g,b,$;if(this.hasOwnData())return null;const{source:{table:e},channels:o,reqs:d}=this,h=new Map;for(const{channel:j,field:et}of o){const tt=et==null?void 0:et.column;if(tt){if((g=et.stats)!=null&&g.length||d[j]){h.has(tt)||h.set(tt,new Set);const nt=h.get(tt);(b=d[j])==null||b.forEach(rt=>nt.add(rt)),($=et.stats)==null||$.forEach(rt=>nt.add(rt))}}else continue}return Array.from(h,([j,et])=>({table:e,column:j,stats:Array.from(et)}))}fieldInfo(e){return this.stats=e.reduce((o,d)=>(o[d.column]=d,o),Object.create(null)),this}query(e=[]){if(this.hasOwnData())return null;const{channels:o,source:{table:d}}=this;return markQuery(o,d).where(e)}queryPending(){return this.plot.pending(this),this}queryResult(e){return this.data=toDataArray(e),this}update(){return this.plot.update(this)}plotSpecs(){const{type:e,data:o,channels:d}=this,h={};for(const g of d)h[g.channel]=channelOption(g);return[{type:e,data:o,options:h}]}}function channelOption(i){return Object.hasOwn(i,"value")?i.value:isColorChannel(i.channel)?{value:i.as,scale:"color"}:i.as}function markQuery(i,e,o=[]){const d=Query.from({source:e}),h=new Set;let g=!1;for(const b of i){const{channel:$,field:j,as:et}=b;if(!o.includes($)){if($==="order")d.orderby(b.value);else if(j){if(j.aggregate)g=!0;else{if(h.has(et))continue;h.add(et)}d.select({[et]:j})}}}return g&&d.groupby(Array.from(h)),d}function binField(i,e,o){if(!i.stats)return d;const{field:d}=i.channelField(e),{type:h}=i.stats[d.column];return o=o??d,h==="date"?epoch_ms(o):o}function bin1d$2(i,e,o,d,h=!1,g=1){const b=(d-g)/(o-e),$=b!==1?` * ${b}::DOUBLE`:"";return h?sql`(${+o} - ${i}::DOUBLE)${$}`:sql`(${i}::DOUBLE - ${+e})${$}`}const xext={x:["min","max"]},yext={y:["min","max"]},xyext={...xext,...yext};function plotExtent(i,e,o,d,h){const{plot:g,stats:b}=i,$=g.getAttribute(d),j=g.getAttribute(h);if(Array.isArray($)&&!$[Transient])return $;{const{field:et}=i.channelField(o),{column:tt}=et,{min:nt,max:rt}=b[tt],ot=filteredExtent(e,tt)||(j?linear().domain([nt,rt]).nice().domain():[nt,rt]);return $!==Fixed&&(ot[Transient]=!0),g.setAttribute(d,ot,{silent:!0}),ot}}function extentX(i,e){return plotExtent(i,e,"x","xDomain","xNice")}function extentY(i,e){return plotExtent(i,e,"y","yDomain","yNice")}function filteredExtent(i,e){if(!i)return;let o,d;const h=(g,b)=>{if(g==="BETWEEN"&&b.field.column===e){const{range:$}=b;$&&(o==null||$[0]<o)&&(o=$[0]),$&&(d==null||$[1]>d)&&(d=$[1])}};return Array.isArray(i)?i.forEach(g=>{var b;return(b=g.visit)==null?void 0:b.call(g,h)}):i.visit&&i.visit(h),o!=null&&d!=null&&o!==d?[o,d]:void 0}class ConnectedMark extends Mark{constructor(e,o,d){const h=e.endsWith("X")?"y":"x",g={[h]:["count","min","max"]};super(e,o,d,g),this.dim=h}query(e=[]){const{plot:o,dim:d,source:h,stats:g}=this,{optimize:b=!0}=h.options||{},{field:$,as:j}=this.channelField(d),et=super.query(e);if(b){const{column:tt}=$,{count:nt,max:rt,min:ot}=g[tt],st=d==="x"?o.innerWidth():o.innerHeight(),[bt,vt]=filteredExtent(e,tt)||[ot,rt],at=(vt-bt)/(rt-ot);if(nt*at>st*4){const ut=binField(this,d,j),$t=this.channelField(d==="x"?"y":"x").as,wt=et.select().map(At=>At.as).filter(At=>At!==j&&At!==$t);return m4(et,ut,j,$t,bt,vt,st,wt)}}return et.orderby(j)}}function m4(i,e,o,d,h,g,b,$=[]){const j=sql`FLOOR(${b/(g-h)}::DOUBLE * (${e} - ${+h}::DOUBLE))::INTEGER`,et=tt=>Query.from(i).select(tt).groupby(j,$);return Query.union(et([{[o]:min$3(o),[d]:argmin(d,o)},...$]),et([{[o]:max$2(o),[d]:argmax(d,o)},...$]),et([{[o]:argmin(o,d),[d]:min$3(d)},...$]),et([{[o]:argmax(o,d),[d]:max$2(d)},...$])).orderby($,o)}function dericheConfig(i,e=!1){const o=new Float64Array(5),d=new Float64Array(4);dericheCausalCoeff(o,d,i);const h=Float64Array.of(0,d[1]-o[1]*d[0],d[2]-o[2]*d[0],d[3]-o[3]*d[0],-o[4]*d[0]),g=1+o[1]+o[2]+o[3]+o[4],b=(d[0]+d[1]+d[2]+d[3])/g,$=(h[1]+h[2]+h[3]+h[4])/g;return{sigma:i,negative:e,a:o,b_causal:d,b_anticausal:h,sum_causal:b,sum_anticausal:$}}function dericheCausalCoeff(i,e,o){const h=Float64Array.of(.84,1.8675,.84,-1.8675,-.34015,-.1299,-.34015,.1299),g=Math.exp(-1.783/o),b=Math.exp(-1.723/o),$=.6318/o,j=1.997/o,et=Float64Array.of(-g*Math.cos($),g*Math.sin($),-g*Math.cos(-$),g*Math.sin(-$),-b*Math.cos(j),b*Math.sin(j),-b*Math.cos(-j),b*Math.sin(-j)),tt=o*2.5066282746310007,nt=Float64Array.of(h[0],h[1],0,0,0,0,0,0),rt=Float64Array.of(1,0,et[0],et[1],0,0,0,0,0,0);let ot,st;for(st=2;st<8;st+=2){for(nt[st]=et[st]*nt[st-2]-et[st+1]*nt[st-1],nt[st+1]=et[st]*nt[st-1]+et[st+1]*nt[st-2],ot=st-2;ot>0;ot-=2)nt[ot]+=et[st]*nt[ot-2]-et[st+1]*nt[ot-1],nt[ot+1]+=et[st]*nt[ot-1]+et[st+1]*nt[ot-2];for(ot=0;ot<=st;ot+=2)nt[ot]+=h[st]*rt[ot]-h[st+1]*rt[ot+1],nt[ot+1]+=h[st]*rt[ot+1]+h[st+1]*rt[ot];for(rt[st+2]=et[st]*rt[st]-et[st+1]*rt[st+1],rt[st+3]=et[st]*rt[st+1]+et[st+1]*rt[st],ot=st;ot>0;ot-=2)rt[ot]+=et[st]*rt[ot-2]-et[st+1]*rt[ot-1],rt[ot+1]+=et[st]*rt[ot-1]+et[st+1]*rt[ot-2]}for(st=0;st<4;++st)ot=st<<1,e[st]=nt[ot]/tt,i[st+1]=rt[ot+2]}function dericheConv2d(i,e,o,[d,h]){const g=new Float64Array(Math.max(d,h)),b=new Float64Array(Math.max(d,h)),$=new Float64Array(5),j=new Float64Array(o.length);for(let et=0,tt=0;et<h;++et,tt+=d){const nt=j.subarray(tt);dericheConv1d(i,o.subarray(tt),d,1,g,b,$,nt)}for(let et=0;et<d;++et){const tt=j.subarray(et);dericheConv1d(e,tt,h,d,g,b,$,tt)}return j}function dericheConv1d(i,e,o,d=1,h=new Float64Array(o),g=new Float64Array(o),b=new Float64Array(5),$=h,j=dericheInitZeroPad){const et=d*2,tt=d*3,nt=d*4,rt=d*o;let ot,st;for(j(h,e,o,d,i.b_causal,3,i.a,4,i.sum_causal,b,i.sigma),st=4,ot=nt;st<o;++st,ot+=d)h[st]=i.b_causal[0]*e[ot]+i.b_causal[1]*e[ot-d]+i.b_causal[2]*e[ot-et]+i.b_causal[3]*e[ot-tt]-i.a[1]*h[st-1]-i.a[2]*h[st-2]-i.a[3]*h[st-3]-i.a[4]*h[st-4];for(j(g,e,o,-d,i.b_anticausal,4,i.a,4,i.sum_anticausal,b,i.sigma),st=4,ot=rt-d*5;st<o;++st,ot-=d)g[st]=i.b_anticausal[1]*e[ot+d]+i.b_anticausal[2]*e[ot+et]+i.b_anticausal[3]*e[ot+tt]+i.b_anticausal[4]*e[ot+nt]-i.a[1]*g[st-1]-i.a[2]*g[st-2]-i.a[3]*g[st-3]-i.a[4]*g[st-4];if(i.negative)for(st=0,ot=0;st<o;++st,ot+=d)$[ot]=h[st]+g[o-st-1];else for(st=0,ot=0;st<o;++st,ot+=d)$[ot]=Math.max(0,h[st]+g[o-st-1]);return $}function dericheInitZeroPad(i,e,o,d,h,g,b,$,j,et){const tt=Math.abs(d)*o,nt=d<0?tt+d:0;let rt,ot,st;for(ot=0;ot<$;++ot)for(et[ot]=ot<=g?h[ot]:0,st=1;st<=$&&st<=ot;++st)et[ot]-=b[st]*et[ot-st];for(st=0;st<$;++st)for(i[st]=0,ot=1;ot<=st;++ot)rt=nt+d*ot,rt>=0&&rt<tt&&(i[st]+=et[st-ot]*e[rt]);const bt=e[nt];if(bt>0)for(st=0;st<$;++st)i[st]+=et[st]*bt}function grid1d(i,e){return valuesToGrid(new Float64Array(i),e)}function grid2d(i,e,o,d=[]){return d.length?Object.values(groupedValuesToGrids(i*e,o,d)):[{grid:valuesToGrid(new Float64Array(i*e),o)}]}function valuesToGrid(i,e){if(isArrowTable(e)){const o=e.numRows;if(o===0)return i;const d=e.getChild("index").toArray(),h=e.getChild("value").toArray();for(let g=0;g<o;++g)i[d[g]]=h[g]}else for(const o of e)i[o.index]=o.value;return i}function groupedValuesToGrids(i,e,o){const d={},h=g=>(d[g]||(d[g]={key:g,grid:new Float64Array(i)})).grid;if(isArrowTable(e)){const g=e.numRows;if(g===0)return d;const b=e.getChild("index").toArray(),$=e.getChild("value").toArray(),j=o.map(et=>e.getChild(et));for(let et=0;et<g;++et){const tt=j.map(nt=>nt.get(et));h(tt)[b[et]]=$[et]}}else for(const g of e){const b=o.map($=>g[$]);h(b)[g.index]=g.value}return d}function handleParam(i,e,o,d){isParam(o)?(d=d||(()=>i.requestUpdate()),o.addEventListener("value",h=>(i[e]=h,d())),i[e]=o.value):i[e]=o}class Density1DMark extends Mark{constructor(e,o,d){const{bins:h=1024,bandwidth:g=20,...b}=d,$=e.endsWith("X")?"y":"x";super(e,o,b,$==="x"?xext:yext),this.dim=$,handleParam(this,"bins",h),handleParam(this,"bandwidth",g,()=>this.grid?this.convolve().update():null)}get filterIndexable(){const e=this.dim==="x"?"xDomain":"yDomain",o=this.plot.getAttribute(e);return o&&!o[Transient]}query(e=[]){if(this.hasOwnData())throw new Error("Density1DMark requires a data source");const{bins:o,channels:d,dim:h,source:{table:g}}=this,[b,$]=this.extent=(h==="x"?extentX:extentY)(this,e),j=binField(this,h);return binLinear1d(markQuery(d,g,[h]).where(e.concat(isBetween(j,[b,$]))),bin1d$2(j,b,$,o),this.channelField("weight")?"weight":null)}queryResult(e){return this.grid=grid1d(this.bins,e),this.convolve()}convolve(){const{bins:e,bandwidth:o,dim:d,grid:h,plot:g,extent:[b,$]}=this,j=h.some(ut=>ut<0),et=d==="x"?g.innerWidth():g.innerHeight(),tt=dericheConfig(o*(e-1)/et,j),nt=dericheConv1d(tt,h,e),rt=this.data=[],ot=d==="x"?"y":"x",st=this.channelField(d).as,bt=+b,vt=($-bt)/(e-1),at=1/vt;for(let ut=0;ut<e;++ut)rt.push({[st]:bt+ut*vt,[ot]:nt[ut]*at});return this}plotSpecs(){const{type:e,data:o,channels:d,dim:h}=this,g=h==="x"?{y:"y"}:{x:"x"};for(const b of d)g[b.channel]=channelOption(b);return[{type:e,data:o,options:g}]}}function binLinear1d(i,e,o){const d=o?`* ${o}`:"",h=i.clone().select({p:e,i:sql`FLOOR(p)::INTEGER`,w:sql`(FLOOR(p) + 1 - p)${d}`}),g=i.clone().select({p:e,i:sql`FLOOR(p)::INTEGER + 1`,w:sql`(p - FLOOR(p))${d}`});return Query.from(Query.unionAll(h,g)).select({index:"i",value:sum$3("w")}).groupby("index").having(gt$1("value",0))}class Grid2DMark extends Mark{constructor(e,o,d){const{bandwidth:h=20,binType:g="linear",binWidth:b=2,binPad:$=1,...j}=d,et=createDensityMap(j);super(e,o,j,xyext),this.densityMap=et,handleParam(this,"bandwidth",h,()=>this.grids?this.convolve().update():null),handleParam(this,"binWidth",b),handleParam(this,"binType",g),handleParam(this,"binPad",$)}setPlot(e,o){const d=()=>{this.stats&&this.requestUpdate()};return e.addAttributeListener("domainX",d),e.addAttributeListener("domainY",d),super.setPlot(e,o)}get filterIndexable(){const e=this.plot.getAttribute("xDomain"),o=this.plot.getAttribute("yDomain");return e&&o&&!e[Transient]&&!o[Transient]}query(e=[]){const{plot:o,binType:d,binPad:h,channels:g,densityMap:b,source:$}=this,[j,et]=this.extentX=extentX(this,e),[tt,nt]=this.extentY=extentY(this,e),[rt,ot]=this.bins=this.binDimensions(this),st=binField(this,"x"),bt=binField(this,"y"),vt=!!o.getAttribute("xReverse"),at=!!o.getAttribute("yReverse"),ut=bin1d$1(st,j,et,rt,vt,this.binPad),$t=bin1d$1(bt,tt,nt,ot,at,this.binPad),wt=h?[isBetween(st,[j,et]),isBetween(bt,[tt,nt])]:[lte(j,st),lt$1(st,et),lte(tt,bt),lt$1(bt,nt)],At=Query.from($.table).where(e.concat(wt)),xt=this.groupby=[];let Rt=count$2();for(const Ot of g)if(Object.hasOwn(Ot,"field")){const{as:kt,channel:Mt,field:Bt}=Ot;Bt.aggregate?(Rt=Bt,b[Mt]=!0):Mt==="weight"?Rt=sum$3(Bt):Mt!=="x"&&Mt!=="y"&&(At.select({[kt]:Bt}),xt.push(kt))}return d==="linear"?binLinear2d$1(At,ut,$t,Rt,rt,xt):bin2d$1(At,ut,$t,Rt,rt,xt)}binDimensions(){const{plot:e,binWidth:o}=this;return[Math.round(e.innerWidth()/o),Math.round(e.innerHeight()/o)]}queryResult(e){const[o,d]=this.bins;return this.grids=grid2d(o,d,e,this.groupby),this.convolve()}convolve(){const{bandwidth:e,bins:o,grids:d,plot:h}=this;if(e<=0)this.kde=this.grids.map(({key:g,grid:b})=>(b.key=g,b));else{const g=h.innerWidth(),b=h.innerHeight(),[$,j]=o,et=d.some(({grid:rt})=>rt.some(ot=>ot<0)),tt=dericheConfig(e*($-1)/g,et),nt=dericheConfig(e*(j-1)/b,et);this.kde=this.grids.map(({key:rt,grid:ot})=>{const st=dericheConv2d(tt,nt,ot,o);return st.key=rt,st})}return this}plotSpecs(){throw new Error("Unimplemented. Use a Grid2D mark subclass.")}}function createDensityMap(i){const e={};for(const o in i)i[o]==="density"&&(delete i[o],e[o]=!0);return e}function bin1d$1(i,e,o,d,h,g){const b=(d-g)/(o-e),$=b!==1?` * ${b}::DOUBLE`:"";return h?sql`(${o} - ${i}::DOUBLE)${$}`:sql`(${i}::DOUBLE - ${e})${$}`}function bin2d$1(i,e,o,d,h,g){return i.select({index:sql`FLOOR(${e})::INTEGER + FLOOR(${o})::INTEGER * ${h}`,value:d}).groupby("index",g)}function binLinear2d$1(i,e,o,d,h,g){const b=d.column?`* ${d.column}`:"",$=(rt,ot)=>i.clone().select({xp:e,yp:o,i:rt,w:ot}),j=$(sql`FLOOR(xp)::INTEGER + FLOOR(yp)::INTEGER * ${h}`,sql`(FLOOR(xp)::INTEGER + 1 - xp) * (FLOOR(yp)::INTEGER + 1 - yp)${b}`),et=$(sql`FLOOR(xp)::INTEGER + (FLOOR(yp)::INTEGER + 1) * ${h}`,sql`(FLOOR(xp)::INTEGER + 1 - xp) * (yp - FLOOR(yp)::INTEGER)${b}`),tt=$(sql`FLOOR(xp)::INTEGER + 1 + FLOOR(yp)::INTEGER * ${h}`,sql`(xp - FLOOR(xp)::INTEGER) * (FLOOR(yp)::INTEGER + 1 - yp)${b}`),nt=$(sql`FLOOR(xp)::INTEGER + 1 + (FLOOR(yp)::INTEGER + 1) * ${h}`,sql`(xp - FLOOR(xp)::INTEGER) * (yp - FLOOR(yp)::INTEGER)${b}`);return Query.from(Query.unionAll(j,et,tt,nt)).select({index:"i",value:sum$3("w")},g).groupby("index",g).having(gt$1("value",0))}class Density2DMark extends Grid2DMark{constructor(e,o){const{type:d="dot",binsX:h,binsY:g,...b}=o;b.binPad=b.binPad??0,super(d,e,b),handleParam(this,"binsX",h),handleParam(this,"binsY",g)}convolve(){super.convolve();const{bins:e,binPad:o,extentX:d,extentY:h}=this,[g,b]=e,[$,j]=d,[et,tt]=h,nt=(j-$)/(g-o),rt=(tt-et)/(b-o),ot=o?0:.5;return this.data=points(this.kde,e,$,et,nt,rt,ot),this}binDimensions(){const{plot:e,binWidth:o,binsX:d,binsY:h}=this;return[d??Math.round(e.innerWidth()/o),h??Math.round(e.innerHeight()/o)]}plotSpecs(){const{type:e,channels:o,densityMap:d,data:h}=this,g={};for(const b of o){const{channel:$}=b;g[$]=$==="x"||$==="y"?$:channelOption(b)}for(const b in d)d[b]&&(g[b]="density");return[{type:e,data:h,options:g}]}}function points(i,e,o,d,h,g,b){const $=1/(h*g),[j,et]=e,tt=[];for(const nt of i)for(let rt=0,ot=0;ot<et;++ot)for(let st=0;st<j;++st,++rt)tt.push({x:o+(st+b)*h,y:d+(ot+b)*g,density:nt[rt]*$});return tt}function raster$1(i,e,o,d,h,g){const b=(g.length>>2)-1;for(let $=0,j=0;$<d;++$)for(let et=0,tt=(d-$-1)*o;et<o;++et,j+=4){const nt=b*h(i[et+tt])<<2;e[j+0]=g[nt+0],e[j+1]=g[nt+1],e[j+2]=g[nt+2],e[j+3]=g[nt+3]}}function palette(i,e){const o=new Uint8ClampedArray(4*i),d=i-1;for(let h=0;h<=d;++h){const g=e(h/d),{r:b,g:$,b:j,opacity:et=1}=typeof g=="string"?rgb(g):g,tt=h<<2;o[tt+0]=b,o[tt+1]=$,o[tt+2]=j,o[tt+3]=255*et|0}return o}function createCanvas(i,e){if(typeof document<"u"){const o=document.createElement("canvas");return o.setAttribute("width",i),o.setAttribute("height",e),o}throw new Error("Can not create a canvas instance.")}function opacityMap(i="black"){const{r:e,g:o,b:d}=rgb(i);return h=>({r:e,g:o,b:d,opacity:h})}class RasterMark extends Grid2DMark{constructor(e,o){super("image",e,o)}setPlot(e,o){const d=()=>{this.stats&&this.rasterize()};e.addAttributeListener("schemeColor",d),super.setPlot(e,o)}convolve(){return super.convolve().rasterize()}rasterize(){var rt;const{bins:e,kde:o,groupby:d}=this,[h,g]=e,{canvas:b,ctx:$,img:j}=imageData$1(this,h,g),et=imageScale$1(this),tt=d.indexOf((rt=this.channelField("fill"))==null?void 0:rt.as),nt=tt<0?[]:o.map(({key:ot})=>ot[tt]);return this.data=o.map(ot=>{var bt;const st=imagePalette$1(this,nt,(bt=ot.key)==null?void 0:bt[tt]);return raster$1(ot,j.data,h,g,et,st),$.putImageData(j,0,0),{src:b.toDataURL()}}),this}plotSpecs(){var g;const{type:e,plot:o,data:d}=this,h={src:"src",width:o.innerWidth(),height:o.innerHeight(),preserveAspectRatio:"none",imageRendering:(g=this.channel("imageRendering"))==null?void 0:g.value,frameAnchor:"middle"};return[{type:e,data:d,options:h}]}}function imageData$1(i,e,o){if(!i.image||i.image.w!==e||i.image.h!==o){const d=createCanvas(e,o),h=d.getContext("2d",{willReadFrequently:!0}),g=h.getImageData(0,0,e,o);i.image={canvas:d,ctx:h,img:g,w:e,h:o}}return i.image}function imageScale$1(i){const{densityMap:e,kde:o,plot:d}=i;let h=e.fill&&d.getAttribute("colorDomain");if(!h){let b=0,$=0;o.forEach(j=>{for(const et of j)et<b&&(b=et),et>$&&($=et)}),h=b===0&&$===0?[0,1]:[b,$]}const g=d.getAttribute("colorScale");return scale({x:{type:g,domain:h,range:[0,1]}}).apply}function imagePalette$1(i,e,o,d=1024){const{densityMap:h,plot:g}=i,b=g.getAttribute("colorScheme");let $;if(h.fill){if(b)try{return palette(d,scale({color:{scheme:b,domain:[0,1]}}).interpolate)}catch(j){console.warn(j)}}else if(e.length){const j=g.getAttribute("colorRange");$=scale({color:{domain:e,range:j,scheme:b||(j?void 0:"tableau10")}}).apply(o)}else{const j=i.channelField("fill");$=isColor(j==null?void 0:j.value)?j.value:void 0}return palette(d,opacityMap($))}class DenseLineMark extends RasterMark{constructor(e,o){const{normalize:d=!0,...h}=o;super(e,{bandwidth:0,...h}),handleParam(this,"normalize",d)}query(e=[]){const{plot:o,channels:d,normalize:h,source:g}=this,[b,$]=extentX(this,e),[j,et]=extentY(this,e),[tt,nt]=this.bins=this.binDimensions(this),rt=binField(this,"x"),ot=binField(this,"y"),st=!!o.getAttribute("xReverse"),bt=!!o.getAttribute("yReverse"),vt=bin1d$2(rt,b,$,tt,st,this.binPad),at=bin1d$2(ot,j,et,nt,bt,this.binPad),ut=Query.from(g.table).where(stripXY(this,e)),$t=this.groupby=[],wt=[];for(const At of d)if(Object.hasOwn(At,"field")){const{channel:xt,field:Rt}=At;xt==="z"?(ut.select({[xt]:Rt}),wt.push("z")):xt!=="x"&&xt!=="y"&&(ut.select({[xt]:Rt}),$t.push(xt))}return lineDensity(ut,vt,at,wt,tt,nt,$t,h)}}function stripXY(i,e){if(Array.isArray(e)&&!e.length)return e;const o=i.channelField("x").field.column,d=i.channelField("y").field.column,h=b=>b.op!=="BETWEEN"||b.field.column!==o&&b.field.column!==d,g=b=>b.op==="AND"?and$1(b.children.filter($=>h($))):b;return Array.isArray(e)?e.filter(b=>h(b)).map(b=>g(b)):g(e)}function lineDensity(i,e,o,d,h,g,b=[],$=!0){i.select({x:sql`FLOOR(${e})::INTEGER`,y:sql`FLOOR(${o})::INTEGER`});const j=b.concat(d),et=j.length?`PARTITION BY ${j.join(", ")} `:"",tt=Query.from(i).select(j,{x0:"x",y0:"y",dx:sql`(lead(x) OVER sw - x)`,dy:sql`(lead(y) OVER sw - y)`}).window({sw:sql`${et}ORDER BY x ASC`}).qualify(and$1(sql`(x0 < ${h} OR x0 + dx < ${h})`,sql`(y0 < ${g} OR y0 + dy < ${g})`,sql`(x0 > 0 OR x0 + dx > 0)`,sql`(y0 > 0 OR y0 + dy > 0)`)),nt=Query.select({x:sql`GREATEST(MAX(ABS(dx)), MAX(ABS(dy)))`}).from("pairs"),rt=Query.select({i:sql`UNNEST(range((${nt})))::INTEGER`}),ot=Query.unionAll(Query.select(j,{x:sql`x0 + i`,y:sql`y0 + ROUND(i * dy / dx::FLOAT)::INTEGER`}).from("pairs","indices").where(sql`ABS(dy) <= ABS(dx) AND i < ABS(dx)`),Query.select(j,{x:sql`x0 + ROUND(SIGN(dy) * i * dx / dy::FLOAT)::INTEGER`,y:sql`y0 + SIGN(dy) * i`}).from("pairs","indices").where(sql`ABS(dy) > ABS(dx) AND i < ABS(dy)`),Query.select(j,{x:"x0",y:"y0"}).from("pairs").where(isNull("dx"))),st=["x"].concat(j).join(", "),bt=Query.from("raster").select(j,"x","y",$?{w:sql`1.0 / COUNT(*) OVER (PARTITION BY ${st})`}:null).where(and$1(isBetween("x",[0,h]),isBetween("y",[0,g])));return Query.with({pairs:tt,indices:rt,raster:ot,points:bt}).from("points").select(b,{index:sql`x + y * ${h}::INTEGER`,value:$?sum$3("w"):count$2()}).groupby("index",b)}class ContourMark extends Grid2DMark{constructor(e,o){const{thresholds:d=10,...h}=o;super("geo",e,h),handleParam(this,"thresholds",d,()=>this.grids?this.contours().update():null)}convolve(){return super.convolve().contours()}contours(){const{bins:e,densityMap:o,kde:d,thresholds:h,groupby:g,plot:b}=this;let $=h;if(!Array.isArray($)){const At=max$1(d.map(xt=>max$1(xt)));$=Array.from({length:$-1},(xt,Rt)=>At*(Rt+1)/$)}(o.fill||o.stroke)&&this.plot.getAttribute("colorScale")!=="log"&&this.plot.setAttribute("colorZero",!0);const[j,et]=e,[tt,nt]=b.getAttribute("xDomain"),[rt,ot]=b.getAttribute("yDomain"),st=(nt-tt)/j,bt=(ot-rt)/et,vt=+tt,at=+rt,ut=At=>vt+At*st,$t=At=>at+At*bt,wt=contours().size(e);return this.data=d.flatMap(At=>$.map(xt=>{const Rt=transform(wt.contour(At,xt),ut,$t);return g.forEach((Ot,kt)=>Rt[Ot]=At.key[kt]),Rt.density=xt,Rt})),this}plotSpecs(){const{type:e,channels:o,densityMap:d,data:h}=this,g={};for(const b of o){const{channel:$}=b;$!=="x"&&$!=="y"&&(g[$]=channelOption(b))}return d.fill&&(g.fill="density"),d.stroke&&(g.stroke="density"),[{type:e,data:h,options:g}]}}function transform(i,e,o){function d(b){b.forEach(h)}function h(b){b.forEach(g)}function g(b){b[0]=e(b[0]),b[1]=o(b[1])}return i.coordinates.forEach(d),i}class HexbinMark extends Mark{constructor(e,o){const{type:d="hexagon",binWidth:h=20,...g}=o;super(d,e,{r:h/2,clip:!0,...g},xyext),this.binWidth=h}get filterIndexable(){const e=this.plot.getAttribute("xDomain"),o=this.plot.getAttribute("yDomain");return e&&o&&!e[Transient]&&!o[Transient]}query(e=[]){if(this.hasOwnData())return null;const{plot:o,binWidth:d,channels:h,source:g}=this,[b,$]=extentX(this,e),[j,et]=extentY(this,e),tt=.5-o.getAttribute("marginLeft"),nt=0-o.getAttribute("marginTop"),rt=`${d}::DOUBLE`,ot=`${d*(1.5/Math.sqrt(3))}::DOUBLE`,st=`${o.innerWidth()/($-b)}::DOUBLE`,bt=`${o.innerHeight()/(et-j)}::DOUBLE`;let vt,at;const ut=new Set,$t={};for(const Ot of h)Ot.channel==="order"?wt.orderby(Ot.value):Ot.channel==="x"?vt=Ot:Ot.channel==="y"?at=Ot:Object.hasOwn(Ot,"field")&&($t[Ot.as]=Ot.field,Ot.field.aggregate&&Ot.field.columns.forEach(kt=>ut.add(kt)));const wt=Query.select({[vt.as]:sql`${b}::DOUBLE + ((x + 0.5 * (y & 1)) * ${rt} + ${tt})::DOUBLE / ${st}`,[at.as]:sql`${et}::DOUBLE - (y * ${ot} + ${nt})::DOUBLE / ${bt}`,...$t}).groupby("x","y"),At=`${st} * (${vt.field} - ${b}::DOUBLE)`,xt=`${bt} * (${et}::DOUBLE - ${at.field})`,Rt=Query.select({py:sql`(${xt} - ${nt}) / ${ot}`,pj:sql`ROUND(py)::INTEGER`,px:sql`(${At} - ${tt}) / ${rt} - 0.5 * (pj & 1)`,pi:sql`ROUND(px)::INTEGER`,tt:sql`ABS(py-pj) * 3 > 1 AND (px-pi)**2 + (py-pj)**2 > (px - pi - 0.5 * CASE WHEN px < pi THEN -1 ELSE 1 END)**2 + (py - pj - CASE WHEN py < pj THEN -1 ELSE 1 END)**2`,x:sql`CASE WHEN tt THEN (pi + (CASE WHEN px < pi THEN -0.5 ELSE 0.5 END) + (CASE WHEN pj & 1 <> 0 THEN 0.5 ELSE -0.5 END))::INTEGER ELSE pi END`,y:sql`CASE WHEN tt THEN (pj + CASE WHEN py < pj THEN -1 ELSE 1 END)::INTEGER ELSE pj END`}).select(Array.from(ut)).from(g.table).where(isNotNull(vt.field),isNotNull(at.field),e);return wt.from(Rt)}}class RasterTileMark extends Grid2DMark{constructor(e,o){const{origin:d=[0,0],dim:h="xy",...g}=o;super("image",e,g),this.origin=d,this.tileX=h.toLowerCase().includes("x"),this.tileY=h.toLowerCase().includes("y")}setPlot(e,o){const d=()=>{this.stats&&this.rasterize()};e.addAttributeListener("schemeColor",d),super.setPlot(e,o)}requestQuery(){return this.requestTiles()}query(e=[]){return this._filter=e,null}tileQuery(e){const{plot:o,binType:d,binPad:h,channels:g,densityMap:b,source:$}=this,[[j,et],[tt,nt]]=e,[rt,ot]=this.bins,st=binField(this,"x"),bt=binField(this,"y"),vt=!!o.getAttribute("xReverse"),at=!!o.getAttribute("yReverse"),ut=bin1d(st,j,et,rt,vt,h),$t=bin1d(bt,tt,nt,ot,at,h),wt=h?[isBetween(st,[j,et]),isBetween(bt,[tt,nt])]:[lte(j,st),lt$1(st,et),lte(tt,bt),lt$1(bt,nt)],At=Query.from($.table).where(wt),xt=this.groupby=[];let Rt=count$2();for(const Ot of g)if(Object.hasOwn(Ot,"field")){const{channel:kt,field:Mt}=Ot;Mt.aggregate?(Rt=Mt,b[kt]=!0):kt==="weight"?Rt=sum$3(Mt):kt!=="x"&&kt!=="y"&&(At.select({[kt]:Mt}),xt.push(kt))}return d==="linear"?binLinear2d(At,ut,$t,Rt,rt,xt):bin2d(At,ut,$t,Rt,rt,xt)}async requestTiles(){const e=coordinator();this.prefetch&&e.cancel(this.prefetch);const{binPad:o,tileX:d,tileY:h,origin:[g,b]}=this,[$,j]=this.bins=this.binDimensions(this),[et,tt]=extentX(this,this._filter),[nt,rt]=extentY(this,this._filter),ot=tt-et,st=rt-nt,bt=Math.floor((et-g)*($-o)/ot),vt=Math.floor((nt-b)*(j-o)/st),at=(Mt,Bt)=>[[g+Mt*ot,g+(Mt+1)*ot],[b+Bt*st,b+(Bt+1)*st]],ut=Math.floor((et-g)/ot),$t=d?tileFloor((tt-g)/ot):ut,wt=Math.floor((nt-b)/st),At=h?tileFloor((rt-b)/st):wt,xt=[];for(let Mt=ut;Mt<=$t;++Mt)for(let Bt=wt;Bt<=At;++Bt)xt.push([Mt,Bt]);const Rt=xt.map(([Mt,Bt])=>e.query(this.tileQuery(at(Mt,Bt)))),Ot=[];if(d)for(let Mt=wt;Mt<=At;++Mt)Ot.push([$t+1,Mt]),Ot.push([ut-1,Mt]);if(h){const Mt=d?ut-1:ut,Bt=d?$t+1:$t;for(let jt=Mt;jt<=Bt;++jt)Ot.push([jt,At+1]),Ot.push([jt,wt-1])}this.prefetch=Ot.map(([Mt,Bt])=>e.prefetch(this.tileQuery(at(Mt,Bt))));const kt=await Promise.all(Rt);this.grids=[{grid:processTiles($,j,bt,vt,xt,kt)}],this.convolve().update()}convolve(){return super.convolve().rasterize()}rasterize(){var rt;const{bins:e,kde:o,groupby:d}=this,[h,g]=e,{canvas:b,ctx:$,img:j}=imageData(this,h,g),et=imageScale(this),tt=d.indexOf((rt=this.channelField("fill"))==null?void 0:rt.as),nt=tt<0?[]:o.map(({key:ot})=>ot[tt]);return this.data=o.map(ot=>{var bt;const st=imagePalette(this,nt,(bt=ot.key)==null?void 0:bt[tt]);return raster$1(ot,j.data,h,g,et,st),$.putImageData(j,0,0),{src:b.toDataURL()}}),this}plotSpecs(){var g;const{type:e,data:o,plot:d}=this,h={src:"src",width:d.innerWidth(),height:d.innerHeight(),preserveAspectRatio:"none",imageRendering:(g=this.channel("imageRendering"))==null?void 0:g.value,frameAnchor:"middle"};return[{type:e,data:o,options:h}]}}function processTiles(i,e,o,d,h,g){const b=new Float64Array(i*e);return g.forEach(($,j)=>{const[et,tt]=h[j],nt=et*i-o,rt=tt*e-d;copy(i,e,b,$,nt,rt)}),b}function copy(i,e,o,d,h,g){const b=d.numRows;if(b===0)return;const $=d.getChild("index").toArray(),j=d.getChild("value").toArray();for(let et=0;et<b;++et){const tt=$[et],nt=h+tt%i,rt=g+Math.floor(tt/i);0<=nt&&nt<i&&0<=rt&&rt<e&&(o[nt+rt*i]=j[et])}}function imageData(i,e,o){if(!i.image||i.image.w!==e||i.image.h!==o){const d=createCanvas(e,o),h=d.getContext("2d",{willReadFrequently:!0}),g=h.getImageData(0,0,e,o);i.image={canvas:d,ctx:h,img:g,w:e,h:o}}return i.image}function imageScale(i){const{densityMap:e,kde:o,plot:d}=i;let h=e.fill&&d.getAttribute("colorDomain");if(!h){let b=0,$=0;o.forEach(j=>{for(const et of j)et<b&&(b=et),et>$&&($=et)}),h=b===0&&$===0?[0,1]:[b,$]}const g=d.getAttribute("colorScale");return scale({x:{type:g,domain:h,range:[0,1]}}).apply}function imagePalette(i,e,o,d=1024){const{densityMap:h,plot:g}=i,b=g.getAttribute("colorScheme");let $;if(h.fill){if(b)try{return palette(d,scale({color:{scheme:b,domain:[0,1]}}).interpolate)}catch(j){console.warn(j)}}else if(e.length){const j=g.getAttribute("colorRange");$=scale({color:{domain:e,range:j,scheme:b||(j?void 0:"tableau10")}}).apply(o)}else{const j=i.channelField("fill");$=isColor(j==null?void 0:j.value)?j.value:void 0}return palette(d,opacityMap($))}function bin1d(i,e,o,d,h,g){const b=(d-g)/(o-e),$=b!==1?` * ${b}::DOUBLE`:"";return h?sql`(${o} - ${i}::DOUBLE)${$}`:sql`(${i}::DOUBLE - ${e})${$}`}function bin2d(i,e,o,d,h,g){return i.select({index:sql`FLOOR(${e})::INTEGER + FLOOR(${o})::INTEGER * ${h}`,value:d}).groupby("index",g)}function binLinear2d(i,e,o,d,h,g){const b=d.column?`* ${d.column}`:"",$=(rt,ot)=>i.clone().select({xp:e,yp:o,i:rt,w:ot}),j=$(sql`FLOOR(xp)::INTEGER + FLOOR(yp)::INTEGER * ${h}`,sql`(FLOOR(xp)::INTEGER + 1 - xp) * (FLOOR(yp)::INTEGER + 1 - yp)${b}`),et=$(sql`FLOOR(xp)::INTEGER + (FLOOR(yp)::INTEGER + 1) * ${h}`,sql`(FLOOR(xp)::INTEGER + 1 - xp) * (yp - FLOOR(yp)::INTEGER)${b}`),tt=$(sql`FLOOR(xp)::INTEGER + 1 + FLOOR(yp)::INTEGER * ${h}`,sql`(xp - FLOOR(xp)::INTEGER) * (FLOOR(yp)::INTEGER + 1 - yp)${b}`),nt=$(sql`FLOOR(xp)::INTEGER + 1 + (FLOOR(yp)::INTEGER + 1) * ${h}`,sql`(xp - FLOOR(xp)::INTEGER) * (yp - FLOOR(yp)::INTEGER)${b}`);return Query.from(Query.unionAll(j,et,tt,nt)).select({index:"i",value:sum$3("w")},g).groupby("index",g).having(neq$1("value",0))}function tileFloor(i){const e=Math.floor(i);return e===i?e-1:e}function ibetainv(i,e,o){var d=1e-8,h=e-1,g=o-1,b=0,$,j,et,tt,nt,rt,ot,st,bt,vt,at;if(i<=0)return 0;if(i>=1)return 1;for(e>=1&&o>=1?(et=i<.5?i:1-i,tt=Math.sqrt(-2*Math.log(et)),ot=(2.30753+tt*.27061)/(1+tt*(.99229+tt*.04481))-tt,i<.5&&(ot=-ot),st=(ot*ot-3)/6,bt=2/(1/(2*e-1)+1/(2*o-1)),vt=ot*Math.sqrt(st+bt)/bt-(1/(2*o-1)-1/(2*e-1))*(st+5/6-2/(3*bt)),ot=e/(e+o*Math.exp(2*vt))):($=Math.log(e/(e+o)),j=Math.log(o/(e+o)),tt=Math.exp(e*$)/e,nt=Math.exp(o*j)/o,vt=tt+nt,i<tt/vt?ot=Math.pow(e*vt*i,1/e):ot=1-Math.pow(o*vt*(1-i),1/o)),at=-gammaln(e)-gammaln(o)+gammaln(e+o);b<10;b++){if(ot===0||ot===1)return ot;if(rt=ibeta(ot,e,o)-i,tt=Math.exp(h*Math.log(ot)+g*Math.log(1-ot)+at),nt=rt/tt,ot-=tt=nt/(1-.5*Math.min(1,nt*(h/ot-g/(1-ot)))),ot<=0&&(ot=.5*(ot+tt)),ot>=1&&(ot=.5*(ot+tt+1)),Math.abs(tt)<d*ot&&b>0)break}return ot}function ibeta(i,e,o){var d=i===0||i===1?0:Math.exp(gammaln(e+o)-gammaln(e)-gammaln(o)+e*Math.log(i)+o*Math.log(1-i));return i<0||i>1?!1:i<(e+1)/(e+o+2)?d*betacf(i,e,o)/e:1-d*betacf(1-i,o,e)/o}function betacf(i,e,o){var d=1e-30,h=1,g=e+o,b=e+1,$=e-1,j=1,et=1-g*i/b,tt,nt,rt,ot;for(Math.abs(et)<d&&(et=d),et=1/et,ot=et;h<=100&&(tt=2*h,nt=h*(o-h)*i/(($+tt)*(e+tt)),et=1+nt*et,Math.abs(et)<d&&(et=d),j=1+nt/j,Math.abs(j)<d&&(j=d),et=1/et,ot*=et*j,nt=-(e+h)*(g+h)*i/((e+tt)*(b+tt)),et=1+nt*et,Math.abs(et)<d&&(et=d),j=1+nt/j,Math.abs(j)<d&&(j=d),et=1/et,rt=et*j,ot*=rt,!(Math.abs(rt-1)<3e-7));h++);return ot}function gammaln(i){var e=0,o=[76.18009172947146,-86.5053203294167,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18],d=1.000000000190015,h,g,b;for(b=(g=h=i)+5.5,b-=(h+.5)*Math.log(b);e<6;e++)d+=o[e]/++g;return Math.log(2.506628274631*d/h)-b}function qt(i,e){var o=ibetainv(2*Math.min(i,1-i),.5*e,.5);return o=Math.sqrt(e*(1-o)/o),i>.5?o:-o}class RegressionMark extends Mark{constructor(e,o){const{ci:d=.95,precision:h=4,...g}=o;super("line",e,g);const b=()=>this.modelFit?this.confidenceBand().update():null;handleParam(this,"ci",d,b),handleParam(this,"precision",h,b)}query(e=[]){const o=this.channelField("x").as,d=this.channelField("y").as,h=Array.from(new Set(["stroke","z","fx","fy"].flatMap(g=>{var b;return((b=this.channelField(g))==null?void 0:b.as)||[]})));return Query.from(super.query(e)).select({intercept:regrIntercept(d,o),slope:regrSlope(d,o),n:regrCount(d,o),ssy:regrSYY(d,o),ssx:regrSXX(d,o),xm:regrAvgX(d,o),x0:castDouble(min$3(o).where(isNotNull(d))),x1:castDouble(max$2(o).where(isNotNull(d)))}).select(h).groupby(h)}queryResult(e){return this.modelFit=toDataArray(e),this.lineData=this.modelFit.flatMap(o=>linePoints(o)),this.confidenceBand()}confidenceBand(){const{ci:e,modelFit:o,precision:d,plot:h}=this,g=h.innerWidth();return this.areaData=e?o.flatMap(b=>areaPoints(e,d,b,g)):null,this}plotSpecs(){const{lineData:e,areaData:o,channels:d,ci:h}=this,g={x:"x",y:"y"},b={x:"x",y1:"y1",y2:"y2",fillOpacity:.1};for(const $ of d)switch($.channel){case"x":case"y":case"fill":break;case"stroke":g.stroke=b.fill=channelOption($);break;case"strokeOpacity":g.strokeOpacity=channelOption($);break;case"fillOpacity":b.fillOpacity=channelOption($);break;default:g[$.channel]=b[$.channel]=channelOption($);break}return[...h?[{type:"areaY",data:o,options:b}]:[],{type:"line",data:e,options:g}]}}function linePoints(i){const{x0:e,x1:o,xm:d,intercept:h,slope:g,n:b,ssx:$,ssy:j,...et}=i;return[{x:e,y:h+e*g,...et},{x:o,y:h+o*g,...et}]}function areaPoints(i,e,o,d){const{x0:h,x1:g,xm:b,intercept:$,slope:j,n:et,ssx:tt,ssy:nt,...rt}=o,ot=e*(g-h)/d,st=qt((1-i)/2,et-2)*Math.sqrt(nt/(et-2));return range$1(h,g-ot/2,ot).concat(g).map(bt=>{const vt=$+bt*j,at=st*Math.sqrt(1/et+(bt-b)**2/tt);return{x:bt,y1:vt-at,y2:vt+at,...rt}})}const decorators=new Set(["frame","axisX","axisY","axisFx","axisFy","gridX","gridY","gridFx","gridFy","hexgrid","graticule","sphere"]);function mark(i,e,o){arguments.length===2&&(o=e,e=decorators.has(i)?null:[{}]);const d=i.startsWith("area")||i.startsWith("line")?ConnectedMark:Mark;return explicitType(d,i,e,o)}function explicitType(i,e,o,d){return h=>{h.addMark(new i(e,o,d))}}function implicitType(i,e,o){return d=>{d.addMark(new i(e,o))}}const area=(...i)=>mark("area",...i),areaX=(...i)=>mark("areaX",...i),areaY=(...i)=>mark("areaY",...i),line=(...i)=>mark("line",...i),lineX=(...i)=>mark("lineX",...i),lineY=(...i)=>mark("lineY",...i),barX=(...i)=>mark("barX",...i),barY=(...i)=>mark("barY",...i),cell=(...i)=>mark("cell",...i),cellX=(...i)=>mark("cellX",...i),cellY=(...i)=>mark("cellY",...i),rect=(...i)=>mark("rect",...i),rectX=(...i)=>mark("rectX",...i),rectY=(...i)=>mark("rectY",...i),dot=(...i)=>mark("dot",...i),dotX=(...i)=>mark("dotX",...i),dotY=(...i)=>mark("dotY",...i),circle=(...i)=>mark("circle",...i),hexagon=(...i)=>mark("hexagon",...i),text=(...i)=>mark("text",...i),textX=(...i)=>mark("textX",...i),textY=(...i)=>mark("textY",...i),ruleX=(...i)=>mark("ruleX",...i),ruleY=(...i)=>mark("ruleY",...i),tickX=(...i)=>mark("tickX",...i),tickY=(...i)=>mark("tickY",...i),vector=(...i)=>mark("vector",...i),vectorX=(...i)=>mark("vectoX",...i),vectorY=(...i)=>mark("vectorY",...i),spike=(...i)=>mark("spike",...i),image=(...i)=>mark("image",...i),densityX=(...i)=>explicitType(Density1DMark,"areaX",...i),densityY=(...i)=>explicitType(Density1DMark,"areaY",...i),density=(...i)=>implicitType(Density2DMark,...i),denseLine=(...i)=>implicitType(DenseLineMark,...i),contour=(...i)=>implicitType(ContourMark,...i),raster=(...i)=>implicitType(RasterMark,...i),rasterTile=(...i)=>implicitType(RasterTileMark,...i),hexbin=(...i)=>implicitType(HexbinMark,...i),hexgrid=(...i)=>mark("hexgrid",...i),regressionY=(...i)=>implicitType(RegressionMark,...i),voronoi=(...i)=>mark("voronoi",...i),voronoiMesh=(...i)=>mark("voronoiMesh",...i),delaunayLink=(...i)=>mark("delaunayLink",...i),delaunayMesh=(...i)=>mark("delaunayMesh",...i),hull=(...i)=>mark("hull",...i),arrow=(...i)=>mark("arrow",...i),link=(...i)=>mark("link",...i),frame=(...i)=>mark("frame",...i),axisX=(...i)=>mark("axisX",...i),axisY=(...i)=>mark("axisY",...i),axisFx=(...i)=>mark("axisFx",...i),axisFy=(...i)=>mark("axisFy",...i),gridX=(...i)=>mark("gridX",...i),gridY=(...i)=>mark("gridY",...i),gridFx=(...i)=>mark("gridFx",...i),gridFy=(...i)=>mark("gridFy",...i),geo=(...i)=>mark("geo",...i),sphere=(...i)=>mark("sphere",...i),graticule=(...i)=>mark("graticule",...i),marks=Object.freeze(Object.defineProperty({__proto__:null,area,areaX,areaY,arrow,axisFx,axisFy,axisX,axisY,barX,barY,cell,cellX,cellY,circle,contour,delaunayLink,delaunayMesh,denseLine,density,densityX,densityY,dot,dotX,dotY,frame,geo,graticule,gridFx,gridFy,gridX,gridY,hexagon,hexbin,hexgrid,hull,image,line,lineX,lineY,link,raster,rasterTile,rect,rectX,rectY,regressionY,ruleX,ruleY,sphere,spike,text,textX,textY,tickX,tickY,vector,vectorX,vectorY,voronoi,voronoiMesh},Symbol.toStringTag,{value:"Module"}));function toKebabCase(i){const e=i.toLowerCase(),o=i.length;let d="";for(let h=0;h<o;++h)d+=(i[h]!==e[h]?"-":"")+e[h];return d}function sanitizeStyles(i){const e={};for(const o in i)e[toKebabCase(o)]=i[o];return e}class Highlight{constructor(e,{selection:o,channels:d={}}){this.mark=e,this.selection=o;const h=Object.entries(sanitizeStyles(d));this.channels=h.length?h:[["opacity",.2]],this.selection.addEventListener("value",throttle(()=>this.update()))}init(e){this.svg=e;const o=this.values=[],d=this.mark.index,h=this.nodes=e.querySelectorAll(`[data-index="${d}"] > *`),{channels:g}=this;for(let b=0;b<h.length;++b){const $=h[b];o.push(g.map(j=>$.getAttribute(j[0])))}return this.update()}async update(){const{svg:e,nodes:o,channels:d,values:h,mark:g,selection:b}=this;if(!e)return;const $=await predicateFunction(g,b);for(let j=0;j<o.length;++j){const et=o[j],tt=h[j],nt=$(et.__data__);for(let rt=0;rt<d.length;++rt){const[ot,st]=d[rt];et.setAttribute(ot,nt?tt[rt]:st)}}}}async function predicateFunction(i,e){var et,tt;const o=e==null?void 0:e.predicate(i);if(!o||o.length===0)return()=>!0;const d=(et=i.filterBy)==null?void 0:et.predicate(i,!0),h={__:and$1(o)},g=i.query(d),b=g.groupby().length?g.select(h):g.$select(h),$=await coordinator().query(b),j=(tt=$.getChild)==null?void 0:tt.call($,"__");return $.numRows||$.length?j?nt=>j.get(nt):nt=>$[nt].__:()=>!1}class Toggle{constructor(e,{selection:o,channels:d,peers:h=!0}){this.value=null,this.mark=e,this.selection=o,this.peers=h,this.channels=d.map(g=>{var $;const b=g==="color"?["fill","stroke"]:g==="x"?["x","x1","x2"]:g==="y"?["y","y1","y2"]:[g];for(let j=0;j<b.length;++j){const et=e.channelField(b[j]);if(et)return{field:(($=et.field)==null?void 0:$.basis)||et.field,as:et.as}}throw new Error(`Missing channel: ${g}`)})}clause(e){const{channels:o,mark:d}=this;let h=null;if(e){const g=e.map(b=>{const $=b.map((j,et)=>isNotDistinct(o[et].field,literal(j)));return $.length>1?and$1($):$[0]});h=g.length>1?or(g):g[0]}return{source:this,schema:{type:"point"},clients:this.peers?d.plot.markSet:new Set().add(d),value:e,predicate:h}}init(e,o,d){const{mark:h,channels:g,selection:b}=this,{data:$}=h;d=d||(et=>{const tt=$[et.__data__];return g.map(nt=>tt[nt.as])}),o=o||`[data-index="${h.index}"]`;const j=new Set(e.querySelectorAll(o));e.addEventListener("pointerdown",et=>{const tt=b.single?b.value:this.value,nt=et.target;let rt=null;if(isTargetElement(j,nt)){const ot=d(nt);et.shiftKey&&(tt!=null&&tt.length)?(rt=tt.filter(st=>neq(st,ot)),rt.length===tt.length&&rt.push(ot)):(tt==null?void 0:tt.length)===1&&!neq(tt[0],ot)?rt=null:rt=[ot]}this.value=rt,neqSome(tt,rt)&&b.update(this.clause(rt))}),e.addEventListener("pointerenter",()=>{this.selection.activate(this.clause([this.channels.map(()=>0)]))})}}function isTargetElement(i,e){var o;return i.has(e)||i.has(e.parentNode)||i.has((o=e.parentNode)==null?void 0:o.parentNode)}function neqSome(i,e){return i==null||e==null?i!=null||e!=null:i.length!==e.length||i.some((o,d)=>neq(o,e[d]))}function neq(i,e){const o=i.length;if(e.length!==o)return!0;for(let d=0;d<o;++d)if(i[d]!==e[d])return!0;return!1}function wrap(i){const e=i.on;let o=!0;function d(h){o=!1,h(),o=!0}return i.reset=(...h)=>{d(()=>i.clear(...h))},i.moveSilent=(...h)=>{d(()=>i.move(...h))},i.on=(...h)=>{if(h.length>1&&h[1]){const g=h[1];h[1]=(...b)=>o&&g(...b)}return e(...h)},i}function brush(){return wrap(d3_brush())}function brushX(){return wrap(brushX$1())}function brushY(){return wrap(brushY$1())}const EPS=1e-12;function closeTo(i,e){return i===e||i&&e&&Math.abs(i[0]-e[0])<EPS&&Math.abs(i[1]-e[1])<EPS||!1}function getField(i,e){var d;const o=(d=i.channelField(e))==null?void 0:d.field;return(o==null?void 0:o.basis)||o}function invert(i,e,o=1){return e.invert(o*Math.floor(i/o))}function patchScreenCTM(){const i=this,e=i.getScreenCTM;let o;i.getScreenCTM=()=>i.isConnected?o=e.call(i):o}class Interval1D{constructor(e,{channel:o,selection:d,field:h,pixelSize:g=1,peers:b=!0,brush:$}){this.mark=e,this.channel=o,this.pixelSize=g||1,this.selection=d,this.peers=b,this.field=h||getField(e,[o,o+"1",o+"2"]),this.style=$&&sanitizeStyles($),this.brush=o==="y"?brushY():brushX(),this.brush.on("brush end",({selection:j})=>this.publish(j))}reset(){this.value=void 0,this.g&&this.brush.reset(this.g)}activate(){this.selection.activate(this.clause(this.value||[0,1]))}publish(e){let o;e&&(o=e.map(d=>invert(d,this.scale,this.pixelSize)).sort((d,h)=>d-h)),closeTo(o,this.value)||(this.value=o,this.g.call(this.brush.moveSilent,e),this.selection.update(this.clause(o)))}clause(e){const{mark:o,pixelSize:d,field:h,scale:g}=this;return{source:this,schema:{type:"interval",pixelSize:d,scales:[g]},clients:this.peers?o.plot.markSet:new Set().add(o),value:e,predicate:e?isBetween(h,e):null}}init(e){var et;const{brush:o,channel:d,style:h}=this;this.scale=e.scale(d);const g=e.scale("x").range,b=e.scale("y").range;o.extent([[min$2(g),min$2(b)],[max$1(g),max$1(b)]]);const $=select$1(e).selectAll('g[aria-label="facet"]'),j=$.size()?$:select$1(e);if(this.g=j.append("g").attr("class",`interval-${d}`).each(patchScreenCTM).call(o).call(o.moveSilent,(et=this.value)==null?void 0:et.map(this.scale.apply)),h){const tt=this.g.selectAll("rect.selection");for(const nt in h)tt.attr(nt,h[nt])}e.addEventListener("pointerenter",()=>this.activate())}}const asc$1=(i,e)=>i-e;class Interval2D{constructor(e,{selection:o,xfield:d,yfield:h,pixelSize:g=1,peers:b=!0,brush:$}){this.mark=e,this.pixelSize=g||1,this.selection=o,this.peers=b,this.xfield=d||getField(e,["x","x1","x2"]),this.yfield=h||getField(e,["y","y1","y2"]),this.style=$&&sanitizeStyles($),this.brush=brush(),this.brush.on("brush end",({selection:j})=>this.publish(j))}reset(){this.value=void 0,this.g&&this.brush.reset(this.g)}activate(){this.selection.activate(this.clause(this.value||[[0,1],[0,1]]))}publish(e){const{value:o,pixelSize:d,xscale:h,yscale:g}=this;let b,$;if(e){const[j,et]=e;b=[j[0],et[0]].map(tt=>invert(tt,h,d)).sort(asc$1),$=[j[1],et[1]].map(tt=>invert(tt,g,d)).sort(asc$1)}(!closeTo(b,o==null?void 0:o[0])||!closeTo($,o==null?void 0:o[1]))&&(this.value=e?[b,$]:void 0,this.g.call(this.brush.moveSilent,e),this.selection.update(this.clause(this.value)))}clause(e){const{mark:o,pixelSize:d,xfield:h,yfield:g,xscale:b,yscale:$}=this;return{source:this,schema:{type:"interval",pixelSize:d,scales:[b,$]},clients:this.peers?o.plot.markSet:new Set().add(o),value:e,predicate:e?and$1(isBetween(h,e[0]),isBetween(g,e[1])):null}}init(e){const{brush:o,style:d}=this,h=this.xscale=e.scale("x"),g=this.yscale=e.scale("y"),b=h.range,$=g.range;o.extent([[min$2(b),min$2($)],[max$1(b),max$1($)]]);const j=select$1(e).selectAll('g[aria-label="facet"]'),et=j.size()?j:select$1(e);if(this.g=et.append("g").attr("class","interval-xy").each(patchScreenCTM).call(o),d){const tt=this.g.selectAll("rect.selection");for(const nt in d)tt.attr(nt,d[nt])}if(this.value){const[tt,nt]=this.value[0].map(h.apply).sort(asc$1),[rt,ot]=this.value[1].map(g.apply).sort(asc$1);this.g.call(o.moveSilent,[[tt,rt],[nt,ot]])}e.addEventListener("pointerenter",()=>this.activate())}}const asc=(i,e)=>i-e;class PanZoom{constructor(e,{x:o=new Selection$2,y:d=new Selection$2,xfield:h,yfield:g,zoom:b=!0,panx:$=!0,pany:j=!0}){this.mark=e,this.xsel=o,this.ysel=d,this.xfield=h||getField(e,["x","x1","x2"]),this.yfield=g||getField(e,["y","y1","y2"]),this.zoom=extent(b,[0,1/0],[1,1]),this.panx=this.xsel&&$,this.pany=this.ysel&&j;const{plot:et}=e;$&&this.xsel.addEventListener("value",tt=>{et.setAttribute("xDomain",tt)&&et.update()}),j&&this.ysel.addEventListener("value",tt=>{et.setAttribute("yDomain",tt)&&et.update()})}publish(e){if(this.panx){const o=rescaleX(e,this.xscale);this.xsel.update(this.clause(o,this.xfield,this.xscale))}if(this.pany){const o=rescaleY(e,this.yscale);this.ysel.update(this.clause(o,this.yfield,this.yscale))}}clause(e,o,d){return{source:this,schema:{type:"interval",scales:[d]},clients:this.mark.plot.markSet,value:e,predicate:e?isBetween(o,e):null}}init(e){if(this.svg=e,this.initialized)return;this.initialized=!0;const{panx:o,pany:d,mark:{plot:{element:h}},xsel:g,ysel:b}=this;this.xscale=e.scale("x"),this.yscale=e.scale("y");const $=this.xscale.range.slice().sort(asc),j=this.yscale.range.slice().sort(asc),et=extent(o,[-1/0,1/0],$),tt=extent(d,[-1/0,1/0],j),nt=zoom$1().extent([[$[0],j[0]],[$[1],j[1]]]).scaleExtent(this.zoom).translateExtent([[et[0],tt[0]],[et[1],tt[1]]]).on("start",()=>{this.xscale=this.svg.scale("x"),this.yscale=this.svg.scale("y")}).on("end",()=>h.__zoom=new Transform(1,0,0)).on("zoom",({transform:rt})=>this.publish(rt));if(select$1(h).call(nt),o||d){let rt=!1;h.addEventListener("mouseenter",()=>{if(!rt){if(rt=!0,o){const{xscale:ot,xfield:st}=this;g.activate(this.clause(ot.domain,st,ot))}if(d){const{yscale:ot,yfield:st}=this;b.activate(this.clause(ot.domain,st,ot))}}}),h.addEventListener("mouseleave",()=>rt=!1)}}}function extent(i,e,o){return i?Array.isArray(i)?i:e:o}function rescaleX(i,e){return e.range.map(i.invertX,i).map(e.invert,e)}function rescaleY(i,e){return e.range.map(i.invertY,i).map(e.invert,e)}class Nearest{constructor(e,{selection:o,channel:d,field:h}){this.mark=e,this.selection=o,this.clients=new Set().add(e),this.channel=d,this.field=h||getField(e,[d])}clause(e){const{clients:o,field:d}=this,h=e?eq$1(d,literal(e)):null;return{source:this,schema:{type:"point"},clients:o,value:e,predicate:h}}init(e){const o=this,{mark:d,channel:h,selection:g}=this,{data:b}=d,$=d.channelField(h).as,j=select$1(e).selectAll('g[aria-label="facet"]'),et=j.size()?j:select$1(e),tt=e.scale(h),nt=!isSelection(g);et.on("pointerdown pointermove",function(rt){const[ot,st]=pointer$1(rt,this),bt=findNearest(b,$,tt.invert(h==="x"?ot:st));g.update(nt?bt:o.clause(bt))}),!nt&&e.addEventListener("pointerenter",()=>{this.selection.activate(this.clause(0))})}}function findNearest(i,e,o){let d=1/0,h;return i.forEach(g=>{const b=Math.abs(g[e]-o);b<d&&(d=b,h=g[e])}),h}function interactor(i,e){return o=>{const d=o.marks[o.marks.length-1];o.addInteractor(new i(d,e))}}function highlight({by:i,...e}){return interactor(Highlight,{selection:i,channels:e})}function toggle({as:i,...e}){return interactor(Toggle,{...e,selection:i})}function toggleX(i){return toggle({...i,channels:["x"]})}function toggleY(i){return toggle({...i,channels:["y"]})}function toggleColor(i){return toggle({...i,channels:["color"]})}function nearestX({as:i,...e}){return interactor(Nearest,{...e,selection:i,channel:"x"})}function nearestY({as:i,...e}){return interactor(Nearest,{...e,selection:i,channel:"y"})}function intervalX({as:i,...e}){return interactor(Interval1D,{...e,selection:i,channel:"x"})}function intervalY({as:i,...e}){return interactor(Interval1D,{...e,selection:i,channel:"y"})}function intervalXY({as:i,...e}){return interactor(Interval2D,{...e,selection:i})}function zoom(i){return interactor(PanZoom,i)}function pan(i={}){return zoom({...i,zoom:!1})}function panX(i={}){return zoom({...i,zoom:!1,pany:!1})}function panY(i={}){return zoom({...i,zoom:!1,panx:!1})}function panZoom(i={}){return zoom(i)}function panZoomX(i={}){return zoom({...i,pany:!1})}function panZoomY(i={}){return zoom({...i,panx:!1})}const interactors=Object.freeze(Object.defineProperty({__proto__:null,highlight,intervalX,intervalXY,intervalY,nearestX,nearestY,pan,panX,panY,panZoom,panZoomX,panZoomY,toggle,toggleColor,toggleX,toggleY},Symbol.toStringTag,{value:"Module"}));class Legend{constructor(e,o){const{as:d,...h}=o;this.channel=e,this.options={label:null,...h},this.selection=d,this.element=document.createElement("div"),this.element.setAttribute("class","legend"),this.element.value=this}setPlot(e){const{channel:o,selection:d}=this,h=findMark(e,o);this.selection&&h&&(this.handler=new Toggle(h,{selection:d,channels:[o]}),this.selection.addEventListener("value",()=>this.update()))}init(e){const{channel:o,options:d,handler:h}=this,b=e.scale(o).type==="ordinal"?d:{marginTop:1,tickSize:2,height:28,...d};return this.legend=e.legend(o,b),h&&(h.init(this.legend,":scope > div",$=>[$.__data__]),this.update()),this.element.replaceChildren(this.legend),this.element}update(){if(!this.legend)return;const{value:e}=this.selection,o=e&&e.length?new Set(e.map(h=>h[0])):null,d=this.legend.querySelectorAll(":scope > div");for(const h of d){const g=o?o.has(h.__data__):!0;h.style.opacity=g?1:.2}}}function findMark({marks:i},e){const o=e==="color"?["fill","stroke"]:e==="opacity"?["opacity","fillOpacity","strokeOpacity"]:null;if(o==null)return null;for(let d=i.length-1;d>-1;--d)if(i[d].channelField(o))return i[d];return null}function legend(i,e={}){if(e.for){const{for:o,...d}=e,h=new Legend(i,d),g=typeof o,b=$=>$.addLegend(h,!1);return g==="string"?namedPlots.request(o,b):o.value&&b(o.value),h.element}else return o=>o.addLegend(new Legend(i,e))}const colorLegend=i=>legend("color",i),opacityLegend=i=>legend("opacity",i),symbolLegend=i=>legend("symbol",i),legends=Object.freeze(Object.defineProperty({__proto__:null,colorLegend,opacityLegend,symbolLegend},Symbol.toStringTag,{value:"Module"}));function concat({direction:i="vertical",wrap:e=!1},o){const d=document.createElement("div");return d.style.display="flex",d.style.flexDirection=i==="vertical"?"column":"row",d.style.flexWrap=e?e===!0?"wrap":e:"nowrap",d.style.justifyContent="flex-start",d.style.alignItems="flex-start",o.forEach(h=>d.appendChild(h)),d.value={element:d},d}function vconcat(...i){return concat({direction:"vertical"},i.flat())}function hconcat(...i){return concat({direction:"horizontal"},i.flat())}const inputs={menu,search,slider,table};new Map(Object.entries(marks));new Map(Object.entries(inputs));new Map(Object.entries(legends));new Map(Object.entries(attributes$1));new Map(Object.entries(interactors));function ConnectPane({connect:i}){const[e,o]=reactExports.useState(null),d=reactExports.useCallback(g=>{o(g.target.value)},[]),h=reactExports.useCallback(()=>{e&&i(e)},[i,e]);return jsxRuntimeExports.jsxs("div",{id:"connect-pane",children:[jsxRuntimeExports.jsx("div",{id:"token-input-row",children:jsxRuntimeExports.jsx("input",{id:"token-input",type:"password",placeholder:"Paste MotherDuck Service Token Here",onChange:d})}),jsxRuntimeExports.jsx("div",{id:"connect-button-row",children:jsxRuntimeExports.jsx("button",{id:"connect-button",disabled:!e,onClick:h,children:"Connect"})})]})}const motherDuckLogo="assets/motherduck_logo-X5yv95Gl.svg";function Header(){return jsxRuntimeExports.jsxs("div",{id:"header",children:[jsxRuntimeExports.jsx("div",{id:"title",children:jsxRuntimeExports.jsx("a",{href:"https://motherduck.com",target:"_blank",children:jsxRuntimeExports.jsx("img",{src:motherDuckLogo,alt:"MotherDuck logo"})})}),jsxRuntimeExports.jsxs("div",{id:"subtitle",children:["WASM Client Example: ",jsxRuntimeExports.jsx("a",{href:"https://uwdata.github.io/mosaic/",target:"_blank",children:"Mosaic"})," Integration"]})]})}class NYPDComplaintsViz{async initialize(){await coordinator().exec(`create temp table if not exists complaints as 
        select year(created_date)::int as Year, count(*)::int as Complaints
        from sample_data.nyc.service_requests
        where Year < 2023
        and agency_name = 'New York City Police Department'
        group by 1
        order by 1;`),await coordinator().exec(`create temp table if not exists complaints_details as
        select year(created_date)::int as Year, complaint_type as Type, count(*)::int as Complaints
        from sample_data.nyc.service_requests
        where Year < 2023
        and agency_name = 'New York City Police Department'
        group by 1, 2
        order by 1, 3 desc;`)}render(){const e=Selection$2.single();return vconcat(plot(barY(from("complaints"),{x:"Year",y:"Complaints",fill:"steelblue"}),highlight({by:e}),toggleX({as:e}),xTickFormat("d"),yGrid(!0),yTickFormat("s")),table({from:"complaints_details",filterBy:e,format:{Year:o=>String(o)},width:{Year:80,Type:400,Complaints:100},height:400}))}}const defaultAttributes=[xAxis(null),yAxis(null),margins({left:5,top:5,right:5,bottom:5}),width(160),height(100),yDomain([0,9])];class MarkTypesViz{async initialize(){await coordinator().exec(loadObjects("md",[{i:0,u:"A",v:2},{i:1,u:"B",v:8},{i:2,u:"C",v:3},{i:3,u:"D",v:7},{i:4,u:"E",v:5},{i:5,u:"F",v:4},{i:6,u:"G",v:6},{i:7,u:"H",v:1}]))}render(){return vconcat(hconcat(plot(barY(from("md"),{x:"u",y:"v",fill:"steelblue"}),...defaultAttributes),plot(lineY(from("md"),{x:"u",y:"v",stroke:"steelblue",curve:"monotone-x",marker:"circle"}),...defaultAttributes),plot(text(from("md"),{x:"u",y:"v",text:"u",fill:"steelblue"}),...defaultAttributes),plot(tickY(from("md"),{x:"u",y:"v",stroke:"steelblue"}),...defaultAttributes),plot(areaY(from("md"),{x:"u",y:"v",fill:"steelblue"}),...defaultAttributes)),hconcat(plot(dot(from("md"),{x:"i",y:"v",fill:"currentColor",r:1.5}),regressionY(from("md"),{x:"i",y:"v",stroke:"steelblue"}),...defaultAttributes,xDomain([-.5,7.5])),plot(hexgrid({stroke:"#aaa",strokeOpacity:.5}),hexbin(from("md"),{x:"i",y:"v",fill:count$2()}),...defaultAttributes,colorScheme("blues"),xDomain([-1,8])),plot(contour(from("md"),{x:"i",y:"v",stroke:"steelblue",bandwidth:15}),...defaultAttributes,xDomain([-1,8])),plot(raster(from("md"),{x:"i",y:"v",fill:"density",bandwidth:15}),...defaultAttributes,colorScheme("blues"),xDomain([-1,8])),plot(denseLine(from("md"),{x:"i",y:"v",fill:"density",bandwidth:2,binWidth:1}),...defaultAttributes,colorScheme("blues"),xDomain([-1,8]))))}}const flights200KVizTableName="flights_200k_viz",flights10MVizTableName="flights_10m_viz";class FlightsViz{constructor(e="flights_200k"){Gl(this,"flightsTableName");Gl(this,"vizTable",null);this.flightsTableName=e}async initialize(){const e=`mosaic_examples.main.${this.flightsTableName}`;this.flightsTableName==="flights_10m"?(await coordinator().exec(`
      create temp table if not exists ${flights10MVizTableName} as
      select GREATEST(-60, LEAST(ARR_DELAY, 180))::DOUBLE AS delay, DISTANCE AS distance, DEP_TIME AS time
      from ${e}
      `),this.vizTable=flights10MVizTableName):(await coordinator().exec(`
      create temp table if not exists ${flights200KVizTableName} as
      select *
      from ${e}
      `),this.vizTable=flights200KVizTableName)}render(){const e=Selection$2.crossfilter();return vconcat(plot(rectY(from(this.vizTable,{filterBy:e}),{x:bin$1("delay"),y:count$2(),fill:"steelblue",inset:.5}),intervalX({as:e}),xDomain(Fixed),yTickFormat("s"),width(600),height(200)),plot(rectY(from(this.vizTable,{filterBy:e}),{x:bin$1("time"),y:count$2(),fill:"steelblue",inset:.5}),intervalX({as:e}),xDomain(Fixed),yTickFormat("s"),width(600),height(200)),plot(rectY(from(this.vizTable,{filterBy:e}),{x:bin$1("distance"),y:count$2(),fill:"steelblue",inset:.5}),intervalX({as:e}),xDomain(Fixed),yTickFormat("s"),width(600),height(200)))}}const vizMap={"Mark Types":new MarkTypesViz,"NYPD Complaints":new NYPDComplaintsViz,"Flights 200K":new FlightsViz("flights_200k"),"Flights 10M":new FlightsViz("flights_10m")},vizNames=Object.keys(vizMap);function VizzesPane(){const[i,e]=reactExports.useState(null),[o,d]=reactExports.useState(vizNames[0]),h=reactExports.useCallback(g=>{d(g.target.value)},[]);return reactExports.useEffect(()=>{(async()=>{if(i){const g=vizMap[o];i.innerHTML="Loading, please wait…",await g.initialize(),i.innerHTML="",i.appendChild(g.render())}})()},[o,i]),jsxRuntimeExports.jsxs("div",{id:"vizzes-pane",children:[jsxRuntimeExports.jsx("div",{id:"selector-pane",children:jsxRuntimeExports.jsx("select",{id:"viz-selector",value:o,onChange:h,children:vizNames.map(g=>jsxRuntimeExports.jsx("option",{children:g},g))})}),jsxRuntimeExports.jsx("div",{id:"viz-pane",ref:e})]})}const decoder=new TextDecoder("utf-8"),decodeUtf8=i=>decoder.decode(i),encoder=new TextEncoder,encodeUtf8=i=>encoder.encode(i),isNumber=i=>typeof i=="number",isBoolean=i=>typeof i=="boolean",isFunction=i=>typeof i=="function",isObject=i=>i!=null&&Object(i)===i,isPromise=i=>isObject(i)&&isFunction(i.then),isIterable=i=>isObject(i)&&isFunction(i[Symbol.iterator]),isAsyncIterable=i=>isObject(i)&&isFunction(i[Symbol.asyncIterator]),isArrowJSON=i=>isObject(i)&&isObject(i.schema),isIteratorResult=i=>isObject(i)&&"done"in i&&"value"in i,isFileHandle=i=>isObject(i)&&isFunction(i.stat)&&isNumber(i.fd),isFetchResponse=i=>isObject(i)&&isReadableDOMStream(i.body),isReadableInterop=i=>"_getDOMStream"in i&&"_getNodeStream"in i,isWritableDOMStream=i=>isObject(i)&&isFunction(i.abort)&&isFunction(i.getWriter)&&!isReadableInterop(i),isReadableDOMStream=i=>isObject(i)&&isFunction(i.cancel)&&isFunction(i.getReader)&&!isReadableInterop(i),isWritableNodeStream=i=>isObject(i)&&isFunction(i.end)&&isFunction(i.write)&&isBoolean(i.writable)&&!isReadableInterop(i),isReadableNodeStream=i=>isObject(i)&&isFunction(i.read)&&isFunction(i.pipe)&&isBoolean(i.readable)&&!isReadableInterop(i),isFlatbuffersByteBuffer=i=>isObject(i)&&isFunction(i.clear)&&isFunction(i.bytes)&&isFunction(i.position)&&isFunction(i.setPosition)&&isFunction(i.capacity)&&isFunction(i.getBufferIdentifier)&&isFunction(i.createLong),SharedArrayBuf=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function collapseContiguousByteRanges(i){const e=i[0]?[i[0]]:[];let o,d,h,g;for(let b,$,j=0,et=0,tt=i.length;++j<tt;){if(b=e[et],$=i[j],!b||!$||b.buffer!==$.buffer||$.byteOffset<b.byteOffset){$&&(e[++et]=$);continue}if({byteOffset:o,byteLength:h}=b,{byteOffset:d,byteLength:g}=$,o+h<d||d+g<o){$&&(e[++et]=$);continue}e[et]=new Uint8Array(b.buffer,o,d-o+g)}return e}function memcpy(i,e,o=0,d=e.byteLength){const h=i.byteLength,g=new Uint8Array(i.buffer,i.byteOffset,h),b=new Uint8Array(e.buffer,e.byteOffset,Math.min(d,h));return g.set(b,o),i}function joinUint8Arrays(i,e){const o=collapseContiguousByteRanges(i),d=o.reduce((tt,nt)=>tt+nt.byteLength,0);let h,g,b,$=0,j=-1;const et=Math.min(e||Number.POSITIVE_INFINITY,d);for(const tt=o.length;++j<tt;){if(h=o[j],g=h.subarray(0,Math.min(h.length,et-$)),et<=$+g.length){g.length<h.length?o[j]=h.subarray(g.length):g.length===h.length&&j++,b?memcpy(b,g,$):b=g;break}memcpy(b||(b=new Uint8Array(et)),g,$),$+=g.length}return[b||new Uint8Array(0),o.slice(j),d-(b?b.byteLength:0)]}function toArrayBufferView(i,e){let o=isIteratorResult(e)?e.value:e;return o instanceof i?i===Uint8Array?new i(o.buffer,o.byteOffset,o.byteLength):o:o?(typeof o=="string"&&(o=encodeUtf8(o)),o instanceof ArrayBuffer?new i(o):o instanceof SharedArrayBuf?new i(o):isFlatbuffersByteBuffer(o)?toArrayBufferView(i,o.bytes()):ArrayBuffer.isView(o)?o.byteLength<=0?new i(0):new i(o.buffer,o.byteOffset,o.byteLength/i.BYTES_PER_ELEMENT):i.from(o)):new i(0)}const toInt32Array=i=>toArrayBufferView(Int32Array,i),toUint8Array=i=>toArrayBufferView(Uint8Array,i),pump$1=i=>(i.next(),i);function*toArrayBufferViewIterator(i,e){const o=function*(h){yield h},d=typeof e=="string"||ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof SharedArrayBuf?o(e):isIterable(e)?e:o(e);return yield*pump$1(function*(h){let g=null;do g=h.next(yield toArrayBufferView(i,g));while(!g.done)}(d[Symbol.iterator]())),new i}const toUint8ArrayIterator=i=>toArrayBufferViewIterator(Uint8Array,i);function toArrayBufferViewAsyncIterator(i,e){return __asyncGenerator(this,arguments,function*(){if(isPromise(e))return yield __await(yield __await(yield*__asyncDelegator(__asyncValues(toArrayBufferViewAsyncIterator(i,yield __await(e))))));const d=function(b){return __asyncGenerator(this,arguments,function*(){yield yield __await(yield __await(b))})},h=function(b){return __asyncGenerator(this,arguments,function*(){yield __await(yield*__asyncDelegator(__asyncValues(pump$1(function*($){let j=null;do j=$.next(yield j==null?void 0:j.value);while(!j.done)}(b[Symbol.iterator]())))))})},g=typeof e=="string"||ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof SharedArrayBuf?d(e):isIterable(e)?h(e):isAsyncIterable(e)?e:d(e);return yield __await(yield*__asyncDelegator(__asyncValues(pump$1(function(b){return __asyncGenerator(this,arguments,function*(){let $=null;do $=yield __await(b.next(yield yield __await(toArrayBufferView(i,$))));while(!$.done)})}(g[Symbol.asyncIterator]()))))),yield __await(new i)})}const toUint8ArrayAsyncIterator=i=>toArrayBufferViewAsyncIterator(Uint8Array,i);function rebaseValueOffsets(i,e,o){if(i!==0){o=o.slice(0,e);for(let d=-1,h=o.length;++d<h;)o[d]+=i}return o.subarray(0,e)}function compareArrayLike(i,e){let o=0;const d=i.length;if(d!==e.length)return!1;if(d>0)do if(i[o]!==e[o])return!1;while(++o<d);return!0}const streamAdapters={fromIterable(i){return pump(fromIterable(i))},fromAsyncIterable(i){return pump(fromAsyncIterable(i))},fromDOMStream(i){return pump(fromDOMStream(i))},fromNodeStream(i){return pump(fromNodeStream(i))},toDOMStream(i,e){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(i,e){throw new Error('"toNodeStream" not available in this environment')}},pump=i=>(i.next(),i);function*fromIterable(i){let e,o=!1,d=[],h,g,b,$=0;function j(){return g==="peek"?joinUint8Arrays(d,b)[0]:([h,d,$]=joinUint8Arrays(d,b),h)}({cmd:g,size:b}=yield null);const et=toUint8ArrayIterator(i)[Symbol.iterator]();try{do if({done:e,value:h}=Number.isNaN(b-$)?et.next():et.next(b-$),!e&&h.byteLength>0&&(d.push(h),$+=h.byteLength),e||b<=$)do({cmd:g,size:b}=yield j());while(b<$);while(!e)}catch(tt){(o=!0)&&typeof et.throw=="function"&&et.throw(tt)}finally{o===!1&&typeof et.return=="function"&&et.return(null)}return null}function fromAsyncIterable(i){return __asyncGenerator(this,arguments,function*(){let o,d=!1,h=[],g,b,$,j=0;function et(){return b==="peek"?joinUint8Arrays(h,$)[0]:([g,h,j]=joinUint8Arrays(h,$),g)}({cmd:b,size:$}=yield yield __await(null));const tt=toUint8ArrayAsyncIterator(i)[Symbol.asyncIterator]();try{do if({done:o,value:g}=Number.isNaN($-j)?yield __await(tt.next()):yield __await(tt.next($-j)),!o&&g.byteLength>0&&(h.push(g),j+=g.byteLength),o||$<=j)do({cmd:b,size:$}=yield yield __await(et()));while($<j);while(!o)}catch(nt){(d=!0)&&typeof tt.throw=="function"&&(yield __await(tt.throw(nt)))}finally{d===!1&&typeof tt.return=="function"&&(yield __await(tt.return(new Uint8Array(0))))}return yield __await(null)})}function fromDOMStream(i){return __asyncGenerator(this,arguments,function*(){let o=!1,d=!1,h=[],g,b,$,j=0;function et(){return b==="peek"?joinUint8Arrays(h,$)[0]:([g,h,j]=joinUint8Arrays(h,$),g)}({cmd:b,size:$}=yield yield __await(null));const tt=new AdaptiveByteReader(i);try{do if({done:o,value:g}=Number.isNaN($-j)?yield __await(tt.read()):yield __await(tt.read($-j)),!o&&g.byteLength>0&&(h.push(toUint8Array(g)),j+=g.byteLength),o||$<=j)do({cmd:b,size:$}=yield yield __await(et()));while($<j);while(!o)}catch(nt){(d=!0)&&(yield __await(tt.cancel(nt)))}finally{d===!1?yield __await(tt.cancel()):i.locked&&tt.releaseLock()}return yield __await(null)})}class AdaptiveByteReader{constructor(e){this.source=e,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(e){return __awaiter(this,void 0,void 0,function*(){const{reader:o,source:d}=this;o&&(yield o.cancel(e).catch(()=>{})),d&&d.locked&&this.releaseLock()})}read(e){return __awaiter(this,void 0,void 0,function*(){if(e===0)return{done:this.reader==null,value:new Uint8Array(0)};const o=yield this.reader.read();return!o.done&&(o.value=toUint8Array(o)),o})}}const onEvent=(i,e)=>{const o=h=>d([e,h]);let d;return[e,o,new Promise(h=>(d=h)&&i.once(e,o))]};function fromNodeStream(i){return __asyncGenerator(this,arguments,function*(){const o=[];let d="error",h=!1,g=null,b,$,j=0,et=[],tt;function nt(){return b==="peek"?joinUint8Arrays(et,$)[0]:([tt,et,j]=joinUint8Arrays(et,$),tt)}if({cmd:b,size:$}=yield yield __await(null),i.isTTY)return yield yield __await(new Uint8Array(0)),yield __await(null);try{o[0]=onEvent(i,"end"),o[1]=onEvent(i,"error");do{if(o[2]=onEvent(i,"readable"),[d,g]=yield __await(Promise.race(o.map(ot=>ot[2]))),d==="error")break;if((h=d==="end")||(Number.isFinite($-j)?(tt=toUint8Array(i.read($-j)),tt.byteLength<$-j&&(tt=toUint8Array(i.read()))):tt=toUint8Array(i.read()),tt.byteLength>0&&(et.push(tt),j+=tt.byteLength)),h||$<=j)do({cmd:b,size:$}=yield yield __await(nt()));while($<j)}while(!h)}finally{yield __await(rt(o,d==="error"?g:null))}return yield __await(null);function rt(ot,st){return tt=et=null,new Promise((bt,vt)=>{for(const[at,ut]of ot)i.off(at,ut);try{const at=i.destroy;at&&at.call(i,st),st=void 0}catch(at){st=at||st}finally{st!=null?vt(st):bt()}})}})}var MetadataVersion$1;(function(i){i[i.V1=0]="V1",i[i.V2=1]="V2",i[i.V3=2]="V3",i[i.V4=3]="V4",i[i.V5=4]="V5"})(MetadataVersion$1||(MetadataVersion$1={}));var UnionMode$1;(function(i){i[i.Sparse=0]="Sparse",i[i.Dense=1]="Dense"})(UnionMode$1||(UnionMode$1={}));var Precision$1;(function(i){i[i.HALF=0]="HALF",i[i.SINGLE=1]="SINGLE",i[i.DOUBLE=2]="DOUBLE"})(Precision$1||(Precision$1={}));var DateUnit$1;(function(i){i[i.DAY=0]="DAY",i[i.MILLISECOND=1]="MILLISECOND"})(DateUnit$1||(DateUnit$1={}));var TimeUnit$1;(function(i){i[i.SECOND=0]="SECOND",i[i.MILLISECOND=1]="MILLISECOND",i[i.MICROSECOND=2]="MICROSECOND",i[i.NANOSECOND=3]="NANOSECOND"})(TimeUnit$1||(TimeUnit$1={}));var IntervalUnit$1;(function(i){i[i.YEAR_MONTH=0]="YEAR_MONTH",i[i.DAY_TIME=1]="DAY_TIME",i[i.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(IntervalUnit$1||(IntervalUnit$1={}));var MessageHeader$1;(function(i){i[i.NONE=0]="NONE",i[i.Schema=1]="Schema",i[i.DictionaryBatch=2]="DictionaryBatch",i[i.RecordBatch=3]="RecordBatch",i[i.Tensor=4]="Tensor",i[i.SparseTensor=5]="SparseTensor"})(MessageHeader$1||(MessageHeader$1={}));var Type$1;(function(i){i[i.NONE=0]="NONE",i[i.Null=1]="Null",i[i.Int=2]="Int",i[i.Float=3]="Float",i[i.Binary=4]="Binary",i[i.Utf8=5]="Utf8",i[i.Bool=6]="Bool",i[i.Decimal=7]="Decimal",i[i.Date=8]="Date",i[i.Time=9]="Time",i[i.Timestamp=10]="Timestamp",i[i.Interval=11]="Interval",i[i.List=12]="List",i[i.Struct=13]="Struct",i[i.Union=14]="Union",i[i.FixedSizeBinary=15]="FixedSizeBinary",i[i.FixedSizeList=16]="FixedSizeList",i[i.Map=17]="Map",i[i.Duration=18]="Duration",i[i.Dictionary=-1]="Dictionary",i[i.Int8=-2]="Int8",i[i.Int16=-3]="Int16",i[i.Int32=-4]="Int32",i[i.Int64=-5]="Int64",i[i.Uint8=-6]="Uint8",i[i.Uint16=-7]="Uint16",i[i.Uint32=-8]="Uint32",i[i.Uint64=-9]="Uint64",i[i.Float16=-10]="Float16",i[i.Float32=-11]="Float32",i[i.Float64=-12]="Float64",i[i.DateDay=-13]="DateDay",i[i.DateMillisecond=-14]="DateMillisecond",i[i.TimestampSecond=-15]="TimestampSecond",i[i.TimestampMillisecond=-16]="TimestampMillisecond",i[i.TimestampMicrosecond=-17]="TimestampMicrosecond",i[i.TimestampNanosecond=-18]="TimestampNanosecond",i[i.TimeSecond=-19]="TimeSecond",i[i.TimeMillisecond=-20]="TimeMillisecond",i[i.TimeMicrosecond=-21]="TimeMicrosecond",i[i.TimeNanosecond=-22]="TimeNanosecond",i[i.DenseUnion=-23]="DenseUnion",i[i.SparseUnion=-24]="SparseUnion",i[i.IntervalDayTime=-25]="IntervalDayTime",i[i.IntervalYearMonth=-26]="IntervalYearMonth",i[i.DurationSecond=-27]="DurationSecond",i[i.DurationMillisecond=-28]="DurationMillisecond",i[i.DurationMicrosecond=-29]="DurationMicrosecond",i[i.DurationNanosecond=-30]="DurationNanosecond"})(Type$1||(Type$1={}));var BufferType;(function(i){i[i.OFFSET=0]="OFFSET",i[i.DATA=1]="DATA",i[i.VALIDITY=2]="VALIDITY",i[i.TYPE=3]="TYPE"})(BufferType||(BufferType={}));const undf=void 0;function valueToString(i){if(i===null)return"null";if(i===undf)return"undefined";switch(typeof i){case"number":return`${i}`;case"bigint":return`${i}`;case"string":return`"${i}"`}return typeof i[Symbol.toPrimitive]=="function"?i[Symbol.toPrimitive]("string"):ArrayBuffer.isView(i)?i instanceof BigInt64Array||i instanceof BigUint64Array?`[${[...i].map(e=>valueToString(e))}]`:`[${i}]`:ArrayBuffer.isView(i)?`[${i}]`:JSON.stringify(i,(e,o)=>typeof o=="bigint"?`${o}`:o)}const isArrowBigNumSymbol=Symbol.for("isArrowBigNum");function BigNum(i,...e){return e.length===0?Object.setPrototypeOf(toArrayBufferView(this.TypedArray,i),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(i,...e),this.constructor.prototype)}BigNum.prototype[isArrowBigNumSymbol]=!0;BigNum.prototype.toJSON=function(){return`"${bigNumToString(this)}"`};BigNum.prototype.valueOf=function(){return bigNumToNumber(this)};BigNum.prototype.toString=function(){return bigNumToString(this)};BigNum.prototype[Symbol.toPrimitive]=function(i="default"){switch(i){case"number":return bigNumToNumber(this);case"string":return bigNumToString(this);case"default":return bigNumToBigInt(this)}return bigNumToString(this)};function SignedBigNum(...i){return BigNum.apply(this,i)}function UnsignedBigNum(...i){return BigNum.apply(this,i)}function DecimalBigNum(...i){return BigNum.apply(this,i)}Object.setPrototypeOf(SignedBigNum.prototype,Object.create(Int32Array.prototype));Object.setPrototypeOf(UnsignedBigNum.prototype,Object.create(Uint32Array.prototype));Object.setPrototypeOf(DecimalBigNum.prototype,Object.create(Uint32Array.prototype));Object.assign(SignedBigNum.prototype,BigNum.prototype,{constructor:SignedBigNum,signed:!0,TypedArray:Int32Array,BigIntArray:BigInt64Array});Object.assign(UnsignedBigNum.prototype,BigNum.prototype,{constructor:UnsignedBigNum,signed:!1,TypedArray:Uint32Array,BigIntArray:BigUint64Array});Object.assign(DecimalBigNum.prototype,BigNum.prototype,{constructor:DecimalBigNum,signed:!0,TypedArray:Uint32Array,BigIntArray:BigUint64Array});function bigNumToNumber(i){const{buffer:e,byteOffset:o,length:d,signed:h}=i,g=new BigUint64Array(e,o,d),b=h&&g.at(-1)&BigInt(1)<<BigInt(63);let $=BigInt(b?1:0),j=BigInt(0);if(b){for(const et of g)$+=~et*(BigInt(1)<<BigInt(32)*j++);$*=BigInt(-1)}else for(const et of g)$+=et*(BigInt(1)<<BigInt(32)*j++);return $}const bigNumToString=i=>{if(i.byteLength===8)return`${new i.BigIntArray(i.buffer,i.byteOffset,1)[0]}`;if(!i.signed)return unsignedBigNumToString(i);let e=new Uint16Array(i.buffer,i.byteOffset,i.byteLength/2);if(new Int16Array([e.at(-1)])[0]>=0)return unsignedBigNumToString(i);e=e.slice();let d=1;for(let g=0;g<e.length;g++){const b=e[g],$=~b+d;e[g]=$,d&=b===0?1:0}return`-${unsignedBigNumToString(e)}`},bigNumToBigInt=i=>i.byteLength===8?new i.BigIntArray(i.buffer,i.byteOffset,1)[0]:bigNumToString(i);function unsignedBigNumToString(i){let e="";const o=new Uint32Array(2);let d=new Uint16Array(i.buffer,i.byteOffset,i.byteLength/2);const h=new Uint32Array((d=new Uint16Array(d).reverse()).buffer);let g=-1;const b=d.length-1;do{for(o[0]=d[g=0];g<b;)d[g++]=o[1]=o[0]/10,o[0]=(o[0]-o[1]*10<<16)+d[g];d[g]=o[1]=o[0]/10,o[0]=o[0]-o[1]*10,e=`${o[0]}${e}`}while(h[0]||h[1]||h[2]||h[3]);return e??"0"}class BN{static new(e,o){switch(o){case!0:return new SignedBigNum(e);case!1:return new UnsignedBigNum(e)}switch(e.constructor){case Int8Array:case Int16Array:case Int32Array:case BigInt64Array:return new SignedBigNum(e)}return e.byteLength===16?new DecimalBigNum(e):new UnsignedBigNum(e)}static signed(e){return new SignedBigNum(e)}static unsigned(e){return new UnsignedBigNum(e)}static decimal(e){return new DecimalBigNum(e)}constructor(e,o){return BN.new(e,o)}}function bigIntToNumber(i){if(typeof i=="bigint"&&(i<Number.MIN_SAFE_INTEGER||i>Number.MAX_SAFE_INTEGER))throw new TypeError(`${i} is not safe to convert to a number.`);return Number(i)}var _a$3,_b,_c,_d,_e$1,_f,_g,_h,_j,_k,_l,_m,_o,_p,_q,_r$1,_s$1,_t$1,_u,_v;class DataType{static isNull(e){return(e==null?void 0:e.typeId)===Type$1.Null}static isInt(e){return(e==null?void 0:e.typeId)===Type$1.Int}static isFloat(e){return(e==null?void 0:e.typeId)===Type$1.Float}static isBinary(e){return(e==null?void 0:e.typeId)===Type$1.Binary}static isUtf8(e){return(e==null?void 0:e.typeId)===Type$1.Utf8}static isBool(e){return(e==null?void 0:e.typeId)===Type$1.Bool}static isDecimal(e){return(e==null?void 0:e.typeId)===Type$1.Decimal}static isDate(e){return(e==null?void 0:e.typeId)===Type$1.Date}static isTime(e){return(e==null?void 0:e.typeId)===Type$1.Time}static isTimestamp(e){return(e==null?void 0:e.typeId)===Type$1.Timestamp}static isInterval(e){return(e==null?void 0:e.typeId)===Type$1.Interval}static isDuration(e){return(e==null?void 0:e.typeId)===Type$1.Duration}static isList(e){return(e==null?void 0:e.typeId)===Type$1.List}static isStruct(e){return(e==null?void 0:e.typeId)===Type$1.Struct}static isUnion(e){return(e==null?void 0:e.typeId)===Type$1.Union}static isFixedSizeBinary(e){return(e==null?void 0:e.typeId)===Type$1.FixedSizeBinary}static isFixedSizeList(e){return(e==null?void 0:e.typeId)===Type$1.FixedSizeList}static isMap(e){return(e==null?void 0:e.typeId)===Type$1.Map}static isDictionary(e){return(e==null?void 0:e.typeId)===Type$1.Dictionary}static isDenseUnion(e){return DataType.isUnion(e)&&e.mode===UnionMode$1.Dense}static isSparseUnion(e){return DataType.isUnion(e)&&e.mode===UnionMode$1.Sparse}get typeId(){return Type$1.NONE}}_a$3=Symbol.toStringTag;DataType[_a$3]=(i=>(i.children=null,i.ArrayType=Array,i[Symbol.toStringTag]="DataType"))(DataType.prototype);let Null$1=class extends DataType{toString(){return"Null"}get typeId(){return Type$1.Null}};_b=Symbol.toStringTag;Null$1[_b]=(i=>i[Symbol.toStringTag]="Null")(Null$1.prototype);class Int_ extends DataType{constructor(e,o){super(),this.isSigned=e,this.bitWidth=o}get typeId(){return Type$1.Int}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?BigInt64Array:BigUint64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}_c=Symbol.toStringTag;Int_[_c]=(i=>(i.isSigned=null,i.bitWidth=null,i[Symbol.toStringTag]="Int"))(Int_.prototype);class Int32 extends Int_{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}Object.defineProperty(Int32.prototype,"ArrayType",{value:Int32Array});class Float extends DataType{constructor(e){super(),this.precision=e}get typeId(){return Type$1.Float}get ArrayType(){switch(this.precision){case Precision$1.HALF:return Uint16Array;case Precision$1.SINGLE:return Float32Array;case Precision$1.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}_d=Symbol.toStringTag;Float[_d]=(i=>(i.precision=null,i[Symbol.toStringTag]="Float"))(Float.prototype);let Binary$1=class extends DataType{constructor(){super()}get typeId(){return Type$1.Binary}toString(){return"Binary"}};_e$1=Symbol.toStringTag;Binary$1[_e$1]=(i=>(i.ArrayType=Uint8Array,i[Symbol.toStringTag]="Binary"))(Binary$1.prototype);let Utf8$1=class extends DataType{constructor(){super()}get typeId(){return Type$1.Utf8}toString(){return"Utf8"}};_f=Symbol.toStringTag;Utf8$1[_f]=(i=>(i.ArrayType=Uint8Array,i[Symbol.toStringTag]="Utf8"))(Utf8$1.prototype);let Bool$1=class extends DataType{constructor(){super()}get typeId(){return Type$1.Bool}toString(){return"Bool"}};_g=Symbol.toStringTag;Bool$1[_g]=(i=>(i.ArrayType=Uint8Array,i[Symbol.toStringTag]="Bool"))(Bool$1.prototype);let Decimal$1=class extends DataType{constructor(e,o,d=128){super(),this.scale=e,this.precision=o,this.bitWidth=d}get typeId(){return Type$1.Decimal}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}};_h=Symbol.toStringTag;Decimal$1[_h]=(i=>(i.scale=null,i.precision=null,i.ArrayType=Uint32Array,i[Symbol.toStringTag]="Decimal"))(Decimal$1.prototype);class Date_ extends DataType{constructor(e){super(),this.unit=e}get typeId(){return Type$1.Date}toString(){return`Date${(this.unit+1)*32}<${DateUnit$1[this.unit]}>`}}_j=Symbol.toStringTag;Date_[_j]=(i=>(i.unit=null,i.ArrayType=Int32Array,i[Symbol.toStringTag]="Date"))(Date_.prototype);class Time_ extends DataType{constructor(e,o){super(),this.unit=e,this.bitWidth=o}get typeId(){return Type$1.Time}toString(){return`Time${this.bitWidth}<${TimeUnit$1[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return BigInt64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}_k=Symbol.toStringTag;Time_[_k]=(i=>(i.unit=null,i.bitWidth=null,i[Symbol.toStringTag]="Time"))(Time_.prototype);class Timestamp_ extends DataType{constructor(e,o){super(),this.unit=e,this.timezone=o}get typeId(){return Type$1.Timestamp}toString(){return`Timestamp<${TimeUnit$1[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}_l=Symbol.toStringTag;Timestamp_[_l]=(i=>(i.unit=null,i.timezone=null,i.ArrayType=Int32Array,i[Symbol.toStringTag]="Timestamp"))(Timestamp_.prototype);class Interval_ extends DataType{constructor(e){super(),this.unit=e}get typeId(){return Type$1.Interval}toString(){return`Interval<${IntervalUnit$1[this.unit]}>`}}_m=Symbol.toStringTag;Interval_[_m]=(i=>(i.unit=null,i.ArrayType=Int32Array,i[Symbol.toStringTag]="Interval"))(Interval_.prototype);let Duration$1=class extends DataType{constructor(e){super(),this.unit=e}get typeId(){return Type$1.Duration}toString(){return`Duration<${TimeUnit$1[this.unit]}>`}};_o=Symbol.toStringTag;Duration$1[_o]=(i=>(i.unit=null,i.ArrayType=BigInt64Array,i[Symbol.toStringTag]="Duration"))(Duration$1.prototype);let List$1=class extends DataType{constructor(e){super(),this.children=[e]}get typeId(){return Type$1.List}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}};_p=Symbol.toStringTag;List$1[_p]=(i=>(i.children=null,i[Symbol.toStringTag]="List"))(List$1.prototype);class Struct extends DataType{constructor(e){super(),this.children=e}get typeId(){return Type$1.Struct}toString(){return`Struct<{${this.children.map(e=>`${e.name}:${e.type}`).join(", ")}}>`}}_q=Symbol.toStringTag;Struct[_q]=(i=>(i.children=null,i[Symbol.toStringTag]="Struct"))(Struct.prototype);class Union_ extends DataType{constructor(e,o,d){super(),this.mode=e,this.children=d,this.typeIds=o=Int32Array.from(o),this.typeIdToChildIndex=o.reduce((h,g,b)=>(h[g]=b)&&h||h,Object.create(null))}get typeId(){return Type$1.Union}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(e=>`${e.type}`).join(" | ")}>`}}_r$1=Symbol.toStringTag;Union_[_r$1]=(i=>(i.mode=null,i.typeIds=null,i.children=null,i.typeIdToChildIndex=null,i.ArrayType=Int8Array,i[Symbol.toStringTag]="Union"))(Union_.prototype);let FixedSizeBinary$1=class extends DataType{constructor(e){super(),this.byteWidth=e}get typeId(){return Type$1.FixedSizeBinary}toString(){return`FixedSizeBinary[${this.byteWidth}]`}};_s$1=Symbol.toStringTag;FixedSizeBinary$1[_s$1]=(i=>(i.byteWidth=null,i.ArrayType=Uint8Array,i[Symbol.toStringTag]="FixedSizeBinary"))(FixedSizeBinary$1.prototype);let FixedSizeList$1=class extends DataType{constructor(e,o){super(),this.listSize=e,this.children=[o]}get typeId(){return Type$1.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}};_t$1=Symbol.toStringTag;FixedSizeList$1[_t$1]=(i=>(i.children=null,i.listSize=null,i[Symbol.toStringTag]="FixedSizeList"))(FixedSizeList$1.prototype);class Map_ extends DataType{constructor(e,o=!1){var d,h,g;if(super(),this.children=[e],this.keysSorted=o,e&&(e.name="entries",!((d=e==null?void 0:e.type)===null||d===void 0)&&d.children)){const b=(h=e==null?void 0:e.type)===null||h===void 0?void 0:h.children[0];b&&(b.name="key");const $=(g=e==null?void 0:e.type)===null||g===void 0?void 0:g.children[1];$&&($.name="value")}}get typeId(){return Type$1.Map}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(e=>`${e.name}:${e.type}`).join(", ")}}>`}}_u=Symbol.toStringTag;Map_[_u]=(i=>(i.children=null,i.keysSorted=null,i[Symbol.toStringTag]="Map_"))(Map_.prototype);const getId=(i=>()=>++i)(-1);class Dictionary extends DataType{constructor(e,o,d,h){super(),this.indices=o,this.dictionary=e,this.isOrdered=h||!1,this.id=d==null?getId():bigIntToNumber(d)}get typeId(){return Type$1.Dictionary}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}_v=Symbol.toStringTag;Dictionary[_v]=(i=>(i.id=null,i.indices=null,i.isOrdered=null,i.dictionary=null,i[Symbol.toStringTag]="Dictionary"))(Dictionary.prototype);function strideForType(i){const e=i;switch(i.typeId){case Type$1.Decimal:return i.bitWidth/32;case Type$1.Timestamp:return 2;case Type$1.Date:return 1+e.unit;case Type$1.Interval:return 1+e.unit;case Type$1.FixedSizeList:return e.listSize;case Type$1.FixedSizeBinary:return e.byteWidth;default:return 1}}class Visitor{visitMany(e,...o){return e.map((d,h)=>this.visit(d,...o.map(g=>g[h])))}visit(...e){return this.getVisitFn(e[0],!1).apply(this,e)}getVisitFn(e,o=!0){return getVisitFn(this,e,o)}getVisitFnByTypeId(e,o=!0){return getVisitFnByTypeId(this,e,o)}visitNull(e,...o){return null}visitBool(e,...o){return null}visitInt(e,...o){return null}visitFloat(e,...o){return null}visitUtf8(e,...o){return null}visitBinary(e,...o){return null}visitFixedSizeBinary(e,...o){return null}visitDate(e,...o){return null}visitTimestamp(e,...o){return null}visitTime(e,...o){return null}visitDecimal(e,...o){return null}visitList(e,...o){return null}visitStruct(e,...o){return null}visitUnion(e,...o){return null}visitDictionary(e,...o){return null}visitInterval(e,...o){return null}visitDuration(e,...o){return null}visitFixedSizeList(e,...o){return null}visitMap(e,...o){return null}}function getVisitFn(i,e,o=!0){return typeof e=="number"?getVisitFnByTypeId(i,e,o):typeof e=="string"&&e in Type$1?getVisitFnByTypeId(i,Type$1[e],o):e&&e instanceof DataType?getVisitFnByTypeId(i,inferDType(e),o):e!=null&&e.type&&e.type instanceof DataType?getVisitFnByTypeId(i,inferDType(e.type),o):getVisitFnByTypeId(i,Type$1.NONE,o)}function getVisitFnByTypeId(i,e,o=!0){let d=null;switch(e){case Type$1.Null:d=i.visitNull;break;case Type$1.Bool:d=i.visitBool;break;case Type$1.Int:d=i.visitInt;break;case Type$1.Int8:d=i.visitInt8||i.visitInt;break;case Type$1.Int16:d=i.visitInt16||i.visitInt;break;case Type$1.Int32:d=i.visitInt32||i.visitInt;break;case Type$1.Int64:d=i.visitInt64||i.visitInt;break;case Type$1.Uint8:d=i.visitUint8||i.visitInt;break;case Type$1.Uint16:d=i.visitUint16||i.visitInt;break;case Type$1.Uint32:d=i.visitUint32||i.visitInt;break;case Type$1.Uint64:d=i.visitUint64||i.visitInt;break;case Type$1.Float:d=i.visitFloat;break;case Type$1.Float16:d=i.visitFloat16||i.visitFloat;break;case Type$1.Float32:d=i.visitFloat32||i.visitFloat;break;case Type$1.Float64:d=i.visitFloat64||i.visitFloat;break;case Type$1.Utf8:d=i.visitUtf8;break;case Type$1.Binary:d=i.visitBinary;break;case Type$1.FixedSizeBinary:d=i.visitFixedSizeBinary;break;case Type$1.Date:d=i.visitDate;break;case Type$1.DateDay:d=i.visitDateDay||i.visitDate;break;case Type$1.DateMillisecond:d=i.visitDateMillisecond||i.visitDate;break;case Type$1.Timestamp:d=i.visitTimestamp;break;case Type$1.TimestampSecond:d=i.visitTimestampSecond||i.visitTimestamp;break;case Type$1.TimestampMillisecond:d=i.visitTimestampMillisecond||i.visitTimestamp;break;case Type$1.TimestampMicrosecond:d=i.visitTimestampMicrosecond||i.visitTimestamp;break;case Type$1.TimestampNanosecond:d=i.visitTimestampNanosecond||i.visitTimestamp;break;case Type$1.Time:d=i.visitTime;break;case Type$1.TimeSecond:d=i.visitTimeSecond||i.visitTime;break;case Type$1.TimeMillisecond:d=i.visitTimeMillisecond||i.visitTime;break;case Type$1.TimeMicrosecond:d=i.visitTimeMicrosecond||i.visitTime;break;case Type$1.TimeNanosecond:d=i.visitTimeNanosecond||i.visitTime;break;case Type$1.Decimal:d=i.visitDecimal;break;case Type$1.List:d=i.visitList;break;case Type$1.Struct:d=i.visitStruct;break;case Type$1.Union:d=i.visitUnion;break;case Type$1.DenseUnion:d=i.visitDenseUnion||i.visitUnion;break;case Type$1.SparseUnion:d=i.visitSparseUnion||i.visitUnion;break;case Type$1.Dictionary:d=i.visitDictionary;break;case Type$1.Interval:d=i.visitInterval;break;case Type$1.IntervalDayTime:d=i.visitIntervalDayTime||i.visitInterval;break;case Type$1.IntervalYearMonth:d=i.visitIntervalYearMonth||i.visitInterval;break;case Type$1.Duration:d=i.visitDuration;break;case Type$1.DurationSecond:d=i.visitDurationSecond||i.visitDuration;break;case Type$1.DurationMillisecond:d=i.visitDurationMillisecond||i.visitDuration;break;case Type$1.DurationMicrosecond:d=i.visitDurationMicrosecond||i.visitDuration;break;case Type$1.DurationNanosecond:d=i.visitDurationNanosecond||i.visitDuration;break;case Type$1.FixedSizeList:d=i.visitFixedSizeList;break;case Type$1.Map:d=i.visitMap;break}if(typeof d=="function")return d;if(!o)return()=>null;throw new Error(`Unrecognized type '${Type$1[e]}'`)}function inferDType(i){switch(i.typeId){case Type$1.Null:return Type$1.Null;case Type$1.Int:{const{bitWidth:e,isSigned:o}=i;switch(e){case 8:return o?Type$1.Int8:Type$1.Uint8;case 16:return o?Type$1.Int16:Type$1.Uint16;case 32:return o?Type$1.Int32:Type$1.Uint32;case 64:return o?Type$1.Int64:Type$1.Uint64}return Type$1.Int}case Type$1.Float:switch(i.precision){case Precision$1.HALF:return Type$1.Float16;case Precision$1.SINGLE:return Type$1.Float32;case Precision$1.DOUBLE:return Type$1.Float64}return Type$1.Float;case Type$1.Binary:return Type$1.Binary;case Type$1.Utf8:return Type$1.Utf8;case Type$1.Bool:return Type$1.Bool;case Type$1.Decimal:return Type$1.Decimal;case Type$1.Time:switch(i.unit){case TimeUnit$1.SECOND:return Type$1.TimeSecond;case TimeUnit$1.MILLISECOND:return Type$1.TimeMillisecond;case TimeUnit$1.MICROSECOND:return Type$1.TimeMicrosecond;case TimeUnit$1.NANOSECOND:return Type$1.TimeNanosecond}return Type$1.Time;case Type$1.Timestamp:switch(i.unit){case TimeUnit$1.SECOND:return Type$1.TimestampSecond;case TimeUnit$1.MILLISECOND:return Type$1.TimestampMillisecond;case TimeUnit$1.MICROSECOND:return Type$1.TimestampMicrosecond;case TimeUnit$1.NANOSECOND:return Type$1.TimestampNanosecond}return Type$1.Timestamp;case Type$1.Date:switch(i.unit){case DateUnit$1.DAY:return Type$1.DateDay;case DateUnit$1.MILLISECOND:return Type$1.DateMillisecond}return Type$1.Date;case Type$1.Interval:switch(i.unit){case IntervalUnit$1.DAY_TIME:return Type$1.IntervalDayTime;case IntervalUnit$1.YEAR_MONTH:return Type$1.IntervalYearMonth}return Type$1.Interval;case Type$1.Duration:switch(i.unit){case TimeUnit$1.SECOND:return Type$1.DurationSecond;case TimeUnit$1.MILLISECOND:return Type$1.DurationMillisecond;case TimeUnit$1.MICROSECOND:return Type$1.DurationMicrosecond;case TimeUnit$1.NANOSECOND:return Type$1.DurationNanosecond}return Type$1.Duration;case Type$1.Map:return Type$1.Map;case Type$1.List:return Type$1.List;case Type$1.Struct:return Type$1.Struct;case Type$1.Union:switch(i.mode){case UnionMode$1.Dense:return Type$1.DenseUnion;case UnionMode$1.Sparse:return Type$1.SparseUnion}return Type$1.Union;case Type$1.FixedSizeBinary:return Type$1.FixedSizeBinary;case Type$1.FixedSizeList:return Type$1.FixedSizeList;case Type$1.Dictionary:return Type$1.Dictionary}throw new Error(`Unrecognized type '${Type$1[i.typeId]}'`)}Visitor.prototype.visitInt8=null;Visitor.prototype.visitInt16=null;Visitor.prototype.visitInt32=null;Visitor.prototype.visitInt64=null;Visitor.prototype.visitUint8=null;Visitor.prototype.visitUint16=null;Visitor.prototype.visitUint32=null;Visitor.prototype.visitUint64=null;Visitor.prototype.visitFloat16=null;Visitor.prototype.visitFloat32=null;Visitor.prototype.visitFloat64=null;Visitor.prototype.visitDateDay=null;Visitor.prototype.visitDateMillisecond=null;Visitor.prototype.visitTimestampSecond=null;Visitor.prototype.visitTimestampMillisecond=null;Visitor.prototype.visitTimestampMicrosecond=null;Visitor.prototype.visitTimestampNanosecond=null;Visitor.prototype.visitTimeSecond=null;Visitor.prototype.visitTimeMillisecond=null;Visitor.prototype.visitTimeMicrosecond=null;Visitor.prototype.visitTimeNanosecond=null;Visitor.prototype.visitDenseUnion=null;Visitor.prototype.visitSparseUnion=null;Visitor.prototype.visitIntervalDayTime=null;Visitor.prototype.visitIntervalYearMonth=null;Visitor.prototype.visitDuration=null;Visitor.prototype.visitDurationSecond=null;Visitor.prototype.visitDurationMillisecond=null;Visitor.prototype.visitDurationMicrosecond=null;Visitor.prototype.visitDurationNanosecond=null;const f64=new Float64Array(1),u32=new Uint32Array(f64.buffer);function uint16ToFloat64(i){const e=(i&31744)>>10,o=(i&1023)/1024,d=Math.pow(-1,(i&32768)>>15);switch(e){case 31:return d*(o?Number.NaN:1/0);case 0:return d*(o?6103515625e-14*o:0)}return d*Math.pow(2,e-15)*(1+o)}function float64ToUint16(i){if(i!==i)return 32256;f64[0]=i;const e=(u32[1]&2147483648)>>16&65535;let o=u32[1]&2146435072,d=0;return o>=1089470464?u32[0]>0?o=31744:(o=(o&2080374784)>>16,d=(u32[1]&1048575)>>10):o<=1056964608?(d=1048576+(u32[1]&1048575),d=1048576+(d<<(o>>20)-998)>>21,o=0):(o=o-1056964608>>10,d=(u32[1]&1048575)+512>>10),e|o|d&65535}class SetVisitor extends Visitor{}function wrapSet(i){return(e,o,d)=>{if(e.setValid(o,d!=null))return i(e,o,d)}}const setEpochMsToDays=(i,e,o)=>{i[e]=Math.trunc(o/864e5)},setEpochMsToMillisecondsLong=(i,e,o)=>{i[e]=Math.trunc(o%4294967296),i[e+1]=Math.trunc(o/4294967296)},setEpochMsToMicrosecondsLong=(i,e,o)=>{i[e]=Math.trunc(o*1e3%4294967296),i[e+1]=Math.trunc(o*1e3/4294967296)},setEpochMsToNanosecondsLong=(i,e,o)=>{i[e]=Math.trunc(o*1e6%4294967296),i[e+1]=Math.trunc(o*1e6/4294967296)},setVariableWidthBytes=(i,e,o,d)=>{if(o+1<e.length){const{[o]:h,[o+1]:g}=e;i.set(d.subarray(0,g-h),h)}},setBool=({offset:i,values:e},o,d)=>{const h=i+o;d?e[h>>3]|=1<<h%8:e[h>>3]&=~(1<<h%8)},setInt=({values:i},e,o)=>{i[e]=o},setFloat=({values:i},e,o)=>{i[e]=o},setFloat16=({values:i},e,o)=>{i[e]=float64ToUint16(o)},setAnyFloat=(i,e,o)=>{switch(i.type.precision){case Precision$1.HALF:return setFloat16(i,e,o);case Precision$1.SINGLE:case Precision$1.DOUBLE:return setFloat(i,e,o)}},setDateDay=({values:i},e,o)=>{setEpochMsToDays(i,e,o.valueOf())},setDateMillisecond=({values:i},e,o)=>{setEpochMsToMillisecondsLong(i,e*2,o.valueOf())},setFixedSizeBinary=({stride:i,values:e},o,d)=>{e.set(d.subarray(0,i),i*o)},setBinary=({values:i,valueOffsets:e},o,d)=>setVariableWidthBytes(i,e,o,d),setUtf8=({values:i,valueOffsets:e},o,d)=>{setVariableWidthBytes(i,e,o,encodeUtf8(d))},setDate=(i,e,o)=>{i.type.unit===DateUnit$1.DAY?setDateDay(i,e,o):setDateMillisecond(i,e,o)},setTimestampSecond=({values:i},e,o)=>setEpochMsToMillisecondsLong(i,e*2,o/1e3),setTimestampMillisecond=({values:i},e,o)=>setEpochMsToMillisecondsLong(i,e*2,o),setTimestampMicrosecond=({values:i},e,o)=>setEpochMsToMicrosecondsLong(i,e*2,o),setTimestampNanosecond=({values:i},e,o)=>setEpochMsToNanosecondsLong(i,e*2,o),setTimestamp=(i,e,o)=>{switch(i.type.unit){case TimeUnit$1.SECOND:return setTimestampSecond(i,e,o);case TimeUnit$1.MILLISECOND:return setTimestampMillisecond(i,e,o);case TimeUnit$1.MICROSECOND:return setTimestampMicrosecond(i,e,o);case TimeUnit$1.NANOSECOND:return setTimestampNanosecond(i,e,o)}},setTimeSecond=({values:i},e,o)=>{i[e]=o},setTimeMillisecond=({values:i},e,o)=>{i[e]=o},setTimeMicrosecond=({values:i},e,o)=>{i[e]=o},setTimeNanosecond=({values:i},e,o)=>{i[e]=o},setTime=(i,e,o)=>{switch(i.type.unit){case TimeUnit$1.SECOND:return setTimeSecond(i,e,o);case TimeUnit$1.MILLISECOND:return setTimeMillisecond(i,e,o);case TimeUnit$1.MICROSECOND:return setTimeMicrosecond(i,e,o);case TimeUnit$1.NANOSECOND:return setTimeNanosecond(i,e,o)}},setDecimal=({values:i,stride:e},o,d)=>{i.set(d.subarray(0,e),e*o)},setList=(i,e,o)=>{const d=i.children[0],h=i.valueOffsets,g=instance$6.getVisitFn(d);if(Array.isArray(o))for(let b=-1,$=h[e],j=h[e+1];$<j;)g(d,$++,o[++b]);else for(let b=-1,$=h[e],j=h[e+1];$<j;)g(d,$++,o.get(++b))},setMap=(i,e,o)=>{const d=i.children[0],{valueOffsets:h}=i,g=instance$6.getVisitFn(d);let{[e]:b,[e+1]:$}=h;const j=o instanceof Map?o.entries():Object.entries(o);for(const et of j)if(g(d,b,et),++b>=$)break},_setStructArrayValue=(i,e)=>(o,d,h,g)=>d&&o(d,i,e[g]),_setStructVectorValue=(i,e)=>(o,d,h,g)=>d&&o(d,i,e.get(g)),_setStructMapValue=(i,e)=>(o,d,h,g)=>d&&o(d,i,e.get(h.name)),_setStructObjectValue=(i,e)=>(o,d,h,g)=>d&&o(d,i,e[h.name]),setStruct=(i,e,o)=>{const d=i.type.children.map(g=>instance$6.getVisitFn(g.type)),h=o instanceof Map?_setStructMapValue(e,o):o instanceof Vector?_setStructVectorValue(e,o):Array.isArray(o)?_setStructArrayValue(e,o):_setStructObjectValue(e,o);i.type.children.forEach((g,b)=>h(d[b],i.children[b],g,b))},setUnion=(i,e,o)=>{i.type.mode===UnionMode$1.Dense?setDenseUnion(i,e,o):setSparseUnion(i,e,o)},setDenseUnion=(i,e,o)=>{const d=i.type.typeIdToChildIndex[i.typeIds[e]],h=i.children[d];instance$6.visit(h,i.valueOffsets[e],o)},setSparseUnion=(i,e,o)=>{const d=i.type.typeIdToChildIndex[i.typeIds[e]],h=i.children[d];instance$6.visit(h,e,o)},setDictionary=(i,e,o)=>{var d;(d=i.dictionary)===null||d===void 0||d.set(i.values[e],o)},setIntervalValue=(i,e,o)=>{i.type.unit===IntervalUnit$1.DAY_TIME?setIntervalDayTime(i,e,o):setIntervalYearMonth(i,e,o)},setIntervalDayTime=({values:i},e,o)=>{i.set(o.subarray(0,2),2*e)},setIntervalYearMonth=({values:i},e,o)=>{i[e]=o[0]*12+o[1]%12},setDurationSecond=({values:i},e,o)=>{i[e]=o},setDurationMillisecond=({values:i},e,o)=>{i[e]=o},setDurationMicrosecond=({values:i},e,o)=>{i[e]=o},setDurationNanosecond=({values:i},e,o)=>{i[e]=o},setDuration=(i,e,o)=>{switch(i.type.unit){case TimeUnit$1.SECOND:return setDurationSecond(i,e,o);case TimeUnit$1.MILLISECOND:return setDurationMillisecond(i,e,o);case TimeUnit$1.MICROSECOND:return setDurationMicrosecond(i,e,o);case TimeUnit$1.NANOSECOND:return setDurationNanosecond(i,e,o)}},setFixedSizeList=(i,e,o)=>{const{stride:d}=i,h=i.children[0],g=instance$6.getVisitFn(h);if(Array.isArray(o))for(let b=-1,$=e*d;++b<d;)g(h,$+b,o[b]);else for(let b=-1,$=e*d;++b<d;)g(h,$+b,o.get(b))};SetVisitor.prototype.visitBool=wrapSet(setBool);SetVisitor.prototype.visitInt=wrapSet(setInt);SetVisitor.prototype.visitInt8=wrapSet(setInt);SetVisitor.prototype.visitInt16=wrapSet(setInt);SetVisitor.prototype.visitInt32=wrapSet(setInt);SetVisitor.prototype.visitInt64=wrapSet(setInt);SetVisitor.prototype.visitUint8=wrapSet(setInt);SetVisitor.prototype.visitUint16=wrapSet(setInt);SetVisitor.prototype.visitUint32=wrapSet(setInt);SetVisitor.prototype.visitUint64=wrapSet(setInt);SetVisitor.prototype.visitFloat=wrapSet(setAnyFloat);SetVisitor.prototype.visitFloat16=wrapSet(setFloat16);SetVisitor.prototype.visitFloat32=wrapSet(setFloat);SetVisitor.prototype.visitFloat64=wrapSet(setFloat);SetVisitor.prototype.visitUtf8=wrapSet(setUtf8);SetVisitor.prototype.visitBinary=wrapSet(setBinary);SetVisitor.prototype.visitFixedSizeBinary=wrapSet(setFixedSizeBinary);SetVisitor.prototype.visitDate=wrapSet(setDate);SetVisitor.prototype.visitDateDay=wrapSet(setDateDay);SetVisitor.prototype.visitDateMillisecond=wrapSet(setDateMillisecond);SetVisitor.prototype.visitTimestamp=wrapSet(setTimestamp);SetVisitor.prototype.visitTimestampSecond=wrapSet(setTimestampSecond);SetVisitor.prototype.visitTimestampMillisecond=wrapSet(setTimestampMillisecond);SetVisitor.prototype.visitTimestampMicrosecond=wrapSet(setTimestampMicrosecond);SetVisitor.prototype.visitTimestampNanosecond=wrapSet(setTimestampNanosecond);SetVisitor.prototype.visitTime=wrapSet(setTime);SetVisitor.prototype.visitTimeSecond=wrapSet(setTimeSecond);SetVisitor.prototype.visitTimeMillisecond=wrapSet(setTimeMillisecond);SetVisitor.prototype.visitTimeMicrosecond=wrapSet(setTimeMicrosecond);SetVisitor.prototype.visitTimeNanosecond=wrapSet(setTimeNanosecond);SetVisitor.prototype.visitDecimal=wrapSet(setDecimal);SetVisitor.prototype.visitList=wrapSet(setList);SetVisitor.prototype.visitStruct=wrapSet(setStruct);SetVisitor.prototype.visitUnion=wrapSet(setUnion);SetVisitor.prototype.visitDenseUnion=wrapSet(setDenseUnion);SetVisitor.prototype.visitSparseUnion=wrapSet(setSparseUnion);SetVisitor.prototype.visitDictionary=wrapSet(setDictionary);SetVisitor.prototype.visitInterval=wrapSet(setIntervalValue);SetVisitor.prototype.visitIntervalDayTime=wrapSet(setIntervalDayTime);SetVisitor.prototype.visitIntervalYearMonth=wrapSet(setIntervalYearMonth);SetVisitor.prototype.visitDuration=wrapSet(setDuration);SetVisitor.prototype.visitDurationSecond=wrapSet(setDurationSecond);SetVisitor.prototype.visitDurationMillisecond=wrapSet(setDurationMillisecond);SetVisitor.prototype.visitDurationMicrosecond=wrapSet(setDurationMicrosecond);SetVisitor.prototype.visitDurationNanosecond=wrapSet(setDurationNanosecond);SetVisitor.prototype.visitFixedSizeList=wrapSet(setFixedSizeList);SetVisitor.prototype.visitMap=wrapSet(setMap);const instance$6=new SetVisitor,kParent=Symbol.for("parent"),kRowIndex=Symbol.for("rowIndex");class StructRow{constructor(e,o){return this[kParent]=e,this[kRowIndex]=o,new Proxy(this,new StructRowProxyHandler)}toArray(){return Object.values(this.toJSON())}toJSON(){const e=this[kRowIndex],o=this[kParent],d=o.type.children,h={};for(let g=-1,b=d.length;++g<b;)h[d[g].name]=instance$5.visit(o.children[g],e);return h}toString(){return`{${[...this].map(([e,o])=>`${valueToString(e)}: ${valueToString(o)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new StructRowIterator(this[kParent],this[kRowIndex])}}class StructRowIterator{constructor(e,o){this.childIndex=0,this.children=e.children,this.rowIndex=o,this.childFields=e.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const e=this.childIndex;return e<this.numChildren?(this.childIndex=e+1,{done:!1,value:[this.childFields[e].name,instance$5.visit(this.children[e],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties(StructRow.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[kParent]:{writable:!0,enumerable:!1,configurable:!1,value:null},[kRowIndex]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class StructRowProxyHandler{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(e){return e[kParent].type.children.map(o=>o.name)}has(e,o){return e[kParent].type.children.findIndex(d=>d.name===o)!==-1}getOwnPropertyDescriptor(e,o){if(e[kParent].type.children.findIndex(d=>d.name===o)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(e,o){if(Reflect.has(e,o))return e[o];const d=e[kParent].type.children.findIndex(h=>h.name===o);if(d!==-1){const h=instance$5.visit(e[kParent].children[d],e[kRowIndex]);return Reflect.set(e,o,h),h}}set(e,o,d){const h=e[kParent].type.children.findIndex(g=>g.name===o);return h!==-1?(instance$6.visit(e[kParent].children[h],e[kRowIndex],d),Reflect.set(e,o,d)):Reflect.has(e,o)||typeof o=="symbol"?Reflect.set(e,o,d):!1}}class GetVisitor extends Visitor{}function wrapGet(i){return(e,o)=>e.getValid(o)?i(e,o):null}const epochDaysToMs=(i,e)=>864e5*i[e],epochMillisecondsLongToMs=(i,e)=>4294967296*i[e+1]+(i[e]>>>0),epochMicrosecondsLongToMs=(i,e)=>4294967296*(i[e+1]/1e3)+(i[e]>>>0)/1e3,epochNanosecondsLongToMs=(i,e)=>4294967296*(i[e+1]/1e6)+(i[e]>>>0)/1e6,epochMillisecondsToDate=i=>new Date(i),epochDaysToDate=(i,e)=>epochMillisecondsToDate(epochDaysToMs(i,e)),epochMillisecondsLongToDate=(i,e)=>epochMillisecondsToDate(epochMillisecondsLongToMs(i,e)),getNull=(i,e)=>null,getVariableWidthBytes=(i,e,o)=>{if(o+1>=e.length)return null;const d=e[o],h=e[o+1];return i.subarray(d,h)},getBool$1=({offset:i,values:e},o)=>{const d=i+o;return(e[d>>3]&1<<d%8)!==0},getDateDay=({values:i},e)=>epochDaysToDate(i,e),getDateMillisecond=({values:i},e)=>epochMillisecondsLongToDate(i,e*2),getNumeric=({stride:i,values:e},o)=>e[i*o],getFloat16=({stride:i,values:e},o)=>uint16ToFloat64(e[i*o]),getBigInts=({values:i},e)=>i[e],getFixedSizeBinary=({stride:i,values:e},o)=>e.subarray(i*o,i*(o+1)),getBinary=({values:i,valueOffsets:e},o)=>getVariableWidthBytes(i,e,o),getUtf8=({values:i,valueOffsets:e},o)=>{const d=getVariableWidthBytes(i,e,o);return d!==null?decodeUtf8(d):null},getInt=({values:i},e)=>i[e],getFloat=({type:i,values:e},o)=>i.precision!==Precision$1.HALF?e[o]:uint16ToFloat64(e[o]),getDate=(i,e)=>i.type.unit===DateUnit$1.DAY?getDateDay(i,e):getDateMillisecond(i,e),getTimestampSecond=({values:i},e)=>1e3*epochMillisecondsLongToMs(i,e*2),getTimestampMillisecond=({values:i},e)=>epochMillisecondsLongToMs(i,e*2),getTimestampMicrosecond=({values:i},e)=>epochMicrosecondsLongToMs(i,e*2),getTimestampNanosecond=({values:i},e)=>epochNanosecondsLongToMs(i,e*2),getTimestamp=(i,e)=>{switch(i.type.unit){case TimeUnit$1.SECOND:return getTimestampSecond(i,e);case TimeUnit$1.MILLISECOND:return getTimestampMillisecond(i,e);case TimeUnit$1.MICROSECOND:return getTimestampMicrosecond(i,e);case TimeUnit$1.NANOSECOND:return getTimestampNanosecond(i,e)}},getTimeSecond=({values:i},e)=>i[e],getTimeMillisecond=({values:i},e)=>i[e],getTimeMicrosecond=({values:i},e)=>i[e],getTimeNanosecond=({values:i},e)=>i[e],getTime=(i,e)=>{switch(i.type.unit){case TimeUnit$1.SECOND:return getTimeSecond(i,e);case TimeUnit$1.MILLISECOND:return getTimeMillisecond(i,e);case TimeUnit$1.MICROSECOND:return getTimeMicrosecond(i,e);case TimeUnit$1.NANOSECOND:return getTimeNanosecond(i,e)}},getDecimal=({values:i,stride:e},o)=>BN.decimal(i.subarray(e*o,e*(o+1))),getList=(i,e)=>{const{valueOffsets:o,stride:d,children:h}=i,{[e*d]:g,[e*d+1]:b}=o,j=h[0].slice(g,b-g);return new Vector([j])},getMap=(i,e)=>{const{valueOffsets:o,children:d}=i,{[e]:h,[e+1]:g}=o,b=d[0];return new MapRow(b.slice(h,g-h))},getStruct=(i,e)=>new StructRow(i,e),getUnion=(i,e)=>i.type.mode===UnionMode$1.Dense?getDenseUnion(i,e):getSparseUnion(i,e),getDenseUnion=(i,e)=>{const o=i.type.typeIdToChildIndex[i.typeIds[e]],d=i.children[o];return instance$5.visit(d,i.valueOffsets[e])},getSparseUnion=(i,e)=>{const o=i.type.typeIdToChildIndex[i.typeIds[e]],d=i.children[o];return instance$5.visit(d,e)},getDictionary=(i,e)=>{var o;return(o=i.dictionary)===null||o===void 0?void 0:o.get(i.values[e])},getInterval=(i,e)=>i.type.unit===IntervalUnit$1.DAY_TIME?getIntervalDayTime(i,e):getIntervalYearMonth(i,e),getIntervalDayTime=({values:i},e)=>i.subarray(2*e,2*(e+1)),getIntervalYearMonth=({values:i},e)=>{const o=i[e],d=new Int32Array(2);return d[0]=Math.trunc(o/12),d[1]=Math.trunc(o%12),d},getDurationSecond=({values:i},e)=>i[e],getDurationMillisecond=({values:i},e)=>i[e],getDurationMicrosecond=({values:i},e)=>i[e],getDurationNanosecond=({values:i},e)=>i[e],getDuration=(i,e)=>{switch(i.type.unit){case TimeUnit$1.SECOND:return getDurationSecond(i,e);case TimeUnit$1.MILLISECOND:return getDurationMillisecond(i,e);case TimeUnit$1.MICROSECOND:return getDurationMicrosecond(i,e);case TimeUnit$1.NANOSECOND:return getDurationNanosecond(i,e)}},getFixedSizeList=(i,e)=>{const{stride:o,children:d}=i,g=d[0].slice(e*o,o);return new Vector([g])};GetVisitor.prototype.visitNull=wrapGet(getNull);GetVisitor.prototype.visitBool=wrapGet(getBool$1);GetVisitor.prototype.visitInt=wrapGet(getInt);GetVisitor.prototype.visitInt8=wrapGet(getNumeric);GetVisitor.prototype.visitInt16=wrapGet(getNumeric);GetVisitor.prototype.visitInt32=wrapGet(getNumeric);GetVisitor.prototype.visitInt64=wrapGet(getBigInts);GetVisitor.prototype.visitUint8=wrapGet(getNumeric);GetVisitor.prototype.visitUint16=wrapGet(getNumeric);GetVisitor.prototype.visitUint32=wrapGet(getNumeric);GetVisitor.prototype.visitUint64=wrapGet(getBigInts);GetVisitor.prototype.visitFloat=wrapGet(getFloat);GetVisitor.prototype.visitFloat16=wrapGet(getFloat16);GetVisitor.prototype.visitFloat32=wrapGet(getNumeric);GetVisitor.prototype.visitFloat64=wrapGet(getNumeric);GetVisitor.prototype.visitUtf8=wrapGet(getUtf8);GetVisitor.prototype.visitBinary=wrapGet(getBinary);GetVisitor.prototype.visitFixedSizeBinary=wrapGet(getFixedSizeBinary);GetVisitor.prototype.visitDate=wrapGet(getDate);GetVisitor.prototype.visitDateDay=wrapGet(getDateDay);GetVisitor.prototype.visitDateMillisecond=wrapGet(getDateMillisecond);GetVisitor.prototype.visitTimestamp=wrapGet(getTimestamp);GetVisitor.prototype.visitTimestampSecond=wrapGet(getTimestampSecond);GetVisitor.prototype.visitTimestampMillisecond=wrapGet(getTimestampMillisecond);GetVisitor.prototype.visitTimestampMicrosecond=wrapGet(getTimestampMicrosecond);GetVisitor.prototype.visitTimestampNanosecond=wrapGet(getTimestampNanosecond);GetVisitor.prototype.visitTime=wrapGet(getTime);GetVisitor.prototype.visitTimeSecond=wrapGet(getTimeSecond);GetVisitor.prototype.visitTimeMillisecond=wrapGet(getTimeMillisecond);GetVisitor.prototype.visitTimeMicrosecond=wrapGet(getTimeMicrosecond);GetVisitor.prototype.visitTimeNanosecond=wrapGet(getTimeNanosecond);GetVisitor.prototype.visitDecimal=wrapGet(getDecimal);GetVisitor.prototype.visitList=wrapGet(getList);GetVisitor.prototype.visitStruct=wrapGet(getStruct);GetVisitor.prototype.visitUnion=wrapGet(getUnion);GetVisitor.prototype.visitDenseUnion=wrapGet(getDenseUnion);GetVisitor.prototype.visitSparseUnion=wrapGet(getSparseUnion);GetVisitor.prototype.visitDictionary=wrapGet(getDictionary);GetVisitor.prototype.visitInterval=wrapGet(getInterval);GetVisitor.prototype.visitIntervalDayTime=wrapGet(getIntervalDayTime);GetVisitor.prototype.visitIntervalYearMonth=wrapGet(getIntervalYearMonth);GetVisitor.prototype.visitDuration=wrapGet(getDuration);GetVisitor.prototype.visitDurationSecond=wrapGet(getDurationSecond);GetVisitor.prototype.visitDurationMillisecond=wrapGet(getDurationMillisecond);GetVisitor.prototype.visitDurationMicrosecond=wrapGet(getDurationMicrosecond);GetVisitor.prototype.visitDurationNanosecond=wrapGet(getDurationNanosecond);GetVisitor.prototype.visitFixedSizeList=wrapGet(getFixedSizeList);GetVisitor.prototype.visitMap=wrapGet(getMap);const instance$5=new GetVisitor,kKeys=Symbol.for("keys"),kVals=Symbol.for("vals");class MapRow{constructor(e){return this[kKeys]=new Vector([e.children[0]]).memoize(),this[kVals]=e.children[1],new Proxy(this,new MapRowProxyHandler)}[Symbol.iterator](){return new MapRowIterator(this[kKeys],this[kVals])}get size(){return this[kKeys].length}toArray(){return Object.values(this.toJSON())}toJSON(){const e=this[kKeys],o=this[kVals],d={};for(let h=-1,g=e.length;++h<g;)d[e.get(h)]=instance$5.visit(o,h);return d}toString(){return`{${[...this].map(([e,o])=>`${valueToString(e)}: ${valueToString(o)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}class MapRowIterator{constructor(e,o){this.keys=e,this.vals=o,this.keyIndex=0,this.numKeys=e.length}[Symbol.iterator](){return this}next(){const e=this.keyIndex;return e===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(e),instance$5.visit(this.vals,e)]})}}class MapRowProxyHandler{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(e){return e[kKeys].toArray().map(String)}has(e,o){return e[kKeys].includes(o)}getOwnPropertyDescriptor(e,o){if(e[kKeys].indexOf(o)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(e,o){if(Reflect.has(e,o))return e[o];const d=e[kKeys].indexOf(o);if(d!==-1){const h=instance$5.visit(Reflect.get(e,kVals),d);return Reflect.set(e,o,h),h}}set(e,o,d){const h=e[kKeys].indexOf(o);return h!==-1?(instance$6.visit(Reflect.get(e,kVals),h,d),Reflect.set(e,o,d)):Reflect.has(e,o)?Reflect.set(e,o,d):!1}}Object.defineProperties(MapRow.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[kKeys]:{writable:!0,enumerable:!1,configurable:!1,value:null},[kVals]:{writable:!0,enumerable:!1,configurable:!1,value:null}});let tmp;function clampRange(i,e,o,d){const{length:h=0}=i;let g=typeof e!="number"?0:e,b=typeof o!="number"?h:o;return g<0&&(g=(g%h+h)%h),b<0&&(b=(b%h+h)%h),b<g&&(tmp=g,g=b,b=tmp),b>h&&(b=h),d?d(i,g,b):[g,b]}const isNaNFast=i=>i!==i;function createElementComparator(i){if(typeof i!=="object"||i===null)return isNaNFast(i)?isNaNFast:o=>o===i;if(i instanceof Date){const o=i.valueOf();return d=>d instanceof Date?d.valueOf()===o:!1}return ArrayBuffer.isView(i)?o=>o?compareArrayLike(i,o):!1:i instanceof Map?createMapComparator(i):Array.isArray(i)?createArrayLikeComparator(i):i instanceof Vector?createVectorComparator(i):createObjectComparator(i,!0)}function createArrayLikeComparator(i){const e=[];for(let o=-1,d=i.length;++o<d;)e[o]=createElementComparator(i[o]);return createSubElementsComparator(e)}function createMapComparator(i){let e=-1;const o=[];for(const d of i.values())o[++e]=createElementComparator(d);return createSubElementsComparator(o)}function createVectorComparator(i){const e=[];for(let o=-1,d=i.length;++o<d;)e[o]=createElementComparator(i.get(o));return createSubElementsComparator(e)}function createObjectComparator(i,e=!1){const o=Object.keys(i);if(!e&&o.length===0)return()=>!1;const d=[];for(let h=-1,g=o.length;++h<g;)d[h]=createElementComparator(i[o[h]]);return createSubElementsComparator(d,o)}function createSubElementsComparator(i,e){return o=>{if(!o||typeof o!="object")return!1;switch(o.constructor){case Array:return compareArray(i,o);case Map:return compareObject(i,o,o.keys());case MapRow:case StructRow:case Object:case void 0:return compareObject(i,o,e||Object.keys(o))}return o instanceof Vector?compareVector(i,o):!1}}function compareArray(i,e){const o=i.length;if(e.length!==o)return!1;for(let d=-1;++d<o;)if(!i[d](e[d]))return!1;return!0}function compareVector(i,e){const o=i.length;if(e.length!==o)return!1;for(let d=-1;++d<o;)if(!i[d](e.get(d)))return!1;return!0}function compareObject(i,e,o){const d=o[Symbol.iterator](),h=e instanceof Map?e.keys():Object.keys(e)[Symbol.iterator](),g=e instanceof Map?e.values():Object.values(e)[Symbol.iterator]();let b=0;const $=i.length;let j=g.next(),et=d.next(),tt=h.next();for(;b<$&&!et.done&&!tt.done&&!j.done&&!(et.value!==tt.value||!i[b](j.value));++b,et=d.next(),tt=h.next(),j=g.next());return b===$&&et.done&&tt.done&&j.done?!0:(d.return&&d.return(),h.return&&h.return(),g.return&&g.return(),!1)}function getBool(i,e,o,d){return(o&1<<d)!==0}function getBit(i,e,o,d){return(o&1<<d)>>d}function truncateBitmap(i,e,o){const d=o.byteLength+7&-8;if(i>0||o.byteLength<d){const h=new Uint8Array(d);return h.set(i%8===0?o.subarray(i>>3):packBools(new BitIterator(o,i,e,null,getBool)).subarray(0,d)),h}return o}function packBools(i){const e=[];let o=0,d=0,h=0;for(const b of i)b&&(h|=1<<d),++d===8&&(e[o++]=h,h=d=0);(o===0||d>0)&&(e[o++]=h);const g=new Uint8Array(e.length+7&-8);return g.set(e),g}class BitIterator{constructor(e,o,d,h,g){this.bytes=e,this.length=d,this.context=h,this.get=g,this.bit=o%8,this.byteIndex=o>>3,this.byte=e[this.byteIndex++],this.index=0}next(){return this.index<this.length?(this.bit===8&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}function popcnt_bit_range(i,e,o){if(o-e<=0)return 0;if(o-e<8){let g=0;for(const b of new BitIterator(i,e,o-e,i,getBit))g+=b;return g}const d=o>>3<<3,h=e+(e%8===0?0:8-e%8);return popcnt_bit_range(i,e,h)+popcnt_bit_range(i,d,o)+popcnt_array(i,h>>3,d-h>>3)}function popcnt_array(i,e,o){let d=0,h=Math.trunc(e);const g=new DataView(i.buffer,i.byteOffset,i.byteLength),b=o===void 0?i.byteLength:h+o;for(;b-h>=4;)d+=popcnt_uint32(g.getUint32(h)),h+=4;for(;b-h>=2;)d+=popcnt_uint32(g.getUint16(h)),h+=2;for(;b-h>=1;)d+=popcnt_uint32(g.getUint8(h)),h+=1;return d}function popcnt_uint32(i){let e=Math.trunc(i);return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),(e+(e>>>4)&252645135)*16843009>>>24}const kUnknownNullCount=-1;class Data{get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get nullable(){if(this._nullCount!==0){const{type:e}=this;return DataType.isSparseUnion(e)?this.children.some(o=>o.nullable):DataType.isDenseUnion(e)?this.children.some(o=>o.nullable):this.nullBitmap&&this.nullBitmap.byteLength>0}return!0}get byteLength(){let e=0;const{valueOffsets:o,values:d,nullBitmap:h,typeIds:g}=this;return o&&(e+=o.byteLength),d&&(e+=d.byteLength),h&&(e+=h.byteLength),g&&(e+=g.byteLength),this.children.reduce((b,$)=>b+$.byteLength,e)}get nullCount(){if(DataType.isUnion(this.type))return this.children.reduce((d,h)=>d+h.nullCount,0);let e=this._nullCount,o;return e<=kUnknownNullCount&&(o=this.nullBitmap)&&(this._nullCount=e=this.length-popcnt_bit_range(o,this.offset,this.offset+this.length)),e}constructor(e,o,d,h,g,b=[],$){this.type=e,this.children=b,this.dictionary=$,this.offset=Math.floor(Math.max(o||0,0)),this.length=Math.floor(Math.max(d||0,0)),this._nullCount=Math.floor(Math.max(h||0,-1));let j;g instanceof Data?(this.stride=g.stride,this.values=g.values,this.typeIds=g.typeIds,this.nullBitmap=g.nullBitmap,this.valueOffsets=g.valueOffsets):(this.stride=strideForType(e),g&&((j=g[0])&&(this.valueOffsets=j),(j=g[1])&&(this.values=j),(j=g[2])&&(this.nullBitmap=j),(j=g[3])&&(this.typeIds=j)))}getValid(e){const{type:o}=this;if(DataType.isUnion(o)){const d=o,h=this.children[d.typeIdToChildIndex[this.typeIds[e]]],g=d.mode===UnionMode$1.Dense?this.valueOffsets[e]:e;return h.getValid(g)}if(this.nullable&&this.nullCount>0){const d=this.offset+e;return(this.nullBitmap[d>>3]&1<<d%8)!==0}return!0}setValid(e,o){let d;const{type:h}=this;if(DataType.isUnion(h)){const g=h,b=this.children[g.typeIdToChildIndex[this.typeIds[e]]],$=g.mode===UnionMode$1.Dense?this.valueOffsets[e]:e;d=b.getValid($),b.setValid($,o)}else{let{nullBitmap:g}=this;const{offset:b,length:$}=this,j=b+e,et=1<<j%8,tt=j>>3;(!g||g.byteLength<=tt)&&(g=new Uint8Array((b+$+63&-64)>>3).fill(255),this.nullCount>0&&g.set(truncateBitmap(b,$,this.nullBitmap),0),Object.assign(this,{nullBitmap:g,_nullCount:-1}));const nt=g[tt];d=(nt&et)!==0,o?g[tt]=nt|et:g[tt]=nt&~et}return d!==!!o&&(this._nullCount=this.nullCount+(o?-1:1)),o}clone(e=this.type,o=this.offset,d=this.length,h=this._nullCount,g=this,b=this.children){return new Data(e,o,d,h,g,b,this.dictionary)}slice(e,o){const{stride:d,typeId:h,children:g}=this,b=+(this._nullCount===0)-1,$=h===16?d:1,j=this._sliceBuffers(e,o,d,h);return this.clone(this.type,this.offset+e,o,b,j,g.length===0||this.valueOffsets?g:this._sliceChildren(g,$*e,$*o))}_changeLengthAndBackfillNullBitmap(e){if(this.typeId===Type$1.Null)return this.clone(this.type,0,e,0);const{length:o,nullCount:d}=this,h=new Uint8Array((e+63&-64)>>3).fill(255,0,o>>3);h[o>>3]=(1<<o-(o&-8))-1,d>0&&h.set(truncateBitmap(this.offset,o,this.nullBitmap),0);const g=this.buffers;return g[BufferType.VALIDITY]=h,this.clone(this.type,0,e,d+(e-o),g)}_sliceBuffers(e,o,d,h){let g;const{buffers:b}=this;return(g=b[BufferType.TYPE])&&(b[BufferType.TYPE]=g.subarray(e,e+o)),(g=b[BufferType.OFFSET])&&(b[BufferType.OFFSET]=g.subarray(e,e+o+1))||(g=b[BufferType.DATA])&&(b[BufferType.DATA]=h===6?g:g.subarray(d*e,d*(e+o))),b}_sliceChildren(e,o,d){return e.map(h=>h.slice(o,d))}}Data.prototype.children=Object.freeze([]);class MakeDataVisitor extends Visitor{visit(e){return this.getVisitFn(e.type).call(this,e)}visitNull(e){const{["type"]:o,["offset"]:d=0,["length"]:h=0}=e;return new Data(o,d,h,h)}visitBool(e){const{["type"]:o,["offset"]:d=0}=e,h=toUint8Array(e.nullBitmap),g=toArrayBufferView(o.ArrayType,e.data),{["length"]:b=g.length>>3,["nullCount"]:$=e.nullBitmap?-1:0}=e;return new Data(o,d,b,$,[void 0,g,h])}visitInt(e){const{["type"]:o,["offset"]:d=0}=e,h=toUint8Array(e.nullBitmap),g=toArrayBufferView(o.ArrayType,e.data),{["length"]:b=g.length,["nullCount"]:$=e.nullBitmap?-1:0}=e;return new Data(o,d,b,$,[void 0,g,h])}visitFloat(e){const{["type"]:o,["offset"]:d=0}=e,h=toUint8Array(e.nullBitmap),g=toArrayBufferView(o.ArrayType,e.data),{["length"]:b=g.length,["nullCount"]:$=e.nullBitmap?-1:0}=e;return new Data(o,d,b,$,[void 0,g,h])}visitUtf8(e){const{["type"]:o,["offset"]:d=0}=e,h=toUint8Array(e.data),g=toUint8Array(e.nullBitmap),b=toInt32Array(e.valueOffsets),{["length"]:$=b.length-1,["nullCount"]:j=e.nullBitmap?-1:0}=e;return new Data(o,d,$,j,[b,h,g])}visitBinary(e){const{["type"]:o,["offset"]:d=0}=e,h=toUint8Array(e.data),g=toUint8Array(e.nullBitmap),b=toInt32Array(e.valueOffsets),{["length"]:$=b.length-1,["nullCount"]:j=e.nullBitmap?-1:0}=e;return new Data(o,d,$,j,[b,h,g])}visitFixedSizeBinary(e){const{["type"]:o,["offset"]:d=0}=e,h=toUint8Array(e.nullBitmap),g=toArrayBufferView(o.ArrayType,e.data),{["length"]:b=g.length/strideForType(o),["nullCount"]:$=e.nullBitmap?-1:0}=e;return new Data(o,d,b,$,[void 0,g,h])}visitDate(e){const{["type"]:o,["offset"]:d=0}=e,h=toUint8Array(e.nullBitmap),g=toArrayBufferView(o.ArrayType,e.data),{["length"]:b=g.length/strideForType(o),["nullCount"]:$=e.nullBitmap?-1:0}=e;return new Data(o,d,b,$,[void 0,g,h])}visitTimestamp(e){const{["type"]:o,["offset"]:d=0}=e,h=toUint8Array(e.nullBitmap),g=toArrayBufferView(o.ArrayType,e.data),{["length"]:b=g.length/strideForType(o),["nullCount"]:$=e.nullBitmap?-1:0}=e;return new Data(o,d,b,$,[void 0,g,h])}visitTime(e){const{["type"]:o,["offset"]:d=0}=e,h=toUint8Array(e.nullBitmap),g=toArrayBufferView(o.ArrayType,e.data),{["length"]:b=g.length/strideForType(o),["nullCount"]:$=e.nullBitmap?-1:0}=e;return new Data(o,d,b,$,[void 0,g,h])}visitDecimal(e){const{["type"]:o,["offset"]:d=0}=e,h=toUint8Array(e.nullBitmap),g=toArrayBufferView(o.ArrayType,e.data),{["length"]:b=g.length/strideForType(o),["nullCount"]:$=e.nullBitmap?-1:0}=e;return new Data(o,d,b,$,[void 0,g,h])}visitList(e){const{["type"]:o,["offset"]:d=0,["child"]:h}=e,g=toUint8Array(e.nullBitmap),b=toInt32Array(e.valueOffsets),{["length"]:$=b.length-1,["nullCount"]:j=e.nullBitmap?-1:0}=e;return new Data(o,d,$,j,[b,void 0,g],[h])}visitStruct(e){const{["type"]:o,["offset"]:d=0,["children"]:h=[]}=e,g=toUint8Array(e.nullBitmap),{length:b=h.reduce((j,{length:et})=>Math.max(j,et),0),nullCount:$=e.nullBitmap?-1:0}=e;return new Data(o,d,b,$,[void 0,void 0,g],h)}visitUnion(e){const{["type"]:o,["offset"]:d=0,["children"]:h=[]}=e,g=toArrayBufferView(o.ArrayType,e.typeIds),{["length"]:b=g.length,["nullCount"]:$=-1}=e;if(DataType.isSparseUnion(o))return new Data(o,d,b,$,[void 0,void 0,void 0,g],h);const j=toInt32Array(e.valueOffsets);return new Data(o,d,b,$,[j,void 0,void 0,g],h)}visitDictionary(e){const{["type"]:o,["offset"]:d=0}=e,h=toUint8Array(e.nullBitmap),g=toArrayBufferView(o.indices.ArrayType,e.data),{["dictionary"]:b=new Vector([new MakeDataVisitor().visit({type:o.dictionary})])}=e,{["length"]:$=g.length,["nullCount"]:j=e.nullBitmap?-1:0}=e;return new Data(o,d,$,j,[void 0,g,h],[],b)}visitInterval(e){const{["type"]:o,["offset"]:d=0}=e,h=toUint8Array(e.nullBitmap),g=toArrayBufferView(o.ArrayType,e.data),{["length"]:b=g.length/strideForType(o),["nullCount"]:$=e.nullBitmap?-1:0}=e;return new Data(o,d,b,$,[void 0,g,h])}visitDuration(e){const{["type"]:o,["offset"]:d=0}=e,h=toUint8Array(e.nullBitmap),g=toArrayBufferView(o.ArrayType,e.data),{["length"]:b=g.length,["nullCount"]:$=e.nullBitmap?-1:0}=e;return new Data(o,d,b,$,[void 0,g,h])}visitFixedSizeList(e){const{["type"]:o,["offset"]:d=0,["child"]:h=new MakeDataVisitor().visit({type:o.valueType})}=e,g=toUint8Array(e.nullBitmap),{["length"]:b=h.length/strideForType(o),["nullCount"]:$=e.nullBitmap?-1:0}=e;return new Data(o,d,b,$,[void 0,void 0,g],[h])}visitMap(e){const{["type"]:o,["offset"]:d=0,["child"]:h=new MakeDataVisitor().visit({type:o.childType})}=e,g=toUint8Array(e.nullBitmap),b=toInt32Array(e.valueOffsets),{["length"]:$=b.length-1,["nullCount"]:j=e.nullBitmap?-1:0}=e;return new Data(o,d,$,j,[b,void 0,g],[h])}}const makeDataVisitor=new MakeDataVisitor;function makeData(i){return makeDataVisitor.visit(i)}class ChunkedIterator{constructor(e=0,o){this.numChunks=e,this.getChunkIterator=o,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const e=this.chunkIterator.next();if(!e.done)return e;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}function computeChunkNullCounts(i){return i.reduce((e,o)=>e+o.nullCount,0)}function computeChunkOffsets(i){return i.reduce((e,o,d)=>(e[d+1]=e[d]+o.length,e),new Uint32Array(i.length+1))}function sliceChunks(i,e,o,d){const h=[];for(let g=-1,b=i.length;++g<b;){const $=i[g],j=e[g],{length:et}=$;if(j>=d)break;if(o>=j+et)continue;if(j>=o&&j+et<=d){h.push($);continue}const tt=Math.max(0,o-j),nt=Math.min(d-j,et);h.push($.slice(tt,nt-tt))}return h.length===0&&h.push(i[0].slice(0,0)),h}function binarySearch(i,e,o,d){let h=0,g=0,b=e.length-1;do{if(h>=b-1)return o<e[b]?d(i,h,o-e[h]):null;g=h+Math.trunc((b-h)*.5),o<e[g]?b=g:h=g}while(h<b)}function isChunkedValid(i,e){return i.getValid(e)}function wrapChunkedCall1(i){function e(o,d,h){return i(o[d],h)}return function(o){const d=this.data;return binarySearch(d,this._offsets,o,e)}}function wrapChunkedCall2(i){let e;function o(d,h,g){return i(d[h],g,e)}return function(d,h){const g=this.data;e=h;const b=binarySearch(g,this._offsets,d,o);return e=void 0,b}}function wrapChunkedIndexOf(i){let e;function o(d,h,g){let b=g,$=0,j=0;for(let et=h-1,tt=d.length;++et<tt;){const nt=d[et];if(~($=i(nt,e,b)))return j+$;b=0,j+=nt.length}return-1}return function(d,h){e=d;const g=this.data,b=typeof h!="number"?o(g,0,0):binarySearch(g,this._offsets,h,o);return e=void 0,b}}class IndexOfVisitor extends Visitor{}function nullIndexOf(i,e){return e===null&&i.length>0?0:-1}function indexOfNull(i,e){const{nullBitmap:o}=i;if(!o||i.nullCount<=0)return-1;let d=0;for(const h of new BitIterator(o,i.offset+(e||0),i.length,o,getBool)){if(!h)return d;++d}return-1}function indexOfValue(i,e,o){if(e===void 0)return-1;if(e===null)switch(i.typeId){case Type$1.Union:break;case Type$1.Dictionary:break;default:return indexOfNull(i,o)}const d=instance$5.getVisitFn(i),h=createElementComparator(e);for(let g=(o||0)-1,b=i.length;++g<b;)if(h(d(i,g)))return g;return-1}function indexOfUnion(i,e,o){const d=instance$5.getVisitFn(i),h=createElementComparator(e);for(let g=(o||0)-1,b=i.length;++g<b;)if(h(d(i,g)))return g;return-1}IndexOfVisitor.prototype.visitNull=nullIndexOf;IndexOfVisitor.prototype.visitBool=indexOfValue;IndexOfVisitor.prototype.visitInt=indexOfValue;IndexOfVisitor.prototype.visitInt8=indexOfValue;IndexOfVisitor.prototype.visitInt16=indexOfValue;IndexOfVisitor.prototype.visitInt32=indexOfValue;IndexOfVisitor.prototype.visitInt64=indexOfValue;IndexOfVisitor.prototype.visitUint8=indexOfValue;IndexOfVisitor.prototype.visitUint16=indexOfValue;IndexOfVisitor.prototype.visitUint32=indexOfValue;IndexOfVisitor.prototype.visitUint64=indexOfValue;IndexOfVisitor.prototype.visitFloat=indexOfValue;IndexOfVisitor.prototype.visitFloat16=indexOfValue;IndexOfVisitor.prototype.visitFloat32=indexOfValue;IndexOfVisitor.prototype.visitFloat64=indexOfValue;IndexOfVisitor.prototype.visitUtf8=indexOfValue;IndexOfVisitor.prototype.visitBinary=indexOfValue;IndexOfVisitor.prototype.visitFixedSizeBinary=indexOfValue;IndexOfVisitor.prototype.visitDate=indexOfValue;IndexOfVisitor.prototype.visitDateDay=indexOfValue;IndexOfVisitor.prototype.visitDateMillisecond=indexOfValue;IndexOfVisitor.prototype.visitTimestamp=indexOfValue;IndexOfVisitor.prototype.visitTimestampSecond=indexOfValue;IndexOfVisitor.prototype.visitTimestampMillisecond=indexOfValue;IndexOfVisitor.prototype.visitTimestampMicrosecond=indexOfValue;IndexOfVisitor.prototype.visitTimestampNanosecond=indexOfValue;IndexOfVisitor.prototype.visitTime=indexOfValue;IndexOfVisitor.prototype.visitTimeSecond=indexOfValue;IndexOfVisitor.prototype.visitTimeMillisecond=indexOfValue;IndexOfVisitor.prototype.visitTimeMicrosecond=indexOfValue;IndexOfVisitor.prototype.visitTimeNanosecond=indexOfValue;IndexOfVisitor.prototype.visitDecimal=indexOfValue;IndexOfVisitor.prototype.visitList=indexOfValue;IndexOfVisitor.prototype.visitStruct=indexOfValue;IndexOfVisitor.prototype.visitUnion=indexOfValue;IndexOfVisitor.prototype.visitDenseUnion=indexOfUnion;IndexOfVisitor.prototype.visitSparseUnion=indexOfUnion;IndexOfVisitor.prototype.visitDictionary=indexOfValue;IndexOfVisitor.prototype.visitInterval=indexOfValue;IndexOfVisitor.prototype.visitIntervalDayTime=indexOfValue;IndexOfVisitor.prototype.visitIntervalYearMonth=indexOfValue;IndexOfVisitor.prototype.visitDuration=indexOfValue;IndexOfVisitor.prototype.visitDurationSecond=indexOfValue;IndexOfVisitor.prototype.visitDurationMillisecond=indexOfValue;IndexOfVisitor.prototype.visitDurationMicrosecond=indexOfValue;IndexOfVisitor.prototype.visitDurationNanosecond=indexOfValue;IndexOfVisitor.prototype.visitFixedSizeList=indexOfValue;IndexOfVisitor.prototype.visitMap=indexOfValue;const instance$4=new IndexOfVisitor;class IteratorVisitor extends Visitor{}function vectorIterator(i){const{type:e}=i;if(i.nullCount===0&&i.stride===1&&(e.typeId===Type$1.Timestamp||e instanceof Int_&&e.bitWidth!==64||e instanceof Time_&&e.bitWidth!==64||e instanceof Float&&e.precision!==Precision$1.HALF))return new ChunkedIterator(i.data.length,d=>{const h=i.data[d];return h.values.subarray(0,h.length)[Symbol.iterator]()});let o=0;return new ChunkedIterator(i.data.length,d=>{const g=i.data[d].length,b=i.slice(o,o+g);return o+=g,new VectorIterator(b)})}class VectorIterator{constructor(e){this.vector=e,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}IteratorVisitor.prototype.visitNull=vectorIterator;IteratorVisitor.prototype.visitBool=vectorIterator;IteratorVisitor.prototype.visitInt=vectorIterator;IteratorVisitor.prototype.visitInt8=vectorIterator;IteratorVisitor.prototype.visitInt16=vectorIterator;IteratorVisitor.prototype.visitInt32=vectorIterator;IteratorVisitor.prototype.visitInt64=vectorIterator;IteratorVisitor.prototype.visitUint8=vectorIterator;IteratorVisitor.prototype.visitUint16=vectorIterator;IteratorVisitor.prototype.visitUint32=vectorIterator;IteratorVisitor.prototype.visitUint64=vectorIterator;IteratorVisitor.prototype.visitFloat=vectorIterator;IteratorVisitor.prototype.visitFloat16=vectorIterator;IteratorVisitor.prototype.visitFloat32=vectorIterator;IteratorVisitor.prototype.visitFloat64=vectorIterator;IteratorVisitor.prototype.visitUtf8=vectorIterator;IteratorVisitor.prototype.visitBinary=vectorIterator;IteratorVisitor.prototype.visitFixedSizeBinary=vectorIterator;IteratorVisitor.prototype.visitDate=vectorIterator;IteratorVisitor.prototype.visitDateDay=vectorIterator;IteratorVisitor.prototype.visitDateMillisecond=vectorIterator;IteratorVisitor.prototype.visitTimestamp=vectorIterator;IteratorVisitor.prototype.visitTimestampSecond=vectorIterator;IteratorVisitor.prototype.visitTimestampMillisecond=vectorIterator;IteratorVisitor.prototype.visitTimestampMicrosecond=vectorIterator;IteratorVisitor.prototype.visitTimestampNanosecond=vectorIterator;IteratorVisitor.prototype.visitTime=vectorIterator;IteratorVisitor.prototype.visitTimeSecond=vectorIterator;IteratorVisitor.prototype.visitTimeMillisecond=vectorIterator;IteratorVisitor.prototype.visitTimeMicrosecond=vectorIterator;IteratorVisitor.prototype.visitTimeNanosecond=vectorIterator;IteratorVisitor.prototype.visitDecimal=vectorIterator;IteratorVisitor.prototype.visitList=vectorIterator;IteratorVisitor.prototype.visitStruct=vectorIterator;IteratorVisitor.prototype.visitUnion=vectorIterator;IteratorVisitor.prototype.visitDenseUnion=vectorIterator;IteratorVisitor.prototype.visitSparseUnion=vectorIterator;IteratorVisitor.prototype.visitDictionary=vectorIterator;IteratorVisitor.prototype.visitInterval=vectorIterator;IteratorVisitor.prototype.visitIntervalDayTime=vectorIterator;IteratorVisitor.prototype.visitIntervalYearMonth=vectorIterator;IteratorVisitor.prototype.visitDuration=vectorIterator;IteratorVisitor.prototype.visitDurationSecond=vectorIterator;IteratorVisitor.prototype.visitDurationMillisecond=vectorIterator;IteratorVisitor.prototype.visitDurationMicrosecond=vectorIterator;IteratorVisitor.prototype.visitDurationNanosecond=vectorIterator;IteratorVisitor.prototype.visitFixedSizeList=vectorIterator;IteratorVisitor.prototype.visitMap=vectorIterator;const instance$3=new IteratorVisitor,sum=(i,e)=>i+e;class GetByteLengthVisitor extends Visitor{visitNull(e,o){return 0}visitInt(e,o){return e.type.bitWidth/8}visitFloat(e,o){return e.type.ArrayType.BYTES_PER_ELEMENT}visitBool(e,o){return 1/8}visitDecimal(e,o){return e.type.bitWidth/8}visitDate(e,o){return(e.type.unit+1)*4}visitTime(e,o){return e.type.bitWidth/8}visitTimestamp(e,o){return e.type.unit===TimeUnit$1.SECOND?4:8}visitInterval(e,o){return(e.type.unit+1)*4}visitDuration(e,o){return 8}visitStruct(e,o){return e.children.reduce((d,h)=>d+instance$2.visit(h,o),0)}visitFixedSizeBinary(e,o){return e.type.byteWidth}visitMap(e,o){return 8+e.children.reduce((d,h)=>d+instance$2.visit(h,o),0)}visitDictionary(e,o){var d;return e.type.indices.bitWidth/8+(((d=e.dictionary)===null||d===void 0?void 0:d.getByteLength(e.values[o]))||0)}}const getUtf8ByteLength=({valueOffsets:i},e)=>8+(i[e+1]-i[e]),getBinaryByteLength=({valueOffsets:i},e)=>8+(i[e+1]-i[e]),getListByteLength=({valueOffsets:i,stride:e,children:o},d)=>{const h=o[0],{[d*e]:g}=i,{[d*e+1]:b}=i,$=instance$2.getVisitFn(h.type),j=h.slice(g,b-g);let et=8;for(let tt=-1,nt=b-g;++tt<nt;)et+=$(j,tt);return et},getFixedSizeListByteLength=({stride:i,children:e},o)=>{const d=e[0],h=d.slice(o*i,i),g=instance$2.getVisitFn(d.type);let b=0;for(let $=-1,j=h.length;++$<j;)b+=g(h,$);return b},getUnionByteLength=(i,e)=>i.type.mode===UnionMode$1.Dense?getDenseUnionByteLength(i,e):getSparseUnionByteLength(i,e),getDenseUnionByteLength=({type:i,children:e,typeIds:o,valueOffsets:d},h)=>{const g=i.typeIdToChildIndex[o[h]];return 8+instance$2.visit(e[g],d[h])},getSparseUnionByteLength=({children:i},e)=>4+instance$2.visitMany(i,i.map(()=>e)).reduce(sum,0);GetByteLengthVisitor.prototype.visitUtf8=getUtf8ByteLength;GetByteLengthVisitor.prototype.visitBinary=getBinaryByteLength;GetByteLengthVisitor.prototype.visitList=getListByteLength;GetByteLengthVisitor.prototype.visitFixedSizeList=getFixedSizeListByteLength;GetByteLengthVisitor.prototype.visitUnion=getUnionByteLength;GetByteLengthVisitor.prototype.visitDenseUnion=getDenseUnionByteLength;GetByteLengthVisitor.prototype.visitSparseUnion=getSparseUnionByteLength;const instance$2=new GetByteLengthVisitor;var _a$2;const visitorsByTypeId={},vectorPrototypesByTypeId={};class Vector{constructor(e){var o,d,h;const g=e[0]instanceof Vector?e.flatMap($=>$.data):e;if(g.length===0||g.some($=>!($ instanceof Data)))throw new TypeError("Vector constructor expects an Array of Data instances.");const b=(o=g[0])===null||o===void 0?void 0:o.type;switch(g.length){case 0:this._offsets=[0];break;case 1:{const{get:$,set:j,indexOf:et,byteLength:tt}=visitorsByTypeId[b.typeId],nt=g[0];this.isValid=rt=>isChunkedValid(nt,rt),this.get=rt=>$(nt,rt),this.set=(rt,ot)=>j(nt,rt,ot),this.indexOf=rt=>et(nt,rt),this.getByteLength=rt=>tt(nt,rt),this._offsets=[0,nt.length];break}default:Object.setPrototypeOf(this,vectorPrototypesByTypeId[b.typeId]),this._offsets=computeChunkOffsets(g);break}this.data=g,this.type=b,this.stride=strideForType(b),this.numChildren=(h=(d=b.children)===null||d===void 0?void 0:d.length)!==null&&h!==void 0?h:0,this.length=this._offsets.at(-1)}get byteLength(){return this.data.reduce((e,o)=>e+o.byteLength,0)}get nullCount(){return computeChunkNullCounts(this.data)}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${Type$1[this.type.typeId]}Vector`}isValid(e){return!1}get(e){return null}set(e,o){}indexOf(e,o){return-1}includes(e,o){return this.indexOf(e,o)>-1}getByteLength(e){return 0}[Symbol.iterator](){return instance$3.visit(this)}concat(...e){return new Vector(this.data.concat(e.flatMap(o=>o.data).flat(Number.POSITIVE_INFINITY)))}slice(e,o){return new Vector(clampRange(this,e,o,({data:d,_offsets:h},g,b)=>sliceChunks(d,h,g,b)))}toJSON(){return[...this]}toArray(){const{type:e,data:o,length:d,stride:h,ArrayType:g}=this;switch(e.typeId){case Type$1.Int:case Type$1.Float:case Type$1.Decimal:case Type$1.Time:case Type$1.Timestamp:switch(o.length){case 0:return new g;case 1:return o[0].values.subarray(0,d*h);default:return o.reduce((b,{values:$,length:j})=>(b.array.set($.subarray(0,j*h),b.offset),b.offset+=j*h,b),{array:new g(d*h),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(e){var o;return this.getChildAt((o=this.type.children)===null||o===void 0?void 0:o.findIndex(d=>d.name===e))}getChildAt(e){return e>-1&&e<this.numChildren?new Vector(this.data.map(({children:o})=>o[e])):null}get isMemoized(){return DataType.isDictionary(this.type)?this.data[0].dictionary.isMemoized:!1}memoize(){if(DataType.isDictionary(this.type)){const e=new MemoizedVector(this.data[0].dictionary),o=this.data.map(d=>{const h=d.clone();return h.dictionary=e,h});return new Vector(o)}return new MemoizedVector(this)}unmemoize(){if(DataType.isDictionary(this.type)&&this.isMemoized){const e=this.data[0].dictionary.unmemoize(),o=this.data.map(d=>{const h=d.clone();return h.dictionary=e,h});return new Vector(o)}return this}}_a$2=Symbol.toStringTag;Vector[_a$2]=(i=>{i.type=DataType.prototype,i.data=[],i.length=0,i.stride=1,i.numChildren=0,i._offsets=new Uint32Array([0]),i[Symbol.isConcatSpreadable]=!0;const e=Object.keys(Type$1).map(o=>Type$1[o]).filter(o=>typeof o=="number"&&o!==Type$1.NONE);for(const o of e){const d=instance$5.getVisitFnByTypeId(o),h=instance$6.getVisitFnByTypeId(o),g=instance$4.getVisitFnByTypeId(o),b=instance$2.getVisitFnByTypeId(o);visitorsByTypeId[o]={get:d,set:h,indexOf:g,byteLength:b},vectorPrototypesByTypeId[o]=Object.create(i,{isValid:{value:wrapChunkedCall1(isChunkedValid)},get:{value:wrapChunkedCall1(instance$5.getVisitFnByTypeId(o))},set:{value:wrapChunkedCall2(instance$6.getVisitFnByTypeId(o))},indexOf:{value:wrapChunkedIndexOf(instance$4.getVisitFnByTypeId(o))},getByteLength:{value:wrapChunkedCall1(instance$2.getVisitFnByTypeId(o))}})}return"Vector"})(Vector.prototype);class MemoizedVector extends Vector{constructor(e){super(e.data);const o=this.get,d=this.set,h=this.slice,g=new Array(this.length);Object.defineProperty(this,"get",{value(b){const $=g[b];if($!==void 0)return $;const j=o.call(this,b);return g[b]=j,j}}),Object.defineProperty(this,"set",{value(b,$){d.call(this,b,$),g[b]=$}}),Object.defineProperty(this,"slice",{value:(b,$)=>new MemoizedVector(h.call(this,b,$))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new Vector(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}class Block{constructor(){this.bb=null,this.bb_pos=0}__init(e,o){return this.bb_pos=e,this.bb=o,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(e,o,d,h){return e.prep(8,24),e.writeInt64(BigInt(h??0)),e.pad(4),e.writeInt32(d),e.writeInt64(BigInt(o??0)),e.offset()}}class KeyValue{constructor(){this.bb=null,this.bb_pos=0}__init(e,o){return this.bb_pos=e,this.bb=o,this}static getRootAsKeyValue(e,o){return(o||new KeyValue).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsKeyValue(e,o){return e.setPosition(e.position()+SIZE_PREFIX_LENGTH),(o||new KeyValue).__init(e.readInt32(e.position())+e.position(),e)}key(e){const o=this.bb.__offset(this.bb_pos,4);return o?this.bb.__string(this.bb_pos+o,e):null}value(e){const o=this.bb.__offset(this.bb_pos,6);return o?this.bb.__string(this.bb_pos+o,e):null}static startKeyValue(e){e.startObject(2)}static addKey(e,o){e.addFieldOffset(0,o,0)}static addValue(e,o){e.addFieldOffset(1,o,0)}static endKeyValue(e){return e.endObject()}static createKeyValue(e,o,d){return KeyValue.startKeyValue(e),KeyValue.addKey(e,o),KeyValue.addValue(e,d),KeyValue.endKeyValue(e)}}var MetadataVersion;(function(i){i[i.V1=0]="V1",i[i.V2=1]="V2",i[i.V3=2]="V3",i[i.V4=3]="V4",i[i.V5=4]="V5"})(MetadataVersion||(MetadataVersion={}));var Endianness;(function(i){i[i.Little=0]="Little",i[i.Big=1]="Big"})(Endianness||(Endianness={}));var DictionaryKind;(function(i){i[i.DenseArray=0]="DenseArray"})(DictionaryKind||(DictionaryKind={}));class Int{constructor(){this.bb=null,this.bb_pos=0}__init(e,o){return this.bb_pos=e,this.bb=o,this}static getRootAsInt(e,o){return(o||new Int).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsInt(e,o){return e.setPosition(e.position()+SIZE_PREFIX_LENGTH),(o||new Int).__init(e.readInt32(e.position())+e.position(),e)}bitWidth(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}isSigned(){const e=this.bb.__offset(this.bb_pos,6);return e?!!this.bb.readInt8(this.bb_pos+e):!1}static startInt(e){e.startObject(2)}static addBitWidth(e,o){e.addFieldInt32(0,o,0)}static addIsSigned(e,o){e.addFieldInt8(1,+o,0)}static endInt(e){return e.endObject()}static createInt(e,o,d){return Int.startInt(e),Int.addBitWidth(e,o),Int.addIsSigned(e,d),Int.endInt(e)}}class DictionaryEncoding{constructor(){this.bb=null,this.bb_pos=0}__init(e,o){return this.bb_pos=e,this.bb=o,this}static getRootAsDictionaryEncoding(e,o){return(o||new DictionaryEncoding).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDictionaryEncoding(e,o){return e.setPosition(e.position()+SIZE_PREFIX_LENGTH),(o||new DictionaryEncoding).__init(e.readInt32(e.position())+e.position(),e)}id(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt64(this.bb_pos+e):BigInt("0")}indexType(e){const o=this.bb.__offset(this.bb_pos,6);return o?(e||new Int).__init(this.bb.__indirect(this.bb_pos+o),this.bb):null}isOrdered(){const e=this.bb.__offset(this.bb_pos,8);return e?!!this.bb.readInt8(this.bb_pos+e):!1}dictionaryKind(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readInt16(this.bb_pos+e):DictionaryKind.DenseArray}static startDictionaryEncoding(e){e.startObject(4)}static addId(e,o){e.addFieldInt64(0,o,BigInt("0"))}static addIndexType(e,o){e.addFieldOffset(1,o,0)}static addIsOrdered(e,o){e.addFieldInt8(2,+o,0)}static addDictionaryKind(e,o){e.addFieldInt16(3,o,DictionaryKind.DenseArray)}static endDictionaryEncoding(e){return e.endObject()}}class Binary{constructor(){this.bb=null,this.bb_pos=0}__init(e,o){return this.bb_pos=e,this.bb=o,this}static getRootAsBinary(e,o){return(o||new Binary).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsBinary(e,o){return e.setPosition(e.position()+SIZE_PREFIX_LENGTH),(o||new Binary).__init(e.readInt32(e.position())+e.position(),e)}static startBinary(e){e.startObject(0)}static endBinary(e){return e.endObject()}static createBinary(e){return Binary.startBinary(e),Binary.endBinary(e)}}class Bool{constructor(){this.bb=null,this.bb_pos=0}__init(e,o){return this.bb_pos=e,this.bb=o,this}static getRootAsBool(e,o){return(o||new Bool).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsBool(e,o){return e.setPosition(e.position()+SIZE_PREFIX_LENGTH),(o||new Bool).__init(e.readInt32(e.position())+e.position(),e)}static startBool(e){e.startObject(0)}static endBool(e){return e.endObject()}static createBool(e){return Bool.startBool(e),Bool.endBool(e)}}var DateUnit;(function(i){i[i.DAY=0]="DAY",i[i.MILLISECOND=1]="MILLISECOND"})(DateUnit||(DateUnit={}));let Date$1=class Ts{constructor(){this.bb=null,this.bb_pos=0}__init(e,o){return this.bb_pos=e,this.bb=o,this}static getRootAsDate(e,o){return(o||new Ts).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDate(e,o){return e.setPosition(e.position()+SIZE_PREFIX_LENGTH),(o||new Ts).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):DateUnit.MILLISECOND}static startDate(e){e.startObject(1)}static addUnit(e,o){e.addFieldInt16(0,o,DateUnit.MILLISECOND)}static endDate(e){return e.endObject()}static createDate(e,o){return Ts.startDate(e),Ts.addUnit(e,o),Ts.endDate(e)}};class Decimal{constructor(){this.bb=null,this.bb_pos=0}__init(e,o){return this.bb_pos=e,this.bb=o,this}static getRootAsDecimal(e,o){return(o||new Decimal).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDecimal(e,o){return e.setPosition(e.position()+SIZE_PREFIX_LENGTH),(o||new Decimal).__init(e.readInt32(e.position())+e.position(),e)}precision(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}scale(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt32(this.bb_pos+e):0}bitWidth(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readInt32(this.bb_pos+e):128}static startDecimal(e){e.startObject(3)}static addPrecision(e,o){e.addFieldInt32(0,o,0)}static addScale(e,o){e.addFieldInt32(1,o,0)}static addBitWidth(e,o){e.addFieldInt32(2,o,128)}static endDecimal(e){return e.endObject()}static createDecimal(e,o,d,h){return Decimal.startDecimal(e),Decimal.addPrecision(e,o),Decimal.addScale(e,d),Decimal.addBitWidth(e,h),Decimal.endDecimal(e)}}var TimeUnit;(function(i){i[i.SECOND=0]="SECOND",i[i.MILLISECOND=1]="MILLISECOND",i[i.MICROSECOND=2]="MICROSECOND",i[i.NANOSECOND=3]="NANOSECOND"})(TimeUnit||(TimeUnit={}));class Duration{constructor(){this.bb=null,this.bb_pos=0}__init(e,o){return this.bb_pos=e,this.bb=o,this}static getRootAsDuration(e,o){return(o||new Duration).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDuration(e,o){return e.setPosition(e.position()+SIZE_PREFIX_LENGTH),(o||new Duration).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):TimeUnit.MILLISECOND}static startDuration(e){e.startObject(1)}static addUnit(e,o){e.addFieldInt16(0,o,TimeUnit.MILLISECOND)}static endDuration(e){return e.endObject()}static createDuration(e,o){return Duration.startDuration(e),Duration.addUnit(e,o),Duration.endDuration(e)}}class FixedSizeBinary{constructor(){this.bb=null,this.bb_pos=0}__init(e,o){return this.bb_pos=e,this.bb=o,this}static getRootAsFixedSizeBinary(e,o){return(o||new FixedSizeBinary).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFixedSizeBinary(e,o){return e.setPosition(e.position()+SIZE_PREFIX_LENGTH),(o||new FixedSizeBinary).__init(e.readInt32(e.position())+e.position(),e)}byteWidth(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}static startFixedSizeBinary(e){e.startObject(1)}static addByteWidth(e,o){e.addFieldInt32(0,o,0)}static endFixedSizeBinary(e){return e.endObject()}static createFixedSizeBinary(e,o){return FixedSizeBinary.startFixedSizeBinary(e),FixedSizeBinary.addByteWidth(e,o),FixedSizeBinary.endFixedSizeBinary(e)}}class FixedSizeList{constructor(){this.bb=null,this.bb_pos=0}__init(e,o){return this.bb_pos=e,this.bb=o,this}static getRootAsFixedSizeList(e,o){return(o||new FixedSizeList).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFixedSizeList(e,o){return e.setPosition(e.position()+SIZE_PREFIX_LENGTH),(o||new FixedSizeList).__init(e.readInt32(e.position())+e.position(),e)}listSize(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}static startFixedSizeList(e){e.startObject(1)}static addListSize(e,o){e.addFieldInt32(0,o,0)}static endFixedSizeList(e){return e.endObject()}static createFixedSizeList(e,o){return FixedSizeList.startFixedSizeList(e),FixedSizeList.addListSize(e,o),FixedSizeList.endFixedSizeList(e)}}var Precision;(function(i){i[i.HALF=0]="HALF",i[i.SINGLE=1]="SINGLE",i[i.DOUBLE=2]="DOUBLE"})(Precision||(Precision={}));class FloatingPoint{constructor(){this.bb=null,this.bb_pos=0}__init(e,o){return this.bb_pos=e,this.bb=o,this}static getRootAsFloatingPoint(e,o){return(o||new FloatingPoint).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFloatingPoint(e,o){return e.setPosition(e.position()+SIZE_PREFIX_LENGTH),(o||new FloatingPoint).__init(e.readInt32(e.position())+e.position(),e)}precision(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):Precision.HALF}static startFloatingPoint(e){e.startObject(1)}static addPrecision(e,o){e.addFieldInt16(0,o,Precision.HALF)}static endFloatingPoint(e){return e.endObject()}static createFloatingPoint(e,o){return FloatingPoint.startFloatingPoint(e),FloatingPoint.addPrecision(e,o),FloatingPoint.endFloatingPoint(e)}}var IntervalUnit;(function(i){i[i.YEAR_MONTH=0]="YEAR_MONTH",i[i.DAY_TIME=1]="DAY_TIME",i[i.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(IntervalUnit||(IntervalUnit={}));class Interval{constructor(){this.bb=null,this.bb_pos=0}__init(e,o){return this.bb_pos=e,this.bb=o,this}static getRootAsInterval(e,o){return(o||new Interval).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsInterval(e,o){return e.setPosition(e.position()+SIZE_PREFIX_LENGTH),(o||new Interval).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):IntervalUnit.YEAR_MONTH}static startInterval(e){e.startObject(1)}static addUnit(e,o){e.addFieldInt16(0,o,IntervalUnit.YEAR_MONTH)}static endInterval(e){return e.endObject()}static createInterval(e,o){return Interval.startInterval(e),Interval.addUnit(e,o),Interval.endInterval(e)}}class List{constructor(){this.bb=null,this.bb_pos=0}__init(e,o){return this.bb_pos=e,this.bb=o,this}static getRootAsList(e,o){return(o||new List).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsList(e,o){return e.setPosition(e.position()+SIZE_PREFIX_LENGTH),(o||new List).__init(e.readInt32(e.position())+e.position(),e)}static startList(e){e.startObject(0)}static endList(e){return e.endObject()}static createList(e){return List.startList(e),List.endList(e)}}let Map$1=class Is{constructor(){this.bb=null,this.bb_pos=0}__init(e,o){return this.bb_pos=e,this.bb=o,this}static getRootAsMap(e,o){return(o||new Is).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsMap(e,o){return e.setPosition(e.position()+SIZE_PREFIX_LENGTH),(o||new Is).__init(e.readInt32(e.position())+e.position(),e)}keysSorted(){const e=this.bb.__offset(this.bb_pos,4);return e?!!this.bb.readInt8(this.bb_pos+e):!1}static startMap(e){e.startObject(1)}static addKeysSorted(e,o){e.addFieldInt8(0,+o,0)}static endMap(e){return e.endObject()}static createMap(e,o){return Is.startMap(e),Is.addKeysSorted(e,o),Is.endMap(e)}};class Null{constructor(){this.bb=null,this.bb_pos=0}__init(e,o){return this.bb_pos=e,this.bb=o,this}static getRootAsNull(e,o){return(o||new Null).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsNull(e,o){return e.setPosition(e.position()+SIZE_PREFIX_LENGTH),(o||new Null).__init(e.readInt32(e.position())+e.position(),e)}static startNull(e){e.startObject(0)}static endNull(e){return e.endObject()}static createNull(e){return Null.startNull(e),Null.endNull(e)}}class Struct_{constructor(){this.bb=null,this.bb_pos=0}__init(e,o){return this.bb_pos=e,this.bb=o,this}static getRootAsStruct_(e,o){return(o||new Struct_).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsStruct_(e,o){return e.setPosition(e.position()+SIZE_PREFIX_LENGTH),(o||new Struct_).__init(e.readInt32(e.position())+e.position(),e)}static startStruct_(e){e.startObject(0)}static endStruct_(e){return e.endObject()}static createStruct_(e){return Struct_.startStruct_(e),Struct_.endStruct_(e)}}class Time{constructor(){this.bb=null,this.bb_pos=0}__init(e,o){return this.bb_pos=e,this.bb=o,this}static getRootAsTime(e,o){return(o||new Time).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsTime(e,o){return e.setPosition(e.position()+SIZE_PREFIX_LENGTH),(o||new Time).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):TimeUnit.MILLISECOND}bitWidth(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt32(this.bb_pos+e):32}static startTime(e){e.startObject(2)}static addUnit(e,o){e.addFieldInt16(0,o,TimeUnit.MILLISECOND)}static addBitWidth(e,o){e.addFieldInt32(1,o,32)}static endTime(e){return e.endObject()}static createTime(e,o,d){return Time.startTime(e),Time.addUnit(e,o),Time.addBitWidth(e,d),Time.endTime(e)}}class Timestamp{constructor(){this.bb=null,this.bb_pos=0}__init(e,o){return this.bb_pos=e,this.bb=o,this}static getRootAsTimestamp(e,o){return(o||new Timestamp).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsTimestamp(e,o){return e.setPosition(e.position()+SIZE_PREFIX_LENGTH),(o||new Timestamp).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):TimeUnit.SECOND}timezone(e){const o=this.bb.__offset(this.bb_pos,6);return o?this.bb.__string(this.bb_pos+o,e):null}static startTimestamp(e){e.startObject(2)}static addUnit(e,o){e.addFieldInt16(0,o,TimeUnit.SECOND)}static addTimezone(e,o){e.addFieldOffset(1,o,0)}static endTimestamp(e){return e.endObject()}static createTimestamp(e,o,d){return Timestamp.startTimestamp(e),Timestamp.addUnit(e,o),Timestamp.addTimezone(e,d),Timestamp.endTimestamp(e)}}var UnionMode;(function(i){i[i.Sparse=0]="Sparse",i[i.Dense=1]="Dense"})(UnionMode||(UnionMode={}));class Union{constructor(){this.bb=null,this.bb_pos=0}__init(e,o){return this.bb_pos=e,this.bb=o,this}static getRootAsUnion(e,o){return(o||new Union).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsUnion(e,o){return e.setPosition(e.position()+SIZE_PREFIX_LENGTH),(o||new Union).__init(e.readInt32(e.position())+e.position(),e)}mode(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):UnionMode.Sparse}typeIds(e){const o=this.bb.__offset(this.bb_pos,6);return o?this.bb.readInt32(this.bb.__vector(this.bb_pos+o)+e*4):0}typeIdsLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}typeIdsArray(){const e=this.bb.__offset(this.bb_pos,6);return e?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}static startUnion(e){e.startObject(2)}static addMode(e,o){e.addFieldInt16(0,o,UnionMode.Sparse)}static addTypeIds(e,o){e.addFieldOffset(1,o,0)}static createTypeIdsVector(e,o){e.startVector(4,o.length,4);for(let d=o.length-1;d>=0;d--)e.addInt32(o[d]);return e.endVector()}static startTypeIdsVector(e,o){e.startVector(4,o,4)}static endUnion(e){return e.endObject()}static createUnion(e,o,d){return Union.startUnion(e),Union.addMode(e,o),Union.addTypeIds(e,d),Union.endUnion(e)}}class Utf8{constructor(){this.bb=null,this.bb_pos=0}__init(e,o){return this.bb_pos=e,this.bb=o,this}static getRootAsUtf8(e,o){return(o||new Utf8).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsUtf8(e,o){return e.setPosition(e.position()+SIZE_PREFIX_LENGTH),(o||new Utf8).__init(e.readInt32(e.position())+e.position(),e)}static startUtf8(e){e.startObject(0)}static endUtf8(e){return e.endObject()}static createUtf8(e){return Utf8.startUtf8(e),Utf8.endUtf8(e)}}var Type;(function(i){i[i.NONE=0]="NONE",i[i.Null=1]="Null",i[i.Int=2]="Int",i[i.FloatingPoint=3]="FloatingPoint",i[i.Binary=4]="Binary",i[i.Utf8=5]="Utf8",i[i.Bool=6]="Bool",i[i.Decimal=7]="Decimal",i[i.Date=8]="Date",i[i.Time=9]="Time",i[i.Timestamp=10]="Timestamp",i[i.Interval=11]="Interval",i[i.List=12]="List",i[i.Struct_=13]="Struct_",i[i.Union=14]="Union",i[i.FixedSizeBinary=15]="FixedSizeBinary",i[i.FixedSizeList=16]="FixedSizeList",i[i.Map=17]="Map",i[i.Duration=18]="Duration",i[i.LargeBinary=19]="LargeBinary",i[i.LargeUtf8=20]="LargeUtf8",i[i.LargeList=21]="LargeList",i[i.RunEndEncoded=22]="RunEndEncoded"})(Type||(Type={}));let Field$1=class $a{constructor(){this.bb=null,this.bb_pos=0}__init(e,o){return this.bb_pos=e,this.bb=o,this}static getRootAsField(e,o){return(o||new $a).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsField(e,o){return e.setPosition(e.position()+SIZE_PREFIX_LENGTH),(o||new $a).__init(e.readInt32(e.position())+e.position(),e)}name(e){const o=this.bb.__offset(this.bb_pos,4);return o?this.bb.__string(this.bb_pos+o,e):null}nullable(){const e=this.bb.__offset(this.bb_pos,6);return e?!!this.bb.readInt8(this.bb_pos+e):!1}typeType(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readUint8(this.bb_pos+e):Type.NONE}type(e){const o=this.bb.__offset(this.bb_pos,10);return o?this.bb.__union(e,this.bb_pos+o):null}dictionary(e){const o=this.bb.__offset(this.bb_pos,12);return o?(e||new DictionaryEncoding).__init(this.bb.__indirect(this.bb_pos+o),this.bb):null}children(e,o){const d=this.bb.__offset(this.bb_pos,14);return d?(o||new $a).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+d)+e*4),this.bb):null}childrenLength(){const e=this.bb.__offset(this.bb_pos,14);return e?this.bb.__vector_len(this.bb_pos+e):0}customMetadata(e,o){const d=this.bb.__offset(this.bb_pos,16);return d?(o||new KeyValue).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+d)+e*4),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,16);return e?this.bb.__vector_len(this.bb_pos+e):0}static startField(e){e.startObject(7)}static addName(e,o){e.addFieldOffset(0,o,0)}static addNullable(e,o){e.addFieldInt8(1,+o,0)}static addTypeType(e,o){e.addFieldInt8(2,o,Type.NONE)}static addType(e,o){e.addFieldOffset(3,o,0)}static addDictionary(e,o){e.addFieldOffset(4,o,0)}static addChildren(e,o){e.addFieldOffset(5,o,0)}static createChildrenVector(e,o){e.startVector(4,o.length,4);for(let d=o.length-1;d>=0;d--)e.addOffset(o[d]);return e.endVector()}static startChildrenVector(e,o){e.startVector(4,o,4)}static addCustomMetadata(e,o){e.addFieldOffset(6,o,0)}static createCustomMetadataVector(e,o){e.startVector(4,o.length,4);for(let d=o.length-1;d>=0;d--)e.addOffset(o[d]);return e.endVector()}static startCustomMetadataVector(e,o){e.startVector(4,o,4)}static endField(e){return e.endObject()}},Schema$1=class ro{constructor(){this.bb=null,this.bb_pos=0}__init(e,o){return this.bb_pos=e,this.bb=o,this}static getRootAsSchema(e,o){return(o||new ro).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsSchema(e,o){return e.setPosition(e.position()+SIZE_PREFIX_LENGTH),(o||new ro).__init(e.readInt32(e.position())+e.position(),e)}endianness(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):Endianness.Little}fields(e,o){const d=this.bb.__offset(this.bb_pos,6);return d?(o||new Field$1).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+d)+e*4),this.bb):null}fieldsLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}customMetadata(e,o){const d=this.bb.__offset(this.bb_pos,8);return d?(o||new KeyValue).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+d)+e*4),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}features(e){const o=this.bb.__offset(this.bb_pos,10);return o?this.bb.readInt64(this.bb.__vector(this.bb_pos+o)+e*8):BigInt(0)}featuresLength(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__vector_len(this.bb_pos+e):0}static startSchema(e){e.startObject(4)}static addEndianness(e,o){e.addFieldInt16(0,o,Endianness.Little)}static addFields(e,o){e.addFieldOffset(1,o,0)}static createFieldsVector(e,o){e.startVector(4,o.length,4);for(let d=o.length-1;d>=0;d--)e.addOffset(o[d]);return e.endVector()}static startFieldsVector(e,o){e.startVector(4,o,4)}static addCustomMetadata(e,o){e.addFieldOffset(2,o,0)}static createCustomMetadataVector(e,o){e.startVector(4,o.length,4);for(let d=o.length-1;d>=0;d--)e.addOffset(o[d]);return e.endVector()}static startCustomMetadataVector(e,o){e.startVector(4,o,4)}static addFeatures(e,o){e.addFieldOffset(3,o,0)}static createFeaturesVector(e,o){e.startVector(8,o.length,8);for(let d=o.length-1;d>=0;d--)e.addInt64(o[d]);return e.endVector()}static startFeaturesVector(e,o){e.startVector(8,o,8)}static endSchema(e){return e.endObject()}static finishSchemaBuffer(e,o){e.finish(o)}static finishSizePrefixedSchemaBuffer(e,o){e.finish(o,void 0,!0)}static createSchema(e,o,d,h,g){return ro.startSchema(e),ro.addEndianness(e,o),ro.addFields(e,d),ro.addCustomMetadata(e,h),ro.addFeatures(e,g),ro.endSchema(e)}};class Footer{constructor(){this.bb=null,this.bb_pos=0}__init(e,o){return this.bb_pos=e,this.bb=o,this}static getRootAsFooter(e,o){return(o||new Footer).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFooter(e,o){return e.setPosition(e.position()+SIZE_PREFIX_LENGTH),(o||new Footer).__init(e.readInt32(e.position())+e.position(),e)}version(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):MetadataVersion.V1}schema(e){const o=this.bb.__offset(this.bb_pos,6);return o?(e||new Schema$1).__init(this.bb.__indirect(this.bb_pos+o),this.bb):null}dictionaries(e,o){const d=this.bb.__offset(this.bb_pos,8);return d?(o||new Block).__init(this.bb.__vector(this.bb_pos+d)+e*24,this.bb):null}dictionariesLength(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}recordBatches(e,o){const d=this.bb.__offset(this.bb_pos,10);return d?(o||new Block).__init(this.bb.__vector(this.bb_pos+d)+e*24,this.bb):null}recordBatchesLength(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__vector_len(this.bb_pos+e):0}customMetadata(e,o){const d=this.bb.__offset(this.bb_pos,12);return d?(o||new KeyValue).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+d)+e*4),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__vector_len(this.bb_pos+e):0}static startFooter(e){e.startObject(5)}static addVersion(e,o){e.addFieldInt16(0,o,MetadataVersion.V1)}static addSchema(e,o){e.addFieldOffset(1,o,0)}static addDictionaries(e,o){e.addFieldOffset(2,o,0)}static startDictionariesVector(e,o){e.startVector(24,o,8)}static addRecordBatches(e,o){e.addFieldOffset(3,o,0)}static startRecordBatchesVector(e,o){e.startVector(24,o,8)}static addCustomMetadata(e,o){e.addFieldOffset(4,o,0)}static createCustomMetadataVector(e,o){e.startVector(4,o.length,4);for(let d=o.length-1;d>=0;d--)e.addOffset(o[d]);return e.endVector()}static startCustomMetadataVector(e,o){e.startVector(4,o,4)}static endFooter(e){return e.endObject()}static finishFooterBuffer(e,o){e.finish(o)}static finishSizePrefixedFooterBuffer(e,o){e.finish(o,void 0,!0)}}class Schema{constructor(e=[],o,d,h=MetadataVersion$1.V5){this.fields=e||[],this.metadata=o||new Map,d||(d=generateDictionaryMap(e)),this.dictionaries=d,this.metadataVersion=h}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(e=>e.name)}toString(){return`Schema<{ ${this.fields.map((e,o)=>`${o}: ${e}`).join(", ")} }>`}select(e){const o=new Set(e),d=this.fields.filter(h=>o.has(h.name));return new Schema(d,this.metadata)}selectAt(e){const o=e.map(d=>this.fields[d]).filter(Boolean);return new Schema(o,this.metadata)}assign(...e){const o=e[0]instanceof Schema?e[0]:Array.isArray(e[0])?new Schema(e[0]):new Schema(e),d=[...this.fields],h=mergeMaps(mergeMaps(new Map,this.metadata),o.metadata),g=o.fields.filter($=>{const j=d.findIndex(et=>et.name===$.name);return~j?(d[j]=$.clone({metadata:mergeMaps(mergeMaps(new Map,d[j].metadata),$.metadata)}))&&!1:!0}),b=generateDictionaryMap(g,new Map);return new Schema([...d,...g],h,new Map([...this.dictionaries,...b]))}}Schema.prototype.fields=null;Schema.prototype.metadata=null;Schema.prototype.dictionaries=null;class Field{static new(...e){let[o,d,h,g]=e;return e[0]&&typeof e[0]=="object"&&({name:o}=e[0],d===void 0&&(d=e[0].type),h===void 0&&(h=e[0].nullable),g===void 0&&(g=e[0].metadata)),new Field(`${o}`,d,h,g)}constructor(e,o,d=!1,h){this.name=e,this.type=o,this.nullable=d,this.metadata=h||new Map}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...e){let[o,d,h,g]=e;return!e[0]||typeof e[0]!="object"?[o=this.name,d=this.type,h=this.nullable,g=this.metadata]=e:{name:o=this.name,type:d=this.type,nullable:h=this.nullable,metadata:g=this.metadata}=e[0],Field.new(o,d,h,g)}}Field.prototype.type=null;Field.prototype.name=null;Field.prototype.nullable=null;Field.prototype.metadata=null;function mergeMaps(i,e){return new Map([...i||new Map,...e||new Map])}function generateDictionaryMap(i,e=new Map){for(let o=-1,d=i.length;++o<d;){const g=i[o].type;if(DataType.isDictionary(g)){if(!e.has(g.id))e.set(g.id,g.dictionary);else if(e.get(g.id)!==g.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}g.children&&g.children.length>0&&generateDictionaryMap(g.children,e)}return e}var Builder$1=Builder$2,ByteBuffer$1=ByteBuffer$2;class Footer_{static decode(e){e=new ByteBuffer$1(toUint8Array(e));const o=Footer.getRootAsFooter(e),d=Schema.decode(o.schema(),new Map,o.version());return new OffHeapFooter(d,o)}static encode(e){const o=new Builder$1,d=Schema.encode(o,e.schema);Footer.startRecordBatchesVector(o,e.numRecordBatches);for(const b of[...e.recordBatches()].slice().reverse())FileBlock.encode(o,b);const h=o.endVector();Footer.startDictionariesVector(o,e.numDictionaries);for(const b of[...e.dictionaryBatches()].slice().reverse())FileBlock.encode(o,b);const g=o.endVector();return Footer.startFooter(o),Footer.addSchema(o,d),Footer.addVersion(o,MetadataVersion$1.V5),Footer.addRecordBatches(o,h),Footer.addDictionaries(o,g),Footer.finishFooterBuffer(o,Footer.endFooter(o)),o.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}constructor(e,o=MetadataVersion$1.V5,d,h){this.schema=e,this.version=o,d&&(this._recordBatches=d),h&&(this._dictionaryBatches=h)}*recordBatches(){for(let e,o=-1,d=this.numRecordBatches;++o<d;)(e=this.getRecordBatch(o))&&(yield e)}*dictionaryBatches(){for(let e,o=-1,d=this.numDictionaries;++o<d;)(e=this.getDictionaryBatch(o))&&(yield e)}getRecordBatch(e){return e>=0&&e<this.numRecordBatches&&this._recordBatches[e]||null}getDictionaryBatch(e){return e>=0&&e<this.numDictionaries&&this._dictionaryBatches[e]||null}}class OffHeapFooter extends Footer_{get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}constructor(e,o){super(e,o.version()),this._footer=o}getRecordBatch(e){if(e>=0&&e<this.numRecordBatches){const o=this._footer.recordBatches(e);if(o)return FileBlock.decode(o)}return null}getDictionaryBatch(e){if(e>=0&&e<this.numDictionaries){const o=this._footer.dictionaries(e);if(o)return FileBlock.decode(o)}return null}}class FileBlock{static decode(e){return new FileBlock(e.metaDataLength(),e.bodyLength(),e.offset())}static encode(e,o){const{metaDataLength:d}=o,h=BigInt(o.offset),g=BigInt(o.bodyLength);return Block.createBlock(e,h,d,g)}constructor(e,o,d){this.metaDataLength=e,this.offset=bigIntToNumber(d),this.bodyLength=bigIntToNumber(o)}}const ITERATOR_DONE=Object.freeze({done:!0,value:void 0});class ArrowJSON{constructor(e){this._json=e}get schema(){return this._json.schema}get batches(){return this._json.batches||[]}get dictionaries(){return this._json.dictionaries||[]}}class ReadableInterop{tee(){return this._getDOMStream().tee()}pipe(e,o){return this._getNodeStream().pipe(e,o)}pipeTo(e,o){return this._getDOMStream().pipeTo(e,o)}pipeThrough(e,o){return this._getDOMStream().pipeThrough(e,o)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class AsyncQueue extends ReadableInterop{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(e=>this._closedPromiseResolve=e)}get closed(){return this._closedPromise}cancel(e){return __awaiter(this,void 0,void 0,function*(){yield this.return(e)})}write(e){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(e):this.resolvers.shift().resolve({done:!1,value:e}))}abort(e){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:e}:this.resolvers.shift().reject({done:!0,value:e}))}close(){if(this._closedPromiseResolve){const{resolvers:e}=this;for(;e.length>0;)e.shift().resolve(ITERATOR_DONE);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(e){return streamAdapters.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,e)}toNodeStream(e){return streamAdapters.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,e)}throw(e){return __awaiter(this,void 0,void 0,function*(){return yield this.abort(e),ITERATOR_DONE})}return(e){return __awaiter(this,void 0,void 0,function*(){return yield this.close(),ITERATOR_DONE})}read(e){return __awaiter(this,void 0,void 0,function*(){return(yield this.next(e,"read")).value})}peek(e){return __awaiter(this,void 0,void 0,function*(){return(yield this.next(e,"peek")).value})}next(...e){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((o,d)=>{this.resolvers.push({resolve:o,reject:d})}):Promise.resolve(ITERATOR_DONE)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}}class AsyncByteQueue extends AsyncQueue{write(e){if((e=toUint8Array(e)).byteLength>0)return super.write(e)}toString(e=!1){return e?decodeUtf8(this.toUint8Array(!0)):this.toUint8Array(!1).then(decodeUtf8)}toUint8Array(e=!1){return e?joinUint8Arrays(this._values)[0]:__awaiter(this,void 0,void 0,function*(){var o,d,h,g;const b=[];let $=0;try{for(var j=!0,et=__asyncValues(this),tt;tt=yield et.next(),o=tt.done,!o;j=!0){g=tt.value,j=!1;const nt=g;b.push(nt),$+=nt.byteLength}}catch(nt){d={error:nt}}finally{try{!j&&!o&&(h=et.return)&&(yield h.call(et))}finally{if(d)throw d.error}}return joinUint8Arrays(b,$)[0]})}}class ByteStream{constructor(e){e&&(this.source=new ByteStreamSource(streamAdapters.fromIterable(e)))}[Symbol.iterator](){return this}next(e){return this.source.next(e)}throw(e){return this.source.throw(e)}return(e){return this.source.return(e)}peek(e){return this.source.peek(e)}read(e){return this.source.read(e)}}class AsyncByteStream{constructor(e){e instanceof AsyncByteStream?this.source=e.source:e instanceof AsyncByteQueue?this.source=new AsyncByteStreamSource(streamAdapters.fromAsyncIterable(e)):isReadableNodeStream(e)?this.source=new AsyncByteStreamSource(streamAdapters.fromNodeStream(e)):isReadableDOMStream(e)?this.source=new AsyncByteStreamSource(streamAdapters.fromDOMStream(e)):isFetchResponse(e)?this.source=new AsyncByteStreamSource(streamAdapters.fromDOMStream(e.body)):isIterable(e)?this.source=new AsyncByteStreamSource(streamAdapters.fromIterable(e)):isPromise(e)?this.source=new AsyncByteStreamSource(streamAdapters.fromAsyncIterable(e)):isAsyncIterable(e)&&(this.source=new AsyncByteStreamSource(streamAdapters.fromAsyncIterable(e)))}[Symbol.asyncIterator](){return this}next(e){return this.source.next(e)}throw(e){return this.source.throw(e)}return(e){return this.source.return(e)}get closed(){return this.source.closed}cancel(e){return this.source.cancel(e)}peek(e){return this.source.peek(e)}read(e){return this.source.read(e)}}class ByteStreamSource{constructor(e){this.source=e}cancel(e){this.return(e)}peek(e){return this.next(e,"peek").value}read(e){return this.next(e,"read").value}next(e,o="read"){return this.source.next({cmd:o,size:e})}throw(e){return Object.create(this.source.throw&&this.source.throw(e)||ITERATOR_DONE)}return(e){return Object.create(this.source.return&&this.source.return(e)||ITERATOR_DONE)}}class AsyncByteStreamSource{constructor(e){this.source=e,this._closedPromise=new Promise(o=>this._closedPromiseResolve=o)}cancel(e){return __awaiter(this,void 0,void 0,function*(){yield this.return(e)})}get closed(){return this._closedPromise}read(e){return __awaiter(this,void 0,void 0,function*(){return(yield this.next(e,"read")).value})}peek(e){return __awaiter(this,void 0,void 0,function*(){return(yield this.next(e,"peek")).value})}next(e,o="read"){return __awaiter(this,void 0,void 0,function*(){return yield this.source.next({cmd:o,size:e})})}throw(e){return __awaiter(this,void 0,void 0,function*(){const o=this.source.throw&&(yield this.source.throw(e))||ITERATOR_DONE;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(o)})}return(e){return __awaiter(this,void 0,void 0,function*(){const o=this.source.return&&(yield this.source.return(e))||ITERATOR_DONE;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(o)})}}class RandomAccessFile extends ByteStream{constructor(e,o){super(),this.position=0,this.buffer=toUint8Array(e),this.size=o===void 0?this.buffer.byteLength:o}readInt32(e){const{buffer:o,byteOffset:d}=this.readAt(e,4);return new DataView(o,d).getInt32(0,!0)}seek(e){return this.position=Math.min(e,this.size),e<this.size}read(e){const{buffer:o,size:d,position:h}=this;return o&&h<d?(typeof e!="number"&&(e=Number.POSITIVE_INFINITY),this.position=Math.min(d,h+Math.min(d-h,e)),o.subarray(h,this.position)):null}readAt(e,o){const d=this.buffer,h=Math.min(this.size,e+o);return d?d.subarray(e,h):new Uint8Array(o)}close(){this.buffer&&(this.buffer=null)}throw(e){return this.close(),{done:!0,value:e}}return(e){return this.close(),{done:!0,value:e}}}class AsyncRandomAccessFile extends AsyncByteStream{constructor(e,o){super(),this.position=0,this._handle=e,typeof o=="number"?this.size=o:this._pending=__awaiter(this,void 0,void 0,function*(){this.size=(yield e.stat()).size,delete this._pending})}readInt32(e){return __awaiter(this,void 0,void 0,function*(){const{buffer:o,byteOffset:d}=yield this.readAt(e,4);return new DataView(o,d).getInt32(0,!0)})}seek(e){return __awaiter(this,void 0,void 0,function*(){return this._pending&&(yield this._pending),this.position=Math.min(e,this.size),e<this.size})}read(e){return __awaiter(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:o,size:d,position:h}=this;if(o&&h<d){typeof e!="number"&&(e=Number.POSITIVE_INFINITY);let g=h,b=0,$=0;const j=Math.min(d,g+Math.min(d-g,e)),et=new Uint8Array(Math.max(0,(this.position=j)-g));for(;(g+=$)<j&&(b+=$)<et.byteLength;)({bytesRead:$}=yield o.read(et,b,et.byteLength-b,g));return et}return null})}readAt(e,o){return __awaiter(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:d,size:h}=this;if(d&&e+o<h){const g=Math.min(h,e+o),b=new Uint8Array(g-e);return(yield d.read(b,0,o,e)).buffer}return new Uint8Array(o)})}close(){return __awaiter(this,void 0,void 0,function*(){const e=this._handle;this._handle=null,e&&(yield e.close())})}throw(e){return __awaiter(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:e}})}return(e){return __awaiter(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:e}})}}const carryBit16=65536;function intAsHex(i){return i<0&&(i=4294967295+i+1),`0x${i.toString(16)}`}const kInt32DecimalDigits=8,kPowersOfTen=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8];class BaseInt64{constructor(e){this.buffer=e}high(){return this.buffer[1]}low(){return this.buffer[0]}_times(e){const o=new Uint32Array([this.buffer[1]>>>16,this.buffer[1]&65535,this.buffer[0]>>>16,this.buffer[0]&65535]),d=new Uint32Array([e.buffer[1]>>>16,e.buffer[1]&65535,e.buffer[0]>>>16,e.buffer[0]&65535]);let h=o[3]*d[3];this.buffer[0]=h&65535;let g=h>>>16;return h=o[2]*d[3],g+=h,h=o[3]*d[2]>>>0,g+=h,this.buffer[0]+=g<<16,this.buffer[1]=g>>>0<h?carryBit16:0,this.buffer[1]+=g>>>16,this.buffer[1]+=o[1]*d[3]+o[2]*d[2]+o[3]*d[1],this.buffer[1]+=o[0]*d[3]+o[1]*d[2]+o[2]*d[1]+o[3]*d[0]<<16,this}_plus(e){const o=this.buffer[0]+e.buffer[0]>>>0;this.buffer[1]+=e.buffer[1],o<this.buffer[0]>>>0&&++this.buffer[1],this.buffer[0]=o}lessThan(e){return this.buffer[1]<e.buffer[1]||this.buffer[1]===e.buffer[1]&&this.buffer[0]<e.buffer[0]}equals(e){return this.buffer[1]===e.buffer[1]&&this.buffer[0]==e.buffer[0]}greaterThan(e){return e.lessThan(this)}hex(){return`${intAsHex(this.buffer[1])} ${intAsHex(this.buffer[0])}`}}class Uint64 extends BaseInt64{times(e){return this._times(e),this}plus(e){return this._plus(e),this}static from(e,o=new Uint32Array(2)){return Uint64.fromString(typeof e=="string"?e:e.toString(),o)}static fromNumber(e,o=new Uint32Array(2)){return Uint64.fromString(e.toString(),o)}static fromString(e,o=new Uint32Array(2)){const d=e.length,h=new Uint64(o);for(let g=0;g<d;){const b=kInt32DecimalDigits<d-g?kInt32DecimalDigits:d-g,$=new Uint64(new Uint32Array([Number.parseInt(e.slice(g,g+b),10),0])),j=new Uint64(new Uint32Array([kPowersOfTen[b],0]));h.times(j),h.plus($),g+=b}return h}static convertArray(e){const o=new Uint32Array(e.length*2);for(let d=-1,h=e.length;++d<h;)Uint64.from(e[d],new Uint32Array(o.buffer,o.byteOffset+2*d*4,2));return o}static multiply(e,o){return new Uint64(new Uint32Array(e.buffer)).times(o)}static add(e,o){return new Uint64(new Uint32Array(e.buffer)).plus(o)}}class Int64 extends BaseInt64{negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[0]==0&&++this.buffer[1],this}times(e){return this._times(e),this}plus(e){return this._plus(e),this}lessThan(e){const o=this.buffer[1]<<0,d=e.buffer[1]<<0;return o<d||o===d&&this.buffer[0]<e.buffer[0]}static from(e,o=new Uint32Array(2)){return Int64.fromString(typeof e=="string"?e:e.toString(),o)}static fromNumber(e,o=new Uint32Array(2)){return Int64.fromString(e.toString(),o)}static fromString(e,o=new Uint32Array(2)){const d=e.startsWith("-"),h=e.length,g=new Int64(o);for(let b=d?1:0;b<h;){const $=kInt32DecimalDigits<h-b?kInt32DecimalDigits:h-b,j=new Int64(new Uint32Array([Number.parseInt(e.slice(b,b+$),10),0])),et=new Int64(new Uint32Array([kPowersOfTen[$],0]));g.times(et),g.plus(j),b+=$}return d?g.negate():g}static convertArray(e){const o=new Uint32Array(e.length*2);for(let d=-1,h=e.length;++d<h;)Int64.from(e[d],new Uint32Array(o.buffer,o.byteOffset+2*d*4,2));return o}static multiply(e,o){return new Int64(new Uint32Array(e.buffer)).times(o)}static add(e,o){return new Int64(new Uint32Array(e.buffer)).plus(o)}}class Int128{constructor(e){this.buffer=e}high(){return new Int64(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2))}low(){return new Int64(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset,2))}negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[2]=~this.buffer[2],this.buffer[3]=~this.buffer[3],this.buffer[0]==0&&++this.buffer[1],this.buffer[1]==0&&++this.buffer[2],this.buffer[2]==0&&++this.buffer[3],this}times(e){const o=new Uint64(new Uint32Array([this.buffer[3],0])),d=new Uint64(new Uint32Array([this.buffer[2],0])),h=new Uint64(new Uint32Array([this.buffer[1],0])),g=new Uint64(new Uint32Array([this.buffer[0],0])),b=new Uint64(new Uint32Array([e.buffer[3],0])),$=new Uint64(new Uint32Array([e.buffer[2],0])),j=new Uint64(new Uint32Array([e.buffer[1],0])),et=new Uint64(new Uint32Array([e.buffer[0],0]));let tt=Uint64.multiply(g,et);this.buffer[0]=tt.low();const nt=new Uint64(new Uint32Array([tt.high(),0]));return tt=Uint64.multiply(h,et),nt.plus(tt),tt=Uint64.multiply(g,j),nt.plus(tt),this.buffer[1]=nt.low(),this.buffer[3]=nt.lessThan(tt)?1:0,this.buffer[2]=nt.high(),new Uint64(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2)).plus(Uint64.multiply(d,et)).plus(Uint64.multiply(h,j)).plus(Uint64.multiply(g,$)),this.buffer[3]+=Uint64.multiply(o,et).plus(Uint64.multiply(d,j)).plus(Uint64.multiply(h,$)).plus(Uint64.multiply(g,b)).low(),this}plus(e){const o=new Uint32Array(4);return o[3]=this.buffer[3]+e.buffer[3]>>>0,o[2]=this.buffer[2]+e.buffer[2]>>>0,o[1]=this.buffer[1]+e.buffer[1]>>>0,o[0]=this.buffer[0]+e.buffer[0]>>>0,o[0]<this.buffer[0]>>>0&&++o[1],o[1]<this.buffer[1]>>>0&&++o[2],o[2]<this.buffer[2]>>>0&&++o[3],this.buffer[3]=o[3],this.buffer[2]=o[2],this.buffer[1]=o[1],this.buffer[0]=o[0],this}hex(){return`${intAsHex(this.buffer[3])} ${intAsHex(this.buffer[2])} ${intAsHex(this.buffer[1])} ${intAsHex(this.buffer[0])}`}static multiply(e,o){return new Int128(new Uint32Array(e.buffer)).times(o)}static add(e,o){return new Int128(new Uint32Array(e.buffer)).plus(o)}static from(e,o=new Uint32Array(4)){return Int128.fromString(typeof e=="string"?e:e.toString(),o)}static fromNumber(e,o=new Uint32Array(4)){return Int128.fromString(e.toString(),o)}static fromString(e,o=new Uint32Array(4)){const d=e.startsWith("-"),h=e.length,g=new Int128(o);for(let b=d?1:0;b<h;){const $=kInt32DecimalDigits<h-b?kInt32DecimalDigits:h-b,j=new Int128(new Uint32Array([Number.parseInt(e.slice(b,b+$),10),0,0,0])),et=new Int128(new Uint32Array([kPowersOfTen[$],0,0,0]));g.times(et),g.plus(j),b+=$}return d?g.negate():g}static convertArray(e){const o=new Uint32Array(e.length*4);for(let d=-1,h=e.length;++d<h;)Int128.from(e[d],new Uint32Array(o.buffer,o.byteOffset+4*4*d,4));return o}}class VectorLoader extends Visitor{constructor(e,o,d,h,g=MetadataVersion$1.V5){super(),this.nodesIndex=-1,this.buffersIndex=-1,this.bytes=e,this.nodes=o,this.buffers=d,this.dictionaries=h,this.metadataVersion=g}visit(e){return super.visit(e instanceof Field?e.type:e)}visitNull(e,{length:o}=this.nextFieldNode()){return makeData({type:e,length:o})}visitBool(e,{length:o,nullCount:d}=this.nextFieldNode()){return makeData({type:e,length:o,nullCount:d,nullBitmap:this.readNullBitmap(e,d),data:this.readData(e)})}visitInt(e,{length:o,nullCount:d}=this.nextFieldNode()){return makeData({type:e,length:o,nullCount:d,nullBitmap:this.readNullBitmap(e,d),data:this.readData(e)})}visitFloat(e,{length:o,nullCount:d}=this.nextFieldNode()){return makeData({type:e,length:o,nullCount:d,nullBitmap:this.readNullBitmap(e,d),data:this.readData(e)})}visitUtf8(e,{length:o,nullCount:d}=this.nextFieldNode()){return makeData({type:e,length:o,nullCount:d,nullBitmap:this.readNullBitmap(e,d),valueOffsets:this.readOffsets(e),data:this.readData(e)})}visitBinary(e,{length:o,nullCount:d}=this.nextFieldNode()){return makeData({type:e,length:o,nullCount:d,nullBitmap:this.readNullBitmap(e,d),valueOffsets:this.readOffsets(e),data:this.readData(e)})}visitFixedSizeBinary(e,{length:o,nullCount:d}=this.nextFieldNode()){return makeData({type:e,length:o,nullCount:d,nullBitmap:this.readNullBitmap(e,d),data:this.readData(e)})}visitDate(e,{length:o,nullCount:d}=this.nextFieldNode()){return makeData({type:e,length:o,nullCount:d,nullBitmap:this.readNullBitmap(e,d),data:this.readData(e)})}visitTimestamp(e,{length:o,nullCount:d}=this.nextFieldNode()){return makeData({type:e,length:o,nullCount:d,nullBitmap:this.readNullBitmap(e,d),data:this.readData(e)})}visitTime(e,{length:o,nullCount:d}=this.nextFieldNode()){return makeData({type:e,length:o,nullCount:d,nullBitmap:this.readNullBitmap(e,d),data:this.readData(e)})}visitDecimal(e,{length:o,nullCount:d}=this.nextFieldNode()){return makeData({type:e,length:o,nullCount:d,nullBitmap:this.readNullBitmap(e,d),data:this.readData(e)})}visitList(e,{length:o,nullCount:d}=this.nextFieldNode()){return makeData({type:e,length:o,nullCount:d,nullBitmap:this.readNullBitmap(e,d),valueOffsets:this.readOffsets(e),child:this.visit(e.children[0])})}visitStruct(e,{length:o,nullCount:d}=this.nextFieldNode()){return makeData({type:e,length:o,nullCount:d,nullBitmap:this.readNullBitmap(e,d),children:this.visitMany(e.children)})}visitUnion(e,{length:o,nullCount:d}=this.nextFieldNode()){return this.metadataVersion<MetadataVersion$1.V5&&this.readNullBitmap(e,d),e.mode===UnionMode$1.Sparse?this.visitSparseUnion(e,{length:o,nullCount:d}):this.visitDenseUnion(e,{length:o,nullCount:d})}visitDenseUnion(e,{length:o,nullCount:d}=this.nextFieldNode()){return makeData({type:e,length:o,nullCount:d,typeIds:this.readTypeIds(e),valueOffsets:this.readOffsets(e),children:this.visitMany(e.children)})}visitSparseUnion(e,{length:o,nullCount:d}=this.nextFieldNode()){return makeData({type:e,length:o,nullCount:d,typeIds:this.readTypeIds(e),children:this.visitMany(e.children)})}visitDictionary(e,{length:o,nullCount:d}=this.nextFieldNode()){return makeData({type:e,length:o,nullCount:d,nullBitmap:this.readNullBitmap(e,d),data:this.readData(e.indices),dictionary:this.readDictionary(e)})}visitInterval(e,{length:o,nullCount:d}=this.nextFieldNode()){return makeData({type:e,length:o,nullCount:d,nullBitmap:this.readNullBitmap(e,d),data:this.readData(e)})}visitDuration(e,{length:o,nullCount:d}=this.nextFieldNode()){return makeData({type:e,length:o,nullCount:d,nullBitmap:this.readNullBitmap(e,d),data:this.readData(e)})}visitFixedSizeList(e,{length:o,nullCount:d}=this.nextFieldNode()){return makeData({type:e,length:o,nullCount:d,nullBitmap:this.readNullBitmap(e,d),child:this.visit(e.children[0])})}visitMap(e,{length:o,nullCount:d}=this.nextFieldNode()){return makeData({type:e,length:o,nullCount:d,nullBitmap:this.readNullBitmap(e,d),valueOffsets:this.readOffsets(e),child:this.visit(e.children[0])})}nextFieldNode(){return this.nodes[++this.nodesIndex]}nextBufferRange(){return this.buffers[++this.buffersIndex]}readNullBitmap(e,o,d=this.nextBufferRange()){return o>0&&this.readData(e,d)||new Uint8Array(0)}readOffsets(e,o){return this.readData(e,o)}readTypeIds(e,o){return this.readData(e,o)}readData(e,{length:o,offset:d}=this.nextBufferRange()){return this.bytes.subarray(d,d+o)}readDictionary(e){return this.dictionaries.get(e.id)}}class JSONVectorLoader extends VectorLoader{constructor(e,o,d,h,g){super(new Uint8Array(0),o,d,h,g),this.sources=e}readNullBitmap(e,o,{offset:d}=this.nextBufferRange()){return o<=0?new Uint8Array(0):packBools(this.sources[d])}readOffsets(e,{offset:o}=this.nextBufferRange()){return toArrayBufferView(Uint8Array,toArrayBufferView(Int32Array,this.sources[o]))}readTypeIds(e,{offset:o}=this.nextBufferRange()){return toArrayBufferView(Uint8Array,toArrayBufferView(e.ArrayType,this.sources[o]))}readData(e,{offset:o}=this.nextBufferRange()){const{sources:d}=this;return DataType.isTimestamp(e)||(DataType.isInt(e)||DataType.isTime(e))&&e.bitWidth===64||DataType.isDuration(e)||DataType.isDate(e)&&e.unit===DateUnit$1.MILLISECOND?toArrayBufferView(Uint8Array,Int64.convertArray(d[o])):DataType.isDecimal(e)?toArrayBufferView(Uint8Array,Int128.convertArray(d[o])):DataType.isBinary(e)||DataType.isFixedSizeBinary(e)?binaryDataFromJSON(d[o]):DataType.isBool(e)?packBools(d[o]):DataType.isUtf8(e)?encodeUtf8(d[o].join("")):toArrayBufferView(Uint8Array,toArrayBufferView(e.ArrayType,d[o].map(h=>+h)))}}function binaryDataFromJSON(i){const e=i.join(""),o=new Uint8Array(e.length/2);for(let d=0;d<e.length;d+=2)o[d>>1]=Number.parseInt(e.slice(d,d+2),16);return o}class TypeComparator extends Visitor{compareSchemas(e,o){return e===o||o instanceof e.constructor&&this.compareManyFields(e.fields,o.fields)}compareManyFields(e,o){return e===o||Array.isArray(e)&&Array.isArray(o)&&e.length===o.length&&e.every((d,h)=>this.compareFields(d,o[h]))}compareFields(e,o){return e===o||o instanceof e.constructor&&e.name===o.name&&e.nullable===o.nullable&&this.visit(e.type,o.type)}}function compareConstructor(i,e){return e instanceof i.constructor}function compareAny(i,e){return i===e||compareConstructor(i,e)}function compareInt(i,e){return i===e||compareConstructor(i,e)&&i.bitWidth===e.bitWidth&&i.isSigned===e.isSigned}function compareFloat(i,e){return i===e||compareConstructor(i,e)&&i.precision===e.precision}function compareFixedSizeBinary(i,e){return i===e||compareConstructor(i,e)&&i.byteWidth===e.byteWidth}function compareDate(i,e){return i===e||compareConstructor(i,e)&&i.unit===e.unit}function compareTimestamp(i,e){return i===e||compareConstructor(i,e)&&i.unit===e.unit&&i.timezone===e.timezone}function compareTime(i,e){return i===e||compareConstructor(i,e)&&i.unit===e.unit&&i.bitWidth===e.bitWidth}function compareList(i,e){return i===e||compareConstructor(i,e)&&i.children.length===e.children.length&&instance$1.compareManyFields(i.children,e.children)}function compareStruct(i,e){return i===e||compareConstructor(i,e)&&i.children.length===e.children.length&&instance$1.compareManyFields(i.children,e.children)}function compareUnion(i,e){return i===e||compareConstructor(i,e)&&i.mode===e.mode&&i.typeIds.every((o,d)=>o===e.typeIds[d])&&instance$1.compareManyFields(i.children,e.children)}function compareDictionary(i,e){return i===e||compareConstructor(i,e)&&i.id===e.id&&i.isOrdered===e.isOrdered&&instance$1.visit(i.indices,e.indices)&&instance$1.visit(i.dictionary,e.dictionary)}function compareInterval(i,e){return i===e||compareConstructor(i,e)&&i.unit===e.unit}function compareDuration(i,e){return i===e||compareConstructor(i,e)&&i.unit===e.unit}function compareFixedSizeList(i,e){return i===e||compareConstructor(i,e)&&i.listSize===e.listSize&&i.children.length===e.children.length&&instance$1.compareManyFields(i.children,e.children)}function compareMap(i,e){return i===e||compareConstructor(i,e)&&i.keysSorted===e.keysSorted&&i.children.length===e.children.length&&instance$1.compareManyFields(i.children,e.children)}TypeComparator.prototype.visitNull=compareAny;TypeComparator.prototype.visitBool=compareAny;TypeComparator.prototype.visitInt=compareInt;TypeComparator.prototype.visitInt8=compareInt;TypeComparator.prototype.visitInt16=compareInt;TypeComparator.prototype.visitInt32=compareInt;TypeComparator.prototype.visitInt64=compareInt;TypeComparator.prototype.visitUint8=compareInt;TypeComparator.prototype.visitUint16=compareInt;TypeComparator.prototype.visitUint32=compareInt;TypeComparator.prototype.visitUint64=compareInt;TypeComparator.prototype.visitFloat=compareFloat;TypeComparator.prototype.visitFloat16=compareFloat;TypeComparator.prototype.visitFloat32=compareFloat;TypeComparator.prototype.visitFloat64=compareFloat;TypeComparator.prototype.visitUtf8=compareAny;TypeComparator.prototype.visitBinary=compareAny;TypeComparator.prototype.visitFixedSizeBinary=compareFixedSizeBinary;TypeComparator.prototype.visitDate=compareDate;TypeComparator.prototype.visitDateDay=compareDate;TypeComparator.prototype.visitDateMillisecond=compareDate;TypeComparator.prototype.visitTimestamp=compareTimestamp;TypeComparator.prototype.visitTimestampSecond=compareTimestamp;TypeComparator.prototype.visitTimestampMillisecond=compareTimestamp;TypeComparator.prototype.visitTimestampMicrosecond=compareTimestamp;TypeComparator.prototype.visitTimestampNanosecond=compareTimestamp;TypeComparator.prototype.visitTime=compareTime;TypeComparator.prototype.visitTimeSecond=compareTime;TypeComparator.prototype.visitTimeMillisecond=compareTime;TypeComparator.prototype.visitTimeMicrosecond=compareTime;TypeComparator.prototype.visitTimeNanosecond=compareTime;TypeComparator.prototype.visitDecimal=compareAny;TypeComparator.prototype.visitList=compareList;TypeComparator.prototype.visitStruct=compareStruct;TypeComparator.prototype.visitUnion=compareUnion;TypeComparator.prototype.visitDenseUnion=compareUnion;TypeComparator.prototype.visitSparseUnion=compareUnion;TypeComparator.prototype.visitDictionary=compareDictionary;TypeComparator.prototype.visitInterval=compareInterval;TypeComparator.prototype.visitIntervalDayTime=compareInterval;TypeComparator.prototype.visitIntervalYearMonth=compareInterval;TypeComparator.prototype.visitDuration=compareDuration;TypeComparator.prototype.visitDurationSecond=compareDuration;TypeComparator.prototype.visitDurationMillisecond=compareDuration;TypeComparator.prototype.visitDurationMicrosecond=compareDuration;TypeComparator.prototype.visitDurationNanosecond=compareDuration;TypeComparator.prototype.visitFixedSizeList=compareFixedSizeList;TypeComparator.prototype.visitMap=compareMap;const instance$1=new TypeComparator;function compareSchemas(i,e){return instance$1.compareSchemas(i,e)}function distributeVectorsIntoRecordBatches(i,e){return uniformlyDistributeChunksAcrossRecordBatches(i,e.map(o=>o.data.concat()))}function uniformlyDistributeChunksAcrossRecordBatches(i,e){const o=[...i.fields],d=[],h={numBatches:e.reduce((nt,rt)=>Math.max(nt,rt.length),0)};let g=0,b=0,$=-1;const j=e.length;let et,tt=[];for(;h.numBatches-- >0;){for(b=Number.POSITIVE_INFINITY,$=-1;++$<j;)tt[$]=et=e[$].shift(),b=Math.min(b,et?et.length:b);Number.isFinite(b)&&(tt=distributeChildren(o,b,tt,e,h),b>0&&(d[g++]=makeData({type:new Struct(o),length:b,nullCount:0,children:tt.slice()})))}return[i=i.assign(o),d.map(nt=>new RecordBatch$2(i,nt))]}function distributeChildren(i,e,o,d,h){var g;const b=(e+63&-64)>>3;for(let $=-1,j=d.length;++$<j;){const et=o[$],tt=et==null?void 0:et.length;if(tt>=e)tt===e?o[$]=et:(o[$]=et.slice(0,e),h.numBatches=Math.max(h.numBatches,d[$].unshift(et.slice(e,tt-e))));else{const nt=i[$];i[$]=nt.clone({nullable:!0}),o[$]=(g=et==null?void 0:et._changeLengthAndBackfillNullBitmap(e))!==null&&g!==void 0?g:makeData({type:nt.type,length:e,nullCount:e,nullBitmap:new Uint8Array(b)})}}return o}var _a$1;class Table{constructor(...e){var o,d;if(e.length===0)return this.batches=[],this.schema=new Schema([]),this._offsets=[0],this;let h,g;e[0]instanceof Schema&&(h=e.shift()),e.at(-1)instanceof Uint32Array&&(g=e.pop());const b=j=>{if(j){if(j instanceof RecordBatch$2)return[j];if(j instanceof Table)return j.batches;if(j instanceof Data){if(j.type instanceof Struct)return[new RecordBatch$2(new Schema(j.type.children),j)]}else{if(Array.isArray(j))return j.flatMap(et=>b(et));if(typeof j[Symbol.iterator]=="function")return[...j].flatMap(et=>b(et));if(typeof j=="object"){const et=Object.keys(j),tt=et.map(ot=>new Vector([j[ot]])),nt=new Schema(et.map((ot,st)=>new Field(String(ot),tt[st].type))),[,rt]=distributeVectorsIntoRecordBatches(nt,tt);return rt.length===0?[new RecordBatch$2(j)]:rt}}}return[]},$=e.flatMap(j=>b(j));if(h=(d=h??((o=$[0])===null||o===void 0?void 0:o.schema))!==null&&d!==void 0?d:new Schema([]),!(h instanceof Schema))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const j of $){if(!(j instanceof RecordBatch$2))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!compareSchemas(h,j.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=h,this.batches=$,this._offsets=g??computeChunkOffsets(this.data)}get data(){return this.batches.map(({data:e})=>e)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((e,o)=>e+o.length,0)}get nullCount(){return this._nullCount===-1&&(this._nullCount=computeChunkNullCounts(this.data)),this._nullCount}isValid(e){return!1}get(e){return null}set(e,o){}indexOf(e,o){return-1}getByteLength(e){return 0}[Symbol.iterator](){return this.batches.length>0?instance$3.visit(new Vector(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(`,
  `)}
]`}concat(...e){const o=this.schema,d=this.data.concat(e.flatMap(({data:h})=>h));return new Table(o,d.map(h=>new RecordBatch$2(o,h)))}slice(e,o){const d=this.schema;[e,o]=clampRange({length:this.numRows},e,o);const h=sliceChunks(this.data,this._offsets,e,o);return new Table(d,h.map(g=>new RecordBatch$2(d,g)))}getChild(e){return this.getChildAt(this.schema.fields.findIndex(o=>o.name===e))}getChildAt(e){if(e>-1&&e<this.schema.fields.length){const o=this.data.map(d=>d.children[e]);if(o.length===0){const{type:d}=this.schema.fields[e],h=makeData({type:d,length:0,nullCount:0});o.push(h._changeLengthAndBackfillNullBitmap(this.numRows))}return new Vector(o)}return null}setChild(e,o){var d;return this.setChildAt((d=this.schema.fields)===null||d===void 0?void 0:d.findIndex(h=>h.name===e),o)}setChildAt(e,o){let d=this.schema,h=[...this.batches];if(e>-1&&e<this.numCols){o||(o=new Vector([makeData({type:new Null$1,length:this.numRows})]));const g=d.fields.slice(),b=g[e].clone({type:o.type}),$=this.schema.fields.map((j,et)=>this.getChildAt(et));[g[e],$[e]]=[b,o],[d,h]=distributeVectorsIntoRecordBatches(d,$)}return new Table(d,h)}select(e){const o=this.schema.fields.reduce((d,h,g)=>d.set(h.name,g),new Map);return this.selectAt(e.map(d=>o.get(d)).filter(d=>d>-1))}selectAt(e){const o=this.schema.selectAt(e),d=this.batches.map(h=>h.selectAt(e));return new Table(o,d)}assign(e){const o=this.schema.fields,[d,h]=e.schema.fields.reduce(($,j,et)=>{const[tt,nt]=$,rt=o.findIndex(ot=>ot.name===j.name);return~rt?nt[rt]=et:tt.push(et),$},[[],[]]),g=this.schema.assign(e.schema),b=[...o.map(($,j)=>[j,h[j]]).map(([$,j])=>j===void 0?this.getChildAt($):e.getChildAt(j)),...d.map($=>e.getChildAt($))].filter(Boolean);return new Table(...distributeVectorsIntoRecordBatches(g,b))}}_a$1=Symbol.toStringTag;Table[_a$1]=(i=>(i.schema=null,i.batches=[],i._offsets=new Uint32Array([0]),i._nullCount=-1,i[Symbol.isConcatSpreadable]=!0,i.isValid=wrapChunkedCall1(isChunkedValid),i.get=wrapChunkedCall1(instance$5.getVisitFn(Type$1.Struct)),i.set=wrapChunkedCall2(instance$6.getVisitFn(Type$1.Struct)),i.indexOf=wrapChunkedIndexOf(instance$4.getVisitFn(Type$1.Struct)),i.getByteLength=wrapChunkedCall1(instance$2.getVisitFn(Type$1.Struct)),"Table"))(Table.prototype);var _a;let RecordBatch$2=class Ps{constructor(...e){switch(e.length){case 2:{if([this.schema]=e,!(this.schema instanceof Schema))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=makeData({nullCount:0,type:new Struct(this.schema.fields),children:this.schema.fields.map(o=>makeData({type:o.type,nullCount:0}))})]=e,!(this.data instanceof Data))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=ensureSameLengthData(this.schema,this.data.children);break}case 1:{const[o]=e,{fields:d,children:h,length:g}=Object.keys(o).reduce((j,et,tt)=>(j.children[tt]=o[et],j.length=Math.max(j.length,o[et].length),j.fields[tt]=Field.new({name:et,type:o[et].type,nullable:!0}),j),{length:0,fields:new Array,children:new Array}),b=new Schema(d),$=makeData({type:new Struct(d),length:g,children:h,nullCount:0});[this.schema,this.data]=ensureSameLengthData(b,$.children,g);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=collectDictionaries(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(e){return this.data.getValid(e)}get(e){return instance$5.visit(this.data,e)}set(e,o){return instance$6.visit(this.data,e,o)}indexOf(e,o){return instance$4.visit(this.data,e,o)}getByteLength(e){return instance$2.visit(this.data,e)}[Symbol.iterator](){return instance$3.visit(new Vector([this.data]))}toArray(){return[...this]}concat(...e){return new Table(this.schema,[this,...e])}slice(e,o){const[d]=new Vector([this.data]).slice(e,o).data;return new Ps(this.schema,d)}getChild(e){var o;return this.getChildAt((o=this.schema.fields)===null||o===void 0?void 0:o.findIndex(d=>d.name===e))}getChildAt(e){return e>-1&&e<this.schema.fields.length?new Vector([this.data.children[e]]):null}setChild(e,o){var d;return this.setChildAt((d=this.schema.fields)===null||d===void 0?void 0:d.findIndex(h=>h.name===e),o)}setChildAt(e,o){let d=this.schema,h=this.data;if(e>-1&&e<this.numCols){o||(o=new Vector([makeData({type:new Null$1,length:this.numRows})]));const g=d.fields.slice(),b=h.children.slice(),$=g[e].clone({type:o.type});[g[e],b[e]]=[$,o.data[0]],d=new Schema(g,new Map(this.schema.metadata)),h=makeData({type:new Struct(g),children:b})}return new Ps(d,h)}select(e){const o=this.schema.select(e),d=new Struct(o.fields),h=[];for(const g of e){const b=this.schema.fields.findIndex($=>$.name===g);~b&&(h[b]=this.data.children[b])}return new Ps(o,makeData({type:d,length:this.numRows,children:h}))}selectAt(e){const o=this.schema.selectAt(e),d=e.map(g=>this.data.children[g]).filter(Boolean),h=makeData({type:new Struct(o.fields),length:this.numRows,children:d});return new Ps(o,h)}};_a=Symbol.toStringTag;RecordBatch$2[_a]=(i=>(i._nullCount=-1,i[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(RecordBatch$2.prototype);function ensureSameLengthData(i,e,o=e.reduce((d,h)=>Math.max(d,h.length),0)){var d;const h=[...i.fields],g=[...e],b=(o+63&-64)>>3;for(const[$,j]of i.fields.entries()){const et=e[$];(!et||et.length!==o)&&(h[$]=j.clone({nullable:!0}),g[$]=(d=et==null?void 0:et._changeLengthAndBackfillNullBitmap(o))!==null&&d!==void 0?d:makeData({type:j.type,length:o,nullCount:o,nullBitmap:new Uint8Array(b)}))}return[i.assign(h),makeData({type:new Struct(h),length:o,children:g})]}function collectDictionaries(i,e,o=new Map){var d,h;if(((d=i==null?void 0:i.length)!==null&&d!==void 0?d:0)>0&&(i==null?void 0:i.length)===(e==null?void 0:e.length))for(let g=-1,b=i.length;++g<b;){const{type:$}=i[g],j=e[g];for(const et of[j,...((h=j==null?void 0:j.dictionary)===null||h===void 0?void 0:h.data)||[]])collectDictionaries($.children,et==null?void 0:et.children,o);if(DataType.isDictionary($)){const{id:et}=$;if(!o.has(et))j!=null&&j.dictionary&&o.set(et,j.dictionary);else if(o.get(et)!==j.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}}return o}class _InternalEmptyPlaceholderRecordBatch extends RecordBatch$2{constructor(e){const o=e.fields.map(h=>makeData({type:h.type})),d=makeData({type:new Struct(e.fields),nullCount:0,children:o});super(e,d)}}var BodyCompressionMethod;(function(i){i[i.BUFFER=0]="BUFFER"})(BodyCompressionMethod||(BodyCompressionMethod={}));var CompressionType;(function(i){i[i.LZ4_FRAME=0]="LZ4_FRAME",i[i.ZSTD=1]="ZSTD"})(CompressionType||(CompressionType={}));class BodyCompression{constructor(){this.bb=null,this.bb_pos=0}__init(e,o){return this.bb_pos=e,this.bb=o,this}static getRootAsBodyCompression(e,o){return(o||new BodyCompression).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsBodyCompression(e,o){return e.setPosition(e.position()+SIZE_PREFIX_LENGTH),(o||new BodyCompression).__init(e.readInt32(e.position())+e.position(),e)}codec(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt8(this.bb_pos+e):CompressionType.LZ4_FRAME}method(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt8(this.bb_pos+e):BodyCompressionMethod.BUFFER}static startBodyCompression(e){e.startObject(2)}static addCodec(e,o){e.addFieldInt8(0,o,CompressionType.LZ4_FRAME)}static addMethod(e,o){e.addFieldInt8(1,o,BodyCompressionMethod.BUFFER)}static endBodyCompression(e){return e.endObject()}static createBodyCompression(e,o,d){return BodyCompression.startBodyCompression(e),BodyCompression.addCodec(e,o),BodyCompression.addMethod(e,d),BodyCompression.endBodyCompression(e)}}class Buffer{constructor(){this.bb=null,this.bb_pos=0}__init(e,o){return this.bb_pos=e,this.bb=o,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(e,o,d){return e.prep(8,16),e.writeInt64(BigInt(d??0)),e.writeInt64(BigInt(o??0)),e.offset()}}let FieldNode$1=class{constructor(){this.bb=null,this.bb_pos=0}__init(e,o){return this.bb_pos=e,this.bb=o,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(e,o,d){return e.prep(8,16),e.writeInt64(BigInt(d??0)),e.writeInt64(BigInt(o??0)),e.offset()}},RecordBatch$1=class nu{constructor(){this.bb=null,this.bb_pos=0}__init(e,o){return this.bb_pos=e,this.bb=o,this}static getRootAsRecordBatch(e,o){return(o||new nu).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsRecordBatch(e,o){return e.setPosition(e.position()+SIZE_PREFIX_LENGTH),(o||new nu).__init(e.readInt32(e.position())+e.position(),e)}length(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt64(this.bb_pos+e):BigInt("0")}nodes(e,o){const d=this.bb.__offset(this.bb_pos,6);return d?(o||new FieldNode$1).__init(this.bb.__vector(this.bb_pos+d)+e*16,this.bb):null}nodesLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}buffers(e,o){const d=this.bb.__offset(this.bb_pos,8);return d?(o||new Buffer).__init(this.bb.__vector(this.bb_pos+d)+e*16,this.bb):null}buffersLength(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}compression(e){const o=this.bb.__offset(this.bb_pos,10);return o?(e||new BodyCompression).__init(this.bb.__indirect(this.bb_pos+o),this.bb):null}static startRecordBatch(e){e.startObject(4)}static addLength(e,o){e.addFieldInt64(0,o,BigInt("0"))}static addNodes(e,o){e.addFieldOffset(1,o,0)}static startNodesVector(e,o){e.startVector(16,o,8)}static addBuffers(e,o){e.addFieldOffset(2,o,0)}static startBuffersVector(e,o){e.startVector(16,o,8)}static addCompression(e,o){e.addFieldOffset(3,o,0)}static endRecordBatch(e){return e.endObject()}},DictionaryBatch$1=class ru{constructor(){this.bb=null,this.bb_pos=0}__init(e,o){return this.bb_pos=e,this.bb=o,this}static getRootAsDictionaryBatch(e,o){return(o||new ru).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDictionaryBatch(e,o){return e.setPosition(e.position()+SIZE_PREFIX_LENGTH),(o||new ru).__init(e.readInt32(e.position())+e.position(),e)}id(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt64(this.bb_pos+e):BigInt("0")}data(e){const o=this.bb.__offset(this.bb_pos,6);return o?(e||new RecordBatch$1).__init(this.bb.__indirect(this.bb_pos+o),this.bb):null}isDelta(){const e=this.bb.__offset(this.bb_pos,8);return e?!!this.bb.readInt8(this.bb_pos+e):!1}static startDictionaryBatch(e){e.startObject(3)}static addId(e,o){e.addFieldInt64(0,o,BigInt("0"))}static addData(e,o){e.addFieldOffset(1,o,0)}static addIsDelta(e,o){e.addFieldInt8(2,+o,0)}static endDictionaryBatch(e){return e.endObject()}};var MessageHeader;(function(i){i[i.NONE=0]="NONE",i[i.Schema=1]="Schema",i[i.DictionaryBatch=2]="DictionaryBatch",i[i.RecordBatch=3]="RecordBatch",i[i.Tensor=4]="Tensor",i[i.SparseTensor=5]="SparseTensor"})(MessageHeader||(MessageHeader={}));let Message$1=class Xr{constructor(){this.bb=null,this.bb_pos=0}__init(e,o){return this.bb_pos=e,this.bb=o,this}static getRootAsMessage(e,o){return(o||new Xr).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsMessage(e,o){return e.setPosition(e.position()+SIZE_PREFIX_LENGTH),(o||new Xr).__init(e.readInt32(e.position())+e.position(),e)}version(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):MetadataVersion.V1}headerType(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint8(this.bb_pos+e):MessageHeader.NONE}header(e){const o=this.bb.__offset(this.bb_pos,8);return o?this.bb.__union(e,this.bb_pos+o):null}bodyLength(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readInt64(this.bb_pos+e):BigInt("0")}customMetadata(e,o){const d=this.bb.__offset(this.bb_pos,12);return d?(o||new KeyValue).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+d)+e*4),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__vector_len(this.bb_pos+e):0}static startMessage(e){e.startObject(5)}static addVersion(e,o){e.addFieldInt16(0,o,MetadataVersion.V1)}static addHeaderType(e,o){e.addFieldInt8(1,o,MessageHeader.NONE)}static addHeader(e,o){e.addFieldOffset(2,o,0)}static addBodyLength(e,o){e.addFieldInt64(3,o,BigInt("0"))}static addCustomMetadata(e,o){e.addFieldOffset(4,o,0)}static createCustomMetadataVector(e,o){e.startVector(4,o.length,4);for(let d=o.length-1;d>=0;d--)e.addOffset(o[d]);return e.endVector()}static startCustomMetadataVector(e,o){e.startVector(4,o,4)}static endMessage(e){return e.endObject()}static finishMessageBuffer(e,o){e.finish(o)}static finishSizePrefixedMessageBuffer(e,o){e.finish(o,void 0,!0)}static createMessage(e,o,d,h,g,b){return Xr.startMessage(e),Xr.addVersion(e,o),Xr.addHeaderType(e,d),Xr.addHeader(e,h),Xr.addBodyLength(e,g),Xr.addCustomMetadata(e,b),Xr.endMessage(e)}};class TypeAssembler extends Visitor{visit(e,o){return e==null||o==null?void 0:super.visit(e,o)}visitNull(e,o){return Null.startNull(o),Null.endNull(o)}visitInt(e,o){return Int.startInt(o),Int.addBitWidth(o,e.bitWidth),Int.addIsSigned(o,e.isSigned),Int.endInt(o)}visitFloat(e,o){return FloatingPoint.startFloatingPoint(o),FloatingPoint.addPrecision(o,e.precision),FloatingPoint.endFloatingPoint(o)}visitBinary(e,o){return Binary.startBinary(o),Binary.endBinary(o)}visitBool(e,o){return Bool.startBool(o),Bool.endBool(o)}visitUtf8(e,o){return Utf8.startUtf8(o),Utf8.endUtf8(o)}visitDecimal(e,o){return Decimal.startDecimal(o),Decimal.addScale(o,e.scale),Decimal.addPrecision(o,e.precision),Decimal.addBitWidth(o,e.bitWidth),Decimal.endDecimal(o)}visitDate(e,o){return Date$1.startDate(o),Date$1.addUnit(o,e.unit),Date$1.endDate(o)}visitTime(e,o){return Time.startTime(o),Time.addUnit(o,e.unit),Time.addBitWidth(o,e.bitWidth),Time.endTime(o)}visitTimestamp(e,o){const d=e.timezone&&o.createString(e.timezone)||void 0;return Timestamp.startTimestamp(o),Timestamp.addUnit(o,e.unit),d!==void 0&&Timestamp.addTimezone(o,d),Timestamp.endTimestamp(o)}visitInterval(e,o){return Interval.startInterval(o),Interval.addUnit(o,e.unit),Interval.endInterval(o)}visitDuration(e,o){return Duration.startDuration(o),Duration.addUnit(o,e.unit),Duration.endDuration(o)}visitList(e,o){return List.startList(o),List.endList(o)}visitStruct(e,o){return Struct_.startStruct_(o),Struct_.endStruct_(o)}visitUnion(e,o){Union.startTypeIdsVector(o,e.typeIds.length);const d=Union.createTypeIdsVector(o,e.typeIds);return Union.startUnion(o),Union.addMode(o,e.mode),Union.addTypeIds(o,d),Union.endUnion(o)}visitDictionary(e,o){const d=this.visit(e.indices,o);return DictionaryEncoding.startDictionaryEncoding(o),DictionaryEncoding.addId(o,BigInt(e.id)),DictionaryEncoding.addIsOrdered(o,e.isOrdered),d!==void 0&&DictionaryEncoding.addIndexType(o,d),DictionaryEncoding.endDictionaryEncoding(o)}visitFixedSizeBinary(e,o){return FixedSizeBinary.startFixedSizeBinary(o),FixedSizeBinary.addByteWidth(o,e.byteWidth),FixedSizeBinary.endFixedSizeBinary(o)}visitFixedSizeList(e,o){return FixedSizeList.startFixedSizeList(o),FixedSizeList.addListSize(o,e.listSize),FixedSizeList.endFixedSizeList(o)}visitMap(e,o){return Map$1.startMap(o),Map$1.addKeysSorted(o,e.keysSorted),Map$1.endMap(o)}}const instance=new TypeAssembler;function schemaFromJSON(i,e=new Map){return new Schema(schemaFieldsFromJSON(i,e),customMetadataFromJSON(i.metadata),e)}function recordBatchFromJSON(i){return new RecordBatch(i.count,fieldNodesFromJSON(i.columns),buffersFromJSON(i.columns))}function dictionaryBatchFromJSON(i){return new DictionaryBatch(recordBatchFromJSON(i.data),i.id,i.isDelta)}function schemaFieldsFromJSON(i,e){return(i.fields||[]).filter(Boolean).map(o=>Field.fromJSON(o,e))}function fieldChildrenFromJSON(i,e){return(i.children||[]).filter(Boolean).map(o=>Field.fromJSON(o,e))}function fieldNodesFromJSON(i){return(i||[]).reduce((e,o)=>[...e,new FieldNode(o.count,nullCountFromJSON(o.VALIDITY)),...fieldNodesFromJSON(o.children)],[])}function buffersFromJSON(i,e=[]){for(let o=-1,d=(i||[]).length;++o<d;){const h=i[o];h.VALIDITY&&e.push(new BufferRegion(e.length,h.VALIDITY.length)),h.TYPE_ID&&e.push(new BufferRegion(e.length,h.TYPE_ID.length)),h.OFFSET&&e.push(new BufferRegion(e.length,h.OFFSET.length)),h.DATA&&e.push(new BufferRegion(e.length,h.DATA.length)),e=buffersFromJSON(h.children,e)}return e}function nullCountFromJSON(i){return(i||[]).reduce((e,o)=>e+ +(o===0),0)}function fieldFromJSON(i,e){let o,d,h,g,b,$;return!e||!(g=i.dictionary)?(b=typeFromJSON(i,fieldChildrenFromJSON(i,e)),h=new Field(i.name,b,i.nullable,customMetadataFromJSON(i.metadata))):e.has(o=g.id)?(d=(d=g.indexType)?indexTypeFromJSON(d):new Int32,$=new Dictionary(e.get(o),d,o,g.isOrdered),h=new Field(i.name,$,i.nullable,customMetadataFromJSON(i.metadata))):(d=(d=g.indexType)?indexTypeFromJSON(d):new Int32,e.set(o,b=typeFromJSON(i,fieldChildrenFromJSON(i,e))),$=new Dictionary(b,d,o,g.isOrdered),h=new Field(i.name,$,i.nullable,customMetadataFromJSON(i.metadata))),h||null}function customMetadataFromJSON(i=[]){return new Map(i.map(({key:e,value:o})=>[e,o]))}function indexTypeFromJSON(i){return new Int_(i.isSigned,i.bitWidth)}function typeFromJSON(i,e){const o=i.type.name;switch(o){case"NONE":return new Null$1;case"null":return new Null$1;case"binary":return new Binary$1;case"utf8":return new Utf8$1;case"bool":return new Bool$1;case"list":return new List$1((e||[])[0]);case"struct":return new Struct(e||[]);case"struct_":return new Struct(e||[])}switch(o){case"int":{const d=i.type;return new Int_(d.isSigned,d.bitWidth)}case"floatingpoint":{const d=i.type;return new Float(Precision$1[d.precision])}case"decimal":{const d=i.type;return new Decimal$1(d.scale,d.precision,d.bitWidth)}case"date":{const d=i.type;return new Date_(DateUnit$1[d.unit])}case"time":{const d=i.type;return new Time_(TimeUnit$1[d.unit],d.bitWidth)}case"timestamp":{const d=i.type;return new Timestamp_(TimeUnit$1[d.unit],d.timezone)}case"interval":{const d=i.type;return new Interval_(IntervalUnit$1[d.unit])}case"duration":{const d=i.type;return new Duration$1(TimeUnit$1[d.unit])}case"union":{const d=i.type,[h,...g]=(d.mode+"").toLowerCase(),b=h.toUpperCase()+g.join("");return new Union_(UnionMode$1[b],d.typeIds||[],e||[])}case"fixedsizebinary":{const d=i.type;return new FixedSizeBinary$1(d.byteWidth)}case"fixedsizelist":{const d=i.type;return new FixedSizeList$1(d.listSize,(e||[])[0])}case"map":{const d=i.type;return new Map_((e||[])[0],d.keysSorted)}}throw new Error(`Unrecognized type: "${o}"`)}var Builder=Builder$2,ByteBuffer=ByteBuffer$2;class Message{static fromJSON(e,o){const d=new Message(0,MetadataVersion$1.V5,o);return d._createHeader=messageHeaderFromJSON(e,o),d}static decode(e){e=new ByteBuffer(toUint8Array(e));const o=Message$1.getRootAsMessage(e),d=o.bodyLength(),h=o.version(),g=o.headerType(),b=new Message(d,h,g);return b._createHeader=decodeMessageHeader(o,g),b}static encode(e){const o=new Builder;let d=-1;return e.isSchema()?d=Schema.encode(o,e.header()):e.isRecordBatch()?d=RecordBatch.encode(o,e.header()):e.isDictionaryBatch()&&(d=DictionaryBatch.encode(o,e.header())),Message$1.startMessage(o),Message$1.addVersion(o,MetadataVersion$1.V5),Message$1.addHeader(o,d),Message$1.addHeaderType(o,e.headerType),Message$1.addBodyLength(o,BigInt(e.bodyLength)),Message$1.finishMessageBuffer(o,Message$1.endMessage(o)),o.asUint8Array()}static from(e,o=0){if(e instanceof Schema)return new Message(0,MetadataVersion$1.V5,MessageHeader$1.Schema,e);if(e instanceof RecordBatch)return new Message(o,MetadataVersion$1.V5,MessageHeader$1.RecordBatch,e);if(e instanceof DictionaryBatch)return new Message(o,MetadataVersion$1.V5,MessageHeader$1.DictionaryBatch,e);throw new Error(`Unrecognized Message header: ${e}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===MessageHeader$1.Schema}isRecordBatch(){return this.headerType===MessageHeader$1.RecordBatch}isDictionaryBatch(){return this.headerType===MessageHeader$1.DictionaryBatch}constructor(e,o,d,h){this._version=o,this._headerType=d,this.body=new Uint8Array(0),h&&(this._createHeader=()=>h),this._bodyLength=bigIntToNumber(e)}}class RecordBatch{get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}constructor(e,o,d){this._nodes=o,this._buffers=d,this._length=bigIntToNumber(e)}}class DictionaryBatch{get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}constructor(e,o,d=!1){this._data=e,this._isDelta=d,this._id=bigIntToNumber(o)}}class BufferRegion{constructor(e,o){this.offset=bigIntToNumber(e),this.length=bigIntToNumber(o)}}class FieldNode{constructor(e,o){this.length=bigIntToNumber(e),this.nullCount=bigIntToNumber(o)}}function messageHeaderFromJSON(i,e){return()=>{switch(e){case MessageHeader$1.Schema:return Schema.fromJSON(i);case MessageHeader$1.RecordBatch:return RecordBatch.fromJSON(i);case MessageHeader$1.DictionaryBatch:return DictionaryBatch.fromJSON(i)}throw new Error(`Unrecognized Message type: { name: ${MessageHeader$1[e]}, type: ${e} }`)}}function decodeMessageHeader(i,e){return()=>{switch(e){case MessageHeader$1.Schema:return Schema.decode(i.header(new Schema$1),new Map,i.version());case MessageHeader$1.RecordBatch:return RecordBatch.decode(i.header(new RecordBatch$1),i.version());case MessageHeader$1.DictionaryBatch:return DictionaryBatch.decode(i.header(new DictionaryBatch$1),i.version())}throw new Error(`Unrecognized Message type: { name: ${MessageHeader$1[e]}, type: ${e} }`)}}Field.encode=encodeField;Field.decode=decodeField;Field.fromJSON=fieldFromJSON;Schema.encode=encodeSchema;Schema.decode=decodeSchema;Schema.fromJSON=schemaFromJSON;RecordBatch.encode=encodeRecordBatch;RecordBatch.decode=decodeRecordBatch;RecordBatch.fromJSON=recordBatchFromJSON;DictionaryBatch.encode=encodeDictionaryBatch;DictionaryBatch.decode=decodeDictionaryBatch;DictionaryBatch.fromJSON=dictionaryBatchFromJSON;FieldNode.encode=encodeFieldNode;FieldNode.decode=decodeFieldNode;BufferRegion.encode=encodeBufferRegion;BufferRegion.decode=decodeBufferRegion;function decodeSchema(i,e=new Map,o=MetadataVersion$1.V5){const d=decodeSchemaFields(i,e);return new Schema(d,decodeCustomMetadata(i),e,o)}function decodeRecordBatch(i,e=MetadataVersion$1.V5){if(i.compression()!==null)throw new Error("Record batch compression not implemented");return new RecordBatch(i.length(),decodeFieldNodes(i),decodeBuffers(i,e))}function decodeDictionaryBatch(i,e=MetadataVersion$1.V5){return new DictionaryBatch(RecordBatch.decode(i.data(),e),i.id(),i.isDelta())}function decodeBufferRegion(i){return new BufferRegion(i.offset(),i.length())}function decodeFieldNode(i){return new FieldNode(i.length(),i.nullCount())}function decodeFieldNodes(i){const e=[];for(let o,d=-1,h=-1,g=i.nodesLength();++d<g;)(o=i.nodes(d))&&(e[++h]=FieldNode.decode(o));return e}function decodeBuffers(i,e){const o=[];for(let d,h=-1,g=-1,b=i.buffersLength();++h<b;)(d=i.buffers(h))&&(e<MetadataVersion$1.V4&&(d.bb_pos+=8*(h+1)),o[++g]=BufferRegion.decode(d));return o}function decodeSchemaFields(i,e){const o=[];for(let d,h=-1,g=-1,b=i.fieldsLength();++h<b;)(d=i.fields(h))&&(o[++g]=Field.decode(d,e));return o}function decodeFieldChildren(i,e){const o=[];for(let d,h=-1,g=-1,b=i.childrenLength();++h<b;)(d=i.children(h))&&(o[++g]=Field.decode(d,e));return o}function decodeField(i,e){let o,d,h,g,b,$;return!e||!($=i.dictionary())?(h=decodeFieldType(i,decodeFieldChildren(i,e)),d=new Field(i.name(),h,i.nullable(),decodeCustomMetadata(i))):e.has(o=bigIntToNumber($.id()))?(g=(g=$.indexType())?decodeIndexType(g):new Int32,b=new Dictionary(e.get(o),g,o,$.isOrdered()),d=new Field(i.name(),b,i.nullable(),decodeCustomMetadata(i))):(g=(g=$.indexType())?decodeIndexType(g):new Int32,e.set(o,h=decodeFieldType(i,decodeFieldChildren(i,e))),b=new Dictionary(h,g,o,$.isOrdered()),d=new Field(i.name(),b,i.nullable(),decodeCustomMetadata(i))),d||null}function decodeCustomMetadata(i){const e=new Map;if(i)for(let o,d,h=-1,g=Math.trunc(i.customMetadataLength());++h<g;)(o=i.customMetadata(h))&&(d=o.key())!=null&&e.set(d,o.value());return e}function decodeIndexType(i){return new Int_(i.isSigned(),i.bitWidth())}function decodeFieldType(i,e){const o=i.typeType();switch(o){case Type.NONE:return new Null$1;case Type.Null:return new Null$1;case Type.Binary:return new Binary$1;case Type.Utf8:return new Utf8$1;case Type.Bool:return new Bool$1;case Type.List:return new List$1((e||[])[0]);case Type.Struct_:return new Struct(e||[])}switch(o){case Type.Int:{const d=i.type(new Int);return new Int_(d.isSigned(),d.bitWidth())}case Type.FloatingPoint:{const d=i.type(new FloatingPoint);return new Float(d.precision())}case Type.Decimal:{const d=i.type(new Decimal);return new Decimal$1(d.scale(),d.precision(),d.bitWidth())}case Type.Date:{const d=i.type(new Date$1);return new Date_(d.unit())}case Type.Time:{const d=i.type(new Time);return new Time_(d.unit(),d.bitWidth())}case Type.Timestamp:{const d=i.type(new Timestamp);return new Timestamp_(d.unit(),d.timezone())}case Type.Interval:{const d=i.type(new Interval);return new Interval_(d.unit())}case Type.Duration:{const d=i.type(new Duration);return new Duration$1(d.unit())}case Type.Union:{const d=i.type(new Union);return new Union_(d.mode(),d.typeIdsArray()||[],e||[])}case Type.FixedSizeBinary:{const d=i.type(new FixedSizeBinary);return new FixedSizeBinary$1(d.byteWidth())}case Type.FixedSizeList:{const d=i.type(new FixedSizeList);return new FixedSizeList$1(d.listSize(),(e||[])[0])}case Type.Map:{const d=i.type(new Map$1);return new Map_((e||[])[0],d.keysSorted())}}throw new Error(`Unrecognized type: "${Type[o]}" (${o})`)}function encodeSchema(i,e){const o=e.fields.map(g=>Field.encode(i,g));Schema$1.startFieldsVector(i,o.length);const d=Schema$1.createFieldsVector(i,o),h=e.metadata&&e.metadata.size>0?Schema$1.createCustomMetadataVector(i,[...e.metadata].map(([g,b])=>{const $=i.createString(`${g}`),j=i.createString(`${b}`);return KeyValue.startKeyValue(i),KeyValue.addKey(i,$),KeyValue.addValue(i,j),KeyValue.endKeyValue(i)})):-1;return Schema$1.startSchema(i),Schema$1.addFields(i,d),Schema$1.addEndianness(i,platformIsLittleEndian?Endianness.Little:Endianness.Big),h!==-1&&Schema$1.addCustomMetadata(i,h),Schema$1.endSchema(i)}function encodeField(i,e){let o=-1,d=-1,h=-1;const g=e.type;let b=e.typeId;DataType.isDictionary(g)?(b=g.dictionary.typeId,h=instance.visit(g,i),d=instance.visit(g.dictionary,i)):d=instance.visit(g,i);const $=(g.children||[]).map(tt=>Field.encode(i,tt)),j=Field$1.createChildrenVector(i,$),et=e.metadata&&e.metadata.size>0?Field$1.createCustomMetadataVector(i,[...e.metadata].map(([tt,nt])=>{const rt=i.createString(`${tt}`),ot=i.createString(`${nt}`);return KeyValue.startKeyValue(i),KeyValue.addKey(i,rt),KeyValue.addValue(i,ot),KeyValue.endKeyValue(i)})):-1;return e.name&&(o=i.createString(e.name)),Field$1.startField(i),Field$1.addType(i,d),Field$1.addTypeType(i,b),Field$1.addChildren(i,j),Field$1.addNullable(i,!!e.nullable),o!==-1&&Field$1.addName(i,o),h!==-1&&Field$1.addDictionary(i,h),et!==-1&&Field$1.addCustomMetadata(i,et),Field$1.endField(i)}function encodeRecordBatch(i,e){const o=e.nodes||[],d=e.buffers||[];RecordBatch$1.startNodesVector(i,o.length);for(const b of o.slice().reverse())FieldNode.encode(i,b);const h=i.endVector();RecordBatch$1.startBuffersVector(i,d.length);for(const b of d.slice().reverse())BufferRegion.encode(i,b);const g=i.endVector();return RecordBatch$1.startRecordBatch(i),RecordBatch$1.addLength(i,BigInt(e.length)),RecordBatch$1.addNodes(i,h),RecordBatch$1.addBuffers(i,g),RecordBatch$1.endRecordBatch(i)}function encodeDictionaryBatch(i,e){const o=RecordBatch.encode(i,e.data);return DictionaryBatch$1.startDictionaryBatch(i),DictionaryBatch$1.addId(i,BigInt(e.id)),DictionaryBatch$1.addIsDelta(i,e.isDelta),DictionaryBatch$1.addData(i,o),DictionaryBatch$1.endDictionaryBatch(i)}function encodeFieldNode(i,e){return FieldNode$1.createFieldNode(i,BigInt(e.length),BigInt(e.nullCount))}function encodeBufferRegion(i,e){return Buffer.createBuffer(i,BigInt(e.offset),BigInt(e.length))}const platformIsLittleEndian=(()=>{const i=new ArrayBuffer(2);return new DataView(i).setInt16(0,256,!0),new Int16Array(i)[0]===256})(),invalidMessageType=i=>`Expected ${MessageHeader$1[i]} Message in stream, but was null or length 0.`,nullMessage=i=>`Header pointer of flatbuffer-encoded ${MessageHeader$1[i]} Message is null or length 0.`,invalidMessageMetadata=(i,e)=>`Expected to read ${i} metadata bytes, but only read ${e}.`,invalidMessageBodyLength=(i,e)=>`Expected to read ${i} bytes for message body, but only read ${e}.`;class MessageReader{constructor(e){this.source=e instanceof ByteStream?e:new ByteStream(e)}[Symbol.iterator](){return this}next(){let e;return(e=this.readMetadataLength()).done||e.value===-1&&(e=this.readMetadataLength()).done||(e=this.readMetadata(e.value)).done?ITERATOR_DONE:e}throw(e){return this.source.throw(e)}return(e){return this.source.return(e)}readMessage(e){let o;if((o=this.next()).done)return null;if(e!=null&&o.value.headerType!==e)throw new Error(invalidMessageType(e));return o.value}readMessageBody(e){if(e<=0)return new Uint8Array(0);const o=toUint8Array(this.source.read(e));if(o.byteLength<e)throw new Error(invalidMessageBodyLength(e,o.byteLength));return o.byteOffset%8===0&&o.byteOffset+o.byteLength<=o.buffer.byteLength?o:o.slice()}readSchema(e=!1){const o=MessageHeader$1.Schema,d=this.readMessage(o),h=d==null?void 0:d.header();if(e&&!h)throw new Error(nullMessage(o));return h}readMetadataLength(){const e=this.source.read(PADDING),o=e&&new ByteBuffer$2(e),d=(o==null?void 0:o.readInt32(0))||0;return{done:d===0,value:d}}readMetadata(e){const o=this.source.read(e);if(!o)return ITERATOR_DONE;if(o.byteLength<e)throw new Error(invalidMessageMetadata(e,o.byteLength));return{done:!1,value:Message.decode(o)}}}class AsyncMessageReader{constructor(e,o){this.source=e instanceof AsyncByteStream?e:isFileHandle(e)?new AsyncRandomAccessFile(e,o):new AsyncByteStream(e)}[Symbol.asyncIterator](){return this}next(){return __awaiter(this,void 0,void 0,function*(){let e;return(e=yield this.readMetadataLength()).done||e.value===-1&&(e=yield this.readMetadataLength()).done||(e=yield this.readMetadata(e.value)).done?ITERATOR_DONE:e})}throw(e){return __awaiter(this,void 0,void 0,function*(){return yield this.source.throw(e)})}return(e){return __awaiter(this,void 0,void 0,function*(){return yield this.source.return(e)})}readMessage(e){return __awaiter(this,void 0,void 0,function*(){let o;if((o=yield this.next()).done)return null;if(e!=null&&o.value.headerType!==e)throw new Error(invalidMessageType(e));return o.value})}readMessageBody(e){return __awaiter(this,void 0,void 0,function*(){if(e<=0)return new Uint8Array(0);const o=toUint8Array(yield this.source.read(e));if(o.byteLength<e)throw new Error(invalidMessageBodyLength(e,o.byteLength));return o.byteOffset%8===0&&o.byteOffset+o.byteLength<=o.buffer.byteLength?o:o.slice()})}readSchema(e=!1){return __awaiter(this,void 0,void 0,function*(){const o=MessageHeader$1.Schema,d=yield this.readMessage(o),h=d==null?void 0:d.header();if(e&&!h)throw new Error(nullMessage(o));return h})}readMetadataLength(){return __awaiter(this,void 0,void 0,function*(){const e=yield this.source.read(PADDING),o=e&&new ByteBuffer$2(e),d=(o==null?void 0:o.readInt32(0))||0;return{done:d===0,value:d}})}readMetadata(e){return __awaiter(this,void 0,void 0,function*(){const o=yield this.source.read(e);if(!o)return ITERATOR_DONE;if(o.byteLength<e)throw new Error(invalidMessageMetadata(e,o.byteLength));return{done:!1,value:Message.decode(o)}})}}class JSONMessageReader extends MessageReader{constructor(e){super(new Uint8Array(0)),this._schema=!1,this._body=[],this._batchIndex=0,this._dictionaryIndex=0,this._json=e instanceof ArrowJSON?e:new ArrowJSON(e)}next(){const{_json:e}=this;if(!this._schema)return this._schema=!0,{done:!1,value:Message.fromJSON(e.schema,MessageHeader$1.Schema)};if(this._dictionaryIndex<e.dictionaries.length){const o=e.dictionaries[this._dictionaryIndex++];return this._body=o.data.columns,{done:!1,value:Message.fromJSON(o,MessageHeader$1.DictionaryBatch)}}if(this._batchIndex<e.batches.length){const o=e.batches[this._batchIndex++];return this._body=o.columns,{done:!1,value:Message.fromJSON(o,MessageHeader$1.RecordBatch)}}return this._body=[],ITERATOR_DONE}readMessageBody(e){return o(this._body);function o(d){return(d||[]).reduce((h,g)=>[...h,...g.VALIDITY&&[g.VALIDITY]||[],...g.TYPE_ID&&[g.TYPE_ID]||[],...g.OFFSET&&[g.OFFSET]||[],...g.DATA&&[g.DATA]||[],...o(g.children)],[])}}readMessage(e){let o;if((o=this.next()).done)return null;if(e!=null&&o.value.headerType!==e)throw new Error(invalidMessageType(e));return o.value}readSchema(){const e=MessageHeader$1.Schema,o=this.readMessage(e),d=o==null?void 0:o.header();if(!o||!d)throw new Error(nullMessage(e));return d}}const PADDING=4,MAGIC_STR="ARROW1",MAGIC=new Uint8Array(MAGIC_STR.length);for(let i=0;i<MAGIC_STR.length;i+=1)MAGIC[i]=MAGIC_STR.codePointAt(i);function checkForMagicArrowString(i,e=0){for(let o=-1,d=MAGIC.length;++o<d;)if(MAGIC[o]!==i[e+o])return!1;return!0}const magicLength=MAGIC.length,magicAndPadding=magicLength+PADDING,magicX2AndPadding=magicLength*2+PADDING;class RecordBatchReader extends ReadableInterop{constructor(e){super(),this._impl=e}get closed(){return this._impl.closed}get schema(){return this._impl.schema}get autoDestroy(){return this._impl.autoDestroy}get dictionaries(){return this._impl.dictionaries}get numDictionaries(){return this._impl.numDictionaries}get numRecordBatches(){return this._impl.numRecordBatches}get footer(){return this._impl.isFile()?this._impl.footer:null}isSync(){return this._impl.isSync()}isAsync(){return this._impl.isAsync()}isFile(){return this._impl.isFile()}isStream(){return this._impl.isStream()}next(){return this._impl.next()}throw(e){return this._impl.throw(e)}return(e){return this._impl.return(e)}cancel(){return this._impl.cancel()}reset(e){return this._impl.reset(e),this._DOMStream=void 0,this._nodeStream=void 0,this}open(e){const o=this._impl.open(e);return isPromise(o)?o.then(()=>this):this}readRecordBatch(e){return this._impl.isFile()?this._impl.readRecordBatch(e):null}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}toDOMStream(){return streamAdapters.toDOMStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this})}toNodeStream(){return streamAdapters.toNodeStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this},{objectMode:!0})}static throughNode(e){throw new Error('"throughNode" not available in this environment')}static throughDOM(e,o){throw new Error('"throughDOM" not available in this environment')}static from(e){return e instanceof RecordBatchReader?e:isArrowJSON(e)?fromArrowJSON(e):isFileHandle(e)?fromFileHandle(e):isPromise(e)?__awaiter(this,void 0,void 0,function*(){return yield RecordBatchReader.from(yield e)}):isFetchResponse(e)||isReadableDOMStream(e)||isReadableNodeStream(e)||isAsyncIterable(e)?fromAsyncByteStream(new AsyncByteStream(e)):fromByteStream(new ByteStream(e))}static readAll(e){return e instanceof RecordBatchReader?e.isSync()?readAllSync(e):readAllAsync(e):isArrowJSON(e)||ArrayBuffer.isView(e)||isIterable(e)||isIteratorResult(e)?readAllSync(e):readAllAsync(e)}}class RecordBatchStreamReader extends RecordBatchReader{constructor(e){super(e),this._impl=e}readAll(){return[...this]}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return __asyncGenerator(this,arguments,function*(){yield __await(yield*__asyncDelegator(__asyncValues(this[Symbol.iterator]())))})}}class AsyncRecordBatchStreamReader extends RecordBatchReader{constructor(e){super(e),this._impl=e}readAll(){var e,o,d,h;return __awaiter(this,void 0,void 0,function*(){const g=new Array;try{for(var b=!0,$=__asyncValues(this),j;j=yield $.next(),e=j.done,!e;b=!0){h=j.value,b=!1;const et=h;g.push(et)}}catch(et){o={error:et}}finally{try{!b&&!e&&(d=$.return)&&(yield d.call($))}finally{if(o)throw o.error}}return g})}[Symbol.iterator](){throw new Error("AsyncRecordBatchStreamReader is not Iterable")}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}}class RecordBatchFileReader extends RecordBatchStreamReader{constructor(e){super(e),this._impl=e}}class AsyncRecordBatchFileReader extends AsyncRecordBatchStreamReader{constructor(e){super(e),this._impl=e}}class RecordBatchReaderImpl{get numDictionaries(){return this._dictionaryIndex}get numRecordBatches(){return this._recordBatchIndex}constructor(e=new Map){this.closed=!1,this.autoDestroy=!0,this._dictionaryIndex=0,this._recordBatchIndex=0,this.dictionaries=e}isSync(){return!1}isAsync(){return!1}isFile(){return!1}isStream(){return!1}reset(e){return this._dictionaryIndex=0,this._recordBatchIndex=0,this.schema=e,this.dictionaries=new Map,this}_loadRecordBatch(e,o){const d=this._loadVectors(e,o,this.schema.fields),h=makeData({type:new Struct(this.schema.fields),length:e.length,children:d});return new RecordBatch$2(this.schema,h)}_loadDictionaryBatch(e,o){const{id:d,isDelta:h}=e,{dictionaries:g,schema:b}=this,$=g.get(d);if(h||!$){const j=b.dictionaries.get(d),et=this._loadVectors(e.data,o,[j]);return($&&h?$.concat(new Vector(et)):new Vector(et)).memoize()}return $.memoize()}_loadVectors(e,o,d){return new VectorLoader(o,e.nodes,e.buffers,this.dictionaries,this.schema.metadataVersion).visitMany(d)}}class RecordBatchStreamReaderImpl extends RecordBatchReaderImpl{constructor(e,o){super(o),this._reader=isArrowJSON(e)?new JSONMessageReader(this._handle=e):new MessageReader(this._handle=e)}isSync(){return!0}isStream(){return!0}[Symbol.iterator](){return this}cancel(){!this.closed&&(this.closed=!0)&&(this.reset()._reader.return(),this._reader=null,this.dictionaries=null)}open(e){return this.closed||(this.autoDestroy=shouldAutoDestroy(this,e),this.schema||(this.schema=this._reader.readSchema())||this.cancel()),this}throw(e){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.throw(e):ITERATOR_DONE}return(e){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.return(e):ITERATOR_DONE}next(){if(this.closed)return ITERATOR_DONE;let e;const{_reader:o}=this;for(;e=this._readNextMessageAndValidate();)if(e.isSchema())this.reset(e.header());else if(e.isRecordBatch()){this._recordBatchIndex++;const d=e.header(),h=o.readMessageBody(e.bodyLength);return{done:!1,value:this._loadRecordBatch(d,h)}}else if(e.isDictionaryBatch()){this._dictionaryIndex++;const d=e.header(),h=o.readMessageBody(e.bodyLength),g=this._loadDictionaryBatch(d,h);this.dictionaries.set(d.id,g)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new _InternalEmptyPlaceholderRecordBatch(this.schema)}):this.return()}_readNextMessageAndValidate(e){return this._reader.readMessage(e)}}class AsyncRecordBatchStreamReaderImpl extends RecordBatchReaderImpl{constructor(e,o){super(o),this._reader=new AsyncMessageReader(this._handle=e)}isAsync(){return!0}isStream(){return!0}[Symbol.asyncIterator](){return this}cancel(){return __awaiter(this,void 0,void 0,function*(){!this.closed&&(this.closed=!0)&&(yield this.reset()._reader.return(),this._reader=null,this.dictionaries=null)})}open(e){return __awaiter(this,void 0,void 0,function*(){return this.closed||(this.autoDestroy=shouldAutoDestroy(this,e),this.schema||(this.schema=yield this._reader.readSchema())||(yield this.cancel())),this})}throw(e){return __awaiter(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.throw(e):ITERATOR_DONE})}return(e){return __awaiter(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.return(e):ITERATOR_DONE})}next(){return __awaiter(this,void 0,void 0,function*(){if(this.closed)return ITERATOR_DONE;let e;const{_reader:o}=this;for(;e=yield this._readNextMessageAndValidate();)if(e.isSchema())yield this.reset(e.header());else if(e.isRecordBatch()){this._recordBatchIndex++;const d=e.header(),h=yield o.readMessageBody(e.bodyLength);return{done:!1,value:this._loadRecordBatch(d,h)}}else if(e.isDictionaryBatch()){this._dictionaryIndex++;const d=e.header(),h=yield o.readMessageBody(e.bodyLength),g=this._loadDictionaryBatch(d,h);this.dictionaries.set(d.id,g)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new _InternalEmptyPlaceholderRecordBatch(this.schema)}):yield this.return()})}_readNextMessageAndValidate(e){return __awaiter(this,void 0,void 0,function*(){return yield this._reader.readMessage(e)})}}class RecordBatchFileReaderImpl extends RecordBatchStreamReaderImpl{get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}constructor(e,o){super(e instanceof RandomAccessFile?e:new RandomAccessFile(e),o)}isSync(){return!0}isFile(){return!0}open(e){if(!this.closed&&!this._footer){this.schema=(this._footer=this._readFooter()).schema;for(const o of this._footer.dictionaryBatches())o&&this._readDictionaryBatch(this._dictionaryIndex++)}return super.open(e)}readRecordBatch(e){var o;if(this.closed)return null;this._footer||this.open();const d=(o=this._footer)===null||o===void 0?void 0:o.getRecordBatch(e);if(d&&this._handle.seek(d.offset)){const h=this._reader.readMessage(MessageHeader$1.RecordBatch);if(h!=null&&h.isRecordBatch()){const g=h.header(),b=this._reader.readMessageBody(h.bodyLength);return this._loadRecordBatch(g,b)}}return null}_readDictionaryBatch(e){var o;const d=(o=this._footer)===null||o===void 0?void 0:o.getDictionaryBatch(e);if(d&&this._handle.seek(d.offset)){const h=this._reader.readMessage(MessageHeader$1.DictionaryBatch);if(h!=null&&h.isDictionaryBatch()){const g=h.header(),b=this._reader.readMessageBody(h.bodyLength),$=this._loadDictionaryBatch(g,b);this.dictionaries.set(g.id,$)}}}_readFooter(){const{_handle:e}=this,o=e.size-magicAndPadding,d=e.readInt32(o),h=e.readAt(o-d,d);return Footer_.decode(h)}_readNextMessageAndValidate(e){var o;if(this._footer||this.open(),this._footer&&this._recordBatchIndex<this.numRecordBatches){const d=(o=this._footer)===null||o===void 0?void 0:o.getRecordBatch(this._recordBatchIndex);if(d&&this._handle.seek(d.offset))return this._reader.readMessage(e)}return null}}class AsyncRecordBatchFileReaderImpl extends AsyncRecordBatchStreamReaderImpl{get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}constructor(e,...o){const d=typeof o[0]!="number"?o.shift():void 0,h=o[0]instanceof Map?o.shift():void 0;super(e instanceof AsyncRandomAccessFile?e:new AsyncRandomAccessFile(e,d),h)}isFile(){return!0}isAsync(){return!0}open(e){const o=Object.create(null,{open:{get:()=>super.open}});return __awaiter(this,void 0,void 0,function*(){if(!this.closed&&!this._footer){this.schema=(this._footer=yield this._readFooter()).schema;for(const d of this._footer.dictionaryBatches())d&&(yield this._readDictionaryBatch(this._dictionaryIndex++))}return yield o.open.call(this,e)})}readRecordBatch(e){var o;return __awaiter(this,void 0,void 0,function*(){if(this.closed)return null;this._footer||(yield this.open());const d=(o=this._footer)===null||o===void 0?void 0:o.getRecordBatch(e);if(d&&(yield this._handle.seek(d.offset))){const h=yield this._reader.readMessage(MessageHeader$1.RecordBatch);if(h!=null&&h.isRecordBatch()){const g=h.header(),b=yield this._reader.readMessageBody(h.bodyLength);return this._loadRecordBatch(g,b)}}return null})}_readDictionaryBatch(e){var o;return __awaiter(this,void 0,void 0,function*(){const d=(o=this._footer)===null||o===void 0?void 0:o.getDictionaryBatch(e);if(d&&(yield this._handle.seek(d.offset))){const h=yield this._reader.readMessage(MessageHeader$1.DictionaryBatch);if(h!=null&&h.isDictionaryBatch()){const g=h.header(),b=yield this._reader.readMessageBody(h.bodyLength),$=this._loadDictionaryBatch(g,b);this.dictionaries.set(g.id,$)}}})}_readFooter(){return __awaiter(this,void 0,void 0,function*(){const{_handle:e}=this;e._pending&&(yield e._pending);const o=e.size-magicAndPadding,d=yield e.readInt32(o),h=yield e.readAt(o-d,d);return Footer_.decode(h)})}_readNextMessageAndValidate(e){return __awaiter(this,void 0,void 0,function*(){if(this._footer||(yield this.open()),this._footer&&this._recordBatchIndex<this.numRecordBatches){const o=this._footer.getRecordBatch(this._recordBatchIndex);if(o&&(yield this._handle.seek(o.offset)))return yield this._reader.readMessage(e)}return null})}}class RecordBatchJSONReaderImpl extends RecordBatchStreamReaderImpl{constructor(e,o){super(e,o)}_loadVectors(e,o,d){return new JSONVectorLoader(o,e.nodes,e.buffers,this.dictionaries,this.schema.metadataVersion).visitMany(d)}}function shouldAutoDestroy(i,e){return e&&typeof e.autoDestroy=="boolean"?e.autoDestroy:i.autoDestroy}function*readAllSync(i){const e=RecordBatchReader.from(i);try{if(!e.open({autoDestroy:!1}).closed)do yield e;while(!e.reset().open().closed)}finally{e.cancel()}}function readAllAsync(i){return __asyncGenerator(this,arguments,function*(){const o=yield __await(RecordBatchReader.from(i));try{if(!(yield __await(o.open({autoDestroy:!1}))).closed)do yield yield __await(o);while(!(yield __await(o.reset().open())).closed)}finally{yield __await(o.cancel())}})}function fromArrowJSON(i){return new RecordBatchStreamReader(new RecordBatchJSONReaderImpl(i))}function fromByteStream(i){const e=i.peek(magicLength+7&-8);return e&&e.byteLength>=4?checkForMagicArrowString(e)?new RecordBatchFileReader(new RecordBatchFileReaderImpl(i.read())):new RecordBatchStreamReader(new RecordBatchStreamReaderImpl(i)):new RecordBatchStreamReader(new RecordBatchStreamReaderImpl(function*(){}()))}function fromAsyncByteStream(i){return __awaiter(this,void 0,void 0,function*(){const e=yield i.peek(magicLength+7&-8);return e&&e.byteLength>=4?checkForMagicArrowString(e)?new RecordBatchFileReader(new RecordBatchFileReaderImpl(yield i.read())):new AsyncRecordBatchStreamReader(new AsyncRecordBatchStreamReaderImpl(i)):new AsyncRecordBatchStreamReader(new AsyncRecordBatchStreamReaderImpl(function(){return __asyncGenerator(this,arguments,function*(){})}()))})}function fromFileHandle(i){return __awaiter(this,void 0,void 0,function*(){const{size:e}=yield i.stat(),o=new AsyncRandomAccessFile(i,e);return e>=magicX2AndPadding&&checkForMagicArrowString(yield o.readAt(0,magicLength+7&-8))?new AsyncRecordBatchFileReader(new AsyncRecordBatchFileReaderImpl(o)):new AsyncRecordBatchStreamReader(new AsyncRecordBatchStreamReaderImpl(o))})}class VectorAssembler extends Visitor{static assemble(...e){const o=h=>h.flatMap(g=>Array.isArray(g)?o(g):g instanceof RecordBatch$2?g.data.children:g.data),d=new VectorAssembler;return d.visitMany(o(e)),d}constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}visit(e){if(e instanceof Vector)return this.visitMany(e.data),this;const{type:o}=e;if(!DataType.isDictionary(o)){const{length:d}=e;if(d>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");if(DataType.isUnion(o))this.nodes.push(new FieldNode(d,0));else{const{nullCount:h}=e;DataType.isNull(o)||addBuffer.call(this,h<=0?new Uint8Array(0):truncateBitmap(e.offset,d,e.nullBitmap)),this.nodes.push(new FieldNode(d,h))}}return super.visit(e)}visitNull(e){return this}visitDictionary(e){return this.visit(e.clone(e.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function addBuffer(i){const e=i.byteLength+7&-8;return this.buffers.push(i),this.bufferRegions.push(new BufferRegion(this._byteLength,e)),this._byteLength+=e,this}function assembleUnion(i){var e;const{type:o,length:d,typeIds:h,valueOffsets:g}=i;if(addBuffer.call(this,h),o.mode===UnionMode$1.Sparse)return assembleNestedVector.call(this,i);if(o.mode===UnionMode$1.Dense){if(i.offset<=0)return addBuffer.call(this,g),assembleNestedVector.call(this,i);{const b=new Int32Array(d),$=Object.create(null),j=Object.create(null);for(let et,tt,nt=-1;++nt<d;)(et=h[nt])!==void 0&&((tt=$[et])===void 0&&(tt=$[et]=g[nt]),b[nt]=g[nt]-tt,j[et]=((e=j[et])!==null&&e!==void 0?e:0)+1);addBuffer.call(this,b),this.visitMany(i.children.map((et,tt)=>{const nt=o.typeIds[tt],rt=$[nt],ot=j[nt];return et.slice(rt,Math.min(d,ot))}))}}return this}function assembleBoolVector(i){let e;return i.nullCount>=i.length?addBuffer.call(this,new Uint8Array(0)):(e=i.values)instanceof Uint8Array?addBuffer.call(this,truncateBitmap(i.offset,i.length,e)):addBuffer.call(this,packBools(i.values))}function assembleFlatVector(i){return addBuffer.call(this,i.values.subarray(0,i.length*i.stride))}function assembleFlatListVector(i){const{length:e,values:o,valueOffsets:d}=i,{[0]:h,[e]:g}=d,b=Math.min(g-h,o.byteLength-h);return addBuffer.call(this,rebaseValueOffsets(-h,e+1,d)),addBuffer.call(this,o.subarray(h,h+b)),this}function assembleListVector(i){const{length:e,valueOffsets:o}=i;if(o){const{[0]:d,[e]:h}=o;return addBuffer.call(this,rebaseValueOffsets(-d,e+1,o)),this.visit(i.children[0].slice(d,h-d))}return this.visit(i.children[0])}function assembleNestedVector(i){return this.visitMany(i.type.children.map((e,o)=>i.children[o]).filter(Boolean))[0]}VectorAssembler.prototype.visitBool=assembleBoolVector;VectorAssembler.prototype.visitInt=assembleFlatVector;VectorAssembler.prototype.visitFloat=assembleFlatVector;VectorAssembler.prototype.visitUtf8=assembleFlatListVector;VectorAssembler.prototype.visitBinary=assembleFlatListVector;VectorAssembler.prototype.visitFixedSizeBinary=assembleFlatVector;VectorAssembler.prototype.visitDate=assembleFlatVector;VectorAssembler.prototype.visitTimestamp=assembleFlatVector;VectorAssembler.prototype.visitTime=assembleFlatVector;VectorAssembler.prototype.visitDecimal=assembleFlatVector;VectorAssembler.prototype.visitList=assembleListVector;VectorAssembler.prototype.visitStruct=assembleNestedVector;VectorAssembler.prototype.visitUnion=assembleUnion;VectorAssembler.prototype.visitInterval=assembleFlatVector;VectorAssembler.prototype.visitDuration=assembleFlatVector;VectorAssembler.prototype.visitFixedSizeList=assembleListVector;VectorAssembler.prototype.visitMap=assembleListVector;class RecordBatchWriter extends ReadableInterop{static throughNode(e){throw new Error('"throughNode" not available in this environment')}static throughDOM(e,o){throw new Error('"throughDOM" not available in this environment')}constructor(e){super(),this._position=0,this._started=!1,this._sink=new AsyncByteQueue,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,isObject(e)||(e={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy=typeof e.autoDestroy=="boolean"?e.autoDestroy:!0,this._writeLegacyIpcFormat=typeof e.writeLegacyIpcFormat=="boolean"?e.writeLegacyIpcFormat:!1}toString(e=!1){return this._sink.toString(e)}toUint8Array(e=!1){return this._sink.toUint8Array(e)}writeAll(e){return isPromise(e)?e.then(o=>this.writeAll(o)):isAsyncIterable(e)?writeAllAsync(this,e):writeAll(this,e)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(e){return this._sink.toDOMStream(e)}toNodeStream(e){return this._sink.toNodeStream(e)}close(){return this.reset()._sink.close()}abort(e){return this.reset()._sink.abort(e)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(e=this._sink,o=null){return e===this._sink||e instanceof AsyncByteQueue?this._sink=e:(this._sink=new AsyncByteQueue,e&&isWritableDOMStream(e)?this.toDOMStream({type:"bytes"}).pipeTo(e):e&&isWritableNodeStream(e)&&this.toNodeStream({objectMode:!1}).pipe(e)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,(!o||!compareSchemas(o,this._schema))&&(o==null?(this._position=0,this._schema=null):(this._started=!0,this._schema=o,this._writeSchema(o))),this}write(e){let o=null;if(this._sink){if(e==null)return this.finish()&&void 0;if(e instanceof Table&&!(o=e.schema))return this.finish()&&void 0;if(e instanceof RecordBatch$2&&!(o=e.schema))return this.finish()&&void 0}else throw new Error("RecordBatchWriter is closed");if(o&&!compareSchemas(o,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,o)}e instanceof RecordBatch$2?e instanceof _InternalEmptyPlaceholderRecordBatch||this._writeRecordBatch(e):e instanceof Table?this.writeAll(e.batches):isIterable(e)&&this.writeAll(e)}_writeMessage(e,o=8){const d=o-1,h=Message.encode(e),g=h.byteLength,b=this._writeLegacyIpcFormat?4:8,$=g+b+d&~d,j=$-g-b;return e.headerType===MessageHeader$1.RecordBatch?this._recordBatchBlocks.push(new FileBlock($,e.bodyLength,this._position)):e.headerType===MessageHeader$1.DictionaryBatch&&this._dictionaryBlocks.push(new FileBlock($,e.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of($-b)),g>0&&this._write(h),this._writePadding(j)}_write(e){if(this._started){const o=toUint8Array(e);o&&o.byteLength>0&&(this._sink.write(o),this._position+=o.byteLength)}return this}_writeSchema(e){return this._writeMessage(Message.from(e))}_writeFooter(e){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(MAGIC)}_writePadding(e){return e>0?this._write(new Uint8Array(e)):this}_writeRecordBatch(e){const{byteLength:o,nodes:d,bufferRegions:h,buffers:g}=VectorAssembler.assemble(e),b=new RecordBatch(e.numRows,d,h),$=Message.from(b,o);return this._writeDictionaries(e)._writeMessage($)._writeBodyBuffers(g)}_writeDictionaryBatch(e,o,d=!1){this._dictionaryDeltaOffsets.set(o,e.length+(this._dictionaryDeltaOffsets.get(o)||0));const{byteLength:h,nodes:g,bufferRegions:b,buffers:$}=VectorAssembler.assemble(new Vector([e])),j=new RecordBatch(e.length,g,b),et=new DictionaryBatch(j,o,d),tt=Message.from(et,h);return this._writeMessage(tt)._writeBodyBuffers($)}_writeBodyBuffers(e){let o,d,h;for(let g=-1,b=e.length;++g<b;)(o=e[g])&&(d=o.byteLength)>0&&(this._write(o),(h=(d+7&-8)-d)>0&&this._writePadding(h));return this}_writeDictionaries(e){for(let[o,d]of e.dictionaries){let h=this._dictionaryDeltaOffsets.get(o)||0;if(h===0||(d=d==null?void 0:d.slice(h)).length>0)for(const g of d.data)this._writeDictionaryBatch(g,o,h>0),h+=g.length}return this}}class RecordBatchStreamWriter extends RecordBatchWriter{static writeAll(e,o){const d=new RecordBatchStreamWriter(o);return isPromise(e)?e.then(h=>d.writeAll(h)):isAsyncIterable(e)?writeAllAsync(d,e):writeAll(d,e)}}class RecordBatchFileWriter extends RecordBatchWriter{static writeAll(e){const o=new RecordBatchFileWriter;return isPromise(e)?e.then(d=>o.writeAll(d)):isAsyncIterable(e)?writeAllAsync(o,e):writeAll(o,e)}constructor(){super(),this._autoDestroy=!0}_writeSchema(e){return this._writeMagic()._writePadding(2)}_writeFooter(e){const o=Footer_.encode(new Footer_(e,MetadataVersion$1.V5,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(e)._write(o)._write(Int32Array.of(o.byteLength))._writeMagic()}}function writeAll(i,e){let o=e;e instanceof Table&&(o=e.batches,i.reset(void 0,e.schema));for(const d of o)i.write(d);return i.finish()}function writeAllAsync(i,e){var o,d,h,g,b,$,j;return __awaiter(this,void 0,void 0,function*(){try{for(o=!0,d=__asyncValues(e);h=yield d.next(),g=h.done,!g;o=!0){j=h.value,o=!1;const et=j;i.write(et)}}catch(et){b={error:et}}finally{try{!o&&!g&&($=d.return)&&(yield $.call(d))}finally{if(b)throw b.error}}return i.finish()})}function tableToIPC(i,e="stream"){return(e==="stream"?RecordBatchStreamWriter:RecordBatchFileWriter).writeAll(i).toUint8Array(!0)}var Yo=Object.create,hr=Object.defineProperty,Ko=Object.getOwnPropertyDescriptor,zo=Object.getOwnPropertyNames,qo=Object.getPrototypeOf,Qo=Object.prototype.hasOwnProperty,He=(i,e)=>()=>(e||i((e={exports:{}}).exports,e),e.exports),$o=(i,e,o,d)=>{if(e&&typeof e=="object"||typeof e=="function")for(let h of zo(e))!Qo.call(i,h)&&h!==o&&hr(i,h,{get:()=>e[h],enumerable:!(d=Ko(e,h))||d.enumerable});return i},ct=(i,e,o)=>(o=i!=null?Yo(qo(i)):{},$o(e||!i||!i.__esModule?hr(o,"default",{value:i,enumerable:!0}):o,i)),lr=He((i,e)=>{var o;function d(pt){var It=0;return function(){return It<pt.length?{done:!1,value:pt[It++]}:{done:!0}}}var h=typeof Object.defineProperties=="function"?Object.defineProperty:function(pt,It,Dt){pt!=Array.prototype&&pt!=Object.prototype&&(pt[It]=Dt.value)};function g(pt){pt=[typeof window=="object"&&window,typeof self=="object"&&self,typeof global=="object"&&global,pt];for(var It=0;It<pt.length;++It){var Dt=pt[It];if(Dt&&Dt.Math==Math)return Dt}throw Error("Cannot find global object")}var b=g(i);function $(){$=function(){},b.Symbol||(b.Symbol=et)}function j(pt,It){this.a=pt,h(this,"description",{configurable:!0,writable:!0,value:It})}j.prototype.toString=function(){return this.a};var et=function(){function pt(Dt){if(this instanceof pt)throw new TypeError("Symbol is not a constructor");return new j("jscomp_symbol_"+(Dt||"")+"_"+It++,Dt)}var It=0;return pt}();function tt(){$();var pt=b.Symbol.iterator;pt||(pt=b.Symbol.iterator=b.Symbol("Symbol.iterator")),typeof Array.prototype[pt]!="function"&&h(Array.prototype,pt,{configurable:!0,writable:!0,value:function(){return nt(d(this))}}),tt=function(){}}function nt(pt){return tt(),pt={next:pt},pt[b.Symbol.iterator]=function(){return this},pt}function rt(pt){var It=typeof Symbol<"u"&&Symbol.iterator&&pt[Symbol.iterator];return It?It.call(pt):{next:d(pt)}}var ot=typeof Object.create=="function"?Object.create:function(pt){function It(){}return It.prototype=pt,new It},st;if(typeof Object.setPrototypeOf=="function")st=Object.setPrototypeOf;else{e:{vt={V:!0},at={};try{at.__proto__=vt,bt=at.V;break e}catch{}bt=!1}st=bt?function(pt,It){if(pt.__proto__=It,pt.__proto__!==It)throw new TypeError(pt+" is not extensible");return pt}:null}var bt,vt,at,ut=st;function $t(pt,It){if(pt.prototype=ot(It.prototype),pt.prototype.constructor=pt,ut)ut(pt,It);else for(var Dt in It)if(Dt!="prototype")if(Object.defineProperties){var Lt=Object.getOwnPropertyDescriptor(It,Dt);Lt&&Object.defineProperty(pt,Dt,Lt)}else pt[Dt]=It[Dt];pt.O=It.prototype}function wt(pt,It){tt(),pt instanceof String&&(pt+="");var Dt=0,Lt={next:function(){if(Dt<pt.length){var Gt=Dt++;return{value:It(Gt,pt[Gt]),done:!1}}return Lt.next=function(){return{done:!0,value:void 0}},Lt.next()}};return Lt[Symbol.iterator]=function(){return Lt},Lt}function At(pt,It){if(It){var Dt=b;pt=pt.split(".");for(var Lt=0;Lt<pt.length-1;Lt++){var Gt=pt[Lt];Gt in Dt||(Dt[Gt]={}),Dt=Dt[Gt]}pt=pt[pt.length-1],Lt=Dt[pt],It=It(Lt),It!=Lt&&It!=null&&h(Dt,pt,{configurable:!0,writable:!0,value:It})}}At("Array.prototype.keys",function(pt){return pt||function(){return wt(this,function(It){return It})}}),At("Array.prototype.find",function(pt){return pt||function(It,Dt){e:{var Lt=this;Lt instanceof String&&(Lt=String(Lt));for(var Gt=Lt.length,Kt=0;Kt<Gt;Kt++){var Wt=Lt[Kt];if(It.call(Dt,Wt,Kt,Lt)){It=Wt;break e}}It=void 0}return It}}),At("Object.is",function(pt){return pt||function(It,Dt){return It===Dt?It!==0||1/It===1/Dt:It!==It&&Dt!==Dt}}),At("Array.prototype.includes",function(pt){return pt||function(It,Dt){var Lt=this;Lt instanceof String&&(Lt=String(Lt));var Gt=Lt.length;for(Dt=Dt||0,0>Dt&&(Dt=Math.max(Dt+Gt,0));Dt<Gt;Dt++){var Kt=Lt[Dt];if(Kt===It||Object.is(Kt,It))return!0}return!1}}),At("Promise",function(pt){function It(Wt){this.b=0,this.c=void 0,this.a=[];var Qt=this.f();try{Wt(Qt.resolve,Qt.reject)}catch(jn){Qt.reject(jn)}}function Dt(){this.a=null}function Lt(Wt){return Wt instanceof It?Wt:new It(function(Qt){Qt(Wt)})}if(pt)return pt;Dt.prototype.b=function(Wt){if(this.a==null){this.a=[];var Qt=this;this.c(function(){Qt.g()})}this.a.push(Wt)};var Gt=b.setTimeout;Dt.prototype.c=function(Wt){Gt(Wt,0)},Dt.prototype.g=function(){for(;this.a&&this.a.length;){var Wt=this.a;this.a=[];for(var Qt=0;Qt<Wt.length;++Qt){var jn=Wt[Qt];Wt[Qt]=null;try{jn()}catch(nr){this.f(nr)}}}this.a=null},Dt.prototype.f=function(Wt){this.c(function(){throw Wt})},It.prototype.f=function(){function Wt(nr){return function(ur){jn||(jn=!0,nr.call(Qt,ur))}}var Qt=this,jn=!1;return{resolve:Wt(this.s),reject:Wt(this.g)}},It.prototype.s=function(Wt){if(Wt===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(Wt instanceof It)this.v(Wt);else{e:switch(typeof Wt){case"object":var Qt=Wt!=null;break e;case"function":Qt=!0;break e;default:Qt=!1}Qt?this.m(Wt):this.h(Wt)}},It.prototype.m=function(Wt){var Qt=void 0;try{Qt=Wt.then}catch(jn){this.g(jn);return}typeof Qt=="function"?this.w(Qt,Wt):this.h(Wt)},It.prototype.g=function(Wt){this.i(2,Wt)},It.prototype.h=function(Wt){this.i(1,Wt)},It.prototype.i=function(Wt,Qt){if(this.b!=0)throw Error("Cannot settle("+Wt+", "+Qt+"): Promise already settled in state"+this.b);this.b=Wt,this.c=Qt,this.l()},It.prototype.l=function(){if(this.a!=null){for(var Wt=0;Wt<this.a.length;++Wt)Kt.b(this.a[Wt]);this.a=null}};var Kt=new Dt;return It.prototype.v=function(Wt){var Qt=this.f();Wt.F(Qt.resolve,Qt.reject)},It.prototype.w=function(Wt,Qt){var jn=this.f();try{Wt.call(Qt,jn.resolve,jn.reject)}catch(nr){jn.reject(nr)}},It.prototype.then=function(Wt,Qt){function jn(xr,zr){return typeof xr=="function"?function(Yr){try{nr(xr(Yr))}catch(Do){ur(Do)}}:zr}var nr,ur,vr=new It(function(xr,zr){nr=xr,ur=zr});return this.F(jn(Wt,nr),jn(Qt,ur)),vr},It.prototype.catch=function(Wt){return this.then(void 0,Wt)},It.prototype.F=function(Wt,Qt){function jn(){switch(nr.b){case 1:Wt(nr.c);break;case 2:Qt(nr.c);break;default:throw Error("Unexpected state: "+nr.b)}}var nr=this;this.a==null?Kt.b(jn):this.a.push(jn)},It.resolve=Lt,It.reject=function(Wt){return new It(function(Qt,jn){jn(Wt)})},It.race=function(Wt){return new It(function(Qt,jn){for(var nr=rt(Wt),ur=nr.next();!ur.done;ur=nr.next())Lt(ur.value).F(Qt,jn)})},It.all=function(Wt){var Qt=rt(Wt),jn=Qt.next();return jn.done?Lt([]):new It(function(nr,ur){function vr(Yr){return function(Do){xr[Yr]=Do,zr--,zr==0&&nr(xr)}}var xr=[],zr=0;do xr.push(void 0),zr++,Lt(jn.value).F(vr(xr.length-1),ur),jn=Qt.next();while(!jn.done)})},It});var xt=xt||{},Rt=i||self;function Ot(pt,It){pt=pt.split("."),It=It||Rt;for(var Dt=0;Dt<pt.length;Dt++)if(It=It[pt[Dt]],It==null)return null;return It}function kt(){}function Mt(pt){var It=typeof pt;return It=="object"&&pt!=null||It=="function"}function Bt(pt,It,Dt){return pt.call.apply(pt.bind,arguments)}function jt(pt,It,Dt){if(!pt)throw Error();if(2<arguments.length){var Lt=Array.prototype.slice.call(arguments,2);return function(){var Gt=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Gt,Lt),pt.apply(It,Gt)}}return function(){return pt.apply(It,arguments)}}function zt(pt,It,Dt){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?zt=Bt:zt=jt,zt.apply(null,arguments)}function Nt(pt,It){function Dt(){}Dt.prototype=It.prototype,pt.O=It.prototype,pt.prototype=new Dt,pt.prototype.constructor=pt}function Ct(pt){this.a=pt||{}}Ct.prototype.get=function(pt){return this.a[pt]},Ct.prototype.G=function(){return Object.keys(this.a)};function Ft(pt,It,Dt,Lt){this.f=pt,this.c=It,this.b=Dt,this.a=Lt}Ft.prototype.getRequestMessage=function(){return this.f},Ft.prototype.getMethodDescriptor=function(){return this.c},Ft.prototype.getMetadata=function(){return this.b},Ft.prototype.getCallOptions=function(){return this.a};function Vt(pt,It,Dt,Lt){Dt=Dt===void 0?{}:Dt,this.c=pt,this.a=Dt,this.b=It,this.f=Lt===void 0?null:Lt}Vt.prototype.getResponseMessage=function(){return this.c},Vt.prototype.getMetadata=function(){return this.a},Vt.prototype.getMethodDescriptor=function(){return this.b},Vt.prototype.getStatus=function(){return this.f};function Ut(pt,It,Dt,Lt,Gt,Kt){this.name=pt,this.a=Gt,this.b=Kt}function Ht(pt,It,Dt){Dt=Dt===void 0?{}:Dt;var Lt=Lt===void 0?new Ct:Lt;return new Ft(It,pt,Dt,Lt)}Ut.prototype.getName=function(){return this.name},Ut.prototype.getName=Ut.prototype.getName;function Pt(pt){switch(pt){case 200:return 0;case 400:return 3;case 401:return 16;case 403:return 7;case 404:return 5;case 409:return 10;case 412:return 9;case 429:return 8;case 499:return 1;case 500:return 2;case 501:return 12;case 503:return 14;case 504:return 4;default:return 2}}function Yt(pt,It,Dt){Dt=Dt===void 0?{}:Dt,It=Error.call(this,It),this.message=It.message,"stack"in It&&(this.stack=It.stack),this.code=pt,this.metadata=Dt}$t(Yt,Error),Yt.prototype.name="RpcError";function Xt(pt){this.a=pt}Xt.prototype.on=function(pt,It){return pt=="data"||pt=="error"?this:this.a.on(pt,It)},Xt.prototype.removeListener=function(pt,It){return this.a.removeListener(pt,It)},Xt.prototype.cancel=function(){this.a.cancel()};function wn(pt){switch(pt){case 0:return"No Error";case 1:return"Access denied to content document";case 2:return"File not found";case 3:return"Firefox silently errored";case 4:return"Application custom error";case 5:return"An exception occurred";case 6:return"Http response at 400 or 500 level";case 7:return"Request was aborted";case 8:return"Request timed out";case 9:return"The resource is not available offline";default:return"Unrecognized error code"}}function Mn(pt){if(Error.captureStackTrace)Error.captureStackTrace(this,Mn);else{var It=Error().stack;It&&(this.stack=It)}pt&&(this.message=String(pt))}Nt(Mn,Error),Mn.prototype.name="CustomError";function Cn(pt,It){pt=pt.split("%s");for(var Dt="",Lt=pt.length-1,Gt=0;Gt<Lt;Gt++)Dt+=pt[Gt]+(Gt<It.length?It[Gt]:"%s");Mn.call(this,Dt+pt[Lt])}Nt(Cn,Mn),Cn.prototype.name="AssertionError";function On(pt,It){throw new Cn("Failure"+(pt?": "+pt:""),Array.prototype.slice.call(arguments,1))}function vn(){this.l=null,this.i=[],this.m=0,this.b=Jt,this.f=this.a=this.h=0,this.c=null,this.g=0}function Nn(pt,It){function Dt(nr){nr==rr||nr==tr?Wt.h=nr:sr(Wt,Qt,jn,"invalid frame byte"),Wt.b=Bn,Wt.a=0,Wt.f=0}function Lt(nr){Wt.f++,Wt.a=(Wt.a<<8)+nr,Wt.f==4&&(Wt.b=Ln,Wt.g=0,typeof Uint8Array<"u"?Wt.c=new Uint8Array(Wt.a):Wt.c=Array(Wt.a),Wt.a==0&&Kt())}function Gt(nr){Wt.c[Wt.g++]=nr,Wt.g==Wt.a&&Kt()}function Kt(){var nr={};nr[Wt.h]=Wt.c,Wt.i.push(nr),Wt.b=Jt}var Wt=pt,Qt,jn=0;for(It instanceof Uint8Array||It instanceof Array?Qt=It:Qt=new Uint8Array(It);jn<Qt.length;){switch(Wt.b){case Zt:sr(Wt,Qt,jn,"stream already broken");break;case Jt:Dt(Qt[jn]);break;case Bn:Lt(Qt[jn]);break;case Ln:Gt(Qt[jn]);break;default:throw Error("unexpected parser state: "+Wt.b)}Wt.m++,jn++}return pt=Wt.i,Wt.i=[],0<pt.length?pt:null}var Jt=0,Bn=1,Ln=2,Zt=3,rr=0,tr=128;function sr(pt,It,Dt,Lt){throw pt.b=Zt,pt.l="The stream is broken @"+pt.m+"/"+Dt+". Error: "+Lt+`. With input:
`+It,Error(pt.l)}var ar=Array.prototype.indexOf?function(pt,It){return Array.prototype.indexOf.call(pt,It,void 0)}:function(pt,It){if(typeof pt=="string")return typeof It!="string"||It.length!=1?-1:pt.indexOf(It,0);for(var Dt=0;Dt<pt.length;Dt++)if(Dt in pt&&pt[Dt]===It)return Dt;return-1},er=String.prototype.trim?function(pt){return pt.trim()}:function(pt){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(pt)[1]};function ir(pt,It){return pt.indexOf(It)!=-1}function Mr(pt,It){return pt<It?-1:pt>It?1:0}var $r;e:{if(so=Rt.navigator,so&&(To=so.userAgent,To)){$r=To;break e}$r=""}var so,To;function xa(pt,It){for(var Dt in pt)It.call(void 0,pt[Dt],Dt,pt)}function Vs(pt,It){var Dt={},Lt;for(Lt in pt)Dt[Lt]=It.call(void 0,pt[Lt],Lt,pt);return Dt}var zs="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function yl(pt,It){for(var Dt,Lt,Gt=1;Gt<arguments.length;Gt++){Lt=arguments[Gt];for(Dt in Lt)pt[Dt]=Lt[Dt];for(var Kt=0;Kt<zs.length;Kt++)Dt=zs[Kt],Object.prototype.hasOwnProperty.call(Lt,Dt)&&(pt[Dt]=Lt[Dt])}}function $l(pt){var It=1;pt=pt.split(":");for(var Dt=[];0<It&&pt.length;)Dt.push(pt.shift()),It--;return pt.length&&Dt.push(pt.join(":")),Dt}function Hr(pt){return Hr[" "](pt),pt}Hr[" "]=kt;function Ws(pt){var It=Wu;return Object.prototype.hasOwnProperty.call(It,9)?It[9]:It[9]=pt(9)}var ao=ir($r,"Opera"),As=ir($r,"Trident")||ir($r,"MSIE"),Sl=ir($r,"Edge"),lo=ir($r,"Gecko")&&!(ir($r.toLowerCase(),"webkit")&&!ir($r,"Edge"))&&!(ir($r,"Trident")||ir($r,"MSIE"))&&!ir($r,"Edge"),Cr=ir($r.toLowerCase(),"webkit")&&!ir($r,"Edge"),Wr;e:{if(Io="",Hs=function(){var pt=$r;if(lo)return/rv:([^\);]+)(\)|;)/.exec(pt);if(Sl)return/Edge\/([\d\.]+)/.exec(pt);if(As)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(pt);if(Cr)return/WebKit\/(\S+)/.exec(pt);if(ao)return/(?:Version)[ \/]?(\S+)/.exec(pt)}(),Hs&&(Io=Hs?Hs[1]:""),As&&(Tl=Rt.document,Gs=Tl?Tl.documentMode:void 0,Gs!=null&&Gs>parseFloat(Io))){Wr=String(Gs);break e}Wr=Io}var Io,Hs,Gs,Tl,Wu={};function Hu(){return Ws(function(){for(var pt=0,It=er(String(Wr)).split("."),Dt=er("9").split("."),Lt=Math.max(It.length,Dt.length),Gt=0;pt==0&&Gt<Lt;Gt++){var Kt=It[Gt]||"",Wt=Dt[Gt]||"";do{if(Kt=/(\d*)(\D*)(.*)/.exec(Kt)||["","","",""],Wt=/(\d*)(\D*)(.*)/.exec(Wt)||["","","",""],Kt[0].length==0&&Wt[0].length==0)break;pt=Mr(Kt[1].length==0?0:parseInt(Kt[1],10),Wt[1].length==0?0:parseInt(Wt[1],10))||Mr(Kt[2].length==0,Wt[2].length==0)||Mr(Kt[2],Wt[2]),Kt=Kt[3],Wt=Wt[3]}while(pt==0)}return 0<=pt})}function Il(){this.K=this.K}Il.prototype.K=!1;var Gu=Object.freeze||function(pt){return pt};function Eo(pt,It){this.type=pt,this.a=this.target=It,this.defaultPrevented=!1}Eo.prototype.b=function(){this.defaultPrevented=!0};var Yu=function(){if(!Rt.addEventListener||!Object.defineProperty)return!1;var pt=!1,It=Object.defineProperty({},"passive",{get:function(){pt=!0}});try{Rt.addEventListener("test",kt,It),Rt.removeEventListener("test",kt,It)}catch{}return pt}();function xs(pt,It){if(Eo.call(this,pt?pt.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,pt){var Dt=this.type=pt.type,Lt=pt.changedTouches&&pt.changedTouches.length?pt.changedTouches[0]:null;if(this.target=pt.target||pt.srcElement,this.a=It,It=pt.relatedTarget){if(lo){e:{try{Hr(It.nodeName);var Gt=!0;break e}catch{}Gt=!1}Gt||(It=null)}}else Dt=="mouseover"?It=pt.fromElement:Dt=="mouseout"&&(It=pt.toElement);this.relatedTarget=It,Lt?(this.clientX=Lt.clientX!==void 0?Lt.clientX:Lt.pageX,this.clientY=Lt.clientY!==void 0?Lt.clientY:Lt.pageY,this.screenX=Lt.screenX||0,this.screenY=Lt.screenY||0):(this.clientX=pt.clientX!==void 0?pt.clientX:pt.pageX,this.clientY=pt.clientY!==void 0?pt.clientY:pt.pageY,this.screenX=pt.screenX||0,this.screenY=pt.screenY||0),this.button=pt.button,this.key=pt.key||"",this.ctrlKey=pt.ctrlKey,this.altKey=pt.altKey,this.shiftKey=pt.shiftKey,this.metaKey=pt.metaKey,this.pointerId=pt.pointerId||0,this.pointerType=typeof pt.pointerType=="string"?pt.pointerType:qu[pt.pointerType]||"",this.c=pt,pt.defaultPrevented&&xs.O.b.call(this)}}Nt(xs,Eo);var qu=Gu({2:"touch",3:"pen",4:"mouse"});xs.prototype.b=function(){xs.O.b.call(this);var pt=this.c;pt.preventDefault?pt.preventDefault():pt.returnValue=!1};var Rs="closure_listenable_"+(1e6*Math.random()|0),Xu=0;function Ku(pt,It,Dt,Lt,Gt){this.listener=pt,this.proxy=null,this.src=It,this.type=Dt,this.capture=!!Lt,this.H=Gt,this.key=++Xu,this.A=this.D=!1}function El(pt){pt.A=!0,pt.listener=null,pt.proxy=null,pt.src=null,pt.H=null}function Ms(pt){this.src=pt,this.a={},this.b=0}Ms.prototype.add=function(pt,It,Dt,Lt,Gt){var Kt=pt.toString();pt=this.a[Kt],pt||(pt=this.a[Kt]=[],this.b++);var Wt=xl(pt,It,Lt,Gt);return-1<Wt?(It=pt[Wt],Dt||(It.D=!1)):(It=new Ku(It,this.src,Kt,!!Lt,Gt),It.D=Dt,pt.push(It)),It},Ms.prototype.remove=function(pt,It,Dt,Lt){if(pt=pt.toString(),!(pt in this.a))return!1;var Gt=this.a[pt];return It=xl(Gt,It,Dt,Lt),-1<It?(El(Gt[It]),Array.prototype.splice.call(Gt,It,1),Gt.length==0&&(delete this.a[pt],this.b--),!0):!1};function Al(pt,It){var Dt=It.type;if(Dt in pt.a){var Lt=pt.a[Dt],Gt=ar(Lt,It),Kt;(Kt=0<=Gt)&&Array.prototype.splice.call(Lt,Gt,1),Kt&&(El(It),pt.a[Dt].length==0&&(delete pt.a[Dt],pt.b--))}}function xl(pt,It,Dt,Lt){for(var Gt=0;Gt<pt.length;++Gt){var Kt=pt[Gt];if(!Kt.A&&Kt.listener==It&&Kt.capture==!!Dt&&Kt.H==Lt)return Gt}return-1}var Rl="closure_lm_"+(1e6*Math.random()|0),Ml={};function Ys(pt,It,Dt,Lt,Gt){if(Lt&&Lt.once)ou(pt,It,Dt,Lt,Gt);else if(Array.isArray(It))for(var Kt=0;Kt<It.length;Kt++)Ys(pt,It[Kt],Dt,Lt,Gt);else Dt=Ol(Dt),pt&&pt[Rs]?pt.f.add(String(It),Dt,!1,Mt(Lt)?!!Lt.capture:!!Lt,Gt):iu(pt,It,Dt,!1,Lt,Gt)}function iu(pt,It,Dt,Lt,Gt,Kt){if(!It)throw Error("Invalid event type");var Wt=Mt(Gt)?!!Gt.capture:!!Gt,Qt=Nl(pt);if(Qt||(pt[Rl]=Qt=new Ms(pt)),Dt=Qt.add(It,Dt,Lt,Wt,Kt),!Dt.proxy)if(Lt=Zu(),Dt.proxy=Lt,Lt.src=pt,Lt.listener=Dt,pt.addEventListener)Yu||(Gt=Wt),Gt===void 0&&(Gt=!1),pt.addEventListener(It.toString(),Lt,Gt);else if(pt.attachEvent)pt.attachEvent(lu(It.toString()),Lt);else if(pt.addListener&&pt.removeListener)pt.addListener(Lt);else throw Error("addEventListener and attachEvent are unavailable.")}function Zu(){function pt(Dt){return It.call(pt.src,pt.listener,Dt)}var It=Qu;return pt}function ou(pt,It,Dt,Lt,Gt){if(Array.isArray(It))for(var Kt=0;Kt<It.length;Kt++)ou(pt,It[Kt],Dt,Lt,Gt);else Dt=Ol(Dt),pt&&pt[Rs]?pt.f.add(String(It),Dt,!0,Mt(Lt)?!!Lt.capture:!!Lt,Gt):iu(pt,It,Dt,!0,Lt,Gt)}function su(pt,It,Dt,Lt,Gt){if(Array.isArray(It))for(var Kt=0;Kt<It.length;Kt++)su(pt,It[Kt],Dt,Lt,Gt);else Lt=Mt(Lt)?!!Lt.capture:!!Lt,Dt=Ol(Dt),pt&&pt[Rs]?pt.f.remove(String(It),Dt,Lt,Gt):pt&&(pt=Nl(pt))&&(It=pt.a[It.toString()],pt=-1,It&&(pt=xl(It,Dt,Lt,Gt)),(Dt=-1<pt?It[pt]:null)&&au(Dt))}function au(pt){if(typeof pt!="number"&&pt&&!pt.A){var It=pt.src;if(It&&It[Rs])Al(It.f,pt);else{var Dt=pt.type,Lt=pt.proxy;It.removeEventListener?It.removeEventListener(Dt,Lt,pt.capture):It.detachEvent?It.detachEvent(lu(Dt),Lt):It.addListener&&It.removeListener&&It.removeListener(Lt),(Dt=Nl(It))?(Al(Dt,pt),Dt.b==0&&(Dt.src=null,It[Rl]=null)):El(pt)}}}function lu(pt){return pt in Ml?Ml[pt]:Ml[pt]="on"+pt}function Qu(pt,It){if(pt.A)pt=!0;else{It=new xs(It,this);var Dt=pt.listener,Lt=pt.H||pt.src;pt.D&&au(pt),pt=Dt.call(Lt,It)}return pt}function Nl(pt){return pt=pt[Rl],pt instanceof Ms?pt:null}var Dl="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ol(pt){return typeof pt=="function"?pt:(pt[Dl]||(pt[Dl]=function(It){return pt.handleEvent(It)}),pt[Dl])}function Ao(){Il.call(this),this.f=new Ms(this),this.U=this}Nt(Ao,Il),Ao.prototype[Rs]=!0,Ao.prototype.addEventListener=function(pt,It,Dt,Lt){Ys(this,pt,It,Dt,Lt)},Ao.prototype.removeEventListener=function(pt,It,Dt,Lt){su(this,pt,It,Dt,Lt)};function Kr(pt,It){pt=pt.U;var Dt=It.type||It;if(typeof It=="string")It=new Eo(It,pt);else if(It instanceof Eo)It.target=It.target||pt;else{var Lt=It;It=new Eo(Dt,pt),yl(It,Lt)}pt=It.a=pt,cu(pt,Dt,!0,It),cu(pt,Dt,!1,It)}function cu(pt,It,Dt,Lt){if(It=pt.f.a[String(It)]){It=It.concat();for(var Gt=!0,Kt=0;Kt<It.length;++Kt){var Wt=It[Kt];if(Wt&&!Wt.A&&Wt.capture==Dt){var Qt=Wt.listener,jn=Wt.H||Wt.src;Wt.D&&Al(pt.f,Wt),Gt=Qt.call(jn,Lt)!==!1&&Gt}}}}var Bl=Rt;function uu(pt,It,Dt){if(typeof pt=="function")Dt&&(pt=zt(pt,Dt));else if(pt&&typeof pt.handleEvent=="function")pt=zt(pt.handleEvent,pt);else throw Error("Invalid listener argument");return 2147483647<Number(It)?-1:Bl.setTimeout(pt,It||0)}function Ns(pt,It){this.name=pt,this.value=It}Ns.prototype.toString=function(){return this.name};var qs=new Ns("OFF",1/0),fu=new Ns("SEVERE",1e3),Ju=new Ns("CONFIG",700),ep=new Ns("FINE",500);function du(){this.clear()}var hu;du.prototype.clear=function(){};function pu(pt,It,Dt){this.reset(pt||qs,It,Dt,void 0,void 0)}pu.prototype.reset=function(){};function gu(pt,It){this.a=null,this.f=[],this.b=(It===void 0?null:It)||null,this.c=[],this.g={getName:function(){return pt}}}function yu(pt){return pt.a?pt.a:pt.b?yu(pt.b):(On("Root logger has no level set."),qs)}function tp(pt,It){for(;pt;)pt.f.forEach(function(Dt){Dt(It)}),pt=pt.b}function np(){this.entries={};var pt=new gu("");pt.a=Ju,this.entries[""]=pt}var Cl;function Xs(pt,It,Dt){var Lt=pt.entries[It];if(Lt)return Dt!==void 0&&(Lt.a=Dt),Lt;Lt=Xs(pt,It.substr(0,It.lastIndexOf(".")));var Gt=new gu(It,Lt);return pt.entries[It]=Gt,Lt.c.push(Gt),Dt!==void 0&&(Gt.a=Dt),Gt}function Fl(){return Cl||(Cl=new np),Cl}function Ll(pt,It,Dt){var Lt;if((Lt=pt)&&(Lt=pt&&It)){Lt=It.value;var Gt=pt?yu(Xs(Fl(),pt.getName())):qs;Lt=Lt>=Gt.value}Lt&&(It=It||qs,Lt=Xs(Fl(),pt.getName()),typeof Dt=="function"&&(Dt=Dt()),hu||(hu=new du),pt=pt.getName(),pt=new pu(It,Dt,pt),tp(Lt,pt))}function Vr(pt,It){pt&&Ll(pt,ep,It)}function mu(){}mu.prototype.a=null;function bu(pt){var It;return(It=pt.a)||(It={},vu(pt)&&(It[0]=!0,It[1]=!0),It=pt.a=It),It}var Ul;function $u(){}Nt($u,mu);function Su(pt){return(pt=vu(pt))?new ActiveXObject(pt):new XMLHttpRequest}function vu(pt){if(!pt.b&&typeof XMLHttpRequest>"u"&&typeof ActiveXObject<"u"){for(var It=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],Dt=0;Dt<It.length;Dt++){var Lt=It[Dt];try{return new ActiveXObject(Lt),pt.b=Lt}catch{}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return pt.b}Ul=new $u,$(),tt();function Pl(pt,It){this.b=pt[Rt.Symbol.iterator](),this.c=It,this.f=0}Pl.prototype[Symbol.iterator]=function(){return this},Pl.prototype.next=function(){var pt=this.b.next();return{value:pt.done?void 0:this.c.call(void 0,pt.value,this.f++),done:pt.done}};function rp(pt,It){return new Pl(pt,It)}$(),tt(),$(),tt();var Ks="StopIteration"in Rt?Rt.StopIteration:{message:"StopIteration",stack:""};function co(){}co.prototype.next=function(){return co.prototype.a.call(this)},co.prototype.a=function(){throw Ks},co.prototype.u=function(){return this};function wu(pt){if(pt instanceof Zr||pt instanceof io||pt instanceof uo)return pt;if(typeof pt.next=="function")return new Zr(function(){return Tu(pt)});if($(),tt(),typeof pt[Symbol.iterator]=="function")return $(),tt(),new Zr(function(){return pt[Symbol.iterator]()});if(typeof pt.u=="function")return new Zr(function(){return Tu(pt.u())});throw Error("Not an iterator or iterable.")}function Tu(pt){if(!(pt instanceof co))return pt;var It=!1;return{next:function(){for(var Dt;!It;)try{Dt=pt.a();break}catch(Lt){if(Lt!==Ks)throw Lt;It=!0}return{value:Dt,done:It}}}}$(),tt();function Zr(pt){this.b=pt}Zr.prototype.u=function(){return new io(this.b())},Zr.prototype[Symbol.iterator]=function(){return new uo(this.b())},Zr.prototype.c=function(){return new uo(this.b())},$(),tt();function io(pt){this.b=pt}$t(io,co),io.prototype.a=function(){var pt=this.b.next();if(pt.done)throw Ks;return pt.value},io.prototype.next=function(){return io.prototype.a.call(this)},io.prototype[Symbol.iterator]=function(){return new uo(this.b)},io.prototype.c=function(){return new uo(this.b)};function uo(pt){Zr.call(this,function(){return pt}),this.f=pt}$t(uo,Zr),uo.prototype.next=function(){return this.f.next()};function Zs(pt,It){this.o={},this.j=[],this.B=this.size=0;var Dt=arguments.length;if(1<Dt){if(Dt%2)throw Error("Uneven number of arguments");for(var Lt=0;Lt<Dt;Lt+=2)this.set(arguments[Lt],arguments[Lt+1])}else pt&&this.addAll(pt)}o=Zs.prototype,o.G=function(){return Vl(this),this.j.concat()},o.has=function(pt){return Ro(this.o,pt)},o.clear=function(){this.o={},this.B=this.size=this.j.length=0},o.remove=function(pt){return this.delete(pt)},o.delete=function(pt){return Ro(this.o,pt)?(delete this.o[pt],--this.size,this.B++,this.j.length>2*this.size&&Vl(this),!0):!1};function Vl(pt){if(pt.size!=pt.j.length){for(var It=0,Dt=0;It<pt.j.length;){var Lt=pt.j[It];Ro(pt.o,Lt)&&(pt.j[Dt++]=Lt),It++}pt.j.length=Dt}if(pt.size!=pt.j.length){var Gt={};for(Dt=It=0;It<pt.j.length;)Lt=pt.j[It],Ro(Gt,Lt)||(pt.j[Dt++]=Lt,Gt[Lt]=1),It++;pt.j.length=Dt}}o.get=function(pt,It){return Ro(this.o,pt)?this.o[pt]:It},o.set=function(pt,It){Ro(this.o,pt)||(this.size+=1,this.j.push(pt),this.B++),this.o[pt]=It},o.addAll=function(pt){if(pt instanceof Zs)for(var It=pt.G(),Dt=0;Dt<It.length;Dt++)this.set(It[Dt],pt.get(It[Dt]));else for(It in pt)this.set(It,pt[It])},o.forEach=function(pt,It){for(var Dt=this.G(),Lt=0;Lt<Dt.length;Lt++){var Gt=Dt[Lt],Kt=this.get(Gt);pt.call(It,Kt,Gt,this)}},o.clone=function(){return new Zs(this)},o.keys=function(){return wu(this.u(!0)).c()},o.values=function(){return wu(this.u(!1)).c()},o.entries=function(){var pt=this;return rp(this.keys(),function(It){return[It,pt.get(It)]})},o.u=function(pt){Vl(this);var It=0,Dt=this.B,Lt=this,Gt=new co;return Gt.a=function(){if(Dt!=Lt.B)throw Error("The map has changed since the iterator was created");if(It>=Lt.j.length)throw Ks;var Kt=Lt.j[It++];return pt?Kt:Lt.o[Kt]},Gt.next=Gt.a.bind(Gt),Gt};function Ro(pt,It){return Object.prototype.hasOwnProperty.call(pt,It)}var ip=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Qs(pt){Ao.call(this),this.headers=new Zs,this.C=pt||null,this.c=!1,this.J=this.a=null,this.P=this.v="",this.g=0,this.l="",this.i=this.N=this.s=this.L=!1,this.h=0,this.w=null,this.m=Iu,this.I=this.M=!1}Nt(Qs,Ao);var Iu="";Qs.prototype.b=Xs(Fl(),"goog.net.XhrIo",void 0).g;var op=/^https?$/i,sp=["POST","PUT"];function ap(pt,It,Dt){if(pt.a)throw Error("[goog.net.XhrIo] Object is active with another request="+pt.v+"; newUri="+It);pt.v=It,pt.l="",pt.g=0,pt.P="POST",pt.L=!1,pt.c=!0,pt.a=pt.C?Su(pt.C):Su(Ul),pt.J=pt.C?bu(pt.C):bu(Ul),pt.a.onreadystatechange=zt(pt.R,pt);try{Vr(pt.b,Qr(pt,"Opening Xhr")),pt.N=!0,pt.a.open("POST",String(It),!0),pt.N=!1}catch(Kt){Vr(pt.b,Qr(pt,"Error opening Xhr: "+Kt.message)),Eu(pt,Kt);return}It=Dt||"",Dt=pt.headers.clone();var Lt=Dt.G().find(function(Kt){return Kt.toLowerCase()=="content-type"}),Gt=Rt.FormData&&It instanceof Rt.FormData;!(0<=ar(sp,"POST"))||Lt||Gt||Dt.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),Dt.forEach(function(Kt,Wt){this.a.setRequestHeader(Wt,Kt)},pt),pt.m&&(pt.a.responseType=pt.m),"withCredentials"in pt.a&&pt.a.withCredentials!==pt.M&&(pt.a.withCredentials=pt.M);try{Ru(pt),0<pt.h&&(pt.I=lp(pt.a),Vr(pt.b,Qr(pt,"Will abort after "+pt.h+"ms if incomplete, xhr2 "+pt.I)),pt.I?(pt.a.timeout=pt.h,pt.a.ontimeout=zt(pt.T,pt)):pt.w=uu(pt.T,pt.h,pt)),Vr(pt.b,Qr(pt,"Sending request")),pt.s=!0,pt.a.send(It),pt.s=!1}catch(Kt){Vr(pt.b,Qr(pt,"Send error: "+Kt.message)),Eu(pt,Kt)}}function lp(pt){return As&&Hu()&&typeof pt.timeout=="number"&&pt.ontimeout!==void 0}o=Qs.prototype,o.T=function(){typeof xt<"u"&&this.a&&(this.l="Timed out after "+this.h+"ms, aborting",this.g=8,Vr(this.b,Qr(this,this.l)),Kr(this,"timeout"),this.abort(8))};function Eu(pt,It){pt.c=!1,pt.a&&(pt.i=!0,pt.a.abort(),pt.i=!1),pt.l=It,pt.g=5,Au(pt),zl(pt)}function Au(pt){pt.L||(pt.L=!0,Kr(pt,"complete"),Kr(pt,"error"))}o.abort=function(pt){this.a&&this.c&&(Vr(this.b,Qr(this,"Aborting")),this.c=!1,this.i=!0,this.a.abort(),this.i=!1,this.g=pt||7,Kr(this,"complete"),Kr(this,"abort"),zl(this))},o.R=function(){this.K||(this.N||this.s||this.i?xu(this):this.W())},o.W=function(){xu(this)};function xu(pt){if(pt.c&&typeof xt<"u"){if(pt.J[1]&&fo(pt)==4&&pt.getStatus()==2)Vr(pt.b,Qr(pt,"Local request error detected and ignored"));else if(pt.s&&fo(pt)==4)uu(pt.R,0,pt);else if(Kr(pt,"readystatechange"),fo(pt)==4){Vr(pt.b,Qr(pt,"Request complete")),pt.c=!1;try{var It=pt.getStatus();e:switch(It){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var Dt=!0;break e;default:Dt=!1}var Lt;if(!(Lt=Dt)){var Gt;if(Gt=It===0){var Kt=String(pt.v).match(ip)[1]||null;if(!Kt&&Rt.self&&Rt.self.location){var Wt=Rt.self.location.protocol;Kt=Wt.substr(0,Wt.length-1)}Gt=!op.test(Kt?Kt.toLowerCase():"")}Lt=Gt}if(Lt)Kr(pt,"complete"),Kr(pt,"success");else{pt.g=6;try{var Qt=2<fo(pt)?pt.a.statusText:""}catch(jn){Vr(pt.b,"Can not get status: "+jn.message),Qt=""}pt.l=Qt+" ["+pt.getStatus()+"]",Au(pt)}}finally{zl(pt)}}}}function zl(pt){if(pt.a){Ru(pt);var It=pt.a,Dt=pt.J[0]?kt:null;pt.a=null,pt.J=null,Kr(pt,"ready");try{It.onreadystatechange=Dt}catch(Lt){(pt=pt.b)&&Ll(pt,fu,"Problem encountered resetting onreadystatechange: "+Lt.message)}}}function Ru(pt){pt.a&&pt.I&&(pt.a.ontimeout=null),pt.w&&(Bl.clearTimeout(pt.w),pt.w=null)}function fo(pt){return pt.a?pt.a.readyState:0}o.getStatus=function(){try{return 2<fo(this)?this.a.status:-1}catch{return-1}};function cp(pt){try{if(!pt.a)return null;if("response"in pt.a)return pt.a.response;switch(pt.m){case Iu:case"text":return pt.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in pt.a)return pt.a.mozResponseArrayBuffer}var It=pt.b;return It&&Ll(It,fu,"Response type "+pt.m+" is not supported on this browser"),null}catch(Dt){return Vr(pt.b,"Can not get response: "+Dt.message),null}}function Mu(pt,It){if(pt.a&&fo(pt)==4)return pt=pt.a.getResponseHeader(It),pt===null?void 0:pt}function up(pt){var It={};pt=(pt.a&&fo(pt)==4&&pt.a.getAllResponseHeaders()||"").split(`\r
`);for(var Dt=0;Dt<pt.length;Dt++)if(!/^[\s\xa0]*$/.test(pt[Dt])){var Lt=$l(pt[Dt]),Gt=Lt[0];if(Lt=Lt[1],typeof Lt=="string"){Lt=Lt.trim();var Kt=It[Gt]||[];It[Gt]=Kt,Kt.push(Lt)}}return Vs(It,function(Wt){return Wt.join(", ")})}function Qr(pt,It){return It+" ["+pt.P+" "+pt.v+" "+pt.getStatus()+"]"}var Nu={},Ds=null;function fp(pt){var It=pt.length,Dt=3*It/4;Dt%3?Dt=Math.floor(Dt):ir("=.",pt[It-1])&&(Dt=ir("=.",pt[It-2])?Dt-2:Dt-1);var Lt=new Uint8Array(Dt),Gt=0;return dp(pt,function(Kt){Lt[Gt++]=Kt}),Lt.subarray(0,Gt)}function dp(pt,It){function Dt(jn){for(;Lt<pt.length;){var nr=pt.charAt(Lt++),ur=Ds[nr];if(ur!=null)return ur;if(!/^[\s\xa0]*$/.test(nr))throw Error("Unknown base64 encoding at char: "+nr)}return jn}Du();for(var Lt=0;;){var Gt=Dt(-1),Kt=Dt(0),Wt=Dt(64),Qt=Dt(64);if(Qt===64&&Gt===-1)break;It(Gt<<2|Kt>>4),Wt!=64&&(It(Kt<<4&240|Wt>>2),Qt!=64&&It(Wt<<6&192|Qt))}}function Du(){if(!Ds){Ds={};for(var pt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),It=["+/=","+/","-_=","-_.","-_"],Dt=0;5>Dt;Dt++){var Lt=pt.concat(It[Dt].split(""));Nu[Dt]=Lt;for(var Gt=0;Gt<Lt.length;Gt++){var Kt=Lt[Gt];Ds[Kt]===void 0&&(Ds[Kt]=Gt)}}}}var hp=["content-type","grpc-status","grpc-message"];function Gr(pt){this.a=pt.Z,this.m=null,this.b=[],this.h=[],this.g=[],this.f=[],this.c=[],this.l=!1,this.i=0,this.s=new vn;var It=this;Ys(this.a,"readystatechange",function(){var Dt=It.a;if(Dt=Dt.a?Dt.a.getResponseHeader("Content-Type"):null){if(Dt=Dt.toLowerCase(),Dt.lastIndexOf("application/grpc-web-text",0)==0){Dt=It.a;try{var Lt=Dt.a?Dt.a.responseText:""}catch(jn){Vr(Dt.b,"Can not get responseText: "+jn.message),Lt=""}if(Dt=Lt||"",Lt=Dt.length-Dt.length%4,Dt=Dt.substr(It.i,Lt-It.i),Dt.length==0)return;It.i=Lt,Dt=fp(Dt)}else if(Dt.lastIndexOf("application/grpc",0)==0)Dt=new Uint8Array(cp(It.a));else{No(It,new Yt(2,"Unknown Content-type received."));return}Lt=null;try{Lt=Nn(It.s,Dt)}catch{No(It,new Yt(2,"Error in parsing response body"))}if(Lt)for(Dt=0;Dt<Lt.length;Dt++){if(rr in Lt[Dt]){var Gt=Lt[Dt][rr];if(Gt){var Kt=!1,Wt=void 0;try{Wt=It.m(Gt),Kt=!0}catch(jn){No(It,new Yt(13,"Error when deserializing response data; error: "+jn+(", response: "+Wt)))}if(Kt)for(Gt=Wt,Kt=0;Kt<It.b.length;Kt++)It.b[Kt](Gt)}}if(tr in Lt[Dt]&&0<Lt[Dt][tr].length){for(Gt="",Kt=0;Kt<Lt[Dt][tr].length;Kt++)Gt+=String.fromCharCode(Lt[Dt][tr][Kt]);for(Gt=Gt.trim().split(`\r
`),Kt={},Wt=0;Wt<Gt.length;Wt++){var Qt=Gt[Wt].indexOf(":");Kt[Gt[Wt].substring(0,Qt).trim()]=Gt[Wt].substring(Qt+1).trim()}Gt=Kt,Kt=0,Wt="","grpc-status"in Gt&&(Kt=Number(Gt["grpc-status"]),delete Gt["grpc-status"]),"grpc-message"in Gt&&(Wt=Gt["grpc-message"],delete Gt["grpc-message"]),No(It,new Yt(Kt,Wt,Gt))}}}}),Ys(this.a,"complete",function(){var Dt=It.a.g,Lt=2,Gt="",Kt={},Wt=up(It.a);Object.keys(Wt).forEach(function(jn){hp.includes(jn)||(Kt[jn]=Wt[jn])}),pp(It,Kt);var Qt=-1;if(Dt!=0){switch(Dt){case 7:Lt=10;break;case 8:Lt=4;break;case 6:Qt=It.a.getStatus(),Lt=Pt(Qt);break;default:Lt=14}Lt==10&&It.l||(Gt=wn(Dt),Qt!=-1&&(Gt+=", http status code: "+Qt),No(It,new Yt(Lt,Gt)))}else Qt=!1,"grpc-status"in Wt&&(Lt=Number(Mu(It.a,"grpc-status")),"grpc-message"in Wt&&(Gt=Mu(It.a,"grpc-message")),Lt!=0&&(No(It,new Yt(Lt,Gt||"",Wt)),Qt=!0)),Qt||gp(It)})}Gr.prototype.on=function(pt,It){return pt=="data"?this.b.push(It):pt=="status"?this.h.push(It):pt=="metadata"?this.g.push(It):pt=="end"?this.c.push(It):pt=="error"&&this.f.push(It),this};function Os(pt,It){It=pt.indexOf(It),-1<It&&pt.splice(It,1)}Gr.prototype.removeListener=function(pt,It){return pt=="data"?Os(this.b,It):pt=="status"?Os(this.h,It):pt=="metadata"?Os(this.g,It):pt=="end"?Os(this.c,It):pt=="error"&&Os(this.f,It),this},Gr.prototype.cancel=function(){this.l=!0,this.a.abort()};function No(pt,It){if(It.code!=0)for(var Dt=new Yt(It.code,decodeURIComponent(It.message||""),It.metadata),Lt=0;Lt<pt.f.length;Lt++)pt.f[Lt](Dt);for(It={code:It.code,details:decodeURIComponent(It.message||""),metadata:It.metadata},Dt=0;Dt<pt.h.length;Dt++)pt.h[Dt](It)}function pp(pt,It){for(var Dt=0;Dt<pt.g.length;Dt++)pt.g[Dt](It)}function gp(pt){for(var It=0;It<pt.c.length;It++)pt.c[It]()}Gr.prototype.cancel=Gr.prototype.cancel,Gr.prototype.removeListener=Gr.prototype.removeListener,Gr.prototype.on=Gr.prototype.on;function yp(pt){var It="";return xa(pt,function(Dt,Lt){It+=Lt,It+=":",It+=Dt,It+=`\r
`}),It}function Br(pt,It){pt=pt===void 0?{}:pt,this.a=pt.format||Ot("format",pt)||"text",this.g=pt.aa||Ot("suppressCorsPreflight",pt)||!1,this.f=pt.withCredentials||Ot("withCredentials",pt)||!1,this.b=pt.$||Ot("streamInterceptors",pt)||[],this.h=pt.ba||Ot("unaryInterceptors",pt)||[],this.c=It||null}Br.prototype.X=function(pt,It,Dt,Lt,Gt){var Kt=this,Wt=pt.substr(0,pt.length-Lt.name.length);return pt=Hl(function(Qt){return Wl(Kt,Qt,Wt)},this.b).call(this,Ht(Lt,It,Dt)),Ou(pt,Gt,!1),new Xt(pt)},Br.prototype.S=function(pt,It,Dt,Lt){var Gt=this,Kt=pt.substr(0,pt.length-Lt.name.length);return Hl(function(Wt){return new Promise(function(Qt,jn){var nr=Wl(Gt,Wt,Kt),ur,vr,xr;Ou(nr,function(zr,Yr,Do,Bu,mp){zr?jn(zr):mp?xr=Yr:Do?vr=Do:Bu?ur=Bu:(zr=Wt.getMethodDescriptor(),Yr=ur,Yr=Yr===void 0?{}:Yr,Qt(new Vt(xr,zr,Yr,vr===void 0?null:vr)))},!0)})},this.h).call(this,Ht(Lt,It,Dt)).then(function(Wt){return Wt.getResponseMessage()})},Br.prototype.unaryCall=function(pt,It,Dt,Lt){return this.S(pt,It,Dt,Lt)},Br.prototype.Y=function(pt,It,Dt,Lt){var Gt=this,Kt=pt.substr(0,pt.length-Lt.name.length);return Hl(function(Wt){return Wl(Gt,Wt,Kt)},this.b).call(this,Ht(Lt,It,Dt))};function Wl(pt,It,Dt){var Lt=It.getMethodDescriptor(),Gt=Dt+Lt.getName();Dt=pt.c?pt.c:new Qs,Dt.M=pt.f;var Kt=new Gr({Z:Dt});Kt.m=Lt.b;var Wt=It.getMetadata();for(Qt in Wt)Dt.headers.set(Qt,Wt[Qt]);if(pt.a=="text"?(Dt.headers.set("Content-Type","application/grpc-web-text"),Dt.headers.set("Accept","application/grpc-web-text")):Dt.headers.set("Content-Type","application/grpc-web+proto"),Dt.headers.set("X-User-Agent","grpc-web-javascript/0.1"),Dt.headers.set("X-Grpc-Web","1"),Dt.headers.has("deadline")){var Qt=Number(Dt.headers.get("deadline"));Qt=Math.ceil(Qt-new Date().getTime()),Dt.headers.delete("deadline"),Qt===1/0&&(Qt=0),0<Qt&&(Dt.headers.set("grpc-timeout",Qt+"m"),Dt.h=Math.max(0,Math.max(1e3,Math.ceil(1.1*Qt))))}if(pt.g){Wt=Dt.headers,Qt={};for(var jn=rt(Wt.keys()),nr=jn.next();!nr.done;nr=jn.next())nr=nr.value,Qt[nr]=Wt.get(nr);Dt.headers.clear();e:{for(ur in Qt){var ur=!1;break e}ur=!0}ur||(Qt=yp(Qt),typeof Gt=="string"?(ur=encodeURIComponent("$httpHeaders"),Qt=Qt!=null?"="+encodeURIComponent(String(Qt)):"",(ur+=Qt)&&(Qt=Gt.indexOf("#"),0>Qt&&(Qt=Gt.length),Wt=Gt.indexOf("?"),0>Wt||Wt>Qt?(Wt=Qt,jn=""):jn=Gt.substring(Wt+1,Qt),Gt=[Gt.substr(0,Wt),jn,Gt.substr(Qt)],Qt=Gt[1],Gt[1]=ur?Qt?Qt+"&"+ur:ur:Qt,Gt=Gt[0]+(Gt[1]?"?"+Gt[1]:"")+Gt[2])):Gt.a("$httpHeaders",Qt))}for(It=(0,Lt.a)(It.getRequestMessage()),Lt=It.length,ur=[0,0,0,0],Qt=new Uint8Array(5+Lt),Wt=3;0<=Wt;Wt--)ur[Wt]=Lt%256,Lt>>>=8;if(Qt.set(new Uint8Array(ur),1),Qt.set(It,5),It=Qt,pt.a=="text"){pt=It;var vr;for(vr===void 0&&(vr=0),Du(),vr=Nu[vr],It=Array(Math.floor(pt.length/3)),Lt=vr[64]||"",ur=Qt=0;Qt<pt.length-2;Qt+=3){nr=pt[Qt];var xr=pt[Qt+1];jn=pt[Qt+2],Wt=vr[nr>>2],nr=vr[(nr&3)<<4|xr>>4],xr=vr[(xr&15)<<2|jn>>6],jn=vr[jn&63],It[ur++]=Wt+nr+xr+jn}switch(Wt=0,jn=Lt,pt.length-Qt){case 2:Wt=pt[Qt+1],jn=vr[(Wt&15)<<2]||Lt;case 1:pt=pt[Qt],It[ur]=vr[pt>>2]+vr[(pt&3)<<4|Wt>>4]+jn+Lt}It=It.join("")}else pt.a=="binary"&&(Dt.m="arraybuffer");return ap(Dt,Gt,It),Kt}function Ou(pt,It,Dt){var Lt=!1,Gt=null,Kt=!1;pt.on("data",function(Wt){Lt=!0,Gt=Wt}),pt.on("error",function(Wt){Wt.code==0||Kt||(Kt=!0,It(Wt,null))}),pt.on("status",function(Wt){Wt.code==0||Kt?Dt&&It(null,null,Wt):(Kt=!0,It({code:Wt.code,message:Wt.details,metadata:Wt.metadata},null))}),Dt&&pt.on("metadata",function(Wt){It(null,null,null,Wt)}),pt.on("end",function(){Kt||(Lt?Dt?It(null,Gt,null,null,!0):It(null,Gt):It({code:2,message:"Incomplete response"})),Dt&&It(null,null)})}function Hl(pt,It){var Dt=pt;return It.forEach(function(Lt){var Gt=Dt;Dt=function(Kt){return Lt.intercept(Kt,Gt)}}),Dt}Br.prototype.serverStreaming=Br.prototype.Y,Br.prototype.unaryCall=Br.prototype.unaryCall,Br.prototype.thenableCall=Br.prototype.S,Br.prototype.rpcCall=Br.prototype.X,e.exports.CallOptions=Ct,e.exports.MethodDescriptor=Ut,e.exports.GrpcWebClientBase=Br,e.exports.RpcError=Yt,e.exports.StatusCode={OK:0,CANCELLED:1,UNKNOWN:2,INVALID_ARGUMENT:3,DEADLINE_EXCEEDED:4,NOT_FOUND:5,ALREADY_EXISTS:6,PERMISSION_DENIED:7,UNAUTHENTICATED:16,RESOURCE_EXHAUSTED:8,FAILED_PRECONDITION:9,ABORTED:10,OUT_OF_RANGE:11,UNIMPLEMENTED:12,INTERNAL:13,UNAVAILABLE:14,DATA_LOSS:15},e.exports.MethodType={UNARY:"unary",SERVER_STREAMING:"server_streaming",BIDI_STREAMING:"bidi_streaming"},Bl=typeof globalThis<"u"&&globalThis||self}),Oo=He((exports,module)=>{var $jscomp=$jscomp||{};$jscomp.scope={},$jscomp.findInternal=function(i,e,o){i instanceof String&&(i=String(i));for(var d=i.length,h=0;h<d;h++){var g=i[h];if(e.call(o,g,h,i))return{i:h,v:g}}return{i:-1,v:void 0}},$jscomp.ASSUME_ES5=!1,$jscomp.ASSUME_NO_NATIVE_MAP=!1,$jscomp.ASSUME_NO_NATIVE_SET=!1,$jscomp.SIMPLE_FROUND_POLYFILL=!1,$jscomp.defineProperty=$jscomp.ASSUME_ES5||typeof Object.defineProperties=="function"?Object.defineProperty:function(i,e,o){i!=Array.prototype&&i!=Object.prototype&&(i[e]=o.value)},$jscomp.getGlobal=function(i){return typeof window<"u"&&window===i?i:typeof global<"u"&&global!=null?global:i},$jscomp.global=$jscomp.getGlobal(exports),$jscomp.polyfill=function(i,e,o,d){if(e){for(o=$jscomp.global,i=i.split("."),d=0;d<i.length-1;d++){var h=i[d];h in o||(o[h]={}),o=o[h]}i=i[i.length-1],d=o[i],e=e(d),e!=d&&e!=null&&$jscomp.defineProperty(o,i,{configurable:!0,writable:!0,value:e})}},$jscomp.polyfill("Array.prototype.findIndex",function(i){return i||function(e,o){return $jscomp.findInternal(this,e,o).i}},"es6","es3"),$jscomp.checkStringArgs=function(i,e,o){if(i==null)throw new TypeError("The 'this' value for String.prototype."+o+" must not be null or undefined");if(e instanceof RegExp)throw new TypeError("First argument to String.prototype."+o+" must not be a regular expression");return i+""},$jscomp.polyfill("String.prototype.endsWith",function(i){return i||function(e,o){var d=$jscomp.checkStringArgs(this,e,"endsWith");e+="",o===void 0&&(o=d.length),o=Math.max(0,Math.min(o|0,d.length));for(var h=e.length;0<h&&0<o;)if(d[--o]!=e[--h])return!1;return 0>=h}},"es6","es3"),$jscomp.polyfill("Array.prototype.find",function(i){return i||function(e,o){return $jscomp.findInternal(this,e,o).v}},"es6","es3"),$jscomp.polyfill("String.prototype.startsWith",function(i){return i||function(e,o){var d=$jscomp.checkStringArgs(this,e,"startsWith");e+="";var h=d.length,g=e.length;o=Math.max(0,Math.min(o|0,d.length));for(var b=0;b<g&&o<h;)if(d[o++]!=e[b++])return!1;return b>=g}},"es6","es3"),$jscomp.polyfill("String.prototype.repeat",function(i){return i||function(e){var o=$jscomp.checkStringArgs(this,null,"repeat");if(0>e||1342177279<e)throw new RangeError("Invalid count value");e|=0;for(var d="";e;)e&1&&(d+=o),(e>>>=1)&&(o+=o);return d}},"es6","es3");var COMPILED=!0,goog=goog||{};goog.global=exports||self,goog.exportPath_=function(i,e,o){i=i.split("."),o=o||goog.global,i[0]in o||typeof o.execScript>"u"||o.execScript("var "+i[0]);for(var d;i.length&&(d=i.shift());)i.length||e===void 0?o=o[d]&&o[d]!==Object.prototype[d]?o[d]:o[d]={}:o[d]=e},goog.define=function(i,e){return e},goog.FEATURESET_YEAR=2012,goog.DEBUG=!0,goog.LOCALE="en",goog.TRUSTED_SITE=!0,goog.STRICT_MODE_COMPATIBLE=!1,goog.DISALLOW_TEST_ONLY_CODE=!goog.DEBUG,goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING=!1,goog.provide=function(i){if(goog.isInModuleLoader_())throw Error("goog.provide cannot be used within a module.");goog.constructNamespace_(i)},goog.constructNamespace_=function(i,e){goog.exportPath_(i,e)},goog.getScriptNonce=function(i){return i&&i!=goog.global?goog.getScriptNonce_(i.document):(goog.cspNonce_===null&&(goog.cspNonce_=goog.getScriptNonce_(goog.global.document)),goog.cspNonce_)},goog.NONCE_PATTERN_=/^[\w+/_-]+[=]{0,2}$/,goog.cspNonce_=null,goog.getScriptNonce_=function(i){return(i=i.querySelector&&i.querySelector("script[nonce]"))&&(i=i.nonce||i.getAttribute("nonce"))&&goog.NONCE_PATTERN_.test(i)?i:""},goog.VALID_MODULE_RE_=/^[a-zA-Z_$][a-zA-Z0-9._$]*$/,goog.module=function(i){if(typeof i!="string"||!i||i.search(goog.VALID_MODULE_RE_)==-1)throw Error("Invalid module identifier");if(!goog.isInGoogModuleLoader_())throw Error("Module "+i+" has been loaded incorrectly. Note, modules cannot be loaded as normal scripts. They require some kind of pre-processing step. You're likely trying to load a module via a script tag or as a part of a concatenated bundle without rewriting the module. For more info see: https://github.com/google/closure-library/wiki/goog.module:-an-ES6-module-like-alternative-to-goog.provide.");if(goog.moduleLoaderState_.moduleName)throw Error("goog.module may only be called once per module.");goog.moduleLoaderState_.moduleName=i},goog.module.get=function(i){return goog.module.getInternal_(i)},goog.module.getInternal_=function(i){return null},goog.ModuleType={ES6:"es6",GOOG:"goog"},goog.moduleLoaderState_=null,goog.isInModuleLoader_=function(){return goog.isInGoogModuleLoader_()||goog.isInEs6ModuleLoader_()},goog.isInGoogModuleLoader_=function(){return!!goog.moduleLoaderState_&&goog.moduleLoaderState_.type==goog.ModuleType.GOOG},goog.isInEs6ModuleLoader_=function(){if(goog.moduleLoaderState_&&goog.moduleLoaderState_.type==goog.ModuleType.ES6)return!0;var i=goog.global.$jscomp;return i?typeof i.getCurrentModulePath!="function"?!1:!!i.getCurrentModulePath():!1},goog.module.declareLegacyNamespace=function(){goog.moduleLoaderState_.declareLegacyNamespace=!0},goog.declareModuleId=function(i){if(goog.moduleLoaderState_)goog.moduleLoaderState_.moduleName=i;else{var e=goog.global.$jscomp;if(!e||typeof e.getCurrentModulePath!="function")throw Error('Module with namespace "'+i+'" has been loaded incorrectly.');e=e.require(e.getCurrentModulePath()),goog.loadedModules_[i]={exports:e,type:goog.ModuleType.ES6,moduleId:i}}},goog.setTestOnly=function(i){if(goog.DISALLOW_TEST_ONLY_CODE)throw i=i||"",Error("Importing test-only code into non-debug environment"+(i?": "+i:"."))},goog.forwardDeclare=function(i){},goog.getObjectByName=function(i,e){i=i.split("."),e=e||goog.global;for(var o=0;o<i.length;o++)if(e=e[i[o]],e==null)return null;return e},goog.globalize=function(i,e){e=e||goog.global;for(var o in i)e[o]=i[o]},goog.addDependency=function(i,e,o,d){},goog.ENABLE_DEBUG_LOADER=!0,goog.logToConsole_=function(i){goog.global.console&&goog.global.console.error(i)},goog.require=function(i){},goog.requireType=function(i){return{}},goog.basePath="",goog.nullFunction=function(){},goog.abstractMethod=function(){throw Error("unimplemented abstract method")},goog.addSingletonGetter=function(i){i.instance_=void 0,i.getInstance=function(){return i.instance_?i.instance_:(goog.DEBUG&&(goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=i),i.instance_=new i)}},goog.instantiatedSingletons_=[],goog.LOAD_MODULE_USING_EVAL=!0,goog.SEAL_MODULE_EXPORTS=goog.DEBUG,goog.loadedModules_={},goog.DEPENDENCIES_ENABLED=!COMPILED,goog.TRANSPILE="detect",goog.ASSUME_ES_MODULES_TRANSPILED=!1,goog.TRANSPILE_TO_LANGUAGE="",goog.TRANSPILER="transpile.js",goog.hasBadLetScoping=null,goog.useSafari10Workaround=function(){if(goog.hasBadLetScoping==null){try{var a=!eval('"use strict";let x = 1; function f() { return typeof x; };f() == "number";')}catch(i){a=!1}goog.hasBadLetScoping=a}return goog.hasBadLetScoping},goog.workaroundSafari10EvalBug=function(i){return"(function(){"+i+`
;})();
`},goog.loadModule=function(i){var e=goog.moduleLoaderState_;try{if(goog.moduleLoaderState_={moduleName:"",declareLegacyNamespace:!1,type:goog.ModuleType.GOOG},goog.isFunction(i))var o=i.call(void 0,{});else if(typeof i=="string")goog.useSafari10Workaround()&&(i=goog.workaroundSafari10EvalBug(i)),o=goog.loadModuleFromSource_.call(void 0,i);else throw Error("Invalid module definition");var d=goog.moduleLoaderState_.moduleName;if(typeof d=="string"&&d)goog.moduleLoaderState_.declareLegacyNamespace?goog.constructNamespace_(d,o):goog.SEAL_MODULE_EXPORTS&&Object.seal&&typeof o=="object"&&o!=null&&Object.seal(o),goog.loadedModules_[d]={exports:o,type:goog.ModuleType.GOOG,moduleId:goog.moduleLoaderState_.moduleName};else throw Error('Invalid module name "'+d+'"')}finally{goog.moduleLoaderState_=e}},goog.loadModuleFromSource_=function(a){return eval(a),{}},goog.normalizePath_=function(i){i=i.split("/");for(var e=0;e<i.length;)i[e]=="."?i.splice(e,1):e&&i[e]==".."&&i[e-1]&&i[e-1]!=".."?i.splice(--e,2):e++;return i.join("/")},goog.loadFileSync_=function(i){if(goog.global.CLOSURE_LOAD_FILE_SYNC)return goog.global.CLOSURE_LOAD_FILE_SYNC(i);try{var e=new goog.global.XMLHttpRequest;return e.open("get",i,!1),e.send(),e.status==0||e.status==200?e.responseText:null}catch{return null}},goog.transpile_=function(i,e,o){var d=goog.global.$jscomp;d||(goog.global.$jscomp=d={});var h=d.transpile;if(!h){var g=goog.basePath+goog.TRANSPILER,b=goog.loadFileSync_(g);if(b){if((function(){(0,eval)(b+`
//# sourceURL=`+g)}).call(goog.global),goog.global.$gwtExport&&goog.global.$gwtExport.$jscomp&&!goog.global.$gwtExport.$jscomp.transpile)throw Error('The transpiler did not properly export the "transpile" method. $gwtExport: '+JSON.stringify(goog.global.$gwtExport));goog.global.$jscomp.transpile=goog.global.$gwtExport.$jscomp.transpile,d=goog.global.$jscomp,h=d.transpile}}return h||(h=d.transpile=function($,j){return goog.logToConsole_(j+" requires transpilation but no transpiler was found."),$}),h(i,e,o)},goog.typeOf=function(i){var e=typeof i;if(e=="object")if(i){if(i instanceof Array)return"array";if(i instanceof Object)return e;var o=Object.prototype.toString.call(i);if(o=="[object Window]")return"object";if(o=="[object Array]"||typeof i.length=="number"&&typeof i.splice<"u"&&typeof i.propertyIsEnumerable<"u"&&!i.propertyIsEnumerable("splice"))return"array";if(o=="[object Function]"||typeof i.call<"u"&&typeof i.propertyIsEnumerable<"u"&&!i.propertyIsEnumerable("call"))return"function"}else return"null";else if(e=="function"&&typeof i.call>"u")return"object";return e},goog.isArray=function(i){return goog.typeOf(i)=="array"},goog.isArrayLike=function(i){var e=goog.typeOf(i);return e=="array"||e=="object"&&typeof i.length=="number"},goog.isDateLike=function(i){return goog.isObject(i)&&typeof i.getFullYear=="function"},goog.isFunction=function(i){return goog.typeOf(i)=="function"},goog.isObject=function(i){var e=typeof i;return e=="object"&&i!=null||e=="function"},goog.getUid=function(i){return Object.prototype.hasOwnProperty.call(i,goog.UID_PROPERTY_)&&i[goog.UID_PROPERTY_]||(i[goog.UID_PROPERTY_]=++goog.uidCounter_)},goog.hasUid=function(i){return!!i[goog.UID_PROPERTY_]},goog.removeUid=function(i){i!==null&&"removeAttribute"in i&&i.removeAttribute(goog.UID_PROPERTY_);try{delete i[goog.UID_PROPERTY_]}catch{}},goog.UID_PROPERTY_="closure_uid_"+(1e9*Math.random()>>>0),goog.uidCounter_=0,goog.getHashCode=goog.getUid,goog.removeHashCode=goog.removeUid,goog.cloneObject=function(i){var e=goog.typeOf(i);if(e=="object"||e=="array"){if(typeof i.clone=="function")return i.clone();e=e=="array"?[]:{};for(var o in i)e[o]=goog.cloneObject(i[o]);return e}return i},goog.bindNative_=function(i,e,o){return i.call.apply(i.bind,arguments)},goog.bindJs_=function(i,e,o){if(!i)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var h=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(h,d),i.apply(e,h)}}return function(){return i.apply(e,arguments)}},goog.bind=function(i,e,o){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?goog.bind=goog.bindNative_:goog.bind=goog.bindJs_,goog.bind.apply(null,arguments)},goog.partial=function(i,e){var o=Array.prototype.slice.call(arguments,1);return function(){var d=o.slice();return d.push.apply(d,arguments),i.apply(this,d)}},goog.mixin=function(i,e){for(var o in e)i[o]=e[o]},goog.now=goog.TRUSTED_SITE&&Date.now||function(){return+new Date},goog.globalEval=function(i){if(goog.global.execScript)goog.global.execScript(i,"JavaScript");else if(goog.global.eval){if(goog.evalWorksForGlobals_==null){try{goog.global.eval("var _evalTest_ = 1;")}catch{}if(typeof goog.global._evalTest_<"u"){try{delete goog.global._evalTest_}catch{}goog.evalWorksForGlobals_=!0}else goog.evalWorksForGlobals_=!1}if(goog.evalWorksForGlobals_)goog.global.eval(i);else{var e=goog.global.document,o=e.createElement("script");o.type="text/javascript",o.defer=!1,o.appendChild(e.createTextNode(i)),e.head.appendChild(o),e.head.removeChild(o)}}else throw Error("goog.globalEval not available")},goog.evalWorksForGlobals_=null,goog.getCssName=function(i,e){if(String(i).charAt(0)==".")throw Error('className passed in goog.getCssName must not start with ".". You passed: '+i);var o=function(h){return goog.cssNameMapping_[h]||h},d=function(h){h=h.split("-");for(var g=[],b=0;b<h.length;b++)g.push(o(h[b]));return g.join("-")};return d=goog.cssNameMapping_?goog.cssNameMappingStyle_=="BY_WHOLE"?o:d:function(h){return h},i=e?i+"-"+d(e):d(i),goog.global.CLOSURE_CSS_NAME_MAP_FN?goog.global.CLOSURE_CSS_NAME_MAP_FN(i):i},goog.setCssNameMapping=function(i,e){goog.cssNameMapping_=i,goog.cssNameMappingStyle_=e},goog.getMsg=function(i,e,o){return o&&o.html&&(i=i.replace(/</g,"&lt;")),e&&(i=i.replace(/\{\$([^}]+)}/g,function(d,h){return e!=null&&h in e?e[h]:d})),i},goog.getMsgWithFallback=function(i,e){return i},goog.exportSymbol=function(i,e,o){goog.exportPath_(i,e,o)},goog.exportProperty=function(i,e,o){i[e]=o},goog.inherits=function(i,e){function o(){}o.prototype=e.prototype,i.superClass_=e.prototype,i.prototype=new o,i.prototype.constructor=i,i.base=function(d,h,g){for(var b=Array(arguments.length-2),$=2;$<arguments.length;$++)b[$-2]=arguments[$];return e.prototype[h].apply(d,b)}},goog.scope=function(i){if(goog.isInModuleLoader_())throw Error("goog.scope is not supported within a module.");i.call(goog.global)},goog.defineClass=function(i,e){var o=e.constructor,d=e.statics;return o&&o!=Object.prototype.constructor||(o=function(){throw Error("cannot instantiate an interface (no constructor defined).")}),o=goog.defineClass.createSealingConstructor_(o,i),i&&goog.inherits(o,i),delete e.constructor,delete e.statics,goog.defineClass.applyProperties_(o.prototype,e),d!=null&&(d instanceof Function?d(o):goog.defineClass.applyProperties_(o,d)),o},goog.defineClass.SEAL_CLASS_INSTANCES=goog.DEBUG,goog.defineClass.createSealingConstructor_=function(i,e){if(!goog.defineClass.SEAL_CLASS_INSTANCES)return i;var o=!goog.defineClass.isUnsealable_(e),d=function(){var h=i.apply(this,arguments)||this;return h[goog.UID_PROPERTY_]=h[goog.UID_PROPERTY_],this.constructor===d&&o&&Object.seal instanceof Function&&Object.seal(h),h};return d},goog.defineClass.isUnsealable_=function(i){return i&&i.prototype&&i.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_]},goog.defineClass.OBJECT_PROTOTYPE_FIELDS_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),goog.defineClass.applyProperties_=function(i,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(i[o]=e[o]);for(var d=0;d<goog.defineClass.OBJECT_PROTOTYPE_FIELDS_.length;d++)o=goog.defineClass.OBJECT_PROTOTYPE_FIELDS_[d],Object.prototype.hasOwnProperty.call(e,o)&&(i[o]=e[o])},goog.tagUnsealableClass=function(i){},goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_="goog_defineClass_legacy_unsealable",goog.TRUSTED_TYPES_POLICY_NAME="",goog.identity_=function(i){return i},goog.createTrustedTypesPolicy=function(i){var e=null,o=goog.global.trustedTypes||goog.global.TrustedTypes;if(!o||!o.createPolicy)return e;try{e=o.createPolicy(i,{createHTML:goog.identity_,createScript:goog.identity_,createScriptURL:goog.identity_,createURL:goog.identity_})}catch(d){goog.logToConsole_(d.message)}return e},goog.TRUSTED_TYPES_POLICY_=goog.TRUSTED_TYPES_POLICY_NAME?goog.createTrustedTypesPolicy(goog.TRUSTED_TYPES_POLICY_NAME+"#base"):null,goog.object={},goog.object.is=function(i,e){return i===e?i!==0||1/i===1/e:i!==i&&e!==e},goog.object.forEach=function(i,e,o){for(var d in i)e.call(o,i[d],d,i)},goog.object.filter=function(i,e,o){var d={},h;for(h in i)e.call(o,i[h],h,i)&&(d[h]=i[h]);return d},goog.object.map=function(i,e,o){var d={},h;for(h in i)d[h]=e.call(o,i[h],h,i);return d},goog.object.some=function(i,e,o){for(var d in i)if(e.call(o,i[d],d,i))return!0;return!1},goog.object.every=function(i,e,o){for(var d in i)if(!e.call(o,i[d],d,i))return!1;return!0},goog.object.getCount=function(i){var e=0,o;for(o in i)e++;return e},goog.object.getAnyKey=function(i){for(var e in i)return e},goog.object.getAnyValue=function(i){for(var e in i)return i[e]},goog.object.contains=function(i,e){return goog.object.containsValue(i,e)},goog.object.getValues=function(i){var e=[],o=0,d;for(d in i)e[o++]=i[d];return e},goog.object.getKeys=function(i){var e=[],o=0,d;for(d in i)e[o++]=d;return e},goog.object.getValueByKeys=function(i,e){var o=goog.isArrayLike(e),d=o?e:arguments;for(o=o?0:1;o<d.length;o++){if(i==null)return;i=i[d[o]]}return i},goog.object.containsKey=function(i,e){return i!==null&&e in i},goog.object.containsValue=function(i,e){for(var o in i)if(i[o]==e)return!0;return!1},goog.object.findKey=function(i,e,o){for(var d in i)if(e.call(o,i[d],d,i))return d},goog.object.findValue=function(i,e,o){return(e=goog.object.findKey(i,e,o))&&i[e]},goog.object.isEmpty=function(i){for(var e in i)return!1;return!0},goog.object.clear=function(i){for(var e in i)delete i[e]},goog.object.remove=function(i,e){var o;return(o=e in i)&&delete i[e],o},goog.object.add=function(i,e,o){if(i!==null&&e in i)throw Error('The object already contains the key "'+e+'"');goog.object.set(i,e,o)},goog.object.get=function(i,e,o){return i!==null&&e in i?i[e]:o},goog.object.set=function(i,e,o){i[e]=o},goog.object.setIfUndefined=function(i,e,o){return e in i?i[e]:i[e]=o},goog.object.setWithReturnValueIfNotSet=function(i,e,o){return e in i?i[e]:(o=o(),i[e]=o)},goog.object.equals=function(i,e){for(var o in i)if(!(o in e)||i[o]!==e[o])return!1;for(var d in e)if(!(d in i))return!1;return!0},goog.object.clone=function(i){var e={},o;for(o in i)e[o]=i[o];return e},goog.object.unsafeClone=function(i){var e=goog.typeOf(i);if(e=="object"||e=="array"){if(goog.isFunction(i.clone))return i.clone();e=e=="array"?[]:{};for(var o in i)e[o]=goog.object.unsafeClone(i[o]);return e}return i},goog.object.transpose=function(i){var e={},o;for(o in i)e[i[o]]=o;return e},goog.object.PROTOTYPE_FIELDS_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),goog.object.extend=function(i,e){for(var o,d,h=1;h<arguments.length;h++){d=arguments[h];for(o in d)i[o]=d[o];for(var g=0;g<goog.object.PROTOTYPE_FIELDS_.length;g++)o=goog.object.PROTOTYPE_FIELDS_[g],Object.prototype.hasOwnProperty.call(d,o)&&(i[o]=d[o])}},goog.object.create=function(i){var e=arguments.length;if(e==1&&Array.isArray(arguments[0]))return goog.object.create.apply(null,arguments[0]);if(e%2)throw Error("Uneven number of arguments");for(var o={},d=0;d<e;d+=2)o[arguments[d]]=arguments[d+1];return o},goog.object.createSet=function(i){var e=arguments.length;if(e==1&&Array.isArray(arguments[0]))return goog.object.createSet.apply(null,arguments[0]);for(var o={},d=0;d<e;d++)o[arguments[d]]=!0;return o},goog.object.createImmutableView=function(i){var e=i;return Object.isFrozen&&!Object.isFrozen(i)&&(e=Object.create(i),Object.freeze(e)),e},goog.object.isImmutableView=function(i){return!!Object.isFrozen&&Object.isFrozen(i)},goog.object.getAllPropertyNames=function(i,e,o){if(!i)return[];if(!Object.getOwnPropertyNames||!Object.getPrototypeOf)return goog.object.getKeys(i);for(var d={};i&&(i!==Object.prototype||e)&&(i!==Function.prototype||o);){for(var h=Object.getOwnPropertyNames(i),g=0;g<h.length;g++)d[h[g]]=!0;i=Object.getPrototypeOf(i)}return goog.object.getKeys(d)},goog.object.getSuperClass=function(i){return(i=Object.getPrototypeOf(i.prototype))&&i.constructor};var jspb={asserts:{}};jspb.asserts.doAssertFailure=function(i,e,o,d){var h="Assertion failed";if(o){h+=": "+o;var g=d}else i&&(h+=": "+i,g=e);throw Error(""+h,g||[])},jspb.asserts.assert=function(i,e,o){for(var d=[],h=2;h<arguments.length;++h)d[h-2]=arguments[h];return i||jspb.asserts.doAssertFailure("",null,e,d),i},jspb.asserts.assertString=function(i,e,o){for(var d=[],h=2;h<arguments.length;++h)d[h-2]=arguments[h];return typeof i!="string"&&jspb.asserts.doAssertFailure("Expected string but got %s: %s.",[goog.typeOf(i),i],e,d),i},jspb.asserts.assertArray=function(i,e,o){for(var d=[],h=2;h<arguments.length;++h)d[h-2]=arguments[h];return Array.isArray(i)||jspb.asserts.doAssertFailure("Expected array but got %s: %s.",[goog.typeOf(i),i],e,d),i},jspb.asserts.fail=function(i,e){for(var o=[],d=1;d<arguments.length;++d)o[d-1]=arguments[d];throw Error("Failure"+(i?": "+i:""),o)},jspb.asserts.assertInstanceof=function(i,e,o,d){for(var h=[],g=3;g<arguments.length;++g)h[g-3]=arguments[g];return i instanceof e||jspb.asserts.doAssertFailure("Expected instanceof %s but got %s.",[jspb.asserts.getType(e),jspb.asserts.getType(i)],o,h),i},jspb.asserts.getType=function(i){return i instanceof Function?i.displayName||i.name||"unknown type name":i instanceof Object?i.constructor.displayName||i.constructor.name||Object.prototype.toString.call(i):i===null?"null":typeof i},jspb.BinaryConstants={},jspb.ConstBinaryMessage=function(){},jspb.BinaryMessage=function(){},jspb.BinaryConstants.FieldType={INVALID:-1,DOUBLE:1,FLOAT:2,INT64:3,UINT64:4,INT32:5,FIXED64:6,FIXED32:7,BOOL:8,STRING:9,GROUP:10,MESSAGE:11,BYTES:12,UINT32:13,ENUM:14,SFIXED32:15,SFIXED64:16,SINT32:17,SINT64:18,FHASH64:30,VHASH64:31},jspb.BinaryConstants.WireType={INVALID:-1,VARINT:0,FIXED64:1,DELIMITED:2,START_GROUP:3,END_GROUP:4,FIXED32:5},jspb.BinaryConstants.FieldTypeToWireType=function(i){var e=jspb.BinaryConstants.FieldType,o=jspb.BinaryConstants.WireType;switch(i){case e.INT32:case e.INT64:case e.UINT32:case e.UINT64:case e.SINT32:case e.SINT64:case e.BOOL:case e.ENUM:case e.VHASH64:return o.VARINT;case e.DOUBLE:case e.FIXED64:case e.SFIXED64:case e.FHASH64:return o.FIXED64;case e.STRING:case e.MESSAGE:case e.BYTES:return o.DELIMITED;case e.FLOAT:case e.FIXED32:case e.SFIXED32:return o.FIXED32;default:return o.INVALID}},jspb.BinaryConstants.INVALID_FIELD_NUMBER=-1,jspb.BinaryConstants.FLOAT32_EPS=1401298464324817e-60,jspb.BinaryConstants.FLOAT32_MIN=11754943508222875e-54,jspb.BinaryConstants.FLOAT32_MAX=34028234663852886e22,jspb.BinaryConstants.FLOAT64_EPS=5e-324,jspb.BinaryConstants.FLOAT64_MIN=22250738585072014e-324,jspb.BinaryConstants.FLOAT64_MAX=17976931348623157e292,jspb.BinaryConstants.TWO_TO_20=1048576,jspb.BinaryConstants.TWO_TO_23=8388608,jspb.BinaryConstants.TWO_TO_31=2147483648,jspb.BinaryConstants.TWO_TO_32=4294967296,jspb.BinaryConstants.TWO_TO_52=4503599627370496,jspb.BinaryConstants.TWO_TO_63=9223372036854776e3,jspb.BinaryConstants.TWO_TO_64=18446744073709552e3,jspb.BinaryConstants.ZERO_HASH="\0\0\0\0\0\0\0\0",goog.debug={},goog.debug.Error=function(i){if(Error.captureStackTrace)Error.captureStackTrace(this,goog.debug.Error);else{var e=Error().stack;e&&(this.stack=e)}i&&(this.message=String(i)),this.reportErrorToServer=!0},goog.inherits(goog.debug.Error,Error),goog.debug.Error.prototype.name="CustomError",goog.dom={},goog.dom.NodeType={ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12},goog.asserts={},goog.asserts.ENABLE_ASSERTS=goog.DEBUG,goog.asserts.AssertionError=function(i,e){goog.debug.Error.call(this,goog.asserts.subs_(i,e)),this.messagePattern=i},goog.inherits(goog.asserts.AssertionError,goog.debug.Error),goog.asserts.AssertionError.prototype.name="AssertionError",goog.asserts.DEFAULT_ERROR_HANDLER=function(i){throw i},goog.asserts.errorHandler_=goog.asserts.DEFAULT_ERROR_HANDLER,goog.asserts.subs_=function(i,e){i=i.split("%s");for(var o="",d=i.length-1,h=0;h<d;h++)o+=i[h]+(h<e.length?e[h]:"%s");return o+i[d]},goog.asserts.doAssertFailure_=function(i,e,o,d){var h="Assertion failed";if(o){h+=": "+o;var g=d}else i&&(h+=": "+i,g=e);i=new goog.asserts.AssertionError(""+h,g||[]),goog.asserts.errorHandler_(i)},goog.asserts.setErrorHandler=function(i){goog.asserts.ENABLE_ASSERTS&&(goog.asserts.errorHandler_=i)},goog.asserts.assert=function(i,e,o){return goog.asserts.ENABLE_ASSERTS&&!i&&goog.asserts.doAssertFailure_("",null,e,Array.prototype.slice.call(arguments,2)),i},goog.asserts.assertExists=function(i,e,o){return goog.asserts.ENABLE_ASSERTS&&i==null&&goog.asserts.doAssertFailure_("Expected to exist: %s.",[i],e,Array.prototype.slice.call(arguments,2)),i},goog.asserts.fail=function(i,e){goog.asserts.ENABLE_ASSERTS&&goog.asserts.errorHandler_(new goog.asserts.AssertionError("Failure"+(i?": "+i:""),Array.prototype.slice.call(arguments,1)))},goog.asserts.assertNumber=function(i,e,o){return goog.asserts.ENABLE_ASSERTS&&typeof i!="number"&&goog.asserts.doAssertFailure_("Expected number but got %s: %s.",[goog.typeOf(i),i],e,Array.prototype.slice.call(arguments,2)),i},goog.asserts.assertString=function(i,e,o){return goog.asserts.ENABLE_ASSERTS&&typeof i!="string"&&goog.asserts.doAssertFailure_("Expected string but got %s: %s.",[goog.typeOf(i),i],e,Array.prototype.slice.call(arguments,2)),i},goog.asserts.assertFunction=function(i,e,o){return goog.asserts.ENABLE_ASSERTS&&!goog.isFunction(i)&&goog.asserts.doAssertFailure_("Expected function but got %s: %s.",[goog.typeOf(i),i],e,Array.prototype.slice.call(arguments,2)),i},goog.asserts.assertObject=function(i,e,o){return goog.asserts.ENABLE_ASSERTS&&!goog.isObject(i)&&goog.asserts.doAssertFailure_("Expected object but got %s: %s.",[goog.typeOf(i),i],e,Array.prototype.slice.call(arguments,2)),i},goog.asserts.assertArray=function(i,e,o){return goog.asserts.ENABLE_ASSERTS&&!Array.isArray(i)&&goog.asserts.doAssertFailure_("Expected array but got %s: %s.",[goog.typeOf(i),i],e,Array.prototype.slice.call(arguments,2)),i},goog.asserts.assertBoolean=function(i,e,o){return goog.asserts.ENABLE_ASSERTS&&typeof i!="boolean"&&goog.asserts.doAssertFailure_("Expected boolean but got %s: %s.",[goog.typeOf(i),i],e,Array.prototype.slice.call(arguments,2)),i},goog.asserts.assertElement=function(i,e,o){return!goog.asserts.ENABLE_ASSERTS||goog.isObject(i)&&i.nodeType==goog.dom.NodeType.ELEMENT||goog.asserts.doAssertFailure_("Expected Element but got %s: %s.",[goog.typeOf(i),i],e,Array.prototype.slice.call(arguments,2)),i},goog.asserts.assertInstanceof=function(i,e,o,d){return!goog.asserts.ENABLE_ASSERTS||i instanceof e||goog.asserts.doAssertFailure_("Expected instanceof %s but got %s.",[goog.asserts.getType_(e),goog.asserts.getType_(i)],o,Array.prototype.slice.call(arguments,3)),i},goog.asserts.assertFinite=function(i,e,o){return!goog.asserts.ENABLE_ASSERTS||typeof i=="number"&&isFinite(i)||goog.asserts.doAssertFailure_("Expected %s to be a finite number but it is not.",[i],e,Array.prototype.slice.call(arguments,2)),i},goog.asserts.assertObjectPrototypeIsIntact=function(){for(var i in Object.prototype)goog.asserts.fail(i+" should not be enumerable in Object.prototype.")},goog.asserts.getType_=function(i){return i instanceof Function?i.displayName||i.name||"unknown type name":i instanceof Object?i.constructor.displayName||i.constructor.name||Object.prototype.toString.call(i):i===null?"null":typeof i},goog.array={},goog.NATIVE_ARRAY_PROTOTYPES=goog.TRUSTED_SITE,goog.array.ASSUME_NATIVE_FUNCTIONS=2012<goog.FEATURESET_YEAR,goog.array.peek=function(i){return i[i.length-1]},goog.array.last=goog.array.peek,goog.array.indexOf=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.indexOf)?function(i,e,o){return goog.asserts.assert(i.length!=null),Array.prototype.indexOf.call(i,e,o)}:function(i,e,o){if(o=o==null?0:0>o?Math.max(0,i.length+o):o,typeof i=="string")return typeof e!="string"||e.length!=1?-1:i.indexOf(e,o);for(;o<i.length;o++)if(o in i&&i[o]===e)return o;return-1},goog.array.lastIndexOf=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.lastIndexOf)?function(i,e,o){return goog.asserts.assert(i.length!=null),Array.prototype.lastIndexOf.call(i,e,o??i.length-1)}:function(i,e,o){if(o=o??i.length-1,0>o&&(o=Math.max(0,i.length+o)),typeof i=="string")return typeof e!="string"||e.length!=1?-1:i.lastIndexOf(e,o);for(;0<=o;o--)if(o in i&&i[o]===e)return o;return-1},goog.array.forEach=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.forEach)?function(i,e,o){goog.asserts.assert(i.length!=null),Array.prototype.forEach.call(i,e,o)}:function(i,e,o){for(var d=i.length,h=typeof i=="string"?i.split(""):i,g=0;g<d;g++)g in h&&e.call(o,h[g],g,i)},goog.array.forEachRight=function(i,e,o){var d=i.length,h=typeof i=="string"?i.split(""):i;for(--d;0<=d;--d)d in h&&e.call(o,h[d],d,i)},goog.array.filter=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.filter)?function(i,e,o){return goog.asserts.assert(i.length!=null),Array.prototype.filter.call(i,e,o)}:function(i,e,o){for(var d=i.length,h=[],g=0,b=typeof i=="string"?i.split(""):i,$=0;$<d;$++)if($ in b){var j=b[$];e.call(o,j,$,i)&&(h[g++]=j)}return h},goog.array.map=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.map)?function(i,e,o){return goog.asserts.assert(i.length!=null),Array.prototype.map.call(i,e,o)}:function(i,e,o){for(var d=i.length,h=Array(d),g=typeof i=="string"?i.split(""):i,b=0;b<d;b++)b in g&&(h[b]=e.call(o,g[b],b,i));return h},goog.array.reduce=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.reduce)?function(i,e,o,d){return goog.asserts.assert(i.length!=null),d&&(e=goog.bind(e,d)),Array.prototype.reduce.call(i,e,o)}:function(i,e,o,d){var h=o;return goog.array.forEach(i,function(g,b){h=e.call(d,h,g,b,i)}),h},goog.array.reduceRight=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.reduceRight)?function(i,e,o,d){return goog.asserts.assert(i.length!=null),goog.asserts.assert(e!=null),d&&(e=goog.bind(e,d)),Array.prototype.reduceRight.call(i,e,o)}:function(i,e,o,d){var h=o;return goog.array.forEachRight(i,function(g,b){h=e.call(d,h,g,b,i)}),h},goog.array.some=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.some)?function(i,e,o){return goog.asserts.assert(i.length!=null),Array.prototype.some.call(i,e,o)}:function(i,e,o){for(var d=i.length,h=typeof i=="string"?i.split(""):i,g=0;g<d;g++)if(g in h&&e.call(o,h[g],g,i))return!0;return!1},goog.array.every=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.every)?function(i,e,o){return goog.asserts.assert(i.length!=null),Array.prototype.every.call(i,e,o)}:function(i,e,o){for(var d=i.length,h=typeof i=="string"?i.split(""):i,g=0;g<d;g++)if(g in h&&!e.call(o,h[g],g,i))return!1;return!0},goog.array.count=function(i,e,o){var d=0;return goog.array.forEach(i,function(h,g,b){e.call(o,h,g,b)&&++d},o),d},goog.array.find=function(i,e,o){return e=goog.array.findIndex(i,e,o),0>e?null:typeof i=="string"?i.charAt(e):i[e]},goog.array.findIndex=function(i,e,o){for(var d=i.length,h=typeof i=="string"?i.split(""):i,g=0;g<d;g++)if(g in h&&e.call(o,h[g],g,i))return g;return-1},goog.array.findRight=function(i,e,o){return e=goog.array.findIndexRight(i,e,o),0>e?null:typeof i=="string"?i.charAt(e):i[e]},goog.array.findIndexRight=function(i,e,o){var d=i.length,h=typeof i=="string"?i.split(""):i;for(--d;0<=d;d--)if(d in h&&e.call(o,h[d],d,i))return d;return-1},goog.array.contains=function(i,e){return 0<=goog.array.indexOf(i,e)},goog.array.isEmpty=function(i){return i.length==0},goog.array.clear=function(i){if(!Array.isArray(i))for(var e=i.length-1;0<=e;e--)delete i[e];i.length=0},goog.array.insert=function(i,e){goog.array.contains(i,e)||i.push(e)},goog.array.insertAt=function(i,e,o){goog.array.splice(i,o,0,e)},goog.array.insertArrayAt=function(i,e,o){goog.partial(goog.array.splice,i,o,0).apply(null,e)},goog.array.insertBefore=function(i,e,o){var d;arguments.length==2||0>(d=goog.array.indexOf(i,o))?i.push(e):goog.array.insertAt(i,e,d)},goog.array.remove=function(i,e){e=goog.array.indexOf(i,e);var o;return(o=0<=e)&&goog.array.removeAt(i,e),o},goog.array.removeLast=function(i,e){return e=goog.array.lastIndexOf(i,e),0<=e?(goog.array.removeAt(i,e),!0):!1},goog.array.removeAt=function(i,e){return goog.asserts.assert(i.length!=null),Array.prototype.splice.call(i,e,1).length==1},goog.array.removeIf=function(i,e,o){return e=goog.array.findIndex(i,e,o),0<=e?(goog.array.removeAt(i,e),!0):!1},goog.array.removeAllIf=function(i,e,o){var d=0;return goog.array.forEachRight(i,function(h,g){e.call(o,h,g,i)&&goog.array.removeAt(i,g)&&d++}),d},goog.array.concat=function(i){return Array.prototype.concat.apply([],arguments)},goog.array.join=function(i){return Array.prototype.concat.apply([],arguments)},goog.array.toArray=function(i){var e=i.length;if(0<e){for(var o=Array(e),d=0;d<e;d++)o[d]=i[d];return o}return[]},goog.array.clone=goog.array.toArray,goog.array.extend=function(i,e){for(var o=1;o<arguments.length;o++){var d=arguments[o];if(goog.isArrayLike(d)){var h=i.length||0,g=d.length||0;i.length=h+g;for(var b=0;b<g;b++)i[h+b]=d[b]}else i.push(d)}},goog.array.splice=function(i,e,o,d){return goog.asserts.assert(i.length!=null),Array.prototype.splice.apply(i,goog.array.slice(arguments,1))},goog.array.slice=function(i,e,o){return goog.asserts.assert(i.length!=null),2>=arguments.length?Array.prototype.slice.call(i,e):Array.prototype.slice.call(i,e,o)},goog.array.removeDuplicates=function(i,e,o){e=e||i;var d=function(j){return goog.isObject(j)?"o"+goog.getUid(j):(typeof j).charAt(0)+j};o=o||d,d={};for(var h=0,g=0;g<i.length;){var b=i[g++],$=o(b);Object.prototype.hasOwnProperty.call(d,$)||(d[$]=!0,e[h++]=b)}e.length=h},goog.array.binarySearch=function(i,e,o){return goog.array.binarySearch_(i,o||goog.array.defaultCompare,!1,e)},goog.array.binarySelect=function(i,e,o){return goog.array.binarySearch_(i,e,!0,void 0,o)},goog.array.binarySearch_=function(i,e,o,d,h){for(var g=0,b=i.length,$;g<b;){var j=g+(b-g>>>1),et=o?e.call(h,i[j],j,i):e(d,i[j]);0<et?g=j+1:(b=j,$=!et)}return $?g:-g-1},goog.array.sort=function(i,e){i.sort(e||goog.array.defaultCompare)},goog.array.stableSort=function(i,e){for(var o=Array(i.length),d=0;d<i.length;d++)o[d]={index:d,value:i[d]};var h=e||goog.array.defaultCompare;for(goog.array.sort(o,function(g,b){return h(g.value,b.value)||g.index-b.index}),d=0;d<i.length;d++)i[d]=o[d].value},goog.array.sortByKey=function(i,e,o){var d=o||goog.array.defaultCompare;goog.array.sort(i,function(h,g){return d(e(h),e(g))})},goog.array.sortObjectsByKey=function(i,e,o){goog.array.sortByKey(i,function(d){return d[e]},o)},goog.array.isSorted=function(i,e,o){e=e||goog.array.defaultCompare;for(var d=1;d<i.length;d++){var h=e(i[d-1],i[d]);if(0<h||h==0&&o)return!1}return!0},goog.array.equals=function(i,e,o){if(!goog.isArrayLike(i)||!goog.isArrayLike(e)||i.length!=e.length)return!1;var d=i.length;o=o||goog.array.defaultCompareEquality;for(var h=0;h<d;h++)if(!o(i[h],e[h]))return!1;return!0},goog.array.compare3=function(i,e,o){o=o||goog.array.defaultCompare;for(var d=Math.min(i.length,e.length),h=0;h<d;h++){var g=o(i[h],e[h]);if(g!=0)return g}return goog.array.defaultCompare(i.length,e.length)},goog.array.defaultCompare=function(i,e){return i>e?1:i<e?-1:0},goog.array.inverseDefaultCompare=function(i,e){return-goog.array.defaultCompare(i,e)},goog.array.defaultCompareEquality=function(i,e){return i===e},goog.array.binaryInsert=function(i,e,o){return o=goog.array.binarySearch(i,e,o),0>o?(goog.array.insertAt(i,e,-(o+1)),!0):!1},goog.array.binaryRemove=function(i,e,o){return e=goog.array.binarySearch(i,e,o),0<=e?goog.array.removeAt(i,e):!1},goog.array.bucket=function(i,e,o){for(var d={},h=0;h<i.length;h++){var g=i[h],b=e.call(o,g,h,i);b!==void 0&&(d[b]||(d[b]=[])).push(g)}return d},goog.array.toObject=function(i,e,o){var d={};return goog.array.forEach(i,function(h,g){d[e.call(o,h,g,i)]=h}),d},goog.array.range=function(i,e,o){var d=[],h=0,g=i;if(o=o||1,e!==void 0&&(h=i,g=e),0>o*(g-h))return[];if(0<o)for(i=h;i<g;i+=o)d.push(i);else for(i=h;i>g;i+=o)d.push(i);return d},goog.array.repeat=function(i,e){for(var o=[],d=0;d<e;d++)o[d]=i;return o},goog.array.flatten=function(i){for(var e=[],o=0;o<arguments.length;o++){var d=arguments[o];if(Array.isArray(d))for(var h=0;h<d.length;h+=8192){var g=goog.array.slice(d,h,h+8192);g=goog.array.flatten.apply(null,g);for(var b=0;b<g.length;b++)e.push(g[b])}else e.push(d)}return e},goog.array.rotate=function(i,e){return goog.asserts.assert(i.length!=null),i.length&&(e%=i.length,0<e?Array.prototype.unshift.apply(i,i.splice(-e,e)):0>e&&Array.prototype.push.apply(i,i.splice(0,-e))),i},goog.array.moveItem=function(i,e,o){goog.asserts.assert(0<=e&&e<i.length),goog.asserts.assert(0<=o&&o<i.length),e=Array.prototype.splice.call(i,e,1),Array.prototype.splice.call(i,o,0,e[0])},goog.array.zip=function(i){if(!arguments.length)return[];for(var e=[],o=arguments[0].length,d=1;d<arguments.length;d++)arguments[d].length<o&&(o=arguments[d].length);for(d=0;d<o;d++){for(var h=[],g=0;g<arguments.length;g++)h.push(arguments[g][d]);e.push(h)}return e},goog.array.shuffle=function(i,e){e=e||Math.random;for(var o=i.length-1;0<o;o--){var d=Math.floor(e()*(o+1)),h=i[o];i[o]=i[d],i[d]=h}},goog.array.copyByIndex=function(i,e){var o=[];return goog.array.forEach(e,function(d){o.push(i[d])}),o},goog.array.concatMap=function(i,e,o){return goog.array.concat.apply([],goog.array.map(i,e,o))},goog.crypt={},goog.crypt.stringToByteArray=function(i){for(var e=[],o=0,d=0;d<i.length;d++){var h=i.charCodeAt(d);255<h&&(e[o++]=h&255,h>>=8),e[o++]=h}return e},goog.crypt.byteArrayToString=function(i){if(8192>=i.length)return String.fromCharCode.apply(null,i);for(var e="",o=0;o<i.length;o+=8192){var d=goog.array.slice(i,o,o+8192);e+=String.fromCharCode.apply(null,d)}return e},goog.crypt.byteArrayToHex=function(i,e){return goog.array.map(i,function(o){return o=o.toString(16),1<o.length?o:"0"+o}).join(e||"")},goog.crypt.hexToByteArray=function(i){goog.asserts.assert(i.length%2==0,"Key string length must be multiple of 2");for(var e=[],o=0;o<i.length;o+=2)e.push(parseInt(i.substring(o,o+2),16));return e},goog.crypt.stringToUtf8ByteArray=function(i){for(var e=[],o=0,d=0;d<i.length;d++){var h=i.charCodeAt(d);128>h?e[o++]=h:(2048>h?e[o++]=h>>6|192:((h&64512)==55296&&d+1<i.length&&(i.charCodeAt(d+1)&64512)==56320?(h=65536+((h&1023)<<10)+(i.charCodeAt(++d)&1023),e[o++]=h>>18|240,e[o++]=h>>12&63|128):e[o++]=h>>12|224,e[o++]=h>>6&63|128),e[o++]=h&63|128)}return e},goog.crypt.utf8ByteArrayToString=function(i){for(var e=[],o=0,d=0;o<i.length;){var h=i[o++];if(128>h)e[d++]=String.fromCharCode(h);else if(191<h&&224>h){var g=i[o++];e[d++]=String.fromCharCode((h&31)<<6|g&63)}else if(239<h&&365>h){g=i[o++];var b=i[o++],$=i[o++];h=((h&7)<<18|(g&63)<<12|(b&63)<<6|$&63)-65536,e[d++]=String.fromCharCode(55296+(h>>10)),e[d++]=String.fromCharCode(56320+(h&1023))}else g=i[o++],b=i[o++],e[d++]=String.fromCharCode((h&15)<<12|(g&63)<<6|b&63)}return e.join("")},goog.crypt.xorByteArray=function(i,e){goog.asserts.assert(i.length==e.length,"XOR array lengths must match");for(var o=[],d=0;d<i.length;d++)o.push(i[d]^e[d]);return o},goog.dom.asserts={},goog.dom.asserts.assertIsLocation=function(i){if(goog.asserts.ENABLE_ASSERTS){var e=goog.dom.asserts.getWindow_(i);e&&(!i||!(i instanceof e.Location)&&i instanceof e.Element)&&goog.asserts.fail("Argument is not a Location (or a non-Element mock); got: %s",goog.dom.asserts.debugStringForType_(i))}return i},goog.dom.asserts.assertIsElementType_=function(i,e){if(goog.asserts.ENABLE_ASSERTS){var o=goog.dom.asserts.getWindow_(i);o&&typeof o[e]<"u"&&(i&&(i instanceof o[e]||!(i instanceof o.Location||i instanceof o.Element))||goog.asserts.fail("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,goog.dom.asserts.debugStringForType_(i)))}return i},goog.dom.asserts.assertIsHTMLAnchorElement=function(i){return goog.dom.asserts.assertIsElementType_(i,"HTMLAnchorElement")},goog.dom.asserts.assertIsHTMLButtonElement=function(i){return goog.dom.asserts.assertIsElementType_(i,"HTMLButtonElement")},goog.dom.asserts.assertIsHTMLLinkElement=function(i){return goog.dom.asserts.assertIsElementType_(i,"HTMLLinkElement")},goog.dom.asserts.assertIsHTMLImageElement=function(i){return goog.dom.asserts.assertIsElementType_(i,"HTMLImageElement")},goog.dom.asserts.assertIsHTMLAudioElement=function(i){return goog.dom.asserts.assertIsElementType_(i,"HTMLAudioElement")},goog.dom.asserts.assertIsHTMLVideoElement=function(i){return goog.dom.asserts.assertIsElementType_(i,"HTMLVideoElement")},goog.dom.asserts.assertIsHTMLInputElement=function(i){return goog.dom.asserts.assertIsElementType_(i,"HTMLInputElement")},goog.dom.asserts.assertIsHTMLTextAreaElement=function(i){return goog.dom.asserts.assertIsElementType_(i,"HTMLTextAreaElement")},goog.dom.asserts.assertIsHTMLCanvasElement=function(i){return goog.dom.asserts.assertIsElementType_(i,"HTMLCanvasElement")},goog.dom.asserts.assertIsHTMLEmbedElement=function(i){return goog.dom.asserts.assertIsElementType_(i,"HTMLEmbedElement")},goog.dom.asserts.assertIsHTMLFormElement=function(i){return goog.dom.asserts.assertIsElementType_(i,"HTMLFormElement")},goog.dom.asserts.assertIsHTMLFrameElement=function(i){return goog.dom.asserts.assertIsElementType_(i,"HTMLFrameElement")},goog.dom.asserts.assertIsHTMLIFrameElement=function(i){return goog.dom.asserts.assertIsElementType_(i,"HTMLIFrameElement")},goog.dom.asserts.assertIsHTMLObjectElement=function(i){return goog.dom.asserts.assertIsElementType_(i,"HTMLObjectElement")},goog.dom.asserts.assertIsHTMLScriptElement=function(i){return goog.dom.asserts.assertIsElementType_(i,"HTMLScriptElement")},goog.dom.asserts.debugStringForType_=function(i){if(goog.isObject(i))try{return i.constructor.displayName||i.constructor.name||Object.prototype.toString.call(i)}catch{return"<object could not be stringified>"}else return i===void 0?"undefined":i===null?"null":typeof i},goog.dom.asserts.getWindow_=function(i){try{var e=i&&i.ownerDocument,o=e&&(e.defaultView||e.parentWindow);if(o=o||goog.global,o.Element&&o.Location)return o}catch{}return null},goog.functions={},goog.functions.constant=function(i){return function(){return i}},goog.functions.FALSE=function(){return!1},goog.functions.TRUE=function(){return!0},goog.functions.NULL=function(){return null},goog.functions.identity=function(i,e){return i},goog.functions.error=function(i){return function(){throw Error(i)}},goog.functions.fail=function(i){return function(){throw i}},goog.functions.lock=function(i,e){return e=e||0,function(){return i.apply(this,Array.prototype.slice.call(arguments,0,e))}},goog.functions.nth=function(i){return function(){return arguments[i]}},goog.functions.partialRight=function(i,e){var o=Array.prototype.slice.call(arguments,1);return function(){var d=Array.prototype.slice.call(arguments);return d.push.apply(d,o),i.apply(this,d)}},goog.functions.withReturnValue=function(i,e){return goog.functions.sequence(i,goog.functions.constant(e))},goog.functions.equalTo=function(i,e){return function(o){return e?i==o:i===o}},goog.functions.compose=function(i,e){var o=arguments,d=o.length;return function(){var h;d&&(h=o[d-1].apply(this,arguments));for(var g=d-2;0<=g;g--)h=o[g].call(this,h);return h}},goog.functions.sequence=function(i){var e=arguments,o=e.length;return function(){for(var d,h=0;h<o;h++)d=e[h].apply(this,arguments);return d}},goog.functions.and=function(i){var e=arguments,o=e.length;return function(){for(var d=0;d<o;d++)if(!e[d].apply(this,arguments))return!1;return!0}},goog.functions.or=function(i){var e=arguments,o=e.length;return function(){for(var d=0;d<o;d++)if(e[d].apply(this,arguments))return!0;return!1}},goog.functions.not=function(i){return function(){return!i.apply(this,arguments)}},goog.functions.create=function(i,e){var o=function(){};return o.prototype=i.prototype,o=new o,i.apply(o,Array.prototype.slice.call(arguments,1)),o},goog.functions.CACHE_RETURN_VALUE=!0,goog.functions.cacheReturnValue=function(i){var e=!1,o;return function(){return goog.functions.CACHE_RETURN_VALUE?(e||(o=i(),e=!0),o):i()}},goog.functions.once=function(i){var e=i;return function(){if(e){var o=e;e=null,o()}}},goog.functions.debounce=function(i,e,o){var d=0;return function(h){goog.global.clearTimeout(d);var g=arguments;d=goog.global.setTimeout(function(){i.apply(o,g)},e)}},goog.functions.throttle=function(i,e,o){var d=0,h=!1,g=[],b=function(){d=0,h&&(h=!1,$())},$=function(){d=goog.global.setTimeout(b,e),i.apply(o,g)};return function(j){g=arguments,d?h=!0:$()}},goog.functions.rateLimit=function(i,e,o){var d=0,h=function(){d=0};return function(g){d||(d=goog.global.setTimeout(h,e),i.apply(o,arguments))}},goog.dom.HtmlElement=function(){},goog.dom.TagName=function(i){this.tagName_=i},goog.dom.TagName.prototype.toString=function(){return this.tagName_},goog.dom.TagName.A=new goog.dom.TagName("A"),goog.dom.TagName.ABBR=new goog.dom.TagName("ABBR"),goog.dom.TagName.ACRONYM=new goog.dom.TagName("ACRONYM"),goog.dom.TagName.ADDRESS=new goog.dom.TagName("ADDRESS"),goog.dom.TagName.APPLET=new goog.dom.TagName("APPLET"),goog.dom.TagName.AREA=new goog.dom.TagName("AREA"),goog.dom.TagName.ARTICLE=new goog.dom.TagName("ARTICLE"),goog.dom.TagName.ASIDE=new goog.dom.TagName("ASIDE"),goog.dom.TagName.AUDIO=new goog.dom.TagName("AUDIO"),goog.dom.TagName.B=new goog.dom.TagName("B"),goog.dom.TagName.BASE=new goog.dom.TagName("BASE"),goog.dom.TagName.BASEFONT=new goog.dom.TagName("BASEFONT"),goog.dom.TagName.BDI=new goog.dom.TagName("BDI"),goog.dom.TagName.BDO=new goog.dom.TagName("BDO"),goog.dom.TagName.BIG=new goog.dom.TagName("BIG"),goog.dom.TagName.BLOCKQUOTE=new goog.dom.TagName("BLOCKQUOTE"),goog.dom.TagName.BODY=new goog.dom.TagName("BODY"),goog.dom.TagName.BR=new goog.dom.TagName("BR"),goog.dom.TagName.BUTTON=new goog.dom.TagName("BUTTON"),goog.dom.TagName.CANVAS=new goog.dom.TagName("CANVAS"),goog.dom.TagName.CAPTION=new goog.dom.TagName("CAPTION"),goog.dom.TagName.CENTER=new goog.dom.TagName("CENTER"),goog.dom.TagName.CITE=new goog.dom.TagName("CITE"),goog.dom.TagName.CODE=new goog.dom.TagName("CODE"),goog.dom.TagName.COL=new goog.dom.TagName("COL"),goog.dom.TagName.COLGROUP=new goog.dom.TagName("COLGROUP"),goog.dom.TagName.COMMAND=new goog.dom.TagName("COMMAND"),goog.dom.TagName.DATA=new goog.dom.TagName("DATA"),goog.dom.TagName.DATALIST=new goog.dom.TagName("DATALIST"),goog.dom.TagName.DD=new goog.dom.TagName("DD"),goog.dom.TagName.DEL=new goog.dom.TagName("DEL"),goog.dom.TagName.DETAILS=new goog.dom.TagName("DETAILS"),goog.dom.TagName.DFN=new goog.dom.TagName("DFN"),goog.dom.TagName.DIALOG=new goog.dom.TagName("DIALOG"),goog.dom.TagName.DIR=new goog.dom.TagName("DIR"),goog.dom.TagName.DIV=new goog.dom.TagName("DIV"),goog.dom.TagName.DL=new goog.dom.TagName("DL"),goog.dom.TagName.DT=new goog.dom.TagName("DT"),goog.dom.TagName.EM=new goog.dom.TagName("EM"),goog.dom.TagName.EMBED=new goog.dom.TagName("EMBED"),goog.dom.TagName.FIELDSET=new goog.dom.TagName("FIELDSET"),goog.dom.TagName.FIGCAPTION=new goog.dom.TagName("FIGCAPTION"),goog.dom.TagName.FIGURE=new goog.dom.TagName("FIGURE"),goog.dom.TagName.FONT=new goog.dom.TagName("FONT"),goog.dom.TagName.FOOTER=new goog.dom.TagName("FOOTER"),goog.dom.TagName.FORM=new goog.dom.TagName("FORM"),goog.dom.TagName.FRAME=new goog.dom.TagName("FRAME"),goog.dom.TagName.FRAMESET=new goog.dom.TagName("FRAMESET"),goog.dom.TagName.H1=new goog.dom.TagName("H1"),goog.dom.TagName.H2=new goog.dom.TagName("H2"),goog.dom.TagName.H3=new goog.dom.TagName("H3"),goog.dom.TagName.H4=new goog.dom.TagName("H4"),goog.dom.TagName.H5=new goog.dom.TagName("H5"),goog.dom.TagName.H6=new goog.dom.TagName("H6"),goog.dom.TagName.HEAD=new goog.dom.TagName("HEAD"),goog.dom.TagName.HEADER=new goog.dom.TagName("HEADER"),goog.dom.TagName.HGROUP=new goog.dom.TagName("HGROUP"),goog.dom.TagName.HR=new goog.dom.TagName("HR"),goog.dom.TagName.HTML=new goog.dom.TagName("HTML"),goog.dom.TagName.I=new goog.dom.TagName("I"),goog.dom.TagName.IFRAME=new goog.dom.TagName("IFRAME"),goog.dom.TagName.IMG=new goog.dom.TagName("IMG"),goog.dom.TagName.INPUT=new goog.dom.TagName("INPUT"),goog.dom.TagName.INS=new goog.dom.TagName("INS"),goog.dom.TagName.ISINDEX=new goog.dom.TagName("ISINDEX"),goog.dom.TagName.KBD=new goog.dom.TagName("KBD"),goog.dom.TagName.KEYGEN=new goog.dom.TagName("KEYGEN"),goog.dom.TagName.LABEL=new goog.dom.TagName("LABEL"),goog.dom.TagName.LEGEND=new goog.dom.TagName("LEGEND"),goog.dom.TagName.LI=new goog.dom.TagName("LI"),goog.dom.TagName.LINK=new goog.dom.TagName("LINK"),goog.dom.TagName.MAIN=new goog.dom.TagName("MAIN"),goog.dom.TagName.MAP=new goog.dom.TagName("MAP"),goog.dom.TagName.MARK=new goog.dom.TagName("MARK"),goog.dom.TagName.MATH=new goog.dom.TagName("MATH"),goog.dom.TagName.MENU=new goog.dom.TagName("MENU"),goog.dom.TagName.MENUITEM=new goog.dom.TagName("MENUITEM"),goog.dom.TagName.META=new goog.dom.TagName("META"),goog.dom.TagName.METER=new goog.dom.TagName("METER"),goog.dom.TagName.NAV=new goog.dom.TagName("NAV"),goog.dom.TagName.NOFRAMES=new goog.dom.TagName("NOFRAMES"),goog.dom.TagName.NOSCRIPT=new goog.dom.TagName("NOSCRIPT"),goog.dom.TagName.OBJECT=new goog.dom.TagName("OBJECT"),goog.dom.TagName.OL=new goog.dom.TagName("OL"),goog.dom.TagName.OPTGROUP=new goog.dom.TagName("OPTGROUP"),goog.dom.TagName.OPTION=new goog.dom.TagName("OPTION"),goog.dom.TagName.OUTPUT=new goog.dom.TagName("OUTPUT"),goog.dom.TagName.P=new goog.dom.TagName("P"),goog.dom.TagName.PARAM=new goog.dom.TagName("PARAM"),goog.dom.TagName.PICTURE=new goog.dom.TagName("PICTURE"),goog.dom.TagName.PRE=new goog.dom.TagName("PRE"),goog.dom.TagName.PROGRESS=new goog.dom.TagName("PROGRESS"),goog.dom.TagName.Q=new goog.dom.TagName("Q"),goog.dom.TagName.RP=new goog.dom.TagName("RP"),goog.dom.TagName.RT=new goog.dom.TagName("RT"),goog.dom.TagName.RTC=new goog.dom.TagName("RTC"),goog.dom.TagName.RUBY=new goog.dom.TagName("RUBY"),goog.dom.TagName.S=new goog.dom.TagName("S"),goog.dom.TagName.SAMP=new goog.dom.TagName("SAMP"),goog.dom.TagName.SCRIPT=new goog.dom.TagName("SCRIPT"),goog.dom.TagName.SECTION=new goog.dom.TagName("SECTION"),goog.dom.TagName.SELECT=new goog.dom.TagName("SELECT"),goog.dom.TagName.SMALL=new goog.dom.TagName("SMALL"),goog.dom.TagName.SOURCE=new goog.dom.TagName("SOURCE"),goog.dom.TagName.SPAN=new goog.dom.TagName("SPAN"),goog.dom.TagName.STRIKE=new goog.dom.TagName("STRIKE"),goog.dom.TagName.STRONG=new goog.dom.TagName("STRONG"),goog.dom.TagName.STYLE=new goog.dom.TagName("STYLE"),goog.dom.TagName.SUB=new goog.dom.TagName("SUB"),goog.dom.TagName.SUMMARY=new goog.dom.TagName("SUMMARY"),goog.dom.TagName.SUP=new goog.dom.TagName("SUP"),goog.dom.TagName.SVG=new goog.dom.TagName("SVG"),goog.dom.TagName.TABLE=new goog.dom.TagName("TABLE"),goog.dom.TagName.TBODY=new goog.dom.TagName("TBODY"),goog.dom.TagName.TD=new goog.dom.TagName("TD"),goog.dom.TagName.TEMPLATE=new goog.dom.TagName("TEMPLATE"),goog.dom.TagName.TEXTAREA=new goog.dom.TagName("TEXTAREA"),goog.dom.TagName.TFOOT=new goog.dom.TagName("TFOOT"),goog.dom.TagName.TH=new goog.dom.TagName("TH"),goog.dom.TagName.THEAD=new goog.dom.TagName("THEAD"),goog.dom.TagName.TIME=new goog.dom.TagName("TIME"),goog.dom.TagName.TITLE=new goog.dom.TagName("TITLE"),goog.dom.TagName.TR=new goog.dom.TagName("TR"),goog.dom.TagName.TRACK=new goog.dom.TagName("TRACK"),goog.dom.TagName.TT=new goog.dom.TagName("TT"),goog.dom.TagName.U=new goog.dom.TagName("U"),goog.dom.TagName.UL=new goog.dom.TagName("UL"),goog.dom.TagName.VAR=new goog.dom.TagName("VAR"),goog.dom.TagName.VIDEO=new goog.dom.TagName("VIDEO"),goog.dom.TagName.WBR=new goog.dom.TagName("WBR"),goog.dom.tags={},goog.dom.tags.VOID_TAGS_={area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},goog.dom.tags.isVoidTag=function(i){return goog.dom.tags.VOID_TAGS_[i]===!0},goog.html={},goog.html.trustedtypes={},goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY=goog.TRUSTED_TYPES_POLICY_NAME?goog.createTrustedTypesPolicy(goog.TRUSTED_TYPES_POLICY_NAME+"#html"):null,goog.string={},goog.string.TypedString=function(){},goog.string.Const=function(i,e){this.stringConstValueWithSecurityContract__googStringSecurityPrivate_=i===goog.string.Const.GOOG_STRING_CONSTRUCTOR_TOKEN_PRIVATE_&&e||"",this.STRING_CONST_TYPE_MARKER__GOOG_STRING_SECURITY_PRIVATE_=goog.string.Const.TYPE_MARKER_},goog.string.Const.prototype.implementsGoogStringTypedString=!0,goog.string.Const.prototype.getTypedStringValue=function(){return this.stringConstValueWithSecurityContract__googStringSecurityPrivate_},goog.DEBUG&&(goog.string.Const.prototype.toString=function(){return"Const{"+this.stringConstValueWithSecurityContract__googStringSecurityPrivate_+"}"}),goog.string.Const.unwrap=function(i){return i instanceof goog.string.Const&&i.constructor===goog.string.Const&&i.STRING_CONST_TYPE_MARKER__GOOG_STRING_SECURITY_PRIVATE_===goog.string.Const.TYPE_MARKER_?i.stringConstValueWithSecurityContract__googStringSecurityPrivate_:(goog.asserts.fail("expected object of type Const, got '"+i+"'"),"type_error:Const")},goog.string.Const.from=function(i){return new goog.string.Const(goog.string.Const.GOOG_STRING_CONSTRUCTOR_TOKEN_PRIVATE_,i)},goog.string.Const.TYPE_MARKER_={},goog.string.Const.GOOG_STRING_CONSTRUCTOR_TOKEN_PRIVATE_={},goog.string.Const.EMPTY=goog.string.Const.from(""),goog.html.SafeScript=function(){this.privateDoNotAccessOrElseSafeScriptWrappedValue_="",this.SAFE_SCRIPT_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeScript.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.SafeScript.prototype.implementsGoogStringTypedString=!0,goog.html.SafeScript.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeScript.fromConstant=function(i){return i=goog.string.Const.unwrap(i),i.length===0?goog.html.SafeScript.EMPTY:goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(i)},goog.html.SafeScript.fromConstantAndArgs=function(i,e){for(var o=[],d=1;d<arguments.length;d++)o.push(goog.html.SafeScript.stringify_(arguments[d]));return goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse("("+goog.string.Const.unwrap(i)+")("+o.join(", ")+");")},goog.html.SafeScript.fromJson=function(i){return goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(goog.html.SafeScript.stringify_(i))},goog.html.SafeScript.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeScriptWrappedValue_.toString()},goog.DEBUG&&(goog.html.SafeScript.prototype.toString=function(){return"SafeScript{"+this.privateDoNotAccessOrElseSafeScriptWrappedValue_+"}"}),goog.html.SafeScript.unwrap=function(i){return goog.html.SafeScript.unwrapTrustedScript(i).toString()},goog.html.SafeScript.unwrapTrustedScript=function(i){return i instanceof goog.html.SafeScript&&i.constructor===goog.html.SafeScript&&i.SAFE_SCRIPT_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeScript.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?i.privateDoNotAccessOrElseSafeScriptWrappedValue_:(goog.asserts.fail("expected object of type SafeScript, got '"+i+"' of type "+goog.typeOf(i)),"type_error:SafeScript")},goog.html.SafeScript.stringify_=function(i){return JSON.stringify(i).replace(/</g,"\\x3c")},goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse=function(i){return new goog.html.SafeScript().initSecurityPrivateDoNotAccessOrElse_(i)},goog.html.SafeScript.prototype.initSecurityPrivateDoNotAccessOrElse_=function(i){return this.privateDoNotAccessOrElseSafeScriptWrappedValue_=goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY?goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY.createScript(i):i,this},goog.html.SafeScript.EMPTY=goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(""),goog.fs={},goog.fs.url={},goog.fs.url.createObjectUrl=function(i){return goog.fs.url.getUrlObject_().createObjectURL(i)},goog.fs.url.revokeObjectUrl=function(i){goog.fs.url.getUrlObject_().revokeObjectURL(i)},goog.fs.url.UrlObject_=function(){},goog.fs.url.UrlObject_.prototype.createObjectURL=function(i){},goog.fs.url.UrlObject_.prototype.revokeObjectURL=function(i){},goog.fs.url.getUrlObject_=function(){var i=goog.fs.url.findUrlObject_();if(i!=null)return i;throw Error("This browser doesn't seem to support blob URLs")},goog.fs.url.findUrlObject_=function(){return goog.global.URL!==void 0&&goog.global.URL.createObjectURL!==void 0?goog.global.URL:goog.global.webkitURL!==void 0&&goog.global.webkitURL.createObjectURL!==void 0?goog.global.webkitURL:goog.global.createObjectURL!==void 0?goog.global:null},goog.fs.url.browserSupportsObjectUrls=function(){return goog.fs.url.findUrlObject_()!=null},goog.fs.blob={},goog.fs.blob.getBlob=function(i){var e=goog.global.BlobBuilder||goog.global.WebKitBlobBuilder;if(e!==void 0){e=new e;for(var o=0;o<arguments.length;o++)e.append(arguments[o]);return e.getBlob()}return goog.fs.blob.getBlobWithProperties(goog.array.toArray(arguments))},goog.fs.blob.getBlobWithProperties=function(i,e,o){var d=goog.global.BlobBuilder||goog.global.WebKitBlobBuilder;if(d!==void 0){d=new d;for(var h=0;h<i.length;h++)d.append(i[h],o);return d.getBlob(e)}if(goog.global.Blob!==void 0)return d={},e&&(d.type=e),o&&(d.endings=o),new Blob(i,d);throw Error("This browser doesn't seem to support creating Blobs")},goog.i18n={},goog.i18n.bidi={},goog.i18n.bidi.FORCE_RTL=!1,goog.i18n.bidi.IS_RTL=goog.i18n.bidi.FORCE_RTL||(goog.LOCALE.substring(0,2).toLowerCase()=="ar"||goog.LOCALE.substring(0,2).toLowerCase()=="fa"||goog.LOCALE.substring(0,2).toLowerCase()=="he"||goog.LOCALE.substring(0,2).toLowerCase()=="iw"||goog.LOCALE.substring(0,2).toLowerCase()=="ps"||goog.LOCALE.substring(0,2).toLowerCase()=="sd"||goog.LOCALE.substring(0,2).toLowerCase()=="ug"||goog.LOCALE.substring(0,2).toLowerCase()=="ur"||goog.LOCALE.substring(0,2).toLowerCase()=="yi")&&(goog.LOCALE.length==2||goog.LOCALE.substring(2,3)=="-"||goog.LOCALE.substring(2,3)=="_")||3<=goog.LOCALE.length&&goog.LOCALE.substring(0,3).toLowerCase()=="ckb"&&(goog.LOCALE.length==3||goog.LOCALE.substring(3,4)=="-"||goog.LOCALE.substring(3,4)=="_")||7<=goog.LOCALE.length&&(goog.LOCALE.substring(2,3)=="-"||goog.LOCALE.substring(2,3)=="_")&&(goog.LOCALE.substring(3,7).toLowerCase()=="adlm"||goog.LOCALE.substring(3,7).toLowerCase()=="arab"||goog.LOCALE.substring(3,7).toLowerCase()=="hebr"||goog.LOCALE.substring(3,7).toLowerCase()=="nkoo"||goog.LOCALE.substring(3,7).toLowerCase()=="rohg"||goog.LOCALE.substring(3,7).toLowerCase()=="thaa")||8<=goog.LOCALE.length&&(goog.LOCALE.substring(3,4)=="-"||goog.LOCALE.substring(3,4)=="_")&&(goog.LOCALE.substring(4,8).toLowerCase()=="adlm"||goog.LOCALE.substring(4,8).toLowerCase()=="arab"||goog.LOCALE.substring(4,8).toLowerCase()=="hebr"||goog.LOCALE.substring(4,8).toLowerCase()=="nkoo"||goog.LOCALE.substring(4,8).toLowerCase()=="rohg"||goog.LOCALE.substring(4,8).toLowerCase()=="thaa"),goog.i18n.bidi.Format={LRE:"‪",RLE:"‫",PDF:"‬",LRM:"‎",RLM:"‏"},goog.i18n.bidi.Dir={LTR:1,RTL:-1,NEUTRAL:0},goog.i18n.bidi.RIGHT="right",goog.i18n.bidi.LEFT="left",goog.i18n.bidi.I18N_RIGHT=goog.i18n.bidi.IS_RTL?goog.i18n.bidi.LEFT:goog.i18n.bidi.RIGHT,goog.i18n.bidi.I18N_LEFT=goog.i18n.bidi.IS_RTL?goog.i18n.bidi.RIGHT:goog.i18n.bidi.LEFT,goog.i18n.bidi.toDir=function(i,e){return typeof i=="number"?0<i?goog.i18n.bidi.Dir.LTR:0>i?goog.i18n.bidi.Dir.RTL:e?null:goog.i18n.bidi.Dir.NEUTRAL:i==null?null:i?goog.i18n.bidi.Dir.RTL:goog.i18n.bidi.Dir.LTR},goog.i18n.bidi.ltrChars_="A-Za-zÀ-ÖØ-öø-ʸ̀-֐ऀ-῿‎Ⰰ-\uD801\uD804-\uD839\uD83C-\uDBFF豈-﬜︀-﹯﻽-￿",goog.i18n.bidi.rtlChars_="֑-ۯۺ-ࣿ‏\uD802-\uD803\uD83A-\uD83Bיִ-﷿ﹰ-ﻼ",goog.i18n.bidi.htmlSkipReg_=/<[^>]*>|&[^;]+;/g,goog.i18n.bidi.stripHtmlIfNeeded_=function(i,e){return e?i.replace(goog.i18n.bidi.htmlSkipReg_,""):i},goog.i18n.bidi.rtlCharReg_=new RegExp("["+goog.i18n.bidi.rtlChars_+"]"),goog.i18n.bidi.ltrCharReg_=new RegExp("["+goog.i18n.bidi.ltrChars_+"]"),goog.i18n.bidi.hasAnyRtl=function(i,e){return goog.i18n.bidi.rtlCharReg_.test(goog.i18n.bidi.stripHtmlIfNeeded_(i,e))},goog.i18n.bidi.hasRtlChar=goog.i18n.bidi.hasAnyRtl,goog.i18n.bidi.hasAnyLtr=function(i,e){return goog.i18n.bidi.ltrCharReg_.test(goog.i18n.bidi.stripHtmlIfNeeded_(i,e))},goog.i18n.bidi.ltrRe_=new RegExp("^["+goog.i18n.bidi.ltrChars_+"]"),goog.i18n.bidi.rtlRe_=new RegExp("^["+goog.i18n.bidi.rtlChars_+"]"),goog.i18n.bidi.isRtlChar=function(i){return goog.i18n.bidi.rtlRe_.test(i)},goog.i18n.bidi.isLtrChar=function(i){return goog.i18n.bidi.ltrRe_.test(i)},goog.i18n.bidi.isNeutralChar=function(i){return!goog.i18n.bidi.isLtrChar(i)&&!goog.i18n.bidi.isRtlChar(i)},goog.i18n.bidi.ltrDirCheckRe_=new RegExp("^[^"+goog.i18n.bidi.rtlChars_+"]*["+goog.i18n.bidi.ltrChars_+"]"),goog.i18n.bidi.rtlDirCheckRe_=new RegExp("^[^"+goog.i18n.bidi.ltrChars_+"]*["+goog.i18n.bidi.rtlChars_+"]"),goog.i18n.bidi.startsWithRtl=function(i,e){return goog.i18n.bidi.rtlDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(i,e))},goog.i18n.bidi.isRtlText=goog.i18n.bidi.startsWithRtl,goog.i18n.bidi.startsWithLtr=function(i,e){return goog.i18n.bidi.ltrDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(i,e))},goog.i18n.bidi.isLtrText=goog.i18n.bidi.startsWithLtr,goog.i18n.bidi.isRequiredLtrRe_=/^http:\/\/.*/,goog.i18n.bidi.isNeutralText=function(i,e){return i=goog.i18n.bidi.stripHtmlIfNeeded_(i,e),goog.i18n.bidi.isRequiredLtrRe_.test(i)||!goog.i18n.bidi.hasAnyLtr(i)&&!goog.i18n.bidi.hasAnyRtl(i)},goog.i18n.bidi.ltrExitDirCheckRe_=new RegExp("["+goog.i18n.bidi.ltrChars_+"][^"+goog.i18n.bidi.rtlChars_+"]*$"),goog.i18n.bidi.rtlExitDirCheckRe_=new RegExp("["+goog.i18n.bidi.rtlChars_+"][^"+goog.i18n.bidi.ltrChars_+"]*$"),goog.i18n.bidi.endsWithLtr=function(i,e){return goog.i18n.bidi.ltrExitDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(i,e))},goog.i18n.bidi.isLtrExitText=goog.i18n.bidi.endsWithLtr,goog.i18n.bidi.endsWithRtl=function(i,e){return goog.i18n.bidi.rtlExitDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(i,e))},goog.i18n.bidi.isRtlExitText=goog.i18n.bidi.endsWithRtl,goog.i18n.bidi.rtlLocalesRe_=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i,goog.i18n.bidi.isRtlLanguage=function(i){return goog.i18n.bidi.rtlLocalesRe_.test(i)},goog.i18n.bidi.bracketGuardTextRe_=/(\(.*?\)+)|(\[.*?\]+)|(\{.*?\}+)|(<.*?>+)/g,goog.i18n.bidi.guardBracketInText=function(i,e){return e=(e===void 0?goog.i18n.bidi.hasAnyRtl(i):e)?goog.i18n.bidi.Format.RLM:goog.i18n.bidi.Format.LRM,i.replace(goog.i18n.bidi.bracketGuardTextRe_,e+"$&"+e)},goog.i18n.bidi.enforceRtlInHtml=function(i){return i.charAt(0)=="<"?i.replace(/<\w+/,"$& dir=rtl"):`
<span dir=rtl>`+i+"</span>"},goog.i18n.bidi.enforceRtlInText=function(i){return goog.i18n.bidi.Format.RLE+i+goog.i18n.bidi.Format.PDF},goog.i18n.bidi.enforceLtrInHtml=function(i){return i.charAt(0)=="<"?i.replace(/<\w+/,"$& dir=ltr"):`
<span dir=ltr>`+i+"</span>"},goog.i18n.bidi.enforceLtrInText=function(i){return goog.i18n.bidi.Format.LRE+i+goog.i18n.bidi.Format.PDF},goog.i18n.bidi.dimensionsRe_=/:\s*([.\d][.\w]*)\s+([.\d][.\w]*)\s+([.\d][.\w]*)\s+([.\d][.\w]*)/g,goog.i18n.bidi.leftRe_=/left/gi,goog.i18n.bidi.rightRe_=/right/gi,goog.i18n.bidi.tempRe_=/%%%%/g,goog.i18n.bidi.mirrorCSS=function(i){return i.replace(goog.i18n.bidi.dimensionsRe_,":$1 $4 $3 $2").replace(goog.i18n.bidi.leftRe_,"%%%%").replace(goog.i18n.bidi.rightRe_,goog.i18n.bidi.LEFT).replace(goog.i18n.bidi.tempRe_,goog.i18n.bidi.RIGHT)},goog.i18n.bidi.doubleQuoteSubstituteRe_=/([\u0591-\u05f2])"/g,goog.i18n.bidi.singleQuoteSubstituteRe_=/([\u0591-\u05f2])'/g,goog.i18n.bidi.normalizeHebrewQuote=function(i){return i.replace(goog.i18n.bidi.doubleQuoteSubstituteRe_,"$1״").replace(goog.i18n.bidi.singleQuoteSubstituteRe_,"$1׳")},goog.i18n.bidi.wordSeparatorRe_=/\s+/,goog.i18n.bidi.hasNumeralsRe_=/[\d\u06f0-\u06f9]/,goog.i18n.bidi.rtlDetectionThreshold_=.4,goog.i18n.bidi.estimateDirection=function(i,e){var o=0,d=0,h=!1;for(i=goog.i18n.bidi.stripHtmlIfNeeded_(i,e).split(goog.i18n.bidi.wordSeparatorRe_),e=0;e<i.length;e++){var g=i[e];goog.i18n.bidi.startsWithRtl(g)?(o++,d++):goog.i18n.bidi.isRequiredLtrRe_.test(g)?h=!0:goog.i18n.bidi.hasAnyLtr(g)?d++:goog.i18n.bidi.hasNumeralsRe_.test(g)&&(h=!0)}return d==0?h?goog.i18n.bidi.Dir.LTR:goog.i18n.bidi.Dir.NEUTRAL:o/d>goog.i18n.bidi.rtlDetectionThreshold_?goog.i18n.bidi.Dir.RTL:goog.i18n.bidi.Dir.LTR},goog.i18n.bidi.detectRtlDirectionality=function(i,e){return goog.i18n.bidi.estimateDirection(i,e)==goog.i18n.bidi.Dir.RTL},goog.i18n.bidi.setElementDirAndAlign=function(i,e){i&&(e=goog.i18n.bidi.toDir(e))&&(i.style.textAlign=e==goog.i18n.bidi.Dir.RTL?goog.i18n.bidi.RIGHT:goog.i18n.bidi.LEFT,i.dir=e==goog.i18n.bidi.Dir.RTL?"rtl":"ltr")},goog.i18n.bidi.setElementDirByTextDirectionality=function(i,e){switch(goog.i18n.bidi.estimateDirection(e)){case goog.i18n.bidi.Dir.LTR:i.dir="ltr";break;case goog.i18n.bidi.Dir.RTL:i.dir="rtl";break;default:i.removeAttribute("dir")}},goog.i18n.bidi.DirectionalString=function(){},goog.html.TrustedResourceUrl=function(i,e){this.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_=i===goog.html.TrustedResourceUrl.CONSTRUCTOR_TOKEN_PRIVATE_&&e||"",this.TRUSTED_RESOURCE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.TrustedResourceUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.TrustedResourceUrl.prototype.implementsGoogStringTypedString=!0,goog.html.TrustedResourceUrl.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_.toString()},goog.html.TrustedResourceUrl.prototype.implementsGoogI18nBidiDirectionalString=!0,goog.html.TrustedResourceUrl.prototype.getDirection=function(){return goog.i18n.bidi.Dir.LTR},goog.html.TrustedResourceUrl.prototype.cloneWithParams=function(i,e){var o=goog.html.TrustedResourceUrl.unwrap(this);o=goog.html.TrustedResourceUrl.URL_PARAM_PARSER_.exec(o);var d=o[3]||"";return goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(o[1]+goog.html.TrustedResourceUrl.stringifyParams_("?",o[2]||"",i)+goog.html.TrustedResourceUrl.stringifyParams_("#",d,e))},goog.DEBUG&&(goog.html.TrustedResourceUrl.prototype.toString=function(){return"TrustedResourceUrl{"+this.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_+"}"}),goog.html.TrustedResourceUrl.unwrap=function(i){return goog.html.TrustedResourceUrl.unwrapTrustedScriptURL(i).toString()},goog.html.TrustedResourceUrl.unwrapTrustedScriptURL=function(i){return i instanceof goog.html.TrustedResourceUrl&&i.constructor===goog.html.TrustedResourceUrl&&i.TRUSTED_RESOURCE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.TrustedResourceUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?i.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_:(goog.asserts.fail("expected object of type TrustedResourceUrl, got '"+i+"' of type "+goog.typeOf(i)),"type_error:TrustedResourceUrl")},goog.html.TrustedResourceUrl.format=function(i,e){var o=goog.string.Const.unwrap(i);if(!goog.html.TrustedResourceUrl.BASE_URL_.test(o))throw Error("Invalid TrustedResourceUrl format: "+o);return i=o.replace(goog.html.TrustedResourceUrl.FORMAT_MARKER_,function(d,h){if(!Object.prototype.hasOwnProperty.call(e,h))throw Error('Found marker, "'+h+'", in format string, "'+o+'", but no valid label mapping found in args: '+JSON.stringify(e));return d=e[h],d instanceof goog.string.Const?goog.string.Const.unwrap(d):encodeURIComponent(String(d))}),goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(i)},goog.html.TrustedResourceUrl.FORMAT_MARKER_=/%{(\w+)}/g,goog.html.TrustedResourceUrl.BASE_URL_=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,goog.html.TrustedResourceUrl.URL_PARAM_PARSER_=/^([^?#]*)(\?[^#]*)?(#[\s\S]*)?/,goog.html.TrustedResourceUrl.formatWithParams=function(i,e,o,d){return goog.html.TrustedResourceUrl.format(i,e).cloneWithParams(o,d)},goog.html.TrustedResourceUrl.fromConstant=function(i){return goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(goog.string.Const.unwrap(i))},goog.html.TrustedResourceUrl.fromConstants=function(i){for(var e="",o=0;o<i.length;o++)e+=goog.string.Const.unwrap(i[o]);return goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(e)},goog.html.TrustedResourceUrl.fromSafeScript=function(i){return i=goog.fs.blob.getBlobWithProperties([goog.html.SafeScript.unwrap(i)],"text/javascript"),i=goog.fs.url.createObjectUrl(i),goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(i)},goog.html.TrustedResourceUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse=function(i){return i=goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY?goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY.createScriptURL(i):i,new goog.html.TrustedResourceUrl(goog.html.TrustedResourceUrl.CONSTRUCTOR_TOKEN_PRIVATE_,i)},goog.html.TrustedResourceUrl.stringifyParams_=function(i,e,o){if(o==null)return e;if(typeof o=="string")return o?i+encodeURIComponent(o):"";for(var d in o){var h=o[d];h=Array.isArray(h)?h:[h];for(var g=0;g<h.length;g++){var b=h[g];b!=null&&(e||(e=i),e+=(e.length>i.length?"&":"")+encodeURIComponent(d)+"="+encodeURIComponent(String(b)))}}return e},goog.html.TrustedResourceUrl.CONSTRUCTOR_TOKEN_PRIVATE_={},goog.string.internal={},goog.string.internal.startsWith=function(i,e){return i.lastIndexOf(e,0)==0},goog.string.internal.endsWith=function(i,e){var o=i.length-e.length;return 0<=o&&i.indexOf(e,o)==o},goog.string.internal.caseInsensitiveStartsWith=function(i,e){return goog.string.internal.caseInsensitiveCompare(e,i.substr(0,e.length))==0},goog.string.internal.caseInsensitiveEndsWith=function(i,e){return goog.string.internal.caseInsensitiveCompare(e,i.substr(i.length-e.length,e.length))==0},goog.string.internal.caseInsensitiveEquals=function(i,e){return i.toLowerCase()==e.toLowerCase()},goog.string.internal.isEmptyOrWhitespace=function(i){return/^[\s\xa0]*$/.test(i)},goog.string.internal.trim=goog.TRUSTED_SITE&&String.prototype.trim?function(i){return i.trim()}:function(i){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(i)[1]},goog.string.internal.caseInsensitiveCompare=function(i,e){return i=String(i).toLowerCase(),e=String(e).toLowerCase(),i<e?-1:i==e?0:1},goog.string.internal.newLineToBr=function(i,e){return i.replace(/(\r\n|\r|\n)/g,e?"<br />":"<br>")},goog.string.internal.htmlEscape=function(i,e){if(e)i=i.replace(goog.string.internal.AMP_RE_,"&amp;").replace(goog.string.internal.LT_RE_,"&lt;").replace(goog.string.internal.GT_RE_,"&gt;").replace(goog.string.internal.QUOT_RE_,"&quot;").replace(goog.string.internal.SINGLE_QUOTE_RE_,"&#39;").replace(goog.string.internal.NULL_RE_,"&#0;");else{if(!goog.string.internal.ALL_RE_.test(i))return i;i.indexOf("&")!=-1&&(i=i.replace(goog.string.internal.AMP_RE_,"&amp;")),i.indexOf("<")!=-1&&(i=i.replace(goog.string.internal.LT_RE_,"&lt;")),i.indexOf(">")!=-1&&(i=i.replace(goog.string.internal.GT_RE_,"&gt;")),i.indexOf('"')!=-1&&(i=i.replace(goog.string.internal.QUOT_RE_,"&quot;")),i.indexOf("'")!=-1&&(i=i.replace(goog.string.internal.SINGLE_QUOTE_RE_,"&#39;")),i.indexOf("\0")!=-1&&(i=i.replace(goog.string.internal.NULL_RE_,"&#0;"))}return i},goog.string.internal.AMP_RE_=/&/g,goog.string.internal.LT_RE_=/</g,goog.string.internal.GT_RE_=/>/g,goog.string.internal.QUOT_RE_=/"/g,goog.string.internal.SINGLE_QUOTE_RE_=/'/g,goog.string.internal.NULL_RE_=/\x00/g,goog.string.internal.ALL_RE_=/[\x00&<>"']/,goog.string.internal.whitespaceEscape=function(i,e){return goog.string.internal.newLineToBr(i.replace(/  /g," &#160;"),e)},goog.string.internal.contains=function(i,e){return i.indexOf(e)!=-1},goog.string.internal.caseInsensitiveContains=function(i,e){return goog.string.internal.contains(i.toLowerCase(),e.toLowerCase())},goog.string.internal.compareVersions=function(i,e){var o=0;i=goog.string.internal.trim(String(i)).split("."),e=goog.string.internal.trim(String(e)).split(".");for(var d=Math.max(i.length,e.length),h=0;o==0&&h<d;h++){var g=i[h]||"",b=e[h]||"";do{if(g=/(\d*)(\D*)(.*)/.exec(g)||["","","",""],b=/(\d*)(\D*)(.*)/.exec(b)||["","","",""],g[0].length==0&&b[0].length==0)break;o=g[1].length==0?0:parseInt(g[1],10);var $=b[1].length==0?0:parseInt(b[1],10);o=goog.string.internal.compareElements_(o,$)||goog.string.internal.compareElements_(g[2].length==0,b[2].length==0)||goog.string.internal.compareElements_(g[2],b[2]),g=g[3],b=b[3]}while(o==0)}return o},goog.string.internal.compareElements_=function(i,e){return i<e?-1:i>e?1:0},goog.html.SafeUrl=function(i,e){this.privateDoNotAccessOrElseSafeUrlWrappedValue_=i===goog.html.SafeUrl.CONSTRUCTOR_TOKEN_PRIVATE_&&e||"",this.SAFE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.SafeUrl.INNOCUOUS_STRING="about:invalid#zClosurez",goog.html.SafeUrl.prototype.implementsGoogStringTypedString=!0,goog.html.SafeUrl.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeUrlWrappedValue_.toString()},goog.html.SafeUrl.prototype.implementsGoogI18nBidiDirectionalString=!0,goog.html.SafeUrl.prototype.getDirection=function(){return goog.i18n.bidi.Dir.LTR},goog.DEBUG&&(goog.html.SafeUrl.prototype.toString=function(){return"SafeUrl{"+this.privateDoNotAccessOrElseSafeUrlWrappedValue_+"}"}),goog.html.SafeUrl.unwrap=function(i){return i instanceof goog.html.SafeUrl&&i.constructor===goog.html.SafeUrl&&i.SAFE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?i.privateDoNotAccessOrElseSafeUrlWrappedValue_:(goog.asserts.fail("expected object of type SafeUrl, got '"+i+"' of type "+goog.typeOf(i)),"type_error:SafeUrl")},goog.html.SafeUrl.fromConstant=function(i){return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(goog.string.Const.unwrap(i))},goog.html.SAFE_MIME_TYPE_PATTERN_=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,goog.html.SafeUrl.isSafeMimeType=function(i){return goog.html.SAFE_MIME_TYPE_PATTERN_.test(i)},goog.html.SafeUrl.fromBlob=function(i){return i=goog.html.SafeUrl.isSafeMimeType(i.type)?goog.fs.url.createObjectUrl(i):goog.html.SafeUrl.INNOCUOUS_STRING,goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(i)},goog.html.SafeUrl.fromMediaSource=function(i){return goog.asserts.assert("MediaSource"in goog.global,"No support for MediaSource"),i=i instanceof MediaSource?goog.fs.url.createObjectUrl(i):goog.html.SafeUrl.INNOCUOUS_STRING,goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(i)},goog.html.DATA_URL_PATTERN_=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,goog.html.SafeUrl.fromDataUrl=function(i){i=i.replace(/(%0A|%0D)/g,"");var e=i.match(goog.html.DATA_URL_PATTERN_);return e=e&&goog.html.SafeUrl.isSafeMimeType(e[1]),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e?i:goog.html.SafeUrl.INNOCUOUS_STRING)},goog.html.SafeUrl.fromTelUrl=function(i){return goog.string.internal.caseInsensitiveStartsWith(i,"tel:")||(i=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(i)},goog.html.SIP_URL_PATTERN_=/^sip[s]?:[+a-z0-9_.!$%&'*\/=^`{|}~-]+@([a-z0-9-]+\.)+[a-z0-9]{2,63}$/i,goog.html.SafeUrl.fromSipUrl=function(i){return goog.html.SIP_URL_PATTERN_.test(decodeURIComponent(i))||(i=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(i)},goog.html.SafeUrl.fromFacebookMessengerUrl=function(i){return goog.string.internal.caseInsensitiveStartsWith(i,"fb-messenger://share")||(i=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(i)},goog.html.SafeUrl.fromWhatsAppUrl=function(i){return goog.string.internal.caseInsensitiveStartsWith(i,"whatsapp://send")||(i=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(i)},goog.html.SafeUrl.fromSmsUrl=function(i){return goog.string.internal.caseInsensitiveStartsWith(i,"sms:")&&goog.html.SafeUrl.isSmsUrlBodyValid_(i)||(i=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(i)},goog.html.SafeUrl.isSmsUrlBodyValid_=function(i){var e=i.indexOf("#");if(0<e&&(i=i.substring(0,e)),e=i.match(/[?&]body=/gi),!e)return!0;if(1<e.length)return!1;if(i=i.match(/[?&]body=([^&]*)/)[1],!i)return!0;try{decodeURIComponent(i)}catch{return!1}return/^(?:[a-z0-9\-_.~]|%[0-9a-f]{2})+$/i.test(i)},goog.html.SafeUrl.fromSshUrl=function(i){return goog.string.internal.caseInsensitiveStartsWith(i,"ssh://")||(i=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(i)},goog.html.SafeUrl.sanitizeChromeExtensionUrl=function(i,e){return goog.html.SafeUrl.sanitizeExtensionUrl_(/^chrome-extension:\/\/([^\/]+)\//,i,e)},goog.html.SafeUrl.sanitizeFirefoxExtensionUrl=function(i,e){return goog.html.SafeUrl.sanitizeExtensionUrl_(/^moz-extension:\/\/([^\/]+)\//,i,e)},goog.html.SafeUrl.sanitizeEdgeExtensionUrl=function(i,e){return goog.html.SafeUrl.sanitizeExtensionUrl_(/^ms-browser-extension:\/\/([^\/]+)\//,i,e)},goog.html.SafeUrl.sanitizeExtensionUrl_=function(i,e,o){return(i=i.exec(e))?(i=i[1],(o instanceof goog.string.Const?[goog.string.Const.unwrap(o)]:o.map(function(d){return goog.string.Const.unwrap(d)})).indexOf(i)==-1&&(e=goog.html.SafeUrl.INNOCUOUS_STRING)):e=goog.html.SafeUrl.INNOCUOUS_STRING,goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e)},goog.html.SafeUrl.fromTrustedResourceUrl=function(i){return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(goog.html.TrustedResourceUrl.unwrap(i))},goog.html.SAFE_URL_PATTERN_=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i,goog.html.SafeUrl.SAFE_URL_PATTERN=goog.html.SAFE_URL_PATTERN_,goog.html.SafeUrl.sanitize=function(i){return i instanceof goog.html.SafeUrl?i:(i=typeof i=="object"&&i.implementsGoogStringTypedString?i.getTypedStringValue():String(i),goog.html.SAFE_URL_PATTERN_.test(i)||(i=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(i))},goog.html.SafeUrl.sanitizeAssertUnchanged=function(i,e){return i instanceof goog.html.SafeUrl?i:(i=typeof i=="object"&&i.implementsGoogStringTypedString?i.getTypedStringValue():String(i),e&&/^data:/i.test(i)&&(e=goog.html.SafeUrl.fromDataUrl(i),e.getTypedStringValue()==i)?e:(goog.asserts.assert(goog.html.SAFE_URL_PATTERN_.test(i),"%s does not match the safe URL pattern",i)||(i=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(i)))},goog.html.SafeUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse=function(i){return new goog.html.SafeUrl(goog.html.SafeUrl.CONSTRUCTOR_TOKEN_PRIVATE_,i)},goog.html.SafeUrl.ABOUT_BLANK=goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse("about:blank"),goog.html.SafeUrl.CONSTRUCTOR_TOKEN_PRIVATE_={},goog.html.SafeStyle=function(){this.privateDoNotAccessOrElseSafeStyleWrappedValue_="",this.SAFE_STYLE_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeStyle.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.SafeStyle.prototype.implementsGoogStringTypedString=!0,goog.html.SafeStyle.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeStyle.fromConstant=function(i){return i=goog.string.Const.unwrap(i),i.length===0?goog.html.SafeStyle.EMPTY:(goog.asserts.assert(goog.string.internal.endsWith(i,";"),"Last character of style string is not ';': "+i),goog.asserts.assert(goog.string.internal.contains(i,":"),`Style string must contain at least one ':', to specify a "name: value" pair: `+i),goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(i))},goog.html.SafeStyle.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeStyleWrappedValue_},goog.DEBUG&&(goog.html.SafeStyle.prototype.toString=function(){return"SafeStyle{"+this.privateDoNotAccessOrElseSafeStyleWrappedValue_+"}"}),goog.html.SafeStyle.unwrap=function(i){return i instanceof goog.html.SafeStyle&&i.constructor===goog.html.SafeStyle&&i.SAFE_STYLE_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeStyle.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?i.privateDoNotAccessOrElseSafeStyleWrappedValue_:(goog.asserts.fail("expected object of type SafeStyle, got '"+i+"' of type "+goog.typeOf(i)),"type_error:SafeStyle")},goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse=function(i){return new goog.html.SafeStyle().initSecurityPrivateDoNotAccessOrElse_(i)},goog.html.SafeStyle.prototype.initSecurityPrivateDoNotAccessOrElse_=function(i){return this.privateDoNotAccessOrElseSafeStyleWrappedValue_=i,this},goog.html.SafeStyle.EMPTY=goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(""),goog.html.SafeStyle.INNOCUOUS_STRING="zClosurez",goog.html.SafeStyle.create=function(i){var e="",o;for(o in i){if(!/^[-_a-zA-Z0-9]+$/.test(o))throw Error("Name allows only [-_a-zA-Z0-9], got: "+o);var d=i[o];d!=null&&(d=Array.isArray(d)?goog.array.map(d,goog.html.SafeStyle.sanitizePropertyValue_).join(" "):goog.html.SafeStyle.sanitizePropertyValue_(d),e+=o+":"+d+";")}return e?goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(e):goog.html.SafeStyle.EMPTY},goog.html.SafeStyle.sanitizePropertyValue_=function(i){if(i instanceof goog.html.SafeUrl)return'url("'+goog.html.SafeUrl.unwrap(i).replace(/</g,"%3c").replace(/[\\"]/g,"\\$&")+'")';if(i=i instanceof goog.string.Const?goog.string.Const.unwrap(i):goog.html.SafeStyle.sanitizePropertyValueString_(String(i)),/[{;}]/.test(i))throw new goog.asserts.AssertionError("Value does not allow [{;}], got: %s.",[i]);return i},goog.html.SafeStyle.sanitizePropertyValueString_=function(i){var e=i.replace(goog.html.SafeStyle.FUNCTIONS_RE_,"$1").replace(goog.html.SafeStyle.FUNCTIONS_RE_,"$1").replace(goog.html.SafeStyle.URL_RE_,"url");if(goog.html.SafeStyle.VALUE_RE_.test(e)){if(goog.html.SafeStyle.COMMENT_RE_.test(i))return goog.asserts.fail("String value disallows comments, got: "+i),goog.html.SafeStyle.INNOCUOUS_STRING;if(!goog.html.SafeStyle.hasBalancedQuotes_(i))return goog.asserts.fail("String value requires balanced quotes, got: "+i),goog.html.SafeStyle.INNOCUOUS_STRING;if(!goog.html.SafeStyle.hasBalancedSquareBrackets_(i))return goog.asserts.fail("String value requires balanced square brackets and one identifier per pair of brackets, got: "+i),goog.html.SafeStyle.INNOCUOUS_STRING}else return goog.asserts.fail("String value allows only "+goog.html.SafeStyle.VALUE_ALLOWED_CHARS_+" and simple functions, got: "+i),goog.html.SafeStyle.INNOCUOUS_STRING;return goog.html.SafeStyle.sanitizeUrl_(i)},goog.html.SafeStyle.hasBalancedQuotes_=function(i){for(var e=!0,o=!0,d=0;d<i.length;d++){var h=i.charAt(d);h=="'"&&o?e=!e:h=='"'&&e&&(o=!o)}return e&&o},goog.html.SafeStyle.hasBalancedSquareBrackets_=function(i){for(var e=!0,o=/^[-_a-zA-Z0-9]$/,d=0;d<i.length;d++){var h=i.charAt(d);if(h=="]"){if(e)return!1;e=!0}else if(h=="["){if(!e)return!1;e=!1}else if(!e&&!o.test(h))return!1}return e},goog.html.SafeStyle.VALUE_ALLOWED_CHARS_=`[-,."'%_!# a-zA-Z0-9\\[\\]]`,goog.html.SafeStyle.VALUE_RE_=new RegExp("^"+goog.html.SafeStyle.VALUE_ALLOWED_CHARS_+"+$"),goog.html.SafeStyle.URL_RE_=/\b(url\([ \t\n]*)('[ -&(-\[\]-~]*'|"[ !#-\[\]-~]*"|[!#-&*-\[\]-~]*)([ \t\n]*\))/g,goog.html.SafeStyle.ALLOWED_FUNCTIONS_="calc cubic-bezier fit-content hsl hsla linear-gradient matrix minmax repeat rgb rgba (rotate|scale|translate)(X|Y|Z|3d)?".split(" "),goog.html.SafeStyle.FUNCTIONS_RE_=new RegExp("\\b("+goog.html.SafeStyle.ALLOWED_FUNCTIONS_.join("|")+")\\([-+*/0-9a-z.%\\[\\], ]+\\)","g"),goog.html.SafeStyle.COMMENT_RE_=/\/\*/,goog.html.SafeStyle.sanitizeUrl_=function(i){return i.replace(goog.html.SafeStyle.URL_RE_,function(e,o,d,h){var g="";return d=d.replace(/^(['"])(.*)\1$/,function(b,$,j){return g=$,j}),e=goog.html.SafeUrl.sanitize(d).getTypedStringValue(),o+g+e+g+h})},goog.html.SafeStyle.concat=function(i){var e="",o=function(d){Array.isArray(d)?goog.array.forEach(d,o):e+=goog.html.SafeStyle.unwrap(d)};return goog.array.forEach(arguments,o),e?goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(e):goog.html.SafeStyle.EMPTY},goog.html.SafeStyleSheet=function(){this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_="",this.SAFE_STYLE_SHEET_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeStyleSheet.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.SafeStyleSheet.prototype.implementsGoogStringTypedString=!0,goog.html.SafeStyleSheet.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeStyleSheet.createRule=function(i,e){if(goog.string.internal.contains(i,"<"))throw Error("Selector does not allow '<', got: "+i);var o=i.replace(/('|")((?!\1)[^\r\n\f\\]|\\[\s\S])*\1/g,"");if(!/^[-_a-zA-Z0-9#.:* ,>+~[\]()=^$|]+$/.test(o))throw Error("Selector allows only [-_a-zA-Z0-9#.:* ,>+~[\\]()=^$|] and strings, got: "+i);if(!goog.html.SafeStyleSheet.hasBalancedBrackets_(o))throw Error("() and [] in selector must be balanced, got: "+i);return e instanceof goog.html.SafeStyle||(e=goog.html.SafeStyle.create(e)),i=i+"{"+goog.html.SafeStyle.unwrap(e).replace(/</g,"\\3C ")+"}",goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(i)},goog.html.SafeStyleSheet.hasBalancedBrackets_=function(i){for(var e={"(":")","[":"]"},o=[],d=0;d<i.length;d++){var h=i[d];if(e[h])o.push(e[h]);else if(goog.object.contains(e,h)&&o.pop()!=h)return!1}return o.length==0},goog.html.SafeStyleSheet.concat=function(i){var e="",o=function(d){Array.isArray(d)?goog.array.forEach(d,o):e+=goog.html.SafeStyleSheet.unwrap(d)};return goog.array.forEach(arguments,o),goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(e)},goog.html.SafeStyleSheet.fromConstant=function(i){return i=goog.string.Const.unwrap(i),i.length===0?goog.html.SafeStyleSheet.EMPTY:(goog.asserts.assert(!goog.string.internal.contains(i,"<"),"Forbidden '<' character in style sheet string: "+i),goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(i))},goog.html.SafeStyleSheet.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_},goog.DEBUG&&(goog.html.SafeStyleSheet.prototype.toString=function(){return"SafeStyleSheet{"+this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_+"}"}),goog.html.SafeStyleSheet.unwrap=function(i){return i instanceof goog.html.SafeStyleSheet&&i.constructor===goog.html.SafeStyleSheet&&i.SAFE_STYLE_SHEET_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeStyleSheet.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?i.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_:(goog.asserts.fail("expected object of type SafeStyleSheet, got '"+i+"' of type "+goog.typeOf(i)),"type_error:SafeStyleSheet")},goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse=function(i){return new goog.html.SafeStyleSheet().initSecurityPrivateDoNotAccessOrElse_(i)},goog.html.SafeStyleSheet.prototype.initSecurityPrivateDoNotAccessOrElse_=function(i){return this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_=i,this},goog.html.SafeStyleSheet.EMPTY=goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(""),goog.labs={},goog.labs.userAgent={},goog.labs.userAgent.util={},goog.labs.userAgent.util.getNativeUserAgentString_=function(){var i=goog.labs.userAgent.util.getNavigator_();return i&&(i=i.userAgent)?i:""},goog.labs.userAgent.util.getNavigator_=function(){return goog.global.navigator},goog.labs.userAgent.util.userAgent_=goog.labs.userAgent.util.getNativeUserAgentString_(),goog.labs.userAgent.util.setUserAgent=function(i){goog.labs.userAgent.util.userAgent_=i||goog.labs.userAgent.util.getNativeUserAgentString_()},goog.labs.userAgent.util.getUserAgent=function(){return goog.labs.userAgent.util.userAgent_},goog.labs.userAgent.util.matchUserAgent=function(i){var e=goog.labs.userAgent.util.getUserAgent();return goog.string.internal.contains(e,i)},goog.labs.userAgent.util.matchUserAgentIgnoreCase=function(i){var e=goog.labs.userAgent.util.getUserAgent();return goog.string.internal.caseInsensitiveContains(e,i)},goog.labs.userAgent.util.extractVersionTuples=function(i){for(var e=/(\w[\w ]+)\/([^\s]+)\s*(?:\((.*?)\))?/g,o=[],d;d=e.exec(i);)o.push([d[1],d[2],d[3]||void 0]);return o},goog.labs.userAgent.browser={},goog.labs.userAgent.browser.matchOpera_=function(){return goog.labs.userAgent.util.matchUserAgent("Opera")},goog.labs.userAgent.browser.matchIE_=function(){return goog.labs.userAgent.util.matchUserAgent("Trident")||goog.labs.userAgent.util.matchUserAgent("MSIE")},goog.labs.userAgent.browser.matchEdgeHtml_=function(){return goog.labs.userAgent.util.matchUserAgent("Edge")},goog.labs.userAgent.browser.matchEdgeChromium_=function(){return goog.labs.userAgent.util.matchUserAgent("Edg/")},goog.labs.userAgent.browser.matchOperaChromium_=function(){return goog.labs.userAgent.util.matchUserAgent("OPR")},goog.labs.userAgent.browser.matchFirefox_=function(){return goog.labs.userAgent.util.matchUserAgent("Firefox")||goog.labs.userAgent.util.matchUserAgent("FxiOS")},goog.labs.userAgent.browser.matchSafari_=function(){return goog.labs.userAgent.util.matchUserAgent("Safari")&&!(goog.labs.userAgent.browser.matchChrome_()||goog.labs.userAgent.browser.matchCoast_()||goog.labs.userAgent.browser.matchOpera_()||goog.labs.userAgent.browser.matchEdgeHtml_()||goog.labs.userAgent.browser.matchEdgeChromium_()||goog.labs.userAgent.browser.matchOperaChromium_()||goog.labs.userAgent.browser.matchFirefox_()||goog.labs.userAgent.browser.isSilk()||goog.labs.userAgent.util.matchUserAgent("Android"))},goog.labs.userAgent.browser.matchCoast_=function(){return goog.labs.userAgent.util.matchUserAgent("Coast")},goog.labs.userAgent.browser.matchIosWebview_=function(){return(goog.labs.userAgent.util.matchUserAgent("iPad")||goog.labs.userAgent.util.matchUserAgent("iPhone"))&&!goog.labs.userAgent.browser.matchSafari_()&&!goog.labs.userAgent.browser.matchChrome_()&&!goog.labs.userAgent.browser.matchCoast_()&&!goog.labs.userAgent.browser.matchFirefox_()&&goog.labs.userAgent.util.matchUserAgent("AppleWebKit")},goog.labs.userAgent.browser.matchChrome_=function(){return(goog.labs.userAgent.util.matchUserAgent("Chrome")||goog.labs.userAgent.util.matchUserAgent("CriOS"))&&!goog.labs.userAgent.browser.matchEdgeHtml_()},goog.labs.userAgent.browser.matchAndroidBrowser_=function(){return goog.labs.userAgent.util.matchUserAgent("Android")&&!(goog.labs.userAgent.browser.isChrome()||goog.labs.userAgent.browser.isFirefox()||goog.labs.userAgent.browser.isOpera()||goog.labs.userAgent.browser.isSilk())},goog.labs.userAgent.browser.isOpera=goog.labs.userAgent.browser.matchOpera_,goog.labs.userAgent.browser.isIE=goog.labs.userAgent.browser.matchIE_,goog.labs.userAgent.browser.isEdge=goog.labs.userAgent.browser.matchEdgeHtml_,goog.labs.userAgent.browser.isEdgeChromium=goog.labs.userAgent.browser.matchEdgeChromium_,goog.labs.userAgent.browser.isOperaChromium=goog.labs.userAgent.browser.matchOperaChromium_,goog.labs.userAgent.browser.isFirefox=goog.labs.userAgent.browser.matchFirefox_,goog.labs.userAgent.browser.isSafari=goog.labs.userAgent.browser.matchSafari_,goog.labs.userAgent.browser.isCoast=goog.labs.userAgent.browser.matchCoast_,goog.labs.userAgent.browser.isIosWebview=goog.labs.userAgent.browser.matchIosWebview_,goog.labs.userAgent.browser.isChrome=goog.labs.userAgent.browser.matchChrome_,goog.labs.userAgent.browser.isAndroidBrowser=goog.labs.userAgent.browser.matchAndroidBrowser_,goog.labs.userAgent.browser.isSilk=function(){return goog.labs.userAgent.util.matchUserAgent("Silk")},goog.labs.userAgent.browser.getVersion=function(){function i(h){return h=goog.array.find(h,d),o[h]||""}var e=goog.labs.userAgent.util.getUserAgent();if(goog.labs.userAgent.browser.isIE())return goog.labs.userAgent.browser.getIEVersion_(e);e=goog.labs.userAgent.util.extractVersionTuples(e);var o={};goog.array.forEach(e,function(h){o[h[0]]=h[1]});var d=goog.partial(goog.object.containsKey,o);return goog.labs.userAgent.browser.isOpera()?i(["Version","Opera"]):goog.labs.userAgent.browser.isEdge()?i(["Edge"]):goog.labs.userAgent.browser.isEdgeChromium()?i(["Edg"]):goog.labs.userAgent.browser.isChrome()?i(["Chrome","CriOS","HeadlessChrome"]):(e=e[2])&&e[1]||""},goog.labs.userAgent.browser.isVersionOrHigher=function(i){return 0<=goog.string.internal.compareVersions(goog.labs.userAgent.browser.getVersion(),i)},goog.labs.userAgent.browser.getIEVersion_=function(i){var e=/rv: *([\d\.]*)/.exec(i);if(e&&e[1])return e[1];e="";var o=/MSIE +([\d\.]+)/.exec(i);if(o&&o[1])if(i=/Trident\/(\d.\d)/.exec(i),o[1]=="7.0")if(i&&i[1])switch(i[1]){case"4.0":e="8.0";break;case"5.0":e="9.0";break;case"6.0":e="10.0";break;case"7.0":e="11.0"}else e="7.0";else e=o[1];return e},goog.html.SafeHtml=function(){this.privateDoNotAccessOrElseSafeHtmlWrappedValue_="",this.SAFE_HTML_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeHtml.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_,this.dir_=null},goog.html.SafeHtml.ENABLE_ERROR_MESSAGES=goog.DEBUG,goog.html.SafeHtml.SUPPORT_STYLE_ATTRIBUTE=!0,goog.html.SafeHtml.prototype.implementsGoogI18nBidiDirectionalString=!0,goog.html.SafeHtml.prototype.getDirection=function(){return this.dir_},goog.html.SafeHtml.prototype.implementsGoogStringTypedString=!0,goog.html.SafeHtml.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeHtmlWrappedValue_.toString()},goog.DEBUG&&(goog.html.SafeHtml.prototype.toString=function(){return"SafeHtml{"+this.privateDoNotAccessOrElseSafeHtmlWrappedValue_+"}"}),goog.html.SafeHtml.unwrap=function(i){return goog.html.SafeHtml.unwrapTrustedHTML(i).toString()},goog.html.SafeHtml.unwrapTrustedHTML=function(i){return i instanceof goog.html.SafeHtml&&i.constructor===goog.html.SafeHtml&&i.SAFE_HTML_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeHtml.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?i.privateDoNotAccessOrElseSafeHtmlWrappedValue_:(goog.asserts.fail("expected object of type SafeHtml, got '"+i+"' of type "+goog.typeOf(i)),"type_error:SafeHtml")},goog.html.SafeHtml.htmlEscape=function(i){if(i instanceof goog.html.SafeHtml)return i;var e=typeof i=="object",o=null;return e&&i.implementsGoogI18nBidiDirectionalString&&(o=i.getDirection()),i=e&&i.implementsGoogStringTypedString?i.getTypedStringValue():String(i),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(goog.string.internal.htmlEscape(i),o)},goog.html.SafeHtml.htmlEscapePreservingNewlines=function(i){return i instanceof goog.html.SafeHtml?i:(i=goog.html.SafeHtml.htmlEscape(i),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(goog.string.internal.newLineToBr(goog.html.SafeHtml.unwrap(i)),i.getDirection()))},goog.html.SafeHtml.htmlEscapePreservingNewlinesAndSpaces=function(i){return i instanceof goog.html.SafeHtml?i:(i=goog.html.SafeHtml.htmlEscape(i),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(goog.string.internal.whitespaceEscape(goog.html.SafeHtml.unwrap(i)),i.getDirection()))},goog.html.SafeHtml.from=goog.html.SafeHtml.htmlEscape,goog.html.SafeHtml.comment=function(i){return goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse("<!--"+goog.string.internal.htmlEscape(i)+"-->",null)},goog.html.SafeHtml.VALID_NAMES_IN_TAG_=/^[a-zA-Z0-9-]+$/,goog.html.SafeHtml.URL_ATTRIBUTES_={action:!0,cite:!0,data:!0,formaction:!0,href:!0,manifest:!0,poster:!0,src:!0},goog.html.SafeHtml.NOT_ALLOWED_TAG_NAMES_={APPLET:!0,BASE:!0,EMBED:!0,IFRAME:!0,LINK:!0,MATH:!0,META:!0,OBJECT:!0,SCRIPT:!0,STYLE:!0,SVG:!0,TEMPLATE:!0},goog.html.SafeHtml.create=function(i,e,o){return goog.html.SafeHtml.verifyTagName(String(i)),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse(String(i),e,o)},goog.html.SafeHtml.verifyTagName=function(i){if(!goog.html.SafeHtml.VALID_NAMES_IN_TAG_.test(i))throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?"Invalid tag name <"+i+">.":"");if(i.toUpperCase()in goog.html.SafeHtml.NOT_ALLOWED_TAG_NAMES_)throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?"Tag name <"+i+"> is not allowed for SafeHtml.":"")},goog.html.SafeHtml.createIframe=function(i,e,o,d){i&&goog.html.TrustedResourceUrl.unwrap(i);var h={};return h.src=i||null,h.srcdoc=e&&goog.html.SafeHtml.unwrap(e),i=goog.html.SafeHtml.combineAttributes(h,{sandbox:""},o),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("iframe",i,d)},goog.html.SafeHtml.createSandboxIframe=function(i,e,o,d){if(!goog.html.SafeHtml.canUseSandboxIframe())throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?"The browser does not support sandboxed iframes.":"");var h={};return h.src=i?goog.html.SafeUrl.unwrap(goog.html.SafeUrl.sanitize(i)):null,h.srcdoc=e||null,h.sandbox="",i=goog.html.SafeHtml.combineAttributes(h,{},o),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("iframe",i,d)},goog.html.SafeHtml.canUseSandboxIframe=function(){return goog.global.HTMLIFrameElement&&"sandbox"in goog.global.HTMLIFrameElement.prototype},goog.html.SafeHtml.createScriptSrc=function(i,e){return goog.html.TrustedResourceUrl.unwrap(i),i=goog.html.SafeHtml.combineAttributes({src:i},{},e),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("script",i)},goog.html.SafeHtml.createScript=function(i,e){for(var o in e){var d=o.toLowerCase();if(d=="language"||d=="src"||d=="text"||d=="type")throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'Cannot set "'+d+'" attribute':"")}for(o="",i=goog.array.concat(i),d=0;d<i.length;d++)o+=goog.html.SafeScript.unwrap(i[d]);return i=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(o,goog.i18n.bidi.Dir.NEUTRAL),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("script",e,i)},goog.html.SafeHtml.createStyle=function(i,e){e=goog.html.SafeHtml.combineAttributes({type:"text/css"},{},e);var o="";i=goog.array.concat(i);for(var d=0;d<i.length;d++)o+=goog.html.SafeStyleSheet.unwrap(i[d]);return i=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(o,goog.i18n.bidi.Dir.NEUTRAL),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("style",e,i)},goog.html.SafeHtml.createMetaRefresh=function(i,e){return i=goog.html.SafeUrl.unwrap(goog.html.SafeUrl.sanitize(i)),(goog.labs.userAgent.browser.isIE()||goog.labs.userAgent.browser.isEdge())&&goog.string.internal.contains(i,";")&&(i="'"+i.replace(/'/g,"%27")+"'"),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("meta",{"http-equiv":"refresh",content:(e||0)+"; url="+i})},goog.html.SafeHtml.getAttrNameAndValue_=function(i,e,o){if(o instanceof goog.string.Const)o=goog.string.Const.unwrap(o);else if(e.toLowerCase()=="style")if(goog.html.SafeHtml.SUPPORT_STYLE_ATTRIBUTE)o=goog.html.SafeHtml.getStyleValue_(o);else throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'Attribute "style" not supported.':"");else{if(/^on/i.test(e))throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'Attribute "'+e+'" requires goog.string.Const value, "'+o+'" given.':"");if(e.toLowerCase()in goog.html.SafeHtml.URL_ATTRIBUTES_)if(o instanceof goog.html.TrustedResourceUrl)o=goog.html.TrustedResourceUrl.unwrap(o);else if(o instanceof goog.html.SafeUrl)o=goog.html.SafeUrl.unwrap(o);else if(typeof o=="string")o=goog.html.SafeUrl.sanitize(o).getTypedStringValue();else throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'Attribute "'+e+'" on tag "'+i+'" requires goog.html.SafeUrl, goog.string.Const, or string, value "'+o+'" given.':"")}return o.implementsGoogStringTypedString&&(o=o.getTypedStringValue()),goog.asserts.assert(typeof o=="string"||typeof o=="number","String or number value expected, got "+typeof o+" with value: "+o),e+'="'+goog.string.internal.htmlEscape(String(o))+'"'},goog.html.SafeHtml.getStyleValue_=function(i){if(!goog.isObject(i))throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'The "style" attribute requires goog.html.SafeStyle or map of style properties, '+typeof i+" given: "+i:"");return i instanceof goog.html.SafeStyle||(i=goog.html.SafeStyle.create(i)),goog.html.SafeStyle.unwrap(i)},goog.html.SafeHtml.createWithDir=function(i,e,o,d){return e=goog.html.SafeHtml.create(e,o,d),e.dir_=i,e},goog.html.SafeHtml.join=function(i,e){i=goog.html.SafeHtml.htmlEscape(i);var o=i.getDirection(),d=[],h=function(g){Array.isArray(g)?goog.array.forEach(g,h):(g=goog.html.SafeHtml.htmlEscape(g),d.push(goog.html.SafeHtml.unwrap(g)),g=g.getDirection(),o==goog.i18n.bidi.Dir.NEUTRAL?o=g:g!=goog.i18n.bidi.Dir.NEUTRAL&&o!=g&&(o=null))};return goog.array.forEach(e,h),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(d.join(goog.html.SafeHtml.unwrap(i)),o)},goog.html.SafeHtml.concat=function(i){return goog.html.SafeHtml.join(goog.html.SafeHtml.EMPTY,Array.prototype.slice.call(arguments))},goog.html.SafeHtml.concatWithDir=function(i,e){var o=goog.html.SafeHtml.concat(goog.array.slice(arguments,1));return o.dir_=i,o},goog.html.SafeHtml.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse=function(i,e){return new goog.html.SafeHtml().initSecurityPrivateDoNotAccessOrElse_(i,e)},goog.html.SafeHtml.prototype.initSecurityPrivateDoNotAccessOrElse_=function(i,e){return this.privateDoNotAccessOrElseSafeHtmlWrappedValue_=goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY?goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY.createHTML(i):i,this.dir_=e,this},goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse=function(i,e,o){var d=null,h="<"+i+goog.html.SafeHtml.stringifyAttributes(i,e);return o==null?o=[]:Array.isArray(o)||(o=[o]),goog.dom.tags.isVoidTag(i.toLowerCase())?(goog.asserts.assert(!o.length,"Void tag <"+i+"> does not allow content."),h+=">"):(d=goog.html.SafeHtml.concat(o),h+=">"+goog.html.SafeHtml.unwrap(d)+"</"+i+">",d=d.getDirection()),(i=e&&e.dir)&&(d=/^(ltr|rtl|auto)$/i.test(i)?goog.i18n.bidi.Dir.NEUTRAL:null),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(h,d)},goog.html.SafeHtml.stringifyAttributes=function(i,e){var o="";if(e)for(var d in e){if(!goog.html.SafeHtml.VALID_NAMES_IN_TAG_.test(d))throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'Invalid attribute name "'+d+'".':"");var h=e[d];h!=null&&(o+=" "+goog.html.SafeHtml.getAttrNameAndValue_(i,d,h))}return o},goog.html.SafeHtml.combineAttributes=function(i,e,o){var d={},h;for(h in i)goog.asserts.assert(h.toLowerCase()==h,"Must be lower case"),d[h]=i[h];for(h in e)goog.asserts.assert(h.toLowerCase()==h,"Must be lower case"),d[h]=e[h];if(o)for(h in o){var g=h.toLowerCase();if(g in i)throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'Cannot override "'+g+'" attribute, got "'+h+'" with value "'+o[h]+'"':"");g in e&&delete d[g],d[h]=o[h]}return d},goog.html.SafeHtml.DOCTYPE_HTML=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse("<!DOCTYPE html>",goog.i18n.bidi.Dir.NEUTRAL),goog.html.SafeHtml.EMPTY=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse("",goog.i18n.bidi.Dir.NEUTRAL),goog.html.SafeHtml.BR=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse("<br>",goog.i18n.bidi.Dir.NEUTRAL),goog.html.uncheckedconversions={},goog.html.uncheckedconversions.safeHtmlFromStringKnownToSatisfyTypeContract=function(i,e,o){return goog.asserts.assertString(goog.string.Const.unwrap(i),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(i)),"must provide non-empty justification"),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(e,o||null)},goog.html.uncheckedconversions.safeScriptFromStringKnownToSatisfyTypeContract=function(i,e){return goog.asserts.assertString(goog.string.Const.unwrap(i),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(i)),"must provide non-empty justification"),goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(e)},goog.html.uncheckedconversions.safeStyleFromStringKnownToSatisfyTypeContract=function(i,e){return goog.asserts.assertString(goog.string.Const.unwrap(i),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(i)),"must provide non-empty justification"),goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(e)},goog.html.uncheckedconversions.safeStyleSheetFromStringKnownToSatisfyTypeContract=function(i,e){return goog.asserts.assertString(goog.string.Const.unwrap(i),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(i)),"must provide non-empty justification"),goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(e)},goog.html.uncheckedconversions.safeUrlFromStringKnownToSatisfyTypeContract=function(i,e){return goog.asserts.assertString(goog.string.Const.unwrap(i),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(i)),"must provide non-empty justification"),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e)},goog.html.uncheckedconversions.trustedResourceUrlFromStringKnownToSatisfyTypeContract=function(i,e){return goog.asserts.assertString(goog.string.Const.unwrap(i),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(i)),"must provide non-empty justification"),goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(e)},goog.dom.safe={},goog.dom.safe.InsertAdjacentHtmlPosition={AFTERBEGIN:"afterbegin",AFTEREND:"afterend",BEFOREBEGIN:"beforebegin",BEFOREEND:"beforeend"},goog.dom.safe.insertAdjacentHtml=function(i,e,o){i.insertAdjacentHTML(e,goog.html.SafeHtml.unwrapTrustedHTML(o))},goog.dom.safe.SET_INNER_HTML_DISALLOWED_TAGS_={MATH:!0,SCRIPT:!0,STYLE:!0,SVG:!0,TEMPLATE:!0},goog.dom.safe.isInnerHtmlCleanupRecursive_=goog.functions.cacheReturnValue(function(){if(goog.DEBUG&&typeof document>"u")return!1;var i=document.createElement("div"),e=document.createElement("div");return e.appendChild(document.createElement("div")),i.appendChild(e),goog.DEBUG&&!i.firstChild?!1:(e=i.firstChild.firstChild,i.innerHTML=goog.html.SafeHtml.unwrapTrustedHTML(goog.html.SafeHtml.EMPTY),!e.parentElement)}),goog.dom.safe.unsafeSetInnerHtmlDoNotUseOrElse=function(i,e){if(goog.dom.safe.isInnerHtmlCleanupRecursive_())for(;i.lastChild;)i.removeChild(i.lastChild);i.innerHTML=goog.html.SafeHtml.unwrapTrustedHTML(e)},goog.dom.safe.setInnerHtml=function(i,e){if(goog.asserts.ENABLE_ASSERTS){var o=i.tagName.toUpperCase();if(goog.dom.safe.SET_INNER_HTML_DISALLOWED_TAGS_[o])throw Error("goog.dom.safe.setInnerHtml cannot be used to set content of "+i.tagName+".")}goog.dom.safe.unsafeSetInnerHtmlDoNotUseOrElse(i,e)},goog.dom.safe.setOuterHtml=function(i,e){i.outerHTML=goog.html.SafeHtml.unwrapTrustedHTML(e)},goog.dom.safe.setFormElementAction=function(i,e){e=e instanceof goog.html.SafeUrl?e:goog.html.SafeUrl.sanitizeAssertUnchanged(e),goog.dom.asserts.assertIsHTMLFormElement(i).action=goog.html.SafeUrl.unwrap(e)},goog.dom.safe.setButtonFormAction=function(i,e){e=e instanceof goog.html.SafeUrl?e:goog.html.SafeUrl.sanitizeAssertUnchanged(e),goog.dom.asserts.assertIsHTMLButtonElement(i).formAction=goog.html.SafeUrl.unwrap(e)},goog.dom.safe.setInputFormAction=function(i,e){e=e instanceof goog.html.SafeUrl?e:goog.html.SafeUrl.sanitizeAssertUnchanged(e),goog.dom.asserts.assertIsHTMLInputElement(i).formAction=goog.html.SafeUrl.unwrap(e)},goog.dom.safe.setStyle=function(i,e){i.style.cssText=goog.html.SafeStyle.unwrap(e)},goog.dom.safe.documentWrite=function(i,e){i.write(goog.html.SafeHtml.unwrapTrustedHTML(e))},goog.dom.safe.setAnchorHref=function(i,e){goog.dom.asserts.assertIsHTMLAnchorElement(i),e=e instanceof goog.html.SafeUrl?e:goog.html.SafeUrl.sanitizeAssertUnchanged(e),i.href=goog.html.SafeUrl.unwrap(e)},goog.dom.safe.setImageSrc=function(i,e){if(goog.dom.asserts.assertIsHTMLImageElement(i),!(e instanceof goog.html.SafeUrl)){var o=/^data:image\//i.test(e);e=goog.html.SafeUrl.sanitizeAssertUnchanged(e,o)}i.src=goog.html.SafeUrl.unwrap(e)},goog.dom.safe.setAudioSrc=function(i,e){if(goog.dom.asserts.assertIsHTMLAudioElement(i),!(e instanceof goog.html.SafeUrl)){var o=/^data:audio\//i.test(e);e=goog.html.SafeUrl.sanitizeAssertUnchanged(e,o)}i.src=goog.html.SafeUrl.unwrap(e)},goog.dom.safe.setVideoSrc=function(i,e){if(goog.dom.asserts.assertIsHTMLVideoElement(i),!(e instanceof goog.html.SafeUrl)){var o=/^data:video\//i.test(e);e=goog.html.SafeUrl.sanitizeAssertUnchanged(e,o)}i.src=goog.html.SafeUrl.unwrap(e)},goog.dom.safe.setEmbedSrc=function(i,e){goog.dom.asserts.assertIsHTMLEmbedElement(i),i.src=goog.html.TrustedResourceUrl.unwrapTrustedScriptURL(e)},goog.dom.safe.setFrameSrc=function(i,e){goog.dom.asserts.assertIsHTMLFrameElement(i),i.src=goog.html.TrustedResourceUrl.unwrap(e)},goog.dom.safe.setIframeSrc=function(i,e){goog.dom.asserts.assertIsHTMLIFrameElement(i),i.src=goog.html.TrustedResourceUrl.unwrap(e)},goog.dom.safe.setIframeSrcdoc=function(i,e){goog.dom.asserts.assertIsHTMLIFrameElement(i),i.srcdoc=goog.html.SafeHtml.unwrapTrustedHTML(e)},goog.dom.safe.setLinkHrefAndRel=function(i,e,o){goog.dom.asserts.assertIsHTMLLinkElement(i),i.rel=o,goog.string.internal.caseInsensitiveContains(o,"stylesheet")?(goog.asserts.assert(e instanceof goog.html.TrustedResourceUrl,'URL must be TrustedResourceUrl because "rel" contains "stylesheet"'),i.href=goog.html.TrustedResourceUrl.unwrap(e)):i.href=e instanceof goog.html.TrustedResourceUrl?goog.html.TrustedResourceUrl.unwrap(e):e instanceof goog.html.SafeUrl?goog.html.SafeUrl.unwrap(e):goog.html.SafeUrl.unwrap(goog.html.SafeUrl.sanitizeAssertUnchanged(e))},goog.dom.safe.setObjectData=function(i,e){goog.dom.asserts.assertIsHTMLObjectElement(i),i.data=goog.html.TrustedResourceUrl.unwrapTrustedScriptURL(e)},goog.dom.safe.setScriptSrc=function(i,e){goog.dom.asserts.assertIsHTMLScriptElement(i),i.src=goog.html.TrustedResourceUrl.unwrapTrustedScriptURL(e),(e=goog.getScriptNonce())&&i.setAttribute("nonce",e)},goog.dom.safe.setScriptContent=function(i,e){goog.dom.asserts.assertIsHTMLScriptElement(i),i.text=goog.html.SafeScript.unwrapTrustedScript(e),(e=goog.getScriptNonce())&&i.setAttribute("nonce",e)},goog.dom.safe.setLocationHref=function(i,e){goog.dom.asserts.assertIsLocation(i),e=e instanceof goog.html.SafeUrl?e:goog.html.SafeUrl.sanitizeAssertUnchanged(e),i.href=goog.html.SafeUrl.unwrap(e)},goog.dom.safe.assignLocation=function(i,e){goog.dom.asserts.assertIsLocation(i),e=e instanceof goog.html.SafeUrl?e:goog.html.SafeUrl.sanitizeAssertUnchanged(e),i.assign(goog.html.SafeUrl.unwrap(e))},goog.dom.safe.replaceLocation=function(i,e){e=e instanceof goog.html.SafeUrl?e:goog.html.SafeUrl.sanitizeAssertUnchanged(e),i.replace(goog.html.SafeUrl.unwrap(e))},goog.dom.safe.openInWindow=function(i,e,o,d,h){return i=i instanceof goog.html.SafeUrl?i:goog.html.SafeUrl.sanitizeAssertUnchanged(i),e=e||goog.global,o=o instanceof goog.string.Const?goog.string.Const.unwrap(o):o||"",e.open(goog.html.SafeUrl.unwrap(i),o,d,h)},goog.dom.safe.parseFromStringHtml=function(i,e){return goog.dom.safe.parseFromString(i,e,"text/html")},goog.dom.safe.parseFromString=function(i,e,o){return i.parseFromString(goog.html.SafeHtml.unwrapTrustedHTML(e),o)},goog.dom.safe.createImageFromBlob=function(i){if(!/^image\/.*/g.test(i.type))throw Error("goog.dom.safe.createImageFromBlob only accepts MIME type image/.*.");var e=goog.global.URL.createObjectURL(i);return i=new goog.global.Image,i.onload=function(){goog.global.URL.revokeObjectURL(e)},goog.dom.safe.setImageSrc(i,goog.html.uncheckedconversions.safeUrlFromStringKnownToSatisfyTypeContract(goog.string.Const.from("Image blob URL."),e)),i},goog.string.DETECT_DOUBLE_ESCAPING=!1,goog.string.FORCE_NON_DOM_HTML_UNESCAPING=!1,goog.string.Unicode={NBSP:" "},goog.string.startsWith=goog.string.internal.startsWith,goog.string.endsWith=goog.string.internal.endsWith,goog.string.caseInsensitiveStartsWith=goog.string.internal.caseInsensitiveStartsWith,goog.string.caseInsensitiveEndsWith=goog.string.internal.caseInsensitiveEndsWith,goog.string.caseInsensitiveEquals=goog.string.internal.caseInsensitiveEquals,goog.string.subs=function(i,e){for(var o=i.split("%s"),d="",h=Array.prototype.slice.call(arguments,1);h.length&&1<o.length;)d+=o.shift()+h.shift();return d+o.join("%s")},goog.string.collapseWhitespace=function(i){return i.replace(/[\s\xa0]+/g," ").replace(/^\s+|\s+$/g,"")},goog.string.isEmptyOrWhitespace=goog.string.internal.isEmptyOrWhitespace,goog.string.isEmptyString=function(i){return i.length==0},goog.string.isEmpty=goog.string.isEmptyOrWhitespace,goog.string.isEmptyOrWhitespaceSafe=function(i){return goog.string.isEmptyOrWhitespace(goog.string.makeSafe(i))},goog.string.isEmptySafe=goog.string.isEmptyOrWhitespaceSafe,goog.string.isBreakingWhitespace=function(i){return!/[^\t\n\r ]/.test(i)},goog.string.isAlpha=function(i){return!/[^a-zA-Z]/.test(i)},goog.string.isNumeric=function(i){return!/[^0-9]/.test(i)},goog.string.isAlphaNumeric=function(i){return!/[^a-zA-Z0-9]/.test(i)},goog.string.isSpace=function(i){return i==" "},goog.string.isUnicodeChar=function(i){return i.length==1&&" "<=i&&"~">=i||""<=i&&"�">=i},goog.string.stripNewlines=function(i){return i.replace(/(\r\n|\r|\n)+/g," ")},goog.string.canonicalizeNewlines=function(i){return i.replace(/(\r\n|\r|\n)/g,`
`)},goog.string.normalizeWhitespace=function(i){return i.replace(/\xa0|\s/g," ")},goog.string.normalizeSpaces=function(i){return i.replace(/\xa0|[ \t]+/g," ")},goog.string.collapseBreakingSpaces=function(i){return i.replace(/[\t\r\n ]+/g," ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,"")},goog.string.trim=goog.string.internal.trim,goog.string.trimLeft=function(i){return i.replace(/^[\s\xa0]+/,"")},goog.string.trimRight=function(i){return i.replace(/[\s\xa0]+$/,"")},goog.string.caseInsensitiveCompare=goog.string.internal.caseInsensitiveCompare,goog.string.numberAwareCompare_=function(i,e,o){if(i==e)return 0;if(!i)return-1;if(!e)return 1;for(var d=i.toLowerCase().match(o),h=e.toLowerCase().match(o),g=Math.min(d.length,h.length),b=0;b<g;b++){o=d[b];var $=h[b];if(o!=$)return i=parseInt(o,10),!isNaN(i)&&(e=parseInt($,10),!isNaN(e)&&i-e)?i-e:o<$?-1:1}return d.length!=h.length?d.length-h.length:i<e?-1:1},goog.string.intAwareCompare=function(i,e){return goog.string.numberAwareCompare_(i,e,/\d+|\D+/g)},goog.string.floatAwareCompare=function(i,e){return goog.string.numberAwareCompare_(i,e,/\d+|\.\d+|\D+/g)},goog.string.numerateCompare=goog.string.floatAwareCompare,goog.string.urlEncode=function(i){return encodeURIComponent(String(i))},goog.string.urlDecode=function(i){return decodeURIComponent(i.replace(/\+/g," "))},goog.string.newLineToBr=goog.string.internal.newLineToBr,goog.string.htmlEscape=function(i,e){return i=goog.string.internal.htmlEscape(i,e),goog.string.DETECT_DOUBLE_ESCAPING&&(i=i.replace(goog.string.E_RE_,"&#101;")),i},goog.string.E_RE_=/e/g,goog.string.unescapeEntities=function(i){return goog.string.contains(i,"&")?!goog.string.FORCE_NON_DOM_HTML_UNESCAPING&&"document"in goog.global?goog.string.unescapeEntitiesUsingDom_(i):goog.string.unescapePureXmlEntities_(i):i},goog.string.unescapeEntitiesWithDocument=function(i,e){return goog.string.contains(i,"&")?goog.string.unescapeEntitiesUsingDom_(i,e):i},goog.string.unescapeEntitiesUsingDom_=function(i,e){var o={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"'},d=e?e.createElement("div"):goog.global.document.createElement("div");return i.replace(goog.string.HTML_ENTITY_PATTERN_,function(h,g){var b=o[h];return b||(g.charAt(0)=="#"&&(g=+("0"+g.substr(1)),isNaN(g)||(b=String.fromCharCode(g))),b||(goog.dom.safe.setInnerHtml(d,goog.html.uncheckedconversions.safeHtmlFromStringKnownToSatisfyTypeContract(goog.string.Const.from("Single HTML entity."),h+" ")),b=d.firstChild.nodeValue.slice(0,-1)),o[h]=b)})},goog.string.unescapePureXmlEntities_=function(i){return i.replace(/&([^;]+);/g,function(e,o){switch(o){case"amp":return"&";case"lt":return"<";case"gt":return">";case"quot":return'"';default:return o.charAt(0)!="#"||(o=+("0"+o.substr(1)),isNaN(o))?e:String.fromCharCode(o)}})},goog.string.HTML_ENTITY_PATTERN_=/&([^;\s<&]+);?/g,goog.string.whitespaceEscape=function(i,e){return goog.string.newLineToBr(i.replace(/  /g," &#160;"),e)},goog.string.preserveSpaces=function(i){return i.replace(/(^|[\n ]) /g,"$1"+goog.string.Unicode.NBSP)},goog.string.stripQuotes=function(i,e){for(var o=e.length,d=0;d<o;d++){var h=o==1?e:e.charAt(d);if(i.charAt(0)==h&&i.charAt(i.length-1)==h)return i.substring(1,i.length-1)}return i},goog.string.truncate=function(i,e,o){return o&&(i=goog.string.unescapeEntities(i)),i.length>e&&(i=i.substring(0,e-3)+"..."),o&&(i=goog.string.htmlEscape(i)),i},goog.string.truncateMiddle=function(i,e,o,d){if(o&&(i=goog.string.unescapeEntities(i)),d&&i.length>e){d>e&&(d=e);var h=i.length-d;i=i.substring(0,e-d)+"..."+i.substring(h)}else i.length>e&&(d=Math.floor(e/2),h=i.length-d,i=i.substring(0,d+e%2)+"..."+i.substring(h));return o&&(i=goog.string.htmlEscape(i)),i},goog.string.specialEscapeChars_={"\0":"\\0","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\x0B",'"':'\\"',"\\":"\\\\","<":"\\u003C"},goog.string.jsEscapeCache_={"'":"\\'"},goog.string.quote=function(i){i=String(i);for(var e=['"'],o=0;o<i.length;o++){var d=i.charAt(o),h=d.charCodeAt(0);e[o+1]=goog.string.specialEscapeChars_[d]||(31<h&&127>h?d:goog.string.escapeChar(d))}return e.push('"'),e.join("")},goog.string.escapeString=function(i){for(var e=[],o=0;o<i.length;o++)e[o]=goog.string.escapeChar(i.charAt(o));return e.join("")},goog.string.escapeChar=function(i){if(i in goog.string.jsEscapeCache_)return goog.string.jsEscapeCache_[i];if(i in goog.string.specialEscapeChars_)return goog.string.jsEscapeCache_[i]=goog.string.specialEscapeChars_[i];var e=i.charCodeAt(0);if(31<e&&127>e)var o=i;else 256>e?(o="\\x",(16>e||256<e)&&(o+="0")):(o="\\u",4096>e&&(o+="0")),o+=e.toString(16).toUpperCase();return goog.string.jsEscapeCache_[i]=o},goog.string.contains=goog.string.internal.contains,goog.string.caseInsensitiveContains=goog.string.internal.caseInsensitiveContains,goog.string.countOf=function(i,e){return i&&e?i.split(e).length-1:0},goog.string.removeAt=function(i,e,o){var d=i;return 0<=e&&e<i.length&&0<o&&(d=i.substr(0,e)+i.substr(e+o,i.length-e-o)),d},goog.string.remove=function(i,e){return i.replace(e,"")},goog.string.removeAll=function(i,e){return e=new RegExp(goog.string.regExpEscape(e),"g"),i.replace(e,"")},goog.string.replaceAll=function(i,e,o){return e=new RegExp(goog.string.regExpEscape(e),"g"),i.replace(e,o.replace(/\$/g,"$$$$"))},goog.string.regExpEscape=function(i){return String(i).replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},goog.string.repeat=String.prototype.repeat?function(i,e){return i.repeat(e)}:function(i,e){return Array(e+1).join(i)},goog.string.padNumber=function(i,e,o){return i=o!==void 0?i.toFixed(o):String(i),o=i.indexOf("."),o==-1&&(o=i.length),goog.string.repeat("0",Math.max(0,e-o))+i},goog.string.makeSafe=function(i){return i==null?"":String(i)},goog.string.buildString=function(i){return Array.prototype.join.call(arguments,"")},goog.string.getRandomString=function(){return Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^goog.now()).toString(36)},goog.string.compareVersions=goog.string.internal.compareVersions,goog.string.hashCode=function(i){for(var e=0,o=0;o<i.length;++o)e=31*e+i.charCodeAt(o)>>>0;return e},goog.string.uniqueStringCounter_=2147483648*Math.random()|0,goog.string.createUniqueString=function(){return"goog_"+goog.string.uniqueStringCounter_++},goog.string.toNumber=function(i){var e=Number(i);return e==0&&goog.string.isEmptyOrWhitespace(i)?NaN:e},goog.string.isLowerCamelCase=function(i){return/^[a-z]+([A-Z][a-z]*)*$/.test(i)},goog.string.isUpperCamelCase=function(i){return/^([A-Z][a-z]*)+$/.test(i)},goog.string.toCamelCase=function(i){return String(i).replace(/\-([a-z])/g,function(e,o){return o.toUpperCase()})},goog.string.toSelectorCase=function(i){return String(i).replace(/([A-Z])/g,"-$1").toLowerCase()},goog.string.toTitleCase=function(i,e){return e=typeof e=="string"?goog.string.regExpEscape(e):"\\s",i.replace(new RegExp("(^"+(e?"|["+e+"]+":"")+")([a-z])","g"),function(o,d,h){return d+h.toUpperCase()})},goog.string.capitalize=function(i){return String(i.charAt(0)).toUpperCase()+String(i.substr(1)).toLowerCase()},goog.string.parseInt=function(i){return isFinite(i)&&(i=String(i)),typeof i=="string"?/^\s*-?0x/i.test(i)?parseInt(i,16):parseInt(i,10):NaN},goog.string.splitLimit=function(i,e,o){i=i.split(e);for(var d=[];0<o&&i.length;)d.push(i.shift()),o--;return i.length&&d.push(i.join(e)),d},goog.string.lastComponent=function(i,e){if(e)typeof e=="string"&&(e=[e]);else return i;for(var o=-1,d=0;d<e.length;d++)if(e[d]!=""){var h=i.lastIndexOf(e[d]);h>o&&(o=h)}return o==-1?i:i.slice(o+1)},goog.string.editDistance=function(i,e){var o=[],d=[];if(i==e)return 0;if(!i.length||!e.length)return Math.max(i.length,e.length);for(var h=0;h<e.length+1;h++)o[h]=h;for(h=0;h<i.length;h++){d[0]=h+1;for(var g=0;g<e.length;g++)d[g+1]=Math.min(d[g]+1,o[g+1]+1,o[g]+ +(i[h]!=e[g]));for(g=0;g<o.length;g++)o[g]=d[g]}return d[e.length]},goog.labs.userAgent.engine={},goog.labs.userAgent.engine.isPresto=function(){return goog.labs.userAgent.util.matchUserAgent("Presto")},goog.labs.userAgent.engine.isTrident=function(){return goog.labs.userAgent.util.matchUserAgent("Trident")||goog.labs.userAgent.util.matchUserAgent("MSIE")},goog.labs.userAgent.engine.isEdge=function(){return goog.labs.userAgent.util.matchUserAgent("Edge")},goog.labs.userAgent.engine.isWebKit=function(){return goog.labs.userAgent.util.matchUserAgentIgnoreCase("WebKit")&&!goog.labs.userAgent.engine.isEdge()},goog.labs.userAgent.engine.isGecko=function(){return goog.labs.userAgent.util.matchUserAgent("Gecko")&&!goog.labs.userAgent.engine.isWebKit()&&!goog.labs.userAgent.engine.isTrident()&&!goog.labs.userAgent.engine.isEdge()},goog.labs.userAgent.engine.getVersion=function(){var i=goog.labs.userAgent.util.getUserAgent();if(i){i=goog.labs.userAgent.util.extractVersionTuples(i);var e=goog.labs.userAgent.engine.getEngineTuple_(i);if(e)return e[0]=="Gecko"?goog.labs.userAgent.engine.getVersionForKey_(i,"Firefox"):e[1];i=i[0];var o;if(i&&(o=i[2])&&(o=/Trident\/([^\s;]+)/.exec(o)))return o[1]}return""},goog.labs.userAgent.engine.getEngineTuple_=function(i){if(!goog.labs.userAgent.engine.isEdge())return i[1];for(var e=0;e<i.length;e++){var o=i[e];if(o[0]=="Edge")return o}},goog.labs.userAgent.engine.isVersionOrHigher=function(i){return 0<=goog.string.compareVersions(goog.labs.userAgent.engine.getVersion(),i)},goog.labs.userAgent.engine.getVersionForKey_=function(i,e){return(i=goog.array.find(i,function(o){return e==o[0]}))&&i[1]||""},goog.labs.userAgent.platform={},goog.labs.userAgent.platform.isAndroid=function(){return goog.labs.userAgent.util.matchUserAgent("Android")},goog.labs.userAgent.platform.isIpod=function(){return goog.labs.userAgent.util.matchUserAgent("iPod")},goog.labs.userAgent.platform.isIphone=function(){return goog.labs.userAgent.util.matchUserAgent("iPhone")&&!goog.labs.userAgent.util.matchUserAgent("iPod")&&!goog.labs.userAgent.util.matchUserAgent("iPad")},goog.labs.userAgent.platform.isIpad=function(){return goog.labs.userAgent.util.matchUserAgent("iPad")},goog.labs.userAgent.platform.isIos=function(){return goog.labs.userAgent.platform.isIphone()||goog.labs.userAgent.platform.isIpad()||goog.labs.userAgent.platform.isIpod()},goog.labs.userAgent.platform.isMacintosh=function(){return goog.labs.userAgent.util.matchUserAgent("Macintosh")},goog.labs.userAgent.platform.isLinux=function(){return goog.labs.userAgent.util.matchUserAgent("Linux")},goog.labs.userAgent.platform.isWindows=function(){return goog.labs.userAgent.util.matchUserAgent("Windows")},goog.labs.userAgent.platform.isChromeOS=function(){return goog.labs.userAgent.util.matchUserAgent("CrOS")},goog.labs.userAgent.platform.isChromecast=function(){return goog.labs.userAgent.util.matchUserAgent("CrKey")},goog.labs.userAgent.platform.isKaiOS=function(){return goog.labs.userAgent.util.matchUserAgentIgnoreCase("KaiOS")},goog.labs.userAgent.platform.getVersion=function(){var i=goog.labs.userAgent.util.getUserAgent(),e="";return goog.labs.userAgent.platform.isWindows()?(e=/Windows (?:NT|Phone) ([0-9.]+)/,e=(i=e.exec(i))?i[1]:"0.0"):goog.labs.userAgent.platform.isIos()?(e=/(?:iPhone|iPod|iPad|CPU)\s+OS\s+(\S+)/,e=(i=e.exec(i))&&i[1].replace(/_/g,".")):goog.labs.userAgent.platform.isMacintosh()?(e=/Mac OS X ([0-9_.]+)/,e=(i=e.exec(i))?i[1].replace(/_/g,"."):"10"):goog.labs.userAgent.platform.isKaiOS()?(e=/(?:KaiOS)\/(\S+)/i,e=(i=e.exec(i))&&i[1]):goog.labs.userAgent.platform.isAndroid()?(e=/Android\s+([^\);]+)(\)|;)/,e=(i=e.exec(i))&&i[1]):goog.labs.userAgent.platform.isChromeOS()&&(e=/(?:CrOS\s+(?:i686|x86_64)\s+([0-9.]+))/,e=(i=e.exec(i))&&i[1]),e||""},goog.labs.userAgent.platform.isVersionOrHigher=function(i){return 0<=goog.string.compareVersions(goog.labs.userAgent.platform.getVersion(),i)},goog.reflect={},goog.reflect.object=function(i,e){return e},goog.reflect.objectProperty=function(i,e){return i},goog.reflect.sinkValue=function(i){return goog.reflect.sinkValue[" "](i),i},goog.reflect.sinkValue[" "]=goog.nullFunction,goog.reflect.canAccessProperty=function(i,e){try{return goog.reflect.sinkValue(i[e]),!0}catch{}return!1},goog.reflect.cache=function(i,e,o,d){return d=d?d(e):e,Object.prototype.hasOwnProperty.call(i,d)?i[d]:i[d]=o(e)},goog.userAgent={},goog.userAgent.ASSUME_IE=!1,goog.userAgent.ASSUME_EDGE=!1,goog.userAgent.ASSUME_GECKO=!1,goog.userAgent.ASSUME_WEBKIT=!1,goog.userAgent.ASSUME_MOBILE_WEBKIT=!1,goog.userAgent.ASSUME_OPERA=!1,goog.userAgent.ASSUME_ANY_VERSION=!1,goog.userAgent.BROWSER_KNOWN_=goog.userAgent.ASSUME_IE||goog.userAgent.ASSUME_EDGE||goog.userAgent.ASSUME_GECKO||goog.userAgent.ASSUME_MOBILE_WEBKIT||goog.userAgent.ASSUME_WEBKIT||goog.userAgent.ASSUME_OPERA,goog.userAgent.getUserAgentString=function(){return goog.labs.userAgent.util.getUserAgent()},goog.userAgent.getNavigatorTyped=function(){return goog.global.navigator||null},goog.userAgent.getNavigator=function(){return goog.userAgent.getNavigatorTyped()},goog.userAgent.OPERA=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_OPERA:goog.labs.userAgent.browser.isOpera(),goog.userAgent.IE=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_IE:goog.labs.userAgent.browser.isIE(),goog.userAgent.EDGE=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_EDGE:goog.labs.userAgent.engine.isEdge(),goog.userAgent.EDGE_OR_IE=goog.userAgent.EDGE||goog.userAgent.IE,goog.userAgent.GECKO=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_GECKO:goog.labs.userAgent.engine.isGecko(),goog.userAgent.WEBKIT=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_WEBKIT||goog.userAgent.ASSUME_MOBILE_WEBKIT:goog.labs.userAgent.engine.isWebKit(),goog.userAgent.isMobile_=function(){return goog.userAgent.WEBKIT&&goog.labs.userAgent.util.matchUserAgent("Mobile")},goog.userAgent.MOBILE=goog.userAgent.ASSUME_MOBILE_WEBKIT||goog.userAgent.isMobile_(),goog.userAgent.SAFARI=goog.userAgent.WEBKIT,goog.userAgent.determinePlatform_=function(){var i=goog.userAgent.getNavigatorTyped();return i&&i.platform||""},goog.userAgent.PLATFORM=goog.userAgent.determinePlatform_(),goog.userAgent.ASSUME_MAC=!1,goog.userAgent.ASSUME_WINDOWS=!1,goog.userAgent.ASSUME_LINUX=!1,goog.userAgent.ASSUME_X11=!1,goog.userAgent.ASSUME_ANDROID=!1,goog.userAgent.ASSUME_IPHONE=!1,goog.userAgent.ASSUME_IPAD=!1,goog.userAgent.ASSUME_IPOD=!1,goog.userAgent.ASSUME_KAIOS=!1,goog.userAgent.PLATFORM_KNOWN_=goog.userAgent.ASSUME_MAC||goog.userAgent.ASSUME_WINDOWS||goog.userAgent.ASSUME_LINUX||goog.userAgent.ASSUME_X11||goog.userAgent.ASSUME_ANDROID||goog.userAgent.ASSUME_IPHONE||goog.userAgent.ASSUME_IPAD||goog.userAgent.ASSUME_IPOD,goog.userAgent.MAC=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_MAC:goog.labs.userAgent.platform.isMacintosh(),goog.userAgent.WINDOWS=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_WINDOWS:goog.labs.userAgent.platform.isWindows(),goog.userAgent.isLegacyLinux_=function(){return goog.labs.userAgent.platform.isLinux()||goog.labs.userAgent.platform.isChromeOS()},goog.userAgent.LINUX=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_LINUX:goog.userAgent.isLegacyLinux_(),goog.userAgent.isX11_=function(){var i=goog.userAgent.getNavigatorTyped();return!!i&&goog.string.contains(i.appVersion||"","X11")},goog.userAgent.X11=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_X11:goog.userAgent.isX11_(),goog.userAgent.ANDROID=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_ANDROID:goog.labs.userAgent.platform.isAndroid(),goog.userAgent.IPHONE=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPHONE:goog.labs.userAgent.platform.isIphone(),goog.userAgent.IPAD=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPAD:goog.labs.userAgent.platform.isIpad(),goog.userAgent.IPOD=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPOD:goog.labs.userAgent.platform.isIpod(),goog.userAgent.IOS=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPHONE||goog.userAgent.ASSUME_IPAD||goog.userAgent.ASSUME_IPOD:goog.labs.userAgent.platform.isIos(),goog.userAgent.KAIOS=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_KAIOS:goog.labs.userAgent.platform.isKaiOS(),goog.userAgent.determineVersion_=function(){var i="",e=goog.userAgent.getVersionRegexResult_();return e&&(i=e?e[1]:""),goog.userAgent.IE&&(e=goog.userAgent.getDocumentMode_(),e!=null&&e>parseFloat(i))?String(e):i},goog.userAgent.getVersionRegexResult_=function(){var i=goog.userAgent.getUserAgentString();if(goog.userAgent.GECKO)return/rv:([^\);]+)(\)|;)/.exec(i);if(goog.userAgent.EDGE)return/Edge\/([\d\.]+)/.exec(i);if(goog.userAgent.IE)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i);if(goog.userAgent.WEBKIT)return/WebKit\/(\S+)/.exec(i);if(goog.userAgent.OPERA)return/(?:Version)[ \/]?(\S+)/.exec(i)},goog.userAgent.getDocumentMode_=function(){var i=goog.global.document;return i?i.documentMode:void 0},goog.userAgent.VERSION=goog.userAgent.determineVersion_(),goog.userAgent.compare=function(i,e){return goog.string.compareVersions(i,e)},goog.userAgent.isVersionOrHigherCache_={},goog.userAgent.isVersionOrHigher=function(i){return goog.userAgent.ASSUME_ANY_VERSION||goog.reflect.cache(goog.userAgent.isVersionOrHigherCache_,i,function(){return 0<=goog.string.compareVersions(goog.userAgent.VERSION,i)})},goog.userAgent.isVersion=goog.userAgent.isVersionOrHigher,goog.userAgent.isDocumentModeOrHigher=function(i){return Number(goog.userAgent.DOCUMENT_MODE)>=i},goog.userAgent.isDocumentMode=goog.userAgent.isDocumentModeOrHigher,goog.userAgent.DOCUMENT_MODE=function(){if(goog.global.document&&goog.userAgent.IE){var i=goog.userAgent.getDocumentMode_();return i||parseInt(goog.userAgent.VERSION,10)||void 0}}(),goog.userAgent.product={},goog.userAgent.product.ASSUME_FIREFOX=!1,goog.userAgent.product.ASSUME_IPHONE=!1,goog.userAgent.product.ASSUME_IPAD=!1,goog.userAgent.product.ASSUME_ANDROID=!1,goog.userAgent.product.ASSUME_CHROME=!1,goog.userAgent.product.ASSUME_SAFARI=!1,goog.userAgent.product.PRODUCT_KNOWN_=goog.userAgent.ASSUME_IE||goog.userAgent.ASSUME_EDGE||goog.userAgent.ASSUME_OPERA||goog.userAgent.product.ASSUME_FIREFOX||goog.userAgent.product.ASSUME_IPHONE||goog.userAgent.product.ASSUME_IPAD||goog.userAgent.product.ASSUME_ANDROID||goog.userAgent.product.ASSUME_CHROME||goog.userAgent.product.ASSUME_SAFARI,goog.userAgent.product.OPERA=goog.userAgent.OPERA,goog.userAgent.product.IE=goog.userAgent.IE,goog.userAgent.product.EDGE=goog.userAgent.EDGE,goog.userAgent.product.FIREFOX=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_FIREFOX:goog.labs.userAgent.browser.isFirefox(),goog.userAgent.product.isIphoneOrIpod_=function(){return goog.labs.userAgent.platform.isIphone()||goog.labs.userAgent.platform.isIpod()},goog.userAgent.product.IPHONE=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_IPHONE:goog.userAgent.product.isIphoneOrIpod_(),goog.userAgent.product.IPAD=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_IPAD:goog.labs.userAgent.platform.isIpad(),goog.userAgent.product.ANDROID=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_ANDROID:goog.labs.userAgent.browser.isAndroidBrowser(),goog.userAgent.product.CHROME=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_CHROME:goog.labs.userAgent.browser.isChrome(),goog.userAgent.product.isSafariDesktop_=function(){return goog.labs.userAgent.browser.isSafari()&&!goog.labs.userAgent.platform.isIos()},goog.userAgent.product.SAFARI=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_SAFARI:goog.userAgent.product.isSafariDesktop_(),goog.crypt.base64={},goog.crypt.base64.DEFAULT_ALPHABET_COMMON_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",goog.crypt.base64.ENCODED_VALS=goog.crypt.base64.DEFAULT_ALPHABET_COMMON_+"+/=",goog.crypt.base64.ENCODED_VALS_WEBSAFE=goog.crypt.base64.DEFAULT_ALPHABET_COMMON_+"-_.",goog.crypt.base64.Alphabet={DEFAULT:0,NO_PADDING:1,WEBSAFE:2,WEBSAFE_DOT_PADDING:3,WEBSAFE_NO_PADDING:4},goog.crypt.base64.paddingChars_="=.",goog.crypt.base64.isPadding_=function(i){return goog.string.contains(goog.crypt.base64.paddingChars_,i)},goog.crypt.base64.byteToCharMaps_={},goog.crypt.base64.charToByteMap_=null,goog.crypt.base64.ASSUME_NATIVE_SUPPORT_=goog.userAgent.GECKO||goog.userAgent.WEBKIT&&!goog.userAgent.product.SAFARI||goog.userAgent.OPERA,goog.crypt.base64.HAS_NATIVE_ENCODE_=goog.crypt.base64.ASSUME_NATIVE_SUPPORT_||typeof goog.global.btoa=="function",goog.crypt.base64.HAS_NATIVE_DECODE_=goog.crypt.base64.ASSUME_NATIVE_SUPPORT_||!goog.userAgent.product.SAFARI&&!goog.userAgent.IE&&typeof goog.global.atob=="function",goog.crypt.base64.encodeByteArray=function(i,e){goog.asserts.assert(goog.isArrayLike(i),"encodeByteArray takes an array as a parameter"),e===void 0&&(e=goog.crypt.base64.Alphabet.DEFAULT),goog.crypt.base64.init_(),e=goog.crypt.base64.byteToCharMaps_[e];for(var o=[],d=0;d<i.length;d+=3){var h=i[d],g=d+1<i.length,b=g?i[d+1]:0,$=d+2<i.length,j=$?i[d+2]:0,et=h>>2;h=(h&3)<<4|b>>4,b=(b&15)<<2|j>>6,j&=63,$||(j=64,g||(b=64)),o.push(e[et],e[h],e[b]||"",e[j]||"")}return o.join("")},goog.crypt.base64.encodeString=function(i,e){return goog.crypt.base64.HAS_NATIVE_ENCODE_&&!e?goog.global.btoa(i):goog.crypt.base64.encodeByteArray(goog.crypt.stringToByteArray(i),e)},goog.crypt.base64.decodeString=function(i,e){if(goog.crypt.base64.HAS_NATIVE_DECODE_&&!e)return goog.global.atob(i);var o="";return goog.crypt.base64.decodeStringInternal_(i,function(d){o+=String.fromCharCode(d)}),o},goog.crypt.base64.decodeStringToByteArray=function(i,e){var o=[];return goog.crypt.base64.decodeStringInternal_(i,function(d){o.push(d)}),o},goog.crypt.base64.decodeStringToUint8Array=function(i){goog.asserts.assert(!goog.userAgent.IE||goog.userAgent.isVersionOrHigher("10"),"Browser does not support typed arrays");var e=i.length,o=3*e/4;o%3?o=Math.floor(o):goog.crypt.base64.isPadding_(i[e-1])&&(o=goog.crypt.base64.isPadding_(i[e-2])?o-2:o-1);var d=new Uint8Array(o),h=0;return goog.crypt.base64.decodeStringInternal_(i,function(g){d[h++]=g}),d.subarray(0,h)},goog.crypt.base64.decodeStringInternal_=function(i,e){function o(j){for(;d<i.length;){var et=i.charAt(d++),tt=goog.crypt.base64.charToByteMap_[et];if(tt!=null)return tt;if(!goog.string.isEmptyOrWhitespace(et))throw Error("Unknown base64 encoding at char: "+et)}return j}goog.crypt.base64.init_();for(var d=0;;){var h=o(-1),g=o(0),b=o(64),$=o(64);if($===64&&h===-1)break;e(h<<2|g>>4),b!=64&&(e(g<<4&240|b>>2),$!=64&&e(b<<6&192|$))}},goog.crypt.base64.init_=function(){if(!goog.crypt.base64.charToByteMap_){goog.crypt.base64.charToByteMap_={};for(var i=goog.crypt.base64.DEFAULT_ALPHABET_COMMON_.split(""),e=["+/=","+/","-_=","-_.","-_"],o=0;5>o;o++){var d=i.concat(e[o].split(""));goog.crypt.base64.byteToCharMaps_[o]=d;for(var h=0;h<d.length;h++){var g=d[h],b=goog.crypt.base64.charToByteMap_[g];b===void 0?goog.crypt.base64.charToByteMap_[g]=h:goog.asserts.assert(b===h)}}}},jspb.utils={},jspb.utils.split64Low=0,jspb.utils.split64High=0,jspb.utils.splitUint64=function(i){var e=i>>>0;i=Math.floor((i-e)/jspb.BinaryConstants.TWO_TO_32)>>>0,jspb.utils.split64Low=e,jspb.utils.split64High=i},jspb.utils.splitInt64=function(i){var e=0>i;i=Math.abs(i);var o=i>>>0;i=Math.floor((i-o)/jspb.BinaryConstants.TWO_TO_32),i>>>=0,e&&(i=~i>>>0,o=(~o>>>0)+1,4294967295<o&&(o=0,i++,4294967295<i&&(i=0))),jspb.utils.split64Low=o,jspb.utils.split64High=i},jspb.utils.splitZigzag64=function(i){var e=0>i;i=2*Math.abs(i),jspb.utils.splitUint64(i),i=jspb.utils.split64Low;var o=jspb.utils.split64High;e&&(i==0?o==0?o=i=4294967295:(o--,i=4294967295):i--),jspb.utils.split64Low=i,jspb.utils.split64High=o},jspb.utils.splitFloat32=function(i){var e=0>i?1:0;if(i=e?-i:i,i===0)0<1/i?(jspb.utils.split64High=0,jspb.utils.split64Low=0):(jspb.utils.split64High=0,jspb.utils.split64Low=2147483648);else if(isNaN(i))jspb.utils.split64High=0,jspb.utils.split64Low=2147483647;else if(i>jspb.BinaryConstants.FLOAT32_MAX)jspb.utils.split64High=0,jspb.utils.split64Low=(e<<31|2139095040)>>>0;else if(i<jspb.BinaryConstants.FLOAT32_MIN)i=Math.round(i/Math.pow(2,-149)),jspb.utils.split64High=0,jspb.utils.split64Low=(e<<31|i)>>>0;else{var o=Math.floor(Math.log(i)/Math.LN2);i*=Math.pow(2,-o),i=Math.round(i*jspb.BinaryConstants.TWO_TO_23),16777216<=i&&++o,jspb.utils.split64High=0,jspb.utils.split64Low=(e<<31|o+127<<23|i&8388607)>>>0}},jspb.utils.splitFloat64=function(i){var e=0>i?1:0;if(i=e?-i:i,i===0)jspb.utils.split64High=0<1/i?0:2147483648,jspb.utils.split64Low=0;else if(isNaN(i))jspb.utils.split64High=2147483647,jspb.utils.split64Low=4294967295;else if(i>jspb.BinaryConstants.FLOAT64_MAX)jspb.utils.split64High=(e<<31|2146435072)>>>0,jspb.utils.split64Low=0;else if(i<jspb.BinaryConstants.FLOAT64_MIN){var o=i/Math.pow(2,-1074);i=o/jspb.BinaryConstants.TWO_TO_32,jspb.utils.split64High=(e<<31|i)>>>0,jspb.utils.split64Low=o>>>0}else{o=i;var d=0;if(2<=o)for(;2<=o&&1023>d;)d++,o/=2;else for(;1>o&&-1022<d;)o*=2,d--;o=i*Math.pow(2,-d),i=o*jspb.BinaryConstants.TWO_TO_20&1048575,o=o*jspb.BinaryConstants.TWO_TO_52>>>0,jspb.utils.split64High=(e<<31|d+1023<<20|i)>>>0,jspb.utils.split64Low=o}},jspb.utils.splitHash64=function(i){var e=i.charCodeAt(0),o=i.charCodeAt(1),d=i.charCodeAt(2),h=i.charCodeAt(3),g=i.charCodeAt(4),b=i.charCodeAt(5),$=i.charCodeAt(6);i=i.charCodeAt(7),jspb.utils.split64Low=e+(o<<8)+(d<<16)+(h<<24)>>>0,jspb.utils.split64High=g+(b<<8)+($<<16)+(i<<24)>>>0},jspb.utils.joinUint64=function(i,e){return e*jspb.BinaryConstants.TWO_TO_32+(i>>>0)},jspb.utils.joinInt64=function(i,e){var o=e&2147483648;return o&&(i=~i+1>>>0,e=~e>>>0,i==0&&(e=e+1>>>0)),i=jspb.utils.joinUint64(i,e),o?-i:i},jspb.utils.toZigzag64=function(i,e,o){var d=e>>31;return o(i<<1^d,(e<<1|i>>>31)^d)},jspb.utils.joinZigzag64=function(i,e){return jspb.utils.fromZigzag64(i,e,jspb.utils.joinInt64)},jspb.utils.fromZigzag64=function(i,e,o){var d=-(i&1);return o((i>>>1|e<<31)^d,e>>>1^d)},jspb.utils.joinFloat32=function(i,e){e=2*(i>>31)+1;var o=i>>>23&255;return i&=8388607,o==255?i?NaN:1/0*e:o==0?e*Math.pow(2,-149)*i:e*Math.pow(2,o-150)*(i+Math.pow(2,23))},jspb.utils.joinFloat64=function(i,e){var o=2*(e>>31)+1,d=e>>>20&2047;return i=jspb.BinaryConstants.TWO_TO_32*(e&1048575)+i,d==2047?i?NaN:1/0*o:d==0?o*Math.pow(2,-1074)*i:o*Math.pow(2,d-1075)*(i+jspb.BinaryConstants.TWO_TO_52)},jspb.utils.joinHash64=function(i,e){return String.fromCharCode(i>>>0&255,i>>>8&255,i>>>16&255,i>>>24&255,e>>>0&255,e>>>8&255,e>>>16&255,e>>>24&255)},jspb.utils.DIGITS="0123456789abcdef".split(""),jspb.utils.ZERO_CHAR_CODE_=48,jspb.utils.A_CHAR_CODE_=97,jspb.utils.joinUnsignedDecimalString=function(i,e){function o(h,g){return h=h?String(h):"",g?"0000000".slice(h.length)+h:h}if(2097151>=e)return""+jspb.utils.joinUint64(i,e);var d=(i>>>24|e<<8)>>>0&16777215;return e=e>>16&65535,i=(i&16777215)+6777216*d+6710656*e,d+=8147497*e,e*=2,1e7<=i&&(d+=Math.floor(i/1e7),i%=1e7),1e7<=d&&(e+=Math.floor(d/1e7),d%=1e7),o(e,0)+o(d,e)+o(i,1)},jspb.utils.joinSignedDecimalString=function(i,e){var o=e&2147483648;return o&&(i=~i+1>>>0,e=~e+(i==0?1:0)>>>0),i=jspb.utils.joinUnsignedDecimalString(i,e),o?"-"+i:i},jspb.utils.hash64ToDecimalString=function(i,e){jspb.utils.splitHash64(i),i=jspb.utils.split64Low;var o=jspb.utils.split64High;return e?jspb.utils.joinSignedDecimalString(i,o):jspb.utils.joinUnsignedDecimalString(i,o)},jspb.utils.hash64ArrayToDecimalStrings=function(i,e){for(var o=Array(i.length),d=0;d<i.length;d++)o[d]=jspb.utils.hash64ToDecimalString(i[d],e);return o},jspb.utils.decimalStringToHash64=function(i){function e(b,$){for(var j=0;8>j&&(b!==1||0<$);j++)$=b*h[j]+$,h[j]=$&255,$>>>=8}function o(){for(var b=0;8>b;b++)h[b]=~h[b]&255}jspb.asserts.assert(0<i.length);var d=!1;i[0]==="-"&&(d=!0,i=i.slice(1));for(var h=[0,0,0,0,0,0,0,0],g=0;g<i.length;g++)e(10,i.charCodeAt(g)-jspb.utils.ZERO_CHAR_CODE_);return d&&(o(),e(1,1)),goog.crypt.byteArrayToString(h)},jspb.utils.splitDecimalString=function(i){jspb.utils.splitHash64(jspb.utils.decimalStringToHash64(i))},jspb.utils.toHexDigit_=function(i){return String.fromCharCode(10>i?jspb.utils.ZERO_CHAR_CODE_+i:jspb.utils.A_CHAR_CODE_-10+i)},jspb.utils.fromHexCharCode_=function(i){return i>=jspb.utils.A_CHAR_CODE_?i-jspb.utils.A_CHAR_CODE_+10:i-jspb.utils.ZERO_CHAR_CODE_},jspb.utils.hash64ToHexString=function(i){var e=Array(18);e[0]="0",e[1]="x";for(var o=0;8>o;o++){var d=i.charCodeAt(7-o);e[2*o+2]=jspb.utils.toHexDigit_(d>>4),e[2*o+3]=jspb.utils.toHexDigit_(d&15)}return e.join("")},jspb.utils.hexStringToHash64=function(i){i=i.toLowerCase(),jspb.asserts.assert(i.length==18),jspb.asserts.assert(i[0]=="0"),jspb.asserts.assert(i[1]=="x");for(var e="",o=0;8>o;o++){var d=jspb.utils.fromHexCharCode_(i.charCodeAt(2*o+2)),h=jspb.utils.fromHexCharCode_(i.charCodeAt(2*o+3));e=String.fromCharCode(16*d+h)+e}return e},jspb.utils.hash64ToNumber=function(i,e){jspb.utils.splitHash64(i),i=jspb.utils.split64Low;var o=jspb.utils.split64High;return e?jspb.utils.joinInt64(i,o):jspb.utils.joinUint64(i,o)},jspb.utils.numberToHash64=function(i){return jspb.utils.splitInt64(i),jspb.utils.joinHash64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.utils.countVarints=function(i,e,o){for(var d=0,h=e;h<o;h++)d+=i[h]>>7;return o-e-d},jspb.utils.countVarintFields=function(i,e,o,d){var h=0;if(d=8*d+jspb.BinaryConstants.WireType.VARINT,128>d)for(;e<o&&i[e++]==d;)for(h++;;){var g=i[e++];if(!(g&128))break}else for(;e<o;){for(g=d;128<g;){if(i[e]!=(g&127|128))return h;e++,g>>=7}if(i[e++]!=g)break;for(h++;g=i[e++],(g&128)!=0;);}return h},jspb.utils.countFixedFields_=function(i,e,o,d,h){var g=0;if(128>d)for(;e<o&&i[e++]==d;)g++,e+=h;else for(;e<o;){for(var b=d;128<b;){if(i[e++]!=(b&127|128))return g;b>>=7}if(i[e++]!=b)break;g++,e+=h}return g},jspb.utils.countFixed32Fields=function(i,e,o,d){return jspb.utils.countFixedFields_(i,e,o,8*d+jspb.BinaryConstants.WireType.FIXED32,4)},jspb.utils.countFixed64Fields=function(i,e,o,d){return jspb.utils.countFixedFields_(i,e,o,8*d+jspb.BinaryConstants.WireType.FIXED64,8)},jspb.utils.countDelimitedFields=function(i,e,o,d){var h=0;for(d=8*d+jspb.BinaryConstants.WireType.DELIMITED;e<o;){for(var g=d;128<g;){if(i[e++]!=(g&127|128))return h;g>>=7}if(i[e++]!=g)break;h++;for(var b=0,$=1;g=i[e++],b+=(g&127)*$,$*=128,(g&128)!=0;);e+=b}return h},jspb.utils.debugBytesToTextFormat=function(i){var e='"';if(i){i=jspb.utils.byteSourceToUint8Array(i);for(var o=0;o<i.length;o++)e+="\\x",16>i[o]&&(e+="0"),e+=i[o].toString(16)}return e+'"'},jspb.utils.debugScalarToTextFormat=function(i){return typeof i=="string"?goog.string.quote(i):i.toString()},jspb.utils.stringToByteArray=function(i){for(var e=new Uint8Array(i.length),o=0;o<i.length;o++){var d=i.charCodeAt(o);if(255<d)throw Error("Conversion error: string contains codepoint outside of byte range");e[o]=d}return e},jspb.utils.byteSourceToUint8Array=function(i){return i.constructor===Uint8Array?i:i.constructor===ArrayBuffer||i.constructor===Array?new Uint8Array(i):i.constructor===String?goog.crypt.base64.decodeStringToUint8Array(i):i instanceof Uint8Array?new Uint8Array(i.buffer,i.byteOffset,i.byteLength):(jspb.asserts.fail("Type not convertible to Uint8Array."),new Uint8Array(0))},jspb.BinaryDecoder=function(i,e,o){this.bytes_=null,this.cursor_=this.end_=this.start_=0,this.error_=!1,i&&this.setBlock(i,e,o)},jspb.BinaryDecoder.instanceCache_=[],jspb.BinaryDecoder.alloc=function(i,e,o){if(jspb.BinaryDecoder.instanceCache_.length){var d=jspb.BinaryDecoder.instanceCache_.pop();return i&&d.setBlock(i,e,o),d}return new jspb.BinaryDecoder(i,e,o)},jspb.BinaryDecoder.prototype.free=function(){this.clear(),100>jspb.BinaryDecoder.instanceCache_.length&&jspb.BinaryDecoder.instanceCache_.push(this)},jspb.BinaryDecoder.prototype.clone=function(){return jspb.BinaryDecoder.alloc(this.bytes_,this.start_,this.end_-this.start_)},jspb.BinaryDecoder.prototype.clear=function(){this.bytes_=null,this.cursor_=this.end_=this.start_=0,this.error_=!1},jspb.BinaryDecoder.prototype.getBuffer=function(){return this.bytes_},jspb.BinaryDecoder.prototype.setBlock=function(i,e,o){this.bytes_=jspb.utils.byteSourceToUint8Array(i),this.start_=e!==void 0?e:0,this.end_=o!==void 0?this.start_+o:this.bytes_.length,this.cursor_=this.start_},jspb.BinaryDecoder.prototype.getEnd=function(){return this.end_},jspb.BinaryDecoder.prototype.setEnd=function(i){this.end_=i},jspb.BinaryDecoder.prototype.reset=function(){this.cursor_=this.start_},jspb.BinaryDecoder.prototype.getCursor=function(){return this.cursor_},jspb.BinaryDecoder.prototype.setCursor=function(i){this.cursor_=i},jspb.BinaryDecoder.prototype.advance=function(i){this.cursor_+=i,jspb.asserts.assert(this.cursor_<=this.end_)},jspb.BinaryDecoder.prototype.atEnd=function(){return this.cursor_==this.end_},jspb.BinaryDecoder.prototype.pastEnd=function(){return this.cursor_>this.end_},jspb.BinaryDecoder.prototype.getError=function(){return this.error_||0>this.cursor_||this.cursor_>this.end_},jspb.BinaryDecoder.prototype.readSplitVarint64=function(i){for(var e=128,o=0,d=0,h=0;4>h&&128<=e;h++)e=this.bytes_[this.cursor_++],o|=(e&127)<<7*h;if(128<=e&&(e=this.bytes_[this.cursor_++],o|=(e&127)<<28,d|=(e&127)>>4),128<=e)for(h=0;5>h&&128<=e;h++)e=this.bytes_[this.cursor_++],d|=(e&127)<<7*h+3;if(128>e)return i(o>>>0,d>>>0);jspb.asserts.fail("Failed to read varint, encoding is invalid."),this.error_=!0},jspb.BinaryDecoder.prototype.readSplitZigzagVarint64=function(i){return this.readSplitVarint64(function(e,o){return jspb.utils.fromZigzag64(e,o,i)})},jspb.BinaryDecoder.prototype.readSplitFixed64=function(i){var e=this.bytes_,o=this.cursor_;this.cursor_+=8;for(var d=0,h=0,g=o+7;g>=o;g--)d=d<<8|e[g],h=h<<8|e[g+4];return i(d,h)},jspb.BinaryDecoder.prototype.skipVarint=function(){for(;this.bytes_[this.cursor_]&128;)this.cursor_++;this.cursor_++},jspb.BinaryDecoder.prototype.unskipVarint=function(i){for(;128<i;)this.cursor_--,i>>>=7;this.cursor_--},jspb.BinaryDecoder.prototype.readUnsignedVarint32=function(){var i=this.bytes_,e=i[this.cursor_+0],o=e&127;return 128>e?(this.cursor_+=1,jspb.asserts.assert(this.cursor_<=this.end_),o):(e=i[this.cursor_+1],o|=(e&127)<<7,128>e?(this.cursor_+=2,jspb.asserts.assert(this.cursor_<=this.end_),o):(e=i[this.cursor_+2],o|=(e&127)<<14,128>e?(this.cursor_+=3,jspb.asserts.assert(this.cursor_<=this.end_),o):(e=i[this.cursor_+3],o|=(e&127)<<21,128>e?(this.cursor_+=4,jspb.asserts.assert(this.cursor_<=this.end_),o):(e=i[this.cursor_+4],o|=(e&15)<<28,128>e?(this.cursor_+=5,jspb.asserts.assert(this.cursor_<=this.end_),o>>>0):(this.cursor_+=5,128<=i[this.cursor_++]&&128<=i[this.cursor_++]&&128<=i[this.cursor_++]&&128<=i[this.cursor_++]&&128<=i[this.cursor_++]&&jspb.asserts.assert(!1),jspb.asserts.assert(this.cursor_<=this.end_),o)))))},jspb.BinaryDecoder.prototype.readSignedVarint32=function(){return~~this.readUnsignedVarint32()},jspb.BinaryDecoder.prototype.readUnsignedVarint32String=function(){return this.readUnsignedVarint32().toString()},jspb.BinaryDecoder.prototype.readSignedVarint32String=function(){return this.readSignedVarint32().toString()},jspb.BinaryDecoder.prototype.readZigzagVarint32=function(){var i=this.readUnsignedVarint32();return i>>>1^-(i&1)},jspb.BinaryDecoder.prototype.readUnsignedVarint64=function(){return this.readSplitVarint64(jspb.utils.joinUint64)},jspb.BinaryDecoder.prototype.readUnsignedVarint64String=function(){return this.readSplitVarint64(jspb.utils.joinUnsignedDecimalString)},jspb.BinaryDecoder.prototype.readSignedVarint64=function(){return this.readSplitVarint64(jspb.utils.joinInt64)},jspb.BinaryDecoder.prototype.readSignedVarint64String=function(){return this.readSplitVarint64(jspb.utils.joinSignedDecimalString)},jspb.BinaryDecoder.prototype.readZigzagVarint64=function(){return this.readSplitVarint64(jspb.utils.joinZigzag64)},jspb.BinaryDecoder.prototype.readZigzagVarintHash64=function(){return this.readSplitZigzagVarint64(jspb.utils.joinHash64)},jspb.BinaryDecoder.prototype.readZigzagVarint64String=function(){return this.readSplitZigzagVarint64(jspb.utils.joinSignedDecimalString)},jspb.BinaryDecoder.prototype.readUint8=function(){var i=this.bytes_[this.cursor_+0];return this.cursor_+=1,jspb.asserts.assert(this.cursor_<=this.end_),i},jspb.BinaryDecoder.prototype.readUint16=function(){var i=this.bytes_[this.cursor_+0],e=this.bytes_[this.cursor_+1];return this.cursor_+=2,jspb.asserts.assert(this.cursor_<=this.end_),i<<0|e<<8},jspb.BinaryDecoder.prototype.readUint32=function(){var i=this.bytes_[this.cursor_+0],e=this.bytes_[this.cursor_+1],o=this.bytes_[this.cursor_+2],d=this.bytes_[this.cursor_+3];return this.cursor_+=4,jspb.asserts.assert(this.cursor_<=this.end_),(i<<0|e<<8|o<<16|d<<24)>>>0},jspb.BinaryDecoder.prototype.readUint64=function(){var i=this.readUint32(),e=this.readUint32();return jspb.utils.joinUint64(i,e)},jspb.BinaryDecoder.prototype.readUint64String=function(){var i=this.readUint32(),e=this.readUint32();return jspb.utils.joinUnsignedDecimalString(i,e)},jspb.BinaryDecoder.prototype.readInt8=function(){var i=this.bytes_[this.cursor_+0];return this.cursor_+=1,jspb.asserts.assert(this.cursor_<=this.end_),i<<24>>24},jspb.BinaryDecoder.prototype.readInt16=function(){var i=this.bytes_[this.cursor_+0],e=this.bytes_[this.cursor_+1];return this.cursor_+=2,jspb.asserts.assert(this.cursor_<=this.end_),(i<<0|e<<8)<<16>>16},jspb.BinaryDecoder.prototype.readInt32=function(){var i=this.bytes_[this.cursor_+0],e=this.bytes_[this.cursor_+1],o=this.bytes_[this.cursor_+2],d=this.bytes_[this.cursor_+3];return this.cursor_+=4,jspb.asserts.assert(this.cursor_<=this.end_),i<<0|e<<8|o<<16|d<<24},jspb.BinaryDecoder.prototype.readInt64=function(){var i=this.readUint32(),e=this.readUint32();return jspb.utils.joinInt64(i,e)},jspb.BinaryDecoder.prototype.readInt64String=function(){var i=this.readUint32(),e=this.readUint32();return jspb.utils.joinSignedDecimalString(i,e)},jspb.BinaryDecoder.prototype.readFloat=function(){var i=this.readUint32();return jspb.utils.joinFloat32(i,0)},jspb.BinaryDecoder.prototype.readDouble=function(){var i=this.readUint32(),e=this.readUint32();return jspb.utils.joinFloat64(i,e)},jspb.BinaryDecoder.prototype.readBool=function(){return!!this.bytes_[this.cursor_++]},jspb.BinaryDecoder.prototype.readEnum=function(){return this.readSignedVarint32()},jspb.BinaryDecoder.prototype.readString=function(i){var e=this.bytes_,o=this.cursor_;i=o+i;for(var d=[],h="";o<i;){var g=e[o++];if(128>g)d.push(g);else{if(192>g)continue;if(224>g){var b=e[o++];d.push((g&31)<<6|b&63)}else if(240>g){b=e[o++];var $=e[o++];d.push((g&15)<<12|(b&63)<<6|$&63)}else if(248>g){b=e[o++],$=e[o++];var j=e[o++];g=(g&7)<<18|(b&63)<<12|($&63)<<6|j&63,g-=65536,d.push((g>>10&1023)+55296,(g&1023)+56320)}}8192<=d.length&&(h+=String.fromCharCode.apply(null,d),d.length=0)}return h+=goog.crypt.byteArrayToString(d),this.cursor_=o,h},jspb.BinaryDecoder.prototype.readStringWithLength=function(){var i=this.readUnsignedVarint32();return this.readString(i)},jspb.BinaryDecoder.prototype.readBytes=function(i){if(0>i||this.cursor_+i>this.bytes_.length)return this.error_=!0,jspb.asserts.fail("Invalid byte length!"),new Uint8Array(0);var e=this.bytes_.subarray(this.cursor_,this.cursor_+i);return this.cursor_+=i,jspb.asserts.assert(this.cursor_<=this.end_),e},jspb.BinaryDecoder.prototype.readVarintHash64=function(){return this.readSplitVarint64(jspb.utils.joinHash64)},jspb.BinaryDecoder.prototype.readFixedHash64=function(){var i=this.bytes_,e=this.cursor_,o=i[e+0],d=i[e+1],h=i[e+2],g=i[e+3],b=i[e+4],$=i[e+5],j=i[e+6];return i=i[e+7],this.cursor_+=8,String.fromCharCode(o,d,h,g,b,$,j,i)},jspb.BinaryReader=function(i,e,o){this.decoder_=jspb.BinaryDecoder.alloc(i,e,o),this.fieldCursor_=this.decoder_.getCursor(),this.nextField_=jspb.BinaryConstants.INVALID_FIELD_NUMBER,this.nextWireType_=jspb.BinaryConstants.WireType.INVALID,this.error_=!1,this.readCallbacks_=null},jspb.BinaryReader.instanceCache_=[],jspb.BinaryReader.alloc=function(i,e,o){if(jspb.BinaryReader.instanceCache_.length){var d=jspb.BinaryReader.instanceCache_.pop();return i&&d.decoder_.setBlock(i,e,o),d}return new jspb.BinaryReader(i,e,o)},jspb.BinaryReader.prototype.alloc=jspb.BinaryReader.alloc,jspb.BinaryReader.prototype.free=function(){this.decoder_.clear(),this.nextField_=jspb.BinaryConstants.INVALID_FIELD_NUMBER,this.nextWireType_=jspb.BinaryConstants.WireType.INVALID,this.error_=!1,this.readCallbacks_=null,100>jspb.BinaryReader.instanceCache_.length&&jspb.BinaryReader.instanceCache_.push(this)},jspb.BinaryReader.prototype.getFieldCursor=function(){return this.fieldCursor_},jspb.BinaryReader.prototype.getCursor=function(){return this.decoder_.getCursor()},jspb.BinaryReader.prototype.getBuffer=function(){return this.decoder_.getBuffer()},jspb.BinaryReader.prototype.getFieldNumber=function(){return this.nextField_},goog.exportProperty(jspb.BinaryReader.prototype,"getFieldNumber",jspb.BinaryReader.prototype.getFieldNumber),jspb.BinaryReader.prototype.getWireType=function(){return this.nextWireType_},jspb.BinaryReader.prototype.isDelimited=function(){return this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED},goog.exportProperty(jspb.BinaryReader.prototype,"isDelimited",jspb.BinaryReader.prototype.isDelimited),jspb.BinaryReader.prototype.isEndGroup=function(){return this.nextWireType_==jspb.BinaryConstants.WireType.END_GROUP},goog.exportProperty(jspb.BinaryReader.prototype,"isEndGroup",jspb.BinaryReader.prototype.isEndGroup),jspb.BinaryReader.prototype.getError=function(){return this.error_||this.decoder_.getError()},jspb.BinaryReader.prototype.setBlock=function(i,e,o){this.decoder_.setBlock(i,e,o),this.nextField_=jspb.BinaryConstants.INVALID_FIELD_NUMBER,this.nextWireType_=jspb.BinaryConstants.WireType.INVALID},jspb.BinaryReader.prototype.reset=function(){this.decoder_.reset(),this.nextField_=jspb.BinaryConstants.INVALID_FIELD_NUMBER,this.nextWireType_=jspb.BinaryConstants.WireType.INVALID},jspb.BinaryReader.prototype.advance=function(i){this.decoder_.advance(i)},jspb.BinaryReader.prototype.nextField=function(){if(this.decoder_.atEnd())return!1;if(this.getError())return jspb.asserts.fail("Decoder hit an error"),!1;this.fieldCursor_=this.decoder_.getCursor();var i=this.decoder_.readUnsignedVarint32(),e=i>>>3;return i&=7,i!=jspb.BinaryConstants.WireType.VARINT&&i!=jspb.BinaryConstants.WireType.FIXED32&&i!=jspb.BinaryConstants.WireType.FIXED64&&i!=jspb.BinaryConstants.WireType.DELIMITED&&i!=jspb.BinaryConstants.WireType.START_GROUP&&i!=jspb.BinaryConstants.WireType.END_GROUP?(jspb.asserts.fail("Invalid wire type: %s (at position %s)",i,this.fieldCursor_),this.error_=!0,!1):(this.nextField_=e,this.nextWireType_=i,!0)},goog.exportProperty(jspb.BinaryReader.prototype,"nextField",jspb.BinaryReader.prototype.nextField),jspb.BinaryReader.prototype.unskipHeader=function(){this.decoder_.unskipVarint(this.nextField_<<3|this.nextWireType_)},jspb.BinaryReader.prototype.skipMatchingFields=function(){var i=this.nextField_;for(this.unskipHeader();this.nextField()&&this.getFieldNumber()==i;)this.skipField();this.decoder_.atEnd()||this.unskipHeader()},jspb.BinaryReader.prototype.skipVarintField=function(){this.nextWireType_!=jspb.BinaryConstants.WireType.VARINT?(jspb.asserts.fail("Invalid wire type for skipVarintField"),this.skipField()):this.decoder_.skipVarint()},jspb.BinaryReader.prototype.skipDelimitedField=function(){if(this.nextWireType_!=jspb.BinaryConstants.WireType.DELIMITED)jspb.asserts.fail("Invalid wire type for skipDelimitedField"),this.skipField();else{var i=this.decoder_.readUnsignedVarint32();this.decoder_.advance(i)}},jspb.BinaryReader.prototype.skipFixed32Field=function(){this.nextWireType_!=jspb.BinaryConstants.WireType.FIXED32?(jspb.asserts.fail("Invalid wire type for skipFixed32Field"),this.skipField()):this.decoder_.advance(4)},jspb.BinaryReader.prototype.skipFixed64Field=function(){this.nextWireType_!=jspb.BinaryConstants.WireType.FIXED64?(jspb.asserts.fail("Invalid wire type for skipFixed64Field"),this.skipField()):this.decoder_.advance(8)},jspb.BinaryReader.prototype.skipGroup=function(){var i=this.nextField_;do{if(!this.nextField()){jspb.asserts.fail("Unmatched start-group tag: stream EOF"),this.error_=!0;break}if(this.nextWireType_==jspb.BinaryConstants.WireType.END_GROUP){this.nextField_!=i&&(jspb.asserts.fail("Unmatched end-group tag"),this.error_=!0);break}this.skipField()}while(!0)},jspb.BinaryReader.prototype.skipField=function(){switch(this.nextWireType_){case jspb.BinaryConstants.WireType.VARINT:this.skipVarintField();break;case jspb.BinaryConstants.WireType.FIXED64:this.skipFixed64Field();break;case jspb.BinaryConstants.WireType.DELIMITED:this.skipDelimitedField();break;case jspb.BinaryConstants.WireType.FIXED32:this.skipFixed32Field();break;case jspb.BinaryConstants.WireType.START_GROUP:this.skipGroup();break;default:jspb.asserts.fail("Invalid wire encoding for field.")}},jspb.BinaryReader.prototype.registerReadCallback=function(i,e){this.readCallbacks_===null&&(this.readCallbacks_={}),jspb.asserts.assert(!this.readCallbacks_[i]),this.readCallbacks_[i]=e},jspb.BinaryReader.prototype.runReadCallback=function(i){return jspb.asserts.assert(this.readCallbacks_!==null),i=this.readCallbacks_[i],jspb.asserts.assert(i),i(this)},jspb.BinaryReader.prototype.readAny=function(i){this.nextWireType_=jspb.BinaryConstants.FieldTypeToWireType(i);var e=jspb.BinaryConstants.FieldType;switch(i){case e.DOUBLE:return this.readDouble();case e.FLOAT:return this.readFloat();case e.INT64:return this.readInt64();case e.UINT64:return this.readUint64();case e.INT32:return this.readInt32();case e.FIXED64:return this.readFixed64();case e.FIXED32:return this.readFixed32();case e.BOOL:return this.readBool();case e.STRING:return this.readString();case e.GROUP:jspb.asserts.fail("Group field type not supported in readAny()");case e.MESSAGE:jspb.asserts.fail("Message field type not supported in readAny()");case e.BYTES:return this.readBytes();case e.UINT32:return this.readUint32();case e.ENUM:return this.readEnum();case e.SFIXED32:return this.readSfixed32();case e.SFIXED64:return this.readSfixed64();case e.SINT32:return this.readSint32();case e.SINT64:return this.readSint64();case e.FHASH64:return this.readFixedHash64();case e.VHASH64:return this.readVarintHash64();default:jspb.asserts.fail("Invalid field type in readAny()")}return 0},jspb.BinaryReader.prototype.readMessage=function(i,e){jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var o=this.decoder_.getEnd(),d=this.decoder_.readUnsignedVarint32();d=this.decoder_.getCursor()+d,this.decoder_.setEnd(d),e(i,this),this.decoder_.setCursor(d),this.decoder_.setEnd(o)},goog.exportProperty(jspb.BinaryReader.prototype,"readMessage",jspb.BinaryReader.prototype.readMessage),jspb.BinaryReader.prototype.readGroup=function(i,e,o){jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.START_GROUP),jspb.asserts.assert(this.nextField_==i),o(e,this),this.error_||this.nextWireType_==jspb.BinaryConstants.WireType.END_GROUP||(jspb.asserts.fail("Group submessage did not end with an END_GROUP tag"),this.error_=!0)},goog.exportProperty(jspb.BinaryReader.prototype,"readGroup",jspb.BinaryReader.prototype.readGroup),jspb.BinaryReader.prototype.getFieldDecoder=function(){jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var i=this.decoder_.readUnsignedVarint32(),e=this.decoder_.getCursor(),o=e+i;return i=jspb.BinaryDecoder.alloc(this.decoder_.getBuffer(),e,i),this.decoder_.setCursor(o),i},jspb.BinaryReader.prototype.readInt32=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint32()},goog.exportProperty(jspb.BinaryReader.prototype,"readInt32",jspb.BinaryReader.prototype.readInt32),jspb.BinaryReader.prototype.readInt32String=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint32String()},jspb.BinaryReader.prototype.readInt64=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint64()},goog.exportProperty(jspb.BinaryReader.prototype,"readInt64",jspb.BinaryReader.prototype.readInt64),jspb.BinaryReader.prototype.readInt64String=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint64String()},jspb.BinaryReader.prototype.readUint32=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readUnsignedVarint32()},goog.exportProperty(jspb.BinaryReader.prototype,"readUint32",jspb.BinaryReader.prototype.readUint32),jspb.BinaryReader.prototype.readUint32String=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readUnsignedVarint32String()},jspb.BinaryReader.prototype.readUint64=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readUnsignedVarint64()},goog.exportProperty(jspb.BinaryReader.prototype,"readUint64",jspb.BinaryReader.prototype.readUint64),jspb.BinaryReader.prototype.readUint64String=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readUnsignedVarint64String()},jspb.BinaryReader.prototype.readSint32=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readZigzagVarint32()},goog.exportProperty(jspb.BinaryReader.prototype,"readSint32",jspb.BinaryReader.prototype.readSint32),jspb.BinaryReader.prototype.readSint64=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readZigzagVarint64()},goog.exportProperty(jspb.BinaryReader.prototype,"readSint64",jspb.BinaryReader.prototype.readSint64),jspb.BinaryReader.prototype.readSint64String=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readZigzagVarint64String()},jspb.BinaryReader.prototype.readFixed32=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED32),this.decoder_.readUint32()},goog.exportProperty(jspb.BinaryReader.prototype,"readFixed32",jspb.BinaryReader.prototype.readFixed32),jspb.BinaryReader.prototype.readFixed64=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readUint64()},goog.exportProperty(jspb.BinaryReader.prototype,"readFixed64",jspb.BinaryReader.prototype.readFixed64),jspb.BinaryReader.prototype.readFixed64String=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readUint64String()},jspb.BinaryReader.prototype.readSfixed32=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED32),this.decoder_.readInt32()},goog.exportProperty(jspb.BinaryReader.prototype,"readSfixed32",jspb.BinaryReader.prototype.readSfixed32),jspb.BinaryReader.prototype.readSfixed32String=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED32),this.decoder_.readInt32().toString()},jspb.BinaryReader.prototype.readSfixed64=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readInt64()},goog.exportProperty(jspb.BinaryReader.prototype,"readSfixed64",jspb.BinaryReader.prototype.readSfixed64),jspb.BinaryReader.prototype.readSfixed64String=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readInt64String()},jspb.BinaryReader.prototype.readFloat=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED32),this.decoder_.readFloat()},goog.exportProperty(jspb.BinaryReader.prototype,"readFloat",jspb.BinaryReader.prototype.readFloat),jspb.BinaryReader.prototype.readDouble=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readDouble()},goog.exportProperty(jspb.BinaryReader.prototype,"readDouble",jspb.BinaryReader.prototype.readDouble),jspb.BinaryReader.prototype.readBool=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),!!this.decoder_.readUnsignedVarint32()},goog.exportProperty(jspb.BinaryReader.prototype,"readBool",jspb.BinaryReader.prototype.readBool),jspb.BinaryReader.prototype.readEnum=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint64()},goog.exportProperty(jspb.BinaryReader.prototype,"readEnum",jspb.BinaryReader.prototype.readEnum),jspb.BinaryReader.prototype.readString=function(){jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var i=this.decoder_.readUnsignedVarint32();return this.decoder_.readString(i)},goog.exportProperty(jspb.BinaryReader.prototype,"readString",jspb.BinaryReader.prototype.readString),jspb.BinaryReader.prototype.readBytes=function(){jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var i=this.decoder_.readUnsignedVarint32();return this.decoder_.readBytes(i)},goog.exportProperty(jspb.BinaryReader.prototype,"readBytes",jspb.BinaryReader.prototype.readBytes),jspb.BinaryReader.prototype.readVarintHash64=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readVarintHash64()},jspb.BinaryReader.prototype.readSintHash64=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readZigzagVarintHash64()},jspb.BinaryReader.prototype.readSplitVarint64=function(i){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSplitVarint64(i)},jspb.BinaryReader.prototype.readSplitZigzagVarint64=function(i){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSplitVarint64(function(e,o){return jspb.utils.fromZigzag64(e,o,i)})},jspb.BinaryReader.prototype.readFixedHash64=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readFixedHash64()},jspb.BinaryReader.prototype.readSplitFixed64=function(i){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readSplitFixed64(i)},jspb.BinaryReader.prototype.readPackedField_=function(i){jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var e=this.decoder_.readUnsignedVarint32();e=this.decoder_.getCursor()+e;for(var o=[];this.decoder_.getCursor()<e;)o.push(i.call(this.decoder_));return o},jspb.BinaryReader.prototype.readPackedInt32=function(){return this.readPackedField_(this.decoder_.readSignedVarint32)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedInt32",jspb.BinaryReader.prototype.readPackedInt32),jspb.BinaryReader.prototype.readPackedInt32String=function(){return this.readPackedField_(this.decoder_.readSignedVarint32String)},jspb.BinaryReader.prototype.readPackedInt64=function(){return this.readPackedField_(this.decoder_.readSignedVarint64)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedInt64",jspb.BinaryReader.prototype.readPackedInt64),jspb.BinaryReader.prototype.readPackedInt64String=function(){return this.readPackedField_(this.decoder_.readSignedVarint64String)},jspb.BinaryReader.prototype.readPackedUint32=function(){return this.readPackedField_(this.decoder_.readUnsignedVarint32)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedUint32",jspb.BinaryReader.prototype.readPackedUint32),jspb.BinaryReader.prototype.readPackedUint32String=function(){return this.readPackedField_(this.decoder_.readUnsignedVarint32String)},jspb.BinaryReader.prototype.readPackedUint64=function(){return this.readPackedField_(this.decoder_.readUnsignedVarint64)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedUint64",jspb.BinaryReader.prototype.readPackedUint64),jspb.BinaryReader.prototype.readPackedUint64String=function(){return this.readPackedField_(this.decoder_.readUnsignedVarint64String)},jspb.BinaryReader.prototype.readPackedSint32=function(){return this.readPackedField_(this.decoder_.readZigzagVarint32)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedSint32",jspb.BinaryReader.prototype.readPackedSint32),jspb.BinaryReader.prototype.readPackedSint64=function(){return this.readPackedField_(this.decoder_.readZigzagVarint64)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedSint64",jspb.BinaryReader.prototype.readPackedSint64),jspb.BinaryReader.prototype.readPackedSint64String=function(){return this.readPackedField_(this.decoder_.readZigzagVarint64String)},jspb.BinaryReader.prototype.readPackedFixed32=function(){return this.readPackedField_(this.decoder_.readUint32)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedFixed32",jspb.BinaryReader.prototype.readPackedFixed32),jspb.BinaryReader.prototype.readPackedFixed64=function(){return this.readPackedField_(this.decoder_.readUint64)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedFixed64",jspb.BinaryReader.prototype.readPackedFixed64),jspb.BinaryReader.prototype.readPackedFixed64String=function(){return this.readPackedField_(this.decoder_.readUint64String)},jspb.BinaryReader.prototype.readPackedSfixed32=function(){return this.readPackedField_(this.decoder_.readInt32)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedSfixed32",jspb.BinaryReader.prototype.readPackedSfixed32),jspb.BinaryReader.prototype.readPackedSfixed64=function(){return this.readPackedField_(this.decoder_.readInt64)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedSfixed64",jspb.BinaryReader.prototype.readPackedSfixed64),jspb.BinaryReader.prototype.readPackedSfixed64String=function(){return this.readPackedField_(this.decoder_.readInt64String)},jspb.BinaryReader.prototype.readPackedFloat=function(){return this.readPackedField_(this.decoder_.readFloat)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedFloat",jspb.BinaryReader.prototype.readPackedFloat),jspb.BinaryReader.prototype.readPackedDouble=function(){return this.readPackedField_(this.decoder_.readDouble)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedDouble",jspb.BinaryReader.prototype.readPackedDouble),jspb.BinaryReader.prototype.readPackedBool=function(){return this.readPackedField_(this.decoder_.readBool)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedBool",jspb.BinaryReader.prototype.readPackedBool),jspb.BinaryReader.prototype.readPackedEnum=function(){return this.readPackedField_(this.decoder_.readEnum)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedEnum",jspb.BinaryReader.prototype.readPackedEnum),jspb.BinaryReader.prototype.readPackedVarintHash64=function(){return this.readPackedField_(this.decoder_.readVarintHash64)},jspb.BinaryReader.prototype.readPackedFixedHash64=function(){return this.readPackedField_(this.decoder_.readFixedHash64)},jspb.BinaryEncoder=function(){this.buffer_=[]},jspb.BinaryEncoder.prototype.length=function(){return this.buffer_.length},jspb.BinaryEncoder.prototype.end=function(){var i=this.buffer_;return this.buffer_=[],i},jspb.BinaryEncoder.prototype.writeSplitVarint64=function(i,e){for(jspb.asserts.assert(i==Math.floor(i)),jspb.asserts.assert(e==Math.floor(e)),jspb.asserts.assert(0<=i&&i<jspb.BinaryConstants.TWO_TO_32),jspb.asserts.assert(0<=e&&e<jspb.BinaryConstants.TWO_TO_32);0<e||127<i;)this.buffer_.push(i&127|128),i=(i>>>7|e<<25)>>>0,e>>>=7;this.buffer_.push(i)},jspb.BinaryEncoder.prototype.writeSplitFixed64=function(i,e){jspb.asserts.assert(i==Math.floor(i)),jspb.asserts.assert(e==Math.floor(e)),jspb.asserts.assert(0<=i&&i<jspb.BinaryConstants.TWO_TO_32),jspb.asserts.assert(0<=e&&e<jspb.BinaryConstants.TWO_TO_32),this.writeUint32(i),this.writeUint32(e)},jspb.BinaryEncoder.prototype.writeUnsignedVarint32=function(i){for(jspb.asserts.assert(i==Math.floor(i)),jspb.asserts.assert(0<=i&&i<jspb.BinaryConstants.TWO_TO_32);127<i;)this.buffer_.push(i&127|128),i>>>=7;this.buffer_.push(i)},jspb.BinaryEncoder.prototype.writeSignedVarint32=function(i){if(jspb.asserts.assert(i==Math.floor(i)),jspb.asserts.assert(i>=-jspb.BinaryConstants.TWO_TO_31&&i<jspb.BinaryConstants.TWO_TO_31),0<=i)this.writeUnsignedVarint32(i);else{for(var e=0;9>e;e++)this.buffer_.push(i&127|128),i>>=7;this.buffer_.push(1)}},jspb.BinaryEncoder.prototype.writeUnsignedVarint64=function(i){jspb.asserts.assert(i==Math.floor(i)),jspb.asserts.assert(0<=i&&i<jspb.BinaryConstants.TWO_TO_64),jspb.utils.splitInt64(i),this.writeSplitVarint64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeSignedVarint64=function(i){jspb.asserts.assert(i==Math.floor(i)),jspb.asserts.assert(i>=-jspb.BinaryConstants.TWO_TO_63&&i<jspb.BinaryConstants.TWO_TO_63),jspb.utils.splitInt64(i),this.writeSplitVarint64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeZigzagVarint32=function(i){jspb.asserts.assert(i==Math.floor(i)),jspb.asserts.assert(i>=-jspb.BinaryConstants.TWO_TO_31&&i<jspb.BinaryConstants.TWO_TO_31),this.writeUnsignedVarint32((i<<1^i>>31)>>>0)},jspb.BinaryEncoder.prototype.writeZigzagVarint64=function(i){jspb.asserts.assert(i==Math.floor(i)),jspb.asserts.assert(i>=-jspb.BinaryConstants.TWO_TO_63&&i<jspb.BinaryConstants.TWO_TO_63),jspb.utils.splitZigzag64(i),this.writeSplitVarint64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeZigzagVarint64String=function(i){this.writeZigzagVarintHash64(jspb.utils.decimalStringToHash64(i))},jspb.BinaryEncoder.prototype.writeZigzagVarintHash64=function(i){var e=this;jspb.utils.splitHash64(i),jspb.utils.toZigzag64(jspb.utils.split64Low,jspb.utils.split64High,function(o,d){e.writeSplitVarint64(o>>>0,d>>>0)})},jspb.BinaryEncoder.prototype.writeUint8=function(i){jspb.asserts.assert(i==Math.floor(i)),jspb.asserts.assert(0<=i&&256>i),this.buffer_.push(i>>>0&255)},jspb.BinaryEncoder.prototype.writeUint16=function(i){jspb.asserts.assert(i==Math.floor(i)),jspb.asserts.assert(0<=i&&65536>i),this.buffer_.push(i>>>0&255),this.buffer_.push(i>>>8&255)},jspb.BinaryEncoder.prototype.writeUint32=function(i){jspb.asserts.assert(i==Math.floor(i)),jspb.asserts.assert(0<=i&&i<jspb.BinaryConstants.TWO_TO_32),this.buffer_.push(i>>>0&255),this.buffer_.push(i>>>8&255),this.buffer_.push(i>>>16&255),this.buffer_.push(i>>>24&255)},jspb.BinaryEncoder.prototype.writeUint64=function(i){jspb.asserts.assert(i==Math.floor(i)),jspb.asserts.assert(0<=i&&i<jspb.BinaryConstants.TWO_TO_64),jspb.utils.splitUint64(i),this.writeUint32(jspb.utils.split64Low),this.writeUint32(jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeInt8=function(i){jspb.asserts.assert(i==Math.floor(i)),jspb.asserts.assert(-128<=i&&128>i),this.buffer_.push(i>>>0&255)},jspb.BinaryEncoder.prototype.writeInt16=function(i){jspb.asserts.assert(i==Math.floor(i)),jspb.asserts.assert(-32768<=i&&32768>i),this.buffer_.push(i>>>0&255),this.buffer_.push(i>>>8&255)},jspb.BinaryEncoder.prototype.writeInt32=function(i){jspb.asserts.assert(i==Math.floor(i)),jspb.asserts.assert(i>=-jspb.BinaryConstants.TWO_TO_31&&i<jspb.BinaryConstants.TWO_TO_31),this.buffer_.push(i>>>0&255),this.buffer_.push(i>>>8&255),this.buffer_.push(i>>>16&255),this.buffer_.push(i>>>24&255)},jspb.BinaryEncoder.prototype.writeInt64=function(i){jspb.asserts.assert(i==Math.floor(i)),jspb.asserts.assert(i>=-jspb.BinaryConstants.TWO_TO_63&&i<jspb.BinaryConstants.TWO_TO_63),jspb.utils.splitInt64(i),this.writeSplitFixed64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeInt64String=function(i){jspb.asserts.assert(i==Math.floor(i)),jspb.asserts.assert(+i>=-jspb.BinaryConstants.TWO_TO_63&&+i<jspb.BinaryConstants.TWO_TO_63),jspb.utils.splitHash64(jspb.utils.decimalStringToHash64(i)),this.writeSplitFixed64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeFloat=function(i){jspb.asserts.assert(i===1/0||i===-1/0||isNaN(i)||i>=-jspb.BinaryConstants.FLOAT32_MAX&&i<=jspb.BinaryConstants.FLOAT32_MAX),jspb.utils.splitFloat32(i),this.writeUint32(jspb.utils.split64Low)},jspb.BinaryEncoder.prototype.writeDouble=function(i){jspb.asserts.assert(i===1/0||i===-1/0||isNaN(i)||i>=-jspb.BinaryConstants.FLOAT64_MAX&&i<=jspb.BinaryConstants.FLOAT64_MAX),jspb.utils.splitFloat64(i),this.writeUint32(jspb.utils.split64Low),this.writeUint32(jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeBool=function(i){jspb.asserts.assert(typeof i=="boolean"||typeof i=="number"),this.buffer_.push(i?1:0)},jspb.BinaryEncoder.prototype.writeEnum=function(i){jspb.asserts.assert(i==Math.floor(i)),jspb.asserts.assert(i>=-jspb.BinaryConstants.TWO_TO_31&&i<jspb.BinaryConstants.TWO_TO_31),this.writeSignedVarint32(i)},jspb.BinaryEncoder.prototype.writeBytes=function(i){this.buffer_.push.apply(this.buffer_,i)},jspb.BinaryEncoder.prototype.writeVarintHash64=function(i){jspb.utils.splitHash64(i),this.writeSplitVarint64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeFixedHash64=function(i){jspb.utils.splitHash64(i),this.writeUint32(jspb.utils.split64Low),this.writeUint32(jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeString=function(i){var e=this.buffer_.length;jspb.asserts.assertString(i);for(var o=0;o<i.length;o++){var d=i.charCodeAt(o);if(128>d)this.buffer_.push(d);else if(2048>d)this.buffer_.push(d>>6|192),this.buffer_.push(d&63|128);else if(65536>d)if(55296<=d&&56319>=d&&o+1<i.length){var h=i.charCodeAt(o+1);56320<=h&&57343>=h&&(d=1024*(d-55296)+h-56320+65536,this.buffer_.push(d>>18|240),this.buffer_.push(d>>12&63|128),this.buffer_.push(d>>6&63|128),this.buffer_.push(d&63|128),o++)}else this.buffer_.push(d>>12|224),this.buffer_.push(d>>6&63|128),this.buffer_.push(d&63|128)}return this.buffer_.length-e},jspb.arith={},jspb.arith.UInt64=function(i,e){this.lo=i,this.hi=e},jspb.arith.UInt64.prototype.cmp=function(i){return this.hi<i.hi||this.hi==i.hi&&this.lo<i.lo?-1:this.hi==i.hi&&this.lo==i.lo?0:1},jspb.arith.UInt64.prototype.rightShift=function(){return new jspb.arith.UInt64((this.lo>>>1|(this.hi&1)<<31)>>>0,this.hi>>>1>>>0)},jspb.arith.UInt64.prototype.leftShift=function(){return new jspb.arith.UInt64(this.lo<<1>>>0,(this.hi<<1|this.lo>>>31)>>>0)},jspb.arith.UInt64.prototype.msb=function(){return!!(this.hi&2147483648)},jspb.arith.UInt64.prototype.lsb=function(){return!!(this.lo&1)},jspb.arith.UInt64.prototype.zero=function(){return this.lo==0&&this.hi==0},jspb.arith.UInt64.prototype.add=function(i){return new jspb.arith.UInt64((this.lo+i.lo&4294967295)>>>0>>>0,((this.hi+i.hi&4294967295)>>>0)+(4294967296<=this.lo+i.lo?1:0)>>>0)},jspb.arith.UInt64.prototype.sub=function(i){return new jspb.arith.UInt64((this.lo-i.lo&4294967295)>>>0>>>0,((this.hi-i.hi&4294967295)>>>0)-(0>this.lo-i.lo?1:0)>>>0)},jspb.arith.UInt64.mul32x32=function(i,e){var o=i&65535;i>>>=16;var d=e&65535,h=e>>>16;for(e=o*d+65536*(o*h&65535)+65536*(i*d&65535),o=i*h+(o*h>>>16)+(i*d>>>16);4294967296<=e;)e-=4294967296,o+=1;return new jspb.arith.UInt64(e>>>0,o>>>0)},jspb.arith.UInt64.prototype.mul=function(i){var e=jspb.arith.UInt64.mul32x32(this.lo,i);return i=jspb.arith.UInt64.mul32x32(this.hi,i),i.hi=i.lo,i.lo=0,e.add(i)},jspb.arith.UInt64.prototype.div=function(i){if(i==0)return[];var e=new jspb.arith.UInt64(0,0),o=new jspb.arith.UInt64(this.lo,this.hi);i=new jspb.arith.UInt64(i,0);for(var d=new jspb.arith.UInt64(1,0);!i.msb();)i=i.leftShift(),d=d.leftShift();for(;!d.zero();)0>=i.cmp(o)&&(e=e.add(d),o=o.sub(i)),i=i.rightShift(),d=d.rightShift();return[e,o]},jspb.arith.UInt64.prototype.toString=function(){for(var i="",e=this;!e.zero();){e=e.div(10);var o=e[0];i=e[1].lo+i,e=o}return i==""&&(i="0"),i},jspb.arith.UInt64.fromString=function(i){for(var e=new jspb.arith.UInt64(0,0),o=new jspb.arith.UInt64(0,0),d=0;d<i.length;d++){if("0">i[d]||"9"<i[d])return null;var h=parseInt(i[d],10);o.lo=h,e=e.mul(10).add(o)}return e},jspb.arith.UInt64.prototype.clone=function(){return new jspb.arith.UInt64(this.lo,this.hi)},jspb.arith.Int64=function(i,e){this.lo=i,this.hi=e},jspb.arith.Int64.prototype.add=function(i){return new jspb.arith.Int64((this.lo+i.lo&4294967295)>>>0>>>0,((this.hi+i.hi&4294967295)>>>0)+(4294967296<=this.lo+i.lo?1:0)>>>0)},jspb.arith.Int64.prototype.sub=function(i){return new jspb.arith.Int64((this.lo-i.lo&4294967295)>>>0>>>0,((this.hi-i.hi&4294967295)>>>0)-(0>this.lo-i.lo?1:0)>>>0)},jspb.arith.Int64.prototype.clone=function(){return new jspb.arith.Int64(this.lo,this.hi)},jspb.arith.Int64.prototype.toString=function(){var i=(this.hi&2147483648)!=0,e=new jspb.arith.UInt64(this.lo,this.hi);return i&&(e=new jspb.arith.UInt64(0,0).sub(e)),(i?"-":"")+e.toString()},jspb.arith.Int64.fromString=function(i){var e=0<i.length&&i[0]=="-";return e&&(i=i.substring(1)),i=jspb.arith.UInt64.fromString(i),i===null?null:(e&&(i=new jspb.arith.UInt64(0,0).sub(i)),new jspb.arith.Int64(i.lo,i.hi))},jspb.BinaryWriter=function(){this.blocks_=[],this.totalLength_=0,this.encoder_=new jspb.BinaryEncoder,this.bookmarks_=[]},jspb.BinaryWriter.prototype.appendUint8Array_=function(i){var e=this.encoder_.end();this.blocks_.push(e),this.blocks_.push(i),this.totalLength_+=e.length+i.length},jspb.BinaryWriter.prototype.beginDelimited_=function(i){return this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.DELIMITED),i=this.encoder_.end(),this.blocks_.push(i),this.totalLength_+=i.length,i.push(this.totalLength_),i},jspb.BinaryWriter.prototype.endDelimited_=function(i){var e=i.pop();for(e=this.totalLength_+this.encoder_.length()-e,jspb.asserts.assert(0<=e);127<e;)i.push(e&127|128),e>>>=7,this.totalLength_++;i.push(e),this.totalLength_++},jspb.BinaryWriter.prototype.writeSerializedMessage=function(i,e,o){this.appendUint8Array_(i.subarray(e,o))},jspb.BinaryWriter.prototype.maybeWriteSerializedMessage=function(i,e,o){i!=null&&e!=null&&o!=null&&this.writeSerializedMessage(i,e,o)},jspb.BinaryWriter.prototype.reset=function(){this.blocks_=[],this.encoder_.end(),this.totalLength_=0,this.bookmarks_=[]},jspb.BinaryWriter.prototype.getResultBuffer=function(){jspb.asserts.assert(this.bookmarks_.length==0);for(var i=new Uint8Array(this.totalLength_+this.encoder_.length()),e=this.blocks_,o=e.length,d=0,h=0;h<o;h++){var g=e[h];i.set(g,d),d+=g.length}return e=this.encoder_.end(),i.set(e,d),d+=e.length,jspb.asserts.assert(d==i.length),this.blocks_=[i],i},goog.exportProperty(jspb.BinaryWriter.prototype,"getResultBuffer",jspb.BinaryWriter.prototype.getResultBuffer),jspb.BinaryWriter.prototype.getResultBase64String=function(i){return goog.crypt.base64.encodeByteArray(this.getResultBuffer(),i)},jspb.BinaryWriter.prototype.beginSubMessage=function(i){this.bookmarks_.push(this.beginDelimited_(i))},jspb.BinaryWriter.prototype.endSubMessage=function(){jspb.asserts.assert(0<=this.bookmarks_.length),this.endDelimited_(this.bookmarks_.pop())},jspb.BinaryWriter.prototype.writeFieldHeader_=function(i,e){jspb.asserts.assert(1<=i&&i==Math.floor(i)),this.encoder_.writeUnsignedVarint32(8*i+e)},jspb.BinaryWriter.prototype.writeAny=function(i,e,o){var d=jspb.BinaryConstants.FieldType;switch(i){case d.DOUBLE:this.writeDouble(e,o);break;case d.FLOAT:this.writeFloat(e,o);break;case d.INT64:this.writeInt64(e,o);break;case d.UINT64:this.writeUint64(e,o);break;case d.INT32:this.writeInt32(e,o);break;case d.FIXED64:this.writeFixed64(e,o);break;case d.FIXED32:this.writeFixed32(e,o);break;case d.BOOL:this.writeBool(e,o);break;case d.STRING:this.writeString(e,o);break;case d.GROUP:jspb.asserts.fail("Group field type not supported in writeAny()");break;case d.MESSAGE:jspb.asserts.fail("Message field type not supported in writeAny()");break;case d.BYTES:this.writeBytes(e,o);break;case d.UINT32:this.writeUint32(e,o);break;case d.ENUM:this.writeEnum(e,o);break;case d.SFIXED32:this.writeSfixed32(e,o);break;case d.SFIXED64:this.writeSfixed64(e,o);break;case d.SINT32:this.writeSint32(e,o);break;case d.SINT64:this.writeSint64(e,o);break;case d.FHASH64:this.writeFixedHash64(e,o);break;case d.VHASH64:this.writeVarintHash64(e,o);break;default:jspb.asserts.fail("Invalid field type in writeAny()")}},jspb.BinaryWriter.prototype.writeUnsignedVarint32_=function(i,e){e!=null&&(this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeUnsignedVarint32(e))},jspb.BinaryWriter.prototype.writeSignedVarint32_=function(i,e){e!=null&&(this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSignedVarint32(e))},jspb.BinaryWriter.prototype.writeUnsignedVarint64_=function(i,e){e!=null&&(this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeUnsignedVarint64(e))},jspb.BinaryWriter.prototype.writeSignedVarint64_=function(i,e){e!=null&&(this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSignedVarint64(e))},jspb.BinaryWriter.prototype.writeZigzagVarint32_=function(i,e){e!=null&&(this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeZigzagVarint32(e))},jspb.BinaryWriter.prototype.writeZigzagVarint64_=function(i,e){e!=null&&(this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeZigzagVarint64(e))},jspb.BinaryWriter.prototype.writeZigzagVarint64String_=function(i,e){e!=null&&(this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeZigzagVarint64String(e))},jspb.BinaryWriter.prototype.writeZigzagVarintHash64_=function(i,e){e!=null&&(this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeZigzagVarintHash64(e))},jspb.BinaryWriter.prototype.writeInt32=function(i,e){e!=null&&(jspb.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_31&&e<jspb.BinaryConstants.TWO_TO_31),this.writeSignedVarint32_(i,e))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeInt32",jspb.BinaryWriter.prototype.writeInt32),jspb.BinaryWriter.prototype.writeInt32String=function(i,e){e!=null&&(e=parseInt(e,10),jspb.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_31&&e<jspb.BinaryConstants.TWO_TO_31),this.writeSignedVarint32_(i,e))},jspb.BinaryWriter.prototype.writeInt64=function(i,e){e!=null&&(jspb.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_63&&e<jspb.BinaryConstants.TWO_TO_63),this.writeSignedVarint64_(i,e))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeInt64",jspb.BinaryWriter.prototype.writeInt64),jspb.BinaryWriter.prototype.writeInt64String=function(i,e){e!=null&&(e=jspb.arith.Int64.fromString(e),this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSplitVarint64(e.lo,e.hi))},jspb.BinaryWriter.prototype.writeUint32=function(i,e){e!=null&&(jspb.asserts.assert(0<=e&&e<jspb.BinaryConstants.TWO_TO_32),this.writeUnsignedVarint32_(i,e))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeUint32",jspb.BinaryWriter.prototype.writeUint32),jspb.BinaryWriter.prototype.writeUint32String=function(i,e){e!=null&&(e=parseInt(e,10),jspb.asserts.assert(0<=e&&e<jspb.BinaryConstants.TWO_TO_32),this.writeUnsignedVarint32_(i,e))},jspb.BinaryWriter.prototype.writeUint64=function(i,e){e!=null&&(jspb.asserts.assert(0<=e&&e<jspb.BinaryConstants.TWO_TO_64),this.writeUnsignedVarint64_(i,e))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeUint64",jspb.BinaryWriter.prototype.writeUint64),jspb.BinaryWriter.prototype.writeUint64String=function(i,e){e!=null&&(e=jspb.arith.UInt64.fromString(e),this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSplitVarint64(e.lo,e.hi))},jspb.BinaryWriter.prototype.writeSint32=function(i,e){e!=null&&(jspb.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_31&&e<jspb.BinaryConstants.TWO_TO_31),this.writeZigzagVarint32_(i,e))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeSint32",jspb.BinaryWriter.prototype.writeSint32),jspb.BinaryWriter.prototype.writeSint64=function(i,e){e!=null&&(jspb.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_63&&e<jspb.BinaryConstants.TWO_TO_63),this.writeZigzagVarint64_(i,e))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeSint64",jspb.BinaryWriter.prototype.writeSint64),jspb.BinaryWriter.prototype.writeSintHash64=function(i,e){e!=null&&this.writeZigzagVarintHash64_(i,e)},jspb.BinaryWriter.prototype.writeSint64String=function(i,e){e!=null&&this.writeZigzagVarint64String_(i,e)},jspb.BinaryWriter.prototype.writeFixed32=function(i,e){e!=null&&(jspb.asserts.assert(0<=e&&e<jspb.BinaryConstants.TWO_TO_32),this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.FIXED32),this.encoder_.writeUint32(e))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeFixed32",jspb.BinaryWriter.prototype.writeFixed32),jspb.BinaryWriter.prototype.writeFixed64=function(i,e){e!=null&&(jspb.asserts.assert(0<=e&&e<jspb.BinaryConstants.TWO_TO_64),this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeUint64(e))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeFixed64",jspb.BinaryWriter.prototype.writeFixed64),jspb.BinaryWriter.prototype.writeFixed64String=function(i,e){e!=null&&(e=jspb.arith.UInt64.fromString(e),this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeSplitFixed64(e.lo,e.hi))},jspb.BinaryWriter.prototype.writeSfixed32=function(i,e){e!=null&&(jspb.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_31&&e<jspb.BinaryConstants.TWO_TO_31),this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.FIXED32),this.encoder_.writeInt32(e))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeSfixed32",jspb.BinaryWriter.prototype.writeSfixed32),jspb.BinaryWriter.prototype.writeSfixed64=function(i,e){e!=null&&(jspb.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_63&&e<jspb.BinaryConstants.TWO_TO_63),this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeInt64(e))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeSfixed64",jspb.BinaryWriter.prototype.writeSfixed64),jspb.BinaryWriter.prototype.writeSfixed64String=function(i,e){e!=null&&(e=jspb.arith.Int64.fromString(e),this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeSplitFixed64(e.lo,e.hi))},jspb.BinaryWriter.prototype.writeFloat=function(i,e){e!=null&&(this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.FIXED32),this.encoder_.writeFloat(e))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeFloat",jspb.BinaryWriter.prototype.writeFloat),jspb.BinaryWriter.prototype.writeDouble=function(i,e){e!=null&&(this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeDouble(e))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeDouble",jspb.BinaryWriter.prototype.writeDouble),jspb.BinaryWriter.prototype.writeBool=function(i,e){e!=null&&(jspb.asserts.assert(typeof e=="boolean"||typeof e=="number"),this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeBool(e))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeBool",jspb.BinaryWriter.prototype.writeBool),jspb.BinaryWriter.prototype.writeEnum=function(i,e){e!=null&&(jspb.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_31&&e<jspb.BinaryConstants.TWO_TO_31),this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSignedVarint32(e))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeEnum",jspb.BinaryWriter.prototype.writeEnum),jspb.BinaryWriter.prototype.writeString=function(i,e){e!=null&&(i=this.beginDelimited_(i),this.encoder_.writeString(e),this.endDelimited_(i))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeString",jspb.BinaryWriter.prototype.writeString),jspb.BinaryWriter.prototype.writeBytes=function(i,e){e!=null&&(e=jspb.utils.byteSourceToUint8Array(e),this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(e.length),this.appendUint8Array_(e))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeBytes",jspb.BinaryWriter.prototype.writeBytes),jspb.BinaryWriter.prototype.writeMessage=function(i,e,o){e!=null&&(i=this.beginDelimited_(i),o(e,this),this.endDelimited_(i))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeMessage",jspb.BinaryWriter.prototype.writeMessage),jspb.BinaryWriter.prototype.writeMessageSet=function(i,e,o){e!=null&&(this.writeFieldHeader_(1,jspb.BinaryConstants.WireType.START_GROUP),this.writeFieldHeader_(2,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSignedVarint32(i),i=this.beginDelimited_(3),o(e,this),this.endDelimited_(i),this.writeFieldHeader_(1,jspb.BinaryConstants.WireType.END_GROUP))},jspb.BinaryWriter.prototype.writeGroup=function(i,e,o){e!=null&&(this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.START_GROUP),o(e,this),this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.END_GROUP))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeGroup",jspb.BinaryWriter.prototype.writeGroup),jspb.BinaryWriter.prototype.writeFixedHash64=function(i,e){e!=null&&(jspb.asserts.assert(e.length==8),this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeFixedHash64(e))},jspb.BinaryWriter.prototype.writeVarintHash64=function(i,e){e!=null&&(jspb.asserts.assert(e.length==8),this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeVarintHash64(e))},jspb.BinaryWriter.prototype.writeSplitFixed64=function(i,e,o){this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeSplitFixed64(e,o)},jspb.BinaryWriter.prototype.writeSplitVarint64=function(i,e,o){this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSplitVarint64(e,o)},jspb.BinaryWriter.prototype.writeSplitZigzagVarint64=function(i,e,o){this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.VARINT);var d=this.encoder_;jspb.utils.toZigzag64(e,o,function(h,g){d.writeSplitVarint64(h>>>0,g>>>0)})},jspb.BinaryWriter.prototype.writeRepeatedInt32=function(i,e){if(e!=null)for(var o=0;o<e.length;o++)this.writeSignedVarint32_(i,e[o])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedInt32",jspb.BinaryWriter.prototype.writeRepeatedInt32),jspb.BinaryWriter.prototype.writeRepeatedInt32String=function(i,e){if(e!=null)for(var o=0;o<e.length;o++)this.writeInt32String(i,e[o])},jspb.BinaryWriter.prototype.writeRepeatedInt64=function(i,e){if(e!=null)for(var o=0;o<e.length;o++)this.writeSignedVarint64_(i,e[o])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedInt64",jspb.BinaryWriter.prototype.writeRepeatedInt64),jspb.BinaryWriter.prototype.writeRepeatedSplitFixed64=function(i,e,o,d){if(e!=null)for(var h=0;h<e.length;h++)this.writeSplitFixed64(i,o(e[h]),d(e[h]))},jspb.BinaryWriter.prototype.writeRepeatedSplitVarint64=function(i,e,o,d){if(e!=null)for(var h=0;h<e.length;h++)this.writeSplitVarint64(i,o(e[h]),d(e[h]))},jspb.BinaryWriter.prototype.writeRepeatedSplitZigzagVarint64=function(i,e,o,d){if(e!=null)for(var h=0;h<e.length;h++)this.writeSplitZigzagVarint64(i,o(e[h]),d(e[h]))},jspb.BinaryWriter.prototype.writeRepeatedInt64String=function(i,e){if(e!=null)for(var o=0;o<e.length;o++)this.writeInt64String(i,e[o])},jspb.BinaryWriter.prototype.writeRepeatedUint32=function(i,e){if(e!=null)for(var o=0;o<e.length;o++)this.writeUnsignedVarint32_(i,e[o])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedUint32",jspb.BinaryWriter.prototype.writeRepeatedUint32),jspb.BinaryWriter.prototype.writeRepeatedUint32String=function(i,e){if(e!=null)for(var o=0;o<e.length;o++)this.writeUint32String(i,e[o])},jspb.BinaryWriter.prototype.writeRepeatedUint64=function(i,e){if(e!=null)for(var o=0;o<e.length;o++)this.writeUnsignedVarint64_(i,e[o])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedUint64",jspb.BinaryWriter.prototype.writeRepeatedUint64),jspb.BinaryWriter.prototype.writeRepeatedUint64String=function(i,e){if(e!=null)for(var o=0;o<e.length;o++)this.writeUint64String(i,e[o])},jspb.BinaryWriter.prototype.writeRepeatedSint32=function(i,e){if(e!=null)for(var o=0;o<e.length;o++)this.writeZigzagVarint32_(i,e[o])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedSint32",jspb.BinaryWriter.prototype.writeRepeatedSint32),jspb.BinaryWriter.prototype.writeRepeatedSint64=function(i,e){if(e!=null)for(var o=0;o<e.length;o++)this.writeZigzagVarint64_(i,e[o])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedSint64",jspb.BinaryWriter.prototype.writeRepeatedSint64),jspb.BinaryWriter.prototype.writeRepeatedSint64String=function(i,e){if(e!=null)for(var o=0;o<e.length;o++)this.writeZigzagVarint64String_(i,e[o])},jspb.BinaryWriter.prototype.writeRepeatedSintHash64=function(i,e){if(e!=null)for(var o=0;o<e.length;o++)this.writeZigzagVarintHash64_(i,e[o])},jspb.BinaryWriter.prototype.writeRepeatedFixed32=function(i,e){if(e!=null)for(var o=0;o<e.length;o++)this.writeFixed32(i,e[o])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedFixed32",jspb.BinaryWriter.prototype.writeRepeatedFixed32),jspb.BinaryWriter.prototype.writeRepeatedFixed64=function(i,e){if(e!=null)for(var o=0;o<e.length;o++)this.writeFixed64(i,e[o])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedFixed64",jspb.BinaryWriter.prototype.writeRepeatedFixed64),jspb.BinaryWriter.prototype.writeRepeatedFixed64String=function(i,e){if(e!=null)for(var o=0;o<e.length;o++)this.writeFixed64String(i,e[o])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedFixed64String",jspb.BinaryWriter.prototype.writeRepeatedFixed64String),jspb.BinaryWriter.prototype.writeRepeatedSfixed32=function(i,e){if(e!=null)for(var o=0;o<e.length;o++)this.writeSfixed32(i,e[o])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedSfixed32",jspb.BinaryWriter.prototype.writeRepeatedSfixed32),jspb.BinaryWriter.prototype.writeRepeatedSfixed64=function(i,e){if(e!=null)for(var o=0;o<e.length;o++)this.writeSfixed64(i,e[o])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedSfixed64",jspb.BinaryWriter.prototype.writeRepeatedSfixed64),jspb.BinaryWriter.prototype.writeRepeatedSfixed64String=function(i,e){if(e!=null)for(var o=0;o<e.length;o++)this.writeSfixed64String(i,e[o])},jspb.BinaryWriter.prototype.writeRepeatedFloat=function(i,e){if(e!=null)for(var o=0;o<e.length;o++)this.writeFloat(i,e[o])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedFloat",jspb.BinaryWriter.prototype.writeRepeatedFloat),jspb.BinaryWriter.prototype.writeRepeatedDouble=function(i,e){if(e!=null)for(var o=0;o<e.length;o++)this.writeDouble(i,e[o])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedDouble",jspb.BinaryWriter.prototype.writeRepeatedDouble),jspb.BinaryWriter.prototype.writeRepeatedBool=function(i,e){if(e!=null)for(var o=0;o<e.length;o++)this.writeBool(i,e[o])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedBool",jspb.BinaryWriter.prototype.writeRepeatedBool),jspb.BinaryWriter.prototype.writeRepeatedEnum=function(i,e){if(e!=null)for(var o=0;o<e.length;o++)this.writeEnum(i,e[o])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedEnum",jspb.BinaryWriter.prototype.writeRepeatedEnum),jspb.BinaryWriter.prototype.writeRepeatedString=function(i,e){if(e!=null)for(var o=0;o<e.length;o++)this.writeString(i,e[o])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedString",jspb.BinaryWriter.prototype.writeRepeatedString),jspb.BinaryWriter.prototype.writeRepeatedBytes=function(i,e){if(e!=null)for(var o=0;o<e.length;o++)this.writeBytes(i,e[o])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedBytes",jspb.BinaryWriter.prototype.writeRepeatedBytes),jspb.BinaryWriter.prototype.writeRepeatedMessage=function(i,e,o){if(e!=null)for(var d=0;d<e.length;d++){var h=this.beginDelimited_(i);o(e[d],this),this.endDelimited_(h)}},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedMessage",jspb.BinaryWriter.prototype.writeRepeatedMessage),jspb.BinaryWriter.prototype.writeRepeatedGroup=function(i,e,o){if(e!=null)for(var d=0;d<e.length;d++)this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.START_GROUP),o(e[d],this),this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.END_GROUP)},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedGroup",jspb.BinaryWriter.prototype.writeRepeatedGroup),jspb.BinaryWriter.prototype.writeRepeatedFixedHash64=function(i,e){if(e!=null)for(var o=0;o<e.length;o++)this.writeFixedHash64(i,e[o])},jspb.BinaryWriter.prototype.writeRepeatedVarintHash64=function(i,e){if(e!=null)for(var o=0;o<e.length;o++)this.writeVarintHash64(i,e[o])},jspb.BinaryWriter.prototype.writePackedInt32=function(i,e){if(e!=null&&e.length){i=this.beginDelimited_(i);for(var o=0;o<e.length;o++)this.encoder_.writeSignedVarint32(e[o]);this.endDelimited_(i)}},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedInt32",jspb.BinaryWriter.prototype.writePackedInt32),jspb.BinaryWriter.prototype.writePackedInt32String=function(i,e){if(e!=null&&e.length){i=this.beginDelimited_(i);for(var o=0;o<e.length;o++)this.encoder_.writeSignedVarint32(parseInt(e[o],10));this.endDelimited_(i)}},jspb.BinaryWriter.prototype.writePackedInt64=function(i,e){if(e!=null&&e.length){i=this.beginDelimited_(i);for(var o=0;o<e.length;o++)this.encoder_.writeSignedVarint64(e[o]);this.endDelimited_(i)}},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedInt64",jspb.BinaryWriter.prototype.writePackedInt64),jspb.BinaryWriter.prototype.writePackedSplitFixed64=function(i,e,o,d){if(e!=null){i=this.beginDelimited_(i);for(var h=0;h<e.length;h++)this.encoder_.writeSplitFixed64(o(e[h]),d(e[h]));this.endDelimited_(i)}},jspb.BinaryWriter.prototype.writePackedSplitVarint64=function(i,e,o,d){if(e!=null){i=this.beginDelimited_(i);for(var h=0;h<e.length;h++)this.encoder_.writeSplitVarint64(o(e[h]),d(e[h]));this.endDelimited_(i)}},jspb.BinaryWriter.prototype.writePackedSplitZigzagVarint64=function(i,e,o,d){if(e!=null){i=this.beginDelimited_(i);for(var h=this.encoder_,g=0;g<e.length;g++)jspb.utils.toZigzag64(o(e[g]),d(e[g]),function(b,$){h.writeSplitVarint64(b>>>0,$>>>0)});this.endDelimited_(i)}},jspb.BinaryWriter.prototype.writePackedInt64String=function(i,e){if(e!=null&&e.length){i=this.beginDelimited_(i);for(var o=0;o<e.length;o++){var d=jspb.arith.Int64.fromString(e[o]);this.encoder_.writeSplitVarint64(d.lo,d.hi)}this.endDelimited_(i)}},jspb.BinaryWriter.prototype.writePackedUint32=function(i,e){if(e!=null&&e.length){i=this.beginDelimited_(i);for(var o=0;o<e.length;o++)this.encoder_.writeUnsignedVarint32(e[o]);this.endDelimited_(i)}},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedUint32",jspb.BinaryWriter.prototype.writePackedUint32),jspb.BinaryWriter.prototype.writePackedUint32String=function(i,e){if(e!=null&&e.length){i=this.beginDelimited_(i);for(var o=0;o<e.length;o++)this.encoder_.writeUnsignedVarint32(parseInt(e[o],10));this.endDelimited_(i)}},jspb.BinaryWriter.prototype.writePackedUint64=function(i,e){if(e!=null&&e.length){i=this.beginDelimited_(i);for(var o=0;o<e.length;o++)this.encoder_.writeUnsignedVarint64(e[o]);this.endDelimited_(i)}},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedUint64",jspb.BinaryWriter.prototype.writePackedUint64),jspb.BinaryWriter.prototype.writePackedUint64String=function(i,e){if(e!=null&&e.length){i=this.beginDelimited_(i);for(var o=0;o<e.length;o++){var d=jspb.arith.UInt64.fromString(e[o]);this.encoder_.writeSplitVarint64(d.lo,d.hi)}this.endDelimited_(i)}},jspb.BinaryWriter.prototype.writePackedSint32=function(i,e){if(e!=null&&e.length){i=this.beginDelimited_(i);for(var o=0;o<e.length;o++)this.encoder_.writeZigzagVarint32(e[o]);this.endDelimited_(i)}},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedSint32",jspb.BinaryWriter.prototype.writePackedSint32),jspb.BinaryWriter.prototype.writePackedSint64=function(i,e){if(e!=null&&e.length){i=this.beginDelimited_(i);for(var o=0;o<e.length;o++)this.encoder_.writeZigzagVarint64(e[o]);this.endDelimited_(i)}},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedSint64",jspb.BinaryWriter.prototype.writePackedSint64),jspb.BinaryWriter.prototype.writePackedSint64String=function(i,e){if(e!=null&&e.length){i=this.beginDelimited_(i);for(var o=0;o<e.length;o++)this.encoder_.writeZigzagVarintHash64(jspb.utils.decimalStringToHash64(e[o]));this.endDelimited_(i)}},jspb.BinaryWriter.prototype.writePackedSintHash64=function(i,e){if(e!=null&&e.length){i=this.beginDelimited_(i);for(var o=0;o<e.length;o++)this.encoder_.writeZigzagVarintHash64(e[o]);this.endDelimited_(i)}},jspb.BinaryWriter.prototype.writePackedFixed32=function(i,e){if(e!=null&&e.length)for(this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(4*e.length),i=0;i<e.length;i++)this.encoder_.writeUint32(e[i])},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedFixed32",jspb.BinaryWriter.prototype.writePackedFixed32),jspb.BinaryWriter.prototype.writePackedFixed64=function(i,e){if(e!=null&&e.length)for(this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*e.length),i=0;i<e.length;i++)this.encoder_.writeUint64(e[i])},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedFixed64",jspb.BinaryWriter.prototype.writePackedFixed64),jspb.BinaryWriter.prototype.writePackedFixed64String=function(i,e){if(e!=null&&e.length)for(this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*e.length),i=0;i<e.length;i++){var o=jspb.arith.UInt64.fromString(e[i]);this.encoder_.writeSplitFixed64(o.lo,o.hi)}},jspb.BinaryWriter.prototype.writePackedSfixed32=function(i,e){if(e!=null&&e.length)for(this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(4*e.length),i=0;i<e.length;i++)this.encoder_.writeInt32(e[i])},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedSfixed32",jspb.BinaryWriter.prototype.writePackedSfixed32),jspb.BinaryWriter.prototype.writePackedSfixed64=function(i,e){if(e!=null&&e.length)for(this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*e.length),i=0;i<e.length;i++)this.encoder_.writeInt64(e[i])},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedSfixed64",jspb.BinaryWriter.prototype.writePackedSfixed64),jspb.BinaryWriter.prototype.writePackedSfixed64String=function(i,e){if(e!=null&&e.length)for(this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*e.length),i=0;i<e.length;i++)this.encoder_.writeInt64String(e[i])},jspb.BinaryWriter.prototype.writePackedFloat=function(i,e){if(e!=null&&e.length)for(this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(4*e.length),i=0;i<e.length;i++)this.encoder_.writeFloat(e[i])},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedFloat",jspb.BinaryWriter.prototype.writePackedFloat),jspb.BinaryWriter.prototype.writePackedDouble=function(i,e){if(e!=null&&e.length)for(this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*e.length),i=0;i<e.length;i++)this.encoder_.writeDouble(e[i])},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedDouble",jspb.BinaryWriter.prototype.writePackedDouble),jspb.BinaryWriter.prototype.writePackedBool=function(i,e){if(e!=null&&e.length)for(this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(e.length),i=0;i<e.length;i++)this.encoder_.writeBool(e[i])},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedBool",jspb.BinaryWriter.prototype.writePackedBool),jspb.BinaryWriter.prototype.writePackedEnum=function(i,e){if(e!=null&&e.length){i=this.beginDelimited_(i);for(var o=0;o<e.length;o++)this.encoder_.writeEnum(e[o]);this.endDelimited_(i)}},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedEnum",jspb.BinaryWriter.prototype.writePackedEnum),jspb.BinaryWriter.prototype.writePackedFixedHash64=function(i,e){if(e!=null&&e.length)for(this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*e.length),i=0;i<e.length;i++)this.encoder_.writeFixedHash64(e[i])},jspb.BinaryWriter.prototype.writePackedVarintHash64=function(i,e){if(e!=null&&e.length){i=this.beginDelimited_(i);for(var o=0;o<e.length;o++)this.encoder_.writeVarintHash64(e[o]);this.endDelimited_(i)}},jspb.Map=function(i,e){this.arr_=i,this.valueCtor_=e,this.map_={},this.arrClean=!0,0<this.arr_.length&&this.loadFromArray_()},goog.exportSymbol("jspb.Map",jspb.Map),jspb.Map.prototype.loadFromArray_=function(){for(var i=0;i<this.arr_.length;i++){var e=this.arr_[i],o=e[0];this.map_[o.toString()]=new jspb.Map.Entry_(o,e[1])}this.arrClean=!0},jspb.Map.prototype.toArray=function(){if(this.arrClean){if(this.valueCtor_){var i=this.map_,e;for(e in i)if(Object.prototype.hasOwnProperty.call(i,e)){var o=i[e].valueWrapper;o&&o.toArray()}}}else{for(this.arr_.length=0,i=this.stringKeys_(),i.sort(),e=0;e<i.length;e++){var d=this.map_[i[e]];(o=d.valueWrapper)&&o.toArray(),this.arr_.push([d.key,d.value])}this.arrClean=!0}return this.arr_},goog.exportProperty(jspb.Map.prototype,"toArray",jspb.Map.prototype.toArray),jspb.Map.prototype.toObject=function(i,e){for(var o=this.toArray(),d=[],h=0;h<o.length;h++){var g=this.map_[o[h][0].toString()];this.wrapEntry_(g);var b=g.valueWrapper;b?(jspb.asserts.assert(e),d.push([g.key,e(i,b)])):d.push([g.key,g.value])}return d},goog.exportProperty(jspb.Map.prototype,"toObject",jspb.Map.prototype.toObject),jspb.Map.fromObject=function(i,e,o){e=new jspb.Map([],e);for(var d=0;d<i.length;d++){var h=i[d][0],g=o(i[d][1]);e.set(h,g)}return e},goog.exportProperty(jspb.Map,"fromObject",jspb.Map.fromObject),jspb.Map.ArrayIteratorIterable_=function(i){this.idx_=0,this.arr_=i},jspb.Map.ArrayIteratorIterable_.prototype.next=function(){return this.idx_<this.arr_.length?{done:!1,value:this.arr_[this.idx_++]}:{done:!0,value:void 0}},typeof Symbol<"u"&&(jspb.Map.ArrayIteratorIterable_.prototype[Symbol.iterator]=function(){return this}),jspb.Map.prototype.getLength=function(){return this.stringKeys_().length},goog.exportProperty(jspb.Map.prototype,"getLength",jspb.Map.prototype.getLength),jspb.Map.prototype.clear=function(){this.map_={},this.arrClean=!1},goog.exportProperty(jspb.Map.prototype,"clear",jspb.Map.prototype.clear),jspb.Map.prototype.del=function(i){i=i.toString();var e=this.map_.hasOwnProperty(i);return delete this.map_[i],this.arrClean=!1,e},goog.exportProperty(jspb.Map.prototype,"del",jspb.Map.prototype.del),jspb.Map.prototype.getEntryList=function(){var i=[],e=this.stringKeys_();e.sort();for(var o=0;o<e.length;o++){var d=this.map_[e[o]];i.push([d.key,d.value])}return i},goog.exportProperty(jspb.Map.prototype,"getEntryList",jspb.Map.prototype.getEntryList),jspb.Map.prototype.entries=function(){var i=[],e=this.stringKeys_();e.sort();for(var o=0;o<e.length;o++){var d=this.map_[e[o]];i.push([d.key,this.wrapEntry_(d)])}return new jspb.Map.ArrayIteratorIterable_(i)},goog.exportProperty(jspb.Map.prototype,"entries",jspb.Map.prototype.entries),jspb.Map.prototype.keys=function(){var i=[],e=this.stringKeys_();e.sort();for(var o=0;o<e.length;o++)i.push(this.map_[e[o]].key);return new jspb.Map.ArrayIteratorIterable_(i)},goog.exportProperty(jspb.Map.prototype,"keys",jspb.Map.prototype.keys),jspb.Map.prototype.values=function(){var i=[],e=this.stringKeys_();e.sort();for(var o=0;o<e.length;o++)i.push(this.wrapEntry_(this.map_[e[o]]));return new jspb.Map.ArrayIteratorIterable_(i)},goog.exportProperty(jspb.Map.prototype,"values",jspb.Map.prototype.values),jspb.Map.prototype.forEach=function(i,e){var o=this.stringKeys_();o.sort();for(var d=0;d<o.length;d++){var h=this.map_[o[d]];i.call(e,this.wrapEntry_(h),h.key,this)}},goog.exportProperty(jspb.Map.prototype,"forEach",jspb.Map.prototype.forEach),jspb.Map.prototype.set=function(i,e){var o=new jspb.Map.Entry_(i);return this.valueCtor_?(o.valueWrapper=e,o.value=e.toArray()):o.value=e,this.map_[i.toString()]=o,this.arrClean=!1,this},goog.exportProperty(jspb.Map.prototype,"set",jspb.Map.prototype.set),jspb.Map.prototype.wrapEntry_=function(i){return this.valueCtor_?(i.valueWrapper||(i.valueWrapper=new this.valueCtor_(i.value)),i.valueWrapper):i.value},jspb.Map.prototype.get=function(i){if(i=this.map_[i.toString()])return this.wrapEntry_(i)},goog.exportProperty(jspb.Map.prototype,"get",jspb.Map.prototype.get),jspb.Map.prototype.has=function(i){return i.toString()in this.map_},goog.exportProperty(jspb.Map.prototype,"has",jspb.Map.prototype.has),jspb.Map.prototype.serializeBinary=function(i,e,o,d,h){var g=this.stringKeys_();g.sort();for(var b=0;b<g.length;b++){var $=this.map_[g[b]];e.beginSubMessage(i),o.call(e,1,$.key),this.valueCtor_?d.call(e,2,this.wrapEntry_($),h):d.call(e,2,$.value),e.endSubMessage()}},goog.exportProperty(jspb.Map.prototype,"serializeBinary",jspb.Map.prototype.serializeBinary),jspb.Map.deserializeBinary=function(i,e,o,d,h,g,b){for(;e.nextField()&&!e.isEndGroup();){var $=e.getFieldNumber();$==1?g=o.call(e):$==2&&(i.valueCtor_?(jspb.asserts.assert(h),b||(b=new i.valueCtor_),d.call(e,b,h)):b=d.call(e))}jspb.asserts.assert(g!=null),jspb.asserts.assert(b!=null),i.set(g,b)},goog.exportProperty(jspb.Map,"deserializeBinary",jspb.Map.deserializeBinary),jspb.Map.prototype.stringKeys_=function(){var i=this.map_,e=[],o;for(o in i)Object.prototype.hasOwnProperty.call(i,o)&&e.push(o);return e},jspb.Map.Entry_=function(i,e){this.key=i,this.value=e,this.valueWrapper=void 0},jspb.ExtensionFieldInfo=function(i,e,o,d,h){this.fieldIndex=i,this.fieldName=e,this.ctor=o,this.toObjectFn=d,this.isRepeated=h},goog.exportSymbol("jspb.ExtensionFieldInfo",jspb.ExtensionFieldInfo),jspb.ExtensionFieldBinaryInfo=function(i,e,o,d,h,g){this.fieldInfo=i,this.binaryReaderFn=e,this.binaryWriterFn=o,this.binaryMessageSerializeFn=d,this.binaryMessageDeserializeFn=h,this.isPacked=g},goog.exportSymbol("jspb.ExtensionFieldBinaryInfo",jspb.ExtensionFieldBinaryInfo),jspb.ExtensionFieldInfo.prototype.isMessageType=function(){return!!this.ctor},goog.exportProperty(jspb.ExtensionFieldInfo.prototype,"isMessageType",jspb.ExtensionFieldInfo.prototype.isMessageType),jspb.Message=function(){},goog.exportSymbol("jspb.Message",jspb.Message),jspb.Message.GENERATE_TO_OBJECT=!0,goog.exportProperty(jspb.Message,"GENERATE_TO_OBJECT",jspb.Message.GENERATE_TO_OBJECT),jspb.Message.GENERATE_FROM_OBJECT=!goog.DISALLOW_TEST_ONLY_CODE,goog.exportProperty(jspb.Message,"GENERATE_FROM_OBJECT",jspb.Message.GENERATE_FROM_OBJECT),jspb.Message.GENERATE_TO_STRING=!0,jspb.Message.ASSUME_LOCAL_ARRAYS=!1,jspb.Message.SERIALIZE_EMPTY_TRAILING_FIELDS=!0,jspb.Message.SUPPORTS_UINT8ARRAY_=typeof Uint8Array=="function",jspb.Message.prototype.getJsPbMessageId=function(){return this.messageId_},goog.exportProperty(jspb.Message.prototype,"getJsPbMessageId",jspb.Message.prototype.getJsPbMessageId),jspb.Message.getIndex_=function(i,e){return e+i.arrayIndexOffset_},jspb.Message.hiddenES6Property_=function(){},jspb.Message.getFieldNumber_=function(i,e){return e-i.arrayIndexOffset_},jspb.Message.initialize=function(i,e,o,d,h,g){if(i.wrappers_=null,e||(e=o?[o]:[]),i.messageId_=o?String(o):void 0,i.arrayIndexOffset_=o===0?-1:0,i.array=e,jspb.Message.initPivotAndExtensionObject_(i,d),i.convertedPrimitiveFields_={},jspb.Message.SERIALIZE_EMPTY_TRAILING_FIELDS||(i.repeatedFields=h),h)for(e=0;e<h.length;e++)o=h[e],o<i.pivot_?(o=jspb.Message.getIndex_(i,o),i.array[o]=i.array[o]||jspb.Message.EMPTY_LIST_SENTINEL_):(jspb.Message.maybeInitEmptyExtensionObject_(i),i.extensionObject_[o]=i.extensionObject_[o]||jspb.Message.EMPTY_LIST_SENTINEL_);if(g&&g.length)for(e=0;e<g.length;e++)jspb.Message.computeOneofCase(i,g[e])},goog.exportProperty(jspb.Message,"initialize",jspb.Message.initialize),jspb.Message.EMPTY_LIST_SENTINEL_=goog.DEBUG&&Object.freeze?Object.freeze([]):[],jspb.Message.isArray_=function(i){return jspb.Message.ASSUME_LOCAL_ARRAYS?i instanceof Array:Array.isArray(i)},jspb.Message.isExtensionObject_=function(i){return i!==null&&typeof i=="object"&&!jspb.Message.isArray_(i)&&!(jspb.Message.SUPPORTS_UINT8ARRAY_&&i instanceof Uint8Array)},jspb.Message.initPivotAndExtensionObject_=function(i,e){var o=i.array.length,d=-1;if(o&&(d=o-1,o=i.array[d],jspb.Message.isExtensionObject_(o))){i.pivot_=jspb.Message.getFieldNumber_(i,d),i.extensionObject_=o;return}-1<e?(i.pivot_=Math.max(e,jspb.Message.getFieldNumber_(i,d+1)),i.extensionObject_=null):i.pivot_=Number.MAX_VALUE},jspb.Message.maybeInitEmptyExtensionObject_=function(i){var e=jspb.Message.getIndex_(i,i.pivot_);i.array[e]||(i.extensionObject_=i.array[e]={})},jspb.Message.toObjectList=function(i,e,o){for(var d=[],h=0;h<i.length;h++)d[h]=e.call(i[h],o,i[h]);return d},goog.exportProperty(jspb.Message,"toObjectList",jspb.Message.toObjectList),jspb.Message.toObjectExtension=function(i,e,o,d,h){for(var g in o){var b=o[g],$=d.call(i,b);if($!=null){for(var j in b.fieldName)if(b.fieldName.hasOwnProperty(j))break;e[j]=b.toObjectFn?b.isRepeated?jspb.Message.toObjectList($,b.toObjectFn,h):b.toObjectFn(h,$):$}}},goog.exportProperty(jspb.Message,"toObjectExtension",jspb.Message.toObjectExtension),jspb.Message.serializeBinaryExtensions=function(i,e,o,d){for(var h in o){var g=o[h],b=g.fieldInfo;if(!g.binaryWriterFn)throw Error("Message extension present that was generated without binary serialization support");var $=d.call(i,b);if($!=null)if(b.isMessageType())if(g.binaryMessageSerializeFn)g.binaryWriterFn.call(e,b.fieldIndex,$,g.binaryMessageSerializeFn);else throw Error("Message extension present holding submessage without binary support enabled, and message is being serialized to binary format");else g.binaryWriterFn.call(e,b.fieldIndex,$)}},goog.exportProperty(jspb.Message,"serializeBinaryExtensions",jspb.Message.serializeBinaryExtensions),jspb.Message.readBinaryExtension=function(i,e,o,d,h){var g=o[e.getFieldNumber()];if(g){if(o=g.fieldInfo,!g.binaryReaderFn)throw Error("Deserializing extension whose generated code does not support binary format");if(o.isMessageType()){var b=new o.ctor;g.binaryReaderFn.call(e,b,g.binaryMessageDeserializeFn)}else b=g.binaryReaderFn.call(e);o.isRepeated&&!g.isPacked?(e=d.call(i,o))?e.push(b):h.call(i,o,[b]):h.call(i,o,b)}else e.skipField()},goog.exportProperty(jspb.Message,"readBinaryExtension",jspb.Message.readBinaryExtension),jspb.Message.getField=function(i,e){if(e<i.pivot_){e=jspb.Message.getIndex_(i,e);var o=i.array[e];return o===jspb.Message.EMPTY_LIST_SENTINEL_?i.array[e]=[]:o}if(i.extensionObject_)return o=i.extensionObject_[e],o===jspb.Message.EMPTY_LIST_SENTINEL_?i.extensionObject_[e]=[]:o},goog.exportProperty(jspb.Message,"getField",jspb.Message.getField),jspb.Message.getRepeatedField=function(i,e){return jspb.Message.getField(i,e)},goog.exportProperty(jspb.Message,"getRepeatedField",jspb.Message.getRepeatedField),jspb.Message.getOptionalFloatingPointField=function(i,e){return i=jspb.Message.getField(i,e),i==null?i:+i},goog.exportProperty(jspb.Message,"getOptionalFloatingPointField",jspb.Message.getOptionalFloatingPointField),jspb.Message.getBooleanField=function(i,e){return i=jspb.Message.getField(i,e),i==null?i:!!i},goog.exportProperty(jspb.Message,"getBooleanField",jspb.Message.getBooleanField),jspb.Message.getRepeatedFloatingPointField=function(i,e){var o=jspb.Message.getRepeatedField(i,e);if(i.convertedPrimitiveFields_||(i.convertedPrimitiveFields_={}),!i.convertedPrimitiveFields_[e]){for(var d=0;d<o.length;d++)o[d]=+o[d];i.convertedPrimitiveFields_[e]=!0}return o},goog.exportProperty(jspb.Message,"getRepeatedFloatingPointField",jspb.Message.getRepeatedFloatingPointField),jspb.Message.getRepeatedBooleanField=function(i,e){var o=jspb.Message.getRepeatedField(i,e);if(i.convertedPrimitiveFields_||(i.convertedPrimitiveFields_={}),!i.convertedPrimitiveFields_[e]){for(var d=0;d<o.length;d++)o[d]=!!o[d];i.convertedPrimitiveFields_[e]=!0}return o},goog.exportProperty(jspb.Message,"getRepeatedBooleanField",jspb.Message.getRepeatedBooleanField),jspb.Message.bytesAsB64=function(i){return i==null||typeof i=="string"?i:jspb.Message.SUPPORTS_UINT8ARRAY_&&i instanceof Uint8Array?goog.crypt.base64.encodeByteArray(i):(jspb.asserts.fail("Cannot coerce to b64 string: "+goog.typeOf(i)),null)},goog.exportProperty(jspb.Message,"bytesAsB64",jspb.Message.bytesAsB64),jspb.Message.bytesAsU8=function(i){return i==null||i instanceof Uint8Array?i:typeof i=="string"?goog.crypt.base64.decodeStringToUint8Array(i):(jspb.asserts.fail("Cannot coerce to Uint8Array: "+goog.typeOf(i)),null)},goog.exportProperty(jspb.Message,"bytesAsU8",jspb.Message.bytesAsU8),jspb.Message.bytesListAsB64=function(i){return jspb.Message.assertConsistentTypes_(i),i.length&&typeof i[0]!="string"?goog.array.map(i,jspb.Message.bytesAsB64):i},goog.exportProperty(jspb.Message,"bytesListAsB64",jspb.Message.bytesListAsB64),jspb.Message.bytesListAsU8=function(i){return jspb.Message.assertConsistentTypes_(i),!i.length||i[0]instanceof Uint8Array?i:goog.array.map(i,jspb.Message.bytesAsU8)},goog.exportProperty(jspb.Message,"bytesListAsU8",jspb.Message.bytesListAsU8),jspb.Message.assertConsistentTypes_=function(i){if(goog.DEBUG&&i&&1<i.length){var e=goog.typeOf(i[0]);goog.array.forEach(i,function(o){goog.typeOf(o)!=e&&jspb.asserts.fail("Inconsistent type in JSPB repeated field array. Got "+goog.typeOf(o)+" expected "+e)})}},jspb.Message.getFieldWithDefault=function(i,e,o){return i=jspb.Message.getField(i,e),i??o},goog.exportProperty(jspb.Message,"getFieldWithDefault",jspb.Message.getFieldWithDefault),jspb.Message.getBooleanFieldWithDefault=function(i,e,o){return i=jspb.Message.getBooleanField(i,e),i??o},goog.exportProperty(jspb.Message,"getBooleanFieldWithDefault",jspb.Message.getBooleanFieldWithDefault),jspb.Message.getFloatingPointFieldWithDefault=function(i,e,o){return i=jspb.Message.getOptionalFloatingPointField(i,e),i??o},goog.exportProperty(jspb.Message,"getFloatingPointFieldWithDefault",jspb.Message.getFloatingPointFieldWithDefault),jspb.Message.getFieldProto3=jspb.Message.getFieldWithDefault,goog.exportProperty(jspb.Message,"getFieldProto3",jspb.Message.getFieldProto3),jspb.Message.getMapField=function(i,e,o,d){if(i.wrappers_||(i.wrappers_={}),e in i.wrappers_)return i.wrappers_[e];var h=jspb.Message.getField(i,e);if(!h){if(o)return;h=[],jspb.Message.setField(i,e,h)}return i.wrappers_[e]=new jspb.Map(h,d)},goog.exportProperty(jspb.Message,"getMapField",jspb.Message.getMapField),jspb.Message.setField=function(i,e,o){return jspb.asserts.assertInstanceof(i,jspb.Message),e<i.pivot_?i.array[jspb.Message.getIndex_(i,e)]=o:(jspb.Message.maybeInitEmptyExtensionObject_(i),i.extensionObject_[e]=o),i},goog.exportProperty(jspb.Message,"setField",jspb.Message.setField),jspb.Message.setProto3IntField=function(i,e,o){return jspb.Message.setFieldIgnoringDefault_(i,e,o,0)},goog.exportProperty(jspb.Message,"setProto3IntField",jspb.Message.setProto3IntField),jspb.Message.setProto3FloatField=function(i,e,o){return jspb.Message.setFieldIgnoringDefault_(i,e,o,0)},goog.exportProperty(jspb.Message,"setProto3FloatField",jspb.Message.setProto3FloatField),jspb.Message.setProto3BooleanField=function(i,e,o){return jspb.Message.setFieldIgnoringDefault_(i,e,o,!1)},goog.exportProperty(jspb.Message,"setProto3BooleanField",jspb.Message.setProto3BooleanField),jspb.Message.setProto3StringField=function(i,e,o){return jspb.Message.setFieldIgnoringDefault_(i,e,o,"")},goog.exportProperty(jspb.Message,"setProto3StringField",jspb.Message.setProto3StringField),jspb.Message.setProto3BytesField=function(i,e,o){return jspb.Message.setFieldIgnoringDefault_(i,e,o,"")},goog.exportProperty(jspb.Message,"setProto3BytesField",jspb.Message.setProto3BytesField),jspb.Message.setProto3EnumField=function(i,e,o){return jspb.Message.setFieldIgnoringDefault_(i,e,o,0)},goog.exportProperty(jspb.Message,"setProto3EnumField",jspb.Message.setProto3EnumField),jspb.Message.setProto3StringIntField=function(i,e,o){return jspb.Message.setFieldIgnoringDefault_(i,e,o,"0")},goog.exportProperty(jspb.Message,"setProto3StringIntField",jspb.Message.setProto3StringIntField),jspb.Message.setFieldIgnoringDefault_=function(i,e,o,d){return jspb.asserts.assertInstanceof(i,jspb.Message),o!==d?jspb.Message.setField(i,e,o):e<i.pivot_?i.array[jspb.Message.getIndex_(i,e)]=null:(jspb.Message.maybeInitEmptyExtensionObject_(i),delete i.extensionObject_[e]),i},jspb.Message.addToRepeatedField=function(i,e,o,d){return jspb.asserts.assertInstanceof(i,jspb.Message),e=jspb.Message.getRepeatedField(i,e),d!=null?e.splice(d,0,o):e.push(o),i},goog.exportProperty(jspb.Message,"addToRepeatedField",jspb.Message.addToRepeatedField),jspb.Message.setOneofField=function(i,e,o,d){return jspb.asserts.assertInstanceof(i,jspb.Message),(o=jspb.Message.computeOneofCase(i,o))&&o!==e&&d!==void 0&&(i.wrappers_&&o in i.wrappers_&&(i.wrappers_[o]=void 0),jspb.Message.setField(i,o,void 0)),jspb.Message.setField(i,e,d)},goog.exportProperty(jspb.Message,"setOneofField",jspb.Message.setOneofField),jspb.Message.computeOneofCase=function(i,e){for(var o,d,h=0;h<e.length;h++){var g=e[h],b=jspb.Message.getField(i,g);b!=null&&(o=g,d=b,jspb.Message.setField(i,g,void 0))}return o?(jspb.Message.setField(i,o,d),o):0},goog.exportProperty(jspb.Message,"computeOneofCase",jspb.Message.computeOneofCase),jspb.Message.getWrapperField=function(i,e,o,d){if(i.wrappers_||(i.wrappers_={}),!i.wrappers_[o]){var h=jspb.Message.getField(i,o);(d||h)&&(i.wrappers_[o]=new e(h))}return i.wrappers_[o]},goog.exportProperty(jspb.Message,"getWrapperField",jspb.Message.getWrapperField),jspb.Message.getRepeatedWrapperField=function(i,e,o){return jspb.Message.wrapRepeatedField_(i,e,o),e=i.wrappers_[o],e==jspb.Message.EMPTY_LIST_SENTINEL_&&(e=i.wrappers_[o]=[]),e},goog.exportProperty(jspb.Message,"getRepeatedWrapperField",jspb.Message.getRepeatedWrapperField),jspb.Message.wrapRepeatedField_=function(i,e,o){if(i.wrappers_||(i.wrappers_={}),!i.wrappers_[o]){for(var d=jspb.Message.getRepeatedField(i,o),h=[],g=0;g<d.length;g++)h[g]=new e(d[g]);i.wrappers_[o]=h}},jspb.Message.setWrapperField=function(i,e,o){jspb.asserts.assertInstanceof(i,jspb.Message),i.wrappers_||(i.wrappers_={});var d=o&&o.toArray();return i.wrappers_[e]=o,jspb.Message.setField(i,e,d)},goog.exportProperty(jspb.Message,"setWrapperField",jspb.Message.setWrapperField),jspb.Message.setOneofWrapperField=function(i,e,o,d){jspb.asserts.assertInstanceof(i,jspb.Message),i.wrappers_||(i.wrappers_={});var h=d&&d.toArray();return i.wrappers_[e]=d,jspb.Message.setOneofField(i,e,o,h)},goog.exportProperty(jspb.Message,"setOneofWrapperField",jspb.Message.setOneofWrapperField),jspb.Message.setRepeatedWrapperField=function(i,e,o){jspb.asserts.assertInstanceof(i,jspb.Message),i.wrappers_||(i.wrappers_={}),o=o||[];for(var d=[],h=0;h<o.length;h++)d[h]=o[h].toArray();return i.wrappers_[e]=o,jspb.Message.setField(i,e,d)},goog.exportProperty(jspb.Message,"setRepeatedWrapperField",jspb.Message.setRepeatedWrapperField),jspb.Message.addToRepeatedWrapperField=function(i,e,o,d,h){jspb.Message.wrapRepeatedField_(i,d,e);var g=i.wrappers_[e];return g||(g=i.wrappers_[e]=[]),o=o||new d,i=jspb.Message.getRepeatedField(i,e),h!=null?(g.splice(h,0,o),i.splice(h,0,o.toArray())):(g.push(o),i.push(o.toArray())),o},goog.exportProperty(jspb.Message,"addToRepeatedWrapperField",jspb.Message.addToRepeatedWrapperField),jspb.Message.toMap=function(i,e,o,d){for(var h={},g=0;g<i.length;g++)h[e.call(i[g])]=o?o.call(i[g],d,i[g]):i[g];return h},goog.exportProperty(jspb.Message,"toMap",jspb.Message.toMap),jspb.Message.prototype.syncMapFields_=function(){if(this.wrappers_)for(var i in this.wrappers_){var e=this.wrappers_[i];if(Array.isArray(e))for(var o=0;o<e.length;o++)e[o]&&e[o].toArray();else e&&e.toArray()}},jspb.Message.prototype.toArray=function(){return this.syncMapFields_(),this.array},goog.exportProperty(jspb.Message.prototype,"toArray",jspb.Message.prototype.toArray),jspb.Message.GENERATE_TO_STRING&&(jspb.Message.prototype.toString=function(){return this.syncMapFields_(),this.array.toString()}),jspb.Message.prototype.getExtension=function(i){if(this.extensionObject_){this.wrappers_||(this.wrappers_={});var e=i.fieldIndex;if(i.isRepeated){if(i.isMessageType())return this.wrappers_[e]||(this.wrappers_[e]=goog.array.map(this.extensionObject_[e]||[],function(o){return new i.ctor(o)})),this.wrappers_[e]}else if(i.isMessageType())return!this.wrappers_[e]&&this.extensionObject_[e]&&(this.wrappers_[e]=new i.ctor(this.extensionObject_[e])),this.wrappers_[e];return this.extensionObject_[e]}},goog.exportProperty(jspb.Message.prototype,"getExtension",jspb.Message.prototype.getExtension),jspb.Message.prototype.setExtension=function(i,e){this.wrappers_||(this.wrappers_={}),jspb.Message.maybeInitEmptyExtensionObject_(this);var o=i.fieldIndex;return i.isRepeated?(e=e||[],i.isMessageType()?(this.wrappers_[o]=e,this.extensionObject_[o]=goog.array.map(e,function(d){return d.toArray()})):this.extensionObject_[o]=e):i.isMessageType()?(this.wrappers_[o]=e,this.extensionObject_[o]=e&&e.toArray()):this.extensionObject_[o]=e,this},goog.exportProperty(jspb.Message.prototype,"setExtension",jspb.Message.prototype.setExtension),jspb.Message.difference=function(i,e){if(!(i instanceof e.constructor))throw Error("Messages have different types.");var o=i.toArray();e=e.toArray();var d=[],h=0,g=o.length>e.length?o.length:e.length;for(i.getJsPbMessageId()&&(d[0]=i.getJsPbMessageId(),h=1);h<g;h++)jspb.Message.compareFields(o[h],e[h])||(d[h]=e[h]);return new i.constructor(d)},goog.exportProperty(jspb.Message,"difference",jspb.Message.difference),jspb.Message.equals=function(i,e){return i==e||!(!i||!e)&&i instanceof e.constructor&&jspb.Message.compareFields(i.toArray(),e.toArray())},goog.exportProperty(jspb.Message,"equals",jspb.Message.equals),jspb.Message.compareExtensions=function(i,e){i=i||{},e=e||{};var o={},d;for(d in i)o[d]=0;for(d in e)o[d]=0;for(d in o)if(!jspb.Message.compareFields(i[d],e[d]))return!1;return!0},goog.exportProperty(jspb.Message,"compareExtensions",jspb.Message.compareExtensions),jspb.Message.compareFields=function(i,e){if(i==e)return!0;if(!goog.isObject(i)||!goog.isObject(e))return typeof i=="number"&&isNaN(i)||typeof e=="number"&&isNaN(e)?String(i)==String(e):!1;if(i.constructor!=e.constructor)return!1;if(jspb.Message.SUPPORTS_UINT8ARRAY_&&i.constructor===Uint8Array){if(i.length!=e.length)return!1;for(var o=0;o<i.length;o++)if(i[o]!=e[o])return!1;return!0}if(i.constructor===Array){var d=void 0,h=void 0,g=Math.max(i.length,e.length);for(o=0;o<g;o++){var b=i[o],$=e[o];if(b&&b.constructor==Object&&(jspb.asserts.assert(d===void 0),jspb.asserts.assert(o===i.length-1),d=b,b=void 0),$&&$.constructor==Object&&(jspb.asserts.assert(h===void 0),jspb.asserts.assert(o===e.length-1),h=$,$=void 0),!jspb.Message.compareFields(b,$))return!1}return d||h?(d=d||{},h=h||{},jspb.Message.compareExtensions(d,h)):!0}if(i.constructor===Object)return jspb.Message.compareExtensions(i,e);throw Error("Invalid type in JSPB array")},goog.exportProperty(jspb.Message,"compareFields",jspb.Message.compareFields),jspb.Message.prototype.cloneMessage=function(){return jspb.Message.cloneMessage(this)},goog.exportProperty(jspb.Message.prototype,"cloneMessage",jspb.Message.prototype.cloneMessage),jspb.Message.prototype.clone=function(){return jspb.Message.cloneMessage(this)},goog.exportProperty(jspb.Message.prototype,"clone",jspb.Message.prototype.clone),jspb.Message.clone=function(i){return jspb.Message.cloneMessage(i)},goog.exportProperty(jspb.Message,"clone",jspb.Message.clone),jspb.Message.cloneMessage=function(i){return new i.constructor(jspb.Message.clone_(i.toArray()))},jspb.Message.copyInto=function(i,e){jspb.asserts.assertInstanceof(i,jspb.Message),jspb.asserts.assertInstanceof(e,jspb.Message),jspb.asserts.assert(i.constructor==e.constructor,"Copy source and target message should have the same type."),i=jspb.Message.clone(i);for(var o=e.toArray(),d=i.toArray(),h=o.length=0;h<d.length;h++)o[h]=d[h];e.wrappers_=i.wrappers_,e.extensionObject_=i.extensionObject_},goog.exportProperty(jspb.Message,"copyInto",jspb.Message.copyInto),jspb.Message.clone_=function(i){if(Array.isArray(i)){for(var e=Array(i.length),o=0;o<i.length;o++){var d=i[o];d!=null&&(e[o]=typeof d=="object"?jspb.Message.clone_(jspb.asserts.assert(d)):d)}return e}if(jspb.Message.SUPPORTS_UINT8ARRAY_&&i instanceof Uint8Array)return new Uint8Array(i);e={};for(o in i)d=i[o],d!=null&&(e[o]=typeof d=="object"?jspb.Message.clone_(jspb.asserts.assert(d)):d);return e},jspb.Message.registerMessageType=function(i,e){e.messageId=i},goog.exportProperty(jspb.Message,"registerMessageType",jspb.Message.registerMessageType),jspb.Message.messageSetExtensions={},jspb.Message.messageSetExtensionsBinary={},jspb.Export={},typeof exports=="object"&&(exports.Map=jspb.Map,exports.Message=jspb.Message,exports.BinaryReader=jspb.BinaryReader,exports.BinaryWriter=jspb.BinaryWriter,exports.ExtensionFieldInfo=jspb.ExtensionFieldInfo,exports.ExtensionFieldBinaryInfo=jspb.ExtensionFieldBinaryInfo,exports.exportSymbol=goog.exportSymbol,exports.inherits=goog.inherits,exports.object={extend:goog.object.extend},exports.typeOf=goog.typeOf)}),pr=He(i=>{var e=Oo(),o=e,d=typeof globalThis<"u"&&globalThis||typeof window<"u"&&window||typeof d<"u"&&d||typeof self<"u"&&self||(function(){return this}).call(null)||Function("return this")();o.exportSymbol("proto.duckling_endpoint.DucklingRequest",null,d),o.exportSymbol("proto.duckling_endpoint.DucklingResponse",null,d),proto.duckling_endpoint.DucklingRequest=function(h){e.Message.initialize(this,h,0,-1,null,null)},o.inherits(proto.duckling_endpoint.DucklingRequest,e.Message),o.DEBUG&&!COMPILED&&(proto.duckling_endpoint.DucklingRequest.displayName="proto.duckling_endpoint.DucklingRequest"),proto.duckling_endpoint.DucklingResponse=function(h){e.Message.initialize(this,h,0,-1,null,null)},o.inherits(proto.duckling_endpoint.DucklingResponse,e.Message),o.DEBUG&&!COMPILED&&(proto.duckling_endpoint.DucklingResponse.displayName="proto.duckling_endpoint.DucklingResponse"),e.Message.GENERATE_TO_OBJECT&&(proto.duckling_endpoint.DucklingRequest.prototype.toObject=function(h){return proto.duckling_endpoint.DucklingRequest.toObject(h,this)},proto.duckling_endpoint.DucklingRequest.toObject=function(h,g){var b={action:e.Message.getFieldWithDefault(g,1,0),bytes:g.getBytes_asB64()};return h&&(b.$jspbMessageInstance=g),b}),proto.duckling_endpoint.DucklingRequest.deserializeBinary=function(h){var g=new e.BinaryReader(h),b=new proto.duckling_endpoint.DucklingRequest;return proto.duckling_endpoint.DucklingRequest.deserializeBinaryFromReader(b,g)},proto.duckling_endpoint.DucklingRequest.deserializeBinaryFromReader=function(h,g){for(;g.nextField()&&!g.isEndGroup();){var b=g.getFieldNumber();switch(b){case 1:var $=g.readUint32();h.setAction($);break;case 2:var $=g.readBytes();h.setBytes($);break;default:g.skipField();break}}return h},proto.duckling_endpoint.DucklingRequest.prototype.serializeBinary=function(){var h=new e.BinaryWriter;return proto.duckling_endpoint.DucklingRequest.serializeBinaryToWriter(this,h),h.getResultBuffer()},proto.duckling_endpoint.DucklingRequest.serializeBinaryToWriter=function(h,g){var b=void 0;b=h.getAction(),b!==0&&g.writeUint32(1,b),b=h.getBytes_asU8(),b.length>0&&g.writeBytes(2,b)},proto.duckling_endpoint.DucklingRequest.prototype.getAction=function(){return e.Message.getFieldWithDefault(this,1,0)},proto.duckling_endpoint.DucklingRequest.prototype.setAction=function(h){return e.Message.setProto3IntField(this,1,h)},proto.duckling_endpoint.DucklingRequest.prototype.getBytes=function(){return e.Message.getFieldWithDefault(this,2,"")},proto.duckling_endpoint.DucklingRequest.prototype.getBytes_asB64=function(){return e.Message.bytesAsB64(this.getBytes())},proto.duckling_endpoint.DucklingRequest.prototype.getBytes_asU8=function(){return e.Message.bytesAsU8(this.getBytes())},proto.duckling_endpoint.DucklingRequest.prototype.setBytes=function(h){return e.Message.setProto3BytesField(this,2,h)},e.Message.GENERATE_TO_OBJECT&&(proto.duckling_endpoint.DucklingResponse.prototype.toObject=function(h){return proto.duckling_endpoint.DucklingResponse.toObject(h,this)},proto.duckling_endpoint.DucklingResponse.toObject=function(h,g){var b={bytes:g.getBytes_asB64()};return h&&(b.$jspbMessageInstance=g),b}),proto.duckling_endpoint.DucklingResponse.deserializeBinary=function(h){var g=new e.BinaryReader(h),b=new proto.duckling_endpoint.DucklingResponse;return proto.duckling_endpoint.DucklingResponse.deserializeBinaryFromReader(b,g)},proto.duckling_endpoint.DucklingResponse.deserializeBinaryFromReader=function(h,g){for(;g.nextField()&&!g.isEndGroup();){var b=g.getFieldNumber();switch(b){case 1:var $=g.readBytes();h.setBytes($);break;default:g.skipField();break}}return h},proto.duckling_endpoint.DucklingResponse.prototype.serializeBinary=function(){var h=new e.BinaryWriter;return proto.duckling_endpoint.DucklingResponse.serializeBinaryToWriter(this,h),h.getResultBuffer()},proto.duckling_endpoint.DucklingResponse.serializeBinaryToWriter=function(h,g){var b=void 0;b=h.getBytes_asU8(),b.length>0&&g.writeBytes(1,b)},proto.duckling_endpoint.DucklingResponse.prototype.getBytes=function(){return e.Message.getFieldWithDefault(this,1,"")},proto.duckling_endpoint.DucklingResponse.prototype.getBytes_asB64=function(){return e.Message.bytesAsB64(this.getBytes())},proto.duckling_endpoint.DucklingResponse.prototype.getBytes_asU8=function(){return e.Message.bytesAsU8(this.getBytes())},proto.duckling_endpoint.DucklingResponse.prototype.setBytes=function(h){return e.Message.setProto3BytesField(this,1,h)},o.object.extend(i,proto.duckling_endpoint)}),Mo=He((i,e)=>{var o={};o.web=lr();var d={};d.duckling_endpoint=pr(),d.duckling_endpoint.DucklingEndpointClient=function(g,b,$){$||($={}),$.format="binary",this.client_=new o.web.GrpcWebClientBase($),this.hostname_=g.replace(/\/+$/,"")},d.duckling_endpoint.DucklingEndpointPromiseClient=function(g,b,$){$||($={}),$.format="binary",this.client_=new o.web.GrpcWebClientBase($),this.hostname_=g.replace(/\/+$/,"")};var h=new o.web.MethodDescriptor("/duckling_endpoint.DucklingEndpoint/DoAction",o.web.MethodType.UNARY,d.duckling_endpoint.DucklingRequest,d.duckling_endpoint.DucklingResponse,function(g){return g.serializeBinary()},d.duckling_endpoint.DucklingResponse.deserializeBinary);d.duckling_endpoint.DucklingEndpointClient.prototype.doAction=function(g,b,$){return this.client_.rpcCall(this.hostname_+"/duckling_endpoint.DucklingEndpoint/DoAction",g,b||{},h,$)},d.duckling_endpoint.DucklingEndpointPromiseClient.prototype.doAction=function(g,b){return this.client_.unaryCall(this.hostname_+"/duckling_endpoint.DucklingEndpoint/DoAction",g,b||{},h)},e.exports=d.duckling_endpoint}),Xo=Object.create,yr=Object.defineProperty,Zo=Object.getOwnPropertyDescriptor,Jo=Object.getOwnPropertyNames,en=Object.getPrototypeOf,tn=Object.prototype.hasOwnProperty,rn=(i,e)=>()=>(e||i((e={exports:{}}).exports,e),e.exports),on=(i,e,o,d)=>{if(e&&typeof e=="object"||typeof e=="function")for(let h of Jo(e))!tn.call(i,h)&&h!==o&&yr(i,h,{get:()=>e[h],enumerable:!(d=Zo(e,h))||d.enumerable});return i},nn=(i,e,o)=>(o=i!=null?Xo(en(i)):{},on(e||!i||!i.__esModule?yr(o,"default",{value:i,enumerable:!0}):o,i)),sn=rn((i,e)=>{e.exports=Worker}),an=(i=>(i[i.UNDEFINED=0]="UNDEFINED",i[i.AUTOMATIC=1]="AUTOMATIC",i[i.READ_ONLY=2]="READ_ONLY",i[i.READ_WRITE=3]="READ_WRITE",i))(an||{}),mr=(i=>(i[i.IDENTIFIER=0]="IDENTIFIER",i[i.NUMERIC_CONSTANT=1]="NUMERIC_CONSTANT",i[i.STRING_CONSTANT=2]="STRING_CONSTANT",i[i.OPERATOR=3]="OPERATOR",i[i.KEYWORD=4]="KEYWORD",i[i.COMMENT=5]="COMMENT",i))(mr||{}),gn=(i=>(i[i.NONE=0]="NONE",i[i.DEBUG=1]="DEBUG",i[i.INFO=2]="INFO",i[i.WARNING=3]="WARNING",i[i.ERROR=4]="ERROR",i))(gn||{}),un=(i=>(i[i.NONE=0]="NONE",i[i.CONNECT=1]="CONNECT",i[i.DISCONNECT=2]="DISCONNECT",i[i.OPEN=3]="OPEN",i[i.QUERY=4]="QUERY",i[i.INSTANTIATE=5]="INSTANTIATE",i))(un||{}),ln=(i=>(i[i.NONE=0]="NONE",i[i.OK=1]="OK",i[i.ERROR=2]="ERROR",i[i.START=3]="START",i[i.RUN=4]="RUN",i[i.CAPTURE=5]="CAPTURE",i))(ln||{}),pn=(i=>(i[i.NONE=0]="NONE",i[i.WEB_WORKER=1]="WEB_WORKER",i[i.NODE_WORKER=2]="NODE_WORKER",i[i.BINDINGS=3]="BINDINGS",i[i.ASYNC_DUCKDB=4]="ASYNC_DUCKDB",i))(pn||{}),_r=class{constructor(i=2){this.level=i}log(i){i.level>=this.level&&console.log(i)}},cn=(i=>(i[i.SUCCESS=0]="SUCCESS",i))(cn||{}),dn=class{constructor(i,e){this._bindings=i,this._conn=e}get bindings(){return this._bindings}async close(){return this._bindings.disconnect(this._conn)}useUnsafe(i){return i(this._bindings,this._conn)}async query(i){this._bindings.logger.log({timestamp:new Date,level:2,origin:4,topic:4,event:4,value:i});let e=await this._bindings.runQuery(this._conn,i),o=RecordBatchReader.from(e);return console.assert(o.isSync(),"Reader is not sync"),console.assert(o.isFile(),"Reader is not file"),new Table(o)}async send(i){this._bindings.logger.log({timestamp:new Date,level:2,origin:4,topic:4,event:4,value:i});let e=await this._bindings.startPendingQuery(this._conn,i);for(;e==null;)e=await this._bindings.pollPendingQuery(this._conn);let o=new Sr(this._bindings,this._conn,e),d=await RecordBatchReader.from(o);return console.assert(d.isAsync()),console.assert(d.isStream()),d}async cancelSent(){return await this._bindings.cancelPendingQuery(this._conn)}async getTableNames(i){return await this._bindings.getTableNames(this._conn,i)}async prepare(i){let e=await this._bindings.createPrepared(this._conn,i);return new fn(this._bindings,this._conn,e)}async insertArrowTable(i,e){let o=tableToIPC(i,"stream");await this.insertArrowFromIPCStream(o,e)}async insertArrowFromIPCStream(i,e){await this._bindings.insertArrowFromIPCStream(this._conn,i,e)}async insertCSVFromPath(i,e){await this._bindings.insertCSVFromPath(this._conn,i,e)}async insertJSONFromPath(i,e){await this._bindings.insertJSONFromPath(this._conn,i,e)}},Sr=class{constructor(i,e,o){this.db=i,this.conn=e,this.header=o,this._first=!0,this._depleted=!1,this._inFlight=null}async next(){if(this._first)return this._first=!1,{done:!1,value:this.header};if(this._depleted)return{done:!0,value:null};let i;return this._inFlight!=null?(i=await this._inFlight,this._inFlight=null):i=await this.db.fetchQueryResults(this.conn),this._depleted=i.length==0,this._depleted||(this._inFlight=this.db.fetchQueryResults(this.conn)),{done:this._depleted,value:i}}[Symbol.asyncIterator](){return this}},fn=class{constructor(i,e,o){this.bindings=i,this.connectionId=e,this.statementId=o}async close(){await this.bindings.closePrepared(this.connectionId,this.statementId)}async query(...i){let e=await this.bindings.runPrepared(this.connectionId,this.statementId,i),o=RecordBatchReader.from(e);return console.assert(o.isSync()),console.assert(o.isFile()),new Table(o)}async send(...i){let e=await this.bindings.sendPrepared(this.connectionId,this.statementId,i),o=new Sr(this.bindings,this.connectionId,e),d=await RecordBatchReader.from(o);return console.assert(d.isAsync()),console.assert(d.isStream()),d}},hn=(i=>(i.CANCEL_PENDING_QUERY="CANCEL_PENDING_QUERY",i.CLOSE_PREPARED="CLOSE_PREPARED",i.COLLECT_FILE_STATISTICS="COLLECT_FILE_STATISTICS",i.CONNECT="CONNECT",i.COPY_FILE_TO_BUFFER="COPY_FILE_TO_BUFFER",i.COPY_FILE_TO_PATH="COPY_FILE_TO_PATH",i.CREATE_PREPARED="CREATE_PREPARED",i.DISCONNECT="DISCONNECT",i.DROP_FILE="DROP_FILE",i.DROP_FILES="DROP_FILES",i.EXPORT_FILE_STATISTICS="EXPORT_FILE_STATISTICS",i.FETCH_QUERY_RESULTS="FETCH_QUERY_RESULTS",i.FLUSH_FILES="FLUSH_FILES",i.GET_FEATURE_FLAGS="GET_FEATURE_FLAGS",i.GET_TABLE_NAMES="GET_TABLE_NAMES",i.GET_VERSION="GET_VERSION",i.GLOB_FILE_INFOS="GLOB_FILE_INFOS",i.INSERT_ARROW_FROM_IPC_STREAM="INSERT_ARROW_FROM_IPC_STREAM",i.INSERT_CSV_FROM_PATH="IMPORT_CSV_FROM_PATH",i.INSERT_JSON_FROM_PATH="IMPORT_JSON_FROM_PATH",i.INSTANTIATE="INSTANTIATE",i.MOTHERDUCK_NETWORK_CALLBACK="MOTHERDUCK_NETWORK_CALLBACK",i.OPEN="OPEN",i.PING="PING",i.POLL_PENDING_QUERY="POLL_PENDING_QUERY",i.REGISTER_FILE_BUFFER="REGISTER_FILE_BUFFER",i.REGISTER_FILE_HANDLE="REGISTER_FILE_HANDLE",i.REGISTER_FILE_URL="REGISTER_FILE_URL",i.RESET="RESET",i.RUN_PREPARED="RUN_PREPARED",i.RUN_QUERY="RUN_QUERY",i.SEND_PREPARED="SEND_PREPARED",i.START_PENDING_QUERY="START_PENDING_QUERY",i.TOKENIZE="TOKENIZE",i))(hn||{}),yn=(i=>(i.CONNECTION_INFO="CONNECTION_INFO",i.ERROR="ERROR",i.FEATURE_FLAGS="FEATURE_FLAGS",i.FILE_BUFFER="FILE_BUFFER",i.FILE_INFOS="FILE_INFOS",i.FILE_SIZE="FILE_SIZE",i.FILE_STATISTICS="FILE_STATISTICS",i.INSTANTIATE_PROGRESS="INSTANTIATE_PROGRESS",i.LOG="LOG",i.OK="OK",i.PREPARED_STATEMENT_ID="PREPARED_STATEMENT_ID",i.QUERY_PLAN="QUERY_PLAN",i.QUERY_RESULT="QUERY_RESULT",i.QUERY_RESULT_CHUNK="QUERY_RESULT_CHUNK",i.QUERY_RESULT_HEADER="QUERY_RESULT_HEADER",i.QUERY_RESULT_HEADER_OR_NULL="QUERY_RESULT_HEADER_OR_NULL",i.REGISTERED_FILE="REGISTERED_FILE",i.SCRIPT_TOKENS="SCRIPT_TOKENS",i.SUCCESS="SUCCESS",i.TABLE_NAMES="TABLE_NAMES",i.VERSION_STRING="VERSION_STRING",i))(yn||{}),_=class{constructor(i,e){this.promiseResolver=()=>{},this.promiseRejecter=()=>{},this.type=i,this.data=e,this.promise=new Promise((o,d)=>{this.promiseResolver=o,this.promiseRejecter=d})}};function Ve(i){switch(i.typeId){case Type$1.Binary:return{sqlType:"binary"};case Type$1.Bool:return{sqlType:"bool"};case Type$1.Date:return{sqlType:"date"};case Type$1.DateDay:return{sqlType:"date32[d]"};case Type$1.DateMillisecond:return{sqlType:"date64[ms]"};case Type$1.Decimal:{let e=i;return{sqlType:"decimal",precision:e.precision,scale:e.scale}}case Type$1.Float:return{sqlType:"float"};case Type$1.Float16:return{sqlType:"float16"};case Type$1.Float32:return{sqlType:"float32"};case Type$1.Float64:return{sqlType:"float64"};case Type$1.Int:return{sqlType:"int32"};case Type$1.Int16:return{sqlType:"int16"};case Type$1.Int32:return{sqlType:"int32"};case Type$1.Int64:return{sqlType:"int64"};case Type$1.Uint16:return{sqlType:"uint16"};case Type$1.Uint32:return{sqlType:"uint32"};case Type$1.Uint64:return{sqlType:"uint64"};case Type$1.Uint8:return{sqlType:"uint8"};case Type$1.IntervalDayTime:return{sqlType:"interval[dt]"};case Type$1.IntervalYearMonth:return{sqlType:"interval[m]"};case Type$1.List:return{sqlType:"list",valueType:Ve(i.valueType)};case Type$1.FixedSizeBinary:return{sqlType:"fixedsizebinary",byteWidth:i.byteWidth};case Type$1.Null:return{sqlType:"null"};case Type$1.Utf8:return{sqlType:"utf8"};case Type$1.Struct:return{sqlType:"struct",fields:i.children.map(e=>dt(e.name,e.type))};case Type$1.Map:{let e=i;return{sqlType:"map",keyType:Ve(e.keyType),valueType:Ve(e.valueType)}}case Type$1.Time:return{sqlType:"time[s]"};case Type$1.TimeMicrosecond:return{sqlType:"time[us]"};case Type$1.TimeMillisecond:return{sqlType:"time[ms]"};case Type$1.TimeNanosecond:return{sqlType:"time[ns]"};case Type$1.TimeSecond:return{sqlType:"time[s]"};case Type$1.Timestamp:return{sqlType:"timestamp",timezone:i.timezone||void 0};case Type$1.TimestampSecond:return{sqlType:"timestamp[s]",timezone:i.timezone||void 0};case Type$1.TimestampMicrosecond:return{sqlType:"timestamp[us]",timezone:i.timezone||void 0};case Type$1.TimestampNanosecond:return{sqlType:"timestamp[ns]",timezone:i.timezone||void 0};case Type$1.TimestampMillisecond:return{sqlType:"timestamp[ms]",timezone:i.timezone||void 0}}throw new Error("unsupported arrow type: ".concat(i.toString()))}function dt(i,e){let o=Ve(e);return o.name=i,o}var mn=new TextEncoder,Tr=class{constructor(i,e=null){this._onInstantiationProgress=[],this._worker=null,this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{},this._nextMessageId=0,this._pendingRequests=new Map,this._logger=i,this._onMessageHandler=this.onMessage.bind(this),this._onErrorHandler=this.onError.bind(this),this._onCloseHandler=this.onClose.bind(this),e!=null&&this.attach(e)}get logger(){return this._logger}attach(i){this._worker=i,this._worker.addEventListener("message",this._onMessageHandler),this._worker.addEventListener("error",this._onErrorHandler),this._worker.addEventListener("close",this._onCloseHandler),this._workerShutdownPromise=new Promise((e,o)=>{this._workerShutdownResolver=e})}detach(){this._worker&&(this._worker.removeEventListener("message",this._onMessageHandler),this._worker.removeEventListener("error",this._onErrorHandler),this._worker.removeEventListener("close",this._onCloseHandler),this._worker=null,this._workerShutdownResolver(null),this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{})}async terminate(){this._worker&&(this._worker.terminate(),this._worker=null,this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{})}async postTask(i,e=[]){if(!this._worker){console.error("cannot send a message since the worker is not set!");return}let o=this._nextMessageId++;return this._pendingRequests.set(o,i),this._worker.postMessage({messageId:o,type:i.type,data:i.data},e),await i.promise}onMessage(i){var e;let o=i.data;switch(o.type){case"LOG":{this._logger.log(o.data);return}case"INSTANTIATE_PROGRESS":{for(let h of this._onInstantiationProgress)h(o.data);return}}let d=this._pendingRequests.get(o.requestId);if(!d){console.warn("unassociated response: [".concat(o.requestId,", ").concat(o.type.toString(),"]"));return}if(this._pendingRequests.delete(o.requestId),o.type=="ERROR"){let h=new Error(o.data.message);h.name=o.data.name,(e=Object.getOwnPropertyDescriptor(h,"stack"))!=null&&e.writable&&(h.stack=o.data.stack),d.promiseRejecter(h);return}switch(d.type){case"CLOSE_PREPARED":case"COLLECT_FILE_STATISTICS":case"COPY_FILE_TO_PATH":case"DISCONNECT":case"DROP_FILE":case"DROP_FILES":case"FLUSH_FILES":case"INSERT_ARROW_FROM_IPC_STREAM":case"IMPORT_CSV_FROM_PATH":case"IMPORT_JSON_FROM_PATH":case"OPEN":case"PING":case"REGISTER_FILE_BUFFER":case"REGISTER_FILE_HANDLE":case"REGISTER_FILE_URL":case"RESET":if(o.type=="OK"){d.promiseResolver(o.data);return}break;case"INSTANTIATE":if(this._onInstantiationProgress=[],o.type=="OK"){d.promiseResolver(o.data);return}break;case"GLOB_FILE_INFOS":if(o.type=="FILE_INFOS"){d.promiseResolver(o.data);return}break;case"GET_VERSION":if(o.type=="VERSION_STRING"){d.promiseResolver(o.data);return}break;case"GET_FEATURE_FLAGS":if(o.type=="FEATURE_FLAGS"){d.promiseResolver(o.data);return}break;case"GET_TABLE_NAMES":if(o.type=="TABLE_NAMES"){d.promiseResolver(o.data);return}break;case"TOKENIZE":if(o.type=="SCRIPT_TOKENS"){d.promiseResolver(o.data);return}break;case"COPY_FILE_TO_BUFFER":if(o.type=="FILE_BUFFER"){d.promiseResolver(o.data);return}break;case"EXPORT_FILE_STATISTICS":if(o.type=="FILE_STATISTICS"){d.promiseResolver(o.data);return}break;case"CONNECT":if(o.type=="CONNECTION_INFO"){d.promiseResolver(o.data);return}break;case"RUN_PREPARED":case"RUN_QUERY":if(o.type=="QUERY_RESULT"){d.promiseResolver(o.data);return}break;case"SEND_PREPARED":if(o.type=="QUERY_RESULT_HEADER"){d.promiseResolver(o.data);return}break;case"START_PENDING_QUERY":if(o.type=="QUERY_RESULT_HEADER_OR_NULL"){d.promiseResolver(o.data);return}break;case"POLL_PENDING_QUERY":if(o.type=="QUERY_RESULT_HEADER_OR_NULL"){d.promiseResolver(o.data);return}break;case"CANCEL_PENDING_QUERY":if(this._onInstantiationProgress=[],o.type=="SUCCESS"){d.promiseResolver(o.data);return}break;case"FETCH_QUERY_RESULTS":if(o.type=="QUERY_RESULT_CHUNK"){d.promiseResolver(o.data);return}break;case"CREATE_PREPARED":if(o.type=="PREPARED_STATEMENT_ID"){d.promiseResolver(o.data);return}break;case"MOTHERDUCK_NETWORK_CALLBACK":if(o.type=="OK"){d.promiseResolver(o.data);return}break}d.promiseRejecter(new Error("unexpected response type: ".concat(o.type.toString())))}onError(i){console.error(i),console.error("error in duckdb worker: ".concat(i.message)),this._pendingRequests.clear()}onClose(){if(this._workerShutdownResolver(null),this._pendingRequests.size!=0){console.warn("worker terminated with ".concat(this._pendingRequests.size," pending requests"));return}this._pendingRequests.clear()}async reset(){let i=new _("RESET",null);return await this.postTask(i)}async ping(){let i=new _("PING",null);await this.postTask(i)}async dropFile(i){let e=new _("DROP_FILE",i);return await this.postTask(e)}async dropFiles(){let i=new _("DROP_FILES",null);return await this.postTask(i)}async flushFiles(){let i=new _("FLUSH_FILES",null);return await this.postTask(i)}async instantiate(i,e=null,o=d=>{}){this._onInstantiationProgress.push(o);let d=new _("INSTANTIATE",[i,e]);return await this.postTask(d)}async getVersion(){let i=new _("GET_VERSION",null);return await this.postTask(i)}async getFeatureFlags(){let i=new _("GET_FEATURE_FLAGS",null);return await this.postTask(i)}async motherduckNetworkCallback(i,e,o,d){let h=new _("MOTHERDUCK_NETWORK_CALLBACK",[i,e,o,d]);await this.postTask(h,[d.buffer])}async open(i){let e=new _("OPEN",i);await this.postTask(e)}async tokenize(i){let e=new _("TOKENIZE",i);return await this.postTask(e)}async connectInternal(){let i=new _("CONNECT",null);return await this.postTask(i)}async connect(){let i=await this.connectInternal();return new dn(this,i)}async disconnect(i){let e=new _("DISCONNECT",i);await this.postTask(e)}async runQuery(i,e){let o=new _("RUN_QUERY",[i,e]);return await this.postTask(o)}async startPendingQuery(i,e){let o=new _("START_PENDING_QUERY",[i,e]);return await this.postTask(o)}async pollPendingQuery(i){let e=new _("POLL_PENDING_QUERY",i);return await this.postTask(e)}async cancelPendingQuery(i){let e=new _("CANCEL_PENDING_QUERY",i);return await this.postTask(e)}async fetchQueryResults(i){let e=new _("FETCH_QUERY_RESULTS",i);return await this.postTask(e)}async getTableNames(i,e){let o=new _("GET_TABLE_NAMES",[i,e]);return await this.postTask(o)}async createPrepared(i,e){let o=new _("CREATE_PREPARED",[i,e]);return await this.postTask(o)}async closePrepared(i,e){let o=new _("CLOSE_PREPARED",[i,e]);await this.postTask(o)}async runPrepared(i,e,o){let d=new _("RUN_PREPARED",[i,e,o]);return await this.postTask(d)}async sendPrepared(i,e,o){let d=new _("SEND_PREPARED",[i,e,o]);return await this.postTask(d)}async globFiles(i){let e=new _("GLOB_FILE_INFOS",i);return await this.postTask(e)}async registerFileText(i,e){let o=mn.encode(e);await this.registerFileBuffer(i,o)}async registerFileURL(i,e,o,d){e===void 0&&(e=i);let h=new _("REGISTER_FILE_URL",[i,e,o,d]);await this.postTask(h)}async registerEmptyFileBuffer(i){let e=new _("REGISTER_FILE_BUFFER",[i,new Uint8Array]);await this.postTask(e)}async registerFileBuffer(i,e){let o=new _("REGISTER_FILE_BUFFER",[i,e]);await this.postTask(o,[e.buffer])}async registerFileHandle(i,e,o,d){let h=new _("REGISTER_FILE_HANDLE",[i,e,o,d]);await this.postTask(h,[])}async collectFileStatistics(i,e){let o=new _("COLLECT_FILE_STATISTICS",[i,e]);await this.postTask(o,[])}async exportFileStatistics(i){let e=new _("EXPORT_FILE_STATISTICS",i);return await this.postTask(e,[])}async copyFileToBuffer(i){let e=new _("COPY_FILE_TO_BUFFER",i);return await this.postTask(e)}async copyFileToPath(i,e){let o=new _("COPY_FILE_TO_PATH",[i,e]);await this.postTask(o)}async insertArrowFromIPCStream(i,e,o){if(e.length==0)return;let d=new _("INSERT_ARROW_FROM_IPC_STREAM",[i,e,o]);await this.postTask(d,[e.buffer])}async insertCSVFromPath(i,e,o){if(o.columns!==void 0){let h=[];for(let g in o.columns){let b=o.columns[g];h.push(dt(g,b))}o.columnsFlat=h,delete o.columns}let d=new _("IMPORT_CSV_FROM_PATH",[i,e,o]);await this.postTask(d)}async insertJSONFromPath(i,e,o){if(o.columns!==void 0){let h=[];for(let g in o.columns){let b=o.columns[g];h.push(dt(g,b))}o.columnsFlat=h,delete o.columns}let d=new _("IMPORT_JSON_FROM_PATH",[i,e,o]);await this.postTask(d)}},ft={name:"@duckdb/duckdb-wasm",version:"1.11.0",description:"DuckDB powered by WebAssembly",license:"MIT",repository:{type:"git",url:"https://github.com/duckdb/duckdb-wasm.git"},keywords:["sql","duckdb","relational","database","data","query","wasm","analytics","olap","arrow","parquet","json","csv"],dependencies:{"apache-arrow":"^14.0.1"},devDependencies:{"@types/emscripten":"^1.39.8","@types/jasmine":"^5.1.1","@typescript-eslint/eslint-plugin":"^6.9.1","@typescript-eslint/parser":"^6.11.0",esbuild:"^0.19.5",eslint:"^8.50.0","eslint-plugin-jasmine":"^4.1.3","eslint-plugin-react":"^7.33.2","fast-glob":"^3.3.2",jasmine:"^5.1.0","jasmine-core":"^5.1.1","jasmine-spec-reporter":"^7.0.0","js-sha256":"^0.10.1",karma:"^6.4.2","karma-chrome-launcher":"^3.2.0","karma-coverage":"^2.2.1","karma-firefox-launcher":"^2.1.2","karma-jasmine":"^5.1.0","karma-jasmine-html-reporter":"^2.1.0","karma-sourcemap-loader":"^0.4.0","karma-spec-reporter":"^0.0.36","make-dir":"^4.0.0",nyc:"^15.1.0",prettier:"^3.0.2",puppeteer:"^21.1.1",rimraf:"^5.0.5",s3rver:"^3.7.1",typedoc:"^0.25.3",typescript:"^5.2.2","wasm-feature-detect":"^1.6.1","web-worker":"^1.2.0"},scripts:{"build:debug":"node bundle.mjs debug && tsc --emitDeclarationOnly","build:release":"node bundle.mjs release && tsc --emitDeclarationOnly",docs:"typedoc",report:"node ./coverage.mjs","test:node":"node --enable-source-maps ../../node_modules/jasmine/bin/jasmine ./dist/tests-node.cjs","test:node:debug":"node --inspect-brk --enable-source-maps ../../node_modules/jasmine/bin/jasmine ./dist/tests-node.cjs","test:node:coverage":"nyc -r json --report-dir ./coverage/node node ../../node_modules/jasmine/bin/jasmine ./dist/tests-node.cjs","test:firefox":"karma start ./karma/tests-firefox.cjs","test:chrome":"karma start ./karma/tests-chrome.cjs","test:chrome:eh":"karma start ./karma/tests-chrome-eh.cjs","test:chrome:coverage":"karma start ./karma/tests-chrome-coverage.cjs","test:browser":"karma start ./karma/tests-all.cjs","test:browser:debug":"karma start ./karma/tests-debug.cjs",test:"npm run test:chrome && npm run test:node","test:coverage":"npm run test:chrome:coverage && npm run test:node:coverage && npm run report",lint:"eslint src test"},files:["dist","!dist/types/test"],main:"dist/duckdb-browser.cjs",module:"dist/duckdb-browser.mjs",types:"dist/duckdb-browser.d.ts",jsdelivr:"dist/duckdb-browser.cjs",unpkg:"dist/duckdb-browser.mjs",sideEffects:!1,browser:{fs:!1,path:!1,perf_hooks:!1,os:!1,worker_threads:!1},exports:{"./dist/duckdb-mvp.wasm":"./dist/duckdb-mvp.wasm","./dist/duckdb-coi.wasm":"./dist/duckdb-coi.wasm","./dist/duckdb-browser":"./dist/duckdb-browser.mjs","./dist/duckdb-browser.cjs":"./dist/duckdb-browser.cjs","./dist/duckdb-browser.mjs":"./dist/duckdb-browser.mjs","./dist/duckdb-browser-blocking":"./dist/duckdb-browser-blocking.mjs","./dist/duckdb-browser-blocking.mjs":"./dist/duckdb-browser-blocking.mjs","./dist/duckdb-browser-blocking.cjs":"./dist/duckdb-browser-blocking.cjs","./dist/duckdb-browser-mvp.worker.js":"./dist/duckdb-browser-mvp.worker.js","./dist/duckdb-browser-coi.pthread.worker.js":"./dist/duckdb-browser-coi.pthread.worker.js","./dist/duckdb-browser-coi.worker.js":"./dist/duckdb-browser-coi.worker.js","./dist/duckdb-node":"./dist/duckdb-node.cjs","./dist/duckdb-node.cjs":"./dist/duckdb-node.cjs","./dist/duckdb-node-blocking":"./dist/duckdb-node-blocking.cjs","./dist/duckdb-node-blocking.cjs":"./dist/duckdb-node-blocking.cjs","./dist/duckdb-node-mvp.worker.cjs":"./dist/duckdb-node-mvp.worker.cjs","./blocking":{browser:{types:"./dist/duckdb-browser-blocking.d.ts",import:"./dist/duckdb-browser-blocking.mjs",require:"./dist/duckdb-browser-blocking.cjs"},node:{types:"./dist/duckdb-node-blocking.d.ts",require:"./dist/duckdb-node-blocking.cjs",import:"./dist/duckdb-node-blocking.cjs"},types:"./dist/duckdb-browser-blocking.d.ts",import:"./dist/duckdb-browser-blocking.mjs",require:"./dist/duckdb-browser-blocking.cjs"},".":{browser:{types:"./dist/duckdb-browser.d.ts",import:"./dist/duckdb-browser.mjs",require:"./dist/duckdb-browser.cjs"},node:{types:"./dist/duckdb-node.d.ts",import:"./dist/duckdb-node.cjs",require:"./dist/duckdb-node.cjs"},types:"./dist/duckdb-browser.d.ts",import:"./dist/duckdb-browser.mjs",require:"./dist/duckdb-browser.cjs"}}},ht=ft.version.split(".");ht[0];ht[1];ht[2];nn(sn());function _n(){let i=new TextDecoder;return e=>(typeof SharedArrayBuffer<"u"&&e.buffer instanceof SharedArrayBuffer&&(e=new Uint8Array(e)),i.decode(e))}_n();var yt=(i=>(i[i.BUFFER=0]="BUFFER",i[i.NODE_FS=1]="NODE_FS",i[i.BROWSER_FILEREADER=2]="BROWSER_FILEREADER",i[i.BROWSER_FSACCESS=3]="BROWSER_FSACCESS",i[i.HTTP=4]="HTTP",i[i.S3=5]="S3",i))(yt||{});function Er(i){let e="";for(let o of i)o<=31||o===34||o===39||o>=127?e+=`\\x${o.toString(16).toUpperCase().padStart(2,"0")}`:e+=String.fromCharCode(o);return e}var R=class{toString(){return this.toDuckDBString()}},Se=class extends R{constructor(i){super(),this.bytes=i}toDuckDBString(){return Er(this.bytes)}},_t=BigInt(1e6),Sn=BigInt(1e3),Tn=BigInt(1e3),br=BigInt(60),Ar=BigInt(60),Ge=BigInt(864e8),En=BigInt("-9223372036854775807"),bn=BigInt("9223372036854775807");function An(i,e,o){let d=String(Math.abs(i)).padStart(4,"0"),h=String(e).padStart(2,"0"),g=String(o).padStart(2,"0");return`${d}-${h}-${g}${i<0?" (BC)":""}`}function St(i){let e=Math.abs(i),o=i<0?-1:1,d=Math.floor(e/146097),h=o*d*400,g=e%146097,b=o*g*864e5,$=new Date(b),j=h+$.getUTCFullYear();j<0&&j--;let et=$.getUTCMonth()+1,tt=$.getUTCDate();return An(j,et,tt)}function Rn(i,e,o,d){let h=String(i).padStart(2,"0"),g=String(e).padStart(2,"0"),b=String(o).padStart(2,"0"),$=String(d).padStart(6,"0").replace(/0+$/,"");return`${h}:${g}:${b}${$.length>0?`.${$}`:""}`}function Rr(i){let e=i%_t,o=i/_t,d=o%br,h=o/br,g=h%Ar,b=h/Ar;return Rn(b,g,d,e)}function Tt(i){let e=i<0?i+Ge:i;return Rr(e)}function Dn(i){let e=i<0,o=e?-i:i,d=Rr(o);return e?`-${d}`:d}function In(i,e,o){let d=St(Number(i)),h=Tt(e),g=o?` ${o}`:"";return`${d} ${h}${g}`}function Te(i,e){if(i===En)return"-infinity";if(i===bn)return"infinity";let o=i/Ge,d=i%Ge;return d<0&&(o--,d+=Ge),In(o,d,e)}function Dr(i,e){return Te(i*_t,e)}function Ir(i,e){return Te(i*Sn,e)}function jr(i,e){return Te(i/Tn,e)}function mt(i,e){return`${i} ${e}${i!==1?"s":""}`}function wr(i,e,o){let d=[];if(i!==0){let h=i<0?-1:1,g=Math.abs(i),b=Math.floor(g/12),$=h*b,j=h*(g-b*12);$!==0&&d.push(mt($,"year")),j!==0&&d.push(mt(j,"month"))}return e!==0&&d.push(mt(e,"day")),o!==BigInt(0)&&d.push(Dn(o)),d.length>0?d.join(" "):"00:00:00"}var X=class extends R{constructor(i){super(),this.days=i}toDuckDBString(){return St(this.days)}};function Or(i,e){if(e>0){let o=BigInt(10)**BigInt(e),d=i<0?-i:i,h=i<0?"-":"",g=String(d/o),b=String(d%o).padStart(e,"0");return`${h}${g}.${b}`}return String(i)}var Z=class extends R{constructor(i,e){super(),this.scaledValue=i,this.scale=e}toDuckDBString(){return Or(this.scaledValue,this.scale)}},Ee=class extends R{constructor(i,e,o){super(),this.months=i,this.days=e,this.microseconds=o}toDuckDBString(){return wr(this.months,this.days,this.microseconds)}},J=class extends R{constructor(i){super(),this.microseconds=i}toDuckDBString(){return Tt(this.microseconds)}},ee=class extends R{constructor(i,e){super(),this.microseconds=i,this.timezone=e}toDuckDBString(){return Te(this.microseconds,this.timezone)}},te=class extends R{constructor(i){super(),this.milliseconds=i}toDuckDBString(){return Ir(this.milliseconds)}},re=class extends R{constructor(i){super(),this.nanoseconds=i}toDuckDBString(){return jr(this.nanoseconds)}},oe=class extends R{constructor(i){super(),this.seconds=i}toDuckDBString(){return Dr(this.seconds)}};function Nr(i){let{schema:e,numRows:o}=i;if(o===0)return[];let d=[];for(let h=0;h<o;h++){let g=i.get(h);d.push(Un(g,e))}return d}function Un(i,e){let o={};if(i)for(let{name:d,type:h}of e.fields)o[d]=Pn(i,d,h);return o}function Pn(i,e,o){let d=i[e];if(d==null||Null$1.isNull(o))return null;if(Bool$1.isBool(o))return!!d;if(Int_.isInt(o))return o.bitWidth===64?BigInt(d):Number(d);if(Float.isFloat(o))return Number(d);if(Decimal$1.isDecimal(o)){let{scale:h}=o,{values:g,rowIndex:b}=Ke(i,e),$=new BigInt64Array(g.buffer,g.byteOffset,g.length/2),j=$[b*2],et=($[b*2+1]<<BigInt(64))+(j&BigInt.asUintN(64,BigInt(-1)));return new Z(et,h)}if(Date_.isDate(o)){let{values:h,rowIndex:g}=Ke(i,e),b=h[g];return new X(b)}if(Time_.isTime(o)){let{values:h,rowIndex:g}=Ke(i,e),b=h[g];return new J(b)}if(Timestamp_.isTimestamp(o)){let{unit:h,timezone:g}=o,{values:b,rowIndex:$}=Ke(i,e),j=new BigInt64Array(b.buffer,b.byteOffset,b.length/2)[$];switch(h){case TimeUnit$1.SECOND:return new oe(j);case TimeUnit$1.MILLISECOND:return new te(j);case TimeUnit$1.MICROSECOND:return new ee(j,g);case TimeUnit$1.NANOSECOND:return new re(j);default:return null}}return String(d)}function Ke(i,e){let o=i[Symbol.for("parent")],d=i[Symbol.for("rowIndex")],h=o.type.children.findIndex($=>$.name===e),g=o.children[h],{values:b}=g;return{values:b,rowIndex:d}}function Et(i,e){return[0,(e-i)*1e6]}var Js,Cu,ze=((Cu=(Js=performance==null?void 0:performance.now)==null?void 0:Js.bind)==null?void 0:Cu.call(Js,performance))??(()=>Date.now()/1e3),pe=class{constructor(i,e,o){this.connection=null,this.deferredConnection=i,this.query=e,this.args=o,this.creationTime=ze()}async run(i){let e=ze(),o=await this.sendQuery(),d=ze();return{type:"materialized",initialQueuePosition:i,queueTime:Et(this.creationTime,e),executionTime:Et(e,d),rows:Nr(o)}}async cancel(){return(this.connection||await this.getConnection()).cancelSent()}async getConnection(){return this.connection=await this.deferredConnection,this.connection}async sendQuery(){var o;let i=this.connection||await this.getConnection();if(this.args&&((o=this.args)==null?void 0:o.length)>0)return(await i.prepare(this.query)).query(...this.args);let e=await(await i.send(this.query)).readAll();return new Table(e)}},gr,T=(gr=class{constructor(){}static DECIMAL(e,o){return e===void 0&&o===void 0?gr.default_DECIMAL:{name:"DECIMAL",width:e,scale:o}}static LIST(e){return{name:"LIST",valueType:e}}static MAP(e,o){return{name:"MAP",keyType:e,valueType:o}}static STRUCT(e){return{name:"STRUCT",entries:e}}static STRUCT_entry(e,o){return{key:e,valueType:o}}static UNION(e){return{name:"UNION",alternatives:e}}static UNION_alternative(e,o){return{tag:e,valueType:o}}static VARCHAR_withLength(e){return{name:"VARCHAR",length:e}}},gr.BIGINT={name:"BIGINT"},gr.BIT={name:"BIT"},gr.BOOLEAN={name:"BOOLEAN"},gr.BLOB={name:"BLOB"},gr.DATE={name:"DATE"},gr.DOUBLE={name:"DOUBLE"},gr.default_DECIMAL={name:"DECIMAL"},gr.ENUM={name:"ENUM"},gr.HUGEINT={name:"HUGEINT"},gr.INTEGER={name:"INTEGER"},gr.INTERVAL={name:"INTERVAL"},gr.REAL={name:"REAL"},gr.SMALLINT={name:"SMALLINT"},gr.SQLNULL={name:"SQLNULL"},gr.TIME={name:"TIME"},gr.TIMESTAMP={name:"TIMESTAMP"},gr.TIMESTAMP_S={name:"TIMESTAMP_S"},gr.TIMESTAMP_MS={name:"TIMESTAMP_MS"},gr.TIMESTAMP_NS={name:"TIMESTAMP_NS"},gr.TIMESTAMP_TZ={name:"TIMESTAMP_TZ"},gr.TINYINT={name:"TINYINT"},gr.UBIGINT={name:"UBIGINT"},gr.UINTEGER={name:"UINTEGER"},gr.USMALLINT={name:"USMALLINT"},gr.UTINYINT={name:"UTINYINT"},gr.UUID={name:"UUID"},gr.VARCHAR={name:"VARCHAR"},gr);function ne(i){switch(i.typeId){case Type$1.Null:return T.SQLNULL;case Type$1.Int:{let{isSigned:e,bitWidth:o}=i;if(e)switch(o){case 8:return T.TINYINT;case 16:return T.SMALLINT;case 32:return T.INTEGER;case 64:return T.BIGINT;default:throw Error(`unexpected integer bit width: ${o}`)}else switch(o){case 8:return T.UTINYINT;case 16:return T.USMALLINT;case 32:return T.UINTEGER;case 64:return T.UBIGINT;default:throw Error(`unexpected integer bit width: ${o}`)}}case Type$1.Float:{let{precision:e}=i;switch(e){case Precision$1.HALF:throw Error("DuckDB does not support half-precision floats");case Precision$1.SINGLE:return T.REAL;case Precision$1.DOUBLE:return T.DOUBLE;default:throw Error(`unexpected precision: ${e}`)}}case Type$1.Binary:return T.BLOB;case Type$1.Utf8:return T.VARCHAR;case Type$1.Bool:return T.BOOLEAN;case Type$1.Decimal:{let{precision:e,scale:o}=i;return(e==null||e===18)&&(o==null||o===3)?T.DECIMAL():T.DECIMAL(e,o)}case Type$1.Date:{let{unit:e}=i;switch(e){case DateUnit$1.DAY:return T.DATE;case DateUnit$1.MILLISECOND:throw Error("DuckDB does not support millisecond-unit dates");default:throw Error(`unexpected date unit: ${e}`)}}case Type$1.Time:{let{unit:e}=i;switch(e){case TimeUnit$1.SECOND:throw Error("DuckDB does not support second-unit times");case TimeUnit$1.MILLISECOND:throw Error("DuckDB does not support millisecond-unit times");case TimeUnit$1.MICROSECOND:return T.TIME;case TimeUnit$1.NANOSECOND:throw Error("DuckDB does not support nanosecond-unit times");default:throw Error(`unexpected time unit: ${e}`)}}case Type$1.Timestamp:{let{unit:e,timezone:o}=i;switch(e){case TimeUnit$1.SECOND:if(o)throw Error("DuckDB does not support second-unit timestamps with timezone");return T.TIMESTAMP_S;case TimeUnit$1.MILLISECOND:if(o)throw Error("DuckDB does not support millisecond-unit timestamps with timezone");return T.TIMESTAMP_MS;case TimeUnit$1.MICROSECOND:return o?T.TIMESTAMP_TZ:T.TIMESTAMP;case TimeUnit$1.NANOSECOND:if(o)throw Error("DuckDB does not support nanosecond-unit timestamps with timezone");return T.TIMESTAMP_NS;default:throw Error(`unexpected time unit: ${e}`)}}case Type$1.Interval:{let{unit:e}=i;switch(e){case IntervalUnit$1.YEAR_MONTH:throw Error("DuckDB does not support year-month intervals");case IntervalUnit$1.DAY_TIME:throw Error("DuckDB does not support day-time intervals");case IntervalUnit$1.MONTH_DAY_NANO:return T.INTERVAL;default:throw Error(`unexpected interval unit: ${e}`)}}case Type$1.List:{let{valueType:e}=i;return T.LIST(ne(e))}case Type$1.Struct:{let{children:e}=i,o=e.map(d=>({key:d.name,valueType:ne(d.type)}));return T.STRUCT(o)}case Type$1.Union:{let{mode:e}=i;switch(e){case UnionMode$1.Dense:throw Error("DuckDB does not support dense unions");case UnionMode$1.Sparse:{let o=i.children.map(d=>({tag:d.name,valueType:ne(d.type)}));return T.UNION(o)}default:throw Error(`unexpected union mode: ${e}`)}}case Type$1.FixedSizeBinary:throw Error("DuckDB does not support fixed-size binary");case Type$1.FixedSizeList:throw Error("DuckDB does not support fixed-size lists");case Type$1.Map:{let{keyType:e,valueType:o}=i;return T.MAP(ne(e),ne(o))}default:throw Error(`unexpected type id: ${i.typeId}`)}}var kn=new TextDecoder;function Fn(i,e,o){return i.getValid(e)?o(i,e):null}function O(i){return(e,o)=>Fn(e,o,i)}function xn(i,e,o,d){return Array.from({length:o-e}).map((h,g)=>d(i,e+g))}function Ur(i){return new BigInt64Array(i.values.buffer,i.values.byteOffset,i.values.length/2)}function be(i,e){return Ur(i)[e]}function Wn(i,e){let o=Ur(i),d=o[e*2];return(o[e*2+1]<<BigInt(64))+(d&BigInt.asUintN(64,BigInt(-1)))}function Pr(i,e){let{values:o,valueOffsets:d}=i,h=d[e],g=d[e+1];return o.subarray(h,g)}function Hn(i,e){return null}function Vn(i,e){return i.values[e]}var P=O(Vn);function Gn(i,e){return new Se(Pr(i,e))}var Yn=O(Gn);function Kn(i,e){return kn.decode(Pr(i,e))}var zn=O(Kn);function qn(i,e){let o=i.offset+e;return(i.values[o>>3]&1<<o%8)!==0}var Qn=O(qn);function $n(i,e){return new Z(Wn(i,e),i.type.scale)}var Xn=O($n);function Zn(i,e){return new X(i.values[e])}var Jn=O(Zn);function es(i,e){return new J(i.values[e])}var ts=O(es);function rs(i,e){return new oe(be(i,e))}var os=O(rs);function ns(i,e){return new te(be(i,e))}var ss=O(ns);function is(i,e){return new ee(be(i,e),i.type.timezone)}var as=O(is);function gs(i,e){return new re(be(i,e))}var us=O(gs);function ls(i,e){return new Ee(i.values[e*4],i.values[e*4+1],be(i,e*2+1))}var ps=O(ls);function cs(i,e){let{children:o,valueOffsets:d}=i,h=d[e],g=d[e+1];return Ss(o[0],h,g)}var ds=O(cs);function fs(i,e){let o={},{children:d,type:h}=i,g=h.children;for(let b=0;b<d.length;b++){let $=d[b],j=g[b].name,et=ce($,e);o[j]=et}return o}var hs=O(fs);function ys(i,e){let{children:o,typeIds:d}=i,h=d[e],g=i.type.typeIdToChildIndex[h],b=o[g];return ce(b,e)}function ms(i,e){let o=[],{children:d,valueOffsets:h}=i,g=h[e],b=h[e+1],[$,j]=d[0].children;for(let et=g;et<b;et++)o.push({key:ce($,et),value:ce(j,et)});return o}var _s=O(ms);function Lr(i){switch(i.typeId){case Type$1.Null:return Hn;case Type$1.Int:{let{isSigned:e,bitWidth:o}=i;if(e)switch(o){case 8:return P;case 16:return P;case 32:return P;case 64:return P;default:throw Error(`unexpected integer bit width: ${o}`)}else switch(o){case 8:return P;case 16:return P;case 32:return P;case 64:return P;default:throw Error(`unexpected integer bit width: ${o}`)}}case Type$1.Float:{let{precision:e}=i;switch(e){case Precision$1.HALF:throw Error("DuckDB does not support half-precision floats");case Precision$1.SINGLE:return P;case Precision$1.DOUBLE:return P;default:throw Error(`unexpected precision: ${e}`)}}case Type$1.Binary:return Yn;case Type$1.Utf8:return zn;case Type$1.Bool:return Qn;case Type$1.Decimal:return Xn;case Type$1.Date:{let{unit:e}=i;switch(e){case DateUnit$1.DAY:return Jn;case DateUnit$1.MILLISECOND:throw Error("DuckDB does not support millisecond-unit dates");default:throw Error(`unexpected date unit: ${e}`)}}case Type$1.Time:{let{unit:e}=i;switch(e){case TimeUnit$1.SECOND:throw Error("DuckDB does not support second-unit times");case TimeUnit$1.MILLISECOND:throw Error("DuckDB does not support millisecond-unit times");case TimeUnit$1.MICROSECOND:return ts;case TimeUnit$1.NANOSECOND:throw Error("DuckDB does not support nanosecond-unit times");default:throw Error(`unexpected time unit: ${e}`)}}case Type$1.Timestamp:{let{unit:e,timezone:o}=i;switch(e){case TimeUnit$1.SECOND:if(o)throw Error("DuckDB does not support second-unit timestamps with time zone");return os;case TimeUnit$1.MILLISECOND:if(o)throw Error("DuckDB does not support millisecond-unit timestamps with time zone");return ss;case TimeUnit$1.MICROSECOND:return as;case TimeUnit$1.NANOSECOND:if(o)throw Error("DuckDB does not support nanosecond-unit timestamps with time zone");return us;default:throw Error(`unexpected time unit: ${e}`)}}case Type$1.Interval:{let{unit:e}=i;switch(e){case IntervalUnit$1.YEAR_MONTH:throw Error("DuckDB does not support year-month intervals");case IntervalUnit$1.DAY_TIME:throw Error("DuckDB does not support day-time intervals");case IntervalUnit$1.MONTH_DAY_NANO:return ps;default:throw Error(`unexpected interval unit: ${e}`)}}case Type$1.List:return ds;case Type$1.Struct:return hs;case Type$1.Union:{let{mode:e}=i;switch(e){case UnionMode$1.Dense:throw Error("DuckDB does not support dense unions");case UnionMode$1.Sparse:return ys;default:throw Error(`unexpected union mode: ${e}`)}}case Type$1.FixedSizeBinary:throw Error("DuckDB does not support fixed-size binary");case Type$1.FixedSizeList:throw Error("DuckDB does not support fixed-size lists");case Type$1.Map:return _s;default:throw Error(`unexpected type id: ${i.typeId}`)}}function ce(i,e){return Lr(i.type)(i,e)}function Ss(i,e,o){let d=Lr(i.type);return xn(i,e,o,d)}var qe=class{constructor(i){this.recordBatch=i}get columnCount(){return this.recordBatch.schema.fields.length}get rowCount(){return this.recordBatch.data.length}columnName(i){return this.recordBatch.schema.fields[i].name}columnType(i){let e=this.recordBatch.schema.fields[i];return ne(e.type)}value(i,e){let o=this.recordBatch.data.children[i];return ce(o,e)}},Qe=class{constructor(i){this.recordBatchIterator=i}async next(){let{done:i,value:e}=await this.recordBatchIterator.next();return i?{done:!0,value:void 0}:{done:!1,value:new qe(e)}}async return(){return this.recordBatchIterator.return&&await this.recordBatchIterator.return(),{done:!0,value:void 0}}async throw(i){return this.recordBatchIterator.throw&&await this.recordBatchIterator.throw(i),{done:!0,value:void 0}}[Symbol.asyncIterator](){return this}},Ae=class{constructor(i,e,o){this.connection=null,this.deferredConnection=i,this.query=e,this.args=o}async run(){let i=await this.sendQuery();return{type:"streaming",streamReader:i,rowBatchIterator:new Qe(i)}}async cancel(){return(this.connection||await this.getConnection()).cancelSent()}async getConnection(){return this.connection=await this.deferredConnection,this.connection}async sendQuery(){var e;let i=this.connection||await this.getConnection();return this.args&&((e=this.args)==null?void 0:e.length)>0?(await i.prepare(this.query)).send(this.args):i.send(this.query)}};function kr(){throw new Error("should never be called")}function Fr(){let i=kr,e=kr;return{promise:new Promise((o,d)=>{i=o,e=d}),resolve:i,reject:e}}var $e=class{constructor(i){this.nextTaskId=1,this.queuedTaskIds=[],this.queuedTasksById={},this.processingQueue=!1,this.logSink=i}enqueueTask(i){let e=this.createTaskId();return this.logDebug(`enqueueTask: creating task id = ${e}`),this.addQueuedTask({id:e,task:i,state:0,deferred:Fr(),cancelled:!1,initialQueuePosition:this.queuedTaskIds.length}),this.scheduleProcessQueueIfNeeded(),e}async cancelTask(i,e){this.logDebug(`cancelTask(${i}): called`);let o=this.queuedTasksById[i];if(!o)throw new Error(`Task with id ${i} not found`);switch(o.state){case 0:return o.cancelled?this.logDebug(`cancelTask(${i}): cancelling pending task (already cancelled)`):(this.logDebug(`cancelTask(${i}): cancelling pending task`),o.cancelled=!0,o.deferred.reject(new Error(e??"pending task cancelled")),this.scheduleProcessQueueIfNeeded()),!0;case 1:return this.logDebug(`cancelTask(${i}): cancelling running task`),o.cancelled=!0,o.task.cancel();case 2:return this.logDebug(`cancelTask(${i}): can't cancel resolved task`),!1;case 3:return this.logDebug(`cancelTask(${i}): can't cancel rejected task`),!1;default:throw o.state,new Error("unreachable")}}taskResult(i){this.logDebug(`taskResults(${i}): called`);let e=this.queuedTasksById[i];if(!e)throw new Error(`Task with id ${i} not found`);return e.deferred.promise}logDebug(i){this.logSink&&this.logSink.debug(i)}logWarn(i){this.logSink&&this.logSink.warn(i)}createTaskId(){return`t${this.nextTaskId++}`}addQueuedTask(i){this.queuedTaskIds.push(i.id),this.queuedTasksById[i.id]=i}scheduleProcessQueueIfNeeded(){this.processingQueue?this.logDebug("scheduleProcessQueueIfNeeded: processQueue already scheduled"):(this.logDebug("scheduleProcessQueueIfNeeded: scheduling processQueue"),this.processingQueue=!0,setTimeout(()=>{this.processQueue(),this.processingQueue=!1},0))}processQueue(){this.logDebug("processQueue: processing started");let i;do i=this.processFirstQueuedTask();while(i);this.logDebug("processQueue: processing completed")}processFirstQueuedTask(){if(this.queuedTaskIds.length===0)return this.logDebug("processFirstQueuedTask: queue empty"),!1;let i=this.queuedTaskIds[0];this.logDebug(`processFirstQueuedTask: processing task ${i}`);let e=this.queuedTasksById[i];if(!e)return this.logWarn(`processFirstQueuedTask: task ${i} not found in map`),this.queuedTaskIds.shift(),!0;switch(e.state){case 0:return e.cancelled?(this.logDebug(`processFirstQueuedTask: removing cancelled pending task ${i} from queue`),this.queuedTaskIds.shift(),delete this.queuedTasksById[e.id],!0):(this.logDebug(`processFirstQueuedTask: running pending task ${i}`),e.state=1,e.task.run(e.initialQueuePosition).then(o=>{this.logDebug(`processFirstQueuedTask: task ${i} resolved`),e.state=2,e.deferred.resolve(o)}).catch(o=>{this.logDebug(`processFirstQueuedTask: task ${i} rejected`),e.state=3,e.deferred.reject(o)}).finally(()=>{this.scheduleProcessQueueIfNeeded()}),!1);case 1:return this.logDebug(`processFirstQueuedTask: task ${i} at front of queue is already running`),!1;case 2:case 3:return this.logDebug(`processFirstQueuedTask: task ${i} at front of queue is completed, removing from queue`),this.queuedTaskIds.shift(),delete this.queuedTasksById[e.id],!0;default:throw e.state,new Error("unreachable")}}},Uo=ct(lr()),Po=ct(Mo()),dr=ct(pr()),Q=null;async function Lo(i){let e=await(await xe(i)).connect();return i.skipWelcomePack||await e.query("PRAGMA MD_USE_DEFAULT"),e}async function xe(i){if(Q)return Q;let e=ko();Q=e.promise;try{await _i(i)}catch(o){throw e.reject(o),o}return e.resolve(Q),Q}var hi=new Set(["QUERY_RESULT_HEADER_OR_NULL","POLL_PENDING_QUERY","QUERY_RESULT_CHUNK","QUERY_RESULT","ERROR","SUCCESS","CONNECTION_INFO","PREPARED_STATEMENT_ID","SCRIPT_TOKENS","FILE_BUFFER"]);function yi(i){return i?`${i}${i.endsWith("/")?"":"/"}`:"https://app.motherduck.com/"}async function mi(i){let e=`${i}duckdb-assets.json`,o=await(await fetch(e)).json();return o.coi&&(o.coi.mainModule=i+o.coi.mainModule,o.coi.mainWorker=i+o.coi.mainWorker,o.coi.pthreadWorker=i+o.coi.pthreadWorker),o.mvp&&(o.mvp.mainModule=i+o.mvp.mainModule,o.mvp.mainWorker=i+o.mvp.mainWorker),o}function Co(i,e){return URL.createObjectURL(new Blob([`self.DUCKDB_ASSETS_URL_PREFIX="${i}";importScripts("${e}");`],{type:"text/javascript"}))}async function _i(i){let e=yi(i.duckDBAssetsURLPrefix),o=await mi(e),d=i.useDuckDBWasmCOI?o.coi:o.mvp;if(!d)throw new Error("Could not find DuckDB WASM asset URLs in duckdb-assets.json");let h=/^https?:\/\//.test(e),g=h?Co(e,d.mainWorker):d.mainWorker,b=h&&d.pthreadWorker?Co(e,d.pthreadWorker):d.pthreadWorker,$=new Worker(g),j=i.mdServerURL||"https://api.motherduck.com",et=i.mdToken,tt=new fr(j,et),nt=ko();$.addEventListener("message",st=>{if(st.data.grpcClientReady)nt.resolve();else if(st.data.type==="INSTANTIATE_PROGRESS"||st.data.type==="OK")console.debug("Worker instantiation in progress.");else if(st.data.type==="MotherDuck_DoAction")tt.doAction(st.data);else if(st.data.type==="MotherDuck_DoAction_Async")tt.doActionAsync(st.data);else if(st.data.type==="MotherDuck_ResolveFuture")tt.resolveFuture(st.data);else if(hi.has(st.data.type))console.debug("Main thread --> ",st.data);else throw new Error(`Unexpected event: ${JSON.stringify(st.data)}`)});let rt=new _r,ot=new Tr(rt,$);await ot.instantiate(d.mainModule,b),h&&(URL.revokeObjectURL(g),b&&URL.revokeObjectURL(b)),await nt.promise,Q=ot}var Si=2**32-1;function ke(i,e){Atomics.store(e,0,i),Atomics.notify(e,0)}function Fe(i,e,o){let d=i.length;Ti(d,"buffer length"),e[1]=d,o.set(i)}function Ti(i,e){if(i<0||i>Si)throw new Error(`Invalid ${e}: '${i}' (not an uint32)`)}function cr(i,e,o,d){if(i instanceof Uo.RpcError&&"grpc-status-details-bin"in i.metadata){let h=atob(i.metadata["grpc-status-details-bin"]),g=new Uint8Array(new ArrayBuffer(h.length));for(let b=0;b<h.length;b++)g[b]=h.charCodeAt(b);Fe(g,e,d),ke(98,o)}else{let h=JSON.stringify({message:i.message,stack:i.stack,...i}),g=new TextEncoder().encode(h);Fe(g,e,d),ke(99,o)}}var fr=class{constructor(i,e){this.ducklingEndpointClient=new Po.DucklingEndpointPromiseClient(i,null,null),this.mdToken=e,this.inflightAsyncRequests=new Map}createRequestMetadata(i){if(!i)throw new Error("No MD version supplied.");let e=new Date;return e.setSeconds(e.getSeconds()+30),{deadline:e.getTime().toString(),"x-md-token":this.mdToken,"x-md-extension-version":i}}async doAction({controlArrayBuffer:i,dataArrayBuffer:e,action:o,buffer:d,mdVersion:h}){console.debug("Before sync call",{action:o});let g=new Uint8Array(e),b=new Uint32Array(i),$=new Int32Array(i);try{let j=new dr.DucklingRequest;j.setAction(o),j.setBytes(d);let et=await this.ducklingEndpointClient.doAction(j,this.createRequestMetadata(h));console.debug("After sync call",{action:o}),Fe(et.getBytes_asU8(),b,g),ke(1,$)}catch(j){cr(j,b,$,g),console.debug("Exception on sync call",j)}}async doActionAsync({controlArrayBuffer:i,dataArrayBuffer:e,action:o,networkPtr:d,uuid:h,buffer:g,mdVersion:b}){console.debug("Before async call",{uuid:h,action:o});let $=new Uint8Array(e),j=new Uint32Array(i),et=new Int32Array(i),tt;try{let ot=new dr.DucklingRequest;ot.setAction(o),ot.setBytes(g),tt=this.ducklingEndpointClient.doAction(ot,this.createRequestMetadata(b)),this.inflightAsyncRequests.set(h,tt),Fe(new Uint8Array(0),j,$),ke(1,et)}catch(ot){cr(ot,j,et,$),console.debug("Exception on sending async call",ot);return}try{await tt,console.debug("After async call",{uuid:h,action:o})}catch(ot){console.debug("After err async call",{uuid:h,action:o,err:ot});let st=new TextEncoder().encode("");await Q.motherduckNetworkCallback(d,h,!0,st),console.debug("After invoking callback on error",{uuid:h,action:o}),this.inflightAsyncRequests.delete(h);return}let nt=new ArrayBuffer(0),rt=new Uint8Array(nt);await Q.motherduckNetworkCallback(d,h,!1,rt),console.debug("After invoking callback",{uuid:h,action:o}),this.inflightAsyncRequests.delete(h)}async resolveFuture({controlArrayBuffer:i,dataArrayBuffer:e,uuid:o}){console.debug("Before resolving future",{uuid:o});let d=new Uint8Array(e),h=new Uint32Array(i),g=new Int32Array(i);try{let b=this.inflightAsyncRequests.get(o);if(b===void 0)throw new Error("future no longer available");let $=await b;Fe($.getBytes_asU8(),h,d),ke(1,g),console.debug("After resolving future",{uuid:o})}catch(b){cr(b,h,g,d),console.debug("After resolving future with exception",{uuid:o,err:b})}this.inflightAsyncRequests.delete(o)}};function ko(){let i=o=>o,e=o=>o;return{promise:new Promise((o,d)=>{i=o,e=d}),resolve:i,reject:e}}function Fo(i){let e=/^[^{]*({.*})/.exec(i);if(e){let o=e[1];try{let d=JSON.parse(o);if(d.message)return d.message}catch{return i}}return i}function Ei(i){return typeof i=="object"&&i!==null&&"message"in i&&typeof i.message=="string"}function xo(i){if(Ei(i))return i.message;try{return JSON.stringify(i)}catch{return String(i)}}var bi=new Map([[/CREATE SECRET/i,"CREATE SECRET [REDACTED]"],[/s3_secret_access_key/i,"S3_SECRET_ACCESS_KEY [REDACTED]"]]);function _e(i){for(let[e,o]of bi)if(e.test(i))return o;return i}var Ai=0;function Ri(){return`MDConnection_${Ai++}`}var Es,Ho=(Es=class{constructor(e,o,d){this.params=e,this.deferredDdbConnection=o,this.id=d,this.sequencer=new $e(e.logSink)}static create(e){let o=Ri(),d=Lo(e),h=new Es(e,d,o);return this.idMap[o]=h,h}async isInitialized(){return await this.deferredDdbConnection,!0}static getById(e){return this.idMap[e]}async tokenize(e){return(await this.deferredDdbConnection).bindings.tokenize(e)}enqueueQuery(e,o){var h;let d=this.sequencer.enqueueTask(new pe(this.deferredDdbConnection,e,o));return(h=this.params.logSink)==null||h.debug("enqueueQuery called",{id:d,query:_e(e)}),d}async safeEvaluateQuery(e){try{return{status:"success",result:await this.evaluateQuery(e)}}catch(o){return{status:"error",err:o}}}async safeEvaluatePreparedStatement(e,...o){try{return{status:"success",result:await this.evaluatePreparedStatement(e,o)}}catch(d){return{status:"error",err:d}}}async safeEvaluateStreamingQuery(e){try{return{status:"success",result:await this.evaluateStreamingQuery(e)}}catch(o){return{status:"error",err:o}}}async safeEvaluateStreamingPreparedStatement(e,o){try{return{status:"success",result:await this.evaluateStreamingPreparedStatement(e,o)}}catch(d){return{status:"error",err:d}}}async safeEvaluateQueuedQuery(e){try{return{status:"success",result:await this.evaluateQueuedQuery(e)}}catch(o){return{status:"error",err:o}}}async evaluateQuery(e){var o;return(o=this.params.logSink)==null||o.debug("evaluateQuery called",{query:_e(e)}),this.evaluateExclusive(new pe(this.deferredDdbConnection,e))}async evaluatePreparedStatement(e,o){var d;return(d=this.params.logSink)==null||d.debug("evaluatePreparedStatement called",{query:_e(e)}),this.evaluateExclusive(new pe(this.deferredDdbConnection,e,o))}async evaluateStreamingQuery(e){var o;return(o=this.params.logSink)==null||o.debug("evaluateStreamingQuery called",{query:_e(e)}),this.evaluateExclusive(new Ae(this.deferredDdbConnection,e,void 0))}async evaluateStreamingPreparedStatement(e,o){var d;return(d=this.params.logSink)==null||d.debug("evaluateStreamingPreparedStatement called",{query:_e(e)}),this.evaluateExclusive(new Ae(this.deferredDdbConnection,e,o))}async evaluateExclusive(e){let o=this.sequencer.enqueueTask(e);return this.sequencer.taskResult(o).catch(Vo)}async evaluateQueuedQuery(e){var o;return(o=this.params.logSink)==null||o.debug("evaluateQueuedQuery called",{queryId:e}),this.sequencer.taskResult(e).catch(Vo)}async cancelQuery(e,o){var d;return(d=this.params.logSink)==null||d.debug("cancelQuery called",{queryId:e}),this.sequencer.cancelTask(e,o)}async close(){return(await this.deferredDdbConnection).close()}},Es.idMap={},Es);function Vo(i){throw new Error(Fo(xo(i)))}async function arrowTableFromResult(i){if(i.type==="streaming"){const e=await i.streamReader.readAll();return new Table(e)}else throw Error("expected streaming result")}function mdConnector(i){const e=Ho.create({mdToken:i});return{query:async o=>{const{sql:d,type:h}=o,g=await e.evaluateStreamingQuery(d);switch(h){case"arrow":return arrowTableFromResult(g);case"json":return Array.from(await arrowTableFromResult(g));default:case"exec":return}}}}function App(){const[i,e]=reactExports.useState(!1),o=reactExports.useCallback(async d=>{coordinator().databaseConnector(mdConnector(d)),e(!0)},[]);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Header,{}),jsxRuntimeExports.jsx("div",{id:"content-pane",children:i?jsxRuntimeExports.jsx(VizzesPane,{}):jsxRuntimeExports.jsx(ConnectPane,{connect:o})})]})}client.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(React.StrictMode,{children:jsxRuntimeExports.jsx(App,{})}));
