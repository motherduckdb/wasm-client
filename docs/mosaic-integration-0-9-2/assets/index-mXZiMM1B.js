var yz=Object.defineProperty;var mz=(e,t,n)=>t in e?yz(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Zt=(e,t,n)=>(mz(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function f4(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var d4={exports:{}},bb={},h4={exports:{}},zt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pp=Symbol.for("react.element"),gz=Symbol.for("react.portal"),bz=Symbol.for("react.fragment"),vz=Symbol.for("react.strict_mode"),wz=Symbol.for("react.profiler"),_z=Symbol.for("react.provider"),Sz=Symbol.for("react.context"),xz=Symbol.for("react.forward_ref"),Iz=Symbol.for("react.suspense"),Tz=Symbol.for("react.memo"),Ez=Symbol.for("react.lazy"),YE=Symbol.iterator;function Az(e){return e===null||typeof e!="object"?null:(e=YE&&e[YE]||e["@@iterator"],typeof e=="function"?e:null)}var p4={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y4=Object.assign,m4={};function Qf(e,t,n){this.props=e,this.context=t,this.refs=m4,this.updater=n||p4}Qf.prototype.isReactComponent={};Qf.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Qf.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function g4(){}g4.prototype=Qf.prototype;function Lx(e,t,n){this.props=e,this.context=t,this.refs=m4,this.updater=n||p4}var Cx=Lx.prototype=new g4;Cx.constructor=Lx;y4(Cx,Qf.prototype);Cx.isPureReactComponent=!0;var qE=Array.isArray,b4=Object.prototype.hasOwnProperty,Ux={current:null},v4={key:!0,ref:!0,__self:!0,__source:!0};function w4(e,t,n){var r,i={},s=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)b4.call(t,r)&&!v4.hasOwnProperty(r)&&(i[r]=t[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Pp,type:e,key:s,ref:o,props:i,_owner:Ux.current}}function Mz(e,t){return{$$typeof:Pp,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Px(e){return typeof e=="object"&&e!==null&&e.$$typeof===Pp}function $z(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var WE=/\/+/g;function Kv(e,t){return typeof e=="object"&&e!==null&&e.key!=null?$z(""+e.key):t.toString(36)}function z0(e,t,n,r,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Pp:case gz:o=!0}}if(o)return o=e,i=i(o),e=r===""?"."+Kv(o,0):r,qE(i)?(n="",e!=null&&(n=e.replace(WE,"$&/")+"/"),z0(i,t,n,"",function(c){return c})):i!=null&&(Px(i)&&(i=Mz(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(WE,"$&/")+"/")+e)),t.push(i)),1;if(o=0,r=r===""?".":r+":",qE(e))for(var a=0;a<e.length;a++){s=e[a];var l=r+Kv(s,a);o+=z0(s,t,n,l,i)}else if(l=Az(e),typeof l=="function")for(e=l.call(e),a=0;!(s=e.next()).done;)s=s.value,l=r+Kv(s,a++),o+=z0(s,t,n,l,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function zy(e,t,n){if(e==null)return e;var r=[],i=0;return z0(e,r,"","",function(s){return t.call(n,s,i++)}),r}function Nz(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Jn={current:null},j0={transition:null},kz={ReactCurrentDispatcher:Jn,ReactCurrentBatchConfig:j0,ReactCurrentOwner:Ux};zt.Children={map:zy,forEach:function(e,t,n){zy(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return zy(e,function(){t++}),t},toArray:function(e){return zy(e,function(t){return t})||[]},only:function(e){if(!Px(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};zt.Component=Qf;zt.Fragment=bz;zt.Profiler=wz;zt.PureComponent=Lx;zt.StrictMode=vz;zt.Suspense=Iz;zt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=kz;zt.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=y4({},e.props),i=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=Ux.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(l in t)b4.call(t,l)&&!v4.hasOwnProperty(l)&&(r[l]=t[l]===void 0&&a!==void 0?a[l]:t[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Pp,type:e.type,key:i,ref:s,props:r,_owner:o}};zt.createContext=function(e){return e={$$typeof:Sz,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:_z,_context:e},e.Consumer=e};zt.createElement=w4;zt.createFactory=function(e){var t=w4.bind(null,e);return t.type=e,t};zt.createRef=function(){return{current:null}};zt.forwardRef=function(e){return{$$typeof:xz,render:e}};zt.isValidElement=Px;zt.lazy=function(e){return{$$typeof:Ez,_payload:{_status:-1,_result:e},_init:Nz}};zt.memo=function(e,t){return{$$typeof:Tz,type:e,compare:t===void 0?null:t}};zt.startTransition=function(e){var t=j0.transition;j0.transition={};try{e()}finally{j0.transition=t}};zt.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};zt.useCallback=function(e,t){return Jn.current.useCallback(e,t)};zt.useContext=function(e){return Jn.current.useContext(e)};zt.useDebugValue=function(){};zt.useDeferredValue=function(e){return Jn.current.useDeferredValue(e)};zt.useEffect=function(e,t){return Jn.current.useEffect(e,t)};zt.useId=function(){return Jn.current.useId()};zt.useImperativeHandle=function(e,t,n){return Jn.current.useImperativeHandle(e,t,n)};zt.useInsertionEffect=function(e,t){return Jn.current.useInsertionEffect(e,t)};zt.useLayoutEffect=function(e,t){return Jn.current.useLayoutEffect(e,t)};zt.useMemo=function(e,t){return Jn.current.useMemo(e,t)};zt.useReducer=function(e,t,n){return Jn.current.useReducer(e,t,n)};zt.useRef=function(e){return Jn.current.useRef(e)};zt.useState=function(e){return Jn.current.useState(e)};zt.useSyncExternalStore=function(e,t,n){return Jn.current.useSyncExternalStore(e,t,n)};zt.useTransition=function(){return Jn.current.useTransition()};zt.version="18.2.0";h4.exports=zt;var xn=h4.exports;const Dz=f4(xn);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Oz=xn,Fz=Symbol.for("react.element"),Bz=Symbol.for("react.fragment"),Rz=Object.prototype.hasOwnProperty,Lz=Oz.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Cz={key:!0,ref:!0,__self:!0,__source:!0};function _4(e,t,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)Rz.call(t,r)&&!Cz.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:Fz,type:e,key:s,ref:o,props:i,_owner:Lz.current}}bb.Fragment=Bz;bb.jsx=_4;bb.jsxs=_4;d4.exports=bb;var Ut=d4.exports,U_={},S4={exports:{}},Vr={},x4={exports:{}},I4={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(O,C){var F=O.length;O.push(C);t:for(;0<F;){var P=F-1>>>1,z=O[P];if(0<i(z,C))O[P]=C,O[F]=z,F=P;else break t}}function n(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var C=O[0],F=O.pop();if(F!==C){O[0]=F;t:for(var P=0,z=O.length,H=z>>>1;P<H;){var X=2*(P+1)-1,tt=O[X],Z=X+1,Y=O[Z];if(0>i(tt,F))Z<z&&0>i(Y,tt)?(O[P]=Y,O[Z]=F,P=Z):(O[P]=tt,O[X]=F,P=X);else if(Z<z&&0>i(Y,F))O[P]=Y,O[Z]=F,P=Z;else break t}}return C}function i(O,C){var F=O.sortIndex-C.sortIndex;return F!==0?F:O.id-C.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,f=null,d=3,h=!1,p=!1,g=!1,v=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(O){for(var C=n(c);C!==null;){if(C.callback===null)r(c);else if(C.startTime<=O)r(c),C.sortIndex=C.expirationTime,t(l,C);else break;C=n(c)}}function w(O){if(g=!1,b(O),!p)if(n(l)!==null)p=!0,$(S);else{var C=n(c);C!==null&&B(w,C.startTime-O)}}function S(O,C){p=!1,g&&(g=!1,y(E),E=-1),h=!0;var F=d;try{for(b(C),f=n(l);f!==null&&(!(f.expirationTime>C)||O&&!A());){var P=f.callback;if(typeof P=="function"){f.callback=null,d=f.priorityLevel;var z=P(f.expirationTime<=C);C=e.unstable_now(),typeof z=="function"?f.callback=z:f===n(l)&&r(l),b(C)}else r(l);f=n(l)}if(f!==null)var H=!0;else{var X=n(c);X!==null&&B(w,X.startTime-C),H=!1}return H}finally{f=null,d=F,h=!1}}var _=!1,x=null,E=-1,N=5,I=-1;function A(){return!(e.unstable_now()-I<N)}function D(){if(x!==null){var O=e.unstable_now();I=O;var C=!0;try{C=x(!0,O)}finally{C?R():(_=!1,x=null)}}else _=!1}var R;if(typeof m=="function")R=function(){m(D)};else if(typeof MessageChannel<"u"){var T=new MessageChannel,M=T.port2;T.port1.onmessage=D,R=function(){M.postMessage(null)}}else R=function(){v(D,0)};function $(O){x=O,_||(_=!0,R())}function B(O,C){E=v(function(){O(e.unstable_now())},C)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(O){O.callback=null},e.unstable_continueExecution=function(){p||h||(p=!0,$(S))},e.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<O?Math.floor(1e3/O):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(O){switch(d){case 1:case 2:case 3:var C=3;break;default:C=d}var F=d;d=C;try{return O()}finally{d=F}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(O,C){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var F=d;d=O;try{return C()}finally{d=F}},e.unstable_scheduleCallback=function(O,C,F){var P=e.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?P+F:P):F=P,O){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=F+z,O={id:u++,callback:C,priorityLevel:O,startTime:F,expirationTime:z,sortIndex:-1},F>P?(O.sortIndex=F,t(c,O),n(l)===null&&O===n(c)&&(g?(y(E),E=-1):g=!0,B(w,F-P))):(O.sortIndex=z,t(l,O),p||h||(p=!0,$(S))),O},e.unstable_shouldYield=A,e.unstable_wrapCallback=function(O){var C=d;return function(){var F=d;d=C;try{return O.apply(this,arguments)}finally{d=F}}}})(I4);x4.exports=I4;var Uz=x4.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T4=xn,Rr=Uz;function q(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var E4=new Set,Rh={};function Nc(e,t){uf(e,t),uf(e+"Capture",t)}function uf(e,t){for(Rh[e]=t,e=0;e<t.length;e++)E4.add(t[e])}var ko=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),P_=Object.prototype.hasOwnProperty,Pz=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,HE={},GE={};function zz(e){return P_.call(GE,e)?!0:P_.call(HE,e)?!1:Pz.test(e)?GE[e]=!0:(HE[e]=!0,!1)}function jz(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Vz(e,t,n,r){if(t===null||typeof t>"u"||jz(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function tr(e,t,n,r,i,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var An={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){An[e]=new tr(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];An[t]=new tr(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){An[e]=new tr(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){An[e]=new tr(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){An[e]=new tr(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){An[e]=new tr(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){An[e]=new tr(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){An[e]=new tr(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){An[e]=new tr(e,5,!1,e.toLowerCase(),null,!1,!1)});var zx=/[\-:]([a-z])/g;function jx(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(zx,jx);An[t]=new tr(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(zx,jx);An[t]=new tr(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(zx,jx);An[t]=new tr(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){An[e]=new tr(e,1,!1,e.toLowerCase(),null,!1,!1)});An.xlinkHref=new tr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){An[e]=new tr(e,1,!1,e.toLowerCase(),null,!0,!0)});function Vx(e,t,n,r){var i=An.hasOwnProperty(t)?An[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Vz(t,n,i,r)&&(n=null),r||i===null?zz(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var zo=T4.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,jy=Symbol.for("react.element"),yu=Symbol.for("react.portal"),mu=Symbol.for("react.fragment"),Yx=Symbol.for("react.strict_mode"),z_=Symbol.for("react.profiler"),A4=Symbol.for("react.provider"),M4=Symbol.for("react.context"),qx=Symbol.for("react.forward_ref"),j_=Symbol.for("react.suspense"),V_=Symbol.for("react.suspense_list"),Wx=Symbol.for("react.memo"),ia=Symbol.for("react.lazy"),$4=Symbol.for("react.offscreen"),XE=Symbol.iterator;function Sd(e){return e===null||typeof e!="object"?null:(e=XE&&e[XE]||e["@@iterator"],typeof e=="function"?e:null)}var je=Object.assign,Zv;function qd(e){if(Zv===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Zv=t&&t[1]||""}return`
`+Zv+e}var Jv=!1;function tw(e,t){if(!e||Jv)return"";Jv=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=o&&0<=a);break}}}finally{Jv=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?qd(e):""}function Yz(e){switch(e.tag){case 5:return qd(e.type);case 16:return qd("Lazy");case 13:return qd("Suspense");case 19:return qd("SuspenseList");case 0:case 2:case 15:return e=tw(e.type,!1),e;case 11:return e=tw(e.type.render,!1),e;case 1:return e=tw(e.type,!0),e;default:return""}}function Y_(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case mu:return"Fragment";case yu:return"Portal";case z_:return"Profiler";case Yx:return"StrictMode";case j_:return"Suspense";case V_:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case M4:return(e.displayName||"Context")+".Consumer";case A4:return(e._context.displayName||"Context")+".Provider";case qx:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Wx:return t=e.displayName||null,t!==null?t:Y_(e.type)||"Memo";case ia:t=e._payload,e=e._init;try{return Y_(e(t))}catch{}}return null}function qz(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Y_(t);case 8:return t===Yx?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ka(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function N4(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Wz(e){var t=N4(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Vy(e){e._valueTracker||(e._valueTracker=Wz(e))}function k4(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=N4(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Mm(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function q_(e,t){var n=t.checked;return je({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function QE(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=ka(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function D4(e,t){t=t.checked,t!=null&&Vx(e,"checked",t,!1)}function W_(e,t){D4(e,t);var n=ka(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?H_(e,t.type,n):t.hasOwnProperty("defaultValue")&&H_(e,t.type,ka(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function KE(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function H_(e,t,n){(t!=="number"||Mm(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Wd=Array.isArray;function Lu(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ka(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function G_(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(q(91));return je({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ZE(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(q(92));if(Wd(n)){if(1<n.length)throw Error(q(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:ka(n)}}function O4(e,t){var n=ka(t.value),r=ka(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function JE(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function F4(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function X_(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?F4(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Yy,B4=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Yy=Yy||document.createElement("div"),Yy.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Yy.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Lh(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var ph={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Hz=["Webkit","ms","Moz","O"];Object.keys(ph).forEach(function(e){Hz.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ph[t]=ph[e]})});function R4(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||ph.hasOwnProperty(e)&&ph[e]?(""+t).trim():t+"px"}function L4(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=R4(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var Gz=je({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Q_(e,t){if(t){if(Gz[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(q(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(q(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(q(61))}if(t.style!=null&&typeof t.style!="object")throw Error(q(62))}}function K_(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Z_=null;function Hx(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var J_=null,Cu=null,Uu=null;function tA(e){if(e=Vp(e)){if(typeof J_!="function")throw Error(q(280));var t=e.stateNode;t&&(t=xb(t),J_(e.stateNode,e.type,t))}}function C4(e){Cu?Uu?Uu.push(e):Uu=[e]:Cu=e}function U4(){if(Cu){var e=Cu,t=Uu;if(Uu=Cu=null,tA(e),t)for(e=0;e<t.length;e++)tA(t[e])}}function P4(e,t){return e(t)}function z4(){}var ew=!1;function j4(e,t,n){if(ew)return e(t,n);ew=!0;try{return P4(e,t,n)}finally{ew=!1,(Cu!==null||Uu!==null)&&(z4(),U4())}}function Ch(e,t){var n=e.stateNode;if(n===null)return null;var r=xb(n);if(r===null)return null;n=r[t];t:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break t;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(q(231,t,typeof n));return n}var t2=!1;if(ko)try{var xd={};Object.defineProperty(xd,"passive",{get:function(){t2=!0}}),window.addEventListener("test",xd,xd),window.removeEventListener("test",xd,xd)}catch{t2=!1}function Xz(e,t,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var yh=!1,$m=null,Nm=!1,e2=null,Qz={onError:function(e){yh=!0,$m=e}};function Kz(e,t,n,r,i,s,o,a,l){yh=!1,$m=null,Xz.apply(Qz,arguments)}function Zz(e,t,n,r,i,s,o,a,l){if(Kz.apply(this,arguments),yh){if(yh){var c=$m;yh=!1,$m=null}else throw Error(q(198));Nm||(Nm=!0,e2=c)}}function kc(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function V4(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function eA(e){if(kc(e)!==e)throw Error(q(188))}function Jz(e){var t=e.alternate;if(!t){if(t=kc(e),t===null)throw Error(q(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return eA(i),e;if(s===r)return eA(i),t;s=s.sibling}throw Error(q(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(q(189))}}if(n.alternate!==r)throw Error(q(190))}if(n.tag!==3)throw Error(q(188));return n.stateNode.current===n?e:t}function Y4(e){return e=Jz(e),e!==null?q4(e):null}function q4(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=q4(e);if(t!==null)return t;e=e.sibling}return null}var W4=Rr.unstable_scheduleCallback,nA=Rr.unstable_cancelCallback,tj=Rr.unstable_shouldYield,ej=Rr.unstable_requestPaint,Qe=Rr.unstable_now,nj=Rr.unstable_getCurrentPriorityLevel,Gx=Rr.unstable_ImmediatePriority,H4=Rr.unstable_UserBlockingPriority,km=Rr.unstable_NormalPriority,rj=Rr.unstable_LowPriority,G4=Rr.unstable_IdlePriority,vb=null,ks=null;function ij(e){if(ks&&typeof ks.onCommitFiberRoot=="function")try{ks.onCommitFiberRoot(vb,e,void 0,(e.current.flags&128)===128)}catch{}}var Li=Math.clz32?Math.clz32:aj,sj=Math.log,oj=Math.LN2;function aj(e){return e>>>=0,e===0?32:31-(sj(e)/oj|0)|0}var qy=64,Wy=4194304;function Hd(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Dm(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Hd(a):(s&=o,s!==0&&(r=Hd(s)))}else o=n&~i,o!==0?r=Hd(o):s!==0&&(r=Hd(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Li(t),i=1<<n,r|=e[n],t&=~i;return r}function lj(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function cj(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-Li(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=lj(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}function n2(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function X4(){var e=qy;return qy<<=1,!(qy&4194240)&&(qy=64),e}function nw(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function zp(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Li(t),e[t]=n}function uj(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-Li(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}function Xx(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Li(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var ce=0;function Q4(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var K4,Qx,Z4,J4,tk,r2=!1,Hy=[],_a=null,Sa=null,xa=null,Uh=new Map,Ph=new Map,fa=[],fj="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function rA(e,t){switch(e){case"focusin":case"focusout":_a=null;break;case"dragenter":case"dragleave":Sa=null;break;case"mouseover":case"mouseout":xa=null;break;case"pointerover":case"pointerout":Uh.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ph.delete(t.pointerId)}}function Id(e,t,n,r,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},t!==null&&(t=Vp(t),t!==null&&Qx(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function dj(e,t,n,r,i){switch(t){case"focusin":return _a=Id(_a,e,t,n,r,i),!0;case"dragenter":return Sa=Id(Sa,e,t,n,r,i),!0;case"mouseover":return xa=Id(xa,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Uh.set(s,Id(Uh.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Ph.set(s,Id(Ph.get(s)||null,e,t,n,r,i)),!0}return!1}function ek(e){var t=Rl(e.target);if(t!==null){var n=kc(t);if(n!==null){if(t=n.tag,t===13){if(t=V4(n),t!==null){e.blockedOn=t,tk(e.priority,function(){Z4(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function V0(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=i2(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Z_=r,n.target.dispatchEvent(r),Z_=null}else return t=Vp(n),t!==null&&Qx(t),e.blockedOn=n,!1;t.shift()}return!0}function iA(e,t,n){V0(e)&&n.delete(t)}function hj(){r2=!1,_a!==null&&V0(_a)&&(_a=null),Sa!==null&&V0(Sa)&&(Sa=null),xa!==null&&V0(xa)&&(xa=null),Uh.forEach(iA),Ph.forEach(iA)}function Td(e,t){e.blockedOn===t&&(e.blockedOn=null,r2||(r2=!0,Rr.unstable_scheduleCallback(Rr.unstable_NormalPriority,hj)))}function zh(e){function t(i){return Td(i,e)}if(0<Hy.length){Td(Hy[0],e);for(var n=1;n<Hy.length;n++){var r=Hy[n];r.blockedOn===e&&(r.blockedOn=null)}}for(_a!==null&&Td(_a,e),Sa!==null&&Td(Sa,e),xa!==null&&Td(xa,e),Uh.forEach(t),Ph.forEach(t),n=0;n<fa.length;n++)r=fa[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<fa.length&&(n=fa[0],n.blockedOn===null);)ek(n),n.blockedOn===null&&fa.shift()}var Pu=zo.ReactCurrentBatchConfig,Om=!0;function pj(e,t,n,r){var i=ce,s=Pu.transition;Pu.transition=null;try{ce=1,Kx(e,t,n,r)}finally{ce=i,Pu.transition=s}}function yj(e,t,n,r){var i=ce,s=Pu.transition;Pu.transition=null;try{ce=4,Kx(e,t,n,r)}finally{ce=i,Pu.transition=s}}function Kx(e,t,n,r){if(Om){var i=i2(e,t,n,r);if(i===null)dw(e,t,r,Fm,n),rA(e,r);else if(dj(i,e,t,n,r))r.stopPropagation();else if(rA(e,r),t&4&&-1<fj.indexOf(e)){for(;i!==null;){var s=Vp(i);if(s!==null&&K4(s),s=i2(e,t,n,r),s===null&&dw(e,t,r,Fm,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else dw(e,t,r,null,n)}}var Fm=null;function i2(e,t,n,r){if(Fm=null,e=Hx(r),e=Rl(e),e!==null)if(t=kc(e),t===null)e=null;else if(n=t.tag,n===13){if(e=V4(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Fm=e,null}function nk(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(nj()){case Gx:return 1;case H4:return 4;case km:case rj:return 16;case G4:return 536870912;default:return 16}default:return 16}}var ga=null,Zx=null,Y0=null;function rk(){if(Y0)return Y0;var e,t=Zx,n=t.length,r,i="value"in ga?ga.value:ga.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[s-r];r++);return Y0=i.slice(e,1<r?1-r:void 0)}function q0(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Gy(){return!0}function sA(){return!1}function Yr(e){function t(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Gy:sA,this.isPropagationStopped=sA,this}return je(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Gy)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Gy)},persist:function(){},isPersistent:Gy}),t}var Kf={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Jx=Yr(Kf),jp=je({},Kf,{view:0,detail:0}),mj=Yr(jp),rw,iw,Ed,wb=je({},jp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:tI,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ed&&(Ed&&e.type==="mousemove"?(rw=e.screenX-Ed.screenX,iw=e.screenY-Ed.screenY):iw=rw=0,Ed=e),rw)},movementY:function(e){return"movementY"in e?e.movementY:iw}}),oA=Yr(wb),gj=je({},wb,{dataTransfer:0}),bj=Yr(gj),vj=je({},jp,{relatedTarget:0}),sw=Yr(vj),wj=je({},Kf,{animationName:0,elapsedTime:0,pseudoElement:0}),_j=Yr(wj),Sj=je({},Kf,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),xj=Yr(Sj),Ij=je({},Kf,{data:0}),aA=Yr(Ij),Tj={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ej={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Aj={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Mj(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Aj[e])?!!t[e]:!1}function tI(){return Mj}var $j=je({},jp,{key:function(e){if(e.key){var t=Tj[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=q0(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Ej[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:tI,charCode:function(e){return e.type==="keypress"?q0(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?q0(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Nj=Yr($j),kj=je({},wb,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),lA=Yr(kj),Dj=je({},jp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:tI}),Oj=Yr(Dj),Fj=je({},Kf,{propertyName:0,elapsedTime:0,pseudoElement:0}),Bj=Yr(Fj),Rj=je({},wb,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Lj=Yr(Rj),Cj=[9,13,27,32],eI=ko&&"CompositionEvent"in window,mh=null;ko&&"documentMode"in document&&(mh=document.documentMode);var Uj=ko&&"TextEvent"in window&&!mh,ik=ko&&(!eI||mh&&8<mh&&11>=mh),cA=" ",uA=!1;function sk(e,t){switch(e){case"keyup":return Cj.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ok(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var gu=!1;function Pj(e,t){switch(e){case"compositionend":return ok(t);case"keypress":return t.which!==32?null:(uA=!0,cA);case"textInput":return e=t.data,e===cA&&uA?null:e;default:return null}}function zj(e,t){if(gu)return e==="compositionend"||!eI&&sk(e,t)?(e=rk(),Y0=Zx=ga=null,gu=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return ik&&t.locale!=="ko"?null:t.data;default:return null}}var jj={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fA(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!jj[e.type]:t==="textarea"}function ak(e,t,n,r){C4(r),t=Bm(t,"onChange"),0<t.length&&(n=new Jx("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var gh=null,jh=null;function Vj(e){bk(e,0)}function _b(e){var t=wu(e);if(k4(t))return e}function Yj(e,t){if(e==="change")return t}var lk=!1;if(ko){var ow;if(ko){var aw="oninput"in document;if(!aw){var dA=document.createElement("div");dA.setAttribute("oninput","return;"),aw=typeof dA.oninput=="function"}ow=aw}else ow=!1;lk=ow&&(!document.documentMode||9<document.documentMode)}function hA(){gh&&(gh.detachEvent("onpropertychange",ck),jh=gh=null)}function ck(e){if(e.propertyName==="value"&&_b(jh)){var t=[];ak(t,jh,e,Hx(e)),j4(Vj,t)}}function qj(e,t,n){e==="focusin"?(hA(),gh=t,jh=n,gh.attachEvent("onpropertychange",ck)):e==="focusout"&&hA()}function Wj(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return _b(jh)}function Hj(e,t){if(e==="click")return _b(t)}function Gj(e,t){if(e==="input"||e==="change")return _b(t)}function Xj(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Pi=typeof Object.is=="function"?Object.is:Xj;function Vh(e,t){if(Pi(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!P_.call(t,i)||!Pi(e[i],t[i]))return!1}return!0}function pA(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function yA(e,t){var n=pA(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}t:{for(;n;){if(n.nextSibling){n=n.nextSibling;break t}n=n.parentNode}n=void 0}n=pA(n)}}function uk(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?uk(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function fk(){for(var e=window,t=Mm();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Mm(e.document)}return t}function nI(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Qj(e){var t=fk(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&uk(n.ownerDocument.documentElement,n)){if(r!==null&&nI(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=yA(n,s);var o=yA(n,r);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Kj=ko&&"documentMode"in document&&11>=document.documentMode,bu=null,s2=null,bh=null,o2=!1;function mA(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;o2||bu==null||bu!==Mm(r)||(r=bu,"selectionStart"in r&&nI(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),bh&&Vh(bh,r)||(bh=r,r=Bm(s2,"onSelect"),0<r.length&&(t=new Jx("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=bu)))}function Xy(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var vu={animationend:Xy("Animation","AnimationEnd"),animationiteration:Xy("Animation","AnimationIteration"),animationstart:Xy("Animation","AnimationStart"),transitionend:Xy("Transition","TransitionEnd")},lw={},dk={};ko&&(dk=document.createElement("div").style,"AnimationEvent"in window||(delete vu.animationend.animation,delete vu.animationiteration.animation,delete vu.animationstart.animation),"TransitionEvent"in window||delete vu.transitionend.transition);function Sb(e){if(lw[e])return lw[e];if(!vu[e])return e;var t=vu[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in dk)return lw[e]=t[n];return e}var hk=Sb("animationend"),pk=Sb("animationiteration"),yk=Sb("animationstart"),mk=Sb("transitionend"),gk=new Map,gA="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function tl(e,t){gk.set(e,t),Nc(t,[e])}for(var cw=0;cw<gA.length;cw++){var uw=gA[cw],Zj=uw.toLowerCase(),Jj=uw[0].toUpperCase()+uw.slice(1);tl(Zj,"on"+Jj)}tl(hk,"onAnimationEnd");tl(pk,"onAnimationIteration");tl(yk,"onAnimationStart");tl("dblclick","onDoubleClick");tl("focusin","onFocus");tl("focusout","onBlur");tl(mk,"onTransitionEnd");uf("onMouseEnter",["mouseout","mouseover"]);uf("onMouseLeave",["mouseout","mouseover"]);uf("onPointerEnter",["pointerout","pointerover"]);uf("onPointerLeave",["pointerout","pointerover"]);Nc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Nc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Nc("onBeforeInput",["compositionend","keypress","textInput","paste"]);Nc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Nc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Nc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Gd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),tV=new Set("cancel close invalid load scroll toggle".split(" ").concat(Gd));function bA(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Zz(r,t,void 0,e),e.currentTarget=null}function bk(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;t:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break t;bA(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break t;bA(i,a,c),s=l}}}if(Nm)throw e=e2,Nm=!1,e2=null,e}function xe(e,t){var n=t[f2];n===void 0&&(n=t[f2]=new Set);var r=e+"__bubble";n.has(r)||(vk(t,e,2,!1),n.add(r))}function fw(e,t,n){var r=0;t&&(r|=4),vk(n,e,r,t)}var Qy="_reactListening"+Math.random().toString(36).slice(2);function Yh(e){if(!e[Qy]){e[Qy]=!0,E4.forEach(function(n){n!=="selectionchange"&&(tV.has(n)||fw(n,!1,e),fw(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Qy]||(t[Qy]=!0,fw("selectionchange",!1,t))}}function vk(e,t,n,r){switch(nk(t)){case 1:var i=pj;break;case 4:i=yj;break;default:i=Kx}n=i.bind(null,t,n,e),i=void 0,!t2||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function dw(e,t,n,r,i){var s=r;if(!(t&1)&&!(t&2)&&r!==null)t:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Rl(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue t}a=a.parentNode}}r=r.return}j4(function(){var c=s,u=Hx(n),f=[];t:{var d=gk.get(e);if(d!==void 0){var h=Jx,p=e;switch(e){case"keypress":if(q0(n)===0)break t;case"keydown":case"keyup":h=Nj;break;case"focusin":p="focus",h=sw;break;case"focusout":p="blur",h=sw;break;case"beforeblur":case"afterblur":h=sw;break;case"click":if(n.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=oA;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=bj;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=Oj;break;case hk:case pk:case yk:h=_j;break;case mk:h=Bj;break;case"scroll":h=mj;break;case"wheel":h=Lj;break;case"copy":case"cut":case"paste":h=xj;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=lA}var g=(t&4)!==0,v=!g&&e==="scroll",y=g?d!==null?d+"Capture":null:d;g=[];for(var m=c,b;m!==null;){b=m;var w=b.stateNode;if(b.tag===5&&w!==null&&(b=w,y!==null&&(w=Ch(m,y),w!=null&&g.push(qh(m,w,b)))),v)break;m=m.return}0<g.length&&(d=new h(d,p,null,n,u),f.push({event:d,listeners:g}))}}if(!(t&7)){t:{if(d=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",d&&n!==Z_&&(p=n.relatedTarget||n.fromElement)&&(Rl(p)||p[Do]))break t;if((h||d)&&(d=u.window===u?u:(d=u.ownerDocument)?d.defaultView||d.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=c,p=p?Rl(p):null,p!==null&&(v=kc(p),p!==v||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=c),h!==p)){if(g=oA,w="onMouseLeave",y="onMouseEnter",m="mouse",(e==="pointerout"||e==="pointerover")&&(g=lA,w="onPointerLeave",y="onPointerEnter",m="pointer"),v=h==null?d:wu(h),b=p==null?d:wu(p),d=new g(w,m+"leave",h,n,u),d.target=v,d.relatedTarget=b,w=null,Rl(u)===c&&(g=new g(y,m+"enter",p,n,u),g.target=b,g.relatedTarget=v,w=g),v=w,h&&p)e:{for(g=h,y=p,m=0,b=g;b;b=Cc(b))m++;for(b=0,w=y;w;w=Cc(w))b++;for(;0<m-b;)g=Cc(g),m--;for(;0<b-m;)y=Cc(y),b--;for(;m--;){if(g===y||y!==null&&g===y.alternate)break e;g=Cc(g),y=Cc(y)}g=null}else g=null;h!==null&&vA(f,d,h,g,!1),p!==null&&v!==null&&vA(f,v,p,g,!0)}}t:{if(d=c?wu(c):window,h=d.nodeName&&d.nodeName.toLowerCase(),h==="select"||h==="input"&&d.type==="file")var S=Yj;else if(fA(d))if(lk)S=Gj;else{S=Wj;var _=qj}else(h=d.nodeName)&&h.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(S=Hj);if(S&&(S=S(e,c))){ak(f,S,n,u);break t}_&&_(e,d,c),e==="focusout"&&(_=d._wrapperState)&&_.controlled&&d.type==="number"&&H_(d,"number",d.value)}switch(_=c?wu(c):window,e){case"focusin":(fA(_)||_.contentEditable==="true")&&(bu=_,s2=c,bh=null);break;case"focusout":bh=s2=bu=null;break;case"mousedown":o2=!0;break;case"contextmenu":case"mouseup":case"dragend":o2=!1,mA(f,n,u);break;case"selectionchange":if(Kj)break;case"keydown":case"keyup":mA(f,n,u)}var x;if(eI)t:{switch(e){case"compositionstart":var E="onCompositionStart";break t;case"compositionend":E="onCompositionEnd";break t;case"compositionupdate":E="onCompositionUpdate";break t}E=void 0}else gu?sk(e,n)&&(E="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(ik&&n.locale!=="ko"&&(gu||E!=="onCompositionStart"?E==="onCompositionEnd"&&gu&&(x=rk()):(ga=u,Zx="value"in ga?ga.value:ga.textContent,gu=!0)),_=Bm(c,E),0<_.length&&(E=new aA(E,e,null,n,u),f.push({event:E,listeners:_}),x?E.data=x:(x=ok(n),x!==null&&(E.data=x)))),(x=Uj?Pj(e,n):zj(e,n))&&(c=Bm(c,"onBeforeInput"),0<c.length&&(u=new aA("onBeforeInput","beforeinput",null,n,u),f.push({event:u,listeners:c}),u.data=x))}bk(f,t)})}function qh(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Bm(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Ch(e,n),s!=null&&r.unshift(qh(e,s,i)),s=Ch(e,t),s!=null&&r.push(qh(e,s,i))),e=e.return}return r}function Cc(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function vA(e,t,n,r,i){for(var s=t._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=Ch(n,s),l!=null&&o.unshift(qh(n,l,a))):i||(l=Ch(n,s),l!=null&&o.push(qh(n,l,a)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var eV=/\r\n?/g,nV=/\u0000|\uFFFD/g;function wA(e){return(typeof e=="string"?e:""+e).replace(eV,`
`).replace(nV,"")}function Ky(e,t,n){if(t=wA(t),wA(e)!==t&&n)throw Error(q(425))}function Rm(){}var a2=null,l2=null;function c2(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var u2=typeof setTimeout=="function"?setTimeout:void 0,rV=typeof clearTimeout=="function"?clearTimeout:void 0,_A=typeof Promise=="function"?Promise:void 0,iV=typeof queueMicrotask=="function"?queueMicrotask:typeof _A<"u"?function(e){return _A.resolve(null).then(e).catch(sV)}:u2;function sV(e){setTimeout(function(){throw e})}function hw(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),zh(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);zh(t)}function Ia(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function SA(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Zf=Math.random().toString(36).slice(2),ps="__reactFiber$"+Zf,Wh="__reactProps$"+Zf,Do="__reactContainer$"+Zf,f2="__reactEvents$"+Zf,oV="__reactListeners$"+Zf,aV="__reactHandles$"+Zf;function Rl(e){var t=e[ps];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Do]||n[ps]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=SA(e);e!==null;){if(n=e[ps])return n;e=SA(e)}return t}e=n,n=e.parentNode}return null}function Vp(e){return e=e[ps]||e[Do],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function wu(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(q(33))}function xb(e){return e[Wh]||null}var d2=[],_u=-1;function el(e){return{current:e}}function Ie(e){0>_u||(e.current=d2[_u],d2[_u]=null,_u--)}function _e(e,t){_u++,d2[_u]=e.current,e.current=t}var Da={},Cn=el(Da),ur=el(!1),cc=Da;function ff(e,t){var n=e.type.contextTypes;if(!n)return Da;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function fr(e){return e=e.childContextTypes,e!=null}function Lm(){Ie(ur),Ie(Cn)}function xA(e,t,n){if(Cn.current!==Da)throw Error(q(168));_e(Cn,t),_e(ur,n)}function wk(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(q(108,qz(e)||"Unknown",i));return je({},n,r)}function Cm(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Da,cc=Cn.current,_e(Cn,e),_e(ur,ur.current),!0}function IA(e,t,n){var r=e.stateNode;if(!r)throw Error(q(169));n?(e=wk(e,t,cc),r.__reactInternalMemoizedMergedChildContext=e,Ie(ur),Ie(Cn),_e(Cn,e)):Ie(ur),_e(ur,n)}var ho=null,Ib=!1,pw=!1;function _k(e){ho===null?ho=[e]:ho.push(e)}function lV(e){Ib=!0,_k(e)}function nl(){if(!pw&&ho!==null){pw=!0;var e=0,t=ce;try{var n=ho;for(ce=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}ho=null,Ib=!1}catch(i){throw ho!==null&&(ho=ho.slice(e+1)),W4(Gx,nl),i}finally{ce=t,pw=!1}}return null}var Su=[],xu=0,Um=null,Pm=0,Jr=[],ti=0,uc=null,bo=1,vo="";function wl(e,t){Su[xu++]=Pm,Su[xu++]=Um,Um=e,Pm=t}function Sk(e,t,n){Jr[ti++]=bo,Jr[ti++]=vo,Jr[ti++]=uc,uc=e;var r=bo;e=vo;var i=32-Li(r)-1;r&=~(1<<i),n+=1;var s=32-Li(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,bo=1<<32-Li(t)+i|n<<i|r,vo=s+e}else bo=1<<s|n<<i|r,vo=e}function rI(e){e.return!==null&&(wl(e,1),Sk(e,1,0))}function iI(e){for(;e===Um;)Um=Su[--xu],Su[xu]=null,Pm=Su[--xu],Su[xu]=null;for(;e===uc;)uc=Jr[--ti],Jr[ti]=null,vo=Jr[--ti],Jr[ti]=null,bo=Jr[--ti],Jr[ti]=null}var Fr=null,Nr=null,Me=!1,ki=null;function xk(e,t){var n=si(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function TA(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Fr=e,Nr=Ia(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Fr=e,Nr=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=uc!==null?{id:bo,overflow:vo}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=si(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Fr=e,Nr=null,!0):!1;default:return!1}}function h2(e){return(e.mode&1)!==0&&(e.flags&128)===0}function p2(e){if(Me){var t=Nr;if(t){var n=t;if(!TA(e,t)){if(h2(e))throw Error(q(418));t=Ia(n.nextSibling);var r=Fr;t&&TA(e,t)?xk(r,n):(e.flags=e.flags&-4097|2,Me=!1,Fr=e)}}else{if(h2(e))throw Error(q(418));e.flags=e.flags&-4097|2,Me=!1,Fr=e}}}function EA(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Fr=e}function Zy(e){if(e!==Fr)return!1;if(!Me)return EA(e),Me=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!c2(e.type,e.memoizedProps)),t&&(t=Nr)){if(h2(e))throw Ik(),Error(q(418));for(;t;)xk(e,t),t=Ia(t.nextSibling)}if(EA(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(q(317));t:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Nr=Ia(e.nextSibling);break t}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Nr=null}}else Nr=Fr?Ia(e.stateNode.nextSibling):null;return!0}function Ik(){for(var e=Nr;e;)e=Ia(e.nextSibling)}function df(){Nr=Fr=null,Me=!1}function sI(e){ki===null?ki=[e]:ki.push(e)}var cV=zo.ReactCurrentBatchConfig;function Ei(e,t){if(e&&e.defaultProps){t=je({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}var zm=el(null),jm=null,Iu=null,oI=null;function aI(){oI=Iu=jm=null}function lI(e){var t=zm.current;Ie(zm),e._currentValue=t}function y2(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function zu(e,t){jm=e,oI=Iu=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(lr=!0),e.firstContext=null)}function yi(e){var t=e._currentValue;if(oI!==e)if(e={context:e,memoizedValue:t,next:null},Iu===null){if(jm===null)throw Error(q(308));Iu=e,jm.dependencies={lanes:0,firstContext:e}}else Iu=Iu.next=e;return t}var Ll=null;function cI(e){Ll===null?Ll=[e]:Ll.push(e)}function Tk(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,cI(t)):(n.next=i.next,i.next=n),t.interleaved=n,Oo(e,r)}function Oo(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var sa=!1;function uI(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ek(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function To(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ta(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Gt&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Oo(e,n)}return i=r.interleaved,i===null?(t.next=t,cI(r)):(t.next=i.next,i.next=t),r.interleaved=t,Oo(e,n)}function W0(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Xx(e,n)}}function AA(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Vm(e,t,n,r){var i=e.updateQueue;sa=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=e.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var f=i.baseState;o=0,u=c=l=null,a=s;do{var d=a.lane,h=a.eventTime;if((r&d)===d){u!==null&&(u=u.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});t:{var p=e,g=a;switch(d=t,h=n,g.tag){case 1:if(p=g.payload,typeof p=="function"){f=p.call(h,f,d);break t}f=p;break t;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,d=typeof p=="function"?p.call(h,f,d):p,d==null)break t;f=je({},f,d);break t;case 2:sa=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,d=i.effects,d===null?i.effects=[a]:d.push(a))}else h={eventTime:h,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=h,l=f):u=u.next=h,o|=d;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;d=a,a=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(u===null&&(l=f),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);dc|=o,e.lanes=o,e.memoizedState=f}}function MA(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(q(191,i));i.call(r)}}}var Ak=new T4.Component().refs;function m2(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:je({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Tb={isMounted:function(e){return(e=e._reactInternals)?kc(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Xn(),i=Aa(e),s=To(r,i);s.payload=t,n!=null&&(s.callback=n),t=Ta(e,s,i),t!==null&&(Ci(t,e,i,r),W0(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Xn(),i=Aa(e),s=To(r,i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=Ta(e,s,i),t!==null&&(Ci(t,e,i,r),W0(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Xn(),r=Aa(e),i=To(n,r);i.tag=2,t!=null&&(i.callback=t),t=Ta(e,i,r),t!==null&&(Ci(t,e,r,n),W0(t,e,r))}};function $A(e,t,n,r,i,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,o):t.prototype&&t.prototype.isPureReactComponent?!Vh(n,r)||!Vh(i,s):!0}function Mk(e,t,n){var r=!1,i=Da,s=t.contextType;return typeof s=="object"&&s!==null?s=yi(s):(i=fr(t)?cc:Cn.current,r=t.contextTypes,s=(r=r!=null)?ff(e,i):Da),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Tb,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function NA(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Tb.enqueueReplaceState(t,t.state,null)}function g2(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Ak,uI(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=yi(s):(s=fr(t)?cc:Cn.current,i.context=ff(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(m2(e,t,s,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&Tb.enqueueReplaceState(i,i.state,null),Vm(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Ad(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(q(309));var r=n.stateNode}if(!r)throw Error(q(147,e));var i=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var a=i.refs;a===Ak&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(q(284));if(!n._owner)throw Error(q(290,e))}return e}function Jy(e,t){throw e=Object.prototype.toString.call(t),Error(q(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function kA(e){var t=e._init;return t(e._payload)}function $k(e){function t(y,m){if(e){var b=y.deletions;b===null?(y.deletions=[m],y.flags|=16):b.push(m)}}function n(y,m){if(!e)return null;for(;m!==null;)t(y,m),m=m.sibling;return null}function r(y,m){for(y=new Map;m!==null;)m.key!==null?y.set(m.key,m):y.set(m.index,m),m=m.sibling;return y}function i(y,m){return y=Ma(y,m),y.index=0,y.sibling=null,y}function s(y,m,b){return y.index=b,e?(b=y.alternate,b!==null?(b=b.index,b<m?(y.flags|=2,m):b):(y.flags|=2,m)):(y.flags|=1048576,m)}function o(y){return e&&y.alternate===null&&(y.flags|=2),y}function a(y,m,b,w){return m===null||m.tag!==6?(m=_w(b,y.mode,w),m.return=y,m):(m=i(m,b),m.return=y,m)}function l(y,m,b,w){var S=b.type;return S===mu?u(y,m,b.props.children,w,b.key):m!==null&&(m.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===ia&&kA(S)===m.type)?(w=i(m,b.props),w.ref=Ad(y,m,b),w.return=y,w):(w=Z0(b.type,b.key,b.props,null,y.mode,w),w.ref=Ad(y,m,b),w.return=y,w)}function c(y,m,b,w){return m===null||m.tag!==4||m.stateNode.containerInfo!==b.containerInfo||m.stateNode.implementation!==b.implementation?(m=Sw(b,y.mode,w),m.return=y,m):(m=i(m,b.children||[]),m.return=y,m)}function u(y,m,b,w,S){return m===null||m.tag!==7?(m=tc(b,y.mode,w,S),m.return=y,m):(m=i(m,b),m.return=y,m)}function f(y,m,b){if(typeof m=="string"&&m!==""||typeof m=="number")return m=_w(""+m,y.mode,b),m.return=y,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case jy:return b=Z0(m.type,m.key,m.props,null,y.mode,b),b.ref=Ad(y,null,m),b.return=y,b;case yu:return m=Sw(m,y.mode,b),m.return=y,m;case ia:var w=m._init;return f(y,w(m._payload),b)}if(Wd(m)||Sd(m))return m=tc(m,y.mode,b,null),m.return=y,m;Jy(y,m)}return null}function d(y,m,b,w){var S=m!==null?m.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return S!==null?null:a(y,m,""+b,w);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case jy:return b.key===S?l(y,m,b,w):null;case yu:return b.key===S?c(y,m,b,w):null;case ia:return S=b._init,d(y,m,S(b._payload),w)}if(Wd(b)||Sd(b))return S!==null?null:u(y,m,b,w,null);Jy(y,b)}return null}function h(y,m,b,w,S){if(typeof w=="string"&&w!==""||typeof w=="number")return y=y.get(b)||null,a(m,y,""+w,S);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case jy:return y=y.get(w.key===null?b:w.key)||null,l(m,y,w,S);case yu:return y=y.get(w.key===null?b:w.key)||null,c(m,y,w,S);case ia:var _=w._init;return h(y,m,b,_(w._payload),S)}if(Wd(w)||Sd(w))return y=y.get(b)||null,u(m,y,w,S,null);Jy(m,w)}return null}function p(y,m,b,w){for(var S=null,_=null,x=m,E=m=0,N=null;x!==null&&E<b.length;E++){x.index>E?(N=x,x=null):N=x.sibling;var I=d(y,x,b[E],w);if(I===null){x===null&&(x=N);break}e&&x&&I.alternate===null&&t(y,x),m=s(I,m,E),_===null?S=I:_.sibling=I,_=I,x=N}if(E===b.length)return n(y,x),Me&&wl(y,E),S;if(x===null){for(;E<b.length;E++)x=f(y,b[E],w),x!==null&&(m=s(x,m,E),_===null?S=x:_.sibling=x,_=x);return Me&&wl(y,E),S}for(x=r(y,x);E<b.length;E++)N=h(x,y,E,b[E],w),N!==null&&(e&&N.alternate!==null&&x.delete(N.key===null?E:N.key),m=s(N,m,E),_===null?S=N:_.sibling=N,_=N);return e&&x.forEach(function(A){return t(y,A)}),Me&&wl(y,E),S}function g(y,m,b,w){var S=Sd(b);if(typeof S!="function")throw Error(q(150));if(b=S.call(b),b==null)throw Error(q(151));for(var _=S=null,x=m,E=m=0,N=null,I=b.next();x!==null&&!I.done;E++,I=b.next()){x.index>E?(N=x,x=null):N=x.sibling;var A=d(y,x,I.value,w);if(A===null){x===null&&(x=N);break}e&&x&&A.alternate===null&&t(y,x),m=s(A,m,E),_===null?S=A:_.sibling=A,_=A,x=N}if(I.done)return n(y,x),Me&&wl(y,E),S;if(x===null){for(;!I.done;E++,I=b.next())I=f(y,I.value,w),I!==null&&(m=s(I,m,E),_===null?S=I:_.sibling=I,_=I);return Me&&wl(y,E),S}for(x=r(y,x);!I.done;E++,I=b.next())I=h(x,y,E,I.value,w),I!==null&&(e&&I.alternate!==null&&x.delete(I.key===null?E:I.key),m=s(I,m,E),_===null?S=I:_.sibling=I,_=I);return e&&x.forEach(function(D){return t(y,D)}),Me&&wl(y,E),S}function v(y,m,b,w){if(typeof b=="object"&&b!==null&&b.type===mu&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case jy:t:{for(var S=b.key,_=m;_!==null;){if(_.key===S){if(S=b.type,S===mu){if(_.tag===7){n(y,_.sibling),m=i(_,b.props.children),m.return=y,y=m;break t}}else if(_.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===ia&&kA(S)===_.type){n(y,_.sibling),m=i(_,b.props),m.ref=Ad(y,_,b),m.return=y,y=m;break t}n(y,_);break}else t(y,_);_=_.sibling}b.type===mu?(m=tc(b.props.children,y.mode,w,b.key),m.return=y,y=m):(w=Z0(b.type,b.key,b.props,null,y.mode,w),w.ref=Ad(y,m,b),w.return=y,y=w)}return o(y);case yu:t:{for(_=b.key;m!==null;){if(m.key===_)if(m.tag===4&&m.stateNode.containerInfo===b.containerInfo&&m.stateNode.implementation===b.implementation){n(y,m.sibling),m=i(m,b.children||[]),m.return=y,y=m;break t}else{n(y,m);break}else t(y,m);m=m.sibling}m=Sw(b,y.mode,w),m.return=y,y=m}return o(y);case ia:return _=b._init,v(y,m,_(b._payload),w)}if(Wd(b))return p(y,m,b,w);if(Sd(b))return g(y,m,b,w);Jy(y,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,m!==null&&m.tag===6?(n(y,m.sibling),m=i(m,b),m.return=y,y=m):(n(y,m),m=_w(b,y.mode,w),m.return=y,y=m),o(y)):n(y,m)}return v}var hf=$k(!0),Nk=$k(!1),Yp={},Ds=el(Yp),Hh=el(Yp),Gh=el(Yp);function Cl(e){if(e===Yp)throw Error(q(174));return e}function fI(e,t){switch(_e(Gh,t),_e(Hh,e),_e(Ds,Yp),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:X_(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=X_(t,e)}Ie(Ds),_e(Ds,t)}function pf(){Ie(Ds),Ie(Hh),Ie(Gh)}function kk(e){Cl(Gh.current);var t=Cl(Ds.current),n=X_(t,e.type);t!==n&&(_e(Hh,e),_e(Ds,n))}function dI(e){Hh.current===e&&(Ie(Ds),Ie(Hh))}var Be=el(0);function Ym(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var yw=[];function hI(){for(var e=0;e<yw.length;e++)yw[e]._workInProgressVersionPrimary=null;yw.length=0}var H0=zo.ReactCurrentDispatcher,mw=zo.ReactCurrentBatchConfig,fc=0,Pe=null,sn=null,yn=null,qm=!1,vh=!1,Xh=0,uV=0;function Mn(){throw Error(q(321))}function pI(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Pi(e[n],t[n]))return!1;return!0}function yI(e,t,n,r,i,s){if(fc=s,Pe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,H0.current=e===null||e.memoizedState===null?pV:yV,e=n(r,i),vh){s=0;do{if(vh=!1,Xh=0,25<=s)throw Error(q(301));s+=1,yn=sn=null,t.updateQueue=null,H0.current=mV,e=n(r,i)}while(vh)}if(H0.current=Wm,t=sn!==null&&sn.next!==null,fc=0,yn=sn=Pe=null,qm=!1,t)throw Error(q(300));return e}function mI(){var e=Xh!==0;return Xh=0,e}function ls(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yn===null?Pe.memoizedState=yn=e:yn=yn.next=e,yn}function mi(){if(sn===null){var e=Pe.alternate;e=e!==null?e.memoizedState:null}else e=sn.next;var t=yn===null?Pe.memoizedState:yn.next;if(t!==null)yn=t,sn=e;else{if(e===null)throw Error(q(310));sn=e,e={memoizedState:sn.memoizedState,baseState:sn.baseState,baseQueue:sn.baseQueue,queue:sn.queue,next:null},yn===null?Pe.memoizedState=yn=e:yn=yn.next=e}return yn}function Qh(e,t){return typeof t=="function"?t(e):t}function gw(e){var t=mi(),n=t.queue;if(n===null)throw Error(q(311));n.lastRenderedReducer=e;var r=sn,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((fc&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var f={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=f,o=r):l=l.next=f,Pe.lanes|=u,dc|=u}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,Pi(r,t.memoizedState)||(lr=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=l,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do s=i.lane,Pe.lanes|=s,dc|=s,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function bw(e){var t=mi(),n=t.queue;if(n===null)throw Error(q(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=e(s,o.action),o=o.next;while(o!==i);Pi(s,t.memoizedState)||(lr=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Dk(){}function Ok(e,t){var n=Pe,r=mi(),i=t(),s=!Pi(r.memoizedState,i);if(s&&(r.memoizedState=i,lr=!0),r=r.queue,gI(Rk.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||yn!==null&&yn.memoizedState.tag&1){if(n.flags|=2048,Kh(9,Bk.bind(null,n,r,i,t),void 0,null),bn===null)throw Error(q(349));fc&30||Fk(n,t,i)}return i}function Fk(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Pe.updateQueue,t===null?(t={lastEffect:null,stores:null},Pe.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Bk(e,t,n,r){t.value=n,t.getSnapshot=r,Lk(t)&&Ck(e)}function Rk(e,t,n){return n(function(){Lk(t)&&Ck(e)})}function Lk(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Pi(e,n)}catch{return!0}}function Ck(e){var t=Oo(e,1);t!==null&&Ci(t,e,1,-1)}function DA(e){var t=ls();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Qh,lastRenderedState:e},t.queue=e,e=e.dispatch=hV.bind(null,Pe,e),[t.memoizedState,e]}function Kh(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Pe.updateQueue,t===null?(t={lastEffect:null,stores:null},Pe.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Uk(){return mi().memoizedState}function G0(e,t,n,r){var i=ls();Pe.flags|=e,i.memoizedState=Kh(1|t,n,void 0,r===void 0?null:r)}function Eb(e,t,n,r){var i=mi();r=r===void 0?null:r;var s=void 0;if(sn!==null){var o=sn.memoizedState;if(s=o.destroy,r!==null&&pI(r,o.deps)){i.memoizedState=Kh(t,n,s,r);return}}Pe.flags|=e,i.memoizedState=Kh(1|t,n,s,r)}function OA(e,t){return G0(8390656,8,e,t)}function gI(e,t){return Eb(2048,8,e,t)}function Pk(e,t){return Eb(4,2,e,t)}function zk(e,t){return Eb(4,4,e,t)}function jk(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Vk(e,t,n){return n=n!=null?n.concat([e]):null,Eb(4,4,jk.bind(null,t,e),n)}function bI(){}function Yk(e,t){var n=mi();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&pI(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function qk(e,t){var n=mi();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&pI(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Wk(e,t,n){return fc&21?(Pi(n,t)||(n=X4(),Pe.lanes|=n,dc|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,lr=!0),e.memoizedState=n)}function fV(e,t){var n=ce;ce=n!==0&&4>n?n:4,e(!0);var r=mw.transition;mw.transition={};try{e(!1),t()}finally{ce=n,mw.transition=r}}function Hk(){return mi().memoizedState}function dV(e,t,n){var r=Aa(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Gk(e))Xk(t,n);else if(n=Tk(e,t,n,r),n!==null){var i=Xn();Ci(n,e,r,i),Qk(n,t,r)}}function hV(e,t,n){var r=Aa(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Gk(e))Xk(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Pi(a,o)){var l=t.interleaved;l===null?(i.next=i,cI(t)):(i.next=l.next,l.next=i),t.interleaved=i;return}}catch{}finally{}n=Tk(e,t,i,r),n!==null&&(i=Xn(),Ci(n,e,r,i),Qk(n,t,r))}}function Gk(e){var t=e.alternate;return e===Pe||t!==null&&t===Pe}function Xk(e,t){vh=qm=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Qk(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Xx(e,n)}}var Wm={readContext:yi,useCallback:Mn,useContext:Mn,useEffect:Mn,useImperativeHandle:Mn,useInsertionEffect:Mn,useLayoutEffect:Mn,useMemo:Mn,useReducer:Mn,useRef:Mn,useState:Mn,useDebugValue:Mn,useDeferredValue:Mn,useTransition:Mn,useMutableSource:Mn,useSyncExternalStore:Mn,useId:Mn,unstable_isNewReconciler:!1},pV={readContext:yi,useCallback:function(e,t){return ls().memoizedState=[e,t===void 0?null:t],e},useContext:yi,useEffect:OA,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,G0(4194308,4,jk.bind(null,t,e),n)},useLayoutEffect:function(e,t){return G0(4194308,4,e,t)},useInsertionEffect:function(e,t){return G0(4,2,e,t)},useMemo:function(e,t){var n=ls();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ls();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=dV.bind(null,Pe,e),[r.memoizedState,e]},useRef:function(e){var t=ls();return e={current:e},t.memoizedState=e},useState:DA,useDebugValue:bI,useDeferredValue:function(e){return ls().memoizedState=e},useTransition:function(){var e=DA(!1),t=e[0];return e=fV.bind(null,e[1]),ls().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Pe,i=ls();if(Me){if(n===void 0)throw Error(q(407));n=n()}else{if(n=t(),bn===null)throw Error(q(349));fc&30||Fk(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,OA(Rk.bind(null,r,s,e),[e]),r.flags|=2048,Kh(9,Bk.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=ls(),t=bn.identifierPrefix;if(Me){var n=vo,r=bo;n=(r&~(1<<32-Li(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Xh++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=uV++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},yV={readContext:yi,useCallback:Yk,useContext:yi,useEffect:gI,useImperativeHandle:Vk,useInsertionEffect:Pk,useLayoutEffect:zk,useMemo:qk,useReducer:gw,useRef:Uk,useState:function(){return gw(Qh)},useDebugValue:bI,useDeferredValue:function(e){var t=mi();return Wk(t,sn.memoizedState,e)},useTransition:function(){var e=gw(Qh)[0],t=mi().memoizedState;return[e,t]},useMutableSource:Dk,useSyncExternalStore:Ok,useId:Hk,unstable_isNewReconciler:!1},mV={readContext:yi,useCallback:Yk,useContext:yi,useEffect:gI,useImperativeHandle:Vk,useInsertionEffect:Pk,useLayoutEffect:zk,useMemo:qk,useReducer:bw,useRef:Uk,useState:function(){return bw(Qh)},useDebugValue:bI,useDeferredValue:function(e){var t=mi();return sn===null?t.memoizedState=e:Wk(t,sn.memoizedState,e)},useTransition:function(){var e=bw(Qh)[0],t=mi().memoizedState;return[e,t]},useMutableSource:Dk,useSyncExternalStore:Ok,useId:Hk,unstable_isNewReconciler:!1};function yf(e,t){try{var n="",r=t;do n+=Yz(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function vw(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function b2(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var gV=typeof WeakMap=="function"?WeakMap:Map;function Kk(e,t,n){n=To(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Gm||(Gm=!0,M2=r),b2(e,t)},n}function Zk(e,t,n){n=To(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){b2(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){b2(e,t),typeof r!="function"&&(Ea===null?Ea=new Set([this]):Ea.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function FA(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new gV;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=kV.bind(null,e,t,n),t.then(e,e))}function BA(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function RA(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=To(-1,1),t.tag=2,Ta(n,t,1))),n.lanes|=1),e)}var bV=zo.ReactCurrentOwner,lr=!1;function zn(e,t,n,r){t.child=e===null?Nk(t,null,n,r):hf(t,e.child,n,r)}function LA(e,t,n,r,i){n=n.render;var s=t.ref;return zu(t,i),r=yI(e,t,n,r,s,i),n=mI(),e!==null&&!lr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Fo(e,t,i)):(Me&&n&&rI(t),t.flags|=1,zn(e,t,r,i),t.child)}function CA(e,t,n,r,i){if(e===null){var s=n.type;return typeof s=="function"&&!EI(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,Jk(e,t,s,r,i)):(e=Z0(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Vh,n(o,r)&&e.ref===t.ref)return Fo(e,t,i)}return t.flags|=1,e=Ma(s,r),e.ref=t.ref,e.return=t,t.child=e}function Jk(e,t,n,r,i){if(e!==null){var s=e.memoizedProps;if(Vh(s,r)&&e.ref===t.ref)if(lr=!1,t.pendingProps=r=s,(e.lanes&i)!==0)e.flags&131072&&(lr=!0);else return t.lanes=e.lanes,Fo(e,t,i)}return v2(e,t,n,r,i)}function tD(e,t,n){var r=t.pendingProps,i=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},_e(Eu,Mr),Mr|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,_e(Eu,Mr),Mr|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,_e(Eu,Mr),Mr|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,_e(Eu,Mr),Mr|=r;return zn(e,t,i,n),t.child}function eD(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function v2(e,t,n,r,i){var s=fr(n)?cc:Cn.current;return s=ff(t,s),zu(t,i),n=yI(e,t,n,r,s,i),r=mI(),e!==null&&!lr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Fo(e,t,i)):(Me&&r&&rI(t),t.flags|=1,zn(e,t,n,i),t.child)}function UA(e,t,n,r,i){if(fr(n)){var s=!0;Cm(t)}else s=!1;if(zu(t,i),t.stateNode===null)X0(e,t),Mk(t,n,r),g2(t,n,r,i),r=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=yi(c):(c=fr(n)?cc:Cn.current,c=ff(t,c));var u=n.getDerivedStateFromProps,f=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&NA(t,o,r,c),sa=!1;var d=t.memoizedState;o.state=d,Vm(t,r,o,i),l=t.memoizedState,a!==r||d!==l||ur.current||sa?(typeof u=="function"&&(m2(t,n,u,r),l=t.memoizedState),(a=sa||$A(t,n,a,r,d,l,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Ek(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:Ei(t.type,a),o.props=c,f=t.pendingProps,d=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=yi(l):(l=fr(n)?cc:Cn.current,l=ff(t,l));var h=n.getDerivedStateFromProps;(u=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||d!==l)&&NA(t,o,r,l),sa=!1,d=t.memoizedState,o.state=d,Vm(t,r,o,i);var p=t.memoizedState;a!==f||d!==p||ur.current||sa?(typeof h=="function"&&(m2(t,n,h,r),p=t.memoizedState),(c=sa||$A(t,n,c,r,d,p,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,l)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return w2(e,t,n,r,s,i)}function w2(e,t,n,r,i,s){eD(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return i&&IA(t,n,!1),Fo(e,t,s);r=t.stateNode,bV.current=t;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=hf(t,e.child,null,s),t.child=hf(t,null,a,s)):zn(e,t,a,s),t.memoizedState=r.state,i&&IA(t,n,!0),t.child}function nD(e){var t=e.stateNode;t.pendingContext?xA(e,t.pendingContext,t.pendingContext!==t.context):t.context&&xA(e,t.context,!1),fI(e,t.containerInfo)}function PA(e,t,n,r,i){return df(),sI(i),t.flags|=256,zn(e,t,n,r),t.child}var _2={dehydrated:null,treeContext:null,retryLane:0};function S2(e){return{baseLanes:e,cachePool:null,transitions:null}}function rD(e,t,n){var r=t.pendingProps,i=Be.current,s=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),_e(Be,i&1),e===null)return p2(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,s?(r=t.mode,s=t.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=$b(o,r,0,null),e=tc(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=S2(n),t.memoizedState=_2,e):vI(t,o));if(i=e.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return vV(e,t,o,r,a,i,n);if(s){s=r.fallback,o=t.mode,i=e.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=l,t.deletions=null):(r=Ma(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Ma(a,s):(s=tc(s,o,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,o=e.child.memoizedState,o=o===null?S2(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~n,t.memoizedState=_2,r}return s=e.child,e=s.sibling,r=Ma(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function vI(e,t){return t=$b({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function t0(e,t,n,r){return r!==null&&sI(r),hf(t,e.child,null,n),e=vI(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function vV(e,t,n,r,i,s,o){if(n)return t.flags&256?(t.flags&=-257,r=vw(Error(q(422))),t0(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=$b({mode:"visible",children:r.children},i,0,null),s=tc(s,i,o,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&hf(t,e.child,null,o),t.child.memoizedState=S2(o),t.memoizedState=_2,s);if(!(t.mode&1))return t0(e,t,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(q(419)),r=vw(s,r,void 0),t0(e,t,o,r)}if(a=(o&e.childLanes)!==0,lr||a){if(r=bn,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Oo(e,i),Ci(r,e,i,-1))}return TI(),r=vw(Error(q(421))),t0(e,t,o,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=DV.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,Nr=Ia(i.nextSibling),Fr=t,Me=!0,ki=null,e!==null&&(Jr[ti++]=bo,Jr[ti++]=vo,Jr[ti++]=uc,bo=e.id,vo=e.overflow,uc=t),t=vI(t,r.children),t.flags|=4096,t)}function zA(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),y2(e.return,t,n)}function ww(e,t,n,r,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function iD(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(zn(e,t,r.children,n),r=Be.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)t:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&zA(e,n,t);else if(e.tag===19)zA(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break t;for(;e.sibling===null;){if(e.return===null||e.return===t)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(_e(Be,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&Ym(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),ww(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Ym(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}ww(t,!0,n,null,s);break;case"together":ww(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function X0(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Fo(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),dc|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(q(153));if(t.child!==null){for(e=t.child,n=Ma(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Ma(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function wV(e,t,n){switch(t.tag){case 3:nD(t),df();break;case 5:kk(t);break;case 1:fr(t.type)&&Cm(t);break;case 4:fI(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;_e(zm,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(_e(Be,Be.current&1),t.flags|=128,null):n&t.child.childLanes?rD(e,t,n):(_e(Be,Be.current&1),e=Fo(e,t,n),e!==null?e.sibling:null);_e(Be,Be.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return iD(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),_e(Be,Be.current),r)break;return null;case 22:case 23:return t.lanes=0,tD(e,t,n)}return Fo(e,t,n)}var sD,x2,oD,aD;sD=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};x2=function(){};oD=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Cl(Ds.current);var s=null;switch(n){case"input":i=q_(e,i),r=q_(e,r),s=[];break;case"select":i=je({},i,{value:void 0}),r=je({},r,{value:void 0}),s=[];break;case"textarea":i=G_(e,i),r=G_(e,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Rm)}Q_(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Rh.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Rh.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&xe("scroll",e),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(t.updateQueue=c)&&(t.flags|=4)}};aD=function(e,t,n,r){n!==r&&(t.flags|=4)};function Md(e,t){if(!Me)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function $n(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function _V(e,t,n){var r=t.pendingProps;switch(iI(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $n(t),null;case 1:return fr(t.type)&&Lm(),$n(t),null;case 3:return r=t.stateNode,pf(),Ie(ur),Ie(Cn),hI(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Zy(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ki!==null&&(k2(ki),ki=null))),x2(e,t),$n(t),null;case 5:dI(t);var i=Cl(Gh.current);if(n=t.type,e!==null&&t.stateNode!=null)oD(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(q(166));return $n(t),null}if(e=Cl(Ds.current),Zy(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[ps]=t,r[Wh]=s,e=(t.mode&1)!==0,n){case"dialog":xe("cancel",r),xe("close",r);break;case"iframe":case"object":case"embed":xe("load",r);break;case"video":case"audio":for(i=0;i<Gd.length;i++)xe(Gd[i],r);break;case"source":xe("error",r);break;case"img":case"image":case"link":xe("error",r),xe("load",r);break;case"details":xe("toggle",r);break;case"input":QE(r,s),xe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},xe("invalid",r);break;case"textarea":ZE(r,s),xe("invalid",r)}Q_(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Ky(r.textContent,a,e),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Ky(r.textContent,a,e),i=["children",""+a]):Rh.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&xe("scroll",r)}switch(n){case"input":Vy(r),KE(r,s,!0);break;case"textarea":Vy(r),JE(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Rm)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=F4(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[ps]=t,e[Wh]=r,sD(e,t,!1,!1),t.stateNode=e;t:{switch(o=K_(n,r),n){case"dialog":xe("cancel",e),xe("close",e),i=r;break;case"iframe":case"object":case"embed":xe("load",e),i=r;break;case"video":case"audio":for(i=0;i<Gd.length;i++)xe(Gd[i],e);i=r;break;case"source":xe("error",e),i=r;break;case"img":case"image":case"link":xe("error",e),xe("load",e),i=r;break;case"details":xe("toggle",e),i=r;break;case"input":QE(e,r),i=q_(e,r),xe("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=je({},r,{value:void 0}),xe("invalid",e);break;case"textarea":ZE(e,r),i=G_(e,r),xe("invalid",e);break;default:i=r}Q_(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?L4(e,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&B4(e,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Lh(e,l):typeof l=="number"&&Lh(e,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Rh.hasOwnProperty(s)?l!=null&&s==="onScroll"&&xe("scroll",e):l!=null&&Vx(e,s,l,o))}switch(n){case"input":Vy(e),KE(e,r,!1);break;case"textarea":Vy(e),JE(e);break;case"option":r.value!=null&&e.setAttribute("value",""+ka(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?Lu(e,!!r.multiple,s,!1):r.defaultValue!=null&&Lu(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Rm)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break t;case"img":r=!0;break t;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return $n(t),null;case 6:if(e&&t.stateNode!=null)aD(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(q(166));if(n=Cl(Gh.current),Cl(Ds.current),Zy(t)){if(r=t.stateNode,n=t.memoizedProps,r[ps]=t,(s=r.nodeValue!==n)&&(e=Fr,e!==null))switch(e.tag){case 3:Ky(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ky(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ps]=t,t.stateNode=r}return $n(t),null;case 13:if(Ie(Be),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Me&&Nr!==null&&t.mode&1&&!(t.flags&128))Ik(),df(),t.flags|=98560,s=!1;else if(s=Zy(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(q(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(q(317));s[ps]=t}else df(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;$n(t),s=!1}else ki!==null&&(k2(ki),ki=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Be.current&1?ln===0&&(ln=3):TI())),t.updateQueue!==null&&(t.flags|=4),$n(t),null);case 4:return pf(),x2(e,t),e===null&&Yh(t.stateNode.containerInfo),$n(t),null;case 10:return lI(t.type._context),$n(t),null;case 17:return fr(t.type)&&Lm(),$n(t),null;case 19:if(Ie(Be),s=t.memoizedState,s===null)return $n(t),null;if(r=(t.flags&128)!==0,o=s.rendering,o===null)if(r)Md(s,!1);else{if(ln!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Ym(e),o!==null){for(t.flags|=128,Md(s,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return _e(Be,Be.current&1|2),t.child}e=e.sibling}s.tail!==null&&Qe()>mf&&(t.flags|=128,r=!0,Md(s,!1),t.lanes=4194304)}else{if(!r)if(e=Ym(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Md(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Me)return $n(t),null}else 2*Qe()-s.renderingStartTime>mf&&n!==1073741824&&(t.flags|=128,r=!0,Md(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(n=s.last,n!==null?n.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Qe(),t.sibling=null,n=Be.current,_e(Be,r?n&1|2:n&1),t):($n(t),null);case 22:case 23:return II(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Mr&1073741824&&($n(t),t.subtreeFlags&6&&(t.flags|=8192)):$n(t),null;case 24:return null;case 25:return null}throw Error(q(156,t.tag))}function SV(e,t){switch(iI(t),t.tag){case 1:return fr(t.type)&&Lm(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return pf(),Ie(ur),Ie(Cn),hI(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return dI(t),null;case 13:if(Ie(Be),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(q(340));df()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ie(Be),null;case 4:return pf(),null;case 10:return lI(t.type._context),null;case 22:case 23:return II(),null;case 24:return null;default:return null}}var e0=!1,On=!1,xV=typeof WeakSet=="function"?WeakSet:Set,nt=null;function Tu(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){qe(e,t,r)}else n.current=null}function I2(e,t,n){try{n()}catch(r){qe(e,t,r)}}var jA=!1;function IV(e,t){if(a2=Om,e=fk(),nI(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else t:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break t}var o=0,a=-1,l=-1,c=0,u=0,f=e,d=null;e:for(;;){for(var h;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(h=f.firstChild)!==null;)d=f,f=h;for(;;){if(f===e)break e;if(d===n&&++c===i&&(a=o),d===s&&++u===r&&(l=o),(h=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=h}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(l2={focusedElem:e,selectionRange:n},Om=!1,nt=t;nt!==null;)if(t=nt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,nt=e;else for(;nt!==null;){t=nt;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,v=p.memoizedState,y=t.stateNode,m=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:Ei(t.type,g),v);y.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(q(163))}}catch(w){qe(t,t.return,w)}if(e=t.sibling,e!==null){e.return=t.return,nt=e;break}nt=t.return}return p=jA,jA=!1,p}function wh(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&I2(t,n,s)}i=i.next}while(i!==r)}}function Ab(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function T2(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function lD(e){var t=e.alternate;t!==null&&(e.alternate=null,lD(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ps],delete t[Wh],delete t[f2],delete t[oV],delete t[aV])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function cD(e){return e.tag===5||e.tag===3||e.tag===4}function VA(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||cD(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function E2(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Rm));else if(r!==4&&(e=e.child,e!==null))for(E2(e,t,n),e=e.sibling;e!==null;)E2(e,t,n),e=e.sibling}function A2(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(A2(e,t,n),e=e.sibling;e!==null;)A2(e,t,n),e=e.sibling}var _n=null,Ai=!1;function Zo(e,t,n){for(n=n.child;n!==null;)uD(e,t,n),n=n.sibling}function uD(e,t,n){if(ks&&typeof ks.onCommitFiberUnmount=="function")try{ks.onCommitFiberUnmount(vb,n)}catch{}switch(n.tag){case 5:On||Tu(n,t);case 6:var r=_n,i=Ai;_n=null,Zo(e,t,n),_n=r,Ai=i,_n!==null&&(Ai?(e=_n,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):_n.removeChild(n.stateNode));break;case 18:_n!==null&&(Ai?(e=_n,n=n.stateNode,e.nodeType===8?hw(e.parentNode,n):e.nodeType===1&&hw(e,n),zh(e)):hw(_n,n.stateNode));break;case 4:r=_n,i=Ai,_n=n.stateNode.containerInfo,Ai=!0,Zo(e,t,n),_n=r,Ai=i;break;case 0:case 11:case 14:case 15:if(!On&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&I2(n,t,o),i=i.next}while(i!==r)}Zo(e,t,n);break;case 1:if(!On&&(Tu(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){qe(n,t,a)}Zo(e,t,n);break;case 21:Zo(e,t,n);break;case 22:n.mode&1?(On=(r=On)||n.memoizedState!==null,Zo(e,t,n),On=r):Zo(e,t,n);break;default:Zo(e,t,n)}}function YA(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new xV),t.forEach(function(r){var i=OV.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Ii(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,o=t,a=o;t:for(;a!==null;){switch(a.tag){case 5:_n=a.stateNode,Ai=!1;break t;case 3:_n=a.stateNode.containerInfo,Ai=!0;break t;case 4:_n=a.stateNode.containerInfo,Ai=!0;break t}a=a.return}if(_n===null)throw Error(q(160));uD(s,o,i),_n=null,Ai=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){qe(i,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)fD(t,e),t=t.sibling}function fD(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ii(t,e),ns(e),r&4){try{wh(3,e,e.return),Ab(3,e)}catch(g){qe(e,e.return,g)}try{wh(5,e,e.return)}catch(g){qe(e,e.return,g)}}break;case 1:Ii(t,e),ns(e),r&512&&n!==null&&Tu(n,n.return);break;case 5:if(Ii(t,e),ns(e),r&512&&n!==null&&Tu(n,n.return),e.flags&32){var i=e.stateNode;try{Lh(i,"")}catch(g){qe(e,e.return,g)}}if(r&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,o=n!==null?n.memoizedProps:s,a=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&D4(i,s),K_(a,o);var c=K_(a,s);for(o=0;o<l.length;o+=2){var u=l[o],f=l[o+1];u==="style"?L4(i,f):u==="dangerouslySetInnerHTML"?B4(i,f):u==="children"?Lh(i,f):Vx(i,u,f,c)}switch(a){case"input":W_(i,s);break;case"textarea":O4(i,s);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?Lu(i,!!s.multiple,h,!1):d!==!!s.multiple&&(s.defaultValue!=null?Lu(i,!!s.multiple,s.defaultValue,!0):Lu(i,!!s.multiple,s.multiple?[]:"",!1))}i[Wh]=s}catch(g){qe(e,e.return,g)}}break;case 6:if(Ii(t,e),ns(e),r&4){if(e.stateNode===null)throw Error(q(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(g){qe(e,e.return,g)}}break;case 3:if(Ii(t,e),ns(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{zh(t.containerInfo)}catch(g){qe(e,e.return,g)}break;case 4:Ii(t,e),ns(e);break;case 13:Ii(t,e),ns(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(SI=Qe())),r&4&&YA(e);break;case 22:if(u=n!==null&&n.memoizedState!==null,e.mode&1?(On=(c=On)||u,Ii(t,e),On=c):Ii(t,e),ns(e),r&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!u&&e.mode&1)for(nt=e,u=e.child;u!==null;){for(f=nt=u;nt!==null;){switch(d=nt,h=d.child,d.tag){case 0:case 11:case 14:case 15:wh(4,d,d.return);break;case 1:Tu(d,d.return);var p=d.stateNode;if(typeof p.componentWillUnmount=="function"){r=d,n=d.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(g){qe(r,n,g)}}break;case 5:Tu(d,d.return);break;case 22:if(d.memoizedState!==null){WA(f);continue}}h!==null?(h.return=d,nt=h):WA(f)}u=u.sibling}t:for(u=null,f=e;;){if(f.tag===5){if(u===null){u=f;try{i=f.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=R4("display",o))}catch(g){qe(e,e.return,g)}}}else if(f.tag===6){if(u===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(g){qe(e,e.return,g)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break t;for(;f.sibling===null;){if(f.return===null||f.return===e)break t;u===f&&(u=null),f=f.return}u===f&&(u=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Ii(t,e),ns(e),r&4&&YA(e);break;case 21:break;default:Ii(t,e),ns(e)}}function ns(e){var t=e.flags;if(t&2){try{t:{for(var n=e.return;n!==null;){if(cD(n)){var r=n;break t}n=n.return}throw Error(q(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Lh(i,""),r.flags&=-33);var s=VA(e);A2(e,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=VA(e);E2(e,a,o);break;default:throw Error(q(161))}}catch(l){qe(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function TV(e,t,n){nt=e,dD(e)}function dD(e,t,n){for(var r=(e.mode&1)!==0;nt!==null;){var i=nt,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||e0;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||On;a=e0;var c=On;if(e0=o,(On=l)&&!c)for(nt=i;nt!==null;)o=nt,l=o.child,o.tag===22&&o.memoizedState!==null?HA(i):l!==null?(l.return=o,nt=l):HA(i);for(;s!==null;)nt=s,dD(s),s=s.sibling;nt=i,e0=a,On=c}qA(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,nt=s):qA(e)}}function qA(e){for(;nt!==null;){var t=nt;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:On||Ab(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!On)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Ei(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&MA(t,s,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}MA(t,o,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var f=u.dehydrated;f!==null&&zh(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(q(163))}On||t.flags&512&&T2(t)}catch(d){qe(t,t.return,d)}}if(t===e){nt=null;break}if(n=t.sibling,n!==null){n.return=t.return,nt=n;break}nt=t.return}}function WA(e){for(;nt!==null;){var t=nt;if(t===e){nt=null;break}var n=t.sibling;if(n!==null){n.return=t.return,nt=n;break}nt=t.return}}function HA(e){for(;nt!==null;){var t=nt;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Ab(4,t)}catch(l){qe(t,n,l)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(l){qe(t,i,l)}}var s=t.return;try{T2(t)}catch(l){qe(t,s,l)}break;case 5:var o=t.return;try{T2(t)}catch(l){qe(t,o,l)}}}catch(l){qe(t,t.return,l)}if(t===e){nt=null;break}var a=t.sibling;if(a!==null){a.return=t.return,nt=a;break}nt=t.return}}var EV=Math.ceil,Hm=zo.ReactCurrentDispatcher,wI=zo.ReactCurrentOwner,hi=zo.ReactCurrentBatchConfig,Gt=0,bn=null,en=null,En=0,Mr=0,Eu=el(0),ln=0,Zh=null,dc=0,Mb=0,_I=0,_h=null,sr=null,SI=0,mf=1/0,so=null,Gm=!1,M2=null,Ea=null,n0=!1,ba=null,Xm=0,Sh=0,$2=null,Q0=-1,K0=0;function Xn(){return Gt&6?Qe():Q0!==-1?Q0:Q0=Qe()}function Aa(e){return e.mode&1?Gt&2&&En!==0?En&-En:cV.transition!==null?(K0===0&&(K0=X4()),K0):(e=ce,e!==0||(e=window.event,e=e===void 0?16:nk(e.type)),e):1}function Ci(e,t,n,r){if(50<Sh)throw Sh=0,$2=null,Error(q(185));zp(e,n,r),(!(Gt&2)||e!==bn)&&(e===bn&&(!(Gt&2)&&(Mb|=n),ln===4&&da(e,En)),dr(e,r),n===1&&Gt===0&&!(t.mode&1)&&(mf=Qe()+500,Ib&&nl()))}function dr(e,t){var n=e.callbackNode;cj(e,t);var r=Dm(e,e===bn?En:0);if(r===0)n!==null&&nA(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&nA(n),t===1)e.tag===0?lV(GA.bind(null,e)):_k(GA.bind(null,e)),iV(function(){!(Gt&6)&&nl()}),n=null;else{switch(Q4(r)){case 1:n=Gx;break;case 4:n=H4;break;case 16:n=km;break;case 536870912:n=G4;break;default:n=km}n=wD(n,hD.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function hD(e,t){if(Q0=-1,K0=0,Gt&6)throw Error(q(327));var n=e.callbackNode;if(ju()&&e.callbackNode!==n)return null;var r=Dm(e,e===bn?En:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Qm(e,r);else{t=r;var i=Gt;Gt|=2;var s=yD();(bn!==e||En!==t)&&(so=null,mf=Qe()+500,Jl(e,t));do try{$V();break}catch(a){pD(e,a)}while(!0);aI(),Hm.current=s,Gt=i,en!==null?t=0:(bn=null,En=0,t=ln)}if(t!==0){if(t===2&&(i=n2(e),i!==0&&(r=i,t=N2(e,i))),t===1)throw n=Zh,Jl(e,0),da(e,r),dr(e,Qe()),n;if(t===6)da(e,r);else{if(i=e.current.alternate,!(r&30)&&!AV(i)&&(t=Qm(e,r),t===2&&(s=n2(e),s!==0&&(r=s,t=N2(e,s))),t===1))throw n=Zh,Jl(e,0),da(e,r),dr(e,Qe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(q(345));case 2:_l(e,sr,so);break;case 3:if(da(e,r),(r&130023424)===r&&(t=SI+500-Qe(),10<t)){if(Dm(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Xn(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=u2(_l.bind(null,e,sr,so),t);break}_l(e,sr,so);break;case 4:if(da(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-Li(r);s=1<<o,o=t[o],o>i&&(i=o),r&=~s}if(r=i,r=Qe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*EV(r/1960))-r,10<r){e.timeoutHandle=u2(_l.bind(null,e,sr,so),r);break}_l(e,sr,so);break;case 5:_l(e,sr,so);break;default:throw Error(q(329))}}}return dr(e,Qe()),e.callbackNode===n?hD.bind(null,e):null}function N2(e,t){var n=_h;return e.current.memoizedState.isDehydrated&&(Jl(e,t).flags|=256),e=Qm(e,t),e!==2&&(t=sr,sr=n,t!==null&&k2(t)),e}function k2(e){sr===null?sr=e:sr.push.apply(sr,e)}function AV(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Pi(s(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function da(e,t){for(t&=~_I,t&=~Mb,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Li(t),r=1<<n;e[n]=-1,t&=~r}}function GA(e){if(Gt&6)throw Error(q(327));ju();var t=Dm(e,0);if(!(t&1))return dr(e,Qe()),null;var n=Qm(e,t);if(e.tag!==0&&n===2){var r=n2(e);r!==0&&(t=r,n=N2(e,r))}if(n===1)throw n=Zh,Jl(e,0),da(e,t),dr(e,Qe()),n;if(n===6)throw Error(q(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,_l(e,sr,so),dr(e,Qe()),null}function xI(e,t){var n=Gt;Gt|=1;try{return e(t)}finally{Gt=n,Gt===0&&(mf=Qe()+500,Ib&&nl())}}function hc(e){ba!==null&&ba.tag===0&&!(Gt&6)&&ju();var t=Gt;Gt|=1;var n=hi.transition,r=ce;try{if(hi.transition=null,ce=1,e)return e()}finally{ce=r,hi.transition=n,Gt=t,!(Gt&6)&&nl()}}function II(){Mr=Eu.current,Ie(Eu)}function Jl(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,rV(n)),en!==null)for(n=en.return;n!==null;){var r=n;switch(iI(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Lm();break;case 3:pf(),Ie(ur),Ie(Cn),hI();break;case 5:dI(r);break;case 4:pf();break;case 13:Ie(Be);break;case 19:Ie(Be);break;case 10:lI(r.type._context);break;case 22:case 23:II()}n=n.return}if(bn=e,en=e=Ma(e.current,null),En=Mr=t,ln=0,Zh=null,_I=Mb=dc=0,sr=_h=null,Ll!==null){for(t=0;t<Ll.length;t++)if(n=Ll[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Ll=null}return e}function pD(e,t){do{var n=en;try{if(aI(),H0.current=Wm,qm){for(var r=Pe.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}qm=!1}if(fc=0,yn=sn=Pe=null,vh=!1,Xh=0,wI.current=null,n===null||n.return===null){ln=1,Zh=t,en=null;break}t:{var s=e,o=n.return,a=n,l=t;if(t=En,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,f=u.tag;if(!(u.mode&1)&&(f===0||f===11||f===15)){var d=u.alternate;d?(u.updateQueue=d.updateQueue,u.memoizedState=d.memoizedState,u.lanes=d.lanes):(u.updateQueue=null,u.memoizedState=null)}var h=BA(o);if(h!==null){h.flags&=-257,RA(h,o,a,s,t),h.mode&1&&FA(s,c,t),t=h,l=c;var p=t.updateQueue;if(p===null){var g=new Set;g.add(l),t.updateQueue=g}else p.add(l);break t}else{if(!(t&1)){FA(s,c,t),TI();break t}l=Error(q(426))}}else if(Me&&a.mode&1){var v=BA(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),RA(v,o,a,s,t),sI(yf(l,a));break t}}s=l=yf(l,a),ln!==4&&(ln=2),_h===null?_h=[s]:_h.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var y=Kk(s,l,t);AA(s,y);break t;case 1:a=l;var m=s.type,b=s.stateNode;if(!(s.flags&128)&&(typeof m.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Ea===null||!Ea.has(b)))){s.flags|=65536,t&=-t,s.lanes|=t;var w=Zk(s,a,t);AA(s,w);break t}}s=s.return}while(s!==null)}gD(n)}catch(S){t=S,en===n&&n!==null&&(en=n=n.return);continue}break}while(!0)}function yD(){var e=Hm.current;return Hm.current=Wm,e===null?Wm:e}function TI(){(ln===0||ln===3||ln===2)&&(ln=4),bn===null||!(dc&268435455)&&!(Mb&268435455)||da(bn,En)}function Qm(e,t){var n=Gt;Gt|=2;var r=yD();(bn!==e||En!==t)&&(so=null,Jl(e,t));do try{MV();break}catch(i){pD(e,i)}while(!0);if(aI(),Gt=n,Hm.current=r,en!==null)throw Error(q(261));return bn=null,En=0,ln}function MV(){for(;en!==null;)mD(en)}function $V(){for(;en!==null&&!tj();)mD(en)}function mD(e){var t=vD(e.alternate,e,Mr);e.memoizedProps=e.pendingProps,t===null?gD(e):en=t,wI.current=null}function gD(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=SV(n,t),n!==null){n.flags&=32767,en=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ln=6,en=null;return}}else if(n=_V(n,t,Mr),n!==null){en=n;return}if(t=t.sibling,t!==null){en=t;return}en=t=e}while(t!==null);ln===0&&(ln=5)}function _l(e,t,n){var r=ce,i=hi.transition;try{hi.transition=null,ce=1,NV(e,t,n,r)}finally{hi.transition=i,ce=r}return null}function NV(e,t,n,r){do ju();while(ba!==null);if(Gt&6)throw Error(q(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(q(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(uj(e,s),e===bn&&(en=bn=null,En=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||n0||(n0=!0,wD(km,function(){return ju(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=hi.transition,hi.transition=null;var o=ce;ce=1;var a=Gt;Gt|=4,wI.current=null,IV(e,n),fD(n,e),Qj(l2),Om=!!a2,l2=a2=null,e.current=n,TV(n),ej(),Gt=a,ce=o,hi.transition=s}else e.current=n;if(n0&&(n0=!1,ba=e,Xm=i),s=e.pendingLanes,s===0&&(Ea=null),ij(n.stateNode),dr(e,Qe()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Gm)throw Gm=!1,e=M2,M2=null,e;return Xm&1&&e.tag!==0&&ju(),s=e.pendingLanes,s&1?e===$2?Sh++:(Sh=0,$2=e):Sh=0,nl(),null}function ju(){if(ba!==null){var e=Q4(Xm),t=hi.transition,n=ce;try{if(hi.transition=null,ce=16>e?16:e,ba===null)var r=!1;else{if(e=ba,ba=null,Xm=0,Gt&6)throw Error(q(331));var i=Gt;for(Gt|=4,nt=e.current;nt!==null;){var s=nt,o=s.child;if(nt.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(nt=c;nt!==null;){var u=nt;switch(u.tag){case 0:case 11:case 15:wh(8,u,s)}var f=u.child;if(f!==null)f.return=u,nt=f;else for(;nt!==null;){u=nt;var d=u.sibling,h=u.return;if(lD(u),u===c){nt=null;break}if(d!==null){d.return=h,nt=d;break}nt=h}}}var p=s.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(g!==null)}}nt=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,nt=o;else t:for(;nt!==null;){if(s=nt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:wh(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,nt=y;break t}nt=s.return}}var m=e.current;for(nt=m;nt!==null;){o=nt;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,nt=b;else t:for(o=m;nt!==null;){if(a=nt,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Ab(9,a)}}catch(S){qe(a,a.return,S)}if(a===o){nt=null;break t}var w=a.sibling;if(w!==null){w.return=a.return,nt=w;break t}nt=a.return}}if(Gt=i,nl(),ks&&typeof ks.onPostCommitFiberRoot=="function")try{ks.onPostCommitFiberRoot(vb,e)}catch{}r=!0}return r}finally{ce=n,hi.transition=t}}return!1}function XA(e,t,n){t=yf(n,t),t=Kk(e,t,1),e=Ta(e,t,1),t=Xn(),e!==null&&(zp(e,1,t),dr(e,t))}function qe(e,t,n){if(e.tag===3)XA(e,e,n);else for(;t!==null;){if(t.tag===3){XA(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ea===null||!Ea.has(r))){e=yf(n,e),e=Zk(t,e,1),t=Ta(t,e,1),e=Xn(),t!==null&&(zp(t,1,e),dr(t,e));break}}t=t.return}}function kV(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Xn(),e.pingedLanes|=e.suspendedLanes&n,bn===e&&(En&n)===n&&(ln===4||ln===3&&(En&130023424)===En&&500>Qe()-SI?Jl(e,0):_I|=n),dr(e,t)}function bD(e,t){t===0&&(e.mode&1?(t=Wy,Wy<<=1,!(Wy&130023424)&&(Wy=4194304)):t=1);var n=Xn();e=Oo(e,t),e!==null&&(zp(e,t,n),dr(e,n))}function DV(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),bD(e,n)}function OV(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(q(314))}r!==null&&r.delete(t),bD(e,n)}var vD;vD=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||ur.current)lr=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return lr=!1,wV(e,t,n);lr=!!(e.flags&131072)}else lr=!1,Me&&t.flags&1048576&&Sk(t,Pm,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;X0(e,t),e=t.pendingProps;var i=ff(t,Cn.current);zu(t,n),i=yI(null,t,r,e,i,n);var s=mI();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,fr(r)?(s=!0,Cm(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,uI(t),i.updater=Tb,t.stateNode=i,i._reactInternals=t,g2(t,r,e,n),t=w2(null,t,r,!0,s,n)):(t.tag=0,Me&&s&&rI(t),zn(null,t,i,n),t=t.child),t;case 16:r=t.elementType;t:{switch(X0(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=BV(r),e=Ei(r,e),i){case 0:t=v2(null,t,r,e,n);break t;case 1:t=UA(null,t,r,e,n);break t;case 11:t=LA(null,t,r,e,n);break t;case 14:t=CA(null,t,r,Ei(r.type,e),n);break t}throw Error(q(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Ei(r,i),v2(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Ei(r,i),UA(e,t,r,i,n);case 3:t:{if(nD(t),e===null)throw Error(q(387));r=t.pendingProps,s=t.memoizedState,i=s.element,Ek(e,t),Vm(t,r,null,n);var o=t.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=yf(Error(q(423)),t),t=PA(e,t,r,n,i);break t}else if(r!==i){i=yf(Error(q(424)),t),t=PA(e,t,r,n,i);break t}else for(Nr=Ia(t.stateNode.containerInfo.firstChild),Fr=t,Me=!0,ki=null,n=Nk(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(df(),r===i){t=Fo(e,t,n);break t}zn(e,t,r,n)}t=t.child}return t;case 5:return kk(t),e===null&&p2(t),r=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,o=i.children,c2(r,i)?o=null:s!==null&&c2(r,s)&&(t.flags|=32),eD(e,t),zn(e,t,o,n),t.child;case 6:return e===null&&p2(t),null;case 13:return rD(e,t,n);case 4:return fI(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=hf(t,null,r,n):zn(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Ei(r,i),LA(e,t,r,i,n);case 7:return zn(e,t,t.pendingProps,n),t.child;case 8:return zn(e,t,t.pendingProps.children,n),t.child;case 12:return zn(e,t,t.pendingProps.children,n),t.child;case 10:t:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value,_e(zm,r._currentValue),r._currentValue=o,s!==null)if(Pi(s.value,o)){if(s.children===i.children&&!ur.current){t=Fo(e,t,n);break t}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=To(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),y2(s.return,n,t),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(q(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),y2(o,n,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}zn(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,zu(t,n),i=yi(i),r=r(i),t.flags|=1,zn(e,t,r,n),t.child;case 14:return r=t.type,i=Ei(r,t.pendingProps),i=Ei(r.type,i),CA(e,t,r,i,n);case 15:return Jk(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Ei(r,i),X0(e,t),t.tag=1,fr(r)?(e=!0,Cm(t)):e=!1,zu(t,n),Mk(t,r,i),g2(t,r,i,n),w2(null,t,r,!0,e,n);case 19:return iD(e,t,n);case 22:return tD(e,t,n)}throw Error(q(156,t.tag))};function wD(e,t){return W4(e,t)}function FV(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function si(e,t,n,r){return new FV(e,t,n,r)}function EI(e){return e=e.prototype,!(!e||!e.isReactComponent)}function BV(e){if(typeof e=="function")return EI(e)?1:0;if(e!=null){if(e=e.$$typeof,e===qx)return 11;if(e===Wx)return 14}return 2}function Ma(e,t){var n=e.alternate;return n===null?(n=si(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Z0(e,t,n,r,i,s){var o=2;if(r=e,typeof e=="function")EI(e)&&(o=1);else if(typeof e=="string")o=5;else t:switch(e){case mu:return tc(n.children,i,s,t);case Yx:o=8,i|=8;break;case z_:return e=si(12,n,t,i|2),e.elementType=z_,e.lanes=s,e;case j_:return e=si(13,n,t,i),e.elementType=j_,e.lanes=s,e;case V_:return e=si(19,n,t,i),e.elementType=V_,e.lanes=s,e;case $4:return $b(n,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case A4:o=10;break t;case M4:o=9;break t;case qx:o=11;break t;case Wx:o=14;break t;case ia:o=16,r=null;break t}throw Error(q(130,e==null?e:typeof e,""))}return t=si(o,n,t,i),t.elementType=e,t.type=r,t.lanes=s,t}function tc(e,t,n,r){return e=si(7,e,r,t),e.lanes=n,e}function $b(e,t,n,r){return e=si(22,e,r,t),e.elementType=$4,e.lanes=n,e.stateNode={isHidden:!1},e}function _w(e,t,n){return e=si(6,e,null,t),e.lanes=n,e}function Sw(e,t,n){return t=si(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function RV(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=nw(0),this.expirationTimes=nw(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=nw(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function AI(e,t,n,r,i,s,o,a,l){return e=new RV(e,t,n,a,l),t===1?(t=1,s===!0&&(t|=8)):t=0,s=si(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},uI(s),e}function LV(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:yu,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function _D(e){if(!e)return Da;e=e._reactInternals;t:{if(kc(e)!==e||e.tag!==1)throw Error(q(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break t;case 1:if(fr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break t}}t=t.return}while(t!==null);throw Error(q(171))}if(e.tag===1){var n=e.type;if(fr(n))return wk(e,n,t)}return t}function SD(e,t,n,r,i,s,o,a,l){return e=AI(n,r,!0,e,i,s,o,a,l),e.context=_D(null),n=e.current,r=Xn(),i=Aa(n),s=To(r,i),s.callback=t??null,Ta(n,s,i),e.current.lanes=i,zp(e,i,r),dr(e,r),e}function Nb(e,t,n,r){var i=t.current,s=Xn(),o=Aa(i);return n=_D(n),t.context===null?t.context=n:t.pendingContext=n,t=To(s,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Ta(i,t,o),e!==null&&(Ci(e,i,o,s),W0(e,i,o)),o}function Km(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function QA(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function MI(e,t){QA(e,t),(e=e.alternate)&&QA(e,t)}function CV(){return null}var xD=typeof reportError=="function"?reportError:function(e){console.error(e)};function $I(e){this._internalRoot=e}kb.prototype.render=$I.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(q(409));Nb(e,t,null,null)};kb.prototype.unmount=$I.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;hc(function(){Nb(null,e,null,null)}),t[Do]=null}};function kb(e){this._internalRoot=e}kb.prototype.unstable_scheduleHydration=function(e){if(e){var t=J4();e={blockedOn:null,target:e,priority:t};for(var n=0;n<fa.length&&t!==0&&t<fa[n].priority;n++);fa.splice(n,0,e),n===0&&ek(e)}};function NI(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Db(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function KA(){}function UV(e,t,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=Km(o);s.call(c)}}var o=SD(t,r,e,0,null,!1,!1,"",KA);return e._reactRootContainer=o,e[Do]=o.current,Yh(e.nodeType===8?e.parentNode:e),hc(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=Km(l);a.call(c)}}var l=AI(e,0,!1,null,null,!1,!1,"",KA);return e._reactRootContainer=l,e[Do]=l.current,Yh(e.nodeType===8?e.parentNode:e),hc(function(){Nb(t,l,n,r)}),l}function Ob(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Km(o);a.call(l)}}Nb(t,o,e,i)}else o=UV(n,t,e,i,r);return Km(o)}K4=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Hd(t.pendingLanes);n!==0&&(Xx(t,n|1),dr(t,Qe()),!(Gt&6)&&(mf=Qe()+500,nl()))}break;case 13:hc(function(){var r=Oo(e,1);if(r!==null){var i=Xn();Ci(r,e,1,i)}}),MI(e,1)}};Qx=function(e){if(e.tag===13){var t=Oo(e,134217728);if(t!==null){var n=Xn();Ci(t,e,134217728,n)}MI(e,134217728)}};Z4=function(e){if(e.tag===13){var t=Aa(e),n=Oo(e,t);if(n!==null){var r=Xn();Ci(n,e,t,r)}MI(e,t)}};J4=function(){return ce};tk=function(e,t){var n=ce;try{return ce=e,t()}finally{ce=n}};J_=function(e,t,n){switch(t){case"input":if(W_(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=xb(r);if(!i)throw Error(q(90));k4(r),W_(r,i)}}}break;case"textarea":O4(e,n);break;case"select":t=n.value,t!=null&&Lu(e,!!n.multiple,t,!1)}};P4=xI;z4=hc;var PV={usingClientEntryPoint:!1,Events:[Vp,wu,xb,C4,U4,xI]},$d={findFiberByHostInstance:Rl,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},zV={bundleType:$d.bundleType,version:$d.version,rendererPackageName:$d.rendererPackageName,rendererConfig:$d.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:zo.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Y4(e),e===null?null:e.stateNode},findFiberByHostInstance:$d.findFiberByHostInstance||CV,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var r0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!r0.isDisabled&&r0.supportsFiber)try{vb=r0.inject(zV),ks=r0}catch{}}Vr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=PV;Vr.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!NI(t))throw Error(q(200));return LV(e,t,null,n)};Vr.createRoot=function(e,t){if(!NI(e))throw Error(q(299));var n=!1,r="",i=xD;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=AI(e,1,!1,null,null,n,!1,r,i),e[Do]=t.current,Yh(e.nodeType===8?e.parentNode:e),new $I(t)};Vr.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(q(188)):(e=Object.keys(e).join(","),Error(q(268,e)));return e=Y4(t),e=e===null?null:e.stateNode,e};Vr.flushSync=function(e){return hc(e)};Vr.hydrate=function(e,t,n){if(!Db(t))throw Error(q(200));return Ob(null,e,t,!0,n)};Vr.hydrateRoot=function(e,t,n){if(!NI(e))throw Error(q(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=xD;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=SD(t,null,e,1,n??null,i,!1,s,o),e[Do]=t.current,Yh(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new kb(t)};Vr.render=function(e,t,n){if(!Db(t))throw Error(q(200));return Ob(null,e,t,!1,n)};Vr.unmountComponentAtNode=function(e){if(!Db(e))throw Error(q(40));return e._reactRootContainer?(hc(function(){Ob(null,null,e,!1,function(){e._reactRootContainer=null,e[Do]=null})}),!0):!1};Vr.unstable_batchedUpdates=xI;Vr.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Db(n))throw Error(q(200));if(e==null||e._reactInternals===void 0)throw Error(q(38));return Ob(e,t,n,!1,r)};Vr.version="18.2.0-next-9e3b772b8-20220608";function ID(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ID)}catch(e){console.error(e)}}ID(),S4.exports=Vr;var jV=S4.exports,ZA=jV;U_.createRoot=ZA.createRoot,U_.hydrateRoot=ZA.hydrateRoot;function W(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(e,t||[])).next())})}function JA(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function K(e){return this instanceof K?(this.v=e,this):new K(e)}function nn(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(d){r[d]&&(i[d]=function(h){return new Promise(function(p,g){s.push([d,h,p,g])>1||a(d,h)})})}function a(d,h){try{l(r[d](h))}catch(p){f(s[0][3],p)}}function l(d){d.value instanceof K?Promise.resolve(d.value.v).then(c,u):f(s[0][2],d)}function c(d){a("next",d)}function u(d){a("throw",d)}function f(d,h){d(h),s.shift(),s.length&&a(s[0][0],s[0][1])}}function $a(e){var t,n;return t={},r("next"),r("throw",function(i){throw i}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(i,s){t[i]=e[i]?function(o){return(n=!n)?{value:K(e[i](o)),done:!1}:s?s(o):o}:s}}function Br(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof JA=="function"?JA(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=e[s]&&function(o){return new Promise(function(a,l){o=e[s](o),i(a,l,o.done,o.value)})}}function i(s,o,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},o)}}const VV=new TextDecoder("utf-8"),D2=e=>VV.decode(e),YV=new TextEncoder,kI=e=>YV.encode(e),[Gbt,qV]=(()=>{const e=()=>{throw new Error("BigInt is not available in this environment")};function t(){throw e()}return t.asIntN=()=>{throw e()},t.asUintN=()=>{throw e()},typeof BigInt<"u"?[BigInt,!0]:[t,!1]})(),[qp,Xbt]=(()=>{const e=()=>{throw new Error("BigInt64Array is not available in this environment")};class t{static get BYTES_PER_ELEMENT(){return 8}static of(){throw e()}static from(){throw e()}constructor(){throw e()}}return typeof BigInt64Array<"u"?[BigInt64Array,!0]:[t,!1]})(),[Wp,Qbt]=(()=>{const e=()=>{throw new Error("BigUint64Array is not available in this environment")};class t{static get BYTES_PER_ELEMENT(){return 8}static of(){throw e()}static from(){throw e()}constructor(){throw e()}}return typeof BigUint64Array<"u"?[BigUint64Array,!0]:[t,!1]})(),WV=e=>typeof e=="number",HV=e=>typeof e=="boolean",jn=e=>typeof e=="function",zi=e=>e!=null&&Object(e)===e,Jh=e=>zi(e)&&jn(e.then),Fb=e=>zi(e)&&jn(e[Symbol.iterator]),DI=e=>zi(e)&&jn(e[Symbol.asyncIterator]),O2=e=>zi(e)&&zi(e.schema),TD=e=>zi(e)&&"done"in e&&"value"in e,ED=e=>zi(e)&&jn(e.stat)&&WV(e.fd),AD=e=>zi(e)&&OI(e.body),MD=e=>"_getDOMStream"in e&&"_getNodeStream"in e,OI=e=>zi(e)&&jn(e.cancel)&&jn(e.getReader)&&!MD(e),$D=e=>zi(e)&&jn(e.read)&&jn(e.pipe)&&HV(e.readable)&&!MD(e),GV=e=>zi(e)&&jn(e.clear)&&jn(e.bytes)&&jn(e.position)&&jn(e.setPosition)&&jn(e.capacity)&&jn(e.getBufferIdentifier)&&jn(e.createLong),FI=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function XV(e){const t=e[0]?[e[0]]:[];let n,r,i,s;for(let o,a,l=0,c=0,u=e.length;++l<u;){if(o=t[c],a=e[l],!o||!a||o.buffer!==a.buffer||a.byteOffset<o.byteOffset){a&&(t[++c]=a);continue}if({byteOffset:n,byteLength:i}=o,{byteOffset:r,byteLength:s}=a,n+i<r||r+s<n){a&&(t[++c]=a);continue}t[c]=new Uint8Array(o.buffer,n,r-n+s)}return t}function tM(e,t,n=0,r=t.byteLength){const i=e.byteLength,s=new Uint8Array(e.buffer,e.byteOffset,i),o=new Uint8Array(t.buffer,t.byteOffset,Math.min(r,i));return s.set(o,n),e}function Rs(e,t){const n=XV(e),r=n.reduce((u,f)=>u+f.byteLength,0);let i,s,o,a=0,l=-1;const c=Math.min(t||Number.POSITIVE_INFINITY,r);for(const u=n.length;++l<u;){if(i=n[l],s=i.subarray(0,Math.min(i.length,c-a)),c<=a+s.length){s.length<i.length?n[l]=i.subarray(s.length):s.length===i.length&&l++,o?tM(o,s,a):o=s;break}tM(o||(o=new Uint8Array(c)),s,a),a+=s.length}return[o||new Uint8Array(0),n.slice(l),r-(o?o.byteLength:0)]}function ye(e,t){let n=TD(t)?t.value:t;return n instanceof e?e===Uint8Array?new e(n.buffer,n.byteOffset,n.byteLength):n:n?(typeof n=="string"&&(n=kI(n)),n instanceof ArrayBuffer?new e(n):n instanceof FI?new e(n):GV(n)?ye(e,n.bytes()):ArrayBuffer.isView(n)?n.byteLength<=0?new e(0):new e(n.buffer,n.byteOffset,n.byteLength/e.BYTES_PER_ELEMENT):e.from(n)):new e(0)}const Nd=e=>ye(Int32Array,e),re=e=>ye(Uint8Array,e),F2=e=>(e.next(),e);function*QV(e,t){const n=function*(i){yield i},r=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof FI?n(t):Fb(t)?t:n(t);return yield*F2(function*(i){let s=null;do s=i.next(yield ye(e,s));while(!s.done)}(r[Symbol.iterator]())),new e}const KV=e=>QV(Uint8Array,e);function ND(e,t){return nn(this,arguments,function*(){if(Jh(t))return yield K(yield K(yield*$a(Br(ND(e,yield K(t))))));const r=function(o){return nn(this,arguments,function*(){yield yield K(yield K(o))})},i=function(o){return nn(this,arguments,function*(){yield K(yield*$a(Br(F2(function*(a){let l=null;do l=a.next(yield l==null?void 0:l.value);while(!l.done)}(o[Symbol.iterator]())))))})},s=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof FI?r(t):Fb(t)?i(t):DI(t)?t:r(t);return yield K(yield*$a(Br(F2(function(o){return nn(this,arguments,function*(){let a=null;do a=yield K(o.next(yield yield K(ye(e,a))));while(!a.done)})}(s[Symbol.asyncIterator]()))))),yield K(new e)})}const ZV=e=>ND(Uint8Array,e);function JV(e,t){let n=0;const r=e.length;if(r!==t.length)return!1;if(r>0)do if(e[n]!==t[n])return!1;while(++n<r);return!0}const Kr={fromIterable(e){return i0(tY(e))},fromAsyncIterable(e){return i0(eY(e))},fromDOMStream(e){return i0(nY(e))},fromNodeStream(e){return i0(iY(e))},toDOMStream(e,t){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(e,t){throw new Error('"toNodeStream" not available in this environment')}},i0=e=>(e.next(),e);function*tY(e){let t,n=!1,r=[],i,s,o,a=0;function l(){return s==="peek"?Rs(r,o)[0]:([i,r,a]=Rs(r,o),i)}({cmd:s,size:o}=yield null);const c=KV(e)[Symbol.iterator]();try{do if({done:t,value:i}=Number.isNaN(o-a)?c.next():c.next(o-a),!t&&i.byteLength>0&&(r.push(i),a+=i.byteLength),t||o<=a)do({cmd:s,size:o}=yield l());while(o<a);while(!t)}catch(u){(n=!0)&&typeof c.throw=="function"&&c.throw(u)}finally{n===!1&&typeof c.return=="function"&&c.return(null)}return null}function eY(e){return nn(this,arguments,function*(){let n,r=!1,i=[],s,o,a,l=0;function c(){return o==="peek"?Rs(i,a)[0]:([s,i,l]=Rs(i,a),s)}({cmd:o,size:a}=yield yield K(null));const u=ZV(e)[Symbol.asyncIterator]();try{do if({done:n,value:s}=Number.isNaN(a-l)?yield K(u.next()):yield K(u.next(a-l)),!n&&s.byteLength>0&&(i.push(s),l+=s.byteLength),n||a<=l)do({cmd:o,size:a}=yield yield K(c()));while(a<l);while(!n)}catch(f){(r=!0)&&typeof u.throw=="function"&&(yield K(u.throw(f)))}finally{r===!1&&typeof u.return=="function"&&(yield K(u.return(new Uint8Array(0))))}return yield K(null)})}function nY(e){return nn(this,arguments,function*(){let n=!1,r=!1,i=[],s,o,a,l=0;function c(){return o==="peek"?Rs(i,a)[0]:([s,i,l]=Rs(i,a),s)}({cmd:o,size:a}=yield yield K(null));const u=new rY(e);try{do if({done:n,value:s}=Number.isNaN(a-l)?yield K(u.read()):yield K(u.read(a-l)),!n&&s.byteLength>0&&(i.push(re(s)),l+=s.byteLength),n||a<=l)do({cmd:o,size:a}=yield yield K(c()));while(a<l);while(!n)}catch(f){(r=!0)&&(yield K(u.cancel(f)))}finally{r===!1?yield K(u.cancel()):e.locked&&u.releaseLock()}return yield K(null)})}let rY=class{constructor(t){this.source=t,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(t){return W(this,void 0,void 0,function*(){const{reader:n,source:r}=this;n&&(yield n.cancel(t).catch(()=>{})),r&&r.locked&&this.releaseLock()})}read(t){return W(this,void 0,void 0,function*(){if(t===0)return{done:this.reader==null,value:new Uint8Array(0)};const n=yield this.reader.read();return!n.done&&(n.value=re(n)),n})}};const xw=(e,t)=>{const n=i=>r([t,i]);let r;return[t,n,new Promise(i=>(r=i)&&e.once(t,n))]};function iY(e){return nn(this,arguments,function*(){const n=[];let r="error",i=!1,s=null,o,a,l=0,c=[],u;function f(){return o==="peek"?Rs(c,a)[0]:([u,c,l]=Rs(c,a),u)}if({cmd:o,size:a}=yield yield K(null),e.isTTY)return yield yield K(new Uint8Array(0)),yield K(null);try{n[0]=xw(e,"end"),n[1]=xw(e,"error");do{if(n[2]=xw(e,"readable"),[r,s]=yield K(Promise.race(n.map(h=>h[2]))),r==="error")break;if((i=r==="end")||(Number.isFinite(a-l)?(u=re(e.read(a-l)),u.byteLength<a-l&&(u=re(e.read()))):u=re(e.read()),u.byteLength>0&&(c.push(u),l+=u.byteLength)),i||a<=l)do({cmd:o,size:a}=yield yield K(f()));while(a<l)}while(!i)}finally{yield K(d(n,r==="error"?s:null))}return yield K(null);function d(h,p){return u=c=null,new Promise((g,v)=>{for(const[y,m]of h)e.off(y,m);try{const y=e.destroy;y&&y.call(e,p),p=void 0}catch(y){p=y||p}finally{p!=null?v(p):g()}})}})}var ri;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(ri||(ri={}));var ji;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(ji||(ji={}));var hr;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(hr||(hr={}));var Bo;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(Bo||(Bo={}));var te;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(te||(te={}));var Oa;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(Oa||(Oa={}));var fe;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(fe||(fe={}));var U;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.Float=3]="Float",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct=13]="Struct",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Dictionary=-1]="Dictionary",e[e.Int8=-2]="Int8",e[e.Int16=-3]="Int16",e[e.Int32=-4]="Int32",e[e.Int64=-5]="Int64",e[e.Uint8=-6]="Uint8",e[e.Uint16=-7]="Uint16",e[e.Uint32=-8]="Uint32",e[e.Uint64=-9]="Uint64",e[e.Float16=-10]="Float16",e[e.Float32=-11]="Float32",e[e.Float64=-12]="Float64",e[e.DateDay=-13]="DateDay",e[e.DateMillisecond=-14]="DateMillisecond",e[e.TimestampSecond=-15]="TimestampSecond",e[e.TimestampMillisecond=-16]="TimestampMillisecond",e[e.TimestampMicrosecond=-17]="TimestampMicrosecond",e[e.TimestampNanosecond=-18]="TimestampNanosecond",e[e.TimeSecond=-19]="TimeSecond",e[e.TimeMillisecond=-20]="TimeMillisecond",e[e.TimeMicrosecond=-21]="TimeMicrosecond",e[e.TimeNanosecond=-22]="TimeNanosecond",e[e.DenseUnion=-23]="DenseUnion",e[e.SparseUnion=-24]="SparseUnion",e[e.IntervalDayTime=-25]="IntervalDayTime",e[e.IntervalYearMonth=-26]="IntervalYearMonth"})(U||(U={}));var oo;(function(e){e[e.OFFSET=0]="OFFSET",e[e.DATA=1]="DATA",e[e.VALIDITY=2]="VALIDITY",e[e.TYPE=3]="TYPE"})(oo||(oo={}));const sY=void 0;function tp(e){if(e===null)return"null";if(e===sY)return"undefined";switch(typeof e){case"number":return`${e}`;case"bigint":return`${e}`;case"string":return`"${e}"`}return typeof e[Symbol.toPrimitive]=="function"?e[Symbol.toPrimitive]("string"):ArrayBuffer.isView(e)?e instanceof qp||e instanceof Wp?`[${[...e].map(t=>tp(t))}]`:`[${e}]`:ArrayBuffer.isView(e)?`[${e}]`:JSON.stringify(e,(t,n)=>typeof n=="bigint"?`${n}`:n)}const oY=Symbol.for("isArrowBigNum");function Qi(e,...t){return t.length===0?Object.setPrototypeOf(ye(this.TypedArray,e),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(e,...t),this.constructor.prototype)}Qi.prototype[oY]=!0;Qi.prototype.toJSON=function(){return`"${ec(this)}"`};Qi.prototype.valueOf=function(){return kD(this)};Qi.prototype.toString=function(){return ec(this)};Qi.prototype[Symbol.toPrimitive]=function(e="default"){switch(e){case"number":return kD(this);case"string":return ec(this);case"default":return B2(this)}return ec(this)};function Vu(...e){return Qi.apply(this,e)}function Yu(...e){return Qi.apply(this,e)}function ep(...e){return Qi.apply(this,e)}Object.setPrototypeOf(Vu.prototype,Object.create(Int32Array.prototype));Object.setPrototypeOf(Yu.prototype,Object.create(Uint32Array.prototype));Object.setPrototypeOf(ep.prototype,Object.create(Uint32Array.prototype));Object.assign(Vu.prototype,Qi.prototype,{constructor:Vu,signed:!0,TypedArray:Int32Array,BigIntArray:qp});Object.assign(Yu.prototype,Qi.prototype,{constructor:Yu,signed:!1,TypedArray:Uint32Array,BigIntArray:Wp});Object.assign(ep.prototype,Qi.prototype,{constructor:ep,signed:!0,TypedArray:Uint32Array,BigIntArray:Wp});function kD(e){const{buffer:t,byteOffset:n,length:r,signed:i}=e,s=new Wp(t,n,r),o=i&&s[s.length-1]&BigInt(1)<<BigInt(63);let a=BigInt(o?1:0),l=BigInt(0);if(o){for(const c of s)a+=~c*(BigInt(1)<<BigInt(32)*l++);a*=BigInt(-1)}else for(const c of s)a+=c*(BigInt(1)<<BigInt(32)*l++);return a}let ec,B2;qV?(B2=e=>e.byteLength===8?new e.BigIntArray(e.buffer,e.byteOffset,1)[0]:Iw(e),ec=e=>e.byteLength===8?`${new e.BigIntArray(e.buffer,e.byteOffset,1)[0]}`:Iw(e)):(ec=Iw,B2=ec);function Iw(e){let t="";const n=new Uint32Array(2);let r=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);const i=new Uint32Array((r=new Uint16Array(r).reverse()).buffer);let s=-1;const o=r.length-1;do{for(n[0]=r[s=0];s<o;)r[s++]=n[1]=n[0]/10,n[0]=(n[0]-n[1]*10<<16)+r[s];r[s]=n[1]=n[0]/10,n[0]=n[0]-n[1]*10,t=`${n[0]}${t}`}while(i[0]||i[1]||i[2]||i[3]);return t??"0"}let aY=class DD{static new(t,n){switch(n){case!0:return new Vu(t);case!1:return new Yu(t)}switch(t.constructor){case Int8Array:case Int16Array:case Int32Array:case qp:return new Vu(t)}return t.byteLength===16?new ep(t):new Yu(t)}static signed(t){return new Vu(t)}static unsigned(t){return new Yu(t)}static decimal(t){return new ep(t)}constructor(t,n){return DD.new(t,n)}};var OD,FD,BD,RD,LD,CD,UD,PD,zD,jD,VD,YD,qD,WD,HD,GD,XD,QD,KD;let Bt=class R2{static isNull(t){return(t==null?void 0:t.typeId)===U.Null}static isInt(t){return(t==null?void 0:t.typeId)===U.Int}static isFloat(t){return(t==null?void 0:t.typeId)===U.Float}static isBinary(t){return(t==null?void 0:t.typeId)===U.Binary}static isUtf8(t){return(t==null?void 0:t.typeId)===U.Utf8}static isBool(t){return(t==null?void 0:t.typeId)===U.Bool}static isDecimal(t){return(t==null?void 0:t.typeId)===U.Decimal}static isDate(t){return(t==null?void 0:t.typeId)===U.Date}static isTime(t){return(t==null?void 0:t.typeId)===U.Time}static isTimestamp(t){return(t==null?void 0:t.typeId)===U.Timestamp}static isInterval(t){return(t==null?void 0:t.typeId)===U.Interval}static isList(t){return(t==null?void 0:t.typeId)===U.List}static isStruct(t){return(t==null?void 0:t.typeId)===U.Struct}static isUnion(t){return(t==null?void 0:t.typeId)===U.Union}static isFixedSizeBinary(t){return(t==null?void 0:t.typeId)===U.FixedSizeBinary}static isFixedSizeList(t){return(t==null?void 0:t.typeId)===U.FixedSizeList}static isMap(t){return(t==null?void 0:t.typeId)===U.Map}static isDictionary(t){return(t==null?void 0:t.typeId)===U.Dictionary}static isDenseUnion(t){return R2.isUnion(t)&&t.mode===ji.Dense}static isSparseUnion(t){return R2.isUnion(t)&&t.mode===ji.Sparse}get typeId(){return U.NONE}};OD=Symbol.toStringTag;Bt[OD]=(e=>(e.children=null,e.ArrayType=Array,e[Symbol.toStringTag]="DataType"))(Bt.prototype);let Fa=class extends Bt{toString(){return"Null"}get typeId(){return U.Null}};FD=Symbol.toStringTag;Fa[FD]=(e=>e[Symbol.toStringTag]="Null")(Fa.prototype);let Ba=class extends Bt{constructor(t,n){super(),this.isSigned=t,this.bitWidth=n}get typeId(){return U.Int}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?qp:Wp}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}};BD=Symbol.toStringTag;Ba[BD]=(e=>(e.isSigned=null,e.bitWidth=null,e[Symbol.toStringTag]="Int"))(Ba.prototype);let np=class extends Ba{constructor(){super(!0,32)}get ArrayType(){return Int32Array}};Object.defineProperty(np.prototype,"ArrayType",{value:Int32Array});let rp=class extends Bt{constructor(t){super(),this.precision=t}get typeId(){return U.Float}get ArrayType(){switch(this.precision){case hr.HALF:return Uint16Array;case hr.SINGLE:return Float32Array;case hr.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}};RD=Symbol.toStringTag;rp[RD]=(e=>(e.precision=null,e[Symbol.toStringTag]="Float"))(rp.prototype);let Zm=class extends Bt{constructor(){super()}get typeId(){return U.Binary}toString(){return"Binary"}};LD=Symbol.toStringTag;Zm[LD]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Binary"))(Zm.prototype);let Jm=class extends Bt{constructor(){super()}get typeId(){return U.Utf8}toString(){return"Utf8"}};CD=Symbol.toStringTag;Jm[CD]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Utf8"))(Jm.prototype);let tg=class extends Bt{constructor(){super()}get typeId(){return U.Bool}toString(){return"Bool"}};UD=Symbol.toStringTag;tg[UD]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Bool"))(tg.prototype);let eg=class extends Bt{constructor(t,n,r=128){super(),this.scale=t,this.precision=n,this.bitWidth=r}get typeId(){return U.Decimal}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}};PD=Symbol.toStringTag;eg[PD]=(e=>(e.scale=null,e.precision=null,e.ArrayType=Uint32Array,e[Symbol.toStringTag]="Decimal"))(eg.prototype);let ng=class extends Bt{constructor(t){super(),this.unit=t}get typeId(){return U.Date}toString(){return`Date${(this.unit+1)*32}<${Bo[this.unit]}>`}};zD=Symbol.toStringTag;ng[zD]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Date"))(ng.prototype);let ip=class extends Bt{constructor(t,n){super(),this.unit=t,this.bitWidth=n}get typeId(){return U.Time}toString(){return`Time${this.bitWidth}<${te[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return qp}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}};jD=Symbol.toStringTag;ip[jD]=(e=>(e.unit=null,e.bitWidth=null,e[Symbol.toStringTag]="Time"))(ip.prototype);let rg=class extends Bt{constructor(t,n){super(),this.unit=t,this.timezone=n}get typeId(){return U.Timestamp}toString(){return`Timestamp<${te[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}};VD=Symbol.toStringTag;rg[VD]=(e=>(e.unit=null,e.timezone=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Timestamp"))(rg.prototype);let ig=class extends Bt{constructor(t){super(),this.unit=t}get typeId(){return U.Interval}toString(){return`Interval<${Oa[this.unit]}>`}};YD=Symbol.toStringTag;ig[YD]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Interval"))(ig.prototype);let sg=class extends Bt{constructor(t){super(),this.children=[t]}get typeId(){return U.List}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}};qD=Symbol.toStringTag;sg[qD]=(e=>(e.children=null,e[Symbol.toStringTag]="List"))(sg.prototype);let Wn=class extends Bt{constructor(t){super(),this.children=t}get typeId(){return U.Struct}toString(){return`Struct<{${this.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}};WD=Symbol.toStringTag;Wn[WD]=(e=>(e.children=null,e[Symbol.toStringTag]="Struct"))(Wn.prototype);let og=class extends Bt{constructor(t,n,r){super(),this.mode=t,this.children=r,this.typeIds=n=Int32Array.from(n),this.typeIdToChildIndex=n.reduce((i,s,o)=>(i[s]=o)&&i||i,Object.create(null))}get typeId(){return U.Union}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(t=>`${t.type}`).join(" | ")}>`}};HD=Symbol.toStringTag;og[HD]=(e=>(e.mode=null,e.typeIds=null,e.children=null,e.typeIdToChildIndex=null,e.ArrayType=Int8Array,e[Symbol.toStringTag]="Union"))(og.prototype);let ag=class extends Bt{constructor(t){super(),this.byteWidth=t}get typeId(){return U.FixedSizeBinary}toString(){return`FixedSizeBinary[${this.byteWidth}]`}};GD=Symbol.toStringTag;ag[GD]=(e=>(e.byteWidth=null,e.ArrayType=Uint8Array,e[Symbol.toStringTag]="FixedSizeBinary"))(ag.prototype);let lg=class extends Bt{constructor(t,n){super(),this.listSize=t,this.children=[n]}get typeId(){return U.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}};XD=Symbol.toStringTag;lg[XD]=(e=>(e.children=null,e.listSize=null,e[Symbol.toStringTag]="FixedSizeList"))(lg.prototype);let cg=class extends Bt{constructor(t,n=!1){super(),this.children=[t],this.keysSorted=n}get typeId(){return U.Map}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}};QD=Symbol.toStringTag;cg[QD]=(e=>(e.children=null,e.keysSorted=null,e[Symbol.toStringTag]="Map_"))(cg.prototype);const lY=(e=>()=>++e)(-1);let gf=class extends Bt{constructor(t,n,r,i){super(),this.indices=n,this.dictionary=t,this.isOrdered=i||!1,this.id=r==null?lY():typeof r=="number"?r:r.low}get typeId(){return U.Dictionary}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}};KD=Symbol.toStringTag;gf[KD]=(e=>(e.id=null,e.indices=null,e.isOrdered=null,e.dictionary=null,e[Symbol.toStringTag]="Dictionary"))(gf.prototype);function ao(e){const t=e;switch(e.typeId){case U.Decimal:return e.bitWidth/32;case U.Timestamp:return 2;case U.Date:return 1+t.unit;case U.Interval:return 1+t.unit;case U.FixedSizeList:return t.listSize;case U.FixedSizeBinary:return t.byteWidth;default:return 1}}let Wt=class{visitMany(t,...n){return t.map((r,i)=>this.visit(r,...n.map(s=>s[i])))}visit(...t){return this.getVisitFn(t[0],!1).apply(this,t)}getVisitFn(t,n=!0){return cY(this,t,n)}getVisitFnByTypeId(t,n=!0){return Zc(this,t,n)}visitNull(t,...n){return null}visitBool(t,...n){return null}visitInt(t,...n){return null}visitFloat(t,...n){return null}visitUtf8(t,...n){return null}visitBinary(t,...n){return null}visitFixedSizeBinary(t,...n){return null}visitDate(t,...n){return null}visitTimestamp(t,...n){return null}visitTime(t,...n){return null}visitDecimal(t,...n){return null}visitList(t,...n){return null}visitStruct(t,...n){return null}visitUnion(t,...n){return null}visitDictionary(t,...n){return null}visitInterval(t,...n){return null}visitFixedSizeList(t,...n){return null}visitMap(t,...n){return null}};function cY(e,t,n=!0){return typeof t=="number"?Zc(e,t,n):typeof t=="string"&&t in U?Zc(e,U[t],n):t&&t instanceof Bt?Zc(e,eM(t),n):t!=null&&t.type&&t.type instanceof Bt?Zc(e,eM(t.type),n):Zc(e,U.NONE,n)}function Zc(e,t,n=!0){let r=null;switch(t){case U.Null:r=e.visitNull;break;case U.Bool:r=e.visitBool;break;case U.Int:r=e.visitInt;break;case U.Int8:r=e.visitInt8||e.visitInt;break;case U.Int16:r=e.visitInt16||e.visitInt;break;case U.Int32:r=e.visitInt32||e.visitInt;break;case U.Int64:r=e.visitInt64||e.visitInt;break;case U.Uint8:r=e.visitUint8||e.visitInt;break;case U.Uint16:r=e.visitUint16||e.visitInt;break;case U.Uint32:r=e.visitUint32||e.visitInt;break;case U.Uint64:r=e.visitUint64||e.visitInt;break;case U.Float:r=e.visitFloat;break;case U.Float16:r=e.visitFloat16||e.visitFloat;break;case U.Float32:r=e.visitFloat32||e.visitFloat;break;case U.Float64:r=e.visitFloat64||e.visitFloat;break;case U.Utf8:r=e.visitUtf8;break;case U.Binary:r=e.visitBinary;break;case U.FixedSizeBinary:r=e.visitFixedSizeBinary;break;case U.Date:r=e.visitDate;break;case U.DateDay:r=e.visitDateDay||e.visitDate;break;case U.DateMillisecond:r=e.visitDateMillisecond||e.visitDate;break;case U.Timestamp:r=e.visitTimestamp;break;case U.TimestampSecond:r=e.visitTimestampSecond||e.visitTimestamp;break;case U.TimestampMillisecond:r=e.visitTimestampMillisecond||e.visitTimestamp;break;case U.TimestampMicrosecond:r=e.visitTimestampMicrosecond||e.visitTimestamp;break;case U.TimestampNanosecond:r=e.visitTimestampNanosecond||e.visitTimestamp;break;case U.Time:r=e.visitTime;break;case U.TimeSecond:r=e.visitTimeSecond||e.visitTime;break;case U.TimeMillisecond:r=e.visitTimeMillisecond||e.visitTime;break;case U.TimeMicrosecond:r=e.visitTimeMicrosecond||e.visitTime;break;case U.TimeNanosecond:r=e.visitTimeNanosecond||e.visitTime;break;case U.Decimal:r=e.visitDecimal;break;case U.List:r=e.visitList;break;case U.Struct:r=e.visitStruct;break;case U.Union:r=e.visitUnion;break;case U.DenseUnion:r=e.visitDenseUnion||e.visitUnion;break;case U.SparseUnion:r=e.visitSparseUnion||e.visitUnion;break;case U.Dictionary:r=e.visitDictionary;break;case U.Interval:r=e.visitInterval;break;case U.IntervalDayTime:r=e.visitIntervalDayTime||e.visitInterval;break;case U.IntervalYearMonth:r=e.visitIntervalYearMonth||e.visitInterval;break;case U.FixedSizeList:r=e.visitFixedSizeList;break;case U.Map:r=e.visitMap;break}if(typeof r=="function")return r;if(!n)return()=>null;throw new Error(`Unrecognized type '${U[t]}'`)}function eM(e){switch(e.typeId){case U.Null:return U.Null;case U.Int:{const{bitWidth:t,isSigned:n}=e;switch(t){case 8:return n?U.Int8:U.Uint8;case 16:return n?U.Int16:U.Uint16;case 32:return n?U.Int32:U.Uint32;case 64:return n?U.Int64:U.Uint64}return U.Int}case U.Float:switch(e.precision){case hr.HALF:return U.Float16;case hr.SINGLE:return U.Float32;case hr.DOUBLE:return U.Float64}return U.Float;case U.Binary:return U.Binary;case U.Utf8:return U.Utf8;case U.Bool:return U.Bool;case U.Decimal:return U.Decimal;case U.Time:switch(e.unit){case te.SECOND:return U.TimeSecond;case te.MILLISECOND:return U.TimeMillisecond;case te.MICROSECOND:return U.TimeMicrosecond;case te.NANOSECOND:return U.TimeNanosecond}return U.Time;case U.Timestamp:switch(e.unit){case te.SECOND:return U.TimestampSecond;case te.MILLISECOND:return U.TimestampMillisecond;case te.MICROSECOND:return U.TimestampMicrosecond;case te.NANOSECOND:return U.TimestampNanosecond}return U.Timestamp;case U.Date:switch(e.unit){case Bo.DAY:return U.DateDay;case Bo.MILLISECOND:return U.DateMillisecond}return U.Date;case U.Interval:switch(e.unit){case Oa.DAY_TIME:return U.IntervalDayTime;case Oa.YEAR_MONTH:return U.IntervalYearMonth}return U.Interval;case U.Map:return U.Map;case U.List:return U.List;case U.Struct:return U.Struct;case U.Union:switch(e.mode){case ji.Dense:return U.DenseUnion;case ji.Sparse:return U.SparseUnion}return U.Union;case U.FixedSizeBinary:return U.FixedSizeBinary;case U.FixedSizeList:return U.FixedSizeList;case U.Dictionary:return U.Dictionary}throw new Error(`Unrecognized type '${U[e.typeId]}'`)}Wt.prototype.visitInt8=null;Wt.prototype.visitInt16=null;Wt.prototype.visitInt32=null;Wt.prototype.visitInt64=null;Wt.prototype.visitUint8=null;Wt.prototype.visitUint16=null;Wt.prototype.visitUint32=null;Wt.prototype.visitUint64=null;Wt.prototype.visitFloat16=null;Wt.prototype.visitFloat32=null;Wt.prototype.visitFloat64=null;Wt.prototype.visitDateDay=null;Wt.prototype.visitDateMillisecond=null;Wt.prototype.visitTimestampSecond=null;Wt.prototype.visitTimestampMillisecond=null;Wt.prototype.visitTimestampMicrosecond=null;Wt.prototype.visitTimestampNanosecond=null;Wt.prototype.visitTimeSecond=null;Wt.prototype.visitTimeMillisecond=null;Wt.prototype.visitTimeMicrosecond=null;Wt.prototype.visitTimeNanosecond=null;Wt.prototype.visitDenseUnion=null;Wt.prototype.visitSparseUnion=null;Wt.prototype.visitIntervalDayTime=null;Wt.prototype.visitIntervalYearMonth=null;const ZD=new Float64Array(1),Uc=new Uint32Array(ZD.buffer);function JD(e){const t=(e&31744)>>10,n=(e&1023)/1024,r=Math.pow(-1,(e&32768)>>15);switch(t){case 31:return r*(n?Number.NaN:1/0);case 0:return r*(n?6103515625e-14*n:0)}return r*Math.pow(2,t-15)*(1+n)}function uY(e){if(e!==e)return 32256;ZD[0]=e;const t=(Uc[1]&2147483648)>>16&65535;let n=Uc[1]&2146435072,r=0;return n>=1089470464?Uc[0]>0?n=31744:(n=(n&2080374784)>>16,r=(Uc[1]&1048575)>>10):n<=1056964608?(r=1048576+(Uc[1]&1048575),r=1048576+(r<<(n>>20)-998)>>21,n=0):(n=n-1056964608>>10,r=(Uc[1]&1048575)+512>>10),t|n|r&65535}let Mt=class extends Wt{};function kt(e){return(t,n,r)=>{if(t.setValid(n,r!=null))return e(t,n,r)}}const fY=(e,t,n)=>{e[t]=Math.trunc(n/864e5)},BI=(e,t,n)=>{e[t]=Math.trunc(n%4294967296),e[t+1]=Math.trunc(n/4294967296)},dY=(e,t,n)=>{e[t]=Math.trunc(n*1e3%4294967296),e[t+1]=Math.trunc(n*1e3/4294967296)},hY=(e,t,n)=>{e[t]=Math.trunc(n*1e6%4294967296),e[t+1]=Math.trunc(n*1e6/4294967296)},t8=(e,t,n,r)=>{if(n+1<t.length){const{[n]:i,[n+1]:s}=t;e.set(r.subarray(0,s-i),i)}},pY=({offset:e,values:t},n,r)=>{const i=e+n;r?t[i>>3]|=1<<i%8:t[i>>3]&=~(1<<i%8)},jo=({values:e},t,n)=>{e[t]=n},RI=({values:e},t,n)=>{e[t]=n},e8=({values:e},t,n)=>{e[t]=uY(n)},yY=(e,t,n)=>{switch(e.type.precision){case hr.HALF:return e8(e,t,n);case hr.SINGLE:case hr.DOUBLE:return RI(e,t,n)}},n8=({values:e},t,n)=>{fY(e,t,n.valueOf())},r8=({values:e},t,n)=>{BI(e,t*2,n.valueOf())},mY=({stride:e,values:t},n,r)=>{t.set(r.subarray(0,e),e*n)},gY=({values:e,valueOffsets:t},n,r)=>t8(e,t,n,r),bY=({values:e,valueOffsets:t},n,r)=>{t8(e,t,n,kI(r))},vY=(e,t,n)=>{e.type.unit===Bo.DAY?n8(e,t,n):r8(e,t,n)},i8=({values:e},t,n)=>BI(e,t*2,n/1e3),s8=({values:e},t,n)=>BI(e,t*2,n),o8=({values:e},t,n)=>dY(e,t*2,n),a8=({values:e},t,n)=>hY(e,t*2,n),wY=(e,t,n)=>{switch(e.type.unit){case te.SECOND:return i8(e,t,n);case te.MILLISECOND:return s8(e,t,n);case te.MICROSECOND:return o8(e,t,n);case te.NANOSECOND:return a8(e,t,n)}},l8=({values:e},t,n)=>{e[t]=n},c8=({values:e},t,n)=>{e[t]=n},u8=({values:e},t,n)=>{e[t]=n},f8=({values:e},t,n)=>{e[t]=n},_Y=(e,t,n)=>{switch(e.type.unit){case te.SECOND:return l8(e,t,n);case te.MILLISECOND:return c8(e,t,n);case te.MICROSECOND:return u8(e,t,n);case te.NANOSECOND:return f8(e,t,n)}},SY=({values:e,stride:t},n,r)=>{e.set(r.subarray(0,t),t*n)},xY=(e,t,n)=>{const r=e.children[0],i=e.valueOffsets,s=gi.getVisitFn(r);if(Array.isArray(n))for(let o=-1,a=i[t],l=i[t+1];a<l;)s(r,a++,n[++o]);else for(let o=-1,a=i[t],l=i[t+1];a<l;)s(r,a++,n.get(++o))},IY=(e,t,n)=>{const r=e.children[0],{valueOffsets:i}=e,s=gi.getVisitFn(r);let{[t]:o,[t+1]:a}=i;const l=n instanceof Map?n.entries():Object.entries(n);for(const c of l)if(s(r,o,c),++o>=a)break},TY=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[s]),EY=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(s)),AY=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(i.name)),MY=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[i.name]),$Y=(e,t,n)=>{const r=e.type.children.map(s=>gi.getVisitFn(s.type)),i=n instanceof Map?AY(t,n):n instanceof Ke?EY(t,n):Array.isArray(n)?TY(t,n):MY(t,n);e.type.children.forEach((s,o)=>i(r[o],e.children[o],s,o))},NY=(e,t,n)=>{e.type.mode===ji.Dense?d8(e,t,n):h8(e,t,n)},d8=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];gi.visit(i,e.valueOffsets[t],n)},h8=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];gi.visit(i,t,n)},kY=(e,t,n)=>{var r;(r=e.dictionary)===null||r===void 0||r.set(e.values[t],n)},DY=(e,t,n)=>{e.type.unit===Oa.DAY_TIME?p8(e,t,n):y8(e,t,n)},p8=({values:e},t,n)=>{e.set(n.subarray(0,2),2*t)},y8=({values:e},t,n)=>{e[t]=n[0]*12+n[1]%12},OY=(e,t,n)=>{const{stride:r}=e,i=e.children[0],s=gi.getVisitFn(i);if(Array.isArray(n))for(let o=-1,a=t*r;++o<r;)s(i,a+o,n[o]);else for(let o=-1,a=t*r;++o<r;)s(i,a+o,n.get(o))};Mt.prototype.visitBool=kt(pY);Mt.prototype.visitInt=kt(jo);Mt.prototype.visitInt8=kt(jo);Mt.prototype.visitInt16=kt(jo);Mt.prototype.visitInt32=kt(jo);Mt.prototype.visitInt64=kt(jo);Mt.prototype.visitUint8=kt(jo);Mt.prototype.visitUint16=kt(jo);Mt.prototype.visitUint32=kt(jo);Mt.prototype.visitUint64=kt(jo);Mt.prototype.visitFloat=kt(yY);Mt.prototype.visitFloat16=kt(e8);Mt.prototype.visitFloat32=kt(RI);Mt.prototype.visitFloat64=kt(RI);Mt.prototype.visitUtf8=kt(bY);Mt.prototype.visitBinary=kt(gY);Mt.prototype.visitFixedSizeBinary=kt(mY);Mt.prototype.visitDate=kt(vY);Mt.prototype.visitDateDay=kt(n8);Mt.prototype.visitDateMillisecond=kt(r8);Mt.prototype.visitTimestamp=kt(wY);Mt.prototype.visitTimestampSecond=kt(i8);Mt.prototype.visitTimestampMillisecond=kt(s8);Mt.prototype.visitTimestampMicrosecond=kt(o8);Mt.prototype.visitTimestampNanosecond=kt(a8);Mt.prototype.visitTime=kt(_Y);Mt.prototype.visitTimeSecond=kt(l8);Mt.prototype.visitTimeMillisecond=kt(c8);Mt.prototype.visitTimeMicrosecond=kt(u8);Mt.prototype.visitTimeNanosecond=kt(f8);Mt.prototype.visitDecimal=kt(SY);Mt.prototype.visitList=kt(xY);Mt.prototype.visitStruct=kt($Y);Mt.prototype.visitUnion=kt(NY);Mt.prototype.visitDenseUnion=kt(d8);Mt.prototype.visitSparseUnion=kt(h8);Mt.prototype.visitDictionary=kt(kY);Mt.prototype.visitInterval=kt(DY);Mt.prototype.visitIntervalDayTime=kt(p8);Mt.prototype.visitIntervalYearMonth=kt(y8);Mt.prototype.visitFixedSizeList=kt(OY);Mt.prototype.visitMap=kt(IY);const gi=new Mt,Mi=Symbol.for("parent"),qu=Symbol.for("rowIndex");let LI=class{constructor(t,n){return this[Mi]=t,this[qu]=n,new Proxy(this,new BY)}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[qu],n=this[Mi],r=n.type.children,i={};for(let s=-1,o=r.length;++s<o;)i[r[s].name]=gr.visit(n.children[s],t);return i}toString(){return`{${[...this].map(([t,n])=>`${tp(t)}: ${tp(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new FY(this[Mi],this[qu])}},FY=class{constructor(t,n){this.childIndex=0,this.children=t.children,this.rowIndex=n,this.childFields=t.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const t=this.childIndex;return t<this.numChildren?(this.childIndex=t+1,{done:!1,value:[this.childFields[t].name,gr.visit(this.children[t],this.rowIndex)]}):{done:!0,value:null}}};Object.defineProperties(LI.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[Mi]:{writable:!0,enumerable:!1,configurable:!1,value:null},[qu]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});let BY=class{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[Mi].type.children.map(n=>n.name)}has(t,n){return t[Mi].type.children.findIndex(r=>r.name===n)!==-1}getOwnPropertyDescriptor(t,n){if(t[Mi].type.children.findIndex(r=>r.name===n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[Mi].type.children.findIndex(i=>i.name===n);if(r!==-1){const i=gr.visit(t[Mi].children[r],t[qu]);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[Mi].type.children.findIndex(s=>s.name===n);return i!==-1?(gi.visit(t[Mi].children[i],t[qu],r),Reflect.set(t,n,r)):Reflect.has(t,n)||typeof n=="symbol"?Reflect.set(t,n,r):!1}},xt=class extends Wt{};function $t(e){return(t,n)=>t.getValid(n)?e(t,n):null}const RY=(e,t)=>864e5*e[t],CI=(e,t)=>4294967296*e[t+1]+(e[t]>>>0),LY=(e,t)=>4294967296*(e[t+1]/1e3)+(e[t]>>>0)/1e3,CY=(e,t)=>4294967296*(e[t+1]/1e6)+(e[t]>>>0)/1e6,m8=e=>new Date(e),UY=(e,t)=>m8(RY(e,t)),PY=(e,t)=>m8(CI(e,t)),zY=(e,t)=>null,g8=(e,t,n)=>{if(n+1>=t.length)return null;const r=t[n],i=t[n+1];return e.subarray(r,i)},jY=({offset:e,values:t},n)=>{const r=e+n;return(t[r>>3]&1<<r%8)!==0},b8=({values:e},t)=>UY(e,t),v8=({values:e},t)=>PY(e,t*2),rl=({stride:e,values:t},n)=>t[e*n],VY=({stride:e,values:t},n)=>JD(t[e*n]),w8=({values:e},t)=>e[t],YY=({stride:e,values:t},n)=>t.subarray(e*n,e*(n+1)),qY=({values:e,valueOffsets:t},n)=>g8(e,t,n),WY=({values:e,valueOffsets:t},n)=>{const r=g8(e,t,n);return r!==null?D2(r):null},HY=({values:e},t)=>e[t],GY=({type:e,values:t},n)=>e.precision!==hr.HALF?t[n]:JD(t[n]),XY=(e,t)=>e.type.unit===Bo.DAY?b8(e,t):v8(e,t),_8=({values:e},t)=>1e3*CI(e,t*2),S8=({values:e},t)=>CI(e,t*2),x8=({values:e},t)=>LY(e,t*2),I8=({values:e},t)=>CY(e,t*2),QY=(e,t)=>{switch(e.type.unit){case te.SECOND:return _8(e,t);case te.MILLISECOND:return S8(e,t);case te.MICROSECOND:return x8(e,t);case te.NANOSECOND:return I8(e,t)}},T8=({values:e},t)=>e[t],E8=({values:e},t)=>e[t],A8=({values:e},t)=>e[t],M8=({values:e},t)=>e[t],KY=(e,t)=>{switch(e.type.unit){case te.SECOND:return T8(e,t);case te.MILLISECOND:return E8(e,t);case te.MICROSECOND:return A8(e,t);case te.NANOSECOND:return M8(e,t)}},ZY=({values:e,stride:t},n)=>aY.decimal(e.subarray(t*n,t*(n+1))),JY=(e,t)=>{const{valueOffsets:n,stride:r,children:i}=e,{[t*r]:s,[t*r+1]:o}=n,l=i[0].slice(s,o-s);return new Ke([l])},tq=(e,t)=>{const{valueOffsets:n,children:r}=e,{[t]:i,[t+1]:s}=n,o=r[0];return new UI(o.slice(i,s-i))},eq=(e,t)=>new LI(e,t),nq=(e,t)=>e.type.mode===ji.Dense?$8(e,t):N8(e,t),$8=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return gr.visit(r,e.valueOffsets[t])},N8=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return gr.visit(r,t)},rq=(e,t)=>{var n;return(n=e.dictionary)===null||n===void 0?void 0:n.get(e.values[t])},iq=(e,t)=>e.type.unit===Oa.DAY_TIME?k8(e,t):D8(e,t),k8=({values:e},t)=>e.subarray(2*t,2*(t+1)),D8=({values:e},t)=>{const n=e[t],r=new Int32Array(2);return r[0]=Math.trunc(n/12),r[1]=Math.trunc(n%12),r},sq=(e,t)=>{const{stride:n,children:r}=e,s=r[0].slice(t*n,n);return new Ke([s])};xt.prototype.visitNull=$t(zY);xt.prototype.visitBool=$t(jY);xt.prototype.visitInt=$t(HY);xt.prototype.visitInt8=$t(rl);xt.prototype.visitInt16=$t(rl);xt.prototype.visitInt32=$t(rl);xt.prototype.visitInt64=$t(w8);xt.prototype.visitUint8=$t(rl);xt.prototype.visitUint16=$t(rl);xt.prototype.visitUint32=$t(rl);xt.prototype.visitUint64=$t(w8);xt.prototype.visitFloat=$t(GY);xt.prototype.visitFloat16=$t(VY);xt.prototype.visitFloat32=$t(rl);xt.prototype.visitFloat64=$t(rl);xt.prototype.visitUtf8=$t(WY);xt.prototype.visitBinary=$t(qY);xt.prototype.visitFixedSizeBinary=$t(YY);xt.prototype.visitDate=$t(XY);xt.prototype.visitDateDay=$t(b8);xt.prototype.visitDateMillisecond=$t(v8);xt.prototype.visitTimestamp=$t(QY);xt.prototype.visitTimestampSecond=$t(_8);xt.prototype.visitTimestampMillisecond=$t(S8);xt.prototype.visitTimestampMicrosecond=$t(x8);xt.prototype.visitTimestampNanosecond=$t(I8);xt.prototype.visitTime=$t(KY);xt.prototype.visitTimeSecond=$t(T8);xt.prototype.visitTimeMillisecond=$t(E8);xt.prototype.visitTimeMicrosecond=$t(A8);xt.prototype.visitTimeNanosecond=$t(M8);xt.prototype.visitDecimal=$t(ZY);xt.prototype.visitList=$t(JY);xt.prototype.visitStruct=$t(eq);xt.prototype.visitUnion=$t(nq);xt.prototype.visitDenseUnion=$t($8);xt.prototype.visitSparseUnion=$t(N8);xt.prototype.visitDictionary=$t(rq);xt.prototype.visitInterval=$t(iq);xt.prototype.visitIntervalDayTime=$t(k8);xt.prototype.visitIntervalYearMonth=$t(D8);xt.prototype.visitFixedSizeList=$t(sq);xt.prototype.visitMap=$t(tq);const gr=new xt,ys=Symbol.for("keys"),Wu=Symbol.for("vals");let UI=class{constructor(t){return this[ys]=new Ke([t.children[0]]).memoize(),this[Wu]=t.children[1],new Proxy(this,new aq)}[Symbol.iterator](){return new oq(this[ys],this[Wu])}get size(){return this[ys].length}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[ys],n=this[Wu],r={};for(let i=-1,s=t.length;++i<s;)r[t.get(i)]=gr.visit(n,i);return r}toString(){return`{${[...this].map(([t,n])=>`${tp(t)}: ${tp(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}},oq=class{constructor(t,n){this.keys=t,this.vals=n,this.keyIndex=0,this.numKeys=t.length}[Symbol.iterator](){return this}next(){const t=this.keyIndex;return t===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(t),gr.visit(this.vals,t)]})}},aq=class{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[ys].toArray().map(String)}has(t,n){return t[ys].includes(n)}getOwnPropertyDescriptor(t,n){if(t[ys].indexOf(n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[ys].indexOf(n);if(r!==-1){const i=gr.visit(Reflect.get(t,Wu),r);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[ys].indexOf(n);return i!==-1?(gi.visit(Reflect.get(t,Wu),i,r),Reflect.set(t,n,r)):Reflect.has(t,n)?Reflect.set(t,n,r):!1}};Object.defineProperties(UI.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[ys]:{writable:!0,enumerable:!1,configurable:!1,value:null},[Wu]:{writable:!0,enumerable:!1,configurable:!1,value:null}});let nM;function O8(e,t,n,r){const{length:i=0}=e;let s=typeof t!="number"?0:t,o=typeof n!="number"?i:n;return s<0&&(s=(s%i+i)%i),o<0&&(o=(o%i+i)%i),o<s&&(nM=s,s=o,o=nM),o>i&&(o=i),r?r(e,s,o):[s,o]}const rM=e=>e!==e;function Jf(e){if(typeof e!=="object"||e===null)return rM(e)?rM:n=>n===e;if(e instanceof Date){const n=e.valueOf();return r=>r instanceof Date?r.valueOf()===n:!1}return ArrayBuffer.isView(e)?n=>n?JV(e,n):!1:e instanceof Map?cq(e):Array.isArray(e)?lq(e):e instanceof Ke?uq(e):fq(e,!0)}function lq(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=Jf(e[n]);return Bb(t)}function cq(e){let t=-1;const n=[];for(const r of e.values())n[++t]=Jf(r);return Bb(n)}function uq(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=Jf(e.get(n));return Bb(t)}function fq(e,t=!1){const n=Object.keys(e);if(!t&&n.length===0)return()=>!1;const r=[];for(let i=-1,s=n.length;++i<s;)r[i]=Jf(e[n[i]]);return Bb(r,n)}function Bb(e,t){return n=>{if(!n||typeof n!="object")return!1;switch(n.constructor){case Array:return dq(e,n);case Map:return iM(e,n,n.keys());case UI:case LI:case Object:case void 0:return iM(e,n,t||Object.keys(n))}return n instanceof Ke?hq(e,n):!1}}function dq(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t[r]))return!1;return!0}function hq(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t.get(r)))return!1;return!0}function iM(e,t,n){const r=n[Symbol.iterator](),i=t instanceof Map?t.keys():Object.keys(t)[Symbol.iterator](),s=t instanceof Map?t.values():Object.values(t)[Symbol.iterator]();let o=0;const a=e.length;let l=s.next(),c=r.next(),u=i.next();for(;o<a&&!c.done&&!u.done&&!l.done&&!(c.value!==u.value||!e[o](l.value));++o,c=r.next(),u=i.next(),l=s.next());return o===a&&c.done&&u.done&&l.done?!0:(r.return&&r.return(),i.return&&i.return(),s.return&&s.return(),!1)}function F8(e,t,n,r){return(n&1<<r)!==0}function pq(e,t,n,r){return(n&1<<r)>>r}function yq(e,t,n){const r=n.byteLength+7&-8;if(e>0||n.byteLength<r){const i=new Uint8Array(r);return i.set(e%8===0?n.subarray(e>>3):L2(new PI(n,e,t,null,F8)).subarray(0,r)),i}return n}function L2(e){const t=[];let n=0,r=0,i=0;for(const o of e)o&&(i|=1<<r),++r===8&&(t[n++]=i,i=r=0);(n===0||r>0)&&(t[n++]=i);const s=new Uint8Array(t.length+7&-8);return s.set(t),s}let PI=class{constructor(t,n,r,i,s){this.bytes=t,this.length=r,this.context=i,this.get=s,this.bit=n%8,this.byteIndex=n>>3,this.byte=t[this.byteIndex++],this.index=0}next(){return this.index<this.length?(this.bit===8&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}};function C2(e,t,n){if(n-t<=0)return 0;if(n-t<8){let s=0;for(const o of new PI(e,t,n-t,e,pq))s+=o;return s}const r=n>>3<<3,i=t+(t%8===0?0:8-t%8);return C2(e,t,i)+C2(e,r,n)+mq(e,i>>3,r-i>>3)}function mq(e,t,n){let r=0,i=Math.trunc(t);const s=new DataView(e.buffer,e.byteOffset,e.byteLength),o=n===void 0?e.byteLength:i+n;for(;o-i>=4;)r+=Tw(s.getUint32(i)),i+=4;for(;o-i>=2;)r+=Tw(s.getUint16(i)),i+=2;for(;o-i>=1;)r+=Tw(s.getUint8(i)),i+=1;return r}function Tw(e){let t=Math.trunc(e);return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),(t+(t>>>4)&252645135)*16843009>>>24}const gq=-1;let De=class U2{constructor(t,n,r,i,s,o=[],a){this.type=t,this.children=o,this.dictionary=a,this.offset=Math.floor(Math.max(n||0,0)),this.length=Math.floor(Math.max(r||0,0)),this._nullCount=Math.floor(Math.max(i||0,-1));let l;s instanceof U2?(this.stride=s.stride,this.values=s.values,this.typeIds=s.typeIds,this.nullBitmap=s.nullBitmap,this.valueOffsets=s.valueOffsets):(this.stride=ao(t),s&&((l=s[0])&&(this.valueOffsets=l),(l=s[1])&&(this.values=l),(l=s[2])&&(this.nullBitmap=l),(l=s[3])&&(this.typeIds=l))),this.nullable=this._nullCount!==0&&this.nullBitmap&&this.nullBitmap.byteLength>0}get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get byteLength(){let t=0;const{valueOffsets:n,values:r,nullBitmap:i,typeIds:s}=this;return n&&(t+=n.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),s&&(t+=s.byteLength),this.children.reduce((o,a)=>o+a.byteLength,t)}get nullCount(){let t=this._nullCount,n;return t<=gq&&(n=this.nullBitmap)&&(this._nullCount=t=this.length-C2(n,this.offset,this.offset+this.length)),t}getValid(t){if(this.nullable&&this.nullCount>0){const n=this.offset+t;return(this.nullBitmap[n>>3]&1<<n%8)!==0}return!0}setValid(t,n){if(!this.nullable)return n;if(!this.nullBitmap||this.nullBitmap.byteLength<=t>>3){const{nullBitmap:l}=this._changeLengthAndBackfillNullBitmap(this.length);Object.assign(this,{nullBitmap:l,_nullCount:0})}const{nullBitmap:r,offset:i}=this,s=i+t>>3,o=(i+t)%8,a=r[s]>>o&1;return n?a===0&&(r[s]|=1<<o,this._nullCount=this.nullCount+1):a===1&&(r[s]&=~(1<<o),this._nullCount=this.nullCount-1),n}clone(t=this.type,n=this.offset,r=this.length,i=this._nullCount,s=this,o=this.children){return new U2(t,n,r,i,s,o,this.dictionary)}slice(t,n){const{stride:r,typeId:i,children:s}=this,o=+(this._nullCount===0)-1,a=i===16?r:1,l=this._sliceBuffers(t,n,r,i);return this.clone(this.type,this.offset+t,n,o,l,s.length===0||this.valueOffsets?s:this._sliceChildren(s,a*t,a*n))}_changeLengthAndBackfillNullBitmap(t){if(this.typeId===U.Null)return this.clone(this.type,0,t,0);const{length:n,nullCount:r}=this,i=new Uint8Array((t+63&-64)>>3).fill(255,0,n>>3);i[n>>3]=(1<<n-(n&-8))-1,r>0&&i.set(yq(this.offset,n,this.nullBitmap),0);const s=this.buffers;return s[oo.VALIDITY]=i,this.clone(this.type,0,t,r+(t-n),s)}_sliceBuffers(t,n,r,i){let s;const{buffers:o}=this;return(s=o[oo.TYPE])&&(o[oo.TYPE]=s.subarray(t,t+n)),(s=o[oo.OFFSET])&&(o[oo.OFFSET]=s.subarray(t,t+n+1))||(s=o[oo.DATA])&&(o[oo.DATA]=i===6?s:s.subarray(r*t,r*(t+n))),o}_sliceChildren(t,n,r){return t.map(i=>i.slice(n,r))}};De.prototype.children=Object.freeze([]);let bq=class J0 extends Wt{visit(t){return this.getVisitFn(t.type).call(this,t)}visitNull(t){const{["type"]:n,["offset"]:r=0,["length"]:i=0}=t;return new De(n,r,i,0)}visitBool(t){const{["type"]:n,["offset"]:r=0}=t,i=re(t.nullBitmap),s=ye(n.ArrayType,t.data),{["length"]:o=s.length>>3,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new De(n,r,o,a,[void 0,s,i])}visitInt(t){const{["type"]:n,["offset"]:r=0}=t,i=re(t.nullBitmap),s=ye(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new De(n,r,o,a,[void 0,s,i])}visitFloat(t){const{["type"]:n,["offset"]:r=0}=t,i=re(t.nullBitmap),s=ye(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new De(n,r,o,a,[void 0,s,i])}visitUtf8(t){const{["type"]:n,["offset"]:r=0}=t,i=re(t.data),s=re(t.nullBitmap),o=Nd(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:l=t.nullBitmap?-1:0}=t;return new De(n,r,a,l,[o,i,s])}visitBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=re(t.data),s=re(t.nullBitmap),o=Nd(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:l=t.nullBitmap?-1:0}=t;return new De(n,r,a,l,[o,i,s])}visitFixedSizeBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=re(t.nullBitmap),s=ye(n.ArrayType,t.data),{["length"]:o=s.length/ao(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new De(n,r,o,a,[void 0,s,i])}visitDate(t){const{["type"]:n,["offset"]:r=0}=t,i=re(t.nullBitmap),s=ye(n.ArrayType,t.data),{["length"]:o=s.length/ao(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new De(n,r,o,a,[void 0,s,i])}visitTimestamp(t){const{["type"]:n,["offset"]:r=0}=t,i=re(t.nullBitmap),s=ye(n.ArrayType,t.data),{["length"]:o=s.length/ao(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new De(n,r,o,a,[void 0,s,i])}visitTime(t){const{["type"]:n,["offset"]:r=0}=t,i=re(t.nullBitmap),s=ye(n.ArrayType,t.data),{["length"]:o=s.length/ao(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new De(n,r,o,a,[void 0,s,i])}visitDecimal(t){const{["type"]:n,["offset"]:r=0}=t,i=re(t.nullBitmap),s=ye(n.ArrayType,t.data),{["length"]:o=s.length/ao(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new De(n,r,o,a,[void 0,s,i])}visitList(t){const{["type"]:n,["offset"]:r=0,["child"]:i}=t,s=re(t.nullBitmap),o=Nd(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:l=t.nullBitmap?-1:0}=t;return new De(n,r,a,l,[o,void 0,s],[i])}visitStruct(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=re(t.nullBitmap),{length:o=i.reduce((l,{length:c})=>Math.max(l,c),0),nullCount:a=t.nullBitmap?-1:0}=t;return new De(n,r,o,a,[void 0,void 0,s],i)}visitUnion(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=re(t.nullBitmap),o=ye(n.ArrayType,t.typeIds),{["length"]:a=o.length,["nullCount"]:l=t.nullBitmap?-1:0}=t;if(Bt.isSparseUnion(n))return new De(n,r,a,l,[void 0,void 0,s,o],i);const c=Nd(t.valueOffsets);return new De(n,r,a,l,[c,void 0,s,o],i)}visitDictionary(t){const{["type"]:n,["offset"]:r=0}=t,i=re(t.nullBitmap),s=ye(n.indices.ArrayType,t.data),{["dictionary"]:o=new Ke([new J0().visit({type:n.dictionary})])}=t,{["length"]:a=s.length,["nullCount"]:l=t.nullBitmap?-1:0}=t;return new De(n,r,a,l,[void 0,s,i],[],o)}visitInterval(t){const{["type"]:n,["offset"]:r=0}=t,i=re(t.nullBitmap),s=ye(n.ArrayType,t.data),{["length"]:o=s.length/ao(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new De(n,r,o,a,[void 0,s,i])}visitFixedSizeList(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new J0().visit({type:n.valueType})}=t,s=re(t.nullBitmap),{["length"]:o=i.length/ao(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new De(n,r,o,a,[void 0,void 0,s],[i])}visitMap(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new J0().visit({type:n.childType})}=t,s=re(t.nullBitmap),o=Nd(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:l=t.nullBitmap?-1:0}=t;return new De(n,r,a,l,[o,void 0,s],[i])}};function jt(e){return new bq().visit(e)}let sM=class{constructor(t=0,n){this.numChunks=t,this.getChunkIterator=n,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const t=this.chunkIterator.next();if(!t.done)return t;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}};function B8(e){return e.reduce((t,n)=>t+n.nullCount,0)}function R8(e){return e.reduce((t,n,r)=>(t[r+1]=t[r]+n.length,t),new Uint32Array(e.length+1))}function L8(e,t,n,r){const i=[];for(let s=-1,o=e.length;++s<o;){const a=e[s],l=t[s],{length:c}=a;if(l>=r)break;if(n>=l+c)continue;if(l>=n&&l+c<=r){i.push(a);continue}const u=Math.max(0,n-l),f=Math.min(r-l,c);i.push(a.slice(u,f-u))}return i.length===0&&i.push(e[0].slice(0,0)),i}function zI(e,t,n,r){let i=0,s=0,o=t.length-1;do{if(i>=o-1)return n<t[o]?r(e,i,n-t[i]):null;s=i+Math.trunc((o-i)*.5),n<t[s]?o=s:i=s}while(i<o)}function jI(e,t){return e.getValid(t)}function Hu(e){function t(n,r,i){return e(n[r],i)}return function(n){const r=this.data;return zI(r,this._offsets,n,t)}}function C8(e){let t;function n(r,i,s){return e(r[i],s,t)}return function(r,i){const s=this.data;t=i;const o=zI(s,this._offsets,r,n);return t=void 0,o}}function U8(e){let t;function n(r,i,s){let o=s,a=0,l=0;for(let c=i-1,u=r.length;++c<u;){const f=r[c];if(~(a=e(f,t,o)))return l+a;o=0,l+=f.length}return-1}return function(r,i){t=r;const s=this.data,o=typeof i!="number"?n(s,0,0):zI(s,this._offsets,i,n);return t=void 0,o}}let It=class extends Wt{};function vq(e,t){return t===null&&e.length>0?0:-1}function wq(e,t){const{nullBitmap:n}=e;if(!n||e.nullCount<=0)return-1;let r=0;for(const i of new PI(n,e.offset+(t||0),e.length,n,F8)){if(!i)return r;++r}return-1}function Ot(e,t,n){if(t===void 0)return-1;if(t===null)return wq(e,n);const r=gr.getVisitFn(e),i=Jf(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}function P8(e,t,n){const r=gr.getVisitFn(e),i=Jf(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}It.prototype.visitNull=vq;It.prototype.visitBool=Ot;It.prototype.visitInt=Ot;It.prototype.visitInt8=Ot;It.prototype.visitInt16=Ot;It.prototype.visitInt32=Ot;It.prototype.visitInt64=Ot;It.prototype.visitUint8=Ot;It.prototype.visitUint16=Ot;It.prototype.visitUint32=Ot;It.prototype.visitUint64=Ot;It.prototype.visitFloat=Ot;It.prototype.visitFloat16=Ot;It.prototype.visitFloat32=Ot;It.prototype.visitFloat64=Ot;It.prototype.visitUtf8=Ot;It.prototype.visitBinary=Ot;It.prototype.visitFixedSizeBinary=Ot;It.prototype.visitDate=Ot;It.prototype.visitDateDay=Ot;It.prototype.visitDateMillisecond=Ot;It.prototype.visitTimestamp=Ot;It.prototype.visitTimestampSecond=Ot;It.prototype.visitTimestampMillisecond=Ot;It.prototype.visitTimestampMicrosecond=Ot;It.prototype.visitTimestampNanosecond=Ot;It.prototype.visitTime=Ot;It.prototype.visitTimeSecond=Ot;It.prototype.visitTimeMillisecond=Ot;It.prototype.visitTimeMicrosecond=Ot;It.prototype.visitTimeNanosecond=Ot;It.prototype.visitDecimal=Ot;It.prototype.visitList=Ot;It.prototype.visitStruct=Ot;It.prototype.visitUnion=Ot;It.prototype.visitDenseUnion=P8;It.prototype.visitSparseUnion=P8;It.prototype.visitDictionary=Ot;It.prototype.visitInterval=Ot;It.prototype.visitIntervalDayTime=Ot;It.prototype.visitIntervalYearMonth=Ot;It.prototype.visitFixedSizeList=Ot;It.prototype.visitMap=Ot;const ug=new It;let Tt=class extends Wt{};function Nt(e){const{type:t}=e;if(e.nullCount===0&&e.stride===1&&(t.typeId===U.Timestamp||t instanceof Ba&&t.bitWidth!==64||t instanceof ip&&t.bitWidth!==64||t instanceof rp&&t.precision!==hr.HALF))return new sM(e.data.length,r=>{const i=e.data[r];return i.values.subarray(0,i.length)[Symbol.iterator]()});let n=0;return new sM(e.data.length,r=>{const s=e.data[r].length,o=e.slice(n,n+s);return n+=s,new _q(o)})}let _q=class{constructor(t){this.vector=t,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}};Tt.prototype.visitNull=Nt;Tt.prototype.visitBool=Nt;Tt.prototype.visitInt=Nt;Tt.prototype.visitInt8=Nt;Tt.prototype.visitInt16=Nt;Tt.prototype.visitInt32=Nt;Tt.prototype.visitInt64=Nt;Tt.prototype.visitUint8=Nt;Tt.prototype.visitUint16=Nt;Tt.prototype.visitUint32=Nt;Tt.prototype.visitUint64=Nt;Tt.prototype.visitFloat=Nt;Tt.prototype.visitFloat16=Nt;Tt.prototype.visitFloat32=Nt;Tt.prototype.visitFloat64=Nt;Tt.prototype.visitUtf8=Nt;Tt.prototype.visitBinary=Nt;Tt.prototype.visitFixedSizeBinary=Nt;Tt.prototype.visitDate=Nt;Tt.prototype.visitDateDay=Nt;Tt.prototype.visitDateMillisecond=Nt;Tt.prototype.visitTimestamp=Nt;Tt.prototype.visitTimestampSecond=Nt;Tt.prototype.visitTimestampMillisecond=Nt;Tt.prototype.visitTimestampMicrosecond=Nt;Tt.prototype.visitTimestampNanosecond=Nt;Tt.prototype.visitTime=Nt;Tt.prototype.visitTimeSecond=Nt;Tt.prototype.visitTimeMillisecond=Nt;Tt.prototype.visitTimeMicrosecond=Nt;Tt.prototype.visitTimeNanosecond=Nt;Tt.prototype.visitDecimal=Nt;Tt.prototype.visitList=Nt;Tt.prototype.visitStruct=Nt;Tt.prototype.visitUnion=Nt;Tt.prototype.visitDenseUnion=Nt;Tt.prototype.visitSparseUnion=Nt;Tt.prototype.visitDictionary=Nt;Tt.prototype.visitInterval=Nt;Tt.prototype.visitIntervalDayTime=Nt;Tt.prototype.visitIntervalYearMonth=Nt;Tt.prototype.visitFixedSizeList=Nt;Tt.prototype.visitMap=Nt;const VI=new Tt,Sq=(e,t)=>e+t;let il=class extends Wt{visitNull(t,n){return 0}visitInt(t,n){return t.type.bitWidth/8}visitFloat(t,n){return t.type.ArrayType.BYTES_PER_ELEMENT}visitBool(t,n){return 1/8}visitDecimal(t,n){return t.type.bitWidth/8}visitDate(t,n){return(t.type.unit+1)*4}visitTime(t,n){return t.type.bitWidth/8}visitTimestamp(t,n){return t.type.unit===te.SECOND?4:8}visitInterval(t,n){return(t.type.unit+1)*4}visitStruct(t,n){return t.children.reduce((r,i)=>r+Ls.visit(i,n),0)}visitFixedSizeBinary(t,n){return t.type.byteWidth}visitMap(t,n){return 8+t.children.reduce((r,i)=>r+Ls.visit(i,n),0)}visitDictionary(t,n){var r;return t.type.indices.bitWidth/8+(((r=t.dictionary)===null||r===void 0?void 0:r.getByteLength(t.values[n]))||0)}};const xq=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),Iq=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),Tq=({valueOffsets:e,stride:t,children:n},r)=>{const i=n[0],{[r*t]:s}=e,{[r*t+1]:o}=e,a=Ls.getVisitFn(i.type),l=i.slice(s,o-s);let c=8;for(let u=-1,f=o-s;++u<f;)c+=a(l,u);return c},Eq=({stride:e,children:t},n)=>{const r=t[0],i=r.slice(n*e,e),s=Ls.getVisitFn(r.type);let o=0;for(let a=-1,l=i.length;++a<l;)o+=s(i,a);return o},Aq=(e,t)=>e.type.mode===ji.Dense?z8(e,t):j8(e,t),z8=({type:e,children:t,typeIds:n,valueOffsets:r},i)=>{const s=e.typeIdToChildIndex[n[i]];return 8+Ls.visit(t[s],r[i])},j8=({children:e},t)=>4+Ls.visitMany(e,e.map(()=>t)).reduce(Sq,0);il.prototype.visitUtf8=xq;il.prototype.visitBinary=Iq;il.prototype.visitList=Tq;il.prototype.visitFixedSizeList=Eq;il.prototype.visitUnion=Aq;il.prototype.visitDenseUnion=z8;il.prototype.visitSparseUnion=j8;const Ls=new il;var V8;const Y8={},q8={};let Ke=class Sl{constructor(t){var n,r,i;const s=t[0]instanceof Sl?t.flatMap(a=>a.data):t;if(s.length===0||s.some(a=>!(a instanceof De)))throw new TypeError("Vector constructor expects an Array of Data instances.");const o=(n=s[0])===null||n===void 0?void 0:n.type;switch(s.length){case 0:this._offsets=[0];break;case 1:{const{get:a,set:l,indexOf:c,byteLength:u}=Y8[o.typeId],f=s[0];this.isValid=d=>jI(f,d),this.get=d=>a(f,d),this.set=(d,h)=>l(f,d,h),this.indexOf=d=>c(f,d),this.getByteLength=d=>u(f,d),this._offsets=[0,f.length];break}default:Object.setPrototypeOf(this,q8[o.typeId]),this._offsets=R8(s);break}this.data=s,this.type=o,this.stride=ao(o),this.numChildren=(i=(r=o.children)===null||r===void 0?void 0:r.length)!==null&&i!==void 0?i:0,this.length=this._offsets[this._offsets.length-1]}get byteLength(){return this._byteLength===-1&&(this._byteLength=this.data.reduce((t,n)=>t+n.byteLength,0)),this._byteLength}get nullCount(){return this._nullCount===-1&&(this._nullCount=B8(this.data)),this._nullCount}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${U[this.type.typeId]}Vector`}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}includes(t,n){return this.indexOf(t,n)>0}getByteLength(t){return 0}[Symbol.iterator](){return VI.visit(this)}concat(...t){return new Sl(this.data.concat(t.flatMap(n=>n.data).flat(Number.POSITIVE_INFINITY)))}slice(t,n){return new Sl(O8(this,t,n,({data:r,_offsets:i},s,o)=>L8(r,i,s,o)))}toJSON(){return[...this]}toArray(){const{type:t,data:n,length:r,stride:i,ArrayType:s}=this;switch(t.typeId){case U.Int:case U.Float:case U.Decimal:case U.Time:case U.Timestamp:switch(n.length){case 0:return new s;case 1:return n[0].values.subarray(0,r*i);default:return n.reduce((o,{values:a,length:l})=>(o.array.set(a.subarray(0,l*i),o.offset),o.offset+=l*i,o),{array:new s(r*i),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(t){var n;return this.getChildAt((n=this.type.children)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.numChildren?new Sl(this.data.map(({children:n})=>n[t])):null}get isMemoized(){return Bt.isDictionary(this.type)?this.data[0].dictionary.isMemoized:!1}memoize(){if(Bt.isDictionary(this.type)){const t=new oM(this.data[0].dictionary),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new Sl(n)}return new oM(this)}unmemoize(){if(Bt.isDictionary(this.type)&&this.isMemoized){const t=this.data[0].dictionary.unmemoize(),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new Sl(n)}return this}};V8=Symbol.toStringTag;Ke[V8]=(e=>{e.type=Bt.prototype,e.data=[],e.length=0,e.stride=1,e.numChildren=0,e._nullCount=-1,e._byteLength=-1,e._offsets=new Uint32Array([0]),e[Symbol.isConcatSpreadable]=!0;const t=Object.keys(U).map(n=>U[n]).filter(n=>typeof n=="number"&&n!==U.NONE);for(const n of t){const r=gr.getVisitFnByTypeId(n),i=gi.getVisitFnByTypeId(n),s=ug.getVisitFnByTypeId(n),o=Ls.getVisitFnByTypeId(n);Y8[n]={get:r,set:i,indexOf:s,byteLength:o},q8[n]=Object.create(e,{isValid:{value:Hu(jI)},get:{value:Hu(gr.getVisitFnByTypeId(n))},set:{value:C8(gi.getVisitFnByTypeId(n))},indexOf:{value:U8(ug.getVisitFnByTypeId(n))},getByteLength:{value:Hu(Ls.getVisitFnByTypeId(n))}})}return"Vector"})(Ke.prototype);let oM=class W8 extends Ke{constructor(t){super(t.data);const n=this.get,r=this.set,i=this.slice,s=new Array(this.length);Object.defineProperty(this,"get",{value(o){const a=s[o];if(a!==void 0)return a;const l=n.call(this,o);return s[o]=l,l}}),Object.defineProperty(this,"set",{value(o,a){r.call(this,o,a),s[o]=a}}),Object.defineProperty(this,"slice",{value:(o,a)=>new W8(i.call(this,o,a))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new Ke(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}},P2=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(t,n,r,i){return t.prep(8,24),t.writeInt64(i),t.pad(4),t.writeInt32(r),t.writeInt64(n),t.offset()}};const Ew=2,ms=4,yo=4,ge=4,oa=new Int32Array(2),aM=new Float32Array(oa.buffer),lM=new Float64Array(oa.buffer),s0=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;let Eo=class z2{constructor(t,n){this.low=t|0,this.high=n|0}static create(t,n){return t==0&&n==0?z2.ZERO:new z2(t,n)}toFloat64(){return(this.low>>>0)+this.high*4294967296}equals(t){return this.low==t.low&&this.high==t.high}};Eo.ZERO=new Eo(0,0);var j2;(function(e){e[e.UTF8_BYTES=1]="UTF8_BYTES",e[e.UTF16_STRING=2]="UTF16_STRING"})(j2||(j2={}));let bf=class H8{constructor(t){this.bytes_=t,this.position_=0}static allocate(t){return new H8(new Uint8Array(t))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(t){this.position_=t}capacity(){return this.bytes_.length}readInt8(t){return this.readUint8(t)<<24>>24}readUint8(t){return this.bytes_[t]}readInt16(t){return this.readUint16(t)<<16>>16}readUint16(t){return this.bytes_[t]|this.bytes_[t+1]<<8}readInt32(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}readUint32(t){return this.readInt32(t)>>>0}readInt64(t){return new Eo(this.readInt32(t),this.readInt32(t+4))}readUint64(t){return new Eo(this.readUint32(t),this.readUint32(t+4))}readFloat32(t){return oa[0]=this.readInt32(t),aM[0]}readFloat64(t){return oa[s0?0:1]=this.readInt32(t),oa[s0?1:0]=this.readInt32(t+4),lM[0]}writeInt8(t,n){this.bytes_[t]=n}writeUint8(t,n){this.bytes_[t]=n}writeInt16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeUint16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeInt32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeUint32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeInt64(t,n){this.writeInt32(t,n.low),this.writeInt32(t+4,n.high)}writeUint64(t,n){this.writeUint32(t,n.low),this.writeUint32(t+4,n.high)}writeFloat32(t,n){aM[0]=n,this.writeInt32(t,oa[0])}writeFloat64(t,n){lM[0]=n,this.writeInt32(t,oa[s0?0:1]),this.writeInt32(t+4,oa[s0?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+ms+yo)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let t="";for(let n=0;n<yo;n++)t+=String.fromCharCode(this.readInt8(this.position_+ms+n));return t}__offset(t,n){const r=t-this.readInt32(t);return n<this.readInt16(r)?this.readInt16(r+n):0}__union(t,n){return t.bb_pos=n+this.readInt32(n),t.bb=this,t}__string(t,n){t+=this.readInt32(t);const r=this.readInt32(t);let i="",s=0;if(t+=ms,n===j2.UTF8_BYTES)return this.bytes_.subarray(t,t+r);for(;s<r;){let o;const a=this.readUint8(t+s++);if(a<192)o=a;else{const l=this.readUint8(t+s++);if(a<224)o=(a&31)<<6|l&63;else{const c=this.readUint8(t+s++);if(a<240)o=(a&15)<<12|(l&63)<<6|c&63;else{const u=this.readUint8(t+s++);o=(a&7)<<18|(l&63)<<12|(c&63)<<6|u&63}}}o<65536?i+=String.fromCharCode(o):(o-=65536,i+=String.fromCharCode((o>>10)+55296,(o&1023)+56320))}return i}__union_with_string(t,n){return typeof t=="string"?this.__string(n):this.__union(t,n)}__indirect(t){return t+this.readInt32(t)}__vector(t){return t+this.readInt32(t)+ms}__vector_len(t){return this.readInt32(t+this.readInt32(t))}__has_identifier(t){if(t.length!=yo)throw new Error("FlatBuffers: file identifier must be length "+yo);for(let n=0;n<yo;n++)if(t.charCodeAt(n)!=this.readInt8(this.position()+ms+n))return!1;return!0}createLong(t,n){return Eo.create(t,n)}createScalarList(t,n){const r=[];for(let i=0;i<n;++i)t(i)!==null&&r.push(t(i));return r}createObjList(t,n){const r=[];for(let i=0;i<n;++i){const s=t(i);s!==null&&r.push(s.unpack())}return r}},G8=class X8{constructor(t){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null;let n;t?n=t:n=1024,this.bb=bf.allocate(n),this.space=n}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(t){this.force_defaults=t}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(t,n){t>this.minalign&&(this.minalign=t);const r=~(this.bb.capacity()-this.space+n)+1&t-1;for(;this.space<r+t+n;){const i=this.bb.capacity();this.bb=X8.growByteBuffer(this.bb),this.space+=this.bb.capacity()-i}this.pad(r)}pad(t){for(let n=0;n<t;n++)this.bb.writeInt8(--this.space,0)}writeInt8(t){this.bb.writeInt8(this.space-=1,t)}writeInt16(t){this.bb.writeInt16(this.space-=2,t)}writeInt32(t){this.bb.writeInt32(this.space-=4,t)}writeInt64(t){this.bb.writeInt64(this.space-=8,t)}writeFloat32(t){this.bb.writeFloat32(this.space-=4,t)}writeFloat64(t){this.bb.writeFloat64(this.space-=8,t)}addInt8(t){this.prep(1,0),this.writeInt8(t)}addInt16(t){this.prep(2,0),this.writeInt16(t)}addInt32(t){this.prep(4,0),this.writeInt32(t)}addInt64(t){this.prep(8,0),this.writeInt64(t)}addFloat32(t){this.prep(4,0),this.writeFloat32(t)}addFloat64(t){this.prep(8,0),this.writeFloat64(t)}addFieldInt8(t,n,r){(this.force_defaults||n!=r)&&(this.addInt8(n),this.slot(t))}addFieldInt16(t,n,r){(this.force_defaults||n!=r)&&(this.addInt16(n),this.slot(t))}addFieldInt32(t,n,r){(this.force_defaults||n!=r)&&(this.addInt32(n),this.slot(t))}addFieldInt64(t,n,r){(this.force_defaults||!n.equals(r))&&(this.addInt64(n),this.slot(t))}addFieldFloat32(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat32(n),this.slot(t))}addFieldFloat64(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat64(n),this.slot(t))}addFieldOffset(t,n,r){(this.force_defaults||n!=r)&&(this.addOffset(n),this.slot(t))}addFieldStruct(t,n,r){n!=r&&(this.nested(n),this.slot(t))}nested(t){if(t!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")}slot(t){this.vtable!==null&&(this.vtable[t]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(t){const n=t.capacity();if(n&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const r=n<<1,i=bf.allocate(r);return i.setPosition(r-n),i.bytes().set(t.bytes(),r-n),i}addOffset(t){this.prep(ms,0),this.writeInt32(this.offset()-t+ms)}startObject(t){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=t;for(let n=0;n<t;n++)this.vtable[n]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const t=this.offset();let n=this.vtable_in_use-1;for(;n>=0&&this.vtable[n]==0;n--);const r=n+1;for(;n>=0;n--)this.addInt16(this.vtable[n]!=0?t-this.vtable[n]:0);const i=2;this.addInt16(t-this.object_start);const s=(r+i)*Ew;this.addInt16(s);let o=0;const a=this.space;t:for(n=0;n<this.vtables.length;n++){const l=this.bb.capacity()-this.vtables[n];if(s==this.bb.readInt16(l)){for(let c=Ew;c<s;c+=Ew)if(this.bb.readInt16(a+c)!=this.bb.readInt16(l+c))continue t;o=this.vtables[n];break}}return o?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,o-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t}finish(t,n,r){const i=r?ge:0;if(n){const s=n;if(this.prep(this.minalign,ms+yo+i),s.length!=yo)throw new Error("FlatBuffers: file identifier must be length "+yo);for(let o=yo-1;o>=0;o--)this.writeInt8(s.charCodeAt(o))}this.prep(this.minalign,ms+i),this.addOffset(t),i&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(t,n){this.finish(t,n,!0)}requiredField(t,n){const r=this.bb.capacity()-t,i=r-this.bb.readInt32(r);if(!(this.bb.readInt16(i+n)!=0))throw new Error("FlatBuffers: field "+n+" must be set")}startVector(t,n,r){this.notNested(),this.vector_num_elems=n,this.prep(ms,t*n),this.prep(r,t*n)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(t){if(!t)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(t))return this.string_maps.get(t);const n=this.createString(t);return this.string_maps.set(t,n),n}createString(t){if(!t)return 0;let n;if(t instanceof Uint8Array)n=t;else{n=[];let r=0;for(;r<t.length;){let i;const s=t.charCodeAt(r++);if(s<55296||s>=56320)i=s;else{const o=t.charCodeAt(r++);i=(s<<10)+o+-56613888}i<128?n.push(i):(i<2048?n.push(i>>6&31|192):(i<65536?n.push(i>>12&15|224):n.push(i>>18&7|240,i>>12&63|128),n.push(i>>6&63|128)),n.push(i&63|128))}}this.addInt8(0),this.startVector(1,n.length,1),this.bb.setPosition(this.space-=n.length);for(let r=0,i=this.space,s=this.bb.bytes();r<n.length;r++)s[i++]=n[r];return this.endVector()}createLong(t,n){return Eo.create(t,n)}createObjectOffset(t){return t===null?0:typeof t=="string"?this.createString(t):t.pack(this)}createObjectOffsetList(t){const n=[];for(let r=0;r<t.length;++r){const i=t[r];if(i!==null)n.push(this.createObjectOffset(i));else throw new Error("FlatBuffers: Argument for createObjectOffsetList cannot contain null.")}return n}createStructOffsetList(t,n){return n(this,t.length),this.createObjectOffsetList(t),this.endVector()}},oi=class xl{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsKeyValue(t,n){return(n||new xl).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsKeyValue(t,n){return t.setPosition(t.position()+ge),(n||new xl).__init(t.readInt32(t.position())+t.position(),t)}key(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}value(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startKeyValue(t){t.startObject(2)}static addKey(t,n){t.addFieldOffset(0,n,0)}static addValue(t,n){t.addFieldOffset(1,n,0)}static endKeyValue(t){return t.endObject()}static createKeyValue(t,n,r){return xl.startKeyValue(t),xl.addKey(t,n),xl.addValue(t,r),xl.endKeyValue(t)}};var vf;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(vf||(vf={}));var wf;(function(e){e[e.Little=0]="Little",e[e.Big=1]="Big"})(wf||(wf={}));var fg;(function(e){e[e.DenseArray=0]="DenseArray"})(fg||(fg={}));let Au=class Il{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInt(t,n){return(n||new Il).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInt(t,n){return t.setPosition(t.position()+ge),(n||new Il).__init(t.readInt32(t.position())+t.position(),t)}bitWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}isSigned(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startInt(t){t.startObject(2)}static addBitWidth(t,n){t.addFieldInt32(0,n,0)}static addIsSigned(t,n){t.addFieldInt8(1,+n,0)}static endInt(t){return t.endObject()}static createInt(t,n,r){return Il.startInt(t),Il.addBitWidth(t,n),Il.addIsSigned(t,r),Il.endInt(t)}},Jc=class V2{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryEncoding(t,n){return(n||new V2).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryEncoding(t,n){return t.setPosition(t.position()+ge),(n||new V2).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}indexType(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new Au).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isOrdered(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}dictionaryKind(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt16(this.bb_pos+t):fg.DenseArray}static startDictionaryEncoding(t){t.startObject(4)}static addId(t,n){t.addFieldInt64(0,n,t.createLong(0,0))}static addIndexType(t,n){t.addFieldOffset(1,n,0)}static addIsOrdered(t,n){t.addFieldInt8(2,+n,0)}static addDictionaryKind(t,n){t.addFieldInt16(3,n,fg.DenseArray)}static endDictionaryEncoding(t){return t.endObject()}},cM=class Xd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBinary(t,n){return(n||new Xd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBinary(t,n){return t.setPosition(t.position()+ge),(n||new Xd).__init(t.readInt32(t.position())+t.position(),t)}static startBinary(t){t.startObject(0)}static endBinary(t){return t.endObject()}static createBinary(t){return Xd.startBinary(t),Xd.endBinary(t)}},uM=class Qd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBool(t,n){return(n||new Qd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBool(t,n){return t.setPosition(t.position()+ge),(n||new Qd).__init(t.readInt32(t.position())+t.position(),t)}static startBool(t){t.startObject(0)}static endBool(t){return t.endObject()}static createBool(t){return Qd.startBool(t),Qd.endBool(t)}};var dg;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(dg||(dg={}));let tm=class tu{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDate(t,n){return(n||new tu).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDate(t,n){return t.setPosition(t.position()+ge),(n||new tu).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):dg.MILLISECOND}static startDate(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,dg.MILLISECOND)}static endDate(t){return t.endObject()}static createDate(t,n){return tu.startDate(t),tu.addUnit(t,n),tu.endDate(t)}},eu=class na{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDecimal(t,n){return(n||new na).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDecimal(t,n){return t.setPosition(t.position()+ge),(n||new na).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}scale(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}bitWidth(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt32(this.bb_pos+t):128}static startDecimal(t){t.startObject(3)}static addPrecision(t,n){t.addFieldInt32(0,n,0)}static addScale(t,n){t.addFieldInt32(1,n,0)}static addBitWidth(t,n){t.addFieldInt32(2,n,128)}static endDecimal(t){return t.endObject()}static createDecimal(t,n,r,i){return na.startDecimal(t),na.addPrecision(t,n),na.addScale(t,r),na.addBitWidth(t,i),na.endDecimal(t)}};var _f;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(_f||(_f={}));let em=class nu{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeBinary(t,n){return(n||new nu).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeBinary(t,n){return t.setPosition(t.position()+ge),(n||new nu).__init(t.readInt32(t.position())+t.position(),t)}byteWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeBinary(t){t.startObject(1)}static addByteWidth(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeBinary(t){return t.endObject()}static createFixedSizeBinary(t,n){return nu.startFixedSizeBinary(t),nu.addByteWidth(t,n),nu.endFixedSizeBinary(t)}},nm=class ru{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeList(t,n){return(n||new ru).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeList(t,n){return t.setPosition(t.position()+ge),(n||new ru).__init(t.readInt32(t.position())+t.position(),t)}listSize(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeList(t){t.startObject(1)}static addListSize(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeList(t){return t.endObject()}static createFixedSizeList(t,n){return ru.startFixedSizeList(t),ru.addListSize(t,n),ru.endFixedSizeList(t)}};var hg;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(hg||(hg={}));let rm=class iu{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFloatingPoint(t,n){return(n||new iu).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFloatingPoint(t,n){return t.setPosition(t.position()+ge),(n||new iu).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):hg.HALF}static startFloatingPoint(t){t.startObject(1)}static addPrecision(t,n){t.addFieldInt16(0,n,hg.HALF)}static endFloatingPoint(t){return t.endObject()}static createFloatingPoint(t,n){return iu.startFloatingPoint(t),iu.addPrecision(t,n),iu.endFloatingPoint(t)}};var pg;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(pg||(pg={}));let im=class su{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInterval(t,n){return(n||new su).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInterval(t,n){return t.setPosition(t.position()+ge),(n||new su).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):pg.YEAR_MONTH}static startInterval(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,pg.YEAR_MONTH)}static endInterval(t){return t.endObject()}static createInterval(t,n){return su.startInterval(t),su.addUnit(t,n),su.endInterval(t)}},fM=class Kd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsList(t,n){return(n||new Kd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsList(t,n){return t.setPosition(t.position()+ge),(n||new Kd).__init(t.readInt32(t.position())+t.position(),t)}static startList(t){t.startObject(0)}static endList(t){return t.endObject()}static createList(t){return Kd.startList(t),Kd.endList(t)}},sm=class ou{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMap(t,n){return(n||new ou).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMap(t,n){return t.setPosition(t.position()+ge),(n||new ou).__init(t.readInt32(t.position())+t.position(),t)}keysSorted(){const t=this.bb.__offset(this.bb_pos,4);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startMap(t){t.startObject(1)}static addKeysSorted(t,n){t.addFieldInt8(0,+n,0)}static endMap(t){return t.endObject()}static createMap(t,n){return ou.startMap(t),ou.addKeysSorted(t,n),ou.endMap(t)}},dM=class Zd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsNull(t,n){return(n||new Zd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsNull(t,n){return t.setPosition(t.position()+ge),(n||new Zd).__init(t.readInt32(t.position())+t.position(),t)}static startNull(t){t.startObject(0)}static endNull(t){return t.endObject()}static createNull(t){return Zd.startNull(t),Zd.endNull(t)}},hM=class Jd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsStruct_(t,n){return(n||new Jd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsStruct_(t,n){return t.setPosition(t.position()+ge),(n||new Jd).__init(t.readInt32(t.position())+t.position(),t)}static startStruct_(t){t.startObject(0)}static endStruct_(t){return t.endObject()}static createStruct_(t){return Jd.startStruct_(t),Jd.endStruct_(t)}},th=class Tl{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTime(t,n){return(n||new Tl).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTime(t,n){return t.setPosition(t.position()+ge),(n||new Tl).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):_f.MILLISECOND}bitWidth(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):32}static startTime(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,_f.MILLISECOND)}static addBitWidth(t,n){t.addFieldInt32(1,n,32)}static endTime(t){return t.endObject()}static createTime(t,n,r){return Tl.startTime(t),Tl.addUnit(t,n),Tl.addBitWidth(t,r),Tl.endTime(t)}},eh=class El{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTimestamp(t,n){return(n||new El).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTimestamp(t,n){return t.setPosition(t.position()+ge),(n||new El).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):_f.SECOND}timezone(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startTimestamp(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,_f.SECOND)}static addTimezone(t,n){t.addFieldOffset(1,n,0)}static endTimestamp(t){return t.endObject()}static createTimestamp(t,n,r){return El.startTimestamp(t),El.addUnit(t,n),El.addTimezone(t,r),El.endTimestamp(t)}};var yg;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(yg||(yg={}));let Al=class Ml{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUnion(t,n){return(n||new Ml).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUnion(t,n){return t.setPosition(t.position()+ge),(n||new Ml).__init(t.readInt32(t.position())+t.position(),t)}mode(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):yg.Sparse}typeIds(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readInt32(this.bb.__vector(this.bb_pos+n)+t*4):0}typeIdsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}typeIdsArray(){const t=this.bb.__offset(this.bb_pos,6);return t?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startUnion(t){t.startObject(2)}static addMode(t,n){t.addFieldInt16(0,n,yg.Sparse)}static addTypeIds(t,n){t.addFieldOffset(1,n,0)}static createTypeIdsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addInt32(n[r]);return t.endVector()}static startTypeIdsVector(t,n){t.startVector(4,n,4)}static endUnion(t){return t.endObject()}static createUnion(t,n,r){return Ml.startUnion(t),Ml.addMode(t,n),Ml.addTypeIds(t,r),Ml.endUnion(t)}},pM=class nh{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUtf8(t,n){return(n||new nh).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUtf8(t,n){return t.setPosition(t.position()+ge),(n||new nh).__init(t.readInt32(t.position())+t.position(),t)}static startUtf8(t){t.startObject(0)}static endUtf8(t){return t.endObject()}static createUtf8(t){return nh.startUtf8(t),nh.endUtf8(t)}};var Oe;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.FloatingPoint=3]="FloatingPoint",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct_=13]="Struct_",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.LargeBinary=19]="LargeBinary",e[e.LargeUtf8=20]="LargeUtf8",e[e.LargeList=21]="LargeList"})(Oe||(Oe={}));let Xr=class om{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsField(t,n){return(n||new om).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsField(t,n){return t.setPosition(t.position()+ge),(n||new om).__init(t.readInt32(t.position())+t.position(),t)}name(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}nullable(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}typeType(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):Oe.NONE}type(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.__union(t,this.bb_pos+n):null}dictionary(t){const n=this.bb.__offset(this.bb_pos,12);return n?(t||new Jc).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}children(t,n){const r=this.bb.__offset(this.bb_pos,14);return r?(n||new om).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}childrenLength(){const t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,16);return r?(n||new oi).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}static startField(t){t.startObject(7)}static addName(t,n){t.addFieldOffset(0,n,0)}static addNullable(t,n){t.addFieldInt8(1,+n,0)}static addTypeType(t,n){t.addFieldInt8(2,n,Oe.NONE)}static addType(t,n){t.addFieldOffset(3,n,0)}static addDictionary(t,n){t.addFieldOffset(4,n,0)}static addChildren(t,n){t.addFieldOffset(5,n,0)}static createChildrenVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startChildrenVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(6,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endField(t){return t.endObject()}},cs=class Js{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsSchema(t,n){return(n||new Js).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSchema(t,n){return t.setPosition(t.position()+ge),(n||new Js).__init(t.readInt32(t.position())+t.position(),t)}endianness(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):wf.Little}fields(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new Xr).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}fieldsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new oi).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}features(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.readInt64(this.bb.__vector(this.bb_pos+n)+t*8):this.bb.createLong(0,0)}featuresLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}static startSchema(t){t.startObject(4)}static addEndianness(t,n){t.addFieldInt16(0,n,wf.Little)}static addFields(t,n){t.addFieldOffset(1,n,0)}static createFieldsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startFieldsVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(2,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static addFeatures(t,n){t.addFieldOffset(3,n,0)}static createFeaturesVector(t,n){t.startVector(8,n.length,8);for(let r=n.length-1;r>=0;r--)t.addInt64(n[r]);return t.endVector()}static startFeaturesVector(t,n){t.startVector(8,n,8)}static endSchema(t){return t.endObject()}static finishSchemaBuffer(t,n){t.finish(n)}static finishSizePrefixedSchemaBuffer(t,n){t.finish(n,void 0,!0)}static createSchema(t,n,r,i,s){return Js.startSchema(t),Js.addEndianness(t,n),Js.addFields(t,r),Js.addCustomMetadata(t,i),Js.addFeatures(t,s),Js.endSchema(t)}},rs=class Y2{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFooter(t,n){return(n||new Y2).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFooter(t,n){return t.setPosition(t.position()+ge),(n||new Y2).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):vf.V1}schema(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new cs).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}dictionaries(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new P2).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}dictionariesLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}recordBatches(t,n){const r=this.bb.__offset(this.bb_pos,10);return r?(n||new P2).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}recordBatchesLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new oi).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startFooter(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,vf.V1)}static addSchema(t,n){t.addFieldOffset(1,n,0)}static addDictionaries(t,n){t.addFieldOffset(2,n,0)}static startDictionariesVector(t,n){t.startVector(24,n,8)}static addRecordBatches(t,n){t.addFieldOffset(3,n,0)}static startRecordBatchesVector(t,n){t.startVector(24,n,8)}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endFooter(t){return t.endObject()}static finishFooterBuffer(t,n){t.finish(n)}static finishSizePrefixedFooterBuffer(t,n){t.finish(n,void 0,!0)}},Re=class $l{constructor(t=[],n,r){this.fields=t||[],this.metadata=n||new Map,r||(r=W2(t)),this.dictionaries=r}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(t=>t.name)}toString(){return`Schema<{ ${this.fields.map((t,n)=>`${n}: ${t}`).join(", ")} }>`}select(t){const n=new Set(t),r=this.fields.filter(i=>n.has(i.name));return new $l(r,this.metadata)}selectAt(t){const n=t.map(r=>this.fields[r]).filter(Boolean);return new $l(n,this.metadata)}assign(...t){const n=t[0]instanceof $l?t[0]:Array.isArray(t[0])?new $l(t[0]):new $l(t),r=[...this.fields],i=o0(o0(new Map,this.metadata),n.metadata),s=n.fields.filter(a=>{const l=r.findIndex(c=>c.name===a.name);return~l?(r[l]=a.clone({metadata:o0(o0(new Map,r[l].metadata),a.metadata)}))&&!1:!0}),o=W2(s,new Map);return new $l([...r,...s],i,new Map([...this.dictionaries,...o]))}};Re.prototype.fields=null;Re.prototype.metadata=null;Re.prototype.dictionaries=null;let Ge=class q2{constructor(t,n,r=!1,i){this.name=t,this.type=n,this.nullable=r,this.metadata=i||new Map}static new(...t){let[n,r,i,s]=t;return t[0]&&typeof t[0]=="object"&&({name:n}=t[0],r===void 0&&(r=t[0].type),i===void 0&&(i=t[0].nullable),s===void 0&&(s=t[0].metadata)),new q2(`${n}`,r,i,s)}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...t){let[n,r,i,s]=t;return!t[0]||typeof t[0]!="object"?[n=this.name,r=this.type,i=this.nullable,s=this.metadata]=t:{name:n=this.name,type:r=this.type,nullable:i=this.nullable,metadata:s=this.metadata}=t[0],q2.new(n,r,i,s)}};Ge.prototype.type=null;Ge.prototype.name=null;Ge.prototype.nullable=null;Ge.prototype.metadata=null;function o0(e,t){return new Map([...e||new Map,...t||new Map])}function W2(e,t=new Map){for(let n=-1,r=e.length;++n<r;){const s=e[n].type;if(Bt.isDictionary(s)){if(!t.has(s.id))t.set(s.id,s.dictionary);else if(t.get(s.id)!==s.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}s.children&&s.children.length>0&&W2(s.children,t)}return t}var yM=Eo,Mq=G8,$q=bf;let YI=class{constructor(t,n=ri.V4,r,i){this.schema=t,this.version=n,r&&(this._recordBatches=r),i&&(this._dictionaryBatches=i)}static decode(t){t=new $q(re(t));const n=rs.getRootAsFooter(t),r=Re.decode(n.schema());return new Nq(r,n)}static encode(t){const n=new Mq,r=Re.encode(n,t.schema);rs.startRecordBatchesVector(n,t.numRecordBatches);for(const o of[...t.recordBatches()].slice().reverse())mg.encode(n,o);const i=n.endVector();rs.startDictionariesVector(n,t.numDictionaries);for(const o of[...t.dictionaryBatches()].slice().reverse())mg.encode(n,o);const s=n.endVector();return rs.startFooter(n),rs.addSchema(n,r),rs.addVersion(n,ri.V4),rs.addRecordBatches(n,i),rs.addDictionaries(n,s),rs.finishFooterBuffer(n,rs.endFooter(n)),n.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}*recordBatches(){for(let t,n=-1,r=this.numRecordBatches;++n<r;)(t=this.getRecordBatch(n))&&(yield t)}*dictionaryBatches(){for(let t,n=-1,r=this.numDictionaries;++n<r;)(t=this.getDictionaryBatch(n))&&(yield t)}getRecordBatch(t){return t>=0&&t<this.numRecordBatches&&this._recordBatches[t]||null}getDictionaryBatch(t){return t>=0&&t<this.numDictionaries&&this._dictionaryBatches[t]||null}},Nq=class extends YI{constructor(t,n){super(t,n.version()),this._footer=n}get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}getRecordBatch(t){if(t>=0&&t<this.numRecordBatches){const n=this._footer.recordBatches(t);if(n)return mg.decode(n)}return null}getDictionaryBatch(t){if(t>=0&&t<this.numDictionaries){const n=this._footer.dictionaries(t);if(n)return mg.decode(n)}return null}},mg=class Q8{constructor(t,n,r){this.metaDataLength=t,this.offset=typeof r=="number"?r:r.low,this.bodyLength=typeof n=="number"?n:n.low}static decode(t){return new Q8(t.metaDataLength(),t.bodyLength(),t.offset())}static encode(t,n){const{metaDataLength:r}=n,i=new yM(n.offset,0),s=new yM(n.bodyLength,0);return P2.createBlock(t,i,r,s)}};const Le=Object.freeze({done:!0,value:void 0});let mM=class{constructor(t){this._json=t}get schema(){return this._json.schema}get batches(){return this._json.batches||[]}get dictionaries(){return this._json.dictionaries||[]}},K8=class{tee(){return this._getDOMStream().tee()}pipe(t,n){return this._getNodeStream().pipe(t,n)}pipeTo(t,n){return this._getDOMStream().pipeTo(t,n)}pipeThrough(t,n){return this._getDOMStream().pipeThrough(t,n)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}},kq=class extends K8{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(t=>this._closedPromiseResolve=t)}get closed(){return this._closedPromise}cancel(t){return W(this,void 0,void 0,function*(){yield this.return(t)})}write(t){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(t):this.resolvers.shift().resolve({done:!1,value:t}))}abort(t){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:t}:this.resolvers.shift().reject({done:!0,value:t}))}close(){if(this._closedPromiseResolve){const{resolvers:t}=this;for(;t.length>0;)t.shift().resolve(Le);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(t){return Kr.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,t)}toNodeStream(t){return Kr.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,t)}throw(t){return W(this,void 0,void 0,function*(){return yield this.abort(t),Le})}return(t){return W(this,void 0,void 0,function*(){return yield this.close(),Le})}read(t){return W(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return W(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(...t){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((n,r)=>{this.resolvers.push({resolve:n,reject:r})}):Promise.resolve(Le)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}},Dq=class extends kq{write(t){if((t=re(t)).byteLength>0)return super.write(t)}toString(t=!1){return t?D2(this.toUint8Array(!0)):this.toUint8Array(!1).then(D2)}toUint8Array(t=!1){return t?Rs(this._values)[0]:W(this,void 0,void 0,function*(){var n,r;const i=[];let s=0;try{for(var o=Br(this),a;a=yield o.next(),!a.done;){const l=a.value;i.push(l),s+=l.byteLength}}catch(l){n={error:l}}finally{try{a&&!a.done&&(r=o.return)&&(yield r.call(o))}finally{if(n)throw n.error}}return Rs(i,s)[0]})}},gg=class{constructor(t){t&&(this.source=new Oq(Kr.fromIterable(t)))}[Symbol.iterator](){return this}next(t){return this.source.next(t)}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}peek(t){return this.source.peek(t)}read(t){return this.source.read(t)}},bg=class Z8{constructor(t){t instanceof Z8?this.source=t.source:t instanceof Dq?this.source=new gl(Kr.fromAsyncIterable(t)):$D(t)?this.source=new gl(Kr.fromNodeStream(t)):OI(t)?this.source=new gl(Kr.fromDOMStream(t)):AD(t)?this.source=new gl(Kr.fromDOMStream(t.body)):Fb(t)?this.source=new gl(Kr.fromIterable(t)):Jh(t)?this.source=new gl(Kr.fromAsyncIterable(t)):DI(t)&&(this.source=new gl(Kr.fromAsyncIterable(t)))}[Symbol.asyncIterator](){return this}next(t){return this.source.next(t)}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}get closed(){return this.source.closed}cancel(t){return this.source.cancel(t)}peek(t){return this.source.peek(t)}read(t){return this.source.read(t)}},Oq=class{constructor(t){this.source=t}cancel(t){this.return(t)}peek(t){return this.next(t,"peek").value}read(t){return this.next(t,"read").value}next(t,n="read"){return this.source.next({cmd:n,size:t})}throw(t){return Object.create(this.source.throw&&this.source.throw(t)||Le)}return(t){return Object.create(this.source.return&&this.source.return(t)||Le)}},gl=class{constructor(t){this.source=t,this._closedPromise=new Promise(n=>this._closedPromiseResolve=n)}cancel(t){return W(this,void 0,void 0,function*(){yield this.return(t)})}get closed(){return this._closedPromise}read(t){return W(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return W(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(t,n="read"){return W(this,void 0,void 0,function*(){return yield this.source.next({cmd:n,size:t})})}throw(t){return W(this,void 0,void 0,function*(){const n=this.source.throw&&(yield this.source.throw(t))||Le;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(n)})}return(t){return W(this,void 0,void 0,function*(){const n=this.source.return&&(yield this.source.return(t))||Le;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(n)})}},gM=class extends gg{constructor(t,n){super(),this.position=0,this.buffer=re(t),this.size=typeof n>"u"?this.buffer.byteLength:n}readInt32(t){const{buffer:n,byteOffset:r}=this.readAt(t,4);return new DataView(n,r).getInt32(0,!0)}seek(t){return this.position=Math.min(t,this.size),t<this.size}read(t){const{buffer:n,size:r,position:i}=this;return n&&i<r?(typeof t!="number"&&(t=Number.POSITIVE_INFINITY),this.position=Math.min(r,i+Math.min(r-i,t)),n.subarray(i,this.position)):null}readAt(t,n){const r=this.buffer,i=Math.min(this.size,t+n);return r?r.subarray(t,i):new Uint8Array(n)}close(){this.buffer&&(this.buffer=null)}throw(t){return this.close(),{done:!0,value:t}}return(t){return this.close(),{done:!0,value:t}}},vg=class extends bg{constructor(t,n){super(),this.position=0,this._handle=t,typeof n=="number"?this.size=n:this._pending=W(this,void 0,void 0,function*(){this.size=(yield t.stat()).size,delete this._pending})}readInt32(t){return W(this,void 0,void 0,function*(){const{buffer:n,byteOffset:r}=yield this.readAt(t,4);return new DataView(n,r).getInt32(0,!0)})}seek(t){return W(this,void 0,void 0,function*(){return this._pending&&(yield this._pending),this.position=Math.min(t,this.size),t<this.size})}read(t){return W(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:n,size:r,position:i}=this;if(n&&i<r){typeof t!="number"&&(t=Number.POSITIVE_INFINITY);let s=i,o=0,a=0;const l=Math.min(r,s+Math.min(r-s,t)),c=new Uint8Array(Math.max(0,(this.position=l)-s));for(;(s+=a)<l&&(o+=a)<c.byteLength;)({bytesRead:a}=yield n.read(c,o,c.byteLength-o,s));return c}return null})}readAt(t,n){return W(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:r,size:i}=this;if(r&&t+n<i){const s=Math.min(i,t+n),o=new Uint8Array(s-t);return(yield r.read(o,0,n,t)).buffer}return new Uint8Array(n)})}close(){return W(this,void 0,void 0,function*(){const t=this._handle;this._handle=null,t&&(yield t.close())})}throw(t){return W(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:t}})}return(t){return W(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:t}})}};const Fq=65536;function Mu(e){return e<0&&(e=4294967295+e+1),`0x${e.toString(16)}`}const Sf=8,qI=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8];let J8=class{constructor(t){this.buffer=t}high(){return this.buffer[1]}low(){return this.buffer[0]}_times(t){const n=new Uint32Array([this.buffer[1]>>>16,this.buffer[1]&65535,this.buffer[0]>>>16,this.buffer[0]&65535]),r=new Uint32Array([t.buffer[1]>>>16,t.buffer[1]&65535,t.buffer[0]>>>16,t.buffer[0]&65535]);let i=n[3]*r[3];this.buffer[0]=i&65535;let s=i>>>16;return i=n[2]*r[3],s+=i,i=n[3]*r[2]>>>0,s+=i,this.buffer[0]+=s<<16,this.buffer[1]=s>>>0<i?Fq:0,this.buffer[1]+=s>>>16,this.buffer[1]+=n[1]*r[3]+n[2]*r[2]+n[3]*r[1],this.buffer[1]+=n[0]*r[3]+n[1]*r[2]+n[2]*r[1]+n[3]*r[0]<<16,this}_plus(t){const n=this.buffer[0]+t.buffer[0]>>>0;this.buffer[1]+=t.buffer[1],n<this.buffer[0]>>>0&&++this.buffer[1],this.buffer[0]=n}lessThan(t){return this.buffer[1]<t.buffer[1]||this.buffer[1]===t.buffer[1]&&this.buffer[0]<t.buffer[0]}equals(t){return this.buffer[1]===t.buffer[1]&&this.buffer[0]==t.buffer[0]}greaterThan(t){return t.lessThan(this)}hex(){return`${Mu(this.buffer[1])} ${Mu(this.buffer[0])}`}},tn=class to extends J8{times(t){return this._times(t),this}plus(t){return this._plus(t),this}static from(t,n=new Uint32Array(2)){return to.fromString(typeof t=="string"?t:t.toString(),n)}static fromNumber(t,n=new Uint32Array(2)){return to.fromString(t.toString(),n)}static fromString(t,n=new Uint32Array(2)){const r=t.length,i=new to(n);for(let s=0;s<r;){const o=Sf<r-s?Sf:r-s,a=new to(new Uint32Array([Number.parseInt(t.slice(s,s+o),10),0])),l=new to(new Uint32Array([qI[o],0]));i.times(l),i.plus(a),s+=o}return i}static convertArray(t){const n=new Uint32Array(t.length*2);for(let r=-1,i=t.length;++r<i;)to.from(t[r],new Uint32Array(n.buffer,n.byteOffset+2*r*4,2));return n}static multiply(t,n){return new to(new Uint32Array(t.buffer)).times(n)}static add(t,n){return new to(new Uint32Array(t.buffer)).plus(n)}},xh=class eo extends J8{negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[0]==0&&++this.buffer[1],this}times(t){return this._times(t),this}plus(t){return this._plus(t),this}lessThan(t){const n=this.buffer[1]<<0,r=t.buffer[1]<<0;return n<r||n===r&&this.buffer[0]<t.buffer[0]}static from(t,n=new Uint32Array(2)){return eo.fromString(typeof t=="string"?t:t.toString(),n)}static fromNumber(t,n=new Uint32Array(2)){return eo.fromString(t.toString(),n)}static fromString(t,n=new Uint32Array(2)){const r=t.startsWith("-"),i=t.length,s=new eo(n);for(let o=r?1:0;o<i;){const a=Sf<i-o?Sf:i-o,l=new eo(new Uint32Array([Number.parseInt(t.slice(o,o+a),10),0])),c=new eo(new Uint32Array([qI[a],0]));s.times(c),s.plus(l),o+=a}return r?s.negate():s}static convertArray(t){const n=new Uint32Array(t.length*2);for(let r=-1,i=t.length;++r<i;)eo.from(t[r],new Uint32Array(n.buffer,n.byteOffset+2*r*4,2));return n}static multiply(t,n){return new eo(new Uint32Array(t.buffer)).times(n)}static add(t,n){return new eo(new Uint32Array(t.buffer)).plus(n)}},Bq=class no{constructor(t){this.buffer=t}high(){return new xh(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2))}low(){return new xh(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset,2))}negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[2]=~this.buffer[2],this.buffer[3]=~this.buffer[3],this.buffer[0]==0&&++this.buffer[1],this.buffer[1]==0&&++this.buffer[2],this.buffer[2]==0&&++this.buffer[3],this}times(t){const n=new tn(new Uint32Array([this.buffer[3],0])),r=new tn(new Uint32Array([this.buffer[2],0])),i=new tn(new Uint32Array([this.buffer[1],0])),s=new tn(new Uint32Array([this.buffer[0],0])),o=new tn(new Uint32Array([t.buffer[3],0])),a=new tn(new Uint32Array([t.buffer[2],0])),l=new tn(new Uint32Array([t.buffer[1],0])),c=new tn(new Uint32Array([t.buffer[0],0]));let u=tn.multiply(s,c);this.buffer[0]=u.low();const f=new tn(new Uint32Array([u.high(),0]));return u=tn.multiply(i,c),f.plus(u),u=tn.multiply(s,l),f.plus(u),this.buffer[1]=f.low(),this.buffer[3]=f.lessThan(u)?1:0,this.buffer[2]=f.high(),new tn(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2)).plus(tn.multiply(r,c)).plus(tn.multiply(i,l)).plus(tn.multiply(s,a)),this.buffer[3]+=tn.multiply(n,c).plus(tn.multiply(r,l)).plus(tn.multiply(i,a)).plus(tn.multiply(s,o)).low(),this}plus(t){const n=new Uint32Array(4);return n[3]=this.buffer[3]+t.buffer[3]>>>0,n[2]=this.buffer[2]+t.buffer[2]>>>0,n[1]=this.buffer[1]+t.buffer[1]>>>0,n[0]=this.buffer[0]+t.buffer[0]>>>0,n[0]<this.buffer[0]>>>0&&++n[1],n[1]<this.buffer[1]>>>0&&++n[2],n[2]<this.buffer[2]>>>0&&++n[3],this.buffer[3]=n[3],this.buffer[2]=n[2],this.buffer[1]=n[1],this.buffer[0]=n[0],this}hex(){return`${Mu(this.buffer[3])} ${Mu(this.buffer[2])} ${Mu(this.buffer[1])} ${Mu(this.buffer[0])}`}static multiply(t,n){return new no(new Uint32Array(t.buffer)).times(n)}static add(t,n){return new no(new Uint32Array(t.buffer)).plus(n)}static from(t,n=new Uint32Array(4)){return no.fromString(typeof t=="string"?t:t.toString(),n)}static fromNumber(t,n=new Uint32Array(4)){return no.fromString(t.toString(),n)}static fromString(t,n=new Uint32Array(4)){const r=t.startsWith("-"),i=t.length,s=new no(n);for(let o=r?1:0;o<i;){const a=Sf<i-o?Sf:i-o,l=new no(new Uint32Array([Number.parseInt(t.slice(o,o+a),10),0,0,0])),c=new no(new Uint32Array([qI[a],0,0,0]));s.times(c),s.plus(l),o+=a}return r?s.negate():s}static convertArray(t){const n=new Uint32Array(t.length*4);for(let r=-1,i=t.length;++r<i;)no.from(t[r],new Uint32Array(n.buffer,n.byteOffset+4*4*r,4));return n}},tO=class extends Wt{constructor(t,n,r,i){super(),this.nodesIndex=-1,this.buffersIndex=-1,this.bytes=t,this.nodes=n,this.buffers=r,this.dictionaries=i}visit(t){return super.visit(t instanceof Ge?t.type:t)}visitNull(t,{length:n}=this.nextFieldNode()){return jt({type:t,length:n})}visitBool(t,{length:n,nullCount:r}=this.nextFieldNode()){return jt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitInt(t,{length:n,nullCount:r}=this.nextFieldNode()){return jt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitFloat(t,{length:n,nullCount:r}=this.nextFieldNode()){return jt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitUtf8(t,{length:n,nullCount:r}=this.nextFieldNode()){return jt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),valueOffsets:this.readOffsets(t),data:this.readData(t)})}visitBinary(t,{length:n,nullCount:r}=this.nextFieldNode()){return jt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),valueOffsets:this.readOffsets(t),data:this.readData(t)})}visitFixedSizeBinary(t,{length:n,nullCount:r}=this.nextFieldNode()){return jt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitDate(t,{length:n,nullCount:r}=this.nextFieldNode()){return jt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitTimestamp(t,{length:n,nullCount:r}=this.nextFieldNode()){return jt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitTime(t,{length:n,nullCount:r}=this.nextFieldNode()){return jt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitDecimal(t,{length:n,nullCount:r}=this.nextFieldNode()){return jt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitList(t,{length:n,nullCount:r}=this.nextFieldNode()){return jt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),valueOffsets:this.readOffsets(t),child:this.visit(t.children[0])})}visitStruct(t,{length:n,nullCount:r}=this.nextFieldNode()){return jt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),children:this.visitMany(t.children)})}visitUnion(t){return t.mode===ji.Sparse?this.visitSparseUnion(t):this.visitDenseUnion(t)}visitDenseUnion(t,{length:n,nullCount:r}=this.nextFieldNode()){return jt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),typeIds:this.readTypeIds(t),valueOffsets:this.readOffsets(t),children:this.visitMany(t.children)})}visitSparseUnion(t,{length:n,nullCount:r}=this.nextFieldNode()){return jt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),typeIds:this.readTypeIds(t),children:this.visitMany(t.children)})}visitDictionary(t,{length:n,nullCount:r}=this.nextFieldNode()){return jt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t.indices),dictionary:this.readDictionary(t)})}visitInterval(t,{length:n,nullCount:r}=this.nextFieldNode()){return jt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitFixedSizeList(t,{length:n,nullCount:r}=this.nextFieldNode()){return jt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),child:this.visit(t.children[0])})}visitMap(t,{length:n,nullCount:r}=this.nextFieldNode()){return jt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),valueOffsets:this.readOffsets(t),child:this.visit(t.children[0])})}nextFieldNode(){return this.nodes[++this.nodesIndex]}nextBufferRange(){return this.buffers[++this.buffersIndex]}readNullBitmap(t,n,r=this.nextBufferRange()){return n>0&&this.readData(t,r)||new Uint8Array(0)}readOffsets(t,n){return this.readData(t,n)}readTypeIds(t,n){return this.readData(t,n)}readData(t,{length:n,offset:r}=this.nextBufferRange()){return this.bytes.subarray(r,r+n)}readDictionary(t){return this.dictionaries.get(t.id)}},Rq=class extends tO{constructor(t,n,r,i){super(new Uint8Array(0),n,r,i),this.sources=t}readNullBitmap(t,n,{offset:r}=this.nextBufferRange()){return n<=0?new Uint8Array(0):L2(this.sources[r])}readOffsets(t,{offset:n}=this.nextBufferRange()){return ye(Uint8Array,ye(Int32Array,this.sources[n]))}readTypeIds(t,{offset:n}=this.nextBufferRange()){return ye(Uint8Array,ye(t.ArrayType,this.sources[n]))}readData(t,{offset:n}=this.nextBufferRange()){const{sources:r}=this;return Bt.isTimestamp(t)||(Bt.isInt(t)||Bt.isTime(t))&&t.bitWidth===64||Bt.isDate(t)&&t.unit===Bo.MILLISECOND?ye(Uint8Array,xh.convertArray(r[n])):Bt.isDecimal(t)?ye(Uint8Array,Bq.convertArray(r[n])):Bt.isBinary(t)||Bt.isFixedSizeBinary(t)?Lq(r[n]):Bt.isBool(t)?L2(r[n]):Bt.isUtf8(t)?kI(r[n].join("")):ye(Uint8Array,ye(t.ArrayType,r[n].map(i=>+i)))}};function Lq(e){const t=e.join(""),n=new Uint8Array(t.length/2);for(let r=0;r<t.length;r+=2)n[r>>1]=Number.parseInt(t.slice(r,r+2),16);return n}let Et=class extends Wt{compareSchemas(t,n){return t===n||n instanceof t.constructor&&this.compareManyFields(t.fields,n.fields)}compareManyFields(t,n){return t===n||Array.isArray(t)&&Array.isArray(n)&&t.length===n.length&&t.every((r,i)=>this.compareFields(r,n[i]))}compareFields(t,n){return t===n||n instanceof t.constructor&&t.name===n.name&&t.nullable===n.nullable&&this.visit(t.type,n.type)}};function Tr(e,t){return t instanceof e.constructor}function Hp(e,t){return e===t||Tr(e,t)}function Vo(e,t){return e===t||Tr(e,t)&&e.bitWidth===t.bitWidth&&e.isSigned===t.isSigned}function Rb(e,t){return e===t||Tr(e,t)&&e.precision===t.precision}function Cq(e,t){return e===t||Tr(e,t)&&e.byteWidth===t.byteWidth}function WI(e,t){return e===t||Tr(e,t)&&e.unit===t.unit}function Gp(e,t){return e===t||Tr(e,t)&&e.unit===t.unit&&e.timezone===t.timezone}function Xp(e,t){return e===t||Tr(e,t)&&e.unit===t.unit&&e.bitWidth===t.bitWidth}function Uq(e,t){return e===t||Tr(e,t)&&e.children.length===t.children.length&&Ra.compareManyFields(e.children,t.children)}function Pq(e,t){return e===t||Tr(e,t)&&e.children.length===t.children.length&&Ra.compareManyFields(e.children,t.children)}function HI(e,t){return e===t||Tr(e,t)&&e.mode===t.mode&&e.typeIds.every((n,r)=>n===t.typeIds[r])&&Ra.compareManyFields(e.children,t.children)}function zq(e,t){return e===t||Tr(e,t)&&e.id===t.id&&e.isOrdered===t.isOrdered&&Ra.visit(e.indices,t.indices)&&Ra.visit(e.dictionary,t.dictionary)}function GI(e,t){return e===t||Tr(e,t)&&e.unit===t.unit}function jq(e,t){return e===t||Tr(e,t)&&e.listSize===t.listSize&&e.children.length===t.children.length&&Ra.compareManyFields(e.children,t.children)}function Vq(e,t){return e===t||Tr(e,t)&&e.keysSorted===t.keysSorted&&e.children.length===t.children.length&&Ra.compareManyFields(e.children,t.children)}Et.prototype.visitNull=Hp;Et.prototype.visitBool=Hp;Et.prototype.visitInt=Vo;Et.prototype.visitInt8=Vo;Et.prototype.visitInt16=Vo;Et.prototype.visitInt32=Vo;Et.prototype.visitInt64=Vo;Et.prototype.visitUint8=Vo;Et.prototype.visitUint16=Vo;Et.prototype.visitUint32=Vo;Et.prototype.visitUint64=Vo;Et.prototype.visitFloat=Rb;Et.prototype.visitFloat16=Rb;Et.prototype.visitFloat32=Rb;Et.prototype.visitFloat64=Rb;Et.prototype.visitUtf8=Hp;Et.prototype.visitBinary=Hp;Et.prototype.visitFixedSizeBinary=Cq;Et.prototype.visitDate=WI;Et.prototype.visitDateDay=WI;Et.prototype.visitDateMillisecond=WI;Et.prototype.visitTimestamp=Gp;Et.prototype.visitTimestampSecond=Gp;Et.prototype.visitTimestampMillisecond=Gp;Et.prototype.visitTimestampMicrosecond=Gp;Et.prototype.visitTimestampNanosecond=Gp;Et.prototype.visitTime=Xp;Et.prototype.visitTimeSecond=Xp;Et.prototype.visitTimeMillisecond=Xp;Et.prototype.visitTimeMicrosecond=Xp;Et.prototype.visitTimeNanosecond=Xp;Et.prototype.visitDecimal=Hp;Et.prototype.visitList=Uq;Et.prototype.visitStruct=Pq;Et.prototype.visitUnion=HI;Et.prototype.visitDenseUnion=HI;Et.prototype.visitSparseUnion=HI;Et.prototype.visitDictionary=zq;Et.prototype.visitInterval=GI;Et.prototype.visitIntervalDayTime=GI;Et.prototype.visitIntervalYearMonth=GI;Et.prototype.visitFixedSizeList=jq;Et.prototype.visitMap=Vq;const Ra=new Et;function Yq(e,t){return Ra.compareSchemas(e,t)}function Aw(e,t){return qq(e,t.map(n=>n.data.concat()))}function qq(e,t){const n=[...e.fields],r=[],i={numBatches:t.reduce((f,d)=>Math.max(f,d.length),0)};let s=0,o=0,a=-1;const l=t.length;let c,u=[];for(;i.numBatches-- >0;){for(o=Number.POSITIVE_INFINITY,a=-1;++a<l;)u[a]=c=t[a].shift(),o=Math.min(o,c?c.length:o);Number.isFinite(o)&&(u=Wq(n,o,u,t,i),o>0&&(r[s++]=jt({type:new Wn(n),length:o,nullCount:0,children:u.slice()})))}return[e=e.assign(n),r.map(f=>new Di(e,f))]}function Wq(e,t,n,r,i){var s;const o=(t+63&-64)>>3;for(let a=-1,l=r.length;++a<l;){const c=n[a],u=c==null?void 0:c.length;if(u>=t)u===t?n[a]=c:(n[a]=c.slice(0,t),i.numBatches=Math.max(i.numBatches,r[a].unshift(c.slice(t,u-t))));else{const f=e[a];e[a]=f.clone({nullable:!0}),n[a]=(s=c==null?void 0:c._changeLengthAndBackfillNullBitmap(t))!==null&&s!==void 0?s:jt({type:f.type,length:t,nullCount:t,nullBitmap:new Uint8Array(o)})}}return n}var eO;let sp=class Nl{constructor(...t){var n,r;if(t.length===0)return this.batches=[],this.schema=new Re([]),this._offsets=[0],this;let i,s;t[0]instanceof Re&&(i=t.shift()),t[t.length-1]instanceof Uint32Array&&(s=t.pop());const o=l=>{if(l){if(l instanceof Di)return[l];if(l instanceof Nl)return l.batches;if(l instanceof De){if(l.type instanceof Wn)return[new Di(new Re(l.type.children),l)]}else{if(Array.isArray(l))return l.flatMap(c=>o(c));if(typeof l[Symbol.iterator]=="function")return[...l].flatMap(c=>o(c));if(typeof l=="object"){const c=Object.keys(l),u=c.map(h=>new Ke([l[h]])),f=new Re(c.map((h,p)=>new Ge(String(h),u[p].type))),[,d]=Aw(f,u);return d.length===0?[new Di(l)]:d}}}return[]},a=t.flatMap(l=>o(l));if(i=(r=i??((n=a[0])===null||n===void 0?void 0:n.schema))!==null&&r!==void 0?r:new Re([]),!(i instanceof Re))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const l of a){if(!(l instanceof Di))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!Yq(i,l.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=i,this.batches=a,this._offsets=s??R8(this.data)}get data(){return this.batches.map(({data:t})=>t)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((t,n)=>t+n.length,0)}get nullCount(){return this._nullCount===-1&&(this._nullCount=B8(this.data)),this._nullCount}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}getByteLength(t){return 0}[Symbol.iterator](){return this.batches.length>0?VI.visit(new Ke(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(`,
  `)}
]`}concat(...t){const n=this.schema,r=this.data.concat(t.flatMap(({data:i})=>i));return new Nl(n,r.map(i=>new Di(n,i)))}slice(t,n){const r=this.schema;[t,n]=O8({length:this.numRows},t,n);const i=L8(this.data,this._offsets,t,n);return new Nl(r,i.map(s=>new Di(r,s)))}getChild(t){return this.getChildAt(this.schema.fields.findIndex(n=>n.name===t))}getChildAt(t){if(t>-1&&t<this.schema.fields.length){const n=this.data.map(r=>r.children[t]);if(n.length===0){const{type:r}=this.schema.fields[t],i=jt({type:r,length:0,nullCount:0});n.push(i._changeLengthAndBackfillNullBitmap(this.numRows))}return new Ke(n)}return null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=[...this.batches];if(t>-1&&t<this.numCols){n||(n=new Ke([jt({type:new Fa,length:this.numRows})]));const s=r.fields.slice(),o=s[t].clone({type:n.type}),a=this.schema.fields.map((l,c)=>this.getChildAt(c));[s[t],a[t]]=[o,n],[r,i]=Aw(r,a)}return new Nl(r,i)}select(t){const n=this.schema.fields.reduce((r,i,s)=>r.set(i.name,s),new Map);return this.selectAt(t.map(r=>n.get(r)).filter(r=>r>-1))}selectAt(t){const n=this.schema.selectAt(t),r=this.batches.map(i=>i.selectAt(t));return new Nl(n,r)}assign(t){const n=this.schema.fields,[r,i]=t.schema.fields.reduce((a,l,c)=>{const[u,f]=a,d=n.findIndex(h=>h.name===l.name);return~d?f[d]=c:u.push(c),a},[[],[]]),s=this.schema.assign(t.schema),o=[...n.map((a,l)=>[l,i[l]]).map(([a,l])=>l===void 0?this.getChildAt(a):t.getChildAt(l)),...r.map(a=>t.getChildAt(a))].filter(Boolean);return new Nl(...Aw(s,o))}};eO=Symbol.toStringTag;sp[eO]=(e=>(e.schema=null,e.batches=[],e._offsets=new Uint32Array([0]),e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,e.isValid=Hu(jI),e.get=Hu(gr.getVisitFn(U.Struct)),e.set=C8(gi.getVisitFn(U.Struct)),e.indexOf=U8(ug.getVisitFn(U.Struct)),e.getByteLength=Hu(Ls.getVisitFn(U.Struct)),"Table"))(sp.prototype);var nO;let Di=class rh{constructor(...t){switch(t.length){case 2:{if([this.schema]=t,!(this.schema instanceof Re))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=jt({nullCount:0,type:new Wn(this.schema.fields),children:this.schema.fields.map(n=>jt({type:n.type,nullCount:0}))})]=t,!(this.data instanceof De))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=bM(this.schema,this.data.children);break}case 1:{const[n]=t,{fields:r,children:i,length:s}=Object.keys(n).reduce((l,c,u)=>(l.children[u]=n[c],l.length=Math.max(l.length,n[c].length),l.fields[u]=Ge.new({name:c,type:n[c].type,nullable:!0}),l),{length:0,fields:new Array,children:new Array}),o=new Re(r),a=jt({type:new Wn(r),length:s,children:i,nullCount:0});[this.schema,this.data]=bM(o,a.children,s);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=rO(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(t){return this.data.getValid(t)}get(t){return gr.visit(this.data,t)}set(t,n){return gi.visit(this.data,t,n)}indexOf(t,n){return ug.visit(this.data,t,n)}getByteLength(t){return Ls.visit(this.data,t)}[Symbol.iterator](){return VI.visit(new Ke([this.data]))}toArray(){return[...this]}concat(...t){return new sp(this.schema,[this,...t])}slice(t,n){const[r]=new Ke([this.data]).slice(t,n).data;return new rh(this.schema,r)}getChild(t){var n;return this.getChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.schema.fields.length?new Ke([this.data.children[t]]):null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=this.data;if(t>-1&&t<this.numCols){n||(n=new Ke([jt({type:new Fa,length:this.numRows})]));const s=r.fields.slice(),o=i.children.slice(),a=s[t].clone({type:n.type});[s[t],o[t]]=[a,n.data[0]],r=new Re(s,new Map(this.schema.metadata)),i=jt({type:new Wn(s),children:o})}return new rh(r,i)}select(t){const n=this.schema.select(t),r=new Wn(n.fields),i=[];for(const s of t){const o=this.schema.fields.findIndex(a=>a.name===s);~o&&(i[o]=this.data.children[o])}return new rh(n,jt({type:r,length:this.numRows,children:i}))}selectAt(t){const n=this.schema.selectAt(t),r=t.map(s=>this.data.children[s]).filter(Boolean),i=jt({type:new Wn(n.fields),length:this.numRows,children:r});return new rh(n,i)}};nO=Symbol.toStringTag;Di[nO]=(e=>(e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(Di.prototype);function bM(e,t,n=t.reduce((r,i)=>Math.max(r,i.length),0)){var r;const i=[...e.fields],s=[...t],o=(n+63&-64)>>3;for(const[a,l]of e.fields.entries()){const c=t[a];(!c||c.length!==n)&&(i[a]=l.clone({nullable:!0}),s[a]=(r=c==null?void 0:c._changeLengthAndBackfillNullBitmap(n))!==null&&r!==void 0?r:jt({type:l.type,length:n,nullCount:n,nullBitmap:new Uint8Array(o)}))}return[e.assign(i),jt({type:new Wn(i),length:n,children:s})]}function rO(e,t,n=new Map){for(let r=-1,i=e.length;++r<i;){const o=e[r].type,a=t[r];if(Bt.isDictionary(o)){if(!n.has(o.id))a.dictionary&&n.set(o.id,a.dictionary);else if(n.get(o.id)!==a.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}o.children&&o.children.length>0&&rO(o.children,a.children,n)}return n}let iO=class extends Di{constructor(t){const n=t.fields.map(i=>jt({type:i.type})),r=jt({type:new Wn(t.fields),nullCount:0,children:n});super(t,r)}};var wg;(function(e){e[e.BUFFER=0]="BUFFER"})(wg||(wg={}));var _g;(function(e){e[e.LZ4_FRAME=0]="LZ4_FRAME",e[e.ZSTD=1]="ZSTD"})(_g||(_g={}));let Hq=class kl{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBodyCompression(t,n){return(n||new kl).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBodyCompression(t,n){return t.setPosition(t.position()+ge),(n||new kl).__init(t.readInt32(t.position())+t.position(),t)}codec(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt8(this.bb_pos+t):_g.LZ4_FRAME}method(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt8(this.bb_pos+t):wg.BUFFER}static startBodyCompression(t){t.startObject(2)}static addCodec(t,n){t.addFieldInt8(0,n,_g.LZ4_FRAME)}static addMethod(t,n){t.addFieldInt8(1,n,wg.BUFFER)}static endBodyCompression(t){return t.endObject()}static createBodyCompression(t,n,r){return kl.startBodyCompression(t),kl.addCodec(t,n),kl.addMethod(t,r),kl.endBodyCompression(t)}},sO=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(t,n,r){return t.prep(8,16),t.writeInt64(r),t.writeInt64(n),t.offset()}},oO=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(t,n,r){return t.prep(8,16),t.writeInt64(r),t.writeInt64(n),t.offset()}},lo=class H2{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsRecordBatch(t,n){return(n||new H2).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsRecordBatch(t,n){return t.setPosition(t.position()+ge),(n||new H2).__init(t.readInt32(t.position())+t.position(),t)}length(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}nodes(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new oO).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}nodesLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}buffers(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new sO).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}buffersLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}compression(t){const n=this.bb.__offset(this.bb_pos,10);return n?(t||new Hq).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}static startRecordBatch(t){t.startObject(4)}static addLength(t,n){t.addFieldInt64(0,n,t.createLong(0,0))}static addNodes(t,n){t.addFieldOffset(1,n,0)}static startNodesVector(t,n){t.startVector(16,n,8)}static addBuffers(t,n){t.addFieldOffset(2,n,0)}static startBuffersVector(t,n){t.startVector(16,n,8)}static addCompression(t,n){t.addFieldOffset(3,n,0)}static endRecordBatch(t){return t.endObject()}},au=class G2{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryBatch(t,n){return(n||new G2).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryBatch(t,n){return t.setPosition(t.position()+ge),(n||new G2).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}data(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new lo).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isDelta(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startDictionaryBatch(t){t.startObject(3)}static addId(t,n){t.addFieldInt64(0,n,t.createLong(0,0))}static addData(t,n){t.addFieldOffset(1,n,0)}static addIsDelta(t,n){t.addFieldInt8(2,+n,0)}static endDictionaryBatch(t){return t.endObject()}};var Sg;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(Sg||(Sg={}));let Jo=class os{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMessage(t,n){return(n||new os).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMessage(t,n){return t.setPosition(t.position()+ge),(n||new os).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):vf.V1}headerType(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):Sg.NONE}header(t){const n=this.bb.__offset(this.bb_pos,8);return n?this.bb.__union(t,this.bb_pos+n):null}bodyLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new oi).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startMessage(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,vf.V1)}static addHeaderType(t,n){t.addFieldInt8(1,n,Sg.NONE)}static addHeader(t,n){t.addFieldOffset(2,n,0)}static addBodyLength(t,n){t.addFieldInt64(3,n,t.createLong(0,0))}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endMessage(t){return t.endObject()}static finishMessageBuffer(t,n){t.finish(n)}static finishSizePrefixedMessageBuffer(t,n){t.finish(n,void 0,!0)}static createMessage(t,n,r,i,s,o){return os.startMessage(t),os.addVersion(t,n),os.addHeaderType(t,r),os.addHeader(t,i),os.addBodyLength(t,s),os.addCustomMetadata(t,o),os.endMessage(t)}};var Gq=Eo;let Xq=class extends Wt{visit(t,n){return t==null||n==null?void 0:super.visit(t,n)}visitNull(t,n){return dM.startNull(n),dM.endNull(n)}visitInt(t,n){return Au.startInt(n),Au.addBitWidth(n,t.bitWidth),Au.addIsSigned(n,t.isSigned),Au.endInt(n)}visitFloat(t,n){return rm.startFloatingPoint(n),rm.addPrecision(n,t.precision),rm.endFloatingPoint(n)}visitBinary(t,n){return cM.startBinary(n),cM.endBinary(n)}visitBool(t,n){return uM.startBool(n),uM.endBool(n)}visitUtf8(t,n){return pM.startUtf8(n),pM.endUtf8(n)}visitDecimal(t,n){return eu.startDecimal(n),eu.addScale(n,t.scale),eu.addPrecision(n,t.precision),eu.addBitWidth(n,t.bitWidth),eu.endDecimal(n)}visitDate(t,n){return tm.startDate(n),tm.addUnit(n,t.unit),tm.endDate(n)}visitTime(t,n){return th.startTime(n),th.addUnit(n,t.unit),th.addBitWidth(n,t.bitWidth),th.endTime(n)}visitTimestamp(t,n){const r=t.timezone&&n.createString(t.timezone)||void 0;return eh.startTimestamp(n),eh.addUnit(n,t.unit),r!==void 0&&eh.addTimezone(n,r),eh.endTimestamp(n)}visitInterval(t,n){return im.startInterval(n),im.addUnit(n,t.unit),im.endInterval(n)}visitList(t,n){return fM.startList(n),fM.endList(n)}visitStruct(t,n){return hM.startStruct_(n),hM.endStruct_(n)}visitUnion(t,n){Al.startTypeIdsVector(n,t.typeIds.length);const r=Al.createTypeIdsVector(n,t.typeIds);return Al.startUnion(n),Al.addMode(n,t.mode),Al.addTypeIds(n,r),Al.endUnion(n)}visitDictionary(t,n){const r=this.visit(t.indices,n);return Jc.startDictionaryEncoding(n),Jc.addId(n,new Gq(t.id,0)),Jc.addIsOrdered(n,t.isOrdered),r!==void 0&&Jc.addIndexType(n,r),Jc.endDictionaryEncoding(n)}visitFixedSizeBinary(t,n){return em.startFixedSizeBinary(n),em.addByteWidth(n,t.byteWidth),em.endFixedSizeBinary(n)}visitFixedSizeList(t,n){return nm.startFixedSizeList(n),nm.addListSize(n,t.listSize),nm.endFixedSizeList(n)}visitMap(t,n){return sm.startMap(n),sm.addKeysSorted(n,t.keysSorted),sm.endMap(n)}};const Mw=new Xq;function Qq(e,t=new Map){return new Re(Zq(e,t),am(e.customMetadata),t)}function aO(e){return new Vi(e.count,lO(e.columns),cO(e.columns))}function Kq(e){return new Ro(aO(e.data),e.id,e.isDelta)}function Zq(e,t){return(e.fields||[]).filter(Boolean).map(n=>Ge.fromJSON(n,t))}function vM(e,t){return(e.children||[]).filter(Boolean).map(n=>Ge.fromJSON(n,t))}function lO(e){return(e||[]).reduce((t,n)=>[...t,new td(n.count,Jq(n.VALIDITY)),...lO(n.children)],[])}function cO(e,t=[]){for(let n=-1,r=(e||[]).length;++n<r;){const i=e[n];i.VALIDITY&&t.push(new wo(t.length,i.VALIDITY.length)),i.TYPE&&t.push(new wo(t.length,i.TYPE.length)),i.OFFSET&&t.push(new wo(t.length,i.OFFSET.length)),i.DATA&&t.push(new wo(t.length,i.DATA.length)),t=cO(i.children,t)}return t}function Jq(e){return(e||[]).reduce((t,n)=>t+ +(n===0),0)}function tW(e,t){let n,r,i,s,o,a;return!t||!(s=e.dictionary)?(o=_M(e,vM(e,t)),i=new Ge(e.name,o,e.nullable,am(e.customMetadata))):t.has(n=s.id)?(r=(r=s.indexType)?wM(r):new np,a=new gf(t.get(n),r,n,s.isOrdered),i=new Ge(e.name,a,e.nullable,am(e.customMetadata))):(r=(r=s.indexType)?wM(r):new np,t.set(n,o=_M(e,vM(e,t))),a=new gf(o,r,n,s.isOrdered),i=new Ge(e.name,a,e.nullable,am(e.customMetadata))),i||null}function am(e){return new Map(Object.entries(e||{}))}function wM(e){return new Ba(e.isSigned,e.bitWidth)}function _M(e,t){const n=e.type.name;switch(n){case"NONE":return new Fa;case"null":return new Fa;case"binary":return new Zm;case"utf8":return new Jm;case"bool":return new tg;case"list":return new sg((t||[])[0]);case"struct":return new Wn(t||[]);case"struct_":return new Wn(t||[])}switch(n){case"int":{const r=e.type;return new Ba(r.isSigned,r.bitWidth)}case"floatingpoint":{const r=e.type;return new rp(hr[r.precision])}case"decimal":{const r=e.type;return new eg(r.scale,r.precision,r.bitWidth)}case"date":{const r=e.type;return new ng(Bo[r.unit])}case"time":{const r=e.type;return new ip(te[r.unit],r.bitWidth)}case"timestamp":{const r=e.type;return new rg(te[r.unit],r.timezone)}case"interval":{const r=e.type;return new ig(Oa[r.unit])}case"union":{const r=e.type;return new og(ji[r.mode],r.typeIds||[],t||[])}case"fixedsizebinary":{const r=e.type;return new ag(r.byteWidth)}case"fixedsizelist":{const r=e.type;return new lg(r.listSize,(t||[])[0])}case"map":{const r=e.type;return new cg((t||[])[0],r.keysSorted)}}throw new Error(`Unrecognized type: "${n}"`)}var pc=Eo,eW=G8,nW=bf;let Ih=class lu{constructor(t,n,r,i){this._version=n,this._headerType=r,this.body=new Uint8Array(0),i&&(this._createHeader=()=>i),this._bodyLength=typeof t=="number"?t:t.low}static fromJSON(t,n){const r=new lu(0,ri.V4,n);return r._createHeader=rW(t,n),r}static decode(t){t=new nW(re(t));const n=Jo.getRootAsMessage(t),r=n.bodyLength(),i=n.version(),s=n.headerType(),o=new lu(r,i,s);return o._createHeader=iW(n,s),o}static encode(t){const n=new eW;let r=-1;return t.isSchema()?r=Re.encode(n,t.header()):t.isRecordBatch()?r=Vi.encode(n,t.header()):t.isDictionaryBatch()&&(r=Ro.encode(n,t.header())),Jo.startMessage(n),Jo.addVersion(n,ri.V4),Jo.addHeader(n,r),Jo.addHeaderType(n,t.headerType),Jo.addBodyLength(n,new pc(t.bodyLength,0)),Jo.finishMessageBuffer(n,Jo.endMessage(n)),n.asUint8Array()}static from(t,n=0){if(t instanceof Re)return new lu(0,ri.V4,fe.Schema,t);if(t instanceof Vi)return new lu(n,ri.V4,fe.RecordBatch,t);if(t instanceof Ro)return new lu(n,ri.V4,fe.DictionaryBatch,t);throw new Error(`Unrecognized Message header: ${t}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===fe.Schema}isRecordBatch(){return this.headerType===fe.RecordBatch}isDictionaryBatch(){return this.headerType===fe.DictionaryBatch}},Vi=class{constructor(t,n,r){this._nodes=n,this._buffers=r,this._length=typeof t=="number"?t:t.low}get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}},Ro=class{constructor(t,n,r=!1){this._data=t,this._isDelta=r,this._id=typeof n=="number"?n:n.low}get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}},wo=class{constructor(t,n){this.offset=typeof t=="number"?t:t.low,this.length=typeof n=="number"?n:n.low}},td=class{constructor(t,n){this.length=typeof t=="number"?t:t.low,this.nullCount=typeof n=="number"?n:n.low}};function rW(e,t){return()=>{switch(t){case fe.Schema:return Re.fromJSON(e);case fe.RecordBatch:return Vi.fromJSON(e);case fe.DictionaryBatch:return Ro.fromJSON(e)}throw new Error(`Unrecognized Message type: { name: ${fe[t]}, type: ${t} }`)}}function iW(e,t){return()=>{switch(t){case fe.Schema:return Re.decode(e.header(new cs));case fe.RecordBatch:return Vi.decode(e.header(new lo),e.version());case fe.DictionaryBatch:return Ro.decode(e.header(new au),e.version())}throw new Error(`Unrecognized Message type: { name: ${fe[t]}, type: ${t} }`)}}Ge.encode=yW;Ge.decode=hW;Ge.fromJSON=tW;Re.encode=pW;Re.decode=sW;Re.fromJSON=Qq;Vi.encode=mW;Vi.decode=oW;Vi.fromJSON=aO;Ro.encode=gW;Ro.decode=aW;Ro.fromJSON=Kq;td.encode=bW;td.decode=cW;wo.encode=vW;wo.decode=lW;function sW(e,t=new Map){const n=dW(e,t);return new Re(n,lm(e),t)}function oW(e,t=ri.V4){if(e.compression()!==null)throw new Error("Record batch compression not implemented");return new Vi(e.length(),uW(e),fW(e,t))}function aW(e,t=ri.V4){return new Ro(Vi.decode(e.data(),t),e.id(),e.isDelta())}function lW(e){return new wo(e.offset(),e.length())}function cW(e){return new td(e.length(),e.nullCount())}function uW(e){const t=[];for(let n,r=-1,i=-1,s=e.nodesLength();++r<s;)(n=e.nodes(r))&&(t[++i]=td.decode(n));return t}function fW(e,t){const n=[];for(let r,i=-1,s=-1,o=e.buffersLength();++i<o;)(r=e.buffers(i))&&(t<ri.V4&&(r.bb_pos+=8*(i+1)),n[++s]=wo.decode(r));return n}function dW(e,t){const n=[];for(let r,i=-1,s=-1,o=e.fieldsLength();++i<o;)(r=e.fields(i))&&(n[++s]=Ge.decode(r,t));return n}function SM(e,t){const n=[];for(let r,i=-1,s=-1,o=e.childrenLength();++i<o;)(r=e.children(i))&&(n[++s]=Ge.decode(r,t));return n}function hW(e,t){let n,r,i,s,o,a;return!t||!(a=e.dictionary())?(i=IM(e,SM(e,t)),r=new Ge(e.name(),i,e.nullable(),lm(e))):t.has(n=a.id().low)?(s=(s=a.indexType())?xM(s):new np,o=new gf(t.get(n),s,n,a.isOrdered()),r=new Ge(e.name(),o,e.nullable(),lm(e))):(s=(s=a.indexType())?xM(s):new np,t.set(n,i=IM(e,SM(e,t))),o=new gf(i,s,n,a.isOrdered()),r=new Ge(e.name(),o,e.nullable(),lm(e))),r||null}function lm(e){const t=new Map;if(e)for(let n,r,i=-1,s=Math.trunc(e.customMetadataLength());++i<s;)(n=e.customMetadata(i))&&(r=n.key())!=null&&t.set(r,n.value());return t}function xM(e){return new Ba(e.isSigned(),e.bitWidth())}function IM(e,t){const n=e.typeType();switch(n){case Oe.NONE:return new Fa;case Oe.Null:return new Fa;case Oe.Binary:return new Zm;case Oe.Utf8:return new Jm;case Oe.Bool:return new tg;case Oe.List:return new sg((t||[])[0]);case Oe.Struct_:return new Wn(t||[])}switch(n){case Oe.Int:{const r=e.type(new Au);return new Ba(r.isSigned(),r.bitWidth())}case Oe.FloatingPoint:{const r=e.type(new rm);return new rp(r.precision())}case Oe.Decimal:{const r=e.type(new eu);return new eg(r.scale(),r.precision(),r.bitWidth())}case Oe.Date:{const r=e.type(new tm);return new ng(r.unit())}case Oe.Time:{const r=e.type(new th);return new ip(r.unit(),r.bitWidth())}case Oe.Timestamp:{const r=e.type(new eh);return new rg(r.unit(),r.timezone())}case Oe.Interval:{const r=e.type(new im);return new ig(r.unit())}case Oe.Union:{const r=e.type(new Al);return new og(r.mode(),r.typeIdsArray()||[],t||[])}case Oe.FixedSizeBinary:{const r=e.type(new em);return new ag(r.byteWidth())}case Oe.FixedSizeList:{const r=e.type(new nm);return new lg(r.listSize(),(t||[])[0])}case Oe.Map:{const r=e.type(new sm);return new cg((t||[])[0],r.keysSorted())}}throw new Error(`Unrecognized type: "${Oe[n]}" (${n})`)}function pW(e,t){const n=t.fields.map(s=>Ge.encode(e,s));cs.startFieldsVector(e,n.length);const r=cs.createFieldsVector(e,n),i=t.metadata&&t.metadata.size>0?cs.createCustomMetadataVector(e,[...t.metadata].map(([s,o])=>{const a=e.createString(`${s}`),l=e.createString(`${o}`);return oi.startKeyValue(e),oi.addKey(e,a),oi.addValue(e,l),oi.endKeyValue(e)})):-1;return cs.startSchema(e),cs.addFields(e,r),cs.addEndianness(e,wW?wf.Little:wf.Big),i!==-1&&cs.addCustomMetadata(e,i),cs.endSchema(e)}function yW(e,t){let n=-1,r=-1,i=-1;const s=t.type;let o=t.typeId;Bt.isDictionary(s)?(o=s.dictionary.typeId,i=Mw.visit(s,e),r=Mw.visit(s.dictionary,e)):r=Mw.visit(s,e);const a=(s.children||[]).map(u=>Ge.encode(e,u)),l=Xr.createChildrenVector(e,a),c=t.metadata&&t.metadata.size>0?Xr.createCustomMetadataVector(e,[...t.metadata].map(([u,f])=>{const d=e.createString(`${u}`),h=e.createString(`${f}`);return oi.startKeyValue(e),oi.addKey(e,d),oi.addValue(e,h),oi.endKeyValue(e)})):-1;return t.name&&(n=e.createString(t.name)),Xr.startField(e),Xr.addType(e,r),Xr.addTypeType(e,o),Xr.addChildren(e,l),Xr.addNullable(e,!!t.nullable),n!==-1&&Xr.addName(e,n),i!==-1&&Xr.addDictionary(e,i),c!==-1&&Xr.addCustomMetadata(e,c),Xr.endField(e)}function mW(e,t){const n=t.nodes||[],r=t.buffers||[];lo.startNodesVector(e,n.length);for(const o of n.slice().reverse())td.encode(e,o);const i=e.endVector();lo.startBuffersVector(e,r.length);for(const o of r.slice().reverse())wo.encode(e,o);const s=e.endVector();return lo.startRecordBatch(e),lo.addLength(e,new pc(t.length,0)),lo.addNodes(e,i),lo.addBuffers(e,s),lo.endRecordBatch(e)}function gW(e,t){const n=Vi.encode(e,t.data);return au.startDictionaryBatch(e),au.addId(e,new pc(t.id,0)),au.addIsDelta(e,t.isDelta),au.addData(e,n),au.endDictionaryBatch(e)}function bW(e,t){return oO.createFieldNode(e,new pc(t.length,0),new pc(t.nullCount,0))}function vW(e,t){return sO.createBuffer(e,new pc(t.offset,0),new pc(t.length,0))}const wW=(()=>{const e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),new Int16Array(e)[0]===256})(),XI=e=>`Expected ${fe[e]} Message in stream, but was null or length 0.`,QI=e=>`Header pointer of flatbuffer-encoded ${fe[e]} Message is null or length 0.`,uO=(e,t)=>`Expected to read ${e} metadata bytes, but only read ${t}.`,fO=(e,t)=>`Expected to read ${e} bytes for message body, but only read ${t}.`;let dO=class{constructor(t){this.source=t instanceof gg?t:new gg(t)}[Symbol.iterator](){return this}next(){let t;return(t=this.readMetadataLength()).done||t.value===-1&&(t=this.readMetadataLength()).done||(t=this.readMetadata(t.value)).done?Le:t}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}readMessage(t){let n;if((n=this.next()).done)return null;if(t!=null&&n.value.headerType!==t)throw new Error(XI(t));return n.value}readMessageBody(t){if(t<=0)return new Uint8Array(0);const n=re(this.source.read(t));if(n.byteLength<t)throw new Error(fO(t,n.byteLength));return n.byteOffset%8===0&&n.byteOffset+n.byteLength<=n.buffer.byteLength?n:n.slice()}readSchema(t=!1){const n=fe.Schema,r=this.readMessage(n),i=r==null?void 0:r.header();if(t&&!i)throw new Error(QI(n));return i}readMetadataLength(){const t=this.source.read(Lb),n=t&&new bf(t),r=(n==null?void 0:n.readInt32(0))||0;return{done:r===0,value:r}}readMetadata(t){const n=this.source.read(t);if(!n)return Le;if(n.byteLength<t)throw new Error(uO(t,n.byteLength));return{done:!1,value:Ih.decode(n)}}},_W=class{constructor(t,n){this.source=t instanceof bg?t:ED(t)?new vg(t,n):new bg(t)}[Symbol.asyncIterator](){return this}next(){return W(this,void 0,void 0,function*(){let t;return(t=yield this.readMetadataLength()).done||t.value===-1&&(t=yield this.readMetadataLength()).done||(t=yield this.readMetadata(t.value)).done?Le:t})}throw(t){return W(this,void 0,void 0,function*(){return yield this.source.throw(t)})}return(t){return W(this,void 0,void 0,function*(){return yield this.source.return(t)})}readMessage(t){return W(this,void 0,void 0,function*(){let n;if((n=yield this.next()).done)return null;if(t!=null&&n.value.headerType!==t)throw new Error(XI(t));return n.value})}readMessageBody(t){return W(this,void 0,void 0,function*(){if(t<=0)return new Uint8Array(0);const n=re(yield this.source.read(t));if(n.byteLength<t)throw new Error(fO(t,n.byteLength));return n.byteOffset%8===0&&n.byteOffset+n.byteLength<=n.buffer.byteLength?n:n.slice()})}readSchema(t=!1){return W(this,void 0,void 0,function*(){const n=fe.Schema,r=yield this.readMessage(n),i=r==null?void 0:r.header();if(t&&!i)throw new Error(QI(n));return i})}readMetadataLength(){return W(this,void 0,void 0,function*(){const t=yield this.source.read(Lb),n=t&&new bf(t),r=(n==null?void 0:n.readInt32(0))||0;return{done:r===0,value:r}})}readMetadata(t){return W(this,void 0,void 0,function*(){const n=yield this.source.read(t);if(!n)return Le;if(n.byteLength<t)throw new Error(uO(t,n.byteLength));return{done:!1,value:Ih.decode(n)}})}},SW=class extends dO{constructor(t){super(new Uint8Array(0)),this._schema=!1,this._body=[],this._batchIndex=0,this._dictionaryIndex=0,this._json=t instanceof mM?t:new mM(t)}next(){const{_json:t}=this;if(!this._schema)return this._schema=!0,{done:!1,value:Ih.fromJSON(t.schema,fe.Schema)};if(this._dictionaryIndex<t.dictionaries.length){const n=t.dictionaries[this._dictionaryIndex++];return this._body=n.data.columns,{done:!1,value:Ih.fromJSON(n,fe.DictionaryBatch)}}if(this._batchIndex<t.batches.length){const n=t.batches[this._batchIndex++];return this._body=n.columns,{done:!1,value:Ih.fromJSON(n,fe.RecordBatch)}}return this._body=[],Le}readMessageBody(t){return n(this._body);function n(r){return(r||[]).reduce((i,s)=>[...i,...s.VALIDITY&&[s.VALIDITY]||[],...s.TYPE&&[s.TYPE]||[],...s.OFFSET&&[s.OFFSET]||[],...s.DATA&&[s.DATA]||[],...n(s.children)],[])}}readMessage(t){let n;if((n=this.next()).done)return null;if(t!=null&&n.value.headerType!==t)throw new Error(XI(t));return n.value}readSchema(){const t=fe.Schema,n=this.readMessage(t),r=n==null?void 0:n.header();if(!n||!r)throw new Error(QI(t));return r}};const Lb=4,X2="ARROW1",xg=new Uint8Array(X2.length);for(let e=0;e<X2.length;e+=1)xg[e]=X2.codePointAt(e);function KI(e,t=0){for(let n=-1,r=xg.length;++n<r;)if(xg[n]!==e[t+n])return!1;return!0}const Qp=xg.length,hO=Qp+Lb,xW=Qp*2+Lb;let Kp=class cm extends K8{constructor(t){super(),this._impl=t}get closed(){return this._impl.closed}get schema(){return this._impl.schema}get autoDestroy(){return this._impl.autoDestroy}get dictionaries(){return this._impl.dictionaries}get numDictionaries(){return this._impl.numDictionaries}get numRecordBatches(){return this._impl.numRecordBatches}get footer(){return this._impl.isFile()?this._impl.footer:null}isSync(){return this._impl.isSync()}isAsync(){return this._impl.isAsync()}isFile(){return this._impl.isFile()}isStream(){return this._impl.isStream()}next(){return this._impl.next()}throw(t){return this._impl.throw(t)}return(t){return this._impl.return(t)}cancel(){return this._impl.cancel()}reset(t){return this._impl.reset(t),this._DOMStream=void 0,this._nodeStream=void 0,this}open(t){const n=this._impl.open(t);return Jh(n)?n.then(()=>this):this}readRecordBatch(t){return this._impl.isFile()?this._impl.readRecordBatch(t):null}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}toDOMStream(){return Kr.toDOMStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this})}toNodeStream(){return Kr.toNodeStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this},{objectMode:!0})}static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,n){throw new Error('"throughDOM" not available in this environment')}static from(t){return t instanceof cm?t:O2(t)?AW(t):ED(t)?NW(t):Jh(t)?W(this,void 0,void 0,function*(){return yield cm.from(yield t)}):AD(t)||OI(t)||$D(t)||DI(t)?$W(new bg(t)):MW(new gg(t))}static readAll(t){return t instanceof cm?t.isSync()?TM(t):EM(t):O2(t)||ArrayBuffer.isView(t)||Fb(t)||TD(t)?TM(t):EM(t)}},Ig=class extends Kp{constructor(t){super(t),this._impl=t}readAll(){return[...this]}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return nn(this,arguments,function*(){yield K(yield*$a(Br(this[Symbol.iterator]())))})}},Tg=class extends Kp{constructor(t){super(t),this._impl=t}readAll(){var t,n;return W(this,void 0,void 0,function*(){const r=new Array;try{for(var i=Br(this),s;s=yield i.next(),!s.done;){const o=s.value;r.push(o)}}catch(o){t={error:o}}finally{try{s&&!s.done&&(n=i.return)&&(yield n.call(i))}finally{if(t)throw t.error}}return r})}[Symbol.iterator](){throw new Error("AsyncRecordBatchStreamReader is not Iterable")}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}},pO=class extends Ig{constructor(t){super(t),this._impl=t}},IW=class extends Tg{constructor(t){super(t),this._impl=t}},yO=class{constructor(t=new Map){this.closed=!1,this.autoDestroy=!0,this._dictionaryIndex=0,this._recordBatchIndex=0,this.dictionaries=t}get numDictionaries(){return this._dictionaryIndex}get numRecordBatches(){return this._recordBatchIndex}isSync(){return!1}isAsync(){return!1}isFile(){return!1}isStream(){return!1}reset(t){return this._dictionaryIndex=0,this._recordBatchIndex=0,this.schema=t,this.dictionaries=new Map,this}_loadRecordBatch(t,n){const r=this._loadVectors(t,n,this.schema.fields),i=jt({type:new Wn(this.schema.fields),length:t.length,children:r});return new Di(this.schema,i)}_loadDictionaryBatch(t,n){const{id:r,isDelta:i}=t,{dictionaries:s,schema:o}=this,a=s.get(r);if(i||!a){const l=o.dictionaries.get(r),c=this._loadVectors(t.data,n,[l]);return(a&&i?a.concat(new Ke(c)):new Ke(c)).memoize()}return a.memoize()}_loadVectors(t,n,r){return new tO(n,t.nodes,t.buffers,this.dictionaries).visitMany(r)}},Eg=class extends yO{constructor(t,n){super(n),this._reader=O2(t)?new SW(this._handle=t):new dO(this._handle=t)}isSync(){return!0}isStream(){return!0}[Symbol.iterator](){return this}cancel(){!this.closed&&(this.closed=!0)&&(this.reset()._reader.return(),this._reader=null,this.dictionaries=null)}open(t){return this.closed||(this.autoDestroy=gO(this,t),this.schema||(this.schema=this._reader.readSchema())||this.cancel()),this}throw(t){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.throw(t):Le}return(t){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.return(t):Le}next(){if(this.closed)return Le;let t;const{_reader:n}=this;for(;t=this._readNextMessageAndValidate();)if(t.isSchema())this.reset(t.header());else if(t.isRecordBatch()){this._recordBatchIndex++;const r=t.header(),i=n.readMessageBody(t.bodyLength);return{done:!1,value:this._loadRecordBatch(r,i)}}else if(t.isDictionaryBatch()){this._dictionaryIndex++;const r=t.header(),i=n.readMessageBody(t.bodyLength),s=this._loadDictionaryBatch(r,i);this.dictionaries.set(r.id,s)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new iO(this.schema)}):this.return()}_readNextMessageAndValidate(t){return this._reader.readMessage(t)}},Ag=class extends yO{constructor(t,n){super(n),this._reader=new _W(this._handle=t)}isAsync(){return!0}isStream(){return!0}[Symbol.asyncIterator](){return this}cancel(){return W(this,void 0,void 0,function*(){!this.closed&&(this.closed=!0)&&(yield this.reset()._reader.return(),this._reader=null,this.dictionaries=null)})}open(t){return W(this,void 0,void 0,function*(){return this.closed||(this.autoDestroy=gO(this,t),this.schema||(this.schema=yield this._reader.readSchema())||(yield this.cancel())),this})}throw(t){return W(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.throw(t):Le})}return(t){return W(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.return(t):Le})}next(){return W(this,void 0,void 0,function*(){if(this.closed)return Le;let t;const{_reader:n}=this;for(;t=yield this._readNextMessageAndValidate();)if(t.isSchema())yield this.reset(t.header());else if(t.isRecordBatch()){this._recordBatchIndex++;const r=t.header(),i=yield n.readMessageBody(t.bodyLength);return{done:!1,value:this._loadRecordBatch(r,i)}}else if(t.isDictionaryBatch()){this._dictionaryIndex++;const r=t.header(),i=yield n.readMessageBody(t.bodyLength),s=this._loadDictionaryBatch(r,i);this.dictionaries.set(r.id,s)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new iO(this.schema)}):yield this.return()})}_readNextMessageAndValidate(t){return W(this,void 0,void 0,function*(){return yield this._reader.readMessage(t)})}},mO=class extends Eg{constructor(t,n){super(t instanceof gM?t:new gM(t),n)}get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}isSync(){return!0}isFile(){return!0}open(t){if(!this.closed&&!this._footer){this.schema=(this._footer=this._readFooter()).schema;for(const n of this._footer.dictionaryBatches())n&&this._readDictionaryBatch(this._dictionaryIndex++)}return super.open(t)}readRecordBatch(t){var n;if(this.closed)return null;this._footer||this.open();const r=(n=this._footer)===null||n===void 0?void 0:n.getRecordBatch(t);if(r&&this._handle.seek(r.offset)){const i=this._reader.readMessage(fe.RecordBatch);if(i!=null&&i.isRecordBatch()){const s=i.header(),o=this._reader.readMessageBody(i.bodyLength);return this._loadRecordBatch(s,o)}}return null}_readDictionaryBatch(t){var n;const r=(n=this._footer)===null||n===void 0?void 0:n.getDictionaryBatch(t);if(r&&this._handle.seek(r.offset)){const i=this._reader.readMessage(fe.DictionaryBatch);if(i!=null&&i.isDictionaryBatch()){const s=i.header(),o=this._reader.readMessageBody(i.bodyLength),a=this._loadDictionaryBatch(s,o);this.dictionaries.set(s.id,a)}}}_readFooter(){const{_handle:t}=this,n=t.size-hO,r=t.readInt32(n),i=t.readAt(n-r,r);return YI.decode(i)}_readNextMessageAndValidate(t){var n;if(this._footer||this.open(),this._footer&&this._recordBatchIndex<this.numRecordBatches){const r=(n=this._footer)===null||n===void 0?void 0:n.getRecordBatch(this._recordBatchIndex);if(r&&this._handle.seek(r.offset))return this._reader.readMessage(t)}return null}},TW=class extends Ag{constructor(t,...n){const r=typeof n[0]!="number"?n.shift():void 0,i=n[0]instanceof Map?n.shift():void 0;super(t instanceof vg?t:new vg(t,r),i)}get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}isFile(){return!0}isAsync(){return!0}open(t){const n=Object.create(null,{open:{get:()=>super.open}});return W(this,void 0,void 0,function*(){if(!this.closed&&!this._footer){this.schema=(this._footer=yield this._readFooter()).schema;for(const r of this._footer.dictionaryBatches())r&&(yield this._readDictionaryBatch(this._dictionaryIndex++))}return yield n.open.call(this,t)})}readRecordBatch(t){var n;return W(this,void 0,void 0,function*(){if(this.closed)return null;this._footer||(yield this.open());const r=(n=this._footer)===null||n===void 0?void 0:n.getRecordBatch(t);if(r&&(yield this._handle.seek(r.offset))){const i=yield this._reader.readMessage(fe.RecordBatch);if(i!=null&&i.isRecordBatch()){const s=i.header(),o=yield this._reader.readMessageBody(i.bodyLength);return this._loadRecordBatch(s,o)}}return null})}_readDictionaryBatch(t){var n;return W(this,void 0,void 0,function*(){const r=(n=this._footer)===null||n===void 0?void 0:n.getDictionaryBatch(t);if(r&&(yield this._handle.seek(r.offset))){const i=yield this._reader.readMessage(fe.DictionaryBatch);if(i!=null&&i.isDictionaryBatch()){const s=i.header(),o=yield this._reader.readMessageBody(i.bodyLength),a=this._loadDictionaryBatch(s,o);this.dictionaries.set(s.id,a)}}})}_readFooter(){return W(this,void 0,void 0,function*(){const{_handle:t}=this;t._pending&&(yield t._pending);const n=t.size-hO,r=yield t.readInt32(n),i=yield t.readAt(n-r,r);return YI.decode(i)})}_readNextMessageAndValidate(t){return W(this,void 0,void 0,function*(){if(this._footer||(yield this.open()),this._footer&&this._recordBatchIndex<this.numRecordBatches){const n=this._footer.getRecordBatch(this._recordBatchIndex);if(n&&(yield this._handle.seek(n.offset)))return yield this._reader.readMessage(t)}return null})}},EW=class extends Eg{constructor(t,n){super(t,n)}_loadVectors(t,n,r){return new Rq(n,t.nodes,t.buffers,this.dictionaries).visitMany(r)}};function gO(e,t){return t&&typeof t.autoDestroy=="boolean"?t.autoDestroy:e.autoDestroy}function*TM(e){const t=Kp.from(e);try{if(!t.open({autoDestroy:!1}).closed)do yield t;while(!t.reset().open().closed)}finally{t.cancel()}}function EM(e){return nn(this,arguments,function*(){const n=yield K(Kp.from(e));try{if(!(yield K(n.open({autoDestroy:!1}))).closed)do yield yield K(n);while(!(yield K(n.reset().open())).closed)}finally{yield K(n.cancel())}})}function AW(e){return new Ig(new EW(e))}function MW(e){const t=e.peek(Qp+7&-8);return t&&t.byteLength>=4?KI(t)?new pO(new mO(e.read())):new Ig(new Eg(e)):new Ig(new Eg(function*(){}()))}function $W(e){return W(this,void 0,void 0,function*(){const t=yield e.peek(Qp+7&-8);return t&&t.byteLength>=4?KI(t)?new pO(new mO(yield e.read())):new Tg(new Ag(e)):new Tg(new Ag(function(){return nn(this,arguments,function*(){})}()))})}function NW(e){return W(this,void 0,void 0,function*(){const{size:t}=yield e.stat(),n=new vg(e,t);return t>=xW&&KI(yield n.readAt(0,Qp+7&-8))?new IW(new TW(n)):new Tg(new Ag(n))})}function bO(e){const t=Kp.from(e);return Jh(t)?t.then(n=>bO(n)):t.isAsync()?t.readAll().then(n=>new sp(n)):new sp(t.readAll())}function kW(e="ws://localhost:3000/"){const t=[];let n=!1,r=null,i;const s={open(){n=!0,l()},close(){for(n=!1,r=null,i=null;t.length;)t.shift().reject("Socket closed")},error(c){if(r){const{reject:u}=r;r=null,l(),u(c)}else console.error("WebSocket error: ",c)},message({data:c}){if(r){const{query:u,resolve:f,reject:d}=r;if(r=null,l(),typeof c=="string"){const h=JSON.parse(c);h.error?d(h.error):f(h)}else if(u.type==="exec")f();else if(u.type==="arrow")f(bO(c.arrayBuffer()));else throw new Error(`Unexpected socket data: ${c}`)}else console.log("WebSocket message: ",c)}};function o(){i=new WebSocket(e);for(const c in s)i.addEventListener(c,s[c])}function a(c,u,f){i==null&&o(),t.push({query:c,resolve:u,reject:f}),n&&!r&&l()}function l(){t.length&&(r=t.shift(),i.send(JSON.stringify(r.query)))}return{get connected(){return n},query(c){return new Promise((u,f)=>a(c,u,f))}}}class La{constructor(t,n){t&&(this.table=String(t)),n&&(this.column=n)}get columns(){return this.column?[this.column]:[]}toString(){const{table:t,column:n}=this;if(n){const r=n.startsWith("*")?n:`"${n}"`;return`${t?`${AM(t)}.`:""}${r}`}else return t?AM(t):"NULL"}}function AM(e){return e.split(".").map(n=>`"${n}"`).join(".")}function DW(e,t){return e instanceof La&&e.column===t}function $e(e){return typeof e=="string"?ZI(e):e}function um(e){return typeof e=="string"?OW(e):e}function OW(e){return new La(e)}function ZI(e,t){return arguments.length===1&&(t=e,e=null),new La(e,t)}function Zp(e){switch(typeof e){case"boolean":return e?"TRUE":"FALSE";case"string":return`'${e}'`;case"number":return Number.isFinite(e)?String(e):"NULL";default:if(e==null)return"NULL";if(e instanceof Date){const t=+e;if(Number.isNaN(t))return"NULL";const n=e.getUTCFullYear(),r=e.getUTCMonth(),i=e.getUTCDate();return t===Date.UTC(n,r,i)?`MAKE_DATE(${n}, ${r+1}, ${i})`:`EPOCH_MS(${t})`}else return e instanceof RegExp?`'${e.source}'`:String(e)}}const xf=e=>typeof(e==null?void 0:e.addEventListener)=="function";function vO(e){return e instanceof Cb}class Cb{constructor(t,n,r){this._expr=Array.isArray(t)?t:[t],this._deps=n||[],this.annotate(r);const i=this._expr.filter(s=>xf(s));i.length>0?(this._params=Array.from(new Set(i)),this._params.forEach(s=>{s.addEventListener("value",()=>{var o;return FW(this,(o=this.map)==null?void 0:o.get("value"))})})):this.addEventListener=void 0}get value(){return this}get columns(){const{_params:t,_deps:n}=this;if(t){const r=new Set(t.flatMap(i=>{var o;const s=(o=i.value)==null?void 0:o.columns;return Array.isArray(s)?s:[]}));if(r.size){const i=new Set(n);return r.forEach(s=>i.add(s)),Array.from(i)}}return n}get column(){return this._deps.length?this._deps[0]:this.columns[0]}annotate(...t){return Object.assign(this,...t)}toString(){return this._expr.map(t=>xf(t)&&!vO(t)?Zp(t.value):t).join("")}addEventListener(t,n){const r=this.map||(this.map=new Map);(r.get(t)||(r.set(t,new Set),r.get(t))).add(n)}}function FW(e,t){if(t!=null&&t.size)return Promise.allSettled(Array.from(t,n=>n(e)))}function wO(e,t){const n=[e[0]],r=new Set,i=t.length;for(let s=0,o=0;s<i;){const a=t[s];xf(a)?n[++o]=a:(Array.isArray(a==null?void 0:a.columns)&&a.columns.forEach(c=>r.add(c)),n[o]+=typeof a=="string"?a:Zp(a));const l=e[++s];xf(n[o])?n[++o]=l:n[o]+=l}return{spans:n,cols:Array.from(r)}}function G(e,...t){const{spans:n,cols:r}=wO(e,t);return new Cb(n,r)}function BW(e){const t=$e(e);return G`${t} DESC NULLS LAST`.annotate({label:t==null?void 0:t.label,desc:!0})}const Jp=e=>({value:e,toString:()=>Zp(e)});function Ub(e){var t;e(this.op,this),(t=this.children)==null||t.forEach(n=>n.visit(e))}function _O(e,t){const n=t.filter(i=>i!=null).map($e),r=n.map((i,s)=>s?` ${e} `:"");return t.length&&r.push(""),G(r,...n).annotate({op:e,children:n,visit:Ub})}const yc=(...e)=>_O("AND",e.flat()),SO=(...e)=>_O("OR",e.flat()),xO=e=>t=>G`(${$e(t)} ${e})`.annotate({op:e,a:t,visit:Ub}),IO=xO("IS NULL"),Mg=xO("IS NOT NULL"),ed=e=>(t,n)=>G`(${$e(t)} ${e} ${$e(n)})`.annotate({op:e,a:t,b:n,visit:Ub}),JI=ed("="),RW=ed("<>"),$g=ed("<"),TO=ed(">"),Ng=ed("<="),LW=ed("IS NOT DISTINCT FROM");function CW(e,t,n,r){t=$e(t);const i=e.startsWith("NOT ")?"NOT ":"";return(n?r?G`${i}(${n[0]} <= ${t} AND ${t} < ${n[1]})`:G`(${t} ${e} ${n[0]} AND ${n[1]})`:G``).annotate({op:e,visit:Ub,field:t,range:n})}const Lr=(e,t,n)=>CW("BETWEEN",e,t,n);function kg(e,t){return Array.from({length:e},()=>t)}function Pb(e,t){return(...n)=>{const r=n.map($e),i=t?`::${t}`:"";return(r.length?G([`${e}(`,...kg(r.length-1,", "),`)${i}`],...r):G`${e}()${i}`).annotate({func:e,args:r})}}const UW=Pb("REGEXP_MATCHES"),PW=Pb("CONTAINS"),zW=Pb("PREFIX"),jW=Pb("SUFFIX");class Fl extends Cb{constructor(t,n,r,i,s="",o="",a=""){let l;if(i&&!(s||o||a))l=i?G`${n} OVER "${i}"`:G`${n} OVER ()`;else{const d=s&&o?" ":"",h=(s||o)&&a?" ":"";l=G`${n} OVER (${i?`"${i}" `:""}${s}${d}${o}${h}${a})`}r&&(l=G`(${l})::${r}`);const{_expr:u,_deps:f}=l;super(u,f,{window:t,func:n,type:r,name:i,group:s,order:o,frame:a})}get basis(){return this.column}get label(){const{func:t}=this;return t.label??t.toString()}over(t){const{window:n,func:r,type:i,group:s,order:o,frame:a}=this;return new Fl(n,r,i,t,s,o,a)}partitionby(...t){const n=t.flat().filter(u=>u).map($e),r=G(["PARTITION BY ",kg(n.length-1,", "),""],...n),{window:i,func:s,type:o,name:a,order:l,frame:c}=this;return new Fl(i,s,o,a,r,l,c)}orderby(...t){const n=t.flat().filter(u=>u).map($e),r=G(["ORDER BY ",kg(n.length-1,", "),""],...n),{window:i,func:s,type:o,name:a,group:l,frame:c}=this;return new Fl(i,s,o,a,l,r,c)}rows(t){const n=MM("ROWS",t),{window:r,func:i,type:s,name:o,group:a,order:l}=this;return new Fl(r,i,s,o,a,l,n)}range(t){const n=MM("RANGE",t),{window:r,func:i,type:s,name:o,group:a,order:l}=this;return new Fl(r,i,s,o,a,l,n)}}function MM(e,t){if(xf(t)){const n=G`${t}`;return n.toString=()=>`${e} ${$M(t.value)}`,n}return`${e} ${$M(t)}`}function $M(e){const[t,n]=e,r=t===0?"CURRENT ROW":Number.isFinite(t)?`${Math.abs(t)} PRECEDING`:"UNBOUNDED PRECEDING",i=n===0?"CURRENT ROW":Number.isFinite(n)?`${Math.abs(n)} FOLLOWING`:"UNBOUNDED FOLLOWING";return`BETWEEN ${r} AND ${i}`}class Th extends Cb{constructor(t,n,r,i,s){n=(n||[]).map($e);const{strings:o,exprs:a}=VW(t,n,r,i,s),{spans:l,cols:c}=wO(o,a);super(l,c,{aggregate:t,args:n,type:r,isDistinct:i,filter:s})}get basis(){return this.column}get label(){const{aggregate:t,args:n,isDistinct:r}=this,i=r?"DISTINCT"+(n.length?" ":""):"",s=n.length?`(${i}${n.map(YW).join(", ")})`:"";return`${t.toLowerCase()}${s}`}distinct(){const{aggregate:t,args:n,type:r,filter:i}=this;return new Th(t,n,r,!0,i)}where(t){const{aggregate:n,args:r,type:i,isDistinct:s}=this;return new Th(n,r,i,s,t)}window(){const{aggregate:t,args:n,type:r,isDistinct:i}=this,s=new Th(t,n,null,i);return new Fl(t,s,r)}partitionby(...t){return this.window().partitionby(...t)}orderby(...t){return this.window().orderby(...t)}rows(t,n){return this.window().rows(t,n)}range(t,n){return this.window().range(t,n)}}function VW(e,t,n,r,i){const s=`)${n?`::${n}`:""}`;let o=[`${e}(${r?"DISTINCT ":""}`],a=[];return t.length?(o=o.concat([...kg(t.length-1,", "),`${s}${i?" FILTER (WHERE ":""}`,...i?[")"]:[]]),a=[...t,...i?[i]:[]]):o[0]+="*"+s,{exprs:a,strings:o}}function YW(e){const t=Zp(e);return t&&t.startsWith('"')&&t.endsWith('"')?t.slice(1,-1):t}function _i(e,t){return(...n)=>new Th(e,n,t)}const pr=_i("COUNT","INTEGER"),op=_i("MAX"),ap=_i("MIN"),nd=_i("SUM","DOUBLE"),qW=_i("REGR_INTERCEPT"),WW=_i("REGR_SLOPE"),HW=_i("REGR_COUNT"),GW=_i("REGR_SYY"),XW=_i("REGR_SXX"),QW=_i("REGR_AVGX"),NM=_i("ARG_MIN"),kM=_i("ARG_MAX");function KW(e,t){const n=$e(e),r=G`CAST(${n} AS ${t})`;return Object.defineProperty(r,"label",{enumerable:!0,get(){return e.label}}),Object.defineProperty(r,"aggregate",{enumerable:!0,get(){return e.aggregate||!1}}),r}const DM=e=>KW(e,"DOUBLE"),EO=e=>{const t=$e(e);return G`(1000 * (epoch(${t}) - second(${t})) + millisecond(${t}))::DOUBLE`},ZW=e=>{const t=$e(e);return G`MAKE_DATE(2012, MONTH(${t}), DAY(${t}))`.annotate({label:"date"})};class Lt{static select(...t){return new Lt().select(...t)}static from(...t){return new Lt().from(...t)}static with(...t){return new Lt().with(...t)}static union(...t){return new Ul("UNION",t.flat())}static unionAll(...t){return new Ul("UNION ALL",t.flat())}static intersect(...t){return new Ul("INTERSECT",t.flat())}static except(...t){return new Ul("EXCEPT",t.flat())}constructor(){this.query={with:[],select:[],from:[],where:[],groupby:[],having:[],window:[],qualify:[],orderby:[]}}clone(){const t=new Lt;return t.query={...this.query},t}with(...t){const{query:n}=this;if(t.length===0)return n.with;{const r=[],i=(s,o)=>{const a=o.clone();a.cteFor=this,r.push({as:s,query:a})};return t.flat().forEach(s=>{if(s!=null)if(s.as&&s.query)i(s.as,s.query);else for(const o in s)i(o,s[o])}),n.with=n.with.concat(r),this}}select(...t){const{query:n}=this;if(t.length===0)return n.select;{const r=[];for(const i of t.flat())if(i!=null)if(typeof i=="string")r.push({as:i,expr:$e(i)});else if(i instanceof La)r.push({as:i.column,expr:i});else if(Array.isArray(i))r.push({as:i[0],expr:i[1]});else for(const s in i)r.push({as:a0(s),expr:$e(i[s])});return n.select=n.select.concat(r),this}}$select(...t){return this.query.select=[],this.select(...t)}distinct(t=!0){return this.query.distinct=!!t,this}from(...t){const{query:n}=this;if(t.length===0)return n.from;{const r=[];return t.flat().forEach(i=>{if(i!=null)if(typeof i=="string")r.push({as:i,from:um(i)});else if(i instanceof La)r.push({as:i.table,from:i});else if($w(i)||vO(i))r.push({from:i});else if(Array.isArray(i))r.push({as:a0(i[0]),from:um(i[1])});else for(const s in i)r.push({as:a0(s),from:um(i[s])})}),n.from=n.from.concat(r),this}}$from(...t){return this.query.from=[],this.from(...t)}sample(t,n){const{query:r}=this;if(arguments.length===0)return r.sample;{let i=t;return typeof t=="number"&&(i=t>0&&t<1?{perc:100*t,method:n}:{rows:Math.round(t),method:n}),r.sample=i,this}}where(...t){const{query:n}=this;return t.length===0?n.where:(n.where=n.where.concat(t.flat().filter(r=>r)),this)}$where(...t){return this.query.where=[],this.where(...t)}groupby(...t){const{query:n}=this;return t.length===0?n.groupby:(n.groupby=n.groupby.concat(t.flat().filter(r=>r).map($e)),this)}$groupby(...t){return this.query.groupby=[],this.groupby(...t)}having(...t){const{query:n}=this;return t.length===0?n.having:(n.having=n.having.concat(t.flat().filter(r=>r)),this)}window(...t){const{query:n}=this;if(t.length===0)return n.window;{const r=[];return t.flat().forEach(i=>{if(i!=null)for(const s in i)r.push({as:a0(s),expr:i[s]})}),n.window=n.window.concat(r),this}}qualify(...t){const{query:n}=this;return t.length===0?n.qualify:(n.qualify=n.qualify.concat(t.flat().filter(r=>r)),this)}orderby(...t){const{query:n}=this;return t.length===0?n.orderby:(n.orderby=n.orderby.concat(t.flat().filter(r=>r).map($e)),this)}limit(t){const{query:n}=this;return arguments.length===0?n.limit:(n.limit=Number.isFinite(t)?t:void 0,this)}offset(t){const{query:n}=this;return arguments.length===0?n.offset:(n.offset=Number.isFinite(t)?t:void 0,this)}get subqueries(){const{query:t,cteFor:n}=this,r=((n==null?void 0:n.query)||t).with,i=r==null?void 0:r.reduce((o,{as:a,query:l})=>(o[a]=l,o),{}),s=[];return t.from.forEach(({from:o})=>{if($w(o))s.push(o);else if(i[o.table]){const a=i[o.table];s.push(a)}}),s}toString(){const{select:t,distinct:n,from:r,sample:i,where:s,groupby:o,having:a,window:l,qualify:c,orderby:u,limit:f,offset:d,with:h}=this.query,p=[];if(h.length){const v=h.map(({as:y,query:m})=>`"${y}" AS (${m})`);p.push(`WITH ${v.join(", ")}`)}const g=t.map(({as:v,expr:y})=>DW(y,v)&&!y.table?`${y}`:`${y} AS "${v}"`);if(p.push(`SELECT${n?" DISTINCT":""} ${g.join(", ")}`),r.length){const v=r.map(({as:y,from:m})=>{const b=$w(m)?`(${m})`:`${m}`;return!y||y===m.table?b:`${b} AS "${y}"`});p.push(`FROM ${v.join(", ")}`)}if(s.length){const v=s.map(String).filter(y=>y).join(" AND ");v&&p.push(`WHERE ${v}`)}if(i){const{rows:v,perc:y,method:m,seed:b}=i,w=v?`${v} ROWS`:`${y} PERCENT`,S=m?` (${m}${b!=null?`, ${b}`:""})`:"";p.push(`USING SAMPLE ${w}${S}`)}if(o.length&&p.push(`GROUP BY ${o.join(", ")}`),a.length){const v=a.map(String).filter(y=>y).join(" AND ");v&&p.push(`HAVING ${v}`)}if(l.length){const v=l.map(({as:y,expr:m})=>`"${y}" AS (${m})`);p.push(`WINDOW ${v.join(", ")}`)}if(c.length){const v=c.map(String).filter(y=>y).join(" AND ");v&&p.push(`QUALIFY ${v}`)}return u.length&&p.push(`ORDER BY ${u.join(", ")}`),Number.isFinite(f)&&p.push(`LIMIT ${f}`),Number.isFinite(d)&&p.push(`OFFSET ${d}`),p.join(" ")}}class Ul{constructor(t,n){this.op=t,this.queries=n.map(r=>r.clone()),this.query={orderby:[]}}clone(){const t=new Ul(this.op,this.queries);return t.query={...this.query},t}orderby(...t){const{query:n}=this;return t.length===0?n.orderby:(n.orderby=n.orderby.concat(t.flat().filter(r=>r).map($e)),this)}limit(t){const{query:n}=this;return arguments.length===0?n.limit:(n.limit=Number.isFinite(t)?t:void 0,this)}offset(t){const{query:n}=this;return arguments.length===0?n.offset:(n.offset=Number.isFinite(t)?t:void 0,this)}get subqueries(){const{queries:t,cteFor:n}=this;return n&&t.forEach(r=>r.cteFor=n),t}toString(){const{op:t,queries:n,query:{orderby:r,limit:i,offset:s}}=this,o=[n.join(` ${t} `)];return r.length&&o.push(`ORDER BY ${r.join(", ")}`),Number.isFinite(i)&&o.push(`LIMIT ${i}`),Number.isFinite(s)&&o.push(`OFFSET ${s}`),o.join(" ")}}function $w(e){return e instanceof Lt||e instanceof Ul}function a0(e){return JW(e)?e.slice(1,-1):e}function JW(e){return e[0]==='"'&&e[e.length-1]==='"'}function AO(e,t,{replace:n=!1,temp:r=!0,view:i=!1}={}){return"CREATE"+(n?" OR REPLACE ":" ")+(r?"TEMP ":"")+(i?"VIEW":"TABLE")+(n?" ":" IF NOT EXISTS ")+e+" AS "+t}function tH(e,{columns:t=Object.keys((e==null?void 0:e[0])||{})}={}){let n=[];if(Array.isArray(t)?(n=t,t=n.reduce((i,s)=>(i[s]=s,i),{})):t&&(n=Object.keys(t)),!n.length)throw new Error("Can not create table from empty column set.");const r=[];for(const i of e){const s=n.map(o=>`${Zp(i[o])} AS "${t[o]}"`);r.push(`(SELECT ${s.join(", ")})`)}return r.join(" UNION ALL ")}function eH(e,t,n={}){const{select:r=["*"],...i}=n,s=tH(t),o=r.length===1&&r[0]==="*"?s:`SELECT ${r} FROM ${s}`;return AO(e,o,i)}function nH(e){switch(e){case"BIGINT":case"HUGEINT":case"INTEGER":case"SMALLINT":case"TINYINT":case"UBIGINT":case"UINTEGER":case"USMALLINT":case"UTINYINT":case"DOUBLE":case"FLOAT":case"REAL":case"DECIMAL":return"number";case"DATE":case"TIMESTAMP":case"TIMESTAMPTZ":case"TIME":return"date";case"BOOLEAN":return"boolean";case"VARCHAR":case"UUID":return"string";case"LIST":return"array";case"BLOB":case"STRUCT":case"MAP":return"object";default:throw new Error(`Unsupported type: ${e}`)}}const rH="count",iH="nulls",sH="max",oH="min",aH="distinct",lH={[rH]:pr,[aH]:e=>pr(e).distinct(),[sH]:op,[oH]:ap,[iH]:e=>pr().where(IO(e))};function cH({table:e,column:t},n){return Lt.from(e).select(n.map(r=>[r,lH[r](t)]))}const MO=()=>Object.create(null);class uH{constructor(t){this.mc=t,this.clear()}clear(){this.tables=MO()}tableInfo(t){const n=this.tables;if(n[t])return n[t];const r=fH(this.mc,t).catch(i=>{throw n[t]=null,i});return n[t]=r}async fieldInfo({table:t,column:n,stats:r}){const s=(await this.tableInfo(t))[n];if(s==null)return;if(!(r!=null&&r.length))return s;const o=await this.mc.query(cH(s,r),{persist:!0}),a={...s,...Array.from(o)[0]};for(const l in a){const c=a[l];typeof c=="bigint"&&(a[l]=Number(c))}return a}async queryFields(t){const n=await dH(this,t);return(await Promise.all(n.map(i=>this.fieldInfo(i)))).filter(i=>i)}}async function fH(e,t){const n=await e.query(`DESCRIBE ${um(t)}`,{type:"json",cache:!1}),r=MO();for(const i of n)r[i.column_name]={table:t,column:i.column_name,sqlType:i.column_type,type:nH(i.column_type),nullable:i.null==="YES"};return r}async function dH(e,t){return t.length===1&&t[0].column==="*"?Object.values(await e.tableInfo(t[0].table)):t}function hH(e){let t=2166136261;for(let n=0,r=e.length;n<r;++n){const i=e.charCodeAt(n),s=i&65280;s&&(t=OM(t^s>>8)),t=OM(t^i&255)}return pH(t)}function OM(e){return e+(e<<1)+(e<<4)+(e<<7)+(e<<8)+(e<<24)}function pH(e){return e+=e<<13,e^=e>>>7,e+=e<<3,e^=e>>>17,e+=e<<5,e&4294967295}const $O=e=>e;class yH{constructor(t,{selection:n,temp:r=!0}){this.mc=t,this.selection=n,this.temp=r,this.reset()}reset(){this.enabled=!1,this.clients=null,this.indices=null,this.activeView=null}clear(){this.indices&&(this.mc.cancel(Array.from(this.indices.values(),t=>t.result)),this.indices=null)}index(t,n){var c,u;if(this.clients!==t){const f=Array.from(t,BM),d=(c=f[0])==null?void 0:c.from;this.enabled=f.every(h=>h&&h.from===d),this.clients=t,this.activeView=null,this.clear()}if(!this.enabled)return!1;n=n||this.selection.active;const{source:r}=n;if(r&&r===((u=this.activeView)==null?void 0:u.source))return!0;if(this.clear(),!r)return!1;const i=this.activeView=mH(n);if(!i)return!1;this.mc.logger().warn("DATA CUBE INDEX CONSTRUCTION");const s=this.selection.remove(r),o=this.indices=new Map,{mc:a,temp:l}=this;for(const f of t){if(s.skip(f,n))continue;const d=BM(f),h=f.query(s.predicate(f)).select({...i.columns,...d.count}).groupby(Object.keys(i.columns)),[p]=h.subqueries;if(p){const w=Object.values(i.columns).map(S=>S.columns[0]);vH(p,w)}const g=h.orderby();h.query.orderby=[];const v=h.toString(),m=`cube_index_${(hH(v)>>>0).toString(16)}`,b=a.exec(AO(m,v,{temp:l}));o.set(f,{table:m,result:b,order:g,...d})}}async update(){const{clients:t,selection:n,activeView:r}=this,i=r.predicate(n.active.predicate);return Promise.all(Array.from(t).map(s=>this.updateClient(s,i)))}async updateClient(t,n){const r=this.indices.get(t);if(!r)return;n||(n=this.activeView.predicate(this.selection.active.predicate));const{table:i,dims:s,aggr:o,order:a=[]}=r,l=Lt.select(s,o).from(i).groupby(s).where(n).orderby(a);return this.mc.updateClient(t,l)}}function mH(e){var l;const{source:t,schema:n}=e;let r=(l=e.predicate)==null?void 0:l.columns;if(!n||!r)return null;const{type:i,scales:s,pixelSize:o=1}=n;let a;if(i==="interval"&&s){const c=s.map(u=>gH(u,o));if(c.some(u=>u==null))return null;c.length===1?(a=u=>u?Lr("active0",u.range.map(c[0])):[],r={active0:c[0](e.predicate.field)}):(a=u=>u?yc(u.children.map(({range:f},d)=>Lr(`active${d}`,f.map(c[d])))):[],r=Object.fromEntries(e.predicate.children.map((u,f)=>[`active${f}`,c[f](u.field)])))}else if(i==="point")a=$O,r=Object.fromEntries(r.map(c=>[c.toString(),c]));else return null;return{source:t,columns:r,predicate:a}}function gH(e,t){const{type:n,domain:r,range:i}=e;let s,o;switch(n){case"linear":s=$O,o=$e;break;case"log":s=Math.log,o=a=>G`LN(${$e(a)})`;break;case"symlog":s=a=>Math.sign(a)*Math.log1p(Math.abs(a)),o=a=>(a=$e(a),G`SIGN(${a}) * LN(1 + ABS(${a}))`);break;case"sqrt":s=Math.sqrt,o=a=>G`SQRT(${$e(a)})`;break;case"utc":case"time":s=a=>+a,o=a=>a instanceof Date?+a:EO($e(a));break}return s?bH(r,i,t,s,o):null}function bH(e,t,n,r,i){const s=r(Math.min(e[0],e[1])),o=r(Math.max(e[0],e[1])),a=Math.abs(r(t[1])-r(t[0]))/(o-s)/n,l=n===1?"":`${n}::INTEGER * `;return c=>G`${l}FLOOR(${a}::DOUBLE * (${i(c)} - ${s}::DOUBLE))::INTEGER`}const FM={from:NaN};function BM(e){if(!e.filterIndexable)return FM;const t=e.query(),n=Q2(t);if(!n||!t.groupby)return FM;const r=new Set(t.groupby().map(a=>a.column)),i=[],s=[];let o;for(const{as:a,expr:{aggregate:l}}of t.select())switch(l==null?void 0:l.toUpperCase()){case"COUNT":case"SUM":i.push({[a]:G`SUM("${a}")::DOUBLE`});break;case"AVG":o="_count_",i.push({[a]:G`(SUM("${a}" * ${o}) / SUM(${o}))::DOUBLE`});break;case"MAX":i.push({[a]:G`MAX("${a}")`});break;case"MIN":i.push({[a]:G`MIN("${a}")`});break;default:if(r.has(a))s.push(a);else return null}return{aggr:i,dims:s,count:o?{[o]:G`COUNT(*)`}:{},from:n}}function Q2(e){const t=e.subqueries;if(e.select){const r=e.from();if(!r.length)return;if(t.length===0)return r[0].from.table}const n=Q2(t[0]);for(let r=1;r<t.length;++r){const i=Q2(t[r]);if(i!==void 0&&i!==n)return NaN}return n}function vH(e,t){const n=new Set,r=i=>{n.has(i)||(n.add(i),i.select&&i.from().length&&i.select(t),i.subqueries.forEach(r))};r(e)}class wH{constructor(t,n,r=!0){this.mc=t,this.selection=n,this.clients=new Set,this.indexer=r?new yH(this.mc,{...r,selection:n}):null;const{value:i,activate:s}=this.handlers={value:()=>this.update(),activate:o=>{var a;return(a=this.indexer)==null?void 0:a.index(this.clients,o)}};n.addEventListener("value",i),n.addEventListener("activate",s)}finalize(){const{value:t,activate:n}=this.handlers;this.selection.removeEventListener("value",t),this.selection.removeEventListener("activate",n)}reset(){var t;(t=this.indexer)==null||t.reset()}add(t){return(this.clients=new Set(this.clients)).add(t),this}remove(t){return this.clients.has(t)&&(this.clients=new Set(this.clients)).delete(t),this}update(){const{mc:t,indexer:n,clients:r,selection:i}=this;return n!=null&&n.index(r)?n.update():_H(t,r,i)}}function _H(e,t,n){return Promise.all(Array.from(t).map(r=>{const i=n.predicate(r);if(i!=null)return e.updateClient(r,r.query(i))}))}function NO(){let e,t;const n=new Promise((r,i)=>{e=r,t=i});return n.fulfill=r=>(e(r),n),n.reject=r=>(t(r),n),n}function SH(e,t,n){let r=[],i=0;function s(){const o=xH(r,t);r=[],i=0;for(const a of o)TH(a,e,n),MH(a,t)}return{add(o,a){o.request.type==="arrow"?(i=i||requestAnimationFrame(()=>s()),r.push({entry:o,priority:a,index:r.length})):e(o,a)}}}function xH(e,t){const n=[],r=new Map;for(const i of e){const{entry:{request:s}}=i,o=IH(s.query,t);if(!r.has(o)){const a=[];n.push(a),r.set(o,a)}r.get(o).push(i)}return n}function IH(e,t){const n=`${e}`;if(e instanceof Lt&&!t.get(n)){if(e.orderby().length||e.where().length||e.qualify().length||e.having().length)return n;const r=e.clone().$select("*"),i=e.groupby();if(i.length){const s={};e.select().forEach(({as:o,expr:a})=>s[o]=a),r.$groupby(i.map(o=>o instanceof La&&s[o.column]||o))}return`${r}`}else return n}function TH(e,t,n){if(EH(e))t({request:{type:"arrow",cache:!1,record:!1,query:AH(e,n)},result:e.result=NO()});else for(const{entry:r,priority:i}of e)t(r,i)}function EH(e){if(e.length>1){const t=`${e[0].entry.request.query}`;for(let n=1;n<e.length;++n)if(t!==`${e[n].entry.request.query}`)return!0}return!1}function AH(e,t){const n=e.maps=[],r=new Map;for(const o of e){const{query:a}=o.entry.request,l=[];n.push(l);for(const{as:c,expr:u}of a.select()){const f=`${u}`;r.has(f)||r.set(f,[`col${r.size}`,u]);const[d]=r.get(f);l.push([d,c])}t(`${a}`)}const i=e[0].entry.request.query.clone(),s=i.groupby();if(s.length){const o={};e.maps[0].forEach(([a,l])=>o[l]=a),i.$groupby(s.map(a=>a instanceof La&&o[a.column]||a))}return i.$select(Array.from(r.values()))}async function MH(e,t){const{maps:n,result:r}=e;if(!n)return;let i;try{i=await r}catch(s){for(const{entry:o}of e)o.result.reject(s);return}e.forEach(({entry:s},o)=>{const{request:a,result:l}=s,c=$H(i,n[o]);a.cache&&t.set(String(a.query),c),l.fulfill(c)})}function $H(e,t){if(t){const n={};for(const[r,i]of t)n[i]=e.getChild(r);return new e.constructor(n)}else return e}const NH=typeof requestIdleCallback<"u"?requestIdleCallback:setTimeout,kH=()=>({get:()=>{},set:(e,t)=>t,clear:()=>{}});function DH({max:e=1e3,ttl:t=3*60*60*1e3}={}){let n=new Map;function r(){const i=performance.now()-t;let s=null,o=1/0;for(const[a,l]of n){const{last:c}=l;c<o&&(s=a,o=c),i>c&&n.delete(a)}s&&n.delete(s)}return{get(i){const s=n.get(i);if(s)return s.last=performance.now(),s.value},set(i,s){return n.set(i,{last:performance.now(),value:s}),n.size>e&&NH(r),s},clear(){n=new Map}}}function OH(e){const t=Array.from({length:e},()=>({head:null,tail:null}));return{isEmpty(){return t.every(n=>!n.head)},insert(n,r){const i=t[r];if(!i)throw new Error(`Invalid queue priority rank: ${r}`);const s={item:n,next:null};i.head===null?i.head=i.tail=s:i.tail=i.tail.next=s},remove(n){for(const r of t){let{head:i,tail:s}=r;for(let o=null,a=i;a;o=a,a=a.next)n(a.item)&&(a===i?i=a.next:o.next=a.next,a===s&&(s=o||i));r.head=i,r.tail=s}},next(){for(const n of t){const{head:r}=n;if(r!==null)return n.head=r.next,n.tail===r&&(n.tail=null),r.item}}}}const aa={High:0,Normal:1,Low:2};function FH(){const e=OH(3);let t,n,r,i=[],s=null,o;function a(){if(s||e.isEmpty())return;const{request:f,result:d}=e.next();s=u(f,d),s.finally(()=>{s=null,a()})}function l(f,d=aa.Normal){e.insert(f,d),a()}function c(f){i.length&&f&&i.forEach(d=>d.add(f))}async function u(f,d){try{const{query:h,type:p,cache:g=!1,record:v=!0,options:y}=f,m=h?`${h}`:null;if(v&&c(m),g){const S=n.get(m);if(S){r.debug("Cache"),d.fulfill(S);return}}const b=performance.now(),w=await t.query({type:p,sql:m,...y});g&&n.set(m,w),r.debug(`Request: ${(performance.now()-b).toFixed(1)}`),d.fulfill(w)}catch(h){d.reject(h)}}return{cache(f){return f!==void 0?n=f===!0?DH():f||kH():n},logger(f){return f?r=f:r},connector(f){return f?t=f:t},consolidate(f){f&&!o?o=SH(l,n,c):!f&&o&&(o=null)},request(f,d=aa.Normal){const h=NO(),p={request:f,result:h};return o?o.add(p,d):l(p,d),h},cancel(f){const d=new Set(f);e.remove(({result:h})=>d.has(h))},clear(){e.remove(({result:f})=>(f.reject("Cleared"),!0))},record(){let f=[];const d={add(h){f.push(h)},reset(){f=[]},snapshot(){return f.slice()},stop(){return i=i.filter(h=>h!==d),f}};return i.push(d),d}}}function BH(){return{debug(){},info(){},log(){},warn(){},error(){}}}let l0;function br(e){return e?l0=e:l0==null&&(l0=new RH),l0}class RH{constructor(t=kW(),n={}){this.catalog=new uH(this),this.manager=n.manager||FH(),this.logger(n.logger||console),this.configure(n),this.databaseConnector(t),this.clear()}logger(t){return arguments.length&&(this._logger=t||BH(),this.manager.logger(this._logger)),this._logger}configure({cache:t=!0,consolidate:n=!0,indexes:r=!0}){this.manager.cache(t),this.manager.consolidate(n),this.indexes=r}clear({clients:t=!0,cache:n=!0,catalog:r=!1}={}){var i,s;this.manager.clear(),t&&((i=this.clients)==null||i.forEach(o=>this.disconnect(o)),(s=this.filterGroups)==null||s.forEach(o=>o.finalize()),this.clients=new Set,this.filterGroups=new Map),n&&this.manager.cache().clear(),r&&this.catalog.clear()}databaseConnector(t){return this.manager.connector(t)}cancel(t){this.manager.cancel(t)}exec(t,{priority:n=aa.Normal}={}){return this.manager.request({type:"exec",query:t},n)}query(t,{type:n="arrow",cache:r=!0,priority:i=aa.Normal,...s}={}){return this.manager.request({type:n,query:t,cache:r,options:s},i)}prefetch(t,n={}){return this.query(t,{...n,cache:!0,priority:aa.Low})}createBundle(t,n,r=aa.Low){const i={name:t,queries:n};return this.manager.request({type:"create-bundle",options:i},r)}loadBundle(t,n=aa.High){const r={name:t};return this.manager.request({type:"load-bundle",options:r},n)}updateClient(t,n,r=aa.Normal){return t.queryPending(),this.query(n,{priority:r}).then(i=>t.queryResult(i).update(),i=>{t.queryError(i),this._logger.error(i)})}requestQuery(t,n){var r;return(r=this.filterGroups.get(t.filterBy))==null||r.reset(),n?this.updateClient(t,n):t.update()}async connect(t){const{catalog:n,clients:r,filterGroups:i,indexes:s}=this;if(r.has(t))throw new Error("Client already connected.");r.add(t);const o=t.fields();o!=null&&o.length&&t.fieldInfo(await n.queryFields(o));const a=t.filterBy;if(a)if(i.has(a))i.get(a).add(t);else{const l=new wH(this,a,s);i.set(a,l.add(t))}t.requestQuery()}disconnect(t){var i;const{clients:n,filterGroups:r}=this;n.has(t)&&(n.delete(t),(i=r.get(t.filterBy))==null||i.remove(t))}}const RM={};function kO(e,t=!1){let n,r,i=RM;function s(c){n=e(c).then(()=>{if(r){const{value:u}=r;r=null,s(u)}else n=null})}function o(c){r={event:c}}function a(c){n?o(c):s(c)}function l(c){i!==c&&requestAnimationFrame(()=>{const u=i;i=RM,a(u)}),i=c}return t?l:a}class ty{constructor(t){this._filterBy=t,this._requestUpdate=kO(()=>this.requestQuery(),!0)}get filterBy(){return this._filterBy}get filterIndexable(){return!0}fields(){return null}fieldInfo(){return this}query(){return null}queryPending(){return this}queryResult(){return this}queryError(t){return console.error(t),this}requestQuery(t){var r;const n=t||this.query((r=this.filterBy)==null?void 0:r.predicate(this));return br().requestQuery(this,n)}requestUpdate(){this._requestUpdate()}update(){return this}}class LH{constructor(){this._callbacks=new Map}addEventListener(t,n){this._callbacks.has(t)||this._callbacks.set(t,{callbacks:new Set,pending:null,queue:new CH}),this._callbacks.get(t).callbacks.add(n)}removeEventListener(t,n){const r=this._callbacks.get(t);r&&r.callbacks.delete(n)}willEmit(t,n){return n}emitQueueFilter(){return null}cancel(t){const n=this._callbacks.get(t);n==null||n.queue.clear()}emit(t,n){const r=this._callbacks.get(t)||{};if(r.pending)r.queue.enqueue(n,this.emitQueueFilter(t,n));else{const i=this.willEmit(t,n),{callbacks:s,queue:o}=r;if(s!=null&&s.size){const a=Promise.allSettled(Array.from(s,l=>l(i))).then(()=>{r.pending=null,o.isEmpty()||this.emit(t,o.dequeue())});r.pending=a}}}}class CH{constructor(){this.clear()}clear(){this.next=null}isEmpty(){return!this.next}enqueue(t,n){const r={value:t};if(n&&this.next){let i=this;for(;i.next;)n(i.next.value)?i=i.next:i.next=i.next.next;i.next=r}else this.next=r}dequeue(){const{next:t}=this;return this.next=t==null?void 0:t.next,t==null?void 0:t.value}}function DO(e,t){return e===t?!1:e instanceof Date&&t instanceof Date?+e!=+t:Array.isArray(e)&&Array.isArray(t)?UH(e,t):!0}function UH(e,t){if(e.length!==t.length)return!0;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!0;return!1}function Na(e){return e instanceof yr}class yr extends LH{constructor(t){super(),this._value=t}static value(t){return new yr(t)}static array(t){if(t.some(n=>Na(n))){const n=new yr,r=()=>n.update(t.map(i=>Na(i)?i.value:i));return r(),t.forEach(i=>Na(i)?i.addEventListener("value",r):0),n}return new yr(t)}get value(){return this._value}update(t,{force:n}={}){return DO(this._value,t)||n?this.emit("value",t):this.cancel("value"),this}willEmit(t,n){return t==="value"&&(this._value=n),n}}function mc(e){return e instanceof Ca}let Ca=class cu extends yr{static intersect({cross:t=!1}={}){return new cu(new kd({cross:t}))}static union({cross:t=!1}={}){return new cu(new kd({cross:t,union:!0}))}static single({cross:t=!1}={}){return new cu(new kd({cross:t,single:!0}))}static crossfilter(){return new cu(new kd({cross:!0}))}constructor(t=new kd){super([]),this._resolved=this._value,this._resolver=t}clone(){const t=new cu(this._resolver);return t._value=t._resolved=this._value,t}remove(t){const n=this.clone();return n._value=n._resolved=n._resolver.resolve(this._resolved,{source:t}),n._value.active={source:t},n}get active(){return this.clauses.active}get value(){var t;return(t=this.active)==null?void 0:t.value}get clauses(){return super.value}get single(){return this._resolver.single}activate(t){this.emit("activate",t)}update(t){return this._resolved=this._resolver.resolve(this._resolved,t,!0),this._resolved.active=t,super.update(this._resolved)}willEmit(t,n){return t==="value"?(this._value=n,this.value):n}emitQueueFilter(t,n){return t==="value"?this._resolver.queueFilter(n):null}skip(t,n){return this._resolver.skip(t,n)}predicate(t,n=!1){const{clauses:r}=this,i=n?null:r.active;return this._resolver.predicate(r,i,t)}};class kd{constructor({union:t,cross:n,single:r}={}){this.union=!!t,this.cross=!!n,this.single=!!r}resolve(t,n,r=!1){const{source:i,predicate:s}=n,o=t.filter(l=>i!==l.source),a=this.single?[]:o;return this.single&&r&&o.forEach(l=>{var c,u;return(u=(c=l.source)==null?void 0:c.reset)==null?void 0:u.call(c)}),s&&a.push(n),a}skip(t,n){var r;return this.cross&&((r=n==null?void 0:n.clients)==null?void 0:r.has(t))}predicate(t,n,r){const{union:i}=this;if(this.skip(r,n))return;const s=t.filter(o=>!this.skip(r,o)).map(o=>o.predicate);return i&&s.length>1?SO(s):s}queueFilter(t){var n;if(this.cross){const r=(n=t.active)==null?void 0:n.source;return i=>{var s;return((s=i.active)==null?void 0:s.source)!==r}}}}const Nw=2,gs=4,mo=4,de=4,la=new Int32Array(2),LM=new Float32Array(la.buffer),CM=new Float64Array(la.buffer),c0=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;var K2;(function(e){e[e.UTF8_BYTES=1]="UTF8_BYTES",e[e.UTF16_STRING=2]="UTF16_STRING"})(K2||(K2={}));let If=class OO{constructor(t){this.bytes_=t,this.position_=0,this.text_decoder_=new TextDecoder}static allocate(t){return new OO(new Uint8Array(t))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(t){this.position_=t}capacity(){return this.bytes_.length}readInt8(t){return this.readUint8(t)<<24>>24}readUint8(t){return this.bytes_[t]}readInt16(t){return this.readUint16(t)<<16>>16}readUint16(t){return this.bytes_[t]|this.bytes_[t+1]<<8}readInt32(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}readUint32(t){return this.readInt32(t)>>>0}readInt64(t){return BigInt.asIntN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readUint64(t){return BigInt.asUintN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readFloat32(t){return la[0]=this.readInt32(t),LM[0]}readFloat64(t){return la[c0?0:1]=this.readInt32(t),la[c0?1:0]=this.readInt32(t+4),CM[0]}writeInt8(t,n){this.bytes_[t]=n}writeUint8(t,n){this.bytes_[t]=n}writeInt16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeUint16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeInt32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeUint32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeInt64(t,n){this.writeInt32(t,Number(BigInt.asIntN(32,n))),this.writeInt32(t+4,Number(BigInt.asIntN(32,n>>BigInt(32))))}writeUint64(t,n){this.writeUint32(t,Number(BigInt.asUintN(32,n))),this.writeUint32(t+4,Number(BigInt.asUintN(32,n>>BigInt(32))))}writeFloat32(t,n){LM[0]=n,this.writeInt32(t,la[0])}writeFloat64(t,n){CM[0]=n,this.writeInt32(t,la[c0?0:1]),this.writeInt32(t+4,la[c0?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+gs+mo)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let t="";for(let n=0;n<mo;n++)t+=String.fromCharCode(this.readInt8(this.position_+gs+n));return t}__offset(t,n){const r=t-this.readInt32(t);return n<this.readInt16(r)?this.readInt16(r+n):0}__union(t,n){return t.bb_pos=n+this.readInt32(n),t.bb=this,t}__string(t,n){t+=this.readInt32(t);const r=this.readInt32(t);t+=gs;const i=this.bytes_.subarray(t,t+r);return n===K2.UTF8_BYTES?i:this.text_decoder_.decode(i)}__union_with_string(t,n){return typeof t=="string"?this.__string(n):this.__union(t,n)}__indirect(t){return t+this.readInt32(t)}__vector(t){return t+this.readInt32(t)+gs}__vector_len(t){return this.readInt32(t+this.readInt32(t))}__has_identifier(t){if(t.length!=mo)throw new Error("FlatBuffers: file identifier must be length "+mo);for(let n=0;n<mo;n++)if(t.charCodeAt(n)!=this.readInt8(this.position()+gs+n))return!1;return!0}createScalarList(t,n){const r=[];for(let i=0;i<n;++i){const s=t(i);s!==null&&r.push(s)}return r}createObjList(t,n){const r=[];for(let i=0;i<n;++i){const s=t(i);s!==null&&r.push(s.unpack())}return r}},FO=class BO{constructor(t){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null,this.text_encoder=new TextEncoder;let n;t?n=t:n=1024,this.bb=If.allocate(n),this.space=n}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(t){this.force_defaults=t}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(t,n){t>this.minalign&&(this.minalign=t);const r=~(this.bb.capacity()-this.space+n)+1&t-1;for(;this.space<r+t+n;){const i=this.bb.capacity();this.bb=BO.growByteBuffer(this.bb),this.space+=this.bb.capacity()-i}this.pad(r)}pad(t){for(let n=0;n<t;n++)this.bb.writeInt8(--this.space,0)}writeInt8(t){this.bb.writeInt8(this.space-=1,t)}writeInt16(t){this.bb.writeInt16(this.space-=2,t)}writeInt32(t){this.bb.writeInt32(this.space-=4,t)}writeInt64(t){this.bb.writeInt64(this.space-=8,t)}writeFloat32(t){this.bb.writeFloat32(this.space-=4,t)}writeFloat64(t){this.bb.writeFloat64(this.space-=8,t)}addInt8(t){this.prep(1,0),this.writeInt8(t)}addInt16(t){this.prep(2,0),this.writeInt16(t)}addInt32(t){this.prep(4,0),this.writeInt32(t)}addInt64(t){this.prep(8,0),this.writeInt64(t)}addFloat32(t){this.prep(4,0),this.writeFloat32(t)}addFloat64(t){this.prep(8,0),this.writeFloat64(t)}addFieldInt8(t,n,r){(this.force_defaults||n!=r)&&(this.addInt8(n),this.slot(t))}addFieldInt16(t,n,r){(this.force_defaults||n!=r)&&(this.addInt16(n),this.slot(t))}addFieldInt32(t,n,r){(this.force_defaults||n!=r)&&(this.addInt32(n),this.slot(t))}addFieldInt64(t,n,r){(this.force_defaults||n!==r)&&(this.addInt64(n),this.slot(t))}addFieldFloat32(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat32(n),this.slot(t))}addFieldFloat64(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat64(n),this.slot(t))}addFieldOffset(t,n,r){(this.force_defaults||n!=r)&&(this.addOffset(n),this.slot(t))}addFieldStruct(t,n,r){n!=r&&(this.nested(n),this.slot(t))}nested(t){if(t!=this.offset())throw new TypeError("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new TypeError("FlatBuffers: object serialization must not be nested.")}slot(t){this.vtable!==null&&(this.vtable[t]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(t){const n=t.capacity();if(n&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const r=n<<1,i=If.allocate(r);return i.setPosition(r-n),i.bytes().set(t.bytes(),r-n),i}addOffset(t){this.prep(gs,0),this.writeInt32(this.offset()-t+gs)}startObject(t){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=t;for(let n=0;n<t;n++)this.vtable[n]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const t=this.offset();let n=this.vtable_in_use-1;for(;n>=0&&this.vtable[n]==0;n--);const r=n+1;for(;n>=0;n--)this.addInt16(this.vtable[n]!=0?t-this.vtable[n]:0);const i=2;this.addInt16(t-this.object_start);const s=(r+i)*Nw;this.addInt16(s);let o=0;const a=this.space;t:for(n=0;n<this.vtables.length;n++){const l=this.bb.capacity()-this.vtables[n];if(s==this.bb.readInt16(l)){for(let c=Nw;c<s;c+=Nw)if(this.bb.readInt16(a+c)!=this.bb.readInt16(l+c))continue t;o=this.vtables[n];break}}return o?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,o-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t}finish(t,n,r){const i=r?de:0;if(n){const s=n;if(this.prep(this.minalign,gs+mo+i),s.length!=mo)throw new TypeError("FlatBuffers: file identifier must be length "+mo);for(let o=mo-1;o>=0;o--)this.writeInt8(s.charCodeAt(o))}this.prep(this.minalign,gs+i),this.addOffset(t),i&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(t,n){this.finish(t,n,!0)}requiredField(t,n){const r=this.bb.capacity()-t,i=r-this.bb.readInt32(r);if(!(n<this.bb.readInt16(i)&&this.bb.readInt16(i+n)!=0))throw new TypeError("FlatBuffers: field "+n+" must be set")}startVector(t,n,r){this.notNested(),this.vector_num_elems=n,this.prep(gs,t*n),this.prep(r,t*n)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(t){if(!t)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(t))return this.string_maps.get(t);const n=this.createString(t);return this.string_maps.set(t,n),n}createString(t){if(t==null)return 0;let n;t instanceof Uint8Array?n=t:n=this.text_encoder.encode(t),this.addInt8(0),this.startVector(1,n.length,1),this.bb.setPosition(this.space-=n.length);for(let r=0,i=this.space,s=this.bb.bytes();r<n.length;r++)s[i++]=n[r];return this.endVector()}createObjectOffset(t){return t===null?0:typeof t=="string"?this.createString(t):t.pack(this)}createObjectOffsetList(t){const n=[];for(let r=0;r<t.length;++r){const i=t[r];if(i!==null)n.push(this.createObjectOffset(i));else throw new TypeError("FlatBuffers: Argument for createObjectOffsetList cannot contain null.")}return n}createStructOffsetList(t,n){return n(this,t.length),this.createObjectOffsetList(t.slice().reverse()),this.endVector()}};function PH(){const e=new Set;let t,n=new Promise(r=>t=r);return{pending(r){e.add(r)},ready(r){return e.delete(r),e.size===0},resolve(){n=new Promise(r=>{t(),t=r})},get promise(){return n}}}function zb(e,t){const n=new e(t);return br().connect(n),n.element}const zH=e=>e&&typeof e=="object"&&!Array.isArray(e),jH=e=>zb(VH,e);class VH extends ty{constructor({element:t,filterBy:n,from:r,column:i,label:s=i,format:o=u=>u,options:a,value:l,as:c}={}){var f,d,h,p;super(n),this.from=r,this.column=i,this.selection=c,this.format=o,this.element=t??document.createElement("div"),this.element.setAttribute("class","input"),this.element.value=this;const u=document.createElement("label");u.innerText=s||i,this.element.appendChild(u),this.select=document.createElement("select"),a&&(this.data=a.map(g=>zH(g)?g:{value:g}),this.update()),l=l??((f=this.selection)==null?void 0:f.value)??((h=(d=this.data)==null?void 0:d[0])==null?void 0:h.value),((p=this.selection)==null?void 0:p.value)===void 0&&this.publish(l),this.element.appendChild(this.select),this.selection&&(this.select.addEventListener("input",()=>{this.publish(this.selectedValue()??null)}),mc(this.selection)||this.selection.addEventListener("value",g=>{g!==this.select.value&&this.selectedValue(g)}))}selectedValue(t){var n;if(arguments.length===0){const r=this.select.selectedIndex;return this.data[r].value}else{const r=(n=this.data)==null?void 0:n.findIndex(i=>i.value===t);r>=0?this.select.selectedIndex=r:this.select.value=String(t)}}reset(){this.select.selectedIndex=this.from?0:-1}publish(t){const{selection:n,column:r}=this;mc(n)?n.update({source:this,schema:{type:"point"},value:t,predicate:t?JI(r,Jp(t)):null}):Na(n)&&n.update(t)}query(t=[]){const{from:n,column:r}=this;return n?Lt.from(n).select({value:r}).distinct().where(t).orderby(r):null}queryResult(t){return this.data=[{value:"",label:"All"},...t],this}update(){var i;const{data:t,format:n,select:r}=this;r.replaceChildren();for(const{value:s,label:o}of t){const a=document.createElement("option");a.setAttribute("value",s),a.innerText=o??n(s),this.select.appendChild(a)}return this.selection&&this.selectedValue(((i=this.selection)==null?void 0:i.value)??""),this}}const YH={contains:PW,prefix:zW,suffix:jW,regexp:UW};let qH=0;const WH=e=>zb(HH,e);class HH extends ty{constructor({element:t,filterBy:n,from:r,column:i,label:s,type:o="contains",as:a}={}){if(super(n),this.id="search_"+ ++qH,this.type=o,this.from=r,this.column=i,this.selection=a,this.element=t??document.createElement("div"),this.element.setAttribute("class","input"),this.element.value=this,s){const l=document.createElement("label");l.setAttribute("for",this.id),l.innerText=s,this.element.appendChild(l)}this.searchbox=document.createElement("input"),this.searchbox.setAttribute("id",this.id),this.searchbox.setAttribute("type","text"),this.searchbox.setAttribute("placeholder","Query"),this.element.appendChild(this.searchbox),this.selection&&(this.searchbox.addEventListener("input",()=>{this.publish(this.searchbox.value||null)}),mc(this.selection)||this.selection.addEventListener("value",l=>{l!==this.searchbox.value&&(this.searchbox.value=l)}))}reset(){this.searchbox.value=""}publish(t){const{selection:n,column:r,type:i}=this;mc(n)?n.update({source:this,schema:{type:i},value:t,predicate:t?YH[i](r,Jp(t)):null}):Na(n)&&n.update(t)}query(t=[]){const{from:n,column:r}=this;return n?Lt.from(n).select({list:r}).distinct().where(t):null}queryResult(t){return this.data=t,this}update(){const t=document.createElement("datalist"),n=`${this.id}_list`;t.setAttribute("id",n);for(const r of this.data){const i=document.createElement("option");i.setAttribute("value",r.list),t.append(i)}return this.datalist&&this.datalist.remove(),this.element.appendChild(this.datalist=t),this.searchbox.setAttribute("list",n),this}}let GH=0;const Z2=e=>zb(XH,e);class XH extends ty{constructor({element:t,filterBy:n,as:r,min:i,max:s,step:o,from:a,column:l,label:c=l,value:u=r==null?void 0:r.value,width:f}={}){var d;if(super(n),this.id="slider_"+ ++GH,this.from=a,this.column=l||"value",this.selection=r,this.min=i,this.max=s,this.step=o,this.element=t||document.createElement("div"),this.element.setAttribute("class","input"),this.element.value=this,c){const h=document.createElement("label");h.setAttribute("for",this.id),h.innerText=c,this.element.appendChild(h)}this.slider=document.createElement("input"),this.slider.setAttribute("id",this.id),this.slider.setAttribute("type","range"),f!=null&&(this.slider.style.width=`${+f}px`),i!=null&&this.slider.setAttribute("min",i),s!=null&&this.slider.setAttribute("max",s),o!=null&&this.slider.setAttribute("step",o),u!=null&&(this.slider.setAttribute("value",u),((d=this.selection)==null?void 0:d.value)===void 0&&this.publish(u)),this.element.appendChild(this.slider),this.selection&&(this.slider.addEventListener("input",()=>{this.publish(+this.slider.value)}),mc(this.selection)||this.selection.addEventListener("value",h=>{h!==+this.slider.value&&(this.slider.value=h)}))}query(t=[]){const{from:n,column:r}=this;return!n||this.min!=null&&this.max!=null?null:Lt.select({min:ap(r),max:op(r)}).from(n).where(t)}queryResult(t){const{min:n,max:r}=Array.from(t)[0];return this.min==null&&this.slider.setAttribute("min",n),this.max==null&&this.slider.setAttribute("max",r),this.step==null&&this.slider.setAttribute("step",(r-n)/500),this}publish(t){const{selection:n,column:r}=this;mc(n)?n.update({source:this,schema:{type:"point"},value:t,predicate:JI(r,Jp(t))}):Na(this.selection)&&n.update(t)}}function RO(e,t){if(e instanceof Date||(e=new Date(+e)),isNaN(e))return typeof t=="function"?t(e):t;const n=e.getUTCHours(),r=e.getUTCMinutes(),i=e.getUTCSeconds(),s=e.getUTCMilliseconds();return`${QH(e.getUTCFullYear())}-${po(e.getUTCMonth()+1,2)}-${po(e.getUTCDate(),2)}${n||r||i||s?`T${po(n,2)}:${po(r,2)}${i||s?`:${po(i,2)}${s?`.${po(s,3)}`:""}`:""}Z`:""}`}function QH(e){return e<0?`-${po(-e,6)}`:e>9999?`+${po(e,6)}`:po(e,4)}function po(e,t){return`${e}`.padStart(t,"0")}const KH=/^(?:[-+]\d{2})?\d{4}(?:-\d{2}(?:-\d{2})?)?(?:T\d{2}:\d{2}(?::\d{2}(?:\.\d{3})?)?(?:Z|[-+]\d{2}:?\d{2})?)?$/;function LO(e,t){return KH.test(e+="")?new Date(e):typeof t=="function"?t(e):t}const CO=e3(e=>{const t=t3(e);return n=>n==null?"":typeof n=="number"?t(n):n instanceof Date?UO(n):`${n}`}),t3=e3(e=>t=>t===0?"0":t.toLocaleString(e));CO();t3();function UO(e){return RO(e,"Invalid Date")}function e3(e){let t=e3,n;return(r="en")=>r===t?n:n=e(t=r)}let ZH=-1;const PO=e=>zb(JH,e);let JH=class extends ty{constructor({element:t,filterBy:n,from:r,columns:i=["*"],align:s={},format:o,width:a,maxWidth:l,height:c=500,rowBatch:u=100}={}){super(n),this.id=`table-${++ZH}`,this.from=r,this.columns=i,this.format=o,this.align=s,this.widths=typeof a=="object"?a:{},this.offset=0,this.limit=+u,this.pending=!1,this.sortHeader=null,this.sortColumn=null,this.sortDesc=!1,this.element=t||document.createElement("div"),this.element.setAttribute("id",this.id),this.element.value=this,typeof a=="number"&&(this.element.style.width=`${a}px`),l&&(this.element.style.maxWidth=`${l}px`),this.element.style.maxHeight=`${c}px`,this.element.style.overflow="auto";let f=-1;this.element.addEventListener("scroll",d=>{const{pending:h,loaded:p}=this,{scrollHeight:g,scrollTop:v,clientHeight:y}=d.target,m=v<f;f=v,!(m||h||p)&&g-v<2*y&&(this.pending=!0,this.requestData(this.offset+this.limit))}),this.tbl=document.createElement("table"),this.element.appendChild(this.tbl),this.head=document.createElement("thead"),this.tbl.appendChild(this.head),this.body=document.createElement("tbody"),this.tbl.appendChild(this.body),this.style=document.createElement("style"),this.element.appendChild(this.style)}requestData(t=0){var r;this.offset=t;const n=this.query((r=this.filterBy)==null?void 0:r.predicate(this));this.requestQuery(n),br().prefetch(n.clone().offset(t+this.limit))}fields(){return this.columns.map(t=>ZI(this.from,t))}fieldInfo(t){this.schema=t;const n=this.head;n.innerHTML="";const r=document.createElement("tr");for(const{column:i}of t){const s=document.createElement("th");s.addEventListener("click",o=>this.sort(o,i)),s.appendChild(document.createElement("span")),s.appendChild(document.createTextNode(i)),r.appendChild(s)}return n.appendChild(r),this.formats=tG(this.format,t),this.style.innerText=rG(this.id,eG(this.align,t),nG(this.widths,t)),this}query(t=[]){const{from:n,limit:r,offset:i,schema:s,sortColumn:o,sortDesc:a}=this;return Lt.from(n).select(s.map(l=>l.column)).where(t).orderby(o?a?BW(o):o:[]).limit(r).offset(i)}queryResult(t){return this.pending||(this.loaded=!1,this.body.replaceChildren()),this.data=t,this}update(){const{body:t,formats:n,data:r,schema:i,limit:s}=this,o=i.length;let a=0;for(const l of r){++a;const c=document.createElement("tr");for(let u=0;u<o;++u){const f=l[i[u].column],d=document.createElement("td");d.innerText=f==null?"":n[u](f),c.appendChild(d)}t.appendChild(c)}return a<s&&(this.loaded=!0),this.pending=!1,this}sort(t,n){n===this.sortColumn?this.sortDesc=!this.sortDesc:(this.sortColumn=n,this.sortDesc=!1);const r=t.currentTarget,i=this.sortHeader;i===r&&t.metaKey?(i.firstChild.textContent="",this.sortHeader=null,this.sortColumn=null):(i&&(i.firstChild.textContent=""),this.sortHeader=r,r.firstChild.textContent=this.sortDesc?"▾":"▴"),this.requestData()}};function tG(e={},t,n){return t.map(({column:r,type:i})=>{if(r in e)return e[r];switch(i){case"number":return t3(n);case"date":return UO;default:return CO(n)}})}function eG(e={},t){return t.map(({column:n,type:r})=>n in e?e[n]:r==="number"?"right":"left")}function nG(e={},t){return t.map(({column:n})=>e[n])}function rG(e,t,n){const r=[];return t.forEach((i,s)=>{const o=+n[s];if(i!=="left"||o){const a=i!=="left"?`text-align:${i};`:"",l=o?`width:${o}px;max-width:${o}px;`:"";r.push(`#${e} tr>:nth-child(${s+1}) {${a}${l}}`)}}),r.join(" ")}const ai=Symbol("Fixed"),gc=Symbol("Transient"),zO=Symbol("Transform"),iG=["rectY-x","rectX-y","rect-x","rect-y"];function sG(e,t){return iG.includes(`${t}-${e}`)}function Eh(e,t={steps:25}){const n=(r,i)=>sG(i,r.type)?{[`${i}1`]:kw(r,e,t),[`${i}2`]:kw(r,e,{...t,offset:1})}:{[i]:kw(r,e,t)};return n[zO]=!0,n}function kw(e,t,n){return{column:t,label:t,get stats(){return["min","max"]},get columns(){return[t]},get basis(){return t},toString(){const{min:r,max:i}=e.stats[t],s=oG(r,i,n),o=$e(t),a=s.min===0?o:`(${o} - ${s.min})`,l=`${(s.max-s.min)/s.steps}::DOUBLE`,c=n.offset?`${n.offset} + `:"";return`${s.min} + ${l} * (${c}FLOOR(${a} / ${l})::INTEGER)`}}}function oG(e,t,n){let{steps:r=25,minstep:i=0,nice:s=!0}=n;if(s!==!1){const o=t-e,a=r,l=Math.LN10,c=Math.ceil(Math.log(a)/l);let u=Math.max(i,Math.pow(10,Math.round(Math.log(o)/l)-c));for(;Math.ceil(o/u)>a;)u*=10;const f=[5,2];let d;for(let g=0,v=f.length;g<v;++g)d=u/f[g],d>=i&&o/d<=a&&(u=d);d=Math.log(u);const h=d>=0?0:~~(-d/l)+1,p=Math.pow(10,-h-1);d=Math.floor(e/u+p)*u,e=e<d?d-u:d,t=Math.ceil(t/u)*u,r=Math.round((t-e)/u)}return{min:e,max:t,steps:r}}function ze(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function bc(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function jb(e){let t,n,r;e.length!==2?(t=ze,n=(a,l)=>ze(e(a),l),r=(a,l)=>e(a)-l):(t=e===ze||e===bc?e:aG,n=e,r=e);function i(a,l,c=0,u=a.length){if(c<u){if(t(l,l)!==0)return u;do{const f=c+u>>>1;n(a[f],l)<0?c=f+1:u=f}while(c<u)}return c}function s(a,l,c=0,u=a.length){if(c<u){if(t(l,l)!==0)return u;do{const f=c+u>>>1;n(a[f],l)<=0?c=f+1:u=f}while(c<u)}return c}function o(a,l,c=0,u=a.length){const f=i(a,l,c,u-1);return f>c&&r(a[f-1],l)>-r(a[f],l)?f-1:f}return{left:i,center:o,right:s}}function aG(){return 0}function jO(e){return e===null?NaN:+e}function*lG(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const cG=jb(ze),uG=cG.right;jb(jO).center;const Vb=uG,VO=YO(qO),fG=YO(dG);function YO(e){return function(t,n,r=n){if(!((n=+n)>=0))throw new RangeError("invalid rx");if(!((r=+r)>=0))throw new RangeError("invalid ry");let{data:i,width:s,height:o}=t;if(!((s=Math.floor(s))>=0))throw new RangeError("invalid width");if(!((o=Math.floor(o!==void 0?o:i.length/s))>=0))throw new RangeError("invalid height");if(!s||!o||!n&&!r)return t;const a=n&&e(n),l=r&&e(r),c=i.slice();return a&&l?(Pc(a,c,i,s,o),Pc(a,i,c,s,o),Pc(a,c,i,s,o),zc(l,i,c,s,o),zc(l,c,i,s,o),zc(l,i,c,s,o)):a?(Pc(a,i,c,s,o),Pc(a,c,i,s,o),Pc(a,i,c,s,o)):l&&(zc(l,i,c,s,o),zc(l,c,i,s,o),zc(l,i,c,s,o)),t}}function Pc(e,t,n,r,i){for(let s=0,o=r*i;s<o;)e(t,n,s,s+=r,1)}function zc(e,t,n,r,i){for(let s=0,o=r*i;s<r;++s)e(t,n,s,s+o,r)}function dG(e){const t=qO(e);return(n,r,i,s,o)=>{i<<=2,s<<=2,o<<=2,t(n,r,i+0,s+0,o),t(n,r,i+1,s+1,o),t(n,r,i+2,s+2,o),t(n,r,i+3,s+3,o)}}function qO(e){const t=Math.floor(e);if(t===e)return hG(e);const n=e-t,r=2*e+1;return(i,s,o,a,l)=>{if(!((a-=l)>=o))return;let c=t*s[o];const u=l*t,f=u+l;for(let d=o,h=o+u;d<h;d+=l)c+=s[Math.min(a,d)];for(let d=o,h=a;d<=h;d+=l)c+=s[Math.min(a,d+u)],i[d]=(c+n*(s[Math.max(o,d-f)]+s[Math.min(a,d+f)]))/r,c-=s[Math.max(o,d-u)]}}function hG(e){const t=2*e+1;return(n,r,i,s,o)=>{if(!((s-=o)>=i))return;let a=e*r[i];const l=o*e;for(let c=i,u=i+l;c<u;c+=o)a+=r[Math.min(s,c)];for(let c=i,u=s;c<=u;c+=o)a+=r[Math.min(s,c+l)],n[c]=a/t,a-=r[Math.max(i,c-l)]}}function Yb(e,t){let n=0;if(t===void 0)for(let r of e)r!=null&&(r=+r)>=r&&++n;else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(i=+i)>=i&&++n}return n}function pG(e){return e.length|0}function yG(e){return!(e>0)}function mG(e){return typeof e!="object"||"length"in e?e:Array.from(e)}function gG(e){return t=>e(...t)}function bG(...e){const t=typeof e[e.length-1]=="function"&&gG(e.pop());e=e.map(mG);const n=e.map(pG),r=e.length-1,i=new Array(r+1).fill(0),s=[];if(r<0||n.some(yG))return s;for(;;){s.push(i.map((a,l)=>e[l][a]));let o=r;for(;++i[o]===n[o];){if(o===0)return t?s.map(t):s;i[o--]=0}}}function vG(e,t){var n=0,r=0;return Float64Array.from(e,t===void 0?i=>n+=+i||0:i=>n+=+t(i,r++,e)||0)}function n3(e,t){let n=0,r,i=0,s=0;if(t===void 0)for(let o of e)o!=null&&(o=+o)>=o&&(r=o-i,i+=r/++n,s+=r*(o-i));else{let o=-1;for(let a of e)(a=t(a,++o,e))!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,s+=r*(a-i))}if(n>1)return s/(n-1)}function ey(e,t){const n=n3(e,t);return n&&Math.sqrt(n)}function mn(e,t){let n,r;if(t===void 0)for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(n===void 0?s>=s&&(n=r=s):(n>s&&(n=s),r<s&&(r=s)))}return[n,r]}class Os{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const s=n[i],o=t+s,a=Math.abs(t)<Math.abs(s)?t-(o-s):s-(o-t);a&&(n[r++]=a),t=o}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,s,o=0;if(n>0){for(o=t[--n];n>0&&(r=o,i=t[--n],o=r+i,s=i-(o-r),!s););n>0&&(s<0&&t[n-1]<0||s>0&&t[n-1]>0)&&(i=s*2,r=o+i,i==r-o&&(o=r))}return o}}class vc extends Map{constructor(t,n=GO){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(J2(this,t))}has(t){return super.has(J2(this,t))}set(t,n){return super.set(WO(this,t),n)}delete(t){return super.delete(HO(this,t))}}class ny extends Set{constructor(t,n=GO){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(J2(this,t))}add(t){return super.add(WO(this,t))}delete(t){return super.delete(HO(this,t))}}function J2({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function WO({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function HO({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function GO(e){return e!==null&&typeof e=="object"?e.valueOf():e}function tS(e){return e}function Yo(e,...t){return r3(e,tS,tS,t)}function Gu(e,t,...n){return r3(e,tS,t,n)}function wG(e,t,...n){return r3(e,Array.from,t,n)}function r3(e,t,n,r){return function i(s,o){if(o>=r.length)return n(s);const a=new vc,l=r[o++];let c=-1;for(const u of s){const f=l(u,++c,s),d=a.get(f);d?d.push(u):a.set(f,[u])}for(const[u,f]of a)a.set(u,i(f,o));return t(a)}(e,0)}function _G(e,t){return Array.from(t,n=>e[n])}function lp(e,...t){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");e=Array.from(e);let[n]=t;if(n&&n.length!==2||t.length>1){const r=Uint32Array.from(e,(i,s)=>s);return t.length>1?(t=t.map(i=>e.map(i)),r.sort((i,s)=>{for(const o of t){const a=cp(o[i],o[s]);if(a)return a}})):(n=e.map(n),r.sort((i,s)=>cp(n[i],n[s]))),_G(e,r)}return e.sort(i3(n))}function i3(e=ze){if(e===ze)return cp;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function cp(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}function s3(e,t,n){return(t.length!==2?lp(Gu(e,t,n),([r,i],[s,o])=>ze(i,o)||ze(r,s)):lp(Yo(e,n),([r,i],[s,o])=>t(i,o)||ze(r,s))).map(([r])=>r)}const SG=Math.sqrt(50),xG=Math.sqrt(10),IG=Math.sqrt(2);function Dg(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=SG?10:s>=xG?5:s>=IG?2:1;let a,l,c;return i<0?(c=Math.pow(10,-i)/o,a=Math.round(e*c),l=Math.round(t*c),a/c<e&&++a,l/c>t&&--l,c=-c):(c=Math.pow(10,i)*o,a=Math.round(e/c),l=Math.round(t/c),a*c<e&&++a,l*c>t&&--l),l<a&&.5<=n&&n<2?Dg(e,t,n*2):[a,l,c]}function Ua(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,s,o]=r?Dg(t,e,n):Dg(e,t,n);if(!(s>=i))return[];const a=s-i+1,l=new Array(a);if(r)if(o<0)for(let c=0;c<a;++c)l[c]=(s-c)/-o;else for(let c=0;c<a;++c)l[c]=(s-c)*o;else if(o<0)for(let c=0;c<a;++c)l[c]=(i+c)/-o;else for(let c=0;c<a;++c)l[c]=(i+c)*o;return l}function up(e,t,n){return t=+t,e=+e,n=+n,Dg(e,t,n)[2]}function eS(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?up(t,e,n):up(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function XO(e,t,n){let r;for(;;){const i=up(e,t,n);if(i===r||i===0||!isFinite(i))return[e,t];i>0?(e=Math.floor(e/i)*i,t=Math.ceil(t/i)*i):i<0&&(e=Math.ceil(e*i)/i,t=Math.floor(t*i)/i),r=i}}function o3(e){return Math.max(1,Math.ceil(Math.log(Yb(e))/Math.LN2)+1)}function Ne(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function TG(e,t){let n,r=-1,i=-1;if(t===void 0)for(const s of e)++i,s!=null&&(n<s||n===void 0&&s>=s)&&(n=s,r=i);else for(let s of e)(s=t(s,++i,e))!=null&&(n<s||n===void 0&&s>=s)&&(n=s,r=i);return r}function vn(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function EG(e,t){let n,r=-1,i=-1;if(t===void 0)for(const s of e)++i,s!=null&&(n>s||n===void 0&&s>=s)&&(n=s,r=i);else for(let s of e)(s=t(s,++i,e))!=null&&(n>s||n===void 0&&s>=s)&&(n=s,r=i);return r}function QO(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?cp:i3(i);r>n;){if(r-n>600){const l=r-n+1,c=t-n+1,u=Math.log(l),f=.5*Math.exp(2*u/3),d=.5*Math.sqrt(u*f*(l-f)/l)*(c-l/2<0?-1:1),h=Math.max(n,Math.floor(t-c*f/l+d)),p=Math.min(r,Math.floor(t+(l-c)*f/l+d));QO(e,t,h,p,i)}const s=e[t];let o=n,a=r;for(Dd(e,n,t),i(e[r],s)>0&&Dd(e,n,r);o<a;){for(Dd(e,o,a),++o,--a;i(e[o],s)<0;)++o;for(;i(e[a],s)>0;)--a}i(e[n],s)===0?Dd(e,n,a):(++a,Dd(e,a,r)),a<=t&&(n=a+1),t<=a&&(r=a-1)}return e}function Dd(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function a3(e,t=ze){let n,r=!1;if(t.length===1){let i;for(const s of e){const o=t(s);(r?ze(o,i)>0:ze(o,o)===0)&&(n=s,i=o,r=!0)}}else for(const i of e)(r?t(i,n)>0:t(i,i)===0)&&(n=i,r=!0);return n}function Pa(e,t,n){if(e=Float64Array.from(lG(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return vn(e);if(t>=1)return Ne(e);var r,i=(r-1)*t,s=Math.floor(i),o=Ne(QO(e,s).subarray(0,s+1)),a=vn(e.subarray(s+1));return o+(a-o)*(i-s)}}function AG(e,t,n=jO){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,s=Math.floor(i),o=+n(e[s],s,e),a=+n(e[s+1],s+1,e);return o+(a-o)*(i-s)}}function MG(e,t,n){const r=Yb(e),i=Pa(e,.75)-Pa(e,.25);return r&&i?Math.ceil((n-t)/(2*i*Math.pow(r,-1/3))):1}function KO(e,t,n){const r=Yb(e),i=ey(e);return r&&i?Math.ceil((n-t)*Math.cbrt(r)/(3.49*i)):1}function qb(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(s=+s)>=s&&(++n,r+=s)}if(n)return r/n}function fp(e,t){return Pa(e,.5,t)}function*$G(e){for(const t of e)yield*t}function ZO(e){return Array.from($G(e))}function JO(e,t){const n=new vc;if(t===void 0)for(let s of e)s!=null&&s>=s&&n.set(s,(n.get(s)||0)+1);else{let s=-1;for(let o of e)(o=t(o,++s,e))!=null&&o>=o&&n.set(o,(n.get(o)||0)+1)}let r,i=0;for(const[s,o]of n)o>i&&(i=o,r=s);return r}function NG(e,t=kG){const n=[];let r,i=!1;for(const s of e)i&&n.push(t(r,s)),r=s,i=!0;return n}function kG(e,t){return[e,t]}function kr(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function tF(e,t=ze){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");let n=Array.from(e);const r=new Float64Array(n.length);t.length!==2&&(n=n.map(t),t=ze);const i=(a,l)=>t(n[a],n[l]);let s,o;return e=Uint32Array.from(n,(a,l)=>l),e.sort(t===ze?(a,l)=>cp(n[a],n[l]):i3(i)),e.forEach((a,l)=>{const c=i(a,s===void 0?a:s);c>=0?((s===void 0||c>0)&&(s=a,o=l),r[a]=o):r[a]=NaN}),r}function DG(e,t=ze){let n,r=!1;if(t.length===1){let i;for(const s of e){const o=t(s);(r?ze(o,i)<0:ze(o,o)===0)&&(n=s,i=o,r=!0)}}else for(const i of e)(r?t(i,n)<0:t(i,i)===0)&&(n=i,r=!0);return n}function Cs(e,t){let n=0;if(t===void 0)for(let r of e)(r=+r)&&(n+=r);else{let r=-1;for(let i of e)(i=+t(i,++r,e))&&(n+=i)}return n}function Og(e){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");return Array.from(e).reverse()}function OG(e){return e}var Dw=1,Ow=2,nS=3,u0=4,UM=1e-6;function FG(e){return"translate("+e+",0)"}function BG(e){return"translate(0,"+e+")"}function RG(e){return t=>+e(t)}function LG(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),n=>+e(n)+t}function CG(){return!this.__axis}function UG(e,t){var n=[],r=null,i=null,s=6,o=6,a=3,l=typeof window<"u"&&window.devicePixelRatio>1?0:.5,c=e===Dw||e===u0?-1:1,u=e===u0||e===Ow?"x":"y",f=e===Dw||e===nS?FG:BG;function d(h){var p=r??(t.ticks?t.ticks.apply(t,n):t.domain()),g=i??(t.tickFormat?t.tickFormat.apply(t,n):OG),v=Math.max(s,0)+a,y=t.range(),m=+y[0]+l,b=+y[y.length-1]+l,w=(t.bandwidth?LG:RG)(t.copy(),l),S=h.selection?h.selection():h,_=S.selectAll(".domain").data([null]),x=S.selectAll(".tick").data(p,t).order(),E=x.exit(),N=x.enter().append("g").attr("class","tick"),I=x.select("line"),A=x.select("text");_=_.merge(_.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),x=x.merge(N),I=I.merge(N.append("line").attr("stroke","currentColor").attr(u+"2",c*s)),A=A.merge(N.append("text").attr("fill","currentColor").attr(u,c*v).attr("dy",e===Dw?"0em":e===nS?"0.71em":"0.32em")),h!==S&&(_=_.transition(h),x=x.transition(h),I=I.transition(h),A=A.transition(h),E=E.transition(h).attr("opacity",UM).attr("transform",function(D){return isFinite(D=w(D))?f(D+l):this.getAttribute("transform")}),N.attr("opacity",UM).attr("transform",function(D){var R=this.parentNode.__axis;return f((R&&isFinite(R=R(D))?R:w(D))+l)})),E.remove(),_.attr("d",e===u0||e===Ow?o?"M"+c*o+","+m+"H"+l+"V"+b+"H"+c*o:"M"+l+","+m+"V"+b:o?"M"+m+","+c*o+"V"+l+"H"+b+"V"+c*o:"M"+m+","+l+"H"+b),x.attr("opacity",1).attr("transform",function(D){return f(w(D)+l)}),I.attr(u+"2",c*s),A.attr(u,c*v).text(g),S.filter(CG).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===Ow?"start":e===u0?"end":"middle"),S.each(function(){this.__axis=w})}return d.scale=function(h){return arguments.length?(t=h,d):t},d.ticks=function(){return n=Array.from(arguments),d},d.tickArguments=function(h){return arguments.length?(n=h==null?[]:Array.from(h),d):n.slice()},d.tickValues=function(h){return arguments.length?(r=h==null?null:Array.from(h),d):r&&r.slice()},d.tickFormat=function(h){return arguments.length?(i=h,d):i},d.tickSize=function(h){return arguments.length?(s=o=+h,d):s},d.tickSizeInner=function(h){return arguments.length?(s=+h,d):s},d.tickSizeOuter=function(h){return arguments.length?(o=+h,d):o},d.tickPadding=function(h){return arguments.length?(a=+h,d):a},d.offset=function(h){return arguments.length?(l=+h,d):l},d}function PG(e){return UG(nS,e)}var zG={value:()=>{}};function Wb(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new fm(n)}function fm(e){this._=e}function jG(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}fm.prototype=Wb.prototype={constructor:fm,on:function(e,t){var n=this._,r=jG(e+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(e=r[s]).type)&&(i=VG(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(i=(e=r[s]).type)n[i]=PM(n[i],e.name,t);else if(t==null)for(i in n)n[i]=PM(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new fm(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function VG(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function PM(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=zG,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var rS="http://www.w3.org/1999/xhtml";const wc={svg:"http://www.w3.org/2000/svg",xhtml:rS,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Hb(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),wc.hasOwnProperty(t)?{space:wc[t],local:e}:e}function YG(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===rS&&t.documentElement.namespaceURI===rS?t.createElement(e):t.createElementNS(n,e)}}function qG(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Gb(e){var t=Hb(e);return(t.local?qG:YG)(t)}function WG(){}function l3(e){return e==null?WG:function(){return this.querySelector(e)}}function HG(e){typeof e!="function"&&(e=l3(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=new Array(o),l,c,u=0;u<o;++u)(l=s[u])&&(c=e.call(l,l.__data__,u,s))&&("__data__"in l&&(c.__data__=l.__data__),a[u]=c);return new Cr(r,this._parents)}function GG(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function XG(){return[]}function eF(e){return e==null?XG:function(){return this.querySelectorAll(e)}}function QG(e){return function(){return GG(e.apply(this,arguments))}}function KG(e){typeof e=="function"?e=QG(e):e=eF(e);for(var t=this._groups,n=t.length,r=[],i=[],s=0;s<n;++s)for(var o=t[s],a=o.length,l,c=0;c<a;++c)(l=o[c])&&(r.push(e.call(l,l.__data__,c,o)),i.push(l));return new Cr(r,i)}function nF(e){return function(){return this.matches(e)}}function rF(e){return function(t){return t.matches(e)}}var ZG=Array.prototype.find;function JG(e){return function(){return ZG.call(this.children,e)}}function tX(){return this.firstElementChild}function eX(e){return this.select(e==null?tX:JG(typeof e=="function"?e:rF(e)))}var nX=Array.prototype.filter;function rX(){return Array.from(this.children)}function iX(e){return function(){return nX.call(this.children,e)}}function sX(e){return this.selectAll(e==null?rX:iX(typeof e=="function"?e:rF(e)))}function oX(e){typeof e!="function"&&(e=nF(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],l,c=0;c<o;++c)(l=s[c])&&e.call(l,l.__data__,c,s)&&a.push(l);return new Cr(r,this._parents)}function iF(e){return new Array(e.length)}function aX(){return new Cr(this._enter||this._groups.map(iF),this._parents)}function Fg(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Fg.prototype={constructor:Fg,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function lX(e){return function(){return e}}function cX(e,t,n,r,i,s){for(var o=0,a,l=t.length,c=s.length;o<c;++o)(a=t[o])?(a.__data__=s[o],r[o]=a):n[o]=new Fg(e,s[o]);for(;o<l;++o)(a=t[o])&&(i[o]=a)}function uX(e,t,n,r,i,s,o){var a,l,c=new Map,u=t.length,f=s.length,d=new Array(u),h;for(a=0;a<u;++a)(l=t[a])&&(d[a]=h=o.call(l,l.__data__,a,t)+"",c.has(h)?i[a]=l:c.set(h,l));for(a=0;a<f;++a)h=o.call(e,s[a],a,s)+"",(l=c.get(h))?(r[a]=l,l.__data__=s[a],c.delete(h)):n[a]=new Fg(e,s[a]);for(a=0;a<u;++a)(l=t[a])&&c.get(d[a])===l&&(i[a]=l)}function fX(e){return e.__data__}function dX(e,t){if(!arguments.length)return Array.from(this,fX);var n=t?uX:cX,r=this._parents,i=this._groups;typeof e!="function"&&(e=lX(e));for(var s=i.length,o=new Array(s),a=new Array(s),l=new Array(s),c=0;c<s;++c){var u=r[c],f=i[c],d=f.length,h=hX(e.call(u,u&&u.__data__,c,r)),p=h.length,g=a[c]=new Array(p),v=o[c]=new Array(p),y=l[c]=new Array(d);n(u,f,g,v,y,h,t);for(var m=0,b=0,w,S;m<p;++m)if(w=g[m]){for(m>=b&&(b=m+1);!(S=v[b])&&++b<p;);w._next=S||null}}return o=new Cr(o,r),o._enter=a,o._exit=l,o}function hX(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function pX(){return new Cr(this._exit||this._groups.map(iF),this._parents)}function yX(e,t,n){var r=this.enter(),i=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function mX(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,s=r.length,o=Math.min(i,s),a=new Array(i),l=0;l<o;++l)for(var c=n[l],u=r[l],f=c.length,d=a[l]=new Array(f),h,p=0;p<f;++p)(h=c[p]||u[p])&&(d[p]=h);for(;l<i;++l)a[l]=n[l];return new Cr(a,this._parents)}function gX(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function bX(e){e||(e=vX);function t(f,d){return f&&d?e(f.__data__,d.__data__):!f-!d}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],a=o.length,l=i[s]=new Array(a),c,u=0;u<a;++u)(c=o[u])&&(l[u]=c);l.sort(t)}return new Cr(i,this._parents).order()}function vX(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function wX(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function _X(){return Array.from(this)}function SX(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function xX(){let e=0;for(const t of this)++e;return e}function IX(){return!this.node()}function TX(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],s=0,o=i.length,a;s<o;++s)(a=i[s])&&e.call(a,a.__data__,s,i);return this}function EX(e){return function(){this.removeAttribute(e)}}function AX(e){return function(){this.removeAttributeNS(e.space,e.local)}}function MX(e,t){return function(){this.setAttribute(e,t)}}function $X(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function NX(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function kX(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function DX(e,t){var n=Hb(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?AX:EX:typeof t=="function"?n.local?kX:NX:n.local?$X:MX)(n,t))}function sF(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function OX(e){return function(){this.style.removeProperty(e)}}function FX(e,t,n){return function(){this.style.setProperty(e,t,n)}}function BX(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function RX(e,t,n){return arguments.length>1?this.each((t==null?OX:typeof t=="function"?BX:FX)(e,t,n??"")):Tf(this.node(),e)}function Tf(e,t){return e.style.getPropertyValue(t)||sF(e).getComputedStyle(e,null).getPropertyValue(t)}function LX(e){return function(){delete this[e]}}function CX(e,t){return function(){this[e]=t}}function UX(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function PX(e,t){return arguments.length>1?this.each((t==null?LX:typeof t=="function"?UX:CX)(e,t)):this.node()[e]}function oF(e){return e.trim().split(/^|\s+/)}function c3(e){return e.classList||new aF(e)}function aF(e){this._node=e,this._names=oF(e.getAttribute("class")||"")}aF.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function lF(e,t){for(var n=c3(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function cF(e,t){for(var n=c3(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function zX(e){return function(){lF(this,e)}}function jX(e){return function(){cF(this,e)}}function VX(e,t){return function(){(t.apply(this,arguments)?lF:cF)(this,e)}}function YX(e,t){var n=oF(e+"");if(arguments.length<2){for(var r=c3(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?VX:t?zX:jX)(n,t))}function qX(){this.textContent=""}function WX(e){return function(){this.textContent=e}}function HX(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function GX(e){return arguments.length?this.each(e==null?qX:(typeof e=="function"?HX:WX)(e)):this.node().textContent}function XX(){this.innerHTML=""}function QX(e){return function(){this.innerHTML=e}}function KX(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function ZX(e){return arguments.length?this.each(e==null?XX:(typeof e=="function"?KX:QX)(e)):this.node().innerHTML}function JX(){this.nextSibling&&this.parentNode.appendChild(this)}function tQ(){return this.each(JX)}function eQ(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function nQ(){return this.each(eQ)}function rQ(e){var t=typeof e=="function"?e:Gb(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function iQ(){return null}function sQ(e,t){var n=typeof e=="function"?e:Gb(e),r=t==null?iQ:typeof t=="function"?t:l3(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function oQ(){var e=this.parentNode;e&&e.removeChild(this)}function aQ(){return this.each(oQ)}function lQ(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function cQ(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function uQ(e){return this.select(e?cQ:lQ)}function fQ(e){return arguments.length?this.property("__data__",e):this.node().__data__}function dQ(e){return function(t){e.call(this,t,this.__data__)}}function hQ(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function pQ(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,s;n<i;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function yQ(e,t,n){return function(){var r=this.__on,i,s=dQ(t);if(r){for(var o=0,a=r.length;o<a;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=t;return}}this.addEventListener(e.type,s,n),i={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(i):this.__on=[i]}}function mQ(e,t,n){var r=hQ(e+""),i,s=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,c=a.length,u;l<c;++l)for(i=0,u=a[l];i<s;++i)if((o=r[i]).type===u.type&&o.name===u.name)return u.value}return}for(a=t?yQ:pQ,i=0;i<s;++i)this.each(a(r[i],t,n));return this}function uF(e,t,n){var r=sF(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function gQ(e,t){return function(){return uF(this,e,t)}}function bQ(e,t){return function(){return uF(this,e,t.apply(this,arguments))}}function vQ(e,t){return this.each((typeof t=="function"?bQ:gQ)(e,t))}function*wQ(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var fF=[null];function Cr(e,t){this._groups=e,this._parents=t}function ry(){return new Cr([[document.documentElement]],fF)}function _Q(){return this}Cr.prototype=ry.prototype={constructor:Cr,select:HG,selectAll:KG,selectChild:eX,selectChildren:sX,filter:oX,data:dX,enter:aX,exit:pX,join:yX,merge:mX,selection:_Q,order:gX,sort:bX,call:wX,nodes:_X,node:SX,size:xX,empty:IX,each:TX,attr:DX,style:RX,property:PX,classed:YX,text:GX,html:ZX,raise:tQ,lower:nQ,append:rQ,insert:sQ,remove:aQ,clone:uQ,datum:fQ,on:mQ,dispatch:vQ,[Symbol.iterator]:wQ};function me(e){return typeof e=="string"?new Cr([[document.querySelector(e)]],[document.documentElement]):new Cr([[e]],fF)}function SQ(e){let t;for(;t=e.sourceEvent;)e=t;return e}function $i(e,t){if(e=SQ(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const iS={capture:!0,passive:!1};function sS(e){e.preventDefault(),e.stopImmediatePropagation()}function dF(e){var t=e.document.documentElement,n=me(e).on("dragstart.drag",sS,iS);"onselectstart"in t?n.on("selectstart.drag",sS,iS):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function hF(e,t){var n=e.document.documentElement,r=me(e).on("dragstart.drag",null);t&&(r.on("click.drag",sS,iS),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function rd(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function iy(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function sl(){}var _c=.7,Ef=1/_c,Xu="\\s*([+-]?\\d+)\\s*",dp="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Fs="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",xQ=/^#([0-9a-f]{3,8})$/,IQ=new RegExp(`^rgb\\(${Xu},${Xu},${Xu}\\)$`),TQ=new RegExp(`^rgb\\(${Fs},${Fs},${Fs}\\)$`),EQ=new RegExp(`^rgba\\(${Xu},${Xu},${Xu},${dp}\\)$`),AQ=new RegExp(`^rgba\\(${Fs},${Fs},${Fs},${dp}\\)$`),MQ=new RegExp(`^hsl\\(${dp},${Fs},${Fs}\\)$`),$Q=new RegExp(`^hsla\\(${dp},${Fs},${Fs},${dp}\\)$`),zM={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};rd(sl,za,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:jM,formatHex:jM,formatHex8:NQ,formatHsl:kQ,formatRgb:VM,toString:VM});function jM(){return this.rgb().formatHex()}function NQ(){return this.rgb().formatHex8()}function kQ(){return pF(this).formatHsl()}function VM(){return this.rgb().formatRgb()}function za(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=xQ.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?YM(t):n===3?new gn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?f0(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?f0(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=IQ.exec(e))?new gn(t[1],t[2],t[3],1):(t=TQ.exec(e))?new gn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=EQ.exec(e))?f0(t[1],t[2],t[3],t[4]):(t=AQ.exec(e))?f0(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=MQ.exec(e))?HM(t[1],t[2]/100,t[3]/100,1):(t=$Q.exec(e))?HM(t[1],t[2]/100,t[3]/100,t[4]):zM.hasOwnProperty(e)?YM(zM[e]):e==="transparent"?new gn(NaN,NaN,NaN,0):null}function YM(e){return new gn(e>>16&255,e>>8&255,e&255,1)}function f0(e,t,n,r){return r<=0&&(e=t=n=NaN),new gn(e,t,n,r)}function u3(e){return e instanceof sl||(e=za(e)),e?(e=e.rgb(),new gn(e.r,e.g,e.b,e.opacity)):new gn}function bi(e,t,n,r){return arguments.length===1?u3(e):new gn(e,t,n,r??1)}function gn(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}rd(gn,bi,iy(sl,{brighter(e){return e=e==null?Ef:Math.pow(Ef,e),new gn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?_c:Math.pow(_c,e),new gn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new gn(nc(this.r),nc(this.g),nc(this.b),Bg(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:qM,formatHex:qM,formatHex8:DQ,formatRgb:WM,toString:WM}));function qM(){return`#${Pl(this.r)}${Pl(this.g)}${Pl(this.b)}`}function DQ(){return`#${Pl(this.r)}${Pl(this.g)}${Pl(this.b)}${Pl((isNaN(this.opacity)?1:this.opacity)*255)}`}function WM(){const e=Bg(this.opacity);return`${e===1?"rgb(":"rgba("}${nc(this.r)}, ${nc(this.g)}, ${nc(this.b)}${e===1?")":`, ${e})`}`}function Bg(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function nc(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Pl(e){return e=nc(e),(e<16?"0":"")+e.toString(16)}function HM(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Oi(e,t,n,r)}function pF(e){if(e instanceof Oi)return new Oi(e.h,e.s,e.l,e.opacity);if(e instanceof sl||(e=za(e)),!e)return new Oi;if(e instanceof Oi)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),o=NaN,a=s-i,l=(s+i)/2;return a?(t===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-t)/a+2:o=(t-n)/a+4,a/=l<.5?s+i:2-s-i,o*=60):a=l>0&&l<1?0:o,new Oi(o,a,l,e.opacity)}function oS(e,t,n,r){return arguments.length===1?pF(e):new Oi(e,t,n,r??1)}function Oi(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}rd(Oi,oS,iy(sl,{brighter(e){return e=e==null?Ef:Math.pow(Ef,e),new Oi(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?_c:Math.pow(_c,e),new Oi(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new gn(Fw(e>=240?e-240:e+120,i,r),Fw(e,i,r),Fw(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Oi(GM(this.h),d0(this.s),d0(this.l),Bg(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Bg(this.opacity);return`${e===1?"hsl(":"hsla("}${GM(this.h)}, ${d0(this.s)*100}%, ${d0(this.l)*100}%${e===1?")":`, ${e})`}`}}));function GM(e){return e=(e||0)%360,e<0?e+360:e}function d0(e){return Math.max(0,Math.min(1,e||0))}function Fw(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const yF=Math.PI/180,mF=180/Math.PI,Rg=18,gF=.96422,bF=1,vF=.82521,wF=4/29,Qu=6/29,_F=3*Qu*Qu,OQ=Qu*Qu*Qu;function SF(e){if(e instanceof Bs)return new Bs(e.l,e.a,e.b,e.opacity);if(e instanceof _o)return xF(e);e instanceof gn||(e=u3(e));var t=Cw(e.r),n=Cw(e.g),r=Cw(e.b),i=Bw((.2225045*t+.7168786*n+.0606169*r)/bF),s,o;return t===n&&n===r?s=o=i:(s=Bw((.4360747*t+.3850649*n+.1430804*r)/gF),o=Bw((.0139322*t+.0971045*n+.7141733*r)/vF)),new Bs(116*i-16,500*(s-i),200*(i-o),e.opacity)}function aS(e,t,n,r){return arguments.length===1?SF(e):new Bs(e,t,n,r??1)}function Bs(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}rd(Bs,aS,iy(sl,{brighter(e){return new Bs(this.l+Rg*(e??1),this.a,this.b,this.opacity)},darker(e){return new Bs(this.l-Rg*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=gF*Rw(t),e=bF*Rw(e),n=vF*Rw(n),new gn(Lw(3.1338561*t-1.6168667*e-.4906146*n),Lw(-.9787684*t+1.9161415*e+.033454*n),Lw(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function Bw(e){return e>OQ?Math.pow(e,1/3):e/_F+wF}function Rw(e){return e>Qu?e*e*e:_F*(e-wF)}function Lw(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function Cw(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function FQ(e){if(e instanceof _o)return new _o(e.h,e.c,e.l,e.opacity);if(e instanceof Bs||(e=SF(e)),e.a===0&&e.b===0)return new _o(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*mF;return new _o(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function lS(e,t,n,r){return arguments.length===1?FQ(e):new _o(e,t,n,r??1)}function _o(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function xF(e){if(isNaN(e.h))return new Bs(e.l,0,0,e.opacity);var t=e.h*yF;return new Bs(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}rd(_o,lS,iy(sl,{brighter(e){return new _o(this.h,this.c,this.l+Rg*(e??1),this.opacity)},darker(e){return new _o(this.h,this.c,this.l-Rg*(e??1),this.opacity)},rgb(){return xF(this).rgb()}}));var IF=-.14861,f3=1.78277,d3=-.29227,Xb=-.90649,hp=1.97294,XM=hp*Xb,QM=hp*f3,KM=f3*d3-Xb*IF;function BQ(e){if(e instanceof rc)return new rc(e.h,e.s,e.l,e.opacity);e instanceof gn||(e=u3(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(KM*r+XM*t-QM*n)/(KM+XM-QM),s=r-i,o=(hp*(n-i)-d3*s)/Xb,a=Math.sqrt(o*o+s*s)/(hp*i*(1-i)),l=a?Math.atan2(o,s)*mF-120:NaN;return new rc(l<0?l+360:l,a,i,e.opacity)}function Us(e,t,n,r){return arguments.length===1?BQ(e):new rc(e,t,n,r??1)}function rc(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}rd(rc,Us,iy(sl,{brighter(e){return e=e==null?Ef:Math.pow(Ef,e),new rc(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?_c:Math.pow(_c,e),new rc(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*yF,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new gn(255*(t+n*(IF*r+f3*i)),255*(t+n*(d3*r+Xb*i)),255*(t+n*(hp*r)),this.opacity)}}));function RQ(e,t,n,r,i){var s=e*e,o=s*e;return((1-3*e+3*s-o)*t+(4-6*s+3*o)*n+(1+3*e+3*s-3*o)*r+o*i)/6}function LQ(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],s=e[r+1],o=r>0?e[r-1]:2*i-s,a=r<t-1?e[r+2]:2*s-i;return RQ((n-r/t)*t,o,i,s,a)}}const Qb=e=>()=>e;function TF(e,t){return function(n){return e+n*t}}function CQ(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function h3(e,t){var n=t-e;return n?TF(e,n>180||n<-180?n-360*Math.round(n/360):n):Qb(isNaN(e)?t:e)}function UQ(e){return(e=+e)==1?Ln:function(t,n){return n-t?CQ(t,n,e):Qb(isNaN(t)?n:t)}}function Ln(e,t){var n=t-e;return n?TF(e,n):Qb(isNaN(e)?t:e)}const Sc=function e(t){var n=UQ(t);function r(i,s){var o=n((i=bi(i)).r,(s=bi(s)).r),a=n(i.g,s.g),l=n(i.b,s.b),c=Ln(i.opacity,s.opacity);return function(u){return i.r=o(u),i.g=a(u),i.b=l(u),i.opacity=c(u),i+""}}return r.gamma=e,r}(1);function PQ(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),s=new Array(n),o,a;for(o=0;o<n;++o)a=bi(t[o]),r[o]=a.r||0,i[o]=a.g||0,s[o]=a.b||0;return r=e(r),i=e(i),s=e(s),a.opacity=1,function(l){return a.r=r(l),a.g=i(l),a.b=s(l),a+""}}}var zQ=PQ(LQ);function jQ(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function VQ(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function YQ(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=id(e[o],t[o]);for(;o<n;++o)s[o]=t[o];return function(a){for(o=0;o<r;++o)s[o]=i[o](a);return s}}function qQ(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Fn(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function WQ(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=id(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var cS=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Uw=new RegExp(cS.source,"g");function HQ(e){return function(){return e}}function GQ(e){return function(t){return e(t)+""}}function EF(e,t){var n=cS.lastIndex=Uw.lastIndex=0,r,i,s,o=-1,a=[],l=[];for(e=e+"",t=t+"";(r=cS.exec(e))&&(i=Uw.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,l.push({i:o,x:Fn(r,i)})),n=Uw.lastIndex;return n<t.length&&(s=t.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?l[0]?GQ(l[0].x):HQ(t):(t=l.length,function(c){for(var u=0,f;u<t;++u)a[(f=l[u]).i]=f.x(c);return a.join("")})}function id(e,t){var n=typeof t,r;return t==null||n==="boolean"?Qb(t):(n==="number"?Fn:n==="string"?(r=za(t))?(t=r,Sc):EF:t instanceof za?Sc:t instanceof Date?qQ:VQ(t)?jQ:Array.isArray(t)?YQ:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?WQ:Fn)(e,t)}function p3(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var ZM=180/Math.PI,uS={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function AF(e,t,n,r,i,s){var o,a,l;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,l/=a),e*r<t*n&&(e=-e,t=-t,l=-l,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*ZM,skewX:Math.atan(l)*ZM,scaleX:o,scaleY:a}}var h0;function XQ(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?uS:AF(t.a,t.b,t.c,t.d,t.e,t.f)}function QQ(e){return e==null||(h0||(h0=document.createElementNS("http://www.w3.org/2000/svg","g")),h0.setAttribute("transform",e),!(e=h0.transform.baseVal.consolidate()))?uS:(e=e.matrix,AF(e.a,e.b,e.c,e.d,e.e,e.f))}function MF(e,t,n,r){function i(c){return c.length?c.pop()+" ":""}function s(c,u,f,d,h,p){if(c!==f||u!==d){var g=h.push("translate(",null,t,null,n);p.push({i:g-4,x:Fn(c,f)},{i:g-2,x:Fn(u,d)})}else(f||d)&&h.push("translate("+f+t+d+n)}function o(c,u,f,d){c!==u?(c-u>180?u+=360:u-c>180&&(c+=360),d.push({i:f.push(i(f)+"rotate(",null,r)-2,x:Fn(c,u)})):u&&f.push(i(f)+"rotate("+u+r)}function a(c,u,f,d){c!==u?d.push({i:f.push(i(f)+"skewX(",null,r)-2,x:Fn(c,u)}):u&&f.push(i(f)+"skewX("+u+r)}function l(c,u,f,d,h,p){if(c!==f||u!==d){var g=h.push(i(h)+"scale(",null,",",null,")");p.push({i:g-4,x:Fn(c,f)},{i:g-2,x:Fn(u,d)})}else(f!==1||d!==1)&&h.push(i(h)+"scale("+f+","+d+")")}return function(c,u){var f=[],d=[];return c=e(c),u=e(u),s(c.translateX,c.translateY,u.translateX,u.translateY,f,d),o(c.rotate,u.rotate,f,d),a(c.skewX,u.skewX,f,d),l(c.scaleX,c.scaleY,u.scaleX,u.scaleY,f,d),c=u=null,function(h){for(var p=-1,g=d.length,v;++p<g;)f[(v=d[p]).i]=v.x(h);return f.join("")}}}var KQ=MF(XQ,"px, ","px)","deg)"),ZQ=MF(QQ,", ",")",")"),JQ=1e-12;function JM(e){return((e=Math.exp(e))+1/e)/2}function tK(e){return((e=Math.exp(e))-1/e)/2}function eK(e){return((e=Math.exp(2*e))-1)/(e+1)}const nK=function e(t,n,r){function i(s,o){var a=s[0],l=s[1],c=s[2],u=o[0],f=o[1],d=o[2],h=u-a,p=f-l,g=h*h+p*p,v,y;if(g<JQ)y=Math.log(d/c)/t,v=function(x){return[a+x*h,l+x*p,c*Math.exp(t*x*y)]};else{var m=Math.sqrt(g),b=(d*d-c*c+r*g)/(2*c*n*m),w=(d*d-c*c-r*g)/(2*d*n*m),S=Math.log(Math.sqrt(b*b+1)-b),_=Math.log(Math.sqrt(w*w+1)-w);y=(_-S)/t,v=function(x){var E=x*y,N=JM(S),I=c/(n*m)*(N*eK(t*E+S)-tK(S));return[a+I*h,l+I*p,c*N/JM(t*E+S)]}}return v.duration=y*1e3*t/Math.SQRT2,v}return i.rho=function(s){var o=Math.max(.001,+s),a=o*o,l=a*a;return e(o,a,l)},i}(Math.SQRT2,2,4);function rK(e){return function(t,n){var r=e((t=oS(t)).h,(n=oS(n)).h),i=Ln(t.s,n.s),s=Ln(t.l,n.l),o=Ln(t.opacity,n.opacity);return function(a){return t.h=r(a),t.s=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const iK=rK(h3);function sK(e,t){var n=Ln((e=aS(e)).l,(t=aS(t)).l),r=Ln(e.a,t.a),i=Ln(e.b,t.b),s=Ln(e.opacity,t.opacity);return function(o){return e.l=n(o),e.a=r(o),e.b=i(o),e.opacity=s(o),e+""}}function oK(e){return function(t,n){var r=e((t=lS(t)).h,(n=lS(n)).h),i=Ln(t.c,n.c),s=Ln(t.l,n.l),o=Ln(t.opacity,n.opacity);return function(a){return t.h=r(a),t.c=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const aK=oK(h3);function $F(e){return function t(n){n=+n;function r(i,s){var o=e((i=Us(i)).h,(s=Us(s)).h),a=Ln(i.s,s.s),l=Ln(i.l,s.l),c=Ln(i.opacity,s.opacity);return function(u){return i.h=o(u),i.s=a(u),i.l=l(Math.pow(u,n)),i.opacity=c(u),i+""}}return r.gamma=t,r}(1)}$F(h3);var y3=$F(Ln);function Kb(e,t){t===void 0&&(t=e,e=id);for(var n=0,r=t.length-1,i=t[0],s=new Array(r<0?0:r);n<r;)s[n]=e(i,i=t[++n]);return function(o){var a=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return s[a](o-a)}}function Yi(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}var Af=0,ih=0,Od=0,NF=1e3,Lg,sh,Cg=0,xc=0,Zb=0,pp=typeof performance=="object"&&performance.now?performance:Date,kF=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function m3(){return xc||(kF(lK),xc=pp.now()+Zb)}function lK(){xc=0}function Ug(){this._call=this._time=this._next=null}Ug.prototype=DF.prototype={constructor:Ug,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?m3():+n)+(t==null?0:+t),!this._next&&sh!==this&&(sh?sh._next=this:Lg=this,sh=this),this._call=e,this._time=n,fS()},stop:function(){this._call&&(this._call=null,this._time=1/0,fS())}};function DF(e,t,n){var r=new Ug;return r.restart(e,t,n),r}function cK(){m3(),++Af;for(var e=Lg,t;e;)(t=xc-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Af}function t6(){xc=(Cg=pp.now())+Zb,Af=ih=0;try{cK()}finally{Af=0,fK(),xc=0}}function uK(){var e=pp.now(),t=e-Cg;t>NF&&(Zb-=t,Cg=e)}function fK(){for(var e,t=Lg,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Lg=n);sh=e,fS(r)}function fS(e){if(!Af){ih&&(ih=clearTimeout(ih));var t=e-xc;t>24?(e<1/0&&(ih=setTimeout(t6,e-pp.now()-Zb)),Od&&(Od=clearInterval(Od))):(Od||(Cg=pp.now(),Od=setInterval(uK,NF)),Af=1,kF(t6))}}function e6(e,t,n){var r=new Ug;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var dK=Wb("start","end","cancel","interrupt"),hK=[],OF=0,n6=1,dS=2,dm=3,r6=4,hS=5,hm=6;function Jb(e,t,n,r,i,s){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;pK(e,n,{name:t,index:r,group:i,on:dK,tween:hK,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:OF})}function g3(e,t){var n=Ki(e,t);if(n.state>OF)throw new Error("too late; already scheduled");return n}function Vs(e,t){var n=Ki(e,t);if(n.state>dm)throw new Error("too late; already running");return n}function Ki(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function pK(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=DF(s,0,n.time);function s(c){n.state=n6,n.timer.restart(o,n.delay,n.time),n.delay<=c&&o(c-n.delay)}function o(c){var u,f,d,h;if(n.state!==n6)return l();for(u in r)if(h=r[u],h.name===n.name){if(h.state===dm)return e6(o);h.state===r6?(h.state=hm,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[u]):+u<t&&(h.state=hm,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[u])}if(e6(function(){n.state===dm&&(n.state=r6,n.timer.restart(a,n.delay,n.time),a(c))}),n.state=dS,n.on.call("start",e,e.__data__,n.index,n.group),n.state===dS){for(n.state=dm,i=new Array(d=n.tween.length),u=0,f=-1;u<d;++u)(h=n.tween[u].value.call(e,e.__data__,n.index,n.group))&&(i[++f]=h);i.length=f+1}}function a(c){for(var u=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(l),n.state=hS,1),f=-1,d=i.length;++f<d;)i[f].call(e,u);n.state===hS&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=hm,n.timer.stop(),delete r[t];for(var c in r)return;delete e.__transition}}function Ku(e,t){var n=e.__transition,r,i,s=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){s=!1;continue}i=r.state>dS&&r.state<hS,r.state=hm,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}s&&delete e.__transition}}function yK(e){return this.each(function(){Ku(this,e)})}function mK(e,t){var n,r;return function(){var i=Vs(this,e),s=i.tween;if(s!==n){r=n=s;for(var o=0,a=r.length;o<a;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function gK(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=Vs(this,e),o=s.tween;if(o!==r){i=(r=o).slice();for(var a={name:t,value:n},l=0,c=i.length;l<c;++l)if(i[l].name===t){i[l]=a;break}l===c&&i.push(a)}s.tween=i}}function bK(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Ki(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?mK:gK)(n,e,t))}function b3(e,t,n){var r=e._id;return e.each(function(){var i=Vs(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return Ki(i,r).value[t]}}function FF(e,t){var n;return(typeof t=="number"?Fn:t instanceof za?Sc:(n=za(t))?(t=n,Sc):EF)(e,t)}function vK(e){return function(){this.removeAttribute(e)}}function wK(e){return function(){this.removeAttributeNS(e.space,e.local)}}function _K(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttribute(e);return o===i?null:o===r?s:s=t(r=o,n)}}function SK(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?s:s=t(r=o,n)}}function xK(e,t,n){var r,i,s;return function(){var o,a=n(this),l;return a==null?void this.removeAttribute(e):(o=this.getAttribute(e),l=a+"",o===l?null:o===r&&l===i?s:(i=l,s=t(r=o,a)))}}function IK(e,t,n){var r,i,s;return function(){var o,a=n(this),l;return a==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),l=a+"",o===l?null:o===r&&l===i?s:(i=l,s=t(r=o,a)))}}function TK(e,t){var n=Hb(e),r=n==="transform"?ZQ:FF;return this.attrTween(e,typeof t=="function"?(n.local?IK:xK)(n,r,b3(this,"attr."+e,t)):t==null?(n.local?wK:vK)(n):(n.local?SK:_K)(n,r,t))}function EK(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function AK(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function MK(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&AK(e,s)),n}return i._value=t,i}function $K(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&EK(e,s)),n}return i._value=t,i}function NK(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=Hb(e);return this.tween(n,(r.local?MK:$K)(r,t))}function kK(e,t){return function(){g3(this,e).delay=+t.apply(this,arguments)}}function DK(e,t){return t=+t,function(){g3(this,e).delay=t}}function OK(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?kK:DK)(t,e)):Ki(this.node(),t).delay}function FK(e,t){return function(){Vs(this,e).duration=+t.apply(this,arguments)}}function BK(e,t){return t=+t,function(){Vs(this,e).duration=t}}function RK(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?FK:BK)(t,e)):Ki(this.node(),t).duration}function LK(e,t){if(typeof t!="function")throw new Error;return function(){Vs(this,e).ease=t}}function CK(e){var t=this._id;return arguments.length?this.each(LK(t,e)):Ki(this.node(),t).ease}function UK(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Vs(this,e).ease=n}}function PK(e){if(typeof e!="function")throw new Error;return this.each(UK(this._id,e))}function zK(e){typeof e!="function"&&(e=nF(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],l,c=0;c<o;++c)(l=s[c])&&e.call(l,l.__data__,c,s)&&a.push(l);return new Lo(r,this._parents,this._name,this._id)}function jK(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var l=t[a],c=n[a],u=l.length,f=o[a]=new Array(u),d,h=0;h<u;++h)(d=l[h]||c[h])&&(f[h]=d);for(;a<r;++a)o[a]=t[a];return new Lo(o,this._parents,this._name,this._id)}function VK(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function YK(e,t,n){var r,i,s=VK(t)?g3:Vs;return function(){var o=s(this,e),a=o.on;a!==r&&(i=(r=a).copy()).on(t,n),o.on=i}}function qK(e,t){var n=this._id;return arguments.length<2?Ki(this.node(),n).on.on(e):this.each(YK(n,e,t))}function WK(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function HK(){return this.on("end.remove",WK(this._id))}function GK(e){var t=this._name,n=this._id;typeof e!="function"&&(e=l3(e));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a=r[o],l=a.length,c=s[o]=new Array(l),u,f,d=0;d<l;++d)(u=a[d])&&(f=e.call(u,u.__data__,d,a))&&("__data__"in u&&(f.__data__=u.__data__),c[d]=f,Jb(c[d],t,n,d,c,Ki(u,n)));return new Lo(s,this._parents,t,n)}function XK(e){var t=this._name,n=this._id;typeof e!="function"&&(e=eF(e));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var l=r[a],c=l.length,u,f=0;f<c;++f)if(u=l[f]){for(var d=e.call(u,u.__data__,f,l),h,p=Ki(u,n),g=0,v=d.length;g<v;++g)(h=d[g])&&Jb(h,t,n,g,d,p);s.push(d),o.push(u)}return new Lo(s,o,t,n)}var QK=ry.prototype.constructor;function KK(){return new QK(this._groups,this._parents)}function ZK(e,t){var n,r,i;return function(){var s=Tf(this,e),o=(this.style.removeProperty(e),Tf(this,e));return s===o?null:s===n&&o===r?i:i=t(n=s,r=o)}}function BF(e){return function(){this.style.removeProperty(e)}}function JK(e,t,n){var r,i=n+"",s;return function(){var o=Tf(this,e);return o===i?null:o===r?s:s=t(r=o,n)}}function tZ(e,t,n){var r,i,s;return function(){var o=Tf(this,e),a=n(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(e),Tf(this,e))),o===l?null:o===r&&l===i?s:(i=l,s=t(r=o,a))}}function eZ(e,t){var n,r,i,s="style."+t,o="end."+s,a;return function(){var l=Vs(this,e),c=l.on,u=l.value[s]==null?a||(a=BF(t)):void 0;(c!==n||i!==u)&&(r=(n=c).copy()).on(o,i=u),l.on=r}}function nZ(e,t,n){var r=(e+="")=="transform"?KQ:FF;return t==null?this.styleTween(e,ZK(e,r)).on("end.style."+e,BF(e)):typeof t=="function"?this.styleTween(e,tZ(e,r,b3(this,"style."+e,t))).each(eZ(this._id,e)):this.styleTween(e,JK(e,r,t),n).on("end.style."+e,null)}function rZ(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function iZ(e,t,n){var r,i;function s(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&rZ(e,o,n)),r}return s._value=t,s}function sZ(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,iZ(e,t,n??""))}function oZ(e){return function(){this.textContent=e}}function aZ(e){return function(){var t=e(this);this.textContent=t??""}}function lZ(e){return this.tween("text",typeof e=="function"?aZ(b3(this,"text",e)):oZ(e==null?"":e+""))}function cZ(e){return function(t){this.textContent=e.call(this,t)}}function uZ(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&cZ(i)),t}return r._value=e,r}function fZ(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,uZ(e))}function dZ(){for(var e=this._name,t=this._id,n=RF(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,l,c=0;c<a;++c)if(l=o[c]){var u=Ki(l,t);Jb(l,e,n,c,o,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new Lo(r,this._parents,e,n)}function hZ(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var a={value:o},l={value:function(){--i===0&&s()}};n.each(function(){var c=Vs(this,r),u=c.on;u!==e&&(t=(e=u).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(l)),c.on=t}),i===0&&s()})}var pZ=0;function Lo(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function RF(){return++pZ}var Hs=ry.prototype;Lo.prototype={constructor:Lo,select:GK,selectAll:XK,selectChild:Hs.selectChild,selectChildren:Hs.selectChildren,filter:zK,merge:jK,selection:KK,transition:dZ,call:Hs.call,nodes:Hs.nodes,node:Hs.node,size:Hs.size,empty:Hs.empty,each:Hs.each,on:qK,attr:TK,attrTween:NK,style:nZ,styleTween:sZ,text:lZ,textTween:fZ,remove:HK,tween:bK,delay:OK,duration:RK,ease:CK,easeVarying:PK,end:hZ,[Symbol.iterator]:Hs[Symbol.iterator]};function yZ(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var mZ={time:null,delay:0,duration:250,ease:yZ};function gZ(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function bZ(e){var t,n;e instanceof Lo?(t=e._id,e=e._name):(t=RF(),(n=mZ).time=m3(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,l,c=0;c<a;++c)(l=o[c])&&Jb(l,e,t,c,o,n||gZ(l,t));return new Lo(r,this._parents,e,t)}ry.prototype.interrupt=yK;ry.prototype.transition=bZ;const Pw=e=>()=>e;function vZ(e,{sourceEvent:t,target:n,selection:r,mode:i,dispatch:s}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:s}})}function wZ(e){e.stopImmediatePropagation()}function zw(e){e.preventDefault(),e.stopImmediatePropagation()}var i6={name:"drag"},jw={name:"space"},jc={name:"handle"},Vc={name:"center"};const{abs:s6,max:Nn,min:kn}=Math;function o6(e){return[+e[0],+e[1]]}function pS(e){return[o6(e[0]),o6(e[1])]}var pm={name:"x",handles:["w","e"].map(yp),input:function(e,t){return e==null?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},ym={name:"y",handles:["n","s"].map(yp),input:function(e,t){return e==null?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},_Z={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(yp),input:function(e){return e==null?null:pS(e)},output:function(e){return e}},Gs={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},a6={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},l6={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},SZ={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},xZ={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function yp(e){return{type:e}}function IZ(e){return!e.ctrlKey&&!e.button}function TZ(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function EZ(){return navigator.maxTouchPoints||"ontouchstart"in this}function Vw(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function AZ(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function MZ(){return v3(pm)}function $Z(){return v3(ym)}function NZ(){return v3(_Z)}function v3(e){var t=TZ,n=IZ,r=EZ,i=!0,s=Wb("start","brush","end"),o=6,a;function l(v){var y=v.property("__brush",g).selectAll(".overlay").data([yp("overlay")]);y.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Gs.overlay).merge(y).each(function(){var b=Vw(this).extent;me(this).attr("x",b[0][0]).attr("y",b[0][1]).attr("width",b[1][0]-b[0][0]).attr("height",b[1][1]-b[0][1])}),v.selectAll(".selection").data([yp("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Gs.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var m=v.selectAll(".handle").data(e.handles,function(b){return b.type});m.exit().remove(),m.enter().append("rect").attr("class",function(b){return"handle handle--"+b.type}).attr("cursor",function(b){return Gs[b.type]}),v.each(c).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",d).filter(r).on("touchstart.brush",d).on("touchmove.brush",h).on("touchend.brush touchcancel.brush",p).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}l.move=function(v,y,m){v.tween?v.on("start.brush",function(b){u(this,arguments).beforestart().start(b)}).on("interrupt.brush end.brush",function(b){u(this,arguments).end(b)}).tween("brush",function(){var b=this,w=b.__brush,S=u(b,arguments),_=w.selection,x=e.input(typeof y=="function"?y.apply(this,arguments):y,w.extent),E=id(_,x);function N(I){w.selection=I===1&&x===null?null:E(I),c.call(b),S.brush()}return _!==null&&x!==null?N:N(1)}):v.each(function(){var b=this,w=arguments,S=b.__brush,_=e.input(typeof y=="function"?y.apply(b,w):y,S.extent),x=u(b,w).beforestart();Ku(b),S.selection=_===null?null:_,c.call(b),x.start(m).brush(m).end(m)})},l.clear=function(v,y){l.move(v,null,y)};function c(){var v=me(this),y=Vw(this).selection;y?(v.selectAll(".selection").style("display",null).attr("x",y[0][0]).attr("y",y[0][1]).attr("width",y[1][0]-y[0][0]).attr("height",y[1][1]-y[0][1]),v.selectAll(".handle").style("display",null).attr("x",function(m){return m.type[m.type.length-1]==="e"?y[1][0]-o/2:y[0][0]-o/2}).attr("y",function(m){return m.type[0]==="s"?y[1][1]-o/2:y[0][1]-o/2}).attr("width",function(m){return m.type==="n"||m.type==="s"?y[1][0]-y[0][0]+o:o}).attr("height",function(m){return m.type==="e"||m.type==="w"?y[1][1]-y[0][1]+o:o})):v.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function u(v,y,m){var b=v.__brush.emitter;return b&&(!m||!b.clean)?b:new f(v,y,m)}function f(v,y,m){this.that=v,this.args=y,this.state=v.__brush,this.active=0,this.clean=m}f.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(v,y){return this.starting?(this.starting=!1,this.emit("start",v,y)):this.emit("brush",v),this},brush:function(v,y){return this.emit("brush",v,y),this},end:function(v,y){return--this.active===0&&(delete this.state.emitter,this.emit("end",v,y)),this},emit:function(v,y,m){var b=me(this.that).datum();s.call(v,this.that,new vZ(v,{sourceEvent:y,target:l,selection:e.output(this.state.selection),mode:m,dispatch:s}),b)}};function d(v){if(a&&!v.touches||!n.apply(this,arguments))return;var y=this,m=v.target.__data__.type,b=(i&&v.metaKey?m="overlay":m)==="selection"?i6:i&&v.altKey?Vc:jc,w=e===ym?null:SZ[m],S=e===pm?null:xZ[m],_=Vw(y),x=_.extent,E=_.selection,N=x[0][0],I,A,D=x[0][1],R,T,M=x[1][0],$,B,O=x[1][1],C,F,P=0,z=0,H,X=w&&S&&i&&v.shiftKey,tt,Z,Y=Array.from(v.touches||[v],st=>{const he=st.identifier;return st=$i(st,y),st.point0=st.slice(),st.identifier=he,st});Ku(y);var Q=u(y,arguments,!0).beforestart();if(m==="overlay"){E&&(H=!0);const st=[Y[0],Y[1]||Y[0]];_.selection=E=[[I=e===ym?N:kn(st[0][0],st[1][0]),R=e===pm?D:kn(st[0][1],st[1][1])],[$=e===ym?M:Nn(st[0][0],st[1][0]),C=e===pm?O:Nn(st[0][1],st[1][1])]],Y.length>1&&At(v)}else I=E[0][0],R=E[0][1],$=E[1][0],C=E[1][1];A=I,T=R,B=$,F=C;var V=me(y).attr("pointer-events","none"),J=V.selectAll(".overlay").attr("cursor",Gs[m]);if(v.touches)Q.moved=j,Q.ended=ot;else{var et=me(v.view).on("mousemove.brush",j,!0).on("mouseup.brush",ot,!0);i&&et.on("keydown.brush",Yt,!0).on("keyup.brush",Ht,!0),dF(v.view)}c.call(y),Q.start(v,b.name);function j(st){for(const he of st.changedTouches||[st])for(const ts of Y)ts.identifier===he.identifier&&(ts.cur=$i(he,y));if(X&&!tt&&!Z&&Y.length===1){const he=Y[0];s6(he.cur[0]-he[0])>s6(he.cur[1]-he[1])?Z=!0:tt=!0}for(const he of Y)he.cur&&(he[0]=he.cur[0],he[1]=he.cur[1]);H=!0,zw(st),At(st)}function At(st){const he=Y[0],ts=he.point0;var Wr;switch(P=he[0]-ts[0],z=he[1]-ts[1],b){case jw:case i6:{w&&(P=Nn(N-I,kn(M-$,P)),A=I+P,B=$+P),S&&(z=Nn(D-R,kn(O-C,z)),T=R+z,F=C+z);break}case jc:{Y[1]?(w&&(A=Nn(N,kn(M,Y[0][0])),B=Nn(N,kn(M,Y[1][0])),w=1),S&&(T=Nn(D,kn(O,Y[0][1])),F=Nn(D,kn(O,Y[1][1])),S=1)):(w<0?(P=Nn(N-I,kn(M-I,P)),A=I+P,B=$):w>0&&(P=Nn(N-$,kn(M-$,P)),A=I,B=$+P),S<0?(z=Nn(D-R,kn(O-R,z)),T=R+z,F=C):S>0&&(z=Nn(D-C,kn(O-C,z)),T=R,F=C+z));break}case Vc:{w&&(A=Nn(N,kn(M,I-P*w)),B=Nn(N,kn(M,$+P*w))),S&&(T=Nn(D,kn(O,R-z*S)),F=Nn(D,kn(O,C+z*S)));break}}B<A&&(w*=-1,Wr=I,I=$,$=Wr,Wr=A,A=B,B=Wr,m in a6&&J.attr("cursor",Gs[m=a6[m]])),F<T&&(S*=-1,Wr=R,R=C,C=Wr,Wr=T,T=F,F=Wr,m in l6&&J.attr("cursor",Gs[m=l6[m]])),_.selection&&(E=_.selection),tt&&(A=E[0][0],B=E[1][0]),Z&&(T=E[0][1],F=E[1][1]),(E[0][0]!==A||E[0][1]!==T||E[1][0]!==B||E[1][1]!==F)&&(_.selection=[[A,T],[B,F]],c.call(y),Q.brush(st,b.name))}function ot(st){if(wZ(st),st.touches){if(st.touches.length)return;a&&clearTimeout(a),a=setTimeout(function(){a=null},500)}else hF(st.view,H),et.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);V.attr("pointer-events","all"),J.attr("cursor",Gs.overlay),_.selection&&(E=_.selection),AZ(E)&&(_.selection=null,c.call(y)),Q.end(st,b.name)}function Yt(st){switch(st.keyCode){case 16:{X=w&&S;break}case 18:{b===jc&&(w&&($=B-P*w,I=A+P*w),S&&(C=F-z*S,R=T+z*S),b=Vc,At(st));break}case 32:{(b===jc||b===Vc)&&(w<0?$=B-P:w>0&&(I=A-P),S<0?C=F-z:S>0&&(R=T-z),b=jw,J.attr("cursor",Gs.selection),At(st));break}default:return}zw(st)}function Ht(st){switch(st.keyCode){case 16:{X&&(tt=Z=X=!1,At(st));break}case 18:{b===Vc&&(w<0?$=B:w>0&&(I=A),S<0?C=F:S>0&&(R=T),b=jc,At(st));break}case 32:{b===jw&&(st.altKey?(w&&($=B-P*w,I=A+P*w),S&&(C=F-z*S,R=T+z*S),b=Vc):(w<0?$=B:w>0&&(I=A),S<0?C=F:S>0&&(R=T),b=jc),J.attr("cursor",Gs[m]),At(st));break}default:return}zw(st)}}function h(v){u(this,arguments).moved(v)}function p(v){u(this,arguments).ended(v)}function g(){var v=this.__brush||{selection:null};return v.extent=pS(t.apply(this,arguments)),v.dim=e,v}return l.extent=function(v){return arguments.length?(t=typeof v=="function"?v:Pw(pS(v)),l):t},l.filter=function(v){return arguments.length?(n=typeof v=="function"?v:Pw(!!v),l):n},l.touchable=function(v){return arguments.length?(r=typeof v=="function"?v:Pw(!!v),l):r},l.handleSize=function(v){return arguments.length?(o=+v,l):o},l.keyModifiers=function(v){return arguments.length?(i=!!v,l):i},l.on=function(){var v=s.on.apply(s,arguments);return v===s?l:v},l}const yS=Math.PI,mS=2*yS,Dl=1e-6,kZ=mS-Dl;function LF(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function DZ(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return LF;const n=10**t;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let CF=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?LF:DZ(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,s,o){this._append`C${+t},${+n},${+r},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(t,n,r,i,s){if(t=+t,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,l=r-t,c=i-n,u=o-t,f=a-n,d=u*u+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(d>Dl)if(!(Math.abs(f*l-c*u)>Dl)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let h=r-o,p=i-a,g=l*l+c*c,v=h*h+p*p,y=Math.sqrt(g),m=Math.sqrt(d),b=s*Math.tan((yS-Math.acos((g+d-v)/(2*y*m)))/2),w=b/m,S=b/y;Math.abs(w-1)>Dl&&this._append`L${t+w*u},${n+w*f}`,this._append`A${s},${s},0,0,${+(f*h>u*p)},${this._x1=t+S*l},${this._y1=n+S*c}`}}arc(t,n,r,i,s,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),l=r*Math.sin(i),c=t+a,u=n+l,f=1^o,d=o?i-s:s-i;this._x1===null?this._append`M${c},${u}`:(Math.abs(this._x1-c)>Dl||Math.abs(this._y1-u)>Dl)&&this._append`L${c},${u}`,r&&(d<0&&(d=d%mS+mS),d>kZ?this._append`A${r},${r},0,1,${f},${t-a},${n-l}A${r},${r},0,1,${f},${this._x1=c},${this._y1=u}`:d>Dl&&this._append`A${r},${r},0,${+(d>=yS)},${f},${this._x1=t+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function So(e=3){return new CF(+e)}var OZ=Array.prototype,UF=OZ.slice;function FZ(e,t){return e-t}function BZ(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}const ca=e=>()=>e;function RZ(e,t){for(var n=-1,r=t.length,i;++n<r;)if(i=LZ(e,t[n]))return i;return 0}function LZ(e,t){for(var n=t[0],r=t[1],i=-1,s=0,o=e.length,a=o-1;s<o;a=s++){var l=e[s],c=l[0],u=l[1],f=e[a],d=f[0],h=f[1];if(CZ(l,f,t))return 0;u>r!=h>r&&n<(d-c)*(r-u)/(h-u)+c&&(i=-i)}return i}function CZ(e,t,n){var r;return UZ(e,t,n)&&PZ(e[r=+(e[0]===t[0])],n[r],t[r])}function UZ(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function PZ(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function zZ(){}var Xs=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function Pg(){var e=1,t=1,n=o3,r=l;function i(c){var u=n(c);if(Array.isArray(u))u=u.slice().sort(FZ);else{const f=mn(c,jZ);for(u=Ua(...XO(f[0],f[1],u),u);u[u.length-1]>=f[1];)u.pop();for(;u[1]<f[0];)u.shift()}return u.map(f=>s(c,f))}function s(c,u){const f=u==null?NaN:+u;if(isNaN(f))throw new Error(`invalid value: ${u}`);var d=[],h=[];return o(c,f,function(p){r(p,c,f),BZ(p)>0?d.push([p]):h.push(p)}),h.forEach(function(p){for(var g=0,v=d.length,y;g<v;++g)if(RZ((y=d[g])[0],p)!==-1){y.push(p);return}}),{type:"MultiPolygon",value:u,coordinates:d}}function o(c,u,f){var d=new Array,h=new Array,p,g,v,y,m,b;for(p=g=-1,y=bl(c[0],u),Xs[y<<1].forEach(w);++p<e-1;)v=y,y=bl(c[p+1],u),Xs[v|y<<1].forEach(w);for(Xs[y<<0].forEach(w);++g<t-1;){for(p=-1,y=bl(c[g*e+e],u),m=bl(c[g*e],u),Xs[y<<1|m<<2].forEach(w);++p<e-1;)v=y,y=bl(c[g*e+e+p+1],u),b=m,m=bl(c[g*e+p+1],u),Xs[v|y<<1|m<<2|b<<3].forEach(w);Xs[y|m<<3].forEach(w)}for(p=-1,m=c[g*e]>=u,Xs[m<<2].forEach(w);++p<e-1;)b=m,m=bl(c[g*e+p+1],u),Xs[m<<2|b<<3].forEach(w);Xs[m<<3].forEach(w);function w(S){var _=[S[0][0]+p,S[0][1]+g],x=[S[1][0]+p,S[1][1]+g],E=a(_),N=a(x),I,A;(I=h[E])?(A=d[N])?(delete h[I.end],delete d[A.start],I===A?(I.ring.push(x),f(I.ring)):d[I.start]=h[A.end]={start:I.start,end:A.end,ring:I.ring.concat(A.ring)}):(delete h[I.end],I.ring.push(x),h[I.end=N]=I):(I=d[N])?(A=h[E])?(delete d[I.start],delete h[A.end],I===A?(I.ring.push(x),f(I.ring)):d[A.start]=h[I.end]={start:A.start,end:I.end,ring:A.ring.concat(I.ring)}):(delete d[I.start],I.ring.unshift(_),d[I.start=E]=I):d[E]=h[N]={start:E,end:N,ring:[_,x]}}}function a(c){return c[0]*2+c[1]*(e+1)*4}function l(c,u,f){c.forEach(function(d){var h=d[0],p=d[1],g=h|0,v=p|0,y=Yw(u[v*e+g]);h>0&&h<e&&g===h&&(d[0]=c6(h,Yw(u[v*e+g-1]),y,f)),p>0&&p<t&&v===p&&(d[1]=c6(p,Yw(u[(v-1)*e+g]),y,f))})}return i.contour=s,i.size=function(c){if(!arguments.length)return[e,t];var u=Math.floor(c[0]),f=Math.floor(c[1]);if(!(u>=0&&f>=0))throw new Error("invalid size");return e=u,t=f,i},i.thresholds=function(c){return arguments.length?(n=typeof c=="function"?c:Array.isArray(c)?ca(UF.call(c)):ca(c),i):n},i.smooth=function(c){return arguments.length?(r=c?l:zZ,i):r===l},i}function jZ(e){return isFinite(e)?e:NaN}function bl(e,t){return e==null?!1:+e>=t}function Yw(e){return e==null||isNaN(e=+e)?-1/0:e}function c6(e,t,n,r){const i=r-t,s=n-t,o=isFinite(i)||isFinite(s)?i/s:Math.sign(i)/Math.sign(s);return isNaN(o)?e:e+o-.5}function VZ(e){return e[0]}function YZ(e){return e[1]}function qZ(){return 1}function WZ(){var e=VZ,t=YZ,n=qZ,r=960,i=500,s=20,o=2,a=s*3,l=r+a*2>>o,c=i+a*2>>o,u=ca(20);function f(m){var b=new Float32Array(l*c),w=Math.pow(2,-o),S=-1;for(const R of m){var _=(e(R,++S,m)+a)*w,x=(t(R,S,m)+a)*w,E=+n(R,S,m);if(E&&_>=0&&_<l&&x>=0&&x<c){var N=Math.floor(_),I=Math.floor(x),A=_-N-.5,D=x-I-.5;b[N+I*l]+=(1-A)*(1-D)*E,b[N+1+I*l]+=A*(1-D)*E,b[N+1+(I+1)*l]+=A*D*E,b[N+(I+1)*l]+=(1-A)*D*E}}return VO({data:b,width:l,height:c},s*w),b}function d(m){var b=f(m),w=u(b),S=Math.pow(2,2*o);return Array.isArray(w)||(w=Ua(Number.MIN_VALUE,Ne(b)/S,w)),Pg().size([l,c]).thresholds(w.map(_=>_*S))(b).map((_,x)=>(_.value=+w[x],h(_)))}d.contours=function(m){var b=f(m),w=Pg().size([l,c]),S=Math.pow(2,2*o),_=x=>{x=+x;var E=h(w.contour(b,x*S));return E.value=x,E};return Object.defineProperty(_,"max",{get:()=>Ne(b)/S}),_};function h(m){return m.coordinates.forEach(p),m}function p(m){m.forEach(g)}function g(m){m.forEach(v)}function v(m){m[0]=m[0]*Math.pow(2,o)-a,m[1]=m[1]*Math.pow(2,o)-a}function y(){return a=s*3,l=r+a*2>>o,c=i+a*2>>o,d}return d.x=function(m){return arguments.length?(e=typeof m=="function"?m:ca(+m),d):e},d.y=function(m){return arguments.length?(t=typeof m=="function"?m:ca(+m),d):t},d.weight=function(m){return arguments.length?(n=typeof m=="function"?m:ca(+m),d):n},d.size=function(m){if(!arguments.length)return[r,i];var b=+m[0],w=+m[1];if(!(b>=0&&w>=0))throw new Error("invalid size");return r=b,i=w,y()},d.cellSize=function(m){if(!arguments.length)return 1<<o;if(!((m=+m)>=1))throw new Error("invalid cell size");return o=Math.floor(Math.log(m)/Math.LN2),y()},d.thresholds=function(m){return arguments.length?(u=typeof m=="function"?m:Array.isArray(m)?ca(UF.call(m)):ca(m),d):u},d.bandwidth=function(m){if(!arguments.length)return Math.sqrt(s*(s+1));if(!((m=+m)>=0))throw new Error("invalid bandwidth");return s=(Math.sqrt(4*m*m+1)-1)/2,y()},d}const Ao=11102230246251565e-32,Dn=134217729,HZ=(3+8*Ao)*Ao;function qw(e,t,n,r,i){let s,o,a,l,c=t[0],u=r[0],f=0,d=0;u>c==u>-c?(s=c,c=t[++f]):(s=u,u=r[++d]);let h=0;if(f<e&&d<n)for(u>c==u>-c?(o=c+s,a=s-(o-c),c=t[++f]):(o=u+s,a=s-(o-u),u=r[++d]),s=o,a!==0&&(i[h++]=a);f<e&&d<n;)u>c==u>-c?(o=s+c,l=o-s,a=s-(o-l)+(c-l),c=t[++f]):(o=s+u,l=o-s,a=s-(o-l)+(u-l),u=r[++d]),s=o,a!==0&&(i[h++]=a);for(;f<e;)o=s+c,l=o-s,a=s-(o-l)+(c-l),c=t[++f],s=o,a!==0&&(i[h++]=a);for(;d<n;)o=s+u,l=o-s,a=s-(o-l)+(u-l),u=r[++d],s=o,a!==0&&(i[h++]=a);return(s!==0||h===0)&&(i[h++]=s),h}function GZ(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}function sy(e){return new Float64Array(e)}const XZ=(3+16*Ao)*Ao,QZ=(2+12*Ao)*Ao,KZ=(9+64*Ao)*Ao*Ao,Yc=sy(4),u6=sy(8),f6=sy(12),d6=sy(16),Pn=sy(4);function ZZ(e,t,n,r,i,s,o){let a,l,c,u,f,d,h,p,g,v,y,m,b,w,S,_,x,E;const N=e-i,I=n-i,A=t-s,D=r-s;w=N*D,d=Dn*N,h=d-(d-N),p=N-h,d=Dn*D,g=d-(d-D),v=D-g,S=p*v-(w-h*g-p*g-h*v),_=A*I,d=Dn*A,h=d-(d-A),p=A-h,d=Dn*I,g=d-(d-I),v=I-g,x=p*v-(_-h*g-p*g-h*v),y=S-x,f=S-y,Yc[0]=S-(y+f)+(f-x),m=w+y,f=m-w,b=w-(m-f)+(y-f),y=b-_,f=b-y,Yc[1]=b-(y+f)+(f-_),E=m+y,f=E-m,Yc[2]=m-(E-f)+(y-f),Yc[3]=E;let R=GZ(4,Yc),T=QZ*o;if(R>=T||-R>=T||(f=e-N,a=e-(N+f)+(f-i),f=n-I,c=n-(I+f)+(f-i),f=t-A,l=t-(A+f)+(f-s),f=r-D,u=r-(D+f)+(f-s),a===0&&l===0&&c===0&&u===0)||(T=KZ*o+HZ*Math.abs(R),R+=N*u+D*a-(A*c+I*l),R>=T||-R>=T))return R;w=a*D,d=Dn*a,h=d-(d-a),p=a-h,d=Dn*D,g=d-(d-D),v=D-g,S=p*v-(w-h*g-p*g-h*v),_=l*I,d=Dn*l,h=d-(d-l),p=l-h,d=Dn*I,g=d-(d-I),v=I-g,x=p*v-(_-h*g-p*g-h*v),y=S-x,f=S-y,Pn[0]=S-(y+f)+(f-x),m=w+y,f=m-w,b=w-(m-f)+(y-f),y=b-_,f=b-y,Pn[1]=b-(y+f)+(f-_),E=m+y,f=E-m,Pn[2]=m-(E-f)+(y-f),Pn[3]=E;const M=qw(4,Yc,4,Pn,u6);w=N*u,d=Dn*N,h=d-(d-N),p=N-h,d=Dn*u,g=d-(d-u),v=u-g,S=p*v-(w-h*g-p*g-h*v),_=A*c,d=Dn*A,h=d-(d-A),p=A-h,d=Dn*c,g=d-(d-c),v=c-g,x=p*v-(_-h*g-p*g-h*v),y=S-x,f=S-y,Pn[0]=S-(y+f)+(f-x),m=w+y,f=m-w,b=w-(m-f)+(y-f),y=b-_,f=b-y,Pn[1]=b-(y+f)+(f-_),E=m+y,f=E-m,Pn[2]=m-(E-f)+(y-f),Pn[3]=E;const $=qw(M,u6,4,Pn,f6);w=a*u,d=Dn*a,h=d-(d-a),p=a-h,d=Dn*u,g=d-(d-u),v=u-g,S=p*v-(w-h*g-p*g-h*v),_=l*c,d=Dn*l,h=d-(d-l),p=l-h,d=Dn*c,g=d-(d-c),v=c-g,x=p*v-(_-h*g-p*g-h*v),y=S-x,f=S-y,Pn[0]=S-(y+f)+(f-x),m=w+y,f=m-w,b=w-(m-f)+(y-f),y=b-_,f=b-y,Pn[1]=b-(y+f)+(f-_),E=m+y,f=E-m,Pn[2]=m-(E-f)+(y-f),Pn[3]=E;const B=qw($,f6,4,Pn,d6);return d6[B-1]}function p0(e,t,n,r,i,s){const o=(t-s)*(n-i),a=(e-i)*(r-s),l=o-a,c=Math.abs(o+a);return Math.abs(l)>=XZ*c?l:-ZZ(e,t,n,r,i,s,c)}const h6=Math.pow(2,-52),y0=new Uint32Array(512);class zg{static from(t,n=rJ,r=iJ){const i=t.length,s=new Float64Array(i*2);for(let o=0;o<i;o++){const a=t[o];s[2*o]=n(a),s[2*o+1]=r(a)}return new zg(s)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:s}=this,o=t.length>>1;let a=1/0,l=1/0,c=-1/0,u=-1/0;for(let I=0;I<o;I++){const A=t[2*I],D=t[2*I+1];A<a&&(a=A),D<l&&(l=D),A>c&&(c=A),D>u&&(u=D),this._ids[I]=I}const f=(a+c)/2,d=(l+u)/2;let h=1/0,p,g,v;for(let I=0;I<o;I++){const A=Ww(f,d,t[2*I],t[2*I+1]);A<h&&(p=I,h=A)}const y=t[2*p],m=t[2*p+1];h=1/0;for(let I=0;I<o;I++){if(I===p)continue;const A=Ww(y,m,t[2*I],t[2*I+1]);A<h&&A>0&&(g=I,h=A)}let b=t[2*g],w=t[2*g+1],S=1/0;for(let I=0;I<o;I++){if(I===p||I===g)continue;const A=eJ(y,m,b,w,t[2*I],t[2*I+1]);A<S&&(v=I,S=A)}let _=t[2*v],x=t[2*v+1];if(S===1/0){for(let D=0;D<o;D++)this._dists[D]=t[2*D]-t[0]||t[2*D+1]-t[1];$u(this._ids,this._dists,0,o-1);const I=new Uint32Array(o);let A=0;for(let D=0,R=-1/0;D<o;D++){const T=this._ids[D];this._dists[T]>R&&(I[A++]=T,R=this._dists[T])}this.hull=I.subarray(0,A),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(p0(y,m,b,w,_,x)<0){const I=g,A=b,D=w;g=v,b=_,w=x,v=I,_=A,x=D}const E=nJ(y,m,b,w,_,x);this._cx=E.x,this._cy=E.y;for(let I=0;I<o;I++)this._dists[I]=Ww(t[2*I],t[2*I+1],E.x,E.y);$u(this._ids,this._dists,0,o-1),this._hullStart=p;let N=3;r[p]=n[v]=g,r[g]=n[p]=v,r[v]=n[g]=p,i[p]=0,i[g]=1,i[v]=2,s.fill(-1),s[this._hashKey(y,m)]=p,s[this._hashKey(b,w)]=g,s[this._hashKey(_,x)]=v,this.trianglesLen=0,this._addTriangle(p,g,v,-1,-1,-1);for(let I=0,A,D;I<this._ids.length;I++){const R=this._ids[I],T=t[2*R],M=t[2*R+1];if(I>0&&Math.abs(T-A)<=h6&&Math.abs(M-D)<=h6||(A=T,D=M,R===p||R===g||R===v))continue;let $=0;for(let P=0,z=this._hashKey(T,M);P<this._hashSize&&($=s[(z+P)%this._hashSize],!($!==-1&&$!==r[$]));P++);$=n[$];let B=$,O;for(;O=r[B],p0(T,M,t[2*B],t[2*B+1],t[2*O],t[2*O+1])>=0;)if(B=O,B===$){B=-1;break}if(B===-1)continue;let C=this._addTriangle(B,R,r[B],-1,-1,i[B]);i[R]=this._legalize(C+2),i[B]=C,N++;let F=r[B];for(;O=r[F],p0(T,M,t[2*F],t[2*F+1],t[2*O],t[2*O+1])<0;)C=this._addTriangle(F,R,O,i[R],-1,i[F]),i[R]=this._legalize(C+2),r[F]=F,N--,F=O;if(B===$)for(;O=n[B],p0(T,M,t[2*O],t[2*O+1],t[2*B],t[2*B+1])<0;)C=this._addTriangle(O,R,B,-1,i[B],i[O]),this._legalize(C+2),i[O]=C,r[B]=B,N--,B=O;this._hullStart=n[R]=B,r[B]=n[F]=R,r[R]=F,s[this._hashKey(T,M)]=R,s[this._hashKey(t[2*B],t[2*B+1])]=B}this.hull=new Uint32Array(N);for(let I=0,A=this._hullStart;I<N;I++)this.hull[I]=A,A=r[A];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(JZ(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:r,coords:i}=this;let s=0,o=0;for(;;){const a=r[t],l=t-t%3;if(o=l+(t+2)%3,a===-1){if(s===0)break;t=y0[--s];continue}const c=a-a%3,u=l+(t+1)%3,f=c+(a+2)%3,d=n[o],h=n[t],p=n[u],g=n[f];if(tJ(i[2*d],i[2*d+1],i[2*h],i[2*h+1],i[2*p],i[2*p+1],i[2*g],i[2*g+1])){n[t]=g,n[a]=d;const y=r[f];if(y===-1){let b=this._hullStart;do{if(this._hullTri[b]===f){this._hullTri[b]=t;break}b=this._hullPrev[b]}while(b!==this._hullStart)}this._link(t,y),this._link(a,r[o]),this._link(o,f);const m=c+(a+1)%3;s<y0.length&&(y0[s++]=m)}else{if(s===0)break;t=y0[--s]}}return o}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,r,i,s,o){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=n,this._triangles[a+2]=r,this._link(a,i),this._link(a+1,s),this._link(a+2,o),this.trianglesLen+=3,a}}function JZ(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function Ww(e,t,n,r){const i=e-n,s=t-r;return i*i+s*s}function tJ(e,t,n,r,i,s,o,a){const l=e-o,c=t-a,u=n-o,f=r-a,d=i-o,h=s-a,p=l*l+c*c,g=u*u+f*f,v=d*d+h*h;return l*(f*v-g*h)-c*(u*v-g*d)+p*(u*h-f*d)<0}function eJ(e,t,n,r,i,s){const o=n-e,a=r-t,l=i-e,c=s-t,u=o*o+a*a,f=l*l+c*c,d=.5/(o*c-a*l),h=(c*u-a*f)*d,p=(o*f-l*u)*d;return h*h+p*p}function nJ(e,t,n,r,i,s){const o=n-e,a=r-t,l=i-e,c=s-t,u=o*o+a*a,f=l*l+c*c,d=.5/(o*c-a*l),h=e+(c*u-a*f)*d,p=t+(o*f-l*u)*d;return{x:h,y:p}}function $u(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const s=e[i],o=t[s];let a=i-1;for(;a>=n&&t[e[a]]>o;)e[a+1]=e[a--];e[a+1]=s}else{const i=n+r>>1;let s=n+1,o=r;Fd(e,i,s),t[e[n]]>t[e[r]]&&Fd(e,n,r),t[e[s]]>t[e[r]]&&Fd(e,s,r),t[e[n]]>t[e[s]]&&Fd(e,n,s);const a=e[s],l=t[a];for(;;){do s++;while(t[e[s]]<l);do o--;while(t[e[o]]>l);if(o<s)break;Fd(e,s,o)}e[n+1]=e[o],e[o]=a,r-s+1>=o-n?($u(e,t,s,r),$u(e,t,n,o-1)):($u(e,t,n,o-1),$u(e,t,s,r))}}function Fd(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function rJ(e){return e[0]}function iJ(e){return e[1]}const p6=1e-6;class zl{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,r){t=+t,n=+n,r=+r;const i=t+r,s=n;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${s}`:(Math.abs(this._x1-i)>p6||Math.abs(this._y1-s)>p6)&&(this._+="L"+i+","+s),r&&(this._+=`A${r},${r},0,1,1,${t-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=s}`)}rect(t,n,r,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class gS{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let sJ=class{constructor(t,[n,r,i,s]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((s=+s)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=i,this.xmin=n,this.ymax=s,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:r},vectors:i}=this;let s,o;const a=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let g=0,v=0,y=r.length,m,b;g<y;g+=3,v+=2){const w=r[g]*2,S=r[g+1]*2,_=r[g+2]*2,x=t[w],E=t[w+1],N=t[S],I=t[S+1],A=t[_],D=t[_+1],R=N-x,T=I-E,M=A-x,$=D-E,B=(R*$-T*M)*2;if(Math.abs(B)<1e-9){if(s===void 0){s=o=0;for(const C of n)s+=t[C*2],o+=t[C*2+1];s/=n.length,o/=n.length}const O=1e9*Math.sign((s-x)*$-(o-E)*M);m=(x+A)/2-O*$,b=(E+D)/2+O*M}else{const O=1/B,C=R*R+T*T,F=M*M+$*$;m=x+($*C-T*F)*O,b=E+(R*F-M*C)*O}a[v]=m,a[v+1]=b}let l=n[n.length-1],c,u=l*4,f,d=t[2*l],h,p=t[2*l+1];i.fill(0);for(let g=0;g<n.length;++g)l=n[g],c=u,f=d,h=p,u=l*4,d=t[2*l],p=t[2*l+1],i[c+2]=i[u]=h-p,i[c+3]=i[u+1]=d-f}render(t){const n=t==null?t=new zl:void 0,{delaunay:{halfedges:r,inedges:i,hull:s},circumcenters:o,vectors:a}=this;if(s.length<=1)return null;for(let u=0,f=r.length;u<f;++u){const d=r[u];if(d<u)continue;const h=Math.floor(u/3)*2,p=Math.floor(d/3)*2,g=o[h],v=o[h+1],y=o[p],m=o[p+1];this._renderSegment(g,v,y,m,t)}let l,c=s[s.length-1];for(let u=0;u<s.length;++u){l=c,c=s[u];const f=Math.floor(i[c]/3)*2,d=o[f],h=o[f+1],p=l*4,g=this._project(d,h,a[p+2],a[p+3]);g&&this._renderSegment(d,h,g[0],g[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new zl:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const r=n==null?n=new zl:void 0,i=this._clip(t);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let s=i.length;for(;i[0]===i[s-2]&&i[1]===i[s-1]&&s>1;)s-=2;for(let o=2;o<s;o+=2)(i[o]!==i[o-2]||i[o+1]!==i[o-1])&&n.lineTo(i[o],i[o+1]);return n.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,r=t.length/2;n<r;++n){const i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(t){const n=new gS;return this.renderCell(t,n),n.value()}_renderSegment(t,n,r,i,s){let o;const a=this._regioncode(t,n),l=this._regioncode(r,i);a===0&&l===0?(s.moveTo(t,n),s.lineTo(r,i)):(o=this._clipSegment(t,n,r,i,a,l))&&(s.moveTo(o[0],o[1]),s.lineTo(o[2],o[3]))}contains(t,n,r){return n=+n,n!==n||(r=+r,r!==r)?!1:this.delaunay._step(t,n,r)===t}*neighbors(t){const n=this._clip(t);if(n)for(const r of this.delaunay.neighbors(t)){const i=this._clip(r);if(i){t:for(let s=0,o=n.length;s<o;s+=2)for(let a=0,l=i.length;a<l;a+=2)if(n[s]===i[a]&&n[s+1]===i[a+1]&&n[(s+2)%o]===i[(a+l-2)%l]&&n[(s+3)%o]===i[(a+l-1)%l]){yield r;break t}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:s}}=this,o=r[t];if(o===-1)return null;const a=[];let l=o;do{const c=Math.floor(l/3);if(a.push(n[c*2],n[c*2+1]),l=l%3===2?l-2:l+1,s[l]!==t)break;l=i[l]}while(l!==o&&l!==-1);return a}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:r}=this,i=t*4;return this._simplify(r[i]||r[i+1]?this._clipInfinite(t,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(t,n))}_clipFinite(t,n){const r=n.length;let i=null,s,o,a=n[r-2],l=n[r-1],c,u=this._regioncode(a,l),f,d=0;for(let h=0;h<r;h+=2)if(s=a,o=l,a=n[h],l=n[h+1],c=u,u=this._regioncode(a,l),c===0&&u===0)f=d,d=0,i?i.push(a,l):i=[a,l];else{let p,g,v,y,m;if(c===0){if((p=this._clipSegment(s,o,a,l,c,u))===null)continue;[g,v,y,m]=p}else{if((p=this._clipSegment(a,l,s,o,u,c))===null)continue;[y,m,g,v]=p,f=d,d=this._edgecode(g,v),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(g,v):i=[g,v]}f=d,d=this._edgecode(y,m),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(y,m):i=[y,m]}if(i)f=d,d=this._edgecode(i[0],i[1]),f&&d&&this._edge(t,f,d,i,i.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(t,n,r,i,s,o){const a=s<o;for(a&&([t,n,r,i,s,o]=[r,i,t,n,o,s]);;){if(s===0&&o===0)return a?[r,i,t,n]:[t,n,r,i];if(s&o)return null;let l,c,u=s||o;u&8?(l=t+(r-t)*(this.ymax-n)/(i-n),c=this.ymax):u&4?(l=t+(r-t)*(this.ymin-n)/(i-n),c=this.ymin):u&2?(c=n+(i-n)*(this.xmax-t)/(r-t),l=this.xmax):(c=n+(i-n)*(this.xmin-t)/(r-t),l=this.xmin),s?(t=l,n=c,s=this._regioncode(t,n)):(r=l,i=c,o=this._regioncode(r,i))}}_clipInfinite(t,n,r,i,s,o){let a=Array.from(n),l;if((l=this._project(a[0],a[1],r,i))&&a.unshift(l[0],l[1]),(l=this._project(a[a.length-2],a[a.length-1],s,o))&&a.push(l[0],l[1]),a=this._clipFinite(t,a))for(let c=0,u=a.length,f,d=this._edgecode(a[u-2],a[u-1]);c<u;c+=2)f=d,d=this._edgecode(a[c],a[c+1]),f&&d&&(c=this._edge(t,f,d,a,c),u=a.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(t,n,r,i,s){for(;n!==r;){let o,a;switch(n){case 5:n=4;continue;case 4:n=6,o=this.xmax,a=this.ymin;break;case 6:n=2;continue;case 2:n=10,o=this.xmax,a=this.ymax;break;case 10:n=8;continue;case 8:n=9,o=this.xmin,a=this.ymax;break;case 9:n=1;continue;case 1:n=5,o=this.xmin,a=this.ymin;break}(i[s]!==o||i[s+1]!==a)&&this.contains(t,o,a)&&(i.splice(s,0,o,a),s+=2)}return s}_project(t,n,r,i){let s=1/0,o,a,l;if(i<0){if(n<=this.ymin)return null;(o=(this.ymin-n)/i)<s&&(l=this.ymin,a=t+(s=o)*r)}else if(i>0){if(n>=this.ymax)return null;(o=(this.ymax-n)/i)<s&&(l=this.ymax,a=t+(s=o)*r)}if(r>0){if(t>=this.xmax)return null;(o=(this.xmax-t)/r)<s&&(a=this.xmax,l=n+(s=o)*i)}else if(r<0){if(t<=this.xmin)return null;(o=(this.xmin-t)/r)<s&&(a=this.xmin,l=n+(s=o)*i)}return[a,l]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const r=(n+2)%t.length,i=(n+4)%t.length;(t[n]===t[r]&&t[r]===t[i]||t[n+1]===t[r+1]&&t[r+1]===t[i+1])&&(t.splice(r,2),n-=2)}t.length||(t=null)}return t}};const oJ=2*Math.PI,qc=Math.pow;function aJ(e){return e[0]}function lJ(e){return e[1]}function cJ(e){const{triangles:t,coords:n}=e;for(let r=0;r<t.length;r+=3){const i=2*t[r],s=2*t[r+1],o=2*t[r+2];if((n[o]-n[i])*(n[s+1]-n[i+1])-(n[s]-n[i])*(n[o+1]-n[i+1])>1e-10)return!1}return!0}function uJ(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class ol{static from(t,n=aJ,r=lJ,i){return new ol("length"in t?fJ(t,n,r,i):Float64Array.from(dJ(t,n,r,i)))}constructor(t){this._delaunator=new zg(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&cJ(t)){this.collinear=Int32Array.from({length:n.length/2},(d,h)=>h).sort((d,h)=>n[2*d]-n[2*h]||n[2*d+1]-n[2*h+1]);const l=this.collinear[0],c=this.collinear[this.collinear.length-1],u=[n[2*l],n[2*l+1],n[2*c],n[2*c+1]],f=1e-8*Math.hypot(u[3]-u[1],u[2]-u[0]);for(let d=0,h=n.length/2;d<h;++d){const p=uJ(n[2*d],n[2*d+1],f);n[2*d]=p[0],n[2*d+1]=p[1]}this._delaunator=new zg(n)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,s=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let l=0,c=r.length;l<c;++l){const u=s[l%3===2?l-2:l+1];(r[l]===-1||o[u]===-1)&&(o[u]=l)}for(let l=0,c=i.length;l<c;++l)a[i[l]]=l;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],o[i[0]]=1,i.length===2&&(o[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(t){return new sJ(this,t)}*neighbors(t){const{inedges:n,hull:r,_hullIndex:i,halfedges:s,triangles:o,collinear:a}=this;if(a){const f=a.indexOf(t);f>0&&(yield a[f-1]),f<a.length-1&&(yield a[f+1]);return}const l=n[t];if(l===-1)return;let c=l,u=-1;do{if(yield u=o[c],c=c%3===2?c-2:c+1,o[c]!==t)return;if(c=s[c],c===-1){const f=r[(i[t]+1)%r.length];f!==u&&(yield f);return}}while(c!==l)}find(t,n,r=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const i=r;let s;for(;(s=this._step(r,t,n))>=0&&s!==r&&s!==i;)r=s;return s}_step(t,n,r){const{inedges:i,hull:s,_hullIndex:o,halfedges:a,triangles:l,points:c}=this;if(i[t]===-1||!c.length)return(t+1)%(c.length>>1);let u=t,f=qc(n-c[t*2],2)+qc(r-c[t*2+1],2);const d=i[t];let h=d;do{let p=l[h];const g=qc(n-c[p*2],2)+qc(r-c[p*2+1],2);if(g<f&&(f=g,u=p),h=h%3===2?h-2:h+1,l[h]!==t)break;if(h=a[h],h===-1){if(h=s[(o[t]+1)%s.length],h!==p&&qc(n-c[h*2],2)+qc(r-c[h*2+1],2)<f)return h;break}}while(h!==d);return u}render(t){const n=t==null?t=new zl:void 0,{points:r,halfedges:i,triangles:s}=this;for(let o=0,a=i.length;o<a;++o){const l=i[o];if(l<o)continue;const c=s[o]*2,u=s[l]*2;t.moveTo(r[c],r[c+1]),t.lineTo(r[u],r[u+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const r=t==null?t=new zl:void 0,{points:i}=this;for(let s=0,o=i.length;s<o;s+=2){const a=i[s],l=i[s+1];t.moveTo(a+n,l),t.arc(a,l,n,0,oJ)}return r&&r.value()}renderHull(t){const n=t==null?t=new zl:void 0,{hull:r,points:i}=this,s=r[0]*2,o=r.length;t.moveTo(i[s],i[s+1]);for(let a=1;a<o;++a){const l=2*r[a];t.lineTo(i[l],i[l+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new gS;return this.renderHull(t),t.value()}renderTriangle(t,n){const r=n==null?n=new zl:void 0,{points:i,triangles:s}=this,o=s[t*=3]*2,a=s[t+1]*2,l=s[t+2]*2;return n.moveTo(i[o],i[o+1]),n.lineTo(i[a],i[a+1]),n.lineTo(i[l],i[l+1]),n.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,r=t.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new gS;return this.renderTriangle(t,n),n.value()}}function fJ(e,t,n,r){const i=e.length,s=new Float64Array(i*2);for(let o=0;o<i;++o){const a=e[o];s[o*2]=t.call(r,a,o,e),s[o*2+1]=n.call(r,a,o,e)}return s}function*dJ(e,t,n,r){let i=0;for(const s of e)yield t.call(r,s,i,e),yield n.call(r,s,i,e),++i}function hJ(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function jg(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function Mf(e){return e=jg(Math.abs(e)),e?e[1]:NaN}function pJ(e,t){return function(n,r){for(var i=n.length,s=[],o=0,a=e[0],l=0;i>0&&a>0&&(l+a+1>r&&(a=Math.max(1,r-l)),s.push(n.substring(i-=a,i+a)),!((l+=a+1)>r));)a=e[o=(o+1)%e.length];return s.reverse().join(t)}}function yJ(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var mJ=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function mp(e){if(!(t=mJ.exec(e)))throw new Error("invalid format: "+e);var t;return new w3({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}mp.prototype=w3.prototype;function w3(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}w3.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function gJ(e){t:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break t;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var PF;function bJ(e,t){var n=jg(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(PF=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+jg(e,Math.max(0,t+s-1))[0]}function y6(e,t){var n=jg(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const m6={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:hJ,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>y6(e*100,t),r:y6,s:bJ,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function g6(e){return e}var b6=Array.prototype.map,v6=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function vJ(e){var t=e.grouping===void 0||e.thousands===void 0?g6:pJ(b6.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?g6:yJ(b6.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"−":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function c(f){f=mp(f);var d=f.fill,h=f.align,p=f.sign,g=f.symbol,v=f.zero,y=f.width,m=f.comma,b=f.precision,w=f.trim,S=f.type;S==="n"?(m=!0,S="g"):m6[S]||(b===void 0&&(b=12),w=!0,S="g"),(v||d==="0"&&h==="=")&&(v=!0,d="0",h="=");var _=g==="$"?n:g==="#"&&/[boxX]/.test(S)?"0"+S.toLowerCase():"",x=g==="$"?r:/[%p]/.test(S)?o:"",E=m6[S],N=/[defgprs%]/.test(S);b=b===void 0?6:/[gprs]/.test(S)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function I(A){var D=_,R=x,T,M,$;if(S==="c")R=E(A)+R,A="";else{A=+A;var B=A<0||1/A<0;if(A=isNaN(A)?l:E(Math.abs(A),b),w&&(A=gJ(A)),B&&+A==0&&p!=="+"&&(B=!1),D=(B?p==="("?p:a:p==="-"||p==="("?"":p)+D,R=(S==="s"?v6[8+PF/3]:"")+R+(B&&p==="("?")":""),N){for(T=-1,M=A.length;++T<M;)if($=A.charCodeAt(T),48>$||$>57){R=($===46?i+A.slice(T+1):A.slice(T))+R,A=A.slice(0,T);break}}}m&&!v&&(A=t(A,1/0));var O=D.length+A.length+R.length,C=O<y?new Array(y-O+1).join(d):"";switch(m&&v&&(A=t(C+A,C.length?y-R.length:1/0),C=""),h){case"<":A=D+A+R+C;break;case"=":A=D+C+A+R;break;case"^":A=C.slice(0,O=C.length>>1)+D+A+R+C.slice(O);break;default:A=C+D+A+R;break}return s(A)}return I.toString=function(){return f+""},I}function u(f,d){var h=c((f=mp(f),f.type="f",f)),p=Math.max(-8,Math.min(8,Math.floor(Mf(d)/3)))*3,g=Math.pow(10,-p),v=v6[8+p/3];return function(y){return h(g*y)+v}}return{format:c,formatPrefix:u}}var m0,sd,zF;wJ({thousands:",",grouping:[3],currency:["$",""]});function wJ(e){return m0=vJ(e),sd=m0.format,zF=m0.formatPrefix,m0}function _J(e){return Math.max(0,-Mf(Math.abs(e)))}function SJ(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Mf(t)/3)))*3-Mf(Math.abs(e)))}function xJ(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Mf(t)-Mf(e))+1}var ft=1e-6,Vg=1e-12,Rt=Math.PI,We=Rt/2,w6=Rt/4,Ur=Rt*2,Sn=180/Rt,Qt=Rt/180,ee=Math.abs,od=Math.atan,qi=Math.atan2,dt=Math.cos,g0=Math.ceil,jF=Math.exp,bS=Math.hypot,Yg=Math.log,Hw=Math.pow,lt=Math.sin,li=Math.sign||function(e){return e>0?1:e<0?-1:0},Kn=Math.sqrt,_3=Math.tan;function VF(e){return e>1?0:e<-1?Rt:Math.acos(e)}function vr(e){return e>1?We:e<-1?-We:Math.asin(e)}function Dr(){}function qg(e,t){e&&S6.hasOwnProperty(e.type)&&S6[e.type](e,t)}var _6={Feature:function(e,t){qg(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)qg(n[r].geometry,t)}},S6={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){vS(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)vS(n[r],t,0)},Polygon:function(e,t){x6(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)x6(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)qg(n[r],t)}};function vS(e,t,n){var r=-1,i=e.length-n,s;for(t.lineStart();++r<i;)s=e[r],t.point(s[0],s[1],s[2]);t.lineEnd()}function x6(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)vS(e[n],t,1);t.polygonEnd()}function ha(e,t){e&&_6.hasOwnProperty(e.type)?_6[e.type](e,t):qg(e,t)}function wS(e){return[qi(e[1],e[0]),vr(e[2])]}function $f(e){var t=e[0],n=e[1],r=dt(n);return[r*dt(t),r*lt(t),lt(n)]}function b0(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Wg(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function Gw(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function v0(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function _S(e){var t=Kn(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var oh,Hg,Gg,Xg,Qg,Kg,Zg,Jg,SS,xS,IS,YF,qF,Vn,Yn,qn,Bi={sphere:Dr,point:S3,lineStart:I6,lineEnd:T6,polygonStart:function(){Bi.lineStart=EJ,Bi.lineEnd=AJ},polygonEnd:function(){Bi.lineStart=I6,Bi.lineEnd=T6}};function S3(e,t){e*=Qt,t*=Qt;var n=dt(t);oy(n*dt(e),n*lt(e),lt(t))}function oy(e,t,n){++oh,Gg+=(e-Gg)/oh,Xg+=(t-Xg)/oh,Qg+=(n-Qg)/oh}function I6(){Bi.point=IJ}function IJ(e,t){e*=Qt,t*=Qt;var n=dt(t);Vn=n*dt(e),Yn=n*lt(e),qn=lt(t),Bi.point=TJ,oy(Vn,Yn,qn)}function TJ(e,t){e*=Qt,t*=Qt;var n=dt(t),r=n*dt(e),i=n*lt(e),s=lt(t),o=qi(Kn((o=Yn*s-qn*i)*o+(o=qn*r-Vn*s)*o+(o=Vn*i-Yn*r)*o),Vn*r+Yn*i+qn*s);Hg+=o,Kg+=o*(Vn+(Vn=r)),Zg+=o*(Yn+(Yn=i)),Jg+=o*(qn+(qn=s)),oy(Vn,Yn,qn)}function T6(){Bi.point=S3}function EJ(){Bi.point=MJ}function AJ(){WF(YF,qF),Bi.point=S3}function MJ(e,t){YF=e,qF=t,e*=Qt,t*=Qt,Bi.point=WF;var n=dt(t);Vn=n*dt(e),Yn=n*lt(e),qn=lt(t),oy(Vn,Yn,qn)}function WF(e,t){e*=Qt,t*=Qt;var n=dt(t),r=n*dt(e),i=n*lt(e),s=lt(t),o=Yn*s-qn*i,a=qn*r-Vn*s,l=Vn*i-Yn*r,c=bS(o,a,l),u=vr(c),f=c&&-u/c;SS.add(f*o),xS.add(f*a),IS.add(f*l),Hg+=u,Kg+=u*(Vn+(Vn=r)),Zg+=u*(Yn+(Yn=i)),Jg+=u*(qn+(qn=s)),oy(Vn,Yn,qn)}function $J(e){oh=Hg=Gg=Xg=Qg=Kg=Zg=Jg=0,SS=new Os,xS=new Os,IS=new Os,ha(e,Bi);var t=+SS,n=+xS,r=+IS,i=bS(t,n,r);return i<Vg&&(t=Kg,n=Zg,r=Jg,Hg<ft&&(t=Gg,n=Xg,r=Qg),i=bS(t,n,r),i<Vg)?[NaN,NaN]:[qi(n,t)*Sn,vr(r/i)*Sn]}function TS(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function ES(e,t){return ee(e)>Rt&&(e-=Math.round(e/Ur)*Ur),[e,t]}ES.invert=ES;function HF(e,t,n){return(e%=Ur)?t||n?TS(A6(e),M6(t,n)):A6(e):t||n?M6(t,n):ES}function E6(e){return function(t,n){return t+=e,ee(t)>Rt&&(t-=Math.round(t/Ur)*Ur),[t,n]}}function A6(e){var t=E6(e);return t.invert=E6(-e),t}function M6(e,t){var n=dt(e),r=lt(e),i=dt(t),s=lt(t);function o(a,l){var c=dt(l),u=dt(a)*c,f=lt(a)*c,d=lt(l),h=d*n+u*r;return[qi(f*i-h*s,u*n-d*r),vr(h*i+f*s)]}return o.invert=function(a,l){var c=dt(l),u=dt(a)*c,f=lt(a)*c,d=lt(l),h=d*i-f*s;return[qi(f*i+d*s,u*n+h*r),vr(h*n-u*r)]},o}function NJ(e){e=HF(e[0]*Qt,e[1]*Qt,e.length>2?e[2]*Qt:0);function t(n){return n=e(n[0]*Qt,n[1]*Qt),n[0]*=Sn,n[1]*=Sn,n}return t.invert=function(n){return n=e.invert(n[0]*Qt,n[1]*Qt),n[0]*=Sn,n[1]*=Sn,n},t}function kJ(e,t,n,r,i,s){if(n){var o=dt(t),a=lt(t),l=r*n;i==null?(i=t+r*Ur,s=t-l/2):(i=$6(o,i),s=$6(o,s),(r>0?i<s:i>s)&&(i+=r*Ur));for(var c,u=i;r>0?u>s:u<s;u-=l)c=wS([o,-a*dt(u),-a*lt(u)]),e.point(c[0],c[1])}}function $6(e,t){t=$f(t),t[0]-=e,_S(t);var n=VF(-t[1]);return((-t[2]<0?-n:n)+Ur-ft)%Ur}function GF(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:Dr,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function mm(e,t){return ee(e[0]-t[0])<ft&&ee(e[1]-t[1])<ft}function w0(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function XF(e,t,n,r,i){var s=[],o=[],a,l;if(e.forEach(function(p){if(!((g=p.length-1)<=0)){var g,v=p[0],y=p[g],m;if(mm(v,y)){if(!v[2]&&!y[2]){for(i.lineStart(),a=0;a<g;++a)i.point((v=p[a])[0],v[1]);i.lineEnd();return}y[0]+=2*ft}s.push(m=new w0(v,p,null,!0)),o.push(m.o=new w0(v,null,m,!1)),s.push(m=new w0(y,p,null,!1)),o.push(m.o=new w0(y,null,m,!0))}}),!!s.length){for(o.sort(t),N6(s),N6(o),a=0,l=o.length;a<l;++a)o[a].e=n=!n;for(var c=s[0],u,f;;){for(var d=c,h=!0;d.v;)if((d=d.n)===c)return;u=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(a=0,l=u.length;a<l;++a)i.point((f=u[a])[0],f[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(h)for(u=d.p.z,a=u.length-1;a>=0;--a)i.point((f=u[a])[0],f[1]);else r(d.x,d.p.x,-1,i);d=d.p}d=d.o,u=d.z,h=!h}while(!d.v);i.lineEnd()}}}function N6(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function Xw(e){return ee(e[0])<=Rt?e[0]:li(e[0])*((ee(e[0])+Rt)%Ur-Rt)}function DJ(e,t){var n=Xw(t),r=t[1],i=lt(r),s=[lt(n),-dt(n),0],o=0,a=0,l=new Os;i===1?r=We+ft:i===-1&&(r=-We-ft);for(var c=0,u=e.length;c<u;++c)if(d=(f=e[c]).length)for(var f,d,h=f[d-1],p=Xw(h),g=h[1]/2+w6,v=lt(g),y=dt(g),m=0;m<d;++m,p=w,v=_,y=x,h=b){var b=f[m],w=Xw(b),S=b[1]/2+w6,_=lt(S),x=dt(S),E=w-p,N=E>=0?1:-1,I=N*E,A=I>Rt,D=v*_;if(l.add(qi(D*N*lt(I),y*x+D*dt(I))),o+=A?E+N*Ur:E,A^p>=n^w>=n){var R=Wg($f(h),$f(b));_S(R);var T=Wg(s,R);_S(T);var M=(A^E>=0?-1:1)*vr(T[2]);(r>M||r===M&&(R[0]||R[1]))&&(a+=A^E>=0?1:-1)}}return(o<-ft||o<ft&&l<-Vg)^a&1}function QF(e,t,n,r){return function(i){var s=t(i),o=GF(),a=t(o),l=!1,c,u,f,d={point:h,lineStart:g,lineEnd:v,polygonStart:function(){d.point=y,d.lineStart=m,d.lineEnd=b,u=[],c=[]},polygonEnd:function(){d.point=h,d.lineStart=g,d.lineEnd=v,u=ZO(u);var w=DJ(c,r);u.length?(l||(i.polygonStart(),l=!0),XF(u,FJ,w,n,i)):w&&(l||(i.polygonStart(),l=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),l&&(i.polygonEnd(),l=!1),u=c=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(w,S){e(w,S)&&i.point(w,S)}function p(w,S){s.point(w,S)}function g(){d.point=p,s.lineStart()}function v(){d.point=h,s.lineEnd()}function y(w,S){f.push([w,S]),a.point(w,S)}function m(){a.lineStart(),f=[]}function b(){y(f[0][0],f[0][1]),a.lineEnd();var w=a.clean(),S=o.result(),_,x=S.length,E,N,I;if(f.pop(),c.push(f),f=null,!!x){if(w&1){if(N=S[0],(E=N.length-1)>0){for(l||(i.polygonStart(),l=!0),i.lineStart(),_=0;_<E;++_)i.point((I=N[_])[0],I[1]);i.lineEnd()}return}x>1&&w&2&&S.push(S.pop().concat(S.shift())),u.push(S.filter(OJ))}}return d}}function OJ(e){return e.length>1}function FJ(e,t){return((e=e.x)[0]<0?e[1]-We-ft:We-e[1])-((t=t.x)[0]<0?t[1]-We-ft:We-t[1])}const k6=QF(function(){return!0},BJ,LJ,[-Rt,-We]);function BJ(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(s,o){var a=s>0?Rt:-Rt,l=ee(s-t);ee(l-Rt)<ft?(e.point(t,n=(n+o)/2>0?We:-We),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),e.point(s,n),i=0):r!==a&&l>=Rt&&(ee(t-r)<ft&&(t-=r*ft),ee(s-a)<ft&&(s-=a*ft),n=RJ(t,n,s,o),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),i=0),e.point(t=s,n=o),r=a},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function RJ(e,t,n,r){var i,s,o=lt(e-n);return ee(o)>ft?od((lt(t)*(s=dt(r))*lt(n)-lt(r)*(i=dt(t))*lt(e))/(i*s*o)):(t+r)/2}function LJ(e,t,n,r){var i;if(e==null)i=n*We,r.point(-Rt,i),r.point(0,i),r.point(Rt,i),r.point(Rt,0),r.point(Rt,-i),r.point(0,-i),r.point(-Rt,-i),r.point(-Rt,0),r.point(-Rt,i);else if(ee(e[0]-t[0])>ft){var s=e[0]<t[0]?Rt:-Rt;i=n*s/2,r.point(-s,i),r.point(0,i),r.point(s,i)}else r.point(t[0],t[1])}function CJ(e){var t=dt(e),n=6*Qt,r=t>0,i=ee(t)>ft;function s(u,f,d,h){kJ(h,e,n,d,u,f)}function o(u,f){return dt(u)*dt(f)>t}function a(u){var f,d,h,p,g;return{lineStart:function(){p=h=!1,g=1},point:function(v,y){var m=[v,y],b,w=o(v,y),S=r?w?0:c(v,y):w?c(v+(v<0?Rt:-Rt),y):0;if(!f&&(p=h=w)&&u.lineStart(),w!==h&&(b=l(f,m),(!b||mm(f,b)||mm(m,b))&&(m[2]=1)),w!==h)g=0,w?(u.lineStart(),b=l(m,f),u.point(b[0],b[1])):(b=l(f,m),u.point(b[0],b[1],2),u.lineEnd()),f=b;else if(i&&f&&r^w){var _;!(S&d)&&(_=l(m,f,!0))&&(g=0,r?(u.lineStart(),u.point(_[0][0],_[0][1]),u.point(_[1][0],_[1][1]),u.lineEnd()):(u.point(_[1][0],_[1][1]),u.lineEnd(),u.lineStart(),u.point(_[0][0],_[0][1],3)))}w&&(!f||!mm(f,m))&&u.point(m[0],m[1]),f=m,h=w,d=S},lineEnd:function(){h&&u.lineEnd(),f=null},clean:function(){return g|(p&&h)<<1}}}function l(u,f,d){var h=$f(u),p=$f(f),g=[1,0,0],v=Wg(h,p),y=b0(v,v),m=v[0],b=y-m*m;if(!b)return!d&&u;var w=t*y/b,S=-t*m/b,_=Wg(g,v),x=v0(g,w),E=v0(v,S);Gw(x,E);var N=_,I=b0(x,N),A=b0(N,N),D=I*I-A*(b0(x,x)-1);if(!(D<0)){var R=Kn(D),T=v0(N,(-I-R)/A);if(Gw(T,x),T=wS(T),!d)return T;var M=u[0],$=f[0],B=u[1],O=f[1],C;$<M&&(C=M,M=$,$=C);var F=$-M,P=ee(F-Rt)<ft,z=P||F<ft;if(!P&&O<B&&(C=B,B=O,O=C),z?P?B+O>0^T[1]<(ee(T[0]-M)<ft?B:O):B<=T[1]&&T[1]<=O:F>Rt^(M<=T[0]&&T[0]<=$)){var H=v0(N,(-I+R)/A);return Gw(H,x),[T,wS(H)]}}}function c(u,f){var d=r?e:Rt-e,h=0;return u<-d?h|=1:u>d&&(h|=2),f<-d?h|=4:f>d&&(h|=8),h}return QF(o,a,s,r?[0,-e]:[-Rt,e-Rt])}function UJ(e,t,n,r,i,s){var o=e[0],a=e[1],l=t[0],c=t[1],u=0,f=1,d=l-o,h=c-a,p;if(p=n-o,!(!d&&p>0)){if(p/=d,d<0){if(p<u)return;p<f&&(f=p)}else if(d>0){if(p>f)return;p>u&&(u=p)}if(p=i-o,!(!d&&p<0)){if(p/=d,d<0){if(p>f)return;p>u&&(u=p)}else if(d>0){if(p<u)return;p<f&&(f=p)}if(p=r-a,!(!h&&p>0)){if(p/=h,h<0){if(p<u)return;p<f&&(f=p)}else if(h>0){if(p>f)return;p>u&&(u=p)}if(p=s-a,!(!h&&p<0)){if(p/=h,h<0){if(p>f)return;p>u&&(u=p)}else if(h>0){if(p<u)return;p<f&&(f=p)}return u>0&&(e[0]=o+u*d,e[1]=a+u*h),f<1&&(t[0]=o+f*d,t[1]=a+f*h),!0}}}}}var ah=1e9,_0=-ah;function KF(e,t,n,r){function i(c,u){return e<=c&&c<=n&&t<=u&&u<=r}function s(c,u,f,d){var h=0,p=0;if(c==null||(h=o(c,f))!==(p=o(u,f))||l(c,u)<0^f>0)do d.point(h===0||h===3?e:n,h>1?r:t);while((h=(h+f+4)%4)!==p);else d.point(u[0],u[1])}function o(c,u){return ee(c[0]-e)<ft?u>0?0:3:ee(c[0]-n)<ft?u>0?2:1:ee(c[1]-t)<ft?u>0?1:0:u>0?3:2}function a(c,u){return l(c.x,u.x)}function l(c,u){var f=o(c,1),d=o(u,1);return f!==d?f-d:f===0?u[1]-c[1]:f===1?c[0]-u[0]:f===2?c[1]-u[1]:u[0]-c[0]}return function(c){var u=c,f=GF(),d,h,p,g,v,y,m,b,w,S,_,x={point:E,lineStart:D,lineEnd:R,polygonStart:I,polygonEnd:A};function E(M,$){i(M,$)&&u.point(M,$)}function N(){for(var M=0,$=0,B=h.length;$<B;++$)for(var O=h[$],C=1,F=O.length,P=O[0],z,H,X=P[0],tt=P[1];C<F;++C)z=X,H=tt,P=O[C],X=P[0],tt=P[1],H<=r?tt>r&&(X-z)*(r-H)>(tt-H)*(e-z)&&++M:tt<=r&&(X-z)*(r-H)<(tt-H)*(e-z)&&--M;return M}function I(){u=f,d=[],h=[],_=!0}function A(){var M=N(),$=_&&M,B=(d=ZO(d)).length;($||B)&&(c.polygonStart(),$&&(c.lineStart(),s(null,null,1,c),c.lineEnd()),B&&XF(d,a,M,s,c),c.polygonEnd()),u=c,d=h=p=null}function D(){x.point=T,h&&h.push(p=[]),S=!0,w=!1,m=b=NaN}function R(){d&&(T(g,v),y&&w&&f.rejoin(),d.push(f.result())),x.point=E,w&&u.lineEnd()}function T(M,$){var B=i(M,$);if(h&&p.push([M,$]),S)g=M,v=$,y=B,S=!1,B&&(u.lineStart(),u.point(M,$));else if(B&&w)u.point(M,$);else{var O=[m=Math.max(_0,Math.min(ah,m)),b=Math.max(_0,Math.min(ah,b))],C=[M=Math.max(_0,Math.min(ah,M)),$=Math.max(_0,Math.min(ah,$))];UJ(O,C,e,t,n,r)?(w||(u.lineStart(),u.point(O[0],O[1])),u.point(C[0],C[1]),B||u.lineEnd(),_=!1):B&&(u.lineStart(),u.point(M,$),_=!1)}m=M,b=$,w=B}return x}}function D6(e,t,n){var r=kr(e,t-ft,n).concat(t);return function(i){return r.map(function(s){return[i,s]})}}function O6(e,t,n){var r=kr(e,t-ft,n).concat(t);return function(i){return r.map(function(s){return[s,i]})}}function PJ(){var e,t,n,r,i,s,o,a,l=10,c=l,u=90,f=360,d,h,p,g,v=2.5;function y(){return{type:"MultiLineString",coordinates:m()}}function m(){return kr(g0(r/u)*u,n,u).map(p).concat(kr(g0(a/f)*f,o,f).map(g)).concat(kr(g0(t/l)*l,e,l).filter(function(b){return ee(b%u)>ft}).map(d)).concat(kr(g0(s/c)*c,i,c).filter(function(b){return ee(b%f)>ft}).map(h))}return y.lines=function(){return m().map(function(b){return{type:"LineString",coordinates:b}})},y.outline=function(){return{type:"Polygon",coordinates:[p(r).concat(g(o).slice(1),p(n).reverse().slice(1),g(a).reverse().slice(1))]}},y.extent=function(b){return arguments.length?y.extentMajor(b).extentMinor(b):y.extentMinor()},y.extentMajor=function(b){return arguments.length?(r=+b[0][0],n=+b[1][0],a=+b[0][1],o=+b[1][1],r>n&&(b=r,r=n,n=b),a>o&&(b=a,a=o,o=b),y.precision(v)):[[r,a],[n,o]]},y.extentMinor=function(b){return arguments.length?(t=+b[0][0],e=+b[1][0],s=+b[0][1],i=+b[1][1],t>e&&(b=t,t=e,e=b),s>i&&(b=s,s=i,i=b),y.precision(v)):[[t,s],[e,i]]},y.step=function(b){return arguments.length?y.stepMajor(b).stepMinor(b):y.stepMinor()},y.stepMajor=function(b){return arguments.length?(u=+b[0],f=+b[1],y):[u,f]},y.stepMinor=function(b){return arguments.length?(l=+b[0],c=+b[1],y):[l,c]},y.precision=function(b){return arguments.length?(v=+b,d=D6(s,i,90),h=O6(t,e,v),p=D6(a,o,90),g=O6(r,n,v),y):v},y.extentMajor([[-180,-90+ft],[180,90-ft]]).extentMinor([[-180,-80-ft],[180,80+ft]])}function zJ(){return PJ()()}const AS=e=>e;var Qw=new Os,MS=new Os,ZF,JF,$S,NS,pa={point:Dr,lineStart:Dr,lineEnd:Dr,polygonStart:function(){pa.lineStart=jJ,pa.lineEnd=YJ},polygonEnd:function(){pa.lineStart=pa.lineEnd=pa.point=Dr,Qw.add(ee(MS)),MS=new Os},result:function(){var e=Qw/2;return Qw=new Os,e}};function jJ(){pa.point=VJ}function VJ(e,t){pa.point=tB,ZF=$S=e,JF=NS=t}function tB(e,t){MS.add(NS*e-$S*t),$S=e,NS=t}function YJ(){tB(ZF,JF)}const F6=pa;var Nf=1/0,t1=Nf,gp=-Nf,e1=gp,qJ={point:WJ,lineStart:Dr,lineEnd:Dr,polygonStart:Dr,polygonEnd:Dr,result:function(){var e=[[Nf,t1],[gp,e1]];return gp=e1=-(t1=Nf=1/0),e}};function WJ(e,t){e<Nf&&(Nf=e),e>gp&&(gp=e),t<t1&&(t1=t),t>e1&&(e1=t)}const n1=qJ;var kS=0,DS=0,lh=0,r1=0,i1=0,Nu=0,OS=0,FS=0,ch=0,eB,nB,bs,vs,Fi={point:Ic,lineStart:B6,lineEnd:R6,polygonStart:function(){Fi.lineStart=XJ,Fi.lineEnd=QJ},polygonEnd:function(){Fi.point=Ic,Fi.lineStart=B6,Fi.lineEnd=R6},result:function(){var e=ch?[OS/ch,FS/ch]:Nu?[r1/Nu,i1/Nu]:lh?[kS/lh,DS/lh]:[NaN,NaN];return kS=DS=lh=r1=i1=Nu=OS=FS=ch=0,e}};function Ic(e,t){kS+=e,DS+=t,++lh}function B6(){Fi.point=HJ}function HJ(e,t){Fi.point=GJ,Ic(bs=e,vs=t)}function GJ(e,t){var n=e-bs,r=t-vs,i=Kn(n*n+r*r);r1+=i*(bs+e)/2,i1+=i*(vs+t)/2,Nu+=i,Ic(bs=e,vs=t)}function R6(){Fi.point=Ic}function XJ(){Fi.point=KJ}function QJ(){rB(eB,nB)}function KJ(e,t){Fi.point=rB,Ic(eB=bs=e,nB=vs=t)}function rB(e,t){var n=e-bs,r=t-vs,i=Kn(n*n+r*r);r1+=i*(bs+e)/2,i1+=i*(vs+t)/2,Nu+=i,i=vs*e-bs*t,OS+=i*(bs+e),FS+=i*(vs+t),ch+=i*3,Ic(bs=e,vs=t)}const L6=Fi;function iB(e){this._context=e}iB.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,Ur);break}}},result:Dr};var BS=new Os,Kw,sB,oB,uh,fh,s1={point:Dr,lineStart:function(){s1.point=ZJ},lineEnd:function(){Kw&&aB(sB,oB),s1.point=Dr},polygonStart:function(){Kw=!0},polygonEnd:function(){Kw=null},result:function(){var e=+BS;return BS=new Os,e}};function ZJ(e,t){s1.point=aB,sB=uh=e,oB=fh=t}function aB(e,t){uh-=e,fh-=t,BS.add(Kn(uh*uh+fh*fh)),uh=e,fh=t}const C6=s1;let U6,o1,P6,z6;class j6{constructor(t){this._append=t==null?lB:JJ(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==P6||this._append!==o1){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,P6=r,o1=this._append,z6=this._,this._=i}this._+=z6;break}}}result(){const t=this._;return this._="",t.length?t:null}}function lB(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function JJ(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return lB;if(t!==U6){const n=10**t;U6=t,o1=function(i){let s=1;this._+=i[0];for(const o=i.length;s<o;++s)this._+=Math.round(arguments[s]*n)/n+i[s]}}return o1}function al(e,t){let n=3,r=4.5,i,s;function o(a){return a&&(typeof r=="function"&&s.pointRadius(+r.apply(this,arguments)),ha(a,i(s))),s.result()}return o.area=function(a){return ha(a,i(F6)),F6.result()},o.measure=function(a){return ha(a,i(C6)),C6.result()},o.bounds=function(a){return ha(a,i(n1)),n1.result()},o.centroid=function(a){return ha(a,i(L6)),L6.result()},o.projection=function(a){return arguments.length?(i=a==null?(e=null,AS):(e=a).stream,o):e},o.context=function(a){return arguments.length?(s=a==null?(t=null,new j6(n)):new iB(t=a),typeof r!="function"&&s.pointRadius(r),o):t},o.pointRadius=function(a){return arguments.length?(r=typeof a=="function"?a:(s.pointRadius(+a),+a),o):r},o.digits=function(a){if(!arguments.length)return n;if(a==null)n=null;else{const l=Math.floor(a);if(!(l>=0))throw new RangeError(`invalid digits: ${a}`);n=l}return t===null&&(s=new j6(n)),o},o.projection(e).digits(n).context(t)}function a1(e){return{stream:tv(e)}}function tv(e){return function(t){var n=new RS;for(var r in e)n[r]=e[r];return n.stream=t,n}}function RS(){}RS.prototype={constructor:RS,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function x3(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),ha(n,e.stream(n1)),t(n1.result()),r!=null&&e.clipExtent(r),e}function I3(e,t,n){return x3(e,function(r){var i=t[1][0]-t[0][0],s=t[1][1]-t[0][1],o=Math.min(i/(r[1][0]-r[0][0]),s/(r[1][1]-r[0][1])),a=+t[0][0]+(i-o*(r[1][0]+r[0][0]))/2,l=+t[0][1]+(s-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([a,l])},n)}function cB(e,t,n){return I3(e,[[0,0],t],n)}function uB(e,t,n){return x3(e,function(r){var i=+t,s=i/(r[1][0]-r[0][0]),o=(i-s*(r[1][0]+r[0][0]))/2,a=-s*r[0][1];e.scale(150*s).translate([o,a])},n)}function fB(e,t,n){return x3(e,function(r){var i=+t,s=i/(r[1][1]-r[0][1]),o=-s*r[0][0],a=(i-s*(r[1][1]+r[0][1]))/2;e.scale(150*s).translate([o,a])},n)}var V6=16,ttt=dt(30*Qt);function Y6(e,t){return+t?ntt(e,t):ett(e)}function ett(e){return tv({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function ntt(e,t){function n(r,i,s,o,a,l,c,u,f,d,h,p,g,v){var y=c-r,m=u-i,b=y*y+m*m;if(b>4*t&&g--){var w=o+d,S=a+h,_=l+p,x=Kn(w*w+S*S+_*_),E=vr(_/=x),N=ee(ee(_)-1)<ft||ee(s-f)<ft?(s+f)/2:qi(S,w),I=e(N,E),A=I[0],D=I[1],R=A-r,T=D-i,M=m*R-y*T;(M*M/b>t||ee((y*R+m*T)/b-.5)>.3||o*d+a*h+l*p<ttt)&&(n(r,i,s,o,a,l,A,D,N,w/=x,S/=x,_,g,v),v.point(A,D),n(A,D,N,w,S,_,c,u,f,d,h,p,g,v))}}return function(r){var i,s,o,a,l,c,u,f,d,h,p,g,v={point:y,lineStart:m,lineEnd:w,polygonStart:function(){r.polygonStart(),v.lineStart=S},polygonEnd:function(){r.polygonEnd(),v.lineStart=m}};function y(E,N){E=e(E,N),r.point(E[0],E[1])}function m(){f=NaN,v.point=b,r.lineStart()}function b(E,N){var I=$f([E,N]),A=e(E,N);n(f,d,u,h,p,g,f=A[0],d=A[1],u=E,h=I[0],p=I[1],g=I[2],V6,r),r.point(f,d)}function w(){v.point=y,r.lineEnd()}function S(){m(),v.point=_,v.lineEnd=x}function _(E,N){b(i=E,N),s=f,o=d,a=h,l=p,c=g,v.point=b}function x(){n(f,d,u,h,p,g,s,o,i,a,l,c,V6,r),v.lineEnd=w,w()}return v}}var rtt=tv({point:function(e,t){this.stream.point(e*Qt,t*Qt)}});function itt(e){return tv({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function stt(e,t,n,r,i){function s(o,a){return o*=r,a*=i,[t+e*o,n-e*a]}return s.invert=function(o,a){return[(o-t)/e*r,(n-a)/e*i]},s}function q6(e,t,n,r,i,s){if(!s)return stt(e,t,n,r,i);var o=dt(s),a=lt(s),l=o*e,c=a*e,u=o/e,f=a/e,d=(a*n-o*t)/e,h=(a*t+o*n)/e;function p(g,v){return g*=r,v*=i,[l*g-c*v+t,n-c*g-l*v]}return p.invert=function(g,v){return[r*(u*g-f*v+d),i*(h-f*g-u*v)]},p}function ll(e){return dB(function(){return e})()}function dB(e){var t,n=150,r=480,i=250,s=0,o=0,a=0,l=0,c=0,u,f=0,d=1,h=1,p=null,g=k6,v=null,y,m,b,w=AS,S=.5,_,x,E,N,I;function A(M){return E(M[0]*Qt,M[1]*Qt)}function D(M){return M=E.invert(M[0],M[1]),M&&[M[0]*Sn,M[1]*Sn]}A.stream=function(M){return N&&I===M?N:N=rtt(itt(u)(g(_(w(I=M)))))},A.preclip=function(M){return arguments.length?(g=M,p=void 0,T()):g},A.postclip=function(M){return arguments.length?(w=M,v=y=m=b=null,T()):w},A.clipAngle=function(M){return arguments.length?(g=+M?CJ(p=M*Qt):(p=null,k6),T()):p*Sn},A.clipExtent=function(M){return arguments.length?(w=M==null?(v=y=m=b=null,AS):KF(v=+M[0][0],y=+M[0][1],m=+M[1][0],b=+M[1][1]),T()):v==null?null:[[v,y],[m,b]]},A.scale=function(M){return arguments.length?(n=+M,R()):n},A.translate=function(M){return arguments.length?(r=+M[0],i=+M[1],R()):[r,i]},A.center=function(M){return arguments.length?(s=M[0]%360*Qt,o=M[1]%360*Qt,R()):[s*Sn,o*Sn]},A.rotate=function(M){return arguments.length?(a=M[0]%360*Qt,l=M[1]%360*Qt,c=M.length>2?M[2]%360*Qt:0,R()):[a*Sn,l*Sn,c*Sn]},A.angle=function(M){return arguments.length?(f=M%360*Qt,R()):f*Sn},A.reflectX=function(M){return arguments.length?(d=M?-1:1,R()):d<0},A.reflectY=function(M){return arguments.length?(h=M?-1:1,R()):h<0},A.precision=function(M){return arguments.length?(_=Y6(x,S=M*M),T()):Kn(S)},A.fitExtent=function(M,$){return I3(A,M,$)},A.fitSize=function(M,$){return cB(A,M,$)},A.fitWidth=function(M,$){return uB(A,M,$)},A.fitHeight=function(M,$){return fB(A,M,$)};function R(){var M=q6(n,0,0,d,h,f).apply(null,t(s,o)),$=q6(n,r-M[0],i-M[1],d,h,f);return u=HF(a,l,c),x=TS(t,$),E=TS(u,x),_=Y6(x,S),T()}function T(){return N=I=null,A}return function(){return t=e.apply(this,arguments),A.invert=t.invert&&D,R()}}function T3(e){var t=0,n=Rt/3,r=dB(e),i=r(t,n);return i.parallels=function(s){return arguments.length?r(t=s[0]*Qt,n=s[1]*Qt):[t*Sn,n*Sn]},i}function ott(e){var t=dt(e);function n(r,i){return[r*t,lt(i)/t]}return n.invert=function(r,i){return[r/t,vr(i*t)]},n}function att(e,t){var n=lt(e),r=(n+lt(t))/2;if(ee(r)<ft)return ott(e);var i=1+n*(2*r-n),s=Kn(i)/r;function o(a,l){var c=Kn(i-2*r*lt(l))/r;return[c*lt(a*=r),s-c*dt(a)]}return o.invert=function(a,l){var c=s-l,u=qi(a,ee(c))*li(c);return c*r<0&&(u-=Rt*li(a)*li(c)),[u/r,vr((i-(a*a+c*c)*r*r)/(2*r))]},o}function l1(){return T3(att).scale(155.424).center([0,33.6442])}function hB(){return l1().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function ltt(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function ctt(){var e,t,n=hB(),r,i=l1().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s,o=l1().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,l,c={point:function(d,h){l=[d,h]}};function u(d){var h=d[0],p=d[1];return l=null,r.point(h,p),l||(s.point(h,p),l)||(a.point(h,p),l)}u.invert=function(d){var h=n.scale(),p=n.translate(),g=(d[0]-p[0])/h,v=(d[1]-p[1])/h;return(v>=.12&&v<.234&&g>=-.425&&g<-.214?i:v>=.166&&v<.234&&g>=-.214&&g<-.115?o:n).invert(d)},u.stream=function(d){return e&&t===d?e:e=ltt([n.stream(t=d),i.stream(d),o.stream(d)])},u.precision=function(d){return arguments.length?(n.precision(d),i.precision(d),o.precision(d),f()):n.precision()},u.scale=function(d){return arguments.length?(n.scale(d),i.scale(d*.35),o.scale(d),u.translate(n.translate())):n.scale()},u.translate=function(d){if(!arguments.length)return n.translate();var h=n.scale(),p=+d[0],g=+d[1];return r=n.translate(d).clipExtent([[p-.455*h,g-.238*h],[p+.455*h,g+.238*h]]).stream(c),s=i.translate([p-.307*h,g+.201*h]).clipExtent([[p-.425*h+ft,g+.12*h+ft],[p-.214*h-ft,g+.234*h-ft]]).stream(c),a=o.translate([p-.205*h,g+.212*h]).clipExtent([[p-.214*h+ft,g+.166*h+ft],[p-.115*h-ft,g+.234*h-ft]]).stream(c),f()},u.fitExtent=function(d,h){return I3(u,d,h)},u.fitSize=function(d,h){return cB(u,d,h)},u.fitWidth=function(d,h){return uB(u,d,h)},u.fitHeight=function(d,h){return fB(u,d,h)};function f(){return e=t=null,u}return u.scale(1070)}function pB(e){return function(t,n){var r=dt(t),i=dt(n),s=e(r*i);return s===1/0?[2,0]:[s*i*lt(t),s*lt(n)]}}function ay(e){return function(t,n){var r=Kn(t*t+n*n),i=e(r),s=lt(i),o=dt(i);return[qi(t*s,r*o),vr(r&&n*s/r)]}}var yB=pB(function(e){return Kn(2/(1+e))});yB.invert=ay(function(e){return 2*vr(e/2)});function utt(){return ll(yB).scale(124.75).clipAngle(180-.001)}var mB=pB(function(e){return(e=VF(e))&&e/lt(e)});mB.invert=ay(function(e){return e});function ftt(){return ll(mB).scale(79.4188).clipAngle(180-.001)}function ev(e,t){return[e,Yg(_3((We+t)/2))]}ev.invert=function(e,t){return[e,2*od(jF(t))-We]};function dtt(){return gB(ev).scale(961/Ur)}function gB(e){var t=ll(e),n=t.center,r=t.scale,i=t.translate,s=t.clipExtent,o=null,a,l,c;t.scale=function(f){return arguments.length?(r(f),u()):r()},t.translate=function(f){return arguments.length?(i(f),u()):i()},t.center=function(f){return arguments.length?(n(f),u()):n()},t.clipExtent=function(f){return arguments.length?(f==null?o=a=l=c=null:(o=+f[0][0],a=+f[0][1],l=+f[1][0],c=+f[1][1]),u()):o==null?null:[[o,a],[l,c]]};function u(){var f=Rt*r(),d=t(NJ(t.rotate()).invert([0,0]));return s(o==null?[[d[0]-f,d[1]-f],[d[0]+f,d[1]+f]]:e===ev?[[Math.max(d[0]-f,o),a],[Math.min(d[0]+f,l),c]]:[[o,Math.max(d[1]-f,a)],[l,Math.min(d[1]+f,c)]])}return u()}function S0(e){return _3((We+e)/2)}function htt(e,t){var n=dt(e),r=e===t?lt(e):Yg(n/dt(t))/Yg(S0(t)/S0(e)),i=n*Hw(S0(e),r)/r;if(!r)return ev;function s(o,a){i>0?a<-We+ft&&(a=-We+ft):a>We-ft&&(a=We-ft);var l=i/Hw(S0(a),r);return[l*lt(r*o),i-l*dt(r*o)]}return s.invert=function(o,a){var l=i-a,c=li(r)*Kn(o*o+l*l),u=qi(o,ee(l))*li(l);return l*r<0&&(u-=Rt*li(o)*li(l)),[u/r,2*od(Hw(i/c,1/r))-We]},s}function ptt(){return T3(htt).scale(109.5).parallels([30,30])}function c1(e,t){return[e,t]}c1.invert=c1;function ytt(){return ll(c1).scale(152.63)}function mtt(e,t){var n=dt(e),r=e===t?lt(e):(n-dt(t))/(t-e),i=n/r+e;if(ee(r)<ft)return c1;function s(o,a){var l=i-a,c=r*o;return[l*lt(c),i-l*dt(c)]}return s.invert=function(o,a){var l=i-a,c=qi(o,ee(l))*li(l);return l*r<0&&(c-=Rt*li(o)*li(l)),[c/r,i-li(r)*Kn(o*o+l*l)]},s}function gtt(){return T3(mtt).scale(131.154).center([0,13.9389])}var Ah=1.340264,Mh=-.081106,$h=893e-6,Nh=.003796,u1=Kn(3)/2,btt=12;function bB(e,t){var n=vr(u1*lt(t)),r=n*n,i=r*r*r;return[e*dt(n)/(u1*(Ah+3*Mh*r+i*(7*$h+9*Nh*r))),n*(Ah+Mh*r+i*($h+Nh*r))]}bB.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,s=0,o,a,l;s<btt&&(a=n*(Ah+Mh*r+i*($h+Nh*r))-t,l=Ah+3*Mh*r+i*(7*$h+9*Nh*r),n-=o=a/l,r=n*n,i=r*r*r,!(ee(o)<Vg));++s);return[u1*e*(Ah+3*Mh*r+i*(7*$h+9*Nh*r))/dt(n),vr(lt(n)/u1)]};function vtt(){return ll(bB).scale(177.158)}function vB(e,t){var n=dt(t),r=dt(e)*n;return[n*lt(e)/r,lt(t)/r]}vB.invert=ay(od);function wtt(){return ll(vB).scale(144.049).clipAngle(60)}function wB(e,t){return[dt(t)*lt(e),lt(t)]}wB.invert=ay(vr);function _tt(){return ll(wB).scale(249.5).clipAngle(90+ft)}function _B(e,t){var n=dt(t),r=1+dt(e)*n;return[n*lt(e)/r,lt(t)/r]}_B.invert=ay(function(e){return 2*od(e)});function Stt(){return ll(_B).scale(250).clipAngle(142)}function SB(e,t){return[Yg(_3((We+t)/2)),-e]}SB.invert=function(e,t){return[-t,2*od(jF(e))-We]};function xtt(){var e=gB(SB),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}function Itt(e,t){return e.parent===t.parent?1:2}function Ttt(e){return e.reduce(Ett,0)/e.length}function Ett(e,t){return e+t.x}function Att(e){return 1+e.reduce(Mtt,0)}function Mtt(e,t){return Math.max(e,t.y)}function $tt(e){for(var t;t=e.children;)e=t[0];return e}function Ntt(e){for(var t;t=e.children;)e=t[t.length-1];return e}function xB(){var e=Itt,t=1,n=1,r=!1;function i(s){var o,a=0;s.eachAfter(function(d){var h=d.children;h?(d.x=Ttt(h),d.y=Att(h)):(d.x=o?a+=e(d,o):0,d.y=0,o=d)});var l=$tt(s),c=Ntt(s),u=l.x-e(l,c)/2,f=c.x+e(c,l)/2;return s.eachAfter(r?function(d){d.x=(d.x-s.x)*t,d.y=(s.y-d.y)*n}:function(d){d.x=(d.x-u)/(f-u)*t,d.y=(1-(s.y?d.y/s.y:1))*n})}return i.separation=function(s){return arguments.length?(e=s,i):e},i.size=function(s){return arguments.length?(r=!1,t=+s[0],n=+s[1],i):r?null:[t,n]},i.nodeSize=function(s){return arguments.length?(r=!0,t=+s[0],n=+s[1],i):r?[t,n]:null},i}function ktt(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function Dtt(){return this.eachAfter(ktt)}function Ott(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function Ftt(e,t){for(var n=this,r=[n],i,s,o=-1;n=r.pop();)if(e.call(t,n,++o,this),i=n.children)for(s=i.length-1;s>=0;--s)r.push(i[s]);return this}function Btt(e,t){for(var n=this,r=[n],i=[],s,o,a,l=-1;n=r.pop();)if(i.push(n),s=n.children)for(o=0,a=s.length;o<a;++o)r.push(s[o]);for(;n=i.pop();)e.call(t,n,++l,this);return this}function Rtt(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function Ltt(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function Ctt(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function Utt(e){for(var t=this,n=Ptt(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function Ptt(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function ztt(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function jtt(){return Array.from(this)}function Vtt(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function Ytt(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*qtt(){var e=this,t,n=[e],r,i,s;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,s=r.length;i<s;++i)n.push(r[i]);while(n.length)}function IB(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=Gtt)):t===void 0&&(t=Htt);for(var n=new kf(e),r,i=[n],s,o,a,l;r=i.pop();)if((o=t(r.data))&&(l=(o=Array.from(o)).length))for(r.children=o,a=l-1;a>=0;--a)i.push(s=o[a]=new kf(o[a])),s.parent=r,s.depth=r.depth+1;return n.eachBefore(TB)}function Wtt(){return IB(this).eachBefore(Xtt)}function Htt(e){return e.children}function Gtt(e){return Array.isArray(e)?e[1]:null}function Xtt(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function TB(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function kf(e){this.data=e,this.depth=this.height=0,this.parent=null}kf.prototype=IB.prototype={constructor:kf,count:Dtt,each:Ott,eachAfter:Btt,eachBefore:Ftt,find:Rtt,sum:Ltt,sort:Ctt,path:Utt,ancestors:ztt,descendants:jtt,leaves:Vtt,links:Ytt,copy:Wtt,[Symbol.iterator]:qtt};function Zw(e){return e==null?null:Qtt(e)}function Qtt(e){if(typeof e!="function")throw new Error;return e}var Ktt={depth:-1},W6={},Jw={};function Ztt(e){return e.id}function Jtt(e){return e.parentId}function EB(){var e=Ztt,t=Jtt,n;function r(i){var s=Array.from(i),o=e,a=t,l,c,u,f,d,h,p,g,v=new Map;if(n!=null){const y=s.map((w,S)=>tet(n(w,S,i))),m=y.map(H6),b=new Set(y).add("");for(const w of m)b.has(w)||(b.add(w),y.push(w),m.push(H6(w)),s.push(Jw));o=(w,S)=>y[S],a=(w,S)=>m[S]}for(u=0,l=s.length;u<l;++u)c=s[u],h=s[u]=new kf(c),(p=o(c,u,i))!=null&&(p+="")&&(g=h.id=p,v.set(g,v.has(g)?W6:h)),(p=a(c,u,i))!=null&&(p+="")&&(h.parent=p);for(u=0;u<l;++u)if(h=s[u],p=h.parent){if(d=v.get(p),!d)throw new Error("missing: "+p);if(d===W6)throw new Error("ambiguous: "+p);d.children?d.children.push(h):d.children=[h],h.parent=d}else{if(f)throw new Error("multiple roots");f=h}if(!f)throw new Error("no root");if(n!=null){for(;f.data===Jw&&f.children.length===1;)f=f.children[0],--l;for(let y=s.length-1;y>=0&&(h=s[y],h.data===Jw);--y)h.data=null}if(f.parent=Ktt,f.eachBefore(function(y){y.depth=y.parent.depth+1,--l}).eachBefore(TB),f.parent=null,l>0)throw new Error("cycle");return f}return r.id=function(i){return arguments.length?(e=Zw(i),r):e},r.parentId=function(i){return arguments.length?(t=Zw(i),r):t},r.path=function(i){return arguments.length?(n=Zw(i),r):n},r}function tet(e){e=`${e}`;let t=e.length;return LS(e,t-1)&&!LS(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function H6(e){let t=e.length;if(t<2)return"";for(;--t>1&&!LS(e,t););return e.slice(0,t)}function LS(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}function eet(e,t){return e.parent===t.parent?1:2}function t_(e){var t=e.children;return t?t[0]:e.t}function e_(e){var t=e.children;return t?t[t.length-1]:e.t}function net(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function ret(e){for(var t=0,n=0,r=e.children,i=r.length,s;--i>=0;)s=r[i],s.z+=t,s.m+=t,t+=s.s+(n+=s.c)}function iet(e,t,n){return e.a.parent===t.parent?e.a:n}function gm(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}gm.prototype=Object.create(kf.prototype);function set(e){for(var t=new gm(e,0),n,r=[t],i,s,o,a;n=r.pop();)if(s=n._.children)for(n.children=new Array(a=s.length),o=a-1;o>=0;--o)r.push(i=n.children[o]=new gm(s[o],o)),i.parent=n;return(t.parent=new gm(null,0)).children=[t],t}function f1(){var e=eet,t=1,n=1,r=null;function i(c){var u=set(c);if(u.eachAfter(s),u.parent.m=-u.z,u.eachBefore(o),r)c.eachBefore(l);else{var f=c,d=c,h=c;c.eachBefore(function(m){m.x<f.x&&(f=m),m.x>d.x&&(d=m),m.depth>h.depth&&(h=m)});var p=f===d?1:e(f,d)/2,g=p-f.x,v=t/(d.x+p+g),y=n/(h.depth||1);c.eachBefore(function(m){m.x=(m.x+g)*v,m.y=m.depth*y})}return c}function s(c){var u=c.children,f=c.parent.children,d=c.i?f[c.i-1]:null;if(u){ret(c);var h=(u[0].z+u[u.length-1].z)/2;d?(c.z=d.z+e(c._,d._),c.m=c.z-h):c.z=h}else d&&(c.z=d.z+e(c._,d._));c.parent.A=a(c,d,c.parent.A||f[0])}function o(c){c._.x=c.z+c.parent.m,c.m+=c.parent.m}function a(c,u,f){if(u){for(var d=c,h=c,p=u,g=d.parent.children[0],v=d.m,y=h.m,m=p.m,b=g.m,w;p=e_(p),d=t_(d),p&&d;)g=t_(g),h=e_(h),h.a=c,w=p.z+m-d.z-v+e(p._,d._),w>0&&(net(iet(p,c,f),c,w),v+=w,y+=w),m+=p.m,v+=d.m,b+=g.m,y+=h.m;p&&!e_(h)&&(h.t=p,h.m+=m-y),d&&!t_(g)&&(g.t=d,g.m+=v-b,f=c)}return f}function l(c){c.x*=t,c.y=c.depth*n}return i.separation=function(c){return arguments.length?(e=c,i):e},i.size=function(c){return arguments.length?(r=!1,t=+c[0],n=+c[1],i):r?null:[t,n]},i.nodeSize=function(c){return arguments.length?(r=!0,t=+c[0],n=+c[1],i):r?[t,n]:null},i}const oet=1664525,aet=1013904223,G6=1/4294967296;function E3(e=Math.random()){let t=(0<=e&&e<1?e/G6:Math.abs(e))|0;return()=>(t=oet*t+aet|0,G6*(t>>>0))}function Ys(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function nv(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const CS=Symbol("implicit");function A3(){var e=new vc,t=[],n=[],r=CS;function i(s){let o=e.get(s);if(o===void 0){if(r!==CS)return r;e.set(s,o=t.push(s)-1)}return n[o%n.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new vc;for(const o of s)e.has(o)||e.set(o,t.push(o)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return A3(t,n).unknown(r)},Ys.apply(i,arguments),i}function rv(){var e=A3().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,s,o,a=!1,l=0,c=0,u=.5;delete e.unknown;function f(){var d=t().length,h=i<r,p=h?i:r,g=h?r:i;s=(g-p)/Math.max(1,d-l+c*2),a&&(s=Math.floor(s)),p+=(g-p-s*(d-l))*u,o=s*(1-l),a&&(p=Math.round(p),o=Math.round(o));var v=kr(d).map(function(y){return p+s*y});return n(h?v.reverse():v)}return e.domain=function(d){return arguments.length?(t(d),f()):t()},e.range=function(d){return arguments.length?([r,i]=d,r=+r,i=+i,f()):[r,i]},e.rangeRound=function(d){return[r,i]=d,r=+r,i=+i,a=!0,f()},e.bandwidth=function(){return o},e.step=function(){return s},e.round=function(d){return arguments.length?(a=!!d,f()):a},e.padding=function(d){return arguments.length?(l=Math.min(1,c=+d),f()):l},e.paddingInner=function(d){return arguments.length?(l=Math.min(1,d),f()):l},e.paddingOuter=function(d){return arguments.length?(c=+d,f()):c},e.align=function(d){return arguments.length?(u=Math.max(0,Math.min(1,d)),f()):u},e.copy=function(){return rv(t(),[r,i]).round(a).paddingInner(l).paddingOuter(c).align(u)},Ys.apply(f(),arguments)}function AB(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return AB(t())},e}function cet(){return AB(rv.apply(null,arguments).paddingInner(1))}function uet(e){return function(){return e}}function US(e){return+e}var X6=[0,1];function ci(e){return e}function PS(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:uet(isNaN(t)?NaN:.5)}function fet(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function det(e,t,n){var r=e[0],i=e[1],s=t[0],o=t[1];return i<r?(r=PS(i,r),s=n(o,s)):(r=PS(r,i),s=n(s,o)),function(a){return s(r(a))}}function het(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),s=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=PS(e[o],e[o+1]),s[o]=n(t[o],t[o+1]);return function(a){var l=Vb(e,a,1,r)-1;return s[l](i[l](a))}}function ly(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function iv(){var e=X6,t=X6,n=id,r,i,s,o=ci,a,l,c;function u(){var d=Math.min(e.length,t.length);return o!==ci&&(o=fet(e[0],e[d-1])),a=d>2?het:det,l=c=null,f}function f(d){return d==null||isNaN(d=+d)?s:(l||(l=a(e.map(r),t,n)))(r(o(d)))}return f.invert=function(d){return o(i((c||(c=a(t,e.map(r),Fn)))(d)))},f.domain=function(d){return arguments.length?(e=Array.from(d,US),u()):e.slice()},f.range=function(d){return arguments.length?(t=Array.from(d),u()):t.slice()},f.rangeRound=function(d){return t=Array.from(d),n=p3,u()},f.clamp=function(d){return arguments.length?(o=d?!0:ci,u()):o!==ci},f.interpolate=function(d){return arguments.length?(n=d,u()):n},f.unknown=function(d){return arguments.length?(s=d,f):s},function(d,h){return r=d,i=h,u()}}function MB(){return iv()(ci,ci)}function pet(e,t,n,r){var i=eS(e,t,n),s;switch(r=mp(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(s=SJ(i,o))&&(r.precision=s),zF(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=xJ(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=_J(i))&&(r.precision=s-(r.type==="%")*2);break}}return sd(r)}function cy(e){var t=e.domain;return e.ticks=function(n){var r=t();return Ua(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return pet(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,s=r.length-1,o=r[i],a=r[s],l,c,u=10;for(a<o&&(c=o,o=a,a=c,c=i,i=s,s=c);u-- >0;){if(c=up(o,a,n),c===l)return r[i]=o,r[s]=a,t(r);if(c>0)o=Math.floor(o/c)*c,a=Math.ceil(a/c)*c;else if(c<0)o=Math.ceil(o*c)/c,a=Math.floor(a*c)/c;else break;l=c}return e},e}function sv(){var e=MB();return e.copy=function(){return ly(e,sv())},Ys.apply(e,arguments),cy(e)}function $B(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,US),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return $B(e).unknown(t)},e=arguments.length?Array.from(e,US):[0,1],cy(n)}function NB(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],s=e[r],o;return s<i&&(o=n,n=r,r=o,o=i,i=s,s=o),e[n]=t.floor(i),e[r]=t.ceil(s),e}function Q6(e){return Math.log(e)}function K6(e){return Math.exp(e)}function yet(e){return-Math.log(-e)}function met(e){return-Math.exp(-e)}function get(e){return isFinite(e)?+("1e"+e):e<0?0:e}function bet(e){return e===10?get:e===Math.E?Math.exp:t=>Math.pow(e,t)}function vet(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function Z6(e){return(t,n)=>-e(-t,n)}function kB(e){const t=e(Q6,K6),n=t.domain;let r=10,i,s;function o(){return i=vet(r),s=bet(r),n()[0]<0?(i=Z6(i),s=Z6(s),e(yet,met)):e(Q6,K6),t}return t.base=function(a){return arguments.length?(r=+a,o()):r},t.domain=function(a){return arguments.length?(n(a),o()):n()},t.ticks=a=>{const l=n();let c=l[0],u=l[l.length-1];const f=u<c;f&&([c,u]=[u,c]);let d=i(c),h=i(u),p,g;const v=a==null?10:+a;let y=[];if(!(r%1)&&h-d<v){if(d=Math.floor(d),h=Math.ceil(h),c>0){for(;d<=h;++d)for(p=1;p<r;++p)if(g=d<0?p/s(-d):p*s(d),!(g<c)){if(g>u)break;y.push(g)}}else for(;d<=h;++d)for(p=r-1;p>=1;--p)if(g=d>0?p/s(-d):p*s(d),!(g<c)){if(g>u)break;y.push(g)}y.length*2<v&&(y=Ua(c,u,v))}else y=Ua(d,h,Math.min(h-d,v)).map(s);return f?y.reverse():y},t.tickFormat=(a,l)=>{if(a==null&&(a=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=mp(l)).precision==null&&(l.trim=!0),l=sd(l)),a===1/0)return l;const c=Math.max(1,r*a/t.ticks().length);return u=>{let f=u/s(Math.round(i(u)));return f*r<r-.5&&(f*=r),f<=c?l(u):""}},t.nice=()=>n(NB(n(),{floor:a=>s(Math.floor(i(a))),ceil:a=>s(Math.ceil(i(a)))})),t}function DB(){const e=kB(iv()).domain([1,10]);return e.copy=()=>ly(e,DB()).base(e.base()),Ys.apply(e,arguments),e}function J6(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function t$(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function OB(e){var t=1,n=e(J6(t),t$(t));return n.constant=function(r){return arguments.length?e(J6(t=+r),t$(t)):t},cy(n)}function FB(){var e=OB(iv());return e.copy=function(){return ly(e,FB()).constant(e.constant())},Ys.apply(e,arguments)}function e$(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function wet(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function _et(e){return e<0?-e*e:e*e}function BB(e){var t=e(ci,ci),n=1;function r(){return n===1?e(ci,ci):n===.5?e(wet,_et):e(e$(n),e$(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},cy(t)}function RB(){var e=BB(iv());return e.copy=function(){return ly(e,RB()).exponent(e.exponent())},Ys.apply(e,arguments),e}function LB(){var e=[],t=[],n=[],r;function i(){var o=0,a=Math.max(1,t.length);for(n=new Array(a-1);++o<a;)n[o-1]=AG(e,o/a);return s}function s(o){return o==null||isNaN(o=+o)?r:t[Vb(n,o)]}return s.invertExtent=function(o){var a=t.indexOf(o);return a<0?[NaN,NaN]:[a>0?n[a-1]:e[0],a<n.length?n[a]:e[e.length-1]]},s.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let a of o)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(ze),i()},s.range=function(o){return arguments.length?(t=Array.from(o),i()):t.slice()},s.unknown=function(o){return arguments.length?(r=o,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return LB().domain(e).range(t).unknown(r)},Ys.apply(s,arguments)}function CB(){var e=[.5],t=[0,1],n,r=1;function i(s){return s!=null&&s<=s?t[Vb(e,s,0,r)]:n}return i.domain=function(s){return arguments.length?(e=Array.from(s),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(s){return arguments.length?(t=Array.from(s),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(s){var o=t.indexOf(s);return[e[o-1],e[o]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return CB().domain(e).range(t).unknown(n)},Ys.apply(i,arguments)}const n_=new Date,r_=new Date;function un(e,t,n,r){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(e(s=new Date(+s)),s),i.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),i.round=s=>{const o=i(s),a=i.ceil(s);return s-o<a-s?o:a},i.offset=(s,o)=>(t(s=new Date(+s),o==null?1:Math.floor(o)),s),i.range=(s,o,a)=>{const l=[];if(s=i.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return l;let c;do l.push(c=new Date(+s)),t(s,a),e(s);while(c<s&&s<o);return l},i.filter=s=>un(o=>{if(o>=o)for(;e(o),!s(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;t(o,-1),!s(o););else for(;--a>=0;)for(;t(o,1),!s(o););}),n&&(i.count=(s,o)=>(n_.setTime(+s),r_.setTime(+o),e(n_),e(r_),Math.floor(n(n_,r_))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?o=>r(o)%s===0:o=>i.count(0,o)%s===0):i)),i}const d1=un(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);d1.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?un(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):d1);d1.range;const xo=1e3,ui=xo*60,Io=ui*60,Co=Io*24,M3=Co*7,n$=Co*30,i_=Co*365,Es=un(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*xo)},(e,t)=>(t-e)/xo,e=>e.getUTCSeconds());Es.range;const ov=un(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*xo)},(e,t)=>{e.setTime(+e+t*ui)},(e,t)=>(t-e)/ui,e=>e.getMinutes());ov.range;const uy=un(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*ui)},(e,t)=>(t-e)/ui,e=>e.getUTCMinutes());uy.range;const av=un(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*xo-e.getMinutes()*ui)},(e,t)=>{e.setTime(+e+t*Io)},(e,t)=>(t-e)/Io,e=>e.getHours());av.range;const fy=un(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Io)},(e,t)=>(t-e)/Io,e=>e.getUTCHours());fy.range;const Dc=un(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*ui)/Co,e=>e.getDate()-1);Dc.range;const lv=un(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Co,e=>e.getUTCDate()-1);lv.range;const cv=un(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Co,e=>Math.floor(e/Co));cv.range;function Oc(e){return un(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*ui)/M3)}const Df=Oc(0),bp=Oc(1),UB=Oc(2),PB=Oc(3),Tc=Oc(4),zB=Oc(5),jB=Oc(6);Df.range;bp.range;UB.range;PB.range;Tc.range;zB.range;jB.range;function Fc(e){return un(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/M3)}const Of=Fc(0),vp=Fc(1),VB=Fc(2),YB=Fc(3),Ec=Fc(4),qB=Fc(5),WB=Fc(6);Of.range;vp.range;VB.range;YB.range;Ec.range;qB.range;WB.range;const dy=un(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());dy.range;const hy=un(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());hy.range;const Wi=un(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Wi.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:un(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Wi.range;const Hi=un(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Hi.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:un(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Hi.range;function HB(e,t,n,r,i,s){const o=[[Es,1,xo],[Es,5,5*xo],[Es,15,15*xo],[Es,30,30*xo],[s,1,ui],[s,5,5*ui],[s,15,15*ui],[s,30,30*ui],[i,1,Io],[i,3,3*Io],[i,6,6*Io],[i,12,12*Io],[r,1,Co],[r,2,2*Co],[n,1,M3],[t,1,n$],[t,3,3*n$],[e,1,i_]];function a(c,u,f){const d=u<c;d&&([c,u]=[u,c]);const h=f&&typeof f.range=="function"?f:l(c,u,f),p=h?h.range(c,+u+1):[];return d?p.reverse():p}function l(c,u,f){const d=Math.abs(u-c)/f,h=jb(([,,v])=>v).right(o,d);if(h===o.length)return e.every(eS(c/i_,u/i_,f));if(h===0)return d1.every(Math.max(eS(c,u,f),1));const[p,g]=o[d/o[h-1][2]<o[h][2]/d?h-1:h];return p.every(g)}return[a,l]}const[xet,GB]=HB(Hi,hy,Of,cv,fy,uy),[Iet,Tet]=HB(Wi,dy,Df,Dc,av,ov);function s_(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function o_(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Bd(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function Eet(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,s=e.days,o=e.shortDays,a=e.months,l=e.shortMonths,c=Rd(i),u=Ld(i),f=Rd(s),d=Ld(s),h=Rd(o),p=Ld(o),g=Rd(a),v=Ld(a),y=Rd(l),m=Ld(l),b={a:B,A:O,b:C,B:F,c:null,d:l$,e:l$,f:Xet,g:snt,G:ant,H:Wet,I:Het,j:Get,L:XB,m:Qet,M:Ket,p:P,q:z,Q:f$,s:d$,S:Zet,u:Jet,U:tnt,V:ent,w:nnt,W:rnt,x:null,X:null,y:int,Y:ont,Z:lnt,"%":u$},w={a:H,A:X,b:tt,B:Z,c:null,d:c$,e:c$,f:dnt,g:Snt,G:Int,H:cnt,I:unt,j:fnt,L:KB,m:hnt,M:pnt,p:Y,q:Q,Q:f$,s:d$,S:ynt,u:mnt,U:gnt,V:bnt,w:vnt,W:wnt,x:null,X:null,y:_nt,Y:xnt,Z:Tnt,"%":u$},S={a:I,A,b:D,B:R,c:T,d:o$,e:o$,f:jet,g:s$,G:i$,H:a$,I:a$,j:Cet,L:zet,m:Let,M:Uet,p:N,q:Ret,Q:Yet,s:qet,S:Pet,u:ket,U:Det,V:Oet,w:Net,W:Fet,x:M,X:$,y:s$,Y:i$,Z:Bet,"%":Vet};b.x=_(n,b),b.X=_(r,b),b.c=_(t,b),w.x=_(n,w),w.X=_(r,w),w.c=_(t,w);function _(V,J){return function(et){var j=[],At=-1,ot=0,Yt=V.length,Ht,st,he;for(et instanceof Date||(et=new Date(+et));++At<Yt;)V.charCodeAt(At)===37&&(j.push(V.slice(ot,At)),(st=r$[Ht=V.charAt(++At)])!=null?Ht=V.charAt(++At):st=Ht==="e"?" ":"0",(he=J[Ht])&&(Ht=he(et,st)),j.push(Ht),ot=At+1);return j.push(V.slice(ot,At)),j.join("")}}function x(V,J){return function(et){var j=Bd(1900,void 0,1),At=E(j,V,et+="",0),ot,Yt;if(At!=et.length)return null;if("Q"in j)return new Date(j.Q);if("s"in j)return new Date(j.s*1e3+("L"in j?j.L:0));if(J&&!("Z"in j)&&(j.Z=0),"p"in j&&(j.H=j.H%12+j.p*12),j.m===void 0&&(j.m="q"in j?j.q:0),"V"in j){if(j.V<1||j.V>53)return null;"w"in j||(j.w=1),"Z"in j?(ot=o_(Bd(j.y,0,1)),Yt=ot.getUTCDay(),ot=Yt>4||Yt===0?vp.ceil(ot):vp(ot),ot=lv.offset(ot,(j.V-1)*7),j.y=ot.getUTCFullYear(),j.m=ot.getUTCMonth(),j.d=ot.getUTCDate()+(j.w+6)%7):(ot=s_(Bd(j.y,0,1)),Yt=ot.getDay(),ot=Yt>4||Yt===0?bp.ceil(ot):bp(ot),ot=Dc.offset(ot,(j.V-1)*7),j.y=ot.getFullYear(),j.m=ot.getMonth(),j.d=ot.getDate()+(j.w+6)%7)}else("W"in j||"U"in j)&&("w"in j||(j.w="u"in j?j.u%7:"W"in j?1:0),Yt="Z"in j?o_(Bd(j.y,0,1)).getUTCDay():s_(Bd(j.y,0,1)).getDay(),j.m=0,j.d="W"in j?(j.w+6)%7+j.W*7-(Yt+5)%7:j.w+j.U*7-(Yt+6)%7);return"Z"in j?(j.H+=j.Z/100|0,j.M+=j.Z%100,o_(j)):s_(j)}}function E(V,J,et,j){for(var At=0,ot=J.length,Yt=et.length,Ht,st;At<ot;){if(j>=Yt)return-1;if(Ht=J.charCodeAt(At++),Ht===37){if(Ht=J.charAt(At++),st=S[Ht in r$?J.charAt(At++):Ht],!st||(j=st(V,et,j))<0)return-1}else if(Ht!=et.charCodeAt(j++))return-1}return j}function N(V,J,et){var j=c.exec(J.slice(et));return j?(V.p=u.get(j[0].toLowerCase()),et+j[0].length):-1}function I(V,J,et){var j=h.exec(J.slice(et));return j?(V.w=p.get(j[0].toLowerCase()),et+j[0].length):-1}function A(V,J,et){var j=f.exec(J.slice(et));return j?(V.w=d.get(j[0].toLowerCase()),et+j[0].length):-1}function D(V,J,et){var j=y.exec(J.slice(et));return j?(V.m=m.get(j[0].toLowerCase()),et+j[0].length):-1}function R(V,J,et){var j=g.exec(J.slice(et));return j?(V.m=v.get(j[0].toLowerCase()),et+j[0].length):-1}function T(V,J,et){return E(V,t,J,et)}function M(V,J,et){return E(V,n,J,et)}function $(V,J,et){return E(V,r,J,et)}function B(V){return o[V.getDay()]}function O(V){return s[V.getDay()]}function C(V){return l[V.getMonth()]}function F(V){return a[V.getMonth()]}function P(V){return i[+(V.getHours()>=12)]}function z(V){return 1+~~(V.getMonth()/3)}function H(V){return o[V.getUTCDay()]}function X(V){return s[V.getUTCDay()]}function tt(V){return l[V.getUTCMonth()]}function Z(V){return a[V.getUTCMonth()]}function Y(V){return i[+(V.getUTCHours()>=12)]}function Q(V){return 1+~~(V.getUTCMonth()/3)}return{format:function(V){var J=_(V+="",b);return J.toString=function(){return V},J},parse:function(V){var J=x(V+="",!1);return J.toString=function(){return V},J},utcFormat:function(V){var J=_(V+="",w);return J.toString=function(){return V},J},utcParse:function(V){var J=x(V+="",!0);return J.toString=function(){return V},J}}}var r$={"-":"",_:" ",0:"0"},wn=/^\s*\d+/,Aet=/^%/,Met=/[\\^$*+?|[\]().{}]/g;function Kt(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(t)+i:i)}function $et(e){return e.replace(Met,"\\$&")}function Rd(e){return new RegExp("^(?:"+e.map($et).join("|")+")","i")}function Ld(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function Net(e,t,n){var r=wn.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function ket(e,t,n){var r=wn.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function Det(e,t,n){var r=wn.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function Oet(e,t,n){var r=wn.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function Fet(e,t,n){var r=wn.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function i$(e,t,n){var r=wn.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function s$(e,t,n){var r=wn.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Bet(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Ret(e,t,n){var r=wn.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function Let(e,t,n){var r=wn.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function o$(e,t,n){var r=wn.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function Cet(e,t,n){var r=wn.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function a$(e,t,n){var r=wn.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function Uet(e,t,n){var r=wn.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function Pet(e,t,n){var r=wn.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function zet(e,t,n){var r=wn.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function jet(e,t,n){var r=wn.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Vet(e,t,n){var r=Aet.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function Yet(e,t,n){var r=wn.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function qet(e,t,n){var r=wn.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function l$(e,t){return Kt(e.getDate(),t,2)}function Wet(e,t){return Kt(e.getHours(),t,2)}function Het(e,t){return Kt(e.getHours()%12||12,t,2)}function Get(e,t){return Kt(1+Dc.count(Wi(e),e),t,3)}function XB(e,t){return Kt(e.getMilliseconds(),t,3)}function Xet(e,t){return XB(e,t)+"000"}function Qet(e,t){return Kt(e.getMonth()+1,t,2)}function Ket(e,t){return Kt(e.getMinutes(),t,2)}function Zet(e,t){return Kt(e.getSeconds(),t,2)}function Jet(e){var t=e.getDay();return t===0?7:t}function tnt(e,t){return Kt(Df.count(Wi(e)-1,e),t,2)}function QB(e){var t=e.getDay();return t>=4||t===0?Tc(e):Tc.ceil(e)}function ent(e,t){return e=QB(e),Kt(Tc.count(Wi(e),e)+(Wi(e).getDay()===4),t,2)}function nnt(e){return e.getDay()}function rnt(e,t){return Kt(bp.count(Wi(e)-1,e),t,2)}function int(e,t){return Kt(e.getFullYear()%100,t,2)}function snt(e,t){return e=QB(e),Kt(e.getFullYear()%100,t,2)}function ont(e,t){return Kt(e.getFullYear()%1e4,t,4)}function ant(e,t){var n=e.getDay();return e=n>=4||n===0?Tc(e):Tc.ceil(e),Kt(e.getFullYear()%1e4,t,4)}function lnt(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Kt(t/60|0,"0",2)+Kt(t%60,"0",2)}function c$(e,t){return Kt(e.getUTCDate(),t,2)}function cnt(e,t){return Kt(e.getUTCHours(),t,2)}function unt(e,t){return Kt(e.getUTCHours()%12||12,t,2)}function fnt(e,t){return Kt(1+lv.count(Hi(e),e),t,3)}function KB(e,t){return Kt(e.getUTCMilliseconds(),t,3)}function dnt(e,t){return KB(e,t)+"000"}function hnt(e,t){return Kt(e.getUTCMonth()+1,t,2)}function pnt(e,t){return Kt(e.getUTCMinutes(),t,2)}function ynt(e,t){return Kt(e.getUTCSeconds(),t,2)}function mnt(e){var t=e.getUTCDay();return t===0?7:t}function gnt(e,t){return Kt(Of.count(Hi(e)-1,e),t,2)}function ZB(e){var t=e.getUTCDay();return t>=4||t===0?Ec(e):Ec.ceil(e)}function bnt(e,t){return e=ZB(e),Kt(Ec.count(Hi(e),e)+(Hi(e).getUTCDay()===4),t,2)}function vnt(e){return e.getUTCDay()}function wnt(e,t){return Kt(vp.count(Hi(e)-1,e),t,2)}function _nt(e,t){return Kt(e.getUTCFullYear()%100,t,2)}function Snt(e,t){return e=ZB(e),Kt(e.getUTCFullYear()%100,t,2)}function xnt(e,t){return Kt(e.getUTCFullYear()%1e4,t,4)}function Int(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Ec(e):Ec.ceil(e),Kt(e.getUTCFullYear()%1e4,t,4)}function Tnt(){return"+0000"}function u$(){return"%"}function f$(e){return+e}function d$(e){return Math.floor(+e/1e3)}var Wc,$3,py;Ent({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Ent(e){return Wc=Eet(e),$3=Wc.format,Wc.parse,py=Wc.utcFormat,Wc.utcParse,Wc}function Ant(e){return new Date(e)}function Mnt(e){return e instanceof Date?+e:+new Date(+e)}function N3(e,t,n,r,i,s,o,a,l,c){var u=MB(),f=u.invert,d=u.domain,h=c(".%L"),p=c(":%S"),g=c("%I:%M"),v=c("%I %p"),y=c("%a %d"),m=c("%b %d"),b=c("%B"),w=c("%Y");function S(_){return(l(_)<_?h:a(_)<_?p:o(_)<_?g:s(_)<_?v:r(_)<_?i(_)<_?y:m:n(_)<_?b:w)(_)}return u.invert=function(_){return new Date(f(_))},u.domain=function(_){return arguments.length?d(Array.from(_,Mnt)):d().map(Ant)},u.ticks=function(_){var x=d();return e(x[0],x[x.length-1],_??10)},u.tickFormat=function(_,x){return x==null?S:c(x)},u.nice=function(_){var x=d();return(!_||typeof _.range!="function")&&(_=t(x[0],x[x.length-1],_??10)),_?d(NB(x,_)):u},u.copy=function(){return ly(u,N3(e,t,n,r,i,s,o,a,l,c))},u}function $nt(){return Ys.apply(N3(Iet,Tet,Wi,dy,Df,Dc,av,ov,Es,$3).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Nnt(){return Ys.apply(N3(xet,GB,Hi,hy,Of,lv,fy,uy,Es,py).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function uv(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function fv(){var e=0,t=.5,n=1,r=1,i,s,o,a,l,c=ci,u,f=!1,d;function h(g){return isNaN(g=+g)?d:(g=.5+((g=+u(g))-s)*(r*g<r*s?a:l),c(f?Math.max(0,Math.min(1,g)):g))}h.domain=function(g){return arguments.length?([e,t,n]=g,i=u(e=+e),s=u(t=+t),o=u(n=+n),a=i===s?0:.5/(s-i),l=s===o?0:.5/(o-s),r=s<i?-1:1,h):[e,t,n]},h.clamp=function(g){return arguments.length?(f=!!g,h):f},h.interpolator=function(g){return arguments.length?(c=g,h):c};function p(g){return function(v){var y,m,b;return arguments.length?([y,m,b]=v,c=Kb(g,[y,m,b]),h):[c(0),c(.5),c(1)]}}return h.range=p(id),h.rangeRound=p(p3),h.unknown=function(g){return arguments.length?(d=g,h):d},function(g){return u=g,i=g(e),s=g(t),o=g(n),a=i===s?0:.5/(s-i),l=s===o?0:.5/(o-s),r=s<i?-1:1,h}}function JB(){var e=cy(fv()(ci));return e.copy=function(){return uv(e,JB())},nv.apply(e,arguments)}function tR(){var e=kB(fv()).domain([.1,1,10]);return e.copy=function(){return uv(e,tR()).base(e.base())},nv.apply(e,arguments)}function eR(){var e=OB(fv());return e.copy=function(){return uv(e,eR()).constant(e.constant())},nv.apply(e,arguments)}function nR(){var e=BB(fv());return e.copy=function(){return uv(e,nR()).exponent(e.exponent())},nv.apply(e,arguments)}function Dt(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const knt=Dt("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Dnt=Dt("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),Ont=Dt("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),Fnt=Dt("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),Bnt=Dt("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),Rnt=Dt("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),Lnt=Dt("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),Cnt=Dt("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),Unt=Dt("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),Pnt=Dt("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),be=e=>zQ(e[e.length-1]);var rR=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(Dt);const iR=be(rR);var sR=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(Dt);const oR=be(sR);var aR=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(Dt);const lR=be(aR);var cR=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(Dt);const uR=be(cR);var zS=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(Dt);const h1=be(zS);var fR=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(Dt);const dR=be(fR);var jS=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(Dt);const p1=be(jS);var hR=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(Dt);const pR=be(hR);var yR=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(Dt);const mR=be(yR);var gR=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(Dt);const bR=be(gR);var vR=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(Dt);const wR=be(vR);var _R=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(Dt);const SR=be(_R);var xR=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(Dt);const IR=be(xR);var TR=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(Dt);const ER=be(TR);var AR=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(Dt);const MR=be(AR);var $R=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(Dt);const NR=be($R);var kR=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(Dt);const DR=be(kR);var OR=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(Dt);const FR=be(OR);var BR=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(Dt);const RR=be(BR);var LR=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(Dt);const CR=be(LR);var UR=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(Dt);const PR=be(UR);var zR=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(Dt);const jR=be(zR);var VR=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(Dt);const YR=be(VR);var qR=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(Dt);const WR=be(qR);var HR=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(Dt);const GR=be(HR);var XR=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(Dt);const QR=be(XR);var KR=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(Dt);const ZR=be(KR);function JR(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-e*(35.34-e*(2381.73-e*(6402.7-e*(7024.72-e*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+e*(170.73+e*(52.82-e*(131.46-e*(176.58-e*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+e*(442.36-e*(2482.43-e*(6167.24-e*(6614.94-e*2475.67)))))))+")"}const tL=y3(Us(300,.5,0),Us(-240,.5,1));var eL=y3(Us(-100,.75,.35),Us(80,1.5,.8)),nL=y3(Us(260,.75,.35),Us(80,1.5,.8)),x0=Us();function rL(e){(e<0||e>1)&&(e-=Math.floor(e));var t=Math.abs(e-.5);return x0.h=360*e-100,x0.s=1.5-1.5*t,x0.l=.8-.9*t,x0+""}var I0=bi(),znt=Math.PI/3,jnt=Math.PI*2/3;function iL(e){var t;return e=(.5-e)*Math.PI,I0.r=255*(t=Math.sin(e))*t,I0.g=255*(t=Math.sin(e+znt))*t,I0.b=255*(t=Math.sin(e+jnt))*t,I0+""}function sL(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+e*(1172.33-e*(10793.56-e*(33300.12-e*(38394.49-e*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+e*(557.33+e*(1225.33-e*(3574.96-e*(1073.77+e*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+e*(3211.1-e*(15327.97-e*(27814-e*(22569.18-e*6838.66)))))))+")"}function dv(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}const oL=dv(Dt("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var aL=dv(Dt("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),lL=dv(Dt("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),cL=dv(Dt("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function pn(e){return function(){return e}}const uL=Math.cos,k3=Math.min,y1=Math.sin,fn=Math.sqrt,h$=1e-12,m1=Math.PI,hv=2*m1;function fL(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new CF(t)}function dL(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function hL(e){this._context=e}hL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function yy(e){return new hL(e)}function pL(e){return e[0]}function yL(e){return e[1]}function mL(e,t){var n=pn(!0),r=null,i=yy,s=null,o=fL(a);e=typeof e=="function"?e:e===void 0?pL:pn(e),t=typeof t=="function"?t:t===void 0?yL:pn(t);function a(l){var c,u=(l=dL(l)).length,f,d=!1,h;for(r==null&&(s=i(h=o())),c=0;c<=u;++c)!(c<u&&n(f=l[c],c,l))===d&&((d=!d)?s.lineStart():s.lineEnd()),d&&s.point(+e(f,c,l),+t(f,c,l));if(h)return s=null,h+""||null}return a.x=function(l){return arguments.length?(e=typeof l=="function"?l:pn(+l),a):e},a.y=function(l){return arguments.length?(t=typeof l=="function"?l:pn(+l),a):t},a.defined=function(l){return arguments.length?(n=typeof l=="function"?l:pn(!!l),a):n},a.curve=function(l){return arguments.length?(i=l,r!=null&&(s=i(r)),a):i},a.context=function(l){return arguments.length?(l==null?r=s=null:s=i(r=l),a):r},a}function D3(e,t,n){var r=null,i=pn(!0),s=null,o=yy,a=null,l=fL(c);e=typeof e=="function"?e:e===void 0?pL:pn(+e),t=typeof t=="function"?t:pn(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?yL:pn(+n);function c(f){var d,h,p,g=(f=dL(f)).length,v,y=!1,m,b=new Array(g),w=new Array(g);for(s==null&&(a=o(m=l())),d=0;d<=g;++d){if(!(d<g&&i(v=f[d],d,f))===y)if(y=!y)h=d,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),p=d-1;p>=h;--p)a.point(b[p],w[p]);a.lineEnd(),a.areaEnd()}y&&(b[d]=+e(v,d,f),w[d]=+t(v,d,f),a.point(r?+r(v,d,f):b[d],n?+n(v,d,f):w[d]))}if(m)return a=null,m+""||null}function u(){return mL().defined(i).curve(o).context(s)}return c.x=function(f){return arguments.length?(e=typeof f=="function"?f:pn(+f),r=null,c):e},c.x0=function(f){return arguments.length?(e=typeof f=="function"?f:pn(+f),c):e},c.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:pn(+f),c):r},c.y=function(f){return arguments.length?(t=typeof f=="function"?f:pn(+f),n=null,c):t},c.y0=function(f){return arguments.length?(t=typeof f=="function"?f:pn(+f),c):t},c.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:pn(+f),c):n},c.lineX0=c.lineY0=function(){return u().x(e).y(t)},c.lineY1=function(){return u().x(e).y(n)},c.lineX1=function(){return u().x(r).y(t)},c.defined=function(f){return arguments.length?(i=typeof f=="function"?f:pn(!!f),c):i},c.curve=function(f){return arguments.length?(o=f,s!=null&&(a=o(s)),c):o},c.context=function(f){return arguments.length?(f==null?s=a=null:a=o(s=f),c):s},c}class gL{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function Vnt(e){return new gL(e,!0)}function Ynt(e){return new gL(e,!1)}const qnt=fn(3),bL={draw(e,t){const n=fn(t+k3(t/28,.75))*.59436,r=n/2,i=r*qnt;e.moveTo(0,n),e.lineTo(0,-n),e.moveTo(-i,-r),e.lineTo(i,r),e.moveTo(-i,r),e.lineTo(i,-r)}},wp={draw(e,t){const n=fn(t/m1);e.moveTo(n,0),e.arc(0,0,n,0,hv)}},vL={draw(e,t){const n=fn(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},wL=fn(1/3),Wnt=wL*2,_L={draw(e,t){const n=fn(t/Wnt),r=n*wL;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},SL={draw(e,t){const n=fn(t)*.62625;e.moveTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.lineTo(-n,0),e.closePath()}},xL={draw(e,t){const n=fn(t-k3(t/7,2))*.87559;e.moveTo(-n,0),e.lineTo(n,0),e.moveTo(0,n),e.lineTo(0,-n)}},IL={draw(e,t){const n=fn(t),r=-n/2;e.rect(r,r,n,n)}},TL={draw(e,t){const n=fn(t)*.4431;e.moveTo(n,n),e.lineTo(n,-n),e.lineTo(-n,-n),e.lineTo(-n,n),e.closePath()}},Hnt=.8908130915292852,EL=y1(m1/10)/y1(7*m1/10),Gnt=y1(hv/10)*EL,Xnt=-uL(hv/10)*EL,AL={draw(e,t){const n=fn(t*Hnt),r=Gnt*n,i=Xnt*n;e.moveTo(0,-n),e.lineTo(r,i);for(let s=1;s<5;++s){const o=hv*s/5,a=uL(o),l=y1(o);e.lineTo(l*n,-a*n),e.lineTo(a*r-l*i,l*r+a*i)}e.closePath()}},a_=fn(3),ML={draw(e,t){const n=-fn(t/(a_*3));e.moveTo(0,n*2),e.lineTo(-a_*n,-n),e.lineTo(a_*n,-n),e.closePath()}},Qnt=fn(3),$L={draw(e,t){const n=fn(t)*.6824,r=n/2,i=n*Qnt/2;e.moveTo(0,-n),e.lineTo(i,r),e.lineTo(-i,r),e.closePath()}},Hr=-.5,Gr=fn(3)/2,VS=1/fn(12),Knt=(VS/2+1)*3,NL={draw(e,t){const n=fn(t/Knt),r=n/2,i=n*VS,s=r,o=n*VS+n,a=-s,l=o;e.moveTo(r,i),e.lineTo(s,o),e.lineTo(a,l),e.lineTo(Hr*r-Gr*i,Gr*r+Hr*i),e.lineTo(Hr*s-Gr*o,Gr*s+Hr*o),e.lineTo(Hr*a-Gr*l,Gr*a+Hr*l),e.lineTo(Hr*r+Gr*i,Hr*i-Gr*r),e.lineTo(Hr*s+Gr*o,Hr*o-Gr*s),e.lineTo(Hr*a+Gr*l,Hr*l-Gr*a),e.closePath()}},kL={draw(e,t){const n=fn(t-k3(t/6,1.7))*.6189;e.moveTo(-n,-n),e.lineTo(n,n),e.moveTo(-n,n),e.lineTo(n,-n)}},Znt=[wp,vL,_L,IL,AL,ML,NL],Jnt=[wp,xL,kL,$L,bL,TL,SL];function ja(){}function g1(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function pv(e){this._context=e}pv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:g1(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:g1(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function trt(e){return new pv(e)}function DL(e){this._context=e}DL.prototype={areaStart:ja,areaEnd:ja,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:g1(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function ert(e){return new DL(e)}function OL(e){this._context=e}OL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:g1(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function nrt(e){return new OL(e)}function FL(e,t){this._basis=new pv(e),this._beta=t}FL.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],s=e[n]-r,o=t[n]-i,a=-1,l;++a<=n;)l=a/n,this._basis.point(this._beta*e[a]+(1-this._beta)*(r+l*s),this._beta*t[a]+(1-this._beta)*(i+l*o));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const rrt=function e(t){function n(r){return t===1?new pv(r):new FL(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function b1(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function O3(e,t){this._context=e,this._k=(1-t)/6}O3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:b1(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:b1(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const irt=function e(t){function n(r){return new O3(r,t)}return n.tension=function(r){return e(+r)},n}(0);function F3(e,t){this._context=e,this._k=(1-t)/6}F3.prototype={areaStart:ja,areaEnd:ja,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:b1(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const srt=function e(t){function n(r){return new F3(r,t)}return n.tension=function(r){return e(+r)},n}(0);function B3(e,t){this._context=e,this._k=(1-t)/6}B3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:b1(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const ort=function e(t){function n(r){return new B3(r,t)}return n.tension=function(r){return e(+r)},n}(0);function R3(e,t,n){var r=e._x1,i=e._y1,s=e._x2,o=e._y2;if(e._l01_a>h$){var a=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,l=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*a-e._x0*e._l12_2a+e._x2*e._l01_2a)/l,i=(i*a-e._y0*e._l12_2a+e._y2*e._l01_2a)/l}if(e._l23_a>h$){var c=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,u=3*e._l23_a*(e._l23_a+e._l12_a);s=(s*c+e._x1*e._l23_2a-t*e._l12_2a)/u,o=(o*c+e._y1*e._l23_2a-n*e._l12_2a)/u}e._context.bezierCurveTo(r,i,s,o,e._x2,e._y2)}function BL(e,t){this._context=e,this._alpha=t}BL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:R3(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const art=function e(t){function n(r){return t?new BL(r,t):new O3(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function RL(e,t){this._context=e,this._alpha=t}RL.prototype={areaStart:ja,areaEnd:ja,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:R3(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const lrt=function e(t){function n(r){return t?new RL(r,t):new F3(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function LL(e,t){this._context=e,this._alpha=t}LL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:R3(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const crt=function e(t){function n(r){return t?new LL(r,t):new B3(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function CL(e){this._context=e}CL.prototype={areaStart:ja,areaEnd:ja,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function urt(e){return new CL(e)}function p$(e){return e<0?-1:1}function y$(e,t,n){var r=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(r||i<0&&-0),o=(n-e._y1)/(i||r<0&&-0),a=(s*i+o*r)/(r+i);return(p$(s)+p$(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function m$(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function l_(e,t,n){var r=e._x0,i=e._y0,s=e._x1,o=e._y1,a=(s-r)/3;e._context.bezierCurveTo(r+a,i+a*t,s-a,o-a*n,s,o)}function v1(e){this._context=e}v1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:l_(this,this._t0,m$(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,l_(this,m$(this,n=y$(this,e,t)),n);break;default:l_(this,this._t0,n=y$(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function UL(e){this._context=new PL(e)}(UL.prototype=Object.create(v1.prototype)).point=function(e,t){v1.prototype.point.call(this,t,e)};function PL(e){this._context=e}PL.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,s){this._context.bezierCurveTo(t,e,r,n,s,i)}};function frt(e){return new v1(e)}function drt(e){return new UL(e)}function zL(e){this._context=e}zL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=g$(e),i=g$(t),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function g$(e){var t,n=e.length-1,r,i=new Array(n),s=new Array(n),o=new Array(n);for(i[0]=0,s[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,s[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,s[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/s[t-1],s[t]-=r,o[t]-=r*o[t-1];for(i[n-1]=o[n-1]/s[n-1],t=n-2;t>=0;--t)i[t]=(o[t]-i[t+1])/s[t];for(s[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function hrt(e){return new zL(e)}function yv(e,t){this._context=e,this._t=t}yv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function prt(e){return new yv(e,.5)}function yrt(e){return new yv(e,0)}function mrt(e){return new yv(e,1)}const T0=e=>()=>e;function grt(e,{sourceEvent:t,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function As(e,t,n){this.k=e,this.x=t,this.y=n}As.prototype={constructor:As,scale:function(e){return e===1?this:new As(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new As(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var jL=new As(1,0,0);As.prototype;function c_(e){e.stopImmediatePropagation()}function Cd(e){e.preventDefault(),e.stopImmediatePropagation()}function brt(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function vrt(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function b$(){return this.__zoom||jL}function wrt(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function _rt(){return navigator.maxTouchPoints||"ontouchstart"in this}function Srt(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],s=e.invertY(t[0][1])-n[0][1],o=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),o>s?(s+o)/2:Math.min(0,s)||Math.max(0,o))}function xrt(){var e=brt,t=vrt,n=Srt,r=wrt,i=_rt,s=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],a=250,l=nK,c=Wb("start","zoom","end"),u,f,d,h=500,p=150,g=0,v=10;function y(T){T.property("__zoom",b$).on("wheel.zoom",E,{passive:!1}).on("mousedown.zoom",N).on("dblclick.zoom",I).filter(i).on("touchstart.zoom",A).on("touchmove.zoom",D).on("touchend.zoom touchcancel.zoom",R).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}y.transform=function(T,M,$,B){var O=T.selection?T.selection():T;O.property("__zoom",b$),T!==O?S(T,M,$,B):O.interrupt().each(function(){_(this,arguments).event(B).start().zoom(null,typeof M=="function"?M.apply(this,arguments):M).end()})},y.scaleBy=function(T,M,$,B){y.scaleTo(T,function(){var O=this.__zoom.k,C=typeof M=="function"?M.apply(this,arguments):M;return O*C},$,B)},y.scaleTo=function(T,M,$,B){y.transform(T,function(){var O=t.apply(this,arguments),C=this.__zoom,F=$==null?w(O):typeof $=="function"?$.apply(this,arguments):$,P=C.invert(F),z=typeof M=="function"?M.apply(this,arguments):M;return n(b(m(C,z),F,P),O,o)},$,B)},y.translateBy=function(T,M,$,B){y.transform(T,function(){return n(this.__zoom.translate(typeof M=="function"?M.apply(this,arguments):M,typeof $=="function"?$.apply(this,arguments):$),t.apply(this,arguments),o)},null,B)},y.translateTo=function(T,M,$,B,O){y.transform(T,function(){var C=t.apply(this,arguments),F=this.__zoom,P=B==null?w(C):typeof B=="function"?B.apply(this,arguments):B;return n(jL.translate(P[0],P[1]).scale(F.k).translate(typeof M=="function"?-M.apply(this,arguments):-M,typeof $=="function"?-$.apply(this,arguments):-$),C,o)},B,O)};function m(T,M){return M=Math.max(s[0],Math.min(s[1],M)),M===T.k?T:new As(M,T.x,T.y)}function b(T,M,$){var B=M[0]-$[0]*T.k,O=M[1]-$[1]*T.k;return B===T.x&&O===T.y?T:new As(T.k,B,O)}function w(T){return[(+T[0][0]+ +T[1][0])/2,(+T[0][1]+ +T[1][1])/2]}function S(T,M,$,B){T.on("start.zoom",function(){_(this,arguments).event(B).start()}).on("interrupt.zoom end.zoom",function(){_(this,arguments).event(B).end()}).tween("zoom",function(){var O=this,C=arguments,F=_(O,C).event(B),P=t.apply(O,C),z=$==null?w(P):typeof $=="function"?$.apply(O,C):$,H=Math.max(P[1][0]-P[0][0],P[1][1]-P[0][1]),X=O.__zoom,tt=typeof M=="function"?M.apply(O,C):M,Z=l(X.invert(z).concat(H/X.k),tt.invert(z).concat(H/tt.k));return function(Y){if(Y===1)Y=tt;else{var Q=Z(Y),V=H/Q[2];Y=new As(V,z[0]-Q[0]*V,z[1]-Q[1]*V)}F.zoom(null,Y)}})}function _(T,M,$){return!$&&T.__zooming||new x(T,M)}function x(T,M){this.that=T,this.args=M,this.active=0,this.sourceEvent=null,this.extent=t.apply(T,M),this.taps=0}x.prototype={event:function(T){return T&&(this.sourceEvent=T),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(T,M){return this.mouse&&T!=="mouse"&&(this.mouse[1]=M.invert(this.mouse[0])),this.touch0&&T!=="touch"&&(this.touch0[1]=M.invert(this.touch0[0])),this.touch1&&T!=="touch"&&(this.touch1[1]=M.invert(this.touch1[0])),this.that.__zoom=M,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(T){var M=me(this.that).datum();c.call(T,this.that,new grt(T,{sourceEvent:this.sourceEvent,target:y,type:T,transform:this.that.__zoom,dispatch:c}),M)}};function E(T,...M){if(!e.apply(this,arguments))return;var $=_(this,M).event(T),B=this.__zoom,O=Math.max(s[0],Math.min(s[1],B.k*Math.pow(2,r.apply(this,arguments)))),C=$i(T);if($.wheel)($.mouse[0][0]!==C[0]||$.mouse[0][1]!==C[1])&&($.mouse[1]=B.invert($.mouse[0]=C)),clearTimeout($.wheel);else{if(B.k===O)return;$.mouse=[C,B.invert(C)],Ku(this),$.start()}Cd(T),$.wheel=setTimeout(F,p),$.zoom("mouse",n(b(m(B,O),$.mouse[0],$.mouse[1]),$.extent,o));function F(){$.wheel=null,$.end()}}function N(T,...M){if(d||!e.apply(this,arguments))return;var $=T.currentTarget,B=_(this,M,!0).event(T),O=me(T.view).on("mousemove.zoom",z,!0).on("mouseup.zoom",H,!0),C=$i(T,$),F=T.clientX,P=T.clientY;dF(T.view),c_(T),B.mouse=[C,this.__zoom.invert(C)],Ku(this),B.start();function z(X){if(Cd(X),!B.moved){var tt=X.clientX-F,Z=X.clientY-P;B.moved=tt*tt+Z*Z>g}B.event(X).zoom("mouse",n(b(B.that.__zoom,B.mouse[0]=$i(X,$),B.mouse[1]),B.extent,o))}function H(X){O.on("mousemove.zoom mouseup.zoom",null),hF(X.view,B.moved),Cd(X),B.event(X).end()}}function I(T,...M){if(e.apply(this,arguments)){var $=this.__zoom,B=$i(T.changedTouches?T.changedTouches[0]:T,this),O=$.invert(B),C=$.k*(T.shiftKey?.5:2),F=n(b(m($,C),B,O),t.apply(this,M),o);Cd(T),a>0?me(this).transition().duration(a).call(S,F,B,T):me(this).call(y.transform,F,B,T)}}function A(T,...M){if(e.apply(this,arguments)){var $=T.touches,B=$.length,O=_(this,M,T.changedTouches.length===B).event(T),C,F,P,z;for(c_(T),F=0;F<B;++F)P=$[F],z=$i(P,this),z=[z,this.__zoom.invert(z),P.identifier],O.touch0?!O.touch1&&O.touch0[2]!==z[2]&&(O.touch1=z,O.taps=0):(O.touch0=z,C=!0,O.taps=1+!!u);u&&(u=clearTimeout(u)),C&&(O.taps<2&&(f=z[0],u=setTimeout(function(){u=null},h)),Ku(this),O.start())}}function D(T,...M){if(this.__zooming){var $=_(this,M).event(T),B=T.changedTouches,O=B.length,C,F,P,z;for(Cd(T),C=0;C<O;++C)F=B[C],P=$i(F,this),$.touch0&&$.touch0[2]===F.identifier?$.touch0[0]=P:$.touch1&&$.touch1[2]===F.identifier&&($.touch1[0]=P);if(F=$.that.__zoom,$.touch1){var H=$.touch0[0],X=$.touch0[1],tt=$.touch1[0],Z=$.touch1[1],Y=(Y=tt[0]-H[0])*Y+(Y=tt[1]-H[1])*Y,Q=(Q=Z[0]-X[0])*Q+(Q=Z[1]-X[1])*Q;F=m(F,Math.sqrt(Y/Q)),P=[(H[0]+tt[0])/2,(H[1]+tt[1])/2],z=[(X[0]+Z[0])/2,(X[1]+Z[1])/2]}else if($.touch0)P=$.touch0[0],z=$.touch0[1];else return;$.zoom("touch",n(b(F,P,z),$.extent,o))}}function R(T,...M){if(this.__zooming){var $=_(this,M).event(T),B=T.changedTouches,O=B.length,C,F;for(c_(T),d&&clearTimeout(d),d=setTimeout(function(){d=null},h),C=0;C<O;++C)F=B[C],$.touch0&&$.touch0[2]===F.identifier?delete $.touch0:$.touch1&&$.touch1[2]===F.identifier&&delete $.touch1;if($.touch1&&!$.touch0&&($.touch0=$.touch1,delete $.touch1),$.touch0)$.touch0[1]=this.__zoom.invert($.touch0[0]);else if($.end(),$.taps===2&&(F=$i(F,this),Math.hypot(f[0]-F[0],f[1]-F[1])<v)){var P=me(this).on("dblclick.zoom");P&&P.apply(this,arguments)}}}return y.wheelDelta=function(T){return arguments.length?(r=typeof T=="function"?T:T0(+T),y):r},y.filter=function(T){return arguments.length?(e=typeof T=="function"?T:T0(!!T),y):e},y.touchable=function(T){return arguments.length?(i=typeof T=="function"?T:T0(!!T),y):i},y.extent=function(T){return arguments.length?(t=typeof T=="function"?T:T0([[+T[0][0],+T[0][1]],[+T[1][0],+T[1][1]]]),y):t},y.scaleExtent=function(T){return arguments.length?(s[0]=+T[0],s[1]=+T[1],y):[s[0],s[1]]},y.translateExtent=function(T){return arguments.length?(o[0][0]=+T[0][0],o[1][0]=+T[1][0],o[0][1]=+T[0][1],o[1][1]=+T[1][1],y):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},y.constrain=function(T){return arguments.length?(n=T,y):n},y.duration=function(T){return arguments.length?(a=+T,y):a},y.interpolate=function(T){return arguments.length?(l=T,y):l},y.on=function(){var T=c.on.apply(c,arguments);return T===c?y:T},y.clickDistance=function(T){return arguments.length?(g=(T=+T)*T,y):Math.sqrt(g)},y.tapDistance=function(T){return arguments.length?(v=+T,y):v},y}function Qn(e){return e!=null&&!Number.isNaN(e)}function vi(e,t){return+Qn(t)-+Qn(e)||ze(e,t)}function w1(e,t){return+Qn(t)-+Qn(e)||bc(e,t)}function L3(e){return e!=null&&`${e}`!=""}function _1(e){return isFinite(e)?e:NaN}function Mo(e){return e>0&&isFinite(e)?e:NaN}function mv(e){return e<0&&isFinite(e)?e:NaN}const ku=1e3,jl=ku*60,Vl=jl*60,Uo=Vl*24,us=Uo*7,ic=Uo*30,ra=Uo*365,u_=[["millisecond",1],["2 milliseconds",2],["5 milliseconds",5],["10 milliseconds",10],["20 milliseconds",20],["50 milliseconds",50],["100 milliseconds",100],["200 milliseconds",200],["500 milliseconds",500],["second",ku],["5 seconds",5*ku],["15 seconds",15*ku],["30 seconds",30*ku],["minute",jl],["5 minutes",5*jl],["15 minutes",15*jl],["30 minutes",30*jl],["hour",Vl],["3 hours",3*Vl],["6 hours",6*Vl],["12 hours",12*Vl],["day",Uo],["2 days",2*Uo],["week",us],["2 weeks",2*us],["month",ic],["3 months",3*ic],["6 months",6*ic],["year",ra],["2 years",2*ra],["5 years",5*ra],["10 years",10*ra],["20 years",20*ra],["50 years",50*ra],["100 years",100*ra]],C3=new Map([["second",ku],["minute",jl],["hour",Vl],["day",Uo],["monday",us],["tuesday",us],["wednesday",us],["thursday",us],["friday",us],["saturday",us],["sunday",us],["week",us],["month",ic],["year",ra]]),VL=new Map([["second",Es],["minute",ov],["hour",av],["day",Dc],["monday",bp],["tuesday",UB],["wednesday",PB],["thursday",Tc],["friday",zB],["saturday",jB],["sunday",Df],["week",Df],["month",dy],["year",Wi]]),YL=new Map([["second",Es],["minute",uy],["hour",fy],["day",cv],["monday",vp],["tuesday",VB],["wednesday",YB],["thursday",Ec],["friday",qB],["saturday",WB],["sunday",Of],["week",Of],["month",hy],["year",Hi]]),my=Symbol("intervalDuration"),gv=Symbol("intervalType");for(const[e,t]of VL)t[my]=C3.get(e),t[gv]="time";for(const[e,t]of YL)t[my]=C3.get(e),t[gv]="utc";const Irt=[["year",Hi,"utc"],["year",Wi,"time"],["month",hy,"utc"],["month",dy,"time"],["day",cv,"utc",6*ic],["day",Dc,"time",6*ic],["hour",fy,"utc",3*Uo],["minute",uy,"utc",6*Vl],["second",Es,"utc",30*jl]];function qL(e,t,n){let r=`${e}`.toLowerCase();r.endsWith("s")&&(r=r.slice(0,-1));let i=1;const s=/^(?:(\d+)\s+)/.exec(r);switch(s&&(r=r.slice(s[0].length),i=+s[1]),r){case"quarter":r="month",i*=3;break;case"half":r="month",i*=6;break}let o=t.get(r);if(!o)throw new Error(`unknown interval: ${e}`);if(i>1){if(!o.every)throw new Error(`non-periodic interval: ${r}`);o=o.every(i),o[my]=C3.get(r)*i,o[gv]=n}return o}function WL(e){return qL(e,VL,"time")}function U3(e){return qL(e,YL,"utc")}function v$(e,t){if(!(t>1))return;const n=e[my];if(!u_.some(([,i])=>i===n)||n%Uo===0&&Uo<n&&n<ic)return;const[r]=u_[jb(([,i])=>Math.log(i)).center(u_,Math.log(n*t))];return(e[gv]==="time"?WL:U3)(r)}function w$(e,t,n){const r=t==="time"?$3:py;if(n==null)return r(e==="year"?"%Y":e==="month"?"%Y-%m":e==="day"?"%Y-%m-%d":e==="hour"||e==="minute"?"%Y-%m-%dT%H:%M":e==="second"?"%Y-%m-%dT%H:%M:%S":"%Y-%m-%dT%H:%M:%S.%L");const i=Trt(n);switch(e){case"millisecond":return Hc(r(".%L"),r(":%M:%S"),i);case"second":return Hc(r(":%S"),r("%-I:%M"),i);case"minute":return Hc(r("%-I:%M"),r("%p"),i);case"hour":return Hc(r("%-I %p"),r("%b %-d"),i);case"day":return Hc(r("%-d"),r("%b"),i);case"month":return Hc(r("%b"),r("%Y"),i);case"year":return r("%Y")}throw new Error("unable to format time ticks")}function Trt(e){return e==="left"||e==="right"?(t,n)=>`
${t}
${n}`:e==="top"?(t,n)=>`${n}
${t}`:(t,n)=>`${t}
${n}`}function Ert(e,t){const n=Ne(NG(e,(r,i)=>Math.abs(i-r)));if(n<1e3)return w$("millisecond","utc",t);for(const[r,i,s,o]of Irt){if(n>o||r==="hour"&&!n)break;if(e.every(a=>i.floor(a)>=a))return w$(r,s,t)}}function Hc(e,t,n){return(r,i,s)=>{const o=e(r,i),a=t(r,i),l=i-Rf(s);return i!==l&&s[l]!==void 0&&a===t(s[l],l)?o:n(o,a)}}const Ff=Object.getPrototypeOf(Uint8Array),Art=Object.prototype.toString,HL=Symbol("reindex");function Pt(e,t,n){const r=typeof t;return r==="string"?_$(e,GL(t),n):r==="function"?_$(e,t,n):r==="number"||t instanceof Date||r==="boolean"?Se(e,Pr(t),n):typeof(t==null?void 0:t.transform)=="function"?S$(t.transform(e),n):Mrt(S$(t,n),e==null?void 0:e[HL])}function Mrt(e,t){return t?vv(e,t):e}function _$(e,t,n){return Se(e,(n==null?void 0:n.prototype)instanceof Ff?$rt(t):t,n)}function S$(e,t){return t===void 0?_r(e):e instanceof t?e:t.prototype instanceof Ff&&!(e instanceof Ff)?t.from(e,j3):t.from(e)}function $rt(e){return(t,n)=>j3(e(t,n))}const kh=[null],GL=e=>t=>t[e],Er={transform:qo},gt={transform:e=>e},P3=()=>1,Nrt=()=>!0,Rn=e=>e==null?e:`${e}`,Vt=e=>e==null?e:+e,gy=e=>e?e[0]:void 0,_p=e=>e?e[1]:void 0,krt=e=>e?e[2]:void 0,Pr=e=>()=>e;function z3(e){const t=+`${e}`.slice(1)/100;return(n,r)=>Pa(n,t,r)}function cr(e){return e instanceof Ff?e:Se(e,j3,Float64Array)}function j3(e){return e==null?NaN:Number(e)}function Drt(e){return Se(e,XL)}function XL(e){return e instanceof Date&&!isNaN(e)?e:typeof e=="string"?LO(e):e==null||isNaN(e=+e)?void 0:new Date(e)}function wr(e,t){return e===void 0&&(e=t),e===null?[void 0,"none"]:vy(e)?[void 0,e]:[e,void 0]}function Ze(e,t){return e===void 0&&(e=t),e===null||typeof e=="number"?[void 0,e]:[e,void 0]}function QL(e,t,n){if(e!=null)return qr(e,t,n)}function qr(e,t,n){const r=`${e}`.toLowerCase();if(!n.includes(r))throw new Error(`invalid ${t}: ${e}`);return r}function _r(e){return e==null||e instanceof Array||e instanceof Ff?e:Array.from(e)}function Se(e,t,n=Array){return e==null?e:e instanceof n?e.map(t):n.from(e,t)}function Sp(e,t=Array){return e instanceof t?e.slice():t.from(e)}function KL({x:e,x1:t,x2:n}){return e!==void 0||t!==void 0||n!==void 0}function ZL({y:e,y1:t,y2:n}){return e!==void 0||t!==void 0||n!==void 0}function bv(e){return KL(e)||ZL(e)||e.interval!==void 0}function Si(e){return(e==null?void 0:e.toString)===Art}function sc(e){return Si(e)&&(e.type!==void 0||e.domain!==void 0)}function hs(e){return Si(e)&&typeof e.transform!="function"}function Va(e){return hs(e)&&e.value===void 0&&e.channel===void 0}function JL(e,t,n,r=gt){return t===void 0&&n===void 0?(t=0,n=e===void 0?r:e):t===void 0?t=e===void 0?0:e:n===void 0&&(n=e===void 0?0:e),[t,n]}function Zi(e,t){return e===void 0&&t===void 0?[gy,_p]:[e,t]}function cl({z:e,fill:t,stroke:n}={}){return e===void 0&&([e]=wr(t)),e===void 0&&([e]=wr(n)),e}function qo(e){const t=e.length,n=new Uint32Array(t);for(let r=0;r<t;++r)n[r]=r;return n}function vv(e,t){return Se(t,n=>e[n],e.constructor)}function V3(e){return e.length===1?(t,n)=>e(vv(n,t)):e}function oc(e,t,n){return e.subarray?e.subarray(t,n):e.slice(t,n)}function Yl(e){return e!==null&&typeof e=="object"?e.valueOf():e}function tC(e,t){if(t[e]!==void 0)return t[e];switch(e){case"x1":case"x2":e="x";break;case"y1":case"y2":e="y";break}return t[e]}function Or(e){let t;return[{transform:()=>t,label:Wo(e)},n=>t=n]}function nr(e){return e==null?[e]:Or(e)}function Wo(e,t){return typeof e=="string"?e:e&&e.label!==void 0?e.label:t}function S1(e,t){return{transform(n){const r=e.transform(n),i=t.transform(n);return Zn(r)||Zn(i)?Se(r,(s,o)=>new Date((+r[o]+ +i[o])/2)):Se(r,(s,o)=>(+r[o]+ +i[o])/2,Float64Array)},label:e.label}}function x1(e,t){const n=eC(t==null?void 0:t.interval,t==null?void 0:t.type);return n?Se(e,n):e}function eC(e,t){const n=Y3(e,t);return n&&(r=>Qn(r)?n.floor(r):r)}function Y3(e,t){if(e!=null){if(typeof e=="number"){0<e&&e<1&&Number.isInteger(1/e)&&(e=-1/e);const n=Math.abs(e);return e<0?{floor:r=>Math.floor(r*n)/n,offset:r=>(r*n+1)/n,range:(r,i)=>kr(Math.ceil(r*n),i*n).map(s=>s/n)}:{floor:r=>Math.floor(r/n)*n,offset:r=>r+n,range:(r,i)=>kr(Math.ceil(r/n),i/n).map(s=>s*n)}}if(typeof e=="string")return(t==="time"?WL:U3)(e);if(typeof e.floor!="function")throw new Error("invalid interval; missing floor method");if(typeof e.offset!="function")throw new Error("invalid interval; missing offset method");return e}}function ad(e,t){if(e=Y3(e,t),e&&typeof e.range!="function")throw new Error("invalid interval: missing range method");return e}function Ort(e,t){if(e=ad(e,t),e&&typeof e.ceil!="function")throw new Error("invalid interval: missing ceil method");return e}function Frt(e){return Du(e)&&typeof(e==null?void 0:e.floor)=="function"&&e.floor()instanceof Date}function Du(e){return typeof(e==null?void 0:e.range)=="function"}function by(e){return e===void 0||hs(e)?e:{value:e}}function Brt(e){return e==null?null:{transform:t=>Pt(t,e,Float64Array),label:Wo(e)}}function Rrt(e){if(!Ho(e))return!1;for(const t of e)if(t!=null)return typeof t=="object"&&"0"in t&&"1"in t}function Ho(e){return e&&typeof e[Symbol.iterator]=="function"}function nC(e){for(const t of e)if(t!=null)return typeof t!="object"||t instanceof Date}function Ve(e){for(const t of e){if(t==null)continue;const n=typeof t;return n==="string"||n==="boolean"}}function Zn(e){for(const t of e)if(t!=null)return t instanceof Date}function Lrt(e){for(const t of e)if(t!=null)return typeof t=="string"&&isNaN(t)&&LO(t)}function Crt(e){for(const t of e)if(t!=null){if(typeof t!="string")return!1;if(t.trim())return!isNaN(t)}}function Ou(e){for(const t of e)if(t!=null)return typeof t=="number"}function f_(e,t){let n;for(const r of e)if(r!=null){if(!t(r))return!1;n=!0}return n}const Urt=new Set("none,currentcolor,transparent,aliceblue,antiquewhite,aqua,aquamarine,azure,beige,bisque,black,blanchedalmond,blue,blueviolet,brown,burlywood,cadetblue,chartreuse,chocolate,coral,cornflowerblue,cornsilk,crimson,cyan,darkblue,darkcyan,darkgoldenrod,darkgray,darkgreen,darkgrey,darkkhaki,darkmagenta,darkolivegreen,darkorange,darkorchid,darkred,darksalmon,darkseagreen,darkslateblue,darkslategray,darkslategrey,darkturquoise,darkviolet,deeppink,deepskyblue,dimgray,dimgrey,dodgerblue,firebrick,floralwhite,forestgreen,fuchsia,gainsboro,ghostwhite,gold,goldenrod,gray,green,greenyellow,grey,honeydew,hotpink,indianred,indigo,ivory,khaki,lavender,lavenderblush,lawngreen,lemonchiffon,lightblue,lightcoral,lightcyan,lightgoldenrodyellow,lightgray,lightgreen,lightgrey,lightpink,lightsalmon,lightseagreen,lightskyblue,lightslategray,lightslategrey,lightsteelblue,lightyellow,lime,limegreen,linen,magenta,maroon,mediumaquamarine,mediumblue,mediumorchid,mediumpurple,mediumseagreen,mediumslateblue,mediumspringgreen,mediumturquoise,mediumvioletred,midnightblue,mintcream,mistyrose,moccasin,navajowhite,navy,oldlace,olive,olivedrab,orange,orangered,orchid,palegoldenrod,palegreen,paleturquoise,palevioletred,papayawhip,peachpuff,peru,pink,plum,powderblue,purple,rebeccapurple,red,rosybrown,royalblue,saddlebrown,salmon,sandybrown,seagreen,seashell,sienna,silver,skyblue,slateblue,slategray,slategrey,snow,springgreen,steelblue,tan,teal,thistle,tomato,turquoise,violet,wheat,white,whitesmoke,yellow".split(","));function vy(e){return typeof e!="string"?!1:(e=e.toLowerCase().trim(),/^#[0-9a-f]{3,8}$/.test(e)||/^(?:url|var|rgb|rgba|hsl|hsla|hwb|lab|lch|oklab|oklch|color|color-mix)\(.*\)$/.test(e)||Urt.has(e))}function Prt(e){return typeof e=="number"&&(0<=e&&e<=1||isNaN(e))}function He(e){return e==null||Bf(e)}function Bf(e){return/^\s*none\s*$/i.test(e)}function zrt(e){return/^\s*round\s*$/i.test(e)}function rC(e,t){return QL(e,t,["middle","top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"])}function wy(e="middle"){return rC(e,"frameAnchor")}function Rf(e){if(e==null)return;const t=e[0],n=e[e.length-1];return bc(t,n)}function jrt(e={},...t){let n=e;for(const r of t)for(const i in r)if(n[i]===void 0){const s=r[i];n===e?n={...n,[i]:s}:n[i]=s}return n}function Vrt(e){console.warn("named iterables are deprecated; please use an object instead");const t=new Set;return Object.fromEntries(Array.from(e,n=>{const{name:r}=n;if(r==null)throw new Error("missing name");const i=`${r}`;if(i==="__proto__")throw new Error(`illegal name: ${i}`);if(t.has(i))throw new Error(`duplicate name: ${i}`);return t.add(i),[r,n]}))}function q3(e){return Ho(e)?Vrt(e):e}const Ms=Symbol("position"),Go=Symbol("color"),_y=Symbol("radius"),Sy=Symbol("length"),xy=Symbol("opacity"),wv=Symbol("symbol"),iC=Symbol("projection"),Ce=new Map([["x",Ms],["y",Ms],["fx",Ms],["fy",Ms],["r",_y],["color",Go],["opacity",xy],["symbol",wv],["length",Sy],["projection",iC]]);function Yrt(e){return e===Ms||e===iC}function qrt(e){return e===Ms||e===_y||e===Sy||e===xy}const sC=Math.sqrt(3),oC=2/sC,Wrt={draw(e,t){const n=Math.sqrt(t/Math.PI),r=n*oC,i=r/2;e.moveTo(0,r),e.lineTo(n,i),e.lineTo(n,-i),e.lineTo(0,-r),e.lineTo(-n,-i),e.lineTo(-n,i),e.closePath()}},W3=new Map([["asterisk",bL],["circle",wp],["cross",vL],["diamond",_L],["diamond2",SL],["hexagon",Wrt],["plus",xL],["square",IL],["square2",TL],["star",AL],["times",kL],["triangle",ML],["triangle2",$L],["wye",NL]]);function H3(e){return e&&typeof e.draw=="function"}function Hrt(e){return H3(e)?!0:typeof e!="string"?!1:W3.has(e.toLowerCase())}function G3(e){if(e==null||H3(e))return e;const t=W3.get(`${e}`.toLowerCase());if(t)return t;throw new Error(`invalid symbol: ${e}`)}function Grt(e){if(e==null||H3(e))return[void 0,e];if(typeof e=="string"){const t=W3.get(`${e}`.toLowerCase());if(t)return[void 0,t]}return[e,void 0]}function qs({filter:e,sort:t,reverse:n,transform:r,initializer:i,...s}={},o){if(r===void 0&&(e!=null&&(r=X3(e)),t!=null&&!Va(t)&&(r=d_(r,K3(t))),n&&(r=d_(r,Q3))),o!=null&&i!=null)throw new Error("transforms cannot be applied after initializers");return{...s,...(t===null||Va(t))&&{sort:t},transform:d_(r,o)}}function Sr({filter:e,sort:t,reverse:n,initializer:r,...i}={},s){return r===void 0&&(e!=null&&(r=X3(e)),t!=null&&!Va(t)&&(r=h_(r,K3(t))),n&&(r=h_(r,Q3))),{...i,...(t===null||Va(t))&&{sort:t},initializer:h_(r,s)}}function d_(e,t){return e==null?t===null?void 0:t:t==null?e===null?void 0:e:function(n,r,i){return{data:n,facets:r}=e.call(this,n,r,i),t.call(this,_r(n),r,i)}}function h_(e,t){return e==null?t===null?void 0:t:t==null?e===null?void 0:e:function(n,r,i,...s){let o,a,l,c,u,f;return{data:a=n,facets:l=r,channels:o}=e.call(this,n,r,i,...s),{data:u=a,facets:f=l,channels:c}=t.call(this,a,l,{...i,...o},...s),{data:u,facets:f,channels:{...o,...c}}}}function _v(e,t){return(e.initializer!=null?Sr:qs)(e,t)}function Xrt(e,t){return _v(t,X3(e))}function X3(e){return(t,n)=>{const r=Pt(t,e);return{data:t,facets:n.map(i=>i.filter(s=>r[s]))}}}function Qrt({sort:e,...t}={}){return{..._v(t,Q3),sort:Va(e)?e:null}}function Q3(e,t){return{data:e,facets:t.map(n=>n.slice().reverse())}}function Krt({seed:e,sort:t,...n}={}){return{..._v(n,lC(e==null?Math.random:E3(e))),sort:Va(t)?t:null}}function aC(e,{sort:t,...n}={}){return{...(hs(e)&&e.channel!==void 0?Sr:_v)(n,K3(e)),sort:Va(t)?t:null}}function K3(e){return(typeof e=="function"&&e.length!==1?Zrt:lC)(e)}function Zrt(e){return(t,n)=>{const r=(i,s)=>e(t[i],t[s]);return{data:t,facets:n.map(i=>i.slice().sort(r))}}}function lC(e){let t,n;({channel:t,value:e,order:n}={...by(e)});const r=t==null?void 0:t.startsWith("-");if(r&&(t=t.slice(1)),n===void 0&&(n=r?w1:vi),typeof n!="function")switch(`${n}`.toLowerCase()){case"ascending":n=vi;break;case"descending":n=w1;break;default:throw new Error(`invalid order: ${n}`)}return(i,s,o)=>{let a;if(t===void 0)a=Pt(i,e);else{if(o===void 0)throw new Error("channel sort requires an initializer");if(a=o[t],!a)return{};a=a.value}const l=(c,u)=>n(a[c],a[u]);return{data:i,facets:s.map(c=>c.slice().sort(l))}}}function Z3(e,t){return Sv(null,null,e,t)}function xp(e={y:"count"},t={}){const{x:n=gt}=t;if(n==null)throw new Error("missing channel: x");return Sv(n,null,e,t)}function Ip(e={x:"count"},t={}){const{y:n=gt}=t;if(n==null)throw new Error("missing channel: y");return Sv(null,n,e,t)}function J3(e={fill:"count"},t={}){let{x:n,y:r}=t;if([n,r]=Zi(n,r),n==null)throw new Error("missing channel: x");if(r==null)throw new Error("missing channel: y");return Sv(n,r,e,t)}function Sv(e,t,{data:n=iT,filter:r,sort:i,reverse:s,...o}={},a={}){o=tT(o,a),n=xv(n,gt),i=i==null?void 0:eT("sort",i,a),r=r==null?void 0:nT("filter",r,a);const[l,c]=nr(e),[u,f]=nr(t),{z:d,fill:h,stroke:p,x1:g,x2:v,y1:y,y2:m,...b}=a,[w,S]=nr(d),[_]=wr(h),[x]=wr(p),[E,N]=nr(_),[I,A]=nr(x);return{..."z"in a&&{z:w||d},..."fill"in a&&{fill:E||h},..."stroke"in a&&{stroke:I||p},...qs(b,(D,R,T)=>{const M=x1(Pt(D,e),T==null?void 0:T.x),$=x1(Pt(D,t),T==null?void 0:T.y),B=Pt(D,d),O=Pt(D,_),C=Pt(D,x),F=rT(o,{z:B,fill:O,stroke:C}),P=[],z=[],H=M&&c([]),X=$&&f([]),tt=B&&S([]),Z=O&&N([]),Y=C&&A([]);let Q=0;for(const V of o)V.initialize(D);i&&i.initialize(D),r&&r.initialize(D);for(const V of R){const J=[];for(const et of o)et.scope("facet",V);i&&i.scope("facet",V),r&&r.scope("facet",V);for(const[et,j]of Zu(V,F))for(const[At,ot]of Zu(j,$))for(const[Yt,Ht]of Zu(ot,M))if(!(r&&!r.reduce(Ht))){J.push(Q++),z.push(n.reduceIndex(Ht,D)),M&&H.push(Yt),$&&X.push(At),B&&tt.push(F===B?et:B[Ht[0]]),O&&Z.push(F===O?et:O[Ht[0]]),C&&Y.push(F===C?et:C[Ht[0]]);for(const st of o)st.reduce(Ht);i&&i.reduce(Ht)}P.push(J)}return cC(P,i,s),{data:z,facets:P}}),...!va(o,"x")&&(l?{x:l}:{x1:g,x2:v}),...!va(o,"y")&&(u?{y:u}:{y1:y,y2:m}),...Object.fromEntries(o.map(({name:D,output:R})=>[D,R]))}}function va(e,...t){for(const{name:n}of e)if(t.includes(n))return!0;return!1}function tT(e,t,n=eT){const r=Object.entries(e);return t.title!=null&&e.title===void 0&&r.push(["title",rit]),t.href!=null&&e.href===void 0&&r.push(["href",sT]),r.filter(([,i])=>i!==void 0).map(([i,s])=>s===null?Jrt(i):n(i,s,t))}function eT(e,t,n,r=nT){let i;Si(t)&&"reduce"in t&&(i=t.scale,t=t.reduce);const s=r(e,t,n),[o,a]=Or(s.label);let l;return{name:e,output:i===void 0?o:{value:o,scale:i},initialize(c){s.initialize(c),l=a([])},scope(c,u){s.scope(c,u)},reduce(c,u){l.push(s.reduce(c,u))}}}function Jrt(e){return{name:e,initialize(){},scope(){},reduce(){}}}function nT(e,t,n,r=xv){const i=tC(e,n),s=r(t,i);let o,a;return{label:Wo(s===I1?null:i,s.label),initialize(l){o=i===void 0?l:Pt(l,i),s.scope==="data"&&(a=s.reduceIndex(qo(l),o))},scope(l,c){s.scope===l&&(a=s.reduceIndex(c,o))},reduce(l,c){return s.scope==null?s.reduceIndex(l,o,c):s.reduceIndex(l,o,a,c)}}}function Zu(e,t){return t?lp(Yo(e,n=>t[n]),gy):[[,e]]}function xv(e,t,n=tit){if(e==null)return n(e);if(typeof e.reduceIndex=="function")return e;if(typeof e.reduce=="function"&&Si(e))return eit(e);if(typeof e=="function")return nit(e);if(/^p\d{2}$/i.test(e))return ro(z3(e));switch(`${e}`.toLowerCase()){case"first":return sT;case"last":return iit;case"identity":return iT;case"count":return I1;case"distinct":return sit;case"sum":return t==null?I1:oit;case"proportion":return I$(t,"data");case"proportion-facet":return I$(t,"facet");case"deviation":return ro(ey);case"min":return ro(vn);case"min-index":return ro(EG);case"max":return ro(Ne);case"max-index":return ro(TG);case"mean":return x$(qb);case"median":return x$(fp);case"variance":return ro(n3);case"mode":return ro(JO)}return n(e)}function tit(e){throw new Error(`invalid reduce: ${e}`)}function rT(e,t){for(const n in t){const r=t[n];if(r!==void 0&&!e.some(i=>i.name===n))return r}}function cC(e,t,n){if(t){const r=t.output.transform(),i=(s,o)=>vi(r[s],r[o]);e.forEach(s=>s.sort(i))}n&&e.forEach(r=>r.reverse())}function eit(e){return console.warn("deprecated reduce interface; implement reduceIndex instead."),{...e,reduceIndex:e.reduce.bind(e)}}function nit(e){return{reduceIndex(t,n,r){return e(vv(n,t),r)}}}function ro(e){return{reduceIndex(t,n){return e(t,r=>n[r])}}}function x$(e){return{reduceIndex(t,n){const r=e(t,i=>n[i]);return Zn(n)?new Date(r):r}}}const iT={reduceIndex(e,t){return vv(t,e)}},sT={reduceIndex(e,t){return t[e[0]]}},rit={reduceIndex(e,t){const r=lp(Gu(e,s=>s.length,s=>t[s]),_p),i=r.slice(-5).reverse();if(i.length<r.length){const s=r.slice(0,-4);i[4]=[`… ${s.length.toLocaleString("en-US")} more`,Cs(s,_p)]}return i.map(([s,o])=>`${s} (${o.toLocaleString("en-US")})`).join(`
`)}},iit={reduceIndex(e,t){return t[e[e.length-1]]}},I1={label:"Frequency",reduceIndex(e){return e.length}},sit={label:"Distinct",reduceIndex(e,t){const n=new ny;for(const r of e)n.add(t[r]);return n.size}},oit=ro(Cs);function I$(e,t){return e==null?{scope:t,label:"Frequency",reduceIndex:(n,r,i=1)=>n.length/i}:{scope:t,reduceIndex:(n,r,i=1)=>Cs(n,s=>r[s])/i}}function Tp(e,{scale:t,type:n,value:r,filter:i,hint:s,label:o=Wo(r)},a){return s===void 0&&typeof(r==null?void 0:r.transform)=="function"&&(s=r.hint),fC(a,{scale:t,type:n,value:Pt(e,r),label:o,filter:i,hint:s})}function uC(e,t){return Object.fromEntries(Object.entries(e).map(([n,r])=>[n,Tp(t,r,n)]))}function oT(e,t){const n=Object.fromEntries(Object.entries(e).map(([r,{scale:i,value:s}])=>{const o=i==null?null:t[i];return[r,o==null?s:Se(s,o)]}));return n.channels=e,n}function fC(e,t){const{scale:n,value:r}=t;if(n===!0||n==="auto")switch(e){case"fill":case"stroke":case"color":t.scale=n!==!0&&f_(r,vy)?null:"color";break;case"fillOpacity":case"strokeOpacity":case"opacity":t.scale=n!==!0&&f_(r,Prt)?null:"opacity";break;case"symbol":n!==!0&&f_(r,Hrt)?(t.scale=null,t.value=Se(r,G3)):t.scale="symbol";break;default:t.scale=Ce.has(e)?e:null;break}else if(n===!1)t.scale=null;else if(n!=null&&!Ce.has(n))throw new Error(`unknown scale: ${n}`);return t}function ait(e,t,n,r,i){const{order:s,reverse:o,reduce:a=!0,limit:l}=i;for(const c in i){if(!Ce.has(c))continue;let{value:u,order:f=s,reverse:d=o,reduce:h=a,limit:p=l}=by(i[c]);const g=u==null?void 0:u.startsWith("-");if(g&&(u=u.slice(1)),f=f===void 0?g!==(u==="width"||u==="height")?hC:dC:uit(f),h==null||h===!1)continue;const v=c==="fx"||c==="fy"?cit(t,r[c]):lit(n,c);if(!v)throw new Error(`missing channel for scale: ${c}`);const y=v.value,[m=0,b=1/0]=Ho(p)?p:p<0?[p]:[0,p];if(u==null)v.domain=()=>{let w=Array.from(new ny(y));return d&&(w=w.reverse()),(m!==0||b!==1/0)&&(w=w.slice(m,b)),w};else{const w=u==="data"?e:u==="height"?T$(n,"y1","y2"):u==="width"?T$(n,"x1","x2"):YS(n,u,u==="y"?"y2":u==="x"?"x2":void 0),S=xv(h===!0?"max":h,w);v.domain=()=>{let _=wG(qo(y),x=>S.reduceIndex(x,w),x=>y[x]);return f&&_.sort(f),d&&_.reverse(),(m!==0||b!==1/0)&&(_=_.slice(m,b)),_.map(gy)}}}}function lit(e,t){for(const n in e){const r=e[n];if(r.scale===t)return r}}function cit(e,t){const n=e.original;if(n===e)return t;const r=t.value,i=t.value=[];for(let s=0;s<n.length;++s){const o=r[n[s][0]];for(const a of e[s])i[a]=o}return t}function T$(e,t,n){const r=YS(e,t),i=YS(e,n);return Se(i,(s,o)=>Math.abs(s-r[o]),Float64Array)}function YS(e,t,n){let r=e[t];if(!r&&n!==void 0&&(r=e[n]),r)return r.value;throw new Error(`missing channel: ${t}`)}function uit(e){if(e==null||typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"ascending":return dC;case"descending":return hC}throw new Error(`invalid order: ${e}`)}function dC([e,t],[n,r]){return vi(t,r)||vi(e,n)}function hC([e,t],[n,r]){return w1(t,r)||vi(e,n)}function qS(e,t){let n=e[t];if(n){for(;n.source;)n=n.source;return n.source===null?null:n}}function aT(e){let t,n;return(...r)=>(((n==null?void 0:n.length)!==r.length||n.some((i,s)=>i!==r[s]))&&(n=r,t=e(...r)),t)}const fit=aT(e=>new Intl.NumberFormat(e)),dit=aT((e,t)=>new Intl.DateTimeFormat(e,{timeZone:"UTC",...t&&{month:t}})),hit=aT((e,t)=>new Intl.DateTimeFormat(e,{timeZone:"UTC",...t&&{weekday:t}}));function pit(e="en-US"){const t=fit(e);return n=>n!=null&&!isNaN(n)?t.format(n):void 0}function yit(e="en-US",t="short"){const n=dit(e,t);return r=>r!=null&&!isNaN(r=+new Date(Date.UTC(2e3,+r)))?n.format(r):void 0}function mit(e="en-US",t="short"){const n=hit(e,t);return r=>r!=null&&!isNaN(r=+new Date(Date.UTC(2001,0,+r)))?n.format(r):void 0}function pC(e){return RO(e,"Invalid Date")}function git(e="en-US"){const t=pit(e);return n=>(n instanceof Date?pC:typeof n=="number"?t:Rn)(n)}const Ac=git();let WS=0,HS;function bit(){const e=WS;return WS=0,HS=void 0,e}function $o(e){e!==HS&&(HS=e,console.warn(e),++WS)}const Tn=(typeof window<"u"?window.devicePixelRatio>1:typeof it>"u")?0:.5;let vit=0;function E$(){return`plot-clip-${++vit}`}function yC(e,{title:t,href:n,ariaLabel:r,ariaDescription:i,ariaHidden:s,target:o,fill:a,fillOpacity:l,stroke:c,strokeWidth:u,strokeOpacity:f,strokeLinejoin:d,strokeLinecap:h,strokeMiterlimit:p,strokeDasharray:g,strokeDashoffset:v,opacity:y,mixBlendMode:m,imageFilter:b,paintOrder:w,pointerEvents:S,shapeRendering:_,channels:x},{ariaLabel:E,fill:N="currentColor",fillOpacity:I,stroke:A="none",strokeOpacity:D,strokeWidth:R,strokeLinecap:T,strokeLinejoin:M,strokeMiterlimit:$,paintOrder:B}){N===null&&(a=null,l=null),A===null&&(c=null,f=null),He(N)?!He(A)&&(!He(a)||x!=null&&x.fill)&&(A="none"):He(A)&&(!He(c)||x!=null&&x.stroke)&&(N="none");const[O,C]=wr(a,N),[F,P]=Ze(l,I),[z,H]=wr(c,A),[X,tt]=Ze(f,D),[Z,Y]=Ze(y);Bf(H)||(u===void 0&&(u=R),h===void 0&&(h=T),d===void 0&&(d=M),p===void 0&&!zrt(d)&&(p=$),!Bf(C)&&w===void 0&&(w=B));const[Q,V]=Ze(u);return N!==null&&(e.fill=Ye(C,"currentColor"),e.fillOpacity=Ud(P,1)),A!==null&&(e.stroke=Ye(H,"none"),e.strokeWidth=Ud(V,1),e.strokeOpacity=Ud(tt,1),e.strokeLinejoin=Ye(d,"miter"),e.strokeLinecap=Ye(h,"butt"),e.strokeMiterlimit=Ud(p,4),e.strokeDasharray=Ye(g,"none"),e.strokeDashoffset=Ye(v,"0")),e.target=Rn(o),e.ariaLabel=Rn(E),e.ariaDescription=Rn(i),e.ariaHidden=Rn(s),e.opacity=Ud(Y,1),e.mixBlendMode=Ye(m,"normal"),e.imageFilter=Ye(b,"none"),e.paintOrder=Ye(w,"normal"),e.pointerEvents=Ye(S,"auto"),e.shapeRendering=Ye(_,"auto"),{title:{value:t,optional:!0,filter:null},href:{value:n,optional:!0,filter:null},ariaLabel:{value:r,optional:!0,filter:null},fill:{value:O,scale:"auto",optional:!0},fillOpacity:{value:F,scale:"auto",optional:!0},stroke:{value:z,scale:"auto",optional:!0},strokeOpacity:{value:X,scale:"auto",optional:!0},strokeWidth:{value:Q,optional:!0},opacity:{value:Z,scale:"auto",optional:!0}}}function wit(e,t){t&&e.filter(n=>L3(t[n])).append("title").call(Sit,t)}function _it(e,t){t&&e.filter(([n])=>L3(t[n])).append("title").call(xit,t)}function Sit(e,t){t&&e.text(n=>Ac(t[n]))}function xit(e,t){t&&e.text(([n])=>Ac(t[n]))}function dn(e,{target:t,tip:n},{ariaLabel:r,title:i,fill:s,fillOpacity:o,stroke:a,strokeOpacity:l,strokeWidth:c,opacity:u,href:f}){r&&ut(e,"aria-label",d=>r[d]),s&&ut(e,"fill",d=>s[d]),o&&ut(e,"fill-opacity",d=>o[d]),a&&ut(e,"stroke",d=>a[d]),l&&ut(e,"stroke-opacity",d=>l[d]),c&&ut(e,"stroke-width",d=>c[d]),u&&ut(e,"opacity",d=>u[d]),f&&bC(e,d=>f[d],t),n||wit(e,i)}function T1(e,{target:t,tip:n},{ariaLabel:r,title:i,fill:s,fillOpacity:o,stroke:a,strokeOpacity:l,strokeWidth:c,opacity:u,href:f}){r&&ut(e,"aria-label",([d])=>r[d]),s&&ut(e,"fill",([d])=>s[d]),o&&ut(e,"fill-opacity",([d])=>o[d]),a&&ut(e,"stroke",([d])=>a[d]),l&&ut(e,"stroke-opacity",([d])=>l[d]),c&&ut(e,"stroke-width",([d])=>c[d]),u&&ut(e,"opacity",([d])=>u[d]),f&&bC(e,([d])=>f[d],t),n||_it(e,i)}function Iit({ariaLabel:e,title:t,fill:n,fillOpacity:r,stroke:i,strokeOpacity:s,strokeWidth:o,opacity:a,href:l},{tip:c}){return[e,c?void 0:t,n,r,i,s,o,a,l].filter(u=>u!==void 0)}function lT(e,t,n){const r=Yo(e,i=>t[i]);return n===void 0&&r.size>1+e.length>>1&&$o("Warning: the implicit z channel has high cardinality. This may occur when the fill or stroke channel is associated with quantitative data rather than ordinal or categorical data. You can suppress this warning by setting the z option explicitly; if this data represents a single series, set z to null."),r.values()}function*mC(e,t,n,r){const{z:i}=n,{z:s}=r,o=Iit(r,n),a=[...t,...o];for(const l of s?lT(e,s,i):[e]){let c,u;t:for(const f of l){for(const d of a)if(!Qn(d[f])){u&&u.push(-1);continue t}if(c===void 0){u&&(yield u),c=o.map(d=>Yl(d[f])),u=[f];continue}u.push(f);for(let d=0;d<o.length;++d)if(Yl(o[d][f])!==c[d]){yield u,c=o.map(p=>Yl(p[f])),u=[f];continue t}}u&&(yield u)}}function gC(e){return e===!0?e="frame":e===!1?e=null:e!=null&&(e=qr(e,"clip",["frame","sphere"])),e}function Tit(e,t,n,r){let i;const{clip:s=r.clip}=t;switch(s){case"frame":{const{width:o,height:a,marginLeft:l,marginRight:c,marginTop:u,marginBottom:f}=n,d=E$();i=`url(#${d})`,e=ne("svg:g",r).call(h=>h.append("svg:clipPath").attr("id",d).append("rect").attr("x",l).attr("y",u).attr("width",o-c-l).attr("height",a-u-f)).each(function(){this.appendChild(e.node()),e.node=()=>this});break}case"sphere":{const{projection:o}=r;if(!o)throw new Error('the "sphere" clip option requires a projection');const a=E$();i=`url(#${a})`,e.append("clipPath").attr("id",a).append("path").attr("d",al(o)({type:"Sphere"}));break}}ut(e,"aria-label",t.ariaLabel),ut(e,"aria-description",t.ariaDescription),ut(e,"aria-hidden",t.ariaHidden),ut(e,"clip-path",i)}function ke(e,t,n,r){Tit(e,t,n,r),ut(e,"fill",t.fill),ut(e,"fill-opacity",t.fillOpacity),ut(e,"stroke",t.stroke),ut(e,"stroke-width",t.strokeWidth),ut(e,"stroke-opacity",t.strokeOpacity),ut(e,"stroke-linejoin",t.strokeLinejoin),ut(e,"stroke-linecap",t.strokeLinecap),ut(e,"stroke-miterlimit",t.strokeMiterlimit),ut(e,"stroke-dasharray",t.strokeDasharray),ut(e,"stroke-dashoffset",t.strokeDashoffset),ut(e,"shape-rendering",t.shapeRendering),ut(e,"filter",t.imageFilter),ut(e,"paint-order",t.paintOrder);const{pointerEvents:i=r.pointerSticky===!1?"none":void 0}=t;ut(e,"pointer-events",i)}function Ee(e,t){Eit(e,"mix-blend-mode",t.mixBlendMode),ut(e,"opacity",t.opacity)}function bC(e,t,n){e.each(function(r){const i=t(r);if(i!=null){const s=this.ownerDocument.createElementNS(wc.svg,"a");s.setAttribute("fill","inherit"),s.setAttributeNS(wc.xlink,"href",i),n!=null&&s.setAttribute("target",n),this.parentNode.insertBefore(s,this).appendChild(this)}})}function ut(e,t,n){n!=null&&e.attr(t,n)}function Eit(e,t,n){n!=null&&e.style(t,n)}function ve(e,t,{x:n,y:r},i=Tn,s=Tn){i+=t.dx,s+=t.dy,n!=null&&n.bandwidth&&(i+=n.bandwidth()/2),r!=null&&r.bandwidth&&(s+=r.bandwidth()/2),(i||s)&&e.attr("transform",`translate(${i},${s})`)}function Ye(e,t){if((e=Rn(e))!==t)return e}function Ud(e,t){if((e=Vt(e))!==t)return e}const Ait=/^-?([_a-z]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])([_a-z0-9-]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])*$/i;function cT(e){if(e===void 0)return"plot-d6a7b5";if(e=`${e}`,!Ait.test(e))throw new Error(`invalid class name: ${e}`);return e}function uT(e,t){if(typeof t=="string")e.property("style",t);else if(t!=null)for(const n of e)Object.assign(n.style,t)}function Ws({frameAnchor:e},{width:t,height:n,marginTop:r,marginRight:i,marginBottom:s,marginLeft:o}){return[/left$/.test(e)?o:/right$/.test(e)?t-i:(o+t-i)/2,/^top/.test(e)?r:/^bottom/.test(e)?n-s:(r+n-s)/2]}function Iv(e={}){const{document:t=typeof window<"u"?window.document:void 0,clip:n}=e;return{document:t,clip:gC(n)}}function ne(e,{document:t}){return me(Gb(e).call(t.documentElement))}const vC=Math.PI,Qs=2*vC,A$=.618;function Mit({projection:e,inset:t=0,insetTop:n=t,insetRight:r=t,insetBottom:i=t,insetLeft:s=t}={},o){if(e==null)return;if(typeof e.stream=="function")return e;let a,l,c="frame";if(Si(e)){let S;if({type:e,domain:l,inset:S,insetTop:n=S!==void 0?S:n,insetRight:r=S!==void 0?S:r,insetBottom:i=S!==void 0?S:i,insetLeft:s=S!==void 0?S:s,clip:c=c,...a}=e,e==null)return}typeof e!="function"&&({type:e}=wC(e));const{width:u,height:f,marginLeft:d,marginRight:h,marginTop:p,marginBottom:g}=o,v=u-d-h-s-r,y=f-p-g-n-i;if(e=e==null?void 0:e({width:v,height:y,clip:c,...a}),e==null)return;c=$it(c,d,p,u-h,f-g);let m=d+s,b=p+n,w;if(l!=null){const[[S,_],[x,E]]=al(e).bounds(l),N=Math.min(v/(x-S),y/(E-_));N>0?(m-=(N*(S+x)-v)/2,b-=(N*(_+E)-y)/2,w=a1({point(I,A){this.stream.point(I*N+m,A*N+b)}})):$o("Warning: the projection could not be fit to the specified domain; using the default scale.")}return w??(w=m===0&&b===0?_C():a1({point(S,_){this.stream.point(S+m,_+b)}})),{stream:S=>e.stream(w.stream(c(S)))}}function wC(e){switch(`${e}`.toLowerCase()){case"albers-usa":return Ti(ctt,.7463,.4673);case"albers":return E0(hB,.7463,.4673);case"azimuthal-equal-area":return Ti(utt,4,4);case"azimuthal-equidistant":return Ti(ftt,Qs,Qs);case"conic-conformal":return E0(ptt,Qs,Qs);case"conic-equal-area":return E0(l1,6.1702,2.9781);case"conic-equidistant":return E0(gtt,7.312,3.6282);case"equal-earth":return Ti(vtt,5.4133,2.6347);case"equirectangular":return Ti(ytt,Qs,vC);case"gnomonic":return Ti(wtt,3.4641,3.4641);case"identity":return{type:_C};case"reflect-y":return{type:Nit};case"mercator":return Ti(dtt,Qs,Qs);case"orthographic":return Ti(_tt,2,2);case"stereographic":return Ti(Stt,2,2);case"transverse-mercator":return Ti(xtt,Qs,Qs);default:throw new Error(`unknown projection type: ${e}`)}}function $it(e,t,n,r,i){if(e===!1||e==null||typeof e=="number")return s=>s;switch(e===!0&&(e="frame"),`${e}`.toLowerCase()){case"frame":return KF(t,n,r,i);default:throw new Error(`unknown projection clip type: ${e}`)}}function Ti(e,t,n){return{type:({width:r,height:i,rotate:s,precision:o=.15,clip:a})=>{var c,u,f;const l=e();return o!=null&&((c=l.precision)==null||c.call(l,o)),s!=null&&((u=l.rotate)==null||u.call(l,s)),typeof a=="number"&&((f=l.clipAngle)==null||f.call(l,a)),l.scale(Math.min(r/t,i/n)),l.translate([r/2,i/2]),l},aspectRatio:n/t}}function E0(e,t,n){const{type:r,aspectRatio:i}=Ti(e,t,n);return{type:s=>{const{parallels:o,domain:a,width:l,height:c}=s,u=r(s);return o!=null&&(u.parallels(o),a===void 0&&u.fitSize([l,c],{type:"Sphere"})),u},aspectRatio:i}}const _C=Pr({stream:e=>e}),Nit=Pr(a1({point(e,t){this.stream.point(e,-t)}}));function SC(e,t,n,r){const i=n[e],s=n[t],o=i.length,a=n[e]=new Float64Array(o).fill(NaN),l=n[t]=new Float64Array(o).fill(NaN);let c;const u=r.stream({point(f,d){a[c]=f,l[c]=d}});for(c=0;c<o;++c)u.point(i[c],s[c])}function kit({projection:e}={}){return e==null?!1:typeof e.stream=="function"?!0:(Si(e)&&(e=e.type),e!=null)}function Dit(e){if(typeof(e==null?void 0:e.stream)=="function")return A$;if(Si(e)&&(e=e.type),e!=null){if(typeof e!="function"){const{aspectRatio:t}=wC(e);if(t)return t}return A$}}function Tv(e,t,{projection:n}){const{x:r,y:i}=e;let s={};return r&&(s.x=r),i&&(s.y=i),s=oT(s,t),n&&(r==null?void 0:r.scale)==="x"&&(i==null?void 0:i.scale)==="y"&&SC("x","y",s,n),r&&(s.x=cr(s.x)),i&&(s.y=cr(s.y)),s}function Oit(e){const t=[],n=[],r={scale:"x",value:t},i={scale:"y",value:n},s={point(o,a){t.push(o),n.push(a)},lineStart(){},lineEnd(){},polygonStart(){},polygonEnd(){},sphere(){}};for(const o of e.value)ha(o,s);return[r,i]}const xC=new Map([["accent",Dnt],["category10",knt],["dark2",Ont],["paired",Fnt],["pastel1",Bnt],["pastel2",Rnt],["set1",Lnt],["set2",Cnt],["set3",Unt],["tableau10",Pnt]]);function Fit(e){return e!=null&&xC.has(`${e}`.toLowerCase())}const M$=new Map([...xC,["brbg",Ks(rR,iR)],["prgn",Ks(sR,oR)],["piyg",Ks(aR,lR)],["puor",Ks(cR,uR)],["rdbu",Ks(zS,h1)],["rdgy",Ks(fR,dR)],["rdylbu",Ks(jS,p1)],["rdylgn",Ks(hR,pR)],["spectral",Ks(yR,mR)],["burd",$$(zS,h1)],["buylrd",$$(jS,p1)],["blues",hn(zR,jR)],["greens",hn(VR,YR)],["greys",hn(qR,WR)],["oranges",hn(KR,ZR)],["purples",hn(HR,GR)],["reds",hn(XR,QR)],["turbo",Zs(sL)],["viridis",Zs(oL)],["magma",Zs(aL)],["inferno",Zs(lL)],["plasma",Zs(cL)],["cividis",Zs(JR)],["cubehelix",Zs(tL)],["warm",Zs(eL)],["cool",Zs(nL)],["bugn",hn(gR,bR)],["bupu",hn(vR,wR)],["gnbu",hn(_R,SR)],["orrd",hn(xR,IR)],["pubu",hn(AR,MR)],["pubugn",hn(TR,ER)],["purd",hn($R,NR)],["rdpu",hn(kR,DR)],["ylgn",hn(BR,RR)],["ylgnbu",hn(OR,FR)],["ylorbr",hn(LR,CR)],["ylorrd",hn(UR,PR)],["rainbow",N$(rL)],["sinebow",N$(iL)]]);function hn(e,t){return({length:n})=>n===1?[e[3][1]]:n===2?[e[3][1],e[3][2]]:(n=Math.max(3,Math.floor(n)),n>9?Yi(t,n):e[n])}function Ks(e,t){return({length:n})=>n===2?[e[3][0],e[3][2]]:(n=Math.max(3,Math.floor(n)),n>11?Yi(t,n):e[n])}function $$(e,t){return({length:n})=>n===2?[e[3][2],e[3][0]]:(n=Math.max(3,Math.floor(n)),n>11?Yi(r=>t(1-r),n):e[n].slice().reverse())}function Zs(e){return({length:t})=>Yi(e,Math.max(2,Math.floor(t)))}function N$(e){return({length:t})=>Yi(e,Math.floor(t)+1).slice(0,-1)}function IC(e){const t=`${e}`.toLowerCase();if(!M$.has(t))throw new Error(`unknown ordinal scheme: ${t}`);return M$.get(t)}function Ev(e,t){const n=IC(e),r=typeof n=="function"?n({length:t}):n;return r.length!==t?r.slice(0,t):r}function Bit(e,t="greys"){const n=new Set,[r,i]=Ev(t,2);for(const s of e)if(s!=null)if(s===!0)n.add(i);else if(s===!1)n.add(r);else return;return[...n]}const k$=new Map([["brbg",iR],["prgn",oR],["piyg",lR],["puor",uR],["rdbu",h1],["rdgy",dR],["rdylbu",p1],["rdylgn",pR],["spectral",mR],["burd",e=>h1(1-e)],["buylrd",e=>p1(1-e)],["blues",jR],["greens",YR],["greys",WR],["purples",GR],["reds",QR],["oranges",ZR],["turbo",sL],["viridis",oL],["magma",aL],["inferno",lL],["plasma",cL],["cividis",JR],["cubehelix",tL],["warm",eL],["cool",nL],["bugn",bR],["bupu",wR],["gnbu",SR],["orrd",IR],["pubugn",ER],["pubu",MR],["purd",NR],["rdpu",DR],["ylgnbu",FR],["ylgn",RR],["ylorbr",CR],["ylorrd",PR],["rainbow",rL],["sinebow",iL]]);function fT(e){const t=`${e}`.toLowerCase();if(!k$.has(t))throw new Error(`unknown quantitative scheme: ${t}`);return k$.get(t)}const Rit=new Set(["brbg","prgn","piyg","puor","rdbu","rdgy","rdylbu","rdylgn","spectral","burd","buylrd"]);function Lit(e){return e!=null&&Rit.has(`${e}`.toLowerCase())}const TC=e=>t=>e(1-t),p_=[0,1],D$=new Map([["number",Fn],["rgb",Sc],["hsl",iK],["hcl",aK],["lab",sK]]);function EC(e){const t=`${e}`.toLowerCase();if(!D$.has(t))throw new Error(`unknown interpolator: ${t}`);return D$.get(t)}function Iy(e,t,n,{type:r,nice:i,clamp:s,zero:o,domain:a=MC(e,n),unknown:l,round:c,scheme:u,interval:f,range:d=Ce.get(e)===_y?Git(n,a):Ce.get(e)===Sy?Xit(n,a):Ce.get(e)===xy?p_:void 0,interpolate:h=Ce.get(e)===Go?u==null&&d!==void 0?Sc:fT(u!==void 0?u:r==="cyclical"?"rainbow":"turbo"):c?p3:Fn,reverse:p}){if(f=ad(f,r),(r==="cyclical"||r==="sequential")&&(r="linear"),typeof h!="function"&&(h=EC(h)),p=!!p,d!==void 0){const g=(a=_r(a)).length,v=(d=_r(d)).length;if(g!==v){if(h.length===1)throw new Error("invalid piecewise interpolator");h=Kb(h,d),d=void 0}}if(h.length===1?(p&&(h=TC(h),p=!1),d===void 0&&(d=Float64Array.from(a,(g,v)=>v/(a.length-1)),d.length===2&&(d=p_)),t.interpolate((d===p_?Pr:hT)(h))):t.interpolate(h),o){const[g,v]=mn(a);(g>0||v<0)&&(a=Sp(a),Rf(a)!==Math.sign(g)?a[a.length-1]=0:a[0]=0)}return p&&(a=Og(a)),t.domain(a).unknown(l),i&&(t.nice(Cit(i,r)),a=t.domain()),d!==void 0&&t.range(d),s&&t.clamp(s),{type:r,domain:a,range:d,scale:t,interpolate:h,interval:f}}function Cit(e,t){return e===!0?void 0:typeof e=="number"?e:Ort(e,t)}function Uit(e,t,n){return Iy(e,sv(),t,n)}function Pit(e,t,n){return AC(e,t,{...n,exponent:.5})}function AC(e,t,{exponent:n=1,...r}){return Iy(e,RB().exponent(n),t,{...r,type:"pow"})}function zit(e,t,{base:n=10,domain:r=Qit(t),...i}){return Iy(e,DB().base(n),t,{...i,domain:r})}function jit(e,t,{constant:n=1,...r}){return Iy(e,FB().constant(n),t,r)}function Vit(e,t,{range:n,quantiles:r=n===void 0?5:(n=[...n]).length,n:i=r,scheme:s="rdylbu",domain:o=Kit(t),unknown:a,interpolate:l,reverse:c}){return n===void 0&&(n=l!==void 0?Yi(l,i):Ce.get(e)===Go?Ev(s,i):void 0),o.length>0&&(o=LB(o,n===void 0?{length:i}:n).quantiles()),dT(e,t,{domain:o,range:n,reverse:c,unknown:a})}function Yit(e,t,{range:n,n:r=n===void 0?5:(n=[...n]).length,scheme:i="rdylbu",domain:s=MC(e,t),unknown:o,interpolate:a,reverse:l}){const[c,u]=mn(s);let f;return n===void 0?(f=Ua(c,u,r),f[0]<=c&&f.splice(0,1),f[f.length-1]>=u&&f.pop(),r=f.length+1,n=a!==void 0?Yi(a,r):Ce.get(e)===Go?Ev(i,r):void 0):(f=Yi(Fn(c,u),r+1).slice(1,-1),c instanceof Date&&(f=f.map(d=>new Date(d)))),Rf(_r(s))<0&&f.reverse(),dT(e,t,{domain:f,range:n,reverse:l,unknown:o})}function dT(e,t,{domain:n=[0],unknown:r,scheme:i="rdylbu",interpolate:s,range:o=s!==void 0?Yi(s,n.length+1):Ce.get(e)===Go?Ev(i,n.length+1):void 0,reverse:a}){n=_r(n);const l=Rf(n);if(!isNaN(l)&&!qit(n,l))throw new Error(`the ${e} scale has a non-monotonic domain`);return a&&(o=Og(o)),{type:"threshold",scale:CB(l<0?Og(n):n,o===void 0?[]:o).unknown(r),domain:n,range:o}}function qit(e,t){for(let n=1,r=e.length,i=e[0];n<r;++n){const s=bc(i,i=e[n]);if(s!==0&&s!==t)return!1}return!0}function Wit(e){return{type:"identity",scale:qrt(Ce.get(e))?$B():t=>t}}function Ep(e,t=_1){return e.length?[vn(e,({value:n})=>n===void 0?n:vn(n,t)),Ne(e,({value:n})=>n===void 0?n:Ne(n,t))]:[0,1]}function MC(e,t){const n=Ce.get(e);return(n===_y||n===xy||n===Sy?Hit:Ep)(t)}function Hit(e){return[0,e.length?Ne(e,({value:t})=>t===void 0?t:Ne(t,_1)):1]}function Git(e,t){const n=e.find(({radius:o})=>o!==void 0);if(n!==void 0)return[0,n.radius];const r=Pa(e,.5,({value:o})=>o===void 0?NaN:Pa(o,.25,Mo)),i=t.map(o=>3*Math.sqrt(o/r)),s=30/Ne(i);return s<1?i.map(o=>o*s):i}function Xit(e,t){const n=fp(e,({value:s})=>s===void 0?NaN:fp(s,Math.abs)),r=t.map(s=>12*s/n),i=60/Ne(r);return i<1?r.map(s=>s*i):r}function Qit(e){for(const{value:t}of e)if(t!==void 0)for(let n of t){if(n>0)return Ep(e,Mo);if(n<0)return Ep(e,mv)}return[1,10]}function Kit(e){const t=[];for(const{value:n}of e)if(n!==void 0)for(const r of n)t.push(r);return t}function hT(e){return(t,n)=>r=>e(t+r*(n-t))}function Av(e,t,n,r,{type:i,nice:s,clamp:o,domain:a=Ep(r),unknown:l,pivot:c=0,scheme:u,range:f,symmetric:d=!0,interpolate:h=Ce.get(e)===Go?u==null&&f!==void 0?Sc:fT(u!==void 0?u:"rdbu"):Fn,reverse:p}){c=+c,a=_r(a);let[g,v]=a;if(a.length>2&&$o(`Warning: the diverging ${e} scale domain contains extra elements.`),bc(g,v)<0&&([g,v]=[v,g],p=!p),g=Math.min(g,c),v=Math.max(v,c),typeof h!="function"&&(h=EC(h)),f!==void 0&&(h=h.length===1?hT(h)(...f):Kb(h,f)),p&&(h=TC(h)),d){const y=n.apply(c),m=y-n.apply(g),b=n.apply(v)-y;m<b?g=n.invert(y-b):m>b&&(v=n.invert(y+m))}return t.domain([g,c,v]).unknown(l).interpolator(h),o&&t.clamp(o),s&&t.nice(s),{type:i,domain:[g,v],pivot:c,interpolate:h,scale:t}}function Zit(e,t,n){return Av(e,JB(),nst,t,n)}function Jit(e,t,n){return $C(e,t,{...n,exponent:.5})}function $C(e,t,{exponent:n=1,...r}){return Av(e,nR().exponent(n=+n),sst(n),t,{...r,type:"diverging-pow"})}function tst(e,t,{base:n=10,pivot:r=1,domain:i=Ep(t,r<0?mv:Mo),...s}){return Av(e,tR().base(n=+n),rst,t,{domain:i,pivot:r,...s})}function est(e,t,{constant:n=1,...r}){return Av(e,eR().constant(n=+n),ost(n),t,r)}const nst={apply(e){return e},invert(e){return e}},rst={apply:Math.log,invert:Math.exp},ist={apply(e){return Math.sign(e)*Math.sqrt(Math.abs(e))},invert(e){return Math.sign(e)*(e*e)}};function sst(e){return e===.5?ist:{apply(t){return Math.sign(t)*Math.pow(Math.abs(t),e)},invert(t){return Math.sign(t)*Math.pow(Math.abs(t),1/e)}}}function ost(e){return{apply(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))},invert(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}}function NC(e,t,n,r){return Iy(e,t,n,r)}function ast(e,t,n){return NC(e,$nt(),t,n)}function lst(e,t,n){return NC(e,Nnt(),t,n)}const Ty=Symbol("ordinal");function kC(e,t,n,{type:r,interval:i,domain:s,range:o,reverse:a,hint:l}){return i=ad(i,r),s===void 0&&(s=OC(n,i,e)),(r==="categorical"||r===Ty)&&(r="ordinal"),a&&(s=Og(s)),s=t.domain(s).domain(),o!==void 0&&(typeof o=="function"&&(o=o(s)),t.range(o)),{type:r,domain:s,range:o,scale:t,hint:l,interval:i}}function cst(e,t,{type:n,interval:r,domain:i,range:s,scheme:o,unknown:a,...l}){r=ad(r,n),i===void 0&&(i=OC(t,r,e));let c;if(Ce.get(e)===wv)c=dst(t),s=s===void 0?hst(c):Se(s,G3);else if(Ce.get(e)===Go&&(s===void 0&&(n==="ordinal"||n===Ty)&&(s=Bit(i,o),s!==void 0&&(o=void 0)),o===void 0&&s===void 0&&(o=n==="ordinal"?"turbo":"tableau10"),o!==void 0))if(s!==void 0){const u=fT(o),f=s[0],d=s[1]-s[0];s=({length:h})=>Yi(p=>u(f+d*p),h)}else s=IC(o);if(a===CS)throw new Error(`implicit unknown on ${e} scale is not supported`);return kC(e,A3().unknown(a),t,{...l,type:n,domain:i,range:s,hint:c})}function ust(e,t,{align:n=.5,padding:r=.5,...i}){return DC(cet().align(n).padding(r),t,i,e)}function fst(e,t,{align:n=.5,padding:r=.1,paddingInner:i=r,paddingOuter:s=e==="fx"||e==="fy"?0:r,...o}){return DC(rv().align(n).paddingInner(i).paddingOuter(s),t,o,e)}function DC(e,t,n,r){let{round:i}=n;return i!==void 0&&e.round(i=!!i),e=kC(r,e,t,n),e.round=i,e}function OC(e,t,n){const r=new ny;for(const{value:i,domain:s}of e){if(s!==void 0)return s();if(i!==void 0)for(const o of i)r.add(o)}if(t!==void 0){const[i,s]=mn(r).map(t.floor,t);return t.range(i,t.offset(s))}if(r.size>1e4&&Ce.get(n)===Ms)throw new Error(`implicit ordinal domain of ${n} scale has more than 10,000 values`);return lp(r,vi)}function O$(e,t){let n;for(const{hint:r}of e){const i=r==null?void 0:r[t];if(i!==void 0){if(n===void 0)n=i;else if(n!==i)return}}return n}function dst(e){return{fill:O$(e,"fill"),stroke:O$(e,"stroke")}}function hst(e){return He(e.fill)?Jnt:Znt}function GS(e,{label:t,inset:n=0,insetTop:r=n,insetRight:i=n,insetBottom:s=n,insetLeft:o=n,round:a,nice:l,clamp:c,zero:u,align:f,padding:d,projection:h,facet:{label:p=t}={},...g}={}){const v={};for(const[y,m]of e){const b=g[y],w=LC(y,m,{round:Ce.get(y)===Ms?a:void 0,nice:l,clamp:c,zero:u,align:f,padding:d,projection:h,...b});if(w){let{label:S=y==="fx"||y==="fy"?p:t,percent:_,transform:x,inset:E,insetTop:N=E!==void 0?E:y==="y"?r:0,insetRight:I=E!==void 0?E:y==="x"?i:0,insetBottom:A=E!==void 0?E:y==="y"?s:0,insetLeft:D=E!==void 0?E:y==="x"?o:0}=b||{};if(x==null)x=void 0;else if(typeof x!="function")throw new Error("invalid scale transform; not a function");w.percent=!!_,w.label=S===void 0?yst(m,w):S,w.transform=x,y==="x"||y==="fx"?(w.insetLeft=+D,w.insetRight=+I):(y==="y"||y==="fy")&&(w.insetTop=+N,w.insetBottom=+A),v[y]=w}}return v}function F$(e){const t={},n={scales:t};for(const[r,i]of Object.entries(e)){const{scale:s,type:o,interval:a,label:l}=i;t[r]=UC(i),n[r]=s,s.type=o,a!=null&&(s.interval=a),l!=null&&(s.label=l)}return n}function pst(e,t){const{x:n,y:r,fx:i,fy:s}=e,o=i||s?pT(t):t;i&&B$(i,o),s&&R$(s,o);const a=i||s?FC(e,t):t;n&&B$(n,a),r&&R$(r,a)}function yst(e=[],t){let n;for(const{label:r}of e)if(r!==void 0){if(n===void 0)n=r;else if(n!==r)return}if(n!==void 0)return!Bc(t)&&t.percent&&(n=`${n} (%)`),{inferred:!0,toString:()=>n}}function pT(e){const{marginTop:t,marginRight:n,marginBottom:r,marginLeft:i,width:s,height:o,facet:{marginTop:a,marginRight:l,marginBottom:c,marginLeft:u}}=e;return{marginTop:Math.max(t,a),marginRight:Math.max(n,l),marginBottom:Math.max(r,c),marginLeft:Math.max(i,u),width:s,height:o}}function FC({fx:e,fy:t},n){const{marginTop:r,marginRight:i,marginBottom:s,marginLeft:o,width:a,height:l}=pT(n);return{marginTop:r,marginRight:i,marginBottom:s,marginLeft:o,width:e?e.scale.bandwidth()+o+i:a,height:t?t.scale.bandwidth()+r+s:l,facet:{width:a,height:l}}}function B$(e,t){if(e.range===void 0){const{insetLeft:n,insetRight:r}=e,{width:i,marginLeft:s=0,marginRight:o=0}=t,a=s+n,l=i-o-r;e.range=[a,Math.max(a,l)],Bc(e)||(e.range=RC(e)),e.scale.range(e.range)}BC(e)}function R$(e,t){if(e.range===void 0){const{insetTop:n,insetBottom:r}=e,{height:i,marginTop:s=0,marginBottom:o=0}=t,a=s+n,l=i-o-r;e.range=[Math.max(a,l),a],Bc(e)?e.range.reverse():e.range=RC(e),e.scale.range(e.range)}BC(e)}function BC(e){e.round===void 0&&bst(e)&&mst(e)<=30&&e.scale.round(!0)}function mst({scale:e}){const t=e.domain().length,[n,r]=e.range(),i=e.paddingInner?e.paddingInner():1,s=e.paddingOuter?e.paddingOuter():e.padding(),o=t-i,a=Math.abs(r-n)/Math.max(1,o+s*2);return(a-Math.floor(a))*o}function RC(e){const t=e.scale.domain().length+CC(e);if(!(t>2))return e.range;const[n,r]=e.range;return Array.from({length:t},(i,s)=>n+s/(t-1)*(r-n))}function XS(e,t,n){return LC(e,n===void 0?void 0:[{hint:n}],{...t})}function LC(e,t=[],n={}){const r=gst(e,t,n);if(n.type===void 0&&n.domain===void 0&&n.range===void 0&&n.interval==null&&e!=="fx"&&e!=="fy"&&Bc({type:r})){const i=t.map(({value:s})=>s).filter(s=>s!==void 0);i.some(Zn)?$o(`Warning: some data associated with the ${e} scale are dates. Dates are typically associated with a "utc" or "time" scale rather than a "${Gc(r)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can specify the interval of the ${e} scale (e.g., d3.utcDay), or you can suppress this warning by setting the type of the ${e} scale to "${Gc(r)}".`):i.some(Lrt)?$o(`Warning: some data associated with the ${e} scale are strings that appear to be dates (e.g., YYYY-MM-DD). If these strings represent dates, you should parse them to Date objects. Dates are typically associated with a "utc" or "time" scale rather than a "${Gc(r)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can suppress this warning by setting the type of the ${e} scale to "${Gc(r)}".`):i.some(Crt)&&$o(`Warning: some data associated with the ${e} scale are strings that appear to be numbers. If these strings represent numbers, you should parse or coerce them to numbers. Numbers are typically associated with a "linear" scale rather than a "${Gc(r)}" scale. If you want to treat this data as ordinal, you can specify the interval of the ${e} scale (e.g., 1 for integers), or you can suppress this warning by setting the type of the ${e} scale to "${Gc(r)}".`)}switch(n.type=r,r){case"diverging":case"diverging-sqrt":case"diverging-pow":case"diverging-log":case"diverging-symlog":case"cyclical":case"sequential":case"linear":case"sqrt":case"threshold":case"quantile":case"pow":case"log":case"symlog":n=A0(t,n,cr);break;case"identity":switch(Ce.get(e)){case Ms:n=A0(t,n,cr);break;case wv:n=A0(t,n,vst);break}break;case"utc":case"time":n=A0(t,n,Drt);break}switch(r){case"diverging":return Zit(e,t,n);case"diverging-sqrt":return Jit(e,t,n);case"diverging-pow":return $C(e,t,n);case"diverging-log":return tst(e,t,n);case"diverging-symlog":return est(e,t,n);case"categorical":case"ordinal":case Ty:return cst(e,t,n);case"cyclical":case"sequential":case"linear":return Uit(e,t,n);case"sqrt":return Pit(e,t,n);case"threshold":return dT(e,t,n);case"quantile":return Vit(e,t,n);case"quantize":return Yit(e,t,n);case"pow":return AC(e,t,n);case"log":return zit(e,t,n);case"symlog":return jit(e,t,n);case"utc":return lst(e,t,n);case"time":return ast(e,t,n);case"point":return ust(e,t,n);case"band":return fst(e,t,n);case"identity":return Wit(e);case void 0:return;default:throw new Error(`unknown scale type: ${r}`)}}function Gc(e){return typeof e=="symbol"?e.description:e}const L$={toString:()=>"projection"};function gst(e,t,{type:n,domain:r,range:i,scheme:s,pivot:o,projection:a}){if(e==="fx"||e==="fy")return"band";(e==="x"||e==="y")&&a!=null&&(n=L$);for(const{type:c}of t)if(c!==void 0){if(n===void 0)n=c;else if(n!==c)throw new Error(`scale incompatible with channel: ${n} !== ${c}`)}if(n===L$)return;if(n!==void 0)return n;if(r===void 0&&!t.some(({value:c})=>c!==void 0))return;const l=Ce.get(e);if(l===_y)return"sqrt";if(l===xy||l===Sy)return"linear";if(l===wv)return"ordinal";if((r||i||[]).length>2)return y_(l);if(r!==void 0){if(Ve(r))return y_(l);if(Zn(r))return"utc"}else{const c=t.map(({value:u})=>u).filter(u=>u!==void 0);if(c.some(Ve))return y_(l);if(c.some(Zn))return"utc"}if(l===Go){if(o!=null||Lit(s))return"diverging";if(Fit(s))return"categorical"}return"linear"}function y_(e){switch(e){case Ms:return"point";case Go:return Ty;default:return"ordinal"}}function Bc({type:e}){return e==="ordinal"||e==="point"||e==="band"||e===Ty}function CC({type:e}){return e==="threshold"}function bst({type:e}){return e==="point"||e==="band"}function fi(e){if(e===void 0)return!0;const t=e.domain(),n=e(t[0]);for(let r=1,i=t.length;r<i;++r)if(e(t[r])-n)return!1;return!0}function A0(e,{domain:t,...n},r){for(const i of e)i.value!==void 0&&(i.value=r(i.value));return{domain:t===void 0?t:r(t),...n}}function vst(e){return Se(e,G3)}function Mc(e={}){let t;for(const n in e)if(Ce.has(n)&&sc(e[n])){if(t!==void 0)throw new Error("ambiguous scale definition; multiple scales found");t=UC(XS(n,e[n]))}if(t===void 0)throw new Error("invalid scale definition; no scale found");return t}function wst(e){return t=>{if(!Ce.has(t=`${t}`))throw new Error(`unknown scale: ${t}`);return e[t]}}function UC({scale:e,type:t,domain:n,range:r,interpolate:i,interval:s,transform:o,percent:a,pivot:l}){if(t==="identity")return{type:"identity",apply:u=>u,invert:u=>u};const c=e.unknown?e.unknown():void 0;return{type:t,domain:Sp(n),...r!==void 0&&{range:Sp(r)},...o!==void 0&&{transform:o},...a&&{percent:a},...c!==void 0&&{unknown:c},...s!==void 0&&{interval:s},...i!==void 0&&{interpolate:i},...e.clamp&&{clamp:e.clamp()},...l!==void 0&&{pivot:l,symmetric:!1},...e.base&&{base:e.base()},...e.exponent&&{exponent:e.exponent()},...e.constant&&{constant:e.constant()},...e.align&&{align:e.align(),round:e.round()},...e.padding&&(e.paddingInner?{paddingInner:e.paddingInner(),paddingOuter:e.paddingOuter()}:{padding:e.padding()}),...e.bandwidth&&{bandwidth:e.bandwidth(),step:e.step()},apply:u=>e(u),...e.invert&&{invert:u=>e.invert(u)}}}function _st(e,t,n={}){let r=.5-Tn,i=.5+Tn,s=.5+Tn,o=.5-Tn;for(const{marginTop:g,marginRight:v,marginBottom:y,marginLeft:m}of t)g>r&&(r=g),v>i&&(i=v),y>s&&(s=y),m>o&&(o=m);let{margin:a,marginTop:l=a!==void 0?a:r,marginRight:c=a!==void 0?a:i,marginBottom:u=a!==void 0?a:s,marginLeft:f=a!==void 0?a:o}=n;l=+l,c=+c,u=+u,f=+f;let{width:d=640,height:h=Sst(e,n,{width:d,marginTopDefault:r,marginRightDefault:i,marginBottomDefault:s,marginLeftDefault:o})+Math.max(0,l-r+u-s)}=n;d=+d,h=+h;const p={width:d,height:h,marginTop:l,marginRight:c,marginBottom:u,marginLeft:f};if(e.fx||e.fy){let{margin:g,marginTop:v=g!==void 0?g:l,marginRight:y=g!==void 0?g:c,marginBottom:m=g!==void 0?g:u,marginLeft:b=g!==void 0?g:f}=n.facet??{};v=+v,y=+y,m=+m,b=+b,p.facet={marginTop:v,marginRight:y,marginBottom:m,marginLeft:b}}return p}function Sst({x:e,y:t,fy:n,fx:r},{projection:i,aspectRatio:s},{width:o,marginTopDefault:a,marginRightDefault:l,marginBottomDefault:c,marginLeftDefault:u}){const f=n?n.scale.domain().length:1,d=Dit(i);if(d){const p=r?r.scale.domain().length:1,g=(1.1*f-.1)/(1.1*p-.1)*d,v=Math.max(.1,Math.min(10,g));return Math.round((o-u-l)*v+a+c)}const h=t?Bc(t)?t.scale.domain().length:Math.max(7,17/f):1;if(s!=null){if(s=+s,!(isFinite(s)&&s>0))throw new Error(`invalid aspectRatio: ${s}`);const p=C$("y",t)/(C$("x",e)*s),g=r?r.scale.bandwidth():1,v=n?n.scale.bandwidth():1,y=g*(o-u-l)-e.insetLeft-e.insetRight;return(p*y+t.insetTop+t.insetBottom)/v+a+c}return!!(t||n)*Math.max(1,Math.min(60,h*f))*20+!!r*30+60}function C$(e,t){if(!t)throw new Error(`aspectRatio requires ${e} scale`);const{type:n,domain:r}=t;let i;switch(n){case"linear":case"utc":case"time":i=Number;break;case"pow":{const a=t.scale.exponent();i=l=>Math.pow(l,a);break}case"log":i=Math.log;break;case"point":case"band":return r.length;default:throw new Error(`unsupported ${e} scale for aspectRatio: ${n}`)}const[s,o]=mn(r);return Math.abs(i(o)-i(s))}function xst(e,t){const{fx:n,fy:r}=GS(e,t),i=n==null?void 0:n.scale.domain(),s=r==null?void 0:r.scale.domain();return i&&s?bG(i,s).map(([o,a],l)=>({x:o,y:a,i:l})):i?i.map((o,a)=>({x:o,i:a})):s?s.map((o,a)=>({y:o,i:a})):void 0}function Ist(e,{x:t,y:n}){return t&&(t=QS(t)),n&&(n=QS(n)),e.filter(t&&n?r=>t.has(r.x)&&n.has(r.y):t?r=>t.has(r.x):r=>n.has(r.y)).sort(t&&n?(r,i)=>t.get(r.x)-t.get(i.x)||n.get(r.y)-n.get(i.y):t?(r,i)=>t.get(r.x)-t.get(i.x):(r,i)=>n.get(r.y)-n.get(i.y))}function yT(e,{fx:t,fy:n}){const r=qo(e),i=t==null?void 0:t.value,s=n==null?void 0:n.value;return t&&n?Gu(r,o=>(o.fx=i[o[0]],o.fy=s[o[0]],o),o=>i[o],o=>s[o]):t?Gu(r,o=>(o.fx=i[o[0]],o),o=>i[o]):Gu(r,o=>(o.fy=s[o[0]],o),o=>s[o])}function Tst(e,t,{marginTop:n,marginLeft:r}){return e&&t?({x:i,y:s})=>`translate(${e(i)-r},${t(s)-n})`:e?({x:i})=>`translate(${e(i)-r},0)`:({y:i})=>`translate(0,${t(i)-n})`}function Est(e){const t=[],n=new Uint32Array(Cs(e,r=>r.length));for(const r of e){let i=0;for(const s of e)r!==s&&(n.set(s,i),i+=s.length);t.push(n.slice(0,i))}return t}const Ast=new Map([["top",m_],["right",v_],["bottom",g_],["left",b_],["top-left",M0(m_,b_)],["top-right",M0(m_,v_)],["bottom-left",M0(g_,b_)],["bottom-right",M0(g_,v_)],["top-empty",Nst],["right-empty",Ost],["bottom-empty",kst],["left-empty",Dst],["empty",Fst]]);function Mst(e){if(e==null)return null;const t=Ast.get(`${e}`.toLowerCase());if(t)return t;throw new Error(`invalid facet anchor: ${e}`)}const U$=new WeakMap;function QS(e){let t=U$.get(e);return t||U$.set(e,t=new vc(Se(e,(n,r)=>[n,r]))),t}function ul(e,t){return QS(e).get(t)}function $st(e,t,n){return t=Yl(t),n=Yl(n),e.find(r=>Object.is(Yl(r.x),t)&&Object.is(Yl(r.y),n))}function Mv(e,t,n){var r;return(r=$st(e,t,n))==null?void 0:r.empty}function m_(e,{y:t},{y:n}){return t?ul(t,n)===0:!0}function g_(e,{y:t},{y:n}){return t?ul(t,n)===t.length-1:!0}function b_(e,{x:t},{x:n}){return t?ul(t,n)===0:!0}function v_(e,{x:t},{x:n}){return t?ul(t,n)===t.length-1:!0}function Nst(e,{y:t},{x:n,y:r,empty:i}){if(i)return!1;if(!t)return;const s=ul(t,r);if(s>0)return Mv(e,n,t[s-1])}function kst(e,{y:t},{x:n,y:r,empty:i}){if(i)return!1;if(!t)return;const s=ul(t,r);if(s<t.length-1)return Mv(e,n,t[s+1])}function Dst(e,{x:t},{x:n,y:r,empty:i}){if(i)return!1;if(!t)return;const s=ul(t,n);if(s>0)return Mv(e,t[s-1],r)}function Ost(e,{x:t},{x:n,y:r,empty:i}){if(i)return!1;if(!t)return;const s=ul(t,n);if(s<t.length-1)return Mv(e,t[s+1],r)}function Fst(e,t,{empty:n}){return n}function M0(e,t){return function(){return e.apply(null,arguments)&&t.apply(null,arguments)}}function w_(e,{channels:{fx:t,fy:n},groups:r}){return t&&n?e.map(({x:i,y:s})=>{var o;return((o=r.get(i))==null?void 0:o.get(s))??[]}):t?e.map(({x:i})=>r.get(i)??[]):e.map(({y:i})=>r.get(i)??[])}let we=class{constructor(t,n={},r={},i){const{facet:s="auto",facetAnchor:o,fx:a,fy:l,sort:c,dx:u=0,dy:f=0,margin:d=0,marginTop:h=d,marginRight:p=d,marginBottom:g=d,marginLeft:v=d,clip:y=i==null?void 0:i.clip,channels:m,tip:b,render:w}=r;if(this.data=t,this.sort=Va(c)?c:null,this.initializer=Sr(r).initializer,this.transform=this.initializer?r.transform:qs(r).transform,s===null||s===!1?this.facet=null:(this.facet=qr(s===!0?"include":s,"facet",["auto","include","exclude","super"]),this.fx=t===kh&&typeof a=="string"?[a]:a,this.fy=t===kh&&typeof l=="string"?[l]:l),this.facetAnchor=Mst(o),n=q3(n),m!==void 0&&(n={...Bst(m),...n}),i!==void 0&&(n={...yC(this,r,i),...n}),this.channels=Object.fromEntries(Object.entries(n).map(([S,_])=>{if(hs(_.value)){const{value:x,label:E=_.label,scale:N=_.scale}=_.value;_={..._,label:E,scale:N,value:x}}if(t===kh&&typeof _.value=="string"){const{value:x}=_;_={..._,value:[x]}}return[S,_]}).filter(([S,{value:_,optional:x}])=>{if(_!=null)return!0;if(x)return!1;throw new Error(`missing channel value: ${S}`)})),this.dx=+u,this.dy=+f,this.marginTop=+h,this.marginRight=+p,this.marginBottom=+g,this.marginLeft=+v,this.clip=gC(y),this.tip=Rst(b),this.facet==="super"){if(a||l)throw new Error("super-faceting cannot use fx or fy");for(const S in this.channels){const{scale:_}=n[S];if(!(_!=="x"&&_!=="y"))throw new Error("super-faceting cannot use x or y")}}w!=null&&(this.render=PC(w,this.render))}initialize(t,n,r){let i=_r(this.data);t===void 0&&i!=null&&(t=[qo(i)]);const s=t;this.transform!=null&&({facets:t,data:i}=this.transform(i,t,r),i=_r(i)),t!==void 0&&(t.original=s);const o=uC(this.channels,i);return this.sort!=null&&ait(i,t,o,n,this.sort),{data:i,facets:t,channels:o}}filter(t,n,r){for(const i in n){const{filter:s=Qn}=n[i];if(s!==null){const o=r[i];t=t.filter(a=>s(o[a]))}}return t}project(t,n,r){for(const i in t)if(t[i].scale==="x"&&/^x|x$/.test(i)){const s=i.replace(/^x|x$/,"y");s in t&&t[s].scale==="y"&&SC(i,s,n,r.projection)}}scale(t,n,r){const i=oT(t,n);return r.projection&&this.project(t,i,r),i}};function Gi(...e){return e.plot=we.prototype.plot,e}function PC(e,t){if(e==null)return t===null?void 0:t;if(t==null)return e===null?void 0:e;if(typeof e!="function")throw new TypeError(`invalid render transform: ${e}`);if(typeof t!="function")throw new TypeError(`invalid render transform: ${t}`);return function(n,r,i,s,o,a){return e.call(this,n,r,i,s,o,(l,c,u,f,d)=>t.call(this,l,c,u,f,d,a))}}function Bst(e){return Object.fromEntries(Object.entries(q3(e)).map(([t,n])=>(n=typeof n=="string"?{value:n,label:t}:by(n),n.filter===void 0&&n.scale==null&&(n={...n,filter:null}),[t,n])))}function Rst(e){return e===!0?"xy":e===!1||e==null?null:typeof e=="string"?qr(e,"tip",["x","y","xy"]):e}function ld(e,t){return(e==null?void 0:e.tip)===!0?{...e,tip:t}:Si(e==null?void 0:e.tip)&&e.tip.pointer===void 0?{...e,tip:{...e.tip,pointer:t}}:e}const P$=new WeakMap;function mT(e,t,{x:n,y:r,px:i,py:s,maxRadius:o=40,channels:a,render:l,...c}={}){return o=+o,i!=null&&(n??(n=null),a={...a,px:{value:i,scale:"x"}}),s!=null&&(r??(r=null),a={...a,py:{value:s,scale:"y"}}),{x:n,y:r,channels:a,...c,render:PC(function(u,f,d,h,p,g){p={...p,pointerSticky:!1};const v=p.ownerSVGElement,{data:y}=p.getMarkState(this);let m=P$.get(v);m||P$.set(v,m={sticky:!1,roots:[],renders:[]});let b=m.renders.push(H)-1;const{x:w,y:S,fx:_,fy:x}=f;let E=_?_(u.fx)-h.marginLeft:0,N=x?x(u.fy)-h.marginTop:0;w!=null&&w.bandwidth&&(E+=w.bandwidth()/2),S!=null&&S.bandwidth&&(N+=S.bandwidth()/2);const I=u.fi!=null;let A;if(I){let Y=m.facetStates;Y||(m.facetStates=Y=new Map),A=Y.get(this),A||Y.set(this,A=new Map)}const[D,R]=Ws(this,h),{px:T,py:M}=d,$=T?Y=>T[Y]:zC(d,D),B=M?Y=>M[Y]:jC(d,R);let O,C,F,P;function z(Y,Q){if(I)if(P&&(P=cancelAnimationFrame(P)),Y==null)A.delete(u.fi);else{A.set(u.fi,Q),P=requestAnimationFrame(()=>{P=null;for(const[V,J]of A)if(J<Q||J===Q&&V<u.fi){Y=null;break}H(Y)});return}H(Y)}function H(Y){if(O===Y&&F===m.sticky)return;O=Y,F=p.pointerSticky=m.sticky;const Q=O==null?[]:[O];I&&(Q.fx=u.fx,Q.fy=u.fy,Q.fi=u.fi);const V=g(Q,f,d,h,p);if(C){if(I){const J=C.parentNode,et=C.getAttribute("transform"),j=V.getAttribute("transform");et?V.setAttribute("transform",et):V.removeAttribute("transform"),j?J.setAttribute("transform",j):J.removeAttribute("transform"),V.removeAttribute("aria-label"),V.removeAttribute("aria-description"),V.removeAttribute("aria-hidden")}C.replaceWith(V)}return m.roots[b]=C=V,O==null&&(A==null?void 0:A.size)>1||p.dispatchValue(O==null?null:y[O]),V}function X(Y){if(m.sticky||Y.pointerType==="mouse"&&Y.buttons===1)return;let[Q,V]=$i(Y);Q-=E,V-=N;const J=Q<h.marginLeft||Q>h.width-h.marginRight?1:e,et=V<h.marginTop||V>h.height-h.marginBottom?1:t;let j=null,At=o*o;for(const ot of u){const Yt=J*($(ot)-Q),Ht=et*(B(ot)-V),st=Yt*Yt+Ht*Ht;st<=At&&(j=ot,At=st)}if(j!=null&&(e!==1||t!==1)){const ot=$(j)-Q,Yt=B(j)-V;At=ot*ot+Yt*Yt}z(j,At)}function tt(Y){Y.pointerType==="mouse"&&O!=null&&(m.sticky&&m.roots.some(Q=>Q==null?void 0:Q.contains(Y.target))||(m.sticky?(m.sticky=!1,m.renders.forEach(Q=>Q(null))):(m.sticky=!0,H(O)),Y.stopImmediatePropagation()))}function Z(Y){Y.pointerType==="mouse"&&(m.sticky||z(null))}return v.addEventListener("pointerenter",X),v.addEventListener("pointermove",X),v.addEventListener("pointerdown",tt),v.addEventListener("pointerleave",Z),H(null)},l)}}function gT(e){return mT(1,1,e)}function bT(e){return mT(1,.01,e)}function vT(e){return mT(.01,1,e)}function zC({x1:e,x2:t,x:n=e},r){return e&&t?i=>(e[i]+t[i])/2:n?i=>n[i]:()=>r}function jC({y1:e,y2:t,y:n=e},r){return e&&t?i=>(e[i]+t[i])/2:n?i=>n[i]:()=>r}function VC(e){return Bc(e)&&e.interval===void 0?void 0:"tabular-nums"}function Lst(e,t){let{label:n=e.label,tickSize:r=6,width:i=240,height:s=44+r,marginTop:o=18,marginRight:a=0,marginBottom:l=16+r,marginLeft:c=0,style:u,ticks:f=(i-c-a)/64,tickFormat:d,fontVariant:h=VC(e),round:p=!0,opacity:g,className:v}=t;const y=Iv(t);v=cT(v),g=Ze(g)[1],d===null&&(d=()=>null);const m=ne("svg",y).attr("class",`${v}-ramp`).attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("width",i).attr("height",s).attr("viewBox",`0 0 ${i} ${s}`).call(D=>D.append("style").text(`.${v}-ramp {
  display: block;
  background: white;
  height: auto;
  height: intrinsic;
  max-width: 100%;
  overflow: visible;
}
.${v}-ramp text {
  white-space: pre;
}`)).call(uT,u);let b=D=>D.selectAll(".tick line").attr("y1",o+l-s),w;const S=p?(D,R)=>D.rangeRound(R):(D,R)=>D.range(R),{type:_,domain:x,range:E,interpolate:N,scale:I,pivot:A}=e;if(N){const D=E===void 0?N:Kb(N.length===1?hT(N):N,E);w=S(I.copy(),Yi(Fn(c,i-a),Math.min(x.length+(A!==void 0),E===void 0?1/0:E.length)));const R=256,T=y.document.createElement("canvas");T.width=R,T.height=1;const M=T.getContext("2d");for(let $=0,B=R-1;$<R;++$)M.fillStyle=D($/B),M.fillRect($,0,1,1);m.append("image").attr("opacity",g).attr("x",c).attr("y",o).attr("width",i-c-a).attr("height",s-o-l).attr("preserveAspectRatio","none").attr("xlink:href",T.toDataURL())}else if(_==="threshold"){const D=x,R=d===void 0?T=>T:typeof d=="string"?sd(d):d;w=S(sv().domain([-1,E.length-1]),[c,i-a]),m.append("g").attr("fill-opacity",g).selectAll().data(E).enter().append("rect").attr("x",(T,M)=>w(M-1)).attr("y",o).attr("width",(T,M)=>w(M)-w(M-1)).attr("height",s-o-l).attr("fill",T=>T),f=Se(D,(T,M)=>M),d=T=>R(D[T],T)}else w=S(rv().domain(x),[c,i-a]),m.append("g").attr("fill-opacity",g).selectAll().data(x).enter().append("rect").attr("x",w).attr("y",o).attr("width",Math.max(0,w.bandwidth()-1)).attr("height",s-o-l).attr("fill",I),b=()=>{};return m.append("g").attr("transform",`translate(0,${s-l})`).call(PG(w).ticks(Array.isArray(f)?null:f,typeof d=="string"?d:void 0).tickFormat(typeof d=="function"?d:void 0).tickSize(r).tickValues(Array.isArray(f)?f:null)).attr("font-size",null).attr("font-family",null).attr("font-variant",Ye(h,"normal")).call(b).call(D=>D.select(".domain").remove()),n!==void 0&&m.append("text").attr("x",c).attr("y",o-6).attr("fill","currentColor").attr("font-weight","bold").text(n),m.node()}const E1=Math.PI/180;function cd(e,{marker:t,markerStart:n=t,markerMid:r=t,markerEnd:i=t}={}){e.markerStart=__(n),e.markerMid=__(r),e.markerEnd=__(i)}function __(e){if(e==null||e===!1)return null;if(e===!0)return j$;if(typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"none":return null;case"arrow":return z$("auto");case"arrow-reverse":return z$("auto-start-reverse");case"dot":return Cst;case"circle":case"circle-fill":return j$;case"circle-stroke":return Ust}throw new Error(`invalid marker: ${e}`)}function z$(e){return(t,n)=>ne("svg:marker",n).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("orient",e).attr("fill","none").attr("stroke",t).attr("stroke-width",1.5).attr("stroke-linecap","round").attr("stroke-linejoin","round").call(r=>r.append("path").attr("d","M-1.5,-3l3,3l-3,3")).node()}function Cst(e,t){return ne("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",e).attr("stroke","none").call(n=>n.append("circle").attr("r",2.5)).node()}function j$(e,t){return ne("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",e).attr("stroke","white").attr("stroke-width",1.5).call(n=>n.append("circle").attr("r",3)).node()}function Ust(e,t){return ne("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill","white").attr("stroke",e).attr("stroke-width",1.5).call(n=>n.append("circle").attr("r",3)).node()}let Pst=0;function Ey(e,t,{stroke:n},r){return YC(e,t,n&&(i=>n[i]),r)}function zst(e,t,{stroke:n},r){return YC(e,t,n&&(([i])=>n[i]),r)}function YC(e,{markerStart:t,markerMid:n,markerEnd:r,stroke:i},s=()=>i,o){const a=new Map;function l(c){return function(u){const f=s(u);let d=a.get(c);d||a.set(c,d=new Map);let h=d.get(f);if(!h){const p=this.parentNode.insertBefore(c(f,o),this),g=`plot-marker-${++Pst}`;p.setAttribute("id",g),d.set(f,h=`url(#${g})`)}return h}}t&&e.attr("marker-start",l(t)),n&&e.attr("marker-mid",l(n)),r&&e.attr("marker-end",l(r))}function Ay({inset:e,insetLeft:t,insetRight:n,...r}={}){return[t,n]=qC(e,t,n),{inset:e,insetLeft:t,insetRight:n,...r}}function My({inset:e,insetTop:t,insetBottom:n,...r}={}){return[t,n]=qC(e,t,n),{inset:e,insetTop:t,insetBottom:n,...r}}function qC(e,t,n){return e===void 0&&t===void 0&&n===void 0?Tn?[1,0]:[.5,.5]:[t,n]}function WC(e,{interval:t}){return e={...by(e)},e.interval=Y3(e.interval===void 0?t:e.interval),e}function $v(e,t,n,r){const{[e]:i,[`${e}1`]:s,[`${e}2`]:o}=n,{value:a,interval:l}=WC(i,n);if(a==null||l==null&&!r)return n;const c=Wo(i);if(l==null){let h;const p={transform:g=>h||(h=Pt(g,a)),label:c};return{...n,[e]:void 0,[`${e}1`]:s===void 0?p:s,[`${e}2`]:o===void 0?p:o}}let u,f;function d(h){return f!==void 0&&h===u?f:f=Se(Pt(u=h,a),p=>l.floor(p))}return t({...n,[e]:void 0,[`${e}1`]:s===void 0?{transform:d,label:c}:s,[`${e}2`]:o===void 0?{transform:h=>d(h).map(p=>l.offset(p)),label:c}:o})}function HC(e,t,n){const{[e]:r}=n,{value:i,interval:s}=WC(r,n);return i==null||s==null?n:t({...n,[e]:{label:Wo(r),transform:o=>{const a=Se(Pt(o,i),c=>s.floor(c)),l=a.map(c=>s.offset(c));return a.map(Zn(a)?(c,u)=>c==null||isNaN(c=+c)||(u=l[u],u==null)||isNaN(u=+u)?void 0:new Date((c+u)/2):(c,u)=>c==null||(u=l[u],u==null)?NaN:(+c+ +u)/2)}}})}function GC(e={}){return $v("x",Ay,e,!0)}function XC(e={}){return $v("y",My,e,!0)}function QC(e={}){return $v("x",Ay,e)}function KC(e={}){return $v("y",My,e)}function ZC(e={}){return HC("x",Ay,e)}function JC(e={}){return HC("y",My,e)}const t5={ariaLabel:"rule",fill:null,stroke:"currentColor"};class e5 extends we{constructor(t,n={}){const{x:r,y1:i,y2:s,inset:o=0,insetTop:a=o,insetBottom:l=o}=n;super(t,{x:{value:r,scale:"x",optional:!0},y1:{value:i,scale:"y",optional:!0},y2:{value:s,scale:"y",optional:!0}},ld(n,"x"),t5),this.insetTop=Vt(a),this.insetBottom=Vt(l),cd(this,n)}render(t,n,r,i,s){const{x:o,y:a}=n,{x:l,y1:c,y2:u}=r,{width:f,height:d,marginTop:h,marginRight:p,marginLeft:g,marginBottom:v}=i,{insetTop:y,insetBottom:m}=this;return ne("svg:g",s).call(ke,this,i,s).call(ve,this,{x:l&&o},Tn,0).call(b=>b.selectAll().data(t).enter().append("line").call(Ee,this).attr("x1",l?w=>l[w]:(g+f-p)/2).attr("x2",l?w=>l[w]:(g+f-p)/2).attr("y1",c&&!fi(a)?w=>c[w]+y:h+y).attr("y2",u&&!fi(a)?a.bandwidth?w=>u[w]+a.bandwidth()-m:w=>u[w]-m:d-v-m).call(dn,this,r).call(Ey,this,r,s)).node()}}class n5 extends we{constructor(t,n={}){const{x1:r,x2:i,y:s,inset:o=0,insetRight:a=o,insetLeft:l=o}=n;super(t,{y:{value:s,scale:"y",optional:!0},x1:{value:r,scale:"x",optional:!0},x2:{value:i,scale:"x",optional:!0}},ld(n,"y"),t5),this.insetRight=Vt(a),this.insetLeft=Vt(l),cd(this,n)}render(t,n,r,i,s){const{x:o,y:a}=n,{y:l,x1:c,x2:u}=r,{width:f,height:d,marginTop:h,marginRight:p,marginLeft:g,marginBottom:v}=i,{insetLeft:y,insetRight:m}=this;return ne("svg:g",s).call(ke,this,i,s).call(ve,this,{y:l&&a},0,Tn).call(b=>b.selectAll().data(t).enter().append("line").call(Ee,this).attr("x1",c&&!fi(o)?w=>c[w]+y:g+y).attr("x2",u&&!fi(o)?o.bandwidth?w=>u[w]+o.bandwidth()-m:w=>u[w]-m:f-p-m).attr("y1",l?w=>l[w]:(h+d-v)/2).attr("y2",l?w=>l[w]:(h+d-v)/2).call(dn,this,r).call(Ey,this,r,s)).node()}}function Ya(e,t){let{x:n=gt,y:r,y1:i,y2:s,...o}=KC(t);return[i,s]=r5(r,i,s),new e5(e,{...o,x:n,y1:i,y2:s})}function qa(e,t){let{y:n=gt,x:r,x1:i,x2:s,...o}=QC(t);return[i,s]=r5(r,i,s),new n5(e,{...o,y:n,x1:i,x2:s})}function r5(e,t,n){if(e==null){if(t===void 0){if(n!==void 0)return[0,n]}else if(n===void 0)return[0,t]}else{if(t===void 0)return n===void 0?[0,e]:[e,n];if(n===void 0)return[e,t]}return[t,n]}function Nv(e,...t){let n=t.length;for(let r=0,i=!0;r<n;++r)typeof t[r]!="function"&&(i&&(e=e.slice(),i=!1),e.splice(r,2,e[r]+t[r]+e[r+1]),t.splice(r,1),--r,--n);return r=>{let i=e[0];for(let s=0;s<n;++s)i+=t[s](r)+e[s+1];return i}}const jst={ariaLabel:"text",strokeLinejoin:"round",strokeWidth:3,paintOrder:"stroke"},i5="­";class kv extends we{constructor(t,n={}){const{x:r,y:i,text:s=Ho(t)&&nC(t)?gt:Er,frameAnchor:o,textAnchor:a=/right$/i.test(o)?"end":/left$/i.test(o)?"start":"middle",lineAnchor:l=/^top/i.test(o)?"top":/^bottom/i.test(o)?"bottom":"middle",lineHeight:c=1,lineWidth:u=1/0,textOverflow:f,monospace:d,fontFamily:h=d?"ui-monospace, monospace":void 0,fontSize:p,fontStyle:g,fontVariant:v,fontWeight:y,rotate:m}=n,[b,w]=Ze(m,0),[S,_]=Wst(p);if(super(t,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},fontSize:{value:S,optional:!0},rotate:{value:Brt(b),optional:!0},text:{value:s,filter:L3,optional:!0}},n,jst),this.rotate=w,this.textAnchor=Ye(a,"middle"),this.lineAnchor=qr(l,"lineAnchor",["top","middle","bottom"]),this.lineHeight=+c,this.lineWidth=+u,this.textOverflow=s5(f),this.monospace=!!d,this.fontFamily=Rn(h),this.fontSize=_,this.fontStyle=Rn(g),this.fontVariant=Rn(v),this.fontWeight=Rn(y),this.frameAnchor=wy(o),!(this.lineWidth>=0))throw new Error(`invalid lineWidth: ${u}`);this.splitLines=c5(this),this.clipLine=u5(this)}render(t,n,r,i,s){const{x:o,y:a}=n,{x:l,y:c,rotate:u,text:f,title:d,fontSize:h}=r,{rotate:p}=this,[g,v]=Ws(this,i);return ne("svg:g",s).call(ke,this,i,s).call(l5,this,f,i).call(ve,this,{x:l&&o,y:c&&a}).call(y=>y.selectAll().data(t).enter().append("text").call(Ee,this).call(Vst,this,f,d).attr("transform",Nv`translate(${l?m=>l[m]:g},${c?m=>c[m]:v})${u?m=>` rotate(${u[m]})`:p?` rotate(${p})`:""}`).call(ut,"font-size",h&&(m=>h[m])).call(dn,this,r)).node()}}function s5(e){return e==null?null:qr(e,"textOverflow",["clip","ellipsis","clip-start","clip-end","ellipsis-start","ellipsis-middle","ellipsis-end"]).replace(/^(clip|ellipsis)$/,"$1-end")}function Vst(e,t,n,r){if(!n)return;const{lineAnchor:i,lineHeight:s,textOverflow:o,splitLines:a,clipLine:l}=t;e.each(function(c){const u=a(Ac(n[c])??"").map(l),f=u.length,d=i==="top"?.71:i==="bottom"?1-f:(164-f*100)/200;if(f>1){let h=0;for(let p=0;p<f;++p){if(++h,!u[p])continue;const g=this.ownerDocument.createElementNS(wc.svg,"tspan");g.setAttribute("x",0),p===h-1?g.setAttribute("y",`${(d+p)*s}em`):g.setAttribute("dy",`${h*s}em`),g.textContent=u[p],this.appendChild(g),h=0}}else d&&this.setAttribute("y",`${d*s}em`),this.textContent=u[0];if(o&&!r&&u[0]!==n[c]){const h=this.ownerDocument.createElementNS(wc.svg,"title");h.textContent=n[c],this.appendChild(h)}})}function Lf(e,{x:t,y:n,...r}={}){return r.frameAnchor===void 0&&([t,n]=Zi(t,n)),new kv(e,{...r,x:t,y:n})}function o5(e,{x:t=gt,...n}={}){return new kv(e,JC({...n,x:t}))}function a5(e,{y:t=gt,...n}={}){return new kv(e,ZC({...n,y:t}))}function l5(e,t,n){ut(e,"text-anchor",t.textAnchor),ut(e,"font-family",t.fontFamily),ut(e,"font-size",t.fontSize),ut(e,"font-style",t.fontStyle),ut(e,"font-variant",t.fontVariant===void 0?Yst(n):t.fontVariant),ut(e,"font-weight",t.fontWeight)}function Yst(e){return e&&(Ou(e)||Zn(e))?"tabular-nums":void 0}const qst=new Set(["inherit","initial","revert","unset","xx-small","x-small","small","medium","large","x-large","xx-large","xxx-large","larger","smaller"]);function Wst(e){return e==null||typeof e=="number"?[void 0,e]:typeof e!="string"?[e,void 0]:(e=e.trim().toLowerCase(),qst.has(e)||/^[+-]?\d*\.?\d+(e[+-]?\d+)?(\w*|%)$/.test(e)?[void 0,e]:[e,void 0])}function Hst(e,t,n){const r=[];let i,s=0;for(const[o,a,l]of Gst(e)){if(i===void 0&&(i=o),s>i&&n(e,i,a)>t&&(r.push(e.slice(i,s)+(e[s-1]===i5?"-":"")),i=o),l){r.push(e.slice(i,a)),i=void 0;continue}s=a}return r}function*Gst(e){let t=0,n=0;const r=e.length;for(;n<r;){let i=1;switch(e[n]){case i5:case"-":++n,yield[t,n,!1],t=n;break;case" ":for(yield[t,n,!1];e[++n]===" ";);t=n;break;case"\r":e[n+1]===`
`&&++i;case`
`:yield[t,n,!0],n+=i,t=n;break;default:++n;break}}yield[t,n,!0]}const V$={a:56,b:63,c:57,d:63,e:58,f:37,g:62,h:60,i:26,j:26,k:55,l:26,m:88,n:60,o:60,p:62,q:62,r:39,s:54,t:38,u:60,v:55,w:79,x:54,y:55,z:55,A:69,B:67,C:73,D:74,E:61,F:58,G:76,H:75,I:28,J:55,K:67,L:58,M:89,N:75,O:78,P:65,Q:78,R:67,S:65,T:65,U:75,V:69,W:98,X:69,Y:67,Z:67,0:64,1:48,2:62,3:64,4:66,5:63,6:65,7:58,8:65,9:65," ":29,"!":32,'"':49,"'":31,"(":39,")":39,",":31,"-":48,".":31,"/":32,":":31,";":31,"?":52,"‘":31,"’":31,"“":47,"”":47,"…":82};function wT(e,t=0,n=e.length){let r=0;for(let i=t;i<n;i=ud(e,i))r+=V$[e[i]]??(d5(e,i)?120:V$.e);return r}function _T(e,t=0,n=e.length){let r=0;for(let i=t;i<n;i=ud(e,i))r+=d5(e,i)?200:100;return r}function c5({monospace:e,lineWidth:t,textOverflow:n}){if(n!=null||t==1/0)return s=>s.split(/\r\n?|\n/g);const r=e?_T:wT,i=t*100;return s=>Hst(s,i,r)}function u5({monospace:e,lineWidth:t,textOverflow:n}){if(n==null||t==1/0)return s=>s;const r=e?_T:wT,i=t*100;switch(n){case"clip-start":return s=>q$(s,i,r,"");case"clip-end":return s=>Y$(s,i,r,"");case"ellipsis-start":return s=>q$(s,i,r,Ju);case"ellipsis-middle":return s=>Xst(s,i,r,Ju);case"ellipsis-end":return s=>Y$(s,i,r,Ju)}}const Ju="…";function Cf(e,t,n,r){const i=[];let s=0;for(let o=0,a=0,l=e.length;o<l;o=a){a=ud(e,o);const c=n(e,o,a);if(s+c>t){for(s+=r;s>t&&o>0;)a=o,o=i.pop(),s-=n(e,o,a);return[o,t-s]}s+=c,i.push(o)}return[-1,0]}function Y$(e,t,n,r){e=e.trim();const i=n(r),[s]=Cf(e,t,n,i);return s<0?e:e.slice(0,s).trimEnd()+r}function Xst(e,t,n,r){e=e.trim();const i=n(e);if(i<=t)return e;const s=n(r)/2,[o,a]=Cf(e,t/2,n,s),[l]=Cf(e,i-t/2-a+s,n,-s);return l<0?r:e.slice(0,o).trimEnd()+r+e.slice(ud(e,l)).trimStart()}function q$(e,t,n,r){e=e.trim();const i=n(e);if(i<=t)return e;const s=n(r),[o]=Cf(e,i-t+s,n,-s);return o<0?r:r+e.slice(ud(e,o)).trimStart()}const KS=/[\p{Combining_Mark}\p{Emoji_Modifier}]+/uy,W$=new RegExp("\\p{Extended_Pictographic}","uy");function ud(e,t){return t+=Qst(e,t)?2:1,Zst(e,t)&&(t=KS.lastIndex),Kst(e,t)?ud(e,t+1):t}function f5(e,t){return e.charCodeAt(t)<128}function Qst(e,t){const n=e.charCodeAt(t);if(n>=55296&&n<56320){const r=e.charCodeAt(t+1);return r>=56320&&r<57344}return!1}function Kst(e,t){return e.charCodeAt(t)===8205}function Zst(e,t){return f5(e,t)?!1:(KS.lastIndex=t,KS.test(e))}function d5(e,t){return f5(e,t)?!1:(W$.lastIndex=t,W$.test(e))}const h5={ariaLabel:"vector",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinejoin:"round",strokeLinecap:"round"},p5=3.5,Jst=p5*5,y5={draw(e,t,n){const r=t*n/Jst;e.moveTo(0,0),e.lineTo(0,-t),e.moveTo(-r,r-t),e.lineTo(0,-t),e.lineTo(r,r-t)}},m5={draw(e,t,n){e.moveTo(-n,0),e.lineTo(0,-t),e.lineTo(n,0)}},tot=new Map([["arrow",y5],["spike",m5]]);function eot(e){return e&&typeof e.draw=="function"}function not(e){if(eot(e))return e;const t=tot.get(`${e}`.toLowerCase());if(t)return t;throw new Error(`invalid shape: ${e}`)}let Dv=class extends we{constructor(t,n={}){const{x:r,y:i,r:s=p5,length:o,rotate:a,shape:l=y5,anchor:c="middle",frameAnchor:u}=n,[f,d]=Ze(o,12),[h,p]=Ze(a,0);super(t,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},length:{value:f,scale:"length",optional:!0},rotate:{value:h,optional:!0}},n,h5),this.r=+s,this.length=d,this.rotate=p,this.shape=not(l),this.anchor=qr(c,"anchor",["start","middle","end"]),this.frameAnchor=wy(u)}render(t,n,r,i,s){const{x:o,y:a}=n,{x:l,y:c,length:u,rotate:f}=r,{length:d,rotate:h,anchor:p,shape:g,r:v}=this,[y,m]=Ws(this,i);return ne("svg:g",s).call(ke,this,i,s).call(ve,this,{x:l&&o,y:c&&a}).call(b=>b.selectAll().data(t).enter().append("path").call(Ee,this).attr("transform",Nv`translate(${l?w=>l[w]:y},${c?w=>c[w]:m})${f?w=>` rotate(${f[w]})`:h?` rotate(${h})`:""}${p==="start"?"":p==="end"?u?w=>` translate(0,${u[w]})`:` translate(0,${d})`:u?w=>` translate(0,${u[w]/2})`:` translate(0,${d/2})`}`).attr("d",u?w=>{const S=So();return g.draw(S,u[w],v),S}:(()=>{const w=So();return g.draw(w,d,v),w})()).call(dn,this,r)).node()}};function g5(e,t={}){let{x:n,y:r,...i}=t;return t.frameAnchor===void 0&&([n,r]=Zi(n,r)),new Dv(e,{...i,x:n,y:r})}function b5(e,t={}){const{x:n=gt,...r}=t;return new Dv(e,{...r,x:n})}function v5(e,t={}){const{y:n=gt,...r}=t;return new Dv(e,{...r,y:n})}function rot(e,t={}){const{shape:n=m5,stroke:r=h5.stroke,strokeWidth:i=1,fill:s=r,fillOpacity:o=.3,anchor:a="start",...l}=t;return g5(e,{...l,shape:n,stroke:r,strokeWidth:i,fill:s,fillOpacity:o,anchor:a})}function fl(e,t){return arguments.length<2&&!Ho(e)&&(t=e,e=null),t===void 0&&(t={}),[e,t]}function Ov({anchor:e}={},t){return e===void 0?t[0]:qr(e,"anchor",t)}function w5(e){return Ov(e,["left","right"])}function _5(e){return Ov(e,["right","left"])}function S5(e){return Ov(e,["bottom","top"])}function x5(e){return Ov(e,["top","bottom"])}function ST(){const[e,t]=fl(...arguments);return E5("y",w5(t),e,t)}function I5(){const[e,t]=fl(...arguments);return E5("fy",_5(t),e,t)}function xT(){const[e,t]=fl(...arguments);return A5("x",S5(t),e,t)}function T5(){const[e,t]=fl(...arguments);return A5("fx",x5(t),e,t)}function E5(e,t,n,{color:r="currentColor",opacity:i=1,stroke:s=r,strokeOpacity:o=i,strokeWidth:a=1,fill:l=r,fillOpacity:c=i,textAnchor:u,textStroke:f,textStrokeOpacity:d,textStrokeWidth:h,tickSize:p=e==="y"?6:0,tickPadding:g,tickRotate:v,x:y,margin:m,marginTop:b=m===void 0?20:m,marginRight:w=m===void 0?t==="right"?40:0:m,marginBottom:S=m===void 0?20:m,marginLeft:_=m===void 0?t==="left"?40:0:m,label:x,labelAnchor:E,labelArrow:N,labelOffset:I,...A}){return p=Vt(p),g=Vt(g),v=Vt(v),E!==void 0&&(E=qr(E,"labelAnchor",["center","top","bottom"])),N=U5(N),Gi(p&&!He(s)?iot(e,t,n,{stroke:s,strokeOpacity:o,strokeWidth:a,tickSize:p,tickPadding:g,tickRotate:v,x:y,...A}):null,He(l)?null:oot(e,t,n,{fill:l,fillOpacity:c,stroke:f,strokeOpacity:d,strokeWidth:h,textAnchor:u,tickSize:p,tickPadding:g,tickRotate:v,x:y,marginTop:b,marginRight:w,marginBottom:S,marginLeft:_,...A}),!He(l)&&x!==null?Lf([],B5({fill:l,fillOpacity:c,...A},function(D,R,T,M,$){const B=M[e],{marginTop:O,marginRight:C,marginBottom:F,marginLeft:P}=e==="y"&&$.inset||$,z=E??(B.bandwidth?"center":"top"),H=I??(t==="right"?C:P)-3;return z==="center"?(this.textAnchor=void 0,this.lineAnchor=t==="right"?"bottom":"top",this.frameAnchor=t,this.rotate=-90):(this.textAnchor=t==="right"?"end":"start",this.lineAnchor=z,this.frameAnchor=`${z}-${t}`,this.rotate=0),this.dy=z==="top"?3-O:z==="bottom"?F-3:0,this.dx=t==="right"?H:-H,this.ariaLabel=`${e}-axis label`,{facets:[[0]],channels:{text:{value:[C5(e,B,{anchor:t,label:x,labelAnchor:z,labelArrow:N})]}}}})):null)}function A5(e,t,n,{color:r="currentColor",opacity:i=1,stroke:s=r,strokeOpacity:o=i,strokeWidth:a=1,fill:l=r,fillOpacity:c=i,textAnchor:u,textStroke:f,textStrokeOpacity:d,textStrokeWidth:h,tickSize:p=e==="x"?6:0,tickPadding:g,tickRotate:v,y,margin:m,marginTop:b=m===void 0?t==="top"?30:0:m,marginRight:w=m===void 0?20:m,marginBottom:S=m===void 0?t==="bottom"?30:0:m,marginLeft:_=m===void 0?20:m,label:x,labelAnchor:E,labelArrow:N,labelOffset:I,...A}){return p=Vt(p),g=Vt(g),v=Vt(v),E!==void 0&&(E=qr(E,"labelAnchor",["center","left","right"])),N=U5(N),Gi(p&&!He(s)?sot(e,t,n,{stroke:s,strokeOpacity:o,strokeWidth:a,tickSize:p,tickPadding:g,tickRotate:v,y,...A}):null,He(l)?null:aot(e,t,n,{fill:l,fillOpacity:c,stroke:f,strokeOpacity:d,strokeWidth:h,textAnchor:u,tickSize:p,tickPadding:g,tickRotate:v,y,marginTop:b,marginRight:w,marginBottom:S,marginLeft:_,...A}),!He(l)&&x!==null?Lf([],B5({fill:l,fillOpacity:c,...A},function(D,R,T,M,$){const B=M[e],{marginTop:O,marginRight:C,marginBottom:F,marginLeft:P}=e==="x"&&$.inset||$,z=E??(B.bandwidth?"center":"right"),H=I??(t==="top"?O:F)-3;return z==="center"?(this.frameAnchor=t,this.textAnchor=void 0):(this.frameAnchor=`${t}-${z}`,this.textAnchor=z==="right"?"end":"start"),this.lineAnchor=t,this.dy=t==="top"?-H:H,this.dx=z==="right"?C-3:z==="left"?3-P:0,this.ariaLabel=`${e}-axis label`,{facets:[[0]],channels:{text:{value:[C5(e,B,{anchor:t,label:x,labelAnchor:z,labelArrow:N})]}}}})):null)}function iot(e,t,n,{strokeWidth:r=1,strokeLinecap:i=null,strokeLinejoin:s=null,facetAnchor:o=t+(e==="y"?"-empty":""),frameAnchor:a=t,tickSize:l,inset:c=0,insetLeft:u=c,insetRight:f=c,dx:d=0,y:h=e==="y"?void 0:null,...p}){return fd(v5,e,t,`${e}-axis tick`,n,{strokeWidth:r,strokeLinecap:i,strokeLinejoin:s,facetAnchor:o,frameAnchor:a,y:h,...p,dx:t==="left"?+d-Tn+ +u:+d+Tn-f,anchor:"start",length:l,shape:t==="left"?fot:dot})}function sot(e,t,n,{strokeWidth:r=1,strokeLinecap:i=null,strokeLinejoin:s=null,facetAnchor:o=t+(e==="x"?"-empty":""),frameAnchor:a=t,tickSize:l,inset:c=0,insetTop:u=c,insetBottom:f=c,dy:d=0,x:h=e==="x"?void 0:null,...p}){return fd(b5,e,t,`${e}-axis tick`,n,{strokeWidth:r,strokeLinejoin:s,strokeLinecap:i,facetAnchor:o,frameAnchor:a,x:h,...p,dy:t==="bottom"?+d-Tn-f:+d+Tn+ +u,anchor:"start",length:l,shape:t==="bottom"?cot:uot})}function oot(e,t,n,{facetAnchor:r=t+(e==="y"?"-empty":""),frameAnchor:i=t,tickSize:s,tickRotate:o=0,tickPadding:a=Math.max(3,9-s)+(Math.abs(o)>60?4*Math.cos(o*E1):0),text:l,textAnchor:c=Math.abs(o)>60?"middle":t==="left"?"end":"start",lineAnchor:u=o>60?"top":o<-60?"bottom":"middle",fontVariant:f,inset:d=0,insetLeft:h=d,insetRight:p=d,dx:g=0,y:v=e==="y"?void 0:null,...y}){return fd(a5,e,t,`${e}-axis tick label`,n,{facetAnchor:r,frameAnchor:i,text:l,textAnchor:c,lineAnchor:u,fontVariant:f,rotate:o,y:v,...y,dx:t==="left"?+g-s-a+ +h:+g+ +s+ +a-p},function(m,b,w,S,_){f===void 0&&(this.fontVariant=L5(m)),l===void 0&&(_.text=R5(m,b,w,S,t))})}function aot(e,t,n,{facetAnchor:r=t+(e==="x"?"-empty":""),frameAnchor:i=t,tickSize:s,tickRotate:o=0,tickPadding:a=Math.max(3,9-s)+(Math.abs(o)>=10?4*Math.cos(o*E1):0),text:l,textAnchor:c=Math.abs(o)>=10?o<0^t==="bottom"?"start":"end":"middle",lineAnchor:u=Math.abs(o)>=10?"middle":t==="bottom"?"top":"bottom",fontVariant:f,inset:d=0,insetTop:h=d,insetBottom:p=d,dy:g=0,x:v=e==="x"?void 0:null,...y}){return fd(o5,e,t,`${e}-axis tick label`,n,{facetAnchor:r,frameAnchor:i,text:l===void 0?null:l,textAnchor:c,lineAnchor:u,fontVariant:f,rotate:o,x:v,...y,dy:t==="bottom"?+g+ +s+ +a-p:+g-s-a+ +h},function(m,b,w,S,_){f===void 0&&(this.fontVariant=L5(m)),l===void 0&&(_.text=R5(m,b,w,S,t))})}function M5(){const[e,t]=fl(...arguments);return D5("y",w5(t),e,t)}function $5(){const[e,t]=fl(...arguments);return D5("fy",_5(t),e,t)}function N5(){const[e,t]=fl(...arguments);return O5("x",S5(t),e,t)}function k5(){const[e,t]=fl(...arguments);return O5("fx",x5(t),e,t)}function D5(e,t,n,{y:r=e==="y"?void 0:null,x:i=null,x1:s=t==="left"?i:null,x2:o=t==="right"?i:null,...a}){return fd(qa,e,t,`${e}-grid`,n,{y:r,x1:s,x2:o,...F5(a)})}function O5(e,t,n,{x:r=e==="x"?void 0:null,y:i=null,y1:s=t==="top"?i:null,y2:o=t==="bottom"?i:null,...a}){return fd(Ya,e,t,`${e}-grid`,n,{x:r,y1:s,y2:o,...F5(a)})}function F5({color:e="currentColor",opacity:t=.1,stroke:n=e,strokeOpacity:r=t,strokeWidth:i=1,...s}){return{stroke:n,strokeOpacity:r,strokeWidth:i,...s}}function B5({fill:e,fillOpacity:t,fontFamily:n,fontSize:r,fontStyle:i,fontVariant:s,fontWeight:o,monospace:a,pointerEvents:l,shapeRendering:c,clip:u=!1},f){return[,e]=wr(e),[,t]=Ze(t),{facet:"super",x:null,y:null,fill:e,fillOpacity:t,fontFamily:n,fontSize:r,fontStyle:i,fontVariant:s,fontWeight:o,monospace:a,pointerEvents:l,shapeRendering:c,clip:u,initializer:f}}function fd(e,t,n,r,i,s,o){let a;function l(f,d,h,p,g,v){const y=f==null&&(t==="fx"||t==="fy"),{[t]:m}=p;if(!m)throw new Error(`missing scale: ${t}`);const b=m.domain();let{interval:w,ticks:S,tickFormat:_,tickSpacing:x=t==="x"?80:35}=s;if(typeof S=="string"&&P5(m)&&(w=S,S=void 0),S===void 0&&(S=ad(w,m.type)??lot(m,x)),f==null){if(Ho(S))f=_r(S);else if(Du(S))f=S_(S,...mn(b));else if(m.interval){let N=m.interval;if(m.ticks){const[I,A]=mn(b),D=(A-I)/N[my];N=v$(N,D/S)??N,f=S_(N,I,A)}else{f=b;const I=f.length;N=v$(N,I/S)??N,N!==m.interval&&(f=S_(N,...mn(f)))}if(N===m.interval){const I=Math.round(f.length/S);I>1&&(f=f.filter((A,D)=>D%I===0))}}else m.ticks?f=m.ticks(S):f=b;if(!m.ticks&&f.length&&f!==b){const N=new ny(b);f=f.filter(I=>N.has(I)),f.length||$o(`Warning: the ${t}-axis ticks appear to not align with the scale domain, resulting in no ticks. Try different ticks?`)}t==="y"||t==="x"?d=[qo(f)]:a[t]={scale:t,value:gt}}o==null||o.call(this,m,f,S,_,a);const E=Object.fromEntries(Object.entries(a).map(([N,I])=>[N,{...I,value:Pt(f,I.value)}]));return y&&(d=v.filterFacets(f,E)),{data:f,facets:d,channels:E}}const c=Sr(s).initializer,u=e(i,Sr({...s,initializer:l},c));return i==null?(a=u.channels,u.channels={}):a={},u.ariaLabel=r,u.clip===void 0&&(u.clip=!1),u}function lot(e,t){const[n,r]=mn(e.range());return(r-n)/t}function R5(e,t,n,r,i){return{value:IT(e,t,n,r,i)}}function IT(e,t,n,r,i){return typeof r=="function"?r:r===void 0&&t&&Zn(t)?Ert(t,i)??Ac:e.tickFormat?e.tickFormat(typeof n=="number"?n:null,r):r===void 0?Ac:typeof r=="string"?(Zn(e.domain())?py:sd)(r):Pr(r)}function S_(e,t,n){return e.range(t,e.offset(e.floor(n)))}const cot={draw(e,t){e.moveTo(0,0),e.lineTo(0,t)}},uot={draw(e,t){e.moveTo(0,0),e.lineTo(0,-t)}},fot={draw(e,t){e.moveTo(0,0),e.lineTo(-t,0)}},dot={draw(e,t){e.moveTo(0,0),e.lineTo(t,0)}};function L5(e){return e.bandwidth&&!e.interval?void 0:"tabular-nums"}function hot(e){return Math.sign(Rf(e.domain()))*Math.sign(Rf(e.range()))}function C5(e,t,{anchor:n,label:r=t.label,labelAnchor:i,labelArrow:s}={}){if(!(r==null||r.inferred&&P5(t)&&/^(date|time|year)$/i.test(r))){if(r=String(r),s==="auto"&&(s=(!t.bandwidth||t.interval)&&!/[↑↓→←]/.test(r)),!s)return r;if(s===!0){const o=hot(t);o&&(s=/x$/.test(e)||i==="center"?/x$/.test(e)===o<0?"left":"right":o<0?"up":"down")}switch(s){case"left":return`← ${r}`;case"right":return`${r} →`;case"up":return n==="right"?`${r} ↑`:`↑ ${r}`;case"down":return n==="right"?`${r} ↓`:`↓ ${r}`}return r}}function U5(e="auto"){return He(e)?!1:typeof e=="boolean"?e:qr(e,"labelArrow",["auto","up","right","down","left"])}function P5(e){return Zn(e.domain())}function H$(e,t){if(t==null)return t;const n=e(t);if(!n)throw new Error(`scale not found: ${t}`);return n}function pot(e,{opacity:t,...n}={}){if(!Bc(e)&&!CC(e))throw new Error(`swatches legend requires ordinal or threshold color scale (not ${e.type})`);return z5(e,n,(r,i,s,o)=>r.append("svg").attr("width",s).attr("height",o).attr("fill",i.scale).attr("fill-opacity",Ze(t)[1]).append("rect").attr("width","100%").attr("height","100%"))}function yot(e,{fill:t=(c=>(c=e.hint)==null?void 0:c.fill)()!==void 0?e.hint.fill:"none",fillOpacity:n=1,stroke:r=(u=>(u=e.hint)==null?void 0:u.stroke)()!==void 0?e.hint.stroke:He(t)?"currentColor":"none",strokeOpacity:i=1,strokeWidth:s=1.5,r:o=4.5,...a}={},l){const[f,d]=wr(t),[h,p]=wr(r),g=H$(l,f),v=H$(l,h),y=o*o*Math.PI;return n=Ze(n)[1],i=Ze(i)[1],s=Ze(s)[1],z5(e,a,(m,b,w,S)=>m.append("svg").attr("viewBox","-8 -8 16 16").attr("width",w).attr("height",S).attr("fill",f==="color"?_=>g.scale(_):d).attr("fill-opacity",n).attr("stroke",h==="color"?_=>v.scale(_):p).attr("stroke-opacity",i).attr("stroke-width",s).append("path").attr("d",_=>{const x=So();return e.scale(_).draw(x,y),x}))}function z5(e,t={},n){let{columns:r,tickFormat:i,fontVariant:s=VC(e),swatchSize:o=15,swatchWidth:a=o,swatchHeight:l=o,marginLeft:c=0,className:u,style:f,width:d}=t;const h=Iv(t);u=cT(u),i=IT(e.scale,e.domain,void 0,i);const p=ne("div",h).attr("class",`${u}-swatches ${u}-swatches-${r!=null?"columns":"wrap"}`);let g;return r!=null?(g=`.${u}-swatches-columns .${u}-swatch {
  display: flex;
  align-items: center;
  break-inside: avoid;
  padding-bottom: 1px;
}
.${u}-swatches-columns .${u}-swatch::before {
  flex-shrink: 0;
}
.${u}-swatches-columns .${u}-swatch-label {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}`,p.style("columns",r).selectAll().data(e.domain).enter().append("div").attr("class",`${u}-swatch`).call(n,e,a,l).call(v=>v.append("div").attr("class",`${u}-swatch-label`).attr("title",i).text(i))):(g=`.${u}-swatches-wrap {
  display: flex;
  align-items: center;
  min-height: 33px;
  flex-wrap: wrap;
}
.${u}-swatches-wrap .${u}-swatch {
  display: inline-flex;
  align-items: center;
  margin-right: 1em;
}`,p.selectAll().data(e.domain).enter().append("span").attr("class",`${u}-swatch`).call(n,e,a,l).append(function(){return this.ownerDocument.createTextNode(i.apply(this,arguments))})),p.call(v=>v.insert("style","*").text(`.${u}-swatches {
  font-family: system-ui, sans-serif;
  font-size: 10px;
  margin-bottom: 0.5em;
}
.${u}-swatch > svg {
  margin-right: 0.5em;
  overflow: visible;
}
${g}`)).style("margin-left",c?`${+c}px`:null).style("width",d===void 0?null:`${+d}px`).style("font-variant",Ye(s,"normal")).call(uT,f).node()}const A1=new Map([["symbol",yot],["color",j5],["opacity",bot]]);function mot(e={}){for(const[t,n]of A1){const r=e[t];if(sc(r)){const i=Iv(e);let s;if(t==="symbol"){const{fill:o,stroke:a=o===void 0&&sc(e.color)?"color":void 0}=e;s={fill:o,stroke:a}}return n(XS(t,r,s),TT(i,r,e),o=>sc(e[o])?XS(o,e[o]):null)}}throw new Error("unknown legend type; no scale found")}function got(e,t,n={}){return(r,i)=>{if(!A1.has(r))throw new Error(`unknown legend type: ${r}`);if(r in e)return A1.get(r)(e[r],TT(t,n[r],i),s=>e[s])}}function TT({className:e,...t},{label:n,ticks:r,tickFormat:i}={},s){return jrt(s,{className:e,...t},{label:n,ticks:r,tickFormat:i})}function j5(e,{legend:t=!0,...n}){if(t===!0&&(t=e.type==="ordinal"?"swatches":"ramp"),e.domain!==void 0)switch(`${t}`.toLowerCase()){case"swatches":return pot(e,n);case"ramp":return Lst(e,n);default:throw new Error(`unknown legend type: ${t}`)}}function bot({type:e,interpolate:t,...n},{legend:r=!0,color:i=bi(0,0,0),...s}){if(!t)throw new Error(`${e} opacity scales are not supported`);if(r===!0&&(r="ramp"),`${r}`.toLowerCase()!=="ramp")throw new Error(`${r} opacity legends are not supported`);return j5({type:e,...n,interpolate:vot(i)},{legend:r,...s})}function vot(e){const{r:t,g:n,b:r}=bi(e)||bi(0,0,0);return i=>`rgba(${t},${n},${r},${i})`}function wot(e,t,n){const r=[];for(const[i,s]of A1){const o=n[i];if(o!=null&&o.legend&&i in e){const a=s(e[i],TT(t,e[i],o),l=>e[l]);a!=null&&r.push(a)}}return r}const _ot={ariaLabel:"frame",fill:"none",stroke:"currentColor",clip:!1},Sot={ariaLabel:"frame",fill:null,stroke:"currentColor",strokeLinecap:"square",clip:!1};class V5 extends we{constructor(t={}){const{anchor:n=null,inset:r=0,insetTop:i=r,insetRight:s=r,insetBottom:o=r,insetLeft:a=r,rx:l,ry:c}=t;super(kh,void 0,t,n==null?_ot:Sot),this.anchor=QL(n,"anchor",["top","right","bottom","left"]),this.insetTop=Vt(i),this.insetRight=Vt(s),this.insetBottom=Vt(o),this.insetLeft=Vt(a),this.rx=Vt(l),this.ry=Vt(c)}render(t,n,r,i,s){const{marginTop:o,marginRight:a,marginBottom:l,marginLeft:c,width:u,height:f}=i,{anchor:d,insetTop:h,insetRight:p,insetBottom:g,insetLeft:v,rx:y,ry:m}=this,b=c+v,w=u-a-p,S=o+h,_=f-l-g;return ne(d?"svg:line":"svg:rect",s).datum(0).call(ke,this,i,s).call(Ee,this).call(dn,this,r).call(ve,this,{}).call(d==="left"?x=>x.attr("x1",b).attr("x2",b).attr("y1",S).attr("y2",_):d==="right"?x=>x.attr("x1",w).attr("x2",w).attr("y1",S).attr("y2",_):d==="top"?x=>x.attr("x1",b).attr("x2",w).attr("y1",S).attr("y2",S):d==="bottom"?x=>x.attr("x1",b).attr("x2",w).attr("y1",_).attr("y2",_):x=>x.attr("x",b).attr("y",S).attr("width",w-b).attr("height",_-S).attr("rx",y).attr("ry",m)).node()}}function ET(e){return new V5(e)}const x_={ariaLabel:"tip",fill:"white",stroke:"currentColor"},xot=new Set(["geometry","href","src","ariaLabel","scales"]);class Y5 extends we{constructor(t,n={}){n.tip&&(n={...n,tip:!1}),n.title===void 0&&Ho(t)&&nC(t)&&(n={...n,title:gt});const{x:r,y:i,x1:s,x2:o,y1:a,y2:l,anchor:c,monospace:u,fontFamily:f=u?"ui-monospace, monospace":void 0,fontSize:d,fontStyle:h,fontVariant:p,fontWeight:g,lineHeight:v=1,lineWidth:y=20,frameAnchor:m,format:b,textAnchor:w="start",textOverflow:S,textPadding:_=8,title:x,pointerSize:E=12,pathFilter:N="drop-shadow(0 3px 4px rgba(0,0,0,0.2))"}=n;super(t,{x:{value:s!=null&&o!=null?null:r,scale:"x",optional:!0},y:{value:a!=null&&l!=null?null:i,scale:"y",optional:!0},x1:{value:s,scale:"x",optional:o==null},y1:{value:a,scale:"y",optional:l==null},x2:{value:o,scale:"x",optional:s==null},y2:{value:l,scale:"y",optional:a==null},title:{value:x,optional:!0}},n,x_),this.anchor=rC(c,"anchor"),this.previousAnchor=this.anchor??"top-left",this.frameAnchor=wy(m),this.textAnchor=Ye(w,"middle"),this.textPadding=+_,this.pointerSize=+E,this.pathFilter=Rn(N),this.lineHeight=+v,this.lineWidth=+y,this.textOverflow=s5(S),this.monospace=!!u,this.fontFamily=Rn(f),this.fontSize=Vt(d),this.fontStyle=Rn(h),this.fontVariant=Rn(p),this.fontWeight=Rn(g);for(const I in x_)I in this.channels&&(this[I]=x_[I]);this.splitLines=c5(this),this.clipLine=u5(this),this.format={...b}}render(t,n,r,i,s){const o=this,{x:a,y:l,fx:c,fy:u}=n,{ownerSVGElement:f,document:d}=s,{anchor:h,monospace:p,lineHeight:g,lineWidth:v}=this,{textPadding:y,pointerSize:m,pathFilter:b}=this,{marginTop:w,marginLeft:S}=i,{x1:_,y1:x,x2:E,y2:N,x:I=_??E,y:A=x??N}=r,D=c?c(t.fx)-S:0,R=u?u(t.fy)-w:0,[T,M]=Ws(this,i),$=zC(r,T),B=jC(r,M),O=p?_T:wT,C=O(Ju);let F,P;"title"in r?(F=r.channels,P=Mot):(F=Aot.call(this,r,n),P=$ot);const z=ne("svg:g",s).call(ke,this,i,s).call(l5,this).call(ve,this,{x:I&&a,y:A&&l}).call(tt=>tt.selectAll().data(t).enter().append("g").attr("transform",Z=>`translate(${Math.round($(Z))},${Math.round(B(Z))})`).call(Ee,this).call(Z=>Z.append("path").attr("filter",b)).call(Z=>Z.append("text").each(function(Y){const Q=me(this);this.setAttribute("fill","currentColor"),this.setAttribute("fill-opacity",1),this.setAttribute("stroke","none");const V=P.call(o,Y,t,F,n,r);if(typeof V=="string")for(const J of o.splitLines(V))H(Q,{value:o.clipLine(J)});else{const J=new Set;for(const et of V){const{label:j=""}=et;j&&J.has(j)||(J.add(j),H(Q,et))}}})));function H(tt,{label:Z,value:Y,color:Q,opacity:V}){Z??(Z=""),Y??(Y="");const J=Q!=null||V!=null;let et,j=v*100;const[At]=Cf(Z,j,O,C);if(At>=0)Z=Z.slice(0,At).trimEnd()+Ju,et=Y.trim(),Y="";else{(Z||!Y&&!J)&&(Y=" "+Y);const[Yt]=Cf(Y,j-O(Z),O,C);Yt>=0&&(Y=Y.slice(0,Yt).trimEnd()+Ju,et=Y.trim())}const ot=tt.append("tspan").attr("x",0).attr("dy",`${g}em`).text("​");Z&&ot.append("tspan").attr("font-weight","bold").text(Z),Y&&ot.append(()=>d.createTextNode(Y)),J&&ot.append("tspan").text(" ■").attr("fill",Q).attr("fill-opacity",V).style("user-select","none"),et&&ot.append("title").text(et)}function X(){const{width:tt,height:Z}=i.facet??i;z.selectChildren().each(function(Y){let{x:Q,width:V,height:J}=this.getBBox();V=Math.round(V),J=Math.round(J);let et=h;if(et===void 0){et=o.previousAnchor;const ot=$(Y)+D,Yt=B(Y)+R,Ht=ot+V+y*2<tt,st=ot-V-y*2>0,he=Yt+J+m+y*2+7<Z,ts=Yt-J-m-y*2>0,Wr=(/-left$/.test(et)?Ht||!st:Ht&&!st)?"left":"right",Qv=(/^top-/.test(et)?he||!ts:he&&!ts)?"top":"bottom";et=o.previousAnchor=`${Qv}-${Wr}`}const j=this.firstChild,At=this.lastChild;if(j.setAttribute("d",Eot(et,m,y,V,J)),Q)for(const ot of At.childNodes)ot.setAttribute("x",-Q);At.setAttribute("y",`${+Iot(et,At.childNodes.length,g).toFixed(6)}em`),At.setAttribute("transform",`translate(${Tot(et,m,y,V,J)})`)}),z.attr("visibility",null)}return t.length&&(z.attr("visibility","hidden"),f.isConnected?Promise.resolve().then(X):typeof requestAnimationFrame<"u"&&requestAnimationFrame(X)),z.node()}}function q5(e,{x:t,y:n,...r}={}){return r.frameAnchor===void 0&&([t,n]=Zi(t,n)),new Y5(e,{...r,x:t,y:n})}function Iot(e,t,n){return/^top(?:-|$)/.test(e)?.94-n:-.29-t*n}function Tot(e,t,n,r,i){switch(e){case"middle":return[-r/2,i/2];case"top-left":return[n,t+n];case"top":return[-r/2,t/2+n];case"top-right":return[-r-n,t+n];case"right":return[-t/2-r-n,i/2];case"bottom-left":return[n,-t-n];case"bottom":return[-r/2,-t/2-n];case"bottom-right":return[-r-n,-t-n];case"left":return[n+t/2,i/2]}}function Eot(e,t,n,r,i){const s=r+n*2,o=i+n*2;switch(e){case"middle":return`M${-s/2},${-o/2}h${s}v${o}h${-s}z`;case"top-left":return`M0,0l${t},${t}h${s-t}v${o}h${-s}z`;case"top":return`M0,0l${t/2},${t/2}h${(s-t)/2}v${o}h${-s}v${-o}h${(s-t)/2}z`;case"top-right":return`M0,0l${-t},${t}h${t-s}v${o}h${s}z`;case"right":return`M0,0l${-t/2},${-t/2}v${t/2-o/2}h${-s}v${o}h${s}v${t/2-o/2}z`;case"bottom-left":return`M0,0l${t},${-t}h${s-t}v${-o}h${-s}z`;case"bottom":return`M0,0l${t/2},${-t/2}h${(s-t)/2}v${-o}h${-s}v${o}h${(s-t)/2}z`;case"bottom-right":return`M0,0l${-t},${-t}h${t-s}v${-o}h${s}z`;case"left":return`M0,0l${t/2},${-t/2}v${t/2-o/2}h${s}v${o}h${-s}v${t/2-o/2}z`}}function Aot({channels:e},t){var i,s;const n={};let r=this.format;r=G$(r,e,"x"),r=G$(r,e,"y"),this.format=r;for(const o in r){const a=r[o];if(!(a===null||a===!1))if(o==="fx"||o==="fy")n[o]=!0;else{const l=qS(e,o);l&&(n[o]=l)}}for(const o in e){if(o in n||o in r||xot.has(o))continue;const a=qS(e,o);a&&(n[o]=a)}this.facet&&(t.fx&&!("fx"in r)&&(n.fx=!0),t.fy&&!("fy"in r)&&(n.fy=!0));for(const o in n){const a=this.format[o];if(typeof a=="string"){const l=((i=n[o])==null?void 0:i.value)??((s=t[o])==null?void 0:s.domain())??[];this.format[o]=(Zn(l)?py:sd)(a)}else if(a===void 0||a===!0){const l=t[o];this.format[o]=l!=null&&l.bandwidth?IT(l,l.domain()):Ac}}return n}function G$(e,t,n){if(!(n in e))return e;const r=`${n}1`,i=`${n}2`;if((r in e||!(r in t))&&(i in e||!(i in t)))return e;const s=Object.entries(e),o=e[n];return s.splice(s.findIndex(([a])=>a===n)+1,0,[r,o],[i,o]),Object.fromEntries(s)}function Mot(e,t,{title:n}){return Ac(n.value[e],e)}function*$ot(e,t,n,r,i){for(const s in n){if(s==="fx"||s==="fy"){yield{label:M1(r,n,s),value:this.format[s](t[s],e)};continue}if(s==="x1"&&"x2"in n||s==="y1"&&"y2"in n)continue;const o=n[s];if(s==="x2"&&"x1"in n)yield{label:Q$(r,n,"x"),value:X$(this.format.x2,n.x1,o,e)};else if(s==="y2"&&"y1"in n)yield{label:Q$(r,n,"y"),value:X$(this.format.y2,n.y1,o,e)};else{const a=o.value[e],l=o.scale;if(!Qn(a)&&l==null)continue;yield{label:M1(r,n,s),value:this.format[s](a,e),color:l==="color"?i[s][e]:null,opacity:l==="opacity"?i[s][e]:null}}}}function X$(e,t,n,r){var i;return(i=n.hint)!=null&&i.length?`${e(n.value[r]-t.value[r],r)}`:`${e(t.value[r],r)}–${e(n.value[r],r)}`}function Q$(e,t,n){const r=M1(e,t,`${n}1`,n),i=M1(e,t,`${n}2`,n);return r===i?r:`${r}–${i}`}function M1(e,t,n,r=n){const i=t[n],s=e[(i==null?void 0:i.scale)??n];return String((s==null?void 0:s.label)??(i==null?void 0:i.label)??r)}function AT(e={}){var C;const{facet:t,style:n,title:r,subtitle:i,caption:s,ariaLabel:o,ariaDescription:a}=e,l=cT(e.className),c=e.marks===void 0?[]:Z$(e.marks);c.push(...Lot(c));const u=Bot(t,e),f=new Map;for(const F of c){const P=J$(F,u,e);P&&f.set(F,P)}const d=new Map;u&&Pd(d,[u],e),Pd(d,f,e);const h=Z$(Cot(c,d,e));for(const F of h){const P=J$(F,u,e);P&&f.set(F,P)}c.unshift(...h);let p=xst(d,e);if(p!==void 0){const F=u?w_(p,u):void 0;for(const z of c){if(z.facet===null||z.facet==="super")continue;const H=f.get(z);H!==void 0&&(H.facetsIndex=z.fx!=null||z.fy!=null?w_(p,H):F)}const P=new Set;for(const{facetsIndex:z}of f.values())z==null||z.forEach((H,X)=>{(H==null?void 0:H.length)>0&&P.add(X)});p.forEach(0<P.size&&P.size<p.length?(z,H)=>z.empty=!P.has(H):z=>z.empty=!1);for(const z of c)if(z.facet==="exclude"){const H=f.get(z);H!==void 0&&(H.facetsIndex=Est(H.facetsIndex))}}for(const F of Ce.keys())sc(e[F])&&F!=="fx"&&F!=="fy"&&d.set(F,[]);const g=new Map;for(const F of c){if(g.has(F))throw new Error("duplicate mark; each mark must be unique");const{facetsIndex:P,channels:z}=f.get(F)??{},{data:H,facets:X,channels:tt}=F.initialize(P,z,e);MT(tt,e),g.set(F,{data:H,facets:X,channels:tt})}const v=GS(Pd(d,g,e),e),y=_st(v,c,e);pst(v,y);const m=F$(v),{fx:b,fy:w}=m,S=b||w?FC(v,y):y,_=b||w?qot(m,y):y,x=Iv(e),E=x.document,N=Gb("svg").call(E.documentElement);let I=N;x.ownerSVGElement=N,x.className=l,x.projection=Mit(e,S),x.filterFacets=(F,P)=>w_(p,{channels:P,groups:yT(F,P)}),x.getMarkState=F=>{const P=g.get(F),z=f.get(F);return{...P,channels:{...P.channels,...z==null?void 0:z.channels}}},x.dispatchValue=F=>{I.value!==F&&(I.value=F,I.dispatchEvent(new Event("input",{bubbles:!0})))};const A=new Set;for(const[F,P]of g)if(F.initializer!=null){const z=F.facet==="super"?_:S,H=F.initializer(P.data,P.facets,P.channels,m,z,x);if(H.data!==void 0&&(P.data=H.data),H.facets!==void 0&&(P.facets=H.facets),H.channels!==void 0){const{fx:X,fy:tt,...Z}=H.channels;Fot(Z),Object.assign(P.channels,Z);for(const Y of Object.values(Z)){const{scale:Q}=Y;Q!=null&&!Yrt(Ce.get(Q))&&(W5(Y,e),A.add(Q))}(X!=null||tt!=null)&&f.set(F,!0)}}if(A.size){const F=new Map;Pd(F,g,e,X=>A.has(X)),Pd(d,g,e,X=>A.has(X));const P=Yot(GS(F,e),v),{scales:z,...H}=F$(P);Object.assign(v,P),Object.assign(m,H),Object.assign(m.scales,z)}let D,R;p!==void 0&&(D={x:b==null?void 0:b.domain(),y:w==null?void 0:w.domain()},p=Ist(p,D),R=Tst(b,w,y));for(const[F,P]of g)P.values=F.scale(P.channels,m,x);const{width:T,height:M}=y;me(N).attr("class",l).attr("fill","currentColor").attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("text-anchor","middle").attr("width",T).attr("height",M).attr("viewBox",`0 0 ${T} ${M}`).attr("aria-label",o).attr("aria-description",a).call(F=>F.append("style").text(`.${l} {
  display: block;
  background: white;
  height: auto;
  height: intrinsic;
  max-width: 100%;
}
.${l} text,
.${l} tspan {
  white-space: pre;
}`)).call(uT,n);for(const F of c){const{channels:P,values:z,facets:H}=g.get(F);if(p===void 0||F.facet==="super"){let X=null;if(H&&(X=H[0],X=F.filter(X,P,z),X.length===0))continue;const tt=F.render(X,m,z,_,x);if(tt==null)continue;N.appendChild(tt)}else{let X;for(const tt of p){if(!(((C=F.facetAnchor)==null?void 0:C.call(F,p,D,tt))??!tt.empty))continue;let Z=null;if(H){const Q=f.has(F);if(Z=H[Q?tt.i:0],Z=F.filter(Z,P,z),Z.length===0)continue;!Q&&Z===H[0]&&(Z=oc(Z)),Z.fx=tt.x,Z.fy=tt.y,Z.fi=tt.i}const Y=F.render(Z,m,z,S,x);if(Y!=null){(X??(X=me(N).append("g"))).append(()=>Y).datum(tt);for(const Q of["aria-label","aria-description","aria-hidden","transform"])Y.hasAttribute(Q)&&(X.attr(Q,Y.getAttribute(Q)),Y.removeAttribute(Q))}}X==null||X.selectChildren().attr("transform",R)}}const $=wot(v,x,e),{figure:B=r!=null||i!=null||s!=null||$.length>0}=e;B&&(I=E.createElement("figure"),I.className=`${l}-figure`,I.style.maxWidth="initial",r!=null&&I.append(K$(E,r,"h2")),i!=null&&I.append(K$(E,i,"h3")),I.append(...$,N),s!=null&&I.append(Not(E,s))),I.scale=wst(m.scales),I.legend=got(v,x,e);const O=bit();return O>0&&me(N).append("text").attr("x",T).attr("y",20).attr("dy","-1em").attr("text-anchor","end").attr("font-family","initial").text("⚠️").append("title").text(`${O.toLocaleString("en-US")} warning${O===1?"":"s"}. Please check the console.`),I}function K$(e,t,n){if(t.ownerDocument)return t;const r=e.createElement(n);return r.append(t),r}function Not(e,t){const n=e.createElement("figcaption");return n.append(t),n}function kot({marks:e=[],...t}={}){return AT({...t,marks:[...e,this]})}we.prototype.plot=kot;function Z$(e){return e.flat(1/0).filter(t=>t!=null).map(Dot)}function Dot(e){return typeof e.render=="function"?e:new Oot(e)}class Oot extends we{constructor(t){if(typeof t!="function")throw new TypeError("invalid mark; missing render function");super(),this.render=t}render(){}}function MT(e,t){for(const n in e)W5(e[n],t);return e}function W5(e,t){const{scale:n,transform:r=!0}=e;if(n==null||!r)return;const{type:i,percent:s,interval:o,transform:a=s?l=>l*100:eC(o,i)}=t[n]??{};a!=null&&(e.value=Se(e.value,a),e.transform=!1)}function Fot(e){for(const t in e)fC(t,e[t])}function Pd(e,t,n,r=Nrt){var i,s;for(const{channels:o}of t.values())for(const a in o){const l=o[a],{scale:c}=l;if(c!=null&&r(c))if(c==="projection"){if(!kit(n)){const u=((i=n.x)==null?void 0:i.domain)===void 0,f=((s=n.y)==null?void 0:s.domain)===void 0;if(u||f){const[d,h]=Oit(l);u&&I_(e,"x",d),f&&I_(e,"y",h)}}}else I_(e,c,l)}return e}function I_(e,t,n){const r=e.get(t);r!==void 0?r.push(n):e.set(t,[n])}function Bot(e,t){if(e==null)return;const{x:n,y:r}=e;if(n==null&&r==null)return;const i=_r(e.data);if(i==null)throw new Error("missing facet data");const s={};n!=null&&(s.fx=Tp(i,{value:n,scale:"fx"})),r!=null&&(s.fy=Tp(i,{value:r,scale:"fy"})),MT(s,t);const o=yT(i,s);return{channels:s,groups:o,data:e.data}}function J$(e,t,n){var l;if(e.facet===null||e.facet==="super")return;const{fx:r,fy:i}=e;if(r!=null||i!=null){const c=_r(e.data??r??i);if(c===void 0)throw new Error(`missing facet data in ${e.ariaLabel}`);if(c===null)return;const u={};return r!=null&&(u.fx=Tp(c,{value:r,scale:"fx"})),i!=null&&(u.fy=Tp(c,{value:i,scale:"fy"})),MT(u,n),{channels:u,groups:yT(c,u)}}if(t===void 0)return;const{channels:s,groups:o,data:a}=t;if(e.facet!=="auto"||e.data===a)return{channels:s,groups:o};a.length>0&&(o.size>1||o.size===1&&s.fx&&s.fy&&[...o][0][1].size>1)&&((l=_r(e.data))==null?void 0:l.length)===a.length&&$o(`Warning: the ${e.ariaLabel} mark appears to use faceted data, but isn’t faceted. The mark data has the same length as the facet data and the mark facet option is "auto", but the mark data and facet data are distinct. If this mark should be faceted, set the mark facet option to true; otherwise, suppress this warning by setting the mark facet option to false.`)}function Rot(e,t={}){return Sr({...t,x:null,y:null},(n,r,i,s,o,a)=>a.getMarkState(e))}function Lot(e){const t=[];for(const n of e){let r=n.tip;if(r){r===!0?r={}:typeof r=="string"&&(r={pointer:r});let{pointer:i}=r;i=/^x$/i.test(i)?bT:/^y$/i.test(i)?vT:gT,r=i(Rot(n,r)),r.title=null;const s=q5(n.data,r);s.facet=n.facet,s.facetAnchor=n.facetAnchor,t.push(s)}}return t}function Cot(e,t,n){let{projection:r,x:i={},y:s={},fx:o={},fy:a={},axis:l,grid:c,facet:u={},facet:{axis:f=l,grid:d}=u,x:{axis:h=l,grid:p=h===null?null:c}=i,y:{axis:g=l,grid:v=g===null?null:c}=s,fx:{axis:y=f,grid:m=y===null?null:d}=o,fy:{axis:b=f,grid:w=b===null?null:d}=a}=n;(r||!sc(i)&&!tN("x",e))&&(h=p=null),(r||!sc(s)&&!tN("y",e))&&(g=v=null),t.has("fx")||(y=m=null),t.has("fy")||(b=w=null),h===void 0&&(h=!k0(e,"x")),g===void 0&&(g=!k0(e,"y")),y===void 0&&(y=!k0(e,"fx")),b===void 0&&(b=!k0(e,"fy")),h===!0&&(h="bottom"),g===!0&&(g="left"),y===!0&&(y=h==="top"||h===null?"bottom":"top"),b===!0&&(b=g==="right"||g===null?"left":"right");const S=[];return N0(S,w,$5,a),$0(S,b,I5,"right","left",u,a),N0(S,m,k5,o),$0(S,y,T5,"top","bottom",u,o),N0(S,v,M5,s),$0(S,g,ST,"left","right",n,s),N0(S,p,N5,i),$0(S,h,xT,"bottom","top",n,i),S}function $0(e,t,n,r,i,s,o){if(!t)return;const a=Uot(t);o=Pot(a?r:t,s,o);const{line:l}=o;(n===ST||n===xT)&&l&&!Bf(l)&&e.push(ET(zot(o))),e.push(n(o)),a&&e.push(n({...o,anchor:i,label:null}))}function N0(e,t,n,r){!t||Bf(t)||e.push(n(jot(t,r)))}function Uot(e){return/^\s*both\s*$/i.test(e)}function Pot(e,t,{line:n=t.line,ticks:r,tickSize:i,tickSpacing:s,tickPadding:o,tickFormat:a,tickRotate:l,fontVariant:c,ariaLabel:u,ariaDescription:f,label:d=t.label,labelAnchor:h,labelArrow:p=t.labelArrow,labelOffset:g}){return{anchor:e,line:n,ticks:r,tickSize:i,tickSpacing:s,tickPadding:o,tickFormat:a,tickRotate:l,fontVariant:c,ariaLabel:u,ariaDescription:f,label:d,labelAnchor:h,labelArrow:p,labelOffset:g}}function zot(e){const{anchor:t,line:n}=e;return{anchor:t,facetAnchor:t+"-empty",stroke:n===!0?void 0:n}}function jot(e,{stroke:t=vy(e)?e:void 0,ticks:n=Vot(e)?e:void 0,tickSpacing:r,ariaLabel:i,ariaDescription:s}){return{stroke:t,ticks:n,tickSpacing:r,ariaLabel:i,ariaDescription:s}}function Vot(e){switch(typeof e){case"number":return!0;case"string":return!vy(e)}return Ho(e)||typeof(e==null?void 0:e.range)=="function"}function k0(e,t){const n=`${t}-axis `;return e.some(r=>{var i;return(i=r.ariaLabel)==null?void 0:i.startsWith(n)})}function tN(e,t){for(const n of t)for(const r in n.channels){const{scale:i}=n.channels[r];if(i===e||i==="projection")return!0}return!1}function Yot(e,t){for(const n in e){const r=e[n],i=t[n];r.label===void 0&&i&&(r.label=i.label)}return e}function qot({fx:e,fy:t},n){const{marginTop:r,marginRight:i,marginBottom:s,marginLeft:o,width:a,height:l}=pT(n),c=e&&eN(e),u=t&&eN(t);return{marginTop:t?u[0]:r,marginRight:e?a-c[1]:i,marginBottom:t?l-u[1]:s,marginLeft:e?c[0]:o,inset:{marginTop:n.marginTop,marginRight:n.marginRight,marginBottom:n.marginBottom,marginLeft:n.marginLeft},width:a,height:l}}function eN(e){const t=e.domain();let n=e(t[0]),r=e(t[t.length-1]);return r<n&&([n,r]=[r,n]),[n,r+e.bandwidth()]}const Wot=new Map([["basis",trt],["basis-closed",ert],["basis-open",nrt],["bundle",rrt],["bump-x",Vnt],["bump-y",Ynt],["cardinal",irt],["cardinal-closed",srt],["cardinal-open",ort],["catmull-rom",art],["catmull-rom-closed",lrt],["catmull-rom-open",crt],["linear",yy],["linear-closed",urt],["monotone-x",frt],["monotone-y",drt],["natural",hrt],["step",prt],["step-after",mrt],["step-before",yrt]]);function $T(e=yy,t){if(typeof e=="function")return e;const n=Wot.get(`${e}`.toLowerCase());if(!n)throw new Error(`unknown curve: ${e}`);if(t!==void 0){if("beta"in n)return n.beta(t);if("tension"in n)return n.tension(t);if("alpha"in n)return n.alpha(t)}return n}function H5(e=Uf,t){return typeof e!="function"&&`${e}`.toLowerCase()==="auto"?Uf:$T(e,t)}function Uf(e){return yy(e)}function ya(e={y:"count"},t={}){[e,t]=OT(e,t);const{x:n,y:r}=t;return DT($1(n,t,gt),null,null,r,e,Ay(t))}function ma(e={x:"count"},t={}){[e,t]=OT(e,t);const{x:n,y:r}=t;return DT(null,$1(r,t,gt),n,null,e,My(t))}function Bl(e={fill:"count"},t={}){[e,t]=OT(e,t);const{x:n,y:r}=Hot(t);return DT(n,r,null,null,e,Ay(My(t)))}function G5(e,t,n={}){if((n==null?void 0:n.interval)==null)return n;const{reduce:r=sT}=n,i={filter:null};return n[t]!=null&&(i[t]=r),n[`${t}1`]!=null&&(i[`${t}1`]=r),n[`${t}2`]!=null&&(i[`${t}2`]=r),e(i,n)}function NT(e={}){return G5(ya,"y",ld(e,"x"))}function kT(e={}){return G5(ma,"x",ld(e,"y"))}function DT(e,t,n,r,{data:i=iT,filter:s=I1,sort:o,reverse:a,...l}={},c={}){e=nN(e),t=nN(t),l=Got(l,c),i=Z5(i,gt),o=o==null?void 0:Q5("sort",o,c),s=s==null?void 0:K5("filter",s,c),n!=null&&va(l,"x","x1","x2")&&(n=null),r!=null&&va(l,"y","y1","y2")&&(r=null);const[u,f]=nr(e),[d,h]=nr(e),[p,g]=nr(t),[v,y]=nr(t),[m,b]=n!=null?[n,"x"]:r!=null?[r,"y"]:[],[w,S]=nr(m),{x:_,y:x,z:E,fill:N,stroke:I,x1:A,x2:D,y1:R,y2:T,domain:M,cumulative:$,thresholds:B,interval:O,...C}=c,[F,P]=nr(E),[z]=wr(N),[H]=wr(I),[X,tt]=nr(z),[Z,Y]=nr(H);return{..."z"in c&&{z:F||E},..."fill"in c&&{fill:X||N},..."stroke"in c&&{stroke:Z||I},...qs(C,(Q,V,J)=>{const et=x1(Pt(Q,m),J==null?void 0:J[b]),j=Pt(Q,E),At=Pt(Q,z),ot=Pt(Q,H),Yt=rT(l,{z:j,fill:At,stroke:ot}),Ht=[],st=[],he=et&&S([]),ts=j&&P([]),Wr=At&&tt([]),Qv=ot&&Y([]),zE=e&&f([]),lz=e&&h([]),jE=t&&g([]),cz=t&&y([]),uz=Kot(e==null?void 0:e(Q),t==null?void 0:t(Q));let fz=0;for(const Lc of l)Lc.initialize(Q);o&&o.initialize(Q),s&&s.initialize(Q);for(const Lc of V){const VE=[];for(const _d of l)_d.scope("facet",Lc);o&&o.scope("facet",Lc),s&&s.scope("facet",Lc);for(const[_d,dz]of Zu(Lc,Yt))for(const[hz,Py]of Zu(dz,et))for(const[es,ml]of uz(Py))if(!(s&&!s.reduce(es,ml))){VE.push(fz++),st.push(i.reduceIndex(es,Q,ml)),et&&he.push(hz),j&&ts.push(Yt===j?_d:j[(es.length>0?es:Py)[0]]),At&&Wr.push(Yt===At?_d:At[(es.length>0?es:Py)[0]]),ot&&Qv.push(Yt===ot?_d:ot[(es.length>0?es:Py)[0]]),zE&&(zE.push(ml.x1),lz.push(ml.x2)),jE&&(jE.push(ml.y1),cz.push(ml.y2));for(const pz of l)pz.reduce(es,ml);o&&o.reduce(es)}Ht.push(VE)}return cC(Ht,o,a),{data:st,facets:Ht}}),...!va(l,"x")&&(u?{x1:u,x2:d,x:S1(u,d)}:{x:_,x1:A,x2:D}),...!va(l,"y")&&(p?{y1:p,y2:v,y:S1(p,v)}:{y:x,y1:R,y2:T}),...w&&{[b]:w},...Object.fromEntries(l.map(({name:Q,output:V})=>[Q,V]))}}function OT({cumulative:e,domain:t,thresholds:n,interval:r,...i},s){return[i,{cumulative:e,domain:t,thresholds:n,interval:r,...s}]}function $1(e,{cumulative:t,domain:n,thresholds:r,interval:i},s){return e={...by(e)},e.domain===void 0&&(e.domain=n),e.cumulative===void 0&&(e.cumulative=t),e.thresholds===void 0&&(e.thresholds=r),e.interval===void 0&&(e.interval=i),e.value===void 0&&(e.value=s),e.thresholds=X5(e.thresholds,e.interval),e}function Hot(e){let{x:t,y:n}=e;return t=$1(t,e),n=$1(n,e),[t.value,n.value]=Zi(t.value,n.value),{x:t,y:n}}function nN(e){if(e==null)return;const{value:t,cumulative:n,domain:r=mn,thresholds:i}=e,s=o=>{let a=Pt(o,t),l;if(Zn(a)||Qot(i)){a=Se(a,XL,Float64Array);let[u,f]=typeof r=="function"?r(a):r,d=typeof i=="function"&&!Du(i)?i(a,u,f):i;typeof d=="number"&&(d=GB(u,f,d)),Du(d)&&(r===mn&&(u=d.floor(u),f=d.offset(d.floor(f))),d=d.range(u,d.offset(f))),l=d}else{a=cr(a);let[u,f]=typeof r=="function"?r(a):r,d=typeof i=="function"&&!Du(i)?i(a,u,f):i;if(typeof d=="number")if(r===mn){let h=up(u,f,d);if(isFinite(h))if(h>0){let p=Math.round(u/h),g=Math.round(f/h);p*h<=u||--p,g*h>f||++g;let v=g-p+1;d=new Float64Array(v);for(let y=0;y<v;++y)d[y]=(p+y)*h}else if(h<0){h=-h;let p=Math.round(u*h),g=Math.round(f*h);p/h<=u||--p,g/h>f||++g;let v=g-p+1;d=new Float64Array(v);for(let y=0;y<v;++y)d[y]=(p+y)/h}else d=[u];else d=[u]}else d=Ua(u,f,d);else Du(d)&&(r===mn&&(u=d.floor(u),f=d.offset(d.floor(f))),d=d.range(u,d.offset(f)));l=d}const c=[];if(l.length===1)c.push([l[0],l[0]]);else for(let u=1;u<l.length;++u)c.push([l[u-1],l[u]]);return c.bin=(n<0?Jot:n>0?Zot:FT)(c,l,a),c};return s.label=Wo(t),s}function X5(e,t,n=rN){if(e===void 0)return t===void 0?n:ad(t);if(typeof e=="string"){switch(e.toLowerCase()){case"freedman-diaconis":return MG;case"scott":return KO;case"sturges":return o3;case"auto":return rN}return U3(e)}return e}function Got(e,t){return tT(e,t,Q5)}function Q5(e,t,n){return eT(e,t,n,K5)}function K5(e,t,n){return nT(e,t,n,Z5)}function Z5(e,t){return xv(e,t,Xot)}function Xot(e){switch(`${e}`.toLowerCase()){case"x":return tat;case"x1":return nat;case"x2":return rat;case"y":return eat;case"y1":return iat;case"y2":return sat}throw new Error(`invalid bin reduce: ${e}`)}function rN(e,t,n){return Math.min(200,KO(e,t,n))}function Qot(e){return Frt(e)||Ho(e)&&Zn(e)}function Kot(e,t){return e&&t?function*(n){const r=e.bin(n);for(const[i,[s,o]]of e.entries()){const a=t.bin(r[i]);for(const[l,[c,u]]of t.entries())yield[a[l],{x1:s,y1:c,x2:o,y2:u}]}}:e?function*(n){const r=e.bin(n);for(const[i,[s,o]]of e.entries())yield[r[i],{x1:s,x2:o}]}:function*(n){const r=t.bin(n);for(const[i,[s,o]]of t.entries())yield[r[i],{y1:s,y2:o}]}}function FT(e,t,n){return t=cr(t),r=>{var s;const i=e.map(()=>[]);for(const o of r)(s=i[Vb(t,n[o])-1])==null||s.push(o);return i}}function Zot(e,t,n){const r=FT(e,t,n);return i=>{const s=r(i);for(let o=1,a=s.length;o<a;++o){const l=s[o-1],c=s[o];for(const u of l)c.push(u)}return s}}function Jot(e,t,n){const r=FT(e,t,n);return i=>{const s=r(i);for(let o=s.length-2;o>=0;--o){const a=s[o+1],l=s[o];for(const c of a)l.push(c)}return s}}function J5(e,t){const n=(+e+ +t)/2;return e instanceof Date?new Date(n):n}const tat={reduceIndex(e,t,{x1:n,x2:r}){return J5(n,r)}},eat={reduceIndex(e,t,{y1:n,y2:r}){return J5(n,r)}},nat={reduceIndex(e,t,{x1:n}){return n}},rat={reduceIndex(e,t,{x2:n}){return n}},iat={reduceIndex(e,t,{y1:n}){return n}},sat={reduceIndex(e,t,{y2:n}){return n}};function BT(e={}){return KL(e)?e:{...e,x:gt}}function RT(e={}){return ZL(e)?e:{...e,y:gt}}function oat(e,t){if(t.length===1)return{data:e,facets:t};const n=e.length,r=new Uint8Array(n);let i=0;for(const a of t)for(const l of a)r[l]&&++i,r[l]=1;if(i===0)return{data:e,facets:t};e=Sp(e);const s=e[HL]=new Uint32Array(n+i);t=t.map(a=>Sp(a,Uint32Array));let o=n;r.fill(0);for(const a of t)for(let l=0,c=a.length;l<c;++l){const u=a[l];r[u]?(a[l]=o,e[o]=e[u],s[o]=u,++o):s[u]=u,r[u]=1}return{data:e,facets:t}}function t7(e={},t={}){arguments.length===1&&([e,t]=dd(e));const{y1:n,y:r=n,x:i,...s}=t,[o,a,l,c]=hd(r,i,"y","x",e,s);return{...o,y1:n,y:a,x1:l,x2:c,x:S1(l,c)}}function aat(e={},t={}){arguments.length===1&&([e,t]=dd(e));const{y1:n,y:r=n,x:i}=t,[s,o,a]=hd(r,i,"y","x",e,t);return{...s,y1:n,y:o,x:a}}function lat(e={},t={}){arguments.length===1&&([e,t]=dd(e));const{y1:n,y:r=n,x:i}=t,[s,o,,a]=hd(r,i,"y","x",e,t);return{...s,y1:n,y:o,x:a}}function e7(e={},t={}){arguments.length===1&&([e,t]=dd(e));const{x1:n,x:r=n,y:i,...s}=t,[o,a,l,c]=hd(r,i,"x","y",e,s);return{...o,x1:n,x:a,y1:l,y2:c,y:S1(l,c)}}function cat(e={},t={}){arguments.length===1&&([e,t]=dd(e));const{x1:n,x:r=n,y:i}=t,[s,o,a]=hd(r,i,"x","y",e,t);return{...s,x1:n,x:o,y:a}}function uat(e={},t={}){arguments.length===1&&([e,t]=dd(e));const{x1:n,x:r=n,y:i}=t,[s,o,,a]=hd(r,i,"x","y",e,t);return{...s,x1:n,x:o,y:a}}function LT({x:e,x1:t,x2:n,...r}={}){return r=ld(r,"y"),t===void 0&&n===void 0?t7({x:e,...r}):([t,n]=JL(e,t,n),{...r,x1:t,x2:n})}function CT({y:e,y1:t,y2:n,...r}={}){return r=ld(r,"x"),t===void 0&&n===void 0?e7({y:e,...r}):([t,n]=JL(e,t,n),{...r,y1:t,y2:n})}function dd(e){const{offset:t,order:n,reverse:r,...i}=e;return[{offset:t,order:n,reverse:r},i]}const fat={length:!0};function hd(e,t=P3,n,r,{offset:i,order:s,reverse:o},a){if(t===null)throw new Error(`stack requires ${r}`);const l=cl(a),[c,u]=nr(e),[f,d]=Or(t),[h,p]=Or(t);return f.hint=h.hint=fat,i=dat(i),s=yat(s,i,r),[qs(a,(g,v,y)=>{({data:g,facets:v}=oat(g,v));const m=e==null?void 0:u(x1(Pt(g,e),y==null?void 0:y[n])),b=Pt(g,t,Float64Array),w=Pt(g,l),S=s&&s(g,m,b,w),_=g.length,x=d(new Float64Array(_)),E=p(new Float64Array(_)),N=[];for(const I of v){const A=m?Array.from(Yo(I,D=>m[D]).values()):[I];if(S)for(const D of A)D.sort(S);for(const D of A){let R=0,T=0;o&&D.reverse();for(const M of D){const $=b[M];$<0?R=E[M]=(x[M]=R)+$:$>0?T=E[M]=(x[M]=T)+$:E[M]=x[M]=T}}N.push(A)}return i&&i(N,x,E,w),{data:g,facets:v}}),c,f,h]}function dat(e){if(e!=null){if(typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"expand":case"normalize":return hat;case"center":case"silhouette":return pat;case"wiggle":return r7}throw new Error(`unknown offset: ${e}`)}}function n7(e,t){let n=0,r=0;for(const i of e){const s=t[i];s<n&&(n=s),s>r&&(r=s)}return[n,r]}function hat(e,t,n){for(const r of e)for(const i of r){const[s,o]=n7(i,n);for(const a of i){const l=1/(o-s||1);t[a]=l*(t[a]-s),n[a]=l*(n[a]-s)}}}function pat(e,t,n){for(const r of e){for(const i of r){const[s,o]=n7(i,n);for(const a of i){const l=(o+s)/2;t[a]-=l,n[a]-=l}}i7(r,t,n)}s7(e,t,n)}function r7(e,t,n,r){for(const i of e){const s=new vc;let o=0;for(const a of i){let l=-1;const c=a.map(h=>Math.abs(n[h]-t[h])),u=a.map(h=>{l=r?r[h]:++l;const p=n[h]-t[h],g=s.has(l)?p-s.get(l):0;return s.set(l,p),g}),f=[0,...vG(u)];for(const h of a)t[h]+=o,n[h]+=o;const d=Cs(c);d&&(o-=Cs(c,(h,p)=>(u[p]/2+f[p])*h)/d)}i7(i,t,n)}s7(e,t,n)}function i7(e,t,n){const r=vn(e,i=>vn(i,s=>t[s]));for(const i of e)for(const s of i)t[s]-=r,n[s]-=r}function s7(e,t,n){const r=e.length;if(r===1)return;const i=e.map(a=>a.flat()),s=i.map(a=>(vn(a,l=>t[l])+Ne(a,l=>n[l]))/2),o=vn(s);for(let a=0;a<r;a++){const l=o-s[a];for(const c of i[a])t[c]+=l,n[c]+=l}}function yat(e,t,n){if(e===void 0&&t===r7)return iN(vi);if(e!=null){if(typeof e=="string"){const r=e.startsWith("-"),i=r?w1:vi;switch((r?e.slice(1):e).toLowerCase()){case"value":case n:return mat(i);case"z":return gat(i);case"sum":return bat(i);case"appearance":return vat(i);case"inside-out":return iN(i)}return sN(GL(e))}if(typeof e=="function")return(e.length===1?sN:wat)(e);if(Array.isArray(e))return _at(e);throw new Error(`invalid order: ${e}`)}}function mat(e){return(t,n,r)=>(i,s)=>e(r[i],r[s])}function gat(e){return(t,n,r,i)=>(s,o)=>e(i[s],i[o])}function bat(e){return Fv(e,(t,n,r,i)=>s3(qo(t),s=>Cs(s,o=>r[o]),s=>i[s]))}function vat(e){return Fv(e,(t,n,r,i)=>s3(qo(t),s=>n[a3(s,o=>r[o])],s=>i[s]))}function iN(e){return Fv(e,(t,n,r,i)=>{const s=qo(t),o=s3(s,f=>n[a3(f,d=>r[d])],f=>i[f]),a=Gu(s,f=>Cs(f,d=>r[d]),f=>i[f]),l=[],c=[];let u=0;for(const f of o)u<0?(u+=a.get(f),l.push(f)):(u-=a.get(f),c.push(f));return c.reverse().concat(l)})}function sN(e){return t=>{const n=Pt(t,e);return(r,i)=>vi(n[r],n[i])}}function wat(e){return t=>(n,r)=>e(t[n],t[r])}function _at(e){return Fv(vi,()=>e)}function Fv(e,t){return(n,r,i,s)=>{if(!s)throw new Error("missing channel: z");const o=new vc(t(n,r,i,s).map((a,l)=>[a,l]));return(a,l)=>e(o.get(s[a]),o.get(s[l]))}}const Sat={ariaLabel:"area",strokeWidth:1,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class Bv extends we{constructor(t,n={}){const{x1:r,y1:i,x2:s,y2:o,z:a,curve:l,tension:c}=n;super(t,{x1:{value:r,scale:"x"},y1:{value:i,scale:"y"},x2:{value:s,scale:"x",optional:!0},y2:{value:o,scale:"y",optional:!0},z:{value:cl(n),optional:!0}},n,Sat),this.z=a,this.curve=$T(l,c)}filter(t){return t}render(t,n,r,i,s){const{x1:o,y1:a,x2:l=o,y2:c=a}=r;return ne("svg:g",s).call(ke,this,i,s).call(ve,this,n,0,0).call(u=>u.selectAll().data(mC(t,[o,a,l,c],this,r)).enter().append("path").call(Ee,this).call(T1,this,r).attr("d",D3().curve(this.curve).defined(f=>f>=0).x0(f=>o[f]).y0(f=>a[f]).x1(f=>l[f]).y1(f=>c[f]))).node()}}function xat(e,t){return t===void 0?Pf(e,{x:gy,y:_p}):new Bv(e,t)}function Ap(e,t){const{y:n=Er,...r}=kT(t);return new Bv(e,LT(BT({...r,y1:n,y2:void 0})))}function Pf(e,t){const{x:n=Er,...r}=NT(t);return new Bv(e,CT(RT({...r,x1:n,x2:void 0})))}const Iat={ariaLabel:"link",fill:"none",stroke:"currentColor",strokeMiterlimit:1};class o7 extends we{constructor(t,n={}){const{x1:r,y1:i,x2:s,y2:o,curve:a,tension:l}=n;super(t,{x1:{value:r,scale:"x"},y1:{value:i,scale:"y"},x2:{value:s,scale:"x",optional:!0},y2:{value:o,scale:"y",optional:!0}},n,Iat),this.curve=H5(a,l),cd(this,n)}project(t,n,r){this.curve!==Uf&&super.project(t,n,r)}render(t,n,r,i,s){const{x1:o,y1:a,x2:l=o,y2:c=a}=r,{curve:u}=this;return ne("svg:g",s).call(ke,this,i,s).call(ve,this,n).call(f=>f.selectAll().data(t).enter().append("path").call(Ee,this).attr("d",u===Uf&&s.projection?Tat(s.projection,o,a,l,c):d=>{const h=So(),p=u(h);return p.lineStart(),p.point(o[d],a[d]),p.point(l[d],c[d]),p.lineEnd(),h}).call(dn,this,r).call(Ey,this,r,s)).node()}}function Tat(e,t,n,r,i){const s=al(e);return t=cr(t),n=cr(n),r=cr(r),i=cr(i),o=>s({type:"LineString",coordinates:[[t[o],n[o]],[r[o],i[o]]]})}function a7(e,{x:t,x1:n,x2:r,y:i,y1:s,y2:o,...a}={}){return[n,r]=N1(t,n,r),[s,o]=N1(i,s,o),new o7(e,{...a,x1:n,x2:r,y1:s,y2:o})}function N1(e,t,n){if(e===void 0){if(t===void 0){if(n!==void 0)return[n]}else if(n===void 0)return[t]}else{if(t===void 0)return n===void 0?[e]:[e,n];if(n===void 0)return[e,t]}return[t,n]}const Eat={ariaLabel:"arrow",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeMiterlimit:1,strokeWidth:1.5};class l7 extends we{constructor(t,n={}){const{x1:r,y1:i,x2:s,y2:o,bend:a=0,headAngle:l=60,headLength:c=8,inset:u=0,insetStart:f=u,insetEnd:d=u,sweep:h}=n;super(t,{x1:{value:r,scale:"x"},y1:{value:i,scale:"y"},x2:{value:s,scale:"x",optional:!0},y2:{value:o,scale:"y",optional:!0}},n,Eat),this.bend=a===!0?22.5:Math.max(-90,Math.min(90,a)),this.headAngle=+l,this.headLength=+c,this.insetStart=+f,this.insetEnd=+d,this.sweep=Aat(h)}render(t,n,r,i,s){const{x1:o,y1:a,x2:l=o,y2:c=a,SW:u}=r,{strokeWidth:f,bend:d,headAngle:h,headLength:p,insetStart:g,insetEnd:v}=this,y=u?w=>u[w]:Pr(f===void 0?1:f),m=h*E1/2,b=p/1.5;return ne("svg:g",s).call(ke,this,i,s).call(ve,this,n).call(w=>w.selectAll().data(t).enter().append("path").call(Ee,this).attr("d",S=>{let _=o[S],x=a[S],E=l[S],N=c[S];const I=Math.hypot(E-_,N-x);if(I<=g+v)return null;let A=Math.atan2(N-x,E-_);const D=Math.min(b*y(S),I/3),R=this.sweep(_,x,E,N)*d*E1,T=Math.hypot(I/Math.tan(R),I)/2;if(g||v)if(T<1e5){const X=Math.sign(R),[tt,Z]=Mat([_,x],[E,N],T,X);if(g&&([_,x]=oN([tt,Z,T],[_,x,g],-X*Math.sign(g))),v){const[Y,Q]=oN([tt,Z,T],[E,N,v],X*Math.sign(v));A+=Math.atan2(Q-Z,Y-tt)-Math.atan2(N-Z,E-tt),E=Y,N=Q}}else{const X=E-_,tt=N-x,Z=Math.hypot(X,tt);g&&(_+=X/Z*g,x+=tt/Z*g),v&&(E-=X/Z*v,N-=tt/Z*v)}const M=A+R,$=M+m,B=M-m,O=E-D*Math.cos($),C=N-D*Math.sin($),F=E-D*Math.cos(B),P=N-D*Math.sin(B),z=T<1e5?`A${T},${T} 0,0,${R>0?1:0} `:"L",H=D?`M${O},${C}L${E},${N}L${F},${P}`:"";return`M${_},${x}${z}${E},${N}${H}`}).call(dn,this,r)).node()}}function Aat(e=1){if(typeof e=="number")return Pr(Math.sign(e));if(typeof e=="function")return(t,n,r,i)=>Math.sign(e(t,n,r,i));switch(qr(e,"sweep",["+x","-x","+y","-y"])){case"+x":return(t,n,r)=>ze(t,r);case"-x":return(t,n,r)=>bc(t,r);case"+y":return(t,n,r,i)=>ze(n,i);case"-y":return(t,n,r,i)=>bc(n,i)}}function Mat([e,t],[n,r],i,s){const o=n-e,a=r-t,l=Math.hypot(o,a),c=s*Math.sqrt(i*i-l*l/4)/l;return[(e+n)/2-a*c,(t+r)/2+o*c]}function oN([e,t,n],[r,i,s],o){const a=r-e,l=i-t,c=Math.hypot(a,l),u=(a*a+l*l-s*s+n*n)/(2*c),f=o*Math.sqrt(n*n-u*u);return[e+(a*u+l*f)/c,t+(l*u-a*f)/c]}function $at(e,{x:t,x1:n,x2:r,y:i,y1:s,y2:o,...a}={}){return[n,r]=N1(t,n,r),[s,o]=N1(i,s,o),new l7(e,{...a,x1:n,x2:r,y1:s,y2:o})}class UT extends we{constructor(t,n,r={},i){super(t,n,r,i);const{inset:s=0,insetTop:o=s,insetRight:a=s,insetBottom:l=s,insetLeft:c=s,rx:u,ry:f}=r;this.insetTop=Vt(o),this.insetRight=Vt(a),this.insetBottom=Vt(l),this.insetLeft=Vt(c),this.rx=Ye(u,"auto"),this.ry=Ye(f,"auto")}render(t,n,r,i,s){const{rx:o,ry:a}=this;return ne("svg:g",s).call(ke,this,i,s).call(this._transform,this,n).call(l=>l.selectAll().data(t).enter().append("rect").call(Ee,this).attr("x",this._x(n,r,i)).attr("width",this._width(n,r,i)).attr("y",this._y(n,r,i)).attr("height",this._height(n,r,i)).call(ut,"rx",o).call(ut,"ry",a).call(dn,this,r)).node()}_x(t,{x:n},{marginLeft:r}){const{insetLeft:i}=this;return n?s=>n[s]+i:r+i}_y(t,{y:n},{marginTop:r}){const{insetTop:i}=this;return n?s=>n[s]+i:r+i}_width({x:t},{x:n},{marginRight:r,marginLeft:i,width:s}){const{insetLeft:o,insetRight:a}=this,l=n&&t?t.bandwidth():s-r-i;return Math.max(0,l-o-a)}_height({y:t},{y:n},{marginTop:r,marginBottom:i,height:s}){const{insetTop:o,insetBottom:a}=this,l=n&&t?t.bandwidth():s-r-i;return Math.max(0,l-o-a)}}const c7={ariaLabel:"bar"};class u7 extends UT{constructor(t,n={}){const{x1:r,x2:i,y:s}=n;super(t,{x1:{value:r,scale:"x"},x2:{value:i,scale:"x"},y:{value:s,scale:"y",type:"band",optional:!0}},n,c7)}_transform(t,n,{x:r}){t.call(ve,n,{x:r},0,0)}_x({x:t},{x1:n,x2:r},{marginLeft:i}){const{insetLeft:s}=this;return fi(t)?i+s:o=>Math.min(n[o],r[o])+s}_width({x:t},{x1:n,x2:r},{marginRight:i,marginLeft:s,width:o}){const{insetLeft:a,insetRight:l}=this;return fi(t)?o-i-s-a-l:c=>Math.max(0,Math.abs(r[c]-n[c])-a-l)}}class f7 extends UT{constructor(t,n={}){const{x:r,y1:i,y2:s}=n;super(t,{y1:{value:i,scale:"y"},y2:{value:s,scale:"y"},x:{value:r,scale:"x",type:"band",optional:!0}},n,c7)}_transform(t,n,{y:r}){t.call(ve,n,{y:r},0,0)}_y({y:t},{y1:n,y2:r},{marginTop:i}){const{insetTop:s}=this;return fi(t)?i+s:o=>Math.min(n[o],r[o])+s}_height({y:t},{y1:n,y2:r},{marginTop:i,marginBottom:s,height:o}){const{insetTop:a,insetBottom:l}=this;return fi(t)?o-i-s-a-l:c=>Math.max(0,Math.abs(r[c]-n[c])-a-l)}}function ql(e,t={}){return bv(t)||(t={...t,y:Er,x2:gt}),new u7(e,LT(QC(BT(t))))}function Wl(e,t={}){return bv(t)||(t={...t,x:Er,y2:gt}),new f7(e,CT(KC(RT(t))))}const Nat={ariaLabel:"cell"};class Rv extends UT{constructor(t,{x:n,y:r,...i}={}){super(t,{x:{value:n,scale:"x",type:"band",optional:!0},y:{value:r,scale:"y",type:"band",optional:!0}},i,Nat)}_transform(t,n){t.call(ve,n,{},0,0)}}function Fu(e,{x:t,y:n,...r}={}){return[t,n]=Zi(t,n),new Rv(e,{...r,x:t,y:n})}function kat(e,{x:t=Er,fill:n,stroke:r,...i}={}){return n===void 0&&wr(r)[0]===void 0&&(n=gt),new Rv(e,{...i,x:t,fill:n,stroke:r})}function Dat(e,{y:t=Er,fill:n,stroke:r,...i}={}){return n===void 0&&wr(r)[0]===void 0&&(n=gt),new Rv(e,{...i,y:t,fill:n,stroke:r})}const Oat={ariaLabel:"dot",fill:"none",stroke:"currentColor",strokeWidth:1.5};function PT(e){return e.sort===void 0&&e.reverse===void 0?aC({channel:"-r"},e):e}class Lv extends we{constructor(t,n={}){const{x:r,y:i,r:s,rotate:o,symbol:a=wp,frameAnchor:l}=n,[c,u]=Ze(o,0),[f,d]=Grt(a),[h,p]=Ze(s,f==null?3:4.5);super(t,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},r:{value:h,scale:"r",filter:Mo,optional:!0},rotate:{value:c,optional:!0},symbol:{value:f,scale:"auto",optional:!0}},PT(n),Oat),this.r=p,this.rotate=u,this.symbol=d,this.frameAnchor=wy(l);const{channels:g}=this,{symbol:v}=g;if(v){const{fill:y,stroke:m}=g;v.hint={fill:y?y.value===v.value?"color":"currentColor":this.fill??"currentColor",stroke:m?m.value===v.value?"color":"currentColor":this.stroke??"none"}}}render(t,n,r,i,s){const{x:o,y:a}=n,{x:l,y:c,r:u,rotate:f,symbol:d}=r,{r:h,rotate:p,symbol:g}=this,[v,y]=Ws(this,i),m=g===wp,b=u?void 0:h*h*Math.PI;return mv(h)&&(t=[]),ne("svg:g",s).call(ke,this,i,s).call(ve,this,{x:l&&o,y:c&&a}).call(w=>w.selectAll().data(t).enter().append(m?"circle":"path").call(Ee,this).call(m?S=>{S.attr("cx",l?_=>l[_]:v).attr("cy",c?_=>c[_]:y).attr("r",u?_=>u[_]:h)}:S=>{S.attr("transform",Nv`translate(${l?_=>l[_]:v},${c?_=>c[_]:y})${f?_=>` rotate(${f[_]})`:p?` rotate(${p})`:""}`).attr("d",u&&d?_=>{const x=So();return d[_].draw(x,u[_]*u[_]*Math.PI),x}:u?_=>{const x=So();return g.draw(x,u[_]*u[_]*Math.PI),x}:d?_=>{const x=So();return d[_].draw(x,b),x}:(()=>{const _=So();return g.draw(_,b),_})())}).call(dn,this,r)).node()}}function dl(e,{x:t,y:n,...r}={}){return r.frameAnchor===void 0&&([t,n]=Zi(t,n)),new Lv(e,{...r,x:t,y:n})}function Fat(e,{x:t=gt,...n}={}){return new Lv(e,JC({...n,x:t}))}function Bat(e,{y:t=gt,...n}={}){return new Lv(e,ZC({...n,y:t}))}function Rat(e,t){return dl(e,{...t,symbol:"circle"})}function Lat(e,t){return dl(e,{...t,symbol:"hexagon"})}const Cat={ariaLabel:"line",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class Cv extends we{constructor(t,n={}){const{x:r,y:i,z:s,curve:o,tension:a}=n;super(t,{x:{value:r,scale:"x"},y:{value:i,scale:"y"},z:{value:cl(n),optional:!0}},n,Cat),this.z=s,this.curve=H5(o,a),cd(this,n)}filter(t){return t}project(t,n,r){this.curve!==Uf&&super.project(t,n,r)}render(t,n,r,i,s){const{x:o,y:a}=r,{curve:l}=this;return ne("svg:g",s).call(ke,this,i,s).call(ve,this,n).call(c=>c.selectAll().data(mC(t,[o,a],this,r)).enter().append("path").call(Ee,this).call(T1,this,r).call(zst,this,r,s).attr("d",l===Uf&&s.projection?Uat(s.projection,o,a):mL().curve(l).defined(u=>u>=0).x(u=>o[u]).y(u=>a[u]))).node()}}function Uat(e,t,n){const r=al(e);return t=cr(t),n=cr(n),i=>{let s=[];const o=[s];for(const a of i)a===-1?(s=[],o.push(s)):s.push([t[a],n[a]]);return r({type:"MultiLineString",coordinates:o})}}function zT(e,{x:t,y:n,...r}={}){return[t,n]=Zi(t,n),new Cv(e,{...r,x:t,y:n})}function Mp(e,{x:t=gt,y:n=Er,...r}={}){return new Cv(e,kT({...r,x:t,y:n}))}function $p(e,{x:t=Er,y:n=gt,...r}={}){return new Cv(e,NT({...r,x:t,y:n}))}const Pat={ariaLabel:"rect"};class Uv extends we{constructor(t,n={}){const{x1:r,y1:i,x2:s,y2:o,inset:a=0,insetTop:l=a,insetRight:c=a,insetBottom:u=a,insetLeft:f=a,rx:d,ry:h}=n;super(t,{x1:{value:r,scale:"x",optional:!0},y1:{value:i,scale:"y",optional:!0},x2:{value:s,scale:"x",optional:!0},y2:{value:o,scale:"y",optional:!0}},n,Pat),this.insetTop=Vt(l),this.insetRight=Vt(c),this.insetBottom=Vt(u),this.insetLeft=Vt(f),this.rx=Ye(d,"auto"),this.ry=Ye(h,"auto")}render(t,n,r,i,s){const{x:o,y:a}=n,{x1:l,y1:c,x2:u,y2:f}=r,{marginTop:d,marginRight:h,marginBottom:p,marginLeft:g,width:v,height:y}=i,{projection:m}=s,{insetTop:b,insetRight:w,insetBottom:S,insetLeft:_,rx:x,ry:E}=this;return ne("svg:g",s).call(ke,this,i,s).call(ve,this,{x:l&&u&&o,y:c&&f&&a},0,0).call(N=>N.selectAll().data(t).enter().append("rect").call(Ee,this).attr("x",l&&u&&(m||!fi(o))?I=>Math.min(l[I],u[I])+_:g+_).attr("y",c&&f&&(m||!fi(a))?I=>Math.min(c[I],f[I])+b:d+b).attr("width",l&&u&&(m||!fi(o))?I=>Math.max(0,Math.abs(u[I]-l[I])-_-w):v-h-g-w-_).attr("height",c&&f&&(m||!fi(a))?I=>Math.max(0,Math.abs(c[I]-f[I])-b-S):y-d-p-b-S).call(ut,"rx",x).call(ut,"ry",E).call(dn,this,r)).node()}}function jT(e,t){return new Uv(e,GC(XC(t)))}function k1(e,t={}){return bv(t)||(t={...t,y:Er,x2:gt,interval:1}),new Uv(e,LT(XC(BT(t))))}function D1(e,t={}){return bv(t)||(t={...t,x:Er,y2:gt,interval:1}),new Uv(e,CT(GC(RT(t))))}function d7(e,t){t=jat(t);const{x:n,y:r,color:i,size:s}=t,o=D0(e,n),a=D0(e,r),l=D0(e,i),c=D0(e,s);let{fx:u,fy:f,x:{value:d,reduce:h,zero:p,...g},y:{value:v,reduce:y,zero:m,...b},color:{value:w,color:S,reduce:_},size:{value:x,reduce:E},mark:N}=t;if(h===void 0&&(h=y==null&&d==null&&x==null&&v!=null?"count":null),y===void 0&&(y=h==null&&v==null&&x==null&&d!=null?"count":null),E===void 0&&x==null&&_==null&&h==null&&y==null&&(d==null||Ve(o))&&(v==null||Ve(a))&&(E="count"),p===void 0&&(p=O0(h)?!0:void 0),m===void 0&&(m=O0(y)?!0:void 0),d==null&&v==null)throw new Error("must specify x or y");if(h!=null&&v==null)throw new Error("reducing x requires y");if(y!=null&&d==null)throw new Error("reducing y requires x");N===void 0&&(N=x!=null||E!=null?"dot":O0(h)||O0(y)||_!=null?"bar":d!=null&&v!=null?Ve(o)||Ve(a)||h==null&&y==null&&!zd(o)&&!zd(a)?"dot":"line":d!=null||v!=null?"rule":null);let I,A,D;switch(N){case"dot":D=dl,A="stroke";break;case"line":D=o&&a||h!=null||y!=null?m||y!=null||o&&zd(o)?$p:p||h!=null||a&&zd(a)?Mp:zT:o?Mp:$p,A="stroke",lN(l)&&(I=null);break;case"area":D=!(m||y!=null)&&(p||h!=null||a&&zd(a))?Ap:Pf,A="fill",lN(l)&&(I=null);break;case"rule":D=o?Ya:qa,A="stroke";break;case"bar":D=h!=null?Ve(a)?aN(h)&&o&&Ve(o)?Fu:ql:k1:y!=null?Ve(o)?aN(y)&&a&&Ve(a)?Fu:Wl:D1:_!=null||E!=null?o&&Ve(o)&&a&&Ve(a)?Fu:o&&Ve(o)?Wl:a&&Ve(a)?ql:jT:o&&Ou(o)&&!(a&&Ou(a))?ql:a&&Ou(a)&&!(o&&Ou(o))?Wl:Fu,A="fill";break;default:throw new Error(`invalid mark: ${N}`)}let R={fx:u,fy:f,x:o??void 0,y:a??void 0,[A]:l??S,z:I,r:c??void 0,tip:!0},T,M={[A]:_??void 0,r:E??void 0};if(h!=null&&y!=null)throw new Error("cannot reduce both x and y");return y!=null?(M.y=y,T=Ve(o)?xp:ya):h!=null?(M.x=h,T=Ve(a)?Ip:ma):(_!=null||E!=null)&&(o&&a?T=Ve(o)&&Ve(a)?J3:Ve(o)?ma:Ve(a)?ya:Bl:o?T=Ve(o)?xp:ya:a&&(T=Ve(a)?Ip:ma)),(T===Bl||T===ya)&&(R.x={value:o,...g}),(T===Bl||T===ma)&&(R.y={value:a,...b}),p===void 0&&(p=o&&!(T===Bl||T===ya)&&(D===ql||D===Ap||D===k1||D===qa)),m===void 0&&(m=a&&!(T===Bl||T===ma)&&(D===Wl||D===Pf||D===D1||D===Ya)),{fx:u??null,fy:f??null,x:{value:d??null,reduce:h??null,zero:!!p,...g},y:{value:v??null,reduce:y??null,zero:!!m,...b},color:{value:w??null,reduce:_??null,...S!==void 0&&{color:S}},size:{value:x??null,reduce:E??null},mark:N,markImpl:cN[D],markOptions:R,transformImpl:cN[T],transformOptions:M,colorMode:A}}function zat(e,t){const n=d7(e,t),{fx:r,fy:i,x:{zero:s},y:{zero:o},markOptions:a,transformOptions:l,colorMode:c}=n,u=ZS[n.markImpl],f=ZS[n.transformImpl],d=r!=null||i!=null?ET({strokeOpacity:.1}):null,h=[s?Ya([0]):null,o?qa([0]):null],p=u(e,f?f(l,a):a);return c==="stroke"?Gi(d,h,p):Gi(d,p,h)}function zd(e){let t,n;for(const r of e){if(r==null)continue;if(t===void 0){t=r;continue}const i=Math.sign(ze(t,r));if(i){if(n!==void 0&&i!==n)return!1;t=r,n=i}}return!0}function jat({x:e,y:t,color:n,size:r,fx:i,fy:s,mark:o}={}){return hs(e)||(e=Xc(e)),hs(t)||(t=Xc(t)),hs(n)||(n=vy(n)?{color:n}:Xc(n)),hs(r)||(r=Xc(r)),hs(i)&&({value:i}=Xc(i)),hs(s)&&({value:s}=Xc(s)),o!=null&&(o=`${o}`.toLowerCase()),{x:e,y:t,color:n,size:r,fx:i,fy:s,mark:o}}function D0(e,t){const n=Pt(e,t.value);return n&&(n.label=Wo(t.value)),n}function Xc(e){return Vat(e)?{reduce:e}:{value:e}}function O0(e){return/^(?:distinct|count|sum|proportion)$/i.test(e)}function aN(e){return/^(?:first|last|mode)$/i.test(e)}function Vat(e){if(e==null)return!1;if(typeof e.reduceIndex=="function"||typeof e.reduce=="function"&&Si(e)||/^p\d{2}$/i.test(e))return!0;switch(`${e}`.toLowerCase()){case"first":case"last":case"count":case"distinct":case"sum":case"proportion":case"proportion-facet":case"deviation":case"min":case"min-index":case"max":case"max-index":case"mean":case"median":case"variance":case"mode":return!0}return!1}function lN(e){return e?new ny(e).size>e.length>>1:!1}const ZS={dot:dl,line:zT,lineX:Mp,lineY:$p,areaX:Ap,areaY:Pf,ruleX:Ya,ruleY:qa,barX:ql,barY:Wl,rect:jT,rectX:k1,rectY:D1,cell:Fu,bin:Bl,binX:ya,binY:ma,group:J3,groupX:xp,groupY:Ip},cN=Object.fromEntries(Object.entries(ZS).map(([e,t])=>[t,e]));function VT(e,t={}){let{x:n,x1:r,x2:i}=t;n===void 0&&r===void 0&&i===void 0&&(t={...t,x:n=gt});const s={};return n!=null&&(s.x=e),r!=null&&(s.x1=e),i!=null&&(s.x2=e),Po(s,t)}function YT(e,t={}){let{y:n,y1:r,y2:i}=t;n===void 0&&r===void 0&&i===void 0&&(t={...t,y:n=gt});const s={};return n!=null&&(s.y=e),r!=null&&(s.y1=e),i!=null&&(s.y2=e),Po(s,t)}function Po(e={},t={}){const n=cl(t),r=Object.entries(e).map(([i,s])=>{const o=tC(i,t);if(o==null)throw new Error(`missing channel: ${i}`);const[a,l]=Or(o);return{key:i,input:o,output:a,setOutput:l,map:Yat(s)}});return{...qs(t,(i,s)=>{const o=Pt(i,n),a=r.map(({input:c})=>Pt(i,c)),l=r.map(({setOutput:c})=>c(new Array(i.length)));for(const c of s)for(const u of o?Yo(c,f=>o[f]).values():[c])r.forEach(({map:f},d)=>f.mapIndex(u,a[d],l[d]));return{data:i,facets:s}}),...Object.fromEntries(r.map(({key:i,output:s})=>[i,s]))}}function Yat(e){if(e==null)throw new Error("missing map");if(typeof e.mapIndex=="function")return e;if(typeof e.map=="function"&&Si(e))return qat(e);if(typeof e=="function")return T_(V3(e));switch(`${e}`.toLowerCase()){case"cumsum":return Hat;case"rank":return T_((t,n)=>tF(t,r=>n[r]));case"quantile":return T_((t,n)=>Wat(t,r=>n[r]))}throw new Error(`invalid map: ${e}`)}function qat(e){return console.warn("deprecated map interface; implement mapIndex instead."),{mapIndex:e.map.bind(e)}}function Wat(e,t){const n=Yb(e,t)-1;return tF(e,t).map(r=>r/n)}function T_(e){return{mapIndex(t,n,r){const i=e(t,n);if(i.length!==t.length)throw new Error("map function returned a mismatched length");for(let s=0,o=t.length;s<o;++s)r[t[s]]=i[s]}}}const Hat={mapIndex(e,t,n){let r=0;for(const i of e)n[i]=r+=t[i]}};function Gat(e={},t){return arguments.length===1&&(t=e),VT(Pv(e),t)}function Xat(e={},t){return arguments.length===1&&(t=e),YT(Pv(e),t)}function Pv(e={}){typeof e=="number"&&(e={k:e});let{k:t,reduce:n,shift:r,anchor:i,strict:s}=e;if(i===void 0&&r!==void 0&&(i=Kat(r),$o(`Warning: the shift option is deprecated; please use anchor "${i}" instead.`)),!((t=Math.floor(t))>0))throw new Error(`invalid k: ${t}`);return Zat(n)(t,Qat(i,t),s)}function Qat(e="middle",t){switch(`${e}`.toLowerCase()){case"middle":return t-1>>1;case"start":return 0;case"end":return t-1}throw new Error(`invalid anchor: ${e}`)}function Kat(e){switch(`${e}`.toLowerCase()){case"centered":return"middle";case"leading":return"start";case"trailing":return"end"}throw new Error(`invalid shift: ${e}`)}function Zat(e="mean"){if(typeof e=="string"){if(/^p\d{2}$/i.test(e))return F0(z3(e));switch(e.toLowerCase()){case"deviation":return F0(ey);case"max":return B0((t,n)=>Ne(t,r=>n[r]));case"mean":return Jat;case"median":return F0(fp);case"min":return B0((t,n)=>vn(t,r=>n[r]));case"mode":return B0((t,n)=>JO(t,r=>n[r]));case"sum":return h7;case"variance":return F0(n3);case"difference":return nlt;case"ratio":return rlt;case"first":return ilt;case"last":return slt}}if(typeof e!="function")throw new Error(`invalid reduce: ${e}`);return B0(V3(e))}function F0(e){return(t,n,r)=>r?{mapIndex(i,s,o){const a=c=>s[c]==null?NaN:+s[c];let l=0;for(let c=0;c<t-1;++c)isNaN(a(c))&&++l;for(let c=0,u=i.length-t+1;c<u;++c)isNaN(a(c+t-1))&&++l,o[i[c+n]]=l===0?e(oc(i,c,c+t),a):NaN,isNaN(a(c))&&--l}}:{mapIndex(i,s,o){const a=l=>s[l]==null?NaN:+s[l];for(let l=-n;l<0;++l)o[i[l+n]]=e(oc(i,0,l+t),a);for(let l=0,c=i.length-n;l<c;++l)o[i[l+n]]=e(oc(i,l,l+t),a)}}}function B0(e){return(t,n,r)=>r?{mapIndex(i,s,o){let a=0;for(let l=0;l<t-1;++l)a+=Qn(s[i[l]]);for(let l=0,c=i.length-t+1;l<c;++l)a+=Qn(s[i[l+t-1]]),a===t&&(o[i[l+n]]=e(oc(i,l,l+t),s)),a-=Qn(s[i[l]])}}:{mapIndex(i,s,o){for(let a=-n;a<0;++a)o[i[a+n]]=e(oc(i,0,a+t),s);for(let a=0,l=i.length-n;a<l;++a)o[i[a+n]]=e(oc(i,a,a+t),s)}}}function h7(e,t,n){return n?{mapIndex(r,i,s){let o=0,a=0;for(let l=0;l<e-1;++l){const c=i[r[l]];c===null||isNaN(c)?++o:a+=+c}for(let l=0,c=r.length-e+1;l<c;++l){const u=i[r[l]],f=i[r[l+e-1]];f===null||isNaN(f)?++o:a+=+f,s[r[l+t]]=o===0?a:NaN,u===null||isNaN(u)?--o:a-=+u}}}:{mapIndex(r,i,s){let o=0;const a=r.length;for(let l=0,c=Math.min(a,e-t-1);l<c;++l)o+=+i[r[l]]||0;for(let l=-t,c=a-t;l<c;++l)o+=+i[r[l+e-1]]||0,s[r[l+t]]=o,o-=+i[r[l]]||0}}}function Jat(e,t,n){if(n){const r=h7(e,t,n);return{mapIndex(i,s,o){r.mapIndex(i,s,o);for(let a=0,l=i.length-e+1;a<l;++a)o[i[a+t]]/=e}}}else return{mapIndex(r,i,s){let o=0,a=0;const l=r.length;for(let c=0,u=Math.min(l,e-t-1);c<u;++c){let f=i[r[c]];f!==null&&!isNaN(f=+f)&&(o+=f,++a)}for(let c=-t,u=l-t;c<u;++c){let f=i[r[c+e-1]],d=i[r[c]];f!==null&&!isNaN(f=+f)&&(o+=f,++a),s[r[c+t]]=o/a,d!==null&&!isNaN(d=+d)&&(o-=d,--a)}}}}function tlt(e,t,n,r){for(let i=n+r;n<i;++n){const s=e[t[n]];if(Qn(s))return s}}function elt(e,t,n,r){for(let i=n+r-1;i>=n;--i){const s=e[t[i]];if(Qn(s))return s}}function p7(e,t,n,r){for(let i=n+r;n<i;++n){let s=e[t[n]];if(s!==null&&!isNaN(s=+s))return s}}function y7(e,t,n,r){for(let i=n+r-1;i>=n;--i){let s=e[t[i]];if(s!==null&&!isNaN(s=+s))return s}}function nlt(e,t,n){return n?{mapIndex(r,i,s){for(let o=0,a=r.length-e;o<a;++o){const l=i[r[o]],c=i[r[o+e-1]];s[r[o+t]]=l===null||c===null?NaN:c-l}}}:{mapIndex(r,i,s){for(let o=-t,a=r.length-e+t+1;o<a;++o)s[r[o+t]]=y7(i,r,o,e)-p7(i,r,o,e)}}}function rlt(e,t,n){return n?{mapIndex(r,i,s){for(let o=0,a=r.length-e;o<a;++o){const l=i[r[o]],c=i[r[o+e-1]];s[r[o+t]]=l===null||c===null?NaN:c/l}}}:{mapIndex(r,i,s){for(let o=-t,a=r.length-e+t+1;o<a;++o)s[r[o+t]]=y7(i,r,o,e)/p7(i,r,o,e)}}}function ilt(e,t,n){return n?{mapIndex(r,i,s){for(let o=0,a=r.length-e;o<a;++o)s[r[o+t]]=i[r[o]]}}:{mapIndex(r,i,s){for(let o=-t,a=r.length-e+t+1;o<a;++o)s[r[o+t]]=tlt(i,r,o,e)}}}function slt(e,t,n){return n?{mapIndex(r,i,s){for(let o=0,a=r.length-e;o<a;++o)s[r[o+t]]=i[r[o+e-1]]}}:{mapIndex(r,i,s){for(let o=-t,a=r.length-e+t+1;o<a;++o)s[r[o+t]]=elt(i,r,o,e)}}}const No={n:20,k:2,color:"currentColor",opacity:.2,strict:!0,anchor:"end"};function olt(e,{x:t=gt,y:n,k:r=No.k,color:i=No.color,opacity:s=No.opacity,fill:o=i,fillOpacity:a=s,stroke:l=i,strokeOpacity:c,strokeWidth:u,...f}={}){return Gi(He(o)?null:Ap(e,Po({x1:ac({k:-r,...f}),x2:ac({k:r,...f})},{x1:t,x2:t,y:n,fill:o,fillOpacity:a,...f})),He(l)?null:Mp(e,Po({x:ac(f)},{x:t,y:n,stroke:l,strokeOpacity:c,strokeWidth:u,...f})))}function alt(e,{x:t,y:n=gt,k:r=No.k,color:i=No.color,opacity:s=No.opacity,fill:o=i,fillOpacity:a=s,stroke:l=i,strokeOpacity:c,strokeWidth:u,...f}={}){return Gi(He(o)?null:Pf(e,Po({y1:ac({k:-r,...f}),y2:ac({k:r,...f})},{x:t,y1:n,y2:n,fill:o,fillOpacity:a,...f})),He(l)?null:$p(e,Po({y:ac(f)},{x:t,y:n,stroke:l,strokeOpacity:c,strokeWidth:u,...f})))}function ac({n:e=No.n,k:t=0,strict:n=No.strict,anchor:r=No.anchor}={}){return Pv({k:e,reduce:i=>qb(i)+t*(ey(i)||0),strict:n,anchor:r})}const llt={ariaLabel:"tick",fill:null,stroke:"currentColor"};class m7 extends we{constructor(t,n,r){super(t,n,r,llt),cd(this,r)}render(t,n,r,i,s){return ne("svg:g",s).call(ke,this,i,s).call(this._transform,this,n).call(o=>o.selectAll().data(t).enter().append("line").call(Ee,this).attr("x1",this._x1(n,r,i)).attr("x2",this._x2(n,r,i)).attr("y1",this._y1(n,r,i)).attr("y2",this._y2(n,r,i)).call(dn,this,r).call(Ey,this,r,s)).node()}}class g7 extends m7{constructor(t,n={}){const{x:r,y:i,inset:s=0,insetTop:o=s,insetBottom:a=s}=n;super(t,{x:{value:r,scale:"x"},y:{value:i,scale:"y",type:"band",optional:!0}},n),this.insetTop=Vt(o),this.insetBottom=Vt(a)}_transform(t,n,{x:r}){t.call(ve,n,{x:r},Tn,0)}_x1(t,{x:n}){return r=>n[r]}_x2(t,{x:n}){return r=>n[r]}_y1({y:t},{y:n},{marginTop:r}){const{insetTop:i}=this;return n&&t?s=>n[s]+i:r+i}_y2({y:t},{y:n},{height:r,marginBottom:i}){const{insetBottom:s}=this;return n&&t?o=>n[o]+t.bandwidth()-s:r-i-s}}class b7 extends m7{constructor(t,n={}){const{x:r,y:i,inset:s=0,insetRight:o=s,insetLeft:a=s}=n;super(t,{y:{value:i,scale:"y"},x:{value:r,scale:"x",type:"band",optional:!0}},n),this.insetRight=Vt(o),this.insetLeft=Vt(a)}_transform(t,n,{y:r}){t.call(ve,n,{y:r},0,Tn)}_x1({x:t},{x:n},{marginLeft:r}){const{insetLeft:i}=this;return n&&t?s=>n[s]+i:r+i}_x2({x:t},{x:n},{width:r,marginRight:i}){const{insetRight:s}=this;return n&&t?o=>n[o]+t.bandwidth()-s:r-i-s}_y1(t,{y:n}){return r=>n[r]}_y2(t,{y:n}){return r=>n[r]}}function v7(e,{x:t=gt,...n}={}){return new g7(e,{...n,x:t})}function w7(e,{y:t=gt,...n}={}){return new b7(e,{...n,y:t})}function clt(e,{x:t=gt,y:n=null,fill:r="#ccc",fillOpacity:i,stroke:s="currentColor",strokeOpacity:o,strokeWidth:a=2,sort:l,...c}={}){const u=n!=null?Ip:Z3;return Gi(qa(e,u({x1:qT,x2:WT},{x:t,y:n,stroke:s,strokeOpacity:o,...c})),ql(e,u({x1:"p25",x2:"p75"},{x:t,y:n,fill:r,fillOpacity:i,...c})),v7(e,u({x:"p50"},{x:t,y:n,stroke:s,strokeOpacity:o,strokeWidth:a,sort:l,...c})),dl(e,Po({x:_7},{x:t,y:n,z:n,stroke:s,strokeOpacity:o,...c})))}function ult(e,{y:t=gt,x:n=null,fill:r="#ccc",fillOpacity:i,stroke:s="currentColor",strokeOpacity:o,strokeWidth:a=2,sort:l,...c}={}){const u=n!=null?xp:Z3;return Gi(Ya(e,u({y1:qT,y2:WT},{x:n,y:t,stroke:s,strokeOpacity:o,...c})),Wl(e,u({y1:"p25",y2:"p75"},{x:n,y:t,fill:r,fillOpacity:i,...c})),w7(e,u({y:"p50"},{x:n,y:t,stroke:s,strokeOpacity:o,strokeWidth:a,sort:l,...c})),dl(e,Po({y:_7},{x:n,y:t,z:n,stroke:s,strokeOpacity:o,...c})))}function _7(e){const t=qT(e),n=WT(e);return e.map(r=>r<t||r>n?r:NaN)}function qT(e){const t=S7(e)*2.5-x7(e)*1.5;return vn(e,n=>n>=t?n:NaN)}function WT(e){const t=x7(e)*2.5-S7(e)*1.5;return Ne(e,n=>n<=t?n:NaN)}function S7(e){return Pa(e,.25)}function x7(e){return Pa(e,.75)}const flt={ariaLabel:"raster",stroke:null,pixelSize:1};function Qc(e,t){const n=+e;if(isNaN(n))throw new Error(`invalid ${t}: ${e}`);return n}function uN(e,t){const n=Math.floor(e);if(isNaN(n))throw new Error(`invalid ${t}: ${e}`);return n}class I7 extends we{constructor(t,n,r={},i){let{width:s,height:o,x:a,y:l,x1:c=a==null?0:void 0,y1:u=l==null?0:void 0,x2:f=a==null?s:void 0,y2:d=l==null?o:void 0,pixelSize:h=i.pixelSize,blur:p=0,interpolate:g}=r;if(s!=null&&(s=uN(s,"width")),o!=null&&(o=uN(o,"height")),c!=null&&(c=Qc(c,"x1")),u!=null&&(u=Qc(u,"y1")),f!=null&&(f=Qc(f,"x2")),d!=null&&(d=Qc(d,"y2")),a==null&&(c==null||f==null))throw new Error("missing x");if(l==null&&(u==null||d==null))throw new Error("missing y");t!=null&&s!=null&&o!=null&&(a===void 0&&c!=null&&f!=null&&(a=wlt(c,f,s)),l===void 0&&u!=null&&d!=null&&(l=_lt(u,d,s,o))),super(t,{x:{value:a,scale:"x",optional:!0},y:{value:l,scale:"y",optional:!0},x1:{value:c==null?null:[c],scale:"x",optional:!0,filter:null},y1:{value:u==null?null:[u],scale:"y",optional:!0,filter:null},x2:{value:f==null?null:[f],scale:"x",optional:!0,filter:null},y2:{value:d==null?null:[d],scale:"y",optional:!0,filter:null},...n},r,i),this.width=s,this.height=o,this.pixelSize=Qc(h,"pixelSize"),this.blur=Qc(p,"blur"),this.interpolate=a==null||l==null?null:hlt(g)}}class T7 extends I7{constructor(t,n={}){const{imageRendering:r}=n;if(t==null){const{fill:i,fillOpacity:s}=n;Ze(s)[0]!==void 0&&(n=JS("fillOpacity",n)),wr(i)[0]!==void 0&&(n=JS("fill",n))}super(t,void 0,n,flt),this.imageRendering=Ye(r,"auto")}scale(t,{color:n,...r},i){return super.scale(t,r,i)}render(t,n,r,i,s){var M;const o=n[(M=r.channels.fill)==null?void 0:M.scale]??($=>$),{x:a,y:l}=r,{document:c}=s,[u,f,d,h]=A7(r,i,s),p=d-u,g=h-f,{pixelSize:v,width:y=Math.round(Math.abs(p)/v),height:m=Math.round(Math.abs(g)/v)}=this,b=y*m;let{fill:w,fillOpacity:S}=r,_=0;if(this.interpolate){const $=y/p,B=m/g,O=Se(a,F=>(F-u)*$,Float64Array),C=Se(l,F=>(F-f)*B,Float64Array);w&&(w=this.interpolate(t,y,m,O,C,w)),S&&(S=this.interpolate(t,y,m,O,C,S))}else this.data==null&&t&&(_=t.fi*b);const x=c.createElement("canvas");x.width=y,x.height=m;const E=x.getContext("2d"),N=E.createImageData(y,m),I=N.data;let{r:A,g:D,b:R}=bi(this.fill)??{r:0,g:0,b:0},T=(this.fillOpacity??1)*255;for(let $=0;$<b;++$){const B=$<<2;if(w){const O=o(w[$+_]);if(O==null){I[B+3]=0;continue}({r:A,g:D,b:R}=bi(O))}S&&(T=S[$+_]*255),I[B+0]=A,I[B+1]=D,I[B+2]=R,I[B+3]=T}return this.blur>0&&fG(N,this.blur),E.putImageData(N,0,0),ne("svg:g",s).call(ke,this,i,s).call(ve,this,n).call($=>$.append("image").attr("transform",`translate(${u},${f}) scale(${Math.sign(d-u)},${Math.sign(h-f)})`).attr("width",Math.abs(p)).attr("height",Math.abs(g)).attr("preserveAspectRatio","none").call(ut,"image-rendering",this.imageRendering).call(Ee,this).attr("xlink:href",x.toDataURL())).node()}}function E7(e,t,n){arguments.length<3&&(n=t,t=null);let{x:r,y:i,[e]:s,...o}=n;return r===void 0&&i===void 0&&Rrt(t)&&(r=gy,i=_p,s===void 0&&(s=krt)),[t,{...o,x:r,y:i,[e]:s}]}function dlt(){const[e,t]=E7("fill",...arguments);return new T7(e,e==null||t.fill!==void 0||t.fillOpacity!==void 0?t:{...t,fill:gt})}function A7({x1:e,y1:t,x2:n,y2:r},i,{projection:s}){const{width:o,height:a,marginTop:l,marginRight:c,marginBottom:u,marginLeft:f}=i;return[e&&s==null?e[0]:f,t&&s==null?t[0]:l,n&&s==null?n[0]:o-c,r&&s==null?r[0]:a-u]}function M7({x1:e,y1:t,x2:n,y2:r},i,s,o){const a={};return e&&(a.x1=e),t&&(a.y1=t),n&&(a.x2=n),r&&(a.y2=r),A7(oT(a,i),s,o)}function JS(e,t={}){const{[e]:n}=t;if(typeof n!="function")throw new Error(`invalid ${e}: not a function`);return Sr({...t,[e]:void 0},function(r,i,s,o,a,l){const{x:c,y:u}=o;if(!c)throw new Error("missing scale: x");if(!u)throw new Error("missing scale: y");const[f,d,h,p]=M7(s,o,a,l),g=h-f,v=p-d,{pixelSize:y}=this,{width:m=Math.round(Math.abs(g)/y),height:b=Math.round(Math.abs(v)/y)}=t,w=new Array(m*b*(i?i.length:1)),S=g/m,_=v/b;let x=0;for(const E of i??[void 0])for(let N=.5;N<b;++N)for(let I=.5;I<m;++I,++x)w[x]=n(c.invert(f+I*S),u.invert(d+N*_),E);return{data:w,facets:i,channels:{[e]:{value:w,scale:"auto"}}}})}function hlt(e){if(typeof e=="function")return e;if(e==null)return tx;switch(`${e}`.toLowerCase()){case"none":return tx;case"nearest":return N7;case"barycentric":return $7();case"random-walk":return k7()}throw new Error(`invalid interpolate: ${e}`)}function tx(e,t,n,r,i,s){const o=new Array(t*n);for(const a of e)r[a]<0||r[a]>=t||i[a]<0||i[a]>=n||(o[Math.floor(i[a])*t+Math.floor(r[a])]=s[a]);return o}function $7({random:e=E3(42)}={}){return(t,n,r,i,s,o)=>{const{points:a,triangles:l,hull:c}=ol.from(t,h=>i[h],h=>s[h]),u=new o.constructor(n*r).fill(NaN),f=new Uint8Array(n*r),d=vlt(o,e);for(let h=0;h<l.length;h+=3){const p=l[h],g=l[h+1],v=l[h+2],y=a[2*p],m=a[2*g],b=a[2*v],w=a[2*p+1],S=a[2*g+1],_=a[2*v+1],x=Math.min(y,m,b),E=Math.max(y,m,b),N=Math.min(w,S,_),I=Math.max(w,S,_),A=(S-_)*(y-b)+(w-_)*(b-m);if(!A)continue;const D=o[t[p]],R=o[t[g]],T=o[t[v]];for(let M=Math.floor(x);M<E;++M)for(let $=Math.floor(N);$<I;++$){if(M<0||M>=n||$<0||$>=r)continue;const B=M+.5,O=$+.5,C=((S-_)*(B-b)+(O-_)*(b-m))/A;if(C<0)continue;const F=((_-w)*(B-b)+(O-_)*(y-b))/A;if(F<0)continue;const P=1-C-F;if(P<0)continue;const z=M+n*$;u[z]=d(D,C,R,F,T,P,M,$),f[z]=1}}return plt(u,f,i,s,o,n,r,c,t,d),u}}function plt(e,t,n,r,i,s,o,a,l,c){n=Float64Array.from(a,h=>n[l[h]]),r=Float64Array.from(a,h=>r[l[h]]),i=Array.from(a,h=>i[l[h]]);const u=n.length,f=Array.from({length:u},(h,p)=>mlt(p,n,r));let d=0;for(let h=0;h<o;++h){const p=h+.5;for(let g=0;g<s;++g){const v=g+s*h;if(!t[v]){const y=g+.5;for(let m=0;m<u;++m){const b=(u+d+(m%2?(m+1)/2:-m/2))%u;if(f[b](y,p)){const w=ylt(n.at(b-1),r.at(b-1),n[b],r[b],y,p);e[v]=c(i.at(b-1),w,i[b],1-w,i[b],0,g,h),d=b;break}}}}}}function ylt(e,t,n,r,i,s){const o=n-e,a=r-t,l=o*(n-i)+a*(r-s),c=o*(i-e)+a*(s-t);return l>0&&c>0?l/(l+c):+(l>c)}function jd(e,t,n,r){return e*r-n*t}function mlt(e,t,n){const r=t.length,i=t.at(e-2),s=n.at(e-2),o=t.at(e-1),a=n.at(e-1),l=t[e],c=n[e],u=t.at(e+1-r),f=n.at(e+1-r),d=o-l,h=a-c,p=i-o,g=s-a,v=l-u,y=c-f,m=Math.hypot(d,h),b=Math.hypot(p,g),w=Math.hypot(v,y);return(S,_)=>{const x=S-o,E=_-a,N=S-l,I=_-c;return jd(x,E,N,I)>-1e-6&&jd(x,E,d,h)*b-jd(x,E,p,g)*m>-1e-6&&jd(N,I,v,y)*m-jd(N,I,d,h)*w<=0}}function N7(e,t,n,r,i,s){const o=new s.constructor(t*n),a=ol.from(e,u=>r[u],u=>i[u]);let l,c;for(let u=.5,f=0;u<n;++u){c=l;for(let d=.5;d<t;++d,++f)c=a.find(d,u,c),d===.5&&(l=c),o[f]=s[e[c]]}return o}function k7({random:e=E3(42),minDistance:t=.5,maxSteps:n=2}={}){return(r,i,s,o,a,l)=>{const c=new l.constructor(i*s),u=ol.from(r,p=>o[p],p=>a[p]);let f,d,h;for(let p=.5,g=0;p<s;++p){d=f;for(let v=.5;v<i;++v,++g){let y=v,m=p;h=d=u.find(y,m,d),v===.5&&(f=d);let b,w=0;for(;(b=Math.hypot(o[r[h]]-y,a[r[h]]-m))>t&&w<n;){const S=e(v,p,w)*2*Math.PI;y+=Math.cos(S)*b,m+=Math.sin(S)*b,h=u.find(y,m,h),++w}c[g]=l[r[h]]}}return c}}function glt(e,t,n,r,i,s){return t*e+r*n+s*i}function blt(e){return(t,n,r,i,s,o,a,l)=>{const c=e(a,l);return c<n?t:c<n+i?r:s}}function vlt(e,t){return Ou(e)||Zn(e)?glt:blt(t)}function wlt(e,t,n){return{transform(r){const i=r.length,s=new Float64Array(i),o=(t-e)/n,a=e+o/2;for(let l=0;l<i;++l)s[l]=l%n*o+a;return s}}}function _lt(e,t,n,r){return{transform(i){const s=i.length,o=new Float64Array(s),a=(t-e)/r,l=e+a/2;for(let c=0;c<s;++c)o[c]=Math.floor(c/n)%r*a+l;return o}}}const fN={ariaLabel:"contour",fill:"none",stroke:"currentColor",strokeMiterlimit:1,pixelSize:2};class D7 extends I7{constructor(t,{smooth:n=!0,value:r,...i}={}){const s=yC({},i,fN);if(r===void 0){for(const a in s)if(s[a].value!=null){if(r!==void 0)throw new Error("ambiguous contour value");r=i[a],i[a]="value"}}if(r!=null){const a={transform:l=>l.map(c=>c.value),label:Wo(r)};for(const l in s)i[l]==="value"&&(i[l]=a)}if(t==null){if(r==null)throw new Error("missing contour value");i=JS("value",{value:r,...i}),r=null}else{let{interpolate:a}=i;r===void 0&&(r=gt),a===void 0&&(i.interpolate="nearest")}super(t,{value:{value:r,optional:!0}},Slt(i),fN);const o={geometry:{value:gt}};for(const a in this.channels){const l=this.channels[a],{scale:c}=l;c==="x"||c==="y"||a==="value"||(o[a]=l,delete this.channels[a])}this.contourChannels=o,this.smooth=!!n}filter(t,{x:n,y:r,value:i,...s},o){return super.filter(t,s,o)}render(t,n,r,i,s){const{geometry:o}=r,a=al();return ne("svg:g",s).call(ke,this,i,s).call(ve,this,n).call(l=>{l.selectAll().data(t).enter().append("path").call(Ee,this).attr("d",c=>a(o[c])).call(dn,this,r)}).node()}}function Slt({thresholds:e,interval:t,...n}){return e=X5(e,t,o3),Sr(n,function(r,i,s,o,a,l){const[c,u,f,d]=M7(s,o,a,l),h=f-c,p=d-u,{pixelSize:g,width:v=Math.round(Math.abs(h)/g),height:y=Math.round(Math.abs(p)/g)}=this,m=v/h,b=y/p,w=s.value.value,S=[];if(this.interpolate){const{x:I,y:A}=Tv(s,o,l),D=Se(I,$=>($-c)*m,Float64Array),R=Se(A,$=>($-u)*b,Float64Array),T=[s.x,s.y,s.value],M=[D,R,w];for(const $ of i){const B=this.filter($,T,M);S.push(this.interpolate(B,v,y,D,R,w))}}else if(i){const I=v*y,A=i.length;for(let D=0;D<A;++D)S.push(w.slice(D*I,D*I+I))}else S.push(w);if(this.blur>0)for(const I of S)VO({data:I,width:v,height:y},this.blur);const _=xlt(e,w,...Tlt(S));if(_===null)throw new Error(`unsupported thresholds: ${e}`);const{contour:x}=Pg().size([v,y]).smooth(this.smooth),E=[],N=[];for(const I of S)N.push(kr(E.length,E.push(...Se(_,A=>x(I,A)))));for(const{coordinates:I}of E)for(const A of I)for(const D of A)for(const R of D)R[0]=R[0]/m+c,R[1]=R[1]/b+u;return{data:E,facets:N,channels:uC(this.contourChannels,E)}})}function xlt(e,t,n,r){if(typeof(e==null?void 0:e.range)=="function")return e.range(e.floor(n),r);if(typeof e=="function"&&(e=e(t,n,r)),typeof e!="number")return _r(e);const i=Ua(...XO(n,r,e),e);for(;i[i.length-1]>=r;)i.pop();for(;i[1]<n;)i.shift();return i}function Ilt(){return new D7(...E7("value",...arguments))}function Tlt(e){return[vn(e,t=>vn(t,dN)),Ne(e,t=>Ne(t,dN))]}function dN(e){return isFinite(e)?e:NaN}function Elt(e,t){return HT(gT,e,t)}function Alt(e,t={}){return HT(bT,e,t)}function Mlt(e,t={}){return HT(vT,e,t)}function HT(e,t,n={}){const{x:r,y:i,maxRadius:s}=n,o=e({px:r,py:i,maxRadius:s}),a=[];r!=null&&a.push(Ya(t,hN("x",{...o,inset:-6},n))),i!=null&&a.push(qa(t,hN("y",{...o,inset:-6},n))),r!=null&&a.push(Lf(t,pN("x",{...o,dy:9,frameAnchor:"bottom",lineAnchor:"top"},n))),i!=null&&a.push(Lf(t,pN("y",{...o,dx:-9,frameAnchor:"left",textAnchor:"end"},n)));for(const l of a)l.ariaLabel=`crosshair ${l.ariaLabel}`;return Gi(...a)}function O7(e,{channels:t,...n},{facet:r,facetAnchor:i,fx:s,fy:o,[e]:a,channels:l,transform:c,initializer:u}){return{...n,facet:r,facetAnchor:i,fx:s,fy:o,[e]:a,channels:{...t,...l},transform:c,initializer:$lt(e,u)}}function $lt(e,t){return t==null?t:function(n,r,{x:i,y:s,px:o,py:a,...l},...c){const{channels:{x:u,y:f,...d}={},...h}=t.call(this,n,r,{...l,x:o,y:a},...c);return{channels:{...d,...u&&{px:u,...e==="x"&&{x:u}},...f&&{py:f,...e==="y"&&{y:f}}},...h}}}function hN(e,t,n){const{color:r="currentColor",opacity:i=.2,ruleStroke:s=r,ruleStrokeOpacity:o=i,ruleStrokeWidth:a}=n;return{...O7(e,t,n),stroke:s,strokeOpacity:o,strokeWidth:a}}function pN(e,t,n){const{color:r="currentColor",textFill:i=r,textFillOpacity:s,textStroke:o="white",textStrokeOpacity:a,textStrokeWidth:l=5}=n;return{...O7(e,t,Nlt(e,n)),fill:i,fillOpacity:s,stroke:o,strokeOpacity:a,strokeWidth:l}}function Nlt(e,t){return Sr(t,(n,r,i)=>{var s;return{channels:{text:{value:(s=qS(i,e))==null?void 0:s.value}}}})}const klt={ariaLabel:"delaunay link",fill:"none",stroke:"currentColor",strokeMiterlimit:1},Dlt={ariaLabel:"delaunay mesh",fill:null,stroke:"currentColor",strokeOpacity:.2},Olt={ariaLabel:"hull",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeMiterlimit:1},Flt={ariaLabel:"voronoi",fill:"none",stroke:"currentColor",strokeMiterlimit:1},Blt={ariaLabel:"voronoi mesh",fill:null,stroke:"currentColor",strokeOpacity:.2};class Rlt extends we{constructor(t,n={}){const{x:r,y:i,z:s,curve:o,tension:a}=n;super(t,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},z:{value:s,optional:!0}},n,klt),this.curve=$T(o,a),cd(this,n)}render(t,n,r,i,s){const{x:o,y:a}=n,{x:l,y:c,z:u}=r,{curve:f}=this,[d,h]=Ws(this,i),p=l?m=>l[m]:Pr(d),g=c?m=>c[m]:Pr(h),v=this;function y(m){let b=-1;const w=[],S={};for(const T in r)S[T]=[];const _=[],x=[],E=[],N=[];function I(T,M){T=m[T],M=m[M],w.push(++b),_[b]=p(T),E[b]=g(T),x[b]=p(M),N[b]=g(M);for(const $ in r)S[$].push(r[$][M])}const{halfedges:A,hull:D,triangles:R}=ol.from(m,p,g);for(let T=0;T<A.length;++T){const M=A[T];M>T&&I(R[T],R[M])}for(let T=0;T<D.length;++T)I(D[T],D[(T+1)%D.length]);me(this).selectAll().data(w).enter().append("path").call(Ee,v).attr("d",T=>{const M=So(),$=f(M);return $.lineStart(),$.point(_[T],E[T]),$.point(x[T],N[T]),$.lineEnd(),M}).call(dn,v,S).call(Ey,v,S,s)}return ne("svg:g",s).call(ke,this,i,s).call(ve,this,{x:l&&o,y:c&&a}).call(u?m=>m.selectAll().data(Yo(t,b=>u[b]).values()).enter().append("g").each(y):m=>m.datum(t).each(y)).node()}}class GT extends we{constructor(t,n={},r,i=({z:s})=>s){const{x:s,y:o}=n;super(t,{x:{value:s,scale:"x",optional:!0},y:{value:o,scale:"y",optional:!0},z:{value:i(n),optional:!0}},n,r)}render(t,n,r,i,s){const{x:o,y:a}=n,{x:l,y:c,z:u}=r,[f,d]=Ws(this,i),h=l?y=>l[y]:Pr(f),p=c?y=>c[y]:Pr(d),g=this;function v(y){const m=ol.from(y,h,p);me(this).append("path").datum(y[0]).call(Ee,g).attr("d",g._render(m,i)).call(dn,g,r)}return ne("svg:g",s).call(ke,this,i,s).call(ve,this,{x:l&&o,y:c&&a}).call(u?y=>y.selectAll().data(Yo(t,m=>u[m]).values()).enter().append("g").each(v):y=>y.datum(t).each(v)).node()}}class Llt extends GT{constructor(t,n={}){super(t,n,Dlt),this.fill="none"}_render(t){return t.render()}}class Clt extends GT{constructor(t,n={}){super(t,n,Olt,cl)}_render(t){return t.renderHull()}}class Ult extends we{constructor(t,n={}){const{x:r,y:i,z:s}=n;super(t,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},z:{value:s,optional:!0}},n,Flt)}render(t,n,r,i,s){const{x:o,y:a}=n,{x:l,y:c,z:u}=r,[f,d]=Ws(this,i),h=l?y=>l[y]:Pr(f),p=c?y=>c[y]:Pr(d),g=this;function v(y){const m=ol.from(y,h,p),b=F7(m,i);me(this).selectAll().data(y).enter().append("path").call(Ee,g).attr("d",(w,S)=>b.renderCell(S)).call(dn,g,r)}return ne("svg:g",s).call(ke,this,i,s).call(ve,this,{x:l&&o,y:c&&a}).call(u?y=>y.selectAll().data(Yo(t,m=>u[m]).values()).enter().append("g").each(v):y=>y.datum(t).each(v)).node()}}class Plt extends GT{constructor(t,n){super(t,n,Blt),this.fill="none"}_render(t,n){return F7(t,n).render()}}function F7(e,t){const{width:n,height:r,marginTop:i,marginRight:s,marginBottom:o,marginLeft:a}=t;return e.voronoi([a,i,n-s,r-o])}function $y(e,t,{x:n,y:r,...i}={}){return[n,r]=Zi(n,r),new e(t,{...i,x:n,y:r})}function zlt(e,t){return $y(Rlt,e,t)}function jlt(e,t){return $y(Llt,e,t)}function Vlt(e,t){return $y(Clt,e,t)}function Ylt(e,t){return $y(Ult,e,t)}function qlt(e,t){return $y(Plt,e,t)}const Wlt={ariaLabel:"density",fill:"none",stroke:"currentColor",strokeMiterlimit:1};class B7 extends we{constructor(t,{x:n,y:r,z:i,weight:s,fill:o,stroke:a,...l}={}){const c=yN(o)&&(o="currentColor",!0),u=yN(a)&&(a="currentColor",!0);super(t,{x:{value:n,scale:"x",optional:!0},y:{value:r,scale:"y",optional:!0},z:{value:cl({z:i,fill:o,stroke:a}),optional:!0},weight:{value:s,optional:!0}},Xlt({...l,fill:o,stroke:a},c,u),Wlt),c&&(this.fill=void 0),u&&(this.stroke=void 0),this.z=i}filter(t){return t}render(t,n,r,i,s){const{contours:o}=r,a=al();return ne("svg:g",s).call(ke,this,i,s).call(ve,this,{}).call(l=>l.selectAll().data(t).enter().append("path").call(Ee,this).call(dn,this,r).attr("d",c=>a(o[c]))).node()}}function Hlt(e,{x:t,y:n,...r}={}){return[t,n]=Zi(t,n),new B7(e,{...r,x:t,y:n})}const Glt=new Set(["x","y","z","weight"]);function Xlt(e,t,n){let{bandwidth:i,thresholds:s}=e;return i=i===void 0?20:+i,s=s===void 0?20:typeof(s==null?void 0:s[Symbol.iterator])=="function"?cr(s):+s,Sr(e,function(o,a,l,c,u,f){var R;const d=l.weight?cr(l.weight.value):null,h=(R=l.z)==null?void 0:R.value,{z:p}=this,[g,v]=Ws(this,u),{width:y,height:m}=u,{x:b,y:w}=Tv(l,c,f),S=Object.fromEntries(Object.entries(l).filter(([T])=>!Glt.has(T)).map(([T,M])=>[T,{...M,value:[]}])),_=t&&[],x=n&&[],E=WZ().x(b?T=>b[T]:g).y(w?T=>w[T]:v).weight(d?T=>d[T]:1).size([y,m]).bandwidth(i),N=[];for(const T of a){const M=[];N.push(M);for(const $ of h?lT(T,h,p):[T]){const B=E.contours($);M.push([$,B])}}let I=s;if(!(I instanceof Ff)){let T=0;for(const M of N)for(const[,$]of M){const B=$.max;B>T&&(T=B)}I=Float64Array.from({length:s-1},(M,$)=>T*100*($+1)/s)}const A=[],D=[];for(const T of N){const M=[];A.push(M);for(const[$,B]of T)for(const O of I){M.push(D.length),D.push(B(O/100)),_&&_.push(O),x&&x.push(O);for(const C in S)S[C].value.push(l[C].value[$[0]])}}return _&&_.push(0),x&&x.push(0),{data:o,facets:A,channels:{...S,..._&&{fill:{value:_,scale:"color"}},...x&&{stroke:{value:x,scale:"color"}},contours:{value:D}}}})}function yN(e){return/^density$/i.test(e)}const Qlt={ariaLabel:"geo",fill:"none",stroke:"currentColor",strokeWidth:1,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class R7 extends we{constructor(t,n={}){const[r,i]=Ze(n.r,3);super(t,{geometry:{value:n.geometry,scale:"projection"},r:{value:r,scale:"r",filter:Mo,optional:!0}},PT(n),Qlt),this.r=i}render(t,n,r,i,s){const{geometry:o,r:a}=r,l=al(s.projection??Klt(n)),{r:c}=this;return mv(c)?t=[]:c!==void 0&&l.pointRadius(c),ne("svg:g",s).call(ke,this,i,s).call(ve,this,n).call(u=>{u.selectAll().data(t).enter().append("path").call(Ee,this).attr("d",a?f=>l.pointRadius(a[f])(o[f]):f=>l(o[f])).call(dn,this,r)}).node()}}function Klt({x:e,y:t}){if(e||t)return e??(e=n=>n),t??(t=n=>n),a1({point(n,r){this.stream.point(e(n),t(r))}})}function XT(e,{geometry:t=gt,...n}={}){switch(e==null?void 0:e.type){case"FeatureCollection":e=e.features;break;case"GeometryCollection":e=e.geometries;break;case"Feature":case"LineString":case"MultiLineString":case"MultiPoint":case"MultiPolygon":case"Point":case"Polygon":case"Sphere":e=[e];break}return new R7(e,{geometry:t,...n})}function Zlt({strokeWidth:e=1.5,...t}={}){return XT({type:"Sphere"},{strokeWidth:e,...t})}function Jlt({strokeOpacity:e=.1,...t}={}){return XT(zJ(),{strokeOpacity:e,...t})}const Dh=.5,Oh=0;function tct(e={fill:"count"},{binWidth:t,...n}={}){const{z:r}=n;return t=t===void 0?20:Vt(t),e=tT(e,n),va(e,"fill")&&(n.channels={...n.channels,fill:{value:[]}}),n.symbol===void 0&&(n.symbol="hexagon"),n.r===void 0&&!va(e,"r")&&(n.r=t/2),Sr(n,(i,s,o,a,l,c)=>{let{x:u,y:f,z:d,fill:h,stroke:p,symbol:g}=o;if(u===void 0)throw new Error("missing channel: x");if(f===void 0)throw new Error("missing channel: y");({x:u,y:f}=Tv(o,a,c)),d=d?d.value:Pt(i,r),h=h==null?void 0:h.value,p=p==null?void 0:p.value,g=g==null?void 0:g.value;const v=rT(e,{z:d,fill:h,stroke:p,symbol:g}),y=d&&[],m=h&&[],b=p&&[],w=g&&[],S=[],_=[],x=[];let E=-1;for(const D of e)D.initialize(i);for(const D of s){const R=[];for(const T of e)T.scope("facet",D);for(const[T,M]of Zu(D,v))for(const $ of ect(M,u,f,t)){R.push(++E),_.push($.x),x.push($.y),d&&y.push(v===d?T:d[$[0]]),h&&m.push(v===h?T:h[$[0]]),p&&b.push(v===p?T:p[$[0]]),g&&w.push(v===g?T:g[$[0]]);for(const B of e)B.reduce($)}S.push(R)}const N=o.x.scale,I=o.y.scale,A={x:{value:_,source:a[N]?{value:Se(_,a[N].invert),scale:N}:null},y:{value:x,source:a[I]?{value:Se(x,a[I].invert),scale:I}:null},...d&&{z:{value:y}},...h&&{fill:{value:m,scale:"auto"}},...p&&{stroke:{value:b,scale:"auto"}},...g&&{symbol:{value:w,scale:"auto"}},...Object.fromEntries(e.map(({name:D,output:R})=>[D,{scale:"auto",label:R.label,radius:D==="r"?t/2:void 0,value:R.transform()}]))};return{data:i,facets:S,channels:A}})}function ect(e,t,n,r){const i=r*(1.5/sC),s=new Map;for(const o of e){let a=t[o],l=n[o];if(isNaN(a)||isNaN(l))continue;let c=Math.round(l=(l-Oh)/i),u=Math.round(a=(a-Dh)/r-(c&1)/2),f=l-c;if(Math.abs(f)*3>1){let p=a-u,g=u+(a<u?-1:1)/2,v=c+(l<c?-1:1),y=a-g,m=l-v;p*p+f*f>y*y+m*m&&(u=g+(c&1?1:-1)/2,c=v)}const d=`${u},${c}`;let h=s.get(d);h===void 0&&(s.set(d,h=[]),h.x=(u+(c&1)/2)*r+Dh,h.y=c*i+Oh),h.push(o)}return s.values()}const nct={ariaLabel:"hexgrid",fill:"none",stroke:"currentColor",strokeOpacity:.1};function rct(e){return new L7(e)}class L7 extends we{constructor({binWidth:t=20,clip:n=!0,...r}={}){super(kh,void 0,{clip:n,...r},nct),this.binWidth=Vt(t)}render(t,n,r,i,s){const{binWidth:o}=this,{marginTop:a,marginRight:l,marginBottom:c,marginLeft:u,width:f,height:d}=i,h=u-Dh,p=f-l-Dh,g=a-Oh,v=d-c-Oh,y=o/2,m=y*oC,b=m/2,w=y*2,S=m*1.5,_=Math.floor(h/w),x=Math.ceil(p/w),E=Math.floor((g+b)/S),N=Math.ceil((v-b)/S)+1,I=`m0,${ta(-m)}l${ta(y)},${ta(b)}v${ta(m)}l${ta(-y)},${ta(b)}`;let A=I;for(let D=E;D<N;++D)for(let R=_;R<x;++R)A+=`M${ta(R*w+(D&1)*y)},${ta(D*S)}${I}`;return ne("svg:g",s).datum(0).call(ke,this,i,s).call(ve,this,{},Tn+Dh,Tn+Oh).call(D=>D.append("path").call(Ee,this).call(dn,this,r).attr("d",A)).node()}}function ta(e){return Math.round(e*1e3)/1e3}const ict={ariaLabel:"image",fill:null,stroke:null};function sct(e){return/^\.*\//.test(e)}function oct(e){return/^(blob|data|file|http|https):/i.test(e)}function act(e){return typeof e=="string"&&(sct(e)||oct(e))?[void 0,e]:[e,void 0]}class C7 extends we{constructor(t,n={}){let{x:r,y:i,r:s,width:o,height:a,rotate:l,src:c,preserveAspectRatio:u,crossOrigin:f,frameAnchor:d,imageRendering:h}=n;s==null&&(s=void 0),s===void 0&&o===void 0&&a===void 0?o=a=16:o===void 0&&a!==void 0?o=a:a===void 0&&o!==void 0&&(a=o);const[p,g]=act(c),[v,y]=Ze(s),[m,b]=Ze(o,y!==void 0?y*2:void 0),[w,S]=Ze(a,y!==void 0?y*2:void 0),[_,x]=Ze(l,0);super(t,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},r:{value:v,scale:"r",filter:Mo,optional:!0},width:{value:m,filter:Mo,optional:!0},height:{value:w,filter:Mo,optional:!0},rotate:{value:_,optional:!0},src:{value:p,optional:!0}},PT(n),ict),this.src=g,this.width=b,this.rotate=x,this.height=S,this.r=y,this.preserveAspectRatio=Ye(u,"xMidYMid"),this.crossOrigin=Rn(f),this.frameAnchor=wy(d),this.imageRendering=Ye(h,"auto")}render(t,n,r,i,s){const{x:o,y:a}=n,{x:l,y:c,width:u,height:f,r:d,rotate:h,src:p}=r,{r:g,width:v,height:y,rotate:m}=this,[b,w]=Ws(this,i);return ne("svg:g",s).call(ke,this,i,s).call(ve,this,{x:l&&o,y:c&&a}).call(S=>S.selectAll().data(t).enter().append("image").call(Ee,this).attr("x",mN(l,u,d,b,v,g)).attr("y",mN(c,f,d,w,y,g)).attr("width",u?_=>u[_]:v!==void 0?v:d?_=>d[_]*2:g*2).attr("height",f?_=>f[_]:y!==void 0?y:d?_=>d[_]*2:g*2).attr("transform",h?_=>`rotate(${h[_]})`:m?`rotate(${m})`:null).attr("transform-origin",h||m?Nv`${l?_=>l[_]:b}px ${c?_=>c[_]:w}px`:null).call(ut,"href",p?_=>p[_]:this.src).call(ut,"preserveAspectRatio",this.preserveAspectRatio).call(ut,"crossorigin",this.crossOrigin).call(ut,"image-rendering",this.imageRendering).call(ut,"clip-path",d?_=>`circle(${d[_]}px)`:g!==void 0?`circle(${g}px)`:null).call(dn,this,r)).node()}}function mN(e,t,n,r,i,s){return t&&e?o=>e[o]-t[o]/2:t?o=>r-t[o]/2:e&&i!==void 0?o=>e[o]-i/2:i!==void 0?r-i/2:n&&e?o=>e[o]-n[o]:n?o=>r-n[o]:e?o=>e[o]-s:r-s}function lct(e,{x:t,y:n,...r}={}){return r.frameAnchor===void 0&&([t,n]=Zi(t,n)),new C7(e,{...r,x:t,y:n})}function cct(e,t,n){var r=1e-8,i=t-1,s=n-1,o=0,a,l,c,u,f,d,h,p,g,v,y;if(e<=0)return 0;if(e>=1)return 1;for(t>=1&&n>=1?(c=e<.5?e:1-e,u=Math.sqrt(-2*Math.log(c)),h=(2.30753+u*.27061)/(1+u*(.99229+u*.04481))-u,e<.5&&(h=-h),p=(h*h-3)/6,g=2/(1/(2*t-1)+1/(2*n-1)),v=h*Math.sqrt(p+g)/g-(1/(2*n-1)-1/(2*t-1))*(p+5/6-2/(3*g)),h=t/(t+n*Math.exp(2*v))):(a=Math.log(t/(t+n)),l=Math.log(n/(t+n)),u=Math.exp(t*a)/t,f=Math.exp(n*l)/n,v=u+f,e<u/v?h=Math.pow(t*v*e,1/t):h=1-Math.pow(n*v*(1-e),1/n)),y=-tf(t)-tf(n)+tf(t+n);o<10;o++){if(h===0||h===1)return h;if(d=uct(h,t,n)-e,u=Math.exp(i*Math.log(h)+s*Math.log(1-h)+y),f=d/u,h-=u=f/(1-.5*Math.min(1,f*(i/h-s/(1-h)))),h<=0&&(h=.5*(h+u)),h>=1&&(h=.5*(h+u+1)),Math.abs(u)<r*h&&o>0)break}return h}function uct(e,t,n){var r=e===0||e===1?0:Math.exp(tf(t+n)-tf(t)-tf(n)+t*Math.log(e)+n*Math.log(1-e));return e<0||e>1?!1:e<(t+1)/(t+n+2)?r*gN(e,t,n)/t:1-r*gN(1-e,n,t)/n}function gN(e,t,n){var r=1e-30,i=1,s=t+n,o=t+1,a=t-1,l=1,c=1-s*e/o,u,f,d,h;for(Math.abs(c)<r&&(c=r),c=1/c,h=c;i<=100&&(u=2*i,f=i*(n-i)*e/((a+u)*(t+u)),c=1+f*c,Math.abs(c)<r&&(c=r),l=1+f/l,Math.abs(l)<r&&(l=r),c=1/c,h*=c*l,f=-(t+i)*(s+i)*e/((t+u)*(o+u)),c=1+f*c,Math.abs(c)<r&&(c=r),l=1+f/l,Math.abs(l)<r&&(l=r),c=1/c,d=c*l,h*=d,!(Math.abs(d-1)<3e-7));i++);return h}function tf(e){var t=0,n=[76.18009172947146,-86.5053203294167,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18],r=1.000000000190015,i,s,o;for(o=(s=i=e)+5.5,o-=(i+.5)*Math.log(o);t<6;t++)r+=n[t]/++s;return Math.log(2.506628274631*r/i)-o}function fct(e,t){var n=cct(2*Math.min(e,1-e),.5*t,.5);return n=Math.sqrt(t*(1-n)/n),e>.5?n:-n}const dct={ariaLabel:"linear-regression",fill:"currentColor",fillOpacity:.1,stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class U7 extends we{constructor(t,n={}){const{x:r,y:i,z:s,ci:o=.95,precision:a=4}=n;if(super(t,{x:{value:r,scale:"x"},y:{value:i,scale:"y"},z:{value:cl(n),optional:!0}},n,dct),this.z=s,this.ci=+o,this.precision=+a,!(0<=this.ci&&this.ci<1))throw new Error(`invalid ci; not in [0, 1): ${o}`);if(!(this.precision>0))throw new Error(`invalid precision: ${a}`)}render(t,n,r,i,s){const{x:o,y:a,z:l}=r,{ci:c}=this;return ne("svg:g",s).call(ke,this,i,s).call(ve,this,n).call(u=>u.selectAll().data(l?lT(t,l,this.z):[t]).enter().call(f=>f.append("path").attr("fill","none").call(Ee,this).call(T1,this,{...r,fill:null,fillOpacity:null}).attr("d",d=>this._renderLine(d,o,a)).call(c&&!Bf(this.fill)?d=>d.select(hct).attr("stroke","none").call(Ee,this).call(T1,this,{...r,stroke:null,strokeOpacity:null,strokeWidth:null}).attr("d",h=>this._renderBand(h,o,a)):()=>{}))).node()}}function hct(){return this.parentNode.insertBefore(this.ownerDocument.createElementNS(wc.svg,"path"),this)}class pct extends U7{constructor(t,n){super(t,n)}_renderBand(t,n,r){const{ci:i,precision:s}=this,[o,a]=mn(t,u=>r[u]),l=O1(t,r,n),c=P7(t,r,n,(1-i)/2,l);return D3().y(u=>u).x0(u=>c(u,-1)).x1(u=>c(u,1))(kr(o,a-s/2,s).concat(a))}_renderLine(t,n,r){const[i,s]=mn(t,a=>r[a]),o=O1(t,r,n);return`M${o(i)},${i}L${o(s)},${s}`}}class yct extends U7{constructor(t,n){super(t,n)}_renderBand(t,n,r){const{ci:i,precision:s}=this,[o,a]=mn(t,u=>n[u]),l=O1(t,n,r),c=P7(t,n,r,(1-i)/2,l);return D3().x(u=>u).y0(u=>c(u,-1)).y1(u=>c(u,1))(kr(o,a-s/2,s).concat(a))}_renderLine(t,n,r){const[i,s]=mn(t,a=>n[a]),o=O1(t,n,r);return`M${i},${o(i)}L${s},${o(s)}`}}function mct(e,{y:t=Er,x:n=gt,stroke:r,fill:i=He(r)?"currentColor":r,...s}={}){return new pct(e,kT({...s,x:n,y:t,fill:i,stroke:r}))}function gct(e,{x:t=Er,y:n=gt,stroke:r,fill:i=He(r)?"currentColor":r,...s}={}){return new yct(e,NT({...s,x:t,y:n,fill:i,stroke:r}))}function O1(e,t,n){let r=0,i=0,s=0,o=0;for(const u of e){const f=t[u],d=n[u];r+=f,i+=d,s+=f*d,o+=f*f}const a=e.length,l=(a*s-r*i)/(a*o-r*r),c=(i-l*r)/a;return u=>l*u+c}function P7(e,t,n,r,i){const s=Cs(e,u=>t[u])/e.length;let o=0,a=0;for(const u of e)o+=(t[u]-s)**2,a+=(n[u]-i(t[u]))**2;const l=Math.sqrt(a/(e.length-2)),c=fct(r,e.length-2);return(u,f)=>{const d=i(u),h=l*Math.sqrt(1/e.length+(u-s)**2/o);return d+f*c*h}}function ex({path:e=gt,delimiter:t,frameAnchor:n,treeLayout:r=f1,treeSort:i,treeSeparation:s,treeAnchor:o,treeFilter:a,...l}={}){o=QT(o),i=j7(i),a!=null&&(a=rx(a)),n===void 0&&(n=o.frameAnchor);const c=V7(t),u=Q7(l,rx),[f,d]=Or(),[h,p]=Or();return{x:f,y:h,frameAnchor:n,...qs(l,(g,v)=>{const y=c(Pt(g,e)),m=d([]),b=p([]);let w=-1;const S=[],_=[],x=EB().path(N=>y[N]),E=r();E.nodeSize&&E.nodeSize([1,1]),E.separation&&s!==void 0&&E.separation(s??P3);for(const N of u)N[F1]=N[G7]([]);for(const N of v){const I=[],A=x(N.filter(D=>y[D]!=null)).each(D=>D.data=g[D.data]);i!=null&&A.sort(i),E(A);for(const D of A.descendants())if(!(a!=null&&!a(D))){I.push(++w),S[w]=D.data,o.position(D,w,m,b);for(const R of u)R[F1][w]=R[X7](D)}_.push(I)}return{data:S,facets:_}}),...Object.fromEntries(u)}}function z7({path:e=gt,delimiter:t,curve:n="bump-x",stroke:r="#555",strokeWidth:i=1.5,strokeOpacity:s=.5,treeLayout:o=f1,treeSort:a,treeSeparation:l,treeAnchor:c,treeFilter:u,...f}={}){c=QT(c),a=j7(a),u!=null&&(u=vN(u)),f={curve:n,stroke:r,strokeWidth:i,strokeOpacity:s,...f};const d=V7(t),h=Q7(f,vN),[p,g]=Or(),[v,y]=Or(),[m,b]=Or(),[w,S]=Or();return{x1:p,x2:v,y1:m,y2:w,...qs(f,(_,x)=>{const E=d(Pt(_,e)),N=g([]),I=y([]),A=b([]),D=S([]);let R=-1;const T=[],M=[],$=EB().path(O=>E[O]),B=o();B.nodeSize&&B.nodeSize([1,1]),B.separation&&l!==void 0&&B.separation(l??P3);for(const O of h)O[F1]=O[G7]([]);for(const O of x){const C=[],F=$(O.filter(P=>E[P]!=null)).each(P=>P.data=_[P.data]);a!=null&&F.sort(a),B(F);for(const{source:P,target:z}of F.links())if(!(u!=null&&!u(z,P))){C.push(++R),T[R]=z.data,c.position(P,R,N,A),c.position(z,R,I,D);for(const H of h)H[F1][R]=H[X7](z,P)}M.push(C)}return{data:T,facets:M}}),...Object.fromEntries(h)}}function QT(e="left"){switch(`${e}`.trim().toLowerCase()){case"left":return bct;case"right":return vct}throw new Error(`invalid tree anchor: ${e}`)}const bct={frameAnchor:"left",dx:6,position({x:e,y:t},n,r,i){r[n]=t,i[n]=-e}},vct={frameAnchor:"right",dx:-6,position({x:e,y:t},n,r,i){r[n]=-t,i[n]=-e}};function j7(e){return e==null||typeof e=="function"?e:`${e}`.trim().toLowerCase().startsWith("node:")?bN(rx(e)):bN(wct(e))}function bN(e){return(t,n)=>vi(e(t),e(n))}function wct(e){return t=>{var n;return(n=t.data)==null?void 0:n[e]}}function V7(e="/"){if(e=`${e}`,e==="/")return n=>n;if(e.length!==1)throw new Error("delimiter must be exactly one character");const t=e.charCodeAt(0);return n=>n.map(r=>_ct(r,t))}const nx=92,Y7=47;function _ct(e,t){if(t===nx)throw new Error("delimiter cannot be backslash");let n=!1;for(let r=0,i=e.length;r<i;++r){switch(e.charCodeAt(r)){case nx:if(!n){n=!0;continue}break;case t:n?(e=e.slice(0,r-1)+e.slice(r),--r,--i):e=e.slice(0,r)+"/"+e.slice(r+1);break;case Y7:n?(e=e.slice(0,r)+"\\\\"+e.slice(r),r+=2,i+=2):(e=e.slice(0,r)+"\\"+e.slice(r),++r,++i);break}n=!1}return e}function Sct(e){let t=!1;for(let n=0,r=e.length;n<r;++n){switch(e.charCodeAt(n)){case nx:if(!t){t=!0;continue}case Y7:t&&(e=e.slice(0,n-1)+e.slice(n),--n,--r);break}t=!1}return e}function q7(e){return Si(e)&&typeof e.node=="function"}function xct(e){return Si(e)&&typeof e.link=="function"}function rx(e){if(q7(e))return e.node;if(e=`${e}`.trim().toLowerCase(),!!e.startsWith("node:")){switch(e){case"node:name":return sx;case"node:path":return ix;case"node:internal":return W7;case"node:external":return H7;case"node:depth":return ox;case"node:height":return ax}throw new Error(`invalid node value: ${e}`)}}function vN(e){if(q7(e))return e.node;if(xct(e))return e.link;if(e=`${e}`.trim().toLowerCase(),!(!e.startsWith("node:")&&!e.startsWith("parent:"))){switch(e){case"parent:name":return R0(sx);case"parent:path":return R0(ix);case"parent:depth":return R0(ox);case"parent:height":return R0(ax);case"node:name":return sx;case"node:path":return ix;case"node:internal":return W7;case"node:external":return H7;case"node:depth":return ox;case"node:height":return ax}throw new Error(`invalid link value: ${e}`)}}function ix(e){return e.id}function sx(e){return Ict(e.id)}function ox(e){return e.depth}function ax(e){return e.height}function W7(e){return!!e.children}function H7(e){return!e.children}function R0(e){return(t,n)=>n==null?void 0:e(n)}function Ict(e){let t=e.length;for(;--t>0&&!Tct(e,t););return Sct(e.slice(t+1))}function Tct(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}const G7=2,X7=3,F1=4;function Q7(e,t){const n=[];for(const r in e){const i=e[r],s=t(i);s!==void 0&&n.push([r,...Or(i),s])}return n}function K7(e,{fill:t,stroke:n,strokeWidth:r,strokeOpacity:i,strokeLinejoin:s,strokeLinecap:o,strokeMiterlimit:a,strokeDasharray:l,strokeDashoffset:c,marker:u,markerStart:f=u,markerEnd:d=u,dot:h=He(f)&&He(d),text:p="node:name",textStroke:g="white",title:v="node:path",dx:y,dy:m,textAnchor:b,treeLayout:w=f1,textLayout:S=w===f1||w===xB?"mirrored":"normal",tip:_,...x}={}){if(y===void 0&&(y=QT(x.treeAnchor).dx),b!==void 0)throw new Error("textAnchor is not a configurable tree option");S=qr(S,"textLayout",["mirrored","normal"]);function E(N){return Lf(e,ex({treeLayout:w,text:p,fill:t===void 0?"currentColor":t,stroke:g,dx:y,dy:m,title:v,...N,...x}))}return Gi(a7(e,z7({treeLayout:w,markerStart:f,markerEnd:d,stroke:n!==void 0?n:t===void 0?"node:internal":t,strokeWidth:r,strokeOpacity:i,strokeLinejoin:s,strokeLinecap:o,strokeMiterlimit:a,strokeDasharray:l,strokeDashoffset:c,...x})),h?dl(e,ex({treeLayout:w,fill:t===void 0?"node:internal":t,title:v,tip:_,...x})):null,p!=null?S==="mirrored"?[E({textAnchor:"start",treeFilter:"node:external"}),E({textAnchor:"end",treeFilter:"node:internal",dx:-y})]:E():null)}function Ect(e,t){return K7(e,{...t,treeLayout:xB})}function Act({geometry:e=gt,...t}={}){return Sr({...t,x:null,y:null},(n,r,i,s,o,{projection:a})=>{const l=Pt(n,e),c=l.length,u=new Float64Array(c),f=new Float64Array(c),d=al(a);for(let h=0;h<c;++h)[u[h],f[h]]=d.centroid(l[h]);return{data:n,facets:r,channels:{x:{value:u,scale:a==null?"x":null,source:null},y:{value:f,scale:a==null?"y":null,source:null}}}})}function Mct({geometry:e=gt,...t}={}){let n;return{...t,x:{transform:r=>Float64Array.from(n=Pt(Pt(r,e),$J),([i])=>i)},y:{transform:()=>Float64Array.from(n,([,r])=>r)}}}function $ct(e,t,n,r,i){for(var s=i+1;r<=i;){var o=r+i>>>1,a=e[o],l=n!==void 0?n(a,t):a-t;l>=0?(s=o,i=o-1):r=o+1}return s}function Nct(e,t,n,r,i){for(var s=i+1;r<=i;){var o=r+i>>>1,a=e[o],l=n!==void 0?n(a,t):a-t;l>0?(s=o,i=o-1):r=o+1}return s}function kct(e,t,n,r,i){for(var s=r-1;r<=i;){var o=r+i>>>1,a=e[o],l=n!==void 0?n(a,t):a-t;l<0?(s=o,r=o+1):i=o-1}return s}function Dct(e,t,n,r,i){for(var s=r-1;r<=i;){var o=r+i>>>1,a=e[o],l=n!==void 0?n(a,t):a-t;l<=0?(s=o,r=o+1):i=o-1}return s}function Oct(e,t,n,r,i){for(;r<=i;){var s=r+i>>>1,o=e[s],a=n!==void 0?n(o,t):o-t;if(a===0)return s;a<=0?r=s+1:i=s-1}return-1}function Vd(e,t,n,r,i,s){return typeof n=="function"?s(e,t,n,r===void 0?0:r|0,i===void 0?e.length-1:i|0):s(e,t,void 0,n===void 0?0:n|0,r===void 0?e.length-1:r|0)}var Fct={ge:function(e,t,n,r,i){return Vd(e,t,n,r,i,$ct)},gt:function(e,t,n,r,i){return Vd(e,t,n,r,i,Nct)},lt:function(e,t,n,r,i){return Vd(e,t,n,r,i,kct)},le:function(e,t,n,r,i){return Vd(e,t,n,r,i,Dct)},eq:function(e,t,n,r,i){return Vd(e,t,n,r,i,Oct)}},B1=Fct,Bu=0,Ol=1,bm=2,Bct=Lct;function KT(e,t,n,r,i){this.mid=e,this.left=t,this.right=n,this.leftPoints=r,this.rightPoints=i,this.count=(t?t.count:0)+(n?n.count:0)+r.length}var Ny=KT.prototype;function E_(e,t){e.mid=t.mid,e.left=t.left,e.right=t.right,e.leftPoints=t.leftPoints,e.rightPoints=t.rightPoints,e.count=t.count}function Z7(e,t){var n=zf(t);e.mid=n.mid,e.left=n.left,e.right=n.right,e.leftPoints=n.leftPoints,e.rightPoints=n.rightPoints,e.count=n.count}function wN(e,t){var n=e.intervals([]);n.push(t),Z7(e,n)}function _N(e,t){var n=e.intervals([]),r=n.indexOf(t);return r<0?Bu:(n.splice(r,1),Z7(e,n),Ol)}Ny.intervals=function(e){return e.push.apply(e,this.leftPoints),this.left&&this.left.intervals(e),this.right&&this.right.intervals(e),e};Ny.insert=function(e){var t=this.count-this.leftPoints.length;if(this.count+=1,e[1]<this.mid)this.left?4*(this.left.count+1)>3*(t+1)?wN(this,e):this.left.insert(e):this.left=zf([e]);else if(e[0]>this.mid)this.right?4*(this.right.count+1)>3*(t+1)?wN(this,e):this.right.insert(e):this.right=zf([e]);else{var n=B1.ge(this.leftPoints,e,ZT),r=B1.ge(this.rightPoints,e,JT);this.leftPoints.splice(n,0,e),this.rightPoints.splice(r,0,e)}};Ny.remove=function(e){var t=this.count-this.leftPoints;if(e[1]<this.mid){if(!this.left)return Bu;var n=this.right?this.right.count:0;if(4*n>3*(t-1))return _N(this,e);var r=this.left.remove(e);return r===bm?(this.left=null,this.count-=1,Ol):(r===Ol&&(this.count-=1),r)}else if(e[0]>this.mid){if(!this.right)return Bu;var i=this.left?this.left.count:0;if(4*i>3*(t-1))return _N(this,e);var r=this.right.remove(e);return r===bm?(this.right=null,this.count-=1,Ol):(r===Ol&&(this.count-=1),r)}else{if(this.count===1)return this.leftPoints[0]===e?bm:Bu;if(this.leftPoints.length===1&&this.leftPoints[0]===e){if(this.left&&this.right){for(var s=this,o=this.left;o.right;)s=o,o=o.right;if(s===this)o.right=this.right;else{var a=this.left,r=this.right;s.count-=o.count,s.right=o.left,o.left=a,o.right=r}E_(this,o),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?E_(this,this.left):E_(this,this.right);return Ol}for(var a=B1.ge(this.leftPoints,e,ZT);a<this.leftPoints.length&&this.leftPoints[a][0]===e[0];++a)if(this.leftPoints[a]===e){this.count-=1,this.leftPoints.splice(a,1);for(var r=B1.ge(this.rightPoints,e,JT);r<this.rightPoints.length&&this.rightPoints[r][1]===e[1];++r)if(this.rightPoints[r]===e)return this.rightPoints.splice(r,1),Ol}return Bu}};function J7(e,t,n){for(var r=0;r<e.length&&e[r][0]<=t;++r){var i=n(e[r]);if(i)return i}}function tU(e,t,n){for(var r=e.length-1;r>=0&&e[r][1]>=t;--r){var i=n(e[r]);if(i)return i}}function eU(e,t){for(var n=0;n<e.length;++n){var r=t(e[n]);if(r)return r}}Ny.queryPoint=function(e,t){if(e<this.mid){if(this.left){var n=this.left.queryPoint(e,t);if(n)return n}return J7(this.leftPoints,e,t)}else if(e>this.mid){if(this.right){var n=this.right.queryPoint(e,t);if(n)return n}return tU(this.rightPoints,e,t)}else return eU(this.leftPoints,t)};Ny.queryInterval=function(e,t,n){if(e<this.mid&&this.left){var r=this.left.queryInterval(e,t,n);if(r)return r}if(t>this.mid&&this.right){var r=this.right.queryInterval(e,t,n);if(r)return r}return t<this.mid?J7(this.leftPoints,t,n):e>this.mid?tU(this.rightPoints,e,n):eU(this.leftPoints,n)};function Rct(e,t){return e-t}function ZT(e,t){var n=e[0]-t[0];return n||e[1]-t[1]}function JT(e,t){var n=e[1]-t[1];return n||e[0]-t[0]}function zf(e){if(e.length===0)return null;for(var t=[],n=0;n<e.length;++n)t.push(e[n][0],e[n][1]);t.sort(Rct);for(var r=t[t.length>>1],i=[],s=[],o=[],n=0;n<e.length;++n){var a=e[n];a[1]<r?i.push(a):r<a[0]?s.push(a):o.push(a)}var l=o,c=o.slice();return l.sort(ZT),c.sort(JT),new KT(r,zf(i),zf(s),l,c)}function lx(e){this.root=e}var pd=lx.prototype;pd.insert=function(e){this.root?this.root.insert(e):this.root=new KT(e[0],null,null,[e],[e])};pd.remove=function(e){if(this.root){var t=this.root.remove(e);return t===bm&&(this.root=null),t!==Bu}return!1};pd.queryPoint=function(e,t){if(this.root)return this.root.queryPoint(e,t)};pd.queryInterval=function(e,t,n){if(e<=t&&this.root)return this.root.queryInterval(e,t,n)};Object.defineProperty(pd,"count",{get:function(){return this.root?this.root.count:0}});Object.defineProperty(pd,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}});function Lct(e){return!e||e.length===0?new lx(null):new lx(zf(e))}const Cct=f4(Bct),Uct=({marginLeft:e})=>[1,e],Pct=({width:e,marginRight:t})=>[-1,e-t],zct=({width:e,marginLeft:t,marginRight:n})=>[0,(t+e-n)/2],jct=({marginTop:e})=>[1,e],Vct=({height:e,marginBottom:t})=>[-1,e-t],Yct=({height:e,marginTop:t,marginBottom:n})=>[0,(t+e-n)/2];function nU(e){return typeof e=="string"?{anchor:e}:e}function qct(e={},t={}){arguments.length===1&&([e,t]=rU(e));let{anchor:n="left",padding:r=1,r:i=t.r}=nU(e);switch(`${n}`.toLowerCase()){case"left":n=Uct;break;case"right":n=Pct;break;case"middle":n=zct;break;default:throw new Error(`unknown dodge anchor: ${n}`)}return iU("x","y",n,Vt(r),i,t)}function Wct(e={},t={}){arguments.length===1&&([e,t]=rU(e));let{anchor:n="bottom",padding:r=1,r:i=t.r}=nU(e);switch(`${n}`.toLowerCase()){case"top":n=jct;break;case"bottom":n=Vct;break;case"middle":n=Yct;break;default:throw new Error(`unknown dodge anchor: ${n}`)}return iU("y","x",n,Vt(r),i,t)}function rU(e){const{anchor:t,padding:n,...r}=e,{r:i}=r;return[{anchor:t,padding:n,r:i},r]}function iU(e,t,n,r,i,s){if(i!=null&&typeof i!="number"){let{channels:o,sort:a,reverse:l}=s;o=q3(o),(o==null?void 0:o.r)===void 0&&(s={...s,channels:{...o,r:{value:i,scale:"r"}}}),a===void 0&&l===void 0&&(s.sort={channel:"-r"})}return Sr(s,function(o,a,l,c,u,f){let{[t]:d,r:h}=l;if(!l[t])throw new Error(`missing channel: ${t}`);({[t]:d}=Tv(l,c,f));const p=h?void 0:i!==void 0?Vt(i):this.r!==void 0?this.r:3;h&&(h=Pt(h.value,c[h.scale]||gt,Float64Array));let[g,v]=n(u);const y=g?Gct:Hct,m=new Float64Array(d.length),b=h?w=>h[w]:()=>p;for(let w of a){const S=Cct();w=w.filter(h?x=>_1(d[x])&&Mo(h[x]):x=>_1(d[x]));const _=new Float64Array(2*w.length+2);for(const x of w){const E=b(x),N=g?E+r:0,I=d[x]-E,A=d[x]+E;let D=2;S.queryInterval(I-r,A+r,([,,T])=>{const M=m[T]-N,$=d[x]-d[T],B=r+(h?h[x]+h[T]:2*p),O=Math.sqrt(B*B-$*$);_[D++]=M-O,_[D++]=M+O});let R=_.slice(0,D);g&&(R=R.filter(T=>T>=0));t:for(const T of R.sort(y)){for(let M=0;M<D;M+=2)if(_[M]+1e-6<T&&T<_[M+1]-1e-6)continue t;m[x]=T+N;break}S.insert([I,A,x])}}g||(g=1);for(const w of a)for(const S of w)m[S]=m[S]*g+v;return{data:o,facets:a,channels:{[e]:{value:m,source:null},[t]:{value:d,source:l[t]},...h&&{r:{value:h,source:l.r}}}}})}function Hct(e,t){return Math.abs(e)-Math.abs(t)}function Gct(e,t){return e-t}function Xct(e,t){return arguments.length===1&&({basis:e,...t}=e),VT(tE(e),t)}function Qct(e,t){return arguments.length===1&&({basis:e,...t}=e),YT(tE(e),t)}function tE(e){if(e===void 0)return SN;if(typeof e=="function")return zv(V3(e));if(/^p\d{2}$/i.test(e))return yd(z3(e));switch(`${e}`.toLowerCase()){case"deviation":return Jct;case"first":return SN;case"last":return Zct;case"max":return tut;case"mean":return eut;case"median":return nut;case"min":return rut;case"sum":return iut;case"extent":return Kct}throw new Error(`invalid basis: ${e}`)}function zv(e){return{mapIndex(t,n,r){const i=+e(t,n);for(const s of t)r[s]=n[s]===null?NaN:n[s]/i}}}function yd(e){return zv((t,n)=>e(t,r=>n[r]))}const Kct={mapIndex(e,t,n){const[r,i]=mn(e,o=>t[o]),s=i-r;for(const o of e)n[o]=t[o]===null?NaN:(t[o]-r)/s}},SN=zv((e,t)=>{for(let n=0;n<e.length;++n){const r=t[e[n]];if(Qn(r))return r}}),Zct=zv((e,t)=>{for(let n=e.length-1;n>=0;--n){const r=t[e[n]];if(Qn(r))return r}}),Jct={mapIndex(e,t,n){const r=qb(e,s=>t[s]),i=ey(e,s=>t[s]);for(const s of e)n[s]=t[s]===null?NaN:i?(t[s]-r)/i:0}},tut=yd(Ne),eut=yd(qb),nut=yd(fp),rut=yd(vn),iut=yd(Cs);function sut(e,t={}){if(typeof e=="string")switch(e.toLowerCase()){case"first":return sU(t);case"last":return oU(t)}if(typeof e=="function")return Wa(null,e,t);let n,r;for(n in e){if(r!==void 0)throw new Error("ambiguous selector; multiple inputs");r=out(e[n])}if(r===void 0)throw new Error(`invalid selector: ${e}`);return Wa(n,r,t)}function out(e){if(typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"min":return eE;case"max":return nE}throw new Error(`unknown selector: ${e}`)}function sU(e){return Wa(null,fut,e)}function oU(e){return Wa(null,dut,e)}function aut(e){return Wa("x",eE,e)}function lut(e){return Wa("y",eE,e)}function cut(e){return Wa("x",nE,e)}function uut(e){return Wa("y",nE,e)}function*fut(e){yield e[0]}function*dut(e){yield e[e.length-1]}function*eE(e,t){yield DG(e,n=>t[n])}function*nE(e,t){yield a3(e,n=>t[n])}function Wa(e,t,n){if(e!=null){if(n[e]==null)throw new Error(`missing channel: ${e}`);e=n[e]}const r=cl(n);return qs(n,(i,s)=>{const o=Pt(i,r),a=Pt(i,e),l=[];for(const c of s){const u=[];for(const f of o?Yo(c,d=>o[d]).values():[c])for(const d of t(f,a))u.push(d);l.push(u)}return{data:i,facets:l}})}const xN=Object.freeze(Object.defineProperty({__proto__:null,Area:Bv,Arrow:l7,BarX:u7,BarY:f7,Cell:Rv,Contour:D7,Density:B7,Dot:Lv,Frame:V5,Geo:R7,Hexgrid:L7,Image:C7,Line:Cv,Link:o7,Mark:we,Raster:T7,Rect:Uv,RuleX:e5,RuleY:n5,Text:kv,TickX:g7,TickY:b7,Tip:Y5,Vector:Dv,area:xat,areaX:Ap,areaY:Pf,arrow:$at,auto:zat,autoSpec:d7,axisFx:T5,axisFy:I5,axisX:xT,axisY:ST,barX:ql,barY:Wl,bin:Bl,binX:ya,binY:ma,bollinger:ac,bollingerX:olt,bollingerY:alt,boxX:clt,boxY:ult,cell:Fu,cellX:kat,cellY:Dat,centroid:Act,circle:Rat,cluster:Ect,column:Or,contour:Ilt,crosshair:Elt,crosshairX:Alt,crosshairY:Mlt,delaunayLink:zlt,delaunayMesh:jlt,density:Hlt,dodgeX:qct,dodgeY:Wct,dot:dl,dotX:Fat,dotY:Bat,filter:Xrt,formatIsoDate:pC,formatMonth:yit,formatWeekday:mit,frame:ET,geo:XT,geoCentroid:Mct,graticule:Jlt,gridFx:k5,gridFy:$5,gridX:N5,gridY:M5,group:J3,groupX:xp,groupY:Ip,groupZ:Z3,hexagon:Lat,hexbin:tct,hexgrid:rct,hull:Vlt,identity:gt,image:lct,indexOf:Er,initializer:Sr,interpolateNearest:N7,interpolateNone:tx,interpolatorBarycentric:$7,interpolatorRandomWalk:k7,legend:mot,line:zT,lineX:Mp,lineY:$p,linearRegressionX:mct,linearRegressionY:gct,link:a7,map:Po,mapX:VT,mapY:YT,marks:Gi,normalize:tE,normalizeX:Xct,normalizeY:Qct,plot:AT,pointer:gT,pointerX:bT,pointerY:vT,raster:dlt,rect:jT,rectX:k1,rectY:D1,reverse:Qrt,ruleX:Ya,ruleY:qa,scale:Mc,select:sut,selectFirst:sU,selectLast:oU,selectMaxX:cut,selectMaxY:uut,selectMinX:aut,selectMinY:lut,shuffle:Krt,sort:aC,sphere:Zlt,spike:rot,stackX:t7,stackX1:aat,stackX2:lat,stackY:e7,stackY1:cat,stackY2:uat,text:Lf,textX:o5,textY:a5,tickX:v7,tickY:w7,tip:q5,transform:qs,tree:K7,treeLink:z7,treeNode:ex,valueof:Pt,vector:g5,vectorX:b5,vectorY:v5,voronoi:Ylt,voronoiMesh:qlt,window:Pv,windowX:Gat,windowY:Xat},Symbol.toStringTag,{value:"Module"})),hut=new Map([["style","style"],["width","width"],["height","height"],["margin","margin"],["marginLeft","marginLeft"],["marginRight","marginRight"],["marginTop","marginTop"],["marginBottom","marginBottom"],["align","align"],["aspectRatio","aspectRatio"],["axis","axis"],["inset","inset"],["grid","grid"],["label","label"],["padding","padding"],["round","round"],["xScale","x.type"],["xDomain","x.domain"],["xRange","x.range"],["xNice","x.nice"],["xInset","x.inset"],["xInsetLeft","x.insetLeft"],["xInsetRight","x.insetRight"],["xClamp","x.clamp"],["xRound","x.round"],["xAlign","x.align"],["xPadding","x.padding"],["xPaddingInner","x.paddingInner"],["xPaddingOuter","x.paddingOuter"],["xAxis","x.axis"],["xTicks","x.ticks"],["xTickSize","x.tickSize"],["xTickSpacing","x.tickSpacing"],["xTickPadding","x.tickPadding"],["xTickFormat","x.tickFormat"],["xTickRotate","x.tickRotate"],["xGrid","x.grid"],["xLine","x.line"],["xLabel","x.label"],["xLabelAnchor","x.labelAnchor"],["xLabelOffset","x.labelOffset"],["xFontVariant","x.fontVariant"],["xAriaLabel","x.ariaLabel"],["xAriaDescription","x.ariaDescription"],["xReverse","x.reverse"],["xZero","x.zero"],["yScale","y.type"],["yDomain","y.domain"],["yRange","y.range"],["yNice","y.nice"],["yInset","y.inset"],["yInsetTop","y.insetTop"],["yInsetBottom","y.insetBottom"],["yClamp","y.clamp"],["yRound","y.round"],["yAlign","y.align"],["yPadding","y.padding"],["yPaddingInner","y.paddingInner"],["yPaddingOuter","y.paddingOuter"],["yAxis","y.axis"],["yTicks","y.ticks"],["yTickSize","y.tickSize"],["yTickSpacing","y.tickSpacing"],["yTickPadding","y.tickPadding"],["yTickFormat","y.tickFormat"],["yTickRotate","y.tickRotate"],["yGrid","y.grid"],["yLine","y.line"],["yLabel","y.label"],["yLabelAnchor","y.labelAnchor"],["yLabelOffset","y.labelOffset"],["yFontVariant","y.fontVariant"],["yAriaLabel","y.ariaLabel"],["yAriaDescription","y.ariaDescription"],["yReverse","y.reverse"],["yZero","y.zero"],["facetMargin","facet.margin"],["facetMarginTop","facet.marginTop"],["facetMarginBottom","facet.marginBottom"],["facetMarginLeft","facet.marginLeft"],["facetMarginRight","facet.marginRight"],["facetGrid","facet.grid"],["facetLabel","facet.label"],["fxDomain","fx.domain"],["fxRange","fx.range"],["fxNice","fx.nice"],["fxInset","fx.inset"],["fxInsetLeft","fx.insetLeft"],["fxInsetRight","fx.insetRight"],["fxRound","fx.round"],["fxAlign","fx.align"],["fxPadding","fx.padding"],["fxPaddingInner","fx.paddingInner"],["fxPaddingOuter","fx.paddingOuter"],["fxAxis","fx.axis"],["fxTicks","fx.ticks"],["fxTickSize","fx.tickSize"],["fxTickSpacing","fx.tickSpacing"],["fxTickPadding","fx.tickPadding"],["fxTickFormat","fx.tickFormat"],["fxTickRotate","fx.tickRotate"],["fxGrid","fx.grid"],["fxLine","fx.line"],["fxLabel","fx.label"],["fxLabelAnchor","fx.labelAnchor"],["fxLabelOffset","fx.labelOffset"],["fxFontVariant","fx.fontVariant"],["fxAriaLabel","fx.ariaLabel"],["fxAriaDescription","fx.ariaDescription"],["fxReverse","fx.reverse"],["fyDomain","fy.domain"],["fyRange","fy.range"],["fyNice","fy.mice"],["fyInset","fy,inset"],["fyInsetTop","fy.insetTop"],["fyInsetBottom","fy.insetBottom"],["fyRound","fy.round"],["fyAlign","fy.align"],["fyPadding","fy.padding"],["fyPaddingInner","fy.paddingInner"],["fyPaddingOuter","fy.paddingOuter"],["fyAxis","fy.axis"],["fyTicks","fy.ticks"],["fyTickSize","fy.tickSize"],["fyTickSpacing","fy.tickSpacing"],["fyTickPadding","fy.tickPadding"],["fyTickFormat","fy.tickFormat"],["fyTickRotate","fy.tickRotate"],["fyGrid","fy.grid"],["fyLine","fy.line"],["fyLabel","fy.label"],["fyLabelAnchor","fy.labelAnchor"],["fyLabelOffset","fy.labelOffset"],["fyFontVariant","fy.fontVariant"],["fyAriaLabel","fy.ariaLabel"],["fyAriaDescription","fy.ariaDescription"],["fyReverse","fy.reverse"],["colorScale","color.type"],["colorDomain","color.domain"],["colorRange","color.range"],["colorClamp","color.clamp"],["colorNice","color.nice"],["colorScheme","color.scheme"],["colorInterpolate","color.interpolate"],["colorPivot","color.pivot"],["colorSymmetric","color.symmetric"],["colorLabel","color.label"],["colorReverse","color.reverse"],["colorZero","color.zero"],["colorTickFormat","color.tickFormat"],["opacityScale","opacity.type"],["opacityDomain","opacity.domain"],["opacityRange","opacity.range"],["opacityClamp","opacity.clamp"],["opacityNice","opacity.nice"],["opacityLabel","opacity.label"],["opacityReverse","opacity.reverse"],["opacityZero","opacity.zero"],["opacityTickFormat","opacity.tickFormat"],["rScale","r.type"],["rDomain","r.domain"],["rRange","r.range"],["rClamp","r.clamp"],["rNice","r.nice"],["rZero","r.zero"],["lengthScale","length.type"],["lengthDomain","length.domain"],["lengthRange","length.range"],["lengthClamp","length.clamp"],["lengthNice","length.nice"],["lengthZero","length.zero"],["projectionType","projection.type"],["projectionParallels","projection.parallels"],["projectionPrecision","projection.precision"],["projectionRotate","projection.rotate"],["projectionDomain","projection.domain"],["projectionInset","projection.inset"],["projectionInsetLeft","projection.insetLeft"],["projectionInsetRight","projection.insetRight"],["projectionInsetTop","projection.insetTop"],["projectionInsetBottom","projection.insetBottom"],["projectionClip","projection.clip"]]),put=new Set(["frame","hexgrid","sphere","graticule"]);function yut(e,t,n){for(let r=0;r<t.length;++r){const i=t[r];r===t.length-1?e[i]=n:e=e[i]||(e[i]={})}}async function mut(e){const t={marks:[]},n=[],{attributes:r,marks:i}=e;for(const a in r){const l=hut.get(a);if(l==null)throw new Error(`Unrecognized plot attribute: ${a}`);const c=r[a];typeof c=="symbol"?n.push(a):c!==void 0&&yut(t,l.split("."),c)}const s=[];for(const a of i)for(const{type:l,data:c,options:u}of a.plotSpecs())put.has(l)?t.marks.push(xN[l](u)):t.marks.push(xN[l](c,u)),s.push(a.index);but(t,e);const o=AT(t);vut(o,s),gut(e,o,r,n);for(const a of e.interactors)await a.init(o);return o}function gut(e,t,n,r){r.forEach(i=>{const s=n[i];if(s===ai){if(!i.endsWith("Domain"))throw new Error(`Unsupported fixed attribute: ${i}`);const o=i.slice(0,-6),a=t.scale(o);a!=null&&a.domain&&e.setAttribute(i,n[`${o}Reverse`]?a.domain.slice().reverse():a.domain)}else throw new Error(`Unrecognized symbol: ${s}`)})}function but(e,t){const{marks:n}=t;L0("x",e,n,["x","x1","x2"]),L0("y",e,n,["y","y1","y2"]),L0("fx",e,n),L0("fy",e,n)}function L0(e,t,n,r=[e]){const i=t[e]||{};if(i.axis===null||i.label!==void 0)return;const s=n.map(u=>{var f;return(f=u.channelField(r))==null?void 0:f.field});if(s.every(u=>u==null))return;let o,a,l;for(let u=0;u<s.length;++u){const{column:f,label:d}=s[u]||{};f===void 0&&d===void 0||(o===void 0&&a===void 0?(o=f,a=d,l=wut(n[u].data,r)||"number"):a!==d?a=void 0:o!==f&&(o=void 0))}let c=a||o;if(c!==void 0){if((l==="number"||l==="date")&&(e==="x"||e==="y")){i.percent&&(c=`${c} (%)`);const u=(e==="x"?1:-1)*(i.reverse?-1:1);e==="x"||i.labelAnchor==="center"?c=e==="x"==u<0?`← ${c}`:`${c} →`:c=`${u<0?"↑ ":"↓ "}${c}`}t[e]={...i,label:c}}}function vut(e,t){const n=e.querySelectorAll('g[aria-label="facet"]');if(n.length)for(const r of n)IN(r,t);else IN(e,t)}function IN(e,t){let n=-1;for(const r of e.children){const i=r.getAttribute("aria-label")||"";r.nodeName==="style"||i.includes("-axis")||i.includes("-grid")||r.setAttribute("data-index",t[++n])}}function wut(e,t){for(const n of e)for(let r=0;r<t.length;++r){const i=n[t[r]];if(i!=null)return i instanceof Date?"date":typeof i}}const _ut={width:640,marginLeft:40,marginRight:20,marginTop:20,marginBottom:30};class Sut{constructor(t){this.attributes={..._ut},this.listeners=null,this.interactors=[],this.legends=[],this.marks=[],this.markset=null,this.element=t||document.createElement("div"),this.element.setAttribute("class","plot"),this.element.style.display="flex",this.element.value=this,this.params=new Map,this.synch=PH()}margins(){return{left:this.getAttribute("marginLeft"),top:this.getAttribute("marginTop"),bottom:this.getAttribute("marginBottom"),right:this.getAttribute("marginRight")}}innerWidth(){const{left:t,right:n}=this.margins();return this.getAttribute("width")-t-n}innerHeight(){const{top:t,bottom:n}=this.margins();return this.getAttribute("height")-t-n}pending(t){this.synch.pending(t)}update(t){return this.synch.ready(t)&&!this.pendingRender&&(this.pendingRender=!0,requestAnimationFrame(()=>this.render())),this.synch.promise}async render(){this.pendingRender=!1;const t=await mut(this),n=this.legends.flatMap(({legend:r,include:i})=>{const s=r.init(t);return i?s:[]});this.element.replaceChildren(t,...n),this.synch.resolve()}getAttribute(t){return this.attributes[t]}setAttribute(t,n,r){var i,s;return DO(this.attributes[t],n)?(n===void 0?delete this.attributes[t]:this.attributes[t]=n,r!=null&&r.silent||(s=(i=this.listeners)==null?void 0:i.get(t))==null||s.forEach(o=>o(t,n)),!0):!1}addAttributeListener(t,n){const r=this.listeners||(this.listeners=new Map);return r.has(t)||r.set(t,new Set),r.get(t).add(n),this}removeAttributeListener(t,n){var r,i;return(i=(r=this.listeners)==null?void 0:r.get(t))==null?void 0:i.delete(n)}addParams(t,n){const{params:r}=this;for(const i of n)r.has(i)?r.get(i).push(t):(r.set(i,[t]),i.addEventListener("value",()=>Promise.allSettled(r.get(i).map(s=>s.requestQuery()))))}addMark(t){return t.setPlot(this,this.marks.length),this.marks.push(t),this.markset=null,this}get markSet(){return this.markset||(this.markset=new Set(this.marks))}addInteractor(t){return this.interactors.push(t),this}addLegend(t,n=!0){t.setPlot(this),this.legends.push({legend:t,include:n})}}function Xe(...e){const t=new Sut;return e.flat().forEach(n=>n(t)),t.marks.forEach(n=>br().connect(n)),t.element}class xut extends Map{request(t,n){if(this.has(t))n(this.get(t));else{const r=this.waiting||(this.waiting=new Map),i=r.get(t)||[];r.set(t,i.concat(n))}}set(t,n){this.has(t)&&console.warn(`Overwriting named plot "${t}".`);const{waiting:r}=this;return r!=null&&r.has(t)&&(r.get(t).forEach(i=>i(n)),r.delete(t)),super.set(t,n)}}const aU=new xut;function Iut(e){return t=>aU.set(e,t)}function lU(e,t,n){Na(n)?(n.addEventListener("value",r=>{e.setAttribute(t,r),e.update()}),n.value!==void 0&&e.setAttribute(t,n.value)):e.setAttribute(t,n)}function cU(e,t){return n=>{lU(n,e,t)}}function rE(e){return t=>{for(const[n,r]of Object.entries(e))lU(t,n,r)}}function uU(e){const{top:t,bottom:n,left:r,right:i}=e,s={};return t!==void 0&&(s.marginTop=t),n!==void 0&&(s.marginBottom=n),r!==void 0&&(s.marginLeft=r),i!==void 0&&(s.marginRight=i),rE(s)}function R1(e){return rE({xDomain:e,yDomain:e})}const L=e=>t=>cU(e,t),fU=L("style"),Ri=L("width"),$s=L("height"),Tut=L("margin"),dh=L("marginLeft"),cx=L("marginRight"),ux=L("marginTop"),Eut=L("marginBottom"),Aut=L("align"),Mut=L("aspectRatio"),$ut=L("axis"),Nut=L("inset"),kut=L("grid"),Dut=L("label"),Out=L("padding"),Fut=L("round"),But=L("xScale"),ii=L("xDomain"),Rut=L("xRange"),Lut=L("xNice"),Cut=L("xInset"),Uut=L("xInsetLeft"),Put=L("xInsetRight"),zut=L("xClamp"),jut=L("xRound"),Vut=L("xAlign"),Yut=L("xPadding"),qut=L("xPaddingInner"),Wut=L("xPaddingOuter"),dU=L("xAxis"),Hut=L("xTicks"),Gut=L("xTickSize"),Xut=L("xTickSpacing"),Qut=L("xTickPadding"),iE=L("xTickFormat"),Kut=L("xTickRotate"),Zut=L("xGrid"),Jut=L("xLine"),tft=L("xLabel"),eft=L("xLabelAnchor"),nft=L("xLabelOffset"),rft=L("xFontVariant"),ift=L("xAriaLabel"),sft=L("xAriaDescription"),oft=L("xReverse"),aft=L("xZero"),fx=L("yScale"),sE=L("yDomain"),lft=L("yRange"),cft=L("yNice"),uft=L("yInset"),fft=L("yInsetTop"),dft=L("yInsetBottom"),hft=L("yClamp"),pft=L("yRound"),yft=L("yAlign"),mft=L("yPadding"),gft=L("yPaddingInner"),bft=L("yPaddingOuter"),hU=L("yAxis"),vft=L("yTicks"),wft=L("yTickSize"),_ft=L("yTickSpacing"),Sft=L("yTickPadding"),Fh=L("yTickFormat"),xft=L("yTickRotate"),L1=L("yGrid"),Ift=L("yLine"),pU=L("yLabel"),Tft=L("yLabelAnchor"),Eft=L("yLabelOffset"),Aft=L("yFontVariant"),Mft=L("yAriaLabel"),$ft=L("yAriaDescription"),yU=L("yReverse"),Nft=L("yZero"),kft=L("facetMargin"),Dft=L("facetMarginTop"),Oft=L("facetMarginBottom"),Fft=L("facetMarginLeft"),Bft=L("facetMarginRight"),Rft=L("facetGrid"),Lft=L("facetLabel"),Cft=L("fxDomain"),Uft=L("fxRange"),Pft=L("fxNice"),zft=L("fxInset"),jft=L("fxInsetLeft"),Vft=L("fxInsetRight"),Yft=L("fxRound"),qft=L("fxAlign"),Wft=L("fxPadding"),Hft=L("fxPaddingInner"),Gft=L("fxPaddingOuter"),Xft=L("fxAxis"),Qft=L("fxTicks"),Kft=L("fxTickSize"),Zft=L("fxTickSpacing"),Jft=L("fxTickPadding"),tdt=L("fxTickFormat"),edt=L("fxTickRotate"),ndt=L("fxGrid"),rdt=L("fxLine"),idt=L("fxLabel"),sdt=L("fxLabelAnchor"),odt=L("fxLabelOffset"),adt=L("fxFontVariant"),ldt=L("fxAriaLabel"),cdt=L("fxAriaDescription"),udt=L("fxReverse"),fdt=L("fyDomain"),ddt=L("fyRange"),hdt=L("fyNice"),pdt=L("fyInset"),ydt=L("fyInsetTop"),mdt=L("fyInsetBottom"),gdt=L("fyRound"),bdt=L("fyAlign"),vdt=L("fyPadding"),wdt=L("fyPaddingInner"),_dt=L("fyPaddingOuter"),Sdt=L("fyAxis"),xdt=L("fyTicks"),Idt=L("fyTickSize"),Tdt=L("fyTickSpacing"),Edt=L("fyTickPadding"),Adt=L("fyTickFormat"),Mdt=L("fyTickRotate"),$dt=L("fyGrid"),Ndt=L("fyLine"),kdt=L("fyLabel"),Ddt=L("fyLabelAnchor"),Odt=L("fyLabelOffset"),Fdt=L("fyFontVariant"),Bdt=L("fyAriaLabel"),Rdt=L("fyAriaDescription"),Ldt=L("fyReverse"),dx=L("colorScale"),hx=L("colorDomain"),px=L("colorRange"),Cdt=L("colorClamp"),Udt=L("colorNice"),ef=L("colorScheme"),Pdt=L("colorInterpolate"),zdt=L("colorPivot"),jdt=L("colorSymmetric"),Vdt=L("colorLabel"),Ydt=L("colorReverse"),qdt=L("colorZero"),Wdt=L("colorTickFormat"),Hdt=L("opacityScale"),Gdt=L("opacityDomain"),Xdt=L("opacityRange"),Qdt=L("opacityClamp"),Kdt=L("opacityNice"),Zdt=L("opacityLabel"),Jdt=L("opacityReverse"),tht=L("opacityZero"),eht=L("opacityTickFormat"),nht=L("rScale"),mU=L("rDomain"),gU=L("rRange"),rht=L("rClamp"),iht=L("rNice"),sht=L("rZero"),oht=L("lengthScale"),aht=L("lengthDomain"),lht=L("lengthRange"),cht=L("lengthClamp"),uht=L("lengthNice"),fht=L("lengthZero"),bU=L("projectionType"),dht=L("projectionParallels"),hht=L("projectionPrecision"),vU=L("projectionRotate"),pht=L("projectionDomain"),yht=L("projectionInset"),mht=L("projectionInsetLeft"),ght=L("projectionInsetRight"),bht=L("projectionInsetTop"),vht=L("projectionInsetBottom"),wht=L("projectionClip"),_ht=Object.freeze(Object.defineProperty({__proto__:null,align:Aut,aspectRatio:Mut,attribute:cU,attributes:rE,axis:$ut,colorClamp:Cdt,colorDomain:hx,colorInterpolate:Pdt,colorLabel:Vdt,colorNice:Udt,colorPivot:zdt,colorRange:px,colorReverse:Ydt,colorScale:dx,colorScheme:ef,colorSymmetric:jdt,colorTickFormat:Wdt,colorZero:qdt,facetGrid:Rft,facetLabel:Lft,facetMargin:kft,facetMarginBottom:Oft,facetMarginLeft:Fft,facetMarginRight:Bft,facetMarginTop:Dft,fxAlign:qft,fxAriaDescription:cdt,fxAriaLabel:ldt,fxAxis:Xft,fxDomain:Cft,fxFontVariant:adt,fxGrid:ndt,fxInset:zft,fxInsetLeft:jft,fxInsetRight:Vft,fxLabel:idt,fxLabelAnchor:sdt,fxLabelOffset:odt,fxLine:rdt,fxNice:Pft,fxPadding:Wft,fxPaddingInner:Hft,fxPaddingOuter:Gft,fxRange:Uft,fxReverse:udt,fxRound:Yft,fxTickFormat:tdt,fxTickPadding:Jft,fxTickRotate:edt,fxTickSize:Kft,fxTickSpacing:Zft,fxTicks:Qft,fyAlign:bdt,fyAriaDescription:Rdt,fyAriaLabel:Bdt,fyAxis:Sdt,fyDomain:fdt,fyFontVariant:Fdt,fyGrid:$dt,fyInset:pdt,fyInsetBottom:mdt,fyInsetTop:ydt,fyLabel:kdt,fyLabelAnchor:Ddt,fyLabelOffset:Odt,fyLine:Ndt,fyNice:hdt,fyPadding:vdt,fyPaddingInner:wdt,fyPaddingOuter:_dt,fyRange:ddt,fyReverse:Ldt,fyRound:gdt,fyTickFormat:Adt,fyTickPadding:Edt,fyTickRotate:Mdt,fyTickSize:Idt,fyTickSpacing:Tdt,fyTicks:xdt,grid:kut,height:$s,inset:Nut,label:Dut,lengthClamp:cht,lengthDomain:aht,lengthNice:uht,lengthRange:lht,lengthScale:oht,lengthZero:fht,margin:Tut,marginBottom:Eut,marginLeft:dh,marginRight:cx,marginTop:ux,margins:uU,name:Iut,opacityClamp:Qdt,opacityDomain:Gdt,opacityLabel:Zdt,opacityNice:Kdt,opacityRange:Xdt,opacityReverse:Jdt,opacityScale:Hdt,opacityTickFormat:eht,opacityZero:tht,padding:Out,projectionClip:wht,projectionDomain:pht,projectionInset:yht,projectionInsetBottom:vht,projectionInsetLeft:mht,projectionInsetRight:ght,projectionInsetTop:bht,projectionParallels:dht,projectionPrecision:hht,projectionRotate:vU,projectionType:bU,rClamp:rht,rDomain:mU,rNice:iht,rRange:gU,rScale:nht,rZero:sht,round:Fut,style:fU,width:Ri,xAlign:Vut,xAriaDescription:sft,xAriaLabel:ift,xAxis:dU,xClamp:zut,xDomain:ii,xFontVariant:rft,xGrid:Zut,xInset:Cut,xInsetLeft:Uut,xInsetRight:Put,xLabel:tft,xLabelAnchor:eft,xLabelOffset:nft,xLine:Jut,xNice:Lut,xPadding:Yut,xPaddingInner:qut,xPaddingOuter:Wut,xRange:Rut,xReverse:oft,xRound:jut,xScale:But,xTickFormat:iE,xTickPadding:Qut,xTickRotate:Kut,xTickSize:Gut,xTickSpacing:Xut,xTicks:Hut,xZero:aft,xyDomain:R1,yAlign:yft,yAriaDescription:$ft,yAriaLabel:Mft,yAxis:hU,yClamp:hft,yDomain:sE,yFontVariant:Aft,yGrid:L1,yInset:uft,yInsetBottom:dft,yInsetTop:fft,yLabel:pU,yLabelAnchor:Tft,yLabelOffset:Eft,yLine:Ift,yNice:cft,yPadding:mft,yPaddingInner:gft,yPaddingOuter:bft,yRange:lft,yReverse:yU,yRound:pft,yScale:fx,yTickFormat:Fh,yTickPadding:Sft,yTickRotate:xft,yTickSize:wft,yTickSpacing:_ft,yTicks:vft,yZero:Nft},Symbol.toStringTag,{value:"Module"}));function Fe(e,t){return{table:e,options:t}}function oE(e){return typeof e!="string"?!1:(e=e.toLowerCase().trim(),e==="none"||e==="currentcolor"||e.startsWith("url(")&&e.endsWith(")")||e.startsWith("var(")&&e.endsWith(")")||za(e)!==null)}const Sht=new Set(["order","sort","label","anchor","curve","tension","marker","markerStart","markerMid","markerEnd","textAnchor","lineAnchor","lineHeight","textOverflow","monospace","fontFamily","fontSize","fontStyle","fontVariant","fontWeight","frameAnchor","strokeLinejoin","strokeLinecap","strokeMiterlimit","strokeDasharray","strokeDashoffset","mixBlendMode","shapeRendering","imageRendering","preserveAspectRatio","interpolate","crossOrigin","paintOrder","pointerEvents"]);function xht(e){return Sht.has(e)}const Iht=new Set(["asterisk","circle","cross","diamond","diamond2","hexagon","plus","square","square2","star","times","triangle","triangle2","wye"]);function Tht(e){return Iht.has(`${e}`.toLowerCase())}function aE(e){return typeof(e==null?void 0:e.getChild)=="function"}const Eht=2,Aht=10;function wU(e){return aE(e)?Mht(e):e}function Mht(e){const{batches:t,numRows:n}=e;if(!n)return[];const r=Array.from({length:n},()=>({}));for(let i=0,s=0;s<t.length;++s){const o=t[s],{schema:a,numRows:l,numCols:c}=o;for(let u=0;u<c;++u){const f=o.getChildAt(u),{name:d,type:h}=a.fields[u],p=$ht(h);for(let g=i,v=0;v<l;++v,++g)r[g][d]=p(f.get(v))}i+=l}return r}function $ht(e){const{typeId:t}=e;return t===Aht?n=>n==null?n:new Date(n):t===Eht&&e.bitWidth>=64?n=>n==null?n:Number(n):n=>n}const _U=e=>e==="stroke"||e==="fill",Nht=e=>e==="symbol",kht=(e,t)=>e!=="sort"&&t!=null&&!Array.isArray(t),A_=(e,t)=>({channel:e,field:t,as:t instanceof La?t.column:e}),M_=(e,t)=>({channel:e,value:t});class md extends ty{constructor(t,n,r,i={}){var l;super((l=n==null?void 0:n.options)==null?void 0:l.filterBy),this.type=t,this.reqs=i,this.source=n,Array.isArray(this.source)&&(this.data=this.source);const s=this.channels=[],o=this.params=new Set,a=(c,u)=>{const f=typeof u;if(f==="function"&&u[zO]){const d=u(this,c);for(const h in d)a(h,d[h])}else if(f==="string")xht(c)||_U(c)&&oE(u)||Nht(c)&&Tht(u)?s.push(M_(c,u)):s.push(A_(c,ZI(u)));else if(xf(u))if(Array.isArray(u.columns))s.push(A_(c,u)),o.add(u);else{const d=M_(c,u.value);s.push(d),u.addEventListener("value",h=>(d.value=h,this.update()))}else f==="object"&&kht(c,u)?s.push(A_(c,u)):u!==void 0&&s.push(M_(c,u))};for(const c in r)a(c,r[c])}setPlot(t,n){var r;this.plot=t,this.index=n,t.addParams(this,this.params),(r=this.source)!=null&&r.table&&this.queryPending()}hasOwnData(){return this.source==null||Array.isArray(this.source)}channel(t){return this.channels.find(n=>n.channel===t)}channelField(...t){const n=t.flat();for(const r of n){const i=this.channel(r);if(i!=null&&i.field)return i}return null}fields(){var s,o,a;if(this.hasOwnData())return null;const{source:{table:t},channels:n,reqs:r}=this,i=new Map;for(const{channel:l,field:c}of n){const u=c==null?void 0:c.column;if(u){if((s=c.stats)!=null&&s.length||r[l]){i.has(u)||i.set(u,new Set);const f=i.get(u);(o=r[l])==null||o.forEach(d=>f.add(d)),(a=c.stats)==null||a.forEach(d=>f.add(d))}}else continue}return Array.from(i,([l,c])=>({table:t,column:l,stats:Array.from(c)}))}fieldInfo(t){return this.stats=t.reduce((n,r)=>(n[r.column]=r,n),Object.create(null)),this}query(t=[]){if(this.hasOwnData())return null;const{channels:n,source:{table:r}}=this;return SU(n,r).where(t)}queryPending(){return this.plot.pending(this),this}queryResult(t){return this.data=wU(t),this}update(){return this.plot.update(this)}plotSpecs(){const{type:t,data:n,channels:r}=this,i={};for(const s of r)i[s.channel]=wa(s);return[{type:t,data:n,options:i}]}}function wa(e){return Object.hasOwn(e,"value")?e.value:_U(e.channel)?{value:e.as,scale:"color"}:e.as}function SU(e,t,n=[]){const r=Lt.from({source:t}),i=new Set;let s=!1;for(const o of e){const{channel:a,field:l,as:c}=o;if(!n.includes(a)){if(a==="order")r.orderby(o.value);else if(l){if(l.aggregate)s=!0;else{if(i.has(c))continue;i.add(c)}r.select({[c]:l})}}}return s&&r.groupby(Array.from(i)),r}function Ha(e,t,n){if(!e.stats)return r;const{field:r}=e.channelField(t),{type:i}=e.stats[r.column];return n=n??r,i==="date"?EO(n):n}function yx(e,t,n,r,i=!1,s=1){const o=(r-s)/(n-t),a=o!==1?` * ${o}::DOUBLE`:"";return i?G`(${+n} - ${e}::DOUBLE)${a}`:G`(${e}::DOUBLE - ${+t})${a}`}const xU={x:["min","max"]},IU={y:["min","max"]},TU={...xU,...IU};function EU(e,t,n,r,i){const{plot:s,stats:o}=e,a=s.getAttribute(r),l=s.getAttribute(i);if(Array.isArray(a)&&!a[gc])return a;{const{field:c}=e.channelField(n),{column:u}=c,{min:f,max:d}=o[u],h=AU(t,u)||(l?sv().domain([f,d]).nice().domain():[f,d]);return a!==ai&&(h[gc]=!0),s.setAttribute(r,h,{silent:!0}),h}}function ky(e,t){return EU(e,t,"x","xDomain","xNice")}function Dy(e,t){return EU(e,t,"y","yDomain","yNice")}function AU(e,t){if(!e)return;let n,r;const i=(s,o)=>{if(s==="BETWEEN"&&o.field.column===t){const{range:a}=o;a&&(n==null||a[0]<n)&&(n=a[0]),a&&(r==null||a[1]>r)&&(r=a[1])}};return Array.isArray(e)?e.forEach(s=>{var o;return(o=s.visit)==null?void 0:o.call(s,i)}):e.visit&&e.visit(i),n!=null&&r!=null&&n!==r?[n,r]:void 0}class Dht extends md{constructor(t,n,r){const i=t.endsWith("X")?"y":"x",s={[i]:["count","min","max"]};super(t,n,r,s),this.dim=i}query(t=[]){const{plot:n,dim:r,source:i,stats:s}=this,{optimize:o=!0}=i.options||{},{field:a,as:l}=this.channelField(r),c=super.query(t);if(o){const{column:u}=a,{count:f,max:d,min:h}=s[u],p=r==="x"?n.innerWidth():n.innerHeight(),[g,v]=AU(t,u)||[h,d],y=(v-g)/(d-h);if(f*y>p*4){const m=Ha(this,r,l),b=this.channelField(r==="x"?"y":"x").as,w=c.select().map(S=>S.as).filter(S=>S!==l&&S!==b);return Oht(c,m,l,b,g,v,p,w)}}return c.orderby(l)}}function Oht(e,t,n,r,i,s,o,a=[]){const l=G`FLOOR(${o/(s-i)}::DOUBLE * (${t} - ${+i}::DOUBLE))::INTEGER`,c=u=>Lt.from(e).select(u).groupby(l,a);return Lt.union(c([{[n]:ap(n),[r]:NM(r,n)},...a]),c([{[n]:op(n),[r]:kM(r,n)},...a]),c([{[n]:NM(n,r),[r]:ap(r)},...a]),c([{[n]:kM(n,r),[r]:op(r)},...a])).orderby(a,n)}function mx(e,t=!1){const n=new Float64Array(5),r=new Float64Array(4);Fht(n,r,e);const i=Float64Array.of(0,r[1]-n[1]*r[0],r[2]-n[2]*r[0],r[3]-n[3]*r[0],-n[4]*r[0]),s=1+n[1]+n[2]+n[3]+n[4],o=(r[0]+r[1]+r[2]+r[3])/s,a=(i[1]+i[2]+i[3]+i[4])/s;return{sigma:e,negative:t,a:n,b_causal:r,b_anticausal:i,sum_causal:o,sum_anticausal:a}}function Fht(e,t,n){const i=Float64Array.of(.84,1.8675,.84,-1.8675,-.34015,-.1299,-.34015,.1299),s=Math.exp(-1.783/n),o=Math.exp(-1.723/n),a=.6318/n,l=1.997/n,c=Float64Array.of(-s*Math.cos(a),s*Math.sin(a),-s*Math.cos(-a),s*Math.sin(-a),-o*Math.cos(l),o*Math.sin(l),-o*Math.cos(-l),o*Math.sin(-l)),u=n*2.5066282746310007,f=Float64Array.of(i[0],i[1],0,0,0,0,0,0),d=Float64Array.of(1,0,c[0],c[1],0,0,0,0,0,0);let h,p;for(p=2;p<8;p+=2){for(f[p]=c[p]*f[p-2]-c[p+1]*f[p-1],f[p+1]=c[p]*f[p-1]+c[p+1]*f[p-2],h=p-2;h>0;h-=2)f[h]+=c[p]*f[h-2]-c[p+1]*f[h-1],f[h+1]+=c[p]*f[h-1]+c[p+1]*f[h-2];for(h=0;h<=p;h+=2)f[h]+=i[p]*d[h]-i[p+1]*d[h+1],f[h+1]+=i[p]*d[h+1]+i[p+1]*d[h];for(d[p+2]=c[p]*d[p]-c[p+1]*d[p+1],d[p+3]=c[p]*d[p+1]+c[p+1]*d[p],h=p;h>0;h-=2)d[h]+=c[p]*d[h-2]-c[p+1]*d[h-1],d[h+1]+=c[p]*d[h-1]+c[p+1]*d[h-2]}for(p=0;p<4;++p)h=p<<1,t[p]=f[h]/u,e[p+1]=d[h+2]}function Bht(e,t,n,[r,i]){const s=new Float64Array(Math.max(r,i)),o=new Float64Array(Math.max(r,i)),a=new Float64Array(5),l=new Float64Array(n.length);for(let c=0,u=0;c<i;++c,u+=r){const f=l.subarray(u);gx(e,n.subarray(u),r,1,s,o,a,f)}for(let c=0;c<r;++c){const u=l.subarray(c);gx(t,u,i,r,s,o,a,u)}return l}function gx(e,t,n,r=1,i=new Float64Array(n),s=new Float64Array(n),o=new Float64Array(5),a=i,l=Rht){const c=r*2,u=r*3,f=r*4,d=r*n;let h,p;for(l(i,t,n,r,e.b_causal,3,e.a,4,e.sum_causal,o,e.sigma),p=4,h=f;p<n;++p,h+=r)i[p]=e.b_causal[0]*t[h]+e.b_causal[1]*t[h-r]+e.b_causal[2]*t[h-c]+e.b_causal[3]*t[h-u]-e.a[1]*i[p-1]-e.a[2]*i[p-2]-e.a[3]*i[p-3]-e.a[4]*i[p-4];for(l(s,t,n,-r,e.b_anticausal,4,e.a,4,e.sum_anticausal,o,e.sigma),p=4,h=d-r*5;p<n;++p,h-=r)s[p]=e.b_anticausal[1]*t[h+r]+e.b_anticausal[2]*t[h+c]+e.b_anticausal[3]*t[h+u]+e.b_anticausal[4]*t[h+f]-e.a[1]*s[p-1]-e.a[2]*s[p-2]-e.a[3]*s[p-3]-e.a[4]*s[p-4];if(e.negative)for(p=0,h=0;p<n;++p,h+=r)a[h]=i[p]+s[n-p-1];else for(p=0,h=0;p<n;++p,h+=r)a[h]=Math.max(0,i[p]+s[n-p-1]);return a}function Rht(e,t,n,r,i,s,o,a,l,c){const u=Math.abs(r)*n,f=r<0?u+r:0;let d,h,p;for(h=0;h<a;++h)for(c[h]=h<=s?i[h]:0,p=1;p<=a&&p<=h;++p)c[h]-=o[p]*c[h-p];for(p=0;p<a;++p)for(e[p]=0,h=1;h<=p;++h)d=f+r*h,d>=0&&d<u&&(e[p]+=c[p-h]*t[d]);const g=t[f];if(g>0)for(p=0;p<a;++p)e[p]+=c[p]*g}function Lht(e,t){return MU(new Float64Array(e),t)}function Cht(e,t,n,r=[]){return r.length?Object.values(Uht(e*t,n,r)):[{grid:MU(new Float64Array(e*t),n)}]}function MU(e,t){if(aE(t)){const n=t.numRows;if(n===0)return e;const r=t.getChild("index").toArray(),i=t.getChild("value").toArray();for(let s=0;s<n;++s)e[r[s]]=i[s]}else for(const n of t)e[n.index]=n.value;return e}function Uht(e,t,n){const r={},i=s=>(r[s]||(r[s]={key:s,grid:new Float64Array(e)})).grid;if(aE(t)){const s=t.numRows;if(s===0)return r;const o=t.getChild("index").toArray(),a=t.getChild("value").toArray(),l=n.map(c=>t.getChild(c));for(let c=0;c<s;++c){const u=l.map(f=>f.get(c));i(u)[o[c]]=a[c]}}else for(const s of t){const o=n.map(a=>s[a]);i(o)[s.index]=s.value}return r}function di(e,t,n,r){Na(n)?(r=r||(()=>e.requestUpdate()),n.addEventListener("value",i=>(e[t]=i,r())),e[t]=n.value):e[t]=n}class $U extends md{constructor(t,n,r){const{bins:i=1024,bandwidth:s=20,...o}=r,a=t.endsWith("X")?"y":"x";super(t,n,o,a==="x"?xU:IU),this.dim=a,di(this,"bins",i),di(this,"bandwidth",s,()=>this.grid?this.convolve().update():null)}get filterIndexable(){const t=this.dim==="x"?"xDomain":"yDomain",n=this.plot.getAttribute(t);return n&&!n[gc]}query(t=[]){if(this.hasOwnData())throw new Error("Density1DMark requires a data source");const{bins:n,channels:r,dim:i,source:{table:s}}=this,[o,a]=this.extent=(i==="x"?ky:Dy)(this,t),l=Ha(this,i);return Pht(SU(r,s,[i]).where(t.concat(Lr(l,[o,a]))),yx(l,o,a,n),this.channelField("weight")?"weight":null)}queryResult(t){return this.grid=Lht(this.bins,t),this.convolve()}convolve(){const{bins:t,bandwidth:n,dim:r,grid:i,plot:s,extent:[o,a]}=this,l=i.some(m=>m<0),c=r==="x"?s.innerWidth():s.innerHeight(),u=mx(n*(t-1)/c,l),f=gx(u,i,t),d=this.data=[],h=r==="x"?"y":"x",p=this.channelField(r).as,g=+o,v=(a-g)/(t-1),y=1/v;for(let m=0;m<t;++m)d.push({[p]:g+m*v,[h]:f[m]*y});return this}plotSpecs(){const{type:t,data:n,channels:r,dim:i}=this,s=i==="x"?{y:"y"}:{x:"x"};for(const o of r)s[o.channel]=wa(o);return[{type:t,data:n,options:s}]}}function Pht(e,t,n){const r=n?`* ${n}`:"",i=e.clone().select({p:t,i:G`FLOOR(p)::INTEGER`,w:G`(FLOOR(p) + 1 - p)${r}`}),s=e.clone().select({p:t,i:G`FLOOR(p)::INTEGER + 1`,w:G`(p - FLOOR(p))${r}`});return Lt.from(Lt.unionAll(i,s)).select({index:"i",value:nd("w")}).groupby("index").having(TO("value",0))}class jv extends md{constructor(t,n,r){const{bandwidth:i=20,binType:s="linear",binWidth:o=2,binPad:a=1,...l}=r,c=zht(l);super(t,n,l,TU),this.densityMap=c,di(this,"bandwidth",i,()=>this.grids?this.convolve().update():null),di(this,"binWidth",o),di(this,"binType",s),di(this,"binPad",a)}setPlot(t,n){const r=()=>{this.stats&&this.requestUpdate()};return t.addAttributeListener("domainX",r),t.addAttributeListener("domainY",r),super.setPlot(t,n)}get filterIndexable(){const t=this.plot.getAttribute("xDomain"),n=this.plot.getAttribute("yDomain");return t&&n&&!t[gc]&&!n[gc]}query(t=[]){const{plot:n,binType:r,binPad:i,channels:s,densityMap:o,source:a}=this,[l,c]=this.extentX=ky(this,t),[u,f]=this.extentY=Dy(this,t),[d,h]=this.bins=this.binDimensions(this),p=Ha(this,"x"),g=Ha(this,"y"),v=!!n.getAttribute("xReverse"),y=!!n.getAttribute("yReverse"),m=TN(p,l,c,d,v,this.binPad),b=TN(g,u,f,h,y,this.binPad),w=i?[Lr(p,[l,c]),Lr(g,[u,f])]:[Ng(l,p),$g(p,c),Ng(u,g),$g(g,f)],S=Lt.from(a.table).where(t.concat(w)),_=this.groupby=[];let x=pr();for(const E of s)if(Object.hasOwn(E,"field")){const{as:N,channel:I,field:A}=E;A.aggregate?(x=A,o[I]=!0):I==="weight"?x=nd(A):I!=="x"&&I!=="y"&&(S.select({[N]:A}),_.push(N))}return r==="linear"?Vht(S,m,b,x,d,_):jht(S,m,b,x,d,_)}binDimensions(){const{plot:t,binWidth:n}=this;return[Math.round(t.innerWidth()/n),Math.round(t.innerHeight()/n)]}queryResult(t){const[n,r]=this.bins;return this.grids=Cht(n,r,t,this.groupby),this.convolve()}convolve(){const{bandwidth:t,bins:n,grids:r,plot:i}=this;if(t<=0)this.kde=this.grids.map(({key:s,grid:o})=>(o.key=s,o));else{const s=i.innerWidth(),o=i.innerHeight(),[a,l]=n,c=r.some(({grid:d})=>d.some(h=>h<0)),u=mx(t*(a-1)/s,c),f=mx(t*(l-1)/o,c);this.kde=this.grids.map(({key:d,grid:h})=>{const p=Bht(u,f,h,n);return p.key=d,p})}return this}plotSpecs(){throw new Error("Unimplemented. Use a Grid2D mark subclass.")}}function zht(e){const t={};for(const n in e)e[n]==="density"&&(delete e[n],t[n]=!0);return t}function TN(e,t,n,r,i,s){const o=(r-s)/(n-t),a=o!==1?` * ${o}::DOUBLE`:"";return i?G`(${n} - ${e}::DOUBLE)${a}`:G`(${e}::DOUBLE - ${t})${a}`}function jht(e,t,n,r,i,s){return e.select({index:G`FLOOR(${t})::INTEGER + FLOOR(${n})::INTEGER * ${i}`,value:r}).groupby("index",s)}function Vht(e,t,n,r,i,s){const o=r.column?`* ${r.column}`:"",a=(d,h)=>e.clone().select({xp:t,yp:n,i:d,w:h}),l=a(G`FLOOR(xp)::INTEGER + FLOOR(yp)::INTEGER * ${i}`,G`(FLOOR(xp)::INTEGER + 1 - xp) * (FLOOR(yp)::INTEGER + 1 - yp)${o}`),c=a(G`FLOOR(xp)::INTEGER + (FLOOR(yp)::INTEGER + 1) * ${i}`,G`(FLOOR(xp)::INTEGER + 1 - xp) * (yp - FLOOR(yp)::INTEGER)${o}`),u=a(G`FLOOR(xp)::INTEGER + 1 + FLOOR(yp)::INTEGER * ${i}`,G`(xp - FLOOR(xp)::INTEGER) * (FLOOR(yp)::INTEGER + 1 - yp)${o}`),f=a(G`FLOOR(xp)::INTEGER + 1 + (FLOOR(yp)::INTEGER + 1) * ${i}`,G`(xp - FLOOR(xp)::INTEGER) * (yp - FLOOR(yp)::INTEGER)${o}`);return Lt.from(Lt.unionAll(l,c,u,f)).select({index:"i",value:nd("w")},s).groupby("index",s).having(TO("value",0))}class Yht extends jv{constructor(t,n){const{type:r="dot",binsX:i,binsY:s,...o}=n;o.binPad=o.binPad??0,super(r,t,o),di(this,"binsX",i),di(this,"binsY",s)}convolve(){super.convolve();const{bins:t,binPad:n,extentX:r,extentY:i}=this,[s,o]=t,[a,l]=r,[c,u]=i,f=(l-a)/(s-n),d=(u-c)/(o-n),h=n?0:.5;return this.data=qht(this.kde,t,a,c,f,d,h),this}binDimensions(){const{plot:t,binWidth:n,binsX:r,binsY:i}=this;return[r??Math.round(t.innerWidth()/n),i??Math.round(t.innerHeight()/n)]}plotSpecs(){const{type:t,channels:n,densityMap:r,data:i}=this,s={};for(const o of n){const{channel:a}=o;s[a]=a==="x"||a==="y"?a:wa(o)}for(const o in r)r[o]&&(s[o]="density");return[{type:t,data:i,options:s}]}}function qht(e,t,n,r,i,s,o){const a=1/(i*s),[l,c]=t,u=[];for(const f of e)for(let d=0,h=0;h<c;++h)for(let p=0;p<l;++p,++d)u.push({x:n+(p+o)*i,y:r+(h+o)*s,density:f[d]*a});return u}function NU(e,t,n,r,i,s){const o=(s.length>>2)-1;for(let a=0,l=0;a<r;++a)for(let c=0,u=(r-a-1)*n;c<n;++c,l+=4){const f=o*i(e[c+u])<<2;t[l+0]=s[f+0],t[l+1]=s[f+1],t[l+2]=s[f+2],t[l+3]=s[f+3]}}function C1(e,t){const n=new Uint8ClampedArray(4*e),r=e-1;for(let i=0;i<=r;++i){const s=t(i/r),{r:o,g:a,b:l,opacity:c=1}=typeof s=="string"?bi(s):s,u=i<<2;n[u+0]=o,n[u+1]=a,n[u+2]=l,n[u+3]=255*c|0}return n}function kU(e,t){if(typeof document<"u"){const n=document.createElement("canvas");return n.setAttribute("width",e),n.setAttribute("height",t),n}throw new Error("Can not create a canvas instance.")}function DU(e="black"){const{r:t,g:n,b:r}=bi(e);return i=>({r:t,g:n,b:r,opacity:i})}class OU extends jv{constructor(t,n){super("image",t,n)}setPlot(t,n){const r=()=>{this.stats&&this.rasterize()};t.addAttributeListener("schemeColor",r),super.setPlot(t,n)}convolve(){return super.convolve().rasterize()}rasterize(){var d;const{bins:t,kde:n,groupby:r}=this,[i,s]=t,{canvas:o,ctx:a,img:l}=Wht(this,i,s),c=Hht(this),u=r.indexOf((d=this.channelField("fill"))==null?void 0:d.as),f=u<0?[]:n.map(({key:h})=>h[u]);return this.data=n.map(h=>{var g;const p=Ght(this,f,(g=h.key)==null?void 0:g[u]);return NU(h,l.data,i,s,c,p),a.putImageData(l,0,0),{src:o.toDataURL()}}),this}plotSpecs(){var s;const{type:t,plot:n,data:r}=this,i={src:"src",width:n.innerWidth(),height:n.innerHeight(),preserveAspectRatio:"none",imageRendering:(s=this.channel("imageRendering"))==null?void 0:s.value,frameAnchor:"middle"};return[{type:t,data:r,options:i}]}}function Wht(e,t,n){if(!e.image||e.image.w!==t||e.image.h!==n){const r=kU(t,n),i=r.getContext("2d",{willReadFrequently:!0}),s=i.getImageData(0,0,t,n);e.image={canvas:r,ctx:i,img:s,w:t,h:n}}return e.image}function Hht(e){const{densityMap:t,kde:n,plot:r}=e;let i=t.fill&&r.getAttribute("colorDomain");if(!i){let o=0,a=0;n.forEach(l=>{for(const c of l)c<o&&(o=c),c>a&&(a=c)}),i=o===0&&a===0?[0,1]:[o,a]}const s=r.getAttribute("colorScale");return Mc({x:{type:s,domain:i,range:[0,1]}}).apply}function Ght(e,t,n,r=1024){const{densityMap:i,plot:s}=e,o=s.getAttribute("colorScheme");let a;if(i.fill){if(o)try{return C1(r,Mc({color:{scheme:o,domain:[0,1]}}).interpolate)}catch(l){console.warn(l)}}else if(t.length){const l=s.getAttribute("colorRange");a=Mc({color:{domain:t,range:l,scheme:o||(l?void 0:"tableau10")}}).apply(n)}else{const l=e.channelField("fill");a=oE(l==null?void 0:l.value)?l.value:void 0}return C1(r,DU(a))}class Xht extends OU{constructor(t,n){const{normalize:r=!0,...i}=n;super(t,{bandwidth:0,...i}),di(this,"normalize",r)}query(t=[]){const{plot:n,channels:r,normalize:i,source:s}=this,[o,a]=ky(this,t),[l,c]=Dy(this,t),[u,f]=this.bins=this.binDimensions(this),d=Ha(this,"x"),h=Ha(this,"y"),p=!!n.getAttribute("xReverse"),g=!!n.getAttribute("yReverse"),v=yx(d,o,a,u,p,this.binPad),y=yx(h,l,c,f,g,this.binPad),m=Lt.from(s.table).where(Qht(this,t)),b=this.groupby=[],w=[];for(const S of r)if(Object.hasOwn(S,"field")){const{channel:_,field:x}=S;_==="z"?(m.select({[_]:x}),w.push("z")):_!=="x"&&_!=="y"&&(m.select({[_]:x}),b.push(_))}return Kht(m,v,y,w,u,f,b,i)}}function Qht(e,t){if(Array.isArray(t)&&!t.length)return t;const n=e.channelField("x").field.column,r=e.channelField("y").field.column,i=o=>o.op!=="BETWEEN"||o.field.column!==n&&o.field.column!==r,s=o=>o.op==="AND"?yc(o.children.filter(a=>i(a))):o;return Array.isArray(t)?t.filter(o=>i(o)).map(o=>s(o)):s(t)}function Kht(e,t,n,r,i,s,o=[],a=!0){e.select({x:G`FLOOR(${t})::INTEGER`,y:G`FLOOR(${n})::INTEGER`});const l=o.concat(r),c=l.length?`PARTITION BY ${l.join(", ")} `:"",u=Lt.from(e).select(l,{x0:"x",y0:"y",dx:G`(lead(x) OVER sw - x)`,dy:G`(lead(y) OVER sw - y)`}).window({sw:G`${c}ORDER BY x ASC`}).qualify(yc(G`(x0 < ${i} OR x0 + dx < ${i})`,G`(y0 < ${s} OR y0 + dy < ${s})`,G`(x0 > 0 OR x0 + dx > 0)`,G`(y0 > 0 OR y0 + dy > 0)`)),f=Lt.select({x:G`GREATEST(MAX(ABS(dx)), MAX(ABS(dy)))`}).from("pairs"),d=Lt.select({i:G`UNNEST(range((${f})))::INTEGER`}),h=Lt.unionAll(Lt.select(l,{x:G`x0 + i`,y:G`y0 + ROUND(i * dy / dx::FLOAT)::INTEGER`}).from("pairs","indices").where(G`ABS(dy) <= ABS(dx) AND i < ABS(dx)`),Lt.select(l,{x:G`x0 + ROUND(SIGN(dy) * i * dx / dy::FLOAT)::INTEGER`,y:G`y0 + SIGN(dy) * i`}).from("pairs","indices").where(G`ABS(dy) > ABS(dx) AND i < ABS(dy)`),Lt.select(l,{x:"x0",y:"y0"}).from("pairs").where(IO("dx"))),p=["x"].concat(l).join(", "),g=Lt.from("raster").select(l,"x","y",a?{w:G`1.0 / COUNT(*) OVER (PARTITION BY ${p})`}:null).where(yc(Lr("x",[0,i]),Lr("y",[0,s])));return Lt.with({pairs:u,indices:d,raster:h,points:g}).from("points").select(o,{index:G`x + y * ${i}::INTEGER`,value:a?nd("w"):pr()}).groupby("index",o)}class Zht extends jv{constructor(t,n){const{thresholds:r=10,...i}=n;super("geo",t,i),di(this,"thresholds",r,()=>this.grids?this.contours().update():null)}convolve(){return super.convolve().contours()}contours(){const{bins:t,densityMap:n,kde:r,thresholds:i,groupby:s,plot:o}=this;let a=i;if(!Array.isArray(a)){const S=Ne(r.map(_=>Ne(_)));a=Array.from({length:a-1},(_,x)=>S*(x+1)/a)}(n.fill||n.stroke)&&this.plot.getAttribute("colorScale")!=="log"&&this.plot.setAttribute("colorZero",!0);const[l,c]=t,[u,f]=o.getAttribute("xDomain"),[d,h]=o.getAttribute("yDomain"),p=(f-u)/l,g=(h-d)/c,v=+u,y=+d,m=S=>v+S*p,b=S=>y+S*g,w=Pg().size(t);return this.data=r.flatMap(S=>a.map(_=>{const x=Jht(w.contour(S,_),m,b);return s.forEach((E,N)=>x[E]=S.key[N]),x.density=_,x})),this}plotSpecs(){const{type:t,channels:n,densityMap:r,data:i}=this,s={};for(const o of n){const{channel:a}=o;a!=="x"&&a!=="y"&&(s[a]=wa(o))}return r.fill&&(s.fill="density"),r.stroke&&(s.stroke="density"),[{type:t,data:i,options:s}]}}function Jht(e,t,n){function r(o){o.forEach(i)}function i(o){o.forEach(s)}function s(o){o[0]=t(o[0]),o[1]=n(o[1])}return e.coordinates.forEach(r),e}class tpt extends md{constructor(t,n){const{type:r="hexagon",binWidth:i=20,...s}=n;super(r,t,{r:i/2,clip:!0,...s},TU),this.binWidth=i}get filterIndexable(){const t=this.plot.getAttribute("xDomain"),n=this.plot.getAttribute("yDomain");return t&&n&&!t[gc]&&!n[gc]}query(t=[]){if(this.hasOwnData())return null;const{plot:n,binWidth:r,channels:i,source:s}=this,[o,a]=ky(this,t),[l,c]=Dy(this,t),u=.5-n.getAttribute("marginLeft"),f=0-n.getAttribute("marginTop"),d=`${r}::DOUBLE`,h=`${r*(1.5/Math.sqrt(3))}::DOUBLE`,p=`${n.innerWidth()/(a-o)}::DOUBLE`,g=`${n.innerHeight()/(c-l)}::DOUBLE`;let v,y;const m=new Set,b={};for(const E of i)E.channel==="order"?w.orderby(E.value):E.channel==="x"?v=E:E.channel==="y"?y=E:Object.hasOwn(E,"field")&&(b[E.as]=E.field,E.field.aggregate&&E.field.columns.forEach(N=>m.add(N)));const w=Lt.select({[v.as]:G`${o}::DOUBLE + ((x + 0.5 * (y & 1)) * ${d} + ${u})::DOUBLE / ${p}`,[y.as]:G`${c}::DOUBLE - (y * ${h} + ${f})::DOUBLE / ${g}`,...b}).groupby("x","y"),S=`${p} * (${v.field} - ${o}::DOUBLE)`,_=`${g} * (${c}::DOUBLE - ${y.field})`,x=Lt.select({py:G`(${_} - ${f}) / ${h}`,pj:G`ROUND(py)::INTEGER`,px:G`(${S} - ${u}) / ${d} - 0.5 * (pj & 1)`,pi:G`ROUND(px)::INTEGER`,tt:G`ABS(py-pj) * 3 > 1 AND (px-pi)**2 + (py-pj)**2 > (px - pi - 0.5 * CASE WHEN px < pi THEN -1 ELSE 1 END)**2 + (py - pj - CASE WHEN py < pj THEN -1 ELSE 1 END)**2`,x:G`CASE WHEN tt THEN (pi + (CASE WHEN px < pi THEN -0.5 ELSE 0.5 END) + (CASE WHEN pj & 1 <> 0 THEN 0.5 ELSE -0.5 END))::INTEGER ELSE pi END`,y:G`CASE WHEN tt THEN (pj + CASE WHEN py < pj THEN -1 ELSE 1 END)::INTEGER ELSE pj END`}).select(Array.from(m)).from(s.table).where(Mg(v.field),Mg(y.field),t);return w.from(x)}}class ept extends jv{constructor(t,n){const{origin:r=[0,0],dim:i="xy",...s}=n;super("image",t,s),this.origin=r,this.tileX=i.toLowerCase().includes("x"),this.tileY=i.toLowerCase().includes("y")}setPlot(t,n){const r=()=>{this.stats&&this.rasterize()};t.addAttributeListener("schemeColor",r),super.setPlot(t,n)}requestQuery(){return this.requestTiles()}query(t=[]){return this._filter=t,null}tileQuery(t){const{plot:n,binType:r,binPad:i,channels:s,densityMap:o,source:a}=this,[[l,c],[u,f]]=t,[d,h]=this.bins,p=Ha(this,"x"),g=Ha(this,"y"),v=!!n.getAttribute("xReverse"),y=!!n.getAttribute("yReverse"),m=EN(p,l,c,d,v,i),b=EN(g,u,f,h,y,i),w=i?[Lr(p,[l,c]),Lr(g,[u,f])]:[Ng(l,p),$g(p,c),Ng(u,g),$g(g,f)],S=Lt.from(a.table).where(w),_=this.groupby=[];let x=pr();for(const E of s)if(Object.hasOwn(E,"field")){const{channel:N,field:I}=E;I.aggregate?(x=I,o[N]=!0):N==="weight"?x=nd(I):N!=="x"&&N!=="y"&&(S.select({[N]:I}),_.push(N))}return r==="linear"?lpt(S,m,b,x,d,_):apt(S,m,b,x,d,_)}async requestTiles(){const t=br();this.prefetch&&t.cancel(this.prefetch);const{binPad:n,tileX:r,tileY:i,origin:[s,o]}=this,[a,l]=this.bins=this.binDimensions(this),[c,u]=ky(this,this._filter),[f,d]=Dy(this,this._filter),h=u-c,p=d-f,g=Math.floor((c-s)*(a-n)/h),v=Math.floor((f-o)*(l-n)/p),y=(I,A)=>[[s+I*h,s+(I+1)*h],[o+A*p,o+(A+1)*p]],m=Math.floor((c-s)/h),b=r?AN((u-s)/h):m,w=Math.floor((f-o)/p),S=i?AN((d-o)/p):w,_=[];for(let I=m;I<=b;++I)for(let A=w;A<=S;++A)_.push([I,A]);const x=_.map(([I,A])=>t.query(this.tileQuery(y(I,A)))),E=[];if(r)for(let I=w;I<=S;++I)E.push([b+1,I]),E.push([m-1,I]);if(i){const I=r?m-1:m,A=r?b+1:b;for(let D=I;D<=A;++D)E.push([D,S+1]),E.push([D,w-1])}this.prefetch=E.map(([I,A])=>t.prefetch(this.tileQuery(y(I,A))));const N=await Promise.all(x);this.grids=[{grid:npt(a,l,g,v,_,N)}],this.convolve().update()}convolve(){return super.convolve().rasterize()}rasterize(){var d;const{bins:t,kde:n,groupby:r}=this,[i,s]=t,{canvas:o,ctx:a,img:l}=ipt(this,i,s),c=spt(this),u=r.indexOf((d=this.channelField("fill"))==null?void 0:d.as),f=u<0?[]:n.map(({key:h})=>h[u]);return this.data=n.map(h=>{var g;const p=opt(this,f,(g=h.key)==null?void 0:g[u]);return NU(h,l.data,i,s,c,p),a.putImageData(l,0,0),{src:o.toDataURL()}}),this}plotSpecs(){var s;const{type:t,data:n,plot:r}=this,i={src:"src",width:r.innerWidth(),height:r.innerHeight(),preserveAspectRatio:"none",imageRendering:(s=this.channel("imageRendering"))==null?void 0:s.value,frameAnchor:"middle"};return[{type:t,data:n,options:i}]}}function npt(e,t,n,r,i,s){const o=new Float64Array(e*t);return s.forEach((a,l)=>{const[c,u]=i[l],f=c*e-n,d=u*t-r;rpt(e,t,o,a,f,d)}),o}function rpt(e,t,n,r,i,s){const o=r.numRows;if(o===0)return;const a=r.getChild("index").toArray(),l=r.getChild("value").toArray();for(let c=0;c<o;++c){const u=a[c],f=i+u%e,d=s+Math.floor(u/e);0<=f&&f<e&&0<=d&&d<t&&(n[f+d*e]=l[c])}}function ipt(e,t,n){if(!e.image||e.image.w!==t||e.image.h!==n){const r=kU(t,n),i=r.getContext("2d",{willReadFrequently:!0}),s=i.getImageData(0,0,t,n);e.image={canvas:r,ctx:i,img:s,w:t,h:n}}return e.image}function spt(e){const{densityMap:t,kde:n,plot:r}=e;let i=t.fill&&r.getAttribute("colorDomain");if(!i){let o=0,a=0;n.forEach(l=>{for(const c of l)c<o&&(o=c),c>a&&(a=c)}),i=o===0&&a===0?[0,1]:[o,a]}const s=r.getAttribute("colorScale");return Mc({x:{type:s,domain:i,range:[0,1]}}).apply}function opt(e,t,n,r=1024){const{densityMap:i,plot:s}=e,o=s.getAttribute("colorScheme");let a;if(i.fill){if(o)try{return C1(r,Mc({color:{scheme:o,domain:[0,1]}}).interpolate)}catch(l){console.warn(l)}}else if(t.length){const l=s.getAttribute("colorRange");a=Mc({color:{domain:t,range:l,scheme:o||(l?void 0:"tableau10")}}).apply(n)}else{const l=e.channelField("fill");a=oE(l==null?void 0:l.value)?l.value:void 0}return C1(r,DU(a))}function EN(e,t,n,r,i,s){const o=(r-s)/(n-t),a=o!==1?` * ${o}::DOUBLE`:"";return i?G`(${n} - ${e}::DOUBLE)${a}`:G`(${e}::DOUBLE - ${t})${a}`}function apt(e,t,n,r,i,s){return e.select({index:G`FLOOR(${t})::INTEGER + FLOOR(${n})::INTEGER * ${i}`,value:r}).groupby("index",s)}function lpt(e,t,n,r,i,s){const o=r.column?`* ${r.column}`:"",a=(d,h)=>e.clone().select({xp:t,yp:n,i:d,w:h}),l=a(G`FLOOR(xp)::INTEGER + FLOOR(yp)::INTEGER * ${i}`,G`(FLOOR(xp)::INTEGER + 1 - xp) * (FLOOR(yp)::INTEGER + 1 - yp)${o}`),c=a(G`FLOOR(xp)::INTEGER + (FLOOR(yp)::INTEGER + 1) * ${i}`,G`(FLOOR(xp)::INTEGER + 1 - xp) * (yp - FLOOR(yp)::INTEGER)${o}`),u=a(G`FLOOR(xp)::INTEGER + 1 + FLOOR(yp)::INTEGER * ${i}`,G`(xp - FLOOR(xp)::INTEGER) * (FLOOR(yp)::INTEGER + 1 - yp)${o}`),f=a(G`FLOOR(xp)::INTEGER + 1 + (FLOOR(yp)::INTEGER + 1) * ${i}`,G`(xp - FLOOR(xp)::INTEGER) * (yp - FLOOR(yp)::INTEGER)${o}`);return Lt.from(Lt.unionAll(l,c,u,f)).select({index:"i",value:nd("w")},s).groupby("index",s).having(RW("value",0))}function AN(e){const t=Math.floor(e);return t===e?t-1:t}function cpt(e,t,n){var r=1e-8,i=t-1,s=n-1,o=0,a,l,c,u,f,d,h,p,g,v,y;if(e<=0)return 0;if(e>=1)return 1;for(t>=1&&n>=1?(c=e<.5?e:1-e,u=Math.sqrt(-2*Math.log(c)),h=(2.30753+u*.27061)/(1+u*(.99229+u*.04481))-u,e<.5&&(h=-h),p=(h*h-3)/6,g=2/(1/(2*t-1)+1/(2*n-1)),v=h*Math.sqrt(p+g)/g-(1/(2*n-1)-1/(2*t-1))*(p+5/6-2/(3*g)),h=t/(t+n*Math.exp(2*v))):(a=Math.log(t/(t+n)),l=Math.log(n/(t+n)),u=Math.exp(t*a)/t,f=Math.exp(n*l)/n,v=u+f,e<u/v?h=Math.pow(t*v*e,1/t):h=1-Math.pow(n*v*(1-e),1/n)),y=-nf(t)-nf(n)+nf(t+n);o<10;o++){if(h===0||h===1)return h;if(d=upt(h,t,n)-e,u=Math.exp(i*Math.log(h)+s*Math.log(1-h)+y),f=d/u,h-=u=f/(1-.5*Math.min(1,f*(i/h-s/(1-h)))),h<=0&&(h=.5*(h+u)),h>=1&&(h=.5*(h+u+1)),Math.abs(u)<r*h&&o>0)break}return h}function upt(e,t,n){var r=e===0||e===1?0:Math.exp(nf(t+n)-nf(t)-nf(n)+t*Math.log(e)+n*Math.log(1-e));return e<0||e>1?!1:e<(t+1)/(t+n+2)?r*MN(e,t,n)/t:1-r*MN(1-e,n,t)/n}function MN(e,t,n){var r=1e-30,i=1,s=t+n,o=t+1,a=t-1,l=1,c=1-s*e/o,u,f,d,h;for(Math.abs(c)<r&&(c=r),c=1/c,h=c;i<=100&&(u=2*i,f=i*(n-i)*e/((a+u)*(t+u)),c=1+f*c,Math.abs(c)<r&&(c=r),l=1+f/l,Math.abs(l)<r&&(l=r),c=1/c,h*=c*l,f=-(t+i)*(s+i)*e/((t+u)*(o+u)),c=1+f*c,Math.abs(c)<r&&(c=r),l=1+f/l,Math.abs(l)<r&&(l=r),c=1/c,d=c*l,h*=d,!(Math.abs(d-1)<3e-7));i++);return h}function nf(e){var t=0,n=[76.18009172947146,-86.5053203294167,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18],r=1.000000000190015,i,s,o;for(o=(s=i=e)+5.5,o-=(i+.5)*Math.log(o);t<6;t++)r+=n[t]/++s;return Math.log(2.506628274631*r/i)-o}function fpt(e,t){var n=cpt(2*Math.min(e,1-e),.5*t,.5);return n=Math.sqrt(t*(1-n)/n),e>.5?n:-n}class dpt extends md{constructor(t,n){const{ci:r=.95,precision:i=4,...s}=n;super("line",t,s);const o=()=>this.modelFit?this.confidenceBand().update():null;di(this,"ci",r,o),di(this,"precision",i,o)}query(t=[]){const n=this.channelField("x").as,r=this.channelField("y").as,i=Array.from(new Set(["stroke","z","fx","fy"].flatMap(s=>{var o;return((o=this.channelField(s))==null?void 0:o.as)||[]})));return Lt.from(super.query(t)).select({intercept:qW(r,n),slope:WW(r,n),n:HW(r,n),ssy:GW(r,n),ssx:XW(r,n),xm:QW(r,n),x0:DM(ap(n).where(Mg(r))),x1:DM(op(n).where(Mg(r)))}).select(i).groupby(i)}queryResult(t){return this.modelFit=wU(t),this.lineData=this.modelFit.flatMap(n=>hpt(n)),this.confidenceBand()}confidenceBand(){const{ci:t,modelFit:n,precision:r,plot:i}=this,s=i.innerWidth();return this.areaData=t?n.flatMap(o=>ppt(t,r,o,s)):null,this}plotSpecs(){const{lineData:t,areaData:n,channels:r,ci:i}=this,s={x:"x",y:"y"},o={x:"x",y1:"y1",y2:"y2",fillOpacity:.1};for(const a of r)switch(a.channel){case"x":case"y":case"fill":break;case"stroke":s.stroke=o.fill=wa(a);break;case"strokeOpacity":s.strokeOpacity=wa(a);break;case"fillOpacity":o.fillOpacity=wa(a);break;default:s[a.channel]=o[a.channel]=wa(a);break}return[...i?[{type:"areaY",data:n,options:o}]:[],{type:"line",data:t,options:s}]}}function hpt(e){const{x0:t,x1:n,xm:r,intercept:i,slope:s,n:o,ssx:a,ssy:l,...c}=e;return[{x:t,y:i+t*s,...c},{x:n,y:i+n*s,...c}]}function ppt(e,t,n,r){const{x0:i,x1:s,xm:o,intercept:a,slope:l,n:c,ssx:u,ssy:f,...d}=n,h=t*(s-i)/r,p=fpt((1-e)/2,c-2)*Math.sqrt(f/(c-2));return kr(i,s-h/2,h).concat(s).map(g=>{const v=a+g*l,y=p*Math.sqrt(1/c+(g-o)**2/u);return{x:g,y1:v-y,y2:v+y,...d}})}const ypt=new Set(["frame","axisX","axisY","axisFx","axisFy","gridX","gridY","gridFx","gridFy","hexgrid","graticule","sphere"]);function ct(e,t,n){arguments.length===2&&(n=t,t=ypt.has(e)?null:[{}]);const r=e.startsWith("area")||e.startsWith("line")?Dht:md;return lE(r,e,t,n)}function lE(e,t,n,r){return i=>{i.addMark(new e(t,n,r))}}function Rc(e,t,n){return r=>{r.addMark(new e(t,n))}}const mpt=(...e)=>ct("area",...e),gpt=(...e)=>ct("areaX",...e),FU=(...e)=>ct("areaY",...e),bpt=(...e)=>ct("line",...e),vpt=(...e)=>ct("lineX",...e),BU=(...e)=>ct("lineY",...e),bx=(...e)=>ct("barX",...e),cE=(...e)=>ct("barY",...e),wpt=(...e)=>ct("cell",...e),_pt=(...e)=>ct("cellX",...e),Spt=(...e)=>ct("cellY",...e),xpt=(...e)=>ct("rect",...e),Ipt=(...e)=>ct("rectX",...e),rf=(...e)=>ct("rectY",...e),Vv=(...e)=>ct("dot",...e),Tpt=(...e)=>ct("dotX",...e),Ept=(...e)=>ct("dotY",...e),Apt=(...e)=>ct("circle",...e),Mpt=(...e)=>ct("hexagon",...e),RU=(...e)=>ct("text",...e),$pt=(...e)=>ct("textX",...e),Npt=(...e)=>ct("textY",...e),kpt=(...e)=>ct("ruleX",...e),Dpt=(...e)=>ct("ruleY",...e),Opt=(...e)=>ct("tickX",...e),LU=(...e)=>ct("tickY",...e),Fpt=(...e)=>ct("vector",...e),Bpt=(...e)=>ct("vectoX",...e),Rpt=(...e)=>ct("vectorY",...e),Lpt=(...e)=>ct("spike",...e),Cpt=(...e)=>ct("image",...e),Upt=(...e)=>lE($U,"areaX",...e),Ppt=(...e)=>lE($U,"areaY",...e),zpt=(...e)=>Rc(Yht,...e),CU=(...e)=>Rc(Xht,...e),UU=(...e)=>Rc(Zht,...e),U1=(...e)=>Rc(OU,...e),jpt=(...e)=>Rc(ept,...e),PU=(...e)=>Rc(tpt,...e),zU=(...e)=>ct("hexgrid",...e),jU=(...e)=>Rc(dpt,...e),Vpt=(...e)=>ct("voronoi",...e),Ypt=(...e)=>ct("voronoiMesh",...e),qpt=(...e)=>ct("delaunayLink",...e),Wpt=(...e)=>ct("delaunayMesh",...e),Hpt=(...e)=>ct("hull",...e),Gpt=(...e)=>ct("arrow",...e),Xpt=(...e)=>ct("link",...e),Qpt=(...e)=>ct("frame",...e),Kpt=(...e)=>ct("axisX",...e),Zpt=(...e)=>ct("axisY",...e),Jpt=(...e)=>ct("axisFx",...e),tyt=(...e)=>ct("axisFy",...e),eyt=(...e)=>ct("gridX",...e),nyt=(...e)=>ct("gridY",...e),ryt=(...e)=>ct("gridFx",...e),iyt=(...e)=>ct("gridFy",...e),VU=(...e)=>ct("geo",...e),YU=(...e)=>ct("sphere",...e),syt=(...e)=>ct("graticule",...e),oyt=Object.freeze(Object.defineProperty({__proto__:null,area:mpt,areaX:gpt,areaY:FU,arrow:Gpt,axisFx:Jpt,axisFy:tyt,axisX:Kpt,axisY:Zpt,barX:bx,barY:cE,cell:wpt,cellX:_pt,cellY:Spt,circle:Apt,contour:UU,delaunayLink:qpt,delaunayMesh:Wpt,denseLine:CU,density:zpt,densityX:Upt,densityY:Ppt,dot:Vv,dotX:Tpt,dotY:Ept,frame:Qpt,geo:VU,graticule:syt,gridFx:ryt,gridFy:iyt,gridX:eyt,gridY:nyt,hexagon:Mpt,hexbin:PU,hexgrid:zU,hull:Hpt,image:Cpt,line:bpt,lineX:vpt,lineY:BU,link:Xpt,raster:U1,rasterTile:jpt,rect:xpt,rectX:Ipt,rectY:rf,regressionY:jU,ruleX:kpt,ruleY:Dpt,sphere:YU,spike:Lpt,text:RU,textX:$pt,textY:Npt,tickX:Opt,tickY:LU,vector:Fpt,vectorX:Bpt,vectorY:Rpt,voronoi:Vpt,voronoiMesh:Ypt},Symbol.toStringTag,{value:"Module"}));function ayt(e){const t=e.toLowerCase(),n=e.length;let r="";for(let i=0;i<n;++i)r+=(e[i]!==t[i]?"-":"")+t[i];return r}function uE(e){const t={};for(const n in e)t[ayt(n)]=e[n];return t}class lyt{constructor(t,{selection:n,channels:r={}}){this.mark=t,this.selection=n;const i=Object.entries(uE(r));this.channels=i.length?i:[["opacity",.2]],this.selection.addEventListener("value",kO(()=>this.update()))}init(t){this.svg=t;const n=this.values=[],r=this.mark.index,i=this.nodes=t.querySelectorAll(`[data-index="${r}"] > *`),{channels:s}=this;for(let o=0;o<i.length;++o){const a=i[o];n.push(s.map(l=>a.getAttribute(l[0])))}return this.update()}async update(){const{svg:t,nodes:n,channels:r,values:i,mark:s,selection:o}=this;if(!t)return;const a=await cyt(s,o);for(let l=0;l<n.length;++l){const c=n[l],u=i[l],f=a(c.__data__);for(let d=0;d<r.length;++d){const[h,p]=r[d];c.setAttribute(h,f?u[d]:p)}}}}async function cyt(e,t){var c,u;const n=t==null?void 0:t.predicate(e);if(!n||n.length===0)return()=>!0;const r=(c=e.filterBy)==null?void 0:c.predicate(e,!0),i={__:yc(n)},s=e.query(r),o=s.groupby().length?s.select(i):s.$select(i),a=await br().query(o),l=(u=a.getChild)==null?void 0:u.call(a,"__");return a.numRows||a.length?l?f=>l.get(f):f=>a[f].__:()=>!1}class qU{constructor(t,{selection:n,channels:r,peers:i=!0}){this.value=null,this.mark=t,this.selection=n,this.peers=i,this.channels=r.map(s=>{var a;const o=s==="color"?["fill","stroke"]:s==="x"?["x","x1","x2"]:s==="y"?["y","y1","y2"]:[s];for(let l=0;l<o.length;++l){const c=t.channelField(o[l]);if(c)return{field:((a=c.field)==null?void 0:a.basis)||c.field,as:c.as}}throw new Error(`Missing channel: ${s}`)})}clause(t){const{channels:n,mark:r}=this;let i=null;if(t){const s=t.map(o=>{const a=o.map((l,c)=>LW(n[c].field,Jp(l)));return a.length>1?yc(a):a[0]});i=s.length>1?SO(s):s[0]}return{source:this,schema:{type:"point"},clients:this.peers?r.plot.markSet:new Set().add(r),value:t,predicate:i}}init(t,n,r){const{mark:i,channels:s,selection:o}=this,{data:a}=i;r=r||(c=>{const u=a[c.__data__];return s.map(f=>u[f.as])}),n=n||`[data-index="${i.index}"]`;const l=new Set(t.querySelectorAll(n));t.addEventListener("pointerdown",c=>{const u=o.single?o.value:this.value,f=c.target;let d=null;if(uyt(l,f)){const h=r(f);c.shiftKey&&(u!=null&&u.length)?(d=u.filter(p=>vx(p,h)),d.length===u.length&&d.push(h)):(u==null?void 0:u.length)===1&&!vx(u[0],h)?d=null:d=[h]}this.value=d,fyt(u,d)&&o.update(this.clause(d))}),t.addEventListener("pointerenter",()=>{this.selection.activate(this.clause([this.channels.map(()=>0)]))})}}function uyt(e,t){var n;return e.has(t)||e.has(t.parentNode)||e.has((n=t.parentNode)==null?void 0:n.parentNode)}function fyt(e,t){return e==null||t==null?e!=null||t!=null:e.length!==t.length||e.some((n,r)=>vx(n,t[r]))}function vx(e,t){const n=e.length;if(t.length!==n)return!0;for(let r=0;r<n;++r)if(e[r]!==t[r])return!0;return!1}function fE(e){const t=e.on;let n=!0;function r(i){n=!1,i(),n=!0}return e.reset=(...i)=>{r(()=>e.clear(...i))},e.moveSilent=(...i)=>{r(()=>e.move(...i))},e.on=(...i)=>{if(i.length>1&&i[1]){const s=i[1];i[1]=(...o)=>n&&s(...o)}return t(...i)},e}function dyt(){return fE(NZ())}function hyt(){return fE(MZ())}function pyt(){return fE($Z())}const $N=1e-12;function wx(e,t){return e===t||e&&t&&Math.abs(e[0]-t[0])<$N&&Math.abs(e[1]-t[1])<$N||!1}function jf(e,t){var r;const n=(r=e.channelField(t))==null?void 0:r.field;return(n==null?void 0:n.basis)||n}function _x(e,t,n=1){return t.invert(n*Math.floor(e/n))}function WU(){const e=this,t=e.getScreenCTM;let n;e.getScreenCTM=()=>e.isConnected?n=t.call(e):n}class HU{constructor(t,{channel:n,selection:r,field:i,pixelSize:s=1,peers:o=!0,brush:a}){this.mark=t,this.channel=n,this.pixelSize=s||1,this.selection=r,this.peers=o,this.field=i||jf(t,[n,n+"1",n+"2"]),this.style=a&&uE(a),this.brush=n==="y"?pyt():hyt(),this.brush.on("brush end",({selection:l})=>this.publish(l))}reset(){this.value=void 0,this.g&&this.brush.reset(this.g)}activate(){this.selection.activate(this.clause(this.value||[0,1]))}publish(t){let n;t&&(n=t.map(r=>_x(r,this.scale,this.pixelSize)).sort((r,i)=>r-i)),wx(n,this.value)||(this.value=n,this.g.call(this.brush.moveSilent,t),this.selection.update(this.clause(n)))}clause(t){const{mark:n,pixelSize:r,field:i,scale:s}=this;return{source:this,schema:{type:"interval",pixelSize:r,scales:[s]},clients:this.peers?n.plot.markSet:new Set().add(n),value:t,predicate:t?Lr(i,t):null}}init(t){var c;const{brush:n,channel:r,style:i}=this;this.scale=t.scale(r);const s=t.scale("x").range,o=t.scale("y").range;n.extent([[vn(s),vn(o)],[Ne(s),Ne(o)]]);const a=me(t).selectAll('g[aria-label="facet"]'),l=a.size()?a:me(t);if(this.g=l.append("g").attr("class",`interval-${r}`).each(WU).call(n).call(n.moveSilent,(c=this.value)==null?void 0:c.map(this.scale.apply)),i){const u=this.g.selectAll("rect.selection");for(const f in i)u.attr(f,i[f])}t.addEventListener("pointerenter",()=>this.activate())}}const C0=(e,t)=>e-t;class yyt{constructor(t,{selection:n,xfield:r,yfield:i,pixelSize:s=1,peers:o=!0,brush:a}){this.mark=t,this.pixelSize=s||1,this.selection=n,this.peers=o,this.xfield=r||jf(t,["x","x1","x2"]),this.yfield=i||jf(t,["y","y1","y2"]),this.style=a&&uE(a),this.brush=dyt(),this.brush.on("brush end",({selection:l})=>this.publish(l))}reset(){this.value=void 0,this.g&&this.brush.reset(this.g)}activate(){this.selection.activate(this.clause(this.value||[[0,1],[0,1]]))}publish(t){const{value:n,pixelSize:r,xscale:i,yscale:s}=this;let o,a;if(t){const[l,c]=t;o=[l[0],c[0]].map(u=>_x(u,i,r)).sort(C0),a=[l[1],c[1]].map(u=>_x(u,s,r)).sort(C0)}(!wx(o,n==null?void 0:n[0])||!wx(a,n==null?void 0:n[1]))&&(this.value=t?[o,a]:void 0,this.g.call(this.brush.moveSilent,t),this.selection.update(this.clause(this.value)))}clause(t){const{mark:n,pixelSize:r,xfield:i,yfield:s,xscale:o,yscale:a}=this;return{source:this,schema:{type:"interval",pixelSize:r,scales:[o,a]},clients:this.peers?n.plot.markSet:new Set().add(n),value:t,predicate:t?yc(Lr(i,t[0]),Lr(s,t[1])):null}}init(t){const{brush:n,style:r}=this,i=this.xscale=t.scale("x"),s=this.yscale=t.scale("y"),o=i.range,a=s.range;n.extent([[vn(o),vn(a)],[Ne(o),Ne(a)]]);const l=me(t).selectAll('g[aria-label="facet"]'),c=l.size()?l:me(t);if(this.g=c.append("g").attr("class","interval-xy").each(WU).call(n),r){const u=this.g.selectAll("rect.selection");for(const f in r)u.attr(f,r[f])}if(this.value){const[u,f]=this.value[0].map(i.apply).sort(C0),[d,h]=this.value[1].map(s.apply).sort(C0);this.g.call(n.moveSilent,[[u,d],[f,h]])}t.addEventListener("pointerenter",()=>this.activate())}}const NN=(e,t)=>e-t;class myt{constructor(t,{x:n=new Ca,y:r=new Ca,xfield:i,yfield:s,zoom:o=!0,panx:a=!0,pany:l=!0}){this.mark=t,this.xsel=n,this.ysel=r,this.xfield=i||jf(t,["x","x1","x2"]),this.yfield=s||jf(t,["y","y1","y2"]),this.zoom=$_(o,[0,1/0],[1,1]),this.panx=this.xsel&&a,this.pany=this.ysel&&l;const{plot:c}=t;a&&this.xsel.addEventListener("value",u=>{c.setAttribute("xDomain",u)&&c.update()}),l&&this.ysel.addEventListener("value",u=>{c.setAttribute("yDomain",u)&&c.update()})}publish(t){if(this.panx){const n=gyt(t,this.xscale);this.xsel.update(this.clause(n,this.xfield,this.xscale))}if(this.pany){const n=byt(t,this.yscale);this.ysel.update(this.clause(n,this.yfield,this.yscale))}}clause(t,n,r){return{source:this,schema:{type:"interval",scales:[r]},clients:this.mark.plot.markSet,value:t,predicate:t?Lr(n,t):null}}init(t){if(this.svg=t,this.initialized)return;this.initialized=!0;const{panx:n,pany:r,mark:{plot:{element:i}},xsel:s,ysel:o}=this;this.xscale=t.scale("x"),this.yscale=t.scale("y");const a=this.xscale.range.slice().sort(NN),l=this.yscale.range.slice().sort(NN),c=$_(n,[-1/0,1/0],a),u=$_(r,[-1/0,1/0],l),f=xrt().extent([[a[0],l[0]],[a[1],l[1]]]).scaleExtent(this.zoom).translateExtent([[c[0],u[0]],[c[1],u[1]]]).on("start",()=>{this.xscale=this.svg.scale("x"),this.yscale=this.svg.scale("y")}).on("end",()=>i.__zoom=new As(1,0,0)).on("zoom",({transform:d})=>this.publish(d));if(me(i).call(f),n||r){let d=!1;i.addEventListener("mouseenter",()=>{if(!d){if(d=!0,n){const{xscale:h,xfield:p}=this;s.activate(this.clause(h.domain,p,h))}if(r){const{yscale:h,yfield:p}=this;o.activate(this.clause(h.domain,p,h))}}}),i.addEventListener("mouseleave",()=>d=!1)}}}function $_(e,t,n){return e?Array.isArray(e)?e:t:n}function gyt(e,t){return t.range.map(e.invertX,e).map(t.invert,t)}function byt(e,t){return t.range.map(e.invertY,e).map(t.invert,t)}class GU{constructor(t,{selection:n,channel:r,field:i}){this.mark=t,this.selection=n,this.clients=new Set().add(t),this.channel=r,this.field=i||jf(t,[r])}clause(t){const{clients:n,field:r}=this,i=t?JI(r,Jp(t)):null;return{source:this,schema:{type:"point"},clients:n,value:t,predicate:i}}init(t){const n=this,{mark:r,channel:i,selection:s}=this,{data:o}=r,a=r.channelField(i).as,l=me(t).selectAll('g[aria-label="facet"]'),c=l.size()?l:me(t),u=t.scale(i),f=!mc(s);c.on("pointerdown pointermove",function(d){const[h,p]=$i(d,this),g=vyt(o,a,u.invert(i==="x"?h:p));s.update(f?g:n.clause(g))}),!f&&t.addEventListener("pointerenter",()=>{this.selection.activate(this.clause(0))})}}function vyt(e,t,n){let r=1/0,i;return e.forEach(s=>{const o=Math.abs(s[t]-n);o<r&&(r=o,i=s[t])}),i}function hl(e,t){return n=>{const r=n.marks[n.marks.length-1];n.addInteractor(new e(r,t))}}function P1({by:e,...t}){return hl(lyt,{selection:e,channels:t})}function Yv({as:e,...t}){return hl(qU,{...t,selection:e})}function XU(e){return Yv({...e,channels:["x"]})}function QU(e){return Yv({...e,channels:["y"]})}function wyt(e){return Yv({...e,channels:["color"]})}function _yt({as:e,...t}){return hl(GU,{...t,selection:e,channel:"x"})}function Syt({as:e,...t}){return hl(GU,{...t,selection:e,channel:"y"})}function lc({as:e,...t}){return hl(HU,{...t,selection:e,channel:"x"})}function xyt({as:e,...t}){return hl(HU,{...t,selection:e,channel:"y"})}function Sx({as:e,...t}){return hl(yyt,{...t,selection:e})}function gd(e){return hl(myt,e)}function Iyt(e={}){return gd({...e,zoom:!1})}function Tyt(e={}){return gd({...e,zoom:!1,pany:!1})}function Eyt(e={}){return gd({...e,zoom:!1,panx:!1})}function Ayt(e={}){return gd(e)}function Myt(e={}){return gd({...e,pany:!1})}function $yt(e={}){return gd({...e,panx:!1})}const Nyt=Object.freeze(Object.defineProperty({__proto__:null,highlight:P1,intervalX:lc,intervalXY:Sx,intervalY:xyt,nearestX:_yt,nearestY:Syt,pan:Iyt,panX:Tyt,panY:Eyt,panZoom:Ayt,panZoomX:Myt,panZoomY:$yt,toggle:Yv,toggleColor:wyt,toggleX:XU,toggleY:QU},Symbol.toStringTag,{value:"Module"}));class kN{constructor(t,n){const{as:r,...i}=n;this.channel=t,this.options={label:null,...i},this.selection=r,this.element=document.createElement("div"),this.element.setAttribute("class","legend"),this.element.value=this}setPlot(t){const{channel:n,selection:r}=this,i=kyt(t,n);this.selection&&i&&(this.handler=new qU(i,{selection:r,channels:[n]}),this.selection.addEventListener("value",()=>this.update()))}init(t){const{channel:n,options:r,handler:i}=this,o=t.scale(n).type==="ordinal"?r:{marginTop:1,tickSize:2,height:28,...r};return this.legend=t.legend(n,o),i&&(i.init(this.legend,":scope > div",a=>[a.__data__]),this.update()),this.element.replaceChildren(this.legend),this.element}update(){if(!this.legend)return;const{value:t}=this.selection,n=t&&t.length?new Set(t.map(i=>i[0])):null,r=this.legend.querySelectorAll(":scope > div");for(const i of r){const s=n?n.has(i.__data__):!0;i.style.opacity=s?1:.2}}}function kyt({marks:e},t){const n=t==="color"?["fill","stroke"]:t==="opacity"?["opacity","fillOpacity","strokeOpacity"]:null;if(n==null)return null;for(let r=e.length-1;r>-1;--r)if(e[r].channelField(n))return e[r];return null}function dE(e,t={}){if(t.for){const{for:n,...r}=t,i=new kN(e,r),s=typeof n,o=a=>a.addLegend(i,!1);return s==="string"?aU.request(n,o):n.value&&o(n.value),i.element}else return n=>n.addLegend(new kN(e,t))}const KU=e=>dE("color",e),Dyt=e=>dE("opacity",e),Oyt=e=>dE("symbol",e),Fyt=Object.freeze(Object.defineProperty({__proto__:null,colorLegend:KU,opacityLegend:Dyt,symbolLegend:Oyt},Symbol.toStringTag,{value:"Module"}));function ZU({direction:e="vertical",wrap:t=!1},n){const r=document.createElement("div");return r.style.display="flex",r.style.flexDirection=e==="vertical"?"column":"row",r.style.flexWrap=t?t===!0?"wrap":t:"nowrap",r.style.justifyContent="flex-start",r.style.alignItems="flex-start",n.forEach(i=>r.appendChild(i)),r.value={element:r},r}function bd(...e){return ZU({direction:"vertical"},e.flat())}function Vf(...e){return ZU({direction:"horizontal"},e.flat())}function Byt({dim:e="width",size:t=10}){const n=document.createElement("span");n.style.display="inline-block",n.style[e]=Number.isNaN(+t)?t:`${t}px`;const r={element:n};return n.value=r,n}function Ryt(e){return Byt({dim:"width",size:e})}function Lyt(e){return e}function Cyt(e){if(e==null)return Lyt;var t,n,r=e.scale[0],i=e.scale[1],s=e.translate[0],o=e.translate[1];return function(a,l){l||(t=n=0);var c=2,u=a.length,f=new Array(u);for(f[0]=(t+=a[0])*r+s,f[1]=(n+=a[1])*i+o;c<u;)f[c]=a[c],++c;return f}}function Uyt(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function Pyt(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return DN(e,n)})}:DN(e,t)}function DN(e,t){var n=t.id,r=t.bbox,i=t.properties==null?{}:t.properties,s=zyt(e,t);return n==null&&r==null?{type:"Feature",properties:i,geometry:s}:r==null?{type:"Feature",id:n,properties:i,geometry:s}:{type:"Feature",id:n,bbox:r,properties:i,geometry:s}}function zyt(e,t){var n=Cyt(e.transform),r=e.arcs;function i(u,f){f.length&&f.pop();for(var d=r[u<0?~u:u],h=0,p=d.length;h<p;++h)f.push(n(d[h],h));u<0&&Uyt(f,p)}function s(u){return n(u)}function o(u){for(var f=[],d=0,h=u.length;d<h;++d)i(u[d],f);return f.length<2&&f.push(f[0]),f}function a(u){for(var f=o(u);f.length<4;)f.push(f[0]);return f}function l(u){return u.map(a)}function c(u){var f=u.type,d;switch(f){case"GeometryCollection":return{type:f,geometries:u.geometries.map(c)};case"Point":d=s(u.coordinates);break;case"MultiPoint":d=u.coordinates.map(s);break;case"LineString":d=o(u.arcs);break;case"MultiLineString":d=u.arcs.map(o);break;case"Polygon":d=l(u.arcs);break;case"MultiPolygon":d=u.arcs.map(l);break;default:return null}return{type:f,coordinates:d}}return c(t)}const jyt={menu:jH,search:WH,slider:Z2,table:PO};new Map(Object.entries(oyt));new Map(Object.entries(jyt));new Map(Object.entries(Fyt));new Map(Object.entries(_ht));new Map(Object.entries(Nyt));const Vyt="https://app.motherduck.com",Yyt="WASM Client Library Example: Mosaic Integration";function qyt({connect:e}){const[t,n]=xn.useState(null),[r,i]=xn.useState(!1),s=xn.useCallback(c=>{n(c.target.value)},[]),o=xn.useCallback(()=>{const c=new URL(window.location.href);c.searchParams.set("tokenInClipboard","y"),window.location.href=`${Vyt}/token-request?appName=${encodeURIComponent(Yyt)}&returnTo=${encodeURIComponent(c.toString())}`},[]),a=xn.useCallback(()=>{if(t){const c=new URL(window.location.href);c.searchParams.get("tokenInClipboard")&&(c.searchParams.delete("tokenInClipboard"),history.pushState({},"",c)),e(t)}},[e,t]);xn.useEffect(()=>{async function c(){const u=new URL(window.location.href);if(u.searchParams.get("tokenInClipboard")){if(navigator.clipboard.readText){const f=await navigator.clipboard.readText();if(f){u.searchParams.delete("tokenInClipboard"),history.pushState({},"",u),e(f);return}}i(!0)}}c()},[e]);const l=xn.useCallback(c=>{c&&c.focus()},[]);return Ut.jsxs("div",{id:"connect-pane",children:[Ut.jsx("div",{id:"token-in-clipboard-note",style:{visibility:r?"visible":"hidden"},children:"Your token is in the clipboard. Paste it and click Connect."}),Ut.jsx("div",{id:"token-input-row",children:Ut.jsx("input",{ref:l,id:"token-input",type:"password",placeholder:"Paste MotherDuck Service Token Here",onChange:s})}),Ut.jsxs("div",{id:"connect-button-row",children:[Ut.jsx("button",{id:"get-token-button",onClick:o,children:"Get Token"}),Ut.jsx("button",{id:"connect-button",disabled:!t,onClick:a,children:"Connect"})]})]})}const Wyt="assets/motherduck_logo-X5yv95Gl.svg";function Hyt(){return Ut.jsxs("div",{id:"header",children:[Ut.jsx("div",{id:"title",children:Ut.jsx("a",{href:"https://motherduck.com",target:"_blank",children:Ut.jsx("img",{src:Wyt,alt:"MotherDuck logo"})})}),Ut.jsxs("div",{id:"subtitle",children:["WASM Client Example: ",Ut.jsx("a",{href:"https://uwdata.github.io/mosaic/",target:"_blank",children:"Mosaic"})," Integration"]})]})}class Gyt{async initialize(){await br().exec(`create temp table if not exists complaints as 
        select year(created_date)::int as Year, count(*)::int as Complaints
        from sample_data.nyc.service_requests
        where Year < 2023
        and agency_name = 'New York City Police Department'
        group by 1
        order by 1;`),await br().exec(`create temp table if not exists complaints_details as
        select year(created_date)::int as Year, complaint_type as Type, count(*)::int as Complaints
        from sample_data.nyc.service_requests
        where Year < 2023
        and agency_name = 'New York City Police Department'
        group by 1, 2
        order by 1, 3 desc;`)}render(){const t=Ca.single();return bd(Xe(cE(Fe("complaints"),{x:"Year",y:"Complaints",fill:"steelblue"}),P1({by:t}),XU({as:t}),iE("d"),L1(!0),Fh("s")),PO({from:"complaints_details",filterBy:t,format:{Year:n=>String(n)},width:{Year:80,Type:400,Complaints:100},height:400}))}}const is=[dU(null),hU(null),uU({left:5,top:5,right:5,bottom:5}),Ri(160),$s(100),sE([0,9])];class Xyt{async initialize(){await br().exec(eH("md",[{i:0,u:"A",v:2},{i:1,u:"B",v:8},{i:2,u:"C",v:3},{i:3,u:"D",v:7},{i:4,u:"E",v:5},{i:5,u:"F",v:4},{i:6,u:"G",v:6},{i:7,u:"H",v:1}]))}render(){return bd(Vf(Xe(cE(Fe("md"),{x:"u",y:"v",fill:"steelblue"}),...is),Xe(BU(Fe("md"),{x:"u",y:"v",stroke:"steelblue",curve:"monotone-x",marker:"circle"}),...is),Xe(RU(Fe("md"),{x:"u",y:"v",text:"u",fill:"steelblue"}),...is),Xe(LU(Fe("md"),{x:"u",y:"v",stroke:"steelblue"}),...is),Xe(FU(Fe("md"),{x:"u",y:"v",fill:"steelblue"}),...is)),Vf(Xe(Vv(Fe("md"),{x:"i",y:"v",fill:"currentColor",r:1.5}),jU(Fe("md"),{x:"i",y:"v",stroke:"steelblue"}),...is,ii([-.5,7.5])),Xe(zU({stroke:"#aaa",strokeOpacity:.5}),PU(Fe("md"),{x:"i",y:"v",fill:pr()}),...is,ef("blues"),ii([-1,8])),Xe(UU(Fe("md"),{x:"i",y:"v",stroke:"steelblue",bandwidth:15}),...is,ii([-1,8])),Xe(U1(Fe("md"),{x:"i",y:"v",fill:"density",bandwidth:15}),...is,ef("blues"),ii([-1,8])),Xe(CU(Fe("md"),{x:"i",y:"v",fill:"density",bandwidth:2,binWidth:1}),...is,ef("blues"),ii([-1,8]))))}}class Qyt{async initialize(){await br().exec(`CREATE TEMP VIEW IF NOT EXISTS gaia_viz AS -- compute u and v with natural earth projection
      WITH prep AS (
        SELECT
          radians((-l + 540) % 360 - 180) AS lambda,
          radians(b) AS phi,
          asin(sqrt(3)/2 * sin(phi)) AS t,
          t^2 AS t2,
          t2^3 AS t6,
          *
        FROM mosaic_examples.main.gaia_5m
      )
      SELECT
        (1.340264 * lambda * cos(t)) / (sqrt(3)/2 * (1.340264 + (-0.081106 * 3 * t2) + (t6 * (0.000893 * 7 + 0.003796 * 9 * t2)))) AS u,
        t * (1.340264 + (-0.081106 * t2) + (t6 * (0.000893 + 0.003796 * t2))) AS v,
        * EXCLUDE('t', 't2', 't6')
      FROM prep
      WHERE parallax BETWEEN -5 AND 20`)}render(){const t=Ca.crossfilter(),n=yr.value(0),r=yr.value(2),i=yr.value("sqrt");return Vf(bd(Xe(U1(Fe("gaia_viz",{filterBy:t}),{x:"u",y:"v",fill:"density",bandwidth:n,binWidth:r,binType:"normal"}),Sx({pixelSize:2,as:t}),R1(ai),dx(i),ef("viridis"),Ri(440),$s(250),dh(25),ux(20),cx(1)),Vf(Xe(rf(Fe("gaia_viz",{filterBy:t}),{x:Eh("phot_g_mean_mag"),y:pr(),fill:"steelblue",inset:.5}),lc({as:t}),ii(ai),fx(i),L1(!0),Ri(220),$s(120),dh(65)),Xe(rf(Fe("gaia_viz",{filterBy:t}),{x:Eh("parallax"),y:pr(),fill:"steelblue",inset:.5}),lc({as:t}),ii(ai),fx(i),L1(!0),Ri(220),$s(120),dh(65)))),Ryt(10),Xe(U1(Fe("gaia_viz",{filterBy:t}),{x:"bp_rp",y:"phot_g_mean_mag",fill:"density",bandwidth:n,binWidth:r,binType:"normal"}),Sx({pixelSize:2,as:t}),R1(ai),dx(i),ef("viridis"),yU(!0),Ri(230),$s(370),dh(25),ux(20),cx(1)))}}const Kyt="assets/countries-110m-MkhAC_yf.json";class Zyt{constructor(){Zt(this,"land",null)}async initialize(){this.land=await fetch(Kyt).then(t=>t.json()).then(t=>{if(t.objects.land.type!=="GeometryCollection")throw Error("unexpected geojson type");return Pyt(t,t.objects.land).features})}render(){const t=yr.value(-180),n=yr.value(-30),r=yr.array([t,n]);return bd(Vf(Z2({label:"Longitude",as:t,min:-180,max:180,step:1}),Z2({label:"Latitude",as:n,min:-90,max:90,step:1})),Xe(VU(this.land,{fill:"currentColor",fillOpacity:.2}),YU(),Vv(Fe("mosaic_examples.main.earthquakes"),{x:"longitude",y:"latitude",r:G`POW(10, magnitude)`,stroke:"red",fill:"red",fillOpacity:.2}),fU("overflow: visible;"),bU("orthographic"),vU(r)))}}class Jyt{async initialize(){await br().exec("CREATE TEMP TABLE IF NOT EXISTS weather AS SELECT * FROM mosaic_examples.main.seattle_weather")}render(){const t=Ca.single(),n=yr.array(["sun","fog","drizzle","rain","snow"]),r=yr.array(["#e7ba52","#a7a7a7","#aec7e8","#1f77b4","#9467bd"]),i=Ca.intersect();return bd(Vf(Xe(Vv(Fe("weather",{filterBy:t}),{x:ZW("date"),y:"temp_max",fill:"weather",r:"precipitation",fillOpacity:.7}),lc({as:i,brush:{fill:"none",stroke:"#888"}}),P1({by:i,fill:"#ccc",fillOpacity:.2}),KU({as:t,columns:1}),R1(ai),iE("%b"),hx(n),px(r),mU(ai),gU([2,10]),Ri(680),$s(300))),Xe(bx(Fe("weather"),{x:pr(),y:"weather",fill:"#ccc",fillOpacity:.2}),bx(Fe("weather",{filterBy:i}),{x:pr(),y:"weather",fill:"weather",order:"weather"}),QU({as:t}),P1({by:t}),ii(ai),sE(n),pU(null),hx(n),px(r),Ri(680)))}}const ON="flights_200k_viz",FN="flights_10m_viz";class BN{constructor(t="flights_200k"){Zt(this,"flightsTableName");Zt(this,"vizTable",null);this.flightsTableName=t}async initialize(){const t=`mosaic_examples.main.${this.flightsTableName}`;this.flightsTableName==="flights_10m"?(await br().exec(`
      create temp view if not exists ${FN} as
      select GREATEST(-60, LEAST(ARR_DELAY, 180))::DOUBLE AS delay, DISTANCE AS distance, DEP_TIME AS time
      from ${t}
      `),this.vizTable=FN):(await br().exec(`
      create temp view if not exists ${ON} as
      select *
      from ${t}
      `),this.vizTable=ON)}render(){const t=Ca.crossfilter();return bd(Xe(rf(Fe(this.vizTable,{filterBy:t}),{x:Eh("delay"),y:pr(),fill:"steelblue",inset:.5}),lc({as:t}),ii(ai),Fh("s"),Ri(600),$s(200)),Xe(rf(Fe(this.vizTable,{filterBy:t}),{x:Eh("time"),y:pr(),fill:"steelblue",inset:.5}),lc({as:t}),ii(ai),Fh("s"),Ri(600),$s(200)),Xe(rf(Fe(this.vizTable,{filterBy:t}),{x:Eh("distance"),y:pr(),fill:"steelblue",inset:.5}),lc({as:t}),ii(ai),Fh("s"),Ri(600),$s(200)))}}const JU={"Mark Types":new Xyt,"NYPD Complaints":new Gyt,Earthquakes:new Zyt,"Seattle Weather":new Jyt,"Flights 200K":new BN("flights_200k"),"Flights 10M":new BN("flights_10m"),"Gaia Star Catalog":new Qyt},RN=Object.keys(JU);function t0t(){const[e,t]=xn.useState(null),[n,r]=xn.useState(null),[i,s]=xn.useState(RN[0]),o=xn.useCallback(a=>{s(a.target.value)},[]);return xn.useEffect(()=>{(async()=>{if(n){const a=JU[i];t(null),n.innerHTML="Loading, please wait…";try{await a.initialize(),n.innerHTML="",n.appendChild(a.render())}catch(l){const c=String(l);n.innerHTML=c,/Catalog "sample_data" does not exist!/.test(c)?t("sample_data"):/Catalog "mosaic_examples" does not exist!/.test(c)&&t("mosaic_examples")}}})()},[i,n]),Ut.jsxs("div",{id:"vizzes-pane",children:[Ut.jsx("div",{id:"selector-pane",children:Ut.jsx("select",{id:"viz-selector",value:i,onChange:o,children:RN.map(a=>Ut.jsx("option",{children:a},a))})}),Ut.jsx("div",{id:"viz-pane",ref:r}),e==="sample_data"?Ut.jsxs("div",{id:"help-pane",children:[Ut.jsxs("div",{children:["This example requires the ",Ut.jsx("span",{className:"code",children:"sample_data"})," share."]}),Ut.jsx("div",{children:"To attach it to your account, run:"}),Ut.jsx("pre",{children:"ATTACH 'md:_share/sample_data/23b0d623-1361-421d-ae77-62d701d471e6';"})]}):null,e==="mosaic_examples"?Ut.jsxs("div",{id:"help-pane",children:[Ut.jsxs("div",{children:["This example requires the ",Ut.jsx("span",{className:"code",children:"mosaic_examples"})," share."]}),Ut.jsx("div",{children:"To attach it to your account, run:"}),Ut.jsx("pre",{children:"ATTACH 'md:_share/mosaic_examples/b01cfda8-239e-4148-a228-054b94cdc3b4';"})]}):null]})}const e0t=new TextDecoder("utf-8"),xx=e=>e0t.decode(e),n0t=new TextEncoder,hE=e=>n0t.encode(e),r0t=e=>typeof e=="number",t9=e=>typeof e=="boolean",on=e=>typeof e=="function",xr=e=>e!=null&&Object(e)===e,$c=e=>xr(e)&&on(e.then),Oy=e=>xr(e)&&on(e[Symbol.iterator]),vd=e=>xr(e)&&on(e[Symbol.asyncIterator]),Ix=e=>xr(e)&&xr(e.schema),e9=e=>xr(e)&&"done"in e&&"value"in e,n9=e=>xr(e)&&on(e.stat)&&r0t(e.fd),r9=e=>xr(e)&&pE(e.body),qv=e=>"_getDOMStream"in e&&"_getNodeStream"in e,i0t=e=>xr(e)&&on(e.abort)&&on(e.getWriter)&&!qv(e),pE=e=>xr(e)&&on(e.cancel)&&on(e.getReader)&&!qv(e),s0t=e=>xr(e)&&on(e.end)&&on(e.write)&&t9(e.writable)&&!qv(e),i9=e=>xr(e)&&on(e.read)&&on(e.pipe)&&t9(e.readable)&&!qv(e),o0t=e=>xr(e)&&on(e.clear)&&on(e.bytes)&&on(e.position)&&on(e.setPosition)&&on(e.capacity)&&on(e.getBufferIdentifier)&&on(e.createLong),yE=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function a0t(e){const t=e[0]?[e[0]]:[];let n,r,i,s;for(let o,a,l=0,c=0,u=e.length;++l<u;){if(o=t[c],a=e[l],!o||!a||o.buffer!==a.buffer||a.byteOffset<o.byteOffset){a&&(t[++c]=a);continue}if({byteOffset:n,byteLength:i}=o,{byteOffset:r,byteLength:s}=a,n+i<r||r+s<n){a&&(t[++c]=a);continue}t[c]=new Uint8Array(o.buffer,n,r-n+s)}return t}function LN(e,t,n=0,r=t.byteLength){const i=e.byteLength,s=new Uint8Array(e.buffer,e.byteOffset,i),o=new Uint8Array(t.buffer,t.byteOffset,Math.min(r,i));return s.set(o,n),e}function Ps(e,t){const n=a0t(e),r=n.reduce((u,f)=>u+f.byteLength,0);let i,s,o,a=0,l=-1;const c=Math.min(t||Number.POSITIVE_INFINITY,r);for(const u=n.length;++l<u;){if(i=n[l],s=i.subarray(0,Math.min(i.length,c-a)),c<=a+s.length){s.length<i.length?n[l]=i.subarray(s.length):s.length===i.length&&l++,o?LN(o,s,a):o=s;break}LN(o||(o=new Uint8Array(c)),s,a),a+=s.length}return[o||new Uint8Array(0),n.slice(l),r-(o?o.byteLength:0)]}function ue(e,t){let n=e9(t)?t.value:t;return n instanceof e?e===Uint8Array?new e(n.buffer,n.byteOffset,n.byteLength):n:n?(typeof n=="string"&&(n=hE(n)),n instanceof ArrayBuffer?new e(n):n instanceof yE?new e(n):o0t(n)?ue(e,n.bytes()):ArrayBuffer.isView(n)?n.byteLength<=0?new e(0):new e(n.buffer,n.byteOffset,n.byteLength/e.BYTES_PER_ELEMENT):e.from(n)):new e(0)}const Yd=e=>ue(Int32Array,e),Jt=e=>ue(Uint8Array,e),Tx=e=>(e.next(),e);function*l0t(e,t){const n=function*(i){yield i},r=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof yE?n(t):Oy(t)?t:n(t);return yield*Tx(function*(i){let s=null;do s=i.next(yield ue(e,s));while(!s.done)}(r[Symbol.iterator]())),new e}const c0t=e=>l0t(Uint8Array,e);function s9(e,t){return nn(this,arguments,function*(){if($c(t))return yield K(yield K(yield*$a(Br(s9(e,yield K(t))))));const r=function(o){return nn(this,arguments,function*(){yield yield K(yield K(o))})},i=function(o){return nn(this,arguments,function*(){yield K(yield*$a(Br(Tx(function*(a){let l=null;do l=a.next(yield l==null?void 0:l.value);while(!l.done)}(o[Symbol.iterator]())))))})},s=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof yE?r(t):Oy(t)?i(t):vd(t)?t:r(t);return yield K(yield*$a(Br(Tx(function(o){return nn(this,arguments,function*(){let a=null;do a=yield K(o.next(yield yield K(ue(e,a))));while(!a.done)})}(s[Symbol.asyncIterator]()))))),yield K(new e)})}const u0t=e=>s9(Uint8Array,e);function o9(e,t,n){if(e!==0){n=n.slice(0,t);for(let r=-1,i=n.length;++r<i;)n[r]+=e}return n.subarray(0,t)}function f0t(e,t){let n=0;const r=e.length;if(r!==t.length)return!1;if(r>0)do if(e[n]!==t[n])return!1;while(++n<r);return!0}const Zr={fromIterable(e){return U0(d0t(e))},fromAsyncIterable(e){return U0(h0t(e))},fromDOMStream(e){return U0(p0t(e))},fromNodeStream(e){return U0(m0t(e))},toDOMStream(e,t){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(e,t){throw new Error('"toNodeStream" not available in this environment')}},U0=e=>(e.next(),e);function*d0t(e){let t,n=!1,r=[],i,s,o,a=0;function l(){return s==="peek"?Ps(r,o)[0]:([i,r,a]=Ps(r,o),i)}({cmd:s,size:o}=yield null);const c=c0t(e)[Symbol.iterator]();try{do if({done:t,value:i}=Number.isNaN(o-a)?c.next():c.next(o-a),!t&&i.byteLength>0&&(r.push(i),a+=i.byteLength),t||o<=a)do({cmd:s,size:o}=yield l());while(o<a);while(!t)}catch(u){(n=!0)&&typeof c.throw=="function"&&c.throw(u)}finally{n===!1&&typeof c.return=="function"&&c.return(null)}return null}function h0t(e){return nn(this,arguments,function*(){let n,r=!1,i=[],s,o,a,l=0;function c(){return o==="peek"?Ps(i,a)[0]:([s,i,l]=Ps(i,a),s)}({cmd:o,size:a}=yield yield K(null));const u=u0t(e)[Symbol.asyncIterator]();try{do if({done:n,value:s}=Number.isNaN(a-l)?yield K(u.next()):yield K(u.next(a-l)),!n&&s.byteLength>0&&(i.push(s),l+=s.byteLength),n||a<=l)do({cmd:o,size:a}=yield yield K(c()));while(a<l);while(!n)}catch(f){(r=!0)&&typeof u.throw=="function"&&(yield K(u.throw(f)))}finally{r===!1&&typeof u.return=="function"&&(yield K(u.return(new Uint8Array(0))))}return yield K(null)})}function p0t(e){return nn(this,arguments,function*(){let n=!1,r=!1,i=[],s,o,a,l=0;function c(){return o==="peek"?Ps(i,a)[0]:([s,i,l]=Ps(i,a),s)}({cmd:o,size:a}=yield yield K(null));const u=new y0t(e);try{do if({done:n,value:s}=Number.isNaN(a-l)?yield K(u.read()):yield K(u.read(a-l)),!n&&s.byteLength>0&&(i.push(Jt(s)),l+=s.byteLength),n||a<=l)do({cmd:o,size:a}=yield yield K(c()));while(a<l);while(!n)}catch(f){(r=!0)&&(yield K(u.cancel(f)))}finally{r===!1?yield K(u.cancel()):e.locked&&u.releaseLock()}return yield K(null)})}class y0t{constructor(t){this.source=t,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(t){return W(this,void 0,void 0,function*(){const{reader:n,source:r}=this;n&&(yield n.cancel(t).catch(()=>{})),r&&r.locked&&this.releaseLock()})}read(t){return W(this,void 0,void 0,function*(){if(t===0)return{done:this.reader==null,value:new Uint8Array(0)};const n=yield this.reader.read();return!n.done&&(n.value=Jt(n)),n})}}const N_=(e,t)=>{const n=i=>r([t,i]);let r;return[t,n,new Promise(i=>(r=i)&&e.once(t,n))]};function m0t(e){return nn(this,arguments,function*(){const n=[];let r="error",i=!1,s=null,o,a,l=0,c=[],u;function f(){return o==="peek"?Ps(c,a)[0]:([u,c,l]=Ps(c,a),u)}if({cmd:o,size:a}=yield yield K(null),e.isTTY)return yield yield K(new Uint8Array(0)),yield K(null);try{n[0]=N_(e,"end"),n[1]=N_(e,"error");do{if(n[2]=N_(e,"readable"),[r,s]=yield K(Promise.race(n.map(h=>h[2]))),r==="error")break;if((i=r==="end")||(Number.isFinite(a-l)?(u=Jt(e.read(a-l)),u.byteLength<a-l&&(u=Jt(e.read()))):u=Jt(e.read()),u.byteLength>0&&(c.push(u),l+=u.byteLength)),i||a<=l)do({cmd:o,size:a}=yield yield K(f()));while(a<l)}while(!i)}finally{yield K(d(n,r==="error"?s:null))}return yield K(null);function d(h,p){return u=c=null,new Promise((g,v)=>{for(const[y,m]of h)e.off(y,m);try{const y=e.destroy;y&&y.call(e,p),p=void 0}catch(y){p=y||p}finally{p!=null?v(p):g()}})}})}var In;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(In||(In={}));var cn;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(cn||(cn={}));var rn;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(rn||(rn={}));var zr;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(zr||(zr={}));var rt;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(rt||(rt={}));var mr;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(mr||(mr={}));var ie;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(ie||(ie={}));var k;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.Float=3]="Float",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct=13]="Struct",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.Dictionary=-1]="Dictionary",e[e.Int8=-2]="Int8",e[e.Int16=-3]="Int16",e[e.Int32=-4]="Int32",e[e.Int64=-5]="Int64",e[e.Uint8=-6]="Uint8",e[e.Uint16=-7]="Uint16",e[e.Uint32=-8]="Uint32",e[e.Uint64=-9]="Uint64",e[e.Float16=-10]="Float16",e[e.Float32=-11]="Float32",e[e.Float64=-12]="Float64",e[e.DateDay=-13]="DateDay",e[e.DateMillisecond=-14]="DateMillisecond",e[e.TimestampSecond=-15]="TimestampSecond",e[e.TimestampMillisecond=-16]="TimestampMillisecond",e[e.TimestampMicrosecond=-17]="TimestampMicrosecond",e[e.TimestampNanosecond=-18]="TimestampNanosecond",e[e.TimeSecond=-19]="TimeSecond",e[e.TimeMillisecond=-20]="TimeMillisecond",e[e.TimeMicrosecond=-21]="TimeMicrosecond",e[e.TimeNanosecond=-22]="TimeNanosecond",e[e.DenseUnion=-23]="DenseUnion",e[e.SparseUnion=-24]="SparseUnion",e[e.IntervalDayTime=-25]="IntervalDayTime",e[e.IntervalYearMonth=-26]="IntervalYearMonth",e[e.DurationSecond=-27]="DurationSecond",e[e.DurationMillisecond=-28]="DurationMillisecond",e[e.DurationMicrosecond=-29]="DurationMicrosecond",e[e.DurationNanosecond=-30]="DurationNanosecond"})(k||(k={}));var co;(function(e){e[e.OFFSET=0]="OFFSET",e[e.DATA=1]="DATA",e[e.VALIDITY=2]="VALIDITY",e[e.TYPE=3]="TYPE"})(co||(co={}));const g0t=void 0;function Np(e){if(e===null)return"null";if(e===g0t)return"undefined";switch(typeof e){case"number":return`${e}`;case"bigint":return`${e}`;case"string":return`"${e}"`}return typeof e[Symbol.toPrimitive]=="function"?e[Symbol.toPrimitive]("string"):ArrayBuffer.isView(e)?e instanceof BigInt64Array||e instanceof BigUint64Array?`[${[...e].map(t=>Np(t))}]`:`[${e}]`:ArrayBuffer.isView(e)?`[${e}]`:JSON.stringify(e,(t,n)=>typeof n=="bigint"?`${n}`:n)}const b0t=Symbol.for("isArrowBigNum");function Ji(e,...t){return t.length===0?Object.setPrototypeOf(ue(this.TypedArray,e),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(e,...t),this.constructor.prototype)}Ji.prototype[b0t]=!0;Ji.prototype.toJSON=function(){return`"${Dp(this)}"`};Ji.prototype.valueOf=function(){return a9(this)};Ji.prototype.toString=function(){return Dp(this)};Ji.prototype[Symbol.toPrimitive]=function(e="default"){switch(e){case"number":return a9(this);case"string":return Dp(this);case"default":return v0t(this)}return Dp(this)};function sf(...e){return Ji.apply(this,e)}function of(...e){return Ji.apply(this,e)}function kp(...e){return Ji.apply(this,e)}Object.setPrototypeOf(sf.prototype,Object.create(Int32Array.prototype));Object.setPrototypeOf(of.prototype,Object.create(Uint32Array.prototype));Object.setPrototypeOf(kp.prototype,Object.create(Uint32Array.prototype));Object.assign(sf.prototype,Ji.prototype,{constructor:sf,signed:!0,TypedArray:Int32Array,BigIntArray:BigInt64Array});Object.assign(of.prototype,Ji.prototype,{constructor:of,signed:!1,TypedArray:Uint32Array,BigIntArray:BigUint64Array});Object.assign(kp.prototype,Ji.prototype,{constructor:kp,signed:!0,TypedArray:Uint32Array,BigIntArray:BigUint64Array});function a9(e){const{buffer:t,byteOffset:n,length:r,signed:i}=e,s=new BigUint64Array(t,n,r),o=i&&s.at(-1)&BigInt(1)<<BigInt(63);let a=BigInt(o?1:0),l=BigInt(0);if(o){for(const c of s)a+=~c*(BigInt(1)<<BigInt(32)*l++);a*=BigInt(-1)}else for(const c of s)a+=c*(BigInt(1)<<BigInt(32)*l++);return a}const Dp=e=>{if(e.byteLength===8)return`${new e.BigIntArray(e.buffer,e.byteOffset,1)[0]}`;if(!e.signed)return k_(e);let t=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);if(new Int16Array([t.at(-1)])[0]>=0)return k_(e);t=t.slice();let r=1;for(let s=0;s<t.length;s++){const o=t[s],a=~o+r;t[s]=a,r&=o===0?1:0}return`-${k_(t)}`},v0t=e=>e.byteLength===8?new e.BigIntArray(e.buffer,e.byteOffset,1)[0]:Dp(e);function k_(e){let t="";const n=new Uint32Array(2);let r=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);const i=new Uint32Array((r=new Uint16Array(r).reverse()).buffer);let s=-1;const o=r.length-1;do{for(n[0]=r[s=0];s<o;)r[s++]=n[1]=n[0]/10,n[0]=(n[0]-n[1]*10<<16)+r[s];r[s]=n[1]=n[0]/10,n[0]=n[0]-n[1]*10,t=`${n[0]}${t}`}while(i[0]||i[1]||i[2]||i[3]);return t??"0"}class mE{static new(t,n){switch(n){case!0:return new sf(t);case!1:return new of(t)}switch(t.constructor){case Int8Array:case Int16Array:case Int32Array:case BigInt64Array:return new sf(t)}return t.byteLength===16?new kp(t):new of(t)}static signed(t){return new sf(t)}static unsigned(t){return new of(t)}static decimal(t){return new kp(t)}constructor(t,n){return mE.new(t,n)}}function Xi(e){if(typeof e=="bigint"&&(e<Number.MIN_SAFE_INTEGER||e>Number.MAX_SAFE_INTEGER))throw new TypeError(`${e} is not safe to convert to a number.`);return Number(e)}var l9,c9,u9,f9,d9,h9,p9,y9,m9,g9,b9,v9,w9,_9,S9,x9,I9,T9,E9,A9;class at{static isNull(t){return(t==null?void 0:t.typeId)===k.Null}static isInt(t){return(t==null?void 0:t.typeId)===k.Int}static isFloat(t){return(t==null?void 0:t.typeId)===k.Float}static isBinary(t){return(t==null?void 0:t.typeId)===k.Binary}static isUtf8(t){return(t==null?void 0:t.typeId)===k.Utf8}static isBool(t){return(t==null?void 0:t.typeId)===k.Bool}static isDecimal(t){return(t==null?void 0:t.typeId)===k.Decimal}static isDate(t){return(t==null?void 0:t.typeId)===k.Date}static isTime(t){return(t==null?void 0:t.typeId)===k.Time}static isTimestamp(t){return(t==null?void 0:t.typeId)===k.Timestamp}static isInterval(t){return(t==null?void 0:t.typeId)===k.Interval}static isDuration(t){return(t==null?void 0:t.typeId)===k.Duration}static isList(t){return(t==null?void 0:t.typeId)===k.List}static isStruct(t){return(t==null?void 0:t.typeId)===k.Struct}static isUnion(t){return(t==null?void 0:t.typeId)===k.Union}static isFixedSizeBinary(t){return(t==null?void 0:t.typeId)===k.FixedSizeBinary}static isFixedSizeList(t){return(t==null?void 0:t.typeId)===k.FixedSizeList}static isMap(t){return(t==null?void 0:t.typeId)===k.Map}static isDictionary(t){return(t==null?void 0:t.typeId)===k.Dictionary}static isDenseUnion(t){return at.isUnion(t)&&t.mode===cn.Dense}static isSparseUnion(t){return at.isUnion(t)&&t.mode===cn.Sparse}get typeId(){return k.NONE}}l9=Symbol.toStringTag;at[l9]=(e=>(e.children=null,e.ArrayType=Array,e[Symbol.toStringTag]="DataType"))(at.prototype);let Ga=class extends at{toString(){return"Null"}get typeId(){return k.Null}};c9=Symbol.toStringTag;Ga[c9]=(e=>e[Symbol.toStringTag]="Null")(Ga.prototype);class Xa extends at{constructor(t,n){super(),this.isSigned=t,this.bitWidth=n}get typeId(){return k.Int}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?BigInt64Array:BigUint64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}u9=Symbol.toStringTag;Xa[u9]=(e=>(e.isSigned=null,e.bitWidth=null,e[Symbol.toStringTag]="Int"))(Xa.prototype);class Op extends Xa{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}Object.defineProperty(Op.prototype,"ArrayType",{value:Int32Array});class Fp extends at{constructor(t){super(),this.precision=t}get typeId(){return k.Float}get ArrayType(){switch(this.precision){case rn.HALF:return Uint16Array;case rn.SINGLE:return Float32Array;case rn.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}f9=Symbol.toStringTag;Fp[f9]=(e=>(e.precision=null,e[Symbol.toStringTag]="Float"))(Fp.prototype);let z1=class extends at{constructor(){super()}get typeId(){return k.Binary}toString(){return"Binary"}};d9=Symbol.toStringTag;z1[d9]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Binary"))(z1.prototype);let j1=class extends at{constructor(){super()}get typeId(){return k.Utf8}toString(){return"Utf8"}};h9=Symbol.toStringTag;j1[h9]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Utf8"))(j1.prototype);let V1=class extends at{constructor(){super()}get typeId(){return k.Bool}toString(){return"Bool"}};p9=Symbol.toStringTag;V1[p9]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Bool"))(V1.prototype);let Y1=class extends at{constructor(t,n,r=128){super(),this.scale=t,this.precision=n,this.bitWidth=r}get typeId(){return k.Decimal}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}};y9=Symbol.toStringTag;Y1[y9]=(e=>(e.scale=null,e.precision=null,e.ArrayType=Uint32Array,e[Symbol.toStringTag]="Decimal"))(Y1.prototype);class q1 extends at{constructor(t){super(),this.unit=t}get typeId(){return k.Date}toString(){return`Date${(this.unit+1)*32}<${zr[this.unit]}>`}}m9=Symbol.toStringTag;q1[m9]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Date"))(q1.prototype);class Bp extends at{constructor(t,n){super(),this.unit=t,this.bitWidth=n}get typeId(){return k.Time}toString(){return`Time${this.bitWidth}<${rt[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return BigInt64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}g9=Symbol.toStringTag;Bp[g9]=(e=>(e.unit=null,e.bitWidth=null,e[Symbol.toStringTag]="Time"))(Bp.prototype);class W1 extends at{constructor(t,n){super(),this.unit=t,this.timezone=n}get typeId(){return k.Timestamp}toString(){return`Timestamp<${rt[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}b9=Symbol.toStringTag;W1[b9]=(e=>(e.unit=null,e.timezone=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Timestamp"))(W1.prototype);class H1 extends at{constructor(t){super(),this.unit=t}get typeId(){return k.Interval}toString(){return`Interval<${mr[this.unit]}>`}}v9=Symbol.toStringTag;H1[v9]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Interval"))(H1.prototype);let G1=class extends at{constructor(t){super(),this.unit=t}get typeId(){return k.Duration}toString(){return`Duration<${rt[this.unit]}>`}};w9=Symbol.toStringTag;G1[w9]=(e=>(e.unit=null,e.ArrayType=BigInt64Array,e[Symbol.toStringTag]="Duration"))(G1.prototype);let X1=class extends at{constructor(t){super(),this.children=[t]}get typeId(){return k.List}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}};_9=Symbol.toStringTag;X1[_9]=(e=>(e.children=null,e[Symbol.toStringTag]="List"))(X1.prototype);class Hn extends at{constructor(t){super(),this.children=t}get typeId(){return k.Struct}toString(){return`Struct<{${this.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}S9=Symbol.toStringTag;Hn[S9]=(e=>(e.children=null,e[Symbol.toStringTag]="Struct"))(Hn.prototype);class Q1 extends at{constructor(t,n,r){super(),this.mode=t,this.children=r,this.typeIds=n=Int32Array.from(n),this.typeIdToChildIndex=n.reduce((i,s,o)=>(i[s]=o)&&i||i,Object.create(null))}get typeId(){return k.Union}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(t=>`${t.type}`).join(" | ")}>`}}x9=Symbol.toStringTag;Q1[x9]=(e=>(e.mode=null,e.typeIds=null,e.children=null,e.typeIdToChildIndex=null,e.ArrayType=Int8Array,e[Symbol.toStringTag]="Union"))(Q1.prototype);let K1=class extends at{constructor(t){super(),this.byteWidth=t}get typeId(){return k.FixedSizeBinary}toString(){return`FixedSizeBinary[${this.byteWidth}]`}};I9=Symbol.toStringTag;K1[I9]=(e=>(e.byteWidth=null,e.ArrayType=Uint8Array,e[Symbol.toStringTag]="FixedSizeBinary"))(K1.prototype);let Z1=class extends at{constructor(t,n){super(),this.listSize=t,this.children=[n]}get typeId(){return k.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}};T9=Symbol.toStringTag;Z1[T9]=(e=>(e.children=null,e.listSize=null,e[Symbol.toStringTag]="FixedSizeList"))(Z1.prototype);class J1 extends at{constructor(t,n=!1){var r,i,s;if(super(),this.children=[t],this.keysSorted=n,t&&(t.name="entries",!((r=t==null?void 0:t.type)===null||r===void 0)&&r.children)){const o=(i=t==null?void 0:t.type)===null||i===void 0?void 0:i.children[0];o&&(o.name="key");const a=(s=t==null?void 0:t.type)===null||s===void 0?void 0:s.children[1];a&&(a.name="value")}}get typeId(){return k.Map}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}E9=Symbol.toStringTag;J1[E9]=(e=>(e.children=null,e.keysSorted=null,e[Symbol.toStringTag]="Map_"))(J1.prototype);const w0t=(e=>()=>++e)(-1);class Yf extends at{constructor(t,n,r,i){super(),this.indices=n,this.dictionary=t,this.isOrdered=i||!1,this.id=r==null?w0t():Xi(r)}get typeId(){return k.Dictionary}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}A9=Symbol.toStringTag;Yf[A9]=(e=>(e.id=null,e.indices=null,e.isOrdered=null,e.dictionary=null,e[Symbol.toStringTag]="Dictionary"))(Yf.prototype);function uo(e){const t=e;switch(e.typeId){case k.Decimal:return e.bitWidth/32;case k.Timestamp:return 2;case k.Date:return 1+t.unit;case k.Interval:return 1+t.unit;case k.FixedSizeList:return t.listSize;case k.FixedSizeBinary:return t.byteWidth;default:return 1}}class Ft{visitMany(t,...n){return t.map((r,i)=>this.visit(r,...n.map(s=>s[i])))}visit(...t){return this.getVisitFn(t[0],!1).apply(this,t)}getVisitFn(t,n=!0){return _0t(this,t,n)}getVisitFnByTypeId(t,n=!0){return uu(this,t,n)}visitNull(t,...n){return null}visitBool(t,...n){return null}visitInt(t,...n){return null}visitFloat(t,...n){return null}visitUtf8(t,...n){return null}visitBinary(t,...n){return null}visitFixedSizeBinary(t,...n){return null}visitDate(t,...n){return null}visitTimestamp(t,...n){return null}visitTime(t,...n){return null}visitDecimal(t,...n){return null}visitList(t,...n){return null}visitStruct(t,...n){return null}visitUnion(t,...n){return null}visitDictionary(t,...n){return null}visitInterval(t,...n){return null}visitDuration(t,...n){return null}visitFixedSizeList(t,...n){return null}visitMap(t,...n){return null}}function _0t(e,t,n=!0){return typeof t=="number"?uu(e,t,n):typeof t=="string"&&t in k?uu(e,k[t],n):t&&t instanceof at?uu(e,CN(t),n):t!=null&&t.type&&t.type instanceof at?uu(e,CN(t.type),n):uu(e,k.NONE,n)}function uu(e,t,n=!0){let r=null;switch(t){case k.Null:r=e.visitNull;break;case k.Bool:r=e.visitBool;break;case k.Int:r=e.visitInt;break;case k.Int8:r=e.visitInt8||e.visitInt;break;case k.Int16:r=e.visitInt16||e.visitInt;break;case k.Int32:r=e.visitInt32||e.visitInt;break;case k.Int64:r=e.visitInt64||e.visitInt;break;case k.Uint8:r=e.visitUint8||e.visitInt;break;case k.Uint16:r=e.visitUint16||e.visitInt;break;case k.Uint32:r=e.visitUint32||e.visitInt;break;case k.Uint64:r=e.visitUint64||e.visitInt;break;case k.Float:r=e.visitFloat;break;case k.Float16:r=e.visitFloat16||e.visitFloat;break;case k.Float32:r=e.visitFloat32||e.visitFloat;break;case k.Float64:r=e.visitFloat64||e.visitFloat;break;case k.Utf8:r=e.visitUtf8;break;case k.Binary:r=e.visitBinary;break;case k.FixedSizeBinary:r=e.visitFixedSizeBinary;break;case k.Date:r=e.visitDate;break;case k.DateDay:r=e.visitDateDay||e.visitDate;break;case k.DateMillisecond:r=e.visitDateMillisecond||e.visitDate;break;case k.Timestamp:r=e.visitTimestamp;break;case k.TimestampSecond:r=e.visitTimestampSecond||e.visitTimestamp;break;case k.TimestampMillisecond:r=e.visitTimestampMillisecond||e.visitTimestamp;break;case k.TimestampMicrosecond:r=e.visitTimestampMicrosecond||e.visitTimestamp;break;case k.TimestampNanosecond:r=e.visitTimestampNanosecond||e.visitTimestamp;break;case k.Time:r=e.visitTime;break;case k.TimeSecond:r=e.visitTimeSecond||e.visitTime;break;case k.TimeMillisecond:r=e.visitTimeMillisecond||e.visitTime;break;case k.TimeMicrosecond:r=e.visitTimeMicrosecond||e.visitTime;break;case k.TimeNanosecond:r=e.visitTimeNanosecond||e.visitTime;break;case k.Decimal:r=e.visitDecimal;break;case k.List:r=e.visitList;break;case k.Struct:r=e.visitStruct;break;case k.Union:r=e.visitUnion;break;case k.DenseUnion:r=e.visitDenseUnion||e.visitUnion;break;case k.SparseUnion:r=e.visitSparseUnion||e.visitUnion;break;case k.Dictionary:r=e.visitDictionary;break;case k.Interval:r=e.visitInterval;break;case k.IntervalDayTime:r=e.visitIntervalDayTime||e.visitInterval;break;case k.IntervalYearMonth:r=e.visitIntervalYearMonth||e.visitInterval;break;case k.Duration:r=e.visitDuration;break;case k.DurationSecond:r=e.visitDurationSecond||e.visitDuration;break;case k.DurationMillisecond:r=e.visitDurationMillisecond||e.visitDuration;break;case k.DurationMicrosecond:r=e.visitDurationMicrosecond||e.visitDuration;break;case k.DurationNanosecond:r=e.visitDurationNanosecond||e.visitDuration;break;case k.FixedSizeList:r=e.visitFixedSizeList;break;case k.Map:r=e.visitMap;break}if(typeof r=="function")return r;if(!n)return()=>null;throw new Error(`Unrecognized type '${k[t]}'`)}function CN(e){switch(e.typeId){case k.Null:return k.Null;case k.Int:{const{bitWidth:t,isSigned:n}=e;switch(t){case 8:return n?k.Int8:k.Uint8;case 16:return n?k.Int16:k.Uint16;case 32:return n?k.Int32:k.Uint32;case 64:return n?k.Int64:k.Uint64}return k.Int}case k.Float:switch(e.precision){case rn.HALF:return k.Float16;case rn.SINGLE:return k.Float32;case rn.DOUBLE:return k.Float64}return k.Float;case k.Binary:return k.Binary;case k.Utf8:return k.Utf8;case k.Bool:return k.Bool;case k.Decimal:return k.Decimal;case k.Time:switch(e.unit){case rt.SECOND:return k.TimeSecond;case rt.MILLISECOND:return k.TimeMillisecond;case rt.MICROSECOND:return k.TimeMicrosecond;case rt.NANOSECOND:return k.TimeNanosecond}return k.Time;case k.Timestamp:switch(e.unit){case rt.SECOND:return k.TimestampSecond;case rt.MILLISECOND:return k.TimestampMillisecond;case rt.MICROSECOND:return k.TimestampMicrosecond;case rt.NANOSECOND:return k.TimestampNanosecond}return k.Timestamp;case k.Date:switch(e.unit){case zr.DAY:return k.DateDay;case zr.MILLISECOND:return k.DateMillisecond}return k.Date;case k.Interval:switch(e.unit){case mr.DAY_TIME:return k.IntervalDayTime;case mr.YEAR_MONTH:return k.IntervalYearMonth}return k.Interval;case k.Duration:switch(e.unit){case rt.SECOND:return k.DurationSecond;case rt.MILLISECOND:return k.DurationMillisecond;case rt.MICROSECOND:return k.DurationMicrosecond;case rt.NANOSECOND:return k.DurationNanosecond}return k.Duration;case k.Map:return k.Map;case k.List:return k.List;case k.Struct:return k.Struct;case k.Union:switch(e.mode){case cn.Dense:return k.DenseUnion;case cn.Sparse:return k.SparseUnion}return k.Union;case k.FixedSizeBinary:return k.FixedSizeBinary;case k.FixedSizeList:return k.FixedSizeList;case k.Dictionary:return k.Dictionary}throw new Error(`Unrecognized type '${k[e.typeId]}'`)}Ft.prototype.visitInt8=null;Ft.prototype.visitInt16=null;Ft.prototype.visitInt32=null;Ft.prototype.visitInt64=null;Ft.prototype.visitUint8=null;Ft.prototype.visitUint16=null;Ft.prototype.visitUint32=null;Ft.prototype.visitUint64=null;Ft.prototype.visitFloat16=null;Ft.prototype.visitFloat32=null;Ft.prototype.visitFloat64=null;Ft.prototype.visitDateDay=null;Ft.prototype.visitDateMillisecond=null;Ft.prototype.visitTimestampSecond=null;Ft.prototype.visitTimestampMillisecond=null;Ft.prototype.visitTimestampMicrosecond=null;Ft.prototype.visitTimestampNanosecond=null;Ft.prototype.visitTimeSecond=null;Ft.prototype.visitTimeMillisecond=null;Ft.prototype.visitTimeMicrosecond=null;Ft.prototype.visitTimeNanosecond=null;Ft.prototype.visitDenseUnion=null;Ft.prototype.visitSparseUnion=null;Ft.prototype.visitIntervalDayTime=null;Ft.prototype.visitIntervalYearMonth=null;Ft.prototype.visitDuration=null;Ft.prototype.visitDurationSecond=null;Ft.prototype.visitDurationMillisecond=null;Ft.prototype.visitDurationMicrosecond=null;Ft.prototype.visitDurationNanosecond=null;const M9=new Float64Array(1),Kc=new Uint32Array(M9.buffer);function $9(e){const t=(e&31744)>>10,n=(e&1023)/1024,r=Math.pow(-1,(e&32768)>>15);switch(t){case 31:return r*(n?Number.NaN:1/0);case 0:return r*(n?6103515625e-14*n:0)}return r*Math.pow(2,t-15)*(1+n)}function S0t(e){if(e!==e)return 32256;M9[0]=e;const t=(Kc[1]&2147483648)>>16&65535;let n=Kc[1]&2146435072,r=0;return n>=1089470464?Kc[0]>0?n=31744:(n=(n&2080374784)>>16,r=(Kc[1]&1048575)>>10):n<=1056964608?(r=1048576+(Kc[1]&1048575),r=1048576+(r<<(n>>20)-998)>>21,n=0):(n=n-1056964608>>10,r=(Kc[1]&1048575)+512>>10),t|n|r&65535}class bt extends Ft{}function _t(e){return(t,n,r)=>{if(t.setValid(n,r!=null))return e(t,n,r)}}const x0t=(e,t,n)=>{e[t]=Math.trunc(n/864e5)},gE=(e,t,n)=>{e[t]=Math.trunc(n%4294967296),e[t+1]=Math.trunc(n/4294967296)},I0t=(e,t,n)=>{e[t]=Math.trunc(n*1e3%4294967296),e[t+1]=Math.trunc(n*1e3/4294967296)},T0t=(e,t,n)=>{e[t]=Math.trunc(n*1e6%4294967296),e[t+1]=Math.trunc(n*1e6/4294967296)},N9=(e,t,n,r)=>{if(n+1<t.length){const{[n]:i,[n+1]:s}=t;e.set(r.subarray(0,s-i),i)}},E0t=({offset:e,values:t},n,r)=>{const i=e+n;r?t[i>>3]|=1<<i%8:t[i>>3]&=~(1<<i%8)},Xo=({values:e},t,n)=>{e[t]=n},bE=({values:e},t,n)=>{e[t]=n},k9=({values:e},t,n)=>{e[t]=S0t(n)},A0t=(e,t,n)=>{switch(e.type.precision){case rn.HALF:return k9(e,t,n);case rn.SINGLE:case rn.DOUBLE:return bE(e,t,n)}},D9=({values:e},t,n)=>{x0t(e,t,n.valueOf())},O9=({values:e},t,n)=>{gE(e,t*2,n.valueOf())},M0t=({stride:e,values:t},n,r)=>{t.set(r.subarray(0,e),e*n)},$0t=({values:e,valueOffsets:t},n,r)=>N9(e,t,n,r),N0t=({values:e,valueOffsets:t},n,r)=>{N9(e,t,n,hE(r))},k0t=(e,t,n)=>{e.type.unit===zr.DAY?D9(e,t,n):O9(e,t,n)},F9=({values:e},t,n)=>gE(e,t*2,n/1e3),B9=({values:e},t,n)=>gE(e,t*2,n),R9=({values:e},t,n)=>I0t(e,t*2,n),L9=({values:e},t,n)=>T0t(e,t*2,n),D0t=(e,t,n)=>{switch(e.type.unit){case rt.SECOND:return F9(e,t,n);case rt.MILLISECOND:return B9(e,t,n);case rt.MICROSECOND:return R9(e,t,n);case rt.NANOSECOND:return L9(e,t,n)}},C9=({values:e},t,n)=>{e[t]=n},U9=({values:e},t,n)=>{e[t]=n},P9=({values:e},t,n)=>{e[t]=n},z9=({values:e},t,n)=>{e[t]=n},O0t=(e,t,n)=>{switch(e.type.unit){case rt.SECOND:return C9(e,t,n);case rt.MILLISECOND:return U9(e,t,n);case rt.MICROSECOND:return P9(e,t,n);case rt.NANOSECOND:return z9(e,t,n)}},F0t=({values:e,stride:t},n,r)=>{e.set(r.subarray(0,t),t*n)},B0t=(e,t,n)=>{const r=e.children[0],i=e.valueOffsets,s=wi.getVisitFn(r);if(Array.isArray(n))for(let o=-1,a=i[t],l=i[t+1];a<l;)s(r,a++,n[++o]);else for(let o=-1,a=i[t],l=i[t+1];a<l;)s(r,a++,n.get(++o))},R0t=(e,t,n)=>{const r=e.children[0],{valueOffsets:i}=e,s=wi.getVisitFn(r);let{[t]:o,[t+1]:a}=i;const l=n instanceof Map?n.entries():Object.entries(n);for(const c of l)if(s(r,o,c),++o>=a)break},L0t=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[s]),C0t=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(s)),U0t=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(i.name)),P0t=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[i.name]),z0t=(e,t,n)=>{const r=e.type.children.map(s=>wi.getVisitFn(s.type)),i=n instanceof Map?U0t(t,n):n instanceof se?C0t(t,n):Array.isArray(n)?L0t(t,n):P0t(t,n);e.type.children.forEach((s,o)=>i(r[o],e.children[o],s,o))},j0t=(e,t,n)=>{e.type.mode===cn.Dense?j9(e,t,n):V9(e,t,n)},j9=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];wi.visit(i,e.valueOffsets[t],n)},V9=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];wi.visit(i,t,n)},V0t=(e,t,n)=>{var r;(r=e.dictionary)===null||r===void 0||r.set(e.values[t],n)},Y0t=(e,t,n)=>{e.type.unit===mr.DAY_TIME?Y9(e,t,n):q9(e,t,n)},Y9=({values:e},t,n)=>{e.set(n.subarray(0,2),2*t)},q9=({values:e},t,n)=>{e[t]=n[0]*12+n[1]%12},W9=({values:e},t,n)=>{e[t]=n},H9=({values:e},t,n)=>{e[t]=n},G9=({values:e},t,n)=>{e[t]=n},X9=({values:e},t,n)=>{e[t]=n},q0t=(e,t,n)=>{switch(e.type.unit){case rt.SECOND:return W9(e,t,n);case rt.MILLISECOND:return H9(e,t,n);case rt.MICROSECOND:return G9(e,t,n);case rt.NANOSECOND:return X9(e,t,n)}},W0t=(e,t,n)=>{const{stride:r}=e,i=e.children[0],s=wi.getVisitFn(i);if(Array.isArray(n))for(let o=-1,a=t*r;++o<r;)s(i,a+o,n[o]);else for(let o=-1,a=t*r;++o<r;)s(i,a+o,n.get(o))};bt.prototype.visitBool=_t(E0t);bt.prototype.visitInt=_t(Xo);bt.prototype.visitInt8=_t(Xo);bt.prototype.visitInt16=_t(Xo);bt.prototype.visitInt32=_t(Xo);bt.prototype.visitInt64=_t(Xo);bt.prototype.visitUint8=_t(Xo);bt.prototype.visitUint16=_t(Xo);bt.prototype.visitUint32=_t(Xo);bt.prototype.visitUint64=_t(Xo);bt.prototype.visitFloat=_t(A0t);bt.prototype.visitFloat16=_t(k9);bt.prototype.visitFloat32=_t(bE);bt.prototype.visitFloat64=_t(bE);bt.prototype.visitUtf8=_t(N0t);bt.prototype.visitBinary=_t($0t);bt.prototype.visitFixedSizeBinary=_t(M0t);bt.prototype.visitDate=_t(k0t);bt.prototype.visitDateDay=_t(D9);bt.prototype.visitDateMillisecond=_t(O9);bt.prototype.visitTimestamp=_t(D0t);bt.prototype.visitTimestampSecond=_t(F9);bt.prototype.visitTimestampMillisecond=_t(B9);bt.prototype.visitTimestampMicrosecond=_t(R9);bt.prototype.visitTimestampNanosecond=_t(L9);bt.prototype.visitTime=_t(O0t);bt.prototype.visitTimeSecond=_t(C9);bt.prototype.visitTimeMillisecond=_t(U9);bt.prototype.visitTimeMicrosecond=_t(P9);bt.prototype.visitTimeNanosecond=_t(z9);bt.prototype.visitDecimal=_t(F0t);bt.prototype.visitList=_t(B0t);bt.prototype.visitStruct=_t(z0t);bt.prototype.visitUnion=_t(j0t);bt.prototype.visitDenseUnion=_t(j9);bt.prototype.visitSparseUnion=_t(V9);bt.prototype.visitDictionary=_t(V0t);bt.prototype.visitInterval=_t(Y0t);bt.prototype.visitIntervalDayTime=_t(Y9);bt.prototype.visitIntervalYearMonth=_t(q9);bt.prototype.visitDuration=_t(q0t);bt.prototype.visitDurationSecond=_t(W9);bt.prototype.visitDurationMillisecond=_t(H9);bt.prototype.visitDurationMicrosecond=_t(G9);bt.prototype.visitDurationNanosecond=_t(X9);bt.prototype.visitFixedSizeList=_t(W0t);bt.prototype.visitMap=_t(R0t);const wi=new bt,Ni=Symbol.for("parent"),af=Symbol.for("rowIndex");class vE{constructor(t,n){return this[Ni]=t,this[af]=n,new Proxy(this,new G0t)}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[af],n=this[Ni],r=n.type.children,i={};for(let s=-1,o=r.length;++s<o;)i[r[s].name]=Ir.visit(n.children[s],t);return i}toString(){return`{${[...this].map(([t,n])=>`${Np(t)}: ${Np(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new H0t(this[Ni],this[af])}}class H0t{constructor(t,n){this.childIndex=0,this.children=t.children,this.rowIndex=n,this.childFields=t.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const t=this.childIndex;return t<this.numChildren?(this.childIndex=t+1,{done:!1,value:[this.childFields[t].name,Ir.visit(this.children[t],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties(vE.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[Ni]:{writable:!0,enumerable:!1,configurable:!1,value:null},[af]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class G0t{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[Ni].type.children.map(n=>n.name)}has(t,n){return t[Ni].type.children.findIndex(r=>r.name===n)!==-1}getOwnPropertyDescriptor(t,n){if(t[Ni].type.children.findIndex(r=>r.name===n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[Ni].type.children.findIndex(i=>i.name===n);if(r!==-1){const i=Ir.visit(t[Ni].children[r],t[af]);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[Ni].type.children.findIndex(s=>s.name===n);return i!==-1?(wi.visit(t[Ni].children[i],t[af],r),Reflect.set(t,n,r)):Reflect.has(t,n)||typeof n=="symbol"?Reflect.set(t,n,r):!1}}class ht extends Ft{}function vt(e){return(t,n)=>t.getValid(n)?e(t,n):null}const X0t=(e,t)=>864e5*e[t],wE=(e,t)=>4294967296*e[t+1]+(e[t]>>>0),Q0t=(e,t)=>4294967296*(e[t+1]/1e3)+(e[t]>>>0)/1e3,K0t=(e,t)=>4294967296*(e[t+1]/1e6)+(e[t]>>>0)/1e6,Q9=e=>new Date(e),Z0t=(e,t)=>Q9(X0t(e,t)),J0t=(e,t)=>Q9(wE(e,t)),tmt=(e,t)=>null,K9=(e,t,n)=>{if(n+1>=t.length)return null;const r=t[n],i=t[n+1];return e.subarray(r,i)},emt=({offset:e,values:t},n)=>{const r=e+n;return(t[r>>3]&1<<r%8)!==0},Z9=({values:e},t)=>Z0t(e,t),J9=({values:e},t)=>J0t(e,t*2),pl=({stride:e,values:t},n)=>t[e*n],nmt=({stride:e,values:t},n)=>$9(t[e*n]),tP=({values:e},t)=>e[t],rmt=({stride:e,values:t},n)=>t.subarray(e*n,e*(n+1)),imt=({values:e,valueOffsets:t},n)=>K9(e,t,n),smt=({values:e,valueOffsets:t},n)=>{const r=K9(e,t,n);return r!==null?xx(r):null},omt=({values:e},t)=>e[t],amt=({type:e,values:t},n)=>e.precision!==rn.HALF?t[n]:$9(t[n]),lmt=(e,t)=>e.type.unit===zr.DAY?Z9(e,t):J9(e,t),eP=({values:e},t)=>1e3*wE(e,t*2),nP=({values:e},t)=>wE(e,t*2),rP=({values:e},t)=>Q0t(e,t*2),iP=({values:e},t)=>K0t(e,t*2),cmt=(e,t)=>{switch(e.type.unit){case rt.SECOND:return eP(e,t);case rt.MILLISECOND:return nP(e,t);case rt.MICROSECOND:return rP(e,t);case rt.NANOSECOND:return iP(e,t)}},sP=({values:e},t)=>e[t],oP=({values:e},t)=>e[t],aP=({values:e},t)=>e[t],lP=({values:e},t)=>e[t],umt=(e,t)=>{switch(e.type.unit){case rt.SECOND:return sP(e,t);case rt.MILLISECOND:return oP(e,t);case rt.MICROSECOND:return aP(e,t);case rt.NANOSECOND:return lP(e,t)}},fmt=({values:e,stride:t},n)=>mE.decimal(e.subarray(t*n,t*(n+1))),dmt=(e,t)=>{const{valueOffsets:n,stride:r,children:i}=e,{[t*r]:s,[t*r+1]:o}=n,l=i[0].slice(s,o-s);return new se([l])},hmt=(e,t)=>{const{valueOffsets:n,children:r}=e,{[t]:i,[t+1]:s}=n,o=r[0];return new _E(o.slice(i,s-i))},pmt=(e,t)=>new vE(e,t),ymt=(e,t)=>e.type.mode===cn.Dense?cP(e,t):uP(e,t),cP=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return Ir.visit(r,e.valueOffsets[t])},uP=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return Ir.visit(r,t)},mmt=(e,t)=>{var n;return(n=e.dictionary)===null||n===void 0?void 0:n.get(e.values[t])},gmt=(e,t)=>e.type.unit===mr.DAY_TIME?fP(e,t):dP(e,t),fP=({values:e},t)=>e.subarray(2*t,2*(t+1)),dP=({values:e},t)=>{const n=e[t],r=new Int32Array(2);return r[0]=Math.trunc(n/12),r[1]=Math.trunc(n%12),r},hP=({values:e},t)=>e[t],pP=({values:e},t)=>e[t],yP=({values:e},t)=>e[t],mP=({values:e},t)=>e[t],bmt=(e,t)=>{switch(e.type.unit){case rt.SECOND:return hP(e,t);case rt.MILLISECOND:return pP(e,t);case rt.MICROSECOND:return yP(e,t);case rt.NANOSECOND:return mP(e,t)}},vmt=(e,t)=>{const{stride:n,children:r}=e,s=r[0].slice(t*n,n);return new se([s])};ht.prototype.visitNull=vt(tmt);ht.prototype.visitBool=vt(emt);ht.prototype.visitInt=vt(omt);ht.prototype.visitInt8=vt(pl);ht.prototype.visitInt16=vt(pl);ht.prototype.visitInt32=vt(pl);ht.prototype.visitInt64=vt(tP);ht.prototype.visitUint8=vt(pl);ht.prototype.visitUint16=vt(pl);ht.prototype.visitUint32=vt(pl);ht.prototype.visitUint64=vt(tP);ht.prototype.visitFloat=vt(amt);ht.prototype.visitFloat16=vt(nmt);ht.prototype.visitFloat32=vt(pl);ht.prototype.visitFloat64=vt(pl);ht.prototype.visitUtf8=vt(smt);ht.prototype.visitBinary=vt(imt);ht.prototype.visitFixedSizeBinary=vt(rmt);ht.prototype.visitDate=vt(lmt);ht.prototype.visitDateDay=vt(Z9);ht.prototype.visitDateMillisecond=vt(J9);ht.prototype.visitTimestamp=vt(cmt);ht.prototype.visitTimestampSecond=vt(eP);ht.prototype.visitTimestampMillisecond=vt(nP);ht.prototype.visitTimestampMicrosecond=vt(rP);ht.prototype.visitTimestampNanosecond=vt(iP);ht.prototype.visitTime=vt(umt);ht.prototype.visitTimeSecond=vt(sP);ht.prototype.visitTimeMillisecond=vt(oP);ht.prototype.visitTimeMicrosecond=vt(aP);ht.prototype.visitTimeNanosecond=vt(lP);ht.prototype.visitDecimal=vt(fmt);ht.prototype.visitList=vt(dmt);ht.prototype.visitStruct=vt(pmt);ht.prototype.visitUnion=vt(ymt);ht.prototype.visitDenseUnion=vt(cP);ht.prototype.visitSparseUnion=vt(uP);ht.prototype.visitDictionary=vt(mmt);ht.prototype.visitInterval=vt(gmt);ht.prototype.visitIntervalDayTime=vt(fP);ht.prototype.visitIntervalYearMonth=vt(dP);ht.prototype.visitDuration=vt(bmt);ht.prototype.visitDurationSecond=vt(hP);ht.prototype.visitDurationMillisecond=vt(pP);ht.prototype.visitDurationMicrosecond=vt(yP);ht.prototype.visitDurationNanosecond=vt(mP);ht.prototype.visitFixedSizeList=vt(vmt);ht.prototype.visitMap=vt(hmt);const Ir=new ht,ws=Symbol.for("keys"),lf=Symbol.for("vals");class _E{constructor(t){return this[ws]=new se([t.children[0]]).memoize(),this[lf]=t.children[1],new Proxy(this,new _mt)}[Symbol.iterator](){return new wmt(this[ws],this[lf])}get size(){return this[ws].length}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[ws],n=this[lf],r={};for(let i=-1,s=t.length;++i<s;)r[t.get(i)]=Ir.visit(n,i);return r}toString(){return`{${[...this].map(([t,n])=>`${Np(t)}: ${Np(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}class wmt{constructor(t,n){this.keys=t,this.vals=n,this.keyIndex=0,this.numKeys=t.length}[Symbol.iterator](){return this}next(){const t=this.keyIndex;return t===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(t),Ir.visit(this.vals,t)]})}}class _mt{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[ws].toArray().map(String)}has(t,n){return t[ws].includes(n)}getOwnPropertyDescriptor(t,n){if(t[ws].indexOf(n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[ws].indexOf(n);if(r!==-1){const i=Ir.visit(Reflect.get(t,lf),r);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[ws].indexOf(n);return i!==-1?(wi.visit(Reflect.get(t,lf),i,r),Reflect.set(t,n,r)):Reflect.has(t,n)?Reflect.set(t,n,r):!1}}Object.defineProperties(_E.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[ws]:{writable:!0,enumerable:!1,configurable:!1,value:null},[lf]:{writable:!0,enumerable:!1,configurable:!1,value:null}});let UN;function gP(e,t,n,r){const{length:i=0}=e;let s=typeof t!="number"?0:t,o=typeof n!="number"?i:n;return s<0&&(s=(s%i+i)%i),o<0&&(o=(o%i+i)%i),o<s&&(UN=s,s=o,o=UN),o>i&&(o=i),r?r(e,s,o):[s,o]}const PN=e=>e!==e;function wd(e){if(typeof e!=="object"||e===null)return PN(e)?PN:n=>n===e;if(e instanceof Date){const n=e.valueOf();return r=>r instanceof Date?r.valueOf()===n:!1}return ArrayBuffer.isView(e)?n=>n?f0t(e,n):!1:e instanceof Map?xmt(e):Array.isArray(e)?Smt(e):e instanceof se?Imt(e):Tmt(e,!0)}function Smt(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=wd(e[n]);return Wv(t)}function xmt(e){let t=-1;const n=[];for(const r of e.values())n[++t]=wd(r);return Wv(n)}function Imt(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=wd(e.get(n));return Wv(t)}function Tmt(e,t=!1){const n=Object.keys(e);if(!t&&n.length===0)return()=>!1;const r=[];for(let i=-1,s=n.length;++i<s;)r[i]=wd(e[n[i]]);return Wv(r,n)}function Wv(e,t){return n=>{if(!n||typeof n!="object")return!1;switch(n.constructor){case Array:return Emt(e,n);case Map:return zN(e,n,n.keys());case _E:case vE:case Object:case void 0:return zN(e,n,t||Object.keys(n))}return n instanceof se?Amt(e,n):!1}}function Emt(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t[r]))return!1;return!0}function Amt(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t.get(r)))return!1;return!0}function zN(e,t,n){const r=n[Symbol.iterator](),i=t instanceof Map?t.keys():Object.keys(t)[Symbol.iterator](),s=t instanceof Map?t.values():Object.values(t)[Symbol.iterator]();let o=0;const a=e.length;let l=s.next(),c=r.next(),u=i.next();for(;o<a&&!c.done&&!u.done&&!l.done&&!(c.value!==u.value||!e[o](l.value));++o,c=r.next(),u=i.next(),l=s.next());return o===a&&c.done&&u.done&&l.done?!0:(r.return&&r.return(),i.return&&i.return(),s.return&&s.return(),!1)}function bP(e,t,n,r){return(n&1<<r)!==0}function Mmt(e,t,n,r){return(n&1<<r)>>r}function tb(e,t,n){const r=n.byteLength+7&-8;if(e>0||n.byteLength<r){const i=new Uint8Array(r);return i.set(e%8===0?n.subarray(e>>3):eb(new SE(n,e,t,null,bP)).subarray(0,r)),i}return n}function eb(e){const t=[];let n=0,r=0,i=0;for(const o of e)o&&(i|=1<<r),++r===8&&(t[n++]=i,i=r=0);(n===0||r>0)&&(t[n++]=i);const s=new Uint8Array(t.length+7&-8);return s.set(t),s}class SE{constructor(t,n,r,i,s){this.bytes=t,this.length=r,this.context=i,this.get=s,this.bit=n%8,this.byteIndex=n>>3,this.byte=t[this.byteIndex++],this.index=0}next(){return this.index<this.length?(this.bit===8&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}function Ex(e,t,n){if(n-t<=0)return 0;if(n-t<8){let s=0;for(const o of new SE(e,t,n-t,e,Mmt))s+=o;return s}const r=n>>3<<3,i=t+(t%8===0?0:8-t%8);return Ex(e,t,i)+Ex(e,r,n)+$mt(e,i>>3,r-i>>3)}function $mt(e,t,n){let r=0,i=Math.trunc(t);const s=new DataView(e.buffer,e.byteOffset,e.byteLength),o=n===void 0?e.byteLength:i+n;for(;o-i>=4;)r+=D_(s.getUint32(i)),i+=4;for(;o-i>=2;)r+=D_(s.getUint16(i)),i+=2;for(;o-i>=1;)r+=D_(s.getUint8(i)),i+=1;return r}function D_(e){let t=Math.trunc(e);return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),(t+(t>>>4)&252645135)*16843009>>>24}const Nmt=-1;class pe{get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get nullable(){if(this._nullCount!==0){const{type:t}=this;return at.isSparseUnion(t)?this.children.some(n=>n.nullable):at.isDenseUnion(t)?this.children.some(n=>n.nullable):this.nullBitmap&&this.nullBitmap.byteLength>0}return!0}get byteLength(){let t=0;const{valueOffsets:n,values:r,nullBitmap:i,typeIds:s}=this;return n&&(t+=n.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),s&&(t+=s.byteLength),this.children.reduce((o,a)=>o+a.byteLength,t)}get nullCount(){if(at.isUnion(this.type))return this.children.reduce((r,i)=>r+i.nullCount,0);let t=this._nullCount,n;return t<=Nmt&&(n=this.nullBitmap)&&(this._nullCount=t=this.length-Ex(n,this.offset,this.offset+this.length)),t}constructor(t,n,r,i,s,o=[],a){this.type=t,this.children=o,this.dictionary=a,this.offset=Math.floor(Math.max(n||0,0)),this.length=Math.floor(Math.max(r||0,0)),this._nullCount=Math.floor(Math.max(i||0,-1));let l;s instanceof pe?(this.stride=s.stride,this.values=s.values,this.typeIds=s.typeIds,this.nullBitmap=s.nullBitmap,this.valueOffsets=s.valueOffsets):(this.stride=uo(t),s&&((l=s[0])&&(this.valueOffsets=l),(l=s[1])&&(this.values=l),(l=s[2])&&(this.nullBitmap=l),(l=s[3])&&(this.typeIds=l)))}getValid(t){const{type:n}=this;if(at.isUnion(n)){const r=n,i=this.children[r.typeIdToChildIndex[this.typeIds[t]]],s=r.mode===cn.Dense?this.valueOffsets[t]:t;return i.getValid(s)}if(this.nullable&&this.nullCount>0){const r=this.offset+t;return(this.nullBitmap[r>>3]&1<<r%8)!==0}return!0}setValid(t,n){let r;const{type:i}=this;if(at.isUnion(i)){const s=i,o=this.children[s.typeIdToChildIndex[this.typeIds[t]]],a=s.mode===cn.Dense?this.valueOffsets[t]:t;r=o.getValid(a),o.setValid(a,n)}else{let{nullBitmap:s}=this;const{offset:o,length:a}=this,l=o+t,c=1<<l%8,u=l>>3;(!s||s.byteLength<=u)&&(s=new Uint8Array((o+a+63&-64)>>3).fill(255),this.nullCount>0&&s.set(tb(o,a,this.nullBitmap),0),Object.assign(this,{nullBitmap:s,_nullCount:-1}));const f=s[u];r=(f&c)!==0,n?s[u]=f|c:s[u]=f&~c}return r!==!!n&&(this._nullCount=this.nullCount+(n?-1:1)),n}clone(t=this.type,n=this.offset,r=this.length,i=this._nullCount,s=this,o=this.children){return new pe(t,n,r,i,s,o,this.dictionary)}slice(t,n){const{stride:r,typeId:i,children:s}=this,o=+(this._nullCount===0)-1,a=i===16?r:1,l=this._sliceBuffers(t,n,r,i);return this.clone(this.type,this.offset+t,n,o,l,s.length===0||this.valueOffsets?s:this._sliceChildren(s,a*t,a*n))}_changeLengthAndBackfillNullBitmap(t){if(this.typeId===k.Null)return this.clone(this.type,0,t,0);const{length:n,nullCount:r}=this,i=new Uint8Array((t+63&-64)>>3).fill(255,0,n>>3);i[n>>3]=(1<<n-(n&-8))-1,r>0&&i.set(tb(this.offset,n,this.nullBitmap),0);const s=this.buffers;return s[co.VALIDITY]=i,this.clone(this.type,0,t,r+(t-n),s)}_sliceBuffers(t,n,r,i){let s;const{buffers:o}=this;return(s=o[co.TYPE])&&(o[co.TYPE]=s.subarray(t,t+n)),(s=o[co.OFFSET])&&(o[co.OFFSET]=s.subarray(t,t+n+1))||(s=o[co.DATA])&&(o[co.DATA]=i===6?s:s.subarray(r*t,r*(t+n))),o}_sliceChildren(t,n,r){return t.map(i=>i.slice(n,r))}}pe.prototype.children=Object.freeze([]);class Bh extends Ft{visit(t){return this.getVisitFn(t.type).call(this,t)}visitNull(t){const{["type"]:n,["offset"]:r=0,["length"]:i=0}=t;return new pe(n,r,i,i)}visitBool(t){const{["type"]:n,["offset"]:r=0}=t,i=Jt(t.nullBitmap),s=ue(n.ArrayType,t.data),{["length"]:o=s.length>>3,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new pe(n,r,o,a,[void 0,s,i])}visitInt(t){const{["type"]:n,["offset"]:r=0}=t,i=Jt(t.nullBitmap),s=ue(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new pe(n,r,o,a,[void 0,s,i])}visitFloat(t){const{["type"]:n,["offset"]:r=0}=t,i=Jt(t.nullBitmap),s=ue(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new pe(n,r,o,a,[void 0,s,i])}visitUtf8(t){const{["type"]:n,["offset"]:r=0}=t,i=Jt(t.data),s=Jt(t.nullBitmap),o=Yd(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:l=t.nullBitmap?-1:0}=t;return new pe(n,r,a,l,[o,i,s])}visitBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=Jt(t.data),s=Jt(t.nullBitmap),o=Yd(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:l=t.nullBitmap?-1:0}=t;return new pe(n,r,a,l,[o,i,s])}visitFixedSizeBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=Jt(t.nullBitmap),s=ue(n.ArrayType,t.data),{["length"]:o=s.length/uo(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new pe(n,r,o,a,[void 0,s,i])}visitDate(t){const{["type"]:n,["offset"]:r=0}=t,i=Jt(t.nullBitmap),s=ue(n.ArrayType,t.data),{["length"]:o=s.length/uo(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new pe(n,r,o,a,[void 0,s,i])}visitTimestamp(t){const{["type"]:n,["offset"]:r=0}=t,i=Jt(t.nullBitmap),s=ue(n.ArrayType,t.data),{["length"]:o=s.length/uo(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new pe(n,r,o,a,[void 0,s,i])}visitTime(t){const{["type"]:n,["offset"]:r=0}=t,i=Jt(t.nullBitmap),s=ue(n.ArrayType,t.data),{["length"]:o=s.length/uo(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new pe(n,r,o,a,[void 0,s,i])}visitDecimal(t){const{["type"]:n,["offset"]:r=0}=t,i=Jt(t.nullBitmap),s=ue(n.ArrayType,t.data),{["length"]:o=s.length/uo(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new pe(n,r,o,a,[void 0,s,i])}visitList(t){const{["type"]:n,["offset"]:r=0,["child"]:i}=t,s=Jt(t.nullBitmap),o=Yd(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:l=t.nullBitmap?-1:0}=t;return new pe(n,r,a,l,[o,void 0,s],[i])}visitStruct(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=Jt(t.nullBitmap),{length:o=i.reduce((l,{length:c})=>Math.max(l,c),0),nullCount:a=t.nullBitmap?-1:0}=t;return new pe(n,r,o,a,[void 0,void 0,s],i)}visitUnion(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=ue(n.ArrayType,t.typeIds),{["length"]:o=s.length,["nullCount"]:a=-1}=t;if(at.isSparseUnion(n))return new pe(n,r,o,a,[void 0,void 0,void 0,s],i);const l=Yd(t.valueOffsets);return new pe(n,r,o,a,[l,void 0,void 0,s],i)}visitDictionary(t){const{["type"]:n,["offset"]:r=0}=t,i=Jt(t.nullBitmap),s=ue(n.indices.ArrayType,t.data),{["dictionary"]:o=new se([new Bh().visit({type:n.dictionary})])}=t,{["length"]:a=s.length,["nullCount"]:l=t.nullBitmap?-1:0}=t;return new pe(n,r,a,l,[void 0,s,i],[],o)}visitInterval(t){const{["type"]:n,["offset"]:r=0}=t,i=Jt(t.nullBitmap),s=ue(n.ArrayType,t.data),{["length"]:o=s.length/uo(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new pe(n,r,o,a,[void 0,s,i])}visitDuration(t){const{["type"]:n,["offset"]:r=0}=t,i=Jt(t.nullBitmap),s=ue(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new pe(n,r,o,a,[void 0,s,i])}visitFixedSizeList(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new Bh().visit({type:n.valueType})}=t,s=Jt(t.nullBitmap),{["length"]:o=i.length/uo(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new pe(n,r,o,a,[void 0,void 0,s],[i])}visitMap(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new Bh().visit({type:n.childType})}=t,s=Jt(t.nullBitmap),o=Yd(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:l=t.nullBitmap?-1:0}=t;return new pe(n,r,a,l,[o,void 0,s],[i])}}const kmt=new Bh;function Ct(e){return kmt.visit(e)}class jN{constructor(t=0,n){this.numChunks=t,this.getChunkIterator=n,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const t=this.chunkIterator.next();if(!t.done)return t;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}function vP(e){return e.reduce((t,n)=>t+n.nullCount,0)}function wP(e){return e.reduce((t,n,r)=>(t[r+1]=t[r]+n.length,t),new Uint32Array(e.length+1))}function _P(e,t,n,r){const i=[];for(let s=-1,o=e.length;++s<o;){const a=e[s],l=t[s],{length:c}=a;if(l>=r)break;if(n>=l+c)continue;if(l>=n&&l+c<=r){i.push(a);continue}const u=Math.max(0,n-l),f=Math.min(r-l,c);i.push(a.slice(u,f-u))}return i.length===0&&i.push(e[0].slice(0,0)),i}function xE(e,t,n,r){let i=0,s=0,o=t.length-1;do{if(i>=o-1)return n<t[o]?r(e,i,n-t[i]):null;s=i+Math.trunc((o-i)*.5),n<t[s]?o=s:i=s}while(i<o)}function IE(e,t){return e.getValid(t)}function cf(e){function t(n,r,i){return e(n[r],i)}return function(n){const r=this.data;return xE(r,this._offsets,n,t)}}function SP(e){let t;function n(r,i,s){return e(r[i],s,t)}return function(r,i){const s=this.data;t=i;const o=xE(s,this._offsets,r,n);return t=void 0,o}}function xP(e){let t;function n(r,i,s){let o=s,a=0,l=0;for(let c=i-1,u=r.length;++c<u;){const f=r[c];if(~(a=e(f,t,o)))return l+a;o=0,l+=f.length}return-1}return function(r,i){t=r;const s=this.data,o=typeof i!="number"?n(s,0,0):xE(s,this._offsets,i,n);return t=void 0,o}}class pt extends Ft{}function Dmt(e,t){return t===null&&e.length>0?0:-1}function Omt(e,t){const{nullBitmap:n}=e;if(!n||e.nullCount<=0)return-1;let r=0;for(const i of new SE(n,e.offset+(t||0),e.length,n,bP)){if(!i)return r;++r}return-1}function St(e,t,n){if(t===void 0)return-1;if(t===null)switch(e.typeId){case k.Union:break;case k.Dictionary:break;default:return Omt(e,n)}const r=Ir.getVisitFn(e),i=wd(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}function IP(e,t,n){const r=Ir.getVisitFn(e),i=wd(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}pt.prototype.visitNull=Dmt;pt.prototype.visitBool=St;pt.prototype.visitInt=St;pt.prototype.visitInt8=St;pt.prototype.visitInt16=St;pt.prototype.visitInt32=St;pt.prototype.visitInt64=St;pt.prototype.visitUint8=St;pt.prototype.visitUint16=St;pt.prototype.visitUint32=St;pt.prototype.visitUint64=St;pt.prototype.visitFloat=St;pt.prototype.visitFloat16=St;pt.prototype.visitFloat32=St;pt.prototype.visitFloat64=St;pt.prototype.visitUtf8=St;pt.prototype.visitBinary=St;pt.prototype.visitFixedSizeBinary=St;pt.prototype.visitDate=St;pt.prototype.visitDateDay=St;pt.prototype.visitDateMillisecond=St;pt.prototype.visitTimestamp=St;pt.prototype.visitTimestampSecond=St;pt.prototype.visitTimestampMillisecond=St;pt.prototype.visitTimestampMicrosecond=St;pt.prototype.visitTimestampNanosecond=St;pt.prototype.visitTime=St;pt.prototype.visitTimeSecond=St;pt.prototype.visitTimeMillisecond=St;pt.prototype.visitTimeMicrosecond=St;pt.prototype.visitTimeNanosecond=St;pt.prototype.visitDecimal=St;pt.prototype.visitList=St;pt.prototype.visitStruct=St;pt.prototype.visitUnion=St;pt.prototype.visitDenseUnion=IP;pt.prototype.visitSparseUnion=IP;pt.prototype.visitDictionary=St;pt.prototype.visitInterval=St;pt.prototype.visitIntervalDayTime=St;pt.prototype.visitIntervalYearMonth=St;pt.prototype.visitDuration=St;pt.prototype.visitDurationSecond=St;pt.prototype.visitDurationMillisecond=St;pt.prototype.visitDurationMicrosecond=St;pt.prototype.visitDurationNanosecond=St;pt.prototype.visitFixedSizeList=St;pt.prototype.visitMap=St;const nb=new pt;class yt extends Ft{}function wt(e){const{type:t}=e;if(e.nullCount===0&&e.stride===1&&(t.typeId===k.Timestamp||t instanceof Xa&&t.bitWidth!==64||t instanceof Bp&&t.bitWidth!==64||t instanceof Fp&&t.precision!==rn.HALF))return new jN(e.data.length,r=>{const i=e.data[r];return i.values.subarray(0,i.length)[Symbol.iterator]()});let n=0;return new jN(e.data.length,r=>{const s=e.data[r].length,o=e.slice(n,n+s);return n+=s,new Fmt(o)})}class Fmt{constructor(t){this.vector=t,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}yt.prototype.visitNull=wt;yt.prototype.visitBool=wt;yt.prototype.visitInt=wt;yt.prototype.visitInt8=wt;yt.prototype.visitInt16=wt;yt.prototype.visitInt32=wt;yt.prototype.visitInt64=wt;yt.prototype.visitUint8=wt;yt.prototype.visitUint16=wt;yt.prototype.visitUint32=wt;yt.prototype.visitUint64=wt;yt.prototype.visitFloat=wt;yt.prototype.visitFloat16=wt;yt.prototype.visitFloat32=wt;yt.prototype.visitFloat64=wt;yt.prototype.visitUtf8=wt;yt.prototype.visitBinary=wt;yt.prototype.visitFixedSizeBinary=wt;yt.prototype.visitDate=wt;yt.prototype.visitDateDay=wt;yt.prototype.visitDateMillisecond=wt;yt.prototype.visitTimestamp=wt;yt.prototype.visitTimestampSecond=wt;yt.prototype.visitTimestampMillisecond=wt;yt.prototype.visitTimestampMicrosecond=wt;yt.prototype.visitTimestampNanosecond=wt;yt.prototype.visitTime=wt;yt.prototype.visitTimeSecond=wt;yt.prototype.visitTimeMillisecond=wt;yt.prototype.visitTimeMicrosecond=wt;yt.prototype.visitTimeNanosecond=wt;yt.prototype.visitDecimal=wt;yt.prototype.visitList=wt;yt.prototype.visitStruct=wt;yt.prototype.visitUnion=wt;yt.prototype.visitDenseUnion=wt;yt.prototype.visitSparseUnion=wt;yt.prototype.visitDictionary=wt;yt.prototype.visitInterval=wt;yt.prototype.visitIntervalDayTime=wt;yt.prototype.visitIntervalYearMonth=wt;yt.prototype.visitDuration=wt;yt.prototype.visitDurationSecond=wt;yt.prototype.visitDurationMillisecond=wt;yt.prototype.visitDurationMicrosecond=wt;yt.prototype.visitDurationNanosecond=wt;yt.prototype.visitFixedSizeList=wt;yt.prototype.visitMap=wt;const TE=new yt,Bmt=(e,t)=>e+t;class yl extends Ft{visitNull(t,n){return 0}visitInt(t,n){return t.type.bitWidth/8}visitFloat(t,n){return t.type.ArrayType.BYTES_PER_ELEMENT}visitBool(t,n){return 1/8}visitDecimal(t,n){return t.type.bitWidth/8}visitDate(t,n){return(t.type.unit+1)*4}visitTime(t,n){return t.type.bitWidth/8}visitTimestamp(t,n){return t.type.unit===rt.SECOND?4:8}visitInterval(t,n){return(t.type.unit+1)*4}visitDuration(t,n){return 8}visitStruct(t,n){return t.children.reduce((r,i)=>r+zs.visit(i,n),0)}visitFixedSizeBinary(t,n){return t.type.byteWidth}visitMap(t,n){return 8+t.children.reduce((r,i)=>r+zs.visit(i,n),0)}visitDictionary(t,n){var r;return t.type.indices.bitWidth/8+(((r=t.dictionary)===null||r===void 0?void 0:r.getByteLength(t.values[n]))||0)}}const Rmt=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),Lmt=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),Cmt=({valueOffsets:e,stride:t,children:n},r)=>{const i=n[0],{[r*t]:s}=e,{[r*t+1]:o}=e,a=zs.getVisitFn(i.type),l=i.slice(s,o-s);let c=8;for(let u=-1,f=o-s;++u<f;)c+=a(l,u);return c},Umt=({stride:e,children:t},n)=>{const r=t[0],i=r.slice(n*e,e),s=zs.getVisitFn(r.type);let o=0;for(let a=-1,l=i.length;++a<l;)o+=s(i,a);return o},Pmt=(e,t)=>e.type.mode===cn.Dense?TP(e,t):EP(e,t),TP=({type:e,children:t,typeIds:n,valueOffsets:r},i)=>{const s=e.typeIdToChildIndex[n[i]];return 8+zs.visit(t[s],r[i])},EP=({children:e},t)=>4+zs.visitMany(e,e.map(()=>t)).reduce(Bmt,0);yl.prototype.visitUtf8=Rmt;yl.prototype.visitBinary=Lmt;yl.prototype.visitList=Cmt;yl.prototype.visitFixedSizeList=Umt;yl.prototype.visitUnion=Pmt;yl.prototype.visitDenseUnion=TP;yl.prototype.visitSparseUnion=EP;const zs=new yl;var AP;const MP={},$P={};class se{constructor(t){var n,r,i;const s=t[0]instanceof se?t.flatMap(a=>a.data):t;if(s.length===0||s.some(a=>!(a instanceof pe)))throw new TypeError("Vector constructor expects an Array of Data instances.");const o=(n=s[0])===null||n===void 0?void 0:n.type;switch(s.length){case 0:this._offsets=[0];break;case 1:{const{get:a,set:l,indexOf:c,byteLength:u}=MP[o.typeId],f=s[0];this.isValid=d=>IE(f,d),this.get=d=>a(f,d),this.set=(d,h)=>l(f,d,h),this.indexOf=d=>c(f,d),this.getByteLength=d=>u(f,d),this._offsets=[0,f.length];break}default:Object.setPrototypeOf(this,$P[o.typeId]),this._offsets=wP(s);break}this.data=s,this.type=o,this.stride=uo(o),this.numChildren=(i=(r=o.children)===null||r===void 0?void 0:r.length)!==null&&i!==void 0?i:0,this.length=this._offsets.at(-1)}get byteLength(){return this.data.reduce((t,n)=>t+n.byteLength,0)}get nullCount(){return vP(this.data)}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${k[this.type.typeId]}Vector`}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}includes(t,n){return this.indexOf(t,n)>-1}getByteLength(t){return 0}[Symbol.iterator](){return TE.visit(this)}concat(...t){return new se(this.data.concat(t.flatMap(n=>n.data).flat(Number.POSITIVE_INFINITY)))}slice(t,n){return new se(gP(this,t,n,({data:r,_offsets:i},s,o)=>_P(r,i,s,o)))}toJSON(){return[...this]}toArray(){const{type:t,data:n,length:r,stride:i,ArrayType:s}=this;switch(t.typeId){case k.Int:case k.Float:case k.Decimal:case k.Time:case k.Timestamp:switch(n.length){case 0:return new s;case 1:return n[0].values.subarray(0,r*i);default:return n.reduce((o,{values:a,length:l})=>(o.array.set(a.subarray(0,l*i),o.offset),o.offset+=l*i,o),{array:new s(r*i),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(t){var n;return this.getChildAt((n=this.type.children)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.numChildren?new se(this.data.map(({children:n})=>n[t])):null}get isMemoized(){return at.isDictionary(this.type)?this.data[0].dictionary.isMemoized:!1}memoize(){if(at.isDictionary(this.type)){const t=new rb(this.data[0].dictionary),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new se(n)}return new rb(this)}unmemoize(){if(at.isDictionary(this.type)&&this.isMemoized){const t=this.data[0].dictionary.unmemoize(),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new se(n)}return this}}AP=Symbol.toStringTag;se[AP]=(e=>{e.type=at.prototype,e.data=[],e.length=0,e.stride=1,e.numChildren=0,e._offsets=new Uint32Array([0]),e[Symbol.isConcatSpreadable]=!0;const t=Object.keys(k).map(n=>k[n]).filter(n=>typeof n=="number"&&n!==k.NONE);for(const n of t){const r=Ir.getVisitFnByTypeId(n),i=wi.getVisitFnByTypeId(n),s=nb.getVisitFnByTypeId(n),o=zs.getVisitFnByTypeId(n);MP[n]={get:r,set:i,indexOf:s,byteLength:o},$P[n]=Object.create(e,{isValid:{value:cf(IE)},get:{value:cf(Ir.getVisitFnByTypeId(n))},set:{value:SP(wi.getVisitFnByTypeId(n))},indexOf:{value:xP(nb.getVisitFnByTypeId(n))},getByteLength:{value:cf(zs.getVisitFnByTypeId(n))}})}return"Vector"})(se.prototype);class rb extends se{constructor(t){super(t.data);const n=this.get,r=this.set,i=this.slice,s=new Array(this.length);Object.defineProperty(this,"get",{value(o){const a=s[o];if(a!==void 0)return a;const l=n.call(this,o);return s[o]=l,l}}),Object.defineProperty(this,"set",{value(o,a){r.call(this,o,a),s[o]=a}}),Object.defineProperty(this,"slice",{value:(o,a)=>new rb(i.call(this,o,a))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new se(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}class Ax{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(t,n,r,i){return t.prep(8,24),t.writeInt64(BigInt(i??0)),t.pad(4),t.writeInt32(r),t.writeInt64(BigInt(n??0)),t.offset()}}class an{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsKeyValue(t,n){return(n||new an).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsKeyValue(t,n){return t.setPosition(t.position()+de),(n||new an).__init(t.readInt32(t.position())+t.position(),t)}key(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}value(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startKeyValue(t){t.startObject(2)}static addKey(t,n){t.addFieldOffset(0,n,0)}static addValue(t,n){t.addFieldOffset(1,n,0)}static endKeyValue(t){return t.endObject()}static createKeyValue(t,n,r){return an.startKeyValue(t),an.addKey(t,n),an.addValue(t,r),an.endKeyValue(t)}}var qf;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(qf||(qf={}));var Wf;(function(e){e[e.Little=0]="Little",e[e.Big=1]="Big"})(Wf||(Wf={}));var ib;(function(e){e[e.DenseArray=0]="DenseArray"})(ib||(ib={}));class $r{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInt(t,n){return(n||new $r).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInt(t,n){return t.setPosition(t.position()+de),(n||new $r).__init(t.readInt32(t.position())+t.position(),t)}bitWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}isSigned(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startInt(t){t.startObject(2)}static addBitWidth(t,n){t.addFieldInt32(0,n,0)}static addIsSigned(t,n){t.addFieldInt8(1,+n,0)}static endInt(t){return t.endObject()}static createInt(t,n,r){return $r.startInt(t),$r.addBitWidth(t,n),$r.addIsSigned(t,r),$r.endInt(t)}}class go{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryEncoding(t,n){return(n||new go).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryEncoding(t,n){return t.setPosition(t.position()+de),(n||new go).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}indexType(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new $r).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isOrdered(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}dictionaryKind(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt16(this.bb_pos+t):ib.DenseArray}static startDictionaryEncoding(t){t.startObject(4)}static addId(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addIndexType(t,n){t.addFieldOffset(1,n,0)}static addIsOrdered(t,n){t.addFieldInt8(2,+n,0)}static addDictionaryKind(t,n){t.addFieldInt16(3,n,ib.DenseArray)}static endDictionaryEncoding(t){return t.endObject()}}class Hl{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBinary(t,n){return(n||new Hl).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBinary(t,n){return t.setPosition(t.position()+de),(n||new Hl).__init(t.readInt32(t.position())+t.position(),t)}static startBinary(t){t.startObject(0)}static endBinary(t){return t.endObject()}static createBinary(t){return Hl.startBinary(t),Hl.endBinary(t)}}class Gl{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBool(t,n){return(n||new Gl).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBool(t,n){return t.setPosition(t.position()+de),(n||new Gl).__init(t.readInt32(t.position())+t.position(),t)}static startBool(t){t.startObject(0)}static endBool(t){return t.endObject()}static createBool(t){return Gl.startBool(t),Gl.endBool(t)}}var sb;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(sb||(sb={}));let vm=class fu{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDate(t,n){return(n||new fu).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDate(t,n){return t.setPosition(t.position()+de),(n||new fu).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):sb.MILLISECOND}static startDate(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,sb.MILLISECOND)}static endDate(t){return t.endObject()}static createDate(t,n){return fu.startDate(t),fu.addUnit(t,n),fu.endDate(t)}};class ir{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDecimal(t,n){return(n||new ir).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDecimal(t,n){return t.setPosition(t.position()+de),(n||new ir).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}scale(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}bitWidth(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt32(this.bb_pos+t):128}static startDecimal(t){t.startObject(3)}static addPrecision(t,n){t.addFieldInt32(0,n,0)}static addScale(t,n){t.addFieldInt32(1,n,0)}static addBitWidth(t,n){t.addFieldInt32(2,n,128)}static endDecimal(t){return t.endObject()}static createDecimal(t,n,r,i){return ir.startDecimal(t),ir.addPrecision(t,n),ir.addScale(t,r),ir.addBitWidth(t,i),ir.endDecimal(t)}}var Qa;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(Qa||(Qa={}));class _s{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDuration(t,n){return(n||new _s).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDuration(t,n){return t.setPosition(t.position()+de),(n||new _s).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Qa.MILLISECOND}static startDuration(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,Qa.MILLISECOND)}static endDuration(t){return t.endObject()}static createDuration(t,n){return _s.startDuration(t),_s.addUnit(t,n),_s.endDuration(t)}}class Ss{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeBinary(t,n){return(n||new Ss).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeBinary(t,n){return t.setPosition(t.position()+de),(n||new Ss).__init(t.readInt32(t.position())+t.position(),t)}byteWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeBinary(t){t.startObject(1)}static addByteWidth(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeBinary(t){return t.endObject()}static createFixedSizeBinary(t,n){return Ss.startFixedSizeBinary(t),Ss.addByteWidth(t,n),Ss.endFixedSizeBinary(t)}}class xs{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeList(t,n){return(n||new xs).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeList(t,n){return t.setPosition(t.position()+de),(n||new xs).__init(t.readInt32(t.position())+t.position(),t)}listSize(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeList(t){t.startObject(1)}static addListSize(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeList(t){return t.endObject()}static createFixedSizeList(t,n){return xs.startFixedSizeList(t),xs.addListSize(t,n),xs.endFixedSizeList(t)}}var ob;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(ob||(ob={}));class Is{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFloatingPoint(t,n){return(n||new Is).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFloatingPoint(t,n){return t.setPosition(t.position()+de),(n||new Is).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):ob.HALF}static startFloatingPoint(t){t.startObject(1)}static addPrecision(t,n){t.addFieldInt16(0,n,ob.HALF)}static endFloatingPoint(t){return t.endObject()}static createFloatingPoint(t,n){return Is.startFloatingPoint(t),Is.addPrecision(t,n),Is.endFloatingPoint(t)}}var ab;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(ab||(ab={}));class Ts{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInterval(t,n){return(n||new Ts).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInterval(t,n){return t.setPosition(t.position()+de),(n||new Ts).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):ab.YEAR_MONTH}static startInterval(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,ab.YEAR_MONTH)}static endInterval(t){return t.endObject()}static createInterval(t,n){return Ts.startInterval(t),Ts.addUnit(t,n),Ts.endInterval(t)}}class Xl{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsList(t,n){return(n||new Xl).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsList(t,n){return t.setPosition(t.position()+de),(n||new Xl).__init(t.readInt32(t.position())+t.position(),t)}static startList(t){t.startObject(0)}static endList(t){return t.endObject()}static createList(t){return Xl.startList(t),Xl.endList(t)}}let wm=class du{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMap(t,n){return(n||new du).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMap(t,n){return t.setPosition(t.position()+de),(n||new du).__init(t.readInt32(t.position())+t.position(),t)}keysSorted(){const t=this.bb.__offset(this.bb_pos,4);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startMap(t){t.startObject(1)}static addKeysSorted(t,n){t.addFieldInt8(0,+n,0)}static endMap(t){return t.endObject()}static createMap(t,n){return du.startMap(t),du.addKeysSorted(t,n),du.endMap(t)}};class Ql{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsNull(t,n){return(n||new Ql).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsNull(t,n){return t.setPosition(t.position()+de),(n||new Ql).__init(t.readInt32(t.position())+t.position(),t)}static startNull(t){t.startObject(0)}static endNull(t){return t.endObject()}static createNull(t){return Ql.startNull(t),Ql.endNull(t)}}class Kl{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsStruct_(t,n){return(n||new Kl).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsStruct_(t,n){return t.setPosition(t.position()+de),(n||new Kl).__init(t.readInt32(t.position())+t.position(),t)}static startStruct_(t){t.startObject(0)}static endStruct_(t){return t.endObject()}static createStruct_(t){return Kl.startStruct_(t),Kl.endStruct_(t)}}class ei{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTime(t,n){return(n||new ei).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTime(t,n){return t.setPosition(t.position()+de),(n||new ei).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Qa.MILLISECOND}bitWidth(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):32}static startTime(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,Qa.MILLISECOND)}static addBitWidth(t,n){t.addFieldInt32(1,n,32)}static endTime(t){return t.endObject()}static createTime(t,n,r){return ei.startTime(t),ei.addUnit(t,n),ei.addBitWidth(t,r),ei.endTime(t)}}class ni{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTimestamp(t,n){return(n||new ni).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTimestamp(t,n){return t.setPosition(t.position()+de),(n||new ni).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Qa.SECOND}timezone(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startTimestamp(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,Qa.SECOND)}static addTimezone(t,n){t.addFieldOffset(1,n,0)}static endTimestamp(t){return t.endObject()}static createTimestamp(t,n,r){return ni.startTimestamp(t),ni.addUnit(t,n),ni.addTimezone(t,r),ni.endTimestamp(t)}}var lb;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(lb||(lb={}));class or{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUnion(t,n){return(n||new or).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUnion(t,n){return t.setPosition(t.position()+de),(n||new or).__init(t.readInt32(t.position())+t.position(),t)}mode(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):lb.Sparse}typeIds(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readInt32(this.bb.__vector(this.bb_pos+n)+t*4):0}typeIdsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}typeIdsArray(){const t=this.bb.__offset(this.bb_pos,6);return t?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startUnion(t){t.startObject(2)}static addMode(t,n){t.addFieldInt16(0,n,lb.Sparse)}static addTypeIds(t,n){t.addFieldOffset(1,n,0)}static createTypeIdsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addInt32(n[r]);return t.endVector()}static startTypeIdsVector(t,n){t.startVector(4,n,4)}static endUnion(t){return t.endObject()}static createUnion(t,n,r){return or.startUnion(t),or.addMode(t,n),or.addTypeIds(t,r),or.endUnion(t)}}class Zl{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUtf8(t,n){return(n||new Zl).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUtf8(t,n){return t.setPosition(t.position()+de),(n||new Zl).__init(t.readInt32(t.position())+t.position(),t)}static startUtf8(t){t.startObject(0)}static endUtf8(t){return t.endObject()}static createUtf8(t){return Zl.startUtf8(t),Zl.endUtf8(t)}}var Ae;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.FloatingPoint=3]="FloatingPoint",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct_=13]="Struct_",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.LargeBinary=19]="LargeBinary",e[e.LargeUtf8=20]="LargeUtf8",e[e.LargeList=21]="LargeList",e[e.RunEndEncoded=22]="RunEndEncoded"})(Ae||(Ae={}));let Qr=class _m{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsField(t,n){return(n||new _m).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsField(t,n){return t.setPosition(t.position()+de),(n||new _m).__init(t.readInt32(t.position())+t.position(),t)}name(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}nullable(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}typeType(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):Ae.NONE}type(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.__union(t,this.bb_pos+n):null}dictionary(t){const n=this.bb.__offset(this.bb_pos,12);return n?(t||new go).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}children(t,n){const r=this.bb.__offset(this.bb_pos,14);return r?(n||new _m).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}childrenLength(){const t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,16);return r?(n||new an).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}static startField(t){t.startObject(7)}static addName(t,n){t.addFieldOffset(0,n,0)}static addNullable(t,n){t.addFieldInt8(1,+n,0)}static addTypeType(t,n){t.addFieldInt8(2,n,Ae.NONE)}static addType(t,n){t.addFieldOffset(3,n,0)}static addDictionary(t,n){t.addFieldOffset(4,n,0)}static addChildren(t,n){t.addFieldOffset(5,n,0)}static createChildrenVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startChildrenVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(6,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endField(t){return t.endObject()}},fs=class io{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsSchema(t,n){return(n||new io).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSchema(t,n){return t.setPosition(t.position()+de),(n||new io).__init(t.readInt32(t.position())+t.position(),t)}endianness(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Wf.Little}fields(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new Qr).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}fieldsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new an).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}features(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.readInt64(this.bb.__vector(this.bb_pos+n)+t*8):BigInt(0)}featuresLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}static startSchema(t){t.startObject(4)}static addEndianness(t,n){t.addFieldInt16(0,n,Wf.Little)}static addFields(t,n){t.addFieldOffset(1,n,0)}static createFieldsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startFieldsVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(2,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static addFeatures(t,n){t.addFieldOffset(3,n,0)}static createFeaturesVector(t,n){t.startVector(8,n.length,8);for(let r=n.length-1;r>=0;r--)t.addInt64(n[r]);return t.endVector()}static startFeaturesVector(t,n){t.startVector(8,n,8)}static endSchema(t){return t.endObject()}static finishSchemaBuffer(t,n){t.finish(n)}static finishSizePrefixedSchemaBuffer(t,n){t.finish(n,void 0,!0)}static createSchema(t,n,r,i,s){return io.startSchema(t),io.addEndianness(t,n),io.addFields(t,r),io.addCustomMetadata(t,i),io.addFeatures(t,s),io.endSchema(t)}};class Ar{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFooter(t,n){return(n||new Ar).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFooter(t,n){return t.setPosition(t.position()+de),(n||new Ar).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):qf.V1}schema(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new fs).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}dictionaries(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new Ax).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}dictionariesLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}recordBatches(t,n){const r=this.bb.__offset(this.bb_pos,10);return r?(n||new Ax).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}recordBatchesLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new an).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startFooter(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,qf.V1)}static addSchema(t,n){t.addFieldOffset(1,n,0)}static addDictionaries(t,n){t.addFieldOffset(2,n,0)}static startDictionariesVector(t,n){t.startVector(24,n,8)}static addRecordBatches(t,n){t.addFieldOffset(3,n,0)}static startRecordBatchesVector(t,n){t.startVector(24,n,8)}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endFooter(t){return t.endObject()}static finishFooterBuffer(t,n){t.finish(n)}static finishSizePrefixedFooterBuffer(t,n){t.finish(n,void 0,!0)}}class oe{constructor(t=[],n,r,i=In.V5){this.fields=t||[],this.metadata=n||new Map,r||(r=Mx(t)),this.dictionaries=r,this.metadataVersion=i}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(t=>t.name)}toString(){return`Schema<{ ${this.fields.map((t,n)=>`${n}: ${t}`).join(", ")} }>`}select(t){const n=new Set(t),r=this.fields.filter(i=>n.has(i.name));return new oe(r,this.metadata)}selectAt(t){const n=t.map(r=>this.fields[r]).filter(Boolean);return new oe(n,this.metadata)}assign(...t){const n=t[0]instanceof oe?t[0]:Array.isArray(t[0])?new oe(t[0]):new oe(t),r=[...this.fields],i=P0(P0(new Map,this.metadata),n.metadata),s=n.fields.filter(a=>{const l=r.findIndex(c=>c.name===a.name);return~l?(r[l]=a.clone({metadata:P0(P0(new Map,r[l].metadata),a.metadata)}))&&!1:!0}),o=Mx(s,new Map);return new oe([...r,...s],i,new Map([...this.dictionaries,...o]))}}oe.prototype.fields=null;oe.prototype.metadata=null;oe.prototype.dictionaries=null;class Te{static new(...t){let[n,r,i,s]=t;return t[0]&&typeof t[0]=="object"&&({name:n}=t[0],r===void 0&&(r=t[0].type),i===void 0&&(i=t[0].nullable),s===void 0&&(s=t[0].metadata)),new Te(`${n}`,r,i,s)}constructor(t,n,r=!1,i){this.name=t,this.type=n,this.nullable=r,this.metadata=i||new Map}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...t){let[n,r,i,s]=t;return!t[0]||typeof t[0]!="object"?[n=this.name,r=this.type,i=this.nullable,s=this.metadata]=t:{name:n=this.name,type:r=this.type,nullable:i=this.nullable,metadata:s=this.metadata}=t[0],Te.new(n,r,i,s)}}Te.prototype.type=null;Te.prototype.name=null;Te.prototype.nullable=null;Te.prototype.metadata=null;function P0(e,t){return new Map([...e||new Map,...t||new Map])}function Mx(e,t=new Map){for(let n=-1,r=e.length;++n<r;){const s=e[n].type;if(at.isDictionary(s)){if(!t.has(s.id))t.set(s.id,s.dictionary);else if(t.get(s.id)!==s.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}s.children&&s.children.length>0&&Mx(s.children,t)}return t}var zmt=FO,jmt=If;class Rp{static decode(t){t=new jmt(Jt(t));const n=Ar.getRootAsFooter(t),r=oe.decode(n.schema(),new Map,n.version());return new Vmt(r,n)}static encode(t){const n=new zmt,r=oe.encode(n,t.schema);Ar.startRecordBatchesVector(n,t.numRecordBatches);for(const o of[...t.recordBatches()].slice().reverse())Ka.encode(n,o);const i=n.endVector();Ar.startDictionariesVector(n,t.numDictionaries);for(const o of[...t.dictionaryBatches()].slice().reverse())Ka.encode(n,o);const s=n.endVector();return Ar.startFooter(n),Ar.addSchema(n,r),Ar.addVersion(n,In.V5),Ar.addRecordBatches(n,i),Ar.addDictionaries(n,s),Ar.finishFooterBuffer(n,Ar.endFooter(n)),n.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}constructor(t,n=In.V5,r,i){this.schema=t,this.version=n,r&&(this._recordBatches=r),i&&(this._dictionaryBatches=i)}*recordBatches(){for(let t,n=-1,r=this.numRecordBatches;++n<r;)(t=this.getRecordBatch(n))&&(yield t)}*dictionaryBatches(){for(let t,n=-1,r=this.numDictionaries;++n<r;)(t=this.getDictionaryBatch(n))&&(yield t)}getRecordBatch(t){return t>=0&&t<this.numRecordBatches&&this._recordBatches[t]||null}getDictionaryBatch(t){return t>=0&&t<this.numDictionaries&&this._dictionaryBatches[t]||null}}class Vmt extends Rp{get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}constructor(t,n){super(t,n.version()),this._footer=n}getRecordBatch(t){if(t>=0&&t<this.numRecordBatches){const n=this._footer.recordBatches(t);if(n)return Ka.decode(n)}return null}getDictionaryBatch(t){if(t>=0&&t<this.numDictionaries){const n=this._footer.dictionaries(t);if(n)return Ka.decode(n)}return null}}class Ka{static decode(t){return new Ka(t.metaDataLength(),t.bodyLength(),t.offset())}static encode(t,n){const{metaDataLength:r}=n,i=BigInt(n.offset),s=BigInt(n.bodyLength);return Ax.createBlock(t,i,r,s)}constructor(t,n,r){this.metaDataLength=t,this.offset=Xi(r),this.bodyLength=Xi(n)}}const Ue=Object.freeze({done:!0,value:void 0});class VN{constructor(t){this._json=t}get schema(){return this._json.schema}get batches(){return this._json.batches||[]}get dictionaries(){return this._json.dictionaries||[]}}class EE{tee(){return this._getDOMStream().tee()}pipe(t,n){return this._getNodeStream().pipe(t,n)}pipeTo(t,n){return this._getDOMStream().pipeTo(t,n)}pipeThrough(t,n){return this._getDOMStream().pipeThrough(t,n)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class Ymt extends EE{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(t=>this._closedPromiseResolve=t)}get closed(){return this._closedPromise}cancel(t){return W(this,void 0,void 0,function*(){yield this.return(t)})}write(t){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(t):this.resolvers.shift().resolve({done:!1,value:t}))}abort(t){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:t}:this.resolvers.shift().reject({done:!0,value:t}))}close(){if(this._closedPromiseResolve){const{resolvers:t}=this;for(;t.length>0;)t.shift().resolve(Ue);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(t){return Zr.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,t)}toNodeStream(t){return Zr.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,t)}throw(t){return W(this,void 0,void 0,function*(){return yield this.abort(t),Ue})}return(t){return W(this,void 0,void 0,function*(){return yield this.close(),Ue})}read(t){return W(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return W(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(...t){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((n,r)=>{this.resolvers.push({resolve:n,reject:r})}):Promise.resolve(Ue)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}}class Sm extends Ymt{write(t){if((t=Jt(t)).byteLength>0)return super.write(t)}toString(t=!1){return t?xx(this.toUint8Array(!0)):this.toUint8Array(!1).then(xx)}toUint8Array(t=!1){return t?Ps(this._values)[0]:W(this,void 0,void 0,function*(){var n,r,i,s;const o=[];let a=0;try{for(var l=!0,c=Br(this),u;u=yield c.next(),n=u.done,!n;l=!0){s=u.value,l=!1;const f=s;o.push(f),a+=f.byteLength}}catch(f){r={error:f}}finally{try{!l&&!n&&(i=c.return)&&(yield i.call(c))}finally{if(r)throw r.error}}return Ps(o,a)[0]})}}class cb{constructor(t){t&&(this.source=new qmt(Zr.fromIterable(t)))}[Symbol.iterator](){return this}next(t){return this.source.next(t)}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}peek(t){return this.source.peek(t)}read(t){return this.source.read(t)}}class Hf{constructor(t){t instanceof Hf?this.source=t.source:t instanceof Sm?this.source=new vl(Zr.fromAsyncIterable(t)):i9(t)?this.source=new vl(Zr.fromNodeStream(t)):pE(t)?this.source=new vl(Zr.fromDOMStream(t)):r9(t)?this.source=new vl(Zr.fromDOMStream(t.body)):Oy(t)?this.source=new vl(Zr.fromIterable(t)):$c(t)?this.source=new vl(Zr.fromAsyncIterable(t)):vd(t)&&(this.source=new vl(Zr.fromAsyncIterable(t)))}[Symbol.asyncIterator](){return this}next(t){return this.source.next(t)}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}get closed(){return this.source.closed}cancel(t){return this.source.cancel(t)}peek(t){return this.source.peek(t)}read(t){return this.source.read(t)}}class qmt{constructor(t){this.source=t}cancel(t){this.return(t)}peek(t){return this.next(t,"peek").value}read(t){return this.next(t,"read").value}next(t,n="read"){return this.source.next({cmd:n,size:t})}throw(t){return Object.create(this.source.throw&&this.source.throw(t)||Ue)}return(t){return Object.create(this.source.return&&this.source.return(t)||Ue)}}class vl{constructor(t){this.source=t,this._closedPromise=new Promise(n=>this._closedPromiseResolve=n)}cancel(t){return W(this,void 0,void 0,function*(){yield this.return(t)})}get closed(){return this._closedPromise}read(t){return W(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return W(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(t,n="read"){return W(this,void 0,void 0,function*(){return yield this.source.next({cmd:n,size:t})})}throw(t){return W(this,void 0,void 0,function*(){const n=this.source.throw&&(yield this.source.throw(t))||Ue;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(n)})}return(t){return W(this,void 0,void 0,function*(){const n=this.source.return&&(yield this.source.return(t))||Ue;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(n)})}}class YN extends cb{constructor(t,n){super(),this.position=0,this.buffer=Jt(t),this.size=n===void 0?this.buffer.byteLength:n}readInt32(t){const{buffer:n,byteOffset:r}=this.readAt(t,4);return new DataView(n,r).getInt32(0,!0)}seek(t){return this.position=Math.min(t,this.size),t<this.size}read(t){const{buffer:n,size:r,position:i}=this;return n&&i<r?(typeof t!="number"&&(t=Number.POSITIVE_INFINITY),this.position=Math.min(r,i+Math.min(r-i,t)),n.subarray(i,this.position)):null}readAt(t,n){const r=this.buffer,i=Math.min(this.size,t+n);return r?r.subarray(t,i):new Uint8Array(n)}close(){this.buffer&&(this.buffer=null)}throw(t){return this.close(),{done:!0,value:t}}return(t){return this.close(),{done:!0,value:t}}}class ub extends Hf{constructor(t,n){super(),this.position=0,this._handle=t,typeof n=="number"?this.size=n:this._pending=W(this,void 0,void 0,function*(){this.size=(yield t.stat()).size,delete this._pending})}readInt32(t){return W(this,void 0,void 0,function*(){const{buffer:n,byteOffset:r}=yield this.readAt(t,4);return new DataView(n,r).getInt32(0,!0)})}seek(t){return W(this,void 0,void 0,function*(){return this._pending&&(yield this._pending),this.position=Math.min(t,this.size),t<this.size})}read(t){return W(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:n,size:r,position:i}=this;if(n&&i<r){typeof t!="number"&&(t=Number.POSITIVE_INFINITY);let s=i,o=0,a=0;const l=Math.min(r,s+Math.min(r-s,t)),c=new Uint8Array(Math.max(0,(this.position=l)-s));for(;(s+=a)<l&&(o+=a)<c.byteLength;)({bytesRead:a}=yield n.read(c,o,c.byteLength-o,s));return c}return null})}readAt(t,n){return W(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:r,size:i}=this;if(r&&t+n<i){const s=Math.min(i,t+n),o=new Uint8Array(s-t);return(yield r.read(o,0,n,t)).buffer}return new Uint8Array(n)})}close(){return W(this,void 0,void 0,function*(){const t=this._handle;this._handle=null,t&&(yield t.close())})}throw(t){return W(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:t}})}return(t){return W(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:t}})}}const Wmt=65536;function Ru(e){return e<0&&(e=4294967295+e+1),`0x${e.toString(16)}`}const Gf=8,AE=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8];class NP{constructor(t){this.buffer=t}high(){return this.buffer[1]}low(){return this.buffer[0]}_times(t){const n=new Uint32Array([this.buffer[1]>>>16,this.buffer[1]&65535,this.buffer[0]>>>16,this.buffer[0]&65535]),r=new Uint32Array([t.buffer[1]>>>16,t.buffer[1]&65535,t.buffer[0]>>>16,t.buffer[0]&65535]);let i=n[3]*r[3];this.buffer[0]=i&65535;let s=i>>>16;return i=n[2]*r[3],s+=i,i=n[3]*r[2]>>>0,s+=i,this.buffer[0]+=s<<16,this.buffer[1]=s>>>0<i?Wmt:0,this.buffer[1]+=s>>>16,this.buffer[1]+=n[1]*r[3]+n[2]*r[2]+n[3]*r[1],this.buffer[1]+=n[0]*r[3]+n[1]*r[2]+n[2]*r[1]+n[3]*r[0]<<16,this}_plus(t){const n=this.buffer[0]+t.buffer[0]>>>0;this.buffer[1]+=t.buffer[1],n<this.buffer[0]>>>0&&++this.buffer[1],this.buffer[0]=n}lessThan(t){return this.buffer[1]<t.buffer[1]||this.buffer[1]===t.buffer[1]&&this.buffer[0]<t.buffer[0]}equals(t){return this.buffer[1]===t.buffer[1]&&this.buffer[0]==t.buffer[0]}greaterThan(t){return t.lessThan(this)}hex(){return`${Ru(this.buffer[1])} ${Ru(this.buffer[0])}`}}class le extends NP{times(t){return this._times(t),this}plus(t){return this._plus(t),this}static from(t,n=new Uint32Array(2)){return le.fromString(typeof t=="string"?t:t.toString(),n)}static fromNumber(t,n=new Uint32Array(2)){return le.fromString(t.toString(),n)}static fromString(t,n=new Uint32Array(2)){const r=t.length,i=new le(n);for(let s=0;s<r;){const o=Gf<r-s?Gf:r-s,a=new le(new Uint32Array([Number.parseInt(t.slice(s,s+o),10),0])),l=new le(new Uint32Array([AE[o],0]));i.times(l),i.plus(a),s+=o}return i}static convertArray(t){const n=new Uint32Array(t.length*2);for(let r=-1,i=t.length;++r<i;)le.from(t[r],new Uint32Array(n.buffer,n.byteOffset+2*r*4,2));return n}static multiply(t,n){return new le(new Uint32Array(t.buffer)).times(n)}static add(t,n){return new le(new Uint32Array(t.buffer)).plus(n)}}class rr extends NP{negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[0]==0&&++this.buffer[1],this}times(t){return this._times(t),this}plus(t){return this._plus(t),this}lessThan(t){const n=this.buffer[1]<<0,r=t.buffer[1]<<0;return n<r||n===r&&this.buffer[0]<t.buffer[0]}static from(t,n=new Uint32Array(2)){return rr.fromString(typeof t=="string"?t:t.toString(),n)}static fromNumber(t,n=new Uint32Array(2)){return rr.fromString(t.toString(),n)}static fromString(t,n=new Uint32Array(2)){const r=t.startsWith("-"),i=t.length,s=new rr(n);for(let o=r?1:0;o<i;){const a=Gf<i-o?Gf:i-o,l=new rr(new Uint32Array([Number.parseInt(t.slice(o,o+a),10),0])),c=new rr(new Uint32Array([AE[a],0]));s.times(c),s.plus(l),o+=a}return r?s.negate():s}static convertArray(t){const n=new Uint32Array(t.length*2);for(let r=-1,i=t.length;++r<i;)rr.from(t[r],new Uint32Array(n.buffer,n.byteOffset+2*r*4,2));return n}static multiply(t,n){return new rr(new Uint32Array(t.buffer)).times(n)}static add(t,n){return new rr(new Uint32Array(t.buffer)).plus(n)}}class ds{constructor(t){this.buffer=t}high(){return new rr(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2))}low(){return new rr(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset,2))}negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[2]=~this.buffer[2],this.buffer[3]=~this.buffer[3],this.buffer[0]==0&&++this.buffer[1],this.buffer[1]==0&&++this.buffer[2],this.buffer[2]==0&&++this.buffer[3],this}times(t){const n=new le(new Uint32Array([this.buffer[3],0])),r=new le(new Uint32Array([this.buffer[2],0])),i=new le(new Uint32Array([this.buffer[1],0])),s=new le(new Uint32Array([this.buffer[0],0])),o=new le(new Uint32Array([t.buffer[3],0])),a=new le(new Uint32Array([t.buffer[2],0])),l=new le(new Uint32Array([t.buffer[1],0])),c=new le(new Uint32Array([t.buffer[0],0]));let u=le.multiply(s,c);this.buffer[0]=u.low();const f=new le(new Uint32Array([u.high(),0]));return u=le.multiply(i,c),f.plus(u),u=le.multiply(s,l),f.plus(u),this.buffer[1]=f.low(),this.buffer[3]=f.lessThan(u)?1:0,this.buffer[2]=f.high(),new le(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2)).plus(le.multiply(r,c)).plus(le.multiply(i,l)).plus(le.multiply(s,a)),this.buffer[3]+=le.multiply(n,c).plus(le.multiply(r,l)).plus(le.multiply(i,a)).plus(le.multiply(s,o)).low(),this}plus(t){const n=new Uint32Array(4);return n[3]=this.buffer[3]+t.buffer[3]>>>0,n[2]=this.buffer[2]+t.buffer[2]>>>0,n[1]=this.buffer[1]+t.buffer[1]>>>0,n[0]=this.buffer[0]+t.buffer[0]>>>0,n[0]<this.buffer[0]>>>0&&++n[1],n[1]<this.buffer[1]>>>0&&++n[2],n[2]<this.buffer[2]>>>0&&++n[3],this.buffer[3]=n[3],this.buffer[2]=n[2],this.buffer[1]=n[1],this.buffer[0]=n[0],this}hex(){return`${Ru(this.buffer[3])} ${Ru(this.buffer[2])} ${Ru(this.buffer[1])} ${Ru(this.buffer[0])}`}static multiply(t,n){return new ds(new Uint32Array(t.buffer)).times(n)}static add(t,n){return new ds(new Uint32Array(t.buffer)).plus(n)}static from(t,n=new Uint32Array(4)){return ds.fromString(typeof t=="string"?t:t.toString(),n)}static fromNumber(t,n=new Uint32Array(4)){return ds.fromString(t.toString(),n)}static fromString(t,n=new Uint32Array(4)){const r=t.startsWith("-"),i=t.length,s=new ds(n);for(let o=r?1:0;o<i;){const a=Gf<i-o?Gf:i-o,l=new ds(new Uint32Array([Number.parseInt(t.slice(o,o+a),10),0,0,0])),c=new ds(new Uint32Array([AE[a],0,0,0]));s.times(c),s.plus(l),o+=a}return r?s.negate():s}static convertArray(t){const n=new Uint32Array(t.length*4);for(let r=-1,i=t.length;++r<i;)ds.from(t[r],new Uint32Array(n.buffer,n.byteOffset+4*4*r,4));return n}}class kP extends Ft{constructor(t,n,r,i,s=In.V5){super(),this.nodesIndex=-1,this.buffersIndex=-1,this.bytes=t,this.nodes=n,this.buffers=r,this.dictionaries=i,this.metadataVersion=s}visit(t){return super.visit(t instanceof Te?t.type:t)}visitNull(t,{length:n}=this.nextFieldNode()){return Ct({type:t,length:n})}visitBool(t,{length:n,nullCount:r}=this.nextFieldNode()){return Ct({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitInt(t,{length:n,nullCount:r}=this.nextFieldNode()){return Ct({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitFloat(t,{length:n,nullCount:r}=this.nextFieldNode()){return Ct({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitUtf8(t,{length:n,nullCount:r}=this.nextFieldNode()){return Ct({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),valueOffsets:this.readOffsets(t),data:this.readData(t)})}visitBinary(t,{length:n,nullCount:r}=this.nextFieldNode()){return Ct({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),valueOffsets:this.readOffsets(t),data:this.readData(t)})}visitFixedSizeBinary(t,{length:n,nullCount:r}=this.nextFieldNode()){return Ct({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitDate(t,{length:n,nullCount:r}=this.nextFieldNode()){return Ct({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitTimestamp(t,{length:n,nullCount:r}=this.nextFieldNode()){return Ct({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitTime(t,{length:n,nullCount:r}=this.nextFieldNode()){return Ct({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitDecimal(t,{length:n,nullCount:r}=this.nextFieldNode()){return Ct({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitList(t,{length:n,nullCount:r}=this.nextFieldNode()){return Ct({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),valueOffsets:this.readOffsets(t),child:this.visit(t.children[0])})}visitStruct(t,{length:n,nullCount:r}=this.nextFieldNode()){return Ct({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),children:this.visitMany(t.children)})}visitUnion(t,{length:n,nullCount:r}=this.nextFieldNode()){return this.metadataVersion<In.V5&&this.readNullBitmap(t,r),t.mode===cn.Sparse?this.visitSparseUnion(t,{length:n,nullCount:r}):this.visitDenseUnion(t,{length:n,nullCount:r})}visitDenseUnion(t,{length:n,nullCount:r}=this.nextFieldNode()){return Ct({type:t,length:n,nullCount:r,typeIds:this.readTypeIds(t),valueOffsets:this.readOffsets(t),children:this.visitMany(t.children)})}visitSparseUnion(t,{length:n,nullCount:r}=this.nextFieldNode()){return Ct({type:t,length:n,nullCount:r,typeIds:this.readTypeIds(t),children:this.visitMany(t.children)})}visitDictionary(t,{length:n,nullCount:r}=this.nextFieldNode()){return Ct({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t.indices),dictionary:this.readDictionary(t)})}visitInterval(t,{length:n,nullCount:r}=this.nextFieldNode()){return Ct({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitDuration(t,{length:n,nullCount:r}=this.nextFieldNode()){return Ct({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitFixedSizeList(t,{length:n,nullCount:r}=this.nextFieldNode()){return Ct({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),child:this.visit(t.children[0])})}visitMap(t,{length:n,nullCount:r}=this.nextFieldNode()){return Ct({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),valueOffsets:this.readOffsets(t),child:this.visit(t.children[0])})}nextFieldNode(){return this.nodes[++this.nodesIndex]}nextBufferRange(){return this.buffers[++this.buffersIndex]}readNullBitmap(t,n,r=this.nextBufferRange()){return n>0&&this.readData(t,r)||new Uint8Array(0)}readOffsets(t,n){return this.readData(t,n)}readTypeIds(t,n){return this.readData(t,n)}readData(t,{length:n,offset:r}=this.nextBufferRange()){return this.bytes.subarray(r,r+n)}readDictionary(t){return this.dictionaries.get(t.id)}}class Hmt extends kP{constructor(t,n,r,i,s){super(new Uint8Array(0),n,r,i,s),this.sources=t}readNullBitmap(t,n,{offset:r}=this.nextBufferRange()){return n<=0?new Uint8Array(0):eb(this.sources[r])}readOffsets(t,{offset:n}=this.nextBufferRange()){return ue(Uint8Array,ue(Int32Array,this.sources[n]))}readTypeIds(t,{offset:n}=this.nextBufferRange()){return ue(Uint8Array,ue(t.ArrayType,this.sources[n]))}readData(t,{offset:n}=this.nextBufferRange()){const{sources:r}=this;return at.isTimestamp(t)||(at.isInt(t)||at.isTime(t))&&t.bitWidth===64||at.isDuration(t)||at.isDate(t)&&t.unit===zr.MILLISECOND?ue(Uint8Array,rr.convertArray(r[n])):at.isDecimal(t)?ue(Uint8Array,ds.convertArray(r[n])):at.isBinary(t)||at.isFixedSizeBinary(t)?Gmt(r[n]):at.isBool(t)?eb(r[n]):at.isUtf8(t)?hE(r[n].join("")):ue(Uint8Array,ue(t.ArrayType,r[n].map(i=>+i)))}}function Gmt(e){const t=e.join(""),n=new Uint8Array(t.length/2);for(let r=0;r<t.length;r+=2)n[r>>1]=Number.parseInt(t.slice(r,r+2),16);return n}class mt extends Ft{compareSchemas(t,n){return t===n||n instanceof t.constructor&&this.compareManyFields(t.fields,n.fields)}compareManyFields(t,n){return t===n||Array.isArray(t)&&Array.isArray(n)&&t.length===n.length&&t.every((r,i)=>this.compareFields(r,n[i]))}compareFields(t,n){return t===n||n instanceof t.constructor&&t.name===n.name&&t.nullable===n.nullable&&this.visit(t.type,n.type)}}function er(e,t){return t instanceof e.constructor}function Fy(e,t){return e===t||er(e,t)}function Qo(e,t){return e===t||er(e,t)&&e.bitWidth===t.bitWidth&&e.isSigned===t.isSigned}function Hv(e,t){return e===t||er(e,t)&&e.precision===t.precision}function Xmt(e,t){return e===t||er(e,t)&&e.byteWidth===t.byteWidth}function ME(e,t){return e===t||er(e,t)&&e.unit===t.unit}function By(e,t){return e===t||er(e,t)&&e.unit===t.unit&&e.timezone===t.timezone}function Ry(e,t){return e===t||er(e,t)&&e.unit===t.unit&&e.bitWidth===t.bitWidth}function Qmt(e,t){return e===t||er(e,t)&&e.children.length===t.children.length&&Za.compareManyFields(e.children,t.children)}function Kmt(e,t){return e===t||er(e,t)&&e.children.length===t.children.length&&Za.compareManyFields(e.children,t.children)}function $E(e,t){return e===t||er(e,t)&&e.mode===t.mode&&e.typeIds.every((n,r)=>n===t.typeIds[r])&&Za.compareManyFields(e.children,t.children)}function Zmt(e,t){return e===t||er(e,t)&&e.id===t.id&&e.isOrdered===t.isOrdered&&Za.visit(e.indices,t.indices)&&Za.visit(e.dictionary,t.dictionary)}function NE(e,t){return e===t||er(e,t)&&e.unit===t.unit}function Ly(e,t){return e===t||er(e,t)&&e.unit===t.unit}function Jmt(e,t){return e===t||er(e,t)&&e.listSize===t.listSize&&e.children.length===t.children.length&&Za.compareManyFields(e.children,t.children)}function tgt(e,t){return e===t||er(e,t)&&e.keysSorted===t.keysSorted&&e.children.length===t.children.length&&Za.compareManyFields(e.children,t.children)}mt.prototype.visitNull=Fy;mt.prototype.visitBool=Fy;mt.prototype.visitInt=Qo;mt.prototype.visitInt8=Qo;mt.prototype.visitInt16=Qo;mt.prototype.visitInt32=Qo;mt.prototype.visitInt64=Qo;mt.prototype.visitUint8=Qo;mt.prototype.visitUint16=Qo;mt.prototype.visitUint32=Qo;mt.prototype.visitUint64=Qo;mt.prototype.visitFloat=Hv;mt.prototype.visitFloat16=Hv;mt.prototype.visitFloat32=Hv;mt.prototype.visitFloat64=Hv;mt.prototype.visitUtf8=Fy;mt.prototype.visitBinary=Fy;mt.prototype.visitFixedSizeBinary=Xmt;mt.prototype.visitDate=ME;mt.prototype.visitDateDay=ME;mt.prototype.visitDateMillisecond=ME;mt.prototype.visitTimestamp=By;mt.prototype.visitTimestampSecond=By;mt.prototype.visitTimestampMillisecond=By;mt.prototype.visitTimestampMicrosecond=By;mt.prototype.visitTimestampNanosecond=By;mt.prototype.visitTime=Ry;mt.prototype.visitTimeSecond=Ry;mt.prototype.visitTimeMillisecond=Ry;mt.prototype.visitTimeMicrosecond=Ry;mt.prototype.visitTimeNanosecond=Ry;mt.prototype.visitDecimal=Fy;mt.prototype.visitList=Qmt;mt.prototype.visitStruct=Kmt;mt.prototype.visitUnion=$E;mt.prototype.visitDenseUnion=$E;mt.prototype.visitSparseUnion=$E;mt.prototype.visitDictionary=Zmt;mt.prototype.visitInterval=NE;mt.prototype.visitIntervalDayTime=NE;mt.prototype.visitIntervalYearMonth=NE;mt.prototype.visitDuration=Ly;mt.prototype.visitDurationSecond=Ly;mt.prototype.visitDurationMillisecond=Ly;mt.prototype.visitDurationMicrosecond=Ly;mt.prototype.visitDurationNanosecond=Ly;mt.prototype.visitFixedSizeList=Jmt;mt.prototype.visitMap=tgt;const Za=new mt;function $x(e,t){return Za.compareSchemas(e,t)}function O_(e,t){return egt(e,t.map(n=>n.data.concat()))}function egt(e,t){const n=[...e.fields],r=[],i={numBatches:t.reduce((f,d)=>Math.max(f,d.length),0)};let s=0,o=0,a=-1;const l=t.length;let c,u=[];for(;i.numBatches-- >0;){for(o=Number.POSITIVE_INFINITY,a=-1;++a<l;)u[a]=c=t[a].shift(),o=Math.min(o,c?c.length:o);Number.isFinite(o)&&(u=ngt(n,o,u,t,i),o>0&&(r[s++]=Ct({type:new Hn(n),length:o,nullCount:0,children:u.slice()})))}return[e=e.assign(n),r.map(f=>new ar(e,f))]}function ngt(e,t,n,r,i){var s;const o=(t+63&-64)>>3;for(let a=-1,l=r.length;++a<l;){const c=n[a],u=c==null?void 0:c.length;if(u>=t)u===t?n[a]=c:(n[a]=c.slice(0,t),i.numBatches=Math.max(i.numBatches,r[a].unshift(c.slice(t,u-t))));else{const f=e[a];e[a]=f.clone({nullable:!0}),n[a]=(s=c==null?void 0:c._changeLengthAndBackfillNullBitmap(t))!==null&&s!==void 0?s:Ct({type:f.type,length:t,nullCount:t,nullBitmap:new Uint8Array(o)})}}return n}var DP;class Bn{constructor(...t){var n,r;if(t.length===0)return this.batches=[],this.schema=new oe([]),this._offsets=[0],this;let i,s;t[0]instanceof oe&&(i=t.shift()),t.at(-1)instanceof Uint32Array&&(s=t.pop());const o=l=>{if(l){if(l instanceof ar)return[l];if(l instanceof Bn)return l.batches;if(l instanceof pe){if(l.type instanceof Hn)return[new ar(new oe(l.type.children),l)]}else{if(Array.isArray(l))return l.flatMap(c=>o(c));if(typeof l[Symbol.iterator]=="function")return[...l].flatMap(c=>o(c));if(typeof l=="object"){const c=Object.keys(l),u=c.map(h=>new se([l[h]])),f=new oe(c.map((h,p)=>new Te(String(h),u[p].type))),[,d]=O_(f,u);return d.length===0?[new ar(l)]:d}}}return[]},a=t.flatMap(l=>o(l));if(i=(r=i??((n=a[0])===null||n===void 0?void 0:n.schema))!==null&&r!==void 0?r:new oe([]),!(i instanceof oe))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const l of a){if(!(l instanceof ar))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!$x(i,l.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=i,this.batches=a,this._offsets=s??wP(this.data)}get data(){return this.batches.map(({data:t})=>t)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((t,n)=>t+n.length,0)}get nullCount(){return this._nullCount===-1&&(this._nullCount=vP(this.data)),this._nullCount}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}getByteLength(t){return 0}[Symbol.iterator](){return this.batches.length>0?TE.visit(new se(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(`,
  `)}
]`}concat(...t){const n=this.schema,r=this.data.concat(t.flatMap(({data:i})=>i));return new Bn(n,r.map(i=>new ar(n,i)))}slice(t,n){const r=this.schema;[t,n]=gP({length:this.numRows},t,n);const i=_P(this.data,this._offsets,t,n);return new Bn(r,i.map(s=>new ar(r,s)))}getChild(t){return this.getChildAt(this.schema.fields.findIndex(n=>n.name===t))}getChildAt(t){if(t>-1&&t<this.schema.fields.length){const n=this.data.map(r=>r.children[t]);if(n.length===0){const{type:r}=this.schema.fields[t],i=Ct({type:r,length:0,nullCount:0});n.push(i._changeLengthAndBackfillNullBitmap(this.numRows))}return new se(n)}return null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=[...this.batches];if(t>-1&&t<this.numCols){n||(n=new se([Ct({type:new Ga,length:this.numRows})]));const s=r.fields.slice(),o=s[t].clone({type:n.type}),a=this.schema.fields.map((l,c)=>this.getChildAt(c));[s[t],a[t]]=[o,n],[r,i]=O_(r,a)}return new Bn(r,i)}select(t){const n=this.schema.fields.reduce((r,i,s)=>r.set(i.name,s),new Map);return this.selectAt(t.map(r=>n.get(r)).filter(r=>r>-1))}selectAt(t){const n=this.schema.selectAt(t),r=this.batches.map(i=>i.selectAt(t));return new Bn(n,r)}assign(t){const n=this.schema.fields,[r,i]=t.schema.fields.reduce((a,l,c)=>{const[u,f]=a,d=n.findIndex(h=>h.name===l.name);return~d?f[d]=c:u.push(c),a},[[],[]]),s=this.schema.assign(t.schema),o=[...n.map((a,l)=>[l,i[l]]).map(([a,l])=>l===void 0?this.getChildAt(a):t.getChildAt(l)),...r.map(a=>t.getChildAt(a))].filter(Boolean);return new Bn(...O_(s,o))}}DP=Symbol.toStringTag;Bn[DP]=(e=>(e.schema=null,e.batches=[],e._offsets=new Uint32Array([0]),e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,e.isValid=cf(IE),e.get=cf(Ir.getVisitFn(k.Struct)),e.set=SP(wi.getVisitFn(k.Struct)),e.indexOf=xP(nb.getVisitFn(k.Struct)),e.getByteLength=cf(zs.getVisitFn(k.Struct)),"Table"))(Bn.prototype);var OP;let ar=class hh{constructor(...t){switch(t.length){case 2:{if([this.schema]=t,!(this.schema instanceof oe))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=Ct({nullCount:0,type:new Hn(this.schema.fields),children:this.schema.fields.map(n=>Ct({type:n.type,nullCount:0}))})]=t,!(this.data instanceof pe))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=qN(this.schema,this.data.children);break}case 1:{const[n]=t,{fields:r,children:i,length:s}=Object.keys(n).reduce((l,c,u)=>(l.children[u]=n[c],l.length=Math.max(l.length,n[c].length),l.fields[u]=Te.new({name:c,type:n[c].type,nullable:!0}),l),{length:0,fields:new Array,children:new Array}),o=new oe(r),a=Ct({type:new Hn(r),length:s,children:i,nullCount:0});[this.schema,this.data]=qN(o,a.children,s);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=FP(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(t){return this.data.getValid(t)}get(t){return Ir.visit(this.data,t)}set(t,n){return wi.visit(this.data,t,n)}indexOf(t,n){return nb.visit(this.data,t,n)}getByteLength(t){return zs.visit(this.data,t)}[Symbol.iterator](){return TE.visit(new se([this.data]))}toArray(){return[...this]}concat(...t){return new Bn(this.schema,[this,...t])}slice(t,n){const[r]=new se([this.data]).slice(t,n).data;return new hh(this.schema,r)}getChild(t){var n;return this.getChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.schema.fields.length?new se([this.data.children[t]]):null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=this.data;if(t>-1&&t<this.numCols){n||(n=new se([Ct({type:new Ga,length:this.numRows})]));const s=r.fields.slice(),o=i.children.slice(),a=s[t].clone({type:n.type});[s[t],o[t]]=[a,n.data[0]],r=new oe(s,new Map(this.schema.metadata)),i=Ct({type:new Hn(s),children:o})}return new hh(r,i)}select(t){const n=this.schema.select(t),r=new Hn(n.fields),i=[];for(const s of t){const o=this.schema.fields.findIndex(a=>a.name===s);~o&&(i[o]=this.data.children[o])}return new hh(n,Ct({type:r,length:this.numRows,children:i}))}selectAt(t){const n=this.schema.selectAt(t),r=t.map(s=>this.data.children[s]).filter(Boolean),i=Ct({type:new Hn(n.fields),length:this.numRows,children:r});return new hh(n,i)}};OP=Symbol.toStringTag;ar[OP]=(e=>(e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(ar.prototype);function qN(e,t,n=t.reduce((r,i)=>Math.max(r,i.length),0)){var r;const i=[...e.fields],s=[...t],o=(n+63&-64)>>3;for(const[a,l]of e.fields.entries()){const c=t[a];(!c||c.length!==n)&&(i[a]=l.clone({nullable:!0}),s[a]=(r=c==null?void 0:c._changeLengthAndBackfillNullBitmap(n))!==null&&r!==void 0?r:Ct({type:l.type,length:n,nullCount:n,nullBitmap:new Uint8Array(o)}))}return[e.assign(i),Ct({type:new Hn(i),length:n,children:s})]}function FP(e,t,n=new Map){var r,i;if(((r=e==null?void 0:e.length)!==null&&r!==void 0?r:0)>0&&(e==null?void 0:e.length)===(t==null?void 0:t.length))for(let s=-1,o=e.length;++s<o;){const{type:a}=e[s],l=t[s];for(const c of[l,...((i=l==null?void 0:l.dictionary)===null||i===void 0?void 0:i.data)||[]])FP(a.children,c==null?void 0:c.children,n);if(at.isDictionary(a)){const{id:c}=a;if(!n.has(c))l!=null&&l.dictionary&&n.set(c,l.dictionary);else if(n.get(c)!==l.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}}return n}class kE extends ar{constructor(t){const n=t.fields.map(i=>Ct({type:i.type})),r=Ct({type:new Hn(t.fields),nullCount:0,children:n});super(t,r)}}var fb;(function(e){e[e.BUFFER=0]="BUFFER"})(fb||(fb={}));var db;(function(e){e[e.LZ4_FRAME=0]="LZ4_FRAME",e[e.ZSTD=1]="ZSTD"})(db||(db={}));class ua{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBodyCompression(t,n){return(n||new ua).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBodyCompression(t,n){return t.setPosition(t.position()+de),(n||new ua).__init(t.readInt32(t.position())+t.position(),t)}codec(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt8(this.bb_pos+t):db.LZ4_FRAME}method(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt8(this.bb_pos+t):fb.BUFFER}static startBodyCompression(t){t.startObject(2)}static addCodec(t,n){t.addFieldInt8(0,n,db.LZ4_FRAME)}static addMethod(t,n){t.addFieldInt8(1,n,fb.BUFFER)}static endBodyCompression(t){return t.endObject()}static createBodyCompression(t,n,r){return ua.startBodyCompression(t),ua.addCodec(t,n),ua.addMethod(t,r),ua.endBodyCompression(t)}}class BP{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(t,n,r){return t.prep(8,16),t.writeInt64(BigInt(r??0)),t.writeInt64(BigInt(n??0)),t.offset()}}let RP=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(t,n,r){return t.prep(8,16),t.writeInt64(BigInt(r??0)),t.writeInt64(BigInt(n??0)),t.offset()}},fo=class Nx{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsRecordBatch(t,n){return(n||new Nx).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsRecordBatch(t,n){return t.setPosition(t.position()+de),(n||new Nx).__init(t.readInt32(t.position())+t.position(),t)}length(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}nodes(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new RP).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}nodesLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}buffers(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new BP).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}buffersLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}compression(t){const n=this.bb.__offset(this.bb_pos,10);return n?(t||new ua).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}static startRecordBatch(t){t.startObject(4)}static addLength(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addNodes(t,n){t.addFieldOffset(1,n,0)}static startNodesVector(t,n){t.startVector(16,n,8)}static addBuffers(t,n){t.addFieldOffset(2,n,0)}static startBuffersVector(t,n){t.startVector(16,n,8)}static addCompression(t,n){t.addFieldOffset(3,n,0)}static endRecordBatch(t){return t.endObject()}},hu=class kx{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryBatch(t,n){return(n||new kx).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryBatch(t,n){return t.setPosition(t.position()+de),(n||new kx).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}data(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new fo).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isDelta(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startDictionaryBatch(t){t.startObject(3)}static addId(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addData(t,n){t.addFieldOffset(1,n,0)}static addIsDelta(t,n){t.addFieldInt8(2,+n,0)}static endDictionaryBatch(t){return t.endObject()}};var hb;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(hb||(hb={}));let ea=class as{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMessage(t,n){return(n||new as).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMessage(t,n){return t.setPosition(t.position()+de),(n||new as).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):qf.V1}headerType(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):hb.NONE}header(t){const n=this.bb.__offset(this.bb_pos,8);return n?this.bb.__union(t,this.bb_pos+n):null}bodyLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new an).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startMessage(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,qf.V1)}static addHeaderType(t,n){t.addFieldInt8(1,n,hb.NONE)}static addHeader(t,n){t.addFieldOffset(2,n,0)}static addBodyLength(t,n){t.addFieldInt64(3,n,BigInt("0"))}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endMessage(t){return t.endObject()}static finishMessageBuffer(t,n){t.finish(n)}static finishSizePrefixedMessageBuffer(t,n){t.finish(n,void 0,!0)}static createMessage(t,n,r,i,s,o){return as.startMessage(t),as.addVersion(t,n),as.addHeaderType(t,r),as.addHeader(t,i),as.addBodyLength(t,s),as.addCustomMetadata(t,o),as.endMessage(t)}};class rgt extends Ft{visit(t,n){return t==null||n==null?void 0:super.visit(t,n)}visitNull(t,n){return Ql.startNull(n),Ql.endNull(n)}visitInt(t,n){return $r.startInt(n),$r.addBitWidth(n,t.bitWidth),$r.addIsSigned(n,t.isSigned),$r.endInt(n)}visitFloat(t,n){return Is.startFloatingPoint(n),Is.addPrecision(n,t.precision),Is.endFloatingPoint(n)}visitBinary(t,n){return Hl.startBinary(n),Hl.endBinary(n)}visitBool(t,n){return Gl.startBool(n),Gl.endBool(n)}visitUtf8(t,n){return Zl.startUtf8(n),Zl.endUtf8(n)}visitDecimal(t,n){return ir.startDecimal(n),ir.addScale(n,t.scale),ir.addPrecision(n,t.precision),ir.addBitWidth(n,t.bitWidth),ir.endDecimal(n)}visitDate(t,n){return vm.startDate(n),vm.addUnit(n,t.unit),vm.endDate(n)}visitTime(t,n){return ei.startTime(n),ei.addUnit(n,t.unit),ei.addBitWidth(n,t.bitWidth),ei.endTime(n)}visitTimestamp(t,n){const r=t.timezone&&n.createString(t.timezone)||void 0;return ni.startTimestamp(n),ni.addUnit(n,t.unit),r!==void 0&&ni.addTimezone(n,r),ni.endTimestamp(n)}visitInterval(t,n){return Ts.startInterval(n),Ts.addUnit(n,t.unit),Ts.endInterval(n)}visitDuration(t,n){return _s.startDuration(n),_s.addUnit(n,t.unit),_s.endDuration(n)}visitList(t,n){return Xl.startList(n),Xl.endList(n)}visitStruct(t,n){return Kl.startStruct_(n),Kl.endStruct_(n)}visitUnion(t,n){or.startTypeIdsVector(n,t.typeIds.length);const r=or.createTypeIdsVector(n,t.typeIds);return or.startUnion(n),or.addMode(n,t.mode),or.addTypeIds(n,r),or.endUnion(n)}visitDictionary(t,n){const r=this.visit(t.indices,n);return go.startDictionaryEncoding(n),go.addId(n,BigInt(t.id)),go.addIsOrdered(n,t.isOrdered),r!==void 0&&go.addIndexType(n,r),go.endDictionaryEncoding(n)}visitFixedSizeBinary(t,n){return Ss.startFixedSizeBinary(n),Ss.addByteWidth(n,t.byteWidth),Ss.endFixedSizeBinary(n)}visitFixedSizeList(t,n){return xs.startFixedSizeList(n),xs.addListSize(n,t.listSize),xs.endFixedSizeList(n)}visitMap(t,n){return wm.startMap(n),wm.addKeysSorted(n,t.keysSorted),wm.endMap(n)}}const F_=new rgt;function igt(e,t=new Map){return new oe(ogt(e,t),xm(e.metadata),t)}function LP(e){return new jr(e.count,CP(e.columns),UP(e.columns))}function sgt(e){return new js(LP(e.data),e.id,e.isDelta)}function ogt(e,t){return(e.fields||[]).filter(Boolean).map(n=>Te.fromJSON(n,t))}function WN(e,t){return(e.children||[]).filter(Boolean).map(n=>Te.fromJSON(n,t))}function CP(e){return(e||[]).reduce((t,n)=>[...t,new Ja(n.count,agt(n.VALIDITY)),...CP(n.children)],[])}function UP(e,t=[]){for(let n=-1,r=(e||[]).length;++n<r;){const i=e[n];i.VALIDITY&&t.push(new Ns(t.length,i.VALIDITY.length)),i.TYPE_ID&&t.push(new Ns(t.length,i.TYPE_ID.length)),i.OFFSET&&t.push(new Ns(t.length,i.OFFSET.length)),i.DATA&&t.push(new Ns(t.length,i.DATA.length)),t=UP(i.children,t)}return t}function agt(e){return(e||[]).reduce((t,n)=>t+ +(n===0),0)}function lgt(e,t){let n,r,i,s,o,a;return!t||!(s=e.dictionary)?(o=GN(e,WN(e,t)),i=new Te(e.name,o,e.nullable,xm(e.metadata))):t.has(n=s.id)?(r=(r=s.indexType)?HN(r):new Op,a=new Yf(t.get(n),r,n,s.isOrdered),i=new Te(e.name,a,e.nullable,xm(e.metadata))):(r=(r=s.indexType)?HN(r):new Op,t.set(n,o=GN(e,WN(e,t))),a=new Yf(o,r,n,s.isOrdered),i=new Te(e.name,a,e.nullable,xm(e.metadata))),i||null}function xm(e=[]){return new Map(e.map(({key:t,value:n})=>[t,n]))}function HN(e){return new Xa(e.isSigned,e.bitWidth)}function GN(e,t){const n=e.type.name;switch(n){case"NONE":return new Ga;case"null":return new Ga;case"binary":return new z1;case"utf8":return new j1;case"bool":return new V1;case"list":return new X1((t||[])[0]);case"struct":return new Hn(t||[]);case"struct_":return new Hn(t||[])}switch(n){case"int":{const r=e.type;return new Xa(r.isSigned,r.bitWidth)}case"floatingpoint":{const r=e.type;return new Fp(rn[r.precision])}case"decimal":{const r=e.type;return new Y1(r.scale,r.precision,r.bitWidth)}case"date":{const r=e.type;return new q1(zr[r.unit])}case"time":{const r=e.type;return new Bp(rt[r.unit],r.bitWidth)}case"timestamp":{const r=e.type;return new W1(rt[r.unit],r.timezone)}case"interval":{const r=e.type;return new H1(mr[r.unit])}case"duration":{const r=e.type;return new G1(rt[r.unit])}case"union":{const r=e.type,[i,...s]=(r.mode+"").toLowerCase(),o=i.toUpperCase()+s.join("");return new Q1(cn[o],r.typeIds||[],t||[])}case"fixedsizebinary":{const r=e.type;return new K1(r.byteWidth)}case"fixedsizelist":{const r=e.type;return new Z1(r.listSize,(t||[])[0])}case"map":{const r=e.type;return new J1((t||[])[0],r.keysSorted)}}throw new Error(`Unrecognized type: "${n}"`)}var cgt=FO,ugt=If;class Gn{static fromJSON(t,n){const r=new Gn(0,In.V5,n);return r._createHeader=fgt(t,n),r}static decode(t){t=new ugt(Jt(t));const n=ea.getRootAsMessage(t),r=n.bodyLength(),i=n.version(),s=n.headerType(),o=new Gn(r,i,s);return o._createHeader=dgt(n,s),o}static encode(t){const n=new cgt;let r=-1;return t.isSchema()?r=oe.encode(n,t.header()):t.isRecordBatch()?r=jr.encode(n,t.header()):t.isDictionaryBatch()&&(r=js.encode(n,t.header())),ea.startMessage(n),ea.addVersion(n,In.V5),ea.addHeader(n,r),ea.addHeaderType(n,t.headerType),ea.addBodyLength(n,BigInt(t.bodyLength)),ea.finishMessageBuffer(n,ea.endMessage(n)),n.asUint8Array()}static from(t,n=0){if(t instanceof oe)return new Gn(0,In.V5,ie.Schema,t);if(t instanceof jr)return new Gn(n,In.V5,ie.RecordBatch,t);if(t instanceof js)return new Gn(n,In.V5,ie.DictionaryBatch,t);throw new Error(`Unrecognized Message header: ${t}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===ie.Schema}isRecordBatch(){return this.headerType===ie.RecordBatch}isDictionaryBatch(){return this.headerType===ie.DictionaryBatch}constructor(t,n,r,i){this._version=n,this._headerType=r,this.body=new Uint8Array(0),i&&(this._createHeader=()=>i),this._bodyLength=Xi(t)}}class jr{get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}constructor(t,n,r){this._nodes=n,this._buffers=r,this._length=Xi(t)}}class js{get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}constructor(t,n,r=!1){this._data=t,this._isDelta=r,this._id=Xi(n)}}class Ns{constructor(t,n){this.offset=Xi(t),this.length=Xi(n)}}class Ja{constructor(t,n){this.length=Xi(t),this.nullCount=Xi(n)}}function fgt(e,t){return()=>{switch(t){case ie.Schema:return oe.fromJSON(e);case ie.RecordBatch:return jr.fromJSON(e);case ie.DictionaryBatch:return js.fromJSON(e)}throw new Error(`Unrecognized Message type: { name: ${ie[t]}, type: ${t} }`)}}function dgt(e,t){return()=>{switch(t){case ie.Schema:return oe.decode(e.header(new fs),new Map,e.version());case ie.RecordBatch:return jr.decode(e.header(new fo),e.version());case ie.DictionaryBatch:return js.decode(e.header(new hu),e.version())}throw new Error(`Unrecognized Message type: { name: ${ie[t]}, type: ${t} }`)}}Te.encode=xgt;Te.decode=_gt;Te.fromJSON=lgt;oe.encode=Sgt;oe.decode=hgt;oe.fromJSON=igt;jr.encode=Igt;jr.decode=pgt;jr.fromJSON=LP;js.encode=Tgt;js.decode=ygt;js.fromJSON=sgt;Ja.encode=Egt;Ja.decode=ggt;Ns.encode=Agt;Ns.decode=mgt;function hgt(e,t=new Map,n=In.V5){const r=wgt(e,t);return new oe(r,Im(e),t,n)}function pgt(e,t=In.V5){if(e.compression()!==null)throw new Error("Record batch compression not implemented");return new jr(e.length(),bgt(e),vgt(e,t))}function ygt(e,t=In.V5){return new js(jr.decode(e.data(),t),e.id(),e.isDelta())}function mgt(e){return new Ns(e.offset(),e.length())}function ggt(e){return new Ja(e.length(),e.nullCount())}function bgt(e){const t=[];for(let n,r=-1,i=-1,s=e.nodesLength();++r<s;)(n=e.nodes(r))&&(t[++i]=Ja.decode(n));return t}function vgt(e,t){const n=[];for(let r,i=-1,s=-1,o=e.buffersLength();++i<o;)(r=e.buffers(i))&&(t<In.V4&&(r.bb_pos+=8*(i+1)),n[++s]=Ns.decode(r));return n}function wgt(e,t){const n=[];for(let r,i=-1,s=-1,o=e.fieldsLength();++i<o;)(r=e.fields(i))&&(n[++s]=Te.decode(r,t));return n}function XN(e,t){const n=[];for(let r,i=-1,s=-1,o=e.childrenLength();++i<o;)(r=e.children(i))&&(n[++s]=Te.decode(r,t));return n}function _gt(e,t){let n,r,i,s,o,a;return!t||!(a=e.dictionary())?(i=KN(e,XN(e,t)),r=new Te(e.name(),i,e.nullable(),Im(e))):t.has(n=Xi(a.id()))?(s=(s=a.indexType())?QN(s):new Op,o=new Yf(t.get(n),s,n,a.isOrdered()),r=new Te(e.name(),o,e.nullable(),Im(e))):(s=(s=a.indexType())?QN(s):new Op,t.set(n,i=KN(e,XN(e,t))),o=new Yf(i,s,n,a.isOrdered()),r=new Te(e.name(),o,e.nullable(),Im(e))),r||null}function Im(e){const t=new Map;if(e)for(let n,r,i=-1,s=Math.trunc(e.customMetadataLength());++i<s;)(n=e.customMetadata(i))&&(r=n.key())!=null&&t.set(r,n.value());return t}function QN(e){return new Xa(e.isSigned(),e.bitWidth())}function KN(e,t){const n=e.typeType();switch(n){case Ae.NONE:return new Ga;case Ae.Null:return new Ga;case Ae.Binary:return new z1;case Ae.Utf8:return new j1;case Ae.Bool:return new V1;case Ae.List:return new X1((t||[])[0]);case Ae.Struct_:return new Hn(t||[])}switch(n){case Ae.Int:{const r=e.type(new $r);return new Xa(r.isSigned(),r.bitWidth())}case Ae.FloatingPoint:{const r=e.type(new Is);return new Fp(r.precision())}case Ae.Decimal:{const r=e.type(new ir);return new Y1(r.scale(),r.precision(),r.bitWidth())}case Ae.Date:{const r=e.type(new vm);return new q1(r.unit())}case Ae.Time:{const r=e.type(new ei);return new Bp(r.unit(),r.bitWidth())}case Ae.Timestamp:{const r=e.type(new ni);return new W1(r.unit(),r.timezone())}case Ae.Interval:{const r=e.type(new Ts);return new H1(r.unit())}case Ae.Duration:{const r=e.type(new _s);return new G1(r.unit())}case Ae.Union:{const r=e.type(new or);return new Q1(r.mode(),r.typeIdsArray()||[],t||[])}case Ae.FixedSizeBinary:{const r=e.type(new Ss);return new K1(r.byteWidth())}case Ae.FixedSizeList:{const r=e.type(new xs);return new Z1(r.listSize(),(t||[])[0])}case Ae.Map:{const r=e.type(new wm);return new J1((t||[])[0],r.keysSorted())}}throw new Error(`Unrecognized type: "${Ae[n]}" (${n})`)}function Sgt(e,t){const n=t.fields.map(s=>Te.encode(e,s));fs.startFieldsVector(e,n.length);const r=fs.createFieldsVector(e,n),i=t.metadata&&t.metadata.size>0?fs.createCustomMetadataVector(e,[...t.metadata].map(([s,o])=>{const a=e.createString(`${s}`),l=e.createString(`${o}`);return an.startKeyValue(e),an.addKey(e,a),an.addValue(e,l),an.endKeyValue(e)})):-1;return fs.startSchema(e),fs.addFields(e,r),fs.addEndianness(e,Mgt?Wf.Little:Wf.Big),i!==-1&&fs.addCustomMetadata(e,i),fs.endSchema(e)}function xgt(e,t){let n=-1,r=-1,i=-1;const s=t.type;let o=t.typeId;at.isDictionary(s)?(o=s.dictionary.typeId,i=F_.visit(s,e),r=F_.visit(s.dictionary,e)):r=F_.visit(s,e);const a=(s.children||[]).map(u=>Te.encode(e,u)),l=Qr.createChildrenVector(e,a),c=t.metadata&&t.metadata.size>0?Qr.createCustomMetadataVector(e,[...t.metadata].map(([u,f])=>{const d=e.createString(`${u}`),h=e.createString(`${f}`);return an.startKeyValue(e),an.addKey(e,d),an.addValue(e,h),an.endKeyValue(e)})):-1;return t.name&&(n=e.createString(t.name)),Qr.startField(e),Qr.addType(e,r),Qr.addTypeType(e,o),Qr.addChildren(e,l),Qr.addNullable(e,!!t.nullable),n!==-1&&Qr.addName(e,n),i!==-1&&Qr.addDictionary(e,i),c!==-1&&Qr.addCustomMetadata(e,c),Qr.endField(e)}function Igt(e,t){const n=t.nodes||[],r=t.buffers||[];fo.startNodesVector(e,n.length);for(const o of n.slice().reverse())Ja.encode(e,o);const i=e.endVector();fo.startBuffersVector(e,r.length);for(const o of r.slice().reverse())Ns.encode(e,o);const s=e.endVector();return fo.startRecordBatch(e),fo.addLength(e,BigInt(t.length)),fo.addNodes(e,i),fo.addBuffers(e,s),fo.endRecordBatch(e)}function Tgt(e,t){const n=jr.encode(e,t.data);return hu.startDictionaryBatch(e),hu.addId(e,BigInt(t.id)),hu.addIsDelta(e,t.isDelta),hu.addData(e,n),hu.endDictionaryBatch(e)}function Egt(e,t){return RP.createFieldNode(e,BigInt(t.length),BigInt(t.nullCount))}function Agt(e,t){return BP.createBuffer(e,BigInt(t.offset),BigInt(t.length))}const Mgt=(()=>{const e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),new Int16Array(e)[0]===256})(),DE=e=>`Expected ${ie[e]} Message in stream, but was null or length 0.`,OE=e=>`Header pointer of flatbuffer-encoded ${ie[e]} Message is null or length 0.`,PP=(e,t)=>`Expected to read ${e} metadata bytes, but only read ${t}.`,zP=(e,t)=>`Expected to read ${e} bytes for message body, but only read ${t}.`;class jP{constructor(t){this.source=t instanceof cb?t:new cb(t)}[Symbol.iterator](){return this}next(){let t;return(t=this.readMetadataLength()).done||t.value===-1&&(t=this.readMetadataLength()).done||(t=this.readMetadata(t.value)).done?Ue:t}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}readMessage(t){let n;if((n=this.next()).done)return null;if(t!=null&&n.value.headerType!==t)throw new Error(DE(t));return n.value}readMessageBody(t){if(t<=0)return new Uint8Array(0);const n=Jt(this.source.read(t));if(n.byteLength<t)throw new Error(zP(t,n.byteLength));return n.byteOffset%8===0&&n.byteOffset+n.byteLength<=n.buffer.byteLength?n:n.slice()}readSchema(t=!1){const n=ie.Schema,r=this.readMessage(n),i=r==null?void 0:r.header();if(t&&!i)throw new Error(OE(n));return i}readMetadataLength(){const t=this.source.read(Gv),n=t&&new If(t),r=(n==null?void 0:n.readInt32(0))||0;return{done:r===0,value:r}}readMetadata(t){const n=this.source.read(t);if(!n)return Ue;if(n.byteLength<t)throw new Error(PP(t,n.byteLength));return{done:!1,value:Gn.decode(n)}}}class $gt{constructor(t,n){this.source=t instanceof Hf?t:n9(t)?new ub(t,n):new Hf(t)}[Symbol.asyncIterator](){return this}next(){return W(this,void 0,void 0,function*(){let t;return(t=yield this.readMetadataLength()).done||t.value===-1&&(t=yield this.readMetadataLength()).done||(t=yield this.readMetadata(t.value)).done?Ue:t})}throw(t){return W(this,void 0,void 0,function*(){return yield this.source.throw(t)})}return(t){return W(this,void 0,void 0,function*(){return yield this.source.return(t)})}readMessage(t){return W(this,void 0,void 0,function*(){let n;if((n=yield this.next()).done)return null;if(t!=null&&n.value.headerType!==t)throw new Error(DE(t));return n.value})}readMessageBody(t){return W(this,void 0,void 0,function*(){if(t<=0)return new Uint8Array(0);const n=Jt(yield this.source.read(t));if(n.byteLength<t)throw new Error(zP(t,n.byteLength));return n.byteOffset%8===0&&n.byteOffset+n.byteLength<=n.buffer.byteLength?n:n.slice()})}readSchema(t=!1){return W(this,void 0,void 0,function*(){const n=ie.Schema,r=yield this.readMessage(n),i=r==null?void 0:r.header();if(t&&!i)throw new Error(OE(n));return i})}readMetadataLength(){return W(this,void 0,void 0,function*(){const t=yield this.source.read(Gv),n=t&&new If(t),r=(n==null?void 0:n.readInt32(0))||0;return{done:r===0,value:r}})}readMetadata(t){return W(this,void 0,void 0,function*(){const n=yield this.source.read(t);if(!n)return Ue;if(n.byteLength<t)throw new Error(PP(t,n.byteLength));return{done:!1,value:Gn.decode(n)}})}}class Ngt extends jP{constructor(t){super(new Uint8Array(0)),this._schema=!1,this._body=[],this._batchIndex=0,this._dictionaryIndex=0,this._json=t instanceof VN?t:new VN(t)}next(){const{_json:t}=this;if(!this._schema)return this._schema=!0,{done:!1,value:Gn.fromJSON(t.schema,ie.Schema)};if(this._dictionaryIndex<t.dictionaries.length){const n=t.dictionaries[this._dictionaryIndex++];return this._body=n.data.columns,{done:!1,value:Gn.fromJSON(n,ie.DictionaryBatch)}}if(this._batchIndex<t.batches.length){const n=t.batches[this._batchIndex++];return this._body=n.columns,{done:!1,value:Gn.fromJSON(n,ie.RecordBatch)}}return this._body=[],Ue}readMessageBody(t){return n(this._body);function n(r){return(r||[]).reduce((i,s)=>[...i,...s.VALIDITY&&[s.VALIDITY]||[],...s.TYPE_ID&&[s.TYPE_ID]||[],...s.OFFSET&&[s.OFFSET]||[],...s.DATA&&[s.DATA]||[],...n(s.children)],[])}}readMessage(t){let n;if((n=this.next()).done)return null;if(t!=null&&n.value.headerType!==t)throw new Error(DE(t));return n.value}readSchema(){const t=ie.Schema,n=this.readMessage(t),r=n==null?void 0:n.header();if(!n||!r)throw new Error(OE(t));return r}}const Gv=4,Dx="ARROW1",Lp=new Uint8Array(Dx.length);for(let e=0;e<Dx.length;e+=1)Lp[e]=Dx.codePointAt(e);function FE(e,t=0){for(let n=-1,r=Lp.length;++n<r;)if(Lp[n]!==e[t+n])return!1;return!0}const Cy=Lp.length,VP=Cy+Gv,kgt=Cy*2+Gv;class pi extends EE{constructor(t){super(),this._impl=t}get closed(){return this._impl.closed}get schema(){return this._impl.schema}get autoDestroy(){return this._impl.autoDestroy}get dictionaries(){return this._impl.dictionaries}get numDictionaries(){return this._impl.numDictionaries}get numRecordBatches(){return this._impl.numRecordBatches}get footer(){return this._impl.isFile()?this._impl.footer:null}isSync(){return this._impl.isSync()}isAsync(){return this._impl.isAsync()}isFile(){return this._impl.isFile()}isStream(){return this._impl.isStream()}next(){return this._impl.next()}throw(t){return this._impl.throw(t)}return(t){return this._impl.return(t)}cancel(){return this._impl.cancel()}reset(t){return this._impl.reset(t),this._DOMStream=void 0,this._nodeStream=void 0,this}open(t){const n=this._impl.open(t);return $c(n)?n.then(()=>this):this}readRecordBatch(t){return this._impl.isFile()?this._impl.readRecordBatch(t):null}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}toDOMStream(){return Zr.toDOMStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this})}toNodeStream(){return Zr.toNodeStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this},{objectMode:!0})}static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,n){throw new Error('"throughDOM" not available in this environment')}static from(t){return t instanceof pi?t:Ix(t)?Bgt(t):n9(t)?Cgt(t):$c(t)?W(this,void 0,void 0,function*(){return yield pi.from(yield t)}):r9(t)||pE(t)||i9(t)||vd(t)?Lgt(new Hf(t)):Rgt(new cb(t))}static readAll(t){return t instanceof pi?t.isSync()?ZN(t):JN(t):Ix(t)||ArrayBuffer.isView(t)||Oy(t)||e9(t)?ZN(t):JN(t)}}class pb extends pi{constructor(t){super(t),this._impl=t}readAll(){return[...this]}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return nn(this,arguments,function*(){yield K(yield*$a(Br(this[Symbol.iterator]())))})}}class yb extends pi{constructor(t){super(t),this._impl=t}readAll(){var t,n,r,i;return W(this,void 0,void 0,function*(){const s=new Array;try{for(var o=!0,a=Br(this),l;l=yield a.next(),t=l.done,!t;o=!0){i=l.value,o=!1;const c=i;s.push(c)}}catch(c){n={error:c}}finally{try{!o&&!t&&(r=a.return)&&(yield r.call(a))}finally{if(n)throw n.error}}return s})}[Symbol.iterator](){throw new Error("AsyncRecordBatchStreamReader is not Iterable")}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}}class YP extends pb{constructor(t){super(t),this._impl=t}}class Dgt extends yb{constructor(t){super(t),this._impl=t}}class qP{get numDictionaries(){return this._dictionaryIndex}get numRecordBatches(){return this._recordBatchIndex}constructor(t=new Map){this.closed=!1,this.autoDestroy=!0,this._dictionaryIndex=0,this._recordBatchIndex=0,this.dictionaries=t}isSync(){return!1}isAsync(){return!1}isFile(){return!1}isStream(){return!1}reset(t){return this._dictionaryIndex=0,this._recordBatchIndex=0,this.schema=t,this.dictionaries=new Map,this}_loadRecordBatch(t,n){const r=this._loadVectors(t,n,this.schema.fields),i=Ct({type:new Hn(this.schema.fields),length:t.length,children:r});return new ar(this.schema,i)}_loadDictionaryBatch(t,n){const{id:r,isDelta:i}=t,{dictionaries:s,schema:o}=this,a=s.get(r);if(i||!a){const l=o.dictionaries.get(r),c=this._loadVectors(t.data,n,[l]);return(a&&i?a.concat(new se(c)):new se(c)).memoize()}return a.memoize()}_loadVectors(t,n,r){return new kP(n,t.nodes,t.buffers,this.dictionaries,this.schema.metadataVersion).visitMany(r)}}class mb extends qP{constructor(t,n){super(n),this._reader=Ix(t)?new Ngt(this._handle=t):new jP(this._handle=t)}isSync(){return!0}isStream(){return!0}[Symbol.iterator](){return this}cancel(){!this.closed&&(this.closed=!0)&&(this.reset()._reader.return(),this._reader=null,this.dictionaries=null)}open(t){return this.closed||(this.autoDestroy=HP(this,t),this.schema||(this.schema=this._reader.readSchema())||this.cancel()),this}throw(t){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.throw(t):Ue}return(t){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.return(t):Ue}next(){if(this.closed)return Ue;let t;const{_reader:n}=this;for(;t=this._readNextMessageAndValidate();)if(t.isSchema())this.reset(t.header());else if(t.isRecordBatch()){this._recordBatchIndex++;const r=t.header(),i=n.readMessageBody(t.bodyLength);return{done:!1,value:this._loadRecordBatch(r,i)}}else if(t.isDictionaryBatch()){this._dictionaryIndex++;const r=t.header(),i=n.readMessageBody(t.bodyLength),s=this._loadDictionaryBatch(r,i);this.dictionaries.set(r.id,s)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new kE(this.schema)}):this.return()}_readNextMessageAndValidate(t){return this._reader.readMessage(t)}}class gb extends qP{constructor(t,n){super(n),this._reader=new $gt(this._handle=t)}isAsync(){return!0}isStream(){return!0}[Symbol.asyncIterator](){return this}cancel(){return W(this,void 0,void 0,function*(){!this.closed&&(this.closed=!0)&&(yield this.reset()._reader.return(),this._reader=null,this.dictionaries=null)})}open(t){return W(this,void 0,void 0,function*(){return this.closed||(this.autoDestroy=HP(this,t),this.schema||(this.schema=yield this._reader.readSchema())||(yield this.cancel())),this})}throw(t){return W(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.throw(t):Ue})}return(t){return W(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.return(t):Ue})}next(){return W(this,void 0,void 0,function*(){if(this.closed)return Ue;let t;const{_reader:n}=this;for(;t=yield this._readNextMessageAndValidate();)if(t.isSchema())yield this.reset(t.header());else if(t.isRecordBatch()){this._recordBatchIndex++;const r=t.header(),i=yield n.readMessageBody(t.bodyLength);return{done:!1,value:this._loadRecordBatch(r,i)}}else if(t.isDictionaryBatch()){this._dictionaryIndex++;const r=t.header(),i=yield n.readMessageBody(t.bodyLength),s=this._loadDictionaryBatch(r,i);this.dictionaries.set(r.id,s)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new kE(this.schema)}):yield this.return()})}_readNextMessageAndValidate(t){return W(this,void 0,void 0,function*(){return yield this._reader.readMessage(t)})}}class WP extends mb{get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}constructor(t,n){super(t instanceof YN?t:new YN(t),n)}isSync(){return!0}isFile(){return!0}open(t){if(!this.closed&&!this._footer){this.schema=(this._footer=this._readFooter()).schema;for(const n of this._footer.dictionaryBatches())n&&this._readDictionaryBatch(this._dictionaryIndex++)}return super.open(t)}readRecordBatch(t){var n;if(this.closed)return null;this._footer||this.open();const r=(n=this._footer)===null||n===void 0?void 0:n.getRecordBatch(t);if(r&&this._handle.seek(r.offset)){const i=this._reader.readMessage(ie.RecordBatch);if(i!=null&&i.isRecordBatch()){const s=i.header(),o=this._reader.readMessageBody(i.bodyLength);return this._loadRecordBatch(s,o)}}return null}_readDictionaryBatch(t){var n;const r=(n=this._footer)===null||n===void 0?void 0:n.getDictionaryBatch(t);if(r&&this._handle.seek(r.offset)){const i=this._reader.readMessage(ie.DictionaryBatch);if(i!=null&&i.isDictionaryBatch()){const s=i.header(),o=this._reader.readMessageBody(i.bodyLength),a=this._loadDictionaryBatch(s,o);this.dictionaries.set(s.id,a)}}}_readFooter(){const{_handle:t}=this,n=t.size-VP,r=t.readInt32(n),i=t.readAt(n-r,r);return Rp.decode(i)}_readNextMessageAndValidate(t){var n;if(this._footer||this.open(),this._footer&&this._recordBatchIndex<this.numRecordBatches){const r=(n=this._footer)===null||n===void 0?void 0:n.getRecordBatch(this._recordBatchIndex);if(r&&this._handle.seek(r.offset))return this._reader.readMessage(t)}return null}}class Ogt extends gb{get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}constructor(t,...n){const r=typeof n[0]!="number"?n.shift():void 0,i=n[0]instanceof Map?n.shift():void 0;super(t instanceof ub?t:new ub(t,r),i)}isFile(){return!0}isAsync(){return!0}open(t){const n=Object.create(null,{open:{get:()=>super.open}});return W(this,void 0,void 0,function*(){if(!this.closed&&!this._footer){this.schema=(this._footer=yield this._readFooter()).schema;for(const r of this._footer.dictionaryBatches())r&&(yield this._readDictionaryBatch(this._dictionaryIndex++))}return yield n.open.call(this,t)})}readRecordBatch(t){var n;return W(this,void 0,void 0,function*(){if(this.closed)return null;this._footer||(yield this.open());const r=(n=this._footer)===null||n===void 0?void 0:n.getRecordBatch(t);if(r&&(yield this._handle.seek(r.offset))){const i=yield this._reader.readMessage(ie.RecordBatch);if(i!=null&&i.isRecordBatch()){const s=i.header(),o=yield this._reader.readMessageBody(i.bodyLength);return this._loadRecordBatch(s,o)}}return null})}_readDictionaryBatch(t){var n;return W(this,void 0,void 0,function*(){const r=(n=this._footer)===null||n===void 0?void 0:n.getDictionaryBatch(t);if(r&&(yield this._handle.seek(r.offset))){const i=yield this._reader.readMessage(ie.DictionaryBatch);if(i!=null&&i.isDictionaryBatch()){const s=i.header(),o=yield this._reader.readMessageBody(i.bodyLength),a=this._loadDictionaryBatch(s,o);this.dictionaries.set(s.id,a)}}})}_readFooter(){return W(this,void 0,void 0,function*(){const{_handle:t}=this;t._pending&&(yield t._pending);const n=t.size-VP,r=yield t.readInt32(n),i=yield t.readAt(n-r,r);return Rp.decode(i)})}_readNextMessageAndValidate(t){return W(this,void 0,void 0,function*(){if(this._footer||(yield this.open()),this._footer&&this._recordBatchIndex<this.numRecordBatches){const n=this._footer.getRecordBatch(this._recordBatchIndex);if(n&&(yield this._handle.seek(n.offset)))return yield this._reader.readMessage(t)}return null})}}class Fgt extends mb{constructor(t,n){super(t,n)}_loadVectors(t,n,r){return new Hmt(n,t.nodes,t.buffers,this.dictionaries,this.schema.metadataVersion).visitMany(r)}}function HP(e,t){return t&&typeof t.autoDestroy=="boolean"?t.autoDestroy:e.autoDestroy}function*ZN(e){const t=pi.from(e);try{if(!t.open({autoDestroy:!1}).closed)do yield t;while(!t.reset().open().closed)}finally{t.cancel()}}function JN(e){return nn(this,arguments,function*(){const n=yield K(pi.from(e));try{if(!(yield K(n.open({autoDestroy:!1}))).closed)do yield yield K(n);while(!(yield K(n.reset().open())).closed)}finally{yield K(n.cancel())}})}function Bgt(e){return new pb(new Fgt(e))}function Rgt(e){const t=e.peek(Cy+7&-8);return t&&t.byteLength>=4?FE(t)?new YP(new WP(e.read())):new pb(new mb(e)):new pb(new mb(function*(){}()))}function Lgt(e){return W(this,void 0,void 0,function*(){const t=yield e.peek(Cy+7&-8);return t&&t.byteLength>=4?FE(t)?new YP(new WP(yield e.read())):new yb(new gb(e)):new yb(new gb(function(){return nn(this,arguments,function*(){})}()))})}function Cgt(e){return W(this,void 0,void 0,function*(){const{size:t}=yield e.stat(),n=new ub(e,t);return t>=kgt&&FE(yield n.readAt(0,Cy+7&-8))?new Dgt(new Ogt(n)):new yb(new gb(n))})}class Je extends Ft{static assemble(...t){const n=i=>i.flatMap(s=>Array.isArray(s)?n(s):s instanceof ar?s.data.children:s.data),r=new Je;return r.visitMany(n(t)),r}constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}visit(t){if(t instanceof se)return this.visitMany(t.data),this;const{type:n}=t;if(!at.isDictionary(n)){const{length:r}=t;if(r>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");if(at.isUnion(n))this.nodes.push(new Ja(r,0));else{const{nullCount:i}=t;at.isNull(n)||Ui.call(this,i<=0?new Uint8Array(0):tb(t.offset,r,t.nullBitmap)),this.nodes.push(new Ja(r,i))}}return super.visit(t)}visitNull(t){return this}visitDictionary(t){return this.visit(t.clone(t.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function Ui(e){const t=e.byteLength+7&-8;return this.buffers.push(e),this.bufferRegions.push(new Ns(this._byteLength,t)),this._byteLength+=t,this}function Ugt(e){var t;const{type:n,length:r,typeIds:i,valueOffsets:s}=e;if(Ui.call(this,i),n.mode===cn.Sparse)return Ox.call(this,e);if(n.mode===cn.Dense){if(e.offset<=0)return Ui.call(this,s),Ox.call(this,e);{const o=new Int32Array(r),a=Object.create(null),l=Object.create(null);for(let c,u,f=-1;++f<r;)(c=i[f])!==void 0&&((u=a[c])===void 0&&(u=a[c]=s[f]),o[f]=s[f]-u,l[c]=((t=l[c])!==null&&t!==void 0?t:0)+1);Ui.call(this,o),this.visitMany(e.children.map((c,u)=>{const f=n.typeIds[u],d=a[f],h=l[f];return c.slice(d,Math.min(r,h))}))}}return this}function Pgt(e){let t;return e.nullCount>=e.length?Ui.call(this,new Uint8Array(0)):(t=e.values)instanceof Uint8Array?Ui.call(this,tb(e.offset,e.length,t)):Ui.call(this,eb(e.values))}function Ko(e){return Ui.call(this,e.values.subarray(0,e.length*e.stride))}function GP(e){const{length:t,values:n,valueOffsets:r}=e,{[0]:i,[t]:s}=r,o=Math.min(s-i,n.byteLength-i);return Ui.call(this,o9(-i,t+1,r)),Ui.call(this,n.subarray(i,i+o)),this}function BE(e){const{length:t,valueOffsets:n}=e;if(n){const{[0]:r,[t]:i}=n;return Ui.call(this,o9(-r,t+1,n)),this.visit(e.children[0].slice(r,i-r))}return this.visit(e.children[0])}function Ox(e){return this.visitMany(e.type.children.map((t,n)=>e.children[n]).filter(Boolean))[0]}Je.prototype.visitBool=Pgt;Je.prototype.visitInt=Ko;Je.prototype.visitFloat=Ko;Je.prototype.visitUtf8=GP;Je.prototype.visitBinary=GP;Je.prototype.visitFixedSizeBinary=Ko;Je.prototype.visitDate=Ko;Je.prototype.visitTimestamp=Ko;Je.prototype.visitTime=Ko;Je.prototype.visitDecimal=Ko;Je.prototype.visitList=BE;Je.prototype.visitStruct=Ox;Je.prototype.visitUnion=Ugt;Je.prototype.visitInterval=Ko;Je.prototype.visitDuration=Ko;Je.prototype.visitFixedSizeList=BE;Je.prototype.visitMap=BE;class XP extends EE{static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,n){throw new Error('"throughDOM" not available in this environment')}constructor(t){super(),this._position=0,this._started=!1,this._sink=new Sm,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,xr(t)||(t={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy=typeof t.autoDestroy=="boolean"?t.autoDestroy:!0,this._writeLegacyIpcFormat=typeof t.writeLegacyIpcFormat=="boolean"?t.writeLegacyIpcFormat:!1}toString(t=!1){return this._sink.toString(t)}toUint8Array(t=!1){return this._sink.toUint8Array(t)}writeAll(t){return $c(t)?t.then(n=>this.writeAll(n)):vd(t)?UE(this,t):CE(this,t)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(t){return this._sink.toDOMStream(t)}toNodeStream(t){return this._sink.toNodeStream(t)}close(){return this.reset()._sink.close()}abort(t){return this.reset()._sink.abort(t)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(t=this._sink,n=null){return t===this._sink||t instanceof Sm?this._sink=t:(this._sink=new Sm,t&&i0t(t)?this.toDOMStream({type:"bytes"}).pipeTo(t):t&&s0t(t)&&this.toNodeStream({objectMode:!1}).pipe(t)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,(!n||!$x(n,this._schema))&&(n==null?(this._position=0,this._schema=null):(this._started=!0,this._schema=n,this._writeSchema(n))),this}write(t){let n=null;if(this._sink){if(t==null)return this.finish()&&void 0;if(t instanceof Bn&&!(n=t.schema))return this.finish()&&void 0;if(t instanceof ar&&!(n=t.schema))return this.finish()&&void 0}else throw new Error("RecordBatchWriter is closed");if(n&&!$x(n,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,n)}t instanceof ar?t instanceof kE||this._writeRecordBatch(t):t instanceof Bn?this.writeAll(t.batches):Oy(t)&&this.writeAll(t)}_writeMessage(t,n=8){const r=n-1,i=Gn.encode(t),s=i.byteLength,o=this._writeLegacyIpcFormat?4:8,a=s+o+r&~r,l=a-s-o;return t.headerType===ie.RecordBatch?this._recordBatchBlocks.push(new Ka(a,t.bodyLength,this._position)):t.headerType===ie.DictionaryBatch&&this._dictionaryBlocks.push(new Ka(a,t.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(a-o)),s>0&&this._write(i),this._writePadding(l)}_write(t){if(this._started){const n=Jt(t);n&&n.byteLength>0&&(this._sink.write(n),this._position+=n.byteLength)}return this}_writeSchema(t){return this._writeMessage(Gn.from(t))}_writeFooter(t){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(Lp)}_writePadding(t){return t>0?this._write(new Uint8Array(t)):this}_writeRecordBatch(t){const{byteLength:n,nodes:r,bufferRegions:i,buffers:s}=Je.assemble(t),o=new jr(t.numRows,r,i),a=Gn.from(o,n);return this._writeDictionaries(t)._writeMessage(a)._writeBodyBuffers(s)}_writeDictionaryBatch(t,n,r=!1){this._dictionaryDeltaOffsets.set(n,t.length+(this._dictionaryDeltaOffsets.get(n)||0));const{byteLength:i,nodes:s,bufferRegions:o,buffers:a}=Je.assemble(new se([t])),l=new jr(t.length,s,o),c=new js(l,n,r),u=Gn.from(c,i);return this._writeMessage(u)._writeBodyBuffers(a)}_writeBodyBuffers(t){let n,r,i;for(let s=-1,o=t.length;++s<o;)(n=t[s])&&(r=n.byteLength)>0&&(this._write(n),(i=(r+7&-8)-r)>0&&this._writePadding(i));return this}_writeDictionaries(t){for(let[n,r]of t.dictionaries){let i=this._dictionaryDeltaOffsets.get(n)||0;if(i===0||(r=r==null?void 0:r.slice(i)).length>0)for(const s of r.data)this._writeDictionaryBatch(s,n,i>0),i+=s.length}return this}}class RE extends XP{static writeAll(t,n){const r=new RE(n);return $c(t)?t.then(i=>r.writeAll(i)):vd(t)?UE(r,t):CE(r,t)}}class LE extends XP{static writeAll(t){const n=new LE;return $c(t)?t.then(r=>n.writeAll(r)):vd(t)?UE(n,t):CE(n,t)}constructor(){super(),this._autoDestroy=!0}_writeSchema(t){return this._writeMagic()._writePadding(2)}_writeFooter(t){const n=Rp.encode(new Rp(t,In.V5,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(t)._write(n)._write(Int32Array.of(n.byteLength))._writeMagic()}}function CE(e,t){let n=t;t instanceof Bn&&(n=t.batches,e.reset(void 0,t.schema));for(const r of n)e.write(r);return e.finish()}function UE(e,t){var n,r,i,s,o,a,l;return W(this,void 0,void 0,function*(){try{for(n=!0,r=Br(t);i=yield r.next(),s=i.done,!s;n=!0){l=i.value,n=!1;const c=l;e.write(c)}}catch(c){o={error:c}}finally{try{!n&&!s&&(a=r.return)&&(yield a.call(r))}finally{if(o)throw o.error}}return e.finish()})}function zgt(e,t="stream"){return(t==="stream"?RE:LE).writeAll(e).toUint8Array(!0)}var Xt,ae=(Xt=class{constructor(){}static DECIMAL(t,n){return t===void 0&&n===void 0?Xt.default_DECIMAL:{name:"DECIMAL",width:t,scale:n}}static LIST(t){return{name:"LIST",valueType:t}}static MAP(t,n){return{name:"MAP",keyType:t,valueType:n}}static STRUCT(t){return{name:"STRUCT",entries:t}}static STRUCT_entry(t,n){return{key:t,valueType:n}}static UNION(t){return{name:"UNION",alternatives:t}}static UNION_alternative(t,n){return{tag:t,valueType:n}}static VARCHAR_withLength(t){return{name:"VARCHAR",length:t}}},Zt(Xt,"BIGINT",{name:"BIGINT"}),Zt(Xt,"BIT",{name:"BIT"}),Zt(Xt,"BOOLEAN",{name:"BOOLEAN"}),Zt(Xt,"BLOB",{name:"BLOB"}),Zt(Xt,"DATE",{name:"DATE"}),Zt(Xt,"DOUBLE",{name:"DOUBLE"}),Zt(Xt,"default_DECIMAL",{name:"DECIMAL"}),Zt(Xt,"ENUM",{name:"ENUM"}),Zt(Xt,"HUGEINT",{name:"HUGEINT"}),Zt(Xt,"INTEGER",{name:"INTEGER"}),Zt(Xt,"INTERVAL",{name:"INTERVAL"}),Zt(Xt,"REAL",{name:"REAL"}),Zt(Xt,"SMALLINT",{name:"SMALLINT"}),Zt(Xt,"SQLNULL",{name:"SQLNULL"}),Zt(Xt,"TIME",{name:"TIME"}),Zt(Xt,"TIMESTAMP",{name:"TIMESTAMP"}),Zt(Xt,"TIMESTAMP_S",{name:"TIMESTAMP_S"}),Zt(Xt,"TIMESTAMP_MS",{name:"TIMESTAMP_MS"}),Zt(Xt,"TIMESTAMP_NS",{name:"TIMESTAMP_NS"}),Zt(Xt,"TIMESTAMP_TZ",{name:"TIMESTAMP_TZ"}),Zt(Xt,"TINYINT",{name:"TINYINT"}),Zt(Xt,"UBIGINT",{name:"UBIGINT"}),Zt(Xt,"UINTEGER",{name:"UINTEGER"}),Zt(Xt,"USMALLINT",{name:"USMALLINT"}),Zt(Xt,"UTINYINT",{name:"UTINYINT"}),Zt(Xt,"UUID",{name:"UUID"}),Zt(Xt,"VARCHAR",{name:"VARCHAR"}),Xt),jgt=Object.create,QP=Object.defineProperty,Vgt=Object.getOwnPropertyDescriptor,Ygt=Object.getOwnPropertyNames,qgt=Object.getPrototypeOf,Wgt=Object.prototype.hasOwnProperty,Hgt=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Ggt=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of Ygt(t))!Wgt.call(e,i)&&i!==n&&QP(e,i,{get:()=>t[i],enumerable:!(r=Vgt(t,i))||r.enumerable});return e},Xgt=(e,t,n)=>(n=e!=null?jgt(qgt(e)):{},Ggt(t||!e||!e.__esModule?QP(n,"default",{value:e,enumerable:!0}):n,e)),Qgt=Hgt((e,t)=>{t.exports=Worker}),Kgt=(e=>(e[e.UNDEFINED=0]="UNDEFINED",e[e.AUTOMATIC=1]="AUTOMATIC",e[e.READ_ONLY=2]="READ_ONLY",e[e.READ_WRITE=3]="READ_WRITE",e))(Kgt||{}),Zgt=(e=>(e[e.IDENTIFIER=0]="IDENTIFIER",e[e.NUMERIC_CONSTANT=1]="NUMERIC_CONSTANT",e[e.STRING_CONSTANT=2]="STRING_CONSTANT",e[e.OPERATOR=3]="OPERATOR",e[e.KEYWORD=4]="KEYWORD",e[e.COMMENT=5]="COMMENT",e))(Zgt||{}),Fx=(e=>(e[e.NONE=0]="NONE",e[e.DEBUG=1]="DEBUG",e[e.INFO=2]="INFO",e[e.WARNING=3]="WARNING",e[e.ERROR=4]="ERROR",e))(Fx||{}),Jgt=(e=>(e[e.NONE=0]="NONE",e[e.CONNECT=1]="CONNECT",e[e.DISCONNECT=2]="DISCONNECT",e[e.OPEN=3]="OPEN",e[e.QUERY=4]="QUERY",e[e.INSTANTIATE=5]="INSTANTIATE",e))(Jgt||{}),t1t=(e=>(e[e.NONE=0]="NONE",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR",e[e.START=3]="START",e[e.RUN=4]="RUN",e[e.CAPTURE=5]="CAPTURE",e))(t1t||{}),e1t=(e=>(e[e.NONE=0]="NONE",e[e.WEB_WORKER=1]="WEB_WORKER",e[e.NODE_WORKER=2]="NODE_WORKER",e[e.BINDINGS=3]="BINDINGS",e[e.ASYNC_DUCKDB=4]="ASYNC_DUCKDB",e))(e1t||{}),n1t=class{constructor(e=2){this.level=e}log(e){e.level>=this.level&&console.log(e)}},r1t=(e=>(e[e.SUCCESS=0]="SUCCESS",e))(r1t||{}),i1t=class{constructor(e,t){this._bindings=e,this._conn=t}get bindings(){return this._bindings}async close(){return this._bindings.disconnect(this._conn)}useUnsafe(e){return e(this._bindings,this._conn)}async query(e){this._bindings.logger.log({timestamp:new Date,level:2,origin:4,topic:4,event:4,value:e});let t=await this._bindings.runQuery(this._conn,e),n=pi.from(t);return console.assert(n.isSync(),"Reader is not sync"),console.assert(n.isFile(),"Reader is not file"),new Bn(n)}async send(e){this._bindings.logger.log({timestamp:new Date,level:2,origin:4,topic:4,event:4,value:e});let t=await this._bindings.startPendingQuery(this._conn,e);for(;t==null;)t=await this._bindings.pollPendingQuery(this._conn);let n=new KP(this._bindings,this._conn,t),r=await pi.from(n);return console.assert(r.isAsync()),console.assert(r.isStream()),r}async cancelSent(){return await this._bindings.cancelPendingQuery(this._conn)}async getTableNames(e){return await this._bindings.getTableNames(this._conn,e)}async prepare(e){let t=await this._bindings.createPrepared(this._conn,e);return new s1t(this._bindings,this._conn,t)}async insertArrowTable(e,t){let n=zgt(e,"stream");await this.insertArrowFromIPCStream(n,t)}async insertArrowFromIPCStream(e,t){await this._bindings.insertArrowFromIPCStream(this._conn,e,t)}async insertCSVFromPath(e,t){await this._bindings.insertCSVFromPath(this._conn,e,t)}async insertJSONFromPath(e,t){await this._bindings.insertJSONFromPath(this._conn,e,t)}},KP=class{constructor(e,t,n){this.db=e,this.conn=t,this.header=n,this._first=!0,this._depleted=!1,this._inFlight=null}async next(){if(this._first)return this._first=!1,{done:!1,value:this.header};if(this._depleted)return{done:!0,value:null};let e;return this._inFlight!=null?(e=await this._inFlight,this._inFlight=null):e=await this.db.fetchQueryResults(this.conn),this._depleted=e.length==0,this._depleted||(this._inFlight=this.db.fetchQueryResults(this.conn)),{done:this._depleted,value:e}}[Symbol.asyncIterator](){return this}},s1t=class{constructor(e,t,n){this.bindings=e,this.connectionId=t,this.statementId=n}async close(){await this.bindings.closePrepared(this.connectionId,this.statementId)}async query(...e){let t=await this.bindings.runPrepared(this.connectionId,this.statementId,e),n=pi.from(t);return console.assert(n.isSync()),console.assert(n.isFile()),new Bn(n)}async send(...e){let t=await this.bindings.sendPrepared(this.connectionId,this.statementId,e),n=new KP(this.bindings,this.connectionId,t),r=await pi.from(n);return console.assert(r.isAsync()),console.assert(r.isStream()),r}},o1t=(e=>(e.CANCEL_PENDING_QUERY="CANCEL_PENDING_QUERY",e.CLOSE_PREPARED="CLOSE_PREPARED",e.COLLECT_FILE_STATISTICS="COLLECT_FILE_STATISTICS",e.CONNECT="CONNECT",e.COPY_FILE_TO_BUFFER="COPY_FILE_TO_BUFFER",e.COPY_FILE_TO_PATH="COPY_FILE_TO_PATH",e.CREATE_PREPARED="CREATE_PREPARED",e.DISCONNECT="DISCONNECT",e.DROP_FILE="DROP_FILE",e.DROP_FILES="DROP_FILES",e.EXPORT_FILE_STATISTICS="EXPORT_FILE_STATISTICS",e.FETCH_QUERY_RESULTS="FETCH_QUERY_RESULTS",e.FLUSH_FILES="FLUSH_FILES",e.GET_FEATURE_FLAGS="GET_FEATURE_FLAGS",e.GET_TABLE_NAMES="GET_TABLE_NAMES",e.GET_VERSION="GET_VERSION",e.GLOB_FILE_INFOS="GLOB_FILE_INFOS",e.INSERT_ARROW_FROM_IPC_STREAM="INSERT_ARROW_FROM_IPC_STREAM",e.INSERT_CSV_FROM_PATH="IMPORT_CSV_FROM_PATH",e.INSERT_JSON_FROM_PATH="IMPORT_JSON_FROM_PATH",e.INSTANTIATE="INSTANTIATE",e.OPEN="OPEN",e.PING="PING",e.POLL_PENDING_QUERY="POLL_PENDING_QUERY",e.REGISTER_FILE_BUFFER="REGISTER_FILE_BUFFER",e.REGISTER_FILE_HANDLE="REGISTER_FILE_HANDLE",e.REGISTER_FILE_URL="REGISTER_FILE_URL",e.RESET="RESET",e.RUN_PREPARED="RUN_PREPARED",e.RUN_QUERY="RUN_QUERY",e.SEND_PREPARED="SEND_PREPARED",e.START_PENDING_QUERY="START_PENDING_QUERY",e.TOKENIZE="TOKENIZE",e))(o1t||{}),a1t=(e=>(e.CONNECTION_INFO="CONNECTION_INFO",e.ERROR="ERROR",e.FEATURE_FLAGS="FEATURE_FLAGS",e.FILE_BUFFER="FILE_BUFFER",e.FILE_INFOS="FILE_INFOS",e.FILE_SIZE="FILE_SIZE",e.FILE_STATISTICS="FILE_STATISTICS",e.INSTANTIATE_PROGRESS="INSTANTIATE_PROGRESS",e.LOG="LOG",e.OK="OK",e.PREPARED_STATEMENT_ID="PREPARED_STATEMENT_ID",e.QUERY_PLAN="QUERY_PLAN",e.QUERY_RESULT="QUERY_RESULT",e.QUERY_RESULT_CHUNK="QUERY_RESULT_CHUNK",e.QUERY_RESULT_HEADER="QUERY_RESULT_HEADER",e.QUERY_RESULT_HEADER_OR_NULL="QUERY_RESULT_HEADER_OR_NULL",e.REGISTERED_FILE="REGISTERED_FILE",e.SCRIPT_TOKENS="SCRIPT_TOKENS",e.SUCCESS="SUCCESS",e.TABLE_NAMES="TABLE_NAMES",e.VERSION_STRING="VERSION_STRING",e))(a1t||{}),qt=class{constructor(e,t){this.promiseResolver=()=>{},this.promiseRejecter=()=>{},this.type=e,this.data=t,this.promise=new Promise((n,r)=>{this.promiseResolver=n,this.promiseRejecter=r})}};function Tm(e){switch(e.typeId){case k.Binary:return{sqlType:"binary"};case k.Bool:return{sqlType:"bool"};case k.Date:return{sqlType:"date"};case k.DateDay:return{sqlType:"date32[d]"};case k.DateMillisecond:return{sqlType:"date64[ms]"};case k.Decimal:{let t=e;return{sqlType:"decimal",precision:t.precision,scale:t.scale}}case k.Float:return{sqlType:"float"};case k.Float16:return{sqlType:"float16"};case k.Float32:return{sqlType:"float32"};case k.Float64:return{sqlType:"float64"};case k.Int:return{sqlType:"int32"};case k.Int16:return{sqlType:"int16"};case k.Int32:return{sqlType:"int32"};case k.Int64:return{sqlType:"int64"};case k.Uint16:return{sqlType:"uint16"};case k.Uint32:return{sqlType:"uint32"};case k.Uint64:return{sqlType:"uint64"};case k.Uint8:return{sqlType:"uint8"};case k.IntervalDayTime:return{sqlType:"interval[dt]"};case k.IntervalYearMonth:return{sqlType:"interval[m]"};case k.List:return{sqlType:"list",valueType:Tm(e.valueType)};case k.FixedSizeBinary:return{sqlType:"fixedsizebinary",byteWidth:e.byteWidth};case k.Null:return{sqlType:"null"};case k.Utf8:return{sqlType:"utf8"};case k.Struct:return{sqlType:"struct",fields:e.children.map(t=>Bx(t.name,t.type))};case k.Map:{let t=e;return{sqlType:"map",keyType:Tm(t.keyType),valueType:Tm(t.valueType)}}case k.Time:return{sqlType:"time[s]"};case k.TimeMicrosecond:return{sqlType:"time[us]"};case k.TimeMillisecond:return{sqlType:"time[ms]"};case k.TimeNanosecond:return{sqlType:"time[ns]"};case k.TimeSecond:return{sqlType:"time[s]"};case k.Timestamp:return{sqlType:"timestamp",timezone:e.timezone||void 0};case k.TimestampSecond:return{sqlType:"timestamp[s]",timezone:e.timezone||void 0};case k.TimestampMicrosecond:return{sqlType:"timestamp[us]",timezone:e.timezone||void 0};case k.TimestampNanosecond:return{sqlType:"timestamp[ns]",timezone:e.timezone||void 0};case k.TimestampMillisecond:return{sqlType:"timestamp[ms]",timezone:e.timezone||void 0}}throw new Error("unsupported arrow type: ".concat(e.toString()))}function Bx(e,t){let n=Tm(t);return n.name=e,n}var l1t=new TextEncoder,c1t=class{constructor(e,t=null){this._onInstantiationProgress=[],this._worker=null,this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{},this._nextMessageId=0,this._pendingRequests=new Map,this._logger=e,this._onMessageHandler=this.onMessage.bind(this),this._onErrorHandler=this.onError.bind(this),this._onCloseHandler=this.onClose.bind(this),t!=null&&this.attach(t)}get logger(){return this._logger}attach(e){this._worker=e,this._worker.addEventListener("message",this._onMessageHandler),this._worker.addEventListener("error",this._onErrorHandler),this._worker.addEventListener("close",this._onCloseHandler),this._workerShutdownPromise=new Promise((t,n)=>{this._workerShutdownResolver=t})}detach(){this._worker&&(this._worker.removeEventListener("message",this._onMessageHandler),this._worker.removeEventListener("error",this._onErrorHandler),this._worker.removeEventListener("close",this._onCloseHandler),this._worker=null,this._workerShutdownResolver(null),this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{})}async terminate(){this._worker&&(this._worker.terminate(),this._worker=null,this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{})}async postTask(e,t=[]){if(!this._worker){console.error("cannot send a message since the worker is not set!");return}let n=this._nextMessageId++;return this._pendingRequests.set(n,e),this._worker.postMessage({messageId:n,type:e.type,data:e.data},t),await e.promise}onMessage(e){var t;let n=e.data;switch(n.type){case"LOG":{this._logger.log(n.data);return}case"INSTANTIATE_PROGRESS":{for(let i of this._onInstantiationProgress)i(n.data);return}}let r=this._pendingRequests.get(n.requestId);if(!r){console.warn("unassociated response: [".concat(n.requestId,", ").concat(n.type.toString(),"]"));return}if(this._pendingRequests.delete(n.requestId),n.type=="ERROR"){let i=new Error(n.data.message);i.name=n.data.name,(t=Object.getOwnPropertyDescriptor(i,"stack"))!=null&&t.writable&&(i.stack=n.data.stack),r.promiseRejecter(i);return}switch(r.type){case"CLOSE_PREPARED":case"COLLECT_FILE_STATISTICS":case"COPY_FILE_TO_PATH":case"DISCONNECT":case"DROP_FILE":case"DROP_FILES":case"FLUSH_FILES":case"INSERT_ARROW_FROM_IPC_STREAM":case"IMPORT_CSV_FROM_PATH":case"IMPORT_JSON_FROM_PATH":case"OPEN":case"PING":case"REGISTER_FILE_BUFFER":case"REGISTER_FILE_HANDLE":case"REGISTER_FILE_URL":case"RESET":if(n.type=="OK"){r.promiseResolver(n.data);return}break;case"INSTANTIATE":if(this._onInstantiationProgress=[],n.type=="OK"){r.promiseResolver(n.data);return}break;case"GLOB_FILE_INFOS":if(n.type=="FILE_INFOS"){r.promiseResolver(n.data);return}break;case"GET_VERSION":if(n.type=="VERSION_STRING"){r.promiseResolver(n.data);return}break;case"GET_FEATURE_FLAGS":if(n.type=="FEATURE_FLAGS"){r.promiseResolver(n.data);return}break;case"GET_TABLE_NAMES":if(n.type=="TABLE_NAMES"){r.promiseResolver(n.data);return}break;case"TOKENIZE":if(n.type=="SCRIPT_TOKENS"){r.promiseResolver(n.data);return}break;case"COPY_FILE_TO_BUFFER":if(n.type=="FILE_BUFFER"){r.promiseResolver(n.data);return}break;case"EXPORT_FILE_STATISTICS":if(n.type=="FILE_STATISTICS"){r.promiseResolver(n.data);return}break;case"CONNECT":if(n.type=="CONNECTION_INFO"){r.promiseResolver(n.data);return}break;case"RUN_PREPARED":case"RUN_QUERY":if(n.type=="QUERY_RESULT"){r.promiseResolver(n.data);return}break;case"SEND_PREPARED":if(n.type=="QUERY_RESULT_HEADER"){r.promiseResolver(n.data);return}break;case"START_PENDING_QUERY":if(n.type=="QUERY_RESULT_HEADER_OR_NULL"){r.promiseResolver(n.data);return}break;case"POLL_PENDING_QUERY":if(n.type=="QUERY_RESULT_HEADER_OR_NULL"){r.promiseResolver(n.data);return}break;case"CANCEL_PENDING_QUERY":if(this._onInstantiationProgress=[],n.type=="SUCCESS"){r.promiseResolver(n.data);return}break;case"FETCH_QUERY_RESULTS":if(n.type=="QUERY_RESULT_CHUNK"){r.promiseResolver(n.data);return}break;case"CREATE_PREPARED":if(n.type=="PREPARED_STATEMENT_ID"){r.promiseResolver(n.data);return}break}r.promiseRejecter(new Error("unexpected response type: ".concat(n.type.toString())))}onError(e){console.error(e),console.error("error in duckdb worker: ".concat(e.message)),this._pendingRequests.clear()}onClose(){if(this._workerShutdownResolver(null),this._pendingRequests.size!=0){console.warn("worker terminated with ".concat(this._pendingRequests.size," pending requests"));return}this._pendingRequests.clear()}async reset(){let e=new qt("RESET",null);return await this.postTask(e)}async ping(){let e=new qt("PING",null);await this.postTask(e)}async dropFile(e){let t=new qt("DROP_FILE",e);return await this.postTask(t)}async dropFiles(){let e=new qt("DROP_FILES",null);return await this.postTask(e)}async flushFiles(){let e=new qt("FLUSH_FILES",null);return await this.postTask(e)}async instantiate(e,t=null,n=r=>{}){this._onInstantiationProgress.push(n);let r=new qt("INSTANTIATE",[e,t]);return await this.postTask(r)}async getVersion(){let e=new qt("GET_VERSION",null);return await this.postTask(e)}async getFeatureFlags(){let e=new qt("GET_FEATURE_FLAGS",null);return await this.postTask(e)}async open(e){let t=new qt("OPEN",e);await this.postTask(t)}async tokenize(e){let t=new qt("TOKENIZE",e);return await this.postTask(t)}async connectInternal(){let e=new qt("CONNECT",null);return await this.postTask(e)}async connect(){let e=await this.connectInternal();return new i1t(this,e)}async disconnect(e){let t=new qt("DISCONNECT",e);await this.postTask(t)}async runQuery(e,t){let n=new qt("RUN_QUERY",[e,t]);return await this.postTask(n)}async startPendingQuery(e,t){let n=new qt("START_PENDING_QUERY",[e,t]);return await this.postTask(n)}async pollPendingQuery(e){let t=new qt("POLL_PENDING_QUERY",e);return await this.postTask(t)}async cancelPendingQuery(e){let t=new qt("CANCEL_PENDING_QUERY",e);return await this.postTask(t)}async fetchQueryResults(e){let t=new qt("FETCH_QUERY_RESULTS",e);return await this.postTask(t)}async getTableNames(e,t){let n=new qt("GET_TABLE_NAMES",[e,t]);return await this.postTask(n)}async createPrepared(e,t){let n=new qt("CREATE_PREPARED",[e,t]);return await this.postTask(n)}async closePrepared(e,t){let n=new qt("CLOSE_PREPARED",[e,t]);await this.postTask(n)}async runPrepared(e,t,n){let r=new qt("RUN_PREPARED",[e,t,n]);return await this.postTask(r)}async sendPrepared(e,t,n){let r=new qt("SEND_PREPARED",[e,t,n]);return await this.postTask(r)}async globFiles(e){let t=new qt("GLOB_FILE_INFOS",e);return await this.postTask(t)}async registerFileText(e,t){let n=l1t.encode(t);await this.registerFileBuffer(e,n)}async registerFileURL(e,t,n,r){t===void 0&&(t=e);let i=new qt("REGISTER_FILE_URL",[e,t,n,r]);await this.postTask(i)}async registerEmptyFileBuffer(e){let t=new qt("REGISTER_FILE_BUFFER",[e,new Uint8Array]);await this.postTask(t)}async registerFileBuffer(e,t){let n=new qt("REGISTER_FILE_BUFFER",[e,t]);await this.postTask(n,[t.buffer])}async registerFileHandle(e,t,n,r){let i=new qt("REGISTER_FILE_HANDLE",[e,t,n,r]);await this.postTask(i,[])}async collectFileStatistics(e,t){let n=new qt("COLLECT_FILE_STATISTICS",[e,t]);await this.postTask(n,[])}async exportFileStatistics(e){let t=new qt("EXPORT_FILE_STATISTICS",e);return await this.postTask(t,[])}async copyFileToBuffer(e){let t=new qt("COPY_FILE_TO_BUFFER",e);return await this.postTask(t)}async copyFileToPath(e,t){let n=new qt("COPY_FILE_TO_PATH",[e,t]);await this.postTask(n)}async insertArrowFromIPCStream(e,t,n){if(t.length==0)return;let r=new qt("INSERT_ARROW_FROM_IPC_STREAM",[e,t,n]);await this.postTask(r,[t.buffer])}async insertCSVFromPath(e,t,n){if(n.columns!==void 0){let i=[];for(let s in n.columns){let o=n.columns[s];i.push(Bx(s,o))}n.columnsFlat=i,delete n.columns}let r=new qt("IMPORT_CSV_FROM_PATH",[e,t,n]);await this.postTask(r)}async insertJSONFromPath(e,t,n){if(n.columns!==void 0){let i=[];for(let s in n.columns){let o=n.columns[s];i.push(Bx(s,o))}n.columnsFlat=i,delete n.columns}let r=new qt("IMPORT_JSON_FROM_PATH",[e,t,n]);await this.postTask(r)}},u1t={name:"@duckdb/duckdb-wasm",version:"1.11.0",description:"DuckDB powered by WebAssembly",license:"MIT",repository:{type:"git",url:"https://github.com/duckdb/duckdb-wasm.git"},keywords:["sql","duckdb","relational","database","data","query","wasm","analytics","olap","arrow","parquet","json","csv"],dependencies:{"apache-arrow":"^14.0.1"},devDependencies:{"@types/emscripten":"^1.39.10","@types/jasmine":"^5.1.4","@typescript-eslint/eslint-plugin":"^6.18.0","@typescript-eslint/parser":"^6.18.0",esbuild:"^0.20.0",eslint:"^8.56.0","eslint-plugin-jasmine":"^4.1.3","eslint-plugin-react":"^7.33.2","fast-glob":"^3.3.2",jasmine:"^5.1.0","jasmine-core":"^5.1.1","jasmine-spec-reporter":"^7.0.0","js-sha256":"^0.11.0",karma:"^6.4.2","karma-chrome-launcher":"^3.2.0","karma-coverage":"^2.2.1","karma-firefox-launcher":"^2.1.2","karma-jasmine":"^5.1.0","karma-jasmine-html-reporter":"^2.1.0","karma-sourcemap-loader":"^0.4.0","karma-spec-reporter":"^0.0.36","make-dir":"^4.0.0",nyc:"^15.1.0",prettier:"^3.2.4",puppeteer:"^21.7.0",rimraf:"^5.0.5",s3rver:"^3.7.1",typedoc:"^0.25.7",typescript:"^5.3.3","wasm-feature-detect":"^1.6.1","web-worker":"^1.2.0"},scripts:{"build:debug":"node bundle.mjs debug && tsc --emitDeclarationOnly","build:release":"node bundle.mjs release && tsc --emitDeclarationOnly",docs:"typedoc",report:"node ./coverage.mjs","test:node":"node --enable-source-maps ../../node_modules/jasmine/bin/jasmine ./dist/tests-node.cjs","test:node:debug":"node --inspect-brk --enable-source-maps ../../node_modules/jasmine/bin/jasmine ./dist/tests-node.cjs","test:node:coverage":"nyc -r json --report-dir ./coverage/node node ../../node_modules/jasmine/bin/jasmine ./dist/tests-node.cjs","test:firefox":"karma start ./karma/tests-firefox.cjs","test:chrome":"karma start ./karma/tests-chrome.cjs","test:chrome:eh":"karma start ./karma/tests-chrome-eh.cjs","test:chrome:coverage":"karma start ./karma/tests-chrome-coverage.cjs","test:browser":"karma start ./karma/tests-all.cjs","test:browser:debug":"karma start ./karma/tests-debug.cjs",test:"npm run test:chrome && npm run test:node","test:coverage":"npm run test:chrome:coverage && npm run test:node:coverage && npm run report",lint:"eslint src test"},files:["dist","!dist/types/test"],main:"dist/duckdb-browser.cjs",module:"dist/duckdb-browser.mjs",types:"dist/duckdb-browser.d.ts",jsdelivr:"dist/duckdb-browser.cjs",unpkg:"dist/duckdb-browser.mjs",sideEffects:!1,browser:{fs:!1,path:!1,perf_hooks:!1,os:!1,worker_threads:!1},exports:{"./dist/duckdb-mvp.wasm":"./dist/duckdb-mvp.wasm","./dist/duckdb-eh.wasm":"./dist/duckdb-eh.wasm","./dist/duckdb-coi.wasm":"./dist/duckdb-coi.wasm","./dist/duckdb-browser":"./dist/duckdb-browser.mjs","./dist/duckdb-browser.cjs":"./dist/duckdb-browser.cjs","./dist/duckdb-browser.mjs":"./dist/duckdb-browser.mjs","./dist/duckdb-browser-blocking":"./dist/duckdb-browser-blocking.mjs","./dist/duckdb-browser-blocking.mjs":"./dist/duckdb-browser-blocking.mjs","./dist/duckdb-browser-blocking.cjs":"./dist/duckdb-browser-blocking.cjs","./dist/duckdb-browser-coi.pthread.worker.js":"./dist/duckdb-browser-coi.pthread.worker.js","./dist/duckdb-browser-coi.worker.js":"./dist/duckdb-browser-coi.worker.js","./dist/duckdb-browser-eh.worker.js":"./dist/duckdb-browser-eh.worker.js","./dist/duckdb-browser-mvp.worker.js":"./dist/duckdb-browser-mvp.worker.js","./dist/duckdb-node":"./dist/duckdb-node.cjs","./dist/duckdb-node.cjs":"./dist/duckdb-node.cjs","./dist/duckdb-node-blocking":"./dist/duckdb-node-blocking.cjs","./dist/duckdb-node-blocking.cjs":"./dist/duckdb-node-blocking.cjs","./dist/duckdb-node-eh.worker.cjs":"./dist/duckdb-node-eh.worker.cjs","./dist/duckdb-node-mvp.worker.cjs":"./dist/duckdb-node-mvp.worker.cjs","./blocking":{browser:{types:"./dist/duckdb-browser-blocking.d.ts",import:"./dist/duckdb-browser-blocking.mjs",require:"./dist/duckdb-browser-blocking.cjs"},node:{types:"./dist/duckdb-node-blocking.d.ts",require:"./dist/duckdb-node-blocking.cjs",import:"./dist/duckdb-node-blocking.cjs"},types:"./dist/duckdb-browser-blocking.d.ts",import:"./dist/duckdb-browser-blocking.mjs",require:"./dist/duckdb-browser-blocking.cjs"},".":{browser:{types:"./dist/duckdb-browser.d.ts",import:"./dist/duckdb-browser.mjs",require:"./dist/duckdb-browser.cjs"},node:{types:"./dist/duckdb-node.d.ts",import:"./dist/duckdb-node.cjs",require:"./dist/duckdb-node.cjs"},types:"./dist/duckdb-browser.d.ts",import:"./dist/duckdb-browser.mjs",require:"./dist/duckdb-browser.cjs"}}},PE=u1t.version.split(".");PE[0];PE[1];PE[2];Xgt(Qgt());function f1t(){let e=new TextDecoder;return t=>(typeof SharedArrayBuffer<"u"&&t.buffer instanceof SharedArrayBuffer&&(t=new Uint8Array(t)),e.decode(t))}f1t();var d1t=(e=>(e[e.BUFFER=0]="BUFFER",e[e.NODE_FS=1]="NODE_FS",e[e.BROWSER_FILEREADER=2]="BROWSER_FILEREADER",e[e.BROWSER_FSACCESS=3]="BROWSER_FSACCESS",e[e.HTTP=4]="HTTP",e[e.S3=5]="S3",e))(d1t||{}),ZP=class{singleValue(){let{columnCount:e,rowCount:t}=this;if(e===0)throw Error("no column data");if(t===0)throw Error("no rows");if(e>1)throw Error("more than one column");if(t>1)throw Error("more than one row");return this.value(0,0)}columnNames(){let{columnCount:e}=this,t=[];for(let n=0;n<e;n++)t.push(this.columnName(n));return t}deduplicatedColumnNames(){let{columnCount:e}=this,t=[],n={};for(let r=0;r<e;r++){let i=this.columnName(r),s=(n[i]||0)+1;n[i]=s,s>1?t.push(`${i}:${s-1}`):t.push(i)}return t}toRows(){let{rowCount:e,columnCount:t}=this,n=this.deduplicatedColumnNames(),r=[];for(let i=0;i<e;i++){let s={};for(let o=0;o<t;o++)s[n[o]]=this.value(o,i);r.push(s)}return r}};function pu(e){switch(e.typeId){case k.Null:return ae.SQLNULL;case k.Int:{let{isSigned:t,bitWidth:n}=e;if(t)switch(n){case 8:return ae.TINYINT;case 16:return ae.SMALLINT;case 32:return ae.INTEGER;case 64:return ae.BIGINT;default:throw Error(`unexpected integer bit width: ${n}`)}else switch(n){case 8:return ae.UTINYINT;case 16:return ae.USMALLINT;case 32:return ae.UINTEGER;case 64:return ae.UBIGINT;default:throw Error(`unexpected integer bit width: ${n}`)}}case k.Float:{let{precision:t}=e;switch(t){case rn.HALF:throw Error("DuckDB does not support half-precision floats");case rn.SINGLE:return ae.REAL;case rn.DOUBLE:return ae.DOUBLE;default:throw Error(`unexpected precision: ${t}`)}}case k.Binary:return ae.BLOB;case k.Utf8:return ae.VARCHAR;case k.Bool:return ae.BOOLEAN;case k.Decimal:{let{precision:t,scale:n}=e;return(t==null||t===18)&&(n==null||n===3)?ae.DECIMAL():ae.DECIMAL(t,n)}case k.Date:{let{unit:t}=e;switch(t){case zr.DAY:return ae.DATE;case zr.MILLISECOND:throw Error("DuckDB does not support millisecond-unit dates");default:throw Error(`unexpected date unit: ${t}`)}}case k.Time:{let{unit:t}=e;switch(t){case rt.SECOND:throw Error("DuckDB does not support second-unit times");case rt.MILLISECOND:throw Error("DuckDB does not support millisecond-unit times");case rt.MICROSECOND:return ae.TIME;case rt.NANOSECOND:throw Error("DuckDB does not support nanosecond-unit times");default:throw Error(`unexpected time unit: ${t}`)}}case k.Timestamp:{let{unit:t,timezone:n}=e;switch(t){case rt.SECOND:if(n)throw Error("DuckDB does not support second-unit timestamps with timezone");return ae.TIMESTAMP_S;case rt.MILLISECOND:if(n)throw Error("DuckDB does not support millisecond-unit timestamps with timezone");return ae.TIMESTAMP_MS;case rt.MICROSECOND:return n?ae.TIMESTAMP_TZ:ae.TIMESTAMP;case rt.NANOSECOND:if(n)throw Error("DuckDB does not support nanosecond-unit timestamps with timezone");return ae.TIMESTAMP_NS;default:throw Error(`unexpected time unit: ${t}`)}}case k.Interval:{let{unit:t}=e;switch(t){case mr.YEAR_MONTH:throw Error("DuckDB does not support year-month intervals");case mr.DAY_TIME:throw Error("DuckDB does not support day-time intervals");case mr.MONTH_DAY_NANO:return ae.INTERVAL;default:throw Error(`unexpected interval unit: ${t}`)}}case k.List:{let{valueType:t}=e;return ae.LIST(pu(t))}case k.Struct:{let{children:t}=e,n=t.map(r=>({key:r.name,valueType:pu(r.type)}));return ae.STRUCT(n)}case k.Union:{let{mode:t}=e;switch(t){case cn.Dense:throw Error("DuckDB does not support dense unions");case cn.Sparse:{let n=e.children.map(r=>({tag:r.name,valueType:pu(r.type)}));return ae.UNION(n)}default:throw Error(`unexpected union mode: ${t}`)}}case k.FixedSizeBinary:throw Error("DuckDB does not support fixed-size binary");case k.FixedSizeList:throw Error("DuckDB does not support fixed-size lists");case k.Map:{let{keyType:t,valueType:n}=e;return ae.MAP(pu(t),pu(n))}case k.Dictionary:return ae.ENUM;default:throw Error(`unexpected type id: ${e.typeId}`)}}function h1t(e){let t="";for(let n of e)n<=31||n===34||n===39||n>=127?t+=`\\x${n.toString(16).toUpperCase().padStart(2,"0")}`:t+=String.fromCharCode(n);return t}var xi=class{toString(){return this.toDuckDBString()}},p1t=class extends xi{constructor(e){super(),this.bytes=e}toDuckDBString(){return h1t(this.bytes)}},Rx=BigInt(1e6),y1t=BigInt(1e3),m1t=BigInt(1e3),t4=BigInt(60),e4=BigInt(60),Em=BigInt(864e8),g1t=BigInt("-9223372036854775807"),b1t=BigInt("9223372036854775807");function v1t(e,t,n){let r=String(Math.abs(e)).padStart(4,"0"),i=String(t).padStart(2,"0"),s=String(n).padStart(2,"0");return`${r}-${i}-${s}${e<0?" (BC)":""}`}function JP(e){let t=Math.abs(e),n=e<0?-1:1,r=Math.floor(t/146097),i=n*r*400,s=t%146097,o=n*s*864e5,a=new Date(o),l=i+a.getUTCFullYear();l<0&&l--;let c=a.getUTCMonth()+1,u=a.getUTCDate();return v1t(l,c,u)}function w1t(e,t,n,r){let i=String(e).padStart(2,"0"),s=String(t).padStart(2,"0"),o=String(n).padStart(2,"0"),a=String(r).padStart(6,"0").replace(/0+$/,"");return`${i}:${s}:${o}${a.length>0?`.${a}`:""}`}function tz(e){let t=e%Rx,n=e/Rx,r=n%t4,i=n/t4,s=i%e4,o=i/e4;return w1t(o,s,r,t)}function ez(e){let t=e<0?e+Em:e;return tz(t)}function _1t(e){let t=e<0,n=t?-e:e,r=tz(n);return t?`-${r}`:r}function S1t(e,t,n){let r=JP(Number(e)),i=ez(t),s=n?` ${n}`:"";return`${r} ${i}${s}`}function Xv(e,t){if(e===g1t)return"-infinity";if(e===b1t)return"infinity";let n=e/Em,r=e%Em;return r<0&&(n--,r+=Em),S1t(n,r,t)}function x1t(e,t){return Xv(e*Rx,t)}function I1t(e,t){return Xv(e*y1t,t)}function T1t(e,t){return Xv(e/m1t,t)}function B_(e,t){return`${e} ${t}${e!==1?"s":""}`}function E1t(e,t,n){let r=[];if(e!==0){let i=e<0?-1:1,s=Math.abs(e),o=Math.floor(s/12),a=i*o,l=i*(s-o*12);a!==0&&r.push(B_(a,"year")),l!==0&&r.push(B_(l,"month"))}return t!==0&&r.push(B_(t,"day")),n!==BigInt(0)&&r.push(_1t(n)),r.length>0?r.join(" "):"00:00:00"}var A1t=class extends xi{constructor(e){super(),this.days=e}toDuckDBString(){return JP(this.days)}};function M1t(e){var t;return((t=new Intl.NumberFormat(e,{useGrouping:!1}).formatToParts(.1).find(n=>n.type==="decimal"))==null?void 0:t.value)??"."}var R_={};function $1t(e){let t=JSON.stringify(e);if(t in R_)return R_[t];let n=M1t(e);return R_[t]=n,n}function N1t(e,t){if(e){let{minimumFractionDigits:n,maximumFractionDigits:r,...i}=e.options??{};return t.toLocaleString(e==null?void 0:e.locales,i)}return String(t)}function k1t(e,t,n){var o,a;let r=String(t).padStart(n,"0");if(!e)return r;let i=((o=e==null?void 0:e.options)==null?void 0:o.minimumFractionDigits)??0,s=((a=e==null?void 0:e.options)==null?void 0:a.maximumFractionDigits)??20;return r.padEnd(i,"0").slice(0,s)}function n4(e,t,n){if(t>0){let r=BigInt(10)**BigInt(t),i=e<0?-e:e,s=e<0?"-":"",o=i/r,a=N1t(n,o),l=i%r,c=k1t(n,l,t),u=n?$1t(n.locales):".";return`${s}${a}${u}${c}`}return n?e.toLocaleString(n==null?void 0:n.locales,n==null?void 0:n.options):String(e)}var D1t=class extends xi{constructor(e,t){super(),this.scaledValue=e,this.scale=t}toDuckDBString(){return n4(this.scaledValue,this.scale)}toLocaleString(e,t){return n4(this.scaledValue,this.scale,{locales:e,options:t})}},O1t=class extends xi{constructor(e,t,n){super(),this.months=e,this.days=t,this.microseconds=n}toDuckDBString(){return E1t(this.months,this.days,this.microseconds)}};function Cp(e){return e==null?"NULL":typeof e=="string"?`'${e.replace("'","''")}'`:String(e)}var F1t=class extends xi{constructor(e){super(),this.values=e}toDuckDBString(){return`[${this.values.map(Cp).join(", ")}]`}},B1t=class extends xi{constructor(e){super(),this.entries=e}toDuckDBString(){return`{${this.entries.map(({key:e,value:t})=>`${Cp(e)}: ${Cp(t)}`).join(", ")}}`}},R1t=class extends xi{constructor(e){super(),this.entries=e}toDuckDBString(){return`{${this.entries.map(({key:e,value:t})=>`${Cp(e)}: ${Cp(t)}`).join(", ")}}`}},L1t=class extends xi{constructor(e){super(),this.microseconds=e}toDuckDBString(){return ez(this.microseconds)}},C1t=class extends xi{constructor(e,t){super(),this.microseconds=e,this.timezone=t}toDuckDBString(){return Xv(this.microseconds,this.timezone)}},U1t=class extends xi{constructor(e){super(),this.milliseconds=e}toDuckDBString(){return I1t(this.milliseconds)}},P1t=class extends xi{constructor(e){super(),this.nanoseconds=e}toDuckDBString(){return T1t(this.nanoseconds)}},z1t=class extends xi{constructor(e){super(),this.seconds=e}toDuckDBString(){return x1t(this.seconds)}},j1t=new TextDecoder;function V1t(e,t,n){return e.getValid(t)?n(e,t):null}function Un(e){return(t,n)=>V1t(t,n,e)}function Y1t(e,t,n,r){return Array.from({length:n-t}).map((i,s)=>r(e,t+s))}function nz(e){return new BigInt64Array(e.values.buffer,e.values.byteOffset,e.values.length/2)}function Uy(e,t){return nz(e)[t]}function q1t(e,t){let n=nz(e),r=n[t*2];return(n[t*2+1]<<BigInt(64))+(r&BigInt.asUintN(64,BigInt(-1)))}function rz(e,t){let{values:n,valueOffsets:r}=e,i=r[t],s=r[t+1];return n.subarray(i,s)}function W1t(e,t){return null}function H1t(e,t){return e.values[t]}var ss=Un(H1t);function G1t(e,t){return new p1t(rz(e,t))}var X1t=Un(G1t);function Q1t(e,t){return j1t.decode(rz(e,t))}var K1t=Un(Q1t);function Z1t(e,t){let n=e.offset+t;return(e.values[n>>3]&1<<n%8)!==0}var J1t=Un(Z1t);function tbt(e,t){return new D1t(q1t(e,t),e.type.scale)}var ebt=Un(tbt);function nbt(e,t){return new A1t(e.values[t])}var rbt=Un(nbt);function ibt(e,t){return new L1t(e.values[t])}var sbt=Un(ibt);function obt(e,t){return new z1t(Uy(e,t))}var abt=Un(obt);function lbt(e,t){return new U1t(Uy(e,t))}var cbt=Un(lbt);function ubt(e,t){return new C1t(Uy(e,t),e.type.timezone)}var fbt=Un(ubt);function dbt(e,t){return new P1t(Uy(e,t))}var hbt=Un(dbt);function pbt(e,t){return new O1t(e.values[t*4],e.values[t*4+1],Uy(e,t*2+1)/BigInt(1e3))}var ybt=Un(pbt);function mbt(e,t){let{children:n,valueOffsets:r}=e,i=r[t],s=r[t+1];return new F1t(Tbt(n[0],i,s))}var gbt=Un(mbt);function bbt(e,t){let n=[],{children:r,type:i}=e,s=i.children;for(let o=0;o<r.length;o++){let a=r[o],l=s[o].name,c=Up(a,t);n.push({key:l,value:c})}return new R1t(n)}var vbt=Un(bbt);function wbt(e,t){let{children:n,typeIds:r}=e,i=r[t],s=e.type.typeIdToChildIndex[i],o=n[s];return Up(o,t)}function _bt(e,t){let n=[],{children:r,valueOffsets:i}=e,s=i[t],o=i[t+1],[a,l]=r[0].children;for(let c=s;c<o;c++)n.push({key:Up(a,c),value:Up(l,c)});return new B1t(n)}var Sbt=Un(_bt);function xbt(e,t){return e.dictionary&&e.dictionary.length>0?e.dictionary.get(e.values[t]):e.values[t]}var Ibt=Un(xbt);function iz(e){switch(e.typeId){case k.Null:return W1t;case k.Int:{let{isSigned:t,bitWidth:n}=e;if(t)switch(n){case 8:return ss;case 16:return ss;case 32:return ss;case 64:return ss;default:throw Error(`unexpected integer bit width: ${n}`)}else switch(n){case 8:return ss;case 16:return ss;case 32:return ss;case 64:return ss;default:throw Error(`unexpected integer bit width: ${n}`)}}case k.Float:{let{precision:t}=e;switch(t){case rn.HALF:throw Error("DuckDB does not support half-precision floats");case rn.SINGLE:return ss;case rn.DOUBLE:return ss;default:throw Error(`unexpected precision: ${t}`)}}case k.Binary:return X1t;case k.Utf8:return K1t;case k.Bool:return J1t;case k.Decimal:return ebt;case k.Date:{let{unit:t}=e;switch(t){case zr.DAY:return rbt;case zr.MILLISECOND:throw Error("DuckDB does not support millisecond-unit dates");default:throw Error(`unexpected date unit: ${t}`)}}case k.Time:{let{unit:t}=e;switch(t){case rt.SECOND:throw Error("DuckDB does not support second-unit times");case rt.MILLISECOND:throw Error("DuckDB does not support millisecond-unit times");case rt.MICROSECOND:return sbt;case rt.NANOSECOND:throw Error("DuckDB does not support nanosecond-unit times");default:throw Error(`unexpected time unit: ${t}`)}}case k.Timestamp:{let{unit:t,timezone:n}=e;switch(t){case rt.SECOND:if(n)throw Error("DuckDB does not support second-unit timestamps with time zone");return abt;case rt.MILLISECOND:if(n)throw Error("DuckDB does not support millisecond-unit timestamps with time zone");return cbt;case rt.MICROSECOND:return fbt;case rt.NANOSECOND:if(n)throw Error("DuckDB does not support nanosecond-unit timestamps with time zone");return hbt;default:throw Error(`unexpected time unit: ${t}`)}}case k.Interval:{let{unit:t}=e;switch(t){case mr.YEAR_MONTH:throw Error("DuckDB does not support year-month intervals");case mr.DAY_TIME:throw Error("DuckDB does not support day-time intervals");case mr.MONTH_DAY_NANO:return ybt;default:throw Error(`unexpected interval unit: ${t}`)}}case k.List:return gbt;case k.Struct:return vbt;case k.Union:{let{mode:t}=e;switch(t){case cn.Dense:throw Error("DuckDB does not support dense unions");case cn.Sparse:return wbt;default:throw Error(`unexpected union mode: ${t}`)}}case k.FixedSizeBinary:throw Error("DuckDB does not support fixed-size binary");case k.FixedSizeList:throw Error("DuckDB does not support fixed-size lists");case k.Map:return Sbt;case k.Dictionary:return Ibt;default:throw Error(`unexpected type id: ${e.typeId}`)}}function Up(e,t){return iz(e.type)(e,t)}function Tbt(e,t,n){let r=iz(e.type);return Y1t(e,t,n,r)}var Ebt=class extends ZP{constructor(e){super(),this.recordBatch=e}get columnCount(){return this.recordBatch.schema.fields.length}get rowCount(){return this.recordBatch.data.length}columnName(e){return this.recordBatch.schema.fields[e].name}columnType(e){let t=this.recordBatch.schema.fields[e];return pu(t.type)}value(e,t){let n=this.recordBatch.data.children[e];return Up(n,t)}},L_=Object.freeze({done:!0,value:void 0}),sz=class{constructor(e){this.recordBatchIterator=e}async next(){let{done:e,value:t}=await this.recordBatchIterator.next();return t?{done:!!e,value:new Ebt(t)}:L_}async return(e){return this.recordBatchIterator.return&&await this.recordBatchIterator.return(),e?{done:!0,value:e}:L_}async throw(e){return this.recordBatchIterator.throw&&await this.recordBatchIterator.throw(e),L_}[Symbol.asyncIterator](){return this}},oz=class extends ZP{constructor(e){super(),this.iteratorDone=!1,this.totalRowsRead=0,this.batches=[],this.batchSizeRuns=[],this.iterator=e}get columnCount(){return this.batches.length===0?0:this.batches[0].columnCount}get rowCount(){return this.totalRowsRead}columnName(e){if(this.batches.length===0)throw Error("no column data");return this.batches[0].columnName(e)}columnType(e){if(this.batches.length===0)throw Error("no column data");return this.batches[0].columnType(e)}value(e,t){if(this.totalRowsRead===0)throw Error("no data");let n=0,r=t;for(let i of this.batchSizeRuns){if(r<i.rowCount){n+=Math.floor(r/i.batchSize);let s=r%i.batchSize;return this.batches[n].value(e,s)}n+=i.batchCount,r-=i.rowCount}throw Error(`Row index ${t} requested, but only ${this.totalRowsRead} row have been read so far.`)}get done(){return this.iteratorDone}async readAll(){return this.read()}async readUntil(e){return this.read(e)}async read(e){for(;!(this.iteratorDone||e!==void 0&&this.totalRowsRead>=e);){let{value:t,done:n}=await this.iterator.next();t&&(this.updateBatchSizeRuns(t),this.batches.push(t),this.totalRowsRead+=t.rowCount),n&&(this.iteratorDone=n)}}updateBatchSizeRuns(e){if(this.batchSizeRuns.length>0){let t=this.batchSizeRuns[this.batchSizeRuns.length-1];if(t.batchSize===e.rowCount){t.batchCount+=1,t.rowCount+=t.batchSize;return}}this.batchSizeRuns.push({batchCount:1,batchSize:e.rowCount,rowCount:e.rowCount})}},C_=class{constructor(e,t,n){this.connection=null,this.deferredConnection=e,this.query=t,this.args=n}async run(){let e=performance.now(),t=await this.sendQuery(),n=new sz(t),r=new oz(n);await r.readAll();let i=performance.now();return{type:"materialized",startTimeMs:e,endTimeMs:i,data:r}}async cancel(){return(this.connection||await this.getConnection()).cancelSent()}async getConnection(){return this.connection=await this.deferredConnection,this.connection}async sendQuery(){var t;let e=this.connection||await this.getConnection();return this.args&&((t=this.args)==null?void 0:t.length)>0?(await e.prepare(this.query)).send(...this.args):e.send(this.query)}},r4=class{constructor(e,t,n){this.connection=null,this.deferredConnection=e,this.query=t,this.args=n}async run(){let e=await this.sendQuery(),t=new sz(e),n=new oz(t);return{type:"streaming",arrowStream:e,dataStream:t,dataReader:n}}async cancel(){return(this.connection||await this.getConnection()).cancelSent()}async getConnection(){return this.connection=await this.deferredConnection,this.connection}async sendQuery(){var t;let e=this.connection||await this.getConnection();return this.args&&((t=this.args)==null?void 0:t.length)>0?(await e.prepare(this.query)).send(this.args):e.send(this.query)}};function i4(){throw new Error("should never be called")}function Abt(){let e=i4,t=i4;return{promise:new Promise((n,r)=>{e=n,t=r}),resolve:e,reject:t}}var Mbt=class{constructor(e){this.nextTaskId=1,this.queuedTaskIds=[],this.queuedTasksById={},this.processingQueue=!1,this.logSink=e}incompleteTaskCount(){let e=0;for(let t of this.queuedTaskIds){let n=this.queuedTasksById[t];n&&(n.state===0||n.state===1)&&e++}return e}enqueueTask(e){let t=this.createTaskId();return this.logDebug(`enqueueTask: creating task id = ${t}`),this.addQueuedTask({id:t,task:e,state:0,deferred:Abt(),cancelled:!1}),this.scheduleProcessQueueIfNeeded(),t}async cancelTask(e,t){this.logDebug(`cancelTask(${e}): called`);let n=this.queuedTasksById[e];if(!n)throw new Error(`Task with id ${e} not found`);switch(n.state){case 0:return n.cancelled?this.logDebug(`cancelTask(${e}): cancelling pending task (already cancelled)`):(this.logDebug(`cancelTask(${e}): cancelling pending task`),n.cancelled=!0,n.deferred.reject(new Error(t??"pending task cancelled")),this.scheduleProcessQueueIfNeeded()),!0;case 1:return this.logDebug(`cancelTask(${e}): cancelling running task`),n.cancelled=!0,n.task.cancel();case 2:return this.logDebug(`cancelTask(${e}): can't cancel resolved task`),!1;case 3:return this.logDebug(`cancelTask(${e}): can't cancel rejected task`),!1;default:throw n.state,new Error("unreachable")}}taskResult(e){this.logDebug(`taskResults(${e}): called`);let t=this.queuedTasksById[e];if(!t)throw new Error(`Task with id ${e} not found`);return t.deferred.promise}logDebug(e){this.logSink&&this.logSink.debug(e)}logWarn(e){this.logSink&&this.logSink.warn(e)}createTaskId(){return`t${this.nextTaskId++}`}addQueuedTask(e){this.queuedTaskIds.push(e.id),this.queuedTasksById[e.id]=e}scheduleProcessQueueIfNeeded(){this.processingQueue?this.logDebug("scheduleProcessQueueIfNeeded: processQueue already scheduled"):(this.logDebug("scheduleProcessQueueIfNeeded: scheduling processQueue"),this.processingQueue=!0,setTimeout(()=>{this.processQueue(),this.processingQueue=!1},0))}processQueue(){this.logDebug("processQueue: processing started");let e;do e=this.processFirstQueuedTask();while(e);this.logDebug("processQueue: processing completed")}processFirstQueuedTask(){if(this.queuedTaskIds.length===0)return this.logDebug("processFirstQueuedTask: queue empty"),!1;let e=this.queuedTaskIds[0];this.logDebug(`processFirstQueuedTask: processing task ${e}`);let t=this.queuedTasksById[e];if(!t)return this.logWarn(`processFirstQueuedTask: task ${e} not found in map`),this.queuedTaskIds.shift(),!0;switch(t.state){case 0:return t.cancelled?(this.logDebug(`processFirstQueuedTask: removing cancelled pending task ${e} from queue`),this.queuedTaskIds.shift(),delete this.queuedTasksById[t.id],!0):(this.logDebug(`processFirstQueuedTask: running pending task ${e}`),t.state=1,t.task.run().then(n=>{this.logDebug(`processFirstQueuedTask: task ${e} resolved`),t.state=2,t.deferred.resolve(n)}).catch(n=>{this.logDebug(`processFirstQueuedTask: task ${e} rejected`),t.state=3,t.deferred.reject(n)}).finally(()=>{this.scheduleProcessQueueIfNeeded()}),!1);case 1:return this.logDebug(`processFirstQueuedTask: task ${e} at front of queue is already running`),!1;case 2:case 3:return this.logDebug(`processFirstQueuedTask: task ${e} at front of queue is completed, removing from queue`),this.queuedTaskIds.shift(),delete this.queuedTasksById[t.id],!0;default:throw t.state,new Error("unreachable")}}},s4="CatalogChangeEvent",Am=null;async function $bt(e){let t=await(await Nbt(e)).connect();return e.skipWelcomePack||await t.query("PRAGMA MD_USE_DEFAULT"),t}async function Nbt(e){return Am||(Am=Obt(e),Am)}function kbt(e){return e?e.endsWith("/")?e:`${e}/`:"https://app.motherduck.com/"}async function Dbt(e,t){let n=az(t),r=`${e}${n}${n.length>0?"/":""}`,i=`${r}duckdb-assets.json`,s=await(await fetch(i)).json();return s.coi&&(s.coi.mainModule=r+s.coi.mainModule,s.coi.mainWorker=r+s.coi.mainWorker,s.coi.pthreadWorker=r+s.coi.pthreadWorker),s.mvp&&(s.mvp.mainModule=r+s.mvp.mainModule,s.mvp.mainWorker=r+s.mvp.mainWorker),s.eh&&(s.eh.mainModule=r+s.eh.mainModule,s.eh.mainWorker=r+s.eh.mainWorker),s}function o4(e,t){return URL.createObjectURL(new Blob([`importScripts("${t}");`],{type:"text/javascript"}))}async function Obt(e){let t=await Cbt(),n=kbt(e.duckDBAssetsURLPrefix),r=e.version||await Rbt(n),i=await Dbt(n,r),s=e.useDuckDBWasmCOI?i.coi:i.eh;if(!s)throw new Error("Could not find DuckDB WASM asset URLs in duckdb-assets.json");let o=/^https?:\/\//.test(n),a=o?o4(n,s.mainWorker):s.mainWorker,l=o&&s.pthreadWorker?o4(n,s.pthreadWorker):s.pthreadWorker,c=new Worker(a);c.addEventListener("message",y=>{var m;((m=y==null?void 0:y.data)==null?void 0:m.type)==="MD_EVENT"&&(y.data.name===s4?document.dispatchEvent(new CustomEvent(s4,{detail:y.data})):console.error("Received unknown event",y.data))}),t||c.addEventListener("message",y=>{if(y&&y.data&&y.data.type==="Initialize"){let m=new Worker(y.data.workerUrl);URL.revokeObjectURL(y.data.workerUrl),m.postMessage(y.data,[y.data.port])}});let u=e.enableDebugLogging?Fx.INFO:Fx.WARNING,f=new n1t(u),d=new c1t(f,c);await d.instantiate(s.mainModule,l),o&&(URL.revokeObjectURL(a),l&&URL.revokeObjectURL(l));let h=await d.connect();await Lbt(h,n,r),await h.query("LOAD icu;");let p=new URL(e.mdServerURL||"https://api.motherduck.com");await h.query(`SET motherduck_host='${p.hostname}';`),p.port&&await h.query(`SET motherduck_port='${p.port}';`),p.protocol==="http:"&&await h.query("SET motherduck_use_tls=false;"),await h.query(`SET motherduck_token='${e.mdToken}';`);let g=!1;for(let y=0;y<6e3;++y){if(await Fbt(h)){g=!0;break}await new Promise(m=>setTimeout(m,10))}if(!g)throw new Error("Could not initialize worker after 1 minute.");let v=e.enableDebugLogging?"debug":"error";return await h.query(`SET motherduck_log_level='${v}';`),Am=d,d}async function Fbt(e){return(await e.query("from MD_IS_NETWORK_READY();")).toArray()[0].Success}var Bbt="0.9.2",a4="app.motherduck.com",l4="app.staging.motherduck.com";async function Rbt(e){let t=e.startsWith(`https://${a4}`),n=e.startsWith(`https://${l4}`);return t||n?(await(await fetch(`${e}duckdb_version_range/${Bbt}/manifest`)).json())[n?l4:a4]:(await(await fetch(`${e}version`)).json()).version}function az(e){return!e||e.startsWith("DEV-")?"":e}async function Lbt(e,t,n){let r=az(n),i=t==="/"?`${window.origin}${r.length>0?"/":""}`:t;await e.query([`SET custom_extension_repository="${i}${r}";`,"LOAD motherduck;","RESET custom_extension_repository;"].join(""))}async function Cbt(){return new Promise(e=>{let t=URL.createObjectURL(new Blob(["self.postMessage({ canCreateWorker: !!self.Worker });"],{type:"application/javascript"})),n=new Worker(t);URL.revokeObjectURL(t),n.addEventListener("message",r);function r(i){n.removeEventListener("message",r),n.terminate(),e(i.data.canCreateWorker)}})}function Ubt(e){let t=/^[^{]*({.*})/.exec(e);if(t){let n=t[1];try{let r=JSON.parse(n);if(r.message)return r.message}catch{return e}}return e}function Pbt(e){return typeof e=="object"&&e!==null&&"message"in e&&typeof e.message=="string"}function zbt(e){if(Pbt(e))return e.message;try{return JSON.stringify(e)}catch{return String(e)}}var jbt=0;function Vbt(){return`MDConnection_${jbt++}`}var Xf,Ybt=(Xf=class{constructor(t,n,r){this.params=t,this.deferredDdbConnection=n,this.id=r,this.sequencer=new Mbt(t.logSink)}static create(t){let n=Vbt(),r=$bt(t),i=new Xf(t,r,n);return this.idMap[n]=i,i}async isInitialized(){return await this.deferredDdbConnection,!0}static getById(t){return this.idMap[t]}async tokenize(t){return(await this.deferredDdbConnection).bindings.tokenize(t)}incompleteQueryCount(){return this.sequencer.incompleteTaskCount()}enqueueQuery(t,n){return this.sequencer.enqueueTask(new C_(this.deferredDdbConnection,t,n))}async safeEvaluateQuery(t){try{return{status:"success",result:await this.evaluateQuery(t)}}catch(n){return{status:"error",err:n}}}async safeEvaluatePreparedStatement(t,...n){try{return{status:"success",result:await this.evaluatePreparedStatement(t,n)}}catch(r){return{status:"error",err:r}}}async safeEvaluateStreamingQuery(t){try{return{status:"success",result:await this.evaluateStreamingQuery(t)}}catch(n){return{status:"error",err:n}}}async safeEvaluateStreamingPreparedStatement(t,n){try{return{status:"success",result:await this.evaluateStreamingPreparedStatement(t,n)}}catch(r){return{status:"error",err:r}}}async safeEvaluateQueuedQuery(t){try{return{status:"success",result:await this.evaluateQueuedQuery(t)}}catch(n){return{status:"error",err:n}}}async evaluateQuery(t){return this.evaluateExclusive(new C_(this.deferredDdbConnection,t))}async evaluatePreparedStatement(t,n){return this.evaluateExclusive(new C_(this.deferredDdbConnection,t,n))}async evaluateStreamingQuery(t){return this.evaluateExclusive(new r4(this.deferredDdbConnection,t,void 0))}async evaluateStreamingPreparedStatement(t,n){return this.evaluateExclusive(new r4(this.deferredDdbConnection,t,n))}async evaluateExclusive(t){let n=this.sequencer.enqueueTask(t);return this.sequencer.taskResult(n).catch(c4)}async evaluateQueuedQuery(t){return this.sequencer.taskResult(t).catch(c4)}async cancelQuery(t,n){return this.sequencer.cancelTask(t,n)}async close(){return(await this.deferredDdbConnection).close()}},Xf.idMap={},Xf);function c4(e){throw new Error(Ubt(zbt(e)))}async function u4(e){if(e.type==="streaming"){const t=await e.arrowStream.readAll();return new Bn(t)}else throw Error("expected streaming result")}function qbt(e){const t=Ybt.create({mdToken:e});return{query:async n=>{const{sql:r,type:i}=n,s=await t.evaluateStreamingQuery(r);switch(i){case"arrow":return u4(s);case"json":return Array.from(await u4(s));default:case"exec":return}}}}function Wbt(){const[e,t]=xn.useState(!1),n=xn.useCallback(async r=>{br().databaseConnector(qbt(r)),t(!0)},[]);return Ut.jsxs(Ut.Fragment,{children:[Ut.jsx(Hyt,{}),Ut.jsx("div",{id:"content-pane",children:e?Ut.jsx(t0t,{}):Ut.jsx(qyt,{connect:n})})]})}U_.createRoot(document.getElementById("root")).render(Ut.jsx(Dz.StrictMode,{children:Ut.jsx(Wbt,{})}));
